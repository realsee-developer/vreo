var lv=Object.defineProperty;var iv=Object.getOwnPropertySymbols;var uv=Object.prototype.hasOwnProperty,cv=Object.prototype.propertyIsEnumerable;var tv=(_u,Tu,Cu)=>Tu in _u?lv(_u,Tu,{enumerable:!0,configurable:!0,writable:!0,value:Cu}):_u[Tu]=Cu,Ym=(_u,Tu)=>{for(var Cu in Tu||(Tu={}))uv.call(Tu,Cu)&&tv(_u,Cu,Tu[Cu]);if(iv)for(var Cu of iv(Tu))cv.call(Tu,Cu)&&tv(_u,Cu,Tu[Cu]);return _u};var hm=(_u,Tu,Cu)=>(tv(_u,typeof Tu!="symbol"?Tu+"":Tu,Cu),Cu);const p$4=function(){const Tu=document.createElement("link").relList;if(Tu&&Tu.supports&&Tu.supports("modulepreload"))return;for(const Bu of document.querySelectorAll('link[rel="modulepreload"]'))Pu(Bu);new MutationObserver(Bu=>{for(const Ru of Bu)if(Ru.type==="childList")for(const Lu of Ru.addedNodes)Lu.tagName==="LINK"&&Lu.rel==="modulepreload"&&Pu(Lu)}).observe(document,{childList:!0,subtree:!0});function Cu(Bu){const Ru={};return Bu.integrity&&(Ru.integrity=Bu.integrity),Bu.referrerpolicy&&(Ru.referrerPolicy=Bu.referrerpolicy),Bu.crossorigin==="use-credentials"?Ru.credentials="include":Bu.crossorigin==="anonymous"?Ru.credentials="omit":Ru.credentials="same-origin",Ru}function Pu(Bu){if(Bu.ep)return;Bu.ep=!0;const Ru=Cu(Bu);fetch(Bu.href,Ru)}};p$4();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(_u){if(_u.__esModule)return _u;var Tu=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(_u).forEach(function(Cu){var Pu=Object.getOwnPropertyDescriptor(_u,Cu);Object.defineProperty(Tu,Cu,Pu.get?Pu:{enumerable:!0,get:function(){return _u[Cu]}})}),Tu}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(_u){if(_u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_u)}function shouldUseNative(){try{if(!Object.assign)return!1;var _u=new String("abc");if(_u[5]="de",Object.getOwnPropertyNames(_u)[0]==="5")return!1;for(var Tu={},Cu=0;Cu<10;Cu++)Tu["_"+String.fromCharCode(Cu)]=Cu;var Pu=Object.getOwnPropertyNames(Tu).map(function(Ru){return Tu[Ru]});if(Pu.join("")!=="0123456789")return!1;var Bu={};return"abcdefghijklmnopqrst".split("").forEach(function(Ru){Bu[Ru]=Ru}),Object.keys(Object.assign({},Bu)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(_u,Tu){for(var Cu,Pu=toObject(_u),Bu,Ru=1;Ru<arguments.length;Ru++){Cu=Object(arguments[Ru]);for(var Lu in Cu)hasOwnProperty.call(Cu,Lu)&&(Pu[Lu]=Cu[Lu]);if(getOwnPropertySymbols){Bu=getOwnPropertySymbols(Cu);for(var Ou=0;Ou<Bu.length;Ou++)propIsEnumerable.call(Cu,Bu[Ou])&&(Pu[Bu[Ou]]=Cu[Bu[Ou]])}}return Pu};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=objectAssign,n$5=typeof Symbol=="function"&&Symbol.for,p$3=n$5?Symbol.for("react.element"):60103,q$2=n$5?Symbol.for("react.portal"):60106,r$5=n$5?Symbol.for("react.fragment"):60107,t$4=n$5?Symbol.for("react.strict_mode"):60108,u$4=n$5?Symbol.for("react.profiler"):60114,v$4=n$5?Symbol.for("react.provider"):60109,w$3=n$5?Symbol.for("react.context"):60110,x$2=n$5?Symbol.for("react.forward_ref"):60112,y$3=n$5?Symbol.for("react.suspense"):60113,z$1=n$5?Symbol.for("react.memo"):60115,A$3=n$5?Symbol.for("react.lazy"):60116,B$2=typeof Symbol=="function"&&Symbol.iterator;function C$4(_u){for(var Tu="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Cu=1;Cu<arguments.length;Cu++)Tu+="&args[]="+encodeURIComponent(arguments[Cu]);return"Minified React error #"+_u+"; visit "+Tu+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$4={};function F$3(_u,Tu,Cu){this.props=_u,this.context=Tu,this.refs=E$4,this.updater=Cu||D$2}F$3.prototype.isReactComponent={};F$3.prototype.setState=function(_u,Tu){if(typeof _u!="object"&&typeof _u!="function"&&_u!=null)throw Error(C$4(85));this.updater.enqueueSetState(this,_u,Tu,"setState")};F$3.prototype.forceUpdate=function(_u){this.updater.enqueueForceUpdate(this,_u,"forceUpdate")};function G$3(){}G$3.prototype=F$3.prototype;function H$3(_u,Tu,Cu){this.props=_u,this.context=Tu,this.refs=E$4,this.updater=Cu||D$2}var I$3=H$3.prototype=new G$3;I$3.constructor=H$3;l$4(I$3,F$3.prototype);I$3.isPureReactComponent=!0;var J$3={current:null},K$3=Object.prototype.hasOwnProperty,L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_u,Tu,Cu){var Pu,Bu={},Ru=null,Lu=null;if(Tu!=null)for(Pu in Tu.ref!==void 0&&(Lu=Tu.ref),Tu.key!==void 0&&(Ru=""+Tu.key),Tu)K$3.call(Tu,Pu)&&!L$4.hasOwnProperty(Pu)&&(Bu[Pu]=Tu[Pu]);var Ou=arguments.length-2;if(Ou===1)Bu.children=Cu;else if(1<Ou){for(var Du=Array(Ou),$u=0;$u<Ou;$u++)Du[$u]=arguments[$u+2];Bu.children=Du}if(_u&&_u.defaultProps)for(Pu in Ou=_u.defaultProps,Ou)Bu[Pu]===void 0&&(Bu[Pu]=Ou[Pu]);return{$$typeof:p$3,type:_u,key:Ru,ref:Lu,props:Bu,_owner:J$3.current}}function N$4(_u,Tu){return{$$typeof:p$3,type:_u.type,key:Tu,ref:_u.ref,props:_u.props,_owner:_u._owner}}function O$4(_u){return typeof _u=="object"&&_u!==null&&_u.$$typeof===p$3}function escape$1(_u){var Tu={"=":"=0",":":"=2"};return"$"+(""+_u).replace(/[=:]/g,function(Cu){return Tu[Cu]})}var P$4=/\/+/g,Q$3=[];function R$4(_u,Tu,Cu,Pu){if(Q$3.length){var Bu=Q$3.pop();return Bu.result=_u,Bu.keyPrefix=Tu,Bu.func=Cu,Bu.context=Pu,Bu.count=0,Bu}return{result:_u,keyPrefix:Tu,func:Cu,context:Pu,count:0}}function S$3(_u){_u.result=null,_u.keyPrefix=null,_u.func=null,_u.context=null,_u.count=0,10>Q$3.length&&Q$3.push(_u)}function T$2(_u,Tu,Cu,Pu){var Bu=typeof _u;(Bu==="undefined"||Bu==="boolean")&&(_u=null);var Ru=!1;if(_u===null)Ru=!0;else switch(Bu){case"string":case"number":Ru=!0;break;case"object":switch(_u.$$typeof){case p$3:case q$2:Ru=!0}}if(Ru)return Cu(Pu,_u,Tu===""?"."+U$3(_u,0):Tu),1;if(Ru=0,Tu=Tu===""?".":Tu+":",Array.isArray(_u))for(var Lu=0;Lu<_u.length;Lu++){Bu=_u[Lu];var Ou=Tu+U$3(Bu,Lu);Ru+=T$2(Bu,Ou,Cu,Pu)}else if(_u===null||typeof _u!="object"?Ou=null:(Ou=B$2&&_u[B$2]||_u["@@iterator"],Ou=typeof Ou=="function"?Ou:null),typeof Ou=="function")for(_u=Ou.call(_u),Lu=0;!(Bu=_u.next()).done;)Bu=Bu.value,Ou=Tu+U$3(Bu,Lu++),Ru+=T$2(Bu,Ou,Cu,Pu);else if(Bu==="object")throw Cu=""+_u,Error(C$4(31,Cu==="[object Object]"?"object with keys {"+Object.keys(_u).join(", ")+"}":Cu,""));return Ru}function V$3(_u,Tu,Cu){return _u==null?0:T$2(_u,"",Tu,Cu)}function U$3(_u,Tu){return typeof _u=="object"&&_u!==null&&_u.key!=null?escape$1(_u.key):Tu.toString(36)}function W$4(_u,Tu){_u.func.call(_u.context,Tu,_u.count++)}function aa$3(_u,Tu,Cu){var Pu=_u.result,Bu=_u.keyPrefix;_u=_u.func.call(_u.context,Tu,_u.count++),Array.isArray(_u)?X$3(_u,Pu,Cu,function(Ru){return Ru}):_u!=null&&(O$4(_u)&&(_u=N$4(_u,Bu+(!_u.key||Tu&&Tu.key===_u.key?"":(""+_u.key).replace(P$4,"$&/")+"/")+Cu)),Pu.push(_u))}function X$3(_u,Tu,Cu,Pu,Bu){var Ru="";Cu!=null&&(Ru=(""+Cu).replace(P$4,"$&/")+"/"),Tu=R$4(Tu,Ru,Pu,Bu),V$3(_u,aa$3,Tu),S$3(Tu)}var Y$3={current:null};function Z$3(){var _u=Y$3.current;if(_u===null)throw Error(C$4(321));return _u}var ba$3={ReactCurrentDispatcher:Y$3,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$3,IsSomeRendererActing:{current:!1},assign:l$4};react_production_min.Children={map:function(_u,Tu,Cu){if(_u==null)return _u;var Pu=[];return X$3(_u,Pu,null,Tu,Cu),Pu},forEach:function(_u,Tu,Cu){if(_u==null)return _u;Tu=R$4(null,null,Tu,Cu),V$3(_u,W$4,Tu),S$3(Tu)},count:function(_u){return V$3(_u,function(){return null},null)},toArray:function(_u){var Tu=[];return X$3(_u,Tu,null,function(Cu){return Cu}),Tu},only:function(_u){if(!O$4(_u))throw Error(C$4(143));return _u}};react_production_min.Component=F$3;react_production_min.Fragment=r$5;react_production_min.Profiler=u$4;react_production_min.PureComponent=H$3;react_production_min.StrictMode=t$4;react_production_min.Suspense=y$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$3;react_production_min.cloneElement=function(_u,Tu,Cu){if(_u==null)throw Error(C$4(267,_u));var Pu=l$4({},_u.props),Bu=_u.key,Ru=_u.ref,Lu=_u._owner;if(Tu!=null){if(Tu.ref!==void 0&&(Ru=Tu.ref,Lu=J$3.current),Tu.key!==void 0&&(Bu=""+Tu.key),_u.type&&_u.type.defaultProps)var Ou=_u.type.defaultProps;for(Du in Tu)K$3.call(Tu,Du)&&!L$4.hasOwnProperty(Du)&&(Pu[Du]=Tu[Du]===void 0&&Ou!==void 0?Ou[Du]:Tu[Du])}var Du=arguments.length-2;if(Du===1)Pu.children=Cu;else if(1<Du){Ou=Array(Du);for(var $u=0;$u<Du;$u++)Ou[$u]=arguments[$u+2];Pu.children=Ou}return{$$typeof:p$3,type:_u.type,key:Bu,ref:Ru,props:Pu,_owner:Lu}};react_production_min.createContext=function(_u,Tu){return Tu===void 0&&(Tu=null),_u={$$typeof:w$3,_calculateChangedBits:Tu,_currentValue:_u,_currentValue2:_u,_threadCount:0,Provider:null,Consumer:null},_u.Provider={$$typeof:v$4,_context:_u},_u.Consumer=_u};react_production_min.createElement=M$3;react_production_min.createFactory=function(_u){var Tu=M$3.bind(null,_u);return Tu.type=_u,Tu};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_u){return{$$typeof:x$2,render:_u}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(_u){return{$$typeof:A$3,_ctor:_u,_status:-1,_result:null}};react_production_min.memo=function(_u,Tu){return{$$typeof:z$1,type:_u,compare:Tu===void 0?null:Tu}};react_production_min.useCallback=function(_u,Tu){return Z$3().useCallback(_u,Tu)};react_production_min.useContext=function(_u,Tu){return Z$3().useContext(_u,Tu)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(_u,Tu){return Z$3().useEffect(_u,Tu)};react_production_min.useImperativeHandle=function(_u,Tu,Cu){return Z$3().useImperativeHandle(_u,Tu,Cu)};react_production_min.useLayoutEffect=function(_u,Tu){return Z$3().useLayoutEffect(_u,Tu)};react_production_min.useMemo=function(_u,Tu){return Z$3().useMemo(_u,Tu)};react_production_min.useReducer=function(_u,Tu,Cu){return Z$3().useReducer(_u,Tu,Cu)};react_production_min.useRef=function(_u){return Z$3().useRef(_u)};react_production_min.useState=function(_u){return Z$3().useState(_u)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_u){var Tu,Cu,Pu,Bu,Ru;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Lu=null,Ou=null,Du=function(){if(Lu!==null)try{var wp=_u.unstable_now();Lu(!0,wp),Lu=null}catch(Pp){throw setTimeout(Du,0),Pp}},$u=Date.now();_u.unstable_now=function(){return Date.now()-$u},Tu=function(wp){Lu!==null?setTimeout(Tu,0,wp):(Lu=wp,setTimeout(Du,0))},Cu=function(wp,Pp){Ou=setTimeout(wp,Pp)},Pu=function(){clearTimeout(Ou)},Bu=function(){return!1},Ru=_u.unstable_forceFrameRate=function(){}}else{var ku=window.performance,Fu=window.Date,Nu=window.setTimeout,Vu=window.clearTimeout;if(typeof console!="undefined"){var Gu=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Gu!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof ku=="object"&&typeof ku.now=="function")_u.unstable_now=function(){return ku.now()};else{var Hu=Fu.now();_u.unstable_now=function(){return Fu.now()-Hu}}var ju=!1,Uu=null,zu=-1,Wu=5,Qu=0;Bu=function(){return _u.unstable_now()>=Qu},Ru=function(){},_u.unstable_forceFrameRate=function(wp){0>wp||125<wp?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Wu=0<wp?Math.floor(1e3/wp):5};var qu=new MessageChannel,Yu=qu.port2;qu.port1.onmessage=function(){if(Uu!==null){var wp=_u.unstable_now();Qu=wp+Wu;try{Uu(!0,wp)?Yu.postMessage(null):(ju=!1,Uu=null)}catch(Pp){throw Yu.postMessage(null),Pp}}else ju=!1},Tu=function(wp){Uu=wp,ju||(ju=!0,Yu.postMessage(null))},Cu=function(wp,Pp){zu=Nu(function(){wp(_u.unstable_now())},Pp)},Pu=function(){Vu(zu),zu=-1}}function Xc(wp,Pp){var Ep=wp.length;wp.push(Pp);e:for(;;){var ip=Ep-1>>>1,rp=wp[ip];if(rp!==void 0&&0<Ku(rp,Pp))wp[ip]=Pp,wp[Ep]=rp,Ep=ip;else break e}}function _h(wp){return wp=wp[0],wp===void 0?null:wp}function _d(wp){var Pp=wp[0];if(Pp!==void 0){var Ep=wp.pop();if(Ep!==Pp){wp[0]=Ep;e:for(var ip=0,rp=wp.length;ip<rp;){var fp=2*(ip+1)-1,up=wp[fp],pp=fp+1,gp=wp[pp];if(up!==void 0&&0>Ku(up,Ep))gp!==void 0&&0>Ku(gp,up)?(wp[ip]=gp,wp[pp]=Ep,ip=pp):(wp[ip]=up,wp[fp]=Ep,ip=fp);else if(gp!==void 0&&0>Ku(gp,Ep))wp[ip]=gp,wp[pp]=Ep,ip=pp;else break e}}return Pp}return null}function Ku(wp,Pp){var Ep=wp.sortIndex-Pp.sortIndex;return Ep!==0?Ep:wp.id-Pp.id}var Xu=[],Ju=[],Zu=1,_c=null,_f=3,ep=!1,tp=!1,op=!1;function hp(wp){for(var Pp=_h(Ju);Pp!==null;){if(Pp.callback===null)_d(Ju);else if(Pp.startTime<=wp)_d(Ju),Pp.sortIndex=Pp.expirationTime,Xc(Xu,Pp);else break;Pp=_h(Ju)}}function cp(wp){if(op=!1,hp(wp),!tp)if(_h(Xu)!==null)tp=!0,Tu(Sp);else{var Pp=_h(Ju);Pp!==null&&Cu(cp,Pp.startTime-wp)}}function Sp(wp,Pp){tp=!1,op&&(op=!1,Pu()),ep=!0;var Ep=_f;try{for(hp(Pp),_c=_h(Xu);_c!==null&&(!(_c.expirationTime>Pp)||wp&&!Bu());){var ip=_c.callback;if(ip!==null){_c.callback=null,_f=_c.priorityLevel;var rp=ip(_c.expirationTime<=Pp);Pp=_u.unstable_now(),typeof rp=="function"?_c.callback=rp:_c===_h(Xu)&&_d(Xu),hp(Pp)}else _d(Xu);_c=_h(Xu)}if(_c!==null)var fp=!0;else{var up=_h(Ju);up!==null&&Cu(cp,up.startTime-Pp),fp=!1}return fp}finally{_c=null,_f=Ep,ep=!1}}function yp(wp){switch(wp){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Rp=Ru;_u.unstable_IdlePriority=5,_u.unstable_ImmediatePriority=1,_u.unstable_LowPriority=4,_u.unstable_NormalPriority=3,_u.unstable_Profiling=null,_u.unstable_UserBlockingPriority=2,_u.unstable_cancelCallback=function(wp){wp.callback=null},_u.unstable_continueExecution=function(){tp||ep||(tp=!0,Tu(Sp))},_u.unstable_getCurrentPriorityLevel=function(){return _f},_u.unstable_getFirstCallbackNode=function(){return _h(Xu)},_u.unstable_next=function(wp){switch(_f){case 1:case 2:case 3:var Pp=3;break;default:Pp=_f}var Ep=_f;_f=Pp;try{return wp()}finally{_f=Ep}},_u.unstable_pauseExecution=function(){},_u.unstable_requestPaint=Rp,_u.unstable_runWithPriority=function(wp,Pp){switch(wp){case 1:case 2:case 3:case 4:case 5:break;default:wp=3}var Ep=_f;_f=wp;try{return Pp()}finally{_f=Ep}},_u.unstable_scheduleCallback=function(wp,Pp,Ep){var ip=_u.unstable_now();if(typeof Ep=="object"&&Ep!==null){var rp=Ep.delay;rp=typeof rp=="number"&&0<rp?ip+rp:ip,Ep=typeof Ep.timeout=="number"?Ep.timeout:yp(wp)}else Ep=yp(wp),rp=ip;return Ep=rp+Ep,wp={id:Zu++,callback:Pp,priorityLevel:wp,startTime:rp,expirationTime:Ep,sortIndex:-1},rp>ip?(wp.sortIndex=rp,Xc(Ju,wp),_h(Xu)===null&&wp===_h(Ju)&&(op?Pu():op=!0,Cu(cp,rp-ip))):(wp.sortIndex=Ep,Xc(Xu,wp),tp||ep||(tp=!0,Tu(Sp))),wp},_u.unstable_shouldYield=function(){var wp=_u.unstable_now();hp(wp);var Pp=_h(Xu);return Pp!==_c&&_c!==null&&Pp!==null&&Pp.callback!==null&&Pp.startTime<=wp&&Pp.expirationTime<_c.expirationTime||Bu()},_u.unstable_wrapCallback=function(wp){var Pp=_f;return function(){var Ep=_f;_f=Pp;try{return wp.apply(this,arguments)}finally{_f=Ep}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=react$1.exports,n$4=objectAssign,r$4=scheduler.exports;function u$3(_u){for(var Tu="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Cu=1;Cu<arguments.length;Cu++)Tu+="&args[]="+encodeURIComponent(arguments[Cu]);return"Minified React error #"+_u+"; visit "+Tu+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$2)throw Error(u$3(227));function ba$2(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du){var $u=Array.prototype.slice.call(arguments,3);try{Tu.apply(Cu,$u)}catch(ku){this.onError(ku)}}var da$2=!1,ea$2=null,fa$2=!1,ha$2=null,ia$2={onError:function(_u){da$2=!0,ea$2=_u}};function ja$1(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du){da$2=!1,ea$2=null,ba$2.apply(ia$2,arguments)}function ka$1(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du){if(ja$1.apply(this,arguments),da$2){if(da$2){var $u=ea$2;da$2=!1,ea$2=null}else throw Error(u$3(198));fa$2||(fa$2=!0,ha$2=$u)}}var la$1=null,ma$1=null,na$1=null;function oa$1(_u,Tu,Cu){var Pu=_u.type||"unknown-event";_u.currentTarget=na$1(Cu),ka$1(Pu,Tu,void 0,_u),_u.currentTarget=null}var pa$1=null,qa$1={};function ra$1(){if(pa$1)for(var _u in qa$1){var Tu=qa$1[_u],Cu=pa$1.indexOf(_u);if(!(-1<Cu))throw Error(u$3(96,_u));if(!sa$1[Cu]){if(!Tu.extractEvents)throw Error(u$3(97,_u));sa$1[Cu]=Tu,Cu=Tu.eventTypes;for(var Pu in Cu){var Bu=void 0,Ru=Cu[Pu],Lu=Tu,Ou=Pu;if(ta$1.hasOwnProperty(Ou))throw Error(u$3(99,Ou));ta$1[Ou]=Ru;var Du=Ru.phasedRegistrationNames;if(Du){for(Bu in Du)Du.hasOwnProperty(Bu)&&ua$1(Du[Bu],Lu,Ou);Bu=!0}else Ru.registrationName?(ua$1(Ru.registrationName,Lu,Ou),Bu=!0):Bu=!1;if(!Bu)throw Error(u$3(98,Pu,_u))}}}}function ua$1(_u,Tu,Cu){if(va$1[_u])throw Error(u$3(100,_u));va$1[_u]=Tu,wa$1[_u]=Tu.eventTypes[Cu].dependencies}var sa$1=[],ta$1={},va$1={},wa$1={};function xa$1(_u){var Tu=!1,Cu;for(Cu in _u)if(_u.hasOwnProperty(Cu)){var Pu=_u[Cu];if(!qa$1.hasOwnProperty(Cu)||qa$1[Cu]!==Pu){if(qa$1[Cu])throw Error(u$3(102,Cu));qa$1[Cu]=Pu,Tu=!0}}Tu&&ra$1()}var ya$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za$1=null,Aa$1=null,Ba$1=null;function Ca$1(_u){if(_u=ma$1(_u)){if(typeof za$1!="function")throw Error(u$3(280));var Tu=_u.stateNode;Tu&&(Tu=la$1(Tu),za$1(_u.stateNode,_u.type,Tu))}}function Da$1(_u){Aa$1?Ba$1?Ba$1.push(_u):Ba$1=[_u]:Aa$1=_u}function Ea$1(){if(Aa$1){var _u=Aa$1,Tu=Ba$1;if(Ba$1=Aa$1=null,Ca$1(_u),Tu)for(_u=0;_u<Tu.length;_u++)Ca$1(Tu[_u])}}function Fa$1(_u,Tu){return _u(Tu)}function Ga$1(_u,Tu,Cu,Pu,Bu){return _u(Tu,Cu,Pu,Bu)}function Ha$1(){}var Ia$1=Fa$1,Ja$1=!1,Ka$1=!1;function La$1(){(Aa$1!==null||Ba$1!==null)&&(Ha$1(),Ea$1())}function Ma$1(_u,Tu,Cu){if(Ka$1)return _u(Tu,Cu);Ka$1=!0;try{return Ia$1(_u,Tu,Cu)}finally{Ka$1=!1,La$1()}}var Na$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa$1=Object.prototype.hasOwnProperty,Pa$1={},Qa$1={};function Ra$1(_u){return Oa$1.call(Qa$1,_u)?!0:Oa$1.call(Pa$1,_u)?!1:Na$1.test(_u)?Qa$1[_u]=!0:(Pa$1[_u]=!0,!1)}function Sa$1(_u,Tu,Cu,Pu){if(Cu!==null&&Cu.type===0)return!1;switch(typeof Tu){case"function":case"symbol":return!0;case"boolean":return Pu?!1:Cu!==null?!Cu.acceptsBooleans:(_u=_u.toLowerCase().slice(0,5),_u!=="data-"&&_u!=="aria-");default:return!1}}function Ta$1(_u,Tu,Cu,Pu){if(Tu===null||typeof Tu=="undefined"||Sa$1(_u,Tu,Cu,Pu))return!0;if(Pu)return!1;if(Cu!==null)switch(Cu.type){case 3:return!Tu;case 4:return Tu===!1;case 5:return isNaN(Tu);case 6:return isNaN(Tu)||1>Tu}return!1}function v$3(_u,Tu,Cu,Pu,Bu,Ru){this.acceptsBooleans=Tu===2||Tu===3||Tu===4,this.attributeName=Pu,this.attributeNamespace=Bu,this.mustUseProperty=Cu,this.propertyName=_u,this.type=Tu,this.sanitizeURL=Ru}var C$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_u){C$3[_u]=new v$3(_u,0,!1,_u,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_u){var Tu=_u[0];C$3[Tu]=new v$3(Tu,1,!1,_u[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_u){C$3[_u]=new v$3(_u,2,!1,_u.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_u){C$3[_u]=new v$3(_u,2,!1,_u,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_u){C$3[_u]=new v$3(_u,3,!1,_u.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(_u){C$3[_u]=new v$3(_u,3,!0,_u,null,!1)});["capture","download"].forEach(function(_u){C$3[_u]=new v$3(_u,4,!1,_u,null,!1)});["cols","rows","size","span"].forEach(function(_u){C$3[_u]=new v$3(_u,6,!1,_u,null,!1)});["rowSpan","start"].forEach(function(_u){C$3[_u]=new v$3(_u,5,!1,_u.toLowerCase(),null,!1)});var Ua$1=/[\-:]([a-z])/g;function Va$1(_u){return _u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_u){var Tu=_u.replace(Ua$1,Va$1);C$3[Tu]=new v$3(Tu,1,!1,_u,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_u){var Tu=_u.replace(Ua$1,Va$1);C$3[Tu]=new v$3(Tu,1,!1,_u,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(_u){var Tu=_u.replace(Ua$1,Va$1);C$3[Tu]=new v$3(Tu,1,!1,_u,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(_u){C$3[_u]=new v$3(_u,1,!1,_u.toLowerCase(),null,!1)});C$3.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(_u){C$3[_u]=new v$3(_u,1,!1,_u.toLowerCase(),null,!0)});var Wa$1=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa$1.hasOwnProperty("ReactCurrentDispatcher")||(Wa$1.ReactCurrentDispatcher={current:null});Wa$1.hasOwnProperty("ReactCurrentBatchConfig")||(Wa$1.ReactCurrentBatchConfig={suspense:null});function Xa$1(_u,Tu,Cu,Pu){var Bu=C$3.hasOwnProperty(Tu)?C$3[Tu]:null,Ru=Bu!==null?Bu.type===0:Pu?!1:!(!(2<Tu.length)||Tu[0]!=="o"&&Tu[0]!=="O"||Tu[1]!=="n"&&Tu[1]!=="N");Ru||(Ta$1(Tu,Cu,Bu,Pu)&&(Cu=null),Pu||Bu===null?Ra$1(Tu)&&(Cu===null?_u.removeAttribute(Tu):_u.setAttribute(Tu,""+Cu)):Bu.mustUseProperty?_u[Bu.propertyName]=Cu===null?Bu.type===3?!1:"":Cu:(Tu=Bu.attributeName,Pu=Bu.attributeNamespace,Cu===null?_u.removeAttribute(Tu):(Bu=Bu.type,Cu=Bu===3||Bu===4&&Cu===!0?"":""+Cu,Pu?_u.setAttributeNS(Pu,Tu,Cu):_u.setAttribute(Tu,Cu))))}var Ya$1=/^(.*)[\\\/]/,E$3=typeof Symbol=="function"&&Symbol.for,Za$1=E$3?Symbol.for("react.element"):60103,$a$1=E$3?Symbol.for("react.portal"):60106,ab=E$3?Symbol.for("react.fragment"):60107,bb=E$3?Symbol.for("react.strict_mode"):60108,cb=E$3?Symbol.for("react.profiler"):60114,db=E$3?Symbol.for("react.provider"):60109,eb=E$3?Symbol.for("react.context"):60110,fb=E$3?Symbol.for("react.concurrent_mode"):60111,gb=E$3?Symbol.for("react.forward_ref"):60112,hb=E$3?Symbol.for("react.suspense"):60113,ib=E$3?Symbol.for("react.suspense_list"):60120,jb=E$3?Symbol.for("react.memo"):60115,kb=E$3?Symbol.for("react.lazy"):60116,lb=E$3?Symbol.for("react.block"):60121,mb=typeof Symbol=="function"&&Symbol.iterator;function nb(_u){return _u===null||typeof _u!="object"?null:(_u=mb&&_u[mb]||_u["@@iterator"],typeof _u=="function"?_u:null)}function ob(_u){if(_u._status===-1){_u._status=0;var Tu=_u._ctor;Tu=Tu(),_u._result=Tu,Tu.then(function(Cu){_u._status===0&&(Cu=Cu.default,_u._status=1,_u._result=Cu)},function(Cu){_u._status===0&&(_u._status=2,_u._result=Cu)})}}function pb(_u){if(_u==null)return null;if(typeof _u=="function")return _u.displayName||_u.name||null;if(typeof _u=="string")return _u;switch(_u){case ab:return"Fragment";case $a$1:return"Portal";case cb:return"Profiler";case bb:return"StrictMode";case hb:return"Suspense";case ib:return"SuspenseList"}if(typeof _u=="object")switch(_u.$$typeof){case eb:return"Context.Consumer";case db:return"Context.Provider";case gb:var Tu=_u.render;return Tu=Tu.displayName||Tu.name||"",_u.displayName||(Tu!==""?"ForwardRef("+Tu+")":"ForwardRef");case jb:return pb(_u.type);case lb:return pb(_u.render);case kb:if(_u=_u._status===1?_u._result:null)return pb(_u)}return null}function qb(_u){var Tu="";do{e:switch(_u.tag){case 3:case 4:case 6:case 7:case 10:case 9:var Cu="";break e;default:var Pu=_u._debugOwner,Bu=_u._debugSource,Ru=pb(_u.type);Cu=null,Pu&&(Cu=pb(Pu.type)),Pu=Ru,Ru="",Bu?Ru=" (at "+Bu.fileName.replace(Ya$1,"")+":"+Bu.lineNumber+")":Cu&&(Ru=" (created by "+Cu+")"),Cu=`
    in `+(Pu||"Unknown")+Ru}Tu+=Cu,_u=_u.return}while(_u);return Tu}function rb(_u){switch(typeof _u){case"boolean":case"number":case"object":case"string":case"undefined":return _u;default:return""}}function sb(_u){var Tu=_u.type;return(_u=_u.nodeName)&&_u.toLowerCase()==="input"&&(Tu==="checkbox"||Tu==="radio")}function tb(_u){var Tu=sb(_u)?"checked":"value",Cu=Object.getOwnPropertyDescriptor(_u.constructor.prototype,Tu),Pu=""+_u[Tu];if(!_u.hasOwnProperty(Tu)&&typeof Cu!="undefined"&&typeof Cu.get=="function"&&typeof Cu.set=="function"){var Bu=Cu.get,Ru=Cu.set;return Object.defineProperty(_u,Tu,{configurable:!0,get:function(){return Bu.call(this)},set:function(Lu){Pu=""+Lu,Ru.call(this,Lu)}}),Object.defineProperty(_u,Tu,{enumerable:Cu.enumerable}),{getValue:function(){return Pu},setValue:function(Lu){Pu=""+Lu},stopTracking:function(){_u._valueTracker=null,delete _u[Tu]}}}}function xb(_u){_u._valueTracker||(_u._valueTracker=tb(_u))}function yb(_u){if(!_u)return!1;var Tu=_u._valueTracker;if(!Tu)return!0;var Cu=Tu.getValue(),Pu="";return _u&&(Pu=sb(_u)?_u.checked?"true":"false":_u.value),_u=Pu,_u!==Cu?(Tu.setValue(_u),!0):!1}function zb(_u,Tu){var Cu=Tu.checked;return n$4({},Tu,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Cu!=null?Cu:_u._wrapperState.initialChecked})}function Ab(_u,Tu){var Cu=Tu.defaultValue==null?"":Tu.defaultValue,Pu=Tu.checked!=null?Tu.checked:Tu.defaultChecked;Cu=rb(Tu.value!=null?Tu.value:Cu),_u._wrapperState={initialChecked:Pu,initialValue:Cu,controlled:Tu.type==="checkbox"||Tu.type==="radio"?Tu.checked!=null:Tu.value!=null}}function Bb(_u,Tu){Tu=Tu.checked,Tu!=null&&Xa$1(_u,"checked",Tu,!1)}function Cb(_u,Tu){Bb(_u,Tu);var Cu=rb(Tu.value),Pu=Tu.type;if(Cu!=null)Pu==="number"?(Cu===0&&_u.value===""||_u.value!=Cu)&&(_u.value=""+Cu):_u.value!==""+Cu&&(_u.value=""+Cu);else if(Pu==="submit"||Pu==="reset"){_u.removeAttribute("value");return}Tu.hasOwnProperty("value")?Db(_u,Tu.type,Cu):Tu.hasOwnProperty("defaultValue")&&Db(_u,Tu.type,rb(Tu.defaultValue)),Tu.checked==null&&Tu.defaultChecked!=null&&(_u.defaultChecked=!!Tu.defaultChecked)}function Eb(_u,Tu,Cu){if(Tu.hasOwnProperty("value")||Tu.hasOwnProperty("defaultValue")){var Pu=Tu.type;if(!(Pu!=="submit"&&Pu!=="reset"||Tu.value!==void 0&&Tu.value!==null))return;Tu=""+_u._wrapperState.initialValue,Cu||Tu===_u.value||(_u.value=Tu),_u.defaultValue=Tu}Cu=_u.name,Cu!==""&&(_u.name=""),_u.defaultChecked=!!_u._wrapperState.initialChecked,Cu!==""&&(_u.name=Cu)}function Db(_u,Tu,Cu){(Tu!=="number"||_u.ownerDocument.activeElement!==_u)&&(Cu==null?_u.defaultValue=""+_u._wrapperState.initialValue:_u.defaultValue!==""+Cu&&(_u.defaultValue=""+Cu))}function Fb(_u){var Tu="";return aa$2.Children.forEach(_u,function(Cu){Cu!=null&&(Tu+=Cu)}),Tu}function Gb(_u,Tu){return _u=n$4({children:void 0},Tu),(Tu=Fb(Tu.children))&&(_u.children=Tu),_u}function Hb(_u,Tu,Cu,Pu){if(_u=_u.options,Tu){Tu={};for(var Bu=0;Bu<Cu.length;Bu++)Tu["$"+Cu[Bu]]=!0;for(Cu=0;Cu<_u.length;Cu++)Bu=Tu.hasOwnProperty("$"+_u[Cu].value),_u[Cu].selected!==Bu&&(_u[Cu].selected=Bu),Bu&&Pu&&(_u[Cu].defaultSelected=!0)}else{for(Cu=""+rb(Cu),Tu=null,Bu=0;Bu<_u.length;Bu++){if(_u[Bu].value===Cu){_u[Bu].selected=!0,Pu&&(_u[Bu].defaultSelected=!0);return}Tu!==null||_u[Bu].disabled||(Tu=_u[Bu])}Tu!==null&&(Tu.selected=!0)}}function Ib(_u,Tu){if(Tu.dangerouslySetInnerHTML!=null)throw Error(u$3(91));return n$4({},Tu,{value:void 0,defaultValue:void 0,children:""+_u._wrapperState.initialValue})}function Jb(_u,Tu){var Cu=Tu.value;if(Cu==null){if(Cu=Tu.children,Tu=Tu.defaultValue,Cu!=null){if(Tu!=null)throw Error(u$3(92));if(Array.isArray(Cu)){if(!(1>=Cu.length))throw Error(u$3(93));Cu=Cu[0]}Tu=Cu}Tu==null&&(Tu=""),Cu=Tu}_u._wrapperState={initialValue:rb(Cu)}}function Kb(_u,Tu){var Cu=rb(Tu.value),Pu=rb(Tu.defaultValue);Cu!=null&&(Cu=""+Cu,Cu!==_u.value&&(_u.value=Cu),Tu.defaultValue==null&&_u.defaultValue!==Cu&&(_u.defaultValue=Cu)),Pu!=null&&(_u.defaultValue=""+Pu)}function Lb(_u){var Tu=_u.textContent;Tu===_u._wrapperState.initialValue&&Tu!==""&&Tu!==null&&(_u.value=Tu)}var Mb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb(_u){switch(_u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(_u,Tu){return _u==null||_u==="http://www.w3.org/1999/xhtml"?Nb(Tu):_u==="http://www.w3.org/2000/svg"&&Tu==="foreignObject"?"http://www.w3.org/1999/xhtml":_u}var Pb,Qb=function(_u){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(Tu,Cu,Pu,Bu){MSApp.execUnsafeLocalFunction(function(){return _u(Tu,Cu,Pu,Bu)})}:_u}(function(_u,Tu){if(_u.namespaceURI!==Mb.svg||"innerHTML"in _u)_u.innerHTML=Tu;else{for(Pb=Pb||document.createElement("div"),Pb.innerHTML="<svg>"+Tu.valueOf().toString()+"</svg>",Tu=Pb.firstChild;_u.firstChild;)_u.removeChild(_u.firstChild);for(;Tu.firstChild;)_u.appendChild(Tu.firstChild)}});function Rb(_u,Tu){if(Tu){var Cu=_u.firstChild;if(Cu&&Cu===_u.lastChild&&Cu.nodeType===3){Cu.nodeValue=Tu;return}}_u.textContent=Tu}function Sb(_u,Tu){var Cu={};return Cu[_u.toLowerCase()]=Tu.toLowerCase(),Cu["Webkit"+_u]="webkit"+Tu,Cu["Moz"+_u]="moz"+Tu,Cu}var Tb={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},Ub={},Vb={};ya$1&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),"TransitionEvent"in window||delete Tb.transitionend.transition);function Wb(_u){if(Ub[_u])return Ub[_u];if(!Tb[_u])return _u;var Tu=Tb[_u],Cu;for(Cu in Tu)if(Tu.hasOwnProperty(Cu)&&Cu in Vb)return Ub[_u]=Tu[Cu];return _u}var Xb=Wb("animationend"),Yb=Wb("animationiteration"),Zb=Wb("animationstart"),$b=Wb("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new(typeof WeakMap=="function"?WeakMap:Map);function cc(_u){var Tu=bc.get(_u);return Tu===void 0&&(Tu=new Map,bc.set(_u,Tu)),Tu}function dc(_u){var Tu=_u,Cu=_u;if(_u.alternate)for(;Tu.return;)Tu=Tu.return;else{_u=Tu;do Tu=_u,(Tu.effectTag&1026)!==0&&(Cu=Tu.return),_u=Tu.return;while(_u)}return Tu.tag===3?Cu:null}function ec(_u){if(_u.tag===13){var Tu=_u.memoizedState;if(Tu===null&&(_u=_u.alternate,_u!==null&&(Tu=_u.memoizedState)),Tu!==null)return Tu.dehydrated}return null}function fc(_u){if(dc(_u)!==_u)throw Error(u$3(188))}function gc(_u){var Tu=_u.alternate;if(!Tu){if(Tu=dc(_u),Tu===null)throw Error(u$3(188));return Tu!==_u?null:_u}for(var Cu=_u,Pu=Tu;;){var Bu=Cu.return;if(Bu===null)break;var Ru=Bu.alternate;if(Ru===null){if(Pu=Bu.return,Pu!==null){Cu=Pu;continue}break}if(Bu.child===Ru.child){for(Ru=Bu.child;Ru;){if(Ru===Cu)return fc(Bu),_u;if(Ru===Pu)return fc(Bu),Tu;Ru=Ru.sibling}throw Error(u$3(188))}if(Cu.return!==Pu.return)Cu=Bu,Pu=Ru;else{for(var Lu=!1,Ou=Bu.child;Ou;){if(Ou===Cu){Lu=!0,Cu=Bu,Pu=Ru;break}if(Ou===Pu){Lu=!0,Pu=Bu,Cu=Ru;break}Ou=Ou.sibling}if(!Lu){for(Ou=Ru.child;Ou;){if(Ou===Cu){Lu=!0,Cu=Ru,Pu=Bu;break}if(Ou===Pu){Lu=!0,Pu=Ru,Cu=Bu;break}Ou=Ou.sibling}if(!Lu)throw Error(u$3(189))}}if(Cu.alternate!==Pu)throw Error(u$3(190))}if(Cu.tag!==3)throw Error(u$3(188));return Cu.stateNode.current===Cu?_u:Tu}function hc(_u){if(_u=gc(_u),!_u)return null;for(var Tu=_u;;){if(Tu.tag===5||Tu.tag===6)return Tu;if(Tu.child)Tu.child.return=Tu,Tu=Tu.child;else{if(Tu===_u)break;for(;!Tu.sibling;){if(!Tu.return||Tu.return===_u)return null;Tu=Tu.return}Tu.sibling.return=Tu.return,Tu=Tu.sibling}}return null}function ic(_u,Tu){if(Tu==null)throw Error(u$3(30));return _u==null?Tu:Array.isArray(_u)?Array.isArray(Tu)?(_u.push.apply(_u,Tu),_u):(_u.push(Tu),_u):Array.isArray(Tu)?[_u].concat(Tu):[_u,Tu]}function jc(_u,Tu,Cu){Array.isArray(_u)?_u.forEach(Tu,Cu):_u&&Tu.call(Cu,_u)}var kc=null;function lc(_u){if(_u){var Tu=_u._dispatchListeners,Cu=_u._dispatchInstances;if(Array.isArray(Tu))for(var Pu=0;Pu<Tu.length&&!_u.isPropagationStopped();Pu++)oa$1(_u,Tu[Pu],Cu[Pu]);else Tu&&oa$1(_u,Tu,Cu);_u._dispatchListeners=null,_u._dispatchInstances=null,_u.isPersistent()||_u.constructor.release(_u)}}function mc(_u){if(_u!==null&&(kc=ic(kc,_u)),_u=kc,kc=null,_u){if(jc(_u,lc),kc)throw Error(u$3(95));if(fa$2)throw _u=ha$2,fa$2=!1,ha$2=null,_u}}function nc(_u){return _u=_u.target||_u.srcElement||window,_u.correspondingUseElement&&(_u=_u.correspondingUseElement),_u.nodeType===3?_u.parentNode:_u}function oc(_u){if(!ya$1)return!1;_u="on"+_u;var Tu=_u in document;return Tu||(Tu=document.createElement("div"),Tu.setAttribute(_u,"return;"),Tu=typeof Tu[_u]=="function"),Tu}var pc=[];function qc(_u){_u.topLevelType=null,_u.nativeEvent=null,_u.targetInst=null,_u.ancestors.length=0,10>pc.length&&pc.push(_u)}function rc(_u,Tu,Cu,Pu){if(pc.length){var Bu=pc.pop();return Bu.topLevelType=_u,Bu.eventSystemFlags=Pu,Bu.nativeEvent=Tu,Bu.targetInst=Cu,Bu}return{topLevelType:_u,eventSystemFlags:Pu,nativeEvent:Tu,targetInst:Cu,ancestors:[]}}function sc(_u){var Tu=_u.targetInst,Cu=Tu;do{if(!Cu){_u.ancestors.push(Cu);break}var Pu=Cu;if(Pu.tag===3)Pu=Pu.stateNode.containerInfo;else{for(;Pu.return;)Pu=Pu.return;Pu=Pu.tag!==3?null:Pu.stateNode.containerInfo}if(!Pu)break;Tu=Cu.tag,Tu!==5&&Tu!==6||_u.ancestors.push(Cu),Cu=tc(Pu)}while(Cu);for(Cu=0;Cu<_u.ancestors.length;Cu++){Tu=_u.ancestors[Cu];var Bu=nc(_u.nativeEvent);Pu=_u.topLevelType;var Ru=_u.nativeEvent,Lu=_u.eventSystemFlags;Cu===0&&(Lu|=64);for(var Ou=null,Du=0;Du<sa$1.length;Du++){var $u=sa$1[Du];$u&&($u=$u.extractEvents(Pu,Tu,Ru,Bu,Lu))&&(Ou=ic(Ou,$u))}mc(Ou)}}function uc(_u,Tu,Cu){if(!Cu.has(_u)){switch(_u){case"scroll":vc(Tu,"scroll",!0);break;case"focus":case"blur":vc(Tu,"focus",!0),vc(Tu,"blur",!0),Cu.set("blur",null),Cu.set("focus",null);break;case"cancel":case"close":oc(_u)&&vc(Tu,_u,!0);break;case"invalid":case"submit":case"reset":break;default:ac.indexOf(_u)===-1&&F$2(_u,Tu)}Cu.set(_u,null)}}var wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc(_u,Tu){var Cu=cc(Tu);Hc.forEach(function(Pu){uc(Pu,Tu,Cu)}),Ic.forEach(function(Pu){uc(Pu,Tu,Cu)})}function Kc(_u,Tu,Cu,Pu,Bu){return{blockedOn:_u,topLevelType:Tu,eventSystemFlags:Cu|32,nativeEvent:Bu,container:Pu}}function Lc(_u,Tu){switch(_u){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec.delete(Tu.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(Tu.pointerId)}}function Mc(_u,Tu,Cu,Pu,Bu,Ru){return _u===null||_u.nativeEvent!==Ru?(_u=Kc(Tu,Cu,Pu,Bu,Ru),Tu!==null&&(Tu=Nc(Tu),Tu!==null&&xc(Tu)),_u):(_u.eventSystemFlags|=Pu,_u)}function Oc(_u,Tu,Cu,Pu,Bu){switch(Tu){case"focus":return Bc=Mc(Bc,_u,Tu,Cu,Pu,Bu),!0;case"dragenter":return Cc=Mc(Cc,_u,Tu,Cu,Pu,Bu),!0;case"mouseover":return Dc=Mc(Dc,_u,Tu,Cu,Pu,Bu),!0;case"pointerover":var Ru=Bu.pointerId;return Ec.set(Ru,Mc(Ec.get(Ru)||null,_u,Tu,Cu,Pu,Bu)),!0;case"gotpointercapture":return Ru=Bu.pointerId,Fc.set(Ru,Mc(Fc.get(Ru)||null,_u,Tu,Cu,Pu,Bu)),!0}return!1}function Pc(_u){var Tu=tc(_u.target);if(Tu!==null){var Cu=dc(Tu);if(Cu!==null){if(Tu=Cu.tag,Tu===13){if(Tu=ec(Cu),Tu!==null){_u.blockedOn=Tu,r$4.unstable_runWithPriority(_u.priority,function(){yc(Cu)});return}}else if(Tu===3&&Cu.stateNode.hydrate){_u.blockedOn=Cu.tag===3?Cu.stateNode.containerInfo:null;return}}}_u.blockedOn=null}function Qc(_u){if(_u.blockedOn!==null)return!1;var Tu=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);if(Tu!==null){var Cu=Nc(Tu);return Cu!==null&&xc(Cu),_u.blockedOn=Tu,!1}return!0}function Sc(_u,Tu,Cu){Qc(_u)&&Cu.delete(Tu)}function Tc(){for(zc=!1;0<Ac.length;){var _u=Ac[0];if(_u.blockedOn!==null){_u=Nc(_u.blockedOn),_u!==null&&wc(_u);break}var Tu=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);Tu!==null?_u.blockedOn=Tu:Ac.shift()}Bc!==null&&Qc(Bc)&&(Bc=null),Cc!==null&&Qc(Cc)&&(Cc=null),Dc!==null&&Qc(Dc)&&(Dc=null),Ec.forEach(Sc),Fc.forEach(Sc)}function Uc(_u,Tu){_u.blockedOn===Tu&&(_u.blockedOn=null,zc||(zc=!0,r$4.unstable_scheduleCallback(r$4.unstable_NormalPriority,Tc)))}function Vc(_u){function Tu(Bu){return Uc(Bu,_u)}if(0<Ac.length){Uc(Ac[0],_u);for(var Cu=1;Cu<Ac.length;Cu++){var Pu=Ac[Cu];Pu.blockedOn===_u&&(Pu.blockedOn=null)}}for(Bc!==null&&Uc(Bc,_u),Cc!==null&&Uc(Cc,_u),Dc!==null&&Uc(Dc,_u),Ec.forEach(Tu),Fc.forEach(Tu),Cu=0;Cu<Gc.length;Cu++)Pu=Gc[Cu],Pu.blockedOn===_u&&(Pu.blockedOn=null);for(;0<Gc.length&&(Cu=Gc[0],Cu.blockedOn===null);)Pc(Cu),Cu.blockedOn===null&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb,"animationEnd",Yb,"animationIteration",Zb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b,"transitionEnd","waiting","waiting"];function ad(_u,Tu){for(var Cu=0;Cu<_u.length;Cu+=2){var Pu=_u[Cu],Bu=_u[Cu+1],Ru="on"+(Bu[0].toUpperCase()+Bu.slice(1));Ru={phasedRegistrationNames:{bubbled:Ru,captured:Ru+"Capture"},dependencies:[Pu],eventPriority:Tu},Zc.set(Pu,Tu),Yc.set(Pu,Ru),Wc[Bu]=Ru}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad($c,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);var dd=r$4.unstable_UserBlockingPriority,ed=r$4.unstable_runWithPriority,fd=!0;function F$2(_u,Tu){vc(Tu,_u,!1)}function vc(_u,Tu,Cu){var Pu=Zc.get(Tu);switch(Pu===void 0?2:Pu){case 0:Pu=gd.bind(null,Tu,1,_u);break;case 1:Pu=hd.bind(null,Tu,1,_u);break;default:Pu=id.bind(null,Tu,1,_u)}Cu?_u.addEventListener(Tu,Pu,!0):_u.addEventListener(Tu,Pu,!1)}function gd(_u,Tu,Cu,Pu){Ja$1||Ha$1();var Bu=id,Ru=Ja$1;Ja$1=!0;try{Ga$1(Bu,_u,Tu,Cu,Pu)}finally{(Ja$1=Ru)||La$1()}}function hd(_u,Tu,Cu,Pu){ed(dd,id.bind(null,_u,Tu,Cu,Pu))}function id(_u,Tu,Cu,Pu){if(fd)if(0<Ac.length&&-1<Hc.indexOf(_u))_u=Kc(null,_u,Tu,Cu,Pu),Ac.push(_u);else{var Bu=Rc(_u,Tu,Cu,Pu);if(Bu===null)Lc(_u,Pu);else if(-1<Hc.indexOf(_u))_u=Kc(Bu,_u,Tu,Cu,Pu),Ac.push(_u);else if(!Oc(Bu,_u,Tu,Cu,Pu)){Lc(_u,Pu),_u=rc(_u,Pu,null,Tu);try{Ma$1(sc,_u)}finally{qc(_u)}}}}function Rc(_u,Tu,Cu,Pu){if(Cu=nc(Pu),Cu=tc(Cu),Cu!==null){var Bu=dc(Cu);if(Bu===null)Cu=null;else{var Ru=Bu.tag;if(Ru===13){if(Cu=ec(Bu),Cu!==null)return Cu;Cu=null}else if(Ru===3){if(Bu.stateNode.hydrate)return Bu.tag===3?Bu.stateNode.containerInfo:null;Cu=null}else Bu!==Cu&&(Cu=null)}}_u=rc(_u,Pu,Cu,Tu);try{Ma$1(sc,_u)}finally{qc(_u)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(_u){kd.forEach(function(Tu){Tu=Tu+_u.charAt(0).toUpperCase()+_u.substring(1),jd[Tu]=jd[_u]})});function ld(_u,Tu,Cu){return Tu==null||typeof Tu=="boolean"||Tu===""?"":Cu||typeof Tu!="number"||Tu===0||jd.hasOwnProperty(_u)&&jd[_u]?(""+Tu).trim():Tu+"px"}function md(_u,Tu){_u=_u.style;for(var Cu in Tu)if(Tu.hasOwnProperty(Cu)){var Pu=Cu.indexOf("--")===0,Bu=ld(Cu,Tu[Cu],Pu);Cu==="float"&&(Cu="cssFloat"),Pu?_u.setProperty(Cu,Bu):_u[Cu]=Bu}}var nd=n$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(_u,Tu){if(Tu){if(nd[_u]&&(Tu.children!=null||Tu.dangerouslySetInnerHTML!=null))throw Error(u$3(137,_u,""));if(Tu.dangerouslySetInnerHTML!=null){if(Tu.children!=null)throw Error(u$3(60));if(!(typeof Tu.dangerouslySetInnerHTML=="object"&&"__html"in Tu.dangerouslySetInnerHTML))throw Error(u$3(61))}if(Tu.style!=null&&typeof Tu.style!="object")throw Error(u$3(62,""))}}function pd(_u,Tu){if(_u.indexOf("-")===-1)return typeof Tu.is=="string";switch(_u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb.html;function rd(_u,Tu){_u=_u.nodeType===9||_u.nodeType===11?_u:_u.ownerDocument;var Cu=cc(_u);Tu=wa$1[Tu];for(var Pu=0;Pu<Tu.length;Pu++)uc(Tu[Pu],_u,Cu)}function sd(){}function td(_u){if(_u=_u||(typeof document!="undefined"?document:void 0),typeof _u=="undefined")return null;try{return _u.activeElement||_u.body}catch{return _u.body}}function ud(_u){for(;_u&&_u.firstChild;)_u=_u.firstChild;return _u}function vd(_u,Tu){var Cu=ud(_u);_u=0;for(var Pu;Cu;){if(Cu.nodeType===3){if(Pu=_u+Cu.textContent.length,_u<=Tu&&Pu>=Tu)return{node:Cu,offset:Tu-_u};_u=Pu}e:{for(;Cu;){if(Cu.nextSibling){Cu=Cu.nextSibling;break e}Cu=Cu.parentNode}Cu=void 0}Cu=ud(Cu)}}function wd(_u,Tu){return _u&&Tu?_u===Tu?!0:_u&&_u.nodeType===3?!1:Tu&&Tu.nodeType===3?wd(_u,Tu.parentNode):"contains"in _u?_u.contains(Tu):_u.compareDocumentPosition?!!(_u.compareDocumentPosition(Tu)&16):!1:!1}function xd(){for(var _u=window,Tu=td();Tu instanceof _u.HTMLIFrameElement;){try{var Cu=typeof Tu.contentWindow.location.href=="string"}catch{Cu=!1}if(Cu)_u=Tu.contentWindow;else break;Tu=td(_u.document)}return Tu}function yd(_u){var Tu=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return Tu&&(Tu==="input"&&(_u.type==="text"||_u.type==="search"||_u.type==="tel"||_u.type==="url"||_u.type==="password")||Tu==="textarea"||_u.contentEditable==="true")}var zd="$",Ad="/$",Bd="$?",Cd="$!",Dd=null,Ed=null;function Fd(_u,Tu){switch(_u){case"button":case"input":case"select":case"textarea":return!!Tu.autoFocus}return!1}function Gd(_u,Tu){return _u==="textarea"||_u==="option"||_u==="noscript"||typeof Tu.children=="string"||typeof Tu.children=="number"||typeof Tu.dangerouslySetInnerHTML=="object"&&Tu.dangerouslySetInnerHTML!==null&&Tu.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd(_u){for(;_u!=null;_u=_u.nextSibling){var Tu=_u.nodeType;if(Tu===1||Tu===3)break}return _u}function Kd(_u){_u=_u.previousSibling;for(var Tu=0;_u;){if(_u.nodeType===8){var Cu=_u.data;if(Cu===zd||Cu===Cd||Cu===Bd){if(Tu===0)return _u;Tu--}else Cu===Ad&&Tu++}_u=_u.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(_u){var Tu=_u[Md];if(Tu)return Tu;for(var Cu=_u.parentNode;Cu;){if(Tu=Cu[Od]||Cu[Md]){if(Cu=Tu.alternate,Tu.child!==null||Cu!==null&&Cu.child!==null)for(_u=Kd(_u);_u!==null;){if(Cu=_u[Md])return Cu;_u=Kd(_u)}return Tu}_u=Cu,Cu=_u.parentNode}return null}function Nc(_u){return _u=_u[Md]||_u[Od],!_u||_u.tag!==5&&_u.tag!==6&&_u.tag!==13&&_u.tag!==3?null:_u}function Pd(_u){if(_u.tag===5||_u.tag===6)return _u.stateNode;throw Error(u$3(33))}function Qd(_u){return _u[Nd]||null}function Rd(_u){do _u=_u.return;while(_u&&_u.tag!==5);return _u||null}function Sd(_u,Tu){var Cu=_u.stateNode;if(!Cu)return null;var Pu=la$1(Cu);if(!Pu)return null;Cu=Pu[Tu];e:switch(Tu){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Pu=!Pu.disabled)||(_u=_u.type,Pu=!(_u==="button"||_u==="input"||_u==="select"||_u==="textarea")),_u=!Pu;break e;default:_u=!1}if(_u)return null;if(Cu&&typeof Cu!="function")throw Error(u$3(231,Tu,typeof Cu));return Cu}function Td(_u,Tu,Cu){(Tu=Sd(_u,Cu.dispatchConfig.phasedRegistrationNames[Tu]))&&(Cu._dispatchListeners=ic(Cu._dispatchListeners,Tu),Cu._dispatchInstances=ic(Cu._dispatchInstances,_u))}function Ud(_u){if(_u&&_u.dispatchConfig.phasedRegistrationNames){for(var Tu=_u._targetInst,Cu=[];Tu;)Cu.push(Tu),Tu=Rd(Tu);for(Tu=Cu.length;0<Tu--;)Td(Cu[Tu],"captured",_u);for(Tu=0;Tu<Cu.length;Tu++)Td(Cu[Tu],"bubbled",_u)}}function Vd(_u,Tu,Cu){_u&&Cu&&Cu.dispatchConfig.registrationName&&(Tu=Sd(_u,Cu.dispatchConfig.registrationName))&&(Cu._dispatchListeners=ic(Cu._dispatchListeners,Tu),Cu._dispatchInstances=ic(Cu._dispatchInstances,_u))}function Wd(_u){_u&&_u.dispatchConfig.registrationName&&Vd(_u._targetInst,null,_u)}function Xd(_u){jc(_u,Ud)}var Yd=null,Zd=null,$d=null;function ae$1(){if($d)return $d;var _u,Tu=Zd,Cu=Tu.length,Pu,Bu="value"in Yd?Yd.value:Yd.textContent,Ru=Bu.length;for(_u=0;_u<Cu&&Tu[_u]===Bu[_u];_u++);var Lu=Cu-_u;for(Pu=1;Pu<=Lu&&Tu[Cu-Pu]===Bu[Ru-Pu];Pu++);return $d=Bu.slice(_u,1<Pu?1-Pu:void 0)}function be$1(){return!0}function ce$1(){return!1}function G$2(_u,Tu,Cu,Pu){this.dispatchConfig=_u,this._targetInst=Tu,this.nativeEvent=Cu,_u=this.constructor.Interface;for(var Bu in _u)_u.hasOwnProperty(Bu)&&((Tu=_u[Bu])?this[Bu]=Tu(Cu):Bu==="target"?this.target=Pu:this[Bu]=Cu[Bu]);return this.isDefaultPrevented=(Cu.defaultPrevented!=null?Cu.defaultPrevented:Cu.returnValue===!1)?be$1:ce$1,this.isPropagationStopped=ce$1,this}n$4(G$2.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _u=this.nativeEvent;_u&&(_u.preventDefault?_u.preventDefault():typeof _u.returnValue!="unknown"&&(_u.returnValue=!1),this.isDefaultPrevented=be$1)},stopPropagation:function(){var _u=this.nativeEvent;_u&&(_u.stopPropagation?_u.stopPropagation():typeof _u.cancelBubble!="unknown"&&(_u.cancelBubble=!0),this.isPropagationStopped=be$1)},persist:function(){this.isPersistent=be$1},isPersistent:ce$1,destructor:function(){var _u=this.constructor.Interface,Tu;for(Tu in _u)this[Tu]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$1,this._dispatchInstances=this._dispatchListeners=null}});G$2.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(_u){return _u.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$2.extend=function(_u){function Tu(){}function Cu(){return Pu.apply(this,arguments)}var Pu=this;Tu.prototype=Pu.prototype;var Bu=new Tu;return n$4(Bu,Cu.prototype),Cu.prototype=Bu,Cu.prototype.constructor=Cu,Cu.Interface=n$4({},Pu.Interface,_u),Cu.extend=Pu.extend,de$1(Cu),Cu};de$1(G$2);function ee$1(_u,Tu,Cu,Pu){if(this.eventPool.length){var Bu=this.eventPool.pop();return this.call(Bu,_u,Tu,Cu,Pu),Bu}return new this(_u,Tu,Cu,Pu)}function fe$1(_u){if(!(_u instanceof this))throw Error(u$3(279));_u.destructor(),10>this.eventPool.length&&this.eventPool.push(_u)}function de$1(_u){_u.eventPool=[],_u.getPooled=ee$1,_u.release=fe$1}var ge$1=G$2.extend({data:null}),he$1=G$2.extend({data:null}),ie$1=[9,13,27,32],je$1=ya$1&&"CompositionEvent"in window,ke$1=null;ya$1&&"documentMode"in document&&(ke$1=document.documentMode);var le$1=ya$1&&"TextEvent"in window&&!ke$1,me$1=ya$1&&(!je$1||ke$1&&8<ke$1&&11>=ke$1),ne$1=String.fromCharCode(32),oe$1={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$1=!1;function qe$1(_u,Tu){switch(_u){case"keyup":return ie$1.indexOf(Tu.keyCode)!==-1;case"keydown":return Tu.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$1(_u){return _u=_u.detail,typeof _u=="object"&&"data"in _u?_u.data:null}var se$1=!1;function te$1(_u,Tu){switch(_u){case"compositionend":return re$1(Tu);case"keypress":return Tu.which!==32?null:(pe$1=!0,ne$1);case"textInput":return _u=Tu.data,_u===ne$1&&pe$1?null:_u;default:return null}}function ue$1(_u,Tu){if(se$1)return _u==="compositionend"||!je$1&&qe$1(_u,Tu)?(_u=ae$1(),$d=Zd=Yd=null,se$1=!1,_u):null;switch(_u){case"paste":return null;case"keypress":if(!(Tu.ctrlKey||Tu.altKey||Tu.metaKey)||Tu.ctrlKey&&Tu.altKey){if(Tu.char&&1<Tu.char.length)return Tu.char;if(Tu.which)return String.fromCharCode(Tu.which)}return null;case"compositionend":return me$1&&Tu.locale!=="ko"?null:Tu.data;default:return null}}var ve$1={eventTypes:oe$1,extractEvents:function(_u,Tu,Cu,Pu){var Bu;if(je$1)e:{switch(_u){case"compositionstart":var Ru=oe$1.compositionStart;break e;case"compositionend":Ru=oe$1.compositionEnd;break e;case"compositionupdate":Ru=oe$1.compositionUpdate;break e}Ru=void 0}else se$1?qe$1(_u,Cu)&&(Ru=oe$1.compositionEnd):_u==="keydown"&&Cu.keyCode===229&&(Ru=oe$1.compositionStart);return Ru?(me$1&&Cu.locale!=="ko"&&(se$1||Ru!==oe$1.compositionStart?Ru===oe$1.compositionEnd&&se$1&&(Bu=ae$1()):(Yd=Pu,Zd="value"in Yd?Yd.value:Yd.textContent,se$1=!0)),Ru=ge$1.getPooled(Ru,Tu,Cu,Pu),Bu?Ru.data=Bu:(Bu=re$1(Cu),Bu!==null&&(Ru.data=Bu)),Xd(Ru),Bu=Ru):Bu=null,(_u=le$1?te$1(_u,Cu):ue$1(_u,Cu))?(Tu=he$1.getPooled(oe$1.beforeInput,Tu,Cu,Pu),Tu.data=_u,Xd(Tu)):Tu=null,Bu===null?Tu:Tu===null?Bu:[Bu,Tu]}},we$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$1(_u){var Tu=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return Tu==="input"?!!we$1[_u.type]:Tu==="textarea"}var ye$1={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$1(_u,Tu,Cu){return _u=G$2.getPooled(ye$1.change,_u,Tu,Cu),_u.type="change",Da$1(Cu),Xd(_u),_u}var Ae$1=null,Be$1=null;function Ce$1(_u){mc(_u)}function De$1(_u){var Tu=Pd(_u);if(yb(Tu))return _u}function Ee$1(_u,Tu){if(_u==="change")return Tu}var Fe$1=!1;ya$1&&(Fe$1=oc("input")&&(!document.documentMode||9<document.documentMode));function Ge$1(){Ae$1&&(Ae$1.detachEvent("onpropertychange",He$1),Be$1=Ae$1=null)}function He$1(_u){if(_u.propertyName==="value"&&De$1(Be$1))if(_u=ze$1(Be$1,_u,nc(_u)),Ja$1)mc(_u);else{Ja$1=!0;try{Fa$1(Ce$1,_u)}finally{Ja$1=!1,La$1()}}}function Ie$1(_u,Tu,Cu){_u==="focus"?(Ge$1(),Ae$1=Tu,Be$1=Cu,Ae$1.attachEvent("onpropertychange",He$1)):_u==="blur"&&Ge$1()}function Je$1(_u){if(_u==="selectionchange"||_u==="keyup"||_u==="keydown")return De$1(Be$1)}function Ke$1(_u,Tu){if(_u==="click")return De$1(Tu)}function Le$1(_u,Tu){if(_u==="input"||_u==="change")return De$1(Tu)}var Me$1={eventTypes:ye$1,_isInputEventSupported:Fe$1,extractEvents:function(_u,Tu,Cu,Pu){var Bu=Tu?Pd(Tu):window,Ru=Bu.nodeName&&Bu.nodeName.toLowerCase();if(Ru==="select"||Ru==="input"&&Bu.type==="file")var Lu=Ee$1;else if(xe$1(Bu))if(Fe$1)Lu=Le$1;else{Lu=Je$1;var Ou=Ie$1}else(Ru=Bu.nodeName)&&Ru.toLowerCase()==="input"&&(Bu.type==="checkbox"||Bu.type==="radio")&&(Lu=Ke$1);if(Lu&&(Lu=Lu(_u,Tu)))return ze$1(Lu,Cu,Pu);Ou&&Ou(_u,Bu,Tu),_u==="blur"&&(_u=Bu._wrapperState)&&_u.controlled&&Bu.type==="number"&&Db(Bu,"number",Bu.value)}},Ne$1=G$2.extend({view:null,detail:null}),Oe$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$1(_u){var Tu=this.nativeEvent;return Tu.getModifierState?Tu.getModifierState(_u):(_u=Oe$1[_u])?!!Tu[_u]:!1}function Qe$1(){return Pe$1}var Re$1=0,Se$1=0,Te$1=!1,Ue$1=!1,Ve$1=Ne$1.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$1,button:null,buttons:null,relatedTarget:function(_u){return _u.relatedTarget||(_u.fromElement===_u.srcElement?_u.toElement:_u.fromElement)},movementX:function(_u){if("movementX"in _u)return _u.movementX;var Tu=Re$1;return Re$1=_u.screenX,Te$1?_u.type==="mousemove"?_u.screenX-Tu:0:(Te$1=!0,0)},movementY:function(_u){if("movementY"in _u)return _u.movementY;var Tu=Se$1;return Se$1=_u.screenY,Ue$1?_u.type==="mousemove"?_u.screenY-Tu:0:(Ue$1=!0,0)}}),We$1=Ve$1.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$1={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$1={eventTypes:Xe$1,extractEvents:function(_u,Tu,Cu,Pu,Bu){var Ru=_u==="mouseover"||_u==="pointerover",Lu=_u==="mouseout"||_u==="pointerout";if(Ru&&(Bu&32)===0&&(Cu.relatedTarget||Cu.fromElement)||!Lu&&!Ru)return null;if(Ru=Pu.window===Pu?Pu:(Ru=Pu.ownerDocument)?Ru.defaultView||Ru.parentWindow:window,Lu){if(Lu=Tu,Tu=(Tu=Cu.relatedTarget||Cu.toElement)?tc(Tu):null,Tu!==null){var Ou=dc(Tu);(Tu!==Ou||Tu.tag!==5&&Tu.tag!==6)&&(Tu=null)}}else Lu=null;if(Lu===Tu)return null;if(_u==="mouseout"||_u==="mouseover")var Du=Ve$1,$u=Xe$1.mouseLeave,ku=Xe$1.mouseEnter,Fu="mouse";else(_u==="pointerout"||_u==="pointerover")&&(Du=We$1,$u=Xe$1.pointerLeave,ku=Xe$1.pointerEnter,Fu="pointer");if(_u=Lu==null?Ru:Pd(Lu),Ru=Tu==null?Ru:Pd(Tu),$u=Du.getPooled($u,Lu,Cu,Pu),$u.type=Fu+"leave",$u.target=_u,$u.relatedTarget=Ru,Cu=Du.getPooled(ku,Tu,Cu,Pu),Cu.type=Fu+"enter",Cu.target=Ru,Cu.relatedTarget=_u,Pu=Lu,Fu=Tu,Pu&&Fu)e:{for(Du=Pu,ku=Fu,Lu=0,_u=Du;_u;_u=Rd(_u))Lu++;for(_u=0,Tu=ku;Tu;Tu=Rd(Tu))_u++;for(;0<Lu-_u;)Du=Rd(Du),Lu--;for(;0<_u-Lu;)ku=Rd(ku),_u--;for(;Lu--;){if(Du===ku||Du===ku.alternate)break e;Du=Rd(Du),ku=Rd(ku)}Du=null}else Du=null;for(ku=Du,Du=[];Pu&&Pu!==ku&&(Lu=Pu.alternate,!(Lu!==null&&Lu===ku));)Du.push(Pu),Pu=Rd(Pu);for(Pu=[];Fu&&Fu!==ku&&(Lu=Fu.alternate,!(Lu!==null&&Lu===ku));)Pu.push(Fu),Fu=Rd(Fu);for(Fu=0;Fu<Du.length;Fu++)Vd(Du[Fu],"bubbled",$u);for(Fu=Pu.length;0<Fu--;)Vd(Pu[Fu],"captured",Cu);return(Bu&64)===0?[$u]:[$u,Cu]}};function Ze$1(_u,Tu){return _u===Tu&&(_u!==0||1/_u===1/Tu)||_u!==_u&&Tu!==Tu}var $e$1=typeof Object.is=="function"?Object.is:Ze$1,af=Object.prototype.hasOwnProperty;function bf(_u,Tu){if($e$1(_u,Tu))return!0;if(typeof _u!="object"||_u===null||typeof Tu!="object"||Tu===null)return!1;var Cu=Object.keys(_u),Pu=Object.keys(Tu);if(Cu.length!==Pu.length)return!1;for(Pu=0;Pu<Cu.length;Pu++)if(!af.call(Tu,Cu[Pu])||!$e$1(_u[Cu[Pu]],Tu[Cu[Pu]]))return!1;return!0}var cf=ya$1&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff=null,gf=null,hf=!1;function jf(_u,Tu){var Cu=Tu.window===Tu?Tu.document:Tu.nodeType===9?Tu:Tu.ownerDocument;return hf||ef==null||ef!==td(Cu)?null:(Cu=ef,"selectionStart"in Cu&&yd(Cu)?Cu={start:Cu.selectionStart,end:Cu.selectionEnd}:(Cu=(Cu.ownerDocument&&Cu.ownerDocument.defaultView||window).getSelection(),Cu={anchorNode:Cu.anchorNode,anchorOffset:Cu.anchorOffset,focusNode:Cu.focusNode,focusOffset:Cu.focusOffset}),gf&&bf(gf,Cu)?null:(gf=Cu,_u=G$2.getPooled(df.select,ff,_u,Tu),_u.type="select",_u.target=ef,Xd(_u),_u))}var kf={eventTypes:df,extractEvents:function(_u,Tu,Cu,Pu,Bu,Ru){if(Bu=Ru||(Pu.window===Pu?Pu.document:Pu.nodeType===9?Pu:Pu.ownerDocument),!(Ru=!Bu)){e:{Bu=cc(Bu),Ru=wa$1.onSelect;for(var Lu=0;Lu<Ru.length;Lu++)if(!Bu.has(Ru[Lu])){Bu=!1;break e}Bu=!0}Ru=!Bu}if(Ru)return null;switch(Bu=Tu?Pd(Tu):window,_u){case"focus":(xe$1(Bu)||Bu.contentEditable==="true")&&(ef=Bu,ff=Tu,gf=null);break;case"blur":gf=ff=ef=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(Cu,Pu);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(Cu,Pu)}return null}},lf=G$2.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$2.extend({clipboardData:function(_u){return"clipboardData"in _u?_u.clipboardData:window.clipboardData}}),nf=Ne$1.extend({relatedTarget:null});function of(_u){var Tu=_u.keyCode;return"charCode"in _u?(_u=_u.charCode,_u===0&&Tu===13&&(_u=13)):_u=Tu,_u===10&&(_u=13),32<=_u||_u===13?_u:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne$1.extend({key:function(_u){if(_u.key){var Tu=pf[_u.key]||_u.key;if(Tu!=="Unidentified")return Tu}return _u.type==="keypress"?(_u=of(_u),_u===13?"Enter":String.fromCharCode(_u)):_u.type==="keydown"||_u.type==="keyup"?qf[_u.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$1,charCode:function(_u){return _u.type==="keypress"?of(_u):0},keyCode:function(_u){return _u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0},which:function(_u){return _u.type==="keypress"?of(_u):_u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0}}),sf=Ve$1.extend({dataTransfer:null}),tf=Ne$1.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$1}),uf=G$2.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$1.extend({deltaX:function(_u){return"deltaX"in _u?_u.deltaX:"wheelDeltaX"in _u?-_u.wheelDeltaX:0},deltaY:function(_u){return"deltaY"in _u?_u.deltaY:"wheelDeltaY"in _u?-_u.wheelDeltaY:"wheelDelta"in _u?-_u.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(_u,Tu,Cu,Pu){var Bu=Yc.get(_u);if(!Bu)return null;switch(_u){case"keypress":if(of(Cu)===0)return null;case"keydown":case"keyup":_u=rf;break;case"blur":case"focus":_u=nf;break;case"click":if(Cu.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_u=Ve$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_u=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_u=tf;break;case Xb:case Yb:case Zb:_u=lf;break;case $b:_u=uf;break;case"scroll":_u=Ne$1;break;case"wheel":_u=vf;break;case"copy":case"cut":case"paste":_u=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_u=We$1;break;default:_u=G$2}return Tu=_u.getPooled(Bu,Tu,Cu,Pu),Xd(Tu),Tu}};if(pa$1)throw Error(u$3(101));pa$1=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra$1();var xf=Nc;la$1=Qd;ma$1=xf;na$1=Pd;xa$1({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye$1,ChangeEventPlugin:Me$1,SelectEventPlugin:kf,BeforeInputEventPlugin:ve$1});var yf=[],zf=-1;function H$2(_u){0>zf||(_u.current=yf[zf],yf[zf]=null,zf--)}function I$2(_u,Tu){zf++,yf[zf]=_u.current,_u.current=Tu}var Af={},J$2={current:Af},K$2={current:!1},Bf=Af;function Cf(_u,Tu){var Cu=_u.type.contextTypes;if(!Cu)return Af;var Pu=_u.stateNode;if(Pu&&Pu.__reactInternalMemoizedUnmaskedChildContext===Tu)return Pu.__reactInternalMemoizedMaskedChildContext;var Bu={},Ru;for(Ru in Cu)Bu[Ru]=Tu[Ru];return Pu&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=Tu,_u.__reactInternalMemoizedMaskedChildContext=Bu),Bu}function L$3(_u){return _u=_u.childContextTypes,_u!=null}function Df(){H$2(K$2),H$2(J$2)}function Ef(_u,Tu,Cu){if(J$2.current!==Af)throw Error(u$3(168));I$2(J$2,Tu),I$2(K$2,Cu)}function Ff(_u,Tu,Cu){var Pu=_u.stateNode;if(_u=Tu.childContextTypes,typeof Pu.getChildContext!="function")return Cu;Pu=Pu.getChildContext();for(var Bu in Pu)if(!(Bu in _u))throw Error(u$3(108,pb(Tu)||"Unknown",Bu));return n$4({},Cu,{},Pu)}function Gf(_u){return _u=(_u=_u.stateNode)&&_u.__reactInternalMemoizedMergedChildContext||Af,Bf=J$2.current,I$2(J$2,_u),I$2(K$2,K$2.current),!0}function Hf(_u,Tu,Cu){var Pu=_u.stateNode;if(!Pu)throw Error(u$3(169));Cu?(_u=Ff(_u,Tu,Bf),Pu.__reactInternalMemoizedMergedChildContext=_u,H$2(K$2),H$2(J$2),I$2(J$2,_u)):H$2(K$2),I$2(K$2,Cu)}var If=r$4.unstable_runWithPriority,Jf=r$4.unstable_scheduleCallback,Kf=r$4.unstable_cancelCallback,Lf=r$4.unstable_requestPaint,Mf=r$4.unstable_now,Nf=r$4.unstable_getCurrentPriorityLevel,Of=r$4.unstable_ImmediatePriority,Pf=r$4.unstable_UserBlockingPriority,Qf=r$4.unstable_NormalPriority,Rf=r$4.unstable_LowPriority,Sf=r$4.unstable_IdlePriority,Tf={},Uf=r$4.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u$3(332))}}function bg(_u){switch(_u){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u$3(332))}}function cg(_u,Tu){return _u=bg(_u),If(_u,Tu)}function dg(_u,Tu,Cu){return _u=bg(_u),Jf(_u,Tu,Cu)}function eg(_u){return Wf===null?(Wf=[_u],Xf=Jf(Of,fg)):Wf.push(_u),Tf}function gg(){if(Xf!==null){var _u=Xf;Xf=null,Kf(_u)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var _u=0;try{var Tu=Wf;cg(99,function(){for(;_u<Tu.length;_u++){var Cu=Tu[_u];do Cu=Cu(!0);while(Cu!==null)}}),Wf=null}catch(Cu){throw Wf!==null&&(Wf=Wf.slice(_u+1)),Jf(Of,gg),Cu}finally{Yf=!1}}}function hg(_u,Tu,Cu){return Cu/=10,1073741821-(((1073741821-_u+Tu/10)/Cu|0)+1)*Cu}function ig(_u,Tu){if(_u&&_u.defaultProps){Tu=n$4({},Tu),_u=_u.defaultProps;for(var Cu in _u)Tu[Cu]===void 0&&(Tu[Cu]=_u[Cu])}return Tu}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(_u){var Tu=jg.current;H$2(jg),_u.type._context._currentValue=Tu}function pg(_u,Tu){for(;_u!==null;){var Cu=_u.alternate;if(_u.childExpirationTime<Tu)_u.childExpirationTime=Tu,Cu!==null&&Cu.childExpirationTime<Tu&&(Cu.childExpirationTime=Tu);else if(Cu!==null&&Cu.childExpirationTime<Tu)Cu.childExpirationTime=Tu;else break;_u=_u.return}}function qg(_u,Tu){kg=_u,mg=lg=null,_u=_u.dependencies,_u!==null&&_u.firstContext!==null&&(_u.expirationTime>=Tu&&(rg=!0),_u.firstContext=null)}function sg(_u,Tu){if(mg!==_u&&Tu!==!1&&Tu!==0)if((typeof Tu!="number"||Tu===1073741823)&&(mg=_u,Tu=1073741823),Tu={context:_u,observedBits:Tu,next:null},lg===null){if(kg===null)throw Error(u$3(308));lg=Tu,kg.dependencies={expirationTime:0,firstContext:Tu,responders:null}}else lg=lg.next=Tu;return _u._currentValue}var tg=!1;function ug(_u){_u.updateQueue={baseState:_u.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(_u,Tu){_u=_u.updateQueue,Tu.updateQueue===_u&&(Tu.updateQueue={baseState:_u.baseState,baseQueue:_u.baseQueue,shared:_u.shared,effects:_u.effects})}function wg(_u,Tu){return _u={expirationTime:_u,suspenseConfig:Tu,tag:0,payload:null,callback:null,next:null},_u.next=_u}function xg(_u,Tu){if(_u=_u.updateQueue,_u!==null){_u=_u.shared;var Cu=_u.pending;Cu===null?Tu.next=Tu:(Tu.next=Cu.next,Cu.next=Tu),_u.pending=Tu}}function yg(_u,Tu){var Cu=_u.alternate;Cu!==null&&vg(Cu,_u),_u=_u.updateQueue,Cu=_u.baseQueue,Cu===null?(_u.baseQueue=Tu.next=Tu,Tu.next=Tu):(Tu.next=Cu.next,Cu.next=Tu)}function zg(_u,Tu,Cu,Pu){var Bu=_u.updateQueue;tg=!1;var Ru=Bu.baseQueue,Lu=Bu.shared.pending;if(Lu!==null){if(Ru!==null){var Ou=Ru.next;Ru.next=Lu.next,Lu.next=Ou}Ru=Lu,Bu.shared.pending=null,Ou=_u.alternate,Ou!==null&&(Ou=Ou.updateQueue,Ou!==null&&(Ou.baseQueue=Lu))}if(Ru!==null){Ou=Ru.next;var Du=Bu.baseState,$u=0,ku=null,Fu=null,Nu=null;if(Ou!==null){var Vu=Ou;do{if(Lu=Vu.expirationTime,Lu<Pu){var Gu={expirationTime:Vu.expirationTime,suspenseConfig:Vu.suspenseConfig,tag:Vu.tag,payload:Vu.payload,callback:Vu.callback,next:null};Nu===null?(Fu=Nu=Gu,ku=Du):Nu=Nu.next=Gu,Lu>$u&&($u=Lu)}else{Nu!==null&&(Nu=Nu.next={expirationTime:1073741823,suspenseConfig:Vu.suspenseConfig,tag:Vu.tag,payload:Vu.payload,callback:Vu.callback,next:null}),Ag(Lu,Vu.suspenseConfig);e:{var Hu=_u,ju=Vu;switch(Lu=Tu,Gu=Cu,ju.tag){case 1:if(Hu=ju.payload,typeof Hu=="function"){Du=Hu.call(Gu,Du,Lu);break e}Du=Hu;break e;case 3:Hu.effectTag=Hu.effectTag&-4097|64;case 0:if(Hu=ju.payload,Lu=typeof Hu=="function"?Hu.call(Gu,Du,Lu):Hu,Lu==null)break e;Du=n$4({},Du,Lu);break e;case 2:tg=!0}}Vu.callback!==null&&(_u.effectTag|=32,Lu=Bu.effects,Lu===null?Bu.effects=[Vu]:Lu.push(Vu))}if(Vu=Vu.next,Vu===null||Vu===Ou){if(Lu=Bu.shared.pending,Lu===null)break;Vu=Ru.next=Lu.next,Lu.next=Ou,Bu.baseQueue=Ru=Lu,Bu.shared.pending=null}}while(1)}Nu===null?ku=Du:Nu.next=Fu,Bu.baseState=ku,Bu.baseQueue=Nu,Bg($u),_u.expirationTime=$u,_u.memoizedState=Du}}function Cg(_u,Tu,Cu){if(_u=Tu.effects,Tu.effects=null,_u!==null)for(Tu=0;Tu<_u.length;Tu++){var Pu=_u[Tu],Bu=Pu.callback;if(Bu!==null){if(Pu.callback=null,Pu=Bu,Bu=Cu,typeof Pu!="function")throw Error(u$3(191,Pu));Pu.call(Bu)}}}var Dg=Wa$1.ReactCurrentBatchConfig,Eg=new aa$2.Component().refs;function Fg(_u,Tu,Cu,Pu){Tu=_u.memoizedState,Cu=Cu(Pu,Tu),Cu=Cu==null?Tu:n$4({},Tu,Cu),_u.memoizedState=Cu,_u.expirationTime===0&&(_u.updateQueue.baseState=Cu)}var Jg={isMounted:function(_u){return(_u=_u._reactInternalFiber)?dc(_u)===_u:!1},enqueueSetState:function(_u,Tu,Cu){_u=_u._reactInternalFiber;var Pu=Gg(),Bu=Dg.suspense;Pu=Hg(Pu,_u,Bu),Bu=wg(Pu,Bu),Bu.payload=Tu,Cu!=null&&(Bu.callback=Cu),xg(_u,Bu),Ig(_u,Pu)},enqueueReplaceState:function(_u,Tu,Cu){_u=_u._reactInternalFiber;var Pu=Gg(),Bu=Dg.suspense;Pu=Hg(Pu,_u,Bu),Bu=wg(Pu,Bu),Bu.tag=1,Bu.payload=Tu,Cu!=null&&(Bu.callback=Cu),xg(_u,Bu),Ig(_u,Pu)},enqueueForceUpdate:function(_u,Tu){_u=_u._reactInternalFiber;var Cu=Gg(),Pu=Dg.suspense;Cu=Hg(Cu,_u,Pu),Pu=wg(Cu,Pu),Pu.tag=2,Tu!=null&&(Pu.callback=Tu),xg(_u,Pu),Ig(_u,Cu)}};function Kg(_u,Tu,Cu,Pu,Bu,Ru,Lu){return _u=_u.stateNode,typeof _u.shouldComponentUpdate=="function"?_u.shouldComponentUpdate(Pu,Ru,Lu):Tu.prototype&&Tu.prototype.isPureReactComponent?!bf(Cu,Pu)||!bf(Bu,Ru):!0}function Lg(_u,Tu,Cu){var Pu=!1,Bu=Af,Ru=Tu.contextType;return typeof Ru=="object"&&Ru!==null?Ru=sg(Ru):(Bu=L$3(Tu)?Bf:J$2.current,Pu=Tu.contextTypes,Ru=(Pu=Pu!=null)?Cf(_u,Bu):Af),Tu=new Tu(Cu,Ru),_u.memoizedState=Tu.state!==null&&Tu.state!==void 0?Tu.state:null,Tu.updater=Jg,_u.stateNode=Tu,Tu._reactInternalFiber=_u,Pu&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=Bu,_u.__reactInternalMemoizedMaskedChildContext=Ru),Tu}function Mg(_u,Tu,Cu,Pu){_u=Tu.state,typeof Tu.componentWillReceiveProps=="function"&&Tu.componentWillReceiveProps(Cu,Pu),typeof Tu.UNSAFE_componentWillReceiveProps=="function"&&Tu.UNSAFE_componentWillReceiveProps(Cu,Pu),Tu.state!==_u&&Jg.enqueueReplaceState(Tu,Tu.state,null)}function Ng(_u,Tu,Cu,Pu){var Bu=_u.stateNode;Bu.props=Cu,Bu.state=_u.memoizedState,Bu.refs=Eg,ug(_u);var Ru=Tu.contextType;typeof Ru=="object"&&Ru!==null?Bu.context=sg(Ru):(Ru=L$3(Tu)?Bf:J$2.current,Bu.context=Cf(_u,Ru)),zg(_u,Cu,Bu,Pu),Bu.state=_u.memoizedState,Ru=Tu.getDerivedStateFromProps,typeof Ru=="function"&&(Fg(_u,Tu,Ru,Cu),Bu.state=_u.memoizedState),typeof Tu.getDerivedStateFromProps=="function"||typeof Bu.getSnapshotBeforeUpdate=="function"||typeof Bu.UNSAFE_componentWillMount!="function"&&typeof Bu.componentWillMount!="function"||(Tu=Bu.state,typeof Bu.componentWillMount=="function"&&Bu.componentWillMount(),typeof Bu.UNSAFE_componentWillMount=="function"&&Bu.UNSAFE_componentWillMount(),Tu!==Bu.state&&Jg.enqueueReplaceState(Bu,Bu.state,null),zg(_u,Cu,Bu,Pu),Bu.state=_u.memoizedState),typeof Bu.componentDidMount=="function"&&(_u.effectTag|=4)}var Og=Array.isArray;function Pg(_u,Tu,Cu){if(_u=Cu.ref,_u!==null&&typeof _u!="function"&&typeof _u!="object"){if(Cu._owner){if(Cu=Cu._owner,Cu){if(Cu.tag!==1)throw Error(u$3(309));var Pu=Cu.stateNode}if(!Pu)throw Error(u$3(147,_u));var Bu=""+_u;return Tu!==null&&Tu.ref!==null&&typeof Tu.ref=="function"&&Tu.ref._stringRef===Bu?Tu.ref:(Tu=function(Ru){var Lu=Pu.refs;Lu===Eg&&(Lu=Pu.refs={}),Ru===null?delete Lu[Bu]:Lu[Bu]=Ru},Tu._stringRef=Bu,Tu)}if(typeof _u!="string")throw Error(u$3(284));if(!Cu._owner)throw Error(u$3(290,_u))}return _u}function Qg(_u,Tu){if(_u.type!=="textarea")throw Error(u$3(31,Object.prototype.toString.call(Tu)==="[object Object]"?"object with keys {"+Object.keys(Tu).join(", ")+"}":Tu,""))}function Rg(_u){function Tu(ju,Uu){if(_u){var zu=ju.lastEffect;zu!==null?(zu.nextEffect=Uu,ju.lastEffect=Uu):ju.firstEffect=ju.lastEffect=Uu,Uu.nextEffect=null,Uu.effectTag=8}}function Cu(ju,Uu){if(!_u)return null;for(;Uu!==null;)Tu(ju,Uu),Uu=Uu.sibling;return null}function Pu(ju,Uu){for(ju=new Map;Uu!==null;)Uu.key!==null?ju.set(Uu.key,Uu):ju.set(Uu.index,Uu),Uu=Uu.sibling;return ju}function Bu(ju,Uu){return ju=Sg(ju,Uu),ju.index=0,ju.sibling=null,ju}function Ru(ju,Uu,zu){return ju.index=zu,_u?(zu=ju.alternate,zu!==null?(zu=zu.index,zu<Uu?(ju.effectTag=2,Uu):zu):(ju.effectTag=2,Uu)):Uu}function Lu(ju){return _u&&ju.alternate===null&&(ju.effectTag=2),ju}function Ou(ju,Uu,zu,Wu){return Uu===null||Uu.tag!==6?(Uu=Tg(zu,ju.mode,Wu),Uu.return=ju,Uu):(Uu=Bu(Uu,zu),Uu.return=ju,Uu)}function Du(ju,Uu,zu,Wu){return Uu!==null&&Uu.elementType===zu.type?(Wu=Bu(Uu,zu.props),Wu.ref=Pg(ju,Uu,zu),Wu.return=ju,Wu):(Wu=Ug(zu.type,zu.key,zu.props,null,ju.mode,Wu),Wu.ref=Pg(ju,Uu,zu),Wu.return=ju,Wu)}function $u(ju,Uu,zu,Wu){return Uu===null||Uu.tag!==4||Uu.stateNode.containerInfo!==zu.containerInfo||Uu.stateNode.implementation!==zu.implementation?(Uu=Vg(zu,ju.mode,Wu),Uu.return=ju,Uu):(Uu=Bu(Uu,zu.children||[]),Uu.return=ju,Uu)}function ku(ju,Uu,zu,Wu,Qu){return Uu===null||Uu.tag!==7?(Uu=Wg(zu,ju.mode,Wu,Qu),Uu.return=ju,Uu):(Uu=Bu(Uu,zu),Uu.return=ju,Uu)}function Fu(ju,Uu,zu){if(typeof Uu=="string"||typeof Uu=="number")return Uu=Tg(""+Uu,ju.mode,zu),Uu.return=ju,Uu;if(typeof Uu=="object"&&Uu!==null){switch(Uu.$$typeof){case Za$1:return zu=Ug(Uu.type,Uu.key,Uu.props,null,ju.mode,zu),zu.ref=Pg(ju,null,Uu),zu.return=ju,zu;case $a$1:return Uu=Vg(Uu,ju.mode,zu),Uu.return=ju,Uu}if(Og(Uu)||nb(Uu))return Uu=Wg(Uu,ju.mode,zu,null),Uu.return=ju,Uu;Qg(ju,Uu)}return null}function Nu(ju,Uu,zu,Wu){var Qu=Uu!==null?Uu.key:null;if(typeof zu=="string"||typeof zu=="number")return Qu!==null?null:Ou(ju,Uu,""+zu,Wu);if(typeof zu=="object"&&zu!==null){switch(zu.$$typeof){case Za$1:return zu.key===Qu?zu.type===ab?ku(ju,Uu,zu.props.children,Wu,Qu):Du(ju,Uu,zu,Wu):null;case $a$1:return zu.key===Qu?$u(ju,Uu,zu,Wu):null}if(Og(zu)||nb(zu))return Qu!==null?null:ku(ju,Uu,zu,Wu,null);Qg(ju,zu)}return null}function Vu(ju,Uu,zu,Wu,Qu){if(typeof Wu=="string"||typeof Wu=="number")return ju=ju.get(zu)||null,Ou(Uu,ju,""+Wu,Qu);if(typeof Wu=="object"&&Wu!==null){switch(Wu.$$typeof){case Za$1:return ju=ju.get(Wu.key===null?zu:Wu.key)||null,Wu.type===ab?ku(Uu,ju,Wu.props.children,Qu,Wu.key):Du(Uu,ju,Wu,Qu);case $a$1:return ju=ju.get(Wu.key===null?zu:Wu.key)||null,$u(Uu,ju,Wu,Qu)}if(Og(Wu)||nb(Wu))return ju=ju.get(zu)||null,ku(Uu,ju,Wu,Qu,null);Qg(Uu,Wu)}return null}function Gu(ju,Uu,zu,Wu){for(var Qu=null,qu=null,Yu=Uu,Xc=Uu=0,_h=null;Yu!==null&&Xc<zu.length;Xc++){Yu.index>Xc?(_h=Yu,Yu=null):_h=Yu.sibling;var _d=Nu(ju,Yu,zu[Xc],Wu);if(_d===null){Yu===null&&(Yu=_h);break}_u&&Yu&&_d.alternate===null&&Tu(ju,Yu),Uu=Ru(_d,Uu,Xc),qu===null?Qu=_d:qu.sibling=_d,qu=_d,Yu=_h}if(Xc===zu.length)return Cu(ju,Yu),Qu;if(Yu===null){for(;Xc<zu.length;Xc++)Yu=Fu(ju,zu[Xc],Wu),Yu!==null&&(Uu=Ru(Yu,Uu,Xc),qu===null?Qu=Yu:qu.sibling=Yu,qu=Yu);return Qu}for(Yu=Pu(ju,Yu);Xc<zu.length;Xc++)_h=Vu(Yu,ju,Xc,zu[Xc],Wu),_h!==null&&(_u&&_h.alternate!==null&&Yu.delete(_h.key===null?Xc:_h.key),Uu=Ru(_h,Uu,Xc),qu===null?Qu=_h:qu.sibling=_h,qu=_h);return _u&&Yu.forEach(function(Ku){return Tu(ju,Ku)}),Qu}function Hu(ju,Uu,zu,Wu){var Qu=nb(zu);if(typeof Qu!="function")throw Error(u$3(150));if(zu=Qu.call(zu),zu==null)throw Error(u$3(151));for(var qu=Qu=null,Yu=Uu,Xc=Uu=0,_h=null,_d=zu.next();Yu!==null&&!_d.done;Xc++,_d=zu.next()){Yu.index>Xc?(_h=Yu,Yu=null):_h=Yu.sibling;var Ku=Nu(ju,Yu,_d.value,Wu);if(Ku===null){Yu===null&&(Yu=_h);break}_u&&Yu&&Ku.alternate===null&&Tu(ju,Yu),Uu=Ru(Ku,Uu,Xc),qu===null?Qu=Ku:qu.sibling=Ku,qu=Ku,Yu=_h}if(_d.done)return Cu(ju,Yu),Qu;if(Yu===null){for(;!_d.done;Xc++,_d=zu.next())_d=Fu(ju,_d.value,Wu),_d!==null&&(Uu=Ru(_d,Uu,Xc),qu===null?Qu=_d:qu.sibling=_d,qu=_d);return Qu}for(Yu=Pu(ju,Yu);!_d.done;Xc++,_d=zu.next())_d=Vu(Yu,ju,Xc,_d.value,Wu),_d!==null&&(_u&&_d.alternate!==null&&Yu.delete(_d.key===null?Xc:_d.key),Uu=Ru(_d,Uu,Xc),qu===null?Qu=_d:qu.sibling=_d,qu=_d);return _u&&Yu.forEach(function(Xu){return Tu(ju,Xu)}),Qu}return function(ju,Uu,zu,Wu){var Qu=typeof zu=="object"&&zu!==null&&zu.type===ab&&zu.key===null;Qu&&(zu=zu.props.children);var qu=typeof zu=="object"&&zu!==null;if(qu)switch(zu.$$typeof){case Za$1:e:{for(qu=zu.key,Qu=Uu;Qu!==null;){if(Qu.key===qu){switch(Qu.tag){case 7:if(zu.type===ab){Cu(ju,Qu.sibling),Uu=Bu(Qu,zu.props.children),Uu.return=ju,ju=Uu;break e}break;default:if(Qu.elementType===zu.type){Cu(ju,Qu.sibling),Uu=Bu(Qu,zu.props),Uu.ref=Pg(ju,Qu,zu),Uu.return=ju,ju=Uu;break e}}Cu(ju,Qu);break}else Tu(ju,Qu);Qu=Qu.sibling}zu.type===ab?(Uu=Wg(zu.props.children,ju.mode,Wu,zu.key),Uu.return=ju,ju=Uu):(Wu=Ug(zu.type,zu.key,zu.props,null,ju.mode,Wu),Wu.ref=Pg(ju,Uu,zu),Wu.return=ju,ju=Wu)}return Lu(ju);case $a$1:e:{for(Qu=zu.key;Uu!==null;){if(Uu.key===Qu)if(Uu.tag===4&&Uu.stateNode.containerInfo===zu.containerInfo&&Uu.stateNode.implementation===zu.implementation){Cu(ju,Uu.sibling),Uu=Bu(Uu,zu.children||[]),Uu.return=ju,ju=Uu;break e}else{Cu(ju,Uu);break}else Tu(ju,Uu);Uu=Uu.sibling}Uu=Vg(zu,ju.mode,Wu),Uu.return=ju,ju=Uu}return Lu(ju)}if(typeof zu=="string"||typeof zu=="number")return zu=""+zu,Uu!==null&&Uu.tag===6?(Cu(ju,Uu.sibling),Uu=Bu(Uu,zu),Uu.return=ju,ju=Uu):(Cu(ju,Uu),Uu=Tg(zu,ju.mode,Wu),Uu.return=ju,ju=Uu),Lu(ju);if(Og(zu))return Gu(ju,Uu,zu,Wu);if(nb(zu))return Hu(ju,Uu,zu,Wu);if(qu&&Qg(ju,zu),typeof zu=="undefined"&&!Qu)switch(ju.tag){case 1:case 0:throw ju=ju.type,Error(u$3(152,ju.displayName||ju.name||"Component"))}return Cu(ju,Uu)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(_u){if(_u===Zg)throw Error(u$3(174));return _u}function dh(_u,Tu){switch(I$2(bh,Tu),I$2(ah,_u),I$2($g,Zg),_u=Tu.nodeType,_u){case 9:case 11:Tu=(Tu=Tu.documentElement)?Tu.namespaceURI:Ob(null,"");break;default:_u=_u===8?Tu.parentNode:Tu,Tu=_u.namespaceURI||null,_u=_u.tagName,Tu=Ob(Tu,_u)}H$2($g),I$2($g,Tu)}function eh(){H$2($g),H$2(ah),H$2(bh)}function fh(_u){ch(bh.current);var Tu=ch($g.current),Cu=Ob(Tu,_u.type);Tu!==Cu&&(I$2(ah,_u),I$2($g,Cu))}function gh(_u){ah.current===_u&&(H$2($g),H$2(ah))}var M$2={current:0};function hh(_u){for(var Tu=_u;Tu!==null;){if(Tu.tag===13){var Cu=Tu.memoizedState;if(Cu!==null&&(Cu=Cu.dehydrated,Cu===null||Cu.data===Bd||Cu.data===Cd))return Tu}else if(Tu.tag===19&&Tu.memoizedProps.revealOrder!==void 0){if((Tu.effectTag&64)!==0)return Tu}else if(Tu.child!==null){Tu.child.return=Tu,Tu=Tu.child;continue}if(Tu===_u)break;for(;Tu.sibling===null;){if(Tu.return===null||Tu.return===_u)return null;Tu=Tu.return}Tu.sibling.return=Tu.return,Tu=Tu.sibling}return null}function ih(_u,Tu){return{responder:_u,props:Tu}}var jh=Wa$1.ReactCurrentDispatcher,kh=Wa$1.ReactCurrentBatchConfig,lh=0,N$3=null,O$3=null,P$3=null,mh=!1;function Q$2(){throw Error(u$3(321))}function nh(_u,Tu){if(Tu===null)return!1;for(var Cu=0;Cu<Tu.length&&Cu<_u.length;Cu++)if(!$e$1(_u[Cu],Tu[Cu]))return!1;return!0}function oh(_u,Tu,Cu,Pu,Bu,Ru){if(lh=Ru,N$3=Tu,Tu.memoizedState=null,Tu.updateQueue=null,Tu.expirationTime=0,jh.current=_u===null||_u.memoizedState===null?ph:qh,_u=Cu(Pu,Bu),Tu.expirationTime===lh){Ru=0;do{if(Tu.expirationTime=0,!(25>Ru))throw Error(u$3(301));Ru+=1,P$3=O$3=null,Tu.updateQueue=null,jh.current=rh,_u=Cu(Pu,Bu)}while(Tu.expirationTime===lh)}if(jh.current=sh,Tu=O$3!==null&&O$3.next!==null,lh=0,P$3=O$3=N$3=null,mh=!1,Tu)throw Error(u$3(300));return _u}function th(){var _u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$3===null?N$3.memoizedState=P$3=_u:P$3=P$3.next=_u,P$3}function uh(){if(O$3===null){var _u=N$3.alternate;_u=_u!==null?_u.memoizedState:null}else _u=O$3.next;var Tu=P$3===null?N$3.memoizedState:P$3.next;if(Tu!==null)P$3=Tu,O$3=_u;else{if(_u===null)throw Error(u$3(310));O$3=_u,_u={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$3===null?N$3.memoizedState=P$3=_u:P$3=P$3.next=_u}return P$3}function vh(_u,Tu){return typeof Tu=="function"?Tu(_u):Tu}function wh(_u){var Tu=uh(),Cu=Tu.queue;if(Cu===null)throw Error(u$3(311));Cu.lastRenderedReducer=_u;var Pu=O$3,Bu=Pu.baseQueue,Ru=Cu.pending;if(Ru!==null){if(Bu!==null){var Lu=Bu.next;Bu.next=Ru.next,Ru.next=Lu}Pu.baseQueue=Bu=Ru,Cu.pending=null}if(Bu!==null){Bu=Bu.next,Pu=Pu.baseState;var Ou=Lu=Ru=null,Du=Bu;do{var $u=Du.expirationTime;if($u<lh){var ku={expirationTime:Du.expirationTime,suspenseConfig:Du.suspenseConfig,action:Du.action,eagerReducer:Du.eagerReducer,eagerState:Du.eagerState,next:null};Ou===null?(Lu=Ou=ku,Ru=Pu):Ou=Ou.next=ku,$u>N$3.expirationTime&&(N$3.expirationTime=$u,Bg($u))}else Ou!==null&&(Ou=Ou.next={expirationTime:1073741823,suspenseConfig:Du.suspenseConfig,action:Du.action,eagerReducer:Du.eagerReducer,eagerState:Du.eagerState,next:null}),Ag($u,Du.suspenseConfig),Pu=Du.eagerReducer===_u?Du.eagerState:_u(Pu,Du.action);Du=Du.next}while(Du!==null&&Du!==Bu);Ou===null?Ru=Pu:Ou.next=Lu,$e$1(Pu,Tu.memoizedState)||(rg=!0),Tu.memoizedState=Pu,Tu.baseState=Ru,Tu.baseQueue=Ou,Cu.lastRenderedState=Pu}return[Tu.memoizedState,Cu.dispatch]}function xh(_u){var Tu=uh(),Cu=Tu.queue;if(Cu===null)throw Error(u$3(311));Cu.lastRenderedReducer=_u;var Pu=Cu.dispatch,Bu=Cu.pending,Ru=Tu.memoizedState;if(Bu!==null){Cu.pending=null;var Lu=Bu=Bu.next;do Ru=_u(Ru,Lu.action),Lu=Lu.next;while(Lu!==Bu);$e$1(Ru,Tu.memoizedState)||(rg=!0),Tu.memoizedState=Ru,Tu.baseQueue===null&&(Tu.baseState=Ru),Cu.lastRenderedState=Ru}return[Ru,Pu]}function yh(_u){var Tu=th();return typeof _u=="function"&&(_u=_u()),Tu.memoizedState=Tu.baseState=_u,_u=Tu.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:_u},_u=_u.dispatch=zh.bind(null,N$3,_u),[Tu.memoizedState,_u]}function Ah(_u,Tu,Cu,Pu){return _u={tag:_u,create:Tu,destroy:Cu,deps:Pu,next:null},Tu=N$3.updateQueue,Tu===null?(Tu={lastEffect:null},N$3.updateQueue=Tu,Tu.lastEffect=_u.next=_u):(Cu=Tu.lastEffect,Cu===null?Tu.lastEffect=_u.next=_u:(Pu=Cu.next,Cu.next=_u,_u.next=Pu,Tu.lastEffect=_u)),_u}function Bh(){return uh().memoizedState}function Ch(_u,Tu,Cu,Pu){var Bu=th();N$3.effectTag|=_u,Bu.memoizedState=Ah(1|Tu,Cu,void 0,Pu===void 0?null:Pu)}function Dh(_u,Tu,Cu,Pu){var Bu=uh();Pu=Pu===void 0?null:Pu;var Ru=void 0;if(O$3!==null){var Lu=O$3.memoizedState;if(Ru=Lu.destroy,Pu!==null&&nh(Pu,Lu.deps)){Ah(Tu,Cu,Ru,Pu);return}}N$3.effectTag|=_u,Bu.memoizedState=Ah(1|Tu,Cu,Ru,Pu)}function Eh(_u,Tu){return Ch(516,4,_u,Tu)}function Fh(_u,Tu){return Dh(516,4,_u,Tu)}function Gh(_u,Tu){return Dh(4,2,_u,Tu)}function Hh(_u,Tu){if(typeof Tu=="function")return _u=_u(),Tu(_u),function(){Tu(null)};if(Tu!=null)return _u=_u(),Tu.current=_u,function(){Tu.current=null}}function Ih(_u,Tu,Cu){return Cu=Cu!=null?Cu.concat([_u]):null,Dh(4,2,Hh.bind(null,Tu,_u),Cu)}function Jh(){}function Kh(_u,Tu){return th().memoizedState=[_u,Tu===void 0?null:Tu],_u}function Lh(_u,Tu){var Cu=uh();Tu=Tu===void 0?null:Tu;var Pu=Cu.memoizedState;return Pu!==null&&Tu!==null&&nh(Tu,Pu[1])?Pu[0]:(Cu.memoizedState=[_u,Tu],_u)}function Mh(_u,Tu){var Cu=uh();Tu=Tu===void 0?null:Tu;var Pu=Cu.memoizedState;return Pu!==null&&Tu!==null&&nh(Tu,Pu[1])?Pu[0]:(_u=_u(),Cu.memoizedState=[_u,Tu],_u)}function Nh(_u,Tu,Cu){var Pu=ag();cg(98>Pu?98:Pu,function(){_u(!0)}),cg(97<Pu?97:Pu,function(){var Bu=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{_u(!1),Cu()}finally{kh.suspense=Bu}})}function zh(_u,Tu,Cu){var Pu=Gg(),Bu=Dg.suspense;Pu=Hg(Pu,_u,Bu),Bu={expirationTime:Pu,suspenseConfig:Bu,action:Cu,eagerReducer:null,eagerState:null,next:null};var Ru=Tu.pending;if(Ru===null?Bu.next=Bu:(Bu.next=Ru.next,Ru.next=Bu),Tu.pending=Bu,Ru=_u.alternate,_u===N$3||Ru!==null&&Ru===N$3)mh=!0,Bu.expirationTime=lh,N$3.expirationTime=lh;else{if(_u.expirationTime===0&&(Ru===null||Ru.expirationTime===0)&&(Ru=Tu.lastRenderedReducer,Ru!==null))try{var Lu=Tu.lastRenderedState,Ou=Ru(Lu,Cu);if(Bu.eagerReducer=Ru,Bu.eagerState=Ou,$e$1(Ou,Lu))return}catch{}finally{}Ig(_u,Pu)}}var sh={readContext:sg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useResponder:Q$2,useDeferredValue:Q$2,useTransition:Q$2},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(_u,Tu,Cu){return Cu=Cu!=null?Cu.concat([_u]):null,Ch(4,2,Hh.bind(null,Tu,_u),Cu)},useLayoutEffect:function(_u,Tu){return Ch(4,2,_u,Tu)},useMemo:function(_u,Tu){var Cu=th();return Tu=Tu===void 0?null:Tu,_u=_u(),Cu.memoizedState=[_u,Tu],_u},useReducer:function(_u,Tu,Cu){var Pu=th();return Tu=Cu!==void 0?Cu(Tu):Tu,Pu.memoizedState=Pu.baseState=Tu,_u=Pu.queue={pending:null,dispatch:null,lastRenderedReducer:_u,lastRenderedState:Tu},_u=_u.dispatch=zh.bind(null,N$3,_u),[Pu.memoizedState,_u]},useRef:function(_u){var Tu=th();return _u={current:_u},Tu.memoizedState=_u},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,Tu){var Cu=yh(_u),Pu=Cu[0],Bu=Cu[1];return Eh(function(){var Ru=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{Bu(_u)}finally{kh.suspense=Ru}},[_u,Tu]),Pu},useTransition:function(_u){var Tu=yh(!1),Cu=Tu[0];return Tu=Tu[1],[Kh(Nh.bind(null,Tu,_u),[Tu,_u]),Cu]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,Tu){var Cu=wh(vh),Pu=Cu[0],Bu=Cu[1];return Fh(function(){var Ru=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{Bu(_u)}finally{kh.suspense=Ru}},[_u,Tu]),Pu},useTransition:function(_u){var Tu=wh(vh),Cu=Tu[0];return Tu=Tu[1],[Lh(Nh.bind(null,Tu,_u),[Tu,_u]),Cu]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,Tu){var Cu=xh(vh),Pu=Cu[0],Bu=Cu[1];return Fh(function(){var Ru=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{Bu(_u)}finally{kh.suspense=Ru}},[_u,Tu]),Pu},useTransition:function(_u){var Tu=xh(vh),Cu=Tu[0];return Tu=Tu[1],[Lh(Nh.bind(null,Tu,_u),[Tu,_u]),Cu]}},Oh=null,Ph=null,Qh=!1;function Rh(_u,Tu){var Cu=Sh(5,null,null,0);Cu.elementType="DELETED",Cu.type="DELETED",Cu.stateNode=Tu,Cu.return=_u,Cu.effectTag=8,_u.lastEffect!==null?(_u.lastEffect.nextEffect=Cu,_u.lastEffect=Cu):_u.firstEffect=_u.lastEffect=Cu}function Th(_u,Tu){switch(_u.tag){case 5:var Cu=_u.type;return Tu=Tu.nodeType!==1||Cu.toLowerCase()!==Tu.nodeName.toLowerCase()?null:Tu,Tu!==null?(_u.stateNode=Tu,!0):!1;case 6:return Tu=_u.pendingProps===""||Tu.nodeType!==3?null:Tu,Tu!==null?(_u.stateNode=Tu,!0):!1;case 13:return!1;default:return!1}}function Uh(_u){if(Qh){var Tu=Ph;if(Tu){var Cu=Tu;if(!Th(_u,Tu)){if(Tu=Jd(Cu.nextSibling),!Tu||!Th(_u,Tu)){_u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u;return}Rh(Oh,Cu)}Oh=_u,Ph=Jd(Tu.firstChild)}else _u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u}}function Vh(_u){for(_u=_u.return;_u!==null&&_u.tag!==5&&_u.tag!==3&&_u.tag!==13;)_u=_u.return;Oh=_u}function Wh(_u){if(_u!==Oh)return!1;if(!Qh)return Vh(_u),Qh=!0,!1;var Tu=_u.type;if(_u.tag!==5||Tu!=="head"&&Tu!=="body"&&!Gd(Tu,_u.memoizedProps))for(Tu=Ph;Tu;)Rh(_u,Tu),Tu=Jd(Tu.nextSibling);if(Vh(_u),_u.tag===13){if(_u=_u.memoizedState,_u=_u!==null?_u.dehydrated:null,!_u)throw Error(u$3(317));e:{for(_u=_u.nextSibling,Tu=0;_u;){if(_u.nodeType===8){var Cu=_u.data;if(Cu===Ad){if(Tu===0){Ph=Jd(_u.nextSibling);break e}Tu--}else Cu!==zd&&Cu!==Cd&&Cu!==Bd||Tu++}_u=_u.nextSibling}Ph=null}}else Ph=Oh?Jd(_u.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa$1.ReactCurrentOwner,rg=!1;function R$3(_u,Tu,Cu,Pu){Tu.child=_u===null?Yg(Tu,null,Cu,Pu):Xg(Tu,_u.child,Cu,Pu)}function Zh(_u,Tu,Cu,Pu,Bu){Cu=Cu.render;var Ru=Tu.ref;return qg(Tu,Bu),Pu=oh(_u,Tu,Cu,Pu,Ru,Bu),_u!==null&&!rg?(Tu.updateQueue=_u.updateQueue,Tu.effectTag&=-517,_u.expirationTime<=Bu&&(_u.expirationTime=0),$h(_u,Tu,Bu)):(Tu.effectTag|=1,R$3(_u,Tu,Pu,Bu),Tu.child)}function ai$1(_u,Tu,Cu,Pu,Bu,Ru){if(_u===null){var Lu=Cu.type;return typeof Lu=="function"&&!bi$1(Lu)&&Lu.defaultProps===void 0&&Cu.compare===null&&Cu.defaultProps===void 0?(Tu.tag=15,Tu.type=Lu,ci$1(_u,Tu,Lu,Pu,Bu,Ru)):(_u=Ug(Cu.type,null,Pu,null,Tu.mode,Ru),_u.ref=Tu.ref,_u.return=Tu,Tu.child=_u)}return Lu=_u.child,Bu<Ru&&(Bu=Lu.memoizedProps,Cu=Cu.compare,Cu=Cu!==null?Cu:bf,Cu(Bu,Pu)&&_u.ref===Tu.ref)?$h(_u,Tu,Ru):(Tu.effectTag|=1,_u=Sg(Lu,Pu),_u.ref=Tu.ref,_u.return=Tu,Tu.child=_u)}function ci$1(_u,Tu,Cu,Pu,Bu,Ru){return _u!==null&&bf(_u.memoizedProps,Pu)&&_u.ref===Tu.ref&&(rg=!1,Bu<Ru)?(Tu.expirationTime=_u.expirationTime,$h(_u,Tu,Ru)):di$1(_u,Tu,Cu,Pu,Ru)}function ei$1(_u,Tu){var Cu=Tu.ref;(_u===null&&Cu!==null||_u!==null&&_u.ref!==Cu)&&(Tu.effectTag|=128)}function di$1(_u,Tu,Cu,Pu,Bu){var Ru=L$3(Cu)?Bf:J$2.current;return Ru=Cf(Tu,Ru),qg(Tu,Bu),Cu=oh(_u,Tu,Cu,Pu,Ru,Bu),_u!==null&&!rg?(Tu.updateQueue=_u.updateQueue,Tu.effectTag&=-517,_u.expirationTime<=Bu&&(_u.expirationTime=0),$h(_u,Tu,Bu)):(Tu.effectTag|=1,R$3(_u,Tu,Cu,Bu),Tu.child)}function fi$1(_u,Tu,Cu,Pu,Bu){if(L$3(Cu)){var Ru=!0;Gf(Tu)}else Ru=!1;if(qg(Tu,Bu),Tu.stateNode===null)_u!==null&&(_u.alternate=null,Tu.alternate=null,Tu.effectTag|=2),Lg(Tu,Cu,Pu),Ng(Tu,Cu,Pu,Bu),Pu=!0;else if(_u===null){var Lu=Tu.stateNode,Ou=Tu.memoizedProps;Lu.props=Ou;var Du=Lu.context,$u=Cu.contextType;typeof $u=="object"&&$u!==null?$u=sg($u):($u=L$3(Cu)?Bf:J$2.current,$u=Cf(Tu,$u));var ku=Cu.getDerivedStateFromProps,Fu=typeof ku=="function"||typeof Lu.getSnapshotBeforeUpdate=="function";Fu||typeof Lu.UNSAFE_componentWillReceiveProps!="function"&&typeof Lu.componentWillReceiveProps!="function"||(Ou!==Pu||Du!==$u)&&Mg(Tu,Lu,Pu,$u),tg=!1;var Nu=Tu.memoizedState;Lu.state=Nu,zg(Tu,Pu,Lu,Bu),Du=Tu.memoizedState,Ou!==Pu||Nu!==Du||K$2.current||tg?(typeof ku=="function"&&(Fg(Tu,Cu,ku,Pu),Du=Tu.memoizedState),(Ou=tg||Kg(Tu,Cu,Ou,Pu,Nu,Du,$u))?(Fu||typeof Lu.UNSAFE_componentWillMount!="function"&&typeof Lu.componentWillMount!="function"||(typeof Lu.componentWillMount=="function"&&Lu.componentWillMount(),typeof Lu.UNSAFE_componentWillMount=="function"&&Lu.UNSAFE_componentWillMount()),typeof Lu.componentDidMount=="function"&&(Tu.effectTag|=4)):(typeof Lu.componentDidMount=="function"&&(Tu.effectTag|=4),Tu.memoizedProps=Pu,Tu.memoizedState=Du),Lu.props=Pu,Lu.state=Du,Lu.context=$u,Pu=Ou):(typeof Lu.componentDidMount=="function"&&(Tu.effectTag|=4),Pu=!1)}else Lu=Tu.stateNode,vg(_u,Tu),Ou=Tu.memoizedProps,Lu.props=Tu.type===Tu.elementType?Ou:ig(Tu.type,Ou),Du=Lu.context,$u=Cu.contextType,typeof $u=="object"&&$u!==null?$u=sg($u):($u=L$3(Cu)?Bf:J$2.current,$u=Cf(Tu,$u)),ku=Cu.getDerivedStateFromProps,(Fu=typeof ku=="function"||typeof Lu.getSnapshotBeforeUpdate=="function")||typeof Lu.UNSAFE_componentWillReceiveProps!="function"&&typeof Lu.componentWillReceiveProps!="function"||(Ou!==Pu||Du!==$u)&&Mg(Tu,Lu,Pu,$u),tg=!1,Du=Tu.memoizedState,Lu.state=Du,zg(Tu,Pu,Lu,Bu),Nu=Tu.memoizedState,Ou!==Pu||Du!==Nu||K$2.current||tg?(typeof ku=="function"&&(Fg(Tu,Cu,ku,Pu),Nu=Tu.memoizedState),(ku=tg||Kg(Tu,Cu,Ou,Pu,Du,Nu,$u))?(Fu||typeof Lu.UNSAFE_componentWillUpdate!="function"&&typeof Lu.componentWillUpdate!="function"||(typeof Lu.componentWillUpdate=="function"&&Lu.componentWillUpdate(Pu,Nu,$u),typeof Lu.UNSAFE_componentWillUpdate=="function"&&Lu.UNSAFE_componentWillUpdate(Pu,Nu,$u)),typeof Lu.componentDidUpdate=="function"&&(Tu.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate=="function"&&(Tu.effectTag|=256)):(typeof Lu.componentDidUpdate!="function"||Ou===_u.memoizedProps&&Du===_u.memoizedState||(Tu.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate!="function"||Ou===_u.memoizedProps&&Du===_u.memoizedState||(Tu.effectTag|=256),Tu.memoizedProps=Pu,Tu.memoizedState=Nu),Lu.props=Pu,Lu.state=Nu,Lu.context=$u,Pu=ku):(typeof Lu.componentDidUpdate!="function"||Ou===_u.memoizedProps&&Du===_u.memoizedState||(Tu.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate!="function"||Ou===_u.memoizedProps&&Du===_u.memoizedState||(Tu.effectTag|=256),Pu=!1);return gi$1(_u,Tu,Cu,Pu,Ru,Bu)}function gi$1(_u,Tu,Cu,Pu,Bu,Ru){ei$1(_u,Tu);var Lu=(Tu.effectTag&64)!==0;if(!Pu&&!Lu)return Bu&&Hf(Tu,Cu,!1),$h(_u,Tu,Ru);Pu=Tu.stateNode,Yh.current=Tu;var Ou=Lu&&typeof Cu.getDerivedStateFromError!="function"?null:Pu.render();return Tu.effectTag|=1,_u!==null&&Lu?(Tu.child=Xg(Tu,_u.child,null,Ru),Tu.child=Xg(Tu,null,Ou,Ru)):R$3(_u,Tu,Ou,Ru),Tu.memoizedState=Pu.state,Bu&&Hf(Tu,Cu,!0),Tu.child}function hi$1(_u){var Tu=_u.stateNode;Tu.pendingContext?Ef(_u,Tu.pendingContext,Tu.pendingContext!==Tu.context):Tu.context&&Ef(_u,Tu.context,!1),dh(_u,Tu.containerInfo)}var ii$1={dehydrated:null,retryTime:0};function ji$1(_u,Tu,Cu){var Pu=Tu.mode,Bu=Tu.pendingProps,Ru=M$2.current,Lu=!1,Ou;if((Ou=(Tu.effectTag&64)!==0)||(Ou=(Ru&2)!==0&&(_u===null||_u.memoizedState!==null)),Ou?(Lu=!0,Tu.effectTag&=-65):_u!==null&&_u.memoizedState===null||Bu.fallback===void 0||Bu.unstable_avoidThisFallback===!0||(Ru|=1),I$2(M$2,Ru&1),_u===null){if(Bu.fallback!==void 0&&Uh(Tu),Lu){if(Lu=Bu.fallback,Bu=Wg(null,Pu,0,null),Bu.return=Tu,(Tu.mode&2)===0)for(_u=Tu.memoizedState!==null?Tu.child.child:Tu.child,Bu.child=_u;_u!==null;)_u.return=Bu,_u=_u.sibling;return Cu=Wg(Lu,Pu,Cu,null),Cu.return=Tu,Bu.sibling=Cu,Tu.memoizedState=ii$1,Tu.child=Bu,Cu}return Pu=Bu.children,Tu.memoizedState=null,Tu.child=Yg(Tu,null,Pu,Cu)}if(_u.memoizedState!==null){if(_u=_u.child,Pu=_u.sibling,Lu){if(Bu=Bu.fallback,Cu=Sg(_u,_u.pendingProps),Cu.return=Tu,(Tu.mode&2)===0&&(Lu=Tu.memoizedState!==null?Tu.child.child:Tu.child,Lu!==_u.child))for(Cu.child=Lu;Lu!==null;)Lu.return=Cu,Lu=Lu.sibling;return Pu=Sg(Pu,Bu),Pu.return=Tu,Cu.sibling=Pu,Cu.childExpirationTime=0,Tu.memoizedState=ii$1,Tu.child=Cu,Pu}return Cu=Xg(Tu,_u.child,Bu.children,Cu),Tu.memoizedState=null,Tu.child=Cu}if(_u=_u.child,Lu){if(Lu=Bu.fallback,Bu=Wg(null,Pu,0,null),Bu.return=Tu,Bu.child=_u,_u!==null&&(_u.return=Bu),(Tu.mode&2)===0)for(_u=Tu.memoizedState!==null?Tu.child.child:Tu.child,Bu.child=_u;_u!==null;)_u.return=Bu,_u=_u.sibling;return Cu=Wg(Lu,Pu,Cu,null),Cu.return=Tu,Bu.sibling=Cu,Cu.effectTag|=2,Bu.childExpirationTime=0,Tu.memoizedState=ii$1,Tu.child=Bu,Cu}return Tu.memoizedState=null,Tu.child=Xg(Tu,_u,Bu.children,Cu)}function ki$1(_u,Tu){_u.expirationTime<Tu&&(_u.expirationTime=Tu);var Cu=_u.alternate;Cu!==null&&Cu.expirationTime<Tu&&(Cu.expirationTime=Tu),pg(_u.return,Tu)}function li$1(_u,Tu,Cu,Pu,Bu,Ru){var Lu=_u.memoizedState;Lu===null?_u.memoizedState={isBackwards:Tu,rendering:null,renderingStartTime:0,last:Pu,tail:Cu,tailExpiration:0,tailMode:Bu,lastEffect:Ru}:(Lu.isBackwards=Tu,Lu.rendering=null,Lu.renderingStartTime=0,Lu.last=Pu,Lu.tail=Cu,Lu.tailExpiration=0,Lu.tailMode=Bu,Lu.lastEffect=Ru)}function mi$1(_u,Tu,Cu){var Pu=Tu.pendingProps,Bu=Pu.revealOrder,Ru=Pu.tail;if(R$3(_u,Tu,Pu.children,Cu),Pu=M$2.current,(Pu&2)!==0)Pu=Pu&1|2,Tu.effectTag|=64;else{if(_u!==null&&(_u.effectTag&64)!==0)e:for(_u=Tu.child;_u!==null;){if(_u.tag===13)_u.memoizedState!==null&&ki$1(_u,Cu);else if(_u.tag===19)ki$1(_u,Cu);else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===Tu)break e;for(;_u.sibling===null;){if(_u.return===null||_u.return===Tu)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Pu&=1}if(I$2(M$2,Pu),(Tu.mode&2)===0)Tu.memoizedState=null;else switch(Bu){case"forwards":for(Cu=Tu.child,Bu=null;Cu!==null;)_u=Cu.alternate,_u!==null&&hh(_u)===null&&(Bu=Cu),Cu=Cu.sibling;Cu=Bu,Cu===null?(Bu=Tu.child,Tu.child=null):(Bu=Cu.sibling,Cu.sibling=null),li$1(Tu,!1,Bu,Cu,Ru,Tu.lastEffect);break;case"backwards":for(Cu=null,Bu=Tu.child,Tu.child=null;Bu!==null;){if(_u=Bu.alternate,_u!==null&&hh(_u)===null){Tu.child=Bu;break}_u=Bu.sibling,Bu.sibling=Cu,Cu=Bu,Bu=_u}li$1(Tu,!0,Cu,null,Ru,Tu.lastEffect);break;case"together":li$1(Tu,!1,null,null,void 0,Tu.lastEffect);break;default:Tu.memoizedState=null}return Tu.child}function $h(_u,Tu,Cu){_u!==null&&(Tu.dependencies=_u.dependencies);var Pu=Tu.expirationTime;if(Pu!==0&&Bg(Pu),Tu.childExpirationTime<Cu)return null;if(_u!==null&&Tu.child!==_u.child)throw Error(u$3(153));if(Tu.child!==null){for(_u=Tu.child,Cu=Sg(_u,_u.pendingProps),Tu.child=Cu,Cu.return=Tu;_u.sibling!==null;)_u=_u.sibling,Cu=Cu.sibling=Sg(_u,_u.pendingProps),Cu.return=Tu;Cu.sibling=null}return Tu.child}var ni$1,oi$1,pi$1,qi$1;ni$1=function(_u,Tu){for(var Cu=Tu.child;Cu!==null;){if(Cu.tag===5||Cu.tag===6)_u.appendChild(Cu.stateNode);else if(Cu.tag!==4&&Cu.child!==null){Cu.child.return=Cu,Cu=Cu.child;continue}if(Cu===Tu)break;for(;Cu.sibling===null;){if(Cu.return===null||Cu.return===Tu)return;Cu=Cu.return}Cu.sibling.return=Cu.return,Cu=Cu.sibling}};oi$1=function(){};pi$1=function(_u,Tu,Cu,Pu,Bu){var Ru=_u.memoizedProps;if(Ru!==Pu){var Lu=Tu.stateNode;switch(ch($g.current),_u=null,Cu){case"input":Ru=zb(Lu,Ru),Pu=zb(Lu,Pu),_u=[];break;case"option":Ru=Gb(Lu,Ru),Pu=Gb(Lu,Pu),_u=[];break;case"select":Ru=n$4({},Ru,{value:void 0}),Pu=n$4({},Pu,{value:void 0}),_u=[];break;case"textarea":Ru=Ib(Lu,Ru),Pu=Ib(Lu,Pu),_u=[];break;default:typeof Ru.onClick!="function"&&typeof Pu.onClick=="function"&&(Lu.onclick=sd)}od(Cu,Pu);var Ou,Du;Cu=null;for(Ou in Ru)if(!Pu.hasOwnProperty(Ou)&&Ru.hasOwnProperty(Ou)&&Ru[Ou]!=null)if(Ou==="style")for(Du in Lu=Ru[Ou],Lu)Lu.hasOwnProperty(Du)&&(Cu||(Cu={}),Cu[Du]="");else Ou!=="dangerouslySetInnerHTML"&&Ou!=="children"&&Ou!=="suppressContentEditableWarning"&&Ou!=="suppressHydrationWarning"&&Ou!=="autoFocus"&&(va$1.hasOwnProperty(Ou)?_u||(_u=[]):(_u=_u||[]).push(Ou,null));for(Ou in Pu){var $u=Pu[Ou];if(Lu=Ru!=null?Ru[Ou]:void 0,Pu.hasOwnProperty(Ou)&&$u!==Lu&&($u!=null||Lu!=null))if(Ou==="style")if(Lu){for(Du in Lu)!Lu.hasOwnProperty(Du)||$u&&$u.hasOwnProperty(Du)||(Cu||(Cu={}),Cu[Du]="");for(Du in $u)$u.hasOwnProperty(Du)&&Lu[Du]!==$u[Du]&&(Cu||(Cu={}),Cu[Du]=$u[Du])}else Cu||(_u||(_u=[]),_u.push(Ou,Cu)),Cu=$u;else Ou==="dangerouslySetInnerHTML"?($u=$u?$u.__html:void 0,Lu=Lu?Lu.__html:void 0,$u!=null&&Lu!==$u&&(_u=_u||[]).push(Ou,$u)):Ou==="children"?Lu===$u||typeof $u!="string"&&typeof $u!="number"||(_u=_u||[]).push(Ou,""+$u):Ou!=="suppressContentEditableWarning"&&Ou!=="suppressHydrationWarning"&&(va$1.hasOwnProperty(Ou)?($u!=null&&rd(Bu,Ou),_u||Lu===$u||(_u=[])):(_u=_u||[]).push(Ou,$u))}Cu&&(_u=_u||[]).push("style",Cu),Bu=_u,(Tu.updateQueue=Bu)&&(Tu.effectTag|=4)}};qi$1=function(_u,Tu,Cu,Pu){Cu!==Pu&&(Tu.effectTag|=4)};function ri$1(_u,Tu){switch(_u.tailMode){case"hidden":Tu=_u.tail;for(var Cu=null;Tu!==null;)Tu.alternate!==null&&(Cu=Tu),Tu=Tu.sibling;Cu===null?_u.tail=null:Cu.sibling=null;break;case"collapsed":Cu=_u.tail;for(var Pu=null;Cu!==null;)Cu.alternate!==null&&(Pu=Cu),Cu=Cu.sibling;Pu===null?Tu||_u.tail===null?_u.tail=null:_u.tail.sibling=null:Pu.sibling=null}}function si$1(_u,Tu,Cu){var Pu=Tu.pendingProps;switch(Tu.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$3(Tu.type)&&Df(),null;case 3:return eh(),H$2(K$2),H$2(J$2),Cu=Tu.stateNode,Cu.pendingContext&&(Cu.context=Cu.pendingContext,Cu.pendingContext=null),_u!==null&&_u.child!==null||!Wh(Tu)||(Tu.effectTag|=4),oi$1(Tu),null;case 5:gh(Tu),Cu=ch(bh.current);var Bu=Tu.type;if(_u!==null&&Tu.stateNode!=null)pi$1(_u,Tu,Bu,Pu,Cu),_u.ref!==Tu.ref&&(Tu.effectTag|=128);else{if(!Pu){if(Tu.stateNode===null)throw Error(u$3(166));return null}if(_u=ch($g.current),Wh(Tu)){Pu=Tu.stateNode,Bu=Tu.type;var Ru=Tu.memoizedProps;switch(Pu[Md]=Tu,Pu[Nd]=Ru,Bu){case"iframe":case"object":case"embed":F$2("load",Pu);break;case"video":case"audio":for(_u=0;_u<ac.length;_u++)F$2(ac[_u],Pu);break;case"source":F$2("error",Pu);break;case"img":case"image":case"link":F$2("error",Pu),F$2("load",Pu);break;case"form":F$2("reset",Pu),F$2("submit",Pu);break;case"details":F$2("toggle",Pu);break;case"input":Ab(Pu,Ru),F$2("invalid",Pu),rd(Cu,"onChange");break;case"select":Pu._wrapperState={wasMultiple:!!Ru.multiple},F$2("invalid",Pu),rd(Cu,"onChange");break;case"textarea":Jb(Pu,Ru),F$2("invalid",Pu),rd(Cu,"onChange")}od(Bu,Ru),_u=null;for(var Lu in Ru)if(Ru.hasOwnProperty(Lu)){var Ou=Ru[Lu];Lu==="children"?typeof Ou=="string"?Pu.textContent!==Ou&&(_u=["children",Ou]):typeof Ou=="number"&&Pu.textContent!==""+Ou&&(_u=["children",""+Ou]):va$1.hasOwnProperty(Lu)&&Ou!=null&&rd(Cu,Lu)}switch(Bu){case"input":xb(Pu),Eb(Pu,Ru,!0);break;case"textarea":xb(Pu),Lb(Pu);break;case"select":case"option":break;default:typeof Ru.onClick=="function"&&(Pu.onclick=sd)}Cu=_u,Tu.updateQueue=Cu,Cu!==null&&(Tu.effectTag|=4)}else{switch(Lu=Cu.nodeType===9?Cu:Cu.ownerDocument,_u===qd&&(_u=Nb(Bu)),_u===qd?Bu==="script"?(_u=Lu.createElement("div"),_u.innerHTML="<script><\/script>",_u=_u.removeChild(_u.firstChild)):typeof Pu.is=="string"?_u=Lu.createElement(Bu,{is:Pu.is}):(_u=Lu.createElement(Bu),Bu==="select"&&(Lu=_u,Pu.multiple?Lu.multiple=!0:Pu.size&&(Lu.size=Pu.size))):_u=Lu.createElementNS(_u,Bu),_u[Md]=Tu,_u[Nd]=Pu,ni$1(_u,Tu,!1,!1),Tu.stateNode=_u,Lu=pd(Bu,Pu),Bu){case"iframe":case"object":case"embed":F$2("load",_u),Ou=Pu;break;case"video":case"audio":for(Ou=0;Ou<ac.length;Ou++)F$2(ac[Ou],_u);Ou=Pu;break;case"source":F$2("error",_u),Ou=Pu;break;case"img":case"image":case"link":F$2("error",_u),F$2("load",_u),Ou=Pu;break;case"form":F$2("reset",_u),F$2("submit",_u),Ou=Pu;break;case"details":F$2("toggle",_u),Ou=Pu;break;case"input":Ab(_u,Pu),Ou=zb(_u,Pu),F$2("invalid",_u),rd(Cu,"onChange");break;case"option":Ou=Gb(_u,Pu);break;case"select":_u._wrapperState={wasMultiple:!!Pu.multiple},Ou=n$4({},Pu,{value:void 0}),F$2("invalid",_u),rd(Cu,"onChange");break;case"textarea":Jb(_u,Pu),Ou=Ib(_u,Pu),F$2("invalid",_u),rd(Cu,"onChange");break;default:Ou=Pu}od(Bu,Ou);var Du=Ou;for(Ru in Du)if(Du.hasOwnProperty(Ru)){var $u=Du[Ru];Ru==="style"?md(_u,$u):Ru==="dangerouslySetInnerHTML"?($u=$u?$u.__html:void 0,$u!=null&&Qb(_u,$u)):Ru==="children"?typeof $u=="string"?(Bu!=="textarea"||$u!=="")&&Rb(_u,$u):typeof $u=="number"&&Rb(_u,""+$u):Ru!=="suppressContentEditableWarning"&&Ru!=="suppressHydrationWarning"&&Ru!=="autoFocus"&&(va$1.hasOwnProperty(Ru)?$u!=null&&rd(Cu,Ru):$u!=null&&Xa$1(_u,Ru,$u,Lu))}switch(Bu){case"input":xb(_u),Eb(_u,Pu,!1);break;case"textarea":xb(_u),Lb(_u);break;case"option":Pu.value!=null&&_u.setAttribute("value",""+rb(Pu.value));break;case"select":_u.multiple=!!Pu.multiple,Cu=Pu.value,Cu!=null?Hb(_u,!!Pu.multiple,Cu,!1):Pu.defaultValue!=null&&Hb(_u,!!Pu.multiple,Pu.defaultValue,!0);break;default:typeof Ou.onClick=="function"&&(_u.onclick=sd)}Fd(Bu,Pu)&&(Tu.effectTag|=4)}Tu.ref!==null&&(Tu.effectTag|=128)}return null;case 6:if(_u&&Tu.stateNode!=null)qi$1(_u,Tu,_u.memoizedProps,Pu);else{if(typeof Pu!="string"&&Tu.stateNode===null)throw Error(u$3(166));Cu=ch(bh.current),ch($g.current),Wh(Tu)?(Cu=Tu.stateNode,Pu=Tu.memoizedProps,Cu[Md]=Tu,Cu.nodeValue!==Pu&&(Tu.effectTag|=4)):(Cu=(Cu.nodeType===9?Cu:Cu.ownerDocument).createTextNode(Pu),Cu[Md]=Tu,Tu.stateNode=Cu)}return null;case 13:return H$2(M$2),Pu=Tu.memoizedState,(Tu.effectTag&64)!==0?(Tu.expirationTime=Cu,Tu):(Cu=Pu!==null,Pu=!1,_u===null?Tu.memoizedProps.fallback!==void 0&&Wh(Tu):(Bu=_u.memoizedState,Pu=Bu!==null,Cu||Bu===null||(Bu=_u.child.sibling,Bu!==null&&(Ru=Tu.firstEffect,Ru!==null?(Tu.firstEffect=Bu,Bu.nextEffect=Ru):(Tu.firstEffect=Tu.lastEffect=Bu,Bu.nextEffect=null),Bu.effectTag=8))),Cu&&!Pu&&(Tu.mode&2)!==0&&(_u===null&&Tu.memoizedProps.unstable_avoidThisFallback!==!0||(M$2.current&1)!==0?S$2===ti$1&&(S$2=ui$1):((S$2===ti$1||S$2===ui$1)&&(S$2=vi$1),wi$1!==0&&T$1!==null&&(xi$1(T$1,U$2),yi$1(T$1,wi$1)))),(Cu||Pu)&&(Tu.effectTag|=4),null);case 4:return eh(),oi$1(Tu),null;case 10:return og(Tu),null;case 17:return L$3(Tu.type)&&Df(),null;case 19:if(H$2(M$2),Pu=Tu.memoizedState,Pu===null)return null;if(Bu=(Tu.effectTag&64)!==0,Ru=Pu.rendering,Ru===null){if(Bu)ri$1(Pu,!1);else if(S$2!==ti$1||_u!==null&&(_u.effectTag&64)!==0)for(Ru=Tu.child;Ru!==null;){if(_u=hh(Ru),_u!==null){for(Tu.effectTag|=64,ri$1(Pu,!1),Bu=_u.updateQueue,Bu!==null&&(Tu.updateQueue=Bu,Tu.effectTag|=4),Pu.lastEffect===null&&(Tu.firstEffect=null),Tu.lastEffect=Pu.lastEffect,Pu=Tu.child;Pu!==null;)Bu=Pu,Ru=Cu,Bu.effectTag&=2,Bu.nextEffect=null,Bu.firstEffect=null,Bu.lastEffect=null,_u=Bu.alternate,_u===null?(Bu.childExpirationTime=0,Bu.expirationTime=Ru,Bu.child=null,Bu.memoizedProps=null,Bu.memoizedState=null,Bu.updateQueue=null,Bu.dependencies=null):(Bu.childExpirationTime=_u.childExpirationTime,Bu.expirationTime=_u.expirationTime,Bu.child=_u.child,Bu.memoizedProps=_u.memoizedProps,Bu.memoizedState=_u.memoizedState,Bu.updateQueue=_u.updateQueue,Ru=_u.dependencies,Bu.dependencies=Ru===null?null:{expirationTime:Ru.expirationTime,firstContext:Ru.firstContext,responders:Ru.responders}),Pu=Pu.sibling;return I$2(M$2,M$2.current&1|2),Tu.child}Ru=Ru.sibling}}else{if(!Bu)if(_u=hh(Ru),_u!==null){if(Tu.effectTag|=64,Bu=!0,Cu=_u.updateQueue,Cu!==null&&(Tu.updateQueue=Cu,Tu.effectTag|=4),ri$1(Pu,!0),Pu.tail===null&&Pu.tailMode==="hidden"&&!Ru.alternate)return Tu=Tu.lastEffect=Pu.lastEffect,Tu!==null&&(Tu.nextEffect=null),null}else 2*$f()-Pu.renderingStartTime>Pu.tailExpiration&&1<Cu&&(Tu.effectTag|=64,Bu=!0,ri$1(Pu,!1),Tu.expirationTime=Tu.childExpirationTime=Cu-1);Pu.isBackwards?(Ru.sibling=Tu.child,Tu.child=Ru):(Cu=Pu.last,Cu!==null?Cu.sibling=Ru:Tu.child=Ru,Pu.last=Ru)}return Pu.tail!==null?(Pu.tailExpiration===0&&(Pu.tailExpiration=$f()+500),Cu=Pu.tail,Pu.rendering=Cu,Pu.tail=Cu.sibling,Pu.lastEffect=Tu.lastEffect,Pu.renderingStartTime=$f(),Cu.sibling=null,Tu=M$2.current,I$2(M$2,Bu?Tu&1|2:Tu&1),Cu):null}throw Error(u$3(156,Tu.tag))}function zi$1(_u){switch(_u.tag){case 1:L$3(_u.type)&&Df();var Tu=_u.effectTag;return Tu&4096?(_u.effectTag=Tu&-4097|64,_u):null;case 3:if(eh(),H$2(K$2),H$2(J$2),Tu=_u.effectTag,(Tu&64)!==0)throw Error(u$3(285));return _u.effectTag=Tu&-4097|64,_u;case 5:return gh(_u),null;case 13:return H$2(M$2),Tu=_u.effectTag,Tu&4096?(_u.effectTag=Tu&-4097|64,_u):null;case 19:return H$2(M$2),null;case 4:return eh(),null;case 10:return og(_u),null;default:return null}}function Ai$1(_u,Tu){return{value:_u,source:Tu,stack:qb(Tu)}}var Bi$1=typeof WeakSet=="function"?WeakSet:Set;function Ci$1(_u,Tu){var Cu=Tu.source,Pu=Tu.stack;Pu===null&&Cu!==null&&(Pu=qb(Cu)),Cu!==null&&pb(Cu.type),Tu=Tu.value,_u!==null&&_u.tag===1&&pb(_u.type);try{console.error(Tu)}catch(Bu){setTimeout(function(){throw Bu})}}function Di$1(_u,Tu){try{Tu.props=_u.memoizedProps,Tu.state=_u.memoizedState,Tu.componentWillUnmount()}catch(Cu){Ei$1(_u,Cu)}}function Fi$1(_u){var Tu=_u.ref;if(Tu!==null)if(typeof Tu=="function")try{Tu(null)}catch(Cu){Ei$1(_u,Cu)}else Tu.current=null}function Gi$1(_u,Tu){switch(Tu.tag){case 0:case 11:case 15:case 22:return;case 1:if(Tu.effectTag&256&&_u!==null){var Cu=_u.memoizedProps,Pu=_u.memoizedState;_u=Tu.stateNode,Tu=_u.getSnapshotBeforeUpdate(Tu.elementType===Tu.type?Cu:ig(Tu.type,Cu),Pu),_u.__reactInternalSnapshotBeforeUpdate=Tu}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$3(163))}function Hi$1(_u,Tu){if(Tu=Tu.updateQueue,Tu=Tu!==null?Tu.lastEffect:null,Tu!==null){var Cu=Tu=Tu.next;do{if((Cu.tag&_u)===_u){var Pu=Cu.destroy;Cu.destroy=void 0,Pu!==void 0&&Pu()}Cu=Cu.next}while(Cu!==Tu)}}function Ii$1(_u,Tu){if(Tu=Tu.updateQueue,Tu=Tu!==null?Tu.lastEffect:null,Tu!==null){var Cu=Tu=Tu.next;do{if((Cu.tag&_u)===_u){var Pu=Cu.create;Cu.destroy=Pu()}Cu=Cu.next}while(Cu!==Tu)}}function Ji$1(_u,Tu,Cu){switch(Cu.tag){case 0:case 11:case 15:case 22:Ii$1(3,Cu);return;case 1:if(_u=Cu.stateNode,Cu.effectTag&4)if(Tu===null)_u.componentDidMount();else{var Pu=Cu.elementType===Cu.type?Tu.memoizedProps:ig(Cu.type,Tu.memoizedProps);_u.componentDidUpdate(Pu,Tu.memoizedState,_u.__reactInternalSnapshotBeforeUpdate)}Tu=Cu.updateQueue,Tu!==null&&Cg(Cu,Tu,_u);return;case 3:if(Tu=Cu.updateQueue,Tu!==null){if(_u=null,Cu.child!==null)switch(Cu.child.tag){case 5:_u=Cu.child.stateNode;break;case 1:_u=Cu.child.stateNode}Cg(Cu,Tu,_u)}return;case 5:_u=Cu.stateNode,Tu===null&&Cu.effectTag&4&&Fd(Cu.type,Cu.memoizedProps)&&_u.focus();return;case 6:return;case 4:return;case 12:return;case 13:Cu.memoizedState===null&&(Cu=Cu.alternate,Cu!==null&&(Cu=Cu.memoizedState,Cu!==null&&(Cu=Cu.dehydrated,Cu!==null&&Vc(Cu))));return;case 19:case 17:case 20:case 21:return}throw Error(u$3(163))}function Ki$1(_u,Tu,Cu){switch(typeof Li$1=="function"&&Li$1(Tu),Tu.tag){case 0:case 11:case 14:case 15:case 22:if(_u=Tu.updateQueue,_u!==null&&(_u=_u.lastEffect,_u!==null)){var Pu=_u.next;cg(97<Cu?97:Cu,function(){var Bu=Pu;do{var Ru=Bu.destroy;if(Ru!==void 0){var Lu=Tu;try{Ru()}catch(Ou){Ei$1(Lu,Ou)}}Bu=Bu.next}while(Bu!==Pu)})}break;case 1:Fi$1(Tu),Cu=Tu.stateNode,typeof Cu.componentWillUnmount=="function"&&Di$1(Tu,Cu);break;case 5:Fi$1(Tu);break;case 4:Mi$1(_u,Tu,Cu)}}function Ni$1(_u){var Tu=_u.alternate;_u.return=null,_u.child=null,_u.memoizedState=null,_u.updateQueue=null,_u.dependencies=null,_u.alternate=null,_u.firstEffect=null,_u.lastEffect=null,_u.pendingProps=null,_u.memoizedProps=null,_u.stateNode=null,Tu!==null&&Ni$1(Tu)}function Oi$1(_u){return _u.tag===5||_u.tag===3||_u.tag===4}function Pi$1(_u){e:{for(var Tu=_u.return;Tu!==null;){if(Oi$1(Tu)){var Cu=Tu;break e}Tu=Tu.return}throw Error(u$3(160))}switch(Tu=Cu.stateNode,Cu.tag){case 5:var Pu=!1;break;case 3:Tu=Tu.containerInfo,Pu=!0;break;case 4:Tu=Tu.containerInfo,Pu=!0;break;default:throw Error(u$3(161))}Cu.effectTag&16&&(Rb(Tu,""),Cu.effectTag&=-17);e:t:for(Cu=_u;;){for(;Cu.sibling===null;){if(Cu.return===null||Oi$1(Cu.return)){Cu=null;break e}Cu=Cu.return}for(Cu.sibling.return=Cu.return,Cu=Cu.sibling;Cu.tag!==5&&Cu.tag!==6&&Cu.tag!==18;){if(Cu.effectTag&2||Cu.child===null||Cu.tag===4)continue t;Cu.child.return=Cu,Cu=Cu.child}if(!(Cu.effectTag&2)){Cu=Cu.stateNode;break e}}Pu?Qi$1(_u,Cu,Tu):Ri$1(_u,Cu,Tu)}function Qi$1(_u,Tu,Cu){var Pu=_u.tag,Bu=Pu===5||Pu===6;if(Bu)_u=Bu?_u.stateNode:_u.stateNode.instance,Tu?Cu.nodeType===8?Cu.parentNode.insertBefore(_u,Tu):Cu.insertBefore(_u,Tu):(Cu.nodeType===8?(Tu=Cu.parentNode,Tu.insertBefore(_u,Cu)):(Tu=Cu,Tu.appendChild(_u)),Cu=Cu._reactRootContainer,Cu!=null||Tu.onclick!==null||(Tu.onclick=sd));else if(Pu!==4&&(_u=_u.child,_u!==null))for(Qi$1(_u,Tu,Cu),_u=_u.sibling;_u!==null;)Qi$1(_u,Tu,Cu),_u=_u.sibling}function Ri$1(_u,Tu,Cu){var Pu=_u.tag,Bu=Pu===5||Pu===6;if(Bu)_u=Bu?_u.stateNode:_u.stateNode.instance,Tu?Cu.insertBefore(_u,Tu):Cu.appendChild(_u);else if(Pu!==4&&(_u=_u.child,_u!==null))for(Ri$1(_u,Tu,Cu),_u=_u.sibling;_u!==null;)Ri$1(_u,Tu,Cu),_u=_u.sibling}function Mi$1(_u,Tu,Cu){for(var Pu=Tu,Bu=!1,Ru,Lu;;){if(!Bu){Bu=Pu.return;e:for(;;){if(Bu===null)throw Error(u$3(160));switch(Ru=Bu.stateNode,Bu.tag){case 5:Lu=!1;break e;case 3:Ru=Ru.containerInfo,Lu=!0;break e;case 4:Ru=Ru.containerInfo,Lu=!0;break e}Bu=Bu.return}Bu=!0}if(Pu.tag===5||Pu.tag===6){e:for(var Ou=_u,Du=Pu,$u=Cu,ku=Du;;)if(Ki$1(Ou,ku,$u),ku.child!==null&&ku.tag!==4)ku.child.return=ku,ku=ku.child;else{if(ku===Du)break e;for(;ku.sibling===null;){if(ku.return===null||ku.return===Du)break e;ku=ku.return}ku.sibling.return=ku.return,ku=ku.sibling}Lu?(Ou=Ru,Du=Pu.stateNode,Ou.nodeType===8?Ou.parentNode.removeChild(Du):Ou.removeChild(Du)):Ru.removeChild(Pu.stateNode)}else if(Pu.tag===4){if(Pu.child!==null){Ru=Pu.stateNode.containerInfo,Lu=!0,Pu.child.return=Pu,Pu=Pu.child;continue}}else if(Ki$1(_u,Pu,Cu),Pu.child!==null){Pu.child.return=Pu,Pu=Pu.child;continue}if(Pu===Tu)break;for(;Pu.sibling===null;){if(Pu.return===null||Pu.return===Tu)return;Pu=Pu.return,Pu.tag===4&&(Bu=!1)}Pu.sibling.return=Pu.return,Pu=Pu.sibling}}function Si$1(_u,Tu){switch(Tu.tag){case 0:case 11:case 14:case 15:case 22:Hi$1(3,Tu);return;case 1:return;case 5:var Cu=Tu.stateNode;if(Cu!=null){var Pu=Tu.memoizedProps,Bu=_u!==null?_u.memoizedProps:Pu;_u=Tu.type;var Ru=Tu.updateQueue;if(Tu.updateQueue=null,Ru!==null){for(Cu[Nd]=Pu,_u==="input"&&Pu.type==="radio"&&Pu.name!=null&&Bb(Cu,Pu),pd(_u,Bu),Tu=pd(_u,Pu),Bu=0;Bu<Ru.length;Bu+=2){var Lu=Ru[Bu],Ou=Ru[Bu+1];Lu==="style"?md(Cu,Ou):Lu==="dangerouslySetInnerHTML"?Qb(Cu,Ou):Lu==="children"?Rb(Cu,Ou):Xa$1(Cu,Lu,Ou,Tu)}switch(_u){case"input":Cb(Cu,Pu);break;case"textarea":Kb(Cu,Pu);break;case"select":Tu=Cu._wrapperState.wasMultiple,Cu._wrapperState.wasMultiple=!!Pu.multiple,_u=Pu.value,_u!=null?Hb(Cu,!!Pu.multiple,_u,!1):Tu!==!!Pu.multiple&&(Pu.defaultValue!=null?Hb(Cu,!!Pu.multiple,Pu.defaultValue,!0):Hb(Cu,!!Pu.multiple,Pu.multiple?[]:"",!1))}}}return;case 6:if(Tu.stateNode===null)throw Error(u$3(162));Tu.stateNode.nodeValue=Tu.memoizedProps;return;case 3:Tu=Tu.stateNode,Tu.hydrate&&(Tu.hydrate=!1,Vc(Tu.containerInfo));return;case 12:return;case 13:if(Cu=Tu,Tu.memoizedState===null?Pu=!1:(Pu=!0,Cu=Tu.child,Ti$1=$f()),Cu!==null)e:for(_u=Cu;;){if(_u.tag===5)Ru=_u.stateNode,Pu?(Ru=Ru.style,typeof Ru.setProperty=="function"?Ru.setProperty("display","none","important"):Ru.display="none"):(Ru=_u.stateNode,Bu=_u.memoizedProps.style,Bu=Bu!=null&&Bu.hasOwnProperty("display")?Bu.display:null,Ru.style.display=ld("display",Bu));else if(_u.tag===6)_u.stateNode.nodeValue=Pu?"":_u.memoizedProps;else if(_u.tag===13&&_u.memoizedState!==null&&_u.memoizedState.dehydrated===null){Ru=_u.child.sibling,Ru.return=_u,_u=Ru;continue}else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===Cu)break;for(;_u.sibling===null;){if(_u.return===null||_u.return===Cu)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Ui$1(Tu);return;case 19:Ui$1(Tu);return;case 17:return}throw Error(u$3(163))}function Ui$1(_u){var Tu=_u.updateQueue;if(Tu!==null){_u.updateQueue=null;var Cu=_u.stateNode;Cu===null&&(Cu=_u.stateNode=new Bi$1),Tu.forEach(function(Pu){var Bu=Vi$1.bind(null,_u,Pu);Cu.has(Pu)||(Cu.add(Pu),Pu.then(Bu,Bu))})}}var Wi$1=typeof WeakMap=="function"?WeakMap:Map;function Xi$1(_u,Tu,Cu){Cu=wg(Cu,null),Cu.tag=3,Cu.payload={element:null};var Pu=Tu.value;return Cu.callback=function(){Yi$1||(Yi$1=!0,Zi$1=Pu),Ci$1(_u,Tu)},Cu}function $i$1(_u,Tu,Cu){Cu=wg(Cu,null),Cu.tag=3;var Pu=_u.type.getDerivedStateFromError;if(typeof Pu=="function"){var Bu=Tu.value;Cu.payload=function(){return Ci$1(_u,Tu),Pu(Bu)}}var Ru=_u.stateNode;return Ru!==null&&typeof Ru.componentDidCatch=="function"&&(Cu.callback=function(){typeof Pu!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$1(_u,Tu));var Lu=Tu.stack;this.componentDidCatch(Tu.value,{componentStack:Lu!==null?Lu:""})}),Cu}var bj=Math.ceil,cj=Wa$1.ReactCurrentDispatcher,dj=Wa$1.ReactCurrentOwner,V$2=0,ej=8,fj=16,gj=32,ti$1=0,hj=1,ij=2,ui$1=3,vi$1=4,jj=5,W$3=V$2,T$1=null,X$2=null,U$2=0,S$2=ti$1,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$1=0,oj=!1,Ti$1=0,pj=500,Y$2=null,Yi$1=!1,Zi$1=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W$3&(fj|gj))!==V$2?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(_u,Tu,Cu){if(Tu=Tu.mode,(Tu&2)===0)return 1073741823;var Pu=ag();if((Tu&4)===0)return Pu===99?1073741823:1073741822;if((W$3&fj)!==V$2)return U$2;if(Cu!==null)_u=hg(_u,Cu.timeoutMs|0||5e3,250);else switch(Pu){case 99:_u=1073741823;break;case 98:_u=hg(_u,150,100);break;case 97:case 96:_u=hg(_u,5e3,250);break;case 95:_u=2;break;default:throw Error(u$3(326))}return T$1!==null&&_u===U$2&&--_u,_u}function Ig(_u,Tu){if(50<uj)throw uj=0,vj=null,Error(u$3(185));if(_u=xj(_u,Tu),_u!==null){var Cu=ag();Tu===1073741823?(W$3&ej)!==V$2&&(W$3&(fj|gj))===V$2?yj(_u):(Z$2(_u),W$3===V$2&&gg()):Z$2(_u),(W$3&4)===V$2||Cu!==98&&Cu!==99||(tj===null?tj=new Map([[_u,Tu]]):(Cu=tj.get(_u),(Cu===void 0||Cu>Tu)&&tj.set(_u,Tu)))}}function xj(_u,Tu){_u.expirationTime<Tu&&(_u.expirationTime=Tu);var Cu=_u.alternate;Cu!==null&&Cu.expirationTime<Tu&&(Cu.expirationTime=Tu);var Pu=_u.return,Bu=null;if(Pu===null&&_u.tag===3)Bu=_u.stateNode;else for(;Pu!==null;){if(Cu=Pu.alternate,Pu.childExpirationTime<Tu&&(Pu.childExpirationTime=Tu),Cu!==null&&Cu.childExpirationTime<Tu&&(Cu.childExpirationTime=Tu),Pu.return===null&&Pu.tag===3){Bu=Pu.stateNode;break}Pu=Pu.return}return Bu!==null&&(T$1===Bu&&(Bg(Tu),S$2===vi$1&&xi$1(Bu,U$2)),yi$1(Bu,Tu)),Bu}function zj(_u){var Tu=_u.lastExpiredTime;if(Tu!==0||(Tu=_u.firstPendingTime,!Aj(_u,Tu)))return Tu;var Cu=_u.lastPingedTime;return _u=_u.nextKnownPendingLevel,_u=Cu>_u?Cu:_u,2>=_u&&Tu!==_u?0:_u}function Z$2(_u){if(_u.lastExpiredTime!==0)_u.callbackExpirationTime=1073741823,_u.callbackPriority=99,_u.callbackNode=eg(yj.bind(null,_u));else{var Tu=zj(_u),Cu=_u.callbackNode;if(Tu===0)Cu!==null&&(_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90);else{var Pu=Gg();if(Tu===1073741823?Pu=99:Tu===1||Tu===2?Pu=95:(Pu=10*(1073741821-Tu)-10*(1073741821-Pu),Pu=0>=Pu?99:250>=Pu?98:5250>=Pu?97:95),Cu!==null){var Bu=_u.callbackPriority;if(_u.callbackExpirationTime===Tu&&Bu>=Pu)return;Cu!==Tf&&Kf(Cu)}_u.callbackExpirationTime=Tu,_u.callbackPriority=Pu,Tu=Tu===1073741823?eg(yj.bind(null,_u)):dg(Pu,Bj.bind(null,_u),{timeout:10*(1073741821-Tu)-$f()}),_u.callbackNode=Tu}}}function Bj(_u,Tu){if(wj=0,Tu)return Tu=Gg(),Cj(_u,Tu),Z$2(_u),null;var Cu=zj(_u);if(Cu!==0){if(Tu=_u.callbackNode,(W$3&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),_u===T$1&&Cu===U$2||Ej(_u,Cu),X$2!==null){var Pu=W$3;W$3|=fj;var Bu=Fj();do try{Gj();break}catch(Ou){Hj(_u,Ou)}while(1);if(ng(),W$3=Pu,cj.current=Bu,S$2===hj)throw Tu=kj,Ej(_u,Cu),xi$1(_u,Cu),Z$2(_u),Tu;if(X$2===null)switch(Bu=_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=Cu,Pu=S$2,T$1=null,Pu){case ti$1:case hj:throw Error(u$3(345));case ij:Cj(_u,2<Cu?2:Cu);break;case ui$1:if(xi$1(_u,Cu),Pu=_u.lastSuspendedTime,Cu===Pu&&(_u.nextKnownPendingLevel=Ij(Bu)),lj===1073741823&&(Bu=Ti$1+pj-$f(),10<Bu)){if(oj){var Ru=_u.lastPingedTime;if(Ru===0||Ru>=Cu){_u.lastPingedTime=Cu,Ej(_u,Cu);break}}if(Ru=zj(_u),Ru!==0&&Ru!==Cu)break;if(Pu!==0&&Pu!==Cu){_u.lastPingedTime=Pu;break}_u.timeoutHandle=Hd(Jj.bind(null,_u),Bu);break}Jj(_u);break;case vi$1:if(xi$1(_u,Cu),Pu=_u.lastSuspendedTime,Cu===Pu&&(_u.nextKnownPendingLevel=Ij(Bu)),oj&&(Bu=_u.lastPingedTime,Bu===0||Bu>=Cu)){_u.lastPingedTime=Cu,Ej(_u,Cu);break}if(Bu=zj(_u),Bu!==0&&Bu!==Cu)break;if(Pu!==0&&Pu!==Cu){_u.lastPingedTime=Pu;break}if(mj!==1073741823?Pu=10*(1073741821-mj)-$f():lj===1073741823?Pu=0:(Pu=10*(1073741821-lj)-5e3,Bu=$f(),Cu=10*(1073741821-Cu)-Bu,Pu=Bu-Pu,0>Pu&&(Pu=0),Pu=(120>Pu?120:480>Pu?480:1080>Pu?1080:1920>Pu?1920:3e3>Pu?3e3:4320>Pu?4320:1960*bj(Pu/1960))-Pu,Cu<Pu&&(Pu=Cu)),10<Pu){_u.timeoutHandle=Hd(Jj.bind(null,_u),Pu);break}Jj(_u);break;case jj:if(lj!==1073741823&&nj!==null){Ru=lj;var Lu=nj;if(Pu=Lu.busyMinDurationMs|0,0>=Pu?Pu=0:(Bu=Lu.busyDelayMs|0,Ru=$f()-(10*(1073741821-Ru)-(Lu.timeoutMs|0||5e3)),Pu=Ru<=Bu?0:Bu+Pu-Ru),10<Pu){xi$1(_u,Cu),_u.timeoutHandle=Hd(Jj.bind(null,_u),Pu);break}}Jj(_u);break;default:throw Error(u$3(329))}if(Z$2(_u),_u.callbackNode===Tu)return Bj.bind(null,_u)}}return null}function yj(_u){var Tu=_u.lastExpiredTime;if(Tu=Tu!==0?Tu:1073741823,(W$3&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),_u===T$1&&Tu===U$2||Ej(_u,Tu),X$2!==null){var Cu=W$3;W$3|=fj;var Pu=Fj();do try{Kj();break}catch(Bu){Hj(_u,Bu)}while(1);if(ng(),W$3=Cu,cj.current=Pu,S$2===hj)throw Cu=kj,Ej(_u,Tu),xi$1(_u,Tu),Z$2(_u),Cu;if(X$2!==null)throw Error(u$3(261));_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=Tu,T$1=null,Jj(_u),Z$2(_u)}return null}function Lj(){if(tj!==null){var _u=tj;tj=null,_u.forEach(function(Tu,Cu){Cj(Cu,Tu),Z$2(Cu)}),gg()}}function Mj(_u,Tu){var Cu=W$3;W$3|=1;try{return _u(Tu)}finally{W$3=Cu,W$3===V$2&&gg()}}function Nj(_u,Tu){var Cu=W$3;W$3&=-2,W$3|=ej;try{return _u(Tu)}finally{W$3=Cu,W$3===V$2&&gg()}}function Ej(_u,Tu){_u.finishedWork=null,_u.finishedExpirationTime=0;var Cu=_u.timeoutHandle;if(Cu!==-1&&(_u.timeoutHandle=-1,Id(Cu)),X$2!==null)for(Cu=X$2.return;Cu!==null;){var Pu=Cu;switch(Pu.tag){case 1:Pu=Pu.type.childContextTypes,Pu!=null&&Df();break;case 3:eh(),H$2(K$2),H$2(J$2);break;case 5:gh(Pu);break;case 4:eh();break;case 13:H$2(M$2);break;case 19:H$2(M$2);break;case 10:og(Pu)}Cu=Cu.return}T$1=_u,X$2=Sg(_u.current,null),U$2=Tu,S$2=ti$1,kj=null,mj=lj=1073741823,nj=null,wi$1=0,oj=!1}function Hj(_u,Tu){do{try{if(ng(),jh.current=sh,mh)for(var Cu=N$3.memoizedState;Cu!==null;){var Pu=Cu.queue;Pu!==null&&(Pu.pending=null),Cu=Cu.next}if(lh=0,P$3=O$3=N$3=null,mh=!1,X$2===null||X$2.return===null)return S$2=hj,kj=Tu,X$2=null;e:{var Bu=_u,Ru=X$2.return,Lu=X$2,Ou=Tu;if(Tu=U$2,Lu.effectTag|=2048,Lu.firstEffect=Lu.lastEffect=null,Ou!==null&&typeof Ou=="object"&&typeof Ou.then=="function"){var Du=Ou;if((Lu.mode&2)===0){var $u=Lu.alternate;$u?(Lu.updateQueue=$u.updateQueue,Lu.memoizedState=$u.memoizedState,Lu.expirationTime=$u.expirationTime):(Lu.updateQueue=null,Lu.memoizedState=null)}var ku=(M$2.current&1)!==0,Fu=Ru;do{var Nu;if(Nu=Fu.tag===13){var Vu=Fu.memoizedState;if(Vu!==null)Nu=Vu.dehydrated!==null;else{var Gu=Fu.memoizedProps;Nu=Gu.fallback===void 0?!1:Gu.unstable_avoidThisFallback!==!0?!0:!ku}}if(Nu){var Hu=Fu.updateQueue;if(Hu===null){var ju=new Set;ju.add(Du),Fu.updateQueue=ju}else Hu.add(Du);if((Fu.mode&2)===0){if(Fu.effectTag|=64,Lu.effectTag&=-2981,Lu.tag===1)if(Lu.alternate===null)Lu.tag=17;else{var Uu=wg(1073741823,null);Uu.tag=2,xg(Lu,Uu)}Lu.expirationTime=1073741823;break e}Ou=void 0,Lu=Tu;var zu=Bu.pingCache;if(zu===null?(zu=Bu.pingCache=new Wi$1,Ou=new Set,zu.set(Du,Ou)):(Ou=zu.get(Du),Ou===void 0&&(Ou=new Set,zu.set(Du,Ou))),!Ou.has(Lu)){Ou.add(Lu);var Wu=Oj.bind(null,Bu,Du,Lu);Du.then(Wu,Wu)}Fu.effectTag|=4096,Fu.expirationTime=Tu;break e}Fu=Fu.return}while(Fu!==null);Ou=Error((pb(Lu.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb(Lu))}S$2!==jj&&(S$2=ij),Ou=Ai$1(Ou,Lu),Fu=Ru;do{switch(Fu.tag){case 3:Du=Ou,Fu.effectTag|=4096,Fu.expirationTime=Tu;var Qu=Xi$1(Fu,Du,Tu);yg(Fu,Qu);break e;case 1:Du=Ou;var qu=Fu.type,Yu=Fu.stateNode;if((Fu.effectTag&64)===0&&(typeof qu.getDerivedStateFromError=="function"||Yu!==null&&typeof Yu.componentDidCatch=="function"&&(aj===null||!aj.has(Yu)))){Fu.effectTag|=4096,Fu.expirationTime=Tu;var Xc=$i$1(Fu,Du,Tu);yg(Fu,Xc);break e}}Fu=Fu.return}while(Fu!==null)}X$2=Pj(X$2)}catch(_h){Tu=_h;continue}break}while(1)}function Fj(){var _u=cj.current;return cj.current=sh,_u===null?sh:_u}function Ag(_u,Tu){_u<lj&&2<_u&&(lj=_u),Tu!==null&&_u<mj&&2<_u&&(mj=_u,nj=Tu)}function Bg(_u){_u>wi$1&&(wi$1=_u)}function Kj(){for(;X$2!==null;)X$2=Qj(X$2)}function Gj(){for(;X$2!==null&&!Uf();)X$2=Qj(X$2)}function Qj(_u){var Tu=Rj(_u.alternate,_u,U$2);return _u.memoizedProps=_u.pendingProps,Tu===null&&(Tu=Pj(_u)),dj.current=null,Tu}function Pj(_u){X$2=_u;do{var Tu=X$2.alternate;if(_u=X$2.return,(X$2.effectTag&2048)===0){if(Tu=si$1(Tu,X$2,U$2),U$2===1||X$2.childExpirationTime!==1){for(var Cu=0,Pu=X$2.child;Pu!==null;){var Bu=Pu.expirationTime,Ru=Pu.childExpirationTime;Bu>Cu&&(Cu=Bu),Ru>Cu&&(Cu=Ru),Pu=Pu.sibling}X$2.childExpirationTime=Cu}if(Tu!==null)return Tu;_u!==null&&(_u.effectTag&2048)===0&&(_u.firstEffect===null&&(_u.firstEffect=X$2.firstEffect),X$2.lastEffect!==null&&(_u.lastEffect!==null&&(_u.lastEffect.nextEffect=X$2.firstEffect),_u.lastEffect=X$2.lastEffect),1<X$2.effectTag&&(_u.lastEffect!==null?_u.lastEffect.nextEffect=X$2:_u.firstEffect=X$2,_u.lastEffect=X$2))}else{if(Tu=zi$1(X$2),Tu!==null)return Tu.effectTag&=2047,Tu;_u!==null&&(_u.firstEffect=_u.lastEffect=null,_u.effectTag|=2048)}if(Tu=X$2.sibling,Tu!==null)return Tu;X$2=_u}while(X$2!==null);return S$2===ti$1&&(S$2=jj),null}function Ij(_u){var Tu=_u.expirationTime;return _u=_u.childExpirationTime,Tu>_u?Tu:_u}function Jj(_u){var Tu=ag();return cg(99,Sj.bind(null,_u,Tu)),null}function Sj(_u,Tu){do Dj();while(rj!==null);if((W$3&(fj|gj))!==V$2)throw Error(u$3(327));var Cu=_u.finishedWork,Pu=_u.finishedExpirationTime;if(Cu===null)return null;if(_u.finishedWork=null,_u.finishedExpirationTime=0,Cu===_u.current)throw Error(u$3(177));_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90,_u.nextKnownPendingLevel=0;var Bu=Ij(Cu);if(_u.firstPendingTime=Bu,Pu<=_u.lastSuspendedTime?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:Pu<=_u.firstSuspendedTime&&(_u.firstSuspendedTime=Pu-1),Pu<=_u.lastPingedTime&&(_u.lastPingedTime=0),Pu<=_u.lastExpiredTime&&(_u.lastExpiredTime=0),_u===T$1&&(X$2=T$1=null,U$2=0),1<Cu.effectTag?Cu.lastEffect!==null?(Cu.lastEffect.nextEffect=Cu,Bu=Cu.firstEffect):Bu=Cu:Bu=Cu.firstEffect,Bu!==null){var Ru=W$3;W$3|=gj,dj.current=null,Dd=fd;var Lu=xd();if(yd(Lu)){if("selectionStart"in Lu)var Ou={start:Lu.selectionStart,end:Lu.selectionEnd};else e:{Ou=(Ou=Lu.ownerDocument)&&Ou.defaultView||window;var Du=Ou.getSelection&&Ou.getSelection();if(Du&&Du.rangeCount!==0){Ou=Du.anchorNode;var $u=Du.anchorOffset,ku=Du.focusNode;Du=Du.focusOffset;try{Ou.nodeType,ku.nodeType}catch{Ou=null;break e}var Fu=0,Nu=-1,Vu=-1,Gu=0,Hu=0,ju=Lu,Uu=null;t:for(;;){for(var zu;ju!==Ou||$u!==0&&ju.nodeType!==3||(Nu=Fu+$u),ju!==ku||Du!==0&&ju.nodeType!==3||(Vu=Fu+Du),ju.nodeType===3&&(Fu+=ju.nodeValue.length),(zu=ju.firstChild)!==null;)Uu=ju,ju=zu;for(;;){if(ju===Lu)break t;if(Uu===Ou&&++Gu===$u&&(Nu=Fu),Uu===ku&&++Hu===Du&&(Vu=Fu),(zu=ju.nextSibling)!==null)break;ju=Uu,Uu=ju.parentNode}ju=zu}Ou=Nu===-1||Vu===-1?null:{start:Nu,end:Vu}}else Ou=null}Ou=Ou||{start:0,end:0}}else Ou=null;Ed={activeElementDetached:null,focusedElem:Lu,selectionRange:Ou},fd=!1,Y$2=Bu;do try{Tj()}catch(_d){if(Y$2===null)throw Error(u$3(330));Ei$1(Y$2,_d),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=Bu;do try{for(Lu=_u,Ou=Tu;Y$2!==null;){var Wu=Y$2.effectTag;if(Wu&16&&Rb(Y$2.stateNode,""),Wu&128){var Qu=Y$2.alternate;if(Qu!==null){var qu=Qu.ref;qu!==null&&(typeof qu=="function"?qu(null):qu.current=null)}}switch(Wu&1038){case 2:Pi$1(Y$2),Y$2.effectTag&=-3;break;case 6:Pi$1(Y$2),Y$2.effectTag&=-3,Si$1(Y$2.alternate,Y$2);break;case 1024:Y$2.effectTag&=-1025;break;case 1028:Y$2.effectTag&=-1025,Si$1(Y$2.alternate,Y$2);break;case 4:Si$1(Y$2.alternate,Y$2);break;case 8:$u=Y$2,Mi$1(Lu,$u,Ou),Ni$1($u)}Y$2=Y$2.nextEffect}}catch(_d){if(Y$2===null)throw Error(u$3(330));Ei$1(Y$2,_d),Y$2=Y$2.nextEffect}while(Y$2!==null);if(qu=Ed,Qu=xd(),Wu=qu.focusedElem,Ou=qu.selectionRange,Qu!==Wu&&Wu&&Wu.ownerDocument&&wd(Wu.ownerDocument.documentElement,Wu)){for(Ou!==null&&yd(Wu)&&(Qu=Ou.start,qu=Ou.end,qu===void 0&&(qu=Qu),"selectionStart"in Wu?(Wu.selectionStart=Qu,Wu.selectionEnd=Math.min(qu,Wu.value.length)):(qu=(Qu=Wu.ownerDocument||document)&&Qu.defaultView||window,qu.getSelection&&(qu=qu.getSelection(),$u=Wu.textContent.length,Lu=Math.min(Ou.start,$u),Ou=Ou.end===void 0?Lu:Math.min(Ou.end,$u),!qu.extend&&Lu>Ou&&($u=Ou,Ou=Lu,Lu=$u),$u=vd(Wu,Lu),ku=vd(Wu,Ou),$u&&ku&&(qu.rangeCount!==1||qu.anchorNode!==$u.node||qu.anchorOffset!==$u.offset||qu.focusNode!==ku.node||qu.focusOffset!==ku.offset)&&(Qu=Qu.createRange(),Qu.setStart($u.node,$u.offset),qu.removeAllRanges(),Lu>Ou?(qu.addRange(Qu),qu.extend(ku.node,ku.offset)):(Qu.setEnd(ku.node,ku.offset),qu.addRange(Qu)))))),Qu=[],qu=Wu;qu=qu.parentNode;)qu.nodeType===1&&Qu.push({element:qu,left:qu.scrollLeft,top:qu.scrollTop});for(typeof Wu.focus=="function"&&Wu.focus(),Wu=0;Wu<Qu.length;Wu++)qu=Qu[Wu],qu.element.scrollLeft=qu.left,qu.element.scrollTop=qu.top}fd=!!Dd,Ed=Dd=null,_u.current=Cu,Y$2=Bu;do try{for(Wu=_u;Y$2!==null;){var Yu=Y$2.effectTag;if(Yu&36&&Ji$1(Wu,Y$2.alternate,Y$2),Yu&128){Qu=void 0;var Xc=Y$2.ref;if(Xc!==null){var _h=Y$2.stateNode;switch(Y$2.tag){case 5:Qu=_h;break;default:Qu=_h}typeof Xc=="function"?Xc(Qu):Xc.current=Qu}}Y$2=Y$2.nextEffect}}catch(_d){if(Y$2===null)throw Error(u$3(330));Ei$1(Y$2,_d),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=null,Vf(),W$3=Ru}else _u.current=Cu;if(qj)qj=!1,rj=_u,sj=Tu;else for(Y$2=Bu;Y$2!==null;)Tu=Y$2.nextEffect,Y$2.nextEffect=null,Y$2=Tu;if(Tu=_u.firstPendingTime,Tu===0&&(aj=null),Tu===1073741823?_u===vj?uj++:(uj=0,vj=_u):uj=0,typeof Uj=="function"&&Uj(Cu.stateNode,Pu),Z$2(_u),Yi$1)throw Yi$1=!1,_u=Zi$1,Zi$1=null,_u;return(W$3&ej)!==V$2||gg(),null}function Tj(){for(;Y$2!==null;){var _u=Y$2.effectTag;(_u&256)!==0&&Gi$1(Y$2.alternate,Y$2),(_u&512)===0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$2=Y$2.nextEffect}}function Dj(){if(sj!==90){var _u=97<sj?97:sj;return sj=90,cg(_u,Vj)}}function Vj(){if(rj===null)return!1;var _u=rj;if(rj=null,(W$3&(fj|gj))!==V$2)throw Error(u$3(331));var Tu=W$3;for(W$3|=gj,_u=_u.current.firstEffect;_u!==null;){try{var Cu=_u;if((Cu.effectTag&512)!==0)switch(Cu.tag){case 0:case 11:case 15:case 22:Hi$1(5,Cu),Ii$1(5,Cu)}}catch(Pu){if(_u===null)throw Error(u$3(330));Ei$1(_u,Pu)}Cu=_u.nextEffect,_u.nextEffect=null,_u=Cu}return W$3=Tu,gg(),!0}function Wj(_u,Tu,Cu){Tu=Ai$1(Cu,Tu),Tu=Xi$1(_u,Tu,1073741823),xg(_u,Tu),_u=xj(_u,1073741823),_u!==null&&Z$2(_u)}function Ei$1(_u,Tu){if(_u.tag===3)Wj(_u,_u,Tu);else for(var Cu=_u.return;Cu!==null;){if(Cu.tag===3){Wj(Cu,_u,Tu);break}else if(Cu.tag===1){var Pu=Cu.stateNode;if(typeof Cu.type.getDerivedStateFromError=="function"||typeof Pu.componentDidCatch=="function"&&(aj===null||!aj.has(Pu))){_u=Ai$1(Tu,_u),_u=$i$1(Cu,_u,1073741823),xg(Cu,_u),Cu=xj(Cu,1073741823),Cu!==null&&Z$2(Cu);break}}Cu=Cu.return}}function Oj(_u,Tu,Cu){var Pu=_u.pingCache;Pu!==null&&Pu.delete(Tu),T$1===_u&&U$2===Cu?S$2===vi$1||S$2===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(_u,U$2):oj=!0:Aj(_u,Cu)&&(Tu=_u.lastPingedTime,Tu!==0&&Tu<Cu||(_u.lastPingedTime=Cu,Z$2(_u)))}function Vi$1(_u,Tu){var Cu=_u.stateNode;Cu!==null&&Cu.delete(Tu),Tu=0,Tu===0&&(Tu=Gg(),Tu=Hg(Tu,_u,null)),_u=xj(_u,Tu),_u!==null&&Z$2(_u)}var Rj;Rj=function(_u,Tu,Cu){var Pu=Tu.expirationTime;if(_u!==null){var Bu=Tu.pendingProps;if(_u.memoizedProps!==Bu||K$2.current)rg=!0;else{if(Pu<Cu){switch(rg=!1,Tu.tag){case 3:hi$1(Tu),Xh();break;case 5:if(fh(Tu),Tu.mode&4&&Cu!==1&&Bu.hidden)return Tu.expirationTime=Tu.childExpirationTime=1,null;break;case 1:L$3(Tu.type)&&Gf(Tu);break;case 4:dh(Tu,Tu.stateNode.containerInfo);break;case 10:Pu=Tu.memoizedProps.value,Bu=Tu.type._context,I$2(jg,Bu._currentValue),Bu._currentValue=Pu;break;case 13:if(Tu.memoizedState!==null)return Pu=Tu.child.childExpirationTime,Pu!==0&&Pu>=Cu?ji$1(_u,Tu,Cu):(I$2(M$2,M$2.current&1),Tu=$h(_u,Tu,Cu),Tu!==null?Tu.sibling:null);I$2(M$2,M$2.current&1);break;case 19:if(Pu=Tu.childExpirationTime>=Cu,(_u.effectTag&64)!==0){if(Pu)return mi$1(_u,Tu,Cu);Tu.effectTag|=64}if(Bu=Tu.memoizedState,Bu!==null&&(Bu.rendering=null,Bu.tail=null),I$2(M$2,M$2.current),!Pu)return null}return $h(_u,Tu,Cu)}rg=!1}}else rg=!1;switch(Tu.expirationTime=0,Tu.tag){case 2:if(Pu=Tu.type,_u!==null&&(_u.alternate=null,Tu.alternate=null,Tu.effectTag|=2),_u=Tu.pendingProps,Bu=Cf(Tu,J$2.current),qg(Tu,Cu),Bu=oh(null,Tu,Pu,_u,Bu,Cu),Tu.effectTag|=1,typeof Bu=="object"&&Bu!==null&&typeof Bu.render=="function"&&Bu.$$typeof===void 0){if(Tu.tag=1,Tu.memoizedState=null,Tu.updateQueue=null,L$3(Pu)){var Ru=!0;Gf(Tu)}else Ru=!1;Tu.memoizedState=Bu.state!==null&&Bu.state!==void 0?Bu.state:null,ug(Tu);var Lu=Pu.getDerivedStateFromProps;typeof Lu=="function"&&Fg(Tu,Pu,Lu,_u),Bu.updater=Jg,Tu.stateNode=Bu,Bu._reactInternalFiber=Tu,Ng(Tu,Pu,_u,Cu),Tu=gi$1(null,Tu,Pu,!0,Ru,Cu)}else Tu.tag=0,R$3(null,Tu,Bu,Cu),Tu=Tu.child;return Tu;case 16:e:{if(Bu=Tu.elementType,_u!==null&&(_u.alternate=null,Tu.alternate=null,Tu.effectTag|=2),_u=Tu.pendingProps,ob(Bu),Bu._status!==1)throw Bu._result;switch(Bu=Bu._result,Tu.type=Bu,Ru=Tu.tag=Xj(Bu),_u=ig(Bu,_u),Ru){case 0:Tu=di$1(null,Tu,Bu,_u,Cu);break e;case 1:Tu=fi$1(null,Tu,Bu,_u,Cu);break e;case 11:Tu=Zh(null,Tu,Bu,_u,Cu);break e;case 14:Tu=ai$1(null,Tu,Bu,ig(Bu.type,_u),Pu,Cu);break e}throw Error(u$3(306,Bu,""))}return Tu;case 0:return Pu=Tu.type,Bu=Tu.pendingProps,Bu=Tu.elementType===Pu?Bu:ig(Pu,Bu),di$1(_u,Tu,Pu,Bu,Cu);case 1:return Pu=Tu.type,Bu=Tu.pendingProps,Bu=Tu.elementType===Pu?Bu:ig(Pu,Bu),fi$1(_u,Tu,Pu,Bu,Cu);case 3:if(hi$1(Tu),Pu=Tu.updateQueue,_u===null||Pu===null)throw Error(u$3(282));if(Pu=Tu.pendingProps,Bu=Tu.memoizedState,Bu=Bu!==null?Bu.element:null,vg(_u,Tu),zg(Tu,Pu,null,Cu),Pu=Tu.memoizedState.element,Pu===Bu)Xh(),Tu=$h(_u,Tu,Cu);else{if((Bu=Tu.stateNode.hydrate)&&(Ph=Jd(Tu.stateNode.containerInfo.firstChild),Oh=Tu,Bu=Qh=!0),Bu)for(Cu=Yg(Tu,null,Pu,Cu),Tu.child=Cu;Cu;)Cu.effectTag=Cu.effectTag&-3|1024,Cu=Cu.sibling;else R$3(_u,Tu,Pu,Cu),Xh();Tu=Tu.child}return Tu;case 5:return fh(Tu),_u===null&&Uh(Tu),Pu=Tu.type,Bu=Tu.pendingProps,Ru=_u!==null?_u.memoizedProps:null,Lu=Bu.children,Gd(Pu,Bu)?Lu=null:Ru!==null&&Gd(Pu,Ru)&&(Tu.effectTag|=16),ei$1(_u,Tu),Tu.mode&4&&Cu!==1&&Bu.hidden?(Tu.expirationTime=Tu.childExpirationTime=1,Tu=null):(R$3(_u,Tu,Lu,Cu),Tu=Tu.child),Tu;case 6:return _u===null&&Uh(Tu),null;case 13:return ji$1(_u,Tu,Cu);case 4:return dh(Tu,Tu.stateNode.containerInfo),Pu=Tu.pendingProps,_u===null?Tu.child=Xg(Tu,null,Pu,Cu):R$3(_u,Tu,Pu,Cu),Tu.child;case 11:return Pu=Tu.type,Bu=Tu.pendingProps,Bu=Tu.elementType===Pu?Bu:ig(Pu,Bu),Zh(_u,Tu,Pu,Bu,Cu);case 7:return R$3(_u,Tu,Tu.pendingProps,Cu),Tu.child;case 8:return R$3(_u,Tu,Tu.pendingProps.children,Cu),Tu.child;case 12:return R$3(_u,Tu,Tu.pendingProps.children,Cu),Tu.child;case 10:e:{Pu=Tu.type._context,Bu=Tu.pendingProps,Lu=Tu.memoizedProps,Ru=Bu.value;var Ou=Tu.type._context;if(I$2(jg,Ou._currentValue),Ou._currentValue=Ru,Lu!==null)if(Ou=Lu.value,Ru=$e$1(Ou,Ru)?0:(typeof Pu._calculateChangedBits=="function"?Pu._calculateChangedBits(Ou,Ru):1073741823)|0,Ru===0){if(Lu.children===Bu.children&&!K$2.current){Tu=$h(_u,Tu,Cu);break e}}else for(Ou=Tu.child,Ou!==null&&(Ou.return=Tu);Ou!==null;){var Du=Ou.dependencies;if(Du!==null){Lu=Ou.child;for(var $u=Du.firstContext;$u!==null;){if($u.context===Pu&&($u.observedBits&Ru)!==0){Ou.tag===1&&($u=wg(Cu,null),$u.tag=2,xg(Ou,$u)),Ou.expirationTime<Cu&&(Ou.expirationTime=Cu),$u=Ou.alternate,$u!==null&&$u.expirationTime<Cu&&($u.expirationTime=Cu),pg(Ou.return,Cu),Du.expirationTime<Cu&&(Du.expirationTime=Cu);break}$u=$u.next}}else Lu=Ou.tag===10&&Ou.type===Tu.type?null:Ou.child;if(Lu!==null)Lu.return=Ou;else for(Lu=Ou;Lu!==null;){if(Lu===Tu){Lu=null;break}if(Ou=Lu.sibling,Ou!==null){Ou.return=Lu.return,Lu=Ou;break}Lu=Lu.return}Ou=Lu}R$3(_u,Tu,Bu.children,Cu),Tu=Tu.child}return Tu;case 9:return Bu=Tu.type,Ru=Tu.pendingProps,Pu=Ru.children,qg(Tu,Cu),Bu=sg(Bu,Ru.unstable_observedBits),Pu=Pu(Bu),Tu.effectTag|=1,R$3(_u,Tu,Pu,Cu),Tu.child;case 14:return Bu=Tu.type,Ru=ig(Bu,Tu.pendingProps),Ru=ig(Bu.type,Ru),ai$1(_u,Tu,Bu,Ru,Pu,Cu);case 15:return ci$1(_u,Tu,Tu.type,Tu.pendingProps,Pu,Cu);case 17:return Pu=Tu.type,Bu=Tu.pendingProps,Bu=Tu.elementType===Pu?Bu:ig(Pu,Bu),_u!==null&&(_u.alternate=null,Tu.alternate=null,Tu.effectTag|=2),Tu.tag=1,L$3(Pu)?(_u=!0,Gf(Tu)):_u=!1,qg(Tu,Cu),Lg(Tu,Pu,Bu),Ng(Tu,Pu,Bu,Cu),gi$1(null,Tu,Pu,!0,_u,Cu);case 19:return mi$1(_u,Tu,Cu)}throw Error(u$3(156,Tu.tag))};var Uj=null,Li$1=null;function Yj(_u){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(Tu.isDisabled||!Tu.supportsFiber)return!0;try{var Cu=Tu.inject(_u);Uj=function(Pu){try{Tu.onCommitFiberRoot(Cu,Pu,void 0,(Pu.current.effectTag&64)===64)}catch{}},Li$1=function(Pu){try{Tu.onCommitFiberUnmount(Cu,Pu)}catch{}}}catch{}return!0}function Zj(_u,Tu,Cu,Pu){this.tag=_u,this.key=Cu,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=Tu,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Pu,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(_u,Tu,Cu,Pu){return new Zj(_u,Tu,Cu,Pu)}function bi$1(_u){return _u=_u.prototype,!(!_u||!_u.isReactComponent)}function Xj(_u){if(typeof _u=="function")return bi$1(_u)?1:0;if(_u!=null){if(_u=_u.$$typeof,_u===gb)return 11;if(_u===jb)return 14}return 2}function Sg(_u,Tu){var Cu=_u.alternate;return Cu===null?(Cu=Sh(_u.tag,Tu,_u.key,_u.mode),Cu.elementType=_u.elementType,Cu.type=_u.type,Cu.stateNode=_u.stateNode,Cu.alternate=_u,_u.alternate=Cu):(Cu.pendingProps=Tu,Cu.effectTag=0,Cu.nextEffect=null,Cu.firstEffect=null,Cu.lastEffect=null),Cu.childExpirationTime=_u.childExpirationTime,Cu.expirationTime=_u.expirationTime,Cu.child=_u.child,Cu.memoizedProps=_u.memoizedProps,Cu.memoizedState=_u.memoizedState,Cu.updateQueue=_u.updateQueue,Tu=_u.dependencies,Cu.dependencies=Tu===null?null:{expirationTime:Tu.expirationTime,firstContext:Tu.firstContext,responders:Tu.responders},Cu.sibling=_u.sibling,Cu.index=_u.index,Cu.ref=_u.ref,Cu}function Ug(_u,Tu,Cu,Pu,Bu,Ru){var Lu=2;if(Pu=_u,typeof _u=="function")bi$1(_u)&&(Lu=1);else if(typeof _u=="string")Lu=5;else e:switch(_u){case ab:return Wg(Cu.children,Bu,Ru,Tu);case fb:Lu=8,Bu|=7;break;case bb:Lu=8,Bu|=1;break;case cb:return _u=Sh(12,Cu,Tu,Bu|8),_u.elementType=cb,_u.type=cb,_u.expirationTime=Ru,_u;case hb:return _u=Sh(13,Cu,Tu,Bu),_u.type=hb,_u.elementType=hb,_u.expirationTime=Ru,_u;case ib:return _u=Sh(19,Cu,Tu,Bu),_u.elementType=ib,_u.expirationTime=Ru,_u;default:if(typeof _u=="object"&&_u!==null)switch(_u.$$typeof){case db:Lu=10;break e;case eb:Lu=9;break e;case gb:Lu=11;break e;case jb:Lu=14;break e;case kb:Lu=16,Pu=null;break e;case lb:Lu=22;break e}throw Error(u$3(130,_u==null?_u:typeof _u,""))}return Tu=Sh(Lu,Cu,Tu,Bu),Tu.elementType=_u,Tu.type=Pu,Tu.expirationTime=Ru,Tu}function Wg(_u,Tu,Cu,Pu){return _u=Sh(7,_u,Pu,Tu),_u.expirationTime=Cu,_u}function Tg(_u,Tu,Cu){return _u=Sh(6,_u,null,Tu),_u.expirationTime=Cu,_u}function Vg(_u,Tu,Cu){return Tu=Sh(4,_u.children!==null?_u.children:[],_u.key,Tu),Tu.expirationTime=Cu,Tu.stateNode={containerInfo:_u.containerInfo,pendingChildren:null,implementation:_u.implementation},Tu}function ak(_u,Tu,Cu){this.tag=Tu,this.current=null,this.containerInfo=_u,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=Cu,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(_u,Tu){var Cu=_u.firstSuspendedTime;return _u=_u.lastSuspendedTime,Cu!==0&&Cu>=Tu&&_u<=Tu}function xi$1(_u,Tu){var Cu=_u.firstSuspendedTime,Pu=_u.lastSuspendedTime;Cu<Tu&&(_u.firstSuspendedTime=Tu),(Pu>Tu||Cu===0)&&(_u.lastSuspendedTime=Tu),Tu<=_u.lastPingedTime&&(_u.lastPingedTime=0),Tu<=_u.lastExpiredTime&&(_u.lastExpiredTime=0)}function yi$1(_u,Tu){Tu>_u.firstPendingTime&&(_u.firstPendingTime=Tu);var Cu=_u.firstSuspendedTime;Cu!==0&&(Tu>=Cu?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:Tu>=_u.lastSuspendedTime&&(_u.lastSuspendedTime=Tu+1),Tu>_u.nextKnownPendingLevel&&(_u.nextKnownPendingLevel=Tu))}function Cj(_u,Tu){var Cu=_u.lastExpiredTime;(Cu===0||Cu>Tu)&&(_u.lastExpiredTime=Tu)}function bk(_u,Tu,Cu,Pu){var Bu=Tu.current,Ru=Gg(),Lu=Dg.suspense;Ru=Hg(Ru,Bu,Lu);e:if(Cu){Cu=Cu._reactInternalFiber;t:{if(dc(Cu)!==Cu||Cu.tag!==1)throw Error(u$3(170));var Ou=Cu;do{switch(Ou.tag){case 3:Ou=Ou.stateNode.context;break t;case 1:if(L$3(Ou.type)){Ou=Ou.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Ou=Ou.return}while(Ou!==null);throw Error(u$3(171))}if(Cu.tag===1){var Du=Cu.type;if(L$3(Du)){Cu=Ff(Cu,Du,Ou);break e}}Cu=Ou}else Cu=Af;return Tu.context===null?Tu.context=Cu:Tu.pendingContext=Cu,Tu=wg(Ru,Lu),Tu.payload={element:_u},Pu=Pu===void 0?null:Pu,Pu!==null&&(Tu.callback=Pu),xg(Bu,Tu),Ig(Bu,Ru),Ru}function ck(_u){if(_u=_u.current,!_u.child)return null;switch(_u.child.tag){case 5:return _u.child.stateNode;default:return _u.child.stateNode}}function dk(_u,Tu){_u=_u.memoizedState,_u!==null&&_u.dehydrated!==null&&_u.retryTime<Tu&&(_u.retryTime=Tu)}function ek(_u,Tu){dk(_u,Tu),(_u=_u.alternate)&&dk(_u,Tu)}function fk(_u,Tu,Cu){Cu=Cu!=null&&Cu.hydrate===!0;var Pu=new ak(_u,Tu,Cu),Bu=Sh(3,null,null,Tu===2?7:Tu===1?3:0);Pu.current=Bu,Bu.stateNode=Pu,ug(Bu),_u[Od]=Pu.current,Cu&&Tu!==0&&Jc(_u,_u.nodeType===9?_u:_u.ownerDocument),this._internalRoot=Pu}fk.prototype.render=function(_u){bk(_u,this._internalRoot,null,null)};fk.prototype.unmount=function(){var _u=this._internalRoot,Tu=_u.containerInfo;bk(null,_u,null,function(){Tu[Od]=null})};function gk(_u){return!(!_u||_u.nodeType!==1&&_u.nodeType!==9&&_u.nodeType!==11&&(_u.nodeType!==8||_u.nodeValue!==" react-mount-point-unstable "))}function hk(_u,Tu){if(Tu||(Tu=_u?_u.nodeType===9?_u.documentElement:_u.firstChild:null,Tu=!(!Tu||Tu.nodeType!==1||!Tu.hasAttribute("data-reactroot"))),!Tu)for(var Cu;Cu=_u.lastChild;)_u.removeChild(Cu);return new fk(_u,0,Tu?{hydrate:!0}:void 0)}function ik(_u,Tu,Cu,Pu,Bu){var Ru=Cu._reactRootContainer;if(Ru){var Lu=Ru._internalRoot;if(typeof Bu=="function"){var Ou=Bu;Bu=function(){var $u=ck(Lu);Ou.call($u)}}bk(Tu,Lu,_u,Bu)}else{if(Ru=Cu._reactRootContainer=hk(Cu,Pu),Lu=Ru._internalRoot,typeof Bu=="function"){var Du=Bu;Bu=function(){var $u=ck(Lu);Du.call($u)}}Nj(function(){bk(Tu,Lu,_u,Bu)})}return ck(Lu)}function jk(_u,Tu,Cu){var Pu=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a$1,key:Pu==null?null:""+Pu,children:_u,containerInfo:Tu,implementation:Cu}}wc=function(_u){if(_u.tag===13){var Tu=hg(Gg(),150,100);Ig(_u,Tu),ek(_u,Tu)}};xc=function(_u){_u.tag===13&&(Ig(_u,3),ek(_u,3))};yc=function(_u){if(_u.tag===13){var Tu=Gg();Tu=Hg(Tu,_u,null),Ig(_u,Tu),ek(_u,Tu)}};za$1=function(_u,Tu,Cu){switch(Tu){case"input":if(Cb(_u,Cu),Tu=Cu.name,Cu.type==="radio"&&Tu!=null){for(Cu=_u;Cu.parentNode;)Cu=Cu.parentNode;for(Cu=Cu.querySelectorAll("input[name="+JSON.stringify(""+Tu)+'][type="radio"]'),Tu=0;Tu<Cu.length;Tu++){var Pu=Cu[Tu];if(Pu!==_u&&Pu.form===_u.form){var Bu=Qd(Pu);if(!Bu)throw Error(u$3(90));yb(Pu),Cb(Pu,Bu)}}}break;case"textarea":Kb(_u,Cu);break;case"select":Tu=Cu.value,Tu!=null&&Hb(_u,!!Cu.multiple,Tu,!1)}};Fa$1=Mj;Ga$1=function(_u,Tu,Cu,Pu,Bu){var Ru=W$3;W$3|=4;try{return cg(98,_u.bind(null,Tu,Cu,Pu,Bu))}finally{W$3=Ru,W$3===V$2&&gg()}};Ha$1=function(){(W$3&(1|fj|gj))===V$2&&(Lj(),Dj())};Ia$1=function(_u,Tu){var Cu=W$3;W$3|=2;try{return _u(Tu)}finally{W$3=Cu,W$3===V$2&&gg()}};function kk(_u,Tu){var Cu=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk(Tu))throw Error(u$3(200));return jk(_u,Tu,null,Cu)}var lk={Events:[Nc,Pd,Qd,xa$1,ta$1,Xd,function(_u){jc(_u,Wd)},Da$1,Ea$1,id,mc,Dj,{current:!1}]};(function(_u){var Tu=_u.findFiberByHostInstance;return Yj(n$4({},_u,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(Cu){return Cu=hc(Cu),Cu===null?null:Cu.stateNode},findFiberByHostInstance:function(Cu){return Tu?Tu(Cu):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(_u){if(_u==null)return null;if(_u.nodeType===1)return _u;var Tu=_u._reactInternalFiber;if(Tu===void 0)throw typeof _u.render=="function"?Error(u$3(188)):Error(u$3(268,Object.keys(_u)));return _u=hc(Tu),_u=_u===null?null:_u.stateNode,_u};reactDom_production_min.flushSync=function(_u,Tu){if((W$3&(fj|gj))!==V$2)throw Error(u$3(187));var Cu=W$3;W$3|=1;try{return cg(99,_u.bind(null,Tu))}finally{W$3=Cu,gg()}};reactDom_production_min.hydrate=function(_u,Tu,Cu){if(!gk(Tu))throw Error(u$3(200));return ik(null,_u,Tu,!0,Cu)};reactDom_production_min.render=function(_u,Tu,Cu){if(!gk(Tu))throw Error(u$3(200));return ik(null,_u,Tu,!1,Cu)};reactDom_production_min.unmountComponentAtNode=function(_u){if(!gk(_u))throw Error(u$3(40));return _u._reactRootContainer?(Nj(function(){ik(null,null,_u,!1,function(){_u._reactRootContainer=null,_u[Od]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(_u,Tu){return kk(_u,Tu,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_u,Tu,Cu,Pu){if(!gk(Cu))throw Error(u$3(200));if(_u==null||_u._reactInternalFiber===void 0)throw Error(u$3(38));return ik(_u,Tu,Cu,!1,Pu)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_u){console.error(_u)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(_u){return typeof _u=="number"&&isFinite(_u)&&Math.floor(_u)===_u});Math.sign===void 0&&(Math.sign=function(_u){return _u<0?-1:_u>0?1:+_u});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(_u){if(_u==null)throw new TypeError("Cannot convert undefined or null to object");const Tu=Object(_u);for(let Cu=1;Cu<arguments.length;Cu++){const Pu=arguments[Cu];if(Pu!=null)for(const Bu in Pu)Object.prototype.hasOwnProperty.call(Pu,Bu)&&(Tu[Bu]=Pu[Bu])}return Tu});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(_u,Tu){this._listeners===void 0&&(this._listeners={});var Cu=this._listeners;Cu[_u]===void 0&&(Cu[_u]=[]),Cu[_u].indexOf(Tu)===-1&&Cu[_u].push(Tu)},hasEventListener:function(_u,Tu){if(this._listeners===void 0)return!1;var Cu=this._listeners;return Cu[_u]!==void 0&&Cu[_u].indexOf(Tu)!==-1},removeEventListener:function(_u,Tu){if(this._listeners!==void 0){var Cu=this._listeners,Pu=Cu[_u];if(Pu!==void 0){var Bu=Pu.indexOf(Tu);Bu!==-1&&Pu.splice(Bu,1)}}},dispatchEvent:function(_u){if(this._listeners!==void 0){var Tu=this._listeners,Cu=Tu[_u.type];if(Cu!==void 0){_u.target=this;for(var Pu=Cu.slice(0),Bu=0,Ru=Pu.length;Bu<Ru;Bu++)Pu[Bu].call(this,_u)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var _u=Math.random()*4294967295|0,Tu=Math.random()*4294967295|0,Cu=Math.random()*4294967295|0,Pu=Math.random()*4294967295|0,Bu=_lut[_u&255]+_lut[_u>>8&255]+_lut[_u>>16&255]+_lut[_u>>24&255]+"-"+_lut[Tu&255]+_lut[Tu>>8&255]+"-"+_lut[Tu>>16&15|64]+_lut[Tu>>24&255]+"-"+_lut[Cu&63|128]+_lut[Cu>>8&255]+"-"+_lut[Cu>>16&255]+_lut[Cu>>24&255]+_lut[Pu&255]+_lut[Pu>>8&255]+_lut[Pu>>16&255]+_lut[Pu>>24&255];return Bu.toUpperCase()},clamp:function(_u,Tu,Cu){return Math.max(Tu,Math.min(Cu,_u))},euclideanModulo:function(_u,Tu){return(_u%Tu+Tu)%Tu},mapLinear:function(_u,Tu,Cu,Pu,Bu){return Pu+(_u-Tu)*(Bu-Pu)/(Cu-Tu)},lerp:function(_u,Tu,Cu){return(1-Cu)*_u+Cu*Tu},smoothstep:function(_u,Tu,Cu){return _u<=Tu?0:_u>=Cu?1:(_u=(_u-Tu)/(Cu-Tu),_u*_u*(3-2*_u))},smootherstep:function(_u,Tu,Cu){return _u<=Tu?0:_u>=Cu?1:(_u=(_u-Tu)/(Cu-Tu),_u*_u*_u*(_u*(_u*6-15)+10))},randInt:function(_u,Tu){return _u+Math.floor(Math.random()*(Tu-_u+1))},randFloat:function(_u,Tu){return _u+Math.random()*(Tu-_u)},randFloatSpread:function(_u){return _u*(.5-Math.random())},degToRad:function(_u){return _u*MathUtils.DEG2RAD},radToDeg:function(_u){return _u*MathUtils.RAD2DEG},isPowerOfTwo:function(_u){return(_u&_u-1)===0&&_u!==0},ceilPowerOfTwo:function(_u){return Math.pow(2,Math.ceil(Math.log(_u)/Math.LN2))},floorPowerOfTwo:function(_u){return Math.pow(2,Math.floor(Math.log(_u)/Math.LN2))},setQuaternionFromProperEuler:function(_u,Tu,Cu,Pu,Bu){var Ru=Math.cos,Lu=Math.sin,Ou=Ru(Cu/2),Du=Lu(Cu/2),$u=Ru((Tu+Pu)/2),ku=Lu((Tu+Pu)/2),Fu=Ru((Tu-Pu)/2),Nu=Lu((Tu-Pu)/2),Vu=Ru((Pu-Tu)/2),Gu=Lu((Pu-Tu)/2);switch(Bu){case"XYX":_u.set(Ou*ku,Du*Fu,Du*Nu,Ou*$u);break;case"YZY":_u.set(Du*Nu,Ou*ku,Du*Fu,Ou*$u);break;case"ZXZ":_u.set(Du*Fu,Du*Nu,Ou*ku,Ou*$u);break;case"XZX":_u.set(Ou*ku,Du*Gu,Du*Vu,Ou*$u);break;case"YXY":_u.set(Du*Vu,Ou*ku,Du*Gu,Ou*$u);break;case"ZYZ":_u.set(Du*Gu,Du*Vu,Ou*ku,Ou*$u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Bu)}}};function Vector2(_u,Tu){this.x=_u||0,this.y=Tu||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(_u){this.x=_u}},height:{get:function(){return this.y},set:function(_u){this.y=_u}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(_u,Tu){return this.x=_u,this.y=Tu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setComponent:function(_u,Tu){switch(_u){case 0:this.x=Tu;break;case 1:this.y=Tu;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this},add:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,Tu)):(this.x+=_u.x,this.y+=_u.y,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this},addVectors:function(_u,Tu){return this.x=_u.x+Tu.x,this.y=_u.y+Tu.y,this},addScaledVector:function(_u,Tu){return this.x+=_u.x*Tu,this.y+=_u.y*Tu,this},sub:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,Tu)):(this.x-=_u.x,this.y-=_u.y,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this},subVectors:function(_u,Tu){return this.x=_u.x-Tu.x,this.y=_u.y-Tu.y,this},multiply:function(_u){return this.x*=_u.x,this.y*=_u.y,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},applyMatrix3:function(_u){var Tu=this.x,Cu=this.y,Pu=_u.elements;return this.x=Pu[0]*Tu+Pu[3]*Cu+Pu[6],this.y=Pu[1]*Tu+Pu[4]*Cu+Pu[7],this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this},clamp:function(_u,Tu){return this.x=Math.max(_u.x,Math.min(Tu.x,this.x)),this.y=Math.max(_u.y,Math.min(Tu.y,this.y)),this},clampScalar:function(_u,Tu){return this.x=Math.max(_u,Math.min(Tu,this.x)),this.y=Math.max(_u,Math.min(Tu,this.y)),this},clampLength:function(_u,Tu){var Cu=this.length();return this.divideScalar(Cu||1).multiplyScalar(Math.max(_u,Math.min(Tu,Cu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(_u){return this.x*_u.x+this.y*_u.y},cross:function(_u){return this.x*_u.y-this.y*_u.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var _u=Math.atan2(-this.y,-this.x)+Math.PI;return _u},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var Tu=this.x-_u.x,Cu=this.y-_u.y;return Tu*Tu+Cu*Cu},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,Tu){return this.x+=(_u.x-this.x)*Tu,this.y+=(_u.y-this.y)*Tu,this},lerpVectors:function(_u,Tu,Cu){return this.x=_u.x+(Tu.x-_u.x)*Cu,this.y=_u.y+(Tu.y-_u.y)*Cu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y},fromArray:function(_u,Tu){return Tu===void 0&&(Tu=0),this.x=_u[Tu],this.y=_u[Tu+1],this},toArray:function(_u,Tu){return _u===void 0&&(_u=[]),Tu===void 0&&(Tu=0),_u[Tu]=this.x,_u[Tu+1]=this.y,_u},fromBufferAttribute:function(_u,Tu,Cu){return Cu!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX(Tu),this.y=_u.getY(Tu),this},rotateAround:function(_u,Tu){var Cu=Math.cos(Tu),Pu=Math.sin(Tu),Bu=this.x-_u.x,Ru=this.y-_u.y;return this.x=Bu*Cu-Ru*Pu+_u.x,this.y=Bu*Pu+Ru*Cu+_u.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du){var $u=this.elements;return $u[0]=_u,$u[1]=Pu,$u[2]=Lu,$u[3]=Tu,$u[4]=Bu,$u[5]=Ou,$u[6]=Cu,$u[7]=Ru,$u[8]=Du,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(_u){var Tu=this.elements,Cu=_u.elements;return Tu[0]=Cu[0],Tu[1]=Cu[1],Tu[2]=Cu[2],Tu[3]=Cu[3],Tu[4]=Cu[4],Tu[5]=Cu[5],Tu[6]=Cu[6],Tu[7]=Cu[7],Tu[8]=Cu[8],this},extractBasis:function(_u,Tu,Cu){return _u.setFromMatrix3Column(this,0),Tu.setFromMatrix3Column(this,1),Cu.setFromMatrix3Column(this,2),this},setFromMatrix4:function(_u){var Tu=_u.elements;return this.set(Tu[0],Tu[4],Tu[8],Tu[1],Tu[5],Tu[9],Tu[2],Tu[6],Tu[10]),this},multiply:function(_u){return this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,Tu){var Cu=_u.elements,Pu=Tu.elements,Bu=this.elements,Ru=Cu[0],Lu=Cu[3],Ou=Cu[6],Du=Cu[1],$u=Cu[4],ku=Cu[7],Fu=Cu[2],Nu=Cu[5],Vu=Cu[8],Gu=Pu[0],Hu=Pu[3],ju=Pu[6],Uu=Pu[1],zu=Pu[4],Wu=Pu[7],Qu=Pu[2],qu=Pu[5],Yu=Pu[8];return Bu[0]=Ru*Gu+Lu*Uu+Ou*Qu,Bu[3]=Ru*Hu+Lu*zu+Ou*qu,Bu[6]=Ru*ju+Lu*Wu+Ou*Yu,Bu[1]=Du*Gu+$u*Uu+ku*Qu,Bu[4]=Du*Hu+$u*zu+ku*qu,Bu[7]=Du*ju+$u*Wu+ku*Yu,Bu[2]=Fu*Gu+Nu*Uu+Vu*Qu,Bu[5]=Fu*Hu+Nu*zu+Vu*qu,Bu[8]=Fu*ju+Nu*Wu+Vu*Yu,this},multiplyScalar:function(_u){var Tu=this.elements;return Tu[0]*=_u,Tu[3]*=_u,Tu[6]*=_u,Tu[1]*=_u,Tu[4]*=_u,Tu[7]*=_u,Tu[2]*=_u,Tu[5]*=_u,Tu[8]*=_u,this},determinant:function(){var _u=this.elements,Tu=_u[0],Cu=_u[1],Pu=_u[2],Bu=_u[3],Ru=_u[4],Lu=_u[5],Ou=_u[6],Du=_u[7],$u=_u[8];return Tu*Ru*$u-Tu*Lu*Du-Cu*Bu*$u+Cu*Lu*Ou+Pu*Bu*Du-Pu*Ru*Ou},getInverse:function(_u,Tu){Tu!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var Cu=_u.elements,Pu=this.elements,Bu=Cu[0],Ru=Cu[1],Lu=Cu[2],Ou=Cu[3],Du=Cu[4],$u=Cu[5],ku=Cu[6],Fu=Cu[7],Nu=Cu[8],Vu=Nu*Du-$u*Fu,Gu=$u*ku-Nu*Ou,Hu=Fu*Ou-Du*ku,ju=Bu*Vu+Ru*Gu+Lu*Hu;if(ju===0)return this.set(0,0,0,0,0,0,0,0,0);var Uu=1/ju;return Pu[0]=Vu*Uu,Pu[1]=(Lu*Fu-Nu*Ru)*Uu,Pu[2]=($u*Ru-Lu*Du)*Uu,Pu[3]=Gu*Uu,Pu[4]=(Nu*Bu-Lu*ku)*Uu,Pu[5]=(Lu*Ou-$u*Bu)*Uu,Pu[6]=Hu*Uu,Pu[7]=(Ru*ku-Fu*Bu)*Uu,Pu[8]=(Du*Bu-Ru*Ou)*Uu,this},transpose:function(){var _u,Tu=this.elements;return _u=Tu[1],Tu[1]=Tu[3],Tu[3]=_u,_u=Tu[2],Tu[2]=Tu[6],Tu[6]=_u,_u=Tu[5],Tu[5]=Tu[7],Tu[7]=_u,this},getNormalMatrix:function(_u){return this.setFromMatrix4(_u).getInverse(this).transpose()},transposeIntoArray:function(_u){var Tu=this.elements;return _u[0]=Tu[0],_u[1]=Tu[3],_u[2]=Tu[6],_u[3]=Tu[1],_u[4]=Tu[4],_u[5]=Tu[7],_u[6]=Tu[2],_u[7]=Tu[5],_u[8]=Tu[8],this},setUvTransform:function(_u,Tu,Cu,Pu,Bu,Ru,Lu){var Ou=Math.cos(Bu),Du=Math.sin(Bu);this.set(Cu*Ou,Cu*Du,-Cu*(Ou*Ru+Du*Lu)+Ru+_u,-Pu*Du,Pu*Ou,-Pu*(-Du*Ru+Ou*Lu)+Lu+Tu,0,0,1)},scale:function(_u,Tu){var Cu=this.elements;return Cu[0]*=_u,Cu[3]*=_u,Cu[6]*=_u,Cu[1]*=Tu,Cu[4]*=Tu,Cu[7]*=Tu,this},rotate:function(_u){var Tu=Math.cos(_u),Cu=Math.sin(_u),Pu=this.elements,Bu=Pu[0],Ru=Pu[3],Lu=Pu[6],Ou=Pu[1],Du=Pu[4],$u=Pu[7];return Pu[0]=Tu*Bu+Cu*Ou,Pu[3]=Tu*Ru+Cu*Du,Pu[6]=Tu*Lu+Cu*$u,Pu[1]=-Cu*Bu+Tu*Ou,Pu[4]=-Cu*Ru+Tu*Du,Pu[7]=-Cu*Lu+Tu*$u,this},translate:function(_u,Tu){var Cu=this.elements;return Cu[0]+=_u*Cu[2],Cu[3]+=_u*Cu[5],Cu[6]+=_u*Cu[8],Cu[1]+=Tu*Cu[2],Cu[4]+=Tu*Cu[5],Cu[7]+=Tu*Cu[8],this},equals:function(_u){for(var Tu=this.elements,Cu=_u.elements,Pu=0;Pu<9;Pu++)if(Tu[Pu]!==Cu[Pu])return!1;return!0},fromArray:function(_u,Tu){Tu===void 0&&(Tu=0);for(var Cu=0;Cu<9;Cu++)this.elements[Cu]=_u[Cu+Tu];return this},toArray:function(_u,Tu){_u===void 0&&(_u=[]),Tu===void 0&&(Tu=0);var Cu=this.elements;return _u[Tu]=Cu[0],_u[Tu+1]=Cu[1],_u[Tu+2]=Cu[2],_u[Tu+3]=Cu[3],_u[Tu+4]=Cu[4],_u[Tu+5]=Cu[5],_u[Tu+6]=Cu[6],_u[Tu+7]=Cu[7],_u[Tu+8]=Cu[8],_u}});var _canvas,ImageUtils={getDataURL:function(_u){var Tu;if(typeof HTMLCanvasElement=="undefined")return _u.src;if(_u instanceof HTMLCanvasElement)Tu=_u;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=_u.width,_canvas.height=_u.height;var Cu=_canvas.getContext("2d");_u instanceof ImageData?Cu.putImageData(_u,0,0):Cu.drawImage(_u,0,0,_u.width,_u.height),Tu=_canvas}return Tu.width>2048||Tu.height>2048?Tu.toDataURL("image/jpeg",.6):Tu.toDataURL("image/png")}},textureId=0;function Texture(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=_u!==void 0?_u:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=Tu!==void 0?Tu:Texture.DEFAULT_MAPPING,this.wrapS=Cu!==void 0?Cu:ClampToEdgeWrapping,this.wrapT=Pu!==void 0?Pu:ClampToEdgeWrapping,this.magFilter=Bu!==void 0?Bu:LinearFilter,this.minFilter=Ru!==void 0?Ru:LinearMipmapLinearFilter,this.anisotropy=Du!==void 0?Du:1,this.format=Lu!==void 0?Lu:RGBAFormat,this.internalFormat=null,this.type=Ou!==void 0?Ou:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=$u!==void 0?$u:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.name=_u.name,this.image=_u.image,this.mipmaps=_u.mipmaps.slice(0),this.mapping=_u.mapping,this.wrapS=_u.wrapS,this.wrapT=_u.wrapT,this.magFilter=_u.magFilter,this.minFilter=_u.minFilter,this.anisotropy=_u.anisotropy,this.format=_u.format,this.internalFormat=_u.internalFormat,this.type=_u.type,this.offset.copy(_u.offset),this.repeat.copy(_u.repeat),this.center.copy(_u.center),this.rotation=_u.rotation,this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrix.copy(_u.matrix),this.generateMipmaps=_u.generateMipmaps,this.premultiplyAlpha=_u.premultiplyAlpha,this.flipY=_u.flipY,this.unpackAlignment=_u.unpackAlignment,this.encoding=_u.encoding,this},toJSON:function(_u){var Tu=_u===void 0||typeof _u=="string";if(!Tu&&_u.textures[this.uuid]!==void 0)return _u.textures[this.uuid];var Cu={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Pu=this.image;if(Pu.uuid===void 0&&(Pu.uuid=MathUtils.generateUUID()),!Tu&&_u.images[Pu.uuid]===void 0){var Bu;if(Array.isArray(Pu)){Bu=[];for(var Ru=0,Lu=Pu.length;Ru<Lu;Ru++)Bu.push(ImageUtils.getDataURL(Pu[Ru]))}else Bu=ImageUtils.getDataURL(Pu);_u.images[Pu.uuid]={uuid:Pu.uuid,url:Bu}}Cu.image=Pu.uuid}return Tu||(_u.textures[this.uuid]=Cu),Cu},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(_u){if(this.mapping!==UVMapping)return _u;if(_u.applyMatrix3(this.matrix),_u.x<0||_u.x>1)switch(this.wrapS){case RepeatWrapping:_u.x=_u.x-Math.floor(_u.x);break;case ClampToEdgeWrapping:_u.x=_u.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.x)%2)===1?_u.x=Math.ceil(_u.x)-_u.x:_u.x=_u.x-Math.floor(_u.x);break}if(_u.y<0||_u.y>1)switch(this.wrapT){case RepeatWrapping:_u.y=_u.y-Math.floor(_u.y);break;case ClampToEdgeWrapping:_u.y=_u.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.y)%2)===1?_u.y=Math.ceil(_u.y)-_u.y:_u.y=_u.y-Math.floor(_u.y);break}return this.flipY&&(_u.y=1-_u.y),_u}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function Vector4(_u,Tu,Cu,Pu){this.x=_u||0,this.y=Tu||0,this.z=Cu||0,this.w=Pu!==void 0?Pu:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(_u){this.z=_u}},height:{get:function(){return this.w},set:function(_u){this.w=_u}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(_u,Tu,Cu,Pu){return this.x=_u,this.y=Tu,this.z=Cu,this.w=Pu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this.w=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setW:function(_u){return this.w=_u,this},setComponent:function(_u,Tu){switch(_u){case 0:this.x=Tu;break;case 1:this.y=Tu;break;case 2:this.z=Tu;break;case 3:this.w=Tu;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this.w=_u.w!==void 0?_u.w:1,this},add:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,Tu)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this.w+=_u.w,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this.w+=_u,this},addVectors:function(_u,Tu){return this.x=_u.x+Tu.x,this.y=_u.y+Tu.y,this.z=_u.z+Tu.z,this.w=_u.w+Tu.w,this},addScaledVector:function(_u,Tu){return this.x+=_u.x*Tu,this.y+=_u.y*Tu,this.z+=_u.z*Tu,this.w+=_u.w*Tu,this},sub:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,Tu)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this.w-=_u.w,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this.w-=_u,this},subVectors:function(_u,Tu){return this.x=_u.x-Tu.x,this.y=_u.y-Tu.y,this.z=_u.z-Tu.z,this.w=_u.w-Tu.w,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this.w*=_u,this},applyMatrix4:function(_u){var Tu=this.x,Cu=this.y,Pu=this.z,Bu=this.w,Ru=_u.elements;return this.x=Ru[0]*Tu+Ru[4]*Cu+Ru[8]*Pu+Ru[12]*Bu,this.y=Ru[1]*Tu+Ru[5]*Cu+Ru[9]*Pu+Ru[13]*Bu,this.z=Ru[2]*Tu+Ru[6]*Cu+Ru[10]*Pu+Ru[14]*Bu,this.w=Ru[3]*Tu+Ru[7]*Cu+Ru[11]*Pu+Ru[15]*Bu,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},setAxisAngleFromQuaternion:function(_u){this.w=2*Math.acos(_u.w);var Tu=Math.sqrt(1-_u.w*_u.w);return Tu<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_u.x/Tu,this.y=_u.y/Tu,this.z=_u.z/Tu),this},setAxisAngleFromRotationMatrix:function(_u){var Tu,Cu,Pu,Bu,Ru=.01,Lu=.1,Ou=_u.elements,Du=Ou[0],$u=Ou[4],ku=Ou[8],Fu=Ou[1],Nu=Ou[5],Vu=Ou[9],Gu=Ou[2],Hu=Ou[6],ju=Ou[10];if(Math.abs($u-Fu)<Ru&&Math.abs(ku-Gu)<Ru&&Math.abs(Vu-Hu)<Ru){if(Math.abs($u+Fu)<Lu&&Math.abs(ku+Gu)<Lu&&Math.abs(Vu+Hu)<Lu&&Math.abs(Du+Nu+ju-3)<Lu)return this.set(1,0,0,0),this;Tu=Math.PI;var Uu=(Du+1)/2,zu=(Nu+1)/2,Wu=(ju+1)/2,Qu=($u+Fu)/4,qu=(ku+Gu)/4,Yu=(Vu+Hu)/4;return Uu>zu&&Uu>Wu?Uu<Ru?(Cu=0,Pu=.707106781,Bu=.707106781):(Cu=Math.sqrt(Uu),Pu=Qu/Cu,Bu=qu/Cu):zu>Wu?zu<Ru?(Cu=.707106781,Pu=0,Bu=.707106781):(Pu=Math.sqrt(zu),Cu=Qu/Pu,Bu=Yu/Pu):Wu<Ru?(Cu=.707106781,Pu=.707106781,Bu=0):(Bu=Math.sqrt(Wu),Cu=qu/Bu,Pu=Yu/Bu),this.set(Cu,Pu,Bu,Tu),this}var Xc=Math.sqrt((Hu-Vu)*(Hu-Vu)+(ku-Gu)*(ku-Gu)+(Fu-$u)*(Fu-$u));return Math.abs(Xc)<.001&&(Xc=1),this.x=(Hu-Vu)/Xc,this.y=(ku-Gu)/Xc,this.z=(Fu-$u)/Xc,this.w=Math.acos((Du+Nu+ju-1)/2),this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this.w=Math.min(this.w,_u.w),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this.w=Math.max(this.w,_u.w),this},clamp:function(_u,Tu){return this.x=Math.max(_u.x,Math.min(Tu.x,this.x)),this.y=Math.max(_u.y,Math.min(Tu.y,this.y)),this.z=Math.max(_u.z,Math.min(Tu.z,this.z)),this.w=Math.max(_u.w,Math.min(Tu.w,this.w)),this},clampScalar:function(_u,Tu){return this.x=Math.max(_u,Math.min(Tu,this.x)),this.y=Math.max(_u,Math.min(Tu,this.y)),this.z=Math.max(_u,Math.min(Tu,this.z)),this.w=Math.max(_u,Math.min(Tu,this.w)),this},clampLength:function(_u,Tu){var Cu=this.length();return this.divideScalar(Cu||1).multiplyScalar(Math.max(_u,Math.min(Tu,Cu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z+this.w*_u.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,Tu){return this.x+=(_u.x-this.x)*Tu,this.y+=(_u.y-this.y)*Tu,this.z+=(_u.z-this.z)*Tu,this.w+=(_u.w-this.w)*Tu,this},lerpVectors:function(_u,Tu,Cu){return this.x=_u.x+(Tu.x-_u.x)*Cu,this.y=_u.y+(Tu.y-_u.y)*Cu,this.z=_u.z+(Tu.z-_u.z)*Cu,this.w=_u.w+(Tu.w-_u.w)*Cu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z&&_u.w===this.w},fromArray:function(_u,Tu){return Tu===void 0&&(Tu=0),this.x=_u[Tu],this.y=_u[Tu+1],this.z=_u[Tu+2],this.w=_u[Tu+3],this},toArray:function(_u,Tu){return _u===void 0&&(_u=[]),Tu===void 0&&(Tu=0),_u[Tu]=this.x,_u[Tu+1]=this.y,_u[Tu+2]=this.z,_u[Tu+3]=this.w,_u},fromBufferAttribute:function(_u,Tu,Cu){return Cu!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX(Tu),this.y=_u.getY(Tu),this.z=_u.getZ(Tu),this.w=_u.getW(Tu),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(_u,Tu,Cu){this.width=_u,this.height=Tu,this.scissor=new Vector4(0,0,_u,Tu),this.scissorTest=!1,this.viewport=new Vector4(0,0,_u,Tu),Cu=Cu||{},this.texture=new Texture(void 0,Cu.mapping,Cu.wrapS,Cu.wrapT,Cu.magFilter,Cu.minFilter,Cu.format,Cu.type,Cu.anisotropy,Cu.encoding),this.texture.image={},this.texture.image.width=_u,this.texture.image.height=Tu,this.texture.generateMipmaps=Cu.generateMipmaps!==void 0?Cu.generateMipmaps:!1,this.texture.minFilter=Cu.minFilter!==void 0?Cu.minFilter:LinearFilter,this.depthBuffer=Cu.depthBuffer!==void 0?Cu.depthBuffer:!0,this.stencilBuffer=Cu.stencilBuffer!==void 0?Cu.stencilBuffer:!0,this.depthTexture=Cu.depthTexture!==void 0?Cu.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(_u,Tu){(this.width!==_u||this.height!==Tu)&&(this.width=_u,this.height=Tu,this.texture.image.width=_u,this.texture.image.height=Tu,this.dispose()),this.viewport.set(0,0,_u,Tu),this.scissor.set(0,0,_u,Tu)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.width=_u.width,this.height=_u.height,this.viewport.copy(_u.viewport),this.texture=_u.texture.clone(),this.depthBuffer=_u.depthBuffer,this.stencilBuffer=_u.stencilBuffer,this.depthTexture=_u.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(_u,Tu,Cu){WebGLRenderTarget.call(this,_u,Tu,Cu),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(_u){return WebGLRenderTarget.prototype.copy.call(this,_u),this.samples=_u.samples,this}});function Quaternion(_u,Tu,Cu,Pu){this._x=_u||0,this._y=Tu||0,this._z=Cu||0,this._w=Pu!==void 0?Pu:1}Object.assign(Quaternion,{slerp:function(_u,Tu,Cu,Pu){return Cu.copy(_u).slerp(Tu,Pu)},slerpFlat:function(_u,Tu,Cu,Pu,Bu,Ru,Lu){var Ou=Cu[Pu+0],Du=Cu[Pu+1],$u=Cu[Pu+2],ku=Cu[Pu+3],Fu=Bu[Ru+0],Nu=Bu[Ru+1],Vu=Bu[Ru+2],Gu=Bu[Ru+3];if(ku!==Gu||Ou!==Fu||Du!==Nu||$u!==Vu){var Hu=1-Lu,ju=Ou*Fu+Du*Nu+$u*Vu+ku*Gu,Uu=ju>=0?1:-1,zu=1-ju*ju;if(zu>Number.EPSILON){var Wu=Math.sqrt(zu),Qu=Math.atan2(Wu,ju*Uu);Hu=Math.sin(Hu*Qu)/Wu,Lu=Math.sin(Lu*Qu)/Wu}var qu=Lu*Uu;if(Ou=Ou*Hu+Fu*qu,Du=Du*Hu+Nu*qu,$u=$u*Hu+Vu*qu,ku=ku*Hu+Gu*qu,Hu===1-Lu){var Yu=1/Math.sqrt(Ou*Ou+Du*Du+$u*$u+ku*ku);Ou*=Yu,Du*=Yu,$u*=Yu,ku*=Yu}}_u[Tu]=Ou,_u[Tu+1]=Du,_u[Tu+2]=$u,_u[Tu+3]=ku},multiplyQuaternionsFlat:function(_u,Tu,Cu,Pu,Bu,Ru){var Lu=Cu[Pu],Ou=Cu[Pu+1],Du=Cu[Pu+2],$u=Cu[Pu+3],ku=Bu[Ru],Fu=Bu[Ru+1],Nu=Bu[Ru+2],Vu=Bu[Ru+3];return _u[Tu]=Lu*Vu+$u*ku+Ou*Nu-Du*Fu,_u[Tu+1]=Ou*Vu+$u*Fu+Du*ku-Lu*Nu,_u[Tu+2]=Du*Vu+$u*Nu+Lu*Fu-Ou*ku,_u[Tu+3]=$u*Vu-Lu*ku-Ou*Fu-Du*Nu,_u}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(_u){this._w=_u,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(_u,Tu,Cu,Pu){return this._x=_u,this._y=Tu,this._z=Cu,this._w=Pu,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(_u){return this._x=_u.x,this._y=_u.y,this._z=_u.z,this._w=_u.w,this._onChangeCallback(),this},setFromEuler:function(_u,Tu){if(!(_u&&_u.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var Cu=_u._x,Pu=_u._y,Bu=_u._z,Ru=_u.order,Lu=Math.cos,Ou=Math.sin,Du=Lu(Cu/2),$u=Lu(Pu/2),ku=Lu(Bu/2),Fu=Ou(Cu/2),Nu=Ou(Pu/2),Vu=Ou(Bu/2);switch(Ru){case"XYZ":this._x=Fu*$u*ku+Du*Nu*Vu,this._y=Du*Nu*ku-Fu*$u*Vu,this._z=Du*$u*Vu+Fu*Nu*ku,this._w=Du*$u*ku-Fu*Nu*Vu;break;case"YXZ":this._x=Fu*$u*ku+Du*Nu*Vu,this._y=Du*Nu*ku-Fu*$u*Vu,this._z=Du*$u*Vu-Fu*Nu*ku,this._w=Du*$u*ku+Fu*Nu*Vu;break;case"ZXY":this._x=Fu*$u*ku-Du*Nu*Vu,this._y=Du*Nu*ku+Fu*$u*Vu,this._z=Du*$u*Vu+Fu*Nu*ku,this._w=Du*$u*ku-Fu*Nu*Vu;break;case"ZYX":this._x=Fu*$u*ku-Du*Nu*Vu,this._y=Du*Nu*ku+Fu*$u*Vu,this._z=Du*$u*Vu-Fu*Nu*ku,this._w=Du*$u*ku+Fu*Nu*Vu;break;case"YZX":this._x=Fu*$u*ku+Du*Nu*Vu,this._y=Du*Nu*ku+Fu*$u*Vu,this._z=Du*$u*Vu-Fu*Nu*ku,this._w=Du*$u*ku-Fu*Nu*Vu;break;case"XZY":this._x=Fu*$u*ku-Du*Nu*Vu,this._y=Du*Nu*ku-Fu*$u*Vu,this._z=Du*$u*Vu+Fu*Nu*ku,this._w=Du*$u*ku+Fu*Nu*Vu;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ru)}return Tu!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(_u,Tu){var Cu=Tu/2,Pu=Math.sin(Cu);return this._x=_u.x*Pu,this._y=_u.y*Pu,this._z=_u.z*Pu,this._w=Math.cos(Cu),this._onChangeCallback(),this},setFromRotationMatrix:function(_u){var Tu=_u.elements,Cu=Tu[0],Pu=Tu[4],Bu=Tu[8],Ru=Tu[1],Lu=Tu[5],Ou=Tu[9],Du=Tu[2],$u=Tu[6],ku=Tu[10],Fu=Cu+Lu+ku,Nu;return Fu>0?(Nu=.5/Math.sqrt(Fu+1),this._w=.25/Nu,this._x=($u-Ou)*Nu,this._y=(Bu-Du)*Nu,this._z=(Ru-Pu)*Nu):Cu>Lu&&Cu>ku?(Nu=2*Math.sqrt(1+Cu-Lu-ku),this._w=($u-Ou)/Nu,this._x=.25*Nu,this._y=(Pu+Ru)/Nu,this._z=(Bu+Du)/Nu):Lu>ku?(Nu=2*Math.sqrt(1+Lu-Cu-ku),this._w=(Bu-Du)/Nu,this._x=(Pu+Ru)/Nu,this._y=.25*Nu,this._z=(Ou+$u)/Nu):(Nu=2*Math.sqrt(1+ku-Cu-Lu),this._w=(Ru-Pu)/Nu,this._x=(Bu+Du)/Nu,this._y=(Ou+$u)/Nu,this._z=.25*Nu),this._onChangeCallback(),this},setFromUnitVectors:function(_u,Tu){var Cu=1e-6,Pu=_u.dot(Tu)+1;return Pu<Cu?(Pu=0,Math.abs(_u.x)>Math.abs(_u.z)?(this._x=-_u.y,this._y=_u.x,this._z=0,this._w=Pu):(this._x=0,this._y=-_u.z,this._z=_u.y,this._w=Pu)):(this._x=_u.y*Tu.z-_u.z*Tu.y,this._y=_u.z*Tu.x-_u.x*Tu.z,this._z=_u.x*Tu.y-_u.y*Tu.x,this._w=Pu),this.normalize()},angleTo:function(_u){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(_u),-1,1)))},rotateTowards:function(_u,Tu){var Cu=this.angleTo(_u);if(Cu===0)return this;var Pu=Math.min(1,Tu/Cu);return this.slerp(_u,Pu),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(_u){return this._x*_u._x+this._y*_u._y+this._z*_u._z+this._w*_u._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var _u=this.length();return _u===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_u=1/_u,this._x=this._x*_u,this._y=this._y*_u,this._z=this._z*_u,this._w=this._w*_u),this._onChangeCallback(),this},multiply:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(_u,Tu)):this.multiplyQuaternions(this,_u)},premultiply:function(_u){return this.multiplyQuaternions(_u,this)},multiplyQuaternions:function(_u,Tu){var Cu=_u._x,Pu=_u._y,Bu=_u._z,Ru=_u._w,Lu=Tu._x,Ou=Tu._y,Du=Tu._z,$u=Tu._w;return this._x=Cu*$u+Ru*Lu+Pu*Du-Bu*Ou,this._y=Pu*$u+Ru*Ou+Bu*Lu-Cu*Du,this._z=Bu*$u+Ru*Du+Cu*Ou-Pu*Lu,this._w=Ru*$u-Cu*Lu-Pu*Ou-Bu*Du,this._onChangeCallback(),this},slerp:function(_u,Tu){if(Tu===0)return this;if(Tu===1)return this.copy(_u);var Cu=this._x,Pu=this._y,Bu=this._z,Ru=this._w,Lu=Ru*_u._w+Cu*_u._x+Pu*_u._y+Bu*_u._z;if(Lu<0?(this._w=-_u._w,this._x=-_u._x,this._y=-_u._y,this._z=-_u._z,Lu=-Lu):this.copy(_u),Lu>=1)return this._w=Ru,this._x=Cu,this._y=Pu,this._z=Bu,this;var Ou=1-Lu*Lu;if(Ou<=Number.EPSILON){var Du=1-Tu;return this._w=Du*Ru+Tu*this._w,this._x=Du*Cu+Tu*this._x,this._y=Du*Pu+Tu*this._y,this._z=Du*Bu+Tu*this._z,this.normalize(),this._onChangeCallback(),this}var $u=Math.sqrt(Ou),ku=Math.atan2($u,Lu),Fu=Math.sin((1-Tu)*ku)/$u,Nu=Math.sin(Tu*ku)/$u;return this._w=Ru*Fu+this._w*Nu,this._x=Cu*Fu+this._x*Nu,this._y=Pu*Fu+this._y*Nu,this._z=Bu*Fu+this._z*Nu,this._onChangeCallback(),this},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._w===this._w},fromArray:function(_u,Tu){return Tu===void 0&&(Tu=0),this._x=_u[Tu],this._y=_u[Tu+1],this._z=_u[Tu+2],this._w=_u[Tu+3],this._onChangeCallback(),this},toArray:function(_u,Tu){return _u===void 0&&(_u=[]),Tu===void 0&&(Tu=0),_u[Tu]=this._x,_u[Tu+1]=this._y,_u[Tu+2]=this._z,_u[Tu+3]=this._w,_u},fromBufferAttribute:function(_u,Tu){return this._x=_u.getX(Tu),this._y=_u.getY(Tu),this._z=_u.getZ(Tu),this._w=_u.getW(Tu),this},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(_u,Tu,Cu){this.x=_u||0,this.y=Tu||0,this.z=Cu||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(_u,Tu,Cu){return this.x=_u,this.y=Tu,this.z=Cu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setComponent:function(_u,Tu){switch(_u){case 0:this.x=Tu;break;case 1:this.y=Tu;break;case 2:this.z=Tu;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this},add:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,Tu)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this},addVectors:function(_u,Tu){return this.x=_u.x+Tu.x,this.y=_u.y+Tu.y,this.z=_u.z+Tu.z,this},addScaledVector:function(_u,Tu){return this.x+=_u.x*Tu,this.y+=_u.y*Tu,this.z+=_u.z*Tu,this},sub:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,Tu)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this},subVectors:function(_u,Tu){return this.x=_u.x-Tu.x,this.y=_u.y-Tu.y,this.z=_u.z-Tu.z,this},multiply:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(_u,Tu)):(this.x*=_u.x,this.y*=_u.y,this.z*=_u.z,this)},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this},multiplyVectors:function(_u,Tu){return this.x=_u.x*Tu.x,this.y=_u.y*Tu.y,this.z=_u.z*Tu.z,this},applyEuler:function(_u){return _u&&_u.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(_u))},applyAxisAngle:function(_u,Tu){return this.applyQuaternion(_quaternion.setFromAxisAngle(_u,Tu))},applyMatrix3:function(_u){var Tu=this.x,Cu=this.y,Pu=this.z,Bu=_u.elements;return this.x=Bu[0]*Tu+Bu[3]*Cu+Bu[6]*Pu,this.y=Bu[1]*Tu+Bu[4]*Cu+Bu[7]*Pu,this.z=Bu[2]*Tu+Bu[5]*Cu+Bu[8]*Pu,this},applyNormalMatrix:function(_u){return this.applyMatrix3(_u).normalize()},applyMatrix4:function(_u){var Tu=this.x,Cu=this.y,Pu=this.z,Bu=_u.elements,Ru=1/(Bu[3]*Tu+Bu[7]*Cu+Bu[11]*Pu+Bu[15]);return this.x=(Bu[0]*Tu+Bu[4]*Cu+Bu[8]*Pu+Bu[12])*Ru,this.y=(Bu[1]*Tu+Bu[5]*Cu+Bu[9]*Pu+Bu[13])*Ru,this.z=(Bu[2]*Tu+Bu[6]*Cu+Bu[10]*Pu+Bu[14])*Ru,this},applyQuaternion:function(_u){var Tu=this.x,Cu=this.y,Pu=this.z,Bu=_u.x,Ru=_u.y,Lu=_u.z,Ou=_u.w,Du=Ou*Tu+Ru*Pu-Lu*Cu,$u=Ou*Cu+Lu*Tu-Bu*Pu,ku=Ou*Pu+Bu*Cu-Ru*Tu,Fu=-Bu*Tu-Ru*Cu-Lu*Pu;return this.x=Du*Ou+Fu*-Bu+$u*-Lu-ku*-Ru,this.y=$u*Ou+Fu*-Ru+ku*-Bu-Du*-Lu,this.z=ku*Ou+Fu*-Lu+Du*-Ru-$u*-Bu,this},project:function(_u){return this.applyMatrix4(_u.matrixWorldInverse).applyMatrix4(_u.projectionMatrix)},unproject:function(_u){return this.applyMatrix4(_u.projectionMatrixInverse).applyMatrix4(_u.matrixWorld)},transformDirection:function(_u){var Tu=this.x,Cu=this.y,Pu=this.z,Bu=_u.elements;return this.x=Bu[0]*Tu+Bu[4]*Cu+Bu[8]*Pu,this.y=Bu[1]*Tu+Bu[5]*Cu+Bu[9]*Pu,this.z=Bu[2]*Tu+Bu[6]*Cu+Bu[10]*Pu,this.normalize()},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this.z/=_u.z,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this},clamp:function(_u,Tu){return this.x=Math.max(_u.x,Math.min(Tu.x,this.x)),this.y=Math.max(_u.y,Math.min(Tu.y,this.y)),this.z=Math.max(_u.z,Math.min(Tu.z,this.z)),this},clampScalar:function(_u,Tu){return this.x=Math.max(_u,Math.min(Tu,this.x)),this.y=Math.max(_u,Math.min(Tu,this.y)),this.z=Math.max(_u,Math.min(Tu,this.z)),this},clampLength:function(_u,Tu){var Cu=this.length();return this.divideScalar(Cu||1).multiplyScalar(Math.max(_u,Math.min(Tu,Cu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,Tu){return this.x+=(_u.x-this.x)*Tu,this.y+=(_u.y-this.y)*Tu,this.z+=(_u.z-this.z)*Tu,this},lerpVectors:function(_u,Tu,Cu){return this.x=_u.x+(Tu.x-_u.x)*Cu,this.y=_u.y+(Tu.y-_u.y)*Cu,this.z=_u.z+(Tu.z-_u.z)*Cu,this},cross:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(_u,Tu)):this.crossVectors(this,_u)},crossVectors:function(_u,Tu){var Cu=_u.x,Pu=_u.y,Bu=_u.z,Ru=Tu.x,Lu=Tu.y,Ou=Tu.z;return this.x=Pu*Ou-Bu*Lu,this.y=Bu*Ru-Cu*Ou,this.z=Cu*Lu-Pu*Ru,this},projectOnVector:function(_u){var Tu=_u.lengthSq();if(Tu===0)return this.set(0,0,0);var Cu=_u.dot(this)/Tu;return this.copy(_u).multiplyScalar(Cu)},projectOnPlane:function(_u){return _vector.copy(this).projectOnVector(_u),this.sub(_vector)},reflect:function(_u){return this.sub(_vector.copy(_u).multiplyScalar(2*this.dot(_u)))},angleTo:function(_u){var Tu=Math.sqrt(this.lengthSq()*_u.lengthSq());if(Tu===0)return Math.PI/2;var Cu=this.dot(_u)/Tu;return Math.acos(MathUtils.clamp(Cu,-1,1))},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var Tu=this.x-_u.x,Cu=this.y-_u.y,Pu=this.z-_u.z;return Tu*Tu+Cu*Cu+Pu*Pu},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)+Math.abs(this.z-_u.z)},setFromSpherical:function(_u){return this.setFromSphericalCoords(_u.radius,_u.phi,_u.theta)},setFromSphericalCoords:function(_u,Tu,Cu){var Pu=Math.sin(Tu)*_u;return this.x=Pu*Math.sin(Cu),this.y=Math.cos(Tu)*_u,this.z=Pu*Math.cos(Cu),this},setFromCylindrical:function(_u){return this.setFromCylindricalCoords(_u.radius,_u.theta,_u.y)},setFromCylindricalCoords:function(_u,Tu,Cu){return this.x=_u*Math.sin(Tu),this.y=Cu,this.z=_u*Math.cos(Tu),this},setFromMatrixPosition:function(_u){var Tu=_u.elements;return this.x=Tu[12],this.y=Tu[13],this.z=Tu[14],this},setFromMatrixScale:function(_u){var Tu=this.setFromMatrixColumn(_u,0).length(),Cu=this.setFromMatrixColumn(_u,1).length(),Pu=this.setFromMatrixColumn(_u,2).length();return this.x=Tu,this.y=Cu,this.z=Pu,this},setFromMatrixColumn:function(_u,Tu){return this.fromArray(_u.elements,Tu*4)},setFromMatrix3Column:function(_u,Tu){return this.fromArray(_u.elements,Tu*3)},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z},fromArray:function(_u,Tu){return Tu===void 0&&(Tu=0),this.x=_u[Tu],this.y=_u[Tu+1],this.z=_u[Tu+2],this},toArray:function(_u,Tu){return _u===void 0&&(_u=[]),Tu===void 0&&(Tu=0),_u[Tu]=this.x,_u[Tu+1]=this.y,_u[Tu+2]=this.z,_u},fromBufferAttribute:function(_u,Tu,Cu){return Cu!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX(Tu),this.y=_u.getY(Tu),this.z=_u.getZ(Tu),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu){var ju=this.elements;return ju[0]=_u,ju[4]=Tu,ju[8]=Cu,ju[12]=Pu,ju[1]=Bu,ju[5]=Ru,ju[9]=Lu,ju[13]=Ou,ju[2]=Du,ju[6]=$u,ju[10]=ku,ju[14]=Fu,ju[3]=Nu,ju[7]=Vu,ju[11]=Gu,ju[15]=Hu,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(_u){var Tu=this.elements,Cu=_u.elements;return Tu[0]=Cu[0],Tu[1]=Cu[1],Tu[2]=Cu[2],Tu[3]=Cu[3],Tu[4]=Cu[4],Tu[5]=Cu[5],Tu[6]=Cu[6],Tu[7]=Cu[7],Tu[8]=Cu[8],Tu[9]=Cu[9],Tu[10]=Cu[10],Tu[11]=Cu[11],Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],Tu[15]=Cu[15],this},copyPosition:function(_u){var Tu=this.elements,Cu=_u.elements;return Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],this},extractBasis:function(_u,Tu,Cu){return _u.setFromMatrixColumn(this,0),Tu.setFromMatrixColumn(this,1),Cu.setFromMatrixColumn(this,2),this},makeBasis:function(_u,Tu,Cu){return this.set(_u.x,Tu.x,Cu.x,0,_u.y,Tu.y,Cu.y,0,_u.z,Tu.z,Cu.z,0,0,0,0,1),this},extractRotation:function(_u){var Tu=this.elements,Cu=_u.elements,Pu=1/_v1.setFromMatrixColumn(_u,0).length(),Bu=1/_v1.setFromMatrixColumn(_u,1).length(),Ru=1/_v1.setFromMatrixColumn(_u,2).length();return Tu[0]=Cu[0]*Pu,Tu[1]=Cu[1]*Pu,Tu[2]=Cu[2]*Pu,Tu[3]=0,Tu[4]=Cu[4]*Bu,Tu[5]=Cu[5]*Bu,Tu[6]=Cu[6]*Bu,Tu[7]=0,Tu[8]=Cu[8]*Ru,Tu[9]=Cu[9]*Ru,Tu[10]=Cu[10]*Ru,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1,this},makeRotationFromEuler:function(_u){_u&&_u.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var Tu=this.elements,Cu=_u.x,Pu=_u.y,Bu=_u.z,Ru=Math.cos(Cu),Lu=Math.sin(Cu),Ou=Math.cos(Pu),Du=Math.sin(Pu),$u=Math.cos(Bu),ku=Math.sin(Bu);if(_u.order==="XYZ"){var Fu=Ru*$u,Nu=Ru*ku,Vu=Lu*$u,Gu=Lu*ku;Tu[0]=Ou*$u,Tu[4]=-Ou*ku,Tu[8]=Du,Tu[1]=Nu+Vu*Du,Tu[5]=Fu-Gu*Du,Tu[9]=-Lu*Ou,Tu[2]=Gu-Fu*Du,Tu[6]=Vu+Nu*Du,Tu[10]=Ru*Ou}else if(_u.order==="YXZ"){var Hu=Ou*$u,ju=Ou*ku,Uu=Du*$u,zu=Du*ku;Tu[0]=Hu+zu*Lu,Tu[4]=Uu*Lu-ju,Tu[8]=Ru*Du,Tu[1]=Ru*ku,Tu[5]=Ru*$u,Tu[9]=-Lu,Tu[2]=ju*Lu-Uu,Tu[6]=zu+Hu*Lu,Tu[10]=Ru*Ou}else if(_u.order==="ZXY"){var Hu=Ou*$u,ju=Ou*ku,Uu=Du*$u,zu=Du*ku;Tu[0]=Hu-zu*Lu,Tu[4]=-Ru*ku,Tu[8]=Uu+ju*Lu,Tu[1]=ju+Uu*Lu,Tu[5]=Ru*$u,Tu[9]=zu-Hu*Lu,Tu[2]=-Ru*Du,Tu[6]=Lu,Tu[10]=Ru*Ou}else if(_u.order==="ZYX"){var Fu=Ru*$u,Nu=Ru*ku,Vu=Lu*$u,Gu=Lu*ku;Tu[0]=Ou*$u,Tu[4]=Vu*Du-Nu,Tu[8]=Fu*Du+Gu,Tu[1]=Ou*ku,Tu[5]=Gu*Du+Fu,Tu[9]=Nu*Du-Vu,Tu[2]=-Du,Tu[6]=Lu*Ou,Tu[10]=Ru*Ou}else if(_u.order==="YZX"){var Wu=Ru*Ou,Qu=Ru*Du,qu=Lu*Ou,Yu=Lu*Du;Tu[0]=Ou*$u,Tu[4]=Yu-Wu*ku,Tu[8]=qu*ku+Qu,Tu[1]=ku,Tu[5]=Ru*$u,Tu[9]=-Lu*$u,Tu[2]=-Du*$u,Tu[6]=Qu*ku+qu,Tu[10]=Wu-Yu*ku}else if(_u.order==="XZY"){var Wu=Ru*Ou,Qu=Ru*Du,qu=Lu*Ou,Yu=Lu*Du;Tu[0]=Ou*$u,Tu[4]=-ku,Tu[8]=Du*$u,Tu[1]=Wu*ku+Yu,Tu[5]=Ru*$u,Tu[9]=Qu*ku-qu,Tu[2]=qu*ku-Qu,Tu[6]=Lu*$u,Tu[10]=Yu*ku+Wu}return Tu[3]=0,Tu[7]=0,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1,this},makeRotationFromQuaternion:function(_u){return this.compose(_zero,_u,_one)},lookAt:function(_u,Tu,Cu){var Pu=this.elements;return _z.subVectors(_u,Tu),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Cu,_z),_x.lengthSq()===0&&(Math.abs(Cu.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Cu,_z)),_x.normalize(),_y.crossVectors(_z,_x),Pu[0]=_x.x,Pu[4]=_y.x,Pu[8]=_z.x,Pu[1]=_x.y,Pu[5]=_y.y,Pu[9]=_z.y,Pu[2]=_x.z,Pu[6]=_y.z,Pu[10]=_z.z,this},multiply:function(_u,Tu){return Tu!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(_u,Tu)):this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,Tu){var Cu=_u.elements,Pu=Tu.elements,Bu=this.elements,Ru=Cu[0],Lu=Cu[4],Ou=Cu[8],Du=Cu[12],$u=Cu[1],ku=Cu[5],Fu=Cu[9],Nu=Cu[13],Vu=Cu[2],Gu=Cu[6],Hu=Cu[10],ju=Cu[14],Uu=Cu[3],zu=Cu[7],Wu=Cu[11],Qu=Cu[15],qu=Pu[0],Yu=Pu[4],Xc=Pu[8],_h=Pu[12],_d=Pu[1],Ku=Pu[5],Xu=Pu[9],Ju=Pu[13],Zu=Pu[2],_c=Pu[6],_f=Pu[10],ep=Pu[14],tp=Pu[3],op=Pu[7],hp=Pu[11],cp=Pu[15];return Bu[0]=Ru*qu+Lu*_d+Ou*Zu+Du*tp,Bu[4]=Ru*Yu+Lu*Ku+Ou*_c+Du*op,Bu[8]=Ru*Xc+Lu*Xu+Ou*_f+Du*hp,Bu[12]=Ru*_h+Lu*Ju+Ou*ep+Du*cp,Bu[1]=$u*qu+ku*_d+Fu*Zu+Nu*tp,Bu[5]=$u*Yu+ku*Ku+Fu*_c+Nu*op,Bu[9]=$u*Xc+ku*Xu+Fu*_f+Nu*hp,Bu[13]=$u*_h+ku*Ju+Fu*ep+Nu*cp,Bu[2]=Vu*qu+Gu*_d+Hu*Zu+ju*tp,Bu[6]=Vu*Yu+Gu*Ku+Hu*_c+ju*op,Bu[10]=Vu*Xc+Gu*Xu+Hu*_f+ju*hp,Bu[14]=Vu*_h+Gu*Ju+Hu*ep+ju*cp,Bu[3]=Uu*qu+zu*_d+Wu*Zu+Qu*tp,Bu[7]=Uu*Yu+zu*Ku+Wu*_c+Qu*op,Bu[11]=Uu*Xc+zu*Xu+Wu*_f+Qu*hp,Bu[15]=Uu*_h+zu*Ju+Wu*ep+Qu*cp,this},multiplyScalar:function(_u){var Tu=this.elements;return Tu[0]*=_u,Tu[4]*=_u,Tu[8]*=_u,Tu[12]*=_u,Tu[1]*=_u,Tu[5]*=_u,Tu[9]*=_u,Tu[13]*=_u,Tu[2]*=_u,Tu[6]*=_u,Tu[10]*=_u,Tu[14]*=_u,Tu[3]*=_u,Tu[7]*=_u,Tu[11]*=_u,Tu[15]*=_u,this},determinant:function(){var _u=this.elements,Tu=_u[0],Cu=_u[4],Pu=_u[8],Bu=_u[12],Ru=_u[1],Lu=_u[5],Ou=_u[9],Du=_u[13],$u=_u[2],ku=_u[6],Fu=_u[10],Nu=_u[14],Vu=_u[3],Gu=_u[7],Hu=_u[11],ju=_u[15];return Vu*(+Bu*Ou*ku-Pu*Du*ku-Bu*Lu*Fu+Cu*Du*Fu+Pu*Lu*Nu-Cu*Ou*Nu)+Gu*(+Tu*Ou*Nu-Tu*Du*Fu+Bu*Ru*Fu-Pu*Ru*Nu+Pu*Du*$u-Bu*Ou*$u)+Hu*(+Tu*Du*ku-Tu*Lu*Nu-Bu*Ru*ku+Cu*Ru*Nu+Bu*Lu*$u-Cu*Du*$u)+ju*(-Pu*Lu*$u-Tu*Ou*ku+Tu*Lu*Fu+Pu*Ru*ku-Cu*Ru*Fu+Cu*Ou*$u)},transpose:function(){var _u=this.elements,Tu;return Tu=_u[1],_u[1]=_u[4],_u[4]=Tu,Tu=_u[2],_u[2]=_u[8],_u[8]=Tu,Tu=_u[6],_u[6]=_u[9],_u[9]=Tu,Tu=_u[3],_u[3]=_u[12],_u[12]=Tu,Tu=_u[7],_u[7]=_u[13],_u[13]=Tu,Tu=_u[11],_u[11]=_u[14],_u[14]=Tu,this},setPosition:function(_u,Tu,Cu){var Pu=this.elements;return _u.isVector3?(Pu[12]=_u.x,Pu[13]=_u.y,Pu[14]=_u.z):(Pu[12]=_u,Pu[13]=Tu,Pu[14]=Cu),this},getInverse:function(_u,Tu){Tu!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var Cu=this.elements,Pu=_u.elements,Bu=Pu[0],Ru=Pu[1],Lu=Pu[2],Ou=Pu[3],Du=Pu[4],$u=Pu[5],ku=Pu[6],Fu=Pu[7],Nu=Pu[8],Vu=Pu[9],Gu=Pu[10],Hu=Pu[11],ju=Pu[12],Uu=Pu[13],zu=Pu[14],Wu=Pu[15],Qu=Vu*zu*Fu-Uu*Gu*Fu+Uu*ku*Hu-$u*zu*Hu-Vu*ku*Wu+$u*Gu*Wu,qu=ju*Gu*Fu-Nu*zu*Fu-ju*ku*Hu+Du*zu*Hu+Nu*ku*Wu-Du*Gu*Wu,Yu=Nu*Uu*Fu-ju*Vu*Fu+ju*$u*Hu-Du*Uu*Hu-Nu*$u*Wu+Du*Vu*Wu,Xc=ju*Vu*ku-Nu*Uu*ku-ju*$u*Gu+Du*Uu*Gu+Nu*$u*zu-Du*Vu*zu,_h=Bu*Qu+Ru*qu+Lu*Yu+Ou*Xc;if(_h===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _d=1/_h;return Cu[0]=Qu*_d,Cu[1]=(Uu*Gu*Ou-Vu*zu*Ou-Uu*Lu*Hu+Ru*zu*Hu+Vu*Lu*Wu-Ru*Gu*Wu)*_d,Cu[2]=($u*zu*Ou-Uu*ku*Ou+Uu*Lu*Fu-Ru*zu*Fu-$u*Lu*Wu+Ru*ku*Wu)*_d,Cu[3]=(Vu*ku*Ou-$u*Gu*Ou-Vu*Lu*Fu+Ru*Gu*Fu+$u*Lu*Hu-Ru*ku*Hu)*_d,Cu[4]=qu*_d,Cu[5]=(Nu*zu*Ou-ju*Gu*Ou+ju*Lu*Hu-Bu*zu*Hu-Nu*Lu*Wu+Bu*Gu*Wu)*_d,Cu[6]=(ju*ku*Ou-Du*zu*Ou-ju*Lu*Fu+Bu*zu*Fu+Du*Lu*Wu-Bu*ku*Wu)*_d,Cu[7]=(Du*Gu*Ou-Nu*ku*Ou+Nu*Lu*Fu-Bu*Gu*Fu-Du*Lu*Hu+Bu*ku*Hu)*_d,Cu[8]=Yu*_d,Cu[9]=(ju*Vu*Ou-Nu*Uu*Ou-ju*Ru*Hu+Bu*Uu*Hu+Nu*Ru*Wu-Bu*Vu*Wu)*_d,Cu[10]=(Du*Uu*Ou-ju*$u*Ou+ju*Ru*Fu-Bu*Uu*Fu-Du*Ru*Wu+Bu*$u*Wu)*_d,Cu[11]=(Nu*$u*Ou-Du*Vu*Ou-Nu*Ru*Fu+Bu*Vu*Fu+Du*Ru*Hu-Bu*$u*Hu)*_d,Cu[12]=Xc*_d,Cu[13]=(Nu*Uu*Lu-ju*Vu*Lu+ju*Ru*Gu-Bu*Uu*Gu-Nu*Ru*zu+Bu*Vu*zu)*_d,Cu[14]=(ju*$u*Lu-Du*Uu*Lu-ju*Ru*ku+Bu*Uu*ku+Du*Ru*zu-Bu*$u*zu)*_d,Cu[15]=(Du*Vu*Lu-Nu*$u*Lu+Nu*Ru*ku-Bu*Vu*ku-Du*Ru*Gu+Bu*$u*Gu)*_d,this},scale:function(_u){var Tu=this.elements,Cu=_u.x,Pu=_u.y,Bu=_u.z;return Tu[0]*=Cu,Tu[4]*=Pu,Tu[8]*=Bu,Tu[1]*=Cu,Tu[5]*=Pu,Tu[9]*=Bu,Tu[2]*=Cu,Tu[6]*=Pu,Tu[10]*=Bu,Tu[3]*=Cu,Tu[7]*=Pu,Tu[11]*=Bu,this},getMaxScaleOnAxis:function(){var _u=this.elements,Tu=_u[0]*_u[0]+_u[1]*_u[1]+_u[2]*_u[2],Cu=_u[4]*_u[4]+_u[5]*_u[5]+_u[6]*_u[6],Pu=_u[8]*_u[8]+_u[9]*_u[9]+_u[10]*_u[10];return Math.sqrt(Math.max(Tu,Cu,Pu))},makeTranslation:function(_u,Tu,Cu){return this.set(1,0,0,_u,0,1,0,Tu,0,0,1,Cu,0,0,0,1),this},makeRotationX:function(_u){var Tu=Math.cos(_u),Cu=Math.sin(_u);return this.set(1,0,0,0,0,Tu,-Cu,0,0,Cu,Tu,0,0,0,0,1),this},makeRotationY:function(_u){var Tu=Math.cos(_u),Cu=Math.sin(_u);return this.set(Tu,0,Cu,0,0,1,0,0,-Cu,0,Tu,0,0,0,0,1),this},makeRotationZ:function(_u){var Tu=Math.cos(_u),Cu=Math.sin(_u);return this.set(Tu,-Cu,0,0,Cu,Tu,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(_u,Tu){var Cu=Math.cos(Tu),Pu=Math.sin(Tu),Bu=1-Cu,Ru=_u.x,Lu=_u.y,Ou=_u.z,Du=Bu*Ru,$u=Bu*Lu;return this.set(Du*Ru+Cu,Du*Lu-Pu*Ou,Du*Ou+Pu*Lu,0,Du*Lu+Pu*Ou,$u*Lu+Cu,$u*Ou-Pu*Ru,0,Du*Ou-Pu*Lu,$u*Ou+Pu*Ru,Bu*Ou*Ou+Cu,0,0,0,0,1),this},makeScale:function(_u,Tu,Cu){return this.set(_u,0,0,0,0,Tu,0,0,0,0,Cu,0,0,0,0,1),this},makeShear:function(_u,Tu,Cu){return this.set(1,Tu,Cu,0,_u,1,Cu,0,_u,Tu,1,0,0,0,0,1),this},compose:function(_u,Tu,Cu){var Pu=this.elements,Bu=Tu._x,Ru=Tu._y,Lu=Tu._z,Ou=Tu._w,Du=Bu+Bu,$u=Ru+Ru,ku=Lu+Lu,Fu=Bu*Du,Nu=Bu*$u,Vu=Bu*ku,Gu=Ru*$u,Hu=Ru*ku,ju=Lu*ku,Uu=Ou*Du,zu=Ou*$u,Wu=Ou*ku,Qu=Cu.x,qu=Cu.y,Yu=Cu.z;return Pu[0]=(1-(Gu+ju))*Qu,Pu[1]=(Nu+Wu)*Qu,Pu[2]=(Vu-zu)*Qu,Pu[3]=0,Pu[4]=(Nu-Wu)*qu,Pu[5]=(1-(Fu+ju))*qu,Pu[6]=(Hu+Uu)*qu,Pu[7]=0,Pu[8]=(Vu+zu)*Yu,Pu[9]=(Hu-Uu)*Yu,Pu[10]=(1-(Fu+Gu))*Yu,Pu[11]=0,Pu[12]=_u.x,Pu[13]=_u.y,Pu[14]=_u.z,Pu[15]=1,this},decompose:function(_u,Tu,Cu){var Pu=this.elements,Bu=_v1.set(Pu[0],Pu[1],Pu[2]).length(),Ru=_v1.set(Pu[4],Pu[5],Pu[6]).length(),Lu=_v1.set(Pu[8],Pu[9],Pu[10]).length(),Ou=this.determinant();Ou<0&&(Bu=-Bu),_u.x=Pu[12],_u.y=Pu[13],_u.z=Pu[14],_m1.copy(this);var Du=1/Bu,$u=1/Ru,ku=1/Lu;return _m1.elements[0]*=Du,_m1.elements[1]*=Du,_m1.elements[2]*=Du,_m1.elements[4]*=$u,_m1.elements[5]*=$u,_m1.elements[6]*=$u,_m1.elements[8]*=ku,_m1.elements[9]*=ku,_m1.elements[10]*=ku,Tu.setFromRotationMatrix(_m1),Cu.x=Bu,Cu.y=Ru,Cu.z=Lu,this},makePerspective:function(_u,Tu,Cu,Pu,Bu,Ru){Ru===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Lu=this.elements,Ou=2*Bu/(Tu-_u),Du=2*Bu/(Cu-Pu),$u=(Tu+_u)/(Tu-_u),ku=(Cu+Pu)/(Cu-Pu),Fu=-(Ru+Bu)/(Ru-Bu),Nu=-2*Ru*Bu/(Ru-Bu);return Lu[0]=Ou,Lu[4]=0,Lu[8]=$u,Lu[12]=0,Lu[1]=0,Lu[5]=Du,Lu[9]=ku,Lu[13]=0,Lu[2]=0,Lu[6]=0,Lu[10]=Fu,Lu[14]=Nu,Lu[3]=0,Lu[7]=0,Lu[11]=-1,Lu[15]=0,this},makeOrthographic:function(_u,Tu,Cu,Pu,Bu,Ru){var Lu=this.elements,Ou=1/(Tu-_u),Du=1/(Cu-Pu),$u=1/(Ru-Bu),ku=(Tu+_u)*Ou,Fu=(Cu+Pu)*Du,Nu=(Ru+Bu)*$u;return Lu[0]=2*Ou,Lu[4]=0,Lu[8]=0,Lu[12]=-ku,Lu[1]=0,Lu[5]=2*Du,Lu[9]=0,Lu[13]=-Fu,Lu[2]=0,Lu[6]=0,Lu[10]=-2*$u,Lu[14]=-Nu,Lu[3]=0,Lu[7]=0,Lu[11]=0,Lu[15]=1,this},equals:function(_u){for(var Tu=this.elements,Cu=_u.elements,Pu=0;Pu<16;Pu++)if(Tu[Pu]!==Cu[Pu])return!1;return!0},fromArray:function(_u,Tu){Tu===void 0&&(Tu=0);for(var Cu=0;Cu<16;Cu++)this.elements[Cu]=_u[Cu+Tu];return this},toArray:function(_u,Tu){_u===void 0&&(_u=[]),Tu===void 0&&(Tu=0);var Cu=this.elements;return _u[Tu]=Cu[0],_u[Tu+1]=Cu[1],_u[Tu+2]=Cu[2],_u[Tu+3]=Cu[3],_u[Tu+4]=Cu[4],_u[Tu+5]=Cu[5],_u[Tu+6]=Cu[6],_u[Tu+7]=Cu[7],_u[Tu+8]=Cu[8],_u[Tu+9]=Cu[9],_u[Tu+10]=Cu[10],_u[Tu+11]=Cu[11],_u[Tu+12]=Cu[12],_u[Tu+13]=Cu[13],_u[Tu+14]=Cu[14],_u[Tu+15]=Cu[15],_u}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(_u,Tu,Cu,Pu){this._x=_u||0,this._y=Tu||0,this._z=Cu||0,this._order=Pu||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(_u){this._order=_u,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(_u,Tu,Cu,Pu){return this._x=_u,this._y=Tu,this._z=Cu,this._order=Pu||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(_u){return this._x=_u._x,this._y=_u._y,this._z=_u._z,this._order=_u._order,this._onChangeCallback(),this},setFromRotationMatrix:function(_u,Tu,Cu){var Pu=MathUtils.clamp,Bu=_u.elements,Ru=Bu[0],Lu=Bu[4],Ou=Bu[8],Du=Bu[1],$u=Bu[5],ku=Bu[9],Fu=Bu[2],Nu=Bu[6],Vu=Bu[10];switch(Tu=Tu||this._order,Tu){case"XYZ":this._y=Math.asin(Pu(Ou,-1,1)),Math.abs(Ou)<.9999999?(this._x=Math.atan2(-ku,Vu),this._z=Math.atan2(-Lu,Ru)):(this._x=Math.atan2(Nu,$u),this._z=0);break;case"YXZ":this._x=Math.asin(-Pu(ku,-1,1)),Math.abs(ku)<.9999999?(this._y=Math.atan2(Ou,Vu),this._z=Math.atan2(Du,$u)):(this._y=Math.atan2(-Fu,Ru),this._z=0);break;case"ZXY":this._x=Math.asin(Pu(Nu,-1,1)),Math.abs(Nu)<.9999999?(this._y=Math.atan2(-Fu,Vu),this._z=Math.atan2(-Lu,$u)):(this._y=0,this._z=Math.atan2(Du,Ru));break;case"ZYX":this._y=Math.asin(-Pu(Fu,-1,1)),Math.abs(Fu)<.9999999?(this._x=Math.atan2(Nu,Vu),this._z=Math.atan2(Du,Ru)):(this._x=0,this._z=Math.atan2(-Lu,$u));break;case"YZX":this._z=Math.asin(Pu(Du,-1,1)),Math.abs(Du)<.9999999?(this._x=Math.atan2(-ku,$u),this._y=Math.atan2(-Fu,Ru)):(this._x=0,this._y=Math.atan2(Ou,Vu));break;case"XZY":this._z=Math.asin(-Pu(Lu,-1,1)),Math.abs(Lu)<.9999999?(this._x=Math.atan2(Nu,$u),this._y=Math.atan2(Ou,Ru)):(this._x=Math.atan2(-ku,Vu),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+Tu)}return this._order=Tu,Cu!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(_u,Tu,Cu){return _matrix.makeRotationFromQuaternion(_u),this.setFromRotationMatrix(_matrix,Tu,Cu)},setFromVector3:function(_u,Tu){return this.set(_u.x,_u.y,_u.z,Tu||this._order)},reorder:function(_u){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,_u)},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._order===this._order},fromArray:function(_u){return this._x=_u[0],this._y=_u[1],this._z=_u[2],_u[3]!==void 0&&(this._order=_u[3]),this._onChangeCallback(),this},toArray:function(_u,Tu){return _u===void 0&&(_u=[]),Tu===void 0&&(Tu=0),_u[Tu]=this._x,_u[Tu+1]=this._y,_u[Tu+2]=this._z,_u[Tu+3]=this._order,_u},toVector3:function(_u){return _u?_u.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(_u){this.mask=1<<_u|0},enable:function(_u){this.mask|=1<<_u|0},enableAll:function(){this.mask=-1},toggle:function(_u){this.mask^=1<<_u|0},disable:function(_u){this.mask&=~(1<<_u|0)},disableAll:function(){this.mask=0},test:function(_u){return(this.mask&_u.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var _u=new Vector3,Tu=new Euler,Cu=new Quaternion,Pu=new Vector3(1,1,1);function Bu(){Cu.setFromEuler(Tu,!1)}function Ru(){Tu.setFromQuaternion(Cu,void 0,!1)}Tu._onChange(Bu),Cu._onChange(Ru),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_u},rotation:{configurable:!0,enumerable:!0,value:Tu},quaternion:{configurable:!0,enumerable:!0,value:Cu},scale:{configurable:!0,enumerable:!0,value:Pu},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_u),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(_u){return this.quaternion.premultiply(_u),this},setRotationFromAxisAngle:function(_u,Tu){this.quaternion.setFromAxisAngle(_u,Tu)},setRotationFromEuler:function(_u){this.quaternion.setFromEuler(_u,!0)},setRotationFromMatrix:function(_u){this.quaternion.setFromRotationMatrix(_u)},setRotationFromQuaternion:function(_u){this.quaternion.copy(_u)},rotateOnAxis:function(_u,Tu){return _q1.setFromAxisAngle(_u,Tu),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(_u,Tu){return _q1.setFromAxisAngle(_u,Tu),this.quaternion.premultiply(_q1),this},rotateX:function(_u){return this.rotateOnAxis(_xAxis,_u)},rotateY:function(_u){return this.rotateOnAxis(_yAxis,_u)},rotateZ:function(_u){return this.rotateOnAxis(_zAxis,_u)},translateOnAxis:function(_u,Tu){return _v1$1.copy(_u).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(Tu)),this},translateX:function(_u){return this.translateOnAxis(_xAxis,_u)},translateY:function(_u){return this.translateOnAxis(_yAxis,_u)},translateZ:function(_u){return this.translateOnAxis(_zAxis,_u)},localToWorld:function(_u){return _u.applyMatrix4(this.matrixWorld)},worldToLocal:function(_u){return _u.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(_u,Tu,Cu){_u.isVector3?_target.copy(_u):_target.set(_u,Tu,Cu);var Pu=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Pu&&(_m1$1.extractRotation(Pu.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(_u){if(arguments.length>1){for(var Tu=0;Tu<arguments.length;Tu++)this.add(arguments[Tu]);return this}return _u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_u),this):(_u&&_u.isObject3D?(_u.parent!==null&&_u.parent.remove(_u),_u.parent=this,this.children.push(_u),_u.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_u),this)},remove:function(_u){if(arguments.length>1){for(var Tu=0;Tu<arguments.length;Tu++)this.remove(arguments[Tu]);return this}var Cu=this.children.indexOf(_u);return Cu!==-1&&(_u.parent=null,this.children.splice(Cu,1),_u.dispatchEvent(_removedEvent)),this},attach:function(_u){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),_u.parent!==null&&(_u.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_u.parent.matrixWorld)),_u.applyMatrix4(_m1$1),_u.updateWorldMatrix(!1,!1),this.add(_u),this},getObjectById:function(_u){return this.getObjectByProperty("id",_u)},getObjectByName:function(_u){return this.getObjectByProperty("name",_u)},getObjectByProperty:function(_u,Tu){if(this[_u]===Tu)return this;for(var Cu=0,Pu=this.children.length;Cu<Pu;Cu++){var Bu=this.children[Cu],Ru=Bu.getObjectByProperty(_u,Tu);if(Ru!==void 0)return Ru}},getWorldPosition:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),_u.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),_u=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_u,_scale),_u},getWorldScale:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,_u),_u},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var Tu=this.matrixWorld.elements;return _u.set(Tu[8],Tu[9],Tu[10]).normalize()},raycast:function(){},traverse:function(_u){_u(this);for(var Tu=this.children,Cu=0,Pu=Tu.length;Cu<Pu;Cu++)Tu[Cu].traverse(_u)},traverseVisible:function(_u){if(this.visible!==!1){_u(this);for(var Tu=this.children,Cu=0,Pu=Tu.length;Cu<Pu;Cu++)Tu[Cu].traverseVisible(_u)}},traverseAncestors:function(_u){var Tu=this.parent;Tu!==null&&(_u(Tu),Tu.traverseAncestors(_u))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_u)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_u=!0);for(var Tu=this.children,Cu=0,Pu=Tu.length;Cu<Pu;Cu++)Tu[Cu].updateMatrixWorld(_u)},updateWorldMatrix:function(_u,Tu){var Cu=this.parent;if(_u===!0&&Cu!==null&&Cu.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),Tu===!0)for(var Pu=this.children,Bu=0,Ru=Pu.length;Bu<Ru;Bu++)Pu[Bu].updateWorldMatrix(!1,!0)},toJSON:function(_u){var Tu=_u===void 0||typeof _u=="string",Cu={};Tu&&(_u={geometries:{},materials:{},textures:{},images:{},shapes:{}},Cu.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Pu={};Pu.uuid=this.uuid,Pu.type=this.type,this.name!==""&&(Pu.name=this.name),this.castShadow===!0&&(Pu.castShadow=!0),this.receiveShadow===!0&&(Pu.receiveShadow=!0),this.visible===!1&&(Pu.visible=!1),this.frustumCulled===!1&&(Pu.frustumCulled=!1),this.renderOrder!==0&&(Pu.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Pu.userData=this.userData),Pu.layers=this.layers.mask,Pu.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Pu.matrixAutoUpdate=!1),this.isInstancedMesh&&(Pu.type="InstancedMesh",Pu.count=this.count,Pu.instanceMatrix=this.instanceMatrix.toJSON());function Bu(ju,Uu){return ju[Uu.uuid]===void 0&&(ju[Uu.uuid]=Uu.toJSON(_u)),Uu.uuid}if(this.isMesh||this.isLine||this.isPoints){Pu.geometry=Bu(_u.geometries,this.geometry);var Ru=this.geometry.parameters;if(Ru!==void 0&&Ru.shapes!==void 0){var Lu=Ru.shapes;if(Array.isArray(Lu))for(var Ou=0,Du=Lu.length;Ou<Du;Ou++){var $u=Lu[Ou];Bu(_u.shapes,$u)}else Bu(_u.shapes,Lu)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var ku=[],Ou=0,Du=this.material.length;Ou<Du;Ou++)ku.push(Bu(_u.materials,this.material[Ou]));Pu.material=ku}else Pu.material=Bu(_u.materials,this.material);if(this.children.length>0){Pu.children=[];for(var Ou=0;Ou<this.children.length;Ou++)Pu.children.push(this.children[Ou].toJSON(_u).object)}if(Tu){var Fu=Hu(_u.geometries),Nu=Hu(_u.materials),Vu=Hu(_u.textures),Gu=Hu(_u.images),Lu=Hu(_u.shapes);Fu.length>0&&(Cu.geometries=Fu),Nu.length>0&&(Cu.materials=Nu),Vu.length>0&&(Cu.textures=Vu),Gu.length>0&&(Cu.images=Gu),Lu.length>0&&(Cu.shapes=Lu)}return Cu.object=Pu,Cu;function Hu(ju){var Uu=[];for(var zu in ju){var Wu=ju[zu];delete Wu.metadata,Uu.push(Wu)}return Uu}},clone:function(_u){return new this.constructor().copy(this,_u)},copy:function(_u,Tu){if(Tu===void 0&&(Tu=!0),this.name=_u.name,this.up.copy(_u.up),this.position.copy(_u.position),this.quaternion.copy(_u.quaternion),this.scale.copy(_u.scale),this.matrix.copy(_u.matrix),this.matrixWorld.copy(_u.matrixWorld),this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_u.matrixWorldNeedsUpdate,this.layers.mask=_u.layers.mask,this.visible=_u.visible,this.castShadow=_u.castShadow,this.receiveShadow=_u.receiveShadow,this.frustumCulled=_u.frustumCulled,this.renderOrder=_u.renderOrder,this.userData=JSON.parse(JSON.stringify(_u.userData)),Tu===!0)for(var Cu=0;Cu<_u.children.length;Cu++){var Pu=_u.children[Cu];this.add(Pu.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(_u,Tu){return Object3D.prototype.copy.call(this,_u,Tu),_u.background!==null&&(this.background=_u.background.clone()),_u.environment!==null&&(this.environment=_u.environment.clone()),_u.fog!==null&&(this.fog=_u.fog.clone()),_u.overrideMaterial!==null&&(this.overrideMaterial=_u.overrideMaterial.clone()),this.autoUpdate=_u.autoUpdate,this.matrixAutoUpdate=_u.matrixAutoUpdate,this},toJSON:function(_u){var Tu=Object3D.prototype.toJSON.call(this,_u);return this.background!==null&&(Tu.object.background=this.background.toJSON(_u)),this.environment!==null&&(Tu.object.environment=this.environment.toJSON(_u)),this.fog!==null&&(Tu.object.fog=this.fog.toJSON()),Tu},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(_u,Tu){this.min=_u!==void 0?_u:new Vector3(1/0,1/0,1/0),this.max=Tu!==void 0?Tu:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(_u,Tu){return this.min.copy(_u),this.max.copy(Tu),this},setFromArray:function(_u){for(var Tu=1/0,Cu=1/0,Pu=1/0,Bu=-1/0,Ru=-1/0,Lu=-1/0,Ou=0,Du=_u.length;Ou<Du;Ou+=3){var $u=_u[Ou],ku=_u[Ou+1],Fu=_u[Ou+2];$u<Tu&&(Tu=$u),ku<Cu&&(Cu=ku),Fu<Pu&&(Pu=Fu),$u>Bu&&(Bu=$u),ku>Ru&&(Ru=ku),Fu>Lu&&(Lu=Fu)}return this.min.set(Tu,Cu,Pu),this.max.set(Bu,Ru,Lu),this},setFromBufferAttribute:function(_u){for(var Tu=1/0,Cu=1/0,Pu=1/0,Bu=-1/0,Ru=-1/0,Lu=-1/0,Ou=0,Du=_u.count;Ou<Du;Ou++){var $u=_u.getX(Ou),ku=_u.getY(Ou),Fu=_u.getZ(Ou);$u<Tu&&(Tu=$u),ku<Cu&&(Cu=ku),Fu<Pu&&(Pu=Fu),$u>Bu&&(Bu=$u),ku>Ru&&(Ru=ku),Fu>Lu&&(Lu=Fu)}return this.min.set(Tu,Cu,Pu),this.max.set(Bu,Ru,Lu),this},setFromPoints:function(_u){this.makeEmpty();for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++)this.expandByPoint(_u[Tu]);return this},setFromCenterAndSize:function(_u,Tu){var Cu=_vector$1.copy(Tu).multiplyScalar(.5);return this.min.copy(_u).sub(Cu),this.max.copy(_u).add(Cu),this},setFromObject:function(_u){return this.makeEmpty(),this.expandByObject(_u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},expandByObject:function(_u){_u.updateWorldMatrix(!1,!1);var Tu=_u.geometry;Tu!==void 0&&(Tu.boundingBox===null&&Tu.computeBoundingBox(),_box.copy(Tu.boundingBox),_box.applyMatrix4(_u.matrixWorld),this.union(_box));for(var Cu=_u.children,Pu=0,Bu=Cu.length;Pu<Bu;Pu++)this.expandByObject(Cu[Pu]);return this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y||_u.z<this.min.z||_u.z>this.max.z)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y&&this.min.z<=_u.min.z&&_u.max.z<=this.max.z},getParameter:function(_u,Tu){return Tu===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),Tu=new Vector3),Tu.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y),(_u.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y||_u.max.z<this.min.z||_u.min.z>this.max.z)},intersectsSphere:function(_u){return this.clampPoint(_u.center,_vector$1),_vector$1.distanceToSquared(_u.center)<=_u.radius*_u.radius},intersectsPlane:function(_u){var Tu,Cu;return _u.normal.x>0?(Tu=_u.normal.x*this.min.x,Cu=_u.normal.x*this.max.x):(Tu=_u.normal.x*this.max.x,Cu=_u.normal.x*this.min.x),_u.normal.y>0?(Tu+=_u.normal.y*this.min.y,Cu+=_u.normal.y*this.max.y):(Tu+=_u.normal.y*this.max.y,Cu+=_u.normal.y*this.min.y),_u.normal.z>0?(Tu+=_u.normal.z*this.min.z,Cu+=_u.normal.z*this.max.z):(Tu+=_u.normal.z*this.max.z,Cu+=_u.normal.z*this.min.z),Tu<=-_u.constant&&Cu>=-_u.constant},intersectsTriangle:function(_u){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(_u.a,_center),_v1$2.subVectors(_u.b,_center),_v2.subVectors(_u.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var Tu=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(Tu,_v0,_v1$2,_v2,_extents)||(Tu=[1,0,0,0,1,0,0,0,1],!satForAxes(Tu,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),Tu=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(Tu,_v0,_v1$2,_v2,_extents))},clampPoint:function(_u,Tu){return Tu===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),Tu=new Vector3),Tu.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var Tu=_vector$1.copy(_u).clamp(this.min,this.max);return Tu.sub(_u).length()},getBoundingSphere:function(_u){return _u===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(_u.center),_u.radius=this.getSize(_vector$1).length()*.5,_u},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this.isEmpty()&&this.makeEmpty(),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},applyMatrix4:function(_u){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_u),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_u),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_u),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_u),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_u),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_u),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_u),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_u),this.setFromPoints(_points),this)},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});function satForAxes(_u,Tu,Cu,Pu,Bu){var Ru,Lu;for(Ru=0,Lu=_u.length-3;Ru<=Lu;Ru+=3){_testAxis.fromArray(_u,Ru);var Ou=Bu.x*Math.abs(_testAxis.x)+Bu.y*Math.abs(_testAxis.y)+Bu.z*Math.abs(_testAxis.z),Du=Tu.dot(_testAxis),$u=Cu.dot(_testAxis),ku=Pu.dot(_testAxis);if(Math.max(-Math.max(Du,$u,ku),Math.min(Du,$u,ku))>Ou)return!1}return!0}var _box$1=new Box3;function Sphere(_u,Tu){this.center=_u!==void 0?_u:new Vector3,this.radius=Tu!==void 0?Tu:-1}Object.assign(Sphere.prototype,{set:function(_u,Tu){return this.center.copy(_u),this.radius=Tu,this},setFromPoints:function(_u,Tu){var Cu=this.center;Tu!==void 0?Cu.copy(Tu):_box$1.setFromPoints(_u).getCenter(Cu);for(var Pu=0,Bu=0,Ru=_u.length;Bu<Ru;Bu++)Pu=Math.max(Pu,Cu.distanceToSquared(_u[Bu]));return this.radius=Math.sqrt(Pu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.center.copy(_u.center),this.radius=_u.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(_u){return _u.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(_u){return _u.distanceTo(this.center)-this.radius},intersectsSphere:function(_u){var Tu=this.radius+_u.radius;return _u.center.distanceToSquared(this.center)<=Tu*Tu},intersectsBox:function(_u){return _u.intersectsSphere(this)},intersectsPlane:function(_u){return Math.abs(_u.distanceToPoint(this.center))<=this.radius},clampPoint:function(_u,Tu){var Cu=this.center.distanceToSquared(_u);return Tu===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),Tu=new Vector3),Tu.copy(_u),Cu>this.radius*this.radius&&(Tu.sub(this.center).normalize(),Tu.multiplyScalar(this.radius).add(this.center)),Tu},getBoundingBox:function(_u){return _u===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),_u=new Box3),this.isEmpty()?(_u.makeEmpty(),_u):(_u.set(this.center,this.center),_u.expandByScalar(this.radius),_u)},applyMatrix4:function(_u){return this.center.applyMatrix4(_u),this.radius=this.radius*_u.getMaxScaleOnAxis(),this},translate:function(_u){return this.center.add(_u),this},equals:function(_u){return _u.center.equals(this.center)&&_u.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(_u,Tu){this.origin=_u!==void 0?_u:new Vector3,this.direction=Tu!==void 0?Tu:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(_u,Tu){return this.origin.copy(_u),this.direction.copy(Tu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.origin.copy(_u.origin),this.direction.copy(_u.direction),this},at:function(_u,Tu){return Tu===void 0&&(console.warn("THREE.Ray: .at() target is now required"),Tu=new Vector3),Tu.copy(this.direction).multiplyScalar(_u).add(this.origin)},lookAt:function(_u){return this.direction.copy(_u).sub(this.origin).normalize(),this},recast:function(_u){return this.origin.copy(this.at(_u,_vector$2)),this},closestPointToPoint:function(_u,Tu){Tu===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),Tu=new Vector3),Tu.subVectors(_u,this.origin);var Cu=Tu.dot(this.direction);return Cu<0?Tu.copy(this.origin):Tu.copy(this.direction).multiplyScalar(Cu).add(this.origin)},distanceToPoint:function(_u){return Math.sqrt(this.distanceSqToPoint(_u))},distanceSqToPoint:function(_u){var Tu=_vector$2.subVectors(_u,this.origin).dot(this.direction);return Tu<0?this.origin.distanceToSquared(_u):(_vector$2.copy(this.direction).multiplyScalar(Tu).add(this.origin),_vector$2.distanceToSquared(_u))},distanceSqToSegment:function(_u,Tu,Cu,Pu){_segCenter.copy(_u).add(Tu).multiplyScalar(.5),_segDir.copy(Tu).sub(_u).normalize(),_diff.copy(this.origin).sub(_segCenter);var Bu=_u.distanceTo(Tu)*.5,Ru=-this.direction.dot(_segDir),Lu=_diff.dot(this.direction),Ou=-_diff.dot(_segDir),Du=_diff.lengthSq(),$u=Math.abs(1-Ru*Ru),ku,Fu,Nu,Vu;if($u>0)if(ku=Ru*Ou-Lu,Fu=Ru*Lu-Ou,Vu=Bu*$u,ku>=0)if(Fu>=-Vu)if(Fu<=Vu){var Gu=1/$u;ku*=Gu,Fu*=Gu,Nu=ku*(ku+Ru*Fu+2*Lu)+Fu*(Ru*ku+Fu+2*Ou)+Du}else Fu=Bu,ku=Math.max(0,-(Ru*Fu+Lu)),Nu=-ku*ku+Fu*(Fu+2*Ou)+Du;else Fu=-Bu,ku=Math.max(0,-(Ru*Fu+Lu)),Nu=-ku*ku+Fu*(Fu+2*Ou)+Du;else Fu<=-Vu?(ku=Math.max(0,-(-Ru*Bu+Lu)),Fu=ku>0?-Bu:Math.min(Math.max(-Bu,-Ou),Bu),Nu=-ku*ku+Fu*(Fu+2*Ou)+Du):Fu<=Vu?(ku=0,Fu=Math.min(Math.max(-Bu,-Ou),Bu),Nu=Fu*(Fu+2*Ou)+Du):(ku=Math.max(0,-(Ru*Bu+Lu)),Fu=ku>0?Bu:Math.min(Math.max(-Bu,-Ou),Bu),Nu=-ku*ku+Fu*(Fu+2*Ou)+Du);else Fu=Ru>0?-Bu:Bu,ku=Math.max(0,-(Ru*Fu+Lu)),Nu=-ku*ku+Fu*(Fu+2*Ou)+Du;return Cu&&Cu.copy(this.direction).multiplyScalar(ku).add(this.origin),Pu&&Pu.copy(_segDir).multiplyScalar(Fu).add(_segCenter),Nu},intersectSphere:function(_u,Tu){_vector$2.subVectors(_u.center,this.origin);var Cu=_vector$2.dot(this.direction),Pu=_vector$2.dot(_vector$2)-Cu*Cu,Bu=_u.radius*_u.radius;if(Pu>Bu)return null;var Ru=Math.sqrt(Bu-Pu),Lu=Cu-Ru,Ou=Cu+Ru;return Lu<0&&Ou<0?null:Lu<0?this.at(Ou,Tu):this.at(Lu,Tu)},intersectsSphere:function(_u){return this.distanceSqToPoint(_u.center)<=_u.radius*_u.radius},distanceToPlane:function(_u){var Tu=_u.normal.dot(this.direction);if(Tu===0)return _u.distanceToPoint(this.origin)===0?0:null;var Cu=-(this.origin.dot(_u.normal)+_u.constant)/Tu;return Cu>=0?Cu:null},intersectPlane:function(_u,Tu){var Cu=this.distanceToPlane(_u);return Cu===null?null:this.at(Cu,Tu)},intersectsPlane:function(_u){var Tu=_u.distanceToPoint(this.origin);if(Tu===0)return!0;var Cu=_u.normal.dot(this.direction);return Cu*Tu<0},intersectBox:function(_u,Tu){var Cu,Pu,Bu,Ru,Lu,Ou,Du=1/this.direction.x,$u=1/this.direction.y,ku=1/this.direction.z,Fu=this.origin;return Du>=0?(Cu=(_u.min.x-Fu.x)*Du,Pu=(_u.max.x-Fu.x)*Du):(Cu=(_u.max.x-Fu.x)*Du,Pu=(_u.min.x-Fu.x)*Du),$u>=0?(Bu=(_u.min.y-Fu.y)*$u,Ru=(_u.max.y-Fu.y)*$u):(Bu=(_u.max.y-Fu.y)*$u,Ru=(_u.min.y-Fu.y)*$u),Cu>Ru||Bu>Pu||((Bu>Cu||Cu!==Cu)&&(Cu=Bu),(Ru<Pu||Pu!==Pu)&&(Pu=Ru),ku>=0?(Lu=(_u.min.z-Fu.z)*ku,Ou=(_u.max.z-Fu.z)*ku):(Lu=(_u.max.z-Fu.z)*ku,Ou=(_u.min.z-Fu.z)*ku),Cu>Ou||Lu>Pu)||((Lu>Cu||Cu!==Cu)&&(Cu=Lu),(Ou<Pu||Pu!==Pu)&&(Pu=Ou),Pu<0)?null:this.at(Cu>=0?Cu:Pu,Tu)},intersectsBox:function(_u){return this.intersectBox(_u,_vector$2)!==null},intersectTriangle:function(_u,Tu,Cu,Pu,Bu){_edge1.subVectors(Tu,_u),_edge2.subVectors(Cu,_u),_normal.crossVectors(_edge1,_edge2);var Ru=this.direction.dot(_normal),Lu;if(Ru>0){if(Pu)return null;Lu=1}else if(Ru<0)Lu=-1,Ru=-Ru;else return null;_diff.subVectors(this.origin,_u);var Ou=Lu*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Ou<0)return null;var Du=Lu*this.direction.dot(_edge1.cross(_diff));if(Du<0||Ou+Du>Ru)return null;var $u=-Lu*_diff.dot(_normal);return $u<0?null:this.at($u/Ru,Bu)},applyMatrix4:function(_u){return this.origin.applyMatrix4(_u),this.direction.transformDirection(_u),this},equals:function(_u){return _u.origin.equals(this.origin)&&_u.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(_u,Tu){this.normal=_u!==void 0?_u:new Vector3(1,0,0),this.constant=Tu!==void 0?Tu:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(_u,Tu){return this.normal.copy(_u),this.constant=Tu,this},setComponents:function(_u,Tu,Cu,Pu){return this.normal.set(_u,Tu,Cu),this.constant=Pu,this},setFromNormalAndCoplanarPoint:function(_u,Tu){return this.normal.copy(_u),this.constant=-Tu.dot(this.normal),this},setFromCoplanarPoints:function(_u,Tu,Cu){var Pu=_vector1.subVectors(Cu,Tu).cross(_vector2.subVectors(_u,Tu)).normalize();return this.setFromNormalAndCoplanarPoint(Pu,_u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.normal.copy(_u.normal),this.constant=_u.constant,this},normalize:function(){var _u=1/this.normal.length();return this.normal.multiplyScalar(_u),this.constant*=_u,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(_u){return this.normal.dot(_u)+this.constant},distanceToSphere:function(_u){return this.distanceToPoint(_u.center)-_u.radius},projectPoint:function(_u,Tu){return Tu===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),Tu=new Vector3),Tu.copy(this.normal).multiplyScalar(-this.distanceToPoint(_u)).add(_u)},intersectLine:function(_u,Tu){Tu===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),Tu=new Vector3);var Cu=_u.delta(_vector1),Pu=this.normal.dot(Cu);if(Pu===0)return this.distanceToPoint(_u.start)===0?Tu.copy(_u.start):void 0;var Bu=-(_u.start.dot(this.normal)+this.constant)/Pu;if(!(Bu<0||Bu>1))return Tu.copy(Cu).multiplyScalar(Bu).add(_u.start)},intersectsLine:function(_u){var Tu=this.distanceToPoint(_u.start),Cu=this.distanceToPoint(_u.end);return Tu<0&&Cu>0||Cu<0&&Tu>0},intersectsBox:function(_u){return _u.intersectsPlane(this)},intersectsSphere:function(_u){return _u.intersectsPlane(this)},coplanarPoint:function(_u){return _u===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),_u=new Vector3),_u.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(_u,Tu){var Cu=Tu||_normalMatrix.getNormalMatrix(_u),Pu=this.coplanarPoint(_vector1).applyMatrix4(_u),Bu=this.normal.applyMatrix3(Cu).normalize();return this.constant=-Pu.dot(Bu),this},translate:function(_u){return this.constant-=_u.dot(this.normal),this},equals:function(_u){return _u.normal.equals(this.normal)&&_u.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(_u,Tu,Cu){this.a=_u!==void 0?_u:new Vector3,this.b=Tu!==void 0?Tu:new Vector3,this.c=Cu!==void 0?Cu:new Vector3}Object.assign(Triangle,{getNormal:function(_u,Tu,Cu,Pu){Pu===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Pu=new Vector3),Pu.subVectors(Cu,Tu),_v0$1.subVectors(_u,Tu),Pu.cross(_v0$1);var Bu=Pu.lengthSq();return Bu>0?Pu.multiplyScalar(1/Math.sqrt(Bu)):Pu.set(0,0,0)},getBarycoord:function(_u,Tu,Cu,Pu,Bu){_v0$1.subVectors(Pu,Tu),_v1$3.subVectors(Cu,Tu),_v2$1.subVectors(_u,Tu);var Ru=_v0$1.dot(_v0$1),Lu=_v0$1.dot(_v1$3),Ou=_v0$1.dot(_v2$1),Du=_v1$3.dot(_v1$3),$u=_v1$3.dot(_v2$1),ku=Ru*Du-Lu*Lu;if(Bu===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Bu=new Vector3),ku===0)return Bu.set(-2,-1,-1);var Fu=1/ku,Nu=(Du*Ou-Lu*$u)*Fu,Vu=(Ru*$u-Lu*Ou)*Fu;return Bu.set(1-Nu-Vu,Vu,Nu)},containsPoint:function(_u,Tu,Cu,Pu){return Triangle.getBarycoord(_u,Tu,Cu,Pu,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){return this.getBarycoord(_u,Tu,Cu,Pu,_v3),Ou.set(0,0),Ou.addScaledVector(Bu,_v3.x),Ou.addScaledVector(Ru,_v3.y),Ou.addScaledVector(Lu,_v3.z),Ou},isFrontFacing:function(_u,Tu,Cu,Pu){return _v0$1.subVectors(Cu,Tu),_v1$3.subVectors(_u,Tu),_v0$1.cross(_v1$3).dot(Pu)<0}});Object.assign(Triangle.prototype,{set:function(_u,Tu,Cu){return this.a.copy(_u),this.b.copy(Tu),this.c.copy(Cu),this},setFromPointsAndIndices:function(_u,Tu,Cu,Pu){return this.a.copy(_u[Tu]),this.b.copy(_u[Cu]),this.c.copy(_u[Pu]),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.a.copy(_u.a),this.b.copy(_u.b),this.c.copy(_u.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),_u=new Vector3),_u.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(_u){return Triangle.getNormal(this.a,this.b,this.c,_u)},getPlane:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),_u=new Plane),_u.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(_u,Tu){return Triangle.getBarycoord(_u,this.a,this.b,this.c,Tu)},getUV:function(_u,Tu,Cu,Pu,Bu){return Triangle.getUV(_u,this.a,this.b,this.c,Tu,Cu,Pu,Bu)},containsPoint:function(_u){return Triangle.containsPoint(_u,this.a,this.b,this.c)},isFrontFacing:function(_u){return Triangle.isFrontFacing(this.a,this.b,this.c,_u)},intersectsBox:function(_u){return _u.intersectsTriangle(this)},closestPointToPoint:function(_u,Tu){Tu===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),Tu=new Vector3);var Cu=this.a,Pu=this.b,Bu=this.c,Ru,Lu;_vab.subVectors(Pu,Cu),_vac.subVectors(Bu,Cu),_vap.subVectors(_u,Cu);var Ou=_vab.dot(_vap),Du=_vac.dot(_vap);if(Ou<=0&&Du<=0)return Tu.copy(Cu);_vbp.subVectors(_u,Pu);var $u=_vab.dot(_vbp),ku=_vac.dot(_vbp);if($u>=0&&ku<=$u)return Tu.copy(Pu);var Fu=Ou*ku-$u*Du;if(Fu<=0&&Ou>=0&&$u<=0)return Ru=Ou/(Ou-$u),Tu.copy(Cu).addScaledVector(_vab,Ru);_vcp.subVectors(_u,Bu);var Nu=_vab.dot(_vcp),Vu=_vac.dot(_vcp);if(Vu>=0&&Nu<=Vu)return Tu.copy(Bu);var Gu=Nu*Du-Ou*Vu;if(Gu<=0&&Du>=0&&Vu<=0)return Lu=Du/(Du-Vu),Tu.copy(Cu).addScaledVector(_vac,Lu);var Hu=$u*Vu-Nu*ku;if(Hu<=0&&ku-$u>=0&&Nu-Vu>=0)return _vbc.subVectors(Bu,Pu),Lu=(ku-$u)/(ku-$u+(Nu-Vu)),Tu.copy(Pu).addScaledVector(_vbc,Lu);var ju=1/(Hu+Gu+Fu);return Ru=Gu*ju,Lu=Fu*ju,Tu.copy(Cu).addScaledVector(_vab,Ru).addScaledVector(_vac,Lu)},equals:function(_u){return _u.a.equals(this.a)&&_u.b.equals(this.b)&&_u.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(_u,Tu,Cu){return Tu===void 0&&Cu===void 0?this.set(_u):this.setRGB(_u,Tu,Cu)}function hue2rgb(_u,Tu,Cu){return Cu<0&&(Cu+=1),Cu>1&&(Cu-=1),Cu<1/6?_u+(Tu-_u)*6*Cu:Cu<1/2?Tu:Cu<2/3?_u+(Tu-_u)*6*(2/3-Cu):_u}function SRGBToLinear(_u){return _u<.04045?_u*.0773993808:Math.pow(_u*.9478672986+.0521327014,2.4)}function LinearToSRGB(_u){return _u<.0031308?_u*12.92:1.055*Math.pow(_u,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(_u){return _u&&_u.isColor?this.copy(_u):typeof _u=="number"?this.setHex(_u):typeof _u=="string"&&this.setStyle(_u),this},setScalar:function(_u){return this.r=_u,this.g=_u,this.b=_u,this},setHex:function(_u){return _u=Math.floor(_u),this.r=(_u>>16&255)/255,this.g=(_u>>8&255)/255,this.b=(_u&255)/255,this},setRGB:function(_u,Tu,Cu){return this.r=_u,this.g=Tu,this.b=Cu,this},setHSL:function(_u,Tu,Cu){if(_u=MathUtils.euclideanModulo(_u,1),Tu=MathUtils.clamp(Tu,0,1),Cu=MathUtils.clamp(Cu,0,1),Tu===0)this.r=this.g=this.b=Cu;else{var Pu=Cu<=.5?Cu*(1+Tu):Cu+Tu-Cu*Tu,Bu=2*Cu-Pu;this.r=hue2rgb(Bu,Pu,_u+1/3),this.g=hue2rgb(Bu,Pu,_u),this.b=hue2rgb(Bu,Pu,_u-1/3)}return this},setStyle:function(_u){function Tu(Fu){Fu!==void 0&&parseFloat(Fu)<1&&console.warn("THREE.Color: Alpha component of "+_u+" will be ignored.")}var Cu;if(Cu=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(_u)){var Pu,Bu=Cu[1],Ru=Cu[2];switch(Bu){case"rgb":case"rgba":if(Pu=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru))return this.r=Math.min(255,parseInt(Pu[1],10))/255,this.g=Math.min(255,parseInt(Pu[2],10))/255,this.b=Math.min(255,parseInt(Pu[3],10))/255,Tu(Pu[5]),this;if(Pu=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru))return this.r=Math.min(100,parseInt(Pu[1],10))/100,this.g=Math.min(100,parseInt(Pu[2],10))/100,this.b=Math.min(100,parseInt(Pu[3],10))/100,Tu(Pu[5]),this;break;case"hsl":case"hsla":if(Pu=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru)){var Lu=parseFloat(Pu[1])/360,Ou=parseInt(Pu[2],10)/100,Du=parseInt(Pu[3],10)/100;return Tu(Pu[5]),this.setHSL(Lu,Ou,Du)}break}}else if(Cu=/^\#([A-Fa-f0-9]+)$/.exec(_u)){var $u=Cu[1],ku=$u.length;if(ku===3)return this.r=parseInt($u.charAt(0)+$u.charAt(0),16)/255,this.g=parseInt($u.charAt(1)+$u.charAt(1),16)/255,this.b=parseInt($u.charAt(2)+$u.charAt(2),16)/255,this;if(ku===6)return this.r=parseInt($u.charAt(0)+$u.charAt(1),16)/255,this.g=parseInt($u.charAt(2)+$u.charAt(3),16)/255,this.b=parseInt($u.charAt(4)+$u.charAt(5),16)/255,this}return _u&&_u.length>0?this.setColorName(_u):this},setColorName:function(_u){var Tu=_colorKeywords[_u];return Tu!==void 0?this.setHex(Tu):console.warn("THREE.Color: Unknown color "+_u),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(_u){return this.r=_u.r,this.g=_u.g,this.b=_u.b,this},copyGammaToLinear:function(_u,Tu){return Tu===void 0&&(Tu=2),this.r=Math.pow(_u.r,Tu),this.g=Math.pow(_u.g,Tu),this.b=Math.pow(_u.b,Tu),this},copyLinearToGamma:function(_u,Tu){Tu===void 0&&(Tu=2);var Cu=Tu>0?1/Tu:1;return this.r=Math.pow(_u.r,Cu),this.g=Math.pow(_u.g,Cu),this.b=Math.pow(_u.b,Cu),this},convertGammaToLinear:function(_u){return this.copyGammaToLinear(this,_u),this},convertLinearToGamma:function(_u){return this.copyLinearToGamma(this,_u),this},copySRGBToLinear:function(_u){return this.r=SRGBToLinear(_u.r),this.g=SRGBToLinear(_u.g),this.b=SRGBToLinear(_u.b),this},copyLinearToSRGB:function(_u){return this.r=LinearToSRGB(_u.r),this.g=LinearToSRGB(_u.g),this.b=LinearToSRGB(_u.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(_u){_u===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),_u={h:0,s:0,l:0});var Tu=this.r,Cu=this.g,Pu=this.b,Bu=Math.max(Tu,Cu,Pu),Ru=Math.min(Tu,Cu,Pu),Lu,Ou,Du=(Ru+Bu)/2;if(Ru===Bu)Lu=0,Ou=0;else{var $u=Bu-Ru;switch(Ou=Du<=.5?$u/(Bu+Ru):$u/(2-Bu-Ru),Bu){case Tu:Lu=(Cu-Pu)/$u+(Cu<Pu?6:0);break;case Cu:Lu=(Pu-Tu)/$u+2;break;case Pu:Lu=(Tu-Cu)/$u+4;break}Lu/=6}return _u.h=Lu,_u.s=Ou,_u.l=Du,_u},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(_u,Tu,Cu){return this.getHSL(_hslA),_hslA.h+=_u,_hslA.s+=Tu,_hslA.l+=Cu,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(_u){return this.r+=_u.r,this.g+=_u.g,this.b+=_u.b,this},addColors:function(_u,Tu){return this.r=_u.r+Tu.r,this.g=_u.g+Tu.g,this.b=_u.b+Tu.b,this},addScalar:function(_u){return this.r+=_u,this.g+=_u,this.b+=_u,this},sub:function(_u){return this.r=Math.max(0,this.r-_u.r),this.g=Math.max(0,this.g-_u.g),this.b=Math.max(0,this.b-_u.b),this},multiply:function(_u){return this.r*=_u.r,this.g*=_u.g,this.b*=_u.b,this},multiplyScalar:function(_u){return this.r*=_u,this.g*=_u,this.b*=_u,this},lerp:function(_u,Tu){return this.r+=(_u.r-this.r)*Tu,this.g+=(_u.g-this.g)*Tu,this.b+=(_u.b-this.b)*Tu,this},lerpHSL:function(_u,Tu){this.getHSL(_hslA),_u.getHSL(_hslB);var Cu=MathUtils.lerp(_hslA.h,_hslB.h,Tu),Pu=MathUtils.lerp(_hslA.s,_hslB.s,Tu),Bu=MathUtils.lerp(_hslA.l,_hslB.l,Tu);return this.setHSL(Cu,Pu,Bu),this},equals:function(_u){return _u.r===this.r&&_u.g===this.g&&_u.b===this.b},fromArray:function(_u,Tu){return Tu===void 0&&(Tu=0),this.r=_u[Tu],this.g=_u[Tu+1],this.b=_u[Tu+2],this},toArray:function(_u,Tu){return _u===void 0&&(_u=[]),Tu===void 0&&(Tu=0),_u[Tu]=this.r,_u[Tu+1]=this.g,_u[Tu+2]=this.b,_u},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(_u,Tu,Cu,Pu,Bu,Ru){this.a=_u,this.b=Tu,this.c=Cu,this.normal=Pu&&Pu.isVector3?Pu:new Vector3,this.vertexNormals=Array.isArray(Pu)?Pu:[],this.color=Bu&&Bu.isColor?Bu:new Color,this.vertexColors=Array.isArray(Bu)?Bu:[],this.materialIndex=Ru!==void 0?Ru:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.a=_u.a,this.b=_u.b,this.c=_u.c,this.normal.copy(_u.normal),this.color.copy(_u.color),this.materialIndex=_u.materialIndex;for(var Tu=0,Cu=_u.vertexNormals.length;Tu<Cu;Tu++)this.vertexNormals[Tu]=_u.vertexNormals[Tu].clone();for(var Tu=0,Cu=_u.vertexColors.length;Tu<Cu;Tu++)this.vertexColors[Tu]=_u.vertexColors[Tu].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(_u){if(_u!==void 0)for(var Tu in _u){var Cu=_u[Tu];if(Cu===void 0){console.warn("THREE.Material: '"+Tu+"' parameter is undefined.");continue}if(Tu==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Cu===FlatShading;continue}var Pu=this[Tu];if(Pu===void 0){console.warn("THREE."+this.type+": '"+Tu+"' is not a property of this material.");continue}Pu&&Pu.isColor?Pu.set(Cu):Pu&&Pu.isVector3&&Cu&&Cu.isVector3?Pu.copy(Cu):this[Tu]=Cu}},toJSON:function(_u){var Tu=_u===void 0||typeof _u=="string";Tu&&(_u={textures:{},images:{}});var Cu={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};Cu.uuid=this.uuid,Cu.type=this.type,this.name!==""&&(Cu.name=this.name),this.color&&this.color.isColor&&(Cu.color=this.color.getHex()),this.roughness!==void 0&&(Cu.roughness=this.roughness),this.metalness!==void 0&&(Cu.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(Cu.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(Cu.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(Cu.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Cu.specular=this.specular.getHex()),this.shininess!==void 0&&(Cu.shininess=this.shininess),this.clearcoat!==void 0&&(Cu.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Cu.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Cu.clearcoatMap=this.clearcoatMap.toJSON(_u).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Cu.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_u).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Cu.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_u).uuid,Cu.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(Cu.map=this.map.toJSON(_u).uuid),this.matcap&&this.matcap.isTexture&&(Cu.matcap=this.matcap.toJSON(_u).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Cu.alphaMap=this.alphaMap.toJSON(_u).uuid),this.lightMap&&this.lightMap.isTexture&&(Cu.lightMap=this.lightMap.toJSON(_u).uuid),this.aoMap&&this.aoMap.isTexture&&(Cu.aoMap=this.aoMap.toJSON(_u).uuid,Cu.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Cu.bumpMap=this.bumpMap.toJSON(_u).uuid,Cu.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Cu.normalMap=this.normalMap.toJSON(_u).uuid,Cu.normalMapType=this.normalMapType,Cu.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Cu.displacementMap=this.displacementMap.toJSON(_u).uuid,Cu.displacementScale=this.displacementScale,Cu.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Cu.roughnessMap=this.roughnessMap.toJSON(_u).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Cu.metalnessMap=this.metalnessMap.toJSON(_u).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Cu.emissiveMap=this.emissiveMap.toJSON(_u).uuid),this.specularMap&&this.specularMap.isTexture&&(Cu.specularMap=this.specularMap.toJSON(_u).uuid),this.envMap&&this.envMap.isTexture&&(Cu.envMap=this.envMap.toJSON(_u).uuid,Cu.reflectivity=this.reflectivity,Cu.refractionRatio=this.refractionRatio,this.combine!==void 0&&(Cu.combine=this.combine),this.envMapIntensity!==void 0&&(Cu.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(Cu.gradientMap=this.gradientMap.toJSON(_u).uuid),this.size!==void 0&&(Cu.size=this.size),this.sizeAttenuation!==void 0&&(Cu.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Cu.blending=this.blending),this.flatShading===!0&&(Cu.flatShading=this.flatShading),this.side!==FrontSide&&(Cu.side=this.side),this.vertexColors&&(Cu.vertexColors=!0),this.opacity<1&&(Cu.opacity=this.opacity),this.transparent===!0&&(Cu.transparent=this.transparent),Cu.depthFunc=this.depthFunc,Cu.depthTest=this.depthTest,Cu.depthWrite=this.depthWrite,Cu.stencilWrite=this.stencilWrite,Cu.stencilWriteMask=this.stencilWriteMask,Cu.stencilFunc=this.stencilFunc,Cu.stencilRef=this.stencilRef,Cu.stencilFuncMask=this.stencilFuncMask,Cu.stencilFail=this.stencilFail,Cu.stencilZFail=this.stencilZFail,Cu.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(Cu.rotation=this.rotation),this.polygonOffset===!0&&(Cu.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Cu.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Cu.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(Cu.linewidth=this.linewidth),this.dashSize!==void 0&&(Cu.dashSize=this.dashSize),this.gapSize!==void 0&&(Cu.gapSize=this.gapSize),this.scale!==void 0&&(Cu.scale=this.scale),this.dithering===!0&&(Cu.dithering=!0),this.alphaTest>0&&(Cu.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(Cu.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(Cu.wireframe=this.wireframe),this.wireframeLinewidth>1&&(Cu.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Cu.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Cu.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(Cu.morphTargets=!0),this.morphNormals===!0&&(Cu.morphNormals=!0),this.skinning===!0&&(Cu.skinning=!0),this.visible===!1&&(Cu.visible=!1),this.toneMapped===!1&&(Cu.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(Cu.userData=this.userData);function Pu(Lu){var Ou=[];for(var Du in Lu){var $u=Lu[Du];delete $u.metadata,Ou.push($u)}return Ou}if(Tu){var Bu=Pu(_u.textures),Ru=Pu(_u.images);Bu.length>0&&(Cu.textures=Bu),Ru.length>0&&(Cu.images=Ru)}return Cu},clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.name=_u.name,this.fog=_u.fog,this.blending=_u.blending,this.side=_u.side,this.flatShading=_u.flatShading,this.vertexColors=_u.vertexColors,this.opacity=_u.opacity,this.transparent=_u.transparent,this.blendSrc=_u.blendSrc,this.blendDst=_u.blendDst,this.blendEquation=_u.blendEquation,this.blendSrcAlpha=_u.blendSrcAlpha,this.blendDstAlpha=_u.blendDstAlpha,this.blendEquationAlpha=_u.blendEquationAlpha,this.depthFunc=_u.depthFunc,this.depthTest=_u.depthTest,this.depthWrite=_u.depthWrite,this.stencilWriteMask=_u.stencilWriteMask,this.stencilFunc=_u.stencilFunc,this.stencilRef=_u.stencilRef,this.stencilFuncMask=_u.stencilFuncMask,this.stencilFail=_u.stencilFail,this.stencilZFail=_u.stencilZFail,this.stencilZPass=_u.stencilZPass,this.stencilWrite=_u.stencilWrite;var Tu=_u.clippingPlanes,Cu=null;if(Tu!==null){var Pu=Tu.length;Cu=new Array(Pu);for(var Bu=0;Bu!==Pu;++Bu)Cu[Bu]=Tu[Bu].clone()}return this.clippingPlanes=Cu,this.clipIntersection=_u.clipIntersection,this.clipShadows=_u.clipShadows,this.shadowSide=_u.shadowSide,this.colorWrite=_u.colorWrite,this.precision=_u.precision,this.polygonOffset=_u.polygonOffset,this.polygonOffsetFactor=_u.polygonOffsetFactor,this.polygonOffsetUnits=_u.polygonOffsetUnits,this.dithering=_u.dithering,this.alphaTest=_u.alphaTest,this.premultipliedAlpha=_u.premultipliedAlpha,this.visible=_u.visible,this.toneMapped=_u.toneMapped,this.userData=JSON.parse(JSON.stringify(_u.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function MeshBasicMaterial(_u){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(_u)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(_u,Tu,Cu){if(Array.isArray(_u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=_u,this.itemSize=Tu,this.count=_u!==void 0?_u.length/Tu:0,this.normalized=Cu===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.name=_u.name,this.array=new _u.array.constructor(_u.array),this.itemSize=_u.itemSize,this.count=_u.count,this.normalized=_u.normalized,this.usage=_u.usage,this},copyAt:function(_u,Tu,Cu){_u*=this.itemSize,Cu*=Tu.itemSize;for(var Pu=0,Bu=this.itemSize;Pu<Bu;Pu++)this.array[_u+Pu]=Tu.array[Cu+Pu];return this},copyArray:function(_u){return this.array.set(_u),this},copyColorsArray:function(_u){for(var Tu=this.array,Cu=0,Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Ru=_u[Pu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Pu),Ru=new Color),Tu[Cu++]=Ru.r,Tu[Cu++]=Ru.g,Tu[Cu++]=Ru.b}return this},copyVector2sArray:function(_u){for(var Tu=this.array,Cu=0,Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Ru=_u[Pu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Pu),Ru=new Vector2),Tu[Cu++]=Ru.x,Tu[Cu++]=Ru.y}return this},copyVector3sArray:function(_u){for(var Tu=this.array,Cu=0,Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Ru=_u[Pu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Pu),Ru=new Vector3),Tu[Cu++]=Ru.x,Tu[Cu++]=Ru.y,Tu[Cu++]=Ru.z}return this},copyVector4sArray:function(_u){for(var Tu=this.array,Cu=0,Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Ru=_u[Pu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Pu),Ru=new Vector4),Tu[Cu++]=Ru.x,Tu[Cu++]=Ru.y,Tu[Cu++]=Ru.z,Tu[Cu++]=Ru.w}return this},applyMatrix3:function(_u){for(var Tu=0,Cu=this.count;Tu<Cu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.applyMatrix3(_u),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(_u){for(var Tu=0,Cu=this.count;Tu<Cu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.applyMatrix4(_u),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(_u){for(var Tu=0,Cu=this.count;Tu<Cu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.applyNormalMatrix(_u),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(_u){for(var Tu=0,Cu=this.count;Tu<Cu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.transformDirection(_u),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(_u,Tu){return Tu===void 0&&(Tu=0),this.array.set(_u,Tu),this},getX:function(_u){return this.array[_u*this.itemSize]},setX:function(_u,Tu){return this.array[_u*this.itemSize]=Tu,this},getY:function(_u){return this.array[_u*this.itemSize+1]},setY:function(_u,Tu){return this.array[_u*this.itemSize+1]=Tu,this},getZ:function(_u){return this.array[_u*this.itemSize+2]},setZ:function(_u,Tu){return this.array[_u*this.itemSize+2]=Tu,this},getW:function(_u){return this.array[_u*this.itemSize+3]},setW:function(_u,Tu){return this.array[_u*this.itemSize+3]=Tu,this},setXY:function(_u,Tu,Cu){return _u*=this.itemSize,this.array[_u+0]=Tu,this.array[_u+1]=Cu,this},setXYZ:function(_u,Tu,Cu,Pu){return _u*=this.itemSize,this.array[_u+0]=Tu,this.array[_u+1]=Cu,this.array[_u+2]=Pu,this},setXYZW:function(_u,Tu,Cu,Pu,Bu){return _u*=this.itemSize,this.array[_u+0]=Tu,this.array[_u+1]=Cu,this.array[_u+2]=Pu,this.array[_u+3]=Bu,this},onUpload:function(_u){return this.onUploadCallback=_u,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Int8Array(_u),Tu,Cu)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Uint8Array(_u),Tu,Cu)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Uint8ClampedArray(_u),Tu,Cu)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Int16Array(_u),Tu,Cu)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Uint16Array(_u),Tu,Cu)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Int32Array(_u),Tu,Cu)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Uint32Array(_u),Tu,Cu)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Float32Array(_u),Tu,Cu)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(_u,Tu,Cu){BufferAttribute.call(this,new Float64Array(_u),Tu,Cu)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(_u){for(var Tu,Cu=[],Pu=void 0,Bu=_u.faces,Ru=0;Ru<Bu.length;Ru++){var Lu=Bu[Ru];Lu.materialIndex!==Pu&&(Pu=Lu.materialIndex,Tu!==void 0&&(Tu.count=Ru*3-Tu.start,Cu.push(Tu)),Tu={start:Ru*3,materialIndex:Pu})}Tu!==void 0&&(Tu.count=Ru*3-Tu.start,Cu.push(Tu)),this.groups=Cu},fromGeometry:function(_u){var Tu=_u.faces,Cu=_u.vertices,Pu=_u.faceVertexUvs,Bu=Pu[0]&&Pu[0].length>0,Ru=Pu[1]&&Pu[1].length>0,Lu=_u.morphTargets,Ou=Lu.length,Du;if(Ou>0){Du=[];for(var $u=0;$u<Ou;$u++)Du[$u]={name:Lu[$u].name,data:[]};this.morphTargets.position=Du}var ku=_u.morphNormals,Fu=ku.length,Nu;if(Fu>0){Nu=[];for(var $u=0;$u<Fu;$u++)Nu[$u]={name:ku[$u].name,data:[]};this.morphTargets.normal=Nu}var Vu=_u.skinIndices,Gu=_u.skinWeights,Hu=Vu.length===Cu.length,ju=Gu.length===Cu.length;Cu.length>0&&Tu.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var $u=0;$u<Tu.length;$u++){var Uu=Tu[$u];this.vertices.push(Cu[Uu.a],Cu[Uu.b],Cu[Uu.c]);var zu=Uu.vertexNormals;if(zu.length===3)this.normals.push(zu[0],zu[1],zu[2]);else{var Wu=Uu.normal;this.normals.push(Wu,Wu,Wu)}var Qu=Uu.vertexColors;if(Qu.length===3)this.colors.push(Qu[0],Qu[1],Qu[2]);else{var qu=Uu.color;this.colors.push(qu,qu,qu)}if(Bu===!0){var Yu=Pu[0][$u];Yu!==void 0?this.uvs.push(Yu[0],Yu[1],Yu[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",$u),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Ru===!0){var Yu=Pu[1][$u];Yu!==void 0?this.uvs2.push(Yu[0],Yu[1],Yu[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",$u),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var Xc=0;Xc<Ou;Xc++){var _h=Lu[Xc].vertices;Du[Xc].data.push(_h[Uu.a],_h[Uu.b],_h[Uu.c])}for(var Xc=0;Xc<Fu;Xc++){var _d=ku[Xc].vertexNormals[$u];Nu[Xc].data.push(_d.a,_d.b,_d.c)}Hu&&this.skinIndices.push(Vu[Uu.a],Vu[Uu.b],Vu[Uu.c]),ju&&this.skinWeights.push(Gu[Uu.a],Gu[Uu.b],Gu[Uu.c])}return this.computeGroups(_u),this.verticesNeedUpdate=_u.verticesNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this}});function arrayMax(_u){if(_u.length===0)return-1/0;let Tu=_u[0];for(let Cu=1,Pu=_u.length;Cu<Pu;++Cu)_u[Cu]>Tu&&(Tu=_u[Cu]);return Tu}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(_u){Array.isArray(_u)?this.index=new(arrayMax(_u)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(_u,1):this.index=_u},getAttribute:function(_u){return this.attributes[_u]},setAttribute:function(_u,Tu){return this.attributes[_u]=Tu,this},deleteAttribute:function(_u){return delete this.attributes[_u],this},addGroup:function(_u,Tu,Cu){this.groups.push({start:_u,count:Tu,materialIndex:Cu!==void 0?Cu:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(_u,Tu){this.drawRange.start=_u,this.drawRange.count=Tu},applyMatrix4:function(_u){var Tu=this.attributes.position;Tu!==void 0&&(Tu.applyMatrix4(_u),Tu.needsUpdate=!0);var Cu=this.attributes.normal;if(Cu!==void 0){var Pu=new Matrix3().getNormalMatrix(_u);Cu.applyNormalMatrix(Pu),Cu.needsUpdate=!0}var Bu=this.attributes.tangent;return Bu!==void 0&&(Bu.transformDirection(_u),Bu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(_u){return _m1$2.makeRotationX(_u),this.applyMatrix4(_m1$2),this},rotateY:function(_u){return _m1$2.makeRotationY(_u),this.applyMatrix4(_m1$2),this},rotateZ:function(_u){return _m1$2.makeRotationZ(_u),this.applyMatrix4(_m1$2),this},translate:function(_u,Tu,Cu){return _m1$2.makeTranslation(_u,Tu,Cu),this.applyMatrix4(_m1$2),this},scale:function(_u,Tu,Cu){return _m1$2.makeScale(_u,Tu,Cu),this.applyMatrix4(_m1$2),this},lookAt:function(_u){return _obj.lookAt(_u),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(_u){var Tu=_u.geometry;if(_u.isPoints||_u.isLine){var Cu=new Float32BufferAttribute(Tu.vertices.length*3,3),Pu=new Float32BufferAttribute(Tu.colors.length*3,3);if(this.setAttribute("position",Cu.copyVector3sArray(Tu.vertices)),this.setAttribute("color",Pu.copyColorsArray(Tu.colors)),Tu.lineDistances&&Tu.lineDistances.length===Tu.vertices.length){var Bu=new Float32BufferAttribute(Tu.lineDistances.length,1);this.setAttribute("lineDistance",Bu.copyArray(Tu.lineDistances))}Tu.boundingSphere!==null&&(this.boundingSphere=Tu.boundingSphere.clone()),Tu.boundingBox!==null&&(this.boundingBox=Tu.boundingBox.clone())}else _u.isMesh&&Tu&&Tu.isGeometry&&this.fromGeometry(Tu);return this},setFromPoints:function(_u){for(var Tu=[],Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Tu.push(Bu.x,Bu.y,Bu.z||0)}return this.setAttribute("position",new Float32BufferAttribute(Tu,3)),this},updateFromObject:function(_u){var Tu=_u.geometry;if(_u.isMesh){var Cu=Tu.__directGeometry;if(Tu.elementsNeedUpdate===!0&&(Cu=void 0,Tu.elementsNeedUpdate=!1),Cu===void 0)return this.fromGeometry(Tu);Cu.verticesNeedUpdate=Tu.verticesNeedUpdate,Cu.normalsNeedUpdate=Tu.normalsNeedUpdate,Cu.colorsNeedUpdate=Tu.colorsNeedUpdate,Cu.uvsNeedUpdate=Tu.uvsNeedUpdate,Cu.groupsNeedUpdate=Tu.groupsNeedUpdate,Tu.verticesNeedUpdate=!1,Tu.normalsNeedUpdate=!1,Tu.colorsNeedUpdate=!1,Tu.uvsNeedUpdate=!1,Tu.groupsNeedUpdate=!1,Tu=Cu}var Pu;return Tu.verticesNeedUpdate===!0&&(Pu=this.attributes.position,Pu!==void 0&&(Pu.copyVector3sArray(Tu.vertices),Pu.needsUpdate=!0),Tu.verticesNeedUpdate=!1),Tu.normalsNeedUpdate===!0&&(Pu=this.attributes.normal,Pu!==void 0&&(Pu.copyVector3sArray(Tu.normals),Pu.needsUpdate=!0),Tu.normalsNeedUpdate=!1),Tu.colorsNeedUpdate===!0&&(Pu=this.attributes.color,Pu!==void 0&&(Pu.copyColorsArray(Tu.colors),Pu.needsUpdate=!0),Tu.colorsNeedUpdate=!1),Tu.uvsNeedUpdate&&(Pu=this.attributes.uv,Pu!==void 0&&(Pu.copyVector2sArray(Tu.uvs),Pu.needsUpdate=!0),Tu.uvsNeedUpdate=!1),Tu.lineDistancesNeedUpdate&&(Pu=this.attributes.lineDistance,Pu!==void 0&&(Pu.copyArray(Tu.lineDistances),Pu.needsUpdate=!0),Tu.lineDistancesNeedUpdate=!1),Tu.groupsNeedUpdate&&(Tu.computeGroups(_u.geometry),this.groups=Tu.groups,Tu.groupsNeedUpdate=!1),this},fromGeometry:function(_u){return _u.__directGeometry=new DirectGeometry().fromGeometry(_u),this.fromDirectGeometry(_u.__directGeometry)},fromDirectGeometry:function(_u){var Tu=new Float32Array(_u.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(Tu,3).copyVector3sArray(_u.vertices)),_u.normals.length>0){var Cu=new Float32Array(_u.normals.length*3);this.setAttribute("normal",new BufferAttribute(Cu,3).copyVector3sArray(_u.normals))}if(_u.colors.length>0){var Pu=new Float32Array(_u.colors.length*3);this.setAttribute("color",new BufferAttribute(Pu,3).copyColorsArray(_u.colors))}if(_u.uvs.length>0){var Bu=new Float32Array(_u.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Bu,2).copyVector2sArray(_u.uvs))}if(_u.uvs2.length>0){var Ru=new Float32Array(_u.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Ru,2).copyVector2sArray(_u.uvs2))}this.groups=_u.groups;for(var Lu in _u.morphTargets){for(var Ou=[],Du=_u.morphTargets[Lu],$u=0,ku=Du.length;$u<ku;$u++){var Fu=Du[$u],Nu=new Float32BufferAttribute(Fu.data.length*3,3);Nu.name=Fu.name,Ou.push(Nu.copyVector3sArray(Fu.data))}this.morphAttributes[Lu]=Ou}if(_u.skinIndices.length>0){var Vu=new Float32BufferAttribute(_u.skinIndices.length*4,4);this.setAttribute("skinIndex",Vu.copyVector4sArray(_u.skinIndices))}if(_u.skinWeights.length>0){var Gu=new Float32BufferAttribute(_u.skinWeights.length*4,4);this.setAttribute("skinWeight",Gu.copyVector4sArray(_u.skinWeights))}return _u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var _u=this.attributes.position,Tu=this.morphAttributes.position;if(_u!==void 0){if(this.boundingBox.setFromBufferAttribute(_u),Tu)for(var Cu=0,Pu=Tu.length;Cu<Pu;Cu++){var Bu=Tu[Cu];_box$2.setFromBufferAttribute(Bu),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var _u=this.attributes.position,Tu=this.morphAttributes.position;if(_u){var Cu=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_u),Tu)for(var Pu=0,Bu=Tu.length;Pu<Bu;Pu++){var Ru=Tu[Pu];_boxMorphTargets.setFromBufferAttribute(Ru),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Cu);for(var Lu=0,Pu=0,Bu=_u.count;Pu<Bu;Pu++)_vector$4.fromBufferAttribute(_u,Pu),Lu=Math.max(Lu,Cu.distanceToSquared(_vector$4));if(Tu)for(var Pu=0,Bu=Tu.length;Pu<Bu;Pu++)for(var Ru=Tu[Pu],Ou=this.morphTargetsRelative,Du=0,$u=Ru.count;Du<$u;Du++)_vector$4.fromBufferAttribute(Ru,Du),Ou&&(_offset.fromBufferAttribute(_u,Du),_vector$4.add(_offset)),Lu=Math.max(Lu,Cu.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Lu),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var _u=this.index,Tu=this.attributes;if(Tu.position){var Cu=Tu.position.array;if(Tu.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(Cu.length),3));else for(var Pu=Tu.normal.array,Bu=0,Ru=Pu.length;Bu<Ru;Bu++)Pu[Bu]=0;var Lu=Tu.normal.array,Ou,Du,$u,ku=new Vector3,Fu=new Vector3,Nu=new Vector3,Vu=new Vector3,Gu=new Vector3;if(_u)for(var Hu=_u.array,Bu=0,Ru=_u.count;Bu<Ru;Bu+=3)Ou=Hu[Bu+0]*3,Du=Hu[Bu+1]*3,$u=Hu[Bu+2]*3,ku.fromArray(Cu,Ou),Fu.fromArray(Cu,Du),Nu.fromArray(Cu,$u),Vu.subVectors(Nu,Fu),Gu.subVectors(ku,Fu),Vu.cross(Gu),Lu[Ou]+=Vu.x,Lu[Ou+1]+=Vu.y,Lu[Ou+2]+=Vu.z,Lu[Du]+=Vu.x,Lu[Du+1]+=Vu.y,Lu[Du+2]+=Vu.z,Lu[$u]+=Vu.x,Lu[$u+1]+=Vu.y,Lu[$u+2]+=Vu.z;else for(var Bu=0,Ru=Cu.length;Bu<Ru;Bu+=9)ku.fromArray(Cu,Bu),Fu.fromArray(Cu,Bu+3),Nu.fromArray(Cu,Bu+6),Vu.subVectors(Nu,Fu),Gu.subVectors(ku,Fu),Vu.cross(Gu),Lu[Bu]=Vu.x,Lu[Bu+1]=Vu.y,Lu[Bu+2]=Vu.z,Lu[Bu+3]=Vu.x,Lu[Bu+4]=Vu.y,Lu[Bu+5]=Vu.z,Lu[Bu+6]=Vu.x,Lu[Bu+7]=Vu.y,Lu[Bu+8]=Vu.z;this.normalizeNormals(),Tu.normal.needsUpdate=!0}},merge:function(_u,Tu){if(!(_u&&_u.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",_u);return}Tu===void 0&&(Tu=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var Cu=this.attributes;for(var Pu in Cu)if(_u.attributes[Pu]!==void 0)for(var Bu=Cu[Pu],Ru=Bu.array,Lu=_u.attributes[Pu],Ou=Lu.array,Du=Lu.itemSize*Tu,$u=Math.min(Ou.length,Ru.length-Du),ku=0,Fu=Du;ku<$u;ku++,Fu++)Ru[Fu]=Ou[ku];return this},normalizeNormals:function(){for(var _u=this.attributes.normal,Tu=0,Cu=_u.count;Tu<Cu;Tu++)_vector$4.x=_u.getX(Tu),_vector$4.y=_u.getY(Tu),_vector$4.z=_u.getZ(Tu),_vector$4.normalize(),_u.setXYZ(Tu,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function _u(Hu,ju){for(var Uu=Hu.array,zu=Hu.itemSize,Wu=Hu.normalized,Qu=new Uu.constructor(ju.length*zu),qu=0,Yu=0,Xc=0,_h=ju.length;Xc<_h;Xc++){qu=ju[Xc]*zu;for(var _d=0;_d<zu;_d++)Qu[Yu++]=Uu[qu++]}return new BufferAttribute(Qu,zu,Wu)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var Tu=new BufferGeometry,Cu=this.index.array,Pu=this.attributes;for(var Bu in Pu){var Ru=Pu[Bu],Lu=_u(Ru,Cu);Tu.setAttribute(Bu,Lu)}var Ou=this.morphAttributes;for(Bu in Ou){for(var Du=[],$u=Ou[Bu],ku=0,Fu=$u.length;ku<Fu;ku++){var Ru=$u[ku],Lu=_u(Ru,Cu);Du.push(Lu)}Tu.morphAttributes[Bu]=Du}Tu.morphTargetsRelative=this.morphTargetsRelative;for(var Nu=this.groups,ku=0,Vu=Nu.length;ku<Vu;ku++){var Gu=Nu[ku];Tu.addGroup(Gu.start,Gu.count,Gu.materialIndex)}return Tu},toJSON:function(){var _u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),Object.keys(this.userData).length>0&&(_u.userData=this.userData),this.parameters!==void 0){var Tu=this.parameters;for(var Cu in Tu)Tu[Cu]!==void 0&&(_u[Cu]=Tu[Cu]);return _u}_u.data={attributes:{}};var Pu=this.index;Pu!==null&&(_u.data.index={type:Pu.array.constructor.name,array:Array.prototype.slice.call(Pu.array)});var Bu=this.attributes;for(var Cu in Bu){var Ru=Bu[Cu],Lu=Ru.toJSON();Ru.name!==""&&(Lu.name=Ru.name),_u.data.attributes[Cu]=Lu}var Ou={},Du=!1;for(var Cu in this.morphAttributes){for(var $u=this.morphAttributes[Cu],ku=[],Fu=0,Nu=$u.length;Fu<Nu;Fu++){var Ru=$u[Fu],Lu=Ru.toJSON();Ru.name!==""&&(Lu.name=Ru.name),ku.push(Lu)}ku.length>0&&(Ou[Cu]=ku,Du=!0)}Du&&(_u.data.morphAttributes=Ou,_u.data.morphTargetsRelative=this.morphTargetsRelative);var Vu=this.groups;Vu.length>0&&(_u.data.groups=JSON.parse(JSON.stringify(Vu)));var Gu=this.boundingSphere;return Gu!==null&&(_u.data.boundingSphere={center:Gu.center.toArray(),radius:Gu.radius}),_u},clone:function(){return new BufferGeometry().copy(this)},copy:function(_u){var Tu,Cu,Pu;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Bu=_u.index;Bu!==null&&this.setIndex(Bu.clone());var Ru=_u.attributes;for(Tu in Ru){var Lu=Ru[Tu];this.setAttribute(Tu,Lu.clone())}var Ou=_u.morphAttributes;for(Tu in Ou){var Du=[],$u=Ou[Tu];for(Cu=0,Pu=$u.length;Cu<Pu;Cu++)Du.push($u[Cu].clone());this.morphAttributes[Tu]=Du}this.morphTargetsRelative=_u.morphTargetsRelative;var ku=_u.groups;for(Cu=0,Pu=ku.length;Cu<Pu;Cu++){var Fu=ku[Cu];this.addGroup(Fu.start,Fu.count,Fu.materialIndex)}var Nu=_u.boundingBox;Nu!==null&&(this.boundingBox=Nu.clone());var Vu=_u.boundingSphere;return Vu!==null&&(this.boundingSphere=Vu.clone()),this.drawRange.start=_u.drawRange.start,this.drawRange.count=_u.drawRange.count,this.userData=_u.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(_u,Tu){Object3D.call(this),this.type="Mesh",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=Tu!==void 0?Tu:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_u.morphTargetInfluences.slice()),_u.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_u.morphTargetDictionary)),this},updateMorphTargets:function(){var _u=this.geometry,Tu,Cu,Pu;if(_u.isBufferGeometry){var Bu=_u.morphAttributes,Ru=Object.keys(Bu);if(Ru.length>0){var Lu=Bu[Ru[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},Tu=0,Cu=Lu.length;Tu<Cu;Tu++)Pu=Lu[Tu].name||String(Tu),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Pu]=Tu}}else{var Ou=_u.morphTargets;Ou!==void 0&&Ou.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(_u,Tu){var Cu=this.geometry,Pu=this.material,Bu=this.matrixWorld;if(Pu!==void 0&&(Cu.boundingSphere===null&&Cu.computeBoundingSphere(),_sphere.copy(Cu.boundingSphere),_sphere.applyMatrix4(Bu),_u.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Bu),_ray.copy(_u.ray).applyMatrix4(_inverseMatrix),!(Cu.boundingBox!==null&&_ray.intersectsBox(Cu.boundingBox)===!1)))){var Ru;if(Cu.isBufferGeometry){var Lu,Ou,Du,$u=Cu.index,ku=Cu.attributes.position,Fu=Cu.morphAttributes.position,Nu=Cu.morphTargetsRelative,Vu=Cu.attributes.uv,Gu=Cu.attributes.uv2,Hu=Cu.groups,ju=Cu.drawRange,Uu,zu,Wu,Qu,qu,Yu,Xc,_h;if($u!==null)if(Array.isArray(Pu))for(Uu=0,Wu=Hu.length;Uu<Wu;Uu++)for(qu=Hu[Uu],Yu=Pu[qu.materialIndex],Xc=Math.max(qu.start,ju.start),_h=Math.min(qu.start+qu.count,ju.start+ju.count),zu=Xc,Qu=_h;zu<Qu;zu+=3)Lu=$u.getX(zu),Ou=$u.getX(zu+1),Du=$u.getX(zu+2),Ru=checkBufferGeometryIntersection(this,Yu,_u,_ray,ku,Fu,Nu,Vu,Gu,Lu,Ou,Du),Ru&&(Ru.faceIndex=Math.floor(zu/3),Ru.face.materialIndex=qu.materialIndex,Tu.push(Ru));else for(Xc=Math.max(0,ju.start),_h=Math.min($u.count,ju.start+ju.count),Uu=Xc,Wu=_h;Uu<Wu;Uu+=3)Lu=$u.getX(Uu),Ou=$u.getX(Uu+1),Du=$u.getX(Uu+2),Ru=checkBufferGeometryIntersection(this,Pu,_u,_ray,ku,Fu,Nu,Vu,Gu,Lu,Ou,Du),Ru&&(Ru.faceIndex=Math.floor(Uu/3),Tu.push(Ru));else if(ku!==void 0)if(Array.isArray(Pu))for(Uu=0,Wu=Hu.length;Uu<Wu;Uu++)for(qu=Hu[Uu],Yu=Pu[qu.materialIndex],Xc=Math.max(qu.start,ju.start),_h=Math.min(qu.start+qu.count,ju.start+ju.count),zu=Xc,Qu=_h;zu<Qu;zu+=3)Lu=zu,Ou=zu+1,Du=zu+2,Ru=checkBufferGeometryIntersection(this,Yu,_u,_ray,ku,Fu,Nu,Vu,Gu,Lu,Ou,Du),Ru&&(Ru.faceIndex=Math.floor(zu/3),Ru.face.materialIndex=qu.materialIndex,Tu.push(Ru));else for(Xc=Math.max(0,ju.start),_h=Math.min(ku.count,ju.start+ju.count),Uu=Xc,Wu=_h;Uu<Wu;Uu+=3)Lu=Uu,Ou=Uu+1,Du=Uu+2,Ru=checkBufferGeometryIntersection(this,Pu,_u,_ray,ku,Fu,Nu,Vu,Gu,Lu,Ou,Du),Ru&&(Ru.faceIndex=Math.floor(Uu/3),Tu.push(Ru))}else if(Cu.isGeometry){var _d,Ku,Xu,Ju=Array.isArray(Pu),Zu=Cu.vertices,_c=Cu.faces,_f,ep=Cu.faceVertexUvs[0];ep.length>0&&(_f=ep);for(var tp=0,op=_c.length;tp<op;tp++){var hp=_c[tp],cp=Ju?Pu[hp.materialIndex]:Pu;if(cp!==void 0&&(_d=Zu[hp.a],Ku=Zu[hp.b],Xu=Zu[hp.c],Ru=checkIntersection(this,cp,_u,_ray,_d,Ku,Xu,_intersectionPoint),Ru)){if(_f&&_f[tp]){var Sp=_f[tp];_uvA.copy(Sp[0]),_uvB.copy(Sp[1]),_uvC.copy(Sp[2]),Ru.uv=Triangle.getUV(_intersectionPoint,_d,Ku,Xu,_uvA,_uvB,_uvC,new Vector2)}Ru.face=hp,Ru.faceIndex=tp,Tu.push(Ru)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){var Du;if(Tu.side===BackSide?Du=Pu.intersectTriangle(Lu,Ru,Bu,!0,Ou):Du=Pu.intersectTriangle(Bu,Ru,Lu,Tu.side!==DoubleSide,Ou),Du===null)return null;_intersectionPointWorld.copy(Ou),_intersectionPointWorld.applyMatrix4(_u.matrixWorld);var $u=Cu.ray.origin.distanceTo(_intersectionPointWorld);return $u<Cu.near||$u>Cu.far?null:{distance:$u,point:_intersectionPointWorld.clone(),object:_u}}function checkBufferGeometryIntersection(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu){_vA.fromBufferAttribute(Bu,$u),_vB.fromBufferAttribute(Bu,ku),_vC.fromBufferAttribute(Bu,Fu);var Nu=_u.morphTargetInfluences;if(Tu.morphTargets&&Ru&&Nu){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Vu=0,Gu=Ru.length;Vu<Gu;Vu++){var Hu=Nu[Vu],ju=Ru[Vu];Hu!==0&&(_tempA.fromBufferAttribute(ju,$u),_tempB.fromBufferAttribute(ju,ku),_tempC.fromBufferAttribute(ju,Fu),Lu?(_morphA.addScaledVector(_tempA,Hu),_morphB.addScaledVector(_tempB,Hu),_morphC.addScaledVector(_tempC,Hu)):(_morphA.addScaledVector(_tempA.sub(_vA),Hu),_morphB.addScaledVector(_tempB.sub(_vB),Hu),_morphC.addScaledVector(_tempC.sub(_vC),Hu)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}_u.isSkinnedMesh&&(_u.boneTransform($u,_vA),_u.boneTransform(ku,_vB),_u.boneTransform(Fu,_vC));var Uu=checkIntersection(_u,Tu,Cu,Pu,_vA,_vB,_vC,_intersectionPoint);if(Uu){Ou&&(_uvA.fromBufferAttribute(Ou,$u),_uvB.fromBufferAttribute(Ou,ku),_uvC.fromBufferAttribute(Ou,Fu),Uu.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Du&&(_uvA.fromBufferAttribute(Du,$u),_uvB.fromBufferAttribute(Du,ku),_uvC.fromBufferAttribute(Du,Fu),Uu.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var zu=new Face3($u,ku,Fu);Triangle.getNormal(_vA,_vB,_vC,zu.normal),Uu.face=zu}return Uu}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(_u){for(var Tu=new Matrix3().getNormalMatrix(_u),Cu=0,Pu=this.vertices.length;Cu<Pu;Cu++){var Bu=this.vertices[Cu];Bu.applyMatrix4(_u)}for(var Cu=0,Pu=this.faces.length;Cu<Pu;Cu++){var Ru=this.faces[Cu];Ru.normal.applyMatrix3(Tu).normalize();for(var Lu=0,Ou=Ru.vertexNormals.length;Lu<Ou;Lu++)Ru.vertexNormals[Lu].applyMatrix3(Tu).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(_u){return _m1$3.makeRotationX(_u),this.applyMatrix4(_m1$3),this},rotateY:function(_u){return _m1$3.makeRotationY(_u),this.applyMatrix4(_m1$3),this},rotateZ:function(_u){return _m1$3.makeRotationZ(_u),this.applyMatrix4(_m1$3),this},translate:function(_u,Tu,Cu){return _m1$3.makeTranslation(_u,Tu,Cu),this.applyMatrix4(_m1$3),this},scale:function(_u,Tu,Cu){return _m1$3.makeScale(_u,Tu,Cu),this.applyMatrix4(_m1$3),this},lookAt:function(_u){return _obj$1.lookAt(_u),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(_u){var Tu=this,Cu=_u.index!==null?_u.index.array:void 0,Pu=_u.attributes;if(Pu.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Bu=Pu.position.array,Ru=Pu.normal!==void 0?Pu.normal.array:void 0,Lu=Pu.color!==void 0?Pu.color.array:void 0,Ou=Pu.uv!==void 0?Pu.uv.array:void 0,Du=Pu.uv2!==void 0?Pu.uv2.array:void 0;Du!==void 0&&(this.faceVertexUvs[1]=[]);for(var $u=0;$u<Bu.length;$u+=3)Tu.vertices.push(new Vector3().fromArray(Bu,$u)),Lu!==void 0&&Tu.colors.push(new Color().fromArray(Lu,$u));function ku(Uu,zu,Wu,Qu){var qu=Lu===void 0?[]:[Tu.colors[Uu].clone(),Tu.colors[zu].clone(),Tu.colors[Wu].clone()],Yu=Ru===void 0?[]:[new Vector3().fromArray(Ru,Uu*3),new Vector3().fromArray(Ru,zu*3),new Vector3().fromArray(Ru,Wu*3)],Xc=new Face3(Uu,zu,Wu,Yu,qu,Qu);Tu.faces.push(Xc),Ou!==void 0&&Tu.faceVertexUvs[0].push([new Vector2().fromArray(Ou,Uu*2),new Vector2().fromArray(Ou,zu*2),new Vector2().fromArray(Ou,Wu*2)]),Du!==void 0&&Tu.faceVertexUvs[1].push([new Vector2().fromArray(Du,Uu*2),new Vector2().fromArray(Du,zu*2),new Vector2().fromArray(Du,Wu*2)])}var Fu=_u.groups;if(Fu.length>0)for(var $u=0;$u<Fu.length;$u++)for(var Nu=Fu[$u],Vu=Nu.start,Gu=Nu.count,Hu=Vu,ju=Vu+Gu;Hu<ju;Hu+=3)Cu!==void 0?ku(Cu[Hu],Cu[Hu+1],Cu[Hu+2],Nu.materialIndex):ku(Hu,Hu+1,Hu+2,Nu.materialIndex);else if(Cu!==void 0)for(var $u=0;$u<Cu.length;$u+=3)ku(Cu[$u],Cu[$u+1],Cu[$u+2]);else for(var $u=0;$u<Bu.length/3;$u+=3)ku($u,$u+1,$u+2);return this.computeFaceNormals(),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var _u=this.boundingSphere.center,Tu=this.boundingSphere.radius,Cu=Tu===0?1:1/Tu,Pu=new Matrix4;return Pu.set(Cu,0,0,-Cu*_u.x,0,Cu,0,-Cu*_u.y,0,0,Cu,-Cu*_u.z,0,0,0,1),this.applyMatrix4(Pu),this},computeFaceNormals:function(){for(var _u=new Vector3,Tu=new Vector3,Cu=0,Pu=this.faces.length;Cu<Pu;Cu++){var Bu=this.faces[Cu],Ru=this.vertices[Bu.a],Lu=this.vertices[Bu.b],Ou=this.vertices[Bu.c];_u.subVectors(Ou,Lu),Tu.subVectors(Ru,Lu),_u.cross(Tu),_u.normalize(),Bu.normal.copy(_u)}},computeVertexNormals:function(_u){_u===void 0&&(_u=!0);var Tu,Cu,Pu,Bu,Ru,Lu;for(Lu=new Array(this.vertices.length),Tu=0,Cu=this.vertices.length;Tu<Cu;Tu++)Lu[Tu]=new Vector3;if(_u){var Ou,Du,$u,ku=new Vector3,Fu=new Vector3;for(Pu=0,Bu=this.faces.length;Pu<Bu;Pu++)Ru=this.faces[Pu],Ou=this.vertices[Ru.a],Du=this.vertices[Ru.b],$u=this.vertices[Ru.c],ku.subVectors($u,Du),Fu.subVectors(Ou,Du),ku.cross(Fu),Lu[Ru.a].add(ku),Lu[Ru.b].add(ku),Lu[Ru.c].add(ku)}else for(this.computeFaceNormals(),Pu=0,Bu=this.faces.length;Pu<Bu;Pu++)Ru=this.faces[Pu],Lu[Ru.a].add(Ru.normal),Lu[Ru.b].add(Ru.normal),Lu[Ru.c].add(Ru.normal);for(Tu=0,Cu=this.vertices.length;Tu<Cu;Tu++)Lu[Tu].normalize();for(Pu=0,Bu=this.faces.length;Pu<Bu;Pu++){Ru=this.faces[Pu];var Nu=Ru.vertexNormals;Nu.length===3?(Nu[0].copy(Lu[Ru.a]),Nu[1].copy(Lu[Ru.b]),Nu[2].copy(Lu[Ru.c])):(Nu[0]=Lu[Ru.a].clone(),Nu[1]=Lu[Ru.b].clone(),Nu[2]=Lu[Ru.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var _u,Tu,Cu;for(this.computeFaceNormals(),_u=0,Tu=this.faces.length;_u<Tu;_u++){Cu=this.faces[_u];var Pu=Cu.vertexNormals;Pu.length===3?(Pu[0].copy(Cu.normal),Pu[1].copy(Cu.normal),Pu[2].copy(Cu.normal)):(Pu[0]=Cu.normal.clone(),Pu[1]=Cu.normal.clone(),Pu[2]=Cu.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var _u,Tu,Cu,Pu,Bu;for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)for(Bu=this.faces[Cu],Bu.__originalFaceNormal?Bu.__originalFaceNormal.copy(Bu.normal):Bu.__originalFaceNormal=Bu.normal.clone(),Bu.__originalVertexNormals||(Bu.__originalVertexNormals=[]),_u=0,Tu=Bu.vertexNormals.length;_u<Tu;_u++)Bu.__originalVertexNormals[_u]?Bu.__originalVertexNormals[_u].copy(Bu.vertexNormals[_u]):Bu.__originalVertexNormals[_u]=Bu.vertexNormals[_u].clone();var Ru=new Geometry;for(Ru.faces=this.faces,_u=0,Tu=this.morphTargets.length;_u<Tu;_u++){if(!this.morphNormals[_u]){this.morphNormals[_u]={},this.morphNormals[_u].faceNormals=[],this.morphNormals[_u].vertexNormals=[];var Lu=this.morphNormals[_u].faceNormals,Ou=this.morphNormals[_u].vertexNormals,$u,ku;for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)$u=new Vector3,ku={a:new Vector3,b:new Vector3,c:new Vector3},Lu.push($u),Ou.push(ku)}var Du=this.morphNormals[_u];Ru.vertices=this.morphTargets[_u].vertices,Ru.computeFaceNormals(),Ru.computeVertexNormals();var $u,ku;for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)Bu=this.faces[Cu],$u=Du.faceNormals[Cu],ku=Du.vertexNormals[Cu],$u.copy(Bu.normal),ku.a.copy(Bu.vertexNormals[0]),ku.b.copy(Bu.vertexNormals[1]),ku.c.copy(Bu.vertexNormals[2])}for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)Bu=this.faces[Cu],Bu.normal=Bu.__originalFaceNormal,Bu.vertexNormals=Bu.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(_u,Tu,Cu){if(!(_u&&_u.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",_u);return}var Pu,Bu=this.vertices.length,Ru=this.vertices,Lu=_u.vertices,Ou=this.faces,Du=_u.faces,$u=this.colors,ku=_u.colors;Cu===void 0&&(Cu=0),Tu!==void 0&&(Pu=new Matrix3().getNormalMatrix(Tu));for(var Fu=0,Nu=Lu.length;Fu<Nu;Fu++){var Vu=Lu[Fu],Gu=Vu.clone();Tu!==void 0&&Gu.applyMatrix4(Tu),Ru.push(Gu)}for(var Fu=0,Nu=ku.length;Fu<Nu;Fu++)$u.push(ku[Fu].clone());for(Fu=0,Nu=Du.length;Fu<Nu;Fu++){var Hu=Du[Fu],ju,Uu,zu,Wu=Hu.vertexNormals,Qu=Hu.vertexColors;ju=new Face3(Hu.a+Bu,Hu.b+Bu,Hu.c+Bu),ju.normal.copy(Hu.normal),Pu!==void 0&&ju.normal.applyMatrix3(Pu).normalize();for(var qu=0,Yu=Wu.length;qu<Yu;qu++)Uu=Wu[qu].clone(),Pu!==void 0&&Uu.applyMatrix3(Pu).normalize(),ju.vertexNormals.push(Uu);ju.color.copy(Hu.color);for(var qu=0,Yu=Qu.length;qu<Yu;qu++)zu=Qu[qu],ju.vertexColors.push(zu.clone());ju.materialIndex=Hu.materialIndex+Cu,Ou.push(ju)}for(var Fu=0,Nu=_u.faceVertexUvs.length;Fu<Nu;Fu++){var Xc=_u.faceVertexUvs[Fu];this.faceVertexUvs[Fu]===void 0&&(this.faceVertexUvs[Fu]=[]);for(var qu=0,Yu=Xc.length;qu<Yu;qu++){for(var _h=Xc[qu],_d=[],Ku=0,Xu=_h.length;Ku<Xu;Ku++)_d.push(_h[Ku].clone());this.faceVertexUvs[Fu].push(_d)}}},mergeMesh:function(_u){if(!(_u&&_u.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",_u);return}_u.matrixAutoUpdate&&_u.updateMatrix(),this.merge(_u.geometry,_u.matrix)},mergeVertices:function(){var _u={},Tu=[],Cu=[],Pu,Bu,Ru=4,Lu=Math.pow(10,Ru),Ou,Du,$u,ku,Fu,Nu;for(Ou=0,Du=this.vertices.length;Ou<Du;Ou++)Pu=this.vertices[Ou],Bu=Math.round(Pu.x*Lu)+"_"+Math.round(Pu.y*Lu)+"_"+Math.round(Pu.z*Lu),_u[Bu]===void 0?(_u[Bu]=Ou,Tu.push(this.vertices[Ou]),Cu[Ou]=Tu.length-1):Cu[Ou]=Cu[_u[Bu]];var Vu=[];for(Ou=0,Du=this.faces.length;Ou<Du;Ou++){$u=this.faces[Ou],$u.a=Cu[$u.a],$u.b=Cu[$u.b],$u.c=Cu[$u.c],ku=[$u.a,$u.b,$u.c];for(var Gu=0;Gu<3;Gu++)if(ku[Gu]===ku[(Gu+1)%3]){Vu.push(Ou);break}}for(Ou=Vu.length-1;Ou>=0;Ou--){var Hu=Vu[Ou];for(this.faces.splice(Hu,1),Fu=0,Nu=this.faceVertexUvs.length;Fu<Nu;Fu++)this.faceVertexUvs[Fu].splice(Hu,1)}var ju=this.vertices.length-Tu.length;return this.vertices=Tu,ju},setFromPoints:function(_u){this.vertices=[];for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=_u[Tu];this.vertices.push(new Vector3(Pu.x,Pu.y,Pu.z||0))}return this},sortFacesByMaterialIndex:function(){for(var _u=this.faces,Tu=_u.length,Cu=0;Cu<Tu;Cu++)_u[Cu]._id=Cu;function Pu($u,ku){return $u.materialIndex-ku.materialIndex}_u.sort(Pu);var Bu=this.faceVertexUvs[0],Ru=this.faceVertexUvs[1],Lu,Ou;Bu&&Bu.length===Tu&&(Lu=[]),Ru&&Ru.length===Tu&&(Ou=[]);for(var Cu=0;Cu<Tu;Cu++){var Du=_u[Cu]._id;Lu&&Lu.push(Bu[Du]),Ou&&Ou.push(Ru[Du])}Lu&&(this.faceVertexUvs[0]=Lu),Ou&&(this.faceVertexUvs[1]=Ou)},toJSON:function(){var _u={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),this.parameters!==void 0){var Tu=this.parameters;for(var Cu in Tu)Tu[Cu]!==void 0&&(_u[Cu]=Tu[Cu]);return _u}for(var Pu=[],Bu=0;Bu<this.vertices.length;Bu++){var Ru=this.vertices[Bu];Pu.push(Ru.x,Ru.y,Ru.z)}for(var Lu=[],Ou=[],Du={},$u=[],ku={},Fu=[],Nu={},Bu=0;Bu<this.faces.length;Bu++){var Vu=this.faces[Bu],Gu=!0,Hu=!1,ju=this.faceVertexUvs[0][Bu]!==void 0,Uu=Vu.normal.length()>0,zu=Vu.vertexNormals.length>0,Wu=Vu.color.r!==1||Vu.color.g!==1||Vu.color.b!==1,Qu=Vu.vertexColors.length>0,qu=0;if(qu=_d(qu,0,0),qu=_d(qu,1,Gu),qu=_d(qu,2,Hu),qu=_d(qu,3,ju),qu=_d(qu,4,Uu),qu=_d(qu,5,zu),qu=_d(qu,6,Wu),qu=_d(qu,7,Qu),Lu.push(qu),Lu.push(Vu.a,Vu.b,Vu.c),Lu.push(Vu.materialIndex),ju){var Yu=this.faceVertexUvs[0][Bu];Lu.push(Ju(Yu[0]),Ju(Yu[1]),Ju(Yu[2]))}if(Uu&&Lu.push(Ku(Vu.normal)),zu){var Xc=Vu.vertexNormals;Lu.push(Ku(Xc[0]),Ku(Xc[1]),Ku(Xc[2]))}if(Wu&&Lu.push(Xu(Vu.color)),Qu){var _h=Vu.vertexColors;Lu.push(Xu(_h[0]),Xu(_h[1]),Xu(_h[2]))}}function _d(Zu,_c,_f){return _f?Zu|1<<_c:Zu&~(1<<_c)}function Ku(Zu){var _c=Zu.x.toString()+Zu.y.toString()+Zu.z.toString();return Du[_c]!==void 0||(Du[_c]=Ou.length/3,Ou.push(Zu.x,Zu.y,Zu.z)),Du[_c]}function Xu(Zu){var _c=Zu.r.toString()+Zu.g.toString()+Zu.b.toString();return ku[_c]!==void 0||(ku[_c]=$u.length,$u.push(Zu.getHex())),ku[_c]}function Ju(Zu){var _c=Zu.x.toString()+Zu.y.toString();return Nu[_c]!==void 0||(Nu[_c]=Fu.length/2,Fu.push(Zu.x,Zu.y)),Nu[_c]}return _u.data={},_u.data.vertices=Pu,_u.data.normals=Ou,$u.length>0&&(_u.data.colors=$u),Fu.length>0&&(_u.data.uvs=[Fu]),_u.data.faces=Lu,_u},clone:function(){return new Geometry().copy(this)},copy:function(_u){var Tu,Cu,Pu,Bu,Ru,Lu;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Ou=_u.vertices;for(Tu=0,Cu=Ou.length;Tu<Cu;Tu++)this.vertices.push(Ou[Tu].clone());var Du=_u.colors;for(Tu=0,Cu=Du.length;Tu<Cu;Tu++)this.colors.push(Du[Tu].clone());var $u=_u.faces;for(Tu=0,Cu=$u.length;Tu<Cu;Tu++)this.faces.push($u[Tu].clone());for(Tu=0,Cu=_u.faceVertexUvs.length;Tu<Cu;Tu++){var ku=_u.faceVertexUvs[Tu];for(this.faceVertexUvs[Tu]===void 0&&(this.faceVertexUvs[Tu]=[]),Pu=0,Bu=ku.length;Pu<Bu;Pu++){var Fu=ku[Pu],Nu=[];for(Ru=0,Lu=Fu.length;Ru<Lu;Ru++){var Vu=Fu[Ru];Nu.push(Vu.clone())}this.faceVertexUvs[Tu].push(Nu)}}var Gu=_u.morphTargets;for(Tu=0,Cu=Gu.length;Tu<Cu;Tu++){var Hu={};if(Hu.name=Gu[Tu].name,Gu[Tu].vertices!==void 0)for(Hu.vertices=[],Pu=0,Bu=Gu[Tu].vertices.length;Pu<Bu;Pu++)Hu.vertices.push(Gu[Tu].vertices[Pu].clone());if(Gu[Tu].normals!==void 0)for(Hu.normals=[],Pu=0,Bu=Gu[Tu].normals.length;Pu<Bu;Pu++)Hu.normals.push(Gu[Tu].normals[Pu].clone());this.morphTargets.push(Hu)}var ju=_u.morphNormals;for(Tu=0,Cu=ju.length;Tu<Cu;Tu++){var Uu={};if(ju[Tu].vertexNormals!==void 0)for(Uu.vertexNormals=[],Pu=0,Bu=ju[Tu].vertexNormals.length;Pu<Bu;Pu++){var zu=ju[Tu].vertexNormals[Pu],Wu={};Wu.a=zu.a.clone(),Wu.b=zu.b.clone(),Wu.c=zu.c.clone(),Uu.vertexNormals.push(Wu)}if(ju[Tu].faceNormals!==void 0)for(Uu.faceNormals=[],Pu=0,Bu=ju[Tu].faceNormals.length;Pu<Bu;Pu++)Uu.faceNormals.push(ju[Tu].faceNormals[Pu].clone());this.morphNormals.push(Uu)}var Qu=_u.skinWeights;for(Tu=0,Cu=Qu.length;Tu<Cu;Tu++)this.skinWeights.push(Qu[Tu].clone());var qu=_u.skinIndices;for(Tu=0,Cu=qu.length;Tu<Cu;Tu++)this.skinIndices.push(qu[Tu].clone());var Yu=_u.lineDistances;for(Tu=0,Cu=Yu.length;Tu<Cu;Tu++)this.lineDistances.push(Yu[Tu]);var Xc=_u.boundingBox;Xc!==null&&(this.boundingBox=Xc.clone());var _h=_u.boundingSphere;return _h!==null&&(this.boundingSphere=_h.clone()),this.elementsNeedUpdate=_u.elementsNeedUpdate,this.verticesNeedUpdate=_u.verticesNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.lineDistancesNeedUpdate=_u.lineDistancesNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(Tu,Cu,Pu,Bu,Ru,Lu){super(),this.type="BoxGeometry",this.parameters={width:Tu,height:Cu,depth:Pu,widthSegments:Bu,heightSegments:Ru,depthSegments:Lu},this.fromBufferGeometry(new BoxBufferGeometry(Tu,Cu,Pu,Bu,Ru,Lu)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(Tu,Cu,Pu,Bu,Ru,Lu){super(),this.type="BoxBufferGeometry",this.parameters={width:Tu,height:Cu,depth:Pu,widthSegments:Bu,heightSegments:Ru,depthSegments:Lu};const Ou=this;Tu=Tu||1,Cu=Cu||1,Pu=Pu||1,Bu=Math.floor(Bu)||1,Ru=Math.floor(Ru)||1,Lu=Math.floor(Lu)||1;const Du=[],$u=[],ku=[],Fu=[];let Nu=0,Vu=0;Gu("z","y","x",-1,-1,Pu,Cu,Tu,Lu,Ru,0),Gu("z","y","x",1,-1,Pu,Cu,-Tu,Lu,Ru,1),Gu("x","z","y",1,1,Tu,Pu,Cu,Bu,Lu,2),Gu("x","z","y",1,-1,Tu,Pu,-Cu,Bu,Lu,3),Gu("x","y","z",1,-1,Tu,Cu,Pu,Bu,Ru,4),Gu("x","y","z",-1,-1,Tu,Cu,-Pu,Bu,Ru,5),this.setIndex(Du),this.setAttribute("position",new Float32BufferAttribute($u,3)),this.setAttribute("normal",new Float32BufferAttribute(ku,3)),this.setAttribute("uv",new Float32BufferAttribute(Fu,2));function Gu(Hu,ju,Uu,zu,Wu,Qu,qu,Yu,Xc,_h,_d){const Ku=Qu/Xc,Xu=qu/_h,Ju=Qu/2,Zu=qu/2,_c=Yu/2,_f=Xc+1,ep=_h+1;let tp=0,op=0;const hp=new Vector3;for(let cp=0;cp<ep;cp++){const Sp=cp*Xu-Zu;for(let yp=0;yp<_f;yp++){const Rp=yp*Ku-Ju;hp[Hu]=Rp*zu,hp[ju]=Sp*Wu,hp[Uu]=_c,$u.push(hp.x,hp.y,hp.z),hp[Hu]=0,hp[ju]=0,hp[Uu]=Yu>0?1:-1,ku.push(hp.x,hp.y,hp.z),Fu.push(yp/Xc),Fu.push(1-cp/_h),tp+=1}}for(let cp=0;cp<_h;cp++)for(let Sp=0;Sp<Xc;Sp++){const yp=Nu+Sp+_f*cp,Rp=Nu+Sp+_f*(cp+1),wp=Nu+(Sp+1)+_f*(cp+1),Pp=Nu+(Sp+1)+_f*cp;Du.push(yp,Rp,Pp),Du.push(Rp,wp,Pp),op+=6}Ou.addGroup(Vu,op,_d),Vu+=op,Nu+=tp}}}function cloneUniforms(_u){var Tu={};for(var Cu in _u){Tu[Cu]={};for(var Pu in _u[Cu]){var Bu=_u[Cu][Pu];Bu&&(Bu.isColor||Bu.isMatrix3||Bu.isMatrix4||Bu.isVector2||Bu.isVector3||Bu.isVector4||Bu.isTexture)?Tu[Cu][Pu]=Bu.clone():Array.isArray(Bu)?Tu[Cu][Pu]=Bu.slice():Tu[Cu][Pu]=Bu}}return Tu}function mergeUniforms(_u){for(var Tu={},Cu=0;Cu<_u.length;Cu++){var Pu=cloneUniforms(_u[Cu]);for(var Bu in Pu)Tu[Bu]=Pu[Bu]}return Tu}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(_u){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,_u!==void 0&&(_u.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(_u))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.fragmentShader=_u.fragmentShader,this.vertexShader=_u.vertexShader,this.uniforms=cloneUniforms(_u.uniforms),this.defines=Object.assign({},_u.defines),this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.lights=_u.lights,this.clipping=_u.clipping,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.extensions=Object.assign({},_u.extensions),this};ShaderMaterial.prototype.toJSON=function(_u){var Tu=Material.prototype.toJSON.call(this,_u);Tu.uniforms={};for(var Cu in this.uniforms){var Pu=this.uniforms[Cu],Bu=Pu.value;Bu&&Bu.isTexture?Tu.uniforms[Cu]={type:"t",value:Bu.toJSON(_u).uuid}:Bu&&Bu.isColor?Tu.uniforms[Cu]={type:"c",value:Bu.getHex()}:Bu&&Bu.isVector2?Tu.uniforms[Cu]={type:"v2",value:Bu.toArray()}:Bu&&Bu.isVector3?Tu.uniforms[Cu]={type:"v3",value:Bu.toArray()}:Bu&&Bu.isVector4?Tu.uniforms[Cu]={type:"v4",value:Bu.toArray()}:Bu&&Bu.isMatrix3?Tu.uniforms[Cu]={type:"m3",value:Bu.toArray()}:Bu&&Bu.isMatrix4?Tu.uniforms[Cu]={type:"m4",value:Bu.toArray()}:Tu.uniforms[Cu]={value:Bu}}Object.keys(this.defines).length>0&&(Tu.defines=this.defines),Tu.vertexShader=this.vertexShader,Tu.fragmentShader=this.fragmentShader;var Ru={};for(var Lu in this.extensions)this.extensions[Lu]===!0&&(Ru[Lu]=!0);return Object.keys(Ru).length>0&&(Tu.extensions=Ru),Tu};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(_u,Tu){return Object3D.prototype.copy.call(this,_u,Tu),this.matrixWorldInverse.copy(_u.matrixWorldInverse),this.projectionMatrix.copy(_u.projectionMatrix),this.projectionMatrixInverse.copy(_u.projectionMatrixInverse),this},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var Tu=this.matrixWorld.elements;return _u.set(-Tu[8],-Tu[9],-Tu[10]).normalize()},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(_u,Tu){Object3D.prototype.updateWorldMatrix.call(this,_u,Tu),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(_u,Tu,Cu,Pu){Camera.call(this),this.type="PerspectiveCamera",this.fov=_u!==void 0?_u:50,this.zoom=1,this.near=Cu!==void 0?Cu:.1,this.far=Pu!==void 0?Pu:2e3,this.focus=10,this.aspect=Tu!==void 0?Tu:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(_u,Tu){return Camera.prototype.copy.call(this,_u,Tu),this.fov=_u.fov,this.zoom=_u.zoom,this.near=_u.near,this.far=_u.far,this.focus=_u.focus,this.aspect=_u.aspect,this.view=_u.view===null?null:Object.assign({},_u.view),this.filmGauge=_u.filmGauge,this.filmOffset=_u.filmOffset,this},setFocalLength:function(_u){var Tu=.5*this.getFilmHeight()/_u;this.fov=MathUtils.RAD2DEG*2*Math.atan(Tu),this.updateProjectionMatrix()},getFocalLength:function(){var _u=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_u},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(_u,Tu,Cu,Pu,Bu,Ru){this.aspect=_u/Tu,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=Tu,this.view.offsetX=Cu,this.view.offsetY=Pu,this.view.width=Bu,this.view.height=Ru,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=this.near,Tu=_u*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,Cu=2*Tu,Pu=this.aspect*Cu,Bu=-.5*Pu,Ru=this.view;if(this.view!==null&&this.view.enabled){var Lu=Ru.fullWidth,Ou=Ru.fullHeight;Bu+=Ru.offsetX*Pu/Lu,Tu-=Ru.offsetY*Cu/Ou,Pu*=Ru.width/Lu,Cu*=Ru.height/Ou}var Du=this.filmOffset;Du!==0&&(Bu+=_u*Du/this.getFilmWidth()),this.projectionMatrix.makePerspective(Bu,Bu+Pu,Tu,Tu-Cu,_u,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var Tu=Object3D.prototype.toJSON.call(this,_u);return Tu.object.fov=this.fov,Tu.object.zoom=this.zoom,Tu.object.near=this.near,Tu.object.far=this.far,Tu.object.focus=this.focus,Tu.object.aspect=this.aspect,this.view!==null&&(Tu.object.view=Object.assign({},this.view)),Tu.object.filmGauge=this.filmGauge,Tu.object.filmOffset=this.filmOffset,Tu}});var fov=90,aspect=1;function CubeCamera(_u,Tu,Cu){if(Object3D.call(this),this.type="CubeCamera",Cu.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=Cu;var Pu=new PerspectiveCamera(fov,aspect,_u,Tu);Pu.layers=this.layers,Pu.up.set(0,-1,0),Pu.lookAt(new Vector3(1,0,0)),this.add(Pu);var Bu=new PerspectiveCamera(fov,aspect,_u,Tu);Bu.layers=this.layers,Bu.up.set(0,-1,0),Bu.lookAt(new Vector3(-1,0,0)),this.add(Bu);var Ru=new PerspectiveCamera(fov,aspect,_u,Tu);Ru.layers=this.layers,Ru.up.set(0,0,1),Ru.lookAt(new Vector3(0,1,0)),this.add(Ru);var Lu=new PerspectiveCamera(fov,aspect,_u,Tu);Lu.layers=this.layers,Lu.up.set(0,0,-1),Lu.lookAt(new Vector3(0,-1,0)),this.add(Lu);var Ou=new PerspectiveCamera(fov,aspect,_u,Tu);Ou.layers=this.layers,Ou.up.set(0,-1,0),Ou.lookAt(new Vector3(0,0,1)),this.add(Ou);var Du=new PerspectiveCamera(fov,aspect,_u,Tu);Du.layers=this.layers,Du.up.set(0,-1,0),Du.lookAt(new Vector3(0,0,-1)),this.add(Du),this.update=function($u,ku){this.parent===null&&this.updateMatrixWorld();var Fu=$u.xr.enabled,Nu=$u.getRenderTarget();$u.xr.enabled=!1;var Vu=Cu.texture.generateMipmaps;Cu.texture.generateMipmaps=!1,$u.setRenderTarget(Cu,0),$u.render(ku,Pu),$u.setRenderTarget(Cu,1),$u.render(ku,Bu),$u.setRenderTarget(Cu,2),$u.render(ku,Ru),$u.setRenderTarget(Cu,3),$u.render(ku,Lu),$u.setRenderTarget(Cu,4),$u.render(ku,Ou),Cu.texture.generateMipmaps=Vu,$u.setRenderTarget(Cu,5),$u.render(ku,Du),$u.setRenderTarget(Nu),$u.xr.enabled=Fu},this.clear=function($u,ku,Fu,Nu){for(var Vu=$u.getRenderTarget(),Gu=0;Gu<6;Gu++)$u.setRenderTarget(Cu,Gu),$u.clear(ku,Fu,Nu);$u.setRenderTarget(Vu)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(_u,Tu,Cu){Number.isInteger(Tu)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),Tu=Cu),WebGLRenderTarget.call(this,_u,_u,Tu)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(_u,Tu){this.texture.type=Tu.type,this.texture.format=Tu.format,this.texture.encoding=Tu.encoding;var Cu=new Scene,Pu={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Bu=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Pu.uniforms),vertexShader:Pu.vertexShader,fragmentShader:Pu.fragmentShader,side:BackSide,blending:NoBlending});Bu.uniforms.tEquirect.value=Tu;var Ru=new Mesh(new BoxBufferGeometry(5,5,5),Bu);Cu.add(Ru);var Lu=new CubeCamera(1,10,this);return Lu.update(_u,Cu),Ru.geometry.dispose(),Ru.material.dispose(),this};function DataTexture(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu){Texture.call(this,null,Ru,Lu,Ou,Du,$u,Pu,Bu,ku,Fu),this.image={data:_u||null,width:Tu||1,height:Cu||1},this.magFilter=Du!==void 0?Du:NearestFilter,this.minFilter=$u!==void 0?$u:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(_u,Tu,Cu,Pu,Bu,Ru){this.planes=[_u!==void 0?_u:new Plane,Tu!==void 0?Tu:new Plane,Cu!==void 0?Cu:new Plane,Pu!==void 0?Pu:new Plane,Bu!==void 0?Bu:new Plane,Ru!==void 0?Ru:new Plane]}Object.assign(Frustum.prototype,{set:function(_u,Tu,Cu,Pu,Bu,Ru){var Lu=this.planes;return Lu[0].copy(_u),Lu[1].copy(Tu),Lu[2].copy(Cu),Lu[3].copy(Pu),Lu[4].copy(Bu),Lu[5].copy(Ru),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){for(var Tu=this.planes,Cu=0;Cu<6;Cu++)Tu[Cu].copy(_u.planes[Cu]);return this},setFromProjectionMatrix:function(_u){var Tu=this.planes,Cu=_u.elements,Pu=Cu[0],Bu=Cu[1],Ru=Cu[2],Lu=Cu[3],Ou=Cu[4],Du=Cu[5],$u=Cu[6],ku=Cu[7],Fu=Cu[8],Nu=Cu[9],Vu=Cu[10],Gu=Cu[11],Hu=Cu[12],ju=Cu[13],Uu=Cu[14],zu=Cu[15];return Tu[0].setComponents(Lu-Pu,ku-Ou,Gu-Fu,zu-Hu).normalize(),Tu[1].setComponents(Lu+Pu,ku+Ou,Gu+Fu,zu+Hu).normalize(),Tu[2].setComponents(Lu+Bu,ku+Du,Gu+Nu,zu+ju).normalize(),Tu[3].setComponents(Lu-Bu,ku-Du,Gu-Nu,zu-ju).normalize(),Tu[4].setComponents(Lu-Ru,ku-$u,Gu-Vu,zu-Uu).normalize(),Tu[5].setComponents(Lu+Ru,ku+$u,Gu+Vu,zu+Uu).normalize(),this},intersectsObject:function(_u){var Tu=_u.geometry;return Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere$1.copy(Tu.boundingSphere).applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(_u){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(_u){for(var Tu=this.planes,Cu=_u.center,Pu=-_u.radius,Bu=0;Bu<6;Bu++){var Ru=Tu[Bu].distanceToPoint(Cu);if(Ru<Pu)return!1}return!0},intersectsBox:function(_u){for(var Tu=this.planes,Cu=0;Cu<6;Cu++){var Pu=Tu[Cu];if(_vector$5.x=Pu.normal.x>0?_u.max.x:_u.min.x,_vector$5.y=Pu.normal.y>0?_u.max.y:_u.min.y,_vector$5.z=Pu.normal.z>0?_u.max.z:_u.min.z,Pu.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(_u){for(var Tu=this.planes,Cu=0;Cu<6;Cu++)if(Tu[Cu].distanceToPoint(_u)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var _u=null,Tu=!1,Cu=null;function Pu(Bu,Ru){Tu!==!1&&(Cu(Bu,Ru),_u.requestAnimationFrame(Pu))}return{start:function(){Tu!==!0&&Cu!==null&&(_u.requestAnimationFrame(Pu),Tu=!0)},stop:function(){Tu=!1},setAnimationLoop:function(Bu){Cu=Bu},setContext:function(Bu){_u=Bu}}}function WebGLAttributes(_u,Tu){var Cu=Tu.isWebGL2,Pu=new WeakMap;function Bu($u,ku){var Fu=$u.array,Nu=$u.usage,Vu=_u.createBuffer();_u.bindBuffer(ku,Vu),_u.bufferData(ku,Fu,Nu),$u.onUploadCallback();var Gu=5126;return Fu instanceof Float32Array?Gu=5126:Fu instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Fu instanceof Uint16Array?Gu=5123:Fu instanceof Int16Array?Gu=5122:Fu instanceof Uint32Array?Gu=5125:Fu instanceof Int32Array?Gu=5124:Fu instanceof Int8Array?Gu=5120:Fu instanceof Uint8Array&&(Gu=5121),{buffer:Vu,type:Gu,bytesPerElement:Fu.BYTES_PER_ELEMENT,version:$u.version}}function Ru($u,ku,Fu){var Nu=ku.array,Vu=ku.updateRange;_u.bindBuffer(Fu,$u),Vu.count===-1?_u.bufferSubData(Fu,0,Nu):(Cu?_u.bufferSubData(Fu,Vu.offset*Nu.BYTES_PER_ELEMENT,Nu,Vu.offset,Vu.count):_u.bufferSubData(Fu,Vu.offset*Nu.BYTES_PER_ELEMENT,Nu.subarray(Vu.offset,Vu.offset+Vu.count)),Vu.count=-1)}function Lu($u){return $u.isInterleavedBufferAttribute&&($u=$u.data),Pu.get($u)}function Ou($u){$u.isInterleavedBufferAttribute&&($u=$u.data);var ku=Pu.get($u);ku&&(_u.deleteBuffer(ku.buffer),Pu.delete($u))}function Du($u,ku){$u.isInterleavedBufferAttribute&&($u=$u.data);var Fu=Pu.get($u);Fu===void 0?Pu.set($u,Bu($u,ku)):Fu.version<$u.version&&(Ru(Fu.buffer,$u,ku),Fu.version=$u.version)}return{get:Lu,remove:Ou,update:Du}}function PlaneGeometry(_u,Tu,Cu,Pu){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:_u,height:Tu,widthSegments:Cu,heightSegments:Pu},this.fromBufferGeometry(new PlaneBufferGeometry(_u,Tu,Cu,Pu)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(_u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:_u,height:Tu,widthSegments:Cu,heightSegments:Pu},_u=_u||1,Tu=Tu||1;var Bu=_u/2,Ru=Tu/2,Lu=Math.floor(Cu)||1,Ou=Math.floor(Pu)||1,Du=Lu+1,$u=Ou+1,ku=_u/Lu,Fu=Tu/Ou,Nu,Vu,Gu=[],Hu=[],ju=[],Uu=[];for(Vu=0;Vu<$u;Vu++){var zu=Vu*Fu-Ru;for(Nu=0;Nu<Du;Nu++){var Wu=Nu*ku-Bu;Hu.push(Wu,-zu,0),ju.push(0,0,1),Uu.push(Nu/Lu),Uu.push(1-Vu/Ou)}}for(Vu=0;Vu<Ou;Vu++)for(Nu=0;Nu<Lu;Nu++){var Qu=Nu+Du*Vu,qu=Nu+Du*(Vu+1),Yu=Nu+1+Du*(Vu+1),Xc=Nu+1+Du*Vu;Gu.push(Qu,qu,Xc),Gu.push(qu,Yu,Xc)}this.setIndex(Gu),this.setAttribute("position",new Float32BufferAttribute(Hu,3)),this.setAttribute("normal",new Float32BufferAttribute(ju,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(_u,Tu,Cu,Pu){var Bu=new Color(0),Ru=0,Lu,Ou,Du=null,$u=0,ku=null;function Fu(Vu,Gu,Hu,ju){var Uu=Gu.background,zu=_u.xr,Wu=zu.getSession&&zu.getSession();if(Wu&&Wu.environmentBlendMode==="additive"&&(Uu=null),Uu===null?Nu(Bu,Ru):Uu&&Uu.isColor&&(Nu(Uu,1),ju=!0),(_u.autoClear||ju)&&_u.clear(_u.autoClearColor,_u.autoClearDepth,_u.autoClearStencil),Uu&&(Uu.isCubeTexture||Uu.isWebGLCubeRenderTarget||Uu.mapping===CubeUVReflectionMapping)){Ou===void 0&&(Ou=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Ou.geometry.deleteAttribute("normal"),Ou.geometry.deleteAttribute("uv"),Ou.onBeforeRender=function(qu,Yu,Xc){this.matrixWorld.copyPosition(Xc.matrixWorld)},Object.defineProperty(Ou.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Cu.update(Ou));var Qu=Uu.isWebGLCubeRenderTarget?Uu.texture:Uu;Ou.material.uniforms.envMap.value=Qu,Ou.material.uniforms.flipEnvMap.value=Qu.isCubeTexture?-1:1,(Du!==Uu||$u!==Qu.version||ku!==_u.toneMapping)&&(Ou.material.needsUpdate=!0,Du=Uu,$u=Qu.version,ku=_u.toneMapping),Vu.unshift(Ou,Ou.geometry,Ou.material,0,0,null)}else Uu&&Uu.isTexture&&(Lu===void 0&&(Lu=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Lu.geometry.deleteAttribute("normal"),Object.defineProperty(Lu.material,"map",{get:function(){return this.uniforms.t2D.value}}),Cu.update(Lu)),Lu.material.uniforms.t2D.value=Uu,Uu.matrixAutoUpdate===!0&&Uu.updateMatrix(),Lu.material.uniforms.uvTransform.value.copy(Uu.matrix),(Du!==Uu||$u!==Uu.version||ku!==_u.toneMapping)&&(Lu.material.needsUpdate=!0,Du=Uu,$u=Uu.version,ku=_u.toneMapping),Vu.unshift(Lu,Lu.geometry,Lu.material,0,0,null))}function Nu(Vu,Gu){Tu.buffers.color.setClear(Vu.r,Vu.g,Vu.b,Gu,Pu)}return{getClearColor:function(){return Bu},setClearColor:function(Vu,Gu){Bu.set(Vu),Ru=Gu!==void 0?Gu:1,Nu(Bu,Ru)},getClearAlpha:function(){return Ru},setClearAlpha:function(Vu){Ru=Vu,Nu(Bu,Ru)},render:Fu}}function WebGLBufferRenderer(_u,Tu,Cu,Pu){var Bu=Pu.isWebGL2,Ru;function Lu($u){Ru=$u}function Ou($u,ku){_u.drawArrays(Ru,$u,ku),Cu.update(ku,Ru)}function Du($u,ku,Fu,Nu){if(Nu!==0){var Vu,Gu;if(Bu)Vu=_u,Gu="drawArraysInstanced";else if(Vu=Tu.get("ANGLE_instanced_arrays"),Gu="drawArraysInstancedANGLE",Vu===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Vu[Gu](Ru,ku,Fu,Nu),Cu.update(Fu,Ru,Nu)}}this.setMode=Lu,this.render=Ou,this.renderInstances=Du}function WebGLCapabilities(_u,Tu,Cu){var Pu;function Bu(){if(Pu!==void 0)return Pu;var Yu=Tu.get("EXT_texture_filter_anisotropic");return Yu!==null?Pu=_u.getParameter(Yu.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Pu=0,Pu}function Ru(Yu){if(Yu==="highp"){if(_u.getShaderPrecisionFormat(35633,36338).precision>0&&_u.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Yu="mediump"}return Yu==="mediump"&&_u.getShaderPrecisionFormat(35633,36337).precision>0&&_u.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Lu=typeof WebGL2RenderingContext!="undefined"&&_u instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&_u instanceof WebGL2ComputeRenderingContext,Ou=Cu.precision!==void 0?Cu.precision:"highp",Du=Ru(Ou);Du!==Ou&&(console.warn("THREE.WebGLRenderer:",Ou,"not supported, using",Du,"instead."),Ou=Du);var $u=Cu.logarithmicDepthBuffer===!0,ku=_u.getParameter(34930),Fu=_u.getParameter(35660),Nu=_u.getParameter(3379),Vu=_u.getParameter(34076),Gu=_u.getParameter(34921),Hu=_u.getParameter(36347),ju=_u.getParameter(36348),Uu=_u.getParameter(36349),zu=Fu>0,Wu=Lu||!!Tu.get("OES_texture_float"),Qu=zu&&Wu,qu=Lu?_u.getParameter(36183):0;return{isWebGL2:Lu,getMaxAnisotropy:Bu,getMaxPrecision:Ru,precision:Ou,logarithmicDepthBuffer:$u,maxTextures:ku,maxVertexTextures:Fu,maxTextureSize:Nu,maxCubemapSize:Vu,maxAttributes:Gu,maxVertexUniforms:Hu,maxVaryings:ju,maxFragmentUniforms:Uu,vertexTextures:zu,floatFragmentTextures:Wu,floatVertexTextures:Qu,maxSamples:qu}}function WebGLClipping(){var _u=this,Tu=null,Cu=0,Pu=!1,Bu=!1,Ru=new Plane,Lu=new Matrix3,Ou={value:null,needsUpdate:!1};this.uniform=Ou,this.numPlanes=0,this.numIntersection=0,this.init=function(ku,Fu,Nu){var Vu=ku.length!==0||Fu||Cu!==0||Pu;return Pu=Fu,Tu=$u(ku,Nu,0),Cu=ku.length,Vu},this.beginShadows=function(){Bu=!0,$u(null)},this.endShadows=function(){Bu=!1,Du()},this.setState=function(ku,Fu,Nu,Vu,Gu,Hu){if(!Pu||ku===null||ku.length===0||Bu&&!Nu)Bu?$u(null):Du();else{var ju=Bu?0:Cu,Uu=ju*4,zu=Gu.clippingState||null;Ou.value=zu,zu=$u(ku,Vu,Uu,Hu);for(var Wu=0;Wu!==Uu;++Wu)zu[Wu]=Tu[Wu];Gu.clippingState=zu,this.numIntersection=Fu?this.numPlanes:0,this.numPlanes+=ju}};function Du(){Ou.value!==Tu&&(Ou.value=Tu,Ou.needsUpdate=Cu>0),_u.numPlanes=Cu,_u.numIntersection=0}function $u(ku,Fu,Nu,Vu){var Gu=ku!==null?ku.length:0,Hu=null;if(Gu!==0){if(Hu=Ou.value,Vu!==!0||Hu===null){var ju=Nu+Gu*4,Uu=Fu.matrixWorldInverse;Lu.getNormalMatrix(Uu),(Hu===null||Hu.length<ju)&&(Hu=new Float32Array(ju));for(var zu=0,Wu=Nu;zu!==Gu;++zu,Wu+=4)Ru.copy(ku[zu]).applyMatrix4(Uu,Lu),Ru.normal.toArray(Hu,Wu),Hu[Wu+3]=Ru.constant}Ou.value=Hu,Ou.needsUpdate=!0}return _u.numPlanes=Gu,_u.numIntersection=0,Hu}}function WebGLExtensions(_u){var Tu={};return{get:function(Cu){if(Tu[Cu]!==void 0)return Tu[Cu];var Pu;switch(Cu){case"WEBGL_depth_texture":Pu=_u.getExtension("WEBGL_depth_texture")||_u.getExtension("MOZ_WEBGL_depth_texture")||_u.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Pu=_u.getExtension("EXT_texture_filter_anisotropic")||_u.getExtension("MOZ_EXT_texture_filter_anisotropic")||_u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Pu=_u.getExtension("WEBGL_compressed_texture_s3tc")||_u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Pu=_u.getExtension("WEBGL_compressed_texture_pvrtc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Pu=_u.getExtension(Cu)}return Pu===null&&console.warn("THREE.WebGLRenderer: "+Cu+" extension not supported."),Tu[Cu]=Pu,Pu}}}function WebGLGeometries(_u,Tu,Cu){var Pu=new WeakMap,Bu=new WeakMap;function Ru(ku){var Fu=ku.target,Nu=Pu.get(Fu);Nu.index!==null&&Tu.remove(Nu.index);for(var Vu in Nu.attributes)Tu.remove(Nu.attributes[Vu]);Fu.removeEventListener("dispose",Ru),Pu.delete(Fu);var Gu=Bu.get(Nu);Gu&&(Tu.remove(Gu),Bu.delete(Nu)),Cu.memory.geometries--}function Lu(ku,Fu){var Nu=Pu.get(Fu);return Nu||(Fu.addEventListener("dispose",Ru),Fu.isBufferGeometry?Nu=Fu:Fu.isGeometry&&(Fu._bufferGeometry===void 0&&(Fu._bufferGeometry=new BufferGeometry().setFromObject(ku)),Nu=Fu._bufferGeometry),Pu.set(Fu,Nu),Cu.memory.geometries++,Nu)}function Ou(ku){var Fu=ku.index,Nu=ku.attributes;Fu!==null&&Tu.update(Fu,34963);for(var Vu in Nu)Tu.update(Nu[Vu],34962);var Gu=ku.morphAttributes;for(var Vu in Gu)for(var Hu=Gu[Vu],ju=0,Uu=Hu.length;ju<Uu;ju++)Tu.update(Hu[ju],34962)}function Du(ku){var Fu=[],Nu=ku.index,Vu=ku.attributes.position,Gu=0;if(Nu!==null){var Hu=Nu.array;Gu=Nu.version;for(var ju=0,Uu=Hu.length;ju<Uu;ju+=3){var zu=Hu[ju+0],Wu=Hu[ju+1],Qu=Hu[ju+2];Fu.push(zu,Wu,Wu,Qu,Qu,zu)}}else{var Hu=Vu.array;Gu=Vu.version;for(var ju=0,Uu=Hu.length/3-1;ju<Uu;ju+=3){var zu=ju+0,Wu=ju+1,Qu=ju+2;Fu.push(zu,Wu,Wu,Qu,Qu,zu)}}var qu=new(arrayMax(Fu)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Fu,1);qu.version=Gu,Tu.update(qu,34963);var Yu=Bu.get(ku);Yu&&Tu.remove(Yu),Bu.set(ku,qu)}function $u(ku){var Fu=Bu.get(ku);if(Fu){var Nu=ku.index;Nu!==null&&Fu.version<Nu.version&&Du(ku)}else Du(ku);return Bu.get(ku)}return{get:Lu,update:Ou,getWireframeAttribute:$u}}function WebGLIndexedBufferRenderer(_u,Tu,Cu,Pu){var Bu=Pu.isWebGL2,Ru;function Lu(Nu){Ru=Nu}var Ou,Du;function $u(Nu){Ou=Nu.type,Du=Nu.bytesPerElement}function ku(Nu,Vu){_u.drawElements(Ru,Vu,Ou,Nu*Du),Cu.update(Vu,Ru)}function Fu(Nu,Vu,Gu,Hu){if(Hu!==0){var ju,Uu;if(Bu)ju=_u,Uu="drawElementsInstanced";else if(ju=Tu.get("ANGLE_instanced_arrays"),Uu="drawElementsInstancedANGLE",ju===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ju[Uu](Ru,Gu,Ou,Vu*Du,Hu),Cu.update(Gu,Ru,Hu)}}this.setMode=Lu,this.setIndex=$u,this.render=ku,this.renderInstances=Fu}function WebGLInfo(_u){var Tu={geometries:0,textures:0},Cu={frame:0,calls:0,triangles:0,points:0,lines:0};function Pu(Ru,Lu,Ou){switch(Ou=Ou||1,Cu.calls++,Lu){case 4:Cu.triangles+=Ou*(Ru/3);break;case 1:Cu.lines+=Ou*(Ru/2);break;case 3:Cu.lines+=Ou*(Ru-1);break;case 2:Cu.lines+=Ou*Ru;break;case 0:Cu.points+=Ou*Ru;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Lu);break}}function Bu(){Cu.frame++,Cu.calls=0,Cu.triangles=0,Cu.points=0,Cu.lines=0}return{memory:Tu,render:Cu,programs:null,autoReset:!0,reset:Bu,update:Pu}}function absNumericalSort(_u,Tu){return Math.abs(Tu[1])-Math.abs(_u[1])}function WebGLMorphtargets(_u){var Tu={},Cu=new Float32Array(8);function Pu(Bu,Ru,Lu,Ou){var Du=Bu.morphTargetInfluences,$u=Du===void 0?0:Du.length,ku=Tu[Ru.id];if(ku===void 0){ku=[];for(var Fu=0;Fu<$u;Fu++)ku[Fu]=[Fu,0];Tu[Ru.id]=ku}for(var Nu=Lu.morphTargets&&Ru.morphAttributes.position,Vu=Lu.morphNormals&&Ru.morphAttributes.normal,Fu=0;Fu<$u;Fu++){var Gu=ku[Fu];Gu[1]!==0&&(Nu&&Ru.deleteAttribute("morphTarget"+Fu),Vu&&Ru.deleteAttribute("morphNormal"+Fu))}for(var Fu=0;Fu<$u;Fu++){var Gu=ku[Fu];Gu[0]=Fu,Gu[1]=Du[Fu]}ku.sort(absNumericalSort);for(var Hu=0,Fu=0;Fu<8;Fu++){var Gu=ku[Fu];if(Gu){var ju=Gu[0],Uu=Gu[1];if(Uu){Nu&&Ru.setAttribute("morphTarget"+Fu,Nu[ju]),Vu&&Ru.setAttribute("morphNormal"+Fu,Vu[ju]),Cu[Fu]=Uu,Hu+=Uu;continue}}Cu[Fu]=0}var zu=Ru.morphTargetsRelative?1:1-Hu;Ou.getUniforms().setValue(_u,"morphTargetBaseInfluence",zu),Ou.getUniforms().setValue(_u,"morphTargetInfluences",Cu)}return{update:Pu}}function WebGLObjects(_u,Tu,Cu,Pu){var Bu=new WeakMap;function Ru(Ou){var Du=Pu.render.frame,$u=Ou.geometry,ku=Tu.get(Ou,$u);return Bu.get(ku)!==Du&&($u.isGeometry&&ku.updateFromObject(Ou),Tu.update(ku),Bu.set(ku,Du)),Ou.isInstancedMesh&&Cu.update(Ou.instanceMatrix,34962),ku}function Lu(){Bu=new WeakMap}return{update:Ru,dispose:Lu}}function CubeTexture(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u){_u=_u!==void 0?_u:[],Tu=Tu!==void 0?Tu:CubeReflectionMapping,Lu=Lu!==void 0?Lu:RGBFormat,Texture.call(this,_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(_u){this.image=_u}});function DataTexture2DArray(_u,Tu,Cu,Pu){Texture.call(this,null),this.image={data:_u||null,width:Tu||1,height:Cu||1,depth:Pu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(_u,Tu,Cu,Pu){Texture.call(this,null),this.image={data:_u||null,width:Tu||1,height:Cu||1,depth:Pu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(_u,Tu,Cu){var Pu=_u[0];if(Pu<=0||Pu>0)return _u;var Bu=Tu*Cu,Ru=arrayCacheF32[Bu];if(Ru===void 0&&(Ru=new Float32Array(Bu),arrayCacheF32[Bu]=Ru),Tu!==0){Pu.toArray(Ru,0);for(var Lu=1,Ou=0;Lu!==Tu;++Lu)Ou+=Cu,_u[Lu].toArray(Ru,Ou)}return Ru}function arraysEqual(_u,Tu){if(_u.length!==Tu.length)return!1;for(var Cu=0,Pu=_u.length;Cu<Pu;Cu++)if(_u[Cu]!==Tu[Cu])return!1;return!0}function copyArray(_u,Tu){for(var Cu=0,Pu=Tu.length;Cu<Pu;Cu++)_u[Cu]=Tu[Cu]}function allocTexUnits(_u,Tu){var Cu=arrayCacheI32[Tu];Cu===void 0&&(Cu=new Int32Array(Tu),arrayCacheI32[Tu]=Cu);for(var Pu=0;Pu!==Tu;++Pu)Cu[Pu]=_u.allocateTextureUnit();return Cu}function setValueV1f(_u,Tu){var Cu=this.cache;Cu[0]!==Tu&&(_u.uniform1f(this.addr,Tu),Cu[0]=Tu)}function setValueV2f(_u,Tu){var Cu=this.cache;if(Tu.x!==void 0)(Cu[0]!==Tu.x||Cu[1]!==Tu.y)&&(_u.uniform2f(this.addr,Tu.x,Tu.y),Cu[0]=Tu.x,Cu[1]=Tu.y);else{if(arraysEqual(Cu,Tu))return;_u.uniform2fv(this.addr,Tu),copyArray(Cu,Tu)}}function setValueV3f(_u,Tu){var Cu=this.cache;if(Tu.x!==void 0)(Cu[0]!==Tu.x||Cu[1]!==Tu.y||Cu[2]!==Tu.z)&&(_u.uniform3f(this.addr,Tu.x,Tu.y,Tu.z),Cu[0]=Tu.x,Cu[1]=Tu.y,Cu[2]=Tu.z);else if(Tu.r!==void 0)(Cu[0]!==Tu.r||Cu[1]!==Tu.g||Cu[2]!==Tu.b)&&(_u.uniform3f(this.addr,Tu.r,Tu.g,Tu.b),Cu[0]=Tu.r,Cu[1]=Tu.g,Cu[2]=Tu.b);else{if(arraysEqual(Cu,Tu))return;_u.uniform3fv(this.addr,Tu),copyArray(Cu,Tu)}}function setValueV4f(_u,Tu){var Cu=this.cache;if(Tu.x!==void 0)(Cu[0]!==Tu.x||Cu[1]!==Tu.y||Cu[2]!==Tu.z||Cu[3]!==Tu.w)&&(_u.uniform4f(this.addr,Tu.x,Tu.y,Tu.z,Tu.w),Cu[0]=Tu.x,Cu[1]=Tu.y,Cu[2]=Tu.z,Cu[3]=Tu.w);else{if(arraysEqual(Cu,Tu))return;_u.uniform4fv(this.addr,Tu),copyArray(Cu,Tu)}}function setValueM2(_u,Tu){var Cu=this.cache,Pu=Tu.elements;if(Pu===void 0){if(arraysEqual(Cu,Tu))return;_u.uniformMatrix2fv(this.addr,!1,Tu),copyArray(Cu,Tu)}else{if(arraysEqual(Cu,Pu))return;mat2array.set(Pu),_u.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(Cu,Pu)}}function setValueM3(_u,Tu){var Cu=this.cache,Pu=Tu.elements;if(Pu===void 0){if(arraysEqual(Cu,Tu))return;_u.uniformMatrix3fv(this.addr,!1,Tu),copyArray(Cu,Tu)}else{if(arraysEqual(Cu,Pu))return;mat3array.set(Pu),_u.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(Cu,Pu)}}function setValueM4(_u,Tu){var Cu=this.cache,Pu=Tu.elements;if(Pu===void 0){if(arraysEqual(Cu,Tu))return;_u.uniformMatrix4fv(this.addr,!1,Tu),copyArray(Cu,Tu)}else{if(arraysEqual(Cu,Pu))return;mat4array.set(Pu),_u.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(Cu,Pu)}}function setValueT1(_u,Tu,Cu){var Pu=this.cache,Bu=Cu.allocateTextureUnit();Pu[0]!==Bu&&(_u.uniform1i(this.addr,Bu),Pu[0]=Bu),Cu.safeSetTexture2D(Tu||emptyTexture,Bu)}function setValueT2DArray1(_u,Tu,Cu){var Pu=this.cache,Bu=Cu.allocateTextureUnit();Pu[0]!==Bu&&(_u.uniform1i(this.addr,Bu),Pu[0]=Bu),Cu.setTexture2DArray(Tu||emptyTexture2dArray,Bu)}function setValueT3D1(_u,Tu,Cu){var Pu=this.cache,Bu=Cu.allocateTextureUnit();Pu[0]!==Bu&&(_u.uniform1i(this.addr,Bu),Pu[0]=Bu),Cu.setTexture3D(Tu||emptyTexture3d,Bu)}function setValueT6(_u,Tu,Cu){var Pu=this.cache,Bu=Cu.allocateTextureUnit();Pu[0]!==Bu&&(_u.uniform1i(this.addr,Bu),Pu[0]=Bu),Cu.safeSetTextureCube(Tu||emptyCubeTexture,Bu)}function setValueV1i(_u,Tu){var Cu=this.cache;Cu[0]!==Tu&&(_u.uniform1i(this.addr,Tu),Cu[0]=Tu)}function setValueV2i(_u,Tu){var Cu=this.cache;arraysEqual(Cu,Tu)||(_u.uniform2iv(this.addr,Tu),copyArray(Cu,Tu))}function setValueV3i(_u,Tu){var Cu=this.cache;arraysEqual(Cu,Tu)||(_u.uniform3iv(this.addr,Tu),copyArray(Cu,Tu))}function setValueV4i(_u,Tu){var Cu=this.cache;arraysEqual(Cu,Tu)||(_u.uniform4iv(this.addr,Tu),copyArray(Cu,Tu))}function setValueV1ui(_u,Tu){var Cu=this.cache;Cu[0]!==Tu&&(_u.uniform1ui(this.addr,Tu),Cu[0]=Tu)}function getSingularSetter(_u){switch(_u){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_u,Tu){_u.uniform1fv(this.addr,Tu)}function setValueV1iArray(_u,Tu){_u.uniform1iv(this.addr,Tu)}function setValueV2iArray(_u,Tu){_u.uniform2iv(this.addr,Tu)}function setValueV3iArray(_u,Tu){_u.uniform3iv(this.addr,Tu)}function setValueV4iArray(_u,Tu){_u.uniform4iv(this.addr,Tu)}function setValueV2fArray(_u,Tu){var Cu=flatten(Tu,this.size,2);_u.uniform2fv(this.addr,Cu)}function setValueV3fArray(_u,Tu){var Cu=flatten(Tu,this.size,3);_u.uniform3fv(this.addr,Cu)}function setValueV4fArray(_u,Tu){var Cu=flatten(Tu,this.size,4);_u.uniform4fv(this.addr,Cu)}function setValueM2Array(_u,Tu){var Cu=flatten(Tu,this.size,4);_u.uniformMatrix2fv(this.addr,!1,Cu)}function setValueM3Array(_u,Tu){var Cu=flatten(Tu,this.size,9);_u.uniformMatrix3fv(this.addr,!1,Cu)}function setValueM4Array(_u,Tu){var Cu=flatten(Tu,this.size,16);_u.uniformMatrix4fv(this.addr,!1,Cu)}function setValueT1Array(_u,Tu,Cu){var Pu=Tu.length,Bu=allocTexUnits(Cu,Pu);_u.uniform1iv(this.addr,Bu);for(var Ru=0;Ru!==Pu;++Ru)Cu.safeSetTexture2D(Tu[Ru]||emptyTexture,Bu[Ru])}function setValueT6Array(_u,Tu,Cu){var Pu=Tu.length,Bu=allocTexUnits(Cu,Pu);_u.uniform1iv(this.addr,Bu);for(var Ru=0;Ru!==Pu;++Ru)Cu.safeSetTextureCube(Tu[Ru]||emptyCubeTexture,Bu[Ru])}function getPureArraySetter(_u){switch(_u){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(_u,Tu,Cu){this.id=_u,this.addr=Cu,this.cache=[],this.setValue=getSingularSetter(Tu.type)}function PureArrayUniform(_u,Tu,Cu){this.id=_u,this.addr=Cu,this.cache=[],this.size=Tu.size,this.setValue=getPureArraySetter(Tu.type)}PureArrayUniform.prototype.updateCache=function(_u){var Tu=this.cache;_u instanceof Float32Array&&Tu.length!==_u.length&&(this.cache=new Float32Array(_u.length)),copyArray(Tu,_u)};function StructuredUniform(_u){this.id=_u,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(_u,Tu,Cu){for(var Pu=this.seq,Bu=0,Ru=Pu.length;Bu!==Ru;++Bu){var Lu=Pu[Bu];Lu.setValue(_u,Tu[Lu.id],Cu)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(_u,Tu){_u.seq.push(Tu),_u.map[Tu.id]=Tu}function parseUniform(_u,Tu,Cu){var Pu=_u.name,Bu=Pu.length;for(RePathPart.lastIndex=0;;){var Ru=RePathPart.exec(Pu),Lu=RePathPart.lastIndex,Ou=Ru[1],Du=Ru[2]==="]",$u=Ru[3];if(Du&&(Ou=Ou|0),$u===void 0||$u==="["&&Lu+2===Bu){addUniform(Cu,$u===void 0?new SingleUniform(Ou,_u,Tu):new PureArrayUniform(Ou,_u,Tu));break}else{var ku=Cu.map,Fu=ku[Ou];Fu===void 0&&(Fu=new StructuredUniform(Ou),addUniform(Cu,Fu)),Cu=Fu}}}function WebGLUniforms(_u,Tu){this.seq=[],this.map={};for(var Cu=_u.getProgramParameter(Tu,35718),Pu=0;Pu<Cu;++Pu){var Bu=_u.getActiveUniform(Tu,Pu),Ru=_u.getUniformLocation(Tu,Bu.name);parseUniform(Bu,Ru,this)}}WebGLUniforms.prototype.setValue=function(_u,Tu,Cu,Pu){var Bu=this.map[Tu];Bu!==void 0&&Bu.setValue(_u,Cu,Pu)};WebGLUniforms.prototype.setOptional=function(_u,Tu,Cu){var Pu=Tu[Cu];Pu!==void 0&&this.setValue(_u,Cu,Pu)};WebGLUniforms.upload=function(_u,Tu,Cu,Pu){for(var Bu=0,Ru=Tu.length;Bu!==Ru;++Bu){var Lu=Tu[Bu],Ou=Cu[Lu.id];Ou.needsUpdate!==!1&&Lu.setValue(_u,Ou.value,Pu)}};WebGLUniforms.seqWithValue=function(_u,Tu){for(var Cu=[],Pu=0,Bu=_u.length;Pu!==Bu;++Pu){var Ru=_u[Pu];Ru.id in Tu&&Cu.push(Ru)}return Cu};function WebGLShader(_u,Tu,Cu){var Pu=_u.createShader(Tu);return _u.shaderSource(Pu,Cu),_u.compileShader(Pu),Pu}var programIdCount=0;function addLineNumbers(_u){for(var Tu=_u.split(`
`),Cu=0;Cu<Tu.length;Cu++)Tu[Cu]=Cu+1+": "+Tu[Cu];return Tu.join(`
`)}function getEncodingComponents(_u){switch(_u){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+_u)}}function getShaderErrors(_u,Tu,Cu){var Pu=_u.getShaderParameter(Tu,35713),Bu=_u.getShaderInfoLog(Tu).trim();if(Pu&&Bu==="")return"";var Ru=_u.getShaderSource(Tu);return"THREE.WebGLShader: gl.getShaderInfoLog() "+Cu+`
`+Bu+addLineNumbers(Ru)}function getTexelDecodingFunction(_u,Tu){var Cu=getEncodingComponents(Tu);return"vec4 "+_u+"( vec4 value ) { return "+Cu[0]+"ToLinear"+Cu[1]+"; }"}function getTexelEncodingFunction(_u,Tu){var Cu=getEncodingComponents(Tu);return"vec4 "+_u+"( vec4 value ) { return LinearTo"+Cu[0]+Cu[1]+"; }"}function getToneMappingFunction(_u,Tu){var Cu;switch(Tu){case LinearToneMapping:Cu="Linear";break;case ReinhardToneMapping:Cu="Reinhard";break;case Uncharted2ToneMapping:Cu="Uncharted2";break;case CineonToneMapping:Cu="OptimizedCineon";break;case ACESFilmicToneMapping:Cu="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+Tu)}return"vec3 "+_u+"( vec3 color ) { return "+Cu+"ToneMapping( color ); }"}function generateExtensions(_u){var Tu=[_u.extensionDerivatives||_u.envMapCubeUV||_u.bumpMap||_u.tangentSpaceNormalMap||_u.clearcoatNormalMap||_u.flatShading||_u.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(_u.extensionFragDepth||_u.logarithmicDepthBuffer)&&_u.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",_u.extensionDrawBuffers&&_u.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(_u.extensionShaderTextureLOD||_u.envMap)&&_u.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return Tu.filter(filterEmptyLine).join(`
`)}function generateDefines(_u){var Tu=[];for(var Cu in _u){var Pu=_u[Cu];Pu!==!1&&Tu.push("#define "+Cu+" "+Pu)}return Tu.join(`
`)}function fetchAttributeLocations(_u,Tu){for(var Cu={},Pu=_u.getProgramParameter(Tu,35721),Bu=0;Bu<Pu;Bu++){var Ru=_u.getActiveAttrib(Tu,Bu),Lu=Ru.name;Cu[Lu]=_u.getAttribLocation(Tu,Lu)}return Cu}function filterEmptyLine(_u){return _u!==""}function replaceLightNums(_u,Tu){return _u.replace(/NUM_DIR_LIGHTS/g,Tu.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Tu.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,Tu.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,Tu.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Tu.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,Tu.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,Tu.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,Tu.numPointLightShadows)}function replaceClippingPlaneNums(_u,Tu){return _u.replace(/NUM_CLIPPING_PLANES/g,Tu.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,Tu.numClippingPlanes-Tu.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_u){return _u.replace(includePattern,includeReplacer)}function includeReplacer(_u,Tu){var Cu=ShaderChunk[Tu];if(Cu===void 0)throw new Error("Can not resolve #include <"+Tu+">");return resolveIncludes(Cu)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(_u){return _u.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(_u,Tu,Cu,Pu){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(_u,Tu,Cu,Pu)}function loopReplacer(_u,Tu,Cu,Pu){for(var Bu="",Ru=parseInt(Tu);Ru<parseInt(Cu);Ru++)Bu+=Pu.replace(/\[ i \]/g,"[ "+Ru+" ]").replace(/UNROLLED_LOOP_INDEX/g,Ru);return Bu}function generatePrecision(_u){var Tu="precision "+_u.precision+` float;
precision `+_u.precision+" int;";return _u.precision==="highp"?Tu+=`
#define HIGH_PRECISION`:_u.precision==="mediump"?Tu+=`
#define MEDIUM_PRECISION`:_u.precision==="lowp"&&(Tu+=`
#define LOW_PRECISION`),Tu}function generateShadowMapTypeDefine(_u){var Tu="SHADOWMAP_TYPE_BASIC";return _u.shadowMapType===PCFShadowMap?Tu="SHADOWMAP_TYPE_PCF":_u.shadowMapType===PCFSoftShadowMap?Tu="SHADOWMAP_TYPE_PCF_SOFT":_u.shadowMapType===VSMShadowMap&&(Tu="SHADOWMAP_TYPE_VSM"),Tu}function generateEnvMapTypeDefine(_u){var Tu="ENVMAP_TYPE_CUBE";if(_u.envMap)switch(_u.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:Tu="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:Tu="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:Tu="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:Tu="ENVMAP_TYPE_SPHERE";break}return Tu}function generateEnvMapModeDefine(_u){var Tu="ENVMAP_MODE_REFLECTION";if(_u.envMap)switch(_u.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:Tu="ENVMAP_MODE_REFRACTION";break}return Tu}function generateEnvMapBlendingDefine(_u){var Tu="ENVMAP_BLENDING_NONE";if(_u.envMap)switch(_u.combine){case MultiplyOperation:Tu="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:Tu="ENVMAP_BLENDING_MIX";break;case AddOperation:Tu="ENVMAP_BLENDING_ADD";break}return Tu}function WebGLProgram(_u,Tu,Cu){var Pu=_u.getContext(),Bu=Cu.defines,Ru=Cu.vertexShader,Lu=Cu.fragmentShader,Ou=generateShadowMapTypeDefine(Cu),Du=generateEnvMapTypeDefine(Cu),$u=generateEnvMapModeDefine(Cu),ku=generateEnvMapBlendingDefine(Cu),Fu=_u.gammaFactor>0?_u.gammaFactor:1,Nu=Cu.isWebGL2?"":generateExtensions(Cu),Vu=generateDefines(Bu),Gu=Pu.createProgram(),Hu,ju;if(Cu.isRawShaderMaterial?(Hu=[Vu].filter(filterEmptyLine).join(`
`),Hu.length>0&&(Hu+=`
`),ju=[Nu,Vu].filter(filterEmptyLine).join(`
`),ju.length>0&&(ju+=`
`)):(Hu=[generatePrecision(Cu),"#define SHADER_NAME "+Cu.shaderName,Vu,Cu.instancing?"#define USE_INSTANCING":"",Cu.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Fu,"#define MAX_BONES "+Cu.maxBones,Cu.useFog&&Cu.fog?"#define USE_FOG":"",Cu.useFog&&Cu.fogExp2?"#define FOG_EXP2":"",Cu.map?"#define USE_MAP":"",Cu.envMap?"#define USE_ENVMAP":"",Cu.envMap?"#define "+$u:"",Cu.lightMap?"#define USE_LIGHTMAP":"",Cu.aoMap?"#define USE_AOMAP":"",Cu.emissiveMap?"#define USE_EMISSIVEMAP":"",Cu.bumpMap?"#define USE_BUMPMAP":"",Cu.normalMap?"#define USE_NORMALMAP":"",Cu.normalMap&&Cu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Cu.normalMap&&Cu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Cu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Cu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Cu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Cu.displacementMap&&Cu.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Cu.specularMap?"#define USE_SPECULARMAP":"",Cu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Cu.metalnessMap?"#define USE_METALNESSMAP":"",Cu.alphaMap?"#define USE_ALPHAMAP":"",Cu.vertexTangents?"#define USE_TANGENT":"",Cu.vertexColors?"#define USE_COLOR":"",Cu.vertexUvs?"#define USE_UV":"",Cu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Cu.flatShading?"#define FLAT_SHADED":"",Cu.skinning?"#define USE_SKINNING":"",Cu.useVertexTexture?"#define BONE_TEXTURE":"",Cu.morphTargets?"#define USE_MORPHTARGETS":"",Cu.morphNormals&&Cu.flatShading===!1?"#define USE_MORPHNORMALS":"",Cu.doubleSided?"#define DOUBLE_SIDED":"",Cu.flipSided?"#define FLIP_SIDED":"",Cu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Cu.shadowMapEnabled?"#define "+Ou:"",Cu.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Cu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Cu.logarithmicDepthBuffer&&Cu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),ju=[Nu,generatePrecision(Cu),"#define SHADER_NAME "+Cu.shaderName,Vu,Cu.alphaTest?"#define ALPHATEST "+Cu.alphaTest+(Cu.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Fu,Cu.useFog&&Cu.fog?"#define USE_FOG":"",Cu.useFog&&Cu.fogExp2?"#define FOG_EXP2":"",Cu.map?"#define USE_MAP":"",Cu.matcap?"#define USE_MATCAP":"",Cu.envMap?"#define USE_ENVMAP":"",Cu.envMap?"#define "+Du:"",Cu.envMap?"#define "+$u:"",Cu.envMap?"#define "+ku:"",Cu.lightMap?"#define USE_LIGHTMAP":"",Cu.aoMap?"#define USE_AOMAP":"",Cu.emissiveMap?"#define USE_EMISSIVEMAP":"",Cu.bumpMap?"#define USE_BUMPMAP":"",Cu.normalMap?"#define USE_NORMALMAP":"",Cu.normalMap&&Cu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Cu.normalMap&&Cu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Cu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Cu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Cu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Cu.specularMap?"#define USE_SPECULARMAP":"",Cu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Cu.metalnessMap?"#define USE_METALNESSMAP":"",Cu.alphaMap?"#define USE_ALPHAMAP":"",Cu.sheen?"#define USE_SHEEN":"",Cu.vertexTangents?"#define USE_TANGENT":"",Cu.vertexColors?"#define USE_COLOR":"",Cu.vertexUvs?"#define USE_UV":"",Cu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Cu.gradientMap?"#define USE_GRADIENTMAP":"",Cu.flatShading?"#define FLAT_SHADED":"",Cu.doubleSided?"#define DOUBLE_SIDED":"",Cu.flipSided?"#define FLIP_SIDED":"",Cu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Cu.shadowMapEnabled?"#define "+Ou:"",Cu.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Cu.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Cu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Cu.logarithmicDepthBuffer&&Cu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(Cu.extensionShaderTextureLOD||Cu.envMap)&&Cu.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",Cu.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",Cu.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",Cu.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",Cu.toneMapping):"",Cu.dithering?"#define DITHERING":"",Cu.outputEncoding||Cu.mapEncoding||Cu.matcapEncoding||Cu.envMapEncoding||Cu.emissiveMapEncoding||Cu.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",Cu.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",Cu.mapEncoding):"",Cu.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",Cu.matcapEncoding):"",Cu.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",Cu.envMapEncoding):"",Cu.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",Cu.emissiveMapEncoding):"",Cu.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",Cu.lightMapEncoding):"",Cu.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",Cu.outputEncoding):"",Cu.depthPacking?"#define DEPTH_PACKING "+Cu.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ru=resolveIncludes(Ru),Ru=replaceLightNums(Ru,Cu),Ru=replaceClippingPlaneNums(Ru,Cu),Lu=resolveIncludes(Lu),Lu=replaceLightNums(Lu,Cu),Lu=replaceClippingPlaneNums(Lu,Cu),Ru=unrollLoops(Ru),Lu=unrollLoops(Lu),Cu.isWebGL2&&!Cu.isRawShaderMaterial){var Uu=!1,zu=/^\s*#version\s+300\s+es\s*\n/;Cu.isShaderMaterial&&Ru.match(zu)!==null&&Lu.match(zu)!==null&&(Uu=!0,Ru=Ru.replace(zu,""),Lu=Lu.replace(zu,"")),Hu=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Hu,ju=[`#version 300 es
`,"#define varying in",Uu?"":"out highp vec4 pc_fragColor;",Uu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ju}var Wu=Hu+Ru,Qu=ju+Lu,qu=WebGLShader(Pu,35633,Wu),Yu=WebGLShader(Pu,35632,Qu);if(Pu.attachShader(Gu,qu),Pu.attachShader(Gu,Yu),Cu.index0AttributeName!==void 0?Pu.bindAttribLocation(Gu,0,Cu.index0AttributeName):Cu.morphTargets===!0&&Pu.bindAttribLocation(Gu,0,"position"),Pu.linkProgram(Gu),_u.debug.checkShaderErrors){var Xc=Pu.getProgramInfoLog(Gu).trim(),_h=Pu.getShaderInfoLog(qu).trim(),_d=Pu.getShaderInfoLog(Yu).trim(),Ku=!0,Xu=!0;if(Pu.getProgramParameter(Gu,35714)===!1){Ku=!1;var Ju=getShaderErrors(Pu,qu,"vertex"),Zu=getShaderErrors(Pu,Yu,"fragment");console.error("THREE.WebGLProgram: shader error: ",Pu.getError(),"35715",Pu.getProgramParameter(Gu,35715),"gl.getProgramInfoLog",Xc,Ju,Zu)}else Xc!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Xc):(_h===""||_d==="")&&(Xu=!1);Xu&&(this.diagnostics={runnable:Ku,programLog:Xc,vertexShader:{log:_h,prefix:Hu},fragmentShader:{log:_d,prefix:ju}})}Pu.deleteShader(qu),Pu.deleteShader(Yu);var _c;this.getUniforms=function(){return _c===void 0&&(_c=new WebGLUniforms(Pu,Gu)),_c};var _f;return this.getAttributes=function(){return _f===void 0&&(_f=fetchAttributeLocations(Pu,Gu)),_f},this.destroy=function(){Pu.deleteProgram(Gu),this.program=void 0},this.name=Cu.shaderName,this.id=programIdCount++,this.cacheKey=Tu,this.usedTimes=1,this.program=Gu,this.vertexShader=qu,this.fragmentShader=Yu,this}function WebGLPrograms(_u,Tu,Cu){var Pu=[],Bu=Cu.isWebGL2,Ru=Cu.logarithmicDepthBuffer,Lu=Cu.floatVertexTextures,Ou=Cu.precision,Du=Cu.maxVertexUniforms,$u=Cu.vertexTextures,ku={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Fu=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Nu(Hu,ju){var Uu;if(ju){var zu=ShaderLib[ju];Uu={name:Hu.type,uniforms:UniformsUtils.clone(zu.uniforms),vertexShader:zu.vertexShader,fragmentShader:zu.fragmentShader}}else Uu={name:Hu.type,uniforms:Hu.uniforms,vertexShader:Hu.vertexShader,fragmentShader:Hu.fragmentShader};return Uu}function Vu(Hu){var ju=Hu.skeleton,Uu=ju.bones;if(Lu)return 1024;var zu=Du,Wu=Math.floor((zu-20)/4),Qu=Math.min(Wu,Uu.length);return Qu<Uu.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Uu.length+" bones. This GPU supports "+Qu+"."),0):Qu}function Gu(Hu){var ju;return Hu?Hu.isTexture?ju=Hu.encoding:Hu.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ju=Hu.texture.encoding):ju=LinearEncoding,ju}this.getParameters=function(Hu,ju,Uu,zu,Wu,Qu,qu){var Yu=zu.fog,Xc=Hu.isMeshStandardMaterial?zu.environment:null,_h=Hu.envMap||Xc,_d=ku[Hu.type],Ku=qu.isSkinnedMesh?Vu(qu):0;Hu.precision!==null&&(Ou=Cu.getMaxPrecision(Hu.precision),Ou!==Hu.precision&&console.warn("THREE.WebGLProgram.getParameters:",Hu.precision,"not supported, using",Ou,"instead."));var Xu=Nu(Hu,_d);Hu.onBeforeCompile(Xu,_u);var Ju=_u.getRenderTarget(),Zu={isWebGL2:Bu,shaderID:_d,shaderName:Xu.name,uniforms:Xu.uniforms,vertexShader:Xu.vertexShader,fragmentShader:Xu.fragmentShader,defines:Hu.defines,isRawShaderMaterial:Hu.isRawShaderMaterial,isShaderMaterial:Hu.isShaderMaterial,precision:Ou,instancing:qu.isInstancedMesh===!0,supportsVertexTextures:$u,outputEncoding:Ju!==null?Gu(Ju.texture):_u.outputEncoding,map:!!Hu.map,mapEncoding:Gu(Hu.map),matcap:!!Hu.matcap,matcapEncoding:Gu(Hu.matcap),envMap:!!_h,envMapMode:_h&&_h.mapping,envMapEncoding:Gu(_h),envMapCubeUV:!!_h&&(_h.mapping===CubeUVReflectionMapping||_h.mapping===CubeUVRefractionMapping),lightMap:!!Hu.lightMap,lightMapEncoding:Gu(Hu.lightMap),aoMap:!!Hu.aoMap,emissiveMap:!!Hu.emissiveMap,emissiveMapEncoding:Gu(Hu.emissiveMap),bumpMap:!!Hu.bumpMap,normalMap:!!Hu.normalMap,objectSpaceNormalMap:Hu.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Hu.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!Hu.clearcoatMap,clearcoatRoughnessMap:!!Hu.clearcoatRoughnessMap,clearcoatNormalMap:!!Hu.clearcoatNormalMap,displacementMap:!!Hu.displacementMap,roughnessMap:!!Hu.roughnessMap,metalnessMap:!!Hu.metalnessMap,specularMap:!!Hu.specularMap,alphaMap:!!Hu.alphaMap,gradientMap:!!Hu.gradientMap,sheen:!!Hu.sheen,combine:Hu.combine,vertexTangents:Hu.normalMap&&Hu.vertexTangents,vertexColors:Hu.vertexColors,vertexUvs:!!Hu.map||!!Hu.bumpMap||!!Hu.normalMap||!!Hu.specularMap||!!Hu.alphaMap||!!Hu.emissiveMap||!!Hu.roughnessMap||!!Hu.metalnessMap||!!Hu.clearcoatMap||!!Hu.clearcoatRoughnessMap||!!Hu.clearcoatNormalMap||!!Hu.displacementMap,uvsVertexOnly:!(!!Hu.map||!!Hu.bumpMap||!!Hu.normalMap||!!Hu.specularMap||!!Hu.alphaMap||!!Hu.emissiveMap||!!Hu.roughnessMap||!!Hu.metalnessMap||!!Hu.clearcoatNormalMap)&&!!Hu.displacementMap,fog:!!Yu,useFog:Hu.fog,fogExp2:Yu&&Yu.isFogExp2,flatShading:Hu.flatShading,sizeAttenuation:Hu.sizeAttenuation,logarithmicDepthBuffer:Ru,skinning:Hu.skinning&&Ku>0,maxBones:Ku,useVertexTexture:Lu,morphTargets:Hu.morphTargets,morphNormals:Hu.morphNormals,maxMorphTargets:_u.maxMorphTargets,maxMorphNormals:_u.maxMorphNormals,numDirLights:ju.directional.length,numPointLights:ju.point.length,numSpotLights:ju.spot.length,numRectAreaLights:ju.rectArea.length,numHemiLights:ju.hemi.length,numDirLightShadows:ju.directionalShadowMap.length,numPointLightShadows:ju.pointShadowMap.length,numSpotLightShadows:ju.spotShadowMap.length,numClippingPlanes:Wu,numClipIntersection:Qu,dithering:Hu.dithering,shadowMapEnabled:_u.shadowMap.enabled&&Uu.length>0,shadowMapType:_u.shadowMap.type,toneMapping:Hu.toneMapped?_u.toneMapping:NoToneMapping,physicallyCorrectLights:_u.physicallyCorrectLights,premultipliedAlpha:Hu.premultipliedAlpha,alphaTest:Hu.alphaTest,doubleSided:Hu.side===DoubleSide,flipSided:Hu.side===BackSide,depthPacking:Hu.depthPacking!==void 0?Hu.depthPacking:!1,index0AttributeName:Hu.index0AttributeName,extensionDerivatives:Hu.extensions&&Hu.extensions.derivatives,extensionFragDepth:Hu.extensions&&Hu.extensions.fragDepth,extensionDrawBuffers:Hu.extensions&&Hu.extensions.drawBuffers,extensionShaderTextureLOD:Hu.extensions&&Hu.extensions.shaderTextureLOD,rendererExtensionFragDepth:Bu||Tu.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Bu||Tu.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Bu||Tu.get("EXT_shader_texture_lod")!==null,onBeforeCompile:Hu.onBeforeCompile};return Zu},this.getProgramCacheKey=function(Hu){var ju=[];if(Hu.shaderID?ju.push(Hu.shaderID):(ju.push(Hu.fragmentShader),ju.push(Hu.vertexShader)),Hu.defines!==void 0)for(var Uu in Hu.defines)ju.push(Uu),ju.push(Hu.defines[Uu]);if(Hu.isRawShaderMaterial===void 0){for(var zu=0;zu<Fu.length;zu++)ju.push(Hu[Fu[zu]]);ju.push(_u.outputEncoding),ju.push(_u.gammaFactor)}return ju.push(Hu.onBeforeCompile.toString()),ju.join()},this.acquireProgram=function(Hu,ju){for(var Uu,zu=0,Wu=Pu.length;zu<Wu;zu++){var Qu=Pu[zu];if(Qu.cacheKey===ju){Uu=Qu,++Uu.usedTimes;break}}return Uu===void 0&&(Uu=new WebGLProgram(_u,ju,Hu),Pu.push(Uu)),Uu},this.releaseProgram=function(Hu){if(--Hu.usedTimes===0){var ju=Pu.indexOf(Hu);Pu[ju]=Pu[Pu.length-1],Pu.pop(),Hu.destroy()}},this.programs=Pu}function WebGLProperties(){var _u=new WeakMap;function Tu(Ru){var Lu=_u.get(Ru);return Lu===void 0&&(Lu={},_u.set(Ru,Lu)),Lu}function Cu(Ru){_u.delete(Ru)}function Pu(Ru,Lu,Ou){_u.get(Ru)[Lu]=Ou}function Bu(){_u=new WeakMap}return{get:Tu,remove:Cu,update:Pu,dispose:Bu}}function painterSortStable(_u,Tu){return _u.groupOrder!==Tu.groupOrder?_u.groupOrder-Tu.groupOrder:_u.renderOrder!==Tu.renderOrder?_u.renderOrder-Tu.renderOrder:_u.program!==Tu.program?_u.program.id-Tu.program.id:_u.material.id!==Tu.material.id?_u.material.id-Tu.material.id:_u.z!==Tu.z?_u.z-Tu.z:_u.id-Tu.id}function reversePainterSortStable(_u,Tu){return _u.groupOrder!==Tu.groupOrder?_u.groupOrder-Tu.groupOrder:_u.renderOrder!==Tu.renderOrder?_u.renderOrder-Tu.renderOrder:_u.z!==Tu.z?Tu.z-_u.z:_u.id-Tu.id}function WebGLRenderList(){var _u=[],Tu=0,Cu=[],Pu=[],Bu={id:-1};function Ru(){Tu=0,Cu.length=0,Pu.length=0}function Lu(Fu,Nu,Vu,Gu,Hu,ju){var Uu=_u[Tu];return Uu===void 0?(Uu={id:Fu.id,object:Fu,geometry:Nu,material:Vu,program:Vu.program||Bu,groupOrder:Gu,renderOrder:Fu.renderOrder,z:Hu,group:ju},_u[Tu]=Uu):(Uu.id=Fu.id,Uu.object=Fu,Uu.geometry=Nu,Uu.material=Vu,Uu.program=Vu.program||Bu,Uu.groupOrder=Gu,Uu.renderOrder=Fu.renderOrder,Uu.z=Hu,Uu.group=ju),Tu++,Uu}function Ou(Fu,Nu,Vu,Gu,Hu,ju){var Uu=Lu(Fu,Nu,Vu,Gu,Hu,ju);(Vu.transparent===!0?Pu:Cu).push(Uu)}function Du(Fu,Nu,Vu,Gu,Hu,ju){var Uu=Lu(Fu,Nu,Vu,Gu,Hu,ju);(Vu.transparent===!0?Pu:Cu).unshift(Uu)}function $u(Fu,Nu){Cu.length>1&&Cu.sort(Fu||painterSortStable),Pu.length>1&&Pu.sort(Nu||reversePainterSortStable)}function ku(){for(var Fu=Tu,Nu=_u.length;Fu<Nu;Fu++){var Vu=_u[Fu];if(Vu.id===null)break;Vu.id=null,Vu.object=null,Vu.geometry=null,Vu.material=null,Vu.program=null,Vu.group=null}}return{opaque:Cu,transparent:Pu,init:Ru,push:Ou,unshift:Du,finish:ku,sort:$u}}function WebGLRenderLists(){var _u=new WeakMap;function Tu(Bu){var Ru=Bu.target;Ru.removeEventListener("dispose",Tu),_u.delete(Ru)}function Cu(Bu,Ru){var Lu=_u.get(Bu),Ou;return Lu===void 0?(Ou=new WebGLRenderList,_u.set(Bu,new WeakMap),_u.get(Bu).set(Ru,Ou),Bu.addEventListener("dispose",Tu)):(Ou=Lu.get(Ru),Ou===void 0&&(Ou=new WebGLRenderList,Lu.set(Ru,Ou))),Ou}function Pu(){_u=new WeakMap}return{get:Cu,dispose:Pu}}function UniformsCache(){var _u={};return{get:function(Tu){if(_u[Tu.id]!==void 0)return _u[Tu.id];var Cu;switch(Tu.type){case"DirectionalLight":Cu={direction:new Vector3,color:new Color};break;case"SpotLight":Cu={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":Cu={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":Cu={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":Cu={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _u[Tu.id]=Cu,Cu}}}function ShadowUniformsCache(){var _u={};return{get:function(Tu){if(_u[Tu.id]!==void 0)return _u[Tu.id];var Cu;switch(Tu.type){case"DirectionalLight":Cu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":Cu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":Cu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _u[Tu.id]=Cu,Cu}}}var nextVersion=0;function shadowCastingLightsFirst(_u,Tu){return(Tu.castShadow?1:0)-(_u.castShadow?1:0)}function WebGLLights(){for(var _u=new UniformsCache,Tu=ShadowUniformsCache(),Cu={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Pu=0;Pu<9;Pu++)Cu.probe.push(new Vector3);var Bu=new Vector3,Ru=new Matrix4,Lu=new Matrix4;function Ou(Du,$u,ku){for(var Fu=0,Nu=0,Vu=0,Gu=0;Gu<9;Gu++)Cu.probe[Gu].set(0,0,0);var Hu=0,ju=0,Uu=0,zu=0,Wu=0,Qu=0,qu=0,Yu=0,Xc=ku.matrixWorldInverse;Du.sort(shadowCastingLightsFirst);for(var Gu=0,_h=Du.length;Gu<_h;Gu++){var _d=Du[Gu],Ku=_d.color,Xu=_d.intensity,Ju=_d.distance,Zu=_d.shadow&&_d.shadow.map?_d.shadow.map.texture:null;if(_d.isAmbientLight)Fu+=Ku.r*Xu,Nu+=Ku.g*Xu,Vu+=Ku.b*Xu;else if(_d.isLightProbe)for(var _c=0;_c<9;_c++)Cu.probe[_c].addScaledVector(_d.sh.coefficients[_c],Xu);else if(_d.isDirectionalLight){var _f=_u.get(_d);if(_f.color.copy(_d.color).multiplyScalar(_d.intensity),_f.direction.setFromMatrixPosition(_d.matrixWorld),Bu.setFromMatrixPosition(_d.target.matrixWorld),_f.direction.sub(Bu),_f.direction.transformDirection(Xc),_d.castShadow){var ep=_d.shadow,tp=Tu.get(_d);tp.shadowBias=ep.bias,tp.shadowRadius=ep.radius,tp.shadowMapSize=ep.mapSize,Cu.directionalShadow[Hu]=tp,Cu.directionalShadowMap[Hu]=Zu,Cu.directionalShadowMatrix[Hu]=_d.shadow.matrix,Qu++}Cu.directional[Hu]=_f,Hu++}else if(_d.isSpotLight){var _f=_u.get(_d);if(_f.position.setFromMatrixPosition(_d.matrixWorld),_f.position.applyMatrix4(Xc),_f.color.copy(Ku).multiplyScalar(Xu),_f.distance=Ju,_f.direction.setFromMatrixPosition(_d.matrixWorld),Bu.setFromMatrixPosition(_d.target.matrixWorld),_f.direction.sub(Bu),_f.direction.transformDirection(Xc),_f.coneCos=Math.cos(_d.angle),_f.penumbraCos=Math.cos(_d.angle*(1-_d.penumbra)),_f.decay=_d.decay,_d.castShadow){var ep=_d.shadow,tp=Tu.get(_d);tp.shadowBias=ep.bias,tp.shadowRadius=ep.radius,tp.shadowMapSize=ep.mapSize,Cu.spotShadow[Uu]=tp,Cu.spotShadowMap[Uu]=Zu,Cu.spotShadowMatrix[Uu]=_d.shadow.matrix,Yu++}Cu.spot[Uu]=_f,Uu++}else if(_d.isRectAreaLight){var _f=_u.get(_d);_f.color.copy(Ku).multiplyScalar(Xu),_f.position.setFromMatrixPosition(_d.matrixWorld),_f.position.applyMatrix4(Xc),Lu.identity(),Ru.copy(_d.matrixWorld),Ru.premultiply(Xc),Lu.extractRotation(Ru),_f.halfWidth.set(_d.width*.5,0,0),_f.halfHeight.set(0,_d.height*.5,0),_f.halfWidth.applyMatrix4(Lu),_f.halfHeight.applyMatrix4(Lu),Cu.rectArea[zu]=_f,zu++}else if(_d.isPointLight){var _f=_u.get(_d);if(_f.position.setFromMatrixPosition(_d.matrixWorld),_f.position.applyMatrix4(Xc),_f.color.copy(_d.color).multiplyScalar(_d.intensity),_f.distance=_d.distance,_f.decay=_d.decay,_d.castShadow){var ep=_d.shadow,tp=Tu.get(_d);tp.shadowBias=ep.bias,tp.shadowRadius=ep.radius,tp.shadowMapSize=ep.mapSize,tp.shadowCameraNear=ep.camera.near,tp.shadowCameraFar=ep.camera.far,Cu.pointShadow[ju]=tp,Cu.pointShadowMap[ju]=Zu,Cu.pointShadowMatrix[ju]=_d.shadow.matrix,qu++}Cu.point[ju]=_f,ju++}else if(_d.isHemisphereLight){var _f=_u.get(_d);_f.direction.setFromMatrixPosition(_d.matrixWorld),_f.direction.transformDirection(Xc),_f.direction.normalize(),_f.skyColor.copy(_d.color).multiplyScalar(Xu),_f.groundColor.copy(_d.groundColor).multiplyScalar(Xu),Cu.hemi[Wu]=_f,Wu++}}Cu.ambient[0]=Fu,Cu.ambient[1]=Nu,Cu.ambient[2]=Vu;var op=Cu.hash;(op.directionalLength!==Hu||op.pointLength!==ju||op.spotLength!==Uu||op.rectAreaLength!==zu||op.hemiLength!==Wu||op.numDirectionalShadows!==Qu||op.numPointShadows!==qu||op.numSpotShadows!==Yu)&&(Cu.directional.length=Hu,Cu.spot.length=Uu,Cu.rectArea.length=zu,Cu.point.length=ju,Cu.hemi.length=Wu,Cu.directionalShadow.length=Qu,Cu.directionalShadowMap.length=Qu,Cu.pointShadow.length=qu,Cu.pointShadowMap.length=qu,Cu.spotShadow.length=Yu,Cu.spotShadowMap.length=Yu,Cu.directionalShadowMatrix.length=Qu,Cu.pointShadowMatrix.length=qu,Cu.spotShadowMatrix.length=Yu,op.directionalLength=Hu,op.pointLength=ju,op.spotLength=Uu,op.rectAreaLength=zu,op.hemiLength=Wu,op.numDirectionalShadows=Qu,op.numPointShadows=qu,op.numSpotShadows=Yu,Cu.version=nextVersion++)}return{setup:Ou,state:Cu}}function WebGLRenderState(){var _u=new WebGLLights,Tu=[],Cu=[];function Pu(){Tu.length=0,Cu.length=0}function Bu(Du){Tu.push(Du)}function Ru(Du){Cu.push(Du)}function Lu(Du){_u.setup(Tu,Cu,Du)}var Ou={lightsArray:Tu,shadowsArray:Cu,lights:_u};return{init:Pu,state:Ou,setupLights:Lu,pushLight:Bu,pushShadow:Ru}}function WebGLRenderStates(){var _u=new WeakMap;function Tu(Bu){var Ru=Bu.target;Ru.removeEventListener("dispose",Tu),_u.delete(Ru)}function Cu(Bu,Ru){var Lu;return _u.has(Bu)===!1?(Lu=new WebGLRenderState,_u.set(Bu,new WeakMap),_u.get(Bu).set(Ru,Lu),Bu.addEventListener("dispose",Tu)):_u.get(Bu).has(Ru)===!1?(Lu=new WebGLRenderState,_u.get(Bu).set(Ru,Lu)):Lu=_u.get(Bu).get(Ru),Lu}function Pu(){_u=new WeakMap}return{get:Cu,dispose:Pu}}function MeshDepthMaterial(_u){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(_u)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.depthPacking=_u.depthPacking,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this};function MeshDistanceMaterial(_u){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(_u)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.referencePosition.copy(_u.referencePosition),this.nearDistance=_u.nearDistance,this.farDistance=_u.farDistance,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(_u,Tu,Cu){var Pu=new Frustum,Bu=new Vector2,Ru=new Vector2,Lu=new Vector4,Ou=[],Du=[],$u={},ku={0:BackSide,1:FrontSide,2:DoubleSide},Fu=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Nu=Fu.clone();Nu.defines.HORIZONAL_PASS=1;var Vu=new BufferGeometry;Vu.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Gu=new Mesh(Vu,Fu),Hu=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(qu,Yu,Xc){if(Hu.enabled!==!1&&!(Hu.autoUpdate===!1&&Hu.needsUpdate===!1)&&qu.length!==0){var _h=_u.getRenderTarget(),_d=_u.getActiveCubeFace(),Ku=_u.getActiveMipmapLevel(),Xu=_u.state;Xu.setBlending(NoBlending),Xu.buffers.color.setClear(1,1,1,1),Xu.buffers.depth.setTest(!0),Xu.setScissorTest(!1);for(var Ju=0,Zu=qu.length;Ju<Zu;Ju++){var _c=qu[Ju],_f=_c.shadow;if(_f===void 0){console.warn("THREE.WebGLShadowMap:",_c,"has no shadow.");continue}Bu.copy(_f.mapSize);var ep=_f.getFrameExtents();if(Bu.multiply(ep),Ru.copy(_f.mapSize),(Bu.x>Cu||Bu.y>Cu)&&(Bu.x>Cu&&(Ru.x=Math.floor(Cu/ep.x),Bu.x=Ru.x*ep.x,_f.mapSize.x=Ru.x),Bu.y>Cu&&(Ru.y=Math.floor(Cu/ep.y),Bu.y=Ru.y*ep.y,_f.mapSize.y=Ru.y)),_f.map===null&&!_f.isPointLightShadow&&this.type===VSMShadowMap){var tp={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};_f.map=new WebGLRenderTarget(Bu.x,Bu.y,tp),_f.map.texture.name=_c.name+".shadowMap",_f.mapPass=new WebGLRenderTarget(Bu.x,Bu.y,tp),_f.camera.updateProjectionMatrix()}if(_f.map===null){var tp={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};_f.map=new WebGLRenderTarget(Bu.x,Bu.y,tp),_f.map.texture.name=_c.name+".shadowMap",_f.camera.updateProjectionMatrix()}_u.setRenderTarget(_f.map),_u.clear();for(var op=_f.getViewportCount(),hp=0;hp<op;hp++){var cp=_f.getViewport(hp);Lu.set(Ru.x*cp.x,Ru.y*cp.y,Ru.x*cp.z,Ru.y*cp.w),Xu.viewport(Lu),_f.updateMatrices(_c,hp),Pu=_f.getFrustum(),Qu(Yu,Xc,_f.camera,_c,this.type)}!_f.isPointLightShadow&&this.type===VSMShadowMap&&ju(_f,Xc)}Hu.needsUpdate=!1,_u.setRenderTarget(_h,_d,Ku)}};function ju(qu,Yu){var Xc=Tu.update(Gu);Fu.uniforms.shadow_pass.value=qu.map.texture,Fu.uniforms.resolution.value=qu.mapSize,Fu.uniforms.radius.value=qu.radius,_u.setRenderTarget(qu.mapPass),_u.clear(),_u.renderBufferDirect(Yu,null,Xc,Fu,Gu,null),Nu.uniforms.shadow_pass.value=qu.mapPass.texture,Nu.uniforms.resolution.value=qu.mapSize,Nu.uniforms.radius.value=qu.radius,_u.setRenderTarget(qu.map),_u.clear(),_u.renderBufferDirect(Yu,null,Xc,Nu,Gu,null)}function Uu(qu,Yu,Xc){var _h=qu<<0|Yu<<1|Xc<<2,_d=Ou[_h];return _d===void 0&&(_d=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:qu,skinning:Yu}),Ou[_h]=_d),_d}function zu(qu,Yu,Xc){var _h=qu<<0|Yu<<1|Xc<<2,_d=Du[_h];return _d===void 0&&(_d=new MeshDistanceMaterial({morphTargets:qu,skinning:Yu}),Du[_h]=_d),_d}function Wu(qu,Yu,Xc,_h,_d,Ku,Xu){var Ju=null,Zu=Uu,_c=qu.customDepthMaterial;if(_h.isPointLight===!0&&(Zu=zu,_c=qu.customDistanceMaterial),_c===void 0){var _f=!1;Xc.morphTargets===!0&&(_f=Yu.morphAttributes&&Yu.morphAttributes.position&&Yu.morphAttributes.position.length>0);var ep=!1;qu.isSkinnedMesh===!0&&(Xc.skinning===!0?ep=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",qu));var tp=qu.isInstancedMesh===!0;Ju=Zu(_f,ep,tp)}else Ju=_c;if(_u.localClippingEnabled&&Xc.clipShadows===!0&&Xc.clippingPlanes.length!==0){var op=Ju.uuid,hp=Xc.uuid,cp=$u[op];cp===void 0&&(cp={},$u[op]=cp);var Sp=cp[hp];Sp===void 0&&(Sp=Ju.clone(),cp[hp]=Sp),Ju=Sp}return Ju.visible=Xc.visible,Ju.wireframe=Xc.wireframe,Xu===VSMShadowMap?Ju.side=Xc.shadowSide!==null?Xc.shadowSide:Xc.side:Ju.side=Xc.shadowSide!==null?Xc.shadowSide:ku[Xc.side],Ju.clipShadows=Xc.clipShadows,Ju.clippingPlanes=Xc.clippingPlanes,Ju.clipIntersection=Xc.clipIntersection,Ju.wireframeLinewidth=Xc.wireframeLinewidth,Ju.linewidth=Xc.linewidth,_h.isPointLight===!0&&Ju.isMeshDistanceMaterial===!0&&(Ju.referencePosition.setFromMatrixPosition(_h.matrixWorld),Ju.nearDistance=_d,Ju.farDistance=Ku),Ju}function Qu(qu,Yu,Xc,_h,_d){if(qu.visible!==!1){var Ku=qu.layers.test(Yu.layers);if(Ku&&(qu.isMesh||qu.isLine||qu.isPoints)&&(qu.castShadow||qu.receiveShadow&&_d===VSMShadowMap)&&(!qu.frustumCulled||Pu.intersectsObject(qu))){qu.modelViewMatrix.multiplyMatrices(Xc.matrixWorldInverse,qu.matrixWorld);var Xu=Tu.update(qu),Ju=qu.material;if(Array.isArray(Ju))for(var Zu=Xu.groups,_c=0,_f=Zu.length;_c<_f;_c++){var ep=Zu[_c],tp=Ju[ep.materialIndex];if(tp&&tp.visible){var op=Wu(qu,Xu,tp,_h,Xc.near,Xc.far,_d);_u.renderBufferDirect(Xc,null,Xu,op,qu,ep)}}else if(Ju.visible){var op=Wu(qu,Xu,Ju,_h,Xc.near,Xc.far,_d);_u.renderBufferDirect(Xc,null,Xu,op,qu,null)}}for(var hp=qu.children,cp=0,Sp=hp.length;cp<Sp;cp++)Qu(hp[cp],Yu,Xc,_h,_d)}}}function WebGLState(_u,Tu,Cu){var Pu=Cu.isWebGL2;function Bu(){var _p=!1,Qp=new Vector4,Zp=null,tm=new Vector4(0,0,0,0);return{setMask:function(em){Zp!==em&&!_p&&(_u.colorMask(em,em,em,em),Zp=em)},setLocked:function(em){_p=em},setClear:function(em,lm,pm,mm,Sm){Sm===!0&&(em*=mm,lm*=mm,pm*=mm),Qp.set(em,lm,pm,mm),tm.equals(Qp)===!1&&(_u.clearColor(em,lm,pm,mm),tm.copy(Qp))},reset:function(){_p=!1,Zp=null,tm.set(-1,0,0,0)}}}function Ru(){var _p=!1,Qp=null,Zp=null,tm=null;return{setTest:function(em){em?fp(2929):up(2929)},setMask:function(em){Qp!==em&&!_p&&(_u.depthMask(em),Qp=em)},setFunc:function(em){if(Zp!==em){if(em)switch(em){case NeverDepth:_u.depthFunc(512);break;case AlwaysDepth:_u.depthFunc(519);break;case LessDepth:_u.depthFunc(513);break;case LessEqualDepth:_u.depthFunc(515);break;case EqualDepth:_u.depthFunc(514);break;case GreaterEqualDepth:_u.depthFunc(518);break;case GreaterDepth:_u.depthFunc(516);break;case NotEqualDepth:_u.depthFunc(517);break;default:_u.depthFunc(515)}else _u.depthFunc(515);Zp=em}},setLocked:function(em){_p=em},setClear:function(em){tm!==em&&(_u.clearDepth(em),tm=em)},reset:function(){_p=!1,Qp=null,Zp=null,tm=null}}}function Lu(){var _p=!1,Qp=null,Zp=null,tm=null,em=null,lm=null,pm=null,mm=null,Sm=null;return{setTest:function(dm){_p||(dm?fp(2960):up(2960))},setMask:function(dm){Qp!==dm&&!_p&&(_u.stencilMask(dm),Qp=dm)},setFunc:function(dm,_m,xm){(Zp!==dm||tm!==_m||em!==xm)&&(_u.stencilFunc(dm,_m,xm),Zp=dm,tm=_m,em=xm)},setOp:function(dm,_m,xm){(lm!==dm||pm!==_m||mm!==xm)&&(_u.stencilOp(dm,_m,xm),lm=dm,pm=_m,mm=xm)},setLocked:function(dm){_p=dm},setClear:function(dm){Sm!==dm&&(_u.clearStencil(dm),Sm=dm)},reset:function(){_p=!1,Qp=null,Zp=null,tm=null,em=null,lm=null,pm=null,mm=null,Sm=null}}}var Ou=new Bu,Du=new Ru,$u=new Lu,ku=_u.getParameter(34921),Fu=new Uint8Array(ku),Nu=new Uint8Array(ku),Vu=new Uint8Array(ku),Gu={},Hu=null,ju=null,Uu=null,zu=null,Wu=null,Qu=null,qu=null,Yu=null,Xc=null,_h=!1,_d=null,Ku=null,Xu=null,Ju=null,Zu=null,_c=_u.getParameter(35661),_f=!1,ep=0,tp=_u.getParameter(7938);tp.indexOf("WebGL")!==-1?(ep=parseFloat(/^WebGL\ ([0-9])/.exec(tp)[1]),_f=ep>=1):tp.indexOf("OpenGL ES")!==-1&&(ep=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(tp)[1]),_f=ep>=2);var op=null,hp={},cp=new Vector4,Sp=new Vector4;function yp(_p,Qp,Zp){var tm=new Uint8Array(4),em=_u.createTexture();_u.bindTexture(_p,em),_u.texParameteri(_p,10241,9728),_u.texParameteri(_p,10240,9728);for(var lm=0;lm<Zp;lm++)_u.texImage2D(Qp+lm,0,6408,1,1,0,6408,5121,tm);return em}var Rp={};Rp[3553]=yp(3553,3553,1),Rp[34067]=yp(34067,34069,6),Ou.setClear(0,0,0,1),Du.setClear(1),$u.setClear(0),fp(2929),Du.setFunc(LessEqualDepth),np(!1),sp(CullFaceBack),fp(2884),$p(NoBlending);function wp(){for(var _p=0,Qp=Fu.length;_p<Qp;_p++)Fu[_p]=0}function Pp(_p){Ep(_p,0)}function Ep(_p,Qp){if(Fu[_p]=1,Nu[_p]===0&&(_u.enableVertexAttribArray(_p),Nu[_p]=1),Vu[_p]!==Qp){var Zp=Pu?_u:Tu.get("ANGLE_instanced_arrays");Zp[Pu?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](_p,Qp),Vu[_p]=Qp}}function ip(){for(var _p=0,Qp=Nu.length;_p!==Qp;++_p)Nu[_p]!==Fu[_p]&&(_u.disableVertexAttribArray(_p),Nu[_p]=0)}function rp(_p,Qp,Zp,tm,em,lm){Pu===!0&&(Zp===5124||Zp===5125)?_u.vertexAttribIPointer(_p,Qp,Zp,tm,em,lm):_u.vertexAttribPointer(_p,Qp,Zp,tm,em,lm)}function fp(_p){Gu[_p]!==!0&&(_u.enable(_p),Gu[_p]=!0)}function up(_p){Gu[_p]!==!1&&(_u.disable(_p),Gu[_p]=!1)}function pp(_p){return Hu!==_p?(_u.useProgram(_p),Hu=_p,!0):!1}var gp={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Pu)gp[MinEquation]=32775,gp[MaxEquation]=32776;else{var Ap=Tu.get("EXT_blend_minmax");Ap!==null&&(gp[MinEquation]=Ap.MIN_EXT,gp[MaxEquation]=Ap.MAX_EXT)}var Mp={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function $p(_p,Qp,Zp,tm,em,lm,pm,mm){if(_p===NoBlending){ju&&(up(3042),ju=!1);return}if(ju||(fp(3042),ju=!0),_p!==CustomBlending){if(_p!==Uu||mm!==_h){if((zu!==AddEquation||qu!==AddEquation)&&(_u.blendEquation(32774),zu=AddEquation,qu=AddEquation),mm)switch(_p){case NormalBlending:_u.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:_u.blendFunc(1,1);break;case SubtractiveBlending:_u.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:_u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",_p);break}else switch(_p){case NormalBlending:_u.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:_u.blendFunc(770,1);break;case SubtractiveBlending:_u.blendFunc(0,769);break;case MultiplyBlending:_u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",_p);break}Wu=null,Qu=null,Yu=null,Xc=null,Uu=_p,_h=mm}return}em=em||Qp,lm=lm||Zp,pm=pm||tm,(Qp!==zu||em!==qu)&&(_u.blendEquationSeparate(gp[Qp],gp[em]),zu=Qp,qu=em),(Zp!==Wu||tm!==Qu||lm!==Yu||pm!==Xc)&&(_u.blendFuncSeparate(Mp[Zp],Mp[tm],Mp[lm],Mp[pm]),Wu=Zp,Qu=tm,Yu=lm,Xc=pm),Uu=_p,_h=null}function Tp(_p,Qp){_p.side===DoubleSide?up(2884):fp(2884);var Zp=_p.side===BackSide;Qp&&(Zp=!Zp),np(Zp),_p.blending===NormalBlending&&_p.transparent===!1?$p(NoBlending):$p(_p.blending,_p.blendEquation,_p.blendSrc,_p.blendDst,_p.blendEquationAlpha,_p.blendSrcAlpha,_p.blendDstAlpha,_p.premultipliedAlpha),Du.setFunc(_p.depthFunc),Du.setTest(_p.depthTest),Du.setMask(_p.depthWrite),Ou.setMask(_p.colorWrite);var tm=_p.stencilWrite;$u.setTest(tm),tm&&($u.setMask(_p.stencilWriteMask),$u.setFunc(_p.stencilFunc,_p.stencilRef,_p.stencilFuncMask),$u.setOp(_p.stencilFail,_p.stencilZFail,_p.stencilZPass)),Cp(_p.polygonOffset,_p.polygonOffsetFactor,_p.polygonOffsetUnits)}function np(_p){_d!==_p&&(_p?_u.frontFace(2304):_u.frontFace(2305),_d=_p)}function sp(_p){_p!==CullFaceNone?(fp(2884),_p!==Ku&&(_p===CullFaceBack?_u.cullFace(1029):_p===CullFaceFront?_u.cullFace(1028):_u.cullFace(1032))):up(2884),Ku=_p}function Ip(_p){_p!==Xu&&(_f&&_u.lineWidth(_p),Xu=_p)}function Cp(_p,Qp,Zp){_p?(fp(32823),(Ju!==Qp||Zu!==Zp)&&(_u.polygonOffset(Qp,Zp),Ju=Qp,Zu=Zp)):up(32823)}function Vp(_p){_p?fp(3089):up(3089)}function Fp(_p){_p===void 0&&(_p=33984+_c-1),op!==_p&&(_u.activeTexture(_p),op=_p)}function Gp(_p,Qp){op===null&&Fp();var Zp=hp[op];Zp===void 0&&(Zp={type:void 0,texture:void 0},hp[op]=Zp),(Zp.type!==_p||Zp.texture!==Qp)&&(_u.bindTexture(_p,Qp||Rp[_p]),Zp.type=_p,Zp.texture=Qp)}function qp(){var _p=hp[op];_p!==void 0&&_p.type!==void 0&&(_u.bindTexture(_p.type,null),_p.type=void 0,_p.texture=void 0)}function Wp(){try{_u.compressedTexImage2D.apply(_u,arguments)}catch(_p){console.error("THREE.WebGLState:",_p)}}function Jp(){try{_u.texImage2D.apply(_u,arguments)}catch(_p){console.error("THREE.WebGLState:",_p)}}function Hp(){try{_u.texImage3D.apply(_u,arguments)}catch(_p){console.error("THREE.WebGLState:",_p)}}function Kp(_p){cp.equals(_p)===!1&&(_u.scissor(_p.x,_p.y,_p.z,_p.w),cp.copy(_p))}function jp(_p){Sp.equals(_p)===!1&&(_u.viewport(_p.x,_p.y,_p.z,_p.w),Sp.copy(_p))}function Yp(){for(var _p=0;_p<Nu.length;_p++)Nu[_p]===1&&(_u.disableVertexAttribArray(_p),Nu[_p]=0);Gu={},op=null,hp={},Hu=null,Uu=null,_d=null,Ku=null,Ou.reset(),Du.reset(),$u.reset()}return{buffers:{color:Ou,depth:Du,stencil:$u},initAttributes:wp,enableAttribute:Pp,enableAttributeAndDivisor:Ep,disableUnusedAttributes:ip,vertexAttribPointer:rp,enable:fp,disable:up,useProgram:pp,setBlending:$p,setMaterial:Tp,setFlipSided:np,setCullFace:sp,setLineWidth:Ip,setPolygonOffset:Cp,setScissorTest:Vp,activeTexture:Fp,bindTexture:Gp,unbindTexture:qp,compressedTexImage2D:Wp,texImage2D:Jp,texImage3D:Hp,scissor:Kp,viewport:jp,reset:Yp}}function WebGLTextures(_u,Tu,Cu,Pu,Bu,Ru,Lu){var Ou=Bu.isWebGL2,Du=Bu.maxTextures,$u=Bu.maxCubemapSize,ku=Bu.maxTextureSize,Fu=Bu.maxSamples,Nu=new WeakMap,Vu,Gu=!1;try{Gu=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Hu(np,sp){return Gu?new OffscreenCanvas(np,sp):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function ju(np,sp,Ip,Cp){var Vp=1;if((np.width>Cp||np.height>Cp)&&(Vp=Cp/Math.max(np.width,np.height)),Vp<1||sp===!0)if(typeof HTMLImageElement!="undefined"&&np instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&np instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&np instanceof ImageBitmap){var Fp=sp?MathUtils.floorPowerOfTwo:Math.floor,Gp=Fp(Vp*np.width),qp=Fp(Vp*np.height);Vu===void 0&&(Vu=Hu(Gp,qp));var Wp=Ip?Hu(Gp,qp):Vu;Wp.width=Gp,Wp.height=qp;var Jp=Wp.getContext("2d");return Jp.drawImage(np,0,0,Gp,qp),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+np.width+"x"+np.height+") to ("+Gp+"x"+qp+")."),Wp}else return"data"in np&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+np.width+"x"+np.height+")."),np;return np}function Uu(np){return MathUtils.isPowerOfTwo(np.width)&&MathUtils.isPowerOfTwo(np.height)}function zu(np){return Ou?!1:np.wrapS!==ClampToEdgeWrapping||np.wrapT!==ClampToEdgeWrapping||np.minFilter!==NearestFilter&&np.minFilter!==LinearFilter}function Wu(np,sp){return np.generateMipmaps&&sp&&np.minFilter!==NearestFilter&&np.minFilter!==LinearFilter}function Qu(np,sp,Ip,Cp){_u.generateMipmap(np);var Vp=Pu.get(sp);Vp.__maxMipLevel=Math.log(Math.max(Ip,Cp))*Math.LOG2E}function qu(np,sp,Ip){if(Ou===!1)return sp;if(np!==null){if(_u[np]!==void 0)return _u[np];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+np+"'")}var Cp=sp;return sp===6403&&(Ip===5126&&(Cp=33326),Ip===5131&&(Cp=33325),Ip===5121&&(Cp=33321)),sp===6407&&(Ip===5126&&(Cp=34837),Ip===5131&&(Cp=34843),Ip===5121&&(Cp=32849)),sp===6408&&(Ip===5126&&(Cp=34836),Ip===5131&&(Cp=34842),Ip===5121&&(Cp=32856)),(Cp===33325||Cp===33326||Cp===34842||Cp===34836)&&Tu.get("EXT_color_buffer_float"),Cp}function Yu(np){return np===NearestFilter||np===NearestMipmapNearestFilter||np===NearestMipmapLinearFilter?9728:9729}function Xc(np){var sp=np.target;sp.removeEventListener("dispose",Xc),_d(sp),sp.isVideoTexture&&Nu.delete(sp),Lu.memory.textures--}function _h(np){var sp=np.target;sp.removeEventListener("dispose",_h),Ku(sp),Lu.memory.textures--}function _d(np){var sp=Pu.get(np);sp.__webglInit!==void 0&&(_u.deleteTexture(sp.__webglTexture),Pu.remove(np))}function Ku(np){var sp=Pu.get(np),Ip=Pu.get(np.texture);if(!!np){if(Ip.__webglTexture!==void 0&&_u.deleteTexture(Ip.__webglTexture),np.depthTexture&&np.depthTexture.dispose(),np.isWebGLCubeRenderTarget)for(var Cp=0;Cp<6;Cp++)_u.deleteFramebuffer(sp.__webglFramebuffer[Cp]),sp.__webglDepthbuffer&&_u.deleteRenderbuffer(sp.__webglDepthbuffer[Cp]);else _u.deleteFramebuffer(sp.__webglFramebuffer),sp.__webglDepthbuffer&&_u.deleteRenderbuffer(sp.__webglDepthbuffer),sp.__webglMultisampledFramebuffer&&_u.deleteFramebuffer(sp.__webglMultisampledFramebuffer),sp.__webglColorRenderbuffer&&_u.deleteRenderbuffer(sp.__webglColorRenderbuffer),sp.__webglDepthRenderbuffer&&_u.deleteRenderbuffer(sp.__webglDepthRenderbuffer);Pu.remove(np.texture),Pu.remove(np)}}var Xu=0;function Ju(){Xu=0}function Zu(){var np=Xu;return np>=Du&&console.warn("THREE.WebGLTextures: Trying to use "+np+" texture units while this GPU supports only "+Du),Xu+=1,np}function _c(np,sp){var Ip=Pu.get(np);if(np.isVideoTexture&&gp(np),np.version>0&&Ip.__version!==np.version){var Cp=np.image;if(Cp===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Cp.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Rp(Ip,np,sp);return}}Cu.activeTexture(33984+sp),Cu.bindTexture(3553,Ip.__webglTexture)}function _f(np,sp){var Ip=Pu.get(np);if(np.version>0&&Ip.__version!==np.version){Rp(Ip,np,sp);return}Cu.activeTexture(33984+sp),Cu.bindTexture(35866,Ip.__webglTexture)}function ep(np,sp){var Ip=Pu.get(np);if(np.version>0&&Ip.__version!==np.version){Rp(Ip,np,sp);return}Cu.activeTexture(33984+sp),Cu.bindTexture(32879,Ip.__webglTexture)}function tp(np,sp){if(np.image.length===6){var Ip=Pu.get(np);if(np.version>0&&Ip.__version!==np.version){yp(Ip,np),Cu.activeTexture(33984+sp),Cu.bindTexture(34067,Ip.__webglTexture),_u.pixelStorei(37440,np.flipY);for(var Cp=np&&(np.isCompressedTexture||np.image[0].isCompressedTexture),Vp=np.image[0]&&np.image[0].isDataTexture,Fp=[],Gp=0;Gp<6;Gp++)!Cp&&!Vp?Fp[Gp]=ju(np.image[Gp],!1,!0,$u):Fp[Gp]=Vp?np.image[Gp].image:np.image[Gp];var qp=Fp[0],Wp=Uu(qp)||Ou,Jp=Ru.convert(np.format),Hp=Ru.convert(np.type),Kp=qu(np.internalFormat,Jp,Hp);Sp(34067,np,Wp);var jp;if(Cp){for(var Gp=0;Gp<6;Gp++){jp=Fp[Gp].mipmaps;for(var Yp=0;Yp<jp.length;Yp++){var _p=jp[Yp];np.format!==RGBAFormat&&np.format!==RGBFormat?Jp!==null?Cu.compressedTexImage2D(34069+Gp,Yp,Kp,_p.width,_p.height,0,_p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Cu.texImage2D(34069+Gp,Yp,Kp,_p.width,_p.height,0,Jp,Hp,_p.data)}}Ip.__maxMipLevel=jp.length-1}else{jp=np.mipmaps;for(var Gp=0;Gp<6;Gp++)if(Vp){Cu.texImage2D(34069+Gp,0,Kp,Fp[Gp].width,Fp[Gp].height,0,Jp,Hp,Fp[Gp].data);for(var Yp=0;Yp<jp.length;Yp++){var _p=jp[Yp],Qp=_p.image[Gp].image;Cu.texImage2D(34069+Gp,Yp+1,Kp,Qp.width,Qp.height,0,Jp,Hp,Qp.data)}}else{Cu.texImage2D(34069+Gp,0,Kp,Jp,Hp,Fp[Gp]);for(var Yp=0;Yp<jp.length;Yp++){var _p=jp[Yp];Cu.texImage2D(34069+Gp,Yp+1,Kp,Jp,Hp,_p.image[Gp])}}Ip.__maxMipLevel=jp.length}Wu(np,Wp)&&Qu(34067,np,qp.width,qp.height),Ip.__version=np.version,np.onUpdate&&np.onUpdate(np)}else Cu.activeTexture(33984+sp),Cu.bindTexture(34067,Ip.__webglTexture)}}function op(np,sp){Cu.activeTexture(33984+sp),Cu.bindTexture(34067,Pu.get(np).__webglTexture)}var hp={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},cp={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Sp(np,sp,Ip){Ip?(_u.texParameteri(np,10242,hp[sp.wrapS]),_u.texParameteri(np,10243,hp[sp.wrapT]),(np===32879||np===35866)&&_u.texParameteri(np,32882,hp[sp.wrapR]),_u.texParameteri(np,10240,cp[sp.magFilter]),_u.texParameteri(np,10241,cp[sp.minFilter])):(_u.texParameteri(np,10242,33071),_u.texParameteri(np,10243,33071),(np===32879||np===35866)&&_u.texParameteri(np,32882,33071),(sp.wrapS!==ClampToEdgeWrapping||sp.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_u.texParameteri(np,10240,Yu(sp.magFilter)),_u.texParameteri(np,10241,Yu(sp.minFilter)),sp.minFilter!==NearestFilter&&sp.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Cp=Tu.get("EXT_texture_filter_anisotropic");if(Cp){if(sp.type===FloatType&&Tu.get("OES_texture_float_linear")===null||sp.type===HalfFloatType&&(Ou||Tu.get("OES_texture_half_float_linear"))===null)return;(sp.anisotropy>1||Pu.get(sp).__currentAnisotropy)&&(_u.texParameterf(np,Cp.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(sp.anisotropy,Bu.getMaxAnisotropy())),Pu.get(sp).__currentAnisotropy=sp.anisotropy)}}function yp(np,sp){np.__webglInit===void 0&&(np.__webglInit=!0,sp.addEventListener("dispose",Xc),np.__webglTexture=_u.createTexture(),Lu.memory.textures++)}function Rp(np,sp,Ip){var Cp=3553;sp.isDataTexture2DArray&&(Cp=35866),sp.isDataTexture3D&&(Cp=32879),yp(np,sp),Cu.activeTexture(33984+Ip),Cu.bindTexture(Cp,np.__webglTexture),_u.pixelStorei(37440,sp.flipY),_u.pixelStorei(37441,sp.premultiplyAlpha),_u.pixelStorei(3317,sp.unpackAlignment);var Vp=zu(sp)&&Uu(sp.image)===!1,Fp=ju(sp.image,Vp,!1,ku),Gp=Uu(Fp)||Ou,qp=Ru.convert(sp.format),Wp=Ru.convert(sp.type),Jp=qu(sp.internalFormat,qp,Wp);Sp(Cp,sp,Gp);var Hp,Kp=sp.mipmaps;if(sp.isDepthTexture)Jp=6402,Ou?sp.type===FloatType?Jp=36012:sp.type===UnsignedIntType?Jp=33190:sp.type===UnsignedInt248Type?Jp=35056:Jp=33189:sp.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),sp.format===DepthFormat&&Jp===6402&&sp.type!==UnsignedShortType&&sp.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),sp.type=UnsignedShortType,Wp=Ru.convert(sp.type)),sp.format===DepthStencilFormat&&Jp===6402&&(Jp=34041,sp.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),sp.type=UnsignedInt248Type,Wp=Ru.convert(sp.type))),Cu.texImage2D(3553,0,Jp,Fp.width,Fp.height,0,qp,Wp,null);else if(sp.isDataTexture)if(Kp.length>0&&Gp){for(var jp=0,Yp=Kp.length;jp<Yp;jp++)Hp=Kp[jp],Cu.texImage2D(3553,jp,Jp,Hp.width,Hp.height,0,qp,Wp,Hp.data);sp.generateMipmaps=!1,np.__maxMipLevel=Kp.length-1}else Cu.texImage2D(3553,0,Jp,Fp.width,Fp.height,0,qp,Wp,Fp.data),np.__maxMipLevel=0;else if(sp.isCompressedTexture){for(var jp=0,Yp=Kp.length;jp<Yp;jp++)Hp=Kp[jp],sp.format!==RGBAFormat&&sp.format!==RGBFormat?qp!==null?Cu.compressedTexImage2D(3553,jp,Jp,Hp.width,Hp.height,0,Hp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cu.texImage2D(3553,jp,Jp,Hp.width,Hp.height,0,qp,Wp,Hp.data);np.__maxMipLevel=Kp.length-1}else if(sp.isDataTexture2DArray)Cu.texImage3D(35866,0,Jp,Fp.width,Fp.height,Fp.depth,0,qp,Wp,Fp.data),np.__maxMipLevel=0;else if(sp.isDataTexture3D)Cu.texImage3D(32879,0,Jp,Fp.width,Fp.height,Fp.depth,0,qp,Wp,Fp.data),np.__maxMipLevel=0;else if(Kp.length>0&&Gp){for(var jp=0,Yp=Kp.length;jp<Yp;jp++)Hp=Kp[jp],Cu.texImage2D(3553,jp,Jp,qp,Wp,Hp);sp.generateMipmaps=!1,np.__maxMipLevel=Kp.length-1}else Cu.texImage2D(3553,0,Jp,qp,Wp,Fp),np.__maxMipLevel=0;Wu(sp,Gp)&&Qu(Cp,sp,Fp.width,Fp.height),np.__version=sp.version,sp.onUpdate&&sp.onUpdate(sp)}function wp(np,sp,Ip,Cp){var Vp=Ru.convert(sp.texture.format),Fp=Ru.convert(sp.texture.type),Gp=qu(sp.texture.internalFormat,Vp,Fp);Cu.texImage2D(Cp,0,Gp,sp.width,sp.height,0,Vp,Fp,null),_u.bindFramebuffer(36160,np),_u.framebufferTexture2D(36160,Ip,Cp,Pu.get(sp.texture).__webglTexture,0),_u.bindFramebuffer(36160,null)}function Pp(np,sp,Ip){if(_u.bindRenderbuffer(36161,np),sp.depthBuffer&&!sp.stencilBuffer){var Cp=33189;if(Ip){var Vp=sp.depthTexture;Vp&&Vp.isDepthTexture&&(Vp.type===FloatType?Cp=36012:Vp.type===UnsignedIntType&&(Cp=33190));var Fp=pp(sp);_u.renderbufferStorageMultisample(36161,Fp,Cp,sp.width,sp.height)}else _u.renderbufferStorage(36161,Cp,sp.width,sp.height);_u.framebufferRenderbuffer(36160,36096,36161,np)}else if(sp.depthBuffer&&sp.stencilBuffer){if(Ip){var Fp=pp(sp);_u.renderbufferStorageMultisample(36161,Fp,35056,sp.width,sp.height)}else _u.renderbufferStorage(36161,34041,sp.width,sp.height);_u.framebufferRenderbuffer(36160,33306,36161,np)}else{var Gp=Ru.convert(sp.texture.format),qp=Ru.convert(sp.texture.type),Cp=qu(sp.texture.internalFormat,Gp,qp);if(Ip){var Fp=pp(sp);_u.renderbufferStorageMultisample(36161,Fp,Cp,sp.width,sp.height)}else _u.renderbufferStorage(36161,Cp,sp.width,sp.height)}_u.bindRenderbuffer(36161,null)}function Ep(np,sp){var Ip=sp&&sp.isWebGLCubeRenderTarget;if(Ip)throw new Error("Depth Texture with cube render targets is not supported");if(_u.bindFramebuffer(36160,np),!(sp.depthTexture&&sp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Pu.get(sp.depthTexture).__webglTexture||sp.depthTexture.image.width!==sp.width||sp.depthTexture.image.height!==sp.height)&&(sp.depthTexture.image.width=sp.width,sp.depthTexture.image.height=sp.height,sp.depthTexture.needsUpdate=!0),_c(sp.depthTexture,0);var Cp=Pu.get(sp.depthTexture).__webglTexture;if(sp.depthTexture.format===DepthFormat)_u.framebufferTexture2D(36160,36096,3553,Cp,0);else if(sp.depthTexture.format===DepthStencilFormat)_u.framebufferTexture2D(36160,33306,3553,Cp,0);else throw new Error("Unknown depthTexture format")}function ip(np){var sp=Pu.get(np),Ip=np.isWebGLCubeRenderTarget===!0;if(np.depthTexture){if(Ip)throw new Error("target.depthTexture not supported in Cube render targets");Ep(sp.__webglFramebuffer,np)}else if(Ip){sp.__webglDepthbuffer=[];for(var Cp=0;Cp<6;Cp++)_u.bindFramebuffer(36160,sp.__webglFramebuffer[Cp]),sp.__webglDepthbuffer[Cp]=_u.createRenderbuffer(),Pp(sp.__webglDepthbuffer[Cp],np,!1)}else _u.bindFramebuffer(36160,sp.__webglFramebuffer),sp.__webglDepthbuffer=_u.createRenderbuffer(),Pp(sp.__webglDepthbuffer,np,!1);_u.bindFramebuffer(36160,null)}function rp(np){var sp=Pu.get(np),Ip=Pu.get(np.texture);np.addEventListener("dispose",_h),Ip.__webglTexture=_u.createTexture(),Lu.memory.textures++;var Cp=np.isWebGLCubeRenderTarget===!0,Vp=np.isWebGLMultisampleRenderTarget===!0,Fp=Uu(np)||Ou;if(Ou&&np.texture.format===RGBFormat&&(np.texture.type===FloatType||np.texture.type===HalfFloatType)&&(np.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Cp){sp.__webglFramebuffer=[];for(var Gp=0;Gp<6;Gp++)sp.__webglFramebuffer[Gp]=_u.createFramebuffer()}else if(sp.__webglFramebuffer=_u.createFramebuffer(),Vp)if(Ou){sp.__webglMultisampledFramebuffer=_u.createFramebuffer(),sp.__webglColorRenderbuffer=_u.createRenderbuffer(),_u.bindRenderbuffer(36161,sp.__webglColorRenderbuffer);var qp=Ru.convert(np.texture.format),Wp=Ru.convert(np.texture.type),Jp=qu(np.texture.internalFormat,qp,Wp),Hp=pp(np);_u.renderbufferStorageMultisample(36161,Hp,Jp,np.width,np.height),_u.bindFramebuffer(36160,sp.__webglMultisampledFramebuffer),_u.framebufferRenderbuffer(36160,36064,36161,sp.__webglColorRenderbuffer),_u.bindRenderbuffer(36161,null),np.depthBuffer&&(sp.__webglDepthRenderbuffer=_u.createRenderbuffer(),Pp(sp.__webglDepthRenderbuffer,np,!0)),_u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Cp){Cu.bindTexture(34067,Ip.__webglTexture),Sp(34067,np.texture,Fp);for(var Gp=0;Gp<6;Gp++)wp(sp.__webglFramebuffer[Gp],np,36064,34069+Gp);Wu(np.texture,Fp)&&Qu(34067,np.texture,np.width,np.height),Cu.bindTexture(34067,null)}else Cu.bindTexture(3553,Ip.__webglTexture),Sp(3553,np.texture,Fp),wp(sp.__webglFramebuffer,np,36064,3553),Wu(np.texture,Fp)&&Qu(3553,np.texture,np.width,np.height),Cu.bindTexture(3553,null);np.depthBuffer&&ip(np)}function fp(np){var sp=np.texture,Ip=Uu(np)||Ou;if(Wu(sp,Ip)){var Cp=np.isWebGLCubeRenderTarget?34067:3553,Vp=Pu.get(sp).__webglTexture;Cu.bindTexture(Cp,Vp),Qu(Cp,sp,np.width,np.height),Cu.bindTexture(Cp,null)}}function up(np){if(np.isWebGLMultisampleRenderTarget)if(Ou){var sp=Pu.get(np);_u.bindFramebuffer(36008,sp.__webglMultisampledFramebuffer),_u.bindFramebuffer(36009,sp.__webglFramebuffer);var Ip=np.width,Cp=np.height,Vp=16384;np.depthBuffer&&(Vp|=256),np.stencilBuffer&&(Vp|=1024),_u.blitFramebuffer(0,0,Ip,Cp,0,0,Ip,Cp,Vp,9728),_u.bindFramebuffer(36160,sp.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function pp(np){return Ou&&np.isWebGLMultisampleRenderTarget?Math.min(Fu,np.samples):0}function gp(np){var sp=Lu.render.frame;Nu.get(np)!==sp&&(Nu.set(np,sp),np.update())}var Ap=!1,Mp=!1;function $p(np,sp){np&&np.isWebGLRenderTarget&&(Ap===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ap=!0),np=np.texture),_c(np,sp)}function Tp(np,sp){np&&np.isWebGLCubeRenderTarget&&(Mp===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Mp=!0),np=np.texture),np&&np.isCubeTexture||Array.isArray(np.image)&&np.image.length===6?tp(np,sp):op(np,sp)}this.allocateTextureUnit=Zu,this.resetTextureUnits=Ju,this.setTexture2D=_c,this.setTexture2DArray=_f,this.setTexture3D=ep,this.setTextureCube=tp,this.setTextureCubeDynamic=op,this.setupRenderTarget=rp,this.updateRenderTargetMipmap=fp,this.updateMultisampleRenderTarget=up,this.safeSetTexture2D=$p,this.safeSetTextureCube=Tp}function WebGLUtils(_u,Tu,Cu){var Pu=Cu.isWebGL2;function Bu(Ru){var Lu;if(Ru===UnsignedByteType)return 5121;if(Ru===UnsignedShort4444Type)return 32819;if(Ru===UnsignedShort5551Type)return 32820;if(Ru===UnsignedShort565Type)return 33635;if(Ru===ByteType)return 5120;if(Ru===ShortType)return 5122;if(Ru===UnsignedShortType)return 5123;if(Ru===IntType)return 5124;if(Ru===UnsignedIntType)return 5125;if(Ru===FloatType)return 5126;if(Ru===HalfFloatType)return Pu?5131:(Lu=Tu.get("OES_texture_half_float"),Lu!==null?Lu.HALF_FLOAT_OES:null);if(Ru===AlphaFormat)return 6406;if(Ru===RGBFormat)return 6407;if(Ru===RGBAFormat)return 6408;if(Ru===LuminanceFormat)return 6409;if(Ru===LuminanceAlphaFormat)return 6410;if(Ru===DepthFormat)return 6402;if(Ru===DepthStencilFormat)return 34041;if(Ru===RedFormat)return 6403;if(Ru===RedIntegerFormat)return 36244;if(Ru===RGFormat)return 33319;if(Ru===RGIntegerFormat)return 33320;if(Ru===RGBIntegerFormat)return 36248;if(Ru===RGBAIntegerFormat)return 36249;if(Ru===RGB_S3TC_DXT1_Format||Ru===RGBA_S3TC_DXT1_Format||Ru===RGBA_S3TC_DXT3_Format||Ru===RGBA_S3TC_DXT5_Format)if(Lu=Tu.get("WEBGL_compressed_texture_s3tc"),Lu!==null){if(Ru===RGB_S3TC_DXT1_Format)return Lu.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ru===RGBA_S3TC_DXT1_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ru===RGBA_S3TC_DXT3_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ru===RGBA_S3TC_DXT5_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Ru===RGB_PVRTC_4BPPV1_Format||Ru===RGB_PVRTC_2BPPV1_Format||Ru===RGBA_PVRTC_4BPPV1_Format||Ru===RGBA_PVRTC_2BPPV1_Format)if(Lu=Tu.get("WEBGL_compressed_texture_pvrtc"),Lu!==null){if(Ru===RGB_PVRTC_4BPPV1_Format)return Lu.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ru===RGB_PVRTC_2BPPV1_Format)return Lu.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ru===RGBA_PVRTC_4BPPV1_Format)return Lu.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ru===RGBA_PVRTC_2BPPV1_Format)return Lu.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Ru===RGB_ETC1_Format)return Lu=Tu.get("WEBGL_compressed_texture_etc1"),Lu!==null?Lu.COMPRESSED_RGB_ETC1_WEBGL:null;if((Ru===RGB_ETC2_Format||Ru===RGBA_ETC2_EAC_Format)&&(Lu=Tu.get("WEBGL_compressed_texture_etc"),Lu!==null)){if(Ru===RGB_ETC2_Format)return Lu.COMPRESSED_RGB8_ETC2;if(Ru===RGBA_ETC2_EAC_Format)return Lu.COMPRESSED_RGBA8_ETC2_EAC}if(Ru===RGBA_ASTC_4x4_Format||Ru===RGBA_ASTC_5x4_Format||Ru===RGBA_ASTC_5x5_Format||Ru===RGBA_ASTC_6x5_Format||Ru===RGBA_ASTC_6x6_Format||Ru===RGBA_ASTC_8x5_Format||Ru===RGBA_ASTC_8x6_Format||Ru===RGBA_ASTC_8x8_Format||Ru===RGBA_ASTC_10x5_Format||Ru===RGBA_ASTC_10x6_Format||Ru===RGBA_ASTC_10x8_Format||Ru===RGBA_ASTC_10x10_Format||Ru===RGBA_ASTC_12x10_Format||Ru===RGBA_ASTC_12x12_Format||Ru===SRGB8_ALPHA8_ASTC_4x4_Format||Ru===SRGB8_ALPHA8_ASTC_5x4_Format||Ru===SRGB8_ALPHA8_ASTC_5x5_Format||Ru===SRGB8_ALPHA8_ASTC_6x5_Format||Ru===SRGB8_ALPHA8_ASTC_6x6_Format||Ru===SRGB8_ALPHA8_ASTC_8x5_Format||Ru===SRGB8_ALPHA8_ASTC_8x6_Format||Ru===SRGB8_ALPHA8_ASTC_8x8_Format||Ru===SRGB8_ALPHA8_ASTC_10x5_Format||Ru===SRGB8_ALPHA8_ASTC_10x6_Format||Ru===SRGB8_ALPHA8_ASTC_10x8_Format||Ru===SRGB8_ALPHA8_ASTC_10x10_Format||Ru===SRGB8_ALPHA8_ASTC_12x10_Format||Ru===SRGB8_ALPHA8_ASTC_12x12_Format)return Lu=Tu.get("WEBGL_compressed_texture_astc"),Lu!==null?Ru:null;if(Ru===RGBA_BPTC_Format)return Lu=Tu.get("EXT_texture_compression_bptc"),Lu!==null?Ru:null;if(Ru===UnsignedInt248Type)return Pu?34042:(Lu=Tu.get("WEBGL_depth_texture"),Lu!==null?Lu.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Bu}}function ArrayCamera(_u){PerspectiveCamera.call(this),this.cameras=_u||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(_u){return this._targetRay!==null&&this._targetRay.dispatchEvent(_u),this._grip!==null&&this._grip.dispatchEvent(_u),this},disconnect:function(_u){return this.dispatchEvent({type:"disconnected",data:_u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(_u,Tu,Cu){var Pu=null,Bu=null,Ru=this._targetRay,Lu=this._grip;return _u&&(Ru!==null&&(Pu=Tu.getPose(_u.targetRaySpace,Cu),Pu!==null&&(Ru.matrix.fromArray(Pu.transform.matrix),Ru.matrix.decompose(Ru.position,Ru.rotation,Ru.scale))),Lu!==null&&_u.gripSpace&&(Bu=Tu.getPose(_u.gripSpace,Cu),Bu!==null&&(Lu.matrix.fromArray(Bu.transform.matrix),Lu.matrix.decompose(Lu.position,Lu.rotation,Lu.scale)))),Ru!==null&&(Ru.visible=Pu!==null),Lu!==null&&(Lu.visible=Bu!==null),this}});function WebXRManager(_u,Tu){var Cu=this,Pu=null,Bu=1,Ru=null,Lu="local-floor",Ou=null,Du=[],$u=new Map,ku=new PerspectiveCamera;ku.layers.enable(1),ku.viewport=new Vector4;var Fu=new PerspectiveCamera;Fu.layers.enable(2),Fu.viewport=new Vector4;var Nu=[ku,Fu],Vu=new ArrayCamera;Vu.layers.enable(1),Vu.layers.enable(2);var Gu=null,Hu=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Xu){var Ju=Du[Xu];return Ju===void 0&&(Ju=new WebXRController,Du[Xu]=Ju),Ju.getTargetRaySpace()},this.getControllerGrip=function(Xu){var Ju=Du[Xu];return Ju===void 0&&(Ju=new WebXRController,Du[Xu]=Ju),Ju.getGripSpace()};function ju(Xu){var Ju=$u.get(Xu.inputSource);Ju&&Ju.dispatchEvent({type:Xu.type})}function Uu(){$u.forEach(function(Xu,Ju){Xu.disconnect(Ju)}),$u.clear(),_u.setFramebuffer(null),_u.setRenderTarget(_u.getRenderTarget()),Ku.stop(),Cu.isPresenting=!1,Cu.dispatchEvent({type:"sessionend"})}function zu(Xu){Ru=Xu,Ku.setContext(Pu),Ku.start(),Cu.isPresenting=!0,Cu.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Xu){Bu=Xu,Cu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Xu){Lu=Xu,Cu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Ru},this.getSession=function(){return Pu},this.setSession=function(Xu){if(Pu=Xu,Pu!==null){Pu.addEventListener("select",ju),Pu.addEventListener("selectstart",ju),Pu.addEventListener("selectend",ju),Pu.addEventListener("squeeze",ju),Pu.addEventListener("squeezestart",ju),Pu.addEventListener("squeezeend",ju),Pu.addEventListener("end",Uu);var Ju=Tu.getContextAttributes();Ju.xrCompatible!==!0&&Tu.makeXRCompatible();var Zu={antialias:Ju.antialias,alpha:Ju.alpha,depth:Ju.depth,stencil:Ju.stencil,framebufferScaleFactor:Bu},_c=new XRWebGLLayer(Pu,Tu,Zu);Pu.updateRenderState({baseLayer:_c}),Pu.requestReferenceSpace(Lu).then(zu),Pu.addEventListener("inputsourceschange",Wu)}};function Wu(Xu){for(var Ju=Pu.inputSources,Zu=0;Zu<Du.length;Zu++)$u.set(Ju[Zu],Du[Zu]);for(var Zu=0;Zu<Xu.removed.length;Zu++){var _c=Xu.removed[Zu],_f=$u.get(_c);_f&&(_f.dispatchEvent({type:"disconnected",data:_c}),$u.delete(_c))}for(var Zu=0;Zu<Xu.added.length;Zu++){var _c=Xu.added[Zu],_f=$u.get(_c);_f&&_f.dispatchEvent({type:"connected",data:_c})}}var Qu=new Vector3,qu=new Vector3;function Yu(Xu,Ju,Zu){Qu.setFromMatrixPosition(Ju.matrixWorld),qu.setFromMatrixPosition(Zu.matrixWorld);var _c=Qu.distanceTo(qu),_f=Ju.projectionMatrix.elements,ep=Zu.projectionMatrix.elements,tp=_f[14]/(_f[10]-1),op=_f[14]/(_f[10]+1),hp=(_f[9]+1)/_f[5],cp=(_f[9]-1)/_f[5],Sp=(_f[8]-1)/_f[0],yp=(ep[8]+1)/ep[0],Rp=tp*Sp,wp=tp*yp,Pp=_c/(-Sp+yp),Ep=Pp*-Sp;Ju.matrixWorld.decompose(Xu.position,Xu.quaternion,Xu.scale),Xu.translateX(Ep),Xu.translateZ(Pp),Xu.matrixWorld.compose(Xu.position,Xu.quaternion,Xu.scale),Xu.matrixWorldInverse.getInverse(Xu.matrixWorld);var ip=tp+Pp,rp=op+Pp,fp=Rp-Ep,up=wp+(_c-Ep),pp=hp*op/rp*ip,gp=cp*op/rp*ip;Xu.projectionMatrix.makePerspective(fp,up,pp,gp,ip,rp)}function Xc(Xu,Ju){Ju===null?Xu.matrixWorld.copy(Xu.matrix):Xu.matrixWorld.multiplyMatrices(Ju.matrixWorld,Xu.matrix),Xu.matrixWorldInverse.getInverse(Xu.matrixWorld)}this.getCamera=function(Xu){Vu.near=Fu.near=ku.near=Xu.near,Vu.far=Fu.far=ku.far=Xu.far,(Gu!==Vu.near||Hu!==Vu.far)&&(Pu.updateRenderState({depthNear:Vu.near,depthFar:Vu.far}),Gu=Vu.near,Hu=Vu.far);var Ju=Xu.parent,Zu=Vu.cameras;Xc(Vu,Ju);for(var _c=0;_c<Zu.length;_c++)Xc(Zu[_c],Ju);Xu.matrixWorld.copy(Vu.matrixWorld);for(var _f=Xu.children,_c=0,ep=_f.length;_c<ep;_c++)_f[_c].updateMatrixWorld(!0);return Zu.length===2?Yu(Vu,ku,Fu):Vu.projectionMatrix.copy(ku.projectionMatrix),Vu};var _h=null;function _d(Xu,Ju){if(Ou=Ju.getViewerPose(Ru),Ou!==null){var Zu=Ou.views,_c=Pu.renderState.baseLayer;_u.setFramebuffer(_c.framebuffer);var _f=!1;Zu.length!==Vu.cameras.length&&(Vu.cameras.length=0,_f=!0);for(var ep=0;ep<Zu.length;ep++){var tp=Zu[ep],op=_c.getViewport(tp),hp=Nu[ep];hp.matrix.fromArray(tp.transform.matrix),hp.projectionMatrix.fromArray(tp.projectionMatrix),hp.viewport.set(op.x,op.y,op.width,op.height),ep===0&&Vu.matrix.copy(hp.matrix),_f===!0&&Vu.cameras.push(hp)}}for(var cp=Pu.inputSources,ep=0;ep<Du.length;ep++){var Sp=Du[ep],yp=cp[ep];Sp.update(yp,Ju,Ru)}_h&&_h(Xu,Ju)}var Ku=new WebGLAnimation;Ku.setAnimationLoop(_d),this.setAnimationLoop=function(Xu){_h=Xu},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(_u){function Tu(Uu,zu){Uu.fogColor.value.copy(zu.color),zu.isFog?(Uu.fogNear.value=zu.near,Uu.fogFar.value=zu.far):zu.isFogExp2&&(Uu.fogDensity.value=zu.density)}function Cu(Uu,zu,Wu,Qu,qu){zu.isMeshBasicMaterial?Pu(Uu,zu):zu.isMeshLambertMaterial?(Pu(Uu,zu),Du(Uu,zu)):zu.isMeshToonMaterial?(Pu(Uu,zu),ku(Uu,zu)):zu.isMeshPhongMaterial?(Pu(Uu,zu),$u(Uu,zu)):zu.isMeshStandardMaterial?(Pu(Uu,zu,Wu),zu.isMeshPhysicalMaterial?Nu(Uu,zu,Wu):Fu(Uu,zu,Wu)):zu.isMeshMatcapMaterial?(Pu(Uu,zu),Vu(Uu,zu)):zu.isMeshDepthMaterial?(Pu(Uu,zu),Gu(Uu,zu)):zu.isMeshDistanceMaterial?(Pu(Uu,zu),Hu(Uu,zu)):zu.isMeshNormalMaterial?(Pu(Uu,zu),ju(Uu,zu)):zu.isLineBasicMaterial?(Bu(Uu,zu),zu.isLineDashedMaterial&&Ru(Uu,zu)):zu.isPointsMaterial?Lu(Uu,zu,Qu,qu):zu.isSpriteMaterial?Ou(Uu,zu):zu.isShadowMaterial?(Uu.color.value.copy(zu.color),Uu.opacity.value=zu.opacity):zu.isShaderMaterial&&(zu.uniformsNeedUpdate=!1)}function Pu(Uu,zu,Wu){Uu.opacity.value=zu.opacity,zu.color&&Uu.diffuse.value.copy(zu.color),zu.emissive&&Uu.emissive.value.copy(zu.emissive).multiplyScalar(zu.emissiveIntensity),zu.map&&(Uu.map.value=zu.map),zu.alphaMap&&(Uu.alphaMap.value=zu.alphaMap),zu.specularMap&&(Uu.specularMap.value=zu.specularMap);var Qu=zu.envMap||Wu;Qu&&(Uu.envMap.value=Qu,Uu.flipEnvMap.value=Qu.isCubeTexture?-1:1,Uu.reflectivity.value=zu.reflectivity,Uu.refractionRatio.value=zu.refractionRatio,Uu.maxMipLevel.value=_u.get(Qu).__maxMipLevel),zu.lightMap&&(Uu.lightMap.value=zu.lightMap,Uu.lightMapIntensity.value=zu.lightMapIntensity),zu.aoMap&&(Uu.aoMap.value=zu.aoMap,Uu.aoMapIntensity.value=zu.aoMapIntensity);var qu;zu.map?qu=zu.map:zu.specularMap?qu=zu.specularMap:zu.displacementMap?qu=zu.displacementMap:zu.normalMap?qu=zu.normalMap:zu.bumpMap?qu=zu.bumpMap:zu.roughnessMap?qu=zu.roughnessMap:zu.metalnessMap?qu=zu.metalnessMap:zu.alphaMap?qu=zu.alphaMap:zu.emissiveMap&&(qu=zu.emissiveMap),qu!==void 0&&(qu.isWebGLRenderTarget&&(qu=qu.texture),qu.matrixAutoUpdate===!0&&qu.updateMatrix(),Uu.uvTransform.value.copy(qu.matrix));var Yu;zu.aoMap?Yu=zu.aoMap:zu.lightMap&&(Yu=zu.lightMap),Yu!==void 0&&(Yu.isWebGLRenderTarget&&(Yu=Yu.texture),Yu.matrixAutoUpdate===!0&&Yu.updateMatrix(),Uu.uv2Transform.value.copy(Yu.matrix))}function Bu(Uu,zu){Uu.diffuse.value.copy(zu.color),Uu.opacity.value=zu.opacity}function Ru(Uu,zu){Uu.dashSize.value=zu.dashSize,Uu.totalSize.value=zu.dashSize+zu.gapSize,Uu.scale.value=zu.scale}function Lu(Uu,zu,Wu,Qu){Uu.diffuse.value.copy(zu.color),Uu.opacity.value=zu.opacity,Uu.size.value=zu.size*Wu,Uu.scale.value=Qu*.5,zu.map&&(Uu.map.value=zu.map),zu.alphaMap&&(Uu.alphaMap.value=zu.alphaMap);var qu;zu.map?qu=zu.map:zu.alphaMap&&(qu=zu.alphaMap),qu!==void 0&&(qu.matrixAutoUpdate===!0&&qu.updateMatrix(),Uu.uvTransform.value.copy(qu.matrix))}function Ou(Uu,zu){Uu.diffuse.value.copy(zu.color),Uu.opacity.value=zu.opacity,Uu.rotation.value=zu.rotation,zu.map&&(Uu.map.value=zu.map),zu.alphaMap&&(Uu.alphaMap.value=zu.alphaMap);var Wu;zu.map?Wu=zu.map:zu.alphaMap&&(Wu=zu.alphaMap),Wu!==void 0&&(Wu.matrixAutoUpdate===!0&&Wu.updateMatrix(),Uu.uvTransform.value.copy(Wu.matrix))}function Du(Uu,zu){zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap)}function $u(Uu,zu){Uu.specular.value.copy(zu.specular),Uu.shininess.value=Math.max(zu.shininess,1e-4),zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function ku(Uu,zu){Uu.specular.value.copy(zu.specular),Uu.shininess.value=Math.max(zu.shininess,1e-4),zu.gradientMap&&(Uu.gradientMap.value=zu.gradientMap),zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function Fu(Uu,zu,Wu){Uu.roughness.value=zu.roughness,Uu.metalness.value=zu.metalness,zu.roughnessMap&&(Uu.roughnessMap.value=zu.roughnessMap),zu.metalnessMap&&(Uu.metalnessMap.value=zu.metalnessMap),zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias),(zu.envMap||Wu)&&(Uu.envMapIntensity.value=zu.envMapIntensity)}function Nu(Uu,zu,Wu){Fu(Uu,zu,Wu),Uu.reflectivity.value=zu.reflectivity,Uu.clearcoat.value=zu.clearcoat,Uu.clearcoatRoughness.value=zu.clearcoatRoughness,zu.sheen&&Uu.sheen.value.copy(zu.sheen),zu.clearcoatMap&&(Uu.clearcoatMap.value=zu.clearcoatMap),zu.clearcoatRoughnessMap&&(Uu.clearcoatRoughnessMap.value=zu.clearcoatRoughnessMap),zu.clearcoatNormalMap&&(Uu.clearcoatNormalScale.value.copy(zu.clearcoatNormalScale),Uu.clearcoatNormalMap.value=zu.clearcoatNormalMap,zu.side===BackSide&&Uu.clearcoatNormalScale.value.negate()),Uu.transparency.value=zu.transparency}function Vu(Uu,zu){zu.matcap&&(Uu.matcap.value=zu.matcap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function Gu(Uu,zu){zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function Hu(Uu,zu){zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias),Uu.referencePosition.value.copy(zu.referencePosition),Uu.nearDistance.value=zu.nearDistance,Uu.farDistance.value=zu.farDistance}function ju(Uu,zu){zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}return{refreshFogUniforms:Tu,refreshMaterialUniforms:Cu}}function WebGLRenderer(_u){_u=_u||{};var Tu=_u.canvas!==void 0?_u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Cu=_u.context!==void 0?_u.context:null,Pu=_u.alpha!==void 0?_u.alpha:!1,Bu=_u.depth!==void 0?_u.depth:!0,Ru=_u.stencil!==void 0?_u.stencil:!0,Lu=_u.antialias!==void 0?_u.antialias:!1,Ou=_u.premultipliedAlpha!==void 0?_u.premultipliedAlpha:!0,Du=_u.preserveDrawingBuffer!==void 0?_u.preserveDrawingBuffer:!1,$u=_u.powerPreference!==void 0?_u.powerPreference:"default",ku=_u.failIfMajorPerformanceCaveat!==void 0?_u.failIfMajorPerformanceCaveat:!1,Fu=null,Nu=null;this.domElement=Tu,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Vu=this,Gu=!1,Hu=null,ju=0,Uu=0,zu=null,Wu=null,Qu=-1,qu={geometry:null,program:null,wireframe:!1},Yu=null,Xc=null,_h=new Vector4,_d=new Vector4,Ku=null,Xu=Tu.width,Ju=Tu.height,Zu=1,_c=null,_f=null,ep=new Vector4(0,0,Xu,Ju),tp=new Vector4(0,0,Xu,Ju),op=!1,hp=new Frustum,cp=new WebGLClipping,Sp=!1,yp=!1,Rp=new Matrix4,wp=new Vector3;function Pp(){return zu===null?Zu:1}var Ep;try{var ip={alpha:Pu,depth:Bu,stencil:Ru,antialias:Lu,premultipliedAlpha:Ou,preserveDrawingBuffer:Du,powerPreference:$u,failIfMajorPerformanceCaveat:ku};if(Tu.addEventListener("webglcontextlost",jp,!1),Tu.addEventListener("webglcontextrestored",Yp,!1),Ep=Cu||Tu.getContext("webgl",ip)||Tu.getContext("experimental-webgl",ip),Ep===null)throw Tu.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Ep.getShaderPrecisionFormat===void 0&&(Ep.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(mp){throw console.error("THREE.WebGLRenderer: "+mp.message),mp}var rp,fp,up,pp,gp,Ap,Mp,$p,Tp,np,sp,Ip,Cp,Vp,Fp,Gp,qp,Wp;function Jp(){rp=new WebGLExtensions(Ep),fp=new WebGLCapabilities(Ep,rp,_u),fp.isWebGL2===!1&&(rp.get("WEBGL_depth_texture"),rp.get("OES_texture_float"),rp.get("OES_texture_half_float"),rp.get("OES_texture_half_float_linear"),rp.get("OES_standard_derivatives"),rp.get("OES_element_index_uint"),rp.get("ANGLE_instanced_arrays")),rp.get("OES_texture_float_linear"),Wp=new WebGLUtils(Ep,rp,fp),up=new WebGLState(Ep,rp,fp),up.scissor(_d.copy(tp).multiplyScalar(Zu).floor()),up.viewport(_h.copy(ep).multiplyScalar(Zu).floor()),pp=new WebGLInfo(Ep),gp=new WebGLProperties,Ap=new WebGLTextures(Ep,rp,up,gp,fp,Wp,pp),Mp=new WebGLAttributes(Ep,fp),$p=new WebGLGeometries(Ep,Mp,pp),Tp=new WebGLObjects(Ep,$p,Mp,pp),Fp=new WebGLMorphtargets(Ep),np=new WebGLPrograms(Vu,rp,fp),sp=new WebGLMaterials(gp),Ip=new WebGLRenderLists,Cp=new WebGLRenderStates,Vp=new WebGLBackground(Vu,up,Tp,Ou),Gp=new WebGLBufferRenderer(Ep,rp,pp,fp),qp=new WebGLIndexedBufferRenderer(Ep,rp,pp,fp),pp.programs=np.programs,Vu.capabilities=fp,Vu.extensions=rp,Vu.properties=gp,Vu.renderLists=Ip,Vu.state=up,Vu.info=pp}Jp();var Hp=new WebXRManager(Vu,Ep);this.xr=Hp;var Kp=new WebGLShadowMap(Vu,Tp,fp.maxTextureSize);this.shadowMap=Kp,this.getContext=function(){return Ep},this.getContextAttributes=function(){return Ep.getContextAttributes()},this.forceContextLoss=function(){var mp=rp.get("WEBGL_lose_context");mp&&mp.loseContext()},this.forceContextRestore=function(){var mp=rp.get("WEBGL_lose_context");mp&&mp.restoreContext()},this.getPixelRatio=function(){return Zu},this.setPixelRatio=function(mp){mp!==void 0&&(Zu=mp,this.setSize(Xu,Ju,!1))},this.getSize=function(mp){return mp===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),mp=new Vector2),mp.set(Xu,Ju)},this.setSize=function(mp,kp,Lp){if(Hp.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Xu=mp,Ju=kp,Tu.width=Math.floor(mp*Zu),Tu.height=Math.floor(kp*Zu),Lp!==!1&&(Tu.style.width=mp+"px",Tu.style.height=kp+"px"),this.setViewport(0,0,mp,kp)},this.getDrawingBufferSize=function(mp){return mp===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),mp=new Vector2),mp.set(Xu*Zu,Ju*Zu).floor()},this.setDrawingBufferSize=function(mp,kp,Lp){Xu=mp,Ju=kp,Zu=Lp,Tu.width=Math.floor(mp*Lp),Tu.height=Math.floor(kp*Lp),this.setViewport(0,0,mp,kp)},this.getCurrentViewport=function(mp){return mp===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),mp=new Vector4),mp.copy(_h)},this.getViewport=function(mp){return mp.copy(ep)},this.setViewport=function(mp,kp,Lp,Np){mp.isVector4?ep.set(mp.x,mp.y,mp.z,mp.w):ep.set(mp,kp,Lp,Np),up.viewport(_h.copy(ep).multiplyScalar(Zu).floor())},this.getScissor=function(mp){return mp.copy(tp)},this.setScissor=function(mp,kp,Lp,Np){mp.isVector4?tp.set(mp.x,mp.y,mp.z,mp.w):tp.set(mp,kp,Lp,Np),up.scissor(_d.copy(tp).multiplyScalar(Zu).floor())},this.getScissorTest=function(){return op},this.setScissorTest=function(mp){up.setScissorTest(op=mp)},this.setOpaqueSort=function(mp){_c=mp},this.setTransparentSort=function(mp){_f=mp},this.getClearColor=function(){return Vp.getClearColor()},this.setClearColor=function(){Vp.setClearColor.apply(Vp,arguments)},this.getClearAlpha=function(){return Vp.getClearAlpha()},this.setClearAlpha=function(){Vp.setClearAlpha.apply(Vp,arguments)},this.clear=function(mp,kp,Lp){var Np=0;(mp===void 0||mp)&&(Np|=16384),(kp===void 0||kp)&&(Np|=256),(Lp===void 0||Lp)&&(Np|=1024),Ep.clear(Np)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){Tu.removeEventListener("webglcontextlost",jp,!1),Tu.removeEventListener("webglcontextrestored",Yp,!1),Ip.dispose(),Cp.dispose(),gp.dispose(),Tp.dispose(),Hp.dispose(),Sm.stop()};function jp(mp){mp.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Gu=!0}function Yp(){console.log("THREE.WebGLRenderer: Context Restored."),Gu=!1,Jp()}function _p(mp){var kp=mp.target;kp.removeEventListener("dispose",_p),Qp(kp)}function Qp(mp){Zp(mp),gp.remove(mp)}function Zp(mp){var kp=gp.get(mp).program;mp.program=void 0,kp!==void 0&&np.releaseProgram(kp)}function tm(mp,kp){mp.render(function(Lp){Vu.renderBufferImmediate(Lp,kp)})}this.renderBufferImmediate=function(mp,kp){up.initAttributes();var Lp=gp.get(mp);mp.hasPositions&&!Lp.position&&(Lp.position=Ep.createBuffer()),mp.hasNormals&&!Lp.normal&&(Lp.normal=Ep.createBuffer()),mp.hasUvs&&!Lp.uv&&(Lp.uv=Ep.createBuffer()),mp.hasColors&&!Lp.color&&(Lp.color=Ep.createBuffer());var Np=kp.getAttributes();mp.hasPositions&&(Ep.bindBuffer(34962,Lp.position),Ep.bufferData(34962,mp.positionArray,35048),up.enableAttribute(Np.position),Ep.vertexAttribPointer(Np.position,3,5126,!1,0,0)),mp.hasNormals&&(Ep.bindBuffer(34962,Lp.normal),Ep.bufferData(34962,mp.normalArray,35048),up.enableAttribute(Np.normal),Ep.vertexAttribPointer(Np.normal,3,5126,!1,0,0)),mp.hasUvs&&(Ep.bindBuffer(34962,Lp.uv),Ep.bufferData(34962,mp.uvArray,35048),up.enableAttribute(Np.uv),Ep.vertexAttribPointer(Np.uv,2,5126,!1,0,0)),mp.hasColors&&(Ep.bindBuffer(34962,Lp.color),Ep.bufferData(34962,mp.colorArray,35048),up.enableAttribute(Np.color),Ep.vertexAttribPointer(Np.color,3,5126,!1,0,0)),up.disableUnusedAttributes(),Ep.drawArrays(4,0,mp.count),mp.count=0};var em=new Scene;this.renderBufferDirect=function(mp,kp,Lp,Np,Xp,cm){kp===null&&(kp=em);var um=Xp.isMesh&&Xp.matrixWorld.determinant()<0,im=Mm(mp,kp,Np,Xp);up.setMaterial(Np,um);var am=!1;(qu.geometry!==Lp.id||qu.program!==im.id||qu.wireframe!==(Np.wireframe===!0))&&(qu.geometry=Lp.id,qu.program=im.id,qu.wireframe=Np.wireframe===!0,am=!0),(Np.morphTargets||Np.morphNormals)&&(Fp.update(Xp,Lp,Np,im),am=!0),Xp.isInstancedMesh===!0&&(am=!0);var fm=Lp.index,Am=Lp.attributes.position;if(fm===null){if(Am===void 0||Am.count===0)return}else if(fm.count===0)return;var ap=1;Np.wireframe===!0&&(fm=$p.getWireframeAttribute(Lp),ap=2);var vp,bp=Gp;fm!==null&&(vp=Mp.get(fm),bp=qp,bp.setIndex(vp)),am&&(lm(Xp,Lp,Np,im),fm!==null&&Ep.bindBuffer(34963,vp.buffer));var Bp=fm!==null?fm.count:Am.count,Up=Lp.drawRange.start*ap,om=Lp.drawRange.count*ap,sm=cm!==null?cm.start*ap:0,wm=cm!==null?cm.count*ap:1/0,nm=Math.max(Up,sm),Em=Math.min(Bp,Up+om,sm+wm)-1,Lm=Math.max(0,Em-nm+1);if(Lm!==0){if(Xp.isMesh)Np.wireframe===!0?(up.setLineWidth(Np.wireframeLinewidth*Pp()),bp.setMode(1)):bp.setMode(4);else if(Xp.isLine){var Wm=Np.linewidth;Wm===void 0&&(Wm=1),up.setLineWidth(Wm*Pp()),Xp.isLineSegments?bp.setMode(1):Xp.isLineLoop?bp.setMode(2):bp.setMode(3)}else Xp.isPoints?bp.setMode(0):Xp.isSprite&&bp.setMode(4);if(Xp.isInstancedMesh)bp.renderInstances(Lp,nm,Lm,Xp.count);else if(Lp.isInstancedBufferGeometry){var qm=Math.min(Lp.instanceCount,Lp._maxInstanceCount);bp.renderInstances(Lp,nm,Lm,qm)}else bp.render(nm,Lm)}};function lm(mp,kp,Lp,Np){if(!(fp.isWebGL2===!1&&(mp.isInstancedMesh||kp.isInstancedBufferGeometry)&&rp.get("ANGLE_instanced_arrays")===null)){up.initAttributes();var Xp=kp.attributes,cm=Np.getAttributes(),um=Lp.defaultAttributeValues;for(var im in cm){var am=cm[im];if(am>=0){var fm=Xp[im];if(fm!==void 0){var Am=fm.normalized,ap=fm.itemSize,vp=Mp.get(fm);if(vp===void 0)continue;var bp=vp.buffer,Bp=vp.type,Up=vp.bytesPerElement;if(fm.isInterleavedBufferAttribute){var om=fm.data,sm=om.stride,wm=fm.offset;om&&om.isInstancedInterleavedBuffer?(up.enableAttributeAndDivisor(am,om.meshPerAttribute),kp._maxInstanceCount===void 0&&(kp._maxInstanceCount=om.meshPerAttribute*om.count)):up.enableAttribute(am),Ep.bindBuffer(34962,bp),up.vertexAttribPointer(am,ap,Bp,Am,sm*Up,wm*Up)}else fm.isInstancedBufferAttribute?(up.enableAttributeAndDivisor(am,fm.meshPerAttribute),kp._maxInstanceCount===void 0&&(kp._maxInstanceCount=fm.meshPerAttribute*fm.count)):up.enableAttribute(am),Ep.bindBuffer(34962,bp),up.vertexAttribPointer(am,ap,Bp,Am,0,0)}else if(im==="instanceMatrix"){var vp=Mp.get(mp.instanceMatrix);if(vp===void 0)continue;var bp=vp.buffer,Bp=vp.type;up.enableAttributeAndDivisor(am+0,1),up.enableAttributeAndDivisor(am+1,1),up.enableAttributeAndDivisor(am+2,1),up.enableAttributeAndDivisor(am+3,1),Ep.bindBuffer(34962,bp),Ep.vertexAttribPointer(am+0,4,Bp,!1,64,0),Ep.vertexAttribPointer(am+1,4,Bp,!1,64,16),Ep.vertexAttribPointer(am+2,4,Bp,!1,64,32),Ep.vertexAttribPointer(am+3,4,Bp,!1,64,48)}else if(um!==void 0){var nm=um[im];if(nm!==void 0)switch(nm.length){case 2:Ep.vertexAttrib2fv(am,nm);break;case 3:Ep.vertexAttrib3fv(am,nm);break;case 4:Ep.vertexAttrib4fv(am,nm);break;default:Ep.vertexAttrib1fv(am,nm)}}}}up.disableUnusedAttributes()}}this.compile=function(mp,kp){Nu=Cp.get(mp,kp),Nu.init(),mp.traverse(function(Np){Np.isLight&&(Nu.pushLight(Np),Np.castShadow&&Nu.pushShadow(Np))}),Nu.setupLights(kp);const Lp={};mp.traverse(function(Np){let Xp=Np.material;if(Xp)if(Array.isArray(Xp))for(let cm=0;cm<Xp.length;cm++){let um=Xp[cm];um.uuid in Lp||(gm(um,mp,Np),Lp[um.uuid]=!0)}else Xp.uuid in Lp||(gm(Xp,mp,Np),Lp[Xp.uuid]=!0)})};var pm=null;function mm(mp){Hp.isPresenting||pm&&pm(mp)}var Sm=new WebGLAnimation;Sm.setAnimationLoop(mm),typeof window!="undefined"&&Sm.setContext(window),this.setAnimationLoop=function(mp){pm=mp,Hp.setAnimationLoop(mp),Sm.start()},this.render=function(mp,kp){var Lp,Np;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Lp=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Np=arguments[3]),!(kp&&kp.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Gu){qu.geometry=null,qu.program=null,qu.wireframe=!1,Qu=-1,Yu=null,mp.autoUpdate===!0&&mp.updateMatrixWorld(),kp.parent===null&&kp.updateMatrixWorld(),Hp.enabled&&Hp.isPresenting&&(kp=Hp.getCamera(kp)),mp.onBeforeRender(Vu,mp,kp,Lp||zu),Nu=Cp.get(mp,kp),Nu.init(),Rp.multiplyMatrices(kp.projectionMatrix,kp.matrixWorldInverse),hp.setFromProjectionMatrix(Rp),yp=this.localClippingEnabled,Sp=cp.init(this.clippingPlanes,yp,kp),Fu=Ip.get(mp,kp),Fu.init(),dm(mp,kp,0,Vu.sortObjects),Fu.finish(),Vu.sortObjects===!0&&Fu.sort(_c,_f),Sp&&cp.beginShadows();var Xp=Nu.state.shadowsArray;Kp.render(Xp,mp,kp),Nu.setupLights(kp),Sp&&cp.endShadows(),this.info.autoReset&&this.info.reset(),Lp!==void 0&&this.setRenderTarget(Lp),Vp.render(Fu,mp,kp,Np);var cm=Fu.opaque,um=Fu.transparent;if(mp.overrideMaterial){var im=mp.overrideMaterial;cm.length&&_m(cm,mp,kp,im),um.length&&_m(um,mp,kp,im)}else cm.length&&_m(cm,mp,kp),um.length&&_m(um,mp,kp);mp.onAfterRender(Vu,mp,kp),zu!==null&&(Ap.updateRenderTargetMipmap(zu),Ap.updateMultisampleRenderTarget(zu)),up.buffers.depth.setTest(!0),up.buffers.depth.setMask(!0),up.buffers.color.setMask(!0),up.setPolygonOffset(!1),Fu=null,Nu=null}};function dm(mp,kp,Lp,Np){if(mp.visible!==!1){var Xp=mp.layers.test(kp.layers);if(Xp){if(mp.isGroup)Lp=mp.renderOrder;else if(mp.isLOD)mp.autoUpdate===!0&&mp.update(kp);else if(mp.isLight)Nu.pushLight(mp),mp.castShadow&&Nu.pushShadow(mp);else if(mp.isSprite){if(!mp.frustumCulled||hp.intersectsSprite(mp)){Np&&wp.setFromMatrixPosition(mp.matrixWorld).applyMatrix4(Rp);var cm=Tp.update(mp),um=mp.material;um.visible&&Fu.push(mp,cm,um,Lp,wp.z,null)}}else if(mp.isImmediateRenderObject)Np&&wp.setFromMatrixPosition(mp.matrixWorld).applyMatrix4(Rp),Fu.push(mp,null,mp.material,Lp,wp.z,null);else if((mp.isMesh||mp.isLine||mp.isPoints)&&(mp.isSkinnedMesh&&mp.skeleton.frame!==pp.render.frame&&(mp.skeleton.update(),mp.skeleton.frame=pp.render.frame),!mp.frustumCulled||hp.intersectsObject(mp))){Np&&wp.setFromMatrixPosition(mp.matrixWorld).applyMatrix4(Rp);var cm=Tp.update(mp),um=mp.material;if(Array.isArray(um))for(var im=cm.groups,am=0,fm=im.length;am<fm;am++){var Am=im[am],ap=um[Am.materialIndex];ap&&ap.visible&&Fu.push(mp,cm,ap,Lp,wp.z,Am)}else um.visible&&Fu.push(mp,cm,um,Lp,wp.z,null)}}for(var vp=mp.children,am=0,fm=vp.length;am<fm;am++)dm(vp[am],kp,Lp,Np)}}function _m(mp,kp,Lp,Np){for(var Xp=0,cm=mp.length;Xp<cm;Xp++){var um=mp[Xp],im=um.object,am=um.geometry,fm=Np===void 0?um.material:Np,Am=um.group;if(Lp.isArrayCamera){Xc=Lp;for(var ap=Lp.cameras,vp=0,bp=ap.length;vp<bp;vp++){var Bp=ap[vp];im.layers.test(Bp.layers)&&(up.viewport(_h.copy(Bp.viewport)),Nu.setupLights(Bp),xm(im,kp,Bp,am,fm,Am))}}else Xc=null,xm(im,kp,Lp,am,fm,Am)}}function xm(mp,kp,Lp,Np,Xp,cm){if(mp.onBeforeRender(Vu,kp,Lp,Np,Xp,cm),Nu=Cp.get(kp,Xc||Lp),mp.modelViewMatrix.multiplyMatrices(Lp.matrixWorldInverse,mp.matrixWorld),mp.normalMatrix.getNormalMatrix(mp.modelViewMatrix),mp.isImmediateRenderObject){var um=Mm(Lp,kp,Xp,mp);up.setMaterial(Xp),qu.geometry=null,qu.program=null,qu.wireframe=!1,tm(mp,um)}else Vu.renderBufferDirect(Lp,kp,Np,Xp,mp,cm);mp.onAfterRender(Vu,kp,Lp,Np,Xp,cm),Nu=Cp.get(kp,Xc||Lp)}function gm(mp,kp,Lp){var Np=gp.get(mp),Xp=Nu.state.lights,cm=Nu.state.shadowsArray,um=Xp.state.version,im=np.getParameters(mp,Xp.state,cm,kp,cp.numPlanes,cp.numIntersection,Lp),am=np.getProgramCacheKey(im),fm=Np.program,Am=!0;if(fm===void 0)mp.addEventListener("dispose",_p);else if(fm.cacheKey!==am)Zp(mp);else if(Np.lightsStateVersion!==um)Np.lightsStateVersion=um,Am=!1;else{if(im.shaderID!==void 0)return;Am=!1}Am&&(fm=np.acquireProgram(im,am),Np.program=fm,Np.uniforms=im.uniforms,Np.outputEncoding=im.outputEncoding,mp.program=fm);var ap=fm.getAttributes();if(mp.morphTargets){mp.numSupportedMorphTargets=0;for(var vp=0;vp<Vu.maxMorphTargets;vp++)ap["morphTarget"+vp]>=0&&mp.numSupportedMorphTargets++}if(mp.morphNormals){mp.numSupportedMorphNormals=0;for(var vp=0;vp<Vu.maxMorphNormals;vp++)ap["morphNormal"+vp]>=0&&mp.numSupportedMorphNormals++}var bp=Np.uniforms;(!mp.isShaderMaterial&&!mp.isRawShaderMaterial||mp.clipping===!0)&&(Np.numClippingPlanes=cp.numPlanes,Np.numIntersection=cp.numIntersection,bp.clippingPlanes=cp.uniform),Np.environment=mp.isMeshStandardMaterial?kp.environment:null,Np.fog=kp.fog,Np.needsLights=ym(mp),Np.lightsStateVersion=um,Np.needsLights&&(bp.ambientLightColor.value=Xp.state.ambient,bp.lightProbe.value=Xp.state.probe,bp.directionalLights.value=Xp.state.directional,bp.directionalLightShadows.value=Xp.state.directionalShadow,bp.spotLights.value=Xp.state.spot,bp.spotLightShadows.value=Xp.state.spotShadow,bp.rectAreaLights.value=Xp.state.rectArea,bp.pointLights.value=Xp.state.point,bp.pointLightShadows.value=Xp.state.pointShadow,bp.hemisphereLights.value=Xp.state.hemi,bp.directionalShadowMap.value=Xp.state.directionalShadowMap,bp.directionalShadowMatrix.value=Xp.state.directionalShadowMatrix,bp.spotShadowMap.value=Xp.state.spotShadowMap,bp.spotShadowMatrix.value=Xp.state.spotShadowMatrix,bp.pointShadowMap.value=Xp.state.pointShadowMap,bp.pointShadowMatrix.value=Xp.state.pointShadowMatrix);var Bp=Np.program.getUniforms(),Up=WebGLUniforms.seqWithValue(Bp.seq,bp);Np.uniformsList=Up}function Mm(mp,kp,Lp,Np){Ap.resetTextureUnits();var Xp=kp.fog,cm=Lp.isMeshStandardMaterial?kp.environment:null,um=zu===null?Vu.outputEncoding:zu.texture.encoding,im=gp.get(Lp),am=Nu.state.lights;if(Sp&&(yp||mp!==Yu)){var fm=mp===Yu&&Lp.id===Qu;cp.setState(Lp.clippingPlanes,Lp.clipIntersection,Lp.clipShadows,mp,im,fm)}Lp.version===im.__version?(im.program===void 0||Lp.fog&&im.fog!==Xp||im.environment!==cm||im.needsLights&&im.lightsStateVersion!==am.state.version||im.numClippingPlanes!==void 0&&(im.numClippingPlanes!==cp.numPlanes||im.numIntersection!==cp.numIntersection)||im.outputEncoding!==um)&&gm(Lp,kp,Np):(gm(Lp,kp,Np),im.__version=Lp.version);var Am=!1,ap=!1,vp=!1,bp=im.program,Bp=bp.getUniforms(),Up=im.uniforms;if(up.useProgram(bp.program)&&(Am=!0,ap=!0,vp=!0),Lp.id!==Qu&&(Qu=Lp.id,ap=!0),Am||Yu!==mp){if(Bp.setValue(Ep,"projectionMatrix",mp.projectionMatrix),fp.logarithmicDepthBuffer&&Bp.setValue(Ep,"logDepthBufFC",2/(Math.log(mp.far+1)/Math.LN2)),Yu!==mp&&(Yu=mp,ap=!0,vp=!0),Lp.isShaderMaterial||Lp.isMeshPhongMaterial||Lp.isMeshToonMaterial||Lp.isMeshStandardMaterial||Lp.envMap){var om=Bp.map.cameraPosition;om!==void 0&&om.setValue(Ep,wp.setFromMatrixPosition(mp.matrixWorld))}(Lp.isMeshPhongMaterial||Lp.isMeshToonMaterial||Lp.isMeshLambertMaterial||Lp.isMeshBasicMaterial||Lp.isMeshStandardMaterial||Lp.isShaderMaterial)&&Bp.setValue(Ep,"isOrthographic",mp.isOrthographicCamera===!0),(Lp.isMeshPhongMaterial||Lp.isMeshToonMaterial||Lp.isMeshLambertMaterial||Lp.isMeshBasicMaterial||Lp.isMeshStandardMaterial||Lp.isShaderMaterial||Lp.skinning)&&Bp.setValue(Ep,"viewMatrix",mp.matrixWorldInverse)}if(Lp.skinning){Bp.setOptional(Ep,Np,"bindMatrix"),Bp.setOptional(Ep,Np,"bindMatrixInverse");var sm=Np.skeleton;if(sm){var wm=sm.bones;if(fp.floatVertexTextures){if(sm.boneTexture===void 0){var nm=Math.sqrt(wm.length*4);nm=MathUtils.ceilPowerOfTwo(nm),nm=Math.max(nm,4);var Em=new Float32Array(nm*nm*4);Em.set(sm.boneMatrices);var Lm=new DataTexture(Em,nm,nm,RGBAFormat,FloatType);sm.boneMatrices=Em,sm.boneTexture=Lm,sm.boneTextureSize=nm}Bp.setValue(Ep,"boneTexture",sm.boneTexture,Ap),Bp.setValue(Ep,"boneTextureSize",sm.boneTextureSize)}else Bp.setOptional(Ep,sm,"boneMatrices")}}return(ap||im.receiveShadow!==Np.receiveShadow)&&(im.receiveShadow=Np.receiveShadow,Bp.setValue(Ep,"receiveShadow",Np.receiveShadow)),ap&&(Bp.setValue(Ep,"toneMappingExposure",Vu.toneMappingExposure),Bp.setValue(Ep,"toneMappingWhitePoint",Vu.toneMappingWhitePoint),im.needsLights&&Bm(Up,vp),Xp&&Lp.fog&&sp.refreshFogUniforms(Up,Xp),sp.refreshMaterialUniforms(Up,Lp,cm,Zu,Ju),Up.ltc_1!==void 0&&(Up.ltc_1.value=UniformsLib.LTC_1),Up.ltc_2!==void 0&&(Up.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(Ep,im.uniformsList,Up,Ap)),Lp.isShaderMaterial&&Lp.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ep,im.uniformsList,Up,Ap),Lp.uniformsNeedUpdate=!1),Lp.isSpriteMaterial&&Bp.setValue(Ep,"center",Np.center),Bp.setValue(Ep,"modelViewMatrix",Np.modelViewMatrix),Bp.setValue(Ep,"normalMatrix",Np.normalMatrix),Bp.setValue(Ep,"modelMatrix",Np.matrixWorld),bp}function Bm(mp,kp){mp.ambientLightColor.needsUpdate=kp,mp.lightProbe.needsUpdate=kp,mp.directionalLights.needsUpdate=kp,mp.directionalLightShadows.needsUpdate=kp,mp.pointLights.needsUpdate=kp,mp.pointLightShadows.needsUpdate=kp,mp.spotLights.needsUpdate=kp,mp.spotLightShadows.needsUpdate=kp,mp.rectAreaLights.needsUpdate=kp,mp.hemisphereLights.needsUpdate=kp}function ym(mp){return mp.isMeshLambertMaterial||mp.isMeshToonMaterial||mp.isMeshPhongMaterial||mp.isMeshStandardMaterial||mp.isShadowMaterial||mp.isShaderMaterial&&mp.lights===!0}this.setFramebuffer=function(mp){Hu!==mp&&zu===null&&Ep.bindFramebuffer(36160,mp),Hu=mp},this.getActiveCubeFace=function(){return ju},this.getActiveMipmapLevel=function(){return Uu},this.getRenderTarget=function(){return zu},this.setRenderTarget=function(mp,kp,Lp){zu=mp,ju=kp,Uu=Lp,mp&&gp.get(mp).__webglFramebuffer===void 0&&Ap.setupRenderTarget(mp);var Np=Hu,Xp=!1;if(mp){var cm=gp.get(mp).__webglFramebuffer;mp.isWebGLCubeRenderTarget?(Np=cm[kp||0],Xp=!0):mp.isWebGLMultisampleRenderTarget?Np=gp.get(mp).__webglMultisampledFramebuffer:Np=cm,_h.copy(mp.viewport),_d.copy(mp.scissor),Ku=mp.scissorTest}else _h.copy(ep).multiplyScalar(Zu).floor(),_d.copy(tp).multiplyScalar(Zu).floor(),Ku=op;if(Wu!==Np&&(Ep.bindFramebuffer(36160,Np),Wu=Np),up.viewport(_h),up.scissor(_d),up.setScissorTest(Ku),Xp){var um=gp.get(mp.texture);Ep.framebufferTexture2D(36160,36064,34069+(kp||0),um.__webglTexture,Lp||0)}},this.readRenderTargetPixels=function(mp,kp,Lp,Np,Xp,cm,um){if(!(mp&&mp.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var im=gp.get(mp).__webglFramebuffer;if(mp.isWebGLCubeRenderTarget&&um!==void 0&&(im=im[um]),im){var am=!1;im!==Wu&&(Ep.bindFramebuffer(36160,im),am=!0);try{var fm=mp.texture,Am=fm.format,ap=fm.type;if(Am!==RGBAFormat&&Wp.convert(Am)!==Ep.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(ap!==UnsignedByteType&&Wp.convert(ap)!==Ep.getParameter(35738)&&!(ap===FloatType&&(fp.isWebGL2||rp.get("OES_texture_float")||rp.get("WEBGL_color_buffer_float")))&&!(ap===HalfFloatType&&(fp.isWebGL2?rp.get("EXT_color_buffer_float"):rp.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ep.checkFramebufferStatus(36160)===36053?kp>=0&&kp<=mp.width-Np&&Lp>=0&&Lp<=mp.height-Xp&&Ep.readPixels(kp,Lp,Np,Xp,Wp.convert(Am),Wp.convert(ap),cm):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{am&&Ep.bindFramebuffer(36160,Wu)}}},this.copyFramebufferToTexture=function(mp,kp,Lp){Lp===void 0&&(Lp=0);var Np=Math.pow(2,-Lp),Xp=Math.floor(kp.image.width*Np),cm=Math.floor(kp.image.height*Np),um=Wp.convert(kp.format);Ap.setTexture2D(kp,0),Ep.copyTexImage2D(3553,Lp,um,mp.x,mp.y,Xp,cm,0),up.unbindTexture()},this.copyTextureToTexture=function(mp,kp,Lp,Np){Np===void 0&&(Np=0);var Xp=kp.image.width,cm=kp.image.height,um=Wp.convert(Lp.format),im=Wp.convert(Lp.type);Ap.setTexture2D(Lp,0),kp.isDataTexture?Ep.texSubImage2D(3553,Np,mp.x,mp.y,Xp,cm,um,im,kp.image.data):kp.isCompressedTexture?Ep.compressedTexSubImage2D(3553,Np,mp.x,mp.y,kp.mipmaps[0].width,kp.mipmaps[0].height,um,kp.mipmaps[0].data):Ep.texSubImage2D(3553,Np,mp.x,mp.y,um,im,kp.image),Np===0&&Lp.generateMipmaps&&Ep.generateMipmap(3553),up.unbindTexture()},this.initTexture=function(mp){Ap.setTexture2D(mp,0),up.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(_u,Tu){this.name="",this.color=new Color(_u),this.density=Tu!==void 0?Tu:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(_u,Tu,Cu){this.name="",this.color=new Color(_u),this.near=Tu!==void 0?Tu:1,this.far=Cu!==void 0?Cu:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(_u,Tu){this.array=_u,this.stride=Tu,this.count=_u!==void 0?_u.length/Tu:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.array=new _u.array.constructor(_u.array),this.count=_u.count,this.stride=_u.stride,this.usage=_u.usage,this},copyAt:function(_u,Tu,Cu){_u*=this.stride,Cu*=Tu.stride;for(var Pu=0,Bu=this.stride;Pu<Bu;Pu++)this.array[_u+Pu]=Tu.array[Cu+Pu];return this},set:function(_u,Tu){return Tu===void 0&&(Tu=0),this.array.set(_u,Tu),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(_u){return this.onUploadCallback=_u,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(_u,Tu,Cu,Pu){this.name="",this.data=_u,this.itemSize=Tu,this.offset=Cu,this.normalized=Pu===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(_u){for(var Tu=0,Cu=this.data.count;Tu<Cu;Tu++)_vector$6.x=this.getX(Tu),_vector$6.y=this.getY(Tu),_vector$6.z=this.getZ(Tu),_vector$6.applyMatrix4(_u),this.setXYZ(Tu,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(_u,Tu){return this.data.array[_u*this.data.stride+this.offset]=Tu,this},setY:function(_u,Tu){return this.data.array[_u*this.data.stride+this.offset+1]=Tu,this},setZ:function(_u,Tu){return this.data.array[_u*this.data.stride+this.offset+2]=Tu,this},setW:function(_u,Tu){return this.data.array[_u*this.data.stride+this.offset+3]=Tu,this},getX:function(_u){return this.data.array[_u*this.data.stride+this.offset]},getY:function(_u){return this.data.array[_u*this.data.stride+this.offset+1]},getZ:function(_u){return this.data.array[_u*this.data.stride+this.offset+2]},getW:function(_u){return this.data.array[_u*this.data.stride+this.offset+3]},setXY:function(_u,Tu,Cu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=Tu,this.data.array[_u+1]=Cu,this},setXYZ:function(_u,Tu,Cu,Pu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=Tu,this.data.array[_u+1]=Cu,this.data.array[_u+2]=Pu,this},setXYZW:function(_u,Tu,Cu,Pu,Bu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=Tu,this.data.array[_u+1]=Cu,this.data.array[_u+2]=Pu,this.data.array[_u+3]=Bu,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],Tu=0;Tu<this.count;Tu++)for(var Cu=Tu*this.data.stride+this.offset,Pu=0;Pu<this.itemSize;Pu++)_u.push(this.data.array[Cu+Pu]);return new BufferAttribute(new this.array.constructor(_u),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],Tu=0;Tu<this.count;Tu++)for(var Cu=Tu*this.data.stride+this.offset,Pu=0;Pu<this.itemSize;Pu++)_u.push(this.data.array[Cu+Pu]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:_u,normalized:this.normalized}}});function SpriteMaterial(_u){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(_u)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.rotation=_u.rotation,this.sizeAttenuation=_u.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(_u){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var Tu=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Cu=new InterleavedBuffer(Tu,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Cu,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Cu,2,3,!1))}this.geometry=_geometry,this.material=_u!==void 0?_u:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(_u,Tu){_u.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_u.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_u.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_u.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var Cu=this.material.rotation,Pu,Bu;Cu!==0&&(Bu=Math.cos(Cu),Pu=Math.sin(Cu));var Ru=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Ru,_worldScale,Pu,Bu),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Ru,_worldScale,Pu,Bu),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Ru,_worldScale,Pu,Bu),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Lu=_u.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Lu===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Ru,_worldScale,Pu,Bu),_uvB$1.set(0,1),Lu=_u.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Lu===null))){var Ou=_u.ray.origin.distanceTo(_intersectPoint);Ou<_u.near||Ou>_u.far||Tu.push({distance:Ou,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.center!==void 0&&this.center.copy(_u.center),this}});function transformVertex(_u,Tu,Cu,Pu,Bu,Ru){_alignedPosition.subVectors(_u,Cu).addScalar(.5).multiply(Pu),Bu!==void 0?(_rotatedPosition.x=Ru*_alignedPosition.x-Bu*_alignedPosition.y,_rotatedPosition.y=Bu*_alignedPosition.x+Ru*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_u.copy(Tu),_u.x+=_rotatedPosition.x,_u.y+=_rotatedPosition.y,_u.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(_u){Object3D.prototype.copy.call(this,_u,!1);for(var Tu=_u.levels,Cu=0,Pu=Tu.length;Cu<Pu;Cu++){var Bu=Tu[Cu];this.addLevel(Bu.object.clone(),Bu.distance)}return this.autoUpdate=_u.autoUpdate,this},addLevel:function(_u,Tu){Tu===void 0&&(Tu=0),Tu=Math.abs(Tu);for(var Cu=this.levels,Pu=0;Pu<Cu.length&&!(Tu<Cu[Pu].distance);Pu++);return Cu.splice(Pu,0,{distance:Tu,object:_u}),this.add(_u),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(_u){var Tu=this.levels;if(Tu.length>0){for(var Cu=1,Pu=Tu.length;Cu<Pu&&!(_u<Tu[Cu].distance);Cu++);return Tu[Cu-1].object}return null},raycast:function(_u,Tu){var Cu=this.levels;if(Cu.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Pu=_u.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Pu).raycast(_u,Tu)}},update:function(_u){var Tu=this.levels;if(Tu.length>1){_v1$4.setFromMatrixPosition(_u.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var Cu=_v1$4.distanceTo(_v2$2)/_u.zoom;Tu[0].object.visible=!0;for(var Pu=1,Bu=Tu.length;Pu<Bu&&Cu>=Tu[Pu].distance;Pu++)Tu[Pu-1].object.visible=!1,Tu[Pu].object.visible=!0;for(this._currentLevel=Pu-1;Pu<Bu;Pu++)Tu[Pu].object.visible=!1}},toJSON:function(_u){var Tu=Object3D.prototype.toJSON.call(this,_u);this.autoUpdate===!1&&(Tu.object.autoUpdate=!1),Tu.object.levels=[];for(var Cu=this.levels,Pu=0,Bu=Cu.length;Pu<Bu;Pu++){var Ru=Cu[Pu];Tu.object.levels.push({object:Ru.object.uuid,distance:Ru.distance})}return Tu}});function SkinnedMesh(_u,Tu){_u&&_u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,_u,Tu),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(_u,Tu){this.skeleton=_u,Tu===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),Tu=this.matrixWorld),this.bindMatrix.copy(Tu),this.bindMatrixInverse.getInverse(Tu)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var _u=new Vector4,Tu=this.geometry.attributes.skinWeight,Cu=0,Pu=Tu.count;Cu<Pu;Cu++){_u.x=Tu.getX(Cu),_u.y=Tu.getY(Cu),_u.z=Tu.getZ(Cu),_u.w=Tu.getW(Cu);var Bu=1/_u.manhattanLength();Bu!==1/0?_u.multiplyScalar(Bu):_u.set(1,0,0,0),Tu.setXYZW(Cu,_u.x,_u.y,_u.z,_u.w)}},updateMatrixWorld:function(_u){Mesh.prototype.updateMatrixWorld.call(this,_u),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var _u=new Vector3,Tu=new Vector4,Cu=new Vector4,Pu=new Vector3,Bu=new Matrix4;return function(Ru,Lu){var Ou=this.skeleton,Du=this.geometry;Tu.fromBufferAttribute(Du.attributes.skinIndex,Ru),Cu.fromBufferAttribute(Du.attributes.skinWeight,Ru),_u.fromBufferAttribute(Du.attributes.position,Ru).applyMatrix4(this.bindMatrix),Lu.set(0,0,0);for(var $u=0;$u<4;$u++){var ku=Cu.getComponent($u);if(ku!==0){var Fu=Tu.getComponent($u);Bu.multiplyMatrices(Ou.bones[Fu].matrixWorld,Ou.boneInverses[Fu]),Lu.addScaledVector(Pu.copy(_u).applyMatrix4(Bu),ku)}}return Lu.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(_u,Tu){if(_u=_u||[],this.bones=_u.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,Tu===void 0)this.calculateInverses();else if(this.bones.length===Tu.length)this.boneInverses=Tu.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var Cu=0,Pu=this.bones.length;Cu<Pu;Cu++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var _u=0,Tu=this.bones.length;_u<Tu;_u++){var Cu=new Matrix4;this.bones[_u]&&Cu.getInverse(this.bones[_u].matrixWorld),this.boneInverses.push(Cu)}},pose:function(){var _u,Tu,Cu;for(Tu=0,Cu=this.bones.length;Tu<Cu;Tu++)_u=this.bones[Tu],_u&&_u.matrixWorld.getInverse(this.boneInverses[Tu]);for(Tu=0,Cu=this.bones.length;Tu<Cu;Tu++)_u=this.bones[Tu],_u&&(_u.parent&&_u.parent.isBone?(_u.matrix.getInverse(_u.parent.matrixWorld),_u.matrix.multiply(_u.matrixWorld)):_u.matrix.copy(_u.matrixWorld),_u.matrix.decompose(_u.position,_u.quaternion,_u.scale))},update:function(){for(var _u=this.bones,Tu=this.boneInverses,Cu=this.boneMatrices,Pu=this.boneTexture,Bu=0,Ru=_u.length;Bu<Ru;Bu++){var Lu=_u[Bu]?_u[Bu].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Lu,Tu[Bu]),_offsetMatrix.toArray(Cu,Bu*16)}Pu!==void 0&&(Pu.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(_u){for(var Tu=0,Cu=this.bones.length;Tu<Cu;Tu++){var Pu=this.bones[Tu];if(Pu.name===_u)return Pu}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(_u,Tu,Cu){Mesh.call(this,_u,Tu),this.instanceMatrix=new BufferAttribute(new Float32Array(Cu*16),16),this.count=Cu,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(_u,Tu){Tu.fromArray(this.instanceMatrix.array,_u*16)},raycast:function(_u,Tu){var Cu=this.matrixWorld,Pu=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Bu=0;Bu<Pu;Bu++){this.getMatrixAt(Bu,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Cu,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(_u,_instanceIntersects);for(var Ru=0,Lu=_instanceIntersects.length;Ru<Lu;Ru++){var Ou=_instanceIntersects[Ru];Ou.instanceId=Bu,Ou.object=this,Tu.push(Ou)}_instanceIntersects.length=0}},setMatrixAt:function(_u,Tu){Tu.toArray(this.instanceMatrix.array,_u*16)},updateMorphTargets:function(){}});function LineBasicMaterial(_u){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(_u)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.linewidth=_u.linewidth,this.linecap=_u.linecap,this.linejoin=_u.linejoin,this.morphTargets=_u.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(_u,Tu,Cu){Cu===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=Tu!==void 0?Tu:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var Tu=_u.attributes.position,Cu=[0],Pu=1,Bu=Tu.count;Pu<Bu;Pu++)_start.fromBufferAttribute(Tu,Pu-1),_end.fromBufferAttribute(Tu,Pu),Cu[Pu]=Cu[Pu-1],Cu[Pu]+=_start.distanceTo(_end);_u.setAttribute("lineDistance",new Float32BufferAttribute(Cu,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry){var Ru=_u.vertices,Cu=_u.lineDistances;Cu[0]=0;for(var Pu=1,Bu=Ru.length;Pu<Bu;Pu++)Cu[Pu]=Cu[Pu-1],Cu[Pu]+=Ru[Pu-1].distanceTo(Ru[Pu])}return this},raycast:function(_u,Tu){var Cu=this.geometry,Pu=this.matrixWorld,Bu=_u.params.Line.threshold;if(Cu.boundingSphere===null&&Cu.computeBoundingSphere(),_sphere$2.copy(Cu.boundingSphere),_sphere$2.applyMatrix4(Pu),_sphere$2.radius+=Bu,_u.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Pu),_ray$1.copy(_u.ray).applyMatrix4(_inverseMatrix$1);var Ru=Bu/((this.scale.x+this.scale.y+this.scale.z)/3),Lu=Ru*Ru,Ou=new Vector3,Du=new Vector3,$u=new Vector3,ku=new Vector3,Fu=this&&this.isLineSegments?2:1;if(Cu.isBufferGeometry){var Nu=Cu.index,Vu=Cu.attributes,Gu=Vu.position.array;if(Nu!==null)for(var Hu=Nu.array,ju=0,Uu=Hu.length-1;ju<Uu;ju+=Fu){var zu=Hu[ju],Wu=Hu[ju+1];Ou.fromArray(Gu,zu*3),Du.fromArray(Gu,Wu*3);var Qu=_ray$1.distanceSqToSegment(Ou,Du,ku,$u);if(!(Qu>Lu)){ku.applyMatrix4(this.matrixWorld);var qu=_u.ray.origin.distanceTo(ku);qu<_u.near||qu>_u.far||Tu.push({distance:qu,point:$u.clone().applyMatrix4(this.matrixWorld),index:ju,face:null,faceIndex:null,object:this})}}else for(var ju=0,Uu=Gu.length/3-1;ju<Uu;ju+=Fu){Ou.fromArray(Gu,3*ju),Du.fromArray(Gu,3*ju+3);var Qu=_ray$1.distanceSqToSegment(Ou,Du,ku,$u);if(!(Qu>Lu)){ku.applyMatrix4(this.matrixWorld);var qu=_u.ray.origin.distanceTo(ku);qu<_u.near||qu>_u.far||Tu.push({distance:qu,point:$u.clone().applyMatrix4(this.matrixWorld),index:ju,face:null,faceIndex:null,object:this})}}}else if(Cu.isGeometry)for(var Yu=Cu.vertices,Xc=Yu.length,ju=0;ju<Xc-1;ju+=Fu){var Qu=_ray$1.distanceSqToSegment(Yu[ju],Yu[ju+1],ku,$u);if(!(Qu>Lu)){ku.applyMatrix4(this.matrixWorld);var qu=_u.ray.origin.distanceTo(ku);qu<_u.near||qu>_u.far||Tu.push({distance:qu,point:$u.clone().applyMatrix4(this.matrixWorld),index:ju,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var _u=this.geometry,Tu,Cu,Pu;if(_u.isBufferGeometry){var Bu=_u.morphAttributes,Ru=Object.keys(Bu);if(Ru.length>0){var Lu=Bu[Ru[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},Tu=0,Cu=Lu.length;Tu<Cu;Tu++)Pu=Lu[Tu].name||String(Tu),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Pu]=Tu}}else{var Ou=_u.morphTargets;Ou!==void 0&&Ou.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(_u,Tu){Line$1.call(this,_u,Tu),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var Tu=_u.attributes.position,Cu=[],Pu=0,Bu=Tu.count;Pu<Bu;Pu+=2)_start$1.fromBufferAttribute(Tu,Pu),_end$1.fromBufferAttribute(Tu,Pu+1),Cu[Pu]=Pu===0?0:Cu[Pu-1],Cu[Pu+1]=Cu[Pu]+_start$1.distanceTo(_end$1);_u.setAttribute("lineDistance",new Float32BufferAttribute(Cu,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry)for(var Ru=_u.vertices,Cu=_u.lineDistances,Pu=0,Bu=Ru.length;Pu<Bu;Pu+=2)_start$1.copy(Ru[Pu]),_end$1.copy(Ru[Pu+1]),Cu[Pu]=Pu===0?0:Cu[Pu-1],Cu[Pu+1]=Cu[Pu]+_start$1.distanceTo(_end$1);return this}});function LineLoop(_u,Tu){Line$1.call(this,_u,Tu),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(_u){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(_u)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.size=_u.size,this.sizeAttenuation=_u.sizeAttenuation,this.morphTargets=_u.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(_u,Tu){Object3D.call(this),this.type="Points",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=Tu!==void 0?Tu:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(_u,Tu){var Cu=this.geometry,Pu=this.matrixWorld,Bu=_u.params.Points.threshold;if(Cu.boundingSphere===null&&Cu.computeBoundingSphere(),_sphere$3.copy(Cu.boundingSphere),_sphere$3.applyMatrix4(Pu),_sphere$3.radius+=Bu,_u.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Pu),_ray$2.copy(_u.ray).applyMatrix4(_inverseMatrix$2);var Ru=Bu/((this.scale.x+this.scale.y+this.scale.z)/3),Lu=Ru*Ru;if(Cu.isBufferGeometry){var Ou=Cu.index,Du=Cu.attributes,$u=Du.position.array;if(Ou!==null)for(var ku=Ou.array,Fu=0,Nu=ku.length;Fu<Nu;Fu++){var Vu=ku[Fu];_position$1.fromArray($u,Vu*3),testPoint(_position$1,Vu,Lu,Pu,_u,Tu,this)}else for(var Fu=0,Gu=$u.length/3;Fu<Gu;Fu++)_position$1.fromArray($u,Fu*3),testPoint(_position$1,Fu,Lu,Pu,_u,Tu,this)}else for(var Hu=Cu.vertices,Fu=0,Gu=Hu.length;Fu<Gu;Fu++)testPoint(Hu[Fu],Fu,Lu,Pu,_u,Tu,this)}},updateMorphTargets:function(){var _u=this.geometry,Tu,Cu,Pu;if(_u.isBufferGeometry){var Bu=_u.morphAttributes,Ru=Object.keys(Bu);if(Ru.length>0){var Lu=Bu[Ru[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},Tu=0,Cu=Lu.length;Tu<Cu;Tu++)Pu=Lu[Tu].name||String(Tu),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Pu]=Tu}}else{var Ou=_u.morphTargets;Ou!==void 0&&Ou.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(_u,Tu,Cu,Pu,Bu,Ru,Lu){var Ou=_ray$2.distanceSqToPoint(_u);if(Ou<Cu){var Du=new Vector3;_ray$2.closestPointToPoint(_u,Du),Du.applyMatrix4(Pu);var $u=Bu.ray.origin.distanceTo(Du);if($u<Bu.near||$u>Bu.far)return;Ru.push({distance:$u,distanceToRay:Math.sqrt(Ou),point:Du,index:Tu,face:null,object:Lu})}}function VideoTexture(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du){Texture.call(this,_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du),this.format=Lu!==void 0?Lu:RGBFormat,this.minFilter=Ru!==void 0?Ru:LinearFilter,this.magFilter=Bu!==void 0?Bu:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var _u=this.image;_u.readyState>=_u.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu){Texture.call(this,null,Ru,Lu,Ou,Du,$u,Pu,Bu,ku,Fu),this.image={width:Tu,height:Cu},this.mipmaps=_u,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du){Texture.call(this,_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u){if($u=$u!==void 0?$u:DepthFormat,$u!==DepthFormat&&$u!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Cu===void 0&&$u===DepthFormat&&(Cu=UnsignedShortType),Cu===void 0&&$u===DepthStencilFormat&&(Cu=UnsignedInt248Type),Texture.call(this,null,Pu,Bu,Ru,Lu,Ou,$u,Cu,Du),this.image={width:_u,height:Tu},this.magFilter=Lu!==void 0?Lu:NearestFilter,this.minFilter=Ou!==void 0?Ou:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(_u){BufferGeometry.call(this),this.type="WireframeGeometry";var Tu=[],Cu,Pu,Bu,Ru,Lu,Ou=[0,0],Du={},$u,ku,Fu,Nu,Vu=["a","b","c"],Gu;if(_u&&_u.isGeometry){var Hu=_u.faces;for(Cu=0,Bu=Hu.length;Cu<Bu;Cu++){var ju=Hu[Cu];for(Pu=0;Pu<3;Pu++)ku=ju[Vu[Pu]],Fu=ju[Vu[(Pu+1)%3]],Ou[0]=Math.min(ku,Fu),Ou[1]=Math.max(ku,Fu),Nu=Ou[0]+","+Ou[1],Du[Nu]===void 0&&(Du[Nu]={index1:Ou[0],index2:Ou[1]})}for(Nu in Du)$u=Du[Nu],Gu=_u.vertices[$u.index1],Tu.push(Gu.x,Gu.y,Gu.z),Gu=_u.vertices[$u.index2],Tu.push(Gu.x,Gu.y,Gu.z)}else if(_u&&_u.isBufferGeometry){var Uu,zu,Wu,Qu,qu,Yu,Xc,_h;if(Gu=new Vector3,_u.index!==null){for(Uu=_u.attributes.position,zu=_u.index,Wu=_u.groups,Wu.length===0&&(Wu=[{start:0,count:zu.count,materialIndex:0}]),Ru=0,Lu=Wu.length;Ru<Lu;++Ru)for(Qu=Wu[Ru],qu=Qu.start,Yu=Qu.count,Cu=qu,Bu=qu+Yu;Cu<Bu;Cu+=3)for(Pu=0;Pu<3;Pu++)ku=zu.getX(Cu+Pu),Fu=zu.getX(Cu+(Pu+1)%3),Ou[0]=Math.min(ku,Fu),Ou[1]=Math.max(ku,Fu),Nu=Ou[0]+","+Ou[1],Du[Nu]===void 0&&(Du[Nu]={index1:Ou[0],index2:Ou[1]});for(Nu in Du)$u=Du[Nu],Gu.fromBufferAttribute(Uu,$u.index1),Tu.push(Gu.x,Gu.y,Gu.z),Gu.fromBufferAttribute(Uu,$u.index2),Tu.push(Gu.x,Gu.y,Gu.z)}else for(Uu=_u.attributes.position,Cu=0,Bu=Uu.count/3;Cu<Bu;Cu++)for(Pu=0;Pu<3;Pu++)Xc=3*Cu+Pu,Gu.fromBufferAttribute(Uu,Xc),Tu.push(Gu.x,Gu.y,Gu.z),_h=3*Cu+(Pu+1)%3,Gu.fromBufferAttribute(Uu,_h),Tu.push(Gu.x,Gu.y,Gu.z)}this.setAttribute("position",new Float32BufferAttribute(Tu,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(_u,Tu,Cu){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:_u,slices:Tu,stacks:Cu},this.fromBufferGeometry(new ParametricBufferGeometry(_u,Tu,Cu)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(_u,Tu,Cu){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:_u,slices:Tu,stacks:Cu};var Pu=[],Bu=[],Ru=[],Lu=[],Ou=1e-5,Du=new Vector3,$u=new Vector3,ku=new Vector3,Fu=new Vector3,Nu=new Vector3,Vu,Gu;_u.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var Hu=Tu+1;for(Vu=0;Vu<=Cu;Vu++){var ju=Vu/Cu;for(Gu=0;Gu<=Tu;Gu++){var Uu=Gu/Tu;_u(Uu,ju,$u),Bu.push($u.x,$u.y,$u.z),Uu-Ou>=0?(_u(Uu-Ou,ju,ku),Fu.subVectors($u,ku)):(_u(Uu+Ou,ju,ku),Fu.subVectors(ku,$u)),ju-Ou>=0?(_u(Uu,ju-Ou,ku),Nu.subVectors($u,ku)):(_u(Uu,ju+Ou,ku),Nu.subVectors(ku,$u)),Du.crossVectors(Fu,Nu).normalize(),Ru.push(Du.x,Du.y,Du.z),Lu.push(Uu,ju)}}for(Vu=0;Vu<Cu;Vu++)for(Gu=0;Gu<Tu;Gu++){var zu=Vu*Hu+Gu,Wu=Vu*Hu+Gu+1,Qu=(Vu+1)*Hu+Gu+1,qu=(Vu+1)*Hu+Gu;Pu.push(zu,Wu,qu),Pu.push(Wu,Qu,qu)}this.setIndex(Pu),this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(_u,Tu,Cu,Pu){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:_u,indices:Tu,radius:Cu,detail:Pu},this.fromBufferGeometry(new PolyhedronBufferGeometry(_u,Tu,Cu,Pu)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(_u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:_u,indices:Tu,radius:Cu,detail:Pu},Cu=Cu||1,Pu=Pu||0;var Bu=[],Ru=[];Lu(Pu),Du(Cu),$u(),this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("normal",new Float32BufferAttribute(Bu.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ru,2)),Pu===0?this.computeVertexNormals():this.normalizeNormals();function Lu(Uu){for(var zu=new Vector3,Wu=new Vector3,Qu=new Vector3,qu=0;qu<Tu.length;qu+=3)Nu(Tu[qu+0],zu),Nu(Tu[qu+1],Wu),Nu(Tu[qu+2],Qu),Ou(zu,Wu,Qu,Uu)}function Ou(Uu,zu,Wu,Qu){var qu=Math.pow(2,Qu),Yu=[],Xc,_h;for(Xc=0;Xc<=qu;Xc++){Yu[Xc]=[];var _d=Uu.clone().lerp(Wu,Xc/qu),Ku=zu.clone().lerp(Wu,Xc/qu),Xu=qu-Xc;for(_h=0;_h<=Xu;_h++)_h===0&&Xc===qu?Yu[Xc][_h]=_d:Yu[Xc][_h]=_d.clone().lerp(Ku,_h/Xu)}for(Xc=0;Xc<qu;Xc++)for(_h=0;_h<2*(qu-Xc)-1;_h++){var Ju=Math.floor(_h/2);_h%2===0?(Fu(Yu[Xc][Ju+1]),Fu(Yu[Xc+1][Ju]),Fu(Yu[Xc][Ju])):(Fu(Yu[Xc][Ju+1]),Fu(Yu[Xc+1][Ju+1]),Fu(Yu[Xc+1][Ju]))}}function Du(Uu){for(var zu=new Vector3,Wu=0;Wu<Bu.length;Wu+=3)zu.x=Bu[Wu+0],zu.y=Bu[Wu+1],zu.z=Bu[Wu+2],zu.normalize().multiplyScalar(Uu),Bu[Wu+0]=zu.x,Bu[Wu+1]=zu.y,Bu[Wu+2]=zu.z}function $u(){for(var Uu=new Vector3,zu=0;zu<Bu.length;zu+=3){Uu.x=Bu[zu+0],Uu.y=Bu[zu+1],Uu.z=Bu[zu+2];var Wu=Hu(Uu)/2/Math.PI+.5,Qu=ju(Uu)/Math.PI+.5;Ru.push(Wu,1-Qu)}Vu(),ku()}function ku(){for(var Uu=0;Uu<Ru.length;Uu+=6){var zu=Ru[Uu+0],Wu=Ru[Uu+2],Qu=Ru[Uu+4],qu=Math.max(zu,Wu,Qu),Yu=Math.min(zu,Wu,Qu);qu>.9&&Yu<.1&&(zu<.2&&(Ru[Uu+0]+=1),Wu<.2&&(Ru[Uu+2]+=1),Qu<.2&&(Ru[Uu+4]+=1))}}function Fu(Uu){Bu.push(Uu.x,Uu.y,Uu.z)}function Nu(Uu,zu){var Wu=Uu*3;zu.x=_u[Wu+0],zu.y=_u[Wu+1],zu.z=_u[Wu+2]}function Vu(){for(var Uu=new Vector3,zu=new Vector3,Wu=new Vector3,Qu=new Vector3,qu=new Vector2,Yu=new Vector2,Xc=new Vector2,_h=0,_d=0;_h<Bu.length;_h+=9,_d+=6){Uu.set(Bu[_h+0],Bu[_h+1],Bu[_h+2]),zu.set(Bu[_h+3],Bu[_h+4],Bu[_h+5]),Wu.set(Bu[_h+6],Bu[_h+7],Bu[_h+8]),qu.set(Ru[_d+0],Ru[_d+1]),Yu.set(Ru[_d+2],Ru[_d+3]),Xc.set(Ru[_d+4],Ru[_d+5]),Qu.copy(Uu).add(zu).add(Wu).divideScalar(3);var Ku=Hu(Qu);Gu(qu,_d+0,Uu,Ku),Gu(Yu,_d+2,zu,Ku),Gu(Xc,_d+4,Wu,Ku)}}function Gu(Uu,zu,Wu,Qu){Qu<0&&Uu.x===1&&(Ru[zu]=Uu.x-1),Wu.x===0&&Wu.z===0&&(Ru[zu]=Qu/2/Math.PI+.5)}function Hu(Uu){return Math.atan2(Uu.z,-Uu.x)}function ju(Uu){return Math.atan2(-Uu.y,Math.sqrt(Uu.x*Uu.x+Uu.z*Uu.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(_u,Tu){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:_u,detail:Tu},this.fromBufferGeometry(new TetrahedronBufferGeometry(_u,Tu)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(_u,Tu){var Cu=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Pu=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,Cu,Pu,_u,Tu),this.type="TetrahedronBufferGeometry",this.parameters={radius:_u,detail:Tu}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(_u,Tu){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:_u,detail:Tu},this.fromBufferGeometry(new OctahedronBufferGeometry(_u,Tu)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(_u,Tu){var Cu=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Pu=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,Cu,Pu,_u,Tu),this.type="OctahedronBufferGeometry",this.parameters={radius:_u,detail:Tu}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(_u,Tu){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:_u,detail:Tu},this.fromBufferGeometry(new IcosahedronBufferGeometry(_u,Tu)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(_u,Tu){var Cu=(1+Math.sqrt(5))/2,Pu=[-1,Cu,0,1,Cu,0,-1,-Cu,0,1,-Cu,0,0,-1,Cu,0,1,Cu,0,-1,-Cu,0,1,-Cu,Cu,0,-1,Cu,0,1,-Cu,0,-1,-Cu,0,1],Bu=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Pu,Bu,_u,Tu),this.type="IcosahedronBufferGeometry",this.parameters={radius:_u,detail:Tu}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(_u,Tu){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:_u,detail:Tu},this.fromBufferGeometry(new DodecahedronBufferGeometry(_u,Tu)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(_u,Tu){var Cu=(1+Math.sqrt(5))/2,Pu=1/Cu,Bu=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Pu,-Cu,0,-Pu,Cu,0,Pu,-Cu,0,Pu,Cu,-Pu,-Cu,0,-Pu,Cu,0,Pu,-Cu,0,Pu,Cu,0,-Cu,0,-Pu,Cu,0,-Pu,-Cu,0,Pu,Cu,0,Pu],Ru=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Bu,Ru,_u,Tu),this.type="DodecahedronBufferGeometry",this.parameters={radius:_u,detail:Tu}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(_u,Tu,Cu,Pu,Bu,Ru){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:_u,tubularSegments:Tu,radius:Cu,radialSegments:Pu,closed:Bu},Ru!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Lu=new TubeBufferGeometry(_u,Tu,Cu,Pu,Bu);this.tangents=Lu.tangents,this.normals=Lu.normals,this.binormals=Lu.binormals,this.fromBufferGeometry(Lu),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(_u,Tu,Cu,Pu,Bu){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:_u,tubularSegments:Tu,radius:Cu,radialSegments:Pu,closed:Bu},Tu=Tu||64,Cu=Cu||1,Pu=Pu||8,Bu=Bu||!1;var Ru=_u.computeFrenetFrames(Tu,Bu);this.tangents=Ru.tangents,this.normals=Ru.normals,this.binormals=Ru.binormals;var Lu=new Vector3,Ou=new Vector3,Du=new Vector2,$u=new Vector3,ku,Fu,Nu=[],Vu=[],Gu=[],Hu=[];ju(),this.setIndex(Hu),this.setAttribute("position",new Float32BufferAttribute(Nu,3)),this.setAttribute("normal",new Float32BufferAttribute(Vu,3)),this.setAttribute("uv",new Float32BufferAttribute(Gu,2));function ju(){for(ku=0;ku<Tu;ku++)Uu(ku);Uu(Bu===!1?Tu:0),Wu(),zu()}function Uu(Qu){$u=_u.getPointAt(Qu/Tu,$u);var qu=Ru.normals[Qu],Yu=Ru.binormals[Qu];for(Fu=0;Fu<=Pu;Fu++){var Xc=Fu/Pu*Math.PI*2,_h=Math.sin(Xc),_d=-Math.cos(Xc);Ou.x=_d*qu.x+_h*Yu.x,Ou.y=_d*qu.y+_h*Yu.y,Ou.z=_d*qu.z+_h*Yu.z,Ou.normalize(),Vu.push(Ou.x,Ou.y,Ou.z),Lu.x=$u.x+Cu*Ou.x,Lu.y=$u.y+Cu*Ou.y,Lu.z=$u.z+Cu*Ou.z,Nu.push(Lu.x,Lu.y,Lu.z)}}function zu(){for(Fu=1;Fu<=Tu;Fu++)for(ku=1;ku<=Pu;ku++){var Qu=(Pu+1)*(Fu-1)+(ku-1),qu=(Pu+1)*Fu+(ku-1),Yu=(Pu+1)*Fu+ku,Xc=(Pu+1)*(Fu-1)+ku;Hu.push(Qu,qu,Xc),Hu.push(qu,Yu,Xc)}}function Wu(){for(ku=0;ku<=Tu;ku++)for(Fu=0;Fu<=Pu;Fu++)Du.x=ku/Tu,Du.y=Fu/Pu,Gu.push(Du.x,Du.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.path=this.parameters.path.toJSON(),_u};function TorusKnotGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:_u,tube:Tu,tubularSegments:Cu,radialSegments:Pu,p:Bu,q:Ru},Lu!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:_u,tube:Tu,tubularSegments:Cu,radialSegments:Pu,p:Bu,q:Ru},_u=_u||1,Tu=Tu||.4,Cu=Math.floor(Cu)||64,Pu=Math.floor(Pu)||8,Bu=Bu||2,Ru=Ru||3;var Lu=[],Ou=[],Du=[],$u=[],ku,Fu,Nu=new Vector3,Vu=new Vector3,Gu=new Vector3,Hu=new Vector3,ju=new Vector3,Uu=new Vector3,zu=new Vector3;for(ku=0;ku<=Cu;++ku){var Wu=ku/Cu*Bu*Math.PI*2;for(Xu(Wu,Bu,Ru,_u,Gu),Xu(Wu+.01,Bu,Ru,_u,Hu),Uu.subVectors(Hu,Gu),zu.addVectors(Hu,Gu),ju.crossVectors(Uu,zu),zu.crossVectors(ju,Uu),ju.normalize(),zu.normalize(),Fu=0;Fu<=Pu;++Fu){var Qu=Fu/Pu*Math.PI*2,qu=-Tu*Math.cos(Qu),Yu=Tu*Math.sin(Qu);Nu.x=Gu.x+(qu*zu.x+Yu*ju.x),Nu.y=Gu.y+(qu*zu.y+Yu*ju.y),Nu.z=Gu.z+(qu*zu.z+Yu*ju.z),Ou.push(Nu.x,Nu.y,Nu.z),Vu.subVectors(Nu,Gu).normalize(),Du.push(Vu.x,Vu.y,Vu.z),$u.push(ku/Cu),$u.push(Fu/Pu)}}for(Fu=1;Fu<=Cu;Fu++)for(ku=1;ku<=Pu;ku++){var Xc=(Pu+1)*(Fu-1)+(ku-1),_h=(Pu+1)*Fu+(ku-1),_d=(Pu+1)*Fu+ku,Ku=(Pu+1)*(Fu-1)+ku;Lu.push(Xc,_h,Ku),Lu.push(_h,_d,Ku)}this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("normal",new Float32BufferAttribute(Du,3)),this.setAttribute("uv",new Float32BufferAttribute($u,2));function Xu(Ju,Zu,_c,_f,ep){var tp=Math.cos(Ju),op=Math.sin(Ju),hp=_c/Zu*Ju,cp=Math.cos(hp);ep.x=_f*(2+cp)*.5*tp,ep.y=_f*(2+cp)*op*.5,ep.z=_f*Math.sin(hp)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(_u,Tu,Cu,Pu,Bu){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:_u,tube:Tu,radialSegments:Cu,tubularSegments:Pu,arc:Bu},this.fromBufferGeometry(new TorusBufferGeometry(_u,Tu,Cu,Pu,Bu)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(_u,Tu,Cu,Pu,Bu){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:_u,tube:Tu,radialSegments:Cu,tubularSegments:Pu,arc:Bu},_u=_u||1,Tu=Tu||.4,Cu=Math.floor(Cu)||8,Pu=Math.floor(Pu)||6,Bu=Bu||Math.PI*2;var Ru=[],Lu=[],Ou=[],Du=[],$u=new Vector3,ku=new Vector3,Fu=new Vector3,Nu,Vu;for(Nu=0;Nu<=Cu;Nu++)for(Vu=0;Vu<=Pu;Vu++){var Gu=Vu/Pu*Bu,Hu=Nu/Cu*Math.PI*2;ku.x=(_u+Tu*Math.cos(Hu))*Math.cos(Gu),ku.y=(_u+Tu*Math.cos(Hu))*Math.sin(Gu),ku.z=Tu*Math.sin(Hu),Lu.push(ku.x,ku.y,ku.z),$u.x=_u*Math.cos(Gu),$u.y=_u*Math.sin(Gu),Fu.subVectors(ku,$u).normalize(),Ou.push(Fu.x,Fu.y,Fu.z),Du.push(Vu/Pu),Du.push(Nu/Cu)}for(Nu=1;Nu<=Cu;Nu++)for(Vu=1;Vu<=Pu;Vu++){var ju=(Pu+1)*Nu+Vu-1,Uu=(Pu+1)*(Nu-1)+Vu-1,zu=(Pu+1)*(Nu-1)+Vu,Wu=(Pu+1)*Nu+Vu;Ru.push(ju,Uu,Wu),Ru.push(Uu,zu,Wu)}this.setIndex(Ru),this.setAttribute("position",new Float32BufferAttribute(Lu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ou,3)),this.setAttribute("uv",new Float32BufferAttribute(Du,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(_u,Tu,Cu){Cu=Cu||2;var Pu=Tu&&Tu.length,Bu=Pu?Tu[0]*Cu:_u.length,Ru=linkedList(_u,0,Bu,Cu,!0),Lu=[];if(!Ru||Ru.next===Ru.prev)return Lu;var Ou,Du,$u,ku,Fu,Nu,Vu;if(Pu&&(Ru=eliminateHoles(_u,Tu,Ru,Cu)),_u.length>80*Cu){Ou=$u=_u[0],Du=ku=_u[1];for(var Gu=Cu;Gu<Bu;Gu+=Cu)Fu=_u[Gu],Nu=_u[Gu+1],Fu<Ou&&(Ou=Fu),Nu<Du&&(Du=Nu),Fu>$u&&($u=Fu),Nu>ku&&(ku=Nu);Vu=Math.max($u-Ou,ku-Du),Vu=Vu!==0?1/Vu:0}return earcutLinked(Ru,Lu,Cu,Ou,Du,Vu),Lu}};function linkedList(_u,Tu,Cu,Pu,Bu){var Ru,Lu;if(Bu===signedArea(_u,Tu,Cu,Pu)>0)for(Ru=Tu;Ru<Cu;Ru+=Pu)Lu=insertNode(Ru,_u[Ru],_u[Ru+1],Lu);else for(Ru=Cu-Pu;Ru>=Tu;Ru-=Pu)Lu=insertNode(Ru,_u[Ru],_u[Ru+1],Lu);return Lu&&equals(Lu,Lu.next)&&(removeNode(Lu),Lu=Lu.next),Lu}function filterPoints(_u,Tu){if(!_u)return _u;Tu||(Tu=_u);var Cu=_u,Pu;do if(Pu=!1,!Cu.steiner&&(equals(Cu,Cu.next)||area(Cu.prev,Cu,Cu.next)===0)){if(removeNode(Cu),Cu=Tu=Cu.prev,Cu===Cu.next)break;Pu=!0}else Cu=Cu.next;while(Pu||Cu!==Tu);return Tu}function earcutLinked(_u,Tu,Cu,Pu,Bu,Ru,Lu){if(!!_u){!Lu&&Ru&&indexCurve(_u,Pu,Bu,Ru);for(var Ou=_u,Du,$u;_u.prev!==_u.next;){if(Du=_u.prev,$u=_u.next,Ru?isEarHashed(_u,Pu,Bu,Ru):isEar(_u)){Tu.push(Du.i/Cu),Tu.push(_u.i/Cu),Tu.push($u.i/Cu),removeNode(_u),_u=$u.next,Ou=$u.next;continue}if(_u=$u,_u===Ou){Lu?Lu===1?(_u=cureLocalIntersections(filterPoints(_u),Tu,Cu),earcutLinked(_u,Tu,Cu,Pu,Bu,Ru,2)):Lu===2&&splitEarcut(_u,Tu,Cu,Pu,Bu,Ru):earcutLinked(filterPoints(_u),Tu,Cu,Pu,Bu,Ru,1);break}}}}function isEar(_u){var Tu=_u.prev,Cu=_u,Pu=_u.next;if(area(Tu,Cu,Pu)>=0)return!1;for(var Bu=_u.next.next;Bu!==_u.prev;){if(pointInTriangle(Tu.x,Tu.y,Cu.x,Cu.y,Pu.x,Pu.y,Bu.x,Bu.y)&&area(Bu.prev,Bu,Bu.next)>=0)return!1;Bu=Bu.next}return!0}function isEarHashed(_u,Tu,Cu,Pu){var Bu=_u.prev,Ru=_u,Lu=_u.next;if(area(Bu,Ru,Lu)>=0)return!1;for(var Ou=Bu.x<Ru.x?Bu.x<Lu.x?Bu.x:Lu.x:Ru.x<Lu.x?Ru.x:Lu.x,Du=Bu.y<Ru.y?Bu.y<Lu.y?Bu.y:Lu.y:Ru.y<Lu.y?Ru.y:Lu.y,$u=Bu.x>Ru.x?Bu.x>Lu.x?Bu.x:Lu.x:Ru.x>Lu.x?Ru.x:Lu.x,ku=Bu.y>Ru.y?Bu.y>Lu.y?Bu.y:Lu.y:Ru.y>Lu.y?Ru.y:Lu.y,Fu=zOrder(Ou,Du,Tu,Cu,Pu),Nu=zOrder($u,ku,Tu,Cu,Pu),Vu=_u.prevZ,Gu=_u.nextZ;Vu&&Vu.z>=Fu&&Gu&&Gu.z<=Nu;){if(Vu!==_u.prev&&Vu!==_u.next&&pointInTriangle(Bu.x,Bu.y,Ru.x,Ru.y,Lu.x,Lu.y,Vu.x,Vu.y)&&area(Vu.prev,Vu,Vu.next)>=0||(Vu=Vu.prevZ,Gu!==_u.prev&&Gu!==_u.next&&pointInTriangle(Bu.x,Bu.y,Ru.x,Ru.y,Lu.x,Lu.y,Gu.x,Gu.y)&&area(Gu.prev,Gu,Gu.next)>=0))return!1;Gu=Gu.nextZ}for(;Vu&&Vu.z>=Fu;){if(Vu!==_u.prev&&Vu!==_u.next&&pointInTriangle(Bu.x,Bu.y,Ru.x,Ru.y,Lu.x,Lu.y,Vu.x,Vu.y)&&area(Vu.prev,Vu,Vu.next)>=0)return!1;Vu=Vu.prevZ}for(;Gu&&Gu.z<=Nu;){if(Gu!==_u.prev&&Gu!==_u.next&&pointInTriangle(Bu.x,Bu.y,Ru.x,Ru.y,Lu.x,Lu.y,Gu.x,Gu.y)&&area(Gu.prev,Gu,Gu.next)>=0)return!1;Gu=Gu.nextZ}return!0}function cureLocalIntersections(_u,Tu,Cu){var Pu=_u;do{var Bu=Pu.prev,Ru=Pu.next.next;!equals(Bu,Ru)&&intersects(Bu,Pu,Pu.next,Ru)&&locallyInside(Bu,Ru)&&locallyInside(Ru,Bu)&&(Tu.push(Bu.i/Cu),Tu.push(Pu.i/Cu),Tu.push(Ru.i/Cu),removeNode(Pu),removeNode(Pu.next),Pu=_u=Ru),Pu=Pu.next}while(Pu!==_u);return filterPoints(Pu)}function splitEarcut(_u,Tu,Cu,Pu,Bu,Ru){var Lu=_u;do{for(var Ou=Lu.next.next;Ou!==Lu.prev;){if(Lu.i!==Ou.i&&isValidDiagonal(Lu,Ou)){var Du=splitPolygon(Lu,Ou);Lu=filterPoints(Lu,Lu.next),Du=filterPoints(Du,Du.next),earcutLinked(Lu,Tu,Cu,Pu,Bu,Ru),earcutLinked(Du,Tu,Cu,Pu,Bu,Ru);return}Ou=Ou.next}Lu=Lu.next}while(Lu!==_u)}function eliminateHoles(_u,Tu,Cu,Pu){var Bu=[],Ru,Lu,Ou,Du,$u;for(Ru=0,Lu=Tu.length;Ru<Lu;Ru++)Ou=Tu[Ru]*Pu,Du=Ru<Lu-1?Tu[Ru+1]*Pu:_u.length,$u=linkedList(_u,Ou,Du,Pu,!1),$u===$u.next&&($u.steiner=!0),Bu.push(getLeftmost($u));for(Bu.sort(compareX),Ru=0;Ru<Bu.length;Ru++)eliminateHole(Bu[Ru],Cu),Cu=filterPoints(Cu,Cu.next);return Cu}function compareX(_u,Tu){return _u.x-Tu.x}function eliminateHole(_u,Tu){if(Tu=findHoleBridge(_u,Tu),Tu){var Cu=splitPolygon(Tu,_u);filterPoints(Tu,Tu.next),filterPoints(Cu,Cu.next)}}function findHoleBridge(_u,Tu){var Cu=Tu,Pu=_u.x,Bu=_u.y,Ru=-1/0,Lu;do{if(Bu<=Cu.y&&Bu>=Cu.next.y&&Cu.next.y!==Cu.y){var Ou=Cu.x+(Bu-Cu.y)*(Cu.next.x-Cu.x)/(Cu.next.y-Cu.y);if(Ou<=Pu&&Ou>Ru){if(Ru=Ou,Ou===Pu){if(Bu===Cu.y)return Cu;if(Bu===Cu.next.y)return Cu.next}Lu=Cu.x<Cu.next.x?Cu:Cu.next}}Cu=Cu.next}while(Cu!==Tu);if(!Lu)return null;if(Pu===Ru)return Lu;var Du=Lu,$u=Lu.x,ku=Lu.y,Fu=1/0,Nu;Cu=Lu;do Pu>=Cu.x&&Cu.x>=$u&&Pu!==Cu.x&&pointInTriangle(Bu<ku?Pu:Ru,Bu,$u,ku,Bu<ku?Ru:Pu,Bu,Cu.x,Cu.y)&&(Nu=Math.abs(Bu-Cu.y)/(Pu-Cu.x),locallyInside(Cu,_u)&&(Nu<Fu||Nu===Fu&&(Cu.x>Lu.x||Cu.x===Lu.x&&sectorContainsSector(Lu,Cu)))&&(Lu=Cu,Fu=Nu)),Cu=Cu.next;while(Cu!==Du);return Lu}function sectorContainsSector(_u,Tu){return area(_u.prev,_u,Tu.prev)<0&&area(Tu.next,_u,_u.next)<0}function indexCurve(_u,Tu,Cu,Pu){var Bu=_u;do Bu.z===null&&(Bu.z=zOrder(Bu.x,Bu.y,Tu,Cu,Pu)),Bu.prevZ=Bu.prev,Bu.nextZ=Bu.next,Bu=Bu.next;while(Bu!==_u);Bu.prevZ.nextZ=null,Bu.prevZ=null,sortLinked(Bu)}function sortLinked(_u){var Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u=1;do{for(Cu=_u,_u=null,Ru=null,Lu=0;Cu;){for(Lu++,Pu=Cu,Ou=0,Tu=0;Tu<$u&&(Ou++,Pu=Pu.nextZ,!!Pu);Tu++);for(Du=$u;Ou>0||Du>0&&Pu;)Ou!==0&&(Du===0||!Pu||Cu.z<=Pu.z)?(Bu=Cu,Cu=Cu.nextZ,Ou--):(Bu=Pu,Pu=Pu.nextZ,Du--),Ru?Ru.nextZ=Bu:_u=Bu,Bu.prevZ=Ru,Ru=Bu;Cu=Pu}Ru.nextZ=null,$u*=2}while(Lu>1);return _u}function zOrder(_u,Tu,Cu,Pu,Bu){return _u=32767*(_u-Cu)*Bu,Tu=32767*(Tu-Pu)*Bu,_u=(_u|_u<<8)&16711935,_u=(_u|_u<<4)&252645135,_u=(_u|_u<<2)&858993459,_u=(_u|_u<<1)&1431655765,Tu=(Tu|Tu<<8)&16711935,Tu=(Tu|Tu<<4)&252645135,Tu=(Tu|Tu<<2)&858993459,Tu=(Tu|Tu<<1)&1431655765,_u|Tu<<1}function getLeftmost(_u){var Tu=_u,Cu=_u;do(Tu.x<Cu.x||Tu.x===Cu.x&&Tu.y<Cu.y)&&(Cu=Tu),Tu=Tu.next;while(Tu!==_u);return Cu}function pointInTriangle(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){return(Bu-Lu)*(Tu-Ou)-(_u-Lu)*(Ru-Ou)>=0&&(_u-Lu)*(Pu-Ou)-(Cu-Lu)*(Tu-Ou)>=0&&(Cu-Lu)*(Ru-Ou)-(Bu-Lu)*(Pu-Ou)>=0}function isValidDiagonal(_u,Tu){return _u.next.i!==Tu.i&&_u.prev.i!==Tu.i&&!intersectsPolygon(_u,Tu)&&(locallyInside(_u,Tu)&&locallyInside(Tu,_u)&&middleInside(_u,Tu)&&(area(_u.prev,_u,Tu.prev)||area(_u,Tu.prev,Tu))||equals(_u,Tu)&&area(_u.prev,_u,_u.next)>0&&area(Tu.prev,Tu,Tu.next)>0)}function area(_u,Tu,Cu){return(Tu.y-_u.y)*(Cu.x-Tu.x)-(Tu.x-_u.x)*(Cu.y-Tu.y)}function equals(_u,Tu){return _u.x===Tu.x&&_u.y===Tu.y}function intersects(_u,Tu,Cu,Pu){var Bu=sign(area(_u,Tu,Cu)),Ru=sign(area(_u,Tu,Pu)),Lu=sign(area(Cu,Pu,_u)),Ou=sign(area(Cu,Pu,Tu));return!!(Bu!==Ru&&Lu!==Ou||Bu===0&&onSegment(_u,Cu,Tu)||Ru===0&&onSegment(_u,Pu,Tu)||Lu===0&&onSegment(Cu,_u,Pu)||Ou===0&&onSegment(Cu,Tu,Pu))}function onSegment(_u,Tu,Cu){return Tu.x<=Math.max(_u.x,Cu.x)&&Tu.x>=Math.min(_u.x,Cu.x)&&Tu.y<=Math.max(_u.y,Cu.y)&&Tu.y>=Math.min(_u.y,Cu.y)}function sign(_u){return _u>0?1:_u<0?-1:0}function intersectsPolygon(_u,Tu){var Cu=_u;do{if(Cu.i!==_u.i&&Cu.next.i!==_u.i&&Cu.i!==Tu.i&&Cu.next.i!==Tu.i&&intersects(Cu,Cu.next,_u,Tu))return!0;Cu=Cu.next}while(Cu!==_u);return!1}function locallyInside(_u,Tu){return area(_u.prev,_u,_u.next)<0?area(_u,Tu,_u.next)>=0&&area(_u,_u.prev,Tu)>=0:area(_u,Tu,_u.prev)<0||area(_u,_u.next,Tu)<0}function middleInside(_u,Tu){var Cu=_u,Pu=!1,Bu=(_u.x+Tu.x)/2,Ru=(_u.y+Tu.y)/2;do Cu.y>Ru!=Cu.next.y>Ru&&Cu.next.y!==Cu.y&&Bu<(Cu.next.x-Cu.x)*(Ru-Cu.y)/(Cu.next.y-Cu.y)+Cu.x&&(Pu=!Pu),Cu=Cu.next;while(Cu!==_u);return Pu}function splitPolygon(_u,Tu){var Cu=new Node(_u.i,_u.x,_u.y),Pu=new Node(Tu.i,Tu.x,Tu.y),Bu=_u.next,Ru=Tu.prev;return _u.next=Tu,Tu.prev=_u,Cu.next=Bu,Bu.prev=Cu,Pu.next=Cu,Cu.prev=Pu,Ru.next=Pu,Pu.prev=Ru,Pu}function insertNode(_u,Tu,Cu,Pu){var Bu=new Node(_u,Tu,Cu);return Pu?(Bu.next=Pu.next,Bu.prev=Pu,Pu.next.prev=Bu,Pu.next=Bu):(Bu.prev=Bu,Bu.next=Bu),Bu}function removeNode(_u){_u.next.prev=_u.prev,_u.prev.next=_u.next,_u.prevZ&&(_u.prevZ.nextZ=_u.nextZ),_u.nextZ&&(_u.nextZ.prevZ=_u.prevZ)}function Node(_u,Tu,Cu){this.i=_u,this.x=Tu,this.y=Cu,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(_u,Tu,Cu,Pu){for(var Bu=0,Ru=Tu,Lu=Cu-Pu;Ru<Cu;Ru+=Pu)Bu+=(_u[Lu]-_u[Ru])*(_u[Ru+1]+_u[Lu+1]),Lu=Ru;return Bu}var ShapeUtils={area:function(_u){for(var Tu=_u.length,Cu=0,Pu=Tu-1,Bu=0;Bu<Tu;Pu=Bu++)Cu+=_u[Pu].x*_u[Bu].y-_u[Bu].x*_u[Pu].y;return Cu*.5},isClockWise:function(_u){return ShapeUtils.area(_u)<0},triangulateShape:function(_u,Tu){var Cu=[],Pu=[],Bu=[];removeDupEndPts(_u),addContour(Cu,_u);var Ru=_u.length;Tu.forEach(removeDupEndPts);for(var Lu=0;Lu<Tu.length;Lu++)Pu.push(Ru),Ru+=Tu[Lu].length,addContour(Cu,Tu[Lu]);for(var Ou=Earcut.triangulate(Cu,Pu),Lu=0;Lu<Ou.length;Lu+=3)Bu.push(Ou.slice(Lu,Lu+3));return Bu}};function removeDupEndPts(_u){var Tu=_u.length;Tu>2&&_u[Tu-1].equals(_u[0])&&_u.pop()}function addContour(_u,Tu){for(var Cu=0;Cu<Tu.length;Cu++)_u.push(Tu[Cu].x),_u.push(Tu[Cu].y)}function ExtrudeGeometry(_u,Tu){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:_u,options:Tu},this.fromBufferGeometry(new ExtrudeBufferGeometry(_u,Tu)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),Tu=this.parameters.shapes,Cu=this.parameters.options;return toJSON(Tu,Cu,_u)};function ExtrudeBufferGeometry(_u,Tu){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:_u,options:Tu},_u=Array.isArray(_u)?_u:[_u];for(var Cu=this,Pu=[],Bu=[],Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru];Du(Ou)}this.setAttribute("position",new Float32BufferAttribute(Pu,3)),this.setAttribute("uv",new Float32BufferAttribute(Bu,2)),this.computeVertexNormals();function Du($u){var ku=[],Fu=Tu.curveSegments!==void 0?Tu.curveSegments:12,Nu=Tu.steps!==void 0?Tu.steps:1,Vu=Tu.depth!==void 0?Tu.depth:100,Gu=Tu.bevelEnabled!==void 0?Tu.bevelEnabled:!0,Hu=Tu.bevelThickness!==void 0?Tu.bevelThickness:6,ju=Tu.bevelSize!==void 0?Tu.bevelSize:Hu-2,Uu=Tu.bevelOffset!==void 0?Tu.bevelOffset:0,zu=Tu.bevelSegments!==void 0?Tu.bevelSegments:3,Wu=Tu.extrudePath,Qu=Tu.UVGenerator!==void 0?Tu.UVGenerator:WorldUVGenerator;Tu.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Vu=Tu.amount);var qu,Yu=!1,Xc,_h,_d,Ku;Wu&&(qu=Wu.getSpacedPoints(Nu),Yu=!0,Gu=!1,Xc=Wu.computeFrenetFrames(Nu,!1),_h=new Vector3,_d=new Vector3,Ku=new Vector3),Gu||(zu=0,Hu=0,ju=0,Uu=0);var Xu,Ju,Zu,_c=$u.extractPoints(Fu),_f=_c.shape,ep=_c.holes,tp=!ShapeUtils.isClockWise(_f);if(tp)for(_f=_f.reverse(),Ju=0,Zu=ep.length;Ju<Zu;Ju++)Xu=ep[Ju],ShapeUtils.isClockWise(Xu)&&(ep[Ju]=Xu.reverse());var op=ShapeUtils.triangulateShape(_f,ep),hp=_f;for(Ju=0,Zu=ep.length;Ju<Zu;Ju++)Xu=ep[Ju],_f=_f.concat(Xu);function cp(Hp,Kp,jp){return Kp||console.error("THREE.ExtrudeGeometry: vec does not exist"),Kp.clone().multiplyScalar(jp).add(Hp)}var Sp,yp,Rp,wp,Pp,Ep=_f.length,ip,rp=op.length;function fp(Hp,Kp,jp){var Yp,_p,Qp,Zp=Hp.x-Kp.x,tm=Hp.y-Kp.y,em=jp.x-Hp.x,lm=jp.y-Hp.y,pm=Zp*Zp+tm*tm,mm=Zp*lm-tm*em;if(Math.abs(mm)>Number.EPSILON){var Sm=Math.sqrt(pm),dm=Math.sqrt(em*em+lm*lm),_m=Kp.x-tm/Sm,xm=Kp.y+Zp/Sm,gm=jp.x-lm/dm,Mm=jp.y+em/dm,Bm=((gm-_m)*lm-(Mm-xm)*em)/(Zp*lm-tm*em);Yp=_m+Zp*Bm-Hp.x,_p=xm+tm*Bm-Hp.y;var ym=Yp*Yp+_p*_p;if(ym<=2)return new Vector2(Yp,_p);Qp=Math.sqrt(ym/2)}else{var mp=!1;Zp>Number.EPSILON?em>Number.EPSILON&&(mp=!0):Zp<-Number.EPSILON?em<-Number.EPSILON&&(mp=!0):Math.sign(tm)===Math.sign(lm)&&(mp=!0),mp?(Yp=-tm,_p=Zp,Qp=Math.sqrt(pm)):(Yp=Zp,_p=tm,Qp=Math.sqrt(pm/2))}return new Vector2(Yp/Qp,_p/Qp)}for(var up=[],pp=0,gp=hp.length,Ap=gp-1,Mp=pp+1;pp<gp;pp++,Ap++,Mp++)Ap===gp&&(Ap=0),Mp===gp&&(Mp=0),up[pp]=fp(hp[pp],hp[Ap],hp[Mp]);var $p=[],Tp,np=up.concat();for(Ju=0,Zu=ep.length;Ju<Zu;Ju++){for(Xu=ep[Ju],Tp=[],pp=0,gp=Xu.length,Ap=gp-1,Mp=pp+1;pp<gp;pp++,Ap++,Mp++)Ap===gp&&(Ap=0),Mp===gp&&(Mp=0),Tp[pp]=fp(Xu[pp],Xu[Ap],Xu[Mp]);$p.push(Tp),np=np.concat(Tp)}for(Sp=0;Sp<zu;Sp++){for(Rp=Sp/zu,wp=Hu*Math.cos(Rp*Math.PI/2),yp=ju*Math.sin(Rp*Math.PI/2)+Uu,pp=0,gp=hp.length;pp<gp;pp++)Pp=cp(hp[pp],up[pp],yp),Fp(Pp.x,Pp.y,-wp);for(Ju=0,Zu=ep.length;Ju<Zu;Ju++)for(Xu=ep[Ju],Tp=$p[Ju],pp=0,gp=Xu.length;pp<gp;pp++)Pp=cp(Xu[pp],Tp[pp],yp),Fp(Pp.x,Pp.y,-wp)}for(yp=ju+Uu,pp=0;pp<Ep;pp++)Pp=Gu?cp(_f[pp],np[pp],yp):_f[pp],Yu?(_d.copy(Xc.normals[0]).multiplyScalar(Pp.x),_h.copy(Xc.binormals[0]).multiplyScalar(Pp.y),Ku.copy(qu[0]).add(_d).add(_h),Fp(Ku.x,Ku.y,Ku.z)):Fp(Pp.x,Pp.y,0);var sp;for(sp=1;sp<=Nu;sp++)for(pp=0;pp<Ep;pp++)Pp=Gu?cp(_f[pp],np[pp],yp):_f[pp],Yu?(_d.copy(Xc.normals[sp]).multiplyScalar(Pp.x),_h.copy(Xc.binormals[sp]).multiplyScalar(Pp.y),Ku.copy(qu[sp]).add(_d).add(_h),Fp(Ku.x,Ku.y,Ku.z)):Fp(Pp.x,Pp.y,Vu/Nu*sp);for(Sp=zu-1;Sp>=0;Sp--){for(Rp=Sp/zu,wp=Hu*Math.cos(Rp*Math.PI/2),yp=ju*Math.sin(Rp*Math.PI/2)+Uu,pp=0,gp=hp.length;pp<gp;pp++)Pp=cp(hp[pp],up[pp],yp),Fp(Pp.x,Pp.y,Vu+wp);for(Ju=0,Zu=ep.length;Ju<Zu;Ju++)for(Xu=ep[Ju],Tp=$p[Ju],pp=0,gp=Xu.length;pp<gp;pp++)Pp=cp(Xu[pp],Tp[pp],yp),Yu?Fp(Pp.x,Pp.y+qu[Nu-1].y,qu[Nu-1].x+wp):Fp(Pp.x,Pp.y,Vu+wp)}Ip(),Cp();function Ip(){var Hp=Pu.length/3;if(Gu){var Kp=0,jp=Ep*Kp;for(pp=0;pp<rp;pp++)ip=op[pp],Gp(ip[2]+jp,ip[1]+jp,ip[0]+jp);for(Kp=Nu+zu*2,jp=Ep*Kp,pp=0;pp<rp;pp++)ip=op[pp],Gp(ip[0]+jp,ip[1]+jp,ip[2]+jp)}else{for(pp=0;pp<rp;pp++)ip=op[pp],Gp(ip[2],ip[1],ip[0]);for(pp=0;pp<rp;pp++)ip=op[pp],Gp(ip[0]+Ep*Nu,ip[1]+Ep*Nu,ip[2]+Ep*Nu)}Cu.addGroup(Hp,Pu.length/3-Hp,0)}function Cp(){var Hp=Pu.length/3,Kp=0;for(Vp(hp,Kp),Kp+=hp.length,Ju=0,Zu=ep.length;Ju<Zu;Ju++)Xu=ep[Ju],Vp(Xu,Kp),Kp+=Xu.length;Cu.addGroup(Hp,Pu.length/3-Hp,1)}function Vp(Hp,Kp){var jp,Yp;for(pp=Hp.length;--pp>=0;){jp=pp,Yp=pp-1,Yp<0&&(Yp=Hp.length-1);var _p=0,Qp=Nu+zu*2;for(_p=0;_p<Qp;_p++){var Zp=Ep*_p,tm=Ep*(_p+1),em=Kp+jp+Zp,lm=Kp+Yp+Zp,pm=Kp+Yp+tm,mm=Kp+jp+tm;qp(em,lm,pm,mm)}}}function Fp(Hp,Kp,jp){ku.push(Hp),ku.push(Kp),ku.push(jp)}function Gp(Hp,Kp,jp){Wp(Hp),Wp(Kp),Wp(jp);var Yp=Pu.length/3,_p=Qu.generateTopUV(Cu,Pu,Yp-3,Yp-2,Yp-1);Jp(_p[0]),Jp(_p[1]),Jp(_p[2])}function qp(Hp,Kp,jp,Yp){Wp(Hp),Wp(Kp),Wp(Yp),Wp(Kp),Wp(jp),Wp(Yp);var _p=Pu.length/3,Qp=Qu.generateSideWallUV(Cu,Pu,_p-6,_p-3,_p-2,_p-1);Jp(Qp[0]),Jp(Qp[1]),Jp(Qp[3]),Jp(Qp[1]),Jp(Qp[2]),Jp(Qp[3])}function Wp(Hp){Pu.push(ku[Hp*3+0]),Pu.push(ku[Hp*3+1]),Pu.push(ku[Hp*3+2])}function Jp(Hp){Bu.push(Hp.x),Bu.push(Hp.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),Tu=this.parameters.shapes,Cu=this.parameters.options;return toJSON(Tu,Cu,_u)};var WorldUVGenerator={generateTopUV:function(_u,Tu,Cu,Pu,Bu){var Ru=Tu[Cu*3],Lu=Tu[Cu*3+1],Ou=Tu[Pu*3],Du=Tu[Pu*3+1],$u=Tu[Bu*3],ku=Tu[Bu*3+1];return[new Vector2(Ru,Lu),new Vector2(Ou,Du),new Vector2($u,ku)]},generateSideWallUV:function(_u,Tu,Cu,Pu,Bu,Ru){var Lu=Tu[Cu*3],Ou=Tu[Cu*3+1],Du=Tu[Cu*3+2],$u=Tu[Pu*3],ku=Tu[Pu*3+1],Fu=Tu[Pu*3+2],Nu=Tu[Bu*3],Vu=Tu[Bu*3+1],Gu=Tu[Bu*3+2],Hu=Tu[Ru*3],ju=Tu[Ru*3+1],Uu=Tu[Ru*3+2];return Math.abs(Ou-ku)<.01?[new Vector2(Lu,1-Du),new Vector2($u,1-Fu),new Vector2(Nu,1-Gu),new Vector2(Hu,1-Uu)]:[new Vector2(Ou,1-Du),new Vector2(ku,1-Fu),new Vector2(Vu,1-Gu),new Vector2(ju,1-Uu)]}};function toJSON(_u,Tu,Cu){if(Cu.shapes=[],Array.isArray(_u))for(var Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Ru=_u[Pu];Cu.shapes.push(Ru.uuid)}else Cu.shapes.push(_u.uuid);return Tu.extrudePath!==void 0&&(Cu.options.extrudePath=Tu.extrudePath.toJSON()),Cu}function TextGeometry(_u,Tu){Geometry.call(this),this.type="TextGeometry",this.parameters={text:_u,parameters:Tu},this.fromBufferGeometry(new TextBufferGeometry(_u,Tu)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(_u,Tu){Tu=Tu||{};var Cu=Tu.font;if(!(Cu&&Cu.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Pu=Cu.generateShapes(_u,Tu.size);Tu.depth=Tu.height!==void 0?Tu.height:50,Tu.bevelThickness===void 0&&(Tu.bevelThickness=10),Tu.bevelSize===void 0&&(Tu.bevelSize=8),Tu.bevelEnabled===void 0&&(Tu.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Pu,Tu),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:_u,widthSegments:Tu,heightSegments:Cu,phiStart:Pu,phiLength:Bu,thetaStart:Ru,thetaLength:Lu},this.fromBufferGeometry(new SphereBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:_u,widthSegments:Tu,heightSegments:Cu,phiStart:Pu,phiLength:Bu,thetaStart:Ru,thetaLength:Lu},_u=_u||1,Tu=Math.max(3,Math.floor(Tu)||8),Cu=Math.max(2,Math.floor(Cu)||6),Pu=Pu!==void 0?Pu:0,Bu=Bu!==void 0?Bu:Math.PI*2,Ru=Ru!==void 0?Ru:0,Lu=Lu!==void 0?Lu:Math.PI;var Ou=Math.min(Ru+Lu,Math.PI),Du,$u,ku=0,Fu=[],Nu=new Vector3,Vu=new Vector3,Gu=[],Hu=[],ju=[],Uu=[];for($u=0;$u<=Cu;$u++){var zu=[],Wu=$u/Cu,Qu=0;for($u==0&&Ru==0?Qu=.5/Tu:$u==Cu&&Ou==Math.PI&&(Qu=-.5/Tu),Du=0;Du<=Tu;Du++){var qu=Du/Tu;Nu.x=-_u*Math.cos(Pu+qu*Bu)*Math.sin(Ru+Wu*Lu),Nu.y=_u*Math.cos(Ru+Wu*Lu),Nu.z=_u*Math.sin(Pu+qu*Bu)*Math.sin(Ru+Wu*Lu),Hu.push(Nu.x,Nu.y,Nu.z),Vu.copy(Nu).normalize(),ju.push(Vu.x,Vu.y,Vu.z),Uu.push(qu+Qu,1-Wu),zu.push(ku++)}Fu.push(zu)}for($u=0;$u<Cu;$u++)for(Du=0;Du<Tu;Du++){var Yu=Fu[$u][Du+1],Xc=Fu[$u][Du],_h=Fu[$u+1][Du],_d=Fu[$u+1][Du+1];($u!==0||Ru>0)&&Gu.push(Yu,Xc,_d),($u!==Cu-1||Ou<Math.PI)&&Gu.push(Xc,_h,_d)}this.setIndex(Gu),this.setAttribute("position",new Float32BufferAttribute(Hu,3)),this.setAttribute("normal",new Float32BufferAttribute(ju,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(_u,Tu,Cu,Pu,Bu,Ru){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:_u,outerRadius:Tu,thetaSegments:Cu,phiSegments:Pu,thetaStart:Bu,thetaLength:Ru},this.fromBufferGeometry(new RingBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:_u,outerRadius:Tu,thetaSegments:Cu,phiSegments:Pu,thetaStart:Bu,thetaLength:Ru},_u=_u||.5,Tu=Tu||1,Bu=Bu!==void 0?Bu:0,Ru=Ru!==void 0?Ru:Math.PI*2,Cu=Cu!==void 0?Math.max(3,Cu):8,Pu=Pu!==void 0?Math.max(1,Pu):1;var Lu=[],Ou=[],Du=[],$u=[],ku,Fu=_u,Nu=(Tu-_u)/Pu,Vu=new Vector3,Gu=new Vector2,Hu,ju;for(Hu=0;Hu<=Pu;Hu++){for(ju=0;ju<=Cu;ju++)ku=Bu+ju/Cu*Ru,Vu.x=Fu*Math.cos(ku),Vu.y=Fu*Math.sin(ku),Ou.push(Vu.x,Vu.y,Vu.z),Du.push(0,0,1),Gu.x=(Vu.x/Tu+1)/2,Gu.y=(Vu.y/Tu+1)/2,$u.push(Gu.x,Gu.y);Fu+=Nu}for(Hu=0;Hu<Pu;Hu++){var Uu=Hu*(Cu+1);for(ju=0;ju<Cu;ju++){ku=ju+Uu;var zu=ku,Wu=ku+Cu+1,Qu=ku+Cu+2,qu=ku+1;Lu.push(zu,Wu,qu),Lu.push(Wu,Qu,qu)}}this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("normal",new Float32BufferAttribute(Du,3)),this.setAttribute("uv",new Float32BufferAttribute($u,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(_u,Tu,Cu,Pu){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:_u,segments:Tu,phiStart:Cu,phiLength:Pu},this.fromBufferGeometry(new LatheBufferGeometry(_u,Tu,Cu,Pu)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(_u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:_u,segments:Tu,phiStart:Cu,phiLength:Pu},Tu=Math.floor(Tu)||12,Cu=Cu||0,Pu=Pu||Math.PI*2,Pu=MathUtils.clamp(Pu,0,Math.PI*2);var Bu=[],Ru=[],Lu=[],Ou,Du=1/Tu,$u=new Vector3,ku=new Vector2,Fu,Nu;for(Fu=0;Fu<=Tu;Fu++){var Vu=Cu+Fu*Du*Pu,Gu=Math.sin(Vu),Hu=Math.cos(Vu);for(Nu=0;Nu<=_u.length-1;Nu++)$u.x=_u[Nu].x*Gu,$u.y=_u[Nu].y,$u.z=_u[Nu].x*Hu,Ru.push($u.x,$u.y,$u.z),ku.x=Fu/Tu,ku.y=Nu/(_u.length-1),Lu.push(ku.x,ku.y)}for(Fu=0;Fu<Tu;Fu++)for(Nu=0;Nu<_u.length-1;Nu++){Ou=Nu+Fu*_u.length;var ju=Ou,Uu=Ou+_u.length,zu=Ou+_u.length+1,Wu=Ou+1;Bu.push(ju,Uu,Wu),Bu.push(Uu,zu,Wu)}if(this.setIndex(Bu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2)),this.computeVertexNormals(),Pu===Math.PI*2){var Qu=this.attributes.normal.array,qu=new Vector3,Yu=new Vector3,Xc=new Vector3;for(Ou=Tu*_u.length*3,Fu=0,Nu=0;Fu<_u.length;Fu++,Nu+=3)qu.x=Qu[Nu+0],qu.y=Qu[Nu+1],qu.z=Qu[Nu+2],Yu.x=Qu[Ou+Nu+0],Yu.y=Qu[Ou+Nu+1],Yu.z=Qu[Ou+Nu+2],Xc.addVectors(qu,Yu).normalize(),Qu[Nu+0]=Qu[Ou+Nu+0]=Xc.x,Qu[Nu+1]=Qu[Ou+Nu+1]=Xc.y,Qu[Nu+2]=Qu[Ou+Nu+2]=Xc.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(_u,Tu){Geometry.call(this),this.type="ShapeGeometry",typeof Tu=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),Tu=Tu.curveSegments),this.parameters={shapes:_u,curveSegments:Tu},this.fromBufferGeometry(new ShapeBufferGeometry(_u,Tu)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),Tu=this.parameters.shapes;return toJSON$1(Tu,_u)};function ShapeBufferGeometry(_u,Tu){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:_u,curveSegments:Tu},Tu=Tu||12;var Cu=[],Pu=[],Bu=[],Ru=[],Lu=0,Ou=0;if(Array.isArray(_u)===!1)$u(_u);else for(var Du=0;Du<_u.length;Du++)$u(_u[Du]),this.addGroup(Lu,Ou,Du),Lu+=Ou,Ou=0;this.setIndex(Cu),this.setAttribute("position",new Float32BufferAttribute(Pu,3)),this.setAttribute("normal",new Float32BufferAttribute(Bu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ru,2));function $u(ku){var Fu,Nu,Vu,Gu=Pu.length/3,Hu=ku.extractPoints(Tu),ju=Hu.shape,Uu=Hu.holes;for(ShapeUtils.isClockWise(ju)===!1&&(ju=ju.reverse()),Fu=0,Nu=Uu.length;Fu<Nu;Fu++)Vu=Uu[Fu],ShapeUtils.isClockWise(Vu)===!0&&(Uu[Fu]=Vu.reverse());var zu=ShapeUtils.triangulateShape(ju,Uu);for(Fu=0,Nu=Uu.length;Fu<Nu;Fu++)Vu=Uu[Fu],ju=ju.concat(Vu);for(Fu=0,Nu=ju.length;Fu<Nu;Fu++){var Wu=ju[Fu];Pu.push(Wu.x,Wu.y,0),Bu.push(0,0,1),Ru.push(Wu.x,Wu.y)}for(Fu=0,Nu=zu.length;Fu<Nu;Fu++){var Qu=zu[Fu],qu=Qu[0]+Gu,Yu=Qu[1]+Gu,Xc=Qu[2]+Gu;Cu.push(qu,Yu,Xc),Ou+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),Tu=this.parameters.shapes;return toJSON$1(Tu,_u)};function toJSON$1(_u,Tu){if(Tu.shapes=[],Array.isArray(_u))for(var Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Tu.shapes.push(Bu.uuid)}else Tu.shapes.push(_u.uuid);return Tu}function EdgesGeometry(_u,Tu){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:Tu},Tu=Tu!==void 0?Tu:1;var Cu=[],Pu=Math.cos(MathUtils.DEG2RAD*Tu),Bu=[0,0],Ru={},Lu,Ou,Du,$u=["a","b","c"],ku;_u.isBufferGeometry?(ku=new Geometry,ku.fromBufferGeometry(_u)):ku=_u.clone(),ku.mergeVertices(),ku.computeFaceNormals();for(var Fu=ku.vertices,Nu=ku.faces,Vu=0,Gu=Nu.length;Vu<Gu;Vu++)for(var Hu=Nu[Vu],ju=0;ju<3;ju++)Lu=Hu[$u[ju]],Ou=Hu[$u[(ju+1)%3]],Bu[0]=Math.min(Lu,Ou),Bu[1]=Math.max(Lu,Ou),Du=Bu[0]+","+Bu[1],Ru[Du]===void 0?Ru[Du]={index1:Bu[0],index2:Bu[1],face1:Vu,face2:void 0}:Ru[Du].face2=Vu;for(Du in Ru){var Uu=Ru[Du];if(Uu.face2===void 0||Nu[Uu.face1].normal.dot(Nu[Uu.face2].normal)<=Pu){var zu=Fu[Uu.index1];Cu.push(zu.x,zu.y,zu.z),zu=Fu[Uu.index2],Cu.push(zu.x,zu.y,zu.z)}}this.setAttribute("position",new Float32BufferAttribute(Cu,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:_u,radiusBottom:Tu,height:Cu,radialSegments:Pu,heightSegments:Bu,openEnded:Ru,thetaStart:Lu,thetaLength:Ou},this.fromBufferGeometry(new CylinderBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:_u,radiusBottom:Tu,height:Cu,radialSegments:Pu,heightSegments:Bu,openEnded:Ru,thetaStart:Lu,thetaLength:Ou};var Du=this;_u=_u!==void 0?_u:1,Tu=Tu!==void 0?Tu:1,Cu=Cu||1,Pu=Math.floor(Pu)||8,Bu=Math.floor(Bu)||1,Ru=Ru!==void 0?Ru:!1,Lu=Lu!==void 0?Lu:0,Ou=Ou!==void 0?Ou:Math.PI*2;var $u=[],ku=[],Fu=[],Nu=[],Vu=0,Gu=[],Hu=Cu/2,ju=0;Uu(),Ru===!1&&(_u>0&&zu(!0),Tu>0&&zu(!1)),this.setIndex($u),this.setAttribute("position",new Float32BufferAttribute(ku,3)),this.setAttribute("normal",new Float32BufferAttribute(Fu,3)),this.setAttribute("uv",new Float32BufferAttribute(Nu,2));function Uu(){var Wu,Qu,qu=new Vector3,Yu=new Vector3,Xc=0,_h=(Tu-_u)/Cu;for(Qu=0;Qu<=Bu;Qu++){var _d=[],Ku=Qu/Bu,Xu=Ku*(Tu-_u)+_u;for(Wu=0;Wu<=Pu;Wu++){var Ju=Wu/Pu,Zu=Ju*Ou+Lu,_c=Math.sin(Zu),_f=Math.cos(Zu);Yu.x=Xu*_c,Yu.y=-Ku*Cu+Hu,Yu.z=Xu*_f,ku.push(Yu.x,Yu.y,Yu.z),qu.set(_c,_h,_f).normalize(),Fu.push(qu.x,qu.y,qu.z),Nu.push(Ju,1-Ku),_d.push(Vu++)}Gu.push(_d)}for(Wu=0;Wu<Pu;Wu++)for(Qu=0;Qu<Bu;Qu++){var ep=Gu[Qu][Wu],tp=Gu[Qu+1][Wu],op=Gu[Qu+1][Wu+1],hp=Gu[Qu][Wu+1];$u.push(ep,tp,hp),$u.push(tp,op,hp),Xc+=6}Du.addGroup(ju,Xc,0),ju+=Xc}function zu(Wu){var Qu,qu,Yu,Xc=new Vector2,_h=new Vector3,_d=0,Ku=Wu===!0?_u:Tu,Xu=Wu===!0?1:-1;for(qu=Vu,Qu=1;Qu<=Pu;Qu++)ku.push(0,Hu*Xu,0),Fu.push(0,Xu,0),Nu.push(.5,.5),Vu++;for(Yu=Vu,Qu=0;Qu<=Pu;Qu++){var Ju=Qu/Pu,Zu=Ju*Ou+Lu,_c=Math.cos(Zu),_f=Math.sin(Zu);_h.x=Ku*_f,_h.y=Hu*Xu,_h.z=Ku*_c,ku.push(_h.x,_h.y,_h.z),Fu.push(0,Xu,0),Xc.x=_c*.5+.5,Xc.y=_f*.5*Xu+.5,Nu.push(Xc.x,Xc.y),Vu++}for(Qu=0;Qu<Pu;Qu++){var ep=qu+Qu,tp=Yu+Qu;Wu===!0?$u.push(tp,tp+1,ep):$u.push(tp+1,tp,ep),_d+=3}Du.addGroup(ju,_d,Wu===!0?1:2),ju+=_d}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu){CylinderGeometry.call(this,0,_u,Tu,Cu,Pu,Bu,Ru,Lu),this.type="ConeGeometry",this.parameters={radius:_u,height:Tu,radialSegments:Cu,heightSegments:Pu,openEnded:Bu,thetaStart:Ru,thetaLength:Lu}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(_u,Tu,Cu,Pu,Bu,Ru,Lu){CylinderBufferGeometry.call(this,0,_u,Tu,Cu,Pu,Bu,Ru,Lu),this.type="ConeBufferGeometry",this.parameters={radius:_u,height:Tu,radialSegments:Cu,heightSegments:Pu,openEnded:Bu,thetaStart:Ru,thetaLength:Lu}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(_u,Tu,Cu,Pu){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:_u,segments:Tu,thetaStart:Cu,thetaLength:Pu},this.fromBufferGeometry(new CircleBufferGeometry(_u,Tu,Cu,Pu)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(_u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:_u,segments:Tu,thetaStart:Cu,thetaLength:Pu},_u=_u||1,Tu=Tu!==void 0?Math.max(3,Tu):8,Cu=Cu!==void 0?Cu:0,Pu=Pu!==void 0?Pu:Math.PI*2;var Bu=[],Ru=[],Lu=[],Ou=[],Du,$u,ku=new Vector3,Fu=new Vector2;for(Ru.push(0,0,0),Lu.push(0,0,1),Ou.push(.5,.5),$u=0,Du=3;$u<=Tu;$u++,Du+=3){var Nu=Cu+$u/Tu*Pu;ku.x=_u*Math.cos(Nu),ku.y=_u*Math.sin(Nu),Ru.push(ku.x,ku.y,ku.z),Lu.push(0,0,1),Fu.x=(Ru[Du]/_u+1)/2,Fu.y=(Ru[Du+1]/_u+1)/2,Ou.push(Fu.x,Fu.y)}for(Du=1;Du<=Tu;Du++)Bu.push(Du,Du+1,0);this.setIndex(Bu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("normal",new Float32BufferAttribute(Lu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(_u){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(_u)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this};function RawShaderMaterial(_u){ShaderMaterial.call(this,_u),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(_u){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(_u)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={STANDARD:""},this.color.copy(_u.color),this.roughness=_u.roughness,this.metalness=_u.metalness,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.roughnessMap=_u.roughnessMap,this.metalnessMap=_u.metalnessMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.envMapIntensity=_u.envMapIntensity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.vertexTangents=_u.vertexTangents,this};function MeshPhysicalMaterial(_u){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(_u)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(_u){return MeshStandardMaterial.prototype.copy.call(this,_u),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=_u.clearcoat,this.clearcoatMap=_u.clearcoatMap,this.clearcoatRoughness=_u.clearcoatRoughness,this.clearcoatRoughnessMap=_u.clearcoatRoughnessMap,this.clearcoatNormalMap=_u.clearcoatNormalMap,this.clearcoatNormalScale.copy(_u.clearcoatNormalScale),this.reflectivity=_u.reflectivity,_u.sheen?this.sheen=(this.sheen||new Color).copy(_u.sheen):this.sheen=null,this.transparency=_u.transparency,this};function MeshPhongMaterial(_u){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshToonMaterial(_u){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.gradientMap=_u.gradientMap,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshNormalMaterial(_u){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshLambertMaterial(_u){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshMatcapMaterial(_u){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={MATCAP:""},this.color.copy(_u.color),this.matcap=_u.matcap,this.map=_u.map,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.alphaMap=_u.alphaMap,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function LineDashedMaterial(_u){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_u)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(_u){return LineBasicMaterial.prototype.copy.call(this,_u),this.scale=_u.scale,this.dashSize=_u.dashSize,this.gapSize=_u.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(_u,Tu,Cu){return AnimationUtils.isTypedArray(_u)?new _u.constructor(_u.subarray(Tu,Cu!==void 0?Cu:_u.length)):_u.slice(Tu,Cu)},convertArray:function(_u,Tu,Cu){return!_u||!Cu&&_u.constructor===Tu?_u:typeof Tu.BYTES_PER_ELEMENT=="number"?new Tu(_u):Array.prototype.slice.call(_u)},isTypedArray:function(_u){return ArrayBuffer.isView(_u)&&!(_u instanceof DataView)},getKeyframeOrder:function(_u){function Tu(Ru,Lu){return _u[Ru]-_u[Lu]}for(var Cu=_u.length,Pu=new Array(Cu),Bu=0;Bu!==Cu;++Bu)Pu[Bu]=Bu;return Pu.sort(Tu),Pu},sortedArray:function(_u,Tu,Cu){for(var Pu=_u.length,Bu=new _u.constructor(Pu),Ru=0,Lu=0;Lu!==Pu;++Ru)for(var Ou=Cu[Ru]*Tu,Du=0;Du!==Tu;++Du)Bu[Lu++]=_u[Ou+Du];return Bu},flattenJSON:function(_u,Tu,Cu,Pu){for(var Bu=1,Ru=_u[0];Ru!==void 0&&Ru[Pu]===void 0;)Ru=_u[Bu++];if(Ru!==void 0){var Lu=Ru[Pu];if(Lu!==void 0)if(Array.isArray(Lu))do Lu=Ru[Pu],Lu!==void 0&&(Tu.push(Ru.time),Cu.push.apply(Cu,Lu)),Ru=_u[Bu++];while(Ru!==void 0);else if(Lu.toArray!==void 0)do Lu=Ru[Pu],Lu!==void 0&&(Tu.push(Ru.time),Lu.toArray(Cu,Cu.length)),Ru=_u[Bu++];while(Ru!==void 0);else do Lu=Ru[Pu],Lu!==void 0&&(Tu.push(Ru.time),Cu.push(Lu)),Ru=_u[Bu++];while(Ru!==void 0)}},subclip:function(_u,Tu,Cu,Pu,Bu){Bu=Bu||30;var Ru=_u.clone();Ru.name=Tu;for(var Lu=[],Ou=0;Ou<Ru.tracks.length;++Ou){for(var Du=Ru.tracks[Ou],$u=Du.getValueSize(),ku=[],Fu=[],Nu=0;Nu<Du.times.length;++Nu){var Vu=Du.times[Nu]*Bu;if(!(Vu<Cu||Vu>=Pu)){ku.push(Du.times[Nu]);for(var Gu=0;Gu<$u;++Gu)Fu.push(Du.values[Nu*$u+Gu])}}ku.length!==0&&(Du.times=AnimationUtils.convertArray(ku,Du.times.constructor),Du.values=AnimationUtils.convertArray(Fu,Du.values.constructor),Lu.push(Du))}Ru.tracks=Lu;for(var Hu=1/0,Ou=0;Ou<Ru.tracks.length;++Ou)Hu>Ru.tracks[Ou].times[0]&&(Hu=Ru.tracks[Ou].times[0]);for(var Ou=0;Ou<Ru.tracks.length;++Ou)Ru.tracks[Ou].shift(-1*Hu);return Ru.resetDuration(),Ru},makeClipAdditive:function(_u,Tu,Cu,Pu){Tu===void 0&&(Tu=0),Cu===void 0&&(Cu=_u),(Pu===void 0||Pu<=0)&&(Pu=30);for(var Bu=_u.tracks.length,Ru=Tu/Pu,Lu=0;Lu<Bu;++Lu){var Ou=Cu.tracks[Lu],Du=Ou.ValueTypeName;if(!(Du==="bool"||Du==="string")){var $u=_u.tracks.find(function(Qu){return Qu.name===Ou.name&&Qu.ValueTypeName===Du});if($u!==void 0){var ku=Ou.getValueSize(),Fu=Ou.times.length-1,Nu;if(Ru<=Ou.times[0])Nu=AnimationUtils.arraySlice(Ou.values,0,Ou.valueSize);else if(Ru>=Ou.times[Fu]){var Vu=Fu*ku;Nu=AnimationUtils.arraySlice(Ou.values,Vu)}else{var Gu=Ou.createInterpolant();Gu.evaluate(Ru),Nu=Gu.resultBuffer}if(Du==="quaternion"){var Hu=new Quaternion(Nu[0],Nu[1],Nu[2],Nu[3]).normalize().conjugate();Hu.toArray(Nu)}for(var ju=$u.times.length,Uu=0;Uu<ju;++Uu){var zu=Uu*ku;if(Du==="quaternion")Quaternion.multiplyQuaternionsFlat($u.values,zu,Nu,0,$u.values,zu);else for(var Wu=0;Wu<ku;++Wu)$u.values[zu+Wu]-=Nu[Wu]}}}}return _u.blendMode=AdditiveAnimationBlendMode,_u}};function Interpolant(_u,Tu,Cu,Pu){this.parameterPositions=_u,this._cachedIndex=0,this.resultBuffer=Pu!==void 0?Pu:new Tu.constructor(Cu),this.sampleValues=Tu,this.valueSize=Cu}Object.assign(Interpolant.prototype,{evaluate:function(_u){var Tu=this.parameterPositions,Cu=this._cachedIndex,Pu=Tu[Cu],Bu=Tu[Cu-1];e:{t:{var Ru;n:{r:if(!(_u<Pu)){for(var Lu=Cu+2;;){if(Pu===void 0){if(_u<Bu)break r;return Cu=Tu.length,this._cachedIndex=Cu,this.afterEnd_(Cu-1,_u,Bu)}if(Cu===Lu)break;if(Bu=Pu,Pu=Tu[++Cu],_u<Pu)break t}Ru=Tu.length;break n}if(!(_u>=Bu)){var Ou=Tu[1];_u<Ou&&(Cu=2,Bu=Ou);for(var Lu=Cu-2;;){if(Bu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Pu);if(Cu===Lu)break;if(Pu=Bu,Bu=Tu[--Cu-1],_u>=Bu)break t}Ru=Cu,Cu=0;break n}break e}for(;Cu<Ru;){var Du=Cu+Ru>>>1;_u<Tu[Du]?Ru=Du:Cu=Du+1}if(Pu=Tu[Cu],Bu=Tu[Cu-1],Bu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Pu);if(Pu===void 0)return Cu=Tu.length,this._cachedIndex=Cu,this.afterEnd_(Cu-1,Bu,_u)}this._cachedIndex=Cu,this.intervalChanged_(Cu,Bu,Pu)}return this.interpolate_(Cu,Bu,_u,Pu)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(_u){for(var Tu=this.resultBuffer,Cu=this.sampleValues,Pu=this.valueSize,Bu=_u*Pu,Ru=0;Ru!==Pu;++Ru)Tu[Ru]=Cu[Bu+Ru];return Tu},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(_u,Tu,Cu,Pu){Interpolant.call(this,_u,Tu,Cu,Pu),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(_u,Tu,Cu){var Pu=this.parameterPositions,Bu=_u-2,Ru=_u+1,Lu=Pu[Bu],Ou=Pu[Ru];if(Lu===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Bu=_u,Lu=2*Tu-Cu;break;case WrapAroundEnding:Bu=Pu.length-2,Lu=Tu+Pu[Bu]-Pu[Bu+1];break;default:Bu=_u,Lu=Cu}if(Ou===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ru=_u,Ou=2*Cu-Tu;break;case WrapAroundEnding:Ru=1,Ou=Cu+Pu[1]-Pu[0];break;default:Ru=_u-1,Ou=Tu}var Du=(Cu-Tu)*.5,$u=this.valueSize;this._weightPrev=Du/(Tu-Lu),this._weightNext=Du/(Ou-Cu),this._offsetPrev=Bu*$u,this._offsetNext=Ru*$u},interpolate_:function(_u,Tu,Cu,Pu){for(var Bu=this.resultBuffer,Ru=this.sampleValues,Lu=this.valueSize,Ou=_u*Lu,Du=Ou-Lu,$u=this._offsetPrev,ku=this._offsetNext,Fu=this._weightPrev,Nu=this._weightNext,Vu=(Cu-Tu)/(Pu-Tu),Gu=Vu*Vu,Hu=Gu*Vu,ju=-Fu*Hu+2*Fu*Gu-Fu*Vu,Uu=(1+Fu)*Hu+(-1.5-2*Fu)*Gu+(-.5+Fu)*Vu+1,zu=(-1-Nu)*Hu+(1.5+Nu)*Gu+.5*Vu,Wu=Nu*Hu-Nu*Gu,Qu=0;Qu!==Lu;++Qu)Bu[Qu]=ju*Ru[$u+Qu]+Uu*Ru[Du+Qu]+zu*Ru[Ou+Qu]+Wu*Ru[ku+Qu];return Bu}});function LinearInterpolant(_u,Tu,Cu,Pu){Interpolant.call(this,_u,Tu,Cu,Pu)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(_u,Tu,Cu,Pu){for(var Bu=this.resultBuffer,Ru=this.sampleValues,Lu=this.valueSize,Ou=_u*Lu,Du=Ou-Lu,$u=(Cu-Tu)/(Pu-Tu),ku=1-$u,Fu=0;Fu!==Lu;++Fu)Bu[Fu]=Ru[Du+Fu]*ku+Ru[Ou+Fu]*$u;return Bu}});function DiscreteInterpolant(_u,Tu,Cu,Pu){Interpolant.call(this,_u,Tu,Cu,Pu)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(_u){return this.copySampleValue_(_u-1)}});function KeyframeTrack(_u,Tu,Cu,Pu){if(_u===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(Tu===void 0||Tu.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_u);this.name=_u,this.times=AnimationUtils.convertArray(Tu,this.TimeBufferType),this.values=AnimationUtils.convertArray(Cu,this.ValueBufferType),this.setInterpolation(Pu||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(_u){var Tu=_u.constructor,Cu;if(Tu.toJSON!==void 0)Cu=Tu.toJSON(_u);else{Cu={name:_u.name,times:AnimationUtils.convertArray(_u.times,Array),values:AnimationUtils.convertArray(_u.values,Array)};var Pu=_u.getInterpolation();Pu!==_u.DefaultInterpolation&&(Cu.interpolation=Pu)}return Cu.type=_u.ValueTypeName,Cu}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(_u){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodLinear:function(_u){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:function(_u){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_u)},setInterpolation:function(_u){var Tu;switch(_u){case InterpolateDiscrete:Tu=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:Tu=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:Tu=this.InterpolantFactoryMethodSmooth;break}if(Tu===void 0){var Cu="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_u!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Cu);return console.warn("THREE.KeyframeTrack:",Cu),this}return this.createInterpolant=Tu,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(_u){if(_u!==0)for(var Tu=this.times,Cu=0,Pu=Tu.length;Cu!==Pu;++Cu)Tu[Cu]+=_u;return this},scale:function(_u){if(_u!==1)for(var Tu=this.times,Cu=0,Pu=Tu.length;Cu!==Pu;++Cu)Tu[Cu]*=_u;return this},trim:function(_u,Tu){for(var Cu=this.times,Pu=Cu.length,Bu=0,Ru=Pu-1;Bu!==Pu&&Cu[Bu]<_u;)++Bu;for(;Ru!==-1&&Cu[Ru]>Tu;)--Ru;if(++Ru,Bu!==0||Ru!==Pu){Bu>=Ru&&(Ru=Math.max(Ru,1),Bu=Ru-1);var Lu=this.getValueSize();this.times=AnimationUtils.arraySlice(Cu,Bu,Ru),this.values=AnimationUtils.arraySlice(this.values,Bu*Lu,Ru*Lu)}return this},validate:function(){var _u=!0,Tu=this.getValueSize();Tu-Math.floor(Tu)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_u=!1);var Cu=this.times,Pu=this.values,Bu=Cu.length;Bu===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_u=!1);for(var Ru=null,Lu=0;Lu!==Bu;Lu++){var Ou=Cu[Lu];if(typeof Ou=="number"&&isNaN(Ou)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Lu,Ou),_u=!1;break}if(Ru!==null&&Ru>Ou){console.error("THREE.KeyframeTrack: Out of order keys.",this,Lu,Ou,Ru),_u=!1;break}Ru=Ou}if(Pu!==void 0&&AnimationUtils.isTypedArray(Pu))for(var Lu=0,Du=Pu.length;Lu!==Du;++Lu){var $u=Pu[Lu];if(isNaN($u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Lu,$u),_u=!1;break}}return _u},optimize:function(){for(var _u=AnimationUtils.arraySlice(this.times),Tu=AnimationUtils.arraySlice(this.values),Cu=this.getValueSize(),Pu=this.getInterpolation()===InterpolateSmooth,Bu=1,Ru=_u.length-1,Lu=1;Lu<Ru;++Lu){var Ou=!1,Du=_u[Lu],$u=_u[Lu+1];if(Du!==$u&&(Lu!==1||Du!==Du[0]))if(Pu)Ou=!0;else for(var ku=Lu*Cu,Fu=ku-Cu,Nu=ku+Cu,Vu=0;Vu!==Cu;++Vu){var Gu=Tu[ku+Vu];if(Gu!==Tu[Fu+Vu]||Gu!==Tu[Nu+Vu]){Ou=!0;break}}if(Ou){if(Lu!==Bu){_u[Bu]=_u[Lu];for(var Hu=Lu*Cu,ju=Bu*Cu,Vu=0;Vu!==Cu;++Vu)Tu[ju+Vu]=Tu[Hu+Vu]}++Bu}}if(Ru>0){_u[Bu]=_u[Ru];for(var Hu=Ru*Cu,ju=Bu*Cu,Vu=0;Vu!==Cu;++Vu)Tu[ju+Vu]=Tu[Hu+Vu];++Bu}return Bu!==_u.length?(this.times=AnimationUtils.arraySlice(_u,0,Bu),this.values=AnimationUtils.arraySlice(Tu,0,Bu*Cu)):(this.times=_u,this.values=Tu),this},clone:function(){var _u=AnimationUtils.arraySlice(this.times,0),Tu=AnimationUtils.arraySlice(this.values,0),Cu=this.constructor,Pu=new Cu(this.name,_u,Tu);return Pu.createInterpolant=this.createInterpolant,Pu}});function BooleanKeyframeTrack(_u,Tu,Cu){KeyframeTrack.call(this,_u,Tu,Cu)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(_u,Tu,Cu,Pu){KeyframeTrack.call(this,_u,Tu,Cu,Pu)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(_u,Tu,Cu,Pu){KeyframeTrack.call(this,_u,Tu,Cu,Pu)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(_u,Tu,Cu,Pu){Interpolant.call(this,_u,Tu,Cu,Pu)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(_u,Tu,Cu,Pu){for(var Bu=this.resultBuffer,Ru=this.sampleValues,Lu=this.valueSize,Ou=_u*Lu,Du=(Cu-Tu)/(Pu-Tu),$u=Ou+Lu;Ou!==$u;Ou+=4)Quaternion.slerpFlat(Bu,0,Ru,Ou-Lu,Ru,Ou,Du);return Bu}});function QuaternionKeyframeTrack(_u,Tu,Cu,Pu){KeyframeTrack.call(this,_u,Tu,Cu,Pu)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(_u){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(_u,Tu,Cu,Pu){KeyframeTrack.call(this,_u,Tu,Cu,Pu)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(_u,Tu,Cu,Pu){KeyframeTrack.call(this,_u,Tu,Cu,Pu)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(_u,Tu,Cu,Pu){this.name=_u,this.tracks=Cu,this.duration=Tu!==void 0?Tu:-1,this.blendMode=Pu!==void 0?Pu:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(_u){switch(_u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_u)}function parseKeyframeTrack(_u){if(_u.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var Tu=getTrackTypeForValueTypeName(_u.type);if(_u.times===void 0){var Cu=[],Pu=[];AnimationUtils.flattenJSON(_u.keys,Cu,Pu,"value"),_u.times=Cu,_u.values=Pu}return Tu.parse!==void 0?Tu.parse(_u):new Tu(_u.name,_u.times,_u.values,_u.interpolation)}Object.assign(AnimationClip,{parse:function(_u){for(var Tu=[],Cu=_u.tracks,Pu=1/(_u.fps||1),Bu=0,Ru=Cu.length;Bu!==Ru;++Bu)Tu.push(parseKeyframeTrack(Cu[Bu]).scale(Pu));return new AnimationClip(_u.name,_u.duration,Tu,_u.blendMode)},toJSON:function(_u){for(var Tu=[],Cu=_u.tracks,Pu={name:_u.name,duration:_u.duration,tracks:Tu,uuid:_u.uuid,blendMode:_u.blendMode},Bu=0,Ru=Cu.length;Bu!==Ru;++Bu)Tu.push(KeyframeTrack.toJSON(Cu[Bu]));return Pu},CreateFromMorphTargetSequence:function(_u,Tu,Cu,Pu){for(var Bu=Tu.length,Ru=[],Lu=0;Lu<Bu;Lu++){var Ou=[],Du=[];Ou.push((Lu+Bu-1)%Bu,Lu,(Lu+1)%Bu),Du.push(0,1,0);var $u=AnimationUtils.getKeyframeOrder(Ou);Ou=AnimationUtils.sortedArray(Ou,1,$u),Du=AnimationUtils.sortedArray(Du,1,$u),!Pu&&Ou[0]===0&&(Ou.push(Bu),Du.push(Du[0])),Ru.push(new NumberKeyframeTrack(".morphTargetInfluences["+Tu[Lu].name+"]",Ou,Du).scale(1/Cu))}return new AnimationClip(_u,-1,Ru)},findByName:function(_u,Tu){var Cu=_u;if(!Array.isArray(_u)){var Pu=_u;Cu=Pu.geometry&&Pu.geometry.animations||Pu.animations}for(var Bu=0;Bu<Cu.length;Bu++)if(Cu[Bu].name===Tu)return Cu[Bu];return null},CreateClipsFromMorphTargetSequences:function(_u,Tu,Cu){for(var Pu={},Bu=/^([\w-]*?)([\d]+)$/,Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru],Du=Ou.name.match(Bu);if(Du&&Du.length>1){var $u=Du[1],ku=Pu[$u];ku||(Pu[$u]=ku=[]),ku.push(Ou)}}var Fu=[];for(var $u in Pu)Fu.push(AnimationClip.CreateFromMorphTargetSequence($u,Pu[$u],Tu,Cu));return Fu},parseAnimation:function(_u,Tu){if(!_u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var Cu=function(Qu,qu,Yu,Xc,_h){if(Yu.length!==0){var _d=[],Ku=[];AnimationUtils.flattenJSON(Yu,_d,Ku,Xc),_d.length!==0&&_h.push(new Qu(qu,_d,Ku))}},Pu=[],Bu=_u.name||"default",Ru=_u.length||-1,Lu=_u.fps||30,Ou=_u.blendMode,Du=_u.hierarchy||[],$u=0;$u<Du.length;$u++){var ku=Du[$u].keys;if(!(!ku||ku.length===0))if(ku[0].morphTargets){for(var Fu={},Nu=0;Nu<ku.length;Nu++)if(ku[Nu].morphTargets)for(var Vu=0;Vu<ku[Nu].morphTargets.length;Vu++)Fu[ku[Nu].morphTargets[Vu]]=-1;for(var Gu in Fu){for(var Hu=[],ju=[],Vu=0;Vu!==ku[Nu].morphTargets.length;++Vu){var Uu=ku[Nu];Hu.push(Uu.time),ju.push(Uu.morphTarget===Gu?1:0)}Pu.push(new NumberKeyframeTrack(".morphTargetInfluence["+Gu+"]",Hu,ju))}Ru=Fu.length*(Lu||1)}else{var zu=".bones["+Tu[$u].name+"]";Cu(VectorKeyframeTrack,zu+".position",ku,"pos",Pu),Cu(QuaternionKeyframeTrack,zu+".quaternion",ku,"rot",Pu),Cu(VectorKeyframeTrack,zu+".scale",ku,"scl",Pu)}}if(Pu.length===0)return null;var Wu=new AnimationClip(Bu,Ru,Pu,Ou);return Wu}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var _u=this.tracks,Tu=0,Cu=0,Pu=_u.length;Cu!==Pu;++Cu){var Bu=this.tracks[Cu];Tu=Math.max(Tu,Bu.times[Bu.times.length-1])}return this.duration=Tu,this},trim:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].trim(0,this.duration);return this},validate:function(){for(var _u=!0,Tu=0;Tu<this.tracks.length;Tu++)_u=_u&&this.tracks[Tu].validate();return _u},optimize:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].optimize();return this},clone:function(){for(var _u=[],Tu=0;Tu<this.tracks.length;Tu++)_u.push(this.tracks[Tu].clone());return new AnimationClip(this.name,this.duration,_u,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(_u,Tu){this.enabled!==!1&&(this.files[_u]=Tu)},get:function(_u){if(this.enabled!==!1)return this.files[_u]},remove:function(_u){delete this.files[_u]},clear:function(){this.files={}}};function LoadingManager(_u,Tu,Cu){var Pu=this,Bu=!1,Ru=0,Lu=0,Ou=void 0,Du=[];this.onStart=void 0,this.onLoad=_u,this.onProgress=Tu,this.onError=Cu,this.itemStart=function($u){Lu++,Bu===!1&&Pu.onStart!==void 0&&Pu.onStart($u,Ru,Lu),Bu=!0},this.itemEnd=function($u){Ru++,Pu.onProgress!==void 0&&Pu.onProgress($u,Ru,Lu),Ru===Lu&&(Bu=!1,Pu.onLoad!==void 0&&Pu.onLoad())},this.itemError=function($u){Pu.onError!==void 0&&Pu.onError($u)},this.resolveURL=function($u){return Ou?Ou($u):$u},this.setURLModifier=function($u){return Ou=$u,this},this.addHandler=function($u,ku){return Du.push($u,ku),this},this.removeHandler=function($u){var ku=Du.indexOf($u);return ku!==-1&&Du.splice(ku,2),this},this.getHandler=function($u){for(var ku=0,Fu=Du.length;ku<Fu;ku+=2){var Nu=Du[ku],Vu=Du[ku+1];if(Nu.global&&(Nu.lastIndex=0),Nu.test($u))return Vu}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(_u){this.manager=_u!==void 0?_u:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(_u,Tu){var Cu=this;return new Promise(function(Pu,Bu){Cu.load(_u,Pu,Tu,Bu)})},parse:function(){},setCrossOrigin:function(_u){return this.crossOrigin=_u,this},setPath:function(_u){return this.path=_u,this},setResourcePath:function(_u){return this.resourcePath=_u,this},setRequestHeader:function(_u){return this.requestHeader=_u,this}});var loading={};function FileLoader(_u){Loader.call(this,_u)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(_u,Tu,Cu,Pu){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Bu=this,Ru=Cache.get(_u);if(Ru!==void 0)return Bu.manager.itemStart(_u),setTimeout(function(){Tu&&Tu(Ru),Bu.manager.itemEnd(_u)},0),Ru;if(loading[_u]!==void 0){loading[_u].push({onLoad:Tu,onProgress:Cu,onError:Pu});return}var Lu=/^data:(.*?)(;base64)?,(.*)$/,Ou=_u.match(Lu);if(Ou){var Du=Ou[1],$u=!!Ou[2],ku=Ou[3];ku=decodeURIComponent(ku),$u&&(ku=atob(ku));try{var Fu,Nu=(this.responseType||"").toLowerCase();switch(Nu){case"arraybuffer":case"blob":for(var Vu=new Uint8Array(ku.length),Gu=0;Gu<ku.length;Gu++)Vu[Gu]=ku.charCodeAt(Gu);Nu==="blob"?Fu=new Blob([Vu.buffer],{type:Du}):Fu=Vu.buffer;break;case"document":var Hu=new DOMParser;Fu=Hu.parseFromString(ku,Du);break;case"json":Fu=JSON.parse(ku);break;default:Fu=ku;break}setTimeout(function(){Tu&&Tu(Fu),Bu.manager.itemEnd(_u)},0)}catch(zu){setTimeout(function(){Pu&&Pu(zu),Bu.manager.itemError(_u),Bu.manager.itemEnd(_u)},0)}}else{loading[_u]=[],loading[_u].push({onLoad:Tu,onProgress:Cu,onError:Pu});var ju=new XMLHttpRequest;ju.open("GET",_u,!0),ju.addEventListener("load",function(zu){var Wu=this.response,Qu=loading[_u];if(delete loading[_u],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(_u,Wu);for(var qu=0,Yu=Qu.length;qu<Yu;qu++){var Xc=Qu[qu];Xc.onLoad&&Xc.onLoad(Wu)}Bu.manager.itemEnd(_u)}else{for(var qu=0,Yu=Qu.length;qu<Yu;qu++){var Xc=Qu[qu];Xc.onError&&Xc.onError(zu)}Bu.manager.itemError(_u),Bu.manager.itemEnd(_u)}},!1),ju.addEventListener("progress",function(zu){for(var Wu=loading[_u],Qu=0,qu=Wu.length;Qu<qu;Qu++){var Yu=Wu[Qu];Yu.onProgress&&Yu.onProgress(zu)}},!1),ju.addEventListener("error",function(zu){var Wu=loading[_u];delete loading[_u];for(var Qu=0,qu=Wu.length;Qu<qu;Qu++){var Yu=Wu[Qu];Yu.onError&&Yu.onError(zu)}Bu.manager.itemError(_u),Bu.manager.itemEnd(_u)},!1),ju.addEventListener("abort",function(zu){var Wu=loading[_u];delete loading[_u];for(var Qu=0,qu=Wu.length;Qu<qu;Qu++){var Yu=Wu[Qu];Yu.onError&&Yu.onError(zu)}Bu.manager.itemError(_u),Bu.manager.itemEnd(_u)},!1),this.responseType!==void 0&&(ju.responseType=this.responseType),this.withCredentials!==void 0&&(ju.withCredentials=this.withCredentials),ju.overrideMimeType&&ju.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Uu in this.requestHeader)ju.setRequestHeader(Uu,this.requestHeader[Uu]);ju.send(null)}return Bu.manager.itemStart(_u),ju},setResponseType:function(_u){return this.responseType=_u,this},setWithCredentials:function(_u){return this.withCredentials=_u,this},setMimeType:function(_u){return this.mimeType=_u,this}});function AnimationLoader(_u){Loader.call(this,_u)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=new FileLoader(Bu.manager);Ru.setPath(Bu.path),Ru.load(_u,function(Lu){try{Tu(Bu.parse(JSON.parse(Lu)))}catch(Ou){Pu?Pu(Ou):console.error(Ou),Bu.manager.itemError(_u)}},Cu,Pu)},parse:function(_u){for(var Tu=[],Cu=0;Cu<_u.length;Cu++){var Pu=AnimationClip.parse(_u[Cu]);Tu.push(Pu)}return Tu}});function CompressedTextureLoader(_u){Loader.call(this,_u)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=[],Lu=new CompressedTexture;Lu.image=Ru;var Ou=new FileLoader(this.manager);Ou.setPath(this.path),Ou.setResponseType("arraybuffer");function Du(Nu){Ou.load(_u[Nu],function(Vu){var Gu=Bu.parse(Vu,!0);Ru[Nu]={width:Gu.width,height:Gu.height,format:Gu.format,mipmaps:Gu.mipmaps},$u+=1,$u===6&&(Gu.mipmapCount===1&&(Lu.minFilter=LinearFilter),Lu.format=Gu.format,Lu.needsUpdate=!0,Tu&&Tu(Lu))},Cu,Pu)}if(Array.isArray(_u))for(var $u=0,ku=0,Fu=_u.length;ku<Fu;++ku)Du(ku);else Ou.load(_u,function(Nu){var Vu=Bu.parse(Nu,!0);if(Vu.isCubemap)for(var Gu=Vu.mipmaps.length/Vu.mipmapCount,Hu=0;Hu<Gu;Hu++){Ru[Hu]={mipmaps:[]};for(var ju=0;ju<Vu.mipmapCount;ju++)Ru[Hu].mipmaps.push(Vu.mipmaps[Hu*Vu.mipmapCount+ju]),Ru[Hu].format=Vu.format,Ru[Hu].width=Vu.width,Ru[Hu].height=Vu.height}else Lu.image.width=Vu.width,Lu.image.height=Vu.height,Lu.mipmaps=Vu.mipmaps;Vu.mipmapCount===1&&(Lu.minFilter=LinearFilter),Lu.format=Vu.format,Lu.needsUpdate=!0,Tu&&Tu(Lu)},Cu,Pu);return Lu}});function DataTextureLoader(_u){Loader.call(this,_u)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=new DataTexture,Lu=new FileLoader(this.manager);return Lu.setResponseType("arraybuffer"),Lu.setPath(this.path),Lu.load(_u,function(Ou){var Du=Bu.parse(Ou);!Du||(Du.image!==void 0?Ru.image=Du.image:Du.data!==void 0&&(Ru.image.width=Du.width,Ru.image.height=Du.height,Ru.image.data=Du.data),Ru.wrapS=Du.wrapS!==void 0?Du.wrapS:ClampToEdgeWrapping,Ru.wrapT=Du.wrapT!==void 0?Du.wrapT:ClampToEdgeWrapping,Ru.magFilter=Du.magFilter!==void 0?Du.magFilter:LinearFilter,Ru.minFilter=Du.minFilter!==void 0?Du.minFilter:LinearFilter,Ru.anisotropy=Du.anisotropy!==void 0?Du.anisotropy:1,Du.format!==void 0&&(Ru.format=Du.format),Du.type!==void 0&&(Ru.type=Du.type),Du.mipmaps!==void 0&&(Ru.mipmaps=Du.mipmaps,Ru.minFilter=LinearMipmapLinearFilter),Du.mipmapCount===1&&(Ru.minFilter=LinearFilter),Ru.needsUpdate=!0,Tu&&Tu(Ru,Du))},Cu,Pu),Ru}});function ImageLoader(_u){Loader.call(this,_u)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(_u,Tu,Cu,Pu){this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Bu=this,Ru=Cache.get(_u);if(Ru!==void 0)return Bu.manager.itemStart(_u),setTimeout(function(){Tu&&Tu(Ru),Bu.manager.itemEnd(_u)},0),Ru;var Lu=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Ou(){Lu.removeEventListener("load",Ou,!1),Lu.removeEventListener("error",Du,!1),Cache.add(_u,this),Tu&&Tu(this),Bu.manager.itemEnd(_u)}function Du($u){Lu.removeEventListener("load",Ou,!1),Lu.removeEventListener("error",Du,!1),Pu&&Pu($u),Bu.manager.itemError(_u),Bu.manager.itemEnd(_u)}return Lu.addEventListener("load",Ou,!1),Lu.addEventListener("error",Du,!1),_u.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Lu.crossOrigin=this.crossOrigin),Bu.manager.itemStart(_u),Lu.src=_u,Lu}});function CubeTextureLoader(_u){Loader.call(this,_u)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(_u,Tu,Cu,Pu){var Bu=new CubeTexture,Ru=new ImageLoader(this.manager);Ru.setCrossOrigin(this.crossOrigin),Ru.setPath(this.path);var Lu=0;function Ou($u){Ru.load(_u[$u],function(ku){Bu.images[$u]=ku,Lu++,Lu===6&&(Bu.needsUpdate=!0,Tu&&Tu(Bu))},void 0,Pu)}for(var Du=0;Du<_u.length;++Du)Ou(Du);return Bu}});function TextureLoader(_u){Loader.call(this,_u)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(_u,Tu,Cu,Pu){var Bu=new Texture,Ru=new ImageLoader(this.manager);return Ru.setCrossOrigin(this.crossOrigin),Ru.setPath(this.path),Ru.load(_u,function(Lu){Bu.image=Lu;var Ou=_u.search(/\.jpe?g($|\?)/i)>0||_u.search(/^data\:image\/jpeg/)===0;Bu.format=Ou?RGBFormat:RGBAFormat,Bu.needsUpdate=!0,Tu!==void 0&&Tu(Bu)},Cu,Pu),Bu}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(_u,Tu){var Cu=this.getUtoTmapping(_u);return this.getPoint(Cu,Tu)},getPoints:function(_u){_u===void 0&&(_u=5);for(var Tu=[],Cu=0;Cu<=_u;Cu++)Tu.push(this.getPoint(Cu/_u));return Tu},getSpacedPoints:function(_u){_u===void 0&&(_u=5);for(var Tu=[],Cu=0;Cu<=_u;Cu++)Tu.push(this.getPointAt(Cu/_u));return Tu},getLength:function(){var _u=this.getLengths();return _u[_u.length-1]},getLengths:function(_u){if(_u===void 0&&(_u=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===_u+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var Tu=[],Cu,Pu=this.getPoint(0),Bu,Ru=0;for(Tu.push(0),Bu=1;Bu<=_u;Bu++)Cu=this.getPoint(Bu/_u),Ru+=Cu.distanceTo(Pu),Tu.push(Ru),Pu=Cu;return this.cacheArcLengths=Tu,Tu},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(_u,Tu){var Cu=this.getLengths(),Pu=0,Bu=Cu.length,Ru;Tu?Ru=Tu:Ru=_u*Cu[Bu-1];for(var Lu=0,Ou=Bu-1,Du;Lu<=Ou;)if(Pu=Math.floor(Lu+(Ou-Lu)/2),Du=Cu[Pu]-Ru,Du<0)Lu=Pu+1;else if(Du>0)Ou=Pu-1;else{Ou=Pu;break}if(Pu=Ou,Cu[Pu]===Ru)return Pu/(Bu-1);var $u=Cu[Pu],ku=Cu[Pu+1],Fu=ku-$u,Nu=(Ru-$u)/Fu,Vu=(Pu+Nu)/(Bu-1);return Vu},getTangent:function(_u,Tu){var Cu=1e-4,Pu=_u-Cu,Bu=_u+Cu;Pu<0&&(Pu=0),Bu>1&&(Bu=1);var Ru=this.getPoint(Pu),Lu=this.getPoint(Bu),Ou=Tu||(Ru.isVector2?new Vector2:new Vector3);return Ou.copy(Lu).sub(Ru).normalize(),Ou},getTangentAt:function(_u,Tu){var Cu=this.getUtoTmapping(_u);return this.getTangent(Cu,Tu)},computeFrenetFrames:function(_u,Tu){var Cu=new Vector3,Pu=[],Bu=[],Ru=[],Lu=new Vector3,Ou=new Matrix4,Du,$u,ku;for(Du=0;Du<=_u;Du++)$u=Du/_u,Pu[Du]=this.getTangentAt($u,new Vector3),Pu[Du].normalize();Bu[0]=new Vector3,Ru[0]=new Vector3;var Fu=Number.MAX_VALUE,Nu=Math.abs(Pu[0].x),Vu=Math.abs(Pu[0].y),Gu=Math.abs(Pu[0].z);for(Nu<=Fu&&(Fu=Nu,Cu.set(1,0,0)),Vu<=Fu&&(Fu=Vu,Cu.set(0,1,0)),Gu<=Fu&&Cu.set(0,0,1),Lu.crossVectors(Pu[0],Cu).normalize(),Bu[0].crossVectors(Pu[0],Lu),Ru[0].crossVectors(Pu[0],Bu[0]),Du=1;Du<=_u;Du++)Bu[Du]=Bu[Du-1].clone(),Ru[Du]=Ru[Du-1].clone(),Lu.crossVectors(Pu[Du-1],Pu[Du]),Lu.length()>Number.EPSILON&&(Lu.normalize(),ku=Math.acos(MathUtils.clamp(Pu[Du-1].dot(Pu[Du]),-1,1)),Bu[Du].applyMatrix4(Ou.makeRotationAxis(Lu,ku))),Ru[Du].crossVectors(Pu[Du],Bu[Du]);if(Tu===!0)for(ku=Math.acos(MathUtils.clamp(Bu[0].dot(Bu[_u]),-1,1)),ku/=_u,Pu[0].dot(Lu.crossVectors(Bu[0],Bu[_u]))>0&&(ku=-ku),Du=1;Du<=_u;Du++)Bu[Du].applyMatrix4(Ou.makeRotationAxis(Pu[Du],ku*Du)),Ru[Du].crossVectors(Pu[Du],Bu[Du]);return{tangents:Pu,normals:Bu,binormals:Ru}},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this},toJSON:function(){var _u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return _u.arcLengthDivisions=this.arcLengthDivisions,_u.type=this.type,_u},fromJSON:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this}});function EllipseCurve(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){Curve.call(this),this.type="EllipseCurve",this.aX=_u||0,this.aY=Tu||0,this.xRadius=Cu||1,this.yRadius=Pu||1,this.aStartAngle=Bu||0,this.aEndAngle=Ru||2*Math.PI,this.aClockwise=Lu||!1,this.aRotation=Ou||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(_u,Tu){for(var Cu=Tu||new Vector2,Pu=Math.PI*2,Bu=this.aEndAngle-this.aStartAngle,Ru=Math.abs(Bu)<Number.EPSILON;Bu<0;)Bu+=Pu;for(;Bu>Pu;)Bu-=Pu;Bu<Number.EPSILON&&(Ru?Bu=0:Bu=Pu),this.aClockwise===!0&&!Ru&&(Bu===Pu?Bu=-Pu:Bu=Bu-Pu);var Lu=this.aStartAngle+_u*Bu,Ou=this.aX+this.xRadius*Math.cos(Lu),Du=this.aY+this.yRadius*Math.sin(Lu);if(this.aRotation!==0){var $u=Math.cos(this.aRotation),ku=Math.sin(this.aRotation),Fu=Ou-this.aX,Nu=Du-this.aY;Ou=Fu*$u-Nu*ku+this.aX,Du=Fu*ku+Nu*$u+this.aY}return Cu.set(Ou,Du)};EllipseCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};EllipseCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.aX=this.aX,_u.aY=this.aY,_u.xRadius=this.xRadius,_u.yRadius=this.yRadius,_u.aStartAngle=this.aStartAngle,_u.aEndAngle=this.aEndAngle,_u.aClockwise=this.aClockwise,_u.aRotation=this.aRotation,_u};EllipseCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};function ArcCurve(_u,Tu,Cu,Pu,Bu,Ru){EllipseCurve.call(this,_u,Tu,Cu,Cu,Pu,Bu,Ru),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var _u=0,Tu=0,Cu=0,Pu=0;function Bu(Ru,Lu,Ou,Du){_u=Ru,Tu=Ou,Cu=-3*Ru+3*Lu-2*Ou-Du,Pu=2*Ru-2*Lu+Ou+Du}return{initCatmullRom:function(Ru,Lu,Ou,Du,$u){Bu(Lu,Ou,$u*(Ou-Ru),$u*(Du-Lu))},initNonuniformCatmullRom:function(Ru,Lu,Ou,Du,$u,ku,Fu){var Nu=(Lu-Ru)/$u-(Ou-Ru)/($u+ku)+(Ou-Lu)/ku,Vu=(Ou-Lu)/ku-(Du-Lu)/(ku+Fu)+(Du-Ou)/Fu;Nu*=ku,Vu*=ku,Bu(Lu,Ou,Nu,Vu)},calc:function(Ru){var Lu=Ru*Ru,Ou=Lu*Ru;return _u+Tu*Ru+Cu*Lu+Pu*Ou}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(_u,Tu,Cu,Pu){Curve.call(this),this.type="CatmullRomCurve3",this.points=_u||[],this.closed=Tu||!1,this.curveType=Cu||"centripetal",this.tension=Pu||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector3,Pu=this.points,Bu=Pu.length,Ru=(Bu-(this.closed?0:1))*_u,Lu=Math.floor(Ru),Ou=Ru-Lu;this.closed?Lu+=Lu>0?0:(Math.floor(Math.abs(Lu)/Bu)+1)*Bu:Ou===0&&Lu===Bu-1&&(Lu=Bu-2,Ou=1);var Du,$u,ku,Fu;if(this.closed||Lu>0?Du=Pu[(Lu-1)%Bu]:(tmp.subVectors(Pu[0],Pu[1]).add(Pu[0]),Du=tmp),$u=Pu[Lu%Bu],ku=Pu[(Lu+1)%Bu],this.closed||Lu+2<Bu?Fu=Pu[(Lu+2)%Bu]:(tmp.subVectors(Pu[Bu-1],Pu[Bu-2]).add(Pu[Bu-1]),Fu=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Nu=this.curveType==="chordal"?.5:.25,Vu=Math.pow(Du.distanceToSquared($u),Nu),Gu=Math.pow($u.distanceToSquared(ku),Nu),Hu=Math.pow(ku.distanceToSquared(Fu),Nu);Gu<1e-4&&(Gu=1),Vu<1e-4&&(Vu=Gu),Hu<1e-4&&(Hu=Gu),px.initNonuniformCatmullRom(Du.x,$u.x,ku.x,Fu.x,Vu,Gu,Hu),py.initNonuniformCatmullRom(Du.y,$u.y,ku.y,Fu.y,Vu,Gu,Hu),pz.initNonuniformCatmullRom(Du.z,$u.z,ku.z,Fu.z,Vu,Gu,Hu)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Du.x,$u.x,ku.x,Fu.x,this.tension),py.initCatmullRom(Du.y,$u.y,ku.y,Fu.y,this.tension),pz.initCatmullRom(Du.z,$u.z,ku.z,Fu.z,this.tension));return Cu.set(px.calc(Ou),py.calc(Ou),pz.calc(Ou)),Cu};CatmullRomCurve3.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var Tu=0,Cu=_u.points.length;Tu<Cu;Tu++){var Pu=_u.points[Tu];this.points.push(Pu.clone())}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var Tu=0,Cu=this.points.length;Tu<Cu;Tu++){var Pu=this.points[Tu];_u.points.push(Pu.toArray())}return _u.closed=this.closed,_u.curveType=this.curveType,_u.tension=this.tension,_u};CatmullRomCurve3.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var Tu=0,Cu=_u.points.length;Tu<Cu;Tu++){var Pu=_u.points[Tu];this.points.push(new Vector3().fromArray(Pu))}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};function CatmullRom(_u,Tu,Cu,Pu,Bu){var Ru=(Pu-Tu)*.5,Lu=(Bu-Cu)*.5,Ou=_u*_u,Du=_u*Ou;return(2*Cu-2*Pu+Ru+Lu)*Du+(-3*Cu+3*Pu-2*Ru-Lu)*Ou+Ru*_u+Cu}function QuadraticBezierP0(_u,Tu){var Cu=1-_u;return Cu*Cu*Tu}function QuadraticBezierP1(_u,Tu){return 2*(1-_u)*_u*Tu}function QuadraticBezierP2(_u,Tu){return _u*_u*Tu}function QuadraticBezier(_u,Tu,Cu,Pu){return QuadraticBezierP0(_u,Tu)+QuadraticBezierP1(_u,Cu)+QuadraticBezierP2(_u,Pu)}function CubicBezierP0(_u,Tu){var Cu=1-_u;return Cu*Cu*Cu*Tu}function CubicBezierP1(_u,Tu){var Cu=1-_u;return 3*Cu*Cu*_u*Tu}function CubicBezierP2(_u,Tu){return 3*(1-_u)*_u*_u*Tu}function CubicBezierP3(_u,Tu){return _u*_u*_u*Tu}function CubicBezier(_u,Tu,Cu,Pu,Bu){return CubicBezierP0(_u,Tu)+CubicBezierP1(_u,Cu)+CubicBezierP2(_u,Pu)+CubicBezierP3(_u,Bu)}function CubicBezierCurve(_u,Tu,Cu,Pu){Curve.call(this),this.type="CubicBezierCurve",this.v0=_u||new Vector2,this.v1=Tu||new Vector2,this.v2=Cu||new Vector2,this.v3=Pu||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector2,Pu=this.v0,Bu=this.v1,Ru=this.v2,Lu=this.v3;return Cu.set(CubicBezier(_u,Pu.x,Bu.x,Ru.x,Lu.x),CubicBezier(_u,Pu.y,Bu.y,Ru.y,Lu.y)),Cu};CubicBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function CubicBezierCurve3(_u,Tu,Cu,Pu){Curve.call(this),this.type="CubicBezierCurve3",this.v0=_u||new Vector3,this.v1=Tu||new Vector3,this.v2=Cu||new Vector3,this.v3=Pu||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector3,Pu=this.v0,Bu=this.v1,Ru=this.v2,Lu=this.v3;return Cu.set(CubicBezier(_u,Pu.x,Bu.x,Ru.x,Lu.x),CubicBezier(_u,Pu.y,Bu.y,Ru.y,Lu.y),CubicBezier(_u,Pu.z,Bu.z,Ru.z,Lu.z)),Cu};CubicBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function LineCurve(_u,Tu){Curve.call(this),this.type="LineCurve",this.v1=_u||new Vector2,this.v2=Tu||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector2;return _u===1?Cu.copy(this.v2):(Cu.copy(this.v2).sub(this.v1),Cu.multiplyScalar(_u).add(this.v1)),Cu};LineCurve.prototype.getPointAt=function(_u,Tu){return this.getPoint(_u,Tu)};LineCurve.prototype.getTangent=function(_u,Tu){var Cu=Tu||new Vector2,Cu=Cu.copy(this.v2).sub(this.v1).normalize();return Cu};LineCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function LineCurve3(_u,Tu){Curve.call(this),this.type="LineCurve3",this.v1=_u||new Vector3,this.v2=Tu||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector3;return _u===1?Cu.copy(this.v2):(Cu.copy(this.v2).sub(this.v1),Cu.multiplyScalar(_u).add(this.v1)),Cu};LineCurve3.prototype.getPointAt=function(_u,Tu){return this.getPoint(_u,Tu)};LineCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve(_u,Tu,Cu){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=_u||new Vector2,this.v1=Tu||new Vector2,this.v2=Cu||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector2,Pu=this.v0,Bu=this.v1,Ru=this.v2;return Cu.set(QuadraticBezier(_u,Pu.x,Bu.x,Ru.x),QuadraticBezier(_u,Pu.y,Bu.y,Ru.y)),Cu};QuadraticBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve3(_u,Tu,Cu){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=_u||new Vector3,this.v1=Tu||new Vector3,this.v2=Cu||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector3,Pu=this.v0,Bu=this.v1,Ru=this.v2;return Cu.set(QuadraticBezier(_u,Pu.x,Bu.x,Ru.x),QuadraticBezier(_u,Pu.y,Bu.y,Ru.y),QuadraticBezier(_u,Pu.z,Bu.z,Ru.z)),Cu};QuadraticBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function SplineCurve(_u){Curve.call(this),this.type="SplineCurve",this.points=_u||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector2,Pu=this.points,Bu=(Pu.length-1)*_u,Ru=Math.floor(Bu),Lu=Bu-Ru,Ou=Pu[Ru===0?Ru:Ru-1],Du=Pu[Ru],$u=Pu[Ru>Pu.length-2?Pu.length-1:Ru+1],ku=Pu[Ru>Pu.length-3?Pu.length-1:Ru+2];return Cu.set(CatmullRom(Lu,Ou.x,Du.x,$u.x,ku.x),CatmullRom(Lu,Ou.y,Du.y,$u.y,ku.y)),Cu};SplineCurve.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var Tu=0,Cu=_u.points.length;Tu<Cu;Tu++){var Pu=_u.points[Tu];this.points.push(Pu.clone())}return this};SplineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var Tu=0,Cu=this.points.length;Tu<Cu;Tu++){var Pu=this.points[Tu];_u.points.push(Pu.toArray())}return _u};SplineCurve.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var Tu=0,Cu=_u.points.length;Tu<Cu;Tu++){var Pu=_u.points[Tu];this.points.push(new Vector2().fromArray(Pu))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(_u){this.curves.push(_u)},closePath:function(){var _u=this.curves[0].getPoint(0),Tu=this.curves[this.curves.length-1].getPoint(1);_u.equals(Tu)||this.curves.push(new LineCurve(Tu,_u))},getPoint:function(_u){for(var Tu=_u*this.getLength(),Cu=this.getCurveLengths(),Pu=0;Pu<Cu.length;){if(Cu[Pu]>=Tu){var Bu=Cu[Pu]-Tu,Ru=this.curves[Pu],Lu=Ru.getLength(),Ou=Lu===0?0:1-Bu/Lu;return Ru.getPointAt(Ou)}Pu++}return null},getLength:function(){var _u=this.getCurveLengths();return _u[_u.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var _u=[],Tu=0,Cu=0,Pu=this.curves.length;Cu<Pu;Cu++)Tu+=this.curves[Cu].getLength(),_u.push(Tu);return this.cacheLengths=_u,_u},getSpacedPoints:function(_u){_u===void 0&&(_u=40);for(var Tu=[],Cu=0;Cu<=_u;Cu++)Tu.push(this.getPoint(Cu/_u));return this.autoClose&&Tu.push(Tu[0]),Tu},getPoints:function(_u){_u=_u||12;for(var Tu=[],Cu,Pu=0,Bu=this.curves;Pu<Bu.length;Pu++)for(var Ru=Bu[Pu],Lu=Ru&&Ru.isEllipseCurve?_u*2:Ru&&(Ru.isLineCurve||Ru.isLineCurve3)?1:Ru&&Ru.isSplineCurve?_u*Ru.points.length:_u,Ou=Ru.getPoints(Lu),Du=0;Du<Ou.length;Du++){var $u=Ou[Du];Cu&&Cu.equals($u)||(Tu.push($u),Cu=$u)}return this.autoClose&&Tu.length>1&&!Tu[Tu.length-1].equals(Tu[0])&&Tu.push(Tu[0]),Tu},copy:function(_u){Curve.prototype.copy.call(this,_u),this.curves=[];for(var Tu=0,Cu=_u.curves.length;Tu<Cu;Tu++){var Pu=_u.curves[Tu];this.curves.push(Pu.clone())}return this.autoClose=_u.autoClose,this},toJSON:function(){var _u=Curve.prototype.toJSON.call(this);_u.autoClose=this.autoClose,_u.curves=[];for(var Tu=0,Cu=this.curves.length;Tu<Cu;Tu++){var Pu=this.curves[Tu];_u.curves.push(Pu.toJSON())}return _u},fromJSON:function(_u){Curve.prototype.fromJSON.call(this,_u),this.autoClose=_u.autoClose,this.curves=[];for(var Tu=0,Cu=_u.curves.length;Tu<Cu;Tu++){var Pu=_u.curves[Tu];this.curves.push(new Curves[Pu.type]().fromJSON(Pu))}return this}});function Path(_u){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,_u&&this.setFromPoints(_u)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(_u){this.moveTo(_u[0].x,_u[0].y);for(var Tu=1,Cu=_u.length;Tu<Cu;Tu++)this.lineTo(_u[Tu].x,_u[Tu].y);return this},moveTo:function(_u,Tu){return this.currentPoint.set(_u,Tu),this},lineTo:function(_u,Tu){var Cu=new LineCurve(this.currentPoint.clone(),new Vector2(_u,Tu));return this.curves.push(Cu),this.currentPoint.set(_u,Tu),this},quadraticCurveTo:function(_u,Tu,Cu,Pu){var Bu=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_u,Tu),new Vector2(Cu,Pu));return this.curves.push(Bu),this.currentPoint.set(Cu,Pu),this},bezierCurveTo:function(_u,Tu,Cu,Pu,Bu,Ru){var Lu=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_u,Tu),new Vector2(Cu,Pu),new Vector2(Bu,Ru));return this.curves.push(Lu),this.currentPoint.set(Bu,Ru),this},splineThru:function(_u){var Tu=[this.currentPoint.clone()].concat(_u),Cu=new SplineCurve(Tu);return this.curves.push(Cu),this.currentPoint.copy(_u[_u.length-1]),this},arc:function(_u,Tu,Cu,Pu,Bu,Ru){var Lu=this.currentPoint.x,Ou=this.currentPoint.y;return this.absarc(_u+Lu,Tu+Ou,Cu,Pu,Bu,Ru),this},absarc:function(_u,Tu,Cu,Pu,Bu,Ru){return this.absellipse(_u,Tu,Cu,Cu,Pu,Bu,Ru),this},ellipse:function(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){var Du=this.currentPoint.x,$u=this.currentPoint.y;return this.absellipse(_u+Du,Tu+$u,Cu,Pu,Bu,Ru,Lu,Ou),this},absellipse:function(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){var Du=new EllipseCurve(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou);if(this.curves.length>0){var $u=Du.getPoint(0);$u.equals(this.currentPoint)||this.lineTo($u.x,$u.y)}this.curves.push(Du);var ku=Du.getPoint(1);return this.currentPoint.copy(ku),this},copy:function(_u){return CurvePath.prototype.copy.call(this,_u),this.currentPoint.copy(_u.currentPoint),this},toJSON:function(){var _u=CurvePath.prototype.toJSON.call(this);return _u.currentPoint=this.currentPoint.toArray(),_u},fromJSON:function(_u){return CurvePath.prototype.fromJSON.call(this,_u),this.currentPoint.fromArray(_u.currentPoint),this}});function Shape(_u){Path.call(this,_u),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(_u){for(var Tu=[],Cu=0,Pu=this.holes.length;Cu<Pu;Cu++)Tu[Cu]=this.holes[Cu].getPoints(_u);return Tu},extractPoints:function(_u){return{shape:this.getPoints(_u),holes:this.getPointsHoles(_u)}},copy:function(_u){Path.prototype.copy.call(this,_u),this.holes=[];for(var Tu=0,Cu=_u.holes.length;Tu<Cu;Tu++){var Pu=_u.holes[Tu];this.holes.push(Pu.clone())}return this},toJSON:function(){var _u=Path.prototype.toJSON.call(this);_u.uuid=this.uuid,_u.holes=[];for(var Tu=0,Cu=this.holes.length;Tu<Cu;Tu++){var Pu=this.holes[Tu];_u.holes.push(Pu.toJSON())}return _u},fromJSON:function(_u){Path.prototype.fromJSON.call(this,_u),this.uuid=_u.uuid,this.holes=[];for(var Tu=0,Cu=_u.holes.length;Tu<Cu;Tu++){var Pu=_u.holes[Tu];this.holes.push(new Path().fromJSON(Pu))}return this}});function Light(_u,Tu){Object3D.call(this),this.type="Light",this.color=new Color(_u),this.intensity=Tu!==void 0?Tu:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),this.color.copy(_u.color),this.intensity=_u.intensity,this},toJSON:function(_u){var Tu=Object3D.prototype.toJSON.call(this,_u);return Tu.object.color=this.color.getHex(),Tu.object.intensity=this.intensity,this.groundColor!==void 0&&(Tu.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(Tu.object.distance=this.distance),this.angle!==void 0&&(Tu.object.angle=this.angle),this.decay!==void 0&&(Tu.object.decay=this.decay),this.penumbra!==void 0&&(Tu.object.penumbra=this.penumbra),this.shadow!==void 0&&(Tu.object.shadow=this.shadow.toJSON()),Tu}});function HemisphereLight(_u,Tu,Cu){Light.call(this,_u,Cu),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(Tu)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.groundColor.copy(_u.groundColor),this}});function LightShadow(_u){this.camera=_u,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(_u){var Tu=this.camera,Cu=this.matrix,Pu=this._projScreenMatrix,Bu=this._lookTarget,Ru=this._lightPositionWorld;Ru.setFromMatrixPosition(_u.matrixWorld),Tu.position.copy(Ru),Bu.setFromMatrixPosition(_u.target.matrixWorld),Tu.lookAt(Bu),Tu.updateMatrixWorld(),Pu.multiplyMatrices(Tu.projectionMatrix,Tu.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pu),Cu.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Cu.multiply(Tu.projectionMatrix),Cu.multiply(Tu.matrixWorldInverse)},getViewport:function(_u){return this._viewports[_u]},getFrameExtents:function(){return this._frameExtents},copy:function(_u){return this.camera=_u.camera.clone(),this.bias=_u.bias,this.radius=_u.radius,this.mapSize.copy(_u.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u={};return this.bias!==0&&(_u.bias=this.bias),this.radius!==1&&(_u.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_u.mapSize=this.mapSize.toArray()),_u.camera=this.camera.toJSON(!1).object,delete _u.camera.matrix,_u}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(_u){var Tu=this.camera,Cu=MathUtils.RAD2DEG*2*_u.angle,Pu=this.mapSize.width/this.mapSize.height,Bu=_u.distance||Tu.far;(Cu!==Tu.fov||Pu!==Tu.aspect||Bu!==Tu.far)&&(Tu.fov=Cu,Tu.aspect=Pu,Tu.far=Bu,Tu.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,_u)}});function SpotLight(_u,Tu,Cu,Pu,Bu,Ru){Light.call(this,_u,Tu),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Lu){this.intensity=Lu/Math.PI}}),this.distance=Cu!==void 0?Cu:0,this.angle=Pu!==void 0?Pu:Math.PI/3,this.penumbra=Bu!==void 0?Bu:0,this.decay=Ru!==void 0?Ru:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.angle=_u.angle,this.penumbra=_u.penumbra,this.decay=_u.decay,this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(_u,Tu){Tu===void 0&&(Tu=0);var Cu=this.camera,Pu=this.matrix,Bu=this._lightPositionWorld,Ru=this._lookTarget,Lu=this._projScreenMatrix;Bu.setFromMatrixPosition(_u.matrixWorld),Cu.position.copy(Bu),Ru.copy(Cu.position),Ru.add(this._cubeDirections[Tu]),Cu.up.copy(this._cubeUps[Tu]),Cu.lookAt(Ru),Cu.updateMatrixWorld(),Pu.makeTranslation(-Bu.x,-Bu.y,-Bu.z),Lu.multiplyMatrices(Cu.projectionMatrix,Cu.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lu)}});function PointLight(_u,Tu,Cu,Pu){Light.call(this,_u,Tu),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Bu){this.intensity=Bu/(4*Math.PI)}}),this.distance=Cu!==void 0?Cu:0,this.decay=Pu!==void 0?Pu:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.decay=_u.decay,this.shadow=_u.shadow.clone(),this}});function OrthographicCamera(_u,Tu,Cu,Pu,Bu,Ru){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_u!==void 0?_u:-1,this.right=Tu!==void 0?Tu:1,this.top=Cu!==void 0?Cu:1,this.bottom=Pu!==void 0?Pu:-1,this.near=Bu!==void 0?Bu:.1,this.far=Ru!==void 0?Ru:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(_u,Tu){return Camera.prototype.copy.call(this,_u,Tu),this.left=_u.left,this.right=_u.right,this.top=_u.top,this.bottom=_u.bottom,this.near=_u.near,this.far=_u.far,this.zoom=_u.zoom,this.view=_u.view===null?null:Object.assign({},_u.view),this},setViewOffset:function(_u,Tu,Cu,Pu,Bu,Ru){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=Tu,this.view.offsetX=Cu,this.view.offsetY=Pu,this.view.width=Bu,this.view.height=Ru,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=(this.right-this.left)/(2*this.zoom),Tu=(this.top-this.bottom)/(2*this.zoom),Cu=(this.right+this.left)/2,Pu=(this.top+this.bottom)/2,Bu=Cu-_u,Ru=Cu+_u,Lu=Pu+Tu,Ou=Pu-Tu;if(this.view!==null&&this.view.enabled){var Du=(this.right-this.left)/this.view.fullWidth/this.zoom,$u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Bu+=Du*this.view.offsetX,Ru=Bu+Du*this.view.width,Lu-=$u*this.view.offsetY,Ou=Lu-$u*this.view.height}this.projectionMatrix.makeOrthographic(Bu,Ru,Lu,Ou,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var Tu=Object3D.prototype.toJSON.call(this,_u);return Tu.object.zoom=this.zoom,Tu.object.left=this.left,Tu.object.right=this.right,Tu.object.top=this.top,Tu.object.bottom=this.bottom,Tu.object.near=this.near,Tu.object.far=this.far,this.view!==null&&(Tu.object.view=Object.assign({},this.view)),Tu}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(_u){LightShadow.prototype.updateMatrices.call(this,_u)}});function DirectionalLight(_u,Tu){Light.call(this,_u,Tu),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function AmbientLight(_u,Tu){Light.call(this,_u,Tu),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(_u,Tu,Cu,Pu){Light.call(this,_u,Tu),this.type="RectAreaLight",this.width=Cu!==void 0?Cu:10,this.height=Pu!==void 0?Pu:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.width=_u.width,this.height=_u.height,this},toJSON:function(_u){var Tu=Light.prototype.toJSON.call(this,_u);return Tu.object.width=this.width,Tu.object.height=this.height,Tu}});function SphericalHarmonics3(){this.coefficients=[];for(var _u=0;_u<9;_u++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(_u){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].copy(_u[Tu]);return this},zero:function(){for(var _u=0;_u<9;_u++)this.coefficients[_u].set(0,0,0);return this},getAt:function(_u,Tu){var Cu=_u.x,Pu=_u.y,Bu=_u.z,Ru=this.coefficients;return Tu.copy(Ru[0]).multiplyScalar(.282095),Tu.addScaledVector(Ru[1],.488603*Pu),Tu.addScaledVector(Ru[2],.488603*Bu),Tu.addScaledVector(Ru[3],.488603*Cu),Tu.addScaledVector(Ru[4],1.092548*(Cu*Pu)),Tu.addScaledVector(Ru[5],1.092548*(Pu*Bu)),Tu.addScaledVector(Ru[6],.315392*(3*Bu*Bu-1)),Tu.addScaledVector(Ru[7],1.092548*(Cu*Bu)),Tu.addScaledVector(Ru[8],.546274*(Cu*Cu-Pu*Pu)),Tu},getIrradianceAt:function(_u,Tu){var Cu=_u.x,Pu=_u.y,Bu=_u.z,Ru=this.coefficients;return Tu.copy(Ru[0]).multiplyScalar(.886227),Tu.addScaledVector(Ru[1],2*.511664*Pu),Tu.addScaledVector(Ru[2],2*.511664*Bu),Tu.addScaledVector(Ru[3],2*.511664*Cu),Tu.addScaledVector(Ru[4],2*.429043*Cu*Pu),Tu.addScaledVector(Ru[5],2*.429043*Pu*Bu),Tu.addScaledVector(Ru[6],.743125*Bu*Bu-.247708),Tu.addScaledVector(Ru[7],2*.429043*Cu*Bu),Tu.addScaledVector(Ru[8],.429043*(Cu*Cu-Pu*Pu)),Tu},add:function(_u){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].add(_u.coefficients[Tu]);return this},addScaledSH:function(_u,Tu){for(var Cu=0;Cu<9;Cu++)this.coefficients[Cu].addScaledVector(_u.coefficients[Cu],Tu);return this},scale:function(_u){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].multiplyScalar(_u);return this},lerp:function(_u,Tu){for(var Cu=0;Cu<9;Cu++)this.coefficients[Cu].lerp(_u.coefficients[Cu],Tu);return this},equals:function(_u){for(var Tu=0;Tu<9;Tu++)if(!this.coefficients[Tu].equals(_u.coefficients[Tu]))return!1;return!0},copy:function(_u){return this.set(_u.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(_u,Tu){Tu===void 0&&(Tu=0);for(var Cu=this.coefficients,Pu=0;Pu<9;Pu++)Cu[Pu].fromArray(_u,Tu+Pu*3);return this},toArray:function(_u,Tu){_u===void 0&&(_u=[]),Tu===void 0&&(Tu=0);for(var Cu=this.coefficients,Pu=0;Pu<9;Pu++)Cu[Pu].toArray(_u,Tu+Pu*3);return _u}});Object.assign(SphericalHarmonics3,{getBasisAt:function(_u,Tu){var Cu=_u.x,Pu=_u.y,Bu=_u.z;Tu[0]=.282095,Tu[1]=.488603*Pu,Tu[2]=.488603*Bu,Tu[3]=.488603*Cu,Tu[4]=1.092548*Cu*Pu,Tu[5]=1.092548*Pu*Bu,Tu[6]=.315392*(3*Bu*Bu-1),Tu[7]=1.092548*Cu*Bu,Tu[8]=.546274*(Cu*Cu-Pu*Pu)}});function LightProbe(_u,Tu){Light.call(this,void 0,Tu),this.type="LightProbe",this.sh=_u!==void 0?_u:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.sh.copy(_u.sh),this},fromJSON:function(_u){return this.intensity=_u.intensity,this.sh.fromArray(_u.sh),this},toJSON:function(_u){var Tu=Light.prototype.toJSON.call(this,_u);return Tu.object.sh=this.sh.toArray(),Tu}});function MaterialLoader(_u){Loader.call(this,_u),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=new FileLoader(Bu.manager);Ru.setPath(Bu.path),Ru.load(_u,function(Lu){try{Tu(Bu.parse(JSON.parse(Lu)))}catch(Ou){Pu?Pu(Ou):console.error(Ou),Bu.manager.itemError(_u)}},Cu,Pu)},parse:function(_u){var Tu=this.textures;function Cu(Du){return Tu[Du]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Du),Tu[Du]}var Pu=new Materials[_u.type];if(_u.uuid!==void 0&&(Pu.uuid=_u.uuid),_u.name!==void 0&&(Pu.name=_u.name),_u.color!==void 0&&Pu.color.setHex(_u.color),_u.roughness!==void 0&&(Pu.roughness=_u.roughness),_u.metalness!==void 0&&(Pu.metalness=_u.metalness),_u.sheen!==void 0&&(Pu.sheen=new Color().setHex(_u.sheen)),_u.emissive!==void 0&&Pu.emissive.setHex(_u.emissive),_u.specular!==void 0&&Pu.specular.setHex(_u.specular),_u.shininess!==void 0&&(Pu.shininess=_u.shininess),_u.clearcoat!==void 0&&(Pu.clearcoat=_u.clearcoat),_u.clearcoatRoughness!==void 0&&(Pu.clearcoatRoughness=_u.clearcoatRoughness),_u.fog!==void 0&&(Pu.fog=_u.fog),_u.flatShading!==void 0&&(Pu.flatShading=_u.flatShading),_u.blending!==void 0&&(Pu.blending=_u.blending),_u.combine!==void 0&&(Pu.combine=_u.combine),_u.side!==void 0&&(Pu.side=_u.side),_u.opacity!==void 0&&(Pu.opacity=_u.opacity),_u.transparent!==void 0&&(Pu.transparent=_u.transparent),_u.alphaTest!==void 0&&(Pu.alphaTest=_u.alphaTest),_u.depthTest!==void 0&&(Pu.depthTest=_u.depthTest),_u.depthWrite!==void 0&&(Pu.depthWrite=_u.depthWrite),_u.colorWrite!==void 0&&(Pu.colorWrite=_u.colorWrite),_u.stencilWrite!==void 0&&(Pu.stencilWrite=_u.stencilWrite),_u.stencilWriteMask!==void 0&&(Pu.stencilWriteMask=_u.stencilWriteMask),_u.stencilFunc!==void 0&&(Pu.stencilFunc=_u.stencilFunc),_u.stencilRef!==void 0&&(Pu.stencilRef=_u.stencilRef),_u.stencilFuncMask!==void 0&&(Pu.stencilFuncMask=_u.stencilFuncMask),_u.stencilFail!==void 0&&(Pu.stencilFail=_u.stencilFail),_u.stencilZFail!==void 0&&(Pu.stencilZFail=_u.stencilZFail),_u.stencilZPass!==void 0&&(Pu.stencilZPass=_u.stencilZPass),_u.wireframe!==void 0&&(Pu.wireframe=_u.wireframe),_u.wireframeLinewidth!==void 0&&(Pu.wireframeLinewidth=_u.wireframeLinewidth),_u.wireframeLinecap!==void 0&&(Pu.wireframeLinecap=_u.wireframeLinecap),_u.wireframeLinejoin!==void 0&&(Pu.wireframeLinejoin=_u.wireframeLinejoin),_u.rotation!==void 0&&(Pu.rotation=_u.rotation),_u.linewidth!==1&&(Pu.linewidth=_u.linewidth),_u.dashSize!==void 0&&(Pu.dashSize=_u.dashSize),_u.gapSize!==void 0&&(Pu.gapSize=_u.gapSize),_u.scale!==void 0&&(Pu.scale=_u.scale),_u.polygonOffset!==void 0&&(Pu.polygonOffset=_u.polygonOffset),_u.polygonOffsetFactor!==void 0&&(Pu.polygonOffsetFactor=_u.polygonOffsetFactor),_u.polygonOffsetUnits!==void 0&&(Pu.polygonOffsetUnits=_u.polygonOffsetUnits),_u.skinning!==void 0&&(Pu.skinning=_u.skinning),_u.morphTargets!==void 0&&(Pu.morphTargets=_u.morphTargets),_u.morphNormals!==void 0&&(Pu.morphNormals=_u.morphNormals),_u.dithering!==void 0&&(Pu.dithering=_u.dithering),_u.vertexTangents!==void 0&&(Pu.vertexTangents=_u.vertexTangents),_u.visible!==void 0&&(Pu.visible=_u.visible),_u.toneMapped!==void 0&&(Pu.toneMapped=_u.toneMapped),_u.userData!==void 0&&(Pu.userData=_u.userData),_u.vertexColors!==void 0&&(typeof _u.vertexColors=="number"?Pu.vertexColors=_u.vertexColors>0:Pu.vertexColors=_u.vertexColors),_u.uniforms!==void 0)for(var Bu in _u.uniforms){var Ru=_u.uniforms[Bu];switch(Pu.uniforms[Bu]={},Ru.type){case"t":Pu.uniforms[Bu].value=Cu(Ru.value);break;case"c":Pu.uniforms[Bu].value=new Color().setHex(Ru.value);break;case"v2":Pu.uniforms[Bu].value=new Vector2().fromArray(Ru.value);break;case"v3":Pu.uniforms[Bu].value=new Vector3().fromArray(Ru.value);break;case"v4":Pu.uniforms[Bu].value=new Vector4().fromArray(Ru.value);break;case"m3":Pu.uniforms[Bu].value=new Matrix3().fromArray(Ru.value);case"m4":Pu.uniforms[Bu].value=new Matrix4().fromArray(Ru.value);break;default:Pu.uniforms[Bu].value=Ru.value}}if(_u.defines!==void 0&&(Pu.defines=_u.defines),_u.vertexShader!==void 0&&(Pu.vertexShader=_u.vertexShader),_u.fragmentShader!==void 0&&(Pu.fragmentShader=_u.fragmentShader),_u.extensions!==void 0)for(var Lu in _u.extensions)Pu.extensions[Lu]=_u.extensions[Lu];if(_u.shading!==void 0&&(Pu.flatShading=_u.shading===1),_u.size!==void 0&&(Pu.size=_u.size),_u.sizeAttenuation!==void 0&&(Pu.sizeAttenuation=_u.sizeAttenuation),_u.map!==void 0&&(Pu.map=Cu(_u.map)),_u.matcap!==void 0&&(Pu.matcap=Cu(_u.matcap)),_u.alphaMap!==void 0&&(Pu.alphaMap=Cu(_u.alphaMap)),_u.bumpMap!==void 0&&(Pu.bumpMap=Cu(_u.bumpMap)),_u.bumpScale!==void 0&&(Pu.bumpScale=_u.bumpScale),_u.normalMap!==void 0&&(Pu.normalMap=Cu(_u.normalMap)),_u.normalMapType!==void 0&&(Pu.normalMapType=_u.normalMapType),_u.normalScale!==void 0){var Ou=_u.normalScale;Array.isArray(Ou)===!1&&(Ou=[Ou,Ou]),Pu.normalScale=new Vector2().fromArray(Ou)}return _u.displacementMap!==void 0&&(Pu.displacementMap=Cu(_u.displacementMap)),_u.displacementScale!==void 0&&(Pu.displacementScale=_u.displacementScale),_u.displacementBias!==void 0&&(Pu.displacementBias=_u.displacementBias),_u.roughnessMap!==void 0&&(Pu.roughnessMap=Cu(_u.roughnessMap)),_u.metalnessMap!==void 0&&(Pu.metalnessMap=Cu(_u.metalnessMap)),_u.emissiveMap!==void 0&&(Pu.emissiveMap=Cu(_u.emissiveMap)),_u.emissiveIntensity!==void 0&&(Pu.emissiveIntensity=_u.emissiveIntensity),_u.specularMap!==void 0&&(Pu.specularMap=Cu(_u.specularMap)),_u.envMap!==void 0&&(Pu.envMap=Cu(_u.envMap)),_u.envMapIntensity!==void 0&&(Pu.envMapIntensity=_u.envMapIntensity),_u.reflectivity!==void 0&&(Pu.reflectivity=_u.reflectivity),_u.refractionRatio!==void 0&&(Pu.refractionRatio=_u.refractionRatio),_u.lightMap!==void 0&&(Pu.lightMap=Cu(_u.lightMap)),_u.lightMapIntensity!==void 0&&(Pu.lightMapIntensity=_u.lightMapIntensity),_u.aoMap!==void 0&&(Pu.aoMap=Cu(_u.aoMap)),_u.aoMapIntensity!==void 0&&(Pu.aoMapIntensity=_u.aoMapIntensity),_u.gradientMap!==void 0&&(Pu.gradientMap=Cu(_u.gradientMap)),_u.clearcoatMap!==void 0&&(Pu.clearcoatMap=Cu(_u.clearcoatMap)),_u.clearcoatRoughnessMap!==void 0&&(Pu.clearcoatRoughnessMap=Cu(_u.clearcoatRoughnessMap)),_u.clearcoatNormalMap!==void 0&&(Pu.clearcoatNormalMap=Cu(_u.clearcoatNormalMap)),_u.clearcoatNormalScale!==void 0&&(Pu.clearcoatNormalScale=new Vector2().fromArray(_u.clearcoatNormalScale)),Pu},setTextures:function(_u){return this.textures=_u,this}});var LoaderUtils={decodeText:function(_u){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(_u);for(var Tu="",Cu=0,Pu=_u.length;Cu<Pu;Cu++)Tu+=String.fromCharCode(_u[Cu]);try{return decodeURIComponent(escape(Tu))}catch{return Tu}},extractUrlBase:function(_u){var Tu=_u.lastIndexOf("/");return Tu===-1?"./":_u.substr(0,Tu+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(_u){return BufferGeometry.prototype.copy.call(this,_u),this.instanceCount=_u.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.instanceCount=this.instanceCount,_u.isInstancedBufferGeometry=!0,_u}});function InstancedBufferAttribute(_u,Tu,Cu,Pu){typeof Cu=="number"&&(Pu=Cu,Cu=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,_u,Tu,Cu),this.meshPerAttribute=Pu||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(_u){return BufferAttribute.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this},toJSON:function(){var _u=BufferAttribute.prototype.toJSON.call(this);return _u.meshPerAttribute=this.meshPerAttribute,_u.isInstancedBufferAttribute=!0,_u}});function BufferGeometryLoader(_u){Loader.call(this,_u)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=new FileLoader(Bu.manager);Ru.setPath(Bu.path),Ru.load(_u,function(Lu){try{Tu(Bu.parse(JSON.parse(Lu)))}catch(Ou){Pu?Pu(Ou):console.error(Ou),Bu.manager.itemError(_u)}},Cu,Pu)},parse:function(_u){var Tu=_u.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,Cu=_u.data.index;if(Cu!==void 0){var Pu=new TYPED_ARRAYS[Cu.type](Cu.array);Tu.setIndex(new BufferAttribute(Pu,1))}var Bu=_u.data.attributes;for(var Ru in Bu){var Lu=Bu[Ru],Pu=new TYPED_ARRAYS[Lu.type](Lu.array),Ou=Lu.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Du=new Ou(Pu,Lu.itemSize,Lu.normalized);Lu.name!==void 0&&(Du.name=Lu.name),Tu.setAttribute(Ru,Du)}var $u=_u.data.morphAttributes;if($u)for(var Ru in $u){for(var ku=$u[Ru],Fu=[],Nu=0,Vu=ku.length;Nu<Vu;Nu++){var Lu=ku[Nu],Pu=new TYPED_ARRAYS[Lu.type](Lu.array),Du=new BufferAttribute(Pu,Lu.itemSize,Lu.normalized);Lu.name!==void 0&&(Du.name=Lu.name),Fu.push(Du)}Tu.morphAttributes[Ru]=Fu}var Gu=_u.data.morphTargetsRelative;Gu&&(Tu.morphTargetsRelative=!0);var Hu=_u.data.groups||_u.data.drawcalls||_u.data.offsets;if(Hu!==void 0)for(var Nu=0,ju=Hu.length;Nu!==ju;++Nu){var Uu=Hu[Nu];Tu.addGroup(Uu.start,Uu.count,Uu.materialIndex)}var zu=_u.data.boundingSphere;if(zu!==void 0){var Wu=new Vector3;zu.center!==void 0&&Wu.fromArray(zu.center),Tu.boundingSphere=new Sphere(Wu,zu.radius)}return _u.name&&(Tu.name=_u.name),_u.userData&&(Tu.userData=_u.userData),Tu}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(_u){Loader.call(this,_u)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=this.path===""?LoaderUtils.extractUrlBase(_u):this.path;this.resourcePath=this.resourcePath||Ru;var Lu=new FileLoader(Bu.manager);Lu.setPath(this.path),Lu.load(_u,function(Ou){var Du=null;try{Du=JSON.parse(Ou)}catch(ku){Pu!==void 0&&Pu(ku),console.error("THREE:ObjectLoader: Can't parse "+_u+".",ku.message);return}var $u=Du.metadata;if($u===void 0||$u.type===void 0||$u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+_u);return}Bu.parse(Du,Tu)},Cu,Pu)},parse:function(_u,Tu){var Cu=this.parseShape(_u.shapes),Pu=this.parseGeometries(_u.geometries,Cu),Bu=this.parseImages(_u.images,function(){Tu!==void 0&&Tu(Ou)}),Ru=this.parseTextures(_u.textures,Bu),Lu=this.parseMaterials(_u.materials,Ru),Ou=this.parseObject(_u.object,Pu,Lu);return _u.animations&&(Ou.animations=this.parseAnimations(_u.animations)),(_u.images===void 0||_u.images.length===0)&&Tu!==void 0&&Tu(Ou),Ou},parseShape:function(_u){var Tu={};if(_u!==void 0)for(var Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=new Shape().fromJSON(_u[Cu]);Tu[Bu.uuid]=Bu}return Tu},parseGeometries:function(_u,Tu){var Cu={};if(_u!==void 0)for(var Pu=new BufferGeometryLoader,Bu=0,Ru=_u.length;Bu<Ru;Bu++){var Lu,Ou=_u[Bu];switch(Ou.type){case"PlaneGeometry":case"PlaneBufferGeometry":Lu=new Geometries[Ou.type](Ou.width,Ou.height,Ou.widthSegments,Ou.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Lu=new Geometries[Ou.type](Ou.width,Ou.height,Ou.depth,Ou.widthSegments,Ou.heightSegments,Ou.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Lu=new Geometries[Ou.type](Ou.radius,Ou.segments,Ou.thetaStart,Ou.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Lu=new Geometries[Ou.type](Ou.radiusTop,Ou.radiusBottom,Ou.height,Ou.radialSegments,Ou.heightSegments,Ou.openEnded,Ou.thetaStart,Ou.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Lu=new Geometries[Ou.type](Ou.radius,Ou.height,Ou.radialSegments,Ou.heightSegments,Ou.openEnded,Ou.thetaStart,Ou.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Lu=new Geometries[Ou.type](Ou.radius,Ou.widthSegments,Ou.heightSegments,Ou.phiStart,Ou.phiLength,Ou.thetaStart,Ou.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Lu=new Geometries[Ou.type](Ou.radius,Ou.detail);break;case"RingGeometry":case"RingBufferGeometry":Lu=new Geometries[Ou.type](Ou.innerRadius,Ou.outerRadius,Ou.thetaSegments,Ou.phiSegments,Ou.thetaStart,Ou.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Lu=new Geometries[Ou.type](Ou.radius,Ou.tube,Ou.radialSegments,Ou.tubularSegments,Ou.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Lu=new Geometries[Ou.type](Ou.radius,Ou.tube,Ou.tubularSegments,Ou.radialSegments,Ou.p,Ou.q);break;case"TubeGeometry":case"TubeBufferGeometry":Lu=new Geometries[Ou.type](new Curves[Ou.path.type]().fromJSON(Ou.path),Ou.tubularSegments,Ou.radius,Ou.radialSegments,Ou.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Lu=new Geometries[Ou.type](Ou.points,Ou.segments,Ou.phiStart,Ou.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Lu=new Geometries[Ou.type](Ou.vertices,Ou.indices,Ou.radius,Ou.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Fu=[],Du=0,$u=Ou.shapes.length;Du<$u;Du++){var ku=Tu[Ou.shapes[Du]];Fu.push(ku)}Lu=new Geometries[Ou.type](Fu,Ou.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Fu=[],Du=0,$u=Ou.shapes.length;Du<$u;Du++){var ku=Tu[Ou.shapes[Du]];Fu.push(ku)}var Nu=Ou.options.extrudePath;Nu!==void 0&&(Ou.options.extrudePath=new Curves[Nu.type]().fromJSON(Nu)),Lu=new Geometries[Ou.type](Fu,Ou.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Lu=Pu.parse(Ou);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Ou.type+'"');continue}Lu.uuid=Ou.uuid,Ou.name!==void 0&&(Lu.name=Ou.name),Lu.isBufferGeometry===!0&&Ou.userData!==void 0&&(Lu.userData=Ou.userData),Cu[Ou.uuid]=Lu}return Cu},parseMaterials:function(_u,Tu){var Cu={},Pu={};if(_u!==void 0){var Bu=new MaterialLoader;Bu.setTextures(Tu);for(var Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru];if(Ou.type==="MultiMaterial"){for(var Du=[],$u=0;$u<Ou.materials.length;$u++){var ku=Ou.materials[$u];Cu[ku.uuid]===void 0&&(Cu[ku.uuid]=Bu.parse(ku)),Du.push(Cu[ku.uuid])}Pu[Ou.uuid]=Du}else Cu[Ou.uuid]===void 0&&(Cu[Ou.uuid]=Bu.parse(Ou)),Pu[Ou.uuid]=Cu[Ou.uuid]}}return Pu},parseAnimations:function(_u){for(var Tu=[],Cu=0;Cu<_u.length;Cu++){var Pu=_u[Cu],Bu=AnimationClip.parse(Pu);Pu.uuid!==void 0&&(Bu.uuid=Pu.uuid),Tu.push(Bu)}return Tu},parseImages:function(_u,Tu){var Cu=this,Pu={};function Bu(Hu){return Cu.manager.itemStart(Hu),Lu.load(Hu,function(){Cu.manager.itemEnd(Hu)},void 0,function(){Cu.manager.itemError(Hu),Cu.manager.itemEnd(Hu)})}if(_u!==void 0&&_u.length>0){var Ru=new LoadingManager(Tu),Lu=new ImageLoader(Ru);Lu.setCrossOrigin(this.crossOrigin);for(var Ou=0,Du=_u.length;Ou<Du;Ou++){var $u=_u[Ou],ku=$u.url;if(Array.isArray(ku)){Pu[$u.uuid]=[];for(var Fu=0,Nu=ku.length;Fu<Nu;Fu++){var Vu=ku[Fu],Gu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Vu)?Vu:Cu.resourcePath+Vu;Pu[$u.uuid].push(Bu(Gu))}}else{var Gu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test($u.url)?$u.url:Cu.resourcePath+$u.url;Pu[$u.uuid]=Bu(Gu)}}}return Pu},parseTextures:function(_u,Tu){function Cu(Du,$u){return typeof Du=="number"?Du:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Du),$u[Du])}var Pu={};if(_u!==void 0)for(var Bu=0,Ru=_u.length;Bu<Ru;Bu++){var Lu=_u[Bu];Lu.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Lu.uuid),Tu[Lu.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Lu.image);var Ou;Array.isArray(Tu[Lu.image])?Ou=new CubeTexture(Tu[Lu.image]):Ou=new Texture(Tu[Lu.image]),Ou.needsUpdate=!0,Ou.uuid=Lu.uuid,Lu.name!==void 0&&(Ou.name=Lu.name),Lu.mapping!==void 0&&(Ou.mapping=Cu(Lu.mapping,TEXTURE_MAPPING)),Lu.offset!==void 0&&Ou.offset.fromArray(Lu.offset),Lu.repeat!==void 0&&Ou.repeat.fromArray(Lu.repeat),Lu.center!==void 0&&Ou.center.fromArray(Lu.center),Lu.rotation!==void 0&&(Ou.rotation=Lu.rotation),Lu.wrap!==void 0&&(Ou.wrapS=Cu(Lu.wrap[0],TEXTURE_WRAPPING),Ou.wrapT=Cu(Lu.wrap[1],TEXTURE_WRAPPING)),Lu.format!==void 0&&(Ou.format=Lu.format),Lu.type!==void 0&&(Ou.type=Lu.type),Lu.encoding!==void 0&&(Ou.encoding=Lu.encoding),Lu.minFilter!==void 0&&(Ou.minFilter=Cu(Lu.minFilter,TEXTURE_FILTER)),Lu.magFilter!==void 0&&(Ou.magFilter=Cu(Lu.magFilter,TEXTURE_FILTER)),Lu.anisotropy!==void 0&&(Ou.anisotropy=Lu.anisotropy),Lu.flipY!==void 0&&(Ou.flipY=Lu.flipY),Lu.premultiplyAlpha!==void 0&&(Ou.premultiplyAlpha=Lu.premultiplyAlpha),Lu.unpackAlignment!==void 0&&(Ou.unpackAlignment=Lu.unpackAlignment),Pu[Lu.uuid]=Ou}return Pu},parseObject:function(_u,Tu,Cu){var Pu;function Bu(ju){return Tu[ju]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",ju),Tu[ju]}function Ru(ju){if(ju!==void 0){if(Array.isArray(ju)){for(var Uu=[],zu=0,Wu=ju.length;zu<Wu;zu++){var Qu=ju[zu];Cu[Qu]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Qu),Uu.push(Cu[Qu])}return Uu}return Cu[ju]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ju),Cu[ju]}}switch(_u.type){case"Scene":Pu=new Scene,_u.background!==void 0&&Number.isInteger(_u.background)&&(Pu.background=new Color(_u.background)),_u.fog!==void 0&&(_u.fog.type==="Fog"?Pu.fog=new Fog(_u.fog.color,_u.fog.near,_u.fog.far):_u.fog.type==="FogExp2"&&(Pu.fog=new FogExp2(_u.fog.color,_u.fog.density)));break;case"PerspectiveCamera":Pu=new PerspectiveCamera(_u.fov,_u.aspect,_u.near,_u.far),_u.focus!==void 0&&(Pu.focus=_u.focus),_u.zoom!==void 0&&(Pu.zoom=_u.zoom),_u.filmGauge!==void 0&&(Pu.filmGauge=_u.filmGauge),_u.filmOffset!==void 0&&(Pu.filmOffset=_u.filmOffset),_u.view!==void 0&&(Pu.view=Object.assign({},_u.view));break;case"OrthographicCamera":Pu=new OrthographicCamera(_u.left,_u.right,_u.top,_u.bottom,_u.near,_u.far),_u.zoom!==void 0&&(Pu.zoom=_u.zoom),_u.view!==void 0&&(Pu.view=Object.assign({},_u.view));break;case"AmbientLight":Pu=new AmbientLight(_u.color,_u.intensity);break;case"DirectionalLight":Pu=new DirectionalLight(_u.color,_u.intensity);break;case"PointLight":Pu=new PointLight(_u.color,_u.intensity,_u.distance,_u.decay);break;case"RectAreaLight":Pu=new RectAreaLight(_u.color,_u.intensity,_u.width,_u.height);break;case"SpotLight":Pu=new SpotLight(_u.color,_u.intensity,_u.distance,_u.angle,_u.penumbra,_u.decay);break;case"HemisphereLight":Pu=new HemisphereLight(_u.color,_u.groundColor,_u.intensity);break;case"LightProbe":Pu=new LightProbe().fromJSON(_u);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Lu=Bu(_u.geometry),Ou=Ru(_u.material);Pu=new Mesh(Lu,Ou);break;case"InstancedMesh":var Lu=Bu(_u.geometry),Ou=Ru(_u.material),Du=_u.count,$u=_u.instanceMatrix;Pu=new InstancedMesh(Lu,Ou,Du),Pu.instanceMatrix=new BufferAttribute(new Float32Array($u.array),16);break;case"LOD":Pu=new LOD;break;case"Line":Pu=new Line$1(Bu(_u.geometry),Ru(_u.material),_u.mode);break;case"LineLoop":Pu=new LineLoop(Bu(_u.geometry),Ru(_u.material));break;case"LineSegments":Pu=new LineSegments(Bu(_u.geometry),Ru(_u.material));break;case"PointCloud":case"Points":Pu=new Points(Bu(_u.geometry),Ru(_u.material));break;case"Sprite":Pu=new Sprite(Ru(_u.material));break;case"Group":Pu=new Group$1;break;default:Pu=new Object3D}if(Pu.uuid=_u.uuid,_u.name!==void 0&&(Pu.name=_u.name),_u.matrix!==void 0?(Pu.matrix.fromArray(_u.matrix),_u.matrixAutoUpdate!==void 0&&(Pu.matrixAutoUpdate=_u.matrixAutoUpdate),Pu.matrixAutoUpdate&&Pu.matrix.decompose(Pu.position,Pu.quaternion,Pu.scale)):(_u.position!==void 0&&Pu.position.fromArray(_u.position),_u.rotation!==void 0&&Pu.rotation.fromArray(_u.rotation),_u.quaternion!==void 0&&Pu.quaternion.fromArray(_u.quaternion),_u.scale!==void 0&&Pu.scale.fromArray(_u.scale)),_u.castShadow!==void 0&&(Pu.castShadow=_u.castShadow),_u.receiveShadow!==void 0&&(Pu.receiveShadow=_u.receiveShadow),_u.shadow&&(_u.shadow.bias!==void 0&&(Pu.shadow.bias=_u.shadow.bias),_u.shadow.radius!==void 0&&(Pu.shadow.radius=_u.shadow.radius),_u.shadow.mapSize!==void 0&&Pu.shadow.mapSize.fromArray(_u.shadow.mapSize),_u.shadow.camera!==void 0&&(Pu.shadow.camera=this.parseObject(_u.shadow.camera))),_u.visible!==void 0&&(Pu.visible=_u.visible),_u.frustumCulled!==void 0&&(Pu.frustumCulled=_u.frustumCulled),_u.renderOrder!==void 0&&(Pu.renderOrder=_u.renderOrder),_u.userData!==void 0&&(Pu.userData=_u.userData),_u.layers!==void 0&&(Pu.layers.mask=_u.layers),_u.children!==void 0)for(var ku=_u.children,Fu=0;Fu<ku.length;Fu++)Pu.add(this.parseObject(ku[Fu],Tu,Cu));if(_u.type==="LOD"){_u.autoUpdate!==void 0&&(Pu.autoUpdate=_u.autoUpdate);for(var Nu=_u.levels,Vu=0;Vu<Nu.length;Vu++){var Gu=Nu[Vu],Hu=Pu.getObjectByProperty("uuid",Gu.object);Hu!==void 0&&Pu.addLevel(Hu,Gu.distance)}}return Pu}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(_u){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,_u),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(Tu){return this.options=Tu,this},load:function(_u,Tu,Cu,Pu){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Bu=this,Ru=Cache.get(_u);if(Ru!==void 0)return Bu.manager.itemStart(_u),setTimeout(function(){Tu&&Tu(Ru),Bu.manager.itemEnd(_u)},0),Ru;fetch(_u).then(function(Lu){return Lu.blob()}).then(function(Lu){return Bu.options===void 0?createImageBitmap(Lu):createImageBitmap(Lu,Bu.options)}).then(function(Lu){Cache.add(_u,Lu),Tu&&Tu(Lu),Bu.manager.itemEnd(_u)}).catch(function(Lu){Pu&&Pu(Lu),Bu.manager.itemError(_u),Bu.manager.itemEnd(_u)}),Bu.manager.itemStart(_u)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(_u,Tu){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_u,Tu),this},lineTo:function(_u,Tu){return this.currentPath.lineTo(_u,Tu),this},quadraticCurveTo:function(_u,Tu,Cu,Pu){return this.currentPath.quadraticCurveTo(_u,Tu,Cu,Pu),this},bezierCurveTo:function(_u,Tu,Cu,Pu,Bu,Ru){return this.currentPath.bezierCurveTo(_u,Tu,Cu,Pu,Bu,Ru),this},splineThru:function(_u){return this.currentPath.splineThru(_u),this},toShapes:function(_u,Tu){function Cu(_f){for(var ep=[],tp=0,op=_f.length;tp<op;tp++){var hp=_f[tp],cp=new Shape;cp.curves=hp.curves,ep.push(cp)}return ep}function Pu(_f,ep){for(var tp=ep.length,op=!1,hp=tp-1,cp=0;cp<tp;hp=cp++){var Sp=ep[hp],yp=ep[cp],Rp=yp.x-Sp.x,wp=yp.y-Sp.y;if(Math.abs(wp)>Number.EPSILON){if(wp<0&&(Sp=ep[cp],Rp=-Rp,yp=ep[hp],wp=-wp),_f.y<Sp.y||_f.y>yp.y)continue;if(_f.y===Sp.y){if(_f.x===Sp.x)return!0}else{var Pp=wp*(_f.x-Sp.x)-Rp*(_f.y-Sp.y);if(Pp===0)return!0;if(Pp<0)continue;op=!op}}else{if(_f.y!==Sp.y)continue;if(yp.x<=_f.x&&_f.x<=Sp.x||Sp.x<=_f.x&&_f.x<=yp.x)return!0}}return op}var Bu=ShapeUtils.isClockWise,Ru=this.subPaths;if(Ru.length===0)return[];if(Tu===!0)return Cu(Ru);var Lu,Ou,Du,$u=[];if(Ru.length===1)return Ou=Ru[0],Du=new Shape,Du.curves=Ou.curves,$u.push(Du),$u;var ku=!Bu(Ru[0].getPoints());ku=_u?!ku:ku;var Fu=[],Nu=[],Vu=[],Gu=0,Hu;Nu[Gu]=void 0,Vu[Gu]=[];for(var ju=0,Uu=Ru.length;ju<Uu;ju++)Ou=Ru[ju],Hu=Ou.getPoints(),Lu=Bu(Hu),Lu=_u?!Lu:Lu,Lu?(!ku&&Nu[Gu]&&Gu++,Nu[Gu]={s:new Shape,p:Hu},Nu[Gu].s.curves=Ou.curves,ku&&Gu++,Vu[Gu]=[]):Vu[Gu].push({h:Ou,p:Hu[0]});if(!Nu[0])return Cu(Ru);if(Nu.length>1){for(var zu=!1,Wu=[],Qu=0,qu=Nu.length;Qu<qu;Qu++)Fu[Qu]=[];for(var Qu=0,qu=Nu.length;Qu<qu;Qu++)for(var Yu=Vu[Qu],Xc=0;Xc<Yu.length;Xc++){for(var _h=Yu[Xc],_d=!0,Ku=0;Ku<Nu.length;Ku++)Pu(_h.p,Nu[Ku].p)&&(Qu!==Ku&&Wu.push({froms:Qu,tos:Ku,hole:Xc}),_d?(_d=!1,Fu[Ku].push(_h)):zu=!0);_d&&Fu[Qu].push(_h)}Wu.length>0&&(zu||(Vu=Fu))}for(var Xu,ju=0,Ju=Nu.length;ju<Ju;ju++){Du=Nu[ju].s,$u.push(Du),Xu=Vu[ju];for(var Zu=0,_c=Xu.length;Zu<_c;Zu++)Du.holes.push(Xu[Zu].h)}return $u}});function Font(_u){this.type="Font",this.data=_u}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(_u,Tu){Tu===void 0&&(Tu=100);for(var Cu=[],Pu=createPaths(_u,Tu,this.data),Bu=0,Ru=Pu.length;Bu<Ru;Bu++)Array.prototype.push.apply(Cu,Pu[Bu].toShapes());return Cu}});function createPaths(_u,Tu,Cu){for(var Pu=Array.from?Array.from(_u):String(_u).split(""),Bu=Tu/Cu.resolution,Ru=(Cu.boundingBox.yMax-Cu.boundingBox.yMin+Cu.underlineThickness)*Bu,Lu=[],Ou=0,Du=0,$u=0;$u<Pu.length;$u++){var ku=Pu[$u];if(ku===`
`)Ou=0,Du-=Ru;else{var Fu=createPath(ku,Bu,Ou,Du,Cu);Ou+=Fu.offsetX,Lu.push(Fu.path)}}return Lu}function createPath(_u,Tu,Cu,Pu,Bu){var Ru=Bu.glyphs[_u]||Bu.glyphs["?"];if(!Ru){console.error('THREE.Font: character "'+_u+'" does not exists in font family '+Bu.familyName+".");return}var Lu=new ShapePath,Ou,Du,$u,ku,Fu,Nu,Vu,Gu;if(Ru.o)for(var Hu=Ru._cachedOutline||(Ru._cachedOutline=Ru.o.split(" ")),ju=0,Uu=Hu.length;ju<Uu;){var zu=Hu[ju++];switch(zu){case"m":Ou=Hu[ju++]*Tu+Cu,Du=Hu[ju++]*Tu+Pu,Lu.moveTo(Ou,Du);break;case"l":Ou=Hu[ju++]*Tu+Cu,Du=Hu[ju++]*Tu+Pu,Lu.lineTo(Ou,Du);break;case"q":$u=Hu[ju++]*Tu+Cu,ku=Hu[ju++]*Tu+Pu,Fu=Hu[ju++]*Tu+Cu,Nu=Hu[ju++]*Tu+Pu,Lu.quadraticCurveTo(Fu,Nu,$u,ku);break;case"b":$u=Hu[ju++]*Tu+Cu,ku=Hu[ju++]*Tu+Pu,Fu=Hu[ju++]*Tu+Cu,Nu=Hu[ju++]*Tu+Pu,Vu=Hu[ju++]*Tu+Cu,Gu=Hu[ju++]*Tu+Pu,Lu.bezierCurveTo(Fu,Nu,Vu,Gu,$u,ku);break}}return{offsetX:Ru.ha*Tu,path:Lu}}function FontLoader(_u){Loader.call(this,_u)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=new FileLoader(this.manager);Ru.setPath(this.path),Ru.load(_u,function(Lu){var Ou;try{Ou=JSON.parse(Lu)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Ou=JSON.parse(Lu.substring(65,Lu.length-2))}var Du=Bu.parse(Ou);Tu&&Tu(Du)},Cu,Pu)},parse:function(_u){return new Font(_u)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(_u){_context=_u}};function AudioLoader(_u){Loader.call(this,_u)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(_u,Tu,Cu,Pu){var Bu=this,Ru=new FileLoader(Bu.manager);Ru.setResponseType("arraybuffer"),Ru.setPath(Bu.path),Ru.load(_u,function(Lu){try{var Ou=Lu.slice(0),Du=AudioContext.getContext();Du.decodeAudioData(Ou,function($u){Tu($u)})}catch($u){Pu?Pu($u):console.error($u),Bu.manager.itemError(_u)}},Cu,Pu)}});function HemisphereLightProbe(_u,Tu,Cu){LightProbe.call(this,void 0,Cu);var Pu=new Color().set(_u),Bu=new Color().set(Tu),Ru=new Vector3(Pu.r,Pu.g,Pu.b),Lu=new Vector3(Bu.r,Bu.g,Bu.b),Ou=Math.sqrt(Math.PI),Du=Ou*Math.sqrt(.75);this.sh.coefficients[0].copy(Ru).add(Lu).multiplyScalar(Ou),this.sh.coefficients[1].copy(Ru).sub(Lu).multiplyScalar(Du)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var Tu=LightProbe.prototype.toJSON.call(this,_u);return Tu}});function AmbientLightProbe(_u,Tu){LightProbe.call(this,void 0,Tu);var Cu=new Color().set(_u);this.sh.coefficients[0].set(Cu.r,Cu.g,Cu.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var Tu=LightProbe.prototype.toJSON.call(this,_u);return Tu}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(_u){var Tu=this._cache,Cu=Tu.focus!==_u.focus||Tu.fov!==_u.fov||Tu.aspect!==_u.aspect*this.aspect||Tu.near!==_u.near||Tu.far!==_u.far||Tu.zoom!==_u.zoom||Tu.eyeSep!==this.eyeSep;if(Cu){Tu.focus=_u.focus,Tu.fov=_u.fov,Tu.aspect=_u.aspect*this.aspect,Tu.near=_u.near,Tu.far=_u.far,Tu.zoom=_u.zoom,Tu.eyeSep=this.eyeSep;var Pu=_u.projectionMatrix.clone(),Bu=Tu.eyeSep/2,Ru=Bu*Tu.near/Tu.focus,Lu=Tu.near*Math.tan(MathUtils.DEG2RAD*Tu.fov*.5)/Tu.zoom,Ou,Du;_eyeLeft.elements[12]=-Bu,_eyeRight.elements[12]=Bu,Ou=-Lu*Tu.aspect+Ru,Du=Lu*Tu.aspect+Ru,Pu.elements[0]=2*Tu.near/(Du-Ou),Pu.elements[8]=(Du+Ou)/(Du-Ou),this.cameraL.projectionMatrix.copy(Pu),Ou=-Lu*Tu.aspect-Ru,Du=Lu*Tu.aspect-Ru,Pu.elements[0]=2*Tu.near/(Du-Ou),Pu.elements[8]=(Du+Ou)/(Du-Ou),this.cameraR.projectionMatrix.copy(Pu)}this.cameraL.matrixWorld.copy(_u.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_u.matrixWorld).multiply(_eyeRight)}});function Clock(_u){this.autoStart=_u!==void 0?_u:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var _u=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Tu=(typeof performance=="undefined"?Date:performance).now();_u=(Tu-this.oldTime)/1e3,this.oldTime=Tu,this.elapsedTime+=_u}return _u}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(_u){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_u,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u);var Tu=this.context.listener,Cu=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),Tu.positionX){var Pu=this.context.currentTime+this.timeDelta;Tu.positionX.linearRampToValueAtTime(_position$2.x,Pu),Tu.positionY.linearRampToValueAtTime(_position$2.y,Pu),Tu.positionZ.linearRampToValueAtTime(_position$2.z,Pu),Tu.forwardX.linearRampToValueAtTime(_orientation.x,Pu),Tu.forwardY.linearRampToValueAtTime(_orientation.y,Pu),Tu.forwardZ.linearRampToValueAtTime(_orientation.z,Pu),Tu.upX.linearRampToValueAtTime(Cu.x,Pu),Tu.upY.linearRampToValueAtTime(Cu.y,Pu),Tu.upZ.linearRampToValueAtTime(Cu.z,Pu)}else Tu.setPosition(_position$2.x,_position$2.y,_position$2.z),Tu.setOrientation(_orientation.x,_orientation.y,_orientation.z,Cu.x,Cu.y,Cu.z)}});function Audio$2(_u){Object3D.call(this),this.type="Audio",this.listener=_u,this.context=_u.context,this.gain=this.context.createGain(),this.gain.connect(_u.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$2.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$2,getOutput:function(){return this.gain},setNodeSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_u,this.connect(),this},setMediaElementSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_u),this.connect(),this},setMediaStreamSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_u),this.connect(),this},setBuffer:function(_u){return this.buffer=_u,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(_u){if(_u===void 0&&(_u=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_u;var Tu=this.context.createBufferSource();return Tu.buffer=this.buffer,Tu.loop=this.loop,Tu.loopStart=this.loopStart,Tu.loopEnd=this.loopEnd,Tu.onended=this.onEnded.bind(this),Tu.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=Tu,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var _u=1,Tu=this.filters.length;_u<Tu;_u++)this.filters[_u-1].connect(this.filters[_u]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var _u=1,Tu=this.filters.length;_u<Tu;_u++)this.filters[_u-1].disconnect(this.filters[_u]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(_u){return _u||(_u=[]),this.isPlaying===!0?(this.disconnect(),this.filters=_u,this.connect()):this.filters=_u,this},setDetune:function(_u){if(this.detune=_u,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(_u){return this.setFilters(_u?[_u]:[])},setPlaybackRate:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_u,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_u,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(_u){return this.loopStart=_u,this},setLoopEnd:function(_u){return this.loopEnd=_u,this},getVolume:function(){return this.gain.gain.value},setVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(_u){Audio$2.call(this,_u),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$2.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(_u){return this.panner.refDistance=_u,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(_u){return this.panner.rolloffFactor=_u,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(_u){return this.panner.distanceModel=_u,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(_u){return this.panner.maxDistance=_u,this},setDirectionalCone:function(_u,Tu,Cu){return this.panner.coneInnerAngle=_u,this.panner.coneOuterAngle=Tu,this.panner.coneOuterGain=Cu,this},updateMatrixWorld:function(_u){if(Object3D.prototype.updateMatrixWorld.call(this,_u),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var Tu=this.panner;if(Tu.positionX){var Cu=this.context.currentTime+this.listener.timeDelta;Tu.positionX.linearRampToValueAtTime(_position$3.x,Cu),Tu.positionY.linearRampToValueAtTime(_position$3.y,Cu),Tu.positionZ.linearRampToValueAtTime(_position$3.z,Cu),Tu.orientationX.linearRampToValueAtTime(_orientation$1.x,Cu),Tu.orientationY.linearRampToValueAtTime(_orientation$1.y,Cu),Tu.orientationZ.linearRampToValueAtTime(_orientation$1.z,Cu)}else Tu.setPosition(_position$3.x,_position$3.y,_position$3.z),Tu.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(_u,Tu){this.analyser=_u.context.createAnalyser(),this.analyser.fftSize=Tu!==void 0?Tu:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),_u.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var _u=0,Tu=this.getFrequencyData(),Cu=0;Cu<Tu.length;Cu++)_u+=Tu[Cu];return _u/Tu.length}});function PropertyMixer(_u,Tu,Cu){this.binding=_u,this.valueSize=Cu;var Pu,Bu,Ru;switch(Tu){case"quaternion":Pu=this._slerp,Bu=this._slerpAdditive,Ru=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Cu*6),this._workIndex=5;break;case"string":case"bool":Pu=this._select,Bu=this._select,Ru=this._setAdditiveIdentityOther,this.buffer=new Array(Cu*5);break;default:Pu=this._lerp,Bu=this._lerpAdditive,Ru=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Cu*5)}this._mixBufferRegion=Pu,this._mixBufferRegionAdditive=Bu,this._setIdentity=Ru,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(_u,Tu){var Cu=this.buffer,Pu=this.valueSize,Bu=_u*Pu+Pu,Ru=this.cumulativeWeight;if(Ru===0){for(var Lu=0;Lu!==Pu;++Lu)Cu[Bu+Lu]=Cu[Lu];Ru=Tu}else{Ru+=Tu;var Ou=Tu/Ru;this._mixBufferRegion(Cu,Bu,0,Ou,Pu)}this.cumulativeWeight=Ru},accumulateAdditive:function(_u){var Tu=this.buffer,Cu=this.valueSize,Pu=Cu*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(Tu,Pu,0,_u,Cu),this.cumulativeWeightAdditive+=_u},apply:function(_u){var Tu=this.valueSize,Cu=this.buffer,Pu=_u*Tu+Tu,Bu=this.cumulativeWeight,Ru=this.cumulativeWeightAdditive,Lu=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Bu<1){var Ou=Tu*this._origIndex;this._mixBufferRegion(Cu,Pu,Ou,1-Bu,Tu)}Ru>0&&this._mixBufferRegionAdditive(Cu,Pu,this._addIndex*Tu,1,Tu);for(var Du=Tu,$u=Tu+Tu;Du!==$u;++Du)if(Cu[Du]!==Cu[Du+Tu]){Lu.setValue(Cu,Pu);break}},saveOriginalState:function(){var _u=this.binding,Tu=this.buffer,Cu=this.valueSize,Pu=Cu*this._origIndex;_u.getValue(Tu,Pu);for(var Bu=Cu,Ru=Pu;Bu!==Ru;++Bu)Tu[Bu]=Tu[Pu+Bu%Cu];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var _u=this.valueSize*3;this.binding.setValue(this.buffer,_u)},_setAdditiveIdentityNumeric:function(){for(var _u=this._addIndex*this.valueSize,Tu=_u+this.valueSize,Cu=_u;Cu<Tu;Cu++)this.buffer[Cu]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var _u=this._origIndex*this.valueSize,Tu=this._addIndex*this.valueSize,Cu=0;Cu<this.valueSize;Cu++)this.buffer[Tu+Cu]=this.buffer[_u+Cu]},_select:function(_u,Tu,Cu,Pu,Bu){if(Pu>=.5)for(var Ru=0;Ru!==Bu;++Ru)_u[Tu+Ru]=_u[Cu+Ru]},_slerp:function(_u,Tu,Cu,Pu){Quaternion.slerpFlat(_u,Tu,_u,Tu,_u,Cu,Pu)},_slerpAdditive:function(_u,Tu,Cu,Pu,Bu){var Ru=this._workIndex*Bu;Quaternion.multiplyQuaternionsFlat(_u,Ru,_u,Tu,_u,Cu),Quaternion.slerpFlat(_u,Tu,_u,Tu,_u,Ru,Pu)},_lerp:function(_u,Tu,Cu,Pu,Bu){for(var Ru=1-Pu,Lu=0;Lu!==Bu;++Lu){var Ou=Tu+Lu;_u[Ou]=_u[Ou]*Ru+_u[Cu+Lu]*Pu}},_lerpAdditive:function(_u,Tu,Cu,Pu,Bu){for(var Ru=0;Ru!==Bu;++Ru){var Lu=Tu+Ru;_u[Lu]=_u[Lu]+_u[Cu+Ru]*Pu}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(_u,Tu,Cu){var Pu=Cu||PropertyBinding.parseTrackName(Tu);this._targetGroup=_u,this._bindings=_u.subscribe_(Tu,Pu)}Object.assign(Composite.prototype,{getValue:function(_u,Tu){this.bind();var Cu=this._targetGroup.nCachedObjects_,Pu=this._bindings[Cu];Pu!==void 0&&Pu.getValue(_u,Tu)},setValue:function(_u,Tu){for(var Cu=this._bindings,Pu=this._targetGroup.nCachedObjects_,Bu=Cu.length;Pu!==Bu;++Pu)Cu[Pu].setValue(_u,Tu)},bind:function(){for(var _u=this._bindings,Tu=this._targetGroup.nCachedObjects_,Cu=_u.length;Tu!==Cu;++Tu)_u[Tu].bind()},unbind:function(){for(var _u=this._bindings,Tu=this._targetGroup.nCachedObjects_,Cu=_u.length;Tu!==Cu;++Tu)_u[Tu].unbind()}});function PropertyBinding(_u,Tu,Cu){this.path=Tu,this.parsedPath=Cu||PropertyBinding.parseTrackName(Tu),this.node=PropertyBinding.findNode(_u,this.parsedPath.nodeName)||_u,this.rootNode=_u}Object.assign(PropertyBinding,{Composite,create:function(_u,Tu,Cu){return _u&&_u.isAnimationObjectGroup?new PropertyBinding.Composite(_u,Tu,Cu):new PropertyBinding(_u,Tu,Cu)},sanitizeNodeName:function(_u){return _u.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(_u){var Tu=_trackRe.exec(_u);if(!Tu)throw new Error("PropertyBinding: Cannot parse trackName: "+_u);var Cu={nodeName:Tu[2],objectName:Tu[3],objectIndex:Tu[4],propertyName:Tu[5],propertyIndex:Tu[6]},Pu=Cu.nodeName&&Cu.nodeName.lastIndexOf(".");if(Pu!==void 0&&Pu!==-1){var Bu=Cu.nodeName.substring(Pu+1);_supportedObjectNames.indexOf(Bu)!==-1&&(Cu.nodeName=Cu.nodeName.substring(0,Pu),Cu.objectName=Bu)}if(Cu.propertyName===null||Cu.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_u);return Cu},findNode:function(_u,Tu){if(!Tu||Tu===""||Tu==="."||Tu===-1||Tu===_u.name||Tu===_u.uuid)return _u;if(_u.skeleton){var Cu=_u.skeleton.getBoneByName(Tu);if(Cu!==void 0)return Cu}if(_u.children){var Pu=function(Ru){for(var Lu=0;Lu<Ru.length;Lu++){var Ou=Ru[Lu];if(Ou.name===Tu||Ou.uuid===Tu)return Ou;var Du=Pu(Ou.children);if(Du)return Du}return null},Bu=Pu(_u.children);if(Bu)return Bu}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(Tu,Cu){Tu[Cu]=this.node[this.propertyName]},function(Tu,Cu){for(var Pu=this.resolvedProperty,Bu=0,Ru=Pu.length;Bu!==Ru;++Bu)Tu[Cu++]=Pu[Bu]},function(Tu,Cu){Tu[Cu]=this.resolvedProperty[this.propertyIndex]},function(Tu,Cu){this.resolvedProperty.toArray(Tu,Cu)}],SetterByBindingTypeAndVersioning:[[function(Tu,Cu){this.targetObject[this.propertyName]=Tu[Cu]},function(Tu,Cu){this.targetObject[this.propertyName]=Tu[Cu],this.targetObject.needsUpdate=!0},function(Tu,Cu){this.targetObject[this.propertyName]=Tu[Cu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Tu,Cu){for(var Pu=this.resolvedProperty,Bu=0,Ru=Pu.length;Bu!==Ru;++Bu)Pu[Bu]=Tu[Cu++]},function(Tu,Cu){for(var Pu=this.resolvedProperty,Bu=0,Ru=Pu.length;Bu!==Ru;++Bu)Pu[Bu]=Tu[Cu++];this.targetObject.needsUpdate=!0},function(Tu,Cu){for(var Pu=this.resolvedProperty,Bu=0,Ru=Pu.length;Bu!==Ru;++Bu)Pu[Bu]=Tu[Cu++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Tu,Cu){this.resolvedProperty[this.propertyIndex]=Tu[Cu]},function(Tu,Cu){this.resolvedProperty[this.propertyIndex]=Tu[Cu],this.targetObject.needsUpdate=!0},function(Tu,Cu){this.resolvedProperty[this.propertyIndex]=Tu[Cu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Tu,Cu){this.resolvedProperty.fromArray(Tu,Cu)},function(Tu,Cu){this.resolvedProperty.fromArray(Tu,Cu),this.targetObject.needsUpdate=!0},function(Tu,Cu){this.resolvedProperty.fromArray(Tu,Cu),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(Tu,Cu){this.bind(),this.getValue(Tu,Cu)},setValue:function(Tu,Cu){this.bind(),this.setValue(Tu,Cu)},bind:function(){var _u=this.node,Tu=this.parsedPath,Cu=Tu.objectName,Pu=Tu.propertyName,Bu=Tu.propertyIndex;if(_u||(_u=PropertyBinding.findNode(this.rootNode,Tu.nodeName)||this.rootNode,this.node=_u),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_u){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(Cu){var Ru=Tu.objectIndex;switch(Cu){case"materials":if(!_u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_u=_u.material.materials;break;case"bones":if(!_u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_u=_u.skeleton.bones;for(var Lu=0;Lu<_u.length;Lu++)if(_u[Lu].name===Ru){Ru=Lu;break}break;default:if(_u[Cu]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_u=_u[Cu]}if(Ru!==void 0){if(_u[Ru]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_u);return}_u=_u[Ru]}}var Ou=_u[Pu];if(Ou===void 0){var Du=Tu.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Du+"."+Pu+" but it wasn't found.",_u);return}var $u=this.Versioning.None;this.targetObject=_u,_u.needsUpdate!==void 0?$u=this.Versioning.NeedsUpdate:_u.matrixWorldNeedsUpdate!==void 0&&($u=this.Versioning.MatrixWorldNeedsUpdate);var ku=this.BindingType.Direct;if(Bu!==void 0){if(Pu==="morphTargetInfluences"){if(!_u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(_u.geometry.isBufferGeometry){if(!_u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_u.morphTargetDictionary[Bu]!==void 0&&(Bu=_u.morphTargetDictionary[Bu])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}ku=this.BindingType.ArrayElement,this.resolvedProperty=Ou,this.propertyIndex=Bu}else Ou.fromArray!==void 0&&Ou.toArray!==void 0?(ku=this.BindingType.HasFromToArray,this.resolvedProperty=Ou):Array.isArray(Ou)?(ku=this.BindingType.EntireArray,this.resolvedProperty=Ou):this.propertyName=Pu;this.getValue=this.GetterByBindingType[ku],this.setValue=this.SetterByBindingTypeAndVersioning[ku][$u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var _u={};this._indicesByUUID=_u;for(var Tu=0,Cu=arguments.length;Tu!==Cu;++Tu)_u[arguments[Tu].uuid]=Tu;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Pu=this;this.stats={objects:{get total(){return Pu._objects.length},get inUse(){return this.total-Pu.nCachedObjects_}},get bindingsPerObject(){return Pu._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var _u=this._objects,Tu=_u.length,Cu=this.nCachedObjects_,Pu=this._indicesByUUID,Bu=this._paths,Ru=this._parsedPaths,Lu=this._bindings,Ou=Lu.length,Du=void 0,$u=0,ku=arguments.length;$u!==ku;++$u){var Fu=arguments[$u],Nu=Fu.uuid,Vu=Pu[Nu];if(Vu===void 0){Vu=Tu++,Pu[Nu]=Vu,_u.push(Fu);for(var Gu=0,Hu=Ou;Gu!==Hu;++Gu)Lu[Gu].push(new PropertyBinding(Fu,Bu[Gu],Ru[Gu]))}else if(Vu<Cu){Du=_u[Vu];var ju=--Cu,Uu=_u[ju];Pu[Uu.uuid]=Vu,_u[Vu]=Uu,Pu[Nu]=ju,_u[ju]=Fu;for(var Gu=0,Hu=Ou;Gu!==Hu;++Gu){var zu=Lu[Gu],Wu=zu[ju],Qu=zu[Vu];zu[Vu]=Wu,Qu===void 0&&(Qu=new PropertyBinding(Fu,Bu[Gu],Ru[Gu])),zu[ju]=Qu}}else _u[Vu]!==Du&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Cu},remove:function(){for(var _u=this._objects,Tu=this.nCachedObjects_,Cu=this._indicesByUUID,Pu=this._bindings,Bu=Pu.length,Ru=0,Lu=arguments.length;Ru!==Lu;++Ru){var Ou=arguments[Ru],Du=Ou.uuid,$u=Cu[Du];if($u!==void 0&&$u>=Tu){var ku=Tu++,Fu=_u[ku];Cu[Fu.uuid]=$u,_u[$u]=Fu,Cu[Du]=ku,_u[ku]=Ou;for(var Nu=0,Vu=Bu;Nu!==Vu;++Nu){var Gu=Pu[Nu],Hu=Gu[ku],ju=Gu[$u];Gu[$u]=Hu,Gu[ku]=ju}}}this.nCachedObjects_=Tu},uncache:function(){for(var _u=this._objects,Tu=_u.length,Cu=this.nCachedObjects_,Pu=this._indicesByUUID,Bu=this._bindings,Ru=Bu.length,Lu=0,Ou=arguments.length;Lu!==Ou;++Lu){var Du=arguments[Lu],$u=Du.uuid,ku=Pu[$u];if(ku!==void 0)if(delete Pu[$u],ku<Cu){var Fu=--Cu,Nu=_u[Fu],Vu=--Tu,Gu=_u[Vu];Pu[Nu.uuid]=ku,_u[ku]=Nu,Pu[Gu.uuid]=Fu,_u[Fu]=Gu,_u.pop();for(var Hu=0,ju=Ru;Hu!==ju;++Hu){var Uu=Bu[Hu],zu=Uu[Fu],Wu=Uu[Vu];Uu[ku]=zu,Uu[Fu]=Wu,Uu.pop()}}else{var Vu=--Tu,Gu=_u[Vu];Pu[Gu.uuid]=ku,_u[ku]=Gu,_u.pop();for(var Hu=0,ju=Ru;Hu!==ju;++Hu){var Uu=Bu[Hu];Uu[ku]=Uu[Vu],Uu.pop()}}}this.nCachedObjects_=Cu},subscribe_:function(_u,Tu){var Cu=this._bindingsIndicesByPath,Pu=Cu[_u],Bu=this._bindings;if(Pu!==void 0)return Bu[Pu];var Ru=this._paths,Lu=this._parsedPaths,Ou=this._objects,Du=Ou.length,$u=this.nCachedObjects_,ku=new Array(Du);Pu=Bu.length,Cu[_u]=Pu,Ru.push(_u),Lu.push(Tu),Bu.push(ku);for(var Fu=$u,Nu=Ou.length;Fu!==Nu;++Fu){var Vu=Ou[Fu];ku[Fu]=new PropertyBinding(Vu,_u,Tu)}return ku},unsubscribe_:function(_u){var Tu=this._bindingsIndicesByPath,Cu=Tu[_u];if(Cu!==void 0){var Pu=this._paths,Bu=this._parsedPaths,Ru=this._bindings,Lu=Ru.length-1,Ou=Ru[Lu],Du=_u[Lu];Tu[Du]=Cu,Ru[Cu]=Ou,Ru.pop(),Bu[Cu]=Bu[Lu],Bu.pop(),Pu[Cu]=Pu[Lu],Pu.pop()}}});function AnimationAction(_u,Tu,Cu,Pu){this._mixer=_u,this._clip=Tu,this._localRoot=Cu||null,this.blendMode=Pu||Tu.blendMode;for(var Bu=Tu.tracks,Ru=Bu.length,Lu=new Array(Ru),Ou={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Du=0;Du!==Ru;++Du){var $u=Bu[Du].createInterpolant(null);Lu[Du]=$u,$u.settings=Ou}this._interpolantSettings=Ou,this._interpolants=Lu,this._propertyBindings=new Array(Ru),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(_u){return this._startTime=_u,this},setLoop:function(_u,Tu){return this.loop=_u,this.repetitions=Tu,this},setEffectiveWeight:function(_u){return this.weight=_u,this._effectiveWeight=this.enabled?_u:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(_u){return this._scheduleFading(_u,0,1)},fadeOut:function(_u){return this._scheduleFading(_u,1,0)},crossFadeFrom:function(_u,Tu,Cu){if(_u.fadeOut(Tu),this.fadeIn(Tu),Cu){var Pu=this._clip.duration,Bu=_u._clip.duration,Ru=Bu/Pu,Lu=Pu/Bu;_u.warp(1,Ru,Tu),this.warp(Lu,1,Tu)}return this},crossFadeTo:function(_u,Tu,Cu){return _u.crossFadeFrom(this,Tu,Cu)},stopFading:function(){var _u=this._weightInterpolant;return _u!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},setEffectiveTimeScale:function(_u){return this.timeScale=_u,this._effectiveTimeScale=this.paused?0:_u,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(_u){return this.timeScale=this._clip.duration/_u,this.stopWarping()},syncWith:function(_u){return this.time=_u.time,this.timeScale=_u.timeScale,this.stopWarping()},halt:function(_u){return this.warp(this._effectiveTimeScale,0,_u)},warp:function(_u,Tu,Cu){var Pu=this._mixer,Bu=Pu.time,Ru=this._timeScaleInterpolant,Lu=this.timeScale;Ru===null&&(Ru=Pu._lendControlInterpolant(),this._timeScaleInterpolant=Ru);var Ou=Ru.parameterPositions,Du=Ru.sampleValues;return Ou[0]=Bu,Ou[1]=Bu+Cu,Du[0]=_u/Lu,Du[1]=Tu/Lu,this},stopWarping:function(){var _u=this._timeScaleInterpolant;return _u!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(_u,Tu,Cu,Pu){if(!this.enabled){this._updateWeight(_u);return}var Bu=this._startTime;if(Bu!==null){var Ru=(_u-Bu)*Cu;if(Ru<0||Cu===0)return;this._startTime=null,Tu=Cu*Ru}Tu*=this._updateTimeScale(_u);var Lu=this._updateTime(Tu),Ou=this._updateWeight(_u);if(Ou>0){var Du=this._interpolants,$u=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var ku=0,Fu=Du.length;ku!==Fu;++ku)Du[ku].evaluate(Lu),$u[ku].accumulateAdditive(Ou);break;case NormalAnimationBlendMode:default:for(var ku=0,Fu=Du.length;ku!==Fu;++ku)Du[ku].evaluate(Lu),$u[ku].accumulate(Pu,Ou)}}},_updateWeight:function(_u){var Tu=0;if(this.enabled){Tu=this.weight;var Cu=this._weightInterpolant;if(Cu!==null){var Pu=Cu.evaluate(_u)[0];Tu*=Pu,_u>Cu.parameterPositions[1]&&(this.stopFading(),Pu===0&&(this.enabled=!1))}}return this._effectiveWeight=Tu,Tu},_updateTimeScale:function(_u){var Tu=0;if(!this.paused){Tu=this.timeScale;var Cu=this._timeScaleInterpolant;if(Cu!==null){var Pu=Cu.evaluate(_u)[0];Tu*=Pu,_u>Cu.parameterPositions[1]&&(this.stopWarping(),Tu===0?this.paused=!0:this.timeScale=Tu)}}return this._effectiveTimeScale=Tu,Tu},_updateTime:function(_u){var Tu=this.time+_u,Cu=this._clip.duration,Pu=this.loop,Bu=this._loopCount,Ru=Pu===LoopPingPong;if(_u===0)return Bu===-1?Tu:Ru&&(Bu&1)===1?Cu-Tu:Tu;if(Pu===LoopOnce){Bu===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(Tu>=Cu)Tu=Cu;else if(Tu<0)Tu=0;else{this.time=Tu;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=Tu,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u<0?-1:1})}}else{if(Bu===-1&&(_u>=0?(Bu=0,this._setEndings(!0,this.repetitions===0,Ru)):this._setEndings(this.repetitions===0,!0,Ru)),Tu>=Cu||Tu<0){var Lu=Math.floor(Tu/Cu);Tu-=Cu*Lu,Bu+=Math.abs(Lu);var Ou=this.repetitions-Bu;if(Ou<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,Tu=_u>0?Cu:0,this.time=Tu,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u>0?1:-1});else{if(Ou===1){var Du=_u<0;this._setEndings(Du,!Du,Ru)}else this._setEndings(!1,!1,Ru);this._loopCount=Bu,this.time=Tu,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Lu})}}else this.time=Tu;if(Ru&&(Bu&1)===1)return Cu-Tu}return Tu},_setEndings:function(_u,Tu,Cu){var Pu=this._interpolantSettings;Cu?(Pu.endingStart=ZeroSlopeEnding,Pu.endingEnd=ZeroSlopeEnding):(_u?Pu.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Pu.endingStart=WrapAroundEnding,Tu?Pu.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Pu.endingEnd=WrapAroundEnding)},_scheduleFading:function(_u,Tu,Cu){var Pu=this._mixer,Bu=Pu.time,Ru=this._weightInterpolant;Ru===null&&(Ru=Pu._lendControlInterpolant(),this._weightInterpolant=Ru);var Lu=Ru.parameterPositions,Ou=Ru.sampleValues;return Lu[0]=Bu,Ou[0]=Tu,Lu[1]=Bu+_u,Ou[1]=Cu,this}});function AnimationMixer(_u){this._root=_u,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(_u,Tu){var Cu=_u._localRoot||this._root,Pu=_u._clip.tracks,Bu=Pu.length,Ru=_u._propertyBindings,Lu=_u._interpolants,Ou=Cu.uuid,Du=this._bindingsByRootAndName,$u=Du[Ou];$u===void 0&&($u={},Du[Ou]=$u);for(var ku=0;ku!==Bu;++ku){var Fu=Pu[ku],Nu=Fu.name,Vu=$u[Nu];if(Vu!==void 0)Ru[ku]=Vu;else{if(Vu=Ru[ku],Vu!==void 0){Vu._cacheIndex===null&&(++Vu.referenceCount,this._addInactiveBinding(Vu,Ou,Nu));continue}var Gu=Tu&&Tu._propertyBindings[ku].binding.parsedPath;Vu=new PropertyMixer(PropertyBinding.create(Cu,Nu,Gu),Fu.ValueTypeName,Fu.getValueSize()),++Vu.referenceCount,this._addInactiveBinding(Vu,Ou,Nu),Ru[ku]=Vu}Lu[ku].resultBuffer=Vu.buffer}},_activateAction:function(_u){if(!this._isActiveAction(_u)){if(_u._cacheIndex===null){var Tu=(_u._localRoot||this._root).uuid,Cu=_u._clip.uuid,Pu=this._actionsByClip[Cu];this._bindAction(_u,Pu&&Pu.knownActions[0]),this._addInactiveAction(_u,Cu,Tu)}for(var Bu=_u._propertyBindings,Ru=0,Lu=Bu.length;Ru!==Lu;++Ru){var Ou=Bu[Ru];Ou.useCount++===0&&(this._lendBinding(Ou),Ou.saveOriginalState())}this._lendAction(_u)}},_deactivateAction:function(_u){if(this._isActiveAction(_u)){for(var Tu=_u._propertyBindings,Cu=0,Pu=Tu.length;Cu!==Pu;++Cu){var Bu=Tu[Cu];--Bu.useCount===0&&(Bu.restoreOriginalState(),this._takeBackBinding(Bu))}this._takeBackAction(_u)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var _u=this;this.stats={actions:{get total(){return _u._actions.length},get inUse(){return _u._nActiveActions}},bindings:{get total(){return _u._bindings.length},get inUse(){return _u._nActiveBindings}},controlInterpolants:{get total(){return _u._controlInterpolants.length},get inUse(){return _u._nActiveControlInterpolants}}}},_isActiveAction:function(_u){var Tu=_u._cacheIndex;return Tu!==null&&Tu<this._nActiveActions},_addInactiveAction:function(_u,Tu,Cu){var Pu=this._actions,Bu=this._actionsByClip,Ru=Bu[Tu];if(Ru===void 0)Ru={knownActions:[_u],actionByRoot:{}},_u._byClipCacheIndex=0,Bu[Tu]=Ru;else{var Lu=Ru.knownActions;_u._byClipCacheIndex=Lu.length,Lu.push(_u)}_u._cacheIndex=Pu.length,Pu.push(_u),Ru.actionByRoot[Cu]=_u},_removeInactiveAction:function(_u){var Tu=this._actions,Cu=Tu[Tu.length-1],Pu=_u._cacheIndex;Cu._cacheIndex=Pu,Tu[Pu]=Cu,Tu.pop(),_u._cacheIndex=null;var Bu=_u._clip.uuid,Ru=this._actionsByClip,Lu=Ru[Bu],Ou=Lu.knownActions,Du=Ou[Ou.length-1],$u=_u._byClipCacheIndex;Du._byClipCacheIndex=$u,Ou[$u]=Du,Ou.pop(),_u._byClipCacheIndex=null;var ku=Lu.actionByRoot,Fu=(_u._localRoot||this._root).uuid;delete ku[Fu],Ou.length===0&&delete Ru[Bu],this._removeInactiveBindingsForAction(_u)},_removeInactiveBindingsForAction:function(_u){for(var Tu=_u._propertyBindings,Cu=0,Pu=Tu.length;Cu!==Pu;++Cu){var Bu=Tu[Cu];--Bu.referenceCount===0&&this._removeInactiveBinding(Bu)}},_lendAction:function(_u){var Tu=this._actions,Cu=_u._cacheIndex,Pu=this._nActiveActions++,Bu=Tu[Pu];_u._cacheIndex=Pu,Tu[Pu]=_u,Bu._cacheIndex=Cu,Tu[Cu]=Bu},_takeBackAction:function(_u){var Tu=this._actions,Cu=_u._cacheIndex,Pu=--this._nActiveActions,Bu=Tu[Pu];_u._cacheIndex=Pu,Tu[Pu]=_u,Bu._cacheIndex=Cu,Tu[Cu]=Bu},_addInactiveBinding:function(_u,Tu,Cu){var Pu=this._bindingsByRootAndName,Bu=Pu[Tu],Ru=this._bindings;Bu===void 0&&(Bu={},Pu[Tu]=Bu),Bu[Cu]=_u,_u._cacheIndex=Ru.length,Ru.push(_u)},_removeInactiveBinding:function(_u){var Tu=this._bindings,Cu=_u.binding,Pu=Cu.rootNode.uuid,Bu=Cu.path,Ru=this._bindingsByRootAndName,Lu=Ru[Pu],Ou=Tu[Tu.length-1],Du=_u._cacheIndex;Ou._cacheIndex=Du,Tu[Du]=Ou,Tu.pop(),delete Lu[Bu],Object.keys(Lu).length===0&&delete Ru[Pu]},_lendBinding:function(_u){var Tu=this._bindings,Cu=_u._cacheIndex,Pu=this._nActiveBindings++,Bu=Tu[Pu];_u._cacheIndex=Pu,Tu[Pu]=_u,Bu._cacheIndex=Cu,Tu[Cu]=Bu},_takeBackBinding:function(_u){var Tu=this._bindings,Cu=_u._cacheIndex,Pu=--this._nActiveBindings,Bu=Tu[Pu];_u._cacheIndex=Pu,Tu[Pu]=_u,Bu._cacheIndex=Cu,Tu[Cu]=Bu},_lendControlInterpolant:function(){var _u=this._controlInterpolants,Tu=this._nActiveControlInterpolants++,Cu=_u[Tu];return Cu===void 0&&(Cu=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Cu.__cacheIndex=Tu,_u[Tu]=Cu),Cu},_takeBackControlInterpolant:function(_u){var Tu=this._controlInterpolants,Cu=_u.__cacheIndex,Pu=--this._nActiveControlInterpolants,Bu=Tu[Pu];_u.__cacheIndex=Pu,Tu[Pu]=_u,Bu.__cacheIndex=Cu,Tu[Cu]=Bu},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(_u,Tu,Cu){var Pu=Tu||this._root,Bu=Pu.uuid,Ru=typeof _u=="string"?AnimationClip.findByName(Pu,_u):_u,Lu=Ru!==null?Ru.uuid:_u,Ou=this._actionsByClip[Lu],Du=null;if(Cu===void 0&&(Ru!==null?Cu=Ru.blendMode:Cu=NormalAnimationBlendMode),Ou!==void 0){var $u=Ou.actionByRoot[Bu];if($u!==void 0&&$u.blendMode===Cu)return $u;Du=Ou.knownActions[0],Ru===null&&(Ru=Du._clip)}if(Ru===null)return null;var ku=new AnimationAction(this,Ru,Tu,Cu);return this._bindAction(ku,Du),this._addInactiveAction(ku,Lu,Bu),ku},existingAction:function(_u,Tu){var Cu=Tu||this._root,Pu=Cu.uuid,Bu=typeof _u=="string"?AnimationClip.findByName(Cu,_u):_u,Ru=Bu?Bu.uuid:_u,Lu=this._actionsByClip[Ru];return Lu!==void 0&&Lu.actionByRoot[Pu]||null},stopAllAction:function(){for(var _u=this._actions,Tu=this._nActiveActions,Cu=Tu-1;Cu>=0;--Cu)_u[Cu].stop();return this},update:function(_u){_u*=this.timeScale;for(var Tu=this._actions,Cu=this._nActiveActions,Pu=this.time+=_u,Bu=Math.sign(_u),Ru=this._accuIndex^=1,Lu=0;Lu!==Cu;++Lu){var Ou=Tu[Lu];Ou._update(Pu,_u,Bu,Ru)}for(var Du=this._bindings,$u=this._nActiveBindings,Lu=0;Lu!==$u;++Lu)Du[Lu].apply(Ru);return this},setTime:function(_u){this.time=0;for(var Tu=0;Tu<this._actions.length;Tu++)this._actions[Tu].time=0;return this.update(_u)},getRoot:function(){return this._root},uncacheClip:function(_u){var Tu=this._actions,Cu=_u.uuid,Pu=this._actionsByClip,Bu=Pu[Cu];if(Bu!==void 0){for(var Ru=Bu.knownActions,Lu=0,Ou=Ru.length;Lu!==Ou;++Lu){var Du=Ru[Lu];this._deactivateAction(Du);var $u=Du._cacheIndex,ku=Tu[Tu.length-1];Du._cacheIndex=null,Du._byClipCacheIndex=null,ku._cacheIndex=$u,Tu[$u]=ku,Tu.pop(),this._removeInactiveBindingsForAction(Du)}delete Pu[Cu]}},uncacheRoot:function(_u){var Tu=_u.uuid,Cu=this._actionsByClip;for(var Pu in Cu){var Bu=Cu[Pu].actionByRoot,Ru=Bu[Tu];Ru!==void 0&&(this._deactivateAction(Ru),this._removeInactiveAction(Ru))}var Lu=this._bindingsByRootAndName,Ou=Lu[Tu];if(Ou!==void 0)for(var Du in Ou){var $u=Ou[Du];$u.restoreOriginalState(),this._removeInactiveBinding($u)}},uncacheAction:function(_u,Tu){var Cu=this.existingAction(_u,Tu);Cu!==null&&(this._deactivateAction(Cu),this._removeInactiveAction(Cu))}});function Uniform(_u){typeof _u=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),_u=arguments[1]),this.value=_u}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(_u,Tu,Cu){InterleavedBuffer.call(this,_u,Tu),this.meshPerAttribute=Cu||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(_u){return InterleavedBuffer.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this}});function Raycaster(_u,Tu,Cu,Pu){this.ray=new Ray(_u,Tu),this.near=Cu||0,this.far=Pu||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(_u,Tu){return _u.distance-Tu.distance}function intersectObject(_u,Tu,Cu,Pu){if(_u.layers.test(Tu.layers)&&_u.raycast(Tu,Cu),Pu===!0)for(var Bu=_u.children,Ru=0,Lu=Bu.length;Ru<Lu;Ru++)intersectObject(Bu[Ru],Tu,Cu,!0)}Object.assign(Raycaster.prototype,{set:function(_u,Tu){this.ray.set(_u,Tu)},setFromCamera:function(_u,Tu){Tu&&Tu.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(Tu.matrixWorld),this.ray.direction.set(_u.x,_u.y,.5).unproject(Tu).sub(this.ray.origin).normalize(),this.camera=Tu):Tu&&Tu.isOrthographicCamera?(this.ray.origin.set(_u.x,_u.y,(Tu.near+Tu.far)/(Tu.near-Tu.far)).unproject(Tu),this.ray.direction.set(0,0,-1).transformDirection(Tu.matrixWorld),this.camera=Tu):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(_u,Tu,Cu){var Pu=Cu||[];return intersectObject(_u,this,Pu,Tu),Pu.sort(ascSort),Pu},intersectObjects:function(_u,Tu,Cu){var Pu=Cu||[];if(Array.isArray(_u)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Pu;for(var Bu=0,Ru=_u.length;Bu<Ru;Bu++)intersectObject(_u[Bu],this,Pu,Tu);return Pu.sort(ascSort),Pu}});function Spherical(_u,Tu,Cu){return this.radius=_u!==void 0?_u:1,this.phi=Tu!==void 0?Tu:0,this.theta=Cu!==void 0?Cu:0,this}Object.assign(Spherical.prototype,{set:function(_u,Tu,Cu){return this.radius=_u,this.phi=Tu,this.theta=Cu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.phi=_u.phi,this.theta=_u.theta,this},makeSafe:function(){var _u=1e-6;return this.phi=Math.max(_u,Math.min(Math.PI-_u,this.phi)),this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,Tu,Cu){return this.radius=Math.sqrt(_u*_u+Tu*Tu+Cu*Cu),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_u,Cu),this.phi=Math.acos(MathUtils.clamp(Tu/this.radius,-1,1))),this}});function Cylindrical(_u,Tu,Cu){return this.radius=_u!==void 0?_u:1,this.theta=Tu!==void 0?Tu:0,this.y=Cu!==void 0?Cu:0,this}Object.assign(Cylindrical.prototype,{set:function(_u,Tu,Cu){return this.radius=_u,this.theta=Tu,this.y=Cu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.theta=_u.theta,this.y=_u.y,this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,Tu,Cu){return this.radius=Math.sqrt(_u*_u+Cu*Cu),this.theta=Math.atan2(_u,Cu),this.y=Tu,this}});var _vector$7=new Vector2;function Box2(_u,Tu){this.min=_u!==void 0?_u:new Vector2(1/0,1/0),this.max=Tu!==void 0?Tu:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(_u,Tu){return this.min.copy(_u),this.max.copy(Tu),this},setFromPoints:function(_u){this.makeEmpty();for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++)this.expandByPoint(_u[Tu]);return this},setFromCenterAndSize:function(_u,Tu){var Cu=_vector$7.copy(Tu).multiplyScalar(.5);return this.min.copy(_u).sub(Cu),this.max.copy(_u).add(Cu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y},getParameter:function(_u,Tu){return Tu===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),Tu=new Vector2),Tu.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y)},clampPoint:function(_u,Tu){return Tu===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),Tu=new Vector2),Tu.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var Tu=_vector$7.copy(_u).clamp(this.min,this.max);return Tu.sub(_u).length()},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(_u,Tu){this.start=_u!==void 0?_u:new Vector3,this.end=Tu!==void 0?Tu:new Vector3}Object.assign(Line3.prototype,{set:function(_u,Tu){return this.start.copy(_u),this.end.copy(Tu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.start.copy(_u.start),this.end.copy(_u.end),this},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),_u=new Vector3),_u.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),_u=new Vector3),_u.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(_u,Tu){return Tu===void 0&&(console.warn("THREE.Line3: .at() target is now required"),Tu=new Vector3),this.delta(Tu).multiplyScalar(_u).add(this.start)},closestPointToPointParameter:function(_u,Tu){_startP.subVectors(_u,this.start),_startEnd.subVectors(this.end,this.start);var Cu=_startEnd.dot(_startEnd),Pu=_startEnd.dot(_startP),Bu=Pu/Cu;return Tu&&(Bu=MathUtils.clamp(Bu,0,1)),Bu},closestPointToPoint:function(_u,Tu,Cu){var Pu=this.closestPointToPointParameter(_u,Tu);return Cu===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),Cu=new Vector3),this.delta(Cu).multiplyScalar(Pu).add(this.start)},applyMatrix4:function(_u){return this.start.applyMatrix4(_u),this.end.applyMatrix4(_u),this},equals:function(_u){return _u.start.equals(this.start)&&_u.end.equals(this.end)}});function ImmediateRenderObject(_u){Object3D.call(this),this.material=_u,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(_u,Tu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Tu;for(var Cu=new BufferGeometry,Pu=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Bu=0,Ru=1,Lu=32;Bu<Lu;Bu++,Ru++){var Ou=Bu/Lu*Math.PI*2,Du=Ru/Lu*Math.PI*2;Pu.push(Math.cos(Ou),Math.sin(Ou),1,Math.cos(Du),Math.sin(Du),1)}Cu.setAttribute("position",new Float32BufferAttribute(Pu,3));var $u=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Cu,$u),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var _u=this.light.distance?this.light.distance:1e3,Tu=_u*Math.tan(this.light.angle);this.cone.scale.set(Tu,Tu,_u),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(_u){var Tu=[];_u&&_u.isBone&&Tu.push(_u);for(var Cu=0;Cu<_u.children.length;Cu++)Tu.push.apply(Tu,getBoneList(_u.children[Cu]));return Tu}function SkeletonHelper(_u){for(var Tu=getBoneList(_u),Cu=new BufferGeometry,Pu=[],Bu=[],Ru=new Color(0,0,1),Lu=new Color(0,1,0),Ou=0;Ou<Tu.length;Ou++){var Du=Tu[Ou];Du.parent&&Du.parent.isBone&&(Pu.push(0,0,0),Pu.push(0,0,0),Bu.push(Ru.r,Ru.g,Ru.b),Bu.push(Lu.r,Lu.g,Lu.b))}Cu.setAttribute("position",new Float32BufferAttribute(Pu,3)),Cu.setAttribute("color",new Float32BufferAttribute(Bu,3));var $u=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,Cu,$u),this.type="SkeletonHelper",this.root=_u,this.bones=Tu,this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(_u){var Tu=this.bones,Cu=this.geometry,Pu=Cu.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Bu=0,Ru=0;Bu<Tu.length;Bu++){var Lu=Tu[Bu];Lu.parent&&Lu.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Lu.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Pu.setXYZ(Ru,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Lu.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Pu.setXYZ(Ru+1,_vector$9.x,_vector$9.y,_vector$9.z),Ru+=2)}Cu.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,_u)};function PointLightHelper(_u,Tu,Cu){this.light=_u,this.light.updateMatrixWorld(),this.color=Cu;var Pu=new SphereBufferGeometry(Tu,4,2),Bu=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Pu,Bu),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(_u,Tu,Cu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Cu;var Pu=new OctahedronBufferGeometry(Tu);Pu.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Bu=Pu.getAttribute("position"),Ru=new Float32Array(Bu.count*3);Pu.setAttribute("color",new BufferAttribute(Ru,3)),this.add(new Mesh(Pu,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var _u=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var Tu=_u.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var Cu=0,Pu=Tu.count;Cu<Pu;Cu++){var Bu=Cu<Pu/2?_color1:_color2;Tu.setXYZ(Cu,Bu.r,Bu.g,Bu.b)}Tu.needsUpdate=!0}_u.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(_u,Tu,Cu,Pu){_u=_u||10,Tu=Tu||10,Cu=new Color(Cu!==void 0?Cu:4473924),Pu=new Color(Pu!==void 0?Pu:8947848);for(var Bu=Tu/2,Ru=_u/Tu,Lu=_u/2,Ou=[],Du=[],$u=0,ku=0,Fu=-Lu;$u<=Tu;$u++,Fu+=Ru){Ou.push(-Lu,0,Fu,Lu,0,Fu),Ou.push(Fu,0,-Lu,Fu,0,Lu);var Nu=$u===Bu?Cu:Pu;Nu.toArray(Du,ku),ku+=3,Nu.toArray(Du,ku),ku+=3,Nu.toArray(Du,ku),ku+=3,Nu.toArray(Du,ku),ku+=3}var Vu=new BufferGeometry;Vu.setAttribute("position",new Float32BufferAttribute(Ou,3)),Vu.setAttribute("color",new Float32BufferAttribute(Du,3));var Gu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Vu,Gu),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(_u){return LineSegments.prototype.copy.call(this,_u),this.geometry.copy(_u.geometry),this.material.copy(_u.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(_u,Tu,Cu,Pu,Bu,Ru){_u=_u||10,Tu=Tu||16,Cu=Cu||8,Pu=Pu||64,Bu=new Color(Bu!==void 0?Bu:4473924),Ru=new Color(Ru!==void 0?Ru:8947848);var Lu=[],Ou=[],Du,$u,ku,Fu,Nu,Vu,Gu;for(Fu=0;Fu<=Tu;Fu++)ku=Fu/Tu*(Math.PI*2),Du=Math.sin(ku)*_u,$u=Math.cos(ku)*_u,Lu.push(0,0,0),Lu.push(Du,0,$u),Gu=Fu&1?Bu:Ru,Ou.push(Gu.r,Gu.g,Gu.b),Ou.push(Gu.r,Gu.g,Gu.b);for(Fu=0;Fu<=Cu;Fu++)for(Gu=Fu&1?Bu:Ru,Vu=_u-_u/Cu*Fu,Nu=0;Nu<Pu;Nu++)ku=Nu/Pu*(Math.PI*2),Du=Math.sin(ku)*Vu,$u=Math.cos(ku)*Vu,Lu.push(Du,0,$u),Ou.push(Gu.r,Gu.g,Gu.b),ku=(Nu+1)/Pu*(Math.PI*2),Du=Math.sin(ku)*Vu,$u=Math.cos(ku)*Vu,Lu.push(Du,0,$u),Ou.push(Gu.r,Gu.g,Gu.b);var Hu=new BufferGeometry;Hu.setAttribute("position",new Float32BufferAttribute(Lu,3)),Hu.setAttribute("color",new Float32BufferAttribute(Ou,3));var ju=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Hu,ju),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(_u,Tu,Cu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Cu,Tu===void 0&&(Tu=1);var Pu=new BufferGeometry;Pu.setAttribute("position",new Float32BufferAttribute([-Tu,Tu,0,Tu,Tu,0,Tu,-Tu,0,-Tu,-Tu,0,-Tu,Tu,0],3));var Bu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Pu,Bu),this.add(this.lightPlane),Pu=new BufferGeometry,Pu.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Pu,Bu),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(_u){var Tu=new BufferGeometry,Cu=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Pu=[],Bu=[],Ru={},Lu=new Color(16755200),Ou=new Color(16711680),Du=new Color(43775),$u=new Color(16777215),ku=new Color(3355443);Fu("n1","n2",Lu),Fu("n2","n4",Lu),Fu("n4","n3",Lu),Fu("n3","n1",Lu),Fu("f1","f2",Lu),Fu("f2","f4",Lu),Fu("f4","f3",Lu),Fu("f3","f1",Lu),Fu("n1","f1",Lu),Fu("n2","f2",Lu),Fu("n3","f3",Lu),Fu("n4","f4",Lu),Fu("p","n1",Ou),Fu("p","n2",Ou),Fu("p","n3",Ou),Fu("p","n4",Ou),Fu("u1","u2",Du),Fu("u2","u3",Du),Fu("u3","u1",Du),Fu("c","t",$u),Fu("p","c",ku),Fu("cn1","cn2",ku),Fu("cn3","cn4",ku),Fu("cf1","cf2",ku),Fu("cf3","cf4",ku);function Fu(Vu,Gu,Hu){Nu(Vu,Hu),Nu(Gu,Hu)}function Nu(Vu,Gu){Pu.push(0,0,0),Bu.push(Gu.r,Gu.g,Gu.b),Ru[Vu]===void 0&&(Ru[Vu]=[]),Ru[Vu].push(Pu.length/3-1)}Tu.setAttribute("position",new Float32BufferAttribute(Pu,3)),Tu.setAttribute("color",new Float32BufferAttribute(Bu,3)),LineSegments.call(this,Tu,Cu),this.type="CameraHelper",this.camera=_u,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ru,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var _u=this.geometry,Tu=this.pointMap,Cu=1,Pu=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",Tu,_u,_camera,0,0,-1),setPoint("t",Tu,_u,_camera,0,0,1),setPoint("n1",Tu,_u,_camera,-Cu,-Pu,-1),setPoint("n2",Tu,_u,_camera,Cu,-Pu,-1),setPoint("n3",Tu,_u,_camera,-Cu,Pu,-1),setPoint("n4",Tu,_u,_camera,Cu,Pu,-1),setPoint("f1",Tu,_u,_camera,-Cu,-Pu,1),setPoint("f2",Tu,_u,_camera,Cu,-Pu,1),setPoint("f3",Tu,_u,_camera,-Cu,Pu,1),setPoint("f4",Tu,_u,_camera,Cu,Pu,1),setPoint("u1",Tu,_u,_camera,Cu*.7,Pu*1.1,-1),setPoint("u2",Tu,_u,_camera,-Cu*.7,Pu*1.1,-1),setPoint("u3",Tu,_u,_camera,0,Pu*2,-1),setPoint("cf1",Tu,_u,_camera,-Cu,0,1),setPoint("cf2",Tu,_u,_camera,Cu,0,1),setPoint("cf3",Tu,_u,_camera,0,-Pu,1),setPoint("cf4",Tu,_u,_camera,0,Pu,1),setPoint("cn1",Tu,_u,_camera,-Cu,0,-1),setPoint("cn2",Tu,_u,_camera,Cu,0,-1),setPoint("cn3",Tu,_u,_camera,0,-Pu,-1),setPoint("cn4",Tu,_u,_camera,0,Pu,-1),_u.getAttribute("position").needsUpdate=!0};function setPoint(_u,Tu,Cu,Pu,Bu,Ru,Lu){_vector$b.set(Bu,Ru,Lu).unproject(Pu);var Ou=Tu[_u];if(Ou!==void 0)for(var Du=Cu.getAttribute("position"),$u=0,ku=Ou.length;$u<ku;$u++)Du.setXYZ(Ou[$u],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(_u,Tu){this.object=_u,Tu===void 0&&(Tu=16776960);var Cu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Pu=new Float32Array(8*3),Bu=new BufferGeometry;Bu.setIndex(new BufferAttribute(Cu,1)),Bu.setAttribute("position",new BufferAttribute(Pu,3)),LineSegments.call(this,Bu,new LineBasicMaterial({color:Tu,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(_u){if(_u!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var Tu=_box$3.min,Cu=_box$3.max,Pu=this.geometry.attributes.position,Bu=Pu.array;Bu[0]=Cu.x,Bu[1]=Cu.y,Bu[2]=Cu.z,Bu[3]=Tu.x,Bu[4]=Cu.y,Bu[5]=Cu.z,Bu[6]=Tu.x,Bu[7]=Tu.y,Bu[8]=Cu.z,Bu[9]=Cu.x,Bu[10]=Tu.y,Bu[11]=Cu.z,Bu[12]=Cu.x,Bu[13]=Cu.y,Bu[14]=Tu.z,Bu[15]=Tu.x,Bu[16]=Cu.y,Bu[17]=Tu.z,Bu[18]=Tu.x,Bu[19]=Tu.y,Bu[20]=Tu.z,Bu[21]=Cu.x,Bu[22]=Tu.y,Bu[23]=Tu.z,Pu.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(_u){return this.object=_u,this.update(),this};BoxHelper.prototype.copy=function(_u){return LineSegments.prototype.copy.call(this,_u),this.object=_u.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(_u,Tu){this.type="Box3Helper",this.box=_u,Tu=Tu||16776960;var Cu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Pu=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Bu=new BufferGeometry;Bu.setIndex(new BufferAttribute(Cu,1)),Bu.setAttribute("position",new Float32BufferAttribute(Pu,3)),LineSegments.call(this,Bu,new LineBasicMaterial({color:Tu,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(_u){var Tu=this.box;Tu.isEmpty()||(Tu.getCenter(this.position),Tu.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,_u))};function PlaneHelper(_u,Tu,Cu){this.plane=_u,this.size=Tu===void 0?1:Tu;var Pu=Cu!==void 0?Cu:16776960,Bu=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Ru=new BufferGeometry;Ru.setAttribute("position",new Float32BufferAttribute(Bu,3)),Ru.computeBoundingSphere(),Line$1.call(this,Ru,new LineBasicMaterial({color:Pu,toneMapped:!1})),this.type="PlaneHelper";var Lu=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Ou=new BufferGeometry;Ou.setAttribute("position",new Float32BufferAttribute(Lu,3)),Ou.computeBoundingSphere(),this.add(new Mesh(Ou,new MeshBasicMaterial({color:Pu,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(_u){var Tu=-this.plane.constant;Math.abs(Tu)<1e-8&&(Tu=1e-8),this.scale.set(.5*this.size,.5*this.size,Tu),this.children[0].material.side=Tu<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,_u)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(_u,Tu,Cu,Pu,Bu,Ru){Object3D.call(this),this.type="ArrowHelper",_u===void 0&&(_u=new Vector3(0,0,1)),Tu===void 0&&(Tu=new Vector3(0,0,0)),Cu===void 0&&(Cu=1),Pu===void 0&&(Pu=16776960),Bu===void 0&&(Bu=.2*Cu),Ru===void 0&&(Ru=.2*Bu),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(Tu),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Pu,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Pu,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_u),this.setLength(Cu,Bu,Ru)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(_u){if(_u.y>.99999)this.quaternion.set(0,0,0,1);else if(_u.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_u.z,0,-_u.x).normalize();var Tu=Math.acos(_u.y);this.quaternion.setFromAxisAngle(_axis,Tu)}};ArrowHelper.prototype.setLength=function(_u,Tu,Cu){Tu===void 0&&(Tu=.2*_u),Cu===void 0&&(Cu=.2*Tu),this.line.scale.set(1,Math.max(1e-4,_u-Tu),1),this.line.updateMatrix(),this.cone.scale.set(Cu,Tu,Cu),this.cone.position.y=_u,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(_u){this.line.material.color.set(_u),this.cone.material.color.set(_u)};ArrowHelper.prototype.copy=function(_u){return Object3D.prototype.copy.call(this,_u,!1),this.line.copy(_u.line),this.cone.copy(_u.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(_u){_u=_u||1;var Tu=[0,0,0,_u,0,0,0,0,0,0,_u,0,0,0,0,0,0,_u],Cu=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Pu=new BufferGeometry;Pu.setAttribute("position",new Float32BufferAttribute(Tu,3)),Pu.setAttribute("color",new Float32BufferAttribute(Cu,3));var Bu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Pu,Bu),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(_u){this._renderer=_u,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(_u,Tu=0,Cu=.1,Pu=100){_oldTarget=this._renderer.getRenderTarget();var Bu=this._allocateTargets();return this._sceneToCubeUV(_u,Cu,Pu,Bu),Tu>0&&this._blur(Bu,0,0,Tu),this._applyPMREM(Bu),this._cleanup(Bu),Bu},fromEquirectangular:function(_u){return _u.magFilter=NearestFilter,_u.minFilter=NearestFilter,_u.generateMipmaps=!1,this.fromCubemap(_u)},fromCubemap:function(_u){_oldTarget=this._renderer.getRenderTarget();var Tu=this._allocateTargets(_u);return this._textureToCubeUV(_u,Tu),this._applyPMREM(Tu),this._cleanup(Tu),Tu},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var _u=0;_u<_lodPlanes.length;_u++)_lodPlanes[_u].dispose()},_cleanup:function(_u){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),_u.scissorTest=!1,_u.setSize(_u.width,_u.height)},_allocateTargets:function(_u){var Tu={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(_u)?_u.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},Cu=_createRenderTarget(Tu);return Cu.depthBuffer=!_u,this._pingPongRenderTarget=_createRenderTarget(Tu),Cu},_compileMaterial:function(_u){var Tu=new Mesh(_lodPlanes[0],_u);this._renderer.compile(Tu,_flatCamera)},_sceneToCubeUV:function(_u,Tu,Cu,Pu){var Bu=90,Ru=1,Lu=new PerspectiveCamera(Bu,Ru,Tu,Cu),Ou=[1,-1,1,1,1,1],Du=[1,1,1,-1,-1,-1],$u=this._renderer,ku=$u.outputEncoding,Fu=$u.toneMapping,Nu=$u.toneMappingExposure,Vu=$u.getClearColor(),Gu=$u.getClearAlpha();$u.toneMapping=LinearToneMapping,$u.toneMappingExposure=1,$u.outputEncoding=LinearEncoding;var Hu=_u.background;if(Hu&&Hu.isColor){Hu.convertSRGBToLinear();var ju=Math.max(Hu.r,Hu.g,Hu.b),Uu=Math.min(Math.max(Math.ceil(Math.log2(ju)),-128),127);Hu=Hu.multiplyScalar(Math.pow(2,-Uu));var zu=(Uu+128)/255;$u.setClearColor(Hu,zu),_u.background=null}for(var Wu=0;Wu<6;Wu++){var Qu=Wu%3;Qu==0?(Lu.up.set(0,Ou[Wu],0),Lu.lookAt(Du[Wu],0,0)):Qu==1?(Lu.up.set(0,0,Ou[Wu]),Lu.lookAt(0,Du[Wu],0)):(Lu.up.set(0,Ou[Wu],0),Lu.lookAt(0,0,Du[Wu])),_setViewport(Pu,Qu*SIZE_MAX,Wu>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),$u.setRenderTarget(Pu),$u.render(_u,Lu)}$u.toneMapping=Fu,$u.toneMappingExposure=Nu,$u.outputEncoding=ku,$u.setClearColor(Vu,Gu)},_textureToCubeUV:function(_u,Tu){var Cu=this._renderer;_u.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Pu=_u.isCubeTexture?this._cubemapShader:this._equirectShader,Bu=new Mesh(_lodPlanes[0],Pu),Ru=Pu.uniforms;Ru.envMap.value=_u,_u.isCubeTexture||Ru.texelSize.value.set(1/_u.image.width,1/_u.image.height),Ru.inputEncoding.value=ENCODINGS[_u.encoding],Ru.outputEncoding.value=ENCODINGS[Tu.texture.encoding],_setViewport(Tu,0,0,3*SIZE_MAX,2*SIZE_MAX),Cu.setRenderTarget(Tu),Cu.render(Bu,_flatCamera)},_applyPMREM:function(_u){var Tu=this._renderer,Cu=Tu.autoClear;Tu.autoClear=!1;for(var Pu=1;Pu<TOTAL_LODS;Pu++){var Bu=Math.sqrt(_sigmas[Pu]*_sigmas[Pu]-_sigmas[Pu-1]*_sigmas[Pu-1]),Ru=_axisDirections[(Pu-1)%_axisDirections.length];this._blur(_u,Pu-1,Pu,Bu,Ru)}Tu.autoClear=Cu},_blur:function(_u,Tu,Cu,Pu,Bu){var Ru=this._pingPongRenderTarget;this._halfBlur(_u,Ru,Tu,Cu,Pu,"latitudinal",Bu),this._halfBlur(Ru,_u,Cu,Cu,Pu,"longitudinal",Bu)},_halfBlur:function(_u,Tu,Cu,Pu,Bu,Ru,Lu){var Ou=this._renderer,Du=this._blurMaterial;Ru!=="latitudinal"&&Ru!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var $u=3,ku=new Mesh(_lodPlanes[Pu],Du),Fu=Du.uniforms,Nu=_sizeLods[Cu]-1,Vu=isFinite(Bu)?Math.PI/(2*Nu):2*Math.PI/(2*MAX_SAMPLES-1),Gu=Bu/Vu,Hu=isFinite(Bu)?1+Math.floor($u*Gu):MAX_SAMPLES;Hu>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Bu}, is too large and will clip, as it requested ${Hu} samples when the maximum is set to ${MAX_SAMPLES}`);for(var ju=[],Uu=0,zu=0;zu<MAX_SAMPLES;++zu){var qu=zu/Gu,Wu=Math.exp(-qu*qu/2);ju.push(Wu),zu==0?Uu+=Wu:zu<Hu&&(Uu+=2*Wu)}for(var zu=0;zu<ju.length;zu++)ju[zu]=ju[zu]/Uu;Fu.envMap.value=_u.texture,Fu.samples.value=Hu,Fu.weights.value=ju,Fu.latitudinal.value=Ru==="latitudinal",Lu&&(Fu.poleAxis.value=Lu),Fu.dTheta.value=Vu,Fu.mipInt.value=LOD_MAX-Cu,Fu.inputEncoding.value=ENCODINGS[_u.texture.encoding],Fu.outputEncoding.value=ENCODINGS[_u.texture.encoding];var Qu=_sizeLods[Pu],qu=3*Math.max(0,SIZE_MAX-2*Qu),Yu=(Pu===0?0:2*SIZE_MAX)+2*Qu*(Pu>LOD_MAX-LOD_MIN?Pu-LOD_MAX+LOD_MIN:0);_setViewport(Tu,qu,Yu,3*Qu,2*Qu),Ou.setRenderTarget(Tu),Ou.render(ku,_flatCamera)}};function _isLDR(_u){return _u===void 0||_u.type!==UnsignedByteType?!1:_u.encoding===LinearEncoding||_u.encoding===sRGBEncoding||_u.encoding===GammaEncoding}function _createPlanes(){for(var _u=[],Tu=[],Cu=[],Pu=LOD_MAX,Bu=0;Bu<TOTAL_LODS;Bu++){var Ru=Math.pow(2,Pu);Tu.push(Ru);var Lu=1/Ru;Bu>LOD_MAX-LOD_MIN?Lu=EXTRA_LOD_SIGMA[Bu-LOD_MAX+LOD_MIN-1]:Bu==0&&(Lu=0),Cu.push(Lu);for(var Ou=1/(Ru-1),Du=-Ou/2,$u=1+Ou/2,ku=[Du,Du,$u,Du,$u,$u,Du,Du,$u,$u,Du,$u],Fu=6,Nu=6,Vu=3,Gu=2,Hu=1,ju=new Float32Array(Vu*Nu*Fu),Uu=new Float32Array(Gu*Nu*Fu),zu=new Float32Array(Hu*Nu*Fu),Wu=0;Wu<Fu;Wu++){var Qu=Wu%3*2/3-1,qu=Wu>2?0:-1,Yu=[Qu,qu,0,Qu+2/3,qu,0,Qu+2/3,qu+1,0,Qu,qu,0,Qu+2/3,qu+1,0,Qu,qu+1,0];ju.set(Yu,Vu*Nu*Wu),Uu.set(ku,Gu*Nu*Wu);var Xc=[Wu,Wu,Wu,Wu,Wu,Wu];zu.set(Xc,Hu*Nu*Wu)}var _h=new BufferGeometry;_h.setAttribute("position",new BufferAttribute(ju,Vu)),_h.setAttribute("uv",new BufferAttribute(Uu,Gu)),_h.setAttribute("faceIndex",new BufferAttribute(zu,Hu)),_u.push(_h),Pu>LOD_MIN&&Pu--}return{_lodPlanes:_u,_sizeLods:Tu,_sigmas:Cu}}function _createRenderTarget(_u){var Tu=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,_u);return Tu.texture.mapping=CubeUVReflectionMapping,Tu.texture.name="PMREM.cubeUv",Tu.scissorTest=!0,Tu}function _setViewport(_u,Tu,Cu,Pu,Bu){_u.viewport.set(Tu,Cu,Pu,Bu),_u.scissor.set(Tu,Cu,Pu,Bu)}function _getBlurShader(_u){var Tu=new Float32Array(_u),Cu=new Vector3(0,1,0),Pu=new RawShaderMaterial({defines:{n:_u},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Tu},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Cu},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Pu.type="SphericalGaussianBlur",Pu}function _getEquirectShader(){var _u=new Vector2(1,1),Tu=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:_u},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Tu.type="EquirectangularToCubeUV",Tu}function _getCubemapShader(){var _u=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _u.type="CubemapToCubeUV",_u}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(_u,Tu,Cu,Pu,Bu,Ru,Lu){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(_u,Tu,Cu,Bu,Ru,Lu)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(_u){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),_u}function MultiMaterial(_u){return _u===void 0&&(_u=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),_u.isMultiMaterial=!0,_u.materials=_u,_u.clone=function(){return _u.slice()},_u}function PointCloud(_u,Tu){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(_u,Tu)}function Particle(_u){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(_u)}function ParticleSystem(_u,Tu){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(_u,Tu)}function PointCloudMaterial(_u){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleBasicMaterial(_u){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleSystemMaterial(_u){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function Vertex(_u,Tu,Cu){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(_u,Tu,Cu)}function DynamicBufferAttribute(_u,Tu){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(_u,Tu).setUsage(DynamicDrawUsage)}function Int8Attribute(_u,Tu){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(_u,Tu)}function Uint8Attribute(_u,Tu){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(_u,Tu)}function Uint8ClampedAttribute(_u,Tu){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(_u,Tu)}function Int16Attribute(_u,Tu){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(_u,Tu)}function Uint16Attribute(_u,Tu){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(_u,Tu)}function Int32Attribute(_u,Tu){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(_u,Tu)}function Uint32Attribute(_u,Tu){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(_u,Tu)}function Float32Attribute(_u,Tu){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(_u,Tu)}function Float64Attribute(_u,Tu){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(_u,Tu)}Curve.create=function(_u,Tu){return console.log("THREE.Curve.create() has been deprecated"),_u.prototype=Object.create(Curve.prototype),_u.prototype.constructor=_u,_u.prototype.getPoint=Tu,_u};Object.assign(CurvePath.prototype,{createPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var Tu=this.getPoints(_u);return this.createGeometry(Tu)},createSpacedPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var Tu=this.getSpacedPoints(_u);return this.createGeometry(Tu)},createGeometry:function(_u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var Tu=new Geometry,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Tu.vertices.push(new Vector3(Bu.x,Bu.y,Bu.z||0))}return Tu}});Object.assign(Path.prototype,{fromPoints:function(_u){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(_u)}});function ClosedSplineCurve3(_u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(_u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(_u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(_u){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(_u)}function BoundingBoxHelper(_u,Tu){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(_u,Tu)}function EdgesHelper(_u,Tu){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(_u.geometry),new LineBasicMaterial({color:Tu!==void 0?Tu:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(_u,Tu){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(_u.geometry),new LineBasicMaterial({color:Tu!==void 0?Tu:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(_u){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(_u)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(_u){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(_u)}function BinaryTextureLoader(_u){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(_u)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(_u){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(_u)}});Object.assign(Box2.prototype,{center:function(_u){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},size:function(_u){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Box3.prototype,{center:function(_u){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)},size:function(_u){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(_u){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(_u)};Line3.prototype.center=function(_u){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(_u)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(_u){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(_u)},nextPowerOfTwo:function(_u){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(_u)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(_u,Tu){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,Tu)},multiplyVector3:function(_u){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(_u){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(_u)},flattenToArrayOffset:function(_u,Tu){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,Tu)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(_u){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(_u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(_u){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector4:function(_u){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(_u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),_u.transformDirection(this)},crossVector:function(_u){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(_u,Tu,Cu,Pu,Bu,Ru){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(_u,Tu,Pu,Cu,Bu,Ru)}});Plane.prototype.isIntersectionLine=function(_u){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(_u)};Quaternion.prototype.multiplyVector3=function(_u){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),_u.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(_u){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionPlane:function(_u){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(_u,Tu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(_u,Tu)},midpoint:function(_u){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(_u)},normal:function(_u){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(_u)},plane:function(_u){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(_u)}});Object.assign(Triangle,{barycoordFromPoint:function(_u,Tu,Cu,Pu,Bu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(_u,Tu,Cu,Pu,Bu)},normal:function(_u,Tu,Cu,Pu){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(_u,Tu,Cu,Pu)}});Object.assign(Shape.prototype,{extractAllPoints:function(_u){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(_u)},extrude:function(_u){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,_u)},makeGeometry:function(_u){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,_u)}});Object.assign(Vector2.prototype,{fromAttribute:function(_u,Tu,Cu){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,Tu,Cu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(_u){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(_u)},getScaleFromMatrix:function(_u){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(_u)},getColumnFromMatrix:function(_u,Tu){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(Tu,_u)},applyProjection:function(_u){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(_u)},fromAttribute:function(_u,Tu,Cu){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,Tu,Cu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(_u,Tu,Cu){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,Tu,Cu)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(_u){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.assign(Object3D.prototype,{getChildByName:function(_u){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(_u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(_u,Tu){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(Tu,_u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(_u){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(_u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=_u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(_u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=_u}});PerspectiveCamera.prototype.setLens=function(_u,Tu){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),Tu!==void 0&&(this.filmGauge=Tu),this.setFocalLength(_u)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(_u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=_u}},shadowCameraLeft:{set:function(_u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=_u}},shadowCameraRight:{set:function(_u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=_u}},shadowCameraTop:{set:function(_u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=_u}},shadowCameraBottom:{set:function(_u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=_u}},shadowCameraNear:{set:function(_u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=_u}},shadowCameraFar:{set:function(_u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=_u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(_u){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=_u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(_u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=_u}},shadowMapHeight:{set:function(_u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=_u}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(_u){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(_u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(_u)},addAttribute:function(_u,Tu){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(Tu&&Tu.isBufferAttribute)&&!(Tu&&Tu.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(_u,new BufferAttribute(arguments[1],arguments[2]))):_u==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(Tu),this):this.setAttribute(_u,Tu)},addDrawCall:function(_u,Tu,Cu){Cu!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(_u,Tu)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(_u){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(_u)},applyMatrix:function(_u){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(_u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=_u}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(_u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=_u}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(_u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(_u)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(_u){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(_u){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_u===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(_u){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=_u}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(_u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=_u}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(_u,Tu,Cu,Pu){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(_u),this.clear(Tu,Cu,Pu)},animate:function(_u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(_u)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(_u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(_u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=_u}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=_u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(_u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=_u===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(_u,Tu,Cu){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(_u,Cu)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=_u}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=_u}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=_u}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=_u}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(_u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=_u}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(_u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=_u}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(_u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=_u}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(_u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=_u}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(_u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=_u}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(_u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=_u}}});Object.defineProperties(Audio$2.prototype,{load:{value:function(_u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var Tu=this,Cu=new AudioLoader;return Cu.load(_u,function(Pu){Tu.setBuffer(Pu)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(_u,Tu){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(_u,Tu)};var GeometryUtils={merge:function(_u,Tu,Cu){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Pu;Tu.isMesh&&(Tu.matrixAutoUpdate&&Tu.updateMatrix(),Pu=Tu.matrix,Tu=Tu.geometry),_u.merge(Tu,Pu,Cu)},center:function(_u){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),_u.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(_u,Tu,Cu,Pu){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Bu=new TextureLoader;Bu.setCrossOrigin(this.crossOrigin);var Ru=Bu.load(_u,Cu,void 0,Pu);return Tu&&(Ru.mapping=Tu),Ru};ImageUtils.loadTextureCube=function(_u,Tu,Cu,Pu){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Bu=new CubeTextureLoader;Bu.setCrossOrigin(this.crossOrigin);var Ru=Bu.load(_u,Cu,void 0,Pu);return Tu&&(Ru.mapping=Tu),Ru};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$2,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(THREE),tslib={exports:{}};(function(_u){var Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu,zu,Wu,Qu,qu,Yu,Xc,_h,_d;(function(Ku){var Xu=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Ku(Ju(Xu,Ju(_u.exports)));function Ju(Zu,_c){return Zu!==Xu&&(typeof Object.create=="function"?Object.defineProperty(Zu,"__esModule",{value:!0}):Zu.__esModule=!0),function(_f,ep){return Zu[_f]=_c?_c(_f,ep):ep}}})(function(Ku){var Xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Zu,_c){Zu.__proto__=_c}||function(Zu,_c){for(var _f in _c)Object.prototype.hasOwnProperty.call(_c,_f)&&(Zu[_f]=_c[_f])};Tu=function(Zu,_c){if(typeof _c!="function"&&_c!==null)throw new TypeError("Class extends value "+String(_c)+" is not a constructor or null");Xu(Zu,_c);function _f(){this.constructor=Zu}Zu.prototype=_c===null?Object.create(_c):(_f.prototype=_c.prototype,new _f)},Cu=Object.assign||function(Zu){for(var _c,_f=1,ep=arguments.length;_f<ep;_f++){_c=arguments[_f];for(var tp in _c)Object.prototype.hasOwnProperty.call(_c,tp)&&(Zu[tp]=_c[tp])}return Zu},Pu=function(Zu,_c){var _f={};for(var ep in Zu)Object.prototype.hasOwnProperty.call(Zu,ep)&&_c.indexOf(ep)<0&&(_f[ep]=Zu[ep]);if(Zu!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tp=0,ep=Object.getOwnPropertySymbols(Zu);tp<ep.length;tp++)_c.indexOf(ep[tp])<0&&Object.prototype.propertyIsEnumerable.call(Zu,ep[tp])&&(_f[ep[tp]]=Zu[ep[tp]]);return _f},Bu=function(Zu,_c,_f,ep){var tp=arguments.length,op=tp<3?_c:ep===null?ep=Object.getOwnPropertyDescriptor(_c,_f):ep,hp;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")op=Reflect.decorate(Zu,_c,_f,ep);else for(var cp=Zu.length-1;cp>=0;cp--)(hp=Zu[cp])&&(op=(tp<3?hp(op):tp>3?hp(_c,_f,op):hp(_c,_f))||op);return tp>3&&op&&Object.defineProperty(_c,_f,op),op},Ru=function(Zu,_c){return function(_f,ep){_c(_f,ep,Zu)}},Lu=function(Zu,_c){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Zu,_c)},Ou=function(Zu,_c,_f,ep){function tp(op){return op instanceof _f?op:new _f(function(hp){hp(op)})}return new(_f||(_f=Promise))(function(op,hp){function cp(Rp){try{yp(ep.next(Rp))}catch(wp){hp(wp)}}function Sp(Rp){try{yp(ep.throw(Rp))}catch(wp){hp(wp)}}function yp(Rp){Rp.done?op(Rp.value):tp(Rp.value).then(cp,Sp)}yp((ep=ep.apply(Zu,_c||[])).next())})},Du=function(Zu,_c){var _f={label:0,sent:function(){if(op[0]&1)throw op[1];return op[1]},trys:[],ops:[]},ep,tp,op,hp;return hp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(hp[Symbol.iterator]=function(){return this}),hp;function cp(yp){return function(Rp){return Sp([yp,Rp])}}function Sp(yp){if(ep)throw new TypeError("Generator is already executing.");for(;_f;)try{if(ep=1,tp&&(op=yp[0]&2?tp.return:yp[0]?tp.throw||((op=tp.return)&&op.call(tp),0):tp.next)&&!(op=op.call(tp,yp[1])).done)return op;switch(tp=0,op&&(yp=[yp[0]&2,op.value]),yp[0]){case 0:case 1:op=yp;break;case 4:return _f.label++,{value:yp[1],done:!1};case 5:_f.label++,tp=yp[1],yp=[0];continue;case 7:yp=_f.ops.pop(),_f.trys.pop();continue;default:if(op=_f.trys,!(op=op.length>0&&op[op.length-1])&&(yp[0]===6||yp[0]===2)){_f=0;continue}if(yp[0]===3&&(!op||yp[1]>op[0]&&yp[1]<op[3])){_f.label=yp[1];break}if(yp[0]===6&&_f.label<op[1]){_f.label=op[1],op=yp;break}if(op&&_f.label<op[2]){_f.label=op[2],_f.ops.push(yp);break}op[2]&&_f.ops.pop(),_f.trys.pop();continue}yp=_c.call(Zu,_f)}catch(Rp){yp=[6,Rp],tp=0}finally{ep=op=0}if(yp[0]&5)throw yp[1];return{value:yp[0]?yp[1]:void 0,done:!0}}},$u=function(Zu,_c){for(var _f in Zu)_f!=="default"&&!Object.prototype.hasOwnProperty.call(_c,_f)&&_d(_c,Zu,_f)},_d=Object.create?function(Zu,_c,_f,ep){ep===void 0&&(ep=_f);var tp=Object.getOwnPropertyDescriptor(_c,_f);(!tp||("get"in tp?!_c.__esModule:tp.writable||tp.configurable))&&(tp={enumerable:!0,get:function(){return _c[_f]}}),Object.defineProperty(Zu,ep,tp)}:function(Zu,_c,_f,ep){ep===void 0&&(ep=_f),Zu[ep]=_c[_f]},ku=function(Zu){var _c=typeof Symbol=="function"&&Symbol.iterator,_f=_c&&Zu[_c],ep=0;if(_f)return _f.call(Zu);if(Zu&&typeof Zu.length=="number")return{next:function(){return Zu&&ep>=Zu.length&&(Zu=void 0),{value:Zu&&Zu[ep++],done:!Zu}}};throw new TypeError(_c?"Object is not iterable.":"Symbol.iterator is not defined.")},Fu=function(Zu,_c){var _f=typeof Symbol=="function"&&Zu[Symbol.iterator];if(!_f)return Zu;var ep=_f.call(Zu),tp,op=[],hp;try{for(;(_c===void 0||_c-- >0)&&!(tp=ep.next()).done;)op.push(tp.value)}catch(cp){hp={error:cp}}finally{try{tp&&!tp.done&&(_f=ep.return)&&_f.call(ep)}finally{if(hp)throw hp.error}}return op},Nu=function(){for(var Zu=[],_c=0;_c<arguments.length;_c++)Zu=Zu.concat(Fu(arguments[_c]));return Zu},Vu=function(){for(var Zu=0,_c=0,_f=arguments.length;_c<_f;_c++)Zu+=arguments[_c].length;for(var ep=Array(Zu),tp=0,_c=0;_c<_f;_c++)for(var op=arguments[_c],hp=0,cp=op.length;hp<cp;hp++,tp++)ep[tp]=op[hp];return ep},Gu=function(Zu,_c,_f){if(_f||arguments.length===2)for(var ep=0,tp=_c.length,op;ep<tp;ep++)(op||!(ep in _c))&&(op||(op=Array.prototype.slice.call(_c,0,ep)),op[ep]=_c[ep]);return Zu.concat(op||Array.prototype.slice.call(_c))},Hu=function(Zu){return this instanceof Hu?(this.v=Zu,this):new Hu(Zu)},ju=function(Zu,_c,_f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ep=_f.apply(Zu,_c||[]),tp,op=[];return tp={},hp("next"),hp("throw"),hp("return"),tp[Symbol.asyncIterator]=function(){return this},tp;function hp(Pp){ep[Pp]&&(tp[Pp]=function(Ep){return new Promise(function(ip,rp){op.push([Pp,Ep,ip,rp])>1||cp(Pp,Ep)})})}function cp(Pp,Ep){try{Sp(ep[Pp](Ep))}catch(ip){wp(op[0][3],ip)}}function Sp(Pp){Pp.value instanceof Hu?Promise.resolve(Pp.value.v).then(yp,Rp):wp(op[0][2],Pp)}function yp(Pp){cp("next",Pp)}function Rp(Pp){cp("throw",Pp)}function wp(Pp,Ep){Pp(Ep),op.shift(),op.length&&cp(op[0][0],op[0][1])}},Uu=function(Zu){var _c,_f;return _c={},ep("next"),ep("throw",function(tp){throw tp}),ep("return"),_c[Symbol.iterator]=function(){return this},_c;function ep(tp,op){_c[tp]=Zu[tp]?function(hp){return(_f=!_f)?{value:Hu(Zu[tp](hp)),done:tp==="return"}:op?op(hp):hp}:op}},zu=function(Zu){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _c=Zu[Symbol.asyncIterator],_f;return _c?_c.call(Zu):(Zu=typeof ku=="function"?ku(Zu):Zu[Symbol.iterator](),_f={},ep("next"),ep("throw"),ep("return"),_f[Symbol.asyncIterator]=function(){return this},_f);function ep(op){_f[op]=Zu[op]&&function(hp){return new Promise(function(cp,Sp){hp=Zu[op](hp),tp(cp,Sp,hp.done,hp.value)})}}function tp(op,hp,cp,Sp){Promise.resolve(Sp).then(function(yp){op({value:yp,done:cp})},hp)}},Wu=function(Zu,_c){return Object.defineProperty?Object.defineProperty(Zu,"raw",{value:_c}):Zu.raw=_c,Zu};var Ju=Object.create?function(Zu,_c){Object.defineProperty(Zu,"default",{enumerable:!0,value:_c})}:function(Zu,_c){Zu.default=_c};Qu=function(Zu){if(Zu&&Zu.__esModule)return Zu;var _c={};if(Zu!=null)for(var _f in Zu)_f!=="default"&&Object.prototype.hasOwnProperty.call(Zu,_f)&&_d(_c,Zu,_f);return Ju(_c,Zu),_c},qu=function(Zu){return Zu&&Zu.__esModule?Zu:{default:Zu}},Yu=function(Zu,_c,_f,ep){if(_f==="a"&&!ep)throw new TypeError("Private accessor was defined without a getter");if(typeof _c=="function"?Zu!==_c||!ep:!_c.has(Zu))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _f==="m"?ep:_f==="a"?ep.call(Zu):ep?ep.value:_c.get(Zu)},Xc=function(Zu,_c,_f,ep,tp){if(ep==="m")throw new TypeError("Private method is not writable");if(ep==="a"&&!tp)throw new TypeError("Private accessor was defined without a setter");if(typeof _c=="function"?Zu!==_c||!tp:!_c.has(Zu))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ep==="a"?tp.call(Zu,_f):tp?tp.value=_f:_c.set(Zu,_f),_f},_h=function(Zu,_c){if(_c===null||typeof _c!="object"&&typeof _c!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Zu=="function"?_c===Zu:Zu.has(_c)},Ku("__extends",Tu),Ku("__assign",Cu),Ku("__rest",Pu),Ku("__decorate",Bu),Ku("__param",Ru),Ku("__metadata",Lu),Ku("__awaiter",Ou),Ku("__generator",Du),Ku("__exportStar",$u),Ku("__createBinding",_d),Ku("__values",ku),Ku("__read",Fu),Ku("__spread",Nu),Ku("__spreadArrays",Vu),Ku("__spreadArray",Gu),Ku("__await",Hu),Ku("__asyncGenerator",ju),Ku("__asyncDelegator",Uu),Ku("__asyncValues",zu),Ku("__makeTemplateObject",Wu),Ku("__importStar",Qu),Ku("__importDefault",qu),Ku("__classPrivateFieldGet",Yu),Ku("__classPrivateFieldSet",Xc),Ku("__classPrivateFieldIn",_h)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(_u,Tu){for(var Cu=new Array(arguments.length-1),Pu=0,Bu=2,Ru=!0;Bu<arguments.length;)Cu[Pu++]=arguments[Bu++];return new Promise(function(Ou,Du){Cu[Pu]=function(ku){if(Ru)if(Ru=!1,ku)Du(ku);else{for(var Fu=new Array(arguments.length-1),Nu=0;Nu<Fu.length;)Fu[Nu++]=arguments[Nu];Ou.apply(null,Fu)}};try{_u.apply(Tu||null,Cu)}catch($u){Ru&&(Ru=!1,Du($u))}})}var base64$1={};(function(_u){var Tu=_u;Tu.length=function(Ou){var Du=Ou.length;if(!Du)return 0;for(var $u=0;--Du%4>1&&Ou.charAt(Du)==="=";)++$u;return Math.ceil(Ou.length*3)/4-$u};for(var Cu=new Array(64),Pu=new Array(123),Bu=0;Bu<64;)Pu[Cu[Bu]=Bu<26?Bu+65:Bu<52?Bu+71:Bu<62?Bu-4:Bu-59|43]=Bu++;Tu.encode=function(Ou,Du,$u){for(var ku=null,Fu=[],Nu=0,Vu=0,Gu;Du<$u;){var Hu=Ou[Du++];switch(Vu){case 0:Fu[Nu++]=Cu[Hu>>2],Gu=(Hu&3)<<4,Vu=1;break;case 1:Fu[Nu++]=Cu[Gu|Hu>>4],Gu=(Hu&15)<<2,Vu=2;break;case 2:Fu[Nu++]=Cu[Gu|Hu>>6],Fu[Nu++]=Cu[Hu&63],Vu=0;break}Nu>8191&&((ku||(ku=[])).push(String.fromCharCode.apply(String,Fu)),Nu=0)}return Vu&&(Fu[Nu++]=Cu[Gu],Fu[Nu++]=61,Vu===1&&(Fu[Nu++]=61)),ku?(Nu&&ku.push(String.fromCharCode.apply(String,Fu.slice(0,Nu))),ku.join("")):String.fromCharCode.apply(String,Fu.slice(0,Nu))};var Ru="invalid encoding";Tu.decode=function(Ou,Du,$u){for(var ku=$u,Fu=0,Nu,Vu=0;Vu<Ou.length;){var Gu=Ou.charCodeAt(Vu++);if(Gu===61&&Fu>1)break;if((Gu=Pu[Gu])===void 0)throw Error(Ru);switch(Fu){case 0:Nu=Gu,Fu=1;break;case 1:Du[$u++]=Nu<<2|(Gu&48)>>4,Nu=Gu,Fu=2;break;case 2:Du[$u++]=(Nu&15)<<4|(Gu&60)>>2,Nu=Gu,Fu=3;break;case 3:Du[$u++]=(Nu&3)<<6|Gu,Fu=0;break}}if(Fu===1)throw Error(Ru);return $u-ku},Tu.test=function(Ou){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Ou)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(Tu,Cu,Pu){return(this._listeners[Tu]||(this._listeners[Tu]=[])).push({fn:Cu,ctx:Pu||this}),this};EventEmitter.prototype.off=function(Tu,Cu){if(Tu===void 0)this._listeners={};else if(Cu===void 0)this._listeners[Tu]=[];else for(var Pu=this._listeners[Tu],Bu=0;Bu<Pu.length;)Pu[Bu].fn===Cu?Pu.splice(Bu,1):++Bu;return this};EventEmitter.prototype.emit=function(Tu){var Cu=this._listeners[Tu];if(Cu){for(var Pu=[],Bu=1;Bu<arguments.length;)Pu.push(arguments[Bu++]);for(Bu=0;Bu<Cu.length;)Cu[Bu].fn.apply(Cu[Bu++].ctx,Pu)}return this};var float=factory(factory);function factory(_u){return typeof Float32Array!="undefined"?function(){var Tu=new Float32Array([-0]),Cu=new Uint8Array(Tu.buffer),Pu=Cu[3]===128;function Bu(Du,$u,ku){Tu[0]=Du,$u[ku]=Cu[0],$u[ku+1]=Cu[1],$u[ku+2]=Cu[2],$u[ku+3]=Cu[3]}function Ru(Du,$u,ku){Tu[0]=Du,$u[ku]=Cu[3],$u[ku+1]=Cu[2],$u[ku+2]=Cu[1],$u[ku+3]=Cu[0]}_u.writeFloatLE=Pu?Bu:Ru,_u.writeFloatBE=Pu?Ru:Bu;function Lu(Du,$u){return Cu[0]=Du[$u],Cu[1]=Du[$u+1],Cu[2]=Du[$u+2],Cu[3]=Du[$u+3],Tu[0]}function Ou(Du,$u){return Cu[3]=Du[$u],Cu[2]=Du[$u+1],Cu[1]=Du[$u+2],Cu[0]=Du[$u+3],Tu[0]}_u.readFloatLE=Pu?Lu:Ou,_u.readFloatBE=Pu?Ou:Lu}():function(){function Tu(Pu,Bu,Ru,Lu){var Ou=Bu<0?1:0;if(Ou&&(Bu=-Bu),Bu===0)Pu(1/Bu>0?0:2147483648,Ru,Lu);else if(isNaN(Bu))Pu(2143289344,Ru,Lu);else if(Bu>34028234663852886e22)Pu((Ou<<31|2139095040)>>>0,Ru,Lu);else if(Bu<11754943508222875e-54)Pu((Ou<<31|Math.round(Bu/1401298464324817e-60))>>>0,Ru,Lu);else{var Du=Math.floor(Math.log(Bu)/Math.LN2),$u=Math.round(Bu*Math.pow(2,-Du)*8388608)&8388607;Pu((Ou<<31|Du+127<<23|$u)>>>0,Ru,Lu)}}_u.writeFloatLE=Tu.bind(null,writeUintLE),_u.writeFloatBE=Tu.bind(null,writeUintBE);function Cu(Pu,Bu,Ru){var Lu=Pu(Bu,Ru),Ou=(Lu>>31)*2+1,Du=Lu>>>23&255,$u=Lu&8388607;return Du===255?$u?NaN:Ou*(1/0):Du===0?Ou*1401298464324817e-60*$u:Ou*Math.pow(2,Du-150)*($u+8388608)}_u.readFloatLE=Cu.bind(null,readUintLE),_u.readFloatBE=Cu.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var Tu=new Float64Array([-0]),Cu=new Uint8Array(Tu.buffer),Pu=Cu[7]===128;function Bu(Du,$u,ku){Tu[0]=Du,$u[ku]=Cu[0],$u[ku+1]=Cu[1],$u[ku+2]=Cu[2],$u[ku+3]=Cu[3],$u[ku+4]=Cu[4],$u[ku+5]=Cu[5],$u[ku+6]=Cu[6],$u[ku+7]=Cu[7]}function Ru(Du,$u,ku){Tu[0]=Du,$u[ku]=Cu[7],$u[ku+1]=Cu[6],$u[ku+2]=Cu[5],$u[ku+3]=Cu[4],$u[ku+4]=Cu[3],$u[ku+5]=Cu[2],$u[ku+6]=Cu[1],$u[ku+7]=Cu[0]}_u.writeDoubleLE=Pu?Bu:Ru,_u.writeDoubleBE=Pu?Ru:Bu;function Lu(Du,$u){return Cu[0]=Du[$u],Cu[1]=Du[$u+1],Cu[2]=Du[$u+2],Cu[3]=Du[$u+3],Cu[4]=Du[$u+4],Cu[5]=Du[$u+5],Cu[6]=Du[$u+6],Cu[7]=Du[$u+7],Tu[0]}function Ou(Du,$u){return Cu[7]=Du[$u],Cu[6]=Du[$u+1],Cu[5]=Du[$u+2],Cu[4]=Du[$u+3],Cu[3]=Du[$u+4],Cu[2]=Du[$u+5],Cu[1]=Du[$u+6],Cu[0]=Du[$u+7],Tu[0]}_u.readDoubleLE=Pu?Lu:Ou,_u.readDoubleBE=Pu?Ou:Lu}():function(){function Tu(Pu,Bu,Ru,Lu,Ou,Du){var $u=Lu<0?1:0;if($u&&(Lu=-Lu),Lu===0)Pu(0,Ou,Du+Bu),Pu(1/Lu>0?0:2147483648,Ou,Du+Ru);else if(isNaN(Lu))Pu(0,Ou,Du+Bu),Pu(2146959360,Ou,Du+Ru);else if(Lu>17976931348623157e292)Pu(0,Ou,Du+Bu),Pu(($u<<31|2146435072)>>>0,Ou,Du+Ru);else{var ku;if(Lu<22250738585072014e-324)ku=Lu/5e-324,Pu(ku>>>0,Ou,Du+Bu),Pu(($u<<31|ku/4294967296)>>>0,Ou,Du+Ru);else{var Fu=Math.floor(Math.log(Lu)/Math.LN2);Fu===1024&&(Fu=1023),ku=Lu*Math.pow(2,-Fu),Pu(ku*4503599627370496>>>0,Ou,Du+Bu),Pu(($u<<31|Fu+1023<<20|ku*1048576&1048575)>>>0,Ou,Du+Ru)}}}_u.writeDoubleLE=Tu.bind(null,writeUintLE,0,4),_u.writeDoubleBE=Tu.bind(null,writeUintBE,4,0);function Cu(Pu,Bu,Ru,Lu,Ou){var Du=Pu(Lu,Ou+Bu),$u=Pu(Lu,Ou+Ru),ku=($u>>31)*2+1,Fu=$u>>>20&2047,Nu=4294967296*($u&1048575)+Du;return Fu===2047?Nu?NaN:ku*(1/0):Fu===0?ku*5e-324*Nu:ku*Math.pow(2,Fu-1075)*(Nu+4503599627370496)}_u.readDoubleLE=Cu.bind(null,readUintLE,0,4),_u.readDoubleBE=Cu.bind(null,readUintBE,4,0)}(),_u}function writeUintLE(_u,Tu,Cu){Tu[Cu]=_u&255,Tu[Cu+1]=_u>>>8&255,Tu[Cu+2]=_u>>>16&255,Tu[Cu+3]=_u>>>24}function writeUintBE(_u,Tu,Cu){Tu[Cu]=_u>>>24,Tu[Cu+1]=_u>>>16&255,Tu[Cu+2]=_u>>>8&255,Tu[Cu+3]=_u&255}function readUintLE(_u,Tu){return(_u[Tu]|_u[Tu+1]<<8|_u[Tu+2]<<16|_u[Tu+3]<<24)>>>0}function readUintBE(_u,Tu){return(_u[Tu]<<24|_u[Tu+1]<<16|_u[Tu+2]<<8|_u[Tu+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_u){}return null}var utf8$2={};(function(_u){var Tu=_u;Tu.length=function(Pu){for(var Bu=0,Ru=0,Lu=0;Lu<Pu.length;++Lu)Ru=Pu.charCodeAt(Lu),Ru<128?Bu+=1:Ru<2048?Bu+=2:(Ru&64512)===55296&&(Pu.charCodeAt(Lu+1)&64512)===56320?(++Lu,Bu+=4):Bu+=3;return Bu},Tu.read=function(Pu,Bu,Ru){var Lu=Ru-Bu;if(Lu<1)return"";for(var Ou=null,Du=[],$u=0,ku;Bu<Ru;)ku=Pu[Bu++],ku<128?Du[$u++]=ku:ku>191&&ku<224?Du[$u++]=(ku&31)<<6|Pu[Bu++]&63:ku>239&&ku<365?(ku=((ku&7)<<18|(Pu[Bu++]&63)<<12|(Pu[Bu++]&63)<<6|Pu[Bu++]&63)-65536,Du[$u++]=55296+(ku>>10),Du[$u++]=56320+(ku&1023)):Du[$u++]=(ku&15)<<12|(Pu[Bu++]&63)<<6|Pu[Bu++]&63,$u>8191&&((Ou||(Ou=[])).push(String.fromCharCode.apply(String,Du)),$u=0);return Ou?($u&&Ou.push(String.fromCharCode.apply(String,Du.slice(0,$u))),Ou.join("")):String.fromCharCode.apply(String,Du.slice(0,$u))},Tu.write=function(Pu,Bu,Ru){for(var Lu=Ru,Ou,Du,$u=0;$u<Pu.length;++$u)Ou=Pu.charCodeAt($u),Ou<128?Bu[Ru++]=Ou:Ou<2048?(Bu[Ru++]=Ou>>6|192,Bu[Ru++]=Ou&63|128):(Ou&64512)===55296&&((Du=Pu.charCodeAt($u+1))&64512)===56320?(Ou=65536+((Ou&1023)<<10)+(Du&1023),++$u,Bu[Ru++]=Ou>>18|240,Bu[Ru++]=Ou>>12&63|128,Bu[Ru++]=Ou>>6&63|128,Bu[Ru++]=Ou&63|128):(Bu[Ru++]=Ou>>12|224,Bu[Ru++]=Ou>>6&63|128,Bu[Ru++]=Ou&63|128);return Ru-Lu}})(utf8$2);var pool_1=pool;function pool(_u,Tu,Cu){var Pu=Cu||8192,Bu=Pu>>>1,Ru=null,Lu=Pu;return function(Du){if(Du<1||Du>Bu)return _u(Du);Lu+Du>Pu&&(Ru=_u(Pu),Lu=0);var $u=Tu.call(Ru,Lu,Lu+=Du);return Lu&7&&(Lu=(Lu|7)+1),$u}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(_u,Tu){this.lo=_u>>>0,this.hi=Tu>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function _u(Tu){if(Tu===0)return zero;var Cu=Tu<0;Cu&&(Tu=-Tu);var Pu=Tu>>>0,Bu=(Tu-Pu)/4294967296>>>0;return Cu&&(Bu=~Bu>>>0,Pu=~Pu>>>0,++Pu>4294967295&&(Pu=0,++Bu>4294967295&&(Bu=0))),new LongBits$2(Pu,Bu)};LongBits$2.from=function _u(Tu){if(typeof Tu=="number")return LongBits$2.fromNumber(Tu);if(util$5.isString(Tu))if(util$5.Long)Tu=util$5.Long.fromString(Tu);else return LongBits$2.fromNumber(parseInt(Tu,10));return Tu.low||Tu.high?new LongBits$2(Tu.low>>>0,Tu.high>>>0):zero};LongBits$2.prototype.toNumber=function _u(Tu){if(!Tu&&this.hi>>>31){var Cu=~this.lo+1>>>0,Pu=~this.hi>>>0;return Cu||(Pu=Pu+1>>>0),-(Cu+Pu*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function _u(Tu){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(Tu)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(Tu)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function _u(Tu){return Tu===zeroHash?zero:new LongBits$2((charCodeAt.call(Tu,0)|charCodeAt.call(Tu,1)<<8|charCodeAt.call(Tu,2)<<16|charCodeAt.call(Tu,3)<<24)>>>0,(charCodeAt.call(Tu,4)|charCodeAt.call(Tu,5)<<8|charCodeAt.call(Tu,6)<<16|charCodeAt.call(Tu,7)<<24)>>>0)};LongBits$2.prototype.toHash=function _u(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function _u(){var Tu=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Tu)>>>0,this.lo=(this.lo<<1^Tu)>>>0,this};LongBits$2.prototype.zzDecode=function _u(){var Tu=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^Tu)>>>0,this.hi=(this.hi>>>1^Tu)>>>0,this};LongBits$2.prototype.length=function _u(){var Tu=this.lo,Cu=(this.lo>>>28|this.hi<<4)>>>0,Pu=this.hi>>>24;return Pu===0?Cu===0?Tu<16384?Tu<128?1:2:Tu<2097152?3:4:Cu<16384?Cu<128?5:6:Cu<2097152?7:8:Pu<128?9:10};(function(_u){var Tu=_u;Tu.asPromise=aspromise,Tu.base64=base64$1,Tu.EventEmitter=eventemitter,Tu.float=float,Tu.inquire=inquire_1,Tu.utf8=utf8$2,Tu.pool=pool_1,Tu.LongBits=longbits,Tu.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),Tu.global=Tu.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,Tu.emptyArray=Object.freeze?Object.freeze([]):[],Tu.emptyObject=Object.freeze?Object.freeze({}):{},Tu.isInteger=Number.isInteger||function(Ru){return typeof Ru=="number"&&isFinite(Ru)&&Math.floor(Ru)===Ru},Tu.isString=function(Ru){return typeof Ru=="string"||Ru instanceof String},Tu.isObject=function(Ru){return Ru&&typeof Ru=="object"},Tu.isset=Tu.isSet=function(Ru,Lu){var Ou=Ru[Lu];return Ou!=null&&Ru.hasOwnProperty(Lu)?typeof Ou!="object"||(Array.isArray(Ou)?Ou.length:Object.keys(Ou).length)>0:!1},Tu.Buffer=function(){try{var Bu=Tu.inquire("buffer").Buffer;return Bu.prototype.utf8Write?Bu:null}catch{return null}}(),Tu._Buffer_from=null,Tu._Buffer_allocUnsafe=null,Tu.newBuffer=function(Ru){return typeof Ru=="number"?Tu.Buffer?Tu._Buffer_allocUnsafe(Ru):new Tu.Array(Ru):Tu.Buffer?Tu._Buffer_from(Ru):typeof Uint8Array=="undefined"?Ru:new Uint8Array(Ru)},Tu.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,Tu.Long=Tu.global.dcodeIO&&Tu.global.dcodeIO.Long||Tu.global.Long||Tu.inquire("long"),Tu.key2Re=/^true|false|0|1$/,Tu.key32Re=/^-?(?:0|[1-9][0-9]*)$/,Tu.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,Tu.longToHash=function(Ru){return Ru?Tu.LongBits.from(Ru).toHash():Tu.LongBits.zeroHash},Tu.longFromHash=function(Ru,Lu){var Ou=Tu.LongBits.fromHash(Ru);return Tu.Long?Tu.Long.fromBits(Ou.lo,Ou.hi,Lu):Ou.toNumber(Boolean(Lu))};function Cu(Bu,Ru,Lu){for(var Ou=Object.keys(Ru),Du=0;Du<Ou.length;++Du)(Bu[Ou[Du]]===void 0||!Lu)&&(Bu[Ou[Du]]=Ru[Ou[Du]]);return Bu}Tu.merge=Cu,Tu.lcFirst=function(Ru){return Ru.charAt(0).toLowerCase()+Ru.substring(1)};function Pu(Bu){function Ru(Lu,Ou){if(!(this instanceof Ru))return new Ru(Lu,Ou);Object.defineProperty(this,"message",{get:function(){return Lu}}),Error.captureStackTrace?Error.captureStackTrace(this,Ru):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Ou&&Cu(this,Ou)}return(Ru.prototype=Object.create(Error.prototype)).constructor=Ru,Object.defineProperty(Ru.prototype,"name",{get:function(){return Bu}}),Ru.prototype.toString=function(){return this.name+": "+this.message},Ru}Tu.newError=Pu,Tu.ProtocolError=Pu("ProtocolError"),Tu.oneOfGetter=function(Ru){for(var Lu={},Ou=0;Ou<Ru.length;++Ou)Lu[Ru[Ou]]=1;return function(){for(var Du=Object.keys(this),$u=Du.length-1;$u>-1;--$u)if(Lu[Du[$u]]===1&&this[Du[$u]]!==void 0&&this[Du[$u]]!==null)return Du[$u]}},Tu.oneOfSetter=function(Ru){return function(Lu){for(var Ou=0;Ou<Ru.length;++Ou)Ru[Ou]!==Lu&&delete this[Ru[Ou]]}},Tu.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},Tu._configure=function(){var Bu=Tu.Buffer;if(!Bu){Tu._Buffer_from=Tu._Buffer_allocUnsafe=null;return}Tu._Buffer_from=Bu.from!==Uint8Array.from&&Bu.from||function(Lu,Ou){return new Bu(Lu,Ou)},Tu._Buffer_allocUnsafe=Bu.allocUnsafe||function(Lu){return new Bu(Lu)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(_u,Tu,Cu){this.fn=_u,this.len=Tu,this.next=void 0,this.val=Cu}function noop$2(){}function State(_u){this.head=_u.head,this.tail=_u.tail,this.len=_u.len,this.next=_u.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$1=function _u(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function _u(Tu){return new util$4.Array(Tu)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function _u(Tu,Cu,Pu){return this.tail=this.tail.next=new Op(Tu,Cu,Pu),this.len+=Cu,this};function writeByte(_u,Tu,Cu){Tu[Cu]=_u&255}function writeVarint32(_u,Tu,Cu){for(;_u>127;)Tu[Cu++]=_u&127|128,_u>>>=7;Tu[Cu]=_u}function VarintOp(_u,Tu){this.len=_u,this.next=void 0,this.val=Tu}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function _u(Tu){return this.len+=(this.tail=this.tail.next=new VarintOp((Tu=Tu>>>0)<128?1:Tu<16384?2:Tu<2097152?3:Tu<268435456?4:5,Tu)).len,this};Writer$1.prototype.int32=function _u(Tu){return Tu<0?this._push(writeVarint64,10,LongBits$1.fromNumber(Tu)):this.uint32(Tu)};Writer$1.prototype.sint32=function _u(Tu){return this.uint32((Tu<<1^Tu>>31)>>>0)};function writeVarint64(_u,Tu,Cu){for(;_u.hi;)Tu[Cu++]=_u.lo&127|128,_u.lo=(_u.lo>>>7|_u.hi<<25)>>>0,_u.hi>>>=7;for(;_u.lo>127;)Tu[Cu++]=_u.lo&127|128,_u.lo=_u.lo>>>7;Tu[Cu++]=_u.lo}Writer$1.prototype.uint64=function _u(Tu){var Cu=LongBits$1.from(Tu);return this._push(writeVarint64,Cu.length(),Cu)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function _u(Tu){var Cu=LongBits$1.from(Tu).zzEncode();return this._push(writeVarint64,Cu.length(),Cu)};Writer$1.prototype.bool=function _u(Tu){return this._push(writeByte,1,Tu?1:0)};function writeFixed32(_u,Tu,Cu){Tu[Cu]=_u&255,Tu[Cu+1]=_u>>>8&255,Tu[Cu+2]=_u>>>16&255,Tu[Cu+3]=_u>>>24}Writer$1.prototype.fixed32=function _u(Tu){return this._push(writeFixed32,4,Tu>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function _u(Tu){var Cu=LongBits$1.from(Tu);return this._push(writeFixed32,4,Cu.lo)._push(writeFixed32,4,Cu.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function _u(Tu){return this._push(util$4.float.writeFloatLE,4,Tu)};Writer$1.prototype.double=function _u(Tu){return this._push(util$4.float.writeDoubleLE,8,Tu)};var writeBytes=util$4.Array.prototype.set?function _u(Tu,Cu,Pu){Cu.set(Tu,Pu)}:function _u(Tu,Cu,Pu){for(var Bu=0;Bu<Tu.length;++Bu)Cu[Pu+Bu]=Tu[Bu]};Writer$1.prototype.bytes=function _u(Tu){var Cu=Tu.length>>>0;if(!Cu)return this._push(writeByte,1,0);if(util$4.isString(Tu)){var Pu=Writer$1.alloc(Cu=base64.length(Tu));base64.decode(Tu,Pu,0),Tu=Pu}return this.uint32(Cu)._push(writeBytes,Cu,Tu)};Writer$1.prototype.string=function _u(Tu){var Cu=utf8$1.length(Tu);return Cu?this.uint32(Cu)._push(utf8$1.write,Cu,Tu):this._push(writeByte,1,0)};Writer$1.prototype.fork=function _u(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function _u(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function _u(){var Tu=this.head,Cu=this.tail,Pu=this.len;return this.reset().uint32(Pu),Pu&&(this.tail.next=Tu.next,this.tail=Cu,this.len+=Pu),this};Writer$1.prototype.finish=function _u(){for(var Tu=this.head.next,Cu=this.constructor.alloc(this.len),Pu=0;Tu;)Tu.fn(Tu.val,Cu,Pu),Pu+=Tu.len,Tu=Tu.next;return Cu};Writer$1._configure=function(_u){BufferWriter$1=_u,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(Tu,Cu,Pu){Cu.set(Tu,Pu)}:function(Tu,Cu,Pu){if(Tu.copy)Tu.copy(Cu,Pu,0,Tu.length);else for(var Bu=0;Bu<Tu.length;)Cu[Pu++]=Tu[Bu++]}};BufferWriter.prototype.bytes=function _u(Tu){util$3.isString(Tu)&&(Tu=util$3._Buffer_from(Tu,"base64"));var Cu=Tu.length>>>0;return this.uint32(Cu),Cu&&this._push(BufferWriter.writeBytesBuffer,Cu,Tu),this};function writeStringBuffer(_u,Tu,Cu){_u.length<40?util$3.utf8.write(_u,Tu,Cu):Tu.utf8Write?Tu.utf8Write(_u,Cu):Tu.write(_u,Cu)}BufferWriter.prototype.string=function _u(Tu){var Cu=util$3.Buffer.byteLength(Tu);return this.uint32(Cu),Cu&&this._push(writeStringBuffer,Cu,Tu),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(_u,Tu){return RangeError("index out of range: "+_u.pos+" + "+(Tu||1)+" > "+_u.len)}function Reader$1(_u){this.buf=_u,this.pos=0,this.len=_u.length}var create_array=typeof Uint8Array!="undefined"?function _u(Tu){if(Tu instanceof Uint8Array||Array.isArray(Tu))return new Reader$1(Tu);throw Error("illegal buffer")}:function _u(Tu){if(Array.isArray(Tu))return new Reader$1(Tu);throw Error("illegal buffer")},create=function _u(){return util$2.Buffer?function(Cu){return(Reader$1.create=function(Bu){return util$2.Buffer.isBuffer(Bu)?new BufferReader$1(Bu):create_array(Bu)})(Cu)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function _u(){var Tu=4294967295;return function(){if(Tu=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(Tu=(Tu|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(Tu=(Tu|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(Tu=(Tu|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(Tu=(Tu|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return Tu;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return Tu}}();Reader$1.prototype.int32=function _u(){return this.uint32()|0};Reader$1.prototype.sint32=function _u(){var Tu=this.uint32();return Tu>>>1^-(Tu&1)|0};function readLongVarint(){var _u=new LongBits(0,0),Tu=0;if(this.len-this.pos>4){for(;Tu<4;++Tu)if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<Tu*7)>>>0,this.buf[this.pos++]<128)return _u;if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<28)>>>0,_u.hi=(_u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return _u;Tu=0}else{for(;Tu<3;++Tu){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<Tu*7)>>>0,this.buf[this.pos++]<128)return _u}return _u.lo=(_u.lo|(this.buf[this.pos++]&127)<<Tu*7)>>>0,_u}if(this.len-this.pos>4){for(;Tu<5;++Tu)if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<Tu*7+3)>>>0,this.buf[this.pos++]<128)return _u}else for(;Tu<5;++Tu){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<Tu*7+3)>>>0,this.buf[this.pos++]<128)return _u}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function _u(){return this.uint32()!==0};function readFixed32_end(_u,Tu){return(_u[Tu-4]|_u[Tu-3]<<8|_u[Tu-2]<<16|_u[Tu-1]<<24)>>>0}Reader$1.prototype.fixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var Tu=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Tu};Reader$1.prototype.double=function _u(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var Tu=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Tu};Reader$1.prototype.bytes=function _u(){var Tu=this.uint32(),Cu=this.pos,Pu=this.pos+Tu;if(Pu>this.len)throw indexOutOfRange(this,Tu);return this.pos+=Tu,Array.isArray(this.buf)?this.buf.slice(Cu,Pu):Cu===Pu?new this.buf.constructor(0):this._slice.call(this.buf,Cu,Pu)};Reader$1.prototype.string=function _u(){var Tu=this.bytes();return utf8.read(Tu,0,Tu.length)};Reader$1.prototype.skip=function _u(Tu){if(typeof Tu=="number"){if(this.pos+Tu>this.len)throw indexOutOfRange(this,Tu);this.pos+=Tu}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(_u){switch(_u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(_u=this.uint32()&7)!==4;)this.skipType(_u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+_u+" at offset "+this.pos)}return this};Reader$1._configure=function(_u){BufferReader$1=_u,Reader$1.create=create(),BufferReader$1._configure();var Tu=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[Tu](!1)},uint64:function(){return readLongVarint.call(this)[Tu](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[Tu](!1)},fixed64:function(){return readFixed64.call(this)[Tu](!0)},sfixed64:function(){return readFixed64.call(this)[Tu](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(_u){Reader.call(this,_u)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function _u(){var Tu=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+Tu,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+Tu,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(_u,Tu,Cu){if(typeof _u!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=_u,this.requestDelimited=Boolean(Tu),this.responseDelimited=Boolean(Cu)}Service.prototype.rpcCall=function _u(Tu,Cu,Pu,Bu,Ru){if(!Bu)throw TypeError("request must be specified");var Lu=this;if(!Ru)return util.asPromise(_u,Lu,Tu,Cu,Pu,Bu);if(!Lu.rpcImpl){setTimeout(function(){Ru(Error("already ended"))},0);return}try{return Lu.rpcImpl(Tu,Cu[Lu.requestDelimited?"encodeDelimited":"encode"](Bu).finish(),function(Du,$u){if(Du)return Lu.emit("error",Du,Tu),Ru(Du);if($u===null){Lu.end(!0);return}if(!($u instanceof Pu))try{$u=Pu[Lu.responseDelimited?"decodeDelimited":"decode"]($u)}catch(ku){return Lu.emit("error",ku,Tu),Ru(ku)}return Lu.emit("data",$u,Tu),Ru(null,$u)})}catch(Ou){Lu.emit("error",Ou,Tu),setTimeout(function(){Ru(Ou)},0);return}};Service.prototype.end=function _u(Tu){return this.rpcImpl&&(Tu||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(_u){var Tu=_u;Tu.Service=service})(rpc);var roots={};(function(_u){var Tu=_u;Tu.build="minimal",Tu.Writer=writer,Tu.BufferWriter=writer_buffer,Tu.Reader=reader,Tu.BufferReader=reader_buffer,Tu.util=minimal$1,Tu.rpc=rpc,Tu.roots=roots,Tu.configure=Cu;function Cu(){Tu.util._configure(),Tu.Writer._configure(Tu.BufferWriter),Tu.Reader._configure(Tu.BufferReader)}Cu()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe$1,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$2=require$$1,t$3=tslib.exports,i$2=minimal;function n$3(_u){if(_u&&_u.__esModule)return _u;var Tu=Object.create(null);return _u&&Object.keys(_u).forEach(function(Cu){if(Cu!=="default"){var Pu=Object.getOwnPropertyDescriptor(_u,Cu);Object.defineProperty(Tu,Cu,Pu.get?Pu:{enumerable:!0,get:function(){return _u[Cu]}})}}),Tu.default=_u,Object.freeze(Tu)}var r$3=n$3(e$2),o$2=n$3(i$2),s$2=Number(r$3.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$2,l$3={},u$2={},h$2=h$2||function(_u,Tu){var Cu={},Pu=Cu.lib={},Bu=Pu.Base=function(){function Nu(){}return{extend:function(Vu){Nu.prototype=this;var Gu=new Nu;return Vu&&Gu.mixIn(Vu),Gu.hasOwnProperty("init")||(Gu.init=function(){Gu.$super.init.apply(this,arguments)}),Gu.init.prototype=Gu,Gu.$super=this,Gu},create:function(){var Vu=this.extend();return Vu.init.apply(Vu,arguments),Vu},init:function(){},mixIn:function(Vu){for(var Gu in Vu)Vu.hasOwnProperty(Gu)&&(this[Gu]=Vu[Gu]);Vu.hasOwnProperty("toString")&&(this.toString=Vu.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Ru=Pu.WordArray=Bu.extend({init:function(Nu,Vu){Nu=this.words=Nu||[],this.sigBytes=Vu!=null?Vu:4*Nu.length},toString:function(Nu){return(Nu||Ou).stringify(this)},concat:function(Nu){var Vu=this.words,Gu=Nu.words,Hu=this.sigBytes,ju=Nu.sigBytes;if(this.clamp(),Hu%4)for(var Uu=0;Uu<ju;Uu++){var zu=Gu[Uu>>>2]>>>24-Uu%4*8&255;Vu[Hu+Uu>>>2]|=zu<<24-(Hu+Uu)%4*8}else for(Uu=0;Uu<ju;Uu+=4)Vu[Hu+Uu>>>2]=Gu[Uu>>>2];return this.sigBytes+=ju,this},clamp:function(){var Nu=this.words,Vu=this.sigBytes;Nu[Vu>>>2]&=4294967295<<32-Vu%4*8,Nu.length=_u.ceil(Vu/4)},clone:function(){var Nu=Bu.clone.call(this);return Nu.words=this.words.slice(0),Nu},random:function(Nu){for(var Vu=[],Gu=0;Gu<Nu;Gu+=4)Vu.push(4294967296*_u.random()|0);return new Ru.init(Vu,Nu)}}),Lu=Cu.enc={},Ou=Lu.Hex={stringify:function(Nu){for(var Vu=Nu.words,Gu=Nu.sigBytes,Hu=[],ju=0;ju<Gu;ju++){var Uu=Vu[ju>>>2]>>>24-ju%4*8&255;Hu.push((Uu>>>4).toString(16)),Hu.push((15&Uu).toString(16))}return Hu.join("")},parse:function(Nu){for(var Vu=Nu.length,Gu=[],Hu=0;Hu<Vu;Hu+=2)Gu[Hu>>>3]|=parseInt(Nu.substr(Hu,2),16)<<24-Hu%8*4;return new Ru.init(Gu,Vu/2)}},Du=Lu.Latin1={stringify:function(Nu){for(var Vu=Nu.words,Gu=Nu.sigBytes,Hu=[],ju=0;ju<Gu;ju++){var Uu=Vu[ju>>>2]>>>24-ju%4*8&255;Hu.push(String.fromCharCode(Uu))}return Hu.join("")},parse:function(Nu){for(var Vu=Nu.length,Gu=[],Hu=0;Hu<Vu;Hu++)Gu[Hu>>>2]|=(255&Nu.charCodeAt(Hu))<<24-Hu%4*8;return new Ru.init(Gu,Vu)}},$u=Lu.Utf8={stringify:function(Nu){try{return decodeURIComponent(escape(Du.stringify(Nu)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Nu){return Du.parse(unescape(encodeURIComponent(Nu)))}},ku=Pu.BufferedBlockAlgorithm=Bu.extend({reset:function(){this._data=new Ru.init,this._nDataBytes=0},_append:function(Nu){typeof Nu=="string"&&(Nu=$u.parse(Nu)),this._data.concat(Nu),this._nDataBytes+=Nu.sigBytes},_process:function(Nu){var Vu=this._data,Gu=Vu.words,Hu=Vu.sigBytes,ju=this.blockSize,Uu=Hu/(4*ju),zu=(Uu=Nu?_u.ceil(Uu):_u.max((0|Uu)-this._minBufferSize,0))*ju,Wu=_u.min(4*zu,Hu);if(zu){for(var Qu=0;Qu<zu;Qu+=ju)this._doProcessBlock(Gu,Qu);var qu=Gu.splice(0,zu);Vu.sigBytes-=Wu}return new Ru.init(qu,Wu)},clone:function(){var Nu=Bu.clone.call(this);return Nu._data=this._data.clone(),Nu},_minBufferSize:0});Pu.Hasher=ku.extend({cfg:Bu.extend(),init:function(Nu){this.cfg=this.cfg.extend(Nu),this.reset()},reset:function(){ku.reset.call(this),this._doReset()},update:function(Nu){return this._append(Nu),this._process(),this},finalize:function(Nu){return Nu&&this._append(Nu),this._doFinalize()},blockSize:16,_createHelper:function(Nu){return function(Vu,Gu){return new Nu.init(Gu).finalize(Vu)}},_createHmacHelper:function(Nu){return function(Vu,Gu){return new Fu.HMAC.init(Nu,Gu).finalize(Vu)}}});var Fu=Cu.algo={};return Cu}(Math);function c$2(_u,Tu,Cu){_u!=null&&(typeof _u=="number"?this.fromNumber(_u,Tu,Cu):Tu==null&&typeof _u!="string"?this.fromString(_u,256):this.fromString(_u,Tu))}function d$1(){return new c$2(null)}(function(_u){for(var Tu=h$2,Cu=(Bu=Tu.lib).WordArray,Pu=Bu.Hasher,Bu=Tu.algo,Ru=[],Lu=[],Ou=function(Gu){return 4294967296*(Gu-(0|Gu))|0},Du=2,$u=0;64>$u;){var ku;e:{ku=Du;for(var Fu=_u.sqrt(ku),Nu=2;Nu<=Fu;Nu++)if(!(ku%Nu)){ku=!1;break e}ku=!0}ku&&(8>$u&&(Ru[$u]=Ou(_u.pow(Du,.5))),Lu[$u]=Ou(_u.pow(Du,1/3)),$u++),Du++}var Vu=[];Bu=Bu.SHA256=Pu.extend({_doReset:function(){this._hash=new Cu.init(Ru.slice(0))},_doProcessBlock:function(Gu,Hu){for(var ju=this._hash.words,Uu=ju[0],zu=ju[1],Wu=ju[2],Qu=ju[3],qu=ju[4],Yu=ju[5],Xc=ju[6],_h=ju[7],_d=0;64>_d;_d++){if(16>_d)Vu[_d]=0|Gu[Hu+_d];else{var Ku=Vu[_d-15],Xu=Vu[_d-2];Vu[_d]=((Ku<<25|Ku>>>7)^(Ku<<14|Ku>>>18)^Ku>>>3)+Vu[_d-7]+((Xu<<15|Xu>>>17)^(Xu<<13|Xu>>>19)^Xu>>>10)+Vu[_d-16]}Ku=_h+((qu<<26|qu>>>6)^(qu<<21|qu>>>11)^(qu<<7|qu>>>25))+(qu&Yu^~qu&Xc)+Lu[_d]+Vu[_d],Xu=((Uu<<30|Uu>>>2)^(Uu<<19|Uu>>>13)^(Uu<<10|Uu>>>22))+(Uu&zu^Uu&Wu^zu&Wu),_h=Xc,Xc=Yu,Yu=qu,qu=Qu+Ku|0,Qu=Wu,Wu=zu,zu=Uu,Uu=Ku+Xu|0}ju[0]=ju[0]+Uu|0,ju[1]=ju[1]+zu|0,ju[2]=ju[2]+Wu|0,ju[3]=ju[3]+Qu|0,ju[4]=ju[4]+qu|0,ju[5]=ju[5]+Yu|0,ju[6]=ju[6]+Xc|0,ju[7]=ju[7]+_h|0},_doFinalize:function(){var Gu=this._data,Hu=Gu.words,ju=8*this._nDataBytes,Uu=8*Gu.sigBytes;return Hu[Uu>>>5]|=128<<24-Uu%32,Hu[14+(Uu+64>>>9<<4)]=_u.floor(ju/4294967296),Hu[15+(Uu+64>>>9<<4)]=ju,Gu.sigBytes=4*Hu.length,this._process(),this._hash},clone:function(){var Gu=Pu.clone.call(this);return Gu._hash=this._hash.clone(),Gu}}),Tu.SHA256=Pu._createHelper(Bu),Tu.HmacSHA256=Pu._createHmacHelper(Bu)})(Math),h$2.lib.Cipher||function(_u){var Tu=(Vu=h$2).lib,Cu=Tu.Base,Pu=Tu.WordArray,Bu=Tu.BufferedBlockAlgorithm,Ru=Vu.enc.Base64,Lu=Vu.algo.EvpKDF,Ou=Tu.Cipher=Bu.extend({cfg:Cu.extend(),createEncryptor:function(Hu,ju){return this.create(this._ENC_XFORM_MODE,Hu,ju)},createDecryptor:function(Hu,ju){return this.create(this._DEC_XFORM_MODE,Hu,ju)},init:function(Hu,ju,Uu){this.cfg=this.cfg.extend(Uu),this._xformMode=Hu,this._key=ju,this.reset()},reset:function(){Bu.reset.call(this),this._doReset()},process:function(Hu){return this._append(Hu),this._process()},finalize:function(Hu){return Hu&&this._append(Hu),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(Hu){return{encrypt:function(ju,Uu,zu){return(typeof Uu=="string"?Gu:Nu).encrypt(Hu,ju,Uu,zu)},decrypt:function(ju,Uu,zu){return(typeof Uu=="string"?Gu:Nu).decrypt(Hu,ju,Uu,zu)}}}});Tu.StreamCipher=Ou.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Du=Vu.mode={},$u=function(Hu,ju,Uu){var zu=this._iv;zu?this._iv=void 0:zu=this._prevBlock;for(var Wu=0;Wu<Uu;Wu++)Hu[ju+Wu]^=zu[Wu]},ku=(Tu.BlockCipherMode=Cu.extend({createEncryptor:function(Hu,ju){return this.Encryptor.create(Hu,ju)},createDecryptor:function(Hu,ju){return this.Decryptor.create(Hu,ju)},init:function(Hu,ju){this._cipher=Hu,this._iv=ju}})).extend();ku.Encryptor=ku.extend({processBlock:function(Hu,ju){var Uu=this._cipher,zu=Uu.blockSize;$u.call(this,Hu,ju,zu),Uu.encryptBlock(Hu,ju),this._prevBlock=Hu.slice(ju,ju+zu)}}),ku.Decryptor=ku.extend({processBlock:function(Hu,ju){var Uu=this._cipher,zu=Uu.blockSize,Wu=Hu.slice(ju,ju+zu);Uu.decryptBlock(Hu,ju),$u.call(this,Hu,ju,zu),this._prevBlock=Wu}}),Du=Du.CBC=ku,ku=(Vu.pad={}).Pkcs7={pad:function(Hu,ju){for(var Uu,zu=(Uu=(Uu=4*ju)-Hu.sigBytes%Uu)<<24|Uu<<16|Uu<<8|Uu,Wu=[],Qu=0;Qu<Uu;Qu+=4)Wu.push(zu);Uu=Pu.create(Wu,Uu),Hu.concat(Uu)},unpad:function(Hu){Hu.sigBytes-=255&Hu.words[Hu.sigBytes-1>>>2]}},Tu.BlockCipher=Ou.extend({cfg:Ou.cfg.extend({mode:Du,padding:ku}),reset:function(){Ou.reset.call(this);var Hu=(ju=this.cfg).iv,ju=ju.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Uu=ju.createEncryptor;else Uu=ju.createDecryptor,this._minBufferSize=1;this._mode=Uu.call(ju,this,Hu&&Hu.words)},_doProcessBlock:function(Hu,ju){this._mode.processBlock(Hu,ju)},_doFinalize:function(){var Hu=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){Hu.pad(this._data,this.blockSize);var ju=this._process(!0)}else ju=this._process(!0),Hu.unpad(ju);return ju},blockSize:4});var Fu=Tu.CipherParams=Cu.extend({init:function(Hu){this.mixIn(Hu)},toString:function(Hu){return(Hu||this.formatter).stringify(this)}}),Nu=(Du=(Vu.format={}).OpenSSL={stringify:function(Hu){var ju=Hu.ciphertext;return((Hu=Hu.salt)?Pu.create([1398893684,1701076831]).concat(Hu).concat(ju):ju).toString(Ru)},parse:function(Hu){var ju=(Hu=Ru.parse(Hu)).words;if(ju[0]==1398893684&&ju[1]==1701076831){var Uu=Pu.create(ju.slice(2,4));ju.splice(0,4),Hu.sigBytes-=16}return Fu.create({ciphertext:Hu,salt:Uu})}},Tu.SerializableCipher=Cu.extend({cfg:Cu.extend({format:Du}),encrypt:function(Hu,ju,Uu,zu){zu=this.cfg.extend(zu);var Wu=Hu.createEncryptor(Uu,zu);return ju=Wu.finalize(ju),Wu=Wu.cfg,Fu.create({ciphertext:ju,key:Uu,iv:Wu.iv,algorithm:Hu,mode:Wu.mode,padding:Wu.padding,blockSize:Hu.blockSize,formatter:zu.format})},decrypt:function(Hu,ju,Uu,zu){return zu=this.cfg.extend(zu),ju=this._parse(ju,zu.format),Hu.createDecryptor(Uu,zu).finalize(ju.ciphertext)},_parse:function(Hu,ju){return typeof Hu=="string"?ju.parse(Hu,this):Hu}})),Vu=(Vu.kdf={}).OpenSSL={execute:function(Hu,ju,Uu,zu){return zu||(zu=Pu.random(8)),Hu=Lu.create({keySize:ju+Uu}).compute(Hu,zu),Uu=Pu.create(Hu.words.slice(ju),4*Uu),Hu.sigBytes=4*ju,Fu.create({key:Hu,iv:Uu,salt:zu})}},Gu=Tu.PasswordBasedCipher=Nu.extend({cfg:Nu.cfg.extend({kdf:Vu}),encrypt:function(Hu,ju,Uu,zu){return Uu=(zu=this.cfg.extend(zu)).kdf.execute(Uu,Hu.keySize,Hu.ivSize),zu.iv=Uu.iv,(Hu=Nu.encrypt.call(this,Hu,ju,Uu.key,zu)).mixIn(Uu),Hu},decrypt:function(Hu,ju,Uu,zu){return zu=this.cfg.extend(zu),ju=this._parse(ju,zu.format),Uu=zu.kdf.execute(Uu,Hu.keySize,Hu.ivSize,ju.salt),zu.iv=Uu.iv,Nu.decrypt.call(this,Hu,ju,Uu.key,zu)}})}(),function(){for(var _u=h$2,Tu=_u.lib.BlockCipher,Cu=_u.algo,Pu=[],Bu=[],Ru=[],Lu=[],Ou=[],Du=[],$u=[],ku=[],Fu=[],Nu=[],Vu=[],Gu=0;256>Gu;Gu++)Vu[Gu]=128>Gu?Gu<<1:Gu<<1^283;var Hu=0,ju=0;for(Gu=0;256>Gu;Gu++){var Uu=(Uu=ju^ju<<1^ju<<2^ju<<3^ju<<4)>>>8^255&Uu^99;Pu[Hu]=Uu,Bu[Uu]=Hu;var zu=Vu[Hu],Wu=Vu[zu],Qu=Vu[Wu],qu=257*Vu[Uu]^16843008*Uu;Ru[Hu]=qu<<24|qu>>>8,Lu[Hu]=qu<<16|qu>>>16,Ou[Hu]=qu<<8|qu>>>24,Du[Hu]=qu,qu=16843009*Qu^65537*Wu^257*zu^16843008*Hu,$u[Uu]=qu<<24|qu>>>8,ku[Uu]=qu<<16|qu>>>16,Fu[Uu]=qu<<8|qu>>>24,Nu[Uu]=qu,Hu?(Hu=zu^Vu[Vu[Vu[Qu^zu]]],ju^=Vu[Vu[ju]]):Hu=ju=1}var Yu=[0,1,2,4,8,16,32,64,128,27,54];Cu=Cu.AES=Tu.extend({_doReset:function(){for(var Xc=(_d=this._key).words,_h=_d.sigBytes/4,_d=4*((this._nRounds=_h+6)+1),Ku=this._keySchedule=[],Xu=0;Xu<_d;Xu++)if(Xu<_h)Ku[Xu]=Xc[Xu];else{var Ju=Ku[Xu-1];Xu%_h?6<_h&&Xu%_h==4&&(Ju=Pu[Ju>>>24]<<24|Pu[Ju>>>16&255]<<16|Pu[Ju>>>8&255]<<8|Pu[255&Ju]):(Ju=Pu[(Ju=Ju<<8|Ju>>>24)>>>24]<<24|Pu[Ju>>>16&255]<<16|Pu[Ju>>>8&255]<<8|Pu[255&Ju],Ju^=Yu[Xu/_h|0]<<24),Ku[Xu]=Ku[Xu-_h]^Ju}for(Xc=this._invKeySchedule=[],_h=0;_h<_d;_h++)Xu=_d-_h,Ju=_h%4?Ku[Xu]:Ku[Xu-4],Xc[_h]=4>_h||4>=Xu?Ju:$u[Pu[Ju>>>24]]^ku[Pu[Ju>>>16&255]]^Fu[Pu[Ju>>>8&255]]^Nu[Pu[255&Ju]]},encryptBlock:function(Xc,_h){this._doCryptBlock(Xc,_h,this._keySchedule,Ru,Lu,Ou,Du,Pu)},decryptBlock:function(Xc,_h){var _d=Xc[_h+1];Xc[_h+1]=Xc[_h+3],Xc[_h+3]=_d,this._doCryptBlock(Xc,_h,this._invKeySchedule,$u,ku,Fu,Nu,Bu),_d=Xc[_h+1],Xc[_h+1]=Xc[_h+3],Xc[_h+3]=_d},_doCryptBlock:function(Xc,_h,_d,Ku,Xu,Ju,Zu,_c){for(var _f=this._nRounds,ep=Xc[_h]^_d[0],tp=Xc[_h+1]^_d[1],op=Xc[_h+2]^_d[2],hp=Xc[_h+3]^_d[3],cp=4,Sp=1;Sp<_f;Sp++){var yp=Ku[ep>>>24]^Xu[tp>>>16&255]^Ju[op>>>8&255]^Zu[255&hp]^_d[cp++],Rp=Ku[tp>>>24]^Xu[op>>>16&255]^Ju[hp>>>8&255]^Zu[255&ep]^_d[cp++],wp=Ku[op>>>24]^Xu[hp>>>16&255]^Ju[ep>>>8&255]^Zu[255&tp]^_d[cp++];hp=Ku[hp>>>24]^Xu[ep>>>16&255]^Ju[tp>>>8&255]^Zu[255&op]^_d[cp++],ep=yp,tp=Rp,op=wp}yp=(_c[ep>>>24]<<24|_c[tp>>>16&255]<<16|_c[op>>>8&255]<<8|_c[255&hp])^_d[cp++],Rp=(_c[tp>>>24]<<24|_c[op>>>16&255]<<16|_c[hp>>>8&255]<<8|_c[255&ep])^_d[cp++],wp=(_c[op>>>24]<<24|_c[hp>>>16&255]<<16|_c[ep>>>8&255]<<8|_c[255&tp])^_d[cp++],hp=(_c[hp>>>24]<<24|_c[ep>>>16&255]<<16|_c[tp>>>8&255]<<8|_c[255&op])^_d[cp++],Xc[_h]=yp,Xc[_h+1]=Rp,Xc[_h+2]=wp,Xc[_h+3]=hp},keySize:8}),_u.AES=Tu._createHelper(Cu)}(),u$2.lang={extend:function(_u,Tu,Cu){if(!Tu||!_u)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Pu=function(){};if(Pu.prototype=Tu.prototype,_u.prototype=new Pu,_u.prototype.constructor=_u,_u.superclass=Tu.prototype,Tu.prototype.constructor==Object.prototype.constructor&&(Tu.prototype.constructor=Tu),Cu){var Bu;for(Bu in Cu)_u.prototype[Bu]=Cu[Bu];var Ru=function(){},Lu=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Ru=function(Ou,Du){for(Bu=0;Bu<Lu.length;Bu+=1){var $u=Lu[Bu],ku=Du[$u];typeof ku=="function"&&ku!=Object.prototype[$u]&&(Ou[$u]=ku)}})}catch{}Ru(_u.prototype,Cu)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$2.prototype.am=function(_u,Tu,Cu,Pu,Bu,Ru){for(var Lu=32767&Tu,Ou=Tu>>15;--Ru>=0;){var Du=32767&this[_u],$u=this[_u++]>>15,ku=Ou*Du+$u*Lu;Bu=((Du=Lu*Du+((32767&ku)<<15)+Cu[Pu]+(1073741823&Bu))>>>30)+(ku>>>15)+Ou*$u+(Bu>>>30),Cu[Pu++]=1073741823&Du}return Bu},a$2=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$2.prototype.am=function(_u,Tu,Cu,Pu,Bu,Ru){for(;--Ru>=0;){var Lu=Tu*this[_u++]+Cu[Pu]+Bu;Bu=Math.floor(Lu/67108864),Cu[Pu++]=67108863&Lu}return Bu},a$2=26):(c$2.prototype.am=function(_u,Tu,Cu,Pu,Bu,Ru){for(var Lu=16383&Tu,Ou=Tu>>14;--Ru>=0;){var Du=16383&this[_u],$u=this[_u++]>>14,ku=Ou*Du+$u*Lu;Bu=((Du=Lu*Du+((16383&ku)<<14)+Cu[Pu]+Bu)>>28)+(ku>>14)+Ou*$u,Cu[Pu++]=268435455&Du}return Bu},a$2=28),c$2.prototype.DB=a$2,c$2.prototype.DM=(1<<a$2)-1,c$2.prototype.DV=1<<a$2;c$2.prototype.FV=Math.pow(2,52),c$2.prototype.F1=52-a$2,c$2.prototype.F2=2*a$2-52;var p$2,f$2,A$2=new Array;for(p$2="0".charCodeAt(0),f$2=0;f$2<=9;++f$2)A$2[p$2++]=f$2;for(p$2="a".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;for(p$2="A".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;function g$2(_u){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(_u)}function m$2(_u,Tu){var Cu=A$2[_u.charCodeAt(Tu)];return Cu==null?-1:Cu}function v$2(_u){var Tu=d$1();return Tu.fromInt(_u),Tu}function y$2(_u){var Tu,Cu=1;return(Tu=_u>>>16)!=0&&(_u=Tu,Cu+=16),(Tu=_u>>8)!=0&&(_u=Tu,Cu+=8),(Tu=_u>>4)!=0&&(_u=Tu,Cu+=4),(Tu=_u>>2)!=0&&(_u=Tu,Cu+=2),(Tu=_u>>1)!=0&&(_u=Tu,Cu+=1),Cu}function b$1(_u){this.m=_u}function x$1(_u){this.m=_u,this.mp=_u.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<_u.DB-15)-1,this.mt2=2*_u.t}function w$2(_u,Tu){return _u&Tu}function E$2(_u,Tu){return _u|Tu}function M$1(_u,Tu){return _u^Tu}function I$1(_u,Tu){return _u&~Tu}function S$1(_u){if(_u==0)return-1;var Tu=0;return(65535&_u)==0&&(_u>>=16,Tu+=16),(255&_u)==0&&(_u>>=8,Tu+=8),(15&_u)==0&&(_u>>=4,Tu+=4),(3&_u)==0&&(_u>>=2,Tu+=2),(1&_u)==0&&++Tu,Tu}function C$2(_u){for(var Tu=0;_u!=0;)_u&=_u-1,++Tu;return Tu}function B$1(){}function T(_u){return _u}function P$2(_u){this.r2=d$1(),this.q3=d$1(),c$2.ONE.dlShiftTo(2*_u.t,this.r2),this.mu=this.r2.divide(_u),this.m=_u}b$1.prototype.convert=function(_u){return _u.s<0||_u.compareTo(this.m)>=0?_u.mod(this.m):_u},b$1.prototype.revert=function(_u){return _u},b$1.prototype.reduce=function(_u){_u.divRemTo(this.m,null,_u)},b$1.prototype.mulTo=function(_u,Tu,Cu){_u.multiplyTo(Tu,Cu),this.reduce(Cu)},b$1.prototype.sqrTo=function(_u,Tu){_u.squareTo(Tu),this.reduce(Tu)},x$1.prototype.convert=function(_u){var Tu=d$1();return _u.abs().dlShiftTo(this.m.t,Tu),Tu.divRemTo(this.m,null,Tu),_u.s<0&&Tu.compareTo(c$2.ZERO)>0&&this.m.subTo(Tu,Tu),Tu},x$1.prototype.revert=function(_u){var Tu=d$1();return _u.copyTo(Tu),this.reduce(Tu),Tu},x$1.prototype.reduce=function(_u){for(;_u.t<=this.mt2;)_u[_u.t++]=0;for(var Tu=0;Tu<this.m.t;++Tu){var Cu=32767&_u[Tu],Pu=Cu*this.mpl+((Cu*this.mph+(_u[Tu]>>15)*this.mpl&this.um)<<15)&_u.DM;for(_u[Cu=Tu+this.m.t]+=this.m.am(0,Pu,_u,Tu,0,this.m.t);_u[Cu]>=_u.DV;)_u[Cu]-=_u.DV,_u[++Cu]++}_u.clamp(),_u.drShiftTo(this.m.t,_u),_u.compareTo(this.m)>=0&&_u.subTo(this.m,_u)},x$1.prototype.mulTo=function(_u,Tu,Cu){_u.multiplyTo(Tu,Cu),this.reduce(Cu)},x$1.prototype.sqrTo=function(_u,Tu){_u.squareTo(Tu),this.reduce(Tu)},c$2.prototype.copyTo=function(_u){for(var Tu=this.t-1;Tu>=0;--Tu)_u[Tu]=this[Tu];_u.t=this.t,_u.s=this.s},c$2.prototype.fromInt=function(_u){this.t=1,this.s=_u<0?-1:0,_u>0?this[0]=_u:_u<-1?this[0]=_u+this.DV:this.t=0},c$2.prototype.fromString=function(_u,Tu){var Cu;if(Tu==16)Cu=4;else if(Tu==8)Cu=3;else if(Tu==256)Cu=8;else if(Tu==2)Cu=1;else if(Tu==32)Cu=5;else{if(Tu!=4)return void this.fromRadix(_u,Tu);Cu=2}this.t=0,this.s=0;for(var Pu=_u.length,Bu=!1,Ru=0;--Pu>=0;){var Lu=Cu==8?255&_u[Pu]:m$2(_u,Pu);Lu<0?_u.charAt(Pu)=="-"&&(Bu=!0):(Bu=!1,Ru==0?this[this.t++]=Lu:Ru+Cu>this.DB?(this[this.t-1]|=(Lu&(1<<this.DB-Ru)-1)<<Ru,this[this.t++]=Lu>>this.DB-Ru):this[this.t-1]|=Lu<<Ru,(Ru+=Cu)>=this.DB&&(Ru-=this.DB))}Cu==8&&(128&_u[0])!=0&&(this.s=-1,Ru>0&&(this[this.t-1]|=(1<<this.DB-Ru)-1<<Ru)),this.clamp(),Bu&&c$2.ZERO.subTo(this,this)},c$2.prototype.clamp=function(){for(var _u=this.s&this.DM;this.t>0&&this[this.t-1]==_u;)--this.t},c$2.prototype.dlShiftTo=function(_u,Tu){var Cu;for(Cu=this.t-1;Cu>=0;--Cu)Tu[Cu+_u]=this[Cu];for(Cu=_u-1;Cu>=0;--Cu)Tu[Cu]=0;Tu.t=this.t+_u,Tu.s=this.s},c$2.prototype.drShiftTo=function(_u,Tu){for(var Cu=_u;Cu<this.t;++Cu)Tu[Cu-_u]=this[Cu];Tu.t=Math.max(this.t-_u,0),Tu.s=this.s},c$2.prototype.lShiftTo=function(_u,Tu){var Cu,Pu=_u%this.DB,Bu=this.DB-Pu,Ru=(1<<Bu)-1,Lu=Math.floor(_u/this.DB),Ou=this.s<<Pu&this.DM;for(Cu=this.t-1;Cu>=0;--Cu)Tu[Cu+Lu+1]=this[Cu]>>Bu|Ou,Ou=(this[Cu]&Ru)<<Pu;for(Cu=Lu-1;Cu>=0;--Cu)Tu[Cu]=0;Tu[Lu]=Ou,Tu.t=this.t+Lu+1,Tu.s=this.s,Tu.clamp()},c$2.prototype.rShiftTo=function(_u,Tu){Tu.s=this.s;var Cu=Math.floor(_u/this.DB);if(Cu>=this.t)Tu.t=0;else{var Pu=_u%this.DB,Bu=this.DB-Pu,Ru=(1<<Pu)-1;Tu[0]=this[Cu]>>Pu;for(var Lu=Cu+1;Lu<this.t;++Lu)Tu[Lu-Cu-1]|=(this[Lu]&Ru)<<Bu,Tu[Lu-Cu]=this[Lu]>>Pu;Pu>0&&(Tu[this.t-Cu-1]|=(this.s&Ru)<<Bu),Tu.t=this.t-Cu,Tu.clamp()}},c$2.prototype.subTo=function(_u,Tu){for(var Cu=0,Pu=0,Bu=Math.min(_u.t,this.t);Cu<Bu;)Pu+=this[Cu]-_u[Cu],Tu[Cu++]=Pu&this.DM,Pu>>=this.DB;if(_u.t<this.t){for(Pu-=_u.s;Cu<this.t;)Pu+=this[Cu],Tu[Cu++]=Pu&this.DM,Pu>>=this.DB;Pu+=this.s}else{for(Pu+=this.s;Cu<_u.t;)Pu-=_u[Cu],Tu[Cu++]=Pu&this.DM,Pu>>=this.DB;Pu-=_u.s}Tu.s=Pu<0?-1:0,Pu<-1?Tu[Cu++]=this.DV+Pu:Pu>0&&(Tu[Cu++]=Pu),Tu.t=Cu,Tu.clamp()},c$2.prototype.multiplyTo=function(_u,Tu){var Cu=this.abs(),Pu=_u.abs(),Bu=Cu.t;for(Tu.t=Bu+Pu.t;--Bu>=0;)Tu[Bu]=0;for(Bu=0;Bu<Pu.t;++Bu)Tu[Bu+Cu.t]=Cu.am(0,Pu[Bu],Tu,Bu,0,Cu.t);Tu.s=0,Tu.clamp(),this.s!=_u.s&&c$2.ZERO.subTo(Tu,Tu)},c$2.prototype.squareTo=function(_u){for(var Tu=this.abs(),Cu=_u.t=2*Tu.t;--Cu>=0;)_u[Cu]=0;for(Cu=0;Cu<Tu.t-1;++Cu){var Pu=Tu.am(Cu,Tu[Cu],_u,2*Cu,0,1);(_u[Cu+Tu.t]+=Tu.am(Cu+1,2*Tu[Cu],_u,2*Cu+1,Pu,Tu.t-Cu-1))>=Tu.DV&&(_u[Cu+Tu.t]-=Tu.DV,_u[Cu+Tu.t+1]=1)}_u.t>0&&(_u[_u.t-1]+=Tu.am(Cu,Tu[Cu],_u,2*Cu,0,1)),_u.s=0,_u.clamp()},c$2.prototype.divRemTo=function(_u,Tu,Cu){var Pu=_u.abs();if(!(Pu.t<=0)){var Bu=this.abs();if(Bu.t<Pu.t)return Tu!=null&&Tu.fromInt(0),void(Cu!=null&&this.copyTo(Cu));Cu==null&&(Cu=d$1());var Ru=d$1(),Lu=this.s,Ou=_u.s,Du=this.DB-y$2(Pu[Pu.t-1]);Du>0?(Pu.lShiftTo(Du,Ru),Bu.lShiftTo(Du,Cu)):(Pu.copyTo(Ru),Bu.copyTo(Cu));var $u=Ru.t,ku=Ru[$u-1];if(ku!=0){var Fu=ku*(1<<this.F1)+($u>1?Ru[$u-2]>>this.F2:0),Nu=this.FV/Fu,Vu=(1<<this.F1)/Fu,Gu=1<<this.F2,Hu=Cu.t,ju=Hu-$u,Uu=Tu==null?d$1():Tu;for(Ru.dlShiftTo(ju,Uu),Cu.compareTo(Uu)>=0&&(Cu[Cu.t++]=1,Cu.subTo(Uu,Cu)),c$2.ONE.dlShiftTo($u,Uu),Uu.subTo(Ru,Ru);Ru.t<$u;)Ru[Ru.t++]=0;for(;--ju>=0;){var zu=Cu[--Hu]==ku?this.DM:Math.floor(Cu[Hu]*Nu+(Cu[Hu-1]+Gu)*Vu);if((Cu[Hu]+=Ru.am(0,zu,Cu,ju,0,$u))<zu)for(Ru.dlShiftTo(ju,Uu),Cu.subTo(Uu,Cu);Cu[Hu]<--zu;)Cu.subTo(Uu,Cu)}Tu!=null&&(Cu.drShiftTo($u,Tu),Lu!=Ou&&c$2.ZERO.subTo(Tu,Tu)),Cu.t=$u,Cu.clamp(),Du>0&&Cu.rShiftTo(Du,Cu),Lu<0&&c$2.ZERO.subTo(Cu,Cu)}}},c$2.prototype.invDigit=function(){if(this.t<1)return 0;var _u=this[0];if((1&_u)==0)return 0;var Tu=3&_u;return(Tu=(Tu=(Tu=(Tu=Tu*(2-(15&_u)*Tu)&15)*(2-(255&_u)*Tu)&255)*(2-((65535&_u)*Tu&65535))&65535)*(2-_u*Tu%this.DV)%this.DV)>0?this.DV-Tu:-Tu},c$2.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$2.prototype.exp=function(_u,Tu){if(_u>4294967295||_u<1)return c$2.ONE;var Cu=d$1(),Pu=d$1(),Bu=Tu.convert(this),Ru=y$2(_u)-1;for(Bu.copyTo(Cu);--Ru>=0;)if(Tu.sqrTo(Cu,Pu),(_u&1<<Ru)>0)Tu.mulTo(Pu,Bu,Cu);else{var Lu=Cu;Cu=Pu,Pu=Lu}return Tu.revert(Cu)},c$2.prototype.toString=function(_u){if(this.s<0)return"-"+this.negate().toString(_u);var Tu;if(_u==16)Tu=4;else if(_u==8)Tu=3;else if(_u==2)Tu=1;else if(_u==32)Tu=5;else{if(_u!=4)return this.toRadix(_u);Tu=2}var Cu,Pu=(1<<Tu)-1,Bu=!1,Ru="",Lu=this.t,Ou=this.DB-Lu*this.DB%Tu;if(Lu-- >0)for(Ou<this.DB&&(Cu=this[Lu]>>Ou)>0&&(Bu=!0,Ru=g$2(Cu));Lu>=0;)Ou<Tu?(Cu=(this[Lu]&(1<<Ou)-1)<<Tu-Ou,Cu|=this[--Lu]>>(Ou+=this.DB-Tu)):(Cu=this[Lu]>>(Ou-=Tu)&Pu,Ou<=0&&(Ou+=this.DB,--Lu)),Cu>0&&(Bu=!0),Bu&&(Ru+=g$2(Cu));return Bu?Ru:"0"},c$2.prototype.negate=function(){var _u=d$1();return c$2.ZERO.subTo(this,_u),_u},c$2.prototype.abs=function(){return this.s<0?this.negate():this},c$2.prototype.compareTo=function(_u){var Tu=this.s-_u.s;if(Tu!=0)return Tu;var Cu=this.t;if((Tu=Cu-_u.t)!=0)return this.s<0?-Tu:Tu;for(;--Cu>=0;)if((Tu=this[Cu]-_u[Cu])!=0)return Tu;return 0},c$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$2(this[this.t-1]^this.s&this.DM)},c$2.prototype.mod=function(_u){var Tu=d$1();return this.abs().divRemTo(_u,null,Tu),this.s<0&&Tu.compareTo(c$2.ZERO)>0&&_u.subTo(Tu,Tu),Tu},c$2.prototype.modPowInt=function(_u,Tu){var Cu;return Cu=_u<256||Tu.isEven()?new b$1(Tu):new x$1(Tu),this.exp(_u,Cu)},c$2.ZERO=v$2(0),c$2.ONE=v$2(1),B$1.prototype.convert=T,B$1.prototype.revert=T,B$1.prototype.mulTo=function(_u,Tu,Cu){_u.multiplyTo(Tu,Cu)},B$1.prototype.sqrTo=function(_u,Tu){_u.squareTo(Tu)},P$2.prototype.convert=function(_u){if(_u.s<0||_u.t>2*this.m.t)return _u.mod(this.m);if(_u.compareTo(this.m)<0)return _u;var Tu=d$1();return _u.copyTo(Tu),this.reduce(Tu),Tu},P$2.prototype.revert=function(_u){return _u},P$2.prototype.reduce=function(_u){for(_u.drShiftTo(this.m.t-1,this.r2),_u.t>this.m.t+1&&(_u.t=this.m.t+1,_u.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);_u.compareTo(this.r2)<0;)_u.dAddOffset(1,this.m.t+1);for(_u.subTo(this.r2,_u);_u.compareTo(this.m)>=0;)_u.subTo(this.m,_u)},P$2.prototype.mulTo=function(_u,Tu,Cu){_u.multiplyTo(Tu,Cu),this.reduce(Cu)},P$2.prototype.sqrTo=function(_u,Tu){_u.squareTo(Tu),this.reduce(Tu)};var R$2=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k$1=(1<<26)/R$2[R$2.length-1];c$2.prototype.chunkSize=function(_u){return Math.floor(Math.LN2*this.DB/Math.log(_u))},c$2.prototype.toRadix=function(_u){if(_u==null&&(_u=10),this.signum()==0||_u<2||_u>36)return"0";var Tu=this.chunkSize(_u),Cu=Math.pow(_u,Tu),Pu=v$2(Cu),Bu=d$1(),Ru=d$1(),Lu="";for(this.divRemTo(Pu,Bu,Ru);Bu.signum()>0;)Lu=(Cu+Ru.intValue()).toString(_u).substr(1)+Lu,Bu.divRemTo(Pu,Bu,Ru);return Ru.intValue().toString(_u)+Lu},c$2.prototype.fromRadix=function(_u,Tu){this.fromInt(0),Tu==null&&(Tu=10);for(var Cu=this.chunkSize(Tu),Pu=Math.pow(Tu,Cu),Bu=!1,Ru=0,Lu=0,Ou=0;Ou<_u.length;++Ou){var Du=m$2(_u,Ou);Du<0?_u.charAt(Ou)=="-"&&this.signum()==0&&(Bu=!0):(Lu=Tu*Lu+Du,++Ru>=Cu&&(this.dMultiply(Pu),this.dAddOffset(Lu,0),Ru=0,Lu=0))}Ru>0&&(this.dMultiply(Math.pow(Tu,Ru)),this.dAddOffset(Lu,0)),Bu&&c$2.ZERO.subTo(this,this)},c$2.prototype.fromNumber=function(_u,Tu,Cu){if(typeof Tu=="number")if(_u<2)this.fromInt(1);else for(this.fromNumber(_u,Cu),this.testBit(_u-1)||this.bitwiseTo(c$2.ONE.shiftLeft(_u-1),E$2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Tu);)this.dAddOffset(2,0),this.bitLength()>_u&&this.subTo(c$2.ONE.shiftLeft(_u-1),this);else{var Pu=new Array,Bu=7&_u;Pu.length=1+(_u>>3),Tu.nextBytes(Pu),Bu>0?Pu[0]&=(1<<Bu)-1:Pu[0]=0,this.fromString(Pu,256)}},c$2.prototype.bitwiseTo=function(_u,Tu,Cu){var Pu,Bu,Ru=Math.min(_u.t,this.t);for(Pu=0;Pu<Ru;++Pu)Cu[Pu]=Tu(this[Pu],_u[Pu]);if(_u.t<this.t){for(Bu=_u.s&this.DM,Pu=Ru;Pu<this.t;++Pu)Cu[Pu]=Tu(this[Pu],Bu);Cu.t=this.t}else{for(Bu=this.s&this.DM,Pu=Ru;Pu<_u.t;++Pu)Cu[Pu]=Tu(Bu,_u[Pu]);Cu.t=_u.t}Cu.s=Tu(this.s,_u.s),Cu.clamp()},c$2.prototype.changeBit=function(_u,Tu){var Cu=c$2.ONE.shiftLeft(_u);return this.bitwiseTo(Cu,Tu,Cu),Cu},c$2.prototype.addTo=function(_u,Tu){for(var Cu=0,Pu=0,Bu=Math.min(_u.t,this.t);Cu<Bu;)Pu+=this[Cu]+_u[Cu],Tu[Cu++]=Pu&this.DM,Pu>>=this.DB;if(_u.t<this.t){for(Pu+=_u.s;Cu<this.t;)Pu+=this[Cu],Tu[Cu++]=Pu&this.DM,Pu>>=this.DB;Pu+=this.s}else{for(Pu+=this.s;Cu<_u.t;)Pu+=_u[Cu],Tu[Cu++]=Pu&this.DM,Pu>>=this.DB;Pu+=_u.s}Tu.s=Pu<0?-1:0,Pu>0?Tu[Cu++]=Pu:Pu<-1&&(Tu[Cu++]=this.DV+Pu),Tu.t=Cu,Tu.clamp()},c$2.prototype.dMultiply=function(_u){this[this.t]=this.am(0,_u-1,this,0,0,this.t),++this.t,this.clamp()},c$2.prototype.dAddOffset=function(_u,Tu){if(_u!=0){for(;this.t<=Tu;)this[this.t++]=0;for(this[Tu]+=_u;this[Tu]>=this.DV;)this[Tu]-=this.DV,++Tu>=this.t&&(this[this.t++]=0),++this[Tu]}},c$2.prototype.multiplyLowerTo=function(_u,Tu,Cu){var Pu,Bu=Math.min(this.t+_u.t,Tu);for(Cu.s=0,Cu.t=Bu;Bu>0;)Cu[--Bu]=0;for(Pu=Cu.t-this.t;Bu<Pu;++Bu)Cu[Bu+this.t]=this.am(0,_u[Bu],Cu,Bu,0,this.t);for(Pu=Math.min(_u.t,Tu);Bu<Pu;++Bu)this.am(0,_u[Bu],Cu,Bu,0,Tu-Bu);Cu.clamp()},c$2.prototype.multiplyUpperTo=function(_u,Tu,Cu){--Tu;var Pu=Cu.t=this.t+_u.t-Tu;for(Cu.s=0;--Pu>=0;)Cu[Pu]=0;for(Pu=Math.max(Tu-this.t,0);Pu<_u.t;++Pu)Cu[this.t+Pu-Tu]=this.am(Tu-Pu,_u[Pu],Cu,0,0,this.t+Pu-Tu);Cu.clamp(),Cu.drShiftTo(1,Cu)},c$2.prototype.modInt=function(_u){if(_u<=0)return 0;var Tu=this.DV%_u,Cu=this.s<0?_u-1:0;if(this.t>0)if(Tu==0)Cu=this[0]%_u;else for(var Pu=this.t-1;Pu>=0;--Pu)Cu=(Tu*Cu+this[Pu])%_u;return Cu},c$2.prototype.millerRabin=function(_u){var Tu=this.subtract(c$2.ONE),Cu=Tu.getLowestSetBit();if(Cu<=0)return!1;var Pu=Tu.shiftRight(Cu);(_u=_u+1>>1)>R$2.length&&(_u=R$2.length);for(var Bu=d$1(),Ru=0;Ru<_u;++Ru){Bu.fromInt(R$2[Math.floor(Math.random()*R$2.length)]);var Lu=Bu.modPow(Pu,this);if(Lu.compareTo(c$2.ONE)!=0&&Lu.compareTo(Tu)!=0){for(var Ou=1;Ou++<Cu&&Lu.compareTo(Tu)!=0;)if((Lu=Lu.modPowInt(2,this)).compareTo(c$2.ONE)==0)return!1;if(Lu.compareTo(Tu)!=0)return!1}}return!0},c$2.prototype.clone=function(){var _u=d$1();return this.copyTo(_u),_u},c$2.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$2.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$2.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$2.prototype.toByteArray=function(){var _u=this.t,Tu=new Array;Tu[0]=this.s;var Cu,Pu=this.DB-_u*this.DB%8,Bu=0;if(_u-- >0)for(Pu<this.DB&&(Cu=this[_u]>>Pu)!=(this.s&this.DM)>>Pu&&(Tu[Bu++]=Cu|this.s<<this.DB-Pu);_u>=0;)Pu<8?(Cu=(this[_u]&(1<<Pu)-1)<<8-Pu,Cu|=this[--_u]>>(Pu+=this.DB-8)):(Cu=this[_u]>>(Pu-=8)&255,Pu<=0&&(Pu+=this.DB,--_u)),(128&Cu)!=0&&(Cu|=-256),Bu==0&&(128&this.s)!=(128&Cu)&&++Bu,(Bu>0||Cu!=this.s)&&(Tu[Bu++]=Cu);return Tu},c$2.prototype.equals=function(_u){return this.compareTo(_u)==0},c$2.prototype.min=function(_u){return this.compareTo(_u)<0?this:_u},c$2.prototype.max=function(_u){return this.compareTo(_u)>0?this:_u},c$2.prototype.and=function(_u){var Tu=d$1();return this.bitwiseTo(_u,w$2,Tu),Tu},c$2.prototype.or=function(_u){var Tu=d$1();return this.bitwiseTo(_u,E$2,Tu),Tu},c$2.prototype.xor=function(_u){var Tu=d$1();return this.bitwiseTo(_u,M$1,Tu),Tu},c$2.prototype.andNot=function(_u){var Tu=d$1();return this.bitwiseTo(_u,I$1,Tu),Tu},c$2.prototype.not=function(){for(var _u=d$1(),Tu=0;Tu<this.t;++Tu)_u[Tu]=this.DM&~this[Tu];return _u.t=this.t,_u.s=~this.s,_u},c$2.prototype.shiftLeft=function(_u){var Tu=d$1();return _u<0?this.rShiftTo(-_u,Tu):this.lShiftTo(_u,Tu),Tu},c$2.prototype.shiftRight=function(_u){var Tu=d$1();return _u<0?this.lShiftTo(-_u,Tu):this.rShiftTo(_u,Tu),Tu},c$2.prototype.getLowestSetBit=function(){for(var _u=0;_u<this.t;++_u)if(this[_u]!=0)return _u*this.DB+S$1(this[_u]);return this.s<0?this.t*this.DB:-1},c$2.prototype.bitCount=function(){for(var _u=0,Tu=this.s&this.DM,Cu=0;Cu<this.t;++Cu)_u+=C$2(this[Cu]^Tu);return _u},c$2.prototype.testBit=function(_u){var Tu=Math.floor(_u/this.DB);return Tu>=this.t?this.s!=0:(this[Tu]&1<<_u%this.DB)!=0},c$2.prototype.setBit=function(_u){return this.changeBit(_u,E$2)},c$2.prototype.clearBit=function(_u){return this.changeBit(_u,I$1)},c$2.prototype.flipBit=function(_u){return this.changeBit(_u,M$1)},c$2.prototype.add=function(_u){var Tu=d$1();return this.addTo(_u,Tu),Tu},c$2.prototype.subtract=function(_u){var Tu=d$1();return this.subTo(_u,Tu),Tu},c$2.prototype.multiply=function(_u){var Tu=d$1();return this.multiplyTo(_u,Tu),Tu},c$2.prototype.divide=function(_u){var Tu=d$1();return this.divRemTo(_u,Tu,null),Tu},c$2.prototype.remainder=function(_u){var Tu=d$1();return this.divRemTo(_u,null,Tu),Tu},c$2.prototype.divideAndRemainder=function(_u){var Tu=d$1(),Cu=d$1();return this.divRemTo(_u,Tu,Cu),new Array(Tu,Cu)},c$2.prototype.modPow=function(_u,Tu){var Cu,Pu,Bu=_u.bitLength(),Ru=v$2(1);if(Bu<=0)return Ru;Cu=Bu<18?1:Bu<48?3:Bu<144?4:Bu<768?5:6,Pu=Bu<8?new b$1(Tu):Tu.isEven()?new P$2(Tu):new x$1(Tu);var Lu=new Array,Ou=3,Du=Cu-1,$u=(1<<Cu)-1;if(Lu[1]=Pu.convert(this),Cu>1){var ku=d$1();for(Pu.sqrTo(Lu[1],ku);Ou<=$u;)Lu[Ou]=d$1(),Pu.mulTo(ku,Lu[Ou-2],Lu[Ou]),Ou+=2}var Fu,Nu,Vu=_u.t-1,Gu=!0,Hu=d$1();for(Bu=y$2(_u[Vu])-1;Vu>=0;){for(Bu>=Du?Fu=_u[Vu]>>Bu-Du&$u:(Fu=(_u[Vu]&(1<<Bu+1)-1)<<Du-Bu,Vu>0&&(Fu|=_u[Vu-1]>>this.DB+Bu-Du)),Ou=Cu;(1&Fu)==0;)Fu>>=1,--Ou;if((Bu-=Ou)<0&&(Bu+=this.DB,--Vu),Gu)Lu[Fu].copyTo(Ru),Gu=!1;else{for(;Ou>1;)Pu.sqrTo(Ru,Hu),Pu.sqrTo(Hu,Ru),Ou-=2;Ou>0?Pu.sqrTo(Ru,Hu):(Nu=Ru,Ru=Hu,Hu=Nu),Pu.mulTo(Hu,Lu[Fu],Ru)}for(;Vu>=0&&(_u[Vu]&1<<Bu)==0;)Pu.sqrTo(Ru,Hu),Nu=Ru,Ru=Hu,Hu=Nu,--Bu<0&&(Bu=this.DB-1,--Vu)}return Pu.revert(Ru)},c$2.prototype.modInverse=function(_u){var Tu=_u.isEven();if(this.isEven()&&Tu||_u.signum()==0)return c$2.ZERO;for(var Cu=_u.clone(),Pu=this.clone(),Bu=v$2(1),Ru=v$2(0),Lu=v$2(0),Ou=v$2(1);Cu.signum()!=0;){for(;Cu.isEven();)Cu.rShiftTo(1,Cu),Tu?(Bu.isEven()&&Ru.isEven()||(Bu.addTo(this,Bu),Ru.subTo(_u,Ru)),Bu.rShiftTo(1,Bu)):Ru.isEven()||Ru.subTo(_u,Ru),Ru.rShiftTo(1,Ru);for(;Pu.isEven();)Pu.rShiftTo(1,Pu),Tu?(Lu.isEven()&&Ou.isEven()||(Lu.addTo(this,Lu),Ou.subTo(_u,Ou)),Lu.rShiftTo(1,Lu)):Ou.isEven()||Ou.subTo(_u,Ou),Ou.rShiftTo(1,Ou);Cu.compareTo(Pu)>=0?(Cu.subTo(Pu,Cu),Tu&&Bu.subTo(Lu,Bu),Ru.subTo(Ou,Ru)):(Pu.subTo(Cu,Pu),Tu&&Lu.subTo(Bu,Lu),Ou.subTo(Ru,Ou))}return Pu.compareTo(c$2.ONE)!=0?c$2.ZERO:Ou.compareTo(_u)>=0?Ou.subtract(_u):Ou.signum()<0?(Ou.addTo(_u,Ou),Ou.signum()<0?Ou.add(_u):Ou):Ou},c$2.prototype.pow=function(_u){return this.exp(_u,new B$1)},c$2.prototype.gcd=function(_u){var Tu=this.s<0?this.negate():this.clone(),Cu=_u.s<0?_u.negate():_u.clone();if(Tu.compareTo(Cu)<0){var Pu=Tu;Tu=Cu,Cu=Pu}var Bu=Tu.getLowestSetBit(),Ru=Cu.getLowestSetBit();if(Ru<0)return Tu;for(Bu<Ru&&(Ru=Bu),Ru>0&&(Tu.rShiftTo(Ru,Tu),Cu.rShiftTo(Ru,Cu));Tu.signum()>0;)(Bu=Tu.getLowestSetBit())>0&&Tu.rShiftTo(Bu,Tu),(Bu=Cu.getLowestSetBit())>0&&Cu.rShiftTo(Bu,Cu),Tu.compareTo(Cu)>=0?(Tu.subTo(Cu,Tu),Tu.rShiftTo(1,Tu)):(Cu.subTo(Tu,Cu),Cu.rShiftTo(1,Cu));return Ru>0&&Cu.lShiftTo(Ru,Cu),Cu},c$2.prototype.isProbablePrime=function(_u){var Tu,Cu=this.abs();if(Cu.t==1&&Cu[0]<=R$2[R$2.length-1]){for(Tu=0;Tu<R$2.length;++Tu)if(Cu[0]==R$2[Tu])return!0;return!1}if(Cu.isEven())return!1;for(Tu=1;Tu<R$2.length;){for(var Pu=R$2[Tu],Bu=Tu+1;Bu<R$2.length&&Pu<k$1;)Pu*=R$2[Bu++];for(Pu=Cu.modInt(Pu);Tu<Bu;)if(Pu%R$2[Tu++]==0)return!1}return Cu.millerRabin(_u)},c$2.prototype.square=function(){var _u=d$1();return this.squareTo(_u),_u};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L$2(_u){var Tu,Cu,Pu="";for(Tu=0;Tu+3<=_u.length;Tu+=3)Cu=parseInt(_u.substring(Tu,Tu+3),16),Pu+=D$1.charAt(Cu>>6)+D$1.charAt(63&Cu);for(Tu+1==_u.length?(Cu=parseInt(_u.substring(Tu,Tu+1),16),Pu+=D$1.charAt(Cu<<2)):Tu+2==_u.length&&(Cu=parseInt(_u.substring(Tu,Tu+2),16),Pu+=D$1.charAt(Cu>>2)+D$1.charAt((3&Cu)<<4));(3&Pu.length)>0;)Pu+="=";return Pu}function O$2(_u){var Tu,Cu,Pu,Bu="",Ru=0;for(Tu=0;Tu<_u.length&&_u.charAt(Tu)!="=";++Tu)(Pu=D$1.indexOf(_u.charAt(Tu)))<0||(Ru==0?(Bu+=g$2(Pu>>2),Cu=3&Pu,Ru=1):Ru==1?(Bu+=g$2(Cu<<2|Pu>>4),Cu=15&Pu,Ru=2):Ru==2?(Bu+=g$2(Cu),Bu+=g$2(Pu>>2),Cu=3&Pu,Ru=3):(Bu+=g$2(Cu<<2|Pu>>4),Bu+=g$2(15&Pu),Ru=0));return Ru==1&&(Bu+=g$2(Cu<<2)),Bu}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function N$2(){this.i=0,this.j=0,this.S=new Array}N$2.prototype.init=function(_u){var Tu,Cu,Pu;for(Tu=0;Tu<256;++Tu)this.S[Tu]=Tu;for(Cu=0,Tu=0;Tu<256;++Tu)Cu=Cu+this.S[Tu]+_u[Tu%_u.length]&255,Pu=this.S[Tu],this.S[Tu]=this.S[Cu],this.S[Cu]=Pu;this.i=0,this.j=0},N$2.prototype.next=function(){var _u;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,_u=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=_u,this.S[_u+this.S[this.i]&255]};var F$1,Q$1,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function _$1(){var _u;_u=new Date().getTime(),Q$1[V$1++]^=255&_u,Q$1[V$1++]^=_u>>8&255,Q$1[V$1++]^=_u>>16&255,Q$1[V$1++]^=_u>>24&255,V$1>=256&&(V$1-=256)}if(Q$1==null){var H$1;if(Q$1=new Array,V$1=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var q$1=window.crypto||window.msCrypto;if(q$1.getRandomValues){var z=new Uint8Array(32);for(q$1.getRandomValues(z),H$1=0;H$1<32;++H$1)Q$1[V$1++]=z[H$1]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var K$1=window.crypto.random(32);for(H$1=0;H$1<K$1.length;++H$1)Q$1[V$1++]=255&K$1.charCodeAt(H$1)}}for(;V$1<256;)H$1=Math.floor(65536*Math.random()),Q$1[V$1++]=H$1>>>8,Q$1[V$1++]=255&H$1;V$1=0,_$1()}function U$1(){if(F$1==null){for(_$1(),(F$1=new N$2).init(Q$1),V$1=0;V$1<Q$1.length;++V$1)Q$1[V$1]=0;V$1=0}return F$1.next()}function j$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G$1(_u,Tu){return new c$2(_u,Tu)}function W$2(_u,Tu,Cu){for(var Pu="",Bu=0;Pu.length<Tu;)Pu+=Cu(String.fromCharCode.apply(String,_u.concat([(4278190080&Bu)>>24,(16711680&Bu)>>16,(65280&Bu)>>8,255&Bu]))),Bu+=1;return Pu}function X$1(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y$1(_u,Tu,Cu){for(var Pu="",Bu=0;Pu.length<Tu;)Pu+=Cu(_u+String.fromCharCode.apply(String,[(4278190080&Bu)>>24,(16711680&Bu)>>16,(65280&Bu)>>8,255&Bu])),Bu+=1;return Pu}function Z$1(_u){for(var Tu="",Cu=0;Cu<_u.length;Cu++){var Pu=_u[Cu].toString(16);Pu.length==1&&(Pu="0"+Pu),Tu+=Pu}return Tu}function J$1(_u){return Z$1(function(Tu){for(var Cu=new Array,Pu=0;Pu<Tu.length;Pu++)Cu[Pu]=Tu.charCodeAt(Pu);return Cu}(_u))}function $$2(_u){return _u.length%4==2?_u+="==":_u.length%4==3&&(_u+="="),_u=(_u=_u.replace(/-/g,"+")).replace(/_/g,"/")}function ee(_u){return _u.length%2==1&&(_u="0"+_u),function(Tu){return(Tu=(Tu=Tu.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(L$2(_u))}function te(_u){return O$2($$2(_u))}function ie(_u){return function(Tu){return Tu.replace(/%/g,"")}(function(Tu){for(var Cu=encodeURIComponent(Tu),Pu="",Bu=0;Bu<Cu.length;Bu++)Cu[Bu]=="%"?(Pu+=Cu.substr(Bu,3),Bu+=2):Pu=Pu+"%"+J$1(Cu[Bu]);return Pu}(_u))}function ne(_u){return decodeURIComponent(function(Tu){return Tu.replace(/(..)/g,"%$1")}(_u))}function re(_u){for(var Tu="",Cu=0;Cu<_u.length-1;Cu+=2)Tu+=String.fromCharCode(parseInt(_u.substr(Cu,2),16));return Tu}function oe(_u){for(var Tu="",Cu=0;Cu<_u.length;Cu++)Tu+=("0"+_u.charCodeAt(Cu).toString(16)).slice(-2);return Tu}function se(_u){var Tu=function(Cu){return L$2(Cu)}(_u).replace(/(.{64})/g,`$1\r
`);return Tu=Tu.replace(/\r\n$/,"")}function ae(_u,Tu){return"-----BEGIN "+Tu+`-----\r
`+se(_u)+`\r
-----END `+Tu+`-----\r
`}function le(_u,Tu){if(_u.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+Tu;return function(Cu){return O$2(Cu.replace(/[^0-9A-Za-z\/+=]*/g,""))}(_u=Tu!==void 0?(_u=_u.replace(new RegExp("^[^]*-----BEGIN "+Tu+"-----"),"")).replace(new RegExp("-----END "+Tu+"-----[^]*$"),""):(_u=_u.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ue(_u){var Tu="malformed hex value";if(!_u.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Tu;if(_u.length!=8)return _u.length==32?function(Cu){if(!Cu.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Pu=(Cu=Cu.toLowerCase()).match(/.{1,4}/g),Bu=0;Bu<8;Bu++)Pu[Bu]=Pu[Bu].replace(/^0+/,""),Pu[Bu]==""&&(Pu[Bu]="0");var Ru=(Cu=":"+Pu.join(":")+":").match(/:(0:){2,}/g);if(Ru===null)return Cu.slice(1,-1);var Lu="";for(Bu=0;Bu<Ru.length;Bu++)Ru[Bu].length>Lu.length&&(Lu=Ru[Bu]);return(Cu=Cu.replace(Lu,"::")).slice(1,-1)}(_u):_u;try{return parseInt(_u.substr(0,2),16)+"."+parseInt(_u.substr(2,2),16)+"."+parseInt(_u.substr(4,2),16)+"."+parseInt(_u.substr(6,2),16)}catch{throw Tu}}function he(_u){return _u.match(/.{4}/g).map(function(Tu){var Cu=parseInt(Tu.substr(0,2),16),Pu=parseInt(Tu.substr(2),16);if(Cu==0&Pu<128)return String.fromCharCode(Pu);if(Cu<8){var Bu=128|63&Pu;return ne((192|(7&Cu)<<3|(192&Pu)>>6).toString(16)+Bu.toString(16))}Bu=128|(15&Cu)<<2|(192&Pu)>>6;var Ru=128|63&Pu;return ne((224|(240&Cu)>>4).toString(16)+Bu.toString(16)+Ru.toString(16))}).join("")}function ce(_u){return!(_u.length%2!=0||!_u.match(/^[0-9a-f]+$/)&&!_u.match(/^[0-9A-F]+$/))}function de(_u){return _u.length%2==1?"0"+_u:_u.substr(0,1)>"7"?"00"+_u:_u}j$1.prototype.nextBytes=function(_u){var Tu;for(Tu=0;Tu<_u.length;++Tu)_u[Tu]=U$1()},X$1.prototype.doPublic=function(_u){return _u.modPowInt(this.e,this.n)},X$1.prototype.setPublic=function(_u,Tu){if(this.isPublic=!0,this.isPrivate=!1,typeof _u!="string")this.n=_u,this.e=Tu;else{if(!(_u!=null&&Tu!=null&&_u.length>0&&Tu.length>0))throw"Invalid RSA public key";this.n=G$1(_u,16),this.e=parseInt(Tu,16)}},X$1.prototype.encrypt=function(_u){var Tu=function(Bu,Ru){if(Ru<Bu.length+11)throw"Message too long for RSA";for(var Lu=new Array,Ou=Bu.length-1;Ou>=0&&Ru>0;){var Du=Bu.charCodeAt(Ou--);Du<128?Lu[--Ru]=Du:Du>127&&Du<2048?(Lu[--Ru]=63&Du|128,Lu[--Ru]=Du>>6|192):(Lu[--Ru]=63&Du|128,Lu[--Ru]=Du>>6&63|128,Lu[--Ru]=Du>>12|224)}Lu[--Ru]=0;for(var $u=new j$1,ku=new Array;Ru>2;){for(ku[0]=0;ku[0]==0;)$u.nextBytes(ku);Lu[--Ru]=ku[0]}return Lu[--Ru]=2,Lu[--Ru]=0,new c$2(Lu)}(_u,this.n.bitLength()+7>>3);if(Tu==null)return null;var Cu=this.doPublic(Tu);if(Cu==null)return null;var Pu=Cu.toString(16);return(1&Pu.length)==0?Pu:"0"+Pu},X$1.prototype.encryptOAEP=function(_u,Tu,Cu){var Pu=function(Lu,Ou,Du,$u){var ku=l$3.crypto.MessageDigest,Fu=l$3.crypto.Util,Nu=null;if(Du||(Du="sha1"),typeof Du=="string"&&(Nu=ku.getCanonicalAlgName(Du),$u=ku.getHashLength(Nu),Du=function(qu){return re(Fu.hashHex(oe(qu),Nu))}),Lu.length+2*$u+2>Ou)throw"Message too long for RSA";var Vu,Gu="";for(Vu=0;Vu<Ou-Lu.length-2*$u-2;Vu+=1)Gu+="\0";var Hu=Du("")+Gu+""+Lu,ju=new Array($u);new j$1().nextBytes(ju);var Uu=W$2(ju,Hu.length,Du),zu=[];for(Vu=0;Vu<Hu.length;Vu+=1)zu[Vu]=Hu.charCodeAt(Vu)^Uu.charCodeAt(Vu);var Wu=W$2(zu,ju.length,Du),Qu=[0];for(Vu=0;Vu<ju.length;Vu+=1)Qu[Vu+1]=ju[Vu]^Wu.charCodeAt(Vu);return new c$2(Qu.concat(zu))}(_u,this.n.bitLength()+7>>3,Tu,Cu);if(Pu==null)return null;var Bu=this.doPublic(Pu);if(Bu==null)return null;var Ru=Bu.toString(16);return(1&Ru.length)==0?Ru:"0"+Ru},X$1.prototype.type="RSA",X$1.prototype.doPrivate=function(_u){if(this.p==null||this.q==null)return _u.modPow(this.d,this.n);for(var Tu=_u.mod(this.p).modPow(this.dmp1,this.p),Cu=_u.mod(this.q).modPow(this.dmq1,this.q);Tu.compareTo(Cu)<0;)Tu=Tu.add(this.p);return Tu.subtract(Cu).multiply(this.coeff).mod(this.p).multiply(this.q).add(Cu)},X$1.prototype.setPrivate=function(_u,Tu,Cu){if(this.isPrivate=!0,typeof _u!="string")this.n=_u,this.e=Tu,this.d=Cu;else{if(!(_u!=null&&Tu!=null&&_u.length>0&&Tu.length>0))throw"Invalid RSA private key";this.n=G$1(_u,16),this.e=parseInt(Tu,16),this.d=G$1(Cu,16)}},X$1.prototype.setPrivateEx=function(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){if(this.isPrivate=!0,this.isPublic=!1,_u==null)throw"RSASetPrivateEx N == null";if(Tu==null)throw"RSASetPrivateEx E == null";if(_u.length==0)throw"RSASetPrivateEx N.length == 0";if(Tu.length==0)throw"RSASetPrivateEx E.length == 0";if(!(_u!=null&&Tu!=null&&_u.length>0&&Tu.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G$1(_u,16),this.e=parseInt(Tu,16),this.d=G$1(Cu,16),this.p=G$1(Pu,16),this.q=G$1(Bu,16),this.dmp1=G$1(Ru,16),this.dmq1=G$1(Lu,16),this.coeff=G$1(Ou,16)},X$1.prototype.generate=function(_u,Tu){var Cu=new j$1,Pu=_u>>1;this.e=parseInt(Tu,16);for(var Bu=new c$2(Tu,16);;){for(;this.p=new c$2(_u-Pu,1,Cu),this.p.subtract(c$2.ONE).gcd(Bu).compareTo(c$2.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$2(Pu,1,Cu),this.q.subtract(c$2.ONE).gcd(Bu).compareTo(c$2.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Ru=this.p;this.p=this.q,this.q=Ru}var Lu=this.p.subtract(c$2.ONE),Ou=this.q.subtract(c$2.ONE),Du=Lu.multiply(Ou);if(Du.gcd(Bu).compareTo(c$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==_u)){this.d=Bu.modInverse(Du),this.dmp1=this.d.mod(Lu),this.dmq1=this.d.mod(Ou),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X$1.prototype.decrypt=function(_u){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Tu=G$1(_u,16),Cu=this.doPrivate(Tu);return Cu==null?null:function(Pu,Bu){for(var Ru=Pu.toByteArray(),Lu=0;Lu<Ru.length&&Ru[Lu]==0;)++Lu;if(Ru.length-Lu!=Bu-1||Ru[Lu]!=2)return null;for(++Lu;Ru[Lu]!=0;)if(++Lu>=Ru.length)return null;for(var Ou="";++Lu<Ru.length;){var Du=255&Ru[Lu];Du<128?Ou+=String.fromCharCode(Du):Du>191&&Du<224?(Ou+=String.fromCharCode((31&Du)<<6|63&Ru[Lu+1]),++Lu):(Ou+=String.fromCharCode((15&Du)<<12|(63&Ru[Lu+1])<<6|63&Ru[Lu+2]),Lu+=2)}return Ou}(Cu,this.n.bitLength()+7>>3)},X$1.prototype.decryptOAEP=function(_u,Tu,Cu){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Pu=G$1(_u,16),Bu=this.doPrivate(Pu);return Bu==null?null:function(Ru,Lu,Ou,Du){var $u=l$3.crypto.MessageDigest,ku=l$3.crypto.Util,Fu=null;for(Ou||(Ou="sha1"),typeof Ou=="string"&&(Fu=$u.getCanonicalAlgName(Ou),Du=$u.getHashLength(Fu),Ou=function(Qu){return re(ku.hashHex(oe(Qu),Fu))}),Ru=Ru.toByteArray(),Nu=0;Nu<Ru.length;Nu+=1)Ru[Nu]&=255;for(;Ru.length<Lu;)Ru.unshift(0);if((Ru=String.fromCharCode.apply(String,Ru)).length<2*Du+2)throw"Cipher too short";var Nu,Vu=Ru.substr(1,Du),Gu=Ru.substr(Du+1),Hu=Y$1(Gu,Du,Ou),ju=[];for(Nu=0;Nu<Vu.length;Nu+=1)ju[Nu]=Vu.charCodeAt(Nu)^Hu.charCodeAt(Nu);var Uu=Y$1(String.fromCharCode.apply(String,ju),Ru.length-Du,Ou),zu=[];for(Nu=0;Nu<Gu.length;Nu+=1)zu[Nu]=Gu.charCodeAt(Nu)^Uu.charCodeAt(Nu);if((zu=String.fromCharCode.apply(String,zu)).substr(0,Du)!==Ou(""))throw"Hash mismatch";var Wu=(zu=zu.substr(Du)).indexOf("");if((Wu!=-1?zu.substr(0,Wu).lastIndexOf("\0"):-1)+1!=Wu)throw"Malformed data";return zu.substr(Wu+1)}(Bu,this.n.bitLength()+7>>3,Tu,Cu)},l$3.lang!==void 0&&l$3.lang||(l$3.lang={}),l$3.lang.String=function(){},l$3.lang.String.isInteger=function(_u){return!!_u.match(/^[0-9]+$/)||!!_u.match(/^-[0-9]+$/)},l$3.lang.String.isHex=function(_u){return ce(_u)},l$3.lang.String.isBase64=function(_u){return!(!(_u=_u.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||_u.length%4!=0)},l$3.lang.String.isBase64URL=function(_u){return!_u.match(/[+/=]/)&&(_u=$$2(_u),l$3.lang.String.isBase64(_u))},l$3.lang.String.isIntegerArray=function(_u){return!!(_u=_u.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},l$3.lang.String.isPrintable=function(_u){return _u.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},l$3.lang.String.isIA5=function(_u){return _u.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},l$3.lang.String.isMail=function(_u){return _u.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pe=function(_u,Tu,Cu){return Cu==null&&(Cu="0"),_u.length>=Tu?_u:new Array(Tu-_u.length+1).join(Cu)+_u};function fe(_u,Tu){var Cu=function(){};Cu.prototype=Tu.prototype,_u.prototype=new Cu,_u.prototype.constructor=_u,_u.superclass=Tu.prototype,Tu.prototype.constructor==Object.prototype.constructor&&(Tu.prototype.constructor=Tu)}l$3.crypto!==void 0&&l$3.crypto||(l$3.crypto={}),l$3.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$2.algo.MD5,sha1:h$2.algo.SHA1,sha224:h$2.algo.SHA224,sha256:h$2.algo.SHA256,sha384:h$2.algo.SHA384,sha512:h$2.algo.SHA512,ripemd160:h$2.algo.RIPEMD160},this.getDigestInfoHex=function(_u,Tu){if(this.DIGESTINFOHEAD[Tu]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+Tu;return this.DIGESTINFOHEAD[Tu]+_u},this.getPaddedDigestInfoHex=function(_u,Tu,Cu){var Pu=this.getDigestInfoHex(_u,Tu),Bu=Cu/4;if(Pu.length+22>Bu)throw"key is too short for SigAlg: keylen="+Cu+","+Tu;for(var Ru="0001",Lu="00"+Pu,Ou="",Du=Bu-Ru.length-Lu.length,$u=0;$u<Du;$u+=2)Ou+="ff";return Ru+Ou+Lu},this.hashString=function(_u,Tu){return new l$3.crypto.MessageDigest({alg:Tu}).digestString(_u)},this.hashHex=function(_u,Tu){return new l$3.crypto.MessageDigest({alg:Tu}).digestHex(_u)},this.sha1=function(_u){return this.hashString(_u,"sha1")},this.sha256=function(_u){return this.hashString(_u,"sha256")},this.sha256Hex=function(_u){return this.hashHex(_u,"sha256")},this.sha512=function(_u){return this.hashString(_u,"sha512")},this.sha512Hex=function(_u){return this.hashHex(_u,"sha512")},this.isKey=function(_u){return _u instanceof X$1||_u instanceof l$3.crypto.DSA||_u instanceof l$3.crypto.ECDSA}},l$3.crypto.Util.md5=function(_u){return new l$3.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(_u)},l$3.crypto.Util.ripemd160=function(_u){return new l$3.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(_u)},l$3.crypto.Util.SECURERANDOMGEN=new j$1,l$3.crypto.Util.getRandomHexOfNbytes=function(_u){var Tu=new Array(_u);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes(Tu),Z$1(Tu)},l$3.crypto.Util.getRandomBigIntegerOfNbytes=function(_u){return new c$2(l$3.crypto.Util.getRandomHexOfNbytes(_u),16)},l$3.crypto.Util.getRandomHexOfNbits=function(_u){var Tu=_u%8,Cu=new Array((_u-Tu)/8+1);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes(Cu),Cu[0]=(255<<Tu&255^255)&Cu[0],Z$1(Cu)},l$3.crypto.Util.getRandomBigIntegerOfNbits=function(_u){return new c$2(l$3.crypto.Util.getRandomHexOfNbits(_u),16)},l$3.crypto.Util.getRandomBigIntegerZeroToMax=function(_u){for(var Tu=_u.bitLength();;){var Cu=l$3.crypto.Util.getRandomBigIntegerOfNbits(Tu);if(_u.compareTo(Cu)!=-1)return Cu}},l$3.crypto.Util.getRandomBigIntegerMinToMax=function(_u,Tu){var Cu=_u.compareTo(Tu);if(Cu==1)throw"biMin is greater than biMax";if(Cu==0)return _u;var Pu=Tu.subtract(_u);return l$3.crypto.Util.getRandomBigIntegerZeroToMax(Pu).add(_u)},l$3.crypto.MessageDigest=function(_u){this.setAlgAndProvider=function(Tu,Cu){if((Tu=l$3.crypto.MessageDigest.getCanonicalAlgName(Tu))!==null&&Cu===void 0&&(Cu=l$3.crypto.Util.DEFAULTPROVIDER[Tu]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Tu)!=-1&&Cu=="cryptojs"){try{this.md=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Tu].create()}catch(Pu){throw"setAlgAndProvider hash alg set fail alg="+Tu+"/"+Pu}this.updateString=function(Pu){this.md.update(Pu)},this.updateHex=function(Pu){var Bu=h$2.enc.Hex.parse(Pu);this.md.update(Bu)},this.digest=function(){return this.md.finalize().toString(h$2.enc.Hex)},this.digestString=function(Pu){return this.updateString(Pu),this.digest()},this.digestHex=function(Pu){return this.updateHex(Pu),this.digest()}}if(":sha256:".indexOf(Tu)!=-1&&Cu=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Pu){throw"setAlgAndProvider hash alg set fail alg="+Tu+"/"+Pu}this.updateString=function(Pu){this.md.update(Pu)},this.updateHex=function(Pu){var Bu=sjcl.codec.hex.toBits(Pu);this.md.update(Bu)},this.digest=function(){var Pu=this.md.finalize();return sjcl.codec.hex.fromBits(Pu)},this.digestString=function(Pu){return this.updateString(Pu),this.digest()},this.digestHex=function(Pu){return this.updateHex(Pu),this.digest()}}},this.updateString=function(Tu){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(Tu){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(Tu){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(Tu){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},_u!==void 0&&_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},l$3.crypto.MessageDigest.getCanonicalAlgName=function(_u){return typeof _u=="string"&&(_u=(_u=_u.toLowerCase()).replace(/-/,"")),_u},l$3.crypto.MessageDigest.getHashLength=function(_u){var Tu=l$3.crypto.MessageDigest,Cu=Tu.getCanonicalAlgName(_u);if(Tu.HASHLENGTH[Cu]===void 0)throw"not supported algorithm: "+_u;return Tu.HASHLENGTH[Cu]},l$3.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},l$3.crypto.Mac=function(_u){this.setAlgAndProvider=function(Tu,Cu){if((Tu=Tu.toLowerCase())==null&&(Tu="hmacsha1"),(Tu=Tu.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+Tu;Cu===void 0&&(Cu=l$3.crypto.Util.DEFAULTPROVIDER[Tu]),this.algProv=Tu+"/"+Cu;var Pu=Tu.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Pu)!=-1&&Cu=="cryptojs"){try{var Bu=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Pu];this.mac=h$2.algo.HMAC.create(Bu,this.pass)}catch(Ru){throw"setAlgAndProvider hash alg set fail hashAlg="+Pu+"/"+Ru}this.updateString=function(Ru){this.mac.update(Ru)},this.updateHex=function(Ru){var Lu=h$2.enc.Hex.parse(Ru);this.mac.update(Lu)},this.doFinal=function(){return this.mac.finalize().toString(h$2.enc.Hex)},this.doFinalString=function(Ru){return this.updateString(Ru),this.doFinal()},this.doFinalHex=function(Ru){return this.updateHex(Ru),this.doFinal()}}},this.updateString=function(Tu){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(Tu){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(Tu){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(Tu){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(Tu){if(typeof Tu=="string"){var Cu=Tu;return Tu.length%2!=1&&Tu.match(/^[0-9A-Fa-f]+$/)||(Cu=oe(Tu)),void(this.pass=h$2.enc.Hex.parse(Cu))}if(typeof Tu!="object")throw"KJUR.crypto.Mac unsupported password type: "+Tu;if(Cu=null,Tu.hex!==void 0){if(Tu.hex.length%2!=0||!Tu.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+Tu.hex;Cu=Tu.hex}if(Tu.utf8!==void 0&&(Cu=ie(Tu.utf8)),Tu.rstr!==void 0&&(Cu=oe(Tu.rstr)),Tu.b64!==void 0&&(Cu=O$2(Tu.b64)),Tu.b64u!==void 0&&(Cu=te(Tu.b64u)),Cu==null)throw"KJUR.crypto.Mac unsupported password type: "+Tu;this.pass=h$2.enc.Hex.parse(Cu)},_u!==void 0&&(_u.pass!==void 0&&this.setPassword(_u.pass),_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},l$3.crypto.Signature=function(_u){var Tu=null;if(this._setAlgNames=function(){var Cu=this.algName.match(/^(.+)with(.+)$/);Cu&&(this.mdAlgName=Cu[1].toLowerCase(),this.pubkeyAlgName=Cu[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Cu,Pu){for(var Bu="",Ru=Pu/4-Cu.length,Lu=0;Lu<Ru;Lu++)Bu+="0";return Bu+Cu},this.setAlgAndProvider=function(Cu,Pu){if(this._setAlgNames(),Pu!="cryptojs/jsrsa")throw new Error("provider not supported: "+Pu);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new l$3.crypto.MessageDigest({alg:this.mdAlgName})}catch(Bu){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Bu)}this.init=function(Bu,Ru){var Lu=null;try{Lu=Ru===void 0?Ee.getKey(Bu):Ee.getKey(Bu,Ru)}catch(Ou){throw"init failed:"+Ou}if(Lu.isPrivate===!0)this.prvKey=Lu,this.state="SIGN";else{if(Lu.isPublic!==!0)throw"init failed.:"+Lu;this.pubKey=Lu,this.state="VERIFY"}},this.updateString=function(Bu){this.md.updateString(Bu)},this.updateHex=function(Bu){this.md.updateHex(Bu)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.prvKey=new l$3.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof l$3.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof l$3.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Bu){return this.updateString(Bu),this.sign()},this.signHex=function(Bu){return this.updateHex(Bu),this.sign()},this.verify=function(Bu){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.pubKey=new l$3.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Bu,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Bu);if(l$3.crypto.ECDSA!==void 0&&this.pubKey instanceof l$3.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Bu);if(l$3.crypto.DSA!==void 0&&this.pubKey instanceof l$3.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Bu);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Cu,Pu){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Cu){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Cu){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Cu){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Cu){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Cu){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=_u,_u!==void 0&&(_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0?this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=_u.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),_u.psssaltlen!==void 0&&(this.pssSaltLen=_u.psssaltlen),_u.prvkeypem!==void 0)){if(_u.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{Tu=Ee.getKey(_u.prvkeypem),this.init(Tu)}catch(Cu){throw"fatal error to load pem private key: "+Cu}}},l$3.crypto.Cipher=function(_u){},l$3.crypto.Cipher.encrypt=function(_u,Tu,Cu){if(Tu instanceof X$1&&Tu.isPublic){var Pu=l$3.crypto.Cipher.getAlgByKeyAndName(Tu,Cu);if(Pu==="RSA")return Tu.encrypt(_u);if(Pu==="RSAOAEP")return Tu.encryptOAEP(_u,"sha1");var Bu=Pu.match(/^RSAOAEP(\d+)$/);if(Bu!==null)return Tu.encryptOAEP(_u,"sha"+Bu[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+Cu}throw"Cipher.encrypt: unsupported key or algorithm"},l$3.crypto.Cipher.decrypt=function(_u,Tu,Cu){if(Tu instanceof X$1&&Tu.isPrivate){var Pu=l$3.crypto.Cipher.getAlgByKeyAndName(Tu,Cu);if(Pu==="RSA")return Tu.decrypt(_u);if(Pu==="RSAOAEP")return Tu.decryptOAEP(_u,"sha1");var Bu=Pu.match(/^RSAOAEP(\d+)$/);if(Bu!==null)return Tu.decryptOAEP(_u,"sha"+Bu[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+Cu}throw"Cipher.decrypt: unsupported key or algorithm"},l$3.crypto.Cipher.getAlgByKeyAndName=function(_u,Tu){if(_u instanceof X$1){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(Tu)!=-1)return Tu;if(Tu==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+Tu}throw"getAlgByKeyAndName: not supported algorithm name: "+Tu},l$3.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Ae,ge,me,ve,ye,be,xe,we,Ee=(Ae=function(_u,Tu,Cu){return ge(h$2.AES,_u,Tu,Cu)},ge=function(_u,Tu,Cu,Pu){var Bu=h$2.enc.Hex.parse(Tu),Ru=h$2.enc.Hex.parse(Cu),Lu=h$2.enc.Hex.parse(Pu),Ou={};Ou.key=Ru,Ou.iv=Lu,Ou.ciphertext=Bu;var Du=_u.decrypt(Ou,Ru,{iv:Lu});return h$2.enc.Hex.stringify(Du)},me=function(_u,Tu,Cu){return ve(h$2.AES,_u,Tu,Cu)},ve=function(_u,Tu,Cu,Pu){var Bu=h$2.enc.Hex.parse(Tu),Ru=h$2.enc.Hex.parse(Cu),Lu=h$2.enc.Hex.parse(Pu),Ou=_u.encrypt(Bu,Ru,{iv:Lu}),Du=h$2.enc.Hex.parse(Ou.toString());return h$2.enc.Base64.stringify(Du)},ye={"AES-256-CBC":{proc:Ae,eproc:me,keylen:32,ivlen:16},"AES-192-CBC":{proc:Ae,eproc:me,keylen:24,ivlen:16},"AES-128-CBC":{proc:Ae,eproc:me,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(_u,Tu,Cu){return ge(h$2.TripleDES,_u,Tu,Cu)},eproc:function(_u,Tu,Cu){return ve(h$2.TripleDES,_u,Tu,Cu)},keylen:24,ivlen:8},"DES-CBC":{proc:function(_u,Tu,Cu){return ge(h$2.DES,_u,Tu,Cu)},eproc:function(_u,Tu,Cu){return ve(h$2.DES,_u,Tu,Cu)},keylen:8,ivlen:8}},be=function(_u){var Tu={},Cu=_u.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Cu&&(Tu.cipher=Cu[1],Tu.ivsalt=Cu[2]);var Pu=_u.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Pu&&(Tu.type=Pu[1]);var Bu=-1,Ru=0;_u.indexOf(`\r
\r
`)!=-1&&(Bu=_u.indexOf(`\r
\r
`),Ru=2),_u.indexOf(`

`)!=-1&&(Bu=_u.indexOf(`

`),Ru=1);var Lu=_u.indexOf("-----END");if(Bu!=-1&&Lu!=-1){var Ou=_u.substring(Bu+2*Ru,Lu-Ru);Ou=Ou.replace(/\s+/g,""),Tu.data=Ou}return Tu},xe=function(_u,Tu,Cu){for(var Pu=Cu.substring(0,16),Bu=h$2.enc.Hex.parse(Pu),Ru=h$2.enc.Utf8.parse(Tu),Lu=ye[_u].keylen+ye[_u].ivlen,Ou="",Du=null;;){var $u=h$2.algo.MD5.create();if(Du!=null&&$u.update(Du),$u.update(Ru),$u.update(Bu),Du=$u.finalize(),(Ou+=h$2.enc.Hex.stringify(Du)).length>=2*Lu)break}var ku={};return ku.keyhex=Ou.substr(0,2*ye[_u].keylen),ku.ivhex=Ou.substr(2*ye[_u].keylen,2*ye[_u].ivlen),ku},we=function(_u,Tu,Cu,Pu){var Bu=h$2.enc.Base64.parse(_u),Ru=h$2.enc.Hex.stringify(Bu);return(0,ye[Tu].proc)(Ru,Cu,Pu)},{version:"1.0.0",parsePKCS5PEM:function(_u){return be(_u)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(_u,Tu,Cu){return xe(_u,Tu,Cu)},decryptKeyB64:function(_u,Tu,Cu,Pu){return we(_u,Tu,Cu,Pu)},getDecryptedKeyHex:function(_u,Tu){var Cu=be(_u),Pu=Cu.cipher,Bu=Cu.ivsalt,Ru=Cu.data,Lu=xe(Pu,Tu,Bu).keyhex;return we(Ru,Pu,Lu,Bu)},getEncryptedPKCS5PEMFromPrvKeyHex:function(_u,Tu,Cu,Pu,Bu){var Ru="";if(Pu!==void 0&&Pu!=null||(Pu="AES-256-CBC"),ye[Pu]===void 0)throw"KEYUTIL unsupported algorithm: "+Pu;Bu!==void 0&&Bu!=null||(Bu=function(Ou){var Du=h$2.lib.WordArray.random(Ou);return h$2.enc.Hex.stringify(Du)}(ye[Pu].ivlen).toUpperCase());var Lu=function(Ou,Du,$u,ku){return(0,ye[Du].eproc)(Ou,$u,ku)}(Tu,Pu,xe(Pu,Cu,Bu).keyhex,Bu);return Ru="-----BEGIN "+_u+` PRIVATE KEY-----\r
`,Ru+=`Proc-Type: 4,ENCRYPTED\r
`,Ru+="DEK-Info: "+Pu+","+Bu+`\r
`,Ru+=`\r
`,Ru+=Lu.replace(/(.{64})/g,`$1\r
`),Ru+=`\r
-----END `+_u+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(_u){var Tu=Me,Cu=Tu.getChildIdx,Pu=Tu.getV,Bu={},Ru=Cu(_u,0);if(Ru.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Ru.length;Bu.ciphertext=Pu(_u,Ru[1]);var Lu=Cu(_u,Ru[0]);if(Lu.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Lu.length;if(Pu(_u,Lu[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Ou=Cu(_u,Lu[1]);if(Lu.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Ou.length;var Du=Cu(_u,Ou[1]);if(Du.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Du.length;if(Pu(_u,Du[0])!="2a864886f70d0307")throw"this only supports TripleDES";Bu.encryptionSchemeAlg="TripleDES",Bu.encryptionSchemeIV=Pu(_u,Du[1]);var $u=Cu(_u,Ou[0]);if($u.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+$u.length;if(Pu(_u,$u[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var ku=Cu(_u,$u[1]);if(ku.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+ku.length;Bu.pbkdf2Salt=Pu(_u,ku[0]);var Fu=Pu(_u,ku[1]);try{Bu.pbkdf2Iter=parseInt(Fu,16)}catch{throw"malformed format pbkdf2Iter: "+Fu}return Bu},getPBKDF2KeyHexFromParam:function(_u,Tu){var Cu=h$2.enc.Hex.parse(_u.pbkdf2Salt),Pu=_u.pbkdf2Iter,Bu=h$2.PBKDF2(Tu,Cu,{keySize:6,iterations:Pu});return h$2.enc.Hex.stringify(Bu)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(_u,Tu){var Cu=le(_u,"ENCRYPTED PRIVATE KEY"),Pu=this.parseHexOfEncryptedPKCS8(Cu),Bu=Ee.getPBKDF2KeyHexFromParam(Pu,Tu),Ru={};Ru.ciphertext=h$2.enc.Hex.parse(Pu.ciphertext);var Lu=h$2.enc.Hex.parse(Bu),Ou=h$2.enc.Hex.parse(Pu.encryptionSchemeIV),Du=h$2.TripleDES.decrypt(Ru,Lu,{iv:Ou});return h$2.enc.Hex.stringify(Du)},getKeyFromEncryptedPKCS8PEM:function(_u,Tu){var Cu=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(_u,Tu);return this.getKeyFromPlainPrivatePKCS8Hex(Cu)},parsePlainPrivatePKCS8Hex:function(_u){var Tu=Me,Cu=Tu.getChildIdx,Pu=Tu.getV,Bu={algparam:null};if(_u.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ru=Cu(_u,0);if(Ru.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(_u.substr(Ru[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Lu=Cu(_u,Ru[1]);if(Lu.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(_u.substr(Lu[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Bu.algoid=Pu(_u,Lu[0]),_u.substr(Lu[1],2)=="06"&&(Bu.algparam=Pu(_u,Lu[1])),_u.substr(Ru[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Bu.keyidx=Tu.getVidx(_u,Ru[2]),Bu},getKeyFromPlainPrivatePKCS8PEM:function(_u){var Tu=le(_u,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(Tu)},getKeyFromPlainPrivatePKCS8Hex:function(_u){var Tu,Cu=this.parsePlainPrivatePKCS8Hex(_u);if(Cu.algoid=="2a864886f70d010101")Tu=new X$1;else if(Cu.algoid=="2a8648ce380401")Tu=new l$3.crypto.DSA;else{if(Cu.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";Tu=new l$3.crypto.ECDSA}return Tu.readPKCS8PrvKeyHex(_u),Tu},_getKeyFromPublicPKCS8Hex:function(_u){var Tu,Cu=Me.getVbyList(_u,0,[0,0],"06");if(Cu==="2a864886f70d010101")Tu=new X$1;else if(Cu==="2a8648ce380401")Tu=new l$3.crypto.DSA;else{if(Cu!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";Tu=new l$3.crypto.ECDSA}return Tu.readPKCS8PubKeyHex(_u),Tu},parsePublicRawRSAKeyHex:function(_u){var Tu=Me,Cu=Tu.getChildIdx,Pu=Tu.getV,Bu={};if(_u.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Ru=Cu(_u,0);if(Ru.length!=2)throw"malformed RSA key(code:002)";if(_u.substr(Ru[0],2)!="02")throw"malformed RSA key(code:003)";if(Bu.n=Pu(_u,Ru[0]),_u.substr(Ru[1],2)!="02")throw"malformed RSA key(code:004)";return Bu.e=Pu(_u,Ru[1]),Bu},parsePublicPKCS8Hex:function(_u){var Tu=Me,Cu=Tu.getChildIdx,Pu=Tu.getV,Bu={algparam:null},Ru=Cu(_u,0);if(Ru.length!=2)throw"outer DERSequence shall have 2 elements: "+Ru.length;var Lu=Ru[0];if(_u.substr(Lu,2)!="30")throw"malformed PKCS8 public key(code:001)";var Ou=Cu(_u,Lu);if(Ou.length!=2)throw"malformed PKCS8 public key(code:002)";if(_u.substr(Ou[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Bu.algoid=Pu(_u,Ou[0]),_u.substr(Ou[1],2)=="06"?Bu.algparam=Pu(_u,Ou[1]):_u.substr(Ou[1],2)=="30"&&(Bu.algparam={},Bu.algparam.p=Tu.getVbyList(_u,Ou[1],[0],"02"),Bu.algparam.q=Tu.getVbyList(_u,Ou[1],[1],"02"),Bu.algparam.g=Tu.getVbyList(_u,Ou[1],[2],"02")),_u.substr(Ru[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Bu.key=Pu(_u,Ru[1]).substr(2),Bu}});Ee.getKey=function(_u,Tu,Cu){var Pu=(ju=Me).getChildIdx;ju.getV;var Bu=ju.getVbyList,Ru=l$3.crypto,Lu=Ru.ECDSA,Ou=Ru.DSA,Du=X$1,$u=le,ku=Ee;if(Du!==void 0&&_u instanceof Du||Lu!==void 0&&_u instanceof Lu||Ou!==void 0&&_u instanceof Ou)return _u;if(_u.curve!==void 0&&_u.xy!==void 0&&_u.d===void 0)return new Lu({pub:_u.xy,curve:_u.curve});if(_u.curve!==void 0&&_u.d!==void 0)return new Lu({prv:_u.d,curve:_u.curve});if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(Xu=new Du).setPublic(_u.n,_u.e),Xu;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.co!==void 0&&_u.qi===void 0)return(Xu=new Du).setPrivateEx(_u.n,_u.e,_u.d,_u.p,_u.q,_u.dp,_u.dq,_u.co),Xu;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p===void 0)return(Xu=new Du).setPrivate(_u.n,_u.e,_u.d),Xu;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x===void 0)return(Xu=new Ou).setPublic(_u.p,_u.q,_u.g,_u.y),Xu;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x!==void 0)return(Xu=new Ou).setPrivate(_u.p,_u.q,_u.g,_u.y,_u.x),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(Xu=new Du).setPublic(te(_u.n),te(_u.e)),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.qi!==void 0)return(Xu=new Du).setPrivateEx(te(_u.n),te(_u.e),te(_u.d),te(_u.p),te(_u.q),te(_u.dp),te(_u.dq),te(_u.qi)),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0)return(Xu=new Du).setPrivate(te(_u.n),te(_u.e),te(_u.d)),Xu;if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d===void 0){var Fu=(Ku=new Lu({curve:_u.crv})).ecparams.keylen/4,Nu="04"+("0000000000"+te(_u.x)).slice(-Fu)+("0000000000"+te(_u.y)).slice(-Fu);return Ku.setPublicKeyHex(Nu),Ku}if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d!==void 0){Fu=(Ku=new Lu({curve:_u.crv})).ecparams.keylen/4,Nu="04"+("0000000000"+te(_u.x)).slice(-Fu)+("0000000000"+te(_u.y)).slice(-Fu);var Vu=("0000000000"+te(_u.d)).slice(-Fu);return Ku.setPublicKeyHex(Nu),Ku.setPrivateKeyHex(Vu),Ku}if(Cu==="pkcs5prv"){var Gu,Hu=_u,ju=Me;if((Gu=Pu(Hu,0)).length===9)(Xu=new Du).readPKCS5PrvKeyHex(Hu);else if(Gu.length===6)(Xu=new Ou).readPKCS5PrvKeyHex(Hu);else{if(!(Gu.length>2&&Hu.substr(Gu[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Xu=new Lu).readPKCS5PrvKeyHex(Hu)}return Xu}if(Cu==="pkcs8prv")return Xu=ku.getKeyFromPlainPrivatePKCS8Hex(_u);if(Cu==="pkcs8pub")return ku._getKeyFromPublicPKCS8Hex(_u);if(Cu==="x509pub")return Be.getPublicKeyFromCertHex(_u);if(_u.indexOf("-END CERTIFICATE-",0)!=-1||_u.indexOf("-END X509 CERTIFICATE-",0)!=-1||_u.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Be.getPublicKeyFromCertPEM(_u);if(_u.indexOf("-END PUBLIC KEY-")!=-1){var Uu=le(_u,"PUBLIC KEY");return ku._getKeyFromPublicPKCS8Hex(Uu)}if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var zu=$u(_u,"RSA PRIVATE KEY");return ku.getKey(zu,null,"pkcs5prv")}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var Wu=Bu(_c=$u(_u,"DSA PRIVATE KEY"),0,[1],"02"),Qu=Bu(_c,0,[2],"02"),qu=Bu(_c,0,[3],"02"),Yu=Bu(_c,0,[4],"02"),Xc=Bu(_c,0,[5],"02");return(Xu=new Ou).setPrivate(new c$2(Wu,16),new c$2(Qu,16),new c$2(qu,16),new c$2(Yu,16),new c$2(Xc,16)),Xu}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1)return zu=$u(_u,"EC PRIVATE KEY"),ku.getKey(zu,null,"pkcs5prv");if(_u.indexOf("-END PRIVATE KEY-")!=-1)return ku.getKeyFromPlainPrivatePKCS8PEM(_u);if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var _h=ku.getDecryptedKeyHex(_u,Tu),_d=new X$1;return _d.readPKCS5PrvKeyHex(_h),_d}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var Ku,Xu=Bu(_c=ku.getDecryptedKeyHex(_u,Tu),0,[1],"04"),Ju=Bu(_c,0,[2,0],"06"),Zu=Bu(_c,0,[3,0],"03").substr(2);if(l$3.crypto.OID.oidhex2name[Ju]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+Ju;return(Ku=new Lu({curve:l$3.crypto.OID.oidhex2name[Ju]})).setPublicKeyHex(Zu),Ku.setPrivateKeyHex(Xu),Ku.isPublic=!1,Ku}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var _c;return Wu=Bu(_c=ku.getDecryptedKeyHex(_u,Tu),0,[1],"02"),Qu=Bu(_c,0,[2],"02"),qu=Bu(_c,0,[3],"02"),Yu=Bu(_c,0,[4],"02"),Xc=Bu(_c,0,[5],"02"),(Xu=new Ou).setPrivate(new c$2(Wu,16),new c$2(Qu,16),new c$2(qu,16),new c$2(Yu,16),new c$2(Xc,16)),Xu}if(_u.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return ku.getKeyFromEncryptedPKCS8PEM(_u,Tu);throw new Error("not supported argument")},Ee.generateKeypair=function(_u,Tu){if(_u=="RSA"){var Cu=Tu;(Lu=new X$1).generate(Cu,"10001"),Lu.isPrivate=!0,Lu.isPublic=!0;var Pu=new X$1,Bu=Lu.n.toString(16),Ru=Lu.e.toString(16);return Pu.setPublic(Bu,Ru),Pu.isPrivate=!1,Pu.isPublic=!0,(Ou={}).prvKeyObj=Lu,Ou.pubKeyObj=Pu,Ou}if(_u=="EC"){var Lu,Ou,Du=Tu,$u=new l$3.crypto.ECDSA({curve:Du}).generateKeyPairHex();return(Lu=new l$3.crypto.ECDSA({curve:Du})).setPublicKeyHex($u.ecpubhex),Lu.setPrivateKeyHex($u.ecprvhex),Lu.isPrivate=!0,Lu.isPublic=!1,(Pu=new l$3.crypto.ECDSA({curve:Du})).setPublicKeyHex($u.ecpubhex),Pu.isPrivate=!1,Pu.isPublic=!0,(Ou={}).prvKeyObj=Lu,Ou.pubKeyObj=Pu,Ou}throw"unknown algorithm: "+_u},Ee.getPEM=function(_u,Tu,Cu,Pu,Bu,Ru){var Lu=l$3,Ou=Lu.asn1,Du=Ou.DERObjectIdentifier,$u=Ou.DERInteger,ku=Ou.ASN1Util.newObject,Fu=Ou.x509.SubjectPublicKeyInfo,Nu=Lu.crypto,Vu=Nu.DSA,Gu=Nu.ECDSA,Hu=X$1;function ju(Ku){return ku({seq:[{int:0},{int:{bigint:Ku.n}},{int:Ku.e},{int:{bigint:Ku.d}},{int:{bigint:Ku.p}},{int:{bigint:Ku.q}},{int:{bigint:Ku.dmp1}},{int:{bigint:Ku.dmq1}},{int:{bigint:Ku.coeff}}]})}function Uu(Ku){return ku({seq:[{int:1},{octstr:{hex:Ku.prvKeyHex}},{tag:["a0",!0,{oid:{name:Ku.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Ku.pubKeyHex}}]}]})}function zu(Ku){return ku({seq:[{int:0},{int:{bigint:Ku.p}},{int:{bigint:Ku.q}},{int:{bigint:Ku.g}},{int:{bigint:Ku.y}},{int:{bigint:Ku.x}}]})}if((Hu!==void 0&&_u instanceof Hu||Vu!==void 0&&_u instanceof Vu||Gu!==void 0&&_u instanceof Gu)&&_u.isPublic==1&&(Tu===void 0||Tu=="PKCS8PUB"))return ae(Yu=new Fu(_u).getEncodedHex(),"PUBLIC KEY");if(Tu=="PKCS1PRV"&&Hu!==void 0&&_u instanceof Hu&&(Cu===void 0||Cu==null)&&_u.isPrivate==1)return ae(Yu=ju(_u).getEncodedHex(),"RSA PRIVATE KEY");if(Tu=="PKCS1PRV"&&Gu!==void 0&&_u instanceof Gu&&(Cu===void 0||Cu==null)&&_u.isPrivate==1){var Wu=new Du({name:_u.curveName}).getEncodedHex(),Qu=Uu(_u).getEncodedHex(),qu="";return qu+=ae(Wu,"EC PARAMETERS"),qu+=ae(Qu,"EC PRIVATE KEY")}if(Tu=="PKCS1PRV"&&Vu!==void 0&&_u instanceof Vu&&(Cu===void 0||Cu==null)&&_u.isPrivate==1)return ae(Yu=zu(_u).getEncodedHex(),"DSA PRIVATE KEY");if(Tu=="PKCS5PRV"&&Hu!==void 0&&_u instanceof Hu&&Cu!==void 0&&Cu!=null&&_u.isPrivate==1){var Yu=ju(_u).getEncodedHex();return Pu===void 0&&(Pu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Yu,Cu,Pu,Ru)}if(Tu=="PKCS5PRV"&&Gu!==void 0&&_u instanceof Gu&&Cu!==void 0&&Cu!=null&&_u.isPrivate==1)return Yu=Uu(_u).getEncodedHex(),Pu===void 0&&(Pu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Yu,Cu,Pu,Ru);if(Tu=="PKCS5PRV"&&Vu!==void 0&&_u instanceof Vu&&Cu!==void 0&&Cu!=null&&_u.isPrivate==1)return Yu=zu(_u).getEncodedHex(),Pu===void 0&&(Pu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Yu,Cu,Pu,Ru);var Xc=function(Ku,Xu){var Ju=_h(Ku,Xu);return new ku({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Ju.pbkdf2Salt}},{int:Ju.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Ju.encryptionSchemeIV}}]}]}]},{octstr:{hex:Ju.ciphertext}}]}).getEncodedHex()},_h=function(Ku,Xu){var Ju=h$2.lib.WordArray.random(8),Zu=h$2.lib.WordArray.random(8),_c=h$2.PBKDF2(Xu,Ju,{keySize:6,iterations:100}),_f=h$2.enc.Hex.parse(Ku),ep=h$2.TripleDES.encrypt(_f,_c,{iv:Zu})+"",tp={};return tp.ciphertext=ep,tp.pbkdf2Salt=h$2.enc.Hex.stringify(Ju),tp.pbkdf2Iter=100,tp.encryptionSchemeAlg="DES-EDE3-CBC",tp.encryptionSchemeIV=h$2.enc.Hex.stringify(Zu),tp};if(Tu=="PKCS8PRV"&&Hu!=null&&_u instanceof Hu&&_u.isPrivate==1){var _d=ju(_u).getEncodedHex();return Yu=ku({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:_d}}]}).getEncodedHex(),Cu===void 0||Cu==null?ae(Yu,"PRIVATE KEY"):ae(Qu=Xc(Yu,Cu),"ENCRYPTED PRIVATE KEY")}if(Tu=="PKCS8PRV"&&Gu!==void 0&&_u instanceof Gu&&_u.isPrivate==1)return _d=new ku({seq:[{int:1},{octstr:{hex:_u.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+_u.pubKeyHex}}]}]}).getEncodedHex(),Yu=ku({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:_u.curveName}}]},{octstr:{hex:_d}}]}).getEncodedHex(),Cu===void 0||Cu==null?ae(Yu,"PRIVATE KEY"):ae(Qu=Xc(Yu,Cu),"ENCRYPTED PRIVATE KEY");if(Tu=="PKCS8PRV"&&Vu!==void 0&&_u instanceof Vu&&_u.isPrivate==1)return _d=new $u({bigint:_u.x}).getEncodedHex(),Yu=ku({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:_u.p}},{int:{bigint:_u.q}},{int:{bigint:_u.g}}]}]},{octstr:{hex:_d}}]}).getEncodedHex(),Cu===void 0||Cu==null?ae(Yu,"PRIVATE KEY"):ae(Qu=Xc(Yu,Cu),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ee.getKeyFromCSRPEM=function(_u){var Tu=le(_u,"CERTIFICATE REQUEST");return Ee.getKeyFromCSRHex(Tu)},Ee.getKeyFromCSRHex=function(_u){var Tu=Ee.parseCSRHex(_u);return Ee.getKey(Tu.p8pubkeyhex,null,"pkcs8pub")},Ee.parseCSRHex=function(_u){var Tu=Me,Cu=Tu.getChildIdx,Pu=Tu.getTLV,Bu={},Ru=_u;if(Ru.substr(0,2)!="30")throw"malformed CSR(code:001)";var Lu=Cu(Ru,0);if(Lu.length<1)throw"malformed CSR(code:002)";if(Ru.substr(Lu[0],2)!="30")throw"malformed CSR(code:003)";var Ou=Cu(Ru,Lu[0]);if(Ou.length<3)throw"malformed CSR(code:004)";return Bu.p8pubkeyhex=Pu(Ru,Ou[2]),Bu},Ee.getKeyID=function(_u){var Tu=Ee,Cu=Me;typeof _u=="string"&&_u.indexOf("BEGIN ")!=-1&&(_u=Tu.getKey(_u));var Pu=le(Tu.getPEM(_u)),Bu=Cu.getIdxbyList(Pu,0,[1]),Ru=Cu.getV(Pu,Bu).substring(2);return l$3.crypto.Util.hashHex(Ru,"sha1")},Ee.getJWKFromKey=function(_u){var Tu={};if(_u instanceof X$1&&_u.isPrivate)return Tu.kty="RSA",Tu.n=ee(_u.n.toString(16)),Tu.e=ee(_u.e.toString(16)),Tu.d=ee(_u.d.toString(16)),Tu.p=ee(_u.p.toString(16)),Tu.q=ee(_u.q.toString(16)),Tu.dp=ee(_u.dmp1.toString(16)),Tu.dq=ee(_u.dmq1.toString(16)),Tu.qi=ee(_u.coeff.toString(16)),Tu;if(_u instanceof X$1&&_u.isPublic)return Tu.kty="RSA",Tu.n=ee(_u.n.toString(16)),Tu.e=ee(_u.e.toString(16)),Tu;if(_u instanceof l$3.crypto.ECDSA&&_u.isPrivate){if((Pu=_u.getShortNISTPCurveName())!=="P-256"&&Pu!=="P-384")throw"unsupported curve name for JWT: "+Pu;var Cu=_u.getPublicKeyXYHex();return Tu.kty="EC",Tu.crv=Pu,Tu.x=ee(Cu.x),Tu.y=ee(Cu.y),Tu.d=ee(_u.prvKeyHex),Tu}if(_u instanceof l$3.crypto.ECDSA&&_u.isPublic){var Pu;if((Pu=_u.getShortNISTPCurveName())!=="P-256"&&Pu!=="P-384")throw"unsupported curve name for JWT: "+Pu;return Cu=_u.getPublicKeyXYHex(),Tu.kty="EC",Tu.crv=Pu,Tu.x=ee(Cu.x),Tu.y=ee(Cu.y),Tu}throw"not supported key object"},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.ASN1Util=new function(){this.integerToByteHex=function(_u){var Tu=_u.toString(16);return Tu.length%2==1&&(Tu="0"+Tu),Tu},this.bigIntToMinTwosComplementsHex=function(_u){var Tu=_u.toString(16);if(Tu.substr(0,1)!="-")Tu.length%2==1?Tu="0"+Tu:Tu.match(/^[0-7]/)||(Tu="00"+Tu);else{var Cu=Tu.substr(1).length;Cu%2==1?Cu+=1:Tu.match(/^[0-7]/)||(Cu+=2);for(var Pu="",Bu=0;Bu<Cu;Bu++)Pu+="f";Tu=new c$2(Pu,16).xor(_u).add(c$2.ONE).toString(16).replace(/^-/,"")}return Tu},this.getPEMStringFromHex=function(_u,Tu){return ae(_u,Tu)},this.newObject=function(_u){var Tu=l$3.asn1,Cu=Tu.ASN1Object,Pu=Tu.DERBoolean,Bu=Tu.DERInteger,Ru=Tu.DERBitString,Lu=Tu.DEROctetString,Ou=Tu.DERNull,Du=Tu.DERObjectIdentifier,$u=Tu.DEREnumerated,ku=Tu.DERUTF8String,Fu=Tu.DERNumericString,Nu=Tu.DERPrintableString,Vu=Tu.DERTeletexString,Gu=Tu.DERIA5String,Hu=Tu.DERUTCTime,ju=Tu.DERGeneralizedTime,Uu=Tu.DERVisibleString,zu=Tu.DERBMPString,Wu=Tu.DERSequence,Qu=Tu.DERSet,qu=Tu.DERTaggedObject,Yu=Tu.ASN1Util.newObject;if(_u instanceof Tu.ASN1Object)return _u;var Xc=Object.keys(_u);if(Xc.length!=1)throw new Error("key of param shall be only one.");var _h=Xc[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+_h+":")==-1)throw new Error("undefined key: "+_h);if(_h=="bool")return new Pu(_u[_h]);if(_h=="int")return new Bu(_u[_h]);if(_h=="bitstr")return new Ru(_u[_h]);if(_h=="octstr")return new Lu(_u[_h]);if(_h=="null")return new Ou(_u[_h]);if(_h=="oid")return new Du(_u[_h]);if(_h=="enum")return new $u(_u[_h]);if(_h=="utf8str")return new ku(_u[_h]);if(_h=="numstr")return new Fu(_u[_h]);if(_h=="prnstr")return new Nu(_u[_h]);if(_h=="telstr")return new Vu(_u[_h]);if(_h=="ia5str")return new Gu(_u[_h]);if(_h=="utctime")return new Hu(_u[_h]);if(_h=="gentime")return new ju(_u[_h]);if(_h=="visstr")return new Uu(_u[_h]);if(_h=="bmpstr")return new zu(_u[_h]);if(_h=="asn1")return new Cu(_u[_h]);if(_h=="seq"){for(var _d=_u[_h],Ku=[],Xu=0;Xu<_d.length;Xu++){var Ju=Yu(_d[Xu]);Ku.push(Ju)}return new Wu({array:Ku})}if(_h=="set"){for(_d=_u[_h],Ku=[],Xu=0;Xu<_d.length;Xu++)Ju=Yu(_d[Xu]),Ku.push(Ju);return new Qu({array:Ku})}if(_h=="tag"){var Zu=_u[_h];if(Object.prototype.toString.call(Zu)==="[object Array]"&&Zu.length==3){var _c=Yu(Zu[2]);return new qu({tag:Zu[0],explicit:Zu[1],obj:_c})}return new qu(Zu)}},this.jsonToASN1HEX=function(_u){return this.newObject(_u).getEncodedHex()}},l$3.asn1.ASN1Util.oidHexToInt=function(_u){for(var Tu="",Cu=parseInt(_u.substr(0,2),16),Pu=(Tu=Math.floor(Cu/40)+"."+Cu%40,""),Bu=2;Bu<_u.length;Bu+=2){var Ru=("00000000"+parseInt(_u.substr(Bu,2),16).toString(2)).slice(-8);Pu+=Ru.substr(1,7),Ru.substr(0,1)=="0"&&(Tu=Tu+"."+new c$2(Pu,2).toString(10),Pu="")}return Tu},l$3.asn1.ASN1Util.oidIntToHex=function(_u){var Tu=function(Ou){var Du=Ou.toString(16);return Du.length==1&&(Du="0"+Du),Du},Cu=function(Ou){var Du="",$u=new c$2(Ou,10).toString(2),ku=7-$u.length%7;ku==7&&(ku=0);for(var Fu="",Nu=0;Nu<ku;Nu++)Fu+="0";for($u=Fu+$u,Nu=0;Nu<$u.length-1;Nu+=7){var Vu=$u.substr(Nu,7);Nu!=$u.length-7&&(Vu="1"+Vu),Du+=Tu(parseInt(Vu,2))}return Du};if(!_u.match(/^[0-9.]+$/))throw"malformed oid string: "+_u;var Pu="",Bu=_u.split("."),Ru=40*parseInt(Bu[0])+parseInt(Bu[1]);Pu+=Tu(Ru),Bu.splice(0,2);for(var Lu=0;Lu<Bu.length;Lu++)Pu+=Cu(Bu[Lu]);return Pu},l$3.asn1.ASN1Object=function(_u){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var Tu=this.hV.length/2,Cu=Tu.toString(16);if(Cu.length%2==1&&(Cu="0"+Cu),Tu<128)return Cu;var Pu=Cu.length/2;if(Pu>15)throw"ASN.1 length too long to represent by 8x: n = "+Tu.toString(16);return(128+Pu).toString(16)+Cu},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(Tu){this.params=Tu},_u!=null&&_u.tlv!=null&&(this.hTLV=_u.tlv,this.isModified=!1)},l$3.asn1.DERAbstractString=function(_u){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(Tu){this.hTLV=null,this.isModified=!0,this.s=Tu,this.hV=ie(this.s).toLowerCase()},this.setStringHex=function(Tu){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Tu},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"?this.setString(_u):_u.str!==void 0?this.setString(_u.str):_u.hex!==void 0&&this.setStringHex(_u.hex))},u$2.lang.extend(l$3.asn1.DERAbstractString,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractTime=function(_u){l$3.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(Tu){var Cu=Tu.getTime()+6e4*Tu.getTimezoneOffset();return new Date(Cu)},this.formatDate=function(Tu,Cu,Pu){var Bu=this.zeroPadding,Ru=this.localDateToUTC(Tu),Lu=String(Ru.getFullYear());Cu=="utc"&&(Lu=Lu.substr(2,2));var Ou=Lu+Bu(String(Ru.getMonth()+1),2)+Bu(String(Ru.getDate()),2)+Bu(String(Ru.getHours()),2)+Bu(String(Ru.getMinutes()),2)+Bu(String(Ru.getSeconds()),2);if(Pu===!0){var Du=Ru.getMilliseconds();if(Du!=0){var $u=Bu(String(Du),3);Ou=Ou+"."+($u=$u.replace(/[0]+$/,""))}}return Ou+"Z"},this.zeroPadding=function(Tu,Cu){return Tu.length>=Cu?Tu:new Array(Cu-Tu.length+1).join("0")+Tu},this.getString=function(){return this.s},this.setString=function(Tu){this.hTLV=null,this.isModified=!0,this.s=Tu,this.hV=J$1(Tu)},this.setByDateValue=function(Tu,Cu,Pu,Bu,Ru,Lu){var Ou=new Date(Date.UTC(Tu,Cu-1,Pu,Bu,Ru,Lu,0));this.setByDate(Ou)},this.getFreshValueHex=function(){return this.hV}},u$2.lang.extend(l$3.asn1.DERAbstractTime,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractStructured=function(_u){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(Tu){this.hTLV=null,this.isModified=!0,this.asn1Array=Tu},this.appendASN1Object=function(Tu){this.hTLV=null,this.isModified=!0,this.asn1Array.push(Tu)},this.asn1Array=new Array,_u!==void 0&&_u.array!==void 0&&(this.asn1Array=_u.array)},u$2.lang.extend(l$3.asn1.DERAbstractStructured,l$3.asn1.ASN1Object),l$3.asn1.DERBoolean=function(_u){l$3.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=_u==0?"010100":"0101ff"},u$2.lang.extend(l$3.asn1.DERBoolean,l$3.asn1.ASN1Object),l$3.asn1.DERInteger=function(_u){l$3.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(Tu){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex(Tu)},this.setByInteger=function(Tu){var Cu=new c$2(String(Tu),10);this.setByBigInteger(Cu)},this.setValueHex=function(Tu){this.hV=Tu},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.bigint!==void 0?this.setByBigInteger(_u.bigint):_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$2.lang.extend(l$3.asn1.DERInteger,l$3.asn1.ASN1Object),l$3.asn1.DERBitString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var Tu=l$3.asn1.ASN1Util.newObject(_u.obj);_u.hex="00"+Tu.getEncodedHex()}l$3.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(Cu){this.hTLV=null,this.isModified=!0,this.hV=Cu},this.setUnusedBitsAndHexValue=function(Cu,Pu){if(Cu<0||7<Cu)throw"unused bits shall be from 0 to 7: u = "+Cu;var Bu="0"+Cu;this.hTLV=null,this.isModified=!0,this.hV=Bu+Pu},this.setByBinaryString=function(Cu){var Pu=8-(Cu=Cu.replace(/0+$/,"")).length%8;Pu==8&&(Pu=0);for(var Bu=0;Bu<=Pu;Bu++)Cu+="0";var Ru="";for(Bu=0;Bu<Cu.length-1;Bu+=8){var Lu=Cu.substr(Bu,8),Ou=parseInt(Lu,2).toString(16);Ou.length==1&&(Ou="0"+Ou),Ru+=Ou}this.hTLV=null,this.isModified=!0,this.hV="0"+Pu+Ru},this.setByBooleanArray=function(Cu){for(var Pu="",Bu=0;Bu<Cu.length;Bu++)Cu[Bu]==1?Pu+="1":Pu+="0";this.setByBinaryString(Pu)},this.newFalseArray=function(Cu){for(var Pu=new Array(Cu),Bu=0;Bu<Cu;Bu++)Pu[Bu]=!1;return Pu},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"&&_u.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(_u):_u.hex!==void 0?this.setHexValueIncludingUnusedBits(_u.hex):_u.bin!==void 0?this.setByBinaryString(_u.bin):_u.array!==void 0&&this.setByBooleanArray(_u.array))},u$2.lang.extend(l$3.asn1.DERBitString,l$3.asn1.ASN1Object),l$3.asn1.DEROctetString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var Tu=l$3.asn1.ASN1Util.newObject(_u.obj);_u.hex=Tu.getEncodedHex()}l$3.asn1.DEROctetString.superclass.constructor.call(this,_u),this.hT="04"},u$2.lang.extend(l$3.asn1.DEROctetString,l$3.asn1.DERAbstractString),l$3.asn1.DERNull=function(){l$3.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},u$2.lang.extend(l$3.asn1.DERNull,l$3.asn1.ASN1Object),l$3.asn1.DERObjectIdentifier=function(_u){l$3.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(Tu){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Tu},this.setValueOidString=function(Tu){var Cu=function(Pu){var Bu=function(ku){var Fu=ku.toString(16);return Fu.length==1&&(Fu="0"+Fu),Fu},Ru=function(ku){var Fu="",Nu=parseInt(ku,10).toString(2),Vu=7-Nu.length%7;Vu==7&&(Vu=0);for(var Gu="",Hu=0;Hu<Vu;Hu++)Gu+="0";for(Nu=Gu+Nu,Hu=0;Hu<Nu.length-1;Hu+=7){var ju=Nu.substr(Hu,7);Hu!=Nu.length-7&&(ju="1"+ju),Fu+=Bu(parseInt(ju,2))}return Fu};try{if(!Pu.match(/^[0-9.]+$/))return null;var Lu="",Ou=Pu.split("."),Du=40*parseInt(Ou[0],10)+parseInt(Ou[1],10);Lu+=Bu(Du),Ou.splice(0,2);for(var $u=0;$u<Ou.length;$u++)Lu+=Ru(Ou[$u]);return Lu}catch{return null}}(Tu);if(Cu==null)throw new Error("malformed oid string: "+Tu);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Cu},this.setValueName=function(Tu){var Cu=l$3.asn1.x509.OID.name2oid(Tu);if(Cu==="")throw new Error("DERObjectIdentifier oidName undefined: "+Tu);this.setValueOidString(Cu)},this.setValueNameOrOid=function(Tu){Tu.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(Tu):this.setValueName(Tu)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Tu){typeof Tu=="string"?this.setValueNameOrOid(Tu):Tu.oid!==void 0?this.setValueNameOrOid(Tu.oid):Tu.name!==void 0?this.setValueNameOrOid(Tu.name):Tu.hex!==void 0&&this.setValueHex(Tu.hex)},_u!==void 0&&this.setByParam(_u)},u$2.lang.extend(l$3.asn1.DERObjectIdentifier,l$3.asn1.ASN1Object),l$3.asn1.DEREnumerated=function(_u){l$3.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(Tu){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex(Tu)},this.setByInteger=function(Tu){var Cu=new c$2(String(Tu),10);this.setByBigInteger(Cu)},this.setValueHex=function(Tu){this.hV=Tu},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$2.lang.extend(l$3.asn1.DEREnumerated,l$3.asn1.ASN1Object),l$3.asn1.DERUTF8String=function(_u){l$3.asn1.DERUTF8String.superclass.constructor.call(this,_u),this.hT="0c"},u$2.lang.extend(l$3.asn1.DERUTF8String,l$3.asn1.DERAbstractString),l$3.asn1.DERNumericString=function(_u){l$3.asn1.DERNumericString.superclass.constructor.call(this,_u),this.hT="12"},u$2.lang.extend(l$3.asn1.DERNumericString,l$3.asn1.DERAbstractString),l$3.asn1.DERPrintableString=function(_u){l$3.asn1.DERPrintableString.superclass.constructor.call(this,_u),this.hT="13"},u$2.lang.extend(l$3.asn1.DERPrintableString,l$3.asn1.DERAbstractString),l$3.asn1.DERTeletexString=function(_u){l$3.asn1.DERTeletexString.superclass.constructor.call(this,_u),this.hT="14"},u$2.lang.extend(l$3.asn1.DERTeletexString,l$3.asn1.DERAbstractString),l$3.asn1.DERIA5String=function(_u){l$3.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="16"},u$2.lang.extend(l$3.asn1.DERIA5String,l$3.asn1.DERAbstractString),l$3.asn1.DERVisibleString=function(_u){l$3.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="1a"},u$2.lang.extend(l$3.asn1.DERVisibleString,l$3.asn1.DERAbstractString),l$3.asn1.DERBMPString=function(_u){l$3.asn1.DERBMPString.superclass.constructor.call(this,_u),this.hT="1e"},u$2.lang.extend(l$3.asn1.DERBMPString,l$3.asn1.DERAbstractString),l$3.asn1.DERUTCTime=function(_u){l$3.asn1.DERUTCTime.superclass.constructor.call(this,_u),this.hT="17",this.setByDate=function(Tu){this.hTLV=null,this.isModified=!0,this.date=Tu,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{12}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date))},u$2.lang.extend(l$3.asn1.DERUTCTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERGeneralizedTime=function(_u){l$3.asn1.DERGeneralizedTime.superclass.constructor.call(this,_u),this.hT="18",this.withMillis=!1,this.setByDate=function(Tu){this.hTLV=null,this.isModified=!0,this.date=Tu,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{14}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date),_u.millis===!0&&(this.withMillis=!0))},u$2.lang.extend(l$3.asn1.DERGeneralizedTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERSequence=function(_u){l$3.asn1.DERSequence.superclass.constructor.call(this,_u),this.hT="30",this.getFreshValueHex=function(){for(var Tu="",Cu=0;Cu<this.asn1Array.length;Cu++)Tu+=this.asn1Array[Cu].getEncodedHex();return this.hV=Tu,this.hV}},u$2.lang.extend(l$3.asn1.DERSequence,l$3.asn1.DERAbstractStructured),l$3.asn1.DERSet=function(_u){l$3.asn1.DERSet.superclass.constructor.call(this,_u),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var Tu=new Array,Cu=0;Cu<this.asn1Array.length;Cu++){var Pu=this.asn1Array[Cu];Tu.push(Pu.getEncodedHex())}return this.sortFlag==1&&Tu.sort(),this.hV=Tu.join(""),this.hV},_u!==void 0&&_u.sortflag!==void 0&&_u.sortflag==0&&(this.sortFlag=!1)},u$2.lang.extend(l$3.asn1.DERSet,l$3.asn1.DERAbstractStructured),l$3.asn1.DERTaggedObject=function(_u){l$3.asn1.DERTaggedObject.superclass.constructor.call(this);var Tu=l$3.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Cu,Pu,Bu){this.hT=Pu,this.isExplicit=Cu,this.asn1Object=Bu,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Bu.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Pu),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Cu){Cu.tag!=null&&(this.hT=Cu.tag),Cu.explicit!=null&&(this.isExplicit=Cu.explicit),Cu.tage!=null&&(this.hT=Cu.tage,this.isExplicit=!0),Cu.tagi!=null&&(this.hT=Cu.tagi,this.isExplicit=!1),Cu.obj!=null&&(Cu.obj instanceof Tu.ASN1Object?(this.asn1Object=Cu.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof Cu.obj=="object"&&(this.asn1Object=Tu.ASN1Util.newObject(Cu.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},_u!=null&&this.setByParam(_u)},u$2.lang.extend(l$3.asn1.DERTaggedObject,l$3.asn1.ASN1Object);var Me=new function(){};function Ie(_u,Tu){for(var Cu="",Pu=Tu/4-_u.length,Bu=0;Bu<Pu;Bu++)Cu+="0";return Cu+_u}function Se(_u,Tu,Cu){for(var Pu="",Bu=0;Pu.length<Tu;)Pu+=re(Cu(oe(_u+String.fromCharCode.apply(String,[(4278190080&Bu)>>24,(16711680&Bu)>>16,(65280&Bu)>>8,255&Bu])))),Bu+=1;return Pu}function Ce(_u){for(var Tu in l$3.crypto.Util.DIGESTINFOHEAD){var Cu=l$3.crypto.Util.DIGESTINFOHEAD[Tu],Pu=Cu.length;if(_u.substring(0,Pu)==Cu)return[Tu,_u.substring(Pu)]}return[]}function Be(_u){var Tu,Cu=Me,Pu=Cu.getChildIdx,Bu=Cu.getV,Ru=Cu.getTLV,Lu=Cu.getVbyList,Ou=Cu.getVbyListEx,Du=Cu.getTLVbyList,$u=Cu.getTLVbyListEx,ku=Cu.getIdxbyList,Fu=Cu.getIdxbyListEx,Nu=Cu.getVidx,Vu=Cu.getInt,Gu=Cu.oidname,Hu=Cu.hextooidstr,ju=le;try{Tu=l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Uu=Du(this.hex,0,[0,0]);if(Uu.substr(0,2)=="a0"){var zu=Du(Uu,0,[0]),Wu=Vu(zu,0);if(Wu<0||2<Wu)throw new Error("malformed version field");return this.version=Wu+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Ou(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Uu=$u(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Uu)},this.getAlgorithmIdentifierName=function(Uu){for(var zu in Tu)if(Uu===Tu[zu])return zu;return Gu(Ou(Uu,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Du(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Du(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Uu=Lu(this.hex,0,[0,4+this.foffset,0]);return Uu=Uu.replace(/(..)/g,"%$1"),Uu=decodeURIComponent(Uu)},this.getNotAfter=function(){var Uu=Lu(this.hex,0,[0,4+this.foffset,1]);return Uu=Uu.replace(/(..)/g,"%$1"),Uu=decodeURIComponent(Uu)},this.getPublicKeyHex=function(){return Cu.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return ku(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Uu=this.getPublicKeyIdx();return ku(this.hex,Uu,[1,0],"30")},this.getPublicKey=function(){return Ee.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Uu=Du(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Uu)},this.getSignatureValueHex=function(){return Lu(this.hex,0,[2],"03",!0)},this.verifySignature=function(Uu){var zu=this.getSignatureAlgorithmField(),Wu=this.getSignatureValueHex(),Qu=Du(this.hex,0,[0],"30"),qu=new l$3.crypto.Signature({alg:zu});return qu.init(Uu),qu.updateHex(Qu),qu.verify(Wu)},this.parseExt=function(Uu){var zu,Wu,Qu;if(Uu===void 0){if(Qu=this.hex,this.version!==3)return-1;zu=ku(Qu,0,[0,7,0],"30"),Wu=Pu(Qu,zu)}else{Qu=le(Uu);var qu=ku(Qu,0,[0,3,0,0],"06");if(Bu(Qu,qu)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);zu=ku(Qu,0,[0,3,0,1,0],"30"),Wu=Pu(Qu,zu),this.hex=Qu}this.aExtInfo=new Array;for(var Yu=0;Yu<Wu.length;Yu++){var Xc={critical:!1},_h=0;Pu(Qu,Wu[Yu]).length===3&&(Xc.critical=!0,_h=1),Xc.oid=Cu.hextooidstr(Lu(Qu,Wu[Yu],[0],"06"));var _d=ku(Qu,Wu[Yu],[1+_h]);Xc.vidx=Nu(Qu,_d),this.aExtInfo.push(Xc)}},this.getExtInfo=function(Uu){var zu=this.aExtInfo,Wu=Uu;if(Uu.match(/^[0-9.]+$/)||(Wu=l$3.asn1.x509.OID.name2oid(Uu)),Wu!==""){for(var Qu=0;Qu<zu.length;Qu++)if(zu[Qu].oid===Wu)return zu[Qu]}},this.getExtBasicConstraints=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("basicConstraints");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"basicConstraints"};if(zu&&(Qu.critical=!0),Uu==="3000")return Qu;if(Uu==="30030101ff")return Qu.cA=!0,Qu;if(Uu.substr(0,12)==="30060101ff02"){var qu=Bu(Uu,10),Yu=parseInt(qu,16);return Qu.cA=!0,Qu.pathLen=Yu,Qu}throw new Error("hExtV parse error: "+Uu)},this.getExtKeyUsage=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("keyUsage");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"keyUsage"};return zu&&(Qu.critical=!0),Qu.names=this.getExtKeyUsageString(Uu).split(","),Qu},this.getExtKeyUsageBin=function(Uu){if(Uu===void 0){var zu=this.getExtInfo("keyUsage");if(zu===void 0)return"";Uu=Ru(this.hex,zu.vidx)}if(Uu.length!=8&&Uu.length!=10)throw new Error("malformed key usage value: "+Uu);var Wu="000000000000000"+parseInt(Uu.substr(6),16).toString(2);return Uu.length==8&&(Wu=Wu.slice(-8)),Uu.length==10&&(Wu=Wu.slice(-16)),(Wu=Wu.replace(/0+$/,""))==""&&(Wu="0"),Wu},this.getExtKeyUsageString=function(Uu){for(var zu=this.getExtKeyUsageBin(Uu),Wu=new Array,Qu=0;Qu<zu.length;Qu++)zu.substr(Qu,1)=="1"&&Wu.push(Be.KEYUSAGE_NAME[Qu]);return Wu.join(",")},this.getExtSubjectKeyIdentifier=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("subjectKeyIdentifier");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"subjectKeyIdentifier"};zu&&(Qu.critical=!0);var qu=Bu(Uu,0);return Qu.kid={hex:qu},Qu},this.getExtAuthorityKeyIdentifier=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("authorityKeyIdentifier");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"authorityKeyIdentifier"};zu&&(Qu.critical=!0);for(var qu=Pu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Xc=Uu.substr(qu[Yu],2);if(Xc==="80"&&(Qu.kid={hex:Bu(Uu,qu[Yu])}),Xc==="a1"){var _h=Ru(Uu,qu[Yu]),_d=this.getGeneralNames(_h);Qu.issuer=_d[0].dn}Xc==="82"&&(Qu.sn={hex:Bu(Uu,qu[Yu])})}return Qu},this.getExtExtKeyUsage=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("extKeyUsage");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"extKeyUsage",array:[]};zu&&(Qu.critical=!0);for(var qu=Pu(Uu,0),Yu=0;Yu<qu.length;Yu++)Qu.array.push(Gu(Bu(Uu,qu[Yu])));return Qu},this.getExtExtKeyUsageName=function(){var Uu=this.getExtInfo("extKeyUsage");if(Uu===void 0)return Uu;var zu=new Array,Wu=Ru(this.hex,Uu.vidx);if(Wu==="")return zu;for(var Qu=Pu(Wu,0),qu=0;qu<Qu.length;qu++)zu.push(Gu(Bu(Wu,Qu[qu])));return zu},this.getExtSubjectAltName=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("subjectAltName");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"subjectAltName",array:[]};return zu&&(Qu.critical=!0),Qu.array=this.getGeneralNames(Uu),Qu},this.getExtIssuerAltName=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("issuerAltName");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"issuerAltName",array:[]};return zu&&(Qu.critical=!0),Qu.array=this.getGeneralNames(Uu),Qu},this.getGeneralNames=function(Uu){for(var zu=Pu(Uu,0),Wu=[],Qu=0;Qu<zu.length;Qu++){var qu=this.getGeneralName(Ru(Uu,zu[Qu]));qu!==void 0&&Wu.push(qu)}return Wu},this.getGeneralName=function(Uu){var zu=Uu.substr(0,2),Wu=Bu(Uu,0),Qu=re(Wu);return zu=="81"?{rfc822:Qu}:zu=="82"?{dns:Qu}:zu=="86"?{uri:Qu}:zu=="87"?{ip:ue(Wu)}:zu=="a4"?{dn:this.getX500Name(Wu)}:void 0},this.getExtSubjectAltName2=function(){var Uu,zu,Wu,Qu=this.getExtInfo("subjectAltName");if(Qu===void 0)return Qu;for(var qu=new Array,Yu=Ru(this.hex,Qu.vidx),Xc=Pu(Yu,0),_h=0;_h<Xc.length;_h++)Wu=Yu.substr(Xc[_h],2),Uu=Bu(Yu,Xc[_h]),Wu==="81"&&(zu=ne(Uu),qu.push(["MAIL",zu])),Wu==="82"&&(zu=ne(Uu),qu.push(["DNS",zu])),Wu==="84"&&(zu=Be.hex2dn(Uu,0),qu.push(["DN",zu])),Wu==="86"&&(zu=ne(Uu),qu.push(["URI",zu])),Wu==="87"&&(zu=ue(Uu),qu.push(["IP",zu]));return qu},this.getExtCRLDistributionPoints=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("cRLDistributionPoints");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"cRLDistributionPoints",array:[]};zu&&(Qu.critical=!0);for(var qu=Pu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Xc=Ru(Uu,qu[Yu]);Qu.array.push(this.getDistributionPoint(Xc))}return Qu},this.getDistributionPoint=function(Uu){for(var zu={},Wu=Pu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Uu.substr(Wu[Qu],2),Yu=Ru(Uu,Wu[Qu]);qu=="a0"&&(zu.dpname=this.getDistributionPointName(Yu))}return zu},this.getDistributionPointName=function(Uu){for(var zu={},Wu=Pu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Uu.substr(Wu[Qu],2),Yu=Ru(Uu,Wu[Qu]);qu=="a0"&&(zu.full=this.getGeneralNames(Yu))}return zu},this.getExtCRLDistributionPointsURI=function(){var Uu=this.getExtInfo("cRLDistributionPoints");if(Uu===void 0)return Uu;for(var zu=new Array,Wu=Pu(this.hex,Uu.vidx),Qu=0;Qu<Wu.length;Qu++)try{var qu=ne(Lu(this.hex,Wu[Qu],[0,0,0],"86"));zu.push(qu)}catch{}return zu},this.getExtAIAInfo=function(){var Uu=this.getExtInfo("authorityInfoAccess");if(Uu===void 0)return Uu;for(var zu={ocsp:[],caissuer:[]},Wu=Pu(this.hex,Uu.vidx),Qu=0;Qu<Wu.length;Qu++){var qu=Lu(this.hex,Wu[Qu],[0],"06"),Yu=Lu(this.hex,Wu[Qu],[1],"86");qu==="2b06010505073001"&&zu.ocsp.push(ne(Yu)),qu==="2b06010505073002"&&zu.caissuer.push(ne(Yu))}return zu},this.getExtAuthorityInfoAccess=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("authorityInfoAccess");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"authorityInfoAccess",array:[]};zu&&(Qu.critical=!0);for(var qu=Pu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Xc=Ou(Uu,qu[Yu],[0],"06"),_h=ne(Lu(Uu,qu[Yu],[1],"86"));if(Xc=="2b06010505073001")Qu.array.push({ocsp:_h});else{if(Xc!="2b06010505073002")throw new Error("unknown method: "+Xc);Qu.array.push({caissuer:_h})}}return Qu},this.getExtCertificatePolicies=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("certificatePolicies");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"certificatePolicies",array:[]};zu&&(Qu.critical=!0);for(var qu=Pu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Xc=Ru(Uu,qu[Yu]),_h=this.getPolicyInformation(Xc);Qu.array.push(_h)}return Qu},this.getPolicyInformation=function(Uu){var zu={},Wu=Lu(Uu,0,[0],"06");zu.policyoid=Gu(Wu);var Qu=Fu(Uu,0,[1],"30");if(Qu!=-1){zu.array=[];for(var qu=Pu(Uu,Qu),Yu=0;Yu<qu.length;Yu++){var Xc=Ru(Uu,qu[Yu]),_h=this.getPolicyQualifierInfo(Xc);zu.array.push(_h)}}return zu},this.getPolicyQualifierInfo=function(Uu){var zu={},Wu=Lu(Uu,0,[0],"06");if(Wu==="2b06010505070201"){var Qu=Ou(Uu,0,[1],"16");zu.cps=re(Qu)}else if(Wu==="2b06010505070202"){var qu=Du(Uu,0,[1],"30");zu.unotice=this.getUserNotice(qu)}return zu},this.getUserNotice=function(Uu){for(var zu={},Wu=Pu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Ru(Uu,Wu[Qu]);qu.substr(0,2)!="30"&&(zu.exptext=this.getDisplayText(qu))}return zu},this.getDisplayText=function(Uu){var zu={};return zu.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Uu.substr(0,2)],zu.str=re(Bu(Uu,0)),zu},this.getExtCRLNumber=function(Uu,zu){var Wu={extname:"cRLNumber"};if(zu&&(Wu.critical=!0),Uu.substr(0,2)=="02")return Wu.num={hex:Bu(Uu,0)},Wu;throw new Error("hExtV parse error: "+Uu)},this.getExtCRLReason=function(Uu,zu){var Wu={extname:"cRLReason"};if(zu&&(Wu.critical=!0),Uu.substr(0,2)=="0a")return Wu.code=parseInt(Bu(Uu,0),16),Wu;throw new Error("hExtV parse error: "+Uu)},this.getExtOcspNonce=function(Uu,zu){var Wu={extname:"ocspNonce"};zu&&(Wu.critical=!0);var Qu=Bu(Uu,0);return Wu.hex=Qu,Wu},this.getExtOcspNoCheck=function(Uu,zu){var Wu={extname:"ocspNoCheck"};return zu&&(Wu.critical=!0),Wu},this.getExtAdobeTimeStamp=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("adobeTimeStamp");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"adobeTimeStamp"};zu&&(Qu.critical=!0);var qu=Pu(Uu,0);if(qu.length>1){var Yu=Ru(Uu,qu[1]),Xc=this.getGeneralName(Yu);Xc.uri!=null&&(Qu.uri=Xc.uri)}if(qu.length>2){var _h=Ru(Uu,qu[2]);_h=="0101ff"&&(Qu.reqauth=!0),_h=="010100"&&(Qu.reqauth=!1)}return Qu},this.getX500NameRule=function(Uu){for(var zu=null,Wu=[],Qu=0;Qu<Uu.length;Qu++)for(var qu=Uu[Qu],Yu=0;Yu<qu.length;Yu++)Wu.push(qu[Yu]);for(Qu=0;Qu<Wu.length;Qu++){var Xc=Wu[Qu],_h=Xc.ds,_d=Xc.value,Ku=Xc.type;if(_h!="prn"&&_h!="utf8"&&_h!="ia5")return"mixed";if(_h=="ia5"){if(Ku!="CN")return"mixed";if(l$3.lang.String.isMail(_d))continue;return"mixed"}if(Ku=="C"){if(_h=="prn")continue;return"mixed"}if(zu==null)zu=_h;else if(zu!==_h)return"mixed"}return zu==null?"prn":zu},this.getX500Name=function(Uu){var zu=this.getX500NameArray(Uu);return{array:zu,str:this.dnarraytostr(zu)}},this.getX500NameArray=function(Uu){for(var zu=[],Wu=Pu(Uu,0),Qu=0;Qu<Wu.length;Qu++)zu.push(this.getRDN(Ru(Uu,Wu[Qu])));return zu},this.getRDN=function(Uu){for(var zu=[],Wu=Pu(Uu,0),Qu=0;Qu<Wu.length;Qu++)zu.push(this.getAttrTypeAndValue(Ru(Uu,Wu[Qu])));return zu},this.getAttrTypeAndValue=function(Uu){var zu={type:null,value:null,ds:null},Wu=Pu(Uu,0),Qu=Lu(Uu,Wu[0],[],"06"),qu=Lu(Uu,Wu[1],[]),Yu=l$3.asn1.ASN1Util.oidHexToInt(Qu);return zu.type=l$3.asn1.x509.OID.oid2atype(Yu),zu.ds=this.HEX2STAG[Uu.substr(Wu[1],2)],zu.ds!="bmp"?zu.value=ne(qu):zu.value=he(qu),zu},this.readCertPEM=function(Uu){this.readCertHex(ju(Uu))},this.readCertHex=function(Uu){this.hex=Uu,this.getVersion();try{ku(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Uu={};return Uu.version=this.getVersion(),Uu.serial={hex:this.getSerialNumberHex()},Uu.sigalg=this.getSignatureAlgorithmField(),Uu.issuer=this.getIssuer(),Uu.notbefore=this.getNotBefore(),Uu.notafter=this.getNotAfter(),Uu.subject=this.getSubject(),Uu.sbjpubkey=ae(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Uu.ext=this.getExtParamArray()),Uu.sighex=this.getSignatureValueHex(),Uu},this.getExtParamArray=function(Uu){Uu==null&&Fu(this.hex,0,[0,"[3]"])!=-1&&(Uu=$u(this.hex,0,[0,"[3]",0],"30"));for(var zu=[],Wu=Pu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Ru(Uu,Wu[Qu]),Yu=this.getExtParam(qu);Yu!=null&&zu.push(Yu)}return zu},this.getExtParam=function(Uu){var zu=Pu(Uu,0).length;if(zu!=2&&zu!=3)throw new Error("wrong number elements in Extension: "+zu+" "+Uu);var Wu=Hu(Lu(Uu,0,[0],"06")),Qu=!1;zu==3&&Du(Uu,0,[1])=="0101ff"&&(Qu=!0);var qu=Du(Uu,0,[zu-1,0]),Yu=void 0;if(Wu=="2.5.29.14"?Yu=this.getExtSubjectKeyIdentifier(qu,Qu):Wu=="2.5.29.15"?Yu=this.getExtKeyUsage(qu,Qu):Wu=="2.5.29.17"?Yu=this.getExtSubjectAltName(qu,Qu):Wu=="2.5.29.18"?Yu=this.getExtIssuerAltName(qu,Qu):Wu=="2.5.29.19"?Yu=this.getExtBasicConstraints(qu,Qu):Wu=="2.5.29.31"?Yu=this.getExtCRLDistributionPoints(qu,Qu):Wu=="2.5.29.32"?Yu=this.getExtCertificatePolicies(qu,Qu):Wu=="2.5.29.35"?Yu=this.getExtAuthorityKeyIdentifier(qu,Qu):Wu=="2.5.29.37"?Yu=this.getExtExtKeyUsage(qu,Qu):Wu=="1.3.6.1.5.5.7.1.1"?Yu=this.getExtAuthorityInfoAccess(qu,Qu):Wu=="2.5.29.20"?Yu=this.getExtCRLNumber(qu,Qu):Wu=="2.5.29.21"?Yu=this.getExtCRLReason(qu,Qu):Wu=="1.3.6.1.5.5.7.48.1.2"?Yu=this.getExtOcspNonce(qu,Qu):Wu=="1.3.6.1.5.5.7.48.1.5"?Yu=this.getExtOcspNoCheck(qu,Qu):Wu=="1.2.840.113583.1.1.9.1"&&(Yu=this.getExtAdobeTimeStamp(qu,Qu)),Yu!=null)return Yu;var Xc={extname:Wu,extn:qu};return Qu&&(Xc.critical=!0),Xc},this.findExt=function(Uu,zu){for(var Wu=0;Wu<Uu.length;Wu++)if(Uu[Wu].extname==zu)return Uu[Wu];return null},this.updateExtCDPFullURI=function(Uu,zu){var Wu=this.findExt(Uu,"cRLDistributionPoints");if(Wu!=null&&Wu.array!=null){for(var Qu=Wu.array,qu=0;qu<Qu.length;qu++)if(Qu[qu].dpname!=null&&Qu[qu].dpname.full!=null)for(var Yu=Qu[qu].dpname.full,Xc=0;Xc<Yu.length;Xc++){var _h=Yu[qu];_h.uri!=null&&(_h.uri=zu)}}},this.updateExtAIAOCSP=function(Uu,zu){var Wu=this.findExt(Uu,"authorityInfoAccess");if(Wu!=null&&Wu.array!=null)for(var Qu=Wu.array,qu=0;qu<Qu.length;qu++)Qu[qu].ocsp!=null&&(Qu[qu].ocsp=zu)},this.updateExtAIACAIssuer=function(Uu,zu){var Wu=this.findExt(Uu,"authorityInfoAccess");if(Wu!=null&&Wu.array!=null)for(var Qu=Wu.array,qu=0;qu<Qu.length;qu++)Qu[qu].caissuer!=null&&(Qu[qu].caissuer=zu)},this.dnarraytostr=function(Uu){return"/"+Uu.map(function(zu){return function(Wu){return Wu.map(function(Qu){return function(qu){return qu.type+"="+qu.value}(Qu).replace(/\+/,"\\+")}).join("+")}(zu).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Uu,zu,Wu,Qu,qu=function(_c){for(var _f="",ep=_c.array,tp=0;tp<ep.length;tp++){var op=ep[tp];if(_f+="    policy oid: "+op.policyoid+`
`,op.array!==void 0)for(var hp=0;hp<op.array.length;hp++){var cp=op.array[hp];cp.cps!==void 0&&(_f+="    cps: "+cp.cps+`
`)}}return _f},Yu=function(_c){for(var _f="",ep=_c.array,tp=0;tp<ep.length;tp++){var op=ep[tp];try{op.dpname.full[0].uri!==void 0&&(_f+="    "+op.dpname.full[0].uri+`
`)}catch{}try{op.dname.full[0].dn.hex!==void 0&&(_f+="    "+Be.hex2dn(op.dpname.full[0].dn.hex)+`
`)}catch{}}return _f},Xc=function(_c){for(var _f="",ep=_c.array,tp=0;tp<ep.length;tp++){var op=ep[tp];op.caissuer!==void 0&&(_f+="    caissuer: "+op.caissuer+`
`),op.ocsp!==void 0&&(_f+="    ocsp: "+op.ocsp+`
`)}return _f};if(Uu=`Basic Fields
`,Uu+="  serial number: "+this.getSerialNumberHex()+`
`,Uu+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Uu+="  issuer: "+this.getIssuerString()+`
`,Uu+="  notBefore: "+this.getNotBefore()+`
`,Uu+="  notAfter: "+this.getNotAfter()+`
`,Uu+="  subject: "+this.getSubjectString()+`
`,Uu+=`  subject public key info: 
`,Uu+="    key algorithm: "+(zu=this.getPublicKey()).type+`
`,zu.type==="RSA"&&(Uu+="    n="+de(zu.n.toString(16)).substr(0,16)+`...
`,Uu+="    e="+de(zu.e.toString(16))+`
`),(Wu=this.aExtInfo)!=null){Uu+=`X509v3 Extensions:
`;for(var _h=0;_h<Wu.length;_h++){var _d=Wu[_h],Ku=l$3.asn1.x509.OID.oid2name(_d.oid);Ku===""&&(Ku=_d.oid);var Xu="";if(_d.critical===!0&&(Xu="CRITICAL"),Uu+="  "+Ku+" "+Xu+`:
`,Ku==="basicConstraints"){var Ju=this.getExtBasicConstraints();Ju.cA===void 0?Uu+=`    {}
`:(Uu+="    cA=true",Ju.pathLen!==void 0&&(Uu+=", pathLen="+Ju.pathLen),Uu+=`
`)}else if(Ku==="keyUsage")Uu+="    "+this.getExtKeyUsageString()+`
`;else if(Ku==="subjectKeyIdentifier")Uu+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Ku==="authorityKeyIdentifier"){var Zu=this.getExtAuthorityKeyIdentifier();Zu.kid!==void 0&&(Uu+="    kid="+Zu.kid.hex+`
`)}else Ku==="extKeyUsage"?Uu+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Ku==="subjectAltName"?Uu+="    "+(Qu=this.getExtSubjectAltName(),JSON.stringify(Qu.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Ku==="cRLDistributionPoints"?Uu+=Yu(this.getExtCRLDistributionPoints()):Ku==="authorityInfoAccess"?Uu+=Xc(this.getExtAuthorityInfoAccess()):Ku==="certificatePolicies"&&(Uu+=qu(this.getExtCertificatePolicies()))}}return Uu+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Uu+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof _u=="string"&&(_u.indexOf("-----BEGIN")!=-1?this.readCertPEM(_u):l$3.lang.String.isHex(_u)&&this.readCertHex(_u))}function Te(_u){return h$2.SHA256(_u).toString()}Me.getLblen=function(_u,Tu){if(_u.substr(Tu+2,1)!="8")return 1;var Cu=parseInt(_u.substr(Tu+3,1));return Cu==0?-1:0<Cu&&Cu<10?Cu+1:-2},Me.getL=function(_u,Tu){var Cu=Me.getLblen(_u,Tu);return Cu<1?"":_u.substr(Tu+2,2*Cu)},Me.getVblen=function(_u,Tu){var Cu;return(Cu=Me.getL(_u,Tu))==""?-1:(Cu.substr(0,1)==="8"?new c$2(Cu.substr(2),16):new c$2(Cu,16)).intValue()},Me.getVidx=function(_u,Tu){var Cu=Me.getLblen(_u,Tu);return Cu<0?Cu:Tu+2*(Cu+1)},Me.getV=function(_u,Tu){var Cu=Me.getVidx(_u,Tu),Pu=Me.getVblen(_u,Tu);return _u.substr(Cu,2*Pu)},Me.getTLV=function(_u,Tu){return _u.substr(Tu,2)+Me.getL(_u,Tu)+Me.getV(_u,Tu)},Me.getTLVblen=function(_u,Tu){return 2+2*Me.getLblen(_u,Tu)+2*Me.getVblen(_u,Tu)},Me.getNextSiblingIdx=function(_u,Tu){return Me.getVidx(_u,Tu)+2*Me.getVblen(_u,Tu)},Me.getChildIdx=function(_u,Tu){var Cu,Pu,Bu,Ru=Me,Lu=[];Cu=Ru.getVidx(_u,Tu),Pu=2*Ru.getVblen(_u,Tu),_u.substr(Tu,2)=="03"&&(Cu+=2,Pu-=2),Bu=0;for(var Ou=Cu;Bu<=Pu;){var Du=Ru.getTLVblen(_u,Ou);if((Bu+=Du)<=Pu&&Lu.push(Ou),Ou+=Du,Bu>=Pu)break}return Lu},Me.getNthChildIdx=function(_u,Tu,Cu){return Me.getChildIdx(_u,Tu)[Cu]},Me.getIdxbyList=function(_u,Tu,Cu,Pu){var Bu,Ru,Lu=Me;return Cu.length==0?Pu!==void 0&&_u.substr(Tu,2)!==Pu?-1:Tu:(Bu=Cu.shift())>=(Ru=Lu.getChildIdx(_u,Tu)).length?-1:Lu.getIdxbyList(_u,Ru[Bu],Cu,Pu)},Me.getIdxbyListEx=function(_u,Tu,Cu,Pu){var Bu,Ru,Lu=Me;if(Cu.length==0)return Pu!==void 0&&_u.substr(Tu,2)!==Pu?-1:Tu;Bu=Cu.shift(),Ru=Lu.getChildIdx(_u,Tu);for(var Ou=0,Du=0;Du<Ru.length;Du++){var $u=_u.substr(Ru[Du],2);if(typeof Bu=="number"&&!Lu.isContextTag($u)&&Ou==Bu||typeof Bu=="string"&&Lu.isContextTag($u,Bu))return Lu.getIdxbyListEx(_u,Ru[Du],Cu,Pu);Lu.isContextTag($u)||Ou++}return-1},Me.getTLVbyList=function(_u,Tu,Cu,Pu){var Bu=Me,Ru=Bu.getIdxbyList(_u,Tu,Cu,Pu);return Ru==-1||Ru>=_u.length?null:Bu.getTLV(_u,Ru)},Me.getTLVbyListEx=function(_u,Tu,Cu,Pu){var Bu=Me,Ru=Bu.getIdxbyListEx(_u,Tu,Cu,Pu);return Ru==-1?null:Bu.getTLV(_u,Ru)},Me.getVbyList=function(_u,Tu,Cu,Pu,Bu){var Ru,Lu,Ou=Me;return(Ru=Ou.getIdxbyList(_u,Tu,Cu,Pu))==-1||Ru>=_u.length?null:(Lu=Ou.getV(_u,Ru),Bu===!0&&(Lu=Lu.substr(2)),Lu)},Me.getVbyListEx=function(_u,Tu,Cu,Pu,Bu){var Ru,Lu,Ou=Me;return(Ru=Ou.getIdxbyListEx(_u,Tu,Cu,Pu))==-1?null:(Lu=Ou.getV(_u,Ru),_u.substr(Ru,2)=="03"&&Bu!==!1&&(Lu=Lu.substr(2)),Lu)},Me.getInt=function(_u,Tu,Cu){Cu==null&&(Cu=-1);try{var Pu=_u.substr(Tu,2);if(Pu!="02"&&Pu!="03")return Cu;var Bu=Me.getV(_u,Tu);return Pu=="02"?parseInt(Bu,16):function(Ru){try{var Lu=Ru.substr(0,2);if(Lu=="00")return parseInt(Ru.substr(2),16);var Ou=parseInt(Lu,16),Du=Ru.substr(2),$u=parseInt(Du,16).toString(2);return $u=="0"&&($u="00000000"),$u=$u.slice(0,0-Ou),parseInt($u,2)}catch{return-1}}(Bu)}catch{return Cu}},Me.getOID=function(_u,Tu,Cu){Cu==null&&(Cu=null);try{return _u.substr(Tu,2)!="06"?Cu:function(Pu){if(!ce(Pu))return null;try{var Bu=[],Ru=Pu.substr(0,2),Lu=parseInt(Ru,16);Bu[0]=new String(Math.floor(Lu/40)),Bu[1]=new String(Lu%40);for(var Ou=Pu.substr(2),Du=[],$u=0;$u<Ou.length/2;$u++)Du.push(parseInt(Ou.substr(2*$u,2),16));var ku=[],Fu="";for($u=0;$u<Du.length;$u++)128&Du[$u]?Fu+=pe((127&Du[$u]).toString(2),7):(Fu+=pe((127&Du[$u]).toString(2),7),ku.push(new String(parseInt(Fu,2))),Fu="");var Nu=Bu.join(".");return ku.length>0&&(Nu=Nu+"."+ku.join(".")),Nu}catch{return null}}(Me.getV(_u,Tu))}catch{return Cu}},Me.getOIDName=function(_u,Tu,Cu){Cu==null&&(Cu=null);try{var Pu=Me.getOID(_u,Tu,Cu);if(Pu==Cu)return Cu;var Bu=l$3.asn1.x509.OID.oid2name(Pu);return Bu==""?Pu:Bu}catch{return Cu}},Me.getString=function(_u,Tu,Cu){Cu==null&&(Cu=null);try{return re(Me.getV(_u,Tu))}catch{return Cu}},Me.hextooidstr=function(_u){var Tu=function(Fu,Nu){return Fu.length>=Nu?Fu:new Array(Nu-Fu.length+1).join("0")+Fu},Cu=[],Pu=_u.substr(0,2),Bu=parseInt(Pu,16);Cu[0]=new String(Math.floor(Bu/40)),Cu[1]=new String(Bu%40);for(var Ru=_u.substr(2),Lu=[],Ou=0;Ou<Ru.length/2;Ou++)Lu.push(parseInt(Ru.substr(2*Ou,2),16));var Du=[],$u="";for(Ou=0;Ou<Lu.length;Ou++)128&Lu[Ou]?$u+=Tu((127&Lu[Ou]).toString(2),7):($u+=Tu((127&Lu[Ou]).toString(2),7),Du.push(new String(parseInt($u,2))),$u="");var ku=Cu.join(".");return Du.length>0&&(ku=ku+"."+Du.join(".")),ku},Me.dump=function(_u,Tu,Cu,Pu){var Bu=Me,Ru=Bu.getV,Lu=Bu.dump,Ou=Bu.getChildIdx,Du=_u;_u instanceof l$3.asn1.ASN1Object&&(Du=_u.getEncodedHex());var $u=function(Xc,_h){return Xc.length<=2*_h?Xc:Xc.substr(0,_h)+"..(total "+Xc.length/2+"bytes).."+Xc.substr(Xc.length-_h,_h)};Tu===void 0&&(Tu={ommit_long_octet:32}),Cu===void 0&&(Cu=0),Pu===void 0&&(Pu="");var ku,Fu=Tu.ommit_long_octet;if((ku=Du.substr(Cu,2))=="01")return(Nu=Ru(Du,Cu))=="00"?Pu+`BOOLEAN FALSE
`:Pu+`BOOLEAN TRUE
`;if(ku=="02")return Pu+"INTEGER "+$u(Nu=Ru(Du,Cu),Fu)+`
`;if(ku=="03"){var Nu=Ru(Du,Cu);if(Bu.isASN1HEX(Nu.substr(2))){var Vu=Pu+`BITSTRING, encapsulates
`;return Vu+=Lu(Nu.substr(2),Tu,0,Pu+"  ")}return Pu+"BITSTRING "+$u(Nu,Fu)+`
`}if(ku=="04")return Nu=Ru(Du,Cu),Bu.isASN1HEX(Nu)?(Vu=Pu+`OCTETSTRING, encapsulates
`,Vu+=Lu(Nu,Tu,0,Pu+"  ")):Pu+"OCTETSTRING "+$u(Nu,Fu)+`
`;if(ku=="05")return Pu+`NULL
`;if(ku=="06"){var Gu=Ru(Du,Cu),Hu=l$3.asn1.ASN1Util.oidHexToInt(Gu),ju=l$3.asn1.x509.OID.oid2name(Hu),Uu=Hu.replace(/\./g," ");return ju!=""?Pu+"ObjectIdentifier "+ju+" ("+Uu+`)
`:Pu+"ObjectIdentifier ("+Uu+`)
`}if(ku=="0a")return Pu+"ENUMERATED "+parseInt(Ru(Du,Cu))+`
`;if(ku=="0c")return Pu+"UTF8String '"+ne(Ru(Du,Cu))+`'
`;if(ku=="13")return Pu+"PrintableString '"+ne(Ru(Du,Cu))+`'
`;if(ku=="14")return Pu+"TeletexString '"+ne(Ru(Du,Cu))+`'
`;if(ku=="16")return Pu+"IA5String '"+ne(Ru(Du,Cu))+`'
`;if(ku=="17")return Pu+"UTCTime "+ne(Ru(Du,Cu))+`
`;if(ku=="18")return Pu+"GeneralizedTime "+ne(Ru(Du,Cu))+`
`;if(ku=="1a")return Pu+"VisualString '"+ne(Ru(Du,Cu))+`'
`;if(ku=="1e")return Pu+"BMPString '"+he(Ru(Du,Cu))+`'
`;if(ku=="30"){if(Du.substr(Cu,4)=="3000")return Pu+`SEQUENCE {}
`;Vu=Pu+`SEQUENCE
`;var zu=Tu;if(((qu=Ou(Du,Cu)).length==2||qu.length==3)&&Du.substr(qu[0],2)=="06"&&Du.substr(qu[qu.length-1],2)=="04"){ju=Bu.oidname(Ru(Du,qu[0]));var Wu=JSON.parse(JSON.stringify(Tu));Wu.x509ExtName=ju,zu=Wu}for(var Qu=0;Qu<qu.length;Qu++)Vu+=Lu(Du,zu,qu[Qu],Pu+"  ");return Vu}if(ku=="31"){Vu=Pu+`SET
`;var qu=Ou(Du,Cu);for(Qu=0;Qu<qu.length;Qu++)Vu+=Lu(Du,Tu,qu[Qu],Pu+"  ");return Vu}if((128&(ku=parseInt(ku,16)))!=0){var Yu=31&ku;if((32&ku)!=0){for(Vu=Pu+"["+Yu+`]
`,qu=Ou(Du,Cu),Qu=0;Qu<qu.length;Qu++)Vu+=Lu(Du,Tu,qu[Qu],Pu+"  ");return Vu}if(Nu=Ru(Du,Cu),Me.isASN1HEX(Nu)){var Vu=Pu+"["+Yu+`]
`;return Vu+=Lu(Nu,Tu,0,Pu+"  ")}return(Nu.substr(0,8)=="68747470"||Tu.x509ExtName==="subjectAltName"&&Yu==2)&&(Nu=ne(Nu)),Vu=Pu+"["+Yu+"] "+Nu+`
`}return Pu+"UNKNOWN("+ku+") "+Ru(Du,Cu)+`
`},Me.isContextTag=function(_u,Tu){var Cu,Pu;_u=_u.toLowerCase();try{Cu=parseInt(_u,16)}catch{return-1}if(Tu===void 0)return(192&Cu)==128;try{return Tu.match(/^\[[0-9]+\]$/)!=null&&!((Pu=parseInt(Tu.substr(1,Tu.length-1),10))>31)&&(192&Cu)==128&&(31&Cu)==Pu}catch{return!1}},Me.isASN1HEX=function(_u){var Tu=Me;if(_u.length%2==1)return!1;var Cu=Tu.getVblen(_u,0),Pu=_u.substr(0,2),Bu=Tu.getL(_u,0);return _u.length-Pu.length-Bu.length==2*Cu},Me.checkStrictDER=function(_u,Tu,Cu,Pu,Bu){var Ru=Me;if(Cu===void 0){if(typeof _u!="string")throw new Error("not hex string");if(_u=_u.toLowerCase(),!l$3.lang.String.isHex(_u))throw new Error("not hex string");Cu=_u.length,Bu=(Pu=_u.length/2)<128?1:Math.ceil(Pu.toString(16))+1}if(Ru.getL(_u,Tu).length>2*Bu)throw new Error("L of TLV too long: idx="+Tu);var Lu=Ru.getVblen(_u,Tu);if(Lu>Pu)throw new Error("value of L too long than hex: idx="+Tu);var Ou=Ru.getTLV(_u,Tu),Du=Ou.length-2-Ru.getL(_u,Tu).length;if(Du!==2*Lu)throw new Error("V string length and L's value not the same:"+Du+"/"+2*Lu);if(Tu===0&&_u.length!=Ou.length)throw new Error("total length and TLV length unmatch:"+_u.length+"!="+Ou.length);var $u=_u.substr(Tu,2);if($u==="02"){var ku=Ru.getVidx(_u,Tu);if(_u.substr(ku,2)=="00"&&_u.charCodeAt(ku+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt($u,16)){for(var Fu=Ru.getVblen(_u,Tu),Nu=0,Vu=Ru.getChildIdx(_u,Tu),Gu=0;Gu<Vu.length;Gu++)Nu+=Ru.getTLV(_u,Vu[Gu]).length,Ru.checkStrictDER(_u,Vu[Gu],Cu,Pu,Bu);if(2*Fu!=Nu)throw new Error("sum of children's TLV length and L unmatch: "+2*Fu+"!="+Nu)}},Me.oidname=function(_u){var Tu=l$3.asn1;l$3.lang.String.isHex(_u)&&(_u=Tu.ASN1Util.oidHexToInt(_u));var Cu=Tu.x509.OID.oid2name(_u);return Cu===""&&(Cu=_u),Cu},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.x509!==void 0&&l$3.asn1.x509||(l$3.asn1.x509={}),l$3.asn1.x509.Certificate=function(_u){l$3.asn1.x509.Certificate.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.DERBitString,Pu=Tu.DERSequence,Bu=Tu.x509,Ru=Bu.TBSCertificate,Lu=Bu.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Ou){this.params=Ou},this.sign=function(){var Ou=this.params,Du=Ou.sigalg;Ou.sigalg.name!=null&&(Du=Ou.sigalg.name);var $u=Ou.tbsobj.getEncodedHex(),ku=new l$3.crypto.Signature({alg:Du});ku.init(Ou.cakey),ku.updateHex($u),Ou.sighex=ku.sign()},this.getPEM=function(){return ae(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Ou=this.params;if(Ou.tbsobj!=null&&Ou.tbsobj!=null||(Ou.tbsobj=new Ru(Ou)),Ou.sighex==null&&Ou.cakey!=null&&this.sign(),Ou.sighex==null)throw new Error("sighex or cakey parameter not defined");var Du=[];return Du.push(Ou.tbsobj),Du.push(new Lu({name:Ou.sigalg})),Du.push(new Cu({hex:"00"+Ou.sighex})),new Pu({array:Du}).getEncodedHex()},_u!=null&&(this.params=_u)},fe(l$3.asn1.x509.Certificate,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertificate=function(_u){l$3.asn1.x509.TBSCertificate.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.x509,Pu=Tu.DERTaggedObject,Bu=Tu.DERInteger,Ru=Tu.DERSequence,Lu=Cu.AlgorithmIdentifier,Ou=Cu.Time,Du=Cu.X500Name,$u=Cu.Extensions,ku=Cu.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Fu){this.params=Fu},this.getEncodedHex=function(){var Fu=[],Nu=this.params;if(Nu.version!=null||Nu.version!=1){var Vu=2;Nu.version!=null&&(Vu=Nu.version-1);var Gu=new Pu({obj:new Bu({int:Vu})});Fu.push(Gu)}return Fu.push(new Bu(Nu.serial)),Fu.push(new Lu({name:Nu.sigalg})),Fu.push(new Du(Nu.issuer)),Fu.push(new Ru({array:[new Ou(Nu.notbefore),new Ou(Nu.notafter)]})),Fu.push(new Du(Nu.subject)),Fu.push(new ku(Ee.getKey(Nu.sbjpubkey))),Nu.ext!==void 0&&Nu.ext.length>0&&Fu.push(new Pu({tag:"a3",obj:new $u(Nu.ext)})),new l$3.asn1.DERSequence({array:Fu}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe(l$3.asn1.x509.TBSCertificate,l$3.asn1.ASN1Object),l$3.asn1.x509.Extensions=function(_u){l$3.asn1.x509.Extensions.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.DERSequence,Pu=Tu.x509;this.aParam=[],this.setByParam=function(Bu){this.aParam=Bu},this.getEncodedHex=function(){for(var Bu=[],Ru=0;Ru<this.aParam.length;Ru++){var Lu=this.aParam[Ru],Ou=Lu.extname,Du=null;if(Lu.extn!=null)Du=new Pu.PrivateExtension(Lu);else if(Ou=="subjectKeyIdentifier")Du=new Pu.SubjectKeyIdentifier(Lu);else if(Ou=="keyUsage")Du=new Pu.KeyUsage(Lu);else if(Ou=="subjectAltName")Du=new Pu.SubjectAltName(Lu);else if(Ou=="issuerAltName")Du=new Pu.IssuerAltName(Lu);else if(Ou=="basicConstraints")Du=new Pu.BasicConstraints(Lu);else if(Ou=="cRLDistributionPoints")Du=new Pu.CRLDistributionPoints(Lu);else if(Ou=="certificatePolicies")Du=new Pu.CertificatePolicies(Lu);else if(Ou=="authorityKeyIdentifier")Du=new Pu.AuthorityKeyIdentifier(Lu);else if(Ou=="extKeyUsage")Du=new Pu.ExtKeyUsage(Lu);else if(Ou=="authorityInfoAccess")Du=new Pu.AuthorityInfoAccess(Lu);else if(Ou=="cRLNumber")Du=new Pu.CRLNumber(Lu);else if(Ou=="cRLReason")Du=new Pu.CRLReason(Lu);else if(Ou=="ocspNonce")Du=new Pu.OCSPNonce(Lu);else if(Ou=="ocspNoCheck")Du=new Pu.OCSPNoCheck(Lu);else if(Ou=="adobeTimeStamp")Du=new Pu.AdobeTimeStamp(Lu);else{if(Ou!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Lu));Du=new Pu.SubjectDirectoryAttributes(Lu)}Du!=null&&Bu.push(Du)}return new Cu({array:Bu}).getEncodedHex()},_u!=null&&this.setByParam(_u)},fe(l$3.asn1.x509.Extensions,l$3.asn1.ASN1Object),l$3.asn1.x509.Extension=function(_u){l$3.asn1.x509.Extension.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.DERObjectIdentifier,Pu=Tu.DEROctetString;Tu.DERBitString;var Bu=Tu.DERBoolean,Ru=Tu.DERSequence;this.getEncodedHex=function(){var Lu=new Cu({oid:this.oid}),Ou=new Pu({hex:this.getExtnValueHex()}),Du=new Array;return Du.push(Lu),this.critical&&Du.push(new Bu),Du.push(Ou),new Ru({array:Du}).getEncodedHex()},this.critical=!1,_u!==void 0&&_u.critical!==void 0&&(this.critical=_u.critical)},fe(l$3.asn1.x509.Extension,l$3.asn1.ASN1Object),l$3.asn1.x509.KeyUsage=function(_u){l$3.asn1.x509.KeyUsage.superclass.constructor.call(this,_u);var Tu=Be.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",_u!==void 0&&(_u.bin!==void 0&&(this.asn1ExtnValue=new l$3.asn1.DERBitString(_u)),_u.names!==void 0&&_u.names.length!==void 0)){for(var Cu=_u.names,Pu="000000000",Bu=0;Bu<Cu.length;Bu++)for(var Ru=0;Ru<Tu.length;Ru++)Cu[Bu]===Tu[Ru]&&(Pu=Pu.substring(0,Ru)+"1"+Pu.substring(Ru+1,Pu.length));this.asn1ExtnValue=new l$3.asn1.DERBitString({bin:Pu})}},fe(l$3.asn1.x509.KeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.BasicConstraints=function(_u){l$3.asn1.x509.BasicConstraints.superclass.constructor.call(this,_u);var Tu=l$3.asn1,Cu=Tu.DERBoolean,Pu=Tu.DERInteger,Bu=Tu.DERSequence;this.getExtnValueHex=function(){var Ru=new Array;this.cA&&Ru.push(new Cu),this.pathLen>-1&&Ru.push(new Pu({int:this.pathLen}));var Lu=new Bu({array:Ru});return this.asn1ExtnValue=Lu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,_u!==void 0&&(_u.cA!==void 0&&(this.cA=_u.cA),_u.pathLen!==void 0&&(this.pathLen=_u.pathLen))},fe(l$3.asn1.x509.BasicConstraints,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLDistributionPoints=function(_u){l$3.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,_u);var Tu=l$3.asn1,Cu=Tu.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Pu){for(var Bu=[],Ru=0;Ru<Pu.length;Ru++)if(Pu[Ru]instanceof l$3.asn1.ASN1Object)Bu.push(Pu[Ru]);else{var Lu=new Cu.DistributionPoint(Pu[Ru]);Bu.push(Lu)}this.asn1ExtnValue=new Tu.DERSequence({array:Bu})},this.setByOneURI=function(Pu){var Bu=new Cu.DistributionPoint({fulluri:Pu});this.setByDPArray([Bu])},this.oid="2.5.29.31",_u!==void 0&&(_u.array!==void 0?this.setByDPArray(_u.array):_u.uri!==void 0&&this.setByOneURI(_u.uri))},fe(l$3.asn1.x509.CRLDistributionPoints,l$3.asn1.x509.Extension),l$3.asn1.x509.DistributionPoint=function(_u){l$3.asn1.x509.DistributionPoint.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.x509.DistributionPointName;this.getEncodedHex=function(){var Pu=new Tu.DERSequence;if(this.asn1DP!=null){var Bu=new Tu.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Pu.appendASN1Object(Bu)}return this.hTLV=Pu.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.dpobj!==void 0?this.asn1DP=_u.dpobj:_u.dpname!==void 0?this.asn1DP=new Cu(_u.dpname):_u.fulluri!==void 0&&(this.asn1DP=new Cu({full:[{uri:_u.fulluri}]})))},fe(l$3.asn1.x509.DistributionPoint,l$3.asn1.ASN1Object),l$3.asn1.x509.DistributionPointName=function(_u){l$3.asn1.x509.DistributionPointName.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new Cu({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},_u!==void 0)if(Tu.x509.GeneralNames.prototype.isPrototypeOf(_u))this.type="full",this.tag="a0",this.asn1V=_u;else{if(_u.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new Tu.x509.GeneralNames(_u.full)}},fe(l$3.asn1.x509.DistributionPointName,l$3.asn1.ASN1Object),l$3.asn1.x509.CertificatePolicies=function(_u){l$3.asn1.x509.CertificatePolicies.superclass.constructor.call(this,_u);var Tu=l$3.asn1,Cu=Tu.x509,Pu=Tu.DERSequence,Bu=Cu.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Ru=[],Lu=0;Lu<this.params.array.length;Lu++)Ru.push(new Bu(this.params.array[Lu]));var Ou=new Pu({array:Ru});return this.asn1ExtnValue=Ou,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",_u!==void 0&&(this.params=_u)},fe(l$3.asn1.x509.CertificatePolicies,l$3.asn1.x509.Extension),l$3.asn1.x509.PolicyInformation=function(_u){l$3.asn1.x509.PolicyInformation.superclass.constructor.call(this,_u);var Tu=l$3.asn1,Cu=Tu.DERSequence,Pu=Tu.DERObjectIdentifier,Bu=Tu.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Ru=[new Pu(this.params.policyoid)];if(this.params.array!==void 0){for(var Lu=[],Ou=0;Ou<this.params.array.length;Ou++)Lu.push(new Bu(this.params.array[Ou]));Lu.length>0&&Ru.push(new Cu({array:Lu}))}return new Cu({array:Ru}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe(l$3.asn1.x509.PolicyInformation,l$3.asn1.ASN1Object),l$3.asn1.x509.PolicyQualifierInfo=function(_u){l$3.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,_u);var Tu=l$3.asn1,Cu=Tu.DERSequence,Pu=Tu.DERIA5String,Bu=Tu.DERObjectIdentifier,Ru=Tu.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new Cu({array:[new Bu({oid:"1.3.6.1.5.5.7.2.1"}),new Pu({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new Cu({array:[new Bu({oid:"1.3.6.1.5.5.7.2.2"}),new Ru(this.params.unotice)]}).getEncodedHex():void 0},_u!==void 0&&(this.params=_u)},fe(l$3.asn1.x509.PolicyQualifierInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.UserNotice=function(_u){l$3.asn1.x509.UserNotice.superclass.constructor.call(this,_u);var Tu=l$3.asn1.DERSequence;l$3.asn1.DERInteger;var Cu=l$3.asn1.x509.DisplayText,Pu=l$3.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Bu=[];return this.params.noticeref!==void 0&&Bu.push(new Pu(this.params.noticeref)),this.params.exptext!==void 0&&Bu.push(new Cu(this.params.exptext)),new Tu({array:Bu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe(l$3.asn1.x509.UserNotice,l$3.asn1.ASN1Object),l$3.asn1.x509.NoticeReference=function(_u){l$3.asn1.x509.NoticeReference.superclass.constructor.call(this,_u);var Tu=l$3.asn1.DERSequence,Cu=l$3.asn1.DERInteger,Pu=l$3.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Bu=[];if(this.params.org!==void 0&&Bu.push(new Pu(this.params.org)),this.params.noticenum!==void 0){for(var Ru=[],Lu=this.params.noticenum,Ou=0;Ou<Lu.length;Ou++)Ru.push(new Cu(Lu[Ou]));Bu.push(new Tu({array:Ru}))}if(Bu.length==0)throw new Error("parameter is empty");return new Tu({array:Bu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe(l$3.asn1.x509.NoticeReference,l$3.asn1.ASN1Object),l$3.asn1.x509.DisplayText=function(_u){l$3.asn1.x509.DisplayText.superclass.constructor.call(this,_u),this.hT="0c",_u!==void 0&&(_u.type==="ia5"?this.hT="16":_u.type==="vis"?this.hT="1a":_u.type==="bmp"&&(this.hT="1e"))},fe(l$3.asn1.x509.DisplayText,l$3.asn1.DERAbstractString),l$3.asn1.x509.ExtKeyUsage=function(_u){l$3.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,_u);var Tu=l$3.asn1;this.setPurposeArray=function(Cu){this.asn1ExtnValue=new Tu.DERSequence;for(var Pu=0;Pu<Cu.length;Pu++){var Bu=new Tu.DERObjectIdentifier(Cu[Pu]);this.asn1ExtnValue.appendASN1Object(Bu)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",_u!==void 0&&_u.array!==void 0&&this.setPurposeArray(_u.array)},fe(l$3.asn1.x509.ExtKeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityKeyIdentifier=function(_u){l$3.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,_u);var Tu=l$3,Cu=Tu.asn1,Pu=Cu.DERTaggedObject,Bu=Cu.x509.GeneralNames;Tu.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Ru=new Array;this.asn1KID&&Ru.push(new Pu({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Ru.push(new Pu({explicit:!1,tag:"a1",obj:new Bu([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Ru.push(new Pu({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Lu=new Cu.DERSequence({array:Ru});return this.asn1ExtnValue=Lu,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Ru){if(Ru.str!==void 0||Ru.hex!==void 0)this.asn1KID=new l$3.asn1.DEROctetString(Ru);else if(typeof Ru=="object"&&l$3.crypto.Util.isKey(Ru)||typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1){var Lu=Ru;typeof Ru=="string"&&(Lu=Ee.getKey(Ru));var Ou=Ee.getKeyID(Lu);this.asn1KID=new l$3.asn1.DEROctetString({hex:Ou})}},this.setCertIssuerByParam=function(Ru){Ru.str!==void 0||Ru.ldapstr!==void 0||Ru.hex!==void 0||Ru.certsubject!==void 0||Ru.certissuer!==void 0?this.asn1CertIssuer=new l$3.asn1.x509.X500Name(Ru):typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1&&Ru.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new l$3.asn1.x509.X500Name({certissuer:Ru}))},this.setCertSNByParam=function(Ru){if(Ru.str!==void 0||Ru.bigint!==void 0||Ru.hex!==void 0)this.asn1CertSN=new l$3.asn1.DERInteger(Ru);else if(typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1&&Ru.indexOf("CERTIFICATE")){var Lu=new Be;Lu.readCertPEM(Ru);var Ou=Lu.getSerialNumberHex();this.asn1CertSN=new l$3.asn1.DERInteger({hex:Ou})}},this.oid="2.5.29.35",_u!==void 0&&(_u.kid!==void 0&&this.setKIDByParam(_u.kid),_u.issuer!==void 0&&this.setCertIssuerByParam(_u.issuer),_u.sn!==void 0&&this.setCertSNByParam(_u.sn),_u.issuersn!==void 0&&typeof _u.issuersn=="string"&&_u.issuersn.indexOf("BEGIN ")!=-1&&_u.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(_u.issuersn),this.setCertIssuerByParam(_u.issuersn)))},fe(l$3.asn1.x509.AuthorityKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectKeyIdentifier=function(_u){l$3.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,_u);var Tu=l$3.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Cu){if(Cu.str!==void 0||Cu.hex!==void 0)this.asn1KID=new Tu(Cu);else if(typeof Cu=="object"&&l$3.crypto.Util.isKey(Cu)||typeof Cu=="string"&&Cu.indexOf("BEGIN")!=-1){var Pu=Cu;typeof Cu=="string"&&(Pu=Ee.getKey(Cu));var Bu=Ee.getKeyID(Pu);this.asn1KID=new l$3.asn1.DEROctetString({hex:Bu})}},this.oid="2.5.29.14",_u!==void 0&&_u.kid!==void 0&&this.setKIDByParam(_u.kid)},fe(l$3.asn1.x509.SubjectKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityInfoAccess=function(_u){l$3.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,_u),this.setAccessDescriptionArray=function(Tu){for(var Cu=new Array,Pu=l$3.asn1,Bu=Pu.DERSequence,Ru=Pu.DERObjectIdentifier,Lu=Pu.x509.GeneralName,Ou=0;Ou<Tu.length;Ou++){var Du,$u=Tu[Ou];if($u.ocsp!==void 0)Du=new Bu({array:[new Ru({oid:"1.3.6.1.5.5.7.48.1"}),new Lu({uri:$u.ocsp})]});else{if($u.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify($u));Du=new Bu({array:[new Ru({oid:"1.3.6.1.5.5.7.48.2"}),new Lu({uri:$u.caissuer})]})}Cu.push(Du)}this.asn1ExtnValue=new Bu({array:Cu})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",_u!==void 0&&_u.array!==void 0&&this.setAccessDescriptionArray(_u.array)},fe(l$3.asn1.x509.AuthorityInfoAccess,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectAltName=function(_u){l$3.asn1.x509.SubjectAltName.superclass.constructor.call(this,_u),this.setNameArray=function(Tu){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames(Tu)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe(l$3.asn1.x509.SubjectAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.IssuerAltName=function(_u){l$3.asn1.x509.IssuerAltName.superclass.constructor.call(this,_u),this.setNameArray=function(Tu){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames(Tu)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe(l$3.asn1.x509.IssuerAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectDirectoryAttributes=function(_u){l$3.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,_u);var Tu=l$3.asn1,Cu=Tu.DERSequence,Pu=Tu.ASN1Util.newObject,Bu=Tu.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Ru=[],Lu=0;Lu<this.params.array.length;Lu++){var Ou=this.params.array[Lu],Du={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Ou.attr=="dateOfBirth")Du.seq[0].oid=Bu(Ou.attr),Du.seq[1].set[0]={gentime:Ou.str};else if(Ou.attr=="placeOfBirth")Du.seq[0].oid=Bu(Ou.attr),Du.seq[1].set[0]={utf8str:Ou.str};else if(Ou.attr=="gender")Du.seq[0].oid=Bu(Ou.attr),Du.seq[1].set[0]={prnstr:Ou.str};else if(Ou.attr=="countryOfCitizenship")Du.seq[0].oid=Bu(Ou.attr),Du.seq[1].set[0]={prnstr:Ou.str};else{if(Ou.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Ou.attr);Du.seq[0].oid=Bu(Ou.attr),Du.seq[1].set[0]={prnstr:Ou.str}}Ru.push(new Pu(Du))}var $u=new Cu({array:Ru});return this.asn1ExtnValue=$u,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",_u!==void 0&&(this.params=_u)},fe(l$3.asn1.x509.SubjectDirectoryAttributes,l$3.asn1.x509.Extension),l$3.asn1.x509.PrivateExtension=function(_u){l$3.asn1.x509.PrivateExtension.superclass.constructor.call(this,_u);var Tu=l$3,Cu=Tu.lang.String.isHex,Pu=Tu.asn1,Bu=Pu.x509.OID.name2oid,Ru=Pu.ASN1Util.newObject;this.params=null,this.setByParam=function(Lu){this.oid=Bu(Lu.extname),this.params=Lu},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Lu=this.params.extn;if(typeof Lu=="string"&&Cu(Lu))return Lu;if(typeof Lu=="object")try{return Ru(Lu).getEncodedHex()}catch{}throw new Error("unsupported extn value")},_u!=null&&this.setByParam(_u)},fe(l$3.asn1.x509.PrivateExtension,l$3.asn1.x509.Extension),l$3.asn1.x509.CRL=function(_u){l$3.asn1.x509.CRL.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.DERSequence,Pu=Tu.DERBitString,Bu=Tu.x509,Ru=Bu.AlgorithmIdentifier,Lu=Bu.TBSCertList;this.params=void 0,this.setByParam=function(Ou){this.params=Ou},this.sign=function(){var Ou=new Lu(this.params).getEncodedHex(),Du=new l$3.crypto.Signature({alg:this.params.sigalg});Du.init(this.params.cakey),Du.updateHex(Ou);var $u=Du.sign();this.params.sighex=$u},this.getPEM=function(){return ae(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Ou=this.params;if(Ou.tbsobj==null&&(Ou.tbsobj=new Lu(Ou)),Ou.sighex==null&&Ou.cakey!=null&&this.sign(),Ou.sighex==null)throw new Error("sighex or cakey parameter not defined");var Du=[];return Du.push(Ou.tbsobj),Du.push(new Ru({name:Ou.sigalg})),Du.push(new Pu({hex:"00"+Ou.sighex})),new Cu({array:Du}).getEncodedHex()},_u!=null&&(this.params=_u)},fe(l$3.asn1.x509.CRL,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertList=function(_u){l$3.asn1.x509.TBSCertList.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.DERInteger,Pu=Tu.DERSequence,Bu=Tu.DERTaggedObject;Tu.DERObjectIdentifier;var Ru=Tu.x509,Lu=Ru.AlgorithmIdentifier,Ou=Ru.Time,Du=Ru.Extensions,$u=Ru.X500Name;this.params=null,this.setByParam=function(ku){this.params=ku},this.getRevCertSequence=function(){for(var ku=[],Fu=this.params.revcert,Nu=0;Nu<Fu.length;Nu++){var Vu=[new Cu(Fu[Nu].sn),new Ou(Fu[Nu].date)];Fu[Nu].ext!=null&&Vu.push(new Du(Fu[Nu].ext)),ku.push(new Pu({array:Vu}))}return new Pu({array:ku})},this.getEncodedHex=function(){var ku=[],Fu=this.params;if(Fu.version!=null){var Nu=Fu.version-1,Vu=new Cu({int:Nu});ku.push(Vu)}if(ku.push(new Lu({name:Fu.sigalg})),ku.push(new $u(Fu.issuer)),ku.push(new Ou(Fu.thisupdate)),Fu.nextupdate!=null&&ku.push(new Ou(Fu.nextupdate)),Fu.revcert!=null&&ku.push(this.getRevCertSequence()),Fu.ext!=null){var Gu=new Du(Fu.ext);ku.push(new Bu({tag:"a0",explicit:!0,obj:Gu}))}return new Pu({array:ku}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe(l$3.asn1.x509.TBSCertList,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLEntry=function(_u){l$3.asn1.x509.CRLEntry.superclass.constructor.call(this);var Tu=l$3.asn1;this.setCertSerial=function(Cu){this.sn=new Tu.DERInteger(Cu)},this.setRevocationDate=function(Cu){this.time=new Tu.x509.Time(Cu)},this.getEncodedHex=function(){var Cu=new Tu.DERSequence({array:[this.sn,this.time]});return this.TLV=Cu.getEncodedHex(),this.TLV},_u!==void 0&&(_u.time!==void 0&&this.setRevocationDate(_u.time),_u.sn!==void 0&&this.setCertSerial(_u.sn))},fe(l$3.asn1.x509.CRLEntry,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLNumber=function(_u){l$3.asn1.x509.CRLNumber.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",_u!=null&&(this.params=_u)},fe(l$3.asn1.x509.CRLNumber,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLReason=function(_u){l$3.asn1.x509.CRLReason.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",_u!=null&&(this.params=_u)},fe(l$3.asn1.x509.CRLReason,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNonce=function(_u){l$3.asn1.x509.OCSPNonce.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",_u!=null&&(this.params=_u)},fe(l$3.asn1.x509.OCSPNonce,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNoCheck=function(_u){l$3.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",_u!=null&&(this.params=_u)},fe(l$3.asn1.x509.OCSPNoCheck,l$3.asn1.x509.Extension),l$3.asn1.x509.AdobeTimeStamp=function(_u){l$3.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,_u);var Tu=l$3.asn1,Cu=Tu.DERInteger,Pu=Tu.DERBoolean,Bu=Tu.DERSequence,Ru=Tu.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Lu=this.params,Ou=[new Cu(1)];return Ou.push(new Ru({uri:Lu.uri})),Lu.reqauth!=null&&Ou.push(new Pu(Lu.reqauth)),this.asn1ExtnValue=new Bu({array:Ou}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",_u!==void 0&&this.setByParam(_u)},fe(l$3.asn1.x509.AdobeTimeStamp,l$3.asn1.x509.Extension),l$3.asn1.x509.X500Name=function(_u){l$3.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var Tu=l$3.asn1,Cu=Tu.x509,Pu=Cu.RDN;this.setByString=function(Bu,Ru){Ru!==void 0&&(this.sRule=Ru);var Lu=Bu.split("/");Lu.shift();for(var Ou=[],Du=0;Du<Lu.length;Du++)if(Lu[Du].match(/^[^=]+=.+$/))Ou.push(Lu[Du]);else{var $u=Ou.length-1;Ou[$u]=Ou[$u]+"/"+Lu[Du]}for(Du=0;Du<Ou.length;Du++)this.asn1Array.push(new Pu({str:Ou[Du],rule:this.sRule}))},this.setByLdapString=function(Bu,Ru){Ru!==void 0&&(this.sRule=Ru);var Lu=Cu.X500Name.ldapToCompat(Bu);this.setByString(Lu,Ru)},this.setByObject=function(Bu,Ru){for(var Lu in Ru!==void 0&&(this.sRule=Ru),Bu)if(Bu.hasOwnProperty(Lu)){var Ou=new Pu({str:Lu+"="+Bu[Lu],rule:this.sRule});this.asn1Array?this.asn1Array.push(Ou):this.asn1Array=[Ou]}},this.setByParam=function(Bu){var Ru;Bu.rule!==void 0&&(this.sRule=Bu.rule),Bu.array!==void 0?this.paramArray=Bu.array:Bu.str!==void 0?this.setByString(Bu.str):Bu.ldapstr!==void 0?this.setByLdapString(Bu.ldapstr):Bu.hex!==void 0?this.hTLV=Bu.hex:Bu.certissuer!==void 0?((Ru=new Be).readCertPEM(Bu.certissuer),this.hTLV=Ru.getIssuerHex()):Bu.certsubject!==void 0?((Ru=new Be).readCertPEM(Bu.certsubject),this.hTLV=Ru.getSubjectHex()):typeof Bu=="object"&&Bu.certsubject===void 0&&Bu.certissuer===void 0&&this.setByObject(Bu)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Bu=0;Bu<this.paramArray.length;Bu++){var Ru={array:this.paramArray[Bu]};this.sRule!="utf8"&&(Ru.rule=this.sRule);var Lu=new Pu(Ru);this.asn1Array.push(Lu)}var Ou=new Tu.DERSequence({array:this.asn1Array});return this.hTLV=Ou.getEncodedHex(),this.hTLV},_u!==void 0&&this.setByParam(_u)},fe(l$3.asn1.x509.X500Name,l$3.asn1.ASN1Object),l$3.asn1.x509.X500Name.compatToLDAP=function(_u){if(_u.substr(0,1)!=="/")throw"malformed input";var Tu=(_u=_u.substr(1)).split("/");return Tu.reverse(),(Tu=Tu.map(function(Cu){return Cu.replace(/,/,"\\,")})).join(",")},l$3.asn1.x509.X500Name.onelineToLDAP=function(_u){return l$3.asn1.x509.X500Name.compatToLDAP(_u)},l$3.asn1.x509.X500Name.ldapToCompat=function(_u){for(var Tu=_u.split(","),Cu=!1,Pu=[],Bu=0;Tu.length>0;Bu++){var Ru=Tu.shift();if(Cu===!0){var Lu=(Pu.pop()+","+Ru).replace(/\\,/g,",");Pu.push(Lu),Cu=!1}else Pu.push(Ru);Ru.substr(-1,1)==="\\"&&(Cu=!0)}return(Pu=Pu.map(function(Ou){return Ou.replace("/","\\/")})).reverse(),"/"+Pu.join("/")},l$3.asn1.x509.X500Name.ldapToOneline=function(_u){return l$3.asn1.x509.X500Name.ldapToCompat(_u)},l$3.asn1.x509.RDN=function(_u){l$3.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var Tu=l$3.asn1.x509.AttributeTypeAndValue;this.setByParam=function(Cu){Cu.rule!==void 0&&(this.sRule=Cu.rule),Cu.str!==void 0&&this.addByMultiValuedString(Cu.str),Cu.array!==void 0&&(this.paramArray=Cu.array)},this.addByString=function(Cu){this.asn1Array.push(new l$3.asn1.x509.AttributeTypeAndValue({str:Cu,rule:this.sRule}))},this.addByMultiValuedString=function(Cu){for(var Pu=l$3.asn1.x509.RDN.parseString(Cu),Bu=0;Bu<Pu.length;Bu++)this.addByString(Pu[Bu])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Cu=0;Cu<this.paramArray.length;Cu++){var Pu=this.paramArray[Cu];Pu.rule!==void 0&&this.sRule!="utf8"&&(Pu.rule=this.sRule);var Bu=new Tu(Pu);this.asn1Array.push(Bu)}var Ru=new l$3.asn1.DERSet({array:this.asn1Array});return this.TLV=Ru.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe(l$3.asn1.x509.RDN,l$3.asn1.ASN1Object),l$3.asn1.x509.RDN.parseString=function(_u){for(var Tu=_u.split(/\+/),Cu=!1,Pu=[],Bu=0;Tu.length>0;Bu++){var Ru=Tu.shift();if(Cu===!0){var Lu=(Pu.pop()+"+"+Ru).replace(/\\\+/g,"+");Pu.push(Lu),Cu=!1}else Pu.push(Ru);Ru.substr(-1,1)==="\\"&&(Cu=!0)}var Ou=!1,Du=[];for(Bu=0;Pu.length>0;Bu++){if(Ru=Pu.shift(),Ou===!0){var $u=Du.pop();Ru.match(/"$/)?(Lu=($u+"+"+Ru).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Du.push(Lu),Ou=!1):Du.push($u+"+"+Ru)}else Du.push(Ru);Ru.match(/^[^=]+="/)&&(Ou=!0)}return Du},l$3.asn1.x509.AttributeTypeAndValue=function(_u){l$3.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var Tu=l$3,Cu=Tu.asn1,Pu=Cu.DERSequence,Bu=Cu.DERUTF8String,Ru=Cu.DERPrintableString,Lu=Cu.DERTeletexString,Ou=Cu.DERIA5String,Du=Cu.DERVisibleString,$u=Cu.DERBMPString,ku=Tu.lang.String.isMail,Fu=Tu.lang.String.isPrintable;this.setByParam=function(Nu){if(Nu.rule!==void 0&&(this.sRule=Nu.rule),Nu.ds!==void 0&&(this.dsType=Nu.ds),Nu.value===void 0&&Nu.str!==void 0){var Vu=Nu.str.match(/^([^=]+)=(.+)$/);if(!Vu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Vu[1],this.sValue=Vu[2]}else this.sType=Nu.type,this.sValue=Nu.value},this.setByString=function(Nu,Vu){Vu!==void 0&&(this.sRule=Vu);var Gu=Nu.match(/^([^=]+)=(.+)$/);if(!Gu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Gu[1],Gu[2])},this._getDsType=function(){var Nu=this.sType,Vu=this.sValue,Gu=this.sRule;return Gu==="prn"?Nu=="CN"&&ku(Vu)?"ia5":Fu(Vu)?"prn":"utf8":Gu==="utf8"?Nu=="CN"&&ku(Vu)?"ia5":Nu=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(Nu,Vu,Gu){Gu!==void 0&&(this.sRule=Gu),this.sType=Nu,this.sValue=Vu},this.getValueObj=function(Nu,Vu){if(Nu=="utf8")return new Bu({str:Vu});if(Nu=="prn")return new Ru({str:Vu});if(Nu=="tel")return new Lu({str:Vu});if(Nu=="ia5")return new Ou({str:Vu});if(Nu=="vis")return new Du({str:Vu});if(Nu=="bmp")return new $u({str:Vu});throw new Error("unsupported directory string type: type="+Nu+" value="+Vu)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var Nu=l$3.asn1.x509.OID.atype2obj(this.sType),Vu=this.getValueObj(this.dsType,this.sValue),Gu=new Pu({array:[Nu,Vu]});return this.TLV=Gu.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe(l$3.asn1.x509.AttributeTypeAndValue,l$3.asn1.ASN1Object),l$3.asn1.x509.SubjectPublicKeyInfo=function(_u){l$3.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var Tu=l$3,Cu=Tu.asn1,Pu=Cu.DERInteger,Bu=Cu.DERBitString,Ru=Cu.DERObjectIdentifier,Lu=Cu.DERSequence,Ou=Cu.ASN1Util.newObject,Du=Cu.x509.AlgorithmIdentifier,$u=Tu.crypto;$u.ECDSA,$u.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Lu({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var ku=this.getASN1Object();return this.hTLV=ku.getEncodedHex(),this.hTLV},this.setPubKey=function(ku){try{if(ku instanceof X$1){var Fu=Ou({seq:[{int:{bigint:ku.n}},{int:{int:ku.e}}]}).getEncodedHex();this.asn1AlgId=new Du({name:"rsaEncryption"}),this.asn1SubjPKey=new Bu({hex:"00"+Fu})}}catch{}try{if(ku instanceof l$3.crypto.ECDSA){var Nu=new Ru({name:ku.curveName});this.asn1AlgId=new Du({name:"ecPublicKey",asn1params:Nu}),this.asn1SubjPKey=new Bu({hex:"00"+ku.pubKeyHex})}}catch{}try{if(ku instanceof l$3.crypto.DSA){Nu=new Ou({seq:[{int:{bigint:ku.p}},{int:{bigint:ku.q}},{int:{bigint:ku.g}}]}),this.asn1AlgId=new Du({name:"dsa",asn1params:Nu});var Vu=new Pu({bigint:ku.y});this.asn1SubjPKey=new Bu({hex:"00"+Vu.getEncodedHex()})}}catch{}},_u!==void 0&&this.setPubKey(_u)},fe(l$3.asn1.x509.SubjectPublicKeyInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.Time=function(_u){l$3.asn1.x509.Time.superclass.constructor.call(this);var Tu=l$3.asn1,Cu=Tu.DERUTCTime,Pu=Tu.DERGeneralizedTime;this.setTimeParams=function(Bu){this.timeParams=Bu},this.getEncodedHex=function(){var Bu=null;return Bu=this.timeParams!=null?this.type=="utc"?new Cu(this.timeParams):new Pu(this.timeParams):this.type=="utc"?new Cu:new Pu,this.TLV=Bu.getEncodedHex(),this.TLV},this.type="utc",_u!==void 0&&(_u.type!==void 0?this.type=_u.type:_u.str!==void 0&&(_u.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),_u.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=_u)},fe(l$3.asn1.x509.Time,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier=function(_u){l$3.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var Tu=l$3.asn1,Cu=Tu.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Bu=null;for(var Ru in Cu)Ru===this.nameAlg&&(Bu=Cu[Ru]);if(Bu!==null)return this.hTLV=Bu,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=Tu.x509.OID.name2obj(this.nameAlg));var Lu=[this.asn1Alg];this.asn1Params!==null&&Lu.push(this.asn1Params);var Ou=new Tu.DERSequence({array:Lu});return this.hTLV=Ou.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.name!==void 0&&(this.nameAlg=_u.name),_u.asn1params!==void 0&&(this.asn1Params=_u.asn1params),_u.paramempty!==void 0&&(this.paramEmpty=_u.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Pu=this.nameAlg.toLowerCase();Pu.substr(-7,7)!=="withdsa"&&Pu.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new Tu.DERNull)}},fe(l$3.asn1.x509.AlgorithmIdentifier,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},l$3.asn1.x509.GeneralName=function(_u){l$3.asn1.x509.GeneralName.superclass.constructor.call(this);var Tu={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},Cu=l$3.asn1;Cu.DERSequence;var Pu=Cu.DEROctetString,Bu=Cu.DERIA5String,Ru=Cu.DERTaggedObject,Lu=Cu.ASN1Object,Ou=Cu.x509.X500Name,Du=le;this.explicit=!1,this.setByParam=function($u){var ku=null;if($u!==void 0){if($u.rfc822!==void 0&&(this.type="rfc822",ku=new Bu({str:$u[this.type]})),$u.dns!==void 0&&(this.type="dns",ku=new Bu({str:$u[this.type]})),$u.uri!==void 0&&(this.type="uri",ku=new Bu({str:$u[this.type]})),$u.dn!==void 0&&(this.type="dn",this.explicit=!0,ku=typeof $u.dn=="string"?new Ou({str:$u.dn}):$u.dn instanceof l$3.asn1.x509.X500Name?$u.dn:new Ou($u.dn)),$u.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,ku=new Ou({ldapstr:$u.ldapdn})),$u.certissuer!==void 0){this.type="dn",this.explicit=!0;var Fu=null;if((Vu=$u.certissuer).match(/^[0-9A-Fa-f]+$/),Vu.indexOf("-----BEGIN ")!=-1&&(Fu=Du(Vu)),Fu==null)throw"certissuer param not cert";(Gu=new Be).hex=Fu;var Nu=Gu.getIssuerHex();(ku=new Lu).hTLV=Nu}if($u.certsubj!==void 0){this.type="dn",this.explicit=!0;var Vu,Gu;if(Fu=null,(Vu=$u.certsubj).match(/^[0-9A-Fa-f]+$/),Vu.indexOf("-----BEGIN ")!=-1&&(Fu=Du(Vu)),Fu==null)throw"certsubj param not cert";(Gu=new Be).hex=Fu,Nu=Gu.getSubjectHex(),(ku=new Lu).hTLV=Nu}if($u.ip!==void 0){this.type="ip",this.explicit=!1;var Hu,ju=$u.ip,Uu="malformed IP address";if(ju.match(/^[0-9.]+[.][0-9.]+$/)){if((Hu=function(zu){zu=(zu=(zu=zu.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return zu.split(/,/).map(function(Wu,Qu,qu){var Yu=parseInt(Wu);if(Yu<0||255<Yu)throw"integer not in range 0-255";return("00"+Yu.toString(16)).slice(-2)}).join("")}catch(Wu){throw"malformed integer array string: "+Wu}}("["+ju.split(".").join(",")+"]")).length!==8)throw Uu}else if(ju.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))Hu=function(zu){var Wu="malformed IPv6 address";if(!zu.match(/^[0-9A-Fa-f:]+$/))throw Wu;var Qu=(zu=zu.toLowerCase()).split(":").length-1;if(Qu<2)throw Wu;var qu=":".repeat(7-Qu+2),Yu=(zu=zu.replace("::",qu)).split(":");if(Yu.length!=8)throw Wu;for(var Xc=0;Xc<8;Xc++)Yu[Xc]=("0000"+Yu[Xc]).slice(-4);return Yu.join("")}(ju);else{if(!ju.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Uu;Hu=ju}ku=new Pu({hex:Hu})}if(this.type==null)throw"unsupported type in params="+$u;this.asn1Obj=new Ru({explicit:this.explicit,tag:Tu[this.type],obj:ku})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe(l$3.asn1.x509.GeneralName,l$3.asn1.ASN1Object),l$3.asn1.x509.GeneralNames=function(_u){l$3.asn1.x509.GeneralNames.superclass.constructor.call(this);var Tu=l$3.asn1;this.setByParamArray=function(Cu){for(var Pu=0;Pu<Cu.length;Pu++){var Bu=new Tu.x509.GeneralName(Cu[Pu]);this.asn1Array.push(Bu)}},this.getEncodedHex=function(){return new Tu.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,_u!==void 0&&this.setByParamArray(_u)},fe(l$3.asn1.x509.GeneralNames,l$3.asn1.ASN1Object),l$3.asn1.x509.OID=new function(_u){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(Tu){if(this.objCache[Tu]!==void 0)return this.objCache[Tu];if(this.name2oidList[Tu]===void 0)throw"Name of ObjectIdentifier not defined: "+Tu;var Cu=this.name2oidList[Tu],Pu=new l$3.asn1.DERObjectIdentifier({oid:Cu});return this.objCache[Tu]=Pu,Pu},this.atype2obj=function(Tu){if(this.objCache[Tu]!==void 0)return this.objCache[Tu];var Cu;if(Tu.match(/^\d+\.\d+\.[0-9.]+$/))Cu=Tu;else if(this.atype2oidList[Tu]!==void 0)Cu=this.atype2oidList[Tu];else{if(this.name2oidList[Tu]===void 0)throw"AttributeType name undefined: "+Tu;Cu=this.name2oidList[Tu]}var Pu=new l$3.asn1.DERObjectIdentifier({oid:Cu});return this.objCache[Tu]=Pu,Pu}},l$3.asn1.x509.OID.oid2name=function(_u){var Tu=l$3.asn1.x509.OID.name2oidList;for(var Cu in Tu)if(Tu[Cu]==_u)return Cu;return""},l$3.asn1.x509.OID.oid2atype=function(_u){var Tu=l$3.asn1.x509.OID.atype2oidList;for(var Cu in Tu)if(Tu[Cu]==_u)return Cu;return _u},l$3.asn1.x509.OID.name2oid=function(_u){if(_u.match(/^[0-9.]+$/))return _u;var Tu=l$3.asn1.x509.OID.name2oidList;return Tu[_u]===void 0?"":Tu[_u]},l$3.asn1.x509.X509Util={},l$3.asn1.x509.X509Util.newCertPEM=function(_u){var Tu=l$3.asn1.x509;return Tu.TBSCertificate,new Tu.Certificate(_u).getPEM()},X$1.getPosArrayOfChildrenFromHex=function(_u){return Me.getChildIdx(_u,0)},X$1.getHexValueArrayOfChildrenFromHex=function(_u){var Tu,Cu=Me.getV,Pu=Cu(_u,(Tu=X$1.getPosArrayOfChildrenFromHex(_u))[0]),Bu=Cu(_u,Tu[1]),Ru=Cu(_u,Tu[2]),Lu=Cu(_u,Tu[3]),Ou=Cu(_u,Tu[4]),Du=Cu(_u,Tu[5]),$u=Cu(_u,Tu[6]),ku=Cu(_u,Tu[7]),Fu=Cu(_u,Tu[8]);return(Tu=new Array).push(Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu),Tu},X$1.prototype.readPrivateKeyFromPEMString=function(_u){var Tu=le(_u),Cu=X$1.getHexValueArrayOfChildrenFromHex(Tu);this.setPrivateEx(Cu[1],Cu[2],Cu[3],Cu[4],Cu[5],Cu[6],Cu[7],Cu[8])},X$1.prototype.readPKCS5PrvKeyHex=function(_u){var Tu=X$1.getHexValueArrayOfChildrenFromHex(_u);this.setPrivateEx(Tu[1],Tu[2],Tu[3],Tu[4],Tu[5],Tu[6],Tu[7],Tu[8])},X$1.prototype.readPKCS8PrvKeyHex=function(_u){var Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u=Me,ku=$u.getVbyListEx;if($u.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");try{Tu=ku(_u,0,[2,0,1],"02"),Cu=ku(_u,0,[2,0,2],"02"),Pu=ku(_u,0,[2,0,3],"02"),Bu=ku(_u,0,[2,0,4],"02"),Ru=ku(_u,0,[2,0,5],"02"),Lu=ku(_u,0,[2,0,6],"02"),Ou=ku(_u,0,[2,0,7],"02"),Du=ku(_u,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du)},X$1.prototype.readPKCS5PubKeyHex=function(_u){var Tu=Me,Cu=Tu.getV;if(Tu.isASN1HEX(_u)===!1)throw new Error("keyHex is not ASN.1 hex string");var Pu=Tu.getChildIdx(_u,0);if(Pu.length!==2||_u.substr(Pu[0],2)!=="02"||_u.substr(Pu[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Bu=Cu(_u,Pu[0]),Ru=Cu(_u,Pu[1]);this.setPublic(Bu,Ru)},X$1.prototype.readPKCS8PubKeyHex=function(_u){var Tu=Me;if(Tu.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");if(Tu.getTLVbyListEx(_u,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var Cu=Tu.getTLVbyListEx(_u,0,[1,0]);this.readPKCS5PubKeyHex(Cu)},X$1.prototype.readCertPubKeyHex=function(_u,Tu){var Cu,Pu;(Cu=new Be).readCertHex(_u),Pu=Cu.getPublicKeyHex(),this.readPKCS8PubKeyHex(Pu)},X$1.prototype.sign=function(_u,Tu){var Cu,Pu=(Cu=_u,l$3.crypto.Util.hashString(Cu,Tu));return this.signWithMessageHash(Pu,Tu)},X$1.prototype.signWithMessageHash=function(_u,Tu){var Cu=G$1(l$3.crypto.Util.getPaddedDigestInfoHex(_u,Tu,this.n.bitLength()),16);return Ie(this.doPrivate(Cu).toString(16),this.n.bitLength())},X$1.prototype.signPSS=function(_u,Tu,Cu){var Pu,Bu=(Pu=oe(_u),l$3.crypto.Util.hashHex(Pu,Tu));return Cu===void 0&&(Cu=-1),this.signWithMessageHashPSS(Bu,Tu,Cu)},X$1.prototype.signWithMessageHashPSS=function(_u,Tu,Cu){var Pu,Bu=re(_u),Ru=Bu.length,Lu=this.n.bitLength()-1,Ou=Math.ceil(Lu/8),Du=function(ju){return l$3.crypto.Util.hashHex(ju,Tu)};if(Cu===-1||Cu===void 0)Cu=Ru;else if(Cu===-2)Cu=Ou-Ru-2;else if(Cu<-2)throw new Error("invalid salt length");if(Ou<Ru+Cu+2)throw new Error("data too long");var $u="";Cu>0&&($u=new Array(Cu),new j$1().nextBytes($u),$u=String.fromCharCode.apply(String,$u));var ku=re(Du(oe("\0\0\0\0\0\0\0\0"+Bu+$u))),Fu=[];for(Pu=0;Pu<Ou-Cu-Ru-2;Pu+=1)Fu[Pu]=0;var Nu=String.fromCharCode.apply(String,Fu)+""+$u,Vu=Se(ku,Nu.length,Du),Gu=[];for(Pu=0;Pu<Nu.length;Pu+=1)Gu[Pu]=Nu.charCodeAt(Pu)^Vu.charCodeAt(Pu);var Hu=65280>>8*Ou-Lu&255;for(Gu[0]&=~Hu,Pu=0;Pu<Ru;Pu++)Gu.push(ku.charCodeAt(Pu));return Gu.push(188),Ie(this.doPrivate(new c$2(Gu)).toString(16),this.n.bitLength())},X$1.prototype.verify=function(_u,Tu){if((Tu=Tu.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var Cu=G$1(Tu,16),Pu=this.n.bitLength();if(Cu.bitLength()>Pu)return!1;var Bu=this.doPublic(Cu).toString(16);if(Bu.length+3!=Pu/4)return!1;var Ru=Ce(Bu.replace(/^1f+00/,""));if(Ru.length==0)return!1;var Lu,Ou=Ru[0];return Ru[1]==(Lu=_u,l$3.crypto.Util.hashString(Lu,Ou))},X$1.prototype.verifyWithMessageHash=function(_u,Tu){if(Tu.length!=Math.ceil(this.n.bitLength()/4))return!1;var Cu=G$1(Tu,16);if(Cu.bitLength()>this.n.bitLength())return 0;var Pu=Ce(this.doPublic(Cu).toString(16).replace(/^1f+00/,""));return Pu.length!=0&&(Pu[0],Pu[1]==_u)},X$1.prototype.verifyPSS=function(_u,Tu,Cu,Pu){var Bu=function(Ru){return l$3.crypto.Util.hashHex(Ru,Cu)}(oe(_u));return Pu===void 0&&(Pu=-1),this.verifyWithMessageHashPSS(Bu,Tu,Cu,Pu)},X$1.prototype.verifyWithMessageHashPSS=function(_u,Tu,Cu,Pu){if(Tu.length!=Math.ceil(this.n.bitLength()/4))return!1;var Bu,Ru=new c$2(Tu,16),Lu=function(zu){return l$3.crypto.Util.hashHex(zu,Cu)},Ou=re(_u),Du=Ou.length,$u=this.n.bitLength()-1,ku=Math.ceil($u/8);if(Pu===-1||Pu===void 0)Pu=Du;else if(Pu===-2)Pu=ku-Du-2;else if(Pu<-2)throw new Error("invalid salt length");if(ku<Du+Pu+2)throw new Error("data too long");var Fu=this.doPublic(Ru).toByteArray();for(Bu=0;Bu<Fu.length;Bu+=1)Fu[Bu]&=255;for(;Fu.length<ku;)Fu.unshift(0);if(Fu[ku-1]!==188)throw new Error("encoded message does not end in 0xbc");var Nu=(Fu=String.fromCharCode.apply(String,Fu)).substr(0,ku-Du-1),Vu=Fu.substr(Nu.length,Du),Gu=65280>>8*ku-$u&255;if((Nu.charCodeAt(0)&Gu)!=0)throw new Error("bits beyond keysize not zero");var Hu=Se(Vu,Nu.length,Lu),ju=[];for(Bu=0;Bu<Nu.length;Bu+=1)ju[Bu]=Nu.charCodeAt(Bu)^Hu.charCodeAt(Bu);ju[0]&=~Gu;var Uu=ku-Du-Pu-2;for(Bu=0;Bu<Uu;Bu+=1)if(ju[Bu]!==0)throw new Error("leftmost octets not zero");if(ju[Uu]!==1)throw new Error("0x01 marker not found");return Vu===re(Lu(oe("\0\0\0\0\0\0\0\0"+Ou+String.fromCharCode.apply(String,ju.slice(-Pu)))))},X$1.SALT_LEN_HLEN=-1,X$1.SALT_LEN_MAX=-2,X$1.SALT_LEN_RECOVER=-2,Be.hex2dn=function(_u,Tu){Tu===void 0&&(Tu=0);var Cu=new Be;return Me.getTLV(_u,Tu),Cu.getX500Name(_u).str},Be.hex2rdn=function(_u,Tu){if(Tu===void 0&&(Tu=0),_u.substr(Tu,2)!=="31")throw new Error("malformed RDN");for(var Cu=new Array,Pu=Me.getChildIdx(_u,Tu),Bu=0;Bu<Pu.length;Bu++)Cu.push(Be.hex2attrTypeValue(_u,Pu[Bu]));return(Cu=Cu.map(function(Ru){return Ru.replace("+","\\+")})).join("+")},Be.hex2attrTypeValue=function(_u,Tu){var Cu=Me,Pu=Cu.getV;if(Tu===void 0&&(Tu=0),_u.substr(Tu,2)!=="30")throw new Error("malformed attribute type and value");var Bu=Cu.getChildIdx(_u,Tu);Bu.length!==2||_u.substr(Bu[0],2);var Ru=Pu(_u,Bu[0]),Lu=l$3.asn1.ASN1Util.oidHexToInt(Ru);return l$3.asn1.x509.OID.oid2atype(Lu)+"="+re(Pu(_u,Bu[1]))},Be.getPublicKeyFromCertHex=function(_u){var Tu=new Be;return Tu.readCertHex(_u),Tu.getPublicKey()},Be.getPublicKeyFromCertPEM=function(_u){var Tu=new Be;return Tu.readCertPEM(_u),Tu.getPublicKey()},Be.getPublicKeyInfoPropOfCertPEM=function(_u){var Tu,Cu,Pu=Me.getVbyList,Bu={};return Bu.algparam=null,(Tu=new Be).readCertPEM(_u),Cu=Tu.getPublicKeyHex(),Bu.keyhex=Pu(Cu,0,[1],"03").substr(2),Bu.algoid=Pu(Cu,0,[0,0],"06"),Bu.algoid==="2a8648ce3d0201"&&(Bu.algparam=Pu(Cu,0,[0,1],"06")),Bu},Be.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Pe,Re=[(Pe=new Be,Pe.readCertPEM(function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=113,Pu=126,Bu=0,Ru="";return arguments[Bu].split(Ru).map(function(Lu){return Lu.charCodeAt(Bu)>Pu?Lu:String.fromCharCode((Lu.charCodeAt(Bu)+Cu)%Pu)}).join(Ru)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Pe)];function ke(_u,Tu){var Cu=_u.getIssuerHex();if(Cu===_u.getSubjectHex())return _u.verifySignature(_u.getPublicKey());var Pu=function(Bu,Ru){for(var Lu=0,Ou=Ru;Lu<Ou.length;Lu++){var Du=Ou[Lu];if(Du.getSubjectHex()===Bu)return Du}}(Cu,Tu);return!!Pu&&_u.verifySignature(Pu.getPublicKey())!==!1&&ke(Pu,Tu)}function De(_u){return _u.getIssuerHex()!==_u.getSubjectHex()&&ke(_u,Re)}(function(_u){var Tu=new Be;typeof _u=="string"?Tu.readCertPEM(_u):Tu.readCertHex(_u.hex),De(Tu),Re.push(Tu)})(function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=113,Pu=126,Bu=0,Ru="";return arguments[Bu].split(Ru).map(function(Lu){return Lu.charCodeAt(Bu)>Pu?Lu:String.fromCharCode((Lu.charCodeAt(Bu)+Cu)%Pu)}).join(Ru)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var Le,Oe=(Le="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(Le,">$"):Symbol(Le));function Ne(_u){return _u[Oe]||(_u[Oe]={}),_u[Oe]}var Fe=function(){function _u(){}return _u.prototype.hasListener=function(Tu){var Cu=Ne(this);return Cu&&Cu[Tu]&&Cu[Tu].length>0},_u.prototype.on=function(Tu,Cu,Pu){var Bu=this,Ru=Ne(this);return Ru[Tu]||(Ru[Tu]=[]),Ru[Tu].push([Cu,Pu||!1]),function(){return Bu.off(Tu,Cu)}},_u.prototype.once=function(Tu,Cu){return this.on(Tu,Cu,!0)},_u.prototype.off=function(Tu,Cu){if(Tu!==void 0){var Pu,Bu=Ne(this);if(Bu[Tu]||(Bu[Tu]=[]),Cu!==void 0){for(var Ru=0;Ru<Bu[Tu].length&&Bu[Tu][Ru][0]!==Cu;Ru++);Ru<Bu[Tu].length&&Bu[Tu].splice(Ru,1)}else Bu[Tu].length=0}else(Pu=this)[Oe]||delete Pu[Oe]},_u.prototype.emit=function(Tu){for(var Cu=[],Pu=1;Pu<arguments.length;Pu++)Cu[Pu-1]=arguments[Pu];for(var Bu=!1,Ru=Ne(this),Lu=Ru[Tu]||[],Ou=0,Du=Lu.slice();Ou<Du.length;Ou++){var $u=Du[Ou],ku=$u[0],Fu=$u[1],Nu=Fu!==void 0&&Fu,Vu=ku.apply(void 0,Cu);Nu&&this.off(Tu,ku),Vu===!1&&(Bu=!0)}return Bu},_u}();function Qe(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu]}var Ve=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),_e=typeof performance!="undefined"?function(){return Ve+performance.now()}:function(){return Date.now()};function He(_u){Object.freeze(_u);var Tu=typeof _u=="function",Cu=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(_u).forEach(function(Pu){!Cu.call(_u,Pu)||Tu&&(Pu==="caller"||Pu==="callee"||Pu==="arguments")||_u[Pu]===null||typeof _u[Pu]!="object"&&typeof _u[Pu]!="function"||Object.isFrozen(_u[Pu])||He(_u[Pu])}),_u}var qe=/^([^.]+)(\.([^.]+))*$/;function ze(_u){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(_u)}function Ke(_u,Tu){return qe.test(_u)&&qe.test(Tu)&&function(Cu,Pu){if(Cu==="*")return!0;var Bu=Cu.split(".").reverse(),Ru=Pu.split(".").reverse();if(Bu.length<=1)return Cu===Pu;for(var Lu=0;Lu<Bu.length;Lu++)if(Bu[Lu]!==Ru[Lu])return!1;return!0}(_u,Tu)}var Ue=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],je=He(JSON.parse(function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=113,Pu=126,Bu=0,Ru="";return arguments[Bu].split(Ru).map(function(Lu){return Lu.charCodeAt(Bu)>Pu?Lu:String.fromCharCode((Lu.charCodeAt(Bu)+Cu)%Pu)}).join(Ru)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/pnyp{|qr;vr/j"))),Ge=function(_u){function Tu(Cu,Pu,Bu){return _u.call(this,"[NETWORK]: request proxy error(type: ".concat(Pu,", reason: ").concat(Bu,"): ").concat(Cu))||this}return t$3.__extends(Tu,_u),Tu}(Error),We=function(_u){function Tu(Cu,Pu,Bu){var Ru=_u.call(this,"[NETWORK]: response error(type: ".concat(Pu,", status: ").concat(Bu,"): ").concat(Cu))||this;return Ru.httpStatus=Bu,Ru}return t$3.__extends(Tu,_u),Tu}(Error);(function(_u){function Tu(Cu,Pu){return _u.call(this,"[NETWORK]: request abort(type: ".concat(Pu,"): ").concat(Cu))||this}t$3.__extends(Tu,_u)})(Error);var Xe=function(_u){function Tu(Cu,Pu,Bu){return _u.call(this,"[NETWORK]: request timeout(type: ".concat(Pu,", timeout: ").concat(Bu,"ms): ").concat(Cu))||this}return t$3.__extends(Tu,_u),Tu}(Error),Ye=function(_u){function Tu(Cu,Pu,Bu){return _u.call(this,"[NETWORK]: request forbidden(type: ".concat(Pu,", reason: ").concat(Bu,"): ").concat(Cu))||this}return t$3.__extends(Tu,_u),Tu}(Error);function Ze(_u){for(var Tu=0,Cu=Ue;Tu<Cu.length;Tu++){var Pu=Cu[Tu],Bu=_u.match(Pu);if(Bu)return"jsonp_"+Bu[1]}return null}function Je(_u){return Ze(_u)!==null}function $e(_u){return Ue.reduce(function(Tu,Cu){return Tu.replace(Cu,"")},_u)}function et(_u){if(/^blob\:/i.test(_u))return"blob:";if(/^data\:/i.test(_u))return"data:";var Tu=_u.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/i);return Tu?Tu[2]:location.hostname}var tt=function(_u){function Tu(){return _u!==null&&_u.apply(this,arguments)||this}return t$3.__extends(Tu,_u),Tu}(Fe);function it(_u,Tu,Cu,Pu,Bu){Tu===void 0&&(Tu={}),Cu===void 0&&(Cu=Qe),Pu===void 0&&(Pu=Qe),Bu===void 0&&(Bu=Qe);var Ru=_e(),Lu=_u;return Promise.resolve().then(function(){return Tu.requestProxy?Tu.requestProxy(_u):_u}).then(function(Ou){return/^https\:/.test(location.href)&&/^http\:/.test(Ou)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Ou,"'. This request was automatically upgraded to HTTPS")),Ou.replace(/^http\:/,"https:")):Ou}).catch(function(Ou){var Du,$u=Ze(_u)?"Script":"XMLHttpRequest",ku=new Ge(Lu,$u,Ou&&Ou.message?String(Ou.message):String(Ou));return(Du=Tu.networkSubscribe)===null||Du===void 0||Du.emit("network",_u,$u,"proxy-error",ku.message),Promise.reject(ku)}).then(function(Ou){return new Promise(function(Du,$u){var ku,Fu=Tu.allowHosts?je.concat(Tu.allowHosts):je.slice(),Nu=et(Ou),Vu=Ze(Ou);if(location.hostname.length!==0&&!ze(location.hostname)&&je.filter(function(Xu){return Ke(Xu,location.hostname)}).length===0&&!ze(Nu)&&Fu.filter(function(Xu){return Ke(Xu,Nu)}).length===0){var Gu=Vu?"Script":"XMLHttpRequest",Hu=new Ye(Ou,Gu,"request host(".concat(Nu,") is not allowed"));return Pu(Hu),$u(Hu),void((ku=Tu.networkSubscribe)===null||ku===void 0||ku.emit("network",Ou,Gu,"forbidden",Hu.message))}if(Vu){var ju=window,Uu=null,zu=!1,Wu=document.createElement("script");ju[Vu]=function(Xu){var Ju,Zu,_c=_e(),_f=_c-Ru;if(delete ju[Vu],Wu.parentNode&&Wu.parentNode.removeChild(Wu),Uu!==null&&(window.clearTimeout(Uu),Uu=null),zu!==!0){if(Xu.indexOf("data:")!==0){var ep=new We(Ou,"Script",500);return Pu(ep),$u(ep),void((Ju=Tu.networkSubscribe)===null||Ju===void 0||Ju.emit("network",Ou,"Script","error",ep.message))}var tp=Xu.split(","),op=(tp[0].match(/:(.*?);/)||[])[1],hp=tp[1];if(Tu.responseType==="arraybuffer"||Tu.responseType==="blob"){for(var cp=atob(tp[1]),Sp=cp.length,yp=new Uint8Array(Sp),Rp=0;Rp<Sp;Rp++)yp[Rp]=cp.charCodeAt(Rp);hp=Tu.responseType==="arraybuffer"?yp.buffer:new Blob([yp],{type:op})}var wp={body:hp,meta:{origin:Lu,source:Ou,requestTime:Ru,responseTime:_c,costs:_f,headers:{}}};Cu(wp),Du(wp),(Zu=Tu.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Ou,"Script","ok",JSON.stringify(wp.meta)),zu=!0}},Wu.src=Ou,document.body.appendChild(Wu),typeof Tu.timeout=="number"&&(Uu=window.setTimeout(function(){var Xu;if(Uu=null,zu!==!0){zu=!0;var Ju=new Xe(Ou,"Script",Tu.timeout||NaN);Pu(Ju),$u(Ju),(Xu=Tu.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Ou,"Script","timeout",Ju.message)}},Tu.timeout))}else{var Qu=!1,qu=new XMLHttpRequest,Yu=function(){qu&&(qu.removeEventListener("timeout",Xc,!1),qu.removeEventListener("progress",_h,!1),qu.removeEventListener("load",_d,!1),qu.removeEventListener("error",Ku,!1)),qu=null,Yu=Qe},Xc=function(){var Xu;if(Qu!==!0){Qu=!0,Yu();var Ju=new Xe(Ou,"XMLHttpRequest",Tu.timeout||NaN);Pu(Ju),$u(Ju),(Xu=Tu.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Ou,"XMLHttpRequest","timeout",Ju.message)}},_h=function(Xu){Qu!==!0&&Xu.lengthComputable&&(Xu.total<=0||Bu(Xu.loaded/Xu.total))},_d=function(Xu){var Ju;if(Qu!==!0){var Zu=this.status;if(Zu===0||Zu>=200&&Zu<400){Qu=!0,Yu();var _c=_e(),_f=_c-Ru,ep=function(hp){if(!hp)return{};for(var cp={},Sp=hp.trim().split(`
`),yp=0;yp<Sp.length;yp++){var Rp=Sp[yp],wp=Rp.indexOf(":"),Pp=Rp.slice(0,wp).trim().toLowerCase(),Ep=Rp.slice(wp+1).trim();Ep&&(cp[Pp]?cp[Pp]+=", "+Ep:cp[Pp]=Ep)}return cp}(this.getAllResponseHeaders()),tp=Xu.total,op={body:this.response,meta:{origin:Lu,source:Ou,requestTime:Ru,responseTime:_c,costs:_f,headers:ep,size:tp}};Cu(op),Du(op),(Ju=Tu.networkSubscribe)===null||Ju===void 0||Ju.emit("network",Ou,"XMLHttpRequest","ok",JSON.stringify(op.meta))}else Ku.call(this)}},Ku=function(){var Xu;if(Qu!==!0){Qu=!0,Yu();var Ju=new We(Ou,"XMLHttpRequest",this.status);Pu(Ju),$u(Ju),(Xu=Tu.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Ou,"XMLHttpRequest","error",Ju.message)}};qu.addEventListener("timeout",Xc,!1),qu.addEventListener("progress",_h,!1),qu.addEventListener("load",_d,!1),qu.addEventListener("error",Ku,!1),Tu.responseType&&(qu.responseType=Tu.responseType),typeof Tu.timeout=="number"&&(qu.timeout=Tu.timeout),qu.open("GET",Ou,!0),qu.send(null)}})})}var nt={};function rt(_u,Tu,Cu,Pu,Bu,Ru){Tu===void 0&&(Tu={}),Cu===void 0&&(Cu=Qe),Pu===void 0&&(Pu=Qe),Bu===void 0&&(Bu=Qe);var Lu=_e(),Ou=_u;return Promise.resolve().then(function(){return Tu.requestProxy?Tu.requestProxy(_u):_u}).then(function(Du){return/^https\:/.test(location.href)&&/^http\:/.test(Du)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Du,"'. This request was automatically upgraded to HTTPS")),Du.replace(/^http\:/,"https:")):Du}).catch(function(Du){var $u,ku=new Ge(Ou,"Image",Du&&Du.message?String(Du.message):String(Du));return($u=Tu.networkSubscribe)===null||$u===void 0||$u.emit("network",_u,"Image","proxy-error",ku.message),Promise.reject(ku)}).then(function(Du){return new Promise(function($u,ku){var Fu,Nu=Tu.allowHosts?je.concat(Tu.allowHosts):je.slice(),Vu=et(Du);if(location.hostname.length!==0&&!ze(location.hostname)&&je.filter(function(zu){return Ke(zu,location.hostname)}).length===0&&!ze(Vu)&&Nu.filter(function(zu){return Ke(zu,Vu)}).length===0){var Gu=new Ye(Du,"Image","request host(".concat(Vu,") is not allowed"));return Pu(Gu),ku(Gu),void((Fu=Tu.networkSubscribe)===null||Fu===void 0||Fu.emit("network",Du,"Image","forbidden",Gu.message))}var Hu=Ru!=null?Ru:new Image,ju=!1,Uu=null;typeof Tu.timeout=="number"&&(Uu=window.setTimeout(function(){var zu;if(Hu.onload=Qe,Hu.onerror=Qe,Uu=null,ju!==!0){ju=!0;var Wu=new Xe(Du,"Image",Tu.timeout);Pu(Wu),ku(Wu),(zu=Tu.networkSubscribe)===null||zu===void 0||zu.emit("network",Du,"Image","timeout",Wu.message)}},Tu.timeout)),Hu.onload=function(){var zu;if(Hu.onload=Qe,Hu.onerror=Qe,Uu!==null&&(clearTimeout(Uu),Uu=null),ju!==!0){var Wu=_e();ju=!0;var Qu={body:Hu,meta:{headers:{},origin:Ou,source:Du,requestTime:Lu,responseTime:Wu,costs:Wu-Lu}};Bu(1),Cu(Qu),$u(Qu),(zu=Tu.networkSubscribe)===null||zu===void 0||zu.emit("network",Du,"Image","ok",JSON.stringify(Qu.meta))}},Hu.onerror=function(){var zu;if(Hu.onload=Qe,Hu.onerror=Qe,Uu!==null&&(clearTimeout(Uu),Uu=null),ju!==!0){ju=!0;var Wu=new We(Du,"Image",0);Pu(Wu),ku(Wu),(zu=Tu.networkSubscribe)===null||zu===void 0||zu.emit("network",Du,"Image","ok",Wu.message)}},Bu(0),Hu.src=Du})})}var ot=function(){if(typeof window!="undefined"){var _u=window;return _u.requestAnimationFrame||_u.mozRequestAnimationFrame||_u.webkitRequestAnimationFrame||_u.msRequestAnimationFrame||function(Tu){return setTimeout(Tu,16)}}return function(Tu){return setTimeout(Tu,16)}}(),st=16,at=function(){function _u(){this.frames=[],this.stoped=!1,this.time=_e(),this.context=null,this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(_u,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new _u),this.sharedInstance},enumerable:!1,configurable:!0}),_u.getFrameTime=function(){return st},_u.prototype.loop=function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];if(!this.stoped){var Pu=_e(),Bu=Pu-this.time;this.time=Pu;var Ru=[];st=Bu;for(var Lu=0,Ou=this.frames;Lu<Ou.length;Lu++){var Du=Ou[Lu];if(Du.delay>0)Du.delay=Du.delay-1;else{try{Du.callback.apply(Du,t$3.__spreadArray([Pu,Bu],Tu,!1))}catch($u){console.error($u)}Du.once&&Ru.push(Du)}}Ru.length>0&&(this.frames=this.frames.filter(function($u){return Ru.indexOf($u)===-1})),this.requestAnimationFrame(this.loop)}},_u.prototype.setContext=function(Tu){this.cancelAnimationFrame(this.requestId),this.context=Tu,this.requestId=this.requestAnimationFrame(this.loop)},_u.prototype.getContext=function(){return this.context},_u.prototype.requestAnimationFrame=function(Tu){return this.context?this.context.requestAnimationFrame(Tu):ot(Tu)},_u.prototype.cancelAnimationFrame=function(Tu){this.context?this.context.cancelAnimationFrame(Tu):function(Cu){var Pu;if(typeof window!="undefined"){var Bu=window;Pu=Bu.cancelAnimationFrame||Bu.mozCancelAnimationFrame||Bu.webkitCancelAnimationFrame||Bu.msCancelAnimationFrame||function(Ru){return window.clearTimeout(Ru)}}else Pu=function(Ru){return window.clearTimeout(Ru)};Pu(Cu)}(this.loop),this.requestId=null},_u.prototype.remove=function(Tu){var Cu=this.frames.indexOf(Tu);Cu>=0&&this.frames.splice(Cu,1)},_u.prototype.add=function(Tu,Cu,Pu,Bu){var Ru=this;Cu===void 0&&(Cu=!1),Pu===void 0&&(Pu=0),Bu===void 0&&(Bu=5);var Lu={callback:Tu,once:Cu,delay:Pu,order:Bu};return this.frames.push(Lu),this.frames.sort(function(Ou,Du){return Ou.order-Du.order}),function(){return Ru.remove(Lu)}},_u.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},_u}(),lt=/^https?\:\/\/?([^\/]+)/;function ut(_u,Tu){return _u.replace(lt,function(Cu,Pu){return Cu.slice(0,Cu.length-Pu.length)+Tu})}var ht={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]},"test-vr-public.realsee-cdn.cn":{pano:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],texture:["test-vr-image.realsee-cdn.cn"],tile:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],default:["test-vr-image.realsee-cdn.cn"]}};function ct(_u,Tu){var Cu=t$3.__assign(t$3.__assign({},ht),Tu.mappings),Pu=function(Ru){var Lu=Ru.match(lt);return Lu===null?null:Lu[1]}(_u);if(Pu===null)return _u;var Bu=Cu[Pu];return Bu?(/\.basis(\?|$)/.test(_u)&&Tu.basisLoaderInitialized!==!0&&(_u=_u.replace(/\.basis(\?|$)/,".jpg$1")),function(Ru,Lu){var Ou,Du=Ru.split("?")[0],$u=Du.split(".").pop();if($u==="jpeg"&&($u="jpg"),$u!=="png"&&$u!=="jpg")return Ru;var ku="";if(Lu.format!==void 0&&Lu.format!==$u&&(ku+="/format/".concat(Lu.format)),Lu.cut!==void 0&&(ku+="/cut/".concat(Lu.cut[2],"x").concat(Lu.cut[3],"x").concat(Lu.cut[0],"x").concat(Lu.cut[1])),Lu.quality!==void 0){var Fu=(Ou=Lu.format)!==null&&Ou!==void 0?Ou:$u;Fu&&["jpg","webp","tpg","heif","avif"].indexOf(Fu)>=0&&(ku+="/quality/".concat(Lu.quality))}if(Lu.size!==void 0){var Nu=Ru.match(/\/cube_(\d+)\//);(Nu?Number(Nu[1]):NaN)!==Number(Lu.size)&&(ku+="/thumbnail/".concat(Lu.size,"x"))}return Lu.sharpen!==void 0&&(ku+="/sharpen/".concat(Lu.sharpen)),ku.length&&(ku="?imageMogr2"+ku),Du+ku}(function(Ru,Lu,Ou){var Du=Lu.split("."),$u=Du[0],ku=Du.slice(1);if($u==="texture")return ut(Ru,Ou.texture[0]);if($u==="pano"||$u==="pano_luminance")switch(ku[0],ku[1]){case"front":case"left":case"up":return ut(Ru,Ou.pano[0]);case"down":case"right":case"back":return ut(Ru,Ou.pano[1])}else if($u==="pano_tile"||$u==="pano_tile_luminance"){ku[0],ku[1];var Fu=ku[2],Nu=ku[3],Vu=ku[4],Gu=Math.pow(2,Number(Fu))*Number(Nu)+Number(Vu);if(!isNaN(Gu))return ut(Ru,Ou.tile[Gu%2])}return ut(Ru,Ou.default[0])}(_u,Tu.key,Bu),Tu)):_u}function dt(_u){return new Promise(function(Tu){var Cu=new Image,Pu=setTimeout(function(){Cu.onload=Cu.onerror=function(){},clearTimeout(Pu),Tu(!1)});Cu.onload=Cu.onerror=function(){Cu.onload=Cu.onerror=function(){},clearTimeout(Pu),Tu(Cu.height===2)},Cu.src=_u})}var pt=null,ft=function(_u){function Tu(){var Cu=_u!==null&&_u.apply(this,arguments)||this;return Cu.floorIndex=0,Cu.needsRender=!0,Cu}return t$3.__extends(Tu,_u),Tu}(r$3.Mesh),At=function(_u){function Tu(){var Cu=_u!==null&&_u.apply(this,arguments)||this;return Cu.needsRender=!0,Cu.enableTransparent=!0,Cu}return t$3.__extends(Tu,_u),Tu.prototype.getTransparent=function(){return this.enableTransparent},Tu.prototype.setTransparent=function(Cu){this.enableTransparent=Cu,this.traverse(function(Pu){Pu instanceof ft&&Pu.material.forEach(function(Bu){Bu.transparent=Cu})})},Tu.prototype.getMaterial=function(){var Cu=null;return this.traverse(function(Pu){if(Cu===null&&Pu instanceof ft){var Bu=Pu.material[0];Cu={pano0:Bu.pano0,pano1:Bu.pano1,modelAlpha:Bu.modelAlpha,progress:Bu.progress,useBlackTransition:Bu.useBlackTransition,useXRBlackTransition:Bu.useXRBlackTransition,perspToOrtho:Bu.perspToOrtho,opacity:Bu.opacity,floorInfo:Bu.floorInfo}}}),Cu},Tu.prototype.setMaterial=function(Cu){this.traverse(function(Pu){Pu instanceof ft&&Pu.material.forEach(function(Bu){Cu.pano0!==void 0&&(Bu.pano0=Cu.pano0),Cu.pano1!==void 0&&(Bu.pano1=Cu.pano1),Cu.modelAlpha!==void 0&&(Bu.modelAlpha=Cu.modelAlpha),Cu.progress!==void 0&&(Bu.progress=Cu.progress),Cu.useBlackTransition!==void 0&&(Bu.useBlackTransition=Cu.useBlackTransition),Cu.useXRBlackTransition!==void 0&&(Bu.useXRBlackTransition=Cu.useXRBlackTransition),Cu.perspToOrtho!==void 0&&(Bu.perspToOrtho=Cu.perspToOrtho),Cu.opacity!==void 0&&(Bu.opacity=Cu.opacity),Cu.floorInfo!==void 0&&(Bu.floorInfo=Cu.floorInfo)})})},Tu.prototype.disposeMaterial=function(){this.traverse(function(Cu){if(Cu instanceof ft){var Pu=[];Cu.material.forEach(function(Bu){var Ru=Bu.uniforms;Object.keys(Ru).map(function(Lu){if(/^pano\d\_/.test(Lu))Ru[Lu].value=null;else{var Ou=Ru[Lu].value;Ou&&typeof Ou.dispose=="function"&&Pu.indexOf(Ou)===-1&&(Ru[Lu].value=null,Pu.push(Ou))}}),Bu.dispose()}),Pu.forEach(function(Bu){return Bu.dispose()})}})},Tu.prototype.disposeGeometry=function(){this.traverse(function(Cu){Cu instanceof ft&&Cu.geometry.dispose()})},Tu}(r$3.Group),gt=function(_u){function Tu(){var Cu=_u!==null&&_u.apply(this,arguments)||this;return Cu.floorIndex=0,Cu}return t$3.__extends(Tu,_u),Tu}(At),mt=function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=113,Pu=126,Bu=0,Ru="";return arguments[Bu].split(Ru).map(function(Lu){return Lu.charCodeAt(Bu)>Pu?Lu:String.fromCharCode((Lu.charCodeAt(Bu)+Cu)%Pu)}).join(Ru)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;===>9-no5q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{666H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),vt=function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=113,Pu=126,Bu=0,Ru="";return arguments[Bu].split(Ru).map(function(Lu){return Lu.charCodeAt(Bu)>Pu?Lu:String.fromCharCode((Lu.charCodeAt(Bu)+Cu)%Pu)}).join(Ru)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-e_lOYNPXlP\\Y\\_-rpA5=;=9=;=9=;=9>;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvs0vs-qrsv{rq5b`RlPYV]SY\\\\_6{vs|z-rp@-sy||V{s|H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--vs-5q|5cvr]|vv|{9-[|zny6-I-=;=6-\n----qvpnqH--\f--0vs-qrsv{rq5b`RlPYV]SY\\\\_6----vs-5|yq]|vv|{;\b-I-sy||V{s|;-\v\v-|yq]|vv|{;\b-K-sy||V{s|;t6-\n------qvpnqH----\f--0r{qvs--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryvs-qrsv{rq5b`Rle_lOYNPXla_N[`VaV\\[6}n{|P|y|-J-zv\x075}n{|=P|y|9e_lOYNPXlP\\Y\\_9zv{5>;=9-}|tr66H0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function yt(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var bt=yt();bt.width=bt.height=8;var xt=new r$3.Texture(bt);xt.name="EMPTY_TEXTURE";var wt=new r$3.CubeTexture([bt,bt,bt,bt,bt,bt]);wt.name="EMPTY_CUBE_TEXTURE",xt.dispose=wt.dispose=function(){};var Et=Object.assign({modelAlpha:new r$3.Uniform(0),progress:new r$3.Uniform(0),pano0_map:new r$3.Uniform(wt),pano0_luminanceMap:new r$3.Uniform(null),pano0_matrix:new r$3.Uniform(new r$3.Matrix4),pano1_map:new r$3.Uniform(wt),pano1_luminanceMap:new r$3.Uniform(null),pano1_matrix:new r$3.Uniform(new r$3.Matrix4),modelCenter:new r$3.Uniform(new r$3.Vector3),perspToOrtho:new r$3.Uniform(0),floorInfo:new r$3.Vector3(0,0,0)},{exposure:new r$3.Uniform(1),emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsUtils.clone(r$3.UniformsLib.common),r$3.UniformsUtils.clone(r$3.UniformsLib.lights)),Mt=function(_u){function Tu(Cu){Cu===void 0&&(Cu={});var Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu=this;return Nu=_u.call(this,{vertexShader:mt,fragmentShader:vt,uniforms:r$3.UniformsUtils.clone(Et),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_XR_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1,USE_CLIPFLOOR:!1},blending:r$3.NoBlending,lights:!0})||this,Object.defineProperties(Nu,{pano0:{get:function(){return this.uniforms.pano0_map.value===wt?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Vu){Vu===null?(this.uniforms.pano0_map.value=wt,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Vu.map,this.uniforms.pano0_luminanceMap.value=Vu.luminanceMap,this.uniforms.pano0_matrix.value.copy(Vu.matrix));var Gu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Gu&&(this.defines.USE_LUMINANCE=Gu,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===wt?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Vu){Vu===null?(this.uniforms.pano1_map.value=wt,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Vu.map,this.uniforms.pano1_luminanceMap.value=Vu.luminanceMap,this.uniforms.pano1_matrix.value.copy(Vu.matrix));var Gu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Gu&&(this.defines.USE_LUMINANCE=Gu,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Vu){this.uniforms.modelAlpha.value=Vu}},progress:{get:function(){return this.uniforms.progress.value},set:function(Vu){this.uniforms.progress.value=Vu}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Vu){this.defines.USE_BLACK_TRANSITION!==Vu&&(this.defines.USE_BLACK_TRANSITION=Vu,this.needsUpdate=!0)}},useXRBlackTransition:{get:function(){return this.defines.USE_XR_BLACK_TRANSITION},set:function(Vu){this.defines.USE_XR_BLACK_TRANSITION!==Vu&&(this.defines.USE_XR_BLACK_TRANSITION=Vu,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Vu){this.uniforms.opacity.value=Vu;var Gu=Vu<1?r$3.NormalBlending:r$3.NoBlending;Gu!==this.blending&&(this.blending=Gu,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Vu){this.uniforms.perspToOrtho.value=Vu}},floorInfo:{get:function(){return this.uniforms.floorInfo.value},set:function(Vu){Vu&&Vu.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!1,this.needsUpdate=!0),Vu&&!Vu.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!0,this.uniforms.floorInfo.value=Vu,this.needsUpdate=!0)}}}),Nu.pano0=(Pu=Cu.pano0)!==null&&Pu!==void 0?Pu:null,Nu.pano1=(Bu=Cu.pano1)!==null&&Bu!==void 0?Bu:null,Nu.modelAlpha=(Ru=Cu.modelAlpha)!==null&&Ru!==void 0?Ru:1,Nu.progress=(Lu=Cu.progress)!==null&&Lu!==void 0?Lu:0,Nu.useBlackTransition=(Ou=Cu.useBlackTransition)!==null&&Ou!==void 0&&Ou,Nu.useXRBlackTransition=(Du=Cu.useXRBlackTransition)!==null&&Du!==void 0&&Du,Nu.perspToOrtho=($u=Cu.perspToOrtho)!==null&&$u!==void 0?$u:0,Nu.opacity=(ku=Cu.opacity)!==null&&ku!==void 0?ku:1,Nu.originOpacity=1,Nu.floorInfo=(Fu=Cu.floorInfo)!==null&&Fu!==void 0?Fu:null,Nu}return t$3.__extends(Tu,_u),Tu}(r$3.ShaderMaterial),It=function(_u){function Tu(Cu){var Pu=Cu.preserveDrawingBuffer,Bu=Pu===void 0||Pu,Ru=Cu.backgroundColor,Lu=Ru===void 0?1579548:Ru,Ou=Cu.backgroundAlpha,Du=Ou===void 0?1:Ou,$u=Cu.pixelRatio,ku=$u===void 0?1:$u,Fu=Cu.antialias,Nu=Fu!==void 0&&Fu,Vu=Cu.webgl2,Gu=this;if(Vu!==void 0&&Vu){var Hu=document.createElement("canvas"),ju=Hu.getContext("webgl2");if(ju===null)throw new Error("error occurred when getting webgl2 canvas context");Gu=_u.call(this,{antialias:Nu,preserveDrawingBuffer:Bu,alpha:Du<1,canvas:Hu,context:ju})||this}else Gu=_u.call(this,{antialias:Nu,preserveDrawingBuffer:Bu,alpha:Du<1})||this;return Gu.setPixelRatio(ku),Gu.setClearColor(Lu,Du),Gu.outputEncoding=r$3.sRGBEncoding,Gu.autoClear=!0,Gu}return t$3.__extends(Tu,_u),Tu}(r$3.WebGLRenderer),St=function(_u){function Tu(){return _u!==null&&_u.apply(this,arguments)||this}return t$3.__extends(Tu,_u),Tu.prototype.add=function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.prototype.add.apply(this,Cu)},Tu.prototype.remove=function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.prototype.remove.apply(this,Cu)},Tu}(r$3.Scene),Ct=2*Math.PI,Bt=Math.PI/2;function Tt(_u){return _u>0&&_u<=Ct?_u:(_u%Ct+Ct)%Ct}var Pt,Rt,kt,Dt,Lt=function(_u){function Tu(Cu){var Pu=_u.call(this,Cu,1,.1,1e3)||this;return Pu.pose={longitude:0,latitude:0,fov:Cu,distance:0,offset:new r$3.Vector3},Pu.computePose(),Pu}return t$3.__extends(Tu,_u),Tu.prototype.computePose=function(){var Cu=this.getWorldDirection(new r$3.Vector3);return this.pose.longitude=Tt(-Math.atan2(Cu.x,-Cu.z)),this.pose.latitude=-Math.asin(Cu.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},Tu.prototype.setFromPose=function(Cu){var Pu,Bu,Ru,Lu,Ou,Du=Tt((Pu=Cu.longitude)!==null&&Pu!==void 0?Pu:this.pose.longitude),$u=Math.max(1e-4-Bt,Math.min(Bt-1e-4,(Bu=Cu.latitude)!==null&&Bu!==void 0?Bu:this.pose.latitude)),ku=(Ru=Cu.fov)!==null&&Ru!==void 0?Ru:this.pose.fov,Fu=(Lu=Cu.distance)!==null&&Lu!==void 0?Lu:this.pose.distance,Nu=(Ou=Cu.offset)!==null&&Ou!==void 0?Ou:this.pose.offset,Vu=function(Gu){var Hu=Math.abs(Math.cos(Gu.latitude));return new r$3.Vector3(-Math.sin(Gu.longitude)*Hu,-Math.sin(Gu.latitude),-Math.cos(Gu.longitude)*Hu)}({longitude:Du,latitude:$u}).normalize();return this.position.set(0,0,0),this.lookAt(Vu),this.position.add(Nu).sub(Vu.clone().setLength(Fu)),this.fov!==ku&&(this.fov=ku,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Du,this.pose.latitude=$u,this.pose.fov=ku,this.pose.distance=Fu,this.pose.offset.copy(Nu),this},Tu.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},Tu}(r$3.PerspectiveCamera),Ot=function(){function _u(Tu,Cu,Pu){this.x=Tu,this.y=Cu,this.z=Pu}return _u.prototype.copy=function(Tu){return this.x=Tu.x,this.y=Tu.y,this.z=Tu.z,this},_u.prototype.set=function(Tu,Cu,Pu){return this.x=Tu,this.y=Cu,this.z=Pu,this},_u.prototype.fromArray=function(Tu,Cu){return Cu===void 0&&(Cu=0),this.x=Tu[Cu],this.y=Tu[Cu+1],this.z=Tu[Cu+2],this},_u.prototype.add=function(Tu){return this.x+=Tu.x,this.y+=Tu.y,this.z+=Tu.z,this},_u.prototype.multiplyScalar=function(Tu){return this.x*=Tu,this.y*=Tu,this.z*=Tu,this},_u.prototype.subVectors=function(Tu,Cu){return this.x=Tu.x-Cu.x,this.y=Tu.y-Cu.y,this.z=Tu.z-Cu.z,this},_u.prototype.dot=function(Tu){return this.x*Tu.x+this.y*Tu.y+this.z*Tu.z},_u.prototype.cross=function(Tu){var Cu=this.x,Pu=this.y,Bu=this.z;return this.x=Pu*Tu.z-Bu*Tu.y,this.y=Bu*Tu.x-Cu*Tu.z,this.z=Cu*Tu.y-Pu*Tu.x,this},_u.prototype.crossVectors=function(Tu,Cu){var Pu=Tu.x,Bu=Tu.y,Ru=Tu.z,Lu=Cu.x,Ou=Cu.y,Du=Cu.z;return this.x=Bu*Du-Ru*Ou,this.y=Ru*Lu-Pu*Du,this.z=Pu*Ou-Bu*Lu,this},_u.prototype.clone=function(){return new _u(this.x,this.y,this.z)},_u}(),Nt=function(_u,Tu,Cu){this.extents=_u,this.startIndex=Tu,this.endIndex=Cu},Ft=function(_u,Tu){this.triangle=_u,this.intersectionPoint=Tu},Qt=(Pt=new Ot(0,0,0),Rt=new Ot(0,0,0),kt=new Ot(0,0,0),Dt=new Ot(0,0,0),function(_u,Tu,Cu,Pu,Bu,Ru){Rt.subVectors(Tu,_u),kt.subVectors(Cu,_u),Dt.crossVectors(Rt,kt);var Lu,Ou=Bu.dot(Dt);if(Ou>0){if(Ru)return null;Lu=1}else{if(!(Ou<0))return null;Lu=-1,Ou=-Ou}Pt.subVectors(Pu,_u);var Du=Lu*Bu.dot(kt.crossVectors(Pt,kt));if(Du<0)return null;var $u=Lu*Bu.dot(Rt.cross(Pt));if($u<0||Du+$u>Ou)return null;var ku=-Lu*Pt.dot(Dt);if(ku<0)return null;var Fu=ku/Ou;return new Ot(0,0,0).copy(Bu).multiplyScalar(Fu).add(Pu)}),Vt=function(_u,Tu){this.min=_u,this.max=Tu};function _t(_u,Tu,Cu){var Pu=new Vt(0,0);Tu.x>=0?(Pu.min=(Cu.extents[0]-_u.x)*Tu.x,Pu.max=(Cu.extents[3]-_u.x)*Tu.x):(Pu.min=(Cu.extents[3]-_u.x)*Tu.x,Pu.max=(Cu.extents[0]-_u.x)*Tu.x);var Bu=new Vt(0,0);if(Tu.y>=0?(Bu.min=(Cu.extents[1]-_u.y)*Tu.y,Bu.max=(Cu.extents[4]-_u.y)*Tu.y):(Bu.min=(Cu.extents[4]-_u.y)*Tu.y,Bu.max=(Cu.extents[1]-_u.y)*Tu.y),Pu.min>Bu.max||Bu.min>Pu.max)return!1;Bu.min>Pu.min&&(Pu.min=Bu.min),Bu.max<Pu.max&&(Pu.max=Bu.max);var Ru=new Vt(0,0);return Tu.z>=0?(Ru.min=(Cu.extents[2]-_u.z)*Tu.z,Ru.max=(Cu.extents[5]-_u.z)*Tu.z):(Ru.min=(Cu.extents[5]-_u.z)*Tu.z,Ru.max=(Cu.extents[2]-_u.z)*Tu.z),!(Pu.min>Ru.max||Ru.min>Pu.max)&&(Ru.min>Pu.min&&(Pu.min=Ru.min),Ru.max<Pu.max&&(Pu.max=Ru.max),!(Pu.max<0))}function Ht(_u,Tu,Cu,Pu,Bu){if(Cu>=Pu)return[0,0,0,0,0,0];for(var Ru=1/0,Lu=1/0,Ou=1/0,Du=-1/0,$u=-1/0,ku=-1/0,Fu=Cu,Nu=void 0,Vu=void 0;Fu<Pu;Fu++)(Vu=Tu[Nu=6*_u[Fu]])<Ru&&(Ru=Vu),(Vu=Tu[Nu+1])<Lu&&(Lu=Vu),(Vu=Tu[Nu+2])<Ou&&(Ou=Vu),(Vu=Tu[Nu+3])>Du&&(Du=Vu),(Vu=Tu[Nu+4])>$u&&($u=Vu),(Vu=Tu[Nu+5])>ku&&(ku=Vu);return[Ru-Bu,Lu-Bu,Ou-Bu,Du+Bu,$u+Bu,ku+Bu]}var qt=function(){function _u(){}return _u.prototype.create=function(Tu){return this.trianglesArray=Tu,this},_u.prototype.splitNode=function(Tu){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var Cu=this.trianglesArray,Pu=Cu.length/9,Bu=new Uint32Array(Pu),Ru=new Float32Array(6*Pu),Lu=[],Ou=1/0,Du=1/0,$u=1/0,ku=-1/0,Fu=-1/0,Nu=-1/0,Vu=0,Gu=0,Hu=0,ju=void 0,Uu=void 0,zu=void 0,Wu=void 0,Qu=void 0,qu=void 0,Yu=void 0;Vu<Pu;Vu++,Gu+=6,Hu+=9)Bu[Vu]=Vu,ju=Wu=Cu[Hu],(Yu=Cu[Hu+3])<ju&&(ju=Yu),Yu>Wu&&(Wu=Yu),(Yu=Cu[Hu+6])<ju&&(ju=Yu),Yu>Wu&&(Wu=Yu),Uu=Qu=Cu[Hu+1],(Yu=Cu[Hu+4])<Uu&&(Uu=Yu),Yu>Qu&&(Qu=Yu),(Yu=Cu[Hu+7])<Uu&&(Uu=Yu),Yu>Qu&&(Qu=Yu),zu=qu=Cu[Hu+2],(Yu=Cu[Hu+5])<zu&&(zu=Yu),Yu>qu&&(qu=Yu),(Yu=Cu[Hu+8])<zu&&(zu=Yu),Yu>qu&&(qu=Yu),ju<Ou&&(Ou=ju),Wu>ku&&(ku=Wu),Uu<Du&&(Du=Uu),Qu>Fu&&(Fu=Qu),zu<$u&&($u=zu),qu>Nu&&(Nu=qu),Ru[Gu]=ju,Ru[Gu+1]=Uu,Ru[Gu+2]=zu,Ru[Gu+3]=Wu,Ru[Gu+4]=Qu,Ru[Gu+5]=qu;var Xc,_h=new Nt([Ou,Du,$u,ku,Fu,Nu],0,Pu);function _d(Ku){for(var Xu=Ku.startIndex,Ju=Ku.endIndex,Zu=Ku.extents,_c=[Zu[3]-Zu[0],Zu[4]-Zu[1],Zu[5]-Zu[2]],_f=[0,1,2].sort(function(Pp,Ep){return _c[Ep]-_c[Pp]}),ep=0;ep<3;ep++){for(var tp=_f[ep],op=Zu[tp]+Zu[tp+3],hp=Xu,cp=Ju-1,Sp=-1,yp=void 0;hp<=cp;)Sp===-1?(yp=Bu[hp],Ru[6*yp+tp]+Ru[6*yp+tp+3]<op?hp++:Sp=yp):(yp=Bu[cp],Ru[6*yp+tp]+Ru[6*yp+tp+3]>=op||(Bu[hp]=yp,Bu[cp]=Sp,Sp=-1,hp++),cp--);if(hp>Xu&&hp<Ju){var Rp=new Nt(Ht(Bu,Ru,Xu,hp,1e-6),Xu,hp);Rp.endIndex-Rp.startIndex>Tu&&Lu.push(Rp);var wp=new Nt(Ht(Bu,Ru,hp,Ju,1e-6),hp,Ju);wp.endIndex-wp.startIndex>Tu&&Lu.push(wp),Ku.node0=Rp,Ku.node1=wp,Ku.startIndex=0,Ku.endIndex=0;break}}}for(Lu.push(_h);Xc=Lu.pop();)_d(Xc);return this.offsetArray=Bu,this.rootNode=_h,this},_u.prototype.intersectRay=function(Tu,Cu,Pu){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Bu,Ru=this.trianglesArray,Lu=this.offsetArray,Ou=this.rootNode,Du=[],$u=[],ku=new Ot(1/Cu.x,1/Cu.y,1/Cu.z),Fu=[Ou];Bu=Fu.pop();)if(_t(Tu,ku,Bu)){Bu.node0&&Fu.push(Bu.node0),Bu.node1&&Fu.push(Bu.node1);for(var Nu=Bu.startIndex;Nu<Bu.endIndex;Nu++)Du.push(Lu[Nu])}for(var Vu=new Ot(0,0,0),Gu=new Ot(0,0,0),Hu=new Ot(0,0,0),ju=new Ot(Tu.x,Tu.y,Tu.z),Uu=new Ot(Cu.x,Cu.y,Cu.z),zu=(Nu=0,void 0),Wu=Du.length;Nu<Wu;Nu++){zu=9*Du[Nu],Vu.x=Ru[zu],Vu.y=Ru[zu+1],Vu.z=Ru[zu+2],Gu.x=Ru[zu+3],Gu.y=Ru[zu+3+1],Gu.z=Ru[zu+3+2],Hu.x=Ru[zu+6],Hu.y=Ru[zu+6+1],Hu.z=Ru[zu+6+2];var Qu=Qt(Vu,Gu,Hu,ju,Uu,Pu);Qu&&$u.push(new Ft([Vu.clone(),Gu.clone(),Hu.clone()],Qu))}return $u},_u.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},_u}(),zt=!1,Kt=[];function Ut(_u){if(_u===void 0&&(_u=!1),_u||!zt){zt=!0;var Tu=Kt.shift();if(Tu){try{Tu()}catch{}at.shared.add(function(){return Ut(!0)},!0,2)}else zt=!1}}function jt(_u){return new Promise(function(Tu,Cu){Kt.push(function(){try{Tu(_u())}catch(Pu){Cu(Pu)}}),Ut()})}function Gt(){var _u={OutWindow:function(){this._windowSize=0}};return _u.OutWindow.prototype.create=function(Tu){this._buffer&&this._windowSize===Tu||(this._buffer=[]),this._windowSize=Tu,this._pos=0,this._streamPos=0},_u.OutWindow.prototype.flush=function(){var Tu=this._pos-this._streamPos;if(Tu!==0){for(;Tu--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},_u.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},_u.OutWindow.prototype.setStream=function(Tu){this.releaseStream(),this._stream=Tu},_u.OutWindow.prototype.init=function(Tu){Tu||(this._streamPos=0,this._pos=0)},_u.OutWindow.prototype.copyBlock=function(Tu,Cu){var Pu=this._pos-Tu-1;for(Pu<0&&(Pu+=this._windowSize);Cu--;)Pu>=this._windowSize&&(Pu=0),this._buffer[this._pos++]=this._buffer[Pu++],this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.putByte=function(Tu){this._buffer[this._pos++]=Tu,this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.getByte=function(Tu){var Cu=this._pos-Tu-1;return Cu<0&&(Cu+=this._windowSize),this._buffer[Cu]},_u.RangeDecoder=function(){},_u.RangeDecoder.prototype.setStream=function(Tu){this._stream=Tu},_u.RangeDecoder.prototype.releaseStream=function(){this._stream=null},_u.RangeDecoder.prototype.init=function(){var Tu=5;for(this._code=0,this._range=-1;Tu--;)this._code=this._code<<8|this._stream.readByte()},_u.RangeDecoder.prototype.decodeDirectBits=function(Tu){for(var Cu,Pu=0,Bu=Tu;Bu--;)this._range>>>=1,Cu=this._code-this._range>>>31,this._code-=this._range&Cu-1,Pu=Pu<<1|1-Cu,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Pu},_u.RangeDecoder.prototype.decodeBit=function(Tu,Cu){var Pu=Tu[Cu],Bu=(this._range>>>11)*Pu;return(2147483648^this._code)<(2147483648^Bu)?(this._range=Bu,Tu[Cu]+=2048-Pu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Bu,this._code-=Bu,Tu[Cu]-=Pu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},_u.initBitModels=function(Tu,Cu){for(;Cu--;)Tu[Cu]=1024},_u.BitTreeDecoder=function(Tu){this._models=[],this._numBitLevels=Tu},_u.BitTreeDecoder.prototype.init=function(){_u.initBitModels(this._models,1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.decode=function(Tu){for(var Cu=1,Pu=this._numBitLevels;Pu--;)Cu=Cu<<1|Tu.decodeBit(this._models,Cu);return Cu-(1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.reverseDecode=function(Tu){for(var Cu,Pu=1,Bu=0,Ru=0;Ru<this._numBitLevels;++Ru)Pu=Pu<<1|(Cu=Tu.decodeBit(this._models,Pu)),Bu|=Cu<<Ru;return Bu},_u.reverseDecode2=function(Tu,Cu,Pu,Bu){for(var Ru,Lu=1,Ou=0,Du=0;Du<Bu;++Du)Lu=Lu<<1|(Ru=Pu.decodeBit(Tu,Cu+Lu)),Ou|=Ru<<Du;return Ou},_u.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new _u.BitTreeDecoder(8),this._numPosStates=0},_u.LenDecoder.prototype.create=function(Tu){for(;this._numPosStates<Tu;++this._numPosStates)this._lowCoder[this._numPosStates]=new _u.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new _u.BitTreeDecoder(3)},_u.LenDecoder.prototype.init=function(){var Tu=this._numPosStates;for(_u.initBitModels(this._choice,2);Tu--;)this._lowCoder[Tu].init(),this._midCoder[Tu].init();this._highCoder.init()},_u.LenDecoder.prototype.decode=function(Tu,Cu){return Tu.decodeBit(this._choice,0)===0?this._lowCoder[Cu].decode(Tu):Tu.decodeBit(this._choice,1)===0?8+this._midCoder[Cu].decode(Tu):16+this._highCoder.decode(Tu)},_u.Decoder2=function(){this._decoders=[]},_u.Decoder2.prototype.init=function(){_u.initBitModels(this._decoders,768)},_u.Decoder2.prototype.decodeNormal=function(Tu){var Cu=1;do Cu=Cu<<1|Tu.decodeBit(this._decoders,Cu);while(Cu<256);return 255&Cu},_u.Decoder2.prototype.decodeWithMatchByte=function(Tu,Cu){var Pu,Bu,Ru=1;do if(Pu=Cu>>7&1,Cu<<=1,Ru=Ru<<1|(Bu=Tu.decodeBit(this._decoders,(1+Pu<<8)+Ru)),Pu!==Bu){for(;Ru<256;)Ru=Ru<<1|Tu.decodeBit(this._decoders,Ru);break}while(Ru<256);return 255&Ru},_u.LiteralDecoder=function(){},_u.LiteralDecoder.prototype.create=function(Tu,Cu){var Pu;if(!this._coders||this._numPrevBits!==Cu||this._numPosBits!==Tu)for(this._numPosBits=Tu,this._posMask=(1<<Tu)-1,this._numPrevBits=Cu,this._coders=[],Pu=1<<this._numPrevBits+this._numPosBits;Pu--;)this._coders[Pu]=new _u.Decoder2},_u.LiteralDecoder.prototype.init=function(){for(var Tu=1<<this._numPrevBits+this._numPosBits;Tu--;)this._coders[Tu].init()},_u.LiteralDecoder.prototype.getDecoder=function(Tu,Cu){return this._coders[((Tu&this._posMask)<<this._numPrevBits)+((255&Cu)>>>8-this._numPrevBits)]},_u.Decoder=function(){this._outWindow=new _u.OutWindow,this._rangeDecoder=new _u.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new _u.BitTreeDecoder(4),this._lenDecoder=new _u.LenDecoder,this._repLenDecoder=new _u.LenDecoder,this._literalDecoder=new _u.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new _u.BitTreeDecoder(6),this._posSlotDecoder[1]=new _u.BitTreeDecoder(6),this._posSlotDecoder[2]=new _u.BitTreeDecoder(6),this._posSlotDecoder[3]=new _u.BitTreeDecoder(6)},_u.Decoder.prototype.setDictionarySize=function(Tu){return!(Tu<0)&&(this._dictionarySize!==Tu&&(this._dictionarySize=Tu,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},_u.Decoder.prototype.setLcLpPb=function(Tu,Cu,Pu){var Bu=1<<Pu;return!(Tu>8||Cu>4||Pu>4)&&(this._literalDecoder.create(Cu,Tu),this._lenDecoder.create(Bu),this._repLenDecoder.create(Bu),this._posStateMask=Bu-1,!0)},_u.Decoder.prototype.init=function(){var Tu=4;for(this._outWindow.init(!1),_u.initBitModels(this._isMatchDecoders,192),_u.initBitModels(this._isRep0LongDecoders,192),_u.initBitModels(this._isRepDecoders,12),_u.initBitModels(this._isRepG0Decoders,12),_u.initBitModels(this._isRepG1Decoders,12),_u.initBitModels(this._isRepG2Decoders,12),_u.initBitModels(this._posDecoders,114),this._literalDecoder.init();Tu--;)this._posSlotDecoder[Tu].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},_u.Decoder.prototype.decode=function(Tu,Cu,Pu){var Bu,Ru,Lu,Ou,Du,$u,ku=0,Fu=0,Nu=0,Vu=0,Gu=0,Hu=0,ju=0;for(this._rangeDecoder.setStream(Tu),this._outWindow.setStream(Cu),this.init();Pu<0||Hu<Pu;)if(Bu=Hu&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(ku<<4)+Bu)===0)Ru=this._literalDecoder.getDecoder(Hu++,ju),ju=ku>=7?Ru.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Fu)):Ru.decodeNormal(this._rangeDecoder),this._outWindow.putByte(ju),ku=ku<4?0:ku-(ku<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,ku)===1)Lu=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,ku)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(ku<<4)+Bu)===0&&(ku=ku<7?9:11,Lu=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,ku)===0?Ou=Nu:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,ku)===0?Ou=Vu:(Ou=Gu,Gu=Vu),Vu=Nu),Nu=Fu,Fu=Ou),Lu===0&&(Lu=2+this._repLenDecoder.decode(this._rangeDecoder,Bu),ku=ku<7?8:11);else if(Gu=Vu,Vu=Nu,Nu=Fu,Lu=2+this._lenDecoder.decode(this._rangeDecoder,Bu),ku=ku<7?7:10,(Du=this._posSlotDecoder[Lu<=5?Lu-2:3].decode(this._rangeDecoder))>=4){if(Fu=(2|1&Du)<<($u=(Du>>1)-1),Du<14)Fu+=_u.reverseDecode2(this._posDecoders,Fu-Du-1,this._rangeDecoder,$u);else if(Fu+=this._rangeDecoder.decodeDirectBits($u-4)<<4,(Fu+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(Fu===-1)break;return!1}}else Fu=Du;if(Fu>=Hu||Fu>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Fu,Lu),Hu+=Lu,ju=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},_u.Decoder.prototype.setDecoderProperties=function(Tu){var Cu,Pu,Bu,Ru,Lu;return!(Tu.size<5)&&(Pu=(Cu=Tu.readByte())%9,Bu=(Cu=~~(Cu/9))%5,Ru=~~(Cu/5),!!this.setLcLpPb(Pu,Bu,Ru)&&(Lu=Tu.readByte(),Lu|=Tu.readByte()<<8,Lu|=Tu.readByte()<<16,Lu+=16777216*Tu.readByte(),this.setDictionarySize(Lu)))},_u.decompress=function(Tu,Cu,Pu,Bu){var Ru=new _u.Decoder;if(!Ru.setDecoderProperties(Tu))throw"Incorrect stream properties";if(!Ru.decode(Cu,Pu,Bu))throw"Error in data stream";return!0},_u.decompressFile=function(Tu,Cu){var Pu,Bu=new _u.Decoder;if(!Bu.setDecoderProperties(Tu))throw"Incorrect stream properties";if(Pu=Tu.readByte(),Pu|=Tu.readByte()<<8,Pu|=Tu.readByte()<<16,Pu+=16777216*Tu.readByte(),Tu.readByte(),Tu.readByte(),Tu.readByte(),Tu.readByte(),!Bu.decode(Tu,Cu,Pu))throw"Error in data stream";return!0},_u}var Wt=Gt(),Xt=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Gt.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,Tu,Cu){try{var Pu={data:Tu,offset:0,readByte:function(){return this.data[this.offset++]}},Bu=Pu.data.length,Ru={data:[],offset:0,writeByte:function(Du){var $u=Math.floor(this.offset/Bu);this.data[$u]||(this.data[$u]=new Uint8Array(Bu)),this.data[$u][this.offset%Bu]=Du,this.offset++}};_u.decompressFile(Pu,Ru);for(var Lu=new Uint8Array(Ru.offset),Ou=0;Ou<Ru.offset;Ou++)Lu[Ou]=Ru.data[Math.floor(Ou/Bu)][Ou%Bu];Cu(null,Lu)}catch(Du){Cu(Du)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(_u){for(var Tu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cu=new Uint8Array(256),Pu=0;Pu<Tu.length;Pu++)Cu[Tu.charCodeAt(Pu)]=Pu;var Bu,Ru,Lu,Ou,Du,$u=.75*_u.length,ku=_u.length,Fu=0;_u[_u.length-1]==="="&&($u--,_u[_u.length-2]==="="&&$u--);var Nu=new ArrayBuffer($u),Vu=new Uint8Array(Nu);for(Bu=0;Bu<ku;Bu+=4)Ru=Cu[_u.charCodeAt(Bu)],Lu=Cu[_u.charCodeAt(Bu+1)],Ou=Cu[_u.charCodeAt(Bu+2)],Du=Cu[_u.charCodeAt(Bu+3)],Vu[Fu++]=Ru<<2|Lu>>4,Vu[Fu++]=(15&Lu)<<4|Ou>>2,Vu[Fu++]=(3&Ou)<<6|63&Du;return Nu}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,Tu,Cu){try{var Pu=new WebAssembly.Memory({initial:16}),Bu=new WebAssembly.Module(_u),Ru=new WebAssembly.Instance(Bu,{env:{memory:Pu,abort:function(){Cu(new Error("webAssembly abort"))}}}).exports,Lu=Ru.newU8Array(Tu.length);new Uint8Array(Pu.buffer,Lu+24,Tu.length).set(Tu);var Ou=Ru.decode(Lu),Du=new Uint32Array(Pu.buffer,Ou,4),$u=Du[0],ku=Du[2],Fu=Du[3];$u?Cu(null,new Uint8Array(Pu.buffer,Fu+24,ku).slice(0,ku)):Cu(new Error("lzma deocder error"))}catch(Nu){Cu(Nu)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Yt=typeof Worker!="undefined"&&typeof Blob!="undefined",Zt="";if(Yt)try{var Jt=new Blob([Xt],{type:"text/javascript"});Zt=URL.createObjectURL(Jt)}catch(_u){}var $t=function(){function _u(){var Tu=this;if(!Yt)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var Cu=this.worker=new Worker(Zt);Cu.onmessage=function(Pu){var Bu=Pu.data,Ru=Bu.id,Lu=Bu.result,Ou=Bu.error,Du=Tu.getKey(Ru);Tu.requests[Du]&&(Ou?Tu.requests[Du](new Error(Ou)):Tu.requests[Du](null,Lu),delete Tu.requests[Du])},Cu.onerror=function(Pu){return console.error(Pu)}}return _u.prototype.getKey=function(Tu){return"key_"+String(Tu)},_u.prototype.decompress=function(Tu,Cu){var Pu=++this.callCounter;this.requests[this.getKey(Pu)]=Cu,this.worker.postMessage({type:"decompress",id:Pu,data:Tu},[Tu.buffer])},_u.prototype.terminate=function(){this.worker.terminate()},_u.support=Yt,_u}();function ei(_u){return Array.prototype.reduce.call(_u,function(Tu,Cu,Pu){return Tu|Cu<<8*Pu},0)}function ti(_u){var Tu=new Uint8Array(_u),Cu=ei(Tu.slice(0,4));if(Cu>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Pu=[],Bu=[],Ru=4+4*Cu,Lu=0;Lu<Cu;Lu++)Bu[Lu]=ei(Tu.slice(4+4*Lu,8+4*Lu)),Pu[Lu]=Lu===Cu-1?Tu.subarray(Ru,Ru+Bu[Lu]):Tu.slice(Ru,Ru+Bu[Lu]),Ru+=Bu[Lu];return $t.support?function(Ou){for(var Du=[],$u=Ou.length,ku=function(Nu){Du.push(new Promise(function(Vu,Gu){var Hu=new $t;Hu.decompress(Ou[Nu],function(ju,Uu){if(Hu.terminate(),ju)return Gu(ju);Vu(Uu)})}))},Fu=0;Fu<$u;Fu++)ku(Fu);return Promise.all(Du)}(Pu):Promise.resolve(function(Ou){for(var Du,$u=[],ku=Ou.length,Fu=function(Vu){var Gu={data:Ou[Vu],offset:0,readByte:function(){return this.data[this.offset++]}},Hu=Gu.data.length,ju={data:[],offset:0,writeByte:function(zu){var Wu=Math.floor(this.offset/Hu);this.data[Wu]||(this.data[Wu]=new Uint8Array(Hu)),this.data[Wu][this.offset%Hu]=zu,this.offset++}};Wt.decompressFile(Gu,ju),Du=new Uint8Array(ju.offset);for(var Uu=0;Uu<ju.offset;Uu++)Du[Uu]=ju.data[Math.floor(Uu/Hu)][Uu%Hu];$u.push(Du)},Nu=0;Nu<ku;Nu++)Fu(Nu);return $u}(Pu))}function ii(_u,Tu){for(var Cu={},Pu=0,Bu=Tu;Pu<Bu.length;Pu++){var Ru=Bu[Pu];Ru in _u&&(Cu[Ru]=_u[Ru])}return Cu}var ni=!1;try{ni=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(_u){}var ri=[];function oi(){var _u=this.src;this.onerror=this.onload=Qe,this.removeAttribute("src"),/^blob\:/.test(_u)&&URL.revokeObjectURL(_u),this.close=Qe}function si(){ri.push(this)}function ai(){return Object.assign(new Image,{crossOrigin:"",close:oi})}function li(_u){return new Promise(function(Tu,Cu){var Pu=ai();Pu.onload=function(){Pu.onload=Pu.onerror=Qe,setTimeout(function(){return Tu(Pu)},30)},Pu.onerror=function(){var Bu=Pu.src;Pu.onload=Pu.onerror=Qe,Pu.close(),Cu(new Error("image load error: ".concat(Bu)))},Pu.src=URL.createObjectURL(_u)})}function ui(_u,Tu){if(Tu&&(_u.width>Tu.width||_u.height>Tu.height)){var Cu=function(Du,$u){var ku=ri.shift();if(ku)return ku.width=Du,ku.height=$u,ku;if(ni){var Fu=new OffscreenCanvas(Du,$u);return Object.assign(Fu,{close:si})}return Fu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(Fu,{close:si})}(Math.min(_u.width,Tu.width),Math.min(_u.height,Tu.height)),Pu=Cu.getContext("2d");Pu.clearRect(0,0,Cu.width,Cu.height),Pu.drawImage(_u,0,0,Cu.width,Cu.height),_u.close();var Bu=new r$3.Texture(Cu);Bu.needsUpdate=!0,Bu.flipY=!0;var Ru=Bu.dispose;return Bu.dispose=function(){Cu.close(),Ru.call(Bu),delete Bu.dispose},Bu}var Lu=new r$3.Texture(_u);Lu.needsUpdate=!0,Lu.minFilter=r$3.LinearFilter,Lu.magFilter=r$3.LinearFilter,Lu.flipY=!0;var Ou=Lu.dispose;return Lu.dispose=function(){_u.close(),Ou.call(Lu),delete Lu.dispose},Lu}var hi=new r$3.WebGLRenderTarget(1,1),ci=new r$3.OrthographicCamera(-1,1,1,-1,0,1),di=new r$3.BufferGeometry;di.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var pi=new r$3.Mesh(di),fi=new r$3.Scene;fi.add(pi);var Ai,gi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi(_u,Tu,Cu){return Tu.flipY!==void 0&&(_u.flipY=Tu.flipY),Tu.format!==void 0&&(_u.format=Tu.format),Tu.encoding!==void 0&&(_u.encoding=Tu.encoding),Tu.minFilter!==void 0&&(_u.minFilter=Tu.minFilter),Tu.magFilter!==void 0&&(_u.magFilter=Tu.magFilter),Cu?new Promise(function(Pu){at.shared.add(function(){try{var Bu=Cu.getRenderTarget();Cu.setRenderTarget(hi),_u instanceof r$3.CubeTexture?(pi.material=mi,mi.uniforms.map.value=_u,Cu.render(fi,ci),mi.uniforms.map.value=null):(pi.material=gi,gi.uniforms.map.value=_u,Cu.render(fi,ci),mi.uniforms.map.value=null),Cu.setRenderTarget(Bu),Pu(_u)}catch{Pu(_u)}},!0,1)}):Promise.resolve(_u)}var yi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,bi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},wi=((Ai={})[bi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai[bi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai),Ei=function(){function _u(){}return _u.setTranscoderPath=function(Tu){return this.transcoderPath=Tu,this},_u.setWorkerLimit=function(Tu){return this.workerLimit=Tu,this},_u.isInitialized=function(){return this.workerPool.filter(function(Tu){return Tu._initialized}).length!==0},_u.detectSupport=function(Tu){var Cu=this.workerConfig;if(Cu.astcSupported=!!Tu.extensions.get("WEBGL_compressed_texture_astc"),Cu.bptcSupported=!!Tu.extensions.get("EXT_texture_compression_bptc"),Cu.etcSupported=!!Tu.extensions.get("WEBGL_compressed_texture_etc1"),Cu.dxtSupported=!!Tu.extensions.get("WEBGL_compressed_texture_s3tc"),Cu.pvrtcSupported=!!Tu.extensions.get("WEBGL_compressed_texture_pvrtc")||!!Tu.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),Cu.astcSupported)Cu.format=_u.BASIS_FORMAT.cTFASTC_4x4;else if(Cu.bptcSupported)Cu.format=_u.BASIS_FORMAT.cTFBC7_M5;else if(Cu.dxtSupported)Cu.format=_u.BASIS_FORMAT.cTFBC3;else if(Cu.pvrtcSupported)Cu.format=_u.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!Cu.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");Cu.format=_u.BASIS_FORMAT.cTFETC1}return this},_u.createTexture=function(Tu){var Cu,Pu,Bu=this,Ru=Tu.byteLength,Lu=this._allocateWorker(Ru).then(function(Ou){return Cu=Ou,Pu=Bu.workerNextTaskID++,new Promise(function(Du,$u){Cu._callbacks[Pu]={resolve:Du,reject:$u},Cu.postMessage({type:"transcode",id:Pu,buffer:Tu},[Tu])})}).then(function(Ou){var Du,$u=Bu.workerConfig,ku=Ou.width,Fu=Ou.height,Nu=Ou.mipmaps;switch(Ou.format){case bi.cTFASTC_4x4:Du=new r$3.CompressedTexture(Nu,ku,Fu,r$3.RGBA_ASTC_4x4_Format);break;case bi.cTFBC1:case bi.cTFBC3:Du=new r$3.CompressedTexture(Nu,ku,Fu,wi[$u.format],r$3.UnsignedByteType);break;case bi.cTFETC1:Du=new r$3.CompressedTexture(Nu,ku,Fu,r$3.RGB_ETC1_Format);break;case bi.cTFPVRTC1_4_RGB:Du=new r$3.CompressedTexture(Nu,ku,Fu,r$3.RGB_PVRTC_4BPPV1_Format);break;case bi.cTFPVRTC1_4_RGBA:Du=new r$3.CompressedTexture(Nu,ku,Fu,r$3.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Du.minFilter=Nu.length===1?r$3.LinearFilter:r$3.LinearMipmapLinearFilter,Du.magFilter=r$3.LinearFilter,Du.generateMipmaps=!1,Du.needsUpdate=!0,Du});return Lu.catch(function(){return!0}).then(function(){Cu&&Pu&&(Cu._taskLoad-=Ru,delete Cu._callbacks[Pu])}),Lu},_u._initTranscoder=function(){var Tu=this;if(!this.transcoderPending){var Cu=new r$3.FileLoader;Cu.setPath(this.transcoderPath);var Pu=new Promise(function(Lu,Ou){Cu.load("basis_transcoder.js",Lu,void 0,Ou)}),Bu=new r$3.FileLoader;Bu.setPath(this.transcoderPath),Bu.setResponseType("arraybuffer");var Ru=new Promise(function(Lu,Ou){Bu.load("basis_transcoder.wasm",Lu,void 0,Ou)});this.transcoderPending=Promise.all([Pu,Ru]).then(function(Lu){var Ou=Lu[0],Du=Lu[1],$u=["/* basis_transcoder.js */",Ou,"/* worker */",yi].join(`
`);Tu.workerSourceURL=URL.createObjectURL(new Blob([$u])),Tu.transcoderBinary=Du})}return this.transcoderPending},_u._allocateWorker=function(Tu){var Cu=this;return this._initTranscoder().then(function(){if(Cu.workerPool.length<Cu.workerLimit){var Pu=function(Ru){var Lu=new Worker(Ru);return Object.assign(Lu,{_callbacks:{},_initialized:!1,_taskLoad:0})}(Cu.workerSourceURL);Pu._callbacks={},Pu._initialized=!1,Pu._taskLoad=0,Pu.postMessage({type:"init",config:Cu.workerConfig,transcoderBinary:Cu.transcoderBinary}),Pu.onmessage=function(Ru){var Lu=Ru.data;switch(Lu.type){case"initialized":Pu._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Pu._callbacks[Lu.id].resolve(Lu);break;case"error":Pu._callbacks[Lu.id].reject(Lu);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Lu.type,'"'))}},Cu.workerPool.push(Pu)}else Cu.workerPool.sort(function(Ru,Lu){return Ru._taskLoad>Lu._taskLoad?-1:1});var Bu=Cu.workerPool[Cu.workerPool.length-1];return Bu._taskLoad+=Tu,Bu})},_u.prototype.dispose=function(){for(var Tu=0;Tu<_u.workerPool.length;Tu++)_u.workerPool[Tu].terminate();return _u.workerPool.length=0,this},_u.BASIS_FORMAT=bi,_u.DXT_FORMAT=xi,_u.DXT_FORMAT_MAP=wi,_u.transcoderPath="https://vr-public.realsee-cdn.cn/release/static/image/release/five/basis/",_u.transcoderBinary=null,_u.transcoderPending=null,_u.workerLimit=1,_u.workerPool=[],_u.workerNextTaskID=1,_u.workerSourceURL="",_u.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},_u}();function Mi(_u){var Tu=_u.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return Tu?Tu[1]:location.protocol}var Ii=function(){function _u(Tu){this.timeout=Tu.timeout,this.allowHosts=Tu.allowHosts,this.requestProxy=Tu.requestProxy,this.networkSubscribe=Tu.networkSubscribe}return _u.prototype.setAllowHosts=function(Tu){this.allowHosts=Tu},_u.prototype.setRequestProxy=function(Tu){this.requestProxy=Tu},_u.prototype.setNetworkSubscribe=function(Tu){this.networkSubscribe=Tu},_u.prototype.load=function(Tu,Cu,Pu,Bu,Ru,Lu){var Ou;Cu===void 0&&(Cu={}),Pu===void 0&&(Pu=Qe),Bu===void 0&&(Bu=Qe),Ru===void 0&&(Ru=Qe);var Du=Mi(Tu),$u={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},ku=(Ou=Cu.viaAjax)!==null&&Ou!==void 0&&Ou,Fu=Je(Tu),Nu=/^https?:$/.test(Du),Vu=/\.basis$/.test($e(Tu).split("?")[0]);if(Fu?ku=!0:Nu||(ku=!1),ku){if(Vu){var Gu=null,Hu="arraybuffer";return Cu.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):it(Tu,t$3.__assign(t$3.__assign({},$u),{responseType:Hu}),void 0,void 0,Ru).then(function(Wu){return Gu=Wu.meta,Ei.createTexture(Wu.body)}).then(function(Wu){return Cu.preInit!==!1?vi(Wu,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii(Cu,["wrapS","wrapT"])),Lu):Wu}).then(function(Wu){var Qu={meta:Gu,body:Wu};return Pu(Qu),Qu}).catch(function(Wu){return Bu(Wu),Promise.reject(Wu)})}return Hu="blob",it(Tu,t$3.__assign(t$3.__assign({},$u),{responseType:Hu}),void 0,void 0,Ru).then(function(Wu){return li(Wu.body)}).then(function(Wu){return ui(Wu,Cu.maxSize)}).then(function(Wu){return Cu.preInit!==!1?vi(Wu,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Cu),Lu):Wu}).then(function(Wu){var Qu={meta:null,body:Wu};return Pu(Qu),Qu}).catch(function(Wu){return Bu(Wu),Promise.reject(Wu)})}if(Vu){var ju=new Error("cannot load basis texture via image");return Bu(ju),Promise.reject(ju)}var Uu=null,zu=ai();return rt(Tu,$u,void 0,void 0,Ru,zu).then(function(Wu){return Uu=Wu.meta,ui(Wu.body,Cu.maxSize)}).then(function(Wu){return Cu.preInit!==!1?vi(Wu,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Cu),Lu):Wu}).then(function(Wu){var Qu={meta:Uu,body:Wu};return Pu(Qu),Qu}).catch(function(Wu){return zu.close(),Bu(Wu),Promise.reject(Wu)})},_u.prototype.loadCube=function(Tu,Cu,Pu,Bu,Ru,Lu){var Ou;Cu===void 0&&(Cu={}),Pu===void 0&&(Pu=Qe),Bu===void 0&&(Bu=Qe),Ru===void 0&&(Ru=Qe),performance.now(),Array.isArray(Tu)||(Tu=[Tu.right,Tu.left,Tu.up,Tu.down,Tu.front,Tu.back]);for(var Du={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},$u=[],ku=[0,0,0,0,0,0],Fu=[],Nu=function(Hu){var ju=Tu[Hu],Uu=Mi(ju),zu=function(Xu){ku[Hu]=Xu,Ru(ku.reduce(function(Ju,Zu){return Ju+Zu},0)/6)},Wu=(Ou=Cu.viaAjax)!==null&&Ou!==void 0&&Ou,Qu=/^https?:$/.test(Uu),qu=Je(ju),Yu=/\.basis$/.test($e(ju).split("?")[0]);if(qu?Wu=!0:Qu||(Wu=!1),Wu)if(Yu){var Xc="arraybuffer",_h=it(ju,t$3.__assign(t$3.__assign({},Du),{responseType:Xc}),void 0,void 0,zu).then(function(Xu){return Fu[Hu]=Xu.meta,Ei.createTexture(Xu.body)});$u.push(_h)}else Xc="blob",_h=it(ju,t$3.__assign(t$3.__assign({},Du),{responseType:Xc}),void 0,void 0,zu).then(function(Xu){return Fu[Hu]=Xu.meta,li(Xu.body)}),$u.push(_h);else{if(Yu){var _d=new Error("cannot load basis texture via image");return Bu(_d),{value:Promise.reject(_d)}}var Ku=ai();_h=rt(ju,Du,void 0,void 0,zu,Ku).then(function(Xu){return Fu[Hu]=Xu.meta,Xu.body}).catch(function(Xu){return Ku.close(),Promise.reject(Xu)}),$u.push(_h)}},Vu=0;Vu<6;Vu++){var Gu=Nu(Vu);if(typeof Gu=="object")return Gu.value}return Promise.all($u).then(function(Hu){return performance.now(),Hu[0]instanceof r$3.CompressedTexture?function(ju){var Uu=new r$3.CubeTexture(ju);Uu.needsUpdate=!0;var zu=Uu.dispose;return Uu.dispose=function(){for(var Wu=0,Qu=ju;Wu<Qu.length;Wu++)Qu[Wu].dispose();zu.call(Uu),delete Uu.dispose},Uu.isCompressedTexture=!0,Uu.format=ju[0].format,Uu.minFilter=ju[0].minFilter,Uu.magFilter=ju[0].magFilter,Uu}(Hu):function(ju){var Uu=new r$3.CubeTexture(ju);Uu.needsUpdate=!0,Uu.minFilter=r$3.LinearFilter,Uu.magFilter=r$3.LinearFilter,Uu.flipY=!1;var zu=Uu.dispose;return Uu.dispose=function(){for(var Wu=0,Qu=ju;Wu<Qu.length;Wu++)Qu[Wu].close();zu.call(Uu),delete Uu.dispose},Uu}(Hu)}).then(function(Hu){return Cu.preInit!==!1?Hu.isCompressedTexture?vi(Hu,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii(Cu,["wrapS","wrapT"])),Lu):vi(Hu,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},Cu),Lu):Hu}).then(function(Hu){var ju={body:Hu,meta:Fu};return Pu(ju),ju}).catch(function(Hu){for(var ju=0,Uu=$u;ju<Uu.length;ju++)Uu[ju].then(function(zu){zu instanceof r$3.Texture?zu.dispose():zu.close()}).catch(Qe);return Bu(Hu),Promise.reject(Hu)})},_u}();const Si=o$2.Reader,Ci=o$2.util,Bi=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Bi.Model=(()=>{function _u(Tu){if(this.chunks=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.chunks=Ci.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Si||(Tu=Si.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new Bi.Model;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Bu.chunks&&Bu.chunks.length||(Bu.chunks=[]),Bu.chunks.push(Bi.Chunk.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}return Bu},_u})();Bi.Chunk=(()=>{function _u(Tu){if(Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.vertices=null,_u.prototype.faces=null,_u.prototype.name="",_u.prototype.texture="",_u.decode=function(Tu,Cu){Tu instanceof Si||(Tu=Si.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new Bi.Chunk;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Bu.vertices=Bi.Vertices.decode(Tu,Tu.uint32());break;case 2:Bu.faces=Bi.Faces.decode(Tu,Tu.uint32());break;case 3:Bu.name=Tu.string();break;case 4:Bu.texture=Tu.string();break;default:Tu.skipType(7&Ru)}}if(!Bu.hasOwnProperty("vertices"))throw Ci.ProtocolError("missing required 'vertices'",{instance:Bu});if(!Bu.hasOwnProperty("faces"))throw Ci.ProtocolError("missing required 'faces'",{instance:Bu});if(!Bu.hasOwnProperty("name"))throw Ci.ProtocolError("missing required 'name'",{instance:Bu});return Bu},_u})(),Bi.Vertices=(()=>{function _u(Tu){if(this.xyz=[],this.uvs=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.xyz=Ci.emptyArray,_u.prototype.uvs=Ci.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Si||(Tu=Si.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new Bi.Vertices;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Bu.xyz&&Bu.xyz.length||(Bu.xyz=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.xyz.push(Tu.float())}else Bu.xyz.push(Tu.float());break;case 2:if(Bu.uvs&&Bu.uvs.length||(Bu.uvs=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.uvs.push(Tu.float())}else Bu.uvs.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Bu},_u})(),Bi.Faces=(()=>{function _u(Tu){if(this.indices=[],this.normals=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.indices=Ci.emptyArray,_u.prototype.normals=Ci.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Si||(Tu=Si.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new Bi.Faces;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Bu.indices&&Bu.indices.length||(Bu.indices=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.indices.push(Tu.uint32())}else Bu.indices.push(Tu.uint32());break;case 2:if(Bu.normals&&Bu.normals.length||(Bu.normals=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.normals.push(Tu.float())}else Bu.normals.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Bu},_u})();var Pi=new r$3.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1).elements;function Ri(_u){var Tu=_u.match(/(group|floor)-?(\d+)/);return Tu?parseInt(Tu[2],10):0}function ki(_u){var Tu=_u.match(/(chunk)-?(\d+)/);return Tu?parseInt(Tu[2],10):0}function Di(_u){return 1e6*Ri(_u.name)+1e3*ki(_u.name)+function(Tu){var Cu=Tu.match(/(sub)-?(\d+)/);return Cu?parseInt(Cu[2],10):0}(_u.name)}function Li(_u,Tu,Cu,Pu,Bu){var Ru=t$3.__assign({key:"texture.pbm",basisLoaderInitialized:Ei.isInitialized()},ii(Tu,["format","quality","size","sharpen","mappings"]));return _u=Tu.transform?Tu.transform(_u,Ru):ct(_u,Ru),new Ii({allowHosts:Cu,requestProxy:Pu,networkSubscribe:Bu}).load(_u,{wrapS:r$3.ClampToEdgeWrapping,wrapT:r$3.ClampToEdgeWrapping,minFilter:r$3.LinearFilter,maxSize:typeof Ru.size=="number"?new r$3.Vector2(Ru.size,Ru.size):void 0,preInit:!0}).then(function(Lu){var Ou=Lu.body;return Ou.needsUpdate=!0,Ou})}function Oi(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){Bu===void 0&&(Bu={});for(var Du=function(_c){for(var _f,ep,tp=[],op=!0,hp=0,cp=_c.chunks;hp<cp.length;hp++)if(!(ym=cp[hp]).faces.normals||ym.faces.normals.length===0){op=!1;break}for(var Sp=[],yp=0,Rp=_c.chunks.sort(function(sm,wm){return Di(sm)-Di(wm)});yp<Rp.length;yp++){var wp=Ri((ym=Rp[yp]).name);Sp[wp]||(Sp[wp]=[]),Sp[wp].push(ym)}for(var Pp=0;Pp<Sp.length;Pp++){var Ep=Sp[Pp];if(Ep)if(op){for(var ip=0,rp=0;rp<Ep.length;rp++)ip+=(ym=Ep[rp]).faces.indices.length;for(var fp=3*ip,up=2*ip,pp=3*ip,gp=new ArrayBuffer(4*fp+4*up+4*pp),Ap=new Float32Array(gp,0,fp),Mp=new Float32Array(gp,4*fp,up),$p=new Float32Array(gp,4*fp+4*up,pp),Tp=[],np=[1/0,1/0,1/0,-1/0,-1/0,-1/0],sp=0,Ip=0;Ip<Ep.length;Ip++){var Cp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Vp=(ym=Ep[Ip]).vertices.xyz,Fp=ym.vertices.uvs,Gp=ym.faces.indices,qp=ym.faces.normals,Wp=Gp.length;for(rp=0;rp<Wp;rp++){var Jp=Gp[rp],Hp=Vp[3*Jp],Kp=Vp[3*Jp+1],jp=Vp[3*Jp+2],Yp=1/(Pi[3]*Hp+Pi[7]*Kp+Pi[11]*jp+Pi[15]),_p=(Pi[0]*Hp+Pi[4]*Kp+Pi[8]*jp+Pi[12])*Yp,Qp=(Pi[1]*Hp+Pi[5]*Kp+Pi[9]*jp+Pi[13])*Yp,Zp=(Pi[2]*Hp+Pi[6]*Kp+Pi[10]*jp+Pi[14])*Yp;Ap[3*sp+3*rp]=_p,Ap[3*sp+3*rp+1]=Qp,Ap[3*sp+3*rp+2]=Zp,Mp[2*sp+2*rp]=Fp[2*Jp],Mp[2*sp+2*rp+1]=Fp[2*Jp+1];var tm=3*Math.floor(rp/3),em=qp[tm],lm=qp[tm+1],pm=qp[tm+2],mm=1/(Pi[3]*em+Pi[7]*lm+Pi[11]*pm+Pi[15]),Sm=(Pi[0]*em+Pi[4]*lm+Pi[8]*pm+Pi[12])*mm,dm=(Pi[1]*em+Pi[5]*lm+Pi[9]*pm+Pi[13])*mm,_m=(Pi[2]*em+Pi[6]*lm+Pi[10]*pm+Pi[14])*mm;$p[3*sp+3*rp]=Sm,$p[3*sp+3*rp+1]=dm,$p[3*sp+3*rp+2]=_m,_p<Cp[0]&&(Cp[0]=_p),Qp<Cp[1]&&(Cp[1]=Qp),Zp<Cp[2]&&(Cp[2]=Zp),_p>Cp[3]&&(Cp[3]=_p),Qp>Cp[4]&&(Cp[4]=Qp),Zp>Cp[5]&&(Cp[5]=Zp)}Cp[0]<np[0]&&(np[0]=Cp[0]),Cp[1]<np[1]&&(np[1]=Cp[1]),Cp[2]<np[2]&&(np[2]=Cp[2]),Cp[3]>np[3]&&(np[3]=Cp[3]),Cp[4]>np[4]&&(np[4]=Cp[4]),Cp[5]>np[5]&&(np[5]=Cp[5]),Tp.push({materialIndex:Ip,name:ym.name,chunkName:ki(ym.name),start:sp,count:ym.faces.indices.length,texture:(_f=ym.texture)!==null&&_f!==void 0?_f:void 0}),sp+=Wp}tp.push({floorIndex:Pp,vertices:Ap,uvs:Mp,indices:null,normals:$p,groups:Tp,extents:np})}else{ip=0;var xm=0;for(rp=0;rp<Ep.length;rp++)xm+=(ym=Ep[rp]).vertices.xyz.length/3,ip+=ym.faces.indices.length;fp=3*xm,up=2*xm,pp=3*xm;var gm=ip,Mm=(gp=new ArrayBuffer(4*fp+4*up+4*pp+4*gm),Ap=new Float32Array(gp,0,fp),Mp=new Float32Array(gp,4*fp,up),$p=new Float32Array(gp,4*fp+4*up,pp),new Uint32Array(gp,4*fp+4*up+4*pp,gm)),Bm=(Tp=[],np=[1/0,1/0,1/0,-1/0,-1/0,-1/0],0);for(sp=0,Ip=0;Ip<Ep.length;Ip++){Cp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Vp=(ym=Ep[Ip]).vertices.xyz,Fp=ym.vertices.uvs,Gp=ym.faces.indices;var ym,mp=Vp.length/3;for(Wp=Gp.length,rp=0;rp<mp;rp++)Hp=Vp[3*rp],Kp=Vp[3*rp+1],jp=Vp[3*rp+2],Yp=1/(Pi[3]*Hp+Pi[7]*Kp+Pi[11]*jp+Pi[15]),_p=(Pi[0]*Hp+Pi[4]*Kp+Pi[8]*jp+Pi[12])*Yp,Qp=(Pi[1]*Hp+Pi[5]*Kp+Pi[9]*jp+Pi[13])*Yp,Zp=(Pi[2]*Hp+Pi[6]*Kp+Pi[10]*jp+Pi[14])*Yp,Ap[3*sp+3*rp]=_p,Ap[3*sp+3*rp+1]=Qp,Ap[3*sp+3*rp+2]=Zp,Mp[2*sp+2*rp]=Fp[2*rp],Mp[2*sp+2*rp+1]=Fp[2*rp+1],_p<Cp[0]&&(Cp[0]=_p),Qp<Cp[1]&&(Cp[1]=Qp),Zp<Cp[2]&&(Cp[2]=Zp),_p>Cp[3]&&(Cp[3]=_p),Qp>Cp[4]&&(Cp[4]=Qp),Zp>Cp[5]&&(Cp[5]=Zp);for(Cp[0]<np[0]&&(np[0]=Cp[0]),Cp[1]<np[1]&&(np[1]=Cp[1]),Cp[2]<np[2]&&(np[2]=Cp[2]),Cp[3]>np[3]&&(np[3]=Cp[3]),Cp[4]>np[4]&&(np[4]=Cp[4]),Cp[5]>np[5]&&(np[5]=Cp[5]),rp=0;rp<Wp;rp++)Mm[Bm+rp]=sp+Gp[rp];Tp.push({materialIndex:Ip,name:ym.name,chunkName:ki(ym.name),start:Bm,count:ym.faces.indices.length,texture:(ep=ym.texture)!==null&&ep!==void 0?ep:void 0}),sp+=mp,Bm+=Wp}for(rp=0;rp<ip;rp+=3){var kp,Lp,Np,Xp,cm,um,im,am,fm,Am,ap,vp,bp,Bp,Up,om;em=void 0,lm=void 0,pm=void 0,kp=3*Mm[rp],Lp=3*Mm[rp+1],Np=3*Mm[rp+2],Xp=Ap[kp],cm=Ap[kp+1],um=Ap[kp+2],im=Ap[Lp],am=Ap[Lp+1],fm=Ap[Lp+2],Am=Ap[Np],em=(vp=Ap[Np+1]-am)*(om=um-fm)-(bp=Ap[Np+2]-fm)*(Up=cm-am),lm=bp*(Bp=Xp-im)-(ap=Am-im)*om,pm=ap*Up-vp*Bp,$p[kp]+=em,$p[kp+1]+=lm,$p[kp+2]+=pm,$p[Lp]+=em,$p[Lp+1]+=lm,$p[Lp+2]+=pm,$p[Np]+=em,$p[Np+1]+=lm,$p[Np+2]+=pm}tp.push({floorIndex:Pp,vertices:Ap,uvs:Mp,indices:Mm,normals:$p,groups:Tp,extents:np})}}return tp}(_u),$u=[],ku=0,Fu=Du;ku<Fu.length;ku++){var Nu=Fu[ku],Vu=Nu.floorIndex,Gu=Nu.vertices,Hu=Nu.uvs,ju=Nu.indices,Uu=Nu.normals,zu=Nu.groups,Wu=Nu.extents,Qu=new r$3.Box3;Qu.min.x=Wu[0],Qu.min.y=Wu[1],Qu.min.z=Wu[2],Qu.max.x=Wu[3],Qu.max.y=Wu[4],Qu.max.z=Wu[5];var qu=new r$3.BufferGeometry;qu.setAttribute("position",new r$3.BufferAttribute(Gu,3)),qu.setAttribute("uv",new r$3.BufferAttribute(Hu,2)),qu.setAttribute("normal",new r$3.BufferAttribute(Uu,3)),ju&&qu.setIndex(new r$3.BufferAttribute(ju,1)),qu.boundingBox=Qu,qu.boundingSphere=Qu.getBoundingSphere(new r$3.Sphere);for(var Yu=0,Xc=zu;Yu<Xc.length;Yu++){var _h=Xc[Yu];qu.addGroup(_h.start,_h.count,_h.materialIndex)}for(var _d=[],Ku=function(_c){var _f=Cu[_c.chunkName]||(_c.texture?Tu+_c.texture:void 0),ep=new Mt;if(_d.push(ep),_f){var tp=void 0;_f in Bu?tp=Bu[_f]:(tp=Li(_f,Pu,Ru,Lu,Ou),Bu[_f]=tp),tp.then(function(op){ep.uniforms.map.value=op,ep.uniforms.exposure.value=3.3},function(){ep.defines.USE_MAP=!1,ep.uniforms.diffuse.value=new r$3.Color(16777215)})}else ep.defines.USE_MAP=!1,ep.uniforms.diffuse.value=new r$3.Color(16777215)},Xu=0,Ju=zu;Xu<Ju.length;Xu++)Ku(_h=Ju[Xu]);var Zu=new ft(qu,_d);Zu.name="model_floor_"+Vu,Zu.floorIndex=Vu,$u.push(Zu)}return{objects:$u,texturePromise:Promise.all(Object.keys(Bu).map(function(_c){return Bu[_c].catch(Qe)})).then(Qe)}}function Ni(_u,Tu){return(_u=Object.assign({},_u)).autoResize!==!1&&(Tu>96?_u.size=Math.min(_u.size||1/0,100):Tu>48?_u.size=Math.min(_u.size||1/0,200):Tu>24?_u.size=Math.min(_u.size||1/0,400):Tu>12?_u.size=Math.min(_u.size||1/0,800):Tu>4&&(_u.size=Math.min(_u.size||1/0,1024))),_u}function Fi(_u){return _u.indexOf("//")===0||/^[0-9a-z]+\:/i.test(_u)}const Qi=o$2.Reader,Vi=o$2.util,_i=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Hi=_i.Model=(()=>{function _u(Tu){if(this.meshes=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.meshes=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Model;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Bu.meshes&&Bu.meshes.length||(Bu.meshes=[]),Bu.meshes.push(_i.Mesh.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}return Bu},_u})();function qi(_u){for(var Tu=[0,0,0],Cu=0;Cu<_u.attributes.normal.array.length/9;Cu++)Tu[0]=_u.attributes.normal.array[9*Cu],Tu[1]=_u.attributes.normal.array[9*Cu+1],Tu[2]=_u.attributes.normal.array[9*Cu+2],_u.attributes.normal.array[9*Cu]=_u.attributes.normal.array[9*Cu+6],_u.attributes.normal.array[9*Cu+1]=_u.attributes.normal.array[9*Cu+7],_u.attributes.normal.array[9*Cu+2]=_u.attributes.normal.array[9*Cu+8],_u.attributes.normal.array[9*Cu+6]=Tu[0],_u.attributes.normal.array[9*Cu+7]=Tu[1],_u.attributes.normal.array[9*Cu+8]=Tu[2];for(Cu=0;Cu<_u.attributes.position.array.length/9;Cu++)Tu[0]=_u.attributes.position.array[9*Cu],Tu[1]=_u.attributes.position.array[9*Cu+1],Tu[2]=_u.attributes.position.array[9*Cu+2],_u.attributes.position.array[9*Cu]=_u.attributes.position.array[9*Cu+6],_u.attributes.position.array[9*Cu+1]=_u.attributes.position.array[9*Cu+7],_u.attributes.position.array[9*Cu+2]=_u.attributes.position.array[9*Cu+8],_u.attributes.position.array[9*Cu+6]=Tu[0],_u.attributes.position.array[9*Cu+7]=Tu[1],_u.attributes.position.array[9*Cu+8]=Tu[2];for(Cu=0;Cu<_u.attributes.uv.array.length/6;Cu++)Tu[0]=_u.attributes.uv.array[6*Cu],Tu[1]=_u.attributes.uv.array[6*Cu+1],_u.attributes.uv.array[6*Cu]=_u.attributes.uv.array[6*Cu+4],_u.attributes.uv.array[6*Cu+1]=_u.attributes.uv.array[6*Cu+5],_u.attributes.uv.array[6*Cu+4]=Tu[0],_u.attributes.uv.array[6*Cu+5]=Tu[1];_u.attributes.normal.needsUpdate=!0,_u.attributes.position.needsUpdate=!0,_u.attributes.uv.needsUpdate=!0}function zi(_u){var Tu=_u.position,Cu=_u.normal,Pu=_u.uv,Bu=_u.uv2,Ru=_u.groups,Lu=new r$3.BufferGeometry;Lu.setAttribute("position",new r$3.BufferAttribute(new Float32Array(Tu.array),3)),Cu&&Lu.setAttribute("normal",new r$3.BufferAttribute(new Float32Array(Cu.array),3)),Pu&&Lu.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(Pu.array),2)),Bu&&Lu.setAttribute("uv2",new r$3.BufferAttribute(new Float32Array(Bu.array),2));for(var Ou=0,Du=Ru;Ou<Du.length;Ou++){var $u=Du[Ou];Lu.addGroup($u.start,$u.count,$u.materialIndex)}return Lu}function Ki(_u,Tu,Cu,Pu,Bu,Ru){if(Ru.hasOwnProperty(_u))return Ru[_u];Fi(_u=_u.split("?")[0])||(_u=Tu+_u),(_u=_u.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(_u="https:"+_u);var Lu=t$3.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ei.isInitialized()},ii(Cu,["quality","format","sharpen","mappings"]));return Ru[_u=Cu.transform?Cu.transform(_u,Lu):ct(_u,Lu)]=Bu.load(_u,{wrapS:r$3.RepeatWrapping,wrapT:r$3.RepeatWrapping}).then(function(Ou){var Du=Ou.body;return Pu&&Du.repeat.copy(Pu),Du.needsUpdate=!0,Du.updateMatrix(),Du})}function Ui(_u,Tu,Cu,Pu,Bu){var Ru=[],Lu=new Mt,Ou=Lu.uniforms;Ou.exposure.value=4.3;var Du=Lu.defines;if(Du.USE_MAP=!1,Du.USE_UV=!1,_u.kd&&(Ou.diffuse.value=new r$3.Color().fromArray(_u.kd.rgb)),_u.mapkd){var $u=null;if(_u.mapkdrepeat){var ku=_u.mapkdrepeat.split(/\s+/).map(function(Gu){return Number(Gu)}),Fu=ku[0],Nu=ku[1];$u=new r$3.Vector2(Fu,Nu)}Ru.push(Ki(_u.mapkd,Tu,Cu,$u,Pu,Bu).then(function(Gu){Du.USE_MAP=!0,Du.USE_UV=!0,Ou.map.value=Gu,Ou.uvTransform.value=Gu.matrix,Lu.needsUpdate=!0}).catch(Qe))}if(_u.ks&&(Ou.specular.value=new r$3.Color().fromArray(_u.ks.rgb)),_u.mapks&&Ru.push(Ki(_u.mapks,Tu,Cu,null,Pu,Bu).then(function(Gu){Ou.specularMap.value=Gu}).catch(Qe)),_u.ke&&(Ou.emissive.value=new r$3.Color().fromArray(_u.ke.rgb)),_u.mapke&&Ru.push(Ki(_u.mapke,Tu,Cu,null,Pu,Bu).then(function(Gu){Ou.emissiveMap.value=Gu}).catch(Qe)),_u.norm&&Ru.push(Ki(_u.norm,Tu,Cu,null,Pu,Bu).then(function(Gu){Ou.normalMap.value=Gu}).catch(Qe)),_u.mapbump&&Ru.push(Ki(_u.mapbump,Tu,Cu,null,Pu,Bu).then(function(Gu){Ou.bumpMap.value=Gu}).catch(Qe)),_u.bump&&Ru.push(Ki(_u.bump,Tu,Cu,null,Pu,Bu).then(function(Gu){Ou.bumpMap.value=Gu}).catch(Qe)),typeof _u.ns=="number"&&(Ou.shininess.value=_u.ns),typeof _u.d=="number"){var Vu=_u.d;Vu>0&&Vu<1&&(Lu.originOpacity=Vu,Lu.opacity=Vu)}return{material:Lu,textureReady:Promise.all(Ru).then(Qe)}}function ji(_u,Tu,Cu,Pu,Bu,Ru){for(var Lu,Ou=[],Du=[],$u=(Lu=_u,Hi.decode(Lu).meshes),ku=new Ii({allowHosts:Pu,requestProxy:Bu,networkSubscribe:Ru}),Fu=new r$3.Matrix4,Nu=new r$3.Vector3,Vu=new r$3.Quaternion,Gu=new r$3.Vector3,Hu={},ju=0,Uu=$u;ju<Uu.length;ju++){var zu=Uu[ju],Wu=zu.name,Qu=zu.chunks,qu=zu.matrix;if(Wu!=="Ceiling"&&Wu!=="CeilingDrop")for(var Yu=0,Xc=qu;Yu<Xc.length;Yu++){var _h=Xc[Yu];Fu.elements=_h.elements;var _d=new gt;_d.renderOrder=-3;for(var Ku=0;Ku<Qu.length;Ku++){var Xu=zi(Qu[Ku].geometry);Xu.applyMatrix4(Fu),Fu.decompose(Nu,Vu,Gu),Gu.x*Gu.y*Gu.z<0&&Xu.attributes.normal&&Xu.attributes.position&&Xu.attributes.uv&&qi(Xu);for(var Ju=[],Zu=0,_c=Qu[Ku].material;Zu<_c.length;Zu++){var _f=Ui(_c[Zu],Tu,Cu,ku,Hu),ep=_f.material,tp=_f.textureReady;Du.push(tp),Ju.push(ep)}var op=new ft(Xu,Ju);op.name="chunk_"+Ku,_d.add(op)}_d.floorIndex=0,_d.name=Wu,Ou.push(_d)}}return{objects:Ou,texturePromise:Promise.all(Du).catch(Qe)}}function Gi(_u,Tu){if(!_u)throw new Error("math.gl assertion ".concat(Tu))}_i.Mesh=(()=>{function _u(Tu){if(this.chunks=[],this.matrix=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.name="",_u.prototype.chunks=Vi.emptyArray,_u.prototype.matrix=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Mesh;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Bu.name=Tu.string();break;case 2:Bu.chunks&&Bu.chunks.length||(Bu.chunks=[]),Bu.chunks.push(_i.Chunk.decode(Tu,Tu.uint32()));break;case 3:Bu.matrix&&Bu.matrix.length||(Bu.matrix=[]),Bu.matrix.push(_i.Matrix.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}if(!Bu.hasOwnProperty("name"))throw Vi.ProtocolError("missing required 'name'",{instance:Bu});return Bu},_u})(),_i.Matrix=(()=>{function _u(Tu){if(this.elements=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.elements=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Matrix;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Bu.elements&&Bu.elements.length||(Bu.elements=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.elements.push(Tu.float())}else Bu.elements.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Bu},_u})(),_i.Chunk=(()=>{function _u(Tu){if(this.material=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.geometry=null,_u.prototype.material=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Chunk;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 2:Bu.geometry=_i.Geometry.decode(Tu,Tu.uint32());break;case 3:Bu.material&&Bu.material.length||(Bu.material=[]),Bu.material.push(_i.Material.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}if(!Bu.hasOwnProperty("geometry"))throw Vi.ProtocolError("missing required 'geometry'",{instance:Bu});return Bu},_u})(),_i.Geometry=(()=>{function _u(Tu){if(this.groups=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.position=null,_u.prototype.uv=null,_u.prototype.uv2=null,_u.prototype.normal=null,_u.prototype.groups=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Geometry;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Bu.position=_i.Position.decode(Tu,Tu.uint32());break;case 2:Bu.uv=_i.UV.decode(Tu,Tu.uint32());break;case 3:Bu.uv2=_i.UV.decode(Tu,Tu.uint32());break;case 4:Bu.normal=_i.Normal.decode(Tu,Tu.uint32());break;case 5:Bu.groups&&Bu.groups.length||(Bu.groups=[]),Bu.groups.push(_i.Group.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}if(!Bu.hasOwnProperty("position"))throw Vi.ProtocolError("missing required 'position'",{instance:Bu});if(!Bu.hasOwnProperty("normal"))throw Vi.ProtocolError("missing required 'normal'",{instance:Bu});return Bu},_u})(),_i.Position=(()=>{function _u(Tu){if(this.array=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Position;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Bu.array&&Bu.array.length||(Bu.array=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.array.push(Tu.float())}else Bu.array.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Bu},_u})(),_i.UV=(()=>{function _u(Tu){if(this.array=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.UV;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Bu.array&&Bu.array.length||(Bu.array=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.array.push(Tu.float())}else Bu.array.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Bu},_u})(),_i.Normal=(()=>{function _u(Tu){if(this.array=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Normal;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Bu.array&&Bu.array.length||(Bu.array=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.array.push(Tu.float())}else Bu.array.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Bu},_u})(),_i.Group=(()=>{function _u(Tu){if(Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.start=0,_u.prototype.count=0,_u.prototype.materialIndex=0,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Group;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Bu.start=Tu.uint32();break;case 2:Bu.count=Tu.uint32();break;case 3:Bu.materialIndex=Tu.uint32();break;default:Tu.skipType(7&Ru)}}if(!Bu.hasOwnProperty("start"))throw Vi.ProtocolError("missing required 'start'",{instance:Bu});if(!Bu.hasOwnProperty("count"))throw Vi.ProtocolError("missing required 'count'",{instance:Bu});if(!Bu.hasOwnProperty("materialIndex"))throw Vi.ProtocolError("missing required 'materialIndex'",{instance:Bu});return Bu},_u})(),_i.Material=(()=>{function _u(Tu){if(Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.kd=null,_u.prototype.ks=null,_u.prototype.ke=null,_u.prototype.mapkd="",_u.prototype.mapks="",_u.prototype.mapke="",_u.prototype.norm="",_u.prototype.mapbump="",_u.prototype.bump="",_u.prototype.mapd="",_u.prototype.ns=0,_u.prototype.d=0,_u.prototype.tr=0,_u.prototype.mapkdrepeat="",_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Material;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Bu.kd=_i.Color.decode(Tu,Tu.uint32());break;case 2:Bu.ks=_i.Color.decode(Tu,Tu.uint32());break;case 3:Bu.ke=_i.Color.decode(Tu,Tu.uint32());break;case 4:Bu.mapkd=Tu.string();break;case 5:Bu.mapks=Tu.string();break;case 6:Bu.mapke=Tu.string();break;case 7:Bu.norm=Tu.string();break;case 8:Bu.mapbump=Tu.string();break;case 9:Bu.bump=Tu.string();break;case 10:Bu.mapd=Tu.string();break;case 11:Bu.ns=Tu.float();break;case 12:Bu.d=Tu.float();break;case 13:Bu.tr=Tu.float();break;case 14:Bu.mapkdrepeat=Tu.string();break;default:Tu.skipType(7&Ru)}}return Bu},_u})(),_i.Color=(()=>{function _u(Tu){if(this.rgb=[],Tu)for(let Cu=Object.keys(Tu),Pu=0;Pu<Cu.length;++Pu)Tu[Cu[Pu]]!=null&&(this[Cu[Pu]]=Tu[Cu[Pu]])}return _u.prototype.rgb=Vi.emptyArray,_u.decode=function(Tu,Cu){Tu instanceof Qi||(Tu=Qi.create(Tu));let Pu=Cu===void 0?Tu.len:Tu.pos+Cu,Bu=new _i.Color;for(;Tu.pos<Pu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Bu.rgb&&Bu.rgb.length||(Bu.rgb=[]),(7&Ru)==2){let Lu=Tu.uint32()+Tu.pos;for(;Tu.pos<Lu;)Bu.rgb.push(Tu.float())}else Bu.rgb.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Bu},_u})();const Wi={};function Xi(_u,{precision:Tu=Wi.precision||4}={}){return _u=function(Cu){return Math.round(Cu/Wi.EPSILON)*Wi.EPSILON}(_u),"".concat(parseFloat(_u.toPrecision(Tu)))}function Yi(_u){return Array.isArray(_u)||ArrayBuffer.isView(_u)&&!(_u instanceof DataView)}function Zi(_u,Tu,Cu){const Pu=Wi.EPSILON;Cu&&(Wi.EPSILON=Cu);try{if(_u===Tu)return!0;if(Yi(_u)&&Yi(Tu)){if(_u.length!==Tu.length)return!1;for(let Bu=0;Bu<_u.length;++Bu)if(!Zi(_u[Bu],Tu[Bu]))return!1;return!0}return _u&&_u.equals?_u.equals(Tu):Tu&&Tu.equals?Tu.equals(_u):!(!Number.isFinite(_u)||!Number.isFinite(Tu))&&Math.abs(_u-Tu)<=Wi.EPSILON*Math.max(1,Math.abs(_u),Math.abs(Tu))}finally{Wi.EPSILON=Pu}}Wi.EPSILON=1e-12,Wi.debug=!1,Wi.precision=4,Wi.printTypes=!1,Wi.printDegrees=!1,Wi.printRowMajor=!0;class Ji extends function(Tu){function Cu(){var Pu=Reflect.construct(Tu,Array.from(arguments));return Object.setPrototypeOf(Pu,Object.getPrototypeOf(this)),Pu}return Cu.prototype=Object.create(Tu.prototype,{constructor:{value:Tu,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Cu,Tu):Cu.__proto__=Tu,Cu}(Array){get ELEMENTS(){return Gi(!1),0}clone(){return new this.constructor().copy(this)}from(Tu){return Array.isArray(Tu)?this.copy(Tu):this.fromObject(Tu)}fromArray(Tu,Cu=0){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]=Tu[Pu+Cu];return this.check()}to(Tu){return Tu===this?this:Yi(Tu)?this.toArray(Tu):this.toObject(Tu)}toTarget(Tu){return Tu?this.to(Tu):this}toArray(Tu=[],Cu=0){for(let Pu=0;Pu<this.ELEMENTS;++Pu)Tu[Cu+Pu]=this[Pu];return Tu}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wi)}formatString(Tu){let Cu="";for(let Pu=0;Pu<this.ELEMENTS;++Pu)Cu+=(Pu>0?", ":"")+Xi(this[Pu],Tu);return"".concat(Tu.printTypes?this.constructor.name:"","[").concat(Cu,"]")}equals(Tu){if(!Tu||this.length!==Tu.length)return!1;for(let Cu=0;Cu<this.ELEMENTS;++Cu)if(!Zi(this[Cu],Tu[Cu]))return!1;return!0}exactEquals(Tu){if(!Tu||this.length!==Tu.length)return!1;for(let Cu=0;Cu<this.ELEMENTS;++Cu)if(this[Cu]!==Tu[Cu])return!1;return!0}negate(){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=-this[Tu];return this.check()}lerp(Tu,Cu,Pu){Pu===void 0&&(Pu=Cu,Cu=Tu,Tu=this);for(let Bu=0;Bu<this.ELEMENTS;++Bu){const Ru=Tu[Bu];this[Bu]=Ru+Pu*(Cu[Bu]-Ru)}return this.check()}min(Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=Math.min(Tu[Cu],this[Cu]);return this.check()}max(Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=Math.max(Tu[Cu],this[Cu]);return this.check()}clamp(Tu,Cu){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]=Math.min(Math.max(this[Pu],Tu[Pu]),Cu[Pu]);return this.check()}add(...Tu){for(const Cu of Tu)for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]+=Cu[Pu];return this.check()}subtract(...Tu){for(const Cu of Tu)for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]-=Cu[Pu];return this.check()}scale(Tu){if(Array.isArray(Tu))return this.multiply(Tu);for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]*=Tu;return this.check()}sub(Tu){return this.subtract(Tu)}setScalar(Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=Tu;return this.check()}addScalar(Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]+=Tu;return this.check()}subScalar(Tu){return this.addScalar(-Tu)}multiplyScalar(Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]*=Tu;return this.check()}divideScalar(Tu){return this.scale(1/Tu)}clampScalar(Tu,Cu){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]=Math.min(Math.max(this[Pu],Tu),Cu);return this.check()}multiplyByScalar(Tu){return this.scale(Tu)}get elements(){return this}check(){if(Wi.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let Tu=this.length===this.ELEMENTS;for(let Cu=0;Cu<this.ELEMENTS;++Cu)Tu=Tu&&Number.isFinite(this[Cu]);return Tu}}function $i(_u){if(!Number.isFinite(_u))throw new Error("Invalid number ".concat(_u));return _u}function en(_u,Tu,Cu=""){if(Wi.debug&&!function(Pu,Bu){if(Pu.length!==Bu)return!1;for(let Ru=0;Ru<Pu.length;++Ru)if(!Number.isFinite(Pu[Ru]))return!1;return!0}(_u,Tu))throw new Error("math.gl: ".concat(Cu," some fields set to invalid numbers'"));return _u}const tn={};function nn(_u,Tu){tn[_u]||(tn[_u]=!0,console.warn("".concat(_u," has been removed in version ").concat(Tu,", see upgrade guide for more information")))}class rn extends Ji{get ELEMENTS(){return Gi(!1),0}copy(Tu){return Gi(!1),this}get x(){return this[0]}set x(Tu){this[0]=$i(Tu)}get y(){return this[1]}set y(Tu){this[1]=$i(Tu)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let Tu=0;for(let Cu=0;Cu<this.ELEMENTS;++Cu)Tu+=this[Cu]*this[Cu];return Tu}magnitudeSquared(){return this.lengthSquared()}distance(Tu){return Math.sqrt(this.distanceSquared(Tu))}distanceSquared(Tu){let Cu=0;for(let Pu=0;Pu<this.ELEMENTS;++Pu){const Bu=this[Pu]-Tu[Pu];Cu+=Bu*Bu}return $i(Cu)}dot(Tu){let Cu=0;for(let Pu=0;Pu<this.ELEMENTS;++Pu)Cu+=this[Pu]*Tu[Pu];return $i(Cu)}normalize(){const Tu=this.magnitude();if(Tu!==0)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]/=Tu;return this.check()}multiply(...Tu){for(const Cu of Tu)for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]*=Cu[Pu];return this.check()}divide(...Tu){for(const Cu of Tu)for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]/=Cu[Pu];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(Tu){return this.distance(Tu)}distanceToSquared(Tu){return this.distanceSquared(Tu)}getComponent(Tu){return Gi(Tu>=0&&Tu<this.ELEMENTS,"index is out of range"),$i(this[Tu])}setComponent(Tu,Cu){return Gi(Tu>=0&&Tu<this.ELEMENTS,"index is out of range"),this[Tu]=Cu,this.check()}addVectors(Tu,Cu){return this.copy(Tu).add(Cu)}subVectors(Tu,Cu){return this.copy(Tu).subtract(Cu)}multiplyVectors(Tu,Cu){return this.copy(Tu).multiply(Cu)}addScaledVector(Tu,Cu){return this.add(new this.constructor(Tu).multiplyScalar(Cu))}}var on$1=typeof Float32Array!="undefined"?Float32Array:Array;function sn(){var _u=new on$1(3);return on$1!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u}function an(_u,Tu,Cu){var Pu=new on$1(3);return Pu[0]=_u,Pu[1]=Tu,Pu[2]=Cu,Pu}function ln(_u,Tu){return _u[0]*Tu[0]+_u[1]*Tu[1]+_u[2]*Tu[2]}function un(_u,Tu,Cu){var Pu=Tu[0],Bu=Tu[1],Ru=Tu[2],Lu=Cu[0],Ou=Cu[1],Du=Cu[2];return _u[0]=Bu*Du-Ru*Ou,_u[1]=Ru*Lu-Pu*Du,_u[2]=Pu*Ou-Bu*Lu,_u}function hn(_u,Tu,Cu){var Pu=Tu[0],Bu=Tu[1],Ru=Tu[2],Lu=Cu[3]*Pu+Cu[7]*Bu+Cu[11]*Ru+Cu[15];return Lu=Lu||1,_u[0]=(Cu[0]*Pu+Cu[4]*Bu+Cu[8]*Ru+Cu[12])/Lu,_u[1]=(Cu[1]*Pu+Cu[5]*Bu+Cu[9]*Ru+Cu[13])/Lu,_u[2]=(Cu[2]*Pu+Cu[6]*Bu+Cu[10]*Ru+Cu[14])/Lu,_u}function cn(_u,Tu,Cu){var Pu=Tu[0],Bu=Tu[1],Ru=Tu[2];return _u[0]=Pu*Cu[0]+Bu*Cu[3]+Ru*Cu[6],_u[1]=Pu*Cu[1]+Bu*Cu[4]+Ru*Cu[7],_u[2]=Pu*Cu[2]+Bu*Cu[5]+Ru*Cu[8],_u}Math.hypot||(Math.hypot=function(){for(var _u=0,Tu=arguments.length;Tu--;)_u+=arguments[Tu]*arguments[Tu];return Math.sqrt(_u)});var dn=function(_u){var Tu=_u[0],Cu=_u[1],Pu=_u[2];return Math.hypot(Tu,Cu,Pu)};function pn(_u,Tu,Cu){const Pu=Tu[0],Bu=Tu[1],Ru=Tu[2],Lu=Cu[3]*Pu+Cu[7]*Bu+Cu[11]*Ru||1;return _u[0]=(Cu[0]*Pu+Cu[4]*Bu+Cu[8]*Ru)/Lu,_u[1]=(Cu[1]*Pu+Cu[5]*Bu+Cu[9]*Ru)/Lu,_u[2]=(Cu[2]*Pu+Cu[6]*Bu+Cu[10]*Ru)/Lu,_u}sn();const fn=[0,0,0],An={};class gn extends rn{static get ZERO(){return An.ZERO=An.ZERO||Object.freeze(new gn(0,0,0,0))}constructor(Tu=0,Cu=0,Pu=0){super(-0,-0,-0),arguments.length===1&&Yi(Tu)?this.copy(Tu):(Wi.debug&&($i(Tu),$i(Cu),$i(Pu)),this[0]=Tu,this[1]=Cu,this[2]=Pu)}set(Tu,Cu,Pu){return this[0]=Tu,this[1]=Cu,this[2]=Pu,this.check()}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this.check()}fromObject(Tu){return Wi.debug&&($i(Tu.x),$i(Tu.y),$i(Tu.z)),this[0]=Tu.x,this[1]=Tu.y,this[2]=Tu.z,this.check()}toObject(Tu){return Tu.x=this[0],Tu.y=this[1],Tu.z=this[2],Tu}get ELEMENTS(){return 3}get z(){return this[2]}set z(Tu){this[2]=$i(Tu)}angle(Tu){return function(Cu,Pu){var Bu=Cu[0],Ru=Cu[1],Lu=Cu[2],Ou=Pu[0],Du=Pu[1],$u=Pu[2],ku=Math.sqrt(Bu*Bu+Ru*Ru+Lu*Lu)*Math.sqrt(Ou*Ou+Du*Du+$u*$u),Fu=ku&&ln(Cu,Pu)/ku;return Math.acos(Math.min(Math.max(Fu,-1),1))}(this,Tu)}cross(Tu){return un(this,this,Tu),this.check()}rotateX({radians:Tu,origin:Cu=fn}){return function(Pu,Bu,Ru,Lu){var Ou=[],Du=[];Ou[0]=Bu[0]-Ru[0],Ou[1]=Bu[1]-Ru[1],Ou[2]=Bu[2]-Ru[2],Du[0]=Ou[0],Du[1]=Ou[1]*Math.cos(Lu)-Ou[2]*Math.sin(Lu),Du[2]=Ou[1]*Math.sin(Lu)+Ou[2]*Math.cos(Lu),Pu[0]=Du[0]+Ru[0],Pu[1]=Du[1]+Ru[1],Pu[2]=Du[2]+Ru[2]}(this,this,Cu,Tu),this.check()}rotateY({radians:Tu,origin:Cu=fn}){return function(Pu,Bu,Ru,Lu){var Ou=[],Du=[];Ou[0]=Bu[0]-Ru[0],Ou[1]=Bu[1]-Ru[1],Ou[2]=Bu[2]-Ru[2],Du[0]=Ou[2]*Math.sin(Lu)+Ou[0]*Math.cos(Lu),Du[1]=Ou[1],Du[2]=Ou[2]*Math.cos(Lu)-Ou[0]*Math.sin(Lu),Pu[0]=Du[0]+Ru[0],Pu[1]=Du[1]+Ru[1],Pu[2]=Du[2]+Ru[2]}(this,this,Cu,Tu),this.check()}rotateZ({radians:Tu,origin:Cu=fn}){return function(Pu,Bu,Ru,Lu){var Ou=[],Du=[];Ou[0]=Bu[0]-Ru[0],Ou[1]=Bu[1]-Ru[1],Ou[2]=Bu[2]-Ru[2],Du[0]=Ou[0]*Math.cos(Lu)-Ou[1]*Math.sin(Lu),Du[1]=Ou[0]*Math.sin(Lu)+Ou[1]*Math.cos(Lu),Du[2]=Ou[2],Pu[0]=Du[0]+Ru[0],Pu[1]=Du[1]+Ru[1],Pu[2]=Du[2]+Ru[2]}(this,this,Cu,Tu),this.check()}transform(Tu){return this.transformAsPoint(Tu)}transformAsPoint(Tu){return hn(this,this,Tu),this.check()}transformAsVector(Tu){return pn(this,this,Tu),this.check()}transformByMatrix3(Tu){return cn(this,this,Tu),this.check()}transformByMatrix2(Tu){return function(Cu,Pu,Bu){const Ru=Pu[0],Lu=Pu[1];Cu[0]=Bu[0]*Ru+Bu[2]*Lu,Cu[1]=Bu[1]*Ru+Bu[3]*Lu,Cu[2]=Pu[2]}(this,this,Tu),this.check()}transformByQuaternion(Tu){return function(Cu,Pu,Bu){var Ru=Bu[0],Lu=Bu[1],Ou=Bu[2],Du=Bu[3],$u=Pu[0],ku=Pu[1],Fu=Pu[2],Nu=Lu*Fu-Ou*ku,Vu=Ou*$u-Ru*Fu,Gu=Ru*ku-Lu*$u,Hu=Lu*Gu-Ou*Vu,ju=Ou*Nu-Ru*Gu,Uu=Ru*Vu-Lu*Nu,zu=2*Du;Nu*=zu,Vu*=zu,Gu*=zu,Hu*=2,ju*=2,Uu*=2,Cu[0]=$u+Nu+Hu,Cu[1]=ku+Vu+ju,Cu[2]=Fu+Gu+Uu}(this,this,Tu),this.check()}}var mn={throttleRequests:!0,maxRequests:5},vn=function(){function _u(Tu){Tu===void 0&&(Tu={}),this.props=t$3.__assign(t$3.__assign({},mn),Tu),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferred=null}return _u.prototype.scheduleRequest=function(Tu,Cu){if(Cu===void 0&&(Cu=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(Tu))return this.requestMap.get(Tu);var Pu={identiy:Tu,priority:0,getPriority:Cu,resolve:function(){}},Bu=new Promise(function(Ru){return Pu.resolve=Ru});return this.requestQueue.push(Pu),this.requestMap.set(Tu,Bu),this.issueNewRequests(),Bu},_u.prototype.issueRequest=function(Tu){var Cu=this,Pu=Tu.identiy,Bu=Tu.resolve,Ru=!1;this.activeRequestCount++,Bu({done:function(){Ru||(Ru=!0,Cu.requestMap.delete(Pu),Cu.activeRequestCount--,Cu.issueNewRequests())}})},_u.prototype.issueNewRequests=function(){var Tu=this;this.deferred||(this.deferred=setTimeout(function(){return Tu.issueNewRequestsAsync()},0))},_u.prototype.issueNewRequestsAsync=function(){this.deferred=null;var Tu=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(Tu!==0){this.updateAllRequests();for(var Cu=0;Cu<Tu;Cu++){var Pu=this.requestQueue.shift();Pu&&this.issueRequest(Pu)}}},_u.prototype.updateAllRequests=function(){for(var Tu=this.requestQueue,Cu=0;Cu<Tu.length;Cu++){var Pu=Tu[Cu];this.updateRequest(Pu)||(Tu.splice(Cu,1),this.requestMap.delete(Pu.identiy),Cu--)}Tu.sort(function(Bu,Ru){return Bu.priority-Ru.priority})},_u.prototype.updateRequest=function(Tu){return Tu.priority=Tu.getPriority(Tu.identiy),!(Tu.priority<0)||(Tu.resolve(null),!1)},_u}(),yn=function(_u,Tu,Cu){this.item=_u,this.previous=Tu,this.next=Cu},bn=function(){function _u(){this.head=null,this.tail=null,this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.add=function(Tu){var Cu=new yn(Tu,this.tail,null);return this.tail?(this.tail.next=Cu,this.tail=Cu):(this.head=Cu,this.tail=Cu),this._length++,Cu},_u.prototype.remove=function(Tu){Tu.previous&&Tu.next?(Tu.previous.next=Tu.next,Tu.next.previous=Tu.previous):Tu.previous?(Tu.previous.next=null,this.tail=Tu.previous):Tu.next?(Tu.next.previous=null,this.head=Tu.next):(this.head=null,this.tail=null),Tu.next=null,Tu.previous=null,this._length--},_u.prototype.splice=function(Tu,Cu){Tu!==Cu&&(this.remove(Cu),this.insert(Tu,Cu))},_u.prototype.insert=function(Tu,Cu){var Pu=Tu.next;Tu.next=Cu,this.tail===Tu?this.tail=Cu:Pu.previous=Cu,Cu.next=Pu,Cu.previous=Tu,this._length++},_u}(),xn=function(){function _u(){this.list=new bn,this.sentinel=this.list.add("sentinel")}return _u.prototype.reset=function(){this.list.splice(this.list.tail,this.sentinel)},_u.prototype.touch=function(Tu){var Cu=Tu.cacheNode;Cu&&this.list.splice(this.sentinel,Cu)},_u.prototype.add=function(Tu,Cu){Tu.cacheNode||(Tu.cacheNode=this.list.add(Tu),Cu&&Cu(Tu))},_u.prototype.unloadTile=function(Tu,Cu){var Pu=Tu.cacheNode;Pu&&(this.list.remove(Pu),Tu.cacheNode=void 0,Cu&&Cu(Tu))},_u.prototype.unloadTiles=function(Tu,Cu){for(var Pu=this.list.head;Pu!==this.sentinel&&Tu();){var Bu=Pu.item;Pu=Pu.next,this.unloadTile(Bu,Cu)}},_u}();class wn extends Ji{get ELEMENTS(){return Gi(!1),0}get RANK(){return Gi(!1),0}toString(){let Tu="[";if(Wi.printRowMajor){Tu+="row-major:";for(let Cu=0;Cu<this.RANK;++Cu)for(let Pu=0;Pu<this.RANK;++Pu)Tu+=" ".concat(this[Pu*this.RANK+Cu])}else{Tu+="column-major:";for(let Cu=0;Cu<this.ELEMENTS;++Cu)Tu+=" ".concat(this[Cu])}return Tu+="]",Tu}getElementIndex(Tu,Cu){return Cu*this.RANK+Tu}getElement(Tu,Cu){return this[Cu*this.RANK+Tu]}setElement(Tu,Cu,Pu){return this[Cu*this.RANK+Tu]=$i(Pu),this}getColumn(Tu,Cu=new Array(this.RANK).fill(-0)){const Pu=Tu*this.RANK;for(let Bu=0;Bu<this.RANK;++Bu)Cu[Bu]=this[Pu+Bu];return Cu}setColumn(Tu,Cu){const Pu=Tu*this.RANK;for(let Bu=0;Bu<this.RANK;++Bu)this[Pu+Bu]=Cu[Bu];return this}}function En(_u,Tu,Cu){var Pu=Tu[0],Bu=Tu[1],Ru=Tu[2],Lu=Tu[3],Ou=Tu[4],Du=Tu[5],$u=Tu[6],ku=Tu[7],Fu=Tu[8],Nu=Tu[9],Vu=Tu[10],Gu=Tu[11],Hu=Tu[12],ju=Tu[13],Uu=Tu[14],zu=Tu[15],Wu=Cu[0],Qu=Cu[1],qu=Cu[2],Yu=Cu[3];return _u[0]=Wu*Pu+Qu*Ou+qu*Fu+Yu*Hu,_u[1]=Wu*Bu+Qu*Du+qu*Nu+Yu*ju,_u[2]=Wu*Ru+Qu*$u+qu*Vu+Yu*Uu,_u[3]=Wu*Lu+Qu*ku+qu*Gu+Yu*zu,Wu=Cu[4],Qu=Cu[5],qu=Cu[6],Yu=Cu[7],_u[4]=Wu*Pu+Qu*Ou+qu*Fu+Yu*Hu,_u[5]=Wu*Bu+Qu*Du+qu*Nu+Yu*ju,_u[6]=Wu*Ru+Qu*$u+qu*Vu+Yu*Uu,_u[7]=Wu*Lu+Qu*ku+qu*Gu+Yu*zu,Wu=Cu[8],Qu=Cu[9],qu=Cu[10],Yu=Cu[11],_u[8]=Wu*Pu+Qu*Ou+qu*Fu+Yu*Hu,_u[9]=Wu*Bu+Qu*Du+qu*Nu+Yu*ju,_u[10]=Wu*Ru+Qu*$u+qu*Vu+Yu*Uu,_u[11]=Wu*Lu+Qu*ku+qu*Gu+Yu*zu,Wu=Cu[12],Qu=Cu[13],qu=Cu[14],Yu=Cu[15],_u[12]=Wu*Pu+Qu*Ou+qu*Fu+Yu*Hu,_u[13]=Wu*Bu+Qu*Du+qu*Nu+Yu*ju,_u[14]=Wu*Ru+Qu*$u+qu*Vu+Yu*Uu,_u[15]=Wu*Lu+Qu*ku+qu*Gu+Yu*zu,_u}function Mn(_u,Tu,Cu){var Pu=Cu[0],Bu=Cu[1],Ru=Cu[2];return _u[0]=Tu[0]*Pu,_u[1]=Tu[1]*Pu,_u[2]=Tu[2]*Pu,_u[3]=Tu[3]*Pu,_u[4]=Tu[4]*Bu,_u[5]=Tu[5]*Bu,_u[6]=Tu[6]*Bu,_u[7]=Tu[7]*Bu,_u[8]=Tu[8]*Ru,_u[9]=Tu[9]*Ru,_u[10]=Tu[10]*Ru,_u[11]=Tu[11]*Ru,_u[12]=Tu[12],_u[13]=Tu[13],_u[14]=Tu[14],_u[15]=Tu[15],_u}(function(){var _u;_u=new on$1(2),on$1!=Float32Array&&(_u[0]=0,_u[1]=0)})(),function(){var _u;_u=new on$1(4),on$1!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=0)}();const In=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Sn=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Cn=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Bn={};class Tn extends wn{static get IDENTITY(){return Bn.IDENTITY=Bn.IDENTITY||Object.freeze(new Tn(In)),Bn.IDENTITY}static get ZERO(){return Bn.ZERO=Bn.ZERO||Object.freeze(new Tn(Sn)),Bn.ZERO}get INDICES(){return Cn}get ELEMENTS(){return 16}get RANK(){return 4}constructor(Tu){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(Tu)?this.copy(Tu):this.identity()}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this[3]=Tu[3],this[4]=Tu[4],this[5]=Tu[5],this[6]=Tu[6],this[7]=Tu[7],this[8]=Tu[8],this[9]=Tu[9],this[10]=Tu[10],this[11]=Tu[11],this[12]=Tu[12],this[13]=Tu[13],this[14]=Tu[14],this[15]=Tu[15],this.check()}set(Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju){return this[0]=Tu,this[1]=Cu,this[2]=Pu,this[3]=Bu,this[4]=Ru,this[5]=Lu,this[6]=Ou,this[7]=Du,this[8]=$u,this[9]=ku,this[10]=Fu,this[11]=Nu,this[12]=Vu,this[13]=Gu,this[14]=Hu,this[15]=ju,this.check()}setRowMajor(Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju){return this[0]=Tu,this[1]=Ru,this[2]=$u,this[3]=Vu,this[4]=Cu,this[5]=Lu,this[6]=ku,this[7]=Gu,this[8]=Pu,this[9]=Ou,this[10]=Fu,this[11]=Hu,this[12]=Bu,this[13]=Du,this[14]=Nu,this[15]=ju,this.check()}toRowMajor(Tu){return Tu[0]=this[0],Tu[1]=this[4],Tu[2]=this[8],Tu[3]=this[12],Tu[4]=this[1],Tu[5]=this[5],Tu[6]=this[9],Tu[7]=this[13],Tu[8]=this[2],Tu[9]=this[6],Tu[10]=this[10],Tu[11]=this[14],Tu[12]=this[3],Tu[13]=this[7],Tu[14]=this[11],Tu[15]=this[15],Tu}identity(){return this.copy(In)}fromQuaternion(Tu){return function(Cu,Pu){var Bu=Pu[0],Ru=Pu[1],Lu=Pu[2],Ou=Pu[3],Du=Bu+Bu,$u=Ru+Ru,ku=Lu+Lu,Fu=Bu*Du,Nu=Ru*Du,Vu=Ru*$u,Gu=Lu*Du,Hu=Lu*$u,ju=Lu*ku,Uu=Ou*Du,zu=Ou*$u,Wu=Ou*ku;Cu[0]=1-Vu-ju,Cu[1]=Nu+Wu,Cu[2]=Gu-zu,Cu[3]=0,Cu[4]=Nu-Wu,Cu[5]=1-Fu-ju,Cu[6]=Hu+Uu,Cu[7]=0,Cu[8]=Gu+zu,Cu[9]=Hu-Uu,Cu[10]=1-Fu-Vu,Cu[11]=0,Cu[12]=0,Cu[13]=0,Cu[14]=0,Cu[15]=1}(this,Tu),this.check()}frustum({left:Tu,right:Cu,bottom:Pu,top:Bu,near:Ru,far:Lu}){return Lu===1/0?Tn._computeInfinitePerspectiveOffCenter(this,Tu,Cu,Pu,Bu,Ru):function(Ou,Du,$u,ku,Fu,Nu,Vu){var Gu=1/($u-Du),Hu=1/(Fu-ku),ju=1/(Nu-Vu);Ou[0]=2*Nu*Gu,Ou[1]=0,Ou[2]=0,Ou[3]=0,Ou[4]=0,Ou[5]=2*Nu*Hu,Ou[6]=0,Ou[7]=0,Ou[8]=($u+Du)*Gu,Ou[9]=(Fu+ku)*Hu,Ou[10]=(Vu+Nu)*ju,Ou[11]=-1,Ou[12]=0,Ou[13]=0,Ou[14]=Vu*Nu*2*ju,Ou[15]=0}(this,Tu,Cu,Pu,Bu,Ru,Lu),this.check()}static _computeInfinitePerspectiveOffCenter(Tu,Cu,Pu,Bu,Ru,Lu){const Ou=2*Lu/(Pu-Cu),Du=2*Lu/(Ru-Bu),$u=(Pu+Cu)/(Pu-Cu),ku=(Ru+Bu)/(Ru-Bu),Fu=-2*Lu;return Tu[0]=Ou,Tu[1]=0,Tu[2]=0,Tu[3]=0,Tu[4]=0,Tu[5]=Du,Tu[6]=0,Tu[7]=0,Tu[8]=$u,Tu[9]=ku,Tu[10]=-1,Tu[11]=-1,Tu[12]=0,Tu[13]=0,Tu[14]=Fu,Tu[15]=0,Tu}lookAt(Tu,Cu,Pu){return arguments.length===1&&({eye:Tu,center:Cu,up:Pu}=Tu),function(Bu,Ru,Lu,Ou){var Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu,zu=Ru[0],Wu=Ru[1],Qu=Ru[2],qu=Ou[0],Yu=Ou[1],Xc=Ou[2],_h=Lu[0],_d=Lu[1],Ku=Lu[2];Math.abs(zu-_h)<1e-6&&Math.abs(Wu-_d)<1e-6&&Math.abs(Qu-Ku)<1e-6?function(Xu){Xu[0]=1,Xu[1]=0,Xu[2]=0,Xu[3]=0,Xu[4]=0,Xu[5]=1,Xu[6]=0,Xu[7]=0,Xu[8]=0,Xu[9]=0,Xu[10]=1,Xu[11]=0,Xu[12]=0,Xu[13]=0,Xu[14]=0,Xu[15]=1}(Bu):(Gu=zu-_h,Hu=Wu-_d,ju=Qu-Ku,Du=Yu*(ju*=Uu=1/Math.hypot(Gu,Hu,ju))-Xc*(Hu*=Uu),$u=Xc*(Gu*=Uu)-qu*ju,ku=qu*Hu-Yu*Gu,(Uu=Math.hypot(Du,$u,ku))?(Du*=Uu=1/Uu,$u*=Uu,ku*=Uu):(Du=0,$u=0,ku=0),Fu=Hu*ku-ju*$u,Nu=ju*Du-Gu*ku,Vu=Gu*$u-Hu*Du,(Uu=Math.hypot(Fu,Nu,Vu))?(Fu*=Uu=1/Uu,Nu*=Uu,Vu*=Uu):(Fu=0,Nu=0,Vu=0),Bu[0]=Du,Bu[1]=Fu,Bu[2]=Gu,Bu[3]=0,Bu[4]=$u,Bu[5]=Nu,Bu[6]=Hu,Bu[7]=0,Bu[8]=ku,Bu[9]=Vu,Bu[10]=ju,Bu[11]=0,Bu[12]=-(Du*zu+$u*Wu+ku*Qu),Bu[13]=-(Fu*zu+Nu*Wu+Vu*Qu),Bu[14]=-(Gu*zu+Hu*Wu+ju*Qu),Bu[15]=1)}(this,Tu,Cu=Cu||[0,0,0],Pu=Pu||[0,1,0]),this.check()}ortho({left:Tu,right:Cu,bottom:Pu,top:Bu,near:Ru=.1,far:Lu=500}){return function(Ou,Du,$u,ku,Fu,Nu,Vu){var Gu=1/(Du-$u),Hu=1/(ku-Fu),ju=1/(Nu-Vu);Ou[0]=-2*Gu,Ou[1]=0,Ou[2]=0,Ou[3]=0,Ou[4]=0,Ou[5]=-2*Hu,Ou[6]=0,Ou[7]=0,Ou[8]=0,Ou[9]=0,Ou[10]=2*ju,Ou[11]=0,Ou[12]=(Du+$u)*Gu,Ou[13]=(Fu+ku)*Hu,Ou[14]=(Vu+Nu)*ju,Ou[15]=1}(this,Tu,Cu,Pu,Bu,Ru,Lu),this.check()}orthographic({fovy:Tu=45*Math.PI/180,aspect:Cu=1,focalDistance:Pu=1,near:Bu=.1,far:Ru=500}){if(Tu>2*Math.PI)throw Error("radians");const Lu=Tu/2,Ou=Pu*Math.tan(Lu),Du=Ou*Cu;return new Tn().ortho({left:-Du,right:Du,bottom:-Ou,top:Ou,near:Bu,far:Ru})}perspective({fovy:Tu,fov:Cu=45*Math.PI/180,aspect:Pu=1,near:Bu=.1,far:Ru=500}={}){if((Tu=Tu||Cu)>2*Math.PI)throw Error("radians");return function(Lu,Ou,Du,$u,ku){var Fu,Nu=1/Math.tan(Ou/2);Lu[0]=Nu/Du,Lu[1]=0,Lu[2]=0,Lu[3]=0,Lu[4]=0,Lu[5]=Nu,Lu[6]=0,Lu[7]=0,Lu[8]=0,Lu[9]=0,Lu[11]=-1,Lu[12]=0,Lu[13]=0,Lu[15]=0,ku!=null&&ku!==1/0?(Fu=1/($u-ku),Lu[10]=(ku+$u)*Fu,Lu[14]=2*ku*$u*Fu):(Lu[10]=-1,Lu[14]=-2*$u)}(this,Tu,Pu,Bu,Ru),this.check()}determinant(){return Cu=(Tu=this)[0],Pu=Tu[1],Bu=Tu[2],Ru=Tu[3],Lu=Tu[4],Ou=Tu[5],Du=Tu[6],$u=Tu[7],ku=Tu[8],Fu=Tu[9],Nu=Tu[10],Vu=Tu[11],Gu=Tu[12],Hu=Tu[13],ju=Tu[14],Uu=Tu[15],(Cu*Ou-Pu*Lu)*(Nu*Uu-Vu*ju)-(Cu*Du-Bu*Lu)*(Fu*Uu-Vu*Hu)+(Cu*$u-Ru*Lu)*(Fu*ju-Nu*Hu)+(Pu*Du-Bu*Ou)*(ku*Uu-Vu*Gu)-(Pu*$u-Ru*Ou)*(ku*ju-Nu*Gu)+(Bu*$u-Ru*Du)*(ku*Hu-Fu*Gu);var Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu}getScale(Tu=[-0,-0,-0]){return Tu[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),Tu[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),Tu[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),Tu}getTranslation(Tu=[-0,-0,-0]){return Tu[0]=this[12],Tu[1]=this[13],Tu[2]=this[14],Tu}getRotation(Tu=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Cu=null){const Pu=this.getScale(Cu||[-0,-0,-0]),Bu=1/Pu[0],Ru=1/Pu[1],Lu=1/Pu[2];return Tu[0]=this[0]*Bu,Tu[1]=this[1]*Ru,Tu[2]=this[2]*Lu,Tu[3]=0,Tu[4]=this[4]*Bu,Tu[5]=this[5]*Ru,Tu[6]=this[6]*Lu,Tu[7]=0,Tu[8]=this[8]*Bu,Tu[9]=this[9]*Ru,Tu[10]=this[10]*Lu,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1,Tu}getRotationMatrix3(Tu=[-0,-0,-0,-0,-0,-0,-0,-0,-0],Cu=null){const Pu=this.getScale(Cu||[-0,-0,-0]),Bu=1/Pu[0],Ru=1/Pu[1],Lu=1/Pu[2];return Tu[0]=this[0]*Bu,Tu[1]=this[1]*Ru,Tu[2]=this[2]*Lu,Tu[3]=this[4]*Bu,Tu[4]=this[5]*Ru,Tu[5]=this[6]*Lu,Tu[6]=this[8]*Bu,Tu[7]=this[9]*Ru,Tu[8]=this[10]*Lu,Tu}transpose(){return function(Tu,Cu){if(Tu===Cu){var Pu=Cu[1],Bu=Cu[2],Ru=Cu[3],Lu=Cu[6],Ou=Cu[7],Du=Cu[11];Tu[1]=Cu[4],Tu[2]=Cu[8],Tu[3]=Cu[12],Tu[4]=Pu,Tu[6]=Cu[9],Tu[7]=Cu[13],Tu[8]=Bu,Tu[9]=Lu,Tu[11]=Cu[14],Tu[12]=Ru,Tu[13]=Ou,Tu[14]=Du}else Tu[0]=Cu[0],Tu[1]=Cu[4],Tu[2]=Cu[8],Tu[3]=Cu[12],Tu[4]=Cu[1],Tu[5]=Cu[5],Tu[6]=Cu[9],Tu[7]=Cu[13],Tu[8]=Cu[2],Tu[9]=Cu[6],Tu[10]=Cu[10],Tu[11]=Cu[14],Tu[12]=Cu[3],Tu[13]=Cu[7],Tu[14]=Cu[11],Tu[15]=Cu[15]}(this,this),this.check()}invert(){var Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu,zu,Wu,Qu,qu,Yu,Xc,_h,_d,Ku,Xu,Ju,Zu,_c,_f;return Tu=this,Pu=(Cu=this)[0],Bu=Cu[1],Ru=Cu[2],Lu=Cu[3],Ou=Cu[4],Du=Cu[5],$u=Cu[6],ku=Cu[7],Fu=Cu[8],Nu=Cu[9],Vu=Cu[10],Gu=Cu[11],Hu=Cu[12],ju=Cu[13],Uu=Cu[14],zu=Cu[15],(_f=(Wu=Pu*Du-Bu*Ou)*(_c=Vu*zu-Gu*Uu)-(Qu=Pu*$u-Ru*Ou)*(Zu=Nu*zu-Gu*ju)+(qu=Pu*ku-Lu*Ou)*(Ju=Nu*Uu-Vu*ju)+(Yu=Bu*$u-Ru*Du)*(Xu=Fu*zu-Gu*Hu)-(Xc=Bu*ku-Lu*Du)*(Ku=Fu*Uu-Vu*Hu)+(_h=Ru*ku-Lu*$u)*(_d=Fu*ju-Nu*Hu))&&(_f=1/_f,Tu[0]=(Du*_c-$u*Zu+ku*Ju)*_f,Tu[1]=(Ru*Zu-Bu*_c-Lu*Ju)*_f,Tu[2]=(ju*_h-Uu*Xc+zu*Yu)*_f,Tu[3]=(Vu*Xc-Nu*_h-Gu*Yu)*_f,Tu[4]=($u*Xu-Ou*_c-ku*Ku)*_f,Tu[5]=(Pu*_c-Ru*Xu+Lu*Ku)*_f,Tu[6]=(Uu*qu-Hu*_h-zu*Qu)*_f,Tu[7]=(Fu*_h-Vu*qu+Gu*Qu)*_f,Tu[8]=(Ou*Zu-Du*Xu+ku*_d)*_f,Tu[9]=(Bu*Xu-Pu*Zu-Lu*_d)*_f,Tu[10]=(Hu*Xc-ju*qu+zu*Wu)*_f,Tu[11]=(Nu*qu-Fu*Xc-Gu*Wu)*_f,Tu[12]=(Du*Ku-Ou*Ju-$u*_d)*_f,Tu[13]=(Pu*Ju-Bu*Ku+Ru*_d)*_f,Tu[14]=(ju*Qu-Hu*Yu-Uu*Wu)*_f,Tu[15]=(Fu*Yu-Nu*Qu+Vu*Wu)*_f),this.check()}multiplyLeft(Tu){return En(this,Tu,this),this.check()}multiplyRight(Tu){return En(this,this,Tu),this.check()}rotateX(Tu){var Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu;return Cu=this,Pu=this,Bu=Tu,Ru=Math.sin(Bu),Lu=Math.cos(Bu),Ou=Pu[4],Du=Pu[5],$u=Pu[6],ku=Pu[7],Fu=Pu[8],Nu=Pu[9],Vu=Pu[10],Gu=Pu[11],Pu!==Cu&&(Cu[0]=Pu[0],Cu[1]=Pu[1],Cu[2]=Pu[2],Cu[3]=Pu[3],Cu[12]=Pu[12],Cu[13]=Pu[13],Cu[14]=Pu[14],Cu[15]=Pu[15]),Cu[4]=Ou*Lu+Fu*Ru,Cu[5]=Du*Lu+Nu*Ru,Cu[6]=$u*Lu+Vu*Ru,Cu[7]=ku*Lu+Gu*Ru,Cu[8]=Fu*Lu-Ou*Ru,Cu[9]=Nu*Lu-Du*Ru,Cu[10]=Vu*Lu-$u*Ru,Cu[11]=Gu*Lu-ku*Ru,this.check()}rotateY(Tu){var Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu;return Cu=this,Pu=this,Bu=Tu,Ru=Math.sin(Bu),Lu=Math.cos(Bu),Ou=Pu[0],Du=Pu[1],$u=Pu[2],ku=Pu[3],Fu=Pu[8],Nu=Pu[9],Vu=Pu[10],Gu=Pu[11],Pu!==Cu&&(Cu[4]=Pu[4],Cu[5]=Pu[5],Cu[6]=Pu[6],Cu[7]=Pu[7],Cu[12]=Pu[12],Cu[13]=Pu[13],Cu[14]=Pu[14],Cu[15]=Pu[15]),Cu[0]=Ou*Lu-Fu*Ru,Cu[1]=Du*Lu-Nu*Ru,Cu[2]=$u*Lu-Vu*Ru,Cu[3]=ku*Lu-Gu*Ru,Cu[8]=Ou*Ru+Fu*Lu,Cu[9]=Du*Ru+Nu*Lu,Cu[10]=$u*Ru+Vu*Lu,Cu[11]=ku*Ru+Gu*Lu,this.check()}rotateZ(Tu){var Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu;return Cu=this,Pu=this,Bu=Tu,Ru=Math.sin(Bu),Lu=Math.cos(Bu),Ou=Pu[0],Du=Pu[1],$u=Pu[2],ku=Pu[3],Fu=Pu[4],Nu=Pu[5],Vu=Pu[6],Gu=Pu[7],Pu!==Cu&&(Cu[8]=Pu[8],Cu[9]=Pu[9],Cu[10]=Pu[10],Cu[11]=Pu[11],Cu[12]=Pu[12],Cu[13]=Pu[13],Cu[14]=Pu[14],Cu[15]=Pu[15]),Cu[0]=Ou*Lu+Fu*Ru,Cu[1]=Du*Lu+Nu*Ru,Cu[2]=$u*Lu+Vu*Ru,Cu[3]=ku*Lu+Gu*Ru,Cu[4]=Fu*Lu-Ou*Ru,Cu[5]=Nu*Lu-Du*Ru,Cu[6]=Vu*Lu-$u*Ru,Cu[7]=Gu*Lu-ku*Ru,this.check()}rotateXYZ([Tu,Cu,Pu]){return this.rotateX(Tu).rotateY(Cu).rotateZ(Pu)}rotateAxis(Tu,Cu){return function(Pu,Bu,Ru,Lu){var Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu,zu,Wu,Qu,qu,Yu,Xc,_h,_d,Ku,Xu,Ju,Zu,_c,_f=Lu[0],ep=Lu[1],tp=Lu[2],op=Math.hypot(_f,ep,tp);op<1e-6||(_f*=op=1/op,ep*=op,tp*=op,Ou=Math.sin(Ru),$u=1-(Du=Math.cos(Ru)),ku=Bu[0],Fu=Bu[1],Nu=Bu[2],Vu=Bu[3],Gu=Bu[4],Hu=Bu[5],ju=Bu[6],Uu=Bu[7],zu=Bu[8],Wu=Bu[9],Qu=Bu[10],qu=Bu[11],Yu=_f*_f*$u+Du,Xc=ep*_f*$u+tp*Ou,_h=tp*_f*$u-ep*Ou,_d=_f*ep*$u-tp*Ou,Ku=ep*ep*$u+Du,Xu=tp*ep*$u+_f*Ou,Ju=_f*tp*$u+ep*Ou,Zu=ep*tp*$u-_f*Ou,_c=tp*tp*$u+Du,Pu[0]=ku*Yu+Gu*Xc+zu*_h,Pu[1]=Fu*Yu+Hu*Xc+Wu*_h,Pu[2]=Nu*Yu+ju*Xc+Qu*_h,Pu[3]=Vu*Yu+Uu*Xc+qu*_h,Pu[4]=ku*_d+Gu*Ku+zu*Xu,Pu[5]=Fu*_d+Hu*Ku+Wu*Xu,Pu[6]=Nu*_d+ju*Ku+Qu*Xu,Pu[7]=Vu*_d+Uu*Ku+qu*Xu,Pu[8]=ku*Ju+Gu*Zu+zu*_c,Pu[9]=Fu*Ju+Hu*Zu+Wu*_c,Pu[10]=Nu*Ju+ju*Zu+Qu*_c,Pu[11]=Vu*Ju+Uu*Zu+qu*_c,Bu!==Pu&&(Pu[12]=Bu[12],Pu[13]=Bu[13],Pu[14]=Bu[14],Pu[15]=Bu[15]))}(this,this,Tu,Cu),this.check()}scale(Tu){return Array.isArray(Tu)?Mn(this,this,Tu):Mn(this,this,[Tu,Tu,Tu]),this.check()}translate(Tu){return function(Cu,Pu,Bu){var Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu=Bu[0],zu=Bu[1],Wu=Bu[2];Pu===Cu?(Cu[12]=Pu[0]*Uu+Pu[4]*zu+Pu[8]*Wu+Pu[12],Cu[13]=Pu[1]*Uu+Pu[5]*zu+Pu[9]*Wu+Pu[13],Cu[14]=Pu[2]*Uu+Pu[6]*zu+Pu[10]*Wu+Pu[14],Cu[15]=Pu[3]*Uu+Pu[7]*zu+Pu[11]*Wu+Pu[15]):(Ru=Pu[0],Lu=Pu[1],Ou=Pu[2],Du=Pu[3],$u=Pu[4],ku=Pu[5],Fu=Pu[6],Nu=Pu[7],Vu=Pu[8],Gu=Pu[9],Hu=Pu[10],ju=Pu[11],Cu[0]=Ru,Cu[1]=Lu,Cu[2]=Ou,Cu[3]=Du,Cu[4]=$u,Cu[5]=ku,Cu[6]=Fu,Cu[7]=Nu,Cu[8]=Vu,Cu[9]=Gu,Cu[10]=Hu,Cu[11]=ju,Cu[12]=Ru*Uu+$u*zu+Vu*Wu+Pu[12],Cu[13]=Lu*Uu+ku*zu+Gu*Wu+Pu[13],Cu[14]=Ou*Uu+Fu*zu+Hu*Wu+Pu[14],Cu[15]=Du*Uu+Nu*zu+ju*Wu+Pu[15])}(this,this,Tu),this.check()}transform(Tu,Cu){return Tu.length===4?(en(Cu=function(Pu,Bu,Ru){var Lu=Bu[0],Ou=Bu[1],Du=Bu[2],$u=Bu[3];return Pu[0]=Ru[0]*Lu+Ru[4]*Ou+Ru[8]*Du+Ru[12]*$u,Pu[1]=Ru[1]*Lu+Ru[5]*Ou+Ru[9]*Du+Ru[13]*$u,Pu[2]=Ru[2]*Lu+Ru[6]*Ou+Ru[10]*Du+Ru[14]*$u,Pu[3]=Ru[3]*Lu+Ru[7]*Ou+Ru[11]*Du+Ru[15]*$u,Pu}(Cu||[-0,-0,-0,-0],Tu,this),4),Cu):this.transformAsPoint(Tu,Cu)}transformAsPoint(Tu,Cu){const{length:Pu}=Tu;switch(Pu){case 2:Bu=Cu||[-0,-0],Lu=this,Ou=(Ru=Tu)[0],Du=Ru[1],Bu[0]=Lu[0]*Ou+Lu[4]*Du+Lu[12],Bu[1]=Lu[1]*Ou+Lu[5]*Du+Lu[13],Cu=Bu;break;case 3:Cu=hn(Cu||[-0,-0,-0],Tu,this);break;default:throw new Error("Illegal vector")}var Bu,Ru,Lu,Ou,Du;return en(Cu,Tu.length),Cu}transformAsVector(Tu,Cu){switch(Tu.length){case 2:Cu=function(Pu,Bu,Ru){const Lu=Bu[0],Ou=Bu[1],Du=Ru[3]*Lu+Ru[7]*Ou||1;return Pu[0]=(Ru[0]*Lu+Ru[4]*Ou)/Du,Pu[1]=(Ru[1]*Lu+Ru[5]*Ou)/Du,Pu}(Cu||[-0,-0],Tu,this);break;case 3:Cu=pn(Cu||[-0,-0,-0],Tu,this);break;default:throw new Error("Illegal vector")}return en(Cu,Tu.length),Cu}makeRotationX(Tu){return this.identity().rotateX(Tu)}makeTranslation(Tu,Cu,Pu){return this.identity().translate([Tu,Cu,Pu])}transformPoint(Tu,Cu){return nn("Matrix4.transformPoint","3.0"),this.transformAsPoint(Tu,Cu)}transformVector(Tu,Cu){return nn("Matrix4.transformVector","3.0"),this.transformAsPoint(Tu,Cu)}transformDirection(Tu,Cu){return nn("Matrix4.transformDirection","3.0"),this.transformAsVector(Tu,Cu)}}var Pn=new gn,Rn=new gn,kn=function(){function _u(Tu,Cu){Tu===void 0&&(Tu=[0,0,1]),Cu===void 0&&(Cu=0),this.normal=new gn,this.distance=-0,this.fromNormalDistance(Tu,Cu)}return _u.prototype.fromNormalDistance=function(Tu,Cu){return this.normal.from(Tu).normalize(),this.distance=Cu,this},_u.prototype.fromPointNormal=function(Tu,Cu){Tu=Pn.from(Tu),this.normal.from(Cu).normalize();var Pu=-this.normal.dot(Tu);return this.distance=Pu,this},_u.prototype.fromCoefficients=function(Tu,Cu,Pu,Bu){return this.normal.set(Tu,Cu,Pu),this.distance=Bu,this},_u.prototype.clone=function(){return new _u(this.normal,this.distance)},_u.prototype.equals=function(Tu){return this.distance===Tu.distance&&this.normal.equals(Tu.normal)},_u.prototype.getPointDistance=function(Tu){return this.normal.dot(Tu)+this.distance},_u.prototype.transform=function(Tu){var Cu=Rn.copy(this.normal).transformAsVector(Tu).normalize(),Pu=this.normal.scale(-this.distance).transform(Tu);return this.fromPointNormal(Pu,Cu)},_u.prototype.projectPointOntoPlane=function(Tu,Cu){Cu===void 0&&(Cu=[0,0,0]),Tu=Pn.from(Tu);var Pu=this.getPointDistance(Tu),Bu=Rn.copy(this.normal).scale(Pu);return Tu.subtract(Bu).to(Cu)},_u}(),Dn=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ln=[new gn([1,0,0]),new gn([0,1,0]),new gn([0,0,1])],On=new gn,Nn=new gn,Fn=function(){function _u(Tu){Tu===void 0&&(Tu=[]),this.planes=Tu}return Object.defineProperty(_u,"MASK_OUTSIDE",{get:function(){return 4294967295},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INSIDE",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INDETERMINATE",{get:function(){return 2147483647},enumerable:!1,configurable:!0}),_u.prototype.fromBoundingSphere=function(Tu){this.planes.length=2*Ln.length;for(var Cu=Tu.center,Pu=Tu.radius,Bu=0,Ru=0,Lu=Ln;Ru<Lu.length;Ru++){var Ou=Lu[Ru],Du=this.planes[Bu],$u=this.planes[Bu+1];Du||(Du=this.planes[Bu]=new kn),$u||($u=this.planes[Bu+1]=new kn);var ku=On.copy(Ou).scale(-Pu).add(Cu);Du.fromPointNormal(ku,Ou);var Fu=On.copy(Ou).scale(Pu).add(Cu),Nu=Nn.copy(Ou).negate();$u.fromPointNormal(Fu,Nu),Bu+=2}return this},_u.prototype.computeVisibilityWithPlaneMask=function(Tu,Cu){if(Cu===_u.MASK_OUTSIDE||Cu===_u.MASK_INSIDE)return Cu;for(var Pu=_u.MASK_INSIDE,Bu=this.planes,Ru=0;Ru<this.planes.length;++Ru){var Lu=Ru<31?1<<Ru:0;if(!(Ru<31&&(Cu&Lu)==0)){var Ou=Bu[Ru],Du=Tu.intersectPlane(Ou);if(Du===Dn.OUTSIDE)return _u.MASK_OUTSIDE;Du===Dn.INTERSECTING&&(Pu|=Lu)}}return Pu},_u}();function Qn(_u,Tu,Cu){var Pu=Tu[0],Bu=Tu[1],Ru=Tu[2],Lu=Tu[3],Ou=Tu[4],Du=Tu[5],$u=Tu[6],ku=Tu[7],Fu=Tu[8],Nu=Cu[0],Vu=Cu[1],Gu=Cu[2],Hu=Cu[3],ju=Cu[4],Uu=Cu[5],zu=Cu[6],Wu=Cu[7],Qu=Cu[8];return _u[0]=Nu*Pu+Vu*Lu+Gu*$u,_u[1]=Nu*Bu+Vu*Ou+Gu*ku,_u[2]=Nu*Ru+Vu*Du+Gu*Fu,_u[3]=Hu*Pu+ju*Lu+Uu*$u,_u[4]=Hu*Bu+ju*Ou+Uu*ku,_u[5]=Hu*Ru+ju*Du+Uu*Fu,_u[6]=zu*Pu+Wu*Lu+Qu*$u,_u[7]=zu*Bu+Wu*Ou+Qu*ku,_u[8]=zu*Ru+Wu*Du+Qu*Fu,_u}function Vn(_u,Tu,Cu){var Pu=Cu[0],Bu=Cu[1];return _u[0]=Pu*Tu[0],_u[1]=Pu*Tu[1],_u[2]=Pu*Tu[2],_u[3]=Bu*Tu[3],_u[4]=Bu*Tu[4],_u[5]=Bu*Tu[5],_u[6]=Tu[6],_u[7]=Tu[7],_u[8]=Tu[8],_u}function _n(){var _u=new on$1(4);return on$1!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u[3]=1,_u}function Hn(_u,Tu,Cu){Cu*=.5;var Pu=Math.sin(Cu);return _u[0]=Pu*Tu[0],_u[1]=Pu*Tu[1],_u[2]=Pu*Tu[2],_u[3]=Math.cos(Cu),_u}function qn(_u,Tu,Cu){var Pu=Tu[0],Bu=Tu[1],Ru=Tu[2],Lu=Tu[3],Ou=Cu[0],Du=Cu[1],$u=Cu[2],ku=Cu[3];return _u[0]=Pu*ku+Lu*Ou+Bu*$u-Ru*Du,_u[1]=Bu*ku+Lu*Du+Ru*Ou-Pu*$u,_u[2]=Ru*ku+Lu*$u+Pu*Du-Bu*Ou,_u[3]=Lu*ku-Pu*Ou-Bu*Du-Ru*$u,_u}function zn(_u,Tu,Cu,Pu){var Bu,Ru,Lu,Ou,Du,$u=Tu[0],ku=Tu[1],Fu=Tu[2],Nu=Tu[3],Vu=Cu[0],Gu=Cu[1],Hu=Cu[2],ju=Cu[3];return(Ru=$u*Vu+ku*Gu+Fu*Hu+Nu*ju)<0&&(Ru=-Ru,Vu=-Vu,Gu=-Gu,Hu=-Hu,ju=-ju),1-Ru>1e-6?(Bu=Math.acos(Ru),Lu=Math.sin(Bu),Ou=Math.sin((1-Pu)*Bu)/Lu,Du=Math.sin(Pu*Bu)/Lu):(Ou=1-Pu,Du=Pu),_u[0]=Ou*$u+Du*Vu,_u[1]=Ou*ku+Du*Gu,_u[2]=Ou*Fu+Du*Hu,_u[3]=Ou*Nu+Du*ju,_u}function Kn(_u,Tu){var Cu,Pu=Tu[0]+Tu[4]+Tu[8];if(Pu>0)Cu=Math.sqrt(Pu+1),_u[3]=.5*Cu,Cu=.5/Cu,_u[0]=(Tu[5]-Tu[7])*Cu,_u[1]=(Tu[6]-Tu[2])*Cu,_u[2]=(Tu[1]-Tu[3])*Cu;else{var Bu=0;Tu[4]>Tu[0]&&(Bu=1),Tu[8]>Tu[3*Bu+Bu]&&(Bu=2);var Ru=(Bu+1)%3,Lu=(Bu+2)%3;Cu=Math.sqrt(Tu[3*Bu+Bu]-Tu[3*Ru+Ru]-Tu[3*Lu+Lu]+1),_u[Bu]=.5*Cu,Cu=.5/Cu,_u[3]=(Tu[3*Ru+Lu]-Tu[3*Lu+Ru])*Cu,_u[Ru]=(Tu[3*Ru+Bu]+Tu[3*Bu+Ru])*Cu,_u[Lu]=(Tu[3*Lu+Bu]+Tu[3*Bu+Lu])*Cu}return _u}var Un,jn,Gn,Wn,Xn=function(_u,Tu,Cu){return _u[0]=Tu[0]+Cu[0],_u[1]=Tu[1]+Cu[1],_u[2]=Tu[2]+Cu[2],_u[3]=Tu[3]+Cu[3],_u},Yn=function(_u,Tu,Cu){return _u[0]=Tu[0]*Cu,_u[1]=Tu[1]*Cu,_u[2]=Tu[2]*Cu,_u[3]=Tu[3]*Cu,_u},Zn=function(_u,Tu){return _u[0]*Tu[0]+_u[1]*Tu[1]+_u[2]*Tu[2]+_u[3]*Tu[3]},Jn=function(_u,Tu,Cu,Pu){var Bu=Tu[0],Ru=Tu[1],Lu=Tu[2],Ou=Tu[3];return _u[0]=Bu+Pu*(Cu[0]-Bu),_u[1]=Ru+Pu*(Cu[1]-Ru),_u[2]=Lu+Pu*(Cu[2]-Lu),_u[3]=Ou+Pu*(Cu[3]-Ou),_u},$n=function(_u){var Tu=_u[0],Cu=_u[1],Pu=_u[2],Bu=_u[3];return Math.hypot(Tu,Cu,Pu,Bu)},er=function(_u){var Tu=_u[0],Cu=_u[1],Pu=_u[2],Bu=_u[3];return Tu*Tu+Cu*Cu+Pu*Pu+Bu*Bu},tr=function(_u,Tu){var Cu=Tu[0],Pu=Tu[1],Bu=Tu[2],Ru=Tu[3],Lu=Cu*Cu+Pu*Pu+Bu*Bu+Ru*Ru;return Lu>0&&(Lu=1/Math.sqrt(Lu)),_u[0]=Cu*Lu,_u[1]=Pu*Lu,_u[2]=Bu*Lu,_u[3]=Ru*Lu,_u},ir=(Un=sn(),jn=an(1,0,0),Gn=an(0,1,0),function(_u,Tu,Cu){var Pu=ln(Tu,Cu);return Pu<-.999999?(un(Un,jn,Tu),dn(Un)<1e-6&&un(Un,Gn,Tu),function(Bu,Ru){var Lu=Ru[0],Ou=Ru[1],Du=Ru[2],$u=Lu*Lu+Ou*Ou+Du*Du;$u>0&&($u=1/Math.sqrt($u)),Bu[0]=Ru[0]*$u,Bu[1]=Ru[1]*$u,Bu[2]=Ru[2]*$u}(Un,Un),Hn(_u,Un,Math.PI),_u):Pu>.999999?(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=1,_u):(un(Un,Tu,Cu),_u[0]=Un[0],_u[1]=Un[1],_u[2]=Un[2],_u[3]=1+Pu,tr(_u,_u))});_n(),_n(),Wn=new on$1(9),on$1!=Float32Array&&(Wn[1]=0,Wn[2]=0,Wn[3]=0,Wn[5]=0,Wn[6]=0,Wn[7]=0),Wn[0]=1,Wn[4]=1,Wn[8]=1;const nr=[0,0,0,1];class rr extends Ji{constructor(Tu=0,Cu=0,Pu=0,Bu=1){super(-0,-0,-0,-0),Array.isArray(Tu)&&arguments.length===1?this.copy(Tu):this.set(Tu,Cu,Pu,Bu)}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this[3]=Tu[3],this.check()}set(Tu,Cu,Pu,Bu){return this[0]=Tu,this[1]=Cu,this[2]=Pu,this[3]=Bu,this.check()}fromMatrix3(Tu){return Kn(this,Tu),this.check()}identity(){return function(Tu){Tu[0]=0,Tu[1]=0,Tu[2]=0,Tu[3]=1}(this),this.check()}fromAxisRotation(Tu,Cu){return Hn(this,Tu,Cu),this.check()}setAxisAngle(Tu,Cu){return this.fromAxisRotation(Tu,Cu)}get ELEMENTS(){return 4}get x(){return this[0]}set x(Tu){this[0]=$i(Tu)}get y(){return this[1]}set y(Tu){this[1]=$i(Tu)}get z(){return this[2]}set z(Tu){this[2]=$i(Tu)}get w(){return this[3]}set w(Tu){this[3]=$i(Tu)}len(){return $n(this)}lengthSquared(){return er(this)}dot(Tu,Cu){if(Cu!==void 0)throw new Error("Quaternion.dot only takes one argument");return Zn(this,Tu)}rotationTo(Tu,Cu){return ir(this,Tu,Cu),this.check()}add(Tu,Cu){if(Cu!==void 0)throw new Error("Quaternion.add only takes one argument");return Xn(this,this,Tu),this.check()}calculateW(){return function(Tu,Cu){var Pu=Cu[0],Bu=Cu[1],Ru=Cu[2];Tu[0]=Pu,Tu[1]=Bu,Tu[2]=Ru,Tu[3]=Math.sqrt(Math.abs(1-Pu*Pu-Bu*Bu-Ru*Ru))}(this,this),this.check()}conjugate(){return function(Tu,Cu){Tu[0]=-Cu[0],Tu[1]=-Cu[1],Tu[2]=-Cu[2],Tu[3]=Cu[3]}(this,this),this.check()}invert(){return function(Tu,Cu){var Pu=Cu[0],Bu=Cu[1],Ru=Cu[2],Lu=Cu[3],Ou=Pu*Pu+Bu*Bu+Ru*Ru+Lu*Lu,Du=Ou?1/Ou:0;Tu[0]=-Pu*Du,Tu[1]=-Bu*Du,Tu[2]=-Ru*Du,Tu[3]=Lu*Du}(this,this),this.check()}lerp(Tu,Cu,Pu){return Jn(this,Tu,Cu,Pu),this.check()}multiplyRight(Tu,Cu){return Gi(!Cu),qn(this,this,Tu),this.check()}multiplyLeft(Tu,Cu){return Gi(!Cu),qn(this,Tu,this),this.check()}normalize(){const Tu=this.len(),Cu=Tu>0?1/Tu:0;return this[0]=this[0]*Cu,this[1]=this[1]*Cu,this[2]=this[2]*Cu,this[3]=this[3]*Cu,Tu===0&&(this[3]=1),this.check()}rotateX(Tu){return function(Cu,Pu,Bu){Bu*=.5;var Ru=Pu[0],Lu=Pu[1],Ou=Pu[2],Du=Pu[3],$u=Math.sin(Bu),ku=Math.cos(Bu);Cu[0]=Ru*ku+Du*$u,Cu[1]=Lu*ku+Ou*$u,Cu[2]=Ou*ku-Lu*$u,Cu[3]=Du*ku-Ru*$u}(this,this,Tu),this.check()}rotateY(Tu){return function(Cu,Pu,Bu){Bu*=.5;var Ru=Pu[0],Lu=Pu[1],Ou=Pu[2],Du=Pu[3],$u=Math.sin(Bu),ku=Math.cos(Bu);Cu[0]=Ru*ku-Ou*$u,Cu[1]=Lu*ku+Du*$u,Cu[2]=Ou*ku+Ru*$u,Cu[3]=Du*ku-Lu*$u}(this,this,Tu),this.check()}rotateZ(Tu){return function(Cu,Pu,Bu){Bu*=.5;var Ru=Pu[0],Lu=Pu[1],Ou=Pu[2],Du=Pu[3],$u=Math.sin(Bu),ku=Math.cos(Bu);Cu[0]=Ru*ku+Lu*$u,Cu[1]=Lu*ku-Ru*$u,Cu[2]=Ou*ku+Du*$u,Cu[3]=Du*ku-Ou*$u}(this,this,Tu),this.check()}scale(Tu){return Yn(this,this,Tu),this.check()}slerp(Tu,Cu,Pu){switch(arguments.length){case 1:({start:Tu=nr,target:Cu,ratio:Pu}=arguments[0]);break;case 2:[Cu,Pu]=arguments,Tu=this}return zn(this,Tu,Cu,Pu),this.check()}transformVector4(Tu,Cu=Tu){return function(Pu,Bu,Ru){var Lu=Bu[0],Ou=Bu[1],Du=Bu[2],$u=Ru[0],ku=Ru[1],Fu=Ru[2],Nu=Ru[3],Vu=Nu*Lu+ku*Du-Fu*Ou,Gu=Nu*Ou+Fu*Lu-$u*Du,Hu=Nu*Du+$u*Ou-ku*Lu,ju=-$u*Lu-ku*Ou-Fu*Du;Pu[0]=Vu*Nu+ju*-$u+Gu*-Fu-Hu*-ku,Pu[1]=Gu*Nu+ju*-ku+Hu*-$u-Vu*-Fu,Pu[2]=Hu*Nu+ju*-Fu+Vu*-ku-Gu*-$u,Pu[3]=Bu[3]}(Cu,Tu,this),en(Cu,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(Tu,Cu){return this.setAxisAngle(Tu,Cu)}premultiply(Tu,Cu){return this.multiplyLeft(Tu,Cu)}multiply(Tu,Cu){return this.multiplyRight(Tu,Cu)}}const or=Object.freeze([1,0,0,0,1,0,0,0,1]),sr=Object.freeze([0,0,0,0,0,0,0,0,0]),ar=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),lr={};class ur extends wn{static get IDENTITY(){return lr.IDENTITY=lr.IDENTITY||Object.freeze(new ur(or)),lr.IDENTITY}static get ZERO(){return lr.ZERO=lr.ZERO||Object.freeze(new ur(sr)),lr.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ar}constructor(Tu){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(Tu)?this.copy(Tu):this.identity()}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this[3]=Tu[3],this[4]=Tu[4],this[5]=Tu[5],this[6]=Tu[6],this[7]=Tu[7],this[8]=Tu[8],this.check()}set(Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u){return this[0]=Tu,this[1]=Cu,this[2]=Pu,this[3]=Bu,this[4]=Ru,this[5]=Lu,this[6]=Ou,this[7]=Du,this[8]=$u,this.check()}setRowMajor(Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u){return this[0]=Tu,this[1]=Bu,this[2]=Ou,this[3]=Cu,this[4]=Ru,this[5]=Du,this[6]=Pu,this[7]=Lu,this[8]=$u,this.check()}determinant(){return Cu=(Tu=this)[0],Pu=Tu[1],Bu=Tu[2],Ru=Tu[3],Lu=Tu[4],Ou=Tu[5],Du=Tu[6],$u=Tu[7],ku=Tu[8],Cu*(ku*Lu-Ou*$u)+Pu*(-ku*Ru+Ou*Du)+Bu*($u*Ru-Lu*Du);var Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku}identity(){return this.copy(or)}fromQuaternion(Tu){return function(Cu,Pu){var Bu=Pu[0],Ru=Pu[1],Lu=Pu[2],Ou=Pu[3],Du=Bu+Bu,$u=Ru+Ru,ku=Lu+Lu,Fu=Bu*Du,Nu=Ru*Du,Vu=Ru*$u,Gu=Lu*Du,Hu=Lu*$u,ju=Lu*ku,Uu=Ou*Du,zu=Ou*$u,Wu=Ou*ku;Cu[0]=1-Vu-ju,Cu[3]=Nu-Wu,Cu[6]=Gu+zu,Cu[1]=Nu+Wu,Cu[4]=1-Fu-ju,Cu[7]=Hu-Uu,Cu[2]=Gu-zu,Cu[5]=Hu+Uu,Cu[8]=1-Fu-Vu}(this,Tu),this.check()}transpose(){return function(Tu,Cu){if(Tu===Cu){var Pu=Cu[1],Bu=Cu[2],Ru=Cu[5];Tu[1]=Cu[3],Tu[2]=Cu[6],Tu[3]=Pu,Tu[5]=Cu[7],Tu[6]=Bu,Tu[7]=Ru}else Tu[0]=Cu[0],Tu[1]=Cu[3],Tu[2]=Cu[6],Tu[3]=Cu[1],Tu[4]=Cu[4],Tu[5]=Cu[7],Tu[6]=Cu[2],Tu[7]=Cu[5],Tu[8]=Cu[8]}(this,this),this.check()}invert(){return function(Tu,Cu){var Pu=Cu[0],Bu=Cu[1],Ru=Cu[2],Lu=Cu[3],Ou=Cu[4],Du=Cu[5],$u=Cu[6],ku=Cu[7],Fu=Cu[8],Nu=Fu*Ou-Du*ku,Vu=-Fu*Lu+Du*$u,Gu=ku*Lu-Ou*$u,Hu=Pu*Nu+Bu*Vu+Ru*Gu;Hu&&(Hu=1/Hu,Tu[0]=Nu*Hu,Tu[1]=(-Fu*Bu+Ru*ku)*Hu,Tu[2]=(Du*Bu-Ru*Ou)*Hu,Tu[3]=Vu*Hu,Tu[4]=(Fu*Pu-Ru*$u)*Hu,Tu[5]=(-Du*Pu+Ru*Lu)*Hu,Tu[6]=Gu*Hu,Tu[7]=(-ku*Pu+Bu*$u)*Hu,Tu[8]=(Ou*Pu-Bu*Lu)*Hu)}(this,this),this.check()}multiplyLeft(Tu){return Qn(this,Tu,this),this.check()}multiplyRight(Tu){return Qn(this,this,Tu),this.check()}rotate(Tu){return function(Cu,Pu,Bu){var Ru=Pu[0],Lu=Pu[1],Ou=Pu[2],Du=Pu[3],$u=Pu[4],ku=Pu[5],Fu=Pu[6],Nu=Pu[7],Vu=Pu[8],Gu=Math.sin(Bu),Hu=Math.cos(Bu);Cu[0]=Hu*Ru+Gu*Du,Cu[1]=Hu*Lu+Gu*$u,Cu[2]=Hu*Ou+Gu*ku,Cu[3]=Hu*Du-Gu*Ru,Cu[4]=Hu*$u-Gu*Lu,Cu[5]=Hu*ku-Gu*Ou,Cu[6]=Fu,Cu[7]=Nu,Cu[8]=Vu}(this,this,Tu),this.check()}scale(Tu){return Array.isArray(Tu)?Vn(this,this,Tu):Vn(this,this,[Tu,Tu,Tu]),this.check()}translate(Tu){return function(Cu,Pu,Bu){var Ru=Pu[0],Lu=Pu[1],Ou=Pu[2],Du=Pu[3],$u=Pu[4],ku=Pu[5],Fu=Pu[6],Nu=Pu[7],Vu=Pu[8],Gu=Bu[0],Hu=Bu[1];Cu[0]=Ru,Cu[1]=Lu,Cu[2]=Ou,Cu[3]=Du,Cu[4]=$u,Cu[5]=ku,Cu[6]=Gu*Ru+Hu*Du+Fu,Cu[7]=Gu*Lu+Hu*$u+Nu,Cu[8]=Gu*Ou+Hu*ku+Vu}(this,this,Tu),this.check()}transform(Tu,Cu){switch(Tu.length){case 2:Cu=function(Pu,Bu,Ru){var Lu=Bu[0],Ou=Bu[1];return Pu[0]=Ru[0]*Lu+Ru[3]*Ou+Ru[6],Pu[1]=Ru[1]*Lu+Ru[4]*Ou+Ru[7],Pu}(Cu||[-0,-0],Tu,this);break;case 3:Cu=cn(Cu||[-0,-0,-0],Tu,this);break;case 4:Cu=function(Pu,Bu,Ru){const Lu=Bu[0],Ou=Bu[1],Du=Bu[2];return Pu[0]=Ru[0]*Lu+Ru[3]*Ou+Ru[6]*Du,Pu[1]=Ru[1]*Lu+Ru[4]*Ou+Ru[7]*Du,Pu[2]=Ru[2]*Lu+Ru[5]*Ou+Ru[8]*Du,Pu[3]=Bu[3],Pu}(Cu||[-0,-0,-0,-0],Tu,this);break;default:throw new Error("Illegal vector")}return en(Cu,Tu.length),Cu}transformVector(Tu,Cu){return nn("Matrix3.transformVector"),this.transform(Tu,Cu)}transformVector2(Tu,Cu){return nn("Matrix3.transformVector"),this.transform(Tu,Cu)}transformVector3(Tu,Cu){return nn("Matrix3.transformVector"),this.transform(Tu,Cu)}}var hr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),cr=new gn,dr=new gn,pr=function(){function _u(Tu,Cu){Tu===void 0&&(Tu=[0,0,0]),Cu===void 0&&(Cu=0),this.radius=-0,this.center=new gn,this.fromCenterRadius(Tu,Cu)}return _u.prototype.fromCenterRadius=function(Tu,Cu){return this.center.from(Tu),this.radius=Cu,this},_u.prototype.fromCornerPoints=function(Tu,Cu){return Cu=cr.from(Cu),this.center=new gn().from(Tu).add(Cu).scale(.5),this.radius=this.center.distance(Cu),this},_u.prototype.equals=function(Tu){return this===Tu||Boolean(Tu)&&this.center.equals(Tu.center)&&this.radius===Tu.radius},_u.prototype.clone=function(){return new _u(this.center,this.radius)},_u.prototype.union=function(Tu){var Cu=this.center,Pu=this.radius,Bu=Tu.center,Ru=Tu.radius,Lu=cr.copy(Bu).subtract(Cu),Ou=Lu.magnitude();if(Pu>=Ou+Ru)return this.clone();if(Ru>=Ou+Pu)return Tu.clone();var Du=.5*(Pu+Ou+Ru);return dr.copy(Lu).scale((-Pu+Du)/Ou).add(Cu),this.center.copy(dr),this.radius=Du,this},_u.prototype.expand=function(Tu){var Cu=(Tu=cr.from(Tu)).subtract(this.center).magnitude();return Cu>this.radius&&(this.radius=Cu),this},_u.prototype.transform=function(Tu){this.center.transform(Tu);var Cu=function(Pu,Bu){var Ru=Bu[0],Lu=Bu[1],Ou=Bu[2],Du=Bu[4],$u=Bu[5],ku=Bu[6],Fu=Bu[8],Nu=Bu[9],Vu=Bu[10];return Pu[0]=Math.hypot(Ru,Lu,Ou),Pu[1]=Math.hypot(Du,$u,ku),Pu[2]=Math.hypot(Fu,Nu,Vu),Pu}(cr,Tu);return this.radius=Math.max(Cu[0],Math.max(Cu[1],Cu[2]))*this.radius,this},_u.prototype.distanceSquaredTo=function(Tu){var Cu=this.distanceTo(Tu);return Cu*Cu},_u.prototype.distanceTo=function(Tu){var Cu=(Tu=cr.from(Tu)).subtract(this.center);return Math.max(0,Cu.len()-this.radius)},_u.prototype.intersectPlane=function(Tu){var Cu=this.center,Pu=this.radius,Bu=Tu.normal.dot(Cu)+Tu.distance;return Bu<-Pu?hr.OUTSIDE:Bu<Pu?hr.INTERSECTING:hr.INSIDE},_u}(),fr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ar=new gn,gr=new gn,mr=new gn,vr=new gn,yr=new gn,br=new gn,xr=new gn,wr=0,Er=1,Mr=2,Ir=3,Sr=4,Cr=5,Br=6,Tr=7,Pr=8,Rr=function(){function _u(Tu,Cu){Tu===void 0&&(Tu=[0,0,0]),Cu===void 0&&(Cu=[0,0,0,0,0,0,0,0,0]),this.center=new gn().from(Tu),this.halfAxes=new ur(Cu)}return Object.defineProperty(_u.prototype,"halfSize",{get:function(){var Tu=this.halfAxes.getColumn(0),Cu=this.halfAxes.getColumn(1),Pu=this.halfAxes.getColumn(2);return[new gn(Tu).len(),new gn(Cu).len(),new gn(Pu).len()]},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"quaternion",{get:function(){var Tu=this.halfAxes.getColumn(0),Cu=this.halfAxes.getColumn(1),Pu=this.halfAxes.getColumn(2),Bu=new gn(Tu).normalize(),Ru=new gn(Cu).normalize(),Lu=new gn(Pu).normalize();return new rr().fromMatrix3(new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Bu,!0),Ru,!0),Lu,!0)))},enumerable:!1,configurable:!0}),_u.prototype.fromCenterHalfSizeQuaternion=function(Tu,Cu,Pu){var Bu=new rr(Pu),Ru=new ur().fromQuaternion(Bu);return Ru[0]=Ru[0]*Cu[0],Ru[1]=Ru[1]*Cu[0],Ru[2]=Ru[2]*Cu[0],Ru[3]=Ru[3]*Cu[1],Ru[4]=Ru[4]*Cu[1],Ru[5]=Ru[5]*Cu[1],Ru[6]=Ru[6]*Cu[2],Ru[7]=Ru[7]*Cu[2],Ru[8]=Ru[8]*Cu[2],this.center=new gn().from(Tu),this.halfAxes=Ru,this},_u.prototype.clone=function(){return new _u(this.center,this.halfAxes)},_u.prototype.equals=function(Tu){return this===Tu||Boolean(Tu)&&this.center.equals(Tu.center)&&this.halfAxes.equals(Tu.halfAxes)},_u.prototype.getBoundingSphere=function(Tu){Tu===void 0&&(Tu=new pr);var Cu=this.halfAxes,Pu=Cu.getColumn(0,mr),Bu=Cu.getColumn(1,vr),Ru=Cu.getColumn(2,yr),Lu=Ar.copy(Pu).add(Bu).add(Ru);return Tu.center.copy(this.center),Tu.radius=Lu.magnitude(),Tu},_u.prototype.intersectPlane=function(Tu){var Cu=this.center,Pu=Tu.normal,Bu=this.halfAxes,Ru=Pu.x,Lu=Pu.y,Ou=Pu.z,Du=Math.abs(Ru*Bu[wr]+Lu*Bu[Er]+Ou*Bu[Mr])+Math.abs(Ru*Bu[Ir]+Lu*Bu[Sr]+Ou*Bu[Cr])+Math.abs(Ru*Bu[Br]+Lu*Bu[Tr]+Ou*Bu[Pr]),$u=Pu.dot(Cu)+Tu.distance;return $u<=-Du?fr.OUTSIDE:$u>=Du?fr.INSIDE:fr.INTERSECTING},_u.prototype.distanceTo=function(Tu){return Math.sqrt(this.distanceSquaredTo(Tu))},_u.prototype.distanceSquaredTo=function(Tu){var Cu=gr.from(Tu).subtract(this.center),Pu=this.halfAxes,Bu=Pu.getColumn(0,mr),Ru=Pu.getColumn(1,vr),Lu=Pu.getColumn(2,yr),Ou=Bu.magnitude(),Du=Ru.magnitude(),$u=Lu.magnitude();Bu.normalize(),Ru.normalize(),Lu.normalize();var ku,Fu=0;return(ku=Math.abs(Cu.dot(Bu))-Ou)>0&&(Fu+=ku*ku),(ku=Math.abs(Cu.dot(Ru))-Du)>0&&(Fu+=ku*ku),(ku=Math.abs(Cu.dot(Lu))-$u)>0&&(Fu+=ku*ku),Fu},_u.prototype.computePlaneDistances=function(Tu,Cu,Pu){Pu===void 0&&(Pu=[-0,-0]);var Bu=Number.POSITIVE_INFINITY,Ru=Number.NEGATIVE_INFINITY,Lu=this.center,Ou=this.halfAxes,Du=Ou.getColumn(0,mr),$u=Ou.getColumn(1,vr),ku=Ou.getColumn(2,yr),Fu=br.copy(Du).add($u).add(ku).add(Lu),Nu=xr.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu);return Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Fu.copy(Lu).add(Du).add($u).subtract(ku),Nu.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu),Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Fu.copy(Lu).add(Du).subtract($u).add(ku),Nu.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu),Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Fu.copy(Lu).add(Du).subtract($u).subtract(ku),Nu.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu),Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Lu.copy(Fu).subtract(Du).add($u).add(ku),Nu.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu),Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Lu.copy(Fu).subtract(Du).add($u).subtract(ku),Nu.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu),Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Lu.copy(Fu).subtract(Du).subtract($u).add(ku),Nu.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu),Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Lu.copy(Fu).subtract(Du).subtract($u).subtract(ku),Nu.copy(Fu).subtract(Tu),Vu=Cu.dot(Nu),Bu=Math.min(Vu,Bu),Ru=Math.max(Vu,Ru),Pu[0]=Bu,Pu[1]=Ru,Pu},_u.prototype.transform=function(Tu){this.center.transformAsPoint(Tu);var Cu=this.halfAxes.getColumn(0,mr);Cu.transformAsPoint(Tu);var Pu=this.halfAxes.getColumn(1,vr);Pu.transformAsPoint(Tu);var Bu=this.halfAxes.getColumn(2,yr);return Bu.transformAsPoint(Tu),this.halfAxes=new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Cu,!0),Pu,!0),Bu,!0)),this},_u}();function kr(_u,Tu){if(_u.box)return function(Cu,Pu){var Bu=new gn(Cu[0],Cu[1],Cu[2]);Pu.transform(Bu,Bu);var Ru=[];if(Cu.length===10){var Lu=Cu.slice(3,6),Ou=new rr;Ou.fromArray(Cu,6);var Du=new gn([1,0,0]),$u=new gn([0,1,0]),ku=new gn([0,0,1]);Du.transformByQuaternion(Ou),Du.scale(Lu[0]),$u.transformByQuaternion(Ou),$u.scale(Lu[1]),ku.transformByQuaternion(Ou),ku.scale(Lu[2]),Ru=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Du.toArray(),!0),$u.toArray(),!0),ku.toArray(),!0)}else Ru=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Cu.slice(3,6),!0),Cu.slice(6,9),!0),Cu.slice(9,12),!0);var Fu=Pu.transformAsVector(Ru.slice(0,3),[0,0,0]),Nu=Pu.transformAsVector(Ru.slice(3,6),[0,0,0]),Vu=Pu.transformAsVector(Ru.slice(6,9),[0,0,0]),Gu=new ur([Fu[0],Fu[1],Fu[2],Nu[0],Nu[1],Nu[2],Vu[0],Vu[1],Vu[2]]);return new Rr(Bu,Gu)}(_u.box,Tu);throw new Error("3D Tile: boundingVolume must only can be box")}function Dr(_u,Tu){if(_u.dynamicScreenSpaceError&&_u.dynamicScreenSpaceErrorComputedDensity){var Cu=_u.dynamicScreenSpaceErrorComputedDensity,Pu=_u.dynamicScreenSpaceErrorFactor;return function(Bu,Ru){var Lu=Bu*Ru;return 1-Math.exp(-Lu*Lu)}(Tu,Cu)*Pu}return 0}function Lr(_u,Tu,Cu){var Pu=new TextDecoder("utf8"),Bu=new Uint8Array(_u,Tu,Cu);return Pu.decode(Bu)}function Or(_u,Tu,Cu){return Cu===void 0&&(Cu=0),Cu=function(Pu,Bu,Ru){Ru===void 0&&(Ru=0);var Lu=Pu.header,Ou=Lu.featureTableJsonByteLength,Du=Lu.featureTableBinaryByteLength,$u=Lu.batchLength;if(Pu.featureTableJson={BATCH_LENGTH:$u||0},Ou>0){var ku=Lr(Bu,Ru,Ou);Pu.featureTableJson=JSON.parse(ku)}return Ru+=Ou,Pu.featureTableBinary=new Uint8Array(Bu,Ru,Du),Ru+=Du}(_u,Tu,Cu),Cu=function(Pu,Bu,Ru){Ru===void 0&&(Ru=0);var Lu=Pu.header,Ou=Lu.batchTableJsonByteLength,Du=Lu.batchTableBinaryByteLength;if(Ou>0){var $u=Lr(Bu,Ru,Ou);Pu.batchTableJson=JSON.parse($u),Ru+=Ou,Du>0&&(Pu.batchTableBinary=new Uint8Array(Bu,Ru,Du),Pu.batchTableBinary=new Uint8Array(Pu.batchTableBinary),Ru+=Du)}return Ru}(_u,Tu,Cu)}function Nr(_u,Tu,Cu){Cu===void 0&&(Cu=0);var Pu=_u.byteOffset+_u.byteLength-Cu;if(Pu===0)throw new Error("glTF byte length must be greater than 0.");return _u.rotateYtoZ=!0,_u.gltfUpAxis="Y",_u.gltfArrayBuffer=function(Bu,Ru,Lu){var Ou=Lu!==void 0?new Uint8Array(Bu).subarray(Ru,Ru+Lu):new Uint8Array(Bu).subarray(Ru);return new Uint8Array(Ou).buffer}(Tu,Cu,Pu),_u.gltfByteOffset=0,_u.gltfByteLength=Pu,Cu%4==0||console.warn("".concat(_u.type,": embedded glb is not aligned to a 4-byte boundary.")),_u.byteOffset+_u.byteLength}function Fr(_u,Tu,Cu){Cu=function(Bu,Ru,Lu){Lu===void 0&&(Lu=0);var Ou=new DataView(Ru);if(Bu.magic=Ou.getUint32(Lu,!0),Lu+=4,Bu.version=Ou.getUint32(Lu,!0),Lu+=4,Bu.byteLength=Ou.getUint32(Lu,!0),Lu+=4,Bu.version!==1)throw new Error("3D Tile Version ".concat(Bu.version," not supported"));return Lu}(_u,Tu,Cu),Cu=function(Bu,Ru,Lu){Lu===void 0&&(Lu=0);var Ou,Du=new DataView(Ru);Bu.header=Bu.header||{};var $u=Du.getUint32(Lu,!0);Lu+=4;var ku=Du.getUint32(Lu,!0);Lu+=4;var Fu=Du.getUint32(Lu,!0);Lu+=4;var Nu=Du.getUint32(Lu,!0);return Lu+=4,Fu>=570425344?(Lu-=8,Ou=$u,Fu=ku,Nu=0,$u=0,ku=0,console.warn("b3dm tile in legacy format.")):Nu>=570425344&&(Lu-=4,Ou=Fu,Fu=$u,Nu=ku,$u=0,ku=0,console.warn("b3dm tile in legacy format.")),Bu.header.featureTableJsonByteLength=$u,Bu.header.featureTableBinaryByteLength=ku,Bu.header.batchTableJsonByteLength=Fu,Bu.header.batchTableBinaryByteLength=Nu,Bu.header.batchLength=Ou,Lu}(_u,Tu,Cu),Cu=Nr(_u,Tu,Cu=Or(_u,Tu,Cu));var Pu=_u.featureTableJson.RTC_CENTER;return Pu&&Number.isFinite(Pu.byteOffset)&&(_u.rtcCenter=new Float32Array(_u.featureTableBinary.buffer,_u.featureTableBinary.buffer.byteOffset+Pu.byteOffset,3)),Cu}var Qr=function(){function _u(Tu,Cu,Pu){this.header=Cu,this.tileset=Tu,this.parent=Pu,this.children=[],this.contentState="UNLOADED",this.transform=this.header.transform?new Tn(this.header.transform.slice()):new Tn;var Bu=this.parent&&this.parent.computedTransform?this.parent.computedTransform.clone():Tu.modelMatrix.clone();this.computedTransform=new Tn(Bu).multiplyRight(this.transform),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform),this.depth=this.parent?this.parent.depth+1:0,this.distanceToCamera=0,this.centerZDepth=0,this.screenSpaceError=0,this.shouldRefine=!1,this.visibilityPlaneMask=Fn.MASK_INDETERMINATE,this.visible=!1,this.selectionDepth=0,this.frameNumber=0,this.touchedFrameNumber=0,this.selectedFrameNumber=0,this.requestedFrameNumber=0}return Object.defineProperty(_u.prototype,"id",{get:function(){return this.header.id},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.header.refine||this.parent&&this.parent.refine||"REPLACE"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.header.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUrl",{get:function(){if(this.header.content.uri){var Tu=this.tileset.b3dmMapping.b3dm_base_url;Tu=/\/$/.test(Tu)?Tu:Tu+"/";var Cu=this.tileset.b3dmMapping.b3dm_url[this.header.content.uri];Cu=/^\//.test(Cu)?Cu.slice(1):Cu;var Pu=/^https?:/.test(Cu)?Cu:Tu+Cu;if(Pu.indexOf("http")!==-1&&Pu.indexOf("https")===-1){var Bu=Pu.slice(4);Pu="https"+Bu}return Pu}return this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.header.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.header.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasEmptyContent",{get:function(){return!this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"selected",{get:function(){return this.selectedFrameNumber===this.tileset.frameNumber},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasRenderContent",{get:function(){return!this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasChildren",{get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentReady",{get:function(){return this.contentState==="READY"||this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentAvailable",{get:function(){return Boolean(this.contentReady&&this.hasRenderContent||!1)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasUnloadedContent",{get:function(){return this.hasRenderContent&&this.contentUnloaded},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUnloaded",{get:function(){return this.contentState==="UNLOADED"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentFailed",{get:function(){return this.contentState==="FAILED"},enumerable:!1,configurable:!0}),_u.prototype.getScreenSpaceError=function(Tu,Cu){if(this.tileset.type==="TILES3D")return function(Pu,Bu,Ru){var Lu=Pu.tileset,Ou=Pu.parent&&Pu.parent.lodMetricValue||Pu.lodMetricValue,Du=Ru?Ou:Pu.lodMetricValue;if(Du===0)return 0;var $u=Math.max(Pu.distanceToCamera,1e-7),ku=Lu.options.viewDistanceScale,Fu=Du*Bu.height*ku/($u*Bu.sseDenominator);return Fu-Dr(Lu,$u)}(this,Tu,Cu);throw new Error("Unsupported tileset type")},_u.prototype.getPriority=function(){var Tu=this.tileset.traverser,Cu=Tu.options.skipLevelOfDetail,Pu=this.refine==="ADD"||Cu;if(Pu&&!this.visible||this.tileset.frameNumber-this.touchedFrameNumber>=1||this.contentState==="UNLOADED")return-1;var Bu=this.parent,Ru=Bu&&(!Pu||this.screenSpaceError===0)?Bu.screenSpaceError:this.screenSpaceError,Lu=Tu.root?Tu.root.screenSpaceError:0;return Math.max(Lu-Ru,0)},_u.prototype.loadContent=function(){var Tu=this;return this.hasEmptyContent||!this.contentUrl?Promise.resolve(!1):this.content?Promise.resolve(!0):(this.contentState="LOADING",this.tileset.requestScheduler.scheduleRequest(this.id,function(){return Tu.getPriority()}).then(function(Cu){return Cu?it(Tu.contentUrl,{responseType:"arraybuffer",allowHosts:Tu.tileset.options.allowHosts,networkSubscribe:Tu.tileset.options.networkSubscribe,requestProxy:Tu.tileset.options.requestProxy}).then(function(Pu){return Pu.body}).then(function(Pu){return Fr(Bu={byteOffset:0,type:"b3dm"},Pu,Bu.byteOffset),Bu;var Bu}).then(function(Pu){return Tu.content=Pu,Tu.tileset.options.contentLoader(Tu).then(function(){return Tu.contentState="READY",Cu.done(),!0})}).catch(function(Pu){return Tu.contentState="FAILED",Cu.done(),Promise.reject(Pu)}):(Tu.contentState="UNLOADED",Promise.resolve(!1))}))},_u.prototype.unloadContent=function(){this.content=void 0,this.contentState="UNLOADED"},_u.prototype.updateVisibility=function(Tu){if(this.frameNumber!==Tu.frameNumber){var Cu=this.parent,Pu=Cu?Cu.visibilityPlaneMask:Fn.MASK_INDETERMINATE,Bu=Cu?Cu.computedTransform:this.tileset.modelMatrix;this.updateTransform(Bu),this.distanceToCamera=this.distanceToTile(Tu),this.screenSpaceError=this.getScreenSpaceError(Tu,!1),this.visibilityPlaneMask=this.visibility(Tu,Pu),this.visible=this.visibilityPlaneMask!==Fn.MASK_OUTSIDE,this.frameNumber=Tu.frameNumber}},_u.prototype.visibility=function(Tu,Cu){return Tu.cullingVolume.computeVisibilityWithPlaneMask(this.boundingVolume,Cu)},_u.prototype.distanceToTile=function(Tu){return Math.sqrt(Math.max(this.boundingVolume.distanceSquaredTo(Tu.camera.position),0))},_u.prototype.updateTransform=function(Tu){Tu===void 0&&(Tu=new Tn);var Cu=Tu.clone().multiplyRight(this.transform);!Cu.equals(this.computedTransform)&&(this.computedTransform.copy(Cu),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform))},_u}(),Vr=function(){function _u(){this.map=new Map,this.array=[],this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.get=function(Tu){return this.array[Tu]},_u.prototype.set=function(Tu,Cu){Tu>=this.length&&(this._length=Tu+1),this.map.has(this.array[Tu])&&this.map.delete(this.array[Tu]),this.array[Tu]=Cu,this.map.set(Cu,Tu)},_u.prototype.delete=function(Tu){var Cu=this.map.get(Tu);Cu!==void 0&&Cu>=0&&(this.array.splice(Cu,1),this.map.delete(Tu),this._length--)},_u.prototype.push=function(Tu){if(!this.map.has(Tu)){var Cu=this._length++;this.array[Cu]=Tu,this.map.set(Tu,Cu)}},_u.prototype.pop=function(){var Tu=this.array[--this._length];return this.map.delete(Tu),Tu},_u.prototype.reset=function(){this.array=[],this.map=new Map,this._length=0},_u.prototype.find=function(Tu){return this.map.has(Tu)},_u}(),_r=function(){function _u(Tu){this.options=Tu,this._traversalStack=new Vr,this._emptyTraversalStack=new Vr,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return _u.prototype.traverse=function(Tu,Cu){this.root=Tu,this.reset(),this.updateTile(Tu,Cu),this._frameNumber=Cu.frameNumber,this.executeTraversal(Tu,Cu)},_u.prototype.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},_u.prototype.executeTraversal=function(Tu,Cu){var Pu=this._traversalStack;for(Tu.selectionDepth=1,Pu.push(Tu);Pu.length>0;){var Bu=Pu.pop(),Ru=!1;if(this.canTraverse(Bu,Cu)){this.updateChildTiles(Bu,Cu);var Lu=Bu.hasRenderContent?Bu.selectionDepth+1:Bu.selectionDepth;Ru=this.updateAndPushChildren(Bu,Cu,Pu,Lu)}var Ou=Bu.parent,Du=Boolean(!Ou||Ou.shouldRefine),$u=!Ru;Bu.hasRenderContent?Bu.refine==="ADD"?(this.loadTile(Bu,Cu),this.selectTile(Bu,Cu)):Bu.refine==="REPLACE"&&(this.loadTile(Bu,Cu),$u&&this.selectTile(Bu,Cu)):(this.emptyTiles[Bu.id]=Bu,this.loadTile(Bu,Cu),$u&&this.selectTile(Bu,Cu)),this.touchTile(Bu,Cu),Bu.shouldRefine=Ru&&Du}this.options.onTraversalEnd(Cu)},_u.prototype.updateChildTiles=function(Tu,Cu){for(var Pu=0,Bu=Tu.children;Pu<Bu.length;Pu++){var Ru=Bu[Pu];this.updateTile(Ru,Cu)}return!0},_u.prototype.updateAndPushChildren=function(Tu,Cu,Pu,Bu){var Ru=this.options,Lu=Ru.loadSiblings,Ou=Ru.skipLevelOfDetail,Du=Tu.children;Du.sort(this.compareDistanceToCamera.bind(this));for(var $u=Tu.refine==="REPLACE"&&Tu.hasRenderContent&&!Ou,ku=!1,Fu=!0,Nu=0,Vu=Du;Nu<Vu.length;Nu++){var Gu=Vu[Nu];if(Gu.selectionDepth=Bu,Gu.visible?(Pu.find(Gu)&&Pu.delete(Gu),Pu.push(Gu),ku=!0):($u||Lu)&&(this.loadTile(Gu,Cu),this.touchTile(Gu,Cu)),$u){var Hu=void 0;if(Hu=Gu.hasRenderContent?Gu.contentAvailable:this.executeEmptyTraversal(Gu,Cu),!(Fu=Fu&&Hu))return!1}}return ku||(Fu=!1),Fu},_u.prototype.updateTile=function(Tu,Cu){this.updateTileVisibility(Tu,Cu)},_u.prototype.selectTile=function(Tu,Cu){this.shouldSelectTile(Tu)&&(Tu.selectedFrameNumber=Cu.frameNumber,this.selectedTiles[Tu.id]=Tu)},_u.prototype.loadTile=function(Tu,Cu){this.shouldLoadTile(Tu)&&(Tu.requestedFrameNumber=Cu.frameNumber,this.requestedTiles[Tu.id]=Tu)},_u.prototype.touchTile=function(Tu,Cu){Tu.tileset.cache.touch(Tu),Tu.touchedFrameNumber=Cu.frameNumber},_u.prototype.canTraverse=function(Tu,Cu,Pu,Bu){return Pu===void 0&&(Pu=!1),Bu===void 0&&(Bu=!1),!!Tu.hasChildren&&!(!Bu&&!Tu.visible)&&this.shouldRefine(Tu,Cu,Pu)},_u.prototype.shouldLoadTile=function(Tu){var Cu=!this.options.maxDepth||Tu.depth<=this.options.maxDepth;return Tu.hasUnloadedContent&&Cu},_u.prototype.shouldSelectTile=function(Tu){var Cu=!this.options.maxDepth||Tu.depth<=this.options.maxDepth;return Tu.contentAvailable&&!this.options.skipLevelOfDetail&&Cu},_u.prototype.shouldRefine=function(Tu,Cu,Pu){var Bu=Tu.screenSpaceError;return Pu&&(Bu=Tu.getScreenSpaceError(Cu,!0)),Bu>this.options.maxScreenSpaceError},_u.prototype.updateTileVisibility=function(Tu,Cu){if(Tu.updateVisibility(Cu),Tu.visible){var Pu=Tu.children.length>0;this.meetsScreenSpaceErrorEarly(Tu,Cu)?Tu.visible=!1:Tu.refine!=="REPLACE"||!Pu||this.anyChildrenVisible(Tu,Cu)||(Tu.visible=!1)}},_u.prototype.meetsScreenSpaceErrorEarly=function(Tu,Cu){var Pu=Tu.parent;return!(!Pu||Pu.refine!=="ADD")&&!this.shouldRefine(Tu,Cu,!0)},_u.prototype.compareDistanceToCamera=function(Tu,Cu){return Cu.distanceToCamera===0&&Tu.distanceToCamera===0?Cu.centerZDepth-Tu.centerZDepth:Cu.distanceToCamera-Tu.distanceToCamera},_u.prototype.anyChildrenVisible=function(Tu,Cu){for(var Pu=!1,Bu=0,Ru=Tu.children;Bu<Ru.length;Bu++){var Lu=Ru[Bu];Lu.updateVisibility(Cu),Pu=Pu||Lu.visible}return Pu},_u.prototype.everyChildrenVisibleIsLoaded=function(Tu){for(var Cu=!0,Pu=0,Bu=Tu.children;Pu<Bu.length;Pu++){var Ru=Bu[Pu];Ru.visible&&Ru.contentState!=="READY"&&(Cu=!1)}return Cu},_u.prototype.executeEmptyTraversal=function(Tu,Cu){var Pu=!0,Bu=this._emptyTraversalStack;for(Bu.push(Tu);Bu.length>0&&Pu;){var Ru=Bu.pop();if(this.updateTile(Ru,Cu),Ru.visible||this.loadTile(Ru,Cu),this.touchTile(Ru,Cu),!Ru.hasRenderContent&&this.canTraverse(Ru,Cu,!1,!0))for(var Lu=0,Ou=Ru.children;Lu<Ou.length;Lu++){var Du=Ou[Lu];Bu.find(Du)&&Bu.delete(Du),Bu.push(Du)}else Ru.contentAvailable||(Pu=!1)}return Pu},_u}();function Hr(_u){for(var Tu=[],Cu=0,Pu=Object.keys(_u);Cu<Pu.length;Cu++){var Bu=Pu[Cu];Tu.push(_u[Bu])}return Tu}var qr=function(){function _u(Tu,Cu){var Pu=this;this.rawJson=Tu,this.b3dmMapping=Tu.b3dmMapping,this.options=Cu,this.traverser=new _r({loadSiblings:!1,maxScreenSpaceError:this.options.maxScreenSpaceError,skipLevelOfDetail:!1,maxDepth:this.options.maxDepth,onTraversalEnd:function(ku){return Pu.onTraversalEnd(ku)}}),this.cache=new xn,this.requestScheduler=new vn({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.frameNumber=0,this.pendingCount=0,this._tiles={},this.selectedTiles=[],this.requestedTiles=[],this.memoryUsageInBytes=0,this.root=new Qr(this,Tu.root);for(var Bu=[this.root];Bu.length>0;)for(var Ru=Bu.pop(),Lu=0,Ou=Ru.header.children||[];Lu<Ou.length;Lu++){var Du=Ou[Lu],$u=new Qr(this,Du,Ru);$u.depth=Ru.depth+1,Ru.children.push($u),Bu.push($u)}}return Object.defineProperty(_u.prototype,"maxMemoryUsage",{get:function(){return this.options.maxMemoryUsage},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"asset",{get:function(){return this.rawJson.asset},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.rawJson.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"basePath",{get:function(){return this.rawJson.basePath},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"modelMatrix",{get:function(){return this.options.modelMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"geometricError",{get:function(){return this.rawJson.geometricError},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.rawJson.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.rawJson.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.rawJson.root.refine},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"tiles",{get:function(){return Hr(this._tiles)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"floorInfo",{get:function(){return this.rawJson.floorInfo||this.rawJson.floor_info||[]},enumerable:!1,configurable:!0}),_u.prototype.reset=function(){for(var Tu=[this.root];Tu.length>0;){for(var Cu=Tu.pop(),Pu=0,Bu=Cu.children;Pu<Bu.length;Pu++){var Ru=Bu[Pu];Tu.push(Ru)}this.cache.unloadTile(Cu),this.unloadTile(Cu)}this.cache.reset(),this.traverser.reset(),this.selectedTiles=[],this.requestedTiles=[]},_u.prototype.isLoaded=function(){return this.pendingCount===0&&this.frameNumber!==0},_u.prototype.onTraversalEnd=function(Tu){var Cu=this,Pu=new gn(Tu.camera.position);this.selectedTiles=this.options.onTraversalComplete(Hr(this.traverser.selectedTiles)),this.requestedTiles=Hr(this.traverser.requestedTiles).slice().sort(function($u,ku){return $u.boundingVolume.center.distanceTo(Pu)-ku.boundingVolume.center.distanceTo(Pu)});for(var Bu=0,Ru=this.selectedTiles;Bu<Ru.length;Bu++){var Lu=Ru[Bu];this._tiles[Lu.id]=Lu}for(var Ou=0,Du=this.requestedTiles;Ou<Du.length;Ou++)(Lu=Du[Ou]).contentUnloaded&&this.loadTile(Lu);this.cache.unloadTiles(function(){return Cu.memoryUsageInBytes>1024*Cu.maxMemoryUsage*1024},function($u){return Cu.unloadTile($u)})},_u.prototype.loadTile=function(Tu){var Cu=this;this.pendingCount++,Tu.loadContent().catch(function(Pu){var Bu=Pu.message||Pu.toString();return console.error("A 3D tile failed to load: ".concat(Tu.id," ").concat(Bu)),Cu.options.onTileError(Tu,Bu),!1}).then(function(Pu){Cu.pendingCount--,Pu&&(Cu.cache.add(Tu,function(){Tu.content&&(Cu.memoryUsageInBytes+=Tu.content.byteLength||0)}),Cu.options.onTileLoad(Tu))})},_u.prototype.unloadTile=function(Tu){this.memoryUsageInBytes-=Tu.content&&Tu.content.byteLength||0,this.options.onTileUnload(Tu),Tu.unloadContent()},_u}();function zr(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Kr(){return(zr()+zr()+"-"+zr()+"-4"+zr().substr(0,3)+"-"+zr()+"-"+zr()+zr()+zr()).toLowerCase()}function Ur(_u,Tu){var Cu;return _u.content&&(_u.contentUrl="".concat(Tu,"/").concat(_u.content.uri||_u.content.url)),_u.id=(Cu=_u.contentUrl)!==null&&Cu!==void 0?Cu:"empty:"+Kr(),_u.lodMetricType="geometricError",_u.lodMetricValue=_u.geometricError,_u.transformMatrix=_u.transform,_u.type=_u.contentUrl?"SCENEGRAPH":"EMPTY",_u.refine=function(Pu){switch(Pu){case"REPLACE":case"replace":return"REPLACE";case"ADD":case"add":return"ADD";default:throw new Error("refine ".concat(Pu," is not supported."))}}(_u.refine),_u}function jr(_u,Tu){var Cu,Pu=JSON.parse(JSON.stringify(_u));return Pu.basePath=Tu,Pu.root=function(Bu,Ru){Bu=Ur(Bu,Ru);var Lu=[];for(Lu.push(Bu);Lu.length>0;)for(var Ou=0,Du=(Lu.pop()||{}).children||[];Ou<Du.length;Ou++){var $u=Du[Ou];Ur($u,Ru),Lu.push($u)}return Bu}(Pu.root,Tu),Pu.type="TILES3D",Pu.lodMetricType="geometricError",Pu.lodMetricValue=((Cu=Pu.root)===null||Cu===void 0?void 0:Cu.lodMetricValue)||0,Pu}var Gr=new(function(){function _u(ip){e$2.Loader.call(this,ip),this.dracoLoader=null,this.ddsLoader=null}function Tu(){var ip={};return{get:function(rp){return ip[rp]},add:function(rp,fp){ip[rp]=fp},remove:function(rp){delete ip[rp]},removeAll:function(){ip={}}}}_u.prototype=Object.assign(Object.create(e$2.Loader.prototype),{constructor:_u,load:function(ip,rp,fp,up){var pp,gp=this;pp=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:e$2.LoaderUtils.extractUrlBase(ip),gp.manager.itemStart(ip);var Ap=function($p){up?up($p):console.error($p),gp.manager.itemError(ip),gp.manager.itemEnd(ip)},Mp=new e$2.FileLoader(gp.manager);Mp.setPath(this.path),Mp.setResponseType("arraybuffer"),Mp.setRequestHeader(this.requestHeader),gp.crossOrigin==="use-credentials"&&Mp.setWithCredentials(!0),Mp.load(ip,function($p){try{gp.parse($p,pp,function(Tp){rp(Tp),gp.manager.itemEnd(ip)},Ap)}catch(Tp){Ap(Tp)}},fp,Ap)},setDRACOLoader:function(ip){return this.dracoLoader=ip,this},setDDSLoader:function(ip){return this.ddsLoader=ip,this},parse:function(ip,rp,fp,up){var pp,gp={};if(typeof ip=="string")pp=ip;else if(e$2.LoaderUtils.decodeText(new Uint8Array(ip,0,4))===Ou){try{gp[Cu.KHR_BINARY_GLTF]=new ku(ip)}catch(sp){return void(up&&up(sp))}pp=gp[Cu.KHR_BINARY_GLTF].content}else pp=e$2.LoaderUtils.decodeText(new Uint8Array(ip));var Ap=JSON.parse(pp);if(Ap.asset===void 0||Ap.asset.version[0]<2)up&&up(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(Ap.extensionsUsed)for(var Mp=0;Mp<Ap.extensionsUsed.length;++Mp){var $p=Ap.extensionsUsed[Mp],Tp=Ap.extensionsRequired||[];switch($p){case Cu.KHR_LIGHTS_PUNCTUAL:gp[$p]=new Bu(Ap);break;case Cu.KHR_MATERIALS_CLEARCOAT:gp[$p]=new Lu;break;case Cu.KHR_MATERIALS_UNLIT:gp[$p]=new Ru;break;case Cu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:gp[$p]=new Gu;break;case Cu.KHR_DRACO_MESH_COMPRESSION:gp[$p]=new Fu(Ap,this.dracoLoader);break;case Cu.MSFT_TEXTURE_DDS:gp[$p]=new Pu(this.ddsLoader);break;case Cu.KHR_TEXTURE_TRANSFORM:gp[$p]=new Nu;break;case Cu.KHR_MESH_QUANTIZATION:gp[$p]=new Hu;break;default:Tp.indexOf($p)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+$p+'".')}}var np=new wp(Ap,gp,{path:rp||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});np.fileLoader.setRequestHeader(this.requestHeader),np.parse(fp,up)}}});var Cu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function Pu(ip){if(!ip)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Cu.MSFT_TEXTURE_DDS,this.ddsLoader=ip}function Bu(ip){this.name=Cu.KHR_LIGHTS_PUNCTUAL;var rp=ip.extensions&&ip.extensions[Cu.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=rp.lights||[]}function Ru(){this.name=Cu.KHR_MATERIALS_UNLIT}function Lu(){this.name=Cu.KHR_MATERIALS_CLEARCOAT}Bu.prototype.loadLight=function(ip){var rp,fp=this.lightDefs[ip],up=new e$2.Color(16777215);fp.color!==void 0&&up.fromArray(fp.color);var pp=fp.range!==void 0?fp.range:0;switch(fp.type){case"directional":(rp=new e$2.DirectionalLight(up)).target.position.set(0,0,-1),rp.add(rp.target);break;case"point":(rp=new e$2.PointLight(up)).distance=pp;break;case"spot":(rp=new e$2.SpotLight(up)).distance=pp,fp.spot=fp.spot||{},fp.spot.innerConeAngle=fp.spot.innerConeAngle!==void 0?fp.spot.innerConeAngle:0,fp.spot.outerConeAngle=fp.spot.outerConeAngle!==void 0?fp.spot.outerConeAngle:Math.PI/4,rp.angle=fp.spot.outerConeAngle,rp.penumbra=1-fp.spot.innerConeAngle/fp.spot.outerConeAngle,rp.target.position.set(0,0,-1),rp.add(rp.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+fp.type+'".')}return rp.position.set(0,0,0),rp.decay=2,fp.intensity!==void 0&&(rp.intensity=fp.intensity),rp.name=fp.name||"light_"+ip,Promise.resolve(rp)},Ru.prototype.getMaterialType=function(){return e$2.MeshBasicMaterial},Ru.prototype.extendParams=function(ip,rp,fp){var up=[];ip.color=new e$2.Color(1,1,1),ip.opacity=1;var pp=rp.pbrMetallicRoughness;if(pp){if(Array.isArray(pp.baseColorFactor)){var gp=pp.baseColorFactor;ip.color.fromArray(gp),ip.opacity=gp[3]}pp.baseColorTexture!==void 0&&up.push(fp.assignTexture(ip,"map",pp.baseColorTexture))}return Promise.all(up)},Lu.prototype.getMaterialType=function(){return e$2.MeshPhysicalMaterial},Lu.prototype.extendParams=function(ip,rp,fp){var up=[],pp=rp.extensions[this.name];if(pp.clearcoatFactor!==void 0&&(ip.clearcoat=pp.clearcoatFactor),pp.clearcoatTexture!==void 0&&up.push(fp.assignTexture(ip,"clearcoatMap",pp.clearcoatTexture)),pp.clearcoatRoughnessFactor!==void 0&&(ip.clearcoatRoughness=pp.clearcoatRoughnessFactor),pp.clearcoatRoughnessTexture!==void 0&&up.push(fp.assignTexture(ip,"clearcoatRoughnessMap",pp.clearcoatRoughnessTexture)),pp.clearcoatNormalTexture!==void 0&&(up.push(fp.assignTexture(ip,"clearcoatNormalMap",pp.clearcoatNormalTexture)),pp.clearcoatNormalTexture.scale!==void 0)){var gp=pp.clearcoatNormalTexture.scale;ip.clearcoatNormalScale=new e$2.Vector2(gp,gp)}return Promise.all(up)};var Ou="glTF",Du=1313821514,$u=5130562;function ku(ip){this.name=Cu.KHR_BINARY_GLTF,this.content=null,this.body=null;var rp=new DataView(ip,0,12);if(this.header={magic:e$2.LoaderUtils.decodeText(new Uint8Array(ip.slice(0,4))),version:rp.getUint32(4,!0),length:rp.getUint32(8,!0)},this.header.magic!==Ou)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var fp=new DataView(ip,12),up=0;up<fp.byteLength;){var pp=fp.getUint32(up,!0);up+=4;var gp=fp.getUint32(up,!0);if(up+=4,gp===Du){var Ap=new Uint8Array(ip,12+up,pp);this.content=e$2.LoaderUtils.decodeText(Ap)}else if(gp===$u){var Mp=12+up;this.body=ip.slice(Mp,Mp+pp)}up+=pp}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function Fu(ip,rp){if(!rp)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Cu.KHR_DRACO_MESH_COMPRESSION,this.json=ip,this.dracoLoader=rp,this.dracoLoader.preload()}function Nu(){this.name=Cu.KHR_TEXTURE_TRANSFORM}function Vu(ip){e$2.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var rp=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),fp=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),up=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),pp=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),gp=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),Ap={specular:{value:new e$2.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Ap,this.onBeforeCompile=function(Mp){for(var $p in Ap)Mp.uniforms[$p]=Ap[$p];Mp.fragmentShader=Mp.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),Mp.fragmentShader=Mp.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),Mp.fragmentShader=Mp.fragmentShader.replace("#include <roughnessmap_pars_fragment>",rp),Mp.fragmentShader=Mp.fragmentShader.replace("#include <metalnessmap_pars_fragment>",fp),Mp.fragmentShader=Mp.fragmentShader.replace("#include <roughnessmap_fragment>",up),Mp.fragmentShader=Mp.fragmentShader.replace("#include <metalnessmap_fragment>",pp),Mp.fragmentShader=Mp.fragmentShader.replace("#include <lights_physical_fragment>",gp)},Object.defineProperties(this,{specular:{get:function(){return Ap.specular.value},set:function(Mp){Ap.specular.value=Mp}},specularMap:{get:function(){return Ap.specularMap.value},set:function(Mp){Ap.specularMap.value=Mp}},glossiness:{get:function(){return Ap.glossiness.value},set:function(Mp){Ap.glossiness.value=Mp}},glossinessMap:{get:function(){return Ap.glossinessMap.value},set:function(Mp){Ap.glossinessMap.value=Mp,Mp?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(ip)}function Gu(){return{name:Cu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Vu},extendParams:function(ip,rp,fp){var up=rp.extensions[this.name];ip.color=new e$2.Color(1,1,1),ip.opacity=1;var pp=[];if(Array.isArray(up.diffuseFactor)){var gp=up.diffuseFactor;ip.color.fromArray(gp),ip.opacity=gp[3]}if(up.diffuseTexture!==void 0&&pp.push(fp.assignTexture(ip,"map",up.diffuseTexture)),ip.emissive=new e$2.Color(0,0,0),ip.glossiness=up.glossinessFactor!==void 0?up.glossinessFactor:1,ip.specular=new e$2.Color(1,1,1),Array.isArray(up.specularFactor)&&ip.specular.fromArray(up.specularFactor),up.specularGlossinessTexture!==void 0){var Ap=up.specularGlossinessTexture;pp.push(fp.assignTexture(ip,"glossinessMap",Ap)),pp.push(fp.assignTexture(ip,"specularMap",Ap))}return Promise.all(pp)},createMaterial:function(ip){var rp=new Vu(ip);return rp.fog=!0,rp.color=ip.color,rp.map=ip.map===void 0?null:ip.map,rp.lightMap=null,rp.lightMapIntensity=1,rp.aoMap=ip.aoMap===void 0?null:ip.aoMap,rp.aoMapIntensity=1,rp.emissive=ip.emissive,rp.emissiveIntensity=1,rp.emissiveMap=ip.emissiveMap===void 0?null:ip.emissiveMap,rp.bumpMap=ip.bumpMap===void 0?null:ip.bumpMap,rp.bumpScale=1,rp.normalMap=ip.normalMap===void 0?null:ip.normalMap,rp.normalMapType=e$2.TangentSpaceNormalMap,ip.normalScale&&(rp.normalScale=ip.normalScale),rp.displacementMap=null,rp.displacementScale=1,rp.displacementBias=0,rp.specularMap=ip.specularMap===void 0?null:ip.specularMap,rp.specular=ip.specular,rp.glossinessMap=ip.glossinessMap===void 0?null:ip.glossinessMap,rp.glossiness=ip.glossiness,rp.alphaMap=null,rp.envMap=ip.envMap===void 0?null:ip.envMap,rp.envMapIntensity=1,rp.refractionRatio=.98,rp}}}function Hu(){this.name=Cu.KHR_MESH_QUANTIZATION}function ju(ip,rp,fp,up){e$2.Interpolant.call(this,ip,rp,fp,up)}Fu.prototype.decodePrimitive=function(ip,rp){var fp=this.json,up=this.dracoLoader,pp=ip.extensions[this.name].bufferView,gp=ip.extensions[this.name].attributes,Ap={},Mp={},$p={};for(var Tp in gp){var np=Ju[Tp]||Tp.toLowerCase();Ap[np]=gp[Tp]}for(Tp in ip.attributes)if(np=Ju[Tp]||Tp.toLowerCase(),gp[Tp]!==void 0){var sp=fp.accessors[ip.attributes[Tp]],Ip=_h[sp.componentType];$p[np]=Ip,Mp[np]=sp.normalized===!0}return rp.getDependency("bufferView",pp).then(function(Cp){return new Promise(function(Vp){up.decodeDracoFile(Cp,function(Fp){for(var Gp in Fp.attributes){var qp=Fp.attributes[Gp],Wp=Mp[Gp];Wp!==void 0&&(qp.normalized=Wp)}Vp(Fp)},Ap,$p)})})},Nu.prototype.extendTexture=function(ip,rp){return ip=ip.clone(),rp.offset!==void 0&&ip.offset.fromArray(rp.offset),rp.rotation!==void 0&&(ip.rotation=rp.rotation),rp.scale!==void 0&&ip.repeat.fromArray(rp.scale),rp.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),ip.needsUpdate=!0,ip},Vu.prototype=Object.create(e$2.MeshStandardMaterial.prototype),Vu.prototype.constructor=Vu,Vu.prototype.copy=function(ip){return e$2.MeshStandardMaterial.prototype.copy.call(this,ip),this.specularMap=ip.specularMap,this.specular.copy(ip.specular),this.glossinessMap=ip.glossinessMap,this.glossiness=ip.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},ju.prototype=Object.create(e$2.Interpolant.prototype),ju.prototype.constructor=ju,ju.prototype.copySampleValue_=function(ip){for(var rp=this.resultBuffer,fp=this.sampleValues,up=this.valueSize,pp=ip*up*3+up,gp=0;gp!==up;gp++)rp[gp]=fp[pp+gp];return rp},ju.prototype.beforeStart_=ju.prototype.copySampleValue_,ju.prototype.afterEnd_=ju.prototype.copySampleValue_,ju.prototype.interpolate_=function(ip,rp,fp,up){for(var pp=this.resultBuffer,gp=this.sampleValues,Ap=this.valueSize,Mp=2*Ap,$p=3*Ap,Tp=up-rp,np=(fp-rp)/Tp,sp=np*np,Ip=sp*np,Cp=ip*$p,Vp=Cp-$p,Fp=-2*Ip+3*sp,Gp=Ip-sp,qp=1-Fp,Wp=Gp-sp+np,Jp=0;Jp!==Ap;Jp++){var Hp=gp[Vp+Jp+Ap],Kp=gp[Vp+Jp+Mp]*Tp,jp=gp[Cp+Jp+Ap],Yp=gp[Cp+Jp]*Tp;pp[Jp]=qp*Hp+Wp*Kp+Fp*jp+Gp*Yp}return pp};var Uu=0,zu=1,Wu=2,Qu=3,qu=4,Yu=5,Xc=6,_h={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_d={9728:e$2.NearestFilter,9729:e$2.LinearFilter,9984:e$2.NearestMipmapNearestFilter,9985:e$2.LinearMipmapNearestFilter,9986:e$2.NearestMipmapLinearFilter,9987:e$2.LinearMipmapLinearFilter},Ku={33071:e$2.ClampToEdgeWrapping,33648:e$2.MirroredRepeatWrapping,10497:e$2.RepeatWrapping},Xu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ju={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_c={CUBICSPLINE:void 0,LINEAR:e$2.InterpolateLinear,STEP:e$2.InterpolateDiscrete},_f="OPAQUE",ep="MASK",tp="BLEND",op={"image/png":e$2.RGBAFormat,"image/jpeg":e$2.RGBFormat};function hp(ip,rp){return typeof ip!="string"||ip===""?"":(/^https?:\/\//i.test(rp)&&/^\//.test(ip)&&(rp=rp.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(ip)||/^data:.*,.*$/i.test(ip)||/^blob:.*$/i.test(ip)?ip:rp+ip)}function cp(ip,rp,fp){for(var up in fp.extensions)ip[up]===void 0&&(rp.userData.gltfExtensions=rp.userData.gltfExtensions||{},rp.userData.gltfExtensions[up]=fp.extensions[up])}function Sp(ip,rp){rp.extras!==void 0&&(typeof rp.extras=="object"?Object.assign(ip.userData,rp.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+rp.extras))}function yp(ip,rp){if(ip.updateMorphTargets(),rp.weights!==void 0)for(var fp=0,up=rp.weights.length;fp<up;fp++)ip.morphTargetInfluences[fp]=rp.weights[fp];if(rp.extras&&Array.isArray(rp.extras.targetNames)){var pp=rp.extras.targetNames;if(ip.morphTargetInfluences.length===pp.length)for(ip.morphTargetDictionary={},fp=0,up=pp.length;fp<up;fp++)ip.morphTargetDictionary[pp[fp]]=fp;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Rp(ip){for(var rp="",fp=Object.keys(ip).sort(),up=0,pp=fp.length;up<pp;up++)rp+=fp[up]+":"+ip[fp[up]]+";";return rp}function wp(ip,rp,fp){this.json=ip||{},this.extensions=rp||{},this.options=fp||{},this.cache=new Tu,this.associations=new Map,this.primitiveCache={},this.textureLoader=new e$2.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e$2.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function Pp(ip,rp,fp){var up=rp.attributes,pp=[];function gp(Tp,np){return fp.getDependency("accessor",Tp).then(function(sp){ip.setAttribute(np,sp)})}for(var Ap in up){var Mp=Ju[Ap]||Ap.toLowerCase();Mp in ip.attributes||pp.push(gp(up[Ap],Mp))}if(rp.indices!==void 0&&!ip.index){var $p=fp.getDependency("accessor",rp.indices).then(function(Tp){ip.setIndex(Tp)});pp.push($p)}return Sp(ip,rp),function(Tp,np,sp){var Ip=np.attributes,Cp=new e$2.Box3;if(Ip.POSITION!==void 0){var Vp=(Kp=sp.json.accessors[Ip.POSITION]).min,Fp=Kp.max;if(Vp!==void 0&&Fp!==void 0){Cp.set(new e$2.Vector3(Vp[0],Vp[1],Vp[2]),new e$2.Vector3(Fp[0],Fp[1],Fp[2]));var Gp=np.targets;if(Gp!==void 0){for(var qp=new e$2.Vector3,Wp=new e$2.Vector3,Jp=0,Hp=Gp.length;Jp<Hp;Jp++){var Kp,jp=Gp[Jp];jp.POSITION!==void 0&&(Vp=(Kp=sp.json.accessors[jp.POSITION]).min,Fp=Kp.max,Vp!==void 0&&Fp!==void 0?(Wp.setX(Math.max(Math.abs(Vp[0]),Math.abs(Fp[0]))),Wp.setY(Math.max(Math.abs(Vp[1]),Math.abs(Fp[1]))),Wp.setZ(Math.max(Math.abs(Vp[2]),Math.abs(Fp[2]))),qp.max(Wp)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}Cp.expandByVector(qp)}Tp.boundingBox=Cp;var Yp=new e$2.Sphere;Cp.getCenter(Yp.center),Yp.radius=Cp.min.distanceTo(Cp.max)/2,Tp.boundingSphere=Yp}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(ip,rp,fp),Promise.all(pp).then(function(){return rp.targets!==void 0?function(Tp,np,sp){for(var Ip=!1,Cp=!1,Vp=0,Fp=np.length;Vp<Fp&&((Wp=np[Vp]).POSITION!==void 0&&(Ip=!0),Wp.NORMAL!==void 0&&(Cp=!0),!Ip||!Cp);Vp++);if(!Ip&&!Cp)return Promise.resolve(Tp);var Gp=[],qp=[];for(Vp=0,Fp=np.length;Vp<Fp;Vp++){var Wp=np[Vp];if(Ip){var Jp=Wp.POSITION!==void 0?sp.getDependency("accessor",Wp.POSITION):Tp.attributes.position;Gp.push(Jp)}Cp&&(Jp=Wp.NORMAL!==void 0?sp.getDependency("accessor",Wp.NORMAL):Tp.attributes.normal,qp.push(Jp))}return Promise.all([Promise.all(Gp),Promise.all(qp)]).then(function(Hp){var Kp=Hp[0],jp=Hp[1];return Ip&&(Tp.morphAttributes.position=Kp),Cp&&(Tp.morphAttributes.normal=jp),Tp.morphTargetsRelative=!0,Tp})}(ip,rp.targets,fp):ip})}function Ep(ip,rp){var fp=ip.getIndex();if(fp===null){var up=[],pp=ip.getAttribute("position");if(pp===void 0)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ip;for(var gp=0;gp<pp.count;gp++)up.push(gp);ip.setIndex(up),fp=ip.getIndex()}var Ap=fp.count-2,Mp=[];if(rp===e$2.TriangleFanDrawMode)for(gp=1;gp<=Ap;gp++)Mp.push(fp.getX(0)),Mp.push(fp.getX(gp)),Mp.push(fp.getX(gp+1));else for(gp=0;gp<Ap;gp++)gp%2==0?(Mp.push(fp.getX(gp)),Mp.push(fp.getX(gp+1)),Mp.push(fp.getX(gp+2))):(Mp.push(fp.getX(gp+2)),Mp.push(fp.getX(gp+1)),Mp.push(fp.getX(gp)));Mp.length/3!==Ap&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var $p=ip.clone();return $p.setIndex(Mp),$p}return wp.prototype.parse=function(ip,rp){var fp=this,up=this.json,pp=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(gp){var Ap={scene:gp[0][up.scene||0],scenes:gp[0],animations:gp[1],cameras:gp[2],asset:up.asset,parser:fp,userData:{}};cp(pp,Ap,up),Sp(Ap,up),ip(Ap)}).catch(rp)},wp.prototype.markDefs=function(){for(var ip=this.json.nodes||[],rp=this.json.skins||[],fp=this.json.meshes||[],up={},pp={},gp=0,Ap=rp.length;gp<Ap;gp++)for(var Mp=rp[gp].joints,$p=0,Tp=Mp.length;$p<Tp;$p++)ip[Mp[$p]].isBone=!0;for(var np=0,sp=ip.length;np<sp;np++){var Ip=ip[np];Ip.mesh!==void 0&&(up[Ip.mesh]===void 0&&(up[Ip.mesh]=pp[Ip.mesh]=0),up[Ip.mesh]++,Ip.skin!==void 0&&(fp[Ip.mesh].isSkinnedMesh=!0))}this.json.meshReferences=up,this.json.meshUses=pp},wp.prototype.getDependency=function(ip,rp){var fp=ip+":"+rp,up=this.cache.get(fp);if(!up){switch(ip){case"scene":up=this.loadScene(rp);break;case"node":up=this.loadNode(rp);break;case"mesh":up=this.loadMesh(rp);break;case"accessor":up=this.loadAccessor(rp);break;case"bufferView":up=this.loadBufferView(rp);break;case"buffer":up=this.loadBuffer(rp);break;case"material":up=this.loadMaterial(rp);break;case"texture":up=this.loadTexture(rp);break;case"skin":up=this.loadSkin(rp);break;case"animation":up=this.loadAnimation(rp);break;case"camera":up=this.loadCamera(rp);break;case"light":up=this.extensions[Cu.KHR_LIGHTS_PUNCTUAL].loadLight(rp);break;default:throw new Error("Unknown type: "+ip)}this.cache.add(fp,up)}return up},wp.prototype.getDependencies=function(ip){var rp=this.cache.get(ip);if(!rp){var fp=this,up=this.json[ip+(ip==="mesh"?"es":"s")]||[];rp=Promise.all(up.map(function(pp,gp){return fp.getDependency(ip,gp)})),this.cache.add(ip,rp)}return rp},wp.prototype.loadBuffer=function(ip){var rp=this.json.buffers[ip],fp=this.fileLoader;if(rp.type&&rp.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+rp.type+" buffer type is not supported.");if(rp.uri===void 0&&ip===0)return Promise.resolve(this.extensions[Cu.KHR_BINARY_GLTF].body);var up=this.options;return new Promise(function(pp,gp){fp.load(hp(rp.uri,up.path),pp,void 0,function(){gp(new Error('THREE.GLTFLoader: Failed to load buffer "'+rp.uri+'".'))})})},wp.prototype.loadBufferView=function(ip){var rp=this.json.bufferViews[ip];return this.getDependency("buffer",rp.buffer).then(function(fp){var up=rp.byteLength||0,pp=rp.byteOffset||0;return fp.slice(pp,pp+up)})},wp.prototype.loadAccessor=function(ip){var rp=this,fp=this.json,up=this.json.accessors[ip];if(up.bufferView===void 0&&up.sparse===void 0)return Promise.resolve(null);var pp=[];return up.bufferView!==void 0?pp.push(this.getDependency("bufferView",up.bufferView)):pp.push(null),up.sparse!==void 0&&(pp.push(this.getDependency("bufferView",up.sparse.indices.bufferView)),pp.push(this.getDependency("bufferView",up.sparse.values.bufferView))),Promise.all(pp).then(function(gp){var Ap,Mp,$p=gp[0],Tp=Xu[up.type],np=_h[up.componentType],sp=np.BYTES_PER_ELEMENT,Ip=sp*Tp,Cp=up.byteOffset||0,Vp=up.bufferView!==void 0?fp.bufferViews[up.bufferView].byteStride:void 0,Fp=up.normalized===!0;if(Vp&&Vp!==Ip){var Gp=Math.floor(Cp/Vp),qp="InterleavedBuffer:"+up.bufferView+":"+up.componentType+":"+Gp+":"+up.count,Wp=rp.cache.get(qp);Wp||(Ap=new np($p,Gp*Vp,up.count*Vp/sp),Wp=new e$2.InterleavedBuffer(Ap,Vp/sp),rp.cache.add(qp,Wp)),Mp=new e$2.InterleavedBufferAttribute(Wp,Tp,Cp%Vp/sp,Fp)}else Ap=$p===null?new np(up.count*Tp):new np($p,Cp,up.count*Tp),Mp=new e$2.BufferAttribute(Ap,Tp,Fp);if(up.sparse!==void 0){var Jp=Xu.SCALAR,Hp=_h[up.sparse.indices.componentType],Kp=up.sparse.indices.byteOffset||0,jp=up.sparse.values.byteOffset||0,Yp=new Hp(gp[1],Kp,up.sparse.count*Jp),_p=new np(gp[2],jp,up.sparse.count*Tp);$p!==null&&(Mp=new e$2.BufferAttribute(Mp.array.slice(),Mp.itemSize,Mp.normalized));for(var Qp=0,Zp=Yp.length;Qp<Zp;Qp++){var tm=Yp[Qp];if(Mp.setX(tm,_p[Qp*Tp]),Tp>=2&&Mp.setY(tm,_p[Qp*Tp+1]),Tp>=3&&Mp.setZ(tm,_p[Qp*Tp+2]),Tp>=4&&Mp.setW(tm,_p[Qp*Tp+3]),Tp>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Mp})},wp.prototype.loadTexture=function(ip){var rp,fp=this,up=this.json,pp=this.options,gp=this.textureLoader,Ap=self.URL||self.webkitURL,Mp=up.textures[ip],$p=Mp.extensions||{},Tp=(rp=$p[Cu.MSFT_TEXTURE_DDS]?up.images[$p[Cu.MSFT_TEXTURE_DDS].source]:up.images[Mp.source]).uri,np=!1;return rp.bufferView!==void 0&&(Tp=fp.getDependency("bufferView",rp.bufferView).then(function(sp){np=!0;var Ip=new Blob([sp],{type:rp.mimeType});return Tp=Ap.createObjectURL(Ip)})),Promise.resolve(Tp).then(function(sp){var Ip=pp.manager.getHandler(sp);return Ip||(Ip=$p[Cu.MSFT_TEXTURE_DDS]?fp.extensions[Cu.MSFT_TEXTURE_DDS].ddsLoader:gp),new Promise(function(Cp,Vp){Ip.load(hp(sp,pp.path),Cp,void 0,Vp)})}).then(function(sp){np===!0&&Ap.revokeObjectURL(Tp),sp.flipY=!1,Mp.name&&(sp.name=Mp.name),rp.mimeType in op&&(sp.format=op[rp.mimeType]);var Ip=(up.samplers||{})[Mp.sampler]||{};return sp.magFilter=_d[Ip.magFilter]||e$2.LinearFilter,sp.minFilter=_d[Ip.minFilter]||e$2.LinearMipmapLinearFilter,sp.wrapS=Ku[Ip.wrapS]||e$2.RepeatWrapping,sp.wrapT=Ku[Ip.wrapT]||e$2.RepeatWrapping,fp.associations.set(sp,{type:"textures",index:ip}),sp})},wp.prototype.assignTexture=function(ip,rp,fp){var up=this;return this.getDependency("texture",fp.index).then(function(pp){if(!pp.isCompressedTexture)switch(rp){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":pp.format=e$2.RGBFormat}if(fp.texCoord===void 0||fp.texCoord==0||rp==="aoMap"&&fp.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+fp.texCoord+" for texture "+rp+" not yet supported."),up.extensions[Cu.KHR_TEXTURE_TRANSFORM]){var gp=fp.extensions!==void 0?fp.extensions[Cu.KHR_TEXTURE_TRANSFORM]:void 0;if(gp){var Ap=this.associations.get(pp);pp=up.extensions[Cu.KHR_TEXTURE_TRANSFORM].extendTexture(pp,gp),this.associations.set(pp,Ap)}}ip[rp]=pp})},wp.prototype.assignFinalMaterial=function(ip){var rp=ip.geometry,fp=ip.material,up=rp.attributes.tangent!==void 0,pp=rp.attributes.color!==void 0,gp=rp.attributes.normal===void 0,Ap=ip.isSkinnedMesh===!0,Mp=Object.keys(rp.morphAttributes).length>0,$p=Mp&&rp.morphAttributes.normal!==void 0;if(ip.isPoints){var Tp="PointsMaterial:"+fp.uuid,np=this.cache.get(Tp);np||(np=new e$2.PointsMaterial,e$2.Material.prototype.copy.call(np,fp),np.color.copy(fp.color),np.map=fp.map,np.sizeAttenuation=!1,this.cache.add(Tp,np)),fp=np}else if(ip.isLine){Tp="LineBasicMaterial:"+fp.uuid;var sp=this.cache.get(Tp);sp||(sp=new e$2.LineBasicMaterial,e$2.Material.prototype.copy.call(sp,fp),sp.color.copy(fp.color),this.cache.add(Tp,sp)),fp=sp}if(up||pp||gp||Ap||Mp){Tp="ClonedMaterial:"+fp.uuid+":",fp.isGLTFSpecularGlossinessMaterial&&(Tp+="specular-glossiness:"),Ap&&(Tp+="skinning:"),up&&(Tp+="vertex-tangents:"),pp&&(Tp+="vertex-colors:"),gp&&(Tp+="flat-shading:"),Mp&&(Tp+="morph-targets:"),$p&&(Tp+="morph-normals:");var Ip=this.cache.get(Tp);Ip||(Ip=fp.clone(),Ap&&(Ip.skinning=!0),up&&(Ip.vertexTangents=!0),pp&&(Ip.vertexColors=!0),gp&&(Ip.flatShading=!0),Mp&&(Ip.morphTargets=!0),$p&&(Ip.morphNormals=!0),this.cache.add(Tp,Ip),this.associations.set(Ip,this.associations.get(fp))),fp=Ip}fp.aoMap&&rp.attributes.uv2===void 0&&rp.attributes.uv!==void 0&&rp.setAttribute("uv2",rp.attributes.uv),fp.normalScale&&!up&&(fp.normalScale.y=-fp.normalScale.y),fp.clearcoatNormalScale&&!up&&(fp.clearcoatNormalScale.y=-fp.clearcoatNormalScale.y),ip.material=fp},wp.prototype.loadMaterial=function(ip){var rp,fp=this,up=this.json,pp=this.extensions,gp=up.materials[ip],Ap={},Mp=gp.extensions||{},$p=[];if(Mp[Cu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Tp=pp[Cu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];rp=Tp.getMaterialType(),$p.push(Tp.extendParams(Ap,gp,fp))}else if(Mp[Cu.KHR_MATERIALS_UNLIT]){var np=pp[Cu.KHR_MATERIALS_UNLIT];rp=np.getMaterialType(),$p.push(np.extendParams(Ap,gp,fp))}else{rp=e$2.MeshStandardMaterial;var sp=gp.pbrMetallicRoughness||{};if(Ap.color=new e$2.Color(1,1,1),Ap.opacity=1,Array.isArray(sp.baseColorFactor)){var Ip=sp.baseColorFactor;Ap.color.fromArray(Ip),Ap.opacity=Ip[3]}sp.baseColorTexture!==void 0&&$p.push(fp.assignTexture(Ap,"map",sp.baseColorTexture)),Ap.metalness=sp.metallicFactor!==void 0?sp.metallicFactor:1,Ap.roughness=sp.roughnessFactor!==void 0?sp.roughnessFactor:1,sp.metallicRoughnessTexture!==void 0&&($p.push(fp.assignTexture(Ap,"metalnessMap",sp.metallicRoughnessTexture)),$p.push(fp.assignTexture(Ap,"roughnessMap",sp.metallicRoughnessTexture)))}gp.doubleSided===!0&&(Ap.side=e$2.DoubleSide);var Cp=gp.alphaMode||_f;if(Cp===tp?(Ap.transparent=!0,Ap.depthWrite=!1):(Ap.transparent=!1,Cp===ep&&(Ap.alphaTest=gp.alphaCutoff!==void 0?gp.alphaCutoff:.5)),gp.normalTexture!==void 0&&rp!==e$2.MeshBasicMaterial&&($p.push(fp.assignTexture(Ap,"normalMap",gp.normalTexture)),Ap.normalScale=new e$2.Vector2(1,1),gp.normalTexture.scale!==void 0&&Ap.normalScale.set(gp.normalTexture.scale,gp.normalTexture.scale)),gp.occlusionTexture!==void 0&&rp!==e$2.MeshBasicMaterial&&($p.push(fp.assignTexture(Ap,"aoMap",gp.occlusionTexture)),gp.occlusionTexture.strength!==void 0&&(Ap.aoMapIntensity=gp.occlusionTexture.strength)),gp.emissiveFactor!==void 0&&rp!==e$2.MeshBasicMaterial&&(Ap.emissive=new e$2.Color().fromArray(gp.emissiveFactor)),gp.emissiveTexture!==void 0&&rp!==e$2.MeshBasicMaterial&&$p.push(fp.assignTexture(Ap,"emissiveMap",gp.emissiveTexture)),Mp[Cu.KHR_MATERIALS_CLEARCOAT]){var Vp=pp[Cu.KHR_MATERIALS_CLEARCOAT];rp=Vp.getMaterialType(),$p.push(Vp.extendParams(Ap,{extensions:Mp},fp))}return Promise.all($p).then(function(){var Fp;return Fp=rp===Vu?pp[Cu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Ap):new rp(Ap),gp.name&&(Fp.name=gp.name),Fp.map&&(Fp.map.encoding=e$2.sRGBEncoding),Fp.emissiveMap&&(Fp.emissiveMap.encoding=e$2.sRGBEncoding),Sp(Fp,gp),fp.associations.set(Fp,{type:"materials",index:ip}),gp.extensions&&cp(pp,Fp,gp),Fp})},wp.prototype.loadGeometries=function(ip){var rp=this,fp=this.extensions,up=this.primitiveCache;function pp(Vp){return fp[Cu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Vp,rp).then(function(Fp){return Pp(Fp,Vp,rp)})}for(var gp,Ap,Mp=[],$p=0,Tp=ip.length;$p<Tp;$p++){var np,sp=ip[$p],Ip=(Ap=void 0,(Ap=(gp=sp).extensions&&gp.extensions[Cu.KHR_DRACO_MESH_COMPRESSION])?"draco:"+Ap.bufferView+":"+Ap.indices+":"+Rp(Ap.attributes):gp.indices+":"+Rp(gp.attributes)+":"+gp.mode),Cp=up[Ip];Cp?Mp.push(Cp.promise):(np=sp.extensions&&sp.extensions[Cu.KHR_DRACO_MESH_COMPRESSION]?pp(sp):Pp(new e$2.BufferGeometry,sp,rp),up[Ip]={primitive:sp,promise:np},Mp.push(np))}return Promise.all(Mp)},wp.prototype.loadMesh=function(ip){for(var rp,fp=this,up=this.json.meshes[ip],pp=up.primitives,gp=[],Ap=0,Mp=pp.length;Ap<Mp;Ap++){var $p=pp[Ap].material===void 0?((rp=this.cache).DefaultMaterial===void 0&&(rp.DefaultMaterial=new e$2.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e$2.FrontSide})),rp.DefaultMaterial):this.getDependency("material",pp[Ap].material);gp.push($p)}return gp.push(fp.loadGeometries(pp)),Promise.all(gp).then(function(Tp){for(var np=Tp.slice(0,Tp.length-1),sp=Tp[Tp.length-1],Ip=[],Cp=0,Vp=sp.length;Cp<Vp;Cp++){var Fp,Gp=sp[Cp],qp=pp[Cp],Wp=np[Cp];if(qp.mode===qu||qp.mode===Yu||qp.mode===Xc||qp.mode===void 0)(Fp=up.isSkinnedMesh===!0?new e$2.SkinnedMesh(Gp,Wp):new e$2.Mesh(Gp,Wp)).isSkinnedMesh!==!0||Fp.geometry.attributes.skinWeight.normalized||Fp.normalizeSkinWeights(),qp.mode===Yu?Fp.geometry=Ep(Fp.geometry,e$2.TriangleStripDrawMode):qp.mode===Xc&&(Fp.geometry=Ep(Fp.geometry,e$2.TriangleFanDrawMode));else if(qp.mode===zu)Fp=new e$2.LineSegments(Gp,Wp);else if(qp.mode===Qu)Fp=new e$2.Line(Gp,Wp);else if(qp.mode===Wu)Fp=new e$2.LineLoop(Gp,Wp);else{if(qp.mode!==Uu)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+qp.mode);Fp=new e$2.Points(Gp,Wp)}Object.keys(Fp.geometry.morphAttributes).length>0&&yp(Fp,up),Fp.name=up.name||"mesh_"+ip,sp.length>1&&(Fp.name+="_"+Cp),Sp(Fp,up),fp.assignFinalMaterial(Fp),Ip.push(Fp)}if(Ip.length===1)return Ip[0];var Jp=new e$2.Group;for(Cp=0,Vp=Ip.length;Cp<Vp;Cp++)Jp.add(Ip[Cp]);return Jp})},wp.prototype.loadCamera=function(ip){var rp,fp=this.json.cameras[ip],up=fp[fp.type];if(up)return fp.type==="perspective"?rp=new e$2.PerspectiveCamera(e$2.MathUtils.radToDeg(up.yfov),up.aspectRatio||1,up.znear||1,up.zfar||2e6):fp.type==="orthographic"&&(rp=new e$2.OrthographicCamera(-up.xmag,up.xmag,up.ymag,-up.ymag,up.znear,up.zfar)),fp.name&&(rp.name=fp.name),Sp(rp,fp),Promise.resolve(rp);console.warn("THREE.GLTFLoader: Missing camera parameters.")},wp.prototype.loadSkin=function(ip){var rp=this.json.skins[ip],fp={joints:rp.joints};return rp.inverseBindMatrices===void 0?Promise.resolve(fp):this.getDependency("accessor",rp.inverseBindMatrices).then(function(up){return fp.inverseBindMatrices=up,fp})},wp.prototype.loadAnimation=function(ip){for(var rp=this.json.animations[ip],fp=[],up=[],pp=[],gp=[],Ap=[],Mp=0,$p=rp.channels.length;Mp<$p;Mp++){var Tp=rp.channels[Mp],np=rp.samplers[Tp.sampler],sp=Tp.target,Ip=sp.node!==void 0?sp.node:sp.id,Cp=rp.parameters!==void 0?rp.parameters[np.input]:np.input,Vp=rp.parameters!==void 0?rp.parameters[np.output]:np.output;fp.push(this.getDependency("node",Ip)),up.push(this.getDependency("accessor",Cp)),pp.push(this.getDependency("accessor",Vp)),gp.push(np),Ap.push(sp)}return Promise.all([Promise.all(fp),Promise.all(up),Promise.all(pp),Promise.all(gp),Promise.all(Ap)]).then(function(Fp){for(var Gp=Fp[0],qp=Fp[1],Wp=Fp[2],Jp=Fp[3],Hp=Fp[4],Kp=[],jp=0,Yp=Gp.length;jp<Yp;jp++){var _p=Gp[jp],Qp=qp[jp],Zp=Wp[jp],tm=Jp[jp],em=Hp[jp];if(_p!==void 0){var lm;switch(_p.updateMatrix(),_p.matrixAutoUpdate=!0,Zu[em.path]){case Zu.weights:lm=e$2.NumberKeyframeTrack;break;case Zu.rotation:lm=e$2.QuaternionKeyframeTrack;break;case Zu.position:case Zu.scale:default:lm=e$2.VectorKeyframeTrack}var pm=_p.name?_p.name:_p.uuid,mm=tm.interpolation!==void 0?_c[tm.interpolation]:e$2.InterpolateLinear,Sm=[];Zu[em.path]===Zu.weights?_p.traverse(function(mp){mp.isMesh===!0&&mp.morphTargetInfluences&&Sm.push(mp.name?mp.name:mp.uuid)}):Sm.push(pm);var dm=Zp.array;if(Zp.normalized){var _m;if(dm.constructor===Int8Array)_m=1/127;else if(dm.constructor===Uint8Array)_m=1/255;else if(dm.constructor==Int16Array)_m=1/32767;else{if(dm.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");_m=1/65535}for(var xm=new Float32Array(dm.length),gm=0,Mm=dm.length;gm<Mm;gm++)xm[gm]=dm[gm]*_m;dm=xm}for(gm=0,Mm=Sm.length;gm<Mm;gm++){var Bm=new lm(Sm[gm]+"."+Zu[em.path],Qp.array,dm,mm);tm.interpolation==="CUBICSPLINE"&&(Bm.createInterpolant=function(mp){return new ju(this.times,this.values,this.getValueSize()/3,mp)},Bm.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Kp.push(Bm)}}}var ym=rp.name?rp.name:"animation_"+ip;return new e$2.AnimationClip(ym,void 0,Kp)})},wp.prototype.loadNode=function(ip){var rp,fp=this.json,up=this.extensions,pp=this,gp=fp.meshReferences,Ap=fp.meshUses,Mp=fp.nodes[ip];return(rp=[],Mp.mesh!==void 0&&rp.push(pp.getDependency("mesh",Mp.mesh).then(function($p){var Tp;if(gp[Mp.mesh]>1){var np=Ap[Mp.mesh]++;(Tp=$p.clone()).name+="_instance_"+np}else Tp=$p;return Mp.weights!==void 0&&Tp.traverse(function(sp){if(sp.isMesh)for(var Ip=0,Cp=Mp.weights.length;Ip<Cp;Ip++)sp.morphTargetInfluences[Ip]=Mp.weights[Ip]}),Tp})),Mp.camera!==void 0&&rp.push(pp.getDependency("camera",Mp.camera)),Mp.extensions&&Mp.extensions[Cu.KHR_LIGHTS_PUNCTUAL]&&Mp.extensions[Cu.KHR_LIGHTS_PUNCTUAL].light!==void 0&&rp.push(pp.getDependency("light",Mp.extensions[Cu.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(rp)).then(function($p){var Tp;if((Tp=Mp.isBone===!0?new e$2.Bone:$p.length>1?new e$2.Group:$p.length===1?$p[0]:new e$2.Object3D)!==$p[0])for(var np=0,sp=$p.length;np<sp;np++)Tp.add($p[np]);if(Mp.name&&(Tp.userData.name=Mp.name,Tp.name=e$2.PropertyBinding.sanitizeNodeName(Mp.name)),Sp(Tp,Mp),Mp.extensions&&cp(up,Tp,Mp),Mp.matrix!==void 0){var Ip=new e$2.Matrix4;Ip.fromArray(Mp.matrix),Tp.applyMatrix4(Ip)}else Mp.translation!==void 0&&Tp.position.fromArray(Mp.translation),Mp.rotation!==void 0&&Tp.quaternion.fromArray(Mp.rotation),Mp.scale!==void 0&&Tp.scale.fromArray(Mp.scale);return pp.associations.set(Tp,{type:"nodes",index:ip}),Tp})},wp.prototype.loadScene=function(){function ip(rp,fp,up,pp){var gp=up.nodes[rp];return pp.getDependency("node",rp).then(function(Ap){return gp.skin===void 0?Ap:pp.getDependency("skin",gp.skin).then(function($p){for(var Tp=[],np=0,sp=(Mp=$p).joints.length;np<sp;np++)Tp.push(pp.getDependency("node",Mp.joints[np]));return Promise.all(Tp)}).then(function($p){return Ap.traverse(function(Tp){if(Tp.isMesh){for(var np=[],sp=[],Ip=0,Cp=$p.length;Ip<Cp;Ip++){var Vp=$p[Ip];if(Vp){np.push(Vp);var Fp=new e$2.Matrix4;Mp.inverseBindMatrices!==void 0&&Fp.fromArray(Mp.inverseBindMatrices.array,16*Ip),sp.push(Fp)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Mp.joints[Ip])}Tp.bind(new e$2.Skeleton(np,sp),Tp.matrixWorld)}}),Ap});var Mp}).then(function(Ap){fp.add(Ap);var Mp=[];if(gp.children)for(var $p=gp.children,Tp=0,np=$p.length;Tp<np;Tp++){var sp=$p[Tp];Mp.push(ip(sp,Ap,up,pp))}return Promise.all(Mp)})}return function(rp){var fp=this.json,up=this.extensions,pp=this.json.scenes[rp],gp=new e$2.Group;pp.name&&(gp.name=pp.name),Sp(gp,pp),pp.extensions&&cp(up,gp,pp);for(var Ap=pp.nodes||[],Mp=[],$p=0,Tp=Ap.length;$p<Tp;$p++)Mp.push(ip(Ap[$p],gp,fp,this));return Promise.all(Mp).then(function(){return gp})}}(),_u}()),Wr=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(1,0,0),Math.PI/2);function Xr(_u){function Tu(Cu){if(Cu.isMesh)return function(Lu){var Ou=new ft;Ou.geometry=Lu.geometry,Ou.geometry.computeVertexNormals(),Ou.geometry.computeBoundingBox(),Ou.geometry.computeBoundingSphere(),Ou.geometry.addGroup(0,Lu.geometry.index.count,0);var Du=new Mt;return Du.uniforms.map.value=Lu.material.map,Du.uniforms.exposure.value=3.3,Du.opacity=1,Lu.material.dispose(),Ou.material=[Du],Ou.position.copy(Lu.position),Ou.quaternion.copy(Lu.quaternion),Ou.scale.copy(Lu.scale),Ou.matrix.compose(Ou.position,Ou.quaternion,Ou.scale),Ou}(Cu);if(Cu.isGroup){for(var Pu=function(Lu){var Ou=new gt;return Ou.position.copy(Lu.position),Ou.quaternion.copy(Lu.quaternion),Ou.scale.copy(Lu.scale),Ou.matrix.compose(Ou.position,Ou.quaternion,Ou.scale),Ou}(Cu),Bu=0;Bu<Cu.children.length;Bu++){var Ru=Tu(Cu.children[Bu]);Pu.add(Ru)}return Pu}return new gt}return new Promise(function(Cu,Pu){var Bu,Ru=new r$3.Matrix4().fromArray(_u.computedTransform);if(((Bu=_u.tileset.asset)===null||Bu===void 0?void 0:Bu.gltfUpAxis)!=="Z"&&Ru.multiply(Wr),_u.content){var Lu=_u.content.gltfArrayBuffer,Ou=_u.contentUrl?_u.contentUrl.slice(0,_u.contentUrl.lastIndexOf("/")+1):"";Gr.parse(Lu,Ou,function(Du){var $u=Du.scene,ku=new gt,Fu=Tu($u);Fu.applyMatrix4(Ru),ku.add(Fu),Cu(ku)},function(Du){Pu(new Error("error parsing gltf in tile ".concat(_u.id,": ").concat(Du.message)))})}else Cu(new gt)})}function Yr(_u){_u.traverse(function(Tu){if(Tu instanceof ft){Tu.geometry.dispose();for(var Cu=0,Pu=Tu.material;Cu<Pu.length;Cu++){var Bu=Pu[Cu];Bu.uniforms.map&&Bu.uniforms.map.value&&(Bu.uniforms.map.value.dispose(),Bu.uniforms.map.value=null)}}})}function Zr(_u){return new r$3.Matrix4().fromArray([2*_u[0],2*_u[1],2*_u[2],0,2*_u[3],2*_u[4],2*_u[5],0,2*_u[6],2*_u[7],2*_u[8],0,0,0,0,1])}function Jr(_u){return new Tn(_u.toArray())}function $r(_u){var Tu=_u.planes.map(function(Cu){return new kn(Cu.normal.toArray(),Cu.constant)});return new Fn(Tu)}var eo=new r$3.EdgesGeometry(new r$3.BoxBufferGeometry(1,1,1)),to=new r$3.LineBasicMaterial({color:new r$3.Color(1,1,0),transparent:!0});function io(_u){_u.updateMatrix(),_u.updateMatrixWorld(),_u.matrixWorld.getInverse(_u.matrixWorldInverse);var Tu=new r$3.Matrix4().multiplyMatrices(_u.projectionMatrix,_u.matrixWorldInverse);return new r$3.Frustum().setFromProjectionMatrix(Tu)}var no={throttleRequests:!0,maxRequests:64,updateInterval:.1,maxScreenSpaceError:8,maxMemoryUsage:32,viewDistanceScale:.2,onNodeCreated:function(){}},ro=function(_u){function Tu(Cu){Cu===void 0&&(Cu={});var Pu=_u.call(this)||this;return Pu.options=t$3.__assign(t$3.__assign({},no),Cu),Pu.clock=new r$3.Clock,Pu.timer=0,Pu.unloadTileQueue=[],Pu.nodes={},Pu.boundings={},Pu.nodeGroup=new r$3.Group,Pu.boundingGroup=new r$3.Group,Pu.add(Pu.nodeGroup),Pu.sseDenominator=null,Pu.lastCameraTransform=new r$3.Matrix4,Pu.lastCameraAspect=1,Pu.lastCameraFov=null,Pu.lastCamera=null,Pu.lastRenderer=null,Pu.enabled=!1,Pu}return t$3.__extends(Tu,_u),Object.defineProperty(Tu.prototype,"enable",{get:function(){return this.enabled},set:function(Cu){this.enabled!==Cu&&(this.enabled=Cu,this.enabled===!1?this.reset():(this.timer=0,this.clock.getDelta()))},enumerable:!1,configurable:!0}),Tu.prototype.load=function(Cu){var Pu=this,Bu=Cu.tileset_url;Cu.tileset_url_md5;var Ru=Cu.b3md_mappings_url;Cu.b3md_mappings_url_md5;var Lu={modelMatrix:Jr(new r$3.Matrix4().fromArray([1,0,0,0,0,-1,0,1e9,0,0,-1,0,0,0,0,1])),maxMemoryUsage:this.options.maxMemoryUsage,maxScreenSpaceError:this.options.maxScreenSpaceError,viewDistanceScale:this.options.viewDistanceScale,throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests,contentLoader:function(ku){var Fu=function(Nu){var Vu=Nu.boundingVolume,Gu=new r$3.LineSegments(eo,to);return Gu.applyMatrix4(Zr(Vu.halfAxes)),Gu.position.set(Vu.center[0],Vu.center[1],Vu.center[2]),Gu}(ku);return Fu.visible=!1,Pu.boundings[ku.id]=Fu,Pu.boundingGroup.add(Fu),Fu.updateMatrixWorld(!0),ku.type==="SCENEGRAPH"||ku.type==="MESH"?Xr(ku).then(function(Nu){Pu.tileset===void 0?Yr(Nu):(Nu.visible=!1,Pu.nodes[ku.id]=Nu,Pu.nodeGroup.add(Nu),Pu.options.onNodeCreated(Nu),Nu.updateMatrixWorld(!0))}):Promise.resolve()},onTileLoad:function(){Pu.enabled&&Pu.tileset&&Pu.lastRenderer&&Pu.lastCamera&&(Pu.tileset.frameNumber++,Pu.tilesetUpdate(Pu.tileset,Pu.lastRenderer,Pu.lastCamera)),Pu.enabled||Pu.reset()},onTileUnload:function(ku){Pu.unloadTileQueue.push(ku)},onTileError:function(ku,Fu){console.error("Tile error",ku.id,Fu)},onTraversalComplete:function(ku){return ku},allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy,maxDepth:this.options.maxDepth},Ou=Bu.split("/").slice(0,-1).join("/"),Du=it(Bu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(ku){return JSON.parse(ku.body)}).then(function(ku){return jr(ku,Ou)}),$u=it(Ru,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(ku){return JSON.parse(ku.body)});Promise.all([Du,$u]).then(function(ku){var Fu=ku[0],Nu=ku[1];Fu.b3dmMapping=Nu;var Vu=Pu.tileset=new qr(Fu,Lu),Gu=new r$3.Matrix4;if(Vu.root&&Vu.root.boundingVolume){var Hu=Vu.root.boundingVolume,ju=Hu.halfAxes,Uu=Hu.center;Gu.extractRotation(Zr(ju)),Gu.setPosition(Uu[0],Uu[1],Uu[2])}Vu.modelMatrix.copy(Jr(new r$3.Matrix4().getInverse(Gu)))})},Tu.prototype.update=function(Cu,Pu){this.lastCamera=Pu,this.lastRenderer=Cu,this.enabled!==!1&&(this.timer+=this.clock.getDelta(),this.tileset&&this.timer>=this.options.updateInterval&&(Pu.matrixWorld.equals(this.lastCameraTransform)&&Pu.aspect===this.lastCameraAspect&&Pu.fov===this.lastCameraFov||(this.timer=0,this.tileset.frameNumber++,this.lastCameraTransform.copy(Pu.matrixWorld),this.tilesetUpdate(this.tileset,Cu,Pu))))},Tu.prototype.tilesetUpdate=function(Cu,Pu,Bu){this.sseDenominator&&Bu.aspect===this.lastCameraAspect&&Bu.fov===this.lastCameraFov||(this.sseDenominator=function(Vu){var Gu=Vu.aspect,Hu=Vu.fov/180*Math.PI,ju=Vu.aspect<=1?Hu:2*Math.atan(Math.tan(.5*Hu)/Gu);return 2*Math.tan(.5*ju)}(Bu),this.lastCameraAspect=Bu.aspect,this.lastCameraFov=Bu.fov);var Ru,Lu={camera:{position:Bu.getWorldPosition(new r$3.Vector3).toArray(),direction:Bu.getWorldDirection(new r$3.Vector3).toArray(),up:Bu.up.toArray()},height:Pu.getSize(new r$3.Vector2).height,frameNumber:Cu.frameNumber,sseDenominator:this.sseDenominator,cullingVolume:$r(io(Bu))};Cu.cache.reset(),Cu.traverser.traverse(Cu.root,Lu);for(var Ou=0,Du=Cu.tiles;Ou<Du.length;Ou++){var $u=Du[Ou],ku=$u.selected,Fu=$u.id;this.nodes[Fu]&&this.nodes[Fu].visible!==ku&&(this.nodes[Fu].visible=ku,ku&&(this.nodes[Fu].needsRender=!0)),this.boundings[Fu]&&this.boundings[Fu].visible!==ku&&(this.boundings[Fu].visible=ku)}for(;Ru=this.unloadTileQueue.pop();){if(Fu=Ru.id,this.nodes[Fu]){var Nu=this.nodes[Fu];this.nodeGroup.remove(Nu),Yr(Nu),delete this.nodes[Fu]}this.boundings[Fu]&&(Nu=this.boundings[Fu],this.boundingGroup.remove(Nu),delete this.boundings[Fu])}},Tu.prototype.reset=function(){if(this.tileset){this.tileset.reset();for(var Cu=void 0;Cu=this.unloadTileQueue.pop();)if(Cu.contentState!=="UNLOADED"){var Pu=Cu.id;if(this.nodes[Pu]){var Bu=this.nodes[Pu];this.nodeGroup.remove(Bu),Yr(Bu),delete this.nodes[Pu]}this.boundings[Pu]&&(Bu=this.boundings[Pu],this.boundingGroup.remove(Bu),delete this.boundings[Pu])}for(var Ru=0,Lu=Object.keys(this.nodes);Ru<Lu.length;Ru++){Pu=Lu[Ru];var Ou=this.nodes[Pu];this.nodeGroup.remove(Ou),Yr(Ou),delete this.nodes[Pu]}for(var Du=0,$u=Object.keys(this.boundings);Du<$u.length;Du++)Pu=$u[Du],Ou=this.boundings[Pu],this.boundingGroup.remove(Ou),delete this.boundings[Pu]}},Tu}(At);function oo(_u){return _u==null}var so=function(_u,Tu){Tu===void 0&&(Tu=1e-4),Tu=Math.max(Tu,Number.EPSILON);for(var Cu={},Pu=_u.getIndex(),Bu=_u.getAttribute("position"),Ru=Pu?Pu.count:Bu.count,Lu=0,Ou=Object.keys(_u.attributes),Du={},$u={},ku=[],Fu=["getX","getY","getZ","getW"],Nu=0,Vu=Ou.length;Nu<Vu;Nu++)Du[Wu=Ou[Nu]]=[],(Xc=_u.morphAttributes[Wu])&&($u[Wu]=new Array(Xc.length).fill().map(function(){return[]}));var Gu=Math.log10(1/Tu),Hu=Math.pow(10,Gu);for(Nu=0;Nu<Ru;Nu++){var ju=Pu?Pu.getX(Nu):Nu,Uu="",zu=0;for(Vu=Ou.length;zu<Vu;zu++)for(var Wu=Ou[zu],Qu=(Yu=_u.getAttribute(Wu)).itemSize,qu=0;qu<Qu;qu++)Uu+="".concat(~~(Yu[Fu[qu]](ju)*Hu),",");if(Uu in Cu)ku.push(Cu[Uu]);else{for(zu=0,Vu=Ou.length;zu<Vu;zu++){Wu=Ou[zu];var Yu=_u.getAttribute(Wu),Xc=_u.morphAttributes[Wu],_h=(Qu=Yu.itemSize,Du[Wu]),_d=$u[Wu];for(qu=0;qu<Qu;qu++){var Ku=Fu[qu];if(_h.push(Yu[Ku](ju)),Xc)for(var Xu=0,Ju=Xc.length;Xu<Ju;Xu++)_d[Xu].push(Xc[Xu][Ku](ju))}}Cu[Uu]=Lu,ku.push(Lu),Lu++}}var Zu=_u.clone();for(Nu=0,Vu=Ou.length;Nu<Vu;Nu++){Wu=Ou[Nu];var _c=_u.getAttribute(Wu),_f=new _c.array.constructor(Du[Wu]);if(Yu=new r$3.BufferAttribute(_f,_c.itemSize,_c.normalized),Zu.setAttribute(Wu,Yu),Wu in $u)for(zu=0;zu<$u[Wu].length;zu++){var ep=_u.morphAttributes[Wu][zu],tp=(_f=new ep.array.constructor($u[Wu][zu]),new r$3.BufferAttribute(_f,ep.itemSize,ep.normalized));Zu.morphAttributes[Wu][zu]=tp}}return Zu.setIndex(ku),Zu};function ao(_u){var Tu;return new((Tu=r$3.Triangle).bind.apply(Tu,t$3.__spreadArray([void 0],_u.map(function(Cu){return new r$3.Vector3(Cu.x,Cu.y,Cu.z)}),!1)))}var lo={at3d:function(_u,Tu){for(var Cu=Ni(Tu.textureOptions,_u.textures.length),Pu={},Bu=0,Ru=_u.textures;Bu<Ru.length;Bu++){var Lu=Ru[Bu];Pu[Lu]=Li(Lu,Cu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)}return Promise.resolve().then(function(){return it(_u.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Ou){return ti(Ou.body)}).then(function(Ou){return jt(function(){for(var Du,$u={chunks:[]},ku=0,Fu=Ou;ku<Fu.length;ku++){var Nu=Fu[ku],Vu=Ti.decode(Nu);Vu.chunks.length&&(Du=$u.chunks).push.apply(Du,Vu.chunks)}return $u})}).then(function(Ou){return jt(function(){return Oi(Ou,_u.textureBase,_u.textures.slice(),Cu,Pu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})})},pbm:function(_u,Tu){for(var Cu=Ni(Tu.textureOptions,_u.textures.length),Pu={},Bu=0,Ru=_u.textures;Bu<Ru.length;Bu++){var Lu=Ru[Bu];Pu[Lu]=Li(Lu,Cu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)}return Promise.resolve().then(function(){return it(_u.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Ou){return jt(function(){var Du=new Uint8Array(Ou.body);return Ti.decode(Du)})}).then(function(Ou){return jt(function(){return Oi(Ou,_u.textureBase,_u.textures.slice(),Cu,Pu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})})},dome:function(_u,Tu){return Promise.resolve().then(function(){return it(_u.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Cu){return ji(new Uint8Array(Cu.body),_u.textureBase,Tu.textureOptions,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})},domez:function(_u,Tu){return Promise.resolve().then(function(){return it(_u.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Cu){return ti(Cu.body)}).then(function(Cu){var Pu=Cu.reduce(function(Lu,Ou){return Lu+Ou.length},0),Bu=new Uint8Array(Pu),Ru=0;return Cu.forEach(function(Lu){Bu.set(Lu,Ru),Ru+=Lu.length}),Bu}).then(function(Cu){return ji(Cu,_u.textureBase,Tu.textureOptions,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})}},uo=function(_u){function Tu(Cu){Cu===void 0&&(Cu={});var Pu=_u.call(this)||this;return Pu.empty=!0,Pu.name="model",Pu.loaded=!1,Pu.bvhs=Object.assign([],{loaded:!1}),Pu.bounding=new r$3.Box3,Pu.shownFloor=null,Pu.floorLength=0,Pu.requestProxy=Cu.requestProxy,Pu.networkSubscribe=Cu.networkSubscribe,Pu.allowHosts=Cu.allowHosts,Pu.renderOrder=-3,Pu}return t$3.__extends(Tu,_u),Object.defineProperty(Tu.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"hasTiles",{get:function(){return this.tiledModel!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"enableTiles",{get:function(){return!!this.tiledModel&&this.tiledModel.enable},set:function(Cu){this.tiledModel&&(this.tiledModel.enable=Cu)},enumerable:!1,configurable:!0}),Tu.prototype.getEdges=function(Cu){var Pu;if(Cu===void 0&&(Cu=30/180*Math.PI),!this.originModel)return[];for(var Bu=Math.cos(Cu),Ru=[],Lu=0,Ou=this.originModel.children;Lu<Ou.length;Lu++){var Du=Ou[Lu];if(Du instanceof ft){for(var $u={},ku=["a","b","c"],Fu=so(Du.geometry),Nu=Fu.getAttribute("position").array,Vu=((Pu=Fu.getIndex())===null||Pu===void 0?void 0:Pu.array)||[],Gu=[],Hu=[],ju=0,Uu=Nu.length;ju<Uu;ju+=3)Gu.push(new r$3.Vector3(Nu[ju],Nu[ju+1],Nu[ju+2]));for(ju=0,Uu=Vu.length;ju<Uu;ju+=3){var zu=Vu[ju],Wu=Vu[ju+1],Qu=Vu[ju+2],qu=new r$3.Vector3().crossVectors(Gu[Wu].clone().sub(Gu[zu]),Gu[Qu].clone().sub(Gu[zu])).normalize();Hu.push({a:zu,b:Wu,c:Qu,normal:qu})}for(ju=0,Uu=Hu.length;ju<Uu;ju++)for(var Yu=Hu[ju],Xc=0;Xc<3;Xc++){var _h=Yu[ku[Xc]],_d=Yu[ku[(Xc+1)%3]],Ku=[Math.min(_h,_d),Math.max(_h,_d)];$u[Xu=Ku[0]+"-"+Ku[1]]===void 0?$u[Xu]={index1:Ku[0],index2:Ku[1],face1:ju}:$u[Xu].face2=ju}for(var Xu in $u){var Ju=$u[Xu];if(Ju.face2===void 0||Hu[Ju.face1].normal.dot(Hu[Ju.face2].normal)<=Bu){var Zu=Gu[Ju.index1],_c=Gu[Ju.index2];Ru.push(new r$3.Line3(Zu,_c))}}Fu.dispose(),Gu.length=0,Hu.length=0}}return Ru},Tu.prototype.hasFloors=function(){return this.hasFloors_()},Tu.prototype.hasFloors_=function(){var Cu=[];return this.traverse(function(Pu){Pu instanceof ft&&(Cu[Pu.floorIndex]=!0)}),Cu.length},Tu.prototype.show=function(){for(var Cu,Pu,Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];var Lu=this.shownFloor,Ou=null,Du=(Cu=Bu[1])!==null&&Cu!==void 0?Cu:.1,$u=Bu.length!==0;this.shownFloor=Ou=$u?Bu[0]:null,this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)}),!((Pu=this.tiledModel)===null||Pu===void 0)&&Pu.enable?this.b3dmShow(Lu,Ou):this.at3dShow(Lu,Ou,Du)},Tu.prototype.at3dShow=function(Cu,Pu,Bu){this.traverse(function(Ru){Ru instanceof ft&&Ru.material.forEach(function(Lu){Pu===null||Pu===Ru.floorIndex?Lu.opacity=1*Lu.originOpacity:Lu.opacity=Lu.originOpacity*Bu})}),Cu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},Tu.prototype.b3dmShow=function(Cu,Pu){var Bu,Ru;if(!((Ru=(Bu=this.tiledModel)===null||Bu===void 0?void 0:Bu.tileset)===null||Ru===void 0)&&Ru.floorInfo){if(typeof Pu=="number"&&Pu>=0&&Pu<this.tiledModel.tileset.floorInfo.length){var Lu=this.tiledModel.tileset.floorInfo,Ou=-Lu[Pu].ground,Du=Lu[Pu].height+Ou;this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(Ou,Du,0)})}else this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)});Cu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0}},Tu.prototype.intersectRaycaster=function(Cu,Pu){var Bu=Cu.ray,Ru=Bu.origin,Lu=Bu.direction;if(oo(Pu))if(oo(this.shownFloor)){var Ou=this.floorLength;Pu=[];for(var Du=-1;Du<Ou;Du++)Pu.push(Du)}else Pu=[this.shownFloor];var $u=[],ku=[];Array.isArray(Pu)?ku.push.apply(ku,Pu):ku.push(Pu);for(var Fu=function(Hu){var ju=Nu.bvhs&&Nu.bvhs[Hu];if(ju){var Uu=new Ot(Ru.x,Ru.y,Ru.z),zu=new Ot(Lu.x,Lu.y,Lu.z);(Wu=ju.intersectRay(Uu,zu,!0).map(function(qu){var Yu=qu.intersectionPoint,Xc=qu.triangle,_h=new r$3.Vector3(Yu.x,Yu.y,Yu.z);return{point:_h,face:{normal:ao(Xc).getNormal(new r$3.Vector3)},distance:Ru.distanceTo(_h)}})).length&&$u.push.apply($u,Wu)}else if(Nu.originModel){var Wu,Qu=[];Nu.originModel.traverse(function(qu){qu instanceof ft&&qu.floorIndex===Hu&&Qu.push(qu)}),(Wu=Cu.intersectObjects(Qu).map(function(qu){return{face:qu.face?{normal:qu.face.normal}:void 0,point:qu.point,distance:qu.distance}})).length&&$u.push.apply($u,Wu)}},Nu=this,Vu=0,Gu=ku;Vu<Gu.length;Vu++)Fu(Gu[Vu]);return $u.filter(function(Hu){var ju=Hu.distance;return ju<=Cu.far&&ju>=Cu.near}).sort(function(Hu,ju){return Hu.distance-ju.distance})},Tu.prototype.buildBVH=function(){if(!this.bvhs.loaded&&this.originModel){var Cu=[];this.originModel.traverse(function(Yu){Yu instanceof ft&&(Cu[Yu.floorIndex]=Cu[Yu.floorIndex]||[],Cu[Yu.floorIndex].push(Yu.geometry))}),this.bvhs.length=0;for(var Pu=0,Bu=Cu;Pu<Bu.length;Pu++){var Ru=Bu[Pu],Lu=0;if(Ru){for(var Ou=0,Du=Ru;Ou<Du.length;Ou++){var $u=0;$u=(Gu=Du[Ou]).index?Gu.index.array.length:Gu.attributes.position.array.length/3,Lu+=3*Math.floor($u/3)}for(var ku=new Float32Array(3*Lu),Fu=0,Nu=0,Vu=Ru;Nu<Vu.length;Nu++){var Gu,Hu=(Gu=Vu[Nu]).attributes.position.array,ju=Gu.index?Gu.index.array:null;if(ju){for(var Uu=3*Math.floor(ju.length/3),zu=0,Wu=void 0,Qu=void 0;zu<Uu;zu++)Wu=3*(Fu+zu),Qu=3*ju[zu],ku[Wu]=Hu[Qu],ku[Wu+1]=Hu[Qu+1],ku[Wu+2]=Hu[Qu+2];Fu+=Uu}else{for(Uu=3*Math.floor(Hu.length/3/3),zu=0,Wu=void 0,Qu=void 0;zu<Uu;zu++)Qu=3*zu,ku[Wu=3*(Fu+zu)]=Hu[Qu],ku[Wu+1]=Hu[Qu+1],ku[Wu+2]=Hu[Qu+2];Fu+=Uu}}var qu=new qt().create(ku).splitNode(50);this.bvhs.push(qu)}}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},Tu.prototype.load=function(Cu,Pu){var Bu=this;if(Pu===void 0&&(Pu={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Ru=function(Ou,Du){if(Du===void 0&&(Du=[]),/^blob\:/.test(Ou))return"at3d";var $u=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Ou);if(!$u)return"";for(var ku=0,Fu=String($u[1]).trim().split(".").slice(1).reverse();ku<Fu.length;ku++){var Nu=Fu[ku],Vu=Du.indexOf(Nu);if(Vu>=0)return Du[Vu]}return""}(Cu.file,Object.keys(lo)),Lu=lo[Ru];if(!Lu)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Ru,") does not support."));return this.name=Cu.file,Lu(Cu,{textureOptions:Pu,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}).then(function(Ou){var Du=Ou.objects,$u=Ou.texturePromise;Bu.bounding.makeEmpty();var ku=Bu.originModel=new At;ku.renderOrder=-3;for(var Fu=0,Nu=Du;Fu<Nu.length;Fu++)(ju=Nu[Fu]).traverse(function(zu){if(zu instanceof ft){var Wu=zu.geometry;Wu.boundingBox||Wu.computeBoundingBox(),Wu.boundingSphere||Wu.computeBoundingSphere(),Bu.bounding.union(Wu.boundingBox)}}),ku.add(ju);for(var Vu=Bu.bounding.getCenter(new r$3.Vector3),Gu=0,Hu=Du;Gu<Hu.length;Gu++){var ju;(ju=Hu[Gu]).traverse(function(zu){if(zu instanceof ft)for(var Wu=0,Qu=zu.material;Wu<Qu.length;Wu++)Qu[Wu].uniforms.modelCenter.value=Vu})}if(Bu.add(ku),Bu.floorLength=Bu.hasFloors_(),Bu.empty=!1,Bu.loaded=!0,Cu.tiles&&Cu.tiles.tileset_url&&Cu.tiles.b3md_mappings_url){var Uu=Bu.tiledModel=new ro({onNodeCreated:function(zu){var Wu=ku.getMaterial();Wu&&(zu.setMaterial(Wu),zu.renderOrder=-3),zu.traverse(function(Qu){if(Qu instanceof ft)for(var qu=0,Yu=Qu.material;qu<Yu.length;qu++)Yu[qu].uniforms.modelCenter.value=Vu})},allowHosts:Bu.allowHosts,networkSubscribe:Bu.networkSubscribe,requestProxy:Bu.requestProxy});Uu.renderOrder=-3,Bu.add(Uu),Uu.load(Cu.tiles)}Cu.bvh&&Bu.buildBVH(),jt(function(){Bu.emit("geometryLoaded"),$u.then(function(){Bu.emit("materialLoaded"),Bu.emit("loaded")})})}).catch(function(Ou){return Bu.name="",Bu.emit("error",Ou),Promise.reject(Ou)})},Tu.prototype.update=function(Cu,Pu){if(this.originModel){var Bu=this.originModel.visible;if(this.tiledModel&&this.tiledModel.enable&&this.tiledModel.tileset){this.tiledModel.update(Cu,Pu);var Ru=this.tiledModel.tileset.root;Ru.content&&Ru.contentState==="READY"&&Bu!==!1&&(this.setTransparent(!1),this.shownFloor&&this.show(this.shownFloor),this.originModel.visible=!1,this.originModel.needsRender=!0)}else Bu!==!0&&(this.originModel.visible=!0,this.originModel.needsRender=!0)}},Tu.prototype.dispose=function(){this.off();var Cu=this.originModel,Pu=this.tiledModel;if(Pu&&(Pu.enable=!1,Pu.reset()),Cu)for(Cu.disposeGeometry(),Cu.disposeMaterial();Cu.children.length;)Cu.remove(Cu.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},Tu}(At);Object.assign(uo.prototype,{on:Fe.prototype.on,once:Fe.prototype.once,off:Fe.prototype.off,emit:Fe.prototype.emit,hasListener:Fe.prototype.hasListener});function ho(_u,Tu,Cu){return _u<Tu?Tu:_u>Cu?Cu:_u}function co(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=[];_u=_u.map(function(Ou){return(Ou!=null?Ou:"").trim()}).filter(function(Ou){return Ou.length>0&&!/^\/+$/.test(Ou)});for(var Pu=0;Pu<_u.length;Pu++){var Bu=Pu===0,Ru=Pu===_u.length-1,Lu=_u[Pu];Bu||(Lu=Lu.replace(/^\/+/,"")),Ru||(Lu=Lu.replace(/\/+$/,"")),Cu.push(Lu)}return Cu.join("/")}function po(_u,Tu){if(_u===Tu)return!0;if(_u&&Tu&&typeof _u=="object"&&typeof Tu=="object"){if(_u.constructor!==Tu.constructor)return!1;var Cu,Pu,Bu;if(Array.isArray(_u)){if((Cu=_u.length)!=Tu.length)return!1;for(Pu=Cu;Pu--!=0;)if(!po(_u[Pu],Tu[Pu]))return!1;return!0}if(_u.constructor===RegExp)return _u.source===Tu.source&&_u.flags===Tu.flags;if(_u.valueOf!==Object.prototype.valueOf)return _u.valueOf()===Tu.valueOf();if(_u.toString!==Object.prototype.toString)return _u.toString()===Tu.toString();if((Cu=(Bu=Object.keys(_u)).length)!==Object.keys(Tu).length)return!1;for(Pu=Cu;Pu--!=0;)if(!Object.prototype.hasOwnProperty.call(Tu,Bu[Pu]))return!1;for(Pu=Cu;Pu--!=0;){var Ru=Bu[Pu];if(!po(_u[Ru],Tu[Ru]))return!1}return!0}return _u!=_u&&Tu!=Tu}function fo(_u){return typeof _u=="number"}function Ao(_u){return(_u&_u-1)==0&&_u!==0}var go=function(){return new Error("Invalid input.")},mo=function(){return new Error("Invalid certificate.")},vo=function(){return new Error("Invalid signature.")};function yo(_u,Tu){Tu===void 0&&(Tu=!1);var Cu=typeof _u;if(Cu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Pu="[",Bu=_u.length-1,Ru=0;Ru<Bu;Ru++)Pu+=yo(_u[Ru],!1)+",";return Bu>-1&&(Pu+=yo(_u[Ru],!1)),Pu+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return yo(_u.toJSON(),Tu);var Lu=Object.keys(_u).sort(),Ou=Lu.length;for(Pu="",Ru=0;Ru<Ou;){var Du=Lu[Ru],$u=yo(_u[Du],!0);$u!==void 0&&(Ru&&Pu!==""&&(Pu+=","),Pu+=JSON.stringify(Du)+":"+$u),Ru++}return"{"+Pu+"}"}switch(Cu){case"function":case"undefined":return Tu?void 0:null;case"number":return 0;default:return isFinite(_u)?_u:null}}function bo(_u){return String(yo(_u,!1))}function xo(_u){var Tu,Cu,Pu;if(Array.isArray(_u)){var Bu,Ru,Lu=void 0;if(_u.length<=0)return go();for(var Ou=function(Qu){var qu=xo(_u[Qu]);if(qu instanceof Error)return{value:qu};if(Lu){if(Lu!==qu.issuer)return{value:mo()}}else Lu=qu.issuer;Bu?qu.expire.getTime()<Bu.getTime()&&(Bu=qu.expire):Bu=qu.expire,Ru=Ru?Ru.filter(function(Yu){return qu.allowHosts.indexOf(Yu)!==-1}):qu.allowHosts},Du=0;Du<_u.length;Du++){var $u=Ou(Du);if(typeof $u=="object")return $u.value}return He({issuer:Lu,expire:Bu,allowHosts:Ru})}var ku=JSON.parse(_u),Fu=typeof location!="undefined"?location.hostname:"",Nu=Date.now();if(typeof ku!="object")return go();var Vu=new Date(typeof ku.expire_at=="string"&&/^\d+$/.test(ku.expire_at)?Number(ku.expire_at):ku.expire_at),Gu=Array.isArray(ku.allow_hosts)?ku.allow_hosts:[];if(Fu.length===0||ze(Fu)||je.filter(function(Qu){return Ke(Qu,Fu)}).length>0){var Hu=String((Tu=ku.certificate)!==null&&Tu!==void 0?Tu:"");if(Hu){var ju=new Be;return ju.readCertPEM(Hu),He({issuer:ju.getSubjectString(),expire:Vu,allowHosts:Gu})}return He({issuer:"none",expire:Vu,allowHosts:Gu})}var Uu=String((Cu=ku.certificate)!==null&&Cu!==void 0?Cu:"");if(!Uu)return mo();var zu=new Be;zu.readCertPEM(Uu);var Wu=String((Pu=ku._signature)!==null&&Pu!==void 0?Pu:"");return Wu?function(Qu,qu,Yu){var Xc=new Be;if(typeof Yu=="string"?Xc.readCertPEM(Yu):Xc.readCertHex(Yu.hex),De(Xc)===!1)return!1;var _h=new X$1;return _h.readCertPubKeyHex(Xc.hex,6),!!_h.verify(Qu,O$2(qu))}(bo(function(Qu,qu){for(var Yu={},Xc=0,_h=Object.keys(Qu);Xc<_h.length;Xc++){var _d=_h[Xc];qu.indexOf(_d)===-1&&(Yu[_d]=Qu[_d])}return Yu}(ku,["_signature"])),Wu,zu)===!1?vo():Nu<Vu.getTime()?Gu.filter(function(Qu){return Ke(Qu,Fu)}).length===0?function(Qu){return new Error("host(".concat(JSON.stringify(Qu),") is not allowed."))}(Fu):He({issuer:zu.getSubjectString(),expire:Vu,allowHosts:Gu}):function(Qu){return new Error("date(".concat(Qu.toString(),") expired."))}(Vu):vo()}var wo=new WeakMap,Eo=function(){function _u(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return _u.prototype.toJSON=function(){return this.raw.works},_u.parse=Co,_u}();function Mo(_u){return _u==null?"null":Array.isArray(_u)?"array":typeof _u=="object"?"dict":"value"}function Io(_u,Tu){var Cu=Mo(_u),Pu=Mo(Tu);if(Pu==="null")return _u;if(Pu==="value")return Tu;if(Pu!==Cu)return JSON.parse(JSON.stringify(Tu));if(Pu==="array")for(var Bu=0;Bu<Tu.length;Bu++)_u[Bu]=Io(_u[Bu],Tu[Bu]);else if(Pu==="dict")for(var Ru in Tu)_u[Ru]=Io(_u[Ru],Tu[Ru]);return _u}function So(_u,Tu,Cu){for(var Pu,Bu=JSON.stringify(Tu),Ru=[],Lu=0,Ou=[].concat(_u);Lu<Ou.length;Lu++){var Du=Ou[Lu];Du instanceof Eo?Ru.push.apply(Ru,Du.raw.works):typeof Du=="string"?Ru.push(Du):Ru.push(JSON.stringify(Du))}var $u=xo(Ru);if($u instanceof Error)return $u;Tu=JSON.parse(Bu),_u=Ru.map(function(Tp){return JSON.parse(Tp)}).reduce(function(Tp,np){return Io(Tp,np)});var ku=new Eo;if($u instanceof Error)return $u;ku.issuer=$u.issuer,ku.expire=$u.expire,ku.allowHosts=$u.allowHosts,ku.raw={works:Ru,options:Bu};var Fu=(Pu=_u.base_url)!==null&&Pu!==void 0?Pu:"";Fu&&Fu[Fu.length-1]!=="/"&&(Fu+="/");var Nu=function(Tp,np){return Tp.indexOf(np)===0},Vu=function(Tp,np){var sp,Ip=Tp;if(Tu.jsonp===!0){Ip=Tp.replace(/([\?\#].*)?$/i,"");var Cp=Te("".concat(Ip)).slice(0,7);Ip="".concat(Ip,".").concat(Cp,".jsonp")}if(Tu.shortPath===!0){var Vp=Ip.replace(Fu,"").split("."),Fp=(sp=Vp.shift())!==null&&sp!==void 0?sp:"",Gp=Vp.join(".");Ip=co(Fu,Te(Fp))+(Gp?"."+Gp:"")}var qp=Ip.replace(Fu,"");return Tu.baseURL&&(Ip=co(Tu.baseURL,qp)),Cu&&Cu(Tp,Ip,qp,np),Ip},Gu=function(Tp,np){var sp,Ip,Cp,Vp,Fp,Gp,qp=Tp;if(!Fi(Tp)){var Wp=(Gp=(Vp=(Ip=(sp=_u.panorama)===null||sp===void 0?void 0:sp.pano_high_cube_base_url)!==null&&Ip!==void 0?Ip:(Cp=_u.panorama)===null||Cp===void 0?void 0:Cp.pano_cube_base_url)!==null&&Vp!==void 0?Vp:(Fp=_u.panorama)===null||Fp===void 0?void 0:Fp.base_url)!==null&&Gp!==void 0?Gp:"";Wp&&(Wp=co(Wp,String(np))),qp=co(Wp,qp)}return Fi(qp)||(qp=co(Fu,qp)),Nu(qp,Fu)||console.warn("".concat(qp," is not start with base_url(").concat(Fu,").")),Vu(qp,"panorama")},Hu=function(Tp){var np=Tp;return Fi(np)||(np=co(Fu,Tp)),Nu(np,Fu)||console.warn("".concat(np," is not start with base_url(").concat(Fu,").")),Vu(np,"model")},ju=function(Tp,np){np===void 0&&(np="");var sp=Tp;return Fi(sp)||(sp=co(np,sp)),Fi(sp)||(sp=co(Fu,sp)),Nu(sp,Fu)||console.warn("".concat(sp," is not start with base_url(").concat(Fu,").")),Vu(sp,"texture")};if($u instanceof Error||(ku.workCode=String(_u.work_code||_u.code||_u.vr_code||_u.workCode),ku.name=String(_u.name),$u instanceof Error))return $u;if(_u.model){var Uu={bvh:!0,async:!1,textureBase:"",textures:[]};typeof Tu.modelBvh=="boolean"?Uu.bvh=Tu.modelBvh:typeof _u.model.bvh=="boolean"?Uu.bvh=_u.model.bvh:typeof _u.bvh=="boolean"&&(Uu.bvh=_u.bvh),_u.model.file?Uu.file=Hu(_u.model.file):_u.model.file_url&&(Uu.file=Hu(_u.model.file_url)),_u.model.textureBase?Uu.textureBase=_u.model.textureBase:_u.model.material_base_url&&(Uu.textureBase=_u.model.material_base_url),Array.isArray(_u.model.textures)?Uu.textures=_u.model.textures.map(function(Tp){return ju(Tp,Uu.textureBase)}):Array.isArray(_u.model.material_textures)&&(Uu.textures=_u.model.material_textures.map(function(Tp){return ju(Tp,Uu.textureBase)})),_u.model.tiles&&(Uu.tiles=_u.model.tiles),Uu.file&&(ku.model=Uu)}if($u instanceof Error)return $u;if(_u.observers&&Array.isArray(_u.observers)){var zu=[];_u.panorama&&(Array.isArray(_u.panorama)?zu=_u.panorama:Array.isArray(_u.panorama.list)?zu=_u.panorama.list:Array.isArray(_u.panorama.info)&&(zu=_u.panorama.info));for(var Wu=0;Wu<_u.observers.length;Wu++){var Qu={},qu=_u.observers[Wu];if(!qu)break;var Yu=zu[Wu];if(!Yu)break;qu=Object.assign({},qu,Yu,{active:qu.active!==!1&&Yu.active!==!1}),Qu.panoIndex=Wu,Qu.active=qu.active!==!1,Qu.loadable=qu.loadable===!0,Qu.images={up:Gu(qu.images?qu.images.up:qu.up,Wu),down:Gu(qu.images?qu.images.down:qu.down,Wu),right:Gu(qu.images?qu.images.right:qu.right,Wu),left:Gu(qu.images?qu.images.left:qu.left,Wu),front:Gu(qu.images?qu.images.front:qu.front,Wu),back:Gu(qu.images?qu.images.back:qu.back,Wu)};var Xc=qu.images?qu.images.depth:qu.depth;Xc&&(Qu.images.depth=Gu(Xc,Wu));var _h=qu.images?qu.images.luminance:qu.luminance;_h&&(Qu.images.luminance={up:Gu(_h.up,Wu),down:Gu(_h.down,Wu),right:Gu(_h.right,Wu),left:Gu(_h.left,Wu),front:Gu(_h.front,Wu),back:Gu(_h.back,Wu)});var _d=qu.images?qu.images.tiles:qu.tiles;if(_d){for(var Ku=[],Xu=function(Tp){var np=Tp.match(/\/cube_(\d+)\//);if(np){var sp=Number(np[1]);if(Ao(sp))return sp}return!1},Ju=function(Tp,np){return Tp.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(np,"/")})},Zu=0,_c=_d;Zu<_c.length;Zu++){var _f=_c[Zu];if(typeof _f=="number"){var ep=_f,tp=Xu(Qu.images.front);if(tp===!1)continue;if((wp=Math.max(tp,512*Math.pow(2,ep)))>2048){var op=Ju(Qu.images.up,wp),hp=Ju(Qu.images.down,wp),cp=Ju(Qu.images.right,wp),Sp=Ju(Qu.images.left,wp),yp=Ju(Qu.images.front,wp),Rp=Ju(Qu.images.back,wp);Ku.push({level:ep,size:wp,up:op,down:hp,right:cp,left:Sp,front:yp,back:Rp})}else op=Qu.images.up,hp=Qu.images.down,cp=Qu.images.right,Sp=Qu.images.left,yp=Qu.images.front,Rp=Qu.images.back,Ku.push({level:ep,size:wp,up:op,down:hp,right:cp,left:Sp,front:yp,back:Rp})}else{var wp;if(typeof(ep=_f.level)!="number"||typeof(wp=_f.size)!="number")continue;op=Gu(_f.up,Wu),hp=Gu(_f.down,Wu),cp=Gu(_f.right,Wu),Sp=Gu(_f.left,Wu),yp=Gu(_f.front,Wu),Rp=Gu(_f.back,Wu),Ku.push({level:ep,size:wp,up:op,down:hp,right:cp,left:Sp,front:yp,back:Rp})}}Ku.sort(function(Tp,np){return Tp.level-np.level}),Qu.images.tiles=Ku}if(qu.position instanceof r$3.Vector3)Qu.position=qu.position.clone();else{if(!Array.isArray(qu.position))break;Qu.position=new r$3.Vector3().fromArray(qu.position)}if(qu.standingPosition instanceof r$3.Vector3)Qu.standingPosition=qu.standingPosition.clone();else if(Array.isArray(qu.standingPosition))Qu.standingPosition=new r$3.Vector3().fromArray(qu.standingPosition);else if(qu.standing_position instanceof r$3.Vector3)Qu.standingPosition=qu.standing_position.clone();else{if(!Array.isArray(qu.standing_position))break;Qu.standingPosition=new r$3.Vector3().fromArray(qu.standing_position)}if(qu.quaternion instanceof r$3.Quaternion)Qu.quaternion=qu.quaternion.clone();else if(Array.isArray(qu.quaternion))Qu.quaternion=new r$3.Quaternion().fromArray(qu.quaternion);else{if(!qu.quaternion)break;var Pp=qu.quaternion,Ep=Pp.x,ip=Pp.y,rp=Pp.z,fp=Pp.w;Qu.quaternion=new r$3.Quaternion(Ep,ip,rp,fp)}if(Array.isArray(qu.accessibleNodes)?Qu.accessibleNodes=qu.accessibleNodes.slice():Array.isArray(qu.accessible_nodes)&&(Qu.accessibleNodes=qu.accessible_nodes.slice()),Array.isArray(qu.visibleNodes)?Qu.visibleNodes=qu.visibleNodes.slice():Array.isArray(qu.visible_nodes)&&(Qu.visibleNodes=qu.visible_nodes.slice()),fo(qu.floorIndex)?Qu.floorIndex=qu.floorIndex:fo(qu.floor_index)?Qu.floorIndex=qu.floor_index:Qu.floorIndex=0,qu.video){var up={};typeof qu.video.source=="string"&&(up.source=qu.video.source),qu.video.matrix instanceof r$3.Matrix4?up.matrix=qu.video.matrix.clone():Array.isArray(qu.video.matrix)&&(up.matrix=new r$3.Matrix4().fromArray(qu.video.matrix)),qu.video.size instanceof r$3.Vector2?up.size=qu.video.size.clone():Array.isArray(qu.video.size)&&(up.size=new r$3.Vector2().fromArray(qu.video.size)),up.source&&up.matrix&&up.size&&(Qu.video=up)}ku.observers[Wu]=Qu}}if($u instanceof Error)return $u;for(var pp=0,gp=ku.observers;pp<gp.length;pp++){if((Qu=gp[pp]).accessibleNodes)Qu.accessibleNodes=Qu.accessibleNodes.filter(function(Tp){return Tp<ku.observers.length});else{Qu.accessibleNodes=[];for(var Ap=0;Ap<ku.observers.length;Ap++)ku.observers[Ap]!==Qu&&Qu.accessibleNodes.push(Ap)}if(Qu.visibleNodes)Qu.visibleNodes=Qu.visibleNodes.filter(function(Tp){return Tp<ku.observers.length});else for(Qu.visibleNodes=[],Ap=0;Ap<ku.observers.length;Ap++)ku.observers[Ap]!==Qu&&Qu.visibleNodes.push(Ap)}if($u instanceof Error)return $u;if(_u.initial)if(_u.initial.mode!=="Floorplan"&&_u.initial.mode!=="Topview"&&_u.initial.mode!=="Panorama"&&_u.initial.mode!=="VRPanorama"&&_u.initial.mode!=="Model"&&_u.initial.mode!=="DepthPanorama"||(ku.initial.mode=_u.initial.mode),fo(_u.initial.latitude)&&(ku.initial.latitude=_u.initial.latitude),fo(_u.initial.longitude)?ku.initial.longitude=_u.initial.longitude:fo(_u.initial.heading)&&(ku.initial.longitude=-(360*(_u.initial.heading-.25)+90)/180*Math.PI),fo(_u.initial.fov)&&(ku.initial.fov=_u.initial.fov),fo(_u.initial.panoIndex)){var Mp=ku.observers.length>0?ku.observers.length-1:0;ku.initial.panoIndex=ho(_u.initial.panoIndex,0,Mp)}else fo(_u.initial.pano_index)?(Mp=ku.observers.length>0?ku.observers.length-1:0,ku.initial.panoIndex=ho(_u.initial.pano_index,0,Mp)):fo(_u.initial.pano)&&(Mp=ku.observers.length>0?ku.observers.length-1:0,ku.initial.panoIndex=ho(_u.initial.pano,0,Mp));if($u instanceof Error)return $u;var $p=He(ku);return wo.set($p,{works:Ru,options:Bu}),$p}function Co(_u,Tu,Cu){typeof _u=="string"&&_u.trim()[0]==="{"&&(_u=JSON.parse(_u));var Pu=wo.get(_u);if(Pu){if(Tu&&!po(JSON.parse(Pu.options),Tu))throw new Error("[PARSE FAILED]: work is parsed with different options.");return _u}var Bu=So(_u,Tu!=null?Tu:{},Cu);if(Bu instanceof Error)throw new Error("[PARSE FAILED]: "+Bu.message);return Bu}function Bo(_u,Tu,Cu){return _u+(Tu-_u)*Cu}function To(_u,Tu){var Cu=Tu[1]-Tu[0];return _u<Tu[0]?To(_u+Cu,Tu):_u>=Tu[1]?To(_u-Cu,Tu):_u}function Po(_u,Tu,Cu,Pu){return Pu?function(Bu,Ru,Lu,Ou){var Du=Ou[1]-Ou[0];return Bu=To(Bu,Ou),Bo((Ru=To(Ru,Ou))-Bu>Du/2?Bu+Du:Bu-Ru>Du/2?Bu-Du:Bu,Ru,Lu)}(_u,Tu,Cu,Pu):Bo(_u,Tu,Cu)}var Ro=function(){function _u(Tu){for(var Cu in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=_e(),this.startVelocity=0,this.duration=0,this.keyframes=[],Tu){var Pu=Tu[Cu];typeof Pu=="number"?(this.value[Cu]=Pu,this.config[Cu]={circle:!1}):(this.value[Cu]=Pu.value,this.config[Cu]={circle:Pu.circle})}this.keyframes=[{progress:0,value:t$3.__assign({},this.value)},{progress:1,value:t$3.__assign({},this.value)}]}return _u.prototype.getProgress=function(Tu){var Cu=Tu-this.startTime;return Cu<0?0:Cu>=this.duration?1:1-function(Pu,Bu,Ru,Lu){var Ou=(Bu*Ru+2*Pu)/Math.pow(Ru,3),Du=-(2*Bu*Ru+3*Pu)/Math.pow(Ru,2),$u=Bu,ku=Pu;return Ou*Math.pow(Lu,3)+Du*Math.pow(Lu,2)+$u*Lu+ku}(1,this.startVelocity,this.duration,Cu)},_u.prototype.getValue=function(Tu){for(var Cu=1;Cu<this.keyframes.length;Cu++)if(this.keyframes[Cu].progress>Tu){var Pu=this.keyframes[Cu-1],Bu=this.keyframes[Cu],Ru={};for(var Lu in this.config){var Ou=(Tu-Pu.progress)/(Bu.progress-Pu.progress);Ru[Lu]=Po(Pu.value[Lu],Bu.value[Lu],Ou,this.config[Lu].circle)}return Ru}return t$3.__assign({},this.keyframes[this.keyframes.length-1].value)},_u.prototype.getProgressVelocity=function(Tu){var Cu=Tu-this.startTime;return Cu>=this.duration?0:function(Pu,Bu,Ru,Lu){var Ou=(Bu*Ru+2*Pu)/Math.pow(Ru,3),Du=-(2*Bu*Ru+3*Pu)/Math.pow(Ru,2),$u=Bu;return 3*Ou*Math.pow(Lu,2)+2*Du*Lu+$u}(1,this.startVelocity,this.duration,Cu)},_u.prototype.update=function(Tu){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(Tu))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},_u.prototype.getKeyFrameSegment=function(Tu){for(var Cu=this.getProgress(Tu),Pu=1;Pu<this.keyframes.length;Pu++)if(this.keyframes[Pu].progress>Cu)return[this.keyframes[Pu-1],this.keyframes[Pu]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},_u.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},_u.prototype.set=function(Tu,Cu,Pu,Bu){var Ru;Pu===void 0&&(Pu=0),isNaN(Cu)&&(Cu=0),isNaN(Pu)&&(Pu=0),Bu=Bu!=null?Bu:_e();var Lu=this.getProgress(Bu),Ou=this.getValue(Lu),Du={};for(var $u in this.config)Du[$u]=(Ru=Tu[$u])!==null&&Ru!==void 0?Ru:Ou[$u];var ku=[{progress:0,value:Ou},{progress:1,value:Du}];return this.setKeyframes(ku,Cu,Pu,Bu)},_u.prototype.setKeyframes=function(Tu,Cu,Pu,Bu){var Ru=this;if(Pu===void 0&&(Pu=0),Tu.length<2)throw new Error("keyframes invalid.");return isNaN(Cu)&&(Cu=0),isNaN(Pu)&&(Pu=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Lu,Ou){Bu=Bu!=null?Bu:_e(),Ru.progress=0,Ru.ended=!1,Ru.startTime=Bu,Ru.startVelocity=Pu,Ru.keyframes=Tu,Ru.duration=Cu,Cu===0?(Ru.progress=1,Ru.value=t$3.__assign({},Tu[Tu.length-1].value)):Ru.value=t$3.__assign({},Tu[0].value),Ru.callbacks=[Lu,Ou]})},_u.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},_u}(),ko=yt(),Do=new r$3.Texture(ko);ko.onload=function(){return Do.needsUpdate=!0},ko.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var Lo=new r$3.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),Oo=new r$3.MeshBasicMaterial({map:Do,transparent:!0}),No=new r$3.SphereBufferGeometry(.12,16,16),Fo=new r$3.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function Qo(){if(typeof document=="undefined"){var _u=new r$3.Texture;return Object.assign(_u,{draw:function(ku){},retain:!1,pool:!1})}var Tu=document.createElement("canvas"),Cu=512,Pu=256,Bu=190;Tu.setAttribute("width",String(Cu)),Tu.setAttribute("height",String(Cu));var Ru=new r$3.Texture(Tu),Lu=Tu.getContext("2d");if(!Lu)throw Error("cannot create canvas context");var Ou=Lu.createRadialGradient(Pu,Pu,150,Pu,Pu,0);function Du(){var ku=Math.PI/12,Fu=2*Math.PI/3;Lu&&(Lu.beginPath(),Lu.arc(Pu,Pu,Bu,0*Fu,1*Fu-ku),Lu.stroke(),Lu.beginPath(),Lu.arc(Pu,Pu,Bu,1*Fu,2*Fu-ku),Lu.stroke(),Lu.beginPath(),Lu.arc(Pu,Pu,Bu,2*Fu,3*Fu-ku),Lu.stroke())}function $u(ku){Lu&&(Lu.clearRect(0,0,Cu,Cu),Lu.lineWidth=20,ku!==-1&&(Lu.globalCompositeOperation="source-over",Lu.strokeStyle="rgba(255, 255, 255, 1)",Du(),Lu.globalCompositeOperation="source-in",Lu.beginPath(),Lu.arc(Pu,Pu,Bu,0,2*Math.PI*ku),Lu.strokeStyle="rgba(255, 255, 255, 1)",Lu.stroke(),Lu.globalCompositeOperation="source-over",Lu.strokeStyle="rgba(255, 255, 255, "+(ku?.5:1)+")",Du()),Lu.beginPath(),Lu.arc(Pu,Pu,150,0,2*Math.PI),Lu.closePath(),Lu.fillStyle=Ou,Lu.fill(),Lu.fillStyle="rgba(255, 255, 255, 0.01)",Lu.fillRect(0,0,Cu,Cu),Ru.needsUpdate=!0)}return Ou.addColorStop(0,"rgba(255, 255, 255, 1)"),Ou.addColorStop(.15,"rgba(255, 255, 255, 1)"),Ou.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Ou.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(1,"rgba(255, 255, 255, 0.0)"),$u(0),Object.assign(Ru,{draw:$u,retain:!1,pool:!1})}var Vo=[],_o=Qo();_o.draw(0);var Ho=Qo();Ho.draw(1);var qo=Qo();qo.draw(-1);var zo=new r$3.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Ko(){return new r$3.Mesh(zo,new r$3.MeshBasicMaterial({map:_o,transparent:!0}))}function Uo(_u,Tu){var Cu=_u.map;Tu===0||Tu===1?(Cu.pool===!0&&(Cu.retain=!1),Tu===0&&(_u.map=_o),Tu===1&&(_u.map=Ho)):(Cu.pool!==!0&&(_u.map=function(){for(var Pu=0,Bu=Vo;Pu<Bu.length;Pu++){var Ru=Bu[Pu];if(Ru.retain===!1)return Ru}var Lu=Qo();return Lu.pool=!0,Lu.retain=!0,Vo.push(Lu),Lu}()),_u.map.draw(Tu))}var jo=function(_u){function Tu(){var Cu=_u.call(this)||this;return Cu.loading=!1,Cu.disabled=!1,Cu.current=!1,Cu.progress=0,Cu.opacity=0,Cu.hitTestMesh=new r$3.Mesh(No,Fo),Cu.add(Cu.hitTestMesh),Cu.centerMesh=Ko(),Cu.centerMesh.position.y+=.01,Cu.add(Cu.centerMesh),Cu.loadingMesh=new r$3.Mesh(Lo,Oo),Cu.loadingMesh.position.y+=.011,Cu.progressMotion=new Ro({progress:Cu.progress}),Cu.opacityMotion=new Ro({opacity:Cu.opacity}),Cu.needsRender=!0,Cu.renderOrder=-2,Cu}return t$3.__extends(Tu,_u),Tu.prototype.setLoading=function(Cu){var Pu=this;this.loading=Cu,this.stopInterval&&this.stopInterval(),Cu?(this.add(this.loadingMesh),this.stopInterval=at.shared.add(function(){Pu.loadingMesh.rotateOnAxis(new r$3.Vector3(0,1,0),.1),Pu.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},Tu.prototype.setDisabled=function(Cu){this.disabled=Cu,function(Pu,Bu){var Ru=Pu.map;Ru.pool===!0&&(Ru.retain=!1),Pu.map=Bu?qo:_o}(this.centerMesh.material,Cu),this.needsRender=!0},Tu.prototype.setProgress=function(Cu){this.setLoading(!1),this.setDisabled(!1),this.progress=Cu=ho(Cu,0,1),Cu!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:Cu},120).catch(Qe)},Tu.prototype.setOpacity=function(Cu){this.opacity=Cu=ho(Cu,0,1),this.current&&(Cu=1),Cu!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:Cu},500).catch(Qe)},Tu.prototype.setCurrent=function(Cu){this.current!==Cu&&(this.current=Cu,this.setOpacity(this.opacity))},Tu.prototype.updateTime=function(Cu,Pu){this.opacityMotion.ended||(this.opacityMotion.update(Cu),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(Cu),Uo(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},Tu.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},Tu}(r$3.Object3D),Go=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Wo=new Float32Array([0,1,1,1,0,0,1,0]),Xo=new Uint8Array([0,2,1,2,3,1]),Yo=new r$3.BufferGeometry;Yo.setAttribute("position",new r$3.BufferAttribute(Go,3)),Yo.setAttribute("uv",new r$3.BufferAttribute(Wo,2)),Yo.setIndex(new r$3.BufferAttribute(Xo,1));var Zo,Jo,$o=(Zo=yt(),Jo=new r$3.Texture,Zo.onload=function(){if(typeof document!="undefined"){var _u=256,Tu=document.createElement("canvas");Tu.setAttribute("width",String(_u)),Tu.setAttribute("height",String(_u));var Cu=Tu.getContext("2d");if(Cu){Cu.drawImage(Zo,0,0,_u,_u),Cu.globalCompositeOperation="source-out";var Pu=128;Cu.beginPath(),Cu.lineWidth=29.952,Cu.arc(Pu,Pu,84.48,0,2*Math.PI),Cu.strokeStyle="rgba(255, 255, 255, 0.5)",Cu.closePath(),Cu.stroke(),Jo.image=Tu,Jo.needsUpdate=!0}}},Zo.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Jo),es=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256,Pu=199.68;return Tu.beginPath(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ts=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256,Pu=138.24,Bu=Tu.createLinearGradient(Cu-Math.cos(Math.PI/4)*Pu,Cu-Math.sin(Math.PI/4)*Pu,Cu+Math.cos(Math.PI/4)*Pu,Cu+Math.sin(Math.PI/4)*Pu);return Bu.addColorStop(0,"rgba(255, 255, 255, 1)"),Bu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Bu.addColorStop(1,"rgba(255, 255, 255, 1)"),Tu.beginPath(),Tu.lineWidth=33.28,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle=Bu,Tu.shadowBlur=38.4,Tu.shadowColor="rgba(0, 0, 0, 0.3)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),is$3=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256,Pu=199.68,Bu=Tu.createLinearGradient(Cu+Math.cos(Math.PI/4)*Pu,Cu-Math.sin(Math.PI/4)*Pu,Cu-Math.cos(Math.PI/4)*Pu,Cu+Math.sin(Math.PI/4)*Pu);return Bu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Bu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Bu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.beginPath(),Tu.lineWidth=15.36,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle=Bu,Tu.shadowBlur=25.6,Tu.shadowColor="rgba(0, 0, 0, 0.5)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ns=function(_u,Tu){var Cu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Cu,Cu,84.48,0,2*Math.PI*Tu),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},rs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var Tu=_u.getContext("2d");Tu&&ns(Tu,2*Math.PI);var Cu=new r$3.CanvasTexture(_u);return Object.assign(Cu,{setProgress:function(Pu){Tu&&(ns(Tu,Pu),Cu.needsUpdate=!0)}})}return null},os=[],ss=rs(),as=function(_u){function Tu(){var Cu=_u.call(this)||this;Cu.progress=0,Cu.opacity=0,Cu.loading=!1,Cu.current=!1,Cu.disabled=!1,Cu.ringRotateMotion=new Ro({angle:0}),Cu.tapMotion=new Ro({scale:1,opacity:1}),Cu.progressMotion=new Ro({progress:0}),Cu.progressOpacityMotion=new Ro({opacity:0}),Cu.opacityMotion=new Ro({opacity:0});var Pu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Cu.centerMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:ts,opacity:0}))),Cu.ringMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:is$3,opacity:0}))),Cu.loadingMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:$o,opacity:.5}))),Cu.disableMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:es,opacity:0}))),Cu.progressMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:ss,opacity:0}))),Cu.loadingMesh.visible=!1,Cu.disableMesh.visible=!1,Cu.ringMesh.position.y=.003,Cu.disableMesh.position.y=.002,Cu.centerMesh.position.y=.002,Cu.loadingMesh.position.y=.005,Cu.progressMesh.position.y=.004,Cu.centerMesh.frustumCulled=!1,Cu.ringMesh.frustumCulled=!1,Cu.progressMesh.frustumCulled=!1,Cu.loadingMesh.frustumCulled=!1,Cu.disableMesh.frustumCulled=!1,Cu.renderOrder=-2,Cu.add(Cu.centerMesh),Cu.add(Cu.ringMesh),Cu.add(Cu.progressMesh),Cu.add(Cu.loadingMesh),Cu.add(Cu.disableMesh),Cu.needsRender=!0,Cu}return t$3.__extends(Tu,_u),Tu.prototype.setProgress=function(Cu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Cu&&(Cu=ho(Cu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe),Cu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe),this.progressMotion.set({progress:ho(1.2*Cu,0,1)},0).catch(Qe)):this.progressMotion.set({progress:ho(1.2*Cu,0,1)},100).catch(Qe)),this.progress=Cu)},Tu.prototype.setOpacity=function(Cu){this.opacity!==Cu&&(this.opacity=Cu=ho(Cu,0,1),this.opacityMotion.set({opacity:Cu},500).catch(Qe))},Tu.prototype.setCurrent=function(Cu){if(this.current!==Cu){if(Cu===!0&&this.ringRotateMotion.ended){var Pu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Pu,5e3).catch(Qe)}this.current=Cu}},Tu.prototype.setLoading=function(Cu){this.loading!==Cu&&(this.loading=Cu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Cu,this.needsRender=!0)},Tu.prototype.setDisabled=function(Cu){this.disabled!==Cu&&(this.disabled=Cu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Cu,this.ringMesh.visible=!Cu,this.centerMesh.visible=!Cu,this.needsRender=!0)},Tu.prototype.tap=function(){var Cu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe),this.progressMotion.set({progress:0},0).catch(Qe),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Cu.progressOpacityMotion.set({opacity:Cu.progress>0?1:0},300).catch(Qe),Cu.progressMotion.set({progress:Cu.progress},120).catch(Qe)}).catch(Qe)):Promise.resolve()},Tu.prototype.setResolution=function(Cu,Pu){var Bu=ho(Math.max(Cu,Pu)/1e3,1,1.8);this.scale.set(Bu,0,Bu)},Tu.prototype.updateTime=function(Cu,Pu){var Bu;if(!this.progressMotion.ended){this.progressMotion.update(Cu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else if(Ru===1)this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else{if(this.progressMesh.material.map===ss){var Lu=os.pop()||rs();this.progressMesh.material.map=Lu}(Bu=this.progressMesh.material.map)===null||Bu===void 0||Bu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Cu);var Ou=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Ou,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Cu),Ou=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ou,this.ringMesh.material.opacity=Ou,this.disableMesh.material.opacity=Ou,this.loadingMesh.material.opacity=Ou,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Pu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Cu);var Du=this.tapMotion.value.scale;this.centerMesh.scale.set(Du,Du,Du),this.ringMesh.scale.set(Du,Du,Du),this.progressMesh.scale.set(Du,Du,Du),Ou=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ou,this.ringMesh.material.opacity=Ou,this.disableMesh.material.opacity=Ou,this.loadingMesh.material.opacity=Ou,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Cu),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},Tu.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},Tu}(r$3.Object3D),ls=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),us=new Float32Array([0,1,1,1,0,0,1,0]),hs=new Uint8Array([0,2,1,2,3,1]),cs=new r$3.BufferGeometry;cs.setAttribute("position",new r$3.BufferAttribute(ls,3)),cs.setAttribute("uv",new r$3.BufferAttribute(us,2)),cs.setIndex(new r$3.BufferAttribute(hs,1));var ds=function(){var _u=yt(),Tu=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Cu=256,Pu=document.createElement("canvas");Pu.setAttribute("width",String(Cu)),Pu.setAttribute("height",String(Cu));var Bu=Pu.getContext("2d");if(Bu){Bu.drawImage(_u,0,0,Cu,Cu),Bu.globalCompositeOperation="source-out";var Ru=128;Bu.beginPath(),Bu.lineWidth=29.952,Bu.arc(Ru,Ru,84.48,0,2*Math.PI),Bu.strokeStyle="rgba(255, 255, 255, 0.5)",Bu.closePath(),Bu.stroke(),Tu.image=Pu,Tu.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Tu}(),ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256,Pu=199.68;return Tu.beginPath(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),fs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu)return Tu.beginPath(),Tu.arc(256,256,199.68,0,2*Math.PI),Tu.fillStyle="rgba(0, 0, 0, 0.2)",Tu.closePath(),Tu.fill(),new r$3.CanvasTexture(_u)}return null}(),As=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256,Pu=138.24,Bu=Tu.createLinearGradient(Cu-Math.cos(Math.PI/4)*Pu,Cu-Math.sin(Math.PI/4)*Pu,Cu+Math.cos(Math.PI/4)*Pu,Cu+Math.sin(Math.PI/4)*Pu);return Bu.addColorStop(0,"rgba(255, 255, 255, 1)"),Bu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Bu.addColorStop(1,"rgba(255, 255, 255, 1)"),Tu.beginPath(),Tu.lineWidth=33.28,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle=Bu,Tu.shadowBlur=38.4,Tu.shadowColor="rgba(0, 0, 0, 0.3)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),gs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256,Pu=199.68,Bu=Tu.createLinearGradient(Cu+Math.cos(Math.PI/4)*Pu,Cu-Math.sin(Math.PI/4)*Pu,Cu-Math.cos(Math.PI/4)*Pu,Cu+Math.sin(Math.PI/4)*Pu);return Bu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Bu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Bu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.beginPath(),Tu.lineWidth=15.36,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle=Bu,Tu.shadowBlur=25.6,Tu.shadowColor="rgba(0, 0, 0, 0.5)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ms=function(_u,Tu){var Cu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Cu,Cu,84.48,0,2*Math.PI*Tu),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},vs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var Tu=_u.getContext("2d");Tu&&ms(Tu,2*Math.PI);var Cu=new r$3.CanvasTexture(_u);return Object.assign(Cu,{setProgress:function(Pu){Tu&&(ms(Tu,Pu),Cu.needsUpdate=!0)}})}return null},ys=[],bs=vs(),xs=function(_u){function Tu(){var Cu=_u.call(this)||this;Cu.progress=0,Cu.opacity=0,Cu.loading=!1,Cu.current=!1,Cu.disabled=!1,Cu.ringRotateMotion=new Ro({angle:0}),Cu.tapMotion=new Ro({scale:1,opacity:1}),Cu.progressMotion=new Ro({progress:0}),Cu.progressOpacityMotion=new Ro({opacity:0}),Cu.opacityMotion=new Ro({opacity:0});var Pu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Cu.backgroundMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:fs,opacity:1}))),Cu.centerMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:As,opacity:0}))),Cu.ringMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:gs,opacity:0}))),Cu.loadingMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:ds,opacity:.5}))),Cu.disableMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:ps,opacity:0}))),Cu.progressMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:bs,opacity:0}))),Cu.loadingMesh.visible=!1,Cu.disableMesh.visible=!1,Cu.backgroundMesh.position.y=.0018,Cu.ringMesh.position.y=.003,Cu.disableMesh.position.y=.002,Cu.centerMesh.position.y=.002,Cu.loadingMesh.position.y=.005,Cu.progressMesh.position.y=.004,Cu.centerMesh.frustumCulled=!1,Cu.ringMesh.frustumCulled=!1,Cu.progressMesh.frustumCulled=!1,Cu.loadingMesh.frustumCulled=!1,Cu.disableMesh.frustumCulled=!1,Cu.renderOrder=-2,Cu.add(Cu.backgroundMesh),Cu.add(Cu.centerMesh),Cu.add(Cu.ringMesh),Cu.add(Cu.progressMesh),Cu.add(Cu.loadingMesh),Cu.add(Cu.disableMesh),Cu.needsRender=!0,Cu}return t$3.__extends(Tu,_u),Tu.prototype.setProgress=function(Cu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Cu&&(Cu=ho(Cu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe),Cu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe),this.progressMotion.set({progress:ho(1.2*Cu,0,1)},0).catch(Qe)):this.progressMotion.set({progress:ho(1.2*Cu,0,1)},100).catch(Qe)),this.progress=Cu)},Tu.prototype.setOpacity=function(Cu){this.opacity!==Cu&&(this.opacity=Cu=ho(Cu,0,1),this.opacityMotion.set({opacity:Cu},500).catch(Qe))},Tu.prototype.setCurrent=function(Cu){if(this.current!==Cu){if(Cu===!0&&this.ringRotateMotion.ended){var Pu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Pu,5e3).catch(Qe)}this.current=Cu}},Tu.prototype.setLoading=function(Cu){this.loading!==Cu&&(this.loading=Cu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Cu,this.needsRender=!0)},Tu.prototype.setDisabled=function(Cu){this.disabled!==Cu&&(this.disabled=Cu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Cu,this.ringMesh.visible=!Cu,this.centerMesh.visible=!Cu,this.needsRender=!0)},Tu.prototype.tap=function(){var Cu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe),this.progressMotion.set({progress:0},0).catch(Qe),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Cu.progressOpacityMotion.set({opacity:Cu.progress>0?1:0},300).catch(Qe),Cu.progressMotion.set({progress:Cu.progress},120).catch(Qe)}).catch(Qe)):Promise.resolve()},Tu.prototype.setResolution=function(Cu,Pu){var Bu=ho(Math.max(Cu,Pu)/1e3,1,1.8);this.scale.set(Bu,0,Bu)},Tu.prototype.updateTime=function(Cu,Pu){var Bu;if(!this.progressMotion.ended){this.progressMotion.update(Cu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs);else if(Ru===1)this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs);else{if(this.progressMesh.material.map===bs){var Lu=ys.pop()||vs();this.progressMesh.material.map=Lu}(Bu=this.progressMesh.material.map)===null||Bu===void 0||Bu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Cu);var Ou=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Ou,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Cu),Ou=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.backgroundMesh.material.opacity=Ou,this.centerMesh.material.opacity=Ou,this.ringMesh.material.opacity=Ou,this.disableMesh.material.opacity=Ou,this.loadingMesh.material.opacity=Ou,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Pu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Cu);var Du=this.tapMotion.value.scale;this.backgroundMesh.scale.set(Du,Du,Du),this.centerMesh.scale.set(Du,Du,Du),this.ringMesh.scale.set(Du,Du,Du),this.progressMesh.scale.set(Du,Du,Du),Ou=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ou,this.ringMesh.material.opacity=Ou,this.disableMesh.material.opacity=Ou,this.loadingMesh.material.opacity=Ou,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Cu),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},Tu.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},Tu}(r$3.Object3D),ws=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Es=new Float32Array([0,1,1,1,0,0,1,0]),Ms=new Uint8Array([0,2,1,2,3,1]),Is=new r$3.BufferGeometry;Is.setAttribute("position",new r$3.BufferAttribute(ws,3)),Is.setAttribute("uv",new r$3.BufferAttribute(Es,2)),Is.setIndex(new r$3.BufferAttribute(Ms,1));var Ss=function(){var _u=yt(),Tu=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Cu=256,Pu=document.createElement("canvas");Pu.setAttribute("width",String(Cu)),Pu.setAttribute("height",String(Cu));var Bu=Pu.getContext("2d");if(Bu){Bu.drawImage(_u,0,0,Cu,Cu),Bu.globalCompositeOperation="source-out";var Ru=128;Bu.beginPath(),Bu.lineWidth=29.44,Bu.arc(Ru,Ru,55.04,0,2*Math.PI),Bu.strokeStyle="rgba(255, 255, 255, 0.7)",Bu.closePath(),Bu.stroke(),Tu.image=Pu,Tu.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Tu}(),Cs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256,Pu=199.68;return Tu.beginPath(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Bs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var Tu=_u.getContext("2d");if(Tu){var Cu=128;return Tu.beginPath(),Tu.lineWidth=29.44,Tu.arc(Cu,Cu,84.48,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 1)",Tu.shadowBlur=19.2,Tu.shadowColor="rgba(200, 200, 200, 0.2)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Ts=function(_u,Tu){var Cu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Cu,Cu,57.6,0,2*Math.PI*Tu),_u.strokeStyle="rgba(255, 255, 255, 0.6)",_u.stroke()},Ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var Tu=_u.getContext("2d");Tu&&Ts(Tu,2*Math.PI);var Cu=new r$3.CanvasTexture(_u);return Object.assign(Cu,{setProgress:function(Pu){Tu&&(Ts(Tu,Pu),Cu.needsUpdate=!0)}})}return null},Rs=[],ks=Ps(),Ds=function(_u){function Tu(){var Cu=_u.call(this)||this;Cu.progress=0,Cu.opacity=0,Cu.loading=!1,Cu.current=!1,Cu.disabled=!1,Cu.tapMotion=new Ro({scale:1,opacity:1}),Cu.progressMotion=new Ro({progress:0}),Cu.progressOpacityMotion=new Ro({opacity:0}),Cu.opacityMotion=new Ro({opacity:0});var Pu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Cu.centerMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Bs,opacity:0}))),Cu.loadingMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Ss,opacity:.5}))),Cu.disableMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Cs,opacity:0}))),Cu.progressMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:ks,opacity:0}))),Cu.loadingMesh.visible=!1,Cu.disableMesh.visible=!1,Cu.disableMesh.position.y=.002,Cu.centerMesh.position.y=.002,Cu.loadingMesh.position.y=.005,Cu.progressMesh.position.y=.004,Cu.centerMesh.frustumCulled=!1,Cu.progressMesh.frustumCulled=!1,Cu.loadingMesh.frustumCulled=!1,Cu.disableMesh.frustumCulled=!1,Cu.renderOrder=-2,Cu.add(Cu.centerMesh),Cu.add(Cu.progressMesh),Cu.add(Cu.loadingMesh),Cu.add(Cu.disableMesh),Cu.needsRender=!0,Cu}return t$3.__extends(Tu,_u),Tu.prototype.setProgress=function(Cu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Cu&&(Cu=ho(Cu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe),Cu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe),this.progressMotion.set({progress:ho(1.2*Cu,0,1)},0).catch(Qe)):this.progressMotion.set({progress:ho(1.2*Cu,0,1)},100).catch(Qe)),this.progress=Cu)},Tu.prototype.setOpacity=function(Cu){Cu>0&&(Cu=1),this.opacity!==Cu&&(this.opacity=Cu=ho(Cu,0,1),this.opacityMotion.set({opacity:Cu},500).catch(Qe))},Tu.prototype.setCurrent=function(Cu){this.current!==Cu&&(this.current=Cu)},Tu.prototype.setLoading=function(Cu){this.loading!==Cu&&(this.loading=Cu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Cu,this.needsRender=!0)},Tu.prototype.setDisabled=function(Cu){this.disabled!==Cu&&(this.disabled=Cu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Cu,this.centerMesh.visible=!Cu,this.needsRender=!0)},Tu.prototype.tap=function(){var Cu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe),this.progressMotion.set({progress:0},0).catch(Qe),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Cu.progressOpacityMotion.set({opacity:Cu.progress>0?1:0},300).catch(Qe),Cu.progressMotion.set({progress:Cu.progress},120).catch(Qe)}).catch(Qe)):Promise.resolve()},Tu.prototype.setResolution=function(Cu,Pu){var Bu=ho(Math.max(Cu,Pu)/1e3,1.2,1.8);this.scale.set(Bu,0,Bu)},Tu.prototype.updateTime=function(Cu,Pu){var Bu;if(!this.progressMotion.ended){this.progressMotion.update(Cu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else if(Ru===1)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else{if(this.progressMesh.material.map===ks){var Lu=Rs.pop()||Ps();this.progressMesh.material.map=Lu}(Bu=this.progressMesh.material.map)===null||Bu===void 0||Bu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Cu);var Ou=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Ou,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Cu),Ou=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ou,this.disableMesh.material.opacity=Ou,this.loadingMesh.material.opacity=Ou,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Pu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Cu);var Du=this.tapMotion.value.scale;this.centerMesh.scale.set(Du,Du,Du),this.progressMesh.scale.set(Du,Du,Du),Ou=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ou,this.disableMesh.material.opacity=Ou,this.loadingMesh.material.opacity=Ou,this.needsRender=!0}},Tu.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},Tu}(r$3.Object3D),Ls=new r$3.CircleBufferGeometry(.1,16),Os=function(){if(typeof document!="undefined"){var _u=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(_u)),Tu.setAttribute("height",String(_u));var Cu=Tu.getContext("2d");if(Cu){var Pu=256,Bu=192,Ru=76.8;Cu.lineWidth=Ru,Cu.arc(Pu,Pu,Bu,0,2*Math.PI),Cu.strokeStyle="rgba(147, 162, 255, 0.3)",Cu.shadowBlur=12.8,Cu.shadowColor="rgba(255, 255, 255, 0.6)",Cu.stroke(),Cu.lineWidth=Ru,Cu.arc(Pu,Pu,Bu,0,2*Math.PI);var Lu=Cu.createRadialGradient(Pu,Pu,153.6,Pu,Pu,230.4);Lu.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Lu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.3)"),Cu.strokeStyle=Lu,Cu.stroke(),Cu.beginPath(),Cu.lineWidth=4.8,Cu.arc(Pu,Pu,228,0,2*Math.PI);var Ou=Cu.createLinearGradient(0,0,_u,0);return Ou.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ou.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Cu.strokeStyle=Ou,Cu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Ns=new r$3.MeshBasicMaterial({map:Os,transparent:!0}),Fs=function(_u){function Tu(){var Cu=_u.call(this)||this;return Cu.ringMesh=new r$3.Mesh(Ls,Ns),Cu.ringMesh.renderOrder=-3,Cu.add(Cu.ringMesh),Cu}return t$3.__extends(Tu,_u),Tu.prototype.dispose=function(){this.remove(this.ringMesh)},Tu}(r$3.Object3D);function Qs(_u,Tu,Cu){var Pu=Math.abs(_u-Tu);return Pu<.001||Cu!==void 0&&Math.abs(Cu-Pu)<.001}function Vs(_u,Tu,Cu){return!Qs(_u,Tu,Cu)}function _s(_u,Tu){return _u.distanceTo(Tu)<.001}function Hs(_u,Tu){return!_s(_u,Tu)}var qs=new r$3.Vector3(0,0,0),zs=function(_u){function Tu(Cu,Pu){Pu===void 0&&(Pu=qs);var Bu=_u.call(this)||this,Ru=new r$3.BoxBufferGeometry(Cu.max.x-Cu.min.x+2*Pu.x,Cu.max.y-Cu.min.y+2*Pu.y,Cu.max.z-Cu.min.z+2*Pu.z,1,1);Ru.groups.length=0,Ru.groups.push({start:0,count:36,materialIndex:0}),Ru.applyMatrix4(new r$3.Matrix4().makeScale(-1,1,1)),Ru.computeVertexNormals();var Lu=new Mt;Lu.defines.USE_MAP=!1,Lu.defines.USE_UV=!1,Lu.uniforms.diffuse.value=new r$3.Color(16777215);var Ou=new ft(Ru,[Lu]);return Ou.floorIndex=-1,Ou.position.copy(Cu.getCenter(new r$3.Vector3)),Ou.frustumCulled=!1,Bu.renderOrder=-3,Bu.add(Ou),Bu.boundingBox=new r$3.Box3,Bu.computeBoundingBox(),Bu}return t$3.__extends(Tu,_u),Tu.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},Tu.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},Tu}(gt);function Ks(_u,Tu){return Tu===void 0&&(Tu=qs),new zs(_u,Tu)}function Us(_u){var Tu=_u.getError();if(Tu===_u.NO_ERROR)return null;switch(Tu){case _u.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case _u.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case _u.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case _u.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case _u.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case _u.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}var js=2*Math.PI;function Gs(_u){return _u>=0&&_u<js?_u:(_u%js+js)%js}var Ws=Math.PI,Xs=2*Ws;function Ys(_u,Tu,Cu){if(_u===Tu)return Tu;var Pu=Tu-_u;return Math.abs(Pu)<=Cu?Tu:_u+(Pu>0?1:-1)*Cu}(function(){try{var _u=document.createElement("canvas");!window.WebGLRenderingContext||!_u.getContext("webgl")&&_u.getContext("experimental-webgl")}catch{return!1}})();var Zs=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(_u)||/webos/i.test(_u)||/ipad|iphone|ipod/i.test(_u)||/iemobile/i.test(_u)||/opera mini/i.test(_u)||/blackberry/i.test(_u)||/windows phone/i.test(_u)};function Js(_u,Tu){_u.mode=Tu.mode,_u.panoIndex=Tu.panoIndex,_u.longitude=Tu.longitude,_u.latitude=Tu.latitude,_u.fov=Tu.fov,_u.offset.copy(Tu.offset)}function $s(_u,Tu){return _u.panoIndex===Tu.panoIndex&&_u.mode===Tu.mode&&Qs(_u.longitude,Tu.longitude,2*Math.PI)&&Qs(_u.latitude,Tu.latitude)&&Qs(_u.fov,Tu.fov)&&_s(_u.offset,Tu.offset)}var ea$1=function(_u){return Number(_u)};function ta(_u,Tu,Cu){var Pu;Tu===void 0&&(Tu=ea$1),Cu===void 0&&(Cu=!1);for(var Bu,Ru=1/0,Lu=0,Ou=_u;Lu<Ou.length;Lu++){var Du=Ou[Lu],$u=Tu(Du);$u<=Ru&&(Bu=(Pu=[Du,$u])[0],Ru=Pu[1])}return Cu?[Bu,Ru]:Bu}function ia$1(_u){for(var Tu in _u)return!1;return!0}function na(_u){return{longitude:_u.longitude,latitude:_u.latitude,fov:_u.fov,offset:_u.offset.clone(),distance:_u.distance}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var ra=function(_u,Tu,Cu,Pu){var Bu,Ru=["","webkit","Moz","MS","ms","o"],Lu=Tu.createElement?Tu.createElement("div"):Pu,Ou=Math.round,Du=Math.abs,$u=Date.now;function ku(ap,vp,bp){return setTimeout(Uu(ap,bp),vp)}function Fu(ap,vp,bp){return!!Array.isArray(ap)&&(Nu(ap,bp[vp],bp),!0)}function Nu(ap,vp,bp){var Bp;if(ap)if(ap.forEach)ap.forEach(vp,bp);else if(ap.length!==Pu)for(Bp=0;Bp<ap.length;)vp.call(bp,ap[Bp],Bp,ap),Bp++;else for(Bp in ap)ap.hasOwnProperty(Bp)&&vp.call(bp,ap[Bp],Bp,ap)}function Vu(ap,vp,bp){var Bp="DEPRECATED METHOD: "+vp+`
`+bp+` AT 
`;return function(){var Up=new Error("get-stack-trace"),om=Up&&Up.stack?Up.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",sm=_u.console&&(_u.console.warn||_u.console.log);return sm&&sm.call(_u.console,Bp,om),ap.apply(this,arguments)}}Bu=typeof Object.assign!="function"?function(ap){if(ap===Pu||ap===null)throw new TypeError("Cannot convert undefined or null to object");for(var vp=Object(ap),bp=1;bp<arguments.length;bp++){var Bp=arguments[bp];if(Bp!==Pu&&Bp!==null)for(var Up in Bp)Bp.hasOwnProperty(Up)&&(vp[Up]=Bp[Up])}return vp}:Object.assign;var Gu=Vu(function(ap,vp,bp){for(var Bp=Object.keys(vp),Up=0;Up<Bp.length;)(!bp||bp&&ap[Bp[Up]]===Pu)&&(ap[Bp[Up]]=vp[Bp[Up]]),Up++;return ap},"extend","Use `assign`."),Hu=Vu(function(ap,vp){return Gu(ap,vp,!0)},"merge","Use `assign`.");function ju(ap,vp,bp){var Bp,Up=vp.prototype;(Bp=ap.prototype=Object.create(Up)).constructor=ap,Bp._super=Up,bp&&Bu(Bp,bp)}function Uu(ap,vp){return function(){return ap.apply(vp,arguments)}}function zu(ap,vp){return typeof ap=="function"?ap.apply(vp&&vp[0]||Pu,vp):ap}function Wu(ap,vp){return ap===Pu?vp:ap}function Qu(ap,vp,bp){Nu(_h(vp),function(Bp){ap.addEventListener(Bp,bp,!1)})}function qu(ap,vp,bp){Nu(_h(vp),function(Bp){ap.removeEventListener(Bp,bp,!1)})}function Yu(ap,vp){for(;ap;){if(ap==vp)return!0;ap=ap.parentNode}return!1}function Xc(ap,vp){return ap.indexOf(vp)>-1}function _h(ap){return ap.trim().split(/\s+/g)}function _d(ap,vp,bp){if(ap.indexOf&&!bp)return ap.indexOf(vp);for(var Bp=0;Bp<ap.length;){if(bp&&ap[Bp][bp]==vp||!bp&&ap[Bp]===vp)return Bp;Bp++}return-1}function Ku(ap){return Array.prototype.slice.call(ap,0)}function Xu(ap,vp,bp){for(var Bp=[],Up=[],om=0;om<ap.length;){var sm=vp?ap[om][vp]:ap[om];_d(Up,sm)<0&&Bp.push(ap[om]),Up[om]=sm,om++}return bp&&(Bp=vp?Bp.sort(function(wm,nm){return wm[vp]>nm[vp]}):Bp.sort()),Bp}function Ju(ap,vp){for(var bp,Bp,Up=vp[0].toUpperCase()+vp.slice(1),om=0;om<Ru.length;){if((Bp=(bp=Ru[om])?bp+Up:vp)in ap)return Bp;om++}return Pu}var Zu=1;function _c(ap){var vp=ap.ownerDocument||ap;return vp.defaultView||vp.parentWindow||_u}var _f="ontouchstart"in _u,ep=Ju(_u,"PointerEvent")!==Pu,tp=_f&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),op="touch",hp="mouse",cp=24,Sp=["x","y"],yp=["clientX","clientY"];function Rp(ap,vp){var bp=this;this.manager=ap,this.callback=vp,this.element=ap.element,this.target=ap.options.inputTarget,this.domHandler=function(Bp){zu(ap.options.enable,[ap])&&bp.handler(Bp)},this.init()}function wp(ap,vp,bp){var Bp=bp.pointers.length,Up=bp.changedPointers.length,om=1&vp&&Bp-Up==0,sm=12&vp&&Bp-Up==0;bp.isFirst=!!om,bp.isFinal=!!sm,om&&(ap.session={}),bp.eventType=vp,function(wm,nm){var Em=wm.session,Lm=nm.pointers,Wm=Lm.length;Em.firstInput||(Em.firstInput=Pp(nm)),Wm>1&&!Em.firstMultiple?Em.firstMultiple=Pp(nm):Wm===1&&(Em.firstMultiple=!1);var qm=Em.firstInput,Nm=Em.firstMultiple,Om=Nm?Nm.center:qm.center,Hm=nm.center=Ep(Lm);nm.timeStamp=$u(),nm.deltaTime=nm.timeStamp-qm.timeStamp,nm.angle=up(Om,Hm),nm.distance=fp(Om,Hm),function(Tm,bm){var Pm=bm.center,Vm=Tm.offsetDelta||{},Um=Tm.prevDelta||{},Fm=Tm.prevInput||{};bm.eventType!==1&&Fm.eventType!==4||(Um=Tm.prevDelta={x:Fm.deltaX||0,y:Fm.deltaY||0},Vm=Tm.offsetDelta={x:Pm.x,y:Pm.y}),bm.deltaX=Um.x+(Pm.x-Vm.x),bm.deltaY=Um.y+(Pm.y-Vm.y)}(Em,nm),nm.offsetDirection=rp(nm.deltaX,nm.deltaY);var Dm=ip(nm.deltaTime,nm.deltaX,nm.deltaY);nm.overallVelocityX=Dm.x,nm.overallVelocityY=Dm.y,nm.overallVelocity=Du(Dm.x)>Du(Dm.y)?Dm.x:Dm.y,nm.scale=Nm?function(Tm,bm){return fp(bm[0],bm[1],yp)/fp(Tm[0],Tm[1],yp)}(Nm.pointers,Lm):1,nm.rotation=Nm?function(Tm,bm){return up(bm[1],bm[0],yp)+up(Tm[1],Tm[0],yp)}(Nm.pointers,Lm):0,nm.maxPointers=Em.prevInput?nm.pointers.length>Em.prevInput.maxPointers?nm.pointers.length:Em.prevInput.maxPointers:nm.pointers.length,function(Tm,bm){var Pm,Vm,Um,Fm,Cm=Tm.lastInterval||bm,Qm=bm.timeStamp-Cm.timeStamp;if(bm.eventType!=8&&(Qm>25||Cm.velocity===Pu)){var Km=bm.deltaX-Cm.deltaX,Xm=bm.deltaY-Cm.deltaY,Gm=ip(Qm,Km,Xm);Vm=Gm.x,Um=Gm.y,Pm=Du(Gm.x)>Du(Gm.y)?Gm.x:Gm.y,Fm=rp(Km,Xm),Tm.lastInterval=bm}else Pm=Cm.velocity,Vm=Cm.velocityX,Um=Cm.velocityY,Fm=Cm.direction;bm.velocity=Pm,bm.velocityX=Vm,bm.velocityY=Um,bm.direction=Fm}(Em,nm);var km=wm.element;Yu(nm.srcEvent.target,km)&&(km=nm.srcEvent.target),nm.target=km}(ap,bp),ap.emit("hammer.input",bp),ap.recognize(bp),ap.session.prevInput=bp}function Pp(ap){for(var vp=[],bp=0;bp<ap.pointers.length;)vp[bp]={clientX:Ou(ap.pointers[bp].clientX),clientY:Ou(ap.pointers[bp].clientY)},bp++;return{timeStamp:$u(),pointers:vp,center:Ep(vp),deltaX:ap.deltaX,deltaY:ap.deltaY}}function Ep(ap){var vp=ap.length;if(vp===1)return{x:Ou(ap[0].clientX),y:Ou(ap[0].clientY)};for(var bp=0,Bp=0,Up=0;Up<vp;)bp+=ap[Up].clientX,Bp+=ap[Up].clientY,Up++;return{x:Ou(bp/vp),y:Ou(Bp/vp)}}function ip(ap,vp,bp){return{x:vp/ap||0,y:bp/ap||0}}function rp(ap,vp){return ap===vp?1:Du(ap)>=Du(vp)?ap<0?2:4:vp<0?8:16}function fp(ap,vp,bp){bp||(bp=Sp);var Bp=vp[bp[0]]-ap[bp[0]],Up=vp[bp[1]]-ap[bp[1]];return Math.sqrt(Bp*Bp+Up*Up)}function up(ap,vp,bp){bp||(bp=Sp);var Bp=vp[bp[0]]-ap[bp[0]],Up=vp[bp[1]]-ap[bp[1]];return 180*Math.atan2(Up,Bp)/Math.PI}Rp.prototype={handler:function(){},init:function(){this.evEl&&Qu(this.element,this.evEl,this.domHandler),this.evTarget&&Qu(this.target,this.evTarget,this.domHandler),this.evWin&&Qu(_c(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&qu(this.element,this.evEl,this.domHandler),this.evTarget&&qu(this.target,this.evTarget,this.domHandler),this.evWin&&qu(_c(this.element),this.evWin,this.domHandler)}};var pp={mousedown:1,mousemove:2,mouseup:4},gp="mousedown",Ap="mousemove mouseup";function Mp(){this.evEl=gp,this.evWin=Ap,this.pressed=!1,Rp.apply(this,arguments)}ju(Mp,Rp,{handler:function(ap){var vp=pp[ap.type];1&vp&&(ap.button===0||ap.button===2)&&(this.pressed=!0),2&vp&&ap.which!==1&&(vp=4),this.pressed&&(4&vp&&(this.pressed=!1),this.callback(this.manager,vp,{pointers:[ap],changedPointers:[ap],pointerType:hp,srcEvent:ap}))}});var $p={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Tp={2:op,3:"pen",4:hp,5:"kinect"},np="pointerdown",sp="pointermove pointerup pointercancel";function Ip(){this.evEl=np,this.evWin=sp,Rp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_u.MSPointerEvent&&!_u.PointerEvent&&(np="MSPointerDown",sp="MSPointerMove MSPointerUp MSPointerCancel"),ju(Ip,Rp,{handler:function(ap){var vp=this.store,bp=!1,Bp=!1,Up=ap.type.toLowerCase().replace("ms",""),om=$p[Up],sm=Tp[ap.pointerType]||ap.pointerType,wm=sm==op,nm=_d(vp,ap.pointerId,"pointerId");1&om&&(ap.button===0||ap.button===2||wm)?nm<0&&(vp.push(ap),nm=vp.length-1):12&om?bp=!0:wm||ap.buttons!==0||(bp=!0,Bp=!0,om=$p.pointerup),nm<0||(Bp||(vp[nm]=ap),this.callback(this.manager,om,{pointers:vp,changedPointers:[ap],pointerType:sm,srcEvent:vp[nm]}),bp&&vp.splice(nm,1))}});var Cp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Vp="touchstart",Fp="touchstart touchmove touchend touchcancel";function Gp(){this.evTarget=Vp,this.evWin=Fp,this.started=!1,Rp.apply(this,arguments)}function qp(ap,vp){var bp=Ku(ap.touches),Bp=Ku(ap.changedTouches);return 12&vp&&(bp=Xu(bp.concat(Bp),"identifier",!0)),[bp,Bp]}ju(Gp,Rp,{handler:function(ap){var vp=Cp[ap.type];if(vp===1&&(this.started=!0),this.started){var bp=qp.call(this,ap,vp);12&vp&&bp[0].length-bp[1].length==0&&(this.started=!1),this.callback(this.manager,vp,{pointers:bp[0],changedPointers:bp[1],pointerType:op,srcEvent:ap})}}});var Wp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Jp="touchstart touchmove touchend touchcancel";function Hp(){this.evTarget=Jp,this.targetIds={},Rp.apply(this,arguments)}function Kp(ap,vp){var bp=Ku(ap.touches),Bp=this.targetIds;if(3&vp&&bp.length===1)return Bp[bp[0].identifier]=!0,[bp,bp];var Up,om,sm=Ku(ap.changedTouches),wm=[],nm=this.target;if(om=bp.filter(function(Em){return Yu(Em.target,nm)}),vp===1)for(Up=0;Up<om.length;)Bp[om[Up].identifier]=!0,Up++;for(Up=0;Up<sm.length;)Bp[sm[Up].identifier]&&wm.push(sm[Up]),12&vp&&delete Bp[sm[Up].identifier],Up++;return wm.length?[Xu(om.concat(wm),"identifier",!0),wm]:void 0}ju(Hp,Rp,{handler:function(ap){var vp=Wp[ap.type],bp=Kp.call(this,ap,vp);bp&&this.callback(this.manager,vp,{pointers:bp[0],changedPointers:bp[1],pointerType:op,srcEvent:ap})}});function jp(){Rp.apply(this,arguments);var ap=Uu(this.handler,this);this.touch=new Hp(this.manager,ap),this.mouse=new Mp(this.manager,ap),this.primaryTouch=null,this.lastTouches=[]}function Yp(ap,vp){1&ap?(this.primaryTouch=vp.changedPointers[0].identifier,_p.call(this,vp)):12&ap&&_p.call(this,vp)}function _p(ap){var vp=ap.changedPointers[0];if(vp.identifier===this.primaryTouch){var bp={x:vp.clientX,y:vp.clientY};this.lastTouches.push(bp);var Bp=this.lastTouches;setTimeout(function(){var Up=Bp.indexOf(bp);Up>-1&&Bp.splice(Up,1)},2500)}}function Qp(ap){for(var vp=ap.srcEvent.clientX,bp=ap.srcEvent.clientY,Bp=0;Bp<this.lastTouches.length;Bp++){var Up=this.lastTouches[Bp],om=Math.abs(vp-Up.x),sm=Math.abs(bp-Up.y);if(om<=25&&sm<=25)return!0}return!1}ju(jp,Rp,{handler:function(ap,vp,bp){var Bp=bp.pointerType==op,Up=bp.pointerType==hp;if(!(Up&&bp.sourceCapabilities&&bp.sourceCapabilities.firesTouchEvents)){if(Bp)Yp.call(this,vp,bp);else if(Up&&Qp.call(this,bp))return;this.callback(ap,vp,bp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Zp=Lu?Ju(Lu.style,"touchAction"):Pu,tm=Zp!==Pu,em="compute",lm="auto",pm="manipulation",mm="none",Sm="pan-x",dm="pan-y",_m=function(){if(!tm)return!1;var ap={},vp=_u.CSS&&_u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(bp){ap[bp]=!vp||_u.CSS.supports("touch-action",bp)}),ap}();function xm(ap,vp){this.manager=ap,this.set(vp)}xm.prototype={set:function(ap){ap==em&&(ap=this.compute()),tm&&this.manager.element.style&&_m[ap]&&(this.manager.element.style[Zp]=ap),this.actions=ap.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ap=[];return Nu(this.manager.recognizers,function(vp){zu(vp.options.enable,[vp])&&(ap=ap.concat(vp.getTouchAction()))}),function(vp){if(Xc(vp,mm))return mm;var bp=Xc(vp,Sm),Bp=Xc(vp,dm);return bp&&Bp?mm:bp||Bp?bp?Sm:dm:Xc(vp,pm)?pm:lm}(ap.join(" "))},preventDefaults:function(ap){var vp=ap.srcEvent,bp=ap.offsetDirection;if(this.manager.session.prevented)vp.preventDefault();else{var Bp=this.actions,Up=Xc(Bp,mm)&&!_m.none,om=Xc(Bp,dm)&&!_m["pan-y"],sm=Xc(Bp,Sm)&&!_m["pan-x"];if(Up){var wm=ap.pointers.length===1,nm=ap.distance<2,Em=ap.deltaTime<250;if(wm&&nm&&Em)return}if(!sm||!om)return Up||om&&6&bp||sm&&bp&cp?this.preventSrc(vp):void 0}},preventSrc:function(ap){this.manager.session.prevented=!0,ap.preventDefault()}};var gm=32;function Mm(ap){this.options=Bu({},this.defaults,ap||{}),this.id=Zu++,this.manager=null,this.options.enable=Wu(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Bm(ap){return 16&ap?"cancel":8&ap?"end":4&ap?"move":2&ap?"start":""}function ym(ap){return ap==16?"down":ap==8?"up":ap==2?"left":ap==4?"right":""}function mp(ap,vp){var bp=vp.manager;return bp?bp.get(ap):ap}function kp(){Mm.apply(this,arguments)}function Lp(){kp.apply(this,arguments),this.pX=null,this.pY=null}function Np(){kp.apply(this,arguments)}function Xp(){Mm.apply(this,arguments),this._timer=null,this._input=null}function cm(){kp.apply(this,arguments)}function um(){kp.apply(this,arguments)}function im(){Mm.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function am(ap,vp){return(vp=vp||{}).recognizers=Wu(vp.recognizers,am.defaults.preset),new fm(ap,vp)}Mm.prototype={defaults:{},set:function(ap){return Bu(this.options,ap),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ap){if(Fu(ap,"recognizeWith",this))return this;var vp=this.simultaneous;return vp[(ap=mp(ap,this)).id]||(vp[ap.id]=ap,ap.recognizeWith(this)),this},dropRecognizeWith:function(ap){return Fu(ap,"dropRecognizeWith",this)||(ap=mp(ap,this),delete this.simultaneous[ap.id]),this},requireFailure:function(ap){if(Fu(ap,"requireFailure",this))return this;var vp=this.requireFail;return _d(vp,ap=mp(ap,this))===-1&&(vp.push(ap),ap.requireFailure(this)),this},dropRequireFailure:function(ap){if(Fu(ap,"dropRequireFailure",this))return this;ap=mp(ap,this);var vp=_d(this.requireFail,ap);return vp>-1&&this.requireFail.splice(vp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ap){return!!this.simultaneous[ap.id]},emit:function(ap){var vp=this,bp=this.state;function Bp(Up){vp.manager.emit(Up,ap)}bp<8&&Bp(vp.options.event+Bm(bp)),Bp(vp.options.event),ap.additionalEvent&&Bp(ap.additionalEvent),bp>=8&&Bp(vp.options.event+Bm(bp))},tryEmit:function(ap){if(this.canEmit())return this.emit(ap);this.state=gm},canEmit:function(){for(var ap=0;ap<this.requireFail.length;){if(!(33&this.requireFail[ap].state))return!1;ap++}return!0},recognize:function(ap){var vp=Bu({},ap);if(!zu(this.options.enable,[this,vp]))return this.reset(),void(this.state=gm);56&this.state&&(this.state=1),this.state=this.process(vp),30&this.state&&this.tryEmit(vp)},process:function(ap){},getTouchAction:function(){},reset:function(){}},ju(kp,Mm,{defaults:{pointers:1},attrTest:function(ap){var vp=this.options.pointers;return vp===0||ap.pointers.length===vp},process:function(ap){var vp=this.state,bp=ap.eventType,Bp=6&vp,Up=this.attrTest(ap);return Bp&&(8&bp||!Up)?16|vp:Bp||Up?4&bp?8|vp:2&vp?4|vp:2:gm}}),ju(Lp,kp,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var ap=this.options.direction,vp=[];return 6&ap&&vp.push(dm),ap&cp&&vp.push(Sm),vp},directionTest:function(ap){var vp=this.options,bp=!0,Bp=ap.distance,Up=ap.direction,om=ap.deltaX,sm=ap.deltaY;return Up&vp.direction||(6&vp.direction?(Up=om===0?1:om<0?2:4,bp=om!=this.pX,Bp=Math.abs(ap.deltaX)):(Up=sm===0?1:sm<0?8:16,bp=sm!=this.pY,Bp=Math.abs(ap.deltaY))),ap.direction=Up,bp&&Bp>vp.threshold&&Up&vp.direction},attrTest:function(ap){return kp.prototype.attrTest.call(this,ap)&&(2&this.state||!(2&this.state)&&this.directionTest(ap))},emit:function(ap){this.pX=ap.deltaX,this.pY=ap.deltaY;var vp=ym(ap.direction);vp&&(ap.additionalEvent=this.options.event+vp),this._super.emit.call(this,ap)}}),ju(Np,kp,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[mm]},attrTest:function(ap){return this._super.attrTest.call(this,ap)&&(Math.abs(ap.scale-1)>this.options.threshold||2&this.state)},emit:function(ap){if(ap.scale!==1){var vp=ap.scale<1?"in":"out";ap.additionalEvent=this.options.event+vp}this._super.emit.call(this,ap)}}),ju(Xp,Mm,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[lm]},process:function(ap){var vp=this.options,bp=ap.pointers.length===vp.pointers,Bp=ap.distance<vp.threshold,Up=ap.deltaTime>vp.time;if(this._input=ap,!Bp||!bp||12&ap.eventType&&!Up)this.reset();else if(1&ap.eventType)this.reset(),this._timer=ku(function(){this.state=8,this.tryEmit()},vp.time,this);else if(4&ap.eventType)return 8;return gm},reset:function(){clearTimeout(this._timer)},emit:function(ap){this.state===8&&(ap&&4&ap.eventType?this.manager.emit(this.options.event+"up",ap):(this._input.timeStamp=$u(),this.manager.emit(this.options.event,this._input)))}}),ju(cm,kp,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[mm]},attrTest:function(ap){return this._super.attrTest.call(this,ap)&&(Math.abs(ap.rotation)>this.options.threshold||2&this.state)}}),ju(um,kp,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Lp.prototype.getTouchAction.call(this)},attrTest:function(ap){var vp,bp=this.options.direction;return 30&bp?vp=ap.overallVelocity:6&bp?vp=ap.overallVelocityX:bp&cp&&(vp=ap.overallVelocityY),this._super.attrTest.call(this,ap)&&bp&ap.offsetDirection&&ap.distance>this.options.threshold&&ap.maxPointers==this.options.pointers&&Du(vp)>this.options.velocity&&4&ap.eventType},emit:function(ap){var vp=ym(ap.offsetDirection);vp&&this.manager.emit(this.options.event+vp,ap),this.manager.emit(this.options.event,ap)}}),ju(im,Mm,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[pm]},process:function(ap){var vp=this.options,bp=ap.pointers.length===vp.pointers,Bp=ap.distance<vp.threshold,Up=ap.deltaTime<vp.time;if(this.reset(),1&ap.eventType&&this.count===0)return this.failTimeout();if(Bp&&Up&&bp){if(ap.eventType!=4)return this.failTimeout();var om=!this.pTime||ap.timeStamp-this.pTime<vp.interval,sm=!this.pCenter||fp(this.pCenter,ap.center)<vp.posThreshold;if(this.pTime=ap.timeStamp,this.pCenter=ap.center,sm&&om?this.count+=1:this.count=1,this._input=ap,this.count%vp.taps===0)return this.hasRequireFailures()?(this._timer=ku(function(){this.state=8,this.tryEmit()},vp.interval,this),2):8}return gm},failTimeout:function(){return this._timer=ku(function(){this.state=gm},this.options.interval,this),gm},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),am.VERSION="2.0.7",am.defaults={domEvents:!1,touchAction:em,enable:!0,inputTarget:null,inputClass:null,preset:[[cm,{enable:!1}],[Np,{enable:!1},["rotate"]],[um,{direction:6}],[Lp,{direction:6},["swipe"]],[im],[im,{event:"doubletap",taps:2},["tap"]],[Xp]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function fm(ap,vp){var bp;this.options=Bu({},am.defaults,vp||{}),this.options.inputTarget=this.options.inputTarget||ap,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ap,this.input=new((bp=this).options.inputClass||(ep?Ip:tp?Hp:_f?jp:Mp))(bp,wp),this.touchAction=new xm(this,this.options.touchAction),Am(this,!0),Nu(this.options.recognizers,function(Bp){var Up=this.add(new Bp[0](Bp[1]));Bp[2]&&Up.recognizeWith(Bp[2]),Bp[3]&&Up.requireFailure(Bp[3])},this)}function Am(ap,vp){var bp,Bp=ap.element;Bp.style&&(Nu(ap.options.cssProps,function(Up,om){bp=Ju(Bp.style,om),vp?(ap.oldCssProps[bp]=Bp.style[bp],Bp.style[bp]=Up):Bp.style[bp]=ap.oldCssProps[bp]||""}),vp||(ap.oldCssProps={}))}return fm.prototype={set:function(ap){return Bu(this.options,ap),ap.touchAction&&this.touchAction.update(),ap.inputTarget&&(this.input.destroy(),this.input.target=ap.inputTarget,this.input.init()),this},stop:function(ap){this.session.stopped=ap?2:1},recognize:function(ap){var vp=this.session;if(!vp.stopped){var bp;this.touchAction.preventDefaults(ap);var Bp=this.recognizers,Up=vp.curRecognizer;(!Up||Up&&8&Up.state)&&(Up=vp.curRecognizer=null);for(var om=0;om<Bp.length;)bp=Bp[om],vp.stopped===2||Up&&bp!=Up&&!bp.canRecognizeWith(Up)?bp.reset():bp.recognize(ap),!Up&&14&bp.state&&(Up=vp.curRecognizer=bp),om++}},get:function(ap){if(ap instanceof Mm)return ap;for(var vp=this.recognizers,bp=0;bp<vp.length;bp++)if(vp[bp].options.event==ap)return vp[bp];return null},add:function(ap){if(Fu(ap,"add",this))return this;var vp=this.get(ap.options.event);return vp&&this.remove(vp),this.recognizers.push(ap),ap.manager=this,this.touchAction.update(),ap},remove:function(ap){if(Fu(ap,"remove",this))return this;if(ap=this.get(ap)){var vp=this.recognizers,bp=_d(vp,ap);bp!==-1&&(vp.splice(bp,1),this.touchAction.update())}return this},on:function(ap,vp){if(ap!==Pu&&vp!==Pu){var bp=this.handlers;return Nu(_h(ap),function(Bp){bp[Bp]=bp[Bp]||[],bp[Bp].push(vp)}),this}},off:function(ap,vp){if(ap!==Pu){var bp=this.handlers;return Nu(_h(ap),function(Bp){vp?bp[Bp]&&bp[Bp].splice(_d(bp[Bp],vp),1):delete bp[Bp]}),this}},emit:function(ap,vp){this.options.domEvents&&function(Up,om){var sm=Tu.createEvent("Event");sm.initEvent(Up,!0,!0),sm.gesture=om,om.target.dispatchEvent(sm)}(ap,vp);var bp=this.handlers[ap]&&this.handlers[ap].slice();if(bp&&bp.length){vp.type=ap,vp.preventDefault=function(){vp.srcEvent.preventDefault()};for(var Bp=0;Bp<bp.length;)bp[Bp](vp),Bp++}},destroy:function(){this.element&&Am(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Bu(am,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:gm,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:cp,DIRECTION_ALL:30,Manager:fm,Input:Rp,TouchAction:xm,TouchInput:Hp,MouseInput:Mp,PointerEventInput:Ip,TouchMouseInput:jp,SingleTouchInput:Gp,Recognizer:Mm,AttrRecognizer:kp,Tap:im,Pan:Lp,Swipe:um,Pinch:Np,Rotate:cm,Press:Xp,on:Qu,off:qu,each:Nu,merge:Hu,extend:Gu,assign:Bu,inherit:ju,bindFn:Uu,prefixed:Ju}),am}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function oa(_u,Tu,Cu){var Pu=Tu.offsetWidth,Bu=Tu.offsetHeight,Ru=Tu.getBoundingClientRect(),Lu=Ru.top,Ou=Ru.left;return Cu&&(Ou+=Pu*Cu.left,Lu+=Bu*(1-Cu.bottom-Cu.height),Pu*=Cu.width,Bu*=Cu.height),new r$3.Vector2((_u.x-Ou)/Pu*2-1,-(_u.y-Lu)/Bu*2+1)}var sa=new r$3.OrthographicCamera(-1,1,1,-1,0,1),aa$1=new r$3.BufferGeometry;aa$1.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),aa$1.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var la=new r$3.Mesh(aa$1),ua=new r$3.Scene;ua.add(la);var ha$1=function(){function _u(Tu,Cu){var Pu;this.renderer=Tu,this.material=new r$3.ShaderMaterial({vertexShader:(Pu=Cu.vertex)!==null&&Pu!==void 0?Pu:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:Cu.fragment,uniforms:Object.assign({inputBuffer:new r$3.Uniform(null)},Cu.uniforms),defines:Object.assign({},Cu.defines),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function(Tu,Cu){var Pu=this.renderer.getRenderTarget(),Bu=la.material;this.material.uniforms.inputBuffer.value=Tu.texture,la.material=this.material,this.renderer.setRenderTarget(Cu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Pu),la.material=Bu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),ca$1=function(){function _u(Tu){this.renderer=Tu,this.material=new r$3.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$3.Uniform(new r$3.Vector3)}),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function(Tu,Cu){var Pu=this.renderer.getRenderTarget(),Bu=la.material;this.material.uniforms.inputValue.value.copy(Tu),la.material=this.material,this.renderer.setRenderTarget(Cu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Pu),la.material=Bu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),da$1=function(_u){function Tu(Cu){return _u.call(this,Cu,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$3.__extends(Tu,_u),Tu}(ha$1),pa=function(){function _u(Tu){this.enable=!0,this.renderer=Tu,this.copyPass=new da$1(this.renderer)}return _u.prototype.render=function(Tu,Cu){this.copyPass.render(Tu,Cu)},_u.prototype.dispose=function(){this.copyPass.dispose()},_u}(),fa$1=function(_u){function Tu(Cu){var Pu,Bu=this;Bu=_u.call(this)||this;var Ru=Tu.parseArgs(Cu);return Bu.pending=!0,Bu.userAction=Ru.initial[3],Bu.destroyed=!1,Bu.ident=Ru.ident,Bu.scene=Ru.scene,Bu.helper=Ru.helper,Bu.camera=Ru.camera,Bu.renderer=Ru.renderer,Bu.scissor=Ru.scissor,Bu.element=Ru.element,Bu.model=Ru.model,Bu.enableIOSEDR=(Pu=Ru.enableIOSEDR)!==null&&Pu!==void 0&&Pu,Bu.work=Ru.work,Bu.imageOptions=Ru.imageOptions,Bu.videoTexture=Ru.videoTexture,Bu.networkSubscribe=Ru.networkSubscribe,Bu.requestProxy=Ru.requestProxy,Bu.needsRender=!0,Bu.maxFov=120,Bu.minFov=40,Bu.maxLatitude=+Math.PI/2,Bu.minLatitude=-Math.PI/2,Bu.cameraMotion=new Ro({longitude:{value:Bu.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Bu.camera.pose.latitude,fov:Bu.camera.pose.fov}),Bu.eventUnbinds=[Ru.element].concat(Ru.extraElements||[]).map(function(Lu){return Bu.bindEvents(Lu)}),at.shared.add(function(){return Bu.initAnimation.apply(Bu,Ru.initial)},!0),Bu}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){return t$3.__assign({},Cu)},Tu.initAnimationEndState=function(Cu){var Pu=this.parseArgs(Cu);return{longitude:Pu.camera.pose.longitude,latitude:Pu.camera.pose.latitude,fov:Pu.camera.pose.fov,offset:Pu.camera.pose.offset.clone(),distance:Pu.camera.pose.distance}},Tu.prototype.destroy=function(){var Cu;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Pu=0,Bu=this.eventUnbinds;Pu<Bu.length;Pu++)(0,Bu[Pu])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(Cu=this.pressState)===null||Cu===void 0||Cu.stop(),delete this.pressState},Tu.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},Tu.prototype.bindExtraElement=function(Cu){for(var Pu=0,Bu=this.eventUnbinds;Pu<Bu.length;Pu++)if(Bu[Pu].element===Cu)return;this.eventUnbinds.push(this.bindEvents(Cu))},Tu.prototype.unbindExtraElement=function(Cu){for(var Pu=[],Bu=0,Ru=this.eventUnbinds;Bu<Ru.length;Bu++){var Lu=Ru[Bu];Lu.element===Cu?Lu():Pu.push(Lu)}this.eventUnbinds=Pu},Tu.prototype.updateRenderSize=function(){this.needsRender=!0},Tu.prototype.updateModel=function(Cu){this.model=Cu,this.needsRender=!0},Tu.prototype.updateWork=function(Cu,Pu,Bu,Ru,Lu){return this.work=Cu,this.userAction=Lu,!1},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu=[],Ru=2;Ru<arguments.length;Ru++)Bu[Ru-2]=arguments[Ru];if(!this.destroyed){var Lu={};this.cameraMotion.ended&&(this.cameraMotion.update(Cu),Lu.longitude=this.cameraMotion.value.longitude,Lu.latitude=this.cameraMotion.value.latitude,Lu.fov=this.cameraMotion.value.fov),ia$1(Lu)&&this.setCamera(Lu)}},Tu.prototype.render=function(){this.renderer.render(this.scene,this.camera)},Tu.prototype.postProcessing=function(Cu,Pu){this.destroyed||(this.effect||(this.effect=new pa(this.renderer)),this.effect.render(Cu,Pu))},Tu.prototype.updateCamera=function(Cu,Pu,Bu){return this.userAction=Bu,this.cameraMotion.set(Cu,Pu)},Tu.prototype.getTargetPose=function(){var Cu=this.cameraMotion.getKeyFrameSegment(_e())[1];return{longitude:Cu.value.longitude,latitude:Cu.value.latitude,fov:Cu.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}},Tu.prototype.moveToPano=function(Cu,Pu,Bu){Pu===void 0&&(Pu={}),this.userAction=Bu;var Ru={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};Pu.moveStartCallback&&Pu.moveStartCallback(Cu,Ru),this.emit("moveToPano",Cu,this.userAction),this.emit("panoWillArrive",Cu,Ru,this.userAction),this.emit("panoArrived",Cu,Ru,this.userAction),Pu.moveEndCallback&&Pu.moveEndCallback(Cu,Ru)},Tu.prototype.initAnimation=function(Cu,Pu,Bu,Ru){this.pending=!1,this.userAction=Ru},Tu.prototype.setCamera=function(Cu){var Pu,Bu,Ru,Lu,Ou;Cu===void 0&&(Cu={});var Du=(Pu=Cu.longitude)!==null&&Pu!==void 0?Pu:this.camera.pose.longitude,$u=(Bu=Cu.latitude)!==null&&Bu!==void 0?Bu:this.camera.pose.latitude,ku=(Ru=Cu.fov)!==null&&Ru!==void 0?Ru:this.camera.pose.fov,Fu=(Lu=Cu.distance)!==null&&Lu!==void 0?Lu:this.camera.pose.distance,Nu=(Ou=Cu.offset)!==null&&Ou!==void 0?Ou:this.camera.pose.offset,Vu=this.camera.position.clone(),Gu=Vs(Du,this.camera.pose.longitude,2*Math.PI)||Vs($u,this.camera.pose.latitude),Hu=Vs(ku,this.camera.pose.fov),ju=Vs(Fu,this.camera.pose.distance),Uu=Hs(Nu,this.camera.pose.offset);this.camera.setFromPose({longitude:Du,latitude:$u,fov:ku,distance:Fu,offset:Nu});var zu=Hs(Vu,this.camera.position);Hu&&this.emit("cameraFovUpdate",ku,this.userAction),Gu&&this.emit("cameraDirectionUpdate",{longitude:Du,latitude:$u},this.userAction),zu&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(Hu||Gu||Uu||ju)&&this.emit("cameraUpdate",{longitude:Du,latitude:$u,fov:ku,offset:Nu,distance:Fu},this.userAction),this.needsRender=!0},Tu.prototype.onPanGesture=function(Cu){var Pu=this.panState,Bu=Cu.pointers.length;if(Cu.isFinal?delete this.panState:this.panState={pointerLength:Bu,x:Cu.center.x,y:Cu.center.y},Pu!==void 0&&Pu.pointerLength===Bu){var Ru=Cu.pointers.map(function(Lu){return ii(Lu,["x","y"])});this.emit("wantsGesture","pan",Ru,Cu.isFinal)||this.emit("gesture","pan",Ru,Cu.isFinal)}},Tu.prototype.onTapGesture=function(Cu){var Pu=Cu.pointers.map(function(Bu){return ii(Bu,["x","y"])});this.emit("wantsGesture","tap",Pu,!0)||this.emit("gesture","tap",Pu,!0)},Tu.prototype.onPressGesture=function(Cu,Pu){var Bu,Ru=[Cu];if(this.emit("wantsGesture","press",Ru,Pu))return(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),void delete this.pressState;this.emit("gesture","press",Ru,Pu)},Tu.prototype.onPinchGesture=function(Cu){var Pu=Cu.pointers.map(function(Bu){return ii(Bu,["x","y"])});this.emit("wantsGesture","pinch",Pu,Cu.isFinal)||this.emit("gesture","pinch",Pu,Cu.isFinal)},Tu.prototype.onMouseWheel=function(Cu){var Pu=(Math.abs(Cu.deltaY)>Math.abs(Cu.deltaX)?Cu.deltaY:Cu.deltaX)/-60,Bu=[{x:Cu.clientX,y:Cu.clientY,delta:Pu}];this.emit("wantsGesture","mouseWheel",Bu,!1)||this.emit("gesture","mouseWheel",Bu,!1)},Tu.prototype.onMouseMove=function(Cu){},Tu.prototype.onMouseOut=function(){},Tu.prototype.relativeClientPosition=function(Cu){return oa(Cu,this.element,this.scissor)},Tu.prototype.bindEvents=function(Cu){var Pu=this,Bu=function(Xc){var _h=oa(Xc,Pu.element,Pu.scissor);return!(Math.abs(_h.x)>1||Math.abs(_h.y)>1)},Ru=new ra.Manager(Cu),Lu=function(Xc){return Xc.session.firstInput||null};Ru.add(new ra.Pan({threshold:10,pointers:0})),Ru.add(new ra.Tap({interval:410})),Ru.add(new ra.Pinch({threshold:0,pointers:2})),Ru.on("panstart pan",function(Xc){var _h=Lu(Ru);_h&&!Bu(_h.center)||(Pu.onPanGesture(Xc),ju())}),Ru.on("tap",function(Xc){if(Xc.pointerType!=="mouse"||Xc.srcEvent.button===0){var _h=Lu(Ru);_h&&!Bu(_h.center)||(Pu.onTapGesture(Xc),ju())}}),Ru.on("pinchstart pinch pinchend",function(Xc){var _h=Lu(Ru);_h&&!Bu(_h.center)||(Pu.onPinchGesture(Xc),ju())});var Ou=null,Du=null,$u=function(Xc,_h,_d){var Ku=Xc==="pinchend"?_h:_h-_d.deltaY/280;return{type:Xc,target:_d.target,pointerType:"mouse",srcEvent:_d,pointers:[{x:_d.clientX,y:_d.clientY}],isFirst:Xc==="pinchstart",isFinal:Xc==="pinchend",scale:ho(Ku,.1,10),center:{x:_d.clientX,y:_d.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},ku=function(Xc){var _h,_d={x:Xc.clientX,y:Xc.clientY};if(Bu(_d)){if(Xc.preventDefault(),Xc.ctrlKey){var Ku=(_h=Ou==null?void 0:Ou.prevInput.scale)!==null&&_h!==void 0?_h:1,Xu=$u(Ou?"pinch":"pinchstart",Ku,Xc);Ou===null?Ou={firstInput:Xu,prevInput:Xu}:Ou.prevInput=Xu,Pu.onPinchGesture(Xu),Du!==null&&window.clearTimeout(Du),Du=window.setTimeout(function(){var Ju;Du=null;var Zu=(Ju=Ou==null?void 0:Ou.prevInput.scale)!==null&&Ju!==void 0?Ju:1,_c=$u("pinchend",Zu,Xc);Ou=null,Pu.onPinchGesture(_c)},200)}else Pu.onMouseWheel(Xc);ju()}},Fu=function(Xc){if(!Zs()){var _h={x:Xc.clientX,y:Xc.clientY};Bu(_h)?(Pu.onMouseMove(Xc),Pu.pressState&&Math.abs(Xc.clientX-Pu.pressState.x)>10&&Math.abs(Xc.clientY-Pu.pressState.y)>10&&ju()):Pu.onMouseOut()}},Nu=function(){Pu.onMouseOut(),ju()},Vu=function(Xc,_h){if(Bu(Xc)){Pu.pressState={x:Xc.x,y:Xc.y,time:Pu.pressState?Pu.pressState.time:_h,stop:Qe};var _d=_h-Pu.pressState.time;Pu.onPressGesture({x:Xc.x,y:Xc.y,delta:_d},!1),Pu.pressState&&(Pu.pressState.stop=at.shared.add(function(Ku){return Vu({x:Xc.x,y:Xc.y},Ku)},!0,1))}else ju()},Gu=function(Xc){ju(),Xc.touches.length>1||Xc.changedTouches.length<=0||Vu({x:Xc.changedTouches[0].clientX,y:Xc.changedTouches[0].clientY},_e())},Hu=function(Xc){ju(),Vu({x:Xc.clientX,y:Xc.clientY},_e())},ju=function(){var Xc;if(Pu.pressState){var _h=_e()-Pu.pressState.time;Pu.onPressGesture({x:Pu.pressState.x,y:Pu.pressState.y,delta:_h},!0),(Xc=Pu.pressState)===null||Xc===void 0||Xc.stop(),delete Pu.pressState}},Uu=null,zu=function(Xc){var _h,_d="pinch",Ku=!1,Xu=!1;switch(Xc.type){case"gesturestart":_d="pinchstart",Ku=!0;break;case"gestureend":_d="pinchend",Xu=!0}return{type:_d,target:Xc.target,pointerType:"mouse",srcEvent:Xc,pointers:[{x:Xc.clientX,y:Xc.clientY}],isFirst:Ku,isFinal:Xu,scale:(_h=Xc.scale)!==null&&_h!==void 0?_h:1,center:{x:Xc.clientX,y:Xc.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Wu=function(Xc){if(Xc.preventDefault(),!Zs()){var _h=zu(Xc),_d=(Uu={firstInput:_h}).firstInput;_d&&!Bu(_d.center)||Pu.onPinchGesture(_h)}},Qu=function(Xc){if(Xc.preventDefault(),!Zs()&&Uu){var _h=zu(Xc),_d=Uu.firstInput;_d&&!Bu(_d.center)||Pu.onPinchGesture(_h)}},qu=function(Xc){if(Xc.preventDefault(),!Zs()&&Uu){var _h=zu(Xc),_d=Uu.firstInput;Uu=null,_d&&!Bu(_d.center)||Pu.onPinchGesture(_h)}},Yu=function(Xc){if(Xc&&typeof Xc.preventDefault=="function"&&Xc.currentTarget===Cu&&Xc.preventDefault(),typeof getSelection=="function"){var _h=getSelection();_h&&_h.focusNode&&(_h.removeAllRanges&&_h.removeAllRanges(),_h.empty&&_h.empty())}};return Cu.addEventListener("wheel",ku,{passive:!1}),Cu.addEventListener("mousemove",Fu,!1),Cu.addEventListener("mouseout",Nu,!1),Cu.addEventListener("touchstart",Gu,!1),Cu.addEventListener("touchend",ju,!1),Cu.addEventListener("touchcancel",ju,!1),Cu.addEventListener("mousedown",Hu,!1),Cu.addEventListener("mouseup",ju,!1),Cu.addEventListener("gesturestart",Wu,{passive:!1}),Cu.addEventListener("gesturechange",Qu,{passive:!1}),Cu.addEventListener("gestureend",qu,{passive:!1}),Cu.addEventListener("touchstart",Yu,!1),Cu.addEventListener("contextmenu",Yu,!1),Object.assign(function(){Ru.destroy(),Cu.removeEventListener("wheel",ku,!1),Cu.removeEventListener("mousemove",Fu,!1),Cu.removeEventListener("mouseout",Nu,!1),Cu.removeEventListener("touchstart",Gu,!1),Cu.removeEventListener("touchend",ju,!1),Cu.removeEventListener("touchcancel",ju,!1),Cu.removeEventListener("mousedown",Hu,!1),Cu.removeEventListener("mouseup",ju,!1),Cu.removeEventListener("gesturestart",Wu,!1),Cu.removeEventListener("gesturechange",Qu,!1),Cu.removeEventListener("gestureend",qu,!1),Cu.removeEventListener("touchstart",Yu,!1),Cu.removeEventListener("contextmenu",Yu,!1)},{element:Cu})},Tu}(Fe),Aa=function(_u){function Tu(Cu){var Pu,Bu,Ru,Lu,Ou=this,Du=Tu.parseArgs(Cu);return(Ou=_u.call(this,Du)||this).defaultLongitude=Du.defaultLongitude,Ou.defaultLatitude=Du.defaultLatitude,Ou.defaultFov=Du.defaultFov,Ou.maxFov=Du.maxFov,Ou.minFov=Du.minFov,Ou.maxLatitude=Du.maxLatitude,Ou.minLatitude=Du.minLatitude,Ou.locationMotion=new Ro({x:Ou.camera.pose.offset.x,y:Ou.camera.pose.offset.y,z:Ou.camera.pose.offset.z,distance:Ou.camera.pose.distance,modelAlpha:(Bu=(Pu=Ou.model.getMaterial())===null||Pu===void 0?void 0:Pu.modelAlpha)!==null&&Bu!==void 0?Bu:0,perspToOrtho:(Lu=(Ru=Ou.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Ou}return t$3.__extends(Tu,_u),Tu.distanceFromModel=function(Cu,Pu,Bu){var Ru=Cu.bounding,Lu=Math.pow(Math.pow(Ru.max.x-Ru.min.x+1,2)+Math.pow(Ru.max.y-Ru.min.y+1,2)+Math.pow(Ru.max.z-Ru.min.z+1,2),.5),Ou=Lu/2/Math.tan(Math.PI*Pu/360);return Bu<1&&(Ou/=Bu),isNaN(Ou)?Lu:Ou},Tu.parseArgs=function(Cu){var Pu,Bu,Ru,Lu,Ou,Du,$u,ku=_u.parseArgs.call(this,Cu);return t$3.__assign(t$3.__assign({},ku),{defaultLongitude:(Pu=Cu.defaultLongitude)!==null&&Pu!==void 0?Pu:Math.PI/4,defaultLatitude:(Bu=Cu.defaultLatitude)!==null&&Bu!==void 0?Bu:Math.PI/4,defaultFov:(Ru=Cu.defaultFov)!==null&&Ru!==void 0?Ru:80,maxFov:(Lu=Cu.maxFov)!==null&&Lu!==void 0?Lu:120,minFov:(Ou=Cu.minFov)!==null&&Ou!==void 0?Ou:40,maxLatitude:(Du=Cu.maxLatitude)!==null&&Du!==void 0?Du:+Math.PI/2,minLatitude:($u=Cu.minLatitude)!==null&&$u!==void 0?$u:-Math.PI/2})},Tu.initAnimationEndPose=function(Cu){var Pu,Bu,Ru,Lu=this.parseArgs(Cu),Ou=Cu.initial[1];return{longitude:(Pu=Ou.longitude)!==null&&Pu!==void 0?Pu:Lu.defaultLongitude,latitude:ho((Bu=Ou.latitude)!==null&&Bu!==void 0?Bu:Lu.defaultLatitude,Lu.minLatitude,Lu.maxLatitude),fov:(Ru=Ou.fov)!==null&&Ru!==void 0?Ru:Lu.defaultFov,offset:Cu.model.bounding.getCenter(new r$3.Vector3),distance:Tu.distanceFromModel(Lu.model,Lu.defaultFov,Lu.camera.aspect)}},Tu.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},Tu.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Cu,Pu,Bu,Ru,Lu){return this.work=Cu,this.updateCamera(Bu,Ru!=null?Ru:0,Lu),!0},Tu.prototype.updateModel=function(Cu){_u.prototype.updateModel.call(this,Cu);var Pu=Cu.bounding.getCenter(new r$3.Vector3),Bu=Tu.distanceFromModel(Cu,this.defaultFov,this.camera.aspect);this.locationMotion.set({x:Pu.x,y:Pu.y,z:Pu.z,distance:Bu},0).catch(Qe)},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu=[],Ru=2;Ru<arguments.length;Ru++)Bu[Ru-2]=arguments[Ru];if(!this.destroyed){var Lu={},Ou={};this.locationMotion.ended||(this.locationMotion.update(Cu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ou.distance=this.locationMotion.value.distance,Ou.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Cu),Ou.longitude=this.cameraMotion.value.longitude,Ou.latitude=this.cameraMotion.value.latitude,Ou.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Ou)||this.setCamera(Ou)}},Tu.prototype.getTargetPose=function(){var Cu=this.cameraMotion.getKeyFrameSegment(_e())[1],Pu=this.locationMotion.getKeyFrameSegment(_e())[1];return{longitude:Cu.value.longitude,latitude:Cu.value.latitude,fov:Cu.value.fov,offset:new r$3.Vector3(Pu.value.x,Pu.value.y,Pu.value.z),distance:Pu.value.distance}},Tu.prototype.initAnimation=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var ku={longitude:(Lu=Pu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ou=Pu.latitude)!==null&&Ou!==void 0?Ou:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Du=Pu.fov)!==null&&Du!==void 0?Du:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Tu.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Fu=ii(ku,["longitude","latitude","fov"]),Nu={x:ku.offset.x,y:ku.offset.y,z:ku.offset.z,distance:ku.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Cu,ku,this.userAction),this.cameraMotion.set(Fu,Bu).catch(Qe),this.locationMotion.set(Nu,Bu).then(function(){$u.emit("initAnimationEnded",Cu,ku,$u.userAction)},function(Vu){var Gu=na($u.camera.pose);$u.emit("initAnimationEnded",Cu,Gu,$u.userAction)}).catch(Qe)}},Tu.prototype.updateRenderSize=function(){this.locationMotion.set({distance:Tu.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe)},Tu.prototype.getForwardPanoIndexOrNot=function(Cu){var Pu=this.work.observers.filter(function(Ou){return Ou.active}),Bu=this.model.intersectRaycaster(Cu)[0];if(!Bu)return null;var Ru=ta(Pu,function(Ou){return Ou.standingPosition.distanceTo(Bu.point)},!0),Lu=Ru[0];return Ru[1]<5?this.work.observers.indexOf(Lu):null},Tu.prototype.coordinatesForOffset=function(Cu){var Pu=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Cu.x/(Pu.x*this.scissor.width),latitude:2*Cu.y/(Pu.y*this.scissor.height)}},Tu.prototype.requestInteriaMovement=function(Cu,Pu){var Bu=this;if(this.interiaMovement!==!1){for(var Ru=t$3.__assign({},Cu),Lu={longitude:0,latitude:0},Ou=0;Ou<Pu;Ou++)Ru.longitude*=.996,Ru.latitude*=.994008,Lu.longitude+=Ru.longitude,Lu.latitude+=Ru.latitude;var Du=Gs(this.cameraMotion.value.longitude+Lu.longitude),$u=ho(this.cameraMotion.value.latitude+Lu.latitude,this.minLatitude,this.maxLatitude),ku={longitude:Du,latitude:$u,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Du,latitude:$u},0).catch(Qe);var Fu=Ru.longitude>1e-4||Ru.longitude<-1e-4||Ru.latitude>1e-4||Ru.latitude<-1e-4;this.emit("interiaPan",ku,!Fu),Fu?at.shared.add(function(Nu,Vu){Bu.requestInteriaMovement(Ru,0|Vu)},!0,1):this.interiaMovement=!1}},Tu.prototype.onPanGesture=function(Cu){var Pu=this.panState,Bu=Cu.pointers.length;if(Cu.isFinal?delete this.panState:this.panState={pointerLength:Bu,x:Cu.center.x,y:Cu.center.y},Pu!==void 0&&Pu.pointerLength===Bu){var Ru=Cu.pointers.map(function(Hu){return ii(Hu,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Cu.isFinal)){var Lu={x:Cu.center.x-Pu.x,y:Cu.center.y-Pu.y},Ou=this.relativeClientPosition(Cu.center),Du=this.camera.pose.latitude<Math.PI/6||Ou.y<0?-1:1;Lu.x*=Du;var $u=this.coordinatesForOffset(Lu),ku=Gs(this.cameraMotion.value.longitude+$u.longitude),Fu=ho(this.cameraMotion.value.latitude+$u.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Cu.overallVelocityX)>.2&&Math.atan2(Math.abs(Cu.overallVelocityY),Math.abs(Cu.overallVelocityX))<Math.PI/6.923&&(Fu=this.cameraMotion.value.latitude);var Nu={longitude:ku,latitude:Fu,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Nu,Cu.isFinal)&&(this.emit("gesture","pan",Ru,Cu.isFinal),this.emit("panGesture",Nu,Cu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:Nu.longitude,latitude:Nu.latitude},0).catch(Qe),Cu.isFinal&&!this.emit("wantsInteriaPan",Nu))){this.interiaMovement=!0;var Vu=Cu.velocityX*Du,Gu=Cu.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Vu,y:Gu}),0)}}}},Tu.prototype.onPinchGesture=function(Cu){var Pu,Bu=(Pu=this.pinchState)===null||Pu===void 0?void 0:Pu.fov,Ru=!1;if(Cu.type!=="pinchstart"){if(Cu.type==="pinchend"&&(Ru=!0,delete this.panState,delete this.pinchState),Bu!==void 0){var Lu=Cu.pointers.map(function(Du){return ii(Du,["x","y"])});if(!this.emit("wantsGesture","pinch",Lu,Ru)){var Ou=ho(Bu/Cu.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Cu.scale,Ou,Ru)||this.emit("wantsChangeCameraFov",Ou)||(this.emit("gesture","pinch",Lu,Ru),this.emit("pinchGesture",Cu.scale,Ou,Ru),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ou},0).catch(Qe),this.onPanGesture(Cu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},Tu.prototype.onMouseWheel=function(Cu){var Pu=this,Bu=(Math.abs(Cu.deltaY)>Math.abs(Cu.deltaX)?Cu.deltaY:Cu.deltaX)/-60,Ru=[{x:Cu.clientX,y:Cu.clientY,delta:Bu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=this.minFov,Ou=this.maxFov,Du=ho(this.camera.fov-Bu,Lu,Ou);this.emit("wantsMouseWheel",Bu,Du,!1)||this.emit("wantsChangeCameraFov",Du)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Bu,Du,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Du},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Pu.mouseWheelState,Pu.emit("wantsGesture","mouseWheel",Ru,!0)||Pu.emit("wantsMouseWheel",Bu,Du,!0)||(Pu.emit("gesture","mouseWheel",Ru,!0),Pu.emit("mouseWheel",0,Du,!0))},200)})}},Tu.prototype.onTapGesture=function(Cu){var Pu=Cu.pointers.map(function(Du){return ii(Du,["x","y"])});if(!this.emit("wantsGesture","tap",Pu,!0)){var Bu=this.relativeClientPosition(Cu.center),Ru=new r$3.Raycaster;if(Ru.setFromCamera(Bu,this.camera),!this.emit("wantsTapGesture",Ru,Bu,!0)){this.emit("gesture","tap",Pu,!0),this.emit("tapGesture",Ru,Bu,!0),this.interiaMovement=!1;var Lu=this.getForwardPanoIndexOrNot(Ru);if(!oo(Lu)){this.emit("panoSelected",Lu);var Ou={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Lu,Ou,!0)}}}},Tu.prototype.onPressGesture=function(Cu,Pu){var Bu,Ru,Lu=[Cu];if(this.emit("wantsGesture","press",Lu,Pu))return(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),void delete this.pressState;var Ou=this.relativeClientPosition(Cu),Du=new r$3.Raycaster;if(Du.setFromCamera(Ou,this.camera),this.emit("wantsPressGesture",Du,Ou,Cu.delta,Pu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Pu),this.emit("pressGesture",Du,Ou,Cu.delta,Pu)},Tu}(fa$1),ga$1=function(_u){function Tu(Cu){var Pu=Tu.parseArgs(Cu);return _u.call(this,Pu)||this}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){var Pu=[Cu.initial[0],t$3.__assign(t$3.__assign({},Cu.initial[1]),{longitude:0,latitude:Math.PI/2}),Cu.initial[2],Cu.initial[3]],Bu=t$3.__assign(t$3.__assign({},Cu),{initial:Pu,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return _u.parseArgs.call(this,Bu)},Tu.initAnimationEndPose=function(Cu){var Pu=this.parseArgs(Cu);return _u.initAnimationEndPose.call(this,Pu)},Tu.prototype.updateModel=function(Cu){this.model=Cu,this.needsRender=!0;var Pu=Cu.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Pu.x,y:Pu.y,z:Pu.z,distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe)},Tu.prototype.initAnimation=function(Cu,Pu,Bu,Ru){var Lu,Ou=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var Du={longitude:0,latitude:Math.PI/2,fov:ho((Lu=Pu.fov)!==null&&Lu!==void 0?Lu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},$u=ii(Du,["longitude","latitude","fov"]),ku={x:Du.offset.x,y:Du.offset.y,z:Du.offset.z,distance:Du.distance,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set($u,Bu).catch(Qe),this.locationMotion.set(ku,Bu).then(function(){Ou.emit("initAnimationEnded",Cu,Du,Ou.userAction)},function(Fu){var Nu=na(Ou.camera.pose);Ou.emit("initAnimationEnded",Cu,Nu,Ou.userAction)})}},Tu.prototype.getZoomOffsetFromFov=function(Cu,Pu,Bu){var Ru=new r$3.Vector3(0,-1,0),Lu=Math.tan(Bu/2*Math.PI/180),Ou=Math.tan(Pu.fov/2*Math.PI/180),Du=(Ou-Lu)/Ou,$u=new r$3.Raycaster;$u.setFromCamera(Cu,Pu);var ku=$u.ray.direction,Fu=ku.angleTo(Ru),Nu=Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect),Vu=Nu*Math.tan(Fu),Gu=ku.clone().setLength(Nu*Math.cos(Fu)).projectOnPlane(Ru),Hu=Gu.length(),ju=Du/Hu*Gu.x*Vu,Uu=Du/Hu*Gu.z*Vu;return new r$3.Vector3(ju,0,Uu)},Tu.prototype.requestInteriaMovement=function(Cu,Pu){},Tu.prototype.onPanGesture=function(Cu){var Pu=this.panState,Bu=Cu.pointers.length;if(Cu.isFinal?delete this.panState:this.panState={pointerLength:Bu,x:Cu.center.x,y:Cu.center.y},Pu!==void 0&&Pu.pointerLength===Bu){var Ru=Cu.pointers.map(function(ju){return ii(ju,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Cu.isFinal)){var Lu=Cu.center.x-Pu.x,Ou=Cu.center.y-Pu.y,Du=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),$u=this.model.bounding,ku=$u.getCenter(new r$3.Vector3),Fu=($u.max.x-$u.min.x)/this.defaultFov*this.cameraMotion.value.fov,Nu=($u.max.y,$u.min.y,this.defaultFov,this.cameraMotion.value.fov,($u.max.z-$u.min.z)/this.defaultFov*this.cameraMotion.value.fov),Vu=(this.camera.position.y-$u.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Gu=this.renderer.getSize(new r$3.Vector2);Du.add(function(ju,Uu){var zu=new r$3.Vector3;return zu.setFromMatrixColumn(Uu,0),zu.multiplyScalar(-ju),zu}(2*Lu*Vu/Gu.y,this.camera.matrix)),Du.add(function(ju,Uu,zu){var Wu=new r$3.Vector3;return Wu.setFromMatrixColumn(zu,0),Wu.crossVectors(Uu,Wu),Wu.multiplyScalar(ju),Wu}(2*Ou*Vu/Gu.y,this.camera.up,this.camera.matrix)),Du.x=ho(Du.x,ku.x-Fu,ku.x+Fu),Du.z=ho(Du.z,ku.z-Nu,ku.z+Nu),Du.y=ku.y;var Hu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Du,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",Hu,Cu.isFinal)||(this.emit("gesture","pan",Ru,Cu.isFinal),this.emit("panGesture",Hu,Cu.isFinal),this.userAction=!0,this.locationMotion.set({x:Du.x,y:Du.y,z:Du.z},0).catch(Qe))}}},Tu.prototype.onPinchGesture=function(Cu){var Pu,Bu=(Pu=this.pinchState)===null||Pu===void 0?void 0:Pu.fov,Ru=!1;if(Cu.type!=="pinchstart"){if(Cu.type==="pinchend"&&(Ru=!0,delete this.pinchState),Bu!==void 0){var Lu=Cu.pointers.map(function(Fu){return ii(Fu,["x","y"])});if(!this.emit("wantsGesture","pinch",Lu,Ru)){var Ou=ho(Bu/Cu.scale,this.minFov,this.maxFov),Du=this.relativeClientPosition({x:Cu.center.x,y:Cu.center.y}),$u=this.getZoomOffsetFromFov(Du,this.camera,Ou),ku=this.camera.pose.offset.clone().add($u);this.emit("wantsPinchGesture",Cu.scale,Ou,Ru)||this.emit("wantsChangeCameraFov",Ou)||(this.emit("gesture","pinch",Lu,Ru),this.emit("pinchGesture",Cu.scale,Ou,Ru),this.userAction=!0,this.locationMotion.set({x:ku.x,y:ku.y,z:ku.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Ou},0).catch(Qe),this.onPanGesture(Cu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},Tu.prototype.onMouseWheel=function(Cu){var Pu=this,Bu=(Math.abs(Cu.deltaY)>Math.abs(Cu.deltaX)?Cu.deltaY:Cu.deltaX)/-60,Ru=[{x:Cu.clientX,y:Cu.clientY,delta:Bu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=ho(this.cameraMotion.value.fov-Bu,this.minFov,this.maxFov),Ou=this.relativeClientPosition({x:Cu.clientX,y:Cu.clientY}),Du=this.getZoomOffsetFromFov(Ou,this.camera,Lu),$u=this.camera.pose.offset.clone().add(Du);this.emit("wantsMouseWheel",Bu,Lu,!1)||this.emit("wantsChangeCameraFov",Lu)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Bu,Lu,!1),this.userAction=!0,this.locationMotion.set({x:$u.x,y:$u.y,z:$u.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Lu},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Pu.mouseWheelState,Pu.emit("wantsGesture","mouseWheel",Ru,!0)||Pu.emit("wantsMouseWheel",Bu,Lu,!0)||Pu.emit("wantsChangeCameraFov",Lu)||(Pu.emit("gesture","mouseWheel",Ru,!0),Pu.emit("mouseWheel",0,Lu,!0))},200)})}},Tu}(Aa);function ma(_u,Tu){Tu===void 0&&(Tu=!1);var Cu=typeof _u;if(Cu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Pu="[",Bu=_u.length-1,Ru=0;Ru<Bu;Ru++)Pu+=ma(_u[Ru],!1)+",";return Bu>-1&&(Pu+=ma(_u[Ru],!1)),Pu+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return ma(_u.toJSON(),Tu);var Lu=Object.keys(_u).sort(),Ou=Lu.length;for(Pu="",Ru=0;Ru<Ou;){var Du=Lu[Ru],$u=ma(_u[Du],!0);$u!==void 0&&(Ru&&Pu!==""&&(Pu+=","),Pu+=JSON.stringify(Du)+":"+$u),Ru++}return"{"+Pu+"}"}switch(Cu){case"function":case"undefined":return Tu?void 0:null;case"number":return _u;default:return isFinite(_u)?_u:null}}function va(_u){return Te(String(ma(_u,!1)))}var ya,ba$1=function(_u){function Tu(Cu){var Pu=this,Bu=Tu.parseArgs(Cu);return(Pu=_u.call(this,Bu)||this).defaultLongitude=Bu.defaultLongitude,Pu.defaultLatitude=Bu.defaultLongitude,Pu.defaultFov=Bu.defaultFov,Pu.maxFov=Bu.maxFov,Pu.minFov=Bu.minFov,Pu.maxLatitude=Bu.maxLatitude,Pu.minLatitude=Bu.minLatitude,Pu.moveSpeed=Bu.moveSpeed,Pu.intersectMeshCreator=Bu.intersectMeshCreator,Pu.interiaMovement=!1,Pu.intersectMesh=Pu.intersectMeshCreator(),Pu.intersectMesh.name="intersect",Pu.intersectMesh.visible=!1,Pu.helper.add(Pu.intersectMesh),Pu}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){var Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu=_u.parseArgs.call(this,Cu);return t$3.__assign(t$3.__assign({},Nu),{defaultLongitude:(Pu=Cu.defaultLongitude)!==null&&Pu!==void 0?Pu:0,defaultLatitude:(Bu=Cu.defaultLatitude)!==null&&Bu!==void 0?Bu:0,defaultFov:(Ru=Cu.defaultFov)!==null&&Ru!==void 0?Ru:90,maxFov:(Lu=Cu.maxFov)!==null&&Lu!==void 0?Lu:120,minFov:(Ou=Cu.minFov)!==null&&Ou!==void 0?Ou:40,maxLatitude:(Du=Cu.maxLatitude)!==null&&Du!==void 0?Du:+Math.PI/2,minLatitude:($u=Cu.minLatitude)!==null&&$u!==void 0?$u:-Math.PI/2,moveSpeed:(ku=Cu.moveSpeed)!==null&&ku!==void 0?ku:3.2,intersectMeshCreator:(Fu=Cu.intersectMeshCreator)!==null&&Fu!==void 0?Fu:function(){return new Fs}})},Tu.initAnimationEndPose=function(Cu){var Pu,Bu,Ru,Lu=this.parseArgs(Cu),Ou=Cu.initial,Du=Ou[0],$u=Ou[1];return{longitude:(Pu=$u.longitude)!==null&&Pu!==void 0?Pu:Lu.defaultLongitude,latitude:ho((Bu=$u.latitude)!==null&&Bu!==void 0?Bu:Lu.defaultLatitude,Lu.minLatitude,Lu.maxLatitude),fov:ho((Ru=$u.fov)!==null&&Ru!==void 0?Ru:Lu.defaultFov,Lu.minFov,Lu.maxFov),offset:Lu.work.observers[Du].position.clone(),distance:0}},Tu.prototype.destroy=function(){_u.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},Tu.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&_u.prototype.isReady.call(this)},Tu.prototype.calculateMovingDuration=function(Cu,Pu){switch(typeof Cu){case"function":return Cu(Pu,this.moveSpeed);case"number":return Cu;case"string":return Number(Cu);default:return ho(Pu,1,3)/this.moveSpeed*1e3}},Tu.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},Tu.prototype.coordinatesForOffset=function(Cu){var Pu=this.cameraMotion.value.fov,Bu=this.camera.aspect,Ru=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Cu.x/(Ru.x*this.scissor.width)*Pu/95*Bu,latitude:-2*Cu.y/(Ru.y*this.scissor.height)*Pu/95}},Tu.prototype.cameraBounce=function(){var Cu=this.cameraMotion.value,Pu=Cu.longitude,Bu=Cu.latitude,Ru=Cu.fov,Lu=[{progress:0,value:{longitude:Pu,latitude:Bu,fov:Ru}},{progress:.5,value:{longitude:Pu,latitude:Bu,fov:.98*Ru}},{progress:1,value:{longitude:Pu,latitude:Bu,fov:Ru}}];this.cameraMotion.setKeyframes(Lu,500).catch(Qe)},Tu.prototype.requestInteriaMovement=function(Cu,Pu){var Bu=this;if(this.interiaMovement!==!1){for(var Ru=t$3.__assign({},Cu),Lu={longitude:0,latitude:0},Ou=0;Ou<Pu;Ou++)Ru.longitude*=.996,Ru.latitude*=.98604,Lu.longitude+=Ru.longitude,Lu.latitude+=Ru.latitude;var Du=Gs(this.cameraMotion.value.longitude+Lu.longitude),$u=ho(this.cameraMotion.value.latitude+Lu.latitude,this.minLatitude,this.maxLatitude),ku={longitude:Du,latitude:$u,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Du,latitude:$u},0).catch(Qe);var Fu=Ru.longitude>1e-4||Ru.longitude<-1e-4||Ru.latitude>1e-4||Ru.latitude<-1e-4;this.emit("interiaPan",ku,!Fu),Fu?at.shared.add(function(Nu,Vu){Bu.requestInteriaMovement(Ru,0|Vu)},!0,1):this.interiaMovement=!1}},Tu.prototype.onPanGesture=function(Cu){var Pu=this.panState,Bu=Cu.pointers.length;if(Cu.isFinal?delete this.panState:this.panState={pointerLength:Bu,x:Cu.center.x,y:Cu.center.y},Pu!==void 0&&Pu.pointerLength===Bu){var Ru=Cu.pointers.map(function(Gu){return ii(Gu,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Cu.isFinal)){var Lu={x:Cu.center.x-Pu.x,y:Cu.center.y-Pu.y},Ou=this.coordinatesForOffset(Lu),Du=Gs(this.cameraMotion.value.longitude+Ou.longitude),$u=ho(this.cameraMotion.value.latitude+Ou.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Cu.overallVelocityX)>.2&&Math.atan2(Math.abs(Cu.overallVelocityY),Math.abs(Cu.overallVelocityX))<Math.PI/6.923&&($u=this.cameraMotion.value.latitude);var ku={longitude:Du,latitude:$u,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",ku,Cu.isFinal)){this.emit("gesture","pan",Ru,Cu.isFinal),this.emit("panGesture",ku,Cu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Fu={longitude:ku.longitude,latitude:ku.latitude,fov:ku.fov};if(this.cameraMotion.set(Fu,0).catch(Qe),Cu.isFinal&&!this.emit("wantsInteriaPan",ku)){this.interiaMovement=!0;var Nu=Cu.velocityX,Vu=.6*Cu.velocityY;Math.abs(Vu)>.5&&Math.abs(Nu)<.5&&(Nu=0),this.requestInteriaMovement(this.coordinatesForOffset({x:Nu,y:Vu}),0)}}}}},Tu.prototype.onPinchGesture=function(Cu){var Pu,Bu=(Pu=this.pinchState)===null||Pu===void 0?void 0:Pu.fov,Ru=Cu.scale,Lu=!1;if(Cu.type!=="pinchstart"){if(Cu.type==="pinchend"&&(Lu=!0,delete this.pinchState),Bu!==void 0){var Ou=Cu.pointers.map(function($u){return ii($u,["x","y"])});if(!this.emit("wantsGesture","pinch",Ou,Lu)){var Du=ho(Bu/Ru,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Ru,Du,Lu)||this.emit("wantsChangeCameraFov",Du)||(this.emit("gesture","pinch",Ou,Lu),this.emit("pinchGesture",Ru,Du,Lu),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Du},0).catch(Qe),this.onPanGesture(Cu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},Tu.prototype.onMouseWheel=function(Cu){var Pu=this,Bu=(Math.abs(Cu.deltaY)>Math.abs(Cu.deltaX)?Cu.deltaY:Cu.deltaX)/-60,Ru=[{x:Cu.clientX,y:Cu.clientY,delta:Bu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=ho(this.cameraMotion.value.fov-Bu,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Bu,Lu,!1)||this.emit("wantsChangeCameraFov",Lu)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Bu,Lu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Lu},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Pu.mouseWheelState,Pu.emit("wantsGesture","mouseWheel",Ru,!0)||Pu.emit("wantsMouseWheel",Bu,Lu,!0)||Pu.emit("wantsChangeCameraFov",Lu)||(Pu.emit("gesture","mouseWheel",Ru,!0),Pu.emit("mouseWheel",0,Lu,!0))},200)})}},Tu.prototype.onMouseMove=function(Cu){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Pu=this.relativeClientPosition({x:Cu.clientX,y:Cu.clientY}),Bu=new r$3.Raycaster;if(Bu.setFromCamera(Pu,this.camera),this.emit("wantsShowIntersectionOnModel",Bu))this.hideIntersectMesh();else{var Ru=this.model.intersectRaycaster(Bu)[0];if(Ru&&Ru.face){var Lu=Ru.face.normal,Ou=Lu.clone().multiplyScalar(.05),Du=Ru.point.clone().add(Ou);this.intersectMesh.position.copy(Du);var $u=Du.clone().add(Ou);if(this.intersectMesh.lookAt($u),Math.abs(Lu.y)>.99){var ku=this.camera.position.clone().sub(Du);this.intersectMesh.rotation.z=-Math.atan2(ku.z,ku.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Ru,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:Cu.clientX,clientY:Cu.clientY}}}},Tu.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},Tu.prototype.onPressGesture=function(Cu,Pu){var Bu,Ru,Lu=[Cu];if(this.emit("wantsGesture","press",Lu,Pu))return(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),void delete this.pressState;var Ou=this.relativeClientPosition(Cu),Du=new r$3.Raycaster;if(Du.setFromCamera(Ou,this.camera),this.emit("wantsPressGesture",Du,Ou,Cu.delta,Pu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Pu),this.emit("pressGesture",Du,Ou,Cu.delta,Pu)},Tu}(fa$1);function xa(){return ya||(ya=new Promise(function(_u){var Tu,Cu=document.createElement("video");Cu.muted=!0,Cu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Cu.addEventListener("timeupdate",function Pu(){Cu.removeEventListener("timeupdate",Pu,!1),clearTimeout(Tu);var Bu=document.createElement("canvas");Bu.width=Bu.height=1;var Ru=Bu.getContext("2d");Ru?(Ru.drawImage(Cu,0,0,1,1),Ru.getImageData(0,0,1,1).data[3]>10?_u(!0):_u(!1)):_u(!1)},!1),Cu.addEventListener("canplay",function Pu(){Cu.removeEventListener("canplay",Pu,!1),Cu.play()},!1),Tu=window.setTimeout(function(){return _u(!1)},1e3)}))}var wa,Ea=function(_u){function Tu(Cu,Pu){return Pu===void 0&&(Pu=.5),_u.call(this,Cu,{uniforms:{inputBuffer:new r$3.Uniform(null),scale:new r$3.Uniform(Pu)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$3.__extends(Tu,_u),Tu}(ha$1),Ma=function(_u){function Tu(Cu,Pu){Pu===void 0&&(Pu=.002);var Bu=_u.call(this,Cu,{uniforms:{targetBuffer:new r$3.Uniform(null),inputBuffer:new r$3.Uniform(null),step:new r$3.Uniform(Pu)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Bu.material.extensions.shaderTextureLOD=!0,Bu}return t$3.__extends(Tu,_u),Object.defineProperty(Tu.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(Cu){this.material.uniforms.targetBuffer.value=Cu},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(Cu){this.material.uniforms.step.value=Cu},enumerable:!1,configurable:!0}),Tu}(ha$1),Ia=function(_u){function Tu(Cu){var Pu=_u.call(this,Cu,{uniforms:{inputBuffer:new r$3.Uniform(null),luminanceAdaptiveBuffer:new r$3.Uniform(null),progress:new r$3.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Pu.material.transparent=!0,Pu}return t$3.__extends(Tu,_u),Object.defineProperty(Tu.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(Cu){this.material.uniforms.luminanceAdaptiveBuffer.value=Cu},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(Cu){this.material.uniforms.progress.value=Cu},enumerable:!1,configurable:!0}),Tu}(ha$1),Sa=function(_u){function Tu(Cu){var Pu=_u.call(this,Cu)||this;return Pu.enableTime=_e(),Pu.renderer=Cu,Pu.valuePass=new ca$1(Pu.renderer),Pu.luminancePass=new Ea(Pu.renderer,Math.sqrt(1/3)),Pu.nextStepPass=new Ma(Pu.renderer,.01),Pu.luminanceAdaptivePass=new Ia(Pu.renderer),Pu}return t$3.__extends(Tu,_u),Tu.prototype.render=function(Cu,Pu){if(!this.enable)return this.enableTime=null,void this.copyPass.render(Cu);this.enableTime===null&&(this.enableTime=_e()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$3.WebGLRenderTarget(128,128,{minFilter:r$3.LinearMipmapLinearFilter,magFilter:r$3.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$3.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(Cu,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((_e()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(Cu,Pu)},Tu.prototype.dispose=function(){var Cu,Pu,Bu;(Cu=this.luminanceTargetBuffer)===null||Cu===void 0||Cu.dispose(),(Pu=this.luminancePrevBuffer)===null||Pu===void 0||Pu.dispose(),(Bu=this.luminanceNextBuffer)===null||Bu===void 0||Bu.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},Tu}(pa),Ca=["up","down","left","right","front","back"],Ba=(wa=Math.SQRT1_2)!==null&&wa!==void 0?wa:Math.sqrt(2),Ta={up:new r$3.Quaternion(Ba,0,0,Ba),down:new r$3.Quaternion(-Ba,0,0,Ba),left:new r$3.Quaternion(0,Ba,0,Ba),right:new r$3.Quaternion(0,-Ba,0,Ba),front:new r$3.Quaternion(0,0,0,1),back:new r$3.Quaternion(0,1,0,0)},Pa=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI),Ra=new r$3.PerspectiveCamera,ka=new r$3.Frustum,Da=new r$3.Matrix4,La=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Oa=new Float32Array([0,0,1,0,0,1,1,1]),Na=new Uint8Array([0,1,2,1,3,2]),Fa=new r$3.BufferGeometry;Fa.setAttribute("position",new r$3.BufferAttribute(La,3)),Fa.setAttribute("uv",new r$3.BufferAttribute(Oa,2)),Fa.setIndex(new r$3.BufferAttribute(Na,1));var Qa=function(_u){function Tu(){var Cu=_u.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return Cu.depthTest=!1,Cu.depthWrite=!1,Cu.blending=r$3.NoBlending,Cu.map=Cu.uniforms.map.value,Cu.luminanceMap=Cu.uniforms.luminanceMap.value,Object.defineProperties(Cu,{map:{get:function(){return this.uniforms.map.value},set:function(Pu){this.uniforms.map.value=Pu}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Pu){this.uniforms.luminanceMap.value=Pu,this.defines.USE_LUMINANCE=Pu!==null,this.needsUpdate=!0}}}),Cu}return t$3.__extends(Tu,_u),Tu}(r$3.ShaderMaterial),Va=function(_u){function Tu(){var Cu=_u!==null&&_u.apply(this,arguments)||this;return Cu.level=0,Cu.sideCount=0,Cu.col=0,Cu.row=0,Cu.index=0,Cu.type="up",Cu}return t$3.__extends(Tu,_u),Tu}(r$3.Box3),_a$1=function(_u){function Tu(Cu,Pu){var Bu=this,Ru=new Qa;return Ru.visible=!1,(Bu=_u.call(this,Fa,Ru)||this).position.copy(Cu.getCenter(new r$3.Vector3)),Bu.quaternion.copy(Ta[Cu.type]),Bu.scale.setScalar(1/Math.pow(2,Cu.level)),Bu.name="tile-box",Bu.level=Cu.level,Bu.activeTime=-1,Bu.disposed=!1,Bu.needsRender=!1,Bu.frustumCulled=!1,Pu.then(function(Lu){var Ou=Lu[0],Du=Lu[1];Bu.disposed?(Ou.dispose(),Du==null||Du.dispose()):(Bu.material.map=Ou,Bu.material.luminanceMap=Du,Bu.material.needsUpdate=!0,Bu.material.visible=!0,Bu.needsRender=!0)}).catch(Qe),Bu}return t$3.__extends(Tu,_u),Tu.getBox=function(Cu,Pu,Bu){var Ru=new Va,Lu=Math.pow(2,Cu),Ou=1/Lu,Du=Bu%Lu,$u=Math.floor(Bu/Lu);switch(Ru.level=Cu,Ru.index=Bu,Ru.sideCount=Lu,Ru.row=$u,Ru.col=Du,Ru.type=Pu,Pu){case"up":Ru.min.y=.5,Ru.max.y=.5,Ru.min.x=+Du*Ou-.5,Ru.max.x=+Du*Ou-.5+Ou,Ru.min.z=-$u*Ou+.5-Ou,Ru.max.z=-$u*Ou+.5;break;case"down":Ru.min.y=-.5,Ru.max.y=-.5,Ru.min.x=+Du*Ou-.5,Ru.max.x=+Du*Ou-.5+Ou,Ru.min.z=+$u*Ou-.5,Ru.max.z=+$u*Ou-.5+Ou;break;case"left":Ru.min.x=-.5,Ru.max.x=-.5,Ru.min.z=-Du*Ou+.5-Ou,Ru.max.z=-Du*Ou+.5,Ru.min.y=-$u*Ou+.5-Ou,Ru.max.y=-$u*Ou+.5;break;case"right":Ru.min.x=.5,Ru.max.x=.5,Ru.min.z=+Du*Ou-.5,Ru.max.z=+Du*Ou-.5+Ou,Ru.min.y=-$u*Ou+.5-Ou,Ru.max.y=-$u*Ou+.5;break;case"front":Ru.min.z=-.5,Ru.max.z=-.5,Ru.min.x=+Du*Ou-.5,Ru.max.x=+Du*Ou-.5+Ou,Ru.min.y=-$u*Ou+.5-Ou,Ru.max.y=-$u*Ou+.5;break;case"back":Ru.min.z=.5,Ru.max.z=.5,Ru.min.x=-Du*Ou+.5-Ou,Ru.max.x=-Du*Ou+.5,Ru.min.y=-$u*Ou+.5-Ou,Ru.max.y=-$u*Ou+.5}return Ru},Tu.prototype.updateTime=function(Cu){},Tu.prototype.dispose=function(){var Cu;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(Cu=this.material.luminanceMap)===null||Cu===void 0||Cu.dispose()),this.material.dispose()},Tu}(r$3.Mesh),Ha=function(_u){function Tu(){var Cu=_u.call(this)||this;return Cu.needsRender=!1,Cu.name="tiling",Cu}return t$3.__extends(Tu,_u),Tu}(r$3.Group),qa=function(){function _u(Tu,Cu){this.disposed=!1,this.textureLoader=new Ii(Tu),this.level=0,this.panoIndex=0,this.pedding=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=Cu,this.object=new Ha}return _u.prototype.setAllowHosts=function(Tu){this.textureLoader.setAllowHosts(Tu)},_u.prototype.setRequestProxy=function(Tu){this.textureLoader.setRequestProxy(Tu)},_u.prototype.setNetworkSubscribe=function(Tu){this.textureLoader.setNetworkSubscribe(Tu)},_u.prototype.cleanup=function(){for(var Tu=0;Tu<this.tiles.length;Tu++)if(this.tiles[Tu]){var Cu=this.tiles[Tu],Pu="level-group:"+Tu,Bu=this.object.getObjectByName(Pu);for(var Ru in Cu){var Lu=Cu[Ru];Lu.dispose(),Bu.remove(Lu),delete Cu[Ru],this.object.needsRender=!0}}},_u.prototype.setRotation=function(Tu){if(!this.disposed){var Cu=new r$3.Quaternion().multiplyQuaternions(Tu,Pa);this.object.quaternion.equals(Cu)||(this.object.quaternion.copy(Cu),this.object.needsRender=!0)}},_u.prototype.setPosition=function(Tu){this.disposed||this.object.position.equals(Tu)||(this.object.position.copy(Tu),this.object.needsRender=!0)},_u.prototype.setResource=function(Tu){if(!this.disposed&&this.resource!==Tu){this.cleanup(),this.resource=Tu;for(var Cu=0;Cu<Tu.length;Cu++){var Pu=Tu[Cu].level;this.tiles[Pu]={};var Bu="level-group:"+Pu,Ru=this.object.getObjectByName(Bu);Ru||((Ru=new r$3.Group).name=Bu,Ru.renderOrder=-2),this.object.add(Ru)}this.object.needsRender=!0}},_u.prototype.setLuminance=function(Tu){this.luminance=Tu},_u.prototype.getTileResources=function(Tu){for(var Cu,Pu=(Cu=this.imageOptions.size)!==null&&Cu!==void 0?Cu:2048,Bu=[],Ru=this.resource.length-1;Ru>=0;Ru--)this.resource[Ru].level<=Tu&&512*Math.pow(2,this.resource[Ru].level)>Pu&&Bu.unshift(this.resource[Ru]);return Bu},_u.prototype.update=function(Tu,Cu,Pu){var Bu=this;if(!this.disposed){this.level=Cu;var Ru=Ra.copy(Tu);Ru.position.set(0,0,0),Ru.quaternion.premultiply(this.object.quaternion.clone().inverse()),Ru.updateMatrixWorld(!0),Ru.updateProjectionMatrix();for(var Lu=Ru.getWorldDirection(new r$3.Vector3),Ou=ka.setFromProjectionMatrix(Da.multiplyMatrices(Ru.projectionMatrix,Ru.matrixWorldInverse)),Du=this.getTileResources(Cu),$u=function(ju){if(ju){for(var Uu=[],zu=ju.level,Wu=Math.pow(2,zu),Qu=Wu*Wu,qu=ku.object.getObjectByName("level-group:"+zu),Yu=0,Xc=Ca;Yu<Xc.length;Yu++)for(var _h=Xc[Yu],_d=0;_d<Qu;_d++){var Ku=_a$1.getBox(zu,_h,_d);Ou.intersectsBox(Ku)&&Uu.push(Ku)}var Xu=new r$3.Vector3;Uu.sort(function(np,sp){return np.getCenter(Xu).angleTo(Lu)-sp.getCenter(Xu).angleTo(Lu)});for(var Ju=[],Zu=0,_c=Uu;Zu<_c.length;Zu++){var _f=(Ku=_c[Zu]).sideCount,ep=Ku.row,tp=Ku.col,op=(_h=Ku.type,"tile-level:".concat(zu,"-face:").concat(_h,"-row:").concat(ep,"-col:").concat(tp));if(!ku.tiles[zu][op]){var hp=ju[_h],cp=ju.size,Sp=cp/_f,yp=[Sp*tp,Sp*ep,Sp,Sp],Rp=t$3.__assign({key:"pano_tile.".concat(ku.panoIndex,".").concat(_h,".").concat(zu,".").concat(ep,".").concat(tp),basisLoaderInitialized:Ei.isInitialized(),cut:yp},ii(ku.imageOptions,["format","mappings"]));zu<=1&&(Rp.format==="jpg"||/\.jpg$/.test(hp))?(Sp!==1024&&(Rp.size=1024),Rp.quality=70):Sp!==512&&(Rp.size=512);var wp=ku.imageOptions.transform?ku.imageOptions.transform(hp,Rp):ct(hp,Rp),Pp=ku.textureLoader.load(wp,{preInit:!0}).then(function(np){return np.body}),Ep=null;if(ku.luminance){var ip=ku.luminance[_h],rp=ip.match(/\/cube_(\d+)\//),fp=!!rp&&Number(rp[1]);if(fp!==!1){var up=cp/fp,pp=t$3.__assign(t$3.__assign({},Rp),{size:256,cut:[yp[0]/up,yp[1]/up,yp[2]/up,yp[3]/up],key:"pano_tile_luminance.".concat(ku.panoIndex,".").concat(_h,".").concat(zu,".").concat(ep,".").concat(tp)}),gp=ku.imageOptions.transform?ku.imageOptions.transform(ip,pp):ct(ip,pp);Ep=ku.textureLoader.load(gp,{format:r$3.LuminanceFormat,preInit:!0}).then(function(np){return np.body}).catch(function(){return null})}}ku.pedding++;var Ap=Promise.all([Pp,Ep]).then(function(np){return Bu.pedding--,np},function(np){return Bu.pedding--,Promise.reject(np)});(Tp=ku.tiles[zu][op]=new _a$1(Ku,Ap)).name=op,Tp.renderOrder=zu,qu.add(Tp)}ku.tiles[zu][op].activeTime=Pu,Ju.push(op)}for(var Mp=0,$p=Object.keys(ku.tiles[zu]).sort(function(np,sp){return Bu.tiles[zu][sp].activeTime-Bu.tiles[zu][np].activeTime}).slice(Math.max(24,Ju.length));Mp<$p.length;Mp++){op=$p[Mp];var Tp=ku.tiles[zu][op];qu.remove(Tp),Tp.dispose(),delete ku.tiles[zu][op],ku.object.needsRender=!0}}},ku=this,Fu=0,Nu=Du;Fu<Nu.length;Fu++)$u(Nu[Fu]);for(var Vu=0;Vu<this.tiles.length;Vu++)if(this.tiles[Vu]){var Gu=Du.length>0&&Vu<=Du[Du.length-1].level;for(var Hu in this.tiles[Vu])this.tiles[Vu][Hu].visible!==Gu&&(this.tiles[Vu][Hu].visible=Gu,this.tiles[Vu][Hu].needsRender=!0),this.tiles[Vu][Hu].updateTime(Pu)}}},_u.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},_u}(),za=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Ka=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),Ua=new r$3.BufferGeometry;Ua.setAttribute("position",new r$3.BufferAttribute(za,3)),Ua.setIndex(new r$3.BufferAttribute(Ka,1));var ja=function(){function _u(){this.material=new r$3.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$3.Uniform(null),matrix:new r$3.Uniform(null),alpha:new r$3.Uniform(null),map:new r$3.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor}),this.object=new r$3.Mesh(Ua,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new Ro({alpha:0})}return _u.prototype.setMaterial=function(Tu){Tu?(this.material.uniforms.size.value=Tu.size,this.material.uniforms.matrix.value=Tu.matrix,this.material.uniforms.map.value=Tu.map,this.alphaMotion.set({alpha:Tu.alpha},500).catch(Qe),this.material.uniforms.alpha.value=Tu.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Qe));var Cu=Tu!==null;Cu!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=Cu,this.material.needsUpdate=!0,this.object.visible=Tu!==null)},_u.prototype.updateTime=function(Tu){this.alphaMotion.ended||(this.alphaMotion.update(Tu),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},_u.prototype.dispose=function(){this.material.dispose()},_u}(),Ga=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Wa=new r$3.Vector3(-1,1,1),Xa=function(_u){function Tu(Cu){var Pu,Bu,Ru,Lu,Ou,Du,$u,ku=this,Fu=Tu.parseArgs(Cu);(ku=_u.call(this,Fu)||this).initAnimationed=!1,ku.currentPanoIndex=Fu.initial[0],ku.maxAccessibleDistance=Fu.maxAccessibleDistance,ku.panoTapTriggerRadius=Fu.panoTapTriggerRadius,ku.panoCircleMeshCreator=Fu.panoCircleMeshCreator,ku.tileLevelForFov=Fu.tileLevelForFov;var Nu=ku.model.getMaterial()||{},Vu=Nu.pano0,Gu=Nu.pano1;Vu&&(Gu==null?void 0:Gu.map)!==Vu.map&&(ku.model.setMaterial({pano0:Gu}),Vu.map.dispose(),(Pu=Vu.luminanceMap)===null||Pu===void 0||Pu.dispose()),ku.boundingMesh=ku.generateBoundingMesh(),ku.boundingMesh.setMaterial(ku.model.getMaterial()||{}),ku.boundingMesh.visible=!1,ku.scene.add(ku.boundingMesh),ku.panoMeshes=[],ku.updatePanoMeshes(),ku.locationMotion=new Ro({count:0,distance:ku.camera.pose.distance,modelAlpha:(Ru=(Bu=ku.model.getMaterial())===null||Bu===void 0?void 0:Bu.modelAlpha)!==null&&Ru!==void 0?Ru:0,perspToOrtho:(Ou=(Lu=ku.model.getMaterial())===null||Lu===void 0?void 0:Lu.perspToOrtho)!==null&&Ou!==void 0?Ou:0}),ku.panoResources={},ku.panoResources[ku.locationMotion.keyframes[0].key=ku.locationMotion.keyframes[1].key=Kr()]={panoIndex:ku.currentPanoIndex,workCode:ku.work.workCode,panoPicture:($u=(Du=ku.model.getMaterial())===null||Du===void 0?void 0:Du.pano1)!==null&&$u!==void 0?$u:null,position:ku.camera.pose.offset.clone(),effect:"fly"};var Hu={allowHosts:ku.work.allowHosts,requestProxy:ku.requestProxy,networkSubscribe:ku.networkSubscribe};return ku.textureLoader=new Ii(Hu),ku.tiling=new qa(Hu,ku.imageOptions),ku.scene.add(ku.tiling.object),ku.panoVideo=new ja,ku.scene.add(ku.panoVideo.object),ku}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){var Pu,Bu,Ru,Lu,Ou=_u.parseArgs.call(this,Cu);return t$3.__assign(t$3.__assign({},Ou),{maxAccessibleDistance:(Pu=Cu.maxAccessibleDistance)!==null&&Pu!==void 0?Pu:5,panoTapTriggerRadius:(Bu=Cu.panoTapTriggerRadius)!==null&&Bu!==void 0?Bu:.5,panoCircleMeshCreator:(Ru=Cu.panoCircleMeshCreator)!==null&&Ru!==void 0?Ru:function(){return new as},tileLevelForFov:(Lu=Cu.tileLevelForFov)!==null&&Lu!==void 0?Lu:function(Du,$u){var ku=2*Math.atan(Math.tan(Du/180*Math.PI/2)*($u.width/$u.height))/Math.PI*180,Fu=Math.max($u.width/ku,$u.height/Du);return Fu>80?4:Fu>48?3:Fu>24?2:Fu>12?1:0}})},Tu.initAnimationEndPose=function(Cu){var Pu=this.parseArgs(Cu);return _u.initAnimationEndPose.call(this,Pu)},Tu.prototype.destroy=function(){var Cu,Pu,Bu=this;_u.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gu){Bu.helper.remove(Gu),Gu.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Ru=this.videoTexture.image;Ru.pause(),Ru.oncanplay=function(){},Ru.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Lu=(Cu=this.model.getMaterial())!==null&&Cu!==void 0?Cu:{},Ou=Lu.pano0,Du=Lu.pano1,$u=0,ku=Object.keys(this.panoResources);$u<ku.length;$u++){var Fu=ku[$u],Nu=this.panoResources[Fu];if(Nu.panoPicture){var Vu=Nu.panoPicture.map;Vu&&Vu!==(Ou==null?void 0:Ou.map)&&Vu!==(Du==null?void 0:Du.map)&&(Vu.dispose(),(Pu=Nu.panoPicture.luminanceMap)===null||Pu===void 0||Pu.dispose(),Nu.panoPicture=null)}delete this.panoResources[Fu]}},Tu.prototype.isReady=function(){return this.locationMotion.ended===!0&&_u.prototype.isReady.call(this)},Tu.prototype.isTileReady=function(){return this.initAnimationed&&this.tiling.pedding<=0},Tu.prototype.updateWork=function(Cu,Pu,Bu,Ru,Lu){var Ou=this;this.userAction=Lu,this.work=Cu,this.currentPanoIndex=Pu,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Du={},$u=!0;this.boundingMesh&&(Du=this.boundingMesh.getMaterial()||{},$u=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=$u,this.boundingMesh.setMaterial(Du),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var ku=0,Fu=this.panoMeshes;ku<Fu.length;ku++)Fu[ku].visible=!1;return this.moveToPano(Pu,{effect:"fade",duration:Ru,longitude:Bu.longitude,latitude:Bu.latitude,fov:Bu.fov,moveEndCallback:function(){Ou.initAnimationed=!0},moveCancelCallback:function(){Ou.initAnimationed=!0}},Lu),!0},Tu.prototype.updateModel=function(Cu){this.model=Cu;var Pu={},Bu=!0;this.boundingMesh&&(Pu=this.boundingMesh.getMaterial()||{},Bu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Bu,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Pu),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu,Ru,Lu,Ou,Du,$u,ku,Fu=[],Nu=2;Nu<arguments.length;Nu++)Fu[Nu-2]=arguments[Nu];if(!this.destroyed){var Vu={},Gu={},Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Uu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Cu);var zu=this.locationMotion.getKeyFrameSegment(Cu),Wu=zu[0],Qu=zu[1],qu=this.panoResourceFromLocationMotionKeyframe(Wu),Yu=this.panoResourceFromLocationMotionKeyframe(Qu),Xc=new r$3.Vector3().copy(qu.position),_h=new r$3.Vector3().copy(Yu.position),_d=this.locationMotion.value.count-Qu.value.count+1;Vu.progress=_d,Vu.modelAlpha=this.locationMotion.value.modelAlpha,Vu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Yu.panoPicture&&(_d<1?qu.panoPicture&&(Vu.pano0=qu.panoPicture):Vu.pano0=Yu.panoPicture,Vu.pano1=Yu.panoPicture),Uu=Vu.useBlackTransition=Yu.effect==="instant"||Yu.effect==="montage",Yu.effect!=="fade"&&Yu.effect!=="montage"||(Vu.pano0&&qu.panoPicture&&(Vu.pano0={map:Vu.pano0.map,luminanceMap:Vu.pano0.luminanceMap,matrix:qu.panoPicture.matrix.clone().setPosition(Yu.position)}),Xc.copy(_h)),Gu.distance=this.locationMotion.value.distance,Gu.offset=new r$3.Vector3(Xc.x+(_h.x-Xc.x)*_d,Xc.y+(_h.y-Xc.y)*_d,Xc.z+(_h.z-Xc.z)*_d);for(var Ku=[],Xu=[],Ju=0,Zu=this.locationMotion.keyframes;Ju<Zu.length;Ju++){var _c=Zu[Ju],_f=_c.key,ep=_c.progress;_f!==void 0&&(Ku.push(_f),ep>=this.locationMotion.progress&&Xu.push(_f))}for(var tp=0,op=Object.keys(this.panoResources);tp<op.length;tp++){var hp=op[tp];if(!(Xu.indexOf(hp)>=0)){var cp=this.panoResources[hp];if(cp.panoPicture){var Sp=cp.panoPicture.map;if(Sp){if(Sp===((Bu=Vu.pano0)===null||Bu===void 0?void 0:Bu.map)||Sp===((Ru=Vu.pano1)===null||Ru===void 0?void 0:Ru.map))continue;Sp.dispose(),(Lu=cp.panoPicture.luminanceMap)===null||Lu===void 0||Lu.dispose(),cp.panoPicture=null}}Ku.indexOf(hp)>=0||delete this.panoResources[hp]}}qu.workCode===Yu.workCode?this.currentPanoIndex=_d<.5?qu.panoIndex:Yu.panoIndex:this.currentPanoIndex=Yu.panoIndex,this.emit("movingToPano",ju.panoIndex,Hu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Cu),Gu.longitude=this.cameraMotion.value.longitude,Gu.latitude=this.cameraMotion.value.latitude,Gu.fov=this.cameraMotion.value.fov),ia$1(Vu)===!1&&(this.model.setMaterial(Vu),this.boundingMesh.setMaterial(Vu)),ia$1(Gu)===!1&&this.setCamera(Gu),this.camera.pose.distance>.1)for(var yp=0;yp<this.work.observers.length;yp++)(Ep=this.panoMeshes[yp])&&(Ep.visible=!1);else{var Rp=this.work.observers[this.currentPanoIndex];if(Rp){var wp=Rp.visibleNodes.concat(this.currentPanoIndex),Pp=this.getForwardPanoIndexOrNot();for(yp=0;yp<this.work.observers.length;yp++){var Ep,ip=this.work.observers[yp];if(Ep=this.panoMeshes[yp])if(ip.loadable||ip.active)if(wp.indexOf(yp)!==-1)if(Uu)Ep.visible=!1,Ep.setOpacity(0);else{Ep.visible=!0;var rp=Ep.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Ep.setCurrent(Pp===yp),Ep.setOpacity(rp<.01?0:ho(1.4/rp,.5,.7)),Ep.updateTime&&Ep.updateTime(Cu,Pu)}else Ep.visible=!1,Ep.setOpacity(0);else Ep.visible=!1,Ep.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Ou=this.boundingMesh.getMaterial())===null||Ou===void 0?void 0:Ou.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var fp=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var up=ju.panoIndex,pp=this.work.observers[up];if(pp)if(_s(this.camera.position,pp.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Du=pp.images.luminance)!==null&&Du!==void 0?Du:null),this.tiling.panoIndex!==up&&this.tiling.cleanup(),this.tiling.panoIndex=up,this.tiling.setResource((ku=($u=pp.images)===null||$u===void 0?void 0:$u.tiles)!==null&&ku!==void 0?ku:[]),this.tiling.setRotation(pp.quaternion),this.tiling.setPosition(pp.position);var gp=this.renderer.getDrawingBufferSize(new r$3.Vector2);gp.width*=this.scissor.width,gp.height*=this.scissor.height;var Ap=this.imageOptions.size;if(Ap===void 0&&pp){var Mp=pp.images.up.match(/\/cube_(\d+)\//);Mp&&(Ap=Number(Mp[1]))}Ap===void 0&&(Ap=2048);var $p=0;Ap>=1024&&($p=1),Ap>=2048&&($p=2),Ap>=4096&&($p=3),Ap>=8192&&($p=4);var Tp=this.tileLevelForFov(this.camera.fov,gp),np=Tp>$p?Tp:0;this.tiling.update(this.camera,np,Cu)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;fp!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(Cu)}},Tu.prototype.render=function(){var Cu=this.work.observers[this.currentPanoIndex];Cu&&Cu.video&&(this.needsRender=!0),_u.prototype.render.call(this)},Tu.prototype.postProcessing=function(Cu,Pu){if(!this.destroyed)return this.effect||(this.effect=new Sa(this.renderer)),this.effect.render(Cu,Pu)},Tu.prototype.getTargetPose=function(){var Cu=this.cameraMotion.getKeyFrameSegment(_e())[1],Pu=this.locationMotion.getKeyFrameSegment(_e())[1],Bu=this.panoResourceFromLocationMotionKeyframe(Pu),Ru=this.work.observers[Bu.panoIndex];return{longitude:Cu.value.longitude,latitude:Cu.value.latitude,fov:Cu.value.fov,offset:Ru?Ru.position.clone():this.camera.position.clone(),distance:this.locationMotion.value.distance}},Tu.prototype.moveToPano=function(Cu,Pu,Bu){var Ru,Lu,Ou,Du=this,$u=this.work.observers[Cu],ku=t$3.__assign({key:"pano.".concat(Cu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),Fu=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct,Nu={right:Fu($u.images.right,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".right")})),left:Fu($u.images.left,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".left")})),up:Fu($u.images.up,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".up")})),down:Fu($u.images.down,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".down")})),front:Fu($u.images.front,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".front")})),back:Fu($u.images.back,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".back")}))},Vu={key:"pano_luminance.".concat(Cu),basisLoaderInitialized:Ei.isInitialized(),size:ku.size?ku.size/2:1024},Gu=this.enableIOSEDR&&$u.images.luminance?{right:Fu($u.images.luminance.right,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".right")})),left:Fu($u.images.luminance.left,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".left")})),up:Fu($u.images.luminance.up,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".up")})),down:Fu($u.images.luminance.down,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".down")})),front:Fu($u.images.luminance.front,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".front")})),back:Fu($u.images.luminance.back,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".back")}))}:null,Hu="pano:"+va(Nu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Hu)return;var ju=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[ju])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",ju,$u),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Uu,zu=this.model.getMaterial()||{},Wu=zu.pano0,Qu=zu.pano1;if(Wu&&Wu.map.name===Hu&&Wu.luminanceMap!==null===this.enableIOSEDR?Uu=Wu:(Qu==null?void 0:Qu.map.name)===Hu&&Qu.luminanceMap!==null===this.enableIOSEDR&&(Uu=Qu),Uu){var qu={panoIndex:Cu,workCode:this.work.workCode,effect:(Ou=Pu.effect)!==null&&Ou!==void 0?Ou:"fly",panoPicture:{map:Uu.map,luminanceMap:Uu.luminanceMap,matrix:new r$3.Matrix4().compose($u.position,$u.quaternion,Wa)},position:$u.position.clone()};at.shared.add(function(){Du.pending=!1,Du.emit("panoLoaded",Cu),Du.doMoveToPano(Cu,qu,Pu,Bu)},!0,1)}else{this.pendingTextureTask={panoIndex:Cu,hash:Hu,onLoad:function(Xc,_h){var _d,Ku;if(Du.pending=!1,Du.destroyed)Xc.body.dispose();else{Xc.body.name=Hu,Du.emit("panoLoaded",Cu);var Xu={panoIndex:Cu,workCode:Du.work.workCode,effect:(_d=Pu.effect)!==null&&_d!==void 0?_d:"fly",panoPicture:{map:Xc.body,luminanceMap:(Ku=_h==null?void 0:_h.body)!==null&&Ku!==void 0?Ku:null,matrix:new r$3.Matrix4().compose($u.position,$u.quaternion,Wa)},position:$u.position.clone()};Du.doMoveToPano(Cu,Xu,Pu,Bu)}},onError:function(Xc){Du.pending=!1,Pu.moveCancelCallback&&Pu.moveCancelCallback(),Du.emit("panoLoadError",Xc,Cu),Du.emit("moveToPanoCanceled",Cu)}};var Yu=this.panoMeshes[Cu];Yu&&Yu.tap&&Yu.tap(),Promise.all([this.textureLoader.loadCube(Nu,{format:r$3.RGBFormat,viaAjax:!0},void 0,void 0,function(Xc){var _h,_d;Du.emit("textureLoading",Xc,Cu,$u),((_h=Du.pendingTextureTask)===null||_h===void 0?void 0:_h.hash)===Hu&&((_d=Du.panoMeshes[Cu])===null||_d===void 0||_d.setProgress(Xc))},this.renderer),Gu?this.textureLoader.loadCube(Gu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Xc){var _h,_d,Ku=Xc[0],Xu=Xc[1];((_h=Du.pendingTextureTask)===null||_h===void 0?void 0:_h.hash)===Hu?(Du.pendingTextureTask.onLoad(Ku,Xu),(_d=Du.panoMeshes[Cu])===null||_d===void 0||_d.setProgress(0),delete Du.pendingTextureTask,Du.emit("textureLoaded",Cu,$u,Ku.meta)):(Ku.body.dispose(),Xu==null||Xu.body.dispose())}).catch(function(Xc){var _h,_d;((_h=Du.pendingTextureTask)===null||_h===void 0?void 0:_h.hash)===Hu&&(Du.pendingTextureTask.onError(Xc),(_d=Du.panoMeshes[Cu])===null||_d===void 0||_d.setProgress(0),delete Du.pendingTextureTask,Du.emit("textureError",Xc,Cu,$u),Du.emit("error",Xc))}),this.emit("textureStartLoad",Cu,$u)}},Tu.prototype.initAnimation=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u=this;if(!this.destroyed){var ku=!1;this.pending=!1,this.userAction=Ru,this.moveToPano(Cu,{longitude:(Lu=Pu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ou=Pu.latitude)!==null&&Ou!==void 0?Ou:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Du=Pu.fov)!==null&&Du!==void 0?Du:this.defaultFov,this.minFov,this.maxFov),duration:Bu,moveStartCallback:function(Fu,Nu){ku=!0,$u.emit("initAnimationWillStart",Fu,Nu,$u.userAction)},moveEndCallback:function(Fu,Nu){$u.emit("initAnimationEnded",Fu,Nu,$u.userAction),$u.initAnimationed=!0},moveCancelCallback:function(){var Fu={longitude:$u.camera.pose.longitude,latitude:$u.camera.pose.latitude,fov:$u.camera.pose.fov,offset:$u.camera.pose.offset.clone(),distance:$u.camera.pose.distance};ku===!1&&$u.emit("initAnimationWillStart",$u.currentPanoIndex,Fu,$u.userAction),$u.emit("initAnimationEnded",$u.currentPanoIndex,Fu,$u.userAction),$u.initAnimationed=!0}},Ru)}},Tu.prototype.panoResourceFromLocationMotionKeyframe=function(Cu){return this.panoResources[Cu.key]},Tu.prototype.locationMotionKeyframesLength=function(Cu){for(var Pu=0,Bu=1;Bu<Cu.length;Bu++){var Ru=this.panoResourceFromLocationMotionKeyframe(Cu[Bu-1]).position,Lu=this.panoResourceFromLocationMotionKeyframe(Cu[Bu]).position;Pu+=Ru.distanceTo(Lu)*(Cu[Bu].value.count-Cu[Bu-1].value.count)}return Pu},Tu.prototype.updatePanoMeshes=function(Cu){Cu===void 0&&(Cu=!0);for(var Pu={},Bu=0,Ru=this.panoMeshes;Bu<Ru.length;Bu++)Pu[($u=Ru[Bu]).name]=$u;this.panoMeshes.length=0;for(var Lu=0;Lu<this.work.observers.length;Lu++){var Ou="panoCircle_".concat(this.work.workCode,"_").concat(Lu),Du=this.work.observers[Lu],$u=void 0;if(Pu[Ou]?(($u=Pu[Ou]).loading===!0&&Du.loadable===!1&&$u.setLoading(!1),delete Pu[Ou]):(($u=this.panoCircleMeshCreator()).name=Ou,this.helper.add($u)),$u.position.copy(Du.standingPosition),Cu&&this.model.loaded&&this.model.bvhs.loaded){var ku=new r$3.Vector3(0,-1,0),Fu=new r$3.Vector3(0,.1,0).add($u.position),Nu=new r$3.Raycaster(Fu,ku,0,.2),Vu=this.model.intersectRaycaster(Nu)[0];Vu&&Vu.point.distanceTo(Fu)<.1&&$u.position.copy(Vu.point)}this.panoMeshes[Lu]=$u}for(var Gu=0,Hu=Object.keys(Pu);Gu<Hu.length;Gu++){var ju=Hu[Gu];this.helper.remove(Pu[ju]),Pu[ju].dispose(),delete Pu[ju]}},Tu.prototype.generateBoundingMesh=function(Cu){Cu===void 0&&(Cu=!1);for(var Pu=this.model.bounding.clone(),Bu=0,Ru=this.work.observers;Bu<Ru.length;Bu++){var Lu=Ru[Bu];Pu.expandByPoint(Lu.standingPosition),Pu.expandByPoint(new r$3.Vector3().fromArray([Lu.position.x,2*Lu.position.y-Lu.standingPosition.y,Lu.position.z]))}Cu&&Pu.expandByPoint(this.camera.position);var Ou=Ks(Pu,new r$3.Vector3(1,0,1));return Ou.name="panorama_bounding",Ou},Tu.prototype.doMoveToPano=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u=this;Bu===void 0&&(Bu={}),this.userAction=Ru;var ku=_e(),Fu=Kr();this.tiling.cleanup(),this.panoResources[Fu]=Pu;var Nu,Vu,Gu;if(this.locationMotion.ended){var Hu=this.locationMotion.getKeyFrameSegment(ku);Hu[0];var ju=Hu[1],Uu=this.locationMotion.value,zu=this.panoResourceFromLocationMotionKeyframe(ju).position,Wu=Pu.position;Nu=Math.max(zu.distanceTo(Wu),1),Vu=[{key:ju.key,progress:0,value:t$3.__assign(t$3.__assign({},Uu),{count:0})},{key:Fu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gu=0}else{var Qu=this.locationMotion.getKeyFrameSegment(ku),qu=Qu[0],Yu=(ju=Qu[1],Uu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(qu).position),Xc=(zu=this.panoResourceFromLocationMotionKeyframe(ju).position,Wu=Pu.position,ju.value.count-Uu.count),_h=Math.max(Yu.distanceTo(zu),1)*Xc;Nu=_h+Math.max(zu.distanceTo(Wu),1),Vu=[{key:qu.key,progress:0,value:t$3.__assign({},Uu)},{key:ju.key,progress:_h/Nu,value:ju.value},{key:Fu,progress:1,value:{count:ju.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var _d=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ku=this.locationMotionKeyframesLength(Vu);Gu=_d===0||_d===0?0:this.locationMotion.getProgressVelocity(ku)*_d/Ku}var Xu=this.calculateMovingDuration(Bu.duration,Bu.effect==="fade"||Bu.effect==="montage"?0:Nu),Ju={longitude:Bu.longitude,latitude:Bu.latitude,fov:Bu.fov},Zu={longitude:(Lu=Ju.longitude)!==null&&Lu!==void 0?Lu:this.camera.pose.longitude,latitude:(Ou=Ju.latitude)!==null&&Ou!==void 0?Ou:this.camera.pose.latitude,fov:(Du=Ju.fov)!==null&&Du!==void 0?Du:this.camera.pose.fov,offset:Pu.position.clone(),distance:this.camera.pose.distance};Bu.moveStartCallback&&Bu.moveStartCallback(Cu,Zu),this.emit("panoWillArrive",Cu,Zu,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Ju,Xu).catch(Qe),this.locationMotion.setKeyframes(Vu,Xu,Gu).then(function(){var _c,_f,ep,tp={longitude:$u.camera.pose.longitude,latitude:$u.camera.pose.latitude,fov:$u.camera.pose.fov,offset:$u.camera.pose.offset.clone(),distance:$u.camera.pose.distance};Bu.moveEndCallback&&Bu.moveEndCallback(Cu,tp),$u.emit("panoArrived",Cu,tp,Ru);var op=$u.work.observers[$u.currentPanoIndex];if(op&&op.video&&$u.videoTexture&&$u.videoTexture.image instanceof HTMLVideoElement){var hp=Ga.clone().multiply((ep=(_f=(_c=$u.model.getMaterial())===null||_c===void 0?void 0:_c.pano1)===null||_f===void 0?void 0:_f.matrix)!==null&&ep!==void 0?ep:new r$3.Matrix4).multiply(op.video.matrix),cp={map:$u.videoTexture,size:op.video.size,matrix:hp,alpha:1},Sp=Kr(),yp=$u.videoTexture.image;yp.setAttribute("uuid",Sp),xa().then(function(Rp){Rp&&op.video&&yp.getAttribute("uuid")===Sp&&(yp.oncanplay=function(){yp.oncanplay=Qe,yp.play()},yp.ontimeupdate=function(){yp.currentTime>.5&&(yp.ontimeupdate=Qe,$u.panoVideo.setMaterial(cp))},yp.src=op.video.source)}).catch(function(){yp.removeAttribute("uuid")})}},function(){Bu.moveCancelCallback&&Bu.moveCancelCallback(),$u.emit("moveToPanoCanceled",Cu)})},Tu.prototype.getForwardPanoIndexOrNot=function(Cu){var Pu=this,Bu=this.work.observers[this.currentPanoIndex];if(!Bu)return null;var Ru=Cu!=null?Cu:new r$3.Raycaster(this.camera.position.clone(),this.camera.getWorldDirection(new r$3.Vector3)),Lu=Ru.ray.origin.clone(),Ou=new r$3.Vector3,Du=this.model.intersectRaycaster(new r$3.Raycaster(Ru.ray.origin,new r$3.Vector3(0,-1,0)))[0];Du&&Du.distance<=2?Ou.copy(Du.point):Ou.copy(Ru.ray.origin).add(new r$3.Vector3(0,-1.5,0));var $u=this.model.intersectRaycaster(Ru)[0],ku=($u?$u.point:Ru.ray.origin.clone().add(Ru.ray.direction.clone().normalize().multiplyScalar(3))).clone().sub(Ou).normalize();if(ku.length()===0)return null;for(var Fu=Bu.accessibleNodes.filter(function(Wu){if(Wu===Pu.currentPanoIndex)return!1;var Qu=Pu.work.observers[Wu],qu=Qu.standingPosition.clone().sub(Lu);return qu.length()!==0&&!(qu.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(Qu.loadable||Qu.active)}).slice().sort(function(Wu,Qu){return Pu.work.observers[Wu].standingPosition.clone().distanceTo(Ou)-Pu.work.observers[Qu].standingPosition.clone().distanceTo(Ou)}),Nu=0,Vu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Nu<Vu.length;Nu++)for(var Gu=Vu[Nu],Hu=0,ju=Fu;Hu<ju.length;Hu++){var Uu=ju[Hu],zu=this.work.observers[Uu].standingPosition.clone().sub(Ou);if(zu.length()!==0&&ku.angleTo(zu)<Gu)return Uu}return null},Tu.prototype.onTapGesture=function(Cu){var Pu=this,Bu=Cu.pointers.map(function(Ju){return ii(Ju,["x","y"])});if(!this.emit("wantsGesture","tap",Bu,!0)){var Ru=this.relativeClientPosition(Cu.center),Lu=new r$3.Raycaster;if(Lu.setFromCamera(Ru,this.camera),!this.emit("wantsTapGesture",Lu,Ru,!0)){this.emit("gesture","tap",Bu,!0),this.emit("tapGesture",Lu,Ru,!0),this.interiaMovement=!1;var Ou=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Du=null,$u=this.work.observers[this.currentPanoIndex];if($u){var ku=$u.accessibleNodes.filter(function(Ju){if(Ju===Pu.currentPanoIndex)return!1;var Zu=Pu.work.observers[Ju];return!(Zu.position.distanceTo(Pu.camera.position)>Pu.maxAccessibleDistance)&&(Zu.loadable||Zu.active)}),Fu=this.model.intersectRaycaster(Lu)[0];if(Fu){var Nu=ta(ku,function(Ju){var Zu=Pu.work.observers[Ju].standingPosition.clone();return Zu.clone().sub(Pu.camera.position).setY(0).angleTo(Ou)>Math.PI/2?1/0:Zu.distanceTo(Fu.point)},!0),Vu=Nu[0];Nu[1]<this.panoTapTriggerRadius&&(Du=Vu)}oo(Du)&&(Du=this.getForwardPanoIndexOrNot(Lu));for(var Gu=0,Hu=this.locationMotion.keyframes;Gu<Hu.length;Gu++){var ju=Hu[Gu],Uu=this.panoResourceFromLocationMotionKeyframe(ju);if(!(ju.progress<this.locationMotion.progress)&&Uu.panoIndex===Du){Du=null;break}}if(this.emit("panoSelected",Du),oo(Du))this.locationMotion.ended===!0&&this.cameraBounce();else{var zu=this.work.observers[Du];if(zu.active){for(var Wu={},Qu=Math.PI/6,qu=Math.PI/12,Yu=zu.position.clone().setY(0).sub($u.position.clone().setY(0)).normalize(),Xc=[],_h=0,_d=zu.accessibleNodes;_h<_d.length;_h++)if((Vu=_d[_h])!==this.currentPanoIndex&&Vu!==Du){var Ku=this.work.observers[Vu].position.clone().sub(zu.position).setY(0);Yu.angleTo(Ku)<Qu&&Xc.push(Ku)}var Xu=(Xc.length>0?Xc:t$3.__spreadArray(t$3.__spreadArray([],[],!0),[],!0)).slice().sort(function(Ju,Zu){return Ju.angleTo(Yu)-Zu.angleTo(Yu)})[0];Xu&&Xu.angleTo(Ou)>qu&&(Wu.longitude=Math.atan2(-Xu.x,-Xu.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Wu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Wu.fov=this.defaultFov),this.emit("wantsMoveToPano",Du,Wu,!0)}else this.panoMeshes[Du]&&(this.panoMeshes[Du].setDisabled(!1),this.panoMeshes[Du].setLoading(!0))}}}}},Tu}(ba$1),Ya=Math.PI/180,Za=180/Math.PI,Ja=function(){var _u=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return _u}}(),$a=function(){var _u=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return _u}}(),el=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return _u}}(),tl=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,Tu=_u?parseInt(_u[1],10):null;return function(){return Tu}}(),il=function(){var _u=!1;if(tl()===65){var Tu=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if(Tu){var Cu=Tu[1].split(".");Cu[0],Cu[1];var Pu=Cu[2],Bu=Cu[3];_u=parseInt(Pu,10)===3325&&parseInt(Bu,10)<148}}return function(){return _u}}(),nl=function(){var _u=Ja()&&$a()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return _u}}(),rl=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return _u}}();function ol(){var _u=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return rl()?!_u:_u}var sl,al=(sl={},function(_u,Tu){sl[_u]===void 0&&(console.warn("cardboard: "+Tu),sl[_u]=!0)});function ll(_u){var Tu,Cu=_u.indexOf("://");Tu=Cu!==-1?Cu+3:0;var Pu=_u.indexOf("/",Tu);return Pu===-1&&(Pu=_u.length),_u.substring(0,Pu)}var ul,hl=function(_u,Tu,Cu){(function(Pu,Bu,Ru){var Lu=Bu?Bu[0]:0,Ou=Bu?Bu[1]:0,Du=Bu?Bu[2]:0,$u=Bu?Bu[3]:1,ku=Lu+Lu,Fu=Ou+Ou,Nu=Du+Du,Vu=Lu*ku,Gu=Lu*Fu,Hu=Lu*Nu,ju=Ou*Fu,Uu=Ou*Nu,zu=Du*Nu,Wu=$u*ku,Qu=$u*Fu,qu=$u*Nu;Pu[0]=1-(ju+zu),Pu[1]=Gu+qu,Pu[2]=Hu-Qu,Pu[3]=0,Pu[4]=Gu-qu,Pu[5]=1-(Vu+zu),Pu[6]=Uu+Wu,Pu[7]=0,Pu[8]=Hu+Qu,Pu[9]=Uu-Wu,Pu[10]=1-(Vu+ju),Pu[11]=0,Pu[12]=Ru?Ru[0]:0,Pu[13]=Ru?Ru[1]:0,Pu[14]=Ru?Ru[2]:0,Pu[15]=1})(_u,Tu),Cu&&function(Pu,Bu,Ru){var Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu,zu=Ru[0],Wu=Ru[1],Qu=Ru[2];Bu===Pu?(Pu[12]=Bu[0]*zu+Bu[4]*Wu+Bu[8]*Qu+Bu[12],Pu[13]=Bu[1]*zu+Bu[5]*Wu+Bu[9]*Qu+Bu[13],Pu[14]=Bu[2]*zu+Bu[6]*Wu+Bu[10]*Qu+Bu[14],Pu[15]=Bu[3]*zu+Bu[7]*Wu+Bu[11]*Qu+Bu[15]):(Lu=Bu[0],Ou=Bu[1],Du=Bu[2],$u=Bu[3],ku=Bu[4],Fu=Bu[5],Nu=Bu[6],Vu=Bu[7],Gu=Bu[8],Hu=Bu[9],ju=Bu[10],Uu=Bu[11],Pu[0]=Lu,Pu[1]=Ou,Pu[2]=Du,Pu[3]=$u,Pu[4]=ku,Pu[5]=Fu,Pu[6]=Nu,Pu[7]=Vu,Pu[8]=Gu,Pu[9]=Hu,Pu[10]=ju,Pu[11]=Uu,Pu[12]=Lu*zu+ku*Wu+Gu*Qu+Bu[12],Pu[13]=Ou*zu+Fu*Wu+Hu*Qu+Bu[13],Pu[14]=Du*zu+Nu*Wu+ju*Qu+Bu[14],Pu[15]=$u*zu+Vu*Wu+Uu*Qu+Bu[15])}(_u,_u,Cu),function(Pu,Bu){var Ru=Bu[0],Lu=Bu[1],Ou=Bu[2],Du=Bu[3],$u=Bu[4],ku=Bu[5],Fu=Bu[6],Nu=Bu[7],Vu=Bu[8],Gu=Bu[9],Hu=Bu[10],ju=Bu[11],Uu=Bu[12],zu=Bu[13],Wu=Bu[14],Qu=Bu[15],qu=Ru*ku-Lu*$u,Yu=Ru*Fu-Ou*$u,Xc=Ru*Nu-Du*$u,_h=Lu*Fu-Ou*ku,_d=Lu*Nu-Du*ku,Ku=Ou*Nu-Du*Fu,Xu=Vu*zu-Gu*Uu,Ju=Vu*Wu-Hu*Uu,Zu=Vu*Qu-ju*Uu,_c=Gu*Wu-Hu*zu,_f=Gu*Qu-ju*zu,ep=Hu*Qu-ju*Wu,tp=qu*ep-Yu*_f+Xc*_c+_h*Zu-_d*Ju+Ku*Xu;tp&&(tp=1/tp,Pu[0]=(ku*ep-Fu*_f+Nu*_c)*tp,Pu[1]=(Ou*_f-Lu*ep-Du*_c)*tp,Pu[2]=(zu*Ku-Wu*_d+Qu*_h)*tp,Pu[3]=(Hu*_d-Gu*Ku-ju*_h)*tp,Pu[4]=(Fu*Zu-$u*ep-Nu*Ju)*tp,Pu[5]=(Ru*ep-Ou*Zu+Du*Ju)*tp,Pu[6]=(Wu*Xc-Uu*Ku-Qu*Yu)*tp,Pu[7]=(Vu*Ku-Hu*Xc+ju*Yu)*tp,Pu[8]=($u*_f-ku*Zu+Nu*Xu)*tp,Pu[9]=(Lu*Zu-Ru*_f-Du*Xu)*tp,Pu[10]=(Uu*_d-zu*Xc+Qu*qu)*tp,Pu[11]=(Gu*Xc-Vu*_d-ju*qu)*tp,Pu[12]=(ku*Ju-$u*_c-Fu*Xu)*tp,Pu[13]=(Ru*_c-Lu*Ju+Ou*Xu)*tp,Pu[14]=(zu*Yu-Uu*_h-Wu*qu)*tp,Pu[15]=(Vu*_h-Gu*Yu+Hu*qu)*tp)}(_u,_u)},cl=function(){function _u(Tu,Cu){Tu===void 0&&(Tu=new r$3.Vector3),Cu===void 0&&(Cu=0),this.sample=Tu,this.timestampS=Cu}return _u.prototype.set=function(Tu,Cu){this.sample=Tu,this.timestampS=Cu},_u.prototype.copy=function(Tu){this.set(Tu.sample,Tu.timestampS)},_u}(),dl=function(){function _u(Tu,Cu){this.kFilter=Tu,this.isDebug=Cu,this.currentAccelMeasurement=new cl,this.currentGyroMeasurement=new cl,this.previousGyroMeasurement=new cl,Ja()?this.filterQ=new r$3.Quaternion(-1,0,0,1):this.filterQ=new r$3.Quaternion(1,0,0,1),this.previousFilterQ=new r$3.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$3.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$3.Vector3,this.measuredGravity=new r$3.Vector3,this.gyroIntegralQ=new r$3.Quaternion}return _u.prototype.addAccelMeasurement=function(Tu,Cu){this.currentAccelMeasurement.set(Tu,Cu)},_u.prototype.addGyroMeasurement=function(Tu,Cu){this.currentGyroMeasurement.set(Tu,Cu);var Pu,Bu=Cu-this.previousGyroMeasurement.timestampS;Pu=Bu,isNaN(Pu)||Pu<=.001||Pu>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},_u.prototype.getOrientation=function(){return this.filterQ},_u.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var Tu=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,Cu=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,Tu);this.gyroIntegralQ.multiply(Cu),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(Cu);var Pu=new r$3.Quaternion;Pu.copy(this.filterQ),Pu.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Pu),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Bu,Ru=new r$3.Quaternion;Ru.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Ru.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Za*((Bu=Ru).w>1?0:2*Math.acos(Bu.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Lu=new r$3.Quaternion;Lu.copy(this.filterQ),Lu.multiply(Ru),this.filterQ.slerp(Lu,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},_u.prototype.accelToQuaternion_=function(Tu){var Cu=new r$3.Vector3;Cu.copy(Tu),Cu.normalize();var Pu=new r$3.Quaternion;return Pu.setFromUnitVectors(new r$3.Vector3(0,0,-1),Cu),Pu.inverse(),Pu},_u.prototype.gyroToQuaternionDelta_=function(Tu,Cu){var Pu=new r$3.Quaternion,Bu=new r$3.Vector3;return Bu.copy(Tu),Bu.normalize(),Pu.setFromAxisAngle(Bu,Tu.length()*Cu),Pu},_u}(),pl=function(){function _u(Tu,Cu){this.predictionTimeS=Tu,this.isDebug=Cu,this.previousQ=new r$3.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$3.Quaternion,this.outQ=new r$3.Quaternion}return _u.prototype.getPrediction=function(Tu,Cu,Pu){if(!this.previousTimestampS)return this.previousQ.copy(Tu),this.previousTimestampS=Pu,Tu;var Bu=new r$3.Vector3;Bu.copy(Cu),Bu.normalize();var Ru=Cu.length();if(Ru<20*Ya)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Za*Ru).toFixed(1)),this.outQ.copy(Tu),this.previousQ.copy(Tu),this.outQ;var Lu=Ru*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Bu,Lu),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(Tu),this.previousTimestampS=Pu,this.outQ},_u}(),fl=function(){function _u(Tu){this.coefficients=Tu}return _u.prototype.distortInverse=function(Tu){for(var Cu=0,Pu=1,Bu=Tu-this.distort(Cu);Math.abs(Pu-Cu)>1e-4;){var Ru=Tu-this.distort(Pu),Lu=Pu-Ru*((Pu-Cu)/(Ru-Bu));Cu=Pu,Pu=Lu,Bu=Ru}return Pu},_u.prototype.distort=function(Tu){for(var Cu=Tu*Tu,Pu=0,Bu=0;Bu<this.coefficients.length;Bu++)Pu=Cu*(Pu+this.coefficients[Bu]);return(Pu+1)*Tu},_u}(),Al=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},gl=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},ml=function(){function _u(Tu,Cu,Pu,Bu){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Pu,this.accelerometer=new r$3.Vector3,this.gyroscope=new r$3.Vector3,this.filter=new dl(Tu,Bu),this.posePredictor=new pl(Cu,Bu),this.isFirefoxAndroid=el(),this.isIOS=Ja();var Ru=tl();this.isDeviceMotionInRadians=!this.isIOS&&Ru!==null&&Ru<66,this.isWithoutDeviceMotion=il()||nl(),this.filterToWorldQ=new r$3.Quaternion,Ja()?this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$3.Quaternion,this.worldToScreenQ=new r$3.Quaternion,this.originalPoseAdjustQ=new r$3.Quaternion;var Lu=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Lu),this.setScreenTransform_(),ol()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$3.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return _u.prototype.getPosition=function(){return null},_u.prototype.getOrientation=function(){var Tu;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Lu=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,0,-1),0),Ou=new r$3.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Ou.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/-2):Ou.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/2),Lu.multiply(Ou)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Pu=new r$3.Quaternion).setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),Pu),Tu=this._deviceOrientationQ;var Cu=new r$3.Quaternion;return Cu.copy(Tu),Cu.multiply(this.deviceOrientationFilterToWorldQ),Cu.multiply(this.resetQ),Cu.multiply(this.worldToScreenQ),Cu.multiplyQuaternions(this.deviceOrientationFixQ,Cu),this.yawOnly&&(Cu.x=0,Cu.z=0,Cu.normalize()),this.orientationOut_[0]=Cu.x,this.orientationOut_[1]=Cu.y,this.orientationOut_[2]=Cu.z,this.orientationOut_[3]=Cu.w,this.orientationOut_}var Pu,Bu=this.filter.getOrientation();Tu=this.posePredictor.getPrediction(Bu,this.gyroscope,this.previousTimestampS);var Ru=new r$3.Quaternion;return Ru.copy(this.filterToWorldQ),Ru.multiply(this.resetQ),Ru.multiply(Tu),Ru.multiply(this.worldToScreenQ),this.yawOnly&&(Ru.x=0,Ru.z=0,Ru.normalize()),this.orientationOut_[0]=Ru.x,this.orientationOut_[1]=Ru.y,this.orientationOut_[2]=Ru.z,this.orientationOut_[3]=Ru.w,this.orientationOut_},_u.prototype.getPose=function(){var Tu=new Al;return Tu.orientation=this.getOrientation(),Tu},_u.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ol()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},_u.prototype.getFrameData=function(Tu){var Cu=this.getOrientation(),Pu=this.getEyeOffset(),Bu=this.getEyeProjectionMatrix();return Tu.pose.angularAcceleration=null,Tu.pose.angularVelocity=null,Tu.pose.linearAcceleration=null,Tu.pose.linearVelocity=null,Tu.pose.orientation=Cu,Tu.pose.position=null,Tu.timestamp=this.previousTimestampS,Tu.leftProjectionMatrix.set(Bu.left),Tu.rightProjectionMatrix.set(Bu.right),hl(Tu.leftViewMatrix,Cu,Pu.left),hl(Tu.rightViewMatrix,Cu,Pu.right),Tu},_u.prototype.start=function(){if(typeof window=="undefined")return function(){};var Tu=this.onDeviceMotion_.bind(this),Cu=this.onOrientationChange_.bind(this),Pu=this.onMessage_.bind(this),Bu=this.onDeviceOrientation_.bind(this);return Ja()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Ru=window.self!==window.top,Lu=ll(document.referrer),Ou=ll(window.location.href);return Ru&&Lu!==Ou}()&&window.addEventListener("message",Pu),window.addEventListener("orientationchange",Cu),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Bu):window.addEventListener("devicemotion",Tu),function(){window.removeEventListener("devicemotion",Tu),window.removeEventListener("deviceorientation",Cu),window.removeEventListener("orientationchange",Cu),window.removeEventListener("message",Pu)}},_u.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},_u.prototype.getEyeProjectionMatrix=function(){var Tu=this.getEyeFieldOfView(),Cu=this.depthNear,Pu=this.depthFar,Bu={left:[],right:[]},Ru=Tu.left.upDegrees*Ya,Lu=Tu.left.downDegrees*Ya,Ou=2/(($u=Tu.left.leftDegrees*Ya)+(ku=Tu.left.rightDegrees*Ya)),Du=2/(Ru+Lu);Bu.left[0]=Ou,Bu.left[1]=0,Bu.left[2]=0,Bu.left[3]=0,Bu.left[4]=0,Bu.left[5]=Du,Bu.left[6]=0,Bu.left[7]=0,Bu.left[8]=-($u-ku)*Ou*.5,Bu.left[9]=(Ru-Lu)*Du*.5,Bu.left[10]=Pu/(Cu-Pu),Bu.left[11]=-1,Bu.left[12]=0,Bu.left[13]=0,Bu.left[14]=Pu*Cu/(Cu-Pu),Bu.left[15]=0;var $u,ku;return Ru=Tu.right.upDegrees*Ya,Lu=Tu.right.downDegrees*Ya,Ou=2/(($u=Tu.right.leftDegrees*Ya)+(ku=Tu.right.rightDegrees*Ya)),Du=2/(Ru+Lu),Bu.right[0]=Ou,Bu.right[1]=0,Bu.right[2]=0,Bu.right[3]=0,Bu.right[4]=0,Bu.right[5]=Du,Bu.right[6]=0,Bu.right[7]=0,Bu.right[8]=-($u-ku)*Ou*.5,Bu.right[9]=(Ru-Lu)*Du*.5,Bu.right[10]=Pu/(Cu-Pu),Bu.right[11]=-1,Bu.right[12]=0,Bu.right[13]=0,Bu.right[14]=Pu*Cu/(Cu-Pu),Bu.right[15]=0,Bu},_u.prototype.getEyeFieldOfView=function(){var Tu=this.viewer,Cu=this.device,Pu=new fl(Tu.distortionCoefficients),Bu=Tu.screenLensDistance,Ru=(Cu.widthMeters-Tu.interLensDistance)/2,Lu=Tu.interLensDistance/2,Ou=Tu.baselineLensDistance-Cu.bevelMeters,Du=Cu.heightMeters-Ou,$u=Za*Math.atan(Pu.distort(Ru/Bu)),ku=Za*Math.atan(Pu.distort(Lu/Bu)),Fu=Za*Math.atan(Pu.distort(Ou/Bu)),Nu=Za*Math.atan(Pu.distort(Du/Bu)),Vu=new gl,Gu=new gl;return Vu.leftDegrees=Math.min($u,Tu.fov),Vu.rightDegrees=Math.min(ku,Tu.fov),Vu.downDegrees=Math.min(Fu,Tu.fov),Vu.upDegrees=Math.min(Nu,Tu.fov),Gu.leftDegrees=Vu.rightDegrees,Gu.rightDegrees=Vu.leftDegrees,Gu.upDegrees=Vu.upDegrees,Gu.downDegrees=Vu.downDegrees,{left:Vu,right:Gu}},_u.prototype.onDeviceOrientation_=function(Tu){this._deviceOrientationQ=this._deviceOrientationQ||new r$3.Quaternion;var Cu=Tu.alpha,Pu=Tu.beta,Bu=Tu.gamma;Cu=(Cu||0)*Math.PI/180,Pu=(Pu||0)*Math.PI/180,Bu=(Bu||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$3.Euler(Cu,Pu,-Bu,"YXZ"))},_u.prototype.onDeviceMotion_=function(Tu){this.updateDeviceMotion_(Tu)},_u.prototype.updateDeviceMotion_=function(Tu){var Cu=Tu.accelerationIncludingGravity,Pu=Tu.rotationRate,Bu=Tu.timeStamp/1e3,Ru=Bu-this.previousTimestampS;return Ru<0?(al("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Bu)):Ru<=.001||Ru>1?(al("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Bu)):(Cu&&(this.accelerometer.set(-Cu.x,-Cu.y,-Cu.z),Pu&&(rl()?this.gyroscope.set(-Pu.beta,Pu.alpha,Pu.gamma):this.gyroscope.set(Pu.alpha,Pu.beta,Pu.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Bu)),this.filter.addAccelMeasurement(this.accelerometer,Bu)),void(this.previousTimestampS=Bu))},_u.prototype.onOrientationChange_=function(){this.setScreenTransform_()},_u.prototype.onMessage_=function(Tu){var Cu=Tu.data;Cu&&Cu.type&&Cu.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(Cu.deviceMotionEvent)},_u.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},_u}(),vl=[0,0,.5,1],yl=[.5,0,.5,1],bl=function(){function _u(Tu){var Cu=this;this.renderer=Tu,this.sensor=new ml(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$3.PerspectiveCamera,this.cameraR=new r$3.PerspectiveCamera;var Pu=this.sensor.start();this.dispose=function(){var Bu=Cu.renderer.getSize(new r$3.Vector2);Cu.renderer.setScissor(0,0,Bu.width,Bu.height),Cu.renderer.setViewport(0,0,Bu.width,Bu.height),Cu.renderer.setScissorTest(!1),Pu()}}return _u.prototype.render=function(Tu,Cu){var Pu=this.renderer.getSize(new r$3.Vector2);if(Pu.width>Pu.height){var Bu=Tu.autoUpdate;Bu&&(Tu.updateMatrixWorld(),Tu.autoUpdate=!1);var Ru={x:Math.round(Pu.width*vl[0]),y:Math.round(Pu.height*vl[1]),width:Math.round(Pu.width*vl[2]),height:Math.round(Pu.height*vl[3])},Lu={x:Math.round(Pu.width*yl[0]),y:Math.round(Pu.height*yl[1]),width:Math.round(Pu.width*yl[2]),height:Math.round(Pu.height*yl[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),Cu.parent===null&&Cu.updateMatrixWorld(),Cu.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),Cu.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Ou=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$3.Vector3().fromArray(Ou.left),this.scale),this.cameraR.translateOnAxis(new r$3.Vector3().fromArray(Ou.right),this.scale);var Du=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Du.left.slice(),this.cameraR.projectionMatrix.elements=Du.right.slice(),this.renderer.setViewport(Ru.x,Ru.y,Ru.width,Ru.height),this.renderer.setScissor(Ru.x,Ru.y,Ru.width,Ru.height),this.renderer.render(Tu,this.cameraL),this.renderer.setViewport(Lu.x,Lu.y,Lu.width,Lu.height),this.renderer.setScissor(Lu.x,Lu.y,Lu.width,Lu.height),this.renderer.render(Tu,this.cameraR),this.renderer.setViewport(0,0,Pu.width,Pu.height),this.renderer.setScissor(0,0,Pu.width,Pu.height),this.renderer.setScissorTest(!1),Bu&&(Tu.autoUpdate=!0)}else this.renderer.render(Tu,Cu)},_u.prototype.dispose=function(){},_u}(),xl={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},wl=typeof navigator!="undefined"&&(ul=xl[navigator.language.split("-")[0]])!==null&&ul!==void 0?ul:xl.zh,El=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(wl.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(wl.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function Ml(_u){for(var Tu=1,Cu=document.getElementsByTagName("meta"),Pu=0;Pu<Cu.length;Pu++){var Bu=Cu[Pu];if(Bu.getAttribute("name")==="viewport"){var Ru=(Bu.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Ru&&(Tu=Number(Ru[1])),isNaN(Tu)&&(Tu=1)}}return El.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,_u).replace(/(\d+)px/g,function(Lu,Ou){return function(Du){return Math.floor(Du*Tu)+"px"}(Number(Ou))})}var Il=new r$3.CircleBufferGeometry(.12,16),Sl=function(){var _u=yt(),Tu=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Cu=256,Pu=document.createElement("canvas");Pu.setAttribute("width",String(Cu)),Pu.setAttribute("height",String(Cu));var Bu=Pu.getContext("2d");if(Bu){Bu.drawImage(_u,0,0,Cu,Cu),Bu.globalCompositeOperation="source-out";var Ru=128;Bu.beginPath(),Bu.lineWidth=6.4,Bu.arc(Ru,Ru,83.2,0,2*Math.PI),Bu.strokeStyle="rgba(255, 255, 255, 1.0)",Bu.closePath(),Bu.stroke(),Tu.image=Pu,Tu.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Tu}(),Cl=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var Tu=_u.getContext("2d");if(Tu){var Cu=256;return Tu.beginPath(),Tu.arc(Cu,Cu,192,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Cu,Cu,192,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Bl=function(){if(typeof document!="undefined"){var _u=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(_u)),Tu.setAttribute("height",String(_u));var Cu=Tu.getContext("2d");if(Cu){var Pu=256;Cu.arc(Pu,Pu,192,0,2*Math.PI),Cu.fillStyle="rgba(85, 90, 255, 0.6)",Cu.shadowBlur=25.6,Cu.shadowColor="rgba(255, 255, 255, 0.6)",Cu.fill(),Cu.arc(Pu,Pu,192,0,2*Math.PI);var Bu=Cu.createRadialGradient(Pu,Pu,0,Pu,Pu,Pu);Bu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(1,"rgba(255, 255, 255, 0.2)"),Cu.fillStyle=Bu,Cu.fill(),Cu.lineWidth=4.8,Cu.arc(Pu,Pu,187.2,0,2*Math.PI);var Ru=Cu.createLinearGradient(0,0,0,_u);return Ru.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ru.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Cu.strokeStyle=Ru,Cu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Tl=function(){if(typeof document!="undefined"){var _u=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(_u)),Tu.setAttribute("height",String(_u));var Cu=Tu.getContext("2d");if(Cu){var Pu=256,Bu=179.2;Cu.arc(Pu,Pu,Bu,0,2*Math.PI),Cu.fillStyle="rgba(255, 255, 255, 0.4)",Cu.shadowBlur=25.6,Cu.shadowColor="rgba(255, 255, 255, 0.6)",Cu.fill(),Cu.arc(Pu,Pu,Bu,0,2*Math.PI);var Ru=Cu.createRadialGradient(Pu,Pu,0,Pu,Pu,Pu);Ru.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Cu.fillStyle=Ru,Cu.fill(),Cu.lineWidth=4.8,Cu.arc(Pu,Pu,Bu-4.8,0,2*Math.PI);var Lu=Cu.createLinearGradient(0,0,0,_u);return Lu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Lu.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Cu.strokeStyle=Lu,Cu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Pl=function(){if(typeof document!="undefined"){var _u=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(_u)),Tu.setAttribute("height",String(_u));var Cu=Tu.getContext("2d");if(Cu){var Pu=256,Bu=217.6,Ru=64;Cu.lineWidth=Ru,Cu.arc(Pu,Pu,Bu,0,2*Math.PI),Cu.strokeStyle="rgba(147, 162, 255, 0.3)",Cu.shadowBlur=25.6,Cu.shadowColor="rgba(255, 255, 255, 0.6)",Cu.stroke(),Cu.lineWidth=Ru,Cu.arc(Pu,Pu,Bu,0,2*Math.PI);var Lu=Cu.createRadialGradient(Pu,Pu,185.6,Pu,Pu,249.6);Lu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Lu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Cu.strokeStyle=Lu,Cu.stroke(),Cu.beginPath(),Cu.lineWidth=4,Cu.arc(Pu,Pu,245.6,0,2*Math.PI);var Ou=Cu.createLinearGradient(0,0,_u,0);return Ou.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ou.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Cu.strokeStyle=Ou,Cu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Rl=function(_u){function Tu(){var Cu=_u.call(this)||this;Cu.progress=0,Cu.opacity=0,Cu.loading=!1,Cu.current=!1,Cu.disabled=!1,Cu.opacityMotion=new Ro({opacity:0}),Cu.loadingMotion=new Ro({opacity:0}),Cu.currentMotion=new Ro({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Pu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return Cu.hitTestMesh=new r$3.Mesh(Il,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{color:0,opacity:0}))),Cu.hitTestMesh.scale.set(1.5,1.5,1.5),Cu.centerMesh=new r$3.Mesh(Il,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Bl,opacity:0}))),Cu.centerMesh2=new r$3.Mesh(Il,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Tl,opacity:0}))),Cu.ringMesh=new r$3.Mesh(Il,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Pl,opacity:0}))),Cu.loadingMesh=new r$3.Mesh(Il,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Sl,opacity:.8}))),Cu.disableMesh=new r$3.Mesh(Il,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Pu),{map:Cl}))),Cu.loadingMesh.visible=!1,Cu.disableMesh.visible=!1,Cu.hitTestMesh.position.z=0,Cu.ringMesh.position.z=.003,Cu.disableMesh.position.z=.002,Cu.centerMesh.position.z=.002,Cu.centerMesh2.position.z=.002,Cu.loadingMesh.position.z=.005,Cu.hitTestMesh.frustumCulled=!1,Cu.centerMesh.frustumCulled=!1,Cu.centerMesh2.frustumCulled=!1,Cu.ringMesh.frustumCulled=!1,Cu.loadingMesh.frustumCulled=!1,Cu.disableMesh.frustumCulled=!1,Cu.add(Cu.hitTestMesh),Cu.add(Cu.centerMesh),Cu.add(Cu.centerMesh2),Cu.add(Cu.ringMesh),Cu.add(Cu.loadingMesh),Cu.add(Cu.disableMesh),Cu.renderOrder=1e4,Cu.needsRender=!0,Cu}return t$3.__extends(Tu,_u),Tu.prototype.setProgress=function(Cu){this.progress=Cu,this.setLoading(Cu>0)},Tu.prototype.setOpacity=function(Cu){this.opacity!==Cu&&(this.opacity=Cu=ho(Cu,0,1),this.opacityMotion.set({opacity:Cu},30).catch(Qe))},Tu.prototype.setCurrent=function(Cu){if(this.current!==Cu){if(Cu){var Pu=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Pu,1500).catch(Qe)}else Pu=[{progress:0,value:t$3.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Pu,200).catch(Qe);this.current=Cu}},Tu.prototype.setLoading=function(Cu){this.loading!==Cu&&(Cu?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=Cu,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},Tu.prototype.setDisabled=function(Cu){this.disabled!==Cu&&(this.disabled=Cu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Cu,this.centerMesh.visible=!Cu,this.needsRender=!0)},Tu.prototype.tap=function(){return Promise.resolve()},Tu.prototype.updateTime=function(Cu,Pu){this.opacityMotion.update(Cu),this.currentMotion.update(Cu),this.loadingMotion.update(Cu);var Bu=this.opacityMotion.value.opacity,Ru=this.currentMotion.value,Lu=Ru.ringScale,Ou=Ru.ringOpacity,Du=Ru.circleFade,$u=Ru.circleOpacity,ku=Ru.circleScale;if(this.ringMesh.scale.set(Lu,Lu,Lu),this.centerMesh.scale.set(ku,ku,ku),this.centerMesh2.scale.set(ku,ku,ku),this.ringMesh.material.opacity=Ou*Bu,this.centerMesh.material.opacity=(1-Du)*Bu,this.centerMesh2.material.opacity=Du*$u*Bu,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Pu/200);var Fu=this.opacityMotion.value.opacity,Nu=1.1;this.centerMesh.scale.set(Nu,Nu,Nu),this.centerMesh2.scale.set(Nu,Nu,Nu),this.centerMesh.material.opacity=0*Fu,this.centerMesh2.material.opacity=.2*Fu}else this.loadingMesh.visible=!1;this.needsRender=!0},Tu.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},Tu}(r$3.Object3D),kl=function(_u){function Tu(Cu){var Pu=this,Bu=Tu.parseArgs(Cu);(Pu=_u.call(this,Bu)||this).cardboard=new bl(Pu.renderer);var Ru,Lu,Ou,Du=(Ru="five_vr_helper_"+Kr(),Lu=Ml(Ru),(Ou=document.createElement("div")).className=Ru,Ou.innerHTML=Lu,Ou);Pu.helperElement=Du;var $u=new ra(Du);return Pu.element.parentNode&&(Pu.element.parentNode.insertBefore(Du,Pu.element),Pu.setHelperElementSize(),$u.on("tap",function(){return Pu.emit("vrWantsToExit")})),Pu.destroyHelper=function(){$u.destroy(),Du.parentNode&&Du.parentNode.removeChild(Du),delete Pu.helperElement},Pu.boundingMesh.visible=!0,Pu}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){var Pu=t$3.__assign(t$3.__assign({},Cu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Pu)},Tu.initAnimationEndPose=function(Cu){var Pu=this.parseArgs(Cu);return _u.initAnimationEndPose.call(this,Pu)},Tu.prototype.destroy=function(){_u.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var Cu=0,Pu=this.panoMeshes;Cu<Pu.length;Cu++){var Bu=Pu[Cu];this.helper.remove(Bu),Bu.dispose()}this.panoMeshes.length=0},Tu.prototype.isReady=function(){return!1},Tu.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},Tu.prototype.updatePanoMeshes=function(){var Cu=this;this.panoMeshes.forEach(function(Lu){Cu.helper.remove(Lu),Lu.dispose()}),this.panoMeshes.length=0;for(var Pu=0;Pu<this.work.observers.length;Pu++){var Bu=this.work.observers[Pu],Ru=new Rl;Ru.name="panoSphere_".concat(this.work.workCode,"_").concat(Pu),Ru.position.copy(Bu.position),Ru.needsRender=!0,this.helper.add(Ru),this.panoMeshes[Pu]=Ru}},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu,Ru,Lu=[],Ou=2;Ou<arguments.length;Ou++)Lu[Ou-2]=arguments[Ou];if(!this.destroyed){this.needsRender=!0;var Du={},$u={};if(this.locationMotion.ended===!1){this.locationMotion.update(Cu);var ku=this.locationMotion.getKeyFrameSegment(Cu),Fu=ku[0],Nu=ku[1],Vu=this.panoResourceFromLocationMotionKeyframe(Fu),Gu=this.panoResourceFromLocationMotionKeyframe(Nu),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Uu=Vu.position,zu=Gu.position,Wu=this.locationMotion.value.count-Nu.value.count+1;Du.modelAlpha=this.locationMotion.value.modelAlpha,Du.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Du.useBlackTransition=Gu.effect==="instant",Gu.panoPicture&&(Wu<1?Vu.panoPicture&&(Du.pano0=Vu.panoPicture):Du.pano0=Gu.panoPicture,Du.pano1=Gu.panoPicture),Gu.effect==="fade"&&(Du.pano0&&Vu.panoPicture&&(Du.pano0={map:Du.pano0.map,luminanceMap:Du.pano0.luminanceMap,matrix:Vu.panoPicture.matrix.clone().setPosition(Gu.position)}),Uu.copy(zu)),Du.progress=Wu,$u.distance=this.locationMotion.value.distance,$u.offset=new r$3.Vector3(Uu.x+(zu.x-Uu.x)*Wu,Uu.y+(zu.y-Uu.y)*Wu,Uu.z+(zu.z-Uu.z)*Wu);for(var Qu=[],qu=[],Yu=0,Xc=this.locationMotion.keyframes;Yu<Xc.length;Yu++){var _h=Xc[Yu],_d=_h.key,Ku=_h.progress;_d!==void 0&&(Qu.push(_d),Ku>=this.locationMotion.progress&&qu.push(_d))}for(var Xu=0,Ju=Object.keys(this.panoResources);Xu<Ju.length;Xu++){var Zu=Ju[Xu];if(!(qu.indexOf(Zu)>=0)){var _c=this.panoResources[Zu];if(_c.panoPicture){var _f=_c.panoPicture.map;if(_f){if(_f===((Bu=Du.pano0)===null||Bu===void 0?void 0:Bu.map)||_f===((Ru=Du.pano1)===null||Ru===void 0?void 0:Ru.map))continue;_f.dispose(),_c.panoPicture=null}}Qu.indexOf(Zu)>=0||delete this.panoResources[Zu]}}this.currentPanoIndex=Wu<.5?Vu.panoIndex:Gu.panoIndex,this.emit("movingToPano",ju.panoIndex,Hu.panoIndex,this.locationMotion.progress)}ia$1(Du)===!1&&(this.model.setMaterial(Du),this.boundingMesh.setMaterial(Du)),$u.offset&&this.camera.position.copy($u.offset);var ep=this.camera.pose.longitude,tp=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var op=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),hp=0;hp<this.work.observers.length;hp++){var cp=this.work.observers[hp];if((Rp=this.panoMeshes[hp]).visible=!0,cp.loadable||cp.active){if(op.indexOf(hp)===-1)Rp.visible=!1;else{Rp.visible=!0;var Sp=Rp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Sp<.05?Rp.setOpacity(0):Rp.setOpacity(ho(1.5/Sp,0,1)),this.currentPanoIndex===hp&&Rp.setOpacity(0)}Rp.lookAt(this.camera.position)}else Rp.visible=!0}var yp=this.intersect(Cu);for(hp=0;hp<this.work.observers.length;hp++)(Rp=this.panoMeshes[hp])==null||Rp.setCurrent(Rp===yp);for(hp=0;hp<this.work.observers.length;hp++){var Rp;(Rp=this.panoMeshes[hp])&&Rp.updateTime&&Rp.updateTime(Cu,Pu)}ep===this.camera.pose.longitude&&tp===this.camera.pose.latitude||(this.cameraMotion.set(ii(this.camera.pose,["longitude","latitude"]),0).catch(Qe),this.emit("cameraDirectionUpdate",ii(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",na(ii(this.camera.pose,["longitude","latitude","fov","offset","distance"])),!0))}},Tu.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},Tu.prototype.setCamera=function(Cu){},Tu.prototype.destroyHelper=function(){},Tu.prototype.setHelperElementSize=function(){if(this.helperElement){var Cu=new r$3.Vector2(this.element.offsetWidth,this.element.offsetHeight),Pu=Cu.x*this.scissor.left,Bu=Cu.y*(1-this.scissor.bottom-this.scissor.height),Ru=Cu.x*this.scissor.width,Lu=Cu.y*this.scissor.height;this.helperElement.style.marginLeft=Pu+"px",this.helperElement.style.marginTop=Bu+"px",this.helperElement.style.width=Ru+"px",this.helperElement.style.height=Lu+"px"}},Tu.prototype.intersect=function(Cu){var Pu;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&Cu-this.activeTime>1500){var Bu=this.activePanoMesh;return(ku=this.panoMeshes.indexOf(Bu))>=0&&this.moveToPano(ku,{},!0),delete this.activePanoMesh,delete this.activeTime,Bu}for(var Ru=this.camera.getWorldDirection(new r$3.Vector3),Lu=new r$3.Raycaster(this.camera.position,Ru),Ou=void 0,Du=[],$u=this.work.observers[this.currentPanoIndex].visibleNodes,ku=0;ku<this.work.observers.length;ku++){var Fu=this.panoMeshes[ku];if($u.indexOf(ku)!==-1){var Nu=Lu.intersectObject((Pu=Fu.hitTestMesh)!==null&&Pu!==void 0?Pu:Fu,!0)[0];Nu&&Du.push({panoMesh:Fu,intersection:Nu})}}var Vu=Du.sort(function(zu,Wu){return zu.intersection.distance-Wu.intersection.distance})[0];if(Vu?(Ou=Vu.intersection,this.activePanoMesh!==Vu.panoMesh&&(this.activePanoMesh=Vu.panoMesh,this.activeTime=Cu),this.intersectMesh.position.copy(Vu.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Ou)if((Ou=this.model.intersectRaycaster(Lu)[0])&&Ou.face){var Gu=Ou.face.normal,Hu=new r$3.Quaternion;Hu.setFromUnitVectors(new r$3.Vector3(0,0,1),Gu),this.intersectMesh.quaternion.copy(Hu);var ju=Gu.clone().multiplyScalar(.05),Uu=Ou.point.clone().add(ju);this.intersectMesh.position.copy(Uu),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Ou,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Vu==null?void 0:Vu.panoMesh},Tu.prototype.onPanGesture=function(){},Tu.prototype.onTapGesture=function(){},Tu.prototype.onPinchGesture=function(){},Tu.prototype.onMouseMove=function(){},Tu.prototype.onMouseOut=function(){},Tu}(Xa),Dl=function(_u){function Tu(Cu){var Pu,Bu,Ru,Lu,Ou=this,Du=Tu.parseArgs(Cu);return(Ou=_u.call(this,Du)||this).currentPanoIndex=Du.initial[0],Ou.locationMotion=new Ro({x:Ou.camera.pose.offset.x,y:Ou.camera.pose.offset.y,z:Ou.camera.pose.offset.z,distance:Ou.camera.pose.distance,modelAlpha:(Bu=(Pu=Ou.model.getMaterial())===null||Pu===void 0?void 0:Pu.modelAlpha)!==null&&Bu!==void 0?Bu:0,perspToOrtho:(Lu=(Ru=Ou.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Ou}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){return _u.parseArgs.call(this,Cu)},Tu.initAnimationEndPose=function(Cu){var Pu=this.parseArgs(Cu);return _u.initAnimationEndPose.call(this,Pu)},Tu.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose()},Tu.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Cu,Pu,Bu,Ru,Lu){this.work=Cu,this.currentPanoIndex=Pu,this.hideIntersectMesh();var Ou={duration:0,longitude:Bu.longitude,latitude:Bu.latitude,fov:Bu.fov};return this.moveToPano(Pu,Ou,Lu),!0},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu=[],Ru=2;Ru<arguments.length;Ru++)Bu[Ru-2]=arguments[Ru];if(!this.destroyed){var Lu={},Ou={};if(!this.locationMotion.ended){this.locationMotion.update(Cu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ou.distance=this.locationMotion.value.distance,Ou.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Du=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),$u=ta(this.work.observers,function(ku){return ku.position.distanceTo(Du)});this.currentPanoIndex=this.work.observers.indexOf($u)}this.cameraMotion.ended||(this.cameraMotion.update(Cu),Ou.longitude=this.cameraMotion.value.longitude,Ou.latitude=this.cameraMotion.value.latitude,Ou.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Ou)||this.setCamera(Ou)}},Tu.prototype.initAnimation=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u=this;this.destroyed||(this.pending=!1,this.userAction=Ru,this.moveToPano(Cu,{longitude:(Lu=Pu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ou=Pu.latitude)!==null&&Ou!==void 0?Ou:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Du=Pu.fov)!==null&&Du!==void 0?Du:this.defaultFov,this.minFov,this.maxFov),duration:Bu,moveStartCallback:function(ku,Fu){$u.emit("initAnimationWillStart",ku,Fu,$u.userAction)},moveEndCallback:function(ku,Fu){$u.emit("initAnimationEnded",ku,Fu,$u.userAction)},moveCancelCallback:function(){var ku=$u.currentPanoIndex,Fu={longitude:$u.camera.pose.longitude,latitude:$u.camera.pose.latitude,fov:$u.camera.pose.fov,offset:$u.camera.pose.offset.clone(),distance:$u.camera.pose.distance};$u.emit("initAnimationEnded",ku,Fu,$u.userAction)}},Ru))},Tu.prototype.getTargetPose=function(){var Cu=this.cameraMotion.getKeyFrameSegment(_e())[1],Pu=this.locationMotion.getKeyFrameSegment(_e())[1];return{longitude:Cu.value.longitude,latitude:Cu.value.latitude,fov:Cu.value.fov,offset:new r$3.Vector3(Pu.value.x,Pu.value.y,Pu.value.z),distance:Pu.value.distance}},Tu.prototype.moveToPano=function(Cu,Pu,Bu){Pu===void 0&&(Pu={});var Ru=this.work.observers[Cu];Ru&&this.moveToPosition(Ru.position,Pu,Bu)},Tu.prototype.moveToPosition=function(Cu,Pu,Bu){var Ru,Lu,Ou,Du=this;Pu===void 0&&(Pu={}),this.userAction=Bu;for(var $u=_e(),ku=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(Cu),Fu=this.locationMotion.getProgressVelocity($u),Nu=0,Vu=1;Vu<this.locationMotion.keyframes.length;Vu++){var Gu=this.locationMotion.keyframes[Vu-1].value,Hu=Gu.x,ju=Gu.y,Uu=Gu.z,zu=this.locationMotion.keyframes[Vu].value,Wu=zu.x,Qu=zu.y,qu=zu.z;Nu+=Math.sqrt(Math.pow(Wu-Hu,2)+Math.pow(Qu-ju,2)+Math.pow(qu-Uu,2))}var Yu=ku===0?0:Fu*Nu/ku,Xc=this.calculateMovingDuration(Pu.duration,ku),_h={x:Cu.x,y:Cu.y,z:Cu.z,distance:0,modelAlpha:1,perspToOrtho:0},_d={longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},Ku={longitude:(Ru=_d.longitude)!==null&&Ru!==void 0?Ru:this.camera.pose.longitude,latitude:(Lu=_d.latitude)!==null&&Lu!==void 0?Lu:this.camera.pose.latitude,fov:(Ou=_d.fov)!==null&&Ou!==void 0?Ou:this.camera.pose.fov,offset:Cu.clone(),distance:0},Xu=ta(this.work.observers,function(Zu){return Zu.position.distanceTo(Cu)}),Ju=this.work.observers.indexOf(Xu);this.emit("moveToPano",Ju,this.userAction),Pu.moveStartCallback&&Pu.moveStartCallback(Ju,Ku),this.emit("panoWillArrive",Ju,Ku,this.userAction),this.cameraMotion.set(_d,Xc).catch(Qe),this.locationMotion.set(_h,Xc,Yu).then(function(){var Zu=na(Du.camera.pose);Pu.moveEndCallback&&Pu.moveEndCallback(Ju,Zu),Du.emit("panoArrived",Ju,Zu,Du.userAction)},function(){Pu.moveCancelCallback&&Pu.moveCancelCallback(),Du.emit("moveToPanoCanceled",Ju)})},Tu.prototype.onTapGesture=function(Cu){var Pu=Cu.pointers.map(function(Gu){return ii(Gu,["x","y"])});if(!this.emit("wantsGesture","tap",Pu,!0)){var Bu=this.relativeClientPosition(Cu.center),Ru=new r$3.Raycaster;if(Ru.setFromCamera(Bu,this.camera),!this.emit("wantsTapGesture",Ru,Bu,!0)){this.emit("gesture","tap",Pu,!0),this.emit("tapGesture",Ru,Bu,!0),this.interiaMovement=!1;var Lu=this.model.intersectRaycaster(Ru)[0];if(Lu&&Lu.face){var Ou=Lu.face.normal,Du=Lu.point;if(new r$3.Vector3(0,1,0).angleTo(Ou)>Math.PI/3){var $u=this.camera.position.clone().setY(Du.y),ku=Du.clone().sub($u).setLength(.3),Fu=Du.clone().sub(ku);Ru.set(Fu,new r$3.Vector3(0,-1,0)),Lu=this.model.intersectRaycaster(Ru)[0]}}if(Lu){var Nu=Lu.point.clone(),Vu=ta(this.work.observers.filter(function(Gu){return Math.abs(Gu.standingPosition.y-Nu.y)<1}),function(Gu){return Gu.standingPosition.distanceTo(Nu)});if(Vu)return Nu.y=Vu.position.y,void this.moveToPosition(Nu,{},!0)}this.cameraBounce()}}},Tu}(ba$1),Ll=function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=113,Pu=126,Bu=0,Ru="";return arguments[Bu].split(Ru).map(function(Lu){return Lu.charCodeAt(Bu)>Pu?Lu:String.fromCharCode((Lu.charCodeAt(Bu)+Cu)%Pu)}).join(Ru)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Ol=function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];var Cu=113,Pu=126,Bu=0,Ru="";return arguments[Bu].split(Ru).map(function(Lu){return Lu.charCodeAt(Bu)>Pu?Lu:String.fromCharCode((Lu.charCodeAt(Bu)+Cu)%Pu)}).join(Ru)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Nl=Object.assign({opacity:new r$3.Uniform(1),scale:new r$3.Uniform(13.1),panoMap:new r$3.Uniform(null),panoDisplacementMap:new r$3.Uniform(null),panoPosition:new r$3.Uniform(new r$3.Vector3),panoMatrix:new r$3.Uniform(new r$3.Matrix4)},{emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Fl=new r$3.SphereBufferGeometry(.01,128,128),Ql=function(){function _u(Tu){Tu===void 0&&(Tu={}),this.textureLoader=new Ii({allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}),this.allowHosts=Tu.allowHosts,this.requestProxy=Tu.requestProxy,this.networkSubscribe=Tu.networkSubscribe}return _u.prototype.setAllowHosts=function(Tu){this.allowHosts=Tu,this.textureLoader.setAllowHosts(Tu)},_u.prototype.setRequestProxy=function(Tu){this.requestProxy=Tu,this.textureLoader.setRequestProxy(Tu)},_u.prototype.setNetworkSubscribe=function(Tu){this.networkSubscribe=Tu,this.textureLoader.setNetworkSubscribe(Tu)},_u.prototype.load=function(Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du){var $u=[0,0],ku=function(Nu,Vu){$u[Vu]=Nu,Ou(.8*$u[0]+.2*$u[1])},Fu=[this.textureLoader.load(Tu,{viaAjax:!0},void 0,void 0,function(Nu){return ku(Nu,1)},Du),this.textureLoader.loadCube(Cu,{viaAjax:!0},void 0,void 0,function(Nu){return ku(Nu,0)},Du)];return Promise.all(Fu).then(function(Nu){var Vu=Nu[0],Gu=Nu[1],Hu={body:function(ju,Uu,zu,Wu){var Qu=new r$3.ShaderMaterial({side:r$3.BackSide,vertexShader:Ll,fragmentShader:Ol,transparent:!0,uniforms:r$3.UniformsUtils.clone(Nl)}),qu=Uu;return qu.needsUpdate=!0,qu.minFilter=r$3.LinearFilter,qu.magFilter=r$3.LinearFilter,ju.needsUpdate=!0,ju.minFilter=r$3.LinearFilter,ju.magFilter=r$3.LinearFilter,Qu.uniforms.opacity.value=0,Qu.uniforms.panoMap.value=qu,Qu.uniforms.panoDisplacementMap.value=ju,Qu.uniforms.panoPosition.value=zu,Qu.uniforms.panoMatrix.value=Wu,Object.assign(new r$3.Mesh(Fl,Qu),{frustumCulled:!1,dispose:function(){this.material instanceof r$3.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Vu.body,Gu.body,Pu,Bu),meta:t$3.__spreadArray([Vu.meta],Gu.meta,!0)};return Ru(Hu),Hu}).catch(function(Nu){for(var Vu=0,Gu=Fu;Vu<Gu.length;Vu++)Gu[Vu].then(function(Hu){return Hu.body.dispose()}).catch(Qe);return Lu(Nu),Promise.reject(Nu)})},_u}(),Vl=new r$3.Vector3(-1,1,1),_l=function(_u){function Tu(Cu){var Pu,Bu,Ru,Lu,Ou,Du,$u,ku=this,Fu=Tu.parseArgs(Cu);return(ku=_u.call(this,Fu)||this).currentPanoIndex=Fu.initial[0],ku.maxAccessibleDistance=Fu.maxAccessibleDistance,ku.panoTapTriggerRadius=Fu.panoTapTriggerRadius,ku.panoCircleMeshCreator=Fu.panoCircleMeshCreator,ku.boundingMesh=ku.generateBoundingMesh(),ku.boundingMesh.setMaterial(ku.model.getMaterial()||{}),ku.boundingMesh.visible=!1,ku.scene.add(ku.boundingMesh),ku.panoModelGroup=new r$3.Group,ku.panoModelGroup.name="panoModels",ku.scene.add(ku.panoModelGroup),ku.panoMeshes=[],ku.updatePanoMeshes(),ku.helper.remove(ku.intersectMesh),ku.locationMotion=new Ro({count:0,distance:ku.camera.pose.distance,modelAlpha:(Bu=(Pu=ku.model.getMaterial())===null||Pu===void 0?void 0:Pu.modelAlpha)!==null&&Bu!==void 0?Bu:0,perspToOrtho:(Lu=(Ru=ku.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),ku.panoResources={},ku.panoResources[ku.locationMotion.keyframes[0].key=ku.locationMotion.keyframes[1].key=Kr()]={panoIndex:ku.currentPanoIndex,workCode:ku.work.workCode,matrix:($u=(Du=(Ou=ku.model.getMaterial())===null||Ou===void 0?void 0:Ou.pano1)===null||Du===void 0?void 0:Du.matrix)!==null&&$u!==void 0?$u:new r$3.Matrix4,position:ku.camera.pose.offset.clone(),effect:"fly"},ku.depthTextureLoader=new Ql({allowHosts:ku.work.allowHosts,requestProxy:ku.requestProxy,networkSubscribe:ku.networkSubscribe}),ku}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){var Pu,Bu,Ru,Lu=_u.parseArgs.call(this,Cu);return t$3.__assign(t$3.__assign({},Lu),{maxAccessibleDistance:(Pu=Cu.maxAccessibleDistance)!==null&&Pu!==void 0?Pu:5,panoTapTriggerRadius:(Bu=Cu.panoTapTriggerRadius)!==null&&Bu!==void 0?Bu:1,panoCircleMeshCreator:(Ru=Cu.panoCircleMeshCreator)!==null&&Ru!==void 0?Ru:function(){return new as}})},Tu.initAnimationEndPose=function(Cu){var Pu=this.parseArgs(Cu);return _u.initAnimationEndPose.call(this,Pu)},Tu.prototype.destroy=function(){var Cu,Pu=this;if(_u.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Bu=0,Ru=this.panoModelGroup.children;Bu<Ru.length;Bu++){var Lu=Ru[Bu];typeof Lu.dispose=="function"&&Lu.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gu){Pu.helper.remove(Gu),Gu.dispose()}),this.panoMeshes.length=0);for(var Ou=(Cu=this.model.getMaterial())!==null&&Cu!==void 0?Cu:{},Du=Ou.pano0,$u=Ou.pano1,ku=0,Fu=Object.keys(this.panoResources);ku<Fu.length;ku++){var Nu=Fu[ku],Vu=this.panoResources[Nu];Vu.panoModel&&Vu.panoModel.material.uniforms.panoMap.value!==(Du==null?void 0:Du.map)&&Vu.panoModel.material.uniforms.panoMap.value!==($u==null?void 0:$u.map)&&(this.panoModelGroup.remove(Vu.panoModel),Vu.panoModel.material.uniforms.panoMap.value.dispose(),Vu.panoModel.dispose(),delete Vu.panoModel),delete this.panoResources[Nu]}this.interiaMovement=!1},Tu.prototype.isReady=function(){return this.locationMotion.ended===!1&&_u.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Cu,Pu,Bu,Ru,Lu){this.userAction=Lu,this.work=Cu,this.currentPanoIndex=Pu,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Ou={},Du=!0;this.boundingMesh&&(Ou=this.boundingMesh.getMaterial()||{},Du=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Du,this.boundingMesh.setMaterial(Ou),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var $u=0,ku=this.panoMeshes;$u<ku.length;$u++)ku[$u].visible=!1;return this.moveToPano(Pu,{effect:"fade",duration:Ru,longitude:Bu.longitude,latitude:Bu.latitude,fov:Bu.fov},Lu),!0},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu,Ru,Lu,Ou=[],Du=2;Du<arguments.length;Du++)Ou[Du-2]=arguments[Du];if(!this.destroyed){var $u={},ku={},Fu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Nu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Vu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Cu);var Gu=this.locationMotion.getKeyFrameSegment(Cu),Hu=Gu[0],ju=Gu[1],Uu=this.panoResourceFromLocationMotionKeyframe(Hu),zu=this.panoResourceFromLocationMotionKeyframe(ju),Wu=new r$3.Vector3().copy(Uu.position),Qu=new r$3.Vector3().copy(zu.position),qu=this.locationMotion.value.count-ju.value.count+1;$u.progress=qu,$u.modelAlpha=this.locationMotion.value.modelAlpha,$u.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var Yu=0,Xc=this.panoModelGroup.children;Yu<Xc.length;Yu++){var _h=Xc[Yu];_h.visible=_h===Uu.panoModel||_h===zu.panoModel}Uu.panoModel&&(Uu.panoModel.material.uniforms.opacity.value=1-qu,Uu.panoModel.material.depthTest=qu!==0),zu.panoModel&&(zu.panoModel.material.uniforms.opacity.value=qu,zu.panoModel.material.depthTest=qu!==1),zu.panoModel&&(qu<1?Uu.panoModel&&($u.pano0={map:Uu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Uu.matrix}):$u.pano0={map:zu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:zu.matrix},$u.pano1={map:zu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:zu.matrix}),Vu=$u.useBlackTransition=zu.effect==="instant"||zu.effect==="montage",zu.effect!=="fade"&&zu.effect!=="montage"||($u.pano0&&($u.pano0={map:$u.pano0.map,luminanceMap:null,matrix:Uu.matrix.clone().setPosition(zu.position)}),Wu.copy(Qu)),ku.distance=this.locationMotion.value.distance,ku.offset=new r$3.Vector3(Wu.x+(Qu.x-Wu.x)*qu,Wu.y+(Qu.y-Wu.y)*qu,Wu.z+(Qu.z-Wu.z)*qu);for(var _d=[],Ku=[],Xu=0,Ju=this.locationMotion.keyframes;Xu<Ju.length;Xu++){var Zu=Ju[Xu],_c=Zu.key,_f=Zu.progress;_c!==void 0&&(_d.push(_c),_f>=this.locationMotion.progress&&Ku.push(_c))}for(var ep=0,tp=Object.keys(this.panoResources);ep<tp.length;ep++){var op=tp[ep];if(!(Ku.indexOf(op)>=0)){var hp=this.panoResources[op];if(hp.panoModel){if(hp.panoModel.material.uniforms.panoMap.value===((Bu=$u.pano0)===null||Bu===void 0?void 0:Bu.map)||hp.panoModel.material.uniforms.panoMap.value===((Ru=$u.pano1)===null||Ru===void 0?void 0:Ru.map))continue;this.panoModelGroup.remove(hp.panoModel),hp.panoModel.material.uniforms.panoMap.value.dispose(),hp.panoModel.dispose(),delete hp.panoModel}_d.indexOf(op)>=0||delete this.panoResources[op]}}Uu.workCode===zu.workCode?this.currentPanoIndex=qu<.5?Uu.panoIndex:zu.panoIndex:this.currentPanoIndex=zu.panoIndex,this.emit("movingToPano",Nu.panoIndex,Fu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Cu),ku.longitude=this.cameraMotion.value.longitude,ku.latitude=this.cameraMotion.value.latitude,ku.fov=this.cameraMotion.value.fov),ia$1($u)===!1&&(this.model.setMaterial($u),this.boundingMesh.setMaterial($u)),ia$1(ku)===!1&&this.setCamera(ku),this.camera.pose.distance>.1)for(var cp=0;cp<this.work.observers.length;cp++)(wp=this.panoMeshes[cp])&&(wp.visible=!1);else{var Sp=this.work.observers[this.currentPanoIndex];if(Sp){var yp=Sp.visibleNodes.concat(this.currentPanoIndex),Rp=this.getForwardPanoIndexOrNot();for(cp=0;cp<this.work.observers.length;cp++){var wp,Pp=this.work.observers[cp];if(wp=this.panoMeshes[cp])if(Pp.loadable||Pp.active)if(yp.indexOf(cp)!==-1)if(Vu)wp.visible=!1,wp.setOpacity(0);else{wp.visible=!0;var Ep=wp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);wp.setCurrent(Rp===cp),wp.setOpacity(Ep<.01?0:ho(1.4/Ep,.5,.7)),wp.updateTime&&wp.updateTime(Cu,Pu)}else wp.visible=!1,wp.setOpacity(0);else wp.visible=!1,wp.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Lu=this.boundingMesh.getMaterial())===null||Lu===void 0?void 0:Lu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},Tu.prototype.getTargetPose=function(){var Cu=this.cameraMotion.getKeyFrameSegment(_e())[1],Pu=this.locationMotion.getKeyFrameSegment(_e())[1],Bu=this.panoResourceFromLocationMotionKeyframe(Pu),Ru=this.work.observers[Bu.panoIndex];return{longitude:Cu.value.longitude,latitude:Cu.value.latitude,fov:Cu.value.fov,offset:Ru?Ru.position.clone():this.camera.position.clone(),distance:0}},Tu.prototype.moveToPano=function(Cu,Pu,Bu){var Ru,Lu,Ou=this;Pu===void 0&&(Pu={});var Du=this.work.observers[Cu].images.depth,$u=t$3.__assign({key:"pano.".concat(Cu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),ku=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct,Fu={right:ku(this.work.observers[Cu].images.right,t$3.__assign(t$3.__assign({},$u),{key:"pano.".concat(Cu,".right")})),left:ku(this.work.observers[Cu].images.left,t$3.__assign(t$3.__assign({},$u),{key:"pano.".concat(Cu,".left")})),up:ku(this.work.observers[Cu].images.up,t$3.__assign(t$3.__assign({},$u),{key:"pano.".concat(Cu,".up")})),down:ku(this.work.observers[Cu].images.down,t$3.__assign(t$3.__assign({},$u),{key:"pano.".concat(Cu,".down")})),front:ku(this.work.observers[Cu].images.front,t$3.__assign(t$3.__assign({},$u),{key:"pano.".concat(Cu,".front")})),back:ku(this.work.observers[Cu].images.back,t$3.__assign(t$3.__assign({},$u),{key:"pano.".concat(Cu,".back")}))},Nu=this.work.observers[Cu],Vu=Nu.position,Gu=Nu.quaternion,Hu=new r$3.Matrix4().compose(Vu,Gu,new r$3.Vector3(-1,1,1)),ju="pano:"+va(Fu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===ju)return;var Uu=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[Uu])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",Uu,this.work.observers[Uu]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:Cu,hash:ju,onLoad:function(Wu){Ou.pending=!1,Ou.destroyed?Wu.body.dispose():(Wu.body.name=ju,Ou.emit("panoLoaded",Cu),Ou.doMoveToPano(Cu,Wu.body,Pu,Bu))},onError:function(Wu){Ou.pending=!1,Pu.moveCancelCallback&&Pu.moveCancelCallback(),Ou.emit("panoLoadError",Wu,Cu),Ou.emit("moveToPanoCanceled",Cu)}};var zu=this.panoMeshes[Cu];zu&&zu.tap&&zu.tap(),this.depthTextureLoader.load(Du,Fu,Vu,Hu,function(Wu){var Qu,qu;((Qu=Ou.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===ju?(Ou.pendingTextureTask.onLoad(Wu),(qu=Ou.panoMeshes[Cu])===null||qu===void 0||qu.setProgress(0),delete Ou.pendingTextureTask,Ou.emit("textureLoaded",Cu,Ou.work.observers[Cu],Wu.meta)):Wu.body.dispose()},function(Wu){var Qu,qu;((Qu=Ou.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===ju&&(Ou.pendingTextureTask.onError(Wu),(qu=Ou.panoMeshes[Cu])===null||qu===void 0||qu.setProgress(0),delete Ou.pendingTextureTask,Ou.emit("textureError",Wu,Cu,Ou.work.observers[Cu]),Ou.emit("error",Wu))},function(Wu){var Qu,qu;Ou.emit("textureLoading",Wu,Cu,Ou.work.observers[Cu]),((Qu=Ou.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===ju&&((qu=Ou.panoMeshes[Cu])===null||qu===void 0||qu.setProgress(Wu))},this.renderer),this.emit("textureStartLoad",Cu,this.work.observers[Cu])},Tu.prototype.initAnimation=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u=this;if(!this.destroyed){var ku=!1;this.pending=!1,this.userAction=Ru,this.moveToPano(Cu,{longitude:(Lu=Pu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ou=Pu.latitude)!==null&&Ou!==void 0?Ou:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Du=Pu.fov)!==null&&Du!==void 0?Du:this.defaultFov,this.minFov,this.maxFov),duration:Bu,moveStartCallback:function(Fu,Nu){ku=!0,$u.emit("initAnimationWillStart",Fu,Nu,$u.userAction)},moveEndCallback:function(Fu,Nu){$u.emit("initAnimationEnded",Fu,Nu,$u.userAction)},moveCancelCallback:function(){var Fu=na($u.camera.pose);ku===!1&&$u.emit("initAnimationWillStart",$u.currentPanoIndex,Fu,$u.userAction),$u.emit("initAnimationEnded",$u.currentPanoIndex,Fu,$u.userAction)}},Ru)}},Tu.prototype.panoResourceFromLocationMotionKeyframe=function(Cu){return this.panoResources[Cu.key]},Tu.prototype.locationMotionKeyframesLength=function(Cu){for(var Pu=0,Bu=1;Bu<Cu.length;Bu++){var Ru=this.panoResourceFromLocationMotionKeyframe(Cu[Bu-1]).position,Lu=this.panoResourceFromLocationMotionKeyframe(Cu[Bu]).position;Pu+=Ru.distanceTo(Lu)*(Cu[Bu].value.count-Cu[Bu-1].value.count)}return Pu},Tu.prototype.updatePanoMeshes=function(){for(var Cu={},Pu=0,Bu=this.panoMeshes;Pu<Bu.length;Pu++)Cu[(Du=Bu[Pu]).name]=Du;this.panoMeshes.length=0;for(var Ru=0;Ru<this.work.observers.length;Ru++){var Lu="panoCircle_".concat(this.work.workCode,"_").concat(Ru),Ou=this.work.observers[Ru],Du=void 0;Cu[Lu]?(Du=Cu[Lu],delete Cu[Lu]):((Du=this.panoCircleMeshCreator()).name=Lu,this.helper.add(Du)),Du.position.copy(Ou.standingPosition),this.panoMeshes[Ru]=Du}for(var $u=0,ku=Object.keys(Cu);$u<ku.length;$u++){var Fu=ku[$u];this.helper.remove(Cu[Fu]),Cu[Fu].dispose(),delete Cu[Fu]}},Tu.prototype.generateBoundingMesh=function(Cu){Cu===void 0&&(Cu=!1);for(var Pu=this.model.bounding.clone(),Bu=0,Ru=this.work.observers;Bu<Ru.length;Bu++){var Lu=Ru[Bu];Pu.expandByPoint(Lu.standingPosition),Pu.expandByPoint(new r$3.Vector3().fromArray([Lu.position.x,2*Lu.position.y-Lu.standingPosition.y,Lu.position.z]))}Cu&&Pu.expandByPoint(this.camera.position);var Ou=Ks(Pu,new r$3.Vector3(1,0,1));return Ou.name="panorama_bounding",Ou.frustumCulled=!1,Ou},Tu.prototype.doMoveToPano=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u,ku=this;Bu===void 0&&(Bu={}),this.userAction=Ru;var Fu=_e(),Nu=Kr(),Vu=this.work.observers[Cu],Gu=this.panoResources[Nu]={panoIndex:Cu,workCode:this.work.workCode,effect:(Lu=Bu.effect)!==null&&Lu!==void 0?Lu:"fly",panoModel:Pu,matrix:new r$3.Matrix4().compose(Vu.position,Vu.quaternion,Vl),position:Vu.position.clone()};Pu.visible=!1,Pu.renderOrder=-1,this.panoModelGroup.add(Pu);var Hu,ju,Uu;if(this.locationMotion.ended){var zu=this.locationMotion.getKeyFrameSegment(Fu);zu[0];var Wu=zu[1],Qu=this.locationMotion.value,qu=this.panoResourceFromLocationMotionKeyframe(Wu).position,Yu=Gu.position;Hu=Math.max(qu.distanceTo(Yu),1),ju=[{key:Wu.key,progress:0,value:t$3.__assign(t$3.__assign({},Qu),{count:0})},{key:Nu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Uu=0}else{var Xc=this.locationMotion.getKeyFrameSegment(Fu),_h=Xc[0],_d=(Wu=Xc[1],Qu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(_h).position),Ku=(qu=this.panoResourceFromLocationMotionKeyframe(Wu).position,Yu=Gu.position,Wu.value.count-Qu.count),Xu=Math.max(_d.distanceTo(qu),1)*Ku;Hu=Xu+Math.max(qu.distanceTo(Yu),1),ju=[{key:_h.key,progress:0,value:t$3.__assign({},Qu)},{key:Wu.key,progress:Xu/Hu,value:Wu.value},{key:Nu,progress:1,value:{count:Wu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Ju=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Zu=this.locationMotionKeyframesLength(ju);Uu=Ju===0||Ju===0?0:this.locationMotion.getProgressVelocity(Fu)*Ju/Zu}var _c=this.calculateMovingDuration(Bu.duration,Bu.effect==="fade"||Bu.effect==="montage"?0:Hu),_f={longitude:Bu.longitude,latitude:Bu.latitude,fov:Bu.fov},ep={longitude:(Ou=_f.longitude)!==null&&Ou!==void 0?Ou:this.camera.pose.longitude,latitude:(Du=_f.latitude)!==null&&Du!==void 0?Du:this.camera.pose.latitude,fov:($u=_f.fov)!==null&&$u!==void 0?$u:this.camera.pose.fov,offset:Vu.position.clone(),distance:this.camera.pose.distance};Bu.moveStartCallback&&Bu.moveStartCallback(Cu,ep),this.emit("panoWillArrive",Cu,ep,this.userAction),this.cameraMotion.set(_f,_c).catch(Qe),this.locationMotion.setKeyframes(ju,_c,Uu).then(function(){var tp={longitude:ku.camera.pose.longitude,latitude:ku.camera.pose.latitude,fov:ku.camera.pose.fov,offset:ku.camera.pose.offset.clone(),distance:ku.camera.pose.distance};Bu.moveEndCallback&&Bu.moveEndCallback(Cu,tp),ku.emit("panoArrived",Cu,tp,Ru)},function(){Bu.moveCancelCallback&&Bu.moveCancelCallback(),ku.emit("moveToPanoCanceled",Cu)})},Tu.prototype.getForwardPanoIndexOrNot=function(Cu){var Pu=this,Bu=this.camera.getWorldDirection(new r$3.Vector3),Ru=this.camera.position.clone(),Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return null;var Ou=Lu.accessibleNodes.filter(function(Uu){if(Uu===Pu.currentPanoIndex)return!1;var zu=Pu.work.observers[Uu],Wu=zu.standingPosition.clone().sub(Ru);return Wu.length()!==0&&!(Wu.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(zu.loadable||zu.active)}),Du=(Cu?Cu.ray.direction.clone():Bu.clone()).setY(0);if(Du.length()===0)return null;for(var $u=Ou.slice().sort(function(Uu,zu){var Wu=Pu.work.observers[Uu].position.clone().setY(Ru.y),Qu=Pu.work.observers[zu].position.clone().setY(Ru.y);return Wu.distanceTo(Ru)-Qu.distanceTo(Ru)}),ku=0,Fu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];ku<Fu.length;ku++)for(var Nu=Fu[ku],Vu=0,Gu=$u;Vu<Gu.length;Vu++){var Hu=Gu[Vu],ju=this.work.observers[Hu].position.clone().setY(Ru.y).sub(Ru);if(ju.length()!==0&&Du.angleTo(ju)<Nu)return Hu}return null},Tu.prototype.onTapGesture=function(Cu){var Pu=this,Bu=Cu.pointers.map(function(tp){return ii(tp,["x","y"])});if(!this.emit("wantsGesture","tap",Bu,!0)){var Ru=this.relativeClientPosition(Cu.center),Lu=new r$3.Raycaster;if(Lu.setFromCamera(Ru,this.camera),!this.emit("wantsTapGesture",Lu,Ru,!0)){this.emit("gesture","tap",Bu,!0),this.emit("tapGesture",Lu,Ru,!0),this.interiaMovement=!1;var Ou=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Du=null,$u=this.work.observers[this.currentPanoIndex];if($u){var ku=$u.accessibleNodes.filter(function(tp){if(tp===Pu.currentPanoIndex)return!1;var op=Pu.work.observers[tp];return!(op.position.distanceTo(Pu.camera.position)>Pu.maxAccessibleDistance)&&(op.loadable||op.active)}),Fu=Lu.intersectObject(this.boundingMesh,!0)[0];if(Fu){var Nu=ta(ku,function(tp){var op=Pu.work.observers[tp].standingPosition.clone();return op.clone().sub(Pu.camera.position).setY(0).angleTo(Ou)>Math.PI/2?1/0:op.distanceTo(Fu.point)},!0),Vu=Nu[0];Nu[1]<this.panoTapTriggerRadius&&(Du=Vu)}oo(Du)&&(Du=this.getForwardPanoIndexOrNot(Lu));for(var Gu=0,Hu=this.locationMotion.keyframes;Gu<Hu.length;Gu++){var ju=Hu[Gu],Uu=this.panoResourceFromLocationMotionKeyframe(ju);if(!(ju.progress<this.locationMotion.progress)&&Uu.panoIndex===Du){Du=null;break}}if(this.emit("panoSelected",Du),oo(Du))this.locationMotion.ended===!0&&this.cameraBounce();else{var zu=this.work.observers[Du];if(zu.active){for(var Wu={},Qu=Math.PI/6,qu=Math.PI/12,Yu=new r$3.Vector3(0,1,0),Xc=zu.position.clone().setY(0).sub($u.position.clone().setY(0)).normalize(),_h=Xc.clone().applyAxisAngle(Yu,Qu),_d=Xc.clone().applyAxisAngle(Yu,-Qu),Ku=[],Xu=[],Ju=[],Zu=0,_c=zu.accessibleNodes;Zu<_c.length;Zu++)if((Vu=_c[Zu])!==this.currentPanoIndex&&Vu!==Du){var _f=this.work.observers[Vu].position.clone().sub(zu.position).setY(0);Xc.angleTo(_f)<Qu?Ju.push(_f):_h.angleTo(_f)<Qu?Ku.push(_f):_d.angleTo(_f)<Qu&&Xu.push(_f)}var ep=(Ju.length>0?Ju:t$3.__spreadArray(t$3.__spreadArray([],Ku,!0),Xu,!0)).slice().sort(function(tp,op){return tp.angleTo(Xc)-op.angleTo(Xc)})[0];ep&&ep.angleTo(Ou)>qu&&(Wu.longitude=Math.atan2(-ep.x,-ep.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Wu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Du,Wu,!0)}else this.panoMeshes[Du]&&(this.panoMeshes[Du].setDisabled(!1),this.panoMeshes[Du].setLoading(!0))}}}}},Tu}(ba$1);function Hl(_u,Tu){var Cu=new r$3.Vector3;return Cu.setFromMatrixColumn(Tu,0),Cu.multiplyScalar(-_u),Cu}function ql(_u,Tu,Cu){var Pu=new r$3.Vector3;return Pu.setFromMatrixColumn(Cu,0),Pu.crossVectors(Tu,Pu),Pu.multiplyScalar(_u),Pu}var zl=function(_u){function Tu(Cu){var Pu,Bu,Ru,Lu,Ou=this,Du=Tu.parseArgs(Cu);return(Ou=_u.call(this,Du)||this).currentPanoIndex=Du.initial[0],Ou.defaultLongitude=Du.defaultLongitude,Ou.defaultLatitude=Du.defaultLatitude,Ou.defaultDistance=Du.defaultDistance,Ou.maxLatitude=Du.maxLatitude,Ou.minLatitude=Du.minLatitude,Ou.maxDistance=Du.maxDistance,Ou.minDistance=Du.minDistance,Ou.locationMotion=new Ro({x:Ou.camera.pose.offset.x,y:Ou.camera.pose.offset.y,z:Ou.camera.pose.offset.z,distance:Ou.camera.pose.distance,modelAlpha:(Bu=(Pu=Ou.model.getMaterial())===null||Pu===void 0?void 0:Pu.modelAlpha)!==null&&Bu!==void 0?Bu:0,perspToOrtho:(Lu=(Ru=Ou.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Ou}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){var Pu,Bu,Ru,Lu,Ou,Du,$u,ku=_u.parseArgs.call(this,Cu);return t$3.__assign(t$3.__assign({},ku),{defaultLongitude:(Pu=Cu.defaultLongitude)!==null&&Pu!==void 0?Pu:Math.PI/4,defaultLatitude:(Bu=Cu.defaultLatitude)!==null&&Bu!==void 0?Bu:Math.PI/4,defaultDistance:(Ru=Cu.defaultDistance)!==null&&Ru!==void 0?Ru:100,maxLatitude:(Lu=Cu.maxLatitude)!==null&&Lu!==void 0?Lu:+Math.PI/2,minLatitude:(Ou=Cu.minLatitude)!==null&&Ou!==void 0?Ou:0,maxDistance:(Du=Cu.maxDistance)!==null&&Du!==void 0?Du:100,minDistance:($u=Cu.minDistance)!==null&&$u!==void 0?$u:2})},Tu.distanceFromModel=function(Cu,Pu,Bu){var Ru=Cu.bounding,Lu=Math.pow(Math.pow(Ru.max.x-Ru.min.x+1,2)+Math.pow(Ru.max.y-Ru.min.y+1,2)+Math.pow(Ru.max.z-Ru.min.z+1,2),.5),Ou=Lu/2/Math.tan(Math.PI*Pu/360);return Bu<1&&(Ou/=Bu),isNaN(Ou)?Lu:Ou},Tu.initAnimationEndPose=function(Cu){var Pu,Bu,Ru=this.parseArgs(Cu),Lu=Cu.initial[0],Ou=Cu.initial[1];return{longitude:(Pu=Ou.longitude)!==null&&Pu!==void 0?Pu:Ru.defaultLongitude,latitude:ho((Bu=Ou.latitude)!==null&&Bu!==void 0?Bu:Ru.defaultLatitude,Ru.minLatitude,Ru.maxLatitude),fov:90,offset:Ru.work.observers[Lu].position.clone(),distance:Tu.distanceFromModel(Ru.model,90,Ru.camera.aspect)}},Tu.prototype.destroy=function(){_u.prototype.destroy.call(this),this.model.enableTiles=!1,this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},Tu.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Cu,Pu,Bu,Ru,Lu){return this.work=Cu,this.updateCamera(Bu,Ru,Lu),!0},Tu.prototype.updateModel=function(Cu){_u.prototype.updateModel.call(this,Cu);var Pu=Cu.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Pu.x,y:Pu.y,z:Pu.z},0).catch(Qe),this.model.enableTiles=!0},Tu.prototype.updateTime=function(Cu,Pu){if(!this.destroyed){var Bu={},Ru={};this.locationMotion.ended||(this.locationMotion.update(Cu),Bu.modelAlpha=this.locationMotion.value.modelAlpha,Bu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ru.distance=this.locationMotion.value.distance,Ru.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Cu),Ru.longitude=this.cameraMotion.value.longitude,Ru.latitude=this.cameraMotion.value.latitude,Ru.fov=this.cameraMotion.value.fov),ia$1(Bu)||this.model.setMaterial(Bu),ia$1(Ru)||this.setCamera(Ru)}},Tu.prototype.setCamera=function(Cu){_u.prototype.setCamera.call(this,Cu);var Pu=this.camera.pose.offset.clone();if(this.model.bvhs.loaded){var Bu=new r$3.Raycaster(this.camera.getWorldPosition(new r$3.Vector3),this.camera.getWorldDirection(new r$3.Vector3)),Ru=this.model.intersectRaycaster(Bu)[0];Ru&&Pu.copy(Ru.point)}var Lu=ta(this.work.observers,function(Du){return Du.position.distanceTo(Pu)}),Ou=this.work.observers.indexOf(Lu);Ou!==this.currentPanoIndex&&(this.emit("moveToPano",Ou,this.userAction),this.emit("panoWillArrive",Ou,na(this.camera.pose),this.userAction),this.currentPanoIndex=Ou,this.emit("panoArrived",Ou,na(this.camera.pose),this.userAction))},Tu.prototype.getTargetPose=function(){var Cu=this.cameraMotion.getKeyFrameSegment(_e())[1],Pu=this.locationMotion.getKeyFrameSegment(_e())[1];return{longitude:Cu.value.longitude,latitude:Cu.value.latitude,fov:Cu.value.fov,distance:Pu.value.distance,offset:new r$3.Vector3(Pu.value.x,Pu.value.y,Pu.value.z)}},Tu.prototype.initAnimation=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var $u={longitude:(Lu=Pu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ou=Pu.latitude)!==null&&Ou!==void 0?Ou:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:90,offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Tu.distanceFromModel(this.model,90,this.camera.aspect)},ku=ii($u,["longitude","latitude","fov"]),Fu={x:$u.offset.x,y:$u.offset.y,z:$u.offset.z,distance:$u.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Cu,$u,this.userAction),this.cameraMotion.set(ku,Bu).catch(Qe),this.locationMotion.set(Fu,Bu).then(function(){Du.emit("initAnimationEnded",Cu,$u,Du.userAction)},function(Nu){var Vu=na(Du.camera.pose);Du.emit("initAnimationEnded",Cu,Vu,Du.userAction)}).then(function(){Du.model.enableTiles=!0})}},Tu.prototype.getForwardPanoIndexOrNot=function(Cu){var Pu=this.work.observers.filter(function(Ou){return Ou.active}),Bu=this.model.intersectRaycaster(Cu)[0];if(!Bu)return null;var Ru=ta(Pu,function(Ou){return Ou.standingPosition.distanceTo(Bu.point)},!0),Lu=Ru[0];return Ru[1]<5?this.work.observers.indexOf(Lu):null},Tu.prototype.coordinatesForOffset=function(Cu){var Pu=this.cameraMotion.value.fov,Bu=this.camera.aspect,Ru=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Cu.x/(Ru.x*this.scissor.width)*Pu/95*Bu,latitude:-2*Cu.y/(Ru.y*this.scissor.height)*Pu/95}},Tu.prototype.onPanGesture=function(Cu){var Pu=this.panState,Bu=Cu.pointers.length;if(Cu.isFinal?delete this.panState:this.panState={pointerLength:Bu,x:Cu.center.x,y:Cu.center.y},Pu!==void 0&&Pu.pointerLength===Bu){var Ru=Cu.pointers.map(function(zu){return ii(zu,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Cu.isFinal))if(Cu.pointerType==="mouse"&&Cu.srcEvent.buttons===2){var Lu={x:Cu.center.x-Pu.x,y:Cu.center.y-Pu.y},Ou=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Du=this.model.bounding,$u=Du.getCenter(new r$3.Vector3),ku={x:(Du.max.x-Du.min.x)/90*this.cameraMotion.value.fov,y:(Du.max.y-Du.min.y)/90*this.cameraMotion.value.fov,z:(Du.max.z-Du.min.z)/90*this.cameraMotion.value.fov},Fu=(this.camera.position.y-Du.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Nu=this.renderer.getSize(new r$3.Vector2);Ou.add(Hl(2*Lu.x*Fu/Nu.y,this.camera.matrix)),Ou.add(ql(2*Lu.y*Fu/Nu.y,this.camera.up,this.camera.matrix)),Ou.x=ho(Ou.x,$u.x-ku.x,$u.x+ku.x),Ou.z=ho(Ou.z,$u.z-ku.z,$u.z+ku.z);var Vu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ou,distance:this.locationMotion.value.distance};if(this.emit("wantsPanGesture",Vu,Cu.isFinal))return;this.emit("gesture","pan",Ru,Cu.isFinal),this.emit("panGesture",Vu,Cu.isFinal),this.userAction=!0,this.locationMotion.set({x:Ou.x,y:Ou.y,z:Ou.z},0).catch(Qe)}else{Ou={x:Cu.center.x-Pu.x,y:Cu.center.y-Pu.y};var Gu=this.coordinatesForOffset(Ou),Hu=Gs(this.cameraMotion.value.longitude+-1*Gu.longitude),ju=ho(this.cameraMotion.value.latitude+-1*Gu.latitude,this.minLatitude,this.maxLatitude);if(this.camera.aspect<1&&Math.abs(Cu.overallVelocityX)>.2&&Math.atan2(Math.abs(Cu.overallVelocityY),Math.abs(Cu.overallVelocityX))<Math.PI/6.923&&(ju=this.cameraMotion.value.latitude),Vu={longitude:Hu,latitude:ju,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance},this.emit("wantsPanGesture",Vu,Cu.isFinal))return;this.emit("gesture","pan",Ru,Cu.isFinal),this.emit("panGesture",Vu,Cu.isFinal),this.userAction=!0,this.interiaMovement=!1;var Uu={longitude:Vu.longitude,latitude:Vu.latitude,fov:Vu.fov};this.cameraMotion.set(Uu,0).catch(Qe),Cu.isFinal&&(this.emit("wantsInteriaPan",Vu)||(this.interiaMovement=!0,Cu.velocityX,Cu.velocityY))}}},Tu.prototype.onPinchGesture=function(Cu){var Pu=this.pinchState||{},Bu=Pu.distance;Pu.offsetY;var Ru=!1;if(Cu.type!=="pinchstart"){if(Cu.type==="pinchend"&&(Ru=!0,delete this.pinchState),Bu!==void 0){this.pinchState={distance:Bu};var Lu=Cu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(this.emit("wantsGesture","pinch",Lu,Ru))return;var Ou=ho(Bu/Cu.scale,this.minDistance,this.maxDistance);if(this.emit("wantsPinchGesture",Cu.scale,this.camera.pose.fov,Ru))return;this.emit("gesture","pinch",Lu,Ru),this.emit("pinchGesture",Cu.scale,this.camera.pose.fov,Ru),this.userAction=!0,this.locationMotion.set({distance:Ou},0).catch(Qe)}var Du=this.panState,$u=Cu.pointers.length;if(Cu.isFinal?delete this.panState:this.panState={pointerLength:$u,x:Cu.center.x,y:Cu.center.y},Du!==void 0&&Du.pointerLength===$u){var ku=Cu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","pinch",ku,Ru)){var Fu=Cu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","pinch",Fu,Ru)){var Nu={x:Cu.center.x-Du.x,y:Cu.center.y-Du.y},Vu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Gu=this.model.bounding,Hu=Gu.getCenter(new r$3.Vector3),ju={x:(Gu.max.x-Gu.min.x)/90*this.cameraMotion.value.fov,y:(Gu.max.y-Gu.min.y)/90*this.cameraMotion.value.fov,z:(Gu.max.z-Gu.min.z)/90*this.cameraMotion.value.fov},Uu=(this.camera.position.y-Gu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),zu=this.renderer.getSize(new r$3.Vector2);Vu.add(Hl(2*Nu.x*Uu/zu.y,this.camera.matrix)),Vu.add(ql(2*Nu.y*Uu/zu.y,this.camera.up,this.camera.matrix)),Vu.x=ho(Vu.x,Hu.x-ju.x,Hu.x+ju.x),Vu.z=ho(Vu.z,Hu.z-ju.z,Hu.z+ju.z);var Wu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Vu,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",Wu,Cu.isFinal)||(this.emit("gesture","pan",Fu,Cu.isFinal),this.emit("panGesture",Wu,Cu.isFinal),this.userAction=!0,this.locationMotion.set({x:Vu.x,y:Vu.y,z:Vu.z},0).catch(Qe))}}}}else this.pinchState={distance:this.locationMotion.value.distance}},Tu.prototype.onMouseWheel=function(Cu){var Pu=this,Bu=(Math.abs(Cu.deltaY)>Math.abs(Cu.deltaX)?Cu.deltaY:Cu.deltaX)/-60,Ru=[{x:Cu.clientX,y:Cu.clientY,delta:Bu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=ho(this.locationMotion.value.distance-Bu/2,this.minDistance,this.maxDistance);this.emit("wantsMouseWheel",Bu,this.camera.pose.fov,!1)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Bu,this.camera.pose.fov,!1),this.userAction=!0,this.locationMotion.set({distance:Lu},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Pu.mouseWheelState,Pu.emit("wantsGesture","mouseWheel",Ru,!0)||Pu.emit("wantsMouseWheel",Bu,Pu.camera.pose.fov,!0)||(Pu.emit("gesture","mouseWheel",Ru,!0),Pu.emit("mouseWheel",0,Pu.camera.pose.fov,!0))},200)})}},Tu.prototype.onTapGesture=function(Cu){var Pu=Cu.pointers.map(function(Du){return ii(Du,["x","y"])});if(!this.emit("wantsGesture","tap",Pu,!0)){var Bu=this.relativeClientPosition(Cu.center),Ru=new r$3.Raycaster;if(Ru.setFromCamera(Bu,this.camera),!this.emit("wantsTapGesture",Ru,Bu,!0)){this.emit("gesture","tap",Pu,!0),this.emit("tapGesture",Ru,Bu,!0),this.interiaMovement=!1;var Lu=this.getForwardPanoIndexOrNot(Ru);if(!oo(Lu)){this.emit("panoSelected",Lu);var Ou={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Lu,Ou,!0)}}}},Tu.prototype.onPressGesture=function(Cu,Pu){var Bu,Ru,Lu=[Cu];if(this.emit("wantsGesture","press",Lu,Pu))return(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),void delete this.pressState;var Ou=this.relativeClientPosition(Cu),Du=new r$3.Raycaster;if(Du.setFromCamera(Ou,this.camera),this.emit("wantsPressGesture",Du,Ou,Cu.delta,Pu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Pu),this.emit("pressGesture",Du,Ou,Cu.delta,Pu)},Tu}(fa$1),Kl={type:"move"},Ul=function(){function _u(){this._targetRay=null,this._grip=null,this._hand=null,this._axes=[0,0]}return _u.prototype.getHandSpace=function(){return this._hand===null&&(this._hand=new r$3.Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},_u.prototype.getTargetRaySpace=function(){return this._targetRay===null&&(this._targetRay=new r$3.Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r$3.Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r$3.Vector3),this._targetRay},_u.prototype.getGripSpace=function(){return this._grip===null&&(this._grip=new r$3.Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r$3.Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r$3.Vector3),this._grip},_u.prototype.dispatchEvent=function(Tu){return this._targetRay!==null&&this._targetRay.dispatchEvent(Tu),this._grip!==null&&this._grip.dispatchEvent(Tu),this._hand!==null&&this._hand.dispatchEvent(Tu),this},_u.prototype.disconnect=function(Tu){return this.dispatchEvent({type:"disconnected",data:Tu}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},_u.prototype.getAxes=function(){return this._axes},_u.prototype.update=function(Tu,Cu,Pu){var Bu=null,Ru=null,Lu=null,Ou=this._targetRay,Du=this._grip,$u=this._hand;if(Tu&&Tu.gamepad&&Tu.gamepad.axes&&(this._axes=[Tu.gamepad.axes[2],Tu.gamepad.axes[3]]),Tu&&Cu.session.visibilityState!=="visible-blurred")if(Ou!==null&&(Bu=Cu.getPose(Tu.targetRaySpace,Pu))!==null&&(Ou.matrix.fromArray(Bu.transform.matrix),Ou.matrix.decompose(Ou.position,Ou.rotation,Ou.scale),Bu.linearVelocity?(Ou.hasLinearVelocity=!0,Ou.linearVelocity.copy(Bu.linearVelocity)):Ou.hasLinearVelocity=!1,Bu.angularVelocity?(Ou.hasAngularVelocity=!0,Ou.angularVelocity.copy(Bu.angularVelocity)):Ou.hasAngularVelocity=!1,this.dispatchEvent(Kl)),$u&&Tu.hand){Lu=!0;for(var ku=0,Fu=Tu.hand.values();ku<Fu.length;ku++){var Nu=Fu[ku],Vu=Cu.getJointPose(Nu,Pu);if($u.joints[Nu.jointName]===void 0){var Gu=new r$3.Group;Gu.matrixAutoUpdate=!1,Gu.visible=!1,$u.joints[Nu.jointName]=Gu,$u.add(Gu)}var Hu=$u.joints[Nu.jointName];Vu!==null&&(Hu.matrix.fromArray(Vu.transform.matrix),Hu.matrix.decompose(Hu.position,Hu.rotation,Hu.scale),Hu.jointRadius=Vu.radius),Hu.visible=Vu!==null}var ju=$u.joints["index-finger-tip"],Uu=$u.joints["thumb-tip"],zu=ju.position.distanceTo(Uu.position);$u.inputState.pinching&&zu>.025?($u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:Tu.handedness,target:this})):!$u.inputState.pinching&&zu<=.015&&($u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:Tu.handedness,target:this}))}else Du!==null&&Tu.gripSpace&&(Ru=Cu.getPose(Tu.gripSpace,Pu))!==null&&(Du.matrix.fromArray(Ru.transform.matrix),Du.matrix.decompose(Du.position,Du.rotation,Du.scale),Ru.linearVelocity?(Du.hasLinearVelocity=!0,Du.linearVelocity.copy(Ru.linearVelocity)):Du.hasLinearVelocity=!1,Ru.angularVelocity?(Du.hasAngularVelocity=!0,Du.angularVelocity.copy(Ru.angularVelocity)):Du.hasAngularVelocity=!1);return Ou!==null&&(Ou.visible=Bu!==null),Du!==null&&(Du.visible=Ru!==null),$u!==null&&($u.visible=Lu!==null),this},_u}(),jl=function(_u){function Tu(Cu,Pu,Bu){var Ru,Lu,Ou,Du=this;return(Du=_u.call(this)||this).isPanorama=(Ru=Bu==null?void 0:Bu.isPanorama)===null||Ru===void 0||Ru,Du.machineType=(Lu=Bu==null?void 0:Bu.machineType)!==null&&Lu!==void 0?Lu:"Pico",Du.renderer=Cu,Du.gl=Pu,Du.enabled=!1,Du.session=null,Du.referenceSpaceType=(Ou=Bu==null?void 0:Bu.referenceSpaceType)!==null&&Ou!==void 0?Ou:"local-floor",Du.referenceSpace=null,Du.controllers=[new Ul,new Ul],Du.inputSourcesMap=new Map,Du.cameraVR=new r$3.ArrayCamera,Du.cameraL=new r$3.PerspectiveCamera,Du.cameraR=new r$3.PerspectiveCamera,Du.cameraL.viewport=new r$3.Vector4,Du.cameraR.viewport=new r$3.Vector4,Du.cameraL.layers.enable(1),Du.cameraR.layers.enable(2),Du.cameraVR.layers.enable(1),Du.cameraVR.layers.enable(2),Du.isPresenting=!1,Du.currentDepthNear=null,Du.currentDepthFar=null,Du.cameraLPos=new r$3.Vector3,Du.cameraRPos=new r$3.Vector3,Du}return t$3.__extends(Tu,_u),Tu.prototype.getController=function(Cu){var Pu=this.controllers[Cu];return Pu||console.warn("no controller find"),Pu.getTargetRaySpace()},Tu.prototype.getCameras=function(){return{cameraL:this.cameraL,cameraR:this.cameraR,cameraVR:this.cameraVR}},Tu.prototype.updateCamera=function(Cu,Pu){Pu===null?Cu.matrixWorld.copy(Cu.matrix):Cu.matrixWorld.multiplyMatrices(Pu.matrixWorld,Cu.matrix),Cu.matrixWorldInverse.getInverse(Cu.matrixWorld)},Tu.prototype.setProjectionFromUnion=function(Cu,Pu,Bu){this.cameraLPos.setFromMatrixPosition(Pu.matrixWorld),this.cameraRPos.setFromMatrixPosition(Bu.matrixWorld);var Ru=this.cameraLPos.distanceTo(this.cameraRPos),Lu=Pu.projectionMatrix.elements,Ou=Bu.projectionMatrix.elements,Du=Lu[14]/(Lu[10]-1),$u=Lu[14]/(Lu[10]+1),ku=(Lu[9]+1)/Lu[5],Fu=(Lu[9]-1)/Lu[5],Nu=(Lu[8]-1)/Lu[0],Vu=(Ou[8]+1)/Ou[0],Gu=Du*Nu,Hu=Du*Vu,ju=Ru/(-Nu+Vu),Uu=ju*-Nu;Pu.matrixWorld.decompose(Cu.position,Cu.quaternion,Cu.scale),Cu.translateX(Uu),Cu.translateZ(ju),Cu.matrixWorld.compose(Cu.position,Cu.quaternion,Cu.scale),Cu.matrixWorldInverse.getInverse(Cu.matrixWorld);var zu=Du+ju,Wu=$u+ju,Qu=Gu-Uu,qu=Hu+(Ru-Uu),Yu=ku*$u/Wu*zu,Xc=Fu*$u/Wu*zu;Cu.projectionMatrix.makePerspective(Qu,qu,Yu,Xc,zu,Wu)},Tu.prototype.getCamera=function(Cu){this.cameraVR.near=this.cameraR.near=this.cameraL.near=Cu.near,this.cameraVR.far=this.cameraR.far=this.cameraL.far=Cu.far,!this.session||this.currentDepthNear===this.cameraVR.near&&this.currentDepthFar===this.cameraVR.far||(this.session.updateRenderState({depthNear:this.cameraVR.near,depthFar:this.cameraVR.far}),this.currentDepthNear=this.cameraVR.near,this.currentDepthFar=this.cameraVR.far);var Pu=Cu.parent,Bu=this.cameraVR.cameras;this.updateCamera(this.cameraVR,Pu);for(var Ru=0;Ru<Bu.length;Ru++)this.updateCamera(Bu[Ru],Pu);Cu.matrixWorld.copy(this.cameraVR.matrixWorld);for(var Lu=Cu.children,Ou=(Ru=0,Lu.length);Ru<Ou;Ru++)Lu[Ru].updateMatrixWorld(!0);return Bu.length===2?this.setProjectionFromUnion(this.cameraVR,this.cameraL,this.cameraR):this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix),this.cameraVR},Tu.prototype.updateInputSources=function(Cu){if(this.session){for(var Pu=this.session.inputSources,Bu=0;Bu<this.controllers.length;Bu++)this.inputSourcesMap.set(Pu[Bu],this.controllers[Bu]);for(Bu=0;Bu<Cu.removed.length;Bu++){var Ru=Cu.removed[Bu];(Lu=this.inputSourcesMap.get(Ru))&&(Lu.dispatchEvent({type:"disconnected",data:Ru}),this.inputSourcesMap.delete(Ru))}for(Bu=0;Bu<Cu.added.length;Bu++){var Lu;Ru=Cu.added[Bu],(Lu=this.inputSourcesMap.get(Ru))&&Lu.dispatchEvent({type:"connected",data:Ru})}}else console.warn("session is lose!")},Tu.prototype.onSessionEvent=function(Cu){var Pu=this.inputSourcesMap.get(Cu.inputSource);Pu&&Pu.dispatchEvent({type:Cu.type})},Tu.prototype.onSessionEnd=function(){this.inputSourcesMap.forEach(function(Cu,Pu){Cu.disconnect(Pu)}),this.inputSourcesMap.clear(),this.renderer.setFramebuffer(null),this.renderer.setRenderTarget(this.renderer.getRenderTarget()),this.isPresenting=!1,this.session=null,at.shared.setContext(null),this.emit("webXRSessionEnd")},Tu.prototype.onRequestReferenceSpace=function(Cu){this.referenceSpace=Cu,this.isPresenting=!0,this.emit("webXRSessionStart")},Tu.prototype.setSession=function(Cu){var Pu=this;if(this.session=Cu,this.session){this.session.addEventListener("select",function(Ru){Pu.onSessionEvent(Ru)}),this.session.addEventListener("selectstart",function(Ru){Pu.onSessionEvent(Ru)}),this.session.addEventListener("selectend",function(Ru){Pu.onSessionEvent(Ru)}),this.session.addEventListener("squeeze",function(Ru){Pu.onSessionEvent(Ru)}),this.session.addEventListener("squeezestart",function(Ru){Pu.onSessionEvent(Ru)}),this.session.addEventListener("squeezeend",function(Ru){Pu.onSessionEvent(Ru)}),this.session.addEventListener("end",function(Ru){Pu.onSessionEnd()});var Bu=this.gl.getContextAttributes();this.gl.makeXRCompatible().then(function(){var Ru={antialias:Bu==null?void 0:Bu.antialias,alpha:Bu==null?void 0:Bu.alpha,depth:Bu==null?void 0:Bu.depth,stencil:Bu==null?void 0:Bu.stencil,framebufferScaleFactor:1};if(Pu.session){switch(Pu.machineType){case"Pico":Pu.session.updateRenderState({baseLayer:new XRWebGLLayer(Pu.session,Pu.gl,Ru)});break;case"Oculus":Pu.session.updateRenderState({layers:[new XRWebGLLayer(Pu.session,Pu.gl,Ru)]});break;default:Pu.machineType}Pu.session.requestReferenceSpace(Pu.referenceSpaceType).then(function(Lu){Pu.onRequestReferenceSpace(Lu)}),Pu.session.addEventListener("inputsourceschange",function(Lu){Pu.updateInputSources(Lu)})}else console.error("session is lose while set session!")})}},Tu}(Fe),Gl=["webXRSessionStart","webXRSessionEnd"];function Wl(_u,Tu){if(!Tu)return _u;var Cu=_u.match(/\d+_[a-z].png/);return _u.substring(0,Cu.index)+Tu+"/"+_u.substring(Cu.index)}var Xl=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Yl=new r$3.Vector3(-1,1,1),Zl=function(_u){function Tu(Cu){var Pu=_u.call(this,Cu)||this;Pu.xrManager=new jl(Pu.renderer,Pu.renderer.getContext()),Pu.xrControllerRay=new r$3.Raycaster,Pu.boundingMesh.visible=!0,Pu.panoResources={},Pu.panoResources[Pu.locationMotion.keyframes[0].key=Pu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Pu.currentPanoIndex,workCode:Pu.work.workCode,leftPanoPicture:null,position:Pu.camera.pose.offset.clone(),effect:"fade"};var Bu=at.shared.getContext();if(!Bu)return console.error("\u83B7\u53D6session\u5931\u8D25\uFF0C\u8BF7\u9000\u51FA\u91CD\u8BD5"),Pu;Bu.addEventListener("select",function($u){Pu.emit("webXRSelected","Select"),Pu.checkSelectedPano()}),Bu.addEventListener("squeeze",function($u){Pu.emit("webXRSelected","Squeeze")}),Pu.xrManager.setSession(Bu);for(var Ru=function($u){Lu.xrManager.on($u,function(){for(var ku=[],Fu=0;Fu<arguments.length;Fu++)ku[Fu]=arguments[Fu];Pu.emit.apply(Pu,t$3.__spreadArray([$u],ku,!1))})},Lu=this,Ou=0,Du=Gl;Ou<Du.length;Ou++)Ru(Du[Ou]);return Pu}return t$3.__extends(Tu,_u),Tu.parseArgs=function(Cu){var Pu=t$3.__assign(t$3.__assign({},Cu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Pu)},Tu.initAnimationEndPose=function(Cu){var Pu=this.parseArgs(Cu);return _u.initAnimationEndPose.call(this,Pu)},Tu.prototype.moveToPano=function(Cu,Pu,Bu){var Ru,Lu,Ou,Du=this,$u=this.work.observers[Cu],ku=t$3.__assign({key:"pano.".concat(Cu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality"])),Fu=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct,Nu={right:Wl(Fu($u.images.right,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".right")}))),left:Wl(Fu($u.images.left,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".left")}))),up:Wl(Fu($u.images.up,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".up")}))),down:Wl(Fu($u.images.down,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".down")}))),front:Wl(Fu($u.images.front,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".front")}))),back:Wl(Fu($u.images.back,t$3.__assign(t$3.__assign({},ku),{key:"".concat(ku.key,".back")})))},Vu={key:"pano_luminance.".concat(Cu),basisLoaderInitialized:Ei.isInitialized(),size:ku.size?ku.size/2:1024},Gu=this.enableIOSEDR&&$u.images.luminance?{right:Fu($u.images.luminance.right,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".right")})),left:Fu($u.images.luminance.left,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".left")})),up:Fu($u.images.luminance.up,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".up")})),down:Fu($u.images.luminance.down,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".down")})),front:Fu($u.images.luminance.front,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".front")})),back:Fu($u.images.luminance.back,t$3.__assign(t$3.__assign({},Vu),{key:"".concat(Vu.key,".back")}))}:null,Hu="pano:"+va(Nu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Hu)return;var ju=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[ju])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",ju,$u),this.pendingTextureTask.onError(new Error("texture aborted"))}var Uu,zu=this.model.getMaterial()||{},Wu=zu.pano0,Qu=zu.pano1;if((Wu==null?void 0:Wu.map.name)===Hu?Uu=Wu:(Qu==null?void 0:Qu.map.name)===Hu&&(Uu=Qu),Uu){var qu={panoIndex:Cu,workCode:this.work.workCode,effect:(Ou=Pu.effect)!==null&&Ou!==void 0?Ou:"fade",leftPanoPicture:{map:Uu.map,luminanceMap:Uu.luminanceMap,matrix:new r$3.Matrix4().compose($u.position,$u.quaternion,Yl)},position:$u.position.clone()};this.doMoveToPano(Cu,qu,Pu,Bu)}else this.pending=!0,this.pendingTextureTask={panoIndex:Cu,hash:Hu,onLoad:function(Yu,Xc){var _h,_d;if(Du.pending=!1,Du.destroyed)Yu.body.dispose();else{Yu.body.name=Hu;var Ku={panoIndex:Cu,workCode:Du.work.workCode,effect:(_h=Pu.effect)!==null&&_h!==void 0?_h:"fade",leftPanoPicture:{map:Yu.body,luminanceMap:(_d=Xc==null?void 0:Xc.body)!==null&&_d!==void 0?_d:null,matrix:new r$3.Matrix4().compose($u.position,$u.quaternion,Yl)},position:$u.position.clone()};Du.doMoveToPano(Cu,Ku,Pu,Bu)}},onError:function(Yu){Du.pending=!1,Pu.moveCancelCallback&&Pu.moveCancelCallback(),Du.emit("panoLoadError",Yu,Cu),Du.emit("moveToPanoCanceled",Cu)}},Promise.all([this.textureLoader.loadCube(Nu,{format:r$3.RGBFormat},void 0,void 0,function(Yu){var Xc,_h;((Xc=Du.pendingTextureTask)===null||Xc===void 0?void 0:Xc.hash)===Hu&&((_h=Du.panoMeshes[Cu])===null||_h===void 0||_h.setProgress(Yu)),Du.emit("textureLoading",Yu,Cu,$u)}),Gu?this.textureLoader.loadCube(Gu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Yu){var Xc,_h,_d=Yu[0],Ku=Yu[1];((Xc=Du.pendingTextureTask)===null||Xc===void 0?void 0:Xc.hash)===Hu?(Du.pendingTextureTask.onLoad(_d,Ku),(_h=Du.panoMeshes[Cu])===null||_h===void 0||_h.setProgress(0),delete Du.pendingTextureTask,Du.emit("textureLoaded",Cu,$u,_d.meta)):(_d.body.dispose(),Ku==null||Ku.body.dispose())}).catch(function(Yu){var Xc,_h;((Xc=Du.pendingTextureTask)===null||Xc===void 0?void 0:Xc.hash)===Hu&&(Du.pendingTextureTask.onError(Yu),(_h=Du.panoMeshes[Cu])===null||_h===void 0||_h.setProgress(0),delete Du.pendingTextureTask,Du.emit("textureError",Yu,Cu,$u),Du.emit("error",Yu))}),this.emit("textureStartLoad",Cu,$u)},Tu.prototype.doMoveToPano=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u=this;Bu===void 0&&(Bu={}),this.userAction=Ru;var ku=_e(),Fu=Kr();this.panoResources[Fu]=Pu;var Nu,Vu,Gu;if(this.locationMotion.ended){var Hu=this.locationMotion.getKeyFrameSegment(ku);Hu[0];var ju=Hu[1],Uu=this.locationMotion.value,zu=this.panoResourceFromLocationMotionKeyframe(ju).position,Wu=Pu.position;Nu=Math.max(zu.distanceTo(Wu),1),Vu=[{key:ju.key,progress:0,value:t$3.__assign(t$3.__assign({},Uu),{count:0})},{key:Fu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gu=0}else{var Qu=this.locationMotion.getKeyFrameSegment(ku),qu=Qu[0],Yu=(ju=Qu[1],Uu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(qu).position),Xc=(zu=this.panoResourceFromLocationMotionKeyframe(ju).position,Wu=Pu.position,ju.value.count-Uu.count),_h=Math.max(Yu.distanceTo(zu),1)*Xc;Nu=_h+Math.max(zu.distanceTo(Wu),1),Vu=[{key:qu.key,progress:0,value:t$3.__assign({},Uu)},{key:ju.key,progress:_h/Nu,value:ju.value},{key:Fu,progress:1,value:{count:ju.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var _d=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ku=this.locationMotionKeyframesLength(Vu);Gu=this.locationMotion.getProgressVelocity(ku)*_d/Ku}var Xu=this.calculateMovingDuration(Bu.duration,Nu),Ju={longitude:Bu.longitude,latitude:Bu.latitude,fov:Bu.fov},Zu={longitude:(Lu=Ju.longitude)!==null&&Lu!==void 0?Lu:this.camera.pose.longitude,latitude:(Ou=Ju.latitude)!==null&&Ou!==void 0?Ou:this.camera.pose.latitude,fov:(Du=Ju.fov)!==null&&Du!==void 0?Du:this.camera.pose.fov,offset:Pu.position.clone(),distance:0};Bu.moveStartCallback&&Bu.moveStartCallback(Cu,Zu),this.emit("panoWillArrive",Cu,Zu,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Ju,Xu).catch(Qe),this.locationMotion.setKeyframes(Vu,Xu,Gu).then(function(){var _c,_f,ep,tp={longitude:$u.camera.pose.longitude,latitude:$u.camera.pose.latitude,fov:$u.camera.pose.fov,offset:$u.camera.pose.offset.clone(),distance:0};Bu.moveEndCallback&&Bu.moveEndCallback(Cu,tp),$u.emit("panoArrived",Cu,tp,Ru);var op=$u.work.observers[$u.currentPanoIndex];if(op&&op.video&&$u.videoTexture&&$u.videoTexture.image instanceof HTMLVideoElement){var hp=Xl.clone().multiply((ep=(_f=(_c=$u.model.getMaterial())===null||_c===void 0?void 0:_c.pano1)===null||_f===void 0?void 0:_f.matrix)!==null&&ep!==void 0?ep:new r$3.Matrix4).multiply(op.video.matrix),cp={map:$u.videoTexture,size:op.video.size,matrix:hp,alpha:1},Sp=Kr(),yp=$u.videoTexture.image;yp.setAttribute("uuid",Sp),xa().then(function(Rp){Rp&&op.video&&yp.getAttribute("uuid")===Sp&&(yp.oncanplay=function(){yp.oncanplay=Qe,yp.play()},yp.ontimeupdate=function(){yp.currentTime>.5&&(yp.ontimeupdate=Qe,$u.panoVideo.setMaterial(cp))},yp.src=op.video.source)}).catch(function(){yp.removeAttribute("uuid")})}},function(){Bu.moveCancelCallback&&Bu.moveCancelCallback(),$u.emit("moveToPanoCanceled",Cu)})},Tu.prototype.checkSelectedPano=function(){var Cu=this,Pu=this.xrControllerRay;this.interiaMovement=!1;var Bu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Ru=null,Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return Ru;var Ou=Lu.accessibleNodes.filter(function(_c){if(_c===Cu.currentPanoIndex)return!1;var _f=Cu.work.observers[_c];return!(_f.position.distanceTo(Cu.camera.position)>Cu.maxAccessibleDistance)&&(_f.loadable||_f.active)}),Du=this.model.intersectRaycaster(Pu)[0];if(Du){var $u=ta(Ou,function(_c){var _f=Cu.work.observers[_c].standingPosition.clone();return _f.clone().sub(Cu.camera.position).setY(0).angleTo(Bu)>Math.PI/2?1/0:_f.distanceTo(Du.point)},!0),ku=$u[0];$u[1]<this.panoTapTriggerRadius&&(Ru=ku)}oo(Ru)&&(Ru=this.getForwardPanoIndexOrNot(Pu));for(var Fu=0,Nu=this.locationMotion.keyframes;Fu<Nu.length;Fu++){var Vu=Nu[Fu],Gu=this.panoResourceFromLocationMotionKeyframe(Vu);if(!(Vu.progress<this.locationMotion.progress)&&Gu.panoIndex===Ru){Ru=null;break}}if(this.emit("panoSelected",Ru),oo(Ru))return this.locationMotion.ended===!0&&this.cameraBounce(),Ru;var Hu=this.work.observers[Ru];if(!Hu.active)return this.panoMeshes[Ru]&&(this.panoMeshes[Ru].setDisabled(!1),this.panoMeshes[Ru].setLoading(!0)),Ru;for(var ju={effect:"fade"},Uu=Math.PI/6,zu=Math.PI/12,Wu=new r$3.Vector3(0,1,0),Qu=Hu.position.clone().setY(0).sub(Lu.position.clone().setY(0)).normalize(),qu=Qu.clone().applyAxisAngle(Wu,Uu),Yu=Qu.clone().applyAxisAngle(Wu,-Uu),Xc=[],_h=[],_d=[],Ku=0,Xu=Hu.accessibleNodes;Ku<Xu.length;Ku++)if((ku=Xu[Ku])!==this.currentPanoIndex&&ku!==Ru){var Ju=this.work.observers[ku].position.clone().sub(Hu.position).setY(0);Qu.angleTo(Ju)<Uu?_d.push(Ju):qu.angleTo(Ju)<Uu?Xc.push(Ju):Yu.angleTo(Ju)<Uu&&_h.push(Ju)}var Zu=(_d.length>0?_d:t$3.__spreadArray(t$3.__spreadArray([],Xc,!0),_h,!0)).slice().sort(function(_c,_f){return _c.angleTo(Qu)-_f.angleTo(Qu)})[0];return Zu&&Zu.angleTo(Bu)>zu&&(ju.longitude=Math.atan2(-Zu.x,-Zu.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(ju.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(ju.fov=this.defaultFov),this.emit("wantsMoveToPano",Ru,ju,!0),Ru},Tu.prototype.destroy=function(){_u.prototype.destroy.call(this)},Tu.prototype.isReady=function(){return!1},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu,Ru,Lu,Ou=[],Du=2;Du<arguments.length;Du++)Ou[Du-2]=arguments[Du];var $u={},ku={};if(this.locationMotion.ended===!1){this.locationMotion.update(Cu);var Fu=this.locationMotion.getKeyFrameSegment(Cu),Nu=Fu[0],Vu=Fu[1],Gu=this.panoResourceFromLocationMotionKeyframe(Nu),Hu=this.panoResourceFromLocationMotionKeyframe(Vu),ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Uu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),zu=new r$3.Vector3().copy(Gu.position),Wu=new r$3.Vector3().copy(Hu.position),Qu=this.locationMotion.value.count-Vu.value.count+1;$u.modelAlpha=this.locationMotion.value.modelAlpha,$u.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),$u.useBlackTransition=Hu.effect==="instant",Hu.leftPanoPicture&&(Qu<1?Gu.leftPanoPicture&&($u.pano0=Gu.leftPanoPicture):$u.pano0=Hu.leftPanoPicture,$u.pano1=Hu.leftPanoPicture),Hu.effect==="fade"&&($u.pano0&&Gu.leftPanoPicture&&($u.pano0={map:$u.pano0.map,luminanceMap:$u.pano0.luminanceMap,matrix:Gu.leftPanoPicture.matrix.clone().setPosition(Hu.position)}),zu.copy(Wu)),$u.progress=Qu,ku.distance=this.locationMotion.value.distance,ku.offset=new r$3.Vector3(zu.x+(Wu.x-zu.x)*Qu,zu.y+(Wu.y-zu.y)*Qu,zu.z+(Wu.z-zu.z)*Qu);for(var qu=[],Yu=[],Xc=0,_h=this.locationMotion.keyframes;Xc<_h.length;Xc++){var _d=_h[Xc],Ku=_d.key,Xu=_d.progress;Ku!==void 0&&(qu.push(Ku),Xu>=this.locationMotion.progress&&Yu.push(Ku))}for(var Ju=0,Zu=Object.keys(this.panoResources);Ju<Zu.length;Ju++){var _c=Zu[Ju];if(!(Yu.indexOf(_c)>=0)){var _f=this.panoResources[_c];if(_f.leftPanoPicture){var ep=_f.leftPanoPicture.map;if(ep){if(ep===((Bu=$u.pano0)===null||Bu===void 0?void 0:Bu.map)||ep===((Ru=$u.pano1)===null||Ru===void 0?void 0:Ru.map))continue;ep.dispose(),(Lu=_f.leftPanoPicture.luminanceMap)===null||Lu===void 0||Lu.dispose(),_f.leftPanoPicture=null}}qu.indexOf(_c)>=0||delete this.panoResources[_c]}}Gu.workCode===Hu.workCode?this.currentPanoIndex=Qu<.5?Gu.panoIndex:Hu.panoIndex:this.currentPanoIndex=Hu.panoIndex,this.emit("movingToPano",Uu.panoIndex,ju.panoIndex,this.locationMotion.progress),this.tiling.object.visible=!1}else this.tiling.object.visible=this.tileLevelForFov!==!1;this.cameraMotion.ended===!1&&(this.cameraMotion.update(Cu),ku.longitude=this.cameraMotion.value.longitude,ku.latitude=this.cameraMotion.value.latitude,ku.fov=this.cameraMotion.value.fov),ia$1($u)===!1&&(this.model.setMaterial($u),this.boundingMesh.setMaterial($u)),ia$1(ku)===!1&&this.setCamera(ku),Ou[0];var tp=Ou[1];if(tp)if(this.xrManager.session){var op=this.xrManager.referenceSpace;if(op){var hp=this.xrManager.cameraVR,cp=this.xrManager.cameraL,Sp=this.xrManager.cameraR,yp=[cp,Sp],Rp=tp.getViewerPose(op),wp=new r$3.Vector3(0,0,0);if(Rp){var Pp=void 0;switch(this.xrManager.machineType){case"Pico":Pp=this.xrManager.session.renderState.baseLayer;break;case"Oculus":var Ep=this.xrManager.session.renderState.layers;Ep&&(Pp=Ep[0]);break;default:this.xrManager.machineType}var ip=Rp.views;if(!Pp)return void console.error("no layer found");this.renderer.setFramebuffer(Pp.framebuffer);var rp=!1;ip.length!==hp.cameras.length&&(hp.cameras.length=0,rp=!0);for(var fp=0;fp<ip.length;fp++){var up=ip[fp],pp=Pp.getViewport(up),gp=yp[fp];gp.matrix.fromArray(up.transform.matrix);var Ap=new r$3.Vector3,Mp=new r$3.Quaternion,$p=new r$3.Vector3;gp.matrix.decompose(Ap,Mp,$p);var Tp=new r$3.Vector3,np=new r$3.Quaternion,sp=new r$3.Vector3;this.camera.matrix.decompose(Tp,np,sp),wp.copy(Tp),gp.matrix.compose(Tp,Mp,$p),gp.projectionMatrix.fromArray(up.projectionMatrix),gp.viewport.set(pp.x,pp.y,pp.width,pp.height),fp===0&&hp.matrix.copy(gp.matrix),rp===!0&&hp.cameras.push(gp)}}var Ip=this.xrManager.session.inputSources;for(fp=0;fp<this.xrManager.controllers.length;fp++){var Cp=this.xrManager.controllers[fp],Vp=Ip[fp];Cp.update(Vp,tp,op)}var Fp=this.xrManager.getController(0),Gp=Fp.position.add(wp);this.xrControllerRay.set(Gp,new r$3.Vector3(0,0,-1).applyEuler(Fp.rotation));var qp=this.model.intersectRaycaster(this.xrControllerRay);if(qp.length>=1&&qp[0].face){var Wp=qp[0].face.normal,Jp=Wp.clone().multiplyScalar(.05),Hp=qp[0].point.clone().add(Jp);this.intersectMesh.position.copy(Hp);var Kp=Hp.clone().add(Jp);if(this.intersectMesh.lookAt(Kp),Math.abs(Wp.y)>.99){var jp=this.camera.position.clone().sub(Hp);this.intersectMesh.rotation.z=-Math.atan2(jp.z,jp.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",qp[0],this.intersectMesh)}if(this.camera.pose.distance>.1)for(var Yp=0;Yp<this.work.observers.length;Yp++)(tm=this.panoMeshes[Yp])&&(tm.visible=!1);else{var _p=this.work.observers[this.currentPanoIndex];if(_p){var Qp=_p.visibleNodes.concat(this.currentPanoIndex),Zp=this.getForwardPanoIndexOrNot();for(Yp=0;Yp<this.work.observers.length;Yp++){var tm,em=this.work.observers[Yp];if(tm=this.panoMeshes[Yp])if(em.loadable||em.active)if(Qp.indexOf(Yp)!==-1){tm.visible=!0;var lm=tm.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);tm.setCurrent(Zp===Yp),tm.setOpacity(lm<.01?0:ho(1.4/lm,.5,.7)),tm.updateTime&&tm.updateTime(Cu,Pu)}else tm.visible=!1,tm.setOpacity(0);else tm.visible=!1,tm.setOpacity(0)}}}this.needsRender=!0}}else console.error("session\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");else console.error("xrFrame\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5")},Tu.prototype.render=function(){var Cu=this.xrManager.getCamera(this.camera);this.renderer.render(this.scene,Cu)},Tu.prototype.onPanGesture=function(){},Tu.prototype.onTapGesture=function(){},Tu.prototype.onPinchGesture=function(){},Tu.prototype.onMouseMove=function(){},Tu.prototype.onMouseOut=function(){},Tu.prototype.panoResourceFromLocationMotionKeyframe=function(Cu){return this.panoResources[Cu.key]},Tu.prototype.prepareForMoveToPano=function(Cu){var Pu=this,Bu={useXRBlackTransition:!0},Ru=_e(),Lu=0;return new Promise(function(Ou,Du){var $u=setInterval(function(){if((Lu=Math.min(1,(_e()-Ru)/1e3))>=1)return Bu.useXRBlackTransition=!1,Bu.progress=0,Pu.model.setMaterial(Bu),clearInterval($u),void Ou(!0);Bu.progress=Lu,Pu.model.setMaterial(Bu)},50)})},Tu}(Xa),Jl=["Panorama","DepthPanorama","Model"],$l={Floorplan:Aa,Topview:ga$1,Panorama:Xa,VRPanorama:kl,Model:Dl,DepthPanorama:_l,Mapview:zl,XRPanorama:Zl};function eu(_u){for(var Tu=0,Cu=Jl;Tu<Cu.length;Tu++){var Pu=Cu[Tu];if(typeof _u=="string"){if(Pu===_u)return!0}else if(_u instanceof fa$1&&_u instanceof $l[Pu])return!0}return!1}var tu=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError","webXRSessionStart","webXRSessionEnd","webXRSelected"];function iu(_u){for(var Tu,Cu,Pu={},Bu=0,Ru=_u.split(/(\;|\,)/);Bu<Ru.length;Bu++){var Lu=Ru[Bu].split("="),Ou=(Tu=Lu[0])===null||Tu===void 0?void 0:Tu.trim(),Du=(Cu=Lu[1])===null||Cu===void 0?void 0:Cu.trim();Ou&&Du&&(Pu[Ou]=Du)}return Pu}function nu(){for(var _u,Tu=document.getElementsByTagName("meta"),Cu=0;Cu<Tu.length;Cu++){var Pu=Tu[Cu];if(Pu.getAttribute("name")==="viewport"){var Bu=iu((_u=Pu.getAttribute("content"))!==null&&_u!==void 0?_u:""),Ru=Number(Bu["initial-scale"]);if(!isNaN(Ru))return Ru}}return 1}var ru=[351,63],ou=[20,20],su=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),au=new Float32Array([0,0,1,0,0,1,1,1]),lu=new Uint8Array([0,1,2,1,3,2]),uu=new r$3.BufferGeometry;uu.setAttribute("position",new r$3.BufferAttribute(su,3)),uu.setAttribute("uv",new r$3.BufferAttribute(au,2)),uu.setIndex(new r$3.BufferAttribute(lu,1));var hu=new r$3.MeshBasicMaterial({transparent:!0,depthTest:!1}),cu=new r$3.Mesh(uu,hu),du=new r$3.Scene;du.add(cu);var pu=new r$3.OrthographicCamera(-.5,.5,.5,-.5,.1,1);pu.position.set(0,0,.5),pu.lookAt(0,0,0);var fu=new r$3.Vector4,Au=new r$3.Vector4;function gu(_u){if(hu.map){var Tu=_u.getViewport(fu),Cu=_u.getScissor(Au),Pu=_u.getScissorTest(),Bu=_u.autoClear;_u.setViewport(Cu.x+ou[0]/3,Cu.y+ou[1]/3,ru[0]/3,ru[1]/3),_u.setScissor(Cu.x+ou[0]/3,Cu.y+ou[1]/3,ru[0]/3,ru[1]/3),_u.setScissorTest(!0),_u.autoClear=!1,_u.render(du,pu),_u.setViewport(Tu),_u.setScissor(Cu),_u.setScissorTest(Pu),_u.autoClear=Bu}else{var Ru=new r$3.Texture,Lu=new Image;Lu.onload=function(){Ru.image=Lu,Ru.wrapS=r$3.ClampToEdgeWrapping,Ru.wrapT=r$3.ClampToEdgeWrapping,Ru.minFilter=r$3.LinearFilter,Ru.needsUpdate=!0,hu.needsUpdate=!0,Lu.onload=function(){}},Lu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",hu.map=Ru}}var mu=new r$3.Box3(new r$3.Vector3(-50,-50,-50),new r$3.Vector3(50,50,50)),vu=function(_u){return _u.replace("//vrlab-public.ljcdn.com/","//vr-public.realsee-cdn.cn/").replace("//vrlab-image4.ljcdn.com/","//vr-image-4.realsee-cdn.cn/").replace("//vrlab-image3.ljcdn.com/","//vr-image-3.realsee-cdn.cn/").replace("//vrlab-image2.ljcdn.com/","//vr-image-2.realsee-cdn.cn/").replace("//vrlab-image1.ljcdn.com/","//vr-image-1.realsee-cdn.cn/")},yu=new r$3.Vector2,bu=new r$3.Frustum,xu=new r$3.Matrix4,wu=new WeakMap,Eu=new WeakMap,Mu=function(_u){function Tu(Cu){Cu===void 0&&(Cu={});var Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu=this;if((Gu=_u.call(this)||this).ident=Kr(),Iu.instances[Gu.ident]=Gu,Gu.renderSwitch01=0,Gu.panoIndex=0,Gu.needsRender=!1,Gu.onlyRenderIfNeeds=(Pu=Cu.onlyRenderIfNeeds)===null||Pu===void 0||Pu,Gu.imageOptions=t$3.__assign({},(Bu=Cu.imageOptions)!==null&&Bu!==void 0?Bu:{}),Gu.textureOptions=t$3.__assign({},(Ru=Cu.textureOptions)!==null&&Ru!==void 0?Ru:{}),Gu.poweredByRealsee=(Lu=Cu.poweredByRealsee)===null||Lu===void 0||Lu,Gu.extraElements=[],Gu.controllerInits={Panorama:Object.assign({},Cu.panorama),Model:Object.assign({},Cu.model),Floorplan:Object.assign({},Cu.floorplan),Topview:Object.assign({},Cu.topview),Mapview:Object.assign({},Cu.mapview),DepthPanorama:Object.assign({},Cu.depthPanorama),VRPanorama:Object.assign({},Cu.vrPanorama),XRPanorama:Object.assign({},Cu.xrPanorama)},Gu.fps={testCount:0,testTime:_e()},Gu.modeChangeDuration=(Ou=Cu.modeChangeDuration)!==null&&Ou!==void 0?Ou:800,Gu.panoramaLikeSavedPose={},typeof window!="undefined")if(Cu.renderer)Cu.renderer instanceof It&&Gu.throwError(new Error("cannot render a internal renderer")),Gu.renderer=Cu.renderer;else try{Gu.renderer=new It({preserveDrawingBuffer:Cu.preserveDrawingBuffer,backgroundColor:Cu.backgroundColor,backgroundAlpha:Cu.backgroundAlpha,antialias:Cu.antialias,webgl2:Cu==null?void 0:Cu.webgl2});var Hu=nu();Gu.renderer.setPixelRatio(Hu===1?window.devicePixelRatio:1),Gu.renderer.setSize(512,512)}catch(_d){_d instanceof Error&&Gu.throwError(_d)}Gu.getPixelsRenderTarget=new r$3.WebGLRenderTarget(1,1,{encoding:($u=(Du=Gu.renderer)===null||Du===void 0?void 0:Du.outputEncoding)!==null&&$u!==void 0?$u:r$3.sRGBEncoding}),Gu.scissor=Object.assign({left:0,bottom:0,width:1,height:1},Cu.scissor),Gu.camera=new Lt(80),Gu.scene=new St,Gu.lastLoadWorkTask=Promise.resolve(),Gu.requestProxy=(ku=Cu.requestProxy)!==null&&ku!==void 0?ku:vu,Gu.networkSubscribe=new tt,Gu.networkSubscribe.on("network",function(_d,Ku,Xu,Ju){var Zu;Gu.emit("network",_d,Ku,Xu,Ju),(Zu=Gu.analysis)===null||Zu===void 0||Zu.network(Gu.work,_d,Ku,Xu,Ju)}),Gu.model=new uo({allowHosts:[],requestProxy:Gu.requestProxy,networkSubscribe:Gu.networkSubscribe});var ju=Ks(mu);ju.name="model_empty",Gu.model.add(ju),Gu.model.visible=!1,Gu.readyCallbacks=[],Gu.modelPending=!1,Gu.syncingState=!1,Gu.scene.add(Gu.model),Gu.helperGroup=new r$3.Group,Gu.helperGroup.name="helper",Gu.scene.add(Gu.helperGroup),Gu.videoTexture=new r$3.VideoTexture(Cu.videoInstance||function(){var _d=document.createElement("video");_d.loop=!0,_d.autoplay=!0,_d.playsInline=!0,_d.muted=!0,_d.crossOrigin="";var Ku=function(){document.removeEventListener("touchstart",Ku,!1),document.removeEventListener("mousedown",Ku,!1),_d.muted=!1};return document.addEventListener("touchstart",Ku,!1),document.addEventListener("mousedown",Ku,!1),_d}()),function(_d){(Ku=new r$3.DirectionalLight(16777215,.5)).position.copy(new r$3.Vector3(1,1,1)),_d.add(Ku);var Ku=new r$3.DirectionalLight(16777215,.3);_d.add(Ku),Ku=new r$3.AmbientLight(16777215,.3),_d.add(Ku)}(Gu.scene),Gu.state={mode:(Fu=Gu.currentMode)!==null&&Fu!==void 0?Fu:"Panorama",panoIndex:(Nu=Gu.panoIndex)!==null&&Nu!==void 0?Nu:0,longitude:Gu.camera.pose.longitude,latitude:Gu.camera.pose.latitude,fov:Gu.camera.pose.fov,offset:Gu.camera.pose.offset.clone(),distance:Gu.camera.pose.distance},Gu.stateSynced=!1,Gu._enableIOSEDR=!1,Gu.destroyed=!1,Gu.paused=!0,typeof window!="undefined"&&(Cu.play!==!1&&Gu.play(),((Vu=Cu.initialBasisLoader)!==null&&Vu!==void 0&&Vu)!==!1&&(typeof Cu.initialBasisLoader=="string"?Gu.initBasisLoader(Cu.initialBasisLoader):Gu.initBasisLoader()),Gu.stopAnimationLoop=at.shared.add(function(_d,Ku){for(var Xu=[],Ju=2;Ju<arguments.length;Ju++)Xu[Ju-2]=arguments[Ju];Gu.updateTime.apply(Gu,t$3.__spreadArray([_d,Ku],Xu,!1))},!1,0,10));var Uu=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Gu.currentMode==="VRPanorama"&&Gu.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",Uu,!1),Gu.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",Uu,!1)},Gu.plugins={},Cu.plugins&&Cu.plugins.length)for(var zu=0,Wu=Cu.plugins;zu<Wu.length;zu++){var Qu=Wu[zu];if(typeof Qu=="function")Qu(Gu);else if(Array.isArray(Qu)){var qu=Qu[0],Yu=Qu[1],Xc=Qu[2];if(typeof qu=="function"){var _h=qu(Gu,Xc);typeof Yu=="string"&&(Gu.plugins[Yu]?Gu.throwError(new Error("plugin name ".concat(Yu," is exists."))):Gu.plugins[Yu]=_h)}}}return Gu}return t$3.__extends(Tu,_u),Object.defineProperty(Tu,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),Tu.prototype.dispose=function(){var Cu,Pu;if(this.destroyed!==!0){delete Iu.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),(Cu=this.renderer)===null||Cu===void 0||Cu.setAnimationLoop(null),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Bu=this.getElement();Bu&&Bu.parentNode&&Bu.parentNode.removeChild(Bu),this.scene.remove(this.model);var Ru=this.model.getMaterial();Ru&&(Ru.pano0&&Ru.pano0.map.dispose(),Ru.pano1&&Ru.pano1.map!==((Pu=Ru.pano0)===null||Pu===void 0?void 0:Pu.map)&&Ru.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof It&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},Tu.prototype.setScissor=function(Cu){Object.assign(this.scissor,Cu),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(Tu.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(Cu){this.helperGroup.visible!==Cu&&(this.helperGroup.visible=Cu,this.emit("helpersVisibleChange",Cu),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(Cu){this._enableIOSEDR!==Cu&&(this._enableIOSEDR=Cu,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(Cu){var Pu,Bu;if(Cu){if(!this.screenBuffer){var Ru=this.getDrawingBufferSize(yu);this.screenBuffer=new r$3.WebGLRenderTarget(Ru.x,Ru.y,{encoding:(Bu=(Pu=this.renderer)===null||Pu===void 0?void 0:Pu.outputEncoding)!==null&&Bu!==void 0?Bu:r$3.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),Tu.prototype.updateConfiguration=function(Cu){var Pu=!1;Cu.panorama&&(Object.assign(this.controllerInits.Panorama,Cu.panorama),this.currentMode==="Panorama"&&(Pu=!0)),Cu.model&&(Object.assign(this.controllerInits.Model,Cu.model),this.currentMode==="Model"&&(Pu=!0)),Cu.floorplan&&(Object.assign(this.controllerInits.Floorplan,Cu.floorplan),this.currentMode==="Floorplan"&&(Pu=!0)),Cu.topview&&(Object.assign(this.controllerInits.Topview,Cu.topview),this.currentMode==="Topview"&&(Pu=!0)),Cu.mapview&&(Object.assign(this.controllerInits.Mapview,Cu.topview),this.currentMode==="Mapview"&&(Pu=!0)),Cu.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,Cu.depthPanorama),this.currentMode==="DepthPanorama"&&(Pu=!0)),Cu.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,Cu.vrPanorama),this.currentMode==="VRPanorama"&&(Pu=!0)),Cu.imageOptions&&(Object.assign(this.imageOptions,Cu.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Pu=!0)),Pu&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},Tu.prototype.appendTo=function(Cu,Pu){if(Pu===void 0&&(Pu={}),this.renderer)if(this.renderer instanceof It){var Bu=this.getElement();if(Bu){Cu.appendChild(Bu),this.refresh(Pu);var Ru=window.getComputedStyle(Cu).position;Ru!=="relative"&&Ru!=="absolute"&&Ru!=="fixed"&&Ru!=="sticky"&&(Cu.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},Tu.prototype.refresh=function(Cu,Pu){if(Cu===void 0&&(Cu={}),this.renderer){var Bu=this.getElement();if(Bu){var Ru=Bu.parentNode;if(Ru&&Ru.nodeName){var Lu=Cu.width,Ou=Lu===void 0?Ru.offsetWidth:Lu,Du=Cu.height,$u=Du===void 0?Ru.offsetHeight:Du;this.renderer instanceof It&&(Pu&&this.renderer.setPixelRatio(Pu),this.renderer.setSize(Ou,$u))}var ku=this.renderer.getSize(new r$3.Vector2);this.camera.aspect=ku.x*this.scissor.width/(ku.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},Tu.prototype.addExtraElement=function(Cu){var Pu=this;return this.extraElements.indexOf(Cu)===-1&&(this.extraElements.push(Cu),this.controller&&this.controller.bindExtraElement(Cu)),function(){return Pu.removeExtraElement(Cu)}},Tu.prototype.removeExtraElement=function(Cu){var Pu=this.extraElements.indexOf(Cu);Pu!==-1&&(this.extraElements.splice(Pu,1),this.controller&&this.controller.unbindExtraElement(Cu))},Tu.prototype.getPose=function(){var Cu=this.camera.copyPose(),Pu=Cu.longitude,Bu=Cu.latitude,Ru=Cu.fov,Lu=Cu.offset,Ou=Cu.distance;return{longitude:Pu,latitude:Bu,fov:Ru,offset:Lu.clone(),distance:Ou}},Tu.prototype.getSize=function(Cu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(Cu),Cu.x*=this.scissor.width,Cu.y*=this.scissor.height,Cu},Tu.prototype.getDrawingBufferSize=function(Cu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(Cu),Cu.x*=this.scissor.width,Cu.y*=this.scissor.height,Cu},Tu.prototype.updateCamera=function(Cu,Pu,Bu){return Bu===void 0&&(Bu=!0),this.controller?this.controller.updateCamera(Cu,Pu,Bu):Promise.reject(new Error("controller is not initialized."))},Tu.prototype.getLongitudeAndLatitude=function(){var Cu=this.getPose();return{longitude:Cu.longitude,latitude:Cu.latitude}},Tu.prototype.getOffset=function(){return this.getPose().offset},Tu.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var Cu=this.work.observers[this.panoIndex],Pu=new r$3.Object3D;return Pu.position.copy(Cu.position),Pu.quaternion.copy(Cu.quaternion),Pu.scale.set(1,1,1),Pu.updateMatrixWorld(!0),function(Bu,Ru){var Lu=new r$3.Vector3(0,0,-1);Lu.applyQuaternion(Bu.quaternion);var Ou=Ru.quaternion.clone().inverse();return Lu.applyQuaternion(Ou),{theta:Math.atan2(Lu.x,-Lu.z),phi:-Math.asin(Lu.y),lookAtVector:Lu}}(this.camera,Pu)}},Tu.prototype.initBasisLoader=function(Cu){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof Cu=="string"&&Ei.setTranscoderPath(Cu),Ei.workerConfig.format||Ei.detectSupport(this.renderer),Ei._allocateWorker(0)}catch(Pu){Pu instanceof Error&&this.throwError(Pu)}},Object.defineProperty(Tu.prototype,"work",{get:function(){var Cu=Eu.get(this);if(Cu&&wo.get(Cu))return Cu},enumerable:!1,configurable:!0}),Tu.prototype.load=function(Cu,Pu,Bu,Ru){var Lu=this;if(Ru===void 0&&(Ru=!0),!this.renderer)throw new Error("renderer is not initialized");var Ou=this.lastLoadWorkTask.then(function(){return!(Du=Cu)||typeof Du!="object"&&typeof Du!="function"||typeof Du.then!="function"?Lu.load_(Cu,Pu,Bu,Ru):Cu.then(function($u){return Lu.load_($u,Pu,Bu,Ru)});var Du});return this.lastLoadWorkTask=Ou.catch(function(Du){Lu.throwError(Du)}),Ou},Tu.prototype.load_=function(Cu,Pu,Bu,Ru){var Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu=this;Ru===void 0&&(Ru=!0);var ju,Uu,zu,Wu=Co(Cu),Qu=this.work;Pu===void 0&&(Pu=Qu?"inherit":"initial"),Pu==="inherit"?(ju=typeof this.panoIndex=="number"&&Wu.observers[this.panoIndex]?this.panoIndex:Wu.initial.panoIndex,Uu=(Lu=this.currentMode)!==null&&Lu!==void 0?Lu:Wu.initial.mode,zu={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Pu==="initial"?(Uu=(Ou=this.currentMode)!==null&&Ou!==void 0?Ou:Wu.initial.mode,ju=Wu.initial.panoIndex,zu=Uu===Tu.Mode.Panorama||Uu===Tu.Mode.DepthPanorama||Uu===Tu.Mode.Model||Uu===Tu.Mode.VRPanorama||Uu===Tu.Mode.XRPanorama?{longitude:Wu.initial.longitude,latitude:Wu.initial.latitude,fov:Wu.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(ju=(Du=Pu.panoIndex)!==null&&Du!==void 0?Du:Wu.initial.panoIndex,Uu=(ku=($u=Pu.mode)!==null&&$u!==void 0?$u:this.currentMode)!==null&&ku!==void 0?ku:"Panorama",zu={longitude:(Fu=Pu.longitude)!==null&&Fu!==void 0?Fu:Wu.initial.longitude,latitude:(Nu=Pu.latitude)!==null&&Nu!==void 0?Nu:Wu.initial.latitude,fov:(Vu=Pu.fov)!==null&&Vu!==void 0?Vu:Wu.initial.fov}),this.emit("willLoad",Cu,Wu,{panoIndex:ju,mode:Uu,longitude:zu.longitude,latitude:zu.latitude,fov:zu.fov});var qu=function(){var Xc;Hu.panoIndex=ju,Hu.panoramaLikeSavedPose.longitude=Wu.initial.longitude,Hu.panoramaLikeSavedPose.latitude=Wu.initial.latitude,Hu.panoramaLikeSavedPose.fov=Wu.initial.fov;var _h=Hu.controller?Bu!=null?Bu:Hu.modeChangeDuration:0,_d=t$3.__assign(t$3.__assign({initial:[ju,zu,_h,Ru]},Hu.commonParams()),Hu.controllerInits[Uu]);Hu.controller?Hu.controller.updateWork(Wu,ju,zu,_h,Ru)===!1&&(Hu.controller.destroy(),Hu.controller=Hu.applyController(Uu,_d)):Hu.controller=Hu.applyController(Uu,_d),Hu.emit("load",Cu,Wu,{panoIndex:ju,mode:Uu,longitude:zu.longitude,latitude:zu.latitude,fov:zu.fov}),(Xc=Hu.analysis)===null||Xc===void 0||Xc.work(Wu)},Yu=function(Xc){var _h;Xc===void 0&&(Xc=Qe),Wu.model&&(Hu.model.name!==((_h=Wu.model)===null||_h===void 0?void 0:_h.file)?(Hu.emit("modelWillLoad",Wu.model),Hu.loadModel(Wu.model,Wu.allowHosts,Xc,!0)):Xc&&Xc())};return Eu.set(this,Wu),Uu===Tu.Mode.Floorplan||Uu===Tu.Mode.Topview||Uu===Tu.Mode.Mapview||Uu===Tu.Mode.Model?Yu(function(){qu(),Hu.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Wu.initial.fov,longitude:Wu.initial.longitude,latitude:Wu.initial.latitude,offset:Wu.observers[Wu.initial.panoIndex].position}),this.needsRender=!0),qu(),(Gu=this.controller)===null||Gu===void 0||Gu.once("panoLoaded",function(){Hu.needsRender=!0,Hu.emit("cameraUpdate",Hu.camera.copyPose(),Ru),Yu()})),this.ready().then(function(){Hu.emit("loaded",Cu,Hu.work)})},Tu.prototype.changeMode=function(Cu,Pu,Bu,Ru,Lu){var Ou=this;if(Pu===void 0&&(Pu={}),Bu===void 0&&(Bu=this.modeChangeDuration),Ru===void 0&&(Ru=!0),Lu===void 0&&(Lu=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Du,$u){if(!Tu.Mode.hasOwnProperty(Cu)){var ku=new Error('mode "'.concat(Cu,'" is not existed'));return Ou.throwError(ku),void $u(ku)}if((Cu===Tu.Mode.Floorplan||Cu===Tu.Mode.Topview||Cu===Tu.Mode.Mapview||Cu===Tu.Mode.Model)&&(oo(Ou.model)||Ou.model.loaded!==!0))return ku=new Error("model is not ready."),Ou.throwError(ku),void $u(ku);if(oo(Ou.controller))return ku=new Error("controller is not ready."),Ou.throwError(ku),void $u(ku);var Fu=Ou.controller,Nu=Ou.currentMode,Vu=function(){var Hu,ju,Uu,zu;if(Ou.emit("wantsChangeMode",Cu,Nu))$u(new Error("change mode canceled."));else{if(Ou.controller&&Lu===!1&&Nu===Cu)Cu===Tu.Mode.Panorama||Cu===Tu.Mode.DepthPanorama||Cu===Tu.Mode.Model||Cu===Tu.Mode.VRPanorama||Cu===Tu.Mode.XRPanorama?typeof Pu.panoIndex=="number"&&Pu.panoIndex!==Ou.panoIndex?Ou.controller.moveToPano((ju=(Hu=Pu.panoIndex)!==null&&Hu!==void 0?Hu:Ou.panoIndex)!==null&&ju!==void 0?ju:0,t$3.__assign({duration:Bu},Pu),Ru):Ou.controller.updateCamera(Pu,Bu,Ru).catch(Qe):(typeof Pu.panoIndex=="number"&&Pu.panoIndex!==Ou.panoIndex&&(Ou.panoIndex=Pu.panoIndex),Ou.controller.updateCamera(Pu,Bu,Ru).catch(Qe));else{Fu.destroy();var Wu=(zu=(Uu=Pu.panoIndex)!==null&&Uu!==void 0?Uu:Ou.panoIndex)!==null&&zu!==void 0?zu:0,Qu=eu(Cu)?Ou.panoramaLikeSavedPose:{};Cu===Tu.Mode.Mapview&&(Qu.longitude=Ou.panoramaLikeSavedPose.longitude),typeof Pu.longitude!="number"&&typeof Pu.latitude!="number"||(Qu.longitude=Pu.longitude,Qu.latitude=Pu.latitude),typeof Pu.fov=="number"&&(Qu.fov=Pu.fov);var qu=t$3.__assign(t$3.__assign({initial:[Wu,Qu,Bu,Ru]},Ou.commonParams()),Ou.controllerInits[Cu]);Ou.saveControllerPose(Fu),Ou.controller=Ou.applyController(Cu,qu);var Yu=$l[Cu].initAnimationEndPose(qu);Ou.emit("modeChange",Cu,Nu,Wu,Yu,Ru)}Du()}};if(Cu===Tu.Mode.VRPanorama)Ou.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(Hu){if(Hu=="granted")return Promise.resolve();var ju=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(ju)}):Promise.resolve()).then(function(){return Vu()}).catch(function(Hu){Hu instanceof Error&&(Ou.exitFullscreen(),Ou.throwError(Hu),$u(Hu))});else if(Cu===Tu.Mode.XRPanorama){var Gu=at.shared.getContext();Gu?Gu.end():function(){if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then(function(ju){return ju?Promise.resolve():Promise.reject()}).then(function(){return navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(function(ju){return Promise.resolve(ju)})});var Hu=new Error("Request XR Permission denied.");return Promise.reject(Hu)}().then(function(Hu){at.shared.setContext(Hu),Vu()}).catch(function(Hu){Hu instanceof Error&&(Ou.throwError(Hu),$u(Hu))}),Ou.on("webXRSessionEnd",function(){Ou.changeMode("Panorama")})}else Vu()})},Tu.prototype.getPixels=function(Cu,Pu,Bu,Ru,Lu){if(Lu===void 0&&(Lu=1),!this.renderer)throw new Error("renderer is not initialized.");var Ou=this.getPixelsRenderTarget,Du=this.renderer.getSize(new r$3.Vector2);Cu=ho(Cu,Math.floor(Bu/2),Math.floor(Du.x-Bu)),Pu=ho(Pu,Math.floor(Ru/2),Math.floor(Du.y-Ru)),Ou.setSize(Bu*Lu,Ru*Lu),this.renderer.setRenderTarget(Ou),this.camera.setViewOffset(Du.width,Du.height,Cu,Du.height-Pu-Ru,Bu,Ru),this.controller?this.controller.render():this.renderer.render(this.scene,this.camera);var $u=new Uint8Array(Bu*Lu*Ru*Lu*4);return this.renderer.readRenderTargetPixels(Ou,0,0,Bu*Lu,Ru*Lu,$u),this.renderer.setRenderTarget(null),this.camera.clearViewOffset(),$u},Tu.prototype.getElement=function(){var Cu;return(Cu=this.renderer)===null||Cu===void 0?void 0:Cu.domElement},Tu.prototype.render=function(Cu,Pu){var Bu=this;if(Pu===void 0&&(Pu=!1),!this.renderer)return null;if(Pu){var Ru=this.renderer.getSize(yu);this.scene.traverseVisible(function(Ou){Ou.setResolution&&Ou.setResolution(Ru.x,Ru.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Lu=this.getDrawingBufferSize(yu);return this.screenBuffer.setSize(Lu.x,Lu.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.currentMode!=="XRPanorama"&&this.poweredByRealsee&&gu(this.renderer),this.renderer.setRenderTarget(null),Cu&&at.shared.add(Cu,!0),this.screenBuffer}return this.aroundScissor(function(){Bu.renderer&&(Bu.controller?Bu.controller.render():Bu.renderer.render(Bu.scene,Bu.camera),Bu.poweredByRealsee&&Bu.currentMode!=="VRPanorama"&&Bu.currentMode!=="XRPanorama"&&gu(Bu.renderer)),Cu&&at.shared.add(Cu,!0)}),null},Tu.prototype.updateTime=function(Cu,Pu){for(var Bu,Ru=this,Lu=[],Ou=2;Ou<arguments.length;Ou++)Lu[Ou-2]=arguments[Ou];if(!this.destroyed){this.syncingState=this.syncState(Cu,Pu),this.controller&&(Bu=this.controller).updateTime.apply(Bu,t$3.__spreadArray([Cu,Pu],Lu,!1)),this.syncingState=!1;var Du=new r$3.Vector2(512,512),$u=new r$3.Vector2(512,512);this.renderer&&(this.renderer.getSize(Du),Du.x*=this.scissor.width,Du.y*=this.scissor.height,this.renderer.getDrawingBufferSize($u),$u.x*=this.scissor.width,$u.y*=this.scissor.height);var ku=[];if(xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.renderer&&this.model.update(this.renderer,this.camera),bu.setFromProjectionMatrix(xu),this.scene.traverse(function(zu){if(zu.setResolution&&zu.setResolution(Du.x,Du.y),zu.mixer instanceof r$3.AnimationMixer){var Wu=wu.get(zu.mixer);Wu||(Wu=new r$3.Clock,wu.set(zu.mixer,Wu)),zu.mixer.update(Wu.getDelta())}(zu instanceof r$3.Mesh||zu instanceof r$3.Line||zu instanceof r$3.Points)&&(zu instanceof r$3.ImmediateRenderObject||!zu.frustumCulled||bu.intersectsObject(zu))&&ku.push(zu)}),$u.width*$u.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Fu=void 0;if(this.onlyRenderIfNeeds!==!0)Fu=this.render();else{for(var Nu=0,Vu=ku;Nu<Vu.length;Nu++){var Gu=Vu[Nu],Hu=function(zu){zu.needsRender===!0?(zu.needsRender=!1,Ru.needsRender=!0):zu.mixer&&zu.mixer.stats.actions.inUse>0&&(Ru.needsRender=!0)};Hu(Gu),Gu.traverseAncestors(Hu)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Fu=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Ru.controller.postProcessing(Ru.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",Fu!==void 0)}if(this.fps.testTime&&Cu-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=Cu,this.fps.testCount=0,this.renderer){var ju=this.renderer.getContext(),Uu=Us(ju);Uu&&this.throwError(Uu)}}},Tu.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof It&&this.renderer.clear(!0,!0,!0)},Tu.prototype.play=function(){this.needsRender=!0,this.paused=!1},Tu.prototype.moveToPano=function(Cu,Pu,Bu){Pu===void 0&&(Pu={}),Bu===void 0&&(Bu=!0);var Ru=this,Lu=Ru.controller,Ou=Ru.currentMode,Du=Ru.renderer;return Lu?Du?(Ou===Tu.Mode.Floorplan||Ou===Tu.Mode.Topview||Ou===Tu.Mode.Mapview?oo(Cu)||(this.panoIndex=Cu,this.changeMode(Tu.Mode.Panorama,Pu,void 0,Bu)):Lu.moveToPano(Cu,Pu,Bu),this.ready()):(this.throwError(new Error("renderer is not initialized.")),Promise.resolve()):(this.throwError(new Error("controller is not initialized.")),Promise.resolve())},Tu.prototype.preloadPano=function(Cu,Pu){var Bu=this;if(Pu===void 0&&(Pu=Qe),!this.work)return Promise.reject(new Error("work never loaded"));var Ru=this.work.observers[Cu],Lu=this.work.allowHosts,Ou=_e();return Promise.all(["right","left","up","down","front","back"].map(function(Du){var $u=t$3.__assign({key:"pano.".concat(Cu,".").concat(Du),basisLoaderInitialized:Ei.isInitialized()},ii(Bu.imageOptions,["size","format","quality","mappings"])),ku=Ru.images[Du];return function(Fu,Nu){Nu===void 0&&(Nu={});var Vu=_e(),Gu=Fu;return Promise.resolve().then(function(){return Nu.requestProxy?Nu.requestProxy(Fu):Fu}).then(function(Hu){return/^https\:/.test(location.href)&&/^http\:/.test(Hu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Hu,"'. This request was automatically upgraded to HTTPS")),Hu.replace(/^http\:/,"https:")):Hu}).catch(function(Hu){var ju,Uu=new Ge(Gu,"Link",Hu&&Hu.message?String(Hu.message):String(Hu));return(ju=Nu.networkSubscribe)===null||ju===void 0||ju.emit("network",Fu,"Link","proxy-error",Uu.message),Promise.reject(Uu)}).then(function(Hu){return Hu in nt?nt[Hu]:nt[Hu]=new Promise(function(ju,Uu){var zu,Wu=Nu.allowHosts?je.concat(Nu.allowHosts):je.slice(),Qu=et(Hu);if(location.hostname.length!==0&&!ze(location.hostname)&&je.filter(function(_d){return Ke(_d,location.hostname)}).length===0&&!ze(Qu)&&Wu.filter(function(_d){return Ke(_d,Qu)}).length===0){var qu=new Ye(Hu,"Link","request host(".concat(Qu,") is not allowed"));return Uu(qu),void((zu=Nu.networkSubscribe)===null||zu===void 0||zu.emit("network",Hu,"Link","forbidden",qu.message))}var Yu=document.createElement("link");Yu.href=Hu,Yu.rel=Yu.relList&&Yu.relList.supports("prefetch")?"prefetch":"preload",Yu.as="fetch",Yu.crossOrigin="";var Xc=document.head||document.getElementsByTagName("head")[0];Xc&&Xc.appendChild(Yu);var _h=!1;Yu.onload=function(){var _d;if(_h!==!0){_h=!0,ju();var Ku=_e(),Xu={origin:Gu,source:Hu,requestTime:Vu,responseTime:Ku,costs:Ku-Vu,headers:{}};(_d=Nu.networkSubscribe)===null||_d===void 0||_d.emit("network",Hu,"Link","preload",JSON.stringify(Xu))}},Yu.onerror=function(_d){var Ku;if(_h!==!0){_h=!0;var Xu=new We(Hu,"Link",0);Uu(Xu),(Ku=Nu.networkSubscribe)===null||Ku===void 0||Ku.emit("network",Hu,"Link","error",Xu.message)}}})})}(Bu.imageOptions.transform?Bu.imageOptions.transform(ku,$u):ct(ku,$u),{allowHosts:Lu,requestProxy:Bu.requestProxy,networkSubscribe:Bu.networkSubscribe})})).then(function(){var Du=_e()-Ou;return Pu(Du),Du})},Tu.prototype.project2d=function(Cu,Pu){if(Pu===void 0&&(Pu=!1),!this.renderer)return null;if(this.model.empty===!1&&Pu){var Bu=this.camera.position,Ru=Cu.clone().sub(Bu),Lu=new r$3.Raycaster(Bu,Ru.clone().normalize()),Ou=this.model.intersectRaycaster(Lu)[0];if(Ou&&Ou.distance+.01<Ru.length())return null}var Du=Cu.clone().project(this.camera);if(Math.abs(Du.z)>1)return null;var $u=this.renderer.getSize(new r$3.Vector2),ku=$u.x*this.scissor.width,Fu=$u.y*this.scissor.height,Nu=$u.x*this.scissor.left+(Du.x+1)/2*ku,Vu=$u.y*(1-this.scissor.bottom-this.scissor.height)+(1-Du.y)/2*Fu;return new r$3.Vector2(Nu,Vu)},Tu.prototype.getRenderObjects=function(Cu){xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bu.setFromProjectionMatrix(xu),Cu||(Cu=this.scene);var Pu=[];return Cu.traverseVisible(function(Bu){(Bu instanceof r$3.Mesh||Bu instanceof r$3.Line||Bu instanceof r$3.Points)&&(Bu instanceof r$3.ImmediateRenderObject||!Bu.frustumCulled||bu.intersectsObject(Bu))&&Pu.push(Bu)}),Pu},Tu.prototype.getCurrentState=function(){return t$3.__assign(t$3.__assign({},this.getPose()),{mode:this.currentMode||Tu.Mode.Panorama,panoIndex:this.panoIndex||0})},Tu.prototype.setState=function(Cu,Pu,Bu){var Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu;Pu===void 0&&(Pu=!1),Bu===void 0&&(Bu=!0),!(Cu=Object.assign({},Cu)).offset||Cu instanceof r$3.Vector3||(Cu.offset=new r$3.Vector3(Cu.offset.x,Cu.offset.y,Cu.offset.z));var Gu,Hu,ju,Uu,zu,Wu=(Ru=Cu.panoIndex)!==null&&Ru!==void 0?Ru:this.state.panoIndex,Qu=(Lu=Cu.mode)!==null&&Lu!==void 0?Lu:this.state.mode;if(this.work)if(this.work.observers[Wu])if(Cu.mode!==Tu.Mode.Floorplan&&Cu.mode!==Tu.Mode.Topview&&Cu.mode!==Tu.Mode.Mapview&&Cu.mode!==Tu.Mode.Model||!oo(this.model)&&this.model.loaded===!0){if(this.state.mode!==Qu){if(Qu==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var qu=void 0;qu=eu(this.state.mode)&&eu(Qu)?t$3.__assign({},this.state):eu(Qu)?t$3.__assign({},this.panoramaLikeSavedPose):Qu===Tu.Mode.Mapview?{longitude:this.panoramaLikeSavedPose.latitude}:t$3.__assign({},Cu),typeof Cu.longitude=="number"&&(qu.longitude=Cu.longitude),typeof Cu.latitude=="number"&&(qu.latitude=Cu.latitude),typeof Cu.fov=="number"&&(qu.fov=Cu.fov);var Yu=t$3.__assign(t$3.__assign({initial:[Wu,qu,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[Qu]),Xc=$l[Qu].initAnimationEndPose(Yu);Gu=Xc.longitude,Hu=Xc.latitude,ju=Xc.fov,Uu=Xc.offset,zu=Xc.distance}else Gu=(Ou=Cu.longitude)!==null&&Ou!==void 0?Ou:this.state.longitude,Hu=(Du=Cu.latitude)!==null&&Du!==void 0?Du:this.state.latitude,ju=($u=Cu.fov)!==null&&$u!==void 0?$u:this.state.fov,Uu=(ku=Cu.offset)!==null&&ku!==void 0?ku:this.state.offset,zu=(Fu=Cu.distance)!==null&&Fu!==void 0?Fu:this.state.distance;var _h={panoIndex:Wu,mode:Qu,longitude:Gu,latitude:Hu,fov:ju,offset:Uu,distance:zu};this.emit("setState",_h),$s(this.state,_h)||(this.controller&&_h.mode==="VRPanorama"&&_h.mode!==this.state.mode?(Js(this.state,_h),this.changeMode("VRPanorama")):this.controller&&_h.mode==="XRPanorama"&&_h.mode!==this.state.mode?(Js(this.state,_h),this.changeMode("XRPanorama")):(Js(this.state,_h),this.controller&&(this.controller.userAction=Bu),Pu&&this.state.mode===_h.mode&&(this.syncingState=this.syncState(_e(),0,Pu),this.syncingState&&((Nu=this.controller)===null||Nu===void 0||Nu.updateTime(_e(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Bu),(Vu=this.analysis)===null||Vu===void 0||Vu.state(this.work,this.state)))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},Tu.prototype.aroundScissor=function(Cu){if(this.renderer)if(this.state.mode!=="XRPanorama"){var Pu=new r$3.Vector2,Bu=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Bu){this.renderer.getSize(Pu);var Ru=Math.floor(Pu.x*this.scissor.left),Lu=Math.floor(Pu.y*this.scissor.bottom),Ou=Math.floor(Pu.x*this.scissor.width),Du=Math.floor(Pu.y*this.scissor.height);this.renderer.setViewport(Ru,Lu,Ou,Du),this.renderer.setScissor(Ru,Lu,Ou,Du),this.renderer.setScissorTest(!0)}Cu(),Bu&&(this.renderer.setViewport(0,0,Pu.x,Pu.y),this.renderer.setScissor(0,0,Pu.x,Pu.y),this.renderer.setScissorTest(!1))}else Cu()},Tu.prototype.syncState=function(Cu,Pu,Bu){Bu===void 0&&(Bu=!1);var Ru=this.stateSynced;if(this.stateSynced=!1,!this.work||!this.controller)return!1;if(this.state.mode!==this.currentMode){var Lu={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Lu,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Ou=this.currentMode;if(!(Ou===Tu.Mode.Floorplan||Ou===Tu.Mode.Topview||Ou===Tu.Mode.Mapview||Ou===Tu.Mode.Model)||!this.modelPending){var Du=this.readyCallbacks.slice();this.readyCallbacks.length=0;for(var $u=0,ku=Du;$u<ku.length;$u++){var Fu=ku[$u];this.controller instanceof $l.Panorama?Fu.tile!==!0||this.controller.isTileReady()?Fu():this.readyCallbacks.push(Fu):Fu()}}}if(this.controller instanceof $l.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Nu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Nu,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Nu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance},this.controller.moveToPano(this.state.panoIndex,Nu,!1),!0;if(this.controller instanceof $l.Topview||this.controller instanceof $l.Mapview){var Vu=1,Gu=Bu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,Vu),Hu=Bu?new r$3.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$3.Vector3(Ys(this.camera.pose.offset.x,this.state.offset.x,.2),Ys(this.camera.pose.offset.y,this.state.offset.y,.2),Ys(this.camera.pose.offset.z,this.state.offset.z,.2));if(Vs(Gu,this.camera.pose.fov)||Hs(Hu,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Gu},0).catch(Qe),this.controller.locationMotion.set({x:Hu.x,y:Hu.y,z:Hu.z},0).catch(Qe),!0}else{Vu=1;var ju=Math.PI/45,Uu=(Gu=Bu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,Vu),Bu?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Qu,qu,Yu){if(Qu.longitude===qu.longitude&&Qu.latitude===qu.latitude)return{longitude:qu.longitude,latitude:qu.latitude};var Xc=Gs(Qu.longitude),_h=Qu.latitude,_d=Gs(qu.longitude),Ku=qu.latitude;_d-Xc>Ws?Xc+=Xs:Xc-_d>Ws&&(Xc-=Xs);var Xu=Yu/Math.sqrt(Math.pow(_d-Xc,2)+Math.pow(Ku-_h,2));return Xu>=1?{longitude:qu.longitude,latitude:qu.latitude}:{longitude:Xc+(_d-Xc)*Xu,latitude:_h+(Ku-_h)*Xu}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},ju)),zu=Uu.longitude,Wu=Uu.latitude;if(Vs(zu,this.camera.pose.longitude,2*Math.PI)||Vs(Wu,this.camera.pose.latitude)||Vs(Gu,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:zu,latitude:Wu,fov:Gu},0).catch(Qe),!0}return this.stateSynced=!0,Ru===!1&&this.emit("stateSynced",this.state),!1},Tu.prototype.ready=function(Cu){var Pu=this;return Cu===void 0&&(Cu={}),new Promise(function(Bu){var Ru;Pu.readyCallbacks.push(Object.assign(Bu,{tile:(Ru=Cu.tile)!==null&&Ru!==void 0&&Ru}))})},Tu.prototype.requestFullscreen=function(){var Cu;if(Zs()){var Pu=(Cu=this.getElement())===null||Cu===void 0?void 0:Cu.parentNode;Pu&&"requestFullscreen"in Pu&&typeof document!="undefined"&&document.fullscreenElement===null&&Pu.requestFullscreen()}},Tu.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},Tu.prototype.throwError=function(Cu){this.hasListener("error")?this.emit("error",Cu):console.error(Cu)},Tu.prototype.loadModel=function(Cu,Pu,Bu,Ru){var Lu=this,Ou=Cu.file;this.emit("modelWillLoad",Cu);var Du=new uo({allowHosts:Pu,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe});Du.once("bvhLoaded",function(){var $u,ku;Lu.destroyed||Ou===((ku=($u=Lu.work)===null||$u===void 0?void 0:$u.model)===null||ku===void 0?void 0:ku.file)&&Lu.emit("modelBvhLoaded",Du)}),Du.once("materialLoaded",function(){var $u,ku;Lu.destroyed||Ou===((ku=($u=Lu.work)===null||$u===void 0?void 0:$u.model)===null||ku===void 0?void 0:ku.file)&&Lu.emit("modelMaterialLoaded",Du)}),Du.once("geometryLoaded",function(){var $u,ku;Lu.destroyed||Ou===((ku=($u=Lu.work)===null||$u===void 0?void 0:$u.model)===null||ku===void 0?void 0:ku.file)&&(Du.bounding.max.y-Du.bounding.min.y<1.5&&(Du.bounding.max.y=Du.bounding.min.y+10),Lu.emit("modelGeometryLoaded",Du))}),Du.once("loaded",function(){var $u,ku,Fu,Nu;if(!Lu.destroyed&&Ou===((ku=($u=Lu.work)===null||$u===void 0?void 0:$u.model)===null||ku===void 0?void 0:ku.file)){var Vu,Gu=Lu.model;Gu&&(Gu.show(),Vu=Gu.getMaterial()||{},Lu.scene.remove(Gu),Gu.dispose(),Du.setTransparent(Gu.getTransparent())),Vu&&Du.setMaterial(Vu),Lu.model=Du,Lu.scene.add(Du),(Fu=Lu.controller)===null||Fu===void 0||Fu.updateModel(Du),(Nu=Lu.renderer)===null||Nu===void 0||Nu.compile(Lu.scene,Lu.camera),Lu.needsRender=!0,Lu.modelPending=!1,Bu(),Lu.emit("modelLoaded",Du)}}),Du.on("shownFloorChange",function($u,ku){var Fu,Nu;Lu.destroyed||Ou===((Nu=(Fu=Lu.work)===null||Fu===void 0?void 0:Fu.model)===null||Nu===void 0?void 0:Nu.file)&&Lu.emit("modelShownFloorChange",$u,ku)}),Du.on("error",function($u){var ku,Fu,Nu,Vu;if(!Lu.destroyed&&Ou===((Fu=(ku=Lu.work)===null||ku===void 0?void 0:ku.model)===null||Fu===void 0?void 0:Fu.file)){Du.bounding.makeEmpty();for(var Gu=0,Hu=Lu.work.observers;Gu<Hu.length;Gu++){var ju=Hu[Gu];Du.bounding.expandByPoint(ju.standingPosition),Du.bounding.expandByPoint(new r$3.Vector3().fromArray([ju.position.x,2*ju.position.y-ju.standingPosition.y,ju.position.z]))}var Uu=Ks(Du.bounding,new r$3.Vector3(1,0,1));Uu.visible=!0,Uu.name="model_empty",Du.add(Uu);var zu,Wu=Lu.model;Wu&&(Wu.show(),zu=Wu.getMaterial()||{},Lu.scene.remove(Wu),Wu.dispose(),Du.setTransparent(Wu.getTransparent())),zu&&Du.setMaterial(zu),Lu.model=Du,Lu.scene.add(Du),(Nu=Lu.controller)===null||Nu===void 0||Nu.updateModel(Du),(Vu=Lu.renderer)===null||Vu===void 0||Vu.compile(Lu.scene,Lu.camera),Lu.emit("modelLoadError",$u,Du),Lu.throwError($u),Lu.modelPending=!1,Bu()}}),this.modelPending=!0,Du.load(Cu,this.textureOptions).catch(Qe)},Tu.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe,requestProxy:this.requestProxy}},Tu.prototype.saveControllerPose=function(Cu){Cu===void 0&&(Cu=this.controller),Cu&&eu(Cu)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},Tu.prototype.applyController=function(Cu,Pu){var Bu=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Ru=$l[Cu];Cu===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(Cu===Tu.Mode.Floorplan||Cu===Tu.Mode.Topview||Cu===Tu.Mode.Model||Cu===Tu.Mode.Mapview),this.currentMode=Cu;for(var Lu=new Ru(Pu),Ou=function(Vu){Lu.on(Vu,function(){for(var Gu=[],Hu=0;Hu<arguments.length;Hu++)Gu[Hu]=arguments[Hu];var ju=Bu.emit.apply(Bu,t$3.__spreadArray([Vu],Gu,!1));if(ju)return!1})},Du=0,$u=tu;Du<$u.length;Du++)Ou($u[Du]);var ku=$l[Cu].initAnimationEndPose(Pu),Fu=Pu.initial[3],Nu={panoIndex:Pu.initial[0],mode:Cu,longitude:ku.longitude,latitude:ku.latitude,fov:ku.fov,offset:ku.offset,distance:ku.distance};return $s(this.state,Nu)||(Js(this.state,Nu),this.emit("stateChange",this.state,Fu)),this.emit("currentStateChange",this.getCurrentState(),Fu),Lu.on("cameraUpdate",function(Vu,Gu){var Hu;if(Bu.controller){var ju=t$3.__assign(t$3.__assign({},Bu.controller.getTargetPose()),{panoIndex:Bu.panoIndex,mode:Cu});Gu&&Bu.syncingState===!1&&Bu.state.mode===ju.mode&&!$s(Bu.state,ju)&&(Js(Bu.state,ju),Bu.emit("stateChange",Bu.state,Gu),(Hu=Bu.analysis)===null||Hu===void 0||Hu.state(Bu.work,Bu.state))}Bu.emit("currentStateChange",Bu.getCurrentState(),Gu)}),Lu.on("initAnimationWillStart",function(Vu,Gu,Hu){var ju,Uu=t$3.__assign(t$3.__assign({},Gu),{panoIndex:Vu,mode:Cu});Hu&&Bu.state.mode===Uu.mode&&!$s(Bu.state,Uu)&&(Js(Bu.state,Uu),Bu.emit("stateChange",Bu.state,Hu),(ju=Bu.analysis)===null||ju===void 0||ju.state(Bu.work,Bu.state))}),Lu.on("initAnimationEnded",function(Vu,Gu,Hu){var ju,Uu=t$3.__assign(t$3.__assign({},Gu),{panoIndex:Vu,mode:Cu});Hu&&Bu.state.mode===Uu.mode&&!$s(Bu.state,Uu)&&(Js(Bu.state,Uu),Bu.emit("stateChange",Bu.state,Hu),(ju=Bu.analysis)===null||ju===void 0||ju.state(Bu.work,Bu.state))}),Lu.on("panoWillArrive",function(Vu,Gu,Hu){var ju;Bu.panoIndex=Vu;var Uu=t$3.__assign(t$3.__assign({},Gu),{panoIndex:Vu,mode:Cu});Hu&&Bu.state.mode===Uu.mode&&!$s(Bu.state,Uu)&&(Js(Bu.state,Uu),Bu.emit("stateChange",Bu.state,Hu),(ju=Bu.analysis)===null||ju===void 0||ju.state(Bu.work,Bu.state))}),Lu.on("panoArrived",function(Vu,Gu,Hu){var ju,Uu=t$3.__assign(t$3.__assign({},Gu),{panoIndex:Vu,mode:Cu});Hu&&Bu.state.mode===Uu.mode&&!$s(Bu.state,Uu)&&(Js(Bu.state,Uu),Bu.emit("stateChange",Bu.state,Hu),(ju=Bu.analysis)===null||ju===void 0||ju.state(Bu.work,Bu.state))}),Lu.on("moveToPano",function(Vu,Gu){Bu.emit("currentStateChange",Bu.getCurrentState(),Gu)}),Lu.on("wantsMoveToPano",function(Vu,Gu,Hu){var ju=Bu.emit("wantsMoveToPano",Vu,Gu,Hu);ju||(ju=Bu.emit("wantsToMoveToPano",Vu,Gu,Hu)),ju||Bu.moveToPano(Vu,Gu,Hu)}),Lu.on("vrWantsToExit",function(){Bu.currentMode===Tu.Mode.VRPanorama&&(Bu.exitFullscreen(),Bu.changeMode(Tu.Mode.Panorama))}),Lu.on("error",function(Vu){return Bu.throwError(Vu)}),Lu},Tu.prototype.removeEventListeners=function(){},Tu.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",Mapview:"Mapview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama",XRPanorama:"XRPanorama"},Tu.Line=null,Tu}(Fe),Iu={instances:{},constructor:Mu};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:Iu});var Su=function(){function _u(){}return _u.createButton=function(Tu){var Cu=document.createElement("button");function Pu(){Cu.style.display="",Cu.style.cursor="auto",Cu.style.left="calc(50% - 75px)",Cu.style.width="150px",Cu.onmouseenter=null,Cu.onmouseleave=null,Cu.onclick=null,Cu.textContent="VR NOT SUPPORTED"}function Bu(Lu){Lu.style.position="absolute",Lu.style.bottom="20px",Lu.style.padding="12px 6px",Lu.style.border="1px solid #fff",Lu.style.borderRadius="4px",Lu.style.background="rgba(0,0,0,0.1)",Lu.style.color="#fff",Lu.style.font="normal 13px sans-serif",Lu.style.textAlign="center",Lu.style.opacity="0.5",Lu.style.outline="none",Lu.style.zIndex="999"}if("xr"in navigator)return Cu.id="VRButton",Cu.style.display="none",Bu(Cu),navigator.xr.isSessionSupported("immersive-vr").then(function(Lu){Lu?(Cu.style.display="",Cu.style.cursor="pointer",Cu.style.left="calc(50% - 50px)",Cu.style.width="100px",Cu.textContent="ENTER VR",Cu.onmouseenter=function(){Cu.style.opacity="1.0"},Cu.onmouseleave=function(){Cu.style.opacity="0.5"},Cu.onclick=function(){Tu&&Tu()}):Pu()}),Cu;var Ru=document.createElement("a");return window.isSecureContext===!1?(Ru.href=document.location.href.replace(/^http:/,"https:"),Ru.innerHTML="WEBXR NEEDS HTTPS"):(Ru.href="https://immersiveweb.dev/",Ru.innerHTML="WEBXR NOT AVAILABLE"),Ru.style.left="calc(50% - 90px)",Ru.style.width="180px",Ru.style.textDecoration="none",Bu(Ru),Ru},_u}();five.AnimationFrameLoop=at,five.BVH=qt,five.BVHIntersect=Ft,five.BVHNode=Nt,five.BVHVector3=Ot,five.Camera=Lt,Five=five.Five=Mu,five.InternalWebGLRenderer=It,five.IntersectMesh=Fs,five.LegacyPanoCircleMesh=jo,five.Model=uo,five.NetworkSubscribe=tt,five.PBMContainer=At,five.PBMGroup=gt,five.PBMMaterial=Mt,five.PBMMesh=ft,five.PROXY_CONTROLLER_EVENT_NAMES=tu,five.PanoCircleMesh=as,five.PanoCircleMeshDark=xs,five.PanoCircleMeshSolid=Ds,five.Scene=St,Subscribe$1=five.Subscribe=Fe,five.Tile3D=Qr,five.Tile3DModel=ro,five.TileBoundingSphere=pr,five.TileCacheNode=yn,five.TileCullingVolume=Fn,five.TileOrientedBoundingBox=Rr,five.TilePlane=kn,five.TileRequestScheduler=vn,five.Tileset3D=qr,five.Tileset3DTraverser=_r,five.TilesetCache=xn,five.Work=Eo,five.XRButton=Su,five.defaultImageURLTransform=ct,five.getViewportScale=nu,five.imageSupport=function(){return pt||(pt=Promise.all([dt("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),dt("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA")]).then(function(_u){var Tu=_u[0];return{webp:_u[1],avif:Tu}}).catch(function(){return{webp:!1,avif:!1}}))},parseWork=five.parseWork=Co;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$2=react$1.exports,n$2=require$$1,r$2=five;function o$1(_u){if(_u&&_u.__esModule)return _u;var Tu=Object.create(null);return _u&&Object.keys(_u).forEach(function(Cu){if(Cu!=="default"){var Pu=Object.getOwnPropertyDescriptor(_u,Cu);Object.defineProperty(Tu,Cu,Pu.get?Pu:{enumerable:!0,get:function(){return _u[Cu]}})}}),Tu.default=_u,Object.freeze(Tu)}var u$1=o$1(t$2),i$1=o$1(n$2),a$1=[],f$1=[],c$1=u$1.createContext(null);function s$1(){var _u=u$1.useContext(c$1);if(!_u)throw new Error("FiveProvider never found.");return _u.five}function l$2(){var _u=u$1.useContext(c$1);if(!_u)throw new Error("FiveProvider never found.");return _u.loadWork}var d={display:"inline-block",overflow:"hidden"};function v$1(_u,Tu){var Cu=s$1(),Pu=[Cu];Tu!==void 0&&(Pu=Pu.concat(Tu)),u$1.useLayoutEffect(function(){return _u(Cu.scene)},Pu)}var p$1=v$1;function h$1(_u){return e$1.__assign({},_u.state)}function m$1(_u){var Tu=_u.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(_u.camera.position,Tu)}function y$1(_u){return _u.camera.getWorldDirection(new i$1.Vector3)}function g$1(_u){return _u.model.empty?"Empty":"Loaded"}function S(_u,Tu){return Tu.indexOf(_u)>=0}function b(_u,Tu){for(var Cu=0,Pu=Object.keys(Tu);Cu<Pu.length;Cu++){var Bu=Pu[Cu];Tu[Bu]!==void 0&&(_u[Bu]=Tu[Bu])}}function C$1(_u,Tu){if(S("loadWork",Tu))return _u}function w$1(_u,Tu){if(S("setState",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.setState.apply(_u,Cu)}}function k(_u,Tu){if(S("on",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.on.apply(_u,Cu)}}function x(_u,Tu){if(S("on",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.once.apply(_u,Cu)}}function E$1(_u,Tu){if(S("off",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.off.apply(_u,Cu)}}function L$1(_u,Tu){if(S("intersectRaycaster",Tu))return function(){for(var Cu,Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return(Cu=_u.model).intersectRaycaster.apply(Cu,Pu)}}function F(_u,Tu){if(S("project2d",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.project2d.apply(_u,Cu)}}function _(_u,Tu){if(S("updateCamera",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.updateCamera.apply(_u,Cu)}}function P$1(_u,Tu){if(S("initBasisLoader",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.initBasisLoader.apply(_u,Cu)}}function R$1(_u,Tu){if(S("getPixels",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.getPixels.apply(_u,Cu)}}function V(_u,Tu){if(S("render",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.render.apply(_u,Cu)}}function W$1(_u,Tu){if(S("needsRender",Tu))return function(){_u.needsRender=!0}}function M(_u,Tu){if(S("preloadPano",Tu))return function(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return _u.preloadPano.apply(_u,Cu)}}function O$1(_u,Tu){if(S("showFloor",Tu))return function(Cu){typeof Cu=="number"?_u.model.show(Cu):_u.model.show()}}function j(_u,Tu){if(S("toggleHelperVisible",Tu))return function(Cu){_u.helperVisible=Cu}}function A$1(_u,Tu){for(var Cu={},Pu=Tu.length,Bu=-1;++Bu<Pu;){var Ru=Tu[Bu];Ru in _u&&(Cu[Ru]=_u[Ru])}return Cu}function N$1(_u,Tu){for(var Cu=0;Cu<_u.length;Cu++)for(var Pu=0;Pu<Tu.length;Pu++)if(_u[Cu]===Tu[Pu])return!0;return!1}var U=function(){function _u(Tu,Cu){this.values=Tu,this.listeners=[],this.onValuesChange=Cu}return _u.prototype.on=function(Tu,Cu){var Pu=this,Bu=[Tu,Cu];return this.listeners.push(Bu),function(){var Ru=Pu.listeners.indexOf(Bu);Ru>=0&&Pu.listeners.splice(Ru,1)}},_u.prototype.getValues=function(Tu){return A$1(this.values,Tu)},_u.prototype.setValues=function(Tu,Cu){var Pu,Bu,Ru=[];for(var Lu in Cu)Tu.indexOf(Lu)>=0&&(Pu=Cu[Lu],Bu=this.values[Lu],!(typeof Pu=="number"&&typeof Bu=="number"&&isNaN(Pu)&&isNaN(Bu)||Pu===Bu))&&Ru.push(Lu);if(Ru.length!==0){for(var Ou=e$1.__assign({},this.values),Du=0,$u=Ru;Du<$u.length;Du++){var ku=$u[Du];this.values[ku]=Cu[ku]}this.onValuesChange&&this.onValuesChange(this.values,Ou);for(var Fu=0,Nu=this.listeners;Fu<Nu.length;Fu++){var Vu=Nu[Fu],Gu=Vu[0],Hu=Vu[1];if(N$1(Gu,Ru)){var ju=A$1(Ou,Gu);Hu(A$1(this.values,Gu),ju)}}}},_u}();FiveCanvas=react.FiveCanvas=function(_u){var Tu=_u.width,Cu=_u.height,Pu=s$1(),Bu=u$1.createRef(),Ru=e$1.__assign({width:Tu,height:Cu},d);return u$1.useLayoutEffect(function(){if(Bu.current&&Pu.renderer){if(Pu.renderer.domElement.parentNode!==null&&Pu.renderer.domElement.parentNode!==Bu.current)throw new Error("There are more than 2 fiveCanvas in this context.");Pu.renderer.domElement.parentNode!==Bu.current&&Bu.current.appendChild(Pu.renderer.domElement),Pu.camera.aspect=Tu/Cu,Pu.camera.updateProjectionMatrix(),Pu.renderer.setSize(Tu,Cu),Pu.needsRender=!0}},[Tu,Cu,Bu.current]),u$1.createElement("div",{ref:Bu,style:Ru})},react.INJECTION_PROPNAME="$five",react.Store=U,react.createFiveFeature=function(){for(var _u=[],Tu=0;Tu<arguments.length;Tu++)_u[Tu]=arguments[Tu];return _u},createFiveProvider=react.createFiveProvider=function(_u){return _u===void 0&&(_u={}),function(Tu){function Cu(Pu){var Bu,Ru=this;Ru=Tu.call(this,Pu)||this;var Lu=function(Ou){var Du=Ou===void 0?{}:Ou,$u=Du.backgroundColor,ku=$u===void 0?1579548:$u,Fu=Du.backgroundAlpha,Nu=Fu===void 0?1:Fu,Vu=Du.pixelRatio,Gu=Vu===void 0?1:Vu,Hu=Du.webgl2,ju=Hu!==void 0&&Hu;if(typeof window!="undefined"){var Uu=null;if(!(Uu=ju?a$1.shift():f$1.shift())){if(ju){var zu=document.createElement("canvas"),Wu=zu.getContext("webgl2");if(Wu===null)throw new Error("error occurred when getting webgl2 canvas context");Uu=new i$1.WebGLRenderer({antialias:!1,alpha:!0,canvas:zu,context:Wu})}else Uu=new i$1.WebGLRenderer({antialias:!1,alpha:!0});Uu.outputEncoding=i$1.sRGBEncoding}return Uu.setPixelRatio(Gu),Uu.setClearColor(ku,Nu),Uu.autoClear=!0,Uu}}({pixelRatio:r$2.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:_u.backgroundAlpha,backgroundColor:_u.backgroundColor,webgl2:_u==null?void 0:_u.webgl2});return Ru.five=new r$2.Five(e$1.__assign({renderer:Lu},_u)),(Pu.work||Pu.initialWork)&&Ru.five.load(Pu.work||Pu.initialWork,Pu.initialState,void 0,(Bu=Pu.initialUserAction)===null||Bu===void 0||Bu),Ru.five.on("load",function(){var Ou;Ru.props.onWorkChange&&Ru.props.onWorkChange((Ou=Ru.five)===null||Ou===void 0?void 0:Ou.work)}),Ru.five.on("stateChange",function(Ou,Du){Ru.props.onStateChange&&Ru.props.onStateChange(Ou,Du)}),Ru.five.on("currentStateChange",function(Ou,Du){Ru.props.onCurrentStateChange&&Ru.props.onCurrentStateChange(Ou,Du)}),Ru.five.on("error",function(Ou){Ru.props.onError?Ru.props.onError(Ou):console.warn(Ou.message)}),Ru}return e$1.__extends(Cu,Tu),Cu.prototype.loadWork=function(Pu,Bu,Ru,Lu){if(Lu===void 0&&(Lu=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Pu,Bu,Ru,Lu)},Cu.prototype.shouldComponentUpdate=function(Pu){var Bu,Ru;return Pu.work&&Pu.work!==((Bu=this.five)===null||Bu===void 0?void 0:Bu.work)&&((Ru=this.five)===null||Ru===void 0||Ru.load(Pu.work,Pu.initialState)),!0},Cu.prototype.componentWillUnmount=function(){var Pu;this.five&&(this.five.dispose(),(Pu=this.five.renderer)&&(Pu.capabilities.isWebGL2?f$1.indexOf(Pu)===-1&&f$1.push(Pu):a$1.indexOf(Pu)===-1&&a$1.push(Pu)),delete this.five)},Cu.prototype.render=function(){var Pu=this;return u$1.createElement(c$1.Provider,{value:{five:this.five,loadWork:function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return Pu.loadWork.apply(Pu,Bu)}}},this.props.children)},Cu}(u$1.Component)},react.createStore=function(_u){var Tu=u$1.createContext(null);return{useStore:function(Cu){var Pu=u$1.useContext(Tu);if(Pu===null)throw new Error("StoreProvider never found.");var Bu=u$1.useRef(!0),Ru=u$1.useState(Pu.getValues(Cu)),Lu=Ru[0],Ou=Ru[1],Du=e$1.__spreadArray([Pu],Cu,!0);return u$1.useLayoutEffect(function(){return Bu.current?Bu.current=!1:Ou(Pu.getValues(Cu)),Pu.on(Cu,function($u){return Ou($u)})},Du),[Lu,u$1.useCallback(function($u){return Pu.setValues(Cu,$u)},Du)]},useStoreSetter:function(Cu){var Pu=u$1.useContext(Tu);if(Pu===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(Bu){return Pu.setValues(Cu,Bu)},e$1.__spreadArray([Pu],Cu,!0))},watchStore:function(Cu,Pu,Bu){var Ru=u$1.useContext(Tu);if(Ru===null)throw new Error("StoreProvider never found.");var Lu=e$1.__spreadArray([Ru],Cu,!0);Bu!==void 0&&(Lu=Lu.concat(Bu)),u$1.useLayoutEffect(function(){return Ru.on(Cu,Pu)},Lu)},useStoreAction:function(Cu){var Pu=u$1.useContext(Tu);if(Pu===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];var Lu=_u[Cu],Ou=Lu[0],Du=Lu.slice(1),$u=function(){return Pu.getValues(Du)},ku=function(Fu){return Pu.setValues(Du,Fu)};return Ou.apply(void 0,e$1.__spreadArray([$u,ku],Bu,!1))},[])},StoreProvider:function(Cu){function Pu(Bu){var Ru=Cu.call(this,Bu)||this;return Ru.store=new U(Bu.initialValue,function(){for(var Lu,Ou=[],Du=0;Du<arguments.length;Du++)Ou[Du]=arguments[Du];Ru.props.onValuesChange&&(Lu=Ru.props).onValuesChange.apply(Lu,Ou)}),Ru}return e$1.__extends(Pu,Cu),Pu.prototype.shouldComponentUpdate=function(Bu){return Bu.children!==this.props.children},Pu.prototype.render=function(){return u$1.createElement(Tu.Provider,{value:this.store},this.props.children)},Pu}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var _u=s$1();return{updateCamera:u$1.useCallback(function(Tu,Cu){return _u.updateCamera(Tu,Cu)},[_u]),initBasisLoader:u$1.useCallback(function(Tu){return _u.initBasisLoader(Tu)},[_u]),getPixels:u$1.useCallback(function(Tu,Cu,Pu,Bu,Ru){return _u.getPixels(Tu,Cu,Pu,Bu,Ru)},[_u]),render:u$1.useCallback(function(Tu){return _u.render(Tu)},[_u]),needsRender:u$1.useCallback(function(){return _u.needsRender=!0},[_u]),preloadPano:u$1.useCallback(function(Tu,Cu){return _u.preloadPano(Tu,Cu)},[_u])}},react.useFiveCameraDirection=function(){var _u=s$1(),Tu=u$1.useState(function(){return y$1(_u)}),Cu=Tu[0],Pu=Tu[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Pu(y$1(_u))})},[_u]),Cu},react.useFiveCameraRaycaster=function(){var _u=s$1(),Tu=u$1.useState(function(){return m$1(_u)}),Cu=Tu[0],Pu=Tu[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Pu(m$1(_u))})},[_u]),Cu},react.useFiveCurrentObserver=function(){var _u=s$1(),Tu=u$1.useState(function(){return _u.getCurrentState()}),Cu=Tu[0],Pu=Tu[1];return u$1.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Pu(_u.getCurrentState())})},[_u]),_u.work?_u.work.observers[Cu.panoIndex]:null},react.useFiveCurrentState=function(){var _u=s$1(),Tu=u$1.useState(function(){return _u.getCurrentState()}),Cu=Tu[0],Pu=Tu[1],Bu=u$1.useCallback(function(Ru,Lu,Ou){Lu===void 0&&(Lu=!1),Ou===void 0&&(Ou=!0);var Du=typeof Ru=="function"?Ru(_u.getCurrentState()):Ru;_u.setState(Du,Lu,Ou)},[_u]);return u$1.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Pu(_u.getCurrentState())})},[_u]),[Cu,Bu]},react.useFiveEventCallback=function(_u,Tu,Cu){var Pu=s$1(),Bu=[Pu,_u];Cu!==void 0&&(Bu=Bu.concat(Cu)),u$1.useLayoutEffect(function(){return Pu.on(_u,Tu)},Bu)},react.useFiveFloor=function(){var _u=s$1(),Tu=u$1.useState(_u.model.shownFloor),Cu=Tu[0],Pu=Tu[1],Bu=u$1.useState(_u.model.floorLength),Ru=Bu[0],Lu=Bu[1],Ou=u$1.useCallback(function(Du){typeof Du=="number"?_u.model.show(Du):_u.model.show()},[_u]);return u$1.useLayoutEffect(function(){var Du=[];return Du.push(_u.on("modelShownFloorChange",function(){return Pu(_u.model.shownFloor)})),Du.push(_u.on("modelLoaded",function(){return Lu(_u.model.floorLength)})),function(){for(var $u;$u=Du.shift();)$u()}},[_u]),[Cu,Ru,Ou]},react.useFiveHelper=function(){var _u=s$1(),Tu=u$1.useState(_u.helperVisible),Cu=Tu[0],Pu=Tu[1],Bu=u$1.useCallback(function(Ru){_u.helperVisible=Ru},[_u]);return u$1.useLayoutEffect(function(){return _u.on("helpersVisibleChange",function(Ru){return Pu(Ru)})},[_u]),[Cu,Bu]},react.useFiveModelIntersectRaycaster=function(){var _u=s$1();return u$1.useCallback(function(Tu){return _u.model.intersectRaycaster(Tu)},[_u])},react.useFiveModelReadyState=function(){var _u=s$1(),Tu=u$1.useState(function(){return g$1(_u)}),Cu=Tu[0],Pu=Tu[1];return u$1.useLayoutEffect(function(){return _u.on("modelLoaded",function(){return Pu(g$1(_u))})},[_u]),Cu},react.useFiveProject2d=function(){var _u=s$1(),Tu=u$1.useState(function(){return Symbol()});Tu[0];var Cu=Tu[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Cu(Symbol())})},[_u]),u$1.useCallback(function(Pu,Bu){return _u.project2d(Pu,Bu)},[_u])},react.useFiveScene=p$1,react.useFiveSceneEffect=v$1,react.useFiveState=function(){var _u=s$1(),Tu=u$1.useState(function(){return h$1(_u)}),Cu=Tu[0],Pu=Tu[1],Bu=u$1.useCallback(function(Ru,Lu,Ou){Lu===void 0&&(Lu=!1),Ou===void 0&&(Ou=!0);var Du=typeof Ru=="function"?Ru(_u.getCurrentState()):Ru;_u.setState(Du,Lu,Ou)},[_u]);return u$1.useLayoutEffect(function(){return _u.on("stateChange",function(){return Pu(h$1(_u))})},[_u]),[Cu,Bu]},react.useFiveWork=function(){var _u=s$1(),Tu=l$2(),Cu=u$1.useState(function(){return _u.work}),Pu=Cu[0],Bu=Cu[1];return u$1.useLayoutEffect(function(){return _u.on("load",function(){return Bu(_u.work)})},[_u]),[Pu,Tu]},react.withFive=function(_u){return function(Tu){return u$1.forwardRef(function(Cu,Pu){var Bu=s$1(),Ru=l$2(),Lu=function(ip,rp){return[S("unsafe__fiveInstance",rp)?ip:void 0]}(Bu,_u)[0],Ou=function(ip,rp){var fp=S("state",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return e$1.__assign({},ip.state)},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("stateChange",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),Du=Ou[0],$u=Ou[1],ku=function(ip,rp){var fp=S("currentState",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.getCurrentState()},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("currentStateChange",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),Fu=ku[0],Nu=ku[1],Vu=function(ip,rp){var fp=S("currentObserver",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.getCurrentState()},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("currentStateChange",function(){return gp(Symbol())})},[ip]),[Ap?ip.work?ip.work.observers[Ap.panoIndex]:null:void 0,pp]}(Bu,_u),Gu=Vu[0],Hu=Vu[1],ju=function(ip,rp){var fp=S("work",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.work},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("load",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),Uu=ju[0],zu=ju[1],Wu=function(ip,rp){var fp=S("model",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.model},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("modelLoaded",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),Qu=Wu[0],qu=Wu[1],Yu=function(ip,rp){return[S("scene",rp)?ip.scene:void 0]}(Bu,_u)[0],Xc=function(ip,rp){var fp=S("cameraDirection",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.camera.getWorldDirection(new i$1.Vector3)},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("cameraUpdate",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),_h=Xc[0],_d=Xc[1],Ku=function(ip,rp){var fp=S("cameraRaycaster",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp){var Mp=ip.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(ip.camera.position,Mp)}},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("cameraUpdate",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),Xu=Ku[0],Ju=Ku[1],Zu=function(ip,rp){var fp=S("modelReadyState",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.model.empty?"Empty":"Loaded"},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("modelLoaded",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),_c=Zu[0],_f=Zu[1],ep=function(ip,rp){var fp=S("shownFloor",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.model.shownFloor},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("modelShownFloorChange",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),tp=ep[0],op=ep[1],hp=function(ip,rp){var fp=S("totalFloorLength",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.model.hasFloors()},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("modelLoaded",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),cp=hp[0],Sp=hp[1],yp=function(ip,rp){var fp=S("helperVisible",rp),up=u$1.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$1.useMemo(function(){if(fp)return ip.helperVisible},[ip,pp]);return u$1.useLayoutEffect(function(){if(fp)return ip.on("helpersVisibleChange",function(){return gp(Symbol())})},[ip]),[Ap,pp]}(Bu,_u),Rp=yp[0],wp=yp[1],Pp=u$1.useMemo(function(){var ip={};return b(ip,{setState:w$1(Bu,_u),loadWork:C$1(Ru,_u),on:k(Bu,_u),once:x(Bu,_u),off:E$1(Bu,_u),intersectRaycaster:L$1(Bu,_u),project2d:F(Bu,_u),updateCamera:_(Bu,_u),initBasisLoader:P$1(Bu,_u),getPixels:R$1(Bu,_u),render:V(Bu,_u),needsRender:W$1(Bu,_u),preloadPano:M(Bu,_u),showFloor:O$1(Bu,_u),toggleHelperVisible:j(Bu,_u)}),ip},[Bu,Ru]),Ep=u$1.useMemo(function(){var ip=e$1.__assign({},Pp);return b(ip,{unsafe__fiveInstance:Lu,state:Du,currentState:Fu,currentObserver:Gu,work:Uu,model:Qu,scene:Yu,cameraDirection:_h,cameraRaycaster:Xu,modelReadyState:_c,shownFloor:tp,totalFloorLength:cp,helperVisible:Rp}),ip},[Bu,Pp,$u,Nu,Hu,zu,qu,_d,Ju,_f,op,Sp,wp]);return u$1.createElement(Tu,e$1.__assign({ref:Pu,$five:Ep},Cu))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$1.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(_u,Tu,Cu){var Pu,Bu={},Ru=null,Lu=null;Cu!==void 0&&(Ru=""+Cu),Tu.key!==void 0&&(Ru=""+Tu.key),Tu.ref!==void 0&&(Lu=Tu.ref);for(Pu in Tu)n$1.call(Tu,Pu)&&!p.hasOwnProperty(Pu)&&(Bu[Pu]=Tu[Pu]);if(_u&&_u.defaultProps)for(Pu in Tu=_u.defaultProps,Tu)Bu[Pu]===void 0&&(Bu[Pu]=Tu[Pu]);return{$$typeof:g,type:_u,key:Ru,ref:Lu,props:Bu,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(_u){(function(){var Tu={}.hasOwnProperty;function Cu(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++){var Ru=arguments[Bu];if(!!Ru){var Lu=typeof Ru;if(Lu==="string"||Lu==="number")Pu.push(Ru);else if(Array.isArray(Ru)){if(Ru.length){var Ou=Cu.apply(null,Ru);Ou&&Pu.push(Ou)}}else if(Lu==="object")if(Ru.toString===Object.prototype.toString)for(var Du in Ru)Tu.call(Ru,Du)&&Ru[Du]&&Pu.push(Du);else Pu.push(Ru.toString())}}return Pu.join(" ")}_u.exports?(Cu.default=Cu,_u.exports=Cu):window.classNames=Cu})()})(classnames);var classNames=classnames.exports;function die(_u){for(var Tu=arguments.length,Cu=new Array(Tu>1?Tu-1:0),Pu=1;Pu<Tu;Pu++)Cu[Pu-1]=arguments[Pu];throw new Error(typeof _u=="number"?"[MobX] minified error nr: "+_u+(Cu.length?" "+Cu.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+_u)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign$1=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(_u){var Tu=!1;return function(){if(!Tu)return Tu=!0,_u.apply(this,arguments)}}var noop$1=function _u(){};function isFunction(_u){return typeof _u=="function"}function isStringish(_u){var Tu=typeof _u;switch(Tu){case"string":case"symbol":case"number":return!0}return!1}function isObject$3(_u){return _u!==null&&typeof _u=="object"}function isPlainObject(_u){if(!isObject$3(_u))return!1;var Tu=Object.getPrototypeOf(_u);if(Tu==null)return!0;var Cu=Object.hasOwnProperty.call(Tu,"constructor")&&Tu.constructor;return typeof Cu=="function"&&Cu.toString()===plainObjectString}function isGenerator(_u){var Tu=_u==null?void 0:_u.constructor;return Tu?Tu.name==="GeneratorFunction"||Tu.displayName==="GeneratorFunction":!1}function addHiddenProp(_u,Tu,Cu){defineProperty(_u,Tu,{enumerable:!1,writable:!0,configurable:!0,value:Cu})}function addHiddenFinalProp(_u,Tu,Cu){defineProperty(_u,Tu,{enumerable:!1,writable:!1,configurable:!0,value:Cu})}function createInstanceofPredicate(_u,Tu){var Cu="isMobX"+_u;return Tu.prototype[Cu]=!0,function(Pu){return isObject$3(Pu)&&Pu[Cu]===!0}}function isES6Map(_u){return _u instanceof Map}function isES6Set(_u){return _u instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(_u){var Tu=Object.keys(_u);if(!hasGetOwnPropertySymbols)return Tu;var Cu=Object.getOwnPropertySymbols(_u);return Cu.length?[].concat(Tu,Cu.filter(function(Pu){return objectPrototype.propertyIsEnumerable.call(_u,Pu)})):Tu}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(_u){return Object.getOwnPropertyNames(_u).concat(Object.getOwnPropertySymbols(_u))}:Object.getOwnPropertyNames;function toPrimitive(_u){return _u===null?null:typeof _u=="object"?""+_u:_u}function hasProp(_u,Tu){return objectPrototype.hasOwnProperty.call(_u,Tu)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function _u(Tu){var Cu={};return ownKeys(Tu).forEach(function(Pu){Cu[Pu]=getDescriptor(Tu,Pu)}),Cu};function _defineProperties(_u,Tu){for(var Cu=0;Cu<Tu.length;Cu++){var Pu=Tu[Cu];Pu.enumerable=Pu.enumerable||!1,Pu.configurable=!0,"value"in Pu&&(Pu.writable=!0),Object.defineProperty(_u,Pu.key,Pu)}}function _createClass(_u,Tu,Cu){return Tu&&_defineProperties(_u.prototype,Tu),Cu&&_defineProperties(_u,Cu),Object.defineProperty(_u,"prototype",{writable:!1}),_u}function _extends(){return _extends=Object.assign||function(_u){for(var Tu=1;Tu<arguments.length;Tu++){var Cu=arguments[Tu];for(var Pu in Cu)Object.prototype.hasOwnProperty.call(Cu,Pu)&&(_u[Pu]=Cu[Pu])}return _u},_extends.apply(this,arguments)}function _inheritsLoose(_u,Tu){_u.prototype=Object.create(Tu.prototype),_u.prototype.constructor=_u,_setPrototypeOf(_u,Tu)}function _setPrototypeOf(_u,Tu){return _setPrototypeOf=Object.setPrototypeOf||function(Pu,Bu){return Pu.__proto__=Bu,Pu},_setPrototypeOf(_u,Tu)}function _assertThisInitialized(_u){if(_u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _u}function _unsupportedIterableToArray(_u,Tu){if(!!_u){if(typeof _u=="string")return _arrayLikeToArray(_u,Tu);var Cu=Object.prototype.toString.call(_u).slice(8,-1);if(Cu==="Object"&&_u.constructor&&(Cu=_u.constructor.name),Cu==="Map"||Cu==="Set")return Array.from(_u);if(Cu==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Cu))return _arrayLikeToArray(_u,Tu)}}function _arrayLikeToArray(_u,Tu){(Tu==null||Tu>_u.length)&&(Tu=_u.length);for(var Cu=0,Pu=new Array(Tu);Cu<Tu;Cu++)Pu[Cu]=_u[Cu];return Pu}function _createForOfIteratorHelperLoose(_u,Tu){var Cu=typeof Symbol!="undefined"&&_u[Symbol.iterator]||_u["@@iterator"];if(Cu)return(Cu=Cu.call(_u)).next.bind(Cu);if(Array.isArray(_u)||(Cu=_unsupportedIterableToArray(_u))||Tu&&_u&&typeof _u.length=="number"){Cu&&(_u=Cu);var Pu=0;return function(){return Pu>=_u.length?{done:!0}:{done:!1,value:_u[Pu++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(_u){function Tu(Cu,Pu){storeAnnotation(Cu,Pu,_u)}return Object.assign(Tu,_u)}function storeAnnotation(_u,Tu,Cu){hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),isOverride(Cu)||(_u[storedAnnotationsSymbol][Tu]=Cu)}function collectStoredAnnotations(_u){return hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),_u[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function _u(Cu){Cu===void 0&&(Cu="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=Cu}var Tu=_u.prototype;return Tu.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Pu){return Pu()})},Tu.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Pu){return Pu()})},Tu.reportObserved=function(){return reportObserved(this)},Tu.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},Tu.toString=function(){return this.name_},_u}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(_u,Tu,Cu){Tu===void 0&&(Tu=noop$1),Cu===void 0&&(Cu=noop$1);var Pu=new Atom(_u);return Tu!==noop$1&&onBecomeObserved(Pu,Tu),Cu!==noop$1&&onBecomeUnobserved(Pu,Cu),Pu}function identityComparer(_u,Tu){return _u===Tu}function structuralComparer(_u,Tu){return deepEqual(_u,Tu)}function shallowComparer(_u,Tu){return deepEqual(_u,Tu,1)}function defaultComparer(_u,Tu){return Object.is?Object.is(_u,Tu):_u===Tu?_u!==0||1/_u===1/Tu:_u!==_u&&Tu!==Tu}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(_u,Tu,Cu){return isObservable(_u)?_u:Array.isArray(_u)?observable.array(_u,{name:Cu}):isPlainObject(_u)?observable.object(_u,void 0,{name:Cu}):isES6Map(_u)?observable.map(_u,{name:Cu}):isES6Set(_u)?observable.set(_u,{name:Cu}):typeof _u=="function"&&!isAction(_u)&&!isFlow(_u)?isGenerator(_u)?flow(_u):autoAction(Cu,_u):_u}function shallowEnhancer(_u,Tu,Cu){if(_u==null||isObservableObject(_u)||isObservableArray(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(Array.isArray(_u))return observable.array(_u,{name:Cu,deep:!1});if(isPlainObject(_u))return observable.object(_u,void 0,{name:Cu,deep:!1});if(isES6Map(_u))return observable.map(_u,{name:Cu,deep:!1});if(isES6Set(_u))return observable.set(_u,{name:Cu,deep:!1})}function referenceEnhancer(_u){return _u}function refStructEnhancer(_u,Tu){return deepEqual(_u,Tu)?Tu:_u}var OVERRIDE="override";function isOverride(_u){return _u.annotationType_===OVERRIDE}function createActionAnnotation(_u,Tu){return{annotationType_:_u,options_:Tu,make_:make_$1,extend_:extend_$1}}function make_$1(_u,Tu,Cu,Pu){var Bu;if((Bu=this.options_)!=null&&Bu.bound)return this.extend_(_u,Tu,Cu,!1)===null?0:1;if(Pu===_u.target_)return this.extend_(_u,Tu,Cu,!1)===null?0:2;if(isAction(Cu.value))return 1;var Ru=createActionDescriptor(_u,this,Tu,Cu,!1);return defineProperty(Pu,Tu,Ru),2}function extend_$1(_u,Tu,Cu,Pu){var Bu=createActionDescriptor(_u,this,Tu,Cu);return _u.defineProperty_(Tu,Bu,Pu)}function assertActionDescriptor(_u,Tu,Cu,Pu){Tu.annotationType_,Pu.value}function createActionDescriptor(_u,Tu,Cu,Pu,Bu){var Ru,Lu,Ou,Du,$u,ku,Fu;Bu===void 0&&(Bu=globalState.safeDescriptors),assertActionDescriptor(_u,Tu,Cu,Pu);var Nu=Pu.value;if((Ru=Tu.options_)!=null&&Ru.bound){var Vu;Nu=Nu.bind((Vu=_u.proxy_)!=null?Vu:_u.target_)}return{value:createAction((Lu=(Ou=Tu.options_)==null?void 0:Ou.name)!=null?Lu:Cu.toString(),Nu,(Du=($u=Tu.options_)==null?void 0:$u.autoAction)!=null?Du:!1,(ku=Tu.options_)!=null&&ku.bound?(Fu=_u.proxy_)!=null?Fu:_u.target_:void 0),configurable:Bu?_u.isPlainObject_:!0,enumerable:!1,writable:!Bu}}function createFlowAnnotation(_u,Tu){return{annotationType_:_u,options_:Tu,make_:make_$2,extend_:extend_$2}}function make_$2(_u,Tu,Cu,Pu){var Bu;if(Pu===_u.target_)return this.extend_(_u,Tu,Cu,!1)===null?0:2;if((Bu=this.options_)!=null&&Bu.bound&&(!hasProp(_u.target_,Tu)||!isFlow(_u.target_[Tu]))&&this.extend_(_u,Tu,Cu,!1)===null)return 0;if(isFlow(Cu.value))return 1;var Ru=createFlowDescriptor(_u,this,Tu,Cu,!1,!1);return defineProperty(Pu,Tu,Ru),2}function extend_$2(_u,Tu,Cu,Pu){var Bu,Ru=createFlowDescriptor(_u,this,Tu,Cu,(Bu=this.options_)==null?void 0:Bu.bound);return _u.defineProperty_(Tu,Ru,Pu)}function assertFlowDescriptor(_u,Tu,Cu,Pu){Tu.annotationType_,Pu.value}function createFlowDescriptor(_u,Tu,Cu,Pu,Bu,Ru){Ru===void 0&&(Ru=globalState.safeDescriptors),assertFlowDescriptor(_u,Tu,Cu,Pu);var Lu=Pu.value;if(isFlow(Lu)||(Lu=flow(Lu)),Bu){var Ou;Lu=Lu.bind((Ou=_u.proxy_)!=null?Ou:_u.target_),Lu.isMobXFlow=!0}return{value:Lu,configurable:Ru?_u.isPlainObject_:!0,enumerable:!1,writable:!Ru}}function createComputedAnnotation(_u,Tu){return{annotationType_:_u,options_:Tu,make_:make_$3,extend_:extend_$3}}function make_$3(_u,Tu,Cu){return this.extend_(_u,Tu,Cu,!1)===null?0:1}function extend_$3(_u,Tu,Cu,Pu){return assertComputedDescriptor(_u,this,Tu,Cu),_u.defineComputedProperty_(Tu,_extends({},this.options_,{get:Cu.get,set:Cu.set}),Pu)}function assertComputedDescriptor(_u,Tu,Cu,Pu){Tu.annotationType_,Pu.get}function createObservableAnnotation(_u,Tu){return{annotationType_:_u,options_:Tu,make_:make_$4,extend_:extend_$4}}function make_$4(_u,Tu,Cu){return this.extend_(_u,Tu,Cu,!1)===null?0:1}function extend_$4(_u,Tu,Cu,Pu){var Bu,Ru;return assertObservableDescriptor(_u,this),_u.defineObservableProperty_(Tu,Cu.value,(Bu=(Ru=this.options_)==null?void 0:Ru.enhancer)!=null?Bu:deepEnhancer,Pu)}function assertObservableDescriptor(_u,Tu,Cu,Pu){Tu.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(_u){return{annotationType_:AUTO,options_:_u,make_:make_$5,extend_:extend_$5}}function make_$5(_u,Tu,Cu,Pu){var Bu,Ru;if(Cu.get)return computed.make_(_u,Tu,Cu,Pu);if(Cu.set){var Lu=createAction(Tu.toString(),Cu.set);return Pu===_u.target_?_u.defineProperty_(Tu,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:Lu})===null?0:2:(defineProperty(Pu,Tu,{configurable:!0,set:Lu}),2)}if(Pu!==_u.target_&&typeof Cu.value=="function"){var Ou;if(isGenerator(Cu.value)){var Du,$u=(Du=this.options_)!=null&&Du.autoBind?flow.bound:flow;return $u.make_(_u,Tu,Cu,Pu)}var ku=(Ou=this.options_)!=null&&Ou.autoBind?autoAction.bound:autoAction;return ku.make_(_u,Tu,Cu,Pu)}var Fu=((Bu=this.options_)==null?void 0:Bu.deep)===!1?observable.ref:observable;if(typeof Cu.value=="function"&&(Ru=this.options_)!=null&&Ru.autoBind){var Nu;Cu.value=Cu.value.bind((Nu=_u.proxy_)!=null?Nu:_u.target_)}return Fu.make_(_u,Tu,Cu,Pu)}function extend_$5(_u,Tu,Cu,Pu){var Bu,Ru;if(Cu.get)return computed.extend_(_u,Tu,Cu,Pu);if(Cu.set)return _u.defineProperty_(Tu,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:createAction(Tu.toString(),Cu.set)},Pu);if(typeof Cu.value=="function"&&(Bu=this.options_)!=null&&Bu.autoBind){var Lu;Cu.value=Cu.value.bind((Lu=_u.proxy_)!=null?Lu:_u.target_)}var Ou=((Ru=this.options_)==null?void 0:Ru.deep)===!1?observable.ref:observable;return Ou.extend_(_u,Tu,Cu,Pu)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(_u){return _u||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(_u){return _u.deep===!0?deepEnhancer:_u.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(_u.defaultDecorator)}function getAnnotationFromOptions(_u){var Tu;return _u?(Tu=_u.defaultDecorator)!=null?Tu:createAutoAnnotation(_u):void 0}function getEnhancerFromAnnotation(_u){var Tu,Cu;return _u&&(Tu=(Cu=_u.options_)==null?void 0:Cu.enhancer)!=null?Tu:deepEnhancer}function createObservable(_u,Tu,Cu){if(isStringish(Tu)){storeAnnotation(_u,Tu,observableAnnotation);return}return isObservable(_u)?_u:isPlainObject(_u)?observable.object(_u,Tu,Cu):Array.isArray(_u)?observable.array(_u,Tu):isES6Map(_u)?observable.map(_u,Tu):isES6Set(_u)?observable.set(_u,Tu):typeof _u=="object"&&_u!==null?_u:observable.box(_u,Tu)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function _u(Tu,Cu){var Pu=asCreateObservableOptions(Cu);return new ObservableValue(Tu,getEnhancerFromOptions(Pu),Pu.name,!0,Pu.equals)},array:function _u(Tu,Cu){var Pu=asCreateObservableOptions(Cu);return(globalState.useProxies===!1||Pu.proxy===!1?createLegacyArray:createObservableArray)(Tu,getEnhancerFromOptions(Pu),Pu.name)},map:function _u(Tu,Cu){var Pu=asCreateObservableOptions(Cu);return new ObservableMap(Tu,getEnhancerFromOptions(Pu),Pu.name)},set:function _u(Tu,Cu){var Pu=asCreateObservableOptions(Cu);return new ObservableSet(Tu,getEnhancerFromOptions(Pu),Pu.name)},object:function _u(Tu,Cu,Pu){return extendObservable(globalState.useProxies===!1||(Pu==null?void 0:Pu.proxy)===!1?asObservableObject({},Pu):asDynamicObservableObject({},Pu),Tu,Cu)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign$1(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function _u(Tu,Cu){if(isStringish(Cu))return storeAnnotation(Tu,Cu,computedAnnotation);if(isPlainObject(Tu))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,Tu));var Pu=isPlainObject(Cu)?Cu:{};return Pu.get=Tu,Pu.name||(Pu.name=Tu.name||""),new ComputedValue(Pu)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(_u,Tu,Cu,Pu){Cu===void 0&&(Cu=!1);function Bu(){return executeAction(_u,Cu,Tu,Pu||this,arguments)}return Bu.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=_u,Object.defineProperty(Bu,"name",tmpNameDescriptor)),Bu}function executeAction(_u,Tu,Cu,Pu,Bu){var Ru=_startAction(_u,Tu);try{return Cu.apply(Pu,Bu)}catch(Lu){throw Ru.error_=Lu,Lu}finally{_endAction(Ru)}}function _startAction(_u,Tu,Cu,Pu){var Bu=!1,Ru=0,Lu=globalState.trackingDerivation,Ou=!Tu||!Lu;startBatch();var Du=globalState.allowStateChanges;Ou&&(untrackedStart(),Du=allowStateChangesStart(!0));var $u=allowStateReadsStart(!0),ku={runAsAction_:Ou,prevDerivation_:Lu,prevAllowStateChanges_:Du,prevAllowStateReads_:$u,notifySpy_:Bu,startTime_:Ru,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=ku.actionId_,ku}function _endAction(_u){currentActionId!==_u.actionId_&&die(30),currentActionId=_u.parentActionId_,_u.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(_u.prevAllowStateChanges_),allowStateReadsEnd(_u.prevAllowStateReads_),endBatch(),_u.runAsAction_&&untrackedEnd(_u.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(_u,Tu){var Cu=allowStateChangesStart(_u);try{return Tu()}finally{allowStateChangesEnd(Cu)}}function allowStateChangesStart(_u){var Tu=globalState.allowStateChanges;return globalState.allowStateChanges=_u,Tu}function allowStateChangesEnd(_u){globalState.allowStateChanges=_u}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(_u,Tu){_inheritsLoose(Cu,_u);function Cu(Bu,Ru,Lu,Ou,Du){var $u;return Lu===void 0&&(Lu="ObservableValue"),Du===void 0&&(Du=comparer.default),$u=_u.call(this,Lu)||this,$u.enhancer=void 0,$u.name_=void 0,$u.equals=void 0,$u.hasUnreportedChange_=!1,$u.interceptors_=void 0,$u.changeListeners_=void 0,$u.value_=void 0,$u.dehancer=void 0,$u.enhancer=Ru,$u.name_=Lu,$u.equals=Du,$u.value_=Ru(Bu,void 0,Lu),$u}var Pu=Cu.prototype;return Pu.dehanceValue=function(Ru){return this.dehancer!==void 0?this.dehancer(Ru):Ru},Pu.set=function(Ru){this.value_,Ru=this.prepareNewValue_(Ru),Ru!==globalState.UNCHANGED&&this.setNewValue_(Ru)},Pu.prepareNewValue_=function(Ru){if(hasInterceptors(this)){var Lu=interceptChange(this,{object:this,type:UPDATE,newValue:Ru});if(!Lu)return globalState.UNCHANGED;Ru=Lu.newValue}return Ru=this.enhancer(Ru,this.value_,this.name_),this.equals(this.value_,Ru)?globalState.UNCHANGED:Ru},Pu.setNewValue_=function(Ru){var Lu=this.value_;this.value_=Ru,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Ru,oldValue:Lu})},Pu.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},Pu.intercept_=function(Ru){return registerInterceptor(this,Ru)},Pu.observe_=function(Ru,Lu){return Lu&&Ru({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Ru)},Pu.raw=function(){return this.value_},Pu.toJSON=function(){return this.get()},Pu.toString=function(){return this.name_+"["+this.value_+"]"},Pu.valueOf=function(){return toPrimitive(this.get())},Pu[Tu]=function(){return this.valueOf()},Cu}(Atom,_Symbol$toPrimitive),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(_u){function Tu(Pu){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,Pu.get||die(31),this.derivation=Pu.get,this.name_=Pu.name||"ComputedValue",Pu.set&&(this.setter_=createAction("ComputedValue-setter",Pu.set)),this.equals_=Pu.equals||(Pu.compareStructural||Pu.struct?comparer.structural:comparer.default),this.scope_=Pu.context,this.requiresReaction_=Pu.requiresReaction,this.keepAlive_=!!Pu.keepAlive}var Cu=Tu.prototype;return Cu.onBecomeStale_=function(){propagateMaybeChanged(this)},Cu.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Bu){return Bu()})},Cu.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Bu){return Bu()})},Cu.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Bu=globalState.trackingContext;this.keepAlive_&&!Bu&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Bu}var Ru=this.value_;if(isCaughtException(Ru))throw Ru.cause;return Ru},Cu.set=function(Bu){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Bu)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},Cu.trackAndCompute=function(){var Bu=this.value_,Ru=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Lu=this.computeValue_(!0),Ou=Ru||isCaughtException(Bu)||isCaughtException(Lu)||!this.equals_(Bu,Lu);return Ou&&(this.value_=Lu),Ou},Cu.computeValue_=function(Bu){this.isComputing_=!0;var Ru=allowStateChangesStart(!1),Lu;if(Bu)Lu=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Lu=this.derivation.call(this.scope_);else try{Lu=this.derivation.call(this.scope_)}catch(Ou){Lu=new CaughtException(Ou)}return allowStateChangesEnd(Ru),this.isComputing_=!1,Lu},Cu.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},Cu.observe_=function(Bu,Ru){var Lu=this,Ou=!0,Du=void 0;return autorun(function(){var $u=Lu.get();if(!Ou||Ru){var ku=untrackedStart();Bu({observableKind:"computed",debugObjectName:Lu.name_,type:UPDATE,object:Lu,newValue:$u,oldValue:Du}),untrackedEnd(ku)}Ou=!1,Du=$u})},Cu.warnAboutUntrackedRead_=function(){},Cu.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},Cu.valueOf=function(){return toPrimitive(this.get())},Cu[_u]=function(){return this.valueOf()},Tu}(_Symbol$toPrimitive$1),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(_u){_u[_u.NOT_TRACKING_=-1]="NOT_TRACKING_",_u[_u.UP_TO_DATE_=0]="UP_TO_DATE_",_u[_u.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",_u[_u.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(_u){_u[_u.NONE=0]="NONE",_u[_u.LOG=1]="LOG",_u[_u.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function _u(Tu){this.cause=void 0,this.cause=Tu};function isCaughtException(_u){return _u instanceof CaughtException}function shouldCompute(_u){switch(_u.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var Tu=allowStateReadsStart(!0),Cu=untrackedStart(),Pu=_u.observing_,Bu=Pu.length,Ru=0;Ru<Bu;Ru++){var Lu=Pu[Ru];if(isComputedValue(Lu)){if(globalState.disableErrorBoundaries)Lu.get();else try{Lu.get()}catch{return untrackedEnd(Cu),allowStateReadsEnd(Tu),!0}if(_u.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(Cu),allowStateReadsEnd(Tu),!0}}return changeDependenciesStateTo0(_u),untrackedEnd(Cu),allowStateReadsEnd(Tu),!1}}}function checkIfStateModificationsAreAllowed(_u){}function trackDerivedFunction(_u,Tu,Cu){var Pu=allowStateReadsStart(!0);changeDependenciesStateTo0(_u),_u.newObserving_=new Array(_u.observing_.length+100),_u.unboundDepsCount_=0,_u.runId_=++globalState.runId;var Bu=globalState.trackingDerivation;globalState.trackingDerivation=_u,globalState.inBatch++;var Ru;if(globalState.disableErrorBoundaries===!0)Ru=Tu.call(Cu);else try{Ru=Tu.call(Cu)}catch(Lu){Ru=new CaughtException(Lu)}return globalState.inBatch--,globalState.trackingDerivation=Bu,bindDependencies(_u),allowStateReadsEnd(Pu),Ru}function bindDependencies(_u){for(var Tu=_u.observing_,Cu=_u.observing_=_u.newObserving_,Pu=IDerivationState_.UP_TO_DATE_,Bu=0,Ru=_u.unboundDepsCount_,Lu=0;Lu<Ru;Lu++){var Ou=Cu[Lu];Ou.diffValue_===0&&(Ou.diffValue_=1,Bu!==Lu&&(Cu[Bu]=Ou),Bu++),Ou.dependenciesState_>Pu&&(Pu=Ou.dependenciesState_)}for(Cu.length=Bu,_u.newObserving_=null,Ru=Tu.length;Ru--;){var Du=Tu[Ru];Du.diffValue_===0&&removeObserver(Du,_u),Du.diffValue_=0}for(;Bu--;){var $u=Cu[Bu];$u.diffValue_===1&&($u.diffValue_=0,addObserver($u,_u))}Pu!==IDerivationState_.UP_TO_DATE_&&(_u.dependenciesState_=Pu,_u.onBecomeStale_())}function clearObserving(_u){var Tu=_u.observing_;_u.observing_=[];for(var Cu=Tu.length;Cu--;)removeObserver(Tu[Cu],_u);_u.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(_u){var Tu=untrackedStart();try{return _u()}finally{untrackedEnd(Tu)}}function untrackedStart(){var _u=globalState.trackingDerivation;return globalState.trackingDerivation=null,_u}function untrackedEnd(_u){globalState.trackingDerivation=_u}function allowStateReadsStart(_u){var Tu=globalState.allowStateReads;return globalState.allowStateReads=_u,Tu}function allowStateReadsEnd(_u){globalState.allowStateReads=_u}function changeDependenciesStateTo0(_u){if(_u.dependenciesState_!==IDerivationState_.UP_TO_DATE_){_u.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var Tu=_u.observing_,Cu=Tu.length;Cu--;)Tu[Cu].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function _u(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var _u=getGlobal();return _u.__mobxInstanceCount>0&&!_u.__mobxGlobals&&(canMergeGlobalState=!1),_u.__mobxGlobals&&_u.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?_u.__mobxGlobals?(_u.__mobxInstanceCount+=1,_u.__mobxGlobals.UNCHANGED||(_u.__mobxGlobals.UNCHANGED={}),_u.__mobxGlobals):(_u.__mobxInstanceCount=1,_u.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var _u=getGlobal();--_u.__mobxInstanceCount===0&&(_u.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(_u,Tu){_u.observers_.add(Tu),_u.lowestObserverState_>Tu.dependenciesState_&&(_u.lowestObserverState_=Tu.dependenciesState_)}function removeObserver(_u,Tu){_u.observers_.delete(Tu),_u.observers_.size===0&&queueForUnobservation(_u)}function queueForUnobservation(_u){_u.isPendingUnobservation_===!1&&(_u.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(_u))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var _u=globalState.pendingUnobservations,Tu=0;Tu<_u.length;Tu++){var Cu=_u[Tu];Cu.isPendingUnobservation_=!1,Cu.observers_.size===0&&(Cu.isBeingObserved_&&(Cu.isBeingObserved_=!1,Cu.onBUO()),Cu instanceof ComputedValue&&Cu.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(_u){var Tu=globalState.trackingDerivation;return Tu!==null?(Tu.runId_!==_u.lastAccessedBy_&&(_u.lastAccessedBy_=Tu.runId_,Tu.newObserving_[Tu.unboundDepsCount_++]=_u,!_u.isBeingObserved_&&globalState.trackingContext&&(_u.isBeingObserved_=!0,_u.onBO())),!0):(_u.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(_u),!1)}function propagateChanged(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function(Tu){Tu.dependenciesState_===IDerivationState_.UP_TO_DATE_&&Tu.onBecomeStale_(),Tu.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function(Tu){Tu.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?Tu.dependenciesState_=IDerivationState_.STALE_:Tu.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(_u){_u.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,_u.observers_.forEach(function(Tu){Tu.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(Tu.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,Tu.onBecomeStale_())}))}var Reaction=function(){function _u(Cu,Pu,Bu,Ru){Cu===void 0&&(Cu="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=Cu,this.onInvalidate_=Pu,this.errorHandler_=Bu,this.requiresObservable_=Ru}var Tu=_u.prototype;return Tu.onBecomeStale_=function(){this.schedule_()},Tu.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},Tu.isScheduled=function(){return this.isScheduled_},Tu.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Pu=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Bu){this.reportExceptionInDerivation_(Bu)}}globalState.trackingContext=Pu,endBatch()}},Tu.track=function(Pu){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Bu=globalState.trackingContext;globalState.trackingContext=this;var Ru=trackDerivedFunction(this,Pu,void 0);globalState.trackingContext=Bu,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Ru)&&this.reportExceptionInDerivation_(Ru.cause),endBatch()}},Tu.reportExceptionInDerivation_=function(Pu){var Bu=this;if(this.errorHandler_){this.errorHandler_(Pu,this);return}if(globalState.disableErrorBoundaries)throw Pu;var Ru="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Ru,Pu),globalState.globalReactionErrorHandlers.forEach(function(Lu){return Lu(Pu,Bu)})},Tu.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},Tu.getDisposer_=function(){var Pu=this.dispose.bind(this);return Pu[$mobx]=this,Pu},Tu.toString=function(){return"Reaction["+this.name_+"]"},Tu.trace=function(Pu){Pu===void 0&&(Pu=!1),trace(this,Pu)},_u}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function _u(Tu){return Tu()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var _u=globalState.pendingReactions,Tu=0;_u.length>0;){++Tu===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+_u[0]),_u.splice(0));for(var Cu=_u.splice(0),Pu=0,Bu=Cu.length;Pu<Bu;Pu++)Cu[Pu].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(_u){var Tu=reactionScheduler;reactionScheduler=function(Pu){return _u(function(){return Tu(Pu)})}}function isSpyEnabled(){return!1}function spyReport(_u){}function spyReportStart(_u){}function spyReportEnd(_u){}function spy(_u){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(_u){var Tu=function(Pu,Bu){if(isFunction(Pu))return createAction(Pu.name||DEFAULT_ACTION_NAME,Pu,_u);if(isFunction(Bu))return createAction(Pu,Bu,_u);if(isStringish(Bu))return storeAnnotation(Pu,Bu,_u?autoActionAnnotation:actionAnnotation);if(isStringish(Pu))return createDecoratorAnnotation(createActionAnnotation(_u?AUTOACTION:ACTION,{name:Pu,autoAction:_u}))};return Tu}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(_u){return executeAction(_u.name||DEFAULT_ACTION_NAME,!1,_u,this,void 0)}function isAction(_u){return isFunction(_u)&&_u.isMobxAction===!0}function autorun(_u,Tu){var Cu,Pu;Tu===void 0&&(Tu=EMPTY_OBJECT);var Bu=(Cu=(Pu=Tu)==null?void 0:Pu.name)!=null?Cu:"Autorun",Ru=!Tu.scheduler&&!Tu.delay,Lu;if(Ru)Lu=new Reaction(Bu,function(){this.track($u)},Tu.onError,Tu.requiresObservable);else{var Ou=createSchedulerFromOptions(Tu),Du=!1;Lu=new Reaction(Bu,function(){Du||(Du=!0,Ou(function(){Du=!1,Lu.isDisposed_||Lu.track($u)}))},Tu.onError,Tu.requiresObservable)}function $u(){_u(Lu)}return Lu.schedule_(),Lu.getDisposer_()}var run$1=function _u(Tu){return Tu()};function createSchedulerFromOptions(_u){return _u.scheduler?_u.scheduler:_u.delay?function(Tu){return setTimeout(Tu,_u.delay)}:run$1}function reaction(_u,Tu,Cu){var Pu;Cu===void 0&&(Cu=EMPTY_OBJECT);var Bu=(Pu=Cu.name)!=null?Pu:"Reaction",Ru=action(Bu,Cu.onError?wrapErrorHandler(Cu.onError,Tu):Tu),Lu=!Cu.scheduler&&!Cu.delay,Ou=createSchedulerFromOptions(Cu),Du=!0,$u=!1,ku,Fu,Nu=Cu.compareStructural?comparer.structural:Cu.equals||comparer.default,Vu=new Reaction(Bu,function(){Du||Lu?Gu():$u||($u=!0,Ou(Gu))},Cu.onError,Cu.requiresObservable);function Gu(){if($u=!1,!Vu.isDisposed_){var Hu=!1;Vu.track(function(){var ju=allowStateChanges(!1,function(){return _u(Vu)});Hu=Du||!Nu(ku,ju),Fu=ku,ku=ju}),(Du&&Cu.fireImmediately||!Du&&Hu)&&Ru(ku,Fu,Vu),Du=!1}}return Vu.schedule_(),Vu.getDisposer_()}function wrapErrorHandler(_u,Tu){return function(){try{return Tu.apply(this,arguments)}catch(Cu){_u.call(this,Cu)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(_u,Tu,Cu){return interceptHook(ON_BECOME_OBSERVED,_u,Tu,Cu)}function onBecomeUnobserved(_u,Tu,Cu){return interceptHook(ON_BECOME_UNOBSERVED,_u,Tu,Cu)}function interceptHook(_u,Tu,Cu,Pu){var Bu=typeof Pu=="function"?getAtom(Tu,Cu):getAtom(Tu),Ru=isFunction(Pu)?Pu:Cu,Lu=_u+"L";return Bu[Lu]?Bu[Lu].add(Ru):Bu[Lu]=new Set([Ru]),function(){var Ou=Bu[Lu];Ou&&(Ou.delete(Ru),Ou.size===0&&delete Bu[Lu])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(_u){_u.isolateGlobalState===!0&&isolateGlobalState();var Tu=_u.useProxies,Cu=_u.enforceActions;if(Tu!==void 0&&(globalState.useProxies=Tu===ALWAYS?!0:Tu===NEVER?!1:typeof Proxy!="undefined"),Tu==="ifavailable"&&(globalState.verifyProxies=!0),Cu!==void 0){var Pu=Cu===ALWAYS?ALWAYS:Cu===OBSERVED;globalState.enforceActions=Pu,globalState.allowStateChanges=!(Pu===!0||Pu===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Bu){Bu in _u&&(globalState[Bu]=!!_u[Bu])}),globalState.allowStateReads=!globalState.observableRequiresReaction,_u.reactionScheduler&&setReactionScheduler(_u.reactionScheduler)}function extendObservable(_u,Tu,Cu,Pu){var Bu=getOwnPropertyDescriptors(Tu),Ru=asObservableObject(_u,Pu)[$mobx];startBatch();try{ownKeys(Bu).forEach(function(Lu){Ru.extend_(Lu,Bu[Lu],Cu&&Lu in Cu?Cu[Lu]:!0)})}finally{endBatch()}return _u}function getDependencyTree(_u,Tu){return nodeToDependencyTree(getAtom(_u,Tu))}function nodeToDependencyTree(_u){var Tu={name:_u.name_};return _u.observing_&&_u.observing_.length>0&&(Tu.dependencies=unique(_u.observing_).map(nodeToDependencyTree)),Tu}function unique(_u){return Array.from(new Set(_u))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function _u(Tu,Cu){if(isStringish(Cu))return storeAnnotation(Tu,Cu,flowAnnotation);var Pu=Tu,Bu=Pu.name||"<unnamed flow>",Ru=function(){var Ou=this,Du=arguments,$u=++generatorId,ku=action(Bu+" - runid: "+$u+" - init",Pu).apply(Ou,Du),Fu,Nu=void 0,Vu=new Promise(function(Gu,Hu){var ju=0;Fu=Hu;function Uu(Qu){Nu=void 0;var qu;try{qu=action(Bu+" - runid: "+$u+" - yield "+ju++,ku.next).call(ku,Qu)}catch(Yu){return Hu(Yu)}Wu(qu)}function zu(Qu){Nu=void 0;var qu;try{qu=action(Bu+" - runid: "+$u+" - yield "+ju++,ku.throw).call(ku,Qu)}catch(Yu){return Hu(Yu)}Wu(qu)}function Wu(Qu){if(isFunction(Qu==null?void 0:Qu.then)){Qu.then(Wu,Hu);return}return Qu.done?Gu(Qu.value):(Nu=Promise.resolve(Qu.value),Nu.then(Uu,zu))}Uu(void 0)});return Vu.cancel=action(Bu+" - runid: "+$u+" - cancel",function(){try{Nu&&cancelPromise(Nu);var Gu=ku.return(void 0),Hu=Promise.resolve(Gu.value);Hu.then(noop$1,noop$1),cancelPromise(Hu),Fu(new FlowCancellationError)}catch(ju){Fu(ju)}}),Vu};return Ru.isMobXFlow=!0,Ru},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(_u){isFunction(_u.cancel)&&_u.cancel()}function isFlow(_u){return(_u==null?void 0:_u.isMobXFlow)===!0}function _isObservable(_u,Tu){return _u?Tu!==void 0?isObservableObject(_u)?_u[$mobx].values_.has(Tu):!1:isObservableObject(_u)||!!_u[$mobx]||isAtom(_u)||isReaction(_u)||isComputedValue(_u):!1}function isObservable(_u){return _isObservable(_u)}function trace(){die("trace() is not available in production builds");for(var _u=!1,Tu=arguments.length,Cu=new Array(Tu),Pu=0;Pu<Tu;Pu++)Cu[Pu]=arguments[Pu];typeof Cu[Cu.length-1]=="boolean"&&(_u=Cu.pop());var Bu=getAtomFromArgs(Cu);if(!Bu)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Bu.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Bu.name_+"' tracing enabled"),Bu.isTracing_=_u?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(_u){switch(_u.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(_u[0]);case 2:return getAtom(_u[0],_u[1])}}function transaction(_u,Tu){Tu===void 0&&(Tu=void 0),startBatch();try{return _u.apply(Tu)}finally{endBatch()}}function getAdm(_u){return _u[$mobx]}var objectProxyTraps={has:function _u(Tu,Cu){return getAdm(Tu).has_(Cu)},get:function _u(Tu,Cu){return getAdm(Tu).get_(Cu)},set:function _u(Tu,Cu,Pu){var Bu;return isStringish(Cu)?(Bu=getAdm(Tu).set_(Cu,Pu,!0))!=null?Bu:!0:!1},deleteProperty:function _u(Tu,Cu){var Pu;return isStringish(Cu)?(Pu=getAdm(Tu).delete_(Cu,!0))!=null?Pu:!0:!1},defineProperty:function _u(Tu,Cu,Pu){var Bu;return(Bu=getAdm(Tu).defineProperty_(Cu,Pu))!=null?Bu:!0},ownKeys:function _u(Tu){return getAdm(Tu).ownKeys_()},preventExtensions:function _u(Tu){die(13)}};function asDynamicObservableObject(_u,Tu){var Cu,Pu;return assertProxies(),_u=asObservableObject(_u,Tu),(Pu=(Cu=_u[$mobx]).proxy_)!=null?Pu:Cu.proxy_=new Proxy(_u,objectProxyTraps)}function hasInterceptors(_u){return _u.interceptors_!==void 0&&_u.interceptors_.length>0}function registerInterceptor(_u,Tu){var Cu=_u.interceptors_||(_u.interceptors_=[]);return Cu.push(Tu),once(function(){var Pu=Cu.indexOf(Tu);Pu!==-1&&Cu.splice(Pu,1)})}function interceptChange(_u,Tu){var Cu=untrackedStart();try{for(var Pu=[].concat(_u.interceptors_||[]),Bu=0,Ru=Pu.length;Bu<Ru&&(Tu=Pu[Bu](Tu),Tu&&!Tu.type&&die(14),!!Tu);Bu++);return Tu}finally{untrackedEnd(Cu)}}function hasListeners(_u){return _u.changeListeners_!==void 0&&_u.changeListeners_.length>0}function registerListener(_u,Tu){var Cu=_u.changeListeners_||(_u.changeListeners_=[]);return Cu.push(Tu),once(function(){var Pu=Cu.indexOf(Tu);Pu!==-1&&Cu.splice(Pu,1)})}function notifyListeners(_u,Tu){var Cu=untrackedStart(),Pu=_u.changeListeners_;if(!!Pu){Pu=Pu.slice();for(var Bu=0,Ru=Pu.length;Bu<Ru;Bu++)Pu[Bu](Tu);untrackedEnd(Cu)}}function makeObservable(_u,Tu,Cu){var Pu=asObservableObject(_u,Cu)[$mobx];startBatch();try{var Bu;(Bu=Tu)!=null||(Tu=collectStoredAnnotations(_u)),ownKeys(Tu).forEach(function(Ru){return Pu.make_(Ru,Tu[Ru])})}finally{endBatch()}return _u}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function _u(Tu,Cu){var Pu=Tu[$mobx];return Cu===$mobx?Pu:Cu==="length"?Pu.getArrayLength_():typeof Cu=="string"&&!isNaN(Cu)?Pu.get_(parseInt(Cu)):hasProp(arrayExtensions,Cu)?arrayExtensions[Cu]:Tu[Cu]},set:function _u(Tu,Cu,Pu){var Bu=Tu[$mobx];return Cu==="length"&&Bu.setArrayLength_(Pu),typeof Cu=="symbol"||isNaN(Cu)?Tu[Cu]=Pu:Bu.set_(parseInt(Cu),Pu),!0},preventExtensions:function _u(){die(15)}},ObservableArrayAdministration=function(){function _u(Cu,Pu,Bu,Ru){Cu===void 0&&(Cu="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Bu,this.legacyMode_=Ru,this.atom_=new Atom(Cu),this.enhancer_=function(Lu,Ou){return Pu(Lu,Ou,"ObservableArray[..]")}}var Tu=_u.prototype;return Tu.dehanceValue_=function(Pu){return this.dehancer!==void 0?this.dehancer(Pu):Pu},Tu.dehanceValues_=function(Pu){return this.dehancer!==void 0&&Pu.length>0?Pu.map(this.dehancer):Pu},Tu.intercept_=function(Pu){return registerInterceptor(this,Pu)},Tu.observe_=function(Pu,Bu){return Bu===void 0&&(Bu=!1),Bu&&Pu({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Pu)},Tu.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},Tu.setArrayLength_=function(Pu){(typeof Pu!="number"||isNaN(Pu)||Pu<0)&&die("Out of range: "+Pu);var Bu=this.values_.length;if(Pu!==Bu)if(Pu>Bu){for(var Ru=new Array(Pu-Bu),Lu=0;Lu<Pu-Bu;Lu++)Ru[Lu]=void 0;this.spliceWithArray_(Bu,0,Ru)}else this.spliceWithArray_(Pu,Bu-Pu)},Tu.updateArrayLength_=function(Pu,Bu){Pu!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Bu,this.legacyMode_&&Bu>0&&reserveArrayBuffer(Pu+Bu+1)},Tu.spliceWithArray_=function(Pu,Bu,Ru){var Lu=this;this.atom_;var Ou=this.values_.length;if(Pu===void 0?Pu=0:Pu>Ou?Pu=Ou:Pu<0&&(Pu=Math.max(0,Ou+Pu)),arguments.length===1?Bu=Ou-Pu:Bu==null?Bu=0:Bu=Math.max(0,Math.min(Bu,Ou-Pu)),Ru===void 0&&(Ru=EMPTY_ARRAY),hasInterceptors(this)){var Du=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Pu,removedCount:Bu,added:Ru});if(!Du)return EMPTY_ARRAY;Bu=Du.removedCount,Ru=Du.added}if(Ru=Ru.length===0?Ru:Ru.map(function(Fu){return Lu.enhancer_(Fu,void 0)}),this.legacyMode_){var $u=Ru.length-Bu;this.updateArrayLength_(Ou,$u)}var ku=this.spliceItemsIntoValues_(Pu,Bu,Ru);return(Bu!==0||Ru.length!==0)&&this.notifyArraySplice_(Pu,Ru,ku),this.dehanceValues_(ku)},Tu.spliceItemsIntoValues_=function(Pu,Bu,Ru){if(Ru.length<MAX_SPLICE_SIZE){var Lu;return(Lu=this.values_).splice.apply(Lu,[Pu,Bu].concat(Ru))}else{var Ou=this.values_.slice(Pu,Pu+Bu),Du=this.values_.slice(Pu+Bu);this.values_.length+=Ru.length-Bu;for(var $u=0;$u<Ru.length;$u++)this.values_[Pu+$u]=Ru[$u];for(var ku=0;ku<Du.length;ku++)this.values_[Pu+Ru.length+ku]=Du[ku];return Ou}},Tu.notifyArrayChildUpdate_=function(Pu,Bu,Ru){var Lu=!this.owned_&&isSpyEnabled(),Ou=hasListeners(this),Du=Ou||Lu?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Pu,newValue:Bu,oldValue:Ru}:null;this.atom_.reportChanged(),Ou&&notifyListeners(this,Du)},Tu.notifyArraySplice_=function(Pu,Bu,Ru){var Lu=!this.owned_&&isSpyEnabled(),Ou=hasListeners(this),Du=Ou||Lu?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Pu,removed:Ru,added:Bu,removedCount:Ru.length,addedCount:Bu.length}:null;this.atom_.reportChanged(),Ou&&notifyListeners(this,Du)},Tu.get_=function(Pu){if(Pu<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Pu]);console.warn("[mobx.array] Attempt to read an array index ("+Pu+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},Tu.set_=function(Pu,Bu){var Ru=this.values_;if(Pu<Ru.length){this.atom_;var Lu=Ru[Pu];if(hasInterceptors(this)){var Ou=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Pu,newValue:Bu});if(!Ou)return;Bu=Ou.newValue}Bu=this.enhancer_(Bu,Lu);var Du=Bu!==Lu;Du&&(Ru[Pu]=Bu,this.notifyArrayChildUpdate_(Pu,Bu,Lu))}else Pu===Ru.length?this.spliceWithArray_(Pu,0,[Bu]):die(17,Pu,Ru.length)},_u}();function createObservableArray(_u,Tu,Cu,Pu){Cu===void 0&&(Cu="ObservableArray"),Pu===void 0&&(Pu=!1),assertProxies();var Bu=new ObservableArrayAdministration(Cu,Tu,Pu,!1);addHiddenFinalProp(Bu.values_,$mobx,Bu);var Ru=new Proxy(Bu.values_,arrayTraps);if(Bu.proxy_=Ru,_u&&_u.length){var Lu=allowStateChangesStart(!0);Bu.spliceWithArray_(0,0,_u),allowStateChangesEnd(Lu)}return Ru}var arrayExtensions={clear:function _u(){return this.splice(0)},replace:function _u(Tu){var Cu=this[$mobx];return Cu.spliceWithArray_(0,Cu.values_.length,Tu)},toJSON:function _u(){return this.slice()},splice:function _u(Tu,Cu){for(var Pu=arguments.length,Bu=new Array(Pu>2?Pu-2:0),Ru=2;Ru<Pu;Ru++)Bu[Ru-2]=arguments[Ru];var Lu=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Lu.spliceWithArray_(Tu);case 2:return Lu.spliceWithArray_(Tu,Cu)}return Lu.spliceWithArray_(Tu,Cu,Bu)},spliceWithArray:function _u(Tu,Cu,Pu){return this[$mobx].spliceWithArray_(Tu,Cu,Pu)},push:function _u(){for(var Tu=this[$mobx],Cu=arguments.length,Pu=new Array(Cu),Bu=0;Bu<Cu;Bu++)Pu[Bu]=arguments[Bu];return Tu.spliceWithArray_(Tu.values_.length,0,Pu),Tu.values_.length},pop:function _u(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function _u(){return this.splice(0,1)[0]},unshift:function _u(){for(var Tu=this[$mobx],Cu=arguments.length,Pu=new Array(Cu),Bu=0;Bu<Cu;Bu++)Pu[Bu]=arguments[Bu];return Tu.spliceWithArray_(0,0,Pu),Tu.values_.length},reverse:function _u(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function _u(){globalState.trackingDerivation&&die(37,"sort");var Tu=this.slice();return Tu.sort.apply(Tu,arguments),this.replace(Tu),this},remove:function _u(Tu){var Cu=this[$mobx],Pu=Cu.dehanceValues_(Cu.values_).indexOf(Tu);return Pu>-1?(this.splice(Pu,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(_u,Tu){typeof Array.prototype[_u]=="function"&&(arrayExtensions[_u]=Tu(_u))}function simpleFunc(_u){return function(){var Tu=this[$mobx];Tu.atom_.reportObserved();var Cu=Tu.dehanceValues_(Tu.values_);return Cu[_u].apply(Cu,arguments)}}function mapLikeFunc(_u){return function(Tu,Cu){var Pu=this,Bu=this[$mobx];Bu.atom_.reportObserved();var Ru=Bu.dehanceValues_(Bu.values_);return Ru[_u](function(Lu,Ou){return Tu.call(Cu,Lu,Ou,Pu)})}}function reduceLikeFunc(_u){return function(){var Tu=this,Cu=this[$mobx];Cu.atom_.reportObserved();var Pu=Cu.dehanceValues_(Cu.values_),Bu=arguments[0];return arguments[0]=function(Ru,Lu,Ou){return Bu(Ru,Lu,Ou,Tu)},Pu[_u].apply(Pu,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(_u){return isObject$3(_u)&&isObservableArrayAdministration(_u[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(_u,Tu){function Cu(Bu,Ru,Lu){var Ou=this;Ru===void 0&&(Ru=deepEnhancer),Lu===void 0&&(Lu="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Ru,this.name_=Lu,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,allowStateChanges(!0,function(){Ou.merge(Bu)})}var Pu=Cu.prototype;return Pu.has_=function(Ru){return this.data_.has(Ru)},Pu.has=function(Ru){var Lu=this;if(!globalState.trackingDerivation)return this.has_(Ru);var Ou=this.hasMap_.get(Ru);if(!Ou){var Du=Ou=new ObservableValue(this.has_(Ru),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Ru,Du),onBecomeUnobserved(Du,function(){return Lu.hasMap_.delete(Ru)})}return Ou.get()},Pu.set=function(Ru,Lu){var Ou=this.has_(Ru);if(hasInterceptors(this)){var Du=interceptChange(this,{type:Ou?UPDATE:ADD,object:this,newValue:Lu,name:Ru});if(!Du)return this;Lu=Du.newValue}return Ou?this.updateValue_(Ru,Lu):this.addValue_(Ru,Lu),this},Pu.delete=function(Ru){var Lu=this;if(this.keysAtom_,hasInterceptors(this)){var Ou=interceptChange(this,{type:DELETE,object:this,name:Ru});if(!Ou)return!1}if(this.has_(Ru)){var Du=isSpyEnabled(),$u=hasListeners(this),ku=$u||Du?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Ru).value_,name:Ru}:null;return transaction(function(){var Fu;Lu.keysAtom_.reportChanged(),(Fu=Lu.hasMap_.get(Ru))==null||Fu.setNewValue_(!1);var Nu=Lu.data_.get(Ru);Nu.setNewValue_(void 0),Lu.data_.delete(Ru)}),$u&&notifyListeners(this,ku),!0}return!1},Pu.updateValue_=function(Ru,Lu){var Ou=this.data_.get(Ru);if(Lu=Ou.prepareNewValue_(Lu),Lu!==globalState.UNCHANGED){var Du=isSpyEnabled(),$u=hasListeners(this),ku=$u||Du?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Ou.value_,name:Ru,newValue:Lu}:null;Ou.setNewValue_(Lu),$u&&notifyListeners(this,ku)}},Pu.addValue_=function(Ru,Lu){var Ou=this;this.keysAtom_,transaction(function(){var Fu,Nu=new ObservableValue(Lu,Ou.enhancer_,"ObservableMap.key",!1);Ou.data_.set(Ru,Nu),Lu=Nu.value_,(Fu=Ou.hasMap_.get(Ru))==null||Fu.setNewValue_(!0),Ou.keysAtom_.reportChanged()});var Du=isSpyEnabled(),$u=hasListeners(this),ku=$u||Du?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Ru,newValue:Lu}:null;$u&&notifyListeners(this,ku)},Pu.get=function(Ru){return this.has(Ru)?this.dehanceValue_(this.data_.get(Ru).get()):this.dehanceValue_(void 0)},Pu.dehanceValue_=function(Ru){return this.dehancer!==void 0?this.dehancer(Ru):Ru},Pu.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},Pu.values=function(){var Ru=this,Lu=this.keys();return makeIterable({next:function(){var Du=Lu.next(),$u=Du.done,ku=Du.value;return{done:$u,value:$u?void 0:Ru.get(ku)}}})},Pu.entries=function(){var Ru=this,Lu=this.keys();return makeIterable({next:function(){var Du=Lu.next(),$u=Du.done,ku=Du.value;return{done:$u,value:$u?void 0:[ku,Ru.get(ku)]}}})},Pu[_u]=function(){return this.entries()},Pu.forEach=function(Ru,Lu){for(var Ou=_createForOfIteratorHelperLoose(this),Du;!(Du=Ou()).done;){var $u=Du.value,ku=$u[0],Fu=$u[1];Ru.call(Lu,Fu,ku,this)}},Pu.merge=function(Ru){var Lu=this;return isObservableMap(Ru)&&(Ru=new Map(Ru)),transaction(function(){isPlainObject(Ru)?getPlainObjectKeys(Ru).forEach(function(Ou){return Lu.set(Ou,Ru[Ou])}):Array.isArray(Ru)?Ru.forEach(function(Ou){var Du=Ou[0],$u=Ou[1];return Lu.set(Du,$u)}):isES6Map(Ru)?(Ru.constructor!==Map&&die(19,Ru),Ru.forEach(function(Ou,Du){return Lu.set(Du,Ou)})):Ru!=null&&die(20,Ru)}),this},Pu.clear=function(){var Ru=this;transaction(function(){untracked(function(){for(var Lu=_createForOfIteratorHelperLoose(Ru.keys()),Ou;!(Ou=Lu()).done;){var Du=Ou.value;Ru.delete(Du)}})})},Pu.replace=function(Ru){var Lu=this;return transaction(function(){for(var Ou=convertToMap(Ru),Du=new Map,$u=!1,ku=_createForOfIteratorHelperLoose(Lu.data_.keys()),Fu;!(Fu=ku()).done;){var Nu=Fu.value;if(!Ou.has(Nu)){var Vu=Lu.delete(Nu);if(Vu)$u=!0;else{var Gu=Lu.data_.get(Nu);Du.set(Nu,Gu)}}}for(var Hu=_createForOfIteratorHelperLoose(Ou.entries()),ju;!(ju=Hu()).done;){var Uu=ju.value,zu=Uu[0],Wu=Uu[1],Qu=Lu.data_.has(zu);if(Lu.set(zu,Wu),Lu.data_.has(zu)){var qu=Lu.data_.get(zu);Du.set(zu,qu),Qu||($u=!0)}}if(!$u)if(Lu.data_.size!==Du.size)Lu.keysAtom_.reportChanged();else for(var Yu=Lu.data_.keys(),Xc=Du.keys(),_h=Yu.next(),_d=Xc.next();!_h.done;){if(_h.value!==_d.value){Lu.keysAtom_.reportChanged();break}_h=Yu.next(),_d=Xc.next()}Lu.data_=Du}),this},Pu.toString=function(){return"[object ObservableMap]"},Pu.toJSON=function(){return Array.from(this)},Pu.observe_=function(Ru,Lu){return registerListener(this,Ru)},Pu.intercept_=function(Ru){return registerInterceptor(this,Ru)},_createClass(Cu,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Tu,get:function(){return"Map"}}]),Cu}(_Symbol$iterator,_Symbol$toStringTag),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(_u){if(isES6Map(_u)||isObservableMap(_u))return _u;if(Array.isArray(_u))return new Map(_u);if(isPlainObject(_u)){var Tu=new Map;for(var Cu in _u)Tu.set(Cu,_u[Cu]);return Tu}else return die(21,_u)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(_u,Tu){function Cu(Bu,Ru,Lu){Ru===void 0&&(Ru=deepEnhancer),Lu===void 0&&(Lu="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Lu,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Ou,Du){return Ru(Ou,Du,Lu)},Bu&&this.replace(Bu)}var Pu=Cu.prototype;return Pu.dehanceValue_=function(Ru){return this.dehancer!==void 0?this.dehancer(Ru):Ru},Pu.clear=function(){var Ru=this;transaction(function(){untracked(function(){for(var Lu=_createForOfIteratorHelperLoose(Ru.data_.values()),Ou;!(Ou=Lu()).done;){var Du=Ou.value;Ru.delete(Du)}})})},Pu.forEach=function(Ru,Lu){for(var Ou=_createForOfIteratorHelperLoose(this),Du;!(Du=Ou()).done;){var $u=Du.value;Ru.call(Lu,$u,$u,this)}},Pu.add=function(Ru){var Lu=this;if(this.atom_,hasInterceptors(this)){var Ou=interceptChange(this,{type:ADD,object:this,newValue:Ru});if(!Ou)return this}if(!this.has(Ru)){transaction(function(){Lu.data_.add(Lu.enhancer_(Ru,void 0)),Lu.atom_.reportChanged()});var Du=!1,$u=hasListeners(this),ku=$u||Du?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Ru}:null;$u&&notifyListeners(this,ku)}return this},Pu.delete=function(Ru){var Lu=this;if(hasInterceptors(this)){var Ou=interceptChange(this,{type:DELETE,object:this,oldValue:Ru});if(!Ou)return!1}if(this.has(Ru)){var Du=!1,$u=hasListeners(this),ku=$u||Du?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Ru}:null;return transaction(function(){Lu.atom_.reportChanged(),Lu.data_.delete(Ru)}),$u&&notifyListeners(this,ku),!0}return!1},Pu.has=function(Ru){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Ru))},Pu.entries=function(){var Ru=0,Lu=Array.from(this.keys()),Ou=Array.from(this.values());return makeIterable({next:function(){var $u=Ru;return Ru+=1,$u<Ou.length?{value:[Lu[$u],Ou[$u]],done:!1}:{done:!0}}})},Pu.keys=function(){return this.values()},Pu.values=function(){this.atom_.reportObserved();var Ru=this,Lu=0,Ou=Array.from(this.data_.values());return makeIterable({next:function(){return Lu<Ou.length?{value:Ru.dehanceValue_(Ou[Lu++]),done:!1}:{done:!0}}})},Pu.replace=function(Ru){var Lu=this;return isObservableSet(Ru)&&(Ru=new Set(Ru)),transaction(function(){Array.isArray(Ru)?(Lu.clear(),Ru.forEach(function(Ou){return Lu.add(Ou)})):isES6Set(Ru)?(Lu.clear(),Ru.forEach(function(Ou){return Lu.add(Ou)})):Ru!=null&&die("Cannot initialize set from "+Ru)}),this},Pu.observe_=function(Ru,Lu){return registerListener(this,Ru)},Pu.intercept_=function(Ru){return registerInterceptor(this,Ru)},Pu.toJSON=function(){return Array.from(this)},Pu.toString=function(){return"[object ObservableSet]"},Pu[_u]=function(){return this.values()},_createClass(Cu,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Tu,get:function(){return"Set"}}]),Cu}(_Symbol$iterator$1,_Symbol$toStringTag$1),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function _u(Cu,Pu,Bu,Ru){Pu===void 0&&(Pu=new Map),Ru===void 0&&(Ru=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=Cu,this.values_=Pu,this.name_=Bu,this.defaultAnnotation_=Ru,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var Tu=_u.prototype;return Tu.getObservablePropValue_=function(Pu){return this.values_.get(Pu).get()},Tu.setObservablePropValue_=function(Pu,Bu){var Ru=this.values_.get(Pu);if(Ru instanceof ComputedValue)return Ru.set(Bu),!0;if(hasInterceptors(this)){var Lu=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Pu,newValue:Bu});if(!Lu)return null;Bu=Lu.newValue}if(Bu=Ru.prepareNewValue_(Bu),Bu!==globalState.UNCHANGED){var Ou=hasListeners(this),Du=!1,$u=Ou||Du?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Ru.value_,name:Pu,newValue:Bu}:null;Ru.setNewValue_(Bu),Ou&&notifyListeners(this,$u)}return!0},Tu.get_=function(Pu){return globalState.trackingDerivation&&!hasProp(this.target_,Pu)&&this.has_(Pu),this.target_[Pu]},Tu.set_=function(Pu,Bu,Ru){return Ru===void 0&&(Ru=!1),hasProp(this.target_,Pu)?this.values_.has(Pu)?this.setObservablePropValue_(Pu,Bu):Ru?Reflect.set(this.target_,Pu,Bu):(this.target_[Pu]=Bu,!0):this.extend_(Pu,{value:Bu,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Ru)},Tu.has_=function(Pu){if(!globalState.trackingDerivation)return Pu in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Bu=this.pendingKeys_.get(Pu);return Bu||(Bu=new ObservableValue(Pu in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Pu,Bu)),Bu.get()},Tu.make_=function(Pu,Bu){if(Bu===!0&&(Bu=this.defaultAnnotation_),Bu!==!1){if(!(Pu in this.target_)){var Ru;if((Ru=this.target_[storedAnnotationsSymbol])!=null&&Ru[Pu])return;die(1,Bu.annotationType_,this.name_+"."+Pu.toString())}for(var Lu=this.target_;Lu&&Lu!==objectPrototype;){var Ou=getDescriptor(Lu,Pu);if(Ou){var Du=Bu.make_(this,Pu,Ou,Lu);if(Du===0)return;if(Du===1)break}Lu=Object.getPrototypeOf(Lu)}recordAnnotationApplied(this,Bu,Pu)}},Tu.extend_=function(Pu,Bu,Ru,Lu){if(Lu===void 0&&(Lu=!1),Ru===!0&&(Ru=this.defaultAnnotation_),Ru===!1)return this.defineProperty_(Pu,Bu,Lu);var Ou=Ru.extend_(this,Pu,Bu,Lu);return Ou&&recordAnnotationApplied(this,Ru,Pu),Ou},Tu.defineProperty_=function(Pu,Bu,Ru){Ru===void 0&&(Ru=!1);try{startBatch();var Lu=this.delete_(Pu);if(!Lu)return Lu;if(hasInterceptors(this)){var Ou=interceptChange(this,{object:this.proxy_||this.target_,name:Pu,type:ADD,newValue:Bu.value});if(!Ou)return null;var Du=Ou.newValue;Bu.value!==Du&&(Bu=_extends({},Bu,{value:Du}))}if(Ru){if(!Reflect.defineProperty(this.target_,Pu,Bu))return!1}else defineProperty(this.target_,Pu,Bu);this.notifyPropertyAddition_(Pu,Bu.value)}finally{endBatch()}return!0},Tu.defineObservableProperty_=function(Pu,Bu,Ru,Lu){Lu===void 0&&(Lu=!1);try{startBatch();var Ou=this.delete_(Pu);if(!Ou)return Ou;if(hasInterceptors(this)){var Du=interceptChange(this,{object:this.proxy_||this.target_,name:Pu,type:ADD,newValue:Bu});if(!Du)return null;Bu=Du.newValue}var $u=getCachedObservablePropDescriptor(Pu),ku={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:$u.get,set:$u.set};if(Lu){if(!Reflect.defineProperty(this.target_,Pu,ku))return!1}else defineProperty(this.target_,Pu,ku);var Fu=new ObservableValue(Bu,Ru,"ObservableObject.key",!1);this.values_.set(Pu,Fu),this.notifyPropertyAddition_(Pu,Fu.value_)}finally{endBatch()}return!0},Tu.defineComputedProperty_=function(Pu,Bu,Ru){Ru===void 0&&(Ru=!1);try{startBatch();var Lu=this.delete_(Pu);if(!Lu)return Lu;if(hasInterceptors(this)){var Ou=interceptChange(this,{object:this.proxy_||this.target_,name:Pu,type:ADD,newValue:void 0});if(!Ou)return null}Bu.name||(Bu.name="ObservableObject.key"),Bu.context=this.proxy_||this.target_;var Du=getCachedObservablePropDescriptor(Pu),$u={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Du.get,set:Du.set};if(Ru){if(!Reflect.defineProperty(this.target_,Pu,$u))return!1}else defineProperty(this.target_,Pu,$u);this.values_.set(Pu,new ComputedValue(Bu)),this.notifyPropertyAddition_(Pu,void 0)}finally{endBatch()}return!0},Tu.delete_=function(Pu,Bu){if(Bu===void 0&&(Bu=!1),!hasProp(this.target_,Pu))return!0;if(hasInterceptors(this)){var Ru=interceptChange(this,{object:this.proxy_||this.target_,name:Pu,type:REMOVE});if(!Ru)return null}try{var Lu,Ou;startBatch();var Du=hasListeners(this),$u=!1,ku=this.values_.get(Pu),Fu=void 0;if(!ku&&(Du||$u)){var Nu;Fu=(Nu=getDescriptor(this.target_,Pu))==null?void 0:Nu.value}if(Bu){if(!Reflect.deleteProperty(this.target_,Pu))return!1}else delete this.target_[Pu];if(ku&&(this.values_.delete(Pu),ku instanceof ObservableValue&&(Fu=ku.value_),propagateChanged(ku)),this.keysAtom_.reportChanged(),(Lu=this.pendingKeys_)==null||(Ou=Lu.get(Pu))==null||Ou.set(Pu in this.target_),Du||$u){var Vu={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Fu,name:Pu};Du&&notifyListeners(this,Vu)}}finally{endBatch()}return!0},Tu.observe_=function(Pu,Bu){return registerListener(this,Pu)},Tu.intercept_=function(Pu){return registerInterceptor(this,Pu)},Tu.notifyPropertyAddition_=function(Pu,Bu){var Ru,Lu,Ou=hasListeners(this),Du=!1;if(Ou||Du){var $u=Ou||Du?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Pu,newValue:Bu}:null;Ou&&notifyListeners(this,$u)}(Ru=this.pendingKeys_)==null||(Lu=Ru.get(Pu))==null||Lu.set(!0),this.keysAtom_.reportChanged()},Tu.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},Tu.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},_u}();function asObservableObject(_u,Tu){var Cu;if(hasProp(_u,$mobx))return _u;var Pu=(Cu=Tu==null?void 0:Tu.name)!=null?Cu:"ObservableObject",Bu=new ObservableObjectAdministration(_u,new Map,String(Pu),getAnnotationFromOptions(Tu));return addHiddenProp(_u,$mobx,Bu),_u}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(_u){return descriptorCache[_u]||(descriptorCache[_u]={get:function(){return this[$mobx].getObservablePropValue_(_u)},set:function(Cu){return this[$mobx].setObservablePropValue_(_u,Cu)}})}function isObservableObject(_u){return isObject$3(_u)?isObservableObjectAdministration(_u[$mobx]):!1}function recordAnnotationApplied(_u,Tu,Cu){var Pu;(Pu=_u.target_[storedAnnotationsSymbol])==null||delete Pu[Cu]}var OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function _u(){};function inherit(_u,Tu){Object.setPrototypeOf?Object.setPrototypeOf(_u.prototype,Tu):_u.prototype.__proto__!==void 0?_u.prototype.__proto__=Tu:_u.prototype=Tu}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(_u,Tu,Cu){_inheritsLoose(Pu,_u);function Pu(Ru,Lu,Ou,Du){var $u;Ou===void 0&&(Ou="ObservableArray"),Du===void 0&&(Du=!1),$u=_u.call(this)||this;var ku=new ObservableArrayAdministration(Ou,Lu,Du,!0);if(ku.proxy_=_assertThisInitialized($u),addHiddenFinalProp(_assertThisInitialized($u),$mobx,ku),Ru&&Ru.length){var Fu=allowStateChangesStart(!0);$u.spliceWithArray(0,0,Ru),allowStateChangesEnd(Fu)}return $u}var Bu=Pu.prototype;return Bu.concat=function(){this[$mobx].atom_.reportObserved();for(var Lu=arguments.length,Ou=new Array(Lu),Du=0;Du<Lu;Du++)Ou[Du]=arguments[Du];return Array.prototype.concat.apply(this.slice(),Ou.map(function($u){return isObservableArray($u)?$u.slice():$u}))},Bu[Cu]=function(){var Ru=this,Lu=0;return makeIterable({next:function(){return Lu<Ru.length?{value:Ru[Lu++],done:!1}:{done:!0,value:void 0}}})},_createClass(Pu,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Lu){this[$mobx].setArrayLength_(Lu)}},{key:Tu,get:function(){return"Array"}}]),Pu}(StubArray,Symbol.toStringTag,Symbol.iterator);Object.entries(arrayExtensions).forEach(function(_u){var Tu=_u[0],Cu=_u[1];Tu!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,Tu,Cu)});function createArrayEntryDescriptor(_u){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(_u)},set:function(Cu){this[$mobx].set_(_u,Cu)}}}function createArrayBufferItem(_u){defineProperty(LegacyObservableArray.prototype,""+_u,createArrayEntryDescriptor(_u))}function reserveArrayBuffer(_u){if(_u>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var Tu=OBSERVABLE_ARRAY_BUFFER_SIZE;Tu<_u+100;Tu++)createArrayBufferItem(Tu);OBSERVABLE_ARRAY_BUFFER_SIZE=_u}}reserveArrayBuffer(1e3);function createLegacyArray(_u,Tu,Cu){return new LegacyObservableArray(_u,Tu,Cu)}function getAtom(_u,Tu){if(typeof _u=="object"&&_u!==null){if(isObservableArray(_u))return Tu!==void 0&&die(23),_u[$mobx].atom_;if(isObservableSet(_u))return _u[$mobx];if(isObservableMap(_u)){if(Tu===void 0)return _u.keysAtom_;var Cu=_u.data_.get(Tu)||_u.hasMap_.get(Tu);return Cu||die(25,Tu,getDebugName(_u)),Cu}if(isObservableObject(_u)){if(!Tu)return die(26);var Pu=_u[$mobx].values_.get(Tu);return Pu||die(27,Tu,getDebugName(_u)),Pu}if(isAtom(_u)||isComputedValue(_u)||isReaction(_u))return _u}else if(isFunction(_u)&&isReaction(_u[$mobx]))return _u[$mobx];die(28)}function getAdministration(_u,Tu){if(_u||die(29),Tu!==void 0)return getAdministration(getAtom(_u,Tu));if(isAtom(_u)||isComputedValue(_u)||isReaction(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(_u[$mobx])return _u[$mobx];die(24,_u)}function getDebugName(_u,Tu){var Cu;if(Tu!==void 0)Cu=getAtom(_u,Tu);else{if(isAction(_u))return _u.name;isObservableObject(_u)||isObservableMap(_u)||isObservableSet(_u)?Cu=getAdministration(_u):Cu=getAtom(_u)}return Cu.name_}var toString=objectPrototype.toString;function deepEqual(_u,Tu,Cu){return Cu===void 0&&(Cu=-1),eq$1(_u,Tu,Cu)}function eq$1(_u,Tu,Cu,Pu,Bu){if(_u===Tu)return _u!==0||1/_u===1/Tu;if(_u==null||Tu==null)return!1;if(_u!==_u)return Tu!==Tu;var Ru=typeof _u;if(Ru!=="function"&&Ru!=="object"&&typeof Tu!="object")return!1;var Lu=toString.call(_u);if(Lu!==toString.call(Tu))return!1;switch(Lu){case"[object RegExp]":case"[object String]":return""+_u==""+Tu;case"[object Number]":return+_u!=+_u?+Tu!=+Tu:+_u==0?1/+_u===1/Tu:+_u==+Tu;case"[object Date]":case"[object Boolean]":return+_u==+Tu;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(_u)===Symbol.valueOf.call(Tu);case"[object Map]":case"[object Set]":Cu>=0&&Cu++;break}_u=unwrap(_u),Tu=unwrap(Tu);var Ou=Lu==="[object Array]";if(!Ou){if(typeof _u!="object"||typeof Tu!="object")return!1;var Du=_u.constructor,$u=Tu.constructor;if(Du!==$u&&!(isFunction(Du)&&Du instanceof Du&&isFunction($u)&&$u instanceof $u)&&"constructor"in _u&&"constructor"in Tu)return!1}if(Cu===0)return!1;Cu<0&&(Cu=-1),Pu=Pu||[],Bu=Bu||[];for(var ku=Pu.length;ku--;)if(Pu[ku]===_u)return Bu[ku]===Tu;if(Pu.push(_u),Bu.push(Tu),Ou){if(ku=_u.length,ku!==Tu.length)return!1;for(;ku--;)if(!eq$1(_u[ku],Tu[ku],Cu-1,Pu,Bu))return!1}else{var Fu=Object.keys(_u),Nu;if(ku=Fu.length,Object.keys(Tu).length!==ku)return!1;for(;ku--;)if(Nu=Fu[ku],!(hasProp(Tu,Nu)&&eq$1(_u[Nu],Tu[Nu],Cu-1,Pu,Bu)))return!1}return Pu.pop(),Bu.pop(),!0}function unwrap(_u){return isObservableArray(_u)?_u.slice():isES6Map(_u)||isObservableMap(_u)||isES6Set(_u)||isObservableSet(_u)?Array.from(_u.entries()):_u}function makeIterable(_u){return _u[Symbol.iterator]=getSelf,_u}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(_u){var Tu=getGlobal();typeof Tu[_u]=="undefined"&&die("MobX requires global '"+_u+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(_u){_u()}function observerBatching(_u){_u||(_u=defaultNoopBatch),configure({reactionScheduler:_u})}function printDebugValue(_u){return getDependencyTree(_u)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(_u){var Tu={reaction:_u,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return Tu}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(_u){var Tu=new Map,Cu=1,Pu=new _u(function(Ru){var Lu=Tu.get(Ru);Lu&&(Lu.reaction.dispose(),Tu.delete(Ru))});return{addReactionToTrack:function(Bu,Ru,Lu){var Ou=Cu++;return Pu.register(Lu,Ou,Bu),Bu.current=createTrackingData(Ru),Bu.current.finalizationRegistryCleanupToken=Ou,Tu.set(Ou,Bu.current),Bu.current},recordReactionAsCommitted:function(Bu){Pu.unregister(Bu),Bu.current&&Bu.current.finalizationRegistryCleanupToken&&Tu.delete(Bu.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(_u){var Tu=typeof Symbol=="function"&&Symbol.iterator,Cu=Tu&&_u[Tu],Pu=0;if(Cu)return Cu.call(_u);if(_u&&typeof _u.length=="number")return{next:function(){return _u&&Pu>=_u.length&&(_u=void 0),{value:_u&&_u[Pu++],done:!_u}}};throw new TypeError(Tu?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var _u=new Set,Tu;function Cu(){Tu&&(clearTimeout(Tu),Ou())}function Pu(){var Du,$u;if(_u.size>0){try{for(var ku=__values(_u),Fu=ku.next();!Fu.done;Fu=ku.next()){var Nu=Fu.value,Vu=Nu.current;Vu&&(Vu.reaction.dispose(),Nu.current=null)}}catch(Gu){Du={error:Gu}}finally{try{Fu&&!Fu.done&&($u=ku.return)&&$u.call(ku)}finally{if(Du)throw Du.error}}_u.clear()}Tu&&(clearTimeout(Tu),Tu=void 0)}function Bu(){Tu===void 0&&(Tu=setTimeout(Ou,CLEANUP_TIMER_LOOP_MILLIS))}function Ru(Du){_u.add(Du),Bu()}function Lu(Du){_u.delete(Du)}function Ou(){Tu=void 0;var Du=Date.now();_u.forEach(function($u){var ku=$u.current;ku&&Du>=ku.cleanAt&&(ku.reaction.dispose(),$u.current=null,_u.delete($u))}),_u.size>0&&Bu()}return{addReactionToTrack:function(Du,$u,ku){return Du.current=createTrackingData($u),Ru(Du),Du.current},recordReactionAsCommitted:Lu,forceCleanupTimerToRunNowForTests:Cu,resetCleanupScheduleForTests:Pu}}var _a=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a.addReactionToTrack,recordReactionAsCommitted=_a.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(_u,Tu){var Cu=typeof Symbol=="function"&&_u[Symbol.iterator];if(!Cu)return _u;var Pu=Cu.call(_u),Bu,Ru=[],Lu;try{for(;(Tu===void 0||Tu-- >0)&&!(Bu=Pu.next()).done;)Ru.push(Bu.value)}catch(Ou){Lu={error:Ou}}finally{try{Bu&&!Bu.done&&(Cu=Pu.return)&&Cu.call(Pu)}finally{if(Lu)throw Lu.error}}return Ru};function observerComponentNameFor(_u){return"observer".concat(_u)}var ObjectToBeRetainedByReact=function(){function _u(){}return _u}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(_u,Tu){Tu===void 0&&(Tu="observed");var Cu=__read(React.useState(objectToBeRetainedByReactFactory),1),Pu=Cu[0],Bu=__read(React.useState(),2),Ru=Bu[1],Lu=function(){return Ru([])},Ou=React.useRef(null);if(!Ou.current)var Du=new Reaction(observerComponentNameFor(Tu),function(){$u.mounted?Lu():$u.changedBeforeMount=!0}),$u=addReactionToTrack(Ou,Du,Pu);var ku=Ou.current.reaction;React.useDebugValue(ku,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Ou),Ou.current?(Ou.current.mounted=!0,Ou.current.changedBeforeMount&&(Ou.current.changedBeforeMount=!1,Lu())):(Ou.current={reaction:new Reaction(observerComponentNameFor(Tu),function(){Lu()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Lu()),function(){Ou.current.reaction.dispose(),Ou.current=null}},[]);var Fu,Nu;if(ku.track(function(){try{Fu=_u()}catch(Vu){Nu=Vu}}),Nu)throw Nu;return Fu}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(_u){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(_u){return null}).$$typeof;function observer$1(_u,Tu){var Cu;if(ReactMemoSymbol&&_u.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Pu=(Cu=Tu==null?void 0:Tu.forwardRef)!==null&&Cu!==void 0?Cu:!1,Bu=_u,Ru=_u.displayName||_u.name;if(ReactForwardRefSymbol&&_u.$$typeof===ReactForwardRefSymbol&&(Pu=!0,Bu=_u.render,typeof Bu!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Lu=function(Ou,Du){return useObserver(function(){return Bu(Ou,Du)},Ru)};return Ru!==""&&(Lu.displayName=Ru),_u.contextTypes&&(Lu.contextTypes=_u.contextTypes),Pu&&(Lu=react$1.exports.forwardRef(Lu)),Lu=react$1.exports.memo(Lu),copyStaticProperties(_u,Lu),Lu}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(_u,Tu){Object.keys(_u).forEach(function(Cu){hoistBlackList[Cu]||Object.defineProperty(Tu,Cu,Object.getOwnPropertyDescriptor(_u,Cu))})}globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol$1(_u){if(typeof Symbol=="function")return Symbol(_u);var Tu="__$mobx-react "+_u+" ("+symbolId+")";return symbolId++,Tu}var createdSymbols={};function newSymbol(_u){return createdSymbols[_u]||(createdSymbols[_u]=createSymbol$1(_u)),createdSymbols[_u]}function shallowEqual(_u,Tu){if(is$2(_u,Tu))return!0;if(typeof _u!="object"||_u===null||typeof Tu!="object"||Tu===null)return!1;var Cu=Object.keys(_u),Pu=Object.keys(Tu);if(Cu.length!==Pu.length)return!1;for(var Bu=0;Bu<Cu.length;Bu++)if(!Object.hasOwnProperty.call(Tu,Cu[Bu])||!is$2(_u[Cu[Bu]],Tu[Cu[Bu]]))return!1;return!0}function is$2(_u,Tu){return _u===Tu?_u!==0||1/_u===1/Tu:_u!==_u&&Tu!==Tu}function setHiddenProp(_u,Tu,Cu){Object.hasOwnProperty.call(_u,Tu)?_u[Tu]=Cu:Object.defineProperty(_u,Tu,{enumerable:!1,configurable:!0,writable:!0,value:Cu})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(_u,Tu){var Cu=_u[mobxMixins]=_u[mobxMixins]||{},Pu=Cu[Tu]=Cu[Tu]||{};return Pu.locks=Pu.locks||0,Pu.methods=Pu.methods||[],Pu}function wrapper(_u,Tu){for(var Cu=this,Pu=arguments.length,Bu=new Array(Pu>2?Pu-2:0),Ru=2;Ru<Pu;Ru++)Bu[Ru-2]=arguments[Ru];Tu.locks++;try{var Lu;return _u!=null&&(Lu=_u.apply(this,Bu)),Lu}finally{Tu.locks--,Tu.locks===0&&Tu.methods.forEach(function(Ou){Ou.apply(Cu,Bu)})}}function wrapFunction(_u,Tu){var Cu=function(){for(var Bu=arguments.length,Ru=new Array(Bu),Lu=0;Lu<Bu;Lu++)Ru[Lu]=arguments[Lu];wrapper.call.apply(wrapper,[this,_u,Tu].concat(Ru))};return Cu}function patch(_u,Tu,Cu){var Pu=getMixins(_u,Tu);Pu.methods.indexOf(Cu)<0&&Pu.methods.push(Cu);var Bu=Object.getOwnPropertyDescriptor(_u,Tu);if(!(Bu&&Bu[mobxPatchedDefinition])){var Ru=_u[Tu],Lu=createDefinition(_u,Tu,Bu?Bu.enumerable:void 0,Pu,Ru);Object.defineProperty(_u,Tu,Lu)}}function createDefinition(_u,Tu,Cu,Pu,Bu){var Ru,Lu=wrapFunction(Bu,Pu);return Ru={},Ru[mobxPatchedDefinition]=!0,Ru.get=function(){return Lu},Ru.set=function(Du){if(this===_u)Lu=wrapFunction(Du,Pu);else{var $u=createDefinition(this,Tu,Cu,Pu,Du);Object.defineProperty(this,Tu,$u)}},Ru.configurable=!0,Ru.enumerable=Cu,Ru}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(_u){var Tu=_u.prototype;if(_u[mobxObserverProperty]){var Cu=getDisplayName(Tu);console.warn("The provided component class ("+Cu+`) 
                has already been declared as an observer component.`)}else _u[mobxObserverProperty]=!0;if(Tu.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(_u.__proto__!==react$1.exports.PureComponent){if(!Tu.shouldComponentUpdate)Tu.shouldComponentUpdate=observerSCU;else if(Tu.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp(Tu,"props"),makeObservableProp(Tu,"state");var Pu=Tu.render;if(typeof Pu!="function"){var Bu=getDisplayName(Tu);throw new Error("[mobx-react] class component ("+Bu+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return Tu.render=function(){return makeComponentReactive.call(this,Pu)},patch(Tu,"componentWillUnmount",function(){var Ru;if((Ru=this.render[mobxAdminProperty])==null||Ru.dispose(),this[mobxIsUnmounted]=!0,!this.render[mobxAdminProperty]){var Lu=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Lu+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),_u}function getDisplayName(_u){return _u.displayName||_u.name||_u.constructor&&(_u.constructor.displayName||_u.constructor.name)||"<component>"}function makeComponentReactive(_u){var Tu=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var Cu=getDisplayName(this),Pu=_u.bind(this),Bu=!1,Ru=new Reaction(Cu+".render()",function(){if(!Bu&&(Bu=!0,Tu[mobxIsUnmounted]!==!0)){var Ou=!0;try{setHiddenProp(Tu,isForcingUpdateKey,!0),Tu[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call(Tu),Ou=!1}finally{setHiddenProp(Tu,isForcingUpdateKey,!1),Ou&&Ru.dispose()}}});Ru.reactComponent=this,Lu[mobxAdminProperty]=Ru,this.render=Lu;function Lu(){Bu=!1;var Ou=void 0,Du=void 0;if(Ru.track(function(){try{Du=allowStateChanges(!1,Pu)}catch($u){Ou=$u}}),Ou)throw Ou;return Du}return Lu.call(this)}function observerSCU(_u,Tu){return this.state!==Tu?!0:!shallowEqual(this.props,_u)}function makeObservableProp(_u,Tu){var Cu=newSymbol("reactProp_"+Tu+"_valueHolder"),Pu=newSymbol("reactProp_"+Tu+"_atomHolder");function Bu(){return this[Pu]||setHiddenProp(this,Pu,createAtom("reactive "+Tu)),this[Pu]}Object.defineProperty(_u,Tu,{configurable:!0,enumerable:!0,get:function(){var Lu=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Lu=allowStateReadsStart(!0)),Bu.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Lu),this[Cu]},set:function(Lu){!this[isForcingUpdateKey]&&!shallowEqual(this[Cu],Lu)?(setHiddenProp(this,Cu,Lu),setHiddenProp(this,skipRenderKey,!0),Bu.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,Cu,Lu)}})}function observer(_u){return _u.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react$1.exports.Component,_u)||Object.prototype.isPrototypeOf.call(react$1.exports.PureComponent,_u)?makeClassComponentObserver(_u):observer$1(_u)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame$1=window.requestAnimationFrame||(_u=>setTimeout(_u,16)),_cancelAnimationFrame$1=window.cancelAnimationFrame||clearTimeout;function nextFrame(_u,Tu=0){Tu<=0?_requestAnimationFrame$1(_u):_requestAnimationFrame$1(()=>nextFrame(_u,Tu-1))}function requestAnimationFrameInterval$1(_u,Tu=60){let Cu=-1,Pu=0,Bu=-1;const Ru=1e3/Tu;function Lu(Ou){Bu===-1&&(Bu=Ou),Cu=_requestAnimationFrame$1(Lu),!(Ou-Pu<Ru)&&(Pu=Ou,_u&&_u(Ou-Bu))}return Cu=_requestAnimationFrame$1(Lu),function(){_cancelAnimationFrame$1(Cu)}}function setElementDataset(_u,Tu){_u&&Object.keys(Tu).forEach(Cu=>{const Pu=Tu[Cu].toString();_u instanceof Element?_u.setAttribute(`data-${Cu}`,Pu):_u instanceof Document?_u.documentElement.setAttribute(`data-${Cu}`,Pu):_u instanceof HTMLElement?_u.dataset[Cu]=Pu:_u.setAttribute(`data-${Cu}`,Pu)})}function getFileExpandedName(_u){if(!_u)return"";const Tu=_u.lastIndexOf(".");return _u.substring(Tu+1).toLowerCase()}function getMediaType(_u){const Tu=getFileExpandedName(_u);return getMediaTypeByExpandedName(Tu)}function getMediaTypeByExpandedName(_u){return _u?/jpg|jpeg|png$/.test(_u)?"image":/mp3|wav$/.test(_u)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(_u)?"video":"unknown":"unknown"}class Controller extends Subscribe$1{constructor({five:Cu,container:Pu,configs:Bu}){super();hm(this,"five");hm(this,"configs");hm(this,"videoAgentScene");hm(this,"vreoUnit");hm(this,"stopInterval");hm(this,"playing",!1);hm(this,"ended",!1);hm(this,"loading",!1);hm(this,"containerSize");hm(this,"appSize");hm(this,"container");hm(this,"waveAppearance",null);hm(this,"appearance",{waveStyle:"solid"});hm(this,"avatar",{});hm(this,"visible",!1);hm(this,"popUp",null);hm(this,"drawerConfig",null);this.configs=Bu,this.container=Pu,this.five=Cu,this.appSize=Bu.appSize,this.appearance=Ym(Ym({},this.appearance),Bu.appearance),makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,loading:observable,setLoading:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,waveAppearance:observable,avatar:observable,containerSize:observable,setContainerSize:action,appearance:observable,setAppearance:action,configs:observable.ref,setEnded:action,setAvatar:action}),reaction(()=>[this.appearance.waveStyle,this.loading],([Ru,Lu])=>{if(Lu===null){this.waveAppearance=null;return}if(Ru==="wave")switch(Lu){case!0:this.waveAppearance="double";break;case!1:this.waveAppearance="solid";break}else if(Ru==="solid")switch(Lu){case!0:this.waveAppearance="swap";break;case!1:this.waveAppearance="expand";break}},{fireImmediately:!0}),this.appSize?setElementDataset(this.container,{size:this.appSize}):reaction(()=>this.containerSize,Ru=>{if(!Ru)return;const Lu=Ru.width,Ou=Ru.height,Du=(()=>Lu<=500?"S":Lu<=1024?"M":Lu<=2048?"L":"XL")(),$u=(()=>Ou>Lu?"portrait":"landscape")();setElementDataset(this.container,{size:Du}),setElementDataset(this.container,{orientation:$u})},{fireImmediately:!0}),reaction(()=>this.ended,Ru=>{Ru&&this.emit("paused",!0)}),reaction(()=>this.playing,Ru=>{this.ended||this.emit(Ru?"playing":"paused")})}get agentType(){var Pu,Bu;const Cu=getMediaType((Pu=this.videoAgentScene)==null?void 0:Pu.videoAgentMesh.videoUrl);return(Bu=this.avatar)!=null&&Bu.force?"avatar":Cu==="video"?"video":"none"}openPopUp(Cu){if(!Cu){this.popUp=null;return}this.popUp=Cu}setLoading(Cu){this.loading=Cu}setAvatar(Cu){this.avatar=Cu}setContainerSize(Cu,Pu){this.containerSize={width:Cu,height:Pu}}setVisible(Cu){this.visible=Cu}setPlaying(Cu){this.playing=Cu}setEnded(Cu){this.ended=Cu}setAppearance(Cu){this.appearance=Ym(Ym({},this.appearance),Cu)}openDrawer(Cu){var Pu;if(!Cu){this.drawerConfig={content:"",height:(Pu=this.drawerConfig)==null?void 0:Pu.height};return}this.drawerConfig=Cu}get ready(){return!!this.videoAgentScene}get currentTime(){var Cu;return((Cu=this.videoAgentScene)==null?void 0:Cu.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Pu=>{if(Pu.parsed)return!1;const Bu=this.currentTime-Pu.start;return Bu<=100&&Bu>=0}):[]}get mediaInstance(){var Cu;return(Cu=this.videoAgentScene)==null?void 0:Cu.videoAgentMesh.mediaInstance}requestAnimationFrameLoop(Cu){var Bu,Ru,Lu,Ou;if((Bu=this.mediaInstance)!=null&&Bu.ended){this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause();return}if(!this.playing){(Ru=this.mediaInstance)!=null&&Ru.paused||(Lu=this.mediaInstance)==null||Lu.pause();return}((Ou=this.mediaInstance)==null?void 0:Ou.paused)&&this.playing&&this.mediaInstance.play(),this.currentKeyframes.forEach(Du=>{Du.parsed||(Du.parsed=!0,this.emit(Du.type,Du),Cu&&Cu(Du.type,Du))})}run(Cu){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval$1(()=>this.requestAnimationFrameLoop(Cu)))}dispose(){this.setPlaying(!1),this.currentKeyframes&&this.currentKeyframes.forEach(Cu=>Cu.parsed=!1),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.currentTime=0),this.stopInterval&&(this.stopInterval(),this.stopInterval=void 0)}}const ControllerContext=react$1.exports.createContext(null);function useController(){const _u=React.useContext(ControllerContext);if(!_u)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return _u}function useFiveInstance(){const _u=useController();if(!_u.five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return _u.five}function useFiveProject2d(){const _u=useFiveInstance();return Tu=>_u.project2d(Tu,!1)}var CameraMovementEffect$1=(_u=>(_u.Move="Move",_u.Rotate="Rotate",_u))(CameraMovementEffect$1||{}),Rotation$1=(_u=>(_u.Clockwise="Clockwise",_u.Anticlockwise="Anticlockwise",_u.Loop="Loop",_u))(Rotation$1||{}),Easing$1={Linear:{None:function(_u){return _u}},Quadratic:{In:function(_u){return _u*_u},Out:function(_u){return _u*(2-_u)},InOut:function(_u){return(_u*=2)<1?.5*_u*_u:-.5*(--_u*(_u-2)-1)}},Cubic:{In:function(_u){return _u*_u*_u},Out:function(_u){return--_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u:.5*((_u-=2)*_u*_u+2)}},Quartic:{In:function(_u){return _u*_u*_u*_u},Out:function(_u){return 1- --_u*_u*_u*_u},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u:-.5*((_u-=2)*_u*_u*_u-2)}},Quintic:{In:function(_u){return _u*_u*_u*_u*_u},Out:function(_u){return--_u*_u*_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u*_u:.5*((_u-=2)*_u*_u*_u*_u+2)}},Sinusoidal:{In:function(_u){return 1-Math.cos(_u*Math.PI/2)},Out:function(_u){return Math.sin(_u*Math.PI/2)},InOut:function(_u){return .5*(1-Math.cos(Math.PI*_u))}},Exponential:{In:function(_u){return _u===0?0:Math.pow(1024,_u-1)},Out:function(_u){return _u===1?1:1-Math.pow(2,-10*_u)},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2)<1?.5*Math.pow(1024,_u-1):.5*(-Math.pow(2,-10*(_u-1))+2)}},Circular:{In:function(_u){return 1-Math.sqrt(1-_u*_u)},Out:function(_u){return Math.sqrt(1- --_u*_u)},InOut:function(_u){return(_u*=2)<1?-.5*(Math.sqrt(1-_u*_u)-1):.5*(Math.sqrt(1-(_u-=2)*_u)+1)}},Elastic:{In:function(_u){return _u===0?0:_u===1?1:-Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)},Out:function(_u){return _u===0?0:_u===1?1:Math.pow(2,-10*_u)*Math.sin((_u-.1)*5*Math.PI)+1},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2,_u<1?-.5*Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI):.5*Math.pow(2,-10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)+1)}},Back:{In:function(_u){var Tu=1.70158;return _u*_u*((Tu+1)*_u-Tu)},Out:function(_u){var Tu=1.70158;return--_u*_u*((Tu+1)*_u+Tu)+1},InOut:function(_u){var Tu=2.5949095;return(_u*=2)<1?.5*(_u*_u*((Tu+1)*_u-Tu)):.5*((_u-=2)*_u*((Tu+1)*_u+Tu)+2)}},Bounce:{In:function(_u){return 1-Easing$1.Bounce.Out(1-_u)},Out:function(_u){return _u<1/2.75?7.5625*_u*_u:_u<2/2.75?7.5625*(_u-=1.5/2.75)*_u+.75:_u<2.5/2.75?7.5625*(_u-=2.25/2.75)*_u+.9375:7.5625*(_u-=2.625/2.75)*_u+.984375},InOut:function(_u){return _u<.5?Easing$1.Bounce.In(_u*2)*.5:Easing$1.Bounce.Out(_u*2-1)*.5+.5}}},now$2;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now$2=function(){var _u=process.hrtime();return _u[0]*1e3+_u[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now$2=self.performance.now.bind(self.performance):Date.now!==void 0?now$2=Date.now:now$2=function(){return new Date().getTime()};var now$1$1=now$2,Group=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var Tu=this;return Object.keys(this._tweens).map(function(Cu){return Tu._tweens[Cu]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function(Tu){this._tweens[Tu.getId()]=Tu,this._tweensAddedDuringUpdate[Tu.getId()]=Tu},_u.prototype.remove=function(Tu){delete this._tweens[Tu.getId()],delete this._tweensAddedDuringUpdate[Tu.getId()]},_u.prototype.update=function(Tu,Cu){Tu===void 0&&(Tu=now$1$1()),Cu===void 0&&(Cu=!1);var Pu=Object.keys(this._tweens);if(Pu.length===0)return!1;for(;Pu.length>0;){this._tweensAddedDuringUpdate={};for(var Bu=0;Bu<Pu.length;Bu++){var Ru=this._tweens[Pu[Bu]],Lu=!Cu;Ru&&Ru.update(Tu,Lu)===!1&&!Cu&&delete this._tweens[Pu[Bu]]}Pu=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),Interpolation={Linear:function(_u,Tu){var Cu=_u.length-1,Pu=Cu*Tu,Bu=Math.floor(Pu),Ru=Interpolation.Utils.Linear;return Tu<0?Ru(_u[0],_u[1],Pu):Tu>1?Ru(_u[Cu],_u[Cu-1],Cu-Pu):Ru(_u[Bu],_u[Bu+1>Cu?Cu:Bu+1],Pu-Bu)},Bezier:function(_u,Tu){for(var Cu=0,Pu=_u.length-1,Bu=Math.pow,Ru=Interpolation.Utils.Bernstein,Lu=0;Lu<=Pu;Lu++)Cu+=Bu(1-Tu,Pu-Lu)*Bu(Tu,Lu)*_u[Lu]*Ru(Pu,Lu);return Cu},CatmullRom:function(_u,Tu){var Cu=_u.length-1,Pu=Cu*Tu,Bu=Math.floor(Pu),Ru=Interpolation.Utils.CatmullRom;return _u[0]===_u[Cu]?(Tu<0&&(Bu=Math.floor(Pu=Cu*(1+Tu))),Ru(_u[(Bu-1+Cu)%Cu],_u[Bu],_u[(Bu+1)%Cu],_u[(Bu+2)%Cu],Pu-Bu)):Tu<0?_u[0]-(Ru(_u[0],_u[0],_u[1],_u[1],-Pu)-_u[0]):Tu>1?_u[Cu]-(Ru(_u[Cu],_u[Cu],_u[Cu-1],_u[Cu-1],Pu-Cu)-_u[Cu]):Ru(_u[Bu?Bu-1:0],_u[Bu],_u[Cu<Bu+1?Cu:Bu+1],_u[Cu<Bu+2?Cu:Bu+2],Pu-Bu)},Utils:{Linear:function(_u,Tu,Cu){return(Tu-_u)*Cu+_u},Bernstein:function(_u,Tu){var Cu=Interpolation.Utils.Factorial;return Cu(_u)/Cu(Tu)/Cu(_u-Tu)},Factorial:function(){var _u=[1];return function(Tu){var Cu=1;if(_u[Tu])return _u[Tu];for(var Pu=Tu;Pu>1;Pu--)Cu*=Pu;return _u[Tu]=Cu,Cu}}(),CatmullRom:function(_u,Tu,Cu,Pu,Bu){var Ru=(Cu-_u)*.5,Lu=(Pu-Tu)*.5,Ou=Bu*Bu,Du=Bu*Ou;return(2*Tu-2*Cu+Ru+Lu)*Du+(-3*Tu+3*Cu-2*Ru-Lu)*Ou+Ru*Bu+Tu}}},Sequence=function(){function _u(){}return _u.nextId=function(){return _u._nextId++},_u._nextId=0,_u}(),mainGroup=new Group,Tween=function(){function _u(Tu,Cu){Cu===void 0&&(Cu=mainGroup),this._object=Tu,this._group=Cu,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing$1.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return _u.prototype.getId=function(){return this._id},_u.prototype.isPlaying=function(){return this._isPlaying},_u.prototype.isPaused=function(){return this._isPaused},_u.prototype.to=function(Tu,Cu){return this._valuesEnd=Object.create(Tu),Cu!==void 0&&(this._duration=Cu),this},_u.prototype.duration=function(Tu){return this._duration=Tu,this},_u.prototype.start=function(Tu){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Cu in this._valuesStartRepeat)this._swapEndStartRepeatValues(Cu),this._valuesStart[Cu]=this._valuesStartRepeat[Cu]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=Tu!==void 0?typeof Tu=="string"?now$1$1()+parseFloat(Tu):Tu:now$1$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},_u.prototype._setupProperties=function(Tu,Cu,Pu,Bu){for(var Ru in Pu){var Lu=Tu[Ru],Ou=Array.isArray(Lu),Du=Ou?"array":typeof Lu,$u=!Ou&&Array.isArray(Pu[Ru]);if(!(Du==="undefined"||Du==="function")){if($u){var ku=Pu[Ru];if(ku.length===0)continue;ku=ku.map(this._handleRelativeValue.bind(this,Lu)),Pu[Ru]=[Lu].concat(ku)}if((Du==="object"||Ou)&&Lu&&!$u){Cu[Ru]=Ou?[]:{};for(var Fu in Lu)Cu[Ru][Fu]=Lu[Fu];Bu[Ru]=Ou?[]:{},this._setupProperties(Lu,Cu[Ru],Pu[Ru],Bu[Ru])}else typeof Cu[Ru]=="undefined"&&(Cu[Ru]=Lu),Ou||(Cu[Ru]*=1),$u?Bu[Ru]=Pu[Ru].slice().reverse():Bu[Ru]=Cu[Ru]||0}}},_u.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},_u.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},_u.prototype.pause=function(Tu){return Tu===void 0&&(Tu=now$1$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=Tu,this._group&&this._group.remove(this),this)},_u.prototype.resume=function(Tu){return Tu===void 0&&(Tu=now$1$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=Tu-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},_u.prototype.stopChainedTweens=function(){for(var Tu=0,Cu=this._chainedTweens.length;Tu<Cu;Tu++)this._chainedTweens[Tu].stop();return this},_u.prototype.group=function(Tu){return this._group=Tu,this},_u.prototype.delay=function(Tu){return this._delayTime=Tu,this},_u.prototype.repeat=function(Tu){return this._initialRepeat=Tu,this._repeat=Tu,this},_u.prototype.repeatDelay=function(Tu){return this._repeatDelayTime=Tu,this},_u.prototype.yoyo=function(Tu){return this._yoyo=Tu,this},_u.prototype.easing=function(Tu){return this._easingFunction=Tu,this},_u.prototype.interpolation=function(Tu){return this._interpolationFunction=Tu,this},_u.prototype.chain=function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return this._chainedTweens=Tu,this},_u.prototype.onStart=function(Tu){return this._onStartCallback=Tu,this},_u.prototype.onUpdate=function(Tu){return this._onUpdateCallback=Tu,this},_u.prototype.onRepeat=function(Tu){return this._onRepeatCallback=Tu,this},_u.prototype.onComplete=function(Tu){return this._onCompleteCallback=Tu,this},_u.prototype.onStop=function(Tu){return this._onStopCallback=Tu,this},_u.prototype.update=function(Tu,Cu){if(Tu===void 0&&(Tu=now$1$1()),Cu===void 0&&(Cu=!0),this._isPaused)return!0;var Pu,Bu,Ru=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(Tu>Ru)return!1;Cu&&this.start(Tu)}if(this._goToEnd=!1,Tu<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Bu=(Tu-this._startTime)/this._duration,Bu=this._duration===0||Bu>1?1:Bu;var Lu=this._easingFunction(Bu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Lu),this._onUpdateCallback&&this._onUpdateCallback(this._object,Bu),Bu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Pu in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Pu]=="string"&&(this._valuesStartRepeat[Pu]=this._valuesStartRepeat[Pu]+parseFloat(this._valuesEnd[Pu])),this._yoyo&&this._swapEndStartRepeatValues(Pu),this._valuesStart[Pu]=this._valuesStartRepeat[Pu];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=Tu+this._repeatDelayTime:this._startTime=Tu+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Ou=0,Du=this._chainedTweens.length;Ou<Du;Ou++)this._chainedTweens[Ou].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},_u.prototype._updateProperties=function(Tu,Cu,Pu,Bu){for(var Ru in Pu)if(Cu[Ru]!==void 0){var Lu=Cu[Ru]||0,Ou=Pu[Ru],Du=Array.isArray(Tu[Ru]),$u=Array.isArray(Ou),ku=!Du&&$u;ku?Tu[Ru]=this._interpolationFunction(Ou,Bu):typeof Ou=="object"&&Ou?this._updateProperties(Tu[Ru],Lu,Ou,Bu):(Ou=this._handleRelativeValue(Lu,Ou),typeof Ou=="number"&&(Tu[Ru]=Lu+(Ou-Lu)*Bu))}},_u.prototype._handleRelativeValue=function(Tu,Cu){return typeof Cu!="string"?Cu:Cu.charAt(0)==="+"||Cu.charAt(0)==="-"?Tu+parseFloat(Cu):parseFloat(Cu)},_u.prototype._swapEndStartRepeatValues=function(Tu){var Cu=this._valuesStartRepeat[Tu],Pu=this._valuesEnd[Tu];typeof Pu=="string"?this._valuesStartRepeat[Tu]=this._valuesStartRepeat[Tu]+parseFloat(Pu):this._valuesStartRepeat[Tu]=this._valuesEnd[Tu],this._valuesEnd[Tu]=Cu},_u}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove$1=TWEEN.remove.bind(TWEEN),update$2=TWEEN.update.bind(TWEEN),exports={Easing:Easing$1,Group,Interpolation,now:now$1$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove:remove$1,update:update$2};const Easing=Easing$1;function tween(_u,Tu,Cu,Pu=Easing.Linear.None){const Bu=new Tween(_u).to(Tu,Cu).easing(Pu);nextFrame(()=>Bu.start(0));const Ru=requestAnimationFrameInterval$1(Ou=>{Bu.update(Ou)===!1&&Ru()}),Lu=[];return Bu.onDestroy=Ou=>(Lu.push(Ou),Bu),Bu.destroy=function(){this.stop(),Object.assign(Bu,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let Ou;for(;Ou=Lu.shift();)Ou();Ru()},Bu}function tweenProgress$1(_u,Tu){return tween({progress:0},{progress:1},_u,Tu)}const PI$1=Math.PI,PI_2$1=PI$1*2;function formatLatitude(_u){return _u%PI_2$1}function formatLongitude(_u){return _u%PI_2$1}const getLongitudeParams=(_u,Tu,Cu)=>{if(_u=formatLongitude(_u),Tu=formatLongitude(Tu),Cu===Rotation$1.Anticlockwise&&_u>Tu)Tu+=PI_2$1;else if(Cu===Rotation$1.Clockwise&&Tu>_u)_u+=PI_2$1;else{if(Cu!==Rotation$1.Anticlockwise&&Cu!==Rotation$1.Clockwise&&Tu-_u>PI$1)return getLongitudeParams(_u,Tu,Rotation$1.Clockwise);if(Cu!==Rotation$1.Anticlockwise&&Cu!==Rotation$1.Clockwise&&_u-Tu>PI$1)return getLongitudeParams(_u,Tu,Rotation$1.Anticlockwise)}return{from:_u,to:Tu}};function progressNumber(_u,Tu,Cu){return _u+(Tu-_u)*Cu}const CameraMovementPlugin=_u=>{const Tu=(Bu,Ru,Lu={preload:!0})=>new Promise(async(Ou,Du)=>{if(Lu.asyncStartCallback&&Lu.asyncStartCallback(),_u.panoIndex===void 0)return Du(!1);if(Bu.mode&&Bu.mode!==_u.currentMode&&await new Promise(ku=>{!Bu.mode||(_u.once("modeChange",Fu=>{_u.once("initAnimationEnded",()=>{Fu===Bu.mode&&ku(!0)})}),_u.changeMode(Bu.mode,{fov:Bu.fov||void 0,latitude:Bu.latitude||void 0,longitude:Bu.longitude||void 0,panoIndex:Bu.panoIndex||void 0}))}),Bu.mode===Five.Mode.Floorplan||(Lu.preload&&Bu.panoIndex!==void 0&&Bu.panoIndex!==_u.panoIndex&&await _u.preloadPano(Bu.panoIndex),Lu.asyncEndCallback&&Lu.asyncEndCallback(),Bu.panoIndex===void 0&&Bu.fov===void 0&&Bu.latitude===void 0&&Bu.longitude===void 0))return Ou(!0);const $u=Bu.panoIndex!==void 0?Bu.panoIndex:_u.panoIndex;if($u!==void 0){const ku=Object.assign(Bu,{duration:Ru,moveEndCallback:()=>Ou(!0),moveCancelCallback:()=>{Ou(!0)}});await _u.moveToPano($u,ku)}else Du(!1)}),Cu=Bu=>{const Ru=_u.state,Lu=formatLatitude(Ru.latitude),Ou=formatLatitude(Bu.latitude),{from:Du,to:$u}=getLongitudeParams(Ru.longitude,Bu.longitude,Bu.rotation||Rotation$1.Loop),ku=Ru.fov,Fu=Bu.fov;return{from:{latitude:Lu,longitude:Du,fov:ku},to:{latitude:Ou,longitude:$u,fov:Fu}}};return{move:Tu,rotate:async(Bu,Ru,Lu={})=>{Lu.asyncStartCallback&&Lu.asyncStartCallback(),Bu.mode&&_u.currentMode!==Bu.mode&&await _u.changeMode(Bu.mode),Bu.mode===Five.Mode.Panorama&&_u.currentMode===Five.Mode.Panorama&&Bu.panoIndex!==void 0&&Bu.panoIndex!==_u.panoIndex&&(Lu.preload&&await _u.preloadPano(Bu.panoIndex),await new Promise(($u,ku)=>{_u.moveToPano(Bu.panoIndex,{moveEndCallback:()=>$u(!0),moveCancelCallback:()=>ku(!1),effect:"fade"})})),Lu.asyncEndCallback&&Lu.asyncEndCallback();const{from:Ou,to:Du}=Cu(Bu);return await new Promise(($u,ku)=>{const Fu=({progress:ju})=>{const Uu={};Uu.longitude=progressNumber(Ou.longitude,Du.longitude,ju)%PI_2$1,Uu.latitude=progressNumber(Ou.latitude,Du.latitude,ju),Uu.fov=progressNumber(Ou.fov,Du.fov,ju),_u.setState(Uu,!0)},Nu=()=>{$u(!0)},Vu=()=>{$u(!1)};let Gu=Ru;Bu.rotation===Rotation$1.Loop&&(Gu=Bu.rotateSpeed?Math.ceil(Math.abs(Du.longitude-Ou.longitude)/Bu.rotateSpeed*1e3):Ru);const Hu=tweenProgress$1(Gu,Easing.Linear.None).onUpdate(Fu).onComplete(Nu).onDestroy(Vu);Bu.rotation===Rotation$1.Loop&&Hu.repeat(1/0).yoyo(!0),setTimeout(()=>{Hu.destroy(),$u(!0)},Ru)})}}};var VreoKeyframeEnum=(_u=>(_u.CameraMovement="CameraMovement",_u.PanoTag="PanoTag",_u.PanoTextLabel="PanoTextLabel",_u.Prompter="Prompter",_u.UpdateVRPanorama="UpdateVRPanorama",_u.ModelVideo="ModelVideo",_u.PanoEffect="PanoEffect",_u.InfoPanel="InfoPanel",_u.VideoEffect="VideoEffect",_u.BgMusic="BgMusic",_u.Exit="Exit",_u.Custom="Custom",_u))(VreoKeyframeEnum||{}),InfoPanelTypeEnum=(_u=>(_u.Image="Image",_u.Video="Video",_u))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(_u=>(_u.Drawer="Drawer",_u.PopUp="PopUp",_u))(InfoPanelStyleEnum||{});function CameraMovement(){const _u=useController(),Tu=useFiveInstance(),Cu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Pu=async Bu=>{Cu.current||(Cu.current=CameraMovementPlugin(Tu));const{start:Ru,end:Lu,data:Ou}=Bu,Du=Ou,$u=Du.effect;$u===CameraMovementEffect$1.Rotate?await Cu.current.rotate(Ou,Lu-Ru):$u===CameraMovementEffect$1.Move?await Cu.current.move(Ou,Lu-Ru):Du.panoIndex!==void 0&&Du.panoIndex!==Tu.panoIndex?await Cu.current.move(Ou,Lu-Ru):await Cu.current.rotate(Ou,Lu-Ru)};return _u.on(VreoKeyframeEnum.CameraMovement,Pu),()=>{_u.off(VreoKeyframeEnum.CameraMovement,Pu)}},[_u]),jsx(Fragment,{})}const resizeObserverCache=new Map;function addResizeListener(_u,Tu,Cu=!0){if(!_u)return()=>{};if(Cu&&Tu(_u.clientWidth,_u.clientHeight),typeof ResizeObserver!="undefined"&&ResizeObserver){const Pu=new ResizeObserver(()=>Tu(_u.clientWidth,_u.clientHeight));return Pu.observe(_u),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u&&Pu.unobserve(_u),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}}else{const Pu=document.createElement("iframe");return Pu.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",Pu.classList.add("resize-sensor-iframe"),_u.appendChild(Pu),Pu.contentWindow?(Pu.contentWindow.addEventListener("resize",()=>{Tu(Pu.clientWidth,Pu.clientHeight)}),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u.removeChild(Pu),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}):()=>{}}}function hasResizeListener(_u){return _u?resizeObserverCache.get(_u)||0>0:!1}function ResizeObserver$1(){const _u=React.useRef(null),Tu=useController();return React.useEffect(()=>{if(!_u.current)return;const Cu=Tu.container.parentElement;if(hasResizeListener(Cu))return;const Pu=addResizeListener(Cu,(Bu,Ru)=>{Tu.setContainerSize(Bu,Ru)});return()=>{Pu()}},[]),jsx("div",{className:"resizeObserver-element",ref:_u})}function InfoPanelImg({url:_u,children:Tu}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--img",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[Tu,jsx("img",{className:"vreo-infoPanelImg",src:_u})]})})})})}function InfoPanelVideo({url:_u,children:Tu}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--video",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[Tu,jsx("div",{className:"vreo-infoPanelVideo",children:jsx("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:_u})})]})})})})}const Title=_u=>!_u.title&&!_u.subTitle?null:jsxs(Fragment,{children:[jsx("div",{className:"vreo-infoPanel-title-shadow"}),jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:_u.title}),jsx("div",{className:"vreo-infoPanel-t2",children:_u.subTitle})]})]});function InfoPanel(){const _u=react$1.exports.useRef(),Tu=useController();return react$1.exports.useEffect(()=>{var Pu;if(((Pu=Tu.configs)==null?void 0:Pu.keyframeMap.InfoPanel)===!1)return;const Cu=Bu=>{const{start:Ru,end:Lu,data:Ou}=Bu,Du=Ou,{title:$u,subTitle:ku,style:Fu}=Du;do{if(Fu===InfoPanelStyleEnum.PopUp){Du.type===InfoPanelTypeEnum.Image?Tu.openPopUp(jsx(InfoPanelImg,{url:Du.url,children:jsx(Title,{title:$u,subTitle:ku})})):Du.type===InfoPanelTypeEnum.Video&&Tu.openPopUp(jsx(InfoPanelVideo,{url:Du.url,children:jsx(Title,{title:$u,subTitle:ku})}));break}Du.type===InfoPanelTypeEnum.Image?Tu.openDrawer({content:jsx(InfoPanelImg,{url:Du.url,children:jsx(Title,{title:$u,subTitle:ku})}),height:"60vh"}):Du.type===InfoPanelTypeEnum.Video&&Tu.openDrawer({content:jsx(InfoPanelVideo,{url:Du.url,children:jsx(Title,{title:$u,subTitle:ku})}),height:"60vh"})}while(!1);_u.current=setTimeout(()=>{Tu.openDrawer(!1),Tu.openPopUp(!1)},Lu-Ru)};return Tu.on(VreoKeyframeEnum.InfoPanel,Cu),()=>{Tu.off(VreoKeyframeEnum.InfoPanel,Cu),_u.current&&clearTimeout(_u.current)}},[Tu]),jsx(Fragment,{})}const ModelTVVideoPlugin=(_u,{videoElement:Tu})=>{const Cu={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:Tu},Pu=Fu=>{Cu.videoTexture&&(Cu.videoTexture.image.muted=Fu,Cu.videoTexture.image.play())},Bu=()=>Cu.videoTexture?Cu.videoTexture.image.muted:!0,Ru=()=>{if(Cu.enabled||!Cu.videoTexture)return;Cu.enabled=!0,Cu.videoMeshes=Ou(),Cu.videoMeshes.forEach(Nu=>_u.scene.add(Nu));const Fu=()=>{if(!Cu.videoTexture)return;const Nu=()=>{var Vu;!Cu.videoTexture||((Vu=Cu.videoTexture)==null||Vu.image.removeEventListener("timeupdate",Nu),Cu.videoTextureEnabled=!0,Cu.videoMeshes.forEach(Gu=>{Gu.material.map!==Cu.videoTexture&&(Gu.material.map=Cu.videoTexture)}),_u.needsRender=!0)};Cu.videoTexture.image.addEventListener("timeupdate",Nu),Cu.videoTexture&&Cu.videoMeshes.length&&Cu.videoTexture.image.play()};if(_u.model.loaded)Fu();else return _u.once("modelLoaded",()=>Fu())},Lu=()=>{!Cu.enabled||(Cu.enabled=!1,Cu.videoMeshes.forEach(Fu=>{Fu.geometry.dispose(),Fu.material.dispose(),_u.scene.remove(Fu),Cu.videoTexture&&Cu.videoTexture.image.pause()}),Cu.videoMeshes=[],_u.needsRender=!0)},Ou=()=>Cu.rectPoints.map((Fu,Nu)=>{const Vu=new BufferGeometry,Gu=128,Hu=[];Hu.push(Fu[0].x,Fu[0].y,Fu[0].z);for(let Qu=1;Qu<Gu;Qu++)Hu.push(Fu[0].x+(Fu[1].x-Fu[0].x)*Qu/Gu,Fu[0].y+(Fu[1].y-Fu[0].y)*Qu/Gu,Fu[0].z+(Fu[1].z-Fu[0].z)*Qu/Gu);Hu.push(Fu[1].x,Fu[1].y,Fu[1].z),Hu.push(Fu[2].x,Fu[2].y,Fu[2].z);for(let Qu=1;Qu<Gu;Qu++)Hu.push(Fu[2].x+(Fu[3].x-Fu[2].x)*Qu/Gu,Fu[2].y+(Fu[3].y-Fu[2].y)*Qu/Gu,Fu[2].z+(Fu[3].z-Fu[2].z)*Qu/Gu);Hu.push(Fu[3].x,Fu[3].y,Fu[3].z);const ju=[];ju.push(0,1);for(let Qu=1;Qu<Gu;Qu++)ju.push(0,1-Qu/Gu);ju.push(0,0),ju.push(1,0);for(let Qu=1;Qu<Gu;Qu++)ju.push(1,Qu/Gu);ju.push(1,1);const Uu=[];for(let Qu=0;Qu<Gu;Qu++)Uu.push(Qu,Qu+1,Gu*2-Qu,Qu,Gu*2-Qu,Gu*2+1-Qu);Vu.setAttribute("position",new BufferAttribute(new Float32Array(Hu),3)),Vu.setAttribute("uv",new BufferAttribute(new Float32Array(ju),2)),Vu.setIndex(new BufferAttribute(new Uint32Array(Uu),1));const zu=new MeshBasicMaterial({map:Cu.videoTextureEnabled?Cu.videoTexture:Cu.imageTexture,side:DoubleSide}),Wu=new Mesh(Vu,zu);return Wu.renderOrder=1,Wu.name=`video-${Nu}-${performance.now()}`,Wu}),Du=Fu=>{const Nu=new TextureLoader().load(Fu);return Nu.minFilter=LinearFilter,Nu.magFilter=LinearFilter,Nu.format=RGBFormat,Nu},$u=(Fu,Nu)=>new Promise((Vu,Gu)=>{const Hu=new XMLHttpRequest;Hu.onreadystatechange=()=>{if(Hu.readyState==4)if(Hu.status==200){const ju=window.URL||window.webkitURL;Nu=Nu||document.createElement("video"),Nu.crossOrigin="anonymous",Nu.autoplay=!0,Nu.muted=!0,Nu.loop=!0,Nu.playsInline=!0,Nu.src=ju.createObjectURL(Hu.response);const Uu=new VideoTexture(Nu);Uu.minFilter=LinearFilter,Uu.magFilter=LinearFilter,Uu.format=RGBFormat,Vu(Object.assign(Uu,{videoSource:Fu}))}else Gu(new Error("Video download Error: "+Hu.status))},Hu.onerror=ju=>Gu(ju),Hu.open("GET",Fu),Hu.responseType="blob",Hu.send()}),ku=async(Fu,Nu)=>{const{video_src:Vu,video_poster_src:Gu,points:Hu}=Fu;Cu.videoSource=Vu,Cu.rectPoints=Hu.map(ju=>ju.map(({x:Uu,y:zu,z:Wu})=>new Vector3(Uu,zu,Wu))),Cu.imageTexture=Du(Gu),Nu&&(Cu.videoElement=Nu),Cu.videoTexture=await $u(Cu.videoSource,Cu.videoElement),Cu.enabled=!!Fu.enable,Cu.enabled&&Ru()};return _u.on("modeChange",()=>Pu(!0)),_u.on("wantsTapGesture",Fu=>{if(!Cu.enabled)return;const[Nu]=Fu.intersectObjects(_u.scene.children,!0);if(!!Nu&&/^video/.test(Nu.object.name))return Cu.videoTexture&&Pu(!Cu.videoTexture.image.muted),!1}),_u.on("panoArrived",()=>{if(!Cu.enabled||Bu())return;const Fu=_u.camera.position;Cu.rectPoints.find(Vu=>{const Gu=Vu.reduce((Hu,ju)=>new Vector3(Hu.x+ju.x/Vu.length,Hu.y+ju.y/Vu.length,Hu.z+ju.z/Vu.length),new Vector3);return Vu.map(Hu=>new Vector3((Hu.x+Gu.x)/2,(Hu.y+Gu.y)/2,(Hu.z+Gu.z)/2)).filter(Hu=>{Hu=Hu.clone().sub(Fu).normalize();const ju=new Raycaster(Fu,Hu),[Uu]=ju.intersectObjects(_u.scene.children,!0);return!!Uu&&/^video/.test(Uu.object.name)}).length>=2})||Pu(!0)}),_u.on("renderFrame",()=>{Cu.videoMeshes.forEach(Fu=>{Fu&&(Fu.needsRender=!0)})}),_u.on("load",Fu=>{Fu.modelTVVideoData&&ku(Fu.modelTVVideoData)}),{enable:Ru,disable:Lu,load:ku}};function createTransMatrix(_u){const Tu=new Matrix4;return Tu.fromArray(_u),Cu=>{const Pu=new Vector3(...Cu);return Pu.applyMatrix4(Tu),Pu.toArray()}}function ModelVideo(){const _u=useController(),Tu=useFiveInstance(),Cu=react$1.exports.useRef(),Pu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Bu=async Ru=>{var Gu,Hu;Cu.current||(Cu.current=ModelTVVideoPlugin(Tu,{}));const{start:Lu,end:Ou}=Ru,{videoSrc:Du,videoPosterSrc:$u,vertexs:ku,matrixWorld:Fu}=Ru.data,Nu=(()=>{if(ku.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(ku.length===4)return ku;const ju=new Box3;return ku.forEach(Uu=>ju.expandByPoint(new Vector3(Uu.x,Uu.y,Uu.z))),[new Vector3(ju.min.x,ju.max.y,ju.max.z),new Vector3(ju.min.x,ju.min.y,ju.max.z),new Vector3(ju.max.x,ju.min.y,ju.max.z),new Vector3(ju.max.x,ju.max.y,ju.max.z)]})(),Vu=(()=>{if(Fu){const ju=createTransMatrix(Fu);return[Nu.map(Uu=>{const zu=ju([Uu.x,Uu.y,Uu.z]);return{x:zu[0],y:zu[1],z:zu[2]}})]}return[Nu]})();Cu.current.disable(),await Cu.current.load({video_src:Du,video_poster_src:$u,points:Vu},(Hu=(Gu=_u.configs)==null?void 0:Gu.videos)==null?void 0:Hu.modelTVVideo),Cu.current.enable(),Pu.current=setTimeout(()=>{var ju;return(ju=Cu.current)==null?void 0:ju.disable()},Ou-Lu)};return _u.on(VreoKeyframeEnum.ModelVideo,Bu),()=>{_u.off(VreoKeyframeEnum.ModelVideo,Bu),Pu.current&&clearTimeout(Pu.current)}},[_u]),jsx(Fragment,{})}var line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t$1=tslib.exports;function e(_u){if(_u&&_u.__esModule)return _u;var Tu=Object.create(null);return _u&&Object.keys(_u).forEach(function(Cu){if(Cu!=="default"){var Pu=Object.getOwnPropertyDescriptor(_u,Cu);Object.defineProperty(Tu,Cu,Pu.get?Pu:{enumerable:!0,get:function(){return _u[Cu]}})}}),Tu.default=_u,Object.freeze(Tu)}var n=e(require$$1),i=function(_u){function Tu(){var Cu=_u.call(this)||this;return Cu.type="LineSegmentsGeometry",Cu.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),Cu.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),Cu.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),Cu}return t$1.__extends(Tu,_u),Tu.prototype.applyMatrix4=function(Cu){var Pu=this.attributes.instanceStart,Bu=this.attributes.instanceEnd;return Pu!==void 0&&(Pu.applyMatrix4(Cu),Bu.applyMatrix4(Cu),Pu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},Tu.prototype.setPositions=function(Cu){var Pu;Pu=Cu instanceof Float32Array?Cu:Array.isArray(Cu)?new Float32Array(Cu):new Float32Array;var Bu=new n.InstancedInterleavedBuffer(Pu,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(Bu,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(Bu,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},Tu.prototype.setColors=function(Cu){var Pu;Pu=Cu instanceof Float32Array?Cu:Array.isArray(Cu)?new Float32Array(Cu):new Float32Array;var Bu=new n.InstancedInterleavedBuffer(Pu,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(Bu,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(Bu,3,3)),this},Tu.prototype.fromWireframeGeometry=function(Cu){return this.setPositions(Cu.attributes.position.array),this},Tu.prototype.fromEdgesGeometry=function(Cu){return this.setPositions(Cu.attributes.position.array),this},Tu.prototype.fromMesh=function(Cu){return this.fromWireframeGeometry(new n.WireframeGeometry(Cu.geometry)),this},Tu.prototype.fromLineSegments=function(Cu){var Pu=Cu.geometry;if(Pu instanceof n.Geometry){var Bu=new n.BufferGeometry().fromGeometry(Pu);this.setPositions(Bu.attributes.position.array)}else Pu instanceof n.BufferGeometry&&this.setPositions(Pu.attributes.position.array);return this},Tu.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n.Box3);var Cu=this.attributes.instanceStart,Pu=this.attributes.instanceEnd;if(Cu!==void 0&&Pu!==void 0){var Bu=new n.Box3;this.boundingBox.setFromBufferAttribute(Cu),Bu.setFromBufferAttribute(Pu),this.boundingBox.union(Bu)}},Tu.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n.Sphere),this.boundingBox===null&&this.computeBoundingBox();var Cu=this.attributes.instanceStart,Pu=this.attributes.instanceEnd;if(Cu!==void 0&&Pu!==void 0){var Bu=this.boundingSphere.center;this.boundingBox.getCenter(Bu);for(var Ru=0,Lu=new n.Vector3,Ou=0,Du=Cu.count;Ou<Du;Ou++)Lu.fromBufferAttribute(Cu,Ou),Ru=Math.max(Ru,Bu.distanceToSquared(Lu)),Lu.fromBufferAttribute(Pu,Ou),Ru=Math.max(Ru,Bu.distanceToSquared(Lu));this.boundingSphere.radius=Math.sqrt(Ru),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},Tu.prototype.toJSON=function(){},Tu}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r$1={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o=function(_u){function Tu(Cu){var Pu=_u.call(this,{uniforms:n.UniformsUtils.clone(r$1.uniforms),vertexShader:r$1.vertexShader,fragmentShader:r$1.fragmentShader,clipping:!0})||this;return Pu.type="LineMaterial",Pu.dashed=!1,Object.defineProperties(Pu,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Bu){this.uniforms.diffuse.value=Bu}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Bu){this.uniforms.linewidth.value=Bu}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Bu){this.uniforms.dashScale.value=Bu}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Bu){this.uniforms.dashSize.value=Bu}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Bu){this.uniforms.gapSize.value=Bu}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Bu){this.uniforms.opacity.value=Bu}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Bu){this.uniforms.resolution.value.copy(Bu)}}}),Pu.setValues(Cu),Pu}return t$1.__extends(Tu,_u),Tu}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(_u){function Tu(Cu,Pu){var Bu=_u.call(this)||this;return Bu.type="LineSegments2",Bu.geometry=Cu!==void 0?Cu:new i,Bu.material=Pu!==void 0?Pu:new o({color:16777215*Math.random()}),Bu}return t$1.__extends(Tu,_u),Tu.prototype.computeLineDistances=function(){for(var Cu=this.geometry,Pu=Cu.attributes.instanceStart,Bu=Cu.attributes.instanceEnd,Ru=new Float32Array(2*Pu.count),Lu=new n.Vector3,Ou=new n.Vector3,Du=0,$u=0,ku=Pu.count;Du<ku;Du++,$u+=2)Lu.fromBufferAttribute(Pu,Du),Ou.fromBufferAttribute(Bu,Du),Ru[$u]=$u===0?0:Ru[$u-1],Ru[$u+1]=Ru[$u]+Lu.distanceTo(Ou);var Fu=new n.InstancedInterleavedBuffer(Ru,2,1);return Cu.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(Fu,1,0)),Cu.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(Fu,1,1)),this},Tu.prototype.raycast=function(Cu,Pu){Cu.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Bu=Cu.ray,Ru=Cu.camera,Lu=Ru.projectionMatrix,Ou=this.geometry,Du=this.material,$u=Du.resolution,ku=Du.linewidth,Fu=Ou.attributes.instanceStart,Nu=Ou.attributes.instanceEnd,Vu=new n.Vector4,Gu=new n.Vector4,Hu=new n.Vector4,ju=new n.Vector3,Uu=new n.Matrix4,zu=new n.Line3,Wu=new n.Vector3;Bu.at(1,Hu),Hu.w=1,Hu.applyMatrix4(Ru.matrixWorldInverse),Hu.applyMatrix4(Lu),Hu.multiplyScalar(1/Hu.w),Hu.x*=$u.x/2,Hu.y*=$u.y/2,Hu.z=0,ju.copy(Hu);var Qu=this.matrixWorld;Uu.multiplyMatrices(Ru.matrixWorldInverse,Qu);for(var qu=0,Yu=Fu.count;qu<Yu;qu++){Vu.fromBufferAttribute(Fu,qu),Gu.fromBufferAttribute(Nu,qu),Vu.w=1,Gu.w=1,Vu.applyMatrix4(Uu),Gu.applyMatrix4(Uu),Vu.applyMatrix4(Lu),Gu.applyMatrix4(Lu),Vu.multiplyScalar(1/Vu.w),Gu.multiplyScalar(1/Gu.w);var Xc=Vu.z<-1&&Gu.z<-1,_h=Vu.z>1&&Gu.z>1;if(!Xc&&!_h){Vu.x*=$u.x/2,Vu.y*=$u.y/2,Gu.x*=$u.x/2,Gu.y*=$u.y/2,zu.start.copy(Vu),zu.start.z=0,zu.end.copy(Gu),zu.end.z=0;var _d=zu.closestPointToPointParameter(ju,!0);zu.at(_d,Wu);var Ku=n.MathUtils.lerp(Vu.z,Gu.z,_d),Xu=Ku>=-1&&Ku<=1,Ju=ju.distanceTo(Wu)<.5*ku;if(Xu&&Ju){zu.start.fromBufferAttribute(Fu,qu),zu.end.fromBufferAttribute(Nu,qu),zu.start.applyMatrix4(Qu),zu.end.applyMatrix4(Qu);var Zu=new n.Vector3,_c=new n.Vector3;Bu.distanceSqToSegment(zu.start,zu.end,_c,Zu),Pu.push({point:_c,pointOnLine:Zu,distance:Bu.origin.distanceTo(_c),object:this,faceIndex:qu})}}}},Tu}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(_u){function Tu(Cu,Pu){var Bu=_u.call(this,Cu,Pu)||this;return Bu.type="Line2",Bu}return t$1.__extends(Tu,_u),Tu}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(_u){function Tu(){var Cu=_u.call(this)||this;return Cu.type="LineGeometry",Cu}return t$1.__extends(Tu,_u),Tu.prototype.setPositions=function(Cu){for(var Pu=Cu.length-3,Bu=new Float32Array(2*Pu),Ru=0;Ru<Pu;Ru+=3)Bu[2*Ru]=Cu[Ru],Bu[2*Ru+1]=Cu[Ru+1],Bu[2*Ru+2]=Cu[Ru+2],Bu[2*Ru+3]=Cu[Ru+3],Bu[2*Ru+4]=Cu[Ru+4],Bu[2*Ru+5]=Cu[Ru+5];return _u.prototype.setPositions.call(this,Bu),this},Tu.prototype.setColors=function(Cu){for(var Pu=Cu.length-3,Bu=new Float32Array(2*Pu),Ru=0;Ru<Pu;Ru+=3)Bu[2*Ru]=Cu[Ru],Bu[2*Ru+1]=Cu[Ru+1],Bu[2*Ru+2]=Cu[Ru+2],Bu[2*Ru+3]=Cu[Ru+3],Bu[2*Ru+4]=Cu[Ru+4],Bu[2*Ru+5]=Cu[Ru+5];return _u.prototype.setColors.call(this,Bu),this},Tu.prototype.fromLine=function(Cu){var Pu=Cu.geometry;if(Pu instanceof n.Geometry){var Bu=new n.BufferGeometry().fromGeometry(Pu);this.setPositions(Bu.attributes.position.array)}else Pu instanceof n.BufferGeometry&&this.setPositions(Pu.attributes.position.array);return this},Tu.prototype.copy=function(){return this},Tu}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l$1=function(_u){function Tu(Cu,Pu){Cu===void 0&&(Cu=new n.Vector3),Pu===void 0&&(Pu=new n.Vector3);var Bu=_u.call(this)||this;Bu.type="FiveLine",Bu.needsRender=!0;var Ru=new u,Lu=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});Bu.line=new s(Ru,Lu);var Ou=new n.BufferGeometry,Du=new n.PointsMaterial({color:14467195,size:8,map:c||(c=new n.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Bu.points=new n.Points(Ou,Du),Bu.points.renderOrder=11,Bu.points.frustumCulled=!1,Bu.setPoints(Cu,Pu),Bu.add(Bu.line,Bu.points),Bu}return t$1.__extends(Tu,_u),Object.defineProperty(Tu,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),Tu.prototype.setPoints=function(Cu,Pu){var Bu=[].concat(Cu.toArray(),Pu.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(Bu),3)),this.line.geometry.setPositions(Bu),this.line.computeLineDistances(),this.needsRender=!0},Tu.prototype.getPoints=function(){var Cu=this.points.geometry.attributes.position.array;return[new n.Vector3(Cu[0],Cu[1],Cu[2]),new n.Vector3(Cu[3],Cu[4],Cu[5])]},Tu.prototype.setMaterial=function(Cu){var Pu=this.line.material;for(var Bu in Cu)if(Cu.hasOwnProperty(Bu)){var Ru=Cu[Bu];Bu==="dashed"?(Pu.dashed=Ru,Ru?Pu.defines.USE_DASH="":delete Pu.defines.USE_DASH,Pu.needsUpdate=!0):Pu[Bu]=Cu[Bu]}this.needsRender=!0},Tu.prototype.setResolution=function(Cu,Pu){var Bu=this.line.material.resolution;Bu.x===Cu&&Bu.y===Pu||(Bu.set(Cu,Pu),this.needsRender=!0)},Tu}(n.Object3D);Object.assign(l$1.prototype,{isFiveLine:!0}),Line=line.Line=l$1,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;class BetterTween$1 extends exports.Tween{constructor(){super(...arguments);hm(this,"disposeMethods",[]);hm(this,"animationFrameDisposer");hm(this,"onDispose",Cu=>(this.disposeMethods.push(Cu),this));hm(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval$1(()=>this.update()),this));hm(this,"dispose",()=>{var Cu;this.stop(),(Cu=this.animationFrameDisposer)==null||Cu.call(this),this.disposeMethods.forEach(Pu=>Pu()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(_u,Tu=exports.Easing.Linear.None){const Cu=new BetterTween$1({progress:0}).to({progress:1});return _u!==void 0&&Cu.duration(_u),Tu!==void 0&&Cu.easing(Tu),Cu}function lineAnime(_u,Tu,Cu){const Pu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Bu=new TextureLoader().load(Pu),Ru=new Color(16777215),Lu=new Line;Lu.setMaterial({linewidth:2,color:Ru});const Ou=Lu.points.material;return Ou.map=Bu,Ou.color.set(Ru),Lu.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:Du})=>{const $u=.5-Du/2,ku=.5+Du/2,Fu=Tu.clone().lerp(Cu,$u),Nu=Tu.clone().lerp(Cu,ku);Lu.setPoints(Fu,Nu)}).onStart(()=>_u.scene.add(Lu)).onDispose(()=>{_u.scene.remove(Lu),_u.needsRender=!0})}function PanoEffect(){const[_u,Tu]=react$1.exports.useState(null),Cu=useFiveInstance(),Pu=react$1.exports.useRef(null),[Bu,Ru]=react$1.exports.useState(null),Lu=react$1.exports.useRef(),Ou=useController(),Du=useFiveProject2d(),$u=()=>{Pu.current&&Pu.current.dispose()};return react$1.exports.useEffect(()=>{const ku=Fu=>{const{start:Nu,end:Vu,data:Gu}=Fu,Hu=Gu,[ju,Uu]=Hu.twoVertexs,zu=new Vector3(ju.x,ju.y,ju.z),Wu=new Vector3(Uu.x,Uu.y,Uu.z);Pu.current=lineAnime(Cu,zu.clone(),Wu.clone()),Pu.current.play();const Qu=zu.lerp(Wu,.5),qu=zu.distanceTo(Wu),Yu=Du(Qu);if(!Yu)return;const{x:Xc,y:_h}=Yu;Tu({center:Qu,distance:qu}),Ru({left:Xc,top:_h}),Lu.current=setTimeout(()=>{Tu(null),Ru(null),$u()},Vu-Nu)};return Ou.on(VreoKeyframeEnum.PanoEffect,ku),()=>{Ou.off(VreoKeyframeEnum.PanoEffect,ku),Lu.current&&clearTimeout(Lu.current),$u()}},[Ou]),react$1.exports.useEffect(()=>{const ku=()=>{if(!(_u!=null&&_u.center))return;const{x:Fu,y:Nu,z:Vu}=_u.center,Gu=Du(new Vector3(Fu,Nu,Vu));if(!Gu)return;const{x:Hu,y:ju}=Gu;Ru({left:Hu,top:ju})};return Cu.on("currentStateChange",ku),()=>{Cu.off("currentStateChange",ku)}},[_u==null?void 0:_u.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":_u}),style:{left:((Bu==null?void 0:Bu.left)||0)+"px",top:((Bu==null?void 0:Bu.top)||0)+"px"},children:(_u==null?void 0:_u.distance.toFixed(4))+"m"})})}var CSS3DObject=function(_u){Object3D.call(this),this.element=_u,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(Tu){Tu.element instanceof Element&&Tu.element.parentNode!==null&&Tu.element.parentNode.removeChild(Tu.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(_u){CSS3DObject.call(this,_u)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var _u=this,Tu,Cu,Pu,Bu,Ru=new Matrix4,Lu={camera:{fov:0,style:""},objects:new WeakMap},Ou=document.createElement("div");Ou.style.overflow="hidden",this.domElement=Ou;var Du=document.createElement("div");Du.style.WebkitTransformStyle="preserve-3d",Du.style.transformStyle="preserve-3d",Du.style.pointerEvents="none",Ou.appendChild(Du);var $u=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:Tu,height:Cu}},this.setSize=function(Uu,zu){Tu=Uu,Cu=zu,Pu=Tu/2,Bu=Cu/2,Ou.style.width=Uu+"px",Ou.style.height=zu+"px",Du.style.width=Uu+"px",Du.style.height=zu+"px"};function ku(Uu){return Math.abs(Uu)<1e-10?0:Uu}function Fu(Uu){var zu=Uu.elements;return"matrix3d("+ku(zu[0])+","+ku(-zu[1])+","+ku(zu[2])+","+ku(zu[3])+","+ku(zu[4])+","+ku(-zu[5])+","+ku(zu[6])+","+ku(zu[7])+","+ku(zu[8])+","+ku(-zu[9])+","+ku(zu[10])+","+ku(zu[11])+","+ku(zu[12])+","+ku(-zu[13])+","+ku(zu[14])+","+ku(zu[15])+")"}function Nu(Uu,zu){var Wu=Uu.elements,Qu="matrix3d("+ku(Wu[0])+","+ku(Wu[1])+","+ku(Wu[2])+","+ku(Wu[3])+","+ku(-Wu[4])+","+ku(-Wu[5])+","+ku(-Wu[6])+","+ku(-Wu[7])+","+ku(Wu[8])+","+ku(Wu[9])+","+ku(Wu[10])+","+ku(Wu[11])+","+ku(Wu[12])+","+ku(Wu[13])+","+ku(Wu[14])+","+ku(Wu[15])+")";return $u?"translate(-50%,-50%)translate("+Pu+"px,"+Bu+"px)"+zu+Qu:"translate(-50%,-50%)"+Qu}function Vu(Uu,zu,Wu,Qu){if(Uu instanceof CSS3DObject){Uu.onBeforeRender(_u,zu,Wu);var qu;Uu instanceof CSS3DSprite?(Ru.copy(Wu.matrixWorldInverse),Ru.transpose(),Ru.copyPosition(Uu.matrixWorld),Ru.scale(Uu.scale),Ru.elements[3]=0,Ru.elements[7]=0,Ru.elements[11]=0,Ru.elements[15]=1,qu=Nu(Ru,Qu)):qu=Nu(Uu.matrixWorld,Qu);var Yu=Uu.element,Xc=Lu.objects.get(Uu);if(Xc===void 0||Xc.style!==qu){Yu.style.WebkitTransform=qu,Yu.style.transform=qu;var _h={style:qu};$u&&(_h.distanceToCameraSquared=Gu(Wu,Uu)),Lu.objects.set(Uu,_h)}Yu.style.display=Uu.visible?"":"none",Yu.parentNode!==Du&&Du.appendChild(Yu),Uu.onAfterRender(_u,zu,Wu)}for(var _d=0,Ku=Uu.children.length;_d<Ku;_d++)Vu(Uu.children[_d],zu,Wu,Qu)}var Gu=function(){var Uu=new Vector3,zu=new Vector3;return function(Wu,Qu){return Uu.setFromMatrixPosition(Wu.matrixWorld),zu.setFromMatrixPosition(Qu.matrixWorld),Uu.distanceToSquared(zu)}}();function Hu(Uu){var zu=[];return Uu.traverse(function(Wu){Wu instanceof CSS3DObject&&zu.push(Wu)}),zu}function ju(Uu){for(var zu=Hu(Uu).sort(function(Yu,Xc){var _h=Lu.objects.get(Yu).distanceToCameraSquared,_d=Lu.objects.get(Xc).distanceToCameraSquared;return _h-_d}),Wu=zu.length,Qu=0,qu=zu.length;Qu<qu;Qu++)zu[Qu].element.style.zIndex=Wu-Qu}this.render=function(Uu,zu){var Wu=zu.projectionMatrix.elements[5]*Bu;if(Lu.camera.fov!==Wu&&(zu.isPerspectiveCamera?(Ou.style.WebkitPerspective=Wu+"px",Ou.style.perspective=Wu+"px"):(Ou.style.WebkitPerspective="",Ou.style.perspective=""),Lu.camera.fov=Wu),Uu.autoUpdate===!0&&Uu.updateMatrixWorld(),zu.parent===null&&zu.updateMatrixWorld(),zu.isOrthographicCamera)var Qu=-(zu.right+zu.left)/2,qu=(zu.top+zu.bottom)/2;var Yu=zu.isOrthographicCamera?"scale("+Wu+")translate("+ku(Qu)+"px,"+ku(qu)+"px)"+Fu(zu.matrixWorldInverse):"translateZ("+Wu+"px)"+Fu(zu.matrixWorldInverse),Xc=Yu+"translate("+Pu+"px,"+Bu+"px)";Lu.camera.style!==Xc&&!$u&&(Du.style.WebkitTransform=Xc,Du.style.transform=Xc,Lu.camera.style=Xc),Vu(Uu,Uu,zu,Yu),$u&&ju(Uu)}};function noop(){}const identity=_u=>_u;function assign(_u,Tu){for(const Cu in Tu)_u[Cu]=Tu[Cu];return _u}function run(_u){return _u()}function blank_object(){return Object.create(null)}function run_all(_u){_u.forEach(run)}function is_function(_u){return typeof _u=="function"}function safe_not_equal(_u,Tu){return _u!=_u?Tu==Tu:_u!==Tu||_u&&typeof _u=="object"||typeof _u=="function"}let src_url_equal_anchor;function src_url_equal(_u,Tu){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=Tu,_u===src_url_equal_anchor.href}function is_empty(_u){return Object.keys(_u).length===0}function create_slot(_u,Tu,Cu,Pu){if(_u){const Bu=get_slot_context(_u,Tu,Cu,Pu);return _u[0](Bu)}}function get_slot_context(_u,Tu,Cu,Pu){return _u[1]&&Pu?assign(Cu.ctx.slice(),_u[1](Pu(Tu))):Cu.ctx}function get_slot_changes(_u,Tu,Cu,Pu){if(_u[2]&&Pu){const Bu=_u[2](Pu(Cu));if(Tu.dirty===void 0)return Bu;if(typeof Bu=="object"){const Ru=[],Lu=Math.max(Tu.dirty.length,Bu.length);for(let Ou=0;Ou<Lu;Ou+=1)Ru[Ou]=Tu.dirty[Ou]|Bu[Ou];return Ru}return Tu.dirty|Bu}return Tu.dirty}function update_slot_base(_u,Tu,Cu,Pu,Bu,Ru){if(Bu){const Lu=get_slot_context(Tu,Cu,Pu,Ru);_u.p(Lu,Bu)}}function get_all_dirty_from_scope(_u){if(_u.ctx.length>32){const Tu=[],Cu=_u.ctx.length/32;for(let Pu=0;Pu<Cu;Pu++)Tu[Pu]=-1;return Tu}return-1}function exclude_internal_props(_u){const Tu={};for(const Cu in _u)Cu[0]!=="$"&&(Tu[Cu]=_u[Cu]);return Tu}function compute_rest_props(_u,Tu){const Cu={};Tu=new Set(Tu);for(const Pu in _u)!Tu.has(Pu)&&Pu[0]!=="$"&&(Cu[Pu]=_u[Pu]);return Cu}const is_client=typeof window!="undefined";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?_u=>requestAnimationFrame(_u):noop;const tasks=new Set;function run_tasks(_u){tasks.forEach(Tu=>{Tu.c(_u)||(tasks.delete(Tu),Tu.f())}),tasks.size!==0&&raf(run_tasks)}function loop$1(_u){let Tu;return tasks.size===0&&raf(run_tasks),{promise:new Promise(Cu=>{tasks.add(Tu={c:_u,f:Cu})}),abort(){tasks.delete(Tu)}}}function append$1(_u,Tu){_u.appendChild(Tu)}function append_styles(_u,Tu,Cu){const Pu=get_root_for_style(_u);if(!Pu.getElementById(Tu)){const Bu=element("style");Bu.id=Tu,Bu.textContent=Cu,append_stylesheet(Pu,Bu)}}function get_root_for_style(_u){if(!_u)return document;const Tu=_u.getRootNode?_u.getRootNode():_u.ownerDocument;return Tu&&Tu.host?Tu:_u.ownerDocument}function append_empty_stylesheet(_u){const Tu=element("style");return append_stylesheet(get_root_for_style(_u),Tu),Tu.sheet}function append_stylesheet(_u,Tu){return append$1(_u.head||_u,Tu),Tu.sheet}function insert(_u,Tu,Cu){_u.insertBefore(Tu,Cu||null)}function detach(_u){_u.parentNode.removeChild(_u)}function destroy_each(_u,Tu){for(let Cu=0;Cu<_u.length;Cu+=1)_u[Cu]&&_u[Cu].d(Tu)}function element(_u){return document.createElement(_u)}function svg_element(_u){return document.createElementNS("http://www.w3.org/2000/svg",_u)}function text$1(_u){return document.createTextNode(_u)}function space(){return text$1(" ")}function empty(){return text$1("")}function listen(_u,Tu,Cu,Pu){return _u.addEventListener(Tu,Cu,Pu),()=>_u.removeEventListener(Tu,Cu,Pu)}function stop_propagation(_u){return function(Tu){return Tu.stopPropagation(),_u.call(this,Tu)}}function attr$1(_u,Tu,Cu){Cu==null?_u.removeAttribute(Tu):_u.getAttribute(Tu)!==Cu&&_u.setAttribute(Tu,Cu)}function set_attributes(_u,Tu){const Cu=Object.getOwnPropertyDescriptors(_u.__proto__);for(const Pu in Tu)Tu[Pu]==null?_u.removeAttribute(Pu):Pu==="style"?_u.style.cssText=Tu[Pu]:Pu==="__value"?_u.value=_u[Pu]=Tu[Pu]:Cu[Pu]&&Cu[Pu].set?_u[Pu]=Tu[Pu]:attr$1(_u,Pu,Tu[Pu])}function children$1(_u){return Array.from(_u.childNodes)}function set_data(_u,Tu){Tu=""+Tu,_u.wholeText!==Tu&&(_u.data=Tu)}function set_style(_u,Tu,Cu,Pu){Cu===null?_u.style.removeProperty(Tu):_u.style.setProperty(Tu,Cu,Pu?"important":"")}let crossorigin;function is_crossorigin(){if(crossorigin===void 0){crossorigin=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{crossorigin=!0}}return crossorigin}function add_resize_listener(_u,Tu){getComputedStyle(_u).position==="static"&&(_u.style.position="relative");const Pu=element("iframe");Pu.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),Pu.setAttribute("aria-hidden","true"),Pu.tabIndex=-1;const Bu=is_crossorigin();let Ru;return Bu?(Pu.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",Ru=listen(window,"message",Lu=>{Lu.source===Pu.contentWindow&&Tu()})):(Pu.src="about:blank",Pu.onload=()=>{Ru=listen(Pu.contentWindow,"resize",Tu)}),append$1(_u,Pu),()=>{(Bu||Ru&&Pu.contentWindow)&&Ru(),detach(Pu)}}function toggle_class(_u,Tu,Cu){_u.classList[Cu?"add":"remove"](Tu)}function custom_event(_u,Tu,{bubbles:Cu=!1,cancelable:Pu=!1}={}){const Bu=document.createEvent("CustomEvent");return Bu.initCustomEvent(_u,Cu,Pu,Tu),Bu}class HtmlTag{constructor(Tu=!1){this.is_svg=!1,this.is_svg=Tu,this.e=this.n=null}c(Tu){this.h(Tu)}m(Tu,Cu,Pu=null){this.e||(this.is_svg?this.e=svg_element(Cu.nodeName):this.e=element(Cu.nodeName),this.t=Cu,this.c(Tu)),this.i(Pu)}h(Tu){this.e.innerHTML=Tu,this.n=Array.from(this.e.childNodes)}i(Tu){for(let Cu=0;Cu<this.n.length;Cu+=1)insert(this.t,this.n[Cu],Tu)}p(Tu){this.d(),this.h(Tu),this.i(this.a)}d(){this.n.forEach(detach)}}const managed_styles=new Map;let active=0;function hash(_u){let Tu=5381,Cu=_u.length;for(;Cu--;)Tu=(Tu<<5)-Tu^_u.charCodeAt(Cu);return Tu>>>0}function create_style_information(_u,Tu){const Cu={stylesheet:append_empty_stylesheet(Tu),rules:{}};return managed_styles.set(_u,Cu),Cu}function create_rule(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou=0){const Du=16.666/Pu;let $u=`{
`;for(let ju=0;ju<=1;ju+=Du){const Uu=Tu+(Cu-Tu)*Ru(ju);$u+=ju*100+`%{${Lu(Uu,1-Uu)}}
`}const ku=$u+`100% {${Lu(Cu,1-Cu)}}
}`,Fu=`__svelte_${hash(ku)}_${Ou}`,Nu=get_root_for_style(_u),{stylesheet:Vu,rules:Gu}=managed_styles.get(Nu)||create_style_information(Nu,_u);Gu[Fu]||(Gu[Fu]=!0,Vu.insertRule(`@keyframes ${Fu} ${ku}`,Vu.cssRules.length));const Hu=_u.style.animation||"";return _u.style.animation=`${Hu?`${Hu}, `:""}${Fu} ${Pu}ms linear ${Bu}ms 1 both`,active+=1,Fu}function delete_rule(_u,Tu){const Cu=(_u.style.animation||"").split(", "),Pu=Cu.filter(Tu?Ru=>Ru.indexOf(Tu)<0:Ru=>Ru.indexOf("__svelte")===-1),Bu=Cu.length-Pu.length;Bu&&(_u.style.animation=Pu.join(", "),active-=Bu,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(_u=>{const{ownerNode:Tu}=_u.stylesheet;Tu&&detach(Tu)}),managed_styles.clear())})}let current_component;function set_current_component(_u){current_component=_u}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function beforeUpdate(_u){get_current_component().$$.before_update.push(_u)}function onMount(_u){get_current_component().$$.on_mount.push(_u)}function afterUpdate(_u){get_current_component().$$.after_update.push(_u)}function onDestroy(_u){get_current_component().$$.on_destroy.push(_u)}function createEventDispatcher(){const _u=get_current_component();return(Tu,Cu,{cancelable:Pu=!1}={})=>{const Bu=_u.$$.callbacks[Tu];if(Bu){const Ru=custom_event(Tu,Cu,{cancelable:Pu});return Bu.slice().forEach(Lu=>{Lu.call(_u,Ru)}),!Ru.defaultPrevented}return!0}}function setContext(_u,Tu){return get_current_component().$$.context.set(_u,Tu),Tu}function getContext(_u){return get_current_component().$$.context.get(_u)}function bubble(_u,Tu){const Cu=_u.$$.callbacks[Tu.type];Cu&&Cu.slice().forEach(Pu=>Pu.call(this,Tu))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(_u){render_callbacks.push(_u)}const seen_callbacks=new Set;let flushidx=0;function flush(){const _u=current_component;do{for(;flushidx<dirty_components.length;){const Tu=dirty_components[flushidx];flushidx++,set_current_component(Tu),update$1(Tu.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let Tu=0;Tu<render_callbacks.length;Tu+=1){const Cu=render_callbacks[Tu];seen_callbacks.has(Cu)||(seen_callbacks.add(Cu),Cu())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(_u)}function update$1(_u){if(_u.fragment!==null){_u.update(),run_all(_u.before_update);const Tu=_u.dirty;_u.dirty=[-1],_u.fragment&&_u.fragment.p(_u.ctx,Tu),_u.after_update.forEach(add_render_callback)}}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(_u,Tu,Cu){_u.dispatchEvent(custom_event(`${Tu?"intro":"outro"}${Cu}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(_u,Tu){_u&&_u.i&&(outroing.delete(_u),_u.i(Tu))}function transition_out(_u,Tu,Cu,Pu){if(_u&&_u.o){if(outroing.has(_u))return;outroing.add(_u),outros.c.push(()=>{outroing.delete(_u),Pu&&(Cu&&_u.d(1),Pu())}),_u.o(Tu)}else Pu&&Pu()}const null_transition={duration:0};function create_in_transition(_u,Tu,Cu){let Pu=Tu(_u,Cu),Bu=!1,Ru,Lu,Ou=0;function Du(){Ru&&delete_rule(_u,Ru)}function $u(){const{delay:Fu=0,duration:Nu=300,easing:Vu=identity,tick:Gu=noop,css:Hu}=Pu||null_transition;Hu&&(Ru=create_rule(_u,0,1,Nu,Fu,Vu,Hu,Ou++)),Gu(0,1);const ju=now$1()+Fu,Uu=ju+Nu;Lu&&Lu.abort(),Bu=!0,add_render_callback(()=>dispatch(_u,!0,"start")),Lu=loop$1(zu=>{if(Bu){if(zu>=Uu)return Gu(1,0),dispatch(_u,!0,"end"),Du(),Bu=!1;if(zu>=ju){const Wu=Vu((zu-ju)/Nu);Gu(Wu,1-Wu)}}return Bu})}let ku=!1;return{start(){ku||(ku=!0,delete_rule(_u),is_function(Pu)?(Pu=Pu(),wait().then($u)):$u())},invalidate(){ku=!1},end(){Bu&&(Du(),Bu=!1)}}}function create_out_transition(_u,Tu,Cu){let Pu=Tu(_u,Cu),Bu=!0,Ru;const Lu=outros;Lu.r+=1;function Ou(){const{delay:Du=0,duration:$u=300,easing:ku=identity,tick:Fu=noop,css:Nu}=Pu||null_transition;Nu&&(Ru=create_rule(_u,1,0,$u,Du,ku,Nu));const Vu=now$1()+Du,Gu=Vu+$u;add_render_callback(()=>dispatch(_u,!1,"start")),loop$1(Hu=>{if(Bu){if(Hu>=Gu)return Fu(0,1),dispatch(_u,!1,"end"),--Lu.r||run_all(Lu.c),!1;if(Hu>=Vu){const ju=ku((Hu-Vu)/$u);Fu(1-ju,ju)}}return Bu})}return is_function(Pu)?wait().then(()=>{Pu=Pu(),Ou()}):Ou(),{end(Du){Du&&Pu.tick&&Pu.tick(1,0),Bu&&(Ru&&delete_rule(_u,Ru),Bu=!1)}}}function outro_and_destroy_block(_u,Tu){transition_out(_u,1,1,()=>{Tu.delete(_u.key)})}function update_keyed_each(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu){let Nu=_u.length,Vu=Ru.length,Gu=Nu;const Hu={};for(;Gu--;)Hu[_u[Gu].key]=Gu;const ju=[],Uu=new Map,zu=new Map;for(Gu=Vu;Gu--;){const Yu=Fu(Bu,Ru,Gu),Xc=Cu(Yu);let _h=Lu.get(Xc);_h?Pu&&_h.p(Yu,Tu):(_h=$u(Xc,Yu),_h.c()),Uu.set(Xc,ju[Gu]=_h),Xc in Hu&&zu.set(Xc,Math.abs(Gu-Hu[Xc]))}const Wu=new Set,Qu=new Set;function qu(Yu){transition_in(Yu,1),Yu.m(Ou,ku),Lu.set(Yu.key,Yu),ku=Yu.first,Vu--}for(;Nu&&Vu;){const Yu=ju[Vu-1],Xc=_u[Nu-1],_h=Yu.key,_d=Xc.key;Yu===Xc?(ku=Yu.first,Nu--,Vu--):Uu.has(_d)?!Lu.has(_h)||Wu.has(_h)?qu(Yu):Qu.has(_d)?Nu--:zu.get(_h)>zu.get(_d)?(Qu.add(_h),qu(Yu)):(Wu.add(_d),Nu--):(Du(Xc,Lu),Nu--)}for(;Nu--;){const Yu=_u[Nu];Uu.has(Yu.key)||Du(Yu,Lu)}for(;Vu;)qu(ju[Vu-1]);return ju}function get_spread_update(_u,Tu){const Cu={},Pu={},Bu={$$scope:1};let Ru=_u.length;for(;Ru--;){const Lu=_u[Ru],Ou=Tu[Ru];if(Ou){for(const Du in Lu)Du in Ou||(Pu[Du]=1);for(const Du in Ou)Bu[Du]||(Cu[Du]=Ou[Du],Bu[Du]=1);_u[Ru]=Ou}else for(const Du in Lu)Bu[Du]=1}for(const Lu in Pu)Lu in Cu||(Cu[Lu]=void 0);return Cu}function create_component(_u){_u&&_u.c()}function mount_component(_u,Tu,Cu,Pu){const{fragment:Bu,after_update:Ru}=_u.$$;Bu&&Bu.m(Tu,Cu),Pu||add_render_callback(()=>{const Lu=_u.$$.on_mount.map(run).filter(is_function);_u.$$.on_destroy?_u.$$.on_destroy.push(...Lu):run_all(Lu),_u.$$.on_mount=[]}),Ru.forEach(add_render_callback)}function destroy_component(_u,Tu){const Cu=_u.$$;Cu.fragment!==null&&(run_all(Cu.on_destroy),Cu.fragment&&Cu.fragment.d(Tu),Cu.on_destroy=Cu.fragment=null,Cu.ctx=[])}function make_dirty(_u,Tu){_u.$$.dirty[0]===-1&&(dirty_components.push(_u),schedule_update(),_u.$$.dirty.fill(0)),_u.$$.dirty[Tu/31|0]|=1<<Tu%31}function init(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou=[-1]){const Du=current_component;set_current_component(_u);const $u=_u.$$={fragment:null,ctx:[],props:Ru,update:noop,not_equal:Bu,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(Tu.context||(Du?Du.$$.context:[])),callbacks:blank_object(),dirty:Ou,skip_bound:!1,root:Tu.target||Du.$$.root};Lu&&Lu($u.root);let ku=!1;if($u.ctx=Cu?Cu(_u,Tu.props||{},(Fu,Nu,...Vu)=>{const Gu=Vu.length?Vu[0]:Nu;return $u.ctx&&Bu($u.ctx[Fu],$u.ctx[Fu]=Gu)&&(!$u.skip_bound&&$u.bound[Fu]&&$u.bound[Fu](Gu),ku&&make_dirty(_u,Fu)),Nu}):[],$u.update(),ku=!0,run_all($u.before_update),$u.fragment=Pu?Pu($u.ctx):!1,Tu.target){if(Tu.hydrate){const Fu=children$1(Tu.target);$u.fragment&&$u.fragment.l(Fu),Fu.forEach(detach)}else $u.fragment&&$u.fragment.c();Tu.intro&&transition_in(_u.$$.fragment),mount_component(_u,Tu.target,Tu.anchor,Tu.customElement),flush()}set_current_component(Du)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(Tu,Cu){if(!is_function(Cu))return noop;const Pu=this.$$.callbacks[Tu]||(this.$$.callbacks[Tu]=[]);return Pu.push(Cu),()=>{const Bu=Pu.indexOf(Cu);Bu!==-1&&Pu.splice(Bu,1)}}$set(Tu){this.$$set&&!is_empty(Tu)&&(this.$$.skip_bound=!0,this.$$set(Tu),this.$$.skip_bound=!1)}}function cubicInOut(_u){return _u<.5?4*_u*_u*_u:.5*Math.pow(2*_u-2,3)+1}function cubicOut(_u){const Tu=_u-1;return Tu*Tu*Tu+1}function fade(_u,{delay:Tu=0,duration:Cu=400,easing:Pu=identity}={}){const Bu=+getComputedStyle(_u).opacity;return{delay:Tu,duration:Cu,easing:Pu,css:Ru=>`opacity: ${Ru*Bu}`}}function fly(_u,{delay:Tu=0,duration:Cu=400,easing:Pu=cubicOut,x:Bu=0,y:Ru=0,opacity:Lu=0}={}){const Ou=getComputedStyle(_u),Du=+Ou.opacity,$u=Ou.transform==="none"?"":Ou.transform,ku=Du*(1-Lu);return{delay:Tu,duration:Cu,easing:Pu,css:(Fu,Nu)=>`
			transform: ${$u} translate(${(1-Fu)*Bu}px, ${(1-Fu)*Ru}px);
			opacity: ${Du-ku*Nu}`}}function draw(_u,{delay:Tu=0,speed:Cu,duration:Pu,easing:Bu=cubicInOut}={}){let Ru=_u.getTotalLength();const Lu=getComputedStyle(_u);return Lu.strokeLinecap!=="butt"&&(Ru+=parseInt(Lu.strokeWidth)),Pu===void 0?Cu===void 0?Pu=800:Pu=Ru/Cu:typeof Pu=="function"&&(Pu=Pu(Ru)),{delay:Tu,duration:Pu,easing:Bu,css:(Ou,Du)=>`stroke-dasharray: ${Ou*Ru} ${Du*Ru}`}}const subscriber_queue=[];function writable(_u,Tu=noop){let Cu;const Pu=new Set;function Bu(Ou){if(safe_not_equal(_u,Ou)&&(_u=Ou,Cu)){const Du=!subscriber_queue.length;for(const $u of Pu)$u[1](),subscriber_queue.push($u,_u);if(Du){for(let $u=0;$u<subscriber_queue.length;$u+=2)subscriber_queue[$u][0](subscriber_queue[$u+1]);subscriber_queue.length=0}}}function Ru(Ou){Bu(Ou(_u))}function Lu(Ou,Du=noop){const $u=[Ou,Du];return Pu.add($u),Pu.size===1&&(Cu=Tu(Bu)||noop),Ou(_u),()=>{Pu.delete($u),Pu.size===0&&(Cu(),Cu=null)}}return{set:Bu,update:Ru,subscribe:Lu}}/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l=void 0,aa=mod;function r(_u,Tu){var Cu=_u.split("."),Pu=aa;!(Cu[0]in Pu)&&Pu.execScript&&Pu.execScript("var "+Cu[0]);for(var Bu;Cu.length&&(Bu=Cu.shift());)!Cu.length&&Tu!==l?Pu[Bu]=Tu:Pu=Pu[Bu]?Pu[Bu]:Pu[Bu]={}}var t=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function v(_u){var Tu=_u.length,Cu=0,Pu=Number.POSITIVE_INFINITY,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu;for(Fu=0;Fu<Tu;++Fu)_u[Fu]>Cu&&(Cu=_u[Fu]),_u[Fu]<Pu&&(Pu=_u[Fu]);for(Bu=1<<Cu,Ru=new(t?Uint32Array:Array)(Bu),Lu=1,Ou=0,Du=2;Lu<=Cu;){for(Fu=0;Fu<Tu;++Fu)if(_u[Fu]===Lu){for($u=0,ku=Ou,Nu=0;Nu<Lu;++Nu)$u=$u<<1|ku&1,ku>>=1;for(Vu=Lu<<16|Fu,Nu=$u;Nu<Bu;Nu+=Du)Ru[Nu]=Vu;++Ou}++Lu,Ou<<=1,Du<<=1}return[Ru,Cu,Pu]}function w(_u,Tu){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t?new Uint8Array(_u):_u,this.m=!1,this.i=y,this.r=!1,(Tu||!(Tu={}))&&(Tu.index&&(this.a=Tu.index),Tu.bufferSize&&(this.h=Tu.bufferSize),Tu.bufferType&&(this.i=Tu.bufferType),Tu.resize&&(this.r=Tu.resize)),this.i){case A:this.b=32768,this.c=new(t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0,this.c=new(t?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A=0,y=1,B={t:A,s:y};w.prototype.k=function(){for(;!this.m;){var _u=C(this,3);switch(_u&1&&(this.m=!0),_u>>>=1,_u){case 0:var Tu=this.input,Cu=this.a,Pu=this.c,Bu=this.b,Ru=Tu.length,Lu=l,Ou=l,Du=Pu.length,$u=l;if(this.d=this.f=0,Cu+1>=Ru)throw Error("invalid uncompressed block header: LEN");if(Lu=Tu[Cu++]|Tu[Cu++]<<8,Cu+1>=Ru)throw Error("invalid uncompressed block header: NLEN");if(Ou=Tu[Cu++]|Tu[Cu++]<<8,Lu===~Ou)throw Error("invalid uncompressed block header: length verify");if(Cu+Lu>Tu.length)throw Error("input buffer is broken");switch(this.i){case A:for(;Bu+Lu>Pu.length;){if($u=Du-Bu,Lu-=$u,t)Pu.set(Tu.subarray(Cu,Cu+$u),Bu),Bu+=$u,Cu+=$u;else for(;$u--;)Pu[Bu++]=Tu[Cu++];this.b=Bu,Pu=this.e(),Bu=this.b}break;case y:for(;Bu+Lu>Pu.length;)Pu=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t)Pu.set(Tu.subarray(Cu,Cu+Lu),Bu),Bu+=Lu,Cu+=Lu;else for(;Lu--;)Pu[Bu++]=Tu[Cu++];this.a=Cu,this.b=Bu,this.c=Pu;break;case 1:this.j(ba,ca);break;case 2:for(var ku=C(this,5)+257,Fu=C(this,5)+1,Nu=C(this,4)+4,Vu=new(t?Uint8Array:Array)(D.length),Gu=l,Hu=l,ju=l,Uu=l,zu=l,Wu=l,Qu=l,Yu=l,qu=l,Yu=0;Yu<Nu;++Yu)Vu[D[Yu]]=C(this,3);if(!t)for(Yu=Nu,Nu=Vu.length;Yu<Nu;++Yu)Vu[D[Yu]]=0;for(Gu=v(Vu),Uu=new(t?Uint8Array:Array)(ku+Fu),Yu=0,qu=ku+Fu;Yu<qu;)switch(zu=E(this,Gu),zu){case 16:for(Qu=3+C(this,2);Qu--;)Uu[Yu++]=Wu;break;case 17:for(Qu=3+C(this,3);Qu--;)Uu[Yu++]=0;Wu=0;break;case 18:for(Qu=11+C(this,7);Qu--;)Uu[Yu++]=0;Wu=0;break;default:Wu=Uu[Yu++]=zu}Hu=v(t?Uu.subarray(0,ku):Uu.slice(0,ku)),ju=v(t?Uu.subarray(ku):Uu.slice(ku)),this.j(Hu,ju);break;default:throw Error("unknown BTYPE: "+_u)}}return this.n()};var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=t?new Uint8Array(ea):ea,O=new(t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new(t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(_u,Tu){for(var Cu=_u.f,Pu=_u.d,Bu=_u.input,Ru=_u.a,Lu=Bu.length,Ou;Pu<Tu;){if(Ru>=Lu)throw Error("input buffer is broken");Cu|=Bu[Ru++]<<Pu,Pu+=8}return Ou=Cu&(1<<Tu)-1,_u.f=Cu>>>Tu,_u.d=Pu-Tu,_u.a=Ru,Ou}function E(_u,Tu){for(var Cu=_u.f,Pu=_u.d,Bu=_u.input,Ru=_u.a,Lu=Bu.length,Ou=Tu[0],Du=Tu[1],$u,ku;Pu<Du&&!(Ru>=Lu);)Cu|=Bu[Ru++]<<Pu,Pu+=8;if($u=Ou[Cu&(1<<Du)-1],ku=$u>>>16,ku>Pu)throw Error("invalid code length: "+ku);return _u.f=Cu>>ku,_u.d=Pu-ku,_u.a=Ru,$u&65535}w.prototype.j=function(_u,Tu){var Cu=this.c,Pu=this.b;this.o=_u;for(var Bu=Cu.length-258,Ru,Lu,Ou,Du;(Ru=E(this,_u))!==256;)if(256>Ru)Pu>=Bu&&(this.b=Pu,Cu=this.e(),Pu=this.b),Cu[Pu++]=Ru;else for(Lu=Ru-257,Du=I[Lu],0<K[Lu]&&(Du+=C(this,K[Lu])),Ru=E(this,Tu),Ou=da[Ru],0<N[Ru]&&(Ou+=C(this,N[Ru])),Pu>=Bu&&(this.b=Pu,Cu=this.e(),Pu=this.b);Du--;)Cu[Pu]=Cu[Pu++-Ou];for(;8<=this.d;)this.d-=8,this.a--;this.b=Pu};w.prototype.w=function(_u,Tu){var Cu=this.c,Pu=this.b;this.o=_u;for(var Bu=Cu.length,Ru,Lu,Ou,Du;(Ru=E(this,_u))!==256;)if(256>Ru)Pu>=Bu&&(Cu=this.e(),Bu=Cu.length),Cu[Pu++]=Ru;else for(Lu=Ru-257,Du=I[Lu],0<K[Lu]&&(Du+=C(this,K[Lu])),Ru=E(this,Tu),Ou=da[Ru],0<N[Ru]&&(Ou+=C(this,N[Ru])),Pu+Du>Bu&&(Cu=this.e(),Bu=Cu.length);Du--;)Cu[Pu]=Cu[Pu++-Ou];for(;8<=this.d;)this.d-=8,this.a--;this.b=Pu};w.prototype.e=function(){var _u=new(t?Uint8Array:Array)(this.b-32768),Tu=this.b-32768,Cu,Pu,Bu=this.c;if(t)_u.set(Bu.subarray(32768,_u.length));else for(Cu=0,Pu=_u.length;Cu<Pu;++Cu)_u[Cu]=Bu[Cu+32768];if(this.g.push(_u),this.l+=_u.length,t)Bu.set(Bu.subarray(Tu,Tu+32768));else for(Cu=0;32768>Cu;++Cu)Bu[Cu]=Bu[Tu+Cu];return this.b=32768,Bu};w.prototype.z=function(_u){var Tu,Cu=this.input.length/this.a+1|0,Pu,Bu,Ru,Lu=this.input,Ou=this.c;return _u&&(typeof _u.p=="number"&&(Cu=_u.p),typeof _u.u=="number"&&(Cu+=_u.u)),2>Cu?(Pu=(Lu.length-this.a)/this.o[2],Ru=258*(Pu/2)|0,Bu=Ru<Ou.length?Ou.length+Ru:Ou.length<<1):Bu=Ou.length*Cu,t?(Tu=new Uint8Array(Bu),Tu.set(Ou)):Tu=Ou,this.c=Tu};w.prototype.n=function(){var _u=0,Tu=this.c,Cu=this.g,Pu,Bu=new(t?Uint8Array:Array)(this.l+(this.b-32768)),Ru,Lu,Ou,Du;if(Cu.length===0)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Ru=0,Lu=Cu.length;Ru<Lu;++Ru)for(Pu=Cu[Ru],Ou=0,Du=Pu.length;Ou<Du;++Ou)Bu[_u++]=Pu[Ou];for(Ru=32768,Lu=this.b;Ru<Lu;++Ru)Bu[_u++]=Tu[Ru];return this.g=[],this.buffer=Bu};w.prototype.v=function(){var _u,Tu=this.b;return t?this.r?(_u=new Uint8Array(Tu),_u.set(this.c.subarray(0,Tu))):_u=this.c.subarray(0,Tu):(this.c.length>Tu&&(this.c.length=Tu),_u=this.c),this.buffer=_u};function W(_u,Tu){var Cu,Pu;switch(this.input=_u,this.a=0,(Tu||!(Tu={}))&&(Tu.index&&(this.a=Tu.index),Tu.verify&&(this.A=Tu.verify)),Cu=_u[this.a++],Pu=_u[this.a++],Cu&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((Cu<<8)+Pu)%31!==0)throw Error("invalid fcheck flag:"+((Cu<<8)+Pu)%31);if(Pu&32)throw Error("fdict flag is not supported");this.q=new w(_u,{index:this.a,bufferSize:Tu.bufferSize,bufferType:Tu.bufferType,resize:Tu.resize})}W.prototype.k=function(){var _u=this.input,Tu,Cu;if(Tu=this.q.k(),this.a=this.q.a,this.A){Cu=(_u[this.a++]<<24|_u[this.a++]<<16|_u[this.a++]<<8|_u[this.a++])>>>0;var Pu=Tu;if(typeof Pu=="string"){var Bu=Pu.split(""),Ru,Lu;for(Ru=0,Lu=Bu.length;Ru<Lu;Ru++)Bu[Ru]=(Bu[Ru].charCodeAt(0)&255)>>>0;Pu=Bu}for(var Ou=1,Du=0,$u=Pu.length,ku,Fu=0;0<$u;){ku=1024<$u?1024:$u,$u-=ku;do Ou+=Pu[Fu++],Du+=Ou;while(--ku);Ou%=65521,Du%=65521}if(Cu!==(Du<<16|Ou)>>>0)throw Error("invalid adler-32 checksum")}return Tu};var ha=8;r("Zlib.Inflate",W);r("Zlib.Inflate.prototype.decompress",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$$1,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$$1=0,X)Y[$$1++]=Z;$$1=0;for(ia=Y.length;$$1<ia;++$$1)Z=Y[$$1],r("Zlib.Inflate.BufferType."+Z,X[Z]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(_u,Tu,Cu){var Pu=Cu.length-_u-1;if(Tu>=Cu[Pu])return Pu-1;if(Tu<=Cu[_u])return _u;for(var Bu=_u,Ru=Pu,Lu=Math.floor((Bu+Ru)/2);Tu<Cu[Lu]||Tu>=Cu[Lu+1];)Tu<Cu[Lu]?Ru=Lu:Bu=Lu,Lu=Math.floor((Bu+Ru)/2);return Lu},calcBasisFunctions:function(_u,Tu,Cu,Pu){var Bu=[],Ru=[],Lu=[];Bu[0]=1;for(var Ou=1;Ou<=Cu;++Ou){Ru[Ou]=Tu-Pu[_u+1-Ou],Lu[Ou]=Pu[_u+Ou]-Tu;for(var Du=0,$u=0;$u<Ou;++$u){var ku=Lu[$u+1],Fu=Ru[Ou-$u],Nu=Bu[$u]/(ku+Fu);Bu[$u]=Du+ku*Nu,Du=Fu*Nu}Bu[Ou]=Du}return Bu},calcBSplinePoint:function(_u,Tu,Cu,Pu){for(var Bu=this.findSpan(_u,Pu,Tu),Ru=this.calcBasisFunctions(Bu,Pu,_u,Tu),Lu=new Vector4(0,0,0,0),Ou=0;Ou<=_u;++Ou){var Du=Cu[Bu-_u+Ou],$u=Ru[Ou],ku=Du.w*$u;Lu.x+=Du.x*ku,Lu.y+=Du.y*ku,Lu.z+=Du.z*ku,Lu.w+=Du.w*$u}return Lu},calcBasisFunctionDerivatives:function(_u,Tu,Cu,Pu,Bu){for(var Ru=[],Lu=0;Lu<=Cu;++Lu)Ru[Lu]=0;for(var Ou=[],Lu=0;Lu<=Pu;++Lu)Ou[Lu]=Ru.slice(0);for(var Du=[],Lu=0;Lu<=Cu;++Lu)Du[Lu]=Ru.slice(0);Du[0][0]=1;for(var $u=Ru.slice(0),ku=Ru.slice(0),Fu=1;Fu<=Cu;++Fu){$u[Fu]=Tu-Bu[_u+1-Fu],ku[Fu]=Bu[_u+Fu]-Tu;for(var Nu=0,_d=0;_d<Fu;++_d){var Vu=ku[_d+1],Gu=$u[Fu-_d];Du[Fu][_d]=Vu+Gu;var Hu=Du[_d][Fu-1]/Du[Fu][_d];Du[_d][Fu]=Nu+Vu*Hu,Nu=Gu*Hu}Du[Fu][Fu]=Nu}for(var Fu=0;Fu<=Cu;++Fu)Ou[0][Fu]=Du[Fu][Cu];for(var _d=0;_d<=Cu;++_d){for(var ju=0,Uu=1,zu=[],Lu=0;Lu<=Cu;++Lu)zu[Lu]=Ru.slice(0);zu[0][0]=1;for(var Wu=1;Wu<=Pu;++Wu){var Qu=0,qu=_d-Wu,Yu=Cu-Wu;_d>=Wu&&(zu[Uu][0]=zu[ju][0]/Du[Yu+1][qu],Qu=zu[Uu][0]*Du[qu][Yu]);for(var Xc=qu>=-1?1:-qu,_h=_d-1<=Yu?Wu-1:Cu-_d,Fu=Xc;Fu<=_h;++Fu)zu[Uu][Fu]=(zu[ju][Fu]-zu[ju][Fu-1])/Du[Yu+1][qu+Fu],Qu+=zu[Uu][Fu]*Du[qu+Fu][Yu];_d<=Yu&&(zu[Uu][Wu]=-zu[ju][Wu-1]/Du[Yu+1][_d],Qu+=zu[Uu][Wu]*Du[_d][Yu]),Ou[Wu][_d]=Qu;var Fu=ju;ju=Uu,Uu=Fu}}for(var _d=Cu,Wu=1;Wu<=Pu;++Wu){for(var Fu=0;Fu<=Cu;++Fu)Ou[Wu][Fu]*=_d;_d*=Cu-Wu}return Ou},calcBSplineDerivatives:function(_u,Tu,Cu,Pu,Bu){for(var Ru=Bu<_u?Bu:_u,Lu=[],Ou=this.findSpan(_u,Pu,Tu),Du=this.calcBasisFunctionDerivatives(Ou,Pu,_u,Ru,Tu),$u=[],ku=0;ku<Cu.length;++ku){var Fu=Cu[ku].clone(),Nu=Fu.w;Fu.x*=Nu,Fu.y*=Nu,Fu.z*=Nu,$u[ku]=Fu}for(var Vu=0;Vu<=Ru;++Vu){for(var Fu=$u[Ou-_u].clone().multiplyScalar(Du[Vu][0]),Gu=1;Gu<=_u;++Gu)Fu.add($u[Ou-_u+Gu].clone().multiplyScalar(Du[Vu][Gu]));Lu[Vu]=Fu}for(var Vu=Ru+1;Vu<=Bu+1;++Vu)Lu[Vu]=new Vector4(0,0,0);return Lu},calcKoverI:function(_u,Tu){for(var Cu=1,Pu=2;Pu<=_u;++Pu)Cu*=Pu;for(var Bu=1,Pu=2;Pu<=Tu;++Pu)Bu*=Pu;for(var Pu=2;Pu<=_u-Tu;++Pu)Bu*=Pu;return Cu/Bu},calcRationalCurveDerivatives:function(_u){for(var Tu=_u.length,Cu=[],Pu=[],Bu=0;Bu<Tu;++Bu){var Ru=_u[Bu];Cu[Bu]=new Vector3(Ru.x,Ru.y,Ru.z),Pu[Bu]=Ru.w}for(var Lu=[],Ou=0;Ou<Tu;++Ou){for(var Du=Cu[Ou].clone(),Bu=1;Bu<=Ou;++Bu)Du.sub(Lu[Ou-Bu].clone().multiplyScalar(this.calcKoverI(Ou,Bu)*Pu[Bu]));Lu[Ou]=Du.divideScalar(Pu[0])}return Lu},calcNURBSDerivatives:function(_u,Tu,Cu,Pu,Bu){var Ru=this.calcBSplineDerivatives(_u,Tu,Cu,Pu,Bu);return this.calcRationalCurveDerivatives(Ru)},calcSurfacePoint:function(_u,Tu,Cu,Pu,Bu,Ru,Lu,Ou){for(var Du=this.findSpan(_u,Ru,Cu),$u=this.findSpan(Tu,Lu,Pu),ku=this.calcBasisFunctions(Du,Ru,_u,Cu),Fu=this.calcBasisFunctions($u,Lu,Tu,Pu),Nu=[],Vu=0;Vu<=Tu;++Vu){Nu[Vu]=new Vector4(0,0,0,0);for(var Gu=0;Gu<=_u;++Gu){var Hu=Bu[Du-_u+Gu][$u-Tu+Vu].clone(),ju=Hu.w;Hu.x*=ju,Hu.y*=ju,Hu.z*=ju,Nu[Vu].add(Hu.multiplyScalar(ku[Gu]))}}for(var Uu=new Vector4(0,0,0,0),Vu=0;Vu<=Tu;++Vu)Uu.add(Nu[Vu].multiplyScalar(Fu[Vu]));Uu.divideScalar(Uu.w),Ou.set(Uu.x,Uu.y,Uu.z)}},NURBSCurve=function(_u,Tu,Cu,Pu,Bu){Curve.call(this),this.degree=_u,this.knots=Tu,this.controlPoints=[],this.startKnot=Pu||0,this.endKnot=Bu||this.knots.length-1;for(var Ru=0;Ru<Cu.length;++Ru){var Lu=Cu[Ru];this.controlPoints[Ru]=new Vector4(Lu.x,Lu.y,Lu.z,Lu.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(_u,Tu){var Cu=Tu||new Vector3,Pu=this.knots[this.startKnot]+_u*(this.knots[this.endKnot]-this.knots[this.startKnot]),Bu=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Pu);return Bu.w!=1&&Bu.divideScalar(Bu.w),Cu.set(Bu.x,Bu.y,Bu.z)};NURBSCurve.prototype.getTangent=function(_u,Tu){var Cu=Tu||new Vector3,Pu=this.knots[0]+_u*(this.knots[this.knots.length-1]-this.knots[0]),Bu=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Pu,1);return Cu.copy(Bu[1]).normalize(),Cu};(function(){var _u,Tu,Cu;function Pu(Ku){Loader.call(this,Ku)}Pu.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Pu,load:function(Ku,Xu,Ju,Zu){var _c=this,_f=_c.path===""?LoaderUtils.extractUrlBase(Ku):_c.path,ep=new FileLoader(this.manager);ep.setPath(_c.path),ep.setResponseType("arraybuffer"),ep.load(Ku,function(tp){try{Xu(_c.parse(tp,_f))}catch(op){Zu?Zu(op):console.error(op),_c.manager.itemError(Ku)}},Ju,Zu)},parse:function(Ku,Xu){if(Fu(Ku))_u=new Du().parse(Ku);else{var Ju=Yu(Ku);if(!Nu(Ju))throw new Error("THREE.FBXLoader: Unknown format.");if(Vu(Ju)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Vu(Ju));_u=new Ou().parse(Ju)}var Zu=new TextureLoader(this.manager).setPath(this.resourcePath||Xu).setCrossOrigin(this.crossOrigin);return new Bu(Zu,this.manager).parse(_u)}});function Bu(Ku,Xu){this.textureLoader=Ku,this.manager=Xu}Bu.prototype={constructor:Bu,parse:function(){Tu=this.parseConnections();var Ku=this.parseImages(),Xu=this.parseTextures(Ku),Ju=this.parseMaterials(Xu),Zu=this.parseDeformers(),_c=new Ru().parse(Zu);return this.parseScene(Zu,_c,Ju),Cu},parseConnections:function(){var Ku=new Map;if("Connections"in _u){var Xu=_u.Connections.connections;Xu.forEach(function(Ju){var Zu=Ju[0],_c=Ju[1],_f=Ju[2];Ku.has(Zu)||Ku.set(Zu,{parents:[],children:[]});var ep={ID:_c,relationship:_f};Ku.get(Zu).parents.push(ep),Ku.has(_c)||Ku.set(_c,{parents:[],children:[]});var tp={ID:Zu,relationship:_f};Ku.get(_c).children.push(tp)})}return Ku},parseImages:function(){var Ku={},Xu={};if("Video"in _u.Objects){var Ju=_u.Objects.Video;for(var Zu in Ju){var _c=Ju[Zu],_f=parseInt(Zu);if(Ku[_f]=_c.RelativeFilename||_c.Filename,"Content"in _c){var ep=_c.Content instanceof ArrayBuffer&&_c.Content.byteLength>0,tp=typeof _c.Content=="string"&&_c.Content!=="";if(ep||tp){var op=this.parseImage(Ju[Zu]);Xu[_c.RelativeFilename||_c.Filename]=op}}}}for(var _f in Ku){var hp=Ku[_f];Xu[hp]!==void 0?Ku[_f]=Xu[hp]:Ku[_f]=Ku[_f].split("\\").pop()}return Ku},parseImage:function(Ku){var Xu=Ku.Content,Ju=Ku.RelativeFilename||Ku.Filename,Zu=Ju.slice(Ju.lastIndexOf(".")+1).toLowerCase(),_c;switch(Zu){case"bmp":_c="image/bmp";break;case"jpg":case"jpeg":_c="image/jpeg";break;case"png":_c="image/png";break;case"tif":_c="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",Ju),_c="image/tga";break;default:console.warn('FBXLoader: Image type "'+Zu+'" is not supported.');return}if(typeof Xu=="string")return"data:"+_c+";base64,"+Xu;var _f=new Uint8Array(Xu);return window.URL.createObjectURL(new Blob([_f],{type:_c}))},parseTextures:function(Ku){var Xu=new Map;if("Texture"in _u.Objects){var Ju=_u.Objects.Texture;for(var Zu in Ju){var _c=this.parseTexture(Ju[Zu],Ku);Xu.set(parseInt(Zu),_c)}}return Xu},parseTexture:function(Ku,Xu){var Ju=this.loadTexture(Ku,Xu);Ju.ID=Ku.id,Ju.name=Ku.attrName;var Zu=Ku.WrapModeU,_c=Ku.WrapModeV,_f=Zu!==void 0?Zu.value:0,ep=_c!==void 0?_c.value:0;if(Ju.wrapS=_f===0?RepeatWrapping:ClampToEdgeWrapping,Ju.wrapT=ep===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in Ku){var tp=Ku.Scaling.value;Ju.repeat.x=tp[0],Ju.repeat.y=tp[1]}return Ju},loadTexture:function(Ku,Xu){var Ju,Zu=this.textureLoader.path,_c=Tu.get(Ku.id).children;_c!==void 0&&_c.length>0&&Xu[_c[0].ID]!==void 0&&(Ju=Xu[_c[0].ID],(Ju.indexOf("blob:")===0||Ju.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var _f,ep=Ku.FileName.slice(-3).toLowerCase();if(ep==="tga"){var tp=this.manager.getHandler(".tga");tp===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",Ku.RelativeFilename),_f=new Texture):_f=tp.load(Ju)}else ep==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",Ku.RelativeFilename),_f=new Texture):_f=this.textureLoader.load(Ju);return this.textureLoader.setPath(Zu),_f},parseMaterials:function(Ku){var Xu=new Map;if("Material"in _u.Objects){var Ju=_u.Objects.Material;for(var Zu in Ju){var _c=this.parseMaterial(Ju[Zu],Ku);_c!==null&&Xu.set(parseInt(Zu),_c)}}return Xu},parseMaterial:function(Ku,Xu){var Ju=Ku.id,Zu=Ku.attrName,_c=Ku.ShadingModel;if(typeof _c=="object"&&(_c=_c.value),!Tu.has(Ju))return null;var _f=this.parseParameters(Ku,Xu,Ju),ep;switch(_c.toLowerCase()){case"phong":ep=new MeshPhongMaterial;break;case"lambert":ep=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',_c),ep=new MeshPhongMaterial;break}return ep.setValues(_f),ep.name=Zu,ep},parseParameters:function(Ku,Xu,Ju){var Zu={};Ku.BumpFactor&&(Zu.bumpScale=Ku.BumpFactor.value),Ku.Diffuse?Zu.color=new Color().fromArray(Ku.Diffuse.value):Ku.DiffuseColor&&Ku.DiffuseColor.type==="Color"&&(Zu.color=new Color().fromArray(Ku.DiffuseColor.value)),Ku.DisplacementFactor&&(Zu.displacementScale=Ku.DisplacementFactor.value),Ku.Emissive?Zu.emissive=new Color().fromArray(Ku.Emissive.value):Ku.EmissiveColor&&Ku.EmissiveColor.type==="Color"&&(Zu.emissive=new Color().fromArray(Ku.EmissiveColor.value)),Ku.EmissiveFactor&&(Zu.emissiveIntensity=parseFloat(Ku.EmissiveFactor.value)),Ku.Opacity&&(Zu.opacity=parseFloat(Ku.Opacity.value)),Zu.opacity<1&&(Zu.transparent=!0),Ku.ReflectionFactor&&(Zu.reflectivity=Ku.ReflectionFactor.value),Ku.Shininess&&(Zu.shininess=Ku.Shininess.value),Ku.Specular?Zu.specular=new Color().fromArray(Ku.Specular.value):Ku.SpecularColor&&Ku.SpecularColor.type==="Color"&&(Zu.specular=new Color().fromArray(Ku.SpecularColor.value));var _c=this;return Tu.get(Ju).children.forEach(function(_f){var ep=_f.relationship;switch(ep){case"Bump":Zu.bumpMap=_c.getTexture(Xu,_f.ID);break;case"Maya|TEX_ao_map":Zu.aoMap=_c.getTexture(Xu,_f.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":Zu.map=_c.getTexture(Xu,_f.ID),Zu.map.encoding=sRGBEncoding;break;case"DisplacementColor":Zu.displacementMap=_c.getTexture(Xu,_f.ID);break;case"EmissiveColor":Zu.emissiveMap=_c.getTexture(Xu,_f.ID),Zu.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":Zu.normalMap=_c.getTexture(Xu,_f.ID);break;case"ReflectionColor":Zu.envMap=_c.getTexture(Xu,_f.ID),Zu.envMap.mapping=EquirectangularReflectionMapping,Zu.envMap.encoding=sRGBEncoding;break;case"SpecularColor":Zu.specularMap=_c.getTexture(Xu,_f.ID),Zu.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":Zu.alphaMap=_c.getTexture(Xu,_f.ID),Zu.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",ep);break}}),Zu},getTexture:function(Ku,Xu){return"LayeredTexture"in _u.Objects&&Xu in _u.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),Xu=Tu.get(Xu).children[0].ID),Ku.get(Xu)},parseDeformers:function(){var Ku={},Xu={};if("Deformer"in _u.Objects){var Ju=_u.Objects.Deformer;for(var Zu in Ju){var _c=Ju[Zu],_f=Tu.get(parseInt(Zu));if(_c.attrType==="Skin"){var ep=this.parseSkeleton(_f,Ju);ep.ID=Zu,_f.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),ep.geometryID=_f.parents[0].ID,Ku[Zu]=ep}else if(_c.attrType==="BlendShape"){var tp={id:Zu};tp.rawTargets=this.parseMorphTargets(_f,Ju),tp.id=Zu,_f.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),Xu[Zu]=tp}}}return{skeletons:Ku,morphTargets:Xu}},parseSkeleton:function(Ku,Xu){var Ju=[];return Ku.children.forEach(function(Zu){var _c=Xu[Zu.ID];if(_c.attrType==="Cluster"){var _f={ID:Zu.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(_c.TransformLink.a)};"Indexes"in _c&&(_f.indices=_c.Indexes.a,_f.weights=_c.Weights.a),Ju.push(_f)}}),{rawBones:Ju,bones:[]}},parseMorphTargets:function(Ku,Xu){for(var Ju=[],Zu=0;Zu<Ku.children.length;Zu++){var _c=Ku.children[Zu],_f=Xu[_c.ID],ep={name:_f.attrName,initialWeight:_f.DeformPercent,id:_f.id,fullWeights:_f.FullWeights.a};if(_f.attrType!=="BlendShapeChannel")return;ep.geoID=Tu.get(parseInt(_c.ID)).children.filter(function(tp){return tp.relationship===void 0})[0].ID,Ju.push(ep)}return Ju},parseScene:function(Ku,Xu,Ju){Cu=new Group$1;var Zu=this.parseModels(Ku.skeletons,Xu,Ju),_c=_u.Objects.Model,_f=this;Zu.forEach(function(tp){var op=_c[tp.ID];_f.setLookAtProperties(tp,op);var hp=Tu.get(tp.ID).parents;hp.forEach(function(cp){var Sp=Zu.get(cp.ID);Sp!==void 0&&Sp.add(tp)}),tp.parent===null&&Cu.add(tp)}),this.bindSkeleton(Ku.skeletons,Xu,Zu),this.createAmbientLight(),this.setupMorphMaterials(),Cu.traverse(function(tp){if(tp.userData.transformData){tp.parent&&(tp.userData.transformData.parentMatrixWorld=tp.parent.matrix);var op=Wu(tp.userData.transformData);tp.applyMatrix4(op)}});var ep=new Lu().parse();Cu.children.length===1&&Cu.children[0].isGroup&&(Cu.children[0].animations=ep,Cu=Cu.children[0]),Cu.animations=ep},parseModels:function(Ku,Xu,Ju){var Zu=new Map,_c=_u.Objects.Model;for(var _f in _c){var ep=parseInt(_f),tp=_c[_f],op=Tu.get(ep),hp=this.buildSkeleton(op,Ku,ep,tp.attrName);if(!hp){switch(tp.attrType){case"Camera":hp=this.createCamera(op);break;case"Light":hp=this.createLight(op);break;case"Mesh":hp=this.createMesh(op,Xu,Ju);break;case"NurbsCurve":hp=this.createCurve(op,Xu);break;case"LimbNode":case"Root":hp=new Bone;break;case"Null":default:hp=new Group$1;break}hp.name=tp.attrName?PropertyBinding.sanitizeNodeName(tp.attrName):"",hp.ID=ep}this.getTransformData(hp,tp),Zu.set(ep,hp)}return Zu},buildSkeleton:function(Ku,Xu,Ju,Zu){var _c=null;return Ku.parents.forEach(function(_f){for(var ep in Xu){var tp=Xu[ep];tp.rawBones.forEach(function(op,hp){if(op.ID===_f.ID){var cp=_c;_c=new Bone,_c.matrixWorld.copy(op.transformLink),_c.name=Zu?PropertyBinding.sanitizeNodeName(Zu):"",_c.ID=Ju,tp.bones[hp]=_c,cp!==null&&_c.add(cp)}})}}),_c},createCamera:function(Ku){var Xu,Ju;if(Ku.children.forEach(function(Sp){var yp=_u.Objects.NodeAttribute[Sp.ID];yp!==void 0&&(Ju=yp)}),Ju===void 0)Xu=new Object3D;else{var Zu=0;Ju.CameraProjectionType!==void 0&&Ju.CameraProjectionType.value===1&&(Zu=1);var _c=1;Ju.NearPlane!==void 0&&(_c=Ju.NearPlane.value/1e3);var _f=1e3;Ju.FarPlane!==void 0&&(_f=Ju.FarPlane.value/1e3);var ep=window.innerWidth,tp=window.innerHeight;Ju.AspectWidth!==void 0&&Ju.AspectHeight!==void 0&&(ep=Ju.AspectWidth.value,tp=Ju.AspectHeight.value);var op=ep/tp,hp=45;Ju.FieldOfView!==void 0&&(hp=Ju.FieldOfView.value);var cp=Ju.FocalLength?Ju.FocalLength.value:null;switch(Zu){case 0:Xu=new PerspectiveCamera(hp,op,_c,_f),cp!==null&&Xu.setFocalLength(cp);break;case 1:Xu=new OrthographicCamera(-ep/2,ep/2,tp/2,-tp/2,_c,_f);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+Zu+"."),Xu=new Object3D;break}}return Xu},createLight:function(Ku){var Xu,Ju;if(Ku.children.forEach(function(cp){var Sp=_u.Objects.NodeAttribute[cp.ID];Sp!==void 0&&(Ju=Sp)}),Ju===void 0)Xu=new Object3D;else{var Zu;Ju.LightType===void 0?Zu=0:Zu=Ju.LightType.value;var _c=16777215;Ju.Color!==void 0&&(_c=new Color().fromArray(Ju.Color.value));var _f=Ju.Intensity===void 0?1:Ju.Intensity.value/100;Ju.CastLightOnObject!==void 0&&Ju.CastLightOnObject.value===0&&(_f=0);var ep=0;Ju.FarAttenuationEnd!==void 0&&(Ju.EnableFarAttenuation!==void 0&&Ju.EnableFarAttenuation.value===0?ep=0:ep=Ju.FarAttenuationEnd.value);var tp=1;switch(Zu){case 0:Xu=new PointLight(_c,_f,ep,tp);break;case 1:Xu=new DirectionalLight(_c,_f);break;case 2:var op=Math.PI/3;Ju.InnerAngle!==void 0&&(op=MathUtils.degToRad(Ju.InnerAngle.value));var hp=0;Ju.OuterAngle!==void 0&&(hp=MathUtils.degToRad(Ju.OuterAngle.value),hp=Math.max(hp,1)),Xu=new SpotLight(_c,_f,ep,op,hp,tp);break;default:console.warn("THREE.FBXLoader: Unknown light type "+Ju.LightType.value+", defaulting to a PointLight."),Xu=new PointLight(_c,_f);break}Ju.CastShadows!==void 0&&Ju.CastShadows.value===1&&(Xu.castShadow=!0)}return Xu},createMesh:function(Ku,Xu,Ju){var Zu,_c=null,_f=null,ep=[];return Ku.children.forEach(function(tp){Xu.has(tp.ID)&&(_c=Xu.get(tp.ID)),Ju.has(tp.ID)&&ep.push(Ju.get(tp.ID))}),ep.length>1?_f=ep:ep.length>0?_f=ep[0]:(_f=new MeshPhongMaterial({color:13421772}),ep.push(_f)),"color"in _c.attributes&&ep.forEach(function(tp){tp.vertexColors=!0}),_c.FBX_Deformer?(ep.forEach(function(tp){tp.skinning=!0}),Zu=new SkinnedMesh(_c,_f),Zu.normalizeSkinWeights()):Zu=new Mesh(_c,_f),Zu},createCurve:function(Ku,Xu){var Ju=Ku.children.reduce(function(_c,_f){return Xu.has(_f.ID)&&(_c=Xu.get(_f.ID)),_c},null),Zu=new LineBasicMaterial({color:3342591,linewidth:1});return new Line$1(Ju,Zu)},getTransformData:function(Ku,Xu){var Ju={};"InheritType"in Xu&&(Ju.inheritType=parseInt(Xu.InheritType.value)),"RotationOrder"in Xu?Ju.eulerOrder=Qu(Xu.RotationOrder.value):Ju.eulerOrder="ZYX","Lcl_Translation"in Xu&&(Ju.translation=Xu.Lcl_Translation.value),"PreRotation"in Xu&&(Ju.preRotation=Xu.PreRotation.value),"Lcl_Rotation"in Xu&&(Ju.rotation=Xu.Lcl_Rotation.value),"PostRotation"in Xu&&(Ju.postRotation=Xu.PostRotation.value),"Lcl_Scaling"in Xu&&(Ju.scale=Xu.Lcl_Scaling.value),"ScalingOffset"in Xu&&(Ju.scalingOffset=Xu.ScalingOffset.value),"ScalingPivot"in Xu&&(Ju.scalingPivot=Xu.ScalingPivot.value),"RotationOffset"in Xu&&(Ju.rotationOffset=Xu.RotationOffset.value),"RotationPivot"in Xu&&(Ju.rotationPivot=Xu.RotationPivot.value),Ku.userData.transformData=Ju},setLookAtProperties:function(Ku,Xu){if("LookAtProperty"in Xu){var Ju=Tu.get(Ku.ID).children;Ju.forEach(function(Zu){if(Zu.relationship==="LookAtProperty"){var _c=_u.Objects.Model[Zu.ID];if("Lcl_Translation"in _c){var _f=_c.Lcl_Translation.value;Ku.target!==void 0?(Ku.target.position.fromArray(_f),Cu.add(Ku.target)):Ku.lookAt(new Vector3().fromArray(_f))}}})}},bindSkeleton:function(Ku,Xu,Ju){var Zu=this.parsePoseNodes();for(var _c in Ku){var _f=Ku[_c],ep=Tu.get(parseInt(_f.ID)).parents;ep.forEach(function(tp){if(Xu.has(tp.ID)){var op=tp.ID,hp=Tu.get(op);hp.parents.forEach(function(cp){if(Ju.has(cp.ID)){var Sp=Ju.get(cp.ID);Sp.bind(new Skeleton(_f.bones),Zu[cp.ID])}})}})}},parsePoseNodes:function(){var Ku={};if("Pose"in _u.Objects){var Xu=_u.Objects.Pose;for(var Ju in Xu)if(Xu[Ju].attrType==="BindPose"){var Zu=Xu[Ju].PoseNode;Array.isArray(Zu)?Zu.forEach(function(_c){Ku[_c.Node]=new Matrix4().fromArray(_c.Matrix.a)}):Ku[Zu.Node]=new Matrix4().fromArray(Zu.Matrix.a)}}return Ku},createAmbientLight:function(){if("GlobalSettings"in _u&&"AmbientColor"in _u.GlobalSettings){var Ku=_u.GlobalSettings.AmbientColor.value,Xu=Ku[0],Ju=Ku[1],Zu=Ku[2];if(Xu!==0||Ju!==0||Zu!==0){var _c=new Color(Xu,Ju,Zu);Cu.add(new AmbientLight(_c,1))}}},setupMorphMaterials:function(){var Ku=this;Cu.traverse(function(Xu){Xu.isMesh&&Xu.geometry.morphAttributes.position&&Xu.geometry.morphAttributes.position.length&&(Array.isArray(Xu.material)?Xu.material.forEach(function(Ju,Zu){Ku.setupMorphMaterial(Xu,Ju,Zu)}):Ku.setupMorphMaterial(Xu,Xu.material))})},setupMorphMaterial:function(Ku,Xu,Ju){var Zu=Ku.uuid,_c=Xu.uuid,_f=!1;if(Cu.traverse(function(tp){tp.isMesh&&(Array.isArray(tp.material)?tp.material.forEach(function(op){op.uuid===_c&&tp.uuid!==Zu&&(_f=!0)}):tp.material.uuid===_c&&tp.uuid!==Zu&&(_f=!0))}),_f===!0){var ep=Xu.clone();ep.morphTargets=!0,Ju===void 0?Ku.material=ep:Ku.material[Ju]=ep}else Xu.morphTargets=!0}};function Ru(){}Ru.prototype={constructor:Ru,parse:function(Ku){var Xu=new Map;if("Geometry"in _u.Objects){var Ju=_u.Objects.Geometry;for(var Zu in Ju){var _c=Tu.get(parseInt(Zu)),_f=this.parseGeometry(_c,Ju[Zu],Ku);Xu.set(parseInt(Zu),_f)}}return Xu},parseGeometry:function(Ku,Xu,Ju){switch(Xu.attrType){case"Mesh":return this.parseMeshGeometry(Ku,Xu,Ju);case"NurbsCurve":return this.parseNurbsGeometry(Xu)}},parseMeshGeometry:function(Ku,Xu,Ju){var Zu=Ju.skeletons,_c=[],_f=Ku.parents.map(function(cp){return _u.Objects.Model[cp.ID]});if(_f.length!==0){var ep=Ku.children.reduce(function(cp,Sp){return Zu[Sp.ID]!==void 0&&(cp=Zu[Sp.ID]),cp},null);Ku.children.forEach(function(cp){Ju.morphTargets[cp.ID]!==void 0&&_c.push(Ju.morphTargets[cp.ID])});var tp=_f[0],op={};"RotationOrder"in tp&&(op.eulerOrder=Qu(tp.RotationOrder.value)),"InheritType"in tp&&(op.inheritType=parseInt(tp.InheritType.value)),"GeometricTranslation"in tp&&(op.translation=tp.GeometricTranslation.value),"GeometricRotation"in tp&&(op.rotation=tp.GeometricRotation.value),"GeometricScaling"in tp&&(op.scale=tp.GeometricScaling.value);var hp=Wu(op);return this.genGeometry(Xu,ep,_c,hp)}},genGeometry:function(Ku,Xu,Ju,Zu){var _c=new BufferGeometry;Ku.attrName&&(_c.name=Ku.attrName);var _f=this.parseGeoNode(Ku,Xu),ep=this.genBuffers(_f),tp=new Float32BufferAttribute(ep.vertex,3);if(tp.applyMatrix4(Zu),_c.setAttribute("position",tp),ep.colors.length>0&&_c.setAttribute("color",new Float32BufferAttribute(ep.colors,3)),Xu&&(_c.setAttribute("skinIndex",new Uint16BufferAttribute(ep.weightsIndices,4)),_c.setAttribute("skinWeight",new Float32BufferAttribute(ep.vertexWeights,4)),_c.FBX_Deformer=Xu),ep.normal.length>0){var op=new Matrix3().getNormalMatrix(Zu),hp=new Float32BufferAttribute(ep.normal,3);hp.applyNormalMatrix(op),_c.setAttribute("normal",hp)}if(ep.uvs.forEach(function(wp,Pp){var Ep="uv"+(Pp+1).toString();Pp===0&&(Ep="uv"),_c.setAttribute(Ep,new Float32BufferAttribute(ep.uvs[Pp],2))}),_f.material&&_f.material.mappingType!=="AllSame"){var cp=ep.materialIndex[0],Sp=0;if(ep.materialIndex.forEach(function(wp,Pp){wp!==cp&&(_c.addGroup(Sp,Pp-Sp,cp),cp=wp,Sp=Pp)}),_c.groups.length>0){var yp=_c.groups[_c.groups.length-1],Rp=yp.start+yp.count;Rp!==ep.materialIndex.length&&_c.addGroup(Rp,ep.materialIndex.length-Rp,cp)}_c.groups.length===0&&_c.addGroup(0,ep.materialIndex.length,ep.materialIndex[0])}return this.addMorphTargets(_c,Ku,Ju,Zu),_c},parseGeoNode:function(Ku,Xu){var Ju={};if(Ju.vertexPositions=Ku.Vertices!==void 0?Ku.Vertices.a:[],Ju.vertexIndices=Ku.PolygonVertexIndex!==void 0?Ku.PolygonVertexIndex.a:[],Ku.LayerElementColor&&(Ju.color=this.parseVertexColors(Ku.LayerElementColor[0])),Ku.LayerElementMaterial&&(Ju.material=this.parseMaterialIndices(Ku.LayerElementMaterial[0])),Ku.LayerElementNormal&&(Ju.normal=this.parseNormals(Ku.LayerElementNormal[0])),Ku.LayerElementUV){Ju.uv=[];for(var Zu=0;Ku.LayerElementUV[Zu];)Ju.uv.push(this.parseUVs(Ku.LayerElementUV[Zu])),Zu++}return Ju.weightTable={},Xu!==null&&(Ju.skeleton=Xu,Xu.rawBones.forEach(function(_c,_f){_c.indices.forEach(function(ep,tp){Ju.weightTable[ep]===void 0&&(Ju.weightTable[ep]=[]),Ju.weightTable[ep].push({id:_f,weight:_c.weights[tp]})})})),Ju},genBuffers:function(Ku){var Xu={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},Ju=0,Zu=0,_c=!1,_f=[],ep=[],tp=[],op=[],hp=[],cp=[],Sp=this;return Ku.vertexIndices.forEach(function(yp,Rp){var wp=!1;yp<0&&(yp=yp^-1,wp=!0);var Pp=[],Ep=[];if(_f.push(yp*3,yp*3+1,yp*3+2),Ku.color){var ip=ju(Rp,Ju,yp,Ku.color);tp.push(ip[0],ip[1],ip[2])}if(Ku.skeleton){if(Ku.weightTable[yp]!==void 0&&Ku.weightTable[yp].forEach(function(gp){Ep.push(gp.weight),Pp.push(gp.id)}),Ep.length>4){_c||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),_c=!0);var rp=[0,0,0,0],fp=[0,0,0,0];Ep.forEach(function(gp,Ap){var Mp=gp,$p=Pp[Ap];fp.forEach(function(Tp,np,sp){if(Mp>Tp){sp[np]=Mp,Mp=Tp;var Ip=rp[np];rp[np]=$p,$p=Ip}})}),Pp=rp,Ep=fp}for(;Ep.length<4;)Ep.push(0),Pp.push(0);for(var up=0;up<4;++up)hp.push(Ep[up]),cp.push(Pp[up])}if(Ku.normal){var ip=ju(Rp,Ju,yp,Ku.normal);ep.push(ip[0],ip[1],ip[2])}if(Ku.material&&Ku.material.mappingType!=="AllSame")var pp=ju(Rp,Ju,yp,Ku.material)[0];Ku.uv&&Ku.uv.forEach(function(gp,Ap){var Mp=ju(Rp,Ju,yp,gp);op[Ap]===void 0&&(op[Ap]=[]),op[Ap].push(Mp[0]),op[Ap].push(Mp[1])}),Zu++,wp&&(Sp.genFace(Xu,Ku,_f,pp,ep,tp,op,hp,cp,Zu),Ju++,Zu=0,_f=[],ep=[],tp=[],op=[],hp=[],cp=[])}),Xu},genFace:function(Ku,Xu,Ju,Zu,_c,_f,ep,tp,op,hp){for(var cp=2;cp<hp;cp++)Ku.vertex.push(Xu.vertexPositions[Ju[0]]),Ku.vertex.push(Xu.vertexPositions[Ju[1]]),Ku.vertex.push(Xu.vertexPositions[Ju[2]]),Ku.vertex.push(Xu.vertexPositions[Ju[(cp-1)*3]]),Ku.vertex.push(Xu.vertexPositions[Ju[(cp-1)*3+1]]),Ku.vertex.push(Xu.vertexPositions[Ju[(cp-1)*3+2]]),Ku.vertex.push(Xu.vertexPositions[Ju[cp*3]]),Ku.vertex.push(Xu.vertexPositions[Ju[cp*3+1]]),Ku.vertex.push(Xu.vertexPositions[Ju[cp*3+2]]),Xu.skeleton&&(Ku.vertexWeights.push(tp[0]),Ku.vertexWeights.push(tp[1]),Ku.vertexWeights.push(tp[2]),Ku.vertexWeights.push(tp[3]),Ku.vertexWeights.push(tp[(cp-1)*4]),Ku.vertexWeights.push(tp[(cp-1)*4+1]),Ku.vertexWeights.push(tp[(cp-1)*4+2]),Ku.vertexWeights.push(tp[(cp-1)*4+3]),Ku.vertexWeights.push(tp[cp*4]),Ku.vertexWeights.push(tp[cp*4+1]),Ku.vertexWeights.push(tp[cp*4+2]),Ku.vertexWeights.push(tp[cp*4+3]),Ku.weightsIndices.push(op[0]),Ku.weightsIndices.push(op[1]),Ku.weightsIndices.push(op[2]),Ku.weightsIndices.push(op[3]),Ku.weightsIndices.push(op[(cp-1)*4]),Ku.weightsIndices.push(op[(cp-1)*4+1]),Ku.weightsIndices.push(op[(cp-1)*4+2]),Ku.weightsIndices.push(op[(cp-1)*4+3]),Ku.weightsIndices.push(op[cp*4]),Ku.weightsIndices.push(op[cp*4+1]),Ku.weightsIndices.push(op[cp*4+2]),Ku.weightsIndices.push(op[cp*4+3])),Xu.color&&(Ku.colors.push(_f[0]),Ku.colors.push(_f[1]),Ku.colors.push(_f[2]),Ku.colors.push(_f[(cp-1)*3]),Ku.colors.push(_f[(cp-1)*3+1]),Ku.colors.push(_f[(cp-1)*3+2]),Ku.colors.push(_f[cp*3]),Ku.colors.push(_f[cp*3+1]),Ku.colors.push(_f[cp*3+2])),Xu.material&&Xu.material.mappingType!=="AllSame"&&(Ku.materialIndex.push(Zu),Ku.materialIndex.push(Zu),Ku.materialIndex.push(Zu)),Xu.normal&&(Ku.normal.push(_c[0]),Ku.normal.push(_c[1]),Ku.normal.push(_c[2]),Ku.normal.push(_c[(cp-1)*3]),Ku.normal.push(_c[(cp-1)*3+1]),Ku.normal.push(_c[(cp-1)*3+2]),Ku.normal.push(_c[cp*3]),Ku.normal.push(_c[cp*3+1]),Ku.normal.push(_c[cp*3+2])),Xu.uv&&Xu.uv.forEach(function(Sp,yp){Ku.uvs[yp]===void 0&&(Ku.uvs[yp]=[]),Ku.uvs[yp].push(ep[yp][0]),Ku.uvs[yp].push(ep[yp][1]),Ku.uvs[yp].push(ep[yp][(cp-1)*2]),Ku.uvs[yp].push(ep[yp][(cp-1)*2+1]),Ku.uvs[yp].push(ep[yp][cp*2]),Ku.uvs[yp].push(ep[yp][cp*2+1])})},addMorphTargets:function(Ku,Xu,Ju,Zu){if(Ju.length!==0){Ku.morphTargetsRelative=!0,Ku.morphAttributes.position=[];var _c=this;Ju.forEach(function(_f){_f.rawTargets.forEach(function(ep){var tp=_u.Objects.Geometry[ep.geoID];tp!==void 0&&_c.genMorphGeometry(Ku,Xu,tp,Zu,ep.name)})})}},genMorphGeometry:function(Ku,Xu,Ju,Zu,_c){for(var _f=Xu.PolygonVertexIndex!==void 0?Xu.PolygonVertexIndex.a:[],ep=Ju.Vertices!==void 0?Ju.Vertices.a:[],tp=Ju.Indexes!==void 0?Ju.Indexes.a:[],op=Ku.attributes.position.count*3,hp=new Float32Array(op),cp=0;cp<tp.length;cp++){var Sp=tp[cp]*3;hp[Sp]=ep[cp*3],hp[Sp+1]=ep[cp*3+1],hp[Sp+2]=ep[cp*3+2]}var yp={vertexIndices:_f,vertexPositions:hp},Rp=this.genBuffers(yp),wp=new Float32BufferAttribute(Rp.vertex,3);wp.name=_c||Ju.attrName,wp.applyMatrix4(Zu),Ku.morphAttributes.position.push(wp)},parseNormals:function(Ku){var Xu=Ku.MappingInformationType,Ju=Ku.ReferenceInformationType,Zu=Ku.Normals.a,_c=[];return Ju==="IndexToDirect"&&("NormalIndex"in Ku?_c=Ku.NormalIndex.a:"NormalsIndex"in Ku&&(_c=Ku.NormalsIndex.a)),{dataSize:3,buffer:Zu,indices:_c,mappingType:Xu,referenceType:Ju}},parseUVs:function(Ku){var Xu=Ku.MappingInformationType,Ju=Ku.ReferenceInformationType,Zu=Ku.UV.a,_c=[];return Ju==="IndexToDirect"&&(_c=Ku.UVIndex.a),{dataSize:2,buffer:Zu,indices:_c,mappingType:Xu,referenceType:Ju}},parseVertexColors:function(Ku){var Xu=Ku.MappingInformationType,Ju=Ku.ReferenceInformationType,Zu=Ku.Colors.a,_c=[];return Ju==="IndexToDirect"&&(_c=Ku.ColorIndex.a),{dataSize:4,buffer:Zu,indices:_c,mappingType:Xu,referenceType:Ju}},parseMaterialIndices:function(Ku){var Xu=Ku.MappingInformationType,Ju=Ku.ReferenceInformationType;if(Xu==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:Ju};for(var Zu=Ku.Materials.a,_c=[],_f=0;_f<Zu.length;++_f)_c.push(_f);return{dataSize:1,buffer:Zu,indices:_c,mappingType:Xu,referenceType:Ju}},parseNurbsGeometry:function(Ku){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var Xu=parseInt(Ku.Order);if(isNaN(Xu))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",Ku.Order,Ku.id),new BufferGeometry;for(var Ju=Xu-1,Zu=Ku.KnotVector.a,_c=[],_f=Ku.Points.a,ep=0,tp=_f.length;ep<tp;ep+=4)_c.push(new Vector4().fromArray(_f,ep));var op,hp;if(Ku.Form==="Closed")_c.push(_c[0]);else if(Ku.Form==="Periodic"){op=Ju,hp=Zu.length-1-op;for(var ep=0;ep<Ju;++ep)_c.push(_c[ep])}var cp=new NURBSCurve(Ju,Zu,_c,op,hp),Sp=cp.getPoints(_c.length*7),yp=new Float32Array(Sp.length*3);Sp.forEach(function(wp,Pp){wp.toArray(yp,Pp*3)});var Rp=new BufferGeometry;return Rp.setAttribute("position",new BufferAttribute(yp,3)),Rp}};function Lu(){}Lu.prototype={constructor:Lu,parse:function(){var Ku=[],Xu=this.parseClips();if(Xu!==void 0)for(var Ju in Xu){var Zu=Xu[Ju],_c=this.addClip(Zu);Ku.push(_c)}return Ku},parseClips:function(){if(_u.Objects.AnimationCurve!==void 0){var Ku=this.parseAnimationCurveNodes();this.parseAnimationCurves(Ku);var Xu=this.parseAnimationLayers(Ku),Ju=this.parseAnimStacks(Xu);return Ju}},parseAnimationCurveNodes:function(){var Ku=_u.Objects.AnimationCurveNode,Xu=new Map;for(var Ju in Ku){var Zu=Ku[Ju];if(Zu.attrName.match(/S|R|T|DeformPercent/)!==null){var _c={id:Zu.id,attr:Zu.attrName,curves:{}};Xu.set(_c.id,_c)}}return Xu},parseAnimationCurves:function(Ku){var Xu=_u.Objects.AnimationCurve;for(var Ju in Xu){var Zu={id:Xu[Ju].id,times:Xu[Ju].KeyTime.a.map(Gu),values:Xu[Ju].KeyValueFloat.a},_c=Tu.get(Zu.id);if(_c!==void 0){var _f=_c.parents[0].ID,ep=_c.parents[0].relationship;ep.match(/X/)?Ku.get(_f).curves.x=Zu:ep.match(/Y/)?Ku.get(_f).curves.y=Zu:ep.match(/Z/)?Ku.get(_f).curves.z=Zu:ep.match(/d|DeformPercent/)&&Ku.has(_f)&&(Ku.get(_f).curves.morph=Zu)}}},parseAnimationLayers:function(Ku){var Xu=_u.Objects.AnimationLayer,Ju=new Map;for(var Zu in Xu){var _c=[],_f=Tu.get(parseInt(Zu));if(_f!==void 0){var ep=_f.children;ep.forEach(function(tp,op){if(Ku.has(tp.ID)){var hp=Ku.get(tp.ID);if(hp.curves.x!==void 0||hp.curves.y!==void 0||hp.curves.z!==void 0){if(_c[op]===void 0){var cp=Tu.get(tp.ID).parents.filter(function(Ep){return Ep.relationship!==void 0})[0].ID;if(cp!==void 0){var Sp=_u.Objects.Model[cp.toString()];if(Sp===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",tp);return}var yp={modelName:Sp.attrName?PropertyBinding.sanitizeNodeName(Sp.attrName):"",ID:Sp.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Cu.traverse(function(Ep){Ep.ID===Sp.id&&(yp.transform=Ep.matrix,Ep.userData.transformData&&(yp.eulerOrder=Ep.userData.transformData.eulerOrder))}),yp.transform||(yp.transform=new Matrix4),"PreRotation"in Sp&&(yp.preRotation=Sp.PreRotation.value),"PostRotation"in Sp&&(yp.postRotation=Sp.PostRotation.value),_c[op]=yp}}_c[op]&&(_c[op][hp.attr]=hp)}else if(hp.curves.morph!==void 0){if(_c[op]===void 0){var Rp=Tu.get(tp.ID).parents.filter(function(fp){return fp.relationship!==void 0})[0].ID,wp=Tu.get(Rp).parents[0].ID,Pp=Tu.get(wp).parents[0].ID,cp=Tu.get(Pp).parents[0].ID,Sp=_u.Objects.Model[cp],yp={modelName:Sp.attrName?PropertyBinding.sanitizeNodeName(Sp.attrName):"",morphName:_u.Objects.Deformer[Rp].attrName};_c[op]=yp}_c[op][hp.attr]=hp}}}),Ju.set(parseInt(Zu),_c)}}return Ju},parseAnimStacks:function(Ku){var Xu=_u.Objects.AnimationStack,Ju={};for(var Zu in Xu){var _c=Tu.get(parseInt(Zu)).children;_c.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var _f=Ku.get(_c[0].ID);Ju[Zu]={name:Xu[Zu].attrName,layer:_f}}return Ju},addClip:function(Ku){var Xu=[],Ju=this;return Ku.layer.forEach(function(Zu){Xu=Xu.concat(Ju.generateTracks(Zu))}),new AnimationClip(Ku.name,-1,Xu)},generateTracks:function(Ku){var Xu=[],Ju=new Vector3,Zu=new Quaternion,_c=new Vector3;if(Ku.transform&&Ku.transform.decompose(Ju,Zu,_c),Ju=Ju.toArray(),Zu=new Euler().setFromQuaternion(Zu,Ku.eulerOrder).toArray(),_c=_c.toArray(),Ku.T!==void 0&&Object.keys(Ku.T.curves).length>0){var _f=this.generateVectorTrack(Ku.modelName,Ku.T.curves,Ju,"position");_f!==void 0&&Xu.push(_f)}if(Ku.R!==void 0&&Object.keys(Ku.R.curves).length>0){var ep=this.generateRotationTrack(Ku.modelName,Ku.R.curves,Zu,Ku.preRotation,Ku.postRotation,Ku.eulerOrder);ep!==void 0&&Xu.push(ep)}if(Ku.S!==void 0&&Object.keys(Ku.S.curves).length>0){var tp=this.generateVectorTrack(Ku.modelName,Ku.S.curves,_c,"scale");tp!==void 0&&Xu.push(tp)}if(Ku.DeformPercent!==void 0){var op=this.generateMorphTrack(Ku);op!==void 0&&Xu.push(op)}return Xu},generateVectorTrack:function(Ku,Xu,Ju,Zu){var _c=this.getTimesForAllAxes(Xu),_f=this.getKeyframeTrackValues(_c,Xu,Ju);return new VectorKeyframeTrack(Ku+"."+Zu,_c,_f)},generateRotationTrack:function(Ku,Xu,Ju,Zu,_c,_f){Xu.x!==void 0&&(this.interpolateRotations(Xu.x),Xu.x.values=Xu.x.values.map(MathUtils.degToRad)),Xu.y!==void 0&&(this.interpolateRotations(Xu.y),Xu.y.values=Xu.y.values.map(MathUtils.degToRad)),Xu.z!==void 0&&(this.interpolateRotations(Xu.z),Xu.z.values=Xu.z.values.map(MathUtils.degToRad));var ep=this.getTimesForAllAxes(Xu),tp=this.getKeyframeTrackValues(ep,Xu,Ju);Zu!==void 0&&(Zu=Zu.map(MathUtils.degToRad),Zu.push(_f),Zu=new Euler().fromArray(Zu),Zu=new Quaternion().setFromEuler(Zu)),_c!==void 0&&(_c=_c.map(MathUtils.degToRad),_c.push(_f),_c=new Euler().fromArray(_c),_c=new Quaternion().setFromEuler(_c).inverse());for(var op=new Quaternion,hp=new Euler,cp=[],Sp=0;Sp<tp.length;Sp+=3)hp.set(tp[Sp],tp[Sp+1],tp[Sp+2],_f),op.setFromEuler(hp),Zu!==void 0&&op.premultiply(Zu),_c!==void 0&&op.multiply(_c),op.toArray(cp,Sp/3*4);return new QuaternionKeyframeTrack(Ku+".quaternion",ep,cp)},generateMorphTrack:function(Ku){var Xu=Ku.DeformPercent.curves.morph,Ju=Xu.values.map(function(_c){return _c/100}),Zu=Cu.getObjectByName(Ku.modelName).morphTargetDictionary[Ku.morphName];return new NumberKeyframeTrack(Ku.modelName+".morphTargetInfluences["+Zu+"]",Xu.times,Ju)},getTimesForAllAxes:function(Ku){var Xu=[];return Ku.x!==void 0&&(Xu=Xu.concat(Ku.x.times)),Ku.y!==void 0&&(Xu=Xu.concat(Ku.y.times)),Ku.z!==void 0&&(Xu=Xu.concat(Ku.z.times)),Xu=Xu.sort(function(Ju,Zu){return Ju-Zu}).filter(function(Ju,Zu,_c){return _c.indexOf(Ju)==Zu}),Xu},getKeyframeTrackValues:function(Ku,Xu,Ju){var Zu=Ju,_c=[],_f=-1,ep=-1,tp=-1;return Ku.forEach(function(op){if(Xu.x&&(_f=Xu.x.times.indexOf(op)),Xu.y&&(ep=Xu.y.times.indexOf(op)),Xu.z&&(tp=Xu.z.times.indexOf(op)),_f!==-1){var hp=Xu.x.values[_f];_c.push(hp),Zu[0]=hp}else _c.push(Zu[0]);if(ep!==-1){var cp=Xu.y.values[ep];_c.push(cp),Zu[1]=cp}else _c.push(Zu[1]);if(tp!==-1){var Sp=Xu.z.values[tp];_c.push(Sp),Zu[2]=Sp}else _c.push(Zu[2])}),_c},interpolateRotations:function(Ku){for(var Xu=1;Xu<Ku.values.length;Xu++){var Ju=Ku.values[Xu-1],Zu=Ku.values[Xu]-Ju,_c=Math.abs(Zu);if(_c>=180){for(var _f=_c/180,ep=Zu/_f,tp=Ju+ep,op=Ku.times[Xu-1],hp=Ku.times[Xu]-op,cp=hp/_f,Sp=op+cp,yp=[],Rp=[];Sp<Ku.times[Xu];)yp.push(Sp),Sp+=cp,Rp.push(tp),tp+=ep;Ku.times=_d(Ku.times,Xu,yp),Ku.values=_d(Ku.values,Xu,Rp)}}}};function Ou(){}Ou.prototype={constructor:Ou,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(Ku){this.nodeStack.push(Ku),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(Ku,Xu){this.currentProp=Ku,this.currentPropName=Xu},parse:function(Ku){this.currentIndent=0,this.allNodes=new ku,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var Xu=this,Ju=Ku.split(/[\r\n]+/);return Ju.forEach(function(Zu,_c){var _f=Zu.match(/^[\s\t]*;/),ep=Zu.match(/^[\s\t]*$/);if(!(_f||ep)){var tp=Zu.match("^\\t{"+Xu.currentIndent+"}(\\w+):(.*){",""),op=Zu.match("^\\t{"+Xu.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),hp=Zu.match("^\\t{"+(Xu.currentIndent-1)+"}}");tp?Xu.parseNodeBegin(Zu,tp):op?Xu.parseNodeProperty(Zu,op,Ju[++_c]):hp?Xu.popStack():Zu.match(/^[^\s\t}]/)&&Xu.parseNodePropertyContinued(Zu)}}),this.allNodes},parseNodeBegin:function(Ku,Xu){var Ju=Xu[1].trim().replace(/^"/,"").replace(/"$/,""),Zu=Xu[2].split(",").map(function(tp){return tp.trim().replace(/^"/,"").replace(/"$/,"")}),_c={name:Ju},_f=this.parseNodeAttr(Zu),ep=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(Ju,_c):Ju in ep?(Ju==="PoseNode"?ep.PoseNode.push(_c):ep[Ju].id!==void 0&&(ep[Ju]={},ep[Ju][ep[Ju].id]=ep[Ju]),_f.id!==""&&(ep[Ju][_f.id]=_c)):typeof _f.id=="number"?(ep[Ju]={},ep[Ju][_f.id]=_c):Ju!=="Properties70"&&(Ju==="PoseNode"?ep[Ju]=[_c]:ep[Ju]=_c),typeof _f.id=="number"&&(_c.id=_f.id),_f.name!==""&&(_c.attrName=_f.name),_f.type!==""&&(_c.attrType=_f.type),this.pushStack(_c)},parseNodeAttr:function(Ku){var Xu=Ku[0];Ku[0]!==""&&(Xu=parseInt(Ku[0]),isNaN(Xu)&&(Xu=Ku[0]));var Ju="",Zu="";return Ku.length>1&&(Ju=Ku[1].replace(/^(\w+)::/,""),Zu=Ku[2]),{id:Xu,name:Ju,type:Zu}},parseNodeProperty:function(Ku,Xu,Ju){var Zu=Xu[1].replace(/^"/,"").replace(/"$/,"").trim(),_c=Xu[2].replace(/^"/,"").replace(/"$/,"").trim();Zu==="Content"&&_c===","&&(_c=Ju.replace(/"/g,"").replace(/,$/,"").trim());var _f=this.getCurrentNode(),ep=_f.name;if(ep==="Properties70"){this.parseNodeSpecialProperty(Ku,Zu,_c);return}if(Zu==="C"){var tp=_c.split(",").slice(1),op=parseInt(tp[0]),hp=parseInt(tp[1]),cp=_c.split(",").slice(3);cp=cp.map(function(Sp){return Sp.trim().replace(/^"/,"")}),Zu="connections",_c=[op,hp],Xc(_c,cp),_f[Zu]===void 0&&(_f[Zu]=[])}Zu==="Node"&&(_f.id=_c),Zu in _f&&Array.isArray(_f[Zu])?_f[Zu].push(_c):Zu!=="a"?_f[Zu]=_c:_f.a=_c,this.setCurrentProp(_f,Zu),Zu==="a"&&_c.slice(-1)!==","&&(_f.a=qu(_c))},parseNodePropertyContinued:function(Ku){var Xu=this.getCurrentNode();Xu.a+=Ku,Ku.slice(-1)!==","&&(Xu.a=qu(Xu.a))},parseNodeSpecialProperty:function(Ku,Xu,Ju){var Zu=Ju.split('",').map(function(hp){return hp.trim().replace(/^\"/,"").replace(/\s/,"_")}),_c=Zu[0],_f=Zu[1],ep=Zu[2],tp=Zu[3],op=Zu[4];switch(_f){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":op=parseFloat(op);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":op=qu(op);break}this.getPrevNode()[_c]={type:_f,type2:ep,flag:tp,value:op},this.setCurrentProp(this.getPrevNode(),_c)}};function Du(){}Du.prototype={constructor:Du,parse:function(Ku){var Xu=new $u(Ku);Xu.skip(23);var Ju=Xu.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+Ju);for(var Zu=new ku;!this.endOfContent(Xu);){var _c=this.parseNode(Xu,Ju);_c!==null&&Zu.add(_c.name,_c)}return Zu},endOfContent:function(Ku){return Ku.size()%16===0?(Ku.getOffset()+160+16&-16)>=Ku.size():Ku.getOffset()+160+16>=Ku.size()},parseNode:function(Ku,Xu){var Ju={},Zu=Xu>=7500?Ku.getUint64():Ku.getUint32(),_c=Xu>=7500?Ku.getUint64():Ku.getUint32();Xu>=7500?Ku.getUint64():Ku.getUint32();var _f=Ku.getUint8(),ep=Ku.getString(_f);if(Zu===0)return null;for(var tp=[],op=0;op<_c;op++)tp.push(this.parseProperty(Ku));var hp=tp.length>0?tp[0]:"",cp=tp.length>1?tp[1]:"",Sp=tp.length>2?tp[2]:"";for(Ju.singleProperty=_c===1&&Ku.getOffset()===Zu;Zu>Ku.getOffset();){var yp=this.parseNode(Ku,Xu);yp!==null&&this.parseSubNode(ep,Ju,yp)}return Ju.propertyList=tp,typeof hp=="number"&&(Ju.id=hp),cp!==""&&(Ju.attrName=cp),Sp!==""&&(Ju.attrType=Sp),ep!==""&&(Ju.name=ep),Ju},parseSubNode:function(Ku,Xu,Ju){if(Ju.singleProperty===!0){var Zu=Ju.propertyList[0];Array.isArray(Zu)?(Xu[Ju.name]=Ju,Ju.a=Zu):Xu[Ju.name]=Zu}else if(Ku==="Connections"&&Ju.name==="C"){var _c=[];Ju.propertyList.forEach(function(Sp,yp){yp!==0&&_c.push(Sp)}),Xu.connections===void 0&&(Xu.connections=[]),Xu.connections.push(_c)}else if(Ju.name==="Properties70"){var _f=Object.keys(Ju);_f.forEach(function(Sp){Xu[Sp]=Ju[Sp]})}else if(Ku==="Properties70"&&Ju.name==="P"){var ep=Ju.propertyList[0],tp=Ju.propertyList[1],op=Ju.propertyList[2],hp=Ju.propertyList[3],cp;ep.indexOf("Lcl ")===0&&(ep=ep.replace("Lcl ","Lcl_")),tp.indexOf("Lcl ")===0&&(tp=tp.replace("Lcl ","Lcl_")),tp==="Color"||tp==="ColorRGB"||tp==="Vector"||tp==="Vector3D"||tp.indexOf("Lcl_")===0?cp=[Ju.propertyList[4],Ju.propertyList[5],Ju.propertyList[6]]:cp=Ju.propertyList[4],Xu[ep]={type:tp,type2:op,flag:hp,value:cp}}else Xu[Ju.name]===void 0?typeof Ju.id=="number"?(Xu[Ju.name]={},Xu[Ju.name][Ju.id]=Ju):Xu[Ju.name]=Ju:Ju.name==="PoseNode"?(Array.isArray(Xu[Ju.name])||(Xu[Ju.name]=[Xu[Ju.name]]),Xu[Ju.name].push(Ju)):Xu[Ju.name][Ju.id]===void 0&&(Xu[Ju.name][Ju.id]=Ju)},parseProperty:function(Ku){var Xu=Ku.getString(1);switch(Xu){case"C":return Ku.getBoolean();case"D":return Ku.getFloat64();case"F":return Ku.getFloat32();case"I":return Ku.getInt32();case"L":return Ku.getInt64();case"R":var Ju=Ku.getUint32();return Ku.getArrayBuffer(Ju);case"S":var Ju=Ku.getUint32();return Ku.getString(Ju);case"Y":return Ku.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var Zu=Ku.getUint32(),_c=Ku.getUint32(),_f=Ku.getUint32();if(_c===0)switch(Xu){case"b":case"c":return Ku.getBooleanArray(Zu);case"d":return Ku.getFloat64Array(Zu);case"f":return Ku.getFloat32Array(Zu);case"i":return Ku.getInt32Array(Zu);case"l":return Ku.getInt64Array(Zu)}typeof Zlib=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var ep=new Zlib.Inflate(new Uint8Array(Ku.getArrayBuffer(_f))),tp=new $u(ep.decompress().buffer);switch(Xu){case"b":case"c":return tp.getBooleanArray(Zu);case"d":return tp.getFloat64Array(Zu);case"f":return tp.getFloat32Array(Zu);case"i":return tp.getInt32Array(Zu);case"l":return tp.getInt64Array(Zu)}default:throw new Error("THREE.FBXLoader: Unknown property type "+Xu)}}};function $u(Ku,Xu){this.dv=new DataView(Ku),this.offset=0,this.littleEndian=Xu!==void 0?Xu:!0}$u.prototype={constructor:$u,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(Ku){this.offset+=Ku},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(Ku){for(var Xu=[],Ju=0;Ju<Ku;Ju++)Xu.push(this.getBoolean());return Xu},getUint8:function(){var Ku=this.dv.getUint8(this.offset);return this.offset+=1,Ku},getInt16:function(){var Ku=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,Ku},getInt32:function(){var Ku=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,Ku},getInt32Array:function(Ku){for(var Xu=[],Ju=0;Ju<Ku;Ju++)Xu.push(this.getInt32());return Xu},getUint32:function(){var Ku=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,Ku},getInt64:function(){var Ku,Xu;return this.littleEndian?(Ku=this.getUint32(),Xu=this.getUint32()):(Xu=this.getUint32(),Ku=this.getUint32()),Xu&2147483648?(Xu=~Xu&4294967295,Ku=~Ku&4294967295,Ku===4294967295&&(Xu=Xu+1&4294967295),Ku=Ku+1&4294967295,-(Xu*4294967296+Ku)):Xu*4294967296+Ku},getInt64Array:function(Ku){for(var Xu=[],Ju=0;Ju<Ku;Ju++)Xu.push(this.getInt64());return Xu},getUint64:function(){var Ku,Xu;return this.littleEndian?(Ku=this.getUint32(),Xu=this.getUint32()):(Xu=this.getUint32(),Ku=this.getUint32()),Xu*4294967296+Ku},getFloat32:function(){var Ku=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,Ku},getFloat32Array:function(Ku){for(var Xu=[],Ju=0;Ju<Ku;Ju++)Xu.push(this.getFloat32());return Xu},getFloat64:function(){var Ku=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,Ku},getFloat64Array:function(Ku){for(var Xu=[],Ju=0;Ju<Ku;Ju++)Xu.push(this.getFloat64());return Xu},getArrayBuffer:function(Ku){var Xu=this.dv.buffer.slice(this.offset,this.offset+Ku);return this.offset+=Ku,Xu},getString:function(Ku){for(var Xu=[],Ju=0;Ju<Ku;Ju++)Xu[Ju]=this.getUint8();var Zu=Xu.indexOf(0);return Zu>=0&&(Xu=Xu.slice(0,Zu)),LoaderUtils.decodeText(new Uint8Array(Xu))}};function ku(){}ku.prototype={constructor:ku,add:function(Ku,Xu){this[Ku]=Xu}};function Fu(Ku){var Xu="Kaydara FBX Binary  \0";return Ku.byteLength>=Xu.length&&Xu===Yu(Ku,0,Xu.length)}function Nu(Ku){var Xu=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],Ju=0;function Zu(ep){var tp=Ku[ep-1];return Ku=Ku.slice(Ju+ep),Ju++,tp}for(var _c=0;_c<Xu.length;++_c){var _f=Zu(1);if(_f===Xu[_c])return!1}return!0}function Vu(Ku){var Xu=/FBXVersion: (\d+)/,Ju=Ku.match(Xu);if(Ju){var Zu=parseInt(Ju[1]);return Zu}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Gu(Ku){return Ku/46186158e3}var Hu=[];function ju(Ku,Xu,Ju,Zu){var _c;switch(Zu.mappingType){case"ByPolygonVertex":_c=Ku;break;case"ByPolygon":_c=Xu;break;case"ByVertice":_c=Ju;break;case"AllSame":_c=Zu.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+Zu.mappingType)}Zu.referenceType==="IndexToDirect"&&(_c=Zu.indices[_c]);var _f=_c*Zu.dataSize,ep=_f+Zu.dataSize;return _h(Hu,Zu.buffer,_f,ep)}var Uu=new Euler,zu=new Vector3;function Wu(Ku){var Xu=new Matrix4,Ju=new Matrix4,Zu=new Matrix4,_c=new Matrix4,_f=new Matrix4,ep=new Matrix4,tp=new Matrix4,op=new Matrix4,hp=new Matrix4,cp=new Matrix4,Sp=new Matrix4,yp=Ku.inheritType?Ku.inheritType:0;if(Ku.translation&&Xu.setPosition(zu.fromArray(Ku.translation)),Ku.preRotation){var Rp=Ku.preRotation.map(MathUtils.degToRad);Rp.push(Ku.eulerOrder),Ju.makeRotationFromEuler(Uu.fromArray(Rp))}if(Ku.rotation){var Rp=Ku.rotation.map(MathUtils.degToRad);Rp.push(Ku.eulerOrder),Zu.makeRotationFromEuler(Uu.fromArray(Rp))}if(Ku.postRotation){var Rp=Ku.postRotation.map(MathUtils.degToRad);Rp.push(Ku.eulerOrder),_c.makeRotationFromEuler(Uu.fromArray(Rp))}Ku.scale&&_f.scale(zu.fromArray(Ku.scale)),Ku.scalingOffset&&tp.setPosition(zu.fromArray(Ku.scalingOffset)),Ku.scalingPivot&&ep.setPosition(zu.fromArray(Ku.scalingPivot)),Ku.rotationOffset&&op.setPosition(zu.fromArray(Ku.rotationOffset)),Ku.rotationPivot&&hp.setPosition(zu.fromArray(Ku.rotationPivot)),Ku.parentMatrixWorld&&(cp=Ku.parentMatrixWorld);var wp=Ju.multiply(Zu).multiply(_c),Pp=new Matrix4;cp.extractRotation(Pp);var Ep=new Matrix4;Ep.copyPosition(cp);var ip=new Matrix4;ip.getInverse(Pp).multiply(cp);var rp=new Matrix4;if(yp===0)rp.copy(Pp).multiply(wp).multiply(ip).multiply(_f);else if(yp===1)rp.copy(Pp).multiply(ip).multiply(wp).multiply(_f);else{var fp=new Matrix4().getInverse(_f),up=new Matrix4().multiply(ip).multiply(fp);rp.copy(Pp).multiply(wp).multiply(up).multiply(_f)}var pp=new Matrix4().getInverse(hp),gp=new Matrix4().getInverse(ep),Ap=new Matrix4;Ap.copy(Xu).multiply(op).multiply(hp).multiply(Ju).multiply(Zu).multiply(_c).multiply(pp).multiply(tp).multiply(ep).multiply(_f).multiply(gp);var Mp=new Matrix4().copyPosition(Ap),$p=new Matrix4().copy(cp).multiply(Mp);return Sp.copyPosition($p),Ap=new Matrix4().multiply(Sp).multiply(rp),Ap}function Qu(Ku){Ku=Ku||0;var Xu=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return Ku===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),Xu[0]):Xu[Ku]}function qu(Ku){var Xu=Ku.split(",").map(function(Ju){return parseFloat(Ju)});return Xu}function Yu(Ku,Xu,Ju){return Xu===void 0&&(Xu=0),Ju===void 0&&(Ju=Ku.byteLength),LoaderUtils.decodeText(new Uint8Array(Ku,Xu,Ju))}function Xc(Ku,Xu){for(var Ju=0,Zu=Ku.length,_c=Xu.length;Ju<_c;Ju++,Zu++)Ku[Zu]=Xu[Ju]}function _h(Ku,Xu,Ju,Zu){for(var _c=Ju,_f=0;_c<Zu;_c++,_f++)Ku[_f]=Xu[_c];return Ku}function _d(Ku,Xu,Ju){return Ku.slice(0,Xu).concat(Ju).concat(Ku.slice(Xu))}return Pu})();var hammer={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(_u){(function(Tu,Cu,Pu,Bu){var Ru=["","webkit","Moz","MS","ms","o"],Lu=Cu.createElement("div"),Ou="function",Du=Math.round,$u=Math.abs,ku=Date.now;function Fu(lp,dp,xp){return setTimeout(Wu(lp,xp),dp)}function Nu(lp,dp,xp){return Array.isArray(lp)?(Vu(lp,xp[dp],xp),!0):!1}function Vu(lp,dp,xp){var Dp;if(!!lp)if(lp.forEach)lp.forEach(dp,xp);else if(lp.length!==Bu)for(Dp=0;Dp<lp.length;)dp.call(xp,lp[Dp],Dp,lp),Dp++;else for(Dp in lp)lp.hasOwnProperty(Dp)&&dp.call(xp,lp[Dp],Dp,lp)}function Gu(lp,dp,xp){var Dp="DEPRECATED METHOD: "+dp+`
`+xp+` AT 
`;return function(){var zp=new Error("get-stack-trace"),rm=zp&&zp.stack?zp.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",vm=Tu.console&&(Tu.console.warn||Tu.console.log);return vm&&vm.call(Tu.console,Dp,rm),lp.apply(this,arguments)}}var Hu;typeof Object.assign!="function"?Hu=function(dp){if(dp===Bu||dp===null)throw new TypeError("Cannot convert undefined or null to object");for(var xp=Object(dp),Dp=1;Dp<arguments.length;Dp++){var zp=arguments[Dp];if(zp!==Bu&&zp!==null)for(var rm in zp)zp.hasOwnProperty(rm)&&(xp[rm]=zp[rm])}return xp}:Hu=Object.assign;var ju=Gu(function(dp,xp,Dp){for(var zp=Object.keys(xp),rm=0;rm<zp.length;)(!Dp||Dp&&dp[zp[rm]]===Bu)&&(dp[zp[rm]]=xp[zp[rm]]),rm++;return dp},"extend","Use `assign`."),Uu=Gu(function(dp,xp){return ju(dp,xp,!0)},"merge","Use `assign`.");function zu(lp,dp,xp){var Dp=dp.prototype,zp;zp=lp.prototype=Object.create(Dp),zp.constructor=lp,zp._super=Dp,xp&&Hu(zp,xp)}function Wu(lp,dp){return function(){return lp.apply(dp,arguments)}}function Qu(lp,dp){return typeof lp==Ou?lp.apply(dp&&dp[0]||Bu,dp):lp}function qu(lp,dp){return lp===Bu?dp:lp}function Yu(lp,dp,xp){Vu(Ku(dp),function(Dp){lp.addEventListener(Dp,xp,!1)})}function Xc(lp,dp,xp){Vu(Ku(dp),function(Dp){lp.removeEventListener(Dp,xp,!1)})}function _h(lp,dp){for(;lp;){if(lp==dp)return!0;lp=lp.parentNode}return!1}function _d(lp,dp){return lp.indexOf(dp)>-1}function Ku(lp){return lp.trim().split(/\s+/g)}function Xu(lp,dp,xp){if(lp.indexOf&&!xp)return lp.indexOf(dp);for(var Dp=0;Dp<lp.length;){if(xp&&lp[Dp][xp]==dp||!xp&&lp[Dp]===dp)return Dp;Dp++}return-1}function Ju(lp){return Array.prototype.slice.call(lp,0)}function Zu(lp,dp,xp){for(var Dp=[],zp=[],rm=0;rm<lp.length;){var vm=dp?lp[rm][dp]:lp[rm];Xu(zp,vm)<0&&Dp.push(lp[rm]),zp[rm]=vm,rm++}return xp&&(dp?Dp=Dp.sort(function(Rm,$m){return Rm[dp]>$m[dp]}):Dp=Dp.sort()),Dp}function _c(lp,dp){for(var xp,Dp,zp=dp[0].toUpperCase()+dp.slice(1),rm=0;rm<Ru.length;){if(xp=Ru[rm],Dp=xp?xp+zp:dp,Dp in lp)return Dp;rm++}return Bu}var _f=1;function ep(){return _f++}function tp(lp){var dp=lp.ownerDocument||lp;return dp.defaultView||dp.parentWindow||Tu}var op=/mobile|tablet|ip(ad|hone|od)|android/i,hp="ontouchstart"in Tu,cp=_c(Tu,"PointerEvent")!==Bu,Sp=hp&&op.test(navigator.userAgent),yp="touch",Rp="pen",wp="mouse",Pp="kinect",Ep=25,ip=1,rp=2,fp=4,up=8,pp=1,gp=2,Ap=4,Mp=8,$p=16,Tp=gp|Ap,np=Mp|$p,sp=Tp|np,Ip=["x","y"],Cp=["clientX","clientY"];function Vp(lp,dp){var xp=this;this.manager=lp,this.callback=dp,this.element=lp.element,this.target=lp.options.inputTarget,this.domHandler=function(Dp){Qu(lp.options.enable,[lp])&&xp.handler(Dp)},this.init()}Vp.prototype={handler:function(){},init:function(){this.evEl&&Yu(this.element,this.evEl,this.domHandler),this.evTarget&&Yu(this.target,this.evTarget,this.domHandler),this.evWin&&Yu(tp(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Xc(this.element,this.evEl,this.domHandler),this.evTarget&&Xc(this.target,this.evTarget,this.domHandler),this.evWin&&Xc(tp(this.element),this.evWin,this.domHandler)}};function Fp(lp){var dp,xp=lp.options.inputClass;return xp?dp=xp:cp?dp=gm:Sp?dp=Xp:hp?dp=am:dp=mm,new dp(lp,Gp)}function Gp(lp,dp,xp){var Dp=xp.pointers.length,zp=xp.changedPointers.length,rm=dp&ip&&Dp-zp===0,vm=dp&(fp|up)&&Dp-zp===0;xp.isFirst=!!rm,xp.isFinal=!!vm,rm&&(lp.session={}),xp.eventType=dp,qp(lp,xp),lp.emit("hammer.input",xp),lp.recognize(xp),lp.session.prevInput=xp}function qp(lp,dp){var xp=lp.session,Dp=dp.pointers,zp=Dp.length;xp.firstInput||(xp.firstInput=Hp(dp)),zp>1&&!xp.firstMultiple?xp.firstMultiple=Hp(dp):zp===1&&(xp.firstMultiple=!1);var rm=xp.firstInput,vm=xp.firstMultiple,Im=vm?vm.center:rm.center,Rm=dp.center=Kp(Dp);dp.timeStamp=ku(),dp.deltaTime=dp.timeStamp-rm.timeStamp,dp.angle=Qp(Im,Rm),dp.distance=_p(Im,Rm),Wp(xp,dp),dp.offsetDirection=Yp(dp.deltaX,dp.deltaY);var $m=jp(dp.deltaTime,dp.deltaX,dp.deltaY);dp.overallVelocityX=$m.x,dp.overallVelocityY=$m.y,dp.overallVelocity=$u($m.x)>$u($m.y)?$m.x:$m.y,dp.scale=vm?tm(vm.pointers,Dp):1,dp.rotation=vm?Zp(vm.pointers,Dp):0,dp.maxPointers=xp.prevInput?dp.pointers.length>xp.prevInput.maxPointers?dp.pointers.length:xp.prevInput.maxPointers:dp.pointers.length,Jp(xp,dp);var zm=lp.element;_h(dp.srcEvent.target,zm)&&(zm=dp.srcEvent.target),dp.target=zm}function Wp(lp,dp){var xp=dp.center,Dp=lp.offsetDelta||{},zp=lp.prevDelta||{},rm=lp.prevInput||{};(dp.eventType===ip||rm.eventType===fp)&&(zp=lp.prevDelta={x:rm.deltaX||0,y:rm.deltaY||0},Dp=lp.offsetDelta={x:xp.x,y:xp.y}),dp.deltaX=zp.x+(xp.x-Dp.x),dp.deltaY=zp.y+(xp.y-Dp.y)}function Jp(lp,dp){var xp=lp.lastInterval||dp,Dp=dp.timeStamp-xp.timeStamp,zp,rm,vm,Im;if(dp.eventType!=up&&(Dp>Ep||xp.velocity===Bu)){var Rm=dp.deltaX-xp.deltaX,$m=dp.deltaY-xp.deltaY,zm=jp(Dp,Rm,$m);rm=zm.x,vm=zm.y,zp=$u(zm.x)>$u(zm.y)?zm.x:zm.y,Im=Yp(Rm,$m),lp.lastInterval=dp}else zp=xp.velocity,rm=xp.velocityX,vm=xp.velocityY,Im=xp.direction;dp.velocity=zp,dp.velocityX=rm,dp.velocityY=vm,dp.direction=Im}function Hp(lp){for(var dp=[],xp=0;xp<lp.pointers.length;)dp[xp]={clientX:Du(lp.pointers[xp].clientX),clientY:Du(lp.pointers[xp].clientY)},xp++;return{timeStamp:ku(),pointers:dp,center:Kp(dp),deltaX:lp.deltaX,deltaY:lp.deltaY}}function Kp(lp){var dp=lp.length;if(dp===1)return{x:Du(lp[0].clientX),y:Du(lp[0].clientY)};for(var xp=0,Dp=0,zp=0;zp<dp;)xp+=lp[zp].clientX,Dp+=lp[zp].clientY,zp++;return{x:Du(xp/dp),y:Du(Dp/dp)}}function jp(lp,dp,xp){return{x:dp/lp||0,y:xp/lp||0}}function Yp(lp,dp){return lp===dp?pp:$u(lp)>=$u(dp)?lp<0?gp:Ap:dp<0?Mp:$p}function _p(lp,dp,xp){xp||(xp=Ip);var Dp=dp[xp[0]]-lp[xp[0]],zp=dp[xp[1]]-lp[xp[1]];return Math.sqrt(Dp*Dp+zp*zp)}function Qp(lp,dp,xp){xp||(xp=Ip);var Dp=dp[xp[0]]-lp[xp[0]],zp=dp[xp[1]]-lp[xp[1]];return Math.atan2(zp,Dp)*180/Math.PI}function Zp(lp,dp){return Qp(dp[1],dp[0],Cp)+Qp(lp[1],lp[0],Cp)}function tm(lp,dp){return _p(dp[0],dp[1],Cp)/_p(lp[0],lp[1],Cp)}var em={mousedown:ip,mousemove:rp,mouseup:fp},lm="mousedown",pm="mousemove mouseup";function mm(){this.evEl=lm,this.evWin=pm,this.pressed=!1,Vp.apply(this,arguments)}zu(mm,Vp,{handler:function(dp){var xp=em[dp.type];xp&ip&&dp.button===0&&(this.pressed=!0),xp&rp&&dp.which!==1&&(xp=fp),this.pressed&&(xp&fp&&(this.pressed=!1),this.callback(this.manager,xp,{pointers:[dp],changedPointers:[dp],pointerType:wp,srcEvent:dp}))}});var Sm={pointerdown:ip,pointermove:rp,pointerup:fp,pointercancel:up,pointerout:up},dm={2:yp,3:Rp,4:wp,5:Pp},_m="pointerdown",xm="pointermove pointerup pointercancel";Tu.MSPointerEvent&&!Tu.PointerEvent&&(_m="MSPointerDown",xm="MSPointerMove MSPointerUp MSPointerCancel");function gm(){this.evEl=_m,this.evWin=xm,Vp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}zu(gm,Vp,{handler:function(dp){var xp=this.store,Dp=!1,zp=dp.type.toLowerCase().replace("ms",""),rm=Sm[zp],vm=dm[dp.pointerType]||dp.pointerType,Im=vm==yp,Rm=Xu(xp,dp.pointerId,"pointerId");rm&ip&&(dp.button===0||Im)?Rm<0&&(xp.push(dp),Rm=xp.length-1):rm&(fp|up)&&(Dp=!0),!(Rm<0)&&(xp[Rm]=dp,this.callback(this.manager,rm,{pointers:xp,changedPointers:[dp],pointerType:vm,srcEvent:dp}),Dp&&xp.splice(Rm,1))}});var Mm={touchstart:ip,touchmove:rp,touchend:fp,touchcancel:up},Bm="touchstart",ym="touchstart touchmove touchend touchcancel";function mp(){this.evTarget=Bm,this.evWin=ym,this.started=!1,Vp.apply(this,arguments)}zu(mp,Vp,{handler:function(dp){var xp=Mm[dp.type];if(xp===ip&&(this.started=!0),!!this.started){var Dp=kp.call(this,dp,xp);xp&(fp|up)&&Dp[0].length-Dp[1].length===0&&(this.started=!1),this.callback(this.manager,xp,{pointers:Dp[0],changedPointers:Dp[1],pointerType:yp,srcEvent:dp})}}});function kp(lp,dp){var xp=Ju(lp.touches),Dp=Ju(lp.changedTouches);return dp&(fp|up)&&(xp=Zu(xp.concat(Dp),"identifier",!0)),[xp,Dp]}var Lp={touchstart:ip,touchmove:rp,touchend:fp,touchcancel:up},Np="touchstart touchmove touchend touchcancel";function Xp(){this.evTarget=Np,this.targetIds={},Vp.apply(this,arguments)}zu(Xp,Vp,{handler:function(dp){var xp=Lp[dp.type],Dp=cm.call(this,dp,xp);!Dp||this.callback(this.manager,xp,{pointers:Dp[0],changedPointers:Dp[1],pointerType:yp,srcEvent:dp})}});function cm(lp,dp){var xp=Ju(lp.touches),Dp=this.targetIds;if(dp&(ip|rp)&&xp.length===1)return Dp[xp[0].identifier]=!0,[xp,xp];var zp,rm,vm=Ju(lp.changedTouches),Im=[],Rm=this.target;if(rm=xp.filter(function($m){return _h($m.target,Rm)}),dp===ip)for(zp=0;zp<rm.length;)Dp[rm[zp].identifier]=!0,zp++;for(zp=0;zp<vm.length;)Dp[vm[zp].identifier]&&Im.push(vm[zp]),dp&(fp|up)&&delete Dp[vm[zp].identifier],zp++;if(!!Im.length)return[Zu(rm.concat(Im),"identifier",!0),Im]}var um=2500,im=25;function am(){Vp.apply(this,arguments);var lp=Wu(this.handler,this);this.touch=new Xp(this.manager,lp),this.mouse=new mm(this.manager,lp),this.primaryTouch=null,this.lastTouches=[]}zu(am,Vp,{handler:function(dp,xp,Dp){var zp=Dp.pointerType==yp,rm=Dp.pointerType==wp;if(!(rm&&Dp.sourceCapabilities&&Dp.sourceCapabilities.firesTouchEvents)){if(zp)fm.call(this,xp,Dp);else if(rm&&ap.call(this,Dp))return;this.callback(dp,xp,Dp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function fm(lp,dp){lp&ip?(this.primaryTouch=dp.changedPointers[0].identifier,Am.call(this,dp)):lp&(fp|up)&&Am.call(this,dp)}function Am(lp){var dp=lp.changedPointers[0];if(dp.identifier===this.primaryTouch){var xp={x:dp.clientX,y:dp.clientY};this.lastTouches.push(xp);var Dp=this.lastTouches,zp=function(){var rm=Dp.indexOf(xp);rm>-1&&Dp.splice(rm,1)};setTimeout(zp,um)}}function ap(lp){for(var dp=lp.srcEvent.clientX,xp=lp.srcEvent.clientY,Dp=0;Dp<this.lastTouches.length;Dp++){var zp=this.lastTouches[Dp],rm=Math.abs(dp-zp.x),vm=Math.abs(xp-zp.y);if(rm<=im&&vm<=im)return!0}return!1}var vp=_c(Lu.style,"touchAction"),bp=vp!==Bu,Bp="compute",Up="auto",om="manipulation",sm="none",wm="pan-x",nm="pan-y",Em=qm();function Lm(lp,dp){this.manager=lp,this.set(dp)}Lm.prototype={set:function(lp){lp==Bp&&(lp=this.compute()),bp&&this.manager.element.style&&Em[lp]&&(this.manager.element.style[vp]=lp),this.actions=lp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var lp=[];return Vu(this.manager.recognizers,function(dp){Qu(dp.options.enable,[dp])&&(lp=lp.concat(dp.getTouchAction()))}),Wm(lp.join(" "))},preventDefaults:function(lp){var dp=lp.srcEvent,xp=lp.offsetDirection;if(this.manager.session.prevented){dp.preventDefault();return}var Dp=this.actions,zp=_d(Dp,sm)&&!Em[sm],rm=_d(Dp,nm)&&!Em[nm],vm=_d(Dp,wm)&&!Em[wm];if(zp){var Im=lp.pointers.length===1,Rm=lp.distance<2,$m=lp.deltaTime<250;if(Im&&Rm&&$m)return}if(!(vm&&rm)&&(zp||rm&&xp&Tp||vm&&xp&np))return this.preventSrc(dp)},preventSrc:function(lp){this.manager.session.prevented=!0,lp.preventDefault()}};function Wm(lp){if(_d(lp,sm))return sm;var dp=_d(lp,wm),xp=_d(lp,nm);return dp&&xp?sm:dp||xp?dp?wm:nm:_d(lp,om)?om:Up}function qm(){if(!bp)return!1;var lp={},dp=Tu.CSS&&Tu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(xp){lp[xp]=dp?Tu.CSS.supports("touch-action",xp):!0}),lp}var Nm=1,Om=2,Hm=4,Dm=8,km=Dm,Tm=16,bm=32;function Pm(lp){this.options=Hu({},this.defaults,lp||{}),this.id=ep(),this.manager=null,this.options.enable=qu(this.options.enable,!0),this.state=Nm,this.simultaneous={},this.requireFail=[]}Pm.prototype={defaults:{},set:function(lp){return Hu(this.options,lp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(lp){if(Nu(lp,"recognizeWith",this))return this;var dp=this.simultaneous;return lp=Fm(lp,this),dp[lp.id]||(dp[lp.id]=lp,lp.recognizeWith(this)),this},dropRecognizeWith:function(lp){return Nu(lp,"dropRecognizeWith",this)?this:(lp=Fm(lp,this),delete this.simultaneous[lp.id],this)},requireFailure:function(lp){if(Nu(lp,"requireFailure",this))return this;var dp=this.requireFail;return lp=Fm(lp,this),Xu(dp,lp)===-1&&(dp.push(lp),lp.requireFailure(this)),this},dropRequireFailure:function(lp){if(Nu(lp,"dropRequireFailure",this))return this;lp=Fm(lp,this);var dp=Xu(this.requireFail,lp);return dp>-1&&this.requireFail.splice(dp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(lp){return!!this.simultaneous[lp.id]},emit:function(lp){var dp=this,xp=this.state;function Dp(zp){dp.manager.emit(zp,lp)}xp<Dm&&Dp(dp.options.event+Vm(xp)),Dp(dp.options.event),lp.additionalEvent&&Dp(lp.additionalEvent),xp>=Dm&&Dp(dp.options.event+Vm(xp))},tryEmit:function(lp){if(this.canEmit())return this.emit(lp);this.state=bm},canEmit:function(){for(var lp=0;lp<this.requireFail.length;){if(!(this.requireFail[lp].state&(bm|Nm)))return!1;lp++}return!0},recognize:function(lp){var dp=Hu({},lp);if(!Qu(this.options.enable,[this,dp])){this.reset(),this.state=bm;return}this.state&(km|Tm|bm)&&(this.state=Nm),this.state=this.process(dp),this.state&(Om|Hm|Dm|Tm)&&this.tryEmit(dp)},process:function(lp){},getTouchAction:function(){},reset:function(){}};function Vm(lp){return lp&Tm?"cancel":lp&Dm?"end":lp&Hm?"move":lp&Om?"start":""}function Um(lp){return lp==$p?"down":lp==Mp?"up":lp==gp?"left":lp==Ap?"right":""}function Fm(lp,dp){var xp=dp.manager;return xp?xp.get(lp):lp}function Cm(){Pm.apply(this,arguments)}zu(Cm,Pm,{defaults:{pointers:1},attrTest:function(lp){var dp=this.options.pointers;return dp===0||lp.pointers.length===dp},process:function(lp){var dp=this.state,xp=lp.eventType,Dp=dp&(Om|Hm),zp=this.attrTest(lp);return Dp&&(xp&up||!zp)?dp|Tm:Dp||zp?xp&fp?dp|Dm:dp&Om?dp|Hm:Om:bm}});function Qm(){Cm.apply(this,arguments),this.pX=null,this.pY=null}zu(Qm,Cm,{defaults:{event:"pan",threshold:10,pointers:1,direction:sp},getTouchAction:function(){var lp=this.options.direction,dp=[];return lp&Tp&&dp.push(nm),lp&np&&dp.push(wm),dp},directionTest:function(lp){var dp=this.options,xp=!0,Dp=lp.distance,zp=lp.direction,rm=lp.deltaX,vm=lp.deltaY;return zp&dp.direction||(dp.direction&Tp?(zp=rm===0?pp:rm<0?gp:Ap,xp=rm!=this.pX,Dp=Math.abs(lp.deltaX)):(zp=vm===0?pp:vm<0?Mp:$p,xp=vm!=this.pY,Dp=Math.abs(lp.deltaY))),lp.direction=zp,xp&&Dp>dp.threshold&&zp&dp.direction},attrTest:function(lp){return Cm.prototype.attrTest.call(this,lp)&&(this.state&Om||!(this.state&Om)&&this.directionTest(lp))},emit:function(lp){this.pX=lp.deltaX,this.pY=lp.deltaY;var dp=Um(lp.direction);dp&&(lp.additionalEvent=this.options.event+dp),this._super.emit.call(this,lp)}});function Km(){Cm.apply(this,arguments)}zu(Km,Cm,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[sm]},attrTest:function(lp){return this._super.attrTest.call(this,lp)&&(Math.abs(lp.scale-1)>this.options.threshold||this.state&Om)},emit:function(lp){if(lp.scale!==1){var dp=lp.scale<1?"in":"out";lp.additionalEvent=this.options.event+dp}this._super.emit.call(this,lp)}});function Xm(){Pm.apply(this,arguments),this._timer=null,this._input=null}zu(Xm,Pm,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Up]},process:function(lp){var dp=this.options,xp=lp.pointers.length===dp.pointers,Dp=lp.distance<dp.threshold,zp=lp.deltaTime>dp.time;if(this._input=lp,!Dp||!xp||lp.eventType&(fp|up)&&!zp)this.reset();else if(lp.eventType&ip)this.reset(),this._timer=Fu(function(){this.state=km,this.tryEmit()},dp.time,this);else if(lp.eventType&fp)return km;return bm},reset:function(){clearTimeout(this._timer)},emit:function(lp){this.state===km&&(lp&&lp.eventType&fp?this.manager.emit(this.options.event+"up",lp):(this._input.timeStamp=ku(),this.manager.emit(this.options.event,this._input)))}});function Gm(){Cm.apply(this,arguments)}zu(Gm,Cm,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[sm]},attrTest:function(lp){return this._super.attrTest.call(this,lp)&&(Math.abs(lp.rotation)>this.options.threshold||this.state&Om)}});function Jm(){Cm.apply(this,arguments)}zu(Jm,Cm,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Tp|np,pointers:1},getTouchAction:function(){return Qm.prototype.getTouchAction.call(this)},attrTest:function(lp){var dp=this.options.direction,xp;return dp&(Tp|np)?xp=lp.overallVelocity:dp&Tp?xp=lp.overallVelocityX:dp&np&&(xp=lp.overallVelocityY),this._super.attrTest.call(this,lp)&&dp&lp.offsetDirection&&lp.distance>this.options.threshold&&lp.maxPointers==this.options.pointers&&$u(xp)>this.options.velocity&&lp.eventType&fp},emit:function(lp){var dp=Um(lp.offsetDirection);dp&&this.manager.emit(this.options.event+dp,lp),this.manager.emit(this.options.event,lp)}});function Zm(){Pm.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}zu(Zm,Pm,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[om]},process:function(lp){var dp=this.options,xp=lp.pointers.length===dp.pointers,Dp=lp.distance<dp.threshold,zp=lp.deltaTime<dp.time;if(this.reset(),lp.eventType&ip&&this.count===0)return this.failTimeout();if(Dp&&zp&&xp){if(lp.eventType!=fp)return this.failTimeout();var rm=this.pTime?lp.timeStamp-this.pTime<dp.interval:!0,vm=!this.pCenter||_p(this.pCenter,lp.center)<dp.posThreshold;this.pTime=lp.timeStamp,this.pCenter=lp.center,!vm||!rm?this.count=1:this.count+=1,this._input=lp;var Im=this.count%dp.taps;if(Im===0)return this.hasRequireFailures()?(this._timer=Fu(function(){this.state=km,this.tryEmit()},dp.interval,this),Om):km}return bm},failTimeout:function(){return this._timer=Fu(function(){this.state=bm},this.options.interval,this),bm},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==km&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function jm(lp,dp){return dp=dp||{},dp.recognizers=qu(dp.recognizers,jm.defaults.preset),new ev(lp,dp)}jm.VERSION="2.0.7",jm.defaults={domEvents:!1,touchAction:Bp,enable:!0,inputTarget:null,inputClass:null,preset:[[Gm,{enable:!1}],[Km,{enable:!1},["rotate"]],[Jm,{direction:Tp}],[Qm,{direction:Tp},["swipe"]],[Zm],[Zm,{event:"doubletap",taps:2},["tap"]],[Xm]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ov=1,nv=2;function ev(lp,dp){this.options=Hu({},jm.defaults,dp||{}),this.options.inputTarget=this.options.inputTarget||lp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=lp,this.input=Fp(this),this.touchAction=new Lm(this,this.options.touchAction),rv(this,!0),Vu(this.options.recognizers,function(xp){var Dp=this.add(new xp[0](xp[1]));xp[2]&&Dp.recognizeWith(xp[2]),xp[3]&&Dp.requireFailure(xp[3])},this)}ev.prototype={set:function(lp){return Hu(this.options,lp),lp.touchAction&&this.touchAction.update(),lp.inputTarget&&(this.input.destroy(),this.input.target=lp.inputTarget,this.input.init()),this},stop:function(lp){this.session.stopped=lp?nv:ov},recognize:function(lp){var dp=this.session;if(!dp.stopped){this.touchAction.preventDefaults(lp);var xp,Dp=this.recognizers,zp=dp.curRecognizer;(!zp||zp&&zp.state&km)&&(zp=dp.curRecognizer=null);for(var rm=0;rm<Dp.length;)xp=Dp[rm],dp.stopped!==nv&&(!zp||xp==zp||xp.canRecognizeWith(zp))?xp.recognize(lp):xp.reset(),!zp&&xp.state&(Om|Hm|Dm)&&(zp=dp.curRecognizer=xp),rm++}},get:function(lp){if(lp instanceof Pm)return lp;for(var dp=this.recognizers,xp=0;xp<dp.length;xp++)if(dp[xp].options.event==lp)return dp[xp];return null},add:function(lp){if(Nu(lp,"add",this))return this;var dp=this.get(lp.options.event);return dp&&this.remove(dp),this.recognizers.push(lp),lp.manager=this,this.touchAction.update(),lp},remove:function(lp){if(Nu(lp,"remove",this))return this;if(lp=this.get(lp),lp){var dp=this.recognizers,xp=Xu(dp,lp);xp!==-1&&(dp.splice(xp,1),this.touchAction.update())}return this},on:function(lp,dp){if(lp!==Bu&&dp!==Bu){var xp=this.handlers;return Vu(Ku(lp),function(Dp){xp[Dp]=xp[Dp]||[],xp[Dp].push(dp)}),this}},off:function(lp,dp){if(lp!==Bu){var xp=this.handlers;return Vu(Ku(lp),function(Dp){dp?xp[Dp]&&xp[Dp].splice(Xu(xp[Dp],dp),1):delete xp[Dp]}),this}},emit:function(lp,dp){this.options.domEvents&&av(lp,dp);var xp=this.handlers[lp]&&this.handlers[lp].slice();if(!(!xp||!xp.length)){dp.type=lp,dp.preventDefault=function(){dp.srcEvent.preventDefault()};for(var Dp=0;Dp<xp.length;)xp[Dp](dp),Dp++}},destroy:function(){this.element&&rv(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function rv(lp,dp){var xp=lp.element;if(!!xp.style){var Dp;Vu(lp.options.cssProps,function(zp,rm){Dp=_c(xp.style,rm),dp?(lp.oldCssProps[Dp]=xp.style[Dp],xp.style[Dp]=zp):xp.style[Dp]=lp.oldCssProps[Dp]||""}),dp||(lp.oldCssProps={})}}function av(lp,dp){var xp=Cu.createEvent("Event");xp.initEvent(lp,!0,!0),xp.gesture=dp,dp.target.dispatchEvent(xp)}Hu(jm,{INPUT_START:ip,INPUT_MOVE:rp,INPUT_END:fp,INPUT_CANCEL:up,STATE_POSSIBLE:Nm,STATE_BEGAN:Om,STATE_CHANGED:Hm,STATE_ENDED:Dm,STATE_RECOGNIZED:km,STATE_CANCELLED:Tm,STATE_FAILED:bm,DIRECTION_NONE:pp,DIRECTION_LEFT:gp,DIRECTION_RIGHT:Ap,DIRECTION_UP:Mp,DIRECTION_DOWN:$p,DIRECTION_HORIZONTAL:Tp,DIRECTION_VERTICAL:np,DIRECTION_ALL:sp,Manager:ev,Input:Vp,TouchAction:Lm,TouchInput:Xp,MouseInput:mm,PointerEventInput:gm,TouchMouseInput:am,SingleTouchInput:mp,Recognizer:Pm,AttrRecognizer:Cm,Tap:Zm,Pan:Qm,Swipe:Jm,Pinch:Km,Rotate:Gm,Press:Xm,on:Yu,off:Xc,each:Vu,merge:Uu,extend:ju,assign:Hu,inherit:zu,bindFn:Wu,prefixed:_c});var sv=typeof Tu!="undefined"?Tu:typeof self!="undefined"?self:{};sv.Hammer=jm,typeof Bu=="function"&&Bu.amd?Bu(function(){return jm}):_u.exports?_u.exports=jm:Tu[Pu]=jm})(window,document,"Hammer")})(hammer);var objectAssignDeep$1={exports:{}};function getTypeOf(_u){return _u===null?"null":typeof _u=="undefined"?"undefined":typeof _u=="object"?Array.isArray(_u)?"array":"object":typeof _u}function cloneValue(_u){return getTypeOf(_u)==="object"?quickCloneObject(_u):getTypeOf(_u)==="array"?quickCloneArray(_u):_u}function quickCloneArray(_u){return _u.map(cloneValue)}function quickCloneObject(_u){const Tu={};for(const Cu in _u)!_u.hasOwnProperty(Cu)||(Tu[Cu]=cloneValue(_u[Cu]));return Tu}function executeDeepMerge(_u,Tu=[],Cu={}){const Pu={arrayBehaviour:Cu.arrayBehaviour||"replace"},Bu=Tu.map(Lu=>Lu||{}),Ru=_u||{};for(let Lu=0;Lu<Bu.length;Lu++){const Ou=Bu[Lu],Du=Object.keys(Ou);for(let $u=0;$u<Du.length;$u++){const ku=Du[$u],Fu=Ou[ku],Nu=getTypeOf(Fu),Vu=getTypeOf(Ru[ku]);if(Nu==="object")if(Vu!=="undefined"){const Gu=Vu==="object"?Ru[ku]:{};Ru[ku]=executeDeepMerge({},[Gu,quickCloneObject(Fu)],Pu)}else Ru[ku]=quickCloneObject(Fu);else if(Nu==="array")if(Vu==="array"){const Gu=quickCloneArray(Fu);Ru[ku]=Pu.arrayBehaviour==="merge"?Ru[ku].concat(Gu):Gu}else Ru[ku]=quickCloneArray(Fu);else Ru[ku]=Fu}}return Ru}objectAssignDeep$1.exports=function _u(Tu,...Cu){return executeDeepMerge(Tu,Cu)};objectAssignDeep$1.exports.noMutate=function _u(...Tu){return executeDeepMerge({},Tu)};objectAssignDeep$1.exports.withOptions=function _u(Tu,Cu,Pu){return executeDeepMerge(Tu,Cu,Pu)};var objectAssignDeep=objectAssignDeep$1.exports,defaultInstanceSettings={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},defaultTweenSettings={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},validTransforms=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],cache={CSS:{},springs:{}};function minMax(_u,Tu,Cu){return Math.min(Math.max(_u,Tu),Cu)}function stringContains(_u,Tu){return _u.indexOf(Tu)>-1}function applyArguments(_u,Tu){return _u.apply(null,Tu)}var is$1={arr:function(_u){return Array.isArray(_u)},obj:function(_u){return stringContains(Object.prototype.toString.call(_u),"Object")},pth:function(_u){return is$1.obj(_u)&&_u.hasOwnProperty("totalLength")},svg:function(_u){return _u instanceof SVGElement},inp:function(_u){return _u instanceof HTMLInputElement},dom:function(_u){return _u.nodeType||is$1.svg(_u)},str:function(_u){return typeof _u=="string"},fnc:function(_u){return typeof _u=="function"},und:function(_u){return typeof _u=="undefined"},nil:function(_u){return is$1.und(_u)||_u===null},hex:function(_u){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(_u)},rgb:function(_u){return/^rgb/.test(_u)},hsl:function(_u){return/^hsl/.test(_u)},col:function(_u){return is$1.hex(_u)||is$1.rgb(_u)||is$1.hsl(_u)},key:function(_u){return!defaultInstanceSettings.hasOwnProperty(_u)&&!defaultTweenSettings.hasOwnProperty(_u)&&_u!=="targets"&&_u!=="keyframes"}};function parseEasingParameters(_u){var Tu=/\(([^)]+)\)/.exec(_u);return Tu?Tu[1].split(",").map(function(Cu){return parseFloat(Cu)}):[]}function spring(_u,Tu){var Cu=parseEasingParameters(_u),Pu=minMax(is$1.und(Cu[0])?1:Cu[0],.1,100),Bu=minMax(is$1.und(Cu[1])?100:Cu[1],.1,100),Ru=minMax(is$1.und(Cu[2])?10:Cu[2],.1,100),Lu=minMax(is$1.und(Cu[3])?0:Cu[3],.1,100),Ou=Math.sqrt(Bu/Pu),Du=Ru/(2*Math.sqrt(Bu*Pu)),$u=Du<1?Ou*Math.sqrt(1-Du*Du):0,ku=1,Fu=Du<1?(Du*Ou+-Lu)/$u:-Lu+Ou;function Nu(Gu){var Hu=Tu?Tu*Gu/1e3:Gu;return Du<1?Hu=Math.exp(-Hu*Du*Ou)*(ku*Math.cos($u*Hu)+Fu*Math.sin($u*Hu)):Hu=(ku+Fu*Hu)*Math.exp(-Hu*Ou),Gu===0||Gu===1?Gu:1-Hu}function Vu(){var Gu=cache.springs[_u];if(Gu)return Gu;for(var Hu=1/6,ju=0,Uu=0;;)if(ju+=Hu,Nu(ju)===1){if(Uu++,Uu>=16)break}else Uu=0;var zu=ju*Hu*1e3;return cache.springs[_u]=zu,zu}return Tu?Nu:Vu}function steps(_u){return _u===void 0&&(_u=10),function(Tu){return Math.ceil(minMax(Tu,1e-6,1)*_u)*(1/_u)}}var bezier=function(){var _u=11,Tu=1/(_u-1);function Cu(ku,Fu){return 1-3*Fu+3*ku}function Pu(ku,Fu){return 3*Fu-6*ku}function Bu(ku){return 3*ku}function Ru(ku,Fu,Nu){return((Cu(Fu,Nu)*ku+Pu(Fu,Nu))*ku+Bu(Fu))*ku}function Lu(ku,Fu,Nu){return 3*Cu(Fu,Nu)*ku*ku+2*Pu(Fu,Nu)*ku+Bu(Fu)}function Ou(ku,Fu,Nu,Vu,Gu){var Hu,ju,Uu=0;do ju=Fu+(Nu-Fu)/2,Hu=Ru(ju,Vu,Gu)-ku,Hu>0?Nu=ju:Fu=ju;while(Math.abs(Hu)>1e-7&&++Uu<10);return ju}function Du(ku,Fu,Nu,Vu){for(var Gu=0;Gu<4;++Gu){var Hu=Lu(Fu,Nu,Vu);if(Hu===0)return Fu;var ju=Ru(Fu,Nu,Vu)-ku;Fu-=ju/Hu}return Fu}function $u(ku,Fu,Nu,Vu){if(!(0<=ku&&ku<=1&&0<=Nu&&Nu<=1))return;var Gu=new Float32Array(_u);if(ku!==Fu||Nu!==Vu)for(var Hu=0;Hu<_u;++Hu)Gu[Hu]=Ru(Hu*Tu,ku,Nu);function ju(Uu){for(var zu=0,Wu=1,Qu=_u-1;Wu!==Qu&&Gu[Wu]<=Uu;++Wu)zu+=Tu;--Wu;var qu=(Uu-Gu[Wu])/(Gu[Wu+1]-Gu[Wu]),Yu=zu+qu*Tu,Xc=Lu(Yu,ku,Nu);return Xc>=.001?Du(Uu,Yu,ku,Nu):Xc===0?Yu:Ou(Uu,zu,zu+Tu,ku,Nu)}return function(Uu){return ku===Fu&&Nu===Vu||Uu===0||Uu===1?Uu:Ru(ju(Uu),Fu,Vu)}}return $u}(),penner=function(){var _u={linear:function(){return function(Pu){return Pu}}},Tu={Sine:function(){return function(Pu){return 1-Math.cos(Pu*Math.PI/2)}},Circ:function(){return function(Pu){return 1-Math.sqrt(1-Pu*Pu)}},Back:function(){return function(Pu){return Pu*Pu*(3*Pu-2)}},Bounce:function(){return function(Pu){for(var Bu,Ru=4;Pu<((Bu=Math.pow(2,--Ru))-1)/11;);return 1/Math.pow(4,3-Ru)-7.5625*Math.pow((Bu*3-2)/22-Pu,2)}},Elastic:function(Pu,Bu){Pu===void 0&&(Pu=1),Bu===void 0&&(Bu=.5);var Ru=minMax(Pu,1,10),Lu=minMax(Bu,.1,2);return function(Ou){return Ou===0||Ou===1?Ou:-Ru*Math.pow(2,10*(Ou-1))*Math.sin((Ou-1-Lu/(Math.PI*2)*Math.asin(1/Ru))*(Math.PI*2)/Lu)}}},Cu=["Quad","Cubic","Quart","Quint","Expo"];return Cu.forEach(function(Pu,Bu){Tu[Pu]=function(){return function(Ru){return Math.pow(Ru,Bu+2)}}}),Object.keys(Tu).forEach(function(Pu){var Bu=Tu[Pu];_u["easeIn"+Pu]=Bu,_u["easeOut"+Pu]=function(Ru,Lu){return function(Ou){return 1-Bu(Ru,Lu)(1-Ou)}},_u["easeInOut"+Pu]=function(Ru,Lu){return function(Ou){return Ou<.5?Bu(Ru,Lu)(Ou*2)/2:1-Bu(Ru,Lu)(Ou*-2+2)/2}},_u["easeOutIn"+Pu]=function(Ru,Lu){return function(Ou){return Ou<.5?(1-Bu(Ru,Lu)(1-Ou*2))/2:(Bu(Ru,Lu)(Ou*2-1)+1)/2}}}),_u}();function parseEasings(_u,Tu){if(is$1.fnc(_u))return _u;var Cu=_u.split("(")[0],Pu=penner[Cu],Bu=parseEasingParameters(_u);switch(Cu){case"spring":return spring(_u,Tu);case"cubicBezier":return applyArguments(bezier,Bu);case"steps":return applyArguments(steps,Bu);default:return applyArguments(Pu,Bu)}}function selectString(_u){try{var Tu=document.querySelectorAll(_u);return Tu}catch{return}}function filterArray(_u,Tu){for(var Cu=_u.length,Pu=arguments.length>=2?arguments[1]:void 0,Bu=[],Ru=0;Ru<Cu;Ru++)if(Ru in _u){var Lu=_u[Ru];Tu.call(Pu,Lu,Ru,_u)&&Bu.push(Lu)}return Bu}function flattenArray(_u){return _u.reduce(function(Tu,Cu){return Tu.concat(is$1.arr(Cu)?flattenArray(Cu):Cu)},[])}function toArray(_u){return is$1.arr(_u)?_u:(is$1.str(_u)&&(_u=selectString(_u)||_u),_u instanceof NodeList||_u instanceof HTMLCollection?[].slice.call(_u):[_u])}function arrayContains(_u,Tu){return _u.some(function(Cu){return Cu===Tu})}function cloneObject(_u){var Tu={};for(var Cu in _u)Tu[Cu]=_u[Cu];return Tu}function replaceObjectProps(_u,Tu){var Cu=cloneObject(_u);for(var Pu in _u)Cu[Pu]=Tu.hasOwnProperty(Pu)?Tu[Pu]:_u[Pu];return Cu}function mergeObjects(_u,Tu){var Cu=cloneObject(_u);for(var Pu in Tu)Cu[Pu]=is$1.und(_u[Pu])?Tu[Pu]:_u[Pu];return Cu}function rgbToRgba(_u){var Tu=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(_u);return Tu?"rgba("+Tu[1]+",1)":_u}function hexToRgba(_u){var Tu=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Cu=_u.replace(Tu,function(Ou,Du,$u,ku){return Du+Du+$u+$u+ku+ku}),Pu=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Cu),Bu=parseInt(Pu[1],16),Ru=parseInt(Pu[2],16),Lu=parseInt(Pu[3],16);return"rgba("+Bu+","+Ru+","+Lu+",1)"}function hslToRgba(_u){var Tu=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_u)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(_u),Cu=parseInt(Tu[1],10)/360,Pu=parseInt(Tu[2],10)/100,Bu=parseInt(Tu[3],10)/100,Ru=Tu[4]||1;function Lu(Nu,Vu,Gu){return Gu<0&&(Gu+=1),Gu>1&&(Gu-=1),Gu<1/6?Nu+(Vu-Nu)*6*Gu:Gu<1/2?Vu:Gu<2/3?Nu+(Vu-Nu)*(2/3-Gu)*6:Nu}var Ou,Du,$u;if(Pu==0)Ou=Du=$u=Bu;else{var ku=Bu<.5?Bu*(1+Pu):Bu+Pu-Bu*Pu,Fu=2*Bu-ku;Ou=Lu(Fu,ku,Cu+1/3),Du=Lu(Fu,ku,Cu),$u=Lu(Fu,ku,Cu-1/3)}return"rgba("+Ou*255+","+Du*255+","+$u*255+","+Ru+")"}function colorToRgb(_u){if(is$1.rgb(_u))return rgbToRgba(_u);if(is$1.hex(_u))return hexToRgba(_u);if(is$1.hsl(_u))return hslToRgba(_u)}function getUnit(_u){var Tu=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(_u);if(Tu)return Tu[1]}function getTransformUnit(_u){if(stringContains(_u,"translate")||_u==="perspective")return"px";if(stringContains(_u,"rotate")||stringContains(_u,"skew"))return"deg"}function getFunctionValue(_u,Tu){return is$1.fnc(_u)?_u(Tu.target,Tu.id,Tu.total):_u}function getAttribute(_u,Tu){return _u.getAttribute(Tu)}function convertPxToUnit(_u,Tu,Cu){var Pu=getUnit(Tu);if(arrayContains([Cu,"deg","rad","turn"],Pu))return Tu;var Bu=cache.CSS[Tu+Cu];if(!is$1.und(Bu))return Bu;var Ru=100,Lu=document.createElement(_u.tagName),Ou=_u.parentNode&&_u.parentNode!==document?_u.parentNode:document.body;Ou.appendChild(Lu),Lu.style.position="absolute",Lu.style.width=Ru+Cu;var Du=Ru/Lu.offsetWidth;Ou.removeChild(Lu);var $u=Du*parseFloat(Tu);return cache.CSS[Tu+Cu]=$u,$u}function getCSSValue(_u,Tu,Cu){if(Tu in _u.style){var Pu=Tu.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Bu=_u.style[Tu]||getComputedStyle(_u).getPropertyValue(Pu)||"0";return Cu?convertPxToUnit(_u,Bu,Cu):Bu}}function getAnimationType(_u,Tu){if(is$1.dom(_u)&&!is$1.inp(_u)&&(!is$1.nil(getAttribute(_u,Tu))||is$1.svg(_u)&&_u[Tu]))return"attribute";if(is$1.dom(_u)&&arrayContains(validTransforms,Tu))return"transform";if(is$1.dom(_u)&&Tu!=="transform"&&getCSSValue(_u,Tu))return"css";if(_u[Tu]!=null)return"object"}function getElementTransforms(_u){if(!!is$1.dom(_u)){for(var Tu=_u.style.transform||"",Cu=/(\w+)\(([^)]*)\)/g,Pu=new Map,Bu;Bu=Cu.exec(Tu);)Pu.set(Bu[1],Bu[2]);return Pu}}function getTransformValue(_u,Tu,Cu,Pu){var Bu=stringContains(Tu,"scale")?1:0+getTransformUnit(Tu),Ru=getElementTransforms(_u).get(Tu)||Bu;return Cu&&(Cu.transforms.list.set(Tu,Ru),Cu.transforms.last=Tu),Pu?convertPxToUnit(_u,Ru,Pu):Ru}function getOriginalTargetValue(_u,Tu,Cu,Pu){switch(getAnimationType(_u,Tu)){case"transform":return getTransformValue(_u,Tu,Pu,Cu);case"css":return getCSSValue(_u,Tu,Cu);case"attribute":return getAttribute(_u,Tu);default:return _u[Tu]||0}}function getRelativeValue(_u,Tu){var Cu=/^(\*=|\+=|-=)/.exec(_u);if(!Cu)return _u;var Pu=getUnit(_u)||0,Bu=parseFloat(Tu),Ru=parseFloat(_u.replace(Cu[0],""));switch(Cu[0][0]){case"+":return Bu+Ru+Pu;case"-":return Bu-Ru+Pu;case"*":return Bu*Ru+Pu}}function validateValue(_u,Tu){if(is$1.col(_u))return colorToRgb(_u);if(/\s/g.test(_u))return _u;var Cu=getUnit(_u),Pu=Cu?_u.substr(0,_u.length-Cu.length):_u;return Tu?Pu+Tu:Pu}function getDistance(_u,Tu){return Math.sqrt(Math.pow(Tu.x-_u.x,2)+Math.pow(Tu.y-_u.y,2))}function getCircleLength(_u){return Math.PI*2*getAttribute(_u,"r")}function getRectLength(_u){return getAttribute(_u,"width")*2+getAttribute(_u,"height")*2}function getLineLength(_u){return getDistance({x:getAttribute(_u,"x1"),y:getAttribute(_u,"y1")},{x:getAttribute(_u,"x2"),y:getAttribute(_u,"y2")})}function getPolylineLength(_u){for(var Tu=_u.points,Cu=0,Pu,Bu=0;Bu<Tu.numberOfItems;Bu++){var Ru=Tu.getItem(Bu);Bu>0&&(Cu+=getDistance(Pu,Ru)),Pu=Ru}return Cu}function getPolygonLength(_u){var Tu=_u.points;return getPolylineLength(_u)+getDistance(Tu.getItem(Tu.numberOfItems-1),Tu.getItem(0))}function getTotalLength(_u){if(_u.getTotalLength)return _u.getTotalLength();switch(_u.tagName.toLowerCase()){case"circle":return getCircleLength(_u);case"rect":return getRectLength(_u);case"line":return getLineLength(_u);case"polyline":return getPolylineLength(_u);case"polygon":return getPolygonLength(_u)}}function setDashoffset(_u){var Tu=getTotalLength(_u);return _u.setAttribute("stroke-dasharray",Tu),Tu}function getParentSvgEl(_u){for(var Tu=_u.parentNode;is$1.svg(Tu)&&is$1.svg(Tu.parentNode);)Tu=Tu.parentNode;return Tu}function getParentSvg(_u,Tu){var Cu=Tu||{},Pu=Cu.el||getParentSvgEl(_u),Bu=Pu.getBoundingClientRect(),Ru=getAttribute(Pu,"viewBox"),Lu=Bu.width,Ou=Bu.height,Du=Cu.viewBox||(Ru?Ru.split(" "):[0,0,Lu,Ou]);return{el:Pu,viewBox:Du,x:Du[0]/1,y:Du[1]/1,w:Lu,h:Ou,vW:Du[2],vH:Du[3]}}function getPath(_u,Tu){var Cu=is$1.str(_u)?selectString(_u)[0]:_u,Pu=Tu||100;return function(Bu){return{property:Bu,el:Cu,svg:getParentSvg(Cu),totalLength:getTotalLength(Cu)*(Pu/100)}}}function getPathProgress(_u,Tu,Cu){function Pu(ku){ku===void 0&&(ku=0);var Fu=Tu+ku>=1?Tu+ku:0;return _u.el.getPointAtLength(Fu)}var Bu=getParentSvg(_u.el,_u.svg),Ru=Pu(),Lu=Pu(-1),Ou=Pu(1),Du=Cu?1:Bu.w/Bu.vW,$u=Cu?1:Bu.h/Bu.vH;switch(_u.property){case"x":return(Ru.x-Bu.x)*Du;case"y":return(Ru.y-Bu.y)*$u;case"angle":return Math.atan2(Ou.y-Lu.y,Ou.x-Lu.x)*180/Math.PI}}function decomposeValue(_u,Tu){var Cu=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Pu=validateValue(is$1.pth(_u)?_u.totalLength:_u,Tu)+"";return{original:Pu,numbers:Pu.match(Cu)?Pu.match(Cu).map(Number):[0],strings:is$1.str(_u)||Tu?Pu.split(Cu):[]}}function parseTargets(_u){var Tu=_u?flattenArray(is$1.arr(_u)?_u.map(toArray):toArray(_u)):[];return filterArray(Tu,function(Cu,Pu,Bu){return Bu.indexOf(Cu)===Pu})}function getAnimatables(_u){var Tu=parseTargets(_u);return Tu.map(function(Cu,Pu){return{target:Cu,id:Pu,total:Tu.length,transforms:{list:getElementTransforms(Cu)}}})}function normalizePropertyTweens(_u,Tu){var Cu=cloneObject(Tu);if(/^spring/.test(Cu.easing)&&(Cu.duration=spring(Cu.easing)),is$1.arr(_u)){var Pu=_u.length,Bu=Pu===2&&!is$1.obj(_u[0]);Bu?_u={value:_u}:is$1.fnc(Tu.duration)||(Cu.duration=Tu.duration/Pu)}var Ru=is$1.arr(_u)?_u:[_u];return Ru.map(function(Lu,Ou){var Du=is$1.obj(Lu)&&!is$1.pth(Lu)?Lu:{value:Lu};return is$1.und(Du.delay)&&(Du.delay=Ou?0:Tu.delay),is$1.und(Du.endDelay)&&(Du.endDelay=Ou===Ru.length-1?Tu.endDelay:0),Du}).map(function(Lu){return mergeObjects(Lu,Cu)})}function flattenKeyframes(_u){for(var Tu=filterArray(flattenArray(_u.map(function(Ru){return Object.keys(Ru)})),function(Ru){return is$1.key(Ru)}).reduce(function(Ru,Lu){return Ru.indexOf(Lu)<0&&Ru.push(Lu),Ru},[]),Cu={},Pu=function(Ru){var Lu=Tu[Ru];Cu[Lu]=_u.map(function(Ou){var Du={};for(var $u in Ou)is$1.key($u)?$u==Lu&&(Du.value=Ou[$u]):Du[$u]=Ou[$u];return Du})},Bu=0;Bu<Tu.length;Bu++)Pu(Bu);return Cu}function getProperties(_u,Tu){var Cu=[],Pu=Tu.keyframes;Pu&&(Tu=mergeObjects(flattenKeyframes(Pu),Tu));for(var Bu in Tu)is$1.key(Bu)&&Cu.push({name:Bu,tweens:normalizePropertyTweens(Tu[Bu],_u)});return Cu}function normalizeTweenValues(_u,Tu){var Cu={};for(var Pu in _u){var Bu=getFunctionValue(_u[Pu],Tu);is$1.arr(Bu)&&(Bu=Bu.map(function(Ru){return getFunctionValue(Ru,Tu)}),Bu.length===1&&(Bu=Bu[0])),Cu[Pu]=Bu}return Cu.duration=parseFloat(Cu.duration),Cu.delay=parseFloat(Cu.delay),Cu}function normalizeTweens(_u,Tu){var Cu;return _u.tweens.map(function(Pu){var Bu=normalizeTweenValues(Pu,Tu),Ru=Bu.value,Lu=is$1.arr(Ru)?Ru[1]:Ru,Ou=getUnit(Lu),Du=getOriginalTargetValue(Tu.target,_u.name,Ou,Tu),$u=Cu?Cu.to.original:Du,ku=is$1.arr(Ru)?Ru[0]:$u,Fu=getUnit(ku)||getUnit(Du),Nu=Ou||Fu;return is$1.und(Lu)&&(Lu=$u),Bu.from=decomposeValue(ku,Nu),Bu.to=decomposeValue(getRelativeValue(Lu,ku),Nu),Bu.start=Cu?Cu.end:0,Bu.end=Bu.start+Bu.delay+Bu.duration+Bu.endDelay,Bu.easing=parseEasings(Bu.easing,Bu.duration),Bu.isPath=is$1.pth(Ru),Bu.isPathTargetInsideSVG=Bu.isPath&&is$1.svg(Tu.target),Bu.isColor=is$1.col(Bu.from.original),Bu.isColor&&(Bu.round=1),Cu=Bu,Bu})}var setProgressValue={css:function(_u,Tu,Cu){return _u.style[Tu]=Cu},attribute:function(_u,Tu,Cu){return _u.setAttribute(Tu,Cu)},object:function(_u,Tu,Cu){return _u[Tu]=Cu},transform:function(_u,Tu,Cu,Pu,Bu){if(Pu.list.set(Tu,Cu),Tu===Pu.last||Bu){var Ru="";Pu.list.forEach(function(Lu,Ou){Ru+=Ou+"("+Lu+") "}),_u.style.transform=Ru}}};function setTargetsValue(_u,Tu){var Cu=getAnimatables(_u);Cu.forEach(function(Pu){for(var Bu in Tu){var Ru=getFunctionValue(Tu[Bu],Pu),Lu=Pu.target,Ou=getUnit(Ru),Du=getOriginalTargetValue(Lu,Bu,Ou,Pu),$u=Ou||getUnit(Du),ku=getRelativeValue(validateValue(Ru,$u),Du),Fu=getAnimationType(Lu,Bu);setProgressValue[Fu](Lu,Bu,ku,Pu.transforms,!0)}})}function createAnimation(_u,Tu){var Cu=getAnimationType(_u.target,Tu.name);if(Cu){var Pu=normalizeTweens(Tu,_u),Bu=Pu[Pu.length-1];return{type:Cu,property:Tu.name,animatable:_u,tweens:Pu,duration:Bu.end,delay:Pu[0].delay,endDelay:Bu.endDelay}}}function getAnimations(_u,Tu){return filterArray(flattenArray(_u.map(function(Cu){return Tu.map(function(Pu){return createAnimation(Cu,Pu)})})),function(Cu){return!is$1.und(Cu)})}function getInstanceTimings(_u,Tu){var Cu=_u.length,Pu=function(Ru){return Ru.timelineOffset?Ru.timelineOffset:0},Bu={};return Bu.duration=Cu?Math.max.apply(Math,_u.map(function(Ru){return Pu(Ru)+Ru.duration})):Tu.duration,Bu.delay=Cu?Math.min.apply(Math,_u.map(function(Ru){return Pu(Ru)+Ru.delay})):Tu.delay,Bu.endDelay=Cu?Bu.duration-Math.max.apply(Math,_u.map(function(Ru){return Pu(Ru)+Ru.duration-Ru.endDelay})):Tu.endDelay,Bu}var instanceID=0;function createNewInstance(_u){var Tu=replaceObjectProps(defaultInstanceSettings,_u),Cu=replaceObjectProps(defaultTweenSettings,_u),Pu=getProperties(Cu,_u),Bu=getAnimatables(_u.targets),Ru=getAnimations(Bu,Pu),Lu=getInstanceTimings(Ru,Cu),Ou=instanceID;return instanceID++,mergeObjects(Tu,{id:Ou,children:[],animatables:Bu,animations:Ru,duration:Lu.duration,delay:Lu.delay,endDelay:Lu.endDelay})}var activeInstances=[],engine=function(){var _u;function Tu(){!_u&&(!isDocumentHidden()||!anime.suspendWhenDocumentHidden)&&activeInstances.length>0&&(_u=requestAnimationFrame(Cu))}function Cu(Bu){for(var Ru=activeInstances.length,Lu=0;Lu<Ru;){var Ou=activeInstances[Lu];Ou.paused?(activeInstances.splice(Lu,1),Ru--):(Ou.tick(Bu),Lu++)}_u=Lu>0?requestAnimationFrame(Cu):void 0}function Pu(){!anime.suspendWhenDocumentHidden||(isDocumentHidden()?_u=cancelAnimationFrame(_u):(activeInstances.forEach(function(Bu){return Bu._onDocumentVisibility()}),engine()))}return typeof document!="undefined"&&document.addEventListener("visibilitychange",Pu),Tu}();function isDocumentHidden(){return!!document&&document.hidden}function anime(_u){_u===void 0&&(_u={});var Tu=0,Cu=0,Pu=0,Bu,Ru=0,Lu=null;function Ou(zu){var Wu=window.Promise&&new Promise(function(Qu){return Lu=Qu});return zu.finished=Wu,Wu}var Du=createNewInstance(_u);Ou(Du);function $u(){var zu=Du.direction;zu!=="alternate"&&(Du.direction=zu!=="normal"?"normal":"reverse"),Du.reversed=!Du.reversed,Bu.forEach(function(Wu){return Wu.reversed=Du.reversed})}function ku(zu){return Du.reversed?Du.duration-zu:zu}function Fu(){Tu=0,Cu=ku(Du.currentTime)*(1/anime.speed)}function Nu(zu,Wu){Wu&&Wu.seek(zu-Wu.timelineOffset)}function Vu(zu){if(Du.reversePlayback)for(var Qu=Ru;Qu--;)Nu(zu,Bu[Qu]);else for(var Wu=0;Wu<Ru;Wu++)Nu(zu,Bu[Wu])}function Gu(zu){for(var Wu=0,Qu=Du.animations,qu=Qu.length;Wu<qu;){var Yu=Qu[Wu],Xc=Yu.animatable,_h=Yu.tweens,_d=_h.length-1,Ku=_h[_d];_d&&(Ku=filterArray(_h,function(Ep){return zu<Ep.end})[0]||Ku);for(var Xu=minMax(zu-Ku.start-Ku.delay,0,Ku.duration)/Ku.duration,Ju=isNaN(Xu)?1:Ku.easing(Xu),Zu=Ku.to.strings,_c=Ku.round,_f=[],ep=Ku.to.numbers.length,tp=void 0,op=0;op<ep;op++){var hp=void 0,cp=Ku.to.numbers[op],Sp=Ku.from.numbers[op]||0;Ku.isPath?hp=getPathProgress(Ku.value,Ju*cp,Ku.isPathTargetInsideSVG):hp=Sp+Ju*(cp-Sp),_c&&(Ku.isColor&&op>2||(hp=Math.round(hp*_c)/_c)),_f.push(hp)}var yp=Zu.length;if(!yp)tp=_f[0];else{tp=Zu[0];for(var Rp=0;Rp<yp;Rp++){Zu[Rp];var wp=Zu[Rp+1],Pp=_f[Rp];isNaN(Pp)||(wp?tp+=Pp+wp:tp+=Pp+" ")}}setProgressValue[Yu.type](Xc.target,Yu.property,tp,Xc.transforms),Yu.currentValue=tp,Wu++}}function Hu(zu){Du[zu]&&!Du.passThrough&&Du[zu](Du)}function ju(){Du.remaining&&Du.remaining!==!0&&Du.remaining--}function Uu(zu){var Wu=Du.duration,Qu=Du.delay,qu=Wu-Du.endDelay,Yu=ku(zu);Du.progress=minMax(Yu/Wu*100,0,100),Du.reversePlayback=Yu<Du.currentTime,Bu&&Vu(Yu),!Du.began&&Du.currentTime>0&&(Du.began=!0,Hu("begin")),!Du.loopBegan&&Du.currentTime>0&&(Du.loopBegan=!0,Hu("loopBegin")),Yu<=Qu&&Du.currentTime!==0&&Gu(0),(Yu>=qu&&Du.currentTime!==Wu||!Wu)&&Gu(Wu),Yu>Qu&&Yu<qu?(Du.changeBegan||(Du.changeBegan=!0,Du.changeCompleted=!1,Hu("changeBegin")),Hu("change"),Gu(Yu)):Du.changeBegan&&(Du.changeCompleted=!0,Du.changeBegan=!1,Hu("changeComplete")),Du.currentTime=minMax(Yu,0,Wu),Du.began&&Hu("update"),zu>=Wu&&(Cu=0,ju(),Du.remaining?(Tu=Pu,Hu("loopComplete"),Du.loopBegan=!1,Du.direction==="alternate"&&$u()):(Du.paused=!0,Du.completed||(Du.completed=!0,Hu("loopComplete"),Hu("complete"),!Du.passThrough&&"Promise"in window&&(Lu(),Ou(Du)))))}return Du.reset=function(){var zu=Du.direction;Du.passThrough=!1,Du.currentTime=0,Du.progress=0,Du.paused=!0,Du.began=!1,Du.loopBegan=!1,Du.changeBegan=!1,Du.completed=!1,Du.changeCompleted=!1,Du.reversePlayback=!1,Du.reversed=zu==="reverse",Du.remaining=Du.loop,Bu=Du.children,Ru=Bu.length;for(var Wu=Ru;Wu--;)Du.children[Wu].reset();(Du.reversed&&Du.loop!==!0||zu==="alternate"&&Du.loop===1)&&Du.remaining++,Gu(Du.reversed?Du.duration:0)},Du._onDocumentVisibility=Fu,Du.set=function(zu,Wu){return setTargetsValue(zu,Wu),Du},Du.tick=function(zu){Pu=zu,Tu||(Tu=Pu),Uu((Pu+(Cu-Tu))*anime.speed)},Du.seek=function(zu){Uu(ku(zu))},Du.pause=function(){Du.paused=!0,Fu()},Du.play=function(){!Du.paused||(Du.completed&&Du.reset(),Du.paused=!1,activeInstances.push(Du),Fu(),engine())},Du.reverse=function(){$u(),Du.completed=!Du.reversed,Fu()},Du.restart=function(){Du.reset(),Du.play()},Du.remove=function(zu){var Wu=parseTargets(zu);removeTargetsFromInstance(Wu,Du)},Du.reset(),Du.autoplay&&Du.play(),Du}function removeTargetsFromAnimations(_u,Tu){for(var Cu=Tu.length;Cu--;)arrayContains(_u,Tu[Cu].animatable.target)&&Tu.splice(Cu,1)}function removeTargetsFromInstance(_u,Tu){var Cu=Tu.animations,Pu=Tu.children;removeTargetsFromAnimations(_u,Cu);for(var Bu=Pu.length;Bu--;){var Ru=Pu[Bu],Lu=Ru.animations;removeTargetsFromAnimations(_u,Lu),!Lu.length&&!Ru.children.length&&Pu.splice(Bu,1)}!Cu.length&&!Pu.length&&Tu.pause()}function removeTargetsFromActiveInstances(_u){for(var Tu=parseTargets(_u),Cu=activeInstances.length;Cu--;){var Pu=activeInstances[Cu];removeTargetsFromInstance(Tu,Pu)}}function stagger(_u,Tu){Tu===void 0&&(Tu={});var Cu=Tu.direction||"normal",Pu=Tu.easing?parseEasings(Tu.easing):null,Bu=Tu.grid,Ru=Tu.axis,Lu=Tu.from||0,Ou=Lu==="first",Du=Lu==="center",$u=Lu==="last",ku=is$1.arr(_u),Fu=parseFloat(ku?_u[0]:_u),Nu=ku?parseFloat(_u[1]):0,Vu=getUnit(ku?_u[1]:_u)||0,Gu=Tu.start||0+(ku?Fu:0),Hu=[],ju=0;return function(Uu,zu,Wu){if(Ou&&(Lu=0),Du&&(Lu=(Wu-1)/2),$u&&(Lu=Wu-1),!Hu.length){for(var Qu=0;Qu<Wu;Qu++){if(!Bu)Hu.push(Math.abs(Lu-Qu));else{var qu=Du?(Bu[0]-1)/2:Lu%Bu[0],Yu=Du?(Bu[1]-1)/2:Math.floor(Lu/Bu[0]),Xc=Qu%Bu[0],_h=Math.floor(Qu/Bu[0]),_d=qu-Xc,Ku=Yu-_h,Xu=Math.sqrt(_d*_d+Ku*Ku);Ru==="x"&&(Xu=-_d),Ru==="y"&&(Xu=-Ku),Hu.push(Xu)}ju=Math.max.apply(Math,Hu)}Pu&&(Hu=Hu.map(function(Zu){return Pu(Zu/ju)*ju})),Cu==="reverse"&&(Hu=Hu.map(function(Zu){return Ru?Zu<0?Zu*-1:-Zu:Math.abs(ju-Zu)}))}var Ju=ku?(Nu-Fu)/ju:Fu;return Gu+Ju*(Math.round(Hu[zu]*100)/100)+Vu}}function timeline(_u){_u===void 0&&(_u={});var Tu=anime(_u);return Tu.duration=0,Tu.add=function(Cu,Pu){var Bu=activeInstances.indexOf(Tu),Ru=Tu.children;Bu>-1&&activeInstances.splice(Bu,1);function Lu(Nu){Nu.passThrough=!0}for(var Ou=0;Ou<Ru.length;Ou++)Lu(Ru[Ou]);var Du=mergeObjects(Cu,replaceObjectProps(defaultTweenSettings,_u));Du.targets=Du.targets||_u.targets;var $u=Tu.duration;Du.autoplay=!1,Du.direction=Tu.direction,Du.timelineOffset=is$1.und(Pu)?$u:getRelativeValue(Pu,$u),Lu(Tu),Tu.seek(Du.timelineOffset);var ku=anime(Du);Lu(ku),Ru.push(ku);var Fu=getInstanceTimings(Ru,_u);return Tu.delay=Fu.delay,Tu.endDelay=Fu.endDelay,Tu.duration=Fu.duration,Tu.seek(0),Tu.reset(),Tu.autoplay&&Tu.play(),Tu},Tu}anime.version="3.2.1";anime.speed=1;anime.suspendWhenDocumentHidden=!0;anime.running=activeInstances;anime.remove=removeTargetsFromActiveInstances;anime.get=getOriginalTargetValue;anime.set=setTargetsValue;anime.convertPx=convertPxToUnit;anime.path=getPath;anime.setDashoffset=setDashoffset;anime.stagger=stagger;anime.timeline=timeline;anime.easing=parseEasings;anime.penner=penner;anime.random=function(_u,Tu){return Math.floor(Math.random()*(Tu-_u+1))+_u};function isObject$2(_u){return _u!==null&&typeof _u=="object"&&"constructor"in _u&&_u.constructor===Object}function extend$2(_u={},Tu={}){Object.keys(Tu).forEach(Cu=>{typeof _u[Cu]=="undefined"?_u[Cu]=Tu[Cu]:isObject$2(Tu[Cu])&&isObject$2(_u[Cu])&&Object.keys(Tu[Cu]).length>0&&extend$2(_u[Cu],Tu[Cu])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const _u=typeof document!="undefined"?document:{};return extend$2(_u,ssrDocument),_u}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function _u(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(_u){return typeof setTimeout=="undefined"?(_u(),null):setTimeout(_u,0)},cancelAnimationFrame(_u){typeof setTimeout!="undefined"&&clearTimeout(_u)}};function getWindow(){const _u=typeof window!="undefined"?window:{};return extend$2(_u,ssrWindow),_u}function makeReactive(_u){const Tu=_u.__proto__;Object.defineProperty(_u,"__proto__",{get(){return Tu},set(Cu){Tu.__proto__=Cu}})}class Dom7 extends Array{constructor(Tu){typeof Tu=="number"?super(Tu):(super(...Tu||[]),makeReactive(this))}}function arrayFlat(_u=[]){const Tu=[];return _u.forEach(Cu=>{Array.isArray(Cu)?Tu.push(...arrayFlat(Cu)):Tu.push(Cu)}),Tu}function arrayFilter(_u,Tu){return Array.prototype.filter.call(_u,Tu)}function arrayUnique(_u){const Tu=[];for(let Cu=0;Cu<_u.length;Cu+=1)Tu.indexOf(_u[Cu])===-1&&Tu.push(_u[Cu]);return Tu}function qsa(_u,Tu){if(typeof _u!="string")return[_u];const Cu=[],Pu=Tu.querySelectorAll(_u);for(let Bu=0;Bu<Pu.length;Bu+=1)Cu.push(Pu[Bu]);return Cu}function $(_u,Tu){const Cu=getWindow(),Pu=getDocument();let Bu=[];if(!Tu&&_u instanceof Dom7)return _u;if(!_u)return new Dom7(Bu);if(typeof _u=="string"){const Ru=_u.trim();if(Ru.indexOf("<")>=0&&Ru.indexOf(">")>=0){let Lu="div";Ru.indexOf("<li")===0&&(Lu="ul"),Ru.indexOf("<tr")===0&&(Lu="tbody"),(Ru.indexOf("<td")===0||Ru.indexOf("<th")===0)&&(Lu="tr"),Ru.indexOf("<tbody")===0&&(Lu="table"),Ru.indexOf("<option")===0&&(Lu="select");const Ou=Pu.createElement(Lu);Ou.innerHTML=Ru;for(let Du=0;Du<Ou.childNodes.length;Du+=1)Bu.push(Ou.childNodes[Du])}else Bu=qsa(_u.trim(),Tu||Pu)}else if(_u.nodeType||_u===Cu||_u===Pu)Bu.push(_u);else if(Array.isArray(_u)){if(_u instanceof Dom7)return _u;Bu=_u}return new Dom7(arrayUnique(Bu))}$.fn=Dom7.prototype;function addClass(..._u){const Tu=arrayFlat(_u.map(Cu=>Cu.split(" ")));return this.forEach(Cu=>{Cu.classList.add(...Tu)}),this}function removeClass(..._u){const Tu=arrayFlat(_u.map(Cu=>Cu.split(" ")));return this.forEach(Cu=>{Cu.classList.remove(...Tu)}),this}function toggleClass(..._u){const Tu=arrayFlat(_u.map(Cu=>Cu.split(" ")));this.forEach(Cu=>{Tu.forEach(Pu=>{Cu.classList.toggle(Pu)})})}function hasClass(..._u){const Tu=arrayFlat(_u.map(Cu=>Cu.split(" ")));return arrayFilter(this,Cu=>Tu.filter(Pu=>Cu.classList.contains(Pu)).length>0).length>0}function attr(_u,Tu){if(arguments.length===1&&typeof _u=="string")return this[0]?this[0].getAttribute(_u):void 0;for(let Cu=0;Cu<this.length;Cu+=1)if(arguments.length===2)this[Cu].setAttribute(_u,Tu);else for(const Pu in _u)this[Cu][Pu]=_u[Pu],this[Cu].setAttribute(Pu,_u[Pu]);return this}function removeAttr(_u){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].removeAttribute(_u);return this}function transform(_u){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].style.transform=_u;return this}function transition$1(_u){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].style.transitionDuration=typeof _u!="string"?`${_u}ms`:_u;return this}function on(..._u){let[Tu,Cu,Pu,Bu]=_u;typeof _u[1]=="function"&&([Tu,Pu,Bu]=_u,Cu=void 0),Bu||(Bu=!1);function Ru($u){const ku=$u.target;if(!ku)return;const Fu=$u.target.dom7EventData||[];if(Fu.indexOf($u)<0&&Fu.unshift($u),$(ku).is(Cu))Pu.apply(ku,Fu);else{const Nu=$(ku).parents();for(let Vu=0;Vu<Nu.length;Vu+=1)$(Nu[Vu]).is(Cu)&&Pu.apply(Nu[Vu],Fu)}}function Lu($u){const ku=$u&&$u.target?$u.target.dom7EventData||[]:[];ku.indexOf($u)<0&&ku.unshift($u),Pu.apply(this,ku)}const Ou=Tu.split(" ");let Du;for(let $u=0;$u<this.length;$u+=1){const ku=this[$u];if(Cu)for(Du=0;Du<Ou.length;Du+=1){const Fu=Ou[Du];ku.dom7LiveListeners||(ku.dom7LiveListeners={}),ku.dom7LiveListeners[Fu]||(ku.dom7LiveListeners[Fu]=[]),ku.dom7LiveListeners[Fu].push({listener:Pu,proxyListener:Ru}),ku.addEventListener(Fu,Ru,Bu)}else for(Du=0;Du<Ou.length;Du+=1){const Fu=Ou[Du];ku.dom7Listeners||(ku.dom7Listeners={}),ku.dom7Listeners[Fu]||(ku.dom7Listeners[Fu]=[]),ku.dom7Listeners[Fu].push({listener:Pu,proxyListener:Lu}),ku.addEventListener(Fu,Lu,Bu)}}return this}function off(..._u){let[Tu,Cu,Pu,Bu]=_u;typeof _u[1]=="function"&&([Tu,Pu,Bu]=_u,Cu=void 0),Bu||(Bu=!1);const Ru=Tu.split(" ");for(let Lu=0;Lu<Ru.length;Lu+=1){const Ou=Ru[Lu];for(let Du=0;Du<this.length;Du+=1){const $u=this[Du];let ku;if(!Cu&&$u.dom7Listeners?ku=$u.dom7Listeners[Ou]:Cu&&$u.dom7LiveListeners&&(ku=$u.dom7LiveListeners[Ou]),ku&&ku.length)for(let Fu=ku.length-1;Fu>=0;Fu-=1){const Nu=ku[Fu];Pu&&Nu.listener===Pu||Pu&&Nu.listener&&Nu.listener.dom7proxy&&Nu.listener.dom7proxy===Pu?($u.removeEventListener(Ou,Nu.proxyListener,Bu),ku.splice(Fu,1)):Pu||($u.removeEventListener(Ou,Nu.proxyListener,Bu),ku.splice(Fu,1))}}}return this}function trigger(..._u){const Tu=getWindow(),Cu=_u[0].split(" "),Pu=_u[1];for(let Bu=0;Bu<Cu.length;Bu+=1){const Ru=Cu[Bu];for(let Lu=0;Lu<this.length;Lu+=1){const Ou=this[Lu];if(Tu.CustomEvent){const Du=new Tu.CustomEvent(Ru,{detail:Pu,bubbles:!0,cancelable:!0});Ou.dom7EventData=_u.filter(($u,ku)=>ku>0),Ou.dispatchEvent(Du),Ou.dom7EventData=[],delete Ou.dom7EventData}}}return this}function transitionEnd$1(_u){const Tu=this;function Cu(Pu){Pu.target===this&&(_u.call(this,Pu),Tu.off("transitionend",Cu))}return _u&&Tu.on("transitionend",Cu),this}function outerWidth(_u){if(this.length>0){if(_u){const Tu=this.styles();return this[0].offsetWidth+parseFloat(Tu.getPropertyValue("margin-right"))+parseFloat(Tu.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function outerHeight(_u){if(this.length>0){if(_u){const Tu=this.styles();return this[0].offsetHeight+parseFloat(Tu.getPropertyValue("margin-top"))+parseFloat(Tu.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function offset(){if(this.length>0){const _u=getWindow(),Tu=getDocument(),Cu=this[0],Pu=Cu.getBoundingClientRect(),Bu=Tu.body,Ru=Cu.clientTop||Bu.clientTop||0,Lu=Cu.clientLeft||Bu.clientLeft||0,Ou=Cu===_u?_u.scrollY:Cu.scrollTop,Du=Cu===_u?_u.scrollX:Cu.scrollLeft;return{top:Pu.top+Ou-Ru,left:Pu.left+Du-Lu}}return null}function styles(){const _u=getWindow();return this[0]?_u.getComputedStyle(this[0],null):{}}function css(_u,Tu){const Cu=getWindow();let Pu;if(arguments.length===1)if(typeof _u=="string"){if(this[0])return Cu.getComputedStyle(this[0],null).getPropertyValue(_u)}else{for(Pu=0;Pu<this.length;Pu+=1)for(const Bu in _u)this[Pu].style[Bu]=_u[Bu];return this}if(arguments.length===2&&typeof _u=="string"){for(Pu=0;Pu<this.length;Pu+=1)this[Pu].style[_u]=Tu;return this}return this}function each(_u){return _u?(this.forEach((Tu,Cu)=>{_u.apply(Tu,[Tu,Cu])}),this):this}function filter(_u){const Tu=arrayFilter(this,_u);return $(Tu)}function html(_u){if(typeof _u=="undefined")return this[0]?this[0].innerHTML:null;for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].innerHTML=_u;return this}function text(_u){if(typeof _u=="undefined")return this[0]?this[0].textContent.trim():null;for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].textContent=_u;return this}function is(_u){const Tu=getWindow(),Cu=getDocument(),Pu=this[0];let Bu,Ru;if(!Pu||typeof _u=="undefined")return!1;if(typeof _u=="string"){if(Pu.matches)return Pu.matches(_u);if(Pu.webkitMatchesSelector)return Pu.webkitMatchesSelector(_u);if(Pu.msMatchesSelector)return Pu.msMatchesSelector(_u);for(Bu=$(_u),Ru=0;Ru<Bu.length;Ru+=1)if(Bu[Ru]===Pu)return!0;return!1}if(_u===Cu)return Pu===Cu;if(_u===Tu)return Pu===Tu;if(_u.nodeType||_u instanceof Dom7){for(Bu=_u.nodeType?[_u]:_u,Ru=0;Ru<Bu.length;Ru+=1)if(Bu[Ru]===Pu)return!0;return!1}return!1}function index(){let _u=this[0],Tu;if(_u){for(Tu=0;(_u=_u.previousSibling)!==null;)_u.nodeType===1&&(Tu+=1);return Tu}}function eq(_u){if(typeof _u=="undefined")return this;const Tu=this.length;if(_u>Tu-1)return $([]);if(_u<0){const Cu=Tu+_u;return Cu<0?$([]):$([this[Cu]])}return $([this[_u]])}function append(..._u){let Tu;const Cu=getDocument();for(let Pu=0;Pu<_u.length;Pu+=1){Tu=_u[Pu];for(let Bu=0;Bu<this.length;Bu+=1)if(typeof Tu=="string"){const Ru=Cu.createElement("div");for(Ru.innerHTML=Tu;Ru.firstChild;)this[Bu].appendChild(Ru.firstChild)}else if(Tu instanceof Dom7)for(let Ru=0;Ru<Tu.length;Ru+=1)this[Bu].appendChild(Tu[Ru]);else this[Bu].appendChild(Tu)}return this}function prepend(_u){const Tu=getDocument();let Cu,Pu;for(Cu=0;Cu<this.length;Cu+=1)if(typeof _u=="string"){const Bu=Tu.createElement("div");for(Bu.innerHTML=_u,Pu=Bu.childNodes.length-1;Pu>=0;Pu-=1)this[Cu].insertBefore(Bu.childNodes[Pu],this[Cu].childNodes[0])}else if(_u instanceof Dom7)for(Pu=0;Pu<_u.length;Pu+=1)this[Cu].insertBefore(_u[Pu],this[Cu].childNodes[0]);else this[Cu].insertBefore(_u,this[Cu].childNodes[0]);return this}function next(_u){return this.length>0?_u?this[0].nextElementSibling&&$(this[0].nextElementSibling).is(_u)?$([this[0].nextElementSibling]):$([]):this[0].nextElementSibling?$([this[0].nextElementSibling]):$([]):$([])}function nextAll(_u){const Tu=[];let Cu=this[0];if(!Cu)return $([]);for(;Cu.nextElementSibling;){const Pu=Cu.nextElementSibling;_u?$(Pu).is(_u)&&Tu.push(Pu):Tu.push(Pu),Cu=Pu}return $(Tu)}function prev(_u){if(this.length>0){const Tu=this[0];return _u?Tu.previousElementSibling&&$(Tu.previousElementSibling).is(_u)?$([Tu.previousElementSibling]):$([]):Tu.previousElementSibling?$([Tu.previousElementSibling]):$([])}return $([])}function prevAll(_u){const Tu=[];let Cu=this[0];if(!Cu)return $([]);for(;Cu.previousElementSibling;){const Pu=Cu.previousElementSibling;_u?$(Pu).is(_u)&&Tu.push(Pu):Tu.push(Pu),Cu=Pu}return $(Tu)}function parent(_u){const Tu=[];for(let Cu=0;Cu<this.length;Cu+=1)this[Cu].parentNode!==null&&(_u?$(this[Cu].parentNode).is(_u)&&Tu.push(this[Cu].parentNode):Tu.push(this[Cu].parentNode));return $(Tu)}function parents(_u){const Tu=[];for(let Cu=0;Cu<this.length;Cu+=1){let Pu=this[Cu].parentNode;for(;Pu;)_u?$(Pu).is(_u)&&Tu.push(Pu):Tu.push(Pu),Pu=Pu.parentNode}return $(Tu)}function closest(_u){let Tu=this;return typeof _u=="undefined"?$([]):(Tu.is(_u)||(Tu=Tu.parents(_u).eq(0)),Tu)}function find(_u){const Tu=[];for(let Cu=0;Cu<this.length;Cu+=1){const Pu=this[Cu].querySelectorAll(_u);for(let Bu=0;Bu<Pu.length;Bu+=1)Tu.push(Pu[Bu])}return $(Tu)}function children(_u){const Tu=[];for(let Cu=0;Cu<this.length;Cu+=1){const Pu=this[Cu].children;for(let Bu=0;Bu<Pu.length;Bu+=1)(!_u||$(Pu[Bu]).is(_u))&&Tu.push(Pu[Bu])}return $(Tu)}function remove(){for(let _u=0;_u<this.length;_u+=1)this[_u].parentNode&&this[_u].parentNode.removeChild(this[_u]);return this}var swiper_min="",autoplay_min="";function createSymbol(_u){return typeof Symbol=="undefined"?`$Symbol<${_u}>$`:Symbol(_u)}const EVENT_SYMBOL=createSymbol("$$EVENT$$");function __generateEventIfNotExisted(_u){return _u[EVENT_SYMBOL]||(_u[EVENT_SYMBOL]={}),_u[EVENT_SYMBOL]}function __removeEventIfNotExisted(_u){_u[EVENT_SYMBOL]||delete _u[EVENT_SYMBOL]}class Subscribe{hasListener(Tu){const Cu=__generateEventIfNotExisted(this);return Boolean((Cu==null?void 0:Cu[Tu])&&Cu[Tu].length>0)}on(Tu,Cu,Pu){const Bu=__generateEventIfNotExisted(this);return Bu[Tu]||(Bu[Tu]=[]),Bu[Tu].push([Cu,Pu||!1]),()=>this.off(Tu,Cu)}once(Tu,Cu){return this.on(Tu,Cu,!0)}off(Tu,Cu){if(Tu===void 0){__removeEventIfNotExisted(this);return}const Pu=__generateEventIfNotExisted(this);if(Pu[Tu]||(Pu[Tu]=[]),Cu===void 0){Pu[Tu].length=0;return}let Bu=0;for(;Bu<Pu[Tu].length&&Pu[Tu][Bu][0]!==Cu;Bu++);Bu<Pu[Tu].length&&Pu[Tu].splice(Bu,1)}emit(Tu,...Cu){let Pu=!1;const Ru=__generateEventIfNotExisted(this)[Tu]||[];for(let Lu of Ru.slice()){const[Ou,Du=!1]=Lu,$u=Ou(...Cu);Du&&this.off(Tu,Ou),$u===!1&&(Pu=!0)}return Pu}}function centerPoint$1(_u,Tu){return new Vector3((_u.x+Tu.x)/2,(_u.y+Tu.y)/2,(_u.z+Tu.z)/2)}function evenNumber$1(_u,Tu){const Cu=Math.round(_u);return Cu%2===0?Cu:Cu+Number(Tu!=null&&Tu.smaller?-1:1)}function random$1(){return Math.random().toString(36).slice(-6)}const positionToVector3=({x:_u,y:Tu,z:Cu})=>new Vector3(_u,Tu,Cu),arrayPositionToVector3=([_u,Tu,Cu])=>new Vector3(_u,Tu,Cu),anyPositionToVector3=_u=>_u instanceof Vector3?_u:Array.isArray(_u)?arrayPositionToVector3(_u):positionToVector3(_u),VERSION$7="1.0.0",NAME$1=`CSS3DObjectPlus@${VERSION$7}`,MinRatio=.00216,DefaultRatio=.003;class CSS3DObjectPlus extends CSS3DObject{constructor(Tu,Cu,Pu=DefaultRatio,Bu=1){const Ru=Math.max(MinRatio,Pu),Lu=Cu[0].distanceTo(Cu[1]),Ou=Cu[1].distanceTo(Cu[2]),Du=evenNumber$1(Lu/Pu*Bu),$u=evenNumber$1(Ou/Pu*Bu),ku=centerPoint$1(Cu[0],Cu[2]);let Fu;if(Ru===Pu)Tu.style.width=`${Du}px`,Tu.style.height=`${$u}px`,Fu=Tu;else{const zu=document.createElement("div");zu.style.width=`${Du}px`,zu.style.height=`${$u}px`,zu.style.pointerEvents="none";const Wu=Pu/Ru;Tu.style.position="absolute",Tu.style.left="0",Tu.style.top="0",Tu.style.width=`${Wu*Du}px`,Tu.style.height=`${Wu*$u}px`,zu.appendChild(Tu),Fu=zu}if(super(Fu),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:VERSION$7}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"domWidthPx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"domHeightPx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cornerPoints",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ratio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"centerPosition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.scale.set(Ru,Ru,Ru),this.cornerPoints=Cu,this.ratio=Pu,this.container=Tu,Ru===Pu)this.width=Lu,this.height=Ou,this.domWidthPx=Du,this.domHeightPx=$u,this.centerPosition=ku;else{const zu=Pu/Ru;this.width=zu*Lu,this.height=zu*Ou,this.domWidthPx=zu*Du,this.domHeightPx=zu*$u,this.centerPosition=new Vector3().subVectors(ku.clone(),Cu[0].clone()).multiplyScalar(zu).add(Cu[0])}Tu.classList.add(`${NAME$1}__container`);const Nu=new Vector3(1,0,0),Vu=new Vector3(0,1,0),Gu=new Vector3().subVectors(Cu[1],Cu[0]),Hu=new Vector3().subVectors(Cu[2],Cu[1]),ju=new Quaternion().setFromUnitVectors(Nu.normalize(),Gu.normalize());this.applyQuaternion(ju),Vu.applyQuaternion(ju);const Uu=new Quaternion().setFromUnitVectors(Vu.normalize(),Hu.normalize());this.applyQuaternion(Uu),this.position.set(ku.x,ku.y,ku.z)}}const VERSION$6="v2.0.0",PLUGIN_NAME$5="CSS3DRenderer",PLUGIN$3=`${PLUGIN_NAME$5}@${VERSION$6}`,pluginFlag$2=_u=>`${PLUGIN$3}--${_u}`,globalStore={};class CSS3DRender{constructor(){Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:new Subscribe}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{enabled:!0,visible:!0,disposed:!1}}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{disposers:[],frontModeCSS3DObjects:{},behindModeCSS3DObjects:{}}}),Object.defineProperty(this,"create3DElement",{enumerable:!0,configurable:!0,writable:!0,value:(Tu,Cu,Pu)=>{if(this.state.disposed)return this.disposedErrorLog();const Bu=(()=>{const Zu={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none"};return Object.assign(Zu,Pu)})(),Ru=Cu.map(anyPositionToVector3);if((Ru==null?void 0:Ru.length)<4)return console.error(`${PLUGIN$3}: requires 4 point but params may have fewer`);const{ratio:Lu,devicePixelRatio:Ou,mode:Du,autoRender:$u,container:ku,pointerEvents:Fu}=Bu,Nu=[],{css3DObject:Vu,opacityMesh:Gu}=this.createObject(Ru,{ratio:Lu,dpr:Ou,container:ku,mode:Du,pointerEvents:Fu});ku.id=`container--${Vu.uuid}`;const Hu=Du==="front"&&!globalStore.frontModeStore,ju=Du==="behind"&&!globalStore.behindModeStore;ju&&(globalStore.behindModeStore={scene:Bu.scene,css3DScene:new Scene,css3DRenderer:new CSS3DRenderer}),Hu&&(globalStore.frontModeStore={css3DScene:new Scene,css3DRenderer:new CSS3DRenderer});const Uu=Du==="front"?globalStore.frontModeStore:globalStore.behindModeStore,{css3DScene:zu,css3DRenderer:Wu}=Uu,Qu=(()=>{const Zu=()=>{Du==="front"?this.store.frontModeCSS3DObjects[Vu.uuid]={visible:!0,enabled:!0,css3DObject:Vu,mode:"front"}:this.store.behindModeCSS3DObjects[Vu.uuid]={visible:!0,enabled:!0,css3DObject:Vu,opacityMesh:Gu,mode:"behind",scene:Bu.scene},zu.add(Vu),Du==="behind"&&Gu&&(Bu.scene.add(Gu),Nu.push(()=>Gu&&Bu.scene.remove(Gu)))};if(Hu||ju){Wu.domElement.style.position="absolute",Wu.domElement.style.top="0",Wu.domElement.style.userSelect="none",Wu.domElement.style.pointerEvents="none",Wu.domElement.classList.add(pluginFlag$2(Du));const _c=()=>{const _f=requestAnimationFrame(_c);Uu.requestAnimationFrameId=_f,Wu.render(zu,Tu)};return()=>{Zu(),_c()}}return()=>Zu()})(),qu=Du==="front"?globalStore.frontModeContainer:globalStore.behindModeContainer;if(qu){this.appendToElement(qu,Du);const Zu=Du==="front"?globalStore.frontModeStore:globalStore.behindModeStore;Zu&&(Zu.appendedToPage=!0)}const Yu=Zu=>this.setVisibleById(Vu.uuid,Zu),Xc=Zu=>this.setEnabledById(Vu.uuid,Zu),_h=()=>Yu(!0),_d=()=>Yu(!1),Ku=()=>Xc(!0),Xu=()=>Xc(!1),Ju=()=>(delete this.store.frontModeCSS3DObjects[Vu.uuid],delete this.store.behindModeCSS3DObjects[Vu.uuid],Nu.forEach(Zu=>Zu==null?void 0:Zu()),zu.remove(Vu),zu.children.length===0&&(typeof Uu.requestAnimationFrameId=="number"&&cancelAnimationFrame(Uu.requestAnimationFrameId),Wu.domElement.remove(),Du==="front"&&(globalStore.frontModeStore=void 0),Du==="behind"&&(globalStore.behindModeStore=void 0),globalStore.resizeObserver=void 0),!0);return this.store.disposers.push(Ju),$u&&Qu(),{id:Vu.uuid,container:ku,dispose:Ju,css3DObject:Vu,render:$u?void 0:Qu,show:_h,hide:_d,setVisible:Yu,disable:Xu,enable:Ku,setEnabled:Xc,appendToElement:Zu=>this.appendToElement(Zu,Du)}}}),Object.defineProperty(this,"setVisibleById",{enumerable:!0,configurable:!0,writable:!0,value:(Tu,Cu)=>{var Pu;const Bu=(Pu=this.store.frontModeCSS3DObjects[Tu])!==null&&Pu!==void 0?Pu:this.store.behindModeCSS3DObjects[Tu];!Bu||(Bu.css3DObject.visible=Cu,Bu.visible=Cu,Bu.mode==="behind"&&(Bu.opacityMesh.visible=Cu))}}),Object.defineProperty(this,"setEnabledById",{enumerable:!0,configurable:!0,writable:!0,value:(Tu,Cu)=>{var Pu,Bu,Ru;const Lu=(Pu=this.store.frontModeCSS3DObjects[Tu])!==null&&Pu!==void 0?Pu:this.store.behindModeCSS3DObjects[Tu];if(!Lu)return;const Ou=Lu.mode==="front"?(Bu=globalStore.frontModeStore)===null||Bu===void 0?void 0:Bu.css3DScene:(Ru=globalStore.behindModeStore)===null||Ru===void 0?void 0:Ru.css3DScene;!Ou||(Cu?(Ou.add(Lu.css3DObject),Lu.mode==="behind"&&Lu.scene.add(Lu.opacityMesh)):(Ou.remove(Lu.css3DObject),Lu.mode==="behind"&&Lu.scene.remove(Lu.opacityMesh)),Lu.enabled=Cu)}}),Object.defineProperty(this,"createObject",{enumerable:!0,configurable:!0,writable:!0,value:(Tu,Cu)=>{const{ratio:Pu,dpr:Bu,container:Ru,mode:Lu,pointerEvents:Ou}=Cu,Du=new CSS3DObjectPlus(Ru,Tu,Pu,Bu);Ru.style.pointerEvents=Ou,Ru.classList.add(`${PLUGIN_NAME$5}__container`);const{domWidthPx:$u,domHeightPx:ku}=Du,Fu=(()=>{if(Lu==="behind"){const Nu=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),Vu=new PlaneGeometry($u,ku),Gu=new Mesh(Vu,Nu);return Gu.name=pluginFlag$2("mesh"),Gu.position.copy(Du.position),Gu.rotation.copy(Du.rotation),Gu.scale.copy(Du.scale),Gu}})();return{css3DObject:Du,opacityMesh:Fu}}}),Object.defineProperty(this,"createResizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:(Tu,Cu,Pu=!0)=>{if(!Tu)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const Bu=()=>{const Lu=evenNumber$1(Tu.clientWidth,{smaller:!0}),Ou=evenNumber$1(Tu.clientHeight,{smaller:!0});Cu(Lu,Ou)};if(typeof ResizeObserver=="undefined"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>Bu(),unobserve:()=>{}};const Ru=new ResizeObserver(Bu);return Pu&&Bu(),{observe:()=>Ru.observe(Tu),unobserve:()=>Ru.unobserve(Tu)}}}),Object.defineProperty(this,"disposedErrorLog",{enumerable:!0,configurable:!0,writable:!0,value:()=>{console.error(`${PLUGIN$3} is disposed`)}})}getCurrentState(){return this.state}setState(Tu,Cu={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();const Pu=Object.assign({},this.state);this.state=Object.assign(this.state,Tu),Pu.visible!==this.state.visible&&(Tu.visible?this.handleShow():this.handleHide()),Pu.enabled!==this.state.enabled&&(Tu.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Pu,userAction:Cu.userAction})}dispose(){this.store.disposers.forEach(Tu=>Tu==null?void 0:Tu()),this.store.disposers=[],this.hooks.emit("dispose"),this.state.disposed=!0}async show({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:Tu}),this.hooks.emit("show",{userAction:Tu})}async hide({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:Tu}),this.hooks.emit("hide",{userAction:Tu})}enable({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:Tu}),this.hooks.emit("enable",{userAction:Tu})}disable({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:Tu}),this.hooks.emit("disable",{userAction:Tu})}appendToElement(Tu,Cu){if(!Tu)throw new Error(`${PLUGIN$3} Cannot append to container: container is ${Tu}`);const Pu=Cu==="front"?globalStore.frontModeStore:globalStore.behindModeStore;if(!Pu){Cu==="front"&&(globalStore.frontModeContainer=Tu),Cu==="behind"&&(globalStore.behindModeContainer=Tu);return}if(!Pu.appendedToPage){if(Tu.appendChild(Pu.css3DRenderer.domElement),!globalStore.resizeObserver){const Bu=(Ou,Du)=>{var $u,ku;($u=globalStore.frontModeStore)===null||$u===void 0||$u.css3DRenderer.setSize(Ou,Du),(ku=globalStore.behindModeStore)===null||ku===void 0||ku.css3DRenderer.setSize(Ou,Du)},{observe:Ru,unobserve:Lu}=this.createResizeObserver(Tu,Bu,!0);globalStore.resizeObserver={observe:Ru,unobserve:Lu},Ru(),this.store.disposers.push(Lu)}Pu.appendedToPage=!0}}async handleShow(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=Tu.visible}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=Tu.visible,Tu.opacityMesh.visible=Tu.visible})}async handleHide(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=!1}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=!1,Tu.opacityMesh.visible=!1})}handleEnable(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{var Cu;!Tu.enabled||(Cu=globalStore.frontModeStore)===null||Cu===void 0||Cu.css3DScene.add(Tu.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{var Cu,Pu;!Tu.enabled||((Cu=globalStore.behindModeStore)===null||Cu===void 0||Cu.css3DScene.add(Tu.css3DObject),(Pu=globalStore.behindModeStore)===null||Pu===void 0||Pu.scene.add(Tu.opacityMesh))})}handleDisable(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{var Cu;(Cu=globalStore.frontModeStore)===null||Cu===void 0||Cu.css3DScene.remove(Tu.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{var Cu,Pu;(Cu=globalStore.behindModeStore)===null||Cu===void 0||Cu.css3DScene.remove(Tu.css3DObject),(Pu=globalStore.behindModeStore)===null||Pu===void 0||Pu.scene.remove(Tu.opacityMesh)})}}const VERSION$5="v2.0.0",PLUGIN_NAME$4=`CSS3DRenderPlugin-${random$1()}@${VERSION$5}`;class Controller$8 extends CSS3DRender{constructor(Tu){super(),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"create3DDomContainer",{enumerable:!0,configurable:!0,writable:!0,value:(Cu,Pu)=>{if(this.state.disposed)return;const Bu=(()=>{var Nu;(Pu==null?void 0:Pu.dpr)!==void 0&&console.warn(`${PLUGIN_NAME$4}: please use "config.devicePixelRatio" replace "config.dpr"`);const Vu={ratio:.00216,devicePixelRatio:(Nu=Pu==null?void 0:Pu.dpr)!==null&&Nu!==void 0?Nu:1,mode:"front",autoRender:!0};return Object.assign(Vu,Pu,(Pu==null?void 0:Pu.mode)==="behind"?{scene:this.five.scene}:void 0)})(),Ru=this.five.getElement();if(!Ru)return console.error(`${PLUGIN_NAME$4}: five.getElement() is ${Ru}`);const{autoRender:Lu,mode:Ou}=Bu,Du=Ou==="front"?Ru.parentElement:Bu.behindFiveContainer;this.appendToElement(Du||document.body,Ou);const $u=this.create3DElement(this.five.camera,Cu,Object.assign(Object.assign({},Bu),{autoRender:!1}));if(!$u)return;const ku=$u.render,Fu=()=>{var Nu;Ou==="front"&&ku(),Ou==="behind"&&(!((Nu=this.five.model)===null||Nu===void 0)&&Nu.loaded?ku():this.five.once("modelLoaded",()=>ku()))};return Lu&&Fu(),Object.assign(Object.assign({},$u),{render:Lu?void 0:Fu})}}),this.five=Tu}disposeAll(){return this.dispose()}setState(...Tu){const Cu=super.setState(...Tu);return this.five.needsRender=!0,Cu}}const CSS3DRenderPlugin$1=_u=>new Controller$8(_u);var FLOOR_PLAN_ATTACHED_TO;(function(_u){_u[_u.FLOOR=1]="FLOOR",_u[_u.CEILING=2]="CEILING",_u[_u.BOUNDING_CENTER=3]="BOUNDING_CENTER"})(FLOOR_PLAN_ATTACHED_TO||(FLOOR_PLAN_ATTACHED_TO={}));class Controller$7{constructor(Tu){Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:new Subscribe$1}),this.five=Tu}getCurrentState(){return this.state}}var FloorplanErrorType;(function(_u){_u.UnknownError="UnknownError",_u.DataNotLoaded="DataNotLoaded",_u.BreakOffByHide="BreakOffByHide",_u.BreakOffByDisable="BreakOffByDisable",_u.ModelNotLoaded="ModelNotLoaded",_u.ChangeModeError="ChangeModeError",_u.UpdateCameraError="UpdateCameraError"})(FloorplanErrorType||(FloorplanErrorType={}));const _requestAnimationFrame=window.requestAnimationFrame||(_u=>setTimeout(_u,16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function requestAnimationFrameInterval(_u,Tu=60){let Cu=-1,Pu=0,Bu=-1;const Ru=1e3/Tu;function Lu(Ou){Bu===-1&&(Bu=Ou),Cu=_requestAnimationFrame(Lu),!(Ou-Pu<Ru)&&(Pu=Ou,_u&&_u(Ou-Bu))}return Cu=_requestAnimationFrame(Lu),function(){_cancelAnimationFrame(Cu)}}var CameraMovementEffect;(function(_u){_u.Move="Move",_u.Rotate="Rotate"})(CameraMovementEffect||(CameraMovementEffect={}));var Rotation;(function(_u){_u.Clockwise="Clockwise",_u.Anticlockwise="Anticlockwise",_u.Loop="Loop"})(Rotation||(Rotation={}));new TextureLoader;class BetterTween extends exports.Tween{constructor(){super(...arguments),Object.defineProperty(this,"disposeMethods",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"animationFrameDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onDispose",{enumerable:!0,configurable:!0,writable:!0,value:Tu=>(this.disposeMethods.push(Tu),this)}),Object.defineProperty(this,"play",{enumerable:!0,configurable:!0,writable:!0,value:()=>(this.start(0),this.animationFrameDisposer=requestAnimationFrameInterval(Tu=>this.update(Tu)),this)}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var Tu;this.stop(),(Tu=this.animationFrameDisposer)===null||Tu===void 0||Tu.call(this),this.disposeMethods.forEach(Cu=>Cu()),this.disposeMethods=[],exports.remove(this)}})}}function S4(){return((1+Math.random())*65536|0).toString(16).substring(1)}function uuid(){return(S4()+S4()+"-"+S4()+"-4"+S4().substr(0,3)+"-"+S4()+"-"+S4()+S4()+S4()).toLowerCase()}const lineWidth=1,lineColor=new Color(16777215);new Color(6522623);const pointColor=new Color(16777215);new Color(6522623);const pointSize=6,pointImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",pointTexture=new TextureLoader().load(pointImage),normalLineOpts={pointTexture,pointSize,lineWidth,lineColor,pointColor,lineRenderOrder:20,pointsRenderOrder:20};Object.assign(Object.assign({},normalLineOpts),{dashed:!0});var DISPLAY_STRATEGY_TYPE;(function(_u){_u.SMALL="small",_u.MIDLLE="middle",_u.LARGE="large",_u.EXTRA_LARGE="x-large"})(DISPLAY_STRATEGY_TYPE||(DISPLAY_STRATEGY_TYPE={}));var DIRECTION;(function(_u){_u.TOP_LEFT="topLeft",_u.TOP_RIGHT="topRight",_u.BOTTOM_LEFT="bottomLeft",_u.BOTTOM_RIGHT="bottomRight"})(DIRECTION||(DIRECTION={}));var ITEM_LABEL_PLUGIN_DISPLAY_STRATEGY_TYPE;(function(_u){_u.SMALL="small",_u.MIDLLE="middle",_u.LARGE="large",_u.EXTRA_LARGE="x-large"})(ITEM_LABEL_PLUGIN_DISPLAY_STRATEGY_TYPE||(ITEM_LABEL_PLUGIN_DISPLAY_STRATEGY_TYPE={}));function notNil(_u){return _u!=null}function addDebugPoints(_u,Tu){Tu.forEach(Cu=>{const Pu=new SphereGeometry(.02,16,16),Bu=[],Ru=[new MeshBasicMaterial({color:16776960}),new MeshBasicMaterial({color:16711935}),new MeshBasicMaterial({color:16711680}),new MeshBasicMaterial({color:65535})];if(Cu.position.length===4)Cu.position.forEach((Lu,Ou)=>{const Du=Ru[Ou],$u=new Mesh(Pu,Du);$u.position.copy(arrayPositionToVector3(Lu)),Bu.push($u)});else{const Lu=Ru[0],Ou=new Mesh(Pu,Lu);Ou.position.copy(arrayPositionToVector3(Cu.position)),Bu.push(Ou)}Bu.forEach(Lu=>{Lu.material.depthTest=!1,_u.scene.add(Lu)})})}const noTypecheck=_u=>_u;function planeNormal(_u){if(_u.length<3)return;const Tu=_u.map(anyPositionToVector3),Cu=Tu[1].clone().sub(Tu[0]),Pu=Tu[2].clone().sub(Tu[1]);return Cu.cross(Pu)}function tagPosition(_u){if(Array.isArray(_u)&&_u.length===4){const Tu=_u.map(anyPositionToVector3);return centerPoint$1(Tu[0],Tu[2])}else return anyPositionToVector3(_u)}function checkRange(_u,Tu){if(_u===void 0)return;const{min:Cu,max:Pu}=Tu!=null?Tu:{};if(!(Cu===void 0&&Pu===void 0))return!(typeof Pu=="number"&&Pu<_u||typeof Cu=="number"&&Cu>_u)}function actionAfterFiveModelLoad(_u,Tu){_u.model.loaded?Tu():_u.once("modelLoaded",()=>Tu())}function normalPositionToPositions(_u,Tu,Cu){const Bu=new Plane().setFromNormalAndCoplanarPoint(Cu,Tu),Ru=Tu.clone().sub(_u).cross(new Vector3(0,1,0)).setLength(.01),Lu=new Vector3(0,.01,0);return[Tu.clone().sub(Ru).sub(Lu),Tu.clone().add(Ru).sub(Lu),Tu.clone().add(Ru).add(Lu),Tu.clone().sub(Ru).add(Lu)].map(Du=>Bu.projectPoint(Du,new Vector3))}const debounce=(_u,Tu=1e3/60)=>{let Cu=null;const Pu=_u;return(...Ru)=>{Cu&&clearTimeout(Cu),Cu=setTimeout(()=>{Pu==null||Pu(...Ru),Cu&&clearTimeout(Cu),Cu=null},Tu)}};function throttle(_u,Tu=200){let Cu;return function(...Pu){Cu||(_u.apply(this,Pu),Cu=setTimeout(function(){Cu=null},Tu))}}function searchFirstValueSmallThanLastValue(_u,Tu){const[Cu,Pu]=Tu;if(Cu>=Pu||Pu<=1||Cu<=1)return-1;const Bu={},Ru=Lu=>(Bu[Lu]||(Bu[Lu]=_u(Lu)),Bu[Lu]);for(let Lu=Cu;Lu<Pu;Lu++){const Ou=Ru(Lu),Du=Ru(Lu-1);if(Ou<Du)return Lu}return-1}function resizeObserver(_u,Tu){if(!Tu||typeof ResizeObserver=="undefined"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Cu=new ResizeObserver(_u);return{observe:()=>Cu.observe(Tu),unobserve:()=>Cu.unobserve(Tu)}}}var DimensionType;(function(_u){_u.Two="2D",_u.Three="3D"})(DimensionType||(DimensionType={}));var PointType;(function(_u){_u.PointTag="PointTag",_u.PlaneTag="PlaneTag"})(PointType||(PointType={}));var ContentType;(function(_u){_u.Audio="Audio",_u.Text="Text",_u.ImageText="ImageText",_u.Link="Link",_u.Marketing="Marketing",_u.MediaPlane="MediaPlane",_u.Custom="Custom"})(ContentType||(ContentType={}));var LinkType;(function(_u){_u.VrLink="vr",_u.NormalLink="normal"})(LinkType||(LinkType={}));function add_css$l(_u){append_styles(_u,"svelte-1omzoh4",".straight-line.svelte-1omzoh4{display:block;width:100%;height:100%;overflow:visible}")}function create_if_block$j(_u){let Tu,Cu,Pu,Bu;return{c(){Tu=svg_element("path"),attr$1(Tu,"fill","none"),attr$1(Tu,"stroke","url(#"+_u[4]+")"),attr$1(Tu,"stroke-width","1"),attr$1(Tu,"d","M0 0.5 L 148 0.5")},m(Ru,Lu){insert(Ru,Tu,Lu),Bu=!0},p(Ru,Lu){_u=Ru},i(Ru){Bu||(Ru&&add_render_callback(()=>{Pu&&Pu.end(1),Cu=create_in_transition(Tu,draw,{duration:_u[1],delay:_u[0]}),Cu.start()}),Bu=!0)},o(Ru){Cu&&Cu.invalidate(),Ru&&(Pu=create_out_transition(Tu,draw,{duration:_u[1],delay:_u[2]})),Bu=!1},d(Ru){Ru&&detach(Tu),Ru&&Pu&&Pu.end()}}}function create_fragment$n(_u){let Tu,Cu,Pu,Bu,Ru,Lu=_u[3]&&create_if_block$j(_u);return{c(){Tu=svg_element("svg"),Cu=svg_element("defs"),Pu=svg_element("linearGradient"),Bu=svg_element("stop"),Ru=svg_element("stop"),Lu&&Lu.c(),attr$1(Bu,"offset","25%"),attr$1(Bu,"stop-color","white"),attr$1(Bu,"stop-opacity","1"),attr$1(Ru,"offset","100%"),attr$1(Ru,"stop-color","white"),attr$1(Ru,"stop-opacity","0.5"),attr$1(Pu,"id",_u[4]),attr$1(Pu,"gradientUnits","userSpaceOnUse"),attr$1(Tu,"class","straight-line svelte-1omzoh4"),attr$1(Tu,"viewBox","0 0 148 1"),attr$1(Tu,"preserveAspectRatio","none")},m(Ou,Du){insert(Ou,Tu,Du),append$1(Tu,Cu),append$1(Cu,Pu),append$1(Pu,Bu),append$1(Pu,Ru),Lu&&Lu.m(Tu,null)},p(Ou,[Du]){Ou[3]?Lu?(Lu.p(Ou,Du),Du&8&&transition_in(Lu,1)):(Lu=create_if_block$j(Ou),Lu.c(),transition_in(Lu,1),Lu.m(Tu,null)):Lu&&(group_outros(),transition_out(Lu,1,1,()=>{Lu=null}),check_outros())},i(Ou){transition_in(Lu)},o(Ou){transition_out(Lu)},d(Ou){Ou&&detach(Tu),Lu&&Lu.d()}}}function instance$n(_u,Tu,Cu){let{inDelay:Pu=0}=Tu,{duration:Bu=0}=Tu,{outDelay:Ru=0}=Tu,{unfolded:Lu}=Tu;const Ou=uuid();return _u.$$set=Du=>{"inDelay"in Du&&Cu(0,Pu=Du.inDelay),"duration"in Du&&Cu(1,Bu=Du.duration),"outDelay"in Du&&Cu(2,Ru=Du.outDelay),"unfolded"in Du&&Cu(3,Lu=Du.unfolded)},[Pu,Bu,Ru,Lu,Ou]}class Straight extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$n,create_fragment$n,safe_not_equal,{inDelay:0,duration:1,outDelay:2,unfolded:3},add_css$l)}}function add_css$k(_u){append_styles(_u,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function create_if_block$i(_u){let Tu,Cu,Pu,Bu,Ru;return{c(){Tu=element("div"),attr$1(Tu,"class","shadow svelte-faoauy"),attr$1(Tu,"style",Cu=`
      left:${px2rem(_u[5])};
      bottom:${px2rem(_u[6])};
      box-shadow: 0 0 ${px2rem(_u[10])} ${px2rem(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),set_style(Tu,"width",px2rem(_u[3])),set_style(Tu,"height",px2rem(_u[4])),set_style(Tu,"z-index",_u[13])},m(Lu,Ou){insert(Lu,Tu,Ou),Ru=!0},p(Lu,Ou){_u=Lu,(!Ru||Ou&8160&&Cu!==(Cu=`
      left:${px2rem(_u[5])};
      bottom:${px2rem(_u[6])};
      box-shadow: 0 0 ${px2rem(_u[10])} ${px2rem(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&attr$1(Tu,"style",Cu),Ou&8&&set_style(Tu,"width",px2rem(_u[3])),Ou&16&&set_style(Tu,"height",px2rem(_u[4])),Ou&8192&&set_style(Tu,"z-index",_u[13])},i(Lu){Ru||(Lu&&add_render_callback(()=>{Bu&&Bu.end(1),Pu=create_in_transition(Tu,fade,{duration:_u[0]}),Pu.start()}),Ru=!0)},o(Lu){Pu&&Pu.invalidate(),Lu&&(Bu=create_out_transition(Tu,fade,{duration:_u[1]})),Ru=!1},d(Lu){Lu&&detach(Tu),Lu&&Bu&&Bu.end()}}}function create_fragment$m(_u){let Tu,Cu=_u[2]&&create_if_block$i(_u);return{c(){Cu&&Cu.c(),Tu=empty()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),insert(Pu,Tu,Bu)},p(Pu,[Bu]){Pu[2]?Cu?(Cu.p(Pu,Bu),Bu&4&&transition_in(Cu,1)):(Cu=create_if_block$i(Pu),Cu.c(),transition_in(Cu,1),Cu.m(Tu.parentNode,Tu)):Cu&&(group_outros(),transition_out(Cu,1,1,()=>{Cu=null}),check_outros())},i(Pu){transition_in(Cu)},o(Pu){transition_out(Cu)},d(Pu){Cu&&Cu.d(Pu),Pu&&detach(Tu)}}}function px2rem(_u){return typeof _u=="number"?_u/16+"rem":_u}function instance$m(_u,Tu,Cu){let{inDelay:Pu=1e3}=Tu,{outDelay:Bu=1e3}=Tu,{visible:Ru=!0}=Tu,{width:Lu=0}=Tu,{height:Ou=0}=Tu,{left:Du=0}=Tu,{bottom:$u=0}=Tu,{center:ku=!1}=Tu,{horizontalCenter:Fu=!1}=Tu,{verticalCenter:Nu=!1}=Tu,{blurRadius:Vu}=Tu,{spreadRadius:Gu}=Tu,{opacity:Hu=.15}=Tu,{zIndex:ju=void 0}=Tu;return _u.$$set=Uu=>{"inDelay"in Uu&&Cu(0,Pu=Uu.inDelay),"outDelay"in Uu&&Cu(1,Bu=Uu.outDelay),"visible"in Uu&&Cu(2,Ru=Uu.visible),"width"in Uu&&Cu(3,Lu=Uu.width),"height"in Uu&&Cu(4,Ou=Uu.height),"left"in Uu&&Cu(5,Du=Uu.left),"bottom"in Uu&&Cu(6,$u=Uu.bottom),"center"in Uu&&Cu(7,ku=Uu.center),"horizontalCenter"in Uu&&Cu(8,Fu=Uu.horizontalCenter),"verticalCenter"in Uu&&Cu(9,Nu=Uu.verticalCenter),"blurRadius"in Uu&&Cu(10,Vu=Uu.blurRadius),"spreadRadius"in Uu&&Cu(11,Gu=Uu.spreadRadius),"opacity"in Uu&&Cu(12,Hu=Uu.opacity),"zIndex"in Uu&&Cu(13,ju=Uu.zIndex)},[Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju]}class Shadow extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$m,create_fragment$m,safe_not_equal,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,blurRadius:10,spreadRadius:11,opacity:12,zIndex:13},add_css$k)}}function random(){return Math.random().toString(36).slice(-6)}const RANDON_STRING=random();function add_css$j(_u){append_styles(_u,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function get_each_context$5(_u,Tu,Cu){const Pu=_u.slice();return Pu[10]=Tu[Cu],Pu[11]=Tu,Pu[12]=Cu,Pu}function create_each_block$5(_u){let Tu,Cu=_u[10]+"",Pu,Bu=_u[12];const Ru=()=>_u[6](Tu,Bu),Lu=()=>_u[6](null,Bu);return{c(){Tu=element("span"),Pu=text$1(Cu),attr$1(Tu,"class","text-char svelte-1b2n9wi")},m(Ou,Du){insert(Ou,Tu,Du),append$1(Tu,Pu),Ru()},p(Ou,Du){_u=Ou,Du&2&&Cu!==(Cu=_u[10]+"")&&set_data(Pu,Cu),Bu!==_u[12]&&(Lu(),Bu=_u[12],Ru())},d(Ou){Ou&&detach(Tu),Lu()}}}function create_fragment$l(_u){let Tu,Cu=_u[1],Pu=[];for(let Bu=0;Bu<Cu.length;Bu+=1)Pu[Bu]=create_each_block$5(get_each_context$5(_u,Cu,Bu));return{c(){for(let Bu=0;Bu<Pu.length;Bu+=1)Pu[Bu].c();Tu=empty()},m(Bu,Ru){for(let Lu=0;Lu<Pu.length;Lu+=1)Pu[Lu].m(Bu,Ru);insert(Bu,Tu,Ru)},p(Bu,[Ru]){if(Ru&3){Cu=Bu[1];let Lu;for(Lu=0;Lu<Cu.length;Lu+=1){const Ou=get_each_context$5(Bu,Cu,Lu);Pu[Lu]?Pu[Lu].p(Ou,Ru):(Pu[Lu]=create_each_block$5(Ou),Pu[Lu].c(),Pu[Lu].m(Tu.parentNode,Tu))}for(;Lu<Pu.length;Lu+=1)Pu[Lu].d(1);Pu.length=Cu.length}},i:noop,o:noop,d(Bu){destroy_each(Pu,Bu),Bu&&detach(Tu)}}}function instance$l(_u,Tu,Cu){let Pu,{inDelay:Bu=0}=Tu,{outDelay:Ru=0}=Tu,{content:Lu}=Tu,{unfolded:Ou}=Tu,Du,$u=[],ku;function Fu(Vu){clearTimeout(Du),Du=setTimeout(function(){!ku||(Vu&&ku.reversed||!Vu&&!ku.reversed)&&(ku.reverse(),ku.play())},Vu?Bu:Ru)}onMount(function(){const Vu=(()=>{const Gu=searchFirstValueSmallThanLastValue(Hu=>$u[Hu].getBoundingClientRect().x,[Math.min($u.length-1,10),Math.min($u.length-1,30)]);if(Gu>0)return Gu})();ku=anime({targets:$u.filter(notNil).slice(0,Vu),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:anime.stagger(50),easing:"easeInOutCubic"}),Ou&&ku.seek(ku.duration)});function Nu(Vu,Gu){binding_callbacks[Vu?"unshift":"push"](()=>{$u[Gu]=Vu,Cu(0,$u)})}return _u.$$set=Vu=>{"inDelay"in Vu&&Cu(2,Bu=Vu.inDelay),"outDelay"in Vu&&Cu(3,Ru=Vu.outDelay),"content"in Vu&&Cu(4,Lu=Vu.content),"unfolded"in Vu&&Cu(5,Ou=Vu.unfolded)},_u.$$.update=()=>{_u.$$.dirty&16&&Cu(1,Pu=(()=>{const Vu=[],Gu=new RegExp(/\p{Regional_Indicator}\p{Regional_Indicator}|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?(\u200D\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?)+|\p{Emoji_Presentation}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)/gu),Hu=`__EMOJI_SPLIT_${RANDON_STRING}__`,ju=`__EMOJI_${RANDON_STRING}__`;return Lu.slice().replace(Gu,Uu=>`${Hu}${ju}${Uu}${Hu}`).split(Hu).forEach(Uu=>Uu.startsWith(ju)?Vu.push(Uu.slice(ju.length)):Vu.push(...Uu.split(""))),Vu.filter(Boolean)})()),_u.$$.dirty&32&&Fu(Ou)},[$u,Pu,Bu,Ru,Lu,Ou,Nu]}class Text extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$l,create_fragment$l,safe_not_equal,{inDelay:2,outDelay:3,content:4,unfolded:5},add_css$j)}}const Image_Arrow="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",Image_Play="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAAC3aM1AAAAKo0lEQVR4Ae2cW2wU1xmAxxcutqFxRJ04jWW5NBelIJUKcX1ARaWoAp4QEiAFaFBAPIBElDcQEkg0Sh6IokjNQ1NxKw9IjaUg1X1IXQl4AIGEQh4IFQHkGhsMhnKLL1Bj9//G+4/Pzs7OztpzW9u/9O+5zJlzznz7n/+cMzO7ZVY6ZLp0o1qUsCqjlRJWGCpR64WhAxLvy2i/hL2ihIlKWUKtT5V2a0VfyijpMOS5VPI4o48kJB2rxAkUa5slWicKyDgEuN2iD0Sx7sglDqAM4ddFfypaHvkVeTcwKNn3RTtFcRORSZRAa6TXDaJYZZoEa+0Q7YmiU1EAxR82iWKRaRYstk00VD8bJlDqqhdtFMVfloLgV9tFu0SHwuhwWEBZ7rwlOiOMTiVQx4/S5jXRMS+7wrAkfOQvRYFaqoKbekUUoGOatMYCFOv+uWiTaFKztzQdmnAN+H02FCy3RiWjBUrjb4vyrY43mSkXxArlv6JF+9XRAOUbfEeUnc54FdbOPxEFKmvYwFIsUGDOFS3VyScwGCk4TfRlUZZXgaEWA5RhjmVOBJhymbZMkU9cAFADDf+gQJmA8JnjeZjL5XkKlsqdMHZYBSUoUGbz8TgBFQSUKYBPxd1xB8tXggBlndnkW8vEOMjQ556r7zq10PqRxfobE4NXoKuEhe8Gxg8ofpPtZBArDtSbcVAIFjCBjaf4wXpNznjV86yJnck2lccv7P9zJJ+FchJ3jSbFmwBsYJQj+YA2SUk/682paIJlwKbJ65q9gLKPTfvNYa9riTsPRrDKEi+gPLaIXLZs2fJae3v7oVu3bn129OjRJZE3GE0DOazcsxUL2F9H0/ZIrYsWLao5e/Zsy9SpU6cMDQ1ZZWVlQ/fu3bu2devWD1taWh6OlCyJ2LfSS2dt6gbKOivyHdGZM2c2LVu2bMf9+/etvr4+q7a21poxY4b1QuTSpUt/Xbx48ZclgXK4k/ckuK79NYc8jjYW3ykAeTZvPX/+3MJCHz58aN29e9caHBysEOv9w5MnT77ev38/671SEJg5E7gJlC2mmY71YoALVODW1NTU7du37/CNGzcOzpw5M7E+BQRA/5xH5WZnbasJWEkkxbDWp0+fWnfu3LGePXtWNnv27OXd3d3fNDc3/zaSBsOr1GGnQFmkxvV6TMHLEFdq4V8fPHhgVVZWVq1du/aAgD28evVqbvimUWBnL/QVaOruc8rMb/X391sy+1s9PT1ls2bNevvUqVNfX7x48f00EpU+2QwVaGqsE1jAVCWNG8C3yqRVOX/+/Pdk0mo+cODAmxxLkdgMUwMUgIiCNNPl5eXWwMCA9fjxY6u3t9eqrq6u37t37+GbN2/uS9Gk5QDl/p7nRt++wpg+Mgt8ByjNKlwzLpOVbbHiZ8sbGxt/L7717ydPnlwWUzf9moHhdCyU5yWpEgWpIZ1Ti8VaETYEwK2oqHhp3bp1H8mS6/OVK1cm7bqq6Z3vHWi79xF/KDhCBebOM9MaZzUAVAmZtObLtrX5/PnzGyPurl/1toWyf09UGO4IoBCgKjTSmq+h5mkZ/CsqUrVw4cKdMmkd37NnTxMZMUsVFpoIUIXIBSsYDRWCpglNyGY+ZdWqZRVgb2Vlp/WLgwcPHpWd1gcxT1o20Eq9gBjDQS+g2r4CJE1cQzdIrzT1ZuqeIjutdTJpfXXs2LEFdiXRf1Rioc7GPvr2hluQC0bshGl5xDXNQS9g5Gk5LUOo52lIOWTatGmvbt68+VPZzv5x6dKlUb/1UpEIUBmaDlAvaIBQcPmOU8YNjzxEYQ6n7M/y+vr637S2th5paGjg9ZqoJBmgStO8cBOcguKq3flKwjzXXc59TM+pqqr62ZEjR36n6QjCiiT8Jz7OZqqwAIiYIPSY5usxhU1azzPztJxdofdHoJe+vE8tnMuVxPKDKFdXsoByzA1FgZqh1mFCU6jkaVzLuUPZDLRt27btX+78ENMvEgEqNO33LSV0hjQXpaBMMJrHcYXuFSfPRwY7Ojq+Wb58+fa2trZQf0bjavMFQz4xCwUQa0egKTiFSVoB6vF8IRel57kukC3qrRMnTny8ffv2y+5jEaRtoPYWI4LK/ap0/Fg+SOQjZmiWNSvXMmaefFHPrl69enLBggVfClSnPbNMBPEBhrzzCDSCBjyrZNnEAUCYlqXA3MfUUjVfy5FvHuM4IvdOv9u1a9e7c+fO/XOMMGm6jyEfO1BmJBEbKKFCUUtTYPTQL85xU2Q//0geUX+xYsWKFjM/xrgNdMy/HhtFhx0LNc9VeCZgjVPODVzLyyEmndb169cfOnfu3I9mnTHH+7FQ3sqNVcQq7VleGzXA5FikllGwlCWOEGfSOX78+Mc7duyIY9LR7uQLewGKhbKUiPOuvT3k6ZUbFJAQhWyGmp8J+69cucKk85eY/STNewkM+4e/6jH8FM+r5kJ55qRkAtTzyFMrJE/LKHx5tnR5586dm2TSiXMG1+7lC+2fM2KhCAnnYb2dE+1Hlg9VUApSARKaefJFPDp9+vQX8qgjqUnHj0oW0Ed+JcM+ZloodZsAtS2FKc+MOD54+/btf27YsOHThCcd7Z5XaDNUC2X8QziWh1wCyFloK0zTSskjjcozo3bZ6XySkknHCyR5sLO3tAqUzG7RWIDqLA8wRKESV5CSZ086S5YsScukQ/fyCexs0UmJBD+9y1rO2CUi+NAhb1YNVHmPyQYqD9ku7969e9O8efPSNOmY3TXjMHN+tmhaKDdJ+JFo5C/cdnV1ddIjrJGdkoKUx8HsdP60atWqf3C8RARmzg2m4UXfSM9jeSW8rq6u8vr163+TV8JfyQx3e9LZuHHjoQsXLvSMdKckYt9KL53tu/sBHXeeeJMk0rdJ5P2kQXkvqXXOnDnlEr8pTyUPrVmz5qvOzs7/lQTCkU4y1LtGkjIfmIlMnJ+K/MojfzIrl8B3kpU1osxJSYtTAL8wKf4EYJQFk+JeQMlvE3UcLRmTkkUANm1ZOZmE24dqGU5gOfCyZkyGWQT+IykW8zmSz0IpiLNN8t5iTmdTkgGTrInI7JcfULaH10Qnh/4IMVjAxNk6jxwajuUb8lqOZRT3S/lx06RY1g8C4akfiEJAOZdFKzsq/nNjIssdufjbhQAEAUodOGDWp4m8S0oHEhb+YexGkD4EBUpdVMrfl/E/RhNJnsjF/ls0r980YRQDlAqBylIqylcCzf4lHecB5veigSfmYoBycaxN2SHgT8e7pWKZwCzqzZpigUr9DlRuoIxXn8pIZJgHtkwpa8togHIiw587LeNx9mc2ZwIK5DOlXJaMFqhWwoMp/Ax+1W+ToOXTHGKNrDMLLo38LmKsQKmbdSrWil+N82UJaS40YTuJv/RdtAdpzet+aJDzvMpQV71oo2gYX5RXG2HnYZXtouzNRzXE3R0KE6jWjZU2iaZ9u8pqpU3UfvwrYSgSBVDtGDurBlHn/zj0QMIh7qlDNOfmcBj9ihKo9o+l1euiWGxSE5eun3na6jxQk3joEgdQ7TR+FWutE43lhQpph3sQvISAVRa9ppRzipY4gZqdw8/WigIWDWt1gD8EIsqSLlT/KPUVlKSAujs2XTLYeRHiIlA2DVi1qkRtK8PSULaEDF+Ue7ashwkTlf8DQc/cITdx9+UAAAAASUVORK5CYII=";function add_css$i(_u){append_styles(_u,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function create_if_block$h(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku;return Cu=new Shadow({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),Pu=space(),Bu=element("div"),attr$1(Bu,"class",Ru="arrow "+_u[0]+" svelte-1ogmlqq"),set_style(Bu,"background-image","url("+Image_Arrow+")"),attr$1(Tu,"class","arrow-wrapper svelte-1ogmlqq")},m(Fu,Nu){insert(Fu,Tu,Nu),mount_component(Cu,Tu,null),append$1(Tu,Pu),append$1(Tu,Bu),Du=!0,$u||(ku=listen(Bu,"click",_u[5]),$u=!0)},p(Fu,Nu){_u=Fu,(!Du||Nu&1&&Ru!==(Ru="arrow "+_u[0]+" svelte-1ogmlqq"))&&attr$1(Bu,"class",Ru)},i(Fu){Du||(transition_in(Cu.$$.fragment,Fu),Fu&&add_render_callback(()=>{Ou&&Ou.end(1),Lu=create_in_transition(Bu,fade,{duration:_u[2],delay:_u[3],easing:cubicInOut}),Lu.start()}),Du=!0)},o(Fu){transition_out(Cu.$$.fragment,Fu),Lu&&Lu.invalidate(),Fu&&(Ou=create_out_transition(Bu,fade,{duration:_u[2],delay:_u[4],easing:cubicInOut})),Du=!1},d(Fu){Fu&&detach(Tu),destroy_component(Cu),Fu&&Ou&&Ou.end(),$u=!1,ku()}}}function create_fragment$k(_u){let Tu,Cu,Pu=_u[1]&&create_if_block$h(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,[Ru]){Bu[1]?Pu?(Pu.p(Bu,Ru),Ru&2&&transition_in(Pu,1)):(Pu=create_if_block$h(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function instance$k(_u,Tu,Cu){let{direction:Pu="right"}=Tu,{visible:Bu=!0}=Tu,{duration:Ru=0}=Tu,{inDelay:Lu=0}=Tu,{outDelay:Ou=0}=Tu;function Du($u){bubble.call(this,_u,$u)}return _u.$$set=$u=>{"direction"in $u&&Cu(0,Pu=$u.direction),"visible"in $u&&Cu(1,Bu=$u.visible),"duration"in $u&&Cu(2,Ru=$u.duration),"inDelay"in $u&&Cu(3,Lu=$u.inDelay),"outDelay"in $u&&Cu(4,Ou=$u.outDelay)},[Pu,Bu,Ru,Lu,Ou,Du]}class Arrow extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$k,create_fragment$k,safe_not_equal,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},add_css$i)}}function add_css$h(_u){append_styles(_u,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function get_each_context$4(_u,Tu,Cu){const Pu=_u.slice();return Pu[11]=Tu[Cu].id,Pu[12]=Tu[Cu].content,Pu}function create_each_block$4(_u,Tu){let Cu,Pu,Bu;return Pu=new Text({props:{unfolded:Tu[0],content:Tu[12],inDelay:500,outDelay:Tu[5]}}),{key:_u,first:null,c(){Cu=element("div"),create_component(Pu.$$.fragment),attr$1(Cu,"class","text svelte-1fuzm7v"),set_style(Cu,"transform",Tu[7]),this.first=Cu},m(Ru,Lu){insert(Ru,Cu,Lu),mount_component(Pu,Cu,null),Tu[10](Cu),Bu=!0},p(Ru,Lu){Tu=Ru;const Ou={};Lu&1&&(Ou.unfolded=Tu[0]),Lu&2&&(Ou.content=Tu[12]),Lu&32&&(Ou.outDelay=Tu[5]),Pu.$set(Ou),Lu&128&&set_style(Cu,"transform",Tu[7])},i(Ru){Bu||(transition_in(Pu.$$.fragment,Ru),Bu=!0)},o(Ru){transition_out(Pu.$$.fragment,Ru),Bu=!1},d(Ru){Ru&&detach(Cu),destroy_component(Pu),Tu[10](null)}}}function create_if_block$g(_u){let Tu,Cu,Pu;return Cu=new Arrow({props:{direction:_u[6],visible:_u[0],inDelay:600,duration:1e3}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),attr$1(Tu,"class","arrow svelte-1fuzm7v")},m(Bu,Ru){insert(Bu,Tu,Ru),mount_component(Cu,Tu,null),Pu=!0},p(Bu,Ru){const Lu={};Ru&64&&(Lu.direction=Bu[6]),Ru&1&&(Lu.visible=Bu[0]),Cu.$set(Lu)},i(Bu){Pu||(transition_in(Cu.$$.fragment,Bu),Pu=!0)},o(Bu){transition_out(Cu.$$.fragment,Bu),Pu=!1},d(Bu){Bu&&detach(Tu),destroy_component(Cu)}}}function create_fragment$j(_u){let Tu=[],Cu=new Map,Pu,Bu,Ru,Lu=_u[1];const Ou=$u=>$u[11];for(let $u=0;$u<Lu.length;$u+=1){let ku=get_each_context$4(_u,Lu,$u),Fu=Ou(ku);Cu.set(Fu,Tu[$u]=create_each_block$4(Fu,ku))}let Du=_u[3]<_u[4]&&create_if_block$g(_u);return{c(){for(let $u=0;$u<Tu.length;$u+=1)Tu[$u].c();Pu=space(),Du&&Du.c(),Bu=empty()},m($u,ku){for(let Fu=0;Fu<Tu.length;Fu+=1)Tu[Fu].m($u,ku);insert($u,Pu,ku),Du&&Du.m($u,ku),insert($u,Bu,ku),Ru=!0},p($u,[ku]){ku&167&&(Lu=$u[1],group_outros(),Tu=update_keyed_each(Tu,ku,Ou,1,$u,Lu,Cu,Pu.parentNode,outro_and_destroy_block,create_each_block$4,Pu,get_each_context$4),check_outros()),$u[3]<$u[4]?Du?(Du.p($u,ku),ku&24&&transition_in(Du,1)):(Du=create_if_block$g($u),Du.c(),transition_in(Du,1),Du.m(Bu.parentNode,Bu)):Du&&(group_outros(),transition_out(Du,1,1,()=>{Du=null}),check_outros())},i($u){if(!Ru){for(let ku=0;ku<Lu.length;ku+=1)transition_in(Tu[ku]);transition_in(Du),Ru=!0}},o($u){for(let ku=0;ku<Tu.length;ku+=1)transition_out(Tu[ku]);transition_out(Du),Ru=!1},d($u){for(let ku=0;ku<Tu.length;ku+=1)Tu[ku].d($u);$u&&detach(Pu),Du&&Du.d($u),$u&&detach(Bu)}}}function instance$j(_u,Tu,Cu){let Pu,Bu,Ru,{visible:Lu=!1}=Tu,{textUnfolded:Ou=!1}=Tu,{textItems:Du}=Tu,$u,ku=0,Fu=0,Nu=0;function Vu(Gu){binding_callbacks[Gu?"unshift":"push"](()=>{$u=Gu,Cu(2,$u)})}return _u.$$set=Gu=>{"visible"in Gu&&Cu(0,Lu=Gu.visible),"textUnfolded"in Gu&&Cu(8,Ou=Gu.textUnfolded),"textItems"in Gu&&Cu(1,Du=Gu.textItems)},_u.$$.update=()=>{if(_u.$$.dirty&4&&$u){const{height:Gu,lineHeight:Hu}=getComputedStyle($u);Cu(4,Nu=Number(Gu.replace("px",""))),Cu(3,Fu=Number(Hu.replace("px","")))}_u.$$.dirty&280&&Cu(9,ku=Ou?Fu-Nu:0),_u.$$.dirty&512&&Cu(7,Pu=`translateY(${ku}px)`),_u.$$.dirty&256&&Cu(6,Bu=Ou?"left":"right"),_u.$$.dirty&256&&Cu(5,Ru=Ou?450:0)},[Lu,Du,$u,Fu,Nu,Ru,Bu,Pu,Ou,ku,Vu]}class MultiLineText extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$j,create_fragment$j,safe_not_equal,{visible:0,textUnfolded:8,textItems:1},add_css$h)}}function nullishCoalescing(_u,Tu){return _u==null?Tu:_u}function add_css$g(_u){append_styles(_u,"svelte-18yy5x8",".line.svelte-18yy5x8{position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-18yy5x8{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function create_if_block$f(_u){var Nu;let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu;return Tu=new Shadow({props:{visible:_u[2],left:_u[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Bu=new Straight({props:{unfolded:_u[2],duration:1e3,outDelay:_u[5]+40*Math.min(nullishCoalescing((Nu=_u[4][0])==null?void 0:Nu.content.length,10),15)}}),Ou=new MultiLineText({props:{visible:_u[2],textUnfolded:_u[1],textItems:_u[4]}}),{c(){create_component(Tu.$$.fragment),Cu=space(),Pu=element("div"),create_component(Bu.$$.fragment),Ru=space(),Lu=element("div"),create_component(Ou.$$.fragment),attr$1(Pu,"class","line svelte-18yy5x8"),set_style(Pu,"width",_u[3]+"px"),attr$1(Lu,"class","content svelte-18yy5x8"),add_render_callback(()=>_u[9].call(Lu))},m(Vu,Gu){mount_component(Tu,Vu,Gu),insert(Vu,Cu,Gu),insert(Vu,Pu,Gu),mount_component(Bu,Pu,null),insert(Vu,Ru,Gu),insert(Vu,Lu,Gu),mount_component(Ou,Lu,null),Du=add_resize_listener(Lu,_u[9].bind(Lu)),$u=!0,ku||(Fu=listen(Lu,"click",_u[6]),ku=!0)},p(Vu,Gu){var zu;const Hu={};Gu&4&&(Hu.visible=Vu[2]),Gu&8&&(Hu.left=Vu[3]/2+"px"),Tu.$set(Hu);const ju={};Gu&4&&(ju.unfolded=Vu[2]),Gu&48&&(ju.outDelay=Vu[5]+40*Math.min(nullishCoalescing((zu=Vu[4][0])==null?void 0:zu.content.length,10),15)),Bu.$set(ju),Gu&8&&set_style(Pu,"width",Vu[3]+"px");const Uu={};Gu&4&&(Uu.visible=Vu[2]),Gu&2&&(Uu.textUnfolded=Vu[1]),Gu&16&&(Uu.textItems=Vu[4]),Ou.$set(Uu)},i(Vu){$u||(transition_in(Tu.$$.fragment,Vu),transition_in(Bu.$$.fragment,Vu),transition_in(Ou.$$.fragment,Vu),$u=!0)},o(Vu){transition_out(Tu.$$.fragment,Vu),transition_out(Bu.$$.fragment,Vu),transition_out(Ou.$$.fragment,Vu),$u=!1},d(Vu){destroy_component(Tu,Vu),Vu&&detach(Cu),Vu&&detach(Pu),destroy_component(Bu),Vu&&detach(Ru),Vu&&detach(Lu),destroy_component(Ou),Du(),ku=!1,Fu()}}}function create_fragment$i(_u){let Tu,Cu,Pu=_u[0].state&&create_if_block$f(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,[Ru]){Bu[0].state?Pu?(Pu.p(Bu,Ru),Ru&1&&transition_in(Pu,1)):(Pu=create_if_block$f(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function instance$i(_u,Tu,Cu){let Pu,Bu,Ru;var Lu;let{tag:Ou}=Tu,Du,$u=!1,ku=[];function Fu(){Cu(1,$u=!$u)}function Nu(){Du=this.clientWidth,Cu(3,Du)}return _u.$$set=Vu=>{"tag"in Vu&&Cu(0,Ou=Vu.tag)},_u.$$.update=()=>{_u.$$.dirty&129&&Cu(2,Pu=!!(!(Cu(7,Lu=Ou.state)===null||Lu===void 0)&&Lu.unfolded)),_u.$$.dirty&1&&Cu(8,Bu=Ou.data.text),_u.$$.dirty&256&&Cu(4,ku=[{id:uuid(),content:Bu}]),_u.$$.dirty&4&&(Pu||setTimeout(()=>{Cu(1,$u=!1)},20)),_u.$$.dirty&2&&Cu(5,Ru=$u?450:0)},[Ou,$u,Pu,Du,ku,Ru,Fu,Lu,Bu,Nu]}class TextTag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$i,create_fragment$i,safe_not_equal,{tag:0},add_css$g)}}function add_css$f(_u){append_styles(_u,"svelte-e72ouh",".line.svelte-e72ouh{width:100%;height:100%;overflow:visible}")}function create_if_block$e(_u){let Tu,Cu,Pu,Bu;return{c(){Tu=svg_element("path"),attr$1(Tu,"fill","none"),attr$1(Tu,"stroke","url(#"+_u[4]+")"),attr$1(Tu,"stroke-width","1"),attr$1(Tu,"d","M0 21 L14 0.5 L105 0.5")},m(Ru,Lu){insert(Ru,Tu,Lu),Bu=!0},p(Ru,Lu){_u=Ru},i(Ru){Bu||(Ru&&add_render_callback(()=>{Pu&&Pu.end(1),Cu=create_in_transition(Tu,draw,{duration:_u[1],delay:_u[0],easing:cubicOut}),Cu.start()}),Bu=!0)},o(Ru){Cu&&Cu.invalidate(),Ru&&(Pu=create_out_transition(Tu,draw,{duration:_u[1],delay:_u[2],easing:cubicInOut})),Bu=!1},d(Ru){Ru&&detach(Tu),Ru&&Pu&&Pu.end()}}}function create_fragment$h(_u){let Tu,Cu,Pu,Bu,Ru,Lu=_u[3]&&create_if_block$e(_u);return{c(){Tu=svg_element("svg"),Cu=svg_element("defs"),Pu=svg_element("linearGradient"),Bu=svg_element("stop"),Ru=svg_element("stop"),Lu&&Lu.c(),attr$1(Bu,"offset","25%"),attr$1(Bu,"stop-color","white"),attr$1(Bu,"stop-opacity","1"),attr$1(Ru,"offset","100%"),attr$1(Ru,"stop-color","white"),attr$1(Ru,"stop-opacity","0.5"),attr$1(Pu,"id",_u[4]),attr$1(Pu,"gradientUnits","userSpaceOnUse"),attr$1(Tu,"class","line svelte-e72ouh"),attr$1(Tu,"viewBox","0 0 105 21")},m(Ou,Du){insert(Ou,Tu,Du),append$1(Tu,Cu),append$1(Cu,Pu),append$1(Pu,Bu),append$1(Pu,Ru),Lu&&Lu.m(Tu,null)},p(Ou,[Du]){Ou[3]?Lu?(Lu.p(Ou,Du),Du&8&&transition_in(Lu,1)):(Lu=create_if_block$e(Ou),Lu.c(),transition_in(Lu,1),Lu.m(Tu,null)):Lu&&(group_outros(),transition_out(Lu,1,1,()=>{Lu=null}),check_outros())},i(Ou){transition_in(Lu)},o(Ou){transition_out(Lu)},d(Ou){Ou&&detach(Tu),Lu&&Lu.d()}}}function instance$h(_u,Tu,Cu){let{inDelay:Pu=0}=Tu,{duration:Bu=0}=Tu,{outDelay:Ru=0}=Tu,{unfolded:Lu}=Tu;const Ou=uuid();return _u.$$set=Du=>{"inDelay"in Du&&Cu(0,Pu=Du.inDelay),"duration"in Du&&Cu(1,Bu=Du.duration),"outDelay"in Du&&Cu(2,Ru=Du.outDelay),"unfolded"in Du&&Cu(3,Lu=Du.unfolded)},[Pu,Bu,Ru,Lu,Ou]}class Polyline extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$h,create_fragment$h,safe_not_equal,{inDelay:0,duration:1,outDelay:2,unfolded:3},add_css$f)}}const Methods={addClass,removeClass,hasClass,toggleClass,attr,removeAttr,transform,transition:transition$1,on,off,trigger,transitionEnd:transitionEnd$1,outerWidth,outerHeight,styles,offset,css,each,html,text,is,index,eq,append,prepend,next,nextAll,prev,prevAll,parent,parents,closest,find,children,filter,remove};Object.keys(Methods).forEach(_u=>{Object.defineProperty($.fn,_u,{value:Methods[_u],writable:!0})});function deleteProps(_u){const Tu=_u;Object.keys(Tu).forEach(Cu=>{try{Tu[Cu]=null}catch{}try{delete Tu[Cu]}catch{}})}function nextTick(_u,Tu=0){return setTimeout(_u,Tu)}function now(){return Date.now()}function getComputedStyle$1(_u){const Tu=getWindow();let Cu;return Tu.getComputedStyle&&(Cu=Tu.getComputedStyle(_u,null)),!Cu&&_u.currentStyle&&(Cu=_u.currentStyle),Cu||(Cu=_u.style),Cu}function getTranslate(_u,Tu="x"){const Cu=getWindow();let Pu,Bu,Ru;const Lu=getComputedStyle$1(_u);return Cu.WebKitCSSMatrix?(Bu=Lu.transform||Lu.webkitTransform,Bu.split(",").length>6&&(Bu=Bu.split(", ").map(Ou=>Ou.replace(",",".")).join(", ")),Ru=new Cu.WebKitCSSMatrix(Bu==="none"?"":Bu)):(Ru=Lu.MozTransform||Lu.OTransform||Lu.MsTransform||Lu.msTransform||Lu.transform||Lu.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),Pu=Ru.toString().split(",")),Tu==="x"&&(Cu.WebKitCSSMatrix?Bu=Ru.m41:Pu.length===16?Bu=parseFloat(Pu[12]):Bu=parseFloat(Pu[4])),Tu==="y"&&(Cu.WebKitCSSMatrix?Bu=Ru.m42:Pu.length===16?Bu=parseFloat(Pu[13]):Bu=parseFloat(Pu[5])),Bu||0}function isObject$1(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function isNode(_u){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?_u instanceof HTMLElement:_u&&(_u.nodeType===1||_u.nodeType===11)}function extend$1(..._u){const Tu=Object(_u[0]),Cu=["__proto__","constructor","prototype"];for(let Pu=1;Pu<_u.length;Pu+=1){const Bu=_u[Pu];if(Bu!=null&&!isNode(Bu)){const Ru=Object.keys(Object(Bu)).filter(Lu=>Cu.indexOf(Lu)<0);for(let Lu=0,Ou=Ru.length;Lu<Ou;Lu+=1){const Du=Ru[Lu],$u=Object.getOwnPropertyDescriptor(Bu,Du);$u!==void 0&&$u.enumerable&&(isObject$1(Tu[Du])&&isObject$1(Bu[Du])?Bu[Du].__swiper__?Tu[Du]=Bu[Du]:extend$1(Tu[Du],Bu[Du]):!isObject$1(Tu[Du])&&isObject$1(Bu[Du])?(Tu[Du]={},Bu[Du].__swiper__?Tu[Du]=Bu[Du]:extend$1(Tu[Du],Bu[Du])):Tu[Du]=Bu[Du])}}}return Tu}function setCSSProperty(_u,Tu,Cu){_u.style.setProperty(Tu,Cu)}function animateCSSModeScroll({swiper:_u,targetPosition:Tu,side:Cu}){const Pu=getWindow(),Bu=-_u.translate;let Ru=null,Lu;const Ou=_u.params.speed;_u.wrapperEl.style.scrollSnapType="none",Pu.cancelAnimationFrame(_u.cssModeFrameID);const Du=Tu>Bu?"next":"prev",$u=(Fu,Nu)=>Du==="next"&&Fu>=Nu||Du==="prev"&&Fu<=Nu,ku=()=>{Lu=new Date().getTime(),Ru===null&&(Ru=Lu);const Fu=Math.max(Math.min((Lu-Ru)/Ou,1),0),Nu=.5-Math.cos(Fu*Math.PI)/2;let Vu=Bu+Nu*(Tu-Bu);if($u(Vu,Tu)&&(Vu=Tu),_u.wrapperEl.scrollTo({[Cu]:Vu}),$u(Vu,Tu)){_u.wrapperEl.style.overflow="hidden",_u.wrapperEl.style.scrollSnapType="",setTimeout(()=>{_u.wrapperEl.style.overflow="",_u.wrapperEl.scrollTo({[Cu]:Vu})}),Pu.cancelAnimationFrame(_u.cssModeFrameID);return}_u.cssModeFrameID=Pu.requestAnimationFrame(ku)};ku()}let support;function calcSupport(){const _u=getWindow(),Tu=getDocument();return{smoothScroll:Tu.documentElement&&"scrollBehavior"in Tu.documentElement.style,touch:!!("ontouchstart"in _u||_u.DocumentTouch&&Tu instanceof _u.DocumentTouch),passiveListener:function(){let Pu=!1;try{const Bu=Object.defineProperty({},"passive",{get(){Pu=!0}});_u.addEventListener("testPassiveListener",null,Bu)}catch{}return Pu}(),gestures:function(){return"ongesturestart"in _u}()}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice({userAgent:_u}={}){const Tu=getSupport(),Cu=getWindow(),Pu=Cu.navigator.platform,Bu=_u||Cu.navigator.userAgent,Ru={ios:!1,android:!1},Lu=Cu.screen.width,Ou=Cu.screen.height,Du=Bu.match(/(Android);?[\s\/]+([\d.]+)?/);let $u=Bu.match(/(iPad).*OS\s([\d_]+)/);const ku=Bu.match(/(iPod)(.*OS\s([\d_]+))?/),Fu=!$u&&Bu.match(/(iPhone\sOS|iOS)\s([\d_]+)/),Nu=Pu==="Win32";let Vu=Pu==="MacIntel";const Gu=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!$u&&Vu&&Tu.touch&&Gu.indexOf(`${Lu}x${Ou}`)>=0&&($u=Bu.match(/(Version)\/([\d.]+)/),$u||($u=[0,1,"13_0_0"]),Vu=!1),Du&&!Nu&&(Ru.os="android",Ru.android=!0),($u||Fu||ku)&&(Ru.os="ios",Ru.ios=!0),Ru}function getDevice(_u={}){return deviceCached||(deviceCached=calcDevice(_u)),deviceCached}let browser;function calcBrowser(){const _u=getWindow();function Tu(){const Cu=_u.navigator.userAgent.toLowerCase();return Cu.indexOf("safari")>=0&&Cu.indexOf("chrome")<0&&Cu.indexOf("android")<0}return{isSafari:Tu(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_u.navigator.userAgent)}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize({swiper:_u,on:Tu,emit:Cu}){const Pu=getWindow();let Bu=null,Ru=null;const Lu=()=>{!_u||_u.destroyed||!_u.initialized||(Cu("beforeResize"),Cu("resize"))},Ou=()=>{!_u||_u.destroyed||!_u.initialized||(Bu=new ResizeObserver(ku=>{Ru=Pu.requestAnimationFrame(()=>{const{width:Fu,height:Nu}=_u;let Vu=Fu,Gu=Nu;ku.forEach(({contentBoxSize:Hu,contentRect:ju,target:Uu})=>{Uu&&Uu!==_u.el||(Vu=ju?ju.width:(Hu[0]||Hu).inlineSize,Gu=ju?ju.height:(Hu[0]||Hu).blockSize)}),(Vu!==Fu||Gu!==Nu)&&Lu()})}),Bu.observe(_u.el))},Du=()=>{Ru&&Pu.cancelAnimationFrame(Ru),Bu&&Bu.unobserve&&_u.el&&(Bu.unobserve(_u.el),Bu=null)},$u=()=>{!_u||_u.destroyed||!_u.initialized||Cu("orientationchange")};Tu("init",()=>{if(_u.params.resizeObserver&&typeof Pu.ResizeObserver!="undefined"){Ou();return}Pu.addEventListener("resize",Lu),Pu.addEventListener("orientationchange",$u)}),Tu("destroy",()=>{Du(),Pu.removeEventListener("resize",Lu),Pu.removeEventListener("orientationchange",$u)})}function Observer({swiper:_u,extendParams:Tu,on:Cu,emit:Pu}){const Bu=[],Ru=getWindow(),Lu=($u,ku={})=>{const Fu=Ru.MutationObserver||Ru.WebkitMutationObserver,Nu=new Fu(Vu=>{if(Vu.length===1){Pu("observerUpdate",Vu[0]);return}const Gu=function(){Pu("observerUpdate",Vu[0])};Ru.requestAnimationFrame?Ru.requestAnimationFrame(Gu):Ru.setTimeout(Gu,0)});Nu.observe($u,{attributes:typeof ku.attributes=="undefined"?!0:ku.attributes,childList:typeof ku.childList=="undefined"?!0:ku.childList,characterData:typeof ku.characterData=="undefined"?!0:ku.characterData}),Bu.push(Nu)},Ou=()=>{if(!!_u.params.observer){if(_u.params.observeParents){const $u=_u.$el.parents();for(let ku=0;ku<$u.length;ku+=1)Lu($u[ku])}Lu(_u.$el[0],{childList:_u.params.observeSlideChildren}),Lu(_u.$wrapperEl[0],{attributes:!1})}},Du=()=>{Bu.forEach($u=>{$u.disconnect()}),Bu.splice(0,Bu.length)};Tu({observer:!1,observeParents:!1,observeSlideChildren:!1}),Cu("init",Ou),Cu("destroy",Du)}var eventsEmitter={on(_u,Tu,Cu){const Pu=this;if(!Pu.eventsListeners||Pu.destroyed||typeof Tu!="function")return Pu;const Bu=Cu?"unshift":"push";return _u.split(" ").forEach(Ru=>{Pu.eventsListeners[Ru]||(Pu.eventsListeners[Ru]=[]),Pu.eventsListeners[Ru][Bu](Tu)}),Pu},once(_u,Tu,Cu){const Pu=this;if(!Pu.eventsListeners||Pu.destroyed||typeof Tu!="function")return Pu;function Bu(...Ru){Pu.off(_u,Bu),Bu.__emitterProxy&&delete Bu.__emitterProxy,Tu.apply(Pu,Ru)}return Bu.__emitterProxy=Tu,Pu.on(_u,Bu,Cu)},onAny(_u,Tu){const Cu=this;if(!Cu.eventsListeners||Cu.destroyed||typeof _u!="function")return Cu;const Pu=Tu?"unshift":"push";return Cu.eventsAnyListeners.indexOf(_u)<0&&Cu.eventsAnyListeners[Pu](_u),Cu},offAny(_u){const Tu=this;if(!Tu.eventsListeners||Tu.destroyed||!Tu.eventsAnyListeners)return Tu;const Cu=Tu.eventsAnyListeners.indexOf(_u);return Cu>=0&&Tu.eventsAnyListeners.splice(Cu,1),Tu},off(_u,Tu){const Cu=this;return!Cu.eventsListeners||Cu.destroyed||!Cu.eventsListeners||_u.split(" ").forEach(Pu=>{typeof Tu=="undefined"?Cu.eventsListeners[Pu]=[]:Cu.eventsListeners[Pu]&&Cu.eventsListeners[Pu].forEach((Bu,Ru)=>{(Bu===Tu||Bu.__emitterProxy&&Bu.__emitterProxy===Tu)&&Cu.eventsListeners[Pu].splice(Ru,1)})}),Cu},emit(..._u){const Tu=this;if(!Tu.eventsListeners||Tu.destroyed||!Tu.eventsListeners)return Tu;let Cu,Pu,Bu;return typeof _u[0]=="string"||Array.isArray(_u[0])?(Cu=_u[0],Pu=_u.slice(1,_u.length),Bu=Tu):(Cu=_u[0].events,Pu=_u[0].data,Bu=_u[0].context||Tu),Pu.unshift(Bu),(Array.isArray(Cu)?Cu:Cu.split(" ")).forEach(Lu=>{Tu.eventsAnyListeners&&Tu.eventsAnyListeners.length&&Tu.eventsAnyListeners.forEach(Ou=>{Ou.apply(Bu,[Lu,...Pu])}),Tu.eventsListeners&&Tu.eventsListeners[Lu]&&Tu.eventsListeners[Lu].forEach(Ou=>{Ou.apply(Bu,Pu)})}),Tu}};function updateSize(){const _u=this;let Tu,Cu;const Pu=_u.$el;typeof _u.params.width!="undefined"&&_u.params.width!==null?Tu=_u.params.width:Tu=Pu[0].clientWidth,typeof _u.params.height!="undefined"&&_u.params.height!==null?Cu=_u.params.height:Cu=Pu[0].clientHeight,!(Tu===0&&_u.isHorizontal()||Cu===0&&_u.isVertical())&&(Tu=Tu-parseInt(Pu.css("padding-left")||0,10)-parseInt(Pu.css("padding-right")||0,10),Cu=Cu-parseInt(Pu.css("padding-top")||0,10)-parseInt(Pu.css("padding-bottom")||0,10),Number.isNaN(Tu)&&(Tu=0),Number.isNaN(Cu)&&(Cu=0),Object.assign(_u,{width:Tu,height:Cu,size:_u.isHorizontal()?Tu:Cu}))}function updateSlides(){const _u=this;function Tu(Ku){return _u.isHorizontal()?Ku:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Ku]}function Cu(Ku,Xu){return parseFloat(Ku.getPropertyValue(Tu(Xu))||0)}const Pu=_u.params,{$wrapperEl:Bu,size:Ru,rtlTranslate:Lu,wrongRTL:Ou}=_u,Du=_u.virtual&&Pu.virtual.enabled,$u=Du?_u.virtual.slides.length:_u.slides.length,ku=Bu.children(`.${_u.params.slideClass}`),Fu=Du?_u.virtual.slides.length:ku.length;let Nu=[];const Vu=[],Gu=[];let Hu=Pu.slidesOffsetBefore;typeof Hu=="function"&&(Hu=Pu.slidesOffsetBefore.call(_u));let ju=Pu.slidesOffsetAfter;typeof ju=="function"&&(ju=Pu.slidesOffsetAfter.call(_u));const Uu=_u.snapGrid.length,zu=_u.slidesGrid.length;let Wu=Pu.spaceBetween,Qu=-Hu,qu=0,Yu=0;if(typeof Ru=="undefined")return;typeof Wu=="string"&&Wu.indexOf("%")>=0&&(Wu=parseFloat(Wu.replace("%",""))/100*Ru),_u.virtualSize=-Wu,Lu?ku.css({marginLeft:"",marginBottom:"",marginTop:""}):ku.css({marginRight:"",marginBottom:"",marginTop:""}),Pu.centeredSlides&&Pu.cssMode&&(setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-before",""),setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-after",""));const Xc=Pu.grid&&Pu.grid.rows>1&&_u.grid;Xc&&_u.grid.initSlides(Fu);let _h;const _d=Pu.slidesPerView==="auto"&&Pu.breakpoints&&Object.keys(Pu.breakpoints).filter(Ku=>typeof Pu.breakpoints[Ku].slidesPerView!="undefined").length>0;for(let Ku=0;Ku<Fu;Ku+=1){_h=0;const Xu=ku.eq(Ku);if(Xc&&_u.grid.updateSlide(Ku,Xu,Fu,Tu),Xu.css("display")!=="none"){if(Pu.slidesPerView==="auto"){_d&&(ku[Ku].style[Tu("width")]="");const Ju=getComputedStyle(Xu[0]),Zu=Xu[0].style.transform,_c=Xu[0].style.webkitTransform;if(Zu&&(Xu[0].style.transform="none"),_c&&(Xu[0].style.webkitTransform="none"),Pu.roundLengths)_h=_u.isHorizontal()?Xu.outerWidth(!0):Xu.outerHeight(!0);else{const _f=Cu(Ju,"width"),ep=Cu(Ju,"padding-left"),tp=Cu(Ju,"padding-right"),op=Cu(Ju,"margin-left"),hp=Cu(Ju,"margin-right"),cp=Ju.getPropertyValue("box-sizing");if(cp&&cp==="border-box")_h=_f+op+hp;else{const{clientWidth:Sp,offsetWidth:yp}=Xu[0];_h=_f+ep+tp+op+hp+(yp-Sp)}}Zu&&(Xu[0].style.transform=Zu),_c&&(Xu[0].style.webkitTransform=_c),Pu.roundLengths&&(_h=Math.floor(_h))}else _h=(Ru-(Pu.slidesPerView-1)*Wu)/Pu.slidesPerView,Pu.roundLengths&&(_h=Math.floor(_h)),ku[Ku]&&(ku[Ku].style[Tu("width")]=`${_h}px`);ku[Ku]&&(ku[Ku].swiperSlideSize=_h),Gu.push(_h),Pu.centeredSlides?(Qu=Qu+_h/2+qu/2+Wu,qu===0&&Ku!==0&&(Qu=Qu-Ru/2-Wu),Ku===0&&(Qu=Qu-Ru/2-Wu),Math.abs(Qu)<1/1e3&&(Qu=0),Pu.roundLengths&&(Qu=Math.floor(Qu)),Yu%Pu.slidesPerGroup===0&&Nu.push(Qu),Vu.push(Qu)):(Pu.roundLengths&&(Qu=Math.floor(Qu)),(Yu-Math.min(_u.params.slidesPerGroupSkip,Yu))%_u.params.slidesPerGroup===0&&Nu.push(Qu),Vu.push(Qu),Qu=Qu+_h+Wu),_u.virtualSize+=_h+Wu,qu=_h,Yu+=1}}if(_u.virtualSize=Math.max(_u.virtualSize,Ru)+ju,Lu&&Ou&&(Pu.effect==="slide"||Pu.effect==="coverflow")&&Bu.css({width:`${_u.virtualSize+Pu.spaceBetween}px`}),Pu.setWrapperSize&&Bu.css({[Tu("width")]:`${_u.virtualSize+Pu.spaceBetween}px`}),Xc&&_u.grid.updateWrapperSize(_h,Nu,Tu),!Pu.centeredSlides){const Ku=[];for(let Xu=0;Xu<Nu.length;Xu+=1){let Ju=Nu[Xu];Pu.roundLengths&&(Ju=Math.floor(Ju)),Nu[Xu]<=_u.virtualSize-Ru&&Ku.push(Ju)}Nu=Ku,Math.floor(_u.virtualSize-Ru)-Math.floor(Nu[Nu.length-1])>1&&Nu.push(_u.virtualSize-Ru)}if(Nu.length===0&&(Nu=[0]),Pu.spaceBetween!==0){const Ku=_u.isHorizontal()&&Lu?"marginLeft":Tu("marginRight");ku.filter((Xu,Ju)=>Pu.cssMode?Ju!==ku.length-1:!0).css({[Ku]:`${Wu}px`})}if(Pu.centeredSlides&&Pu.centeredSlidesBounds){let Ku=0;Gu.forEach(Ju=>{Ku+=Ju+(Pu.spaceBetween?Pu.spaceBetween:0)}),Ku-=Pu.spaceBetween;const Xu=Ku-Ru;Nu=Nu.map(Ju=>Ju<0?-Hu:Ju>Xu?Xu+ju:Ju)}if(Pu.centerInsufficientSlides){let Ku=0;if(Gu.forEach(Xu=>{Ku+=Xu+(Pu.spaceBetween?Pu.spaceBetween:0)}),Ku-=Pu.spaceBetween,Ku<Ru){const Xu=(Ru-Ku)/2;Nu.forEach((Ju,Zu)=>{Nu[Zu]=Ju-Xu}),Vu.forEach((Ju,Zu)=>{Vu[Zu]=Ju+Xu})}}if(Object.assign(_u,{slides:ku,snapGrid:Nu,slidesGrid:Vu,slidesSizesGrid:Gu}),Pu.centeredSlides&&Pu.cssMode&&!Pu.centeredSlidesBounds){setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-before",`${-Nu[0]}px`),setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-after",`${_u.size/2-Gu[Gu.length-1]/2}px`);const Ku=-_u.snapGrid[0],Xu=-_u.slidesGrid[0];_u.snapGrid=_u.snapGrid.map(Ju=>Ju+Ku),_u.slidesGrid=_u.slidesGrid.map(Ju=>Ju+Xu)}if(Fu!==$u&&_u.emit("slidesLengthChange"),Nu.length!==Uu&&(_u.params.watchOverflow&&_u.checkOverflow(),_u.emit("snapGridLengthChange")),Vu.length!==zu&&_u.emit("slidesGridLengthChange"),Pu.watchSlidesProgress&&_u.updateSlidesOffset(),!Du&&!Pu.cssMode&&(Pu.effect==="slide"||Pu.effect==="fade")){const Ku=`${Pu.containerModifierClass}backface-hidden`,Xu=_u.$el.hasClass(Ku);Fu<=Pu.maxBackfaceHiddenSlides?Xu||_u.$el.addClass(Ku):Xu&&_u.$el.removeClass(Ku)}}function updateAutoHeight(_u){const Tu=this,Cu=[],Pu=Tu.virtual&&Tu.params.virtual.enabled;let Bu=0,Ru;typeof _u=="number"?Tu.setTransition(_u):_u===!0&&Tu.setTransition(Tu.params.speed);const Lu=Ou=>Pu?Tu.slides.filter(Du=>parseInt(Du.getAttribute("data-swiper-slide-index"),10)===Ou)[0]:Tu.slides.eq(Ou)[0];if(Tu.params.slidesPerView!=="auto"&&Tu.params.slidesPerView>1)if(Tu.params.centeredSlides)(Tu.visibleSlides||$([])).each(Ou=>{Cu.push(Ou)});else for(Ru=0;Ru<Math.ceil(Tu.params.slidesPerView);Ru+=1){const Ou=Tu.activeIndex+Ru;if(Ou>Tu.slides.length&&!Pu)break;Cu.push(Lu(Ou))}else Cu.push(Lu(Tu.activeIndex));for(Ru=0;Ru<Cu.length;Ru+=1)if(typeof Cu[Ru]!="undefined"){const Ou=Cu[Ru].offsetHeight;Bu=Ou>Bu?Ou:Bu}(Bu||Bu===0)&&Tu.$wrapperEl.css("height",`${Bu}px`)}function updateSlidesOffset(){const _u=this,Tu=_u.slides;for(let Cu=0;Cu<Tu.length;Cu+=1)Tu[Cu].swiperSlideOffset=_u.isHorizontal()?Tu[Cu].offsetLeft:Tu[Cu].offsetTop}function updateSlidesProgress(_u=this&&this.translate||0){const Tu=this,Cu=Tu.params,{slides:Pu,rtlTranslate:Bu,snapGrid:Ru}=Tu;if(Pu.length===0)return;typeof Pu[0].swiperSlideOffset=="undefined"&&Tu.updateSlidesOffset();let Lu=-_u;Bu&&(Lu=_u),Pu.removeClass(Cu.slideVisibleClass),Tu.visibleSlidesIndexes=[],Tu.visibleSlides=[];for(let Ou=0;Ou<Pu.length;Ou+=1){const Du=Pu[Ou];let $u=Du.swiperSlideOffset;Cu.cssMode&&Cu.centeredSlides&&($u-=Pu[0].swiperSlideOffset);const ku=(Lu+(Cu.centeredSlides?Tu.minTranslate():0)-$u)/(Du.swiperSlideSize+Cu.spaceBetween),Fu=(Lu-Ru[0]+(Cu.centeredSlides?Tu.minTranslate():0)-$u)/(Du.swiperSlideSize+Cu.spaceBetween),Nu=-(Lu-$u),Vu=Nu+Tu.slidesSizesGrid[Ou];(Nu>=0&&Nu<Tu.size-1||Vu>1&&Vu<=Tu.size||Nu<=0&&Vu>=Tu.size)&&(Tu.visibleSlides.push(Du),Tu.visibleSlidesIndexes.push(Ou),Pu.eq(Ou).addClass(Cu.slideVisibleClass)),Du.progress=Bu?-ku:ku,Du.originalProgress=Bu?-Fu:Fu}Tu.visibleSlides=$(Tu.visibleSlides)}function updateProgress(_u){const Tu=this;if(typeof _u=="undefined"){const $u=Tu.rtlTranslate?-1:1;_u=Tu&&Tu.translate&&Tu.translate*$u||0}const Cu=Tu.params,Pu=Tu.maxTranslate()-Tu.minTranslate();let{progress:Bu,isBeginning:Ru,isEnd:Lu}=Tu;const Ou=Ru,Du=Lu;Pu===0?(Bu=0,Ru=!0,Lu=!0):(Bu=(_u-Tu.minTranslate())/Pu,Ru=Bu<=0,Lu=Bu>=1),Object.assign(Tu,{progress:Bu,isBeginning:Ru,isEnd:Lu}),(Cu.watchSlidesProgress||Cu.centeredSlides&&Cu.autoHeight)&&Tu.updateSlidesProgress(_u),Ru&&!Ou&&Tu.emit("reachBeginning toEdge"),Lu&&!Du&&Tu.emit("reachEnd toEdge"),(Ou&&!Ru||Du&&!Lu)&&Tu.emit("fromEdge"),Tu.emit("progress",Bu)}function updateSlidesClasses(){const _u=this,{slides:Tu,params:Cu,$wrapperEl:Pu,activeIndex:Bu,realIndex:Ru}=_u,Lu=_u.virtual&&Cu.virtual.enabled;Tu.removeClass(`${Cu.slideActiveClass} ${Cu.slideNextClass} ${Cu.slidePrevClass} ${Cu.slideDuplicateActiveClass} ${Cu.slideDuplicateNextClass} ${Cu.slideDuplicatePrevClass}`);let Ou;Lu?Ou=_u.$wrapperEl.find(`.${Cu.slideClass}[data-swiper-slide-index="${Bu}"]`):Ou=Tu.eq(Bu),Ou.addClass(Cu.slideActiveClass),Cu.loop&&(Ou.hasClass(Cu.slideDuplicateClass)?Pu.children(`.${Cu.slideClass}:not(.${Cu.slideDuplicateClass})[data-swiper-slide-index="${Ru}"]`).addClass(Cu.slideDuplicateActiveClass):Pu.children(`.${Cu.slideClass}.${Cu.slideDuplicateClass}[data-swiper-slide-index="${Ru}"]`).addClass(Cu.slideDuplicateActiveClass));let Du=Ou.nextAll(`.${Cu.slideClass}`).eq(0).addClass(Cu.slideNextClass);Cu.loop&&Du.length===0&&(Du=Tu.eq(0),Du.addClass(Cu.slideNextClass));let $u=Ou.prevAll(`.${Cu.slideClass}`).eq(0).addClass(Cu.slidePrevClass);Cu.loop&&$u.length===0&&($u=Tu.eq(-1),$u.addClass(Cu.slidePrevClass)),Cu.loop&&(Du.hasClass(Cu.slideDuplicateClass)?Pu.children(`.${Cu.slideClass}:not(.${Cu.slideDuplicateClass})[data-swiper-slide-index="${Du.attr("data-swiper-slide-index")}"]`).addClass(Cu.slideDuplicateNextClass):Pu.children(`.${Cu.slideClass}.${Cu.slideDuplicateClass}[data-swiper-slide-index="${Du.attr("data-swiper-slide-index")}"]`).addClass(Cu.slideDuplicateNextClass),$u.hasClass(Cu.slideDuplicateClass)?Pu.children(`.${Cu.slideClass}:not(.${Cu.slideDuplicateClass})[data-swiper-slide-index="${$u.attr("data-swiper-slide-index")}"]`).addClass(Cu.slideDuplicatePrevClass):Pu.children(`.${Cu.slideClass}.${Cu.slideDuplicateClass}[data-swiper-slide-index="${$u.attr("data-swiper-slide-index")}"]`).addClass(Cu.slideDuplicatePrevClass)),_u.emitSlidesClasses()}function updateActiveIndex(_u){const Tu=this,Cu=Tu.rtlTranslate?Tu.translate:-Tu.translate,{slidesGrid:Pu,snapGrid:Bu,params:Ru,activeIndex:Lu,realIndex:Ou,snapIndex:Du}=Tu;let $u=_u,ku;if(typeof $u=="undefined"){for(let Nu=0;Nu<Pu.length;Nu+=1)typeof Pu[Nu+1]!="undefined"?Cu>=Pu[Nu]&&Cu<Pu[Nu+1]-(Pu[Nu+1]-Pu[Nu])/2?$u=Nu:Cu>=Pu[Nu]&&Cu<Pu[Nu+1]&&($u=Nu+1):Cu>=Pu[Nu]&&($u=Nu);Ru.normalizeSlideIndex&&($u<0||typeof $u=="undefined")&&($u=0)}if(Bu.indexOf(Cu)>=0)ku=Bu.indexOf(Cu);else{const Nu=Math.min(Ru.slidesPerGroupSkip,$u);ku=Nu+Math.floor(($u-Nu)/Ru.slidesPerGroup)}if(ku>=Bu.length&&(ku=Bu.length-1),$u===Lu){ku!==Du&&(Tu.snapIndex=ku,Tu.emit("snapIndexChange"));return}const Fu=parseInt(Tu.slides.eq($u).attr("data-swiper-slide-index")||$u,10);Object.assign(Tu,{snapIndex:ku,realIndex:Fu,previousIndex:Lu,activeIndex:$u}),Tu.emit("activeIndexChange"),Tu.emit("snapIndexChange"),Ou!==Fu&&Tu.emit("realIndexChange"),(Tu.initialized||Tu.params.runCallbacksOnInit)&&Tu.emit("slideChange")}function updateClickedSlide(_u){const Tu=this,Cu=Tu.params,Pu=$(_u).closest(`.${Cu.slideClass}`)[0];let Bu=!1,Ru;if(Pu){for(let Lu=0;Lu<Tu.slides.length;Lu+=1)if(Tu.slides[Lu]===Pu){Bu=!0,Ru=Lu;break}}if(Pu&&Bu)Tu.clickedSlide=Pu,Tu.virtual&&Tu.params.virtual.enabled?Tu.clickedIndex=parseInt($(Pu).attr("data-swiper-slide-index"),10):Tu.clickedIndex=Ru;else{Tu.clickedSlide=void 0,Tu.clickedIndex=void 0;return}Cu.slideToClickedSlide&&Tu.clickedIndex!==void 0&&Tu.clickedIndex!==Tu.activeIndex&&Tu.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(_u=this.isHorizontal()?"x":"y"){const Tu=this,{params:Cu,rtlTranslate:Pu,translate:Bu,$wrapperEl:Ru}=Tu;if(Cu.virtualTranslate)return Pu?-Bu:Bu;if(Cu.cssMode)return Bu;let Lu=getTranslate(Ru[0],_u);return Pu&&(Lu=-Lu),Lu||0}function setTranslate(_u,Tu){const Cu=this,{rtlTranslate:Pu,params:Bu,$wrapperEl:Ru,wrapperEl:Lu,progress:Ou}=Cu;let Du=0,$u=0;const ku=0;Cu.isHorizontal()?Du=Pu?-_u:_u:$u=_u,Bu.roundLengths&&(Du=Math.floor(Du),$u=Math.floor($u)),Bu.cssMode?Lu[Cu.isHorizontal()?"scrollLeft":"scrollTop"]=Cu.isHorizontal()?-Du:-$u:Bu.virtualTranslate||Ru.transform(`translate3d(${Du}px, ${$u}px, ${ku}px)`),Cu.previousTranslate=Cu.translate,Cu.translate=Cu.isHorizontal()?Du:$u;let Fu;const Nu=Cu.maxTranslate()-Cu.minTranslate();Nu===0?Fu=0:Fu=(_u-Cu.minTranslate())/Nu,Fu!==Ou&&Cu.updateProgress(_u),Cu.emit("setTranslate",Cu.translate,Tu)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(_u=0,Tu=this.params.speed,Cu=!0,Pu=!0,Bu){const Ru=this,{params:Lu,wrapperEl:Ou}=Ru;if(Ru.animating&&Lu.preventInteractionOnTransition)return!1;const Du=Ru.minTranslate(),$u=Ru.maxTranslate();let ku;if(Pu&&_u>Du?ku=Du:Pu&&_u<$u?ku=$u:ku=_u,Ru.updateProgress(ku),Lu.cssMode){const Fu=Ru.isHorizontal();if(Tu===0)Ou[Fu?"scrollLeft":"scrollTop"]=-ku;else{if(!Ru.support.smoothScroll)return animateCSSModeScroll({swiper:Ru,targetPosition:-ku,side:Fu?"left":"top"}),!0;Ou.scrollTo({[Fu?"left":"top"]:-ku,behavior:"smooth"})}return!0}return Tu===0?(Ru.setTransition(0),Ru.setTranslate(ku),Cu&&(Ru.emit("beforeTransitionStart",Tu,Bu),Ru.emit("transitionEnd"))):(Ru.setTransition(Tu),Ru.setTranslate(ku),Cu&&(Ru.emit("beforeTransitionStart",Tu,Bu),Ru.emit("transitionStart")),Ru.animating||(Ru.animating=!0,Ru.onTranslateToWrapperTransitionEnd||(Ru.onTranslateToWrapperTransitionEnd=function(Nu){!Ru||Ru.destroyed||Nu.target===this&&(Ru.$wrapperEl[0].removeEventListener("transitionend",Ru.onTranslateToWrapperTransitionEnd),Ru.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ru.onTranslateToWrapperTransitionEnd),Ru.onTranslateToWrapperTransitionEnd=null,delete Ru.onTranslateToWrapperTransitionEnd,Cu&&Ru.emit("transitionEnd"))}),Ru.$wrapperEl[0].addEventListener("transitionend",Ru.onTranslateToWrapperTransitionEnd),Ru.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ru.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(_u,Tu){const Cu=this;Cu.params.cssMode||Cu.$wrapperEl.transition(_u),Cu.emit("setTransition",_u,Tu)}function transitionEmit({swiper:_u,runCallbacks:Tu,direction:Cu,step:Pu}){const{activeIndex:Bu,previousIndex:Ru}=_u;let Lu=Cu;if(Lu||(Bu>Ru?Lu="next":Bu<Ru?Lu="prev":Lu="reset"),_u.emit(`transition${Pu}`),Tu&&Bu!==Ru){if(Lu==="reset"){_u.emit(`slideResetTransition${Pu}`);return}_u.emit(`slideChangeTransition${Pu}`),Lu==="next"?_u.emit(`slideNextTransition${Pu}`):_u.emit(`slidePrevTransition${Pu}`)}}function transitionStart(_u=!0,Tu){const Cu=this,{params:Pu}=Cu;Pu.cssMode||(Pu.autoHeight&&Cu.updateAutoHeight(),transitionEmit({swiper:Cu,runCallbacks:_u,direction:Tu,step:"Start"}))}function transitionEnd(_u=!0,Tu){const Cu=this,{params:Pu}=Cu;Cu.animating=!1,!Pu.cssMode&&(Cu.setTransition(0),transitionEmit({swiper:Cu,runCallbacks:_u,direction:Tu,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(_u=0,Tu=this.params.speed,Cu=!0,Pu,Bu){if(typeof _u!="number"&&typeof _u!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof _u}] given.`);if(typeof _u=="string"){const Wu=parseInt(_u,10);if(!isFinite(Wu))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Wu}const Ru=this;let Lu=_u;Lu<0&&(Lu=0);const{params:Ou,snapGrid:Du,slidesGrid:$u,previousIndex:ku,activeIndex:Fu,rtlTranslate:Nu,wrapperEl:Vu,enabled:Gu}=Ru;if(Ru.animating&&Ou.preventInteractionOnTransition||!Gu&&!Pu&&!Bu)return!1;const Hu=Math.min(Ru.params.slidesPerGroupSkip,Lu);let ju=Hu+Math.floor((Lu-Hu)/Ru.params.slidesPerGroup);ju>=Du.length&&(ju=Du.length-1);const Uu=-Du[ju];if(Ou.normalizeSlideIndex)for(let Wu=0;Wu<$u.length;Wu+=1){const Qu=-Math.floor(Uu*100),qu=Math.floor($u[Wu]*100),Yu=Math.floor($u[Wu+1]*100);typeof $u[Wu+1]!="undefined"?Qu>=qu&&Qu<Yu-(Yu-qu)/2?Lu=Wu:Qu>=qu&&Qu<Yu&&(Lu=Wu+1):Qu>=qu&&(Lu=Wu)}if(Ru.initialized&&Lu!==Fu&&(!Ru.allowSlideNext&&Uu<Ru.translate&&Uu<Ru.minTranslate()||!Ru.allowSlidePrev&&Uu>Ru.translate&&Uu>Ru.maxTranslate()&&(Fu||0)!==Lu))return!1;Lu!==(ku||0)&&Cu&&Ru.emit("beforeSlideChangeStart"),Ru.updateProgress(Uu);let zu;if(Lu>Fu?zu="next":Lu<Fu?zu="prev":zu="reset",Nu&&-Uu===Ru.translate||!Nu&&Uu===Ru.translate)return Ru.updateActiveIndex(Lu),Ou.autoHeight&&Ru.updateAutoHeight(),Ru.updateSlidesClasses(),Ou.effect!=="slide"&&Ru.setTranslate(Uu),zu!=="reset"&&(Ru.transitionStart(Cu,zu),Ru.transitionEnd(Cu,zu)),!1;if(Ou.cssMode){const Wu=Ru.isHorizontal(),Qu=Nu?Uu:-Uu;if(Tu===0){const qu=Ru.virtual&&Ru.params.virtual.enabled;qu&&(Ru.wrapperEl.style.scrollSnapType="none",Ru._immediateVirtual=!0),Vu[Wu?"scrollLeft":"scrollTop"]=Qu,qu&&requestAnimationFrame(()=>{Ru.wrapperEl.style.scrollSnapType="",Ru._swiperImmediateVirtual=!1})}else{if(!Ru.support.smoothScroll)return animateCSSModeScroll({swiper:Ru,targetPosition:Qu,side:Wu?"left":"top"}),!0;Vu.scrollTo({[Wu?"left":"top"]:Qu,behavior:"smooth"})}return!0}return Ru.setTransition(Tu),Ru.setTranslate(Uu),Ru.updateActiveIndex(Lu),Ru.updateSlidesClasses(),Ru.emit("beforeTransitionStart",Tu,Pu),Ru.transitionStart(Cu,zu),Tu===0?Ru.transitionEnd(Cu,zu):Ru.animating||(Ru.animating=!0,Ru.onSlideToWrapperTransitionEnd||(Ru.onSlideToWrapperTransitionEnd=function(Qu){!Ru||Ru.destroyed||Qu.target===this&&(Ru.$wrapperEl[0].removeEventListener("transitionend",Ru.onSlideToWrapperTransitionEnd),Ru.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ru.onSlideToWrapperTransitionEnd),Ru.onSlideToWrapperTransitionEnd=null,delete Ru.onSlideToWrapperTransitionEnd,Ru.transitionEnd(Cu,zu))}),Ru.$wrapperEl[0].addEventListener("transitionend",Ru.onSlideToWrapperTransitionEnd),Ru.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ru.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(_u=0,Tu=this.params.speed,Cu=!0,Pu){if(typeof _u=="string"){const Lu=parseInt(_u,10);if(!isFinite(Lu))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Lu}const Bu=this;let Ru=_u;return Bu.params.loop&&(Ru+=Bu.loopedSlides),Bu.slideTo(Ru,Tu,Cu,Pu)}function slideNext(_u=this.params.speed,Tu=!0,Cu){const Pu=this,{animating:Bu,enabled:Ru,params:Lu}=Pu;if(!Ru)return Pu;let Ou=Lu.slidesPerGroup;Lu.slidesPerView==="auto"&&Lu.slidesPerGroup===1&&Lu.slidesPerGroupAuto&&(Ou=Math.max(Pu.slidesPerViewDynamic("current",!0),1));const Du=Pu.activeIndex<Lu.slidesPerGroupSkip?1:Ou;if(Lu.loop){if(Bu&&Lu.loopPreventsSlide)return!1;Pu.loopFix(),Pu._clientLeft=Pu.$wrapperEl[0].clientLeft}return Lu.rewind&&Pu.isEnd?Pu.slideTo(0,_u,Tu,Cu):Pu.slideTo(Pu.activeIndex+Du,_u,Tu,Cu)}function slidePrev(_u=this.params.speed,Tu=!0,Cu){const Pu=this,{params:Bu,animating:Ru,snapGrid:Lu,slidesGrid:Ou,rtlTranslate:Du,enabled:$u}=Pu;if(!$u)return Pu;if(Bu.loop){if(Ru&&Bu.loopPreventsSlide)return!1;Pu.loopFix(),Pu._clientLeft=Pu.$wrapperEl[0].clientLeft}const ku=Du?Pu.translate:-Pu.translate;function Fu(ju){return ju<0?-Math.floor(Math.abs(ju)):Math.floor(ju)}const Nu=Fu(ku),Vu=Lu.map(ju=>Fu(ju));let Gu=Lu[Vu.indexOf(Nu)-1];if(typeof Gu=="undefined"&&Bu.cssMode){let ju;Lu.forEach((Uu,zu)=>{Nu>=Uu&&(ju=zu)}),typeof ju!="undefined"&&(Gu=Lu[ju>0?ju-1:ju])}let Hu=0;if(typeof Gu!="undefined"&&(Hu=Ou.indexOf(Gu),Hu<0&&(Hu=Pu.activeIndex-1),Bu.slidesPerView==="auto"&&Bu.slidesPerGroup===1&&Bu.slidesPerGroupAuto&&(Hu=Hu-Pu.slidesPerViewDynamic("previous",!0)+1,Hu=Math.max(Hu,0))),Bu.rewind&&Pu.isBeginning){const ju=Pu.params.virtual&&Pu.params.virtual.enabled&&Pu.virtual?Pu.virtual.slides.length-1:Pu.slides.length-1;return Pu.slideTo(ju,_u,Tu,Cu)}return Pu.slideTo(Hu,_u,Tu,Cu)}function slideReset(_u=this.params.speed,Tu=!0,Cu){const Pu=this;return Pu.slideTo(Pu.activeIndex,_u,Tu,Cu)}function slideToClosest(_u=this.params.speed,Tu=!0,Cu,Pu=.5){const Bu=this;let Ru=Bu.activeIndex;const Lu=Math.min(Bu.params.slidesPerGroupSkip,Ru),Ou=Lu+Math.floor((Ru-Lu)/Bu.params.slidesPerGroup),Du=Bu.rtlTranslate?Bu.translate:-Bu.translate;if(Du>=Bu.snapGrid[Ou]){const $u=Bu.snapGrid[Ou],ku=Bu.snapGrid[Ou+1];Du-$u>(ku-$u)*Pu&&(Ru+=Bu.params.slidesPerGroup)}else{const $u=Bu.snapGrid[Ou-1],ku=Bu.snapGrid[Ou];Du-$u<=(ku-$u)*Pu&&(Ru-=Bu.params.slidesPerGroup)}return Ru=Math.max(Ru,0),Ru=Math.min(Ru,Bu.slidesGrid.length-1),Bu.slideTo(Ru,_u,Tu,Cu)}function slideToClickedSlide(){const _u=this,{params:Tu,$wrapperEl:Cu}=_u,Pu=Tu.slidesPerView==="auto"?_u.slidesPerViewDynamic():Tu.slidesPerView;let Bu=_u.clickedIndex,Ru;if(Tu.loop){if(_u.animating)return;Ru=parseInt($(_u.clickedSlide).attr("data-swiper-slide-index"),10),Tu.centeredSlides?Bu<_u.loopedSlides-Pu/2||Bu>_u.slides.length-_u.loopedSlides+Pu/2?(_u.loopFix(),Bu=Cu.children(`.${Tu.slideClass}[data-swiper-slide-index="${Ru}"]:not(.${Tu.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{_u.slideTo(Bu)})):_u.slideTo(Bu):Bu>_u.slides.length-Pu?(_u.loopFix(),Bu=Cu.children(`.${Tu.slideClass}[data-swiper-slide-index="${Ru}"]:not(.${Tu.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{_u.slideTo(Bu)})):_u.slideTo(Bu)}else _u.slideTo(Bu)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(){const _u=this,Tu=getDocument(),{params:Cu,$wrapperEl:Pu}=_u,Bu=Pu.children().length>0?$(Pu.children()[0].parentNode):Pu;Bu.children(`.${Cu.slideClass}.${Cu.slideDuplicateClass}`).remove();let Ru=Bu.children(`.${Cu.slideClass}`);if(Cu.loopFillGroupWithBlank){const Du=Cu.slidesPerGroup-Ru.length%Cu.slidesPerGroup;if(Du!==Cu.slidesPerGroup){for(let $u=0;$u<Du;$u+=1){const ku=$(Tu.createElement("div")).addClass(`${Cu.slideClass} ${Cu.slideBlankClass}`);Bu.append(ku)}Ru=Bu.children(`.${Cu.slideClass}`)}}Cu.slidesPerView==="auto"&&!Cu.loopedSlides&&(Cu.loopedSlides=Ru.length),_u.loopedSlides=Math.ceil(parseFloat(Cu.loopedSlides||Cu.slidesPerView,10)),_u.loopedSlides+=Cu.loopAdditionalSlides,_u.loopedSlides>Ru.length&&_u.params.loopedSlidesLimit&&(_u.loopedSlides=Ru.length);const Lu=[],Ou=[];Ru.each((Du,$u)=>{$(Du).attr("data-swiper-slide-index",$u)});for(let Du=0;Du<_u.loopedSlides;Du+=1){const $u=Du-Math.floor(Du/Ru.length)*Ru.length;Ou.push(Ru.eq($u)[0]),Lu.unshift(Ru.eq(Ru.length-$u-1)[0])}for(let Du=0;Du<Ou.length;Du+=1)Bu.append($(Ou[Du].cloneNode(!0)).addClass(Cu.slideDuplicateClass));for(let Du=Lu.length-1;Du>=0;Du-=1)Bu.prepend($(Lu[Du].cloneNode(!0)).addClass(Cu.slideDuplicateClass))}function loopFix(){const _u=this;_u.emit("beforeLoopFix");const{activeIndex:Tu,slides:Cu,loopedSlides:Pu,allowSlidePrev:Bu,allowSlideNext:Ru,snapGrid:Lu,rtlTranslate:Ou}=_u;let Du;_u.allowSlidePrev=!0,_u.allowSlideNext=!0;const ku=-Lu[Tu]-_u.getTranslate();Tu<Pu?(Du=Cu.length-Pu*3+Tu,Du+=Pu,_u.slideTo(Du,0,!1,!0)&&ku!==0&&_u.setTranslate((Ou?-_u.translate:_u.translate)-ku)):Tu>=Cu.length-Pu&&(Du=-Cu.length+Tu+Pu,Du+=Pu,_u.slideTo(Du,0,!1,!0)&&ku!==0&&_u.setTranslate((Ou?-_u.translate:_u.translate)-ku)),_u.allowSlidePrev=Bu,_u.allowSlideNext=Ru,_u.emit("loopFix")}function loopDestroy(){const _u=this,{$wrapperEl:Tu,params:Cu,slides:Pu}=_u;Tu.children(`.${Cu.slideClass}.${Cu.slideDuplicateClass},.${Cu.slideClass}.${Cu.slideBlankClass}`).remove(),Pu.removeAttr("data-swiper-slide-index")}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(_u){const Tu=this;if(Tu.support.touch||!Tu.params.simulateTouch||Tu.params.watchOverflow&&Tu.isLocked||Tu.params.cssMode)return;const Cu=Tu.params.touchEventsTarget==="container"?Tu.el:Tu.wrapperEl;Cu.style.cursor="move",Cu.style.cursor=_u?"grabbing":"grab"}function unsetGrabCursor(){const _u=this;_u.support.touch||_u.params.watchOverflow&&_u.isLocked||_u.params.cssMode||(_u[_u.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(_u,Tu=this){function Cu(Pu){if(!Pu||Pu===getDocument()||Pu===getWindow())return null;Pu.assignedSlot&&(Pu=Pu.assignedSlot);const Bu=Pu.closest(_u);return!Bu&&!Pu.getRootNode?null:Bu||Cu(Pu.getRootNode().host)}return Cu(Tu)}function onTouchStart(_u){const Tu=this,Cu=getDocument(),Pu=getWindow(),Bu=Tu.touchEventsData,{params:Ru,touches:Lu,enabled:Ou}=Tu;if(!Ou||Tu.animating&&Ru.preventInteractionOnTransition)return;!Tu.animating&&Ru.cssMode&&Ru.loop&&Tu.loopFix();let Du=_u;Du.originalEvent&&(Du=Du.originalEvent);let $u=$(Du.target);if(Ru.touchEventsTarget==="wrapper"&&!$u.closest(Tu.wrapperEl).length||(Bu.isTouchEvent=Du.type==="touchstart",!Bu.isTouchEvent&&"which"in Du&&Du.which===3)||!Bu.isTouchEvent&&"button"in Du&&Du.button>0||Bu.isTouched&&Bu.isMoved)return;const ku=!!Ru.noSwipingClass&&Ru.noSwipingClass!=="",Fu=_u.composedPath?_u.composedPath():_u.path;ku&&Du.target&&Du.target.shadowRoot&&Fu&&($u=$(Fu[0]));const Nu=Ru.noSwipingSelector?Ru.noSwipingSelector:`.${Ru.noSwipingClass}`,Vu=!!(Du.target&&Du.target.shadowRoot);if(Ru.noSwiping&&(Vu?closestElement(Nu,$u[0]):$u.closest(Nu)[0])){Tu.allowClick=!0;return}if(Ru.swipeHandler&&!$u.closest(Ru.swipeHandler)[0])return;Lu.currentX=Du.type==="touchstart"?Du.targetTouches[0].pageX:Du.pageX,Lu.currentY=Du.type==="touchstart"?Du.targetTouches[0].pageY:Du.pageY;const Gu=Lu.currentX,Hu=Lu.currentY,ju=Ru.edgeSwipeDetection||Ru.iOSEdgeSwipeDetection,Uu=Ru.edgeSwipeThreshold||Ru.iOSEdgeSwipeThreshold;if(ju&&(Gu<=Uu||Gu>=Pu.innerWidth-Uu))if(ju==="prevent")_u.preventDefault();else return;if(Object.assign(Bu,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Lu.startX=Gu,Lu.startY=Hu,Bu.touchStartTime=now(),Tu.allowClick=!0,Tu.updateSize(),Tu.swipeDirection=void 0,Ru.threshold>0&&(Bu.allowThresholdMove=!1),Du.type!=="touchstart"){let zu=!0;$u.is(Bu.focusableElements)&&(zu=!1,$u[0].nodeName==="SELECT"&&(Bu.isTouched=!1)),Cu.activeElement&&$(Cu.activeElement).is(Bu.focusableElements)&&Cu.activeElement!==$u[0]&&Cu.activeElement.blur();const Wu=zu&&Tu.allowTouchMove&&Ru.touchStartPreventDefault;(Ru.touchStartForcePreventDefault||Wu)&&!$u[0].isContentEditable&&Du.preventDefault()}Tu.params.freeMode&&Tu.params.freeMode.enabled&&Tu.freeMode&&Tu.animating&&!Ru.cssMode&&Tu.freeMode.onTouchStart(),Tu.emit("touchStart",Du)}function onTouchMove(_u){const Tu=getDocument(),Cu=this,Pu=Cu.touchEventsData,{params:Bu,touches:Ru,rtlTranslate:Lu,enabled:Ou}=Cu;if(!Ou)return;let Du=_u;if(Du.originalEvent&&(Du=Du.originalEvent),!Pu.isTouched){Pu.startMoving&&Pu.isScrolling&&Cu.emit("touchMoveOpposite",Du);return}if(Pu.isTouchEvent&&Du.type!=="touchmove")return;const $u=Du.type==="touchmove"&&Du.targetTouches&&(Du.targetTouches[0]||Du.changedTouches[0]),ku=Du.type==="touchmove"?$u.pageX:Du.pageX,Fu=Du.type==="touchmove"?$u.pageY:Du.pageY;if(Du.preventedByNestedSwiper){Ru.startX=ku,Ru.startY=Fu;return}if(!Cu.allowTouchMove){$(Du.target).is(Pu.focusableElements)||(Cu.allowClick=!1),Pu.isTouched&&(Object.assign(Ru,{startX:ku,startY:Fu,currentX:ku,currentY:Fu}),Pu.touchStartTime=now());return}if(Pu.isTouchEvent&&Bu.touchReleaseOnEdges&&!Bu.loop){if(Cu.isVertical()){if(Fu<Ru.startY&&Cu.translate<=Cu.maxTranslate()||Fu>Ru.startY&&Cu.translate>=Cu.minTranslate()){Pu.isTouched=!1,Pu.isMoved=!1;return}}else if(ku<Ru.startX&&Cu.translate<=Cu.maxTranslate()||ku>Ru.startX&&Cu.translate>=Cu.minTranslate())return}if(Pu.isTouchEvent&&Tu.activeElement&&Du.target===Tu.activeElement&&$(Du.target).is(Pu.focusableElements)){Pu.isMoved=!0,Cu.allowClick=!1;return}if(Pu.allowTouchCallbacks&&Cu.emit("touchMove",Du),Du.targetTouches&&Du.targetTouches.length>1)return;Ru.currentX=ku,Ru.currentY=Fu;const Nu=Ru.currentX-Ru.startX,Vu=Ru.currentY-Ru.startY;if(Cu.params.threshold&&Math.sqrt(Nu**2+Vu**2)<Cu.params.threshold)return;if(typeof Pu.isScrolling=="undefined"){let Uu;Cu.isHorizontal()&&Ru.currentY===Ru.startY||Cu.isVertical()&&Ru.currentX===Ru.startX?Pu.isScrolling=!1:Nu*Nu+Vu*Vu>=25&&(Uu=Math.atan2(Math.abs(Vu),Math.abs(Nu))*180/Math.PI,Pu.isScrolling=Cu.isHorizontal()?Uu>Bu.touchAngle:90-Uu>Bu.touchAngle)}if(Pu.isScrolling&&Cu.emit("touchMoveOpposite",Du),typeof Pu.startMoving=="undefined"&&(Ru.currentX!==Ru.startX||Ru.currentY!==Ru.startY)&&(Pu.startMoving=!0),Pu.isScrolling){Pu.isTouched=!1;return}if(!Pu.startMoving)return;Cu.allowClick=!1,!Bu.cssMode&&Du.cancelable&&Du.preventDefault(),Bu.touchMoveStopPropagation&&!Bu.nested&&Du.stopPropagation(),Pu.isMoved||(Bu.loop&&!Bu.cssMode&&Cu.loopFix(),Pu.startTranslate=Cu.getTranslate(),Cu.setTransition(0),Cu.animating&&Cu.$wrapperEl.trigger("webkitTransitionEnd transitionend"),Pu.allowMomentumBounce=!1,Bu.grabCursor&&(Cu.allowSlideNext===!0||Cu.allowSlidePrev===!0)&&Cu.setGrabCursor(!0),Cu.emit("sliderFirstMove",Du)),Cu.emit("sliderMove",Du),Pu.isMoved=!0;let Gu=Cu.isHorizontal()?Nu:Vu;Ru.diff=Gu,Gu*=Bu.touchRatio,Lu&&(Gu=-Gu),Cu.swipeDirection=Gu>0?"prev":"next",Pu.currentTranslate=Gu+Pu.startTranslate;let Hu=!0,ju=Bu.resistanceRatio;if(Bu.touchReleaseOnEdges&&(ju=0),Gu>0&&Pu.currentTranslate>Cu.minTranslate()?(Hu=!1,Bu.resistance&&(Pu.currentTranslate=Cu.minTranslate()-1+(-Cu.minTranslate()+Pu.startTranslate+Gu)**ju)):Gu<0&&Pu.currentTranslate<Cu.maxTranslate()&&(Hu=!1,Bu.resistance&&(Pu.currentTranslate=Cu.maxTranslate()+1-(Cu.maxTranslate()-Pu.startTranslate-Gu)**ju)),Hu&&(Du.preventedByNestedSwiper=!0),!Cu.allowSlideNext&&Cu.swipeDirection==="next"&&Pu.currentTranslate<Pu.startTranslate&&(Pu.currentTranslate=Pu.startTranslate),!Cu.allowSlidePrev&&Cu.swipeDirection==="prev"&&Pu.currentTranslate>Pu.startTranslate&&(Pu.currentTranslate=Pu.startTranslate),!Cu.allowSlidePrev&&!Cu.allowSlideNext&&(Pu.currentTranslate=Pu.startTranslate),Bu.threshold>0)if(Math.abs(Gu)>Bu.threshold||Pu.allowThresholdMove){if(!Pu.allowThresholdMove){Pu.allowThresholdMove=!0,Ru.startX=Ru.currentX,Ru.startY=Ru.currentY,Pu.currentTranslate=Pu.startTranslate,Ru.diff=Cu.isHorizontal()?Ru.currentX-Ru.startX:Ru.currentY-Ru.startY;return}}else{Pu.currentTranslate=Pu.startTranslate;return}!Bu.followFinger||Bu.cssMode||((Bu.freeMode&&Bu.freeMode.enabled&&Cu.freeMode||Bu.watchSlidesProgress)&&(Cu.updateActiveIndex(),Cu.updateSlidesClasses()),Cu.params.freeMode&&Bu.freeMode.enabled&&Cu.freeMode&&Cu.freeMode.onTouchMove(),Cu.updateProgress(Pu.currentTranslate),Cu.setTranslate(Pu.currentTranslate))}function onTouchEnd(_u){const Tu=this,Cu=Tu.touchEventsData,{params:Pu,touches:Bu,rtlTranslate:Ru,slidesGrid:Lu,enabled:Ou}=Tu;if(!Ou)return;let Du=_u;if(Du.originalEvent&&(Du=Du.originalEvent),Cu.allowTouchCallbacks&&Tu.emit("touchEnd",Du),Cu.allowTouchCallbacks=!1,!Cu.isTouched){Cu.isMoved&&Pu.grabCursor&&Tu.setGrabCursor(!1),Cu.isMoved=!1,Cu.startMoving=!1;return}Pu.grabCursor&&Cu.isMoved&&Cu.isTouched&&(Tu.allowSlideNext===!0||Tu.allowSlidePrev===!0)&&Tu.setGrabCursor(!1);const $u=now(),ku=$u-Cu.touchStartTime;if(Tu.allowClick){const zu=Du.path||Du.composedPath&&Du.composedPath();Tu.updateClickedSlide(zu&&zu[0]||Du.target),Tu.emit("tap click",Du),ku<300&&$u-Cu.lastClickTime<300&&Tu.emit("doubleTap doubleClick",Du)}if(Cu.lastClickTime=now(),nextTick(()=>{Tu.destroyed||(Tu.allowClick=!0)}),!Cu.isTouched||!Cu.isMoved||!Tu.swipeDirection||Bu.diff===0||Cu.currentTranslate===Cu.startTranslate){Cu.isTouched=!1,Cu.isMoved=!1,Cu.startMoving=!1;return}Cu.isTouched=!1,Cu.isMoved=!1,Cu.startMoving=!1;let Fu;if(Pu.followFinger?Fu=Ru?Tu.translate:-Tu.translate:Fu=-Cu.currentTranslate,Pu.cssMode)return;if(Tu.params.freeMode&&Pu.freeMode.enabled){Tu.freeMode.onTouchEnd({currentPos:Fu});return}let Nu=0,Vu=Tu.slidesSizesGrid[0];for(let zu=0;zu<Lu.length;zu+=zu<Pu.slidesPerGroupSkip?1:Pu.slidesPerGroup){const Wu=zu<Pu.slidesPerGroupSkip-1?1:Pu.slidesPerGroup;typeof Lu[zu+Wu]!="undefined"?Fu>=Lu[zu]&&Fu<Lu[zu+Wu]&&(Nu=zu,Vu=Lu[zu+Wu]-Lu[zu]):Fu>=Lu[zu]&&(Nu=zu,Vu=Lu[Lu.length-1]-Lu[Lu.length-2])}let Gu=null,Hu=null;Pu.rewind&&(Tu.isBeginning?Hu=Tu.params.virtual&&Tu.params.virtual.enabled&&Tu.virtual?Tu.virtual.slides.length-1:Tu.slides.length-1:Tu.isEnd&&(Gu=0));const ju=(Fu-Lu[Nu])/Vu,Uu=Nu<Pu.slidesPerGroupSkip-1?1:Pu.slidesPerGroup;if(ku>Pu.longSwipesMs){if(!Pu.longSwipes){Tu.slideTo(Tu.activeIndex);return}Tu.swipeDirection==="next"&&(ju>=Pu.longSwipesRatio?Tu.slideTo(Pu.rewind&&Tu.isEnd?Gu:Nu+Uu):Tu.slideTo(Nu)),Tu.swipeDirection==="prev"&&(ju>1-Pu.longSwipesRatio?Tu.slideTo(Nu+Uu):Hu!==null&&ju<0&&Math.abs(ju)>Pu.longSwipesRatio?Tu.slideTo(Hu):Tu.slideTo(Nu))}else{if(!Pu.shortSwipes){Tu.slideTo(Tu.activeIndex);return}Tu.navigation&&(Du.target===Tu.navigation.nextEl||Du.target===Tu.navigation.prevEl)?Du.target===Tu.navigation.nextEl?Tu.slideTo(Nu+Uu):Tu.slideTo(Nu):(Tu.swipeDirection==="next"&&Tu.slideTo(Gu!==null?Gu:Nu+Uu),Tu.swipeDirection==="prev"&&Tu.slideTo(Hu!==null?Hu:Nu))}}function onResize(){const _u=this,{params:Tu,el:Cu}=_u;if(Cu&&Cu.offsetWidth===0)return;Tu.breakpoints&&_u.setBreakpoint();const{allowSlideNext:Pu,allowSlidePrev:Bu,snapGrid:Ru}=_u;_u.allowSlideNext=!0,_u.allowSlidePrev=!0,_u.updateSize(),_u.updateSlides(),_u.updateSlidesClasses(),(Tu.slidesPerView==="auto"||Tu.slidesPerView>1)&&_u.isEnd&&!_u.isBeginning&&!_u.params.centeredSlides?_u.slideTo(_u.slides.length-1,0,!1,!0):_u.slideTo(_u.activeIndex,0,!1,!0),_u.autoplay&&_u.autoplay.running&&_u.autoplay.paused&&_u.autoplay.run(),_u.allowSlidePrev=Bu,_u.allowSlideNext=Pu,_u.params.watchOverflow&&Ru!==_u.snapGrid&&_u.checkOverflow()}function onClick(_u){const Tu=this;!Tu.enabled||Tu.allowClick||(Tu.params.preventClicks&&_u.preventDefault(),Tu.params.preventClicksPropagation&&Tu.animating&&(_u.stopPropagation(),_u.stopImmediatePropagation()))}function onScroll(){const _u=this,{wrapperEl:Tu,rtlTranslate:Cu,enabled:Pu}=_u;if(!Pu)return;_u.previousTranslate=_u.translate,_u.isHorizontal()?_u.translate=-Tu.scrollLeft:_u.translate=-Tu.scrollTop,_u.translate===0&&(_u.translate=0),_u.updateActiveIndex(),_u.updateSlidesClasses();let Bu;const Ru=_u.maxTranslate()-_u.minTranslate();Ru===0?Bu=0:Bu=(_u.translate-_u.minTranslate())/Ru,Bu!==_u.progress&&_u.updateProgress(Cu?-_u.translate:_u.translate),_u.emit("setTranslate",_u.translate,!1)}let dummyEventAttached=!1;function dummyEventListener(){}const events=(_u,Tu)=>{const Cu=getDocument(),{params:Pu,touchEvents:Bu,el:Ru,wrapperEl:Lu,device:Ou,support:Du}=_u,$u=!!Pu.nested,ku=Tu==="on"?"addEventListener":"removeEventListener",Fu=Tu;if(!Du.touch)Ru[ku](Bu.start,_u.onTouchStart,!1),Cu[ku](Bu.move,_u.onTouchMove,$u),Cu[ku](Bu.end,_u.onTouchEnd,!1);else{const Nu=Bu.start==="touchstart"&&Du.passiveListener&&Pu.passiveListeners?{passive:!0,capture:!1}:!1;Ru[ku](Bu.start,_u.onTouchStart,Nu),Ru[ku](Bu.move,_u.onTouchMove,Du.passiveListener?{passive:!1,capture:$u}:$u),Ru[ku](Bu.end,_u.onTouchEnd,Nu),Bu.cancel&&Ru[ku](Bu.cancel,_u.onTouchEnd,Nu)}(Pu.preventClicks||Pu.preventClicksPropagation)&&Ru[ku]("click",_u.onClick,!0),Pu.cssMode&&Lu[ku]("scroll",_u.onScroll),Pu.updateOnWindowResize?_u[Fu](Ou.ios||Ou.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):_u[Fu]("observerUpdate",onResize,!0)};function attachEvents(){const _u=this,Tu=getDocument(),{params:Cu,support:Pu}=_u;_u.onTouchStart=onTouchStart.bind(_u),_u.onTouchMove=onTouchMove.bind(_u),_u.onTouchEnd=onTouchEnd.bind(_u),Cu.cssMode&&(_u.onScroll=onScroll.bind(_u)),_u.onClick=onClick.bind(_u),Pu.touch&&!dummyEventAttached&&(Tu.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(_u,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(_u,Tu)=>_u.grid&&Tu.grid&&Tu.grid.rows>1;function setBreakpoint(){const _u=this,{activeIndex:Tu,initialized:Cu,loopedSlides:Pu=0,params:Bu,$el:Ru}=_u,Lu=Bu.breakpoints;if(!Lu||Lu&&Object.keys(Lu).length===0)return;const Ou=_u.getBreakpoint(Lu,_u.params.breakpointsBase,_u.el);if(!Ou||_u.currentBreakpoint===Ou)return;const $u=(Ou in Lu?Lu[Ou]:void 0)||_u.originalParams,ku=isGridEnabled(_u,Bu),Fu=isGridEnabled(_u,$u),Nu=Bu.enabled;ku&&!Fu?(Ru.removeClass(`${Bu.containerModifierClass}grid ${Bu.containerModifierClass}grid-column`),_u.emitContainerClasses()):!ku&&Fu&&(Ru.addClass(`${Bu.containerModifierClass}grid`),($u.grid.fill&&$u.grid.fill==="column"||!$u.grid.fill&&Bu.grid.fill==="column")&&Ru.addClass(`${Bu.containerModifierClass}grid-column`),_u.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(ju=>{const Uu=Bu[ju]&&Bu[ju].enabled,zu=$u[ju]&&$u[ju].enabled;Uu&&!zu&&_u[ju].disable(),!Uu&&zu&&_u[ju].enable()});const Vu=$u.direction&&$u.direction!==Bu.direction,Gu=Bu.loop&&($u.slidesPerView!==Bu.slidesPerView||Vu);Vu&&Cu&&_u.changeDirection(),extend$1(_u.params,$u);const Hu=_u.params.enabled;Object.assign(_u,{allowTouchMove:_u.params.allowTouchMove,allowSlideNext:_u.params.allowSlideNext,allowSlidePrev:_u.params.allowSlidePrev}),Nu&&!Hu?_u.disable():!Nu&&Hu&&_u.enable(),_u.currentBreakpoint=Ou,_u.emit("_beforeBreakpoint",$u),Gu&&Cu&&(_u.loopDestroy(),_u.loopCreate(),_u.updateSlides(),_u.slideTo(Tu-Pu+_u.loopedSlides,0,!1)),_u.emit("breakpoint",$u)}function getBreakpoint(_u,Tu="window",Cu){if(!_u||Tu==="container"&&!Cu)return;let Pu=!1;const Bu=getWindow(),Ru=Tu==="window"?Bu.innerHeight:Cu.clientHeight,Lu=Object.keys(_u).map(Ou=>{if(typeof Ou=="string"&&Ou.indexOf("@")===0){const Du=parseFloat(Ou.substr(1));return{value:Ru*Du,point:Ou}}return{value:Ou,point:Ou}});Lu.sort((Ou,Du)=>parseInt(Ou.value,10)-parseInt(Du.value,10));for(let Ou=0;Ou<Lu.length;Ou+=1){const{point:Du,value:$u}=Lu[Ou];Tu==="window"?Bu.matchMedia(`(min-width: ${$u}px)`).matches&&(Pu=Du):$u<=Cu.clientWidth&&(Pu=Du)}return Pu||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(_u,Tu){const Cu=[];return _u.forEach(Pu=>{typeof Pu=="object"?Object.keys(Pu).forEach(Bu=>{Pu[Bu]&&Cu.push(Tu+Bu)}):typeof Pu=="string"&&Cu.push(Tu+Pu)}),Cu}function addClasses(){const _u=this,{classNames:Tu,params:Cu,rtl:Pu,$el:Bu,device:Ru,support:Lu}=_u,Ou=prepareClasses(["initialized",Cu.direction,{"pointer-events":!Lu.touch},{"free-mode":_u.params.freeMode&&Cu.freeMode.enabled},{autoheight:Cu.autoHeight},{rtl:Pu},{grid:Cu.grid&&Cu.grid.rows>1},{"grid-column":Cu.grid&&Cu.grid.rows>1&&Cu.grid.fill==="column"},{android:Ru.android},{ios:Ru.ios},{"css-mode":Cu.cssMode},{centered:Cu.cssMode&&Cu.centeredSlides},{"watch-progress":Cu.watchSlidesProgress}],Cu.containerModifierClass);Tu.push(...Ou),Bu.addClass([...Tu].join(" ")),_u.emitContainerClasses()}function removeClasses(){const _u=this,{$el:Tu,classNames:Cu}=_u;Tu.removeClass(Cu.join(" ")),_u.emitContainerClasses()}var classes={addClasses,removeClasses};function loadImage(_u,Tu,Cu,Pu,Bu,Ru){const Lu=getWindow();let Ou;function Du(){Ru&&Ru()}!$(_u).parent("picture")[0]&&(!_u.complete||!Bu)&&Tu?(Ou=new Lu.Image,Ou.onload=Du,Ou.onerror=Du,Pu&&(Ou.sizes=Pu),Cu&&(Ou.srcset=Cu),Tu&&(Ou.src=Tu)):Du()}function preloadImages(){const _u=this;_u.imagesToLoad=_u.$el.find("img");function Tu(){typeof _u=="undefined"||_u===null||!_u||_u.destroyed||(_u.imagesLoaded!==void 0&&(_u.imagesLoaded+=1),_u.imagesLoaded===_u.imagesToLoad.length&&(_u.params.updateOnImagesReady&&_u.update(),_u.emit("imagesReady")))}for(let Cu=0;Cu<_u.imagesToLoad.length;Cu+=1){const Pu=_u.imagesToLoad[Cu];_u.loadImage(Pu,Pu.currentSrc||Pu.getAttribute("src"),Pu.srcset||Pu.getAttribute("srcset"),Pu.sizes||Pu.getAttribute("sizes"),!0,Tu)}}var images={loadImage,preloadImages};function checkOverflow(){const _u=this,{isLocked:Tu,params:Cu}=_u,{slidesOffsetBefore:Pu}=Cu;if(Pu){const Bu=_u.slides.length-1,Ru=_u.slidesGrid[Bu]+_u.slidesSizesGrid[Bu]+Pu*2;_u.isLocked=_u.size>Ru}else _u.isLocked=_u.snapGrid.length===1;Cu.allowSlideNext===!0&&(_u.allowSlideNext=!_u.isLocked),Cu.allowSlidePrev===!0&&(_u.allowSlidePrev=!_u.isLocked),Tu&&Tu!==_u.isLocked&&(_u.isEnd=!1),Tu!==_u.isLocked&&_u.emit(_u.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(_u,Tu){return function(Pu={}){const Bu=Object.keys(Pu)[0],Ru=Pu[Bu];if(typeof Ru!="object"||Ru===null){extend$1(Tu,Pu);return}if(["navigation","pagination","scrollbar"].indexOf(Bu)>=0&&_u[Bu]===!0&&(_u[Bu]={auto:!0}),!(Bu in _u&&"enabled"in Ru)){extend$1(Tu,Pu);return}_u[Bu]===!0&&(_u[Bu]={enabled:!0}),typeof _u[Bu]=="object"&&!("enabled"in _u[Bu])&&(_u[Bu].enabled=!0),_u[Bu]||(_u[Bu]={enabled:!1}),extend$1(Tu,Pu)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes,images},extendedDefaults={};class Swiper{constructor(...Tu){let Cu,Pu;if(Tu.length===1&&Tu[0].constructor&&Object.prototype.toString.call(Tu[0]).slice(8,-1)==="Object"?Pu=Tu[0]:[Cu,Pu]=Tu,Pu||(Pu={}),Pu=extend$1({},Pu),Cu&&!Pu.el&&(Pu.el=Cu),Pu.el&&$(Pu.el).length>1){const Ou=[];return $(Pu.el).each(Du=>{const $u=extend$1({},Pu,{el:Du});Ou.push(new Swiper($u))}),Ou}const Bu=this;Bu.__swiper__=!0,Bu.support=getSupport(),Bu.device=getDevice({userAgent:Pu.userAgent}),Bu.browser=getBrowser(),Bu.eventsListeners={},Bu.eventsAnyListeners=[],Bu.modules=[...Bu.__modules__],Pu.modules&&Array.isArray(Pu.modules)&&Bu.modules.push(...Pu.modules);const Ru={};Bu.modules.forEach(Ou=>{Ou({swiper:Bu,extendParams:moduleExtendParams(Pu,Ru),on:Bu.on.bind(Bu),once:Bu.once.bind(Bu),off:Bu.off.bind(Bu),emit:Bu.emit.bind(Bu)})});const Lu=extend$1({},defaults,Ru);return Bu.params=extend$1({},Lu,extendedDefaults,Pu),Bu.originalParams=extend$1({},Bu.params),Bu.passedParams=extend$1({},Pu),Bu.params&&Bu.params.on&&Object.keys(Bu.params.on).forEach(Ou=>{Bu.on(Ou,Bu.params.on[Ou])}),Bu.params&&Bu.params.onAny&&Bu.onAny(Bu.params.onAny),Bu.$=$,Object.assign(Bu,{enabled:Bu.params.enabled,el:Cu,classNames:[],slides:$(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return Bu.params.direction==="horizontal"},isVertical(){return Bu.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:Bu.params.allowSlideNext,allowSlidePrev:Bu.params.allowSlidePrev,touchEvents:function(){const Du=["touchstart","touchmove","touchend","touchcancel"],$u=["pointerdown","pointermove","pointerup"];return Bu.touchEventsTouch={start:Du[0],move:Du[1],end:Du[2],cancel:Du[3]},Bu.touchEventsDesktop={start:$u[0],move:$u[1],end:$u[2]},Bu.support.touch||!Bu.params.simulateTouch?Bu.touchEventsTouch:Bu.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:Bu.params.focusableElements,lastClickTime:now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:Bu.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),Bu.emit("_swiper"),Bu.params.init&&Bu.init(),Bu}enable(){const Tu=this;Tu.enabled||(Tu.enabled=!0,Tu.params.grabCursor&&Tu.setGrabCursor(),Tu.emit("enable"))}disable(){const Tu=this;!Tu.enabled||(Tu.enabled=!1,Tu.params.grabCursor&&Tu.unsetGrabCursor(),Tu.emit("disable"))}setProgress(Tu,Cu){const Pu=this;Tu=Math.min(Math.max(Tu,0),1);const Bu=Pu.minTranslate(),Lu=(Pu.maxTranslate()-Bu)*Tu+Bu;Pu.translateTo(Lu,typeof Cu=="undefined"?0:Cu),Pu.updateActiveIndex(),Pu.updateSlidesClasses()}emitContainerClasses(){const Tu=this;if(!Tu.params._emitClasses||!Tu.el)return;const Cu=Tu.el.className.split(" ").filter(Pu=>Pu.indexOf("swiper")===0||Pu.indexOf(Tu.params.containerModifierClass)===0);Tu.emit("_containerClasses",Cu.join(" "))}getSlideClasses(Tu){const Cu=this;return Cu.destroyed?"":Tu.className.split(" ").filter(Pu=>Pu.indexOf("swiper-slide")===0||Pu.indexOf(Cu.params.slideClass)===0).join(" ")}emitSlidesClasses(){const Tu=this;if(!Tu.params._emitClasses||!Tu.el)return;const Cu=[];Tu.slides.each(Pu=>{const Bu=Tu.getSlideClasses(Pu);Cu.push({slideEl:Pu,classNames:Bu}),Tu.emit("_slideClass",Pu,Bu)}),Tu.emit("_slideClasses",Cu)}slidesPerViewDynamic(Tu="current",Cu=!1){const Pu=this,{params:Bu,slides:Ru,slidesGrid:Lu,slidesSizesGrid:Ou,size:Du,activeIndex:$u}=Pu;let ku=1;if(Bu.centeredSlides){let Fu=Ru[$u].swiperSlideSize,Nu;for(let Vu=$u+1;Vu<Ru.length;Vu+=1)Ru[Vu]&&!Nu&&(Fu+=Ru[Vu].swiperSlideSize,ku+=1,Fu>Du&&(Nu=!0));for(let Vu=$u-1;Vu>=0;Vu-=1)Ru[Vu]&&!Nu&&(Fu+=Ru[Vu].swiperSlideSize,ku+=1,Fu>Du&&(Nu=!0))}else if(Tu==="current")for(let Fu=$u+1;Fu<Ru.length;Fu+=1)(Cu?Lu[Fu]+Ou[Fu]-Lu[$u]<Du:Lu[Fu]-Lu[$u]<Du)&&(ku+=1);else for(let Fu=$u-1;Fu>=0;Fu-=1)Lu[$u]-Lu[Fu]<Du&&(ku+=1);return ku}update(){const Tu=this;if(!Tu||Tu.destroyed)return;const{snapGrid:Cu,params:Pu}=Tu;Pu.breakpoints&&Tu.setBreakpoint(),Tu.updateSize(),Tu.updateSlides(),Tu.updateProgress(),Tu.updateSlidesClasses();function Bu(){const Lu=Tu.rtlTranslate?Tu.translate*-1:Tu.translate,Ou=Math.min(Math.max(Lu,Tu.maxTranslate()),Tu.minTranslate());Tu.setTranslate(Ou),Tu.updateActiveIndex(),Tu.updateSlidesClasses()}let Ru;Tu.params.freeMode&&Tu.params.freeMode.enabled?(Bu(),Tu.params.autoHeight&&Tu.updateAutoHeight()):((Tu.params.slidesPerView==="auto"||Tu.params.slidesPerView>1)&&Tu.isEnd&&!Tu.params.centeredSlides?Ru=Tu.slideTo(Tu.slides.length-1,0,!1,!0):Ru=Tu.slideTo(Tu.activeIndex,0,!1,!0),Ru||Bu()),Pu.watchOverflow&&Cu!==Tu.snapGrid&&Tu.checkOverflow(),Tu.emit("update")}changeDirection(Tu,Cu=!0){const Pu=this,Bu=Pu.params.direction;return Tu||(Tu=Bu==="horizontal"?"vertical":"horizontal"),Tu===Bu||Tu!=="horizontal"&&Tu!=="vertical"||(Pu.$el.removeClass(`${Pu.params.containerModifierClass}${Bu}`).addClass(`${Pu.params.containerModifierClass}${Tu}`),Pu.emitContainerClasses(),Pu.params.direction=Tu,Pu.slides.each(Ru=>{Tu==="vertical"?Ru.style.width="":Ru.style.height=""}),Pu.emit("changeDirection"),Cu&&Pu.update()),Pu}changeLanguageDirection(Tu){const Cu=this;Cu.rtl&&Tu==="rtl"||!Cu.rtl&&Tu==="ltr"||(Cu.rtl=Tu==="rtl",Cu.rtlTranslate=Cu.params.direction==="horizontal"&&Cu.rtl,Cu.rtl?(Cu.$el.addClass(`${Cu.params.containerModifierClass}rtl`),Cu.el.dir="rtl"):(Cu.$el.removeClass(`${Cu.params.containerModifierClass}rtl`),Cu.el.dir="ltr"),Cu.update())}mount(Tu){const Cu=this;if(Cu.mounted)return!0;const Pu=$(Tu||Cu.params.el);if(Tu=Pu[0],!Tu)return!1;Tu.swiper=Cu;const Bu=()=>`.${(Cu.params.wrapperClass||"").trim().split(" ").join(".")}`;let Lu=(()=>{if(Tu&&Tu.shadowRoot&&Tu.shadowRoot.querySelector){const Ou=$(Tu.shadowRoot.querySelector(Bu()));return Ou.children=Du=>Pu.children(Du),Ou}return Pu.children?Pu.children(Bu()):$(Pu).children(Bu())})();if(Lu.length===0&&Cu.params.createElements){const Du=getDocument().createElement("div");Lu=$(Du),Du.className=Cu.params.wrapperClass,Pu.append(Du),Pu.children(`.${Cu.params.slideClass}`).each($u=>{Lu.append($u)})}return Object.assign(Cu,{$el:Pu,el:Tu,$wrapperEl:Lu,wrapperEl:Lu[0],mounted:!0,rtl:Tu.dir.toLowerCase()==="rtl"||Pu.css("direction")==="rtl",rtlTranslate:Cu.params.direction==="horizontal"&&(Tu.dir.toLowerCase()==="rtl"||Pu.css("direction")==="rtl"),wrongRTL:Lu.css("display")==="-webkit-box"}),!0}init(Tu){const Cu=this;return Cu.initialized||Cu.mount(Tu)===!1||(Cu.emit("beforeInit"),Cu.params.breakpoints&&Cu.setBreakpoint(),Cu.addClasses(),Cu.params.loop&&Cu.loopCreate(),Cu.updateSize(),Cu.updateSlides(),Cu.params.watchOverflow&&Cu.checkOverflow(),Cu.params.grabCursor&&Cu.enabled&&Cu.setGrabCursor(),Cu.params.preloadImages&&Cu.preloadImages(),Cu.params.loop?Cu.slideTo(Cu.params.initialSlide+Cu.loopedSlides,0,Cu.params.runCallbacksOnInit,!1,!0):Cu.slideTo(Cu.params.initialSlide,0,Cu.params.runCallbacksOnInit,!1,!0),Cu.attachEvents(),Cu.initialized=!0,Cu.emit("init"),Cu.emit("afterInit")),Cu}destroy(Tu=!0,Cu=!0){const Pu=this,{params:Bu,$el:Ru,$wrapperEl:Lu,slides:Ou}=Pu;return typeof Pu.params=="undefined"||Pu.destroyed||(Pu.emit("beforeDestroy"),Pu.initialized=!1,Pu.detachEvents(),Bu.loop&&Pu.loopDestroy(),Cu&&(Pu.removeClasses(),Ru.removeAttr("style"),Lu.removeAttr("style"),Ou&&Ou.length&&Ou.removeClass([Bu.slideVisibleClass,Bu.slideActiveClass,Bu.slideNextClass,Bu.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),Pu.emit("destroy"),Object.keys(Pu.eventsListeners).forEach(Du=>{Pu.off(Du)}),Tu!==!1&&(Pu.$el[0].swiper=null,deleteProps(Pu)),Pu.destroyed=!0),null}static extendDefaults(Tu){extend$1(extendedDefaults,Tu)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(Tu){Swiper.prototype.__modules__||(Swiper.prototype.__modules__=[]);const Cu=Swiper.prototype.__modules__;typeof Tu=="function"&&Cu.indexOf(Tu)<0&&Cu.push(Tu)}static use(Tu){return Array.isArray(Tu)?(Tu.forEach(Cu=>Swiper.installModule(Cu)),Swiper):(Swiper.installModule(Tu),Swiper)}}Object.keys(prototypes).forEach(_u=>{Object.keys(prototypes[_u]).forEach(Tu=>{Swiper.prototype[Tu]=prototypes[_u][Tu]})});Swiper.use([Resize,Observer]);function Autoplay({swiper:_u,extendParams:Tu,on:Cu,emit:Pu}){let Bu;_u.autoplay={running:!1,paused:!1},Tu({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function Ru(){if(!_u.size){_u.autoplay.running=!1,_u.autoplay.paused=!1;return}const Hu=_u.slides.eq(_u.activeIndex);let ju=_u.params.autoplay.delay;Hu.attr("data-swiper-autoplay")&&(ju=Hu.attr("data-swiper-autoplay")||_u.params.autoplay.delay),clearTimeout(Bu),Bu=nextTick(()=>{let Uu;_u.params.autoplay.reverseDirection?_u.params.loop?(_u.loopFix(),Uu=_u.slidePrev(_u.params.speed,!0,!0),Pu("autoplay")):_u.isBeginning?_u.params.autoplay.stopOnLastSlide?Ou():(Uu=_u.slideTo(_u.slides.length-1,_u.params.speed,!0,!0),Pu("autoplay")):(Uu=_u.slidePrev(_u.params.speed,!0,!0),Pu("autoplay")):_u.params.loop?(_u.loopFix(),Uu=_u.slideNext(_u.params.speed,!0,!0),Pu("autoplay")):_u.isEnd?_u.params.autoplay.stopOnLastSlide?Ou():(Uu=_u.slideTo(0,_u.params.speed,!0,!0),Pu("autoplay")):(Uu=_u.slideNext(_u.params.speed,!0,!0),Pu("autoplay")),(_u.params.cssMode&&_u.autoplay.running||Uu===!1)&&Ru()},ju)}function Lu(){return typeof Bu!="undefined"||_u.autoplay.running?!1:(_u.autoplay.running=!0,Pu("autoplayStart"),Ru(),!0)}function Ou(){return!_u.autoplay.running||typeof Bu=="undefined"?!1:(Bu&&(clearTimeout(Bu),Bu=void 0),_u.autoplay.running=!1,Pu("autoplayStop"),!0)}function Du(Hu){!_u.autoplay.running||_u.autoplay.paused||(Bu&&clearTimeout(Bu),_u.autoplay.paused=!0,Hu===0||!_u.params.autoplay.waitForTransition?(_u.autoplay.paused=!1,Ru()):["transitionend","webkitTransitionEnd"].forEach(ju=>{_u.$wrapperEl[0].addEventListener(ju,ku)}))}function $u(){const Hu=getDocument();Hu.visibilityState==="hidden"&&_u.autoplay.running&&Du(),Hu.visibilityState==="visible"&&_u.autoplay.paused&&(Ru(),_u.autoplay.paused=!1)}function ku(Hu){!_u||_u.destroyed||!_u.$wrapperEl||Hu.target===_u.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(ju=>{_u.$wrapperEl[0].removeEventListener(ju,ku)}),_u.autoplay.paused=!1,_u.autoplay.running?Ru():Ou())}function Fu(){_u.params.autoplay.disableOnInteraction?Ou():(Pu("autoplayPause"),Du()),["transitionend","webkitTransitionEnd"].forEach(Hu=>{_u.$wrapperEl[0].removeEventListener(Hu,ku)})}function Nu(){_u.params.autoplay.disableOnInteraction||(_u.autoplay.paused=!1,Pu("autoplayResume"),Ru())}function Vu(){_u.params.autoplay.pauseOnMouseEnter&&(_u.$el.on("mouseenter",Fu),_u.$el.on("mouseleave",Nu))}function Gu(){_u.$el.off("mouseenter",Fu),_u.$el.off("mouseleave",Nu)}Cu("init",()=>{_u.params.autoplay.enabled&&(Lu(),getDocument().addEventListener("visibilitychange",$u),Vu())}),Cu("beforeTransitionStart",(Hu,ju,Uu)=>{_u.autoplay.running&&(Uu||!_u.params.autoplay.disableOnInteraction?_u.autoplay.pause(ju):Ou())}),Cu("sliderFirstMove",()=>{_u.autoplay.running&&(_u.params.autoplay.disableOnInteraction?Ou():Du())}),Cu("touchEnd",()=>{_u.params.cssMode&&_u.autoplay.paused&&!_u.params.autoplay.disableOnInteraction&&Ru()}),Cu("destroy",()=>{Gu(),_u.autoplay.running&&Ou(),getDocument().removeEventListener("visibilitychange",$u)}),Object.assign(_u.autoplay,{pause:Du,run:Ru,start:Lu,stop:Ou})}function isObject(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function extend(_u,Tu){const Cu=["__proto__","constructor","prototype"];Object.keys(Tu).filter(Pu=>Cu.indexOf(Pu)<0).forEach(Pu=>{typeof _u[Pu]=="undefined"?_u[Pu]=Tu[Pu]:isObject(Tu[Pu])&&isObject(_u[Pu])&&Object.keys(Tu[Pu]).length>0?Tu[Pu].__swiper__?_u[Pu]=Tu[Pu]:extend(_u[Pu],Tu[Pu]):_u[Pu]=Tu[Pu]})}function needsNavigation(_u={}){return _u.navigation&&typeof _u.navigation.nextEl=="undefined"&&typeof _u.navigation.prevEl=="undefined"}function needsPagination(_u={}){return _u.pagination&&typeof _u.pagination.el=="undefined"}function needsScrollbar(_u={}){return _u.scrollbar&&typeof _u.scrollbar.el=="undefined"}function uniqueClasses(_u=""){const Tu=_u.split(" ").map(Pu=>Pu.trim()).filter(Pu=>!!Pu),Cu=[];return Tu.forEach(Pu=>{Cu.indexOf(Pu)<0&&Cu.push(Pu)}),Cu.join(" ")}const paramsList=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function getParams(_u={},Tu=!0){const Cu={on:{}},Pu={},Bu={};extend(Cu,Swiper.defaults),extend(Cu,Swiper.extendedDefaults),Cu._emitClasses=!0,Cu.init=!1;const Ru={},Lu=paramsList.map(Du=>Du.replace(/_/,"")),Ou=Object.assign({},_u);return Object.keys(Ou).forEach(Du=>{typeof _u[Du]!="undefined"&&(Lu.indexOf(Du)>=0?isObject(_u[Du])?(Cu[Du]={},Bu[Du]={},extend(Cu[Du],_u[Du]),extend(Bu[Du],_u[Du])):(Cu[Du]=_u[Du],Bu[Du]=_u[Du]):Du.search(/on[A-Z]/)===0&&typeof _u[Du]=="function"?Tu?Pu[`${Du[2].toLowerCase()}${Du.substr(3)}`]=_u[Du]:Cu.on[`${Du[2].toLowerCase()}${Du.substr(3)}`]=_u[Du]:Ru[Du]=_u[Du])}),["navigation","pagination","scrollbar"].forEach(Du=>{Cu[Du]===!0&&(Cu[Du]={}),Cu[Du]===!1&&delete Cu[Du]}),{params:Cu,passedParams:Bu,rest:Ru,events:Pu}}function mountSwiper({el:_u,nextEl:Tu,prevEl:Cu,paginationEl:Pu,scrollbarEl:Bu,swiper:Ru},Lu){needsNavigation(Lu)&&Tu&&Cu&&(Ru.params.navigation.nextEl=Tu,Ru.originalParams.navigation.nextEl=Tu,Ru.params.navigation.prevEl=Cu,Ru.originalParams.navigation.prevEl=Cu),needsPagination(Lu)&&Pu&&(Ru.params.pagination.el=Pu,Ru.originalParams.pagination.el=Pu),needsScrollbar(Lu)&&Bu&&(Ru.params.scrollbar.el=Bu,Ru.originalParams.scrollbar.el=Bu),Ru.init(_u)}function getChangedParams(_u,Tu,Cu,Pu,Bu){const Ru=[];if(!Tu)return Ru;const Lu=Du=>{Ru.indexOf(Du)<0&&Ru.push(Du)};if(Cu&&Pu){const Du=Pu.map(Bu),$u=Cu.map(Bu);Du.join("")!==$u.join("")&&Lu("children"),Pu.length!==Cu.length&&Lu("children")}return paramsList.filter(Du=>Du[0]==="_").map(Du=>Du.replace(/_/,"")).forEach(Du=>{if(Du in _u&&Du in Tu)if(isObject(_u[Du])&&isObject(Tu[Du])){const $u=Object.keys(_u[Du]),ku=Object.keys(Tu[Du]);$u.length!==ku.length?Lu(Du):($u.forEach(Fu=>{_u[Du][Fu]!==Tu[Du][Fu]&&Lu(Du)}),ku.forEach(Fu=>{_u[Du][Fu]!==Tu[Du][Fu]&&Lu(Du)}))}else _u[Du]!==Tu[Du]&&Lu(Du)}),Ru}function updateSwiper({swiper:_u,slides:Tu,passedParams:Cu,changedParams:Pu,nextEl:Bu,prevEl:Ru,scrollbarEl:Lu,paginationEl:Ou}){const Du=Pu.filter(qu=>qu!=="children"&&qu!=="direction"),{params:$u,pagination:ku,navigation:Fu,scrollbar:Nu,virtual:Vu,thumbs:Gu}=_u;let Hu,ju,Uu,zu,Wu;Pu.includes("thumbs")&&Cu.thumbs&&Cu.thumbs.swiper&&$u.thumbs&&!$u.thumbs.swiper&&(Hu=!0),Pu.includes("controller")&&Cu.controller&&Cu.controller.control&&$u.controller&&!$u.controller.control&&(ju=!0),Pu.includes("pagination")&&Cu.pagination&&(Cu.pagination.el||Ou)&&($u.pagination||$u.pagination===!1)&&ku&&!ku.el&&(Uu=!0),Pu.includes("scrollbar")&&Cu.scrollbar&&(Cu.scrollbar.el||Lu)&&($u.scrollbar||$u.scrollbar===!1)&&Nu&&!Nu.el&&(zu=!0),Pu.includes("navigation")&&Cu.navigation&&(Cu.navigation.prevEl||Ru)&&(Cu.navigation.nextEl||Bu)&&($u.navigation||$u.navigation===!1)&&Fu&&!Fu.prevEl&&!Fu.nextEl&&(Wu=!0);const Qu=qu=>{!_u[qu]||(_u[qu].destroy(),qu==="navigation"?($u[qu].prevEl=void 0,$u[qu].nextEl=void 0,_u[qu].prevEl=void 0,_u[qu].nextEl=void 0):($u[qu].el=void 0,_u[qu].el=void 0))};Du.forEach(qu=>{if(isObject($u[qu])&&isObject(Cu[qu]))extend($u[qu],Cu[qu]);else{const Yu=Cu[qu];(Yu===!0||Yu===!1)&&(qu==="navigation"||qu==="pagination"||qu==="scrollbar")?Yu===!1&&Qu(qu):$u[qu]=Cu[qu]}}),Du.includes("controller")&&!ju&&_u.controller&&_u.controller.control&&$u.controller&&$u.controller.control&&(_u.controller.control=$u.controller.control),Pu.includes("children")&&Tu&&Vu&&$u.virtual.enabled?(Vu.slides=Tu,Vu.update(!0)):Pu.includes("children")&&_u.lazy&&_u.params.lazy.enabled&&_u.lazy.load(),Hu&&Gu.init()&&Gu.update(!0),ju&&(_u.controller.control=$u.controller.control),Uu&&(Ou&&($u.pagination.el=Ou),ku.init(),ku.render(),ku.update()),zu&&(Lu&&($u.scrollbar.el=Lu),Nu.init(),Nu.updateSize(),Nu.setTranslate()),Wu&&(Bu&&($u.navigation.nextEl=Bu),Ru&&($u.navigation.prevEl=Ru),Fu.init(),Fu.update()),Pu.includes("allowSlideNext")&&(_u.allowSlideNext=Cu.allowSlideNext),Pu.includes("allowSlidePrev")&&(_u.allowSlidePrev=Cu.allowSlidePrev),Pu.includes("direction")&&_u.changeDirection(Cu.direction,!1),_u.update()}const get_container_end_slot_changes=_u=>({virtualData:_u&512}),get_container_end_slot_context=_u=>({virtualData:_u[9]}),get_wrapper_end_slot_changes=_u=>({virtualData:_u&512}),get_wrapper_end_slot_context=_u=>({virtualData:_u[9]}),get_default_slot_changes$1=_u=>({virtualData:_u&512}),get_default_slot_context$1=_u=>({virtualData:_u[9]}),get_wrapper_start_slot_changes=_u=>({virtualData:_u&512}),get_wrapper_start_slot_context=_u=>({virtualData:_u[9]}),get_container_start_slot_changes=_u=>({virtualData:_u&512}),get_container_start_slot_context=_u=>({virtualData:_u[9]});function create_if_block_2$4(_u){let Tu,Cu,Pu;return{c(){Tu=element("div"),Cu=space(),Pu=element("div"),attr$1(Tu,"class","swiper-button-prev"),attr$1(Pu,"class","swiper-button-next")},m(Bu,Ru){insert(Bu,Tu,Ru),_u[13](Tu),insert(Bu,Cu,Ru),insert(Bu,Pu,Ru),_u[14](Pu)},p:noop,d(Bu){Bu&&detach(Tu),_u[13](null),Bu&&detach(Cu),Bu&&detach(Pu),_u[14](null)}}}function create_if_block_1$8(_u){let Tu;return{c(){Tu=element("div"),attr$1(Tu,"class","swiper-scrollbar")},m(Cu,Pu){insert(Cu,Tu,Pu),_u[15](Tu)},p:noop,d(Cu){Cu&&detach(Tu),_u[15](null)}}}function create_if_block$d(_u){let Tu;return{c(){Tu=element("div"),attr$1(Tu,"class","swiper-pagination")},m(Cu,Pu){insert(Cu,Tu,Pu),_u[16](Tu)},p:noop,d(Cu){Cu&&detach(Tu),_u[16](null)}}}function create_fragment$g(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou=needsNavigation(_u[2]),Du,$u=needsScrollbar(_u[2]),ku,Fu=needsPagination(_u[2]),Nu,Vu,Gu;const Hu=_u[12]["container-start"],ju=create_slot(Hu,_u,_u[11],get_container_start_slot_context),Uu=_u[12]["wrapper-start"],zu=create_slot(Uu,_u,_u[11],get_wrapper_start_slot_context),Wu=_u[12].default,Qu=create_slot(Wu,_u,_u[11],get_default_slot_context$1),qu=_u[12]["wrapper-end"],Yu=create_slot(qu,_u,_u[11],get_wrapper_end_slot_context);let Xc=Ou&&create_if_block_2$4(_u),_h=$u&&create_if_block_1$8(_u),_d=Fu&&create_if_block$d(_u);const Ku=_u[12]["container-end"],Xu=create_slot(Ku,_u,_u[11],get_container_end_slot_context);let Ju=[{class:Vu=uniqueClasses(`${_u[1]}${_u[0]?` ${_u[0]}`:""}`)},_u[3]],Zu={};for(let _c=0;_c<Ju.length;_c+=1)Zu=assign(Zu,Ju[_c]);return{c(){Tu=element("div"),ju&&ju.c(),Cu=space(),Pu=element("div"),zu&&zu.c(),Bu=space(),Qu&&Qu.c(),Ru=space(),Yu&&Yu.c(),Lu=space(),Xc&&Xc.c(),Du=space(),_h&&_h.c(),ku=space(),_d&&_d.c(),Nu=space(),Xu&&Xu.c(),attr$1(Pu,"class","swiper-wrapper"),set_attributes(Tu,Zu)},m(_c,_f){insert(_c,Tu,_f),ju&&ju.m(Tu,null),append$1(Tu,Cu),append$1(Tu,Pu),zu&&zu.m(Pu,null),append$1(Pu,Bu),Qu&&Qu.m(Pu,null),append$1(Pu,Ru),Yu&&Yu.m(Pu,null),append$1(Tu,Lu),Xc&&Xc.m(Tu,null),append$1(Tu,Du),_h&&_h.m(Tu,null),append$1(Tu,ku),_d&&_d.m(Tu,null),append$1(Tu,Nu),Xu&&Xu.m(Tu,null),_u[17](Tu),Gu=!0},p(_c,[_f]){ju&&ju.p&&(!Gu||_f&2560)&&update_slot_base(ju,Hu,_c,_c[11],Gu?get_slot_changes(Hu,_c[11],_f,get_container_start_slot_changes):get_all_dirty_from_scope(_c[11]),get_container_start_slot_context),zu&&zu.p&&(!Gu||_f&2560)&&update_slot_base(zu,Uu,_c,_c[11],Gu?get_slot_changes(Uu,_c[11],_f,get_wrapper_start_slot_changes):get_all_dirty_from_scope(_c[11]),get_wrapper_start_slot_context),Qu&&Qu.p&&(!Gu||_f&2560)&&update_slot_base(Qu,Wu,_c,_c[11],Gu?get_slot_changes(Wu,_c[11],_f,get_default_slot_changes$1):get_all_dirty_from_scope(_c[11]),get_default_slot_context$1),Yu&&Yu.p&&(!Gu||_f&2560)&&update_slot_base(Yu,qu,_c,_c[11],Gu?get_slot_changes(qu,_c[11],_f,get_wrapper_end_slot_changes):get_all_dirty_from_scope(_c[11]),get_wrapper_end_slot_context),_f&4&&(Ou=needsNavigation(_c[2])),Ou?Xc?Xc.p(_c,_f):(Xc=create_if_block_2$4(_c),Xc.c(),Xc.m(Tu,Du)):Xc&&(Xc.d(1),Xc=null),_f&4&&($u=needsScrollbar(_c[2])),$u?_h?_h.p(_c,_f):(_h=create_if_block_1$8(_c),_h.c(),_h.m(Tu,ku)):_h&&(_h.d(1),_h=null),_f&4&&(Fu=needsPagination(_c[2])),Fu?_d?_d.p(_c,_f):(_d=create_if_block$d(_c),_d.c(),_d.m(Tu,Nu)):_d&&(_d.d(1),_d=null),Xu&&Xu.p&&(!Gu||_f&2560)&&update_slot_base(Xu,Ku,_c,_c[11],Gu?get_slot_changes(Ku,_c[11],_f,get_container_end_slot_changes):get_all_dirty_from_scope(_c[11]),get_container_end_slot_context),set_attributes(Tu,Zu=get_spread_update(Ju,[(!Gu||_f&3&&Vu!==(Vu=uniqueClasses(`${_c[1]}${_c[0]?` ${_c[0]}`:""}`)))&&{class:Vu},_f&8&&_c[3]]))},i(_c){Gu||(transition_in(ju,_c),transition_in(zu,_c),transition_in(Qu,_c),transition_in(Yu,_c),transition_in(Xu,_c),Gu=!0)},o(_c){transition_out(ju,_c),transition_out(zu,_c),transition_out(Qu,_c),transition_out(Yu,_c),transition_out(Xu,_c),Gu=!1},d(_c){_c&&detach(Tu),ju&&ju.d(_c),zu&&zu.d(_c),Qu&&Qu.d(_c),Yu&&Yu.d(_c),Xc&&Xc.d(),_h&&_h.d(),_d&&_d.d(),Xu&&Xu.d(_c),_u[17](null)}}}function instance$g(_u,Tu,Cu){const Pu=["class","swiper"];let Bu=compute_rest_props(Tu,Pu),{$$slots:Ru={},$$scope:Lu}=Tu;const Ou=createEventDispatcher();let{class:Du=void 0}=Tu,$u="swiper",ku=!1,Fu=null,Nu=null,Vu,Gu,Hu,ju,Uu=null,zu=null,Wu=null,Qu=null,qu=null,Yu={slides:[]};function Xc(){return Fu}const _h=ep=>{Cu(9,Yu=ep),tick().then(()=>{Fu.$wrapperEl.children(".swiper-slide").each(tp=>{tp.onSwiper&&tp.onSwiper(Fu)}),Fu.updateSlides(),Fu.updateProgress(),Fu.updateSlidesClasses(),Fu.lazy&&Fu.params.lazy.enabled&&Fu.lazy.load()})},_d=()=>{Vu=getParams(Bu),Cu(2,Gu=Vu.params),Hu=Vu.passedParams,Cu(3,ju=Vu.rest)};_d(),Nu=Hu;const Ku=()=>{ku=!0};if(Gu.onAny=(ep,...tp)=>{Ou(ep,tp)},Object.assign(Gu.on,{_beforeBreakpoint:Ku,_containerClasses(ep,tp){Cu(1,$u=tp)}}),Fu=new Swiper(Gu),setContext("swiper",Fu),Fu.virtual&&Fu.params.virtual.enabled){const ep={cache:!1,renderExternal:tp=>{_h(tp),Gu.virtual&&Gu.virtual.renderExternal&&Gu.virtual.renderExternal(tp)},renderExternalUpdate:!1};extend(Fu.params.virtual,ep),extend(Fu.originalParams.virtual,ep)}onMount(()=>{!Uu||(mountSwiper({el:Uu,nextEl:Wu,prevEl:zu,paginationEl:qu,scrollbarEl:Qu,swiper:Fu},Gu),Ou("swiper",[Fu]),!Gu.virtual&&Fu.slides.each(ep=>{ep.onSwiper&&ep.onSwiper(Fu)}))}),afterUpdate(()=>{if(!Fu)return;_d();const ep=getChangedParams(Hu,Nu);(ep.length||ku)&&Fu&&!Fu.destroyed&&updateSwiper({swiper:Fu,passedParams:Hu,changedParams:ep,nextEl:Wu,prevEl:zu,scrollbarEl:Qu,paginationEl:qu}),ku=!1,Nu=Hu}),onDestroy(()=>{typeof window!="undefined"&&Fu&&!Fu.destroyed&&Fu.destroy(!0,!1)});function Xu(ep){binding_callbacks[ep?"unshift":"push"](()=>{zu=ep,Cu(5,zu)})}function Ju(ep){binding_callbacks[ep?"unshift":"push"](()=>{Wu=ep,Cu(6,Wu)})}function Zu(ep){binding_callbacks[ep?"unshift":"push"](()=>{Qu=ep,Cu(7,Qu)})}function _c(ep){binding_callbacks[ep?"unshift":"push"](()=>{qu=ep,Cu(8,qu)})}function _f(ep){binding_callbacks[ep?"unshift":"push"](()=>{Uu=ep,Cu(4,Uu)})}return _u.$$set=ep=>{Tu=assign(assign({},Tu),exclude_internal_props(ep)),Cu(27,Bu=compute_rest_props(Tu,Pu)),"class"in ep&&Cu(0,Du=ep.class),"$$scope"in ep&&Cu(11,Lu=ep.$$scope)},[Du,$u,Gu,ju,Uu,zu,Wu,Qu,qu,Yu,Xc,Lu,Ru,Xu,Ju,Zu,_c,_f]}class Swiper_1 extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$g,create_fragment$g,safe_not_equal,{class:0,swiper:10})}get swiper(){return this.$$.ctx[10]}}const get_default_slot_changes_1=_u=>({data:_u&32}),get_default_slot_context_1=_u=>({data:_u[5]}),get_default_slot_changes=_u=>({data:_u&32}),get_default_slot_context=_u=>({data:_u[5]});function create_else_block$2(_u){let Tu;const Cu=_u[8].default,Pu=create_slot(Cu,_u,_u[7],get_default_slot_context_1);return{c(){Pu&&Pu.c()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),Tu=!0},p(Bu,Ru){Pu&&Pu.p&&(!Tu||Ru&160)&&update_slot_base(Pu,Cu,Bu,Bu[7],Tu?get_slot_changes(Cu,Bu[7],Ru,get_default_slot_changes_1):get_all_dirty_from_scope(Bu[7]),get_default_slot_context_1)},i(Bu){Tu||(transition_in(Pu,Bu),Tu=!0)},o(Bu){transition_out(Pu,Bu),Tu=!1},d(Bu){Pu&&Pu.d(Bu)}}}function create_if_block$c(_u){let Tu,Cu,Pu;const Bu=_u[8].default,Ru=create_slot(Bu,_u,_u[7],get_default_slot_context);return{c(){Tu=element("div"),Ru&&Ru.c(),attr$1(Tu,"class","swiper-zoom-container"),attr$1(Tu,"data-swiper-zoom",Cu=typeof _u[0]=="number"?_u[0]:void 0)},m(Lu,Ou){insert(Lu,Tu,Ou),Ru&&Ru.m(Tu,null),Pu=!0},p(Lu,Ou){Ru&&Ru.p&&(!Pu||Ou&160)&&update_slot_base(Ru,Bu,Lu,Lu[7],Pu?get_slot_changes(Bu,Lu[7],Ou,get_default_slot_changes):get_all_dirty_from_scope(Lu[7]),get_default_slot_context),(!Pu||Ou&1&&Cu!==(Cu=typeof Lu[0]=="number"?Lu[0]:void 0))&&attr$1(Tu,"data-swiper-zoom",Cu)},i(Lu){Pu||(transition_in(Ru,Lu),Pu=!0)},o(Lu){transition_out(Ru,Lu),Pu=!1},d(Lu){Lu&&detach(Tu),Ru&&Ru.d(Lu)}}}function create_fragment$f(_u){let Tu,Cu,Pu,Bu,Ru;const Lu=[create_if_block$c,create_else_block$2],Ou=[];function Du(Fu,Nu){return Fu[0]?0:1}Cu=Du(_u),Pu=Ou[Cu]=Lu[Cu](_u);let $u=[{class:Bu=uniqueClasses(`${_u[3]}${_u[2]?` ${_u[2]}`:""}`)},{"data-swiper-slide-index":_u[1]},_u[6]],ku={};for(let Fu=0;Fu<$u.length;Fu+=1)ku=assign(ku,$u[Fu]);return{c(){Tu=element("div"),Pu.c(),set_attributes(Tu,ku)},m(Fu,Nu){insert(Fu,Tu,Nu),Ou[Cu].m(Tu,null),_u[9](Tu),Ru=!0},p(Fu,[Nu]){let Vu=Cu;Cu=Du(Fu),Cu===Vu?Ou[Cu].p(Fu,Nu):(group_outros(),transition_out(Ou[Vu],1,1,()=>{Ou[Vu]=null}),check_outros(),Pu=Ou[Cu],Pu?Pu.p(Fu,Nu):(Pu=Ou[Cu]=Lu[Cu](Fu),Pu.c()),transition_in(Pu,1),Pu.m(Tu,null)),set_attributes(Tu,ku=get_spread_update($u,[(!Ru||Nu&12&&Bu!==(Bu=uniqueClasses(`${Fu[3]}${Fu[2]?` ${Fu[2]}`:""}`)))&&{class:Bu},(!Ru||Nu&2)&&{"data-swiper-slide-index":Fu[1]},Nu&64&&Fu[6]]))},i(Fu){Ru||(transition_in(Pu),Ru=!0)},o(Fu){transition_out(Pu),Ru=!1},d(Fu){Fu&&detach(Tu),Ou[Cu].d(),_u[9](null)}}}function instance$f(_u,Tu,Cu){let Pu;const Bu=["zoom","virtualIndex","class"];let Ru=compute_rest_props(Tu,Bu),{$$slots:Lu={},$$scope:Ou}=Tu,{zoom:Du=void 0}=Tu,{virtualIndex:$u=void 0}=Tu,{class:ku=void 0}=Tu,Fu=null,Nu="swiper-slide",Vu=getContext("swiper"),Gu=!1;const Hu=(Wu,Qu,qu)=>{Qu===Fu&&Cu(3,Nu=qu)},ju=()=>{!Vu||Gu||(Vu.on("_slideClass",Hu),Gu=!0)},Uu=()=>{!Vu||(Vu.off("_slideClass",Hu),Gu=!1)};onMount(()=>{typeof $u!="undefined"&&(Cu(4,Fu.onSwiper=Wu=>{Vu=Wu,ju()},Fu),ju())}),afterUpdate(()=>{if(!(!Fu||!Vu)){if(Vu.destroyed){Nu!=="swiper-slide"&&Cu(3,Nu="swiper-slide");return}ju()}}),beforeUpdate(()=>{ju()}),onDestroy(()=>{!Vu||Uu()});function zu(Wu){binding_callbacks[Wu?"unshift":"push"](()=>{Fu=Wu,Cu(4,Fu)})}return _u.$$set=Wu=>{Tu=assign(assign({},Tu),exclude_internal_props(Wu)),Cu(6,Ru=compute_rest_props(Tu,Bu)),"zoom"in Wu&&Cu(0,Du=Wu.zoom),"virtualIndex"in Wu&&Cu(1,$u=Wu.virtualIndex),"class"in Wu&&Cu(2,ku=Wu.class),"$$scope"in Wu&&Cu(7,Ou=Wu.$$scope)},_u.$$.update=()=>{_u.$$.dirty&8&&Cu(5,Pu={isActive:Nu.indexOf("swiper-slide-active")>=0||Nu.indexOf("swiper-slide-duplicate-active")>=0,isVisible:Nu.indexOf("swiper-slide-visible")>=0,isDuplicate:Nu.indexOf("swiper-slide-duplicate")>=0,isPrev:Nu.indexOf("swiper-slide-prev")>=0||Nu.indexOf("swiper-slide-duplicate-prev")>=0,isNext:Nu.indexOf("swiper-slide-next")>=0||Nu.indexOf("swiper-slide-duplicate-next")>=0})},[Du,$u,ku,Nu,Fu,Pu,Ru,Ou,Lu,zu]}class Swiper_slide extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$f,create_fragment$f,safe_not_equal,{zoom:0,virtualIndex:1,class:2})}}function add_css$e(_u){append_styles(_u,"svelte-6jwk1w",".media-item.svelte-6jwk1w{height:100%}.media-content.svelte-6jwk1w{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.video-icon.svelte-6jwk1w{width:1.75rem;height:1.75rem;background-size:100%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}")}function create_if_block$b(_u){let Tu,Cu;function Pu(Lu,Ou){if(Lu[0].type==="Image")return create_if_block_1$7;if(Lu[0].type==="Video")return create_if_block_2$3}let Bu=Pu(_u),Ru=Bu&&Bu(_u);return{c(){Tu=element("div"),Ru&&Ru.c(),attr$1(Tu,"class","media-item svelte-6jwk1w"),attr$1(Tu,"style",Cu=`object-fit: ${_u[1]};`)},m(Lu,Ou){insert(Lu,Tu,Ou),Ru&&Ru.m(Tu,null)},p(Lu,Ou){Bu===(Bu=Pu(Lu))&&Ru?Ru.p(Lu,Ou):(Ru&&Ru.d(1),Ru=Bu&&Bu(Lu),Ru&&(Ru.c(),Ru.m(Tu,null))),Ou&2&&Cu!==(Cu=`object-fit: ${Lu[1]};`)&&attr$1(Tu,"style",Cu)},d(Lu){Lu&&detach(Tu),Ru&&Ru.d()}}}function create_if_block_2$3(_u){let Tu,Cu,Pu,Bu,Ru,Lu;return{c(){Tu=element("video"),Ru=space(),Lu=element("div"),attr$1(Tu,"class","media-content svelte-6jwk1w"),src_url_equal(Tu.src,Cu=_u[0].url)||attr$1(Tu,"src",Cu),attr$1(Tu,"poster",Pu=nullishCoalescing(_u[0].videoCoverUrl,void 0)),attr$1(Tu,"preload",Bu=_u[0].videoCoverUrl?void 0:"auto"),Tu.playsInline=!0,attr$1(Tu,"paused",""),Tu.loop=!1,attr$1(Tu,"crossorigin",""),Tu.controls=!1,Tu.muted=!0,attr$1(Lu,"class","video-icon svelte-6jwk1w"),set_style(Lu,"background-image","url("+Image_Play+")")},m(Ou,Du){insert(Ou,Tu,Du),insert(Ou,Ru,Du),insert(Ou,Lu,Du)},p(Ou,Du){Du&1&&!src_url_equal(Tu.src,Cu=Ou[0].url)&&attr$1(Tu,"src",Cu),Du&1&&Pu!==(Pu=nullishCoalescing(Ou[0].videoCoverUrl,void 0))&&attr$1(Tu,"poster",Pu),Du&1&&Bu!==(Bu=Ou[0].videoCoverUrl?void 0:"auto")&&attr$1(Tu,"preload",Bu)},d(Ou){Ou&&detach(Tu),Ou&&detach(Ru),Ou&&detach(Lu)}}}function create_if_block_1$7(_u){let Tu,Cu,Pu;return{c(){Tu=element("img"),attr$1(Tu,"class","media-content svelte-6jwk1w"),src_url_equal(Tu.src,Cu=_u[0].url)||attr$1(Tu,"src",Cu),attr$1(Tu,"alt",Pu=_u[0].name)},m(Bu,Ru){insert(Bu,Tu,Ru)},p(Bu,Ru){Ru&1&&!src_url_equal(Tu.src,Cu=Bu[0].url)&&attr$1(Tu,"src",Cu),Ru&1&&Pu!==(Pu=Bu[0].name)&&attr$1(Tu,"alt",Pu)},d(Bu){Bu&&detach(Tu)}}}function create_fragment$e(_u){let Tu,Cu=_u[0]&&create_if_block$b(_u);return{c(){Cu&&Cu.c(),Tu=empty()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),insert(Pu,Tu,Bu)},p(Pu,[Bu]){Pu[0]?Cu?Cu.p(Pu,Bu):(Cu=create_if_block$b(Pu),Cu.c(),Cu.m(Tu.parentNode,Tu)):Cu&&(Cu.d(1),Cu=null)},i:noop,o:noop,d(Pu){Cu&&Cu.d(Pu),Pu&&detach(Tu)}}}function instance$e(_u,Tu,Cu){let{media:Pu}=Tu,{objectFit:Bu="cover"}=Tu;return _u.$$set=Ru=>{"media"in Ru&&Cu(0,Pu=Ru.media),"objectFit"in Ru&&Cu(1,Bu=Ru.objectFit)},[Pu,Bu]}class MediaItem extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$e,create_fragment$e,safe_not_equal,{media:0,objectFit:1},add_css$e)}}function add_css$d(_u){append_styles(_u,"svelte-ai0lv9",".media.svelte-ai0lv9{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}")}function get_each_context$3(_u,Tu,Cu){const Pu=_u.slice();return Pu[14]=Tu[Cu],Pu}function create_if_block$a(_u){let Tu,Cu,Pu,Bu,Ru,Lu;const Ou=[create_if_block_1$6,create_else_block$1],Du=[];function $u(ku,Fu){return ku[11]?0:1}return Cu=$u(_u),Pu=Du[Cu]=Ou[Cu](_u),{c(){Tu=element("div"),Pu.c(),attr$1(Tu,"class","media svelte-ai0lv9"),toggle_class(Tu,"unfolded",_u[4])},m(ku,Fu){insert(ku,Tu,Fu),Du[Cu].m(Tu,null),Lu=!0},p(ku,Fu){_u=ku;let Nu=Cu;Cu=$u(_u),Cu===Nu?Du[Cu].p(_u,Fu):(group_outros(),transition_out(Du[Nu],1,1,()=>{Du[Nu]=null}),check_outros(),Pu=Du[Cu],Pu?Pu.p(_u,Fu):(Pu=Du[Cu]=Ou[Cu](_u),Pu.c()),transition_in(Pu,1),Pu.m(Tu,null)),(!Lu||Fu&16)&&toggle_class(Tu,"unfolded",_u[4])},i(ku){Lu||(transition_in(Pu),ku&&add_render_callback(()=>{Ru&&Ru.end(1),Bu=create_in_transition(Tu,fly,_u[5]?{y:4,duration:_u[3],delay:_u[1],easing:identity}:void 0),Bu.start()}),Lu=!0)},o(ku){transition_out(Pu),Bu&&Bu.invalidate(),ku&&(Ru=create_out_transition(Tu,fly,_u[5]?{y:4,duration:_u[3],delay:_u[2],easing:identity}:void 0)),Lu=!1},d(ku){ku&&detach(Tu),Du[Cu].d(),ku&&Ru&&Ru.end()}}}function create_else_block$1(_u){let Tu,Cu;return Tu=new MediaItem({props:{media:_u[0][0],objectFit:_u[6]}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&1&&(Ru.media=Pu[0][0]),Bu&64&&(Ru.objectFit=Pu[6]),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block_1$6(_u){let Tu,Cu;return Tu=new Swiper_1({props:{style:"height: 100%",modules:[Autoplay],spaceBetween:30,autoplay:_u[10]?noTypecheck({delay:2e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1,loop:!0,$$slots:{default:[create_default_slot]},$$scope:{ctx:_u}}}),Tu.$on("slideChange",_u[13]),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&1024&&(Ru.autoplay=Pu[10]?noTypecheck({delay:2e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1),Bu&131392&&(Ru.$$scope={dirty:Bu,ctx:Pu}),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_default_slot_1(_u){let Tu,Cu,Pu;return Tu=new MediaItem({props:{media:_u[14],objectFit:_u[6]}}),{c(){create_component(Tu.$$.fragment),Cu=space()},m(Bu,Ru){mount_component(Tu,Bu,Ru),insert(Bu,Cu,Ru),Pu=!0},p(Bu,Ru){const Lu={};Ru&256&&(Lu.media=Bu[14]),Ru&64&&(Lu.objectFit=Bu[6]),Tu.$set(Lu)},i(Bu){Pu||(transition_in(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){transition_out(Tu.$$.fragment,Bu),Pu=!1},d(Bu){destroy_component(Tu,Bu),Bu&&detach(Cu)}}}function create_each_block$3(_u){let Tu,Cu;return Tu=new Swiper_slide({props:{$$slots:{default:[create_default_slot_1]},$$scope:{ctx:_u}}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&131392&&(Ru.$$scope={dirty:Bu,ctx:Pu}),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_default_slot(_u){let Tu,Cu,Pu=_u[8],Bu=[];for(let Lu=0;Lu<Pu.length;Lu+=1)Bu[Lu]=create_each_block$3(get_each_context$3(_u,Pu,Lu));const Ru=Lu=>transition_out(Bu[Lu],1,1,()=>{Bu[Lu]=null});return{c(){for(let Lu=0;Lu<Bu.length;Lu+=1)Bu[Lu].c();Tu=empty()},m(Lu,Ou){for(let Du=0;Du<Bu.length;Du+=1)Bu[Du].m(Lu,Ou);insert(Lu,Tu,Ou),Cu=!0},p(Lu,Ou){if(Ou&320){Pu=Lu[8];let Du;for(Du=0;Du<Pu.length;Du+=1){const $u=get_each_context$3(Lu,Pu,Du);Bu[Du]?(Bu[Du].p($u,Ou),transition_in(Bu[Du],1)):(Bu[Du]=create_each_block$3($u),Bu[Du].c(),transition_in(Bu[Du],1),Bu[Du].m(Tu.parentNode,Tu))}for(group_outros(),Du=Pu.length;Du<Bu.length;Du+=1)Ru(Du);check_outros()}},i(Lu){if(!Cu){for(let Ou=0;Ou<Pu.length;Ou+=1)transition_in(Bu[Ou]);Cu=!0}},o(Lu){Bu=Bu.filter(Boolean);for(let Ou=0;Ou<Bu.length;Ou+=1)transition_out(Bu[Ou]);Cu=!1},d(Lu){destroy_each(Bu,Lu),Lu&&detach(Tu)}}}function create_fragment$d(_u){let Tu,Cu,Pu=_u[4]&&create_if_block$a(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,[Ru]){Bu[4]?Pu?(Pu.p(Bu,Ru),Ru&16&&transition_in(Pu,1)):(Pu=create_if_block$a(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function instance$d(_u,Tu,Cu){let Pu,Bu,Ru,{mediaData:Lu}=Tu,{inDelay:Ou=0}=Tu,{outDelay:Du=0}=Tu,{duration:$u=0}=Tu,{unfolded:ku=!0}=Tu,{animation:Fu=!0}=Tu,{objectFit:Nu="cover"}=Tu,{enableCarousel:Vu=!0}=Tu,{autoplayConfig:Gu={autoplay:!0,autoplayVideo:!1}}=Tu,Hu=null;const ju=async Uu=>{if(!Ru||!Gu.autoplayVideo)return;const zu=Uu.detail[0];if(!zu)return;const Wu=zu.realIndex;if(Wu===Hu)return;Cu(9,Hu=Wu);const Qu=Bu[Wu];!Qu||Qu.type==="Video"&&(zu.autoplay.stop(),await new Promise(qu=>{var Xc;const Yu=(Xc=zu.slides[zu.activeIndex])==null?void 0:Xc.querySelector("video");if(!Yu){qu(noTypecheck(null));return}Yu.muted=!0,Yu.play(),Yu.onerror=()=>qu(noTypecheck(null)),Yu.onended=()=>qu(noTypecheck(null)),Yu.onclick=()=>{Yu.pause(),qu(noTypecheck(null))}}),zu.autoplay.start())};return _u.$$set=Uu=>{"mediaData"in Uu&&Cu(0,Lu=Uu.mediaData),"inDelay"in Uu&&Cu(1,Ou=Uu.inDelay),"outDelay"in Uu&&Cu(2,Du=Uu.outDelay),"duration"in Uu&&Cu(3,$u=Uu.duration),"unfolded"in Uu&&Cu(4,ku=Uu.unfolded),"animation"in Uu&&Cu(5,Fu=Uu.animation),"objectFit"in Uu&&Cu(6,Nu=Uu.objectFit),"enableCarousel"in Uu&&Cu(12,Vu=Uu.enableCarousel),"autoplayConfig"in Uu&&Cu(7,Gu=Uu.autoplayConfig)},_u.$$.update=()=>{_u.$$.dirty&4097&&Cu(11,Pu=Vu&&(Lu==null?void 0:Lu.length)>1),_u.$$.dirty&1&&Cu(8,Bu=Lu),_u.$$.dirty&384&&Cu(10,Ru=Bu.length>1&&Gu.autoplay)},[Lu,Ou,Du,$u,ku,Fu,Nu,Gu,Bu,Hu,Ru,Pu,Vu,ju]}class Media extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$d,create_fragment$d,safe_not_equal,{mediaData:0,inDelay:1,outDelay:2,duration:3,unfolded:4,animation:5,objectFit:6,enableCarousel:12,autoplayConfig:7},add_css$d)}}function add_css$c(_u){append_styles(_u,"svelte-1p8f9wy",".line.svelte-1p8f9wy{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%);z-index:10}.text.svelte-1p8f9wy{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;z-index:10;font-weight:600}.media-wrapper.svelte-1p8f9wy{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;z-index:10;font-weight:600}")}function get_each_context$2(_u,Tu,Cu){const Pu=_u.slice();return Pu[7]=Tu[Cu].id,Pu[1]=Tu[Cu].content,Pu}function create_if_block$9(_u){let Tu,Cu,Pu,Bu,Ru,Lu=[],Ou=new Map,Du,$u,ku;Tu=new Shadow({props:{visible:_u[4],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),Bu=new Polyline({props:{unfolded:_u[4],duration:1e3,outDelay:400}});let Fu=_u[2];const Nu=Gu=>Gu[7];for(let Gu=0;Gu<Fu.length;Gu+=1){let Hu=get_each_context$2(_u,Fu,Gu),ju=Nu(Hu);Ou.set(ju,Lu[Gu]=create_each_block$2(ju,Hu))}let Vu=_u[3]&&create_if_block_1$5(_u);return{c(){create_component(Tu.$$.fragment),Cu=space(),Pu=element("div"),create_component(Bu.$$.fragment),Ru=space();for(let Gu=0;Gu<Lu.length;Gu+=1)Lu[Gu].c();Du=space(),Vu&&Vu.c(),$u=empty(),attr$1(Pu,"class","line svelte-1p8f9wy")},m(Gu,Hu){mount_component(Tu,Gu,Hu),insert(Gu,Cu,Hu),insert(Gu,Pu,Hu),mount_component(Bu,Pu,null),insert(Gu,Ru,Hu);for(let ju=0;ju<Lu.length;ju+=1)Lu[ju].m(Gu,Hu);insert(Gu,Du,Hu),Vu&&Vu.m(Gu,Hu),insert(Gu,$u,Hu),ku=!0},p(Gu,Hu){const ju={};Hu&16&&(ju.visible=Gu[4]),Tu.$set(ju);const Uu={};Hu&16&&(Uu.unfolded=Gu[4]),Bu.$set(Uu),Hu&20&&(Fu=Gu[2],group_outros(),Lu=update_keyed_each(Lu,Hu,Nu,1,Gu,Fu,Ou,Du.parentNode,outro_and_destroy_block,create_each_block$2,Du,get_each_context$2),check_outros()),Gu[3]?Vu?(Vu.p(Gu,Hu),Hu&8&&transition_in(Vu,1)):(Vu=create_if_block_1$5(Gu),Vu.c(),transition_in(Vu,1),Vu.m($u.parentNode,$u)):Vu&&(group_outros(),transition_out(Vu,1,1,()=>{Vu=null}),check_outros())},i(Gu){if(!ku){transition_in(Tu.$$.fragment,Gu),transition_in(Bu.$$.fragment,Gu);for(let Hu=0;Hu<Fu.length;Hu+=1)transition_in(Lu[Hu]);transition_in(Vu),ku=!0}},o(Gu){transition_out(Tu.$$.fragment,Gu),transition_out(Bu.$$.fragment,Gu);for(let Hu=0;Hu<Lu.length;Hu+=1)transition_out(Lu[Hu]);transition_out(Vu),ku=!1},d(Gu){destroy_component(Tu,Gu),Gu&&detach(Cu),Gu&&detach(Pu),destroy_component(Bu),Gu&&detach(Ru);for(let Hu=0;Hu<Lu.length;Hu+=1)Lu[Hu].d(Gu);Gu&&detach(Du),Vu&&Vu.d(Gu),Gu&&detach($u)}}}function create_each_block$2(_u,Tu){let Cu,Pu,Bu;return Pu=new Text({props:{unfolded:Tu[4],content:Tu[1],inDelay:500}}),{key:_u,first:null,c(){Cu=element("div"),create_component(Pu.$$.fragment),attr$1(Cu,"class","text svelte-1p8f9wy"),this.first=Cu},m(Ru,Lu){insert(Ru,Cu,Lu),mount_component(Pu,Cu,null),Bu=!0},p(Ru,Lu){Tu=Ru;const Ou={};Lu&16&&(Ou.unfolded=Tu[4]),Lu&4&&(Ou.content=Tu[1]),Pu.$set(Ou)},i(Ru){Bu||(transition_in(Pu.$$.fragment,Ru),Bu=!0)},o(Ru){transition_out(Pu.$$.fragment,Ru),Bu=!1},d(Ru){Ru&&detach(Cu),destroy_component(Pu)}}}function create_if_block_1$5(_u){let Tu,Cu,Pu;return Cu=new Media({props:{autoplayConfig:{autoplay:!1},unfolded:_u[4],mediaData:_u[3],inDelay:500,duration:500}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),attr$1(Tu,"class","media-wrapper svelte-1p8f9wy")},m(Bu,Ru){insert(Bu,Tu,Ru),mount_component(Cu,Tu,null),Pu=!0},p(Bu,Ru){const Lu={};Ru&16&&(Lu.unfolded=Bu[4]),Ru&8&&(Lu.mediaData=Bu[3]),Cu.$set(Lu)},i(Bu){Pu||(transition_in(Cu.$$.fragment,Bu),Pu=!0)},o(Bu){transition_out(Cu.$$.fragment,Bu),Pu=!1},d(Bu){Bu&&detach(Tu),destroy_component(Cu)}}}function create_fragment$c(_u){let Tu,Cu,Pu=_u[0].state&&create_if_block$9(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,[Ru]){Bu[0].state?Pu?(Pu.p(Bu,Ru),Ru&1&&transition_in(Pu,1)):(Pu=create_if_block$9(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function instance$c(_u,Tu,Cu){let Pu,Bu,Ru;var Lu,Ou;let{tag:Du}=Tu,$u;return _u.$$set=ku=>{"tag"in ku&&Cu(0,Du=ku.tag)},_u.$$.update=()=>{_u.$$.dirty&1&&Cu(4,Pu=Du.state?Du.state.unfolded:!1),_u.$$.dirty&97&&Cu(1,Bu=nullishCoalescing(Cu(5,Lu=Du.data.text)===null||Lu===void 0?void 0:Lu.length,0)>7?(Cu(6,Ou=Du.data.text)===null||Ou===void 0?void 0:Ou.substring(0,6))+"...":Du.data.text),_u.$$.dirty&1&&Cu(3,Ru=Du.data.mediaData),_u.$$.dirty&2&&Cu(2,$u=Bu?[{id:uuid(),content:Bu}]:[])},[Du,Bu,$u,Ru,Pu,Lu,Ou]}class ImageTextTag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$c,create_fragment$c,safe_not_equal,{tag:0},add_css$c)}}function add_css$b(_u){append_styles(_u,"svelte-8mby9k",".svelte-8mby9k.svelte-8mby9k{box-sizing:border-box}.marketing.svelte-8mby9k.svelte-8mby9k{transform:translateY(-100%)}.content.svelte-8mby9k .headerImage.svelte-8mby9k{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.line.svelte-8mby9k.svelte-8mby9k{position:absolute;height:2.0625rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.content.svelte-8mby9k.svelte-8mby9k{background-color:white;position:relative;display:flex;flex-direction:column;min-width:11.125rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition:all 500ms}.title.svelte-8mby9k.svelte-8mby9k{position:absolute;background-color:white;border-radius:0.25rem;width:100%;top:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.title.svelte-8mby9k .text.svelte-8mby9k{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem;color:#000}.footer.svelte-8mby9k.svelte-8mby9k{position:relative;padding-left:0.75rem;padding-right:0.75rem;width:100%;height:1.375rem;display:flex;align-items:center}.footer.svelte-8mby9k .goto-button.svelte-8mby9k{flex-shrink:0;white-space:nowrap;background-image:linear-gradient(to right, rgba(87, 144, 253, 1) 0, rgba(42, 114, 254, 1) 100%);color:#fff;font-size:0.625rem;border-radius:0.875rem;font-weight:bold;padding-left:0.5rem;padding-right:0.5rem;height:1.25rem;margin-left:auto;display:flex;align-items:center}.footer.svelte-8mby9k .goto-icon.svelte-8mby9k::after{content:'';display:inline-block;width:0.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAeFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////GqOSsAAAAJ3RSTlMAFNO2pYt4bErz8uP6ysawgVtBPDcR5C4s2L6ZmJBzZGJXUyEeDws/0G2zAAAAkklEQVQ4y+3TRw6DMBAF0OAeJ3QCpCe0uf8NwRILLBYfiS1/aT3JoymnI+sERZ5VCH0iVto3QDfBLmeSSMUTogRV9bBEpJAKaYpGijn13aTSLeraeG9D0NZFZv4/rRL5FDHnITlllqjv6tykWsmX4JHr05y7j6oFKq2P8He48B0tAM0EY0EDxquClw6vLz6EI35GmwwSZpe+WOgAAAAASUVORK5CYII=);background-size:100% auto;background-repeat:no-repeat}.price.svelte-8mby9k.svelte-8mby9k{flex-shrink:0;margin-right:0.75rem;white-space:nowrap;color:#ff6600;display:flex;align-items:baseline}.price.svelte-8mby9k .value.svelte-8mby9k{position:relative;top:0.0625rem;font-size:1.125rem;line-height:1.375rem;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0rem}.price.svelte-8mby9k .unit.svelte-8mby9k{padding-left:0.125rem;font-size:0.625rem}.tag.svelte-8mby9k.svelte-8mby9k{position:relative;background-color:white;display:flex;width:-moz-max-content;width:max-content;padding-left:0.75rem;padding-right:0.75rem;min-height:1.75rem}.tag.svelte-8mby9k .base-tag.svelte-8mby9k{height:1rem;margin-top:1.375rem;margin-bottom:0.5rem;margin-right:0.25rem;font-size:0.625rem;line-height:0.875rem;padding:0.0625rem 0.25rem;border-radius:0.125rem;overflow:hidden}.tag.svelte-8mby9k .primary-tag.svelte-8mby9k{background:#e5eefe;color:#0055ff}.tag.svelte-8mby9k .secondary-tag.svelte-8mby9k{background:rgba(255, 102, 0, 0.08);color:rgba(255, 102, 0, 1)}.unfolded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 1)}.folded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.unfolded.svelte-8mby9k .content.svelte-8mby9k{opacity:1}.folded.svelte-8mby9k .content.svelte-8mby9k{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}")}function get_each_context$1(_u,Tu,Cu){const Pu=_u.slice();return Pu[0]=Tu[Cu],Pu}function get_each_context_1(_u,Tu,Cu){const Pu=_u.slice();return Pu[0]=Tu[Cu],Pu}function create_if_block_4$1(_u){let Tu,Cu=_u[0]+"",Pu;return{c(){Tu=element("div"),Pu=text$1(Cu),attr$1(Tu,"class","base-tag primary-tag svelte-8mby9k")},m(Bu,Ru){insert(Bu,Tu,Ru),append$1(Tu,Pu)},p(Bu,Ru){Ru&4&&Cu!==(Cu=Bu[0]+"")&&set_data(Pu,Cu)},d(Bu){Bu&&detach(Tu)}}}function create_each_block_1(_u){let Tu,Cu=_u[0]&&create_if_block_4$1(_u);return{c(){Cu&&Cu.c(),Tu=empty()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),insert(Pu,Tu,Bu)},p(Pu,Bu){Pu[0]?Cu?Cu.p(Pu,Bu):(Cu=create_if_block_4$1(Pu),Cu.c(),Cu.m(Tu.parentNode,Tu)):Cu&&(Cu.d(1),Cu=null)},d(Pu){Cu&&Cu.d(Pu),Pu&&detach(Tu)}}}function create_if_block_3$1(_u){let Tu,Cu=_u[0]+"",Pu;return{c(){Tu=element("div"),Pu=text$1(Cu),attr$1(Tu,"class","base-tag secondary-tag svelte-8mby9k")},m(Bu,Ru){insert(Bu,Tu,Ru),append$1(Tu,Pu)},p(Bu,Ru){Ru&4&&Cu!==(Cu=Bu[0]+"")&&set_data(Pu,Cu)},d(Bu){Bu&&detach(Tu)}}}function create_each_block$1(_u){let Tu,Cu=_u[0]&&create_if_block_3$1(_u);return{c(){Cu&&Cu.c(),Tu=empty()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),insert(Pu,Tu,Bu)},p(Pu,Bu){Pu[0]?Cu?Cu.p(Pu,Bu):(Cu=create_if_block_3$1(Pu),Cu.c(),Cu.m(Tu.parentNode,Tu)):Cu&&(Cu.d(1),Cu=null)},d(Pu){Cu&&Cu.d(Pu),Pu&&detach(Tu)}}}function create_if_block_1$4(_u){let Tu,Cu,Pu=_u[2].price.value+"",Bu,Ru,Lu=_u[2].price.unit&&create_if_block_2$2(_u);return{c(){Tu=element("div"),Cu=element("span"),Bu=text$1(Pu),Ru=space(),Lu&&Lu.c(),attr$1(Cu,"class","value svelte-8mby9k"),attr$1(Tu,"class","price svelte-8mby9k")},m(Ou,Du){insert(Ou,Tu,Du),append$1(Tu,Cu),append$1(Cu,Bu),append$1(Tu,Ru),Lu&&Lu.m(Tu,null)},p(Ou,Du){Du&4&&Pu!==(Pu=Ou[2].price.value+"")&&set_data(Bu,Pu),Ou[2].price.unit?Lu?Lu.p(Ou,Du):(Lu=create_if_block_2$2(Ou),Lu.c(),Lu.m(Tu,null)):Lu&&(Lu.d(1),Lu=null)},d(Ou){Ou&&detach(Tu),Lu&&Lu.d()}}}function create_if_block_2$2(_u){let Tu,Cu=_u[2].price.unit+"",Pu;return{c(){Tu=element("span"),Pu=text$1(Cu),attr$1(Tu,"class","unit svelte-8mby9k")},m(Bu,Ru){insert(Bu,Tu,Ru),append$1(Tu,Pu)},p(Bu,Ru){Ru&4&&Cu!==(Cu=Bu[2].price.unit+"")&&set_data(Pu,Cu)},d(Bu){Bu&&detach(Tu)}}}function create_if_block$8(_u){let Tu,Cu=_u[2].highlightText+"",Pu;return{c(){Tu=element("div"),Pu=text$1(Cu),attr$1(Tu,"class","goto-button goto-icon svelte-8mby9k")},m(Bu,Ru){insert(Bu,Tu,Ru),append$1(Tu,Pu)},p(Bu,Ru){Ru&4&&Cu!==(Cu=Bu[2].highlightText+"")&&set_data(Pu,Cu)},d(Bu){Bu&&detach(Tu)}}}function create_fragment$b(_u){var Xu,Ju;let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu=_u[2].title+"",ju,Uu,zu,Wu,Qu;Cu=new Shadow({props:{visible:_u[1],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let qu=_u[2].brandTags||[],Yu=[];for(let Zu=0;Zu<qu.length;Zu+=1)Yu[Zu]=create_each_block_1(get_each_context_1(_u,qu,Zu));let Xc=_u[2].tags||[],_h=[];for(let Zu=0;Zu<Xc.length;Zu+=1)_h[Zu]=create_each_block$1(get_each_context$1(_u,Xc,Zu));let _d=((Xu=_u[2].price)==null?void 0:Xu.value)!==void 0&&((Ju=_u[2].price)==null?void 0:Ju.value)!==null&&create_if_block_1$4(_u),Ku=_u[2].highlightText&&create_if_block$8(_u);return{c(){var Zu,_c;Tu=element("div"),create_component(Cu.$$.fragment),Pu=space(),Bu=element("div"),Ru=space(),Lu=element("div"),Ou=element("img"),$u=space(),ku=element("div");for(let _f=0;_f<Yu.length;_f+=1)Yu[_f].c();Fu=space();for(let _f=0;_f<_h.length;_f+=1)_h[_f].c();Nu=space(),Vu=element("div"),Gu=element("div"),ju=text$1(Hu),Uu=space(),zu=element("div"),_d&&_d.c(),Wu=space(),Ku&&Ku.c(),attr$1(Bu,"class","line svelte-8mby9k"),set_style(Bu,"transition-delay",_u[1]?bigSmallDotChange+"ms":tagContentShowWhenLineStartGrow+tagContentShow-lineGrow-40+"ms"),attr$1(Ou,"class","headerImage svelte-8mby9k"),src_url_equal(Ou.src,Du=_u[2].headerPictureUrl)||attr$1(Ou,"src",Du),attr$1(Ou,"alt",""),attr$1(ku,"class","tag svelte-8mby9k"),attr$1(Gu,"class","text svelte-8mby9k"),attr$1(Vu,"class","title svelte-8mby9k"),attr$1(zu,"class","footer svelte-8mby9k"),set_style(zu,"height",((Zu=_u[2].price)==null?void 0:Zu.value)!==void 0&&((_c=_u[2].price)==null?void 0:_c.value)!==null&&_u[2].highlightText?void 0:"1rem"),attr$1(Lu,"class","content svelte-8mby9k"),set_style(Lu,"transition-delay",_u[1]?bigSmallDotChange+tagContentShowWhenLineStartGrow+"ms":"0ms"),attr$1(Tu,"class","marketing svelte-8mby9k"),toggle_class(Tu,"unfolded",_u[1]),toggle_class(Tu,"folded",_u[3])},m(Zu,_c){insert(Zu,Tu,_c),mount_component(Cu,Tu,null),append$1(Tu,Pu),append$1(Tu,Bu),append$1(Tu,Ru),append$1(Tu,Lu),append$1(Lu,Ou),append$1(Lu,$u),append$1(Lu,ku);for(let _f=0;_f<Yu.length;_f+=1)Yu[_f].m(ku,null);append$1(ku,Fu);for(let _f=0;_f<_h.length;_f+=1)_h[_f].m(ku,null);append$1(Lu,Nu),append$1(Lu,Vu),append$1(Vu,Gu),append$1(Gu,ju),append$1(Lu,Uu),append$1(Lu,zu),_d&&_d.m(zu,null),append$1(zu,Wu),Ku&&Ku.m(zu,null),Qu=!0},p(Zu,[_c]){var ep,tp,op,hp;const _f={};if(_c&2&&(_f.visible=Zu[1]),Cu.$set(_f),_c&2&&set_style(Bu,"transition-delay",Zu[1]?bigSmallDotChange+"ms":tagContentShowWhenLineStartGrow+tagContentShow-lineGrow-40+"ms"),(!Qu||_c&4&&!src_url_equal(Ou.src,Du=Zu[2].headerPictureUrl))&&attr$1(Ou,"src",Du),_c&4){qu=Zu[2].brandTags||[];let cp;for(cp=0;cp<qu.length;cp+=1){const Sp=get_each_context_1(Zu,qu,cp);Yu[cp]?Yu[cp].p(Sp,_c):(Yu[cp]=create_each_block_1(Sp),Yu[cp].c(),Yu[cp].m(ku,Fu))}for(;cp<Yu.length;cp+=1)Yu[cp].d(1);Yu.length=qu.length}if(_c&4){Xc=Zu[2].tags||[];let cp;for(cp=0;cp<Xc.length;cp+=1){const Sp=get_each_context$1(Zu,Xc,cp);_h[cp]?_h[cp].p(Sp,_c):(_h[cp]=create_each_block$1(Sp),_h[cp].c(),_h[cp].m(ku,null))}for(;cp<_h.length;cp+=1)_h[cp].d(1);_h.length=Xc.length}(!Qu||_c&4)&&Hu!==(Hu=Zu[2].title+"")&&set_data(ju,Hu),((ep=Zu[2].price)==null?void 0:ep.value)!==void 0&&((tp=Zu[2].price)==null?void 0:tp.value)!==null?_d?_d.p(Zu,_c):(_d=create_if_block_1$4(Zu),_d.c(),_d.m(zu,Wu)):_d&&(_d.d(1),_d=null),Zu[2].highlightText?Ku?Ku.p(Zu,_c):(Ku=create_if_block$8(Zu),Ku.c(),Ku.m(zu,null)):Ku&&(Ku.d(1),Ku=null),_c&4&&set_style(zu,"height",((op=Zu[2].price)==null?void 0:op.value)!==void 0&&((hp=Zu[2].price)==null?void 0:hp.value)!==null&&Zu[2].highlightText?void 0:"1rem"),_c&2&&set_style(Lu,"transition-delay",Zu[1]?bigSmallDotChange+tagContentShowWhenLineStartGrow+"ms":"0ms"),(!Qu||_c&2)&&toggle_class(Tu,"unfolded",Zu[1]),(!Qu||_c&8)&&toggle_class(Tu,"folded",Zu[3])},i(Zu){Qu||(transition_in(Cu.$$.fragment,Zu),Qu=!0)},o(Zu){transition_out(Cu.$$.fragment,Zu),Qu=!1},d(Zu){Zu&&detach(Tu),destroy_component(Cu),destroy_each(Yu,Zu),destroy_each(_h,Zu),_d&&_d.d(),Ku&&Ku.d()}}}const bigSmallDotChange=400,lineGrow=500,tagContentShowWhenLineStartGrow=180,tagContentShow=500;function instance$b(_u,Tu,Cu){let Pu,Bu,Ru;var Lu;let{tag:Ou}=Tu;return _u.$$set=Du=>{"tag"in Du&&Cu(0,Ou=Du.tag)},_u.$$.update=()=>{_u.$$.dirty&17&&Cu(1,Pu=nullishCoalescing(Cu(4,Lu=Ou.state)===null||Lu===void 0?void 0:Lu.unfolded,!1)),_u.$$.dirty&2&&Cu(3,Bu=!Pu),_u.$$.dirty&1&&Cu(2,Ru=Ou.data)},[Ou,Pu,Ru,Bu,Lu]}class MarketingTag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$b,create_fragment$b,safe_not_equal,{tag:0},add_css$b)}}function add_css$a(_u){append_styles(_u,"svelte-1ku3wt4",`.audio.svelte-1ku3wt4.svelte-1ku3wt4{position:relative;width:100%;height:100%;cursor:pointer}@keyframes svelte-1ku3wt4-playing{25%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='9' cy='9' r='8' transform='translate(-1 -1)' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}50%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.533 6.685L4.169 8.049l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}75%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm-.656 4.874l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .875-.333 1.67-.88 2.268l.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}}.paused.svelte-1ku3wt4 .audio-icon.svelte-1ku3wt4{animation:none}.audio-icon.svelte-1ku3wt4.svelte-1ku3wt4{width:100%;height:100%;border-radius:50%;background-size:100%;animation:svelte-1ku3wt4-playing 2s steps(1) infinite;background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm1.428 2.79l-.953.952a6.222 6.222 0 0 1 1.775 4.36c0 1.571-.58 3.006-1.538 4.103l-.184.202.793.794a7.344 7.344 0 0 0 2.21-5.26A7.341 7.341 0 0 0 9.428 2.79zM7.344 4.873l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .802-.28 1.537-.748 2.115l-.132.153.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}`)}function create_if_block$7(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du=!0,$u,ku,Fu,Nu,Vu;return Cu=new Shadow({props:{center:!0,blurRadius:15,spreadRadius:6}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),Pu=space(),Bu=element("div"),Ru=space(),Lu=element("audio"),attr$1(Bu,"class","audio-icon svelte-1ku3wt4"),Lu.controls=!1,attr$1(Lu,"playsinline",""),src_url_equal(Lu.src,Ou=_u[3])||attr$1(Lu,"src",Ou),attr$1(Tu,"class","audio svelte-1ku3wt4"),toggle_class(Tu,"paused",_u[6])},m(Gu,Hu){insert(Gu,Tu,Hu),mount_component(Cu,Tu,null),append$1(Tu,Pu),append$1(Tu,Bu),append$1(Tu,Ru),append$1(Tu,Lu),_u[10](Lu),Fu=!0,Nu||(Vu=[listen(Lu,"play",_u[11]),listen(Lu,"pause",_u[11]),listen(Tu,"click",stop_propagation(_u[7]))],Nu=!0)},p(Gu,Hu){_u=Gu,(!Fu||Hu&8&&!src_url_equal(Lu.src,Ou=_u[3]))&&attr$1(Lu,"src",Ou),Hu&64&&Du!==(Du=_u[6])&&Lu[Du?"pause":"play"](),(!Fu||Hu&64)&&toggle_class(Tu,"paused",_u[6])},i(Gu){Fu||(transition_in(Cu.$$.fragment,Gu),Gu&&add_render_callback(()=>{ku&&ku.end(1),$u=create_in_transition(Tu,fade,{duration:_u[2],delay:_u[0],easing:cubicInOut}),$u.start()}),Fu=!0)},o(Gu){transition_out(Cu.$$.fragment,Gu),$u&&$u.invalidate(),Gu&&(ku=create_out_transition(Tu,fade,{duration:_u[2],delay:_u[1],easing:cubicInOut})),Fu=!1},d(Gu){Gu&&detach(Tu),destroy_component(Cu),_u[10](null),Gu&&ku&&ku.end(),Nu=!1,run_all(Vu)}}}function create_fragment$a(_u){let Tu,Cu,Pu=_u[4]&&create_if_block$7(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,[Ru]){Bu[4]?Pu?(Pu.p(Bu,Ru),Ru&16&&transition_in(Pu,1)):(Pu=create_if_block$7(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function instance$a(_u,Tu,Cu){let{inDelay:Pu=0}=Tu,{outDelay:Bu=0}=Tu,{duration:Ru=0}=Tu,{url:Lu}=Tu,{unfolded:Ou}=Tu,{mediaStore:Du}=Tu,{hooksInfo:$u={}}=Tu;const ku=getContext("hooks");let Fu,Nu=!0;Du.subscribe(({currentMediaUrl:ju})=>{ju!==Lu&&(Fu==null||Fu.pause())});function Vu(ju){Du.set({currentMediaUrl:Lu}),Fu&&(ku.emit("click",Object.assign({event:ju,target:"AudioTagPlayIcon",audioInstance:Fu},$u)),Fu.paused?Fu.play():Fu.pause(),Cu(5,Fu.onplay=Uu=>ku.emit("playStateChange",Object.assign({event:Uu,state:"playing",mediaInstance:Fu},$u)),Fu),Cu(5,Fu.onpause=Uu=>ku.emit("playStateChange",Object.assign({event:Uu,state:"paused",mediaInstance:Fu},$u)),Fu))}function Gu(ju){binding_callbacks[ju?"unshift":"push"](()=>{Fu=ju,Cu(5,Fu)})}function Hu(){Nu=this.paused,Cu(6,Nu)}return _u.$$set=ju=>{"inDelay"in ju&&Cu(0,Pu=ju.inDelay),"outDelay"in ju&&Cu(1,Bu=ju.outDelay),"duration"in ju&&Cu(2,Ru=ju.duration),"url"in ju&&Cu(3,Lu=ju.url),"unfolded"in ju&&Cu(4,Ou=ju.unfolded),"mediaStore"in ju&&Cu(8,Du=ju.mediaStore),"hooksInfo"in ju&&Cu(9,$u=ju.hooksInfo)},_u.$$.update=()=>{_u.$$.dirty&48&&(Ou||Fu==null||Fu.pause())},[Pu,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Du,$u,Gu,Hu]}class Audio$1 extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$a,create_fragment$a,safe_not_equal,{inDelay:0,outDelay:1,duration:2,url:3,unfolded:4,mediaStore:8,hooksInfo:9},add_css$a)}}function add_css$9(_u){append_styles(_u,"svelte-4r8s18",".audio-tag.svelte-4r8s18.svelte-4r8s18{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.line.svelte-4r8s18.svelte-4r8s18{display:flex;position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-4r8s18.svelte-4r8s18{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-4r8s18.svelte-4r8s18{position:relative;width:100%;height:100%}.audio-icon.svelte-4r8s18.svelte-4r8s18{vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.unfolded.svelte-4r8s18 .audio-icon.svelte-4r8s18{pointer-events:auto}")}function create_if_block$6(_u){var zu,Wu;let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku,Fu,Nu,Vu,Gu,Hu,ju,Uu;return Cu=new Shadow({props:{visible:_u[6],left:_u[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Ru=new Straight({props:{unfolded:_u[6],duration:1e3,outDelay:_u[5]+20*Math.min(nullishCoalescing((zu=_u[4][0])==null?void 0:zu.content.length,10),15)}}),ku=new Audio$1({props:{unfolded:_u[6],mediaStore:_u[0],url:_u[1].data.audioUrl,duration:1e3,outDelay:20*Math.min(nullishCoalescing((Wu=_u[4][0])==null?void 0:Wu.content.length,10),15),hooksInfo:{tag:_u[1]}}}),Vu=new MultiLineText({props:{visible:_u[6],textUnfolded:_u[2],textItems:_u[4]}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),Pu=space(),Bu=element("div"),create_component(Ru.$$.fragment),Lu=space(),Ou=element("div"),Du=element("div"),$u=element("div"),create_component(ku.$$.fragment),Fu=space(),Nu=element("div"),create_component(Vu.$$.fragment),attr$1(Bu,"class","line svelte-4r8s18"),set_style(Bu,"width",_u[3]+"px"),attr$1($u,"class","audio-icon svelte-4r8s18"),set_style(Nu,"display","inline-block"),attr$1(Du,"class","wrapper svelte-4r8s18"),attr$1(Ou,"class","content svelte-4r8s18"),add_render_callback(()=>_u[10].call(Ou)),attr$1(Tu,"class","audio-tag svelte-4r8s18"),toggle_class(Tu,"unfolded",_u[6])},m(Qu,qu){insert(Qu,Tu,qu),mount_component(Cu,Tu,null),append$1(Tu,Pu),append$1(Tu,Bu),mount_component(Ru,Bu,null),append$1(Tu,Lu),append$1(Tu,Ou),append$1(Ou,Du),append$1(Du,$u),mount_component(ku,$u,null),append$1(Du,Fu),append$1(Du,Nu),mount_component(Vu,Nu,null),Gu=add_resize_listener(Ou,_u[10].bind(Ou)),Hu=!0,ju||(Uu=listen(Nu,"click",_u[7]),ju=!0)},p(Qu,qu){var Ku,Xu;const Yu={};qu&64&&(Yu.visible=Qu[6]),qu&8&&(Yu.left=Qu[3]/2+"px"),Cu.$set(Yu);const Xc={};qu&64&&(Xc.unfolded=Qu[6]),qu&48&&(Xc.outDelay=Qu[5]+20*Math.min(nullishCoalescing((Ku=Qu[4][0])==null?void 0:Ku.content.length,10),15)),Ru.$set(Xc),qu&8&&set_style(Bu,"width",Qu[3]+"px");const _h={};qu&64&&(_h.unfolded=Qu[6]),qu&1&&(_h.mediaStore=Qu[0]),qu&2&&(_h.url=Qu[1].data.audioUrl),qu&16&&(_h.outDelay=20*Math.min(nullishCoalescing((Xu=Qu[4][0])==null?void 0:Xu.content.length,10),15)),qu&2&&(_h.hooksInfo={tag:Qu[1]}),ku.$set(_h);const _d={};qu&64&&(_d.visible=Qu[6]),qu&4&&(_d.textUnfolded=Qu[2]),qu&16&&(_d.textItems=Qu[4]),Vu.$set(_d),(!Hu||qu&64)&&toggle_class(Tu,"unfolded",Qu[6])},i(Qu){Hu||(transition_in(Cu.$$.fragment,Qu),transition_in(Ru.$$.fragment,Qu),transition_in(ku.$$.fragment,Qu),transition_in(Vu.$$.fragment,Qu),Hu=!0)},o(Qu){transition_out(Cu.$$.fragment,Qu),transition_out(Ru.$$.fragment,Qu),transition_out(ku.$$.fragment,Qu),transition_out(Vu.$$.fragment,Qu),Hu=!1},d(Qu){Qu&&detach(Tu),destroy_component(Cu),destroy_component(Ru),destroy_component(ku),destroy_component(Vu),Gu(),ju=!1,Uu()}}}function create_fragment$9(_u){let Tu,Cu,Pu=_u[1].state&&create_if_block$6(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,[Ru]){Bu[1].state?Pu?(Pu.p(Bu,Ru),Ru&2&&transition_in(Pu,1)):(Pu=create_if_block$6(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function instance$9(_u,Tu,Cu){let Pu,Bu,Ru;var Lu;let{mediaStore:Ou}=Tu,{tag:Du}=Tu,$u=!1,ku,Fu=[];function Nu(){Cu(2,$u=!$u)}function Vu(){ku=this.clientWidth,Cu(3,ku)}return _u.$$set=Gu=>{"mediaStore"in Gu&&Cu(0,Ou=Gu.mediaStore),"tag"in Gu&&Cu(1,Du=Gu.tag)},_u.$$.update=()=>{_u.$$.dirty&258&&Cu(6,Pu=!!(!(Cu(8,Lu=Du.state)===null||Lu===void 0)&&Lu.unfolded)),_u.$$.dirty&2&&Cu(9,Bu=Du.data.text),_u.$$.dirty&512&&Cu(4,Fu=[{id:uuid(),content:Bu}]),_u.$$.dirty&4&&Cu(5,Ru=$u?450:0)},[Ou,Du,$u,ku,Fu,Ru,Pu,Nu,Lu,Bu,Vu]}class AudioTag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$9,create_fragment$9,safe_not_equal,{mediaStore:0,tag:1},add_css$9)}}function add_css$8(_u){append_styles(_u,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function create_if_block$5(_u){let Tu,Cu,Pu;return Cu=new Media({props:{unfolded:_u[5],mediaData:_u[4],objectFit:_u[2],enableCarousel:_u[1],autoplayConfig:_u[3],inDelay:500,duration:500}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),attr$1(Tu,"class","media-wrapper svelte-10cw0el")},m(Bu,Ru){insert(Bu,Tu,Ru),mount_component(Cu,Tu,null),Pu=!0},p(Bu,Ru){const Lu={};Ru&32&&(Lu.unfolded=Bu[5]),Ru&16&&(Lu.mediaData=Bu[4]),Ru&4&&(Lu.objectFit=Bu[2]),Ru&2&&(Lu.enableCarousel=Bu[1]),Ru&8&&(Lu.autoplayConfig=Bu[3]),Cu.$set(Lu)},i(Bu){Pu||(transition_in(Cu.$$.fragment,Bu),Pu=!0)},o(Bu){transition_out(Cu.$$.fragment,Bu),Pu=!1},d(Bu){Bu&&detach(Tu),destroy_component(Cu)}}}function create_fragment$8(_u){let Tu,Cu,Pu=_u[0].state&&_u[4]&&create_if_block$5(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,[Ru]){Bu[0].state&&Bu[4]?Pu?(Pu.p(Bu,Ru),Ru&17&&transition_in(Pu,1)):(Pu=create_if_block$5(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function instance$8(_u,Tu,Cu){let Pu,Bu,Ru,Lu,Ou,{tag:Du}=Tu;return _u.$$set=$u=>{"tag"in $u&&Cu(0,Du=$u.tag)},_u.$$.update=()=>{_u.$$.dirty&1&&Cu(5,Pu=Du.state?Du.state.unfolded:!1),_u.$$.dirty&1&&Cu(4,Bu=Du.data.mediaData),_u.$$.dirty&1&&Cu(1,Ru=Du.data.enableCarousel),_u.$$.dirty&3&&Cu(3,Lu=nullishCoalescing(Du.data.autoplayConfig,{autoplay:nullishCoalescing(Ru,!0),autoplayVideo:!0})),_u.$$.dirty&1&&Cu(2,Ou=nullishCoalescing(Du.data.objectFit,(()=>Du.data.adaptationMode==="stretch"?"cover":Du.data.adaptationMode==="proportional"?"contain":void 0)()))},[Du,Ru,Ou,Lu,Bu,Pu]}class MediaPlane extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$8,create_fragment$8,safe_not_equal,{tag:0},add_css$8)}}function add_css$7(_u){append_styles(_u,"svelte-7x7u86",".wrapper.svelte-7x7u86{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-7x7u86{position:relative;display:flex;align-items:center;justify-content:center}.icon.svelte-7x7u86{position:relative;margin-bottom:0.6875rem}.arrow0.svelte-7x7u86,.arrow1.svelte-7x7u86,.arrow2.svelte-7x7u86{position:absolute;width:1.625rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAAAkCAYAAAAnxQwhAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATqADAAQAAAABAAAAJAAAAABrx2urAAAGm0lEQVRoBd2ZXbCVUxjH26QSfSCS0JwoFNEZ0cc45iSmUUaqC+KCwUUXxYUZw4yrLhozLlDDRWa6oW5yOFTT0IcyKn1JnIjDKelLPipJcXT8fttaZ95qd+yzv+uZ+e211rvfd61n/ddaz1rv3qkOFWgtLS3n4Vb34NqhVCr1d6W5mao0hxBNwfrCOcG346S7Ee9gKFdEUjHCIZi+XA69E8p4rQVM98EeBLRcdqsI4RCtI0r0h4uCIvo1BZx1b4GzTjsA3yFec7pUxo+yC4doXen/IDg/6GB5GlSH8mbSWXA4lI+SNiDekVAuS1JW4RCtF72+EWI8c6k+A6ZJc5m+BHvCxX9ItyLe/lAueVIW4UI8u4beDkj02FnnTOuUuJbM/kVhNjQkLjaSbyxH3Cu5cIjmUWMoOKti+2PIT4JsrI6blkKMe87GTYhX0iNLdDwbh/O+B9G6UclIMNWcXQ/CrRbaYRu5dz44C7XfYTXimZbESiYconk2GwGdwSOF4j0JV0AuZrybA4plfYq4BvF2kRbdSiIcog2hJ+6StmcnFesJ6AL52DEefgOiWNa/EfG25FNpNs8WVbgQz+7EEc9o0RRxYiwUKDXuJcVqovxRMeNe0YRDtB44Pw4uAc0jx2gYZqEItoE63TSc0fILLEa8oryqFUU4ROuH04oWl6I76WQwzhXTXLILIO6wLuVFiLedtKBWcOEQ7XY8rE146ZvAwxDfDBJfFSX7J7XOgz8Sta9AvE8T5byzBRMuxLP78Mg3Ac3l0gcmWCiD1dPmboh9/JL8+4WKe7HSvPqFaL6cTwGF0jyc3gTOvnLaehr/HOIrnUeYeYj3W75O5S0covnq9AhcEJxpJr0Lrgrlcic7cWAZ+AuM5o8DbyJeY7qU40dewiFaDe26FOOIKppl41olmWK9C1E8V0Q94q3M1cmchAvx7CEaHZ5oWKfGJ8qVmF2EU75hxH67YcxHQK+1y2IFWT+EaBdz81SoCg+59fvCXuh4tjnUf0tIC5WsoyJjnUckbTu8hni/WsjW2iUcog2k4unQPTTglm/HPLcVwpqoZCu4lOLxxeOFocCfneJgkc3LfuDpzyDG5UPkZyHetmxrzVo4RLubSh+FGM8OkHcTuBDyMUfaTihQHJBYn0cafTTVfKFX0KHgzM/HDvPwcugZKnGw5iLeh6HcZvK/woV45gu5wkVTtLGxkEN6jGc2gaJ5lDkXtCjUXvIrQf9qoDckzU56pFC8augMudoSHoziWcdSmIOA8e3Da6dYm8Ihmu+Zz8H14ckYWHONZ19Qz4+go53A9qNYLvtPYBlON5C2Gn4MpuDsHgVxecXvHQQH8krw7JiLuUnohz5pX8NM/PB9N6OdVjicNaa8AHFJROeqMtZ0+ovGk2/AI0o3iGKRTcey9aSO8locbXN3wyc75k4+BoaBYSNZ3yHKHj2ug6uhPdbEzQ6qK0ARXQ0z8MmYe4plFA4Hx3Hn0xB3Hiv0V9qTYxCXMpoie2LX+vyXnPDpiH4Ay3HMe9tt+NiTh0bDPRBXRLIed07tZvDebEzhN4CzV3O5voyPi9KlxMcJwuGMQj0FE8M9Ku9I1MIJ94bvk4mNGORdcr41GLd8xjpM94HxZAmO7CAtmOF3Pyoz5srJ8bCZaw68M95NJU4GshlNf1dAf4i+15F/Bb9b416rGDRuPHsRHCHN2PEz3GahDXMq/wR9wfgTGyObFnE56ULwDxW/K5rRB/tTDa4YY2Imf3Zx/TIwFLVl6/iyF8SNxxX0LH1Ix720cDRoTJgNcbT2hwdUPZPZeCNYsc9EQazPEV4NTm9/zjlKWnKjT11otBYUcRS4AuKgmjrYToxrwUHPZN9z0Ql0afhyL+k0+rQtRQOu/3qIAhjIB0IPSJrrvwEcARvTko44896DhXFUvKESjD66msbD/eBMSw60eQVygAfDyXH8INe2gZPLiaF4ExTucTLPg2aMGg7uVpqzZwu4tm8Ad7UoFtn0q4ti1SHWt16odKO/A/DxAZgAcYVFt+3nV2AcHAIdQTsOa6Ea7P9MhZtB5jHQmsDltwMM8qrszFPpaEfILIYF4H+ZVnrGGf12coyEyXAvdIU4KUydaa4+r/cDl3UVaHMVzun7erp4+g/FWQWK5a6oeGeNoYHijAVFrIG44shmtKkK52x6FSZluMW4pVjvIJbHibPe0MPl61JWxEEZOvw216a3LkEeGMGFO0D1d8KqMyVu4WtRDE2Mh85Az6Wuso/RZA1ph38BBMvNbHuq7kAAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:contain;animation-fill-mode:backwards;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-duration:1.2s}.arrow1.svelte-7x7u86{position:relative}.arrow0.svelte-7x7u86{top:-0.75rem;animation-name:svelte-7x7u86-up0}.arrow1.svelte-7x7u86{animation-name:svelte-7x7u86-up1}.arrow2.svelte-7x7u86{top:0.75rem;animation-name:svelte-7x7u86-up2}.text.svelte-7x7u86{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;word-break:break-all;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}@keyframes svelte-7x7u86-up0{0%{opacity:0.8;transform:translate3d(0, 0, 0) scale(0.84)}33.33%,100%{opacity:0;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up1{0%{opacity:1;transform:translate3d(0, 0, 0) scale(1)}33.33%,100%{opacity:0.8;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up2{0%{opacity:0}33.33%,100%{opacity:1;transform:translate3d(0, -0.75rem, 0)}}.link.svelte-7x7u86{position:relative;width:1.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAkCAMAAAAgl+0yAAAAnFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+TINBkAAAAM3RSTlMAjLy6ILM2Fi+Zng3BrPvao4VC9ceneQfKkmNdV1AbEeLOsHA77ujUtn5JLnRraSUUjVLj/+RVAAABhElEQVRIx63V2W6CQBiGYUBUQGDYdwTZQZZa7v/eimik/ket/7yZ4yeTTCYf8+dOX8etxGVoxAvCVbguR3g0uRTMA0w4odGi+CbzFnGKosCqrmHc5rdEwzCwqtGFJlC7DqtOcTxANY67BHnVKOpVoEZRjFPdLgxbqIZhhFTjINChGgThF06NhpGd35OGMcCppyDPfajm+YhUR8cRoeo4+RGlJnnbalBt2x6nHh1dt4Gq6bqDU886y2ZQZVn9jFJ51vcbqPo+Up18UeSgKoo3nHqVJEkGqi1JPk49aLZmQdW2xXf1zP+vUFHsC1QVReK33xdk+w9SaqAq+732UvvdZ2UEqrud8lR5Wc4a7pO8GaoL9VBjy7rMlMosq1lV43LhZlrtF+yuJlbtEXpqXXP3NYwI8VJqakOIziw5aepV1FQuTdfhvlWVZdJCrao6MPe0spRpqV5ZFivqNqYpq3RQ2TST5/h4quoRCmwqq6rymol6plV53IZSomTKE/MroWfxDevL/wAEdPq1eGDh4AAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-size:contain;animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:1.2s;animation-name:svelte-7x7u86-left-right}@keyframes svelte-7x7u86-left-right{0%,100%{opacity:0.8;transform:translateX(-0.3125rem)}50%{opacity:1;transform:translateX(0)}}")}function create_if_block_1$3(_u){let Tu,Cu,Pu,Bu;return Tu=new Shadow({props:{visible:!0,outDelay:0,inDelay:0,width:1.4,left:13,bottom:"auto",blurRadius:50,spreadRadius:18}}),{c(){create_component(Tu.$$.fragment),Cu=space(),Pu=element("div"),attr$1(Pu,"class","link svelte-7x7u86")},m(Ru,Lu){mount_component(Tu,Ru,Lu),insert(Ru,Cu,Lu),insert(Ru,Pu,Lu),Bu=!0},i(Ru){Bu||(transition_in(Tu.$$.fragment,Ru),Bu=!0)},o(Ru){transition_out(Tu.$$.fragment,Ru),Bu=!1},d(Ru){destroy_component(Tu,Ru),Ru&&detach(Cu),Ru&&detach(Pu)}}}function create_if_block$4(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du;return Tu=new Shadow({props:{visible:!0,outDelay:0,inDelay:0,height:1.2,left:13,bottom:12,blurRadius:50,spreadRadius:18}}),{c(){create_component(Tu.$$.fragment),Cu=space(),Pu=element("div"),Bu=space(),Ru=element("div"),Lu=space(),Ou=element("div"),attr$1(Pu,"class","arrow0 svelte-7x7u86"),attr$1(Ru,"class","arrow1 svelte-7x7u86"),attr$1(Ou,"class","arrow2 svelte-7x7u86")},m($u,ku){mount_component(Tu,$u,ku),insert($u,Cu,ku),insert($u,Pu,ku),insert($u,Bu,ku),insert($u,Ru,ku),insert($u,Lu,ku),insert($u,Ou,ku),Du=!0},i($u){Du||(transition_in(Tu.$$.fragment,$u),Du=!0)},o($u){transition_out(Tu.$$.fragment,$u),Du=!1},d($u){destroy_component(Tu,$u),$u&&detach(Cu),$u&&detach(Pu),$u&&detach(Bu),$u&&detach(Ru),$u&&detach(Lu),$u&&detach(Ou)}}}function create_fragment$7(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u,ku=_u[0].text+"",Fu,Nu;const Vu=[create_if_block$4,create_if_block_1$3],Gu=[];function Hu(ju,Uu){return ju[0].linkType===LinkType.VrLink?0:ju[0].linkType===LinkType.NormalLink?1:-1}return~(Pu=Hu(_u))&&(Bu=Gu[Pu]=Vu[Pu](_u)),Ou=new Shadow({props:{visible:!0,outDelay:0,inDelay:0,left:"auto",bottom:"auto",width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){Tu=element("div"),Cu=element("div"),Bu&&Bu.c(),Ru=space(),Lu=element("div"),create_component(Ou.$$.fragment),Du=space(),$u=element("div"),Fu=text$1(ku),attr$1(Cu,"class","icon svelte-7x7u86"),attr$1($u,"class","text svelte-7x7u86"),attr$1(Lu,"class","text-wrapper svelte-7x7u86"),attr$1(Tu,"class","wrapper svelte-7x7u86")},m(ju,Uu){insert(ju,Tu,Uu),append$1(Tu,Cu),~Pu&&Gu[Pu].m(Cu,null),append$1(Tu,Ru),append$1(Tu,Lu),mount_component(Ou,Lu,null),append$1(Lu,Du),append$1(Lu,$u),append$1($u,Fu),Nu=!0},p(ju,[Uu]){let zu=Pu;Pu=Hu(ju),Pu!==zu&&(Bu&&(group_outros(),transition_out(Gu[zu],1,1,()=>{Gu[zu]=null}),check_outros()),~Pu?(Bu=Gu[Pu],Bu||(Bu=Gu[Pu]=Vu[Pu](ju),Bu.c()),transition_in(Bu,1),Bu.m(Cu,null)):Bu=null),(!Nu||Uu&1)&&ku!==(ku=ju[0].text+"")&&set_data(Fu,ku)},i(ju){Nu||(transition_in(Bu),transition_in(Ou.$$.fragment,ju),Nu=!0)},o(ju){transition_out(Bu),transition_out(Ou.$$.fragment,ju),Nu=!1},d(ju){ju&&detach(Tu),~Pu&&Gu[Pu].d(),destroy_component(Ou)}}}function instance$7(_u,Tu,Cu){let Pu,{tag:Bu}=Tu;return _u.$$set=Ru=>{"tag"in Ru&&Cu(1,Bu=Ru.tag)},_u.$$.update=()=>{_u.$$.dirty&2&&Cu(0,Pu=Bu.data)},[Pu,Bu]}class LinkTag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$7,create_fragment$7,safe_not_equal,{tag:1},add_css$7)}}function add_css$6(_u){append_styles(_u,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function create_if_block$3(_u){let Tu,Cu=_u[0].element+"",Pu;return{c(){Tu=new HtmlTag(!1),Pu=empty(),Tu.a=Pu},m(Bu,Ru){Tu.m(Cu,Bu,Ru),insert(Bu,Pu,Ru)},p(Bu,Ru){Ru&1&&Cu!==(Cu=Bu[0].element+"")&&Tu.p(Cu)},d(Bu){Bu&&detach(Pu),Bu&&Tu.d()}}}function create_fragment$6(_u){let Tu,Cu=typeof _u[0].element=="string"&&create_if_block$3(_u);return{c(){Tu=element("div"),Cu&&Cu.c(),attr$1(Tu,"class","customElement__container svelte-kzl2aj")},m(Pu,Bu){insert(Pu,Tu,Bu),Cu&&Cu.m(Tu,null),_u[2](Tu)},p(Pu,[Bu]){typeof Pu[0].element=="string"?Cu?Cu.p(Pu,Bu):(Cu=create_if_block$3(Pu),Cu.c(),Cu.m(Tu,null)):Cu&&(Cu.d(1),Cu=null)},i:noop,o:noop,d(Pu){Pu&&detach(Tu),Cu&&Cu.d(),_u[2](null)}}}function instance$6(_u,Tu,Cu){let{tag:Pu}=Tu,Bu,Ru;onMount(()=>{if(Bu)if(Pu.element instanceof Element){const Ou=Pu.element;Bu.appendChild(Ou),Ru=()=>Bu==null?void 0:Bu.removeChild(Ou)}else typeof Pu.element=="function"&&(Ru=Pu.element(Bu))}),onDestroy(()=>{Ru==null||Ru()});function Lu(Ou){binding_callbacks[Ou?"unshift":"push"](()=>{Bu=Ou,Cu(1,Bu)})}return _u.$$set=Ou=>{"tag"in Ou&&Cu(0,Pu=Ou.tag)},[Pu,Bu,Lu]}class CustomTag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$6,create_fragment$6,safe_not_equal,{tag:0},add_css$6)}}function add_css$5(_u){append_styles(_u,"svelte-6jfp1v",`@font-face{font-family:'TG-TYPE';font-style:normal;font-weight:400;src:local('TG-TYPE-Bold'),
      url(data:application/font-woff2;charset=utf-8;base64,T1RUTwAKAIAAAwAgQ0ZGINFD4CEAAAaQAAAHC0dTVUIAAQAAAAANnAAAAApPUy8yaB5pEwAAAjQAAABgY21hcEItjGUAAAT0AAABfGhlYWQS1WWOAAAAtAAAADZoaGVhBfMBxwAAAhAAAAAkaG10eJ9gBO8AAADsAAABJG1heHAASVAAAAAArAAAAAZuYW1lqczkZQAAApQAAAJecG9zdP+4ADIAAAZwAAAAIAAAUAAASQAAAAEAAAABAADkeHeyXw889QADA+gAAAAA2NoRKwAAAADY2hErACn/OAHgAyAAAQADAAIAAAAAAAAB9ABdAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACCAA7AcwAdwIIADMCCAA0AhwAMwISADkCCAAuAfQANAH+ACsB/gApAggANAEeAFABHgBQAR4AUAIIADQCCAAuAR4AUAEeAFABfAAxAAEAAAPo/zgAAAIcACkAKQHgAAEAAAAAAAAAAAAAAAAAAABJAAMCLgGQAAUACAKKAlgAAABLAooCWAAAAV4AMgEsAAAAAAgAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFVLV04AIAAg/xsDIP84AMgD6ADIAAAAAQAAAAAB9AK8AAAAIAAAAAAAEADGAAEAAAAAAAEADAAAAAEAAAAAAAIABAAMAAEAAAAAAAMAGwAQAAEAAAAAAAQAEQArAAEAAAAAAAUAPAA8AAEAAAAAAAYAEAB4AAEAAAAAAAgADAAAAAEAAAAAAAkADAAAAAMAAQQJAAEAGACIAAMAAQQJAAIACACgAAMAAQQJAAMANgCoAAMAAQQJAAQAIgDeAAMAAQQJAAUAeAEAAAMAAQQJAAYAIAF4AAMAAQQJAAgAGACIAAMAAQQJAAkAGACIQUxJQkFCQSBGb250Qm9sZDEuMDAwO1VLV047QUxJQkFCQUZvbnQtQm9sZEFMSUJBQkEgRm9udCBCb2xkVmVyc2lvbiAxLjAwMDtQUyAwMDEuMDAwO2hvdGNvbnYgMS4wLjg4O21ha2VvdGYubGliMi41LjY0Nzc1QUxJQkFCQUZvbnQtQm9sZABBAEwASQBCAEEAQgBBACAARgBvAG4AdABCAG8AbABkADEALgAwADAAMAA7AFUASwBXAE4AOwBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAEEATABJAEIAQQBCAEEAIABGAG8AbgB0ACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMAAwADEALgAwADAAMAA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANAA3ADcANQBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAAAAAAADAAAAAwAAASIAAQAAAAAAHAADAAEAAAEiAAABBgAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABCSEMANjc4OTo7PD0+PwAAAAAAAAACAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGwAAAAAAABwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFoAAAAQABAAAwAAACAALgA5AFoAegCl/xv//wAAACAALAAwAEEAYQCl/xr////hAAAABv/B/7v/nwAAAAEAAAAOAAAAAAAAAAAACgAAAEIASABDAEYARwADAAAAAAAA/7UAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAgABAQERQUxJQkFCQUZvbnQtQm9sZAABAQEg+A8A+CAB+CEC+BgEtPtc+HT5tAX3KA/3UBGcHAZWEgAHAQENExoiKTpLbmluZS4wMDEuMDAxbW9uZXkudW5pRkYxQm5pbmUuMDAxdW5pRkYxQWNvcHlyaWdodCBtaXNzaW5nQUxJQkFCQSBGb250IEJvbGQAAAEAAQAAIhkAQhkAEQkBhwABigAADQAADwAAZAABiAABiwABiQAADgAASQIAAQCtAK4ArwCwALEAsgCzALQAtQC2ALcAuAC5ALoAuwC8AL0AvgC/AMAAwQDCAMMAxADFAMYAxwDIAMkAygDLAMwAzQDOAM8A0ADRANIA0wDUANUA1gDXANgA2QDaANsA3ADdAN4A3wDgAOEA4gFDAVoBqwIsAloCuAMcAzkDzwQ4BDoEPARRBFMEVQTNBOIE8QUEmPtc0Ky6rKKsuqzHrKPDoa2irLCspq2vraWssKzOAejVrKytrKzYA/gu+bQV+9H+fPfRBj76ORVqSWbNavs6rM2wSqwH7vsVFUXNafs68wfNaRVqZ6wG704VaklFJ6zNsEmsB/c6TxUn+zqt9xnNB6z7DhX7Bfs69wWsO++6anRpwwfv+0EV+wX7OvcFB/cZahUnXO8GrFMVamsHRVwF8Wr7OqwG0boFRawGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OrIr5UQH3OPdUA/ebihVmaZSdbB9Mr2TL0xr3vgewlK2eqh7Kr86y1BuvrIJ5qh/HZrJIQhr7vgdngmp5bR5OZ0tkQxv46ARUX2FSH/u+B1a5YMDAs7TCHve+B8RjtVYeDnD4utkB93HzA/cL+QgVPfH8vPP5UgcOrIn5UgG++DYD+GmJFfw28wb3svfUBZ2glKSnGsNduFBWXF1UiB4ijgaMsJWsnqoIyLHMstYbsa6Ceawfy2ezSUAaVndXZ2Me+2/7jQX3pwYOrIvy92Tz90ryEr/zM/L3SvMu8hPy+B/3/xUT7LCwpMDDGq6CrHqoHsZnTK5DG2lrg3puH09pZk5EGobykAe4tba6vrViXFZiYlcedyOfBhPyxLpdUlJcW1JSXLvEH5ojfAdllGiebB5LsM5j1xuwrpSeqx/KsLPO1xrKcMNerx4OwPL1Affi8gP4dPdlFWD4fPshBvuJ/HkF+wH3ryPy87YH+8z1Ffc69+QF++QHDrb3ZNf3ZfAB9zX3YwP3nRZlaJSebB9LsGPO1xrzBlK6XMTEubrEHtcHxF26UlJcXFIeI/g0+BYh+677JAaorK2ZsBuwroJ4qx/LZrNHPxo/B2aCaHhrHktmR2NAGw6si/X3b/IBufX3b/ID95n4QBWAg4uKhh/3EfelBfsHBvtK/CMFfnCFbm0aZJVnnmoeSrLPYdobsq6Vnqwfy7K10dgasoGueKwey2RHtT4b+9YETlu7yMe8vcfHvVlPT1laTx8OmIr5UQG/+B8D93iKFfsIBvdo+OYF+6T2+B8oBg6iifL3bPX3QPEStvNB8vc/8jXxE/L4EvgHFRPss7Cnu78arYOreqgexWpNr0YbaWyDem4fUmlmTUcaXqBftGAeE/JWYmROSxpklWieax5Ksc9i2BuxrpWerB/LsbTP2BrHaMVath4T7PsN93QVu7FjXFtlZltcZbC7urGzuh8T8oX8ghVPW7zHx7q6yMa9W1BPWVpQHw6i96Tz92/0AbTz93DzA/hp+HkVsIGveKwezmNFtUAbZGeBeGofSmNiRT8aZJVnnmseSrHPYtoboAb7EvukBfcHBvdL+CEFmaySqaQa+9gWxry+yJ6dhoGcHq12oWZmGk5YW1BMXLnKHg4gCiEK+11L91IlCvdiyhWtb6hpJgoeJAoOIQogCqz3pe/3b/UBufX3bfQD+G74dxWyga94rB7NZEW0PhtlaIF4ah9KY2FFPxo7tkTPZh6MjIqKjB+TiJCIjYoIjgaCoKGHoRuanY6QoB+IgfsB+6QF9wcG9y/4IgWYppGnqhr7a/sCFVBbvMjHu7zGyLxbTk5aWk4fDvtd+AojCoz7jBUmCh8kCq1vqGkeDvtdi/cS94wjCvwKBCIKDiD3ru8BvPeuA7z4EhUn967vBw4eoDf/DAmLDAv47BT4exWcEwAHAQFBXW97ipCarPcv8+7yAfdl8gP4aPf6FfIjB+r3gwUiBi77gwWHBjH3gwUkBuP7gwUnJPcxKPsxI/cx+y/y9y/3MPP7MO4GDvtdi/cSJQr3JBZkcqOzsKSksrCkcWdlcnFmHw6up6eurm+naGhvb2hop2+uHwv3EiUK9yP4ChUiCgt3SgWxBrnmBZGVj5eZGgsB2/cSAwtobm5paqBzqoYLAAABAAAAAAAAAAAAAA==)
        format('woff2')}.content__container.svelte-6jfp1v{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif}.content__container.unClickable.svelte-6jfp1v{pointer-events:none !important}.content__container.unClickable.svelte-6jfp1v *{pointer-events:none !important}*{-webkit-tap-highlight-color:transparent}.content__wrapper.svelte-6jfp1v{pointer-events:none;width:100%;height:100%}.withAnimation.svelte-6jfp1v{transition:opacity 0.3s linear}.content__container.hide.svelte-6jfp1v{opacity:0;pointer-events:none}.content__container.disable.svelte-6jfp1v{display:none}.content__container.hide.svelte-6jfp1v *{pointer-events:none}.content.svelte-6jfp1v{position:relative;width:100%;height:100%;font-size:0.75rem;line-height:1.125rem;color:#fff}.content.svelte-6jfp1v:not(.unfolded){pointer-events:none}.content.svelte-6jfp1v:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-6jfp1v{pointer-events:auto}`)}function create_if_block_6(_u){let Tu,Cu;return Tu=new MediaPlane({props:{tag:noTypecheck(_u[1])}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block_5(_u){let Tu,Cu;return Tu=new LinkTag({props:{tag:noTypecheck(_u[1])}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block_4(_u){let Tu,Cu;return Tu=new MarketingTag({props:{tag:noTypecheck(_u[1])}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block_3(_u){let Tu,Cu;return Tu=new AudioTag({props:{mediaStore:_u[4],tag:noTypecheck(_u[1])}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&16&&(Ru.mediaStore=Pu[4]),Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block_2$1(_u){let Tu,Cu;return Tu=new ImageTextTag({props:{tag:noTypecheck(_u[1])}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block_1$2(_u){let Tu,Cu;return Tu=new TextTag({props:{tag:noTypecheck(_u[1])}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block$2(_u){let Tu,Cu;return Tu=new CustomTag({props:{tag:noTypecheck(_u[1])}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_fragment$5(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou,Du,$u;const ku=[create_if_block$2,create_if_block_1$2,create_if_block_2$1,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6],Fu=[];function Nu(Vu,Gu){return Vu[1].element?0:Vu[1].contentType===ContentType.Text?1:Vu[1].contentType===ContentType.ImageText?2:Vu[1].contentType===ContentType.Audio?3:Vu[1].contentType===ContentType.Marketing?4:Vu[1].contentType===ContentType.Link?5:Vu[1].contentType===ContentType.MediaPlane?6:-1}return~(Bu=Nu(_u))&&(Ru=Fu[Bu]=ku[Bu](_u)),{c(){var Vu,Gu,Hu;Tu=element("div"),Cu=element("div"),Pu=element("div"),Ru&&Ru.c(),attr$1(Pu,"class","content svelte-6jfp1v"),toggle_class(Pu,"unfolded",(Vu=_u[1].state)==null?void 0:Vu.unfolded),attr$1(Cu,"class","content__wrapper svelte-6jfp1v"),attr$1(Tu,"class","content__container svelte-6jfp1v"),attr$1(Tu,"data-id",Lu=_u[1].id),toggle_class(Tu,"disable",_u[1].enabled===!1||((Gu=_u[1].temporaryState)==null?void 0:Gu.visible)===!1),toggle_class(Tu,"hide",!_u[3].visible||!_u[5].visible||!((Hu=_u[1].state)!=null&&Hu.visible)),toggle_class(Tu,"withAnimation",_u[0]),toggle_class(Tu,"unClickable",_u[1].clickable===!1),set_style(Tu,"width",_u[1].pointType==="PointTag"?0:"100%"),set_style(Tu,"height",_u[1].pointType==="PointTag"?0:"100%")},m(Vu,Gu){insert(Vu,Tu,Gu),append$1(Tu,Cu),append$1(Cu,Pu),~Bu&&Fu[Bu].m(Pu,null),Ou=!0,Du||($u=listen(Tu,"click",stop_propagation(_u[13])),Du=!0)},p(Vu,[Gu]){var ju,Uu,zu;let Hu=Bu;Bu=Nu(Vu),Bu===Hu?~Bu&&Fu[Bu].p(Vu,Gu):(Ru&&(group_outros(),transition_out(Fu[Hu],1,1,()=>{Fu[Hu]=null}),check_outros()),~Bu?(Ru=Fu[Bu],Ru?Ru.p(Vu,Gu):(Ru=Fu[Bu]=ku[Bu](Vu),Ru.c()),transition_in(Ru,1),Ru.m(Pu,null)):Ru=null),(!Ou||Gu&2)&&toggle_class(Pu,"unfolded",(ju=Vu[1].state)==null?void 0:ju.unfolded),(!Ou||Gu&2&&Lu!==(Lu=Vu[1].id))&&attr$1(Tu,"data-id",Lu),(!Ou||Gu&2)&&toggle_class(Tu,"disable",Vu[1].enabled===!1||((Uu=Vu[1].temporaryState)==null?void 0:Uu.visible)===!1),(!Ou||Gu&42)&&toggle_class(Tu,"hide",!Vu[3].visible||!Vu[5].visible||!((zu=Vu[1].state)!=null&&zu.visible)),(!Ou||Gu&1)&&toggle_class(Tu,"withAnimation",Vu[0]),(!Ou||Gu&2)&&toggle_class(Tu,"unClickable",Vu[1].clickable===!1),Gu&2&&set_style(Tu,"width",Vu[1].pointType==="PointTag"?0:"100%"),Gu&2&&set_style(Tu,"height",Vu[1].pointType==="PointTag"?0:"100%")},i(Vu){Ou||(transition_in(Ru),Ou=!0)},o(Vu){transition_out(Ru),Ou=!1},d(Vu){Vu&&detach(Tu),~Bu&&Fu[Bu].d(),Du=!1,$u()}}}function instance$5(_u,Tu,Cu){let Pu,Bu,Ru,Lu;var Ou,Du;let{withAnimation:$u=!1}=Tu,{tag:ku}=Tu,{hooks:Fu}=Tu,{state:Nu}=Tu,{mediaStore:Vu}=Tu,{temporaryState:Gu}=Tu;setContext("hooks",Fu);let Hu,ju;function Uu(Wu){Wu?Fu.emit("exposure",{id:Lu,type:"start"}):Fu.emit("exposure",{id:Lu,type:"end"})}const zu=Wu=>Fu.emit("click",{event:Wu,target:"TagContent",tag:ku});return _u.$$set=Wu=>{"withAnimation"in Wu&&Cu(0,$u=Wu.withAnimation),"tag"in Wu&&Cu(1,ku=Wu.tag),"hooks"in Wu&&Cu(2,Fu=Wu.hooks),"state"in Wu&&Cu(3,Nu=Wu.state),"mediaStore"in Wu&&Cu(4,Vu=Wu.mediaStore),"temporaryState"in Wu&&Cu(5,Gu=Wu.temporaryState)},_u.$$.update=()=>{_u.$$.dirty&66&&Cu(11,Pu=Cu(6,Ou=ku.state)===null||Ou===void 0?void 0:Ou.unfolded),_u.$$.dirty&130&&Cu(10,Bu=Cu(7,Du=ku.state)===null||Du===void 0?void 0:Du.visible),_u.$$.dirty&1064&&Cu(12,Ru=Nu.visible&&Gu.visible&&Bu),_u.$$.dirty&2&&(Lu=ku.id),_u.$$.dirty&4096&&Uu(Ru),_u.$$.dirty&3842&&ku.hooks&&(Pu!==void 0&&Pu!==ju&&(Cu(9,ju=Pu),Pu?ku.hooks.emit("unfolded"):ku.hooks.emit("folded")),Bu!==void 0&&Bu!==Hu&&(Cu(8,Hu=Bu),Bu?ku.hooks.emit("show"):ku.hooks.emit("hide")))},[$u,ku,Fu,Nu,Vu,Gu,Ou,Du,Hu,ju,Bu,Pu,Ru,zu]}class Tag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$5,create_fragment$5,safe_not_equal,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:4,temporaryState:5},add_css$5)}}function add_css$4(_u){append_styles(_u,"svelte-jtnm0",".point.svelte-jtnm0.svelte-jtnm0{width:1.5rem;height:1.5rem}.small-point.svelte-jtnm0.svelte-jtnm0,.big-point.svelte-jtnm0.svelte-jtnm0{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-jtnm0.svelte-jtnm0{background-color:rgba(0, 0, 0, 0.1)}.folded.point.svelte-jtnm0.svelte-jtnm0{animation:svelte-jtnm0-breathing 2s linear infinite}.big-point.svelte-jtnm0.svelte-jtnm0::before,.big-point.svelte-jtnm0.svelte-jtnm0::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-jtnm0.svelte-jtnm0::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=)}.folded.svelte-jtnm0 .big-point.svelte-jtnm0::before{animation:svelte-jtnm0-rotate 2s linear infinite}.big-point.svelte-jtnm0.svelte-jtnm0::after{position:absolute;width:1rem;height:1rem;background-image:var(--iconUrl)}.small-point.svelte-jtnm0.svelte-jtnm0::before{content:'';display:block;position:absolute;pointer-events:none;width:0.25rem;height:0.25rem;border-radius:100%;background-color:white}.folded.svelte-jtnm0 .big-point.svelte-jtnm0{opacity:1;scale:1}.unfolded.svelte-jtnm0 .big-point.svelte-jtnm0{opacity:0;scale:0}.folded.svelte-jtnm0 .small-point.svelte-jtnm0{opacity:0;scale:6}.unfolded.svelte-jtnm0 .small-point.svelte-jtnm0{opacity:1;scale:1}@keyframes svelte-jtnm0-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes svelte-jtnm0-breathing{0%{transform:scale(1)}25%{transform:scale(0.9)}50%{transform:scale(1)}}")}function create_fragment$4(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou;return Cu=new Shadow({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),Pu=space(),Bu=element("div"),Ru=space(),Lu=element("div"),attr$1(Bu,"class","small-point svelte-jtnm0"),set_style(Bu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),attr$1(Lu,"class","big-point svelte-jtnm0"),set_style(Lu,"--iconUrl","url("+_u[1]+")"),set_style(Lu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),attr$1(Tu,"class","point svelte-jtnm0"),toggle_class(Tu,"folded",_u[3]),toggle_class(Tu,"unfolded",_u[0])},m(Du,$u){insert(Du,Tu,$u),mount_component(Cu,Tu,null),append$1(Tu,Pu),append$1(Tu,Bu),append$1(Tu,Ru),append$1(Tu,Lu),Ou=!0},p(Du,[$u]){$u&12&&set_style(Bu,"transition-delay",Du[3]?Du[2]+"ms":"0ms"),(!Ou||$u&2)&&set_style(Lu,"--iconUrl","url("+Du[1]+")"),$u&12&&set_style(Lu,"transition-delay",Du[3]?Du[2]+"ms":"0ms"),(!Ou||$u&8)&&toggle_class(Tu,"folded",Du[3]),(!Ou||$u&1)&&toggle_class(Tu,"unfolded",Du[0])},i(Du){Ou||(transition_in(Cu.$$.fragment,Du),Ou=!0)},o(Du){transition_out(Cu.$$.fragment,Du),Ou=!1},d(Du){Du&&detach(Tu),destroy_component(Cu)}}}function instance$4(_u,Tu,Cu){let Pu,{unfolded:Bu}=Tu,{iconUrl:Ru}=Tu,{foldDelay:Lu=800}=Tu;return _u.$$set=Ou=>{"unfolded"in Ou&&Cu(0,Bu=Ou.unfolded),"iconUrl"in Ou&&Cu(1,Ru=Ou.iconUrl),"foldDelay"in Ou&&Cu(2,Lu=Ou.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Cu(3,Pu=!Bu)},[Bu,Ru,Lu,Pu]}class CustomPoint extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$4,create_fragment$4,safe_not_equal,{unfolded:0,iconUrl:1,foldDelay:2},add_css$4)}}function add_css$3(_u){append_styles(_u,"svelte-1rg9uk",".point.svelte-1rg9uk.svelte-1rg9uk{width:1rem;height:1rem}.small-point.svelte-1rg9uk.svelte-1rg9uk,.big-point.svelte-1rg9uk.svelte-1rg9uk{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-1rg9uk.svelte-1rg9uk::before,.big-point.svelte-1rg9uk.svelte-1rg9uk::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-1rg9uk.svelte-1rg9uk::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=);background-size:contain;background-repeat:no-repeat}.small-point.svelte-1rg9uk.svelte-1rg9uk::before{content:'';display:block;position:absolute;pointer-events:none;width:0.375rem;height:0.375rem;border-radius:100%;background-color:white}.unfolded.svelte-1rg9uk .big-point.svelte-1rg9uk{opacity:0;transform:scale(0)}.folded.svelte-1rg9uk .big-point.svelte-1rg9uk{opacity:1;transform:scale(1)}.unfolded.svelte-1rg9uk .small-point.svelte-1rg9uk{transform:scale(0.6)}.folded.svelte-1rg9uk .small-point.svelte-1rg9uk{transform:scale(1)}")}function create_fragment$3(_u){let Tu,Cu,Pu,Bu,Ru,Lu,Ou;return Cu=new Shadow({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),Pu=space(),Bu=element("div"),Ru=space(),Lu=element("div"),attr$1(Bu,"class","small-point svelte-1rg9uk"),set_style(Bu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),attr$1(Lu,"class","big-point svelte-1rg9uk"),set_style(Lu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),attr$1(Tu,"class","point svelte-1rg9uk"),toggle_class(Tu,"unfolded",_u[0]),toggle_class(Tu,"folded",_u[2])},m(Du,$u){insert(Du,Tu,$u),mount_component(Cu,Tu,null),append$1(Tu,Pu),append$1(Tu,Bu),append$1(Tu,Ru),append$1(Tu,Lu),Ou=!0},p(Du,[$u]){$u&6&&set_style(Bu,"transition-delay",Du[2]?Du[1]+"ms":"0ms"),$u&6&&set_style(Lu,"transition-delay",Du[2]?Du[1]+"ms":"0ms"),(!Ou||$u&1)&&toggle_class(Tu,"unfolded",Du[0]),(!Ou||$u&4)&&toggle_class(Tu,"folded",Du[2])},i(Du){Ou||(transition_in(Cu.$$.fragment,Du),Ou=!0)},o(Du){transition_out(Cu.$$.fragment,Du),Ou=!1},d(Du){Du&&detach(Tu),destroy_component(Cu)}}}function instance$3(_u,Tu,Cu){let Pu,{unfolded:Bu}=Tu,{foldDelay:Ru=800}=Tu;return _u.$$set=Lu=>{"unfolded"in Lu&&Cu(0,Bu=Lu.unfolded),"foldDelay"in Lu&&Cu(1,Ru=Lu.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Cu(2,Pu=!Bu)},[Bu,Ru,Pu]}class DefaultPoint extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$3,create_fragment$3,safe_not_equal,{unfolded:0,foldDelay:1},add_css$3)}}function add_css$2(_u){append_styles(_u,"svelte-r4i9gl",".point-click-helper.svelte-r4i9gl{width:2.5rem;height:2.5rem;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}")}function create_if_block$1(_u){let Tu,Cu,Pu=_u[0].contentType!==ContentType.Link&&create_if_block_1$1(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Bu,Ru){Pu&&Pu.m(Bu,Ru),insert(Bu,Tu,Ru),Cu=!0},p(Bu,Ru){Bu[0].contentType!==ContentType.Link?Pu?(Pu.p(Bu,Ru),Ru&1&&transition_in(Pu,1)):(Pu=create_if_block_1$1(Bu),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Bu){Cu||(transition_in(Pu),Cu=!0)},o(Bu){transition_out(Pu),Cu=!1},d(Bu){Pu&&Pu.d(Bu),Bu&&detach(Tu)}}}function create_if_block_1$1(_u){let Tu,Cu,Pu,Bu,Ru,Lu;const Ou=[create_if_block_2,create_else_block],Du=[];function $u(ku,Fu){var Nu,Vu,Gu,Hu;return((Vu=(Nu=ku[0].style)==null?void 0:Nu.point)==null?void 0:Vu.style)==="CustomIcon"&&((Hu=(Gu=ku[0].style)==null?void 0:Gu.point)==null?void 0:Hu.iconUrl)?0:1}return Pu=$u(_u),Bu=Du[Pu]=Ou[Pu](_u),{c(){Tu=element("div"),Cu=space(),Bu.c(),Ru=empty(),attr$1(Tu,"class","point-click-helper svelte-r4i9gl")},m(ku,Fu){insert(ku,Tu,Fu),insert(ku,Cu,Fu),Du[Pu].m(ku,Fu),insert(ku,Ru,Fu),Lu=!0},p(ku,Fu){let Nu=Pu;Pu=$u(ku),Pu===Nu?Du[Pu].p(ku,Fu):(group_outros(),transition_out(Du[Nu],1,1,()=>{Du[Nu]=null}),check_outros(),Bu=Du[Pu],Bu?Bu.p(ku,Fu):(Bu=Du[Pu]=Ou[Pu](ku),Bu.c()),transition_in(Bu,1),Bu.m(Ru.parentNode,Ru))},i(ku){Lu||(transition_in(Bu),Lu=!0)},o(ku){transition_out(Bu),Lu=!1},d(ku){ku&&detach(Tu),ku&&detach(Cu),Du[Pu].d(ku),ku&&detach(Ru)}}}function create_else_block(_u){let Tu,Cu;return Tu=new DefaultPoint({props:{unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&1&&(Ru.unfolded=Pu[0].state.unfolded),Bu&2&&(Ru.foldDelay=Pu[1]),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block_2(_u){let Tu,Cu;return Tu=new CustomPoint({props:{iconUrl:_u[0].style.point.iconUrl,unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&1&&(Ru.iconUrl=Pu[0].style.point.iconUrl),Bu&1&&(Ru.unfolded=Pu[0].state.unfolded),Bu&2&&(Ru.foldDelay=Pu[1]),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_fragment$2(_u){var Bu,Ru,Lu;let Tu,Cu,Pu=((Bu=_u[0].pointTagStyle)==null?void 0:Bu.leftPercent)&&((Ru=_u[0].pointTagStyle)==null?void 0:Ru.topPercent)&&_u[0].enabled!==!1&&_u[0].state&&((Lu=_u[0].temporaryState)==null?void 0:Lu.visible)!==!1&&create_if_block$1(_u);return{c(){Pu&&Pu.c(),Tu=empty()},m(Ou,Du){Pu&&Pu.m(Ou,Du),insert(Ou,Tu,Du),Cu=!0},p(Ou,[Du]){var $u,ku,Fu;(($u=Ou[0].pointTagStyle)==null?void 0:$u.leftPercent)&&((ku=Ou[0].pointTagStyle)==null?void 0:ku.topPercent)&&Ou[0].enabled!==!1&&Ou[0].state&&((Fu=Ou[0].temporaryState)==null?void 0:Fu.visible)!==!1?Pu?(Pu.p(Ou,Du),Du&1&&transition_in(Pu,1)):(Pu=create_if_block$1(Ou),Pu.c(),transition_in(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(group_outros(),transition_out(Pu,1,1,()=>{Pu=null}),check_outros())},i(Ou){Cu||(transition_in(Pu),Cu=!0)},o(Ou){transition_out(Pu),Cu=!1},d(Ou){Pu&&Pu.d(Ou),Ou&&detach(Tu)}}}function instance$2(_u,Tu,Cu){let Pu;var Bu;let{tag:Ru}=Tu;return _u.$$set=Lu=>{"tag"in Lu&&Cu(0,Ru=Lu.tag)},_u.$$.update=()=>{_u.$$.dirty&5&&Cu(1,Pu=nullishCoalescing(Cu(2,Bu=Ru.style)===null||Bu===void 0?void 0:Bu.foldedPointDelay,Ru.contentType===ContentType.Marketing?600:void 0))},[Ru,Pu,Bu]}class PointSwitch extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$2,create_fragment$2,safe_not_equal,{tag:0},add_css$2)}}function add_css$1(_u){append_styles(_u,"svelte-1vzhbu2",".wrapper.svelte-1vzhbu2{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto}.point.svelte-1vzhbu2{-webkit-tap-highlight-color:transparent;position:absolute;transform:translate(-50%, -50%);left:50%;top:50%}")}function create_if_block_1(_u){let Tu,Cu;return Tu=new Tag({props:{mediaStore:_u[4],withAnimation:_u[0],tag:noTypecheck(_u[1]),hooks:_u[2],state:_u[3],temporaryState:_u[5]}}),{c(){create_component(Tu.$$.fragment)},m(Pu,Bu){mount_component(Tu,Pu,Bu),Cu=!0},p(Pu,Bu){const Ru={};Bu&16&&(Ru.mediaStore=Pu[4]),Bu&1&&(Ru.withAnimation=Pu[0]),Bu&2&&(Ru.tag=noTypecheck(Pu[1])),Bu&4&&(Ru.hooks=Pu[2]),Bu&8&&(Ru.state=Pu[3]),Bu&32&&(Ru.temporaryState=Pu[5]),Tu.$set(Ru)},i(Pu){Cu||(transition_in(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){transition_out(Tu.$$.fragment,Pu),Cu=!1},d(Pu){destroy_component(Tu,Pu)}}}function create_if_block(_u){let Tu,Cu,Pu,Bu,Ru;return Cu=new PointSwitch({props:{tag:_u[1]}}),{c(){Tu=element("div"),create_component(Cu.$$.fragment),attr$1(Tu,"class","point svelte-1vzhbu2")},m(Lu,Ou){insert(Lu,Tu,Ou),mount_component(Cu,Tu,null),Pu=!0,Bu||(Ru=listen(Tu,"click",stop_propagation(_u[11])),Bu=!0)},p(Lu,Ou){const Du={};Ou&2&&(Du.tag=Lu[1]),Cu.$set(Du)},i(Lu){Pu||(transition_in(Cu.$$.fragment,Lu),Pu=!0)},o(Lu){transition_out(Cu.$$.fragment,Lu),Pu=!1},d(Lu){Lu&&detach(Tu),destroy_component(Cu),Bu=!1,Ru()}}}function create_fragment$1(_u){var Ou,Du;let Tu,Cu,Pu,Bu,Ru=_u[1].dimensionType===DimensionType.Two&&create_if_block_1(_u),Lu=_u[1].pointType===PointType.PointTag&&((Du=(Ou=_u[1].style)==null?void 0:Ou.point)==null?void 0:Du.style)!=="noPoint"&&create_if_block(_u);return{c(){Tu=element("div"),Ru&&Ru.c(),Cu=space(),Lu&&Lu.c(),attr$1(Tu,"class","wrapper svelte-1vzhbu2"),attr$1(Tu,"data-id",Pu=_u[1].id),toggle_class(Tu,"hide",_u[10]),toggle_class(Tu,"unfolded",_u[6]),set_style(Tu,"left",_u[9]),set_style(Tu,"top",_u[8]),set_style(Tu,"z-index",_u[7])},m($u,ku){insert($u,Tu,ku),Ru&&Ru.m(Tu,null),append$1(Tu,Cu),Lu&&Lu.m(Tu,null),Bu=!0},p($u,[ku]){var Fu,Nu;$u[1].dimensionType===DimensionType.Two?Ru?(Ru.p($u,ku),ku&2&&transition_in(Ru,1)):(Ru=create_if_block_1($u),Ru.c(),transition_in(Ru,1),Ru.m(Tu,Cu)):Ru&&(group_outros(),transition_out(Ru,1,1,()=>{Ru=null}),check_outros()),$u[1].pointType===PointType.PointTag&&((Nu=(Fu=$u[1].style)==null?void 0:Fu.point)==null?void 0:Nu.style)!=="noPoint"?Lu?(Lu.p($u,ku),ku&2&&transition_in(Lu,1)):(Lu=create_if_block($u),Lu.c(),transition_in(Lu,1),Lu.m(Tu,null)):Lu&&(group_outros(),transition_out(Lu,1,1,()=>{Lu=null}),check_outros()),(!Bu||ku&2&&Pu!==(Pu=$u[1].id))&&attr$1(Tu,"data-id",Pu),(!Bu||ku&1024)&&toggle_class(Tu,"hide",$u[10]),(!Bu||ku&64)&&toggle_class(Tu,"unfolded",$u[6]),ku&512&&set_style(Tu,"left",$u[9]),ku&256&&set_style(Tu,"top",$u[8]),ku&128&&set_style(Tu,"z-index",$u[7])},i($u){Bu||(transition_in(Ru),transition_in(Lu),Bu=!0)},o($u){transition_out(Ru),transition_out(Lu),Bu=!1},d($u){$u&&detach(Tu),Ru&&Ru.d(),Lu&&Lu.d()}}}function instance$1(_u,Tu,Cu){let Pu,Bu,Ru,Lu,Ou,Du;var $u,ku,Fu,Nu,Vu;let{withAnimation:Gu=!1}=Tu,{tag:Hu}=Tu,{hooks:ju}=Tu,{state:Uu}=Tu,{mediaStore:zu}=Tu,{temporaryState:Wu}=Tu,Qu,qu=!1;function Yu(_h){Qu!==void 0&&clearTimeout(Qu),qu=!0,Qu=setTimeout(()=>{qu=!1},800)}const Xc=_h=>{qu||ju.emit("click",{event:_h,target:"TagPoint",tag:Hu})};return _u.$$set=_h=>{"withAnimation"in _h&&Cu(0,Gu=_h.withAnimation),"tag"in _h&&Cu(1,Hu=_h.tag),"hooks"in _h&&Cu(2,ju=_h.hooks),"state"in _h&&Cu(3,Uu=_h.state),"mediaStore"in _h&&Cu(4,zu=_h.mediaStore),"temporaryState"in _h&&Cu(5,Wu=_h.temporaryState)},_u.$$.update=()=>{_u.$$.dirty&4098&&Cu(17,Pu=Cu(12,$u=Hu.state)===null||$u===void 0?void 0:$u.visible),_u.$$.dirty&131072&&Cu(10,Bu=!Pu),_u.$$.dirty&8194&&Cu(6,Ru=Cu(13,ku=Hu.state)===null||ku===void 0?void 0:ku.unfolded),_u.$$.dirty&16386&&Cu(9,Lu=(Cu(14,Fu=Hu.pointTagStyle)===null||Fu===void 0?void 0:Fu.leftPercent)+"%"),_u.$$.dirty&32770&&Cu(8,Ou=(Cu(15,Nu=Hu.pointTagStyle)===null||Nu===void 0?void 0:Nu.topPercent)+"%"),_u.$$.dirty&65538&&Cu(7,Du=Hu.contentType===ContentType.Link?20:!(Cu(16,Vu=Hu.state)===null||Vu===void 0)&&Vu.unfolded?10:0),_u.$$.dirty&64&&Yu()},[Gu,Hu,ju,Uu,zu,Wu,Ru,Du,Ou,Lu,Bu,Xc,$u,ku,Fu,Nu,Vu,Pu]}class TagWrapper extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance$1,create_fragment$1,safe_not_equal,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:4,temporaryState:5},add_css$1)}}function add_css(_u){append_styles(_u,"svelte-1eci49s",".tag--container.svelte-1eci49s{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tag.hide.svelte-1eci49s{display:none}.withAnimation.svelte-1eci49s{transition:opacity 0.3s linear}.tag--container.hide.svelte-1eci49s{opacity:0;pointer-events:none}.tag--container.hide.svelte-1eci49s *{pointer-events:none}")}function get_each_context(_u,Tu,Cu){const Pu=_u.slice();return Pu[6]=Tu[Cu],Pu}function create_each_block(_u,Tu){let Cu,Pu,Bu,Ru;const Lu=[{tag:Tu[6],hooks:Tu[2],state:Tu[3],mediaStore:Tu[4],temporaryState:Tu[5],withAnimation:Tu[0]}];let Ou={};for(let Du=0;Du<Lu.length;Du+=1)Ou=assign(Ou,Lu[Du]);return Pu=new TagWrapper({props:Ou}),{key:_u,first:null,c(){var Du,$u,ku;Cu=element("div"),create_component(Pu.$$.fragment),Bu=space(),attr$1(Cu,"class","tag svelte-1eci49s"),toggle_class(Cu,"hide",!((Du=Tu[6].pointTagStyle)!=null&&Du.leftPercent)||!(($u=Tu[6].pointTagStyle)!=null&&$u.topPercent)||Tu[6].enabled===!1||!Tu[6].state||((ku=Tu[6].temporaryState)==null?void 0:ku.visible)===!1),this.first=Cu},m(Du,$u){insert(Du,Cu,$u),mount_component(Pu,Cu,null),append$1(Cu,Bu),Ru=!0},p(Du,$u){var Fu,Nu,Vu;Tu=Du;const ku=$u&63?get_spread_update(Lu,[{tag:Tu[6],hooks:Tu[2],state:Tu[3],mediaStore:Tu[4],temporaryState:Tu[5],withAnimation:Tu[0]}]):{};Pu.$set(ku),(!Ru||$u&2)&&toggle_class(Cu,"hide",!((Fu=Tu[6].pointTagStyle)!=null&&Fu.leftPercent)||!((Nu=Tu[6].pointTagStyle)!=null&&Nu.topPercent)||Tu[6].enabled===!1||!Tu[6].state||((Vu=Tu[6].temporaryState)==null?void 0:Vu.visible)===!1)},i(Du){Ru||(transition_in(Pu.$$.fragment,Du),Ru=!0)},o(Du){transition_out(Pu.$$.fragment,Du),Ru=!1},d(Du){Du&&detach(Cu),destroy_component(Pu)}}}function create_fragment(_u){let Tu,Cu=[],Pu=new Map,Bu,Ru=_u[1];const Lu=Ou=>Ou[6].id;for(let Ou=0;Ou<Ru.length;Ou+=1){let Du=get_each_context(_u,Ru,Ou),$u=Lu(Du);Pu.set($u,Cu[Ou]=create_each_block($u,Du))}return{c(){Tu=element("div");for(let Ou=0;Ou<Cu.length;Ou+=1)Cu[Ou].c();attr$1(Tu,"class","tag--container svelte-1eci49s"),toggle_class(Tu,"hide",!_u[3].visible||!_u[5].visible),toggle_class(Tu,"withAnimation",_u[0])},m(Ou,Du){insert(Ou,Tu,Du);for(let $u=0;$u<Cu.length;$u+=1)Cu[$u].m(Tu,null);Bu=!0},p(Ou,[Du]){Du&63&&(Ru=Ou[1],group_outros(),Cu=update_keyed_each(Cu,Du,Lu,1,Ou,Ru,Pu,Tu,outro_and_destroy_block,create_each_block,null,get_each_context),check_outros()),(!Bu||Du&40)&&toggle_class(Tu,"hide",!Ou[3].visible||!Ou[5].visible),(!Bu||Du&1)&&toggle_class(Tu,"withAnimation",Ou[0])},i(Ou){if(!Bu){for(let Du=0;Du<Ru.length;Du+=1)transition_in(Cu[Du]);Bu=!0}},o(Ou){for(let Du=0;Du<Cu.length;Du+=1)transition_out(Cu[Du]);Bu=!1},d(Ou){Ou&&detach(Tu);for(let Du=0;Du<Cu.length;Du+=1)Cu[Du].d()}}}function instance(_u,Tu,Cu){let{withAnimation:Pu=!1}=Tu,{tags:Bu=[]}=Tu,{hooks:Ru}=Tu,{state:Lu}=Tu,{mediaStore:Ou}=Tu,{temporaryState:Du}=Tu;return _u.$$set=$u=>{"withAnimation"in $u&&Cu(0,Pu=$u.withAnimation),"tags"in $u&&Cu(1,Bu=$u.tags),"hooks"in $u&&Cu(2,Ru=$u.hooks),"state"in $u&&Cu(3,Lu=$u.state),"mediaStore"in $u&&Cu(4,Ou=$u.mediaStore),"temporaryState"in $u&&Cu(5,Du=$u.temporaryState)},[Pu,Bu,Ru,Lu,Ou,Du]}class PointTag extends SvelteComponent{constructor(Tu){super(),init(this,Tu,instance,create_fragment,safe_not_equal,{withAnimation:0,tags:1,hooks:2,state:3,mediaStore:4,temporaryState:5},add_css)}}const DefaultConfig={globalConfig:{initialState:{},visibleConfig:{visibleDistance:{max:5},angleRange:{min:-45,max:45}},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"}},tag3DConfig:{ratio:.0035}},contentTypeConfig:{"Any-Link-Any":{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},"Any-Marketing-Any":{unfoldedConfig:void 0},"3D-MediaPlane-PlaneTag":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{angleRange:void 0,visibleDistance:void 0},clickable:!1}}};class TagCacheController extends Controller$7{constructor(Tu){super(Tu),Object.defineProperty(this,"tagCacheByPanoIndex",{enumerable:!0,configurable:!0,writable:!0,value:{}})}getCaches({panoIndex:Tu,id:Cu,key:Pu}){var Bu,Ru,Lu,Ou;const{five:Du}=this,$u=(Bu=Du.panoIndex)!==null&&Bu!==void 0?Bu:Tu;if($u===void 0)throw new Error(`TagCacheController getCache(): fivePanoIndex is ${$u}`);const ku=`${(Lu=(Ru=Du.work)===null||Ru===void 0?void 0:Ru.workCode)!==null&&Lu!==void 0?Lu:Du.model.uuid}-${$u}`;let Fu=this.tagCacheByPanoIndex[ku];if(Fu||(Fu=new Map,this.tagCacheByPanoIndex[ku]=Fu),Cu===void 0)return Fu;if(Pu===void 0){const Nu=Fu.get(Cu);return Nu||(Fu.set(Cu,{}),Fu.get(Cu))}return(Ou=Fu.get(Cu))===null||Ou===void 0?void 0:Ou[Pu]}clearCache(){this.tagCacheByPanoIndex={}}}class TagComputer extends TagCacheController{constructor(Tu){super(Tu),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:DefaultConfig}),Object.defineProperty(this,"raycaster",{enumerable:!0,configurable:!0,writable:!0,value:new Raycaster})}getTagById(Tu){const Cu=this.tags.find(Pu=>Pu.id===Tu);if(!Cu){console.error(`getTagById(): tag is ${Cu}, id is ${Tu}`);return}return Cu}changeConfig(Tu,Cu=!0){Cu?this.config=objectAssignDeep({},this.config,Tu):this.config=Tu,this.clearCache()}changeGlobalConfig(Tu,Cu=!0){Cu?this.config.globalConfig=objectAssignDeep({},this.config.globalConfig,Tu):this.config.globalConfig=Tu,this.clearCache()}changeContentTypeConfig(Tu,Cu,Pu=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),Pu?this.config.contentTypeConfig[Tu]=objectAssignDeep({},this.config.contentTypeConfig[Tu],Cu):this.config.contentTypeConfig[Tu]=Cu,this.clearCache()}getVisibleByPanoIndex(Tu,Cu){var Pu;const Bu=this.getCaches({panoIndex:Cu,id:Tu.id}),Ru=(Pu=this.five.panoIndex)!==null&&Pu!==void 0?Pu:Cu;if(Bu.visible!==void 0)return Bu.visible;{const Lu=(()=>{var Ou,Du,$u,ku,Fu;const Nu=(Ou=this.getTagConfig(Tu).visibleConfig)!==null&&Ou!==void 0?Ou:{},Vu=this.getDistance(Tu);if(typeof Nu=="function")return Nu(this.five,{tag:Tu,distance:Vu});if(Nu.keep==="hidden")return!1;if(Nu.keep==="visible")return!0;if(Nu.visiblePanoIndex!==void 0&&(Ru===void 0||!Nu.visiblePanoIndex.includes(Ru))||Nu.visibleDistance!==void 0&&Nu.visibleDistance!=="unLimited"&&checkRange(Vu,Nu.visibleDistance)===!1)return!1;if(((Du=Nu.intersectRaycaster)===null||Du===void 0?void 0:Du.enabled)!==!1){if(Ru===void 0)return!1;const Gu=($u=this.five.work.observers[Ru])===null||$u===void 0?void 0:$u.position;if(Gu===void 0)throw new Error(`getVisible(): observerPosition is ${Gu}`);const Hu=tagPosition(Tu.position).sub(Gu).normalize();this.raycaster.set(Gu,Hu);const[ju]=this.five.model.intersectRaycaster(this.raycaster),Uu=(Fu=(ku=Nu.intersectRaycaster)===null||ku===void 0?void 0:ku.distanceAccuracy)!==null&&Fu!==void 0?Fu:.01;if(ju&&ju.distance+Uu<Vu)return!1}return!(Nu.angleRange&&Tu.dimensionType===DimensionType.Three&&checkRange(this.getAngle(Tu),Nu.angleRange)===!1)})();return Bu.visible=Lu,Bu.visible}}getUnfoldedByPanoIndex(Tu,Cu){if(!this.getVisibleByPanoIndex(Tu))return;const Bu=this.getCaches({panoIndex:Cu,id:Tu.id});if(Bu.unfolded!==void 0)return Bu.unfolded;{const Ru=this.getTagConfig(Tu).unfoldedConfig;if(!Ru)return;const Lu=(()=>{const Du=this.getDistance(Tu);if(typeof Ru=="function")return Ru(this.five,{tag:Tu,distance:Du});if(Ru.keep==="folded")return!1;if(Ru.keep==="unfolded")return!0;if(Ru.disableUnfold===!0)return!1;if(Ru.disableFold===!0)return!0;if(Ru.unfoldDistance&&checkRange(Du,Ru.unfoldDistance)===!1)return!1})();Bu.unfolded=Lu;const Ou=this.getUnfoldedByCamera(Tu);return Ou!==void 0?Ou:Bu.unfolded}}getUnfoldedByCamera(Tu){return this.getVisibleByPanoIndex(Tu)?(()=>{var Bu;const Ru=this.getDistance(Tu),Lu=this.getTagConfig(Tu).unfoldedConfig;if(!!Lu){if(typeof Lu=="function")return Lu(this.five,{tag:Tu,distance:Ru});if(Lu.keep==="folded")return!1;if(Lu.keep==="unfolded")return!0;if(Lu.disableUnfold===!0)return!1;if(Lu.disableFold===!0)return!0;if(Lu.autoUnfold===void 0)return;if(Lu.autoUnfold.strategy==="ScreenPostion"){const Ou=this.getTagProject(Tu);if(Ou&&checkRange(Ou.x,Lu.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(Lu.autoUnfold.strategy==="MinimumDistance"){const $u=this.filterPointTag().filter(Fu=>this.getVisibleByPanoIndex(Fu)).filter(Fu=>{const Nu=this.getTagProject(Fu);if(!Nu)return!1;const{x:Vu,y:Gu,z:Hu}=Nu;return!(Math.abs(Hu)>1||Math.abs(Vu)>1||Math.abs(Gu)>1)}).filter(Fu=>{var Nu;const Vu=this.getTagConfig(Fu).unfoldedConfig;return typeof Vu=="object"&&((Nu=Vu.autoUnfold)===null||Nu===void 0?void 0:Nu.strategy)==="MinimumDistance"}).map(Fu=>({id:Fu.id,distance:this.getDistance(Fu)})).filter(Fu=>Fu.distance!==void 0).sort((Fu,Nu)=>Fu.distance-Nu.distance).findIndex(Fu=>Fu.id===Tu.id);if($u===-1||$u<=((Bu=Lu.autoUnfold.maxNumber)!==null&&Bu!==void 0?Bu:1)-1===!1)return!1}return!0}})():void 0}getDistance(Tu,Cu){var Pu,Bu,Ru;const Lu=(Pu=this.five.panoIndex)!==null&&Pu!==void 0?Pu:Cu;if(Lu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Lu}`);const Ou=this.getCaches({panoIndex:Cu,id:Tu.id});if(Ou.distance!==void 0)return Ou.distance;{const Du=(Ru=(Bu=this.five.work)===null||Bu===void 0?void 0:Bu.observers[Lu])===null||Ru===void 0?void 0:Ru.position;if(Du===void 0)throw new Error(`getDistance(): observerPosition is ${Du}`);const $u=(()=>Tu.pointType===PointType.PointTag?arrayPositionToVector3(Tu==null?void 0:Tu.position):tagPosition(Tu.position))(),ku=Du.distanceTo($u);return Ou.distance=ku,ku}}getAngle(Tu,Cu){var Pu,Bu,Ru;const Lu=(Pu=this.five.panoIndex)!==null&&Pu!==void 0?Pu:Cu;if(Lu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Lu}`);const Ou=this.getCaches({panoIndex:Cu,id:Tu.id});if(Ou.angle!==void 0)return Ou.angle;{const Du=(Ru=(Bu=this.five.work)===null||Bu===void 0?void 0:Bu.observers[Lu])===null||Ru===void 0?void 0:Ru.position;if(Du===void 0)throw new Error(`getAngleRange(): observerPosition is ${Du}`);const $u=(()=>Tu.pointType===PointType.PointTag?anyPositionToVector3(Tu.normal):planeNormal(Tu.position))();if(!$u)return;const ku=new Vector3().copy(Du).sub(tagPosition(Tu.position)),Fu=$u.angleTo(ku)*180/Math.PI;return Ou.angle=Fu,Ou.angle}}getTagConfig(Tu){var Cu;if(!Tu)return(Cu=this.config.globalConfig)!==null&&Cu!==void 0?Cu:{};const Pu={};return this.config.contentTypeConfig&&Object.keys(this.config.contentTypeConfig).forEach(Ru=>{const Lu=Ru;if(Pu[Lu])return;const Ou=Lu.split("-"),[Du="Any",$u="Any",ku="Any"]=Ou||[];(Tu.dimensionType===Du||Du==="Any")&&(Tu.contentType===$u||$u==="Any")&&(Tu.pointType===ku||ku==="Any")&&(Pu[Lu]=this.config.contentTypeConfig[Lu])}),objectAssignDeep({},this.config.globalConfig,...Object.values(Pu),Tu.config)}setPointTagPosition(){const Tu=this.filterPointTag();Tu.length!==0&&Tu.forEach(Cu=>{var Pu;if(!(!((Pu=Cu.state)===null||Pu===void 0)&&Pu.visible)){Cu.pointTagStyle=void 0;return}const Bu=this.getTagProject(Cu);if(!Bu){Cu.pointTagStyle=void 0;return}Cu.pointTagStyle={leftPercent:(Bu.x+1)/2*100,topPercent:(-Bu.y+1)/2*100}})}setVisibleByPanoIndex(){this.tags.forEach(Tu=>{const Cu=this.getVisibleByPanoIndex(Tu);Tu.state&&(Tu.state.visible=Cu)})}setUnfoldedByPanoIndex(){this.tags.forEach(Tu=>{const Cu=this.getUnfoldedByPanoIndex(Tu);if(!!Tu.state&&(Cu!==void 0&&(Tu.state.unfolded=Cu),Cu&&!Tu.state.visible)){const Pu=this.getTagConfig(Tu);typeof Pu.unfoldedConfig=="object"&&Pu.unfoldedConfig.autoUnfoldWhenHide!==!1&&(Tu.state.unfolded=!1)}})}getTagProject(Tu){if(!this.getVisibleByPanoIndex(Tu))return;const Pu=tagPosition(Tu.position),{x:Bu,y:Ru,z:Lu}=Pu.project(this.five.camera);if(!(Lu>1))return{x:Bu,y:Ru,z:Lu}}filterPointTag(){return this.tags.filter(Tu=>Tu.pointType===PointType.PointTag)}filterTag2D(){return this.tags.filter(Tu=>Tu.dimensionType===DimensionType.Two)}filter3DPointTag(){return this.tags.filter(Tu=>Tu.dimensionType===DimensionType.Three&&Tu.pointType===PointType.PointTag)}filter3DTag(){return this.tags.filter(Tu=>Tu.dimensionType===DimensionType.Three)}filterPlaneTag(){return this.tags.filter(Tu=>Tu.dimensionType===DimensionType.Three&&Tu.pointType===PointType.PlaneTag)}}const VERSION$2="1.1.1",PLUGIN_NAME$1=`DnalogelPlugin-PanoTagPlugin@${VERSION$2}`,TAG_INITIAL_UNFOLDED=!1;class PanoTagPluginController extends TagComputer{constructor(Tu,Cu){super(Tu),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:VERSION$2}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{enabled:!0,visible:!0}}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"css3DRenderPlugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"PointTagSvelte",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temporaryState",{enumerable:!0,configurable:!0,writable:!0,value:{visible:!0}}),Object.defineProperty(this,"mediaStore",{enumerable:!0,configurable:!0,writable:!0,value:writable({currentMediaUrl:""})}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}}),Object.defineProperty(this,"staticUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disposedErrorLog",{enumerable:!0,configurable:!0,writable:!0,value:()=>{console.error(`${PLUGIN_NAME$1} is disposed`)}}),this.params=Object.assign({debug:!1,mergePluginDefaultConfigToLoadDataConfig:!1,config:this.config,staticConfig:{host:"vrlab-static.ljcdn.com"}},Cu),this.debug=this.params.debug,this.config=this.params.config,this.staticUrl=(()=>{var Pu;const Bu=this.params.staticConfig;if(typeof Bu=="string")return Bu;{const Ru=Bu.protocol?Bu.protocol+":":"",Lu=(Pu=Bu.host)!==null&&Pu!==void 0?Pu:"vrlab-static.ljcdn.com",Ou=Bu.port?":"+Bu.port:"";return`${Ru}//${Lu}${Ou}`}})(),Object.assign(window,{__PANOTAGPLUGIN_DEBUG__:this})}load(Tu,Cu){var Pu,Bu;this.clearTags(),console.log(PLUGIN_NAME$1,"load:",{data:Tu}),this.params.mergePluginDefaultConfigToLoadDataConfig?this.config=objectAssignDeep({},this.config,{globalConfig:(Pu=Tu.globalConfig)!==null&&Pu!==void 0?Pu:{},contentTypeConfig:(Bu=Tu.contentTypeConfig)!==null&&Bu!==void 0?Bu:{}}):(Tu.globalConfig&&(this.config.globalConfig=Tu.globalConfig),Tu.contentTypeConfig&&(this.config.contentTypeConfig=Tu.contentTypeConfig)),this.addTag(Tu.tagList,Cu),this.debug&&addDebugPoints(this.five,this.tags)}addTag(Tu,Cu){const Bu=(Array.isArray(Tu)?Tu:[Tu]).map(Ru=>{const Lu=this.getTagConfig(Ru);return Object.assign(Object.assign({},Ru),{state:Object.assign({visible:void 0,unfolded:TAG_INITIAL_UNFOLDED},Lu.initialState),hooks:new Subscribe$1,clickable:Lu.clickable})}).filter(Ru=>Ru.position);this.tags.push(...Bu),actionAfterFiveModelLoad(this.five,()=>{var Ru,Lu,Ou;if(this.store.eventListenerDisposer&&((Lu=(Ru=this.store).eventListenerDisposer)===null||Lu===void 0||Lu.call(Ru)),this.store.eventListenerDisposer=this.addEventListener(),!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const Du=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=Du,this.store.resizeObserverDisposerAdding=!1},200)}this.checkPanelTag(),this.setVisibleAndUnfolded({withAnimation:(Ou=Cu==null?void 0:Cu.withAnimation)!==null&&Ou!==void 0?Ou:!0}).then(()=>this.updateRenderAllTags()),this.updateRenderAllTags()})}clearTags(){this.tags=[],this.clearCache(),this.disposeAllCSS3DContainer(),this.updateRenderAllTags()}async show(Tu){const{userAction:Cu=!0,withAnimation:Pu=!1}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:Cu,visibleWithAnimation:Pu}),this.hooks.emit("show",{userAction:Cu,withAnimation:Pu})}async hide(Tu){const{userAction:Cu=!0,withAnimation:Pu=!1}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:Cu,visibleWithAnimation:Pu}),this.hooks.emit("hide",{userAction:Cu,withAnimation:Pu})}enable(Tu){const{userAction:Cu=!0}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:Cu}),this.hooks.emit("enable",{userAction:Cu})}disable(Tu){const{userAction:Cu=!0}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:Cu}),this.hooks.emit("disable",{userAction:Cu})}dispose(){var Tu,Cu,Pu,Bu,Ru,Lu;this.disposeAllCSS3DContainer(),(Tu=this.PointTagSvelte)===null||Tu===void 0||Tu.$destroy(),this.filter3DTag().forEach(Ou=>{var Du;return(Du=Ou.tag3DContentSvelte)===null||Du===void 0?void 0:Du.svelteApp.$destroy()}),this.tags=[],(Cu=this.store.disposers)===null||Cu===void 0||Cu.forEach(Ou=>Ou==null?void 0:Ou()),this.store.disposers=[],this.store.disposed=!0,(Bu=(Pu=this.store).eventListenerDisposer)===null||Bu===void 0||Bu.call(Pu),this.store.eventListenerDisposer=void 0,(Lu=(Ru=this.store).resizeObserverDisposer)===null||Lu===void 0||Lu.call(Ru),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.clearCache(),this.hooks.emit("dispose")}setState(Tu,Cu){if(this.store.disposed)return this.disposedErrorLog();const{userAction:Pu=!0,visibleWithAnimation:Bu=!1}=Cu,Ru=Object.assign({},this.state);this.state=Object.assign(this.state,Tu),this.store.visibleWithAnimation=Bu,Ru.visible!==this.state.visible&&(Tu.visible?this.handleShow():this.handleHide()),Ru.enabled!==this.state.enabled&&(Tu.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Ru,userAction:Pu})}changeTagNormalById(Tu,Cu){const Pu=this.getTagById(Tu);!Pu||!Pu.tag3DContentSvelte||(Pu.tag3DContentSvelte.currentNormal=arrayPositionToVector3(Cu),this.updateRenderPlaneTag())}changeDataById(Tu,Cu,Pu=!0){const Bu=this.getTagById(Tu);!Bu||(Pu?Bu.data=objectAssignDeep({},Bu.data,Cu):Object.assign(Bu.data,Cu),this.checkPanelTag(),this.updateRenderAllTags())}changeTagById(Tu,Cu,Pu=!0){const Bu=this.getTagById(Tu);!Cu||(Pu?objectAssignDeep(Bu,Cu):Object.assign(Bu,Cu),(Bu==null?void 0:Bu.tag3DContentSvelte)&&(Cu==null?void 0:Cu.normal)&&(Bu.tag3DContentSvelte.currentNormal=arrayPositionToVector3(Cu.normal)),this.updateRenderAllTags(),this.checkPanelTag())}destroyTagById(Tu){(Array.isArray(Tu)?Tu:[Tu]).forEach(Pu=>{const Bu=this.tags.findIndex(Ru=>Ru.id===Pu);Bu!==-1&&this.tags.splice(Bu,1)}),this.updateRenderAllTags()}pauseCurrentMedia(){this.mediaStore.set({currentMediaUrl:""})}async setVisibleAndUnfolded({withAnimation:Tu}={withAnimation:!1}){return this.setVisibleByPanoIndex(),Tu?new Promise((Cu,Pu)=>{setTimeout(()=>{this.setUnfoldedByPanoIndex(),Cu()},10)}):(this.setUnfoldedByPanoIndex(),Promise.resolve())}handleShow(){this.state.visible=!0,this.updateTagContainerVisible()}handleHide(){this.state.visible=!1,this.updateTagContainerVisible()}handleEnable(){this.state.enabled=!0,this.updateRenderAllTags()}handleDisable(){var Tu;this.state.enabled=!1,(Tu=this.PointTagSvelte)===null||Tu===void 0||Tu.$set({tags:[]}),this.filter3DTag().forEach(Cu=>{var Pu;(Pu=Cu.tag3DContentSvelte)===null||Pu===void 0||Pu.svelteApp.$destroy(),Cu.tag3DContentSvelte=void 0})}addEventListener(){const{five:Tu,hooks:Cu}=this,Pu=this.handleFiveWantsMoveToPano.bind(this),Bu=this.handleFiveModeChange.bind(this),Ru=this.handleFiveCameraUpdate.bind(this),Lu=this.handleFiveCameraUpdateDebounce(),Ou=this.handleFivePanoArrived.bind(this),Du=this.clickhandler.bind(this);return Tu.on("wantsMoveToPano",Pu),Tu.on("modeChange",Bu),Tu.on("cameraUpdate",Ru),Tu.on("cameraUpdate",Lu),Tu.on("panoArrived",Ou),Cu.on("click",Du),()=>{Tu.off("wantsMoveToPano",Pu),Tu.off("modeChange",Bu),Tu.off("cameraUpdate",Ru),Tu.off("cameraUpdate",Lu),Tu.off("panoArrived",Ou),Cu.off("click",Du),this.store.eventListenerDisposer=void 0}}addResizeObserver(){const Tu=this.five.getElement(),Cu=()=>{this.show(),this.updateRenderAllTags()},{observe:Pu,unobserve:Bu}=resizeObserver(throttle(()=>{!this.store.resizeObserverDisposer||this.hide()},500),Tu),{observe:Ru,unobserve:Lu}=resizeObserver(debounce(()=>Cu(),400),Tu);return Pu(),Ru(),()=>{Bu(),Lu()}}handleFiveModeChange(Tu){Tu==="Panorama"?this.five.once("panoArrived",()=>this.temporaryShow()):this.temporaryHide()}handleFiveWantsMoveToPano(){this.tags.forEach(Tu=>{const Cu=this.getTagConfig(Tu);typeof Cu.visibleConfig=="object"&&Cu.visibleConfig.keep?Tu.temporaryState=Object.assign(Object.assign({},Tu.temporaryState),{visible:Cu.visibleConfig.keep==="visible"}):typeof Cu.visibleConfig=="object"&&Cu.visibleConfig.alwaysShowWhenMovePano?Tu.temporaryState=Object.assign(Object.assign({},Tu.temporaryState),{visible:!0}):Tu.temporaryState=Object.assign(Object.assign({},Tu.temporaryState),{visible:!1})}),this.updateRenderAllTags()}temporaryShow(){this.temporaryState.visible=!0}temporaryHide(){this.temporaryState.visible=!1}clickhandler(Tu){if(Tu.target==="TagPoint"){if(!Tu.tag.state)return;const Cu=this.getTagConfig(Tu.tag);if(typeof Cu.unfoldedConfig=="object"){if((Cu.unfoldedConfig.disableUnfold||Cu.unfoldedConfig.keep)&&!Tu.tag.state.unfolded)return}else Tu.tag.state.unfolded=!Tu.tag.state.unfolded;Tu.tag.state.unfolded&&this.tags.forEach(Pu=>{Pu.id!==Tu.tag.id&&Pu.state&&(Pu.state.unfolded=!1)}),this.updateRenderAllTags()}}updateRenderAllTags(){this.updateRenderPointTag(),this.updateRenderPlaneTag()}updateTagContainerVisible(){var Tu;(Tu=this.PointTagSvelte)===null||Tu===void 0||Tu.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation}),this.filter3DTag().forEach(Cu=>{var Pu;(Pu=Cu.tag3DContentSvelte)===null||Pu===void 0||Pu.svelteApp.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation})})}handleFiveCameraUpdateDebounce(){return debounce(()=>{this.setUnfoldedByCamera(),this.updateRenderAllTags()},100)}handleFiveCameraUpdate(){this.updateRenderPointTag()}async handleFivePanoArrived(){await this.setVisibleAndUnfolded(),this.tags.forEach(Tu=>{Tu.temporaryState=Object.assign(Object.assign({},Tu.temporaryState),{visible:!0})}),this.updateRenderAllTags()}setUnfoldedByCamera(){let Tu=!1;this.tags.forEach(Cu=>{const Pu=this.getUnfoldedByCamera(Cu);!Cu.state||Pu!==void 0&&(Pu===!0&&(Tu=!0),Cu.state.unfolded=Pu)}),Tu&&this.tags.forEach(Cu=>{const Pu=this.getTagConfig(Cu).unfoldedConfig;typeof Pu=="object"&&(Pu.autoUnfold||Pu.disableFold||Pu.keep)||Cu.state&&(Cu.state.unfolded=!1)})}updateRenderPointTag(){var Tu;const Cu=this.filterPointTag();if(this.setPointTagPosition(),this.PointTagSvelte)this.PointTagSvelte.$set({tags:Cu,state:this.state,temporaryState:this.temporaryState});else{const Pu=(Tu=this.five.getElement())===null||Tu===void 0?void 0:Tu.parentElement;if(!Pu)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.PointTagSvelte=new PointTag({target:Pu,props:{hooks:this.hooks,tags:Cu,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore}})}}updateRenderPlaneTag(){[...this.filterPlaneTag(),...this.filter3DPointTag()].forEach(Cu=>{var Pu;if(Cu.tag3DContentSvelte){const{svelteApp:Bu,domContainer:Ru,initialNormal:Lu,currentNormal:Ou}=Cu.tag3DContentSvelte;if(Bu.$set({tag:Cu,hooks:this.hooks,state:this.state,temporaryState:this.temporaryState}),!Lu.equals(Ou)){const Du=new Quaternion().setFromUnitVectors(Lu,Ou);Ru.css3DObject.setRotationFromQuaternion(Du)}}else{if(((Pu=Cu.state)===null||Pu===void 0?void 0:Pu.visible)===!1)return;if(this.css3DRenderPlugin||(this.css3DRenderPlugin=CSS3DRenderPlugin$1(this.five)),Cu.pointType===PointType.PointTag&&!Cu.normal)return console.error("updateRenderPlaneTag: \u4E09\u7EF4\u70B9\u6807\u7B7E\u7F3A\u5C11\u6CD5\u5411\u91CF\uFF01");const Bu=Cu.pointType===PointType.PlaneTag?Cu.position:normalPositionToPositions(this.five.camera.position,arrayPositionToVector3(Cu.position),arrayPositionToVector3(Cu.normal)),Ru=Cu.pointType===PointType.PlaneTag?planeNormal(Cu.position):arrayPositionToVector3(Cu.normal),Lu=this.getTagConfig(Cu).tag3DConfig,Ou=this.css3DRenderPlugin.create3DDomContainer(Bu,Lu);if(!Ou)return;this.store.css3DRenderDisposer.set(Cu.id,Ou.dispose),Cu.tag3DContentSvelte={svelteApp:new Tag({target:Ou.container,props:{tag:Cu,hooks:this.hooks,state:this.state,mediaStore:this.mediaStore,temporaryState:this.temporaryState}}),domContainer:Ou,initialNormal:Ru,currentNormal:Ru}}}),this.checkPanelTag()}disposeAllCSS3DContainer(){for(const[Tu,Cu]of this.store.css3DRenderDisposer)Cu==null||Cu();this.store.css3DRenderDisposer=new Map}checkPanelTag(){this.tags.forEach(Tu=>{var Cu;Tu.dimensionType===DimensionType.Two&&Tu.pointType===PointType.PointTag&&((Cu=Tu.tag3DContentSvelte)===null||Cu===void 0||Cu.domContainer.dispose(),Tu.tag3DContentSvelte=void 0)});for(const[Tu,Cu]of this.store.css3DRenderDisposer){const Pu=this.getTagById(Tu);(!Pu||Pu.dimensionType!==DimensionType.Three)&&(Cu==null||Cu(),this.store.css3DRenderDisposer.delete(Tu))}}}const PanoTagPlugin=(_u,Tu)=>new PanoTagPluginController(_u,Tu);new Vector3;function PanoTag(){const _u=react$1.exports.useRef(),Tu=useController(),Cu=useFiveInstance(),Pu=react$1.exports.useRef(PanoTagPlugin(Cu,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"},unfoldDistance:{max:100}}}}}));return react$1.exports.useEffect(()=>{var Ru;if(((Ru=Tu.configs)==null?void 0:Ru.keyframeMap.PanoTag)===!1)return;const Bu=Lu=>{if(!Pu.current)return;const{start:Ou,end:Du,data:$u}=Lu,ku=$u,Fu="any-id",Nu=PointType.PointTag,Vu=DimensionType.Two,Gu=[ku.vertex.x,ku.vertex.y,ku.vertex.z],Hu=(()=>ku.imgUrl?{id:Fu,pointType:Nu,position:Gu,dimensionType:Vu,contentType:ContentType.ImageText,data:{text:ku.text,mediaData:[{type:"Image",url:ku.imgUrl}]}}:{id:Fu,pointType:Nu,position:Gu,dimensionType:Vu,contentType:ContentType.Text,data:{text:ku.text}})();Pu.current.load({tagList:[Hu]}),_u.current=setTimeout(()=>{var zu;const ju=Date.now(),Uu=Pu.current.getTagById(ju);Uu.state&&(Uu.state.unfolded=!1,Pu.current.updateRenderAllTags()),(zu=Uu.hooks)==null||zu.on("folded",()=>{setTimeout(()=>{Uu.state&&(Uu.state.visible=!1,Pu.current.destroyTagById(ju))},1500)})},Du-Ou)};return Tu.on(VreoKeyframeEnum.PanoTag,Bu),()=>{Tu.off(VreoKeyframeEnum.PanoTag,Bu),_u.current&&clearTimeout(_u.current)}},[Tu]),null}function evenNumber(_u,Tu){const Cu=Math.round(_u);return Cu%2===0?Cu:Cu+Number(Tu!=null&&Tu.smaller?-1:1)}function centerPoint(_u,Tu){return new Vector3((_u.x+Tu.x)/2,(_u.y+Tu.y)/2,(_u.z+Tu.z)/2)}const transformPositionToVector3=({x:_u,y:Tu,z:Cu})=>new Vector3(_u,Tu,Cu);function createResizeObserver(_u,Tu){if(!Tu||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Cu=new ResizeObserver(_u);return{observe:()=>Cu.observe(Tu),unobserve:()=>Cu.unobserve(Tu)}}}const CSS3DRenderPlugin=_u=>{const Tu={disposeCallbacks:[]},Cu=(...Bu)=>{var Ju,Zu,_c;const Ru=Bu[0].map(_f=>_f instanceof Vector3?_f:transformPositionToVector3(_f)),Lu=Bu[1];if((Ru==null?void 0:Ru.length)<4)return console.error("points must be equal or greater than than 4");if(!((Ju=_u==null?void 0:_u.model)!=null&&Ju.loaded))return console.error("five.model.loaded is: ",(Zu=_u==null?void 0:_u.model)==null?void 0:Zu.loaded);const Ou=_u.getElement();if(!Ou)return console.error("five.getElement() is "+Ou);const Du=[],$u=(Lu==null?void 0:Lu.ratio)||.00216;$u<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const ku=(Lu==null?void 0:Lu.dpr)||1,Fu=(Lu==null?void 0:Lu.mode)||"front",Nu=(_c=Lu==null?void 0:Lu.autoRender)!=null?_c:!0,Vu=(Lu==null?void 0:Lu.behindFiveContainer)||Ou.parentElement||document.body,Gu=(Lu==null?void 0:Lu.container)||document.createElement("div");Gu.classList.add("__Vreo-plugin--CSS3DRenderPlugin");const{css3DObject:Hu,mesh:ju}=Pu(Ru,{ratio:$u,dpr:ku,container:Gu,mode:Fu});let Uu;const zu=Fu==="front"&&!Tu.frontMode,Wu=Fu==="behind"&&!Tu.behindMode,Qu=!(zu||Wu);let qu=!1,Yu=null;Wu&&(Tu.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),zu&&(Tu.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:Xc,css3DRenderer:_h}=Fu==="behind"?Tu.behindMode:Tu.frontMode,_d=(()=>{if(Qu)return()=>{Xc.add(Hu)};{const _f=()=>{const tp=evenNumber(Ou.clientWidth,{smaller:!0}),op=evenNumber(Ou.clientHeight,{smaller:!0});_h.setSize(tp,op)};_f(),Uu=createResizeObserver(_f,Ou),_h.domElement.style.position="absolute",_h.domElement.style.top="0",_h.domElement.style.userSelect="none",_h.domElement.style.pointerEvents="none";const ep=()=>{qu||(Yu=requestAnimationFrame(ep),_h.render(Xc,_u.camera))};return()=>{var tp;Xc.add(Hu),(tp=Uu==null?void 0:Uu.observe)==null||tp.call(Uu),ep(),Fu==="behind"&&ju&&(_u.scene.add(ju),Du.push(()=>ju&&_u.scene.remove(ju)))}}})();zu&&(Ou.parentElement||document.body).appendChild(_h.domElement),Wu&&Vu.appendChild(_h.domElement);const Ku=()=>{var _f;return qu=!0,Du.forEach(ep=>ep==null?void 0:ep()),Xc.remove(Hu),typeof Yu=="number"&&cancelAnimationFrame(Yu),Xc.children.length===0&&(_h.domElement.remove(),Fu==="front"&&(Tu.frontMode=void 0),Fu==="behind"&&(Tu.behindMode=void 0),!Tu.behindMode&&!Tu.frontMode&&((_f=Uu==null?void 0:Uu.unobserve)==null||_f.call(Uu))),!0},Xu=Tu.disposeCallbacks.findIndex(_f=>_f===Ku);return Xu!==-1?Tu.disposeCallbacks.splice(Xu,1):Tu.disposeCallbacks.push(Ku),Nu&&_d(),{container:Gu,dispose:Ku,css3DObject:Hu,render:Nu?void 0:_d}},Pu=(Bu,Ru)=>{const{ratio:Lu,dpr:Ou,container:Du,mode:$u}=Ru,ku=Bu[0].distanceTo(Bu[1]),Fu=Bu[1].distanceTo(Bu[2]),Nu=evenNumber(ku/Lu*Ou),Vu=evenNumber(Fu/Lu*Ou),Gu=new CSS3DObject(Du);Gu.scale.set(Lu,Lu,Lu),Du.style.width=Nu+"px",Du.style.height=Vu+"px",Du.style.pointerEvents="none";const Hu=centerPoint(Bu[0],Bu[2]),ju=Bu[1].clone().sub(Bu[0]),Uu=Bu[2].clone().sub(Bu[1]),zu=new Vector3(0,1,0).angleTo(new Vector3(0,Uu.y,Uu.z)),Wu=new Vector3(1,0,0).angleTo(new Vector3(ju.x,0,ju.z)),Qu=ju.angleTo(new Vector3(ju.x,0,ju.z)),qu=(Uu.z>0?-1:1)*zu,Yu=(ju.z<0?1:-1)*Wu,Xc=(ju.x>0&&ju.y<0||ju.x<0&&ju.y>0?-1:1)*Qu;Gu.rotateOnWorldAxis(new Vector3(1,0,0),qu),Gu.rotateOnWorldAxis(new Vector3(0,1,0),Yu),Gu.rotateOnWorldAxis(new Vector3(0,0,1),Xc),Gu.position.set(Hu.x,Hu.y,Hu.z);let _h;if($u==="behind"){const _d=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),Ku=new PlaneGeometry(Nu,Vu);_h=new Mesh(Ku,_d),_h.name="CSS3DRenderPlugin-mesh",_h.position.copy(Gu.position),_h.rotation.copy(Gu.rotation),_h.scale.copy(Gu.scale)}return{css3DObject:Gu,mesh:_h}};return{create3DDomContainer:Cu,disposeAll:()=>{Tu.disposeCallbacks.forEach(Bu=>Bu==null?void 0:Bu()),Tu.disposeCallbacks=[]}}},calcPoints=(_u,Tu,Cu,Pu)=>{const Bu=Cu/375,Ru=Pu/375,Lu=new PlaneGeometry(Bu,Ru);if(Tu){const zu=new Vector3(Tu.x+_u.x,Tu.y+_u.y,Tu.z+_u.z);Lu.lookAt(zu)}const Ou=new MeshBasicMaterial({color:16776960,side:DoubleSide}),Du=new Mesh(Lu,Ou),$u=_u.clone();Du.position.copy($u);const[ku,Fu,Nu,Vu]=Du.geometry.vertices,Gu=$u.clone().add(Vu),Hu=$u.clone().add(Nu),ju=$u.clone().add(Fu),Uu=$u.clone().add(ku);return[Gu,Hu,Uu,ju]};function PanoTextLabel(){const _u=react$1.exports.useRef(),Tu=useController(),Cu=useFiveInstance(),Pu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{var Ru;if(((Ru=Tu.configs)==null?void 0:Ru.keyframeMap.PanoTextLabel)===!1)return;const Bu=Lu=>{var qu,Yu,Xc;const{start:Ou,end:Du,data:$u}=Lu,ku=$u;if($u.text==="")return;const{x:Fu,y:Nu,z:Vu}=ku.vertex,Gu=new Vector3(Fu,Nu,Vu),Hu=new Vector3((qu=ku.normal)==null?void 0:qu.x,(Yu=ku.normal)==null?void 0:Yu.y,(Xc=ku.normal)==null?void 0:Xc.z),ju=200,Uu=30,zu=calcPoints(Gu,ku.normal&&Hu,ju,Uu);Pu.current||(Pu.current=CSS3DRenderPlugin(Cu));const Wu=Pu.current.create3DDomContainer(zu),Qu=Wu==null?void 0:Wu.css3DObject;if($u.quaternion){const _h=new Quaternion($u.quaternion.x,$u.quaternion.y,$u.quaternion.z,$u.quaternion.w);Qu==null||Qu.quaternion.copy(_h)}Wu!=null&&Wu.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${$u.fontSize||16}px`},className:"PanoText-innerText",children:$u.text||""})})}),Wu==null?void 0:Wu.container),_u.current=setTimeout(()=>{var _h;(_h=Pu.current)==null||_h.disposeAll()},Du-Ou)};return Tu.on(VreoKeyframeEnum.PanoTextLabel,Bu),()=>{Tu.off(VreoKeyframeEnum.PanoTextLabel,Bu),_u.current&&clearTimeout(_u.current)}},[Tu]),jsx(Fragment,{})}function Prompter(){const[_u,Tu]=react$1.exports.useState(""),[Cu,Pu]=react$1.exports.useState(!0),Bu=react$1.exports.useRef(null),Ru=useController();return react$1.exports.useEffect(()=>{var Ou;if(((Ou=Ru.configs)==null?void 0:Ou.keyframeMap.Prompter)===!1)return;const Lu=Du=>{const{start:$u,end:ku,data:Fu}=Du;Tu(Fu.text),Pu(!1),Bu.current&&(clearTimeout(Bu.current),Bu.current=null),Bu.current=setTimeout(()=>{Pu(!0),Tu(""),Bu.current&&clearTimeout(Bu.current),Bu.current=null},ku-$u)};return Ru.on(VreoKeyframeEnum.Prompter,Lu),()=>{Ru.off(VreoKeyframeEnum.Prompter,Lu)}},[Ru]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":Cu,[`vreo-prompter-left--${Ru.agentType}`]:!0}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:_u})})})}function UpdateVRPanorama(){const _u=useController(),Tu=useFiveInstance(),Cu=react$1.exports.useRef(null),Pu=react$1.exports.useRef(null),Bu=react$1.exports.useCallback(()=>{if(Pu.current=null,Cu.current){const Ou=parseWork(Cu.current);Tu.load(Ou)}},[]),Ru=react$1.exports.useCallback(()=>{if(Cu.current){const Ou=parseWork(Cu.current);Object.assign(window,{$rawWork:Ou}),Tu.load(Ou)}},[]),Lu=react$1.exports.useCallback(()=>{!Pu.current||Tu.load(Pu.current)},[]);return react$1.exports.useEffect(()=>{const Ou=Du=>{var Fu;Cu.current||(Cu.current=Tu.work.raw.works);const $u=Du.data;if($u.work){Pu.current=parseWork($u.work),Tu.load(Pu.current);return}const ku=(Fu=Tu.work)==null?void 0:Fu.raw.works[0];if($u.dynamic_scene&&!$u.panorama){const Vu=JSON.parse(ku).panorama,Gu=$u.dynamic_scene.images.index;Vu.list[Gu]=$u.dynamic_scene.images,$u.panorama=Vu,delete $u.dynamic_scene}Object.assign(window,{$work1:JSON.parse(ku),$work2:$u,parseWork}),Pu.current=parseWork([ku,$u]),Tu.load(Pu.current)};return _u.on(VreoKeyframeEnum.UpdateVRPanorama,Ou),_u.on(VreoKeyframeEnum.Exit,Bu),_u.on("loaded",Bu),_u.on("paused",Ru),_u.on("playing",Lu),()=>{_u.off(VreoKeyframeEnum.UpdateVRPanorama,Ou),_u.off(VreoKeyframeEnum.Exit,Bu),_u.off("loaded",Bu),_u.off("paused",Ru),_u.off("playing",Lu)}},[]),jsx(Fragment,{})}const inlinePlay=_u=>{if(!_u)return;const Tu=()=>{_u.removeEventListener("canplaythrough",Tu);try{_u.play()}catch{}};_u.addEventListener("canplaythrough",Tu),_u.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const _u=react$1.exports.useRef(null),Tu=react$1.exports.useRef(),Cu=useController(),Pu=react$1.exports.useRef(),[Bu,Ru]=react$1.exports.useState(!1),Lu=useFiveInstance(),Ou=Du=>{!Tu.current||(Tu.current.src=Du)};return react$1.exports.useEffect(()=>{const Du=async $u=>{const{start:ku,end:Fu}=$u,{videoSrc:Nu,fov:Vu,direction:Gu,panoIndex:Hu,vector:ju}=$u.data,[Uu,zu]=(()=>{if(ju)return[ju.longitude,ju.latitude];if(!Gu)return[0,0];let Wu=-Math.atan2(Gu.x,-Gu.z);Wu=(Wu%PI_2+PI_2)%PI_2;const Qu=-Math.asin(Gu.y/1);return[Wu,Qu]})();Lu.setState({fov:Vu,panoIndex:Hu,longitude:Uu,latitude:zu},!0),Ou(Nu),inlinePlay(Tu.current),Ru(!0),Pu.current=setTimeout(()=>{var Wu,Qu;(Wu=Tu.current)!=null&&Wu.paused||(Qu=Tu.current)==null||Qu.pause(),Ru(!1),Ou("")},Fu-ku)};return Cu.on(VreoKeyframeEnum.VideoEffect,Du),()=>{Cu.off(VreoKeyframeEnum.VideoEffect,Du),Pu.current&&clearTimeout(Pu.current)}},[Cu]),react$1.exports.useEffect(()=>{var $u,ku;if(!_u.current)return;const Du=((ku=($u=Cu.configs)==null?void 0:$u.videos)==null?void 0:ku.videoEffect)||document.createElement("video");Du.setAttribute("playsinline","true"),Du.setAttribute("webkit-playsinline","true"),Du.setAttribute("autoplay","true"),Du.setAttribute("key","VideoEffect-video"),Du.setAttribute("class","VideoEffect-video"),Tu.current=Du,_u.current.append(Tu.current),document.addEventListener("WeixinJSBridgeReady",function(){var Fu;(Fu=Tu.current)==null||Fu.play()},!1),_u.current},[]),jsx("div",{ref:_u,className:classNames("VideoEffect",{"VideoEffect--visible":Bu})})}const Preloader={blob:_u=>{const Tu=()=>null;return new Promise((Cu,Pu)=>{const Bu=new XMLHttpRequest,Ru=()=>{Bu.ontimeout=Tu,Bu.onreadystatechange=Tu,Bu.onprogress=Tu,Bu.onabort=Tu};Bu.ontimeout=()=>{Pu(new Error("timeout")),Ru()},Bu.onreadystatechange=()=>{Bu.readyState===4&&(Bu.status===0&&!Bu.response||(Bu.status===200||Bu.status===0?(Cu(Bu.response),Ru()):(Pu(new Error("status:"+Bu.status)),Ru())))},Bu.open("GET",_u,!0),Bu.responseType="blob",Bu.send(null)})}};class AudioLike extends Subscribe$1{constructor({duration:Cu}={}){super();hm(this,"$timestamp",null);hm(this,"$currentTime",0);hm(this,"$duration",0);hm(this,"stopInterval");hm(this,"muted",!1);hm(this,"src","");Cu&&(this.$duration=Cu)}setAttribute(Cu,Pu){}play(){this.$currentTime===this.$duration&&(this.$currentTime=0),this.$timestamp===null&&(this.$timestamp=performance.now()-this.$currentTime),this.stopInterval=requestAnimationFrameInterval$1(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=null}requestAnimationFrameLoop(){if(this.$timestamp===null)return;const Cu=performance.now();this.$currentTime=Cu-this.$timestamp,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(Cu){this.$currentTime=Cu}get duration(){return this.$duration}set duration(Cu){this.pause(),this.$duration=Cu,this.$timestamp=null,this.$currentTime=0}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(Cu,Pu,Bu=!1){this.on(Cu,Pu)}removeEventListener(Cu,Pu,Bu=!1){this.off(Cu,Pu)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(Cu,Pu,Bu,Ru,Lu={preload:!0}){var Gu,Hu,ju;if(!Lu.videoInstance)if(cacheInstance.videoInstance)Lu.videoInstance=cacheInstance.videoInstance;else{const Uu=document.createElement("video");Uu.style.opacity="0",Uu.style.pointerEvents="none",Uu.style.display="none",document.body.append(Uu),Lu.videoInstance=Uu,cacheInstance.videoInstance=Uu,Uu.playsInline=!0,Uu.controls=!1}const Ou=new PlaneGeometry(Cu,Pu,Bu,Ru),Du=new VideoTexture(Lu.videoInstance),$u=new ShaderMaterial({uniforms:{map:{value:Du},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(Ou,$u);hm(this,"options");hm(this,"videoUrl");hm(this,"freeze");hm(this,"paused");hm(this,"audioInstance");hm(this,"audioLikeInstance");hm(this,"$removeEventListener");if(this.options=Lu,this.freeze=!1,this.paused=!0,Lu.audioInstance)this.audioInstance=Lu.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const Uu=document.createElement("audio");Uu.crossOrigin="",Uu.muted=!1,Uu.autoplay=!1,Uu.style.display="none",document.body.appendChild(Uu),this.audioInstance=Uu,cacheInstance.audioInstance=Uu}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const ku=Uu=>runInAction(()=>this.paused=Uu),Fu=()=>ku(!0),Nu=()=>ku(!1),Vu=()=>console.log("vreo: video \u64AD\u653E\u7ED3\u675F");this.audioInstance.addEventListener("pause",Fu),this.audioInstance.addEventListener("play",Nu),(Gu=this.options.videoInstance)==null||Gu.addEventListener("pause",Fu),(Hu=this.options.videoInstance)==null||Hu.addEventListener("play",Nu),this.audioLikeInstance.addEventListener("pause",Fu),this.audioLikeInstance.addEventListener("play",Nu),(ju=this.options.videoInstance)==null||ju.addEventListener("ended",Vu),this.$removeEventListener=()=>{var Uu,zu,Wu;this.audioInstance.removeEventListener("pause",Fu),this.audioInstance.removeEventListener("play",Nu),(Uu=this.options.videoInstance)==null||Uu.removeEventListener("pause",Fu),(zu=this.options.videoInstance)==null||zu.removeEventListener("play",Nu),this.audioLikeInstance.removeEventListener("pause",Fu),this.audioLikeInstance.removeEventListener("play",Nu),(Wu=this.options.videoInstance)==null||Wu.removeEventListener("ended",Vu)}}get mediaInstance(){return this.videoUrl?getMediaType(this.videoUrl)==="audio"?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(Cu){if(this.videoUrl===Cu)return;this.videoUrl=Cu,this.freeze=!0,await this.mediaInstance.pause();const Pu=this.material.uniforms;this.mediaInstance.muted=!0,this.mediaInstance.src=this.options.preload||this.options.preload===void 0||getMediaType(this.videoUrl)==="video"?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.mediaInstance.setAttribute("data-src",this.videoUrl);const Bu=()=>{this.mediaInstance.currentTime!==0&&(this.freeze=!1,this.mediaInstance.muted=!1,Pu.enable.value=getMediaType(this.videoUrl)?1:0,this.mediaInstance.removeEventListener("timeupdate",Bu,!1))};this.mediaInstance.addEventListener("timeupdate",Bu,!1)}async play(Cu="",Pu=0,Bu){return Cu=Cu||"",Bu&&!Cu?(this.currentTime&&(this.mediaInstance.currentTime=Pu),this.mediaInstance.duration=Bu,this.videoUrl="",this.mediaInstance.play(),!0):Cu?Cu===this.videoUrl?(this.mediaInstance.currentTime=Pu,await this.mediaInstance.play(),!0):(await this.update(Cu),this.mediaInstance.pause(),await new Promise(Ru=>setTimeout(async()=>{this.mediaInstance.currentTime=Pu,await this.mediaInstance.play(),Ru(!0)},20))):(this.videoUrl?await this.mediaInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.mediaInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor(Tu,Cu){hm(this,"videoAgentMesh");hm(this,"scene",new Scene);hm(this,"camera",new OrthographicCamera(-240,240,135,-135));hm(this,"renderer",new WebGLRenderer({alpha:!0}));hm(this,"disposers",[]);hm(this,"run",()=>{!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.run)});hm(this,"dispose",()=>{var Tu;(Tu=this.videoAgentMesh)==null||Tu.dispose(),this.disposers.forEach(Cu=>Cu==null?void 0:Cu())});if(this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,Cu),Tu){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Pu=this.renderer.domElement;Pu.classList.add("VideoAgent-canvas");const Bu=addResizeListener(Tu,(Ru,Lu)=>{this.renderer.setSize(Ru*window.devicePixelRatio,Lu*window.devicePixelRatio),Pu.style.width=`${Ru}px`,Pu.style.height=`${Lu}px`});this.disposers.push(Bu),Tu.append(Pu),this.scene.add(this.videoAgentMesh),this.run()}}}function VideoAgent(_u){var Ru;const Tu=react$1.exports.useRef(null),Cu=useController(),Pu=react$1.exports.useMemo(()=>{var Lu;return((Lu=Cu.avatar)==null?void 0:Lu.url)&&Cu.avatar.force===!0},[Cu.avatar]),Bu=react$1.exports.useMemo(()=>{var Lu;return Pu?!1:((Lu=Cu.videoAgentScene)==null?void 0:Lu.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[Cu.videoAgentScene]);return react$1.exports.useEffect(()=>{if(!Tu.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(Cu.videoAgentScene){console.warn('VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4');return}const Lu=new VideoAgentScene(Tu.current,_u.options);return Cu.videoAgentScene=Lu,()=>{var Ou;Cu.dispose(),(Ou=Cu.videoAgentScene)==null||Ou.dispose()}},[]),jsxs(Fragment,{children:[jsx("div",{className:"Avatar",style:{display:Pu?"block":"none"},children:jsx("div",{className:"Avatar-wrapper ratio-1-1",children:jsx("img",{className:"Avatar-img",src:(Ru=Cu.avatar)==null?void 0:Ru.url,onClick:()=>{var Lu;return(Lu=_u.onClick)==null?void 0:Lu.call(_u)}})})}),jsx("div",{className:classNames("VideoAgent",{hide:!Bu}),children:jsx("div",{className:"VideoAgent-container",children:jsx("div",{className:"VideoAgent-wrapper ratio-16-9",children:jsx("div",{className:"VideoAgent-inner",ref:Tu,children:jsx("div",{className:"VideoAgent-play",onClick:()=>{var Lu;return(Lu=_u.onClick)==null?void 0:Lu.call(_u)}})})})})})]})}function BgMusic(){const _u=useController(),Tu=react$1.exports.useRef(null),Cu=react$1.exports.useCallback(()=>{Tu.current&&(clearTimeout(Tu.current),Tu.current=null)},[]);return react$1.exports.useEffect(()=>{const Pu=new Audio;Pu.setAttribute("id","vreo-singleton-bgmusic"),Pu.style.display="none",Pu.setAttribute("playsinline","true"),Pu.loop=!0,document.body.append(Pu);const Bu=Ru=>{const{start:Lu,end:Ou}=Ru,{url:Du}=Ru.data;Pu.src=Du;const $u=()=>{Pu.play()};Pu.addEventListener("canplaythrough",$u),Cu();const ku=()=>{Pu.pause(),Pu.currentTime=0,Pu.src="",Cu(),Pu.removeEventListener("canplaythrough",$u)},Fu=Ou-Lu||5e3;Tu.current=setTimeout(()=>{ku()},Fu),_u.once("paused",()=>{ku()})};return _u.on(VreoKeyframeEnum.BgMusic,Bu),()=>{_u.off(VreoKeyframeEnum.BgMusic,Bu),document.body.removeChild(Pu),Cu()}}),jsx(Fragment,{})}function Wave(_u){const Tu=React.useMemo(()=>{var Pu;switch((Pu=_u==null?void 0:_u.appearance)!=null?Pu:"solid"){default:return"https://vr-public.realsee-cdn.cn/release/static/image/release/vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm";case"solid":return"https://vr-public.realsee-cdn.cn/release/static/image/release/vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm";case"single":return"https://vr-public.realsee-cdn.cn/release/static/image/release/vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm";case"double":return"https://vr-public.realsee-cdn.cn/release/static/image/release/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm";case"swap":return"https://vr-public.realsee-cdn.cn/release/static/image/release/vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm";case"expand":return"https://vr-public.realsee-cdn.cn/release/static/image/release/vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm"}},[_u==null?void 0:_u.appearance]);return jsx("video",{className:"vreo-wave",width:"100%",preload:"auto",muted:!0,autoPlay:!0,loop:!0,playsInline:!0,disablePictureInPicture:!0,controls:!1,src:Tu})}const AppView=observer(({controller:_u})=>{var Tu,Cu;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!_u.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[_u.waveAppearance&&jsx(Wave,{appearance:_u.waveAppearance}),jsx(VideoAgent,{onClick:()=>{_u.playing?_u.setPlaying(!1):_u.setPlaying(!0)},options:((Tu=_u.configs)==null?void 0:Tu.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(Cu=_u.configs)==null?void 0:Cu.customPanelChildren]})})});function App(){const _u=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(ResizeObserver$1,{}),jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:_u})]})}const DrawerView=observer(({controller:_u})=>{var Pu;const Tu="400px",Cu=(()=>{var Ru;const Bu=(Ru=_u.drawerConfig)==null?void 0:Ru.height;return Bu?typeof Bu=="number"?Bu+"px":Bu:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":_u.drawerConfig&&_u.drawerConfig.content}),onClick:()=>_u.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:Cu,maxHeight:Tu},children:((Pu=_u.drawerConfig)==null?void 0:Pu.content)||""})})});function Drawer(){const _u=useController();return jsx(DrawerView,{controller:_u})}const PopUpView=observer(({controller:_u})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":_u.popUp}),onClick:()=>_u.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:_u.popUp||""})}));function PopUp(){const _u=useController();return jsx(PopUpView,{controller:_u})}class Player extends Subscribe$1{constructor(Cu,Pu={}){var Bu;super();hm(this,"$five");hm(this,"controller");hm(this,"configs");if(this.$five=Cu,Pu.container||(Pu.container=Pu.containter),!Pu.container){const Ru=document.getElementById("vreo-app")||document.createElement("div");reactDom.exports.unmountComponentAtNode(Ru),Ru.setAttribute("id","vreo-app"),Pu.container=Ru;const Lu=(Bu=Cu.getElement())==null?void 0:Bu.parentNode;Lu?Lu.append(Ru):document.body.append(Ru)}Pu.container.classList.contains("vreo-app")||Pu.container.classList.add("vreo-app"),this.configs=Object.freeze(Object.assign({keyframeMap:{}},Pu)),this.controller=new Controller({five:Cu,container:Pu.container,configs:this.configs}),reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Ru,Lu)=>jsx(Ru,{subscribe:{on:(Ou,Du)=>this.on(Ou,Du),once:(Ou,Du)=>this.once(Ou,Du),off:(Ou,Du)=>this.off(Ou,Du)},five:Cu},Lu))]}),Pu.container),reaction(()=>this.controller.ended,Ru=>{Ru&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Ru=>{this.controller.ended||this.emit(Ru?"playing":"paused")})}async load(Cu,Pu=0,Bu=!1,Ru=!1){var Lu,Ou,Du,$u;if(this.controller.setLoading(!0),Ru&&(Cu=JSON.parse(JSON.stringify(Cu))),this.controller.visible||(this.controller.setVisible(!0),await new Promise(ku=>{setTimeout(()=>ku(!0),500)})),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=Cu,(Lu=this.controller.mediaInstance)==null||Lu.pause(),this.$five.imageOptions.size&&((Ou=this.configs.imageOptions)==null?void 0:Ou.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Bu||Bu===void 0&&this.configs.autoPreload){const ku=Cu.keyframes.filter(Nu=>!(Nu.type!==VreoKeyframeEnum.CameraMovement||Nu.data.panoIndex===void 0)).reduce((Nu,Vu)=>{const Gu=Vu.data.panoIndex;return Nu[Gu]||(Nu[Gu]=!0),Nu},{}),Fu=Object.keys(ku);for(let Nu=0;Nu<Fu.length;Nu++)await this.$five.preloadPano(Number(Fu[Nu]))}return this.emit("loaded",Cu),this.controller.emit("loaded",Cu),(Du=this.controller.videoAgentScene)!=null&&Du.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=Pu/1e3),this.controller.setAvatar(Cu.video.avatar),await(($u=this.controller.videoAgentScene)==null?void 0:$u.videoAgentMesh.play(Cu.video.url,Pu/1e3,Cu.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((ku,Fu)=>this.emit(ku,Fu)),this.controller.setLoading(!1),!0}get paused(){return!this.controller.playing}play(Cu){return this.controller.playing||(Cu&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=Cu/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setPlaying(!0)),!0}setAppearance(Cu){this.controller.setAppearance(Cu)}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.pause(),this.controller.dispose(),this.configs.container&&reactDom.exports.unmountComponentAtNode(this.configs.container)}}console.log(`

\u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
\u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
\u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
\u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

`);var _default="";export{CSS3DRenderPlugin as C,FiveCanvas as F,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,createFiveProvider as c,Raycaster as d,Fragment as e,reactDom as f,jsx as j,parseWork as p,react$1 as r,tweenProgress as t,unsafe__useFiveInstance as u};
