var Py=Object.defineProperty;var Iy=(_u,$u,Bu)=>$u in _u?Py(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Bu}):_u[$u]=Bu;var xm=(_u,$u,Bu)=>(Iy(_u,typeof $u!="symbol"?$u+"":$u,Bu),Bu);const p$4=function(){const $u=document.createElement("link").relList;if($u&&$u.supports&&$u.supports("modulepreload"))return;for(const Lu of document.querySelectorAll('link[rel="modulepreload"]'))Ru(Lu);new MutationObserver(Lu=>{for(const Ou of Lu)if(Ou.type==="childList")for(const Fu of Ou.addedNodes)Fu.tagName==="LINK"&&Fu.rel==="modulepreload"&&Ru(Fu)}).observe(document,{childList:!0,subtree:!0});function Bu(Lu){const Ou={};return Lu.integrity&&(Ou.integrity=Lu.integrity),Lu.referrerpolicy&&(Ou.referrerPolicy=Lu.referrerpolicy),Lu.crossorigin==="use-credentials"?Ou.credentials="include":Lu.crossorigin==="anonymous"?Ou.credentials="omit":Ou.credentials="same-origin",Ou}function Ru(Lu){if(Lu.ep)return;Lu.ep=!0;const Ou=Bu(Lu);fetch(Lu.href,Ou)}};p$4();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(_u){if(_u.__esModule)return _u;var $u=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(_u).forEach(function(Bu){var Ru=Object.getOwnPropertyDescriptor(_u,Bu);Object.defineProperty($u,Bu,Ru.get?Ru:{enumerable:!0,get:function(){return _u[Bu]}})}),$u}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(_u){if(_u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_u)}function shouldUseNative(){try{if(!Object.assign)return!1;var _u=new String("abc");if(_u[5]="de",Object.getOwnPropertyNames(_u)[0]==="5")return!1;for(var $u={},Bu=0;Bu<10;Bu++)$u["_"+String.fromCharCode(Bu)]=Bu;var Ru=Object.getOwnPropertyNames($u).map(function(Ou){return $u[Ou]});if(Ru.join("")!=="0123456789")return!1;var Lu={};return"abcdefghijklmnopqrst".split("").forEach(function(Ou){Lu[Ou]=Ou}),Object.keys(Object.assign({},Lu)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(_u,$u){for(var Bu,Ru=toObject(_u),Lu,Ou=1;Ou<arguments.length;Ou++){Bu=Object(arguments[Ou]);for(var Fu in Bu)hasOwnProperty.call(Bu,Fu)&&(Ru[Fu]=Bu[Fu]);if(getOwnPropertySymbols){Lu=getOwnPropertySymbols(Bu);for(var Nu=0;Nu<Lu.length;Nu++)propIsEnumerable.call(Bu,Lu[Nu])&&(Ru[Lu[Nu]]=Bu[Lu[Nu]])}}return Ru};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=objectAssign,n$5=typeof Symbol=="function"&&Symbol.for,p$3=n$5?Symbol.for("react.element"):60103,q$3=n$5?Symbol.for("react.portal"):60106,r$5=n$5?Symbol.for("react.fragment"):60107,t$4=n$5?Symbol.for("react.strict_mode"):60108,u$4=n$5?Symbol.for("react.profiler"):60114,v$5=n$5?Symbol.for("react.provider"):60109,w$3=n$5?Symbol.for("react.context"):60110,x$2=n$5?Symbol.for("react.forward_ref"):60112,y$3=n$5?Symbol.for("react.suspense"):60113,z$2=n$5?Symbol.for("react.memo"):60115,A$3=n$5?Symbol.for("react.lazy"):60116,B$2=typeof Symbol=="function"&&Symbol.iterator;function C$5(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Bu=1;Bu<arguments.length;Bu++)$u+="&args[]="+encodeURIComponent(arguments[Bu]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$4={};function F$4(_u,$u,Bu){this.props=_u,this.context=$u,this.refs=E$4,this.updater=Bu||D$2}F$4.prototype.isReactComponent={};F$4.prototype.setState=function(_u,$u){if(typeof _u!="object"&&typeof _u!="function"&&_u!=null)throw Error(C$5(85));this.updater.enqueueSetState(this,_u,$u,"setState")};F$4.prototype.forceUpdate=function(_u){this.updater.enqueueForceUpdate(this,_u,"forceUpdate")};function G$3(){}G$3.prototype=F$4.prototype;function H$4(_u,$u,Bu){this.props=_u,this.context=$u,this.refs=E$4,this.updater=Bu||D$2}var I$3=H$4.prototype=new G$3;I$3.constructor=H$4;l$4(I$3,F$4.prototype);I$3.isPureReactComponent=!0;var J$3={current:null},K$3=Object.prototype.hasOwnProperty,L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$4(_u,$u,Bu){var Ru,Lu={},Ou=null,Fu=null;if($u!=null)for(Ru in $u.ref!==void 0&&(Fu=$u.ref),$u.key!==void 0&&(Ou=""+$u.key),$u)K$3.call($u,Ru)&&!L$4.hasOwnProperty(Ru)&&(Lu[Ru]=$u[Ru]);var Nu=arguments.length-2;if(Nu===1)Lu.children=Bu;else if(1<Nu){for(var Vu=Array(Nu),Uu=0;Uu<Nu;Uu++)Vu[Uu]=arguments[Uu+2];Lu.children=Vu}if(_u&&_u.defaultProps)for(Ru in Nu=_u.defaultProps,Nu)Lu[Ru]===void 0&&(Lu[Ru]=Nu[Ru]);return{$$typeof:p$3,type:_u,key:Ou,ref:Fu,props:Lu,_owner:J$3.current}}function N$5(_u,$u){return{$$typeof:p$3,type:_u.type,key:$u,ref:_u.ref,props:_u.props,_owner:_u._owner}}function O$4(_u){return typeof _u=="object"&&_u!==null&&_u.$$typeof===p$3}function escape$1(_u){var $u={"=":"=0",":":"=2"};return"$"+(""+_u).replace(/[=:]/g,function(Bu){return $u[Bu]})}var P$4=/\/+/g,Q$4=[];function R$4(_u,$u,Bu,Ru){if(Q$4.length){var Lu=Q$4.pop();return Lu.result=_u,Lu.keyPrefix=$u,Lu.func=Bu,Lu.context=Ru,Lu.count=0,Lu}return{result:_u,keyPrefix:$u,func:Bu,context:Ru,count:0}}function S$3(_u){_u.result=null,_u.keyPrefix=null,_u.func=null,_u.context=null,_u.count=0,10>Q$4.length&&Q$4.push(_u)}function T$2(_u,$u,Bu,Ru){var Lu=typeof _u;(Lu==="undefined"||Lu==="boolean")&&(_u=null);var Ou=!1;if(_u===null)Ou=!0;else switch(Lu){case"string":case"number":Ou=!0;break;case"object":switch(_u.$$typeof){case p$3:case q$3:Ou=!0}}if(Ou)return Bu(Ru,_u,$u===""?"."+U$3(_u,0):$u),1;if(Ou=0,$u=$u===""?".":$u+":",Array.isArray(_u))for(var Fu=0;Fu<_u.length;Fu++){Lu=_u[Fu];var Nu=$u+U$3(Lu,Fu);Ou+=T$2(Lu,Nu,Bu,Ru)}else if(_u===null||typeof _u!="object"?Nu=null:(Nu=B$2&&_u[B$2]||_u["@@iterator"],Nu=typeof Nu=="function"?Nu:null),typeof Nu=="function")for(_u=Nu.call(_u),Fu=0;!(Lu=_u.next()).done;)Lu=Lu.value,Nu=$u+U$3(Lu,Fu++),Ou+=T$2(Lu,Nu,Bu,Ru);else if(Lu==="object")throw Bu=""+_u,Error(C$5(31,Bu==="[object Object]"?"object with keys {"+Object.keys(_u).join(", ")+"}":Bu,""));return Ou}function V$3(_u,$u,Bu){return _u==null?0:T$2(_u,"",$u,Bu)}function U$3(_u,$u){return typeof _u=="object"&&_u!==null&&_u.key!=null?escape$1(_u.key):$u.toString(36)}function W$5(_u,$u){_u.func.call(_u.context,$u,_u.count++)}function aa$3(_u,$u,Bu){var Ru=_u.result,Lu=_u.keyPrefix;_u=_u.func.call(_u.context,$u,_u.count++),Array.isArray(_u)?X$3(_u,Ru,Bu,function(Ou){return Ou}):_u!=null&&(O$4(_u)&&(_u=N$5(_u,Lu+(!_u.key||$u&&$u.key===_u.key?"":(""+_u.key).replace(P$4,"$&/")+"/")+Bu)),Ru.push(_u))}function X$3(_u,$u,Bu,Ru,Lu){var Ou="";Bu!=null&&(Ou=(""+Bu).replace(P$4,"$&/")+"/"),$u=R$4($u,Ou,Ru,Lu),V$3(_u,aa$3,$u),S$3($u)}var Y$3={current:null};function Z$3(){var _u=Y$3.current;if(_u===null)throw Error(C$5(321));return _u}var ba$3={ReactCurrentDispatcher:Y$3,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$3,IsSomeRendererActing:{current:!1},assign:l$4};react_production_min.Children={map:function(_u,$u,Bu){if(_u==null)return _u;var Ru=[];return X$3(_u,Ru,null,$u,Bu),Ru},forEach:function(_u,$u,Bu){if(_u==null)return _u;$u=R$4(null,null,$u,Bu),V$3(_u,W$5,$u),S$3($u)},count:function(_u){return V$3(_u,function(){return null},null)},toArray:function(_u){var $u=[];return X$3(_u,$u,null,function(Bu){return Bu}),$u},only:function(_u){if(!O$4(_u))throw Error(C$5(143));return _u}};react_production_min.Component=F$4;react_production_min.Fragment=r$5;react_production_min.Profiler=u$4;react_production_min.PureComponent=H$4;react_production_min.StrictMode=t$4;react_production_min.Suspense=y$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$3;react_production_min.cloneElement=function(_u,$u,Bu){if(_u==null)throw Error(C$5(267,_u));var Ru=l$4({},_u.props),Lu=_u.key,Ou=_u.ref,Fu=_u._owner;if($u!=null){if($u.ref!==void 0&&(Ou=$u.ref,Fu=J$3.current),$u.key!==void 0&&(Lu=""+$u.key),_u.type&&_u.type.defaultProps)var Nu=_u.type.defaultProps;for(Vu in $u)K$3.call($u,Vu)&&!L$4.hasOwnProperty(Vu)&&(Ru[Vu]=$u[Vu]===void 0&&Nu!==void 0?Nu[Vu]:$u[Vu])}var Vu=arguments.length-2;if(Vu===1)Ru.children=Bu;else if(1<Vu){Nu=Array(Vu);for(var Uu=0;Uu<Vu;Uu++)Nu[Uu]=arguments[Uu+2];Ru.children=Nu}return{$$typeof:p$3,type:_u.type,key:Lu,ref:Ou,props:Ru,_owner:Fu}};react_production_min.createContext=function(_u,$u){return $u===void 0&&($u=null),_u={$$typeof:w$3,_calculateChangedBits:$u,_currentValue:_u,_currentValue2:_u,_threadCount:0,Provider:null,Consumer:null},_u.Provider={$$typeof:v$5,_context:_u},_u.Consumer=_u};react_production_min.createElement=M$4;react_production_min.createFactory=function(_u){var $u=M$4.bind(null,_u);return $u.type=_u,$u};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_u){return{$$typeof:x$2,render:_u}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(_u){return{$$typeof:A$3,_ctor:_u,_status:-1,_result:null}};react_production_min.memo=function(_u,$u){return{$$typeof:z$2,type:_u,compare:$u===void 0?null:$u}};react_production_min.useCallback=function(_u,$u){return Z$3().useCallback(_u,$u)};react_production_min.useContext=function(_u,$u){return Z$3().useContext(_u,$u)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(_u,$u){return Z$3().useEffect(_u,$u)};react_production_min.useImperativeHandle=function(_u,$u,Bu){return Z$3().useImperativeHandle(_u,$u,Bu)};react_production_min.useLayoutEffect=function(_u,$u){return Z$3().useLayoutEffect(_u,$u)};react_production_min.useMemo=function(_u,$u){return Z$3().useMemo(_u,$u)};react_production_min.useReducer=function(_u,$u,Bu){return Z$3().useReducer(_u,$u,Bu)};react_production_min.useRef=function(_u){return Z$3().useRef(_u)};react_production_min.useState=function(_u){return Z$3().useState(_u)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_u){var $u,Bu,Ru,Lu,Ou;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Fu=null,Nu=null,Vu=function(){if(Fu!==null)try{var $p=_u.unstable_now();Fu(!0,$p),Fu=null}catch(kp){throw setTimeout(Vu,0),kp}},Uu=Date.now();_u.unstable_now=function(){return Date.now()-Uu},$u=function($p){Fu!==null?setTimeout($u,0,$p):(Fu=$p,setTimeout(Vu,0))},Bu=function($p,kp){Nu=setTimeout($p,kp)},Ru=function(){clearTimeout(Nu)},Lu=function(){return!1},Ou=_u.unstable_forceFrameRate=function(){}}else{var Gu=window.performance,zu=window.Date,Hu=window.setTimeout,ju=window.clearTimeout;if(typeof console!="undefined"){var Qu=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Qu!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof Gu=="object"&&typeof Gu.now=="function")_u.unstable_now=function(){return Gu.now()};else{var Xu=zu.now();_u.unstable_now=function(){return zu.now()-Xu}}var Ku=!1,Wu=null,qu=-1,Yu=5,Zu=0;Lu=function(){return _u.unstable_now()>=Zu},Ou=function(){},_u.unstable_forceFrameRate=function($p){0>$p||125<$p?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Yu=0<$p?Math.floor(1e3/$p):5};var _h=new MessageChannel,ep=_h.port2;_h.port1.onmessage=function(){if(Wu!==null){var $p=_u.unstable_now();Zu=$p+Yu;try{Wu(!0,$p)?ep.postMessage(null):(Ku=!1,Wu=null)}catch(kp){throw ep.postMessage(null),kp}}else Ku=!1},$u=function($p){Wu=$p,Ku||(Ku=!0,ep.postMessage(null))},Bu=function($p,kp){qu=Hu(function(){$p(_u.unstable_now())},kp)},Ru=function(){ju(qu),qu=-1}}function ip($p,kp){var Bp=$p.length;$p.push(kp);e:for(;;){var fp=Bp-1>>>1,dp=$p[fp];if(dp!==void 0&&0<Ju(dp,kp))$p[fp]=kp,$p[Bp]=dp,Bp=fp;else break e}}function ap($p){return $p=$p[0],$p===void 0?null:$p}function sp($p){var kp=$p[0];if(kp!==void 0){var Bp=$p.pop();if(Bp!==kp){$p[0]=Bp;e:for(var fp=0,dp=$p.length;fp<dp;){var bp=2*(fp+1)-1,gp=$p[bp],wp=bp+1,Sp=$p[wp];if(gp!==void 0&&0>Ju(gp,Bp))Sp!==void 0&&0>Ju(Sp,gp)?($p[fp]=Sp,$p[wp]=Bp,fp=wp):($p[fp]=gp,$p[bp]=Bp,fp=bp);else if(Sp!==void 0&&0>Ju(Sp,Bp))$p[fp]=Sp,$p[wp]=Bp,fp=wp;else break e}}return kp}return null}function Ju($p,kp){var Bp=$p.sortIndex-kp.sortIndex;return Bp!==0?Bp:$p.id-kp.id}var _f=[],np=[],tp=1,rp=null,op=3,lp=!1,up=!1,cp=!1;function Ap($p){for(var kp=ap(np);kp!==null;){if(kp.callback===null)sp(np);else if(kp.startTime<=$p)sp(np),kp.sortIndex=kp.expirationTime,ip(_f,kp);else break;kp=ap(np)}}function yp($p){if(cp=!1,Ap($p),!up)if(ap(_f)!==null)up=!0,$u(Ip);else{var kp=ap(np);kp!==null&&Bu(yp,kp.startTime-$p)}}function Ip($p,kp){up=!1,cp&&(cp=!1,Ru()),lp=!0;var Bp=op;try{for(Ap(kp),rp=ap(_f);rp!==null&&(!(rp.expirationTime>kp)||$p&&!Lu());){var fp=rp.callback;if(fp!==null){rp.callback=null,op=rp.priorityLevel;var dp=fp(rp.expirationTime<=kp);kp=_u.unstable_now(),typeof dp=="function"?rp.callback=dp:rp===ap(_f)&&sp(_f),Ap(kp)}else sp(_f);rp=ap(_f)}if(rp!==null)var bp=!0;else{var gp=ap(np);gp!==null&&Bu(yp,gp.startTime-kp),bp=!1}return bp}finally{rp=null,op=Bp,lp=!1}}function Ep($p){switch($p){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Vp=Ou;_u.unstable_IdlePriority=5,_u.unstable_ImmediatePriority=1,_u.unstable_LowPriority=4,_u.unstable_NormalPriority=3,_u.unstable_Profiling=null,_u.unstable_UserBlockingPriority=2,_u.unstable_cancelCallback=function($p){$p.callback=null},_u.unstable_continueExecution=function(){up||lp||(up=!0,$u(Ip))},_u.unstable_getCurrentPriorityLevel=function(){return op},_u.unstable_getFirstCallbackNode=function(){return ap(_f)},_u.unstable_next=function($p){switch(op){case 1:case 2:case 3:var kp=3;break;default:kp=op}var Bp=op;op=kp;try{return $p()}finally{op=Bp}},_u.unstable_pauseExecution=function(){},_u.unstable_requestPaint=Vp,_u.unstable_runWithPriority=function($p,kp){switch($p){case 1:case 2:case 3:case 4:case 5:break;default:$p=3}var Bp=op;op=$p;try{return kp()}finally{op=Bp}},_u.unstable_scheduleCallback=function($p,kp,Bp){var fp=_u.unstable_now();if(typeof Bp=="object"&&Bp!==null){var dp=Bp.delay;dp=typeof dp=="number"&&0<dp?fp+dp:fp,Bp=typeof Bp.timeout=="number"?Bp.timeout:Ep($p)}else Bp=Ep($p),dp=fp;return Bp=dp+Bp,$p={id:tp++,callback:kp,priorityLevel:$p,startTime:dp,expirationTime:Bp,sortIndex:-1},dp>fp?($p.sortIndex=dp,ip(np,$p),ap(_f)===null&&$p===ap(np)&&(cp?Ru():cp=!0,Bu(yp,dp-fp))):($p.sortIndex=Bp,ip(_f,$p),up||lp||(up=!0,$u(Ip))),$p},_u.unstable_shouldYield=function(){var $p=_u.unstable_now();Ap($p);var kp=ap(_f);return kp!==rp&&rp!==null&&kp!==null&&kp.callback!==null&&kp.startTime<=$p&&kp.expirationTime<rp.expirationTime||Lu()},_u.unstable_wrapCallback=function($p){var kp=op;return function(){var Bp=op;op=kp;try{return $p.apply(this,arguments)}finally{op=Bp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=react$1.exports,n$4=objectAssign,r$4=scheduler.exports;function u$3(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Bu=1;Bu<arguments.length;Bu++)$u+="&args[]="+encodeURIComponent(arguments[Bu]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$2)throw Error(u$3(227));function ba$2(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu){var Uu=Array.prototype.slice.call(arguments,3);try{$u.apply(Bu,Uu)}catch(Gu){this.onError(Gu)}}var da$2=!1,ea$2=null,fa$2=!1,ha$2=null,ia$2={onError:function(_u){da$2=!0,ea$2=_u}};function ja$2(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu){da$2=!1,ea$2=null,ba$2.apply(ia$2,arguments)}function ka$2(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu){if(ja$2.apply(this,arguments),da$2){if(da$2){var Uu=ea$2;da$2=!1,ea$2=null}else throw Error(u$3(198));fa$2||(fa$2=!0,ha$2=Uu)}}var la$1=null,ma$1=null,na$1=null;function oa$1(_u,$u,Bu){var Ru=_u.type||"unknown-event";_u.currentTarget=na$1(Bu),ka$2(Ru,$u,void 0,_u),_u.currentTarget=null}var pa$1=null,qa$2={};function ra$1(){if(pa$1)for(var _u in qa$2){var $u=qa$2[_u],Bu=pa$1.indexOf(_u);if(!(-1<Bu))throw Error(u$3(96,_u));if(!sa$1[Bu]){if(!$u.extractEvents)throw Error(u$3(97,_u));sa$1[Bu]=$u,Bu=$u.eventTypes;for(var Ru in Bu){var Lu=void 0,Ou=Bu[Ru],Fu=$u,Nu=Ru;if(ta$1.hasOwnProperty(Nu))throw Error(u$3(99,Nu));ta$1[Nu]=Ou;var Vu=Ou.phasedRegistrationNames;if(Vu){for(Lu in Vu)Vu.hasOwnProperty(Lu)&&ua$1(Vu[Lu],Fu,Nu);Lu=!0}else Ou.registrationName?(ua$1(Ou.registrationName,Fu,Nu),Lu=!0):Lu=!1;if(!Lu)throw Error(u$3(98,Ru,_u))}}}}function ua$1(_u,$u,Bu){if(va$1[_u])throw Error(u$3(100,_u));va$1[_u]=$u,wa$1[_u]=$u.eventTypes[Bu].dependencies}var sa$1=[],ta$1={},va$1={},wa$1={};function xa$1(_u){var $u=!1,Bu;for(Bu in _u)if(_u.hasOwnProperty(Bu)){var Ru=_u[Bu];if(!qa$2.hasOwnProperty(Bu)||qa$2[Bu]!==Ru){if(qa$2[Bu])throw Error(u$3(102,Bu));qa$2[Bu]=Ru,$u=!0}}$u&&ra$1()}var ya$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za$2=null,Aa$1=null,Ba$2=null;function Ca$1(_u){if(_u=ma$1(_u)){if(typeof za$2!="function")throw Error(u$3(280));var $u=_u.stateNode;$u&&($u=la$1($u),za$2(_u.stateNode,_u.type,$u))}}function Da$2(_u){Aa$1?Ba$2?Ba$2.push(_u):Ba$2=[_u]:Aa$1=_u}function Ea$1(){if(Aa$1){var _u=Aa$1,$u=Ba$2;if(Ba$2=Aa$1=null,Ca$1(_u),$u)for(_u=0;_u<$u.length;_u++)Ca$1($u[_u])}}function Fa$2(_u,$u){return _u($u)}function Ga$2(_u,$u,Bu,Ru,Lu){return _u($u,Bu,Ru,Lu)}function Ha$2(){}var Ia$1=Fa$2,Ja$2=!1,Ka$2=!1;function La$2(){(Aa$1!==null||Ba$2!==null)&&(Ha$2(),Ea$1())}function Ma$2(_u,$u,Bu){if(Ka$2)return _u($u,Bu);Ka$2=!0;try{return Ia$1(_u,$u,Bu)}finally{Ka$2=!1,La$2()}}var Na$2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa$2=Object.prototype.hasOwnProperty,Pa$1={},Qa$2={};function Ra$2(_u){return Oa$2.call(Qa$2,_u)?!0:Oa$2.call(Pa$1,_u)?!1:Na$2.test(_u)?Qa$2[_u]=!0:(Pa$1[_u]=!0,!1)}function Sa$2(_u,$u,Bu,Ru){if(Bu!==null&&Bu.type===0)return!1;switch(typeof $u){case"function":case"symbol":return!0;case"boolean":return Ru?!1:Bu!==null?!Bu.acceptsBooleans:(_u=_u.toLowerCase().slice(0,5),_u!=="data-"&&_u!=="aria-");default:return!1}}function Ta$2(_u,$u,Bu,Ru){if($u===null||typeof $u=="undefined"||Sa$2(_u,$u,Bu,Ru))return!0;if(Ru)return!1;if(Bu!==null)switch(Bu.type){case 3:return!$u;case 4:return $u===!1;case 5:return isNaN($u);case 6:return isNaN($u)||1>$u}return!1}function v$4(_u,$u,Bu,Ru,Lu,Ou){this.acceptsBooleans=$u===2||$u===3||$u===4,this.attributeName=Ru,this.attributeNamespace=Lu,this.mustUseProperty=Bu,this.propertyName=_u,this.type=$u,this.sanitizeURL=Ou}var C$4={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_u){C$4[_u]=new v$4(_u,0,!1,_u,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_u){var $u=_u[0];C$4[$u]=new v$4($u,1,!1,_u[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_u){C$4[_u]=new v$4(_u,2,!1,_u.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_u){C$4[_u]=new v$4(_u,2,!1,_u,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_u){C$4[_u]=new v$4(_u,3,!1,_u.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(_u){C$4[_u]=new v$4(_u,3,!0,_u,null,!1)});["capture","download"].forEach(function(_u){C$4[_u]=new v$4(_u,4,!1,_u,null,!1)});["cols","rows","size","span"].forEach(function(_u){C$4[_u]=new v$4(_u,6,!1,_u,null,!1)});["rowSpan","start"].forEach(function(_u){C$4[_u]=new v$4(_u,5,!1,_u.toLowerCase(),null,!1)});var Ua$2=/[\-:]([a-z])/g;function Va$2(_u){return _u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_u){var $u=_u.replace(Ua$2,Va$2);C$4[$u]=new v$4($u,1,!1,_u,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_u){var $u=_u.replace(Ua$2,Va$2);C$4[$u]=new v$4($u,1,!1,_u,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(_u){var $u=_u.replace(Ua$2,Va$2);C$4[$u]=new v$4($u,1,!1,_u,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(_u){C$4[_u]=new v$4(_u,1,!1,_u.toLowerCase(),null,!1)});C$4.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(_u){C$4[_u]=new v$4(_u,1,!1,_u.toLowerCase(),null,!0)});var Wa$2=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa$2.hasOwnProperty("ReactCurrentDispatcher")||(Wa$2.ReactCurrentDispatcher={current:null});Wa$2.hasOwnProperty("ReactCurrentBatchConfig")||(Wa$2.ReactCurrentBatchConfig={suspense:null});function Xa$2(_u,$u,Bu,Ru){var Lu=C$4.hasOwnProperty($u)?C$4[$u]:null,Ou=Lu!==null?Lu.type===0:Ru?!1:!(!(2<$u.length)||$u[0]!=="o"&&$u[0]!=="O"||$u[1]!=="n"&&$u[1]!=="N");Ou||(Ta$2($u,Bu,Lu,Ru)&&(Bu=null),Ru||Lu===null?Ra$2($u)&&(Bu===null?_u.removeAttribute($u):_u.setAttribute($u,""+Bu)):Lu.mustUseProperty?_u[Lu.propertyName]=Bu===null?Lu.type===3?!1:"":Bu:($u=Lu.attributeName,Ru=Lu.attributeNamespace,Bu===null?_u.removeAttribute($u):(Lu=Lu.type,Bu=Lu===3||Lu===4&&Bu===!0?"":""+Bu,Ru?_u.setAttributeNS(Ru,$u,Bu):_u.setAttribute($u,Bu))))}var Ya$2=/^(.*)[\\\/]/,E$3=typeof Symbol=="function"&&Symbol.for,Za$2=E$3?Symbol.for("react.element"):60103,$a$2=E$3?Symbol.for("react.portal"):60106,ab$1=E$3?Symbol.for("react.fragment"):60107,bb$1=E$3?Symbol.for("react.strict_mode"):60108,cb$1=E$3?Symbol.for("react.profiler"):60114,db$1=E$3?Symbol.for("react.provider"):60109,eb$1=E$3?Symbol.for("react.context"):60110,fb$1=E$3?Symbol.for("react.concurrent_mode"):60111,gb$1=E$3?Symbol.for("react.forward_ref"):60112,hb$1=E$3?Symbol.for("react.suspense"):60113,ib$1=E$3?Symbol.for("react.suspense_list"):60120,jb$1=E$3?Symbol.for("react.memo"):60115,kb$1=E$3?Symbol.for("react.lazy"):60116,lb$1=E$3?Symbol.for("react.block"):60121,mb$1=typeof Symbol=="function"&&Symbol.iterator;function nb$1(_u){return _u===null||typeof _u!="object"?null:(_u=mb$1&&_u[mb$1]||_u["@@iterator"],typeof _u=="function"?_u:null)}function ob$1(_u){if(_u._status===-1){_u._status=0;var $u=_u._ctor;$u=$u(),_u._result=$u,$u.then(function(Bu){_u._status===0&&(Bu=Bu.default,_u._status=1,_u._result=Bu)},function(Bu){_u._status===0&&(_u._status=2,_u._result=Bu)})}}function pb$1(_u){if(_u==null)return null;if(typeof _u=="function")return _u.displayName||_u.name||null;if(typeof _u=="string")return _u;switch(_u){case ab$1:return"Fragment";case $a$2:return"Portal";case cb$1:return"Profiler";case bb$1:return"StrictMode";case hb$1:return"Suspense";case ib$1:return"SuspenseList"}if(typeof _u=="object")switch(_u.$$typeof){case eb$1:return"Context.Consumer";case db$1:return"Context.Provider";case gb$1:var $u=_u.render;return $u=$u.displayName||$u.name||"",_u.displayName||($u!==""?"ForwardRef("+$u+")":"ForwardRef");case jb$1:return pb$1(_u.type);case lb$1:return pb$1(_u.render);case kb$1:if(_u=_u._status===1?_u._result:null)return pb$1(_u)}return null}function qb$1(_u){var $u="";do{e:switch(_u.tag){case 3:case 4:case 6:case 7:case 10:case 9:var Bu="";break e;default:var Ru=_u._debugOwner,Lu=_u._debugSource,Ou=pb$1(_u.type);Bu=null,Ru&&(Bu=pb$1(Ru.type)),Ru=Ou,Ou="",Lu?Ou=" (at "+Lu.fileName.replace(Ya$2,"")+":"+Lu.lineNumber+")":Bu&&(Ou=" (created by "+Bu+")"),Bu=`
    in `+(Ru||"Unknown")+Ou}$u+=Bu,_u=_u.return}while(_u);return $u}function rb$1(_u){switch(typeof _u){case"boolean":case"number":case"object":case"string":case"undefined":return _u;default:return""}}function sb$1(_u){var $u=_u.type;return(_u=_u.nodeName)&&_u.toLowerCase()==="input"&&($u==="checkbox"||$u==="radio")}function tb$1(_u){var $u=sb$1(_u)?"checked":"value",Bu=Object.getOwnPropertyDescriptor(_u.constructor.prototype,$u),Ru=""+_u[$u];if(!_u.hasOwnProperty($u)&&typeof Bu!="undefined"&&typeof Bu.get=="function"&&typeof Bu.set=="function"){var Lu=Bu.get,Ou=Bu.set;return Object.defineProperty(_u,$u,{configurable:!0,get:function(){return Lu.call(this)},set:function(Fu){Ru=""+Fu,Ou.call(this,Fu)}}),Object.defineProperty(_u,$u,{enumerable:Bu.enumerable}),{getValue:function(){return Ru},setValue:function(Fu){Ru=""+Fu},stopTracking:function(){_u._valueTracker=null,delete _u[$u]}}}}function xb$1(_u){_u._valueTracker||(_u._valueTracker=tb$1(_u))}function yb$1(_u){if(!_u)return!1;var $u=_u._valueTracker;if(!$u)return!0;var Bu=$u.getValue(),Ru="";return _u&&(Ru=sb$1(_u)?_u.checked?"true":"false":_u.value),_u=Ru,_u!==Bu?($u.setValue(_u),!0):!1}function zb$1(_u,$u){var Bu=$u.checked;return n$4({},$u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Bu!=null?Bu:_u._wrapperState.initialChecked})}function Ab$1(_u,$u){var Bu=$u.defaultValue==null?"":$u.defaultValue,Ru=$u.checked!=null?$u.checked:$u.defaultChecked;Bu=rb$1($u.value!=null?$u.value:Bu),_u._wrapperState={initialChecked:Ru,initialValue:Bu,controlled:$u.type==="checkbox"||$u.type==="radio"?$u.checked!=null:$u.value!=null}}function Bb$1(_u,$u){$u=$u.checked,$u!=null&&Xa$2(_u,"checked",$u,!1)}function Cb$1(_u,$u){Bb$1(_u,$u);var Bu=rb$1($u.value),Ru=$u.type;if(Bu!=null)Ru==="number"?(Bu===0&&_u.value===""||_u.value!=Bu)&&(_u.value=""+Bu):_u.value!==""+Bu&&(_u.value=""+Bu);else if(Ru==="submit"||Ru==="reset"){_u.removeAttribute("value");return}$u.hasOwnProperty("value")?Db$1(_u,$u.type,Bu):$u.hasOwnProperty("defaultValue")&&Db$1(_u,$u.type,rb$1($u.defaultValue)),$u.checked==null&&$u.defaultChecked!=null&&(_u.defaultChecked=!!$u.defaultChecked)}function Eb$1(_u,$u,Bu){if($u.hasOwnProperty("value")||$u.hasOwnProperty("defaultValue")){var Ru=$u.type;if(!(Ru!=="submit"&&Ru!=="reset"||$u.value!==void 0&&$u.value!==null))return;$u=""+_u._wrapperState.initialValue,Bu||$u===_u.value||(_u.value=$u),_u.defaultValue=$u}Bu=_u.name,Bu!==""&&(_u.name=""),_u.defaultChecked=!!_u._wrapperState.initialChecked,Bu!==""&&(_u.name=Bu)}function Db$1(_u,$u,Bu){($u!=="number"||_u.ownerDocument.activeElement!==_u)&&(Bu==null?_u.defaultValue=""+_u._wrapperState.initialValue:_u.defaultValue!==""+Bu&&(_u.defaultValue=""+Bu))}function Fb$1(_u){var $u="";return aa$2.Children.forEach(_u,function(Bu){Bu!=null&&($u+=Bu)}),$u}function Gb$1(_u,$u){return _u=n$4({children:void 0},$u),($u=Fb$1($u.children))&&(_u.children=$u),_u}function Hb$1(_u,$u,Bu,Ru){if(_u=_u.options,$u){$u={};for(var Lu=0;Lu<Bu.length;Lu++)$u["$"+Bu[Lu]]=!0;for(Bu=0;Bu<_u.length;Bu++)Lu=$u.hasOwnProperty("$"+_u[Bu].value),_u[Bu].selected!==Lu&&(_u[Bu].selected=Lu),Lu&&Ru&&(_u[Bu].defaultSelected=!0)}else{for(Bu=""+rb$1(Bu),$u=null,Lu=0;Lu<_u.length;Lu++){if(_u[Lu].value===Bu){_u[Lu].selected=!0,Ru&&(_u[Lu].defaultSelected=!0);return}$u!==null||_u[Lu].disabled||($u=_u[Lu])}$u!==null&&($u.selected=!0)}}function Ib$1(_u,$u){if($u.dangerouslySetInnerHTML!=null)throw Error(u$3(91));return n$4({},$u,{value:void 0,defaultValue:void 0,children:""+_u._wrapperState.initialValue})}function Jb$1(_u,$u){var Bu=$u.value;if(Bu==null){if(Bu=$u.children,$u=$u.defaultValue,Bu!=null){if($u!=null)throw Error(u$3(92));if(Array.isArray(Bu)){if(!(1>=Bu.length))throw Error(u$3(93));Bu=Bu[0]}$u=Bu}$u==null&&($u=""),Bu=$u}_u._wrapperState={initialValue:rb$1(Bu)}}function Kb$1(_u,$u){var Bu=rb$1($u.value),Ru=rb$1($u.defaultValue);Bu!=null&&(Bu=""+Bu,Bu!==_u.value&&(_u.value=Bu),$u.defaultValue==null&&_u.defaultValue!==Bu&&(_u.defaultValue=Bu)),Ru!=null&&(_u.defaultValue=""+Ru)}function Lb$1(_u){var $u=_u.textContent;$u===_u._wrapperState.initialValue&&$u!==""&&$u!==null&&(_u.value=$u)}var Mb$1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb$1(_u){switch(_u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob$1(_u,$u){return _u==null||_u==="http://www.w3.org/1999/xhtml"?Nb$1($u):_u==="http://www.w3.org/2000/svg"&&$u==="foreignObject"?"http://www.w3.org/1999/xhtml":_u}var Pb$1,Qb$1=function(_u){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function($u,Bu,Ru,Lu){MSApp.execUnsafeLocalFunction(function(){return _u($u,Bu,Ru,Lu)})}:_u}(function(_u,$u){if(_u.namespaceURI!==Mb$1.svg||"innerHTML"in _u)_u.innerHTML=$u;else{for(Pb$1=Pb$1||document.createElement("div"),Pb$1.innerHTML="<svg>"+$u.valueOf().toString()+"</svg>",$u=Pb$1.firstChild;_u.firstChild;)_u.removeChild(_u.firstChild);for(;$u.firstChild;)_u.appendChild($u.firstChild)}});function Rb$1(_u,$u){if($u){var Bu=_u.firstChild;if(Bu&&Bu===_u.lastChild&&Bu.nodeType===3){Bu.nodeValue=$u;return}}_u.textContent=$u}function Sb$1(_u,$u){var Bu={};return Bu[_u.toLowerCase()]=$u.toLowerCase(),Bu["Webkit"+_u]="webkit"+$u,Bu["Moz"+_u]="moz"+$u,Bu}var Tb$1={animationend:Sb$1("Animation","AnimationEnd"),animationiteration:Sb$1("Animation","AnimationIteration"),animationstart:Sb$1("Animation","AnimationStart"),transitionend:Sb$1("Transition","TransitionEnd")},Ub$1={},Vb$1={};ya$1&&(Vb$1=document.createElement("div").style,"AnimationEvent"in window||(delete Tb$1.animationend.animation,delete Tb$1.animationiteration.animation,delete Tb$1.animationstart.animation),"TransitionEvent"in window||delete Tb$1.transitionend.transition);function Wb$1(_u){if(Ub$1[_u])return Ub$1[_u];if(!Tb$1[_u])return _u;var $u=Tb$1[_u],Bu;for(Bu in $u)if($u.hasOwnProperty(Bu)&&Bu in Vb$1)return Ub$1[_u]=$u[Bu];return _u}var Xb$1=Wb$1("animationend"),Yb$1=Wb$1("animationiteration"),Zb$1=Wb$1("animationstart"),$b$1=Wb$1("transitionend"),ac$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc$1=new(typeof WeakMap=="function"?WeakMap:Map);function cc$1(_u){var $u=bc$1.get(_u);return $u===void 0&&($u=new Map,bc$1.set(_u,$u)),$u}function dc$1(_u){var $u=_u,Bu=_u;if(_u.alternate)for(;$u.return;)$u=$u.return;else{_u=$u;do $u=_u,($u.effectTag&1026)!==0&&(Bu=$u.return),_u=$u.return;while(_u)}return $u.tag===3?Bu:null}function ec$1(_u){if(_u.tag===13){var $u=_u.memoizedState;if($u===null&&(_u=_u.alternate,_u!==null&&($u=_u.memoizedState)),$u!==null)return $u.dehydrated}return null}function fc$1(_u){if(dc$1(_u)!==_u)throw Error(u$3(188))}function gc$1(_u){var $u=_u.alternate;if(!$u){if($u=dc$1(_u),$u===null)throw Error(u$3(188));return $u!==_u?null:_u}for(var Bu=_u,Ru=$u;;){var Lu=Bu.return;if(Lu===null)break;var Ou=Lu.alternate;if(Ou===null){if(Ru=Lu.return,Ru!==null){Bu=Ru;continue}break}if(Lu.child===Ou.child){for(Ou=Lu.child;Ou;){if(Ou===Bu)return fc$1(Lu),_u;if(Ou===Ru)return fc$1(Lu),$u;Ou=Ou.sibling}throw Error(u$3(188))}if(Bu.return!==Ru.return)Bu=Lu,Ru=Ou;else{for(var Fu=!1,Nu=Lu.child;Nu;){if(Nu===Bu){Fu=!0,Bu=Lu,Ru=Ou;break}if(Nu===Ru){Fu=!0,Ru=Lu,Bu=Ou;break}Nu=Nu.sibling}if(!Fu){for(Nu=Ou.child;Nu;){if(Nu===Bu){Fu=!0,Bu=Ou,Ru=Lu;break}if(Nu===Ru){Fu=!0,Ru=Ou,Bu=Lu;break}Nu=Nu.sibling}if(!Fu)throw Error(u$3(189))}}if(Bu.alternate!==Ru)throw Error(u$3(190))}if(Bu.tag!==3)throw Error(u$3(188));return Bu.stateNode.current===Bu?_u:$u}function hc$1(_u){if(_u=gc$1(_u),!_u)return null;for(var $u=_u;;){if($u.tag===5||$u.tag===6)return $u;if($u.child)$u.child.return=$u,$u=$u.child;else{if($u===_u)break;for(;!$u.sibling;){if(!$u.return||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}}return null}function ic$1(_u,$u){if($u==null)throw Error(u$3(30));return _u==null?$u:Array.isArray(_u)?Array.isArray($u)?(_u.push.apply(_u,$u),_u):(_u.push($u),_u):Array.isArray($u)?[_u].concat($u):[_u,$u]}function jc(_u,$u,Bu){Array.isArray(_u)?_u.forEach($u,Bu):_u&&$u.call(Bu,_u)}var kc=null;function lc$1(_u){if(_u){var $u=_u._dispatchListeners,Bu=_u._dispatchInstances;if(Array.isArray($u))for(var Ru=0;Ru<$u.length&&!_u.isPropagationStopped();Ru++)oa$1(_u,$u[Ru],Bu[Ru]);else $u&&oa$1(_u,$u,Bu);_u._dispatchListeners=null,_u._dispatchInstances=null,_u.isPersistent()||_u.constructor.release(_u)}}function mc$1(_u){if(_u!==null&&(kc=ic$1(kc,_u)),_u=kc,kc=null,_u){if(jc(_u,lc$1),kc)throw Error(u$3(95));if(fa$2)throw _u=ha$2,fa$2=!1,ha$2=null,_u}}function nc$1(_u){return _u=_u.target||_u.srcElement||window,_u.correspondingUseElement&&(_u=_u.correspondingUseElement),_u.nodeType===3?_u.parentNode:_u}function oc$1(_u){if(!ya$1)return!1;_u="on"+_u;var $u=_u in document;return $u||($u=document.createElement("div"),$u.setAttribute(_u,"return;"),$u=typeof $u[_u]=="function"),$u}var pc$1=[];function qc$1(_u){_u.topLevelType=null,_u.nativeEvent=null,_u.targetInst=null,_u.ancestors.length=0,10>pc$1.length&&pc$1.push(_u)}function rc$1(_u,$u,Bu,Ru){if(pc$1.length){var Lu=pc$1.pop();return Lu.topLevelType=_u,Lu.eventSystemFlags=Ru,Lu.nativeEvent=$u,Lu.targetInst=Bu,Lu}return{topLevelType:_u,eventSystemFlags:Ru,nativeEvent:$u,targetInst:Bu,ancestors:[]}}function sc$1(_u){var $u=_u.targetInst,Bu=$u;do{if(!Bu){_u.ancestors.push(Bu);break}var Ru=Bu;if(Ru.tag===3)Ru=Ru.stateNode.containerInfo;else{for(;Ru.return;)Ru=Ru.return;Ru=Ru.tag!==3?null:Ru.stateNode.containerInfo}if(!Ru)break;$u=Bu.tag,$u!==5&&$u!==6||_u.ancestors.push(Bu),Bu=tc$1(Ru)}while(Bu);for(Bu=0;Bu<_u.ancestors.length;Bu++){$u=_u.ancestors[Bu];var Lu=nc$1(_u.nativeEvent);Ru=_u.topLevelType;var Ou=_u.nativeEvent,Fu=_u.eventSystemFlags;Bu===0&&(Fu|=64);for(var Nu=null,Vu=0;Vu<sa$1.length;Vu++){var Uu=sa$1[Vu];Uu&&(Uu=Uu.extractEvents(Ru,$u,Ou,Lu,Fu))&&(Nu=ic$1(Nu,Uu))}mc$1(Nu)}}function uc$1(_u,$u,Bu){if(!Bu.has(_u)){switch(_u){case"scroll":vc$1($u,"scroll",!0);break;case"focus":case"blur":vc$1($u,"focus",!0),vc$1($u,"blur",!0),Bu.set("blur",null),Bu.set("focus",null);break;case"cancel":case"close":oc$1(_u)&&vc$1($u,_u,!0);break;case"invalid":case"submit":case"reset":break;default:ac$1.indexOf(_u)===-1&&F$3(_u,$u)}Bu.set(_u,null)}}var wc,xc,yc$1,zc$1=!1,Ac$1=[],Bc=null,Cc=null,Dc=null,Ec$1=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc$1(_u,$u){var Bu=cc$1($u);Hc.forEach(function(Ru){uc$1(Ru,$u,Bu)}),Ic.forEach(function(Ru){uc$1(Ru,$u,Bu)})}function Kc$1(_u,$u,Bu,Ru,Lu){return{blockedOn:_u,topLevelType:$u,eventSystemFlags:Bu|32,nativeEvent:Lu,container:Ru}}function Lc(_u,$u){switch(_u){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec$1.delete($u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete($u.pointerId)}}function Mc(_u,$u,Bu,Ru,Lu,Ou){return _u===null||_u.nativeEvent!==Ou?(_u=Kc$1($u,Bu,Ru,Lu,Ou),$u!==null&&($u=Nc($u),$u!==null&&xc($u)),_u):(_u.eventSystemFlags|=Ru,_u)}function Oc(_u,$u,Bu,Ru,Lu){switch($u){case"focus":return Bc=Mc(Bc,_u,$u,Bu,Ru,Lu),!0;case"dragenter":return Cc=Mc(Cc,_u,$u,Bu,Ru,Lu),!0;case"mouseover":return Dc=Mc(Dc,_u,$u,Bu,Ru,Lu),!0;case"pointerover":var Ou=Lu.pointerId;return Ec$1.set(Ou,Mc(Ec$1.get(Ou)||null,_u,$u,Bu,Ru,Lu)),!0;case"gotpointercapture":return Ou=Lu.pointerId,Fc.set(Ou,Mc(Fc.get(Ou)||null,_u,$u,Bu,Ru,Lu)),!0}return!1}function Pc(_u){var $u=tc$1(_u.target);if($u!==null){var Bu=dc$1($u);if(Bu!==null){if($u=Bu.tag,$u===13){if($u=ec$1(Bu),$u!==null){_u.blockedOn=$u,r$4.unstable_runWithPriority(_u.priority,function(){yc$1(Bu)});return}}else if($u===3&&Bu.stateNode.hydrate){_u.blockedOn=Bu.tag===3?Bu.stateNode.containerInfo:null;return}}}_u.blockedOn=null}function Qc(_u){if(_u.blockedOn!==null)return!1;var $u=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);if($u!==null){var Bu=Nc($u);return Bu!==null&&xc(Bu),_u.blockedOn=$u,!1}return!0}function Sc(_u,$u,Bu){Qc(_u)&&Bu.delete($u)}function Tc(){for(zc$1=!1;0<Ac$1.length;){var _u=Ac$1[0];if(_u.blockedOn!==null){_u=Nc(_u.blockedOn),_u!==null&&wc(_u);break}var $u=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);$u!==null?_u.blockedOn=$u:Ac$1.shift()}Bc!==null&&Qc(Bc)&&(Bc=null),Cc!==null&&Qc(Cc)&&(Cc=null),Dc!==null&&Qc(Dc)&&(Dc=null),Ec$1.forEach(Sc),Fc.forEach(Sc)}function Uc$1(_u,$u){_u.blockedOn===$u&&(_u.blockedOn=null,zc$1||(zc$1=!0,r$4.unstable_scheduleCallback(r$4.unstable_NormalPriority,Tc)))}function Vc$1(_u){function $u(Lu){return Uc$1(Lu,_u)}if(0<Ac$1.length){Uc$1(Ac$1[0],_u);for(var Bu=1;Bu<Ac$1.length;Bu++){var Ru=Ac$1[Bu];Ru.blockedOn===_u&&(Ru.blockedOn=null)}}for(Bc!==null&&Uc$1(Bc,_u),Cc!==null&&Uc$1(Cc,_u),Dc!==null&&Uc$1(Dc,_u),Ec$1.forEach($u),Fc.forEach($u),Bu=0;Bu<Gc.length;Bu++)Ru=Gc[Bu],Ru.blockedOn===_u&&(Ru.blockedOn=null);for(;0<Gc.length&&(Bu=Gc[0],Bu.blockedOn===null);)Pc(Bu),Bu.blockedOn===null&&Gc.shift()}var Wc={},Yc$1=new Map,Zc$1=new Map,$c$1=["abort","abort",Xb$1,"animationEnd",Yb$1,"animationIteration",Zb$1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b$1,"transitionEnd","waiting","waiting"];function ad(_u,$u){for(var Bu=0;Bu<_u.length;Bu+=2){var Ru=_u[Bu],Lu=_u[Bu+1],Ou="on"+(Lu[0].toUpperCase()+Lu.slice(1));Ou={phasedRegistrationNames:{bubbled:Ou,captured:Ou+"Capture"},dependencies:[Ru],eventPriority:$u},Zc$1.set(Ru,$u),Yc$1.set(Ru,Ou),Wc[Lu]=Ou}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad($c$1,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc$1.set(bd[cd],0);var dd=r$4.unstable_UserBlockingPriority,ed$1=r$4.unstable_runWithPriority,fd=!0;function F$3(_u,$u){vc$1($u,_u,!1)}function vc$1(_u,$u,Bu){var Ru=Zc$1.get($u);switch(Ru===void 0?2:Ru){case 0:Ru=gd.bind(null,$u,1,_u);break;case 1:Ru=hd.bind(null,$u,1,_u);break;default:Ru=id.bind(null,$u,1,_u)}Bu?_u.addEventListener($u,Ru,!0):_u.addEventListener($u,Ru,!1)}function gd(_u,$u,Bu,Ru){Ja$2||Ha$2();var Lu=id,Ou=Ja$2;Ja$2=!0;try{Ga$2(Lu,_u,$u,Bu,Ru)}finally{(Ja$2=Ou)||La$2()}}function hd(_u,$u,Bu,Ru){ed$1(dd,id.bind(null,_u,$u,Bu,Ru))}function id(_u,$u,Bu,Ru){if(fd)if(0<Ac$1.length&&-1<Hc.indexOf(_u))_u=Kc$1(null,_u,$u,Bu,Ru),Ac$1.push(_u);else{var Lu=Rc(_u,$u,Bu,Ru);if(Lu===null)Lc(_u,Ru);else if(-1<Hc.indexOf(_u))_u=Kc$1(Lu,_u,$u,Bu,Ru),Ac$1.push(_u);else if(!Oc(Lu,_u,$u,Bu,Ru)){Lc(_u,Ru),_u=rc$1(_u,Ru,null,$u);try{Ma$2(sc$1,_u)}finally{qc$1(_u)}}}}function Rc(_u,$u,Bu,Ru){if(Bu=nc$1(Ru),Bu=tc$1(Bu),Bu!==null){var Lu=dc$1(Bu);if(Lu===null)Bu=null;else{var Ou=Lu.tag;if(Ou===13){if(Bu=ec$1(Lu),Bu!==null)return Bu;Bu=null}else if(Ou===3){if(Lu.stateNode.hydrate)return Lu.tag===3?Lu.stateNode.containerInfo:null;Bu=null}else Lu!==Bu&&(Bu=null)}}_u=rc$1(_u,Ru,Bu,$u);try{Ma$2(sc$1,_u)}finally{qc$1(_u)}return null}var jd$1={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd$1=["Webkit","ms","Moz","O"];Object.keys(jd$1).forEach(function(_u){kd$1.forEach(function($u){$u=$u+_u.charAt(0).toUpperCase()+_u.substring(1),jd$1[$u]=jd$1[_u]})});function ld(_u,$u,Bu){return $u==null||typeof $u=="boolean"||$u===""?"":Bu||typeof $u!="number"||$u===0||jd$1.hasOwnProperty(_u)&&jd$1[_u]?(""+$u).trim():$u+"px"}function md(_u,$u){_u=_u.style;for(var Bu in $u)if($u.hasOwnProperty(Bu)){var Ru=Bu.indexOf("--")===0,Lu=ld(Bu,$u[Bu],Ru);Bu==="float"&&(Bu="cssFloat"),Ru?_u.setProperty(Bu,Lu):_u[Bu]=Lu}}var nd=n$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(_u,$u){if($u){if(nd[_u]&&($u.children!=null||$u.dangerouslySetInnerHTML!=null))throw Error(u$3(137,_u,""));if($u.dangerouslySetInnerHTML!=null){if($u.children!=null)throw Error(u$3(60));if(!(typeof $u.dangerouslySetInnerHTML=="object"&&"__html"in $u.dangerouslySetInnerHTML))throw Error(u$3(61))}if($u.style!=null&&typeof $u.style!="object")throw Error(u$3(62,""))}}function pd(_u,$u){if(_u.indexOf("-")===-1)return typeof $u.is=="string";switch(_u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb$1.html;function rd(_u,$u){_u=_u.nodeType===9||_u.nodeType===11?_u:_u.ownerDocument;var Bu=cc$1(_u);$u=wa$1[$u];for(var Ru=0;Ru<$u.length;Ru++)uc$1($u[Ru],_u,Bu)}function sd(){}function td$1(_u){if(_u=_u||(typeof document!="undefined"?document:void 0),typeof _u=="undefined")return null;try{return _u.activeElement||_u.body}catch{return _u.body}}function ud(_u){for(;_u&&_u.firstChild;)_u=_u.firstChild;return _u}function vd(_u,$u){var Bu=ud(_u);_u=0;for(var Ru;Bu;){if(Bu.nodeType===3){if(Ru=_u+Bu.textContent.length,_u<=$u&&Ru>=$u)return{node:Bu,offset:$u-_u};_u=Ru}e:{for(;Bu;){if(Bu.nextSibling){Bu=Bu.nextSibling;break e}Bu=Bu.parentNode}Bu=void 0}Bu=ud(Bu)}}function wd(_u,$u){return _u&&$u?_u===$u?!0:_u&&_u.nodeType===3?!1:$u&&$u.nodeType===3?wd(_u,$u.parentNode):"contains"in _u?_u.contains($u):_u.compareDocumentPosition?!!(_u.compareDocumentPosition($u)&16):!1:!1}function xd(){for(var _u=window,$u=td$1();$u instanceof _u.HTMLIFrameElement;){try{var Bu=typeof $u.contentWindow.location.href=="string"}catch{Bu=!1}if(Bu)_u=$u.contentWindow;else break;$u=td$1(_u.document)}return $u}function yd(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u&&($u==="input"&&(_u.type==="text"||_u.type==="search"||_u.type==="tel"||_u.type==="url"||_u.type==="password")||$u==="textarea"||_u.contentEditable==="true")}var zd$1="$",Ad="/$",Bd$1="$?",Cd="$!",Dd$1=null,Ed=null;function Fd$1(_u,$u){switch(_u){case"button":case"input":case"select":case"textarea":return!!$u.autoFocus}return!1}function Gd$1(_u,$u){return _u==="textarea"||_u==="option"||_u==="noscript"||typeof $u.children=="string"||typeof $u.children=="number"||typeof $u.dangerouslySetInnerHTML=="object"&&$u.dangerouslySetInnerHTML!==null&&$u.dangerouslySetInnerHTML.__html!=null}var Hd$1=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd$1(_u){for(;_u!=null;_u=_u.nextSibling){var $u=_u.nodeType;if($u===1||$u===3)break}return _u}function Kd(_u){_u=_u.previousSibling;for(var $u=0;_u;){if(_u.nodeType===8){var Bu=_u.data;if(Bu===zd$1||Bu===Cd||Bu===Bd$1){if($u===0)return _u;$u--}else Bu===Ad&&$u++}_u=_u.previousSibling}return null}var Ld$1=Math.random().toString(36).slice(2),Md$1="__reactInternalInstance$"+Ld$1,Nd$1="__reactEventHandlers$"+Ld$1,Od$1="__reactContainere$"+Ld$1;function tc$1(_u){var $u=_u[Md$1];if($u)return $u;for(var Bu=_u.parentNode;Bu;){if($u=Bu[Od$1]||Bu[Md$1]){if(Bu=$u.alternate,$u.child!==null||Bu!==null&&Bu.child!==null)for(_u=Kd(_u);_u!==null;){if(Bu=_u[Md$1])return Bu;_u=Kd(_u)}return $u}_u=Bu,Bu=_u.parentNode}return null}function Nc(_u){return _u=_u[Md$1]||_u[Od$1],!_u||_u.tag!==5&&_u.tag!==6&&_u.tag!==13&&_u.tag!==3?null:_u}function Pd(_u){if(_u.tag===5||_u.tag===6)return _u.stateNode;throw Error(u$3(33))}function Qd$1(_u){return _u[Nd$1]||null}function Rd$1(_u){do _u=_u.return;while(_u&&_u.tag!==5);return _u||null}function Sd(_u,$u){var Bu=_u.stateNode;if(!Bu)return null;var Ru=la$1(Bu);if(!Ru)return null;Bu=Ru[$u];e:switch($u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ru=!Ru.disabled)||(_u=_u.type,Ru=!(_u==="button"||_u==="input"||_u==="select"||_u==="textarea")),_u=!Ru;break e;default:_u=!1}if(_u)return null;if(Bu&&typeof Bu!="function")throw Error(u$3(231,$u,typeof Bu));return Bu}function Td(_u,$u,Bu){($u=Sd(_u,Bu.dispatchConfig.phasedRegistrationNames[$u]))&&(Bu._dispatchListeners=ic$1(Bu._dispatchListeners,$u),Bu._dispatchInstances=ic$1(Bu._dispatchInstances,_u))}function Ud$1(_u){if(_u&&_u.dispatchConfig.phasedRegistrationNames){for(var $u=_u._targetInst,Bu=[];$u;)Bu.push($u),$u=Rd$1($u);for($u=Bu.length;0<$u--;)Td(Bu[$u],"captured",_u);for($u=0;$u<Bu.length;$u++)Td(Bu[$u],"bubbled",_u)}}function Vd$1(_u,$u,Bu){_u&&Bu&&Bu.dispatchConfig.registrationName&&($u=Sd(_u,Bu.dispatchConfig.registrationName))&&(Bu._dispatchListeners=ic$1(Bu._dispatchListeners,$u),Bu._dispatchInstances=ic$1(Bu._dispatchInstances,_u))}function Wd$1(_u){_u&&_u.dispatchConfig.registrationName&&Vd$1(_u._targetInst,null,_u)}function Xd$1(_u){jc(_u,Ud$1)}var Yd$1=null,Zd=null,$d=null;function ae$2(){if($d)return $d;var _u,$u=Zd,Bu=$u.length,Ru,Lu="value"in Yd$1?Yd$1.value:Yd$1.textContent,Ou=Lu.length;for(_u=0;_u<Bu&&$u[_u]===Lu[_u];_u++);var Fu=Bu-_u;for(Ru=1;Ru<=Fu&&$u[Bu-Ru]===Lu[Ou-Ru];Ru++);return $d=Lu.slice(_u,1<Ru?1-Ru:void 0)}function be$2(){return!0}function ce$2(){return!1}function G$2(_u,$u,Bu,Ru){this.dispatchConfig=_u,this._targetInst=$u,this.nativeEvent=Bu,_u=this.constructor.Interface;for(var Lu in _u)_u.hasOwnProperty(Lu)&&(($u=_u[Lu])?this[Lu]=$u(Bu):Lu==="target"?this.target=Ru:this[Lu]=Bu[Lu]);return this.isDefaultPrevented=(Bu.defaultPrevented!=null?Bu.defaultPrevented:Bu.returnValue===!1)?be$2:ce$2,this.isPropagationStopped=ce$2,this}n$4(G$2.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _u=this.nativeEvent;_u&&(_u.preventDefault?_u.preventDefault():typeof _u.returnValue!="unknown"&&(_u.returnValue=!1),this.isDefaultPrevented=be$2)},stopPropagation:function(){var _u=this.nativeEvent;_u&&(_u.stopPropagation?_u.stopPropagation():typeof _u.cancelBubble!="unknown"&&(_u.cancelBubble=!0),this.isPropagationStopped=be$2)},persist:function(){this.isPersistent=be$2},isPersistent:ce$2,destructor:function(){var _u=this.constructor.Interface,$u;for($u in _u)this[$u]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$2,this._dispatchInstances=this._dispatchListeners=null}});G$2.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(_u){return _u.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$2.extend=function(_u){function $u(){}function Bu(){return Ru.apply(this,arguments)}var Ru=this;$u.prototype=Ru.prototype;var Lu=new $u;return n$4(Lu,Bu.prototype),Bu.prototype=Lu,Bu.prototype.constructor=Bu,Bu.Interface=n$4({},Ru.Interface,_u),Bu.extend=Ru.extend,de$2(Bu),Bu};de$2(G$2);function ee$1(_u,$u,Bu,Ru){if(this.eventPool.length){var Lu=this.eventPool.pop();return this.call(Lu,_u,$u,Bu,Ru),Lu}return new this(_u,$u,Bu,Ru)}function fe$2(_u){if(!(_u instanceof this))throw Error(u$3(279));_u.destructor(),10>this.eventPool.length&&this.eventPool.push(_u)}function de$2(_u){_u.eventPool=[],_u.getPooled=ee$1,_u.release=fe$2}var ge$2=G$2.extend({data:null}),he$1=G$2.extend({data:null}),ie$2=[9,13,27,32],je$1=ya$1&&"CompositionEvent"in window,ke$1=null;ya$1&&"documentMode"in document&&(ke$1=document.documentMode);var le$1=ya$1&&"TextEvent"in window&&!ke$1,me$2=ya$1&&(!je$1||ke$1&&8<ke$1&&11>=ke$1),ne$1=String.fromCharCode(32),oe$2={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$2=!1;function qe$1(_u,$u){switch(_u){case"keyup":return ie$2.indexOf($u.keyCode)!==-1;case"keydown":return $u.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$2(_u){return _u=_u.detail,typeof _u=="object"&&"data"in _u?_u.data:null}var se$2=!1;function te$1(_u,$u){switch(_u){case"compositionend":return re$2($u);case"keypress":return $u.which!==32?null:(pe$2=!0,ne$1);case"textInput":return _u=$u.data,_u===ne$1&&pe$2?null:_u;default:return null}}function ue$2(_u,$u){if(se$2)return _u==="compositionend"||!je$1&&qe$1(_u,$u)?(_u=ae$2(),$d=Zd=Yd$1=null,se$2=!1,_u):null;switch(_u){case"paste":return null;case"keypress":if(!($u.ctrlKey||$u.altKey||$u.metaKey)||$u.ctrlKey&&$u.altKey){if($u.char&&1<$u.char.length)return $u.char;if($u.which)return String.fromCharCode($u.which)}return null;case"compositionend":return me$2&&$u.locale!=="ko"?null:$u.data;default:return null}}var ve$2={eventTypes:oe$2,extractEvents:function(_u,$u,Bu,Ru){var Lu;if(je$1)e:{switch(_u){case"compositionstart":var Ou=oe$2.compositionStart;break e;case"compositionend":Ou=oe$2.compositionEnd;break e;case"compositionupdate":Ou=oe$2.compositionUpdate;break e}Ou=void 0}else se$2?qe$1(_u,Bu)&&(Ou=oe$2.compositionEnd):_u==="keydown"&&Bu.keyCode===229&&(Ou=oe$2.compositionStart);return Ou?(me$2&&Bu.locale!=="ko"&&(se$2||Ou!==oe$2.compositionStart?Ou===oe$2.compositionEnd&&se$2&&(Lu=ae$2()):(Yd$1=Ru,Zd="value"in Yd$1?Yd$1.value:Yd$1.textContent,se$2=!0)),Ou=ge$2.getPooled(Ou,$u,Bu,Ru),Lu?Ou.data=Lu:(Lu=re$2(Bu),Lu!==null&&(Ou.data=Lu)),Xd$1(Ou),Lu=Ou):Lu=null,(_u=le$1?te$1(_u,Bu):ue$2(_u,Bu))?($u=he$1.getPooled(oe$2.beforeInput,$u,Bu,Ru),$u.data=_u,Xd$1($u)):$u=null,Lu===null?$u:$u===null?Lu:[Lu,$u]}},we$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$1(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u==="input"?!!we$1[_u.type]:$u==="textarea"}var ye$1={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$2(_u,$u,Bu){return _u=G$2.getPooled(ye$1.change,_u,$u,Bu),_u.type="change",Da$2(Bu),Xd$1(_u),_u}var Ae$1=null,Be$2=null;function Ce$2(_u){mc$1(_u)}function De$1(_u){var $u=Pd(_u);if(yb$1($u))return _u}function Ee$1(_u,$u){if(_u==="change")return $u}var Fe$1=!1;ya$1&&(Fe$1=oc$1("input")&&(!document.documentMode||9<document.documentMode));function Ge$2(){Ae$1&&(Ae$1.detachEvent("onpropertychange",He$2),Be$2=Ae$1=null)}function He$2(_u){if(_u.propertyName==="value"&&De$1(Be$2))if(_u=ze$2(Be$2,_u,nc$1(_u)),Ja$2)mc$1(_u);else{Ja$2=!0;try{Fa$2(Ce$2,_u)}finally{Ja$2=!1,La$2()}}}function Ie$1(_u,$u,Bu){_u==="focus"?(Ge$2(),Ae$1=$u,Be$2=Bu,Ae$1.attachEvent("onpropertychange",He$2)):_u==="blur"&&Ge$2()}function Je$2(_u){if(_u==="selectionchange"||_u==="keyup"||_u==="keydown")return De$1(Be$2)}function Ke$1(_u,$u){if(_u==="click")return De$1($u)}function Le$2(_u,$u){if(_u==="input"||_u==="change")return De$1($u)}var Me$1={eventTypes:ye$1,_isInputEventSupported:Fe$1,extractEvents:function(_u,$u,Bu,Ru){var Lu=$u?Pd($u):window,Ou=Lu.nodeName&&Lu.nodeName.toLowerCase();if(Ou==="select"||Ou==="input"&&Lu.type==="file")var Fu=Ee$1;else if(xe$1(Lu))if(Fe$1)Fu=Le$2;else{Fu=Je$2;var Nu=Ie$1}else(Ou=Lu.nodeName)&&Ou.toLowerCase()==="input"&&(Lu.type==="checkbox"||Lu.type==="radio")&&(Fu=Ke$1);if(Fu&&(Fu=Fu(_u,$u)))return ze$2(Fu,Bu,Ru);Nu&&Nu(_u,Lu,$u),_u==="blur"&&(_u=Lu._wrapperState)&&_u.controlled&&Lu.type==="number"&&Db$1(Lu,"number",Lu.value)}},Ne$1=G$2.extend({view:null,detail:null}),Oe$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$1(_u){var $u=this.nativeEvent;return $u.getModifierState?$u.getModifierState(_u):(_u=Oe$2[_u])?!!$u[_u]:!1}function Qe$2(){return Pe$1}var Re$1=0,Se$1=0,Te$2=!1,Ue$1=!1,Ve$1=Ne$1.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$2,button:null,buttons:null,relatedTarget:function(_u){return _u.relatedTarget||(_u.fromElement===_u.srcElement?_u.toElement:_u.fromElement)},movementX:function(_u){if("movementX"in _u)return _u.movementX;var $u=Re$1;return Re$1=_u.screenX,Te$2?_u.type==="mousemove"?_u.screenX-$u:0:(Te$2=!0,0)},movementY:function(_u){if("movementY"in _u)return _u.movementY;var $u=Se$1;return Se$1=_u.screenY,Ue$1?_u.type==="mousemove"?_u.screenY-$u:0:(Ue$1=!0,0)}}),We$2=Ve$1.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$2={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$2={eventTypes:Xe$2,extractEvents:function(_u,$u,Bu,Ru,Lu){var Ou=_u==="mouseover"||_u==="pointerover",Fu=_u==="mouseout"||_u==="pointerout";if(Ou&&(Lu&32)===0&&(Bu.relatedTarget||Bu.fromElement)||!Fu&&!Ou)return null;if(Ou=Ru.window===Ru?Ru:(Ou=Ru.ownerDocument)?Ou.defaultView||Ou.parentWindow:window,Fu){if(Fu=$u,$u=($u=Bu.relatedTarget||Bu.toElement)?tc$1($u):null,$u!==null){var Nu=dc$1($u);($u!==Nu||$u.tag!==5&&$u.tag!==6)&&($u=null)}}else Fu=null;if(Fu===$u)return null;if(_u==="mouseout"||_u==="mouseover")var Vu=Ve$1,Uu=Xe$2.mouseLeave,Gu=Xe$2.mouseEnter,zu="mouse";else(_u==="pointerout"||_u==="pointerover")&&(Vu=We$2,Uu=Xe$2.pointerLeave,Gu=Xe$2.pointerEnter,zu="pointer");if(_u=Fu==null?Ou:Pd(Fu),Ou=$u==null?Ou:Pd($u),Uu=Vu.getPooled(Uu,Fu,Bu,Ru),Uu.type=zu+"leave",Uu.target=_u,Uu.relatedTarget=Ou,Bu=Vu.getPooled(Gu,$u,Bu,Ru),Bu.type=zu+"enter",Bu.target=Ou,Bu.relatedTarget=_u,Ru=Fu,zu=$u,Ru&&zu)e:{for(Vu=Ru,Gu=zu,Fu=0,_u=Vu;_u;_u=Rd$1(_u))Fu++;for(_u=0,$u=Gu;$u;$u=Rd$1($u))_u++;for(;0<Fu-_u;)Vu=Rd$1(Vu),Fu--;for(;0<_u-Fu;)Gu=Rd$1(Gu),_u--;for(;Fu--;){if(Vu===Gu||Vu===Gu.alternate)break e;Vu=Rd$1(Vu),Gu=Rd$1(Gu)}Vu=null}else Vu=null;for(Gu=Vu,Vu=[];Ru&&Ru!==Gu&&(Fu=Ru.alternate,!(Fu!==null&&Fu===Gu));)Vu.push(Ru),Ru=Rd$1(Ru);for(Ru=[];zu&&zu!==Gu&&(Fu=zu.alternate,!(Fu!==null&&Fu===Gu));)Ru.push(zu),zu=Rd$1(zu);for(zu=0;zu<Vu.length;zu++)Vd$1(Vu[zu],"bubbled",Uu);for(zu=Ru.length;0<zu--;)Vd$1(Ru[zu],"captured",Bu);return(Lu&64)===0?[Uu]:[Uu,Bu]}};function Ze$1(_u,$u){return _u===$u&&(_u!==0||1/_u===1/$u)||_u!==_u&&$u!==$u}var $e$1=typeof Object.is=="function"?Object.is:Ze$1,af=Object.prototype.hasOwnProperty;function bf(_u,$u){if($e$1(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Bu=Object.keys(_u),Ru=Object.keys($u);if(Bu.length!==Ru.length)return!1;for(Ru=0;Ru<Bu.length;Ru++)if(!af.call($u,Bu[Ru])||!$e$1(_u[Bu[Ru]],$u[Bu[Ru]]))return!1;return!0}var cf=ya$1&&"documentMode"in document&&11>=document.documentMode,df$1={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff$1=null,gf=null,hf$1=!1;function jf(_u,$u){var Bu=$u.window===$u?$u.document:$u.nodeType===9?$u:$u.ownerDocument;return hf$1||ef==null||ef!==td$1(Bu)?null:(Bu=ef,"selectionStart"in Bu&&yd(Bu)?Bu={start:Bu.selectionStart,end:Bu.selectionEnd}:(Bu=(Bu.ownerDocument&&Bu.ownerDocument.defaultView||window).getSelection(),Bu={anchorNode:Bu.anchorNode,anchorOffset:Bu.anchorOffset,focusNode:Bu.focusNode,focusOffset:Bu.focusOffset}),gf&&bf(gf,Bu)?null:(gf=Bu,_u=G$2.getPooled(df$1.select,ff$1,_u,$u),_u.type="select",_u.target=ef,Xd$1(_u),_u))}var kf={eventTypes:df$1,extractEvents:function(_u,$u,Bu,Ru,Lu,Ou){if(Lu=Ou||(Ru.window===Ru?Ru.document:Ru.nodeType===9?Ru:Ru.ownerDocument),!(Ou=!Lu)){e:{Lu=cc$1(Lu),Ou=wa$1.onSelect;for(var Fu=0;Fu<Ou.length;Fu++)if(!Lu.has(Ou[Fu])){Lu=!1;break e}Lu=!0}Ou=!Lu}if(Ou)return null;switch(Lu=$u?Pd($u):window,_u){case"focus":(xe$1(Lu)||Lu.contentEditable==="true")&&(ef=Lu,ff$1=$u,gf=null);break;case"blur":gf=ff$1=ef=null;break;case"mousedown":hf$1=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf$1=!1,jf(Bu,Ru);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(Bu,Ru)}return null}},lf=G$2.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$2.extend({clipboardData:function(_u){return"clipboardData"in _u?_u.clipboardData:window.clipboardData}}),nf=Ne$1.extend({relatedTarget:null});function of(_u){var $u=_u.keyCode;return"charCode"in _u?(_u=_u.charCode,_u===0&&$u===13&&(_u=13)):_u=$u,_u===10&&(_u=13),32<=_u||_u===13?_u:0}var pf$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne$1.extend({key:function(_u){if(_u.key){var $u=pf$1[_u.key]||_u.key;if($u!=="Unidentified")return $u}return _u.type==="keypress"?(_u=of(_u),_u===13?"Enter":String.fromCharCode(_u)):_u.type==="keydown"||_u.type==="keyup"?qf[_u.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$2,charCode:function(_u){return _u.type==="keypress"?of(_u):0},keyCode:function(_u){return _u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0},which:function(_u){return _u.type==="keypress"?of(_u):_u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0}}),sf=Ve$1.extend({dataTransfer:null}),tf=Ne$1.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$2}),uf$1=G$2.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$1.extend({deltaX:function(_u){return"deltaX"in _u?_u.deltaX:"wheelDeltaX"in _u?-_u.wheelDeltaX:0},deltaY:function(_u){return"deltaY"in _u?_u.deltaY:"wheelDeltaY"in _u?-_u.wheelDeltaY:"wheelDelta"in _u?-_u.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(_u,$u,Bu,Ru){var Lu=Yc$1.get(_u);if(!Lu)return null;switch(_u){case"keypress":if(of(Bu)===0)return null;case"keydown":case"keyup":_u=rf;break;case"blur":case"focus":_u=nf;break;case"click":if(Bu.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_u=Ve$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_u=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_u=tf;break;case Xb$1:case Yb$1:case Zb$1:_u=lf;break;case $b$1:_u=uf$1;break;case"scroll":_u=Ne$1;break;case"wheel":_u=vf;break;case"copy":case"cut":case"paste":_u=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_u=We$2;break;default:_u=G$2}return $u=_u.getPooled(Lu,$u,Bu,Ru),Xd$1($u),$u}};if(pa$1)throw Error(u$3(101));pa$1=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra$1();var xf=Nc;la$1=Qd$1;ma$1=xf;na$1=Pd;xa$1({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye$2,ChangeEventPlugin:Me$1,SelectEventPlugin:kf,BeforeInputEventPlugin:ve$2});var yf=[],zf=-1;function H$3(_u){0>zf||(_u.current=yf[zf],yf[zf]=null,zf--)}function I$2(_u,$u){zf++,yf[zf]=_u.current,_u.current=$u}var Af={},J$2={current:Af},K$2={current:!1},Bf=Af;function Cf(_u,$u){var Bu=_u.type.contextTypes;if(!Bu)return Af;var Ru=_u.stateNode;if(Ru&&Ru.__reactInternalMemoizedUnmaskedChildContext===$u)return Ru.__reactInternalMemoizedMaskedChildContext;var Lu={},Ou;for(Ou in Bu)Lu[Ou]=$u[Ou];return Ru&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=$u,_u.__reactInternalMemoizedMaskedChildContext=Lu),Lu}function L$3(_u){return _u=_u.childContextTypes,_u!=null}function Df(){H$3(K$2),H$3(J$2)}function Ef(_u,$u,Bu){if(J$2.current!==Af)throw Error(u$3(168));I$2(J$2,$u),I$2(K$2,Bu)}function Ff(_u,$u,Bu){var Ru=_u.stateNode;if(_u=$u.childContextTypes,typeof Ru.getChildContext!="function")return Bu;Ru=Ru.getChildContext();for(var Lu in Ru)if(!(Lu in _u))throw Error(u$3(108,pb$1($u)||"Unknown",Lu));return n$4({},Bu,{},Ru)}function Gf(_u){return _u=(_u=_u.stateNode)&&_u.__reactInternalMemoizedMergedChildContext||Af,Bf=J$2.current,I$2(J$2,_u),I$2(K$2,K$2.current),!0}function Hf(_u,$u,Bu){var Ru=_u.stateNode;if(!Ru)throw Error(u$3(169));Bu?(_u=Ff(_u,$u,Bf),Ru.__reactInternalMemoizedMergedChildContext=_u,H$3(K$2),H$3(J$2),I$2(J$2,_u)):H$3(K$2),I$2(K$2,Bu)}var If=r$4.unstable_runWithPriority,Jf=r$4.unstable_scheduleCallback,Kf=r$4.unstable_cancelCallback,Lf=r$4.unstable_requestPaint,Mf=r$4.unstable_now,Nf=r$4.unstable_getCurrentPriorityLevel,Of=r$4.unstable_ImmediatePriority,Pf=r$4.unstable_UserBlockingPriority,Qf=r$4.unstable_NormalPriority,Rf=r$4.unstable_LowPriority,Sf=r$4.unstable_IdlePriority,Tf={},Uf=r$4.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u$3(332))}}function bg(_u){switch(_u){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u$3(332))}}function cg(_u,$u){return _u=bg(_u),If(_u,$u)}function dg(_u,$u,Bu){return _u=bg(_u),Jf(_u,$u,Bu)}function eg(_u){return Wf===null?(Wf=[_u],Xf=Jf(Of,fg)):Wf.push(_u),Tf}function gg(){if(Xf!==null){var _u=Xf;Xf=null,Kf(_u)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var _u=0;try{var $u=Wf;cg(99,function(){for(;_u<$u.length;_u++){var Bu=$u[_u];do Bu=Bu(!0);while(Bu!==null)}}),Wf=null}catch(Bu){throw Wf!==null&&(Wf=Wf.slice(_u+1)),Jf(Of,gg),Bu}finally{Yf=!1}}}function hg(_u,$u,Bu){return Bu/=10,1073741821-(((1073741821-_u+$u/10)/Bu|0)+1)*Bu}function ig(_u,$u){if(_u&&_u.defaultProps){$u=n$4({},$u),_u=_u.defaultProps;for(var Bu in _u)$u[Bu]===void 0&&($u[Bu]=_u[Bu])}return $u}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(_u){var $u=jg.current;H$3(jg),_u.type._context._currentValue=$u}function pg(_u,$u){for(;_u!==null;){var Bu=_u.alternate;if(_u.childExpirationTime<$u)_u.childExpirationTime=$u,Bu!==null&&Bu.childExpirationTime<$u&&(Bu.childExpirationTime=$u);else if(Bu!==null&&Bu.childExpirationTime<$u)Bu.childExpirationTime=$u;else break;_u=_u.return}}function qg$1(_u,$u){kg=_u,mg=lg=null,_u=_u.dependencies,_u!==null&&_u.firstContext!==null&&(_u.expirationTime>=$u&&(rg=!0),_u.firstContext=null)}function sg(_u,$u){if(mg!==_u&&$u!==!1&&$u!==0)if((typeof $u!="number"||$u===1073741823)&&(mg=_u,$u=1073741823),$u={context:_u,observedBits:$u,next:null},lg===null){if(kg===null)throw Error(u$3(308));lg=$u,kg.dependencies={expirationTime:0,firstContext:$u,responders:null}}else lg=lg.next=$u;return _u._currentValue}var tg=!1;function ug(_u){_u.updateQueue={baseState:_u.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(_u,$u){_u=_u.updateQueue,$u.updateQueue===_u&&($u.updateQueue={baseState:_u.baseState,baseQueue:_u.baseQueue,shared:_u.shared,effects:_u.effects})}function wg(_u,$u){return _u={expirationTime:_u,suspenseConfig:$u,tag:0,payload:null,callback:null,next:null},_u.next=_u}function xg(_u,$u){if(_u=_u.updateQueue,_u!==null){_u=_u.shared;var Bu=_u.pending;Bu===null?$u.next=$u:($u.next=Bu.next,Bu.next=$u),_u.pending=$u}}function yg(_u,$u){var Bu=_u.alternate;Bu!==null&&vg(Bu,_u),_u=_u.updateQueue,Bu=_u.baseQueue,Bu===null?(_u.baseQueue=$u.next=$u,$u.next=$u):($u.next=Bu.next,Bu.next=$u)}function zg(_u,$u,Bu,Ru){var Lu=_u.updateQueue;tg=!1;var Ou=Lu.baseQueue,Fu=Lu.shared.pending;if(Fu!==null){if(Ou!==null){var Nu=Ou.next;Ou.next=Fu.next,Fu.next=Nu}Ou=Fu,Lu.shared.pending=null,Nu=_u.alternate,Nu!==null&&(Nu=Nu.updateQueue,Nu!==null&&(Nu.baseQueue=Fu))}if(Ou!==null){Nu=Ou.next;var Vu=Lu.baseState,Uu=0,Gu=null,zu=null,Hu=null;if(Nu!==null){var ju=Nu;do{if(Fu=ju.expirationTime,Fu<Ru){var Qu={expirationTime:ju.expirationTime,suspenseConfig:ju.suspenseConfig,tag:ju.tag,payload:ju.payload,callback:ju.callback,next:null};Hu===null?(zu=Hu=Qu,Gu=Vu):Hu=Hu.next=Qu,Fu>Uu&&(Uu=Fu)}else{Hu!==null&&(Hu=Hu.next={expirationTime:1073741823,suspenseConfig:ju.suspenseConfig,tag:ju.tag,payload:ju.payload,callback:ju.callback,next:null}),Ag(Fu,ju.suspenseConfig);e:{var Xu=_u,Ku=ju;switch(Fu=$u,Qu=Bu,Ku.tag){case 1:if(Xu=Ku.payload,typeof Xu=="function"){Vu=Xu.call(Qu,Vu,Fu);break e}Vu=Xu;break e;case 3:Xu.effectTag=Xu.effectTag&-4097|64;case 0:if(Xu=Ku.payload,Fu=typeof Xu=="function"?Xu.call(Qu,Vu,Fu):Xu,Fu==null)break e;Vu=n$4({},Vu,Fu);break e;case 2:tg=!0}}ju.callback!==null&&(_u.effectTag|=32,Fu=Lu.effects,Fu===null?Lu.effects=[ju]:Fu.push(ju))}if(ju=ju.next,ju===null||ju===Nu){if(Fu=Lu.shared.pending,Fu===null)break;ju=Ou.next=Fu.next,Fu.next=Nu,Lu.baseQueue=Ou=Fu,Lu.shared.pending=null}}while(1)}Hu===null?Gu=Vu:Hu.next=zu,Lu.baseState=Gu,Lu.baseQueue=Hu,Bg(Uu),_u.expirationTime=Uu,_u.memoizedState=Vu}}function Cg(_u,$u,Bu){if(_u=$u.effects,$u.effects=null,_u!==null)for($u=0;$u<_u.length;$u++){var Ru=_u[$u],Lu=Ru.callback;if(Lu!==null){if(Ru.callback=null,Ru=Lu,Lu=Bu,typeof Ru!="function")throw Error(u$3(191,Ru));Ru.call(Lu)}}}var Dg=Wa$2.ReactCurrentBatchConfig,Eg=new aa$2.Component().refs;function Fg(_u,$u,Bu,Ru){$u=_u.memoizedState,Bu=Bu(Ru,$u),Bu=Bu==null?$u:n$4({},$u,Bu),_u.memoizedState=Bu,_u.expirationTime===0&&(_u.updateQueue.baseState=Bu)}var Jg$1={isMounted:function(_u){return(_u=_u._reactInternalFiber)?dc$1(_u)===_u:!1},enqueueSetState:function(_u,$u,Bu){_u=_u._reactInternalFiber;var Ru=Gg$1(),Lu=Dg.suspense;Ru=Hg(Ru,_u,Lu),Lu=wg(Ru,Lu),Lu.payload=$u,Bu!=null&&(Lu.callback=Bu),xg(_u,Lu),Ig(_u,Ru)},enqueueReplaceState:function(_u,$u,Bu){_u=_u._reactInternalFiber;var Ru=Gg$1(),Lu=Dg.suspense;Ru=Hg(Ru,_u,Lu),Lu=wg(Ru,Lu),Lu.tag=1,Lu.payload=$u,Bu!=null&&(Lu.callback=Bu),xg(_u,Lu),Ig(_u,Ru)},enqueueForceUpdate:function(_u,$u){_u=_u._reactInternalFiber;var Bu=Gg$1(),Ru=Dg.suspense;Bu=Hg(Bu,_u,Ru),Ru=wg(Bu,Ru),Ru.tag=2,$u!=null&&(Ru.callback=$u),xg(_u,Ru),Ig(_u,Bu)}};function Kg$1(_u,$u,Bu,Ru,Lu,Ou,Fu){return _u=_u.stateNode,typeof _u.shouldComponentUpdate=="function"?_u.shouldComponentUpdate(Ru,Ou,Fu):$u.prototype&&$u.prototype.isPureReactComponent?!bf(Bu,Ru)||!bf(Lu,Ou):!0}function Lg(_u,$u,Bu){var Ru=!1,Lu=Af,Ou=$u.contextType;return typeof Ou=="object"&&Ou!==null?Ou=sg(Ou):(Lu=L$3($u)?Bf:J$2.current,Ru=$u.contextTypes,Ou=(Ru=Ru!=null)?Cf(_u,Lu):Af),$u=new $u(Bu,Ou),_u.memoizedState=$u.state!==null&&$u.state!==void 0?$u.state:null,$u.updater=Jg$1,_u.stateNode=$u,$u._reactInternalFiber=_u,Ru&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=Lu,_u.__reactInternalMemoizedMaskedChildContext=Ou),$u}function Mg(_u,$u,Bu,Ru){_u=$u.state,typeof $u.componentWillReceiveProps=="function"&&$u.componentWillReceiveProps(Bu,Ru),typeof $u.UNSAFE_componentWillReceiveProps=="function"&&$u.UNSAFE_componentWillReceiveProps(Bu,Ru),$u.state!==_u&&Jg$1.enqueueReplaceState($u,$u.state,null)}function Ng$1(_u,$u,Bu,Ru){var Lu=_u.stateNode;Lu.props=Bu,Lu.state=_u.memoizedState,Lu.refs=Eg,ug(_u);var Ou=$u.contextType;typeof Ou=="object"&&Ou!==null?Lu.context=sg(Ou):(Ou=L$3($u)?Bf:J$2.current,Lu.context=Cf(_u,Ou)),zg(_u,Bu,Lu,Ru),Lu.state=_u.memoizedState,Ou=$u.getDerivedStateFromProps,typeof Ou=="function"&&(Fg(_u,$u,Ou,Bu),Lu.state=_u.memoizedState),typeof $u.getDerivedStateFromProps=="function"||typeof Lu.getSnapshotBeforeUpdate=="function"||typeof Lu.UNSAFE_componentWillMount!="function"&&typeof Lu.componentWillMount!="function"||($u=Lu.state,typeof Lu.componentWillMount=="function"&&Lu.componentWillMount(),typeof Lu.UNSAFE_componentWillMount=="function"&&Lu.UNSAFE_componentWillMount(),$u!==Lu.state&&Jg$1.enqueueReplaceState(Lu,Lu.state,null),zg(_u,Bu,Lu,Ru),Lu.state=_u.memoizedState),typeof Lu.componentDidMount=="function"&&(_u.effectTag|=4)}var Og=Array.isArray;function Pg(_u,$u,Bu){if(_u=Bu.ref,_u!==null&&typeof _u!="function"&&typeof _u!="object"){if(Bu._owner){if(Bu=Bu._owner,Bu){if(Bu.tag!==1)throw Error(u$3(309));var Ru=Bu.stateNode}if(!Ru)throw Error(u$3(147,_u));var Lu=""+_u;return $u!==null&&$u.ref!==null&&typeof $u.ref=="function"&&$u.ref._stringRef===Lu?$u.ref:($u=function(Ou){var Fu=Ru.refs;Fu===Eg&&(Fu=Ru.refs={}),Ou===null?delete Fu[Lu]:Fu[Lu]=Ou},$u._stringRef=Lu,$u)}if(typeof _u!="string")throw Error(u$3(284));if(!Bu._owner)throw Error(u$3(290,_u))}return _u}function Qg$1(_u,$u){if(_u.type!=="textarea")throw Error(u$3(31,Object.prototype.toString.call($u)==="[object Object]"?"object with keys {"+Object.keys($u).join(", ")+"}":$u,""))}function Rg(_u){function $u(Ku,Wu){if(_u){var qu=Ku.lastEffect;qu!==null?(qu.nextEffect=Wu,Ku.lastEffect=Wu):Ku.firstEffect=Ku.lastEffect=Wu,Wu.nextEffect=null,Wu.effectTag=8}}function Bu(Ku,Wu){if(!_u)return null;for(;Wu!==null;)$u(Ku,Wu),Wu=Wu.sibling;return null}function Ru(Ku,Wu){for(Ku=new Map;Wu!==null;)Wu.key!==null?Ku.set(Wu.key,Wu):Ku.set(Wu.index,Wu),Wu=Wu.sibling;return Ku}function Lu(Ku,Wu){return Ku=Sg(Ku,Wu),Ku.index=0,Ku.sibling=null,Ku}function Ou(Ku,Wu,qu){return Ku.index=qu,_u?(qu=Ku.alternate,qu!==null?(qu=qu.index,qu<Wu?(Ku.effectTag=2,Wu):qu):(Ku.effectTag=2,Wu)):Wu}function Fu(Ku){return _u&&Ku.alternate===null&&(Ku.effectTag=2),Ku}function Nu(Ku,Wu,qu,Yu){return Wu===null||Wu.tag!==6?(Wu=Tg(qu,Ku.mode,Yu),Wu.return=Ku,Wu):(Wu=Lu(Wu,qu),Wu.return=Ku,Wu)}function Vu(Ku,Wu,qu,Yu){return Wu!==null&&Wu.elementType===qu.type?(Yu=Lu(Wu,qu.props),Yu.ref=Pg(Ku,Wu,qu),Yu.return=Ku,Yu):(Yu=Ug$1(qu.type,qu.key,qu.props,null,Ku.mode,Yu),Yu.ref=Pg(Ku,Wu,qu),Yu.return=Ku,Yu)}function Uu(Ku,Wu,qu,Yu){return Wu===null||Wu.tag!==4||Wu.stateNode.containerInfo!==qu.containerInfo||Wu.stateNode.implementation!==qu.implementation?(Wu=Vg$1(qu,Ku.mode,Yu),Wu.return=Ku,Wu):(Wu=Lu(Wu,qu.children||[]),Wu.return=Ku,Wu)}function Gu(Ku,Wu,qu,Yu,Zu){return Wu===null||Wu.tag!==7?(Wu=Wg$1(qu,Ku.mode,Yu,Zu),Wu.return=Ku,Wu):(Wu=Lu(Wu,qu),Wu.return=Ku,Wu)}function zu(Ku,Wu,qu){if(typeof Wu=="string"||typeof Wu=="number")return Wu=Tg(""+Wu,Ku.mode,qu),Wu.return=Ku,Wu;if(typeof Wu=="object"&&Wu!==null){switch(Wu.$$typeof){case Za$2:return qu=Ug$1(Wu.type,Wu.key,Wu.props,null,Ku.mode,qu),qu.ref=Pg(Ku,null,Wu),qu.return=Ku,qu;case $a$2:return Wu=Vg$1(Wu,Ku.mode,qu),Wu.return=Ku,Wu}if(Og(Wu)||nb$1(Wu))return Wu=Wg$1(Wu,Ku.mode,qu,null),Wu.return=Ku,Wu;Qg$1(Ku,Wu)}return null}function Hu(Ku,Wu,qu,Yu){var Zu=Wu!==null?Wu.key:null;if(typeof qu=="string"||typeof qu=="number")return Zu!==null?null:Nu(Ku,Wu,""+qu,Yu);if(typeof qu=="object"&&qu!==null){switch(qu.$$typeof){case Za$2:return qu.key===Zu?qu.type===ab$1?Gu(Ku,Wu,qu.props.children,Yu,Zu):Vu(Ku,Wu,qu,Yu):null;case $a$2:return qu.key===Zu?Uu(Ku,Wu,qu,Yu):null}if(Og(qu)||nb$1(qu))return Zu!==null?null:Gu(Ku,Wu,qu,Yu,null);Qg$1(Ku,qu)}return null}function ju(Ku,Wu,qu,Yu,Zu){if(typeof Yu=="string"||typeof Yu=="number")return Ku=Ku.get(qu)||null,Nu(Wu,Ku,""+Yu,Zu);if(typeof Yu=="object"&&Yu!==null){switch(Yu.$$typeof){case Za$2:return Ku=Ku.get(Yu.key===null?qu:Yu.key)||null,Yu.type===ab$1?Gu(Wu,Ku,Yu.props.children,Zu,Yu.key):Vu(Wu,Ku,Yu,Zu);case $a$2:return Ku=Ku.get(Yu.key===null?qu:Yu.key)||null,Uu(Wu,Ku,Yu,Zu)}if(Og(Yu)||nb$1(Yu))return Ku=Ku.get(qu)||null,Gu(Wu,Ku,Yu,Zu,null);Qg$1(Wu,Yu)}return null}function Qu(Ku,Wu,qu,Yu){for(var Zu=null,_h=null,ep=Wu,ip=Wu=0,ap=null;ep!==null&&ip<qu.length;ip++){ep.index>ip?(ap=ep,ep=null):ap=ep.sibling;var sp=Hu(Ku,ep,qu[ip],Yu);if(sp===null){ep===null&&(ep=ap);break}_u&&ep&&sp.alternate===null&&$u(Ku,ep),Wu=Ou(sp,Wu,ip),_h===null?Zu=sp:_h.sibling=sp,_h=sp,ep=ap}if(ip===qu.length)return Bu(Ku,ep),Zu;if(ep===null){for(;ip<qu.length;ip++)ep=zu(Ku,qu[ip],Yu),ep!==null&&(Wu=Ou(ep,Wu,ip),_h===null?Zu=ep:_h.sibling=ep,_h=ep);return Zu}for(ep=Ru(Ku,ep);ip<qu.length;ip++)ap=ju(ep,Ku,ip,qu[ip],Yu),ap!==null&&(_u&&ap.alternate!==null&&ep.delete(ap.key===null?ip:ap.key),Wu=Ou(ap,Wu,ip),_h===null?Zu=ap:_h.sibling=ap,_h=ap);return _u&&ep.forEach(function(Ju){return $u(Ku,Ju)}),Zu}function Xu(Ku,Wu,qu,Yu){var Zu=nb$1(qu);if(typeof Zu!="function")throw Error(u$3(150));if(qu=Zu.call(qu),qu==null)throw Error(u$3(151));for(var _h=Zu=null,ep=Wu,ip=Wu=0,ap=null,sp=qu.next();ep!==null&&!sp.done;ip++,sp=qu.next()){ep.index>ip?(ap=ep,ep=null):ap=ep.sibling;var Ju=Hu(Ku,ep,sp.value,Yu);if(Ju===null){ep===null&&(ep=ap);break}_u&&ep&&Ju.alternate===null&&$u(Ku,ep),Wu=Ou(Ju,Wu,ip),_h===null?Zu=Ju:_h.sibling=Ju,_h=Ju,ep=ap}if(sp.done)return Bu(Ku,ep),Zu;if(ep===null){for(;!sp.done;ip++,sp=qu.next())sp=zu(Ku,sp.value,Yu),sp!==null&&(Wu=Ou(sp,Wu,ip),_h===null?Zu=sp:_h.sibling=sp,_h=sp);return Zu}for(ep=Ru(Ku,ep);!sp.done;ip++,sp=qu.next())sp=ju(ep,Ku,ip,sp.value,Yu),sp!==null&&(_u&&sp.alternate!==null&&ep.delete(sp.key===null?ip:sp.key),Wu=Ou(sp,Wu,ip),_h===null?Zu=sp:_h.sibling=sp,_h=sp);return _u&&ep.forEach(function(_f){return $u(Ku,_f)}),Zu}return function(Ku,Wu,qu,Yu){var Zu=typeof qu=="object"&&qu!==null&&qu.type===ab$1&&qu.key===null;Zu&&(qu=qu.props.children);var _h=typeof qu=="object"&&qu!==null;if(_h)switch(qu.$$typeof){case Za$2:e:{for(_h=qu.key,Zu=Wu;Zu!==null;){if(Zu.key===_h){switch(Zu.tag){case 7:if(qu.type===ab$1){Bu(Ku,Zu.sibling),Wu=Lu(Zu,qu.props.children),Wu.return=Ku,Ku=Wu;break e}break;default:if(Zu.elementType===qu.type){Bu(Ku,Zu.sibling),Wu=Lu(Zu,qu.props),Wu.ref=Pg(Ku,Zu,qu),Wu.return=Ku,Ku=Wu;break e}}Bu(Ku,Zu);break}else $u(Ku,Zu);Zu=Zu.sibling}qu.type===ab$1?(Wu=Wg$1(qu.props.children,Ku.mode,Yu,qu.key),Wu.return=Ku,Ku=Wu):(Yu=Ug$1(qu.type,qu.key,qu.props,null,Ku.mode,Yu),Yu.ref=Pg(Ku,Wu,qu),Yu.return=Ku,Ku=Yu)}return Fu(Ku);case $a$2:e:{for(Zu=qu.key;Wu!==null;){if(Wu.key===Zu)if(Wu.tag===4&&Wu.stateNode.containerInfo===qu.containerInfo&&Wu.stateNode.implementation===qu.implementation){Bu(Ku,Wu.sibling),Wu=Lu(Wu,qu.children||[]),Wu.return=Ku,Ku=Wu;break e}else{Bu(Ku,Wu);break}else $u(Ku,Wu);Wu=Wu.sibling}Wu=Vg$1(qu,Ku.mode,Yu),Wu.return=Ku,Ku=Wu}return Fu(Ku)}if(typeof qu=="string"||typeof qu=="number")return qu=""+qu,Wu!==null&&Wu.tag===6?(Bu(Ku,Wu.sibling),Wu=Lu(Wu,qu),Wu.return=Ku,Ku=Wu):(Bu(Ku,Wu),Wu=Tg(qu,Ku.mode,Yu),Wu.return=Ku,Ku=Wu),Fu(Ku);if(Og(qu))return Qu(Ku,Wu,qu,Yu);if(nb$1(qu))return Xu(Ku,Wu,qu,Yu);if(_h&&Qg$1(Ku,qu),typeof qu=="undefined"&&!Zu)switch(Ku.tag){case 1:case 0:throw Ku=Ku.type,Error(u$3(152,Ku.displayName||Ku.name||"Component"))}return Bu(Ku,Wu)}}var Xg$1=Rg(!0),Yg$1=Rg(!1),Zg$1={},$g$1={current:Zg$1},ah={current:Zg$1},bh={current:Zg$1};function ch(_u){if(_u===Zg$1)throw Error(u$3(174));return _u}function dh(_u,$u){switch(I$2(bh,$u),I$2(ah,_u),I$2($g$1,Zg$1),_u=$u.nodeType,_u){case 9:case 11:$u=($u=$u.documentElement)?$u.namespaceURI:Ob$1(null,"");break;default:_u=_u===8?$u.parentNode:$u,$u=_u.namespaceURI||null,_u=_u.tagName,$u=Ob$1($u,_u)}H$3($g$1),I$2($g$1,$u)}function eh(){H$3($g$1),H$3(ah),H$3(bh)}function fh(_u){ch(bh.current);var $u=ch($g$1.current),Bu=Ob$1($u,_u.type);$u!==Bu&&(I$2(ah,_u),I$2($g$1,Bu))}function gh(_u){ah.current===_u&&(H$3($g$1),H$3(ah))}var M$3={current:0};function hh(_u){for(var $u=_u;$u!==null;){if($u.tag===13){var Bu=$u.memoizedState;if(Bu!==null&&(Bu=Bu.dehydrated,Bu===null||Bu.data===Bd$1||Bu.data===Cd))return $u}else if($u.tag===19&&$u.memoizedProps.revealOrder!==void 0){if(($u.effectTag&64)!==0)return $u}else if($u.child!==null){$u.child.return=$u,$u=$u.child;continue}if($u===_u)break;for(;$u.sibling===null;){if($u.return===null||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}return null}function ih(_u,$u){return{responder:_u,props:$u}}var jh=Wa$2.ReactCurrentDispatcher,kh=Wa$2.ReactCurrentBatchConfig,lh=0,N$4=null,O$3=null,P$3=null,mh=!1;function Q$3(){throw Error(u$3(321))}function nh(_u,$u){if($u===null)return!1;for(var Bu=0;Bu<$u.length&&Bu<_u.length;Bu++)if(!$e$1(_u[Bu],$u[Bu]))return!1;return!0}function oh(_u,$u,Bu,Ru,Lu,Ou){if(lh=Ou,N$4=$u,$u.memoizedState=null,$u.updateQueue=null,$u.expirationTime=0,jh.current=_u===null||_u.memoizedState===null?ph:qh,_u=Bu(Ru,Lu),$u.expirationTime===lh){Ou=0;do{if($u.expirationTime=0,!(25>Ou))throw Error(u$3(301));Ou+=1,P$3=O$3=null,$u.updateQueue=null,jh.current=rh,_u=Bu(Ru,Lu)}while($u.expirationTime===lh)}if(jh.current=sh,$u=O$3!==null&&O$3.next!==null,lh=0,P$3=O$3=N$4=null,mh=!1,$u)throw Error(u$3(300));return _u}function th(){var _u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$3===null?N$4.memoizedState=P$3=_u:P$3=P$3.next=_u,P$3}function uh(){if(O$3===null){var _u=N$4.alternate;_u=_u!==null?_u.memoizedState:null}else _u=O$3.next;var $u=P$3===null?N$4.memoizedState:P$3.next;if($u!==null)P$3=$u,O$3=_u;else{if(_u===null)throw Error(u$3(310));O$3=_u,_u={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$3===null?N$4.memoizedState=P$3=_u:P$3=P$3.next=_u}return P$3}function vh(_u,$u){return typeof $u=="function"?$u(_u):$u}function wh(_u){var $u=uh(),Bu=$u.queue;if(Bu===null)throw Error(u$3(311));Bu.lastRenderedReducer=_u;var Ru=O$3,Lu=Ru.baseQueue,Ou=Bu.pending;if(Ou!==null){if(Lu!==null){var Fu=Lu.next;Lu.next=Ou.next,Ou.next=Fu}Ru.baseQueue=Lu=Ou,Bu.pending=null}if(Lu!==null){Lu=Lu.next,Ru=Ru.baseState;var Nu=Fu=Ou=null,Vu=Lu;do{var Uu=Vu.expirationTime;if(Uu<lh){var Gu={expirationTime:Vu.expirationTime,suspenseConfig:Vu.suspenseConfig,action:Vu.action,eagerReducer:Vu.eagerReducer,eagerState:Vu.eagerState,next:null};Nu===null?(Fu=Nu=Gu,Ou=Ru):Nu=Nu.next=Gu,Uu>N$4.expirationTime&&(N$4.expirationTime=Uu,Bg(Uu))}else Nu!==null&&(Nu=Nu.next={expirationTime:1073741823,suspenseConfig:Vu.suspenseConfig,action:Vu.action,eagerReducer:Vu.eagerReducer,eagerState:Vu.eagerState,next:null}),Ag(Uu,Vu.suspenseConfig),Ru=Vu.eagerReducer===_u?Vu.eagerState:_u(Ru,Vu.action);Vu=Vu.next}while(Vu!==null&&Vu!==Lu);Nu===null?Ou=Ru:Nu.next=Fu,$e$1(Ru,$u.memoizedState)||(rg=!0),$u.memoizedState=Ru,$u.baseState=Ou,$u.baseQueue=Nu,Bu.lastRenderedState=Ru}return[$u.memoizedState,Bu.dispatch]}function xh(_u){var $u=uh(),Bu=$u.queue;if(Bu===null)throw Error(u$3(311));Bu.lastRenderedReducer=_u;var Ru=Bu.dispatch,Lu=Bu.pending,Ou=$u.memoizedState;if(Lu!==null){Bu.pending=null;var Fu=Lu=Lu.next;do Ou=_u(Ou,Fu.action),Fu=Fu.next;while(Fu!==Lu);$e$1(Ou,$u.memoizedState)||(rg=!0),$u.memoizedState=Ou,$u.baseQueue===null&&($u.baseState=Ou),Bu.lastRenderedState=Ou}return[Ou,Ru]}function yh(_u){var $u=th();return typeof _u=="function"&&(_u=_u()),$u.memoizedState=$u.baseState=_u,_u=$u.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:_u},_u=_u.dispatch=zh.bind(null,N$4,_u),[$u.memoizedState,_u]}function Ah(_u,$u,Bu,Ru){return _u={tag:_u,create:$u,destroy:Bu,deps:Ru,next:null},$u=N$4.updateQueue,$u===null?($u={lastEffect:null},N$4.updateQueue=$u,$u.lastEffect=_u.next=_u):(Bu=$u.lastEffect,Bu===null?$u.lastEffect=_u.next=_u:(Ru=Bu.next,Bu.next=_u,_u.next=Ru,$u.lastEffect=_u)),_u}function Bh(){return uh().memoizedState}function Ch(_u,$u,Bu,Ru){var Lu=th();N$4.effectTag|=_u,Lu.memoizedState=Ah(1|$u,Bu,void 0,Ru===void 0?null:Ru)}function Dh(_u,$u,Bu,Ru){var Lu=uh();Ru=Ru===void 0?null:Ru;var Ou=void 0;if(O$3!==null){var Fu=O$3.memoizedState;if(Ou=Fu.destroy,Ru!==null&&nh(Ru,Fu.deps)){Ah($u,Bu,Ou,Ru);return}}N$4.effectTag|=_u,Lu.memoizedState=Ah(1|$u,Bu,Ou,Ru)}function Eh(_u,$u){return Ch(516,4,_u,$u)}function Fh(_u,$u){return Dh(516,4,_u,$u)}function Gh(_u,$u){return Dh(4,2,_u,$u)}function Hh(_u,$u){if(typeof $u=="function")return _u=_u(),$u(_u),function(){$u(null)};if($u!=null)return _u=_u(),$u.current=_u,function(){$u.current=null}}function Ih(_u,$u,Bu){return Bu=Bu!=null?Bu.concat([_u]):null,Dh(4,2,Hh.bind(null,$u,_u),Bu)}function Jh(){}function Kh(_u,$u){return th().memoizedState=[_u,$u===void 0?null:$u],_u}function Lh(_u,$u){var Bu=uh();$u=$u===void 0?null:$u;var Ru=Bu.memoizedState;return Ru!==null&&$u!==null&&nh($u,Ru[1])?Ru[0]:(Bu.memoizedState=[_u,$u],_u)}function Mh(_u,$u){var Bu=uh();$u=$u===void 0?null:$u;var Ru=Bu.memoizedState;return Ru!==null&&$u!==null&&nh($u,Ru[1])?Ru[0]:(_u=_u(),Bu.memoizedState=[_u,$u],_u)}function Nh(_u,$u,Bu){var Ru=ag();cg(98>Ru?98:Ru,function(){_u(!0)}),cg(97<Ru?97:Ru,function(){var Lu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{_u(!1),Bu()}finally{kh.suspense=Lu}})}function zh(_u,$u,Bu){var Ru=Gg$1(),Lu=Dg.suspense;Ru=Hg(Ru,_u,Lu),Lu={expirationTime:Ru,suspenseConfig:Lu,action:Bu,eagerReducer:null,eagerState:null,next:null};var Ou=$u.pending;if(Ou===null?Lu.next=Lu:(Lu.next=Ou.next,Ou.next=Lu),$u.pending=Lu,Ou=_u.alternate,_u===N$4||Ou!==null&&Ou===N$4)mh=!0,Lu.expirationTime=lh,N$4.expirationTime=lh;else{if(_u.expirationTime===0&&(Ou===null||Ou.expirationTime===0)&&(Ou=$u.lastRenderedReducer,Ou!==null))try{var Fu=$u.lastRenderedState,Nu=Ou(Fu,Bu);if(Lu.eagerReducer=Ou,Lu.eagerState=Nu,$e$1(Nu,Fu))return}catch{}finally{}Ig(_u,Ru)}}var sh={readContext:sg,useCallback:Q$3,useContext:Q$3,useEffect:Q$3,useImperativeHandle:Q$3,useLayoutEffect:Q$3,useMemo:Q$3,useReducer:Q$3,useRef:Q$3,useState:Q$3,useDebugValue:Q$3,useResponder:Q$3,useDeferredValue:Q$3,useTransition:Q$3},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(_u,$u,Bu){return Bu=Bu!=null?Bu.concat([_u]):null,Ch(4,2,Hh.bind(null,$u,_u),Bu)},useLayoutEffect:function(_u,$u){return Ch(4,2,_u,$u)},useMemo:function(_u,$u){var Bu=th();return $u=$u===void 0?null:$u,_u=_u(),Bu.memoizedState=[_u,$u],_u},useReducer:function(_u,$u,Bu){var Ru=th();return $u=Bu!==void 0?Bu($u):$u,Ru.memoizedState=Ru.baseState=$u,_u=Ru.queue={pending:null,dispatch:null,lastRenderedReducer:_u,lastRenderedState:$u},_u=_u.dispatch=zh.bind(null,N$4,_u),[Ru.memoizedState,_u]},useRef:function(_u){var $u=th();return _u={current:_u},$u.memoizedState=_u},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Bu=yh(_u),Ru=Bu[0],Lu=Bu[1];return Eh(function(){var Ou=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Lu(_u)}finally{kh.suspense=Ou}},[_u,$u]),Ru},useTransition:function(_u){var $u=yh(!1),Bu=$u[0];return $u=$u[1],[Kh(Nh.bind(null,$u,_u),[$u,_u]),Bu]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Bu=wh(vh),Ru=Bu[0],Lu=Bu[1];return Fh(function(){var Ou=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Lu(_u)}finally{kh.suspense=Ou}},[_u,$u]),Ru},useTransition:function(_u){var $u=wh(vh),Bu=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Bu]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Bu=xh(vh),Ru=Bu[0],Lu=Bu[1];return Fh(function(){var Ou=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Lu(_u)}finally{kh.suspense=Ou}},[_u,$u]),Ru},useTransition:function(_u){var $u=xh(vh),Bu=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Bu]}},Oh=null,Ph=null,Qh=!1;function Rh(_u,$u){var Bu=Sh(5,null,null,0);Bu.elementType="DELETED",Bu.type="DELETED",Bu.stateNode=$u,Bu.return=_u,Bu.effectTag=8,_u.lastEffect!==null?(_u.lastEffect.nextEffect=Bu,_u.lastEffect=Bu):_u.firstEffect=_u.lastEffect=Bu}function Th(_u,$u){switch(_u.tag){case 5:var Bu=_u.type;return $u=$u.nodeType!==1||Bu.toLowerCase()!==$u.nodeName.toLowerCase()?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 6:return $u=_u.pendingProps===""||$u.nodeType!==3?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 13:return!1;default:return!1}}function Uh(_u){if(Qh){var $u=Ph;if($u){var Bu=$u;if(!Th(_u,$u)){if($u=Jd$1(Bu.nextSibling),!$u||!Th(_u,$u)){_u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u;return}Rh(Oh,Bu)}Oh=_u,Ph=Jd$1($u.firstChild)}else _u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u}}function Vh(_u){for(_u=_u.return;_u!==null&&_u.tag!==5&&_u.tag!==3&&_u.tag!==13;)_u=_u.return;Oh=_u}function Wh(_u){if(_u!==Oh)return!1;if(!Qh)return Vh(_u),Qh=!0,!1;var $u=_u.type;if(_u.tag!==5||$u!=="head"&&$u!=="body"&&!Gd$1($u,_u.memoizedProps))for($u=Ph;$u;)Rh(_u,$u),$u=Jd$1($u.nextSibling);if(Vh(_u),_u.tag===13){if(_u=_u.memoizedState,_u=_u!==null?_u.dehydrated:null,!_u)throw Error(u$3(317));e:{for(_u=_u.nextSibling,$u=0;_u;){if(_u.nodeType===8){var Bu=_u.data;if(Bu===Ad){if($u===0){Ph=Jd$1(_u.nextSibling);break e}$u--}else Bu!==zd$1&&Bu!==Cd&&Bu!==Bd$1||$u++}_u=_u.nextSibling}Ph=null}}else Ph=Oh?Jd$1(_u.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa$2.ReactCurrentOwner,rg=!1;function R$3(_u,$u,Bu,Ru){$u.child=_u===null?Yg$1($u,null,Bu,Ru):Xg$1($u,_u.child,Bu,Ru)}function Zh(_u,$u,Bu,Ru,Lu){Bu=Bu.render;var Ou=$u.ref;return qg$1($u,Lu),Ru=oh(_u,$u,Bu,Ru,Ou,Lu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Lu&&(_u.expirationTime=0),$h(_u,$u,Lu)):($u.effectTag|=1,R$3(_u,$u,Ru,Lu),$u.child)}function ai$1(_u,$u,Bu,Ru,Lu,Ou){if(_u===null){var Fu=Bu.type;return typeof Fu=="function"&&!bi$1(Fu)&&Fu.defaultProps===void 0&&Bu.compare===null&&Bu.defaultProps===void 0?($u.tag=15,$u.type=Fu,ci$1(_u,$u,Fu,Ru,Lu,Ou)):(_u=Ug$1(Bu.type,null,Ru,null,$u.mode,Ou),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}return Fu=_u.child,Lu<Ou&&(Lu=Fu.memoizedProps,Bu=Bu.compare,Bu=Bu!==null?Bu:bf,Bu(Lu,Ru)&&_u.ref===$u.ref)?$h(_u,$u,Ou):($u.effectTag|=1,_u=Sg(Fu,Ru),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}function ci$1(_u,$u,Bu,Ru,Lu,Ou){return _u!==null&&bf(_u.memoizedProps,Ru)&&_u.ref===$u.ref&&(rg=!1,Lu<Ou)?($u.expirationTime=_u.expirationTime,$h(_u,$u,Ou)):di$1(_u,$u,Bu,Ru,Ou)}function ei$2(_u,$u){var Bu=$u.ref;(_u===null&&Bu!==null||_u!==null&&_u.ref!==Bu)&&($u.effectTag|=128)}function di$1(_u,$u,Bu,Ru,Lu){var Ou=L$3(Bu)?Bf:J$2.current;return Ou=Cf($u,Ou),qg$1($u,Lu),Bu=oh(_u,$u,Bu,Ru,Ou,Lu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Lu&&(_u.expirationTime=0),$h(_u,$u,Lu)):($u.effectTag|=1,R$3(_u,$u,Bu,Lu),$u.child)}function fi$1(_u,$u,Bu,Ru,Lu){if(L$3(Bu)){var Ou=!0;Gf($u)}else Ou=!1;if(qg$1($u,Lu),$u.stateNode===null)_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),Lg($u,Bu,Ru),Ng$1($u,Bu,Ru,Lu),Ru=!0;else if(_u===null){var Fu=$u.stateNode,Nu=$u.memoizedProps;Fu.props=Nu;var Vu=Fu.context,Uu=Bu.contextType;typeof Uu=="object"&&Uu!==null?Uu=sg(Uu):(Uu=L$3(Bu)?Bf:J$2.current,Uu=Cf($u,Uu));var Gu=Bu.getDerivedStateFromProps,zu=typeof Gu=="function"||typeof Fu.getSnapshotBeforeUpdate=="function";zu||typeof Fu.UNSAFE_componentWillReceiveProps!="function"&&typeof Fu.componentWillReceiveProps!="function"||(Nu!==Ru||Vu!==Uu)&&Mg($u,Fu,Ru,Uu),tg=!1;var Hu=$u.memoizedState;Fu.state=Hu,zg($u,Ru,Fu,Lu),Vu=$u.memoizedState,Nu!==Ru||Hu!==Vu||K$2.current||tg?(typeof Gu=="function"&&(Fg($u,Bu,Gu,Ru),Vu=$u.memoizedState),(Nu=tg||Kg$1($u,Bu,Nu,Ru,Hu,Vu,Uu))?(zu||typeof Fu.UNSAFE_componentWillMount!="function"&&typeof Fu.componentWillMount!="function"||(typeof Fu.componentWillMount=="function"&&Fu.componentWillMount(),typeof Fu.UNSAFE_componentWillMount=="function"&&Fu.UNSAFE_componentWillMount()),typeof Fu.componentDidMount=="function"&&($u.effectTag|=4)):(typeof Fu.componentDidMount=="function"&&($u.effectTag|=4),$u.memoizedProps=Ru,$u.memoizedState=Vu),Fu.props=Ru,Fu.state=Vu,Fu.context=Uu,Ru=Nu):(typeof Fu.componentDidMount=="function"&&($u.effectTag|=4),Ru=!1)}else Fu=$u.stateNode,vg(_u,$u),Nu=$u.memoizedProps,Fu.props=$u.type===$u.elementType?Nu:ig($u.type,Nu),Vu=Fu.context,Uu=Bu.contextType,typeof Uu=="object"&&Uu!==null?Uu=sg(Uu):(Uu=L$3(Bu)?Bf:J$2.current,Uu=Cf($u,Uu)),Gu=Bu.getDerivedStateFromProps,(zu=typeof Gu=="function"||typeof Fu.getSnapshotBeforeUpdate=="function")||typeof Fu.UNSAFE_componentWillReceiveProps!="function"&&typeof Fu.componentWillReceiveProps!="function"||(Nu!==Ru||Vu!==Uu)&&Mg($u,Fu,Ru,Uu),tg=!1,Vu=$u.memoizedState,Fu.state=Vu,zg($u,Ru,Fu,Lu),Hu=$u.memoizedState,Nu!==Ru||Vu!==Hu||K$2.current||tg?(typeof Gu=="function"&&(Fg($u,Bu,Gu,Ru),Hu=$u.memoizedState),(Gu=tg||Kg$1($u,Bu,Nu,Ru,Vu,Hu,Uu))?(zu||typeof Fu.UNSAFE_componentWillUpdate!="function"&&typeof Fu.componentWillUpdate!="function"||(typeof Fu.componentWillUpdate=="function"&&Fu.componentWillUpdate(Ru,Hu,Uu),typeof Fu.UNSAFE_componentWillUpdate=="function"&&Fu.UNSAFE_componentWillUpdate(Ru,Hu,Uu)),typeof Fu.componentDidUpdate=="function"&&($u.effectTag|=4),typeof Fu.getSnapshotBeforeUpdate=="function"&&($u.effectTag|=256)):(typeof Fu.componentDidUpdate!="function"||Nu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=4),typeof Fu.getSnapshotBeforeUpdate!="function"||Nu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=256),$u.memoizedProps=Ru,$u.memoizedState=Hu),Fu.props=Ru,Fu.state=Hu,Fu.context=Uu,Ru=Gu):(typeof Fu.componentDidUpdate!="function"||Nu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=4),typeof Fu.getSnapshotBeforeUpdate!="function"||Nu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=256),Ru=!1);return gi$1(_u,$u,Bu,Ru,Ou,Lu)}function gi$1(_u,$u,Bu,Ru,Lu,Ou){ei$2(_u,$u);var Fu=($u.effectTag&64)!==0;if(!Ru&&!Fu)return Lu&&Hf($u,Bu,!1),$h(_u,$u,Ou);Ru=$u.stateNode,Yh.current=$u;var Nu=Fu&&typeof Bu.getDerivedStateFromError!="function"?null:Ru.render();return $u.effectTag|=1,_u!==null&&Fu?($u.child=Xg$1($u,_u.child,null,Ou),$u.child=Xg$1($u,null,Nu,Ou)):R$3(_u,$u,Nu,Ou),$u.memoizedState=Ru.state,Lu&&Hf($u,Bu,!0),$u.child}function hi$1(_u){var $u=_u.stateNode;$u.pendingContext?Ef(_u,$u.pendingContext,$u.pendingContext!==$u.context):$u.context&&Ef(_u,$u.context,!1),dh(_u,$u.containerInfo)}var ii$1={dehydrated:null,retryTime:0};function ji$2(_u,$u,Bu){var Ru=$u.mode,Lu=$u.pendingProps,Ou=M$3.current,Fu=!1,Nu;if((Nu=($u.effectTag&64)!==0)||(Nu=(Ou&2)!==0&&(_u===null||_u.memoizedState!==null)),Nu?(Fu=!0,$u.effectTag&=-65):_u!==null&&_u.memoizedState===null||Lu.fallback===void 0||Lu.unstable_avoidThisFallback===!0||(Ou|=1),I$2(M$3,Ou&1),_u===null){if(Lu.fallback!==void 0&&Uh($u),Fu){if(Fu=Lu.fallback,Lu=Wg$1(null,Ru,0,null),Lu.return=$u,($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Lu.child=_u;_u!==null;)_u.return=Lu,_u=_u.sibling;return Bu=Wg$1(Fu,Ru,Bu,null),Bu.return=$u,Lu.sibling=Bu,$u.memoizedState=ii$1,$u.child=Lu,Bu}return Ru=Lu.children,$u.memoizedState=null,$u.child=Yg$1($u,null,Ru,Bu)}if(_u.memoizedState!==null){if(_u=_u.child,Ru=_u.sibling,Fu){if(Lu=Lu.fallback,Bu=Sg(_u,_u.pendingProps),Bu.return=$u,($u.mode&2)===0&&(Fu=$u.memoizedState!==null?$u.child.child:$u.child,Fu!==_u.child))for(Bu.child=Fu;Fu!==null;)Fu.return=Bu,Fu=Fu.sibling;return Ru=Sg(Ru,Lu),Ru.return=$u,Bu.sibling=Ru,Bu.childExpirationTime=0,$u.memoizedState=ii$1,$u.child=Bu,Ru}return Bu=Xg$1($u,_u.child,Lu.children,Bu),$u.memoizedState=null,$u.child=Bu}if(_u=_u.child,Fu){if(Fu=Lu.fallback,Lu=Wg$1(null,Ru,0,null),Lu.return=$u,Lu.child=_u,_u!==null&&(_u.return=Lu),($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Lu.child=_u;_u!==null;)_u.return=Lu,_u=_u.sibling;return Bu=Wg$1(Fu,Ru,Bu,null),Bu.return=$u,Lu.sibling=Bu,Bu.effectTag|=2,Lu.childExpirationTime=0,$u.memoizedState=ii$1,$u.child=Lu,Bu}return $u.memoizedState=null,$u.child=Xg$1($u,_u,Lu.children,Bu)}function ki$2(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Bu=_u.alternate;Bu!==null&&Bu.expirationTime<$u&&(Bu.expirationTime=$u),pg(_u.return,$u)}function li$1(_u,$u,Bu,Ru,Lu,Ou){var Fu=_u.memoizedState;Fu===null?_u.memoizedState={isBackwards:$u,rendering:null,renderingStartTime:0,last:Ru,tail:Bu,tailExpiration:0,tailMode:Lu,lastEffect:Ou}:(Fu.isBackwards=$u,Fu.rendering=null,Fu.renderingStartTime=0,Fu.last=Ru,Fu.tail=Bu,Fu.tailExpiration=0,Fu.tailMode=Lu,Fu.lastEffect=Ou)}function mi$1(_u,$u,Bu){var Ru=$u.pendingProps,Lu=Ru.revealOrder,Ou=Ru.tail;if(R$3(_u,$u,Ru.children,Bu),Ru=M$3.current,(Ru&2)!==0)Ru=Ru&1|2,$u.effectTag|=64;else{if(_u!==null&&(_u.effectTag&64)!==0)e:for(_u=$u.child;_u!==null;){if(_u.tag===13)_u.memoizedState!==null&&ki$2(_u,Bu);else if(_u.tag===19)ki$2(_u,Bu);else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===$u)break e;for(;_u.sibling===null;){if(_u.return===null||_u.return===$u)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Ru&=1}if(I$2(M$3,Ru),($u.mode&2)===0)$u.memoizedState=null;else switch(Lu){case"forwards":for(Bu=$u.child,Lu=null;Bu!==null;)_u=Bu.alternate,_u!==null&&hh(_u)===null&&(Lu=Bu),Bu=Bu.sibling;Bu=Lu,Bu===null?(Lu=$u.child,$u.child=null):(Lu=Bu.sibling,Bu.sibling=null),li$1($u,!1,Lu,Bu,Ou,$u.lastEffect);break;case"backwards":for(Bu=null,Lu=$u.child,$u.child=null;Lu!==null;){if(_u=Lu.alternate,_u!==null&&hh(_u)===null){$u.child=Lu;break}_u=Lu.sibling,Lu.sibling=Bu,Bu=Lu,Lu=_u}li$1($u,!0,Bu,null,Ou,$u.lastEffect);break;case"together":li$1($u,!1,null,null,void 0,$u.lastEffect);break;default:$u.memoizedState=null}return $u.child}function $h(_u,$u,Bu){_u!==null&&($u.dependencies=_u.dependencies);var Ru=$u.expirationTime;if(Ru!==0&&Bg(Ru),$u.childExpirationTime<Bu)return null;if(_u!==null&&$u.child!==_u.child)throw Error(u$3(153));if($u.child!==null){for(_u=$u.child,Bu=Sg(_u,_u.pendingProps),$u.child=Bu,Bu.return=$u;_u.sibling!==null;)_u=_u.sibling,Bu=Bu.sibling=Sg(_u,_u.pendingProps),Bu.return=$u;Bu.sibling=null}return $u.child}var ni$2,oi$2,pi$1,qi$2;ni$2=function(_u,$u){for(var Bu=$u.child;Bu!==null;){if(Bu.tag===5||Bu.tag===6)_u.appendChild(Bu.stateNode);else if(Bu.tag!==4&&Bu.child!==null){Bu.child.return=Bu,Bu=Bu.child;continue}if(Bu===$u)break;for(;Bu.sibling===null;){if(Bu.return===null||Bu.return===$u)return;Bu=Bu.return}Bu.sibling.return=Bu.return,Bu=Bu.sibling}};oi$2=function(){};pi$1=function(_u,$u,Bu,Ru,Lu){var Ou=_u.memoizedProps;if(Ou!==Ru){var Fu=$u.stateNode;switch(ch($g$1.current),_u=null,Bu){case"input":Ou=zb$1(Fu,Ou),Ru=zb$1(Fu,Ru),_u=[];break;case"option":Ou=Gb$1(Fu,Ou),Ru=Gb$1(Fu,Ru),_u=[];break;case"select":Ou=n$4({},Ou,{value:void 0}),Ru=n$4({},Ru,{value:void 0}),_u=[];break;case"textarea":Ou=Ib$1(Fu,Ou),Ru=Ib$1(Fu,Ru),_u=[];break;default:typeof Ou.onClick!="function"&&typeof Ru.onClick=="function"&&(Fu.onclick=sd)}od(Bu,Ru);var Nu,Vu;Bu=null;for(Nu in Ou)if(!Ru.hasOwnProperty(Nu)&&Ou.hasOwnProperty(Nu)&&Ou[Nu]!=null)if(Nu==="style")for(Vu in Fu=Ou[Nu],Fu)Fu.hasOwnProperty(Vu)&&(Bu||(Bu={}),Bu[Vu]="");else Nu!=="dangerouslySetInnerHTML"&&Nu!=="children"&&Nu!=="suppressContentEditableWarning"&&Nu!=="suppressHydrationWarning"&&Nu!=="autoFocus"&&(va$1.hasOwnProperty(Nu)?_u||(_u=[]):(_u=_u||[]).push(Nu,null));for(Nu in Ru){var Uu=Ru[Nu];if(Fu=Ou!=null?Ou[Nu]:void 0,Ru.hasOwnProperty(Nu)&&Uu!==Fu&&(Uu!=null||Fu!=null))if(Nu==="style")if(Fu){for(Vu in Fu)!Fu.hasOwnProperty(Vu)||Uu&&Uu.hasOwnProperty(Vu)||(Bu||(Bu={}),Bu[Vu]="");for(Vu in Uu)Uu.hasOwnProperty(Vu)&&Fu[Vu]!==Uu[Vu]&&(Bu||(Bu={}),Bu[Vu]=Uu[Vu])}else Bu||(_u||(_u=[]),_u.push(Nu,Bu)),Bu=Uu;else Nu==="dangerouslySetInnerHTML"?(Uu=Uu?Uu.__html:void 0,Fu=Fu?Fu.__html:void 0,Uu!=null&&Fu!==Uu&&(_u=_u||[]).push(Nu,Uu)):Nu==="children"?Fu===Uu||typeof Uu!="string"&&typeof Uu!="number"||(_u=_u||[]).push(Nu,""+Uu):Nu!=="suppressContentEditableWarning"&&Nu!=="suppressHydrationWarning"&&(va$1.hasOwnProperty(Nu)?(Uu!=null&&rd(Lu,Nu),_u||Fu===Uu||(_u=[])):(_u=_u||[]).push(Nu,Uu))}Bu&&(_u=_u||[]).push("style",Bu),Lu=_u,($u.updateQueue=Lu)&&($u.effectTag|=4)}};qi$2=function(_u,$u,Bu,Ru){Bu!==Ru&&($u.effectTag|=4)};function ri$1(_u,$u){switch(_u.tailMode){case"hidden":$u=_u.tail;for(var Bu=null;$u!==null;)$u.alternate!==null&&(Bu=$u),$u=$u.sibling;Bu===null?_u.tail=null:Bu.sibling=null;break;case"collapsed":Bu=_u.tail;for(var Ru=null;Bu!==null;)Bu.alternate!==null&&(Ru=Bu),Bu=Bu.sibling;Ru===null?$u||_u.tail===null?_u.tail=null:_u.tail.sibling=null:Ru.sibling=null}}function si$2(_u,$u,Bu){var Ru=$u.pendingProps;switch($u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$3($u.type)&&Df(),null;case 3:return eh(),H$3(K$2),H$3(J$2),Bu=$u.stateNode,Bu.pendingContext&&(Bu.context=Bu.pendingContext,Bu.pendingContext=null),_u!==null&&_u.child!==null||!Wh($u)||($u.effectTag|=4),oi$2($u),null;case 5:gh($u),Bu=ch(bh.current);var Lu=$u.type;if(_u!==null&&$u.stateNode!=null)pi$1(_u,$u,Lu,Ru,Bu),_u.ref!==$u.ref&&($u.effectTag|=128);else{if(!Ru){if($u.stateNode===null)throw Error(u$3(166));return null}if(_u=ch($g$1.current),Wh($u)){Ru=$u.stateNode,Lu=$u.type;var Ou=$u.memoizedProps;switch(Ru[Md$1]=$u,Ru[Nd$1]=Ou,Lu){case"iframe":case"object":case"embed":F$3("load",Ru);break;case"video":case"audio":for(_u=0;_u<ac$1.length;_u++)F$3(ac$1[_u],Ru);break;case"source":F$3("error",Ru);break;case"img":case"image":case"link":F$3("error",Ru),F$3("load",Ru);break;case"form":F$3("reset",Ru),F$3("submit",Ru);break;case"details":F$3("toggle",Ru);break;case"input":Ab$1(Ru,Ou),F$3("invalid",Ru),rd(Bu,"onChange");break;case"select":Ru._wrapperState={wasMultiple:!!Ou.multiple},F$3("invalid",Ru),rd(Bu,"onChange");break;case"textarea":Jb$1(Ru,Ou),F$3("invalid",Ru),rd(Bu,"onChange")}od(Lu,Ou),_u=null;for(var Fu in Ou)if(Ou.hasOwnProperty(Fu)){var Nu=Ou[Fu];Fu==="children"?typeof Nu=="string"?Ru.textContent!==Nu&&(_u=["children",Nu]):typeof Nu=="number"&&Ru.textContent!==""+Nu&&(_u=["children",""+Nu]):va$1.hasOwnProperty(Fu)&&Nu!=null&&rd(Bu,Fu)}switch(Lu){case"input":xb$1(Ru),Eb$1(Ru,Ou,!0);break;case"textarea":xb$1(Ru),Lb$1(Ru);break;case"select":case"option":break;default:typeof Ou.onClick=="function"&&(Ru.onclick=sd)}Bu=_u,$u.updateQueue=Bu,Bu!==null&&($u.effectTag|=4)}else{switch(Fu=Bu.nodeType===9?Bu:Bu.ownerDocument,_u===qd&&(_u=Nb$1(Lu)),_u===qd?Lu==="script"?(_u=Fu.createElement("div"),_u.innerHTML="<script><\/script>",_u=_u.removeChild(_u.firstChild)):typeof Ru.is=="string"?_u=Fu.createElement(Lu,{is:Ru.is}):(_u=Fu.createElement(Lu),Lu==="select"&&(Fu=_u,Ru.multiple?Fu.multiple=!0:Ru.size&&(Fu.size=Ru.size))):_u=Fu.createElementNS(_u,Lu),_u[Md$1]=$u,_u[Nd$1]=Ru,ni$2(_u,$u,!1,!1),$u.stateNode=_u,Fu=pd(Lu,Ru),Lu){case"iframe":case"object":case"embed":F$3("load",_u),Nu=Ru;break;case"video":case"audio":for(Nu=0;Nu<ac$1.length;Nu++)F$3(ac$1[Nu],_u);Nu=Ru;break;case"source":F$3("error",_u),Nu=Ru;break;case"img":case"image":case"link":F$3("error",_u),F$3("load",_u),Nu=Ru;break;case"form":F$3("reset",_u),F$3("submit",_u),Nu=Ru;break;case"details":F$3("toggle",_u),Nu=Ru;break;case"input":Ab$1(_u,Ru),Nu=zb$1(_u,Ru),F$3("invalid",_u),rd(Bu,"onChange");break;case"option":Nu=Gb$1(_u,Ru);break;case"select":_u._wrapperState={wasMultiple:!!Ru.multiple},Nu=n$4({},Ru,{value:void 0}),F$3("invalid",_u),rd(Bu,"onChange");break;case"textarea":Jb$1(_u,Ru),Nu=Ib$1(_u,Ru),F$3("invalid",_u),rd(Bu,"onChange");break;default:Nu=Ru}od(Lu,Nu);var Vu=Nu;for(Ou in Vu)if(Vu.hasOwnProperty(Ou)){var Uu=Vu[Ou];Ou==="style"?md(_u,Uu):Ou==="dangerouslySetInnerHTML"?(Uu=Uu?Uu.__html:void 0,Uu!=null&&Qb$1(_u,Uu)):Ou==="children"?typeof Uu=="string"?(Lu!=="textarea"||Uu!=="")&&Rb$1(_u,Uu):typeof Uu=="number"&&Rb$1(_u,""+Uu):Ou!=="suppressContentEditableWarning"&&Ou!=="suppressHydrationWarning"&&Ou!=="autoFocus"&&(va$1.hasOwnProperty(Ou)?Uu!=null&&rd(Bu,Ou):Uu!=null&&Xa$2(_u,Ou,Uu,Fu))}switch(Lu){case"input":xb$1(_u),Eb$1(_u,Ru,!1);break;case"textarea":xb$1(_u),Lb$1(_u);break;case"option":Ru.value!=null&&_u.setAttribute("value",""+rb$1(Ru.value));break;case"select":_u.multiple=!!Ru.multiple,Bu=Ru.value,Bu!=null?Hb$1(_u,!!Ru.multiple,Bu,!1):Ru.defaultValue!=null&&Hb$1(_u,!!Ru.multiple,Ru.defaultValue,!0);break;default:typeof Nu.onClick=="function"&&(_u.onclick=sd)}Fd$1(Lu,Ru)&&($u.effectTag|=4)}$u.ref!==null&&($u.effectTag|=128)}return null;case 6:if(_u&&$u.stateNode!=null)qi$2(_u,$u,_u.memoizedProps,Ru);else{if(typeof Ru!="string"&&$u.stateNode===null)throw Error(u$3(166));Bu=ch(bh.current),ch($g$1.current),Wh($u)?(Bu=$u.stateNode,Ru=$u.memoizedProps,Bu[Md$1]=$u,Bu.nodeValue!==Ru&&($u.effectTag|=4)):(Bu=(Bu.nodeType===9?Bu:Bu.ownerDocument).createTextNode(Ru),Bu[Md$1]=$u,$u.stateNode=Bu)}return null;case 13:return H$3(M$3),Ru=$u.memoizedState,($u.effectTag&64)!==0?($u.expirationTime=Bu,$u):(Bu=Ru!==null,Ru=!1,_u===null?$u.memoizedProps.fallback!==void 0&&Wh($u):(Lu=_u.memoizedState,Ru=Lu!==null,Bu||Lu===null||(Lu=_u.child.sibling,Lu!==null&&(Ou=$u.firstEffect,Ou!==null?($u.firstEffect=Lu,Lu.nextEffect=Ou):($u.firstEffect=$u.lastEffect=Lu,Lu.nextEffect=null),Lu.effectTag=8))),Bu&&!Ru&&($u.mode&2)!==0&&(_u===null&&$u.memoizedProps.unstable_avoidThisFallback!==!0||(M$3.current&1)!==0?S$2===ti$2&&(S$2=ui$1):((S$2===ti$2||S$2===ui$1)&&(S$2=vi$1),wi$2!==0&&T$1!==null&&(xi$1(T$1,U$2),yi$2(T$1,wi$2)))),(Bu||Ru)&&($u.effectTag|=4),null);case 4:return eh(),oi$2($u),null;case 10:return og($u),null;case 17:return L$3($u.type)&&Df(),null;case 19:if(H$3(M$3),Ru=$u.memoizedState,Ru===null)return null;if(Lu=($u.effectTag&64)!==0,Ou=Ru.rendering,Ou===null){if(Lu)ri$1(Ru,!1);else if(S$2!==ti$2||_u!==null&&(_u.effectTag&64)!==0)for(Ou=$u.child;Ou!==null;){if(_u=hh(Ou),_u!==null){for($u.effectTag|=64,ri$1(Ru,!1),Lu=_u.updateQueue,Lu!==null&&($u.updateQueue=Lu,$u.effectTag|=4),Ru.lastEffect===null&&($u.firstEffect=null),$u.lastEffect=Ru.lastEffect,Ru=$u.child;Ru!==null;)Lu=Ru,Ou=Bu,Lu.effectTag&=2,Lu.nextEffect=null,Lu.firstEffect=null,Lu.lastEffect=null,_u=Lu.alternate,_u===null?(Lu.childExpirationTime=0,Lu.expirationTime=Ou,Lu.child=null,Lu.memoizedProps=null,Lu.memoizedState=null,Lu.updateQueue=null,Lu.dependencies=null):(Lu.childExpirationTime=_u.childExpirationTime,Lu.expirationTime=_u.expirationTime,Lu.child=_u.child,Lu.memoizedProps=_u.memoizedProps,Lu.memoizedState=_u.memoizedState,Lu.updateQueue=_u.updateQueue,Ou=_u.dependencies,Lu.dependencies=Ou===null?null:{expirationTime:Ou.expirationTime,firstContext:Ou.firstContext,responders:Ou.responders}),Ru=Ru.sibling;return I$2(M$3,M$3.current&1|2),$u.child}Ou=Ou.sibling}}else{if(!Lu)if(_u=hh(Ou),_u!==null){if($u.effectTag|=64,Lu=!0,Bu=_u.updateQueue,Bu!==null&&($u.updateQueue=Bu,$u.effectTag|=4),ri$1(Ru,!0),Ru.tail===null&&Ru.tailMode==="hidden"&&!Ou.alternate)return $u=$u.lastEffect=Ru.lastEffect,$u!==null&&($u.nextEffect=null),null}else 2*$f()-Ru.renderingStartTime>Ru.tailExpiration&&1<Bu&&($u.effectTag|=64,Lu=!0,ri$1(Ru,!1),$u.expirationTime=$u.childExpirationTime=Bu-1);Ru.isBackwards?(Ou.sibling=$u.child,$u.child=Ou):(Bu=Ru.last,Bu!==null?Bu.sibling=Ou:$u.child=Ou,Ru.last=Ou)}return Ru.tail!==null?(Ru.tailExpiration===0&&(Ru.tailExpiration=$f()+500),Bu=Ru.tail,Ru.rendering=Bu,Ru.tail=Bu.sibling,Ru.lastEffect=$u.lastEffect,Ru.renderingStartTime=$f(),Bu.sibling=null,$u=M$3.current,I$2(M$3,Lu?$u&1|2:$u&1),Bu):null}throw Error(u$3(156,$u.tag))}function zi$2(_u){switch(_u.tag){case 1:L$3(_u.type)&&Df();var $u=_u.effectTag;return $u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 3:if(eh(),H$3(K$2),H$3(J$2),$u=_u.effectTag,($u&64)!==0)throw Error(u$3(285));return _u.effectTag=$u&-4097|64,_u;case 5:return gh(_u),null;case 13:return H$3(M$3),$u=_u.effectTag,$u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 19:return H$3(M$3),null;case 4:return eh(),null;case 10:return og(_u),null;default:return null}}function Ai$2(_u,$u){return{value:_u,source:$u,stack:qb$1($u)}}var Bi$2=typeof WeakSet=="function"?WeakSet:Set;function Ci$1(_u,$u){var Bu=$u.source,Ru=$u.stack;Ru===null&&Bu!==null&&(Ru=qb$1(Bu)),Bu!==null&&pb$1(Bu.type),$u=$u.value,_u!==null&&_u.tag===1&&pb$1(_u.type);try{console.error($u)}catch(Lu){setTimeout(function(){throw Lu})}}function Di$2(_u,$u){try{$u.props=_u.memoizedProps,$u.state=_u.memoizedState,$u.componentWillUnmount()}catch(Bu){Ei$2(_u,Bu)}}function Fi$2(_u){var $u=_u.ref;if($u!==null)if(typeof $u=="function")try{$u(null)}catch(Bu){Ei$2(_u,Bu)}else $u.current=null}function Gi$1(_u,$u){switch($u.tag){case 0:case 11:case 15:case 22:return;case 1:if($u.effectTag&256&&_u!==null){var Bu=_u.memoizedProps,Ru=_u.memoizedState;_u=$u.stateNode,$u=_u.getSnapshotBeforeUpdate($u.elementType===$u.type?Bu:ig($u.type,Bu),Ru),_u.__reactInternalSnapshotBeforeUpdate=$u}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$3(163))}function Hi$1(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Bu=$u=$u.next;do{if((Bu.tag&_u)===_u){var Ru=Bu.destroy;Bu.destroy=void 0,Ru!==void 0&&Ru()}Bu=Bu.next}while(Bu!==$u)}}function Ii$1(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Bu=$u=$u.next;do{if((Bu.tag&_u)===_u){var Ru=Bu.create;Bu.destroy=Ru()}Bu=Bu.next}while(Bu!==$u)}}function Ji$2(_u,$u,Bu){switch(Bu.tag){case 0:case 11:case 15:case 22:Ii$1(3,Bu);return;case 1:if(_u=Bu.stateNode,Bu.effectTag&4)if($u===null)_u.componentDidMount();else{var Ru=Bu.elementType===Bu.type?$u.memoizedProps:ig(Bu.type,$u.memoizedProps);_u.componentDidUpdate(Ru,$u.memoizedState,_u.__reactInternalSnapshotBeforeUpdate)}$u=Bu.updateQueue,$u!==null&&Cg(Bu,$u,_u);return;case 3:if($u=Bu.updateQueue,$u!==null){if(_u=null,Bu.child!==null)switch(Bu.child.tag){case 5:_u=Bu.child.stateNode;break;case 1:_u=Bu.child.stateNode}Cg(Bu,$u,_u)}return;case 5:_u=Bu.stateNode,$u===null&&Bu.effectTag&4&&Fd$1(Bu.type,Bu.memoizedProps)&&_u.focus();return;case 6:return;case 4:return;case 12:return;case 13:Bu.memoizedState===null&&(Bu=Bu.alternate,Bu!==null&&(Bu=Bu.memoizedState,Bu!==null&&(Bu=Bu.dehydrated,Bu!==null&&Vc$1(Bu))));return;case 19:case 17:case 20:case 21:return}throw Error(u$3(163))}function Ki$1(_u,$u,Bu){switch(typeof Li$2=="function"&&Li$2($u),$u.tag){case 0:case 11:case 14:case 15:case 22:if(_u=$u.updateQueue,_u!==null&&(_u=_u.lastEffect,_u!==null)){var Ru=_u.next;cg(97<Bu?97:Bu,function(){var Lu=Ru;do{var Ou=Lu.destroy;if(Ou!==void 0){var Fu=$u;try{Ou()}catch(Nu){Ei$2(Fu,Nu)}}Lu=Lu.next}while(Lu!==Ru)})}break;case 1:Fi$2($u),Bu=$u.stateNode,typeof Bu.componentWillUnmount=="function"&&Di$2($u,Bu);break;case 5:Fi$2($u);break;case 4:Mi$2(_u,$u,Bu)}}function Ni$2(_u){var $u=_u.alternate;_u.return=null,_u.child=null,_u.memoizedState=null,_u.updateQueue=null,_u.dependencies=null,_u.alternate=null,_u.firstEffect=null,_u.lastEffect=null,_u.pendingProps=null,_u.memoizedProps=null,_u.stateNode=null,$u!==null&&Ni$2($u)}function Oi$2(_u){return _u.tag===5||_u.tag===3||_u.tag===4}function Pi$1(_u){e:{for(var $u=_u.return;$u!==null;){if(Oi$2($u)){var Bu=$u;break e}$u=$u.return}throw Error(u$3(160))}switch($u=Bu.stateNode,Bu.tag){case 5:var Ru=!1;break;case 3:$u=$u.containerInfo,Ru=!0;break;case 4:$u=$u.containerInfo,Ru=!0;break;default:throw Error(u$3(161))}Bu.effectTag&16&&(Rb$1($u,""),Bu.effectTag&=-17);e:t:for(Bu=_u;;){for(;Bu.sibling===null;){if(Bu.return===null||Oi$2(Bu.return)){Bu=null;break e}Bu=Bu.return}for(Bu.sibling.return=Bu.return,Bu=Bu.sibling;Bu.tag!==5&&Bu.tag!==6&&Bu.tag!==18;){if(Bu.effectTag&2||Bu.child===null||Bu.tag===4)continue t;Bu.child.return=Bu,Bu=Bu.child}if(!(Bu.effectTag&2)){Bu=Bu.stateNode;break e}}Ru?Qi$2(_u,Bu,$u):Ri$1(_u,Bu,$u)}function Qi$2(_u,$u,Bu){var Ru=_u.tag,Lu=Ru===5||Ru===6;if(Lu)_u=Lu?_u.stateNode:_u.stateNode.instance,$u?Bu.nodeType===8?Bu.parentNode.insertBefore(_u,$u):Bu.insertBefore(_u,$u):(Bu.nodeType===8?($u=Bu.parentNode,$u.insertBefore(_u,Bu)):($u=Bu,$u.appendChild(_u)),Bu=Bu._reactRootContainer,Bu!=null||$u.onclick!==null||($u.onclick=sd));else if(Ru!==4&&(_u=_u.child,_u!==null))for(Qi$2(_u,$u,Bu),_u=_u.sibling;_u!==null;)Qi$2(_u,$u,Bu),_u=_u.sibling}function Ri$1(_u,$u,Bu){var Ru=_u.tag,Lu=Ru===5||Ru===6;if(Lu)_u=Lu?_u.stateNode:_u.stateNode.instance,$u?Bu.insertBefore(_u,$u):Bu.appendChild(_u);else if(Ru!==4&&(_u=_u.child,_u!==null))for(Ri$1(_u,$u,Bu),_u=_u.sibling;_u!==null;)Ri$1(_u,$u,Bu),_u=_u.sibling}function Mi$2(_u,$u,Bu){for(var Ru=$u,Lu=!1,Ou,Fu;;){if(!Lu){Lu=Ru.return;e:for(;;){if(Lu===null)throw Error(u$3(160));switch(Ou=Lu.stateNode,Lu.tag){case 5:Fu=!1;break e;case 3:Ou=Ou.containerInfo,Fu=!0;break e;case 4:Ou=Ou.containerInfo,Fu=!0;break e}Lu=Lu.return}Lu=!0}if(Ru.tag===5||Ru.tag===6){e:for(var Nu=_u,Vu=Ru,Uu=Bu,Gu=Vu;;)if(Ki$1(Nu,Gu,Uu),Gu.child!==null&&Gu.tag!==4)Gu.child.return=Gu,Gu=Gu.child;else{if(Gu===Vu)break e;for(;Gu.sibling===null;){if(Gu.return===null||Gu.return===Vu)break e;Gu=Gu.return}Gu.sibling.return=Gu.return,Gu=Gu.sibling}Fu?(Nu=Ou,Vu=Ru.stateNode,Nu.nodeType===8?Nu.parentNode.removeChild(Vu):Nu.removeChild(Vu)):Ou.removeChild(Ru.stateNode)}else if(Ru.tag===4){if(Ru.child!==null){Ou=Ru.stateNode.containerInfo,Fu=!0,Ru.child.return=Ru,Ru=Ru.child;continue}}else if(Ki$1(_u,Ru,Bu),Ru.child!==null){Ru.child.return=Ru,Ru=Ru.child;continue}if(Ru===$u)break;for(;Ru.sibling===null;){if(Ru.return===null||Ru.return===$u)return;Ru=Ru.return,Ru.tag===4&&(Lu=!1)}Ru.sibling.return=Ru.return,Ru=Ru.sibling}}function Si$1(_u,$u){switch($u.tag){case 0:case 11:case 14:case 15:case 22:Hi$1(3,$u);return;case 1:return;case 5:var Bu=$u.stateNode;if(Bu!=null){var Ru=$u.memoizedProps,Lu=_u!==null?_u.memoizedProps:Ru;_u=$u.type;var Ou=$u.updateQueue;if($u.updateQueue=null,Ou!==null){for(Bu[Nd$1]=Ru,_u==="input"&&Ru.type==="radio"&&Ru.name!=null&&Bb$1(Bu,Ru),pd(_u,Lu),$u=pd(_u,Ru),Lu=0;Lu<Ou.length;Lu+=2){var Fu=Ou[Lu],Nu=Ou[Lu+1];Fu==="style"?md(Bu,Nu):Fu==="dangerouslySetInnerHTML"?Qb$1(Bu,Nu):Fu==="children"?Rb$1(Bu,Nu):Xa$2(Bu,Fu,Nu,$u)}switch(_u){case"input":Cb$1(Bu,Ru);break;case"textarea":Kb$1(Bu,Ru);break;case"select":$u=Bu._wrapperState.wasMultiple,Bu._wrapperState.wasMultiple=!!Ru.multiple,_u=Ru.value,_u!=null?Hb$1(Bu,!!Ru.multiple,_u,!1):$u!==!!Ru.multiple&&(Ru.defaultValue!=null?Hb$1(Bu,!!Ru.multiple,Ru.defaultValue,!0):Hb$1(Bu,!!Ru.multiple,Ru.multiple?[]:"",!1))}}}return;case 6:if($u.stateNode===null)throw Error(u$3(162));$u.stateNode.nodeValue=$u.memoizedProps;return;case 3:$u=$u.stateNode,$u.hydrate&&($u.hydrate=!1,Vc$1($u.containerInfo));return;case 12:return;case 13:if(Bu=$u,$u.memoizedState===null?Ru=!1:(Ru=!0,Bu=$u.child,Ti$1=$f()),Bu!==null)e:for(_u=Bu;;){if(_u.tag===5)Ou=_u.stateNode,Ru?(Ou=Ou.style,typeof Ou.setProperty=="function"?Ou.setProperty("display","none","important"):Ou.display="none"):(Ou=_u.stateNode,Lu=_u.memoizedProps.style,Lu=Lu!=null&&Lu.hasOwnProperty("display")?Lu.display:null,Ou.style.display=ld("display",Lu));else if(_u.tag===6)_u.stateNode.nodeValue=Ru?"":_u.memoizedProps;else if(_u.tag===13&&_u.memoizedState!==null&&_u.memoizedState.dehydrated===null){Ou=_u.child.sibling,Ou.return=_u,_u=Ou;continue}else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===Bu)break;for(;_u.sibling===null;){if(_u.return===null||_u.return===Bu)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Ui$2($u);return;case 19:Ui$2($u);return;case 17:return}throw Error(u$3(163))}function Ui$2(_u){var $u=_u.updateQueue;if($u!==null){_u.updateQueue=null;var Bu=_u.stateNode;Bu===null&&(Bu=_u.stateNode=new Bi$2),$u.forEach(function(Ru){var Lu=Vi$2.bind(null,_u,Ru);Bu.has(Ru)||(Bu.add(Ru),Ru.then(Lu,Lu))})}}var Wi$2=typeof WeakMap=="function"?WeakMap:Map;function Xi$2(_u,$u,Bu){Bu=wg(Bu,null),Bu.tag=3,Bu.payload={element:null};var Ru=$u.value;return Bu.callback=function(){Yi$2||(Yi$2=!0,Zi$1=Ru),Ci$1(_u,$u)},Bu}function $i$1(_u,$u,Bu){Bu=wg(Bu,null),Bu.tag=3;var Ru=_u.type.getDerivedStateFromError;if(typeof Ru=="function"){var Lu=$u.value;Bu.payload=function(){return Ci$1(_u,$u),Ru(Lu)}}var Ou=_u.stateNode;return Ou!==null&&typeof Ou.componentDidCatch=="function"&&(Bu.callback=function(){typeof Ru!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$1(_u,$u));var Fu=$u.stack;this.componentDidCatch($u.value,{componentStack:Fu!==null?Fu:""})}),Bu}var bj=Math.ceil,cj=Wa$2.ReactCurrentDispatcher,dj=Wa$2.ReactCurrentOwner,V$2=0,ej=8,fj=16,gj=32,ti$2=0,hj=1,ij=2,ui$1=3,vi$1=4,jj=5,W$4=V$2,T$1=null,X$2=null,U$2=0,S$2=ti$2,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$2=0,oj=!1,Ti$1=0,pj=500,Y$2=null,Yi$2=!1,Zi$1=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg$1(){return(W$4&(fj|gj))!==V$2?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(_u,$u,Bu){if($u=$u.mode,($u&2)===0)return 1073741823;var Ru=ag();if(($u&4)===0)return Ru===99?1073741823:1073741822;if((W$4&fj)!==V$2)return U$2;if(Bu!==null)_u=hg(_u,Bu.timeoutMs|0||5e3,250);else switch(Ru){case 99:_u=1073741823;break;case 98:_u=hg(_u,150,100);break;case 97:case 96:_u=hg(_u,5e3,250);break;case 95:_u=2;break;default:throw Error(u$3(326))}return T$1!==null&&_u===U$2&&--_u,_u}function Ig(_u,$u){if(50<uj)throw uj=0,vj=null,Error(u$3(185));if(_u=xj(_u,$u),_u!==null){var Bu=ag();$u===1073741823?(W$4&ej)!==V$2&&(W$4&(fj|gj))===V$2?yj(_u):(Z$2(_u),W$4===V$2&&gg()):Z$2(_u),(W$4&4)===V$2||Bu!==98&&Bu!==99||(tj===null?tj=new Map([[_u,$u]]):(Bu=tj.get(_u),(Bu===void 0||Bu>$u)&&tj.set(_u,$u)))}}function xj(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Bu=_u.alternate;Bu!==null&&Bu.expirationTime<$u&&(Bu.expirationTime=$u);var Ru=_u.return,Lu=null;if(Ru===null&&_u.tag===3)Lu=_u.stateNode;else for(;Ru!==null;){if(Bu=Ru.alternate,Ru.childExpirationTime<$u&&(Ru.childExpirationTime=$u),Bu!==null&&Bu.childExpirationTime<$u&&(Bu.childExpirationTime=$u),Ru.return===null&&Ru.tag===3){Lu=Ru.stateNode;break}Ru=Ru.return}return Lu!==null&&(T$1===Lu&&(Bg($u),S$2===vi$1&&xi$1(Lu,U$2)),yi$2(Lu,$u)),Lu}function zj(_u){var $u=_u.lastExpiredTime;if($u!==0||($u=_u.firstPendingTime,!Aj(_u,$u)))return $u;var Bu=_u.lastPingedTime;return _u=_u.nextKnownPendingLevel,_u=Bu>_u?Bu:_u,2>=_u&&$u!==_u?0:_u}function Z$2(_u){if(_u.lastExpiredTime!==0)_u.callbackExpirationTime=1073741823,_u.callbackPriority=99,_u.callbackNode=eg(yj.bind(null,_u));else{var $u=zj(_u),Bu=_u.callbackNode;if($u===0)Bu!==null&&(_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90);else{var Ru=Gg$1();if($u===1073741823?Ru=99:$u===1||$u===2?Ru=95:(Ru=10*(1073741821-$u)-10*(1073741821-Ru),Ru=0>=Ru?99:250>=Ru?98:5250>=Ru?97:95),Bu!==null){var Lu=_u.callbackPriority;if(_u.callbackExpirationTime===$u&&Lu>=Ru)return;Bu!==Tf&&Kf(Bu)}_u.callbackExpirationTime=$u,_u.callbackPriority=Ru,$u=$u===1073741823?eg(yj.bind(null,_u)):dg(Ru,Bj.bind(null,_u),{timeout:10*(1073741821-$u)-$f()}),_u.callbackNode=$u}}}function Bj(_u,$u){if(wj=0,$u)return $u=Gg$1(),Cj(_u,$u),Z$2(_u),null;var Bu=zj(_u);if(Bu!==0){if($u=_u.callbackNode,(W$4&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),_u===T$1&&Bu===U$2||Ej(_u,Bu),X$2!==null){var Ru=W$4;W$4|=fj;var Lu=Fj();do try{Gj();break}catch(Nu){Hj(_u,Nu)}while(1);if(ng(),W$4=Ru,cj.current=Lu,S$2===hj)throw $u=kj,Ej(_u,Bu),xi$1(_u,Bu),Z$2(_u),$u;if(X$2===null)switch(Lu=_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=Bu,Ru=S$2,T$1=null,Ru){case ti$2:case hj:throw Error(u$3(345));case ij:Cj(_u,2<Bu?2:Bu);break;case ui$1:if(xi$1(_u,Bu),Ru=_u.lastSuspendedTime,Bu===Ru&&(_u.nextKnownPendingLevel=Ij(Lu)),lj===1073741823&&(Lu=Ti$1+pj-$f(),10<Lu)){if(oj){var Ou=_u.lastPingedTime;if(Ou===0||Ou>=Bu){_u.lastPingedTime=Bu,Ej(_u,Bu);break}}if(Ou=zj(_u),Ou!==0&&Ou!==Bu)break;if(Ru!==0&&Ru!==Bu){_u.lastPingedTime=Ru;break}_u.timeoutHandle=Hd$1(Jj.bind(null,_u),Lu);break}Jj(_u);break;case vi$1:if(xi$1(_u,Bu),Ru=_u.lastSuspendedTime,Bu===Ru&&(_u.nextKnownPendingLevel=Ij(Lu)),oj&&(Lu=_u.lastPingedTime,Lu===0||Lu>=Bu)){_u.lastPingedTime=Bu,Ej(_u,Bu);break}if(Lu=zj(_u),Lu!==0&&Lu!==Bu)break;if(Ru!==0&&Ru!==Bu){_u.lastPingedTime=Ru;break}if(mj!==1073741823?Ru=10*(1073741821-mj)-$f():lj===1073741823?Ru=0:(Ru=10*(1073741821-lj)-5e3,Lu=$f(),Bu=10*(1073741821-Bu)-Lu,Ru=Lu-Ru,0>Ru&&(Ru=0),Ru=(120>Ru?120:480>Ru?480:1080>Ru?1080:1920>Ru?1920:3e3>Ru?3e3:4320>Ru?4320:1960*bj(Ru/1960))-Ru,Bu<Ru&&(Ru=Bu)),10<Ru){_u.timeoutHandle=Hd$1(Jj.bind(null,_u),Ru);break}Jj(_u);break;case jj:if(lj!==1073741823&&nj!==null){Ou=lj;var Fu=nj;if(Ru=Fu.busyMinDurationMs|0,0>=Ru?Ru=0:(Lu=Fu.busyDelayMs|0,Ou=$f()-(10*(1073741821-Ou)-(Fu.timeoutMs|0||5e3)),Ru=Ou<=Lu?0:Lu+Ru-Ou),10<Ru){xi$1(_u,Bu),_u.timeoutHandle=Hd$1(Jj.bind(null,_u),Ru);break}}Jj(_u);break;default:throw Error(u$3(329))}if(Z$2(_u),_u.callbackNode===$u)return Bj.bind(null,_u)}}return null}function yj(_u){var $u=_u.lastExpiredTime;if($u=$u!==0?$u:1073741823,(W$4&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),_u===T$1&&$u===U$2||Ej(_u,$u),X$2!==null){var Bu=W$4;W$4|=fj;var Ru=Fj();do try{Kj();break}catch(Lu){Hj(_u,Lu)}while(1);if(ng(),W$4=Bu,cj.current=Ru,S$2===hj)throw Bu=kj,Ej(_u,$u),xi$1(_u,$u),Z$2(_u),Bu;if(X$2!==null)throw Error(u$3(261));_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=$u,T$1=null,Jj(_u),Z$2(_u)}return null}function Lj(){if(tj!==null){var _u=tj;tj=null,_u.forEach(function($u,Bu){Cj(Bu,$u),Z$2(Bu)}),gg()}}function Mj(_u,$u){var Bu=W$4;W$4|=1;try{return _u($u)}finally{W$4=Bu,W$4===V$2&&gg()}}function Nj(_u,$u){var Bu=W$4;W$4&=-2,W$4|=ej;try{return _u($u)}finally{W$4=Bu,W$4===V$2&&gg()}}function Ej(_u,$u){_u.finishedWork=null,_u.finishedExpirationTime=0;var Bu=_u.timeoutHandle;if(Bu!==-1&&(_u.timeoutHandle=-1,Id(Bu)),X$2!==null)for(Bu=X$2.return;Bu!==null;){var Ru=Bu;switch(Ru.tag){case 1:Ru=Ru.type.childContextTypes,Ru!=null&&Df();break;case 3:eh(),H$3(K$2),H$3(J$2);break;case 5:gh(Ru);break;case 4:eh();break;case 13:H$3(M$3);break;case 19:H$3(M$3);break;case 10:og(Ru)}Bu=Bu.return}T$1=_u,X$2=Sg(_u.current,null),U$2=$u,S$2=ti$2,kj=null,mj=lj=1073741823,nj=null,wi$2=0,oj=!1}function Hj(_u,$u){do{try{if(ng(),jh.current=sh,mh)for(var Bu=N$4.memoizedState;Bu!==null;){var Ru=Bu.queue;Ru!==null&&(Ru.pending=null),Bu=Bu.next}if(lh=0,P$3=O$3=N$4=null,mh=!1,X$2===null||X$2.return===null)return S$2=hj,kj=$u,X$2=null;e:{var Lu=_u,Ou=X$2.return,Fu=X$2,Nu=$u;if($u=U$2,Fu.effectTag|=2048,Fu.firstEffect=Fu.lastEffect=null,Nu!==null&&typeof Nu=="object"&&typeof Nu.then=="function"){var Vu=Nu;if((Fu.mode&2)===0){var Uu=Fu.alternate;Uu?(Fu.updateQueue=Uu.updateQueue,Fu.memoizedState=Uu.memoizedState,Fu.expirationTime=Uu.expirationTime):(Fu.updateQueue=null,Fu.memoizedState=null)}var Gu=(M$3.current&1)!==0,zu=Ou;do{var Hu;if(Hu=zu.tag===13){var ju=zu.memoizedState;if(ju!==null)Hu=ju.dehydrated!==null;else{var Qu=zu.memoizedProps;Hu=Qu.fallback===void 0?!1:Qu.unstable_avoidThisFallback!==!0?!0:!Gu}}if(Hu){var Xu=zu.updateQueue;if(Xu===null){var Ku=new Set;Ku.add(Vu),zu.updateQueue=Ku}else Xu.add(Vu);if((zu.mode&2)===0){if(zu.effectTag|=64,Fu.effectTag&=-2981,Fu.tag===1)if(Fu.alternate===null)Fu.tag=17;else{var Wu=wg(1073741823,null);Wu.tag=2,xg(Fu,Wu)}Fu.expirationTime=1073741823;break e}Nu=void 0,Fu=$u;var qu=Lu.pingCache;if(qu===null?(qu=Lu.pingCache=new Wi$2,Nu=new Set,qu.set(Vu,Nu)):(Nu=qu.get(Vu),Nu===void 0&&(Nu=new Set,qu.set(Vu,Nu))),!Nu.has(Fu)){Nu.add(Fu);var Yu=Oj.bind(null,Lu,Vu,Fu);Vu.then(Yu,Yu)}zu.effectTag|=4096,zu.expirationTime=$u;break e}zu=zu.return}while(zu!==null);Nu=Error((pb$1(Fu.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb$1(Fu))}S$2!==jj&&(S$2=ij),Nu=Ai$2(Nu,Fu),zu=Ou;do{switch(zu.tag){case 3:Vu=Nu,zu.effectTag|=4096,zu.expirationTime=$u;var Zu=Xi$2(zu,Vu,$u);yg(zu,Zu);break e;case 1:Vu=Nu;var _h=zu.type,ep=zu.stateNode;if((zu.effectTag&64)===0&&(typeof _h.getDerivedStateFromError=="function"||ep!==null&&typeof ep.componentDidCatch=="function"&&(aj===null||!aj.has(ep)))){zu.effectTag|=4096,zu.expirationTime=$u;var ip=$i$1(zu,Vu,$u);yg(zu,ip);break e}}zu=zu.return}while(zu!==null)}X$2=Pj(X$2)}catch(ap){$u=ap;continue}break}while(1)}function Fj(){var _u=cj.current;return cj.current=sh,_u===null?sh:_u}function Ag(_u,$u){_u<lj&&2<_u&&(lj=_u),$u!==null&&_u<mj&&2<_u&&(mj=_u,nj=$u)}function Bg(_u){_u>wi$2&&(wi$2=_u)}function Kj(){for(;X$2!==null;)X$2=Qj(X$2)}function Gj(){for(;X$2!==null&&!Uf();)X$2=Qj(X$2)}function Qj(_u){var $u=Rj(_u.alternate,_u,U$2);return _u.memoizedProps=_u.pendingProps,$u===null&&($u=Pj(_u)),dj.current=null,$u}function Pj(_u){X$2=_u;do{var $u=X$2.alternate;if(_u=X$2.return,(X$2.effectTag&2048)===0){if($u=si$2($u,X$2,U$2),U$2===1||X$2.childExpirationTime!==1){for(var Bu=0,Ru=X$2.child;Ru!==null;){var Lu=Ru.expirationTime,Ou=Ru.childExpirationTime;Lu>Bu&&(Bu=Lu),Ou>Bu&&(Bu=Ou),Ru=Ru.sibling}X$2.childExpirationTime=Bu}if($u!==null)return $u;_u!==null&&(_u.effectTag&2048)===0&&(_u.firstEffect===null&&(_u.firstEffect=X$2.firstEffect),X$2.lastEffect!==null&&(_u.lastEffect!==null&&(_u.lastEffect.nextEffect=X$2.firstEffect),_u.lastEffect=X$2.lastEffect),1<X$2.effectTag&&(_u.lastEffect!==null?_u.lastEffect.nextEffect=X$2:_u.firstEffect=X$2,_u.lastEffect=X$2))}else{if($u=zi$2(X$2),$u!==null)return $u.effectTag&=2047,$u;_u!==null&&(_u.firstEffect=_u.lastEffect=null,_u.effectTag|=2048)}if($u=X$2.sibling,$u!==null)return $u;X$2=_u}while(X$2!==null);return S$2===ti$2&&(S$2=jj),null}function Ij(_u){var $u=_u.expirationTime;return _u=_u.childExpirationTime,$u>_u?$u:_u}function Jj(_u){var $u=ag();return cg(99,Sj.bind(null,_u,$u)),null}function Sj(_u,$u){do Dj();while(rj!==null);if((W$4&(fj|gj))!==V$2)throw Error(u$3(327));var Bu=_u.finishedWork,Ru=_u.finishedExpirationTime;if(Bu===null)return null;if(_u.finishedWork=null,_u.finishedExpirationTime=0,Bu===_u.current)throw Error(u$3(177));_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90,_u.nextKnownPendingLevel=0;var Lu=Ij(Bu);if(_u.firstPendingTime=Lu,Ru<=_u.lastSuspendedTime?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:Ru<=_u.firstSuspendedTime&&(_u.firstSuspendedTime=Ru-1),Ru<=_u.lastPingedTime&&(_u.lastPingedTime=0),Ru<=_u.lastExpiredTime&&(_u.lastExpiredTime=0),_u===T$1&&(X$2=T$1=null,U$2=0),1<Bu.effectTag?Bu.lastEffect!==null?(Bu.lastEffect.nextEffect=Bu,Lu=Bu.firstEffect):Lu=Bu:Lu=Bu.firstEffect,Lu!==null){var Ou=W$4;W$4|=gj,dj.current=null,Dd$1=fd;var Fu=xd();if(yd(Fu)){if("selectionStart"in Fu)var Nu={start:Fu.selectionStart,end:Fu.selectionEnd};else e:{Nu=(Nu=Fu.ownerDocument)&&Nu.defaultView||window;var Vu=Nu.getSelection&&Nu.getSelection();if(Vu&&Vu.rangeCount!==0){Nu=Vu.anchorNode;var Uu=Vu.anchorOffset,Gu=Vu.focusNode;Vu=Vu.focusOffset;try{Nu.nodeType,Gu.nodeType}catch{Nu=null;break e}var zu=0,Hu=-1,ju=-1,Qu=0,Xu=0,Ku=Fu,Wu=null;t:for(;;){for(var qu;Ku!==Nu||Uu!==0&&Ku.nodeType!==3||(Hu=zu+Uu),Ku!==Gu||Vu!==0&&Ku.nodeType!==3||(ju=zu+Vu),Ku.nodeType===3&&(zu+=Ku.nodeValue.length),(qu=Ku.firstChild)!==null;)Wu=Ku,Ku=qu;for(;;){if(Ku===Fu)break t;if(Wu===Nu&&++Qu===Uu&&(Hu=zu),Wu===Gu&&++Xu===Vu&&(ju=zu),(qu=Ku.nextSibling)!==null)break;Ku=Wu,Wu=Ku.parentNode}Ku=qu}Nu=Hu===-1||ju===-1?null:{start:Hu,end:ju}}else Nu=null}Nu=Nu||{start:0,end:0}}else Nu=null;Ed={activeElementDetached:null,focusedElem:Fu,selectionRange:Nu},fd=!1,Y$2=Lu;do try{Tj()}catch(sp){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,sp),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=Lu;do try{for(Fu=_u,Nu=$u;Y$2!==null;){var Yu=Y$2.effectTag;if(Yu&16&&Rb$1(Y$2.stateNode,""),Yu&128){var Zu=Y$2.alternate;if(Zu!==null){var _h=Zu.ref;_h!==null&&(typeof _h=="function"?_h(null):_h.current=null)}}switch(Yu&1038){case 2:Pi$1(Y$2),Y$2.effectTag&=-3;break;case 6:Pi$1(Y$2),Y$2.effectTag&=-3,Si$1(Y$2.alternate,Y$2);break;case 1024:Y$2.effectTag&=-1025;break;case 1028:Y$2.effectTag&=-1025,Si$1(Y$2.alternate,Y$2);break;case 4:Si$1(Y$2.alternate,Y$2);break;case 8:Uu=Y$2,Mi$2(Fu,Uu,Nu),Ni$2(Uu)}Y$2=Y$2.nextEffect}}catch(sp){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,sp),Y$2=Y$2.nextEffect}while(Y$2!==null);if(_h=Ed,Zu=xd(),Yu=_h.focusedElem,Nu=_h.selectionRange,Zu!==Yu&&Yu&&Yu.ownerDocument&&wd(Yu.ownerDocument.documentElement,Yu)){for(Nu!==null&&yd(Yu)&&(Zu=Nu.start,_h=Nu.end,_h===void 0&&(_h=Zu),"selectionStart"in Yu?(Yu.selectionStart=Zu,Yu.selectionEnd=Math.min(_h,Yu.value.length)):(_h=(Zu=Yu.ownerDocument||document)&&Zu.defaultView||window,_h.getSelection&&(_h=_h.getSelection(),Uu=Yu.textContent.length,Fu=Math.min(Nu.start,Uu),Nu=Nu.end===void 0?Fu:Math.min(Nu.end,Uu),!_h.extend&&Fu>Nu&&(Uu=Nu,Nu=Fu,Fu=Uu),Uu=vd(Yu,Fu),Gu=vd(Yu,Nu),Uu&&Gu&&(_h.rangeCount!==1||_h.anchorNode!==Uu.node||_h.anchorOffset!==Uu.offset||_h.focusNode!==Gu.node||_h.focusOffset!==Gu.offset)&&(Zu=Zu.createRange(),Zu.setStart(Uu.node,Uu.offset),_h.removeAllRanges(),Fu>Nu?(_h.addRange(Zu),_h.extend(Gu.node,Gu.offset)):(Zu.setEnd(Gu.node,Gu.offset),_h.addRange(Zu)))))),Zu=[],_h=Yu;_h=_h.parentNode;)_h.nodeType===1&&Zu.push({element:_h,left:_h.scrollLeft,top:_h.scrollTop});for(typeof Yu.focus=="function"&&Yu.focus(),Yu=0;Yu<Zu.length;Yu++)_h=Zu[Yu],_h.element.scrollLeft=_h.left,_h.element.scrollTop=_h.top}fd=!!Dd$1,Ed=Dd$1=null,_u.current=Bu,Y$2=Lu;do try{for(Yu=_u;Y$2!==null;){var ep=Y$2.effectTag;if(ep&36&&Ji$2(Yu,Y$2.alternate,Y$2),ep&128){Zu=void 0;var ip=Y$2.ref;if(ip!==null){var ap=Y$2.stateNode;switch(Y$2.tag){case 5:Zu=ap;break;default:Zu=ap}typeof ip=="function"?ip(Zu):ip.current=Zu}}Y$2=Y$2.nextEffect}}catch(sp){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,sp),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=null,Vf(),W$4=Ou}else _u.current=Bu;if(qj)qj=!1,rj=_u,sj=$u;else for(Y$2=Lu;Y$2!==null;)$u=Y$2.nextEffect,Y$2.nextEffect=null,Y$2=$u;if($u=_u.firstPendingTime,$u===0&&(aj=null),$u===1073741823?_u===vj?uj++:(uj=0,vj=_u):uj=0,typeof Uj=="function"&&Uj(Bu.stateNode,Ru),Z$2(_u),Yi$2)throw Yi$2=!1,_u=Zi$1,Zi$1=null,_u;return(W$4&ej)!==V$2||gg(),null}function Tj(){for(;Y$2!==null;){var _u=Y$2.effectTag;(_u&256)!==0&&Gi$1(Y$2.alternate,Y$2),(_u&512)===0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$2=Y$2.nextEffect}}function Dj(){if(sj!==90){var _u=97<sj?97:sj;return sj=90,cg(_u,Vj)}}function Vj(){if(rj===null)return!1;var _u=rj;if(rj=null,(W$4&(fj|gj))!==V$2)throw Error(u$3(331));var $u=W$4;for(W$4|=gj,_u=_u.current.firstEffect;_u!==null;){try{var Bu=_u;if((Bu.effectTag&512)!==0)switch(Bu.tag){case 0:case 11:case 15:case 22:Hi$1(5,Bu),Ii$1(5,Bu)}}catch(Ru){if(_u===null)throw Error(u$3(330));Ei$2(_u,Ru)}Bu=_u.nextEffect,_u.nextEffect=null,_u=Bu}return W$4=$u,gg(),!0}function Wj(_u,$u,Bu){$u=Ai$2(Bu,$u),$u=Xi$2(_u,$u,1073741823),xg(_u,$u),_u=xj(_u,1073741823),_u!==null&&Z$2(_u)}function Ei$2(_u,$u){if(_u.tag===3)Wj(_u,_u,$u);else for(var Bu=_u.return;Bu!==null;){if(Bu.tag===3){Wj(Bu,_u,$u);break}else if(Bu.tag===1){var Ru=Bu.stateNode;if(typeof Bu.type.getDerivedStateFromError=="function"||typeof Ru.componentDidCatch=="function"&&(aj===null||!aj.has(Ru))){_u=Ai$2($u,_u),_u=$i$1(Bu,_u,1073741823),xg(Bu,_u),Bu=xj(Bu,1073741823),Bu!==null&&Z$2(Bu);break}}Bu=Bu.return}}function Oj(_u,$u,Bu){var Ru=_u.pingCache;Ru!==null&&Ru.delete($u),T$1===_u&&U$2===Bu?S$2===vi$1||S$2===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(_u,U$2):oj=!0:Aj(_u,Bu)&&($u=_u.lastPingedTime,$u!==0&&$u<Bu||(_u.lastPingedTime=Bu,Z$2(_u)))}function Vi$2(_u,$u){var Bu=_u.stateNode;Bu!==null&&Bu.delete($u),$u=0,$u===0&&($u=Gg$1(),$u=Hg($u,_u,null)),_u=xj(_u,$u),_u!==null&&Z$2(_u)}var Rj;Rj=function(_u,$u,Bu){var Ru=$u.expirationTime;if(_u!==null){var Lu=$u.pendingProps;if(_u.memoizedProps!==Lu||K$2.current)rg=!0;else{if(Ru<Bu){switch(rg=!1,$u.tag){case 3:hi$1($u),Xh();break;case 5:if(fh($u),$u.mode&4&&Bu!==1&&Lu.hidden)return $u.expirationTime=$u.childExpirationTime=1,null;break;case 1:L$3($u.type)&&Gf($u);break;case 4:dh($u,$u.stateNode.containerInfo);break;case 10:Ru=$u.memoizedProps.value,Lu=$u.type._context,I$2(jg,Lu._currentValue),Lu._currentValue=Ru;break;case 13:if($u.memoizedState!==null)return Ru=$u.child.childExpirationTime,Ru!==0&&Ru>=Bu?ji$2(_u,$u,Bu):(I$2(M$3,M$3.current&1),$u=$h(_u,$u,Bu),$u!==null?$u.sibling:null);I$2(M$3,M$3.current&1);break;case 19:if(Ru=$u.childExpirationTime>=Bu,(_u.effectTag&64)!==0){if(Ru)return mi$1(_u,$u,Bu);$u.effectTag|=64}if(Lu=$u.memoizedState,Lu!==null&&(Lu.rendering=null,Lu.tail=null),I$2(M$3,M$3.current),!Ru)return null}return $h(_u,$u,Bu)}rg=!1}}else rg=!1;switch($u.expirationTime=0,$u.tag){case 2:if(Ru=$u.type,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,Lu=Cf($u,J$2.current),qg$1($u,Bu),Lu=oh(null,$u,Ru,_u,Lu,Bu),$u.effectTag|=1,typeof Lu=="object"&&Lu!==null&&typeof Lu.render=="function"&&Lu.$$typeof===void 0){if($u.tag=1,$u.memoizedState=null,$u.updateQueue=null,L$3(Ru)){var Ou=!0;Gf($u)}else Ou=!1;$u.memoizedState=Lu.state!==null&&Lu.state!==void 0?Lu.state:null,ug($u);var Fu=Ru.getDerivedStateFromProps;typeof Fu=="function"&&Fg($u,Ru,Fu,_u),Lu.updater=Jg$1,$u.stateNode=Lu,Lu._reactInternalFiber=$u,Ng$1($u,Ru,_u,Bu),$u=gi$1(null,$u,Ru,!0,Ou,Bu)}else $u.tag=0,R$3(null,$u,Lu,Bu),$u=$u.child;return $u;case 16:e:{if(Lu=$u.elementType,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,ob$1(Lu),Lu._status!==1)throw Lu._result;switch(Lu=Lu._result,$u.type=Lu,Ou=$u.tag=Xj(Lu),_u=ig(Lu,_u),Ou){case 0:$u=di$1(null,$u,Lu,_u,Bu);break e;case 1:$u=fi$1(null,$u,Lu,_u,Bu);break e;case 11:$u=Zh(null,$u,Lu,_u,Bu);break e;case 14:$u=ai$1(null,$u,Lu,ig(Lu.type,_u),Ru,Bu);break e}throw Error(u$3(306,Lu,""))}return $u;case 0:return Ru=$u.type,Lu=$u.pendingProps,Lu=$u.elementType===Ru?Lu:ig(Ru,Lu),di$1(_u,$u,Ru,Lu,Bu);case 1:return Ru=$u.type,Lu=$u.pendingProps,Lu=$u.elementType===Ru?Lu:ig(Ru,Lu),fi$1(_u,$u,Ru,Lu,Bu);case 3:if(hi$1($u),Ru=$u.updateQueue,_u===null||Ru===null)throw Error(u$3(282));if(Ru=$u.pendingProps,Lu=$u.memoizedState,Lu=Lu!==null?Lu.element:null,vg(_u,$u),zg($u,Ru,null,Bu),Ru=$u.memoizedState.element,Ru===Lu)Xh(),$u=$h(_u,$u,Bu);else{if((Lu=$u.stateNode.hydrate)&&(Ph=Jd$1($u.stateNode.containerInfo.firstChild),Oh=$u,Lu=Qh=!0),Lu)for(Bu=Yg$1($u,null,Ru,Bu),$u.child=Bu;Bu;)Bu.effectTag=Bu.effectTag&-3|1024,Bu=Bu.sibling;else R$3(_u,$u,Ru,Bu),Xh();$u=$u.child}return $u;case 5:return fh($u),_u===null&&Uh($u),Ru=$u.type,Lu=$u.pendingProps,Ou=_u!==null?_u.memoizedProps:null,Fu=Lu.children,Gd$1(Ru,Lu)?Fu=null:Ou!==null&&Gd$1(Ru,Ou)&&($u.effectTag|=16),ei$2(_u,$u),$u.mode&4&&Bu!==1&&Lu.hidden?($u.expirationTime=$u.childExpirationTime=1,$u=null):(R$3(_u,$u,Fu,Bu),$u=$u.child),$u;case 6:return _u===null&&Uh($u),null;case 13:return ji$2(_u,$u,Bu);case 4:return dh($u,$u.stateNode.containerInfo),Ru=$u.pendingProps,_u===null?$u.child=Xg$1($u,null,Ru,Bu):R$3(_u,$u,Ru,Bu),$u.child;case 11:return Ru=$u.type,Lu=$u.pendingProps,Lu=$u.elementType===Ru?Lu:ig(Ru,Lu),Zh(_u,$u,Ru,Lu,Bu);case 7:return R$3(_u,$u,$u.pendingProps,Bu),$u.child;case 8:return R$3(_u,$u,$u.pendingProps.children,Bu),$u.child;case 12:return R$3(_u,$u,$u.pendingProps.children,Bu),$u.child;case 10:e:{Ru=$u.type._context,Lu=$u.pendingProps,Fu=$u.memoizedProps,Ou=Lu.value;var Nu=$u.type._context;if(I$2(jg,Nu._currentValue),Nu._currentValue=Ou,Fu!==null)if(Nu=Fu.value,Ou=$e$1(Nu,Ou)?0:(typeof Ru._calculateChangedBits=="function"?Ru._calculateChangedBits(Nu,Ou):1073741823)|0,Ou===0){if(Fu.children===Lu.children&&!K$2.current){$u=$h(_u,$u,Bu);break e}}else for(Nu=$u.child,Nu!==null&&(Nu.return=$u);Nu!==null;){var Vu=Nu.dependencies;if(Vu!==null){Fu=Nu.child;for(var Uu=Vu.firstContext;Uu!==null;){if(Uu.context===Ru&&(Uu.observedBits&Ou)!==0){Nu.tag===1&&(Uu=wg(Bu,null),Uu.tag=2,xg(Nu,Uu)),Nu.expirationTime<Bu&&(Nu.expirationTime=Bu),Uu=Nu.alternate,Uu!==null&&Uu.expirationTime<Bu&&(Uu.expirationTime=Bu),pg(Nu.return,Bu),Vu.expirationTime<Bu&&(Vu.expirationTime=Bu);break}Uu=Uu.next}}else Fu=Nu.tag===10&&Nu.type===$u.type?null:Nu.child;if(Fu!==null)Fu.return=Nu;else for(Fu=Nu;Fu!==null;){if(Fu===$u){Fu=null;break}if(Nu=Fu.sibling,Nu!==null){Nu.return=Fu.return,Fu=Nu;break}Fu=Fu.return}Nu=Fu}R$3(_u,$u,Lu.children,Bu),$u=$u.child}return $u;case 9:return Lu=$u.type,Ou=$u.pendingProps,Ru=Ou.children,qg$1($u,Bu),Lu=sg(Lu,Ou.unstable_observedBits),Ru=Ru(Lu),$u.effectTag|=1,R$3(_u,$u,Ru,Bu),$u.child;case 14:return Lu=$u.type,Ou=ig(Lu,$u.pendingProps),Ou=ig(Lu.type,Ou),ai$1(_u,$u,Lu,Ou,Ru,Bu);case 15:return ci$1(_u,$u,$u.type,$u.pendingProps,Ru,Bu);case 17:return Ru=$u.type,Lu=$u.pendingProps,Lu=$u.elementType===Ru?Lu:ig(Ru,Lu),_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),$u.tag=1,L$3(Ru)?(_u=!0,Gf($u)):_u=!1,qg$1($u,Bu),Lg($u,Ru,Lu),Ng$1($u,Ru,Lu,Bu),gi$1(null,$u,Ru,!0,_u,Bu);case 19:return mi$1(_u,$u,Bu)}throw Error(u$3(156,$u.tag))};var Uj=null,Li$2=null;function Yj(_u){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if($u.isDisabled||!$u.supportsFiber)return!0;try{var Bu=$u.inject(_u);Uj=function(Ru){try{$u.onCommitFiberRoot(Bu,Ru,void 0,(Ru.current.effectTag&64)===64)}catch{}},Li$2=function(Ru){try{$u.onCommitFiberUnmount(Bu,Ru)}catch{}}}catch{}return!0}function Zj(_u,$u,Bu,Ru){this.tag=_u,this.key=Bu,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ru,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(_u,$u,Bu,Ru){return new Zj(_u,$u,Bu,Ru)}function bi$1(_u){return _u=_u.prototype,!(!_u||!_u.isReactComponent)}function Xj(_u){if(typeof _u=="function")return bi$1(_u)?1:0;if(_u!=null){if(_u=_u.$$typeof,_u===gb$1)return 11;if(_u===jb$1)return 14}return 2}function Sg(_u,$u){var Bu=_u.alternate;return Bu===null?(Bu=Sh(_u.tag,$u,_u.key,_u.mode),Bu.elementType=_u.elementType,Bu.type=_u.type,Bu.stateNode=_u.stateNode,Bu.alternate=_u,_u.alternate=Bu):(Bu.pendingProps=$u,Bu.effectTag=0,Bu.nextEffect=null,Bu.firstEffect=null,Bu.lastEffect=null),Bu.childExpirationTime=_u.childExpirationTime,Bu.expirationTime=_u.expirationTime,Bu.child=_u.child,Bu.memoizedProps=_u.memoizedProps,Bu.memoizedState=_u.memoizedState,Bu.updateQueue=_u.updateQueue,$u=_u.dependencies,Bu.dependencies=$u===null?null:{expirationTime:$u.expirationTime,firstContext:$u.firstContext,responders:$u.responders},Bu.sibling=_u.sibling,Bu.index=_u.index,Bu.ref=_u.ref,Bu}function Ug$1(_u,$u,Bu,Ru,Lu,Ou){var Fu=2;if(Ru=_u,typeof _u=="function")bi$1(_u)&&(Fu=1);else if(typeof _u=="string")Fu=5;else e:switch(_u){case ab$1:return Wg$1(Bu.children,Lu,Ou,$u);case fb$1:Fu=8,Lu|=7;break;case bb$1:Fu=8,Lu|=1;break;case cb$1:return _u=Sh(12,Bu,$u,Lu|8),_u.elementType=cb$1,_u.type=cb$1,_u.expirationTime=Ou,_u;case hb$1:return _u=Sh(13,Bu,$u,Lu),_u.type=hb$1,_u.elementType=hb$1,_u.expirationTime=Ou,_u;case ib$1:return _u=Sh(19,Bu,$u,Lu),_u.elementType=ib$1,_u.expirationTime=Ou,_u;default:if(typeof _u=="object"&&_u!==null)switch(_u.$$typeof){case db$1:Fu=10;break e;case eb$1:Fu=9;break e;case gb$1:Fu=11;break e;case jb$1:Fu=14;break e;case kb$1:Fu=16,Ru=null;break e;case lb$1:Fu=22;break e}throw Error(u$3(130,_u==null?_u:typeof _u,""))}return $u=Sh(Fu,Bu,$u,Lu),$u.elementType=_u,$u.type=Ru,$u.expirationTime=Ou,$u}function Wg$1(_u,$u,Bu,Ru){return _u=Sh(7,_u,Ru,$u),_u.expirationTime=Bu,_u}function Tg(_u,$u,Bu){return _u=Sh(6,_u,null,$u),_u.expirationTime=Bu,_u}function Vg$1(_u,$u,Bu){return $u=Sh(4,_u.children!==null?_u.children:[],_u.key,$u),$u.expirationTime=Bu,$u.stateNode={containerInfo:_u.containerInfo,pendingChildren:null,implementation:_u.implementation},$u}function ak(_u,$u,Bu){this.tag=$u,this.current=null,this.containerInfo=_u,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=Bu,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(_u,$u){var Bu=_u.firstSuspendedTime;return _u=_u.lastSuspendedTime,Bu!==0&&Bu>=$u&&_u<=$u}function xi$1(_u,$u){var Bu=_u.firstSuspendedTime,Ru=_u.lastSuspendedTime;Bu<$u&&(_u.firstSuspendedTime=$u),(Ru>$u||Bu===0)&&(_u.lastSuspendedTime=$u),$u<=_u.lastPingedTime&&(_u.lastPingedTime=0),$u<=_u.lastExpiredTime&&(_u.lastExpiredTime=0)}function yi$2(_u,$u){$u>_u.firstPendingTime&&(_u.firstPendingTime=$u);var Bu=_u.firstSuspendedTime;Bu!==0&&($u>=Bu?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:$u>=_u.lastSuspendedTime&&(_u.lastSuspendedTime=$u+1),$u>_u.nextKnownPendingLevel&&(_u.nextKnownPendingLevel=$u))}function Cj(_u,$u){var Bu=_u.lastExpiredTime;(Bu===0||Bu>$u)&&(_u.lastExpiredTime=$u)}function bk(_u,$u,Bu,Ru){var Lu=$u.current,Ou=Gg$1(),Fu=Dg.suspense;Ou=Hg(Ou,Lu,Fu);e:if(Bu){Bu=Bu._reactInternalFiber;t:{if(dc$1(Bu)!==Bu||Bu.tag!==1)throw Error(u$3(170));var Nu=Bu;do{switch(Nu.tag){case 3:Nu=Nu.stateNode.context;break t;case 1:if(L$3(Nu.type)){Nu=Nu.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Nu=Nu.return}while(Nu!==null);throw Error(u$3(171))}if(Bu.tag===1){var Vu=Bu.type;if(L$3(Vu)){Bu=Ff(Bu,Vu,Nu);break e}}Bu=Nu}else Bu=Af;return $u.context===null?$u.context=Bu:$u.pendingContext=Bu,$u=wg(Ou,Fu),$u.payload={element:_u},Ru=Ru===void 0?null:Ru,Ru!==null&&($u.callback=Ru),xg(Lu,$u),Ig(Lu,Ou),Ou}function ck(_u){if(_u=_u.current,!_u.child)return null;switch(_u.child.tag){case 5:return _u.child.stateNode;default:return _u.child.stateNode}}function dk(_u,$u){_u=_u.memoizedState,_u!==null&&_u.dehydrated!==null&&_u.retryTime<$u&&(_u.retryTime=$u)}function ek(_u,$u){dk(_u,$u),(_u=_u.alternate)&&dk(_u,$u)}function fk(_u,$u,Bu){Bu=Bu!=null&&Bu.hydrate===!0;var Ru=new ak(_u,$u,Bu),Lu=Sh(3,null,null,$u===2?7:$u===1?3:0);Ru.current=Lu,Lu.stateNode=Ru,ug(Lu),_u[Od$1]=Ru.current,Bu&&$u!==0&&Jc$1(_u,_u.nodeType===9?_u:_u.ownerDocument),this._internalRoot=Ru}fk.prototype.render=function(_u){bk(_u,this._internalRoot,null,null)};fk.prototype.unmount=function(){var _u=this._internalRoot,$u=_u.containerInfo;bk(null,_u,null,function(){$u[Od$1]=null})};function gk(_u){return!(!_u||_u.nodeType!==1&&_u.nodeType!==9&&_u.nodeType!==11&&(_u.nodeType!==8||_u.nodeValue!==" react-mount-point-unstable "))}function hk(_u,$u){if($u||($u=_u?_u.nodeType===9?_u.documentElement:_u.firstChild:null,$u=!(!$u||$u.nodeType!==1||!$u.hasAttribute("data-reactroot"))),!$u)for(var Bu;Bu=_u.lastChild;)_u.removeChild(Bu);return new fk(_u,0,$u?{hydrate:!0}:void 0)}function ik(_u,$u,Bu,Ru,Lu){var Ou=Bu._reactRootContainer;if(Ou){var Fu=Ou._internalRoot;if(typeof Lu=="function"){var Nu=Lu;Lu=function(){var Uu=ck(Fu);Nu.call(Uu)}}bk($u,Fu,_u,Lu)}else{if(Ou=Bu._reactRootContainer=hk(Bu,Ru),Fu=Ou._internalRoot,typeof Lu=="function"){var Vu=Lu;Lu=function(){var Uu=ck(Fu);Vu.call(Uu)}}Nj(function(){bk($u,Fu,_u,Lu)})}return ck(Fu)}function jk(_u,$u,Bu){var Ru=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a$2,key:Ru==null?null:""+Ru,children:_u,containerInfo:$u,implementation:Bu}}wc=function(_u){if(_u.tag===13){var $u=hg(Gg$1(),150,100);Ig(_u,$u),ek(_u,$u)}};xc=function(_u){_u.tag===13&&(Ig(_u,3),ek(_u,3))};yc$1=function(_u){if(_u.tag===13){var $u=Gg$1();$u=Hg($u,_u,null),Ig(_u,$u),ek(_u,$u)}};za$2=function(_u,$u,Bu){switch($u){case"input":if(Cb$1(_u,Bu),$u=Bu.name,Bu.type==="radio"&&$u!=null){for(Bu=_u;Bu.parentNode;)Bu=Bu.parentNode;for(Bu=Bu.querySelectorAll("input[name="+JSON.stringify(""+$u)+'][type="radio"]'),$u=0;$u<Bu.length;$u++){var Ru=Bu[$u];if(Ru!==_u&&Ru.form===_u.form){var Lu=Qd$1(Ru);if(!Lu)throw Error(u$3(90));yb$1(Ru),Cb$1(Ru,Lu)}}}break;case"textarea":Kb$1(_u,Bu);break;case"select":$u=Bu.value,$u!=null&&Hb$1(_u,!!Bu.multiple,$u,!1)}};Fa$2=Mj;Ga$2=function(_u,$u,Bu,Ru,Lu){var Ou=W$4;W$4|=4;try{return cg(98,_u.bind(null,$u,Bu,Ru,Lu))}finally{W$4=Ou,W$4===V$2&&gg()}};Ha$2=function(){(W$4&(1|fj|gj))===V$2&&(Lj(),Dj())};Ia$1=function(_u,$u){var Bu=W$4;W$4|=2;try{return _u($u)}finally{W$4=Bu,W$4===V$2&&gg()}};function kk(_u,$u){var Bu=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk($u))throw Error(u$3(200));return jk(_u,$u,null,Bu)}var lk={Events:[Nc,Pd,Qd$1,xa$1,ta$1,Xd$1,function(_u){jc(_u,Wd$1)},Da$2,Ea$1,id,mc$1,Dj,{current:!1}]};(function(_u){var $u=_u.findFiberByHostInstance;return Yj(n$4({},_u,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa$2.ReactCurrentDispatcher,findHostInstanceByFiber:function(Bu){return Bu=hc$1(Bu),Bu===null?null:Bu.stateNode},findFiberByHostInstance:function(Bu){return $u?$u(Bu):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc$1,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(_u){if(_u==null)return null;if(_u.nodeType===1)return _u;var $u=_u._reactInternalFiber;if($u===void 0)throw typeof _u.render=="function"?Error(u$3(188)):Error(u$3(268,Object.keys(_u)));return _u=hc$1($u),_u=_u===null?null:_u.stateNode,_u};reactDom_production_min.flushSync=function(_u,$u){if((W$4&(fj|gj))!==V$2)throw Error(u$3(187));var Bu=W$4;W$4|=1;try{return cg(99,_u.bind(null,$u))}finally{W$4=Bu,gg()}};reactDom_production_min.hydrate=function(_u,$u,Bu){if(!gk($u))throw Error(u$3(200));return ik(null,_u,$u,!0,Bu)};reactDom_production_min.render=function(_u,$u,Bu){if(!gk($u))throw Error(u$3(200));return ik(null,_u,$u,!1,Bu)};reactDom_production_min.unmountComponentAtNode=function(_u){if(!gk(_u))throw Error(u$3(40));return _u._reactRootContainer?(Nj(function(){ik(null,null,_u,!1,function(){_u._reactRootContainer=null,_u[Od$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(_u,$u){return kk(_u,$u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_u,$u,Bu,Ru){if(!gk(Bu))throw Error(u$3(200));if(_u==null||_u._reactInternalFiber===void 0)throw Error(u$3(38));return ik(_u,$u,Bu,!1,Ru)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_u){console.error(_u)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(_u){return typeof _u=="number"&&isFinite(_u)&&Math.floor(_u)===_u});Math.sign===void 0&&(Math.sign=function(_u){return _u<0?-1:_u>0?1:+_u});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(_u){if(_u==null)throw new TypeError("Cannot convert undefined or null to object");const $u=Object(_u);for(let Bu=1;Bu<arguments.length;Bu++){const Ru=arguments[Bu];if(Ru!=null)for(const Lu in Ru)Object.prototype.hasOwnProperty.call(Ru,Lu)&&($u[Lu]=Ru[Lu])}return $u});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(_u,$u){this._listeners===void 0&&(this._listeners={});var Bu=this._listeners;Bu[_u]===void 0&&(Bu[_u]=[]),Bu[_u].indexOf($u)===-1&&Bu[_u].push($u)},hasEventListener:function(_u,$u){if(this._listeners===void 0)return!1;var Bu=this._listeners;return Bu[_u]!==void 0&&Bu[_u].indexOf($u)!==-1},removeEventListener:function(_u,$u){if(this._listeners!==void 0){var Bu=this._listeners,Ru=Bu[_u];if(Ru!==void 0){var Lu=Ru.indexOf($u);Lu!==-1&&Ru.splice(Lu,1)}}},dispatchEvent:function(_u){if(this._listeners!==void 0){var $u=this._listeners,Bu=$u[_u.type];if(Bu!==void 0){_u.target=this;for(var Ru=Bu.slice(0),Lu=0,Ou=Ru.length;Lu<Ou;Lu++)Ru[Lu].call(this,_u)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var _u=Math.random()*4294967295|0,$u=Math.random()*4294967295|0,Bu=Math.random()*4294967295|0,Ru=Math.random()*4294967295|0,Lu=_lut[_u&255]+_lut[_u>>8&255]+_lut[_u>>16&255]+_lut[_u>>24&255]+"-"+_lut[$u&255]+_lut[$u>>8&255]+"-"+_lut[$u>>16&15|64]+_lut[$u>>24&255]+"-"+_lut[Bu&63|128]+_lut[Bu>>8&255]+"-"+_lut[Bu>>16&255]+_lut[Bu>>24&255]+_lut[Ru&255]+_lut[Ru>>8&255]+_lut[Ru>>16&255]+_lut[Ru>>24&255];return Lu.toUpperCase()},clamp:function(_u,$u,Bu){return Math.max($u,Math.min(Bu,_u))},euclideanModulo:function(_u,$u){return(_u%$u+$u)%$u},mapLinear:function(_u,$u,Bu,Ru,Lu){return Ru+(_u-$u)*(Lu-Ru)/(Bu-$u)},lerp:function(_u,$u,Bu){return(1-Bu)*_u+Bu*$u},smoothstep:function(_u,$u,Bu){return _u<=$u?0:_u>=Bu?1:(_u=(_u-$u)/(Bu-$u),_u*_u*(3-2*_u))},smootherstep:function(_u,$u,Bu){return _u<=$u?0:_u>=Bu?1:(_u=(_u-$u)/(Bu-$u),_u*_u*_u*(_u*(_u*6-15)+10))},randInt:function(_u,$u){return _u+Math.floor(Math.random()*($u-_u+1))},randFloat:function(_u,$u){return _u+Math.random()*($u-_u)},randFloatSpread:function(_u){return _u*(.5-Math.random())},degToRad:function(_u){return _u*MathUtils.DEG2RAD},radToDeg:function(_u){return _u*MathUtils.RAD2DEG},isPowerOfTwo:function(_u){return(_u&_u-1)===0&&_u!==0},ceilPowerOfTwo:function(_u){return Math.pow(2,Math.ceil(Math.log(_u)/Math.LN2))},floorPowerOfTwo:function(_u){return Math.pow(2,Math.floor(Math.log(_u)/Math.LN2))},setQuaternionFromProperEuler:function(_u,$u,Bu,Ru,Lu){var Ou=Math.cos,Fu=Math.sin,Nu=Ou(Bu/2),Vu=Fu(Bu/2),Uu=Ou(($u+Ru)/2),Gu=Fu(($u+Ru)/2),zu=Ou(($u-Ru)/2),Hu=Fu(($u-Ru)/2),ju=Ou((Ru-$u)/2),Qu=Fu((Ru-$u)/2);switch(Lu){case"XYX":_u.set(Nu*Gu,Vu*zu,Vu*Hu,Nu*Uu);break;case"YZY":_u.set(Vu*Hu,Nu*Gu,Vu*zu,Nu*Uu);break;case"ZXZ":_u.set(Vu*zu,Vu*Hu,Nu*Gu,Nu*Uu);break;case"XZX":_u.set(Nu*Gu,Vu*Qu,Vu*ju,Nu*Uu);break;case"YXY":_u.set(Vu*ju,Nu*Gu,Vu*Qu,Nu*Uu);break;case"ZYZ":_u.set(Vu*Qu,Vu*ju,Nu*Gu,Nu*Uu);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Lu)}}};function Vector2(_u,$u){this.x=_u||0,this.y=$u||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(_u){this.x=_u}},height:{get:function(){return this.y},set:function(_u){this.y=_u}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(_u,$u){return this.x=_u,this.y=$u,this},setScalar:function(_u){return this.x=_u,this.y=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this},multiply:function(_u){return this.x*=_u.x,this.y*=_u.y,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},applyMatrix3:function(_u){var $u=this.x,Bu=this.y,Ru=_u.elements;return this.x=Ru[0]*$u+Ru[3]*Bu+Ru[6],this.y=Ru[1]*$u+Ru[4]*Bu+Ru[7],this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this},clampLength:function(_u,$u){var Bu=this.length();return this.divideScalar(Bu||1).multiplyScalar(Math.max(_u,Math.min($u,Bu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(_u){return this.x*_u.x+this.y*_u.y},cross:function(_u){return this.x*_u.y-this.y*_u.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var _u=Math.atan2(-this.y,-this.x)+Math.PI;return _u},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Bu=this.y-_u.y;return $u*$u+Bu*Bu},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this},lerpVectors:function(_u,$u,Bu){return this.x=_u.x+($u.x-_u.x)*Bu,this.y=_u.y+($u.y-_u.y)*Bu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u},fromBufferAttribute:function(_u,$u,Bu){return Bu!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this},rotateAround:function(_u,$u){var Bu=Math.cos($u),Ru=Math.sin($u),Lu=this.x-_u.x,Ou=this.y-_u.y;return this.x=Lu*Bu-Ou*Ru+_u.x,this.y=Lu*Ru+Ou*Bu+_u.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu){var Uu=this.elements;return Uu[0]=_u,Uu[1]=Ru,Uu[2]=Fu,Uu[3]=$u,Uu[4]=Lu,Uu[5]=Nu,Uu[6]=Bu,Uu[7]=Ou,Uu[8]=Vu,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Bu=_u.elements;return $u[0]=Bu[0],$u[1]=Bu[1],$u[2]=Bu[2],$u[3]=Bu[3],$u[4]=Bu[4],$u[5]=Bu[5],$u[6]=Bu[6],$u[7]=Bu[7],$u[8]=Bu[8],this},extractBasis:function(_u,$u,Bu){return _u.setFromMatrix3Column(this,0),$u.setFromMatrix3Column(this,1),Bu.setFromMatrix3Column(this,2),this},setFromMatrix4:function(_u){var $u=_u.elements;return this.set($u[0],$u[4],$u[8],$u[1],$u[5],$u[9],$u[2],$u[6],$u[10]),this},multiply:function(_u){return this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Bu=_u.elements,Ru=$u.elements,Lu=this.elements,Ou=Bu[0],Fu=Bu[3],Nu=Bu[6],Vu=Bu[1],Uu=Bu[4],Gu=Bu[7],zu=Bu[2],Hu=Bu[5],ju=Bu[8],Qu=Ru[0],Xu=Ru[3],Ku=Ru[6],Wu=Ru[1],qu=Ru[4],Yu=Ru[7],Zu=Ru[2],_h=Ru[5],ep=Ru[8];return Lu[0]=Ou*Qu+Fu*Wu+Nu*Zu,Lu[3]=Ou*Xu+Fu*qu+Nu*_h,Lu[6]=Ou*Ku+Fu*Yu+Nu*ep,Lu[1]=Vu*Qu+Uu*Wu+Gu*Zu,Lu[4]=Vu*Xu+Uu*qu+Gu*_h,Lu[7]=Vu*Ku+Uu*Yu+Gu*ep,Lu[2]=zu*Qu+Hu*Wu+ju*Zu,Lu[5]=zu*Xu+Hu*qu+ju*_h,Lu[8]=zu*Ku+Hu*Yu+ju*ep,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[3]*=_u,$u[6]*=_u,$u[1]*=_u,$u[4]*=_u,$u[7]*=_u,$u[2]*=_u,$u[5]*=_u,$u[8]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Bu=_u[1],Ru=_u[2],Lu=_u[3],Ou=_u[4],Fu=_u[5],Nu=_u[6],Vu=_u[7],Uu=_u[8];return $u*Ou*Uu-$u*Fu*Vu-Bu*Lu*Uu+Bu*Fu*Nu+Ru*Lu*Vu-Ru*Ou*Nu},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var Bu=_u.elements,Ru=this.elements,Lu=Bu[0],Ou=Bu[1],Fu=Bu[2],Nu=Bu[3],Vu=Bu[4],Uu=Bu[5],Gu=Bu[6],zu=Bu[7],Hu=Bu[8],ju=Hu*Vu-Uu*zu,Qu=Uu*Gu-Hu*Nu,Xu=zu*Nu-Vu*Gu,Ku=Lu*ju+Ou*Qu+Fu*Xu;if(Ku===0)return this.set(0,0,0,0,0,0,0,0,0);var Wu=1/Ku;return Ru[0]=ju*Wu,Ru[1]=(Fu*zu-Hu*Ou)*Wu,Ru[2]=(Uu*Ou-Fu*Vu)*Wu,Ru[3]=Qu*Wu,Ru[4]=(Hu*Lu-Fu*Gu)*Wu,Ru[5]=(Fu*Nu-Uu*Lu)*Wu,Ru[6]=Xu*Wu,Ru[7]=(Ou*Gu-zu*Lu)*Wu,Ru[8]=(Vu*Lu-Ou*Nu)*Wu,this},transpose:function(){var _u,$u=this.elements;return _u=$u[1],$u[1]=$u[3],$u[3]=_u,_u=$u[2],$u[2]=$u[6],$u[6]=_u,_u=$u[5],$u[5]=$u[7],$u[7]=_u,this},getNormalMatrix:function(_u){return this.setFromMatrix4(_u).getInverse(this).transpose()},transposeIntoArray:function(_u){var $u=this.elements;return _u[0]=$u[0],_u[1]=$u[3],_u[2]=$u[6],_u[3]=$u[1],_u[4]=$u[4],_u[5]=$u[7],_u[6]=$u[2],_u[7]=$u[5],_u[8]=$u[8],this},setUvTransform:function(_u,$u,Bu,Ru,Lu,Ou,Fu){var Nu=Math.cos(Lu),Vu=Math.sin(Lu);this.set(Bu*Nu,Bu*Vu,-Bu*(Nu*Ou+Vu*Fu)+Ou+_u,-Ru*Vu,Ru*Nu,-Ru*(-Vu*Ou+Nu*Fu)+Fu+$u,0,0,1)},scale:function(_u,$u){var Bu=this.elements;return Bu[0]*=_u,Bu[3]*=_u,Bu[6]*=_u,Bu[1]*=$u,Bu[4]*=$u,Bu[7]*=$u,this},rotate:function(_u){var $u=Math.cos(_u),Bu=Math.sin(_u),Ru=this.elements,Lu=Ru[0],Ou=Ru[3],Fu=Ru[6],Nu=Ru[1],Vu=Ru[4],Uu=Ru[7];return Ru[0]=$u*Lu+Bu*Nu,Ru[3]=$u*Ou+Bu*Vu,Ru[6]=$u*Fu+Bu*Uu,Ru[1]=-Bu*Lu+$u*Nu,Ru[4]=-Bu*Ou+$u*Vu,Ru[7]=-Bu*Fu+$u*Uu,this},translate:function(_u,$u){var Bu=this.elements;return Bu[0]+=_u*Bu[2],Bu[3]+=_u*Bu[5],Bu[6]+=_u*Bu[8],Bu[1]+=$u*Bu[2],Bu[4]+=$u*Bu[5],Bu[7]+=$u*Bu[8],this},equals:function(_u){for(var $u=this.elements,Bu=_u.elements,Ru=0;Ru<9;Ru++)if($u[Ru]!==Bu[Ru])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Bu=0;Bu<9;Bu++)this.elements[Bu]=_u[Bu+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Bu=this.elements;return _u[$u]=Bu[0],_u[$u+1]=Bu[1],_u[$u+2]=Bu[2],_u[$u+3]=Bu[3],_u[$u+4]=Bu[4],_u[$u+5]=Bu[5],_u[$u+6]=Bu[6],_u[$u+7]=Bu[7],_u[$u+8]=Bu[8],_u}});var _canvas,ImageUtils={getDataURL:function(_u){var $u;if(typeof HTMLCanvasElement=="undefined")return _u.src;if(_u instanceof HTMLCanvasElement)$u=_u;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=_u.width,_canvas.height=_u.height;var Bu=_canvas.getContext("2d");_u instanceof ImageData?Bu.putImageData(_u,0,0):Bu.drawImage(_u,0,0,_u.width,_u.height),$u=_canvas}return $u.width>2048||$u.height>2048?$u.toDataURL("image/jpeg",.6):$u.toDataURL("image/png")}},textureId=0;function Texture(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=_u!==void 0?_u:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=$u!==void 0?$u:Texture.DEFAULT_MAPPING,this.wrapS=Bu!==void 0?Bu:ClampToEdgeWrapping,this.wrapT=Ru!==void 0?Ru:ClampToEdgeWrapping,this.magFilter=Lu!==void 0?Lu:LinearFilter,this.minFilter=Ou!==void 0?Ou:LinearMipmapLinearFilter,this.anisotropy=Vu!==void 0?Vu:1,this.format=Fu!==void 0?Fu:RGBAFormat,this.internalFormat=null,this.type=Nu!==void 0?Nu:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Uu!==void 0?Uu:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.name=_u.name,this.image=_u.image,this.mipmaps=_u.mipmaps.slice(0),this.mapping=_u.mapping,this.wrapS=_u.wrapS,this.wrapT=_u.wrapT,this.magFilter=_u.magFilter,this.minFilter=_u.minFilter,this.anisotropy=_u.anisotropy,this.format=_u.format,this.internalFormat=_u.internalFormat,this.type=_u.type,this.offset.copy(_u.offset),this.repeat.copy(_u.repeat),this.center.copy(_u.center),this.rotation=_u.rotation,this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrix.copy(_u.matrix),this.generateMipmaps=_u.generateMipmaps,this.premultiplyAlpha=_u.premultiplyAlpha,this.flipY=_u.flipY,this.unpackAlignment=_u.unpackAlignment,this.encoding=_u.encoding,this},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";if(!$u&&_u.textures[this.uuid]!==void 0)return _u.textures[this.uuid];var Bu={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Ru=this.image;if(Ru.uuid===void 0&&(Ru.uuid=MathUtils.generateUUID()),!$u&&_u.images[Ru.uuid]===void 0){var Lu;if(Array.isArray(Ru)){Lu=[];for(var Ou=0,Fu=Ru.length;Ou<Fu;Ou++)Lu.push(ImageUtils.getDataURL(Ru[Ou]))}else Lu=ImageUtils.getDataURL(Ru);_u.images[Ru.uuid]={uuid:Ru.uuid,url:Lu}}Bu.image=Ru.uuid}return $u||(_u.textures[this.uuid]=Bu),Bu},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(_u){if(this.mapping!==UVMapping)return _u;if(_u.applyMatrix3(this.matrix),_u.x<0||_u.x>1)switch(this.wrapS){case RepeatWrapping:_u.x=_u.x-Math.floor(_u.x);break;case ClampToEdgeWrapping:_u.x=_u.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.x)%2)===1?_u.x=Math.ceil(_u.x)-_u.x:_u.x=_u.x-Math.floor(_u.x);break}if(_u.y<0||_u.y>1)switch(this.wrapT){case RepeatWrapping:_u.y=_u.y-Math.floor(_u.y);break;case ClampToEdgeWrapping:_u.y=_u.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.y)%2)===1?_u.y=Math.ceil(_u.y)-_u.y:_u.y=_u.y-Math.floor(_u.y);break}return this.flipY&&(_u.y=1-_u.y),_u}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function Vector4(_u,$u,Bu,Ru){this.x=_u||0,this.y=$u||0,this.z=Bu||0,this.w=Ru!==void 0?Ru:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(_u){this.z=_u}},height:{get:function(){return this.w},set:function(_u){this.w=_u}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(_u,$u,Bu,Ru){return this.x=_u,this.y=$u,this.z=Bu,this.w=Ru,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this.w=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setW:function(_u){return this.w=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;case 3:this.w=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this.w=_u.w!==void 0?_u.w:1,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this.w+=_u.w,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this.w+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this.w=_u.w+$u.w,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this.w+=_u.w*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this.w-=_u.w,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this.w-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this.w=_u.w-$u.w,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this.w*=_u,this},applyMatrix4:function(_u){var $u=this.x,Bu=this.y,Ru=this.z,Lu=this.w,Ou=_u.elements;return this.x=Ou[0]*$u+Ou[4]*Bu+Ou[8]*Ru+Ou[12]*Lu,this.y=Ou[1]*$u+Ou[5]*Bu+Ou[9]*Ru+Ou[13]*Lu,this.z=Ou[2]*$u+Ou[6]*Bu+Ou[10]*Ru+Ou[14]*Lu,this.w=Ou[3]*$u+Ou[7]*Bu+Ou[11]*Ru+Ou[15]*Lu,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},setAxisAngleFromQuaternion:function(_u){this.w=2*Math.acos(_u.w);var $u=Math.sqrt(1-_u.w*_u.w);return $u<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_u.x/$u,this.y=_u.y/$u,this.z=_u.z/$u),this},setAxisAngleFromRotationMatrix:function(_u){var $u,Bu,Ru,Lu,Ou=.01,Fu=.1,Nu=_u.elements,Vu=Nu[0],Uu=Nu[4],Gu=Nu[8],zu=Nu[1],Hu=Nu[5],ju=Nu[9],Qu=Nu[2],Xu=Nu[6],Ku=Nu[10];if(Math.abs(Uu-zu)<Ou&&Math.abs(Gu-Qu)<Ou&&Math.abs(ju-Xu)<Ou){if(Math.abs(Uu+zu)<Fu&&Math.abs(Gu+Qu)<Fu&&Math.abs(ju+Xu)<Fu&&Math.abs(Vu+Hu+Ku-3)<Fu)return this.set(1,0,0,0),this;$u=Math.PI;var Wu=(Vu+1)/2,qu=(Hu+1)/2,Yu=(Ku+1)/2,Zu=(Uu+zu)/4,_h=(Gu+Qu)/4,ep=(ju+Xu)/4;return Wu>qu&&Wu>Yu?Wu<Ou?(Bu=0,Ru=.707106781,Lu=.707106781):(Bu=Math.sqrt(Wu),Ru=Zu/Bu,Lu=_h/Bu):qu>Yu?qu<Ou?(Bu=.707106781,Ru=0,Lu=.707106781):(Ru=Math.sqrt(qu),Bu=Zu/Ru,Lu=ep/Ru):Yu<Ou?(Bu=.707106781,Ru=.707106781,Lu=0):(Lu=Math.sqrt(Yu),Bu=_h/Lu,Ru=ep/Lu),this.set(Bu,Ru,Lu,$u),this}var ip=Math.sqrt((Xu-ju)*(Xu-ju)+(Gu-Qu)*(Gu-Qu)+(zu-Uu)*(zu-Uu));return Math.abs(ip)<.001&&(ip=1),this.x=(Xu-ju)/ip,this.y=(Gu-Qu)/ip,this.z=(zu-Uu)/ip,this.w=Math.acos((Vu+Hu+Ku-1)/2),this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this.w=Math.min(this.w,_u.w),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this.w=Math.max(this.w,_u.w),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this.w=Math.max(_u.w,Math.min($u.w,this.w)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this.w=Math.max(_u,Math.min($u,this.w)),this},clampLength:function(_u,$u){var Bu=this.length();return this.divideScalar(Bu||1).multiplyScalar(Math.max(_u,Math.min($u,Bu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z+this.w*_u.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this.w+=(_u.w-this.w)*$u,this},lerpVectors:function(_u,$u,Bu){return this.x=_u.x+($u.x-_u.x)*Bu,this.y=_u.y+($u.y-_u.y)*Bu,this.z=_u.z+($u.z-_u.z)*Bu,this.w=_u.w+($u.w-_u.w)*Bu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z&&_u.w===this.w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this.w=_u[$u+3],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u[$u+3]=this.w,_u},fromBufferAttribute:function(_u,$u,Bu){return Bu!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this.w=_u.getW($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(_u,$u,Bu){this.width=_u,this.height=$u,this.scissor=new Vector4(0,0,_u,$u),this.scissorTest=!1,this.viewport=new Vector4(0,0,_u,$u),Bu=Bu||{},this.texture=new Texture(void 0,Bu.mapping,Bu.wrapS,Bu.wrapT,Bu.magFilter,Bu.minFilter,Bu.format,Bu.type,Bu.anisotropy,Bu.encoding),this.texture.image={},this.texture.image.width=_u,this.texture.image.height=$u,this.texture.generateMipmaps=Bu.generateMipmaps!==void 0?Bu.generateMipmaps:!1,this.texture.minFilter=Bu.minFilter!==void 0?Bu.minFilter:LinearFilter,this.depthBuffer=Bu.depthBuffer!==void 0?Bu.depthBuffer:!0,this.stencilBuffer=Bu.stencilBuffer!==void 0?Bu.stencilBuffer:!0,this.depthTexture=Bu.depthTexture!==void 0?Bu.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(_u,$u){(this.width!==_u||this.height!==$u)&&(this.width=_u,this.height=$u,this.texture.image.width=_u,this.texture.image.height=$u,this.dispose()),this.viewport.set(0,0,_u,$u),this.scissor.set(0,0,_u,$u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.width=_u.width,this.height=_u.height,this.viewport.copy(_u.viewport),this.texture=_u.texture.clone(),this.depthBuffer=_u.depthBuffer,this.stencilBuffer=_u.stencilBuffer,this.depthTexture=_u.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(_u,$u,Bu){WebGLRenderTarget.call(this,_u,$u,Bu),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(_u){return WebGLRenderTarget.prototype.copy.call(this,_u),this.samples=_u.samples,this}});function Quaternion(_u,$u,Bu,Ru){this._x=_u||0,this._y=$u||0,this._z=Bu||0,this._w=Ru!==void 0?Ru:1}Object.assign(Quaternion,{slerp:function(_u,$u,Bu,Ru){return Bu.copy(_u).slerp($u,Ru)},slerpFlat:function(_u,$u,Bu,Ru,Lu,Ou,Fu){var Nu=Bu[Ru+0],Vu=Bu[Ru+1],Uu=Bu[Ru+2],Gu=Bu[Ru+3],zu=Lu[Ou+0],Hu=Lu[Ou+1],ju=Lu[Ou+2],Qu=Lu[Ou+3];if(Gu!==Qu||Nu!==zu||Vu!==Hu||Uu!==ju){var Xu=1-Fu,Ku=Nu*zu+Vu*Hu+Uu*ju+Gu*Qu,Wu=Ku>=0?1:-1,qu=1-Ku*Ku;if(qu>Number.EPSILON){var Yu=Math.sqrt(qu),Zu=Math.atan2(Yu,Ku*Wu);Xu=Math.sin(Xu*Zu)/Yu,Fu=Math.sin(Fu*Zu)/Yu}var _h=Fu*Wu;if(Nu=Nu*Xu+zu*_h,Vu=Vu*Xu+Hu*_h,Uu=Uu*Xu+ju*_h,Gu=Gu*Xu+Qu*_h,Xu===1-Fu){var ep=1/Math.sqrt(Nu*Nu+Vu*Vu+Uu*Uu+Gu*Gu);Nu*=ep,Vu*=ep,Uu*=ep,Gu*=ep}}_u[$u]=Nu,_u[$u+1]=Vu,_u[$u+2]=Uu,_u[$u+3]=Gu},multiplyQuaternionsFlat:function(_u,$u,Bu,Ru,Lu,Ou){var Fu=Bu[Ru],Nu=Bu[Ru+1],Vu=Bu[Ru+2],Uu=Bu[Ru+3],Gu=Lu[Ou],zu=Lu[Ou+1],Hu=Lu[Ou+2],ju=Lu[Ou+3];return _u[$u]=Fu*ju+Uu*Gu+Nu*Hu-Vu*zu,_u[$u+1]=Nu*ju+Uu*zu+Vu*Gu-Fu*Hu,_u[$u+2]=Vu*ju+Uu*Hu+Fu*zu-Nu*Gu,_u[$u+3]=Uu*ju-Fu*Gu-Nu*zu-Vu*Hu,_u}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(_u){this._w=_u,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(_u,$u,Bu,Ru){return this._x=_u,this._y=$u,this._z=Bu,this._w=Ru,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(_u){return this._x=_u.x,this._y=_u.y,this._z=_u.z,this._w=_u.w,this._onChangeCallback(),this},setFromEuler:function(_u,$u){if(!(_u&&_u.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var Bu=_u._x,Ru=_u._y,Lu=_u._z,Ou=_u.order,Fu=Math.cos,Nu=Math.sin,Vu=Fu(Bu/2),Uu=Fu(Ru/2),Gu=Fu(Lu/2),zu=Nu(Bu/2),Hu=Nu(Ru/2),ju=Nu(Lu/2);switch(Ou){case"XYZ":this._x=zu*Uu*Gu+Vu*Hu*ju,this._y=Vu*Hu*Gu-zu*Uu*ju,this._z=Vu*Uu*ju+zu*Hu*Gu,this._w=Vu*Uu*Gu-zu*Hu*ju;break;case"YXZ":this._x=zu*Uu*Gu+Vu*Hu*ju,this._y=Vu*Hu*Gu-zu*Uu*ju,this._z=Vu*Uu*ju-zu*Hu*Gu,this._w=Vu*Uu*Gu+zu*Hu*ju;break;case"ZXY":this._x=zu*Uu*Gu-Vu*Hu*ju,this._y=Vu*Hu*Gu+zu*Uu*ju,this._z=Vu*Uu*ju+zu*Hu*Gu,this._w=Vu*Uu*Gu-zu*Hu*ju;break;case"ZYX":this._x=zu*Uu*Gu-Vu*Hu*ju,this._y=Vu*Hu*Gu+zu*Uu*ju,this._z=Vu*Uu*ju-zu*Hu*Gu,this._w=Vu*Uu*Gu+zu*Hu*ju;break;case"YZX":this._x=zu*Uu*Gu+Vu*Hu*ju,this._y=Vu*Hu*Gu+zu*Uu*ju,this._z=Vu*Uu*ju-zu*Hu*Gu,this._w=Vu*Uu*Gu-zu*Hu*ju;break;case"XZY":this._x=zu*Uu*Gu-Vu*Hu*ju,this._y=Vu*Hu*Gu-zu*Uu*ju,this._z=Vu*Uu*ju+zu*Hu*Gu,this._w=Vu*Uu*Gu+zu*Hu*ju;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ou)}return $u!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(_u,$u){var Bu=$u/2,Ru=Math.sin(Bu);return this._x=_u.x*Ru,this._y=_u.y*Ru,this._z=_u.z*Ru,this._w=Math.cos(Bu),this._onChangeCallback(),this},setFromRotationMatrix:function(_u){var $u=_u.elements,Bu=$u[0],Ru=$u[4],Lu=$u[8],Ou=$u[1],Fu=$u[5],Nu=$u[9],Vu=$u[2],Uu=$u[6],Gu=$u[10],zu=Bu+Fu+Gu,Hu;return zu>0?(Hu=.5/Math.sqrt(zu+1),this._w=.25/Hu,this._x=(Uu-Nu)*Hu,this._y=(Lu-Vu)*Hu,this._z=(Ou-Ru)*Hu):Bu>Fu&&Bu>Gu?(Hu=2*Math.sqrt(1+Bu-Fu-Gu),this._w=(Uu-Nu)/Hu,this._x=.25*Hu,this._y=(Ru+Ou)/Hu,this._z=(Lu+Vu)/Hu):Fu>Gu?(Hu=2*Math.sqrt(1+Fu-Bu-Gu),this._w=(Lu-Vu)/Hu,this._x=(Ru+Ou)/Hu,this._y=.25*Hu,this._z=(Nu+Uu)/Hu):(Hu=2*Math.sqrt(1+Gu-Bu-Fu),this._w=(Ou-Ru)/Hu,this._x=(Lu+Vu)/Hu,this._y=(Nu+Uu)/Hu,this._z=.25*Hu),this._onChangeCallback(),this},setFromUnitVectors:function(_u,$u){var Bu=1e-6,Ru=_u.dot($u)+1;return Ru<Bu?(Ru=0,Math.abs(_u.x)>Math.abs(_u.z)?(this._x=-_u.y,this._y=_u.x,this._z=0,this._w=Ru):(this._x=0,this._y=-_u.z,this._z=_u.y,this._w=Ru)):(this._x=_u.y*$u.z-_u.z*$u.y,this._y=_u.z*$u.x-_u.x*$u.z,this._z=_u.x*$u.y-_u.y*$u.x,this._w=Ru),this.normalize()},angleTo:function(_u){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(_u),-1,1)))},rotateTowards:function(_u,$u){var Bu=this.angleTo(_u);if(Bu===0)return this;var Ru=Math.min(1,$u/Bu);return this.slerp(_u,Ru),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(_u){return this._x*_u._x+this._y*_u._y+this._z*_u._z+this._w*_u._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var _u=this.length();return _u===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_u=1/_u,this._x=this._x*_u,this._y=this._y*_u,this._z=this._z*_u,this._w=this._w*_u),this._onChangeCallback(),this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(_u,$u)):this.multiplyQuaternions(this,_u)},premultiply:function(_u){return this.multiplyQuaternions(_u,this)},multiplyQuaternions:function(_u,$u){var Bu=_u._x,Ru=_u._y,Lu=_u._z,Ou=_u._w,Fu=$u._x,Nu=$u._y,Vu=$u._z,Uu=$u._w;return this._x=Bu*Uu+Ou*Fu+Ru*Vu-Lu*Nu,this._y=Ru*Uu+Ou*Nu+Lu*Fu-Bu*Vu,this._z=Lu*Uu+Ou*Vu+Bu*Nu-Ru*Fu,this._w=Ou*Uu-Bu*Fu-Ru*Nu-Lu*Vu,this._onChangeCallback(),this},slerp:function(_u,$u){if($u===0)return this;if($u===1)return this.copy(_u);var Bu=this._x,Ru=this._y,Lu=this._z,Ou=this._w,Fu=Ou*_u._w+Bu*_u._x+Ru*_u._y+Lu*_u._z;if(Fu<0?(this._w=-_u._w,this._x=-_u._x,this._y=-_u._y,this._z=-_u._z,Fu=-Fu):this.copy(_u),Fu>=1)return this._w=Ou,this._x=Bu,this._y=Ru,this._z=Lu,this;var Nu=1-Fu*Fu;if(Nu<=Number.EPSILON){var Vu=1-$u;return this._w=Vu*Ou+$u*this._w,this._x=Vu*Bu+$u*this._x,this._y=Vu*Ru+$u*this._y,this._z=Vu*Lu+$u*this._z,this.normalize(),this._onChangeCallback(),this}var Uu=Math.sqrt(Nu),Gu=Math.atan2(Uu,Fu),zu=Math.sin((1-$u)*Gu)/Uu,Hu=Math.sin($u*Gu)/Uu;return this._w=Ou*zu+this._w*Hu,this._x=Bu*zu+this._x*Hu,this._y=Ru*zu+this._y*Hu,this._z=Lu*zu+this._z*Hu,this._onChangeCallback(),this},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._w===this._w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this._x=_u[$u],this._y=_u[$u+1],this._z=_u[$u+2],this._w=_u[$u+3],this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._w,_u},fromBufferAttribute:function(_u,$u){return this._x=_u.getX($u),this._y=_u.getY($u),this._z=_u.getZ($u),this._w=_u.getW($u),this},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(_u,$u,Bu){this.x=_u||0,this.y=$u||0,this.z=Bu||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(_u,$u,Bu){return this.x=_u,this.y=$u,this.z=Bu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(_u,$u)):(this.x*=_u.x,this.y*=_u.y,this.z*=_u.z,this)},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this},multiplyVectors:function(_u,$u){return this.x=_u.x*$u.x,this.y=_u.y*$u.y,this.z=_u.z*$u.z,this},applyEuler:function(_u){return _u&&_u.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(_u))},applyAxisAngle:function(_u,$u){return this.applyQuaternion(_quaternion.setFromAxisAngle(_u,$u))},applyMatrix3:function(_u){var $u=this.x,Bu=this.y,Ru=this.z,Lu=_u.elements;return this.x=Lu[0]*$u+Lu[3]*Bu+Lu[6]*Ru,this.y=Lu[1]*$u+Lu[4]*Bu+Lu[7]*Ru,this.z=Lu[2]*$u+Lu[5]*Bu+Lu[8]*Ru,this},applyNormalMatrix:function(_u){return this.applyMatrix3(_u).normalize()},applyMatrix4:function(_u){var $u=this.x,Bu=this.y,Ru=this.z,Lu=_u.elements,Ou=1/(Lu[3]*$u+Lu[7]*Bu+Lu[11]*Ru+Lu[15]);return this.x=(Lu[0]*$u+Lu[4]*Bu+Lu[8]*Ru+Lu[12])*Ou,this.y=(Lu[1]*$u+Lu[5]*Bu+Lu[9]*Ru+Lu[13])*Ou,this.z=(Lu[2]*$u+Lu[6]*Bu+Lu[10]*Ru+Lu[14])*Ou,this},applyQuaternion:function(_u){var $u=this.x,Bu=this.y,Ru=this.z,Lu=_u.x,Ou=_u.y,Fu=_u.z,Nu=_u.w,Vu=Nu*$u+Ou*Ru-Fu*Bu,Uu=Nu*Bu+Fu*$u-Lu*Ru,Gu=Nu*Ru+Lu*Bu-Ou*$u,zu=-Lu*$u-Ou*Bu-Fu*Ru;return this.x=Vu*Nu+zu*-Lu+Uu*-Fu-Gu*-Ou,this.y=Uu*Nu+zu*-Ou+Gu*-Lu-Vu*-Fu,this.z=Gu*Nu+zu*-Fu+Vu*-Ou-Uu*-Lu,this},project:function(_u){return this.applyMatrix4(_u.matrixWorldInverse).applyMatrix4(_u.projectionMatrix)},unproject:function(_u){return this.applyMatrix4(_u.projectionMatrixInverse).applyMatrix4(_u.matrixWorld)},transformDirection:function(_u){var $u=this.x,Bu=this.y,Ru=this.z,Lu=_u.elements;return this.x=Lu[0]*$u+Lu[4]*Bu+Lu[8]*Ru,this.y=Lu[1]*$u+Lu[5]*Bu+Lu[9]*Ru,this.z=Lu[2]*$u+Lu[6]*Bu+Lu[10]*Ru,this.normalize()},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this.z/=_u.z,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this},clampLength:function(_u,$u){var Bu=this.length();return this.divideScalar(Bu||1).multiplyScalar(Math.max(_u,Math.min($u,Bu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this},lerpVectors:function(_u,$u,Bu){return this.x=_u.x+($u.x-_u.x)*Bu,this.y=_u.y+($u.y-_u.y)*Bu,this.z=_u.z+($u.z-_u.z)*Bu,this},cross:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(_u,$u)):this.crossVectors(this,_u)},crossVectors:function(_u,$u){var Bu=_u.x,Ru=_u.y,Lu=_u.z,Ou=$u.x,Fu=$u.y,Nu=$u.z;return this.x=Ru*Nu-Lu*Fu,this.y=Lu*Ou-Bu*Nu,this.z=Bu*Fu-Ru*Ou,this},projectOnVector:function(_u){var $u=_u.lengthSq();if($u===0)return this.set(0,0,0);var Bu=_u.dot(this)/$u;return this.copy(_u).multiplyScalar(Bu)},projectOnPlane:function(_u){return _vector.copy(this).projectOnVector(_u),this.sub(_vector)},reflect:function(_u){return this.sub(_vector.copy(_u).multiplyScalar(2*this.dot(_u)))},angleTo:function(_u){var $u=Math.sqrt(this.lengthSq()*_u.lengthSq());if($u===0)return Math.PI/2;var Bu=this.dot(_u)/$u;return Math.acos(MathUtils.clamp(Bu,-1,1))},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Bu=this.y-_u.y,Ru=this.z-_u.z;return $u*$u+Bu*Bu+Ru*Ru},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)+Math.abs(this.z-_u.z)},setFromSpherical:function(_u){return this.setFromSphericalCoords(_u.radius,_u.phi,_u.theta)},setFromSphericalCoords:function(_u,$u,Bu){var Ru=Math.sin($u)*_u;return this.x=Ru*Math.sin(Bu),this.y=Math.cos($u)*_u,this.z=Ru*Math.cos(Bu),this},setFromCylindrical:function(_u){return this.setFromCylindricalCoords(_u.radius,_u.theta,_u.y)},setFromCylindricalCoords:function(_u,$u,Bu){return this.x=_u*Math.sin($u),this.y=Bu,this.z=_u*Math.cos($u),this},setFromMatrixPosition:function(_u){var $u=_u.elements;return this.x=$u[12],this.y=$u[13],this.z=$u[14],this},setFromMatrixScale:function(_u){var $u=this.setFromMatrixColumn(_u,0).length(),Bu=this.setFromMatrixColumn(_u,1).length(),Ru=this.setFromMatrixColumn(_u,2).length();return this.x=$u,this.y=Bu,this.z=Ru,this},setFromMatrixColumn:function(_u,$u){return this.fromArray(_u.elements,$u*4)},setFromMatrix3Column:function(_u,$u){return this.fromArray(_u.elements,$u*3)},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u},fromBufferAttribute:function(_u,$u,Bu){return Bu!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu){var Ku=this.elements;return Ku[0]=_u,Ku[4]=$u,Ku[8]=Bu,Ku[12]=Ru,Ku[1]=Lu,Ku[5]=Ou,Ku[9]=Fu,Ku[13]=Nu,Ku[2]=Vu,Ku[6]=Uu,Ku[10]=Gu,Ku[14]=zu,Ku[3]=Hu,Ku[7]=ju,Ku[11]=Qu,Ku[15]=Xu,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Bu=_u.elements;return $u[0]=Bu[0],$u[1]=Bu[1],$u[2]=Bu[2],$u[3]=Bu[3],$u[4]=Bu[4],$u[5]=Bu[5],$u[6]=Bu[6],$u[7]=Bu[7],$u[8]=Bu[8],$u[9]=Bu[9],$u[10]=Bu[10],$u[11]=Bu[11],$u[12]=Bu[12],$u[13]=Bu[13],$u[14]=Bu[14],$u[15]=Bu[15],this},copyPosition:function(_u){var $u=this.elements,Bu=_u.elements;return $u[12]=Bu[12],$u[13]=Bu[13],$u[14]=Bu[14],this},extractBasis:function(_u,$u,Bu){return _u.setFromMatrixColumn(this,0),$u.setFromMatrixColumn(this,1),Bu.setFromMatrixColumn(this,2),this},makeBasis:function(_u,$u,Bu){return this.set(_u.x,$u.x,Bu.x,0,_u.y,$u.y,Bu.y,0,_u.z,$u.z,Bu.z,0,0,0,0,1),this},extractRotation:function(_u){var $u=this.elements,Bu=_u.elements,Ru=1/_v1.setFromMatrixColumn(_u,0).length(),Lu=1/_v1.setFromMatrixColumn(_u,1).length(),Ou=1/_v1.setFromMatrixColumn(_u,2).length();return $u[0]=Bu[0]*Ru,$u[1]=Bu[1]*Ru,$u[2]=Bu[2]*Ru,$u[3]=0,$u[4]=Bu[4]*Lu,$u[5]=Bu[5]*Lu,$u[6]=Bu[6]*Lu,$u[7]=0,$u[8]=Bu[8]*Ou,$u[9]=Bu[9]*Ou,$u[10]=Bu[10]*Ou,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromEuler:function(_u){_u&&_u.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var $u=this.elements,Bu=_u.x,Ru=_u.y,Lu=_u.z,Ou=Math.cos(Bu),Fu=Math.sin(Bu),Nu=Math.cos(Ru),Vu=Math.sin(Ru),Uu=Math.cos(Lu),Gu=Math.sin(Lu);if(_u.order==="XYZ"){var zu=Ou*Uu,Hu=Ou*Gu,ju=Fu*Uu,Qu=Fu*Gu;$u[0]=Nu*Uu,$u[4]=-Nu*Gu,$u[8]=Vu,$u[1]=Hu+ju*Vu,$u[5]=zu-Qu*Vu,$u[9]=-Fu*Nu,$u[2]=Qu-zu*Vu,$u[6]=ju+Hu*Vu,$u[10]=Ou*Nu}else if(_u.order==="YXZ"){var Xu=Nu*Uu,Ku=Nu*Gu,Wu=Vu*Uu,qu=Vu*Gu;$u[0]=Xu+qu*Fu,$u[4]=Wu*Fu-Ku,$u[8]=Ou*Vu,$u[1]=Ou*Gu,$u[5]=Ou*Uu,$u[9]=-Fu,$u[2]=Ku*Fu-Wu,$u[6]=qu+Xu*Fu,$u[10]=Ou*Nu}else if(_u.order==="ZXY"){var Xu=Nu*Uu,Ku=Nu*Gu,Wu=Vu*Uu,qu=Vu*Gu;$u[0]=Xu-qu*Fu,$u[4]=-Ou*Gu,$u[8]=Wu+Ku*Fu,$u[1]=Ku+Wu*Fu,$u[5]=Ou*Uu,$u[9]=qu-Xu*Fu,$u[2]=-Ou*Vu,$u[6]=Fu,$u[10]=Ou*Nu}else if(_u.order==="ZYX"){var zu=Ou*Uu,Hu=Ou*Gu,ju=Fu*Uu,Qu=Fu*Gu;$u[0]=Nu*Uu,$u[4]=ju*Vu-Hu,$u[8]=zu*Vu+Qu,$u[1]=Nu*Gu,$u[5]=Qu*Vu+zu,$u[9]=Hu*Vu-ju,$u[2]=-Vu,$u[6]=Fu*Nu,$u[10]=Ou*Nu}else if(_u.order==="YZX"){var Yu=Ou*Nu,Zu=Ou*Vu,_h=Fu*Nu,ep=Fu*Vu;$u[0]=Nu*Uu,$u[4]=ep-Yu*Gu,$u[8]=_h*Gu+Zu,$u[1]=Gu,$u[5]=Ou*Uu,$u[9]=-Fu*Uu,$u[2]=-Vu*Uu,$u[6]=Zu*Gu+_h,$u[10]=Yu-ep*Gu}else if(_u.order==="XZY"){var Yu=Ou*Nu,Zu=Ou*Vu,_h=Fu*Nu,ep=Fu*Vu;$u[0]=Nu*Uu,$u[4]=-Gu,$u[8]=Vu*Uu,$u[1]=Yu*Gu+ep,$u[5]=Ou*Uu,$u[9]=Zu*Gu-_h,$u[2]=_h*Gu-Zu,$u[6]=Fu*Uu,$u[10]=ep*Gu+Yu}return $u[3]=0,$u[7]=0,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromQuaternion:function(_u){return this.compose(_zero,_u,_one)},lookAt:function(_u,$u,Bu){var Ru=this.elements;return _z.subVectors(_u,$u),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Bu,_z),_x.lengthSq()===0&&(Math.abs(Bu.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Bu,_z)),_x.normalize(),_y.crossVectors(_z,_x),Ru[0]=_x.x,Ru[4]=_y.x,Ru[8]=_z.x,Ru[1]=_x.y,Ru[5]=_y.y,Ru[9]=_z.y,Ru[2]=_x.z,Ru[6]=_y.z,Ru[10]=_z.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(_u,$u)):this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Bu=_u.elements,Ru=$u.elements,Lu=this.elements,Ou=Bu[0],Fu=Bu[4],Nu=Bu[8],Vu=Bu[12],Uu=Bu[1],Gu=Bu[5],zu=Bu[9],Hu=Bu[13],ju=Bu[2],Qu=Bu[6],Xu=Bu[10],Ku=Bu[14],Wu=Bu[3],qu=Bu[7],Yu=Bu[11],Zu=Bu[15],_h=Ru[0],ep=Ru[4],ip=Ru[8],ap=Ru[12],sp=Ru[1],Ju=Ru[5],_f=Ru[9],np=Ru[13],tp=Ru[2],rp=Ru[6],op=Ru[10],lp=Ru[14],up=Ru[3],cp=Ru[7],Ap=Ru[11],yp=Ru[15];return Lu[0]=Ou*_h+Fu*sp+Nu*tp+Vu*up,Lu[4]=Ou*ep+Fu*Ju+Nu*rp+Vu*cp,Lu[8]=Ou*ip+Fu*_f+Nu*op+Vu*Ap,Lu[12]=Ou*ap+Fu*np+Nu*lp+Vu*yp,Lu[1]=Uu*_h+Gu*sp+zu*tp+Hu*up,Lu[5]=Uu*ep+Gu*Ju+zu*rp+Hu*cp,Lu[9]=Uu*ip+Gu*_f+zu*op+Hu*Ap,Lu[13]=Uu*ap+Gu*np+zu*lp+Hu*yp,Lu[2]=ju*_h+Qu*sp+Xu*tp+Ku*up,Lu[6]=ju*ep+Qu*Ju+Xu*rp+Ku*cp,Lu[10]=ju*ip+Qu*_f+Xu*op+Ku*Ap,Lu[14]=ju*ap+Qu*np+Xu*lp+Ku*yp,Lu[3]=Wu*_h+qu*sp+Yu*tp+Zu*up,Lu[7]=Wu*ep+qu*Ju+Yu*rp+Zu*cp,Lu[11]=Wu*ip+qu*_f+Yu*op+Zu*Ap,Lu[15]=Wu*ap+qu*np+Yu*lp+Zu*yp,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[4]*=_u,$u[8]*=_u,$u[12]*=_u,$u[1]*=_u,$u[5]*=_u,$u[9]*=_u,$u[13]*=_u,$u[2]*=_u,$u[6]*=_u,$u[10]*=_u,$u[14]*=_u,$u[3]*=_u,$u[7]*=_u,$u[11]*=_u,$u[15]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Bu=_u[4],Ru=_u[8],Lu=_u[12],Ou=_u[1],Fu=_u[5],Nu=_u[9],Vu=_u[13],Uu=_u[2],Gu=_u[6],zu=_u[10],Hu=_u[14],ju=_u[3],Qu=_u[7],Xu=_u[11],Ku=_u[15];return ju*(+Lu*Nu*Gu-Ru*Vu*Gu-Lu*Fu*zu+Bu*Vu*zu+Ru*Fu*Hu-Bu*Nu*Hu)+Qu*(+$u*Nu*Hu-$u*Vu*zu+Lu*Ou*zu-Ru*Ou*Hu+Ru*Vu*Uu-Lu*Nu*Uu)+Xu*(+$u*Vu*Gu-$u*Fu*Hu-Lu*Ou*Gu+Bu*Ou*Hu+Lu*Fu*Uu-Bu*Vu*Uu)+Ku*(-Ru*Fu*Uu-$u*Nu*Gu+$u*Fu*zu+Ru*Ou*Gu-Bu*Ou*zu+Bu*Nu*Uu)},transpose:function(){var _u=this.elements,$u;return $u=_u[1],_u[1]=_u[4],_u[4]=$u,$u=_u[2],_u[2]=_u[8],_u[8]=$u,$u=_u[6],_u[6]=_u[9],_u[9]=$u,$u=_u[3],_u[3]=_u[12],_u[12]=$u,$u=_u[7],_u[7]=_u[13],_u[13]=$u,$u=_u[11],_u[11]=_u[14],_u[14]=$u,this},setPosition:function(_u,$u,Bu){var Ru=this.elements;return _u.isVector3?(Ru[12]=_u.x,Ru[13]=_u.y,Ru[14]=_u.z):(Ru[12]=_u,Ru[13]=$u,Ru[14]=Bu),this},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var Bu=this.elements,Ru=_u.elements,Lu=Ru[0],Ou=Ru[1],Fu=Ru[2],Nu=Ru[3],Vu=Ru[4],Uu=Ru[5],Gu=Ru[6],zu=Ru[7],Hu=Ru[8],ju=Ru[9],Qu=Ru[10],Xu=Ru[11],Ku=Ru[12],Wu=Ru[13],qu=Ru[14],Yu=Ru[15],Zu=ju*qu*zu-Wu*Qu*zu+Wu*Gu*Xu-Uu*qu*Xu-ju*Gu*Yu+Uu*Qu*Yu,_h=Ku*Qu*zu-Hu*qu*zu-Ku*Gu*Xu+Vu*qu*Xu+Hu*Gu*Yu-Vu*Qu*Yu,ep=Hu*Wu*zu-Ku*ju*zu+Ku*Uu*Xu-Vu*Wu*Xu-Hu*Uu*Yu+Vu*ju*Yu,ip=Ku*ju*Gu-Hu*Wu*Gu-Ku*Uu*Qu+Vu*Wu*Qu+Hu*Uu*qu-Vu*ju*qu,ap=Lu*Zu+Ou*_h+Fu*ep+Nu*ip;if(ap===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var sp=1/ap;return Bu[0]=Zu*sp,Bu[1]=(Wu*Qu*Nu-ju*qu*Nu-Wu*Fu*Xu+Ou*qu*Xu+ju*Fu*Yu-Ou*Qu*Yu)*sp,Bu[2]=(Uu*qu*Nu-Wu*Gu*Nu+Wu*Fu*zu-Ou*qu*zu-Uu*Fu*Yu+Ou*Gu*Yu)*sp,Bu[3]=(ju*Gu*Nu-Uu*Qu*Nu-ju*Fu*zu+Ou*Qu*zu+Uu*Fu*Xu-Ou*Gu*Xu)*sp,Bu[4]=_h*sp,Bu[5]=(Hu*qu*Nu-Ku*Qu*Nu+Ku*Fu*Xu-Lu*qu*Xu-Hu*Fu*Yu+Lu*Qu*Yu)*sp,Bu[6]=(Ku*Gu*Nu-Vu*qu*Nu-Ku*Fu*zu+Lu*qu*zu+Vu*Fu*Yu-Lu*Gu*Yu)*sp,Bu[7]=(Vu*Qu*Nu-Hu*Gu*Nu+Hu*Fu*zu-Lu*Qu*zu-Vu*Fu*Xu+Lu*Gu*Xu)*sp,Bu[8]=ep*sp,Bu[9]=(Ku*ju*Nu-Hu*Wu*Nu-Ku*Ou*Xu+Lu*Wu*Xu+Hu*Ou*Yu-Lu*ju*Yu)*sp,Bu[10]=(Vu*Wu*Nu-Ku*Uu*Nu+Ku*Ou*zu-Lu*Wu*zu-Vu*Ou*Yu+Lu*Uu*Yu)*sp,Bu[11]=(Hu*Uu*Nu-Vu*ju*Nu-Hu*Ou*zu+Lu*ju*zu+Vu*Ou*Xu-Lu*Uu*Xu)*sp,Bu[12]=ip*sp,Bu[13]=(Hu*Wu*Fu-Ku*ju*Fu+Ku*Ou*Qu-Lu*Wu*Qu-Hu*Ou*qu+Lu*ju*qu)*sp,Bu[14]=(Ku*Uu*Fu-Vu*Wu*Fu-Ku*Ou*Gu+Lu*Wu*Gu+Vu*Ou*qu-Lu*Uu*qu)*sp,Bu[15]=(Vu*ju*Fu-Hu*Uu*Fu+Hu*Ou*Gu-Lu*ju*Gu-Vu*Ou*Qu+Lu*Uu*Qu)*sp,this},scale:function(_u){var $u=this.elements,Bu=_u.x,Ru=_u.y,Lu=_u.z;return $u[0]*=Bu,$u[4]*=Ru,$u[8]*=Lu,$u[1]*=Bu,$u[5]*=Ru,$u[9]*=Lu,$u[2]*=Bu,$u[6]*=Ru,$u[10]*=Lu,$u[3]*=Bu,$u[7]*=Ru,$u[11]*=Lu,this},getMaxScaleOnAxis:function(){var _u=this.elements,$u=_u[0]*_u[0]+_u[1]*_u[1]+_u[2]*_u[2],Bu=_u[4]*_u[4]+_u[5]*_u[5]+_u[6]*_u[6],Ru=_u[8]*_u[8]+_u[9]*_u[9]+_u[10]*_u[10];return Math.sqrt(Math.max($u,Bu,Ru))},makeTranslation:function(_u,$u,Bu){return this.set(1,0,0,_u,0,1,0,$u,0,0,1,Bu,0,0,0,1),this},makeRotationX:function(_u){var $u=Math.cos(_u),Bu=Math.sin(_u);return this.set(1,0,0,0,0,$u,-Bu,0,0,Bu,$u,0,0,0,0,1),this},makeRotationY:function(_u){var $u=Math.cos(_u),Bu=Math.sin(_u);return this.set($u,0,Bu,0,0,1,0,0,-Bu,0,$u,0,0,0,0,1),this},makeRotationZ:function(_u){var $u=Math.cos(_u),Bu=Math.sin(_u);return this.set($u,-Bu,0,0,Bu,$u,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(_u,$u){var Bu=Math.cos($u),Ru=Math.sin($u),Lu=1-Bu,Ou=_u.x,Fu=_u.y,Nu=_u.z,Vu=Lu*Ou,Uu=Lu*Fu;return this.set(Vu*Ou+Bu,Vu*Fu-Ru*Nu,Vu*Nu+Ru*Fu,0,Vu*Fu+Ru*Nu,Uu*Fu+Bu,Uu*Nu-Ru*Ou,0,Vu*Nu-Ru*Fu,Uu*Nu+Ru*Ou,Lu*Nu*Nu+Bu,0,0,0,0,1),this},makeScale:function(_u,$u,Bu){return this.set(_u,0,0,0,0,$u,0,0,0,0,Bu,0,0,0,0,1),this},makeShear:function(_u,$u,Bu){return this.set(1,$u,Bu,0,_u,1,Bu,0,_u,$u,1,0,0,0,0,1),this},compose:function(_u,$u,Bu){var Ru=this.elements,Lu=$u._x,Ou=$u._y,Fu=$u._z,Nu=$u._w,Vu=Lu+Lu,Uu=Ou+Ou,Gu=Fu+Fu,zu=Lu*Vu,Hu=Lu*Uu,ju=Lu*Gu,Qu=Ou*Uu,Xu=Ou*Gu,Ku=Fu*Gu,Wu=Nu*Vu,qu=Nu*Uu,Yu=Nu*Gu,Zu=Bu.x,_h=Bu.y,ep=Bu.z;return Ru[0]=(1-(Qu+Ku))*Zu,Ru[1]=(Hu+Yu)*Zu,Ru[2]=(ju-qu)*Zu,Ru[3]=0,Ru[4]=(Hu-Yu)*_h,Ru[5]=(1-(zu+Ku))*_h,Ru[6]=(Xu+Wu)*_h,Ru[7]=0,Ru[8]=(ju+qu)*ep,Ru[9]=(Xu-Wu)*ep,Ru[10]=(1-(zu+Qu))*ep,Ru[11]=0,Ru[12]=_u.x,Ru[13]=_u.y,Ru[14]=_u.z,Ru[15]=1,this},decompose:function(_u,$u,Bu){var Ru=this.elements,Lu=_v1.set(Ru[0],Ru[1],Ru[2]).length(),Ou=_v1.set(Ru[4],Ru[5],Ru[6]).length(),Fu=_v1.set(Ru[8],Ru[9],Ru[10]).length(),Nu=this.determinant();Nu<0&&(Lu=-Lu),_u.x=Ru[12],_u.y=Ru[13],_u.z=Ru[14],_m1.copy(this);var Vu=1/Lu,Uu=1/Ou,Gu=1/Fu;return _m1.elements[0]*=Vu,_m1.elements[1]*=Vu,_m1.elements[2]*=Vu,_m1.elements[4]*=Uu,_m1.elements[5]*=Uu,_m1.elements[6]*=Uu,_m1.elements[8]*=Gu,_m1.elements[9]*=Gu,_m1.elements[10]*=Gu,$u.setFromRotationMatrix(_m1),Bu.x=Lu,Bu.y=Ou,Bu.z=Fu,this},makePerspective:function(_u,$u,Bu,Ru,Lu,Ou){Ou===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Fu=this.elements,Nu=2*Lu/($u-_u),Vu=2*Lu/(Bu-Ru),Uu=($u+_u)/($u-_u),Gu=(Bu+Ru)/(Bu-Ru),zu=-(Ou+Lu)/(Ou-Lu),Hu=-2*Ou*Lu/(Ou-Lu);return Fu[0]=Nu,Fu[4]=0,Fu[8]=Uu,Fu[12]=0,Fu[1]=0,Fu[5]=Vu,Fu[9]=Gu,Fu[13]=0,Fu[2]=0,Fu[6]=0,Fu[10]=zu,Fu[14]=Hu,Fu[3]=0,Fu[7]=0,Fu[11]=-1,Fu[15]=0,this},makeOrthographic:function(_u,$u,Bu,Ru,Lu,Ou){var Fu=this.elements,Nu=1/($u-_u),Vu=1/(Bu-Ru),Uu=1/(Ou-Lu),Gu=($u+_u)*Nu,zu=(Bu+Ru)*Vu,Hu=(Ou+Lu)*Uu;return Fu[0]=2*Nu,Fu[4]=0,Fu[8]=0,Fu[12]=-Gu,Fu[1]=0,Fu[5]=2*Vu,Fu[9]=0,Fu[13]=-zu,Fu[2]=0,Fu[6]=0,Fu[10]=-2*Uu,Fu[14]=-Hu,Fu[3]=0,Fu[7]=0,Fu[11]=0,Fu[15]=1,this},equals:function(_u){for(var $u=this.elements,Bu=_u.elements,Ru=0;Ru<16;Ru++)if($u[Ru]!==Bu[Ru])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Bu=0;Bu<16;Bu++)this.elements[Bu]=_u[Bu+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Bu=this.elements;return _u[$u]=Bu[0],_u[$u+1]=Bu[1],_u[$u+2]=Bu[2],_u[$u+3]=Bu[3],_u[$u+4]=Bu[4],_u[$u+5]=Bu[5],_u[$u+6]=Bu[6],_u[$u+7]=Bu[7],_u[$u+8]=Bu[8],_u[$u+9]=Bu[9],_u[$u+10]=Bu[10],_u[$u+11]=Bu[11],_u[$u+12]=Bu[12],_u[$u+13]=Bu[13],_u[$u+14]=Bu[14],_u[$u+15]=Bu[15],_u}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(_u,$u,Bu,Ru){this._x=_u||0,this._y=$u||0,this._z=Bu||0,this._order=Ru||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(_u){this._order=_u,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(_u,$u,Bu,Ru){return this._x=_u,this._y=$u,this._z=Bu,this._order=Ru||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(_u){return this._x=_u._x,this._y=_u._y,this._z=_u._z,this._order=_u._order,this._onChangeCallback(),this},setFromRotationMatrix:function(_u,$u,Bu){var Ru=MathUtils.clamp,Lu=_u.elements,Ou=Lu[0],Fu=Lu[4],Nu=Lu[8],Vu=Lu[1],Uu=Lu[5],Gu=Lu[9],zu=Lu[2],Hu=Lu[6],ju=Lu[10];switch($u=$u||this._order,$u){case"XYZ":this._y=Math.asin(Ru(Nu,-1,1)),Math.abs(Nu)<.9999999?(this._x=Math.atan2(-Gu,ju),this._z=Math.atan2(-Fu,Ou)):(this._x=Math.atan2(Hu,Uu),this._z=0);break;case"YXZ":this._x=Math.asin(-Ru(Gu,-1,1)),Math.abs(Gu)<.9999999?(this._y=Math.atan2(Nu,ju),this._z=Math.atan2(Vu,Uu)):(this._y=Math.atan2(-zu,Ou),this._z=0);break;case"ZXY":this._x=Math.asin(Ru(Hu,-1,1)),Math.abs(Hu)<.9999999?(this._y=Math.atan2(-zu,ju),this._z=Math.atan2(-Fu,Uu)):(this._y=0,this._z=Math.atan2(Vu,Ou));break;case"ZYX":this._y=Math.asin(-Ru(zu,-1,1)),Math.abs(zu)<.9999999?(this._x=Math.atan2(Hu,ju),this._z=Math.atan2(Vu,Ou)):(this._x=0,this._z=Math.atan2(-Fu,Uu));break;case"YZX":this._z=Math.asin(Ru(Vu,-1,1)),Math.abs(Vu)<.9999999?(this._x=Math.atan2(-Gu,Uu),this._y=Math.atan2(-zu,Ou)):(this._x=0,this._y=Math.atan2(Nu,ju));break;case"XZY":this._z=Math.asin(-Ru(Fu,-1,1)),Math.abs(Fu)<.9999999?(this._x=Math.atan2(Hu,Uu),this._y=Math.atan2(Nu,Ou)):(this._x=Math.atan2(-Gu,ju),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+$u)}return this._order=$u,Bu!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(_u,$u,Bu){return _matrix.makeRotationFromQuaternion(_u),this.setFromRotationMatrix(_matrix,$u,Bu)},setFromVector3:function(_u,$u){return this.set(_u.x,_u.y,_u.z,$u||this._order)},reorder:function(_u){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,_u)},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._order===this._order},fromArray:function(_u){return this._x=_u[0],this._y=_u[1],this._z=_u[2],_u[3]!==void 0&&(this._order=_u[3]),this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._order,_u},toVector3:function(_u){return _u?_u.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(_u){this.mask=1<<_u|0},enable:function(_u){this.mask|=1<<_u|0},enableAll:function(){this.mask=-1},toggle:function(_u){this.mask^=1<<_u|0},disable:function(_u){this.mask&=~(1<<_u|0)},disableAll:function(){this.mask=0},test:function(_u){return(this.mask&_u.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var _u=new Vector3,$u=new Euler,Bu=new Quaternion,Ru=new Vector3(1,1,1);function Lu(){Bu.setFromEuler($u,!1)}function Ou(){$u.setFromQuaternion(Bu,void 0,!1)}$u._onChange(Lu),Bu._onChange(Ou),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_u},rotation:{configurable:!0,enumerable:!0,value:$u},quaternion:{configurable:!0,enumerable:!0,value:Bu},scale:{configurable:!0,enumerable:!0,value:Ru},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_u),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(_u){return this.quaternion.premultiply(_u),this},setRotationFromAxisAngle:function(_u,$u){this.quaternion.setFromAxisAngle(_u,$u)},setRotationFromEuler:function(_u){this.quaternion.setFromEuler(_u,!0)},setRotationFromMatrix:function(_u){this.quaternion.setFromRotationMatrix(_u)},setRotationFromQuaternion:function(_u){this.quaternion.copy(_u)},rotateOnAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.premultiply(_q1),this},rotateX:function(_u){return this.rotateOnAxis(_xAxis,_u)},rotateY:function(_u){return this.rotateOnAxis(_yAxis,_u)},rotateZ:function(_u){return this.rotateOnAxis(_zAxis,_u)},translateOnAxis:function(_u,$u){return _v1$1.copy(_u).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar($u)),this},translateX:function(_u){return this.translateOnAxis(_xAxis,_u)},translateY:function(_u){return this.translateOnAxis(_yAxis,_u)},translateZ:function(_u){return this.translateOnAxis(_zAxis,_u)},localToWorld:function(_u){return _u.applyMatrix4(this.matrixWorld)},worldToLocal:function(_u){return _u.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(_u,$u,Bu){_u.isVector3?_target.copy(_u):_target.set(_u,$u,Bu);var Ru=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Ru&&(_m1$1.extractRotation(Ru.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.add(arguments[$u]);return this}return _u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_u),this):(_u&&_u.isObject3D?(_u.parent!==null&&_u.parent.remove(_u),_u.parent=this,this.children.push(_u),_u.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_u),this)},remove:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.remove(arguments[$u]);return this}var Bu=this.children.indexOf(_u);return Bu!==-1&&(_u.parent=null,this.children.splice(Bu,1),_u.dispatchEvent(_removedEvent)),this},attach:function(_u){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),_u.parent!==null&&(_u.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_u.parent.matrixWorld)),_u.applyMatrix4(_m1$1),_u.updateWorldMatrix(!1,!1),this.add(_u),this},getObjectById:function(_u){return this.getObjectByProperty("id",_u)},getObjectByName:function(_u){return this.getObjectByProperty("name",_u)},getObjectByProperty:function(_u,$u){if(this[_u]===$u)return this;for(var Bu=0,Ru=this.children.length;Bu<Ru;Bu++){var Lu=this.children[Bu],Ou=Lu.getObjectByProperty(_u,$u);if(Ou!==void 0)return Ou}},getWorldPosition:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),_u.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),_u=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_u,_scale),_u},getWorldScale:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,_u),_u},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set($u[8],$u[9],$u[10]).normalize()},raycast:function(){},traverse:function(_u){_u(this);for(var $u=this.children,Bu=0,Ru=$u.length;Bu<Ru;Bu++)$u[Bu].traverse(_u)},traverseVisible:function(_u){if(this.visible!==!1){_u(this);for(var $u=this.children,Bu=0,Ru=$u.length;Bu<Ru;Bu++)$u[Bu].traverseVisible(_u)}},traverseAncestors:function(_u){var $u=this.parent;$u!==null&&(_u($u),$u.traverseAncestors(_u))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_u)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_u=!0);for(var $u=this.children,Bu=0,Ru=$u.length;Bu<Ru;Bu++)$u[Bu].updateMatrixWorld(_u)},updateWorldMatrix:function(_u,$u){var Bu=this.parent;if(_u===!0&&Bu!==null&&Bu.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),$u===!0)for(var Ru=this.children,Lu=0,Ou=Ru.length;Lu<Ou;Lu++)Ru[Lu].updateWorldMatrix(!1,!0)},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string",Bu={};$u&&(_u={geometries:{},materials:{},textures:{},images:{},shapes:{}},Bu.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Ru={};Ru.uuid=this.uuid,Ru.type=this.type,this.name!==""&&(Ru.name=this.name),this.castShadow===!0&&(Ru.castShadow=!0),this.receiveShadow===!0&&(Ru.receiveShadow=!0),this.visible===!1&&(Ru.visible=!1),this.frustumCulled===!1&&(Ru.frustumCulled=!1),this.renderOrder!==0&&(Ru.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Ru.userData=this.userData),Ru.layers=this.layers.mask,Ru.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Ru.matrixAutoUpdate=!1),this.isInstancedMesh&&(Ru.type="InstancedMesh",Ru.count=this.count,Ru.instanceMatrix=this.instanceMatrix.toJSON());function Lu(Ku,Wu){return Ku[Wu.uuid]===void 0&&(Ku[Wu.uuid]=Wu.toJSON(_u)),Wu.uuid}if(this.isMesh||this.isLine||this.isPoints){Ru.geometry=Lu(_u.geometries,this.geometry);var Ou=this.geometry.parameters;if(Ou!==void 0&&Ou.shapes!==void 0){var Fu=Ou.shapes;if(Array.isArray(Fu))for(var Nu=0,Vu=Fu.length;Nu<Vu;Nu++){var Uu=Fu[Nu];Lu(_u.shapes,Uu)}else Lu(_u.shapes,Fu)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Gu=[],Nu=0,Vu=this.material.length;Nu<Vu;Nu++)Gu.push(Lu(_u.materials,this.material[Nu]));Ru.material=Gu}else Ru.material=Lu(_u.materials,this.material);if(this.children.length>0){Ru.children=[];for(var Nu=0;Nu<this.children.length;Nu++)Ru.children.push(this.children[Nu].toJSON(_u).object)}if($u){var zu=Xu(_u.geometries),Hu=Xu(_u.materials),ju=Xu(_u.textures),Qu=Xu(_u.images),Fu=Xu(_u.shapes);zu.length>0&&(Bu.geometries=zu),Hu.length>0&&(Bu.materials=Hu),ju.length>0&&(Bu.textures=ju),Qu.length>0&&(Bu.images=Qu),Fu.length>0&&(Bu.shapes=Fu)}return Bu.object=Ru,Bu;function Xu(Ku){var Wu=[];for(var qu in Ku){var Yu=Ku[qu];delete Yu.metadata,Wu.push(Yu)}return Wu}},clone:function(_u){return new this.constructor().copy(this,_u)},copy:function(_u,$u){if($u===void 0&&($u=!0),this.name=_u.name,this.up.copy(_u.up),this.position.copy(_u.position),this.quaternion.copy(_u.quaternion),this.scale.copy(_u.scale),this.matrix.copy(_u.matrix),this.matrixWorld.copy(_u.matrixWorld),this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_u.matrixWorldNeedsUpdate,this.layers.mask=_u.layers.mask,this.visible=_u.visible,this.castShadow=_u.castShadow,this.receiveShadow=_u.receiveShadow,this.frustumCulled=_u.frustumCulled,this.renderOrder=_u.renderOrder,this.userData=JSON.parse(JSON.stringify(_u.userData)),$u===!0)for(var Bu=0;Bu<_u.children.length;Bu++){var Ru=_u.children[Bu];this.add(Ru.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),_u.background!==null&&(this.background=_u.background.clone()),_u.environment!==null&&(this.environment=_u.environment.clone()),_u.fog!==null&&(this.fog=_u.fog.clone()),_u.overrideMaterial!==null&&(this.overrideMaterial=_u.overrideMaterial.clone()),this.autoUpdate=_u.autoUpdate,this.matrixAutoUpdate=_u.matrixAutoUpdate,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return this.background!==null&&($u.object.background=this.background.toJSON(_u)),this.environment!==null&&($u.object.environment=this.environment.toJSON(_u)),this.fog!==null&&($u.object.fog=this.fog.toJSON()),$u},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(_u,$u){this.min=_u!==void 0?_u:new Vector3(1/0,1/0,1/0),this.max=$u!==void 0?$u:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromArray:function(_u){for(var $u=1/0,Bu=1/0,Ru=1/0,Lu=-1/0,Ou=-1/0,Fu=-1/0,Nu=0,Vu=_u.length;Nu<Vu;Nu+=3){var Uu=_u[Nu],Gu=_u[Nu+1],zu=_u[Nu+2];Uu<$u&&($u=Uu),Gu<Bu&&(Bu=Gu),zu<Ru&&(Ru=zu),Uu>Lu&&(Lu=Uu),Gu>Ou&&(Ou=Gu),zu>Fu&&(Fu=zu)}return this.min.set($u,Bu,Ru),this.max.set(Lu,Ou,Fu),this},setFromBufferAttribute:function(_u){for(var $u=1/0,Bu=1/0,Ru=1/0,Lu=-1/0,Ou=-1/0,Fu=-1/0,Nu=0,Vu=_u.count;Nu<Vu;Nu++){var Uu=_u.getX(Nu),Gu=_u.getY(Nu),zu=_u.getZ(Nu);Uu<$u&&($u=Uu),Gu<Bu&&(Bu=Gu),zu<Ru&&(Ru=zu),Uu>Lu&&(Lu=Uu),Gu>Ou&&(Ou=Gu),zu>Fu&&(Fu=zu)}return this.min.set($u,Bu,Ru),this.max.set(Lu,Ou,Fu),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Bu=_u.length;$u<Bu;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Bu=_vector$1.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Bu),this.max.copy(_u).add(Bu),this},setFromObject:function(_u){return this.makeEmpty(),this.expandByObject(_u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},expandByObject:function(_u){_u.updateWorldMatrix(!1,!1);var $u=_u.geometry;$u!==void 0&&($u.boundingBox===null&&$u.computeBoundingBox(),_box.copy($u.boundingBox),_box.applyMatrix4(_u.matrixWorld),this.union(_box));for(var Bu=_u.children,Ru=0,Lu=Bu.length;Ru<Lu;Ru++)this.expandByObject(Bu[Ru]);return this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y||_u.z<this.min.z||_u.z>this.max.z)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y&&this.min.z<=_u.min.z&&_u.max.z<=this.max.z},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),$u=new Vector3),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y),(_u.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y||_u.max.z<this.min.z||_u.min.z>this.max.z)},intersectsSphere:function(_u){return this.clampPoint(_u.center,_vector$1),_vector$1.distanceToSquared(_u.center)<=_u.radius*_u.radius},intersectsPlane:function(_u){var $u,Bu;return _u.normal.x>0?($u=_u.normal.x*this.min.x,Bu=_u.normal.x*this.max.x):($u=_u.normal.x*this.max.x,Bu=_u.normal.x*this.min.x),_u.normal.y>0?($u+=_u.normal.y*this.min.y,Bu+=_u.normal.y*this.max.y):($u+=_u.normal.y*this.max.y,Bu+=_u.normal.y*this.min.y),_u.normal.z>0?($u+=_u.normal.z*this.min.z,Bu+=_u.normal.z*this.max.z):($u+=_u.normal.z*this.max.z,Bu+=_u.normal.z*this.min.z),$u<=-_u.constant&&Bu>=-_u.constant},intersectsTriangle:function(_u){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(_u.a,_center),_v1$2.subVectors(_u.b,_center),_v2.subVectors(_u.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var $u=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes($u,_v0,_v1$2,_v2,_extents)||($u=[1,0,0,0,1,0,0,0,1],!satForAxes($u,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),$u=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes($u,_v0,_v1$2,_v2,_extents))},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$1.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},getBoundingSphere:function(_u){return _u===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(_u.center),_u.radius=this.getSize(_vector$1).length()*.5,_u},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this.isEmpty()&&this.makeEmpty(),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},applyMatrix4:function(_u){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_u),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_u),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_u),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_u),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_u),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_u),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_u),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_u),this.setFromPoints(_points),this)},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});function satForAxes(_u,$u,Bu,Ru,Lu){var Ou,Fu;for(Ou=0,Fu=_u.length-3;Ou<=Fu;Ou+=3){_testAxis.fromArray(_u,Ou);var Nu=Lu.x*Math.abs(_testAxis.x)+Lu.y*Math.abs(_testAxis.y)+Lu.z*Math.abs(_testAxis.z),Vu=$u.dot(_testAxis),Uu=Bu.dot(_testAxis),Gu=Ru.dot(_testAxis);if(Math.max(-Math.max(Vu,Uu,Gu),Math.min(Vu,Uu,Gu))>Nu)return!1}return!0}var _box$1=new Box3;function Sphere(_u,$u){this.center=_u!==void 0?_u:new Vector3,this.radius=$u!==void 0?$u:-1}Object.assign(Sphere.prototype,{set:function(_u,$u){return this.center.copy(_u),this.radius=$u,this},setFromPoints:function(_u,$u){var Bu=this.center;$u!==void 0?Bu.copy($u):_box$1.setFromPoints(_u).getCenter(Bu);for(var Ru=0,Lu=0,Ou=_u.length;Lu<Ou;Lu++)Ru=Math.max(Ru,Bu.distanceToSquared(_u[Lu]));return this.radius=Math.sqrt(Ru),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.center.copy(_u.center),this.radius=_u.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(_u){return _u.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(_u){return _u.distanceTo(this.center)-this.radius},intersectsSphere:function(_u){var $u=this.radius+_u.radius;return _u.center.distanceToSquared(this.center)<=$u*$u},intersectsBox:function(_u){return _u.intersectsSphere(this)},intersectsPlane:function(_u){return Math.abs(_u.distanceToPoint(this.center))<=this.radius},clampPoint:function(_u,$u){var Bu=this.center.distanceToSquared(_u);return $u===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u),Bu>this.radius*this.radius&&($u.sub(this.center).normalize(),$u.multiplyScalar(this.radius).add(this.center)),$u},getBoundingBox:function(_u){return _u===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),_u=new Box3),this.isEmpty()?(_u.makeEmpty(),_u):(_u.set(this.center,this.center),_u.expandByScalar(this.radius),_u)},applyMatrix4:function(_u){return this.center.applyMatrix4(_u),this.radius=this.radius*_u.getMaxScaleOnAxis(),this},translate:function(_u){return this.center.add(_u),this},equals:function(_u){return _u.center.equals(this.center)&&_u.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(_u,$u){this.origin=_u!==void 0?_u:new Vector3,this.direction=$u!==void 0?$u:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(_u,$u){return this.origin.copy(_u),this.direction.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.origin.copy(_u.origin),this.direction.copy(_u.direction),this},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Ray: .at() target is now required"),$u=new Vector3),$u.copy(this.direction).multiplyScalar(_u).add(this.origin)},lookAt:function(_u){return this.direction.copy(_u).sub(this.origin).normalize(),this},recast:function(_u){return this.origin.copy(this.at(_u,_vector$2)),this},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),$u=new Vector3),$u.subVectors(_u,this.origin);var Bu=$u.dot(this.direction);return Bu<0?$u.copy(this.origin):$u.copy(this.direction).multiplyScalar(Bu).add(this.origin)},distanceToPoint:function(_u){return Math.sqrt(this.distanceSqToPoint(_u))},distanceSqToPoint:function(_u){var $u=_vector$2.subVectors(_u,this.origin).dot(this.direction);return $u<0?this.origin.distanceToSquared(_u):(_vector$2.copy(this.direction).multiplyScalar($u).add(this.origin),_vector$2.distanceToSquared(_u))},distanceSqToSegment:function(_u,$u,Bu,Ru){_segCenter.copy(_u).add($u).multiplyScalar(.5),_segDir.copy($u).sub(_u).normalize(),_diff.copy(this.origin).sub(_segCenter);var Lu=_u.distanceTo($u)*.5,Ou=-this.direction.dot(_segDir),Fu=_diff.dot(this.direction),Nu=-_diff.dot(_segDir),Vu=_diff.lengthSq(),Uu=Math.abs(1-Ou*Ou),Gu,zu,Hu,ju;if(Uu>0)if(Gu=Ou*Nu-Fu,zu=Ou*Fu-Nu,ju=Lu*Uu,Gu>=0)if(zu>=-ju)if(zu<=ju){var Qu=1/Uu;Gu*=Qu,zu*=Qu,Hu=Gu*(Gu+Ou*zu+2*Fu)+zu*(Ou*Gu+zu+2*Nu)+Vu}else zu=Lu,Gu=Math.max(0,-(Ou*zu+Fu)),Hu=-Gu*Gu+zu*(zu+2*Nu)+Vu;else zu=-Lu,Gu=Math.max(0,-(Ou*zu+Fu)),Hu=-Gu*Gu+zu*(zu+2*Nu)+Vu;else zu<=-ju?(Gu=Math.max(0,-(-Ou*Lu+Fu)),zu=Gu>0?-Lu:Math.min(Math.max(-Lu,-Nu),Lu),Hu=-Gu*Gu+zu*(zu+2*Nu)+Vu):zu<=ju?(Gu=0,zu=Math.min(Math.max(-Lu,-Nu),Lu),Hu=zu*(zu+2*Nu)+Vu):(Gu=Math.max(0,-(Ou*Lu+Fu)),zu=Gu>0?Lu:Math.min(Math.max(-Lu,-Nu),Lu),Hu=-Gu*Gu+zu*(zu+2*Nu)+Vu);else zu=Ou>0?-Lu:Lu,Gu=Math.max(0,-(Ou*zu+Fu)),Hu=-Gu*Gu+zu*(zu+2*Nu)+Vu;return Bu&&Bu.copy(this.direction).multiplyScalar(Gu).add(this.origin),Ru&&Ru.copy(_segDir).multiplyScalar(zu).add(_segCenter),Hu},intersectSphere:function(_u,$u){_vector$2.subVectors(_u.center,this.origin);var Bu=_vector$2.dot(this.direction),Ru=_vector$2.dot(_vector$2)-Bu*Bu,Lu=_u.radius*_u.radius;if(Ru>Lu)return null;var Ou=Math.sqrt(Lu-Ru),Fu=Bu-Ou,Nu=Bu+Ou;return Fu<0&&Nu<0?null:Fu<0?this.at(Nu,$u):this.at(Fu,$u)},intersectsSphere:function(_u){return this.distanceSqToPoint(_u.center)<=_u.radius*_u.radius},distanceToPlane:function(_u){var $u=_u.normal.dot(this.direction);if($u===0)return _u.distanceToPoint(this.origin)===0?0:null;var Bu=-(this.origin.dot(_u.normal)+_u.constant)/$u;return Bu>=0?Bu:null},intersectPlane:function(_u,$u){var Bu=this.distanceToPlane(_u);return Bu===null?null:this.at(Bu,$u)},intersectsPlane:function(_u){var $u=_u.distanceToPoint(this.origin);if($u===0)return!0;var Bu=_u.normal.dot(this.direction);return Bu*$u<0},intersectBox:function(_u,$u){var Bu,Ru,Lu,Ou,Fu,Nu,Vu=1/this.direction.x,Uu=1/this.direction.y,Gu=1/this.direction.z,zu=this.origin;return Vu>=0?(Bu=(_u.min.x-zu.x)*Vu,Ru=(_u.max.x-zu.x)*Vu):(Bu=(_u.max.x-zu.x)*Vu,Ru=(_u.min.x-zu.x)*Vu),Uu>=0?(Lu=(_u.min.y-zu.y)*Uu,Ou=(_u.max.y-zu.y)*Uu):(Lu=(_u.max.y-zu.y)*Uu,Ou=(_u.min.y-zu.y)*Uu),Bu>Ou||Lu>Ru||((Lu>Bu||Bu!==Bu)&&(Bu=Lu),(Ou<Ru||Ru!==Ru)&&(Ru=Ou),Gu>=0?(Fu=(_u.min.z-zu.z)*Gu,Nu=(_u.max.z-zu.z)*Gu):(Fu=(_u.max.z-zu.z)*Gu,Nu=(_u.min.z-zu.z)*Gu),Bu>Nu||Fu>Ru)||((Fu>Bu||Bu!==Bu)&&(Bu=Fu),(Nu<Ru||Ru!==Ru)&&(Ru=Nu),Ru<0)?null:this.at(Bu>=0?Bu:Ru,$u)},intersectsBox:function(_u){return this.intersectBox(_u,_vector$2)!==null},intersectTriangle:function(_u,$u,Bu,Ru,Lu){_edge1.subVectors($u,_u),_edge2.subVectors(Bu,_u),_normal.crossVectors(_edge1,_edge2);var Ou=this.direction.dot(_normal),Fu;if(Ou>0){if(Ru)return null;Fu=1}else if(Ou<0)Fu=-1,Ou=-Ou;else return null;_diff.subVectors(this.origin,_u);var Nu=Fu*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Nu<0)return null;var Vu=Fu*this.direction.dot(_edge1.cross(_diff));if(Vu<0||Nu+Vu>Ou)return null;var Uu=-Fu*_diff.dot(_normal);return Uu<0?null:this.at(Uu/Ou,Lu)},applyMatrix4:function(_u){return this.origin.applyMatrix4(_u),this.direction.transformDirection(_u),this},equals:function(_u){return _u.origin.equals(this.origin)&&_u.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(_u,$u){this.normal=_u!==void 0?_u:new Vector3(1,0,0),this.constant=$u!==void 0?$u:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(_u,$u){return this.normal.copy(_u),this.constant=$u,this},setComponents:function(_u,$u,Bu,Ru){return this.normal.set(_u,$u,Bu),this.constant=Ru,this},setFromNormalAndCoplanarPoint:function(_u,$u){return this.normal.copy(_u),this.constant=-$u.dot(this.normal),this},setFromCoplanarPoints:function(_u,$u,Bu){var Ru=_vector1.subVectors(Bu,$u).cross(_vector2.subVectors(_u,$u)).normalize();return this.setFromNormalAndCoplanarPoint(Ru,_u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.normal.copy(_u.normal),this.constant=_u.constant,this},normalize:function(){var _u=1/this.normal.length();return this.normal.multiplyScalar(_u),this.constant*=_u,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(_u){return this.normal.dot(_u)+this.constant},distanceToSphere:function(_u){return this.distanceToPoint(_u.center)-_u.radius},projectPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),$u=new Vector3),$u.copy(this.normal).multiplyScalar(-this.distanceToPoint(_u)).add(_u)},intersectLine:function(_u,$u){$u===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),$u=new Vector3);var Bu=_u.delta(_vector1),Ru=this.normal.dot(Bu);if(Ru===0)return this.distanceToPoint(_u.start)===0?$u.copy(_u.start):void 0;var Lu=-(_u.start.dot(this.normal)+this.constant)/Ru;if(!(Lu<0||Lu>1))return $u.copy(Bu).multiplyScalar(Lu).add(_u.start)},intersectsLine:function(_u){var $u=this.distanceToPoint(_u.start),Bu=this.distanceToPoint(_u.end);return $u<0&&Bu>0||Bu<0&&$u>0},intersectsBox:function(_u){return _u.intersectsPlane(this)},intersectsSphere:function(_u){return _u.intersectsPlane(this)},coplanarPoint:function(_u){return _u===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),_u=new Vector3),_u.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(_u,$u){var Bu=$u||_normalMatrix.getNormalMatrix(_u),Ru=this.coplanarPoint(_vector1).applyMatrix4(_u),Lu=this.normal.applyMatrix3(Bu).normalize();return this.constant=-Ru.dot(Lu),this},translate:function(_u){return this.constant-=_u.dot(this.normal),this},equals:function(_u){return _u.normal.equals(this.normal)&&_u.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(_u,$u,Bu){this.a=_u!==void 0?_u:new Vector3,this.b=$u!==void 0?$u:new Vector3,this.c=Bu!==void 0?Bu:new Vector3}Object.assign(Triangle,{getNormal:function(_u,$u,Bu,Ru){Ru===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Ru=new Vector3),Ru.subVectors(Bu,$u),_v0$1.subVectors(_u,$u),Ru.cross(_v0$1);var Lu=Ru.lengthSq();return Lu>0?Ru.multiplyScalar(1/Math.sqrt(Lu)):Ru.set(0,0,0)},getBarycoord:function(_u,$u,Bu,Ru,Lu){_v0$1.subVectors(Ru,$u),_v1$3.subVectors(Bu,$u),_v2$1.subVectors(_u,$u);var Ou=_v0$1.dot(_v0$1),Fu=_v0$1.dot(_v1$3),Nu=_v0$1.dot(_v2$1),Vu=_v1$3.dot(_v1$3),Uu=_v1$3.dot(_v2$1),Gu=Ou*Vu-Fu*Fu;if(Lu===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Lu=new Vector3),Gu===0)return Lu.set(-2,-1,-1);var zu=1/Gu,Hu=(Vu*Nu-Fu*Uu)*zu,ju=(Ou*Uu-Fu*Nu)*zu;return Lu.set(1-Hu-ju,ju,Hu)},containsPoint:function(_u,$u,Bu,Ru){return Triangle.getBarycoord(_u,$u,Bu,Ru,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){return this.getBarycoord(_u,$u,Bu,Ru,_v3),Nu.set(0,0),Nu.addScaledVector(Lu,_v3.x),Nu.addScaledVector(Ou,_v3.y),Nu.addScaledVector(Fu,_v3.z),Nu},isFrontFacing:function(_u,$u,Bu,Ru){return _v0$1.subVectors(Bu,$u),_v1$3.subVectors(_u,$u),_v0$1.cross(_v1$3).dot(Ru)<0}});Object.assign(Triangle.prototype,{set:function(_u,$u,Bu){return this.a.copy(_u),this.b.copy($u),this.c.copy(Bu),this},setFromPointsAndIndices:function(_u,$u,Bu,Ru){return this.a.copy(_u[$u]),this.b.copy(_u[Bu]),this.c.copy(_u[Ru]),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.a.copy(_u.a),this.b.copy(_u.b),this.c.copy(_u.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),_u=new Vector3),_u.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(_u){return Triangle.getNormal(this.a,this.b,this.c,_u)},getPlane:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),_u=new Plane),_u.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(_u,$u){return Triangle.getBarycoord(_u,this.a,this.b,this.c,$u)},getUV:function(_u,$u,Bu,Ru,Lu){return Triangle.getUV(_u,this.a,this.b,this.c,$u,Bu,Ru,Lu)},containsPoint:function(_u){return Triangle.containsPoint(_u,this.a,this.b,this.c)},isFrontFacing:function(_u){return Triangle.isFrontFacing(this.a,this.b,this.c,_u)},intersectsBox:function(_u){return _u.intersectsTriangle(this)},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),$u=new Vector3);var Bu=this.a,Ru=this.b,Lu=this.c,Ou,Fu;_vab.subVectors(Ru,Bu),_vac.subVectors(Lu,Bu),_vap.subVectors(_u,Bu);var Nu=_vab.dot(_vap),Vu=_vac.dot(_vap);if(Nu<=0&&Vu<=0)return $u.copy(Bu);_vbp.subVectors(_u,Ru);var Uu=_vab.dot(_vbp),Gu=_vac.dot(_vbp);if(Uu>=0&&Gu<=Uu)return $u.copy(Ru);var zu=Nu*Gu-Uu*Vu;if(zu<=0&&Nu>=0&&Uu<=0)return Ou=Nu/(Nu-Uu),$u.copy(Bu).addScaledVector(_vab,Ou);_vcp.subVectors(_u,Lu);var Hu=_vab.dot(_vcp),ju=_vac.dot(_vcp);if(ju>=0&&Hu<=ju)return $u.copy(Lu);var Qu=Hu*Vu-Nu*ju;if(Qu<=0&&Vu>=0&&ju<=0)return Fu=Vu/(Vu-ju),$u.copy(Bu).addScaledVector(_vac,Fu);var Xu=Uu*ju-Hu*Gu;if(Xu<=0&&Gu-Uu>=0&&Hu-ju>=0)return _vbc.subVectors(Lu,Ru),Fu=(Gu-Uu)/(Gu-Uu+(Hu-ju)),$u.copy(Ru).addScaledVector(_vbc,Fu);var Ku=1/(Xu+Qu+zu);return Ou=Qu*Ku,Fu=zu*Ku,$u.copy(Bu).addScaledVector(_vab,Ou).addScaledVector(_vac,Fu)},equals:function(_u){return _u.a.equals(this.a)&&_u.b.equals(this.b)&&_u.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(_u,$u,Bu){return $u===void 0&&Bu===void 0?this.set(_u):this.setRGB(_u,$u,Bu)}function hue2rgb(_u,$u,Bu){return Bu<0&&(Bu+=1),Bu>1&&(Bu-=1),Bu<1/6?_u+($u-_u)*6*Bu:Bu<1/2?$u:Bu<2/3?_u+($u-_u)*6*(2/3-Bu):_u}function SRGBToLinear(_u){return _u<.04045?_u*.0773993808:Math.pow(_u*.9478672986+.0521327014,2.4)}function LinearToSRGB(_u){return _u<.0031308?_u*12.92:1.055*Math.pow(_u,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(_u){return _u&&_u.isColor?this.copy(_u):typeof _u=="number"?this.setHex(_u):typeof _u=="string"&&this.setStyle(_u),this},setScalar:function(_u){return this.r=_u,this.g=_u,this.b=_u,this},setHex:function(_u){return _u=Math.floor(_u),this.r=(_u>>16&255)/255,this.g=(_u>>8&255)/255,this.b=(_u&255)/255,this},setRGB:function(_u,$u,Bu){return this.r=_u,this.g=$u,this.b=Bu,this},setHSL:function(_u,$u,Bu){if(_u=MathUtils.euclideanModulo(_u,1),$u=MathUtils.clamp($u,0,1),Bu=MathUtils.clamp(Bu,0,1),$u===0)this.r=this.g=this.b=Bu;else{var Ru=Bu<=.5?Bu*(1+$u):Bu+$u-Bu*$u,Lu=2*Bu-Ru;this.r=hue2rgb(Lu,Ru,_u+1/3),this.g=hue2rgb(Lu,Ru,_u),this.b=hue2rgb(Lu,Ru,_u-1/3)}return this},setStyle:function(_u){function $u(zu){zu!==void 0&&parseFloat(zu)<1&&console.warn("THREE.Color: Alpha component of "+_u+" will be ignored.")}var Bu;if(Bu=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(_u)){var Ru,Lu=Bu[1],Ou=Bu[2];switch(Lu){case"rgb":case"rgba":if(Ru=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ou))return this.r=Math.min(255,parseInt(Ru[1],10))/255,this.g=Math.min(255,parseInt(Ru[2],10))/255,this.b=Math.min(255,parseInt(Ru[3],10))/255,$u(Ru[5]),this;if(Ru=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ou))return this.r=Math.min(100,parseInt(Ru[1],10))/100,this.g=Math.min(100,parseInt(Ru[2],10))/100,this.b=Math.min(100,parseInt(Ru[3],10))/100,$u(Ru[5]),this;break;case"hsl":case"hsla":if(Ru=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ou)){var Fu=parseFloat(Ru[1])/360,Nu=parseInt(Ru[2],10)/100,Vu=parseInt(Ru[3],10)/100;return $u(Ru[5]),this.setHSL(Fu,Nu,Vu)}break}}else if(Bu=/^\#([A-Fa-f0-9]+)$/.exec(_u)){var Uu=Bu[1],Gu=Uu.length;if(Gu===3)return this.r=parseInt(Uu.charAt(0)+Uu.charAt(0),16)/255,this.g=parseInt(Uu.charAt(1)+Uu.charAt(1),16)/255,this.b=parseInt(Uu.charAt(2)+Uu.charAt(2),16)/255,this;if(Gu===6)return this.r=parseInt(Uu.charAt(0)+Uu.charAt(1),16)/255,this.g=parseInt(Uu.charAt(2)+Uu.charAt(3),16)/255,this.b=parseInt(Uu.charAt(4)+Uu.charAt(5),16)/255,this}return _u&&_u.length>0?this.setColorName(_u):this},setColorName:function(_u){var $u=_colorKeywords[_u];return $u!==void 0?this.setHex($u):console.warn("THREE.Color: Unknown color "+_u),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(_u){return this.r=_u.r,this.g=_u.g,this.b=_u.b,this},copyGammaToLinear:function(_u,$u){return $u===void 0&&($u=2),this.r=Math.pow(_u.r,$u),this.g=Math.pow(_u.g,$u),this.b=Math.pow(_u.b,$u),this},copyLinearToGamma:function(_u,$u){$u===void 0&&($u=2);var Bu=$u>0?1/$u:1;return this.r=Math.pow(_u.r,Bu),this.g=Math.pow(_u.g,Bu),this.b=Math.pow(_u.b,Bu),this},convertGammaToLinear:function(_u){return this.copyGammaToLinear(this,_u),this},convertLinearToGamma:function(_u){return this.copyLinearToGamma(this,_u),this},copySRGBToLinear:function(_u){return this.r=SRGBToLinear(_u.r),this.g=SRGBToLinear(_u.g),this.b=SRGBToLinear(_u.b),this},copyLinearToSRGB:function(_u){return this.r=LinearToSRGB(_u.r),this.g=LinearToSRGB(_u.g),this.b=LinearToSRGB(_u.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(_u){_u===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),_u={h:0,s:0,l:0});var $u=this.r,Bu=this.g,Ru=this.b,Lu=Math.max($u,Bu,Ru),Ou=Math.min($u,Bu,Ru),Fu,Nu,Vu=(Ou+Lu)/2;if(Ou===Lu)Fu=0,Nu=0;else{var Uu=Lu-Ou;switch(Nu=Vu<=.5?Uu/(Lu+Ou):Uu/(2-Lu-Ou),Lu){case $u:Fu=(Bu-Ru)/Uu+(Bu<Ru?6:0);break;case Bu:Fu=(Ru-$u)/Uu+2;break;case Ru:Fu=($u-Bu)/Uu+4;break}Fu/=6}return _u.h=Fu,_u.s=Nu,_u.l=Vu,_u},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(_u,$u,Bu){return this.getHSL(_hslA),_hslA.h+=_u,_hslA.s+=$u,_hslA.l+=Bu,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(_u){return this.r+=_u.r,this.g+=_u.g,this.b+=_u.b,this},addColors:function(_u,$u){return this.r=_u.r+$u.r,this.g=_u.g+$u.g,this.b=_u.b+$u.b,this},addScalar:function(_u){return this.r+=_u,this.g+=_u,this.b+=_u,this},sub:function(_u){return this.r=Math.max(0,this.r-_u.r),this.g=Math.max(0,this.g-_u.g),this.b=Math.max(0,this.b-_u.b),this},multiply:function(_u){return this.r*=_u.r,this.g*=_u.g,this.b*=_u.b,this},multiplyScalar:function(_u){return this.r*=_u,this.g*=_u,this.b*=_u,this},lerp:function(_u,$u){return this.r+=(_u.r-this.r)*$u,this.g+=(_u.g-this.g)*$u,this.b+=(_u.b-this.b)*$u,this},lerpHSL:function(_u,$u){this.getHSL(_hslA),_u.getHSL(_hslB);var Bu=MathUtils.lerp(_hslA.h,_hslB.h,$u),Ru=MathUtils.lerp(_hslA.s,_hslB.s,$u),Lu=MathUtils.lerp(_hslA.l,_hslB.l,$u);return this.setHSL(Bu,Ru,Lu),this},equals:function(_u){return _u.r===this.r&&_u.g===this.g&&_u.b===this.b},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.r=_u[$u],this.g=_u[$u+1],this.b=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.r,_u[$u+1]=this.g,_u[$u+2]=this.b,_u},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(_u,$u,Bu,Ru,Lu,Ou){this.a=_u,this.b=$u,this.c=Bu,this.normal=Ru&&Ru.isVector3?Ru:new Vector3,this.vertexNormals=Array.isArray(Ru)?Ru:[],this.color=Lu&&Lu.isColor?Lu:new Color,this.vertexColors=Array.isArray(Lu)?Lu:[],this.materialIndex=Ou!==void 0?Ou:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.a=_u.a,this.b=_u.b,this.c=_u.c,this.normal.copy(_u.normal),this.color.copy(_u.color),this.materialIndex=_u.materialIndex;for(var $u=0,Bu=_u.vertexNormals.length;$u<Bu;$u++)this.vertexNormals[$u]=_u.vertexNormals[$u].clone();for(var $u=0,Bu=_u.vertexColors.length;$u<Bu;$u++)this.vertexColors[$u]=_u.vertexColors[$u].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(_u){if(_u!==void 0)for(var $u in _u){var Bu=_u[$u];if(Bu===void 0){console.warn("THREE.Material: '"+$u+"' parameter is undefined.");continue}if($u==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Bu===FlatShading;continue}var Ru=this[$u];if(Ru===void 0){console.warn("THREE."+this.type+": '"+$u+"' is not a property of this material.");continue}Ru&&Ru.isColor?Ru.set(Bu):Ru&&Ru.isVector3&&Bu&&Bu.isVector3?Ru.copy(Bu):this[$u]=Bu}},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";$u&&(_u={textures:{},images:{}});var Bu={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};Bu.uuid=this.uuid,Bu.type=this.type,this.name!==""&&(Bu.name=this.name),this.color&&this.color.isColor&&(Bu.color=this.color.getHex()),this.roughness!==void 0&&(Bu.roughness=this.roughness),this.metalness!==void 0&&(Bu.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(Bu.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(Bu.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(Bu.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Bu.specular=this.specular.getHex()),this.shininess!==void 0&&(Bu.shininess=this.shininess),this.clearcoat!==void 0&&(Bu.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Bu.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Bu.clearcoatMap=this.clearcoatMap.toJSON(_u).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Bu.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_u).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Bu.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_u).uuid,Bu.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(Bu.map=this.map.toJSON(_u).uuid),this.matcap&&this.matcap.isTexture&&(Bu.matcap=this.matcap.toJSON(_u).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Bu.alphaMap=this.alphaMap.toJSON(_u).uuid),this.lightMap&&this.lightMap.isTexture&&(Bu.lightMap=this.lightMap.toJSON(_u).uuid),this.aoMap&&this.aoMap.isTexture&&(Bu.aoMap=this.aoMap.toJSON(_u).uuid,Bu.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Bu.bumpMap=this.bumpMap.toJSON(_u).uuid,Bu.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Bu.normalMap=this.normalMap.toJSON(_u).uuid,Bu.normalMapType=this.normalMapType,Bu.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Bu.displacementMap=this.displacementMap.toJSON(_u).uuid,Bu.displacementScale=this.displacementScale,Bu.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Bu.roughnessMap=this.roughnessMap.toJSON(_u).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Bu.metalnessMap=this.metalnessMap.toJSON(_u).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Bu.emissiveMap=this.emissiveMap.toJSON(_u).uuid),this.specularMap&&this.specularMap.isTexture&&(Bu.specularMap=this.specularMap.toJSON(_u).uuid),this.envMap&&this.envMap.isTexture&&(Bu.envMap=this.envMap.toJSON(_u).uuid,Bu.reflectivity=this.reflectivity,Bu.refractionRatio=this.refractionRatio,this.combine!==void 0&&(Bu.combine=this.combine),this.envMapIntensity!==void 0&&(Bu.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(Bu.gradientMap=this.gradientMap.toJSON(_u).uuid),this.size!==void 0&&(Bu.size=this.size),this.sizeAttenuation!==void 0&&(Bu.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Bu.blending=this.blending),this.flatShading===!0&&(Bu.flatShading=this.flatShading),this.side!==FrontSide&&(Bu.side=this.side),this.vertexColors&&(Bu.vertexColors=!0),this.opacity<1&&(Bu.opacity=this.opacity),this.transparent===!0&&(Bu.transparent=this.transparent),Bu.depthFunc=this.depthFunc,Bu.depthTest=this.depthTest,Bu.depthWrite=this.depthWrite,Bu.stencilWrite=this.stencilWrite,Bu.stencilWriteMask=this.stencilWriteMask,Bu.stencilFunc=this.stencilFunc,Bu.stencilRef=this.stencilRef,Bu.stencilFuncMask=this.stencilFuncMask,Bu.stencilFail=this.stencilFail,Bu.stencilZFail=this.stencilZFail,Bu.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(Bu.rotation=this.rotation),this.polygonOffset===!0&&(Bu.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Bu.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Bu.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(Bu.linewidth=this.linewidth),this.dashSize!==void 0&&(Bu.dashSize=this.dashSize),this.gapSize!==void 0&&(Bu.gapSize=this.gapSize),this.scale!==void 0&&(Bu.scale=this.scale),this.dithering===!0&&(Bu.dithering=!0),this.alphaTest>0&&(Bu.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(Bu.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(Bu.wireframe=this.wireframe),this.wireframeLinewidth>1&&(Bu.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Bu.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Bu.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(Bu.morphTargets=!0),this.morphNormals===!0&&(Bu.morphNormals=!0),this.skinning===!0&&(Bu.skinning=!0),this.visible===!1&&(Bu.visible=!1),this.toneMapped===!1&&(Bu.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(Bu.userData=this.userData);function Ru(Fu){var Nu=[];for(var Vu in Fu){var Uu=Fu[Vu];delete Uu.metadata,Nu.push(Uu)}return Nu}if($u){var Lu=Ru(_u.textures),Ou=Ru(_u.images);Lu.length>0&&(Bu.textures=Lu),Ou.length>0&&(Bu.images=Ou)}return Bu},clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.name=_u.name,this.fog=_u.fog,this.blending=_u.blending,this.side=_u.side,this.flatShading=_u.flatShading,this.vertexColors=_u.vertexColors,this.opacity=_u.opacity,this.transparent=_u.transparent,this.blendSrc=_u.blendSrc,this.blendDst=_u.blendDst,this.blendEquation=_u.blendEquation,this.blendSrcAlpha=_u.blendSrcAlpha,this.blendDstAlpha=_u.blendDstAlpha,this.blendEquationAlpha=_u.blendEquationAlpha,this.depthFunc=_u.depthFunc,this.depthTest=_u.depthTest,this.depthWrite=_u.depthWrite,this.stencilWriteMask=_u.stencilWriteMask,this.stencilFunc=_u.stencilFunc,this.stencilRef=_u.stencilRef,this.stencilFuncMask=_u.stencilFuncMask,this.stencilFail=_u.stencilFail,this.stencilZFail=_u.stencilZFail,this.stencilZPass=_u.stencilZPass,this.stencilWrite=_u.stencilWrite;var $u=_u.clippingPlanes,Bu=null;if($u!==null){var Ru=$u.length;Bu=new Array(Ru);for(var Lu=0;Lu!==Ru;++Lu)Bu[Lu]=$u[Lu].clone()}return this.clippingPlanes=Bu,this.clipIntersection=_u.clipIntersection,this.clipShadows=_u.clipShadows,this.shadowSide=_u.shadowSide,this.colorWrite=_u.colorWrite,this.precision=_u.precision,this.polygonOffset=_u.polygonOffset,this.polygonOffsetFactor=_u.polygonOffsetFactor,this.polygonOffsetUnits=_u.polygonOffsetUnits,this.dithering=_u.dithering,this.alphaTest=_u.alphaTest,this.premultipliedAlpha=_u.premultipliedAlpha,this.visible=_u.visible,this.toneMapped=_u.toneMapped,this.userData=JSON.parse(JSON.stringify(_u.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function MeshBasicMaterial(_u){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(_u)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(_u,$u,Bu){if(Array.isArray(_u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=_u,this.itemSize=$u,this.count=_u!==void 0?_u.length/$u:0,this.normalized=Bu===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.name=_u.name,this.array=new _u.array.constructor(_u.array),this.itemSize=_u.itemSize,this.count=_u.count,this.normalized=_u.normalized,this.usage=_u.usage,this},copyAt:function(_u,$u,Bu){_u*=this.itemSize,Bu*=$u.itemSize;for(var Ru=0,Lu=this.itemSize;Ru<Lu;Ru++)this.array[_u+Ru]=$u.array[Bu+Ru];return this},copyArray:function(_u){return this.array.set(_u),this},copyColorsArray:function(_u){for(var $u=this.array,Bu=0,Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru];Ou===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Ru),Ou=new Color),$u[Bu++]=Ou.r,$u[Bu++]=Ou.g,$u[Bu++]=Ou.b}return this},copyVector2sArray:function(_u){for(var $u=this.array,Bu=0,Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru];Ou===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Ru),Ou=new Vector2),$u[Bu++]=Ou.x,$u[Bu++]=Ou.y}return this},copyVector3sArray:function(_u){for(var $u=this.array,Bu=0,Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru];Ou===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Ru),Ou=new Vector3),$u[Bu++]=Ou.x,$u[Bu++]=Ou.y,$u[Bu++]=Ou.z}return this},copyVector4sArray:function(_u){for(var $u=this.array,Bu=0,Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru];Ou===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Ru),Ou=new Vector4),$u[Bu++]=Ou.x,$u[Bu++]=Ou.y,$u[Bu++]=Ou.z,$u[Bu++]=Ou.w}return this},applyMatrix3:function(_u){for(var $u=0,Bu=this.count;$u<Bu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix3(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(_u){for(var $u=0,Bu=this.count;$u<Bu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix4(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(_u){for(var $u=0,Bu=this.count;$u<Bu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyNormalMatrix(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(_u){for(var $u=0,Bu=this.count;$u<Bu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.transformDirection(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},getX:function(_u){return this.array[_u*this.itemSize]},setX:function(_u,$u){return this.array[_u*this.itemSize]=$u,this},getY:function(_u){return this.array[_u*this.itemSize+1]},setY:function(_u,$u){return this.array[_u*this.itemSize+1]=$u,this},getZ:function(_u){return this.array[_u*this.itemSize+2]},setZ:function(_u,$u){return this.array[_u*this.itemSize+2]=$u,this},getW:function(_u){return this.array[_u*this.itemSize+3]},setW:function(_u,$u){return this.array[_u*this.itemSize+3]=$u,this},setXY:function(_u,$u,Bu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Bu,this},setXYZ:function(_u,$u,Bu,Ru){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Bu,this.array[_u+2]=Ru,this},setXYZW:function(_u,$u,Bu,Ru,Lu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Bu,this.array[_u+2]=Ru,this.array[_u+3]=Lu,this},onUpload:function(_u){return this.onUploadCallback=_u,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Int8Array(_u),$u,Bu)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Uint8Array(_u),$u,Bu)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Uint8ClampedArray(_u),$u,Bu)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Int16Array(_u),$u,Bu)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Uint16Array(_u),$u,Bu)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Int32Array(_u),$u,Bu)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Uint32Array(_u),$u,Bu)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Float32Array(_u),$u,Bu)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(_u,$u,Bu){BufferAttribute.call(this,new Float64Array(_u),$u,Bu)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(_u){for(var $u,Bu=[],Ru=void 0,Lu=_u.faces,Ou=0;Ou<Lu.length;Ou++){var Fu=Lu[Ou];Fu.materialIndex!==Ru&&(Ru=Fu.materialIndex,$u!==void 0&&($u.count=Ou*3-$u.start,Bu.push($u)),$u={start:Ou*3,materialIndex:Ru})}$u!==void 0&&($u.count=Ou*3-$u.start,Bu.push($u)),this.groups=Bu},fromGeometry:function(_u){var $u=_u.faces,Bu=_u.vertices,Ru=_u.faceVertexUvs,Lu=Ru[0]&&Ru[0].length>0,Ou=Ru[1]&&Ru[1].length>0,Fu=_u.morphTargets,Nu=Fu.length,Vu;if(Nu>0){Vu=[];for(var Uu=0;Uu<Nu;Uu++)Vu[Uu]={name:Fu[Uu].name,data:[]};this.morphTargets.position=Vu}var Gu=_u.morphNormals,zu=Gu.length,Hu;if(zu>0){Hu=[];for(var Uu=0;Uu<zu;Uu++)Hu[Uu]={name:Gu[Uu].name,data:[]};this.morphTargets.normal=Hu}var ju=_u.skinIndices,Qu=_u.skinWeights,Xu=ju.length===Bu.length,Ku=Qu.length===Bu.length;Bu.length>0&&$u.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Uu=0;Uu<$u.length;Uu++){var Wu=$u[Uu];this.vertices.push(Bu[Wu.a],Bu[Wu.b],Bu[Wu.c]);var qu=Wu.vertexNormals;if(qu.length===3)this.normals.push(qu[0],qu[1],qu[2]);else{var Yu=Wu.normal;this.normals.push(Yu,Yu,Yu)}var Zu=Wu.vertexColors;if(Zu.length===3)this.colors.push(Zu[0],Zu[1],Zu[2]);else{var _h=Wu.color;this.colors.push(_h,_h,_h)}if(Lu===!0){var ep=Ru[0][Uu];ep!==void 0?this.uvs.push(ep[0],ep[1],ep[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Uu),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Ou===!0){var ep=Ru[1][Uu];ep!==void 0?this.uvs2.push(ep[0],ep[1],ep[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Uu),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var ip=0;ip<Nu;ip++){var ap=Fu[ip].vertices;Vu[ip].data.push(ap[Wu.a],ap[Wu.b],ap[Wu.c])}for(var ip=0;ip<zu;ip++){var sp=Gu[ip].vertexNormals[Uu];Hu[ip].data.push(sp.a,sp.b,sp.c)}Xu&&this.skinIndices.push(ju[Wu.a],ju[Wu.b],ju[Wu.c]),Ku&&this.skinWeights.push(Qu[Wu.a],Qu[Wu.b],Qu[Wu.c])}return this.computeGroups(_u),this.verticesNeedUpdate=_u.verticesNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this}});function arrayMax(_u){if(_u.length===0)return-1/0;let $u=_u[0];for(let Bu=1,Ru=_u.length;Bu<Ru;++Bu)_u[Bu]>$u&&($u=_u[Bu]);return $u}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(_u){Array.isArray(_u)?this.index=new(arrayMax(_u)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(_u,1):this.index=_u},getAttribute:function(_u){return this.attributes[_u]},setAttribute:function(_u,$u){return this.attributes[_u]=$u,this},deleteAttribute:function(_u){return delete this.attributes[_u],this},addGroup:function(_u,$u,Bu){this.groups.push({start:_u,count:$u,materialIndex:Bu!==void 0?Bu:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(_u,$u){this.drawRange.start=_u,this.drawRange.count=$u},applyMatrix4:function(_u){var $u=this.attributes.position;$u!==void 0&&($u.applyMatrix4(_u),$u.needsUpdate=!0);var Bu=this.attributes.normal;if(Bu!==void 0){var Ru=new Matrix3().getNormalMatrix(_u);Bu.applyNormalMatrix(Ru),Bu.needsUpdate=!0}var Lu=this.attributes.tangent;return Lu!==void 0&&(Lu.transformDirection(_u),Lu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(_u){return _m1$2.makeRotationX(_u),this.applyMatrix4(_m1$2),this},rotateY:function(_u){return _m1$2.makeRotationY(_u),this.applyMatrix4(_m1$2),this},rotateZ:function(_u){return _m1$2.makeRotationZ(_u),this.applyMatrix4(_m1$2),this},translate:function(_u,$u,Bu){return _m1$2.makeTranslation(_u,$u,Bu),this.applyMatrix4(_m1$2),this},scale:function(_u,$u,Bu){return _m1$2.makeScale(_u,$u,Bu),this.applyMatrix4(_m1$2),this},lookAt:function(_u){return _obj.lookAt(_u),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(_u){var $u=_u.geometry;if(_u.isPoints||_u.isLine){var Bu=new Float32BufferAttribute($u.vertices.length*3,3),Ru=new Float32BufferAttribute($u.colors.length*3,3);if(this.setAttribute("position",Bu.copyVector3sArray($u.vertices)),this.setAttribute("color",Ru.copyColorsArray($u.colors)),$u.lineDistances&&$u.lineDistances.length===$u.vertices.length){var Lu=new Float32BufferAttribute($u.lineDistances.length,1);this.setAttribute("lineDistance",Lu.copyArray($u.lineDistances))}$u.boundingSphere!==null&&(this.boundingSphere=$u.boundingSphere.clone()),$u.boundingBox!==null&&(this.boundingBox=$u.boundingBox.clone())}else _u.isMesh&&$u&&$u.isGeometry&&this.fromGeometry($u);return this},setFromPoints:function(_u){for(var $u=[],Bu=0,Ru=_u.length;Bu<Ru;Bu++){var Lu=_u[Bu];$u.push(Lu.x,Lu.y,Lu.z||0)}return this.setAttribute("position",new Float32BufferAttribute($u,3)),this},updateFromObject:function(_u){var $u=_u.geometry;if(_u.isMesh){var Bu=$u.__directGeometry;if($u.elementsNeedUpdate===!0&&(Bu=void 0,$u.elementsNeedUpdate=!1),Bu===void 0)return this.fromGeometry($u);Bu.verticesNeedUpdate=$u.verticesNeedUpdate,Bu.normalsNeedUpdate=$u.normalsNeedUpdate,Bu.colorsNeedUpdate=$u.colorsNeedUpdate,Bu.uvsNeedUpdate=$u.uvsNeedUpdate,Bu.groupsNeedUpdate=$u.groupsNeedUpdate,$u.verticesNeedUpdate=!1,$u.normalsNeedUpdate=!1,$u.colorsNeedUpdate=!1,$u.uvsNeedUpdate=!1,$u.groupsNeedUpdate=!1,$u=Bu}var Ru;return $u.verticesNeedUpdate===!0&&(Ru=this.attributes.position,Ru!==void 0&&(Ru.copyVector3sArray($u.vertices),Ru.needsUpdate=!0),$u.verticesNeedUpdate=!1),$u.normalsNeedUpdate===!0&&(Ru=this.attributes.normal,Ru!==void 0&&(Ru.copyVector3sArray($u.normals),Ru.needsUpdate=!0),$u.normalsNeedUpdate=!1),$u.colorsNeedUpdate===!0&&(Ru=this.attributes.color,Ru!==void 0&&(Ru.copyColorsArray($u.colors),Ru.needsUpdate=!0),$u.colorsNeedUpdate=!1),$u.uvsNeedUpdate&&(Ru=this.attributes.uv,Ru!==void 0&&(Ru.copyVector2sArray($u.uvs),Ru.needsUpdate=!0),$u.uvsNeedUpdate=!1),$u.lineDistancesNeedUpdate&&(Ru=this.attributes.lineDistance,Ru!==void 0&&(Ru.copyArray($u.lineDistances),Ru.needsUpdate=!0),$u.lineDistancesNeedUpdate=!1),$u.groupsNeedUpdate&&($u.computeGroups(_u.geometry),this.groups=$u.groups,$u.groupsNeedUpdate=!1),this},fromGeometry:function(_u){return _u.__directGeometry=new DirectGeometry().fromGeometry(_u),this.fromDirectGeometry(_u.__directGeometry)},fromDirectGeometry:function(_u){var $u=new Float32Array(_u.vertices.length*3);if(this.setAttribute("position",new BufferAttribute($u,3).copyVector3sArray(_u.vertices)),_u.normals.length>0){var Bu=new Float32Array(_u.normals.length*3);this.setAttribute("normal",new BufferAttribute(Bu,3).copyVector3sArray(_u.normals))}if(_u.colors.length>0){var Ru=new Float32Array(_u.colors.length*3);this.setAttribute("color",new BufferAttribute(Ru,3).copyColorsArray(_u.colors))}if(_u.uvs.length>0){var Lu=new Float32Array(_u.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Lu,2).copyVector2sArray(_u.uvs))}if(_u.uvs2.length>0){var Ou=new Float32Array(_u.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Ou,2).copyVector2sArray(_u.uvs2))}this.groups=_u.groups;for(var Fu in _u.morphTargets){for(var Nu=[],Vu=_u.morphTargets[Fu],Uu=0,Gu=Vu.length;Uu<Gu;Uu++){var zu=Vu[Uu],Hu=new Float32BufferAttribute(zu.data.length*3,3);Hu.name=zu.name,Nu.push(Hu.copyVector3sArray(zu.data))}this.morphAttributes[Fu]=Nu}if(_u.skinIndices.length>0){var ju=new Float32BufferAttribute(_u.skinIndices.length*4,4);this.setAttribute("skinIndex",ju.copyVector4sArray(_u.skinIndices))}if(_u.skinWeights.length>0){var Qu=new Float32BufferAttribute(_u.skinWeights.length*4,4);this.setAttribute("skinWeight",Qu.copyVector4sArray(_u.skinWeights))}return _u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u!==void 0){if(this.boundingBox.setFromBufferAttribute(_u),$u)for(var Bu=0,Ru=$u.length;Bu<Ru;Bu++){var Lu=$u[Bu];_box$2.setFromBufferAttribute(Lu),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u){var Bu=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_u),$u)for(var Ru=0,Lu=$u.length;Ru<Lu;Ru++){var Ou=$u[Ru];_boxMorphTargets.setFromBufferAttribute(Ou),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Bu);for(var Fu=0,Ru=0,Lu=_u.count;Ru<Lu;Ru++)_vector$4.fromBufferAttribute(_u,Ru),Fu=Math.max(Fu,Bu.distanceToSquared(_vector$4));if($u)for(var Ru=0,Lu=$u.length;Ru<Lu;Ru++)for(var Ou=$u[Ru],Nu=this.morphTargetsRelative,Vu=0,Uu=Ou.count;Vu<Uu;Vu++)_vector$4.fromBufferAttribute(Ou,Vu),Nu&&(_offset.fromBufferAttribute(_u,Vu),_vector$4.add(_offset)),Fu=Math.max(Fu,Bu.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Fu),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var _u=this.index,$u=this.attributes;if($u.position){var Bu=$u.position.array;if($u.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(Bu.length),3));else for(var Ru=$u.normal.array,Lu=0,Ou=Ru.length;Lu<Ou;Lu++)Ru[Lu]=0;var Fu=$u.normal.array,Nu,Vu,Uu,Gu=new Vector3,zu=new Vector3,Hu=new Vector3,ju=new Vector3,Qu=new Vector3;if(_u)for(var Xu=_u.array,Lu=0,Ou=_u.count;Lu<Ou;Lu+=3)Nu=Xu[Lu+0]*3,Vu=Xu[Lu+1]*3,Uu=Xu[Lu+2]*3,Gu.fromArray(Bu,Nu),zu.fromArray(Bu,Vu),Hu.fromArray(Bu,Uu),ju.subVectors(Hu,zu),Qu.subVectors(Gu,zu),ju.cross(Qu),Fu[Nu]+=ju.x,Fu[Nu+1]+=ju.y,Fu[Nu+2]+=ju.z,Fu[Vu]+=ju.x,Fu[Vu+1]+=ju.y,Fu[Vu+2]+=ju.z,Fu[Uu]+=ju.x,Fu[Uu+1]+=ju.y,Fu[Uu+2]+=ju.z;else for(var Lu=0,Ou=Bu.length;Lu<Ou;Lu+=9)Gu.fromArray(Bu,Lu),zu.fromArray(Bu,Lu+3),Hu.fromArray(Bu,Lu+6),ju.subVectors(Hu,zu),Qu.subVectors(Gu,zu),ju.cross(Qu),Fu[Lu]=ju.x,Fu[Lu+1]=ju.y,Fu[Lu+2]=ju.z,Fu[Lu+3]=ju.x,Fu[Lu+4]=ju.y,Fu[Lu+5]=ju.z,Fu[Lu+6]=ju.x,Fu[Lu+7]=ju.y,Fu[Lu+8]=ju.z;this.normalizeNormals(),$u.normal.needsUpdate=!0}},merge:function(_u,$u){if(!(_u&&_u.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",_u);return}$u===void 0&&($u=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var Bu=this.attributes;for(var Ru in Bu)if(_u.attributes[Ru]!==void 0)for(var Lu=Bu[Ru],Ou=Lu.array,Fu=_u.attributes[Ru],Nu=Fu.array,Vu=Fu.itemSize*$u,Uu=Math.min(Nu.length,Ou.length-Vu),Gu=0,zu=Vu;Gu<Uu;Gu++,zu++)Ou[zu]=Nu[Gu];return this},normalizeNormals:function(){for(var _u=this.attributes.normal,$u=0,Bu=_u.count;$u<Bu;$u++)_vector$4.x=_u.getX($u),_vector$4.y=_u.getY($u),_vector$4.z=_u.getZ($u),_vector$4.normalize(),_u.setXYZ($u,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function _u(Xu,Ku){for(var Wu=Xu.array,qu=Xu.itemSize,Yu=Xu.normalized,Zu=new Wu.constructor(Ku.length*qu),_h=0,ep=0,ip=0,ap=Ku.length;ip<ap;ip++){_h=Ku[ip]*qu;for(var sp=0;sp<qu;sp++)Zu[ep++]=Wu[_h++]}return new BufferAttribute(Zu,qu,Yu)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var $u=new BufferGeometry,Bu=this.index.array,Ru=this.attributes;for(var Lu in Ru){var Ou=Ru[Lu],Fu=_u(Ou,Bu);$u.setAttribute(Lu,Fu)}var Nu=this.morphAttributes;for(Lu in Nu){for(var Vu=[],Uu=Nu[Lu],Gu=0,zu=Uu.length;Gu<zu;Gu++){var Ou=Uu[Gu],Fu=_u(Ou,Bu);Vu.push(Fu)}$u.morphAttributes[Lu]=Vu}$u.morphTargetsRelative=this.morphTargetsRelative;for(var Hu=this.groups,Gu=0,ju=Hu.length;Gu<ju;Gu++){var Qu=Hu[Gu];$u.addGroup(Qu.start,Qu.count,Qu.materialIndex)}return $u},toJSON:function(){var _u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),Object.keys(this.userData).length>0&&(_u.userData=this.userData),this.parameters!==void 0){var $u=this.parameters;for(var Bu in $u)$u[Bu]!==void 0&&(_u[Bu]=$u[Bu]);return _u}_u.data={attributes:{}};var Ru=this.index;Ru!==null&&(_u.data.index={type:Ru.array.constructor.name,array:Array.prototype.slice.call(Ru.array)});var Lu=this.attributes;for(var Bu in Lu){var Ou=Lu[Bu],Fu=Ou.toJSON();Ou.name!==""&&(Fu.name=Ou.name),_u.data.attributes[Bu]=Fu}var Nu={},Vu=!1;for(var Bu in this.morphAttributes){for(var Uu=this.morphAttributes[Bu],Gu=[],zu=0,Hu=Uu.length;zu<Hu;zu++){var Ou=Uu[zu],Fu=Ou.toJSON();Ou.name!==""&&(Fu.name=Ou.name),Gu.push(Fu)}Gu.length>0&&(Nu[Bu]=Gu,Vu=!0)}Vu&&(_u.data.morphAttributes=Nu,_u.data.morphTargetsRelative=this.morphTargetsRelative);var ju=this.groups;ju.length>0&&(_u.data.groups=JSON.parse(JSON.stringify(ju)));var Qu=this.boundingSphere;return Qu!==null&&(_u.data.boundingSphere={center:Qu.center.toArray(),radius:Qu.radius}),_u},clone:function(){return new BufferGeometry().copy(this)},copy:function(_u){var $u,Bu,Ru;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Lu=_u.index;Lu!==null&&this.setIndex(Lu.clone());var Ou=_u.attributes;for($u in Ou){var Fu=Ou[$u];this.setAttribute($u,Fu.clone())}var Nu=_u.morphAttributes;for($u in Nu){var Vu=[],Uu=Nu[$u];for(Bu=0,Ru=Uu.length;Bu<Ru;Bu++)Vu.push(Uu[Bu].clone());this.morphAttributes[$u]=Vu}this.morphTargetsRelative=_u.morphTargetsRelative;var Gu=_u.groups;for(Bu=0,Ru=Gu.length;Bu<Ru;Bu++){var zu=Gu[Bu];this.addGroup(zu.start,zu.count,zu.materialIndex)}var Hu=_u.boundingBox;Hu!==null&&(this.boundingBox=Hu.clone());var ju=_u.boundingSphere;return ju!==null&&(this.boundingSphere=ju.clone()),this.drawRange.start=_u.drawRange.start,this.drawRange.count=_u.drawRange.count,this.userData=_u.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(_u,$u){Object3D.call(this),this.type="Mesh",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_u.morphTargetInfluences.slice()),_u.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_u.morphTargetDictionary)),this},updateMorphTargets:function(){var _u=this.geometry,$u,Bu,Ru;if(_u.isBufferGeometry){var Lu=_u.morphAttributes,Ou=Object.keys(Lu);if(Ou.length>0){var Fu=Lu[Ou[0]];if(Fu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Bu=Fu.length;$u<Bu;$u++)Ru=Fu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ru]=$u}}else{var Nu=_u.morphTargets;Nu!==void 0&&Nu.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(_u,$u){var Bu=this.geometry,Ru=this.material,Lu=this.matrixWorld;if(Ru!==void 0&&(Bu.boundingSphere===null&&Bu.computeBoundingSphere(),_sphere.copy(Bu.boundingSphere),_sphere.applyMatrix4(Lu),_u.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Lu),_ray.copy(_u.ray).applyMatrix4(_inverseMatrix),!(Bu.boundingBox!==null&&_ray.intersectsBox(Bu.boundingBox)===!1)))){var Ou;if(Bu.isBufferGeometry){var Fu,Nu,Vu,Uu=Bu.index,Gu=Bu.attributes.position,zu=Bu.morphAttributes.position,Hu=Bu.morphTargetsRelative,ju=Bu.attributes.uv,Qu=Bu.attributes.uv2,Xu=Bu.groups,Ku=Bu.drawRange,Wu,qu,Yu,Zu,_h,ep,ip,ap;if(Uu!==null)if(Array.isArray(Ru))for(Wu=0,Yu=Xu.length;Wu<Yu;Wu++)for(_h=Xu[Wu],ep=Ru[_h.materialIndex],ip=Math.max(_h.start,Ku.start),ap=Math.min(_h.start+_h.count,Ku.start+Ku.count),qu=ip,Zu=ap;qu<Zu;qu+=3)Fu=Uu.getX(qu),Nu=Uu.getX(qu+1),Vu=Uu.getX(qu+2),Ou=checkBufferGeometryIntersection(this,ep,_u,_ray,Gu,zu,Hu,ju,Qu,Fu,Nu,Vu),Ou&&(Ou.faceIndex=Math.floor(qu/3),Ou.face.materialIndex=_h.materialIndex,$u.push(Ou));else for(ip=Math.max(0,Ku.start),ap=Math.min(Uu.count,Ku.start+Ku.count),Wu=ip,Yu=ap;Wu<Yu;Wu+=3)Fu=Uu.getX(Wu),Nu=Uu.getX(Wu+1),Vu=Uu.getX(Wu+2),Ou=checkBufferGeometryIntersection(this,Ru,_u,_ray,Gu,zu,Hu,ju,Qu,Fu,Nu,Vu),Ou&&(Ou.faceIndex=Math.floor(Wu/3),$u.push(Ou));else if(Gu!==void 0)if(Array.isArray(Ru))for(Wu=0,Yu=Xu.length;Wu<Yu;Wu++)for(_h=Xu[Wu],ep=Ru[_h.materialIndex],ip=Math.max(_h.start,Ku.start),ap=Math.min(_h.start+_h.count,Ku.start+Ku.count),qu=ip,Zu=ap;qu<Zu;qu+=3)Fu=qu,Nu=qu+1,Vu=qu+2,Ou=checkBufferGeometryIntersection(this,ep,_u,_ray,Gu,zu,Hu,ju,Qu,Fu,Nu,Vu),Ou&&(Ou.faceIndex=Math.floor(qu/3),Ou.face.materialIndex=_h.materialIndex,$u.push(Ou));else for(ip=Math.max(0,Ku.start),ap=Math.min(Gu.count,Ku.start+Ku.count),Wu=ip,Yu=ap;Wu<Yu;Wu+=3)Fu=Wu,Nu=Wu+1,Vu=Wu+2,Ou=checkBufferGeometryIntersection(this,Ru,_u,_ray,Gu,zu,Hu,ju,Qu,Fu,Nu,Vu),Ou&&(Ou.faceIndex=Math.floor(Wu/3),$u.push(Ou))}else if(Bu.isGeometry){var sp,Ju,_f,np=Array.isArray(Ru),tp=Bu.vertices,rp=Bu.faces,op,lp=Bu.faceVertexUvs[0];lp.length>0&&(op=lp);for(var up=0,cp=rp.length;up<cp;up++){var Ap=rp[up],yp=np?Ru[Ap.materialIndex]:Ru;if(yp!==void 0&&(sp=tp[Ap.a],Ju=tp[Ap.b],_f=tp[Ap.c],Ou=checkIntersection(this,yp,_u,_ray,sp,Ju,_f,_intersectionPoint),Ou)){if(op&&op[up]){var Ip=op[up];_uvA.copy(Ip[0]),_uvB.copy(Ip[1]),_uvC.copy(Ip[2]),Ou.uv=Triangle.getUV(_intersectionPoint,sp,Ju,_f,_uvA,_uvB,_uvC,new Vector2)}Ou.face=Ap,Ou.faceIndex=up,$u.push(Ou)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){var Vu;if($u.side===BackSide?Vu=Ru.intersectTriangle(Fu,Ou,Lu,!0,Nu):Vu=Ru.intersectTriangle(Lu,Ou,Fu,$u.side!==DoubleSide,Nu),Vu===null)return null;_intersectionPointWorld.copy(Nu),_intersectionPointWorld.applyMatrix4(_u.matrixWorld);var Uu=Bu.ray.origin.distanceTo(_intersectionPointWorld);return Uu<Bu.near||Uu>Bu.far?null:{distance:Uu,point:_intersectionPointWorld.clone(),object:_u}}function checkBufferGeometryIntersection(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu){_vA.fromBufferAttribute(Lu,Uu),_vB.fromBufferAttribute(Lu,Gu),_vC.fromBufferAttribute(Lu,zu);var Hu=_u.morphTargetInfluences;if($u.morphTargets&&Ou&&Hu){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var ju=0,Qu=Ou.length;ju<Qu;ju++){var Xu=Hu[ju],Ku=Ou[ju];Xu!==0&&(_tempA.fromBufferAttribute(Ku,Uu),_tempB.fromBufferAttribute(Ku,Gu),_tempC.fromBufferAttribute(Ku,zu),Fu?(_morphA.addScaledVector(_tempA,Xu),_morphB.addScaledVector(_tempB,Xu),_morphC.addScaledVector(_tempC,Xu)):(_morphA.addScaledVector(_tempA.sub(_vA),Xu),_morphB.addScaledVector(_tempB.sub(_vB),Xu),_morphC.addScaledVector(_tempC.sub(_vC),Xu)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}_u.isSkinnedMesh&&(_u.boneTransform(Uu,_vA),_u.boneTransform(Gu,_vB),_u.boneTransform(zu,_vC));var Wu=checkIntersection(_u,$u,Bu,Ru,_vA,_vB,_vC,_intersectionPoint);if(Wu){Nu&&(_uvA.fromBufferAttribute(Nu,Uu),_uvB.fromBufferAttribute(Nu,Gu),_uvC.fromBufferAttribute(Nu,zu),Wu.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Vu&&(_uvA.fromBufferAttribute(Vu,Uu),_uvB.fromBufferAttribute(Vu,Gu),_uvC.fromBufferAttribute(Vu,zu),Wu.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var qu=new Face3(Uu,Gu,zu);Triangle.getNormal(_vA,_vB,_vC,qu.normal),Wu.face=qu}return Wu}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(_u){for(var $u=new Matrix3().getNormalMatrix(_u),Bu=0,Ru=this.vertices.length;Bu<Ru;Bu++){var Lu=this.vertices[Bu];Lu.applyMatrix4(_u)}for(var Bu=0,Ru=this.faces.length;Bu<Ru;Bu++){var Ou=this.faces[Bu];Ou.normal.applyMatrix3($u).normalize();for(var Fu=0,Nu=Ou.vertexNormals.length;Fu<Nu;Fu++)Ou.vertexNormals[Fu].applyMatrix3($u).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(_u){return _m1$3.makeRotationX(_u),this.applyMatrix4(_m1$3),this},rotateY:function(_u){return _m1$3.makeRotationY(_u),this.applyMatrix4(_m1$3),this},rotateZ:function(_u){return _m1$3.makeRotationZ(_u),this.applyMatrix4(_m1$3),this},translate:function(_u,$u,Bu){return _m1$3.makeTranslation(_u,$u,Bu),this.applyMatrix4(_m1$3),this},scale:function(_u,$u,Bu){return _m1$3.makeScale(_u,$u,Bu),this.applyMatrix4(_m1$3),this},lookAt:function(_u){return _obj$1.lookAt(_u),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(_u){var $u=this,Bu=_u.index!==null?_u.index.array:void 0,Ru=_u.attributes;if(Ru.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Lu=Ru.position.array,Ou=Ru.normal!==void 0?Ru.normal.array:void 0,Fu=Ru.color!==void 0?Ru.color.array:void 0,Nu=Ru.uv!==void 0?Ru.uv.array:void 0,Vu=Ru.uv2!==void 0?Ru.uv2.array:void 0;Vu!==void 0&&(this.faceVertexUvs[1]=[]);for(var Uu=0;Uu<Lu.length;Uu+=3)$u.vertices.push(new Vector3().fromArray(Lu,Uu)),Fu!==void 0&&$u.colors.push(new Color().fromArray(Fu,Uu));function Gu(Wu,qu,Yu,Zu){var _h=Fu===void 0?[]:[$u.colors[Wu].clone(),$u.colors[qu].clone(),$u.colors[Yu].clone()],ep=Ou===void 0?[]:[new Vector3().fromArray(Ou,Wu*3),new Vector3().fromArray(Ou,qu*3),new Vector3().fromArray(Ou,Yu*3)],ip=new Face3(Wu,qu,Yu,ep,_h,Zu);$u.faces.push(ip),Nu!==void 0&&$u.faceVertexUvs[0].push([new Vector2().fromArray(Nu,Wu*2),new Vector2().fromArray(Nu,qu*2),new Vector2().fromArray(Nu,Yu*2)]),Vu!==void 0&&$u.faceVertexUvs[1].push([new Vector2().fromArray(Vu,Wu*2),new Vector2().fromArray(Vu,qu*2),new Vector2().fromArray(Vu,Yu*2)])}var zu=_u.groups;if(zu.length>0)for(var Uu=0;Uu<zu.length;Uu++)for(var Hu=zu[Uu],ju=Hu.start,Qu=Hu.count,Xu=ju,Ku=ju+Qu;Xu<Ku;Xu+=3)Bu!==void 0?Gu(Bu[Xu],Bu[Xu+1],Bu[Xu+2],Hu.materialIndex):Gu(Xu,Xu+1,Xu+2,Hu.materialIndex);else if(Bu!==void 0)for(var Uu=0;Uu<Bu.length;Uu+=3)Gu(Bu[Uu],Bu[Uu+1],Bu[Uu+2]);else for(var Uu=0;Uu<Lu.length/3;Uu+=3)Gu(Uu,Uu+1,Uu+2);return this.computeFaceNormals(),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var _u=this.boundingSphere.center,$u=this.boundingSphere.radius,Bu=$u===0?1:1/$u,Ru=new Matrix4;return Ru.set(Bu,0,0,-Bu*_u.x,0,Bu,0,-Bu*_u.y,0,0,Bu,-Bu*_u.z,0,0,0,1),this.applyMatrix4(Ru),this},computeFaceNormals:function(){for(var _u=new Vector3,$u=new Vector3,Bu=0,Ru=this.faces.length;Bu<Ru;Bu++){var Lu=this.faces[Bu],Ou=this.vertices[Lu.a],Fu=this.vertices[Lu.b],Nu=this.vertices[Lu.c];_u.subVectors(Nu,Fu),$u.subVectors(Ou,Fu),_u.cross($u),_u.normalize(),Lu.normal.copy(_u)}},computeVertexNormals:function(_u){_u===void 0&&(_u=!0);var $u,Bu,Ru,Lu,Ou,Fu;for(Fu=new Array(this.vertices.length),$u=0,Bu=this.vertices.length;$u<Bu;$u++)Fu[$u]=new Vector3;if(_u){var Nu,Vu,Uu,Gu=new Vector3,zu=new Vector3;for(Ru=0,Lu=this.faces.length;Ru<Lu;Ru++)Ou=this.faces[Ru],Nu=this.vertices[Ou.a],Vu=this.vertices[Ou.b],Uu=this.vertices[Ou.c],Gu.subVectors(Uu,Vu),zu.subVectors(Nu,Vu),Gu.cross(zu),Fu[Ou.a].add(Gu),Fu[Ou.b].add(Gu),Fu[Ou.c].add(Gu)}else for(this.computeFaceNormals(),Ru=0,Lu=this.faces.length;Ru<Lu;Ru++)Ou=this.faces[Ru],Fu[Ou.a].add(Ou.normal),Fu[Ou.b].add(Ou.normal),Fu[Ou.c].add(Ou.normal);for($u=0,Bu=this.vertices.length;$u<Bu;$u++)Fu[$u].normalize();for(Ru=0,Lu=this.faces.length;Ru<Lu;Ru++){Ou=this.faces[Ru];var Hu=Ou.vertexNormals;Hu.length===3?(Hu[0].copy(Fu[Ou.a]),Hu[1].copy(Fu[Ou.b]),Hu[2].copy(Fu[Ou.c])):(Hu[0]=Fu[Ou.a].clone(),Hu[1]=Fu[Ou.b].clone(),Hu[2]=Fu[Ou.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var _u,$u,Bu;for(this.computeFaceNormals(),_u=0,$u=this.faces.length;_u<$u;_u++){Bu=this.faces[_u];var Ru=Bu.vertexNormals;Ru.length===3?(Ru[0].copy(Bu.normal),Ru[1].copy(Bu.normal),Ru[2].copy(Bu.normal)):(Ru[0]=Bu.normal.clone(),Ru[1]=Bu.normal.clone(),Ru[2]=Bu.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var _u,$u,Bu,Ru,Lu;for(Bu=0,Ru=this.faces.length;Bu<Ru;Bu++)for(Lu=this.faces[Bu],Lu.__originalFaceNormal?Lu.__originalFaceNormal.copy(Lu.normal):Lu.__originalFaceNormal=Lu.normal.clone(),Lu.__originalVertexNormals||(Lu.__originalVertexNormals=[]),_u=0,$u=Lu.vertexNormals.length;_u<$u;_u++)Lu.__originalVertexNormals[_u]?Lu.__originalVertexNormals[_u].copy(Lu.vertexNormals[_u]):Lu.__originalVertexNormals[_u]=Lu.vertexNormals[_u].clone();var Ou=new Geometry;for(Ou.faces=this.faces,_u=0,$u=this.morphTargets.length;_u<$u;_u++){if(!this.morphNormals[_u]){this.morphNormals[_u]={},this.morphNormals[_u].faceNormals=[],this.morphNormals[_u].vertexNormals=[];var Fu=this.morphNormals[_u].faceNormals,Nu=this.morphNormals[_u].vertexNormals,Uu,Gu;for(Bu=0,Ru=this.faces.length;Bu<Ru;Bu++)Uu=new Vector3,Gu={a:new Vector3,b:new Vector3,c:new Vector3},Fu.push(Uu),Nu.push(Gu)}var Vu=this.morphNormals[_u];Ou.vertices=this.morphTargets[_u].vertices,Ou.computeFaceNormals(),Ou.computeVertexNormals();var Uu,Gu;for(Bu=0,Ru=this.faces.length;Bu<Ru;Bu++)Lu=this.faces[Bu],Uu=Vu.faceNormals[Bu],Gu=Vu.vertexNormals[Bu],Uu.copy(Lu.normal),Gu.a.copy(Lu.vertexNormals[0]),Gu.b.copy(Lu.vertexNormals[1]),Gu.c.copy(Lu.vertexNormals[2])}for(Bu=0,Ru=this.faces.length;Bu<Ru;Bu++)Lu=this.faces[Bu],Lu.normal=Lu.__originalFaceNormal,Lu.vertexNormals=Lu.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(_u,$u,Bu){if(!(_u&&_u.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",_u);return}var Ru,Lu=this.vertices.length,Ou=this.vertices,Fu=_u.vertices,Nu=this.faces,Vu=_u.faces,Uu=this.colors,Gu=_u.colors;Bu===void 0&&(Bu=0),$u!==void 0&&(Ru=new Matrix3().getNormalMatrix($u));for(var zu=0,Hu=Fu.length;zu<Hu;zu++){var ju=Fu[zu],Qu=ju.clone();$u!==void 0&&Qu.applyMatrix4($u),Ou.push(Qu)}for(var zu=0,Hu=Gu.length;zu<Hu;zu++)Uu.push(Gu[zu].clone());for(zu=0,Hu=Vu.length;zu<Hu;zu++){var Xu=Vu[zu],Ku,Wu,qu,Yu=Xu.vertexNormals,Zu=Xu.vertexColors;Ku=new Face3(Xu.a+Lu,Xu.b+Lu,Xu.c+Lu),Ku.normal.copy(Xu.normal),Ru!==void 0&&Ku.normal.applyMatrix3(Ru).normalize();for(var _h=0,ep=Yu.length;_h<ep;_h++)Wu=Yu[_h].clone(),Ru!==void 0&&Wu.applyMatrix3(Ru).normalize(),Ku.vertexNormals.push(Wu);Ku.color.copy(Xu.color);for(var _h=0,ep=Zu.length;_h<ep;_h++)qu=Zu[_h],Ku.vertexColors.push(qu.clone());Ku.materialIndex=Xu.materialIndex+Bu,Nu.push(Ku)}for(var zu=0,Hu=_u.faceVertexUvs.length;zu<Hu;zu++){var ip=_u.faceVertexUvs[zu];this.faceVertexUvs[zu]===void 0&&(this.faceVertexUvs[zu]=[]);for(var _h=0,ep=ip.length;_h<ep;_h++){for(var ap=ip[_h],sp=[],Ju=0,_f=ap.length;Ju<_f;Ju++)sp.push(ap[Ju].clone());this.faceVertexUvs[zu].push(sp)}}},mergeMesh:function(_u){if(!(_u&&_u.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",_u);return}_u.matrixAutoUpdate&&_u.updateMatrix(),this.merge(_u.geometry,_u.matrix)},mergeVertices:function(){var _u={},$u=[],Bu=[],Ru,Lu,Ou=4,Fu=Math.pow(10,Ou),Nu,Vu,Uu,Gu,zu,Hu;for(Nu=0,Vu=this.vertices.length;Nu<Vu;Nu++)Ru=this.vertices[Nu],Lu=Math.round(Ru.x*Fu)+"_"+Math.round(Ru.y*Fu)+"_"+Math.round(Ru.z*Fu),_u[Lu]===void 0?(_u[Lu]=Nu,$u.push(this.vertices[Nu]),Bu[Nu]=$u.length-1):Bu[Nu]=Bu[_u[Lu]];var ju=[];for(Nu=0,Vu=this.faces.length;Nu<Vu;Nu++){Uu=this.faces[Nu],Uu.a=Bu[Uu.a],Uu.b=Bu[Uu.b],Uu.c=Bu[Uu.c],Gu=[Uu.a,Uu.b,Uu.c];for(var Qu=0;Qu<3;Qu++)if(Gu[Qu]===Gu[(Qu+1)%3]){ju.push(Nu);break}}for(Nu=ju.length-1;Nu>=0;Nu--){var Xu=ju[Nu];for(this.faces.splice(Xu,1),zu=0,Hu=this.faceVertexUvs.length;zu<Hu;zu++)this.faceVertexUvs[zu].splice(Xu,1)}var Ku=this.vertices.length-$u.length;return this.vertices=$u,Ku},setFromPoints:function(_u){this.vertices=[];for(var $u=0,Bu=_u.length;$u<Bu;$u++){var Ru=_u[$u];this.vertices.push(new Vector3(Ru.x,Ru.y,Ru.z||0))}return this},sortFacesByMaterialIndex:function(){for(var _u=this.faces,$u=_u.length,Bu=0;Bu<$u;Bu++)_u[Bu]._id=Bu;function Ru(Uu,Gu){return Uu.materialIndex-Gu.materialIndex}_u.sort(Ru);var Lu=this.faceVertexUvs[0],Ou=this.faceVertexUvs[1],Fu,Nu;Lu&&Lu.length===$u&&(Fu=[]),Ou&&Ou.length===$u&&(Nu=[]);for(var Bu=0;Bu<$u;Bu++){var Vu=_u[Bu]._id;Fu&&Fu.push(Lu[Vu]),Nu&&Nu.push(Ou[Vu])}Fu&&(this.faceVertexUvs[0]=Fu),Nu&&(this.faceVertexUvs[1]=Nu)},toJSON:function(){var _u={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),this.parameters!==void 0){var $u=this.parameters;for(var Bu in $u)$u[Bu]!==void 0&&(_u[Bu]=$u[Bu]);return _u}for(var Ru=[],Lu=0;Lu<this.vertices.length;Lu++){var Ou=this.vertices[Lu];Ru.push(Ou.x,Ou.y,Ou.z)}for(var Fu=[],Nu=[],Vu={},Uu=[],Gu={},zu=[],Hu={},Lu=0;Lu<this.faces.length;Lu++){var ju=this.faces[Lu],Qu=!0,Xu=!1,Ku=this.faceVertexUvs[0][Lu]!==void 0,Wu=ju.normal.length()>0,qu=ju.vertexNormals.length>0,Yu=ju.color.r!==1||ju.color.g!==1||ju.color.b!==1,Zu=ju.vertexColors.length>0,_h=0;if(_h=sp(_h,0,0),_h=sp(_h,1,Qu),_h=sp(_h,2,Xu),_h=sp(_h,3,Ku),_h=sp(_h,4,Wu),_h=sp(_h,5,qu),_h=sp(_h,6,Yu),_h=sp(_h,7,Zu),Fu.push(_h),Fu.push(ju.a,ju.b,ju.c),Fu.push(ju.materialIndex),Ku){var ep=this.faceVertexUvs[0][Lu];Fu.push(np(ep[0]),np(ep[1]),np(ep[2]))}if(Wu&&Fu.push(Ju(ju.normal)),qu){var ip=ju.vertexNormals;Fu.push(Ju(ip[0]),Ju(ip[1]),Ju(ip[2]))}if(Yu&&Fu.push(_f(ju.color)),Zu){var ap=ju.vertexColors;Fu.push(_f(ap[0]),_f(ap[1]),_f(ap[2]))}}function sp(tp,rp,op){return op?tp|1<<rp:tp&~(1<<rp)}function Ju(tp){var rp=tp.x.toString()+tp.y.toString()+tp.z.toString();return Vu[rp]!==void 0||(Vu[rp]=Nu.length/3,Nu.push(tp.x,tp.y,tp.z)),Vu[rp]}function _f(tp){var rp=tp.r.toString()+tp.g.toString()+tp.b.toString();return Gu[rp]!==void 0||(Gu[rp]=Uu.length,Uu.push(tp.getHex())),Gu[rp]}function np(tp){var rp=tp.x.toString()+tp.y.toString();return Hu[rp]!==void 0||(Hu[rp]=zu.length/2,zu.push(tp.x,tp.y)),Hu[rp]}return _u.data={},_u.data.vertices=Ru,_u.data.normals=Nu,Uu.length>0&&(_u.data.colors=Uu),zu.length>0&&(_u.data.uvs=[zu]),_u.data.faces=Fu,_u},clone:function(){return new Geometry().copy(this)},copy:function(_u){var $u,Bu,Ru,Lu,Ou,Fu;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Nu=_u.vertices;for($u=0,Bu=Nu.length;$u<Bu;$u++)this.vertices.push(Nu[$u].clone());var Vu=_u.colors;for($u=0,Bu=Vu.length;$u<Bu;$u++)this.colors.push(Vu[$u].clone());var Uu=_u.faces;for($u=0,Bu=Uu.length;$u<Bu;$u++)this.faces.push(Uu[$u].clone());for($u=0,Bu=_u.faceVertexUvs.length;$u<Bu;$u++){var Gu=_u.faceVertexUvs[$u];for(this.faceVertexUvs[$u]===void 0&&(this.faceVertexUvs[$u]=[]),Ru=0,Lu=Gu.length;Ru<Lu;Ru++){var zu=Gu[Ru],Hu=[];for(Ou=0,Fu=zu.length;Ou<Fu;Ou++){var ju=zu[Ou];Hu.push(ju.clone())}this.faceVertexUvs[$u].push(Hu)}}var Qu=_u.morphTargets;for($u=0,Bu=Qu.length;$u<Bu;$u++){var Xu={};if(Xu.name=Qu[$u].name,Qu[$u].vertices!==void 0)for(Xu.vertices=[],Ru=0,Lu=Qu[$u].vertices.length;Ru<Lu;Ru++)Xu.vertices.push(Qu[$u].vertices[Ru].clone());if(Qu[$u].normals!==void 0)for(Xu.normals=[],Ru=0,Lu=Qu[$u].normals.length;Ru<Lu;Ru++)Xu.normals.push(Qu[$u].normals[Ru].clone());this.morphTargets.push(Xu)}var Ku=_u.morphNormals;for($u=0,Bu=Ku.length;$u<Bu;$u++){var Wu={};if(Ku[$u].vertexNormals!==void 0)for(Wu.vertexNormals=[],Ru=0,Lu=Ku[$u].vertexNormals.length;Ru<Lu;Ru++){var qu=Ku[$u].vertexNormals[Ru],Yu={};Yu.a=qu.a.clone(),Yu.b=qu.b.clone(),Yu.c=qu.c.clone(),Wu.vertexNormals.push(Yu)}if(Ku[$u].faceNormals!==void 0)for(Wu.faceNormals=[],Ru=0,Lu=Ku[$u].faceNormals.length;Ru<Lu;Ru++)Wu.faceNormals.push(Ku[$u].faceNormals[Ru].clone());this.morphNormals.push(Wu)}var Zu=_u.skinWeights;for($u=0,Bu=Zu.length;$u<Bu;$u++)this.skinWeights.push(Zu[$u].clone());var _h=_u.skinIndices;for($u=0,Bu=_h.length;$u<Bu;$u++)this.skinIndices.push(_h[$u].clone());var ep=_u.lineDistances;for($u=0,Bu=ep.length;$u<Bu;$u++)this.lineDistances.push(ep[$u]);var ip=_u.boundingBox;ip!==null&&(this.boundingBox=ip.clone());var ap=_u.boundingSphere;return ap!==null&&(this.boundingSphere=ap.clone()),this.elementsNeedUpdate=_u.elementsNeedUpdate,this.verticesNeedUpdate=_u.verticesNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.lineDistancesNeedUpdate=_u.lineDistancesNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor($u,Bu,Ru,Lu,Ou,Fu){super(),this.type="BoxGeometry",this.parameters={width:$u,height:Bu,depth:Ru,widthSegments:Lu,heightSegments:Ou,depthSegments:Fu},this.fromBufferGeometry(new BoxBufferGeometry($u,Bu,Ru,Lu,Ou,Fu)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor($u,Bu,Ru,Lu,Ou,Fu){super(),this.type="BoxBufferGeometry",this.parameters={width:$u,height:Bu,depth:Ru,widthSegments:Lu,heightSegments:Ou,depthSegments:Fu};const Nu=this;$u=$u||1,Bu=Bu||1,Ru=Ru||1,Lu=Math.floor(Lu)||1,Ou=Math.floor(Ou)||1,Fu=Math.floor(Fu)||1;const Vu=[],Uu=[],Gu=[],zu=[];let Hu=0,ju=0;Qu("z","y","x",-1,-1,Ru,Bu,$u,Fu,Ou,0),Qu("z","y","x",1,-1,Ru,Bu,-$u,Fu,Ou,1),Qu("x","z","y",1,1,$u,Ru,Bu,Lu,Fu,2),Qu("x","z","y",1,-1,$u,Ru,-Bu,Lu,Fu,3),Qu("x","y","z",1,-1,$u,Bu,Ru,Lu,Ou,4),Qu("x","y","z",-1,-1,$u,Bu,-Ru,Lu,Ou,5),this.setIndex(Vu),this.setAttribute("position",new Float32BufferAttribute(Uu,3)),this.setAttribute("normal",new Float32BufferAttribute(Gu,3)),this.setAttribute("uv",new Float32BufferAttribute(zu,2));function Qu(Xu,Ku,Wu,qu,Yu,Zu,_h,ep,ip,ap,sp){const Ju=Zu/ip,_f=_h/ap,np=Zu/2,tp=_h/2,rp=ep/2,op=ip+1,lp=ap+1;let up=0,cp=0;const Ap=new Vector3;for(let yp=0;yp<lp;yp++){const Ip=yp*_f-tp;for(let Ep=0;Ep<op;Ep++){const Vp=Ep*Ju-np;Ap[Xu]=Vp*qu,Ap[Ku]=Ip*Yu,Ap[Wu]=rp,Uu.push(Ap.x,Ap.y,Ap.z),Ap[Xu]=0,Ap[Ku]=0,Ap[Wu]=ep>0?1:-1,Gu.push(Ap.x,Ap.y,Ap.z),zu.push(Ep/ip),zu.push(1-yp/ap),up+=1}}for(let yp=0;yp<ap;yp++)for(let Ip=0;Ip<ip;Ip++){const Ep=Hu+Ip+op*yp,Vp=Hu+Ip+op*(yp+1),$p=Hu+(Ip+1)+op*(yp+1),kp=Hu+(Ip+1)+op*yp;Vu.push(Ep,Vp,kp),Vu.push(Vp,$p,kp),cp+=6}Nu.addGroup(ju,cp,sp),ju+=cp,Hu+=up}}}function cloneUniforms(_u){var $u={};for(var Bu in _u){$u[Bu]={};for(var Ru in _u[Bu]){var Lu=_u[Bu][Ru];Lu&&(Lu.isColor||Lu.isMatrix3||Lu.isMatrix4||Lu.isVector2||Lu.isVector3||Lu.isVector4||Lu.isTexture)?$u[Bu][Ru]=Lu.clone():Array.isArray(Lu)?$u[Bu][Ru]=Lu.slice():$u[Bu][Ru]=Lu}}return $u}function mergeUniforms(_u){for(var $u={},Bu=0;Bu<_u.length;Bu++){var Ru=cloneUniforms(_u[Bu]);for(var Lu in Ru)$u[Lu]=Ru[Lu]}return $u}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(_u){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,_u!==void 0&&(_u.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(_u))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.fragmentShader=_u.fragmentShader,this.vertexShader=_u.vertexShader,this.uniforms=cloneUniforms(_u.uniforms),this.defines=Object.assign({},_u.defines),this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.lights=_u.lights,this.clipping=_u.clipping,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.extensions=Object.assign({},_u.extensions),this};ShaderMaterial.prototype.toJSON=function(_u){var $u=Material.prototype.toJSON.call(this,_u);$u.uniforms={};for(var Bu in this.uniforms){var Ru=this.uniforms[Bu],Lu=Ru.value;Lu&&Lu.isTexture?$u.uniforms[Bu]={type:"t",value:Lu.toJSON(_u).uuid}:Lu&&Lu.isColor?$u.uniforms[Bu]={type:"c",value:Lu.getHex()}:Lu&&Lu.isVector2?$u.uniforms[Bu]={type:"v2",value:Lu.toArray()}:Lu&&Lu.isVector3?$u.uniforms[Bu]={type:"v3",value:Lu.toArray()}:Lu&&Lu.isVector4?$u.uniforms[Bu]={type:"v4",value:Lu.toArray()}:Lu&&Lu.isMatrix3?$u.uniforms[Bu]={type:"m3",value:Lu.toArray()}:Lu&&Lu.isMatrix4?$u.uniforms[Bu]={type:"m4",value:Lu.toArray()}:$u.uniforms[Bu]={value:Lu}}Object.keys(this.defines).length>0&&($u.defines=this.defines),$u.vertexShader=this.vertexShader,$u.fragmentShader=this.fragmentShader;var Ou={};for(var Fu in this.extensions)this.extensions[Fu]===!0&&(Ou[Fu]=!0);return Object.keys(Ou).length>0&&($u.extensions=Ou),$u};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),this.matrixWorldInverse.copy(_u.matrixWorldInverse),this.projectionMatrix.copy(_u.projectionMatrix),this.projectionMatrixInverse.copy(_u.projectionMatrixInverse),this},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set(-$u[8],-$u[9],-$u[10]).normalize()},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(_u,$u){Object3D.prototype.updateWorldMatrix.call(this,_u,$u),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(_u,$u,Bu,Ru){Camera.call(this),this.type="PerspectiveCamera",this.fov=_u!==void 0?_u:50,this.zoom=1,this.near=Bu!==void 0?Bu:.1,this.far=Ru!==void 0?Ru:2e3,this.focus=10,this.aspect=$u!==void 0?$u:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.fov=_u.fov,this.zoom=_u.zoom,this.near=_u.near,this.far=_u.far,this.focus=_u.focus,this.aspect=_u.aspect,this.view=_u.view===null?null:Object.assign({},_u.view),this.filmGauge=_u.filmGauge,this.filmOffset=_u.filmOffset,this},setFocalLength:function(_u){var $u=.5*this.getFilmHeight()/_u;this.fov=MathUtils.RAD2DEG*2*Math.atan($u),this.updateProjectionMatrix()},getFocalLength:function(){var _u=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_u},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(_u,$u,Bu,Ru,Lu,Ou){this.aspect=_u/$u,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Bu,this.view.offsetY=Ru,this.view.width=Lu,this.view.height=Ou,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=this.near,$u=_u*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,Bu=2*$u,Ru=this.aspect*Bu,Lu=-.5*Ru,Ou=this.view;if(this.view!==null&&this.view.enabled){var Fu=Ou.fullWidth,Nu=Ou.fullHeight;Lu+=Ou.offsetX*Ru/Fu,$u-=Ou.offsetY*Bu/Nu,Ru*=Ou.width/Fu,Bu*=Ou.height/Nu}var Vu=this.filmOffset;Vu!==0&&(Lu+=_u*Vu/this.getFilmWidth()),this.projectionMatrix.makePerspective(Lu,Lu+Ru,$u,$u-Bu,_u,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.fov=this.fov,$u.object.zoom=this.zoom,$u.object.near=this.near,$u.object.far=this.far,$u.object.focus=this.focus,$u.object.aspect=this.aspect,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u.object.filmGauge=this.filmGauge,$u.object.filmOffset=this.filmOffset,$u}});var fov=90,aspect=1;function CubeCamera(_u,$u,Bu){if(Object3D.call(this),this.type="CubeCamera",Bu.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=Bu;var Ru=new PerspectiveCamera(fov,aspect,_u,$u);Ru.layers=this.layers,Ru.up.set(0,-1,0),Ru.lookAt(new Vector3(1,0,0)),this.add(Ru);var Lu=new PerspectiveCamera(fov,aspect,_u,$u);Lu.layers=this.layers,Lu.up.set(0,-1,0),Lu.lookAt(new Vector3(-1,0,0)),this.add(Lu);var Ou=new PerspectiveCamera(fov,aspect,_u,$u);Ou.layers=this.layers,Ou.up.set(0,0,1),Ou.lookAt(new Vector3(0,1,0)),this.add(Ou);var Fu=new PerspectiveCamera(fov,aspect,_u,$u);Fu.layers=this.layers,Fu.up.set(0,0,-1),Fu.lookAt(new Vector3(0,-1,0)),this.add(Fu);var Nu=new PerspectiveCamera(fov,aspect,_u,$u);Nu.layers=this.layers,Nu.up.set(0,-1,0),Nu.lookAt(new Vector3(0,0,1)),this.add(Nu);var Vu=new PerspectiveCamera(fov,aspect,_u,$u);Vu.layers=this.layers,Vu.up.set(0,-1,0),Vu.lookAt(new Vector3(0,0,-1)),this.add(Vu),this.update=function(Uu,Gu){this.parent===null&&this.updateMatrixWorld();var zu=Uu.xr.enabled,Hu=Uu.getRenderTarget();Uu.xr.enabled=!1;var ju=Bu.texture.generateMipmaps;Bu.texture.generateMipmaps=!1,Uu.setRenderTarget(Bu,0),Uu.render(Gu,Ru),Uu.setRenderTarget(Bu,1),Uu.render(Gu,Lu),Uu.setRenderTarget(Bu,2),Uu.render(Gu,Ou),Uu.setRenderTarget(Bu,3),Uu.render(Gu,Fu),Uu.setRenderTarget(Bu,4),Uu.render(Gu,Nu),Bu.texture.generateMipmaps=ju,Uu.setRenderTarget(Bu,5),Uu.render(Gu,Vu),Uu.setRenderTarget(Hu),Uu.xr.enabled=zu},this.clear=function(Uu,Gu,zu,Hu){for(var ju=Uu.getRenderTarget(),Qu=0;Qu<6;Qu++)Uu.setRenderTarget(Bu,Qu),Uu.clear(Gu,zu,Hu);Uu.setRenderTarget(ju)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(_u,$u,Bu){Number.isInteger($u)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),$u=Bu),WebGLRenderTarget.call(this,_u,_u,$u)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(_u,$u){this.texture.type=$u.type,this.texture.format=$u.format,this.texture.encoding=$u.encoding;var Bu=new Scene,Ru={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Lu=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Ru.uniforms),vertexShader:Ru.vertexShader,fragmentShader:Ru.fragmentShader,side:BackSide,blending:NoBlending});Lu.uniforms.tEquirect.value=$u;var Ou=new Mesh(new BoxBufferGeometry(5,5,5),Lu);Bu.add(Ou);var Fu=new CubeCamera(1,10,this);return Fu.update(_u,Bu),Ou.geometry.dispose(),Ou.material.dispose(),this};function DataTexture(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu){Texture.call(this,null,Ou,Fu,Nu,Vu,Uu,Ru,Lu,Gu,zu),this.image={data:_u||null,width:$u||1,height:Bu||1},this.magFilter=Vu!==void 0?Vu:NearestFilter,this.minFilter=Uu!==void 0?Uu:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(_u,$u,Bu,Ru,Lu,Ou){this.planes=[_u!==void 0?_u:new Plane,$u!==void 0?$u:new Plane,Bu!==void 0?Bu:new Plane,Ru!==void 0?Ru:new Plane,Lu!==void 0?Lu:new Plane,Ou!==void 0?Ou:new Plane]}Object.assign(Frustum.prototype,{set:function(_u,$u,Bu,Ru,Lu,Ou){var Fu=this.planes;return Fu[0].copy(_u),Fu[1].copy($u),Fu[2].copy(Bu),Fu[3].copy(Ru),Fu[4].copy(Lu),Fu[5].copy(Ou),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){for(var $u=this.planes,Bu=0;Bu<6;Bu++)$u[Bu].copy(_u.planes[Bu]);return this},setFromProjectionMatrix:function(_u){var $u=this.planes,Bu=_u.elements,Ru=Bu[0],Lu=Bu[1],Ou=Bu[2],Fu=Bu[3],Nu=Bu[4],Vu=Bu[5],Uu=Bu[6],Gu=Bu[7],zu=Bu[8],Hu=Bu[9],ju=Bu[10],Qu=Bu[11],Xu=Bu[12],Ku=Bu[13],Wu=Bu[14],qu=Bu[15];return $u[0].setComponents(Fu-Ru,Gu-Nu,Qu-zu,qu-Xu).normalize(),$u[1].setComponents(Fu+Ru,Gu+Nu,Qu+zu,qu+Xu).normalize(),$u[2].setComponents(Fu+Lu,Gu+Vu,Qu+Hu,qu+Ku).normalize(),$u[3].setComponents(Fu-Lu,Gu-Vu,Qu-Hu,qu-Ku).normalize(),$u[4].setComponents(Fu-Ou,Gu-Uu,Qu-ju,qu-Wu).normalize(),$u[5].setComponents(Fu+Ou,Gu+Uu,Qu+ju,qu+Wu).normalize(),this},intersectsObject:function(_u){var $u=_u.geometry;return $u.boundingSphere===null&&$u.computeBoundingSphere(),_sphere$1.copy($u.boundingSphere).applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(_u){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(_u){for(var $u=this.planes,Bu=_u.center,Ru=-_u.radius,Lu=0;Lu<6;Lu++){var Ou=$u[Lu].distanceToPoint(Bu);if(Ou<Ru)return!1}return!0},intersectsBox:function(_u){for(var $u=this.planes,Bu=0;Bu<6;Bu++){var Ru=$u[Bu];if(_vector$5.x=Ru.normal.x>0?_u.max.x:_u.min.x,_vector$5.y=Ru.normal.y>0?_u.max.y:_u.min.y,_vector$5.z=Ru.normal.z>0?_u.max.z:_u.min.z,Ru.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(_u){for(var $u=this.planes,Bu=0;Bu<6;Bu++)if($u[Bu].distanceToPoint(_u)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var _u=null,$u=!1,Bu=null;function Ru(Lu,Ou){$u!==!1&&(Bu(Lu,Ou),_u.requestAnimationFrame(Ru))}return{start:function(){$u!==!0&&Bu!==null&&(_u.requestAnimationFrame(Ru),$u=!0)},stop:function(){$u=!1},setAnimationLoop:function(Lu){Bu=Lu},setContext:function(Lu){_u=Lu}}}function WebGLAttributes(_u,$u){var Bu=$u.isWebGL2,Ru=new WeakMap;function Lu(Uu,Gu){var zu=Uu.array,Hu=Uu.usage,ju=_u.createBuffer();_u.bindBuffer(Gu,ju),_u.bufferData(Gu,zu,Hu),Uu.onUploadCallback();var Qu=5126;return zu instanceof Float32Array?Qu=5126:zu instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):zu instanceof Uint16Array?Qu=5123:zu instanceof Int16Array?Qu=5122:zu instanceof Uint32Array?Qu=5125:zu instanceof Int32Array?Qu=5124:zu instanceof Int8Array?Qu=5120:zu instanceof Uint8Array&&(Qu=5121),{buffer:ju,type:Qu,bytesPerElement:zu.BYTES_PER_ELEMENT,version:Uu.version}}function Ou(Uu,Gu,zu){var Hu=Gu.array,ju=Gu.updateRange;_u.bindBuffer(zu,Uu),ju.count===-1?_u.bufferSubData(zu,0,Hu):(Bu?_u.bufferSubData(zu,ju.offset*Hu.BYTES_PER_ELEMENT,Hu,ju.offset,ju.count):_u.bufferSubData(zu,ju.offset*Hu.BYTES_PER_ELEMENT,Hu.subarray(ju.offset,ju.offset+ju.count)),ju.count=-1)}function Fu(Uu){return Uu.isInterleavedBufferAttribute&&(Uu=Uu.data),Ru.get(Uu)}function Nu(Uu){Uu.isInterleavedBufferAttribute&&(Uu=Uu.data);var Gu=Ru.get(Uu);Gu&&(_u.deleteBuffer(Gu.buffer),Ru.delete(Uu))}function Vu(Uu,Gu){Uu.isInterleavedBufferAttribute&&(Uu=Uu.data);var zu=Ru.get(Uu);zu===void 0?Ru.set(Uu,Lu(Uu,Gu)):zu.version<Uu.version&&(Ou(zu.buffer,Uu,Gu),zu.version=Uu.version)}return{get:Fu,remove:Nu,update:Vu}}function PlaneGeometry(_u,$u,Bu,Ru){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:_u,height:$u,widthSegments:Bu,heightSegments:Ru},this.fromBufferGeometry(new PlaneBufferGeometry(_u,$u,Bu,Ru)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(_u,$u,Bu,Ru){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:_u,height:$u,widthSegments:Bu,heightSegments:Ru},_u=_u||1,$u=$u||1;var Lu=_u/2,Ou=$u/2,Fu=Math.floor(Bu)||1,Nu=Math.floor(Ru)||1,Vu=Fu+1,Uu=Nu+1,Gu=_u/Fu,zu=$u/Nu,Hu,ju,Qu=[],Xu=[],Ku=[],Wu=[];for(ju=0;ju<Uu;ju++){var qu=ju*zu-Ou;for(Hu=0;Hu<Vu;Hu++){var Yu=Hu*Gu-Lu;Xu.push(Yu,-qu,0),Ku.push(0,0,1),Wu.push(Hu/Fu),Wu.push(1-ju/Nu)}}for(ju=0;ju<Nu;ju++)for(Hu=0;Hu<Fu;Hu++){var Zu=Hu+Vu*ju,_h=Hu+Vu*(ju+1),ep=Hu+1+Vu*(ju+1),ip=Hu+1+Vu*ju;Qu.push(Zu,_h,ip),Qu.push(_h,ep,ip)}this.setIndex(Qu),this.setAttribute("position",new Float32BufferAttribute(Xu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ku,3)),this.setAttribute("uv",new Float32BufferAttribute(Wu,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(_u,$u,Bu,Ru){var Lu=new Color(0),Ou=0,Fu,Nu,Vu=null,Uu=0,Gu=null;function zu(ju,Qu,Xu,Ku){var Wu=Qu.background,qu=_u.xr,Yu=qu.getSession&&qu.getSession();if(Yu&&Yu.environmentBlendMode==="additive"&&(Wu=null),Wu===null?Hu(Lu,Ou):Wu&&Wu.isColor&&(Hu(Wu,1),Ku=!0),(_u.autoClear||Ku)&&_u.clear(_u.autoClearColor,_u.autoClearDepth,_u.autoClearStencil),Wu&&(Wu.isCubeTexture||Wu.isWebGLCubeRenderTarget||Wu.mapping===CubeUVReflectionMapping)){Nu===void 0&&(Nu=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Nu.geometry.deleteAttribute("normal"),Nu.geometry.deleteAttribute("uv"),Nu.onBeforeRender=function(_h,ep,ip){this.matrixWorld.copyPosition(ip.matrixWorld)},Object.defineProperty(Nu.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Bu.update(Nu));var Zu=Wu.isWebGLCubeRenderTarget?Wu.texture:Wu;Nu.material.uniforms.envMap.value=Zu,Nu.material.uniforms.flipEnvMap.value=Zu.isCubeTexture?-1:1,(Vu!==Wu||Uu!==Zu.version||Gu!==_u.toneMapping)&&(Nu.material.needsUpdate=!0,Vu=Wu,Uu=Zu.version,Gu=_u.toneMapping),ju.unshift(Nu,Nu.geometry,Nu.material,0,0,null)}else Wu&&Wu.isTexture&&(Fu===void 0&&(Fu=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Fu.geometry.deleteAttribute("normal"),Object.defineProperty(Fu.material,"map",{get:function(){return this.uniforms.t2D.value}}),Bu.update(Fu)),Fu.material.uniforms.t2D.value=Wu,Wu.matrixAutoUpdate===!0&&Wu.updateMatrix(),Fu.material.uniforms.uvTransform.value.copy(Wu.matrix),(Vu!==Wu||Uu!==Wu.version||Gu!==_u.toneMapping)&&(Fu.material.needsUpdate=!0,Vu=Wu,Uu=Wu.version,Gu=_u.toneMapping),ju.unshift(Fu,Fu.geometry,Fu.material,0,0,null))}function Hu(ju,Qu){$u.buffers.color.setClear(ju.r,ju.g,ju.b,Qu,Ru)}return{getClearColor:function(){return Lu},setClearColor:function(ju,Qu){Lu.set(ju),Ou=Qu!==void 0?Qu:1,Hu(Lu,Ou)},getClearAlpha:function(){return Ou},setClearAlpha:function(ju){Ou=ju,Hu(Lu,Ou)},render:zu}}function WebGLBufferRenderer(_u,$u,Bu,Ru){var Lu=Ru.isWebGL2,Ou;function Fu(Uu){Ou=Uu}function Nu(Uu,Gu){_u.drawArrays(Ou,Uu,Gu),Bu.update(Gu,Ou)}function Vu(Uu,Gu,zu,Hu){if(Hu!==0){var ju,Qu;if(Lu)ju=_u,Qu="drawArraysInstanced";else if(ju=$u.get("ANGLE_instanced_arrays"),Qu="drawArraysInstancedANGLE",ju===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ju[Qu](Ou,Gu,zu,Hu),Bu.update(zu,Ou,Hu)}}this.setMode=Fu,this.render=Nu,this.renderInstances=Vu}function WebGLCapabilities(_u,$u,Bu){var Ru;function Lu(){if(Ru!==void 0)return Ru;var ep=$u.get("EXT_texture_filter_anisotropic");return ep!==null?Ru=_u.getParameter(ep.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Ru=0,Ru}function Ou(ep){if(ep==="highp"){if(_u.getShaderPrecisionFormat(35633,36338).precision>0&&_u.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ep="mediump"}return ep==="mediump"&&_u.getShaderPrecisionFormat(35633,36337).precision>0&&_u.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Fu=typeof WebGL2RenderingContext!="undefined"&&_u instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&_u instanceof WebGL2ComputeRenderingContext,Nu=Bu.precision!==void 0?Bu.precision:"highp",Vu=Ou(Nu);Vu!==Nu&&(console.warn("THREE.WebGLRenderer:",Nu,"not supported, using",Vu,"instead."),Nu=Vu);var Uu=Bu.logarithmicDepthBuffer===!0,Gu=_u.getParameter(34930),zu=_u.getParameter(35660),Hu=_u.getParameter(3379),ju=_u.getParameter(34076),Qu=_u.getParameter(34921),Xu=_u.getParameter(36347),Ku=_u.getParameter(36348),Wu=_u.getParameter(36349),qu=zu>0,Yu=Fu||!!$u.get("OES_texture_float"),Zu=qu&&Yu,_h=Fu?_u.getParameter(36183):0;return{isWebGL2:Fu,getMaxAnisotropy:Lu,getMaxPrecision:Ou,precision:Nu,logarithmicDepthBuffer:Uu,maxTextures:Gu,maxVertexTextures:zu,maxTextureSize:Hu,maxCubemapSize:ju,maxAttributes:Qu,maxVertexUniforms:Xu,maxVaryings:Ku,maxFragmentUniforms:Wu,vertexTextures:qu,floatFragmentTextures:Yu,floatVertexTextures:Zu,maxSamples:_h}}function WebGLClipping(){var _u=this,$u=null,Bu=0,Ru=!1,Lu=!1,Ou=new Plane,Fu=new Matrix3,Nu={value:null,needsUpdate:!1};this.uniform=Nu,this.numPlanes=0,this.numIntersection=0,this.init=function(Gu,zu,Hu){var ju=Gu.length!==0||zu||Bu!==0||Ru;return Ru=zu,$u=Uu(Gu,Hu,0),Bu=Gu.length,ju},this.beginShadows=function(){Lu=!0,Uu(null)},this.endShadows=function(){Lu=!1,Vu()},this.setState=function(Gu,zu,Hu,ju,Qu,Xu){if(!Ru||Gu===null||Gu.length===0||Lu&&!Hu)Lu?Uu(null):Vu();else{var Ku=Lu?0:Bu,Wu=Ku*4,qu=Qu.clippingState||null;Nu.value=qu,qu=Uu(Gu,ju,Wu,Xu);for(var Yu=0;Yu!==Wu;++Yu)qu[Yu]=$u[Yu];Qu.clippingState=qu,this.numIntersection=zu?this.numPlanes:0,this.numPlanes+=Ku}};function Vu(){Nu.value!==$u&&(Nu.value=$u,Nu.needsUpdate=Bu>0),_u.numPlanes=Bu,_u.numIntersection=0}function Uu(Gu,zu,Hu,ju){var Qu=Gu!==null?Gu.length:0,Xu=null;if(Qu!==0){if(Xu=Nu.value,ju!==!0||Xu===null){var Ku=Hu+Qu*4,Wu=zu.matrixWorldInverse;Fu.getNormalMatrix(Wu),(Xu===null||Xu.length<Ku)&&(Xu=new Float32Array(Ku));for(var qu=0,Yu=Hu;qu!==Qu;++qu,Yu+=4)Ou.copy(Gu[qu]).applyMatrix4(Wu,Fu),Ou.normal.toArray(Xu,Yu),Xu[Yu+3]=Ou.constant}Nu.value=Xu,Nu.needsUpdate=!0}return _u.numPlanes=Qu,_u.numIntersection=0,Xu}}function WebGLExtensions(_u){var $u={};return{get:function(Bu){if($u[Bu]!==void 0)return $u[Bu];var Ru;switch(Bu){case"WEBGL_depth_texture":Ru=_u.getExtension("WEBGL_depth_texture")||_u.getExtension("MOZ_WEBGL_depth_texture")||_u.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Ru=_u.getExtension("EXT_texture_filter_anisotropic")||_u.getExtension("MOZ_EXT_texture_filter_anisotropic")||_u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Ru=_u.getExtension("WEBGL_compressed_texture_s3tc")||_u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Ru=_u.getExtension("WEBGL_compressed_texture_pvrtc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Ru=_u.getExtension(Bu)}return Ru===null&&console.warn("THREE.WebGLRenderer: "+Bu+" extension not supported."),$u[Bu]=Ru,Ru}}}function WebGLGeometries(_u,$u,Bu){var Ru=new WeakMap,Lu=new WeakMap;function Ou(Gu){var zu=Gu.target,Hu=Ru.get(zu);Hu.index!==null&&$u.remove(Hu.index);for(var ju in Hu.attributes)$u.remove(Hu.attributes[ju]);zu.removeEventListener("dispose",Ou),Ru.delete(zu);var Qu=Lu.get(Hu);Qu&&($u.remove(Qu),Lu.delete(Hu)),Bu.memory.geometries--}function Fu(Gu,zu){var Hu=Ru.get(zu);return Hu||(zu.addEventListener("dispose",Ou),zu.isBufferGeometry?Hu=zu:zu.isGeometry&&(zu._bufferGeometry===void 0&&(zu._bufferGeometry=new BufferGeometry().setFromObject(Gu)),Hu=zu._bufferGeometry),Ru.set(zu,Hu),Bu.memory.geometries++,Hu)}function Nu(Gu){var zu=Gu.index,Hu=Gu.attributes;zu!==null&&$u.update(zu,34963);for(var ju in Hu)$u.update(Hu[ju],34962);var Qu=Gu.morphAttributes;for(var ju in Qu)for(var Xu=Qu[ju],Ku=0,Wu=Xu.length;Ku<Wu;Ku++)$u.update(Xu[Ku],34962)}function Vu(Gu){var zu=[],Hu=Gu.index,ju=Gu.attributes.position,Qu=0;if(Hu!==null){var Xu=Hu.array;Qu=Hu.version;for(var Ku=0,Wu=Xu.length;Ku<Wu;Ku+=3){var qu=Xu[Ku+0],Yu=Xu[Ku+1],Zu=Xu[Ku+2];zu.push(qu,Yu,Yu,Zu,Zu,qu)}}else{var Xu=ju.array;Qu=ju.version;for(var Ku=0,Wu=Xu.length/3-1;Ku<Wu;Ku+=3){var qu=Ku+0,Yu=Ku+1,Zu=Ku+2;zu.push(qu,Yu,Yu,Zu,Zu,qu)}}var _h=new(arrayMax(zu)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(zu,1);_h.version=Qu,$u.update(_h,34963);var ep=Lu.get(Gu);ep&&$u.remove(ep),Lu.set(Gu,_h)}function Uu(Gu){var zu=Lu.get(Gu);if(zu){var Hu=Gu.index;Hu!==null&&zu.version<Hu.version&&Vu(Gu)}else Vu(Gu);return Lu.get(Gu)}return{get:Fu,update:Nu,getWireframeAttribute:Uu}}function WebGLIndexedBufferRenderer(_u,$u,Bu,Ru){var Lu=Ru.isWebGL2,Ou;function Fu(Hu){Ou=Hu}var Nu,Vu;function Uu(Hu){Nu=Hu.type,Vu=Hu.bytesPerElement}function Gu(Hu,ju){_u.drawElements(Ou,ju,Nu,Hu*Vu),Bu.update(ju,Ou)}function zu(Hu,ju,Qu,Xu){if(Xu!==0){var Ku,Wu;if(Lu)Ku=_u,Wu="drawElementsInstanced";else if(Ku=$u.get("ANGLE_instanced_arrays"),Wu="drawElementsInstancedANGLE",Ku===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ku[Wu](Ou,Qu,Nu,ju*Vu,Xu),Bu.update(Qu,Ou,Xu)}}this.setMode=Fu,this.setIndex=Uu,this.render=Gu,this.renderInstances=zu}function WebGLInfo(_u){var $u={geometries:0,textures:0},Bu={frame:0,calls:0,triangles:0,points:0,lines:0};function Ru(Ou,Fu,Nu){switch(Nu=Nu||1,Bu.calls++,Fu){case 4:Bu.triangles+=Nu*(Ou/3);break;case 1:Bu.lines+=Nu*(Ou/2);break;case 3:Bu.lines+=Nu*(Ou-1);break;case 2:Bu.lines+=Nu*Ou;break;case 0:Bu.points+=Nu*Ou;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Fu);break}}function Lu(){Bu.frame++,Bu.calls=0,Bu.triangles=0,Bu.points=0,Bu.lines=0}return{memory:$u,render:Bu,programs:null,autoReset:!0,reset:Lu,update:Ru}}function absNumericalSort(_u,$u){return Math.abs($u[1])-Math.abs(_u[1])}function WebGLMorphtargets(_u){var $u={},Bu=new Float32Array(8);function Ru(Lu,Ou,Fu,Nu){var Vu=Lu.morphTargetInfluences,Uu=Vu===void 0?0:Vu.length,Gu=$u[Ou.id];if(Gu===void 0){Gu=[];for(var zu=0;zu<Uu;zu++)Gu[zu]=[zu,0];$u[Ou.id]=Gu}for(var Hu=Fu.morphTargets&&Ou.morphAttributes.position,ju=Fu.morphNormals&&Ou.morphAttributes.normal,zu=0;zu<Uu;zu++){var Qu=Gu[zu];Qu[1]!==0&&(Hu&&Ou.deleteAttribute("morphTarget"+zu),ju&&Ou.deleteAttribute("morphNormal"+zu))}for(var zu=0;zu<Uu;zu++){var Qu=Gu[zu];Qu[0]=zu,Qu[1]=Vu[zu]}Gu.sort(absNumericalSort);for(var Xu=0,zu=0;zu<8;zu++){var Qu=Gu[zu];if(Qu){var Ku=Qu[0],Wu=Qu[1];if(Wu){Hu&&Ou.setAttribute("morphTarget"+zu,Hu[Ku]),ju&&Ou.setAttribute("morphNormal"+zu,ju[Ku]),Bu[zu]=Wu,Xu+=Wu;continue}}Bu[zu]=0}var qu=Ou.morphTargetsRelative?1:1-Xu;Nu.getUniforms().setValue(_u,"morphTargetBaseInfluence",qu),Nu.getUniforms().setValue(_u,"morphTargetInfluences",Bu)}return{update:Ru}}function WebGLObjects(_u,$u,Bu,Ru){var Lu=new WeakMap;function Ou(Nu){var Vu=Ru.render.frame,Uu=Nu.geometry,Gu=$u.get(Nu,Uu);return Lu.get(Gu)!==Vu&&(Uu.isGeometry&&Gu.updateFromObject(Nu),$u.update(Gu),Lu.set(Gu,Vu)),Nu.isInstancedMesh&&Bu.update(Nu.instanceMatrix,34962),Gu}function Fu(){Lu=new WeakMap}return{update:Ou,dispose:Fu}}function CubeTexture(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu){_u=_u!==void 0?_u:[],$u=$u!==void 0?$u:CubeReflectionMapping,Fu=Fu!==void 0?Fu:RGBFormat,Texture.call(this,_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(_u){this.image=_u}});function DataTexture2DArray(_u,$u,Bu,Ru){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Bu||1,depth:Ru||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(_u,$u,Bu,Ru){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Bu||1,depth:Ru||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(_u,$u,Bu){var Ru=_u[0];if(Ru<=0||Ru>0)return _u;var Lu=$u*Bu,Ou=arrayCacheF32[Lu];if(Ou===void 0&&(Ou=new Float32Array(Lu),arrayCacheF32[Lu]=Ou),$u!==0){Ru.toArray(Ou,0);for(var Fu=1,Nu=0;Fu!==$u;++Fu)Nu+=Bu,_u[Fu].toArray(Ou,Nu)}return Ou}function arraysEqual(_u,$u){if(_u.length!==$u.length)return!1;for(var Bu=0,Ru=_u.length;Bu<Ru;Bu++)if(_u[Bu]!==$u[Bu])return!1;return!0}function copyArray(_u,$u){for(var Bu=0,Ru=$u.length;Bu<Ru;Bu++)_u[Bu]=$u[Bu]}function allocTexUnits(_u,$u){var Bu=arrayCacheI32[$u];Bu===void 0&&(Bu=new Int32Array($u),arrayCacheI32[$u]=Bu);for(var Ru=0;Ru!==$u;++Ru)Bu[Ru]=_u.allocateTextureUnit();return Bu}function setValueV1f(_u,$u){var Bu=this.cache;Bu[0]!==$u&&(_u.uniform1f(this.addr,$u),Bu[0]=$u)}function setValueV2f(_u,$u){var Bu=this.cache;if($u.x!==void 0)(Bu[0]!==$u.x||Bu[1]!==$u.y)&&(_u.uniform2f(this.addr,$u.x,$u.y),Bu[0]=$u.x,Bu[1]=$u.y);else{if(arraysEqual(Bu,$u))return;_u.uniform2fv(this.addr,$u),copyArray(Bu,$u)}}function setValueV3f(_u,$u){var Bu=this.cache;if($u.x!==void 0)(Bu[0]!==$u.x||Bu[1]!==$u.y||Bu[2]!==$u.z)&&(_u.uniform3f(this.addr,$u.x,$u.y,$u.z),Bu[0]=$u.x,Bu[1]=$u.y,Bu[2]=$u.z);else if($u.r!==void 0)(Bu[0]!==$u.r||Bu[1]!==$u.g||Bu[2]!==$u.b)&&(_u.uniform3f(this.addr,$u.r,$u.g,$u.b),Bu[0]=$u.r,Bu[1]=$u.g,Bu[2]=$u.b);else{if(arraysEqual(Bu,$u))return;_u.uniform3fv(this.addr,$u),copyArray(Bu,$u)}}function setValueV4f(_u,$u){var Bu=this.cache;if($u.x!==void 0)(Bu[0]!==$u.x||Bu[1]!==$u.y||Bu[2]!==$u.z||Bu[3]!==$u.w)&&(_u.uniform4f(this.addr,$u.x,$u.y,$u.z,$u.w),Bu[0]=$u.x,Bu[1]=$u.y,Bu[2]=$u.z,Bu[3]=$u.w);else{if(arraysEqual(Bu,$u))return;_u.uniform4fv(this.addr,$u),copyArray(Bu,$u)}}function setValueM2(_u,$u){var Bu=this.cache,Ru=$u.elements;if(Ru===void 0){if(arraysEqual(Bu,$u))return;_u.uniformMatrix2fv(this.addr,!1,$u),copyArray(Bu,$u)}else{if(arraysEqual(Bu,Ru))return;mat2array.set(Ru),_u.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(Bu,Ru)}}function setValueM3(_u,$u){var Bu=this.cache,Ru=$u.elements;if(Ru===void 0){if(arraysEqual(Bu,$u))return;_u.uniformMatrix3fv(this.addr,!1,$u),copyArray(Bu,$u)}else{if(arraysEqual(Bu,Ru))return;mat3array.set(Ru),_u.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(Bu,Ru)}}function setValueM4(_u,$u){var Bu=this.cache,Ru=$u.elements;if(Ru===void 0){if(arraysEqual(Bu,$u))return;_u.uniformMatrix4fv(this.addr,!1,$u),copyArray(Bu,$u)}else{if(arraysEqual(Bu,Ru))return;mat4array.set(Ru),_u.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(Bu,Ru)}}function setValueT1(_u,$u,Bu){var Ru=this.cache,Lu=Bu.allocateTextureUnit();Ru[0]!==Lu&&(_u.uniform1i(this.addr,Lu),Ru[0]=Lu),Bu.safeSetTexture2D($u||emptyTexture,Lu)}function setValueT2DArray1(_u,$u,Bu){var Ru=this.cache,Lu=Bu.allocateTextureUnit();Ru[0]!==Lu&&(_u.uniform1i(this.addr,Lu),Ru[0]=Lu),Bu.setTexture2DArray($u||emptyTexture2dArray,Lu)}function setValueT3D1(_u,$u,Bu){var Ru=this.cache,Lu=Bu.allocateTextureUnit();Ru[0]!==Lu&&(_u.uniform1i(this.addr,Lu),Ru[0]=Lu),Bu.setTexture3D($u||emptyTexture3d,Lu)}function setValueT6(_u,$u,Bu){var Ru=this.cache,Lu=Bu.allocateTextureUnit();Ru[0]!==Lu&&(_u.uniform1i(this.addr,Lu),Ru[0]=Lu),Bu.safeSetTextureCube($u||emptyCubeTexture,Lu)}function setValueV1i(_u,$u){var Bu=this.cache;Bu[0]!==$u&&(_u.uniform1i(this.addr,$u),Bu[0]=$u)}function setValueV2i(_u,$u){var Bu=this.cache;arraysEqual(Bu,$u)||(_u.uniform2iv(this.addr,$u),copyArray(Bu,$u))}function setValueV3i(_u,$u){var Bu=this.cache;arraysEqual(Bu,$u)||(_u.uniform3iv(this.addr,$u),copyArray(Bu,$u))}function setValueV4i(_u,$u){var Bu=this.cache;arraysEqual(Bu,$u)||(_u.uniform4iv(this.addr,$u),copyArray(Bu,$u))}function setValueV1ui(_u,$u){var Bu=this.cache;Bu[0]!==$u&&(_u.uniform1ui(this.addr,$u),Bu[0]=$u)}function getSingularSetter(_u){switch(_u){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_u,$u){_u.uniform1fv(this.addr,$u)}function setValueV1iArray(_u,$u){_u.uniform1iv(this.addr,$u)}function setValueV2iArray(_u,$u){_u.uniform2iv(this.addr,$u)}function setValueV3iArray(_u,$u){_u.uniform3iv(this.addr,$u)}function setValueV4iArray(_u,$u){_u.uniform4iv(this.addr,$u)}function setValueV2fArray(_u,$u){var Bu=flatten($u,this.size,2);_u.uniform2fv(this.addr,Bu)}function setValueV3fArray(_u,$u){var Bu=flatten($u,this.size,3);_u.uniform3fv(this.addr,Bu)}function setValueV4fArray(_u,$u){var Bu=flatten($u,this.size,4);_u.uniform4fv(this.addr,Bu)}function setValueM2Array(_u,$u){var Bu=flatten($u,this.size,4);_u.uniformMatrix2fv(this.addr,!1,Bu)}function setValueM3Array(_u,$u){var Bu=flatten($u,this.size,9);_u.uniformMatrix3fv(this.addr,!1,Bu)}function setValueM4Array(_u,$u){var Bu=flatten($u,this.size,16);_u.uniformMatrix4fv(this.addr,!1,Bu)}function setValueT1Array(_u,$u,Bu){var Ru=$u.length,Lu=allocTexUnits(Bu,Ru);_u.uniform1iv(this.addr,Lu);for(var Ou=0;Ou!==Ru;++Ou)Bu.safeSetTexture2D($u[Ou]||emptyTexture,Lu[Ou])}function setValueT6Array(_u,$u,Bu){var Ru=$u.length,Lu=allocTexUnits(Bu,Ru);_u.uniform1iv(this.addr,Lu);for(var Ou=0;Ou!==Ru;++Ou)Bu.safeSetTextureCube($u[Ou]||emptyCubeTexture,Lu[Ou])}function getPureArraySetter(_u){switch(_u){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(_u,$u,Bu){this.id=_u,this.addr=Bu,this.cache=[],this.setValue=getSingularSetter($u.type)}function PureArrayUniform(_u,$u,Bu){this.id=_u,this.addr=Bu,this.cache=[],this.size=$u.size,this.setValue=getPureArraySetter($u.type)}PureArrayUniform.prototype.updateCache=function(_u){var $u=this.cache;_u instanceof Float32Array&&$u.length!==_u.length&&(this.cache=new Float32Array(_u.length)),copyArray($u,_u)};function StructuredUniform(_u){this.id=_u,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(_u,$u,Bu){for(var Ru=this.seq,Lu=0,Ou=Ru.length;Lu!==Ou;++Lu){var Fu=Ru[Lu];Fu.setValue(_u,$u[Fu.id],Bu)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(_u,$u){_u.seq.push($u),_u.map[$u.id]=$u}function parseUniform(_u,$u,Bu){var Ru=_u.name,Lu=Ru.length;for(RePathPart.lastIndex=0;;){var Ou=RePathPart.exec(Ru),Fu=RePathPart.lastIndex,Nu=Ou[1],Vu=Ou[2]==="]",Uu=Ou[3];if(Vu&&(Nu=Nu|0),Uu===void 0||Uu==="["&&Fu+2===Lu){addUniform(Bu,Uu===void 0?new SingleUniform(Nu,_u,$u):new PureArrayUniform(Nu,_u,$u));break}else{var Gu=Bu.map,zu=Gu[Nu];zu===void 0&&(zu=new StructuredUniform(Nu),addUniform(Bu,zu)),Bu=zu}}}function WebGLUniforms(_u,$u){this.seq=[],this.map={};for(var Bu=_u.getProgramParameter($u,35718),Ru=0;Ru<Bu;++Ru){var Lu=_u.getActiveUniform($u,Ru),Ou=_u.getUniformLocation($u,Lu.name);parseUniform(Lu,Ou,this)}}WebGLUniforms.prototype.setValue=function(_u,$u,Bu,Ru){var Lu=this.map[$u];Lu!==void 0&&Lu.setValue(_u,Bu,Ru)};WebGLUniforms.prototype.setOptional=function(_u,$u,Bu){var Ru=$u[Bu];Ru!==void 0&&this.setValue(_u,Bu,Ru)};WebGLUniforms.upload=function(_u,$u,Bu,Ru){for(var Lu=0,Ou=$u.length;Lu!==Ou;++Lu){var Fu=$u[Lu],Nu=Bu[Fu.id];Nu.needsUpdate!==!1&&Fu.setValue(_u,Nu.value,Ru)}};WebGLUniforms.seqWithValue=function(_u,$u){for(var Bu=[],Ru=0,Lu=_u.length;Ru!==Lu;++Ru){var Ou=_u[Ru];Ou.id in $u&&Bu.push(Ou)}return Bu};function WebGLShader(_u,$u,Bu){var Ru=_u.createShader($u);return _u.shaderSource(Ru,Bu),_u.compileShader(Ru),Ru}var programIdCount=0;function addLineNumbers(_u){for(var $u=_u.split(`
`),Bu=0;Bu<$u.length;Bu++)$u[Bu]=Bu+1+": "+$u[Bu];return $u.join(`
`)}function getEncodingComponents(_u){switch(_u){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+_u)}}function getShaderErrors(_u,$u,Bu){var Ru=_u.getShaderParameter($u,35713),Lu=_u.getShaderInfoLog($u).trim();if(Ru&&Lu==="")return"";var Ou=_u.getShaderSource($u);return"THREE.WebGLShader: gl.getShaderInfoLog() "+Bu+`
`+Lu+addLineNumbers(Ou)}function getTexelDecodingFunction(_u,$u){var Bu=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return "+Bu[0]+"ToLinear"+Bu[1]+"; }"}function getTexelEncodingFunction(_u,$u){var Bu=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return LinearTo"+Bu[0]+Bu[1]+"; }"}function getToneMappingFunction(_u,$u){var Bu;switch($u){case LinearToneMapping:Bu="Linear";break;case ReinhardToneMapping:Bu="Reinhard";break;case Uncharted2ToneMapping:Bu="Uncharted2";break;case CineonToneMapping:Bu="OptimizedCineon";break;case ACESFilmicToneMapping:Bu="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+$u)}return"vec3 "+_u+"( vec3 color ) { return "+Bu+"ToneMapping( color ); }"}function generateExtensions(_u){var $u=[_u.extensionDerivatives||_u.envMapCubeUV||_u.bumpMap||_u.tangentSpaceNormalMap||_u.clearcoatNormalMap||_u.flatShading||_u.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(_u.extensionFragDepth||_u.logarithmicDepthBuffer)&&_u.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",_u.extensionDrawBuffers&&_u.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(_u.extensionShaderTextureLOD||_u.envMap)&&_u.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return $u.filter(filterEmptyLine).join(`
`)}function generateDefines(_u){var $u=[];for(var Bu in _u){var Ru=_u[Bu];Ru!==!1&&$u.push("#define "+Bu+" "+Ru)}return $u.join(`
`)}function fetchAttributeLocations(_u,$u){for(var Bu={},Ru=_u.getProgramParameter($u,35721),Lu=0;Lu<Ru;Lu++){var Ou=_u.getActiveAttrib($u,Lu),Fu=Ou.name;Bu[Fu]=_u.getAttribLocation($u,Fu)}return Bu}function filterEmptyLine(_u){return _u!==""}function replaceLightNums(_u,$u){return _u.replace(/NUM_DIR_LIGHTS/g,$u.numDirLights).replace(/NUM_SPOT_LIGHTS/g,$u.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,$u.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,$u.numPointLights).replace(/NUM_HEMI_LIGHTS/g,$u.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,$u.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,$u.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,$u.numPointLightShadows)}function replaceClippingPlaneNums(_u,$u){return _u.replace(/NUM_CLIPPING_PLANES/g,$u.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,$u.numClippingPlanes-$u.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_u){return _u.replace(includePattern,includeReplacer)}function includeReplacer(_u,$u){var Bu=ShaderChunk[$u];if(Bu===void 0)throw new Error("Can not resolve #include <"+$u+">");return resolveIncludes(Bu)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(_u){return _u.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(_u,$u,Bu,Ru){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(_u,$u,Bu,Ru)}function loopReplacer(_u,$u,Bu,Ru){for(var Lu="",Ou=parseInt($u);Ou<parseInt(Bu);Ou++)Lu+=Ru.replace(/\[ i \]/g,"[ "+Ou+" ]").replace(/UNROLLED_LOOP_INDEX/g,Ou);return Lu}function generatePrecision(_u){var $u="precision "+_u.precision+` float;
precision `+_u.precision+" int;";return _u.precision==="highp"?$u+=`
#define HIGH_PRECISION`:_u.precision==="mediump"?$u+=`
#define MEDIUM_PRECISION`:_u.precision==="lowp"&&($u+=`
#define LOW_PRECISION`),$u}function generateShadowMapTypeDefine(_u){var $u="SHADOWMAP_TYPE_BASIC";return _u.shadowMapType===PCFShadowMap?$u="SHADOWMAP_TYPE_PCF":_u.shadowMapType===PCFSoftShadowMap?$u="SHADOWMAP_TYPE_PCF_SOFT":_u.shadowMapType===VSMShadowMap&&($u="SHADOWMAP_TYPE_VSM"),$u}function generateEnvMapTypeDefine(_u){var $u="ENVMAP_TYPE_CUBE";if(_u.envMap)switch(_u.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:$u="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:$u="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:$u="ENVMAP_TYPE_SPHERE";break}return $u}function generateEnvMapModeDefine(_u){var $u="ENVMAP_MODE_REFLECTION";if(_u.envMap)switch(_u.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_MODE_REFRACTION";break}return $u}function generateEnvMapBlendingDefine(_u){var $u="ENVMAP_BLENDING_NONE";if(_u.envMap)switch(_u.combine){case MultiplyOperation:$u="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:$u="ENVMAP_BLENDING_MIX";break;case AddOperation:$u="ENVMAP_BLENDING_ADD";break}return $u}function WebGLProgram(_u,$u,Bu){var Ru=_u.getContext(),Lu=Bu.defines,Ou=Bu.vertexShader,Fu=Bu.fragmentShader,Nu=generateShadowMapTypeDefine(Bu),Vu=generateEnvMapTypeDefine(Bu),Uu=generateEnvMapModeDefine(Bu),Gu=generateEnvMapBlendingDefine(Bu),zu=_u.gammaFactor>0?_u.gammaFactor:1,Hu=Bu.isWebGL2?"":generateExtensions(Bu),ju=generateDefines(Lu),Qu=Ru.createProgram(),Xu,Ku;if(Bu.isRawShaderMaterial?(Xu=[ju].filter(filterEmptyLine).join(`
`),Xu.length>0&&(Xu+=`
`),Ku=[Hu,ju].filter(filterEmptyLine).join(`
`),Ku.length>0&&(Ku+=`
`)):(Xu=[generatePrecision(Bu),"#define SHADER_NAME "+Bu.shaderName,ju,Bu.instancing?"#define USE_INSTANCING":"",Bu.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+zu,"#define MAX_BONES "+Bu.maxBones,Bu.useFog&&Bu.fog?"#define USE_FOG":"",Bu.useFog&&Bu.fogExp2?"#define FOG_EXP2":"",Bu.map?"#define USE_MAP":"",Bu.envMap?"#define USE_ENVMAP":"",Bu.envMap?"#define "+Uu:"",Bu.lightMap?"#define USE_LIGHTMAP":"",Bu.aoMap?"#define USE_AOMAP":"",Bu.emissiveMap?"#define USE_EMISSIVEMAP":"",Bu.bumpMap?"#define USE_BUMPMAP":"",Bu.normalMap?"#define USE_NORMALMAP":"",Bu.normalMap&&Bu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Bu.normalMap&&Bu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Bu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Bu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Bu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Bu.displacementMap&&Bu.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Bu.specularMap?"#define USE_SPECULARMAP":"",Bu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Bu.metalnessMap?"#define USE_METALNESSMAP":"",Bu.alphaMap?"#define USE_ALPHAMAP":"",Bu.vertexTangents?"#define USE_TANGENT":"",Bu.vertexColors?"#define USE_COLOR":"",Bu.vertexUvs?"#define USE_UV":"",Bu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Bu.flatShading?"#define FLAT_SHADED":"",Bu.skinning?"#define USE_SKINNING":"",Bu.useVertexTexture?"#define BONE_TEXTURE":"",Bu.morphTargets?"#define USE_MORPHTARGETS":"",Bu.morphNormals&&Bu.flatShading===!1?"#define USE_MORPHNORMALS":"",Bu.doubleSided?"#define DOUBLE_SIDED":"",Bu.flipSided?"#define FLIP_SIDED":"",Bu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Bu.shadowMapEnabled?"#define "+Nu:"",Bu.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Bu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Bu.logarithmicDepthBuffer&&Bu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Ku=[Hu,generatePrecision(Bu),"#define SHADER_NAME "+Bu.shaderName,ju,Bu.alphaTest?"#define ALPHATEST "+Bu.alphaTest+(Bu.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+zu,Bu.useFog&&Bu.fog?"#define USE_FOG":"",Bu.useFog&&Bu.fogExp2?"#define FOG_EXP2":"",Bu.map?"#define USE_MAP":"",Bu.matcap?"#define USE_MATCAP":"",Bu.envMap?"#define USE_ENVMAP":"",Bu.envMap?"#define "+Vu:"",Bu.envMap?"#define "+Uu:"",Bu.envMap?"#define "+Gu:"",Bu.lightMap?"#define USE_LIGHTMAP":"",Bu.aoMap?"#define USE_AOMAP":"",Bu.emissiveMap?"#define USE_EMISSIVEMAP":"",Bu.bumpMap?"#define USE_BUMPMAP":"",Bu.normalMap?"#define USE_NORMALMAP":"",Bu.normalMap&&Bu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Bu.normalMap&&Bu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Bu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Bu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Bu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Bu.specularMap?"#define USE_SPECULARMAP":"",Bu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Bu.metalnessMap?"#define USE_METALNESSMAP":"",Bu.alphaMap?"#define USE_ALPHAMAP":"",Bu.sheen?"#define USE_SHEEN":"",Bu.vertexTangents?"#define USE_TANGENT":"",Bu.vertexColors?"#define USE_COLOR":"",Bu.vertexUvs?"#define USE_UV":"",Bu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Bu.gradientMap?"#define USE_GRADIENTMAP":"",Bu.flatShading?"#define FLAT_SHADED":"",Bu.doubleSided?"#define DOUBLE_SIDED":"",Bu.flipSided?"#define FLIP_SIDED":"",Bu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Bu.shadowMapEnabled?"#define "+Nu:"",Bu.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Bu.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Bu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Bu.logarithmicDepthBuffer&&Bu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(Bu.extensionShaderTextureLOD||Bu.envMap)&&Bu.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",Bu.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",Bu.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",Bu.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",Bu.toneMapping):"",Bu.dithering?"#define DITHERING":"",Bu.outputEncoding||Bu.mapEncoding||Bu.matcapEncoding||Bu.envMapEncoding||Bu.emissiveMapEncoding||Bu.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",Bu.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",Bu.mapEncoding):"",Bu.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",Bu.matcapEncoding):"",Bu.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",Bu.envMapEncoding):"",Bu.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",Bu.emissiveMapEncoding):"",Bu.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",Bu.lightMapEncoding):"",Bu.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",Bu.outputEncoding):"",Bu.depthPacking?"#define DEPTH_PACKING "+Bu.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ou=resolveIncludes(Ou),Ou=replaceLightNums(Ou,Bu),Ou=replaceClippingPlaneNums(Ou,Bu),Fu=resolveIncludes(Fu),Fu=replaceLightNums(Fu,Bu),Fu=replaceClippingPlaneNums(Fu,Bu),Ou=unrollLoops(Ou),Fu=unrollLoops(Fu),Bu.isWebGL2&&!Bu.isRawShaderMaterial){var Wu=!1,qu=/^\s*#version\s+300\s+es\s*\n/;Bu.isShaderMaterial&&Ou.match(qu)!==null&&Fu.match(qu)!==null&&(Wu=!0,Ou=Ou.replace(qu,""),Fu=Fu.replace(qu,"")),Xu=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Xu,Ku=[`#version 300 es
`,"#define varying in",Wu?"":"out highp vec4 pc_fragColor;",Wu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ku}var Yu=Xu+Ou,Zu=Ku+Fu,_h=WebGLShader(Ru,35633,Yu),ep=WebGLShader(Ru,35632,Zu);if(Ru.attachShader(Qu,_h),Ru.attachShader(Qu,ep),Bu.index0AttributeName!==void 0?Ru.bindAttribLocation(Qu,0,Bu.index0AttributeName):Bu.morphTargets===!0&&Ru.bindAttribLocation(Qu,0,"position"),Ru.linkProgram(Qu),_u.debug.checkShaderErrors){var ip=Ru.getProgramInfoLog(Qu).trim(),ap=Ru.getShaderInfoLog(_h).trim(),sp=Ru.getShaderInfoLog(ep).trim(),Ju=!0,_f=!0;if(Ru.getProgramParameter(Qu,35714)===!1){Ju=!1;var np=getShaderErrors(Ru,_h,"vertex"),tp=getShaderErrors(Ru,ep,"fragment");console.error("THREE.WebGLProgram: shader error: ",Ru.getError(),"35715",Ru.getProgramParameter(Qu,35715),"gl.getProgramInfoLog",ip,np,tp)}else ip!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",ip):(ap===""||sp==="")&&(_f=!1);_f&&(this.diagnostics={runnable:Ju,programLog:ip,vertexShader:{log:ap,prefix:Xu},fragmentShader:{log:sp,prefix:Ku}})}Ru.deleteShader(_h),Ru.deleteShader(ep);var rp;this.getUniforms=function(){return rp===void 0&&(rp=new WebGLUniforms(Ru,Qu)),rp};var op;return this.getAttributes=function(){return op===void 0&&(op=fetchAttributeLocations(Ru,Qu)),op},this.destroy=function(){Ru.deleteProgram(Qu),this.program=void 0},this.name=Bu.shaderName,this.id=programIdCount++,this.cacheKey=$u,this.usedTimes=1,this.program=Qu,this.vertexShader=_h,this.fragmentShader=ep,this}function WebGLPrograms(_u,$u,Bu){var Ru=[],Lu=Bu.isWebGL2,Ou=Bu.logarithmicDepthBuffer,Fu=Bu.floatVertexTextures,Nu=Bu.precision,Vu=Bu.maxVertexUniforms,Uu=Bu.vertexTextures,Gu={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},zu=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Hu(Xu,Ku){var Wu;if(Ku){var qu=ShaderLib[Ku];Wu={name:Xu.type,uniforms:UniformsUtils.clone(qu.uniforms),vertexShader:qu.vertexShader,fragmentShader:qu.fragmentShader}}else Wu={name:Xu.type,uniforms:Xu.uniforms,vertexShader:Xu.vertexShader,fragmentShader:Xu.fragmentShader};return Wu}function ju(Xu){var Ku=Xu.skeleton,Wu=Ku.bones;if(Fu)return 1024;var qu=Vu,Yu=Math.floor((qu-20)/4),Zu=Math.min(Yu,Wu.length);return Zu<Wu.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Wu.length+" bones. This GPU supports "+Zu+"."),0):Zu}function Qu(Xu){var Ku;return Xu?Xu.isTexture?Ku=Xu.encoding:Xu.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Ku=Xu.texture.encoding):Ku=LinearEncoding,Ku}this.getParameters=function(Xu,Ku,Wu,qu,Yu,Zu,_h){var ep=qu.fog,ip=Xu.isMeshStandardMaterial?qu.environment:null,ap=Xu.envMap||ip,sp=Gu[Xu.type],Ju=_h.isSkinnedMesh?ju(_h):0;Xu.precision!==null&&(Nu=Bu.getMaxPrecision(Xu.precision),Nu!==Xu.precision&&console.warn("THREE.WebGLProgram.getParameters:",Xu.precision,"not supported, using",Nu,"instead."));var _f=Hu(Xu,sp);Xu.onBeforeCompile(_f,_u);var np=_u.getRenderTarget(),tp={isWebGL2:Lu,shaderID:sp,shaderName:_f.name,uniforms:_f.uniforms,vertexShader:_f.vertexShader,fragmentShader:_f.fragmentShader,defines:Xu.defines,isRawShaderMaterial:Xu.isRawShaderMaterial,isShaderMaterial:Xu.isShaderMaterial,precision:Nu,instancing:_h.isInstancedMesh===!0,supportsVertexTextures:Uu,outputEncoding:np!==null?Qu(np.texture):_u.outputEncoding,map:!!Xu.map,mapEncoding:Qu(Xu.map),matcap:!!Xu.matcap,matcapEncoding:Qu(Xu.matcap),envMap:!!ap,envMapMode:ap&&ap.mapping,envMapEncoding:Qu(ap),envMapCubeUV:!!ap&&(ap.mapping===CubeUVReflectionMapping||ap.mapping===CubeUVRefractionMapping),lightMap:!!Xu.lightMap,lightMapEncoding:Qu(Xu.lightMap),aoMap:!!Xu.aoMap,emissiveMap:!!Xu.emissiveMap,emissiveMapEncoding:Qu(Xu.emissiveMap),bumpMap:!!Xu.bumpMap,normalMap:!!Xu.normalMap,objectSpaceNormalMap:Xu.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Xu.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!Xu.clearcoatMap,clearcoatRoughnessMap:!!Xu.clearcoatRoughnessMap,clearcoatNormalMap:!!Xu.clearcoatNormalMap,displacementMap:!!Xu.displacementMap,roughnessMap:!!Xu.roughnessMap,metalnessMap:!!Xu.metalnessMap,specularMap:!!Xu.specularMap,alphaMap:!!Xu.alphaMap,gradientMap:!!Xu.gradientMap,sheen:!!Xu.sheen,combine:Xu.combine,vertexTangents:Xu.normalMap&&Xu.vertexTangents,vertexColors:Xu.vertexColors,vertexUvs:!!Xu.map||!!Xu.bumpMap||!!Xu.normalMap||!!Xu.specularMap||!!Xu.alphaMap||!!Xu.emissiveMap||!!Xu.roughnessMap||!!Xu.metalnessMap||!!Xu.clearcoatMap||!!Xu.clearcoatRoughnessMap||!!Xu.clearcoatNormalMap||!!Xu.displacementMap,uvsVertexOnly:!(!!Xu.map||!!Xu.bumpMap||!!Xu.normalMap||!!Xu.specularMap||!!Xu.alphaMap||!!Xu.emissiveMap||!!Xu.roughnessMap||!!Xu.metalnessMap||!!Xu.clearcoatNormalMap)&&!!Xu.displacementMap,fog:!!ep,useFog:Xu.fog,fogExp2:ep&&ep.isFogExp2,flatShading:Xu.flatShading,sizeAttenuation:Xu.sizeAttenuation,logarithmicDepthBuffer:Ou,skinning:Xu.skinning&&Ju>0,maxBones:Ju,useVertexTexture:Fu,morphTargets:Xu.morphTargets,morphNormals:Xu.morphNormals,maxMorphTargets:_u.maxMorphTargets,maxMorphNormals:_u.maxMorphNormals,numDirLights:Ku.directional.length,numPointLights:Ku.point.length,numSpotLights:Ku.spot.length,numRectAreaLights:Ku.rectArea.length,numHemiLights:Ku.hemi.length,numDirLightShadows:Ku.directionalShadowMap.length,numPointLightShadows:Ku.pointShadowMap.length,numSpotLightShadows:Ku.spotShadowMap.length,numClippingPlanes:Yu,numClipIntersection:Zu,dithering:Xu.dithering,shadowMapEnabled:_u.shadowMap.enabled&&Wu.length>0,shadowMapType:_u.shadowMap.type,toneMapping:Xu.toneMapped?_u.toneMapping:NoToneMapping,physicallyCorrectLights:_u.physicallyCorrectLights,premultipliedAlpha:Xu.premultipliedAlpha,alphaTest:Xu.alphaTest,doubleSided:Xu.side===DoubleSide,flipSided:Xu.side===BackSide,depthPacking:Xu.depthPacking!==void 0?Xu.depthPacking:!1,index0AttributeName:Xu.index0AttributeName,extensionDerivatives:Xu.extensions&&Xu.extensions.derivatives,extensionFragDepth:Xu.extensions&&Xu.extensions.fragDepth,extensionDrawBuffers:Xu.extensions&&Xu.extensions.drawBuffers,extensionShaderTextureLOD:Xu.extensions&&Xu.extensions.shaderTextureLOD,rendererExtensionFragDepth:Lu||$u.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Lu||$u.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Lu||$u.get("EXT_shader_texture_lod")!==null,onBeforeCompile:Xu.onBeforeCompile};return tp},this.getProgramCacheKey=function(Xu){var Ku=[];if(Xu.shaderID?Ku.push(Xu.shaderID):(Ku.push(Xu.fragmentShader),Ku.push(Xu.vertexShader)),Xu.defines!==void 0)for(var Wu in Xu.defines)Ku.push(Wu),Ku.push(Xu.defines[Wu]);if(Xu.isRawShaderMaterial===void 0){for(var qu=0;qu<zu.length;qu++)Ku.push(Xu[zu[qu]]);Ku.push(_u.outputEncoding),Ku.push(_u.gammaFactor)}return Ku.push(Xu.onBeforeCompile.toString()),Ku.join()},this.acquireProgram=function(Xu,Ku){for(var Wu,qu=0,Yu=Ru.length;qu<Yu;qu++){var Zu=Ru[qu];if(Zu.cacheKey===Ku){Wu=Zu,++Wu.usedTimes;break}}return Wu===void 0&&(Wu=new WebGLProgram(_u,Ku,Xu),Ru.push(Wu)),Wu},this.releaseProgram=function(Xu){if(--Xu.usedTimes===0){var Ku=Ru.indexOf(Xu);Ru[Ku]=Ru[Ru.length-1],Ru.pop(),Xu.destroy()}},this.programs=Ru}function WebGLProperties(){var _u=new WeakMap;function $u(Ou){var Fu=_u.get(Ou);return Fu===void 0&&(Fu={},_u.set(Ou,Fu)),Fu}function Bu(Ou){_u.delete(Ou)}function Ru(Ou,Fu,Nu){_u.get(Ou)[Fu]=Nu}function Lu(){_u=new WeakMap}return{get:$u,remove:Bu,update:Ru,dispose:Lu}}function painterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.program!==$u.program?_u.program.id-$u.program.id:_u.material.id!==$u.material.id?_u.material.id-$u.material.id:_u.z!==$u.z?_u.z-$u.z:_u.id-$u.id}function reversePainterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.z!==$u.z?$u.z-_u.z:_u.id-$u.id}function WebGLRenderList(){var _u=[],$u=0,Bu=[],Ru=[],Lu={id:-1};function Ou(){$u=0,Bu.length=0,Ru.length=0}function Fu(zu,Hu,ju,Qu,Xu,Ku){var Wu=_u[$u];return Wu===void 0?(Wu={id:zu.id,object:zu,geometry:Hu,material:ju,program:ju.program||Lu,groupOrder:Qu,renderOrder:zu.renderOrder,z:Xu,group:Ku},_u[$u]=Wu):(Wu.id=zu.id,Wu.object=zu,Wu.geometry=Hu,Wu.material=ju,Wu.program=ju.program||Lu,Wu.groupOrder=Qu,Wu.renderOrder=zu.renderOrder,Wu.z=Xu,Wu.group=Ku),$u++,Wu}function Nu(zu,Hu,ju,Qu,Xu,Ku){var Wu=Fu(zu,Hu,ju,Qu,Xu,Ku);(ju.transparent===!0?Ru:Bu).push(Wu)}function Vu(zu,Hu,ju,Qu,Xu,Ku){var Wu=Fu(zu,Hu,ju,Qu,Xu,Ku);(ju.transparent===!0?Ru:Bu).unshift(Wu)}function Uu(zu,Hu){Bu.length>1&&Bu.sort(zu||painterSortStable),Ru.length>1&&Ru.sort(Hu||reversePainterSortStable)}function Gu(){for(var zu=$u,Hu=_u.length;zu<Hu;zu++){var ju=_u[zu];if(ju.id===null)break;ju.id=null,ju.object=null,ju.geometry=null,ju.material=null,ju.program=null,ju.group=null}}return{opaque:Bu,transparent:Ru,init:Ou,push:Nu,unshift:Vu,finish:Gu,sort:Uu}}function WebGLRenderLists(){var _u=new WeakMap;function $u(Lu){var Ou=Lu.target;Ou.removeEventListener("dispose",$u),_u.delete(Ou)}function Bu(Lu,Ou){var Fu=_u.get(Lu),Nu;return Fu===void 0?(Nu=new WebGLRenderList,_u.set(Lu,new WeakMap),_u.get(Lu).set(Ou,Nu),Lu.addEventListener("dispose",$u)):(Nu=Fu.get(Ou),Nu===void 0&&(Nu=new WebGLRenderList,Fu.set(Ou,Nu))),Nu}function Ru(){_u=new WeakMap}return{get:Bu,dispose:Ru}}function UniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Bu;switch($u.type){case"DirectionalLight":Bu={direction:new Vector3,color:new Color};break;case"SpotLight":Bu={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":Bu={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":Bu={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":Bu={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _u[$u.id]=Bu,Bu}}}function ShadowUniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Bu;switch($u.type){case"DirectionalLight":Bu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":Bu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":Bu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _u[$u.id]=Bu,Bu}}}var nextVersion=0;function shadowCastingLightsFirst(_u,$u){return($u.castShadow?1:0)-(_u.castShadow?1:0)}function WebGLLights(){for(var _u=new UniformsCache,$u=ShadowUniformsCache(),Bu={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Ru=0;Ru<9;Ru++)Bu.probe.push(new Vector3);var Lu=new Vector3,Ou=new Matrix4,Fu=new Matrix4;function Nu(Vu,Uu,Gu){for(var zu=0,Hu=0,ju=0,Qu=0;Qu<9;Qu++)Bu.probe[Qu].set(0,0,0);var Xu=0,Ku=0,Wu=0,qu=0,Yu=0,Zu=0,_h=0,ep=0,ip=Gu.matrixWorldInverse;Vu.sort(shadowCastingLightsFirst);for(var Qu=0,ap=Vu.length;Qu<ap;Qu++){var sp=Vu[Qu],Ju=sp.color,_f=sp.intensity,np=sp.distance,tp=sp.shadow&&sp.shadow.map?sp.shadow.map.texture:null;if(sp.isAmbientLight)zu+=Ju.r*_f,Hu+=Ju.g*_f,ju+=Ju.b*_f;else if(sp.isLightProbe)for(var rp=0;rp<9;rp++)Bu.probe[rp].addScaledVector(sp.sh.coefficients[rp],_f);else if(sp.isDirectionalLight){var op=_u.get(sp);if(op.color.copy(sp.color).multiplyScalar(sp.intensity),op.direction.setFromMatrixPosition(sp.matrixWorld),Lu.setFromMatrixPosition(sp.target.matrixWorld),op.direction.sub(Lu),op.direction.transformDirection(ip),sp.castShadow){var lp=sp.shadow,up=$u.get(sp);up.shadowBias=lp.bias,up.shadowRadius=lp.radius,up.shadowMapSize=lp.mapSize,Bu.directionalShadow[Xu]=up,Bu.directionalShadowMap[Xu]=tp,Bu.directionalShadowMatrix[Xu]=sp.shadow.matrix,Zu++}Bu.directional[Xu]=op,Xu++}else if(sp.isSpotLight){var op=_u.get(sp);if(op.position.setFromMatrixPosition(sp.matrixWorld),op.position.applyMatrix4(ip),op.color.copy(Ju).multiplyScalar(_f),op.distance=np,op.direction.setFromMatrixPosition(sp.matrixWorld),Lu.setFromMatrixPosition(sp.target.matrixWorld),op.direction.sub(Lu),op.direction.transformDirection(ip),op.coneCos=Math.cos(sp.angle),op.penumbraCos=Math.cos(sp.angle*(1-sp.penumbra)),op.decay=sp.decay,sp.castShadow){var lp=sp.shadow,up=$u.get(sp);up.shadowBias=lp.bias,up.shadowRadius=lp.radius,up.shadowMapSize=lp.mapSize,Bu.spotShadow[Wu]=up,Bu.spotShadowMap[Wu]=tp,Bu.spotShadowMatrix[Wu]=sp.shadow.matrix,ep++}Bu.spot[Wu]=op,Wu++}else if(sp.isRectAreaLight){var op=_u.get(sp);op.color.copy(Ju).multiplyScalar(_f),op.position.setFromMatrixPosition(sp.matrixWorld),op.position.applyMatrix4(ip),Fu.identity(),Ou.copy(sp.matrixWorld),Ou.premultiply(ip),Fu.extractRotation(Ou),op.halfWidth.set(sp.width*.5,0,0),op.halfHeight.set(0,sp.height*.5,0),op.halfWidth.applyMatrix4(Fu),op.halfHeight.applyMatrix4(Fu),Bu.rectArea[qu]=op,qu++}else if(sp.isPointLight){var op=_u.get(sp);if(op.position.setFromMatrixPosition(sp.matrixWorld),op.position.applyMatrix4(ip),op.color.copy(sp.color).multiplyScalar(sp.intensity),op.distance=sp.distance,op.decay=sp.decay,sp.castShadow){var lp=sp.shadow,up=$u.get(sp);up.shadowBias=lp.bias,up.shadowRadius=lp.radius,up.shadowMapSize=lp.mapSize,up.shadowCameraNear=lp.camera.near,up.shadowCameraFar=lp.camera.far,Bu.pointShadow[Ku]=up,Bu.pointShadowMap[Ku]=tp,Bu.pointShadowMatrix[Ku]=sp.shadow.matrix,_h++}Bu.point[Ku]=op,Ku++}else if(sp.isHemisphereLight){var op=_u.get(sp);op.direction.setFromMatrixPosition(sp.matrixWorld),op.direction.transformDirection(ip),op.direction.normalize(),op.skyColor.copy(sp.color).multiplyScalar(_f),op.groundColor.copy(sp.groundColor).multiplyScalar(_f),Bu.hemi[Yu]=op,Yu++}}Bu.ambient[0]=zu,Bu.ambient[1]=Hu,Bu.ambient[2]=ju;var cp=Bu.hash;(cp.directionalLength!==Xu||cp.pointLength!==Ku||cp.spotLength!==Wu||cp.rectAreaLength!==qu||cp.hemiLength!==Yu||cp.numDirectionalShadows!==Zu||cp.numPointShadows!==_h||cp.numSpotShadows!==ep)&&(Bu.directional.length=Xu,Bu.spot.length=Wu,Bu.rectArea.length=qu,Bu.point.length=Ku,Bu.hemi.length=Yu,Bu.directionalShadow.length=Zu,Bu.directionalShadowMap.length=Zu,Bu.pointShadow.length=_h,Bu.pointShadowMap.length=_h,Bu.spotShadow.length=ep,Bu.spotShadowMap.length=ep,Bu.directionalShadowMatrix.length=Zu,Bu.pointShadowMatrix.length=_h,Bu.spotShadowMatrix.length=ep,cp.directionalLength=Xu,cp.pointLength=Ku,cp.spotLength=Wu,cp.rectAreaLength=qu,cp.hemiLength=Yu,cp.numDirectionalShadows=Zu,cp.numPointShadows=_h,cp.numSpotShadows=ep,Bu.version=nextVersion++)}return{setup:Nu,state:Bu}}function WebGLRenderState(){var _u=new WebGLLights,$u=[],Bu=[];function Ru(){$u.length=0,Bu.length=0}function Lu(Vu){$u.push(Vu)}function Ou(Vu){Bu.push(Vu)}function Fu(Vu){_u.setup($u,Bu,Vu)}var Nu={lightsArray:$u,shadowsArray:Bu,lights:_u};return{init:Ru,state:Nu,setupLights:Fu,pushLight:Lu,pushShadow:Ou}}function WebGLRenderStates(){var _u=new WeakMap;function $u(Lu){var Ou=Lu.target;Ou.removeEventListener("dispose",$u),_u.delete(Ou)}function Bu(Lu,Ou){var Fu;return _u.has(Lu)===!1?(Fu=new WebGLRenderState,_u.set(Lu,new WeakMap),_u.get(Lu).set(Ou,Fu),Lu.addEventListener("dispose",$u)):_u.get(Lu).has(Ou)===!1?(Fu=new WebGLRenderState,_u.get(Lu).set(Ou,Fu)):Fu=_u.get(Lu).get(Ou),Fu}function Ru(){_u=new WeakMap}return{get:Bu,dispose:Ru}}function MeshDepthMaterial(_u){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(_u)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.depthPacking=_u.depthPacking,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this};function MeshDistanceMaterial(_u){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(_u)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.referencePosition.copy(_u.referencePosition),this.nearDistance=_u.nearDistance,this.farDistance=_u.farDistance,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(_u,$u,Bu){var Ru=new Frustum,Lu=new Vector2,Ou=new Vector2,Fu=new Vector4,Nu=[],Vu=[],Uu={},Gu={0:BackSide,1:FrontSide,2:DoubleSide},zu=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Hu=zu.clone();Hu.defines.HORIZONAL_PASS=1;var ju=new BufferGeometry;ju.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Qu=new Mesh(ju,zu),Xu=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(_h,ep,ip){if(Xu.enabled!==!1&&!(Xu.autoUpdate===!1&&Xu.needsUpdate===!1)&&_h.length!==0){var ap=_u.getRenderTarget(),sp=_u.getActiveCubeFace(),Ju=_u.getActiveMipmapLevel(),_f=_u.state;_f.setBlending(NoBlending),_f.buffers.color.setClear(1,1,1,1),_f.buffers.depth.setTest(!0),_f.setScissorTest(!1);for(var np=0,tp=_h.length;np<tp;np++){var rp=_h[np],op=rp.shadow;if(op===void 0){console.warn("THREE.WebGLShadowMap:",rp,"has no shadow.");continue}Lu.copy(op.mapSize);var lp=op.getFrameExtents();if(Lu.multiply(lp),Ou.copy(op.mapSize),(Lu.x>Bu||Lu.y>Bu)&&(Lu.x>Bu&&(Ou.x=Math.floor(Bu/lp.x),Lu.x=Ou.x*lp.x,op.mapSize.x=Ou.x),Lu.y>Bu&&(Ou.y=Math.floor(Bu/lp.y),Lu.y=Ou.y*lp.y,op.mapSize.y=Ou.y)),op.map===null&&!op.isPointLightShadow&&this.type===VSMShadowMap){var up={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};op.map=new WebGLRenderTarget(Lu.x,Lu.y,up),op.map.texture.name=rp.name+".shadowMap",op.mapPass=new WebGLRenderTarget(Lu.x,Lu.y,up),op.camera.updateProjectionMatrix()}if(op.map===null){var up={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};op.map=new WebGLRenderTarget(Lu.x,Lu.y,up),op.map.texture.name=rp.name+".shadowMap",op.camera.updateProjectionMatrix()}_u.setRenderTarget(op.map),_u.clear();for(var cp=op.getViewportCount(),Ap=0;Ap<cp;Ap++){var yp=op.getViewport(Ap);Fu.set(Ou.x*yp.x,Ou.y*yp.y,Ou.x*yp.z,Ou.y*yp.w),_f.viewport(Fu),op.updateMatrices(rp,Ap),Ru=op.getFrustum(),Zu(ep,ip,op.camera,rp,this.type)}!op.isPointLightShadow&&this.type===VSMShadowMap&&Ku(op,ip)}Xu.needsUpdate=!1,_u.setRenderTarget(ap,sp,Ju)}};function Ku(_h,ep){var ip=$u.update(Qu);zu.uniforms.shadow_pass.value=_h.map.texture,zu.uniforms.resolution.value=_h.mapSize,zu.uniforms.radius.value=_h.radius,_u.setRenderTarget(_h.mapPass),_u.clear(),_u.renderBufferDirect(ep,null,ip,zu,Qu,null),Hu.uniforms.shadow_pass.value=_h.mapPass.texture,Hu.uniforms.resolution.value=_h.mapSize,Hu.uniforms.radius.value=_h.radius,_u.setRenderTarget(_h.map),_u.clear(),_u.renderBufferDirect(ep,null,ip,Hu,Qu,null)}function Wu(_h,ep,ip){var ap=_h<<0|ep<<1|ip<<2,sp=Nu[ap];return sp===void 0&&(sp=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:_h,skinning:ep}),Nu[ap]=sp),sp}function qu(_h,ep,ip){var ap=_h<<0|ep<<1|ip<<2,sp=Vu[ap];return sp===void 0&&(sp=new MeshDistanceMaterial({morphTargets:_h,skinning:ep}),Vu[ap]=sp),sp}function Yu(_h,ep,ip,ap,sp,Ju,_f){var np=null,tp=Wu,rp=_h.customDepthMaterial;if(ap.isPointLight===!0&&(tp=qu,rp=_h.customDistanceMaterial),rp===void 0){var op=!1;ip.morphTargets===!0&&(op=ep.morphAttributes&&ep.morphAttributes.position&&ep.morphAttributes.position.length>0);var lp=!1;_h.isSkinnedMesh===!0&&(ip.skinning===!0?lp=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",_h));var up=_h.isInstancedMesh===!0;np=tp(op,lp,up)}else np=rp;if(_u.localClippingEnabled&&ip.clipShadows===!0&&ip.clippingPlanes.length!==0){var cp=np.uuid,Ap=ip.uuid,yp=Uu[cp];yp===void 0&&(yp={},Uu[cp]=yp);var Ip=yp[Ap];Ip===void 0&&(Ip=np.clone(),yp[Ap]=Ip),np=Ip}return np.visible=ip.visible,np.wireframe=ip.wireframe,_f===VSMShadowMap?np.side=ip.shadowSide!==null?ip.shadowSide:ip.side:np.side=ip.shadowSide!==null?ip.shadowSide:Gu[ip.side],np.clipShadows=ip.clipShadows,np.clippingPlanes=ip.clippingPlanes,np.clipIntersection=ip.clipIntersection,np.wireframeLinewidth=ip.wireframeLinewidth,np.linewidth=ip.linewidth,ap.isPointLight===!0&&np.isMeshDistanceMaterial===!0&&(np.referencePosition.setFromMatrixPosition(ap.matrixWorld),np.nearDistance=sp,np.farDistance=Ju),np}function Zu(_h,ep,ip,ap,sp){if(_h.visible!==!1){var Ju=_h.layers.test(ep.layers);if(Ju&&(_h.isMesh||_h.isLine||_h.isPoints)&&(_h.castShadow||_h.receiveShadow&&sp===VSMShadowMap)&&(!_h.frustumCulled||Ru.intersectsObject(_h))){_h.modelViewMatrix.multiplyMatrices(ip.matrixWorldInverse,_h.matrixWorld);var _f=$u.update(_h),np=_h.material;if(Array.isArray(np))for(var tp=_f.groups,rp=0,op=tp.length;rp<op;rp++){var lp=tp[rp],up=np[lp.materialIndex];if(up&&up.visible){var cp=Yu(_h,_f,up,ap,ip.near,ip.far,sp);_u.renderBufferDirect(ip,null,_f,cp,_h,lp)}}else if(np.visible){var cp=Yu(_h,_f,np,ap,ip.near,ip.far,sp);_u.renderBufferDirect(ip,null,_f,cp,_h,null)}}for(var Ap=_h.children,yp=0,Ip=Ap.length;yp<Ip;yp++)Zu(Ap[yp],ep,ip,ap,sp)}}}function WebGLState(_u,$u,Bu){var Ru=Bu.isWebGL2;function Lu(){var Pp=!1,tm=new Vector4,sm=null,cm=new Vector4(0,0,0,0);return{setMask:function(um){sm!==um&&!Pp&&(_u.colorMask(um,um,um,um),sm=um)},setLocked:function(um){Pp=um},setClear:function(um,vm,_m,Mm,Rm){Rm===!0&&(um*=Mm,vm*=Mm,_m*=Mm),tm.set(um,vm,_m,Mm),cm.equals(tm)===!1&&(_u.clearColor(um,vm,_m,Mm),cm.copy(tm))},reset:function(){Pp=!1,sm=null,cm.set(-1,0,0,0)}}}function Ou(){var Pp=!1,tm=null,sm=null,cm=null;return{setTest:function(um){um?bp(2929):gp(2929)},setMask:function(um){tm!==um&&!Pp&&(_u.depthMask(um),tm=um)},setFunc:function(um){if(sm!==um){if(um)switch(um){case NeverDepth:_u.depthFunc(512);break;case AlwaysDepth:_u.depthFunc(519);break;case LessDepth:_u.depthFunc(513);break;case LessEqualDepth:_u.depthFunc(515);break;case EqualDepth:_u.depthFunc(514);break;case GreaterEqualDepth:_u.depthFunc(518);break;case GreaterDepth:_u.depthFunc(516);break;case NotEqualDepth:_u.depthFunc(517);break;default:_u.depthFunc(515)}else _u.depthFunc(515);sm=um}},setLocked:function(um){Pp=um},setClear:function(um){cm!==um&&(_u.clearDepth(um),cm=um)},reset:function(){Pp=!1,tm=null,sm=null,cm=null}}}function Fu(){var Pp=!1,tm=null,sm=null,cm=null,um=null,vm=null,_m=null,Mm=null,Rm=null;return{setTest:function(wm){Pp||(wm?bp(2960):gp(2960))},setMask:function(wm){tm!==wm&&!Pp&&(_u.stencilMask(wm),tm=wm)},setFunc:function(wm,Pm,Im){(sm!==wm||cm!==Pm||um!==Im)&&(_u.stencilFunc(wm,Pm,Im),sm=wm,cm=Pm,um=Im)},setOp:function(wm,Pm,Im){(vm!==wm||_m!==Pm||Mm!==Im)&&(_u.stencilOp(wm,Pm,Im),vm=wm,_m=Pm,Mm=Im)},setLocked:function(wm){Pp=wm},setClear:function(wm){Rm!==wm&&(_u.clearStencil(wm),Rm=wm)},reset:function(){Pp=!1,tm=null,sm=null,cm=null,um=null,vm=null,_m=null,Mm=null,Rm=null}}}var Nu=new Lu,Vu=new Ou,Uu=new Fu,Gu=_u.getParameter(34921),zu=new Uint8Array(Gu),Hu=new Uint8Array(Gu),ju=new Uint8Array(Gu),Qu={},Xu=null,Ku=null,Wu=null,qu=null,Yu=null,Zu=null,_h=null,ep=null,ip=null,ap=!1,sp=null,Ju=null,_f=null,np=null,tp=null,rp=_u.getParameter(35661),op=!1,lp=0,up=_u.getParameter(7938);up.indexOf("WebGL")!==-1?(lp=parseFloat(/^WebGL\ ([0-9])/.exec(up)[1]),op=lp>=1):up.indexOf("OpenGL ES")!==-1&&(lp=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(up)[1]),op=lp>=2);var cp=null,Ap={},yp=new Vector4,Ip=new Vector4;function Ep(Pp,tm,sm){var cm=new Uint8Array(4),um=_u.createTexture();_u.bindTexture(Pp,um),_u.texParameteri(Pp,10241,9728),_u.texParameteri(Pp,10240,9728);for(var vm=0;vm<sm;vm++)_u.texImage2D(tm+vm,0,6408,1,1,0,6408,5121,cm);return um}var Vp={};Vp[3553]=Ep(3553,3553,1),Vp[34067]=Ep(34067,34069,6),Nu.setClear(0,0,0,1),Vu.setClear(1),Uu.setClear(0),bp(2929),Vu.setFunc(LessEqualDepth),hp(!1),vp(CullFaceBack),bp(2884),zp(NoBlending);function $p(){for(var Pp=0,tm=zu.length;Pp<tm;Pp++)zu[Pp]=0}function kp(Pp){Bp(Pp,0)}function Bp(Pp,tm){if(zu[Pp]=1,Hu[Pp]===0&&(_u.enableVertexAttribArray(Pp),Hu[Pp]=1),ju[Pp]!==tm){var sm=Ru?_u:$u.get("ANGLE_instanced_arrays");sm[Ru?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Pp,tm),ju[Pp]=tm}}function fp(){for(var Pp=0,tm=Hu.length;Pp!==tm;++Pp)Hu[Pp]!==zu[Pp]&&(_u.disableVertexAttribArray(Pp),Hu[Pp]=0)}function dp(Pp,tm,sm,cm,um,vm){Ru===!0&&(sm===5124||sm===5125)?_u.vertexAttribIPointer(Pp,tm,sm,cm,um,vm):_u.vertexAttribPointer(Pp,tm,sm,cm,um,vm)}function bp(Pp){Qu[Pp]!==!0&&(_u.enable(Pp),Qu[Pp]=!0)}function gp(Pp){Qu[Pp]!==!1&&(_u.disable(Pp),Qu[Pp]=!1)}function wp(Pp){return Xu!==Pp?(_u.useProgram(Pp),Xu=Pp,!0):!1}var Sp={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Ru)Sp[MinEquation]=32775,Sp[MaxEquation]=32776;else{var Cp=$u.get("EXT_blend_minmax");Cp!==null&&(Sp[MinEquation]=Cp.MIN_EXT,Sp[MaxEquation]=Cp.MAX_EXT)}var Lp={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function zp(Pp,tm,sm,cm,um,vm,_m,Mm){if(Pp===NoBlending){Ku&&(gp(3042),Ku=!1);return}if(Ku||(bp(3042),Ku=!0),Pp!==CustomBlending){if(Pp!==Wu||Mm!==ap){if((qu!==AddEquation||_h!==AddEquation)&&(_u.blendEquation(32774),qu=AddEquation,_h=AddEquation),Mm)switch(Pp){case NormalBlending:_u.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:_u.blendFunc(1,1);break;case SubtractiveBlending:_u.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:_u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pp);break}else switch(Pp){case NormalBlending:_u.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:_u.blendFunc(770,1);break;case SubtractiveBlending:_u.blendFunc(0,769);break;case MultiplyBlending:_u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pp);break}Yu=null,Zu=null,ep=null,ip=null,Wu=Pp,ap=Mm}return}um=um||tm,vm=vm||sm,_m=_m||cm,(tm!==qu||um!==_h)&&(_u.blendEquationSeparate(Sp[tm],Sp[um]),qu=tm,_h=um),(sm!==Yu||cm!==Zu||vm!==ep||_m!==ip)&&(_u.blendFuncSeparate(Lp[sm],Lp[cm],Lp[vm],Lp[_m]),Yu=sm,Zu=cm,ep=vm,ip=_m),Wu=Pp,ap=null}function Dp(Pp,tm){Pp.side===DoubleSide?gp(2884):bp(2884);var sm=Pp.side===BackSide;tm&&(sm=!sm),hp(sm),Pp.blending===NormalBlending&&Pp.transparent===!1?zp(NoBlending):zp(Pp.blending,Pp.blendEquation,Pp.blendSrc,Pp.blendDst,Pp.blendEquationAlpha,Pp.blendSrcAlpha,Pp.blendDstAlpha,Pp.premultipliedAlpha),Vu.setFunc(Pp.depthFunc),Vu.setTest(Pp.depthTest),Vu.setMask(Pp.depthWrite),Nu.setMask(Pp.colorWrite);var cm=Pp.stencilWrite;Uu.setTest(cm),cm&&(Uu.setMask(Pp.stencilWriteMask),Uu.setFunc(Pp.stencilFunc,Pp.stencilRef,Pp.stencilFuncMask),Uu.setOp(Pp.stencilFail,Pp.stencilZFail,Pp.stencilZPass)),Fp(Pp.polygonOffset,Pp.polygonOffsetFactor,Pp.polygonOffsetUnits)}function hp(Pp){sp!==Pp&&(Pp?_u.frontFace(2304):_u.frontFace(2305),sp=Pp)}function vp(Pp){Pp!==CullFaceNone?(bp(2884),Pp!==Ju&&(Pp===CullFaceBack?_u.cullFace(1029):Pp===CullFaceFront?_u.cullFace(1028):_u.cullFace(1032))):gp(2884),Ju=Pp}function Np(Pp){Pp!==_f&&(op&&_u.lineWidth(Pp),_f=Pp)}function Fp(Pp,tm,sm){Pp?(bp(32823),(np!==tm||tp!==sm)&&(_u.polygonOffset(tm,sm),np=tm,tp=sm)):gp(32823)}function qp(Pp){Pp?bp(3089):gp(3089)}function jp(Pp){Pp===void 0&&(Pp=33984+rp-1),cp!==Pp&&(_u.activeTexture(Pp),cp=Pp)}function Xp(Pp,tm){cp===null&&jp();var sm=Ap[cp];sm===void 0&&(sm={type:void 0,texture:void 0},Ap[cp]=sm),(sm.type!==Pp||sm.texture!==tm)&&(_u.bindTexture(Pp,tm||Vp[Pp]),sm.type=Pp,sm.texture=tm)}function rm(){var Pp=Ap[cp];Pp!==void 0&&Pp.type!==void 0&&(_u.bindTexture(Pp.type,null),Pp.type=void 0,Pp.texture=void 0)}function em(){try{_u.compressedTexImage2D.apply(_u,arguments)}catch(Pp){console.error("THREE.WebGLState:",Pp)}}function lm(){try{_u.texImage2D.apply(_u,arguments)}catch(Pp){console.error("THREE.WebGLState:",Pp)}}function Zp(){try{_u.texImage3D.apply(_u,arguments)}catch(Pp){console.error("THREE.WebGLState:",Pp)}}function im(Pp){yp.equals(Pp)===!1&&(_u.scissor(Pp.x,Pp.y,Pp.z,Pp.w),yp.copy(Pp))}function Jp(Pp){Ip.equals(Pp)===!1&&(_u.viewport(Pp.x,Pp.y,Pp.z,Pp.w),Ip.copy(Pp))}function am(){for(var Pp=0;Pp<Hu.length;Pp++)Hu[Pp]===1&&(_u.disableVertexAttribArray(Pp),Hu[Pp]=0);Qu={},cp=null,Ap={},Xu=null,Wu=null,sp=null,Ju=null,Nu.reset(),Vu.reset(),Uu.reset()}return{buffers:{color:Nu,depth:Vu,stencil:Uu},initAttributes:$p,enableAttribute:kp,enableAttributeAndDivisor:Bp,disableUnusedAttributes:fp,vertexAttribPointer:dp,enable:bp,disable:gp,useProgram:wp,setBlending:zp,setMaterial:Dp,setFlipSided:hp,setCullFace:vp,setLineWidth:Np,setPolygonOffset:Fp,setScissorTest:qp,activeTexture:jp,bindTexture:Xp,unbindTexture:rm,compressedTexImage2D:em,texImage2D:lm,texImage3D:Zp,scissor:im,viewport:Jp,reset:am}}function WebGLTextures(_u,$u,Bu,Ru,Lu,Ou,Fu){var Nu=Lu.isWebGL2,Vu=Lu.maxTextures,Uu=Lu.maxCubemapSize,Gu=Lu.maxTextureSize,zu=Lu.maxSamples,Hu=new WeakMap,ju,Qu=!1;try{Qu=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Xu(hp,vp){return Qu?new OffscreenCanvas(hp,vp):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Ku(hp,vp,Np,Fp){var qp=1;if((hp.width>Fp||hp.height>Fp)&&(qp=Fp/Math.max(hp.width,hp.height)),qp<1||vp===!0)if(typeof HTMLImageElement!="undefined"&&hp instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&hp instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&hp instanceof ImageBitmap){var jp=vp?MathUtils.floorPowerOfTwo:Math.floor,Xp=jp(qp*hp.width),rm=jp(qp*hp.height);ju===void 0&&(ju=Xu(Xp,rm));var em=Np?Xu(Xp,rm):ju;em.width=Xp,em.height=rm;var lm=em.getContext("2d");return lm.drawImage(hp,0,0,Xp,rm),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+hp.width+"x"+hp.height+") to ("+Xp+"x"+rm+")."),em}else return"data"in hp&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+hp.width+"x"+hp.height+")."),hp;return hp}function Wu(hp){return MathUtils.isPowerOfTwo(hp.width)&&MathUtils.isPowerOfTwo(hp.height)}function qu(hp){return Nu?!1:hp.wrapS!==ClampToEdgeWrapping||hp.wrapT!==ClampToEdgeWrapping||hp.minFilter!==NearestFilter&&hp.minFilter!==LinearFilter}function Yu(hp,vp){return hp.generateMipmaps&&vp&&hp.minFilter!==NearestFilter&&hp.minFilter!==LinearFilter}function Zu(hp,vp,Np,Fp){_u.generateMipmap(hp);var qp=Ru.get(vp);qp.__maxMipLevel=Math.log(Math.max(Np,Fp))*Math.LOG2E}function _h(hp,vp,Np){if(Nu===!1)return vp;if(hp!==null){if(_u[hp]!==void 0)return _u[hp];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+hp+"'")}var Fp=vp;return vp===6403&&(Np===5126&&(Fp=33326),Np===5131&&(Fp=33325),Np===5121&&(Fp=33321)),vp===6407&&(Np===5126&&(Fp=34837),Np===5131&&(Fp=34843),Np===5121&&(Fp=32849)),vp===6408&&(Np===5126&&(Fp=34836),Np===5131&&(Fp=34842),Np===5121&&(Fp=32856)),(Fp===33325||Fp===33326||Fp===34842||Fp===34836)&&$u.get("EXT_color_buffer_float"),Fp}function ep(hp){return hp===NearestFilter||hp===NearestMipmapNearestFilter||hp===NearestMipmapLinearFilter?9728:9729}function ip(hp){var vp=hp.target;vp.removeEventListener("dispose",ip),sp(vp),vp.isVideoTexture&&Hu.delete(vp),Fu.memory.textures--}function ap(hp){var vp=hp.target;vp.removeEventListener("dispose",ap),Ju(vp),Fu.memory.textures--}function sp(hp){var vp=Ru.get(hp);vp.__webglInit!==void 0&&(_u.deleteTexture(vp.__webglTexture),Ru.remove(hp))}function Ju(hp){var vp=Ru.get(hp),Np=Ru.get(hp.texture);if(!!hp){if(Np.__webglTexture!==void 0&&_u.deleteTexture(Np.__webglTexture),hp.depthTexture&&hp.depthTexture.dispose(),hp.isWebGLCubeRenderTarget)for(var Fp=0;Fp<6;Fp++)_u.deleteFramebuffer(vp.__webglFramebuffer[Fp]),vp.__webglDepthbuffer&&_u.deleteRenderbuffer(vp.__webglDepthbuffer[Fp]);else _u.deleteFramebuffer(vp.__webglFramebuffer),vp.__webglDepthbuffer&&_u.deleteRenderbuffer(vp.__webglDepthbuffer),vp.__webglMultisampledFramebuffer&&_u.deleteFramebuffer(vp.__webglMultisampledFramebuffer),vp.__webglColorRenderbuffer&&_u.deleteRenderbuffer(vp.__webglColorRenderbuffer),vp.__webglDepthRenderbuffer&&_u.deleteRenderbuffer(vp.__webglDepthRenderbuffer);Ru.remove(hp.texture),Ru.remove(hp)}}var _f=0;function np(){_f=0}function tp(){var hp=_f;return hp>=Vu&&console.warn("THREE.WebGLTextures: Trying to use "+hp+" texture units while this GPU supports only "+Vu),_f+=1,hp}function rp(hp,vp){var Np=Ru.get(hp);if(hp.isVideoTexture&&Sp(hp),hp.version>0&&Np.__version!==hp.version){var Fp=hp.image;if(Fp===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Fp.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Vp(Np,hp,vp);return}}Bu.activeTexture(33984+vp),Bu.bindTexture(3553,Np.__webglTexture)}function op(hp,vp){var Np=Ru.get(hp);if(hp.version>0&&Np.__version!==hp.version){Vp(Np,hp,vp);return}Bu.activeTexture(33984+vp),Bu.bindTexture(35866,Np.__webglTexture)}function lp(hp,vp){var Np=Ru.get(hp);if(hp.version>0&&Np.__version!==hp.version){Vp(Np,hp,vp);return}Bu.activeTexture(33984+vp),Bu.bindTexture(32879,Np.__webglTexture)}function up(hp,vp){if(hp.image.length===6){var Np=Ru.get(hp);if(hp.version>0&&Np.__version!==hp.version){Ep(Np,hp),Bu.activeTexture(33984+vp),Bu.bindTexture(34067,Np.__webglTexture),_u.pixelStorei(37440,hp.flipY);for(var Fp=hp&&(hp.isCompressedTexture||hp.image[0].isCompressedTexture),qp=hp.image[0]&&hp.image[0].isDataTexture,jp=[],Xp=0;Xp<6;Xp++)!Fp&&!qp?jp[Xp]=Ku(hp.image[Xp],!1,!0,Uu):jp[Xp]=qp?hp.image[Xp].image:hp.image[Xp];var rm=jp[0],em=Wu(rm)||Nu,lm=Ou.convert(hp.format),Zp=Ou.convert(hp.type),im=_h(hp.internalFormat,lm,Zp);Ip(34067,hp,em);var Jp;if(Fp){for(var Xp=0;Xp<6;Xp++){Jp=jp[Xp].mipmaps;for(var am=0;am<Jp.length;am++){var Pp=Jp[am];hp.format!==RGBAFormat&&hp.format!==RGBFormat?lm!==null?Bu.compressedTexImage2D(34069+Xp,am,im,Pp.width,Pp.height,0,Pp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bu.texImage2D(34069+Xp,am,im,Pp.width,Pp.height,0,lm,Zp,Pp.data)}}Np.__maxMipLevel=Jp.length-1}else{Jp=hp.mipmaps;for(var Xp=0;Xp<6;Xp++)if(qp){Bu.texImage2D(34069+Xp,0,im,jp[Xp].width,jp[Xp].height,0,lm,Zp,jp[Xp].data);for(var am=0;am<Jp.length;am++){var Pp=Jp[am],tm=Pp.image[Xp].image;Bu.texImage2D(34069+Xp,am+1,im,tm.width,tm.height,0,lm,Zp,tm.data)}}else{Bu.texImage2D(34069+Xp,0,im,lm,Zp,jp[Xp]);for(var am=0;am<Jp.length;am++){var Pp=Jp[am];Bu.texImage2D(34069+Xp,am+1,im,lm,Zp,Pp.image[Xp])}}Np.__maxMipLevel=Jp.length}Yu(hp,em)&&Zu(34067,hp,rm.width,rm.height),Np.__version=hp.version,hp.onUpdate&&hp.onUpdate(hp)}else Bu.activeTexture(33984+vp),Bu.bindTexture(34067,Np.__webglTexture)}}function cp(hp,vp){Bu.activeTexture(33984+vp),Bu.bindTexture(34067,Ru.get(hp).__webglTexture)}var Ap={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},yp={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Ip(hp,vp,Np){Np?(_u.texParameteri(hp,10242,Ap[vp.wrapS]),_u.texParameteri(hp,10243,Ap[vp.wrapT]),(hp===32879||hp===35866)&&_u.texParameteri(hp,32882,Ap[vp.wrapR]),_u.texParameteri(hp,10240,yp[vp.magFilter]),_u.texParameteri(hp,10241,yp[vp.minFilter])):(_u.texParameteri(hp,10242,33071),_u.texParameteri(hp,10243,33071),(hp===32879||hp===35866)&&_u.texParameteri(hp,32882,33071),(vp.wrapS!==ClampToEdgeWrapping||vp.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_u.texParameteri(hp,10240,ep(vp.magFilter)),_u.texParameteri(hp,10241,ep(vp.minFilter)),vp.minFilter!==NearestFilter&&vp.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Fp=$u.get("EXT_texture_filter_anisotropic");if(Fp){if(vp.type===FloatType&&$u.get("OES_texture_float_linear")===null||vp.type===HalfFloatType&&(Nu||$u.get("OES_texture_half_float_linear"))===null)return;(vp.anisotropy>1||Ru.get(vp).__currentAnisotropy)&&(_u.texParameterf(hp,Fp.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(vp.anisotropy,Lu.getMaxAnisotropy())),Ru.get(vp).__currentAnisotropy=vp.anisotropy)}}function Ep(hp,vp){hp.__webglInit===void 0&&(hp.__webglInit=!0,vp.addEventListener("dispose",ip),hp.__webglTexture=_u.createTexture(),Fu.memory.textures++)}function Vp(hp,vp,Np){var Fp=3553;vp.isDataTexture2DArray&&(Fp=35866),vp.isDataTexture3D&&(Fp=32879),Ep(hp,vp),Bu.activeTexture(33984+Np),Bu.bindTexture(Fp,hp.__webglTexture),_u.pixelStorei(37440,vp.flipY),_u.pixelStorei(37441,vp.premultiplyAlpha),_u.pixelStorei(3317,vp.unpackAlignment);var qp=qu(vp)&&Wu(vp.image)===!1,jp=Ku(vp.image,qp,!1,Gu),Xp=Wu(jp)||Nu,rm=Ou.convert(vp.format),em=Ou.convert(vp.type),lm=_h(vp.internalFormat,rm,em);Ip(Fp,vp,Xp);var Zp,im=vp.mipmaps;if(vp.isDepthTexture)lm=6402,Nu?vp.type===FloatType?lm=36012:vp.type===UnsignedIntType?lm=33190:vp.type===UnsignedInt248Type?lm=35056:lm=33189:vp.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),vp.format===DepthFormat&&lm===6402&&vp.type!==UnsignedShortType&&vp.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),vp.type=UnsignedShortType,em=Ou.convert(vp.type)),vp.format===DepthStencilFormat&&lm===6402&&(lm=34041,vp.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),vp.type=UnsignedInt248Type,em=Ou.convert(vp.type))),Bu.texImage2D(3553,0,lm,jp.width,jp.height,0,rm,em,null);else if(vp.isDataTexture)if(im.length>0&&Xp){for(var Jp=0,am=im.length;Jp<am;Jp++)Zp=im[Jp],Bu.texImage2D(3553,Jp,lm,Zp.width,Zp.height,0,rm,em,Zp.data);vp.generateMipmaps=!1,hp.__maxMipLevel=im.length-1}else Bu.texImage2D(3553,0,lm,jp.width,jp.height,0,rm,em,jp.data),hp.__maxMipLevel=0;else if(vp.isCompressedTexture){for(var Jp=0,am=im.length;Jp<am;Jp++)Zp=im[Jp],vp.format!==RGBAFormat&&vp.format!==RGBFormat?rm!==null?Bu.compressedTexImage2D(3553,Jp,lm,Zp.width,Zp.height,0,Zp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Bu.texImage2D(3553,Jp,lm,Zp.width,Zp.height,0,rm,em,Zp.data);hp.__maxMipLevel=im.length-1}else if(vp.isDataTexture2DArray)Bu.texImage3D(35866,0,lm,jp.width,jp.height,jp.depth,0,rm,em,jp.data),hp.__maxMipLevel=0;else if(vp.isDataTexture3D)Bu.texImage3D(32879,0,lm,jp.width,jp.height,jp.depth,0,rm,em,jp.data),hp.__maxMipLevel=0;else if(im.length>0&&Xp){for(var Jp=0,am=im.length;Jp<am;Jp++)Zp=im[Jp],Bu.texImage2D(3553,Jp,lm,rm,em,Zp);vp.generateMipmaps=!1,hp.__maxMipLevel=im.length-1}else Bu.texImage2D(3553,0,lm,rm,em,jp),hp.__maxMipLevel=0;Yu(vp,Xp)&&Zu(Fp,vp,jp.width,jp.height),hp.__version=vp.version,vp.onUpdate&&vp.onUpdate(vp)}function $p(hp,vp,Np,Fp){var qp=Ou.convert(vp.texture.format),jp=Ou.convert(vp.texture.type),Xp=_h(vp.texture.internalFormat,qp,jp);Bu.texImage2D(Fp,0,Xp,vp.width,vp.height,0,qp,jp,null),_u.bindFramebuffer(36160,hp),_u.framebufferTexture2D(36160,Np,Fp,Ru.get(vp.texture).__webglTexture,0),_u.bindFramebuffer(36160,null)}function kp(hp,vp,Np){if(_u.bindRenderbuffer(36161,hp),vp.depthBuffer&&!vp.stencilBuffer){var Fp=33189;if(Np){var qp=vp.depthTexture;qp&&qp.isDepthTexture&&(qp.type===FloatType?Fp=36012:qp.type===UnsignedIntType&&(Fp=33190));var jp=wp(vp);_u.renderbufferStorageMultisample(36161,jp,Fp,vp.width,vp.height)}else _u.renderbufferStorage(36161,Fp,vp.width,vp.height);_u.framebufferRenderbuffer(36160,36096,36161,hp)}else if(vp.depthBuffer&&vp.stencilBuffer){if(Np){var jp=wp(vp);_u.renderbufferStorageMultisample(36161,jp,35056,vp.width,vp.height)}else _u.renderbufferStorage(36161,34041,vp.width,vp.height);_u.framebufferRenderbuffer(36160,33306,36161,hp)}else{var Xp=Ou.convert(vp.texture.format),rm=Ou.convert(vp.texture.type),Fp=_h(vp.texture.internalFormat,Xp,rm);if(Np){var jp=wp(vp);_u.renderbufferStorageMultisample(36161,jp,Fp,vp.width,vp.height)}else _u.renderbufferStorage(36161,Fp,vp.width,vp.height)}_u.bindRenderbuffer(36161,null)}function Bp(hp,vp){var Np=vp&&vp.isWebGLCubeRenderTarget;if(Np)throw new Error("Depth Texture with cube render targets is not supported");if(_u.bindFramebuffer(36160,hp),!(vp.depthTexture&&vp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Ru.get(vp.depthTexture).__webglTexture||vp.depthTexture.image.width!==vp.width||vp.depthTexture.image.height!==vp.height)&&(vp.depthTexture.image.width=vp.width,vp.depthTexture.image.height=vp.height,vp.depthTexture.needsUpdate=!0),rp(vp.depthTexture,0);var Fp=Ru.get(vp.depthTexture).__webglTexture;if(vp.depthTexture.format===DepthFormat)_u.framebufferTexture2D(36160,36096,3553,Fp,0);else if(vp.depthTexture.format===DepthStencilFormat)_u.framebufferTexture2D(36160,33306,3553,Fp,0);else throw new Error("Unknown depthTexture format")}function fp(hp){var vp=Ru.get(hp),Np=hp.isWebGLCubeRenderTarget===!0;if(hp.depthTexture){if(Np)throw new Error("target.depthTexture not supported in Cube render targets");Bp(vp.__webglFramebuffer,hp)}else if(Np){vp.__webglDepthbuffer=[];for(var Fp=0;Fp<6;Fp++)_u.bindFramebuffer(36160,vp.__webglFramebuffer[Fp]),vp.__webglDepthbuffer[Fp]=_u.createRenderbuffer(),kp(vp.__webglDepthbuffer[Fp],hp,!1)}else _u.bindFramebuffer(36160,vp.__webglFramebuffer),vp.__webglDepthbuffer=_u.createRenderbuffer(),kp(vp.__webglDepthbuffer,hp,!1);_u.bindFramebuffer(36160,null)}function dp(hp){var vp=Ru.get(hp),Np=Ru.get(hp.texture);hp.addEventListener("dispose",ap),Np.__webglTexture=_u.createTexture(),Fu.memory.textures++;var Fp=hp.isWebGLCubeRenderTarget===!0,qp=hp.isWebGLMultisampleRenderTarget===!0,jp=Wu(hp)||Nu;if(Nu&&hp.texture.format===RGBFormat&&(hp.texture.type===FloatType||hp.texture.type===HalfFloatType)&&(hp.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Fp){vp.__webglFramebuffer=[];for(var Xp=0;Xp<6;Xp++)vp.__webglFramebuffer[Xp]=_u.createFramebuffer()}else if(vp.__webglFramebuffer=_u.createFramebuffer(),qp)if(Nu){vp.__webglMultisampledFramebuffer=_u.createFramebuffer(),vp.__webglColorRenderbuffer=_u.createRenderbuffer(),_u.bindRenderbuffer(36161,vp.__webglColorRenderbuffer);var rm=Ou.convert(hp.texture.format),em=Ou.convert(hp.texture.type),lm=_h(hp.texture.internalFormat,rm,em),Zp=wp(hp);_u.renderbufferStorageMultisample(36161,Zp,lm,hp.width,hp.height),_u.bindFramebuffer(36160,vp.__webglMultisampledFramebuffer),_u.framebufferRenderbuffer(36160,36064,36161,vp.__webglColorRenderbuffer),_u.bindRenderbuffer(36161,null),hp.depthBuffer&&(vp.__webglDepthRenderbuffer=_u.createRenderbuffer(),kp(vp.__webglDepthRenderbuffer,hp,!0)),_u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Fp){Bu.bindTexture(34067,Np.__webglTexture),Ip(34067,hp.texture,jp);for(var Xp=0;Xp<6;Xp++)$p(vp.__webglFramebuffer[Xp],hp,36064,34069+Xp);Yu(hp.texture,jp)&&Zu(34067,hp.texture,hp.width,hp.height),Bu.bindTexture(34067,null)}else Bu.bindTexture(3553,Np.__webglTexture),Ip(3553,hp.texture,jp),$p(vp.__webglFramebuffer,hp,36064,3553),Yu(hp.texture,jp)&&Zu(3553,hp.texture,hp.width,hp.height),Bu.bindTexture(3553,null);hp.depthBuffer&&fp(hp)}function bp(hp){var vp=hp.texture,Np=Wu(hp)||Nu;if(Yu(vp,Np)){var Fp=hp.isWebGLCubeRenderTarget?34067:3553,qp=Ru.get(vp).__webglTexture;Bu.bindTexture(Fp,qp),Zu(Fp,vp,hp.width,hp.height),Bu.bindTexture(Fp,null)}}function gp(hp){if(hp.isWebGLMultisampleRenderTarget)if(Nu){var vp=Ru.get(hp);_u.bindFramebuffer(36008,vp.__webglMultisampledFramebuffer),_u.bindFramebuffer(36009,vp.__webglFramebuffer);var Np=hp.width,Fp=hp.height,qp=16384;hp.depthBuffer&&(qp|=256),hp.stencilBuffer&&(qp|=1024),_u.blitFramebuffer(0,0,Np,Fp,0,0,Np,Fp,qp,9728),_u.bindFramebuffer(36160,vp.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function wp(hp){return Nu&&hp.isWebGLMultisampleRenderTarget?Math.min(zu,hp.samples):0}function Sp(hp){var vp=Fu.render.frame;Hu.get(hp)!==vp&&(Hu.set(hp,vp),hp.update())}var Cp=!1,Lp=!1;function zp(hp,vp){hp&&hp.isWebGLRenderTarget&&(Cp===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Cp=!0),hp=hp.texture),rp(hp,vp)}function Dp(hp,vp){hp&&hp.isWebGLCubeRenderTarget&&(Lp===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Lp=!0),hp=hp.texture),hp&&hp.isCubeTexture||Array.isArray(hp.image)&&hp.image.length===6?up(hp,vp):cp(hp,vp)}this.allocateTextureUnit=tp,this.resetTextureUnits=np,this.setTexture2D=rp,this.setTexture2DArray=op,this.setTexture3D=lp,this.setTextureCube=up,this.setTextureCubeDynamic=cp,this.setupRenderTarget=dp,this.updateRenderTargetMipmap=bp,this.updateMultisampleRenderTarget=gp,this.safeSetTexture2D=zp,this.safeSetTextureCube=Dp}function WebGLUtils(_u,$u,Bu){var Ru=Bu.isWebGL2;function Lu(Ou){var Fu;if(Ou===UnsignedByteType)return 5121;if(Ou===UnsignedShort4444Type)return 32819;if(Ou===UnsignedShort5551Type)return 32820;if(Ou===UnsignedShort565Type)return 33635;if(Ou===ByteType)return 5120;if(Ou===ShortType)return 5122;if(Ou===UnsignedShortType)return 5123;if(Ou===IntType)return 5124;if(Ou===UnsignedIntType)return 5125;if(Ou===FloatType)return 5126;if(Ou===HalfFloatType)return Ru?5131:(Fu=$u.get("OES_texture_half_float"),Fu!==null?Fu.HALF_FLOAT_OES:null);if(Ou===AlphaFormat)return 6406;if(Ou===RGBFormat)return 6407;if(Ou===RGBAFormat)return 6408;if(Ou===LuminanceFormat)return 6409;if(Ou===LuminanceAlphaFormat)return 6410;if(Ou===DepthFormat)return 6402;if(Ou===DepthStencilFormat)return 34041;if(Ou===RedFormat)return 6403;if(Ou===RedIntegerFormat)return 36244;if(Ou===RGFormat)return 33319;if(Ou===RGIntegerFormat)return 33320;if(Ou===RGBIntegerFormat)return 36248;if(Ou===RGBAIntegerFormat)return 36249;if(Ou===RGB_S3TC_DXT1_Format||Ou===RGBA_S3TC_DXT1_Format||Ou===RGBA_S3TC_DXT3_Format||Ou===RGBA_S3TC_DXT5_Format)if(Fu=$u.get("WEBGL_compressed_texture_s3tc"),Fu!==null){if(Ou===RGB_S3TC_DXT1_Format)return Fu.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ou===RGBA_S3TC_DXT1_Format)return Fu.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ou===RGBA_S3TC_DXT3_Format)return Fu.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ou===RGBA_S3TC_DXT5_Format)return Fu.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Ou===RGB_PVRTC_4BPPV1_Format||Ou===RGB_PVRTC_2BPPV1_Format||Ou===RGBA_PVRTC_4BPPV1_Format||Ou===RGBA_PVRTC_2BPPV1_Format)if(Fu=$u.get("WEBGL_compressed_texture_pvrtc"),Fu!==null){if(Ou===RGB_PVRTC_4BPPV1_Format)return Fu.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ou===RGB_PVRTC_2BPPV1_Format)return Fu.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ou===RGBA_PVRTC_4BPPV1_Format)return Fu.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ou===RGBA_PVRTC_2BPPV1_Format)return Fu.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Ou===RGB_ETC1_Format)return Fu=$u.get("WEBGL_compressed_texture_etc1"),Fu!==null?Fu.COMPRESSED_RGB_ETC1_WEBGL:null;if((Ou===RGB_ETC2_Format||Ou===RGBA_ETC2_EAC_Format)&&(Fu=$u.get("WEBGL_compressed_texture_etc"),Fu!==null)){if(Ou===RGB_ETC2_Format)return Fu.COMPRESSED_RGB8_ETC2;if(Ou===RGBA_ETC2_EAC_Format)return Fu.COMPRESSED_RGBA8_ETC2_EAC}if(Ou===RGBA_ASTC_4x4_Format||Ou===RGBA_ASTC_5x4_Format||Ou===RGBA_ASTC_5x5_Format||Ou===RGBA_ASTC_6x5_Format||Ou===RGBA_ASTC_6x6_Format||Ou===RGBA_ASTC_8x5_Format||Ou===RGBA_ASTC_8x6_Format||Ou===RGBA_ASTC_8x8_Format||Ou===RGBA_ASTC_10x5_Format||Ou===RGBA_ASTC_10x6_Format||Ou===RGBA_ASTC_10x8_Format||Ou===RGBA_ASTC_10x10_Format||Ou===RGBA_ASTC_12x10_Format||Ou===RGBA_ASTC_12x12_Format||Ou===SRGB8_ALPHA8_ASTC_4x4_Format||Ou===SRGB8_ALPHA8_ASTC_5x4_Format||Ou===SRGB8_ALPHA8_ASTC_5x5_Format||Ou===SRGB8_ALPHA8_ASTC_6x5_Format||Ou===SRGB8_ALPHA8_ASTC_6x6_Format||Ou===SRGB8_ALPHA8_ASTC_8x5_Format||Ou===SRGB8_ALPHA8_ASTC_8x6_Format||Ou===SRGB8_ALPHA8_ASTC_8x8_Format||Ou===SRGB8_ALPHA8_ASTC_10x5_Format||Ou===SRGB8_ALPHA8_ASTC_10x6_Format||Ou===SRGB8_ALPHA8_ASTC_10x8_Format||Ou===SRGB8_ALPHA8_ASTC_10x10_Format||Ou===SRGB8_ALPHA8_ASTC_12x10_Format||Ou===SRGB8_ALPHA8_ASTC_12x12_Format)return Fu=$u.get("WEBGL_compressed_texture_astc"),Fu!==null?Ou:null;if(Ou===RGBA_BPTC_Format)return Fu=$u.get("EXT_texture_compression_bptc"),Fu!==null?Ou:null;if(Ou===UnsignedInt248Type)return Ru?34042:(Fu=$u.get("WEBGL_depth_texture"),Fu!==null?Fu.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Lu}}function ArrayCamera(_u){PerspectiveCamera.call(this),this.cameras=_u||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(_u){return this._targetRay!==null&&this._targetRay.dispatchEvent(_u),this._grip!==null&&this._grip.dispatchEvent(_u),this},disconnect:function(_u){return this.dispatchEvent({type:"disconnected",data:_u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(_u,$u,Bu){var Ru=null,Lu=null,Ou=this._targetRay,Fu=this._grip;return _u&&(Ou!==null&&(Ru=$u.getPose(_u.targetRaySpace,Bu),Ru!==null&&(Ou.matrix.fromArray(Ru.transform.matrix),Ou.matrix.decompose(Ou.position,Ou.rotation,Ou.scale))),Fu!==null&&_u.gripSpace&&(Lu=$u.getPose(_u.gripSpace,Bu),Lu!==null&&(Fu.matrix.fromArray(Lu.transform.matrix),Fu.matrix.decompose(Fu.position,Fu.rotation,Fu.scale)))),Ou!==null&&(Ou.visible=Ru!==null),Fu!==null&&(Fu.visible=Lu!==null),this}});function WebXRManager(_u,$u){var Bu=this,Ru=null,Lu=1,Ou=null,Fu="local-floor",Nu=null,Vu=[],Uu=new Map,Gu=new PerspectiveCamera;Gu.layers.enable(1),Gu.viewport=new Vector4;var zu=new PerspectiveCamera;zu.layers.enable(2),zu.viewport=new Vector4;var Hu=[Gu,zu],ju=new ArrayCamera;ju.layers.enable(1),ju.layers.enable(2);var Qu=null,Xu=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(_f){var np=Vu[_f];return np===void 0&&(np=new WebXRController,Vu[_f]=np),np.getTargetRaySpace()},this.getControllerGrip=function(_f){var np=Vu[_f];return np===void 0&&(np=new WebXRController,Vu[_f]=np),np.getGripSpace()};function Ku(_f){var np=Uu.get(_f.inputSource);np&&np.dispatchEvent({type:_f.type})}function Wu(){Uu.forEach(function(_f,np){_f.disconnect(np)}),Uu.clear(),_u.setFramebuffer(null),_u.setRenderTarget(_u.getRenderTarget()),Ju.stop(),Bu.isPresenting=!1,Bu.dispatchEvent({type:"sessionend"})}function qu(_f){Ou=_f,Ju.setContext(Ru),Ju.start(),Bu.isPresenting=!0,Bu.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(_f){Lu=_f,Bu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(_f){Fu=_f,Bu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Ou},this.getSession=function(){return Ru},this.setSession=function(_f){if(Ru=_f,Ru!==null){Ru.addEventListener("select",Ku),Ru.addEventListener("selectstart",Ku),Ru.addEventListener("selectend",Ku),Ru.addEventListener("squeeze",Ku),Ru.addEventListener("squeezestart",Ku),Ru.addEventListener("squeezeend",Ku),Ru.addEventListener("end",Wu);var np=$u.getContextAttributes();np.xrCompatible!==!0&&$u.makeXRCompatible();var tp={antialias:np.antialias,alpha:np.alpha,depth:np.depth,stencil:np.stencil,framebufferScaleFactor:Lu},rp=new XRWebGLLayer(Ru,$u,tp);Ru.updateRenderState({baseLayer:rp}),Ru.requestReferenceSpace(Fu).then(qu),Ru.addEventListener("inputsourceschange",Yu)}};function Yu(_f){for(var np=Ru.inputSources,tp=0;tp<Vu.length;tp++)Uu.set(np[tp],Vu[tp]);for(var tp=0;tp<_f.removed.length;tp++){var rp=_f.removed[tp],op=Uu.get(rp);op&&(op.dispatchEvent({type:"disconnected",data:rp}),Uu.delete(rp))}for(var tp=0;tp<_f.added.length;tp++){var rp=_f.added[tp],op=Uu.get(rp);op&&op.dispatchEvent({type:"connected",data:rp})}}var Zu=new Vector3,_h=new Vector3;function ep(_f,np,tp){Zu.setFromMatrixPosition(np.matrixWorld),_h.setFromMatrixPosition(tp.matrixWorld);var rp=Zu.distanceTo(_h),op=np.projectionMatrix.elements,lp=tp.projectionMatrix.elements,up=op[14]/(op[10]-1),cp=op[14]/(op[10]+1),Ap=(op[9]+1)/op[5],yp=(op[9]-1)/op[5],Ip=(op[8]-1)/op[0],Ep=(lp[8]+1)/lp[0],Vp=up*Ip,$p=up*Ep,kp=rp/(-Ip+Ep),Bp=kp*-Ip;np.matrixWorld.decompose(_f.position,_f.quaternion,_f.scale),_f.translateX(Bp),_f.translateZ(kp),_f.matrixWorld.compose(_f.position,_f.quaternion,_f.scale),_f.matrixWorldInverse.getInverse(_f.matrixWorld);var fp=up+kp,dp=cp+kp,bp=Vp-Bp,gp=$p+(rp-Bp),wp=Ap*cp/dp*fp,Sp=yp*cp/dp*fp;_f.projectionMatrix.makePerspective(bp,gp,wp,Sp,fp,dp)}function ip(_f,np){np===null?_f.matrixWorld.copy(_f.matrix):_f.matrixWorld.multiplyMatrices(np.matrixWorld,_f.matrix),_f.matrixWorldInverse.getInverse(_f.matrixWorld)}this.getCamera=function(_f){ju.near=zu.near=Gu.near=_f.near,ju.far=zu.far=Gu.far=_f.far,(Qu!==ju.near||Xu!==ju.far)&&(Ru.updateRenderState({depthNear:ju.near,depthFar:ju.far}),Qu=ju.near,Xu=ju.far);var np=_f.parent,tp=ju.cameras;ip(ju,np);for(var rp=0;rp<tp.length;rp++)ip(tp[rp],np);_f.matrixWorld.copy(ju.matrixWorld);for(var op=_f.children,rp=0,lp=op.length;rp<lp;rp++)op[rp].updateMatrixWorld(!0);return tp.length===2?ep(ju,Gu,zu):ju.projectionMatrix.copy(Gu.projectionMatrix),ju};var ap=null;function sp(_f,np){if(Nu=np.getViewerPose(Ou),Nu!==null){var tp=Nu.views,rp=Ru.renderState.baseLayer;_u.setFramebuffer(rp.framebuffer);var op=!1;tp.length!==ju.cameras.length&&(ju.cameras.length=0,op=!0);for(var lp=0;lp<tp.length;lp++){var up=tp[lp],cp=rp.getViewport(up),Ap=Hu[lp];Ap.matrix.fromArray(up.transform.matrix),Ap.projectionMatrix.fromArray(up.projectionMatrix),Ap.viewport.set(cp.x,cp.y,cp.width,cp.height),lp===0&&ju.matrix.copy(Ap.matrix),op===!0&&ju.cameras.push(Ap)}}for(var yp=Ru.inputSources,lp=0;lp<Vu.length;lp++){var Ip=Vu[lp],Ep=yp[lp];Ip.update(Ep,np,Ou)}ap&&ap(_f,np)}var Ju=new WebGLAnimation;Ju.setAnimationLoop(sp),this.setAnimationLoop=function(_f){ap=_f},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(_u){function $u(Wu,qu){Wu.fogColor.value.copy(qu.color),qu.isFog?(Wu.fogNear.value=qu.near,Wu.fogFar.value=qu.far):qu.isFogExp2&&(Wu.fogDensity.value=qu.density)}function Bu(Wu,qu,Yu,Zu,_h){qu.isMeshBasicMaterial?Ru(Wu,qu):qu.isMeshLambertMaterial?(Ru(Wu,qu),Vu(Wu,qu)):qu.isMeshToonMaterial?(Ru(Wu,qu),Gu(Wu,qu)):qu.isMeshPhongMaterial?(Ru(Wu,qu),Uu(Wu,qu)):qu.isMeshStandardMaterial?(Ru(Wu,qu,Yu),qu.isMeshPhysicalMaterial?Hu(Wu,qu,Yu):zu(Wu,qu,Yu)):qu.isMeshMatcapMaterial?(Ru(Wu,qu),ju(Wu,qu)):qu.isMeshDepthMaterial?(Ru(Wu,qu),Qu(Wu,qu)):qu.isMeshDistanceMaterial?(Ru(Wu,qu),Xu(Wu,qu)):qu.isMeshNormalMaterial?(Ru(Wu,qu),Ku(Wu,qu)):qu.isLineBasicMaterial?(Lu(Wu,qu),qu.isLineDashedMaterial&&Ou(Wu,qu)):qu.isPointsMaterial?Fu(Wu,qu,Zu,_h):qu.isSpriteMaterial?Nu(Wu,qu):qu.isShadowMaterial?(Wu.color.value.copy(qu.color),Wu.opacity.value=qu.opacity):qu.isShaderMaterial&&(qu.uniformsNeedUpdate=!1)}function Ru(Wu,qu,Yu){Wu.opacity.value=qu.opacity,qu.color&&Wu.diffuse.value.copy(qu.color),qu.emissive&&Wu.emissive.value.copy(qu.emissive).multiplyScalar(qu.emissiveIntensity),qu.map&&(Wu.map.value=qu.map),qu.alphaMap&&(Wu.alphaMap.value=qu.alphaMap),qu.specularMap&&(Wu.specularMap.value=qu.specularMap);var Zu=qu.envMap||Yu;Zu&&(Wu.envMap.value=Zu,Wu.flipEnvMap.value=Zu.isCubeTexture?-1:1,Wu.reflectivity.value=qu.reflectivity,Wu.refractionRatio.value=qu.refractionRatio,Wu.maxMipLevel.value=_u.get(Zu).__maxMipLevel),qu.lightMap&&(Wu.lightMap.value=qu.lightMap,Wu.lightMapIntensity.value=qu.lightMapIntensity),qu.aoMap&&(Wu.aoMap.value=qu.aoMap,Wu.aoMapIntensity.value=qu.aoMapIntensity);var _h;qu.map?_h=qu.map:qu.specularMap?_h=qu.specularMap:qu.displacementMap?_h=qu.displacementMap:qu.normalMap?_h=qu.normalMap:qu.bumpMap?_h=qu.bumpMap:qu.roughnessMap?_h=qu.roughnessMap:qu.metalnessMap?_h=qu.metalnessMap:qu.alphaMap?_h=qu.alphaMap:qu.emissiveMap&&(_h=qu.emissiveMap),_h!==void 0&&(_h.isWebGLRenderTarget&&(_h=_h.texture),_h.matrixAutoUpdate===!0&&_h.updateMatrix(),Wu.uvTransform.value.copy(_h.matrix));var ep;qu.aoMap?ep=qu.aoMap:qu.lightMap&&(ep=qu.lightMap),ep!==void 0&&(ep.isWebGLRenderTarget&&(ep=ep.texture),ep.matrixAutoUpdate===!0&&ep.updateMatrix(),Wu.uv2Transform.value.copy(ep.matrix))}function Lu(Wu,qu){Wu.diffuse.value.copy(qu.color),Wu.opacity.value=qu.opacity}function Ou(Wu,qu){Wu.dashSize.value=qu.dashSize,Wu.totalSize.value=qu.dashSize+qu.gapSize,Wu.scale.value=qu.scale}function Fu(Wu,qu,Yu,Zu){Wu.diffuse.value.copy(qu.color),Wu.opacity.value=qu.opacity,Wu.size.value=qu.size*Yu,Wu.scale.value=Zu*.5,qu.map&&(Wu.map.value=qu.map),qu.alphaMap&&(Wu.alphaMap.value=qu.alphaMap);var _h;qu.map?_h=qu.map:qu.alphaMap&&(_h=qu.alphaMap),_h!==void 0&&(_h.matrixAutoUpdate===!0&&_h.updateMatrix(),Wu.uvTransform.value.copy(_h.matrix))}function Nu(Wu,qu){Wu.diffuse.value.copy(qu.color),Wu.opacity.value=qu.opacity,Wu.rotation.value=qu.rotation,qu.map&&(Wu.map.value=qu.map),qu.alphaMap&&(Wu.alphaMap.value=qu.alphaMap);var Yu;qu.map?Yu=qu.map:qu.alphaMap&&(Yu=qu.alphaMap),Yu!==void 0&&(Yu.matrixAutoUpdate===!0&&Yu.updateMatrix(),Wu.uvTransform.value.copy(Yu.matrix))}function Vu(Wu,qu){qu.emissiveMap&&(Wu.emissiveMap.value=qu.emissiveMap)}function Uu(Wu,qu){Wu.specular.value.copy(qu.specular),Wu.shininess.value=Math.max(qu.shininess,1e-4),qu.emissiveMap&&(Wu.emissiveMap.value=qu.emissiveMap),qu.bumpMap&&(Wu.bumpMap.value=qu.bumpMap,Wu.bumpScale.value=qu.bumpScale,qu.side===BackSide&&(Wu.bumpScale.value*=-1)),qu.normalMap&&(Wu.normalMap.value=qu.normalMap,Wu.normalScale.value.copy(qu.normalScale),qu.side===BackSide&&Wu.normalScale.value.negate()),qu.displacementMap&&(Wu.displacementMap.value=qu.displacementMap,Wu.displacementScale.value=qu.displacementScale,Wu.displacementBias.value=qu.displacementBias)}function Gu(Wu,qu){Wu.specular.value.copy(qu.specular),Wu.shininess.value=Math.max(qu.shininess,1e-4),qu.gradientMap&&(Wu.gradientMap.value=qu.gradientMap),qu.emissiveMap&&(Wu.emissiveMap.value=qu.emissiveMap),qu.bumpMap&&(Wu.bumpMap.value=qu.bumpMap,Wu.bumpScale.value=qu.bumpScale,qu.side===BackSide&&(Wu.bumpScale.value*=-1)),qu.normalMap&&(Wu.normalMap.value=qu.normalMap,Wu.normalScale.value.copy(qu.normalScale),qu.side===BackSide&&Wu.normalScale.value.negate()),qu.displacementMap&&(Wu.displacementMap.value=qu.displacementMap,Wu.displacementScale.value=qu.displacementScale,Wu.displacementBias.value=qu.displacementBias)}function zu(Wu,qu,Yu){Wu.roughness.value=qu.roughness,Wu.metalness.value=qu.metalness,qu.roughnessMap&&(Wu.roughnessMap.value=qu.roughnessMap),qu.metalnessMap&&(Wu.metalnessMap.value=qu.metalnessMap),qu.emissiveMap&&(Wu.emissiveMap.value=qu.emissiveMap),qu.bumpMap&&(Wu.bumpMap.value=qu.bumpMap,Wu.bumpScale.value=qu.bumpScale,qu.side===BackSide&&(Wu.bumpScale.value*=-1)),qu.normalMap&&(Wu.normalMap.value=qu.normalMap,Wu.normalScale.value.copy(qu.normalScale),qu.side===BackSide&&Wu.normalScale.value.negate()),qu.displacementMap&&(Wu.displacementMap.value=qu.displacementMap,Wu.displacementScale.value=qu.displacementScale,Wu.displacementBias.value=qu.displacementBias),(qu.envMap||Yu)&&(Wu.envMapIntensity.value=qu.envMapIntensity)}function Hu(Wu,qu,Yu){zu(Wu,qu,Yu),Wu.reflectivity.value=qu.reflectivity,Wu.clearcoat.value=qu.clearcoat,Wu.clearcoatRoughness.value=qu.clearcoatRoughness,qu.sheen&&Wu.sheen.value.copy(qu.sheen),qu.clearcoatMap&&(Wu.clearcoatMap.value=qu.clearcoatMap),qu.clearcoatRoughnessMap&&(Wu.clearcoatRoughnessMap.value=qu.clearcoatRoughnessMap),qu.clearcoatNormalMap&&(Wu.clearcoatNormalScale.value.copy(qu.clearcoatNormalScale),Wu.clearcoatNormalMap.value=qu.clearcoatNormalMap,qu.side===BackSide&&Wu.clearcoatNormalScale.value.negate()),Wu.transparency.value=qu.transparency}function ju(Wu,qu){qu.matcap&&(Wu.matcap.value=qu.matcap),qu.bumpMap&&(Wu.bumpMap.value=qu.bumpMap,Wu.bumpScale.value=qu.bumpScale,qu.side===BackSide&&(Wu.bumpScale.value*=-1)),qu.normalMap&&(Wu.normalMap.value=qu.normalMap,Wu.normalScale.value.copy(qu.normalScale),qu.side===BackSide&&Wu.normalScale.value.negate()),qu.displacementMap&&(Wu.displacementMap.value=qu.displacementMap,Wu.displacementScale.value=qu.displacementScale,Wu.displacementBias.value=qu.displacementBias)}function Qu(Wu,qu){qu.displacementMap&&(Wu.displacementMap.value=qu.displacementMap,Wu.displacementScale.value=qu.displacementScale,Wu.displacementBias.value=qu.displacementBias)}function Xu(Wu,qu){qu.displacementMap&&(Wu.displacementMap.value=qu.displacementMap,Wu.displacementScale.value=qu.displacementScale,Wu.displacementBias.value=qu.displacementBias),Wu.referencePosition.value.copy(qu.referencePosition),Wu.nearDistance.value=qu.nearDistance,Wu.farDistance.value=qu.farDistance}function Ku(Wu,qu){qu.bumpMap&&(Wu.bumpMap.value=qu.bumpMap,Wu.bumpScale.value=qu.bumpScale,qu.side===BackSide&&(Wu.bumpScale.value*=-1)),qu.normalMap&&(Wu.normalMap.value=qu.normalMap,Wu.normalScale.value.copy(qu.normalScale),qu.side===BackSide&&Wu.normalScale.value.negate()),qu.displacementMap&&(Wu.displacementMap.value=qu.displacementMap,Wu.displacementScale.value=qu.displacementScale,Wu.displacementBias.value=qu.displacementBias)}return{refreshFogUniforms:$u,refreshMaterialUniforms:Bu}}function WebGLRenderer(_u){_u=_u||{};var $u=_u.canvas!==void 0?_u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Bu=_u.context!==void 0?_u.context:null,Ru=_u.alpha!==void 0?_u.alpha:!1,Lu=_u.depth!==void 0?_u.depth:!0,Ou=_u.stencil!==void 0?_u.stencil:!0,Fu=_u.antialias!==void 0?_u.antialias:!1,Nu=_u.premultipliedAlpha!==void 0?_u.premultipliedAlpha:!0,Vu=_u.preserveDrawingBuffer!==void 0?_u.preserveDrawingBuffer:!1,Uu=_u.powerPreference!==void 0?_u.powerPreference:"default",Gu=_u.failIfMajorPerformanceCaveat!==void 0?_u.failIfMajorPerformanceCaveat:!1,zu=null,Hu=null;this.domElement=$u,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ju=this,Qu=!1,Xu=null,Ku=0,Wu=0,qu=null,Yu=null,Zu=-1,_h={geometry:null,program:null,wireframe:!1},ep=null,ip=null,ap=new Vector4,sp=new Vector4,Ju=null,_f=$u.width,np=$u.height,tp=1,rp=null,op=null,lp=new Vector4(0,0,_f,np),up=new Vector4(0,0,_f,np),cp=!1,Ap=new Frustum,yp=new WebGLClipping,Ip=!1,Ep=!1,Vp=new Matrix4,$p=new Vector3;function kp(){return qu===null?tp:1}var Bp;try{var fp={alpha:Ru,depth:Lu,stencil:Ou,antialias:Fu,premultipliedAlpha:Nu,preserveDrawingBuffer:Vu,powerPreference:Uu,failIfMajorPerformanceCaveat:Gu};if($u.addEventListener("webglcontextlost",Jp,!1),$u.addEventListener("webglcontextrestored",am,!1),Bp=Bu||$u.getContext("webgl",fp)||$u.getContext("experimental-webgl",fp),Bp===null)throw $u.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Bp.getShaderPrecisionFormat===void 0&&(Bp.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_p){throw console.error("THREE.WebGLRenderer: "+_p.message),_p}var dp,bp,gp,wp,Sp,Cp,Lp,zp,Dp,hp,vp,Np,Fp,qp,jp,Xp,rm,em;function lm(){dp=new WebGLExtensions(Bp),bp=new WebGLCapabilities(Bp,dp,_u),bp.isWebGL2===!1&&(dp.get("WEBGL_depth_texture"),dp.get("OES_texture_float"),dp.get("OES_texture_half_float"),dp.get("OES_texture_half_float_linear"),dp.get("OES_standard_derivatives"),dp.get("OES_element_index_uint"),dp.get("ANGLE_instanced_arrays")),dp.get("OES_texture_float_linear"),em=new WebGLUtils(Bp,dp,bp),gp=new WebGLState(Bp,dp,bp),gp.scissor(sp.copy(up).multiplyScalar(tp).floor()),gp.viewport(ap.copy(lp).multiplyScalar(tp).floor()),wp=new WebGLInfo,Sp=new WebGLProperties,Cp=new WebGLTextures(Bp,dp,gp,Sp,bp,em,wp),Lp=new WebGLAttributes(Bp,bp),zp=new WebGLGeometries(Bp,Lp,wp),Dp=new WebGLObjects(Bp,zp,Lp,wp),jp=new WebGLMorphtargets(Bp),hp=new WebGLPrograms(ju,dp,bp),vp=new WebGLMaterials(Sp),Np=new WebGLRenderLists,Fp=new WebGLRenderStates,qp=new WebGLBackground(ju,gp,Dp,Nu),Xp=new WebGLBufferRenderer(Bp,dp,wp,bp),rm=new WebGLIndexedBufferRenderer(Bp,dp,wp,bp),wp.programs=hp.programs,ju.capabilities=bp,ju.extensions=dp,ju.properties=Sp,ju.renderLists=Np,ju.state=gp,ju.info=wp}lm();var Zp=new WebXRManager(ju,Bp);this.xr=Zp;var im=new WebGLShadowMap(ju,Dp,bp.maxTextureSize);this.shadowMap=im,this.getContext=function(){return Bp},this.getContextAttributes=function(){return Bp.getContextAttributes()},this.forceContextLoss=function(){var _p=dp.get("WEBGL_lose_context");_p&&_p.loseContext()},this.forceContextRestore=function(){var _p=dp.get("WEBGL_lose_context");_p&&_p.restoreContext()},this.getPixelRatio=function(){return tp},this.setPixelRatio=function(_p){_p!==void 0&&(tp=_p,this.setSize(_f,np,!1))},this.getSize=function(_p){return _p===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),_p=new Vector2),_p.set(_f,np)},this.setSize=function(_p,Hp,Gp){if(Zp.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}_f=_p,np=Hp,$u.width=Math.floor(_p*tp),$u.height=Math.floor(Hp*tp),Gp!==!1&&($u.style.width=_p+"px",$u.style.height=Hp+"px"),this.setViewport(0,0,_p,Hp)},this.getDrawingBufferSize=function(_p){return _p===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),_p=new Vector2),_p.set(_f*tp,np*tp).floor()},this.setDrawingBufferSize=function(_p,Hp,Gp){_f=_p,np=Hp,tp=Gp,$u.width=Math.floor(_p*Gp),$u.height=Math.floor(Hp*Gp),this.setViewport(0,0,_p,Hp)},this.getCurrentViewport=function(_p){return _p===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),_p=new Vector4),_p.copy(ap)},this.getViewport=function(_p){return _p.copy(lp)},this.setViewport=function(_p,Hp,Gp,Qp){_p.isVector4?lp.set(_p.x,_p.y,_p.z,_p.w):lp.set(_p,Hp,Gp,Qp),gp.viewport(ap.copy(lp).multiplyScalar(tp).floor())},this.getScissor=function(_p){return _p.copy(up)},this.setScissor=function(_p,Hp,Gp,Qp){_p.isVector4?up.set(_p.x,_p.y,_p.z,_p.w):up.set(_p,Hp,Gp,Qp),gp.scissor(sp.copy(up).multiplyScalar(tp).floor())},this.getScissorTest=function(){return cp},this.setScissorTest=function(_p){gp.setScissorTest(cp=_p)},this.setOpaqueSort=function(_p){rp=_p},this.setTransparentSort=function(_p){op=_p},this.getClearColor=function(){return qp.getClearColor()},this.setClearColor=function(){qp.setClearColor.apply(qp,arguments)},this.getClearAlpha=function(){return qp.getClearAlpha()},this.setClearAlpha=function(){qp.setClearAlpha.apply(qp,arguments)},this.clear=function(_p,Hp,Gp){var Qp=0;(_p===void 0||_p)&&(Qp|=16384),(Hp===void 0||Hp)&&(Qp|=256),(Gp===void 0||Gp)&&(Qp|=1024),Bp.clear(Qp)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){$u.removeEventListener("webglcontextlost",Jp,!1),$u.removeEventListener("webglcontextrestored",am,!1),Np.dispose(),Fp.dispose(),Sp.dispose(),Dp.dispose(),Zp.dispose(),Rm.stop()};function Jp(_p){_p.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Qu=!0}function am(){console.log("THREE.WebGLRenderer: Context Restored."),Qu=!1,lm()}function Pp(_p){var Hp=_p.target;Hp.removeEventListener("dispose",Pp),tm(Hp)}function tm(_p){sm(_p),Sp.remove(_p)}function sm(_p){var Hp=Sp.get(_p).program;_p.program=void 0,Hp!==void 0&&hp.releaseProgram(Hp)}function cm(_p,Hp){_p.render(function(Gp){ju.renderBufferImmediate(Gp,Hp)})}this.renderBufferImmediate=function(_p,Hp){gp.initAttributes();var Gp=Sp.get(_p);_p.hasPositions&&!Gp.position&&(Gp.position=Bp.createBuffer()),_p.hasNormals&&!Gp.normal&&(Gp.normal=Bp.createBuffer()),_p.hasUvs&&!Gp.uv&&(Gp.uv=Bp.createBuffer()),_p.hasColors&&!Gp.color&&(Gp.color=Bp.createBuffer());var Qp=Hp.getAttributes();_p.hasPositions&&(Bp.bindBuffer(34962,Gp.position),Bp.bufferData(34962,_p.positionArray,35048),gp.enableAttribute(Qp.position),Bp.vertexAttribPointer(Qp.position,3,5126,!1,0,0)),_p.hasNormals&&(Bp.bindBuffer(34962,Gp.normal),Bp.bufferData(34962,_p.normalArray,35048),gp.enableAttribute(Qp.normal),Bp.vertexAttribPointer(Qp.normal,3,5126,!1,0,0)),_p.hasUvs&&(Bp.bindBuffer(34962,Gp.uv),Bp.bufferData(34962,_p.uvArray,35048),gp.enableAttribute(Qp.uv),Bp.vertexAttribPointer(Qp.uv,2,5126,!1,0,0)),_p.hasColors&&(Bp.bindBuffer(34962,Gp.color),Bp.bufferData(34962,_p.colorArray,35048),gp.enableAttribute(Qp.color),Bp.vertexAttribPointer(Qp.color,3,5126,!1,0,0)),gp.disableUnusedAttributes(),Bp.drawArrays(4,0,_p.count),_p.count=0};var um=new Scene;this.renderBufferDirect=function(_p,Hp,Gp,Qp,om,Am){Hp===null&&(Hp=um);var gm=om.isMesh&&om.matrixWorld.determinant()<0,dm=Dm(_p,Hp,Qp,om);gp.setMaterial(Qp,gm);var pm=!1;(_h.geometry!==Gp.id||_h.program!==dm.id||_h.wireframe!==(Qp.wireframe===!0))&&(_h.geometry=Gp.id,_h.program=dm.id,_h.wireframe=Qp.wireframe===!0,pm=!0),(Qp.morphTargets||Qp.morphNormals)&&(jp.update(om,Gp,Qp,dm),pm=!0),om.isInstancedMesh===!0&&(pm=!0);var bm=Gp.index,Tm=Gp.attributes.position;if(bm===null){if(Tm===void 0||Tm.count===0)return}else if(bm.count===0)return;var pp=1;Qp.wireframe===!0&&(bm=zp.getWireframeAttribute(Gp),pp=2);var Mp,Tp=Xp;bm!==null&&(Mp=Lp.get(bm),Tp=rm,Tp.setIndex(Mp)),pm&&(vm(om,Gp,Qp,dm),bm!==null&&Bp.bindBuffer(34963,Mp.buffer));var Up=bm!==null?bm.count:Tm.count,Kp=Gp.drawRange.start*pp,fm=Gp.drawRange.count*pp,mm=Am!==null?Am.start*pp:0,Bm=Am!==null?Am.count*pp:1/0,hm=Math.max(Kp,mm),Lm=Math.min(Up,Kp+fm,mm+Bm)-1,Um=Math.max(0,Lm-hm+1);if(Um!==0){if(om.isMesh)Qp.wireframe===!0?(gp.setLineWidth(Qp.wireframeLinewidth*kp()),Tp.setMode(1)):Tp.setMode(4);else if(om.isLine){var vy=Qp.linewidth;vy===void 0&&(vy=1),gp.setLineWidth(vy*kp()),om.isLineSegments?Tp.setMode(1):om.isLineLoop?Tp.setMode(2):Tp.setMode(3)}else om.isPoints?Tp.setMode(0):om.isSprite&&Tp.setMode(4);if(om.isInstancedMesh)Tp.renderInstances(Gp,hm,Um,om.count);else if(Gp.isInstancedBufferGeometry){var yy=Math.min(Gp.instanceCount,Gp._maxInstanceCount);Tp.renderInstances(Gp,hm,Um,yy)}else Tp.render(hm,Um)}};function vm(_p,Hp,Gp,Qp){if(!(bp.isWebGL2===!1&&(_p.isInstancedMesh||Hp.isInstancedBufferGeometry)&&dp.get("ANGLE_instanced_arrays")===null)){gp.initAttributes();var om=Hp.attributes,Am=Qp.getAttributes(),gm=Gp.defaultAttributeValues;for(var dm in Am){var pm=Am[dm];if(pm>=0){var bm=om[dm];if(bm!==void 0){var Tm=bm.normalized,pp=bm.itemSize,Mp=Lp.get(bm);if(Mp===void 0)continue;var Tp=Mp.buffer,Up=Mp.type,Kp=Mp.bytesPerElement;if(bm.isInterleavedBufferAttribute){var fm=bm.data,mm=fm.stride,Bm=bm.offset;fm&&fm.isInstancedInterleavedBuffer?(gp.enableAttributeAndDivisor(pm,fm.meshPerAttribute),Hp._maxInstanceCount===void 0&&(Hp._maxInstanceCount=fm.meshPerAttribute*fm.count)):gp.enableAttribute(pm),Bp.bindBuffer(34962,Tp),gp.vertexAttribPointer(pm,pp,Up,Tm,mm*Kp,Bm*Kp)}else bm.isInstancedBufferAttribute?(gp.enableAttributeAndDivisor(pm,bm.meshPerAttribute),Hp._maxInstanceCount===void 0&&(Hp._maxInstanceCount=bm.meshPerAttribute*bm.count)):gp.enableAttribute(pm),Bp.bindBuffer(34962,Tp),gp.vertexAttribPointer(pm,pp,Up,Tm,0,0)}else if(dm==="instanceMatrix"){var Mp=Lp.get(_p.instanceMatrix);if(Mp===void 0)continue;var Tp=Mp.buffer,Up=Mp.type;gp.enableAttributeAndDivisor(pm+0,1),gp.enableAttributeAndDivisor(pm+1,1),gp.enableAttributeAndDivisor(pm+2,1),gp.enableAttributeAndDivisor(pm+3,1),Bp.bindBuffer(34962,Tp),Bp.vertexAttribPointer(pm+0,4,Up,!1,64,0),Bp.vertexAttribPointer(pm+1,4,Up,!1,64,16),Bp.vertexAttribPointer(pm+2,4,Up,!1,64,32),Bp.vertexAttribPointer(pm+3,4,Up,!1,64,48)}else if(gm!==void 0){var hm=gm[dm];if(hm!==void 0)switch(hm.length){case 2:Bp.vertexAttrib2fv(pm,hm);break;case 3:Bp.vertexAttrib3fv(pm,hm);break;case 4:Bp.vertexAttrib4fv(pm,hm);break;default:Bp.vertexAttrib1fv(pm,hm)}}}}gp.disableUnusedAttributes()}}this.compile=function(_p,Hp){Hu=Fp.get(_p,Hp),Hu.init(),_p.traverse(function(Qp){Qp.isLight&&(Hu.pushLight(Qp),Qp.castShadow&&Hu.pushShadow(Qp))}),Hu.setupLights(Hp);const Gp={};_p.traverse(function(Qp){let om=Qp.material;if(om)if(Array.isArray(om))for(let Am=0;Am<om.length;Am++){let gm=om[Am];gm.uuid in Gp||(Sm(gm,_p,Qp),Gp[gm.uuid]=!0)}else om.uuid in Gp||(Sm(om,_p,Qp),Gp[om.uuid]=!0)})};var _m=null;function Mm(_p){Zp.isPresenting||_m&&_m(_p)}var Rm=new WebGLAnimation;Rm.setAnimationLoop(Mm),typeof window!="undefined"&&Rm.setContext(window),this.setAnimationLoop=function(_p){_m=_p,Zp.setAnimationLoop(_p),Rm.start()},this.render=function(_p,Hp){var Gp,Qp;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Gp=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Qp=arguments[3]),!(Hp&&Hp.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Qu){_h.geometry=null,_h.program=null,_h.wireframe=!1,Zu=-1,ep=null,_p.autoUpdate===!0&&_p.updateMatrixWorld(),Hp.parent===null&&Hp.updateMatrixWorld(),Zp.enabled&&Zp.isPresenting&&(Hp=Zp.getCamera(Hp)),_p.onBeforeRender(ju,_p,Hp,Gp||qu),Hu=Fp.get(_p,Hp),Hu.init(),Vp.multiplyMatrices(Hp.projectionMatrix,Hp.matrixWorldInverse),Ap.setFromProjectionMatrix(Vp),Ep=this.localClippingEnabled,Ip=yp.init(this.clippingPlanes,Ep,Hp),zu=Np.get(_p,Hp),zu.init(),wm(_p,Hp,0,ju.sortObjects),zu.finish(),ju.sortObjects===!0&&zu.sort(rp,op),Ip&&yp.beginShadows();var om=Hu.state.shadowsArray;im.render(om,_p,Hp),Hu.setupLights(Hp),Ip&&yp.endShadows(),this.info.autoReset&&this.info.reset(),Gp!==void 0&&this.setRenderTarget(Gp),qp.render(zu,_p,Hp,Qp);var Am=zu.opaque,gm=zu.transparent;if(_p.overrideMaterial){var dm=_p.overrideMaterial;Am.length&&Pm(Am,_p,Hp,dm),gm.length&&Pm(gm,_p,Hp,dm)}else Am.length&&Pm(Am,_p,Hp),gm.length&&Pm(gm,_p,Hp);_p.onAfterRender(ju,_p,Hp),qu!==null&&(Cp.updateRenderTargetMipmap(qu),Cp.updateMultisampleRenderTarget(qu)),gp.buffers.depth.setTest(!0),gp.buffers.depth.setMask(!0),gp.buffers.color.setMask(!0),gp.setPolygonOffset(!1),zu=null,Hu=null}};function wm(_p,Hp,Gp,Qp){if(_p.visible!==!1){var om=_p.layers.test(Hp.layers);if(om){if(_p.isGroup)Gp=_p.renderOrder;else if(_p.isLOD)_p.autoUpdate===!0&&_p.update(Hp);else if(_p.isLight)Hu.pushLight(_p),_p.castShadow&&Hu.pushShadow(_p);else if(_p.isSprite){if(!_p.frustumCulled||Ap.intersectsSprite(_p)){Qp&&$p.setFromMatrixPosition(_p.matrixWorld).applyMatrix4(Vp);var Am=Dp.update(_p),gm=_p.material;gm.visible&&zu.push(_p,Am,gm,Gp,$p.z,null)}}else if(_p.isImmediateRenderObject)Qp&&$p.setFromMatrixPosition(_p.matrixWorld).applyMatrix4(Vp),zu.push(_p,null,_p.material,Gp,$p.z,null);else if((_p.isMesh||_p.isLine||_p.isPoints)&&(_p.isSkinnedMesh&&_p.skeleton.frame!==wp.render.frame&&(_p.skeleton.update(),_p.skeleton.frame=wp.render.frame),!_p.frustumCulled||Ap.intersectsObject(_p))){Qp&&$p.setFromMatrixPosition(_p.matrixWorld).applyMatrix4(Vp);var Am=Dp.update(_p),gm=_p.material;if(Array.isArray(gm))for(var dm=Am.groups,pm=0,bm=dm.length;pm<bm;pm++){var Tm=dm[pm],pp=gm[Tm.materialIndex];pp&&pp.visible&&zu.push(_p,Am,pp,Gp,$p.z,Tm)}else gm.visible&&zu.push(_p,Am,gm,Gp,$p.z,null)}}for(var Mp=_p.children,pm=0,bm=Mp.length;pm<bm;pm++)wm(Mp[pm],Hp,Gp,Qp)}}function Pm(_p,Hp,Gp,Qp){for(var om=0,Am=_p.length;om<Am;om++){var gm=_p[om],dm=gm.object,pm=gm.geometry,bm=Qp===void 0?gm.material:Qp,Tm=gm.group;if(Gp.isArrayCamera){ip=Gp;for(var pp=Gp.cameras,Mp=0,Tp=pp.length;Mp<Tp;Mp++){var Up=pp[Mp];dm.layers.test(Up.layers)&&(gp.viewport(ap.copy(Up.viewport)),Hu.setupLights(Up),Im(dm,Hp,Up,pm,bm,Tm))}}else ip=null,Im(dm,Hp,Gp,pm,bm,Tm)}}function Im(_p,Hp,Gp,Qp,om,Am){if(_p.onBeforeRender(ju,Hp,Gp,Qp,om,Am),Hu=Fp.get(Hp,ip||Gp),_p.modelViewMatrix.multiplyMatrices(Gp.matrixWorldInverse,_p.matrixWorld),_p.normalMatrix.getNormalMatrix(_p.modelViewMatrix),_p.isImmediateRenderObject){var gm=Dm(Gp,Hp,om,_p);gp.setMaterial(om),_h.geometry=null,_h.program=null,_h.wireframe=!1,cm(_p,gm)}else ju.renderBufferDirect(Gp,Hp,Qp,om,_p,Am);_p.onAfterRender(ju,Hp,Gp,Qp,om,Am),Hu=Fp.get(Hp,ip||Gp)}function Sm(_p,Hp,Gp){var Qp=Sp.get(_p),om=Hu.state.lights,Am=Hu.state.shadowsArray,gm=om.state.version,dm=hp.getParameters(_p,om.state,Am,Hp,yp.numPlanes,yp.numIntersection,Gp),pm=hp.getProgramCacheKey(dm),bm=Qp.program,Tm=!0;if(bm===void 0)_p.addEventListener("dispose",Pp);else if(bm.cacheKey!==pm)sm(_p);else if(Qp.lightsStateVersion!==gm)Qp.lightsStateVersion=gm,Tm=!1;else{if(dm.shaderID!==void 0)return;Tm=!1}Tm&&(bm=hp.acquireProgram(dm,pm),Qp.program=bm,Qp.uniforms=dm.uniforms,Qp.outputEncoding=dm.outputEncoding,_p.program=bm);var pp=bm.getAttributes();if(_p.morphTargets){_p.numSupportedMorphTargets=0;for(var Mp=0;Mp<ju.maxMorphTargets;Mp++)pp["morphTarget"+Mp]>=0&&_p.numSupportedMorphTargets++}if(_p.morphNormals){_p.numSupportedMorphNormals=0;for(var Mp=0;Mp<ju.maxMorphNormals;Mp++)pp["morphNormal"+Mp]>=0&&_p.numSupportedMorphNormals++}var Tp=Qp.uniforms;(!_p.isShaderMaterial&&!_p.isRawShaderMaterial||_p.clipping===!0)&&(Qp.numClippingPlanes=yp.numPlanes,Qp.numIntersection=yp.numIntersection,Tp.clippingPlanes=yp.uniform),Qp.environment=_p.isMeshStandardMaterial?Hp.environment:null,Qp.fog=Hp.fog,Qp.needsLights=Cm(_p),Qp.lightsStateVersion=gm,Qp.needsLights&&(Tp.ambientLightColor.value=om.state.ambient,Tp.lightProbe.value=om.state.probe,Tp.directionalLights.value=om.state.directional,Tp.directionalLightShadows.value=om.state.directionalShadow,Tp.spotLights.value=om.state.spot,Tp.spotLightShadows.value=om.state.spotShadow,Tp.rectAreaLights.value=om.state.rectArea,Tp.pointLights.value=om.state.point,Tp.pointLightShadows.value=om.state.pointShadow,Tp.hemisphereLights.value=om.state.hemi,Tp.directionalShadowMap.value=om.state.directionalShadowMap,Tp.directionalShadowMatrix.value=om.state.directionalShadowMatrix,Tp.spotShadowMap.value=om.state.spotShadowMap,Tp.spotShadowMatrix.value=om.state.spotShadowMatrix,Tp.pointShadowMap.value=om.state.pointShadowMap,Tp.pointShadowMatrix.value=om.state.pointShadowMatrix);var Up=Qp.program.getUniforms(),Kp=WebGLUniforms.seqWithValue(Up.seq,Tp);Qp.uniformsList=Kp}function Dm(_p,Hp,Gp,Qp){Cp.resetTextureUnits();var om=Hp.fog,Am=Gp.isMeshStandardMaterial?Hp.environment:null,gm=qu===null?ju.outputEncoding:qu.texture.encoding,dm=Sp.get(Gp),pm=Hu.state.lights;if(Ip&&(Ep||_p!==ep)){var bm=_p===ep&&Gp.id===Zu;yp.setState(Gp.clippingPlanes,Gp.clipIntersection,Gp.clipShadows,_p,dm,bm)}Gp.version===dm.__version?(dm.program===void 0||Gp.fog&&dm.fog!==om||dm.environment!==Am||dm.needsLights&&dm.lightsStateVersion!==pm.state.version||dm.numClippingPlanes!==void 0&&(dm.numClippingPlanes!==yp.numPlanes||dm.numIntersection!==yp.numIntersection)||dm.outputEncoding!==gm)&&Sm(Gp,Hp,Qp):(Sm(Gp,Hp,Qp),dm.__version=Gp.version);var Tm=!1,pp=!1,Mp=!1,Tp=dm.program,Up=Tp.getUniforms(),Kp=dm.uniforms;if(gp.useProgram(Tp.program)&&(Tm=!0,pp=!0,Mp=!0),Gp.id!==Zu&&(Zu=Gp.id,pp=!0),Tm||ep!==_p){if(Up.setValue(Bp,"projectionMatrix",_p.projectionMatrix),bp.logarithmicDepthBuffer&&Up.setValue(Bp,"logDepthBufFC",2/(Math.log(_p.far+1)/Math.LN2)),ep!==_p&&(ep=_p,pp=!0,Mp=!0),Gp.isShaderMaterial||Gp.isMeshPhongMaterial||Gp.isMeshToonMaterial||Gp.isMeshStandardMaterial||Gp.envMap){var fm=Up.map.cameraPosition;fm!==void 0&&fm.setValue(Bp,$p.setFromMatrixPosition(_p.matrixWorld))}(Gp.isMeshPhongMaterial||Gp.isMeshToonMaterial||Gp.isMeshLambertMaterial||Gp.isMeshBasicMaterial||Gp.isMeshStandardMaterial||Gp.isShaderMaterial)&&Up.setValue(Bp,"isOrthographic",_p.isOrthographicCamera===!0),(Gp.isMeshPhongMaterial||Gp.isMeshToonMaterial||Gp.isMeshLambertMaterial||Gp.isMeshBasicMaterial||Gp.isMeshStandardMaterial||Gp.isShaderMaterial||Gp.skinning)&&Up.setValue(Bp,"viewMatrix",_p.matrixWorldInverse)}if(Gp.skinning){Up.setOptional(Bp,Qp,"bindMatrix"),Up.setOptional(Bp,Qp,"bindMatrixInverse");var mm=Qp.skeleton;if(mm){var Bm=mm.bones;if(bp.floatVertexTextures){if(mm.boneTexture===void 0){var hm=Math.sqrt(Bm.length*4);hm=MathUtils.ceilPowerOfTwo(hm),hm=Math.max(hm,4);var Lm=new Float32Array(hm*hm*4);Lm.set(mm.boneMatrices);var Um=new DataTexture(Lm,hm,hm,RGBAFormat,FloatType);mm.boneMatrices=Lm,mm.boneTexture=Um,mm.boneTextureSize=hm}Up.setValue(Bp,"boneTexture",mm.boneTexture,Cp),Up.setValue(Bp,"boneTextureSize",mm.boneTextureSize)}else Up.setOptional(Bp,mm,"boneMatrices")}}return(pp||dm.receiveShadow!==Qp.receiveShadow)&&(dm.receiveShadow=Qp.receiveShadow,Up.setValue(Bp,"receiveShadow",Qp.receiveShadow)),pp&&(Up.setValue(Bp,"toneMappingExposure",ju.toneMappingExposure),Up.setValue(Bp,"toneMappingWhitePoint",ju.toneMappingWhitePoint),dm.needsLights&&Vm(Kp,Mp),om&&Gp.fog&&vp.refreshFogUniforms(Kp,om),vp.refreshMaterialUniforms(Kp,Gp,Am,tp,np),Kp.ltc_1!==void 0&&(Kp.ltc_1.value=UniformsLib.LTC_1),Kp.ltc_2!==void 0&&(Kp.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(Bp,dm.uniformsList,Kp,Cp)),Gp.isShaderMaterial&&Gp.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Bp,dm.uniformsList,Kp,Cp),Gp.uniformsNeedUpdate=!1),Gp.isSpriteMaterial&&Up.setValue(Bp,"center",Qp.center),Up.setValue(Bp,"modelViewMatrix",Qp.modelViewMatrix),Up.setValue(Bp,"normalMatrix",Qp.normalMatrix),Up.setValue(Bp,"modelMatrix",Qp.matrixWorld),Tp}function Vm(_p,Hp){_p.ambientLightColor.needsUpdate=Hp,_p.lightProbe.needsUpdate=Hp,_p.directionalLights.needsUpdate=Hp,_p.directionalLightShadows.needsUpdate=Hp,_p.pointLights.needsUpdate=Hp,_p.pointLightShadows.needsUpdate=Hp,_p.spotLights.needsUpdate=Hp,_p.spotLightShadows.needsUpdate=Hp,_p.rectAreaLights.needsUpdate=Hp,_p.hemisphereLights.needsUpdate=Hp}function Cm(_p){return _p.isMeshLambertMaterial||_p.isMeshToonMaterial||_p.isMeshPhongMaterial||_p.isMeshStandardMaterial||_p.isShadowMaterial||_p.isShaderMaterial&&_p.lights===!0}this.setFramebuffer=function(_p){Xu!==_p&&qu===null&&Bp.bindFramebuffer(36160,_p),Xu=_p},this.getActiveCubeFace=function(){return Ku},this.getActiveMipmapLevel=function(){return Wu},this.getRenderTarget=function(){return qu},this.setRenderTarget=function(_p,Hp,Gp){qu=_p,Ku=Hp,Wu=Gp,_p&&Sp.get(_p).__webglFramebuffer===void 0&&Cp.setupRenderTarget(_p);var Qp=Xu,om=!1;if(_p){var Am=Sp.get(_p).__webglFramebuffer;_p.isWebGLCubeRenderTarget?(Qp=Am[Hp||0],om=!0):_p.isWebGLMultisampleRenderTarget?Qp=Sp.get(_p).__webglMultisampledFramebuffer:Qp=Am,ap.copy(_p.viewport),sp.copy(_p.scissor),Ju=_p.scissorTest}else ap.copy(lp).multiplyScalar(tp).floor(),sp.copy(up).multiplyScalar(tp).floor(),Ju=cp;if(Yu!==Qp&&(Bp.bindFramebuffer(36160,Qp),Yu=Qp),gp.viewport(ap),gp.scissor(sp),gp.setScissorTest(Ju),om){var gm=Sp.get(_p.texture);Bp.framebufferTexture2D(36160,36064,34069+(Hp||0),gm.__webglTexture,Gp||0)}},this.readRenderTargetPixels=function(_p,Hp,Gp,Qp,om,Am,gm){if(!(_p&&_p.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var dm=Sp.get(_p).__webglFramebuffer;if(_p.isWebGLCubeRenderTarget&&gm!==void 0&&(dm=dm[gm]),dm){var pm=!1;dm!==Yu&&(Bp.bindFramebuffer(36160,dm),pm=!0);try{var bm=_p.texture,Tm=bm.format,pp=bm.type;if(Tm!==RGBAFormat&&em.convert(Tm)!==Bp.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(pp!==UnsignedByteType&&em.convert(pp)!==Bp.getParameter(35738)&&!(pp===FloatType&&(bp.isWebGL2||dp.get("OES_texture_float")||dp.get("WEBGL_color_buffer_float")))&&!(pp===HalfFloatType&&(bp.isWebGL2?dp.get("EXT_color_buffer_float"):dp.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Bp.checkFramebufferStatus(36160)===36053?Hp>=0&&Hp<=_p.width-Qp&&Gp>=0&&Gp<=_p.height-om&&Bp.readPixels(Hp,Gp,Qp,om,em.convert(Tm),em.convert(pp),Am):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{pm&&Bp.bindFramebuffer(36160,Yu)}}},this.copyFramebufferToTexture=function(_p,Hp,Gp){Gp===void 0&&(Gp=0);var Qp=Math.pow(2,-Gp),om=Math.floor(Hp.image.width*Qp),Am=Math.floor(Hp.image.height*Qp),gm=em.convert(Hp.format);Cp.setTexture2D(Hp,0),Bp.copyTexImage2D(3553,Gp,gm,_p.x,_p.y,om,Am,0),gp.unbindTexture()},this.copyTextureToTexture=function(_p,Hp,Gp,Qp){Qp===void 0&&(Qp=0);var om=Hp.image.width,Am=Hp.image.height,gm=em.convert(Gp.format),dm=em.convert(Gp.type);Cp.setTexture2D(Gp,0),Hp.isDataTexture?Bp.texSubImage2D(3553,Qp,_p.x,_p.y,om,Am,gm,dm,Hp.image.data):Hp.isCompressedTexture?Bp.compressedTexSubImage2D(3553,Qp,_p.x,_p.y,Hp.mipmaps[0].width,Hp.mipmaps[0].height,gm,Hp.mipmaps[0].data):Bp.texSubImage2D(3553,Qp,_p.x,_p.y,gm,dm,Hp.image),Qp===0&&Gp.generateMipmaps&&Bp.generateMipmap(3553),gp.unbindTexture()},this.initTexture=function(_p){Cp.setTexture2D(_p,0),gp.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(_u,$u){this.name="",this.color=new Color(_u),this.density=$u!==void 0?$u:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(_u,$u,Bu){this.name="",this.color=new Color(_u),this.near=$u!==void 0?$u:1,this.far=Bu!==void 0?Bu:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(_u,$u){this.array=_u,this.stride=$u,this.count=_u!==void 0?_u.length/$u:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.array=new _u.array.constructor(_u.array),this.count=_u.count,this.stride=_u.stride,this.usage=_u.usage,this},copyAt:function(_u,$u,Bu){_u*=this.stride,Bu*=$u.stride;for(var Ru=0,Lu=this.stride;Ru<Lu;Ru++)this.array[_u+Ru]=$u.array[Bu+Ru];return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(_u){return this.onUploadCallback=_u,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(_u,$u,Bu,Ru){this.name="",this.data=_u,this.itemSize=$u,this.offset=Bu,this.normalized=Ru===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(_u){for(var $u=0,Bu=this.data.count;$u<Bu;$u++)_vector$6.x=this.getX($u),_vector$6.y=this.getY($u),_vector$6.z=this.getZ($u),_vector$6.applyMatrix4(_u),this.setXYZ($u,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset]=$u,this},setY:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+1]=$u,this},setZ:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+2]=$u,this},setW:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+3]=$u,this},getX:function(_u){return this.data.array[_u*this.data.stride+this.offset]},getY:function(_u){return this.data.array[_u*this.data.stride+this.offset+1]},getZ:function(_u){return this.data.array[_u*this.data.stride+this.offset+2]},getW:function(_u){return this.data.array[_u*this.data.stride+this.offset+3]},setXY:function(_u,$u,Bu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Bu,this},setXYZ:function(_u,$u,Bu,Ru){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Bu,this.data.array[_u+2]=Ru,this},setXYZW:function(_u,$u,Bu,Ru,Lu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Bu,this.data.array[_u+2]=Ru,this.data.array[_u+3]=Lu,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Bu=$u*this.data.stride+this.offset,Ru=0;Ru<this.itemSize;Ru++)_u.push(this.data.array[Bu+Ru]);return new BufferAttribute(new this.array.constructor(_u),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Bu=$u*this.data.stride+this.offset,Ru=0;Ru<this.itemSize;Ru++)_u.push(this.data.array[Bu+Ru]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:_u,normalized:this.normalized}}});function SpriteMaterial(_u){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(_u)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.rotation=_u.rotation,this.sizeAttenuation=_u.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(_u){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var $u=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Bu=new InterleavedBuffer($u,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Bu,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Bu,2,3,!1))}this.geometry=_geometry,this.material=_u!==void 0?_u:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(_u,$u){_u.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_u.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_u.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_u.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var Bu=this.material.rotation,Ru,Lu;Bu!==0&&(Lu=Math.cos(Bu),Ru=Math.sin(Bu));var Ou=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Ou,_worldScale,Ru,Lu),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Ou,_worldScale,Ru,Lu),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Ou,_worldScale,Ru,Lu),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Fu=_u.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Fu===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Ou,_worldScale,Ru,Lu),_uvB$1.set(0,1),Fu=_u.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Fu===null))){var Nu=_u.ray.origin.distanceTo(_intersectPoint);Nu<_u.near||Nu>_u.far||$u.push({distance:Nu,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.center!==void 0&&this.center.copy(_u.center),this}});function transformVertex(_u,$u,Bu,Ru,Lu,Ou){_alignedPosition.subVectors(_u,Bu).addScalar(.5).multiply(Ru),Lu!==void 0?(_rotatedPosition.x=Ou*_alignedPosition.x-Lu*_alignedPosition.y,_rotatedPosition.y=Lu*_alignedPosition.x+Ou*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_u.copy($u),_u.x+=_rotatedPosition.x,_u.y+=_rotatedPosition.y,_u.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(_u){Object3D.prototype.copy.call(this,_u,!1);for(var $u=_u.levels,Bu=0,Ru=$u.length;Bu<Ru;Bu++){var Lu=$u[Bu];this.addLevel(Lu.object.clone(),Lu.distance)}return this.autoUpdate=_u.autoUpdate,this},addLevel:function(_u,$u){$u===void 0&&($u=0),$u=Math.abs($u);for(var Bu=this.levels,Ru=0;Ru<Bu.length&&!($u<Bu[Ru].distance);Ru++);return Bu.splice(Ru,0,{distance:$u,object:_u}),this.add(_u),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(_u){var $u=this.levels;if($u.length>0){for(var Bu=1,Ru=$u.length;Bu<Ru&&!(_u<$u[Bu].distance);Bu++);return $u[Bu-1].object}return null},raycast:function(_u,$u){var Bu=this.levels;if(Bu.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Ru=_u.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Ru).raycast(_u,$u)}},update:function(_u){var $u=this.levels;if($u.length>1){_v1$4.setFromMatrixPosition(_u.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var Bu=_v1$4.distanceTo(_v2$2)/_u.zoom;$u[0].object.visible=!0;for(var Ru=1,Lu=$u.length;Ru<Lu&&Bu>=$u[Ru].distance;Ru++)$u[Ru-1].object.visible=!1,$u[Ru].object.visible=!0;for(this._currentLevel=Ru-1;Ru<Lu;Ru++)$u[Ru].object.visible=!1}},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);this.autoUpdate===!1&&($u.object.autoUpdate=!1),$u.object.levels=[];for(var Bu=this.levels,Ru=0,Lu=Bu.length;Ru<Lu;Ru++){var Ou=Bu[Ru];$u.object.levels.push({object:Ou.object.uuid,distance:Ou.distance})}return $u}});function SkinnedMesh(_u,$u){_u&&_u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,_u,$u),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(_u,$u){this.skeleton=_u,$u===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),$u=this.matrixWorld),this.bindMatrix.copy($u),this.bindMatrixInverse.getInverse($u)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var _u=new Vector4,$u=this.geometry.attributes.skinWeight,Bu=0,Ru=$u.count;Bu<Ru;Bu++){_u.x=$u.getX(Bu),_u.y=$u.getY(Bu),_u.z=$u.getZ(Bu),_u.w=$u.getW(Bu);var Lu=1/_u.manhattanLength();Lu!==1/0?_u.multiplyScalar(Lu):_u.set(1,0,0,0),$u.setXYZW(Bu,_u.x,_u.y,_u.z,_u.w)}},updateMatrixWorld:function(_u){Mesh.prototype.updateMatrixWorld.call(this,_u),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var _u=new Vector3,$u=new Vector4,Bu=new Vector4,Ru=new Vector3,Lu=new Matrix4;return function(Ou,Fu){var Nu=this.skeleton,Vu=this.geometry;$u.fromBufferAttribute(Vu.attributes.skinIndex,Ou),Bu.fromBufferAttribute(Vu.attributes.skinWeight,Ou),_u.fromBufferAttribute(Vu.attributes.position,Ou).applyMatrix4(this.bindMatrix),Fu.set(0,0,0);for(var Uu=0;Uu<4;Uu++){var Gu=Bu.getComponent(Uu);if(Gu!==0){var zu=$u.getComponent(Uu);Lu.multiplyMatrices(Nu.bones[zu].matrixWorld,Nu.boneInverses[zu]),Fu.addScaledVector(Ru.copy(_u).applyMatrix4(Lu),Gu)}}return Fu.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(_u,$u){if(_u=_u||[],this.bones=_u.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,$u===void 0)this.calculateInverses();else if(this.bones.length===$u.length)this.boneInverses=$u.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var Bu=0,Ru=this.bones.length;Bu<Ru;Bu++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var _u=0,$u=this.bones.length;_u<$u;_u++){var Bu=new Matrix4;this.bones[_u]&&Bu.getInverse(this.bones[_u].matrixWorld),this.boneInverses.push(Bu)}},pose:function(){var _u,$u,Bu;for($u=0,Bu=this.bones.length;$u<Bu;$u++)_u=this.bones[$u],_u&&_u.matrixWorld.getInverse(this.boneInverses[$u]);for($u=0,Bu=this.bones.length;$u<Bu;$u++)_u=this.bones[$u],_u&&(_u.parent&&_u.parent.isBone?(_u.matrix.getInverse(_u.parent.matrixWorld),_u.matrix.multiply(_u.matrixWorld)):_u.matrix.copy(_u.matrixWorld),_u.matrix.decompose(_u.position,_u.quaternion,_u.scale))},update:function(){for(var _u=this.bones,$u=this.boneInverses,Bu=this.boneMatrices,Ru=this.boneTexture,Lu=0,Ou=_u.length;Lu<Ou;Lu++){var Fu=_u[Lu]?_u[Lu].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Fu,$u[Lu]),_offsetMatrix.toArray(Bu,Lu*16)}Ru!==void 0&&(Ru.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(_u){for(var $u=0,Bu=this.bones.length;$u<Bu;$u++){var Ru=this.bones[$u];if(Ru.name===_u)return Ru}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(_u,$u,Bu){Mesh.call(this,_u,$u),this.instanceMatrix=new BufferAttribute(new Float32Array(Bu*16),16),this.count=Bu,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(_u,$u){$u.fromArray(this.instanceMatrix.array,_u*16)},raycast:function(_u,$u){var Bu=this.matrixWorld,Ru=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Lu=0;Lu<Ru;Lu++){this.getMatrixAt(Lu,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Bu,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(_u,_instanceIntersects);for(var Ou=0,Fu=_instanceIntersects.length;Ou<Fu;Ou++){var Nu=_instanceIntersects[Ou];Nu.instanceId=Lu,Nu.object=this,$u.push(Nu)}_instanceIntersects.length=0}},setMatrixAt:function(_u,$u){$u.toArray(this.instanceMatrix.array,_u*16)},updateMorphTargets:function(){}});function LineBasicMaterial(_u){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(_u)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.linewidth=_u.linewidth,this.linecap=_u.linecap,this.linejoin=_u.linejoin,this.morphTargets=_u.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(_u,$u,Bu){Bu===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Bu=[0],Ru=1,Lu=$u.count;Ru<Lu;Ru++)_start.fromBufferAttribute($u,Ru-1),_end.fromBufferAttribute($u,Ru),Bu[Ru]=Bu[Ru-1],Bu[Ru]+=_start.distanceTo(_end);_u.setAttribute("lineDistance",new Float32BufferAttribute(Bu,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry){var Ou=_u.vertices,Bu=_u.lineDistances;Bu[0]=0;for(var Ru=1,Lu=Ou.length;Ru<Lu;Ru++)Bu[Ru]=Bu[Ru-1],Bu[Ru]+=Ou[Ru-1].distanceTo(Ou[Ru])}return this},raycast:function(_u,$u){var Bu=this.geometry,Ru=this.matrixWorld,Lu=_u.params.Line.threshold;if(Bu.boundingSphere===null&&Bu.computeBoundingSphere(),_sphere$2.copy(Bu.boundingSphere),_sphere$2.applyMatrix4(Ru),_sphere$2.radius+=Lu,_u.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Ru),_ray$1.copy(_u.ray).applyMatrix4(_inverseMatrix$1);var Ou=Lu/((this.scale.x+this.scale.y+this.scale.z)/3),Fu=Ou*Ou,Nu=new Vector3,Vu=new Vector3,Uu=new Vector3,Gu=new Vector3,zu=this&&this.isLineSegments?2:1;if(Bu.isBufferGeometry){var Hu=Bu.index,ju=Bu.attributes,Qu=ju.position.array;if(Hu!==null)for(var Xu=Hu.array,Ku=0,Wu=Xu.length-1;Ku<Wu;Ku+=zu){var qu=Xu[Ku],Yu=Xu[Ku+1];Nu.fromArray(Qu,qu*3),Vu.fromArray(Qu,Yu*3);var Zu=_ray$1.distanceSqToSegment(Nu,Vu,Gu,Uu);if(!(Zu>Fu)){Gu.applyMatrix4(this.matrixWorld);var _h=_u.ray.origin.distanceTo(Gu);_h<_u.near||_h>_u.far||$u.push({distance:_h,point:Uu.clone().applyMatrix4(this.matrixWorld),index:Ku,face:null,faceIndex:null,object:this})}}else for(var Ku=0,Wu=Qu.length/3-1;Ku<Wu;Ku+=zu){Nu.fromArray(Qu,3*Ku),Vu.fromArray(Qu,3*Ku+3);var Zu=_ray$1.distanceSqToSegment(Nu,Vu,Gu,Uu);if(!(Zu>Fu)){Gu.applyMatrix4(this.matrixWorld);var _h=_u.ray.origin.distanceTo(Gu);_h<_u.near||_h>_u.far||$u.push({distance:_h,point:Uu.clone().applyMatrix4(this.matrixWorld),index:Ku,face:null,faceIndex:null,object:this})}}}else if(Bu.isGeometry)for(var ep=Bu.vertices,ip=ep.length,Ku=0;Ku<ip-1;Ku+=zu){var Zu=_ray$1.distanceSqToSegment(ep[Ku],ep[Ku+1],Gu,Uu);if(!(Zu>Fu)){Gu.applyMatrix4(this.matrixWorld);var _h=_u.ray.origin.distanceTo(Gu);_h<_u.near||_h>_u.far||$u.push({distance:_h,point:Uu.clone().applyMatrix4(this.matrixWorld),index:Ku,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var _u=this.geometry,$u,Bu,Ru;if(_u.isBufferGeometry){var Lu=_u.morphAttributes,Ou=Object.keys(Lu);if(Ou.length>0){var Fu=Lu[Ou[0]];if(Fu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Bu=Fu.length;$u<Bu;$u++)Ru=Fu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ru]=$u}}else{var Nu=_u.morphTargets;Nu!==void 0&&Nu.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(_u,$u){Line$1.call(this,_u,$u),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Bu=[],Ru=0,Lu=$u.count;Ru<Lu;Ru+=2)_start$1.fromBufferAttribute($u,Ru),_end$1.fromBufferAttribute($u,Ru+1),Bu[Ru]=Ru===0?0:Bu[Ru-1],Bu[Ru+1]=Bu[Ru]+_start$1.distanceTo(_end$1);_u.setAttribute("lineDistance",new Float32BufferAttribute(Bu,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry)for(var Ou=_u.vertices,Bu=_u.lineDistances,Ru=0,Lu=Ou.length;Ru<Lu;Ru+=2)_start$1.copy(Ou[Ru]),_end$1.copy(Ou[Ru+1]),Bu[Ru]=Ru===0?0:Bu[Ru-1],Bu[Ru+1]=Bu[Ru]+_start$1.distanceTo(_end$1);return this}});function LineLoop(_u,$u){Line$1.call(this,_u,$u),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(_u){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(_u)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.size=_u.size,this.sizeAttenuation=_u.sizeAttenuation,this.morphTargets=_u.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(_u,$u){Object3D.call(this),this.type="Points",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(_u,$u){var Bu=this.geometry,Ru=this.matrixWorld,Lu=_u.params.Points.threshold;if(Bu.boundingSphere===null&&Bu.computeBoundingSphere(),_sphere$3.copy(Bu.boundingSphere),_sphere$3.applyMatrix4(Ru),_sphere$3.radius+=Lu,_u.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Ru),_ray$2.copy(_u.ray).applyMatrix4(_inverseMatrix$2);var Ou=Lu/((this.scale.x+this.scale.y+this.scale.z)/3),Fu=Ou*Ou;if(Bu.isBufferGeometry){var Nu=Bu.index,Vu=Bu.attributes,Uu=Vu.position.array;if(Nu!==null)for(var Gu=Nu.array,zu=0,Hu=Gu.length;zu<Hu;zu++){var ju=Gu[zu];_position$1.fromArray(Uu,ju*3),testPoint(_position$1,ju,Fu,Ru,_u,$u,this)}else for(var zu=0,Qu=Uu.length/3;zu<Qu;zu++)_position$1.fromArray(Uu,zu*3),testPoint(_position$1,zu,Fu,Ru,_u,$u,this)}else for(var Xu=Bu.vertices,zu=0,Qu=Xu.length;zu<Qu;zu++)testPoint(Xu[zu],zu,Fu,Ru,_u,$u,this)}},updateMorphTargets:function(){var _u=this.geometry,$u,Bu,Ru;if(_u.isBufferGeometry){var Lu=_u.morphAttributes,Ou=Object.keys(Lu);if(Ou.length>0){var Fu=Lu[Ou[0]];if(Fu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Bu=Fu.length;$u<Bu;$u++)Ru=Fu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ru]=$u}}else{var Nu=_u.morphTargets;Nu!==void 0&&Nu.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(_u,$u,Bu,Ru,Lu,Ou,Fu){var Nu=_ray$2.distanceSqToPoint(_u);if(Nu<Bu){var Vu=new Vector3;_ray$2.closestPointToPoint(_u,Vu),Vu.applyMatrix4(Ru);var Uu=Lu.ray.origin.distanceTo(Vu);if(Uu<Lu.near||Uu>Lu.far)return;Ou.push({distance:Uu,distanceToRay:Math.sqrt(Nu),point:Vu,index:$u,face:null,object:Fu})}}function VideoTexture(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu){Texture.call(this,_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu),this.format=Fu!==void 0?Fu:RGBFormat,this.minFilter=Ou!==void 0?Ou:LinearFilter,this.magFilter=Lu!==void 0?Lu:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var _u=this.image;_u.readyState>=_u.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu){Texture.call(this,null,Ou,Fu,Nu,Vu,Uu,Ru,Lu,Gu,zu),this.image={width:$u,height:Bu},this.mipmaps=_u,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu){Texture.call(this,_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu){if(Uu=Uu!==void 0?Uu:DepthFormat,Uu!==DepthFormat&&Uu!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Bu===void 0&&Uu===DepthFormat&&(Bu=UnsignedShortType),Bu===void 0&&Uu===DepthStencilFormat&&(Bu=UnsignedInt248Type),Texture.call(this,null,Ru,Lu,Ou,Fu,Nu,Uu,Bu,Vu),this.image={width:_u,height:$u},this.magFilter=Fu!==void 0?Fu:NearestFilter,this.minFilter=Nu!==void 0?Nu:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(_u){BufferGeometry.call(this),this.type="WireframeGeometry";var $u=[],Bu,Ru,Lu,Ou,Fu,Nu=[0,0],Vu={},Uu,Gu,zu,Hu,ju=["a","b","c"],Qu;if(_u&&_u.isGeometry){var Xu=_u.faces;for(Bu=0,Lu=Xu.length;Bu<Lu;Bu++){var Ku=Xu[Bu];for(Ru=0;Ru<3;Ru++)Gu=Ku[ju[Ru]],zu=Ku[ju[(Ru+1)%3]],Nu[0]=Math.min(Gu,zu),Nu[1]=Math.max(Gu,zu),Hu=Nu[0]+","+Nu[1],Vu[Hu]===void 0&&(Vu[Hu]={index1:Nu[0],index2:Nu[1]})}for(Hu in Vu)Uu=Vu[Hu],Qu=_u.vertices[Uu.index1],$u.push(Qu.x,Qu.y,Qu.z),Qu=_u.vertices[Uu.index2],$u.push(Qu.x,Qu.y,Qu.z)}else if(_u&&_u.isBufferGeometry){var Wu,qu,Yu,Zu,_h,ep,ip,ap;if(Qu=new Vector3,_u.index!==null){for(Wu=_u.attributes.position,qu=_u.index,Yu=_u.groups,Yu.length===0&&(Yu=[{start:0,count:qu.count,materialIndex:0}]),Ou=0,Fu=Yu.length;Ou<Fu;++Ou)for(Zu=Yu[Ou],_h=Zu.start,ep=Zu.count,Bu=_h,Lu=_h+ep;Bu<Lu;Bu+=3)for(Ru=0;Ru<3;Ru++)Gu=qu.getX(Bu+Ru),zu=qu.getX(Bu+(Ru+1)%3),Nu[0]=Math.min(Gu,zu),Nu[1]=Math.max(Gu,zu),Hu=Nu[0]+","+Nu[1],Vu[Hu]===void 0&&(Vu[Hu]={index1:Nu[0],index2:Nu[1]});for(Hu in Vu)Uu=Vu[Hu],Qu.fromBufferAttribute(Wu,Uu.index1),$u.push(Qu.x,Qu.y,Qu.z),Qu.fromBufferAttribute(Wu,Uu.index2),$u.push(Qu.x,Qu.y,Qu.z)}else for(Wu=_u.attributes.position,Bu=0,Lu=Wu.count/3;Bu<Lu;Bu++)for(Ru=0;Ru<3;Ru++)ip=3*Bu+Ru,Qu.fromBufferAttribute(Wu,ip),$u.push(Qu.x,Qu.y,Qu.z),ap=3*Bu+(Ru+1)%3,Qu.fromBufferAttribute(Wu,ap),$u.push(Qu.x,Qu.y,Qu.z)}this.setAttribute("position",new Float32BufferAttribute($u,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(_u,$u,Bu){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:_u,slices:$u,stacks:Bu},this.fromBufferGeometry(new ParametricBufferGeometry(_u,$u,Bu)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(_u,$u,Bu){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:_u,slices:$u,stacks:Bu};var Ru=[],Lu=[],Ou=[],Fu=[],Nu=1e-5,Vu=new Vector3,Uu=new Vector3,Gu=new Vector3,zu=new Vector3,Hu=new Vector3,ju,Qu;_u.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var Xu=$u+1;for(ju=0;ju<=Bu;ju++){var Ku=ju/Bu;for(Qu=0;Qu<=$u;Qu++){var Wu=Qu/$u;_u(Wu,Ku,Uu),Lu.push(Uu.x,Uu.y,Uu.z),Wu-Nu>=0?(_u(Wu-Nu,Ku,Gu),zu.subVectors(Uu,Gu)):(_u(Wu+Nu,Ku,Gu),zu.subVectors(Gu,Uu)),Ku-Nu>=0?(_u(Wu,Ku-Nu,Gu),Hu.subVectors(Uu,Gu)):(_u(Wu,Ku+Nu,Gu),Hu.subVectors(Gu,Uu)),Vu.crossVectors(zu,Hu).normalize(),Ou.push(Vu.x,Vu.y,Vu.z),Fu.push(Wu,Ku)}}for(ju=0;ju<Bu;ju++)for(Qu=0;Qu<$u;Qu++){var qu=ju*Xu+Qu,Yu=ju*Xu+Qu+1,Zu=(ju+1)*Xu+Qu+1,_h=(ju+1)*Xu+Qu;Ru.push(qu,Yu,_h),Ru.push(Yu,Zu,_h)}this.setIndex(Ru),this.setAttribute("position",new Float32BufferAttribute(Lu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ou,3)),this.setAttribute("uv",new Float32BufferAttribute(Fu,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(_u,$u,Bu,Ru){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:_u,indices:$u,radius:Bu,detail:Ru},this.fromBufferGeometry(new PolyhedronBufferGeometry(_u,$u,Bu,Ru)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(_u,$u,Bu,Ru){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:_u,indices:$u,radius:Bu,detail:Ru},Bu=Bu||1,Ru=Ru||0;var Lu=[],Ou=[];Fu(Ru),Vu(Bu),Uu(),this.setAttribute("position",new Float32BufferAttribute(Lu,3)),this.setAttribute("normal",new Float32BufferAttribute(Lu.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2)),Ru===0?this.computeVertexNormals():this.normalizeNormals();function Fu(Wu){for(var qu=new Vector3,Yu=new Vector3,Zu=new Vector3,_h=0;_h<$u.length;_h+=3)Hu($u[_h+0],qu),Hu($u[_h+1],Yu),Hu($u[_h+2],Zu),Nu(qu,Yu,Zu,Wu)}function Nu(Wu,qu,Yu,Zu){var _h=Math.pow(2,Zu),ep=[],ip,ap;for(ip=0;ip<=_h;ip++){ep[ip]=[];var sp=Wu.clone().lerp(Yu,ip/_h),Ju=qu.clone().lerp(Yu,ip/_h),_f=_h-ip;for(ap=0;ap<=_f;ap++)ap===0&&ip===_h?ep[ip][ap]=sp:ep[ip][ap]=sp.clone().lerp(Ju,ap/_f)}for(ip=0;ip<_h;ip++)for(ap=0;ap<2*(_h-ip)-1;ap++){var np=Math.floor(ap/2);ap%2===0?(zu(ep[ip][np+1]),zu(ep[ip+1][np]),zu(ep[ip][np])):(zu(ep[ip][np+1]),zu(ep[ip+1][np+1]),zu(ep[ip+1][np]))}}function Vu(Wu){for(var qu=new Vector3,Yu=0;Yu<Lu.length;Yu+=3)qu.x=Lu[Yu+0],qu.y=Lu[Yu+1],qu.z=Lu[Yu+2],qu.normalize().multiplyScalar(Wu),Lu[Yu+0]=qu.x,Lu[Yu+1]=qu.y,Lu[Yu+2]=qu.z}function Uu(){for(var Wu=new Vector3,qu=0;qu<Lu.length;qu+=3){Wu.x=Lu[qu+0],Wu.y=Lu[qu+1],Wu.z=Lu[qu+2];var Yu=Xu(Wu)/2/Math.PI+.5,Zu=Ku(Wu)/Math.PI+.5;Ou.push(Yu,1-Zu)}ju(),Gu()}function Gu(){for(var Wu=0;Wu<Ou.length;Wu+=6){var qu=Ou[Wu+0],Yu=Ou[Wu+2],Zu=Ou[Wu+4],_h=Math.max(qu,Yu,Zu),ep=Math.min(qu,Yu,Zu);_h>.9&&ep<.1&&(qu<.2&&(Ou[Wu+0]+=1),Yu<.2&&(Ou[Wu+2]+=1),Zu<.2&&(Ou[Wu+4]+=1))}}function zu(Wu){Lu.push(Wu.x,Wu.y,Wu.z)}function Hu(Wu,qu){var Yu=Wu*3;qu.x=_u[Yu+0],qu.y=_u[Yu+1],qu.z=_u[Yu+2]}function ju(){for(var Wu=new Vector3,qu=new Vector3,Yu=new Vector3,Zu=new Vector3,_h=new Vector2,ep=new Vector2,ip=new Vector2,ap=0,sp=0;ap<Lu.length;ap+=9,sp+=6){Wu.set(Lu[ap+0],Lu[ap+1],Lu[ap+2]),qu.set(Lu[ap+3],Lu[ap+4],Lu[ap+5]),Yu.set(Lu[ap+6],Lu[ap+7],Lu[ap+8]),_h.set(Ou[sp+0],Ou[sp+1]),ep.set(Ou[sp+2],Ou[sp+3]),ip.set(Ou[sp+4],Ou[sp+5]),Zu.copy(Wu).add(qu).add(Yu).divideScalar(3);var Ju=Xu(Zu);Qu(_h,sp+0,Wu,Ju),Qu(ep,sp+2,qu,Ju),Qu(ip,sp+4,Yu,Ju)}}function Qu(Wu,qu,Yu,Zu){Zu<0&&Wu.x===1&&(Ou[qu]=Wu.x-1),Yu.x===0&&Yu.z===0&&(Ou[qu]=Zu/2/Math.PI+.5)}function Xu(Wu){return Math.atan2(Wu.z,-Wu.x)}function Ku(Wu){return Math.atan2(-Wu.y,Math.sqrt(Wu.x*Wu.x+Wu.z*Wu.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(_u,$u){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new TetrahedronBufferGeometry(_u,$u)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(_u,$u){var Bu=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Ru=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,Bu,Ru,_u,$u),this.type="TetrahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(_u,$u){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new OctahedronBufferGeometry(_u,$u)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(_u,$u){var Bu=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Ru=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,Bu,Ru,_u,$u),this.type="OctahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(_u,$u){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new IcosahedronBufferGeometry(_u,$u)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(_u,$u){var Bu=(1+Math.sqrt(5))/2,Ru=[-1,Bu,0,1,Bu,0,-1,-Bu,0,1,-Bu,0,0,-1,Bu,0,1,Bu,0,-1,-Bu,0,1,-Bu,Bu,0,-1,Bu,0,1,-Bu,0,-1,-Bu,0,1],Lu=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Ru,Lu,_u,$u),this.type="IcosahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(_u,$u){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new DodecahedronBufferGeometry(_u,$u)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(_u,$u){var Bu=(1+Math.sqrt(5))/2,Ru=1/Bu,Lu=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Ru,-Bu,0,-Ru,Bu,0,Ru,-Bu,0,Ru,Bu,-Ru,-Bu,0,-Ru,Bu,0,Ru,-Bu,0,Ru,Bu,0,-Bu,0,-Ru,Bu,0,-Ru,-Bu,0,Ru,Bu,0,Ru],Ou=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Lu,Ou,_u,$u),this.type="DodecahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(_u,$u,Bu,Ru,Lu,Ou){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Bu,radialSegments:Ru,closed:Lu},Ou!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Fu=new TubeBufferGeometry(_u,$u,Bu,Ru,Lu);this.tangents=Fu.tangents,this.normals=Fu.normals,this.binormals=Fu.binormals,this.fromBufferGeometry(Fu),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(_u,$u,Bu,Ru,Lu){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Bu,radialSegments:Ru,closed:Lu},$u=$u||64,Bu=Bu||1,Ru=Ru||8,Lu=Lu||!1;var Ou=_u.computeFrenetFrames($u,Lu);this.tangents=Ou.tangents,this.normals=Ou.normals,this.binormals=Ou.binormals;var Fu=new Vector3,Nu=new Vector3,Vu=new Vector2,Uu=new Vector3,Gu,zu,Hu=[],ju=[],Qu=[],Xu=[];Ku(),this.setIndex(Xu),this.setAttribute("position",new Float32BufferAttribute(Hu,3)),this.setAttribute("normal",new Float32BufferAttribute(ju,3)),this.setAttribute("uv",new Float32BufferAttribute(Qu,2));function Ku(){for(Gu=0;Gu<$u;Gu++)Wu(Gu);Wu(Lu===!1?$u:0),Yu(),qu()}function Wu(Zu){Uu=_u.getPointAt(Zu/$u,Uu);var _h=Ou.normals[Zu],ep=Ou.binormals[Zu];for(zu=0;zu<=Ru;zu++){var ip=zu/Ru*Math.PI*2,ap=Math.sin(ip),sp=-Math.cos(ip);Nu.x=sp*_h.x+ap*ep.x,Nu.y=sp*_h.y+ap*ep.y,Nu.z=sp*_h.z+ap*ep.z,Nu.normalize(),ju.push(Nu.x,Nu.y,Nu.z),Fu.x=Uu.x+Bu*Nu.x,Fu.y=Uu.y+Bu*Nu.y,Fu.z=Uu.z+Bu*Nu.z,Hu.push(Fu.x,Fu.y,Fu.z)}}function qu(){for(zu=1;zu<=$u;zu++)for(Gu=1;Gu<=Ru;Gu++){var Zu=(Ru+1)*(zu-1)+(Gu-1),_h=(Ru+1)*zu+(Gu-1),ep=(Ru+1)*zu+Gu,ip=(Ru+1)*(zu-1)+Gu;Xu.push(Zu,_h,ip),Xu.push(_h,ep,ip)}}function Yu(){for(Gu=0;Gu<=$u;Gu++)for(zu=0;zu<=Ru;zu++)Vu.x=Gu/$u,Vu.y=zu/Ru,Qu.push(Vu.x,Vu.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.path=this.parameters.path.toJSON(),_u};function TorusKnotGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Bu,radialSegments:Ru,p:Lu,q:Ou},Fu!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(_u,$u,Bu,Ru,Lu,Ou)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(_u,$u,Bu,Ru,Lu,Ou){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Bu,radialSegments:Ru,p:Lu,q:Ou},_u=_u||1,$u=$u||.4,Bu=Math.floor(Bu)||64,Ru=Math.floor(Ru)||8,Lu=Lu||2,Ou=Ou||3;var Fu=[],Nu=[],Vu=[],Uu=[],Gu,zu,Hu=new Vector3,ju=new Vector3,Qu=new Vector3,Xu=new Vector3,Ku=new Vector3,Wu=new Vector3,qu=new Vector3;for(Gu=0;Gu<=Bu;++Gu){var Yu=Gu/Bu*Lu*Math.PI*2;for(_f(Yu,Lu,Ou,_u,Qu),_f(Yu+.01,Lu,Ou,_u,Xu),Wu.subVectors(Xu,Qu),qu.addVectors(Xu,Qu),Ku.crossVectors(Wu,qu),qu.crossVectors(Ku,Wu),Ku.normalize(),qu.normalize(),zu=0;zu<=Ru;++zu){var Zu=zu/Ru*Math.PI*2,_h=-$u*Math.cos(Zu),ep=$u*Math.sin(Zu);Hu.x=Qu.x+(_h*qu.x+ep*Ku.x),Hu.y=Qu.y+(_h*qu.y+ep*Ku.y),Hu.z=Qu.z+(_h*qu.z+ep*Ku.z),Nu.push(Hu.x,Hu.y,Hu.z),ju.subVectors(Hu,Qu).normalize(),Vu.push(ju.x,ju.y,ju.z),Uu.push(Gu/Bu),Uu.push(zu/Ru)}}for(zu=1;zu<=Bu;zu++)for(Gu=1;Gu<=Ru;Gu++){var ip=(Ru+1)*(zu-1)+(Gu-1),ap=(Ru+1)*zu+(Gu-1),sp=(Ru+1)*zu+Gu,Ju=(Ru+1)*(zu-1)+Gu;Fu.push(ip,ap,Ju),Fu.push(ap,sp,Ju)}this.setIndex(Fu),this.setAttribute("position",new Float32BufferAttribute(Nu,3)),this.setAttribute("normal",new Float32BufferAttribute(Vu,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2));function _f(np,tp,rp,op,lp){var up=Math.cos(np),cp=Math.sin(np),Ap=rp/tp*np,yp=Math.cos(Ap);lp.x=op*(2+yp)*.5*up,lp.y=op*(2+yp)*cp*.5,lp.z=op*Math.sin(Ap)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(_u,$u,Bu,Ru,Lu){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Bu,tubularSegments:Ru,arc:Lu},this.fromBufferGeometry(new TorusBufferGeometry(_u,$u,Bu,Ru,Lu)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(_u,$u,Bu,Ru,Lu){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Bu,tubularSegments:Ru,arc:Lu},_u=_u||1,$u=$u||.4,Bu=Math.floor(Bu)||8,Ru=Math.floor(Ru)||6,Lu=Lu||Math.PI*2;var Ou=[],Fu=[],Nu=[],Vu=[],Uu=new Vector3,Gu=new Vector3,zu=new Vector3,Hu,ju;for(Hu=0;Hu<=Bu;Hu++)for(ju=0;ju<=Ru;ju++){var Qu=ju/Ru*Lu,Xu=Hu/Bu*Math.PI*2;Gu.x=(_u+$u*Math.cos(Xu))*Math.cos(Qu),Gu.y=(_u+$u*Math.cos(Xu))*Math.sin(Qu),Gu.z=$u*Math.sin(Xu),Fu.push(Gu.x,Gu.y,Gu.z),Uu.x=_u*Math.cos(Qu),Uu.y=_u*Math.sin(Qu),zu.subVectors(Gu,Uu).normalize(),Nu.push(zu.x,zu.y,zu.z),Vu.push(ju/Ru),Vu.push(Hu/Bu)}for(Hu=1;Hu<=Bu;Hu++)for(ju=1;ju<=Ru;ju++){var Ku=(Ru+1)*Hu+ju-1,Wu=(Ru+1)*(Hu-1)+ju-1,qu=(Ru+1)*(Hu-1)+ju,Yu=(Ru+1)*Hu+ju;Ou.push(Ku,Wu,Yu),Ou.push(Wu,qu,Yu)}this.setIndex(Ou),this.setAttribute("position",new Float32BufferAttribute(Fu,3)),this.setAttribute("normal",new Float32BufferAttribute(Nu,3)),this.setAttribute("uv",new Float32BufferAttribute(Vu,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(_u,$u,Bu){Bu=Bu||2;var Ru=$u&&$u.length,Lu=Ru?$u[0]*Bu:_u.length,Ou=linkedList(_u,0,Lu,Bu,!0),Fu=[];if(!Ou||Ou.next===Ou.prev)return Fu;var Nu,Vu,Uu,Gu,zu,Hu,ju;if(Ru&&(Ou=eliminateHoles(_u,$u,Ou,Bu)),_u.length>80*Bu){Nu=Uu=_u[0],Vu=Gu=_u[1];for(var Qu=Bu;Qu<Lu;Qu+=Bu)zu=_u[Qu],Hu=_u[Qu+1],zu<Nu&&(Nu=zu),Hu<Vu&&(Vu=Hu),zu>Uu&&(Uu=zu),Hu>Gu&&(Gu=Hu);ju=Math.max(Uu-Nu,Gu-Vu),ju=ju!==0?1/ju:0}return earcutLinked(Ou,Fu,Bu,Nu,Vu,ju),Fu}};function linkedList(_u,$u,Bu,Ru,Lu){var Ou,Fu;if(Lu===signedArea(_u,$u,Bu,Ru)>0)for(Ou=$u;Ou<Bu;Ou+=Ru)Fu=insertNode(Ou,_u[Ou],_u[Ou+1],Fu);else for(Ou=Bu-Ru;Ou>=$u;Ou-=Ru)Fu=insertNode(Ou,_u[Ou],_u[Ou+1],Fu);return Fu&&equals(Fu,Fu.next)&&(removeNode(Fu),Fu=Fu.next),Fu}function filterPoints(_u,$u){if(!_u)return _u;$u||($u=_u);var Bu=_u,Ru;do if(Ru=!1,!Bu.steiner&&(equals(Bu,Bu.next)||area(Bu.prev,Bu,Bu.next)===0)){if(removeNode(Bu),Bu=$u=Bu.prev,Bu===Bu.next)break;Ru=!0}else Bu=Bu.next;while(Ru||Bu!==$u);return $u}function earcutLinked(_u,$u,Bu,Ru,Lu,Ou,Fu){if(!!_u){!Fu&&Ou&&indexCurve(_u,Ru,Lu,Ou);for(var Nu=_u,Vu,Uu;_u.prev!==_u.next;){if(Vu=_u.prev,Uu=_u.next,Ou?isEarHashed(_u,Ru,Lu,Ou):isEar(_u)){$u.push(Vu.i/Bu),$u.push(_u.i/Bu),$u.push(Uu.i/Bu),removeNode(_u),_u=Uu.next,Nu=Uu.next;continue}if(_u=Uu,_u===Nu){Fu?Fu===1?(_u=cureLocalIntersections(filterPoints(_u),$u,Bu),earcutLinked(_u,$u,Bu,Ru,Lu,Ou,2)):Fu===2&&splitEarcut(_u,$u,Bu,Ru,Lu,Ou):earcutLinked(filterPoints(_u),$u,Bu,Ru,Lu,Ou,1);break}}}}function isEar(_u){var $u=_u.prev,Bu=_u,Ru=_u.next;if(area($u,Bu,Ru)>=0)return!1;for(var Lu=_u.next.next;Lu!==_u.prev;){if(pointInTriangle($u.x,$u.y,Bu.x,Bu.y,Ru.x,Ru.y,Lu.x,Lu.y)&&area(Lu.prev,Lu,Lu.next)>=0)return!1;Lu=Lu.next}return!0}function isEarHashed(_u,$u,Bu,Ru){var Lu=_u.prev,Ou=_u,Fu=_u.next;if(area(Lu,Ou,Fu)>=0)return!1;for(var Nu=Lu.x<Ou.x?Lu.x<Fu.x?Lu.x:Fu.x:Ou.x<Fu.x?Ou.x:Fu.x,Vu=Lu.y<Ou.y?Lu.y<Fu.y?Lu.y:Fu.y:Ou.y<Fu.y?Ou.y:Fu.y,Uu=Lu.x>Ou.x?Lu.x>Fu.x?Lu.x:Fu.x:Ou.x>Fu.x?Ou.x:Fu.x,Gu=Lu.y>Ou.y?Lu.y>Fu.y?Lu.y:Fu.y:Ou.y>Fu.y?Ou.y:Fu.y,zu=zOrder(Nu,Vu,$u,Bu,Ru),Hu=zOrder(Uu,Gu,$u,Bu,Ru),ju=_u.prevZ,Qu=_u.nextZ;ju&&ju.z>=zu&&Qu&&Qu.z<=Hu;){if(ju!==_u.prev&&ju!==_u.next&&pointInTriangle(Lu.x,Lu.y,Ou.x,Ou.y,Fu.x,Fu.y,ju.x,ju.y)&&area(ju.prev,ju,ju.next)>=0||(ju=ju.prevZ,Qu!==_u.prev&&Qu!==_u.next&&pointInTriangle(Lu.x,Lu.y,Ou.x,Ou.y,Fu.x,Fu.y,Qu.x,Qu.y)&&area(Qu.prev,Qu,Qu.next)>=0))return!1;Qu=Qu.nextZ}for(;ju&&ju.z>=zu;){if(ju!==_u.prev&&ju!==_u.next&&pointInTriangle(Lu.x,Lu.y,Ou.x,Ou.y,Fu.x,Fu.y,ju.x,ju.y)&&area(ju.prev,ju,ju.next)>=0)return!1;ju=ju.prevZ}for(;Qu&&Qu.z<=Hu;){if(Qu!==_u.prev&&Qu!==_u.next&&pointInTriangle(Lu.x,Lu.y,Ou.x,Ou.y,Fu.x,Fu.y,Qu.x,Qu.y)&&area(Qu.prev,Qu,Qu.next)>=0)return!1;Qu=Qu.nextZ}return!0}function cureLocalIntersections(_u,$u,Bu){var Ru=_u;do{var Lu=Ru.prev,Ou=Ru.next.next;!equals(Lu,Ou)&&intersects(Lu,Ru,Ru.next,Ou)&&locallyInside(Lu,Ou)&&locallyInside(Ou,Lu)&&($u.push(Lu.i/Bu),$u.push(Ru.i/Bu),$u.push(Ou.i/Bu),removeNode(Ru),removeNode(Ru.next),Ru=_u=Ou),Ru=Ru.next}while(Ru!==_u);return filterPoints(Ru)}function splitEarcut(_u,$u,Bu,Ru,Lu,Ou){var Fu=_u;do{for(var Nu=Fu.next.next;Nu!==Fu.prev;){if(Fu.i!==Nu.i&&isValidDiagonal(Fu,Nu)){var Vu=splitPolygon(Fu,Nu);Fu=filterPoints(Fu,Fu.next),Vu=filterPoints(Vu,Vu.next),earcutLinked(Fu,$u,Bu,Ru,Lu,Ou),earcutLinked(Vu,$u,Bu,Ru,Lu,Ou);return}Nu=Nu.next}Fu=Fu.next}while(Fu!==_u)}function eliminateHoles(_u,$u,Bu,Ru){var Lu=[],Ou,Fu,Nu,Vu,Uu;for(Ou=0,Fu=$u.length;Ou<Fu;Ou++)Nu=$u[Ou]*Ru,Vu=Ou<Fu-1?$u[Ou+1]*Ru:_u.length,Uu=linkedList(_u,Nu,Vu,Ru,!1),Uu===Uu.next&&(Uu.steiner=!0),Lu.push(getLeftmost(Uu));for(Lu.sort(compareX),Ou=0;Ou<Lu.length;Ou++)eliminateHole(Lu[Ou],Bu),Bu=filterPoints(Bu,Bu.next);return Bu}function compareX(_u,$u){return _u.x-$u.x}function eliminateHole(_u,$u){if($u=findHoleBridge(_u,$u),$u){var Bu=splitPolygon($u,_u);filterPoints($u,$u.next),filterPoints(Bu,Bu.next)}}function findHoleBridge(_u,$u){var Bu=$u,Ru=_u.x,Lu=_u.y,Ou=-1/0,Fu;do{if(Lu<=Bu.y&&Lu>=Bu.next.y&&Bu.next.y!==Bu.y){var Nu=Bu.x+(Lu-Bu.y)*(Bu.next.x-Bu.x)/(Bu.next.y-Bu.y);if(Nu<=Ru&&Nu>Ou){if(Ou=Nu,Nu===Ru){if(Lu===Bu.y)return Bu;if(Lu===Bu.next.y)return Bu.next}Fu=Bu.x<Bu.next.x?Bu:Bu.next}}Bu=Bu.next}while(Bu!==$u);if(!Fu)return null;if(Ru===Ou)return Fu;var Vu=Fu,Uu=Fu.x,Gu=Fu.y,zu=1/0,Hu;Bu=Fu;do Ru>=Bu.x&&Bu.x>=Uu&&Ru!==Bu.x&&pointInTriangle(Lu<Gu?Ru:Ou,Lu,Uu,Gu,Lu<Gu?Ou:Ru,Lu,Bu.x,Bu.y)&&(Hu=Math.abs(Lu-Bu.y)/(Ru-Bu.x),locallyInside(Bu,_u)&&(Hu<zu||Hu===zu&&(Bu.x>Fu.x||Bu.x===Fu.x&&sectorContainsSector(Fu,Bu)))&&(Fu=Bu,zu=Hu)),Bu=Bu.next;while(Bu!==Vu);return Fu}function sectorContainsSector(_u,$u){return area(_u.prev,_u,$u.prev)<0&&area($u.next,_u,_u.next)<0}function indexCurve(_u,$u,Bu,Ru){var Lu=_u;do Lu.z===null&&(Lu.z=zOrder(Lu.x,Lu.y,$u,Bu,Ru)),Lu.prevZ=Lu.prev,Lu.nextZ=Lu.next,Lu=Lu.next;while(Lu!==_u);Lu.prevZ.nextZ=null,Lu.prevZ=null,sortLinked(Lu)}function sortLinked(_u){var $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu=1;do{for(Bu=_u,_u=null,Ou=null,Fu=0;Bu;){for(Fu++,Ru=Bu,Nu=0,$u=0;$u<Uu&&(Nu++,Ru=Ru.nextZ,!!Ru);$u++);for(Vu=Uu;Nu>0||Vu>0&&Ru;)Nu!==0&&(Vu===0||!Ru||Bu.z<=Ru.z)?(Lu=Bu,Bu=Bu.nextZ,Nu--):(Lu=Ru,Ru=Ru.nextZ,Vu--),Ou?Ou.nextZ=Lu:_u=Lu,Lu.prevZ=Ou,Ou=Lu;Bu=Ru}Ou.nextZ=null,Uu*=2}while(Fu>1);return _u}function zOrder(_u,$u,Bu,Ru,Lu){return _u=32767*(_u-Bu)*Lu,$u=32767*($u-Ru)*Lu,_u=(_u|_u<<8)&16711935,_u=(_u|_u<<4)&252645135,_u=(_u|_u<<2)&858993459,_u=(_u|_u<<1)&1431655765,$u=($u|$u<<8)&16711935,$u=($u|$u<<4)&252645135,$u=($u|$u<<2)&858993459,$u=($u|$u<<1)&1431655765,_u|$u<<1}function getLeftmost(_u){var $u=_u,Bu=_u;do($u.x<Bu.x||$u.x===Bu.x&&$u.y<Bu.y)&&(Bu=$u),$u=$u.next;while($u!==_u);return Bu}function pointInTriangle(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){return(Lu-Fu)*($u-Nu)-(_u-Fu)*(Ou-Nu)>=0&&(_u-Fu)*(Ru-Nu)-(Bu-Fu)*($u-Nu)>=0&&(Bu-Fu)*(Ou-Nu)-(Lu-Fu)*(Ru-Nu)>=0}function isValidDiagonal(_u,$u){return _u.next.i!==$u.i&&_u.prev.i!==$u.i&&!intersectsPolygon(_u,$u)&&(locallyInside(_u,$u)&&locallyInside($u,_u)&&middleInside(_u,$u)&&(area(_u.prev,_u,$u.prev)||area(_u,$u.prev,$u))||equals(_u,$u)&&area(_u.prev,_u,_u.next)>0&&area($u.prev,$u,$u.next)>0)}function area(_u,$u,Bu){return($u.y-_u.y)*(Bu.x-$u.x)-($u.x-_u.x)*(Bu.y-$u.y)}function equals(_u,$u){return _u.x===$u.x&&_u.y===$u.y}function intersects(_u,$u,Bu,Ru){var Lu=sign(area(_u,$u,Bu)),Ou=sign(area(_u,$u,Ru)),Fu=sign(area(Bu,Ru,_u)),Nu=sign(area(Bu,Ru,$u));return!!(Lu!==Ou&&Fu!==Nu||Lu===0&&onSegment(_u,Bu,$u)||Ou===0&&onSegment(_u,Ru,$u)||Fu===0&&onSegment(Bu,_u,Ru)||Nu===0&&onSegment(Bu,$u,Ru))}function onSegment(_u,$u,Bu){return $u.x<=Math.max(_u.x,Bu.x)&&$u.x>=Math.min(_u.x,Bu.x)&&$u.y<=Math.max(_u.y,Bu.y)&&$u.y>=Math.min(_u.y,Bu.y)}function sign(_u){return _u>0?1:_u<0?-1:0}function intersectsPolygon(_u,$u){var Bu=_u;do{if(Bu.i!==_u.i&&Bu.next.i!==_u.i&&Bu.i!==$u.i&&Bu.next.i!==$u.i&&intersects(Bu,Bu.next,_u,$u))return!0;Bu=Bu.next}while(Bu!==_u);return!1}function locallyInside(_u,$u){return area(_u.prev,_u,_u.next)<0?area(_u,$u,_u.next)>=0&&area(_u,_u.prev,$u)>=0:area(_u,$u,_u.prev)<0||area(_u,_u.next,$u)<0}function middleInside(_u,$u){var Bu=_u,Ru=!1,Lu=(_u.x+$u.x)/2,Ou=(_u.y+$u.y)/2;do Bu.y>Ou!=Bu.next.y>Ou&&Bu.next.y!==Bu.y&&Lu<(Bu.next.x-Bu.x)*(Ou-Bu.y)/(Bu.next.y-Bu.y)+Bu.x&&(Ru=!Ru),Bu=Bu.next;while(Bu!==_u);return Ru}function splitPolygon(_u,$u){var Bu=new Node(_u.i,_u.x,_u.y),Ru=new Node($u.i,$u.x,$u.y),Lu=_u.next,Ou=$u.prev;return _u.next=$u,$u.prev=_u,Bu.next=Lu,Lu.prev=Bu,Ru.next=Bu,Bu.prev=Ru,Ou.next=Ru,Ru.prev=Ou,Ru}function insertNode(_u,$u,Bu,Ru){var Lu=new Node(_u,$u,Bu);return Ru?(Lu.next=Ru.next,Lu.prev=Ru,Ru.next.prev=Lu,Ru.next=Lu):(Lu.prev=Lu,Lu.next=Lu),Lu}function removeNode(_u){_u.next.prev=_u.prev,_u.prev.next=_u.next,_u.prevZ&&(_u.prevZ.nextZ=_u.nextZ),_u.nextZ&&(_u.nextZ.prevZ=_u.prevZ)}function Node(_u,$u,Bu){this.i=_u,this.x=$u,this.y=Bu,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(_u,$u,Bu,Ru){for(var Lu=0,Ou=$u,Fu=Bu-Ru;Ou<Bu;Ou+=Ru)Lu+=(_u[Fu]-_u[Ou])*(_u[Ou+1]+_u[Fu+1]),Fu=Ou;return Lu}var ShapeUtils={area:function(_u){for(var $u=_u.length,Bu=0,Ru=$u-1,Lu=0;Lu<$u;Ru=Lu++)Bu+=_u[Ru].x*_u[Lu].y-_u[Lu].x*_u[Ru].y;return Bu*.5},isClockWise:function(_u){return ShapeUtils.area(_u)<0},triangulateShape:function(_u,$u){var Bu=[],Ru=[],Lu=[];removeDupEndPts(_u),addContour(Bu,_u);var Ou=_u.length;$u.forEach(removeDupEndPts);for(var Fu=0;Fu<$u.length;Fu++)Ru.push(Ou),Ou+=$u[Fu].length,addContour(Bu,$u[Fu]);for(var Nu=Earcut.triangulate(Bu,Ru),Fu=0;Fu<Nu.length;Fu+=3)Lu.push(Nu.slice(Fu,Fu+3));return Lu}};function removeDupEndPts(_u){var $u=_u.length;$u>2&&_u[$u-1].equals(_u[0])&&_u.pop()}function addContour(_u,$u){for(var Bu=0;Bu<$u.length;Bu++)_u.push($u[Bu].x),_u.push($u[Bu].y)}function ExtrudeGeometry(_u,$u){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:_u,options:$u},this.fromBufferGeometry(new ExtrudeBufferGeometry(_u,$u)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Bu=this.parameters.options;return toJSON($u,Bu,_u)};function ExtrudeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:_u,options:$u},_u=Array.isArray(_u)?_u:[_u];for(var Bu=this,Ru=[],Lu=[],Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou];Vu(Nu)}this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2)),this.computeVertexNormals();function Vu(Uu){var Gu=[],zu=$u.curveSegments!==void 0?$u.curveSegments:12,Hu=$u.steps!==void 0?$u.steps:1,ju=$u.depth!==void 0?$u.depth:100,Qu=$u.bevelEnabled!==void 0?$u.bevelEnabled:!0,Xu=$u.bevelThickness!==void 0?$u.bevelThickness:6,Ku=$u.bevelSize!==void 0?$u.bevelSize:Xu-2,Wu=$u.bevelOffset!==void 0?$u.bevelOffset:0,qu=$u.bevelSegments!==void 0?$u.bevelSegments:3,Yu=$u.extrudePath,Zu=$u.UVGenerator!==void 0?$u.UVGenerator:WorldUVGenerator;$u.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),ju=$u.amount);var _h,ep=!1,ip,ap,sp,Ju;Yu&&(_h=Yu.getSpacedPoints(Hu),ep=!0,Qu=!1,ip=Yu.computeFrenetFrames(Hu,!1),ap=new Vector3,sp=new Vector3,Ju=new Vector3),Qu||(qu=0,Xu=0,Ku=0,Wu=0);var _f,np,tp,rp=Uu.extractPoints(zu),op=rp.shape,lp=rp.holes,up=!ShapeUtils.isClockWise(op);if(up)for(op=op.reverse(),np=0,tp=lp.length;np<tp;np++)_f=lp[np],ShapeUtils.isClockWise(_f)&&(lp[np]=_f.reverse());var cp=ShapeUtils.triangulateShape(op,lp),Ap=op;for(np=0,tp=lp.length;np<tp;np++)_f=lp[np],op=op.concat(_f);function yp(Zp,im,Jp){return im||console.error("THREE.ExtrudeGeometry: vec does not exist"),im.clone().multiplyScalar(Jp).add(Zp)}var Ip,Ep,Vp,$p,kp,Bp=op.length,fp,dp=cp.length;function bp(Zp,im,Jp){var am,Pp,tm,sm=Zp.x-im.x,cm=Zp.y-im.y,um=Jp.x-Zp.x,vm=Jp.y-Zp.y,_m=sm*sm+cm*cm,Mm=sm*vm-cm*um;if(Math.abs(Mm)>Number.EPSILON){var Rm=Math.sqrt(_m),wm=Math.sqrt(um*um+vm*vm),Pm=im.x-cm/Rm,Im=im.y+sm/Rm,Sm=Jp.x-vm/wm,Dm=Jp.y+um/wm,Vm=((Sm-Pm)*vm-(Dm-Im)*um)/(sm*vm-cm*um);am=Pm+sm*Vm-Zp.x,Pp=Im+cm*Vm-Zp.y;var Cm=am*am+Pp*Pp;if(Cm<=2)return new Vector2(am,Pp);tm=Math.sqrt(Cm/2)}else{var _p=!1;sm>Number.EPSILON?um>Number.EPSILON&&(_p=!0):sm<-Number.EPSILON?um<-Number.EPSILON&&(_p=!0):Math.sign(cm)===Math.sign(vm)&&(_p=!0),_p?(am=-cm,Pp=sm,tm=Math.sqrt(_m)):(am=sm,Pp=cm,tm=Math.sqrt(_m/2))}return new Vector2(am/tm,Pp/tm)}for(var gp=[],wp=0,Sp=Ap.length,Cp=Sp-1,Lp=wp+1;wp<Sp;wp++,Cp++,Lp++)Cp===Sp&&(Cp=0),Lp===Sp&&(Lp=0),gp[wp]=bp(Ap[wp],Ap[Cp],Ap[Lp]);var zp=[],Dp,hp=gp.concat();for(np=0,tp=lp.length;np<tp;np++){for(_f=lp[np],Dp=[],wp=0,Sp=_f.length,Cp=Sp-1,Lp=wp+1;wp<Sp;wp++,Cp++,Lp++)Cp===Sp&&(Cp=0),Lp===Sp&&(Lp=0),Dp[wp]=bp(_f[wp],_f[Cp],_f[Lp]);zp.push(Dp),hp=hp.concat(Dp)}for(Ip=0;Ip<qu;Ip++){for(Vp=Ip/qu,$p=Xu*Math.cos(Vp*Math.PI/2),Ep=Ku*Math.sin(Vp*Math.PI/2)+Wu,wp=0,Sp=Ap.length;wp<Sp;wp++)kp=yp(Ap[wp],gp[wp],Ep),jp(kp.x,kp.y,-$p);for(np=0,tp=lp.length;np<tp;np++)for(_f=lp[np],Dp=zp[np],wp=0,Sp=_f.length;wp<Sp;wp++)kp=yp(_f[wp],Dp[wp],Ep),jp(kp.x,kp.y,-$p)}for(Ep=Ku+Wu,wp=0;wp<Bp;wp++)kp=Qu?yp(op[wp],hp[wp],Ep):op[wp],ep?(sp.copy(ip.normals[0]).multiplyScalar(kp.x),ap.copy(ip.binormals[0]).multiplyScalar(kp.y),Ju.copy(_h[0]).add(sp).add(ap),jp(Ju.x,Ju.y,Ju.z)):jp(kp.x,kp.y,0);var vp;for(vp=1;vp<=Hu;vp++)for(wp=0;wp<Bp;wp++)kp=Qu?yp(op[wp],hp[wp],Ep):op[wp],ep?(sp.copy(ip.normals[vp]).multiplyScalar(kp.x),ap.copy(ip.binormals[vp]).multiplyScalar(kp.y),Ju.copy(_h[vp]).add(sp).add(ap),jp(Ju.x,Ju.y,Ju.z)):jp(kp.x,kp.y,ju/Hu*vp);for(Ip=qu-1;Ip>=0;Ip--){for(Vp=Ip/qu,$p=Xu*Math.cos(Vp*Math.PI/2),Ep=Ku*Math.sin(Vp*Math.PI/2)+Wu,wp=0,Sp=Ap.length;wp<Sp;wp++)kp=yp(Ap[wp],gp[wp],Ep),jp(kp.x,kp.y,ju+$p);for(np=0,tp=lp.length;np<tp;np++)for(_f=lp[np],Dp=zp[np],wp=0,Sp=_f.length;wp<Sp;wp++)kp=yp(_f[wp],Dp[wp],Ep),ep?jp(kp.x,kp.y+_h[Hu-1].y,_h[Hu-1].x+$p):jp(kp.x,kp.y,ju+$p)}Np(),Fp();function Np(){var Zp=Ru.length/3;if(Qu){var im=0,Jp=Bp*im;for(wp=0;wp<dp;wp++)fp=cp[wp],Xp(fp[2]+Jp,fp[1]+Jp,fp[0]+Jp);for(im=Hu+qu*2,Jp=Bp*im,wp=0;wp<dp;wp++)fp=cp[wp],Xp(fp[0]+Jp,fp[1]+Jp,fp[2]+Jp)}else{for(wp=0;wp<dp;wp++)fp=cp[wp],Xp(fp[2],fp[1],fp[0]);for(wp=0;wp<dp;wp++)fp=cp[wp],Xp(fp[0]+Bp*Hu,fp[1]+Bp*Hu,fp[2]+Bp*Hu)}Bu.addGroup(Zp,Ru.length/3-Zp,0)}function Fp(){var Zp=Ru.length/3,im=0;for(qp(Ap,im),im+=Ap.length,np=0,tp=lp.length;np<tp;np++)_f=lp[np],qp(_f,im),im+=_f.length;Bu.addGroup(Zp,Ru.length/3-Zp,1)}function qp(Zp,im){var Jp,am;for(wp=Zp.length;--wp>=0;){Jp=wp,am=wp-1,am<0&&(am=Zp.length-1);var Pp=0,tm=Hu+qu*2;for(Pp=0;Pp<tm;Pp++){var sm=Bp*Pp,cm=Bp*(Pp+1),um=im+Jp+sm,vm=im+am+sm,_m=im+am+cm,Mm=im+Jp+cm;rm(um,vm,_m,Mm)}}}function jp(Zp,im,Jp){Gu.push(Zp),Gu.push(im),Gu.push(Jp)}function Xp(Zp,im,Jp){em(Zp),em(im),em(Jp);var am=Ru.length/3,Pp=Zu.generateTopUV(Bu,Ru,am-3,am-2,am-1);lm(Pp[0]),lm(Pp[1]),lm(Pp[2])}function rm(Zp,im,Jp,am){em(Zp),em(im),em(am),em(im),em(Jp),em(am);var Pp=Ru.length/3,tm=Zu.generateSideWallUV(Bu,Ru,Pp-6,Pp-3,Pp-2,Pp-1);lm(tm[0]),lm(tm[1]),lm(tm[3]),lm(tm[1]),lm(tm[2]),lm(tm[3])}function em(Zp){Ru.push(Gu[Zp*3+0]),Ru.push(Gu[Zp*3+1]),Ru.push(Gu[Zp*3+2])}function lm(Zp){Lu.push(Zp.x),Lu.push(Zp.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Bu=this.parameters.options;return toJSON($u,Bu,_u)};var WorldUVGenerator={generateTopUV:function(_u,$u,Bu,Ru,Lu){var Ou=$u[Bu*3],Fu=$u[Bu*3+1],Nu=$u[Ru*3],Vu=$u[Ru*3+1],Uu=$u[Lu*3],Gu=$u[Lu*3+1];return[new Vector2(Ou,Fu),new Vector2(Nu,Vu),new Vector2(Uu,Gu)]},generateSideWallUV:function(_u,$u,Bu,Ru,Lu,Ou){var Fu=$u[Bu*3],Nu=$u[Bu*3+1],Vu=$u[Bu*3+2],Uu=$u[Ru*3],Gu=$u[Ru*3+1],zu=$u[Ru*3+2],Hu=$u[Lu*3],ju=$u[Lu*3+1],Qu=$u[Lu*3+2],Xu=$u[Ou*3],Ku=$u[Ou*3+1],Wu=$u[Ou*3+2];return Math.abs(Nu-Gu)<.01?[new Vector2(Fu,1-Vu),new Vector2(Uu,1-zu),new Vector2(Hu,1-Qu),new Vector2(Xu,1-Wu)]:[new Vector2(Nu,1-Vu),new Vector2(Gu,1-zu),new Vector2(ju,1-Qu),new Vector2(Ku,1-Wu)]}};function toJSON(_u,$u,Bu){if(Bu.shapes=[],Array.isArray(_u))for(var Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Ou=_u[Ru];Bu.shapes.push(Ou.uuid)}else Bu.shapes.push(_u.uuid);return $u.extrudePath!==void 0&&(Bu.options.extrudePath=$u.extrudePath.toJSON()),Bu}function TextGeometry(_u,$u){Geometry.call(this),this.type="TextGeometry",this.parameters={text:_u,parameters:$u},this.fromBufferGeometry(new TextBufferGeometry(_u,$u)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(_u,$u){$u=$u||{};var Bu=$u.font;if(!(Bu&&Bu.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Ru=Bu.generateShapes(_u,$u.size);$u.depth=$u.height!==void 0?$u.height:50,$u.bevelThickness===void 0&&($u.bevelThickness=10),$u.bevelSize===void 0&&($u.bevelSize=8),$u.bevelEnabled===void 0&&($u.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Ru,$u),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Bu,phiStart:Ru,phiLength:Lu,thetaStart:Ou,thetaLength:Fu},this.fromBufferGeometry(new SphereBufferGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Bu,phiStart:Ru,phiLength:Lu,thetaStart:Ou,thetaLength:Fu},_u=_u||1,$u=Math.max(3,Math.floor($u)||8),Bu=Math.max(2,Math.floor(Bu)||6),Ru=Ru!==void 0?Ru:0,Lu=Lu!==void 0?Lu:Math.PI*2,Ou=Ou!==void 0?Ou:0,Fu=Fu!==void 0?Fu:Math.PI;var Nu=Math.min(Ou+Fu,Math.PI),Vu,Uu,Gu=0,zu=[],Hu=new Vector3,ju=new Vector3,Qu=[],Xu=[],Ku=[],Wu=[];for(Uu=0;Uu<=Bu;Uu++){var qu=[],Yu=Uu/Bu,Zu=0;for(Uu==0&&Ou==0?Zu=.5/$u:Uu==Bu&&Nu==Math.PI&&(Zu=-.5/$u),Vu=0;Vu<=$u;Vu++){var _h=Vu/$u;Hu.x=-_u*Math.cos(Ru+_h*Lu)*Math.sin(Ou+Yu*Fu),Hu.y=_u*Math.cos(Ou+Yu*Fu),Hu.z=_u*Math.sin(Ru+_h*Lu)*Math.sin(Ou+Yu*Fu),Xu.push(Hu.x,Hu.y,Hu.z),ju.copy(Hu).normalize(),Ku.push(ju.x,ju.y,ju.z),Wu.push(_h+Zu,1-Yu),qu.push(Gu++)}zu.push(qu)}for(Uu=0;Uu<Bu;Uu++)for(Vu=0;Vu<$u;Vu++){var ep=zu[Uu][Vu+1],ip=zu[Uu][Vu],ap=zu[Uu+1][Vu],sp=zu[Uu+1][Vu+1];(Uu!==0||Ou>0)&&Qu.push(ep,ip,sp),(Uu!==Bu-1||Nu<Math.PI)&&Qu.push(ip,ap,sp)}this.setIndex(Qu),this.setAttribute("position",new Float32BufferAttribute(Xu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ku,3)),this.setAttribute("uv",new Float32BufferAttribute(Wu,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(_u,$u,Bu,Ru,Lu,Ou){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Bu,phiSegments:Ru,thetaStart:Lu,thetaLength:Ou},this.fromBufferGeometry(new RingBufferGeometry(_u,$u,Bu,Ru,Lu,Ou)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(_u,$u,Bu,Ru,Lu,Ou){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Bu,phiSegments:Ru,thetaStart:Lu,thetaLength:Ou},_u=_u||.5,$u=$u||1,Lu=Lu!==void 0?Lu:0,Ou=Ou!==void 0?Ou:Math.PI*2,Bu=Bu!==void 0?Math.max(3,Bu):8,Ru=Ru!==void 0?Math.max(1,Ru):1;var Fu=[],Nu=[],Vu=[],Uu=[],Gu,zu=_u,Hu=($u-_u)/Ru,ju=new Vector3,Qu=new Vector2,Xu,Ku;for(Xu=0;Xu<=Ru;Xu++){for(Ku=0;Ku<=Bu;Ku++)Gu=Lu+Ku/Bu*Ou,ju.x=zu*Math.cos(Gu),ju.y=zu*Math.sin(Gu),Nu.push(ju.x,ju.y,ju.z),Vu.push(0,0,1),Qu.x=(ju.x/$u+1)/2,Qu.y=(ju.y/$u+1)/2,Uu.push(Qu.x,Qu.y);zu+=Hu}for(Xu=0;Xu<Ru;Xu++){var Wu=Xu*(Bu+1);for(Ku=0;Ku<Bu;Ku++){Gu=Ku+Wu;var qu=Gu,Yu=Gu+Bu+1,Zu=Gu+Bu+2,_h=Gu+1;Fu.push(qu,Yu,_h),Fu.push(Yu,Zu,_h)}}this.setIndex(Fu),this.setAttribute("position",new Float32BufferAttribute(Nu,3)),this.setAttribute("normal",new Float32BufferAttribute(Vu,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(_u,$u,Bu,Ru){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:_u,segments:$u,phiStart:Bu,phiLength:Ru},this.fromBufferGeometry(new LatheBufferGeometry(_u,$u,Bu,Ru)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(_u,$u,Bu,Ru){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:_u,segments:$u,phiStart:Bu,phiLength:Ru},$u=Math.floor($u)||12,Bu=Bu||0,Ru=Ru||Math.PI*2,Ru=MathUtils.clamp(Ru,0,Math.PI*2);var Lu=[],Ou=[],Fu=[],Nu,Vu=1/$u,Uu=new Vector3,Gu=new Vector2,zu,Hu;for(zu=0;zu<=$u;zu++){var ju=Bu+zu*Vu*Ru,Qu=Math.sin(ju),Xu=Math.cos(ju);for(Hu=0;Hu<=_u.length-1;Hu++)Uu.x=_u[Hu].x*Qu,Uu.y=_u[Hu].y,Uu.z=_u[Hu].x*Xu,Ou.push(Uu.x,Uu.y,Uu.z),Gu.x=zu/$u,Gu.y=Hu/(_u.length-1),Fu.push(Gu.x,Gu.y)}for(zu=0;zu<$u;zu++)for(Hu=0;Hu<_u.length-1;Hu++){Nu=Hu+zu*_u.length;var Ku=Nu,Wu=Nu+_u.length,qu=Nu+_u.length+1,Yu=Nu+1;Lu.push(Ku,Wu,Yu),Lu.push(Wu,qu,Yu)}if(this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("uv",new Float32BufferAttribute(Fu,2)),this.computeVertexNormals(),Ru===Math.PI*2){var Zu=this.attributes.normal.array,_h=new Vector3,ep=new Vector3,ip=new Vector3;for(Nu=$u*_u.length*3,zu=0,Hu=0;zu<_u.length;zu++,Hu+=3)_h.x=Zu[Hu+0],_h.y=Zu[Hu+1],_h.z=Zu[Hu+2],ep.x=Zu[Nu+Hu+0],ep.y=Zu[Nu+Hu+1],ep.z=Zu[Nu+Hu+2],ip.addVectors(_h,ep).normalize(),Zu[Hu+0]=Zu[Nu+Hu+0]=ip.x,Zu[Hu+1]=Zu[Nu+Hu+1]=ip.y,Zu[Hu+2]=Zu[Nu+Hu+2]=ip.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(_u,$u){Geometry.call(this),this.type="ShapeGeometry",typeof $u=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),$u=$u.curveSegments),this.parameters={shapes:_u,curveSegments:$u},this.fromBufferGeometry(new ShapeBufferGeometry(_u,$u)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function ShapeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:_u,curveSegments:$u},$u=$u||12;var Bu=[],Ru=[],Lu=[],Ou=[],Fu=0,Nu=0;if(Array.isArray(_u)===!1)Uu(_u);else for(var Vu=0;Vu<_u.length;Vu++)Uu(_u[Vu]),this.addGroup(Fu,Nu,Vu),Fu+=Nu,Nu=0;this.setIndex(Bu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("normal",new Float32BufferAttribute(Lu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2));function Uu(Gu){var zu,Hu,ju,Qu=Ru.length/3,Xu=Gu.extractPoints($u),Ku=Xu.shape,Wu=Xu.holes;for(ShapeUtils.isClockWise(Ku)===!1&&(Ku=Ku.reverse()),zu=0,Hu=Wu.length;zu<Hu;zu++)ju=Wu[zu],ShapeUtils.isClockWise(ju)===!0&&(Wu[zu]=ju.reverse());var qu=ShapeUtils.triangulateShape(Ku,Wu);for(zu=0,Hu=Wu.length;zu<Hu;zu++)ju=Wu[zu],Ku=Ku.concat(ju);for(zu=0,Hu=Ku.length;zu<Hu;zu++){var Yu=Ku[zu];Ru.push(Yu.x,Yu.y,0),Lu.push(0,0,1),Ou.push(Yu.x,Yu.y)}for(zu=0,Hu=qu.length;zu<Hu;zu++){var Zu=qu[zu],_h=Zu[0]+Qu,ep=Zu[1]+Qu,ip=Zu[2]+Qu;Bu.push(_h,ep,ip),Nu+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function toJSON$1(_u,$u){if($u.shapes=[],Array.isArray(_u))for(var Bu=0,Ru=_u.length;Bu<Ru;Bu++){var Lu=_u[Bu];$u.shapes.push(Lu.uuid)}else $u.shapes.push(_u.uuid);return $u}function EdgesGeometry(_u,$u){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:$u},$u=$u!==void 0?$u:1;var Bu=[],Ru=Math.cos(MathUtils.DEG2RAD*$u),Lu=[0,0],Ou={},Fu,Nu,Vu,Uu=["a","b","c"],Gu;_u.isBufferGeometry?(Gu=new Geometry,Gu.fromBufferGeometry(_u)):Gu=_u.clone(),Gu.mergeVertices(),Gu.computeFaceNormals();for(var zu=Gu.vertices,Hu=Gu.faces,ju=0,Qu=Hu.length;ju<Qu;ju++)for(var Xu=Hu[ju],Ku=0;Ku<3;Ku++)Fu=Xu[Uu[Ku]],Nu=Xu[Uu[(Ku+1)%3]],Lu[0]=Math.min(Fu,Nu),Lu[1]=Math.max(Fu,Nu),Vu=Lu[0]+","+Lu[1],Ou[Vu]===void 0?Ou[Vu]={index1:Lu[0],index2:Lu[1],face1:ju,face2:void 0}:Ou[Vu].face2=ju;for(Vu in Ou){var Wu=Ou[Vu];if(Wu.face2===void 0||Hu[Wu.face1].normal.dot(Hu[Wu.face2].normal)<=Ru){var qu=zu[Wu.index1];Bu.push(qu.x,qu.y,qu.z),qu=zu[Wu.index2],Bu.push(qu.x,qu.y,qu.z)}}this.setAttribute("position",new Float32BufferAttribute(Bu,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Bu,radialSegments:Ru,heightSegments:Lu,openEnded:Ou,thetaStart:Fu,thetaLength:Nu},this.fromBufferGeometry(new CylinderBufferGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Bu,radialSegments:Ru,heightSegments:Lu,openEnded:Ou,thetaStart:Fu,thetaLength:Nu};var Vu=this;_u=_u!==void 0?_u:1,$u=$u!==void 0?$u:1,Bu=Bu||1,Ru=Math.floor(Ru)||8,Lu=Math.floor(Lu)||1,Ou=Ou!==void 0?Ou:!1,Fu=Fu!==void 0?Fu:0,Nu=Nu!==void 0?Nu:Math.PI*2;var Uu=[],Gu=[],zu=[],Hu=[],ju=0,Qu=[],Xu=Bu/2,Ku=0;Wu(),Ou===!1&&(_u>0&&qu(!0),$u>0&&qu(!1)),this.setIndex(Uu),this.setAttribute("position",new Float32BufferAttribute(Gu,3)),this.setAttribute("normal",new Float32BufferAttribute(zu,3)),this.setAttribute("uv",new Float32BufferAttribute(Hu,2));function Wu(){var Yu,Zu,_h=new Vector3,ep=new Vector3,ip=0,ap=($u-_u)/Bu;for(Zu=0;Zu<=Lu;Zu++){var sp=[],Ju=Zu/Lu,_f=Ju*($u-_u)+_u;for(Yu=0;Yu<=Ru;Yu++){var np=Yu/Ru,tp=np*Nu+Fu,rp=Math.sin(tp),op=Math.cos(tp);ep.x=_f*rp,ep.y=-Ju*Bu+Xu,ep.z=_f*op,Gu.push(ep.x,ep.y,ep.z),_h.set(rp,ap,op).normalize(),zu.push(_h.x,_h.y,_h.z),Hu.push(np,1-Ju),sp.push(ju++)}Qu.push(sp)}for(Yu=0;Yu<Ru;Yu++)for(Zu=0;Zu<Lu;Zu++){var lp=Qu[Zu][Yu],up=Qu[Zu+1][Yu],cp=Qu[Zu+1][Yu+1],Ap=Qu[Zu][Yu+1];Uu.push(lp,up,Ap),Uu.push(up,cp,Ap),ip+=6}Vu.addGroup(Ku,ip,0),Ku+=ip}function qu(Yu){var Zu,_h,ep,ip=new Vector2,ap=new Vector3,sp=0,Ju=Yu===!0?_u:$u,_f=Yu===!0?1:-1;for(_h=ju,Zu=1;Zu<=Ru;Zu++)Gu.push(0,Xu*_f,0),zu.push(0,_f,0),Hu.push(.5,.5),ju++;for(ep=ju,Zu=0;Zu<=Ru;Zu++){var np=Zu/Ru,tp=np*Nu+Fu,rp=Math.cos(tp),op=Math.sin(tp);ap.x=Ju*op,ap.y=Xu*_f,ap.z=Ju*rp,Gu.push(ap.x,ap.y,ap.z),zu.push(0,_f,0),ip.x=rp*.5+.5,ip.y=op*.5*_f+.5,Hu.push(ip.x,ip.y),ju++}for(Zu=0;Zu<Ru;Zu++){var lp=_h+Zu,up=ep+Zu;Yu===!0?Uu.push(up,up+1,lp):Uu.push(up+1,up,lp),sp+=3}Vu.addGroup(Ku,sp,Yu===!0?1:2),Ku+=sp}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu){CylinderGeometry.call(this,0,_u,$u,Bu,Ru,Lu,Ou,Fu),this.type="ConeGeometry",this.parameters={radius:_u,height:$u,radialSegments:Bu,heightSegments:Ru,openEnded:Lu,thetaStart:Ou,thetaLength:Fu}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(_u,$u,Bu,Ru,Lu,Ou,Fu){CylinderBufferGeometry.call(this,0,_u,$u,Bu,Ru,Lu,Ou,Fu),this.type="ConeBufferGeometry",this.parameters={radius:_u,height:$u,radialSegments:Bu,heightSegments:Ru,openEnded:Lu,thetaStart:Ou,thetaLength:Fu}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(_u,$u,Bu,Ru){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Bu,thetaLength:Ru},this.fromBufferGeometry(new CircleBufferGeometry(_u,$u,Bu,Ru)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(_u,$u,Bu,Ru){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Bu,thetaLength:Ru},_u=_u||1,$u=$u!==void 0?Math.max(3,$u):8,Bu=Bu!==void 0?Bu:0,Ru=Ru!==void 0?Ru:Math.PI*2;var Lu=[],Ou=[],Fu=[],Nu=[],Vu,Uu,Gu=new Vector3,zu=new Vector2;for(Ou.push(0,0,0),Fu.push(0,0,1),Nu.push(.5,.5),Uu=0,Vu=3;Uu<=$u;Uu++,Vu+=3){var Hu=Bu+Uu/$u*Ru;Gu.x=_u*Math.cos(Hu),Gu.y=_u*Math.sin(Hu),Ou.push(Gu.x,Gu.y,Gu.z),Fu.push(0,0,1),zu.x=(Ou[Vu]/_u+1)/2,zu.y=(Ou[Vu+1]/_u+1)/2,Nu.push(zu.x,zu.y)}for(Vu=1;Vu<=$u;Vu++)Lu.push(Vu,Vu+1,0);this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("normal",new Float32BufferAttribute(Fu,3)),this.setAttribute("uv",new Float32BufferAttribute(Nu,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(_u){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(_u)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this};function RawShaderMaterial(_u){ShaderMaterial.call(this,_u),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(_u){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(_u)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={STANDARD:""},this.color.copy(_u.color),this.roughness=_u.roughness,this.metalness=_u.metalness,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.roughnessMap=_u.roughnessMap,this.metalnessMap=_u.metalnessMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.envMapIntensity=_u.envMapIntensity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.vertexTangents=_u.vertexTangents,this};function MeshPhysicalMaterial(_u){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(_u)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(_u){return MeshStandardMaterial.prototype.copy.call(this,_u),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=_u.clearcoat,this.clearcoatMap=_u.clearcoatMap,this.clearcoatRoughness=_u.clearcoatRoughness,this.clearcoatRoughnessMap=_u.clearcoatRoughnessMap,this.clearcoatNormalMap=_u.clearcoatNormalMap,this.clearcoatNormalScale.copy(_u.clearcoatNormalScale),this.reflectivity=_u.reflectivity,_u.sheen?this.sheen=(this.sheen||new Color).copy(_u.sheen):this.sheen=null,this.transparency=_u.transparency,this};function MeshPhongMaterial(_u){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshToonMaterial(_u){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.gradientMap=_u.gradientMap,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshNormalMaterial(_u){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshLambertMaterial(_u){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshMatcapMaterial(_u){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={MATCAP:""},this.color.copy(_u.color),this.matcap=_u.matcap,this.map=_u.map,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.alphaMap=_u.alphaMap,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function LineDashedMaterial(_u){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_u)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(_u){return LineBasicMaterial.prototype.copy.call(this,_u),this.scale=_u.scale,this.dashSize=_u.dashSize,this.gapSize=_u.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(_u,$u,Bu){return AnimationUtils.isTypedArray(_u)?new _u.constructor(_u.subarray($u,Bu!==void 0?Bu:_u.length)):_u.slice($u,Bu)},convertArray:function(_u,$u,Bu){return!_u||!Bu&&_u.constructor===$u?_u:typeof $u.BYTES_PER_ELEMENT=="number"?new $u(_u):Array.prototype.slice.call(_u)},isTypedArray:function(_u){return ArrayBuffer.isView(_u)&&!(_u instanceof DataView)},getKeyframeOrder:function(_u){function $u(Ou,Fu){return _u[Ou]-_u[Fu]}for(var Bu=_u.length,Ru=new Array(Bu),Lu=0;Lu!==Bu;++Lu)Ru[Lu]=Lu;return Ru.sort($u),Ru},sortedArray:function(_u,$u,Bu){for(var Ru=_u.length,Lu=new _u.constructor(Ru),Ou=0,Fu=0;Fu!==Ru;++Ou)for(var Nu=Bu[Ou]*$u,Vu=0;Vu!==$u;++Vu)Lu[Fu++]=_u[Nu+Vu];return Lu},flattenJSON:function(_u,$u,Bu,Ru){for(var Lu=1,Ou=_u[0];Ou!==void 0&&Ou[Ru]===void 0;)Ou=_u[Lu++];if(Ou!==void 0){var Fu=Ou[Ru];if(Fu!==void 0)if(Array.isArray(Fu))do Fu=Ou[Ru],Fu!==void 0&&($u.push(Ou.time),Bu.push.apply(Bu,Fu)),Ou=_u[Lu++];while(Ou!==void 0);else if(Fu.toArray!==void 0)do Fu=Ou[Ru],Fu!==void 0&&($u.push(Ou.time),Fu.toArray(Bu,Bu.length)),Ou=_u[Lu++];while(Ou!==void 0);else do Fu=Ou[Ru],Fu!==void 0&&($u.push(Ou.time),Bu.push(Fu)),Ou=_u[Lu++];while(Ou!==void 0)}},subclip:function(_u,$u,Bu,Ru,Lu){Lu=Lu||30;var Ou=_u.clone();Ou.name=$u;for(var Fu=[],Nu=0;Nu<Ou.tracks.length;++Nu){for(var Vu=Ou.tracks[Nu],Uu=Vu.getValueSize(),Gu=[],zu=[],Hu=0;Hu<Vu.times.length;++Hu){var ju=Vu.times[Hu]*Lu;if(!(ju<Bu||ju>=Ru)){Gu.push(Vu.times[Hu]);for(var Qu=0;Qu<Uu;++Qu)zu.push(Vu.values[Hu*Uu+Qu])}}Gu.length!==0&&(Vu.times=AnimationUtils.convertArray(Gu,Vu.times.constructor),Vu.values=AnimationUtils.convertArray(zu,Vu.values.constructor),Fu.push(Vu))}Ou.tracks=Fu;for(var Xu=1/0,Nu=0;Nu<Ou.tracks.length;++Nu)Xu>Ou.tracks[Nu].times[0]&&(Xu=Ou.tracks[Nu].times[0]);for(var Nu=0;Nu<Ou.tracks.length;++Nu)Ou.tracks[Nu].shift(-1*Xu);return Ou.resetDuration(),Ou},makeClipAdditive:function(_u,$u,Bu,Ru){$u===void 0&&($u=0),Bu===void 0&&(Bu=_u),(Ru===void 0||Ru<=0)&&(Ru=30);for(var Lu=_u.tracks.length,Ou=$u/Ru,Fu=0;Fu<Lu;++Fu){var Nu=Bu.tracks[Fu],Vu=Nu.ValueTypeName;if(!(Vu==="bool"||Vu==="string")){var Uu=_u.tracks.find(function(Zu){return Zu.name===Nu.name&&Zu.ValueTypeName===Vu});if(Uu!==void 0){var Gu=Nu.getValueSize(),zu=Nu.times.length-1,Hu;if(Ou<=Nu.times[0])Hu=AnimationUtils.arraySlice(Nu.values,0,Nu.valueSize);else if(Ou>=Nu.times[zu]){var ju=zu*Gu;Hu=AnimationUtils.arraySlice(Nu.values,ju)}else{var Qu=Nu.createInterpolant();Qu.evaluate(Ou),Hu=Qu.resultBuffer}if(Vu==="quaternion"){var Xu=new Quaternion(Hu[0],Hu[1],Hu[2],Hu[3]).normalize().conjugate();Xu.toArray(Hu)}for(var Ku=Uu.times.length,Wu=0;Wu<Ku;++Wu){var qu=Wu*Gu;if(Vu==="quaternion")Quaternion.multiplyQuaternionsFlat(Uu.values,qu,Hu,0,Uu.values,qu);else for(var Yu=0;Yu<Gu;++Yu)Uu.values[qu+Yu]-=Hu[Yu]}}}}return _u.blendMode=AdditiveAnimationBlendMode,_u}};function Interpolant(_u,$u,Bu,Ru){this.parameterPositions=_u,this._cachedIndex=0,this.resultBuffer=Ru!==void 0?Ru:new $u.constructor(Bu),this.sampleValues=$u,this.valueSize=Bu}Object.assign(Interpolant.prototype,{evaluate:function(_u){var $u=this.parameterPositions,Bu=this._cachedIndex,Ru=$u[Bu],Lu=$u[Bu-1];e:{t:{var Ou;n:{r:if(!(_u<Ru)){for(var Fu=Bu+2;;){if(Ru===void 0){if(_u<Lu)break r;return Bu=$u.length,this._cachedIndex=Bu,this.afterEnd_(Bu-1,_u,Lu)}if(Bu===Fu)break;if(Lu=Ru,Ru=$u[++Bu],_u<Ru)break t}Ou=$u.length;break n}if(!(_u>=Lu)){var Nu=$u[1];_u<Nu&&(Bu=2,Lu=Nu);for(var Fu=Bu-2;;){if(Lu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Ru);if(Bu===Fu)break;if(Ru=Lu,Lu=$u[--Bu-1],_u>=Lu)break t}Ou=Bu,Bu=0;break n}break e}for(;Bu<Ou;){var Vu=Bu+Ou>>>1;_u<$u[Vu]?Ou=Vu:Bu=Vu+1}if(Ru=$u[Bu],Lu=$u[Bu-1],Lu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Ru);if(Ru===void 0)return Bu=$u.length,this._cachedIndex=Bu,this.afterEnd_(Bu-1,Lu,_u)}this._cachedIndex=Bu,this.intervalChanged_(Bu,Lu,Ru)}return this.interpolate_(Bu,Lu,_u,Ru)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(_u){for(var $u=this.resultBuffer,Bu=this.sampleValues,Ru=this.valueSize,Lu=_u*Ru,Ou=0;Ou!==Ru;++Ou)$u[Ou]=Bu[Lu+Ou];return $u},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(_u,$u,Bu,Ru){Interpolant.call(this,_u,$u,Bu,Ru),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(_u,$u,Bu){var Ru=this.parameterPositions,Lu=_u-2,Ou=_u+1,Fu=Ru[Lu],Nu=Ru[Ou];if(Fu===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Lu=_u,Fu=2*$u-Bu;break;case WrapAroundEnding:Lu=Ru.length-2,Fu=$u+Ru[Lu]-Ru[Lu+1];break;default:Lu=_u,Fu=Bu}if(Nu===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ou=_u,Nu=2*Bu-$u;break;case WrapAroundEnding:Ou=1,Nu=Bu+Ru[1]-Ru[0];break;default:Ou=_u-1,Nu=$u}var Vu=(Bu-$u)*.5,Uu=this.valueSize;this._weightPrev=Vu/($u-Fu),this._weightNext=Vu/(Nu-Bu),this._offsetPrev=Lu*Uu,this._offsetNext=Ou*Uu},interpolate_:function(_u,$u,Bu,Ru){for(var Lu=this.resultBuffer,Ou=this.sampleValues,Fu=this.valueSize,Nu=_u*Fu,Vu=Nu-Fu,Uu=this._offsetPrev,Gu=this._offsetNext,zu=this._weightPrev,Hu=this._weightNext,ju=(Bu-$u)/(Ru-$u),Qu=ju*ju,Xu=Qu*ju,Ku=-zu*Xu+2*zu*Qu-zu*ju,Wu=(1+zu)*Xu+(-1.5-2*zu)*Qu+(-.5+zu)*ju+1,qu=(-1-Hu)*Xu+(1.5+Hu)*Qu+.5*ju,Yu=Hu*Xu-Hu*Qu,Zu=0;Zu!==Fu;++Zu)Lu[Zu]=Ku*Ou[Uu+Zu]+Wu*Ou[Vu+Zu]+qu*Ou[Nu+Zu]+Yu*Ou[Gu+Zu];return Lu}});function LinearInterpolant(_u,$u,Bu,Ru){Interpolant.call(this,_u,$u,Bu,Ru)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(_u,$u,Bu,Ru){for(var Lu=this.resultBuffer,Ou=this.sampleValues,Fu=this.valueSize,Nu=_u*Fu,Vu=Nu-Fu,Uu=(Bu-$u)/(Ru-$u),Gu=1-Uu,zu=0;zu!==Fu;++zu)Lu[zu]=Ou[Vu+zu]*Gu+Ou[Nu+zu]*Uu;return Lu}});function DiscreteInterpolant(_u,$u,Bu,Ru){Interpolant.call(this,_u,$u,Bu,Ru)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(_u){return this.copySampleValue_(_u-1)}});function KeyframeTrack(_u,$u,Bu,Ru){if(_u===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if($u===void 0||$u.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_u);this.name=_u,this.times=AnimationUtils.convertArray($u,this.TimeBufferType),this.values=AnimationUtils.convertArray(Bu,this.ValueBufferType),this.setInterpolation(Ru||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(_u){var $u=_u.constructor,Bu;if($u.toJSON!==void 0)Bu=$u.toJSON(_u);else{Bu={name:_u.name,times:AnimationUtils.convertArray(_u.times,Array),values:AnimationUtils.convertArray(_u.values,Array)};var Ru=_u.getInterpolation();Ru!==_u.DefaultInterpolation&&(Bu.interpolation=Ru)}return Bu.type=_u.ValueTypeName,Bu}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(_u){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodLinear:function(_u){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:function(_u){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_u)},setInterpolation:function(_u){var $u;switch(_u){case InterpolateDiscrete:$u=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:$u=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:$u=this.InterpolantFactoryMethodSmooth;break}if($u===void 0){var Bu="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_u!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Bu);return console.warn("THREE.KeyframeTrack:",Bu),this}return this.createInterpolant=$u,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(_u){if(_u!==0)for(var $u=this.times,Bu=0,Ru=$u.length;Bu!==Ru;++Bu)$u[Bu]+=_u;return this},scale:function(_u){if(_u!==1)for(var $u=this.times,Bu=0,Ru=$u.length;Bu!==Ru;++Bu)$u[Bu]*=_u;return this},trim:function(_u,$u){for(var Bu=this.times,Ru=Bu.length,Lu=0,Ou=Ru-1;Lu!==Ru&&Bu[Lu]<_u;)++Lu;for(;Ou!==-1&&Bu[Ou]>$u;)--Ou;if(++Ou,Lu!==0||Ou!==Ru){Lu>=Ou&&(Ou=Math.max(Ou,1),Lu=Ou-1);var Fu=this.getValueSize();this.times=AnimationUtils.arraySlice(Bu,Lu,Ou),this.values=AnimationUtils.arraySlice(this.values,Lu*Fu,Ou*Fu)}return this},validate:function(){var _u=!0,$u=this.getValueSize();$u-Math.floor($u)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_u=!1);var Bu=this.times,Ru=this.values,Lu=Bu.length;Lu===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_u=!1);for(var Ou=null,Fu=0;Fu!==Lu;Fu++){var Nu=Bu[Fu];if(typeof Nu=="number"&&isNaN(Nu)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Fu,Nu),_u=!1;break}if(Ou!==null&&Ou>Nu){console.error("THREE.KeyframeTrack: Out of order keys.",this,Fu,Nu,Ou),_u=!1;break}Ou=Nu}if(Ru!==void 0&&AnimationUtils.isTypedArray(Ru))for(var Fu=0,Vu=Ru.length;Fu!==Vu;++Fu){var Uu=Ru[Fu];if(isNaN(Uu)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Fu,Uu),_u=!1;break}}return _u},optimize:function(){for(var _u=AnimationUtils.arraySlice(this.times),$u=AnimationUtils.arraySlice(this.values),Bu=this.getValueSize(),Ru=this.getInterpolation()===InterpolateSmooth,Lu=1,Ou=_u.length-1,Fu=1;Fu<Ou;++Fu){var Nu=!1,Vu=_u[Fu],Uu=_u[Fu+1];if(Vu!==Uu&&(Fu!==1||Vu!==Vu[0]))if(Ru)Nu=!0;else for(var Gu=Fu*Bu,zu=Gu-Bu,Hu=Gu+Bu,ju=0;ju!==Bu;++ju){var Qu=$u[Gu+ju];if(Qu!==$u[zu+ju]||Qu!==$u[Hu+ju]){Nu=!0;break}}if(Nu){if(Fu!==Lu){_u[Lu]=_u[Fu];for(var Xu=Fu*Bu,Ku=Lu*Bu,ju=0;ju!==Bu;++ju)$u[Ku+ju]=$u[Xu+ju]}++Lu}}if(Ou>0){_u[Lu]=_u[Ou];for(var Xu=Ou*Bu,Ku=Lu*Bu,ju=0;ju!==Bu;++ju)$u[Ku+ju]=$u[Xu+ju];++Lu}return Lu!==_u.length?(this.times=AnimationUtils.arraySlice(_u,0,Lu),this.values=AnimationUtils.arraySlice($u,0,Lu*Bu)):(this.times=_u,this.values=$u),this},clone:function(){var _u=AnimationUtils.arraySlice(this.times,0),$u=AnimationUtils.arraySlice(this.values,0),Bu=this.constructor,Ru=new Bu(this.name,_u,$u);return Ru.createInterpolant=this.createInterpolant,Ru}});function BooleanKeyframeTrack(_u,$u,Bu){KeyframeTrack.call(this,_u,$u,Bu)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(_u,$u,Bu,Ru){KeyframeTrack.call(this,_u,$u,Bu,Ru)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(_u,$u,Bu,Ru){KeyframeTrack.call(this,_u,$u,Bu,Ru)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(_u,$u,Bu,Ru){Interpolant.call(this,_u,$u,Bu,Ru)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(_u,$u,Bu,Ru){for(var Lu=this.resultBuffer,Ou=this.sampleValues,Fu=this.valueSize,Nu=_u*Fu,Vu=(Bu-$u)/(Ru-$u),Uu=Nu+Fu;Nu!==Uu;Nu+=4)Quaternion.slerpFlat(Lu,0,Ou,Nu-Fu,Ou,Nu,Vu);return Lu}});function QuaternionKeyframeTrack(_u,$u,Bu,Ru){KeyframeTrack.call(this,_u,$u,Bu,Ru)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(_u){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(_u,$u,Bu,Ru){KeyframeTrack.call(this,_u,$u,Bu,Ru)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(_u,$u,Bu,Ru){KeyframeTrack.call(this,_u,$u,Bu,Ru)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(_u,$u,Bu,Ru){this.name=_u,this.tracks=Bu,this.duration=$u!==void 0?$u:-1,this.blendMode=Ru!==void 0?Ru:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(_u){switch(_u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_u)}function parseKeyframeTrack(_u){if(_u.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var $u=getTrackTypeForValueTypeName(_u.type);if(_u.times===void 0){var Bu=[],Ru=[];AnimationUtils.flattenJSON(_u.keys,Bu,Ru,"value"),_u.times=Bu,_u.values=Ru}return $u.parse!==void 0?$u.parse(_u):new $u(_u.name,_u.times,_u.values,_u.interpolation)}Object.assign(AnimationClip,{parse:function(_u){for(var $u=[],Bu=_u.tracks,Ru=1/(_u.fps||1),Lu=0,Ou=Bu.length;Lu!==Ou;++Lu)$u.push(parseKeyframeTrack(Bu[Lu]).scale(Ru));return new AnimationClip(_u.name,_u.duration,$u,_u.blendMode)},toJSON:function(_u){for(var $u=[],Bu=_u.tracks,Ru={name:_u.name,duration:_u.duration,tracks:$u,uuid:_u.uuid,blendMode:_u.blendMode},Lu=0,Ou=Bu.length;Lu!==Ou;++Lu)$u.push(KeyframeTrack.toJSON(Bu[Lu]));return Ru},CreateFromMorphTargetSequence:function(_u,$u,Bu,Ru){for(var Lu=$u.length,Ou=[],Fu=0;Fu<Lu;Fu++){var Nu=[],Vu=[];Nu.push((Fu+Lu-1)%Lu,Fu,(Fu+1)%Lu),Vu.push(0,1,0);var Uu=AnimationUtils.getKeyframeOrder(Nu);Nu=AnimationUtils.sortedArray(Nu,1,Uu),Vu=AnimationUtils.sortedArray(Vu,1,Uu),!Ru&&Nu[0]===0&&(Nu.push(Lu),Vu.push(Vu[0])),Ou.push(new NumberKeyframeTrack(".morphTargetInfluences["+$u[Fu].name+"]",Nu,Vu).scale(1/Bu))}return new AnimationClip(_u,-1,Ou)},findByName:function(_u,$u){var Bu=_u;if(!Array.isArray(_u)){var Ru=_u;Bu=Ru.geometry&&Ru.geometry.animations||Ru.animations}for(var Lu=0;Lu<Bu.length;Lu++)if(Bu[Lu].name===$u)return Bu[Lu];return null},CreateClipsFromMorphTargetSequences:function(_u,$u,Bu){for(var Ru={},Lu=/^([\w-]*?)([\d]+)$/,Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou],Vu=Nu.name.match(Lu);if(Vu&&Vu.length>1){var Uu=Vu[1],Gu=Ru[Uu];Gu||(Ru[Uu]=Gu=[]),Gu.push(Nu)}}var zu=[];for(var Uu in Ru)zu.push(AnimationClip.CreateFromMorphTargetSequence(Uu,Ru[Uu],$u,Bu));return zu},parseAnimation:function(_u,$u){if(!_u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var Bu=function(Zu,_h,ep,ip,ap){if(ep.length!==0){var sp=[],Ju=[];AnimationUtils.flattenJSON(ep,sp,Ju,ip),sp.length!==0&&ap.push(new Zu(_h,sp,Ju))}},Ru=[],Lu=_u.name||"default",Ou=_u.length||-1,Fu=_u.fps||30,Nu=_u.blendMode,Vu=_u.hierarchy||[],Uu=0;Uu<Vu.length;Uu++){var Gu=Vu[Uu].keys;if(!(!Gu||Gu.length===0))if(Gu[0].morphTargets){for(var zu={},Hu=0;Hu<Gu.length;Hu++)if(Gu[Hu].morphTargets)for(var ju=0;ju<Gu[Hu].morphTargets.length;ju++)zu[Gu[Hu].morphTargets[ju]]=-1;for(var Qu in zu){for(var Xu=[],Ku=[],ju=0;ju!==Gu[Hu].morphTargets.length;++ju){var Wu=Gu[Hu];Xu.push(Wu.time),Ku.push(Wu.morphTarget===Qu?1:0)}Ru.push(new NumberKeyframeTrack(".morphTargetInfluence["+Qu+"]",Xu,Ku))}Ou=zu.length*(Fu||1)}else{var qu=".bones["+$u[Uu].name+"]";Bu(VectorKeyframeTrack,qu+".position",Gu,"pos",Ru),Bu(QuaternionKeyframeTrack,qu+".quaternion",Gu,"rot",Ru),Bu(VectorKeyframeTrack,qu+".scale",Gu,"scl",Ru)}}if(Ru.length===0)return null;var Yu=new AnimationClip(Lu,Ou,Ru,Nu);return Yu}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var _u=this.tracks,$u=0,Bu=0,Ru=_u.length;Bu!==Ru;++Bu){var Lu=this.tracks[Bu];$u=Math.max($u,Lu.times[Lu.times.length-1])}return this.duration=$u,this},trim:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].trim(0,this.duration);return this},validate:function(){for(var _u=!0,$u=0;$u<this.tracks.length;$u++)_u=_u&&this.tracks[$u].validate();return _u},optimize:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].optimize();return this},clone:function(){for(var _u=[],$u=0;$u<this.tracks.length;$u++)_u.push(this.tracks[$u].clone());return new AnimationClip(this.name,this.duration,_u,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(_u,$u){this.enabled!==!1&&(this.files[_u]=$u)},get:function(_u){if(this.enabled!==!1)return this.files[_u]},remove:function(_u){delete this.files[_u]},clear:function(){this.files={}}};function LoadingManager(_u,$u,Bu){var Ru=this,Lu=!1,Ou=0,Fu=0,Nu=void 0,Vu=[];this.onStart=void 0,this.onLoad=_u,this.onProgress=$u,this.onError=Bu,this.itemStart=function(Uu){Fu++,Lu===!1&&Ru.onStart!==void 0&&Ru.onStart(Uu,Ou,Fu),Lu=!0},this.itemEnd=function(Uu){Ou++,Ru.onProgress!==void 0&&Ru.onProgress(Uu,Ou,Fu),Ou===Fu&&(Lu=!1,Ru.onLoad!==void 0&&Ru.onLoad())},this.itemError=function(Uu){Ru.onError!==void 0&&Ru.onError(Uu)},this.resolveURL=function(Uu){return Nu?Nu(Uu):Uu},this.setURLModifier=function(Uu){return Nu=Uu,this},this.addHandler=function(Uu,Gu){return Vu.push(Uu,Gu),this},this.removeHandler=function(Uu){var Gu=Vu.indexOf(Uu);return Gu!==-1&&Vu.splice(Gu,2),this},this.getHandler=function(Uu){for(var Gu=0,zu=Vu.length;Gu<zu;Gu+=2){var Hu=Vu[Gu],ju=Vu[Gu+1];if(Hu.global&&(Hu.lastIndex=0),Hu.test(Uu))return ju}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(_u){this.manager=_u!==void 0?_u:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(_u,$u){var Bu=this;return new Promise(function(Ru,Lu){Bu.load(_u,Ru,$u,Lu)})},parse:function(){},setCrossOrigin:function(_u){return this.crossOrigin=_u,this},setPath:function(_u){return this.path=_u,this},setResourcePath:function(_u){return this.resourcePath=_u,this},setRequestHeader:function(_u){return this.requestHeader=_u,this}});var loading={};function FileLoader(_u){Loader.call(this,_u)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(_u,$u,Bu,Ru){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Lu=this,Ou=Cache.get(_u);if(Ou!==void 0)return Lu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Ou),Lu.manager.itemEnd(_u)},0),Ou;if(loading[_u]!==void 0){loading[_u].push({onLoad:$u,onProgress:Bu,onError:Ru});return}var Fu=/^data:(.*?)(;base64)?,(.*)$/,Nu=_u.match(Fu);if(Nu){var Vu=Nu[1],Uu=!!Nu[2],Gu=Nu[3];Gu=decodeURIComponent(Gu),Uu&&(Gu=atob(Gu));try{var zu,Hu=(this.responseType||"").toLowerCase();switch(Hu){case"arraybuffer":case"blob":for(var ju=new Uint8Array(Gu.length),Qu=0;Qu<Gu.length;Qu++)ju[Qu]=Gu.charCodeAt(Qu);Hu==="blob"?zu=new Blob([ju.buffer],{type:Vu}):zu=ju.buffer;break;case"document":var Xu=new DOMParser;zu=Xu.parseFromString(Gu,Vu);break;case"json":zu=JSON.parse(Gu);break;default:zu=Gu;break}setTimeout(function(){$u&&$u(zu),Lu.manager.itemEnd(_u)},0)}catch(qu){setTimeout(function(){Ru&&Ru(qu),Lu.manager.itemError(_u),Lu.manager.itemEnd(_u)},0)}}else{loading[_u]=[],loading[_u].push({onLoad:$u,onProgress:Bu,onError:Ru});var Ku=new XMLHttpRequest;Ku.open("GET",_u,!0),Ku.addEventListener("load",function(qu){var Yu=this.response,Zu=loading[_u];if(delete loading[_u],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(_u,Yu);for(var _h=0,ep=Zu.length;_h<ep;_h++){var ip=Zu[_h];ip.onLoad&&ip.onLoad(Yu)}Lu.manager.itemEnd(_u)}else{for(var _h=0,ep=Zu.length;_h<ep;_h++){var ip=Zu[_h];ip.onError&&ip.onError(qu)}Lu.manager.itemError(_u),Lu.manager.itemEnd(_u)}},!1),Ku.addEventListener("progress",function(qu){for(var Yu=loading[_u],Zu=0,_h=Yu.length;Zu<_h;Zu++){var ep=Yu[Zu];ep.onProgress&&ep.onProgress(qu)}},!1),Ku.addEventListener("error",function(qu){var Yu=loading[_u];delete loading[_u];for(var Zu=0,_h=Yu.length;Zu<_h;Zu++){var ep=Yu[Zu];ep.onError&&ep.onError(qu)}Lu.manager.itemError(_u),Lu.manager.itemEnd(_u)},!1),Ku.addEventListener("abort",function(qu){var Yu=loading[_u];delete loading[_u];for(var Zu=0,_h=Yu.length;Zu<_h;Zu++){var ep=Yu[Zu];ep.onError&&ep.onError(qu)}Lu.manager.itemError(_u),Lu.manager.itemEnd(_u)},!1),this.responseType!==void 0&&(Ku.responseType=this.responseType),this.withCredentials!==void 0&&(Ku.withCredentials=this.withCredentials),Ku.overrideMimeType&&Ku.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Wu in this.requestHeader)Ku.setRequestHeader(Wu,this.requestHeader[Wu]);Ku.send(null)}return Lu.manager.itemStart(_u),Ku},setResponseType:function(_u){return this.responseType=_u,this},setWithCredentials:function(_u){return this.withCredentials=_u,this},setMimeType:function(_u){return this.mimeType=_u,this}});function AnimationLoader(_u){Loader.call(this,_u)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=new FileLoader(Lu.manager);Ou.setPath(Lu.path),Ou.load(_u,function(Fu){try{$u(Lu.parse(JSON.parse(Fu)))}catch(Nu){Ru?Ru(Nu):console.error(Nu),Lu.manager.itemError(_u)}},Bu,Ru)},parse:function(_u){for(var $u=[],Bu=0;Bu<_u.length;Bu++){var Ru=AnimationClip.parse(_u[Bu]);$u.push(Ru)}return $u}});function CompressedTextureLoader(_u){Loader.call(this,_u)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=[],Fu=new CompressedTexture;Fu.image=Ou;var Nu=new FileLoader(this.manager);Nu.setPath(this.path),Nu.setResponseType("arraybuffer");function Vu(Hu){Nu.load(_u[Hu],function(ju){var Qu=Lu.parse(ju,!0);Ou[Hu]={width:Qu.width,height:Qu.height,format:Qu.format,mipmaps:Qu.mipmaps},Uu+=1,Uu===6&&(Qu.mipmapCount===1&&(Fu.minFilter=LinearFilter),Fu.format=Qu.format,Fu.needsUpdate=!0,$u&&$u(Fu))},Bu,Ru)}if(Array.isArray(_u))for(var Uu=0,Gu=0,zu=_u.length;Gu<zu;++Gu)Vu(Gu);else Nu.load(_u,function(Hu){var ju=Lu.parse(Hu,!0);if(ju.isCubemap)for(var Qu=ju.mipmaps.length/ju.mipmapCount,Xu=0;Xu<Qu;Xu++){Ou[Xu]={mipmaps:[]};for(var Ku=0;Ku<ju.mipmapCount;Ku++)Ou[Xu].mipmaps.push(ju.mipmaps[Xu*ju.mipmapCount+Ku]),Ou[Xu].format=ju.format,Ou[Xu].width=ju.width,Ou[Xu].height=ju.height}else Fu.image.width=ju.width,Fu.image.height=ju.height,Fu.mipmaps=ju.mipmaps;ju.mipmapCount===1&&(Fu.minFilter=LinearFilter),Fu.format=ju.format,Fu.needsUpdate=!0,$u&&$u(Fu)},Bu,Ru);return Fu}});function DataTextureLoader(_u){Loader.call(this,_u)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=new DataTexture,Fu=new FileLoader(this.manager);return Fu.setResponseType("arraybuffer"),Fu.setPath(this.path),Fu.load(_u,function(Nu){var Vu=Lu.parse(Nu);!Vu||(Vu.image!==void 0?Ou.image=Vu.image:Vu.data!==void 0&&(Ou.image.width=Vu.width,Ou.image.height=Vu.height,Ou.image.data=Vu.data),Ou.wrapS=Vu.wrapS!==void 0?Vu.wrapS:ClampToEdgeWrapping,Ou.wrapT=Vu.wrapT!==void 0?Vu.wrapT:ClampToEdgeWrapping,Ou.magFilter=Vu.magFilter!==void 0?Vu.magFilter:LinearFilter,Ou.minFilter=Vu.minFilter!==void 0?Vu.minFilter:LinearFilter,Ou.anisotropy=Vu.anisotropy!==void 0?Vu.anisotropy:1,Vu.format!==void 0&&(Ou.format=Vu.format),Vu.type!==void 0&&(Ou.type=Vu.type),Vu.mipmaps!==void 0&&(Ou.mipmaps=Vu.mipmaps,Ou.minFilter=LinearMipmapLinearFilter),Vu.mipmapCount===1&&(Ou.minFilter=LinearFilter),Ou.needsUpdate=!0,$u&&$u(Ou,Vu))},Bu,Ru),Ou}});function ImageLoader(_u){Loader.call(this,_u)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(_u,$u,Bu,Ru){this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Lu=this,Ou=Cache.get(_u);if(Ou!==void 0)return Lu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Ou),Lu.manager.itemEnd(_u)},0),Ou;var Fu=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Nu(){Fu.removeEventListener("load",Nu,!1),Fu.removeEventListener("error",Vu,!1),Cache.add(_u,this),$u&&$u(this),Lu.manager.itemEnd(_u)}function Vu(Uu){Fu.removeEventListener("load",Nu,!1),Fu.removeEventListener("error",Vu,!1),Ru&&Ru(Uu),Lu.manager.itemError(_u),Lu.manager.itemEnd(_u)}return Fu.addEventListener("load",Nu,!1),Fu.addEventListener("error",Vu,!1),_u.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Fu.crossOrigin=this.crossOrigin),Lu.manager.itemStart(_u),Fu.src=_u,Fu}});function CubeTextureLoader(_u){Loader.call(this,_u)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(_u,$u,Bu,Ru){var Lu=new CubeTexture,Ou=new ImageLoader(this.manager);Ou.setCrossOrigin(this.crossOrigin),Ou.setPath(this.path);var Fu=0;function Nu(Uu){Ou.load(_u[Uu],function(Gu){Lu.images[Uu]=Gu,Fu++,Fu===6&&(Lu.needsUpdate=!0,$u&&$u(Lu))},void 0,Ru)}for(var Vu=0;Vu<_u.length;++Vu)Nu(Vu);return Lu}});function TextureLoader(_u){Loader.call(this,_u)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(_u,$u,Bu,Ru){var Lu=new Texture,Ou=new ImageLoader(this.manager);return Ou.setCrossOrigin(this.crossOrigin),Ou.setPath(this.path),Ou.load(_u,function(Fu){Lu.image=Fu;var Nu=_u.search(/\.jpe?g($|\?)/i)>0||_u.search(/^data\:image\/jpeg/)===0;Lu.format=Nu?RGBFormat:RGBAFormat,Lu.needsUpdate=!0,$u!==void 0&&$u(Lu)},Bu,Ru),Lu}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(_u,$u){var Bu=this.getUtoTmapping(_u);return this.getPoint(Bu,$u)},getPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Bu=0;Bu<=_u;Bu++)$u.push(this.getPoint(Bu/_u));return $u},getSpacedPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Bu=0;Bu<=_u;Bu++)$u.push(this.getPointAt(Bu/_u));return $u},getLength:function(){var _u=this.getLengths();return _u[_u.length-1]},getLengths:function(_u){if(_u===void 0&&(_u=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===_u+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var $u=[],Bu,Ru=this.getPoint(0),Lu,Ou=0;for($u.push(0),Lu=1;Lu<=_u;Lu++)Bu=this.getPoint(Lu/_u),Ou+=Bu.distanceTo(Ru),$u.push(Ou),Ru=Bu;return this.cacheArcLengths=$u,$u},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(_u,$u){var Bu=this.getLengths(),Ru=0,Lu=Bu.length,Ou;$u?Ou=$u:Ou=_u*Bu[Lu-1];for(var Fu=0,Nu=Lu-1,Vu;Fu<=Nu;)if(Ru=Math.floor(Fu+(Nu-Fu)/2),Vu=Bu[Ru]-Ou,Vu<0)Fu=Ru+1;else if(Vu>0)Nu=Ru-1;else{Nu=Ru;break}if(Ru=Nu,Bu[Ru]===Ou)return Ru/(Lu-1);var Uu=Bu[Ru],Gu=Bu[Ru+1],zu=Gu-Uu,Hu=(Ou-Uu)/zu,ju=(Ru+Hu)/(Lu-1);return ju},getTangent:function(_u,$u){var Bu=1e-4,Ru=_u-Bu,Lu=_u+Bu;Ru<0&&(Ru=0),Lu>1&&(Lu=1);var Ou=this.getPoint(Ru),Fu=this.getPoint(Lu),Nu=$u||(Ou.isVector2?new Vector2:new Vector3);return Nu.copy(Fu).sub(Ou).normalize(),Nu},getTangentAt:function(_u,$u){var Bu=this.getUtoTmapping(_u);return this.getTangent(Bu,$u)},computeFrenetFrames:function(_u,$u){var Bu=new Vector3,Ru=[],Lu=[],Ou=[],Fu=new Vector3,Nu=new Matrix4,Vu,Uu,Gu;for(Vu=0;Vu<=_u;Vu++)Uu=Vu/_u,Ru[Vu]=this.getTangentAt(Uu,new Vector3),Ru[Vu].normalize();Lu[0]=new Vector3,Ou[0]=new Vector3;var zu=Number.MAX_VALUE,Hu=Math.abs(Ru[0].x),ju=Math.abs(Ru[0].y),Qu=Math.abs(Ru[0].z);for(Hu<=zu&&(zu=Hu,Bu.set(1,0,0)),ju<=zu&&(zu=ju,Bu.set(0,1,0)),Qu<=zu&&Bu.set(0,0,1),Fu.crossVectors(Ru[0],Bu).normalize(),Lu[0].crossVectors(Ru[0],Fu),Ou[0].crossVectors(Ru[0],Lu[0]),Vu=1;Vu<=_u;Vu++)Lu[Vu]=Lu[Vu-1].clone(),Ou[Vu]=Ou[Vu-1].clone(),Fu.crossVectors(Ru[Vu-1],Ru[Vu]),Fu.length()>Number.EPSILON&&(Fu.normalize(),Gu=Math.acos(MathUtils.clamp(Ru[Vu-1].dot(Ru[Vu]),-1,1)),Lu[Vu].applyMatrix4(Nu.makeRotationAxis(Fu,Gu))),Ou[Vu].crossVectors(Ru[Vu],Lu[Vu]);if($u===!0)for(Gu=Math.acos(MathUtils.clamp(Lu[0].dot(Lu[_u]),-1,1)),Gu/=_u,Ru[0].dot(Fu.crossVectors(Lu[0],Lu[_u]))>0&&(Gu=-Gu),Vu=1;Vu<=_u;Vu++)Lu[Vu].applyMatrix4(Nu.makeRotationAxis(Ru[Vu],Gu*Vu)),Ou[Vu].crossVectors(Ru[Vu],Lu[Vu]);return{tangents:Ru,normals:Lu,binormals:Ou}},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this},toJSON:function(){var _u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return _u.arcLengthDivisions=this.arcLengthDivisions,_u.type=this.type,_u},fromJSON:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this}});function EllipseCurve(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){Curve.call(this),this.type="EllipseCurve",this.aX=_u||0,this.aY=$u||0,this.xRadius=Bu||1,this.yRadius=Ru||1,this.aStartAngle=Lu||0,this.aEndAngle=Ou||2*Math.PI,this.aClockwise=Fu||!1,this.aRotation=Nu||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(_u,$u){for(var Bu=$u||new Vector2,Ru=Math.PI*2,Lu=this.aEndAngle-this.aStartAngle,Ou=Math.abs(Lu)<Number.EPSILON;Lu<0;)Lu+=Ru;for(;Lu>Ru;)Lu-=Ru;Lu<Number.EPSILON&&(Ou?Lu=0:Lu=Ru),this.aClockwise===!0&&!Ou&&(Lu===Ru?Lu=-Ru:Lu=Lu-Ru);var Fu=this.aStartAngle+_u*Lu,Nu=this.aX+this.xRadius*Math.cos(Fu),Vu=this.aY+this.yRadius*Math.sin(Fu);if(this.aRotation!==0){var Uu=Math.cos(this.aRotation),Gu=Math.sin(this.aRotation),zu=Nu-this.aX,Hu=Vu-this.aY;Nu=zu*Uu-Hu*Gu+this.aX,Vu=zu*Gu+Hu*Uu+this.aY}return Bu.set(Nu,Vu)};EllipseCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};EllipseCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.aX=this.aX,_u.aY=this.aY,_u.xRadius=this.xRadius,_u.yRadius=this.yRadius,_u.aStartAngle=this.aStartAngle,_u.aEndAngle=this.aEndAngle,_u.aClockwise=this.aClockwise,_u.aRotation=this.aRotation,_u};EllipseCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};function ArcCurve(_u,$u,Bu,Ru,Lu,Ou){EllipseCurve.call(this,_u,$u,Bu,Bu,Ru,Lu,Ou),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var _u=0,$u=0,Bu=0,Ru=0;function Lu(Ou,Fu,Nu,Vu){_u=Ou,$u=Nu,Bu=-3*Ou+3*Fu-2*Nu-Vu,Ru=2*Ou-2*Fu+Nu+Vu}return{initCatmullRom:function(Ou,Fu,Nu,Vu,Uu){Lu(Fu,Nu,Uu*(Nu-Ou),Uu*(Vu-Fu))},initNonuniformCatmullRom:function(Ou,Fu,Nu,Vu,Uu,Gu,zu){var Hu=(Fu-Ou)/Uu-(Nu-Ou)/(Uu+Gu)+(Nu-Fu)/Gu,ju=(Nu-Fu)/Gu-(Vu-Fu)/(Gu+zu)+(Vu-Nu)/zu;Hu*=Gu,ju*=Gu,Lu(Fu,Nu,Hu,ju)},calc:function(Ou){var Fu=Ou*Ou,Nu=Fu*Ou;return _u+$u*Ou+Bu*Fu+Ru*Nu}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(_u,$u,Bu,Ru){Curve.call(this),this.type="CatmullRomCurve3",this.points=_u||[],this.closed=$u||!1,this.curveType=Bu||"centripetal",this.tension=Ru||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector3,Ru=this.points,Lu=Ru.length,Ou=(Lu-(this.closed?0:1))*_u,Fu=Math.floor(Ou),Nu=Ou-Fu;this.closed?Fu+=Fu>0?0:(Math.floor(Math.abs(Fu)/Lu)+1)*Lu:Nu===0&&Fu===Lu-1&&(Fu=Lu-2,Nu=1);var Vu,Uu,Gu,zu;if(this.closed||Fu>0?Vu=Ru[(Fu-1)%Lu]:(tmp.subVectors(Ru[0],Ru[1]).add(Ru[0]),Vu=tmp),Uu=Ru[Fu%Lu],Gu=Ru[(Fu+1)%Lu],this.closed||Fu+2<Lu?zu=Ru[(Fu+2)%Lu]:(tmp.subVectors(Ru[Lu-1],Ru[Lu-2]).add(Ru[Lu-1]),zu=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Hu=this.curveType==="chordal"?.5:.25,ju=Math.pow(Vu.distanceToSquared(Uu),Hu),Qu=Math.pow(Uu.distanceToSquared(Gu),Hu),Xu=Math.pow(Gu.distanceToSquared(zu),Hu);Qu<1e-4&&(Qu=1),ju<1e-4&&(ju=Qu),Xu<1e-4&&(Xu=Qu),px.initNonuniformCatmullRom(Vu.x,Uu.x,Gu.x,zu.x,ju,Qu,Xu),py.initNonuniformCatmullRom(Vu.y,Uu.y,Gu.y,zu.y,ju,Qu,Xu),pz.initNonuniformCatmullRom(Vu.z,Uu.z,Gu.z,zu.z,ju,Qu,Xu)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Vu.x,Uu.x,Gu.x,zu.x,this.tension),py.initCatmullRom(Vu.y,Uu.y,Gu.y,zu.y,this.tension),pz.initCatmullRom(Vu.z,Uu.z,Gu.z,zu.z,this.tension));return Bu.set(px.calc(Nu),py.calc(Nu),pz.calc(Nu)),Bu};CatmullRomCurve3.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Bu=_u.points.length;$u<Bu;$u++){var Ru=_u.points[$u];this.points.push(Ru.clone())}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Bu=this.points.length;$u<Bu;$u++){var Ru=this.points[$u];_u.points.push(Ru.toArray())}return _u.closed=this.closed,_u.curveType=this.curveType,_u.tension=this.tension,_u};CatmullRomCurve3.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Bu=_u.points.length;$u<Bu;$u++){var Ru=_u.points[$u];this.points.push(new Vector3().fromArray(Ru))}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};function CatmullRom(_u,$u,Bu,Ru,Lu){var Ou=(Ru-$u)*.5,Fu=(Lu-Bu)*.5,Nu=_u*_u,Vu=_u*Nu;return(2*Bu-2*Ru+Ou+Fu)*Vu+(-3*Bu+3*Ru-2*Ou-Fu)*Nu+Ou*_u+Bu}function QuadraticBezierP0(_u,$u){var Bu=1-_u;return Bu*Bu*$u}function QuadraticBezierP1(_u,$u){return 2*(1-_u)*_u*$u}function QuadraticBezierP2(_u,$u){return _u*_u*$u}function QuadraticBezier(_u,$u,Bu,Ru){return QuadraticBezierP0(_u,$u)+QuadraticBezierP1(_u,Bu)+QuadraticBezierP2(_u,Ru)}function CubicBezierP0(_u,$u){var Bu=1-_u;return Bu*Bu*Bu*$u}function CubicBezierP1(_u,$u){var Bu=1-_u;return 3*Bu*Bu*_u*$u}function CubicBezierP2(_u,$u){return 3*(1-_u)*_u*_u*$u}function CubicBezierP3(_u,$u){return _u*_u*_u*$u}function CubicBezier(_u,$u,Bu,Ru,Lu){return CubicBezierP0(_u,$u)+CubicBezierP1(_u,Bu)+CubicBezierP2(_u,Ru)+CubicBezierP3(_u,Lu)}function CubicBezierCurve(_u,$u,Bu,Ru){Curve.call(this),this.type="CubicBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Bu||new Vector2,this.v3=Ru||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector2,Ru=this.v0,Lu=this.v1,Ou=this.v2,Fu=this.v3;return Bu.set(CubicBezier(_u,Ru.x,Lu.x,Ou.x,Fu.x),CubicBezier(_u,Ru.y,Lu.y,Ou.y,Fu.y)),Bu};CubicBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function CubicBezierCurve3(_u,$u,Bu,Ru){Curve.call(this),this.type="CubicBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Bu||new Vector3,this.v3=Ru||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector3,Ru=this.v0,Lu=this.v1,Ou=this.v2,Fu=this.v3;return Bu.set(CubicBezier(_u,Ru.x,Lu.x,Ou.x,Fu.x),CubicBezier(_u,Ru.y,Lu.y,Ou.y,Fu.y),CubicBezier(_u,Ru.z,Lu.z,Ou.z,Fu.z)),Bu};CubicBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function LineCurve(_u,$u){Curve.call(this),this.type="LineCurve",this.v1=_u||new Vector2,this.v2=$u||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector2;return _u===1?Bu.copy(this.v2):(Bu.copy(this.v2).sub(this.v1),Bu.multiplyScalar(_u).add(this.v1)),Bu};LineCurve.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve.prototype.getTangent=function(_u,$u){var Bu=$u||new Vector2,Bu=Bu.copy(this.v2).sub(this.v1).normalize();return Bu};LineCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function LineCurve3(_u,$u){Curve.call(this),this.type="LineCurve3",this.v1=_u||new Vector3,this.v2=$u||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector3;return _u===1?Bu.copy(this.v2):(Bu.copy(this.v2).sub(this.v1),Bu.multiplyScalar(_u).add(this.v1)),Bu};LineCurve3.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve(_u,$u,Bu){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Bu||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector2,Ru=this.v0,Lu=this.v1,Ou=this.v2;return Bu.set(QuadraticBezier(_u,Ru.x,Lu.x,Ou.x),QuadraticBezier(_u,Ru.y,Lu.y,Ou.y)),Bu};QuadraticBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve3(_u,$u,Bu){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Bu||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector3,Ru=this.v0,Lu=this.v1,Ou=this.v2;return Bu.set(QuadraticBezier(_u,Ru.x,Lu.x,Ou.x),QuadraticBezier(_u,Ru.y,Lu.y,Ou.y),QuadraticBezier(_u,Ru.z,Lu.z,Ou.z)),Bu};QuadraticBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function SplineCurve(_u){Curve.call(this),this.type="SplineCurve",this.points=_u||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector2,Ru=this.points,Lu=(Ru.length-1)*_u,Ou=Math.floor(Lu),Fu=Lu-Ou,Nu=Ru[Ou===0?Ou:Ou-1],Vu=Ru[Ou],Uu=Ru[Ou>Ru.length-2?Ru.length-1:Ou+1],Gu=Ru[Ou>Ru.length-3?Ru.length-1:Ou+2];return Bu.set(CatmullRom(Fu,Nu.x,Vu.x,Uu.x,Gu.x),CatmullRom(Fu,Nu.y,Vu.y,Uu.y,Gu.y)),Bu};SplineCurve.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Bu=_u.points.length;$u<Bu;$u++){var Ru=_u.points[$u];this.points.push(Ru.clone())}return this};SplineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Bu=this.points.length;$u<Bu;$u++){var Ru=this.points[$u];_u.points.push(Ru.toArray())}return _u};SplineCurve.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Bu=_u.points.length;$u<Bu;$u++){var Ru=_u.points[$u];this.points.push(new Vector2().fromArray(Ru))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(_u){this.curves.push(_u)},closePath:function(){var _u=this.curves[0].getPoint(0),$u=this.curves[this.curves.length-1].getPoint(1);_u.equals($u)||this.curves.push(new LineCurve($u,_u))},getPoint:function(_u){for(var $u=_u*this.getLength(),Bu=this.getCurveLengths(),Ru=0;Ru<Bu.length;){if(Bu[Ru]>=$u){var Lu=Bu[Ru]-$u,Ou=this.curves[Ru],Fu=Ou.getLength(),Nu=Fu===0?0:1-Lu/Fu;return Ou.getPointAt(Nu)}Ru++}return null},getLength:function(){var _u=this.getCurveLengths();return _u[_u.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var _u=[],$u=0,Bu=0,Ru=this.curves.length;Bu<Ru;Bu++)$u+=this.curves[Bu].getLength(),_u.push($u);return this.cacheLengths=_u,_u},getSpacedPoints:function(_u){_u===void 0&&(_u=40);for(var $u=[],Bu=0;Bu<=_u;Bu++)$u.push(this.getPoint(Bu/_u));return this.autoClose&&$u.push($u[0]),$u},getPoints:function(_u){_u=_u||12;for(var $u=[],Bu,Ru=0,Lu=this.curves;Ru<Lu.length;Ru++)for(var Ou=Lu[Ru],Fu=Ou&&Ou.isEllipseCurve?_u*2:Ou&&(Ou.isLineCurve||Ou.isLineCurve3)?1:Ou&&Ou.isSplineCurve?_u*Ou.points.length:_u,Nu=Ou.getPoints(Fu),Vu=0;Vu<Nu.length;Vu++){var Uu=Nu[Vu];Bu&&Bu.equals(Uu)||($u.push(Uu),Bu=Uu)}return this.autoClose&&$u.length>1&&!$u[$u.length-1].equals($u[0])&&$u.push($u[0]),$u},copy:function(_u){Curve.prototype.copy.call(this,_u),this.curves=[];for(var $u=0,Bu=_u.curves.length;$u<Bu;$u++){var Ru=_u.curves[$u];this.curves.push(Ru.clone())}return this.autoClose=_u.autoClose,this},toJSON:function(){var _u=Curve.prototype.toJSON.call(this);_u.autoClose=this.autoClose,_u.curves=[];for(var $u=0,Bu=this.curves.length;$u<Bu;$u++){var Ru=this.curves[$u];_u.curves.push(Ru.toJSON())}return _u},fromJSON:function(_u){Curve.prototype.fromJSON.call(this,_u),this.autoClose=_u.autoClose,this.curves=[];for(var $u=0,Bu=_u.curves.length;$u<Bu;$u++){var Ru=_u.curves[$u];this.curves.push(new Curves[Ru.type]().fromJSON(Ru))}return this}});function Path(_u){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,_u&&this.setFromPoints(_u)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(_u){this.moveTo(_u[0].x,_u[0].y);for(var $u=1,Bu=_u.length;$u<Bu;$u++)this.lineTo(_u[$u].x,_u[$u].y);return this},moveTo:function(_u,$u){return this.currentPoint.set(_u,$u),this},lineTo:function(_u,$u){var Bu=new LineCurve(this.currentPoint.clone(),new Vector2(_u,$u));return this.curves.push(Bu),this.currentPoint.set(_u,$u),this},quadraticCurveTo:function(_u,$u,Bu,Ru){var Lu=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Bu,Ru));return this.curves.push(Lu),this.currentPoint.set(Bu,Ru),this},bezierCurveTo:function(_u,$u,Bu,Ru,Lu,Ou){var Fu=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Bu,Ru),new Vector2(Lu,Ou));return this.curves.push(Fu),this.currentPoint.set(Lu,Ou),this},splineThru:function(_u){var $u=[this.currentPoint.clone()].concat(_u),Bu=new SplineCurve($u);return this.curves.push(Bu),this.currentPoint.copy(_u[_u.length-1]),this},arc:function(_u,$u,Bu,Ru,Lu,Ou){var Fu=this.currentPoint.x,Nu=this.currentPoint.y;return this.absarc(_u+Fu,$u+Nu,Bu,Ru,Lu,Ou),this},absarc:function(_u,$u,Bu,Ru,Lu,Ou){return this.absellipse(_u,$u,Bu,Bu,Ru,Lu,Ou),this},ellipse:function(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){var Vu=this.currentPoint.x,Uu=this.currentPoint.y;return this.absellipse(_u+Vu,$u+Uu,Bu,Ru,Lu,Ou,Fu,Nu),this},absellipse:function(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){var Vu=new EllipseCurve(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu);if(this.curves.length>0){var Uu=Vu.getPoint(0);Uu.equals(this.currentPoint)||this.lineTo(Uu.x,Uu.y)}this.curves.push(Vu);var Gu=Vu.getPoint(1);return this.currentPoint.copy(Gu),this},copy:function(_u){return CurvePath.prototype.copy.call(this,_u),this.currentPoint.copy(_u.currentPoint),this},toJSON:function(){var _u=CurvePath.prototype.toJSON.call(this);return _u.currentPoint=this.currentPoint.toArray(),_u},fromJSON:function(_u){return CurvePath.prototype.fromJSON.call(this,_u),this.currentPoint.fromArray(_u.currentPoint),this}});function Shape(_u){Path.call(this,_u),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(_u){for(var $u=[],Bu=0,Ru=this.holes.length;Bu<Ru;Bu++)$u[Bu]=this.holes[Bu].getPoints(_u);return $u},extractPoints:function(_u){return{shape:this.getPoints(_u),holes:this.getPointsHoles(_u)}},copy:function(_u){Path.prototype.copy.call(this,_u),this.holes=[];for(var $u=0,Bu=_u.holes.length;$u<Bu;$u++){var Ru=_u.holes[$u];this.holes.push(Ru.clone())}return this},toJSON:function(){var _u=Path.prototype.toJSON.call(this);_u.uuid=this.uuid,_u.holes=[];for(var $u=0,Bu=this.holes.length;$u<Bu;$u++){var Ru=this.holes[$u];_u.holes.push(Ru.toJSON())}return _u},fromJSON:function(_u){Path.prototype.fromJSON.call(this,_u),this.uuid=_u.uuid,this.holes=[];for(var $u=0,Bu=_u.holes.length;$u<Bu;$u++){var Ru=_u.holes[$u];this.holes.push(new Path().fromJSON(Ru))}return this}});function Light(_u,$u){Object3D.call(this),this.type="Light",this.color=new Color(_u),this.intensity=$u!==void 0?$u:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),this.color.copy(_u.color),this.intensity=_u.intensity,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.color=this.color.getHex(),$u.object.intensity=this.intensity,this.groundColor!==void 0&&($u.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&($u.object.distance=this.distance),this.angle!==void 0&&($u.object.angle=this.angle),this.decay!==void 0&&($u.object.decay=this.decay),this.penumbra!==void 0&&($u.object.penumbra=this.penumbra),this.shadow!==void 0&&($u.object.shadow=this.shadow.toJSON()),$u}});function HemisphereLight(_u,$u,Bu){Light.call(this,_u,Bu),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color($u)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.groundColor.copy(_u.groundColor),this}});function LightShadow(_u){this.camera=_u,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(_u){var $u=this.camera,Bu=this.matrix,Ru=this._projScreenMatrix,Lu=this._lookTarget,Ou=this._lightPositionWorld;Ou.setFromMatrixPosition(_u.matrixWorld),$u.position.copy(Ou),Lu.setFromMatrixPosition(_u.target.matrixWorld),$u.lookAt(Lu),$u.updateMatrixWorld(),Ru.multiplyMatrices($u.projectionMatrix,$u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ru),Bu.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Bu.multiply($u.projectionMatrix),Bu.multiply($u.matrixWorldInverse)},getViewport:function(_u){return this._viewports[_u]},getFrameExtents:function(){return this._frameExtents},copy:function(_u){return this.camera=_u.camera.clone(),this.bias=_u.bias,this.radius=_u.radius,this.mapSize.copy(_u.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u={};return this.bias!==0&&(_u.bias=this.bias),this.radius!==1&&(_u.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_u.mapSize=this.mapSize.toArray()),_u.camera=this.camera.toJSON(!1).object,delete _u.camera.matrix,_u}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(_u){var $u=this.camera,Bu=MathUtils.RAD2DEG*2*_u.angle,Ru=this.mapSize.width/this.mapSize.height,Lu=_u.distance||$u.far;(Bu!==$u.fov||Ru!==$u.aspect||Lu!==$u.far)&&($u.fov=Bu,$u.aspect=Ru,$u.far=Lu,$u.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,_u)}});function SpotLight(_u,$u,Bu,Ru,Lu,Ou){Light.call(this,_u,$u),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Fu){this.intensity=Fu/Math.PI}}),this.distance=Bu!==void 0?Bu:0,this.angle=Ru!==void 0?Ru:Math.PI/3,this.penumbra=Lu!==void 0?Lu:0,this.decay=Ou!==void 0?Ou:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.angle=_u.angle,this.penumbra=_u.penumbra,this.decay=_u.decay,this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(_u,$u){$u===void 0&&($u=0);var Bu=this.camera,Ru=this.matrix,Lu=this._lightPositionWorld,Ou=this._lookTarget,Fu=this._projScreenMatrix;Lu.setFromMatrixPosition(_u.matrixWorld),Bu.position.copy(Lu),Ou.copy(Bu.position),Ou.add(this._cubeDirections[$u]),Bu.up.copy(this._cubeUps[$u]),Bu.lookAt(Ou),Bu.updateMatrixWorld(),Ru.makeTranslation(-Lu.x,-Lu.y,-Lu.z),Fu.multiplyMatrices(Bu.projectionMatrix,Bu.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Fu)}});function PointLight(_u,$u,Bu,Ru){Light.call(this,_u,$u),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Lu){this.intensity=Lu/(4*Math.PI)}}),this.distance=Bu!==void 0?Bu:0,this.decay=Ru!==void 0?Ru:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.decay=_u.decay,this.shadow=_u.shadow.clone(),this}});function OrthographicCamera(_u,$u,Bu,Ru,Lu,Ou){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_u!==void 0?_u:-1,this.right=$u!==void 0?$u:1,this.top=Bu!==void 0?Bu:1,this.bottom=Ru!==void 0?Ru:-1,this.near=Lu!==void 0?Lu:.1,this.far=Ou!==void 0?Ou:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.left=_u.left,this.right=_u.right,this.top=_u.top,this.bottom=_u.bottom,this.near=_u.near,this.far=_u.far,this.zoom=_u.zoom,this.view=_u.view===null?null:Object.assign({},_u.view),this},setViewOffset:function(_u,$u,Bu,Ru,Lu,Ou){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Bu,this.view.offsetY=Ru,this.view.width=Lu,this.view.height=Ou,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=(this.right-this.left)/(2*this.zoom),$u=(this.top-this.bottom)/(2*this.zoom),Bu=(this.right+this.left)/2,Ru=(this.top+this.bottom)/2,Lu=Bu-_u,Ou=Bu+_u,Fu=Ru+$u,Nu=Ru-$u;if(this.view!==null&&this.view.enabled){var Vu=(this.right-this.left)/this.view.fullWidth/this.zoom,Uu=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Lu+=Vu*this.view.offsetX,Ou=Lu+Vu*this.view.width,Fu-=Uu*this.view.offsetY,Nu=Fu-Uu*this.view.height}this.projectionMatrix.makeOrthographic(Lu,Ou,Fu,Nu,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.zoom=this.zoom,$u.object.left=this.left,$u.object.right=this.right,$u.object.top=this.top,$u.object.bottom=this.bottom,$u.object.near=this.near,$u.object.far=this.far,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(_u){LightShadow.prototype.updateMatrices.call(this,_u)}});function DirectionalLight(_u,$u){Light.call(this,_u,$u),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function AmbientLight(_u,$u){Light.call(this,_u,$u),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(_u,$u,Bu,Ru){Light.call(this,_u,$u),this.type="RectAreaLight",this.width=Bu!==void 0?Bu:10,this.height=Ru!==void 0?Ru:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.width=_u.width,this.height=_u.height,this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.width=this.width,$u.object.height=this.height,$u}});function SphericalHarmonics3(){this.coefficients=[];for(var _u=0;_u<9;_u++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].copy(_u[$u]);return this},zero:function(){for(var _u=0;_u<9;_u++)this.coefficients[_u].set(0,0,0);return this},getAt:function(_u,$u){var Bu=_u.x,Ru=_u.y,Lu=_u.z,Ou=this.coefficients;return $u.copy(Ou[0]).multiplyScalar(.282095),$u.addScaledVector(Ou[1],.488603*Ru),$u.addScaledVector(Ou[2],.488603*Lu),$u.addScaledVector(Ou[3],.488603*Bu),$u.addScaledVector(Ou[4],1.092548*(Bu*Ru)),$u.addScaledVector(Ou[5],1.092548*(Ru*Lu)),$u.addScaledVector(Ou[6],.315392*(3*Lu*Lu-1)),$u.addScaledVector(Ou[7],1.092548*(Bu*Lu)),$u.addScaledVector(Ou[8],.546274*(Bu*Bu-Ru*Ru)),$u},getIrradianceAt:function(_u,$u){var Bu=_u.x,Ru=_u.y,Lu=_u.z,Ou=this.coefficients;return $u.copy(Ou[0]).multiplyScalar(.886227),$u.addScaledVector(Ou[1],2*.511664*Ru),$u.addScaledVector(Ou[2],2*.511664*Lu),$u.addScaledVector(Ou[3],2*.511664*Bu),$u.addScaledVector(Ou[4],2*.429043*Bu*Ru),$u.addScaledVector(Ou[5],2*.429043*Ru*Lu),$u.addScaledVector(Ou[6],.743125*Lu*Lu-.247708),$u.addScaledVector(Ou[7],2*.429043*Bu*Lu),$u.addScaledVector(Ou[8],.429043*(Bu*Bu-Ru*Ru)),$u},add:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].add(_u.coefficients[$u]);return this},addScaledSH:function(_u,$u){for(var Bu=0;Bu<9;Bu++)this.coefficients[Bu].addScaledVector(_u.coefficients[Bu],$u);return this},scale:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].multiplyScalar(_u);return this},lerp:function(_u,$u){for(var Bu=0;Bu<9;Bu++)this.coefficients[Bu].lerp(_u.coefficients[Bu],$u);return this},equals:function(_u){for(var $u=0;$u<9;$u++)if(!this.coefficients[$u].equals(_u.coefficients[$u]))return!1;return!0},copy:function(_u){return this.set(_u.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Bu=this.coefficients,Ru=0;Ru<9;Ru++)Bu[Ru].fromArray(_u,$u+Ru*3);return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);for(var Bu=this.coefficients,Ru=0;Ru<9;Ru++)Bu[Ru].toArray(_u,$u+Ru*3);return _u}});Object.assign(SphericalHarmonics3,{getBasisAt:function(_u,$u){var Bu=_u.x,Ru=_u.y,Lu=_u.z;$u[0]=.282095,$u[1]=.488603*Ru,$u[2]=.488603*Lu,$u[3]=.488603*Bu,$u[4]=1.092548*Bu*Ru,$u[5]=1.092548*Ru*Lu,$u[6]=.315392*(3*Lu*Lu-1),$u[7]=1.092548*Bu*Lu,$u[8]=.546274*(Bu*Bu-Ru*Ru)}});function LightProbe(_u,$u){Light.call(this,void 0,$u),this.type="LightProbe",this.sh=_u!==void 0?_u:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.sh.copy(_u.sh),this},fromJSON:function(_u){return this.intensity=_u.intensity,this.sh.fromArray(_u.sh),this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.sh=this.sh.toArray(),$u}});function MaterialLoader(_u){Loader.call(this,_u),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=new FileLoader(Lu.manager);Ou.setPath(Lu.path),Ou.load(_u,function(Fu){try{$u(Lu.parse(JSON.parse(Fu)))}catch(Nu){Ru?Ru(Nu):console.error(Nu),Lu.manager.itemError(_u)}},Bu,Ru)},parse:function(_u){var $u=this.textures;function Bu(Vu){return $u[Vu]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Vu),$u[Vu]}var Ru=new Materials[_u.type];if(_u.uuid!==void 0&&(Ru.uuid=_u.uuid),_u.name!==void 0&&(Ru.name=_u.name),_u.color!==void 0&&Ru.color.setHex(_u.color),_u.roughness!==void 0&&(Ru.roughness=_u.roughness),_u.metalness!==void 0&&(Ru.metalness=_u.metalness),_u.sheen!==void 0&&(Ru.sheen=new Color().setHex(_u.sheen)),_u.emissive!==void 0&&Ru.emissive.setHex(_u.emissive),_u.specular!==void 0&&Ru.specular.setHex(_u.specular),_u.shininess!==void 0&&(Ru.shininess=_u.shininess),_u.clearcoat!==void 0&&(Ru.clearcoat=_u.clearcoat),_u.clearcoatRoughness!==void 0&&(Ru.clearcoatRoughness=_u.clearcoatRoughness),_u.fog!==void 0&&(Ru.fog=_u.fog),_u.flatShading!==void 0&&(Ru.flatShading=_u.flatShading),_u.blending!==void 0&&(Ru.blending=_u.blending),_u.combine!==void 0&&(Ru.combine=_u.combine),_u.side!==void 0&&(Ru.side=_u.side),_u.opacity!==void 0&&(Ru.opacity=_u.opacity),_u.transparent!==void 0&&(Ru.transparent=_u.transparent),_u.alphaTest!==void 0&&(Ru.alphaTest=_u.alphaTest),_u.depthTest!==void 0&&(Ru.depthTest=_u.depthTest),_u.depthWrite!==void 0&&(Ru.depthWrite=_u.depthWrite),_u.colorWrite!==void 0&&(Ru.colorWrite=_u.colorWrite),_u.stencilWrite!==void 0&&(Ru.stencilWrite=_u.stencilWrite),_u.stencilWriteMask!==void 0&&(Ru.stencilWriteMask=_u.stencilWriteMask),_u.stencilFunc!==void 0&&(Ru.stencilFunc=_u.stencilFunc),_u.stencilRef!==void 0&&(Ru.stencilRef=_u.stencilRef),_u.stencilFuncMask!==void 0&&(Ru.stencilFuncMask=_u.stencilFuncMask),_u.stencilFail!==void 0&&(Ru.stencilFail=_u.stencilFail),_u.stencilZFail!==void 0&&(Ru.stencilZFail=_u.stencilZFail),_u.stencilZPass!==void 0&&(Ru.stencilZPass=_u.stencilZPass),_u.wireframe!==void 0&&(Ru.wireframe=_u.wireframe),_u.wireframeLinewidth!==void 0&&(Ru.wireframeLinewidth=_u.wireframeLinewidth),_u.wireframeLinecap!==void 0&&(Ru.wireframeLinecap=_u.wireframeLinecap),_u.wireframeLinejoin!==void 0&&(Ru.wireframeLinejoin=_u.wireframeLinejoin),_u.rotation!==void 0&&(Ru.rotation=_u.rotation),_u.linewidth!==1&&(Ru.linewidth=_u.linewidth),_u.dashSize!==void 0&&(Ru.dashSize=_u.dashSize),_u.gapSize!==void 0&&(Ru.gapSize=_u.gapSize),_u.scale!==void 0&&(Ru.scale=_u.scale),_u.polygonOffset!==void 0&&(Ru.polygonOffset=_u.polygonOffset),_u.polygonOffsetFactor!==void 0&&(Ru.polygonOffsetFactor=_u.polygonOffsetFactor),_u.polygonOffsetUnits!==void 0&&(Ru.polygonOffsetUnits=_u.polygonOffsetUnits),_u.skinning!==void 0&&(Ru.skinning=_u.skinning),_u.morphTargets!==void 0&&(Ru.morphTargets=_u.morphTargets),_u.morphNormals!==void 0&&(Ru.morphNormals=_u.morphNormals),_u.dithering!==void 0&&(Ru.dithering=_u.dithering),_u.vertexTangents!==void 0&&(Ru.vertexTangents=_u.vertexTangents),_u.visible!==void 0&&(Ru.visible=_u.visible),_u.toneMapped!==void 0&&(Ru.toneMapped=_u.toneMapped),_u.userData!==void 0&&(Ru.userData=_u.userData),_u.vertexColors!==void 0&&(typeof _u.vertexColors=="number"?Ru.vertexColors=_u.vertexColors>0:Ru.vertexColors=_u.vertexColors),_u.uniforms!==void 0)for(var Lu in _u.uniforms){var Ou=_u.uniforms[Lu];switch(Ru.uniforms[Lu]={},Ou.type){case"t":Ru.uniforms[Lu].value=Bu(Ou.value);break;case"c":Ru.uniforms[Lu].value=new Color().setHex(Ou.value);break;case"v2":Ru.uniforms[Lu].value=new Vector2().fromArray(Ou.value);break;case"v3":Ru.uniforms[Lu].value=new Vector3().fromArray(Ou.value);break;case"v4":Ru.uniforms[Lu].value=new Vector4().fromArray(Ou.value);break;case"m3":Ru.uniforms[Lu].value=new Matrix3().fromArray(Ou.value);case"m4":Ru.uniforms[Lu].value=new Matrix4().fromArray(Ou.value);break;default:Ru.uniforms[Lu].value=Ou.value}}if(_u.defines!==void 0&&(Ru.defines=_u.defines),_u.vertexShader!==void 0&&(Ru.vertexShader=_u.vertexShader),_u.fragmentShader!==void 0&&(Ru.fragmentShader=_u.fragmentShader),_u.extensions!==void 0)for(var Fu in _u.extensions)Ru.extensions[Fu]=_u.extensions[Fu];if(_u.shading!==void 0&&(Ru.flatShading=_u.shading===1),_u.size!==void 0&&(Ru.size=_u.size),_u.sizeAttenuation!==void 0&&(Ru.sizeAttenuation=_u.sizeAttenuation),_u.map!==void 0&&(Ru.map=Bu(_u.map)),_u.matcap!==void 0&&(Ru.matcap=Bu(_u.matcap)),_u.alphaMap!==void 0&&(Ru.alphaMap=Bu(_u.alphaMap)),_u.bumpMap!==void 0&&(Ru.bumpMap=Bu(_u.bumpMap)),_u.bumpScale!==void 0&&(Ru.bumpScale=_u.bumpScale),_u.normalMap!==void 0&&(Ru.normalMap=Bu(_u.normalMap)),_u.normalMapType!==void 0&&(Ru.normalMapType=_u.normalMapType),_u.normalScale!==void 0){var Nu=_u.normalScale;Array.isArray(Nu)===!1&&(Nu=[Nu,Nu]),Ru.normalScale=new Vector2().fromArray(Nu)}return _u.displacementMap!==void 0&&(Ru.displacementMap=Bu(_u.displacementMap)),_u.displacementScale!==void 0&&(Ru.displacementScale=_u.displacementScale),_u.displacementBias!==void 0&&(Ru.displacementBias=_u.displacementBias),_u.roughnessMap!==void 0&&(Ru.roughnessMap=Bu(_u.roughnessMap)),_u.metalnessMap!==void 0&&(Ru.metalnessMap=Bu(_u.metalnessMap)),_u.emissiveMap!==void 0&&(Ru.emissiveMap=Bu(_u.emissiveMap)),_u.emissiveIntensity!==void 0&&(Ru.emissiveIntensity=_u.emissiveIntensity),_u.specularMap!==void 0&&(Ru.specularMap=Bu(_u.specularMap)),_u.envMap!==void 0&&(Ru.envMap=Bu(_u.envMap)),_u.envMapIntensity!==void 0&&(Ru.envMapIntensity=_u.envMapIntensity),_u.reflectivity!==void 0&&(Ru.reflectivity=_u.reflectivity),_u.refractionRatio!==void 0&&(Ru.refractionRatio=_u.refractionRatio),_u.lightMap!==void 0&&(Ru.lightMap=Bu(_u.lightMap)),_u.lightMapIntensity!==void 0&&(Ru.lightMapIntensity=_u.lightMapIntensity),_u.aoMap!==void 0&&(Ru.aoMap=Bu(_u.aoMap)),_u.aoMapIntensity!==void 0&&(Ru.aoMapIntensity=_u.aoMapIntensity),_u.gradientMap!==void 0&&(Ru.gradientMap=Bu(_u.gradientMap)),_u.clearcoatMap!==void 0&&(Ru.clearcoatMap=Bu(_u.clearcoatMap)),_u.clearcoatRoughnessMap!==void 0&&(Ru.clearcoatRoughnessMap=Bu(_u.clearcoatRoughnessMap)),_u.clearcoatNormalMap!==void 0&&(Ru.clearcoatNormalMap=Bu(_u.clearcoatNormalMap)),_u.clearcoatNormalScale!==void 0&&(Ru.clearcoatNormalScale=new Vector2().fromArray(_u.clearcoatNormalScale)),Ru},setTextures:function(_u){return this.textures=_u,this}});var LoaderUtils={decodeText:function(_u){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(_u);for(var $u="",Bu=0,Ru=_u.length;Bu<Ru;Bu++)$u+=String.fromCharCode(_u[Bu]);try{return decodeURIComponent(escape($u))}catch{return $u}},extractUrlBase:function(_u){var $u=_u.lastIndexOf("/");return $u===-1?"./":_u.substr(0,$u+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(_u){return BufferGeometry.prototype.copy.call(this,_u),this.instanceCount=_u.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.instanceCount=this.instanceCount,_u.isInstancedBufferGeometry=!0,_u}});function InstancedBufferAttribute(_u,$u,Bu,Ru){typeof Bu=="number"&&(Ru=Bu,Bu=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,_u,$u,Bu),this.meshPerAttribute=Ru||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(_u){return BufferAttribute.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this},toJSON:function(){var _u=BufferAttribute.prototype.toJSON.call(this);return _u.meshPerAttribute=this.meshPerAttribute,_u.isInstancedBufferAttribute=!0,_u}});function BufferGeometryLoader(_u){Loader.call(this,_u)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=new FileLoader(Lu.manager);Ou.setPath(Lu.path),Ou.load(_u,function(Fu){try{$u(Lu.parse(JSON.parse(Fu)))}catch(Nu){Ru?Ru(Nu):console.error(Nu),Lu.manager.itemError(_u)}},Bu,Ru)},parse:function(_u){var $u=_u.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,Bu=_u.data.index;if(Bu!==void 0){var Ru=new TYPED_ARRAYS[Bu.type](Bu.array);$u.setIndex(new BufferAttribute(Ru,1))}var Lu=_u.data.attributes;for(var Ou in Lu){var Fu=Lu[Ou],Ru=new TYPED_ARRAYS[Fu.type](Fu.array),Nu=Fu.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Vu=new Nu(Ru,Fu.itemSize,Fu.normalized);Fu.name!==void 0&&(Vu.name=Fu.name),$u.setAttribute(Ou,Vu)}var Uu=_u.data.morphAttributes;if(Uu)for(var Ou in Uu){for(var Gu=Uu[Ou],zu=[],Hu=0,ju=Gu.length;Hu<ju;Hu++){var Fu=Gu[Hu],Ru=new TYPED_ARRAYS[Fu.type](Fu.array),Vu=new BufferAttribute(Ru,Fu.itemSize,Fu.normalized);Fu.name!==void 0&&(Vu.name=Fu.name),zu.push(Vu)}$u.morphAttributes[Ou]=zu}var Qu=_u.data.morphTargetsRelative;Qu&&($u.morphTargetsRelative=!0);var Xu=_u.data.groups||_u.data.drawcalls||_u.data.offsets;if(Xu!==void 0)for(var Hu=0,Ku=Xu.length;Hu!==Ku;++Hu){var Wu=Xu[Hu];$u.addGroup(Wu.start,Wu.count,Wu.materialIndex)}var qu=_u.data.boundingSphere;if(qu!==void 0){var Yu=new Vector3;qu.center!==void 0&&Yu.fromArray(qu.center),$u.boundingSphere=new Sphere(Yu,qu.radius)}return _u.name&&($u.name=_u.name),_u.userData&&($u.userData=_u.userData),$u}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(_u){Loader.call(this,_u)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=this.path===""?LoaderUtils.extractUrlBase(_u):this.path;this.resourcePath=this.resourcePath||Ou;var Fu=new FileLoader(Lu.manager);Fu.setPath(this.path),Fu.load(_u,function(Nu){var Vu=null;try{Vu=JSON.parse(Nu)}catch(Gu){Ru!==void 0&&Ru(Gu),console.error("THREE:ObjectLoader: Can't parse "+_u+".",Gu.message);return}var Uu=Vu.metadata;if(Uu===void 0||Uu.type===void 0||Uu.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+_u);return}Lu.parse(Vu,$u)},Bu,Ru)},parse:function(_u,$u){var Bu=this.parseShape(_u.shapes),Ru=this.parseGeometries(_u.geometries,Bu),Lu=this.parseImages(_u.images,function(){$u!==void 0&&$u(Nu)}),Ou=this.parseTextures(_u.textures,Lu),Fu=this.parseMaterials(_u.materials,Ou),Nu=this.parseObject(_u.object,Ru,Fu);return _u.animations&&(Nu.animations=this.parseAnimations(_u.animations)),(_u.images===void 0||_u.images.length===0)&&$u!==void 0&&$u(Nu),Nu},parseShape:function(_u){var $u={};if(_u!==void 0)for(var Bu=0,Ru=_u.length;Bu<Ru;Bu++){var Lu=new Shape().fromJSON(_u[Bu]);$u[Lu.uuid]=Lu}return $u},parseGeometries:function(_u,$u){var Bu={};if(_u!==void 0)for(var Ru=new BufferGeometryLoader,Lu=0,Ou=_u.length;Lu<Ou;Lu++){var Fu,Nu=_u[Lu];switch(Nu.type){case"PlaneGeometry":case"PlaneBufferGeometry":Fu=new Geometries[Nu.type](Nu.width,Nu.height,Nu.widthSegments,Nu.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Fu=new Geometries[Nu.type](Nu.width,Nu.height,Nu.depth,Nu.widthSegments,Nu.heightSegments,Nu.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Fu=new Geometries[Nu.type](Nu.radius,Nu.segments,Nu.thetaStart,Nu.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Fu=new Geometries[Nu.type](Nu.radiusTop,Nu.radiusBottom,Nu.height,Nu.radialSegments,Nu.heightSegments,Nu.openEnded,Nu.thetaStart,Nu.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Fu=new Geometries[Nu.type](Nu.radius,Nu.height,Nu.radialSegments,Nu.heightSegments,Nu.openEnded,Nu.thetaStart,Nu.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Fu=new Geometries[Nu.type](Nu.radius,Nu.widthSegments,Nu.heightSegments,Nu.phiStart,Nu.phiLength,Nu.thetaStart,Nu.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Fu=new Geometries[Nu.type](Nu.radius,Nu.detail);break;case"RingGeometry":case"RingBufferGeometry":Fu=new Geometries[Nu.type](Nu.innerRadius,Nu.outerRadius,Nu.thetaSegments,Nu.phiSegments,Nu.thetaStart,Nu.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Fu=new Geometries[Nu.type](Nu.radius,Nu.tube,Nu.radialSegments,Nu.tubularSegments,Nu.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Fu=new Geometries[Nu.type](Nu.radius,Nu.tube,Nu.tubularSegments,Nu.radialSegments,Nu.p,Nu.q);break;case"TubeGeometry":case"TubeBufferGeometry":Fu=new Geometries[Nu.type](new Curves[Nu.path.type]().fromJSON(Nu.path),Nu.tubularSegments,Nu.radius,Nu.radialSegments,Nu.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Fu=new Geometries[Nu.type](Nu.points,Nu.segments,Nu.phiStart,Nu.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Fu=new Geometries[Nu.type](Nu.vertices,Nu.indices,Nu.radius,Nu.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var zu=[],Vu=0,Uu=Nu.shapes.length;Vu<Uu;Vu++){var Gu=$u[Nu.shapes[Vu]];zu.push(Gu)}Fu=new Geometries[Nu.type](zu,Nu.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var zu=[],Vu=0,Uu=Nu.shapes.length;Vu<Uu;Vu++){var Gu=$u[Nu.shapes[Vu]];zu.push(Gu)}var Hu=Nu.options.extrudePath;Hu!==void 0&&(Nu.options.extrudePath=new Curves[Hu.type]().fromJSON(Hu)),Fu=new Geometries[Nu.type](zu,Nu.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Fu=Ru.parse(Nu);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Nu.type+'"');continue}Fu.uuid=Nu.uuid,Nu.name!==void 0&&(Fu.name=Nu.name),Fu.isBufferGeometry===!0&&Nu.userData!==void 0&&(Fu.userData=Nu.userData),Bu[Nu.uuid]=Fu}return Bu},parseMaterials:function(_u,$u){var Bu={},Ru={};if(_u!==void 0){var Lu=new MaterialLoader;Lu.setTextures($u);for(var Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou];if(Nu.type==="MultiMaterial"){for(var Vu=[],Uu=0;Uu<Nu.materials.length;Uu++){var Gu=Nu.materials[Uu];Bu[Gu.uuid]===void 0&&(Bu[Gu.uuid]=Lu.parse(Gu)),Vu.push(Bu[Gu.uuid])}Ru[Nu.uuid]=Vu}else Bu[Nu.uuid]===void 0&&(Bu[Nu.uuid]=Lu.parse(Nu)),Ru[Nu.uuid]=Bu[Nu.uuid]}}return Ru},parseAnimations:function(_u){for(var $u=[],Bu=0;Bu<_u.length;Bu++){var Ru=_u[Bu],Lu=AnimationClip.parse(Ru);Ru.uuid!==void 0&&(Lu.uuid=Ru.uuid),$u.push(Lu)}return $u},parseImages:function(_u,$u){var Bu=this,Ru={};function Lu(Xu){return Bu.manager.itemStart(Xu),Fu.load(Xu,function(){Bu.manager.itemEnd(Xu)},void 0,function(){Bu.manager.itemError(Xu),Bu.manager.itemEnd(Xu)})}if(_u!==void 0&&_u.length>0){var Ou=new LoadingManager($u),Fu=new ImageLoader(Ou);Fu.setCrossOrigin(this.crossOrigin);for(var Nu=0,Vu=_u.length;Nu<Vu;Nu++){var Uu=_u[Nu],Gu=Uu.url;if(Array.isArray(Gu)){Ru[Uu.uuid]=[];for(var zu=0,Hu=Gu.length;zu<Hu;zu++){var ju=Gu[zu],Qu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ju)?ju:Bu.resourcePath+ju;Ru[Uu.uuid].push(Lu(Qu))}}else{var Qu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Uu.url)?Uu.url:Bu.resourcePath+Uu.url;Ru[Uu.uuid]=Lu(Qu)}}}return Ru},parseTextures:function(_u,$u){function Bu(Vu,Uu){return typeof Vu=="number"?Vu:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Vu),Uu[Vu])}var Ru={};if(_u!==void 0)for(var Lu=0,Ou=_u.length;Lu<Ou;Lu++){var Fu=_u[Lu];Fu.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Fu.uuid),$u[Fu.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Fu.image);var Nu;Array.isArray($u[Fu.image])?Nu=new CubeTexture($u[Fu.image]):Nu=new Texture($u[Fu.image]),Nu.needsUpdate=!0,Nu.uuid=Fu.uuid,Fu.name!==void 0&&(Nu.name=Fu.name),Fu.mapping!==void 0&&(Nu.mapping=Bu(Fu.mapping,TEXTURE_MAPPING)),Fu.offset!==void 0&&Nu.offset.fromArray(Fu.offset),Fu.repeat!==void 0&&Nu.repeat.fromArray(Fu.repeat),Fu.center!==void 0&&Nu.center.fromArray(Fu.center),Fu.rotation!==void 0&&(Nu.rotation=Fu.rotation),Fu.wrap!==void 0&&(Nu.wrapS=Bu(Fu.wrap[0],TEXTURE_WRAPPING),Nu.wrapT=Bu(Fu.wrap[1],TEXTURE_WRAPPING)),Fu.format!==void 0&&(Nu.format=Fu.format),Fu.type!==void 0&&(Nu.type=Fu.type),Fu.encoding!==void 0&&(Nu.encoding=Fu.encoding),Fu.minFilter!==void 0&&(Nu.minFilter=Bu(Fu.minFilter,TEXTURE_FILTER)),Fu.magFilter!==void 0&&(Nu.magFilter=Bu(Fu.magFilter,TEXTURE_FILTER)),Fu.anisotropy!==void 0&&(Nu.anisotropy=Fu.anisotropy),Fu.flipY!==void 0&&(Nu.flipY=Fu.flipY),Fu.premultiplyAlpha!==void 0&&(Nu.premultiplyAlpha=Fu.premultiplyAlpha),Fu.unpackAlignment!==void 0&&(Nu.unpackAlignment=Fu.unpackAlignment),Ru[Fu.uuid]=Nu}return Ru},parseObject:function(_u,$u,Bu){var Ru;function Lu(Ku){return $u[Ku]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ku),$u[Ku]}function Ou(Ku){if(Ku!==void 0){if(Array.isArray(Ku)){for(var Wu=[],qu=0,Yu=Ku.length;qu<Yu;qu++){var Zu=Ku[qu];Bu[Zu]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Zu),Wu.push(Bu[Zu])}return Wu}return Bu[Ku]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ku),Bu[Ku]}}switch(_u.type){case"Scene":Ru=new Scene,_u.background!==void 0&&Number.isInteger(_u.background)&&(Ru.background=new Color(_u.background)),_u.fog!==void 0&&(_u.fog.type==="Fog"?Ru.fog=new Fog(_u.fog.color,_u.fog.near,_u.fog.far):_u.fog.type==="FogExp2"&&(Ru.fog=new FogExp2(_u.fog.color,_u.fog.density)));break;case"PerspectiveCamera":Ru=new PerspectiveCamera(_u.fov,_u.aspect,_u.near,_u.far),_u.focus!==void 0&&(Ru.focus=_u.focus),_u.zoom!==void 0&&(Ru.zoom=_u.zoom),_u.filmGauge!==void 0&&(Ru.filmGauge=_u.filmGauge),_u.filmOffset!==void 0&&(Ru.filmOffset=_u.filmOffset),_u.view!==void 0&&(Ru.view=Object.assign({},_u.view));break;case"OrthographicCamera":Ru=new OrthographicCamera(_u.left,_u.right,_u.top,_u.bottom,_u.near,_u.far),_u.zoom!==void 0&&(Ru.zoom=_u.zoom),_u.view!==void 0&&(Ru.view=Object.assign({},_u.view));break;case"AmbientLight":Ru=new AmbientLight(_u.color,_u.intensity);break;case"DirectionalLight":Ru=new DirectionalLight(_u.color,_u.intensity);break;case"PointLight":Ru=new PointLight(_u.color,_u.intensity,_u.distance,_u.decay);break;case"RectAreaLight":Ru=new RectAreaLight(_u.color,_u.intensity,_u.width,_u.height);break;case"SpotLight":Ru=new SpotLight(_u.color,_u.intensity,_u.distance,_u.angle,_u.penumbra,_u.decay);break;case"HemisphereLight":Ru=new HemisphereLight(_u.color,_u.groundColor,_u.intensity);break;case"LightProbe":Ru=new LightProbe().fromJSON(_u);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Fu=Lu(_u.geometry),Nu=Ou(_u.material);Ru=new Mesh(Fu,Nu);break;case"InstancedMesh":var Fu=Lu(_u.geometry),Nu=Ou(_u.material),Vu=_u.count,Uu=_u.instanceMatrix;Ru=new InstancedMesh(Fu,Nu,Vu),Ru.instanceMatrix=new BufferAttribute(new Float32Array(Uu.array),16);break;case"LOD":Ru=new LOD;break;case"Line":Ru=new Line$1(Lu(_u.geometry),Ou(_u.material),_u.mode);break;case"LineLoop":Ru=new LineLoop(Lu(_u.geometry),Ou(_u.material));break;case"LineSegments":Ru=new LineSegments(Lu(_u.geometry),Ou(_u.material));break;case"PointCloud":case"Points":Ru=new Points(Lu(_u.geometry),Ou(_u.material));break;case"Sprite":Ru=new Sprite(Ou(_u.material));break;case"Group":Ru=new Group$1;break;default:Ru=new Object3D}if(Ru.uuid=_u.uuid,_u.name!==void 0&&(Ru.name=_u.name),_u.matrix!==void 0?(Ru.matrix.fromArray(_u.matrix),_u.matrixAutoUpdate!==void 0&&(Ru.matrixAutoUpdate=_u.matrixAutoUpdate),Ru.matrixAutoUpdate&&Ru.matrix.decompose(Ru.position,Ru.quaternion,Ru.scale)):(_u.position!==void 0&&Ru.position.fromArray(_u.position),_u.rotation!==void 0&&Ru.rotation.fromArray(_u.rotation),_u.quaternion!==void 0&&Ru.quaternion.fromArray(_u.quaternion),_u.scale!==void 0&&Ru.scale.fromArray(_u.scale)),_u.castShadow!==void 0&&(Ru.castShadow=_u.castShadow),_u.receiveShadow!==void 0&&(Ru.receiveShadow=_u.receiveShadow),_u.shadow&&(_u.shadow.bias!==void 0&&(Ru.shadow.bias=_u.shadow.bias),_u.shadow.radius!==void 0&&(Ru.shadow.radius=_u.shadow.radius),_u.shadow.mapSize!==void 0&&Ru.shadow.mapSize.fromArray(_u.shadow.mapSize),_u.shadow.camera!==void 0&&(Ru.shadow.camera=this.parseObject(_u.shadow.camera))),_u.visible!==void 0&&(Ru.visible=_u.visible),_u.frustumCulled!==void 0&&(Ru.frustumCulled=_u.frustumCulled),_u.renderOrder!==void 0&&(Ru.renderOrder=_u.renderOrder),_u.userData!==void 0&&(Ru.userData=_u.userData),_u.layers!==void 0&&(Ru.layers.mask=_u.layers),_u.children!==void 0)for(var Gu=_u.children,zu=0;zu<Gu.length;zu++)Ru.add(this.parseObject(Gu[zu],$u,Bu));if(_u.type==="LOD"){_u.autoUpdate!==void 0&&(Ru.autoUpdate=_u.autoUpdate);for(var Hu=_u.levels,ju=0;ju<Hu.length;ju++){var Qu=Hu[ju],Xu=Ru.getObjectByProperty("uuid",Qu.object);Xu!==void 0&&Ru.addLevel(Xu,Qu.distance)}}return Ru}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(_u){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,_u),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function($u){return this.options=$u,this},load:function(_u,$u,Bu,Ru){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Lu=this,Ou=Cache.get(_u);if(Ou!==void 0)return Lu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Ou),Lu.manager.itemEnd(_u)},0),Ou;fetch(_u).then(function(Fu){return Fu.blob()}).then(function(Fu){return Lu.options===void 0?createImageBitmap(Fu):createImageBitmap(Fu,Lu.options)}).then(function(Fu){Cache.add(_u,Fu),$u&&$u(Fu),Lu.manager.itemEnd(_u)}).catch(function(Fu){Ru&&Ru(Fu),Lu.manager.itemError(_u),Lu.manager.itemEnd(_u)}),Lu.manager.itemStart(_u)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(_u,$u){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_u,$u),this},lineTo:function(_u,$u){return this.currentPath.lineTo(_u,$u),this},quadraticCurveTo:function(_u,$u,Bu,Ru){return this.currentPath.quadraticCurveTo(_u,$u,Bu,Ru),this},bezierCurveTo:function(_u,$u,Bu,Ru,Lu,Ou){return this.currentPath.bezierCurveTo(_u,$u,Bu,Ru,Lu,Ou),this},splineThru:function(_u){return this.currentPath.splineThru(_u),this},toShapes:function(_u,$u){function Bu(op){for(var lp=[],up=0,cp=op.length;up<cp;up++){var Ap=op[up],yp=new Shape;yp.curves=Ap.curves,lp.push(yp)}return lp}function Ru(op,lp){for(var up=lp.length,cp=!1,Ap=up-1,yp=0;yp<up;Ap=yp++){var Ip=lp[Ap],Ep=lp[yp],Vp=Ep.x-Ip.x,$p=Ep.y-Ip.y;if(Math.abs($p)>Number.EPSILON){if($p<0&&(Ip=lp[yp],Vp=-Vp,Ep=lp[Ap],$p=-$p),op.y<Ip.y||op.y>Ep.y)continue;if(op.y===Ip.y){if(op.x===Ip.x)return!0}else{var kp=$p*(op.x-Ip.x)-Vp*(op.y-Ip.y);if(kp===0)return!0;if(kp<0)continue;cp=!cp}}else{if(op.y!==Ip.y)continue;if(Ep.x<=op.x&&op.x<=Ip.x||Ip.x<=op.x&&op.x<=Ep.x)return!0}}return cp}var Lu=ShapeUtils.isClockWise,Ou=this.subPaths;if(Ou.length===0)return[];if($u===!0)return Bu(Ou);var Fu,Nu,Vu,Uu=[];if(Ou.length===1)return Nu=Ou[0],Vu=new Shape,Vu.curves=Nu.curves,Uu.push(Vu),Uu;var Gu=!Lu(Ou[0].getPoints());Gu=_u?!Gu:Gu;var zu=[],Hu=[],ju=[],Qu=0,Xu;Hu[Qu]=void 0,ju[Qu]=[];for(var Ku=0,Wu=Ou.length;Ku<Wu;Ku++)Nu=Ou[Ku],Xu=Nu.getPoints(),Fu=Lu(Xu),Fu=_u?!Fu:Fu,Fu?(!Gu&&Hu[Qu]&&Qu++,Hu[Qu]={s:new Shape,p:Xu},Hu[Qu].s.curves=Nu.curves,Gu&&Qu++,ju[Qu]=[]):ju[Qu].push({h:Nu,p:Xu[0]});if(!Hu[0])return Bu(Ou);if(Hu.length>1){for(var qu=!1,Yu=[],Zu=0,_h=Hu.length;Zu<_h;Zu++)zu[Zu]=[];for(var Zu=0,_h=Hu.length;Zu<_h;Zu++)for(var ep=ju[Zu],ip=0;ip<ep.length;ip++){for(var ap=ep[ip],sp=!0,Ju=0;Ju<Hu.length;Ju++)Ru(ap.p,Hu[Ju].p)&&(Zu!==Ju&&Yu.push({froms:Zu,tos:Ju,hole:ip}),sp?(sp=!1,zu[Ju].push(ap)):qu=!0);sp&&zu[Zu].push(ap)}Yu.length>0&&(qu||(ju=zu))}for(var _f,Ku=0,np=Hu.length;Ku<np;Ku++){Vu=Hu[Ku].s,Uu.push(Vu),_f=ju[Ku];for(var tp=0,rp=_f.length;tp<rp;tp++)Vu.holes.push(_f[tp].h)}return Uu}});function Font(_u){this.type="Font",this.data=_u}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(_u,$u){$u===void 0&&($u=100);for(var Bu=[],Ru=createPaths(_u,$u,this.data),Lu=0,Ou=Ru.length;Lu<Ou;Lu++)Array.prototype.push.apply(Bu,Ru[Lu].toShapes());return Bu}});function createPaths(_u,$u,Bu){for(var Ru=Array.from?Array.from(_u):String(_u).split(""),Lu=$u/Bu.resolution,Ou=(Bu.boundingBox.yMax-Bu.boundingBox.yMin+Bu.underlineThickness)*Lu,Fu=[],Nu=0,Vu=0,Uu=0;Uu<Ru.length;Uu++){var Gu=Ru[Uu];if(Gu===`
`)Nu=0,Vu-=Ou;else{var zu=createPath(Gu,Lu,Nu,Vu,Bu);Nu+=zu.offsetX,Fu.push(zu.path)}}return Fu}function createPath(_u,$u,Bu,Ru,Lu){var Ou=Lu.glyphs[_u]||Lu.glyphs["?"];if(!Ou){console.error('THREE.Font: character "'+_u+'" does not exists in font family '+Lu.familyName+".");return}var Fu=new ShapePath,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu;if(Ou.o)for(var Xu=Ou._cachedOutline||(Ou._cachedOutline=Ou.o.split(" ")),Ku=0,Wu=Xu.length;Ku<Wu;){var qu=Xu[Ku++];switch(qu){case"m":Nu=Xu[Ku++]*$u+Bu,Vu=Xu[Ku++]*$u+Ru,Fu.moveTo(Nu,Vu);break;case"l":Nu=Xu[Ku++]*$u+Bu,Vu=Xu[Ku++]*$u+Ru,Fu.lineTo(Nu,Vu);break;case"q":Uu=Xu[Ku++]*$u+Bu,Gu=Xu[Ku++]*$u+Ru,zu=Xu[Ku++]*$u+Bu,Hu=Xu[Ku++]*$u+Ru,Fu.quadraticCurveTo(zu,Hu,Uu,Gu);break;case"b":Uu=Xu[Ku++]*$u+Bu,Gu=Xu[Ku++]*$u+Ru,zu=Xu[Ku++]*$u+Bu,Hu=Xu[Ku++]*$u+Ru,ju=Xu[Ku++]*$u+Bu,Qu=Xu[Ku++]*$u+Ru,Fu.bezierCurveTo(zu,Hu,ju,Qu,Uu,Gu);break}}return{offsetX:Ou.ha*$u,path:Fu}}function FontLoader(_u){Loader.call(this,_u)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=new FileLoader(this.manager);Ou.setPath(this.path),Ou.load(_u,function(Fu){var Nu;try{Nu=JSON.parse(Fu)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Nu=JSON.parse(Fu.substring(65,Fu.length-2))}var Vu=Lu.parse(Nu);$u&&$u(Vu)},Bu,Ru)},parse:function(_u){return new Font(_u)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(_u){_context=_u}};function AudioLoader(_u){Loader.call(this,_u)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(_u,$u,Bu,Ru){var Lu=this,Ou=new FileLoader(Lu.manager);Ou.setResponseType("arraybuffer"),Ou.setPath(Lu.path),Ou.load(_u,function(Fu){try{var Nu=Fu.slice(0),Vu=AudioContext.getContext();Vu.decodeAudioData(Nu,function(Uu){$u(Uu)})}catch(Uu){Ru?Ru(Uu):console.error(Uu),Lu.manager.itemError(_u)}},Bu,Ru)}});function HemisphereLightProbe(_u,$u,Bu){LightProbe.call(this,void 0,Bu);var Ru=new Color().set(_u),Lu=new Color().set($u),Ou=new Vector3(Ru.r,Ru.g,Ru.b),Fu=new Vector3(Lu.r,Lu.g,Lu.b),Nu=Math.sqrt(Math.PI),Vu=Nu*Math.sqrt(.75);this.sh.coefficients[0].copy(Ou).add(Fu).multiplyScalar(Nu),this.sh.coefficients[1].copy(Ou).sub(Fu).multiplyScalar(Vu)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});function AmbientLightProbe(_u,$u){LightProbe.call(this,void 0,$u);var Bu=new Color().set(_u);this.sh.coefficients[0].set(Bu.r,Bu.g,Bu.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(_u){var $u=this._cache,Bu=$u.focus!==_u.focus||$u.fov!==_u.fov||$u.aspect!==_u.aspect*this.aspect||$u.near!==_u.near||$u.far!==_u.far||$u.zoom!==_u.zoom||$u.eyeSep!==this.eyeSep;if(Bu){$u.focus=_u.focus,$u.fov=_u.fov,$u.aspect=_u.aspect*this.aspect,$u.near=_u.near,$u.far=_u.far,$u.zoom=_u.zoom,$u.eyeSep=this.eyeSep;var Ru=_u.projectionMatrix.clone(),Lu=$u.eyeSep/2,Ou=Lu*$u.near/$u.focus,Fu=$u.near*Math.tan(MathUtils.DEG2RAD*$u.fov*.5)/$u.zoom,Nu,Vu;_eyeLeft.elements[12]=-Lu,_eyeRight.elements[12]=Lu,Nu=-Fu*$u.aspect+Ou,Vu=Fu*$u.aspect+Ou,Ru.elements[0]=2*$u.near/(Vu-Nu),Ru.elements[8]=(Vu+Nu)/(Vu-Nu),this.cameraL.projectionMatrix.copy(Ru),Nu=-Fu*$u.aspect-Ou,Vu=Fu*$u.aspect-Ou,Ru.elements[0]=2*$u.near/(Vu-Nu),Ru.elements[8]=(Vu+Nu)/(Vu-Nu),this.cameraR.projectionMatrix.copy(Ru)}this.cameraL.matrixWorld.copy(_u.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_u.matrixWorld).multiply(_eyeRight)}});function Clock(_u){this.autoStart=_u!==void 0?_u:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var _u=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var $u=(typeof performance=="undefined"?Date:performance).now();_u=($u-this.oldTime)/1e3,this.oldTime=$u,this.elapsedTime+=_u}return _u}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(_u){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_u,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u);var $u=this.context.listener,Bu=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),$u.positionX){var Ru=this.context.currentTime+this.timeDelta;$u.positionX.linearRampToValueAtTime(_position$2.x,Ru),$u.positionY.linearRampToValueAtTime(_position$2.y,Ru),$u.positionZ.linearRampToValueAtTime(_position$2.z,Ru),$u.forwardX.linearRampToValueAtTime(_orientation.x,Ru),$u.forwardY.linearRampToValueAtTime(_orientation.y,Ru),$u.forwardZ.linearRampToValueAtTime(_orientation.z,Ru),$u.upX.linearRampToValueAtTime(Bu.x,Ru),$u.upY.linearRampToValueAtTime(Bu.y,Ru),$u.upZ.linearRampToValueAtTime(Bu.z,Ru)}else $u.setPosition(_position$2.x,_position$2.y,_position$2.z),$u.setOrientation(_orientation.x,_orientation.y,_orientation.z,Bu.x,Bu.y,Bu.z)}});function Audio$1(_u){Object3D.call(this),this.type="Audio",this.listener=_u,this.context=_u.context,this.gain=this.context.createGain(),this.gain.connect(_u.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$1,getOutput:function(){return this.gain},setNodeSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_u,this.connect(),this},setMediaElementSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_u),this.connect(),this},setMediaStreamSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_u),this.connect(),this},setBuffer:function(_u){return this.buffer=_u,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(_u){if(_u===void 0&&(_u=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_u;var $u=this.context.createBufferSource();return $u.buffer=this.buffer,$u.loop=this.loop,$u.loopStart=this.loopStart,$u.loopEnd=this.loopEnd,$u.onended=this.onEnded.bind(this),$u.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=$u,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].connect(this.filters[_u]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].disconnect(this.filters[_u]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(_u){return _u||(_u=[]),this.isPlaying===!0?(this.disconnect(),this.filters=_u,this.connect()):this.filters=_u,this},setDetune:function(_u){if(this.detune=_u,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(_u){return this.setFilters(_u?[_u]:[])},setPlaybackRate:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_u,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_u,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(_u){return this.loopStart=_u,this},setLoopEnd:function(_u){return this.loopEnd=_u,this},getVolume:function(){return this.gain.gain.value},setVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(_u){Audio$1.call(this,_u),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$1.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(_u){return this.panner.refDistance=_u,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(_u){return this.panner.rolloffFactor=_u,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(_u){return this.panner.distanceModel=_u,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(_u){return this.panner.maxDistance=_u,this},setDirectionalCone:function(_u,$u,Bu){return this.panner.coneInnerAngle=_u,this.panner.coneOuterAngle=$u,this.panner.coneOuterGain=Bu,this},updateMatrixWorld:function(_u){if(Object3D.prototype.updateMatrixWorld.call(this,_u),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var $u=this.panner;if($u.positionX){var Bu=this.context.currentTime+this.listener.timeDelta;$u.positionX.linearRampToValueAtTime(_position$3.x,Bu),$u.positionY.linearRampToValueAtTime(_position$3.y,Bu),$u.positionZ.linearRampToValueAtTime(_position$3.z,Bu),$u.orientationX.linearRampToValueAtTime(_orientation$1.x,Bu),$u.orientationY.linearRampToValueAtTime(_orientation$1.y,Bu),$u.orientationZ.linearRampToValueAtTime(_orientation$1.z,Bu)}else $u.setPosition(_position$3.x,_position$3.y,_position$3.z),$u.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(_u,$u){this.analyser=_u.context.createAnalyser(),this.analyser.fftSize=$u!==void 0?$u:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),_u.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var _u=0,$u=this.getFrequencyData(),Bu=0;Bu<$u.length;Bu++)_u+=$u[Bu];return _u/$u.length}});function PropertyMixer(_u,$u,Bu){this.binding=_u,this.valueSize=Bu;var Ru,Lu,Ou;switch($u){case"quaternion":Ru=this._slerp,Lu=this._slerpAdditive,Ou=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Bu*6),this._workIndex=5;break;case"string":case"bool":Ru=this._select,Lu=this._select,Ou=this._setAdditiveIdentityOther,this.buffer=new Array(Bu*5);break;default:Ru=this._lerp,Lu=this._lerpAdditive,Ou=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Bu*5)}this._mixBufferRegion=Ru,this._mixBufferRegionAdditive=Lu,this._setIdentity=Ou,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(_u,$u){var Bu=this.buffer,Ru=this.valueSize,Lu=_u*Ru+Ru,Ou=this.cumulativeWeight;if(Ou===0){for(var Fu=0;Fu!==Ru;++Fu)Bu[Lu+Fu]=Bu[Fu];Ou=$u}else{Ou+=$u;var Nu=$u/Ou;this._mixBufferRegion(Bu,Lu,0,Nu,Ru)}this.cumulativeWeight=Ou},accumulateAdditive:function(_u){var $u=this.buffer,Bu=this.valueSize,Ru=Bu*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive($u,Ru,0,_u,Bu),this.cumulativeWeightAdditive+=_u},apply:function(_u){var $u=this.valueSize,Bu=this.buffer,Ru=_u*$u+$u,Lu=this.cumulativeWeight,Ou=this.cumulativeWeightAdditive,Fu=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Lu<1){var Nu=$u*this._origIndex;this._mixBufferRegion(Bu,Ru,Nu,1-Lu,$u)}Ou>0&&this._mixBufferRegionAdditive(Bu,Ru,this._addIndex*$u,1,$u);for(var Vu=$u,Uu=$u+$u;Vu!==Uu;++Vu)if(Bu[Vu]!==Bu[Vu+$u]){Fu.setValue(Bu,Ru);break}},saveOriginalState:function(){var _u=this.binding,$u=this.buffer,Bu=this.valueSize,Ru=Bu*this._origIndex;_u.getValue($u,Ru);for(var Lu=Bu,Ou=Ru;Lu!==Ou;++Lu)$u[Lu]=$u[Ru+Lu%Bu];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var _u=this.valueSize*3;this.binding.setValue(this.buffer,_u)},_setAdditiveIdentityNumeric:function(){for(var _u=this._addIndex*this.valueSize,$u=_u+this.valueSize,Bu=_u;Bu<$u;Bu++)this.buffer[Bu]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var _u=this._origIndex*this.valueSize,$u=this._addIndex*this.valueSize,Bu=0;Bu<this.valueSize;Bu++)this.buffer[$u+Bu]=this.buffer[_u+Bu]},_select:function(_u,$u,Bu,Ru,Lu){if(Ru>=.5)for(var Ou=0;Ou!==Lu;++Ou)_u[$u+Ou]=_u[Bu+Ou]},_slerp:function(_u,$u,Bu,Ru){Quaternion.slerpFlat(_u,$u,_u,$u,_u,Bu,Ru)},_slerpAdditive:function(_u,$u,Bu,Ru,Lu){var Ou=this._workIndex*Lu;Quaternion.multiplyQuaternionsFlat(_u,Ou,_u,$u,_u,Bu),Quaternion.slerpFlat(_u,$u,_u,$u,_u,Ou,Ru)},_lerp:function(_u,$u,Bu,Ru,Lu){for(var Ou=1-Ru,Fu=0;Fu!==Lu;++Fu){var Nu=$u+Fu;_u[Nu]=_u[Nu]*Ou+_u[Bu+Fu]*Ru}},_lerpAdditive:function(_u,$u,Bu,Ru,Lu){for(var Ou=0;Ou!==Lu;++Ou){var Fu=$u+Ou;_u[Fu]=_u[Fu]+_u[Bu+Ou]*Ru}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(_u,$u,Bu){var Ru=Bu||PropertyBinding.parseTrackName($u);this._targetGroup=_u,this._bindings=_u.subscribe_($u,Ru)}Object.assign(Composite.prototype,{getValue:function(_u,$u){this.bind();var Bu=this._targetGroup.nCachedObjects_,Ru=this._bindings[Bu];Ru!==void 0&&Ru.getValue(_u,$u)},setValue:function(_u,$u){for(var Bu=this._bindings,Ru=this._targetGroup.nCachedObjects_,Lu=Bu.length;Ru!==Lu;++Ru)Bu[Ru].setValue(_u,$u)},bind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Bu=_u.length;$u!==Bu;++$u)_u[$u].bind()},unbind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Bu=_u.length;$u!==Bu;++$u)_u[$u].unbind()}});function PropertyBinding(_u,$u,Bu){this.path=$u,this.parsedPath=Bu||PropertyBinding.parseTrackName($u),this.node=PropertyBinding.findNode(_u,this.parsedPath.nodeName)||_u,this.rootNode=_u}Object.assign(PropertyBinding,{Composite,create:function(_u,$u,Bu){return _u&&_u.isAnimationObjectGroup?new PropertyBinding.Composite(_u,$u,Bu):new PropertyBinding(_u,$u,Bu)},sanitizeNodeName:function(_u){return _u.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(_u){var $u=_trackRe.exec(_u);if(!$u)throw new Error("PropertyBinding: Cannot parse trackName: "+_u);var Bu={nodeName:$u[2],objectName:$u[3],objectIndex:$u[4],propertyName:$u[5],propertyIndex:$u[6]},Ru=Bu.nodeName&&Bu.nodeName.lastIndexOf(".");if(Ru!==void 0&&Ru!==-1){var Lu=Bu.nodeName.substring(Ru+1);_supportedObjectNames.indexOf(Lu)!==-1&&(Bu.nodeName=Bu.nodeName.substring(0,Ru),Bu.objectName=Lu)}if(Bu.propertyName===null||Bu.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_u);return Bu},findNode:function(_u,$u){if(!$u||$u===""||$u==="."||$u===-1||$u===_u.name||$u===_u.uuid)return _u;if(_u.skeleton){var Bu=_u.skeleton.getBoneByName($u);if(Bu!==void 0)return Bu}if(_u.children){var Ru=function(Ou){for(var Fu=0;Fu<Ou.length;Fu++){var Nu=Ou[Fu];if(Nu.name===$u||Nu.uuid===$u)return Nu;var Vu=Ru(Nu.children);if(Vu)return Vu}return null},Lu=Ru(_u.children);if(Lu)return Lu}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function($u,Bu){$u[Bu]=this.node[this.propertyName]},function($u,Bu){for(var Ru=this.resolvedProperty,Lu=0,Ou=Ru.length;Lu!==Ou;++Lu)$u[Bu++]=Ru[Lu]},function($u,Bu){$u[Bu]=this.resolvedProperty[this.propertyIndex]},function($u,Bu){this.resolvedProperty.toArray($u,Bu)}],SetterByBindingTypeAndVersioning:[[function($u,Bu){this.targetObject[this.propertyName]=$u[Bu]},function($u,Bu){this.targetObject[this.propertyName]=$u[Bu],this.targetObject.needsUpdate=!0},function($u,Bu){this.targetObject[this.propertyName]=$u[Bu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Bu){for(var Ru=this.resolvedProperty,Lu=0,Ou=Ru.length;Lu!==Ou;++Lu)Ru[Lu]=$u[Bu++]},function($u,Bu){for(var Ru=this.resolvedProperty,Lu=0,Ou=Ru.length;Lu!==Ou;++Lu)Ru[Lu]=$u[Bu++];this.targetObject.needsUpdate=!0},function($u,Bu){for(var Ru=this.resolvedProperty,Lu=0,Ou=Ru.length;Lu!==Ou;++Lu)Ru[Lu]=$u[Bu++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Bu){this.resolvedProperty[this.propertyIndex]=$u[Bu]},function($u,Bu){this.resolvedProperty[this.propertyIndex]=$u[Bu],this.targetObject.needsUpdate=!0},function($u,Bu){this.resolvedProperty[this.propertyIndex]=$u[Bu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Bu){this.resolvedProperty.fromArray($u,Bu)},function($u,Bu){this.resolvedProperty.fromArray($u,Bu),this.targetObject.needsUpdate=!0},function($u,Bu){this.resolvedProperty.fromArray($u,Bu),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function($u,Bu){this.bind(),this.getValue($u,Bu)},setValue:function($u,Bu){this.bind(),this.setValue($u,Bu)},bind:function(){var _u=this.node,$u=this.parsedPath,Bu=$u.objectName,Ru=$u.propertyName,Lu=$u.propertyIndex;if(_u||(_u=PropertyBinding.findNode(this.rootNode,$u.nodeName)||this.rootNode,this.node=_u),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_u){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(Bu){var Ou=$u.objectIndex;switch(Bu){case"materials":if(!_u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_u=_u.material.materials;break;case"bones":if(!_u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_u=_u.skeleton.bones;for(var Fu=0;Fu<_u.length;Fu++)if(_u[Fu].name===Ou){Ou=Fu;break}break;default:if(_u[Bu]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_u=_u[Bu]}if(Ou!==void 0){if(_u[Ou]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_u);return}_u=_u[Ou]}}var Nu=_u[Ru];if(Nu===void 0){var Vu=$u.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Vu+"."+Ru+" but it wasn't found.",_u);return}var Uu=this.Versioning.None;this.targetObject=_u,_u.needsUpdate!==void 0?Uu=this.Versioning.NeedsUpdate:_u.matrixWorldNeedsUpdate!==void 0&&(Uu=this.Versioning.MatrixWorldNeedsUpdate);var Gu=this.BindingType.Direct;if(Lu!==void 0){if(Ru==="morphTargetInfluences"){if(!_u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(_u.geometry.isBufferGeometry){if(!_u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_u.morphTargetDictionary[Lu]!==void 0&&(Lu=_u.morphTargetDictionary[Lu])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Gu=this.BindingType.ArrayElement,this.resolvedProperty=Nu,this.propertyIndex=Lu}else Nu.fromArray!==void 0&&Nu.toArray!==void 0?(Gu=this.BindingType.HasFromToArray,this.resolvedProperty=Nu):Array.isArray(Nu)?(Gu=this.BindingType.EntireArray,this.resolvedProperty=Nu):this.propertyName=Ru;this.getValue=this.GetterByBindingType[Gu],this.setValue=this.SetterByBindingTypeAndVersioning[Gu][Uu]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var _u={};this._indicesByUUID=_u;for(var $u=0,Bu=arguments.length;$u!==Bu;++$u)_u[arguments[$u].uuid]=$u;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Ru=this;this.stats={objects:{get total(){return Ru._objects.length},get inUse(){return this.total-Ru.nCachedObjects_}},get bindingsPerObject(){return Ru._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var _u=this._objects,$u=_u.length,Bu=this.nCachedObjects_,Ru=this._indicesByUUID,Lu=this._paths,Ou=this._parsedPaths,Fu=this._bindings,Nu=Fu.length,Vu=void 0,Uu=0,Gu=arguments.length;Uu!==Gu;++Uu){var zu=arguments[Uu],Hu=zu.uuid,ju=Ru[Hu];if(ju===void 0){ju=$u++,Ru[Hu]=ju,_u.push(zu);for(var Qu=0,Xu=Nu;Qu!==Xu;++Qu)Fu[Qu].push(new PropertyBinding(zu,Lu[Qu],Ou[Qu]))}else if(ju<Bu){Vu=_u[ju];var Ku=--Bu,Wu=_u[Ku];Ru[Wu.uuid]=ju,_u[ju]=Wu,Ru[Hu]=Ku,_u[Ku]=zu;for(var Qu=0,Xu=Nu;Qu!==Xu;++Qu){var qu=Fu[Qu],Yu=qu[Ku],Zu=qu[ju];qu[ju]=Yu,Zu===void 0&&(Zu=new PropertyBinding(zu,Lu[Qu],Ou[Qu])),qu[Ku]=Zu}}else _u[ju]!==Vu&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Bu},remove:function(){for(var _u=this._objects,$u=this.nCachedObjects_,Bu=this._indicesByUUID,Ru=this._bindings,Lu=Ru.length,Ou=0,Fu=arguments.length;Ou!==Fu;++Ou){var Nu=arguments[Ou],Vu=Nu.uuid,Uu=Bu[Vu];if(Uu!==void 0&&Uu>=$u){var Gu=$u++,zu=_u[Gu];Bu[zu.uuid]=Uu,_u[Uu]=zu,Bu[Vu]=Gu,_u[Gu]=Nu;for(var Hu=0,ju=Lu;Hu!==ju;++Hu){var Qu=Ru[Hu],Xu=Qu[Gu],Ku=Qu[Uu];Qu[Uu]=Xu,Qu[Gu]=Ku}}}this.nCachedObjects_=$u},uncache:function(){for(var _u=this._objects,$u=_u.length,Bu=this.nCachedObjects_,Ru=this._indicesByUUID,Lu=this._bindings,Ou=Lu.length,Fu=0,Nu=arguments.length;Fu!==Nu;++Fu){var Vu=arguments[Fu],Uu=Vu.uuid,Gu=Ru[Uu];if(Gu!==void 0)if(delete Ru[Uu],Gu<Bu){var zu=--Bu,Hu=_u[zu],ju=--$u,Qu=_u[ju];Ru[Hu.uuid]=Gu,_u[Gu]=Hu,Ru[Qu.uuid]=zu,_u[zu]=Qu,_u.pop();for(var Xu=0,Ku=Ou;Xu!==Ku;++Xu){var Wu=Lu[Xu],qu=Wu[zu],Yu=Wu[ju];Wu[Gu]=qu,Wu[zu]=Yu,Wu.pop()}}else{var ju=--$u,Qu=_u[ju];Ru[Qu.uuid]=Gu,_u[Gu]=Qu,_u.pop();for(var Xu=0,Ku=Ou;Xu!==Ku;++Xu){var Wu=Lu[Xu];Wu[Gu]=Wu[ju],Wu.pop()}}}this.nCachedObjects_=Bu},subscribe_:function(_u,$u){var Bu=this._bindingsIndicesByPath,Ru=Bu[_u],Lu=this._bindings;if(Ru!==void 0)return Lu[Ru];var Ou=this._paths,Fu=this._parsedPaths,Nu=this._objects,Vu=Nu.length,Uu=this.nCachedObjects_,Gu=new Array(Vu);Ru=Lu.length,Bu[_u]=Ru,Ou.push(_u),Fu.push($u),Lu.push(Gu);for(var zu=Uu,Hu=Nu.length;zu!==Hu;++zu){var ju=Nu[zu];Gu[zu]=new PropertyBinding(ju,_u,$u)}return Gu},unsubscribe_:function(_u){var $u=this._bindingsIndicesByPath,Bu=$u[_u];if(Bu!==void 0){var Ru=this._paths,Lu=this._parsedPaths,Ou=this._bindings,Fu=Ou.length-1,Nu=Ou[Fu],Vu=_u[Fu];$u[Vu]=Bu,Ou[Bu]=Nu,Ou.pop(),Lu[Bu]=Lu[Fu],Lu.pop(),Ru[Bu]=Ru[Fu],Ru.pop()}}});function AnimationAction(_u,$u,Bu,Ru){this._mixer=_u,this._clip=$u,this._localRoot=Bu||null,this.blendMode=Ru||$u.blendMode;for(var Lu=$u.tracks,Ou=Lu.length,Fu=new Array(Ou),Nu={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Vu=0;Vu!==Ou;++Vu){var Uu=Lu[Vu].createInterpolant(null);Fu[Vu]=Uu,Uu.settings=Nu}this._interpolantSettings=Nu,this._interpolants=Fu,this._propertyBindings=new Array(Ou),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(_u){return this._startTime=_u,this},setLoop:function(_u,$u){return this.loop=_u,this.repetitions=$u,this},setEffectiveWeight:function(_u){return this.weight=_u,this._effectiveWeight=this.enabled?_u:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(_u){return this._scheduleFading(_u,0,1)},fadeOut:function(_u){return this._scheduleFading(_u,1,0)},crossFadeFrom:function(_u,$u,Bu){if(_u.fadeOut($u),this.fadeIn($u),Bu){var Ru=this._clip.duration,Lu=_u._clip.duration,Ou=Lu/Ru,Fu=Ru/Lu;_u.warp(1,Ou,$u),this.warp(Fu,1,$u)}return this},crossFadeTo:function(_u,$u,Bu){return _u.crossFadeFrom(this,$u,Bu)},stopFading:function(){var _u=this._weightInterpolant;return _u!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},setEffectiveTimeScale:function(_u){return this.timeScale=_u,this._effectiveTimeScale=this.paused?0:_u,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(_u){return this.timeScale=this._clip.duration/_u,this.stopWarping()},syncWith:function(_u){return this.time=_u.time,this.timeScale=_u.timeScale,this.stopWarping()},halt:function(_u){return this.warp(this._effectiveTimeScale,0,_u)},warp:function(_u,$u,Bu){var Ru=this._mixer,Lu=Ru.time,Ou=this._timeScaleInterpolant,Fu=this.timeScale;Ou===null&&(Ou=Ru._lendControlInterpolant(),this._timeScaleInterpolant=Ou);var Nu=Ou.parameterPositions,Vu=Ou.sampleValues;return Nu[0]=Lu,Nu[1]=Lu+Bu,Vu[0]=_u/Fu,Vu[1]=$u/Fu,this},stopWarping:function(){var _u=this._timeScaleInterpolant;return _u!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(_u,$u,Bu,Ru){if(!this.enabled){this._updateWeight(_u);return}var Lu=this._startTime;if(Lu!==null){var Ou=(_u-Lu)*Bu;if(Ou<0||Bu===0)return;this._startTime=null,$u=Bu*Ou}$u*=this._updateTimeScale(_u);var Fu=this._updateTime($u),Nu=this._updateWeight(_u);if(Nu>0){var Vu=this._interpolants,Uu=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Gu=0,zu=Vu.length;Gu!==zu;++Gu)Vu[Gu].evaluate(Fu),Uu[Gu].accumulateAdditive(Nu);break;case NormalAnimationBlendMode:default:for(var Gu=0,zu=Vu.length;Gu!==zu;++Gu)Vu[Gu].evaluate(Fu),Uu[Gu].accumulate(Ru,Nu)}}},_updateWeight:function(_u){var $u=0;if(this.enabled){$u=this.weight;var Bu=this._weightInterpolant;if(Bu!==null){var Ru=Bu.evaluate(_u)[0];$u*=Ru,_u>Bu.parameterPositions[1]&&(this.stopFading(),Ru===0&&(this.enabled=!1))}}return this._effectiveWeight=$u,$u},_updateTimeScale:function(_u){var $u=0;if(!this.paused){$u=this.timeScale;var Bu=this._timeScaleInterpolant;if(Bu!==null){var Ru=Bu.evaluate(_u)[0];$u*=Ru,_u>Bu.parameterPositions[1]&&(this.stopWarping(),$u===0?this.paused=!0:this.timeScale=$u)}}return this._effectiveTimeScale=$u,$u},_updateTime:function(_u){var $u=this.time+_u,Bu=this._clip.duration,Ru=this.loop,Lu=this._loopCount,Ou=Ru===LoopPingPong;if(_u===0)return Lu===-1?$u:Ou&&(Lu&1)===1?Bu-$u:$u;if(Ru===LoopOnce){Lu===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if($u>=Bu)$u=Bu;else if($u<0)$u=0;else{this.time=$u;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u<0?-1:1})}}else{if(Lu===-1&&(_u>=0?(Lu=0,this._setEndings(!0,this.repetitions===0,Ou)):this._setEndings(this.repetitions===0,!0,Ou)),$u>=Bu||$u<0){var Fu=Math.floor($u/Bu);$u-=Bu*Fu,Lu+=Math.abs(Fu);var Nu=this.repetitions-Lu;if(Nu<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,$u=_u>0?Bu:0,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u>0?1:-1});else{if(Nu===1){var Vu=_u<0;this._setEndings(Vu,!Vu,Ou)}else this._setEndings(!1,!1,Ou);this._loopCount=Lu,this.time=$u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Fu})}}else this.time=$u;if(Ou&&(Lu&1)===1)return Bu-$u}return $u},_setEndings:function(_u,$u,Bu){var Ru=this._interpolantSettings;Bu?(Ru.endingStart=ZeroSlopeEnding,Ru.endingEnd=ZeroSlopeEnding):(_u?Ru.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Ru.endingStart=WrapAroundEnding,$u?Ru.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Ru.endingEnd=WrapAroundEnding)},_scheduleFading:function(_u,$u,Bu){var Ru=this._mixer,Lu=Ru.time,Ou=this._weightInterpolant;Ou===null&&(Ou=Ru._lendControlInterpolant(),this._weightInterpolant=Ou);var Fu=Ou.parameterPositions,Nu=Ou.sampleValues;return Fu[0]=Lu,Nu[0]=$u,Fu[1]=Lu+_u,Nu[1]=Bu,this}});function AnimationMixer(_u){this._root=_u,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(_u,$u){var Bu=_u._localRoot||this._root,Ru=_u._clip.tracks,Lu=Ru.length,Ou=_u._propertyBindings,Fu=_u._interpolants,Nu=Bu.uuid,Vu=this._bindingsByRootAndName,Uu=Vu[Nu];Uu===void 0&&(Uu={},Vu[Nu]=Uu);for(var Gu=0;Gu!==Lu;++Gu){var zu=Ru[Gu],Hu=zu.name,ju=Uu[Hu];if(ju!==void 0)Ou[Gu]=ju;else{if(ju=Ou[Gu],ju!==void 0){ju._cacheIndex===null&&(++ju.referenceCount,this._addInactiveBinding(ju,Nu,Hu));continue}var Qu=$u&&$u._propertyBindings[Gu].binding.parsedPath;ju=new PropertyMixer(PropertyBinding.create(Bu,Hu,Qu),zu.ValueTypeName,zu.getValueSize()),++ju.referenceCount,this._addInactiveBinding(ju,Nu,Hu),Ou[Gu]=ju}Fu[Gu].resultBuffer=ju.buffer}},_activateAction:function(_u){if(!this._isActiveAction(_u)){if(_u._cacheIndex===null){var $u=(_u._localRoot||this._root).uuid,Bu=_u._clip.uuid,Ru=this._actionsByClip[Bu];this._bindAction(_u,Ru&&Ru.knownActions[0]),this._addInactiveAction(_u,Bu,$u)}for(var Lu=_u._propertyBindings,Ou=0,Fu=Lu.length;Ou!==Fu;++Ou){var Nu=Lu[Ou];Nu.useCount++===0&&(this._lendBinding(Nu),Nu.saveOriginalState())}this._lendAction(_u)}},_deactivateAction:function(_u){if(this._isActiveAction(_u)){for(var $u=_u._propertyBindings,Bu=0,Ru=$u.length;Bu!==Ru;++Bu){var Lu=$u[Bu];--Lu.useCount===0&&(Lu.restoreOriginalState(),this._takeBackBinding(Lu))}this._takeBackAction(_u)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var _u=this;this.stats={actions:{get total(){return _u._actions.length},get inUse(){return _u._nActiveActions}},bindings:{get total(){return _u._bindings.length},get inUse(){return _u._nActiveBindings}},controlInterpolants:{get total(){return _u._controlInterpolants.length},get inUse(){return _u._nActiveControlInterpolants}}}},_isActiveAction:function(_u){var $u=_u._cacheIndex;return $u!==null&&$u<this._nActiveActions},_addInactiveAction:function(_u,$u,Bu){var Ru=this._actions,Lu=this._actionsByClip,Ou=Lu[$u];if(Ou===void 0)Ou={knownActions:[_u],actionByRoot:{}},_u._byClipCacheIndex=0,Lu[$u]=Ou;else{var Fu=Ou.knownActions;_u._byClipCacheIndex=Fu.length,Fu.push(_u)}_u._cacheIndex=Ru.length,Ru.push(_u),Ou.actionByRoot[Bu]=_u},_removeInactiveAction:function(_u){var $u=this._actions,Bu=$u[$u.length-1],Ru=_u._cacheIndex;Bu._cacheIndex=Ru,$u[Ru]=Bu,$u.pop(),_u._cacheIndex=null;var Lu=_u._clip.uuid,Ou=this._actionsByClip,Fu=Ou[Lu],Nu=Fu.knownActions,Vu=Nu[Nu.length-1],Uu=_u._byClipCacheIndex;Vu._byClipCacheIndex=Uu,Nu[Uu]=Vu,Nu.pop(),_u._byClipCacheIndex=null;var Gu=Fu.actionByRoot,zu=(_u._localRoot||this._root).uuid;delete Gu[zu],Nu.length===0&&delete Ou[Lu],this._removeInactiveBindingsForAction(_u)},_removeInactiveBindingsForAction:function(_u){for(var $u=_u._propertyBindings,Bu=0,Ru=$u.length;Bu!==Ru;++Bu){var Lu=$u[Bu];--Lu.referenceCount===0&&this._removeInactiveBinding(Lu)}},_lendAction:function(_u){var $u=this._actions,Bu=_u._cacheIndex,Ru=this._nActiveActions++,Lu=$u[Ru];_u._cacheIndex=Ru,$u[Ru]=_u,Lu._cacheIndex=Bu,$u[Bu]=Lu},_takeBackAction:function(_u){var $u=this._actions,Bu=_u._cacheIndex,Ru=--this._nActiveActions,Lu=$u[Ru];_u._cacheIndex=Ru,$u[Ru]=_u,Lu._cacheIndex=Bu,$u[Bu]=Lu},_addInactiveBinding:function(_u,$u,Bu){var Ru=this._bindingsByRootAndName,Lu=Ru[$u],Ou=this._bindings;Lu===void 0&&(Lu={},Ru[$u]=Lu),Lu[Bu]=_u,_u._cacheIndex=Ou.length,Ou.push(_u)},_removeInactiveBinding:function(_u){var $u=this._bindings,Bu=_u.binding,Ru=Bu.rootNode.uuid,Lu=Bu.path,Ou=this._bindingsByRootAndName,Fu=Ou[Ru],Nu=$u[$u.length-1],Vu=_u._cacheIndex;Nu._cacheIndex=Vu,$u[Vu]=Nu,$u.pop(),delete Fu[Lu],Object.keys(Fu).length===0&&delete Ou[Ru]},_lendBinding:function(_u){var $u=this._bindings,Bu=_u._cacheIndex,Ru=this._nActiveBindings++,Lu=$u[Ru];_u._cacheIndex=Ru,$u[Ru]=_u,Lu._cacheIndex=Bu,$u[Bu]=Lu},_takeBackBinding:function(_u){var $u=this._bindings,Bu=_u._cacheIndex,Ru=--this._nActiveBindings,Lu=$u[Ru];_u._cacheIndex=Ru,$u[Ru]=_u,Lu._cacheIndex=Bu,$u[Bu]=Lu},_lendControlInterpolant:function(){var _u=this._controlInterpolants,$u=this._nActiveControlInterpolants++,Bu=_u[$u];return Bu===void 0&&(Bu=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Bu.__cacheIndex=$u,_u[$u]=Bu),Bu},_takeBackControlInterpolant:function(_u){var $u=this._controlInterpolants,Bu=_u.__cacheIndex,Ru=--this._nActiveControlInterpolants,Lu=$u[Ru];_u.__cacheIndex=Ru,$u[Ru]=_u,Lu.__cacheIndex=Bu,$u[Bu]=Lu},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(_u,$u,Bu){var Ru=$u||this._root,Lu=Ru.uuid,Ou=typeof _u=="string"?AnimationClip.findByName(Ru,_u):_u,Fu=Ou!==null?Ou.uuid:_u,Nu=this._actionsByClip[Fu],Vu=null;if(Bu===void 0&&(Ou!==null?Bu=Ou.blendMode:Bu=NormalAnimationBlendMode),Nu!==void 0){var Uu=Nu.actionByRoot[Lu];if(Uu!==void 0&&Uu.blendMode===Bu)return Uu;Vu=Nu.knownActions[0],Ou===null&&(Ou=Vu._clip)}if(Ou===null)return null;var Gu=new AnimationAction(this,Ou,$u,Bu);return this._bindAction(Gu,Vu),this._addInactiveAction(Gu,Fu,Lu),Gu},existingAction:function(_u,$u){var Bu=$u||this._root,Ru=Bu.uuid,Lu=typeof _u=="string"?AnimationClip.findByName(Bu,_u):_u,Ou=Lu?Lu.uuid:_u,Fu=this._actionsByClip[Ou];return Fu!==void 0&&Fu.actionByRoot[Ru]||null},stopAllAction:function(){for(var _u=this._actions,$u=this._nActiveActions,Bu=$u-1;Bu>=0;--Bu)_u[Bu].stop();return this},update:function(_u){_u*=this.timeScale;for(var $u=this._actions,Bu=this._nActiveActions,Ru=this.time+=_u,Lu=Math.sign(_u),Ou=this._accuIndex^=1,Fu=0;Fu!==Bu;++Fu){var Nu=$u[Fu];Nu._update(Ru,_u,Lu,Ou)}for(var Vu=this._bindings,Uu=this._nActiveBindings,Fu=0;Fu!==Uu;++Fu)Vu[Fu].apply(Ou);return this},setTime:function(_u){this.time=0;for(var $u=0;$u<this._actions.length;$u++)this._actions[$u].time=0;return this.update(_u)},getRoot:function(){return this._root},uncacheClip:function(_u){var $u=this._actions,Bu=_u.uuid,Ru=this._actionsByClip,Lu=Ru[Bu];if(Lu!==void 0){for(var Ou=Lu.knownActions,Fu=0,Nu=Ou.length;Fu!==Nu;++Fu){var Vu=Ou[Fu];this._deactivateAction(Vu);var Uu=Vu._cacheIndex,Gu=$u[$u.length-1];Vu._cacheIndex=null,Vu._byClipCacheIndex=null,Gu._cacheIndex=Uu,$u[Uu]=Gu,$u.pop(),this._removeInactiveBindingsForAction(Vu)}delete Ru[Bu]}},uncacheRoot:function(_u){var $u=_u.uuid,Bu=this._actionsByClip;for(var Ru in Bu){var Lu=Bu[Ru].actionByRoot,Ou=Lu[$u];Ou!==void 0&&(this._deactivateAction(Ou),this._removeInactiveAction(Ou))}var Fu=this._bindingsByRootAndName,Nu=Fu[$u];if(Nu!==void 0)for(var Vu in Nu){var Uu=Nu[Vu];Uu.restoreOriginalState(),this._removeInactiveBinding(Uu)}},uncacheAction:function(_u,$u){var Bu=this.existingAction(_u,$u);Bu!==null&&(this._deactivateAction(Bu),this._removeInactiveAction(Bu))}});function Uniform(_u){typeof _u=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),_u=arguments[1]),this.value=_u}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(_u,$u,Bu){InterleavedBuffer.call(this,_u,$u),this.meshPerAttribute=Bu||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(_u){return InterleavedBuffer.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this}});function Raycaster(_u,$u,Bu,Ru){this.ray=new Ray(_u,$u),this.near=Bu||0,this.far=Ru||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(_u,$u){return _u.distance-$u.distance}function intersectObject(_u,$u,Bu,Ru){if(_u.layers.test($u.layers)&&_u.raycast($u,Bu),Ru===!0)for(var Lu=_u.children,Ou=0,Fu=Lu.length;Ou<Fu;Ou++)intersectObject(Lu[Ou],$u,Bu,!0)}Object.assign(Raycaster.prototype,{set:function(_u,$u){this.ray.set(_u,$u)},setFromCamera:function(_u,$u){$u&&$u.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition($u.matrixWorld),this.ray.direction.set(_u.x,_u.y,.5).unproject($u).sub(this.ray.origin).normalize(),this.camera=$u):$u&&$u.isOrthographicCamera?(this.ray.origin.set(_u.x,_u.y,($u.near+$u.far)/($u.near-$u.far)).unproject($u),this.ray.direction.set(0,0,-1).transformDirection($u.matrixWorld),this.camera=$u):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(_u,$u,Bu){var Ru=Bu||[];return intersectObject(_u,this,Ru,$u),Ru.sort(ascSort),Ru},intersectObjects:function(_u,$u,Bu){var Ru=Bu||[];if(Array.isArray(_u)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Ru;for(var Lu=0,Ou=_u.length;Lu<Ou;Lu++)intersectObject(_u[Lu],this,Ru,$u);return Ru.sort(ascSort),Ru}});function Spherical(_u,$u,Bu){return this.radius=_u!==void 0?_u:1,this.phi=$u!==void 0?$u:0,this.theta=Bu!==void 0?Bu:0,this}Object.assign(Spherical.prototype,{set:function(_u,$u,Bu){return this.radius=_u,this.phi=$u,this.theta=Bu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.phi=_u.phi,this.theta=_u.theta,this},makeSafe:function(){var _u=1e-6;return this.phi=Math.max(_u,Math.min(Math.PI-_u,this.phi)),this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Bu){return this.radius=Math.sqrt(_u*_u+$u*$u+Bu*Bu),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_u,Bu),this.phi=Math.acos(MathUtils.clamp($u/this.radius,-1,1))),this}});function Cylindrical(_u,$u,Bu){return this.radius=_u!==void 0?_u:1,this.theta=$u!==void 0?$u:0,this.y=Bu!==void 0?Bu:0,this}Object.assign(Cylindrical.prototype,{set:function(_u,$u,Bu){return this.radius=_u,this.theta=$u,this.y=Bu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.theta=_u.theta,this.y=_u.y,this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Bu){return this.radius=Math.sqrt(_u*_u+Bu*Bu),this.theta=Math.atan2(_u,Bu),this.y=$u,this}});var _vector$7=new Vector2;function Box2(_u,$u){this.min=_u!==void 0?_u:new Vector2(1/0,1/0),this.max=$u!==void 0?$u:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Bu=_u.length;$u<Bu;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Bu=_vector$7.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Bu),this.max.copy(_u).add(Bu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),$u=new Vector2),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y)},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),$u=new Vector2),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$7.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(_u,$u){this.start=_u!==void 0?_u:new Vector3,this.end=$u!==void 0?$u:new Vector3}Object.assign(Line3.prototype,{set:function(_u,$u){return this.start.copy(_u),this.end.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.start.copy(_u.start),this.end.copy(_u.end),this},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),_u=new Vector3),_u.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),_u=new Vector3),_u.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Line3: .at() target is now required"),$u=new Vector3),this.delta($u).multiplyScalar(_u).add(this.start)},closestPointToPointParameter:function(_u,$u){_startP.subVectors(_u,this.start),_startEnd.subVectors(this.end,this.start);var Bu=_startEnd.dot(_startEnd),Ru=_startEnd.dot(_startP),Lu=Ru/Bu;return $u&&(Lu=MathUtils.clamp(Lu,0,1)),Lu},closestPointToPoint:function(_u,$u,Bu){var Ru=this.closestPointToPointParameter(_u,$u);return Bu===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),Bu=new Vector3),this.delta(Bu).multiplyScalar(Ru).add(this.start)},applyMatrix4:function(_u){return this.start.applyMatrix4(_u),this.end.applyMatrix4(_u),this},equals:function(_u){return _u.start.equals(this.start)&&_u.end.equals(this.end)}});function ImmediateRenderObject(_u){Object3D.call(this),this.material=_u,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(_u,$u){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=$u;for(var Bu=new BufferGeometry,Ru=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Lu=0,Ou=1,Fu=32;Lu<Fu;Lu++,Ou++){var Nu=Lu/Fu*Math.PI*2,Vu=Ou/Fu*Math.PI*2;Ru.push(Math.cos(Nu),Math.sin(Nu),1,Math.cos(Vu),Math.sin(Vu),1)}Bu.setAttribute("position",new Float32BufferAttribute(Ru,3));var Uu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Bu,Uu),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var _u=this.light.distance?this.light.distance:1e3,$u=_u*Math.tan(this.light.angle);this.cone.scale.set($u,$u,_u),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(_u){var $u=[];_u&&_u.isBone&&$u.push(_u);for(var Bu=0;Bu<_u.children.length;Bu++)$u.push.apply($u,getBoneList(_u.children[Bu]));return $u}function SkeletonHelper(_u){for(var $u=getBoneList(_u),Bu=new BufferGeometry,Ru=[],Lu=[],Ou=new Color(0,0,1),Fu=new Color(0,1,0),Nu=0;Nu<$u.length;Nu++){var Vu=$u[Nu];Vu.parent&&Vu.parent.isBone&&(Ru.push(0,0,0),Ru.push(0,0,0),Lu.push(Ou.r,Ou.g,Ou.b),Lu.push(Fu.r,Fu.g,Fu.b))}Bu.setAttribute("position",new Float32BufferAttribute(Ru,3)),Bu.setAttribute("color",new Float32BufferAttribute(Lu,3));var Uu=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,Bu,Uu),this.type="SkeletonHelper",this.root=_u,this.bones=$u,this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(_u){var $u=this.bones,Bu=this.geometry,Ru=Bu.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Lu=0,Ou=0;Lu<$u.length;Lu++){var Fu=$u[Lu];Fu.parent&&Fu.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Fu.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ru.setXYZ(Ou,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Fu.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ru.setXYZ(Ou+1,_vector$9.x,_vector$9.y,_vector$9.z),Ou+=2)}Bu.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,_u)};function PointLightHelper(_u,$u,Bu){this.light=_u,this.light.updateMatrixWorld(),this.color=Bu;var Ru=new SphereBufferGeometry($u,4,2),Lu=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Ru,Lu),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(_u,$u,Bu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Bu;var Ru=new OctahedronBufferGeometry($u);Ru.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Lu=Ru.getAttribute("position"),Ou=new Float32Array(Lu.count*3);Ru.setAttribute("color",new BufferAttribute(Ou,3)),this.add(new Mesh(Ru,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var _u=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var $u=_u.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var Bu=0,Ru=$u.count;Bu<Ru;Bu++){var Lu=Bu<Ru/2?_color1:_color2;$u.setXYZ(Bu,Lu.r,Lu.g,Lu.b)}$u.needsUpdate=!0}_u.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(_u,$u,Bu,Ru){_u=_u||10,$u=$u||10,Bu=new Color(Bu!==void 0?Bu:4473924),Ru=new Color(Ru!==void 0?Ru:8947848);for(var Lu=$u/2,Ou=_u/$u,Fu=_u/2,Nu=[],Vu=[],Uu=0,Gu=0,zu=-Fu;Uu<=$u;Uu++,zu+=Ou){Nu.push(-Fu,0,zu,Fu,0,zu),Nu.push(zu,0,-Fu,zu,0,Fu);var Hu=Uu===Lu?Bu:Ru;Hu.toArray(Vu,Gu),Gu+=3,Hu.toArray(Vu,Gu),Gu+=3,Hu.toArray(Vu,Gu),Gu+=3,Hu.toArray(Vu,Gu),Gu+=3}var ju=new BufferGeometry;ju.setAttribute("position",new Float32BufferAttribute(Nu,3)),ju.setAttribute("color",new Float32BufferAttribute(Vu,3));var Qu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,ju,Qu),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(_u){return LineSegments.prototype.copy.call(this,_u),this.geometry.copy(_u.geometry),this.material.copy(_u.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(_u,$u,Bu,Ru,Lu,Ou){_u=_u||10,$u=$u||16,Bu=Bu||8,Ru=Ru||64,Lu=new Color(Lu!==void 0?Lu:4473924),Ou=new Color(Ou!==void 0?Ou:8947848);var Fu=[],Nu=[],Vu,Uu,Gu,zu,Hu,ju,Qu;for(zu=0;zu<=$u;zu++)Gu=zu/$u*(Math.PI*2),Vu=Math.sin(Gu)*_u,Uu=Math.cos(Gu)*_u,Fu.push(0,0,0),Fu.push(Vu,0,Uu),Qu=zu&1?Lu:Ou,Nu.push(Qu.r,Qu.g,Qu.b),Nu.push(Qu.r,Qu.g,Qu.b);for(zu=0;zu<=Bu;zu++)for(Qu=zu&1?Lu:Ou,ju=_u-_u/Bu*zu,Hu=0;Hu<Ru;Hu++)Gu=Hu/Ru*(Math.PI*2),Vu=Math.sin(Gu)*ju,Uu=Math.cos(Gu)*ju,Fu.push(Vu,0,Uu),Nu.push(Qu.r,Qu.g,Qu.b),Gu=(Hu+1)/Ru*(Math.PI*2),Vu=Math.sin(Gu)*ju,Uu=Math.cos(Gu)*ju,Fu.push(Vu,0,Uu),Nu.push(Qu.r,Qu.g,Qu.b);var Xu=new BufferGeometry;Xu.setAttribute("position",new Float32BufferAttribute(Fu,3)),Xu.setAttribute("color",new Float32BufferAttribute(Nu,3));var Ku=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Xu,Ku),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(_u,$u,Bu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Bu,$u===void 0&&($u=1);var Ru=new BufferGeometry;Ru.setAttribute("position",new Float32BufferAttribute([-$u,$u,0,$u,$u,0,$u,-$u,0,-$u,-$u,0,-$u,$u,0],3));var Lu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Ru,Lu),this.add(this.lightPlane),Ru=new BufferGeometry,Ru.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Ru,Lu),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(_u){var $u=new BufferGeometry,Bu=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Ru=[],Lu=[],Ou={},Fu=new Color(16755200),Nu=new Color(16711680),Vu=new Color(43775),Uu=new Color(16777215),Gu=new Color(3355443);zu("n1","n2",Fu),zu("n2","n4",Fu),zu("n4","n3",Fu),zu("n3","n1",Fu),zu("f1","f2",Fu),zu("f2","f4",Fu),zu("f4","f3",Fu),zu("f3","f1",Fu),zu("n1","f1",Fu),zu("n2","f2",Fu),zu("n3","f3",Fu),zu("n4","f4",Fu),zu("p","n1",Nu),zu("p","n2",Nu),zu("p","n3",Nu),zu("p","n4",Nu),zu("u1","u2",Vu),zu("u2","u3",Vu),zu("u3","u1",Vu),zu("c","t",Uu),zu("p","c",Gu),zu("cn1","cn2",Gu),zu("cn3","cn4",Gu),zu("cf1","cf2",Gu),zu("cf3","cf4",Gu);function zu(ju,Qu,Xu){Hu(ju,Xu),Hu(Qu,Xu)}function Hu(ju,Qu){Ru.push(0,0,0),Lu.push(Qu.r,Qu.g,Qu.b),Ou[ju]===void 0&&(Ou[ju]=[]),Ou[ju].push(Ru.length/3-1)}$u.setAttribute("position",new Float32BufferAttribute(Ru,3)),$u.setAttribute("color",new Float32BufferAttribute(Lu,3)),LineSegments.call(this,$u,Bu),this.type="CameraHelper",this.camera=_u,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ou,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var _u=this.geometry,$u=this.pointMap,Bu=1,Ru=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",$u,_u,_camera,0,0,-1),setPoint("t",$u,_u,_camera,0,0,1),setPoint("n1",$u,_u,_camera,-Bu,-Ru,-1),setPoint("n2",$u,_u,_camera,Bu,-Ru,-1),setPoint("n3",$u,_u,_camera,-Bu,Ru,-1),setPoint("n4",$u,_u,_camera,Bu,Ru,-1),setPoint("f1",$u,_u,_camera,-Bu,-Ru,1),setPoint("f2",$u,_u,_camera,Bu,-Ru,1),setPoint("f3",$u,_u,_camera,-Bu,Ru,1),setPoint("f4",$u,_u,_camera,Bu,Ru,1),setPoint("u1",$u,_u,_camera,Bu*.7,Ru*1.1,-1),setPoint("u2",$u,_u,_camera,-Bu*.7,Ru*1.1,-1),setPoint("u3",$u,_u,_camera,0,Ru*2,-1),setPoint("cf1",$u,_u,_camera,-Bu,0,1),setPoint("cf2",$u,_u,_camera,Bu,0,1),setPoint("cf3",$u,_u,_camera,0,-Ru,1),setPoint("cf4",$u,_u,_camera,0,Ru,1),setPoint("cn1",$u,_u,_camera,-Bu,0,-1),setPoint("cn2",$u,_u,_camera,Bu,0,-1),setPoint("cn3",$u,_u,_camera,0,-Ru,-1),setPoint("cn4",$u,_u,_camera,0,Ru,-1),_u.getAttribute("position").needsUpdate=!0};function setPoint(_u,$u,Bu,Ru,Lu,Ou,Fu){_vector$b.set(Lu,Ou,Fu).unproject(Ru);var Nu=$u[_u];if(Nu!==void 0)for(var Vu=Bu.getAttribute("position"),Uu=0,Gu=Nu.length;Uu<Gu;Uu++)Vu.setXYZ(Nu[Uu],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(_u,$u){this.object=_u,$u===void 0&&($u=16776960);var Bu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ru=new Float32Array(8*3),Lu=new BufferGeometry;Lu.setIndex(new BufferAttribute(Bu,1)),Lu.setAttribute("position",new BufferAttribute(Ru,3)),LineSegments.call(this,Lu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(_u){if(_u!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var $u=_box$3.min,Bu=_box$3.max,Ru=this.geometry.attributes.position,Lu=Ru.array;Lu[0]=Bu.x,Lu[1]=Bu.y,Lu[2]=Bu.z,Lu[3]=$u.x,Lu[4]=Bu.y,Lu[5]=Bu.z,Lu[6]=$u.x,Lu[7]=$u.y,Lu[8]=Bu.z,Lu[9]=Bu.x,Lu[10]=$u.y,Lu[11]=Bu.z,Lu[12]=Bu.x,Lu[13]=Bu.y,Lu[14]=$u.z,Lu[15]=$u.x,Lu[16]=Bu.y,Lu[17]=$u.z,Lu[18]=$u.x,Lu[19]=$u.y,Lu[20]=$u.z,Lu[21]=Bu.x,Lu[22]=$u.y,Lu[23]=$u.z,Ru.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(_u){return this.object=_u,this.update(),this};BoxHelper.prototype.copy=function(_u){return LineSegments.prototype.copy.call(this,_u),this.object=_u.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(_u,$u){this.type="Box3Helper",this.box=_u,$u=$u||16776960;var Bu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ru=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Lu=new BufferGeometry;Lu.setIndex(new BufferAttribute(Bu,1)),Lu.setAttribute("position",new Float32BufferAttribute(Ru,3)),LineSegments.call(this,Lu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(_u){var $u=this.box;$u.isEmpty()||($u.getCenter(this.position),$u.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,_u))};function PlaneHelper(_u,$u,Bu){this.plane=_u,this.size=$u===void 0?1:$u;var Ru=Bu!==void 0?Bu:16776960,Lu=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Ou=new BufferGeometry;Ou.setAttribute("position",new Float32BufferAttribute(Lu,3)),Ou.computeBoundingSphere(),Line$1.call(this,Ou,new LineBasicMaterial({color:Ru,toneMapped:!1})),this.type="PlaneHelper";var Fu=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Nu=new BufferGeometry;Nu.setAttribute("position",new Float32BufferAttribute(Fu,3)),Nu.computeBoundingSphere(),this.add(new Mesh(Nu,new MeshBasicMaterial({color:Ru,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(_u){var $u=-this.plane.constant;Math.abs($u)<1e-8&&($u=1e-8),this.scale.set(.5*this.size,.5*this.size,$u),this.children[0].material.side=$u<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,_u)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(_u,$u,Bu,Ru,Lu,Ou){Object3D.call(this),this.type="ArrowHelper",_u===void 0&&(_u=new Vector3(0,0,1)),$u===void 0&&($u=new Vector3(0,0,0)),Bu===void 0&&(Bu=1),Ru===void 0&&(Ru=16776960),Lu===void 0&&(Lu=.2*Bu),Ou===void 0&&(Ou=.2*Lu),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy($u),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Ru,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Ru,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_u),this.setLength(Bu,Lu,Ou)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(_u){if(_u.y>.99999)this.quaternion.set(0,0,0,1);else if(_u.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_u.z,0,-_u.x).normalize();var $u=Math.acos(_u.y);this.quaternion.setFromAxisAngle(_axis,$u)}};ArrowHelper.prototype.setLength=function(_u,$u,Bu){$u===void 0&&($u=.2*_u),Bu===void 0&&(Bu=.2*$u),this.line.scale.set(1,Math.max(1e-4,_u-$u),1),this.line.updateMatrix(),this.cone.scale.set(Bu,$u,Bu),this.cone.position.y=_u,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(_u){this.line.material.color.set(_u),this.cone.material.color.set(_u)};ArrowHelper.prototype.copy=function(_u){return Object3D.prototype.copy.call(this,_u,!1),this.line.copy(_u.line),this.cone.copy(_u.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(_u){_u=_u||1;var $u=[0,0,0,_u,0,0,0,0,0,0,_u,0,0,0,0,0,0,_u],Bu=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Ru=new BufferGeometry;Ru.setAttribute("position",new Float32BufferAttribute($u,3)),Ru.setAttribute("color",new Float32BufferAttribute(Bu,3));var Lu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Ru,Lu),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(_u){this._renderer=_u,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(_u,$u=0,Bu=.1,Ru=100){_oldTarget=this._renderer.getRenderTarget();var Lu=this._allocateTargets();return this._sceneToCubeUV(_u,Bu,Ru,Lu),$u>0&&this._blur(Lu,0,0,$u),this._applyPMREM(Lu),this._cleanup(Lu),Lu},fromEquirectangular:function(_u){return _u.magFilter=NearestFilter,_u.minFilter=NearestFilter,_u.generateMipmaps=!1,this.fromCubemap(_u)},fromCubemap:function(_u){_oldTarget=this._renderer.getRenderTarget();var $u=this._allocateTargets(_u);return this._textureToCubeUV(_u,$u),this._applyPMREM($u),this._cleanup($u),$u},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var _u=0;_u<_lodPlanes.length;_u++)_lodPlanes[_u].dispose()},_cleanup:function(_u){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),_u.scissorTest=!1,_u.setSize(_u.width,_u.height)},_allocateTargets:function(_u){var $u={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(_u)?_u.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},Bu=_createRenderTarget($u);return Bu.depthBuffer=!_u,this._pingPongRenderTarget=_createRenderTarget($u),Bu},_compileMaterial:function(_u){var $u=new Mesh(_lodPlanes[0],_u);this._renderer.compile($u,_flatCamera)},_sceneToCubeUV:function(_u,$u,Bu,Ru){var Lu=90,Ou=1,Fu=new PerspectiveCamera(Lu,Ou,$u,Bu),Nu=[1,-1,1,1,1,1],Vu=[1,1,1,-1,-1,-1],Uu=this._renderer,Gu=Uu.outputEncoding,zu=Uu.toneMapping,Hu=Uu.toneMappingExposure,ju=Uu.getClearColor(),Qu=Uu.getClearAlpha();Uu.toneMapping=LinearToneMapping,Uu.toneMappingExposure=1,Uu.outputEncoding=LinearEncoding;var Xu=_u.background;if(Xu&&Xu.isColor){Xu.convertSRGBToLinear();var Ku=Math.max(Xu.r,Xu.g,Xu.b),Wu=Math.min(Math.max(Math.ceil(Math.log2(Ku)),-128),127);Xu=Xu.multiplyScalar(Math.pow(2,-Wu));var qu=(Wu+128)/255;Uu.setClearColor(Xu,qu),_u.background=null}for(var Yu=0;Yu<6;Yu++){var Zu=Yu%3;Zu==0?(Fu.up.set(0,Nu[Yu],0),Fu.lookAt(Vu[Yu],0,0)):Zu==1?(Fu.up.set(0,0,Nu[Yu]),Fu.lookAt(0,Vu[Yu],0)):(Fu.up.set(0,Nu[Yu],0),Fu.lookAt(0,0,Vu[Yu])),_setViewport(Ru,Zu*SIZE_MAX,Yu>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Uu.setRenderTarget(Ru),Uu.render(_u,Fu)}Uu.toneMapping=zu,Uu.toneMappingExposure=Hu,Uu.outputEncoding=Gu,Uu.setClearColor(ju,Qu)},_textureToCubeUV:function(_u,$u){var Bu=this._renderer;_u.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Ru=_u.isCubeTexture?this._cubemapShader:this._equirectShader,Lu=new Mesh(_lodPlanes[0],Ru),Ou=Ru.uniforms;Ou.envMap.value=_u,_u.isCubeTexture||Ou.texelSize.value.set(1/_u.image.width,1/_u.image.height),Ou.inputEncoding.value=ENCODINGS[_u.encoding],Ou.outputEncoding.value=ENCODINGS[$u.texture.encoding],_setViewport($u,0,0,3*SIZE_MAX,2*SIZE_MAX),Bu.setRenderTarget($u),Bu.render(Lu,_flatCamera)},_applyPMREM:function(_u){var $u=this._renderer,Bu=$u.autoClear;$u.autoClear=!1;for(var Ru=1;Ru<TOTAL_LODS;Ru++){var Lu=Math.sqrt(_sigmas[Ru]*_sigmas[Ru]-_sigmas[Ru-1]*_sigmas[Ru-1]),Ou=_axisDirections[(Ru-1)%_axisDirections.length];this._blur(_u,Ru-1,Ru,Lu,Ou)}$u.autoClear=Bu},_blur:function(_u,$u,Bu,Ru,Lu){var Ou=this._pingPongRenderTarget;this._halfBlur(_u,Ou,$u,Bu,Ru,"latitudinal",Lu),this._halfBlur(Ou,_u,Bu,Bu,Ru,"longitudinal",Lu)},_halfBlur:function(_u,$u,Bu,Ru,Lu,Ou,Fu){var Nu=this._renderer,Vu=this._blurMaterial;Ou!=="latitudinal"&&Ou!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Uu=3,Gu=new Mesh(_lodPlanes[Ru],Vu),zu=Vu.uniforms,Hu=_sizeLods[Bu]-1,ju=isFinite(Lu)?Math.PI/(2*Hu):2*Math.PI/(2*MAX_SAMPLES-1),Qu=Lu/ju,Xu=isFinite(Lu)?1+Math.floor(Uu*Qu):MAX_SAMPLES;Xu>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Lu}, is too large and will clip, as it requested ${Xu} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Ku=[],Wu=0,qu=0;qu<MAX_SAMPLES;++qu){var _h=qu/Qu,Yu=Math.exp(-_h*_h/2);Ku.push(Yu),qu==0?Wu+=Yu:qu<Xu&&(Wu+=2*Yu)}for(var qu=0;qu<Ku.length;qu++)Ku[qu]=Ku[qu]/Wu;zu.envMap.value=_u.texture,zu.samples.value=Xu,zu.weights.value=Ku,zu.latitudinal.value=Ou==="latitudinal",Fu&&(zu.poleAxis.value=Fu),zu.dTheta.value=ju,zu.mipInt.value=LOD_MAX-Bu,zu.inputEncoding.value=ENCODINGS[_u.texture.encoding],zu.outputEncoding.value=ENCODINGS[_u.texture.encoding];var Zu=_sizeLods[Ru],_h=3*Math.max(0,SIZE_MAX-2*Zu),ep=(Ru===0?0:2*SIZE_MAX)+2*Zu*(Ru>LOD_MAX-LOD_MIN?Ru-LOD_MAX+LOD_MIN:0);_setViewport($u,_h,ep,3*Zu,2*Zu),Nu.setRenderTarget($u),Nu.render(Gu,_flatCamera)}};function _isLDR(_u){return _u===void 0||_u.type!==UnsignedByteType?!1:_u.encoding===LinearEncoding||_u.encoding===sRGBEncoding||_u.encoding===GammaEncoding}function _createPlanes(){for(var _u=[],$u=[],Bu=[],Ru=LOD_MAX,Lu=0;Lu<TOTAL_LODS;Lu++){var Ou=Math.pow(2,Ru);$u.push(Ou);var Fu=1/Ou;Lu>LOD_MAX-LOD_MIN?Fu=EXTRA_LOD_SIGMA[Lu-LOD_MAX+LOD_MIN-1]:Lu==0&&(Fu=0),Bu.push(Fu);for(var Nu=1/(Ou-1),Vu=-Nu/2,Uu=1+Nu/2,Gu=[Vu,Vu,Uu,Vu,Uu,Uu,Vu,Vu,Uu,Uu,Vu,Uu],zu=6,Hu=6,ju=3,Qu=2,Xu=1,Ku=new Float32Array(ju*Hu*zu),Wu=new Float32Array(Qu*Hu*zu),qu=new Float32Array(Xu*Hu*zu),Yu=0;Yu<zu;Yu++){var Zu=Yu%3*2/3-1,_h=Yu>2?0:-1,ep=[Zu,_h,0,Zu+2/3,_h,0,Zu+2/3,_h+1,0,Zu,_h,0,Zu+2/3,_h+1,0,Zu,_h+1,0];Ku.set(ep,ju*Hu*Yu),Wu.set(Gu,Qu*Hu*Yu);var ip=[Yu,Yu,Yu,Yu,Yu,Yu];qu.set(ip,Xu*Hu*Yu)}var ap=new BufferGeometry;ap.setAttribute("position",new BufferAttribute(Ku,ju)),ap.setAttribute("uv",new BufferAttribute(Wu,Qu)),ap.setAttribute("faceIndex",new BufferAttribute(qu,Xu)),_u.push(ap),Ru>LOD_MIN&&Ru--}return{_lodPlanes:_u,_sizeLods:$u,_sigmas:Bu}}function _createRenderTarget(_u){var $u=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,_u);return $u.texture.mapping=CubeUVReflectionMapping,$u.texture.name="PMREM.cubeUv",$u.scissorTest=!0,$u}function _setViewport(_u,$u,Bu,Ru,Lu){_u.viewport.set($u,Bu,Ru,Lu),_u.scissor.set($u,Bu,Ru,Lu)}function _getBlurShader(_u){var $u=new Float32Array(_u),Bu=new Vector3(0,1,0),Ru=new RawShaderMaterial({defines:{n:_u},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:$u},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Bu},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Ru.type="SphericalGaussianBlur",Ru}function _getEquirectShader(){var _u=new Vector2(1,1),$u=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:_u},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return $u.type="EquirectangularToCubeUV",$u}function _getCubemapShader(){var _u=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _u.type="CubemapToCubeUV",_u}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(_u,$u,Bu,Ru,Lu,Ou,Fu){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(_u,$u,Bu,Lu,Ou,Fu)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(_u){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),_u}function MultiMaterial(_u){return _u===void 0&&(_u=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),_u.isMultiMaterial=!0,_u.materials=_u,_u.clone=function(){return _u.slice()},_u}function PointCloud(_u,$u){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(_u,$u)}function Particle(_u){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(_u)}function ParticleSystem(_u,$u){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(_u,$u)}function PointCloudMaterial(_u){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleBasicMaterial(_u){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleSystemMaterial(_u){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function Vertex(_u,$u,Bu){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(_u,$u,Bu)}function DynamicBufferAttribute(_u,$u){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(_u,$u).setUsage(DynamicDrawUsage)}function Int8Attribute(_u,$u){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(_u,$u)}function Uint8Attribute(_u,$u){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(_u,$u)}function Uint8ClampedAttribute(_u,$u){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(_u,$u)}function Int16Attribute(_u,$u){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(_u,$u)}function Uint16Attribute(_u,$u){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(_u,$u)}function Int32Attribute(_u,$u){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(_u,$u)}function Uint32Attribute(_u,$u){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(_u,$u)}function Float32Attribute(_u,$u){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(_u,$u)}function Float64Attribute(_u,$u){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(_u,$u)}Curve.create=function(_u,$u){return console.log("THREE.Curve.create() has been deprecated"),_u.prototype=Object.create(Curve.prototype),_u.prototype.constructor=_u,_u.prototype.getPoint=$u,_u};Object.assign(CurvePath.prototype,{createPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getPoints(_u);return this.createGeometry($u)},createSpacedPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getSpacedPoints(_u);return this.createGeometry($u)},createGeometry:function(_u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var $u=new Geometry,Bu=0,Ru=_u.length;Bu<Ru;Bu++){var Lu=_u[Bu];$u.vertices.push(new Vector3(Lu.x,Lu.y,Lu.z||0))}return $u}});Object.assign(Path.prototype,{fromPoints:function(_u){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(_u)}});function ClosedSplineCurve3(_u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(_u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(_u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(_u){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(_u)}function BoundingBoxHelper(_u,$u){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(_u,$u)}function EdgesHelper(_u,$u){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(_u,$u){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(_u){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(_u)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(_u){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(_u)}function BinaryTextureLoader(_u){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(_u)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(_u){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(_u)}});Object.assign(Box2.prototype,{center:function(_u){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},size:function(_u){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Box3.prototype,{center:function(_u){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)},size:function(_u){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(_u){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(_u)};Line3.prototype.center=function(_u){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(_u)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(_u){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(_u)},nextPowerOfTwo:function(_u){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(_u)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},multiplyVector3:function(_u){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(_u){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(_u)},flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(_u){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(_u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(_u){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector4:function(_u){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(_u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),_u.transformDirection(this)},crossVector:function(_u){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(_u,$u,Bu,Ru,Lu,Ou){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(_u,$u,Ru,Bu,Lu,Ou)}});Plane.prototype.isIntersectionLine=function(_u){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(_u)};Quaternion.prototype.multiplyVector3=function(_u){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),_u.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(_u){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionPlane:function(_u){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(_u,$u){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(_u,$u)},midpoint:function(_u){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(_u)},normal:function(_u){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(_u)},plane:function(_u){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(_u)}});Object.assign(Triangle,{barycoordFromPoint:function(_u,$u,Bu,Ru,Lu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(_u,$u,Bu,Ru,Lu)},normal:function(_u,$u,Bu,Ru){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(_u,$u,Bu,Ru)}});Object.assign(Shape.prototype,{extractAllPoints:function(_u){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(_u)},extrude:function(_u){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,_u)},makeGeometry:function(_u){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,_u)}});Object.assign(Vector2.prototype,{fromAttribute:function(_u,$u,Bu){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Bu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(_u){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(_u)},getScaleFromMatrix:function(_u){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(_u)},getColumnFromMatrix:function(_u,$u){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn($u,_u)},applyProjection:function(_u){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(_u)},fromAttribute:function(_u,$u,Bu){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Bu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(_u,$u,Bu){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Bu)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(_u){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.assign(Object3D.prototype,{getChildByName:function(_u){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(_u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(_u,$u){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis($u,_u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(_u){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(_u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=_u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(_u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=_u}});PerspectiveCamera.prototype.setLens=function(_u,$u){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),$u!==void 0&&(this.filmGauge=$u),this.setFocalLength(_u)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(_u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=_u}},shadowCameraLeft:{set:function(_u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=_u}},shadowCameraRight:{set:function(_u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=_u}},shadowCameraTop:{set:function(_u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=_u}},shadowCameraBottom:{set:function(_u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=_u}},shadowCameraNear:{set:function(_u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=_u}},shadowCameraFar:{set:function(_u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=_u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(_u){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=_u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(_u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=_u}},shadowMapHeight:{set:function(_u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=_u}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(_u){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(_u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(_u)},addAttribute:function(_u,$u){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!($u&&$u.isBufferAttribute)&&!($u&&$u.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(_u,new BufferAttribute(arguments[1],arguments[2]))):_u==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex($u),this):this.setAttribute(_u,$u)},addDrawCall:function(_u,$u,Bu){Bu!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(_u,$u)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(_u){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(_u)},applyMatrix:function(_u){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(_u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=_u}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(_u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=_u}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(_u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(_u)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(_u){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(_u){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_u===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(_u){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=_u}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(_u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=_u}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(_u,$u,Bu,Ru){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(_u),this.clear($u,Bu,Ru)},animate:function(_u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(_u)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(_u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(_u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=_u}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=_u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(_u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=_u===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(_u,$u,Bu){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(_u,Bu)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=_u}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=_u}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=_u}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=_u}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(_u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=_u}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(_u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=_u}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(_u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=_u}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(_u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=_u}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(_u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=_u}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(_u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=_u}}});Object.defineProperties(Audio$1.prototype,{load:{value:function(_u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var $u=this,Bu=new AudioLoader;return Bu.load(_u,function(Ru){$u.setBuffer(Ru)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(_u,$u){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(_u,$u)};var GeometryUtils={merge:function(_u,$u,Bu){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Ru;$u.isMesh&&($u.matrixAutoUpdate&&$u.updateMatrix(),Ru=$u.matrix,$u=$u.geometry),_u.merge($u,Ru,Bu)},center:function(_u){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),_u.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(_u,$u,Bu,Ru){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Lu=new TextureLoader;Lu.setCrossOrigin(this.crossOrigin);var Ou=Lu.load(_u,Bu,void 0,Ru);return $u&&(Ou.mapping=$u),Ou};ImageUtils.loadTextureCube=function(_u,$u,Bu,Ru){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Lu=new CubeTextureLoader;Lu.setCrossOrigin(this.crossOrigin);var Ou=Lu.load(_u,Bu,void 0,Ru);return $u&&(Ou.mapping=$u),Ou};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var z$1=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(z$1),tslib={exports:{}};(function(_u){var $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu,qu,Yu,Zu,_h,ep,ip,ap,sp;(function(Ju){var _f=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Ju(np(_f,np(_u.exports)));function np(tp,rp){return tp!==_f&&(typeof Object.create=="function"?Object.defineProperty(tp,"__esModule",{value:!0}):tp.__esModule=!0),function(op,lp){return tp[op]=rp?rp(op,lp):lp}}})(function(Ju){var _f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tp,rp){tp.__proto__=rp}||function(tp,rp){for(var op in rp)Object.prototype.hasOwnProperty.call(rp,op)&&(tp[op]=rp[op])};$u=function(tp,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_f(tp,rp);function op(){this.constructor=tp}tp.prototype=rp===null?Object.create(rp):(op.prototype=rp.prototype,new op)},Bu=Object.assign||function(tp){for(var rp,op=1,lp=arguments.length;op<lp;op++){rp=arguments[op];for(var up in rp)Object.prototype.hasOwnProperty.call(rp,up)&&(tp[up]=rp[up])}return tp},Ru=function(tp,rp){var op={};for(var lp in tp)Object.prototype.hasOwnProperty.call(tp,lp)&&rp.indexOf(lp)<0&&(op[lp]=tp[lp]);if(tp!=null&&typeof Object.getOwnPropertySymbols=="function")for(var up=0,lp=Object.getOwnPropertySymbols(tp);up<lp.length;up++)rp.indexOf(lp[up])<0&&Object.prototype.propertyIsEnumerable.call(tp,lp[up])&&(op[lp[up]]=tp[lp[up]]);return op},Lu=function(tp,rp,op,lp){var up=arguments.length,cp=up<3?rp:lp===null?lp=Object.getOwnPropertyDescriptor(rp,op):lp,Ap;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")cp=Reflect.decorate(tp,rp,op,lp);else for(var yp=tp.length-1;yp>=0;yp--)(Ap=tp[yp])&&(cp=(up<3?Ap(cp):up>3?Ap(rp,op,cp):Ap(rp,op))||cp);return up>3&&cp&&Object.defineProperty(rp,op,cp),cp},Ou=function(tp,rp){return function(op,lp){rp(op,lp,tp)}},Fu=function(tp,rp){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(tp,rp)},Nu=function(tp,rp,op,lp){function up(cp){return cp instanceof op?cp:new op(function(Ap){Ap(cp)})}return new(op||(op=Promise))(function(cp,Ap){function yp(Vp){try{Ep(lp.next(Vp))}catch($p){Ap($p)}}function Ip(Vp){try{Ep(lp.throw(Vp))}catch($p){Ap($p)}}function Ep(Vp){Vp.done?cp(Vp.value):up(Vp.value).then(yp,Ip)}Ep((lp=lp.apply(tp,rp||[])).next())})},Vu=function(tp,rp){var op={label:0,sent:function(){if(cp[0]&1)throw cp[1];return cp[1]},trys:[],ops:[]},lp,up,cp,Ap;return Ap={next:yp(0),throw:yp(1),return:yp(2)},typeof Symbol=="function"&&(Ap[Symbol.iterator]=function(){return this}),Ap;function yp(Ep){return function(Vp){return Ip([Ep,Vp])}}function Ip(Ep){if(lp)throw new TypeError("Generator is already executing.");for(;op;)try{if(lp=1,up&&(cp=Ep[0]&2?up.return:Ep[0]?up.throw||((cp=up.return)&&cp.call(up),0):up.next)&&!(cp=cp.call(up,Ep[1])).done)return cp;switch(up=0,cp&&(Ep=[Ep[0]&2,cp.value]),Ep[0]){case 0:case 1:cp=Ep;break;case 4:return op.label++,{value:Ep[1],done:!1};case 5:op.label++,up=Ep[1],Ep=[0];continue;case 7:Ep=op.ops.pop(),op.trys.pop();continue;default:if(cp=op.trys,!(cp=cp.length>0&&cp[cp.length-1])&&(Ep[0]===6||Ep[0]===2)){op=0;continue}if(Ep[0]===3&&(!cp||Ep[1]>cp[0]&&Ep[1]<cp[3])){op.label=Ep[1];break}if(Ep[0]===6&&op.label<cp[1]){op.label=cp[1],cp=Ep;break}if(cp&&op.label<cp[2]){op.label=cp[2],op.ops.push(Ep);break}cp[2]&&op.ops.pop(),op.trys.pop();continue}Ep=rp.call(tp,op)}catch(Vp){Ep=[6,Vp],up=0}finally{lp=cp=0}if(Ep[0]&5)throw Ep[1];return{value:Ep[0]?Ep[1]:void 0,done:!0}}},Uu=function(tp,rp){for(var op in tp)op!=="default"&&!Object.prototype.hasOwnProperty.call(rp,op)&&sp(rp,tp,op)},sp=Object.create?function(tp,rp,op,lp){lp===void 0&&(lp=op);var up=Object.getOwnPropertyDescriptor(rp,op);(!up||("get"in up?!rp.__esModule:up.writable||up.configurable))&&(up={enumerable:!0,get:function(){return rp[op]}}),Object.defineProperty(tp,lp,up)}:function(tp,rp,op,lp){lp===void 0&&(lp=op),tp[lp]=rp[op]},Gu=function(tp){var rp=typeof Symbol=="function"&&Symbol.iterator,op=rp&&tp[rp],lp=0;if(op)return op.call(tp);if(tp&&typeof tp.length=="number")return{next:function(){return tp&&lp>=tp.length&&(tp=void 0),{value:tp&&tp[lp++],done:!tp}}};throw new TypeError(rp?"Object is not iterable.":"Symbol.iterator is not defined.")},zu=function(tp,rp){var op=typeof Symbol=="function"&&tp[Symbol.iterator];if(!op)return tp;var lp=op.call(tp),up,cp=[],Ap;try{for(;(rp===void 0||rp-- >0)&&!(up=lp.next()).done;)cp.push(up.value)}catch(yp){Ap={error:yp}}finally{try{up&&!up.done&&(op=lp.return)&&op.call(lp)}finally{if(Ap)throw Ap.error}}return cp},Hu=function(){for(var tp=[],rp=0;rp<arguments.length;rp++)tp=tp.concat(zu(arguments[rp]));return tp},ju=function(){for(var tp=0,rp=0,op=arguments.length;rp<op;rp++)tp+=arguments[rp].length;for(var lp=Array(tp),up=0,rp=0;rp<op;rp++)for(var cp=arguments[rp],Ap=0,yp=cp.length;Ap<yp;Ap++,up++)lp[up]=cp[Ap];return lp},Qu=function(tp,rp,op){if(op||arguments.length===2)for(var lp=0,up=rp.length,cp;lp<up;lp++)(cp||!(lp in rp))&&(cp||(cp=Array.prototype.slice.call(rp,0,lp)),cp[lp]=rp[lp]);return tp.concat(cp||Array.prototype.slice.call(rp))},Xu=function(tp){return this instanceof Xu?(this.v=tp,this):new Xu(tp)},Ku=function(tp,rp,op){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lp=op.apply(tp,rp||[]),up,cp=[];return up={},Ap("next"),Ap("throw"),Ap("return"),up[Symbol.asyncIterator]=function(){return this},up;function Ap(kp){lp[kp]&&(up[kp]=function(Bp){return new Promise(function(fp,dp){cp.push([kp,Bp,fp,dp])>1||yp(kp,Bp)})})}function yp(kp,Bp){try{Ip(lp[kp](Bp))}catch(fp){$p(cp[0][3],fp)}}function Ip(kp){kp.value instanceof Xu?Promise.resolve(kp.value.v).then(Ep,Vp):$p(cp[0][2],kp)}function Ep(kp){yp("next",kp)}function Vp(kp){yp("throw",kp)}function $p(kp,Bp){kp(Bp),cp.shift(),cp.length&&yp(cp[0][0],cp[0][1])}},Wu=function(tp){var rp,op;return rp={},lp("next"),lp("throw",function(up){throw up}),lp("return"),rp[Symbol.iterator]=function(){return this},rp;function lp(up,cp){rp[up]=tp[up]?function(Ap){return(op=!op)?{value:Xu(tp[up](Ap)),done:up==="return"}:cp?cp(Ap):Ap}:cp}},qu=function(tp){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rp=tp[Symbol.asyncIterator],op;return rp?rp.call(tp):(tp=typeof Gu=="function"?Gu(tp):tp[Symbol.iterator](),op={},lp("next"),lp("throw"),lp("return"),op[Symbol.asyncIterator]=function(){return this},op);function lp(cp){op[cp]=tp[cp]&&function(Ap){return new Promise(function(yp,Ip){Ap=tp[cp](Ap),up(yp,Ip,Ap.done,Ap.value)})}}function up(cp,Ap,yp,Ip){Promise.resolve(Ip).then(function(Ep){cp({value:Ep,done:yp})},Ap)}},Yu=function(tp,rp){return Object.defineProperty?Object.defineProperty(tp,"raw",{value:rp}):tp.raw=rp,tp};var np=Object.create?function(tp,rp){Object.defineProperty(tp,"default",{enumerable:!0,value:rp})}:function(tp,rp){tp.default=rp};Zu=function(tp){if(tp&&tp.__esModule)return tp;var rp={};if(tp!=null)for(var op in tp)op!=="default"&&Object.prototype.hasOwnProperty.call(tp,op)&&sp(rp,tp,op);return np(rp,tp),rp},_h=function(tp){return tp&&tp.__esModule?tp:{default:tp}},ep=function(tp,rp,op,lp){if(op==="a"&&!lp)throw new TypeError("Private accessor was defined without a getter");if(typeof rp=="function"?tp!==rp||!lp:!rp.has(tp))throw new TypeError("Cannot read private member from an object whose class did not declare it");return op==="m"?lp:op==="a"?lp.call(tp):lp?lp.value:rp.get(tp)},ip=function(tp,rp,op,lp,up){if(lp==="m")throw new TypeError("Private method is not writable");if(lp==="a"&&!up)throw new TypeError("Private accessor was defined without a setter");if(typeof rp=="function"?tp!==rp||!up:!rp.has(tp))throw new TypeError("Cannot write private member to an object whose class did not declare it");return lp==="a"?up.call(tp,op):up?up.value=op:rp.set(tp,op),op},ap=function(tp,rp){if(rp===null||typeof rp!="object"&&typeof rp!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof tp=="function"?rp===tp:tp.has(rp)},Ju("__extends",$u),Ju("__assign",Bu),Ju("__rest",Ru),Ju("__decorate",Lu),Ju("__param",Ou),Ju("__metadata",Fu),Ju("__awaiter",Nu),Ju("__generator",Vu),Ju("__exportStar",Uu),Ju("__createBinding",sp),Ju("__values",Gu),Ju("__read",zu),Ju("__spread",Hu),Ju("__spreadArrays",ju),Ju("__spreadArray",Qu),Ju("__await",Xu),Ju("__asyncGenerator",Ku),Ju("__asyncDelegator",Wu),Ju("__asyncValues",qu),Ju("__makeTemplateObject",Yu),Ju("__importStar",Zu),Ju("__importDefault",_h),Ju("__classPrivateFieldGet",ep),Ju("__classPrivateFieldSet",ip),Ju("__classPrivateFieldIn",ap)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(_u,$u){for(var Bu=new Array(arguments.length-1),Ru=0,Lu=2,Ou=!0;Lu<arguments.length;)Bu[Ru++]=arguments[Lu++];return new Promise(function(Nu,Vu){Bu[Ru]=function(Gu){if(Ou)if(Ou=!1,Gu)Vu(Gu);else{for(var zu=new Array(arguments.length-1),Hu=0;Hu<zu.length;)zu[Hu++]=arguments[Hu];Nu.apply(null,zu)}};try{_u.apply($u||null,Bu)}catch(Uu){Ou&&(Ou=!1,Vu(Uu))}})}var base64$1={};(function(_u){var $u=_u;$u.length=function(Nu){var Vu=Nu.length;if(!Vu)return 0;for(var Uu=0;--Vu%4>1&&Nu.charAt(Vu)==="=";)++Uu;return Math.ceil(Nu.length*3)/4-Uu};for(var Bu=new Array(64),Ru=new Array(123),Lu=0;Lu<64;)Ru[Bu[Lu]=Lu<26?Lu+65:Lu<52?Lu+71:Lu<62?Lu-4:Lu-59|43]=Lu++;$u.encode=function(Nu,Vu,Uu){for(var Gu=null,zu=[],Hu=0,ju=0,Qu;Vu<Uu;){var Xu=Nu[Vu++];switch(ju){case 0:zu[Hu++]=Bu[Xu>>2],Qu=(Xu&3)<<4,ju=1;break;case 1:zu[Hu++]=Bu[Qu|Xu>>4],Qu=(Xu&15)<<2,ju=2;break;case 2:zu[Hu++]=Bu[Qu|Xu>>6],zu[Hu++]=Bu[Xu&63],ju=0;break}Hu>8191&&((Gu||(Gu=[])).push(String.fromCharCode.apply(String,zu)),Hu=0)}return ju&&(zu[Hu++]=Bu[Qu],zu[Hu++]=61,ju===1&&(zu[Hu++]=61)),Gu?(Hu&&Gu.push(String.fromCharCode.apply(String,zu.slice(0,Hu))),Gu.join("")):String.fromCharCode.apply(String,zu.slice(0,Hu))};var Ou="invalid encoding";$u.decode=function(Nu,Vu,Uu){for(var Gu=Uu,zu=0,Hu,ju=0;ju<Nu.length;){var Qu=Nu.charCodeAt(ju++);if(Qu===61&&zu>1)break;if((Qu=Ru[Qu])===void 0)throw Error(Ou);switch(zu){case 0:Hu=Qu,zu=1;break;case 1:Vu[Uu++]=Hu<<2|(Qu&48)>>4,Hu=Qu,zu=2;break;case 2:Vu[Uu++]=(Hu&15)<<4|(Qu&60)>>2,Hu=Qu,zu=3;break;case 3:Vu[Uu++]=(Hu&3)<<6|Qu,zu=0;break}}if(zu===1)throw Error(Ou);return Uu-Gu},$u.test=function(Nu){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Nu)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function($u,Bu,Ru){return(this._listeners[$u]||(this._listeners[$u]=[])).push({fn:Bu,ctx:Ru||this}),this};EventEmitter.prototype.off=function($u,Bu){if($u===void 0)this._listeners={};else if(Bu===void 0)this._listeners[$u]=[];else for(var Ru=this._listeners[$u],Lu=0;Lu<Ru.length;)Ru[Lu].fn===Bu?Ru.splice(Lu,1):++Lu;return this};EventEmitter.prototype.emit=function($u){var Bu=this._listeners[$u];if(Bu){for(var Ru=[],Lu=1;Lu<arguments.length;)Ru.push(arguments[Lu++]);for(Lu=0;Lu<Bu.length;)Bu[Lu].fn.apply(Bu[Lu++].ctx,Ru)}return this};var float=factory(factory);function factory(_u){return typeof Float32Array!="undefined"?function(){var $u=new Float32Array([-0]),Bu=new Uint8Array($u.buffer),Ru=Bu[3]===128;function Lu(Vu,Uu,Gu){$u[0]=Vu,Uu[Gu]=Bu[0],Uu[Gu+1]=Bu[1],Uu[Gu+2]=Bu[2],Uu[Gu+3]=Bu[3]}function Ou(Vu,Uu,Gu){$u[0]=Vu,Uu[Gu]=Bu[3],Uu[Gu+1]=Bu[2],Uu[Gu+2]=Bu[1],Uu[Gu+3]=Bu[0]}_u.writeFloatLE=Ru?Lu:Ou,_u.writeFloatBE=Ru?Ou:Lu;function Fu(Vu,Uu){return Bu[0]=Vu[Uu],Bu[1]=Vu[Uu+1],Bu[2]=Vu[Uu+2],Bu[3]=Vu[Uu+3],$u[0]}function Nu(Vu,Uu){return Bu[3]=Vu[Uu],Bu[2]=Vu[Uu+1],Bu[1]=Vu[Uu+2],Bu[0]=Vu[Uu+3],$u[0]}_u.readFloatLE=Ru?Fu:Nu,_u.readFloatBE=Ru?Nu:Fu}():function(){function $u(Ru,Lu,Ou,Fu){var Nu=Lu<0?1:0;if(Nu&&(Lu=-Lu),Lu===0)Ru(1/Lu>0?0:2147483648,Ou,Fu);else if(isNaN(Lu))Ru(2143289344,Ou,Fu);else if(Lu>34028234663852886e22)Ru((Nu<<31|2139095040)>>>0,Ou,Fu);else if(Lu<11754943508222875e-54)Ru((Nu<<31|Math.round(Lu/1401298464324817e-60))>>>0,Ou,Fu);else{var Vu=Math.floor(Math.log(Lu)/Math.LN2),Uu=Math.round(Lu*Math.pow(2,-Vu)*8388608)&8388607;Ru((Nu<<31|Vu+127<<23|Uu)>>>0,Ou,Fu)}}_u.writeFloatLE=$u.bind(null,writeUintLE),_u.writeFloatBE=$u.bind(null,writeUintBE);function Bu(Ru,Lu,Ou){var Fu=Ru(Lu,Ou),Nu=(Fu>>31)*2+1,Vu=Fu>>>23&255,Uu=Fu&8388607;return Vu===255?Uu?NaN:Nu*(1/0):Vu===0?Nu*1401298464324817e-60*Uu:Nu*Math.pow(2,Vu-150)*(Uu+8388608)}_u.readFloatLE=Bu.bind(null,readUintLE),_u.readFloatBE=Bu.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var $u=new Float64Array([-0]),Bu=new Uint8Array($u.buffer),Ru=Bu[7]===128;function Lu(Vu,Uu,Gu){$u[0]=Vu,Uu[Gu]=Bu[0],Uu[Gu+1]=Bu[1],Uu[Gu+2]=Bu[2],Uu[Gu+3]=Bu[3],Uu[Gu+4]=Bu[4],Uu[Gu+5]=Bu[5],Uu[Gu+6]=Bu[6],Uu[Gu+7]=Bu[7]}function Ou(Vu,Uu,Gu){$u[0]=Vu,Uu[Gu]=Bu[7],Uu[Gu+1]=Bu[6],Uu[Gu+2]=Bu[5],Uu[Gu+3]=Bu[4],Uu[Gu+4]=Bu[3],Uu[Gu+5]=Bu[2],Uu[Gu+6]=Bu[1],Uu[Gu+7]=Bu[0]}_u.writeDoubleLE=Ru?Lu:Ou,_u.writeDoubleBE=Ru?Ou:Lu;function Fu(Vu,Uu){return Bu[0]=Vu[Uu],Bu[1]=Vu[Uu+1],Bu[2]=Vu[Uu+2],Bu[3]=Vu[Uu+3],Bu[4]=Vu[Uu+4],Bu[5]=Vu[Uu+5],Bu[6]=Vu[Uu+6],Bu[7]=Vu[Uu+7],$u[0]}function Nu(Vu,Uu){return Bu[7]=Vu[Uu],Bu[6]=Vu[Uu+1],Bu[5]=Vu[Uu+2],Bu[4]=Vu[Uu+3],Bu[3]=Vu[Uu+4],Bu[2]=Vu[Uu+5],Bu[1]=Vu[Uu+6],Bu[0]=Vu[Uu+7],$u[0]}_u.readDoubleLE=Ru?Fu:Nu,_u.readDoubleBE=Ru?Nu:Fu}():function(){function $u(Ru,Lu,Ou,Fu,Nu,Vu){var Uu=Fu<0?1:0;if(Uu&&(Fu=-Fu),Fu===0)Ru(0,Nu,Vu+Lu),Ru(1/Fu>0?0:2147483648,Nu,Vu+Ou);else if(isNaN(Fu))Ru(0,Nu,Vu+Lu),Ru(2146959360,Nu,Vu+Ou);else if(Fu>17976931348623157e292)Ru(0,Nu,Vu+Lu),Ru((Uu<<31|2146435072)>>>0,Nu,Vu+Ou);else{var Gu;if(Fu<22250738585072014e-324)Gu=Fu/5e-324,Ru(Gu>>>0,Nu,Vu+Lu),Ru((Uu<<31|Gu/4294967296)>>>0,Nu,Vu+Ou);else{var zu=Math.floor(Math.log(Fu)/Math.LN2);zu===1024&&(zu=1023),Gu=Fu*Math.pow(2,-zu),Ru(Gu*4503599627370496>>>0,Nu,Vu+Lu),Ru((Uu<<31|zu+1023<<20|Gu*1048576&1048575)>>>0,Nu,Vu+Ou)}}}_u.writeDoubleLE=$u.bind(null,writeUintLE,0,4),_u.writeDoubleBE=$u.bind(null,writeUintBE,4,0);function Bu(Ru,Lu,Ou,Fu,Nu){var Vu=Ru(Fu,Nu+Lu),Uu=Ru(Fu,Nu+Ou),Gu=(Uu>>31)*2+1,zu=Uu>>>20&2047,Hu=4294967296*(Uu&1048575)+Vu;return zu===2047?Hu?NaN:Gu*(1/0):zu===0?Gu*5e-324*Hu:Gu*Math.pow(2,zu-1075)*(Hu+4503599627370496)}_u.readDoubleLE=Bu.bind(null,readUintLE,0,4),_u.readDoubleBE=Bu.bind(null,readUintBE,4,0)}(),_u}function writeUintLE(_u,$u,Bu){$u[Bu]=_u&255,$u[Bu+1]=_u>>>8&255,$u[Bu+2]=_u>>>16&255,$u[Bu+3]=_u>>>24}function writeUintBE(_u,$u,Bu){$u[Bu]=_u>>>24,$u[Bu+1]=_u>>>16&255,$u[Bu+2]=_u>>>8&255,$u[Bu+3]=_u&255}function readUintLE(_u,$u){return(_u[$u]|_u[$u+1]<<8|_u[$u+2]<<16|_u[$u+3]<<24)>>>0}function readUintBE(_u,$u){return(_u[$u]<<24|_u[$u+1]<<16|_u[$u+2]<<8|_u[$u+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_u){}return null}var utf8$2={};(function(_u){var $u=_u;$u.length=function(Ru){for(var Lu=0,Ou=0,Fu=0;Fu<Ru.length;++Fu)Ou=Ru.charCodeAt(Fu),Ou<128?Lu+=1:Ou<2048?Lu+=2:(Ou&64512)===55296&&(Ru.charCodeAt(Fu+1)&64512)===56320?(++Fu,Lu+=4):Lu+=3;return Lu},$u.read=function(Ru,Lu,Ou){var Fu=Ou-Lu;if(Fu<1)return"";for(var Nu=null,Vu=[],Uu=0,Gu;Lu<Ou;)Gu=Ru[Lu++],Gu<128?Vu[Uu++]=Gu:Gu>191&&Gu<224?Vu[Uu++]=(Gu&31)<<6|Ru[Lu++]&63:Gu>239&&Gu<365?(Gu=((Gu&7)<<18|(Ru[Lu++]&63)<<12|(Ru[Lu++]&63)<<6|Ru[Lu++]&63)-65536,Vu[Uu++]=55296+(Gu>>10),Vu[Uu++]=56320+(Gu&1023)):Vu[Uu++]=(Gu&15)<<12|(Ru[Lu++]&63)<<6|Ru[Lu++]&63,Uu>8191&&((Nu||(Nu=[])).push(String.fromCharCode.apply(String,Vu)),Uu=0);return Nu?(Uu&&Nu.push(String.fromCharCode.apply(String,Vu.slice(0,Uu))),Nu.join("")):String.fromCharCode.apply(String,Vu.slice(0,Uu))},$u.write=function(Ru,Lu,Ou){for(var Fu=Ou,Nu,Vu,Uu=0;Uu<Ru.length;++Uu)Nu=Ru.charCodeAt(Uu),Nu<128?Lu[Ou++]=Nu:Nu<2048?(Lu[Ou++]=Nu>>6|192,Lu[Ou++]=Nu&63|128):(Nu&64512)===55296&&((Vu=Ru.charCodeAt(Uu+1))&64512)===56320?(Nu=65536+((Nu&1023)<<10)+(Vu&1023),++Uu,Lu[Ou++]=Nu>>18|240,Lu[Ou++]=Nu>>12&63|128,Lu[Ou++]=Nu>>6&63|128,Lu[Ou++]=Nu&63|128):(Lu[Ou++]=Nu>>12|224,Lu[Ou++]=Nu>>6&63|128,Lu[Ou++]=Nu&63|128);return Ou-Fu}})(utf8$2);var pool_1=pool;function pool(_u,$u,Bu){var Ru=Bu||8192,Lu=Ru>>>1,Ou=null,Fu=Ru;return function(Vu){if(Vu<1||Vu>Lu)return _u(Vu);Fu+Vu>Ru&&(Ou=_u(Ru),Fu=0);var Uu=$u.call(Ou,Fu,Fu+=Vu);return Fu&7&&(Fu=(Fu|7)+1),Uu}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(_u,$u){this.lo=_u>>>0,this.hi=$u>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function _u($u){if($u===0)return zero;var Bu=$u<0;Bu&&($u=-$u);var Ru=$u>>>0,Lu=($u-Ru)/4294967296>>>0;return Bu&&(Lu=~Lu>>>0,Ru=~Ru>>>0,++Ru>4294967295&&(Ru=0,++Lu>4294967295&&(Lu=0))),new LongBits$2(Ru,Lu)};LongBits$2.from=function _u($u){if(typeof $u=="number")return LongBits$2.fromNumber($u);if(util$5.isString($u))if(util$5.Long)$u=util$5.Long.fromString($u);else return LongBits$2.fromNumber(parseInt($u,10));return $u.low||$u.high?new LongBits$2($u.low>>>0,$u.high>>>0):zero};LongBits$2.prototype.toNumber=function _u($u){if(!$u&&this.hi>>>31){var Bu=~this.lo+1>>>0,Ru=~this.hi>>>0;return Bu||(Ru=Ru+1>>>0),-(Bu+Ru*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function _u($u){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean($u)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean($u)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function _u($u){return $u===zeroHash?zero:new LongBits$2((charCodeAt.call($u,0)|charCodeAt.call($u,1)<<8|charCodeAt.call($u,2)<<16|charCodeAt.call($u,3)<<24)>>>0,(charCodeAt.call($u,4)|charCodeAt.call($u,5)<<8|charCodeAt.call($u,6)<<16|charCodeAt.call($u,7)<<24)>>>0)};LongBits$2.prototype.toHash=function _u(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function _u(){var $u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$u)>>>0,this.lo=(this.lo<<1^$u)>>>0,this};LongBits$2.prototype.zzDecode=function _u(){var $u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$u)>>>0,this.hi=(this.hi>>>1^$u)>>>0,this};LongBits$2.prototype.length=function _u(){var $u=this.lo,Bu=(this.lo>>>28|this.hi<<4)>>>0,Ru=this.hi>>>24;return Ru===0?Bu===0?$u<16384?$u<128?1:2:$u<2097152?3:4:Bu<16384?Bu<128?5:6:Bu<2097152?7:8:Ru<128?9:10};(function(_u){var $u=_u;$u.asPromise=aspromise,$u.base64=base64$1,$u.EventEmitter=eventemitter,$u.float=float,$u.inquire=inquire_1,$u.utf8=utf8$2,$u.pool=pool_1,$u.LongBits=longbits,$u.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),$u.global=$u.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,$u.emptyArray=Object.freeze?Object.freeze([]):[],$u.emptyObject=Object.freeze?Object.freeze({}):{},$u.isInteger=Number.isInteger||function(Ou){return typeof Ou=="number"&&isFinite(Ou)&&Math.floor(Ou)===Ou},$u.isString=function(Ou){return typeof Ou=="string"||Ou instanceof String},$u.isObject=function(Ou){return Ou&&typeof Ou=="object"},$u.isset=$u.isSet=function(Ou,Fu){var Nu=Ou[Fu];return Nu!=null&&Ou.hasOwnProperty(Fu)?typeof Nu!="object"||(Array.isArray(Nu)?Nu.length:Object.keys(Nu).length)>0:!1},$u.Buffer=function(){try{var Lu=$u.inquire("buffer").Buffer;return Lu.prototype.utf8Write?Lu:null}catch{return null}}(),$u._Buffer_from=null,$u._Buffer_allocUnsafe=null,$u.newBuffer=function(Ou){return typeof Ou=="number"?$u.Buffer?$u._Buffer_allocUnsafe(Ou):new $u.Array(Ou):$u.Buffer?$u._Buffer_from(Ou):typeof Uint8Array=="undefined"?Ou:new Uint8Array(Ou)},$u.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,$u.Long=$u.global.dcodeIO&&$u.global.dcodeIO.Long||$u.global.Long||$u.inquire("long"),$u.key2Re=/^true|false|0|1$/,$u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,$u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,$u.longToHash=function(Ou){return Ou?$u.LongBits.from(Ou).toHash():$u.LongBits.zeroHash},$u.longFromHash=function(Ou,Fu){var Nu=$u.LongBits.fromHash(Ou);return $u.Long?$u.Long.fromBits(Nu.lo,Nu.hi,Fu):Nu.toNumber(Boolean(Fu))};function Bu(Lu,Ou,Fu){for(var Nu=Object.keys(Ou),Vu=0;Vu<Nu.length;++Vu)(Lu[Nu[Vu]]===void 0||!Fu)&&(Lu[Nu[Vu]]=Ou[Nu[Vu]]);return Lu}$u.merge=Bu,$u.lcFirst=function(Ou){return Ou.charAt(0).toLowerCase()+Ou.substring(1)};function Ru(Lu){function Ou(Fu,Nu){if(!(this instanceof Ou))return new Ou(Fu,Nu);Object.defineProperty(this,"message",{get:function(){return Fu}}),Error.captureStackTrace?Error.captureStackTrace(this,Ou):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Nu&&Bu(this,Nu)}return(Ou.prototype=Object.create(Error.prototype)).constructor=Ou,Object.defineProperty(Ou.prototype,"name",{get:function(){return Lu}}),Ou.prototype.toString=function(){return this.name+": "+this.message},Ou}$u.newError=Ru,$u.ProtocolError=Ru("ProtocolError"),$u.oneOfGetter=function(Ou){for(var Fu={},Nu=0;Nu<Ou.length;++Nu)Fu[Ou[Nu]]=1;return function(){for(var Vu=Object.keys(this),Uu=Vu.length-1;Uu>-1;--Uu)if(Fu[Vu[Uu]]===1&&this[Vu[Uu]]!==void 0&&this[Vu[Uu]]!==null)return Vu[Uu]}},$u.oneOfSetter=function(Ou){return function(Fu){for(var Nu=0;Nu<Ou.length;++Nu)Ou[Nu]!==Fu&&delete this[Ou[Nu]]}},$u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},$u._configure=function(){var Lu=$u.Buffer;if(!Lu){$u._Buffer_from=$u._Buffer_allocUnsafe=null;return}$u._Buffer_from=Lu.from!==Uint8Array.from&&Lu.from||function(Fu,Nu){return new Lu(Fu,Nu)},$u._Buffer_allocUnsafe=Lu.allocUnsafe||function(Fu){return new Lu(Fu)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(_u,$u,Bu){this.fn=_u,this.len=$u,this.next=void 0,this.val=Bu}function noop$1(){}function State(_u){this.head=_u.head,this.tail=_u.tail,this.len=_u.len,this.next=_u.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function _u(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function _u($u){return new util$4.Array($u)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function _u($u,Bu,Ru){return this.tail=this.tail.next=new Op($u,Bu,Ru),this.len+=Bu,this};function writeByte(_u,$u,Bu){$u[Bu]=_u&255}function writeVarint32(_u,$u,Bu){for(;_u>127;)$u[Bu++]=_u&127|128,_u>>>=7;$u[Bu]=_u}function VarintOp(_u,$u){this.len=_u,this.next=void 0,this.val=$u}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function _u($u){return this.len+=(this.tail=this.tail.next=new VarintOp(($u=$u>>>0)<128?1:$u<16384?2:$u<2097152?3:$u<268435456?4:5,$u)).len,this};Writer$1.prototype.int32=function _u($u){return $u<0?this._push(writeVarint64,10,LongBits$1.fromNumber($u)):this.uint32($u)};Writer$1.prototype.sint32=function _u($u){return this.uint32(($u<<1^$u>>31)>>>0)};function writeVarint64(_u,$u,Bu){for(;_u.hi;)$u[Bu++]=_u.lo&127|128,_u.lo=(_u.lo>>>7|_u.hi<<25)>>>0,_u.hi>>>=7;for(;_u.lo>127;)$u[Bu++]=_u.lo&127|128,_u.lo=_u.lo>>>7;$u[Bu++]=_u.lo}Writer$1.prototype.uint64=function _u($u){var Bu=LongBits$1.from($u);return this._push(writeVarint64,Bu.length(),Bu)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function _u($u){var Bu=LongBits$1.from($u).zzEncode();return this._push(writeVarint64,Bu.length(),Bu)};Writer$1.prototype.bool=function _u($u){return this._push(writeByte,1,$u?1:0)};function writeFixed32(_u,$u,Bu){$u[Bu]=_u&255,$u[Bu+1]=_u>>>8&255,$u[Bu+2]=_u>>>16&255,$u[Bu+3]=_u>>>24}Writer$1.prototype.fixed32=function _u($u){return this._push(writeFixed32,4,$u>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function _u($u){var Bu=LongBits$1.from($u);return this._push(writeFixed32,4,Bu.lo)._push(writeFixed32,4,Bu.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function _u($u){return this._push(util$4.float.writeFloatLE,4,$u)};Writer$1.prototype.double=function _u($u){return this._push(util$4.float.writeDoubleLE,8,$u)};var writeBytes=util$4.Array.prototype.set?function _u($u,Bu,Ru){Bu.set($u,Ru)}:function _u($u,Bu,Ru){for(var Lu=0;Lu<$u.length;++Lu)Bu[Ru+Lu]=$u[Lu]};Writer$1.prototype.bytes=function _u($u){var Bu=$u.length>>>0;if(!Bu)return this._push(writeByte,1,0);if(util$4.isString($u)){var Ru=Writer$1.alloc(Bu=base64.length($u));base64.decode($u,Ru,0),$u=Ru}return this.uint32(Bu)._push(writeBytes,Bu,$u)};Writer$1.prototype.string=function _u($u){var Bu=utf8$1.length($u);return Bu?this.uint32(Bu)._push(utf8$1.write,Bu,$u):this._push(writeByte,1,0)};Writer$1.prototype.fork=function _u(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function _u(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function _u(){var $u=this.head,Bu=this.tail,Ru=this.len;return this.reset().uint32(Ru),Ru&&(this.tail.next=$u.next,this.tail=Bu,this.len+=Ru),this};Writer$1.prototype.finish=function _u(){for(var $u=this.head.next,Bu=this.constructor.alloc(this.len),Ru=0;$u;)$u.fn($u.val,Bu,Ru),Ru+=$u.len,$u=$u.next;return Bu};Writer$1._configure=function(_u){BufferWriter$1=_u,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function($u,Bu,Ru){Bu.set($u,Ru)}:function($u,Bu,Ru){if($u.copy)$u.copy(Bu,Ru,0,$u.length);else for(var Lu=0;Lu<$u.length;)Bu[Ru++]=$u[Lu++]}};BufferWriter.prototype.bytes=function _u($u){util$3.isString($u)&&($u=util$3._Buffer_from($u,"base64"));var Bu=$u.length>>>0;return this.uint32(Bu),Bu&&this._push(BufferWriter.writeBytesBuffer,Bu,$u),this};function writeStringBuffer(_u,$u,Bu){_u.length<40?util$3.utf8.write(_u,$u,Bu):$u.utf8Write?$u.utf8Write(_u,Bu):$u.write(_u,Bu)}BufferWriter.prototype.string=function _u($u){var Bu=util$3.Buffer.byteLength($u);return this.uint32(Bu),Bu&&this._push(writeStringBuffer,Bu,$u),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(_u,$u){return RangeError("index out of range: "+_u.pos+" + "+($u||1)+" > "+_u.len)}function Reader$1(_u){this.buf=_u,this.pos=0,this.len=_u.length}var create_array=typeof Uint8Array!="undefined"?function _u($u){if($u instanceof Uint8Array||Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")}:function _u($u){if(Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")},create=function _u(){return util$2.Buffer?function(Bu){return(Reader$1.create=function(Lu){return util$2.Buffer.isBuffer(Lu)?new BufferReader$1(Lu):create_array(Lu)})(Bu)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function _u(){var $u=4294967295;return function(){if($u=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||($u=($u|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return $u;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return $u}}();Reader$1.prototype.int32=function _u(){return this.uint32()|0};Reader$1.prototype.sint32=function _u(){var $u=this.uint32();return $u>>>1^-($u&1)|0};function readLongVarint(){var _u=new LongBits(0,0),$u=0;if(this.len-this.pos>4){for(;$u<4;++$u)if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u;if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<28)>>>0,_u.hi=(_u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return _u;$u=0}else{for(;$u<3;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u}return _u.lo=(_u.lo|(this.buf[this.pos++]&127)<<$u*7)>>>0,_u}if(this.len-this.pos>4){for(;$u<5;++$u)if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}else for(;$u<5;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function _u(){return this.uint32()!==0};function readFixed32_end(_u,$u){return(_u[$u-4]|_u[$u-3]<<8|_u[$u-2]<<16|_u[$u-1]<<24)>>>0}Reader$1.prototype.fixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var $u=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$u};Reader$1.prototype.double=function _u(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var $u=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$u};Reader$1.prototype.bytes=function _u(){var $u=this.uint32(),Bu=this.pos,Ru=this.pos+$u;if(Ru>this.len)throw indexOutOfRange(this,$u);return this.pos+=$u,Array.isArray(this.buf)?this.buf.slice(Bu,Ru):Bu===Ru?new this.buf.constructor(0):this._slice.call(this.buf,Bu,Ru)};Reader$1.prototype.string=function _u(){var $u=this.bytes();return utf8.read($u,0,$u.length)};Reader$1.prototype.skip=function _u($u){if(typeof $u=="number"){if(this.pos+$u>this.len)throw indexOutOfRange(this,$u);this.pos+=$u}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(_u){switch(_u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(_u=this.uint32()&7)!==4;)this.skipType(_u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+_u+" at offset "+this.pos)}return this};Reader$1._configure=function(_u){BufferReader$1=_u,Reader$1.create=create(),BufferReader$1._configure();var $u=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[$u](!1)},uint64:function(){return readLongVarint.call(this)[$u](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[$u](!1)},fixed64:function(){return readFixed64.call(this)[$u](!0)},sfixed64:function(){return readFixed64.call(this)[$u](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(_u){Reader.call(this,_u)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function _u(){var $u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$u,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(_u,$u,Bu){if(typeof _u!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=_u,this.requestDelimited=Boolean($u),this.responseDelimited=Boolean(Bu)}Service.prototype.rpcCall=function _u($u,Bu,Ru,Lu,Ou){if(!Lu)throw TypeError("request must be specified");var Fu=this;if(!Ou)return util.asPromise(_u,Fu,$u,Bu,Ru,Lu);if(!Fu.rpcImpl){setTimeout(function(){Ou(Error("already ended"))},0);return}try{return Fu.rpcImpl($u,Bu[Fu.requestDelimited?"encodeDelimited":"encode"](Lu).finish(),function(Vu,Uu){if(Vu)return Fu.emit("error",Vu,$u),Ou(Vu);if(Uu===null){Fu.end(!0);return}if(!(Uu instanceof Ru))try{Uu=Ru[Fu.responseDelimited?"decodeDelimited":"decode"](Uu)}catch(Gu){return Fu.emit("error",Gu,$u),Ou(Gu)}return Fu.emit("data",Uu,$u),Ou(null,Uu)})}catch(Nu){Fu.emit("error",Nu,$u),setTimeout(function(){Ou(Nu)},0);return}};Service.prototype.end=function _u($u){return this.rpcImpl&&($u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(_u){var $u=_u;$u.Service=service})(rpc);var roots={};(function(_u){var $u=_u;$u.build="minimal",$u.Writer=writer,$u.BufferWriter=writer_buffer,$u.Reader=reader,$u.BufferReader=reader_buffer,$u.util=minimal$1,$u.rpc=rpc,$u.roots=roots,$u.configure=Bu;function Bu(){$u.util._configure(),$u.Writer._configure($u.BufferWriter),$u.Reader._configure($u.BufferReader)}Bu()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$2=require$$1,t$3=tslib.exports,i$2=minimal;function n$3(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Bu){if(Bu!=="default"){var Ru=Object.getOwnPropertyDescriptor(_u,Bu);Object.defineProperty($u,Bu,Ru.get?Ru:{enumerable:!0,get:function(){return _u[Bu]}})}}),$u.default=_u,Object.freeze($u)}var r$3=n$3(e$2),o$2=n$3(i$2),s$2=Number(r$3.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$2,l$3={},u$2={},h$2=h$2||function(_u,$u){var Bu={},Ru=Bu.lib={},Lu=Ru.Base=function(){function Hu(){}return{extend:function(ju){Hu.prototype=this;var Qu=new Hu;return ju&&Qu.mixIn(ju),Qu.hasOwnProperty("init")||(Qu.init=function(){Qu.$super.init.apply(this,arguments)}),Qu.init.prototype=Qu,Qu.$super=this,Qu},create:function(){var ju=this.extend();return ju.init.apply(ju,arguments),ju},init:function(){},mixIn:function(ju){for(var Qu in ju)ju.hasOwnProperty(Qu)&&(this[Qu]=ju[Qu]);ju.hasOwnProperty("toString")&&(this.toString=ju.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Ou=Ru.WordArray=Lu.extend({init:function(Hu,ju){Hu=this.words=Hu||[],this.sigBytes=ju!=null?ju:4*Hu.length},toString:function(Hu){return(Hu||Nu).stringify(this)},concat:function(Hu){var ju=this.words,Qu=Hu.words,Xu=this.sigBytes,Ku=Hu.sigBytes;if(this.clamp(),Xu%4)for(var Wu=0;Wu<Ku;Wu++){var qu=Qu[Wu>>>2]>>>24-Wu%4*8&255;ju[Xu+Wu>>>2]|=qu<<24-(Xu+Wu)%4*8}else for(Wu=0;Wu<Ku;Wu+=4)ju[Xu+Wu>>>2]=Qu[Wu>>>2];return this.sigBytes+=Ku,this},clamp:function(){var Hu=this.words,ju=this.sigBytes;Hu[ju>>>2]&=4294967295<<32-ju%4*8,Hu.length=_u.ceil(ju/4)},clone:function(){var Hu=Lu.clone.call(this);return Hu.words=this.words.slice(0),Hu},random:function(Hu){for(var ju=[],Qu=0;Qu<Hu;Qu+=4)ju.push(4294967296*_u.random()|0);return new Ou.init(ju,Hu)}}),Fu=Bu.enc={},Nu=Fu.Hex={stringify:function(Hu){for(var ju=Hu.words,Qu=Hu.sigBytes,Xu=[],Ku=0;Ku<Qu;Ku++){var Wu=ju[Ku>>>2]>>>24-Ku%4*8&255;Xu.push((Wu>>>4).toString(16)),Xu.push((15&Wu).toString(16))}return Xu.join("")},parse:function(Hu){for(var ju=Hu.length,Qu=[],Xu=0;Xu<ju;Xu+=2)Qu[Xu>>>3]|=parseInt(Hu.substr(Xu,2),16)<<24-Xu%8*4;return new Ou.init(Qu,ju/2)}},Vu=Fu.Latin1={stringify:function(Hu){for(var ju=Hu.words,Qu=Hu.sigBytes,Xu=[],Ku=0;Ku<Qu;Ku++){var Wu=ju[Ku>>>2]>>>24-Ku%4*8&255;Xu.push(String.fromCharCode(Wu))}return Xu.join("")},parse:function(Hu){for(var ju=Hu.length,Qu=[],Xu=0;Xu<ju;Xu++)Qu[Xu>>>2]|=(255&Hu.charCodeAt(Xu))<<24-Xu%4*8;return new Ou.init(Qu,ju)}},Uu=Fu.Utf8={stringify:function(Hu){try{return decodeURIComponent(escape(Vu.stringify(Hu)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Hu){return Vu.parse(unescape(encodeURIComponent(Hu)))}},Gu=Ru.BufferedBlockAlgorithm=Lu.extend({reset:function(){this._data=new Ou.init,this._nDataBytes=0},_append:function(Hu){typeof Hu=="string"&&(Hu=Uu.parse(Hu)),this._data.concat(Hu),this._nDataBytes+=Hu.sigBytes},_process:function(Hu){var ju=this._data,Qu=ju.words,Xu=ju.sigBytes,Ku=this.blockSize,Wu=Xu/(4*Ku),qu=(Wu=Hu?_u.ceil(Wu):_u.max((0|Wu)-this._minBufferSize,0))*Ku,Yu=_u.min(4*qu,Xu);if(qu){for(var Zu=0;Zu<qu;Zu+=Ku)this._doProcessBlock(Qu,Zu);var _h=Qu.splice(0,qu);ju.sigBytes-=Yu}return new Ou.init(_h,Yu)},clone:function(){var Hu=Lu.clone.call(this);return Hu._data=this._data.clone(),Hu},_minBufferSize:0});Ru.Hasher=Gu.extend({cfg:Lu.extend(),init:function(Hu){this.cfg=this.cfg.extend(Hu),this.reset()},reset:function(){Gu.reset.call(this),this._doReset()},update:function(Hu){return this._append(Hu),this._process(),this},finalize:function(Hu){return Hu&&this._append(Hu),this._doFinalize()},blockSize:16,_createHelper:function(Hu){return function(ju,Qu){return new Hu.init(Qu).finalize(ju)}},_createHmacHelper:function(Hu){return function(ju,Qu){return new zu.HMAC.init(Hu,Qu).finalize(ju)}}});var zu=Bu.algo={};return Bu}(Math);function c$2(_u,$u,Bu){_u!=null&&(typeof _u=="number"?this.fromNumber(_u,$u,Bu):$u==null&&typeof _u!="string"?this.fromString(_u,256):this.fromString(_u,$u))}function d$1(){return new c$2(null)}(function(_u){for(var $u=h$2,Bu=(Lu=$u.lib).WordArray,Ru=Lu.Hasher,Lu=$u.algo,Ou=[],Fu=[],Nu=function(Qu){return 4294967296*(Qu-(0|Qu))|0},Vu=2,Uu=0;64>Uu;){var Gu;e:{Gu=Vu;for(var zu=_u.sqrt(Gu),Hu=2;Hu<=zu;Hu++)if(!(Gu%Hu)){Gu=!1;break e}Gu=!0}Gu&&(8>Uu&&(Ou[Uu]=Nu(_u.pow(Vu,.5))),Fu[Uu]=Nu(_u.pow(Vu,1/3)),Uu++),Vu++}var ju=[];Lu=Lu.SHA256=Ru.extend({_doReset:function(){this._hash=new Bu.init(Ou.slice(0))},_doProcessBlock:function(Qu,Xu){for(var Ku=this._hash.words,Wu=Ku[0],qu=Ku[1],Yu=Ku[2],Zu=Ku[3],_h=Ku[4],ep=Ku[5],ip=Ku[6],ap=Ku[7],sp=0;64>sp;sp++){if(16>sp)ju[sp]=0|Qu[Xu+sp];else{var Ju=ju[sp-15],_f=ju[sp-2];ju[sp]=((Ju<<25|Ju>>>7)^(Ju<<14|Ju>>>18)^Ju>>>3)+ju[sp-7]+((_f<<15|_f>>>17)^(_f<<13|_f>>>19)^_f>>>10)+ju[sp-16]}Ju=ap+((_h<<26|_h>>>6)^(_h<<21|_h>>>11)^(_h<<7|_h>>>25))+(_h&ep^~_h&ip)+Fu[sp]+ju[sp],_f=((Wu<<30|Wu>>>2)^(Wu<<19|Wu>>>13)^(Wu<<10|Wu>>>22))+(Wu&qu^Wu&Yu^qu&Yu),ap=ip,ip=ep,ep=_h,_h=Zu+Ju|0,Zu=Yu,Yu=qu,qu=Wu,Wu=Ju+_f|0}Ku[0]=Ku[0]+Wu|0,Ku[1]=Ku[1]+qu|0,Ku[2]=Ku[2]+Yu|0,Ku[3]=Ku[3]+Zu|0,Ku[4]=Ku[4]+_h|0,Ku[5]=Ku[5]+ep|0,Ku[6]=Ku[6]+ip|0,Ku[7]=Ku[7]+ap|0},_doFinalize:function(){var Qu=this._data,Xu=Qu.words,Ku=8*this._nDataBytes,Wu=8*Qu.sigBytes;return Xu[Wu>>>5]|=128<<24-Wu%32,Xu[14+(Wu+64>>>9<<4)]=_u.floor(Ku/4294967296),Xu[15+(Wu+64>>>9<<4)]=Ku,Qu.sigBytes=4*Xu.length,this._process(),this._hash},clone:function(){var Qu=Ru.clone.call(this);return Qu._hash=this._hash.clone(),Qu}}),$u.SHA256=Ru._createHelper(Lu),$u.HmacSHA256=Ru._createHmacHelper(Lu)})(Math),h$2.lib.Cipher||function(_u){var $u=(ju=h$2).lib,Bu=$u.Base,Ru=$u.WordArray,Lu=$u.BufferedBlockAlgorithm,Ou=ju.enc.Base64,Fu=ju.algo.EvpKDF,Nu=$u.Cipher=Lu.extend({cfg:Bu.extend(),createEncryptor:function(Xu,Ku){return this.create(this._ENC_XFORM_MODE,Xu,Ku)},createDecryptor:function(Xu,Ku){return this.create(this._DEC_XFORM_MODE,Xu,Ku)},init:function(Xu,Ku,Wu){this.cfg=this.cfg.extend(Wu),this._xformMode=Xu,this._key=Ku,this.reset()},reset:function(){Lu.reset.call(this),this._doReset()},process:function(Xu){return this._append(Xu),this._process()},finalize:function(Xu){return Xu&&this._append(Xu),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(Xu){return{encrypt:function(Ku,Wu,qu){return(typeof Wu=="string"?Qu:Hu).encrypt(Xu,Ku,Wu,qu)},decrypt:function(Ku,Wu,qu){return(typeof Wu=="string"?Qu:Hu).decrypt(Xu,Ku,Wu,qu)}}}});$u.StreamCipher=Nu.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Vu=ju.mode={},Uu=function(Xu,Ku,Wu){var qu=this._iv;qu?this._iv=void 0:qu=this._prevBlock;for(var Yu=0;Yu<Wu;Yu++)Xu[Ku+Yu]^=qu[Yu]},Gu=($u.BlockCipherMode=Bu.extend({createEncryptor:function(Xu,Ku){return this.Encryptor.create(Xu,Ku)},createDecryptor:function(Xu,Ku){return this.Decryptor.create(Xu,Ku)},init:function(Xu,Ku){this._cipher=Xu,this._iv=Ku}})).extend();Gu.Encryptor=Gu.extend({processBlock:function(Xu,Ku){var Wu=this._cipher,qu=Wu.blockSize;Uu.call(this,Xu,Ku,qu),Wu.encryptBlock(Xu,Ku),this._prevBlock=Xu.slice(Ku,Ku+qu)}}),Gu.Decryptor=Gu.extend({processBlock:function(Xu,Ku){var Wu=this._cipher,qu=Wu.blockSize,Yu=Xu.slice(Ku,Ku+qu);Wu.decryptBlock(Xu,Ku),Uu.call(this,Xu,Ku,qu),this._prevBlock=Yu}}),Vu=Vu.CBC=Gu,Gu=(ju.pad={}).Pkcs7={pad:function(Xu,Ku){for(var Wu,qu=(Wu=(Wu=4*Ku)-Xu.sigBytes%Wu)<<24|Wu<<16|Wu<<8|Wu,Yu=[],Zu=0;Zu<Wu;Zu+=4)Yu.push(qu);Wu=Ru.create(Yu,Wu),Xu.concat(Wu)},unpad:function(Xu){Xu.sigBytes-=255&Xu.words[Xu.sigBytes-1>>>2]}},$u.BlockCipher=Nu.extend({cfg:Nu.cfg.extend({mode:Vu,padding:Gu}),reset:function(){Nu.reset.call(this);var Xu=(Ku=this.cfg).iv,Ku=Ku.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Wu=Ku.createEncryptor;else Wu=Ku.createDecryptor,this._minBufferSize=1;this._mode=Wu.call(Ku,this,Xu&&Xu.words)},_doProcessBlock:function(Xu,Ku){this._mode.processBlock(Xu,Ku)},_doFinalize:function(){var Xu=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){Xu.pad(this._data,this.blockSize);var Ku=this._process(!0)}else Ku=this._process(!0),Xu.unpad(Ku);return Ku},blockSize:4});var zu=$u.CipherParams=Bu.extend({init:function(Xu){this.mixIn(Xu)},toString:function(Xu){return(Xu||this.formatter).stringify(this)}}),Hu=(Vu=(ju.format={}).OpenSSL={stringify:function(Xu){var Ku=Xu.ciphertext;return((Xu=Xu.salt)?Ru.create([1398893684,1701076831]).concat(Xu).concat(Ku):Ku).toString(Ou)},parse:function(Xu){var Ku=(Xu=Ou.parse(Xu)).words;if(Ku[0]==1398893684&&Ku[1]==1701076831){var Wu=Ru.create(Ku.slice(2,4));Ku.splice(0,4),Xu.sigBytes-=16}return zu.create({ciphertext:Xu,salt:Wu})}},$u.SerializableCipher=Bu.extend({cfg:Bu.extend({format:Vu}),encrypt:function(Xu,Ku,Wu,qu){qu=this.cfg.extend(qu);var Yu=Xu.createEncryptor(Wu,qu);return Ku=Yu.finalize(Ku),Yu=Yu.cfg,zu.create({ciphertext:Ku,key:Wu,iv:Yu.iv,algorithm:Xu,mode:Yu.mode,padding:Yu.padding,blockSize:Xu.blockSize,formatter:qu.format})},decrypt:function(Xu,Ku,Wu,qu){return qu=this.cfg.extend(qu),Ku=this._parse(Ku,qu.format),Xu.createDecryptor(Wu,qu).finalize(Ku.ciphertext)},_parse:function(Xu,Ku){return typeof Xu=="string"?Ku.parse(Xu,this):Xu}})),ju=(ju.kdf={}).OpenSSL={execute:function(Xu,Ku,Wu,qu){return qu||(qu=Ru.random(8)),Xu=Fu.create({keySize:Ku+Wu}).compute(Xu,qu),Wu=Ru.create(Xu.words.slice(Ku),4*Wu),Xu.sigBytes=4*Ku,zu.create({key:Xu,iv:Wu,salt:qu})}},Qu=$u.PasswordBasedCipher=Hu.extend({cfg:Hu.cfg.extend({kdf:ju}),encrypt:function(Xu,Ku,Wu,qu){return Wu=(qu=this.cfg.extend(qu)).kdf.execute(Wu,Xu.keySize,Xu.ivSize),qu.iv=Wu.iv,(Xu=Hu.encrypt.call(this,Xu,Ku,Wu.key,qu)).mixIn(Wu),Xu},decrypt:function(Xu,Ku,Wu,qu){return qu=this.cfg.extend(qu),Ku=this._parse(Ku,qu.format),Wu=qu.kdf.execute(Wu,Xu.keySize,Xu.ivSize,Ku.salt),qu.iv=Wu.iv,Hu.decrypt.call(this,Xu,Ku,Wu.key,qu)}})}(),function(){for(var _u=h$2,$u=_u.lib.BlockCipher,Bu=_u.algo,Ru=[],Lu=[],Ou=[],Fu=[],Nu=[],Vu=[],Uu=[],Gu=[],zu=[],Hu=[],ju=[],Qu=0;256>Qu;Qu++)ju[Qu]=128>Qu?Qu<<1:Qu<<1^283;var Xu=0,Ku=0;for(Qu=0;256>Qu;Qu++){var Wu=(Wu=Ku^Ku<<1^Ku<<2^Ku<<3^Ku<<4)>>>8^255&Wu^99;Ru[Xu]=Wu,Lu[Wu]=Xu;var qu=ju[Xu],Yu=ju[qu],Zu=ju[Yu],_h=257*ju[Wu]^16843008*Wu;Ou[Xu]=_h<<24|_h>>>8,Fu[Xu]=_h<<16|_h>>>16,Nu[Xu]=_h<<8|_h>>>24,Vu[Xu]=_h,_h=16843009*Zu^65537*Yu^257*qu^16843008*Xu,Uu[Wu]=_h<<24|_h>>>8,Gu[Wu]=_h<<16|_h>>>16,zu[Wu]=_h<<8|_h>>>24,Hu[Wu]=_h,Xu?(Xu=qu^ju[ju[ju[Zu^qu]]],Ku^=ju[ju[Ku]]):Xu=Ku=1}var ep=[0,1,2,4,8,16,32,64,128,27,54];Bu=Bu.AES=$u.extend({_doReset:function(){for(var ip=(sp=this._key).words,ap=sp.sigBytes/4,sp=4*((this._nRounds=ap+6)+1),Ju=this._keySchedule=[],_f=0;_f<sp;_f++)if(_f<ap)Ju[_f]=ip[_f];else{var np=Ju[_f-1];_f%ap?6<ap&&_f%ap==4&&(np=Ru[np>>>24]<<24|Ru[np>>>16&255]<<16|Ru[np>>>8&255]<<8|Ru[255&np]):(np=Ru[(np=np<<8|np>>>24)>>>24]<<24|Ru[np>>>16&255]<<16|Ru[np>>>8&255]<<8|Ru[255&np],np^=ep[_f/ap|0]<<24),Ju[_f]=Ju[_f-ap]^np}for(ip=this._invKeySchedule=[],ap=0;ap<sp;ap++)_f=sp-ap,np=ap%4?Ju[_f]:Ju[_f-4],ip[ap]=4>ap||4>=_f?np:Uu[Ru[np>>>24]]^Gu[Ru[np>>>16&255]]^zu[Ru[np>>>8&255]]^Hu[Ru[255&np]]},encryptBlock:function(ip,ap){this._doCryptBlock(ip,ap,this._keySchedule,Ou,Fu,Nu,Vu,Ru)},decryptBlock:function(ip,ap){var sp=ip[ap+1];ip[ap+1]=ip[ap+3],ip[ap+3]=sp,this._doCryptBlock(ip,ap,this._invKeySchedule,Uu,Gu,zu,Hu,Lu),sp=ip[ap+1],ip[ap+1]=ip[ap+3],ip[ap+3]=sp},_doCryptBlock:function(ip,ap,sp,Ju,_f,np,tp,rp){for(var op=this._nRounds,lp=ip[ap]^sp[0],up=ip[ap+1]^sp[1],cp=ip[ap+2]^sp[2],Ap=ip[ap+3]^sp[3],yp=4,Ip=1;Ip<op;Ip++){var Ep=Ju[lp>>>24]^_f[up>>>16&255]^np[cp>>>8&255]^tp[255&Ap]^sp[yp++],Vp=Ju[up>>>24]^_f[cp>>>16&255]^np[Ap>>>8&255]^tp[255&lp]^sp[yp++],$p=Ju[cp>>>24]^_f[Ap>>>16&255]^np[lp>>>8&255]^tp[255&up]^sp[yp++];Ap=Ju[Ap>>>24]^_f[lp>>>16&255]^np[up>>>8&255]^tp[255&cp]^sp[yp++],lp=Ep,up=Vp,cp=$p}Ep=(rp[lp>>>24]<<24|rp[up>>>16&255]<<16|rp[cp>>>8&255]<<8|rp[255&Ap])^sp[yp++],Vp=(rp[up>>>24]<<24|rp[cp>>>16&255]<<16|rp[Ap>>>8&255]<<8|rp[255&lp])^sp[yp++],$p=(rp[cp>>>24]<<24|rp[Ap>>>16&255]<<16|rp[lp>>>8&255]<<8|rp[255&up])^sp[yp++],Ap=(rp[Ap>>>24]<<24|rp[lp>>>16&255]<<16|rp[up>>>8&255]<<8|rp[255&cp])^sp[yp++],ip[ap]=Ep,ip[ap+1]=Vp,ip[ap+2]=$p,ip[ap+3]=Ap},keySize:8}),_u.AES=$u._createHelper(Bu)}(),u$2.lang={extend:function(_u,$u,Bu){if(!$u||!_u)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Ru=function(){};if(Ru.prototype=$u.prototype,_u.prototype=new Ru,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u),Bu){var Lu;for(Lu in Bu)_u.prototype[Lu]=Bu[Lu];var Ou=function(){},Fu=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Ou=function(Nu,Vu){for(Lu=0;Lu<Fu.length;Lu+=1){var Uu=Fu[Lu],Gu=Vu[Uu];typeof Gu=="function"&&Gu!=Object.prototype[Uu]&&(Nu[Uu]=Gu)}})}catch{}Ou(_u.prototype,Bu)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$2.prototype.am=function(_u,$u,Bu,Ru,Lu,Ou){for(var Fu=32767&$u,Nu=$u>>15;--Ou>=0;){var Vu=32767&this[_u],Uu=this[_u++]>>15,Gu=Nu*Vu+Uu*Fu;Lu=((Vu=Fu*Vu+((32767&Gu)<<15)+Bu[Ru]+(1073741823&Lu))>>>30)+(Gu>>>15)+Nu*Uu+(Lu>>>30),Bu[Ru++]=1073741823&Vu}return Lu},a$2=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$2.prototype.am=function(_u,$u,Bu,Ru,Lu,Ou){for(;--Ou>=0;){var Fu=$u*this[_u++]+Bu[Ru]+Lu;Lu=Math.floor(Fu/67108864),Bu[Ru++]=67108863&Fu}return Lu},a$2=26):(c$2.prototype.am=function(_u,$u,Bu,Ru,Lu,Ou){for(var Fu=16383&$u,Nu=$u>>14;--Ou>=0;){var Vu=16383&this[_u],Uu=this[_u++]>>14,Gu=Nu*Vu+Uu*Fu;Lu=((Vu=Fu*Vu+((16383&Gu)<<14)+Bu[Ru]+Lu)>>28)+(Gu>>14)+Nu*Uu,Bu[Ru++]=268435455&Vu}return Lu},a$2=28),c$2.prototype.DB=a$2,c$2.prototype.DM=(1<<a$2)-1,c$2.prototype.DV=1<<a$2;c$2.prototype.FV=Math.pow(2,52),c$2.prototype.F1=52-a$2,c$2.prototype.F2=2*a$2-52;var p$2,f$2,A$2=new Array;for(p$2="0".charCodeAt(0),f$2=0;f$2<=9;++f$2)A$2[p$2++]=f$2;for(p$2="a".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;for(p$2="A".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;function g$2(_u){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(_u)}function m$2(_u,$u){var Bu=A$2[_u.charCodeAt($u)];return Bu==null?-1:Bu}function v$3(_u){var $u=d$1();return $u.fromInt(_u),$u}function y$2(_u){var $u,Bu=1;return($u=_u>>>16)!=0&&(_u=$u,Bu+=16),($u=_u>>8)!=0&&(_u=$u,Bu+=8),($u=_u>>4)!=0&&(_u=$u,Bu+=4),($u=_u>>2)!=0&&(_u=$u,Bu+=2),($u=_u>>1)!=0&&(_u=$u,Bu+=1),Bu}function b$1(_u){this.m=_u}function x$1(_u){this.m=_u,this.mp=_u.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<_u.DB-15)-1,this.mt2=2*_u.t}function w$2(_u,$u){return _u&$u}function E$2(_u,$u){return _u|$u}function M$2(_u,$u){return _u^$u}function I$1(_u,$u){return _u&~$u}function S$1(_u){if(_u==0)return-1;var $u=0;return(65535&_u)==0&&(_u>>=16,$u+=16),(255&_u)==0&&(_u>>=8,$u+=8),(15&_u)==0&&(_u>>=4,$u+=4),(3&_u)==0&&(_u>>=2,$u+=2),(1&_u)==0&&++$u,$u}function C$3(_u){for(var $u=0;_u!=0;)_u&=_u-1,++$u;return $u}function B$1(){}function T(_u){return _u}function P$2(_u){this.r2=d$1(),this.q3=d$1(),c$2.ONE.dlShiftTo(2*_u.t,this.r2),this.mu=this.r2.divide(_u),this.m=_u}b$1.prototype.convert=function(_u){return _u.s<0||_u.compareTo(this.m)>=0?_u.mod(this.m):_u},b$1.prototype.revert=function(_u){return _u},b$1.prototype.reduce=function(_u){_u.divRemTo(this.m,null,_u)},b$1.prototype.mulTo=function(_u,$u,Bu){_u.multiplyTo($u,Bu),this.reduce(Bu)},b$1.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},x$1.prototype.convert=function(_u){var $u=d$1();return _u.abs().dlShiftTo(this.m.t,$u),$u.divRemTo(this.m,null,$u),_u.s<0&&$u.compareTo(c$2.ZERO)>0&&this.m.subTo($u,$u),$u},x$1.prototype.revert=function(_u){var $u=d$1();return _u.copyTo($u),this.reduce($u),$u},x$1.prototype.reduce=function(_u){for(;_u.t<=this.mt2;)_u[_u.t++]=0;for(var $u=0;$u<this.m.t;++$u){var Bu=32767&_u[$u],Ru=Bu*this.mpl+((Bu*this.mph+(_u[$u]>>15)*this.mpl&this.um)<<15)&_u.DM;for(_u[Bu=$u+this.m.t]+=this.m.am(0,Ru,_u,$u,0,this.m.t);_u[Bu]>=_u.DV;)_u[Bu]-=_u.DV,_u[++Bu]++}_u.clamp(),_u.drShiftTo(this.m.t,_u),_u.compareTo(this.m)>=0&&_u.subTo(this.m,_u)},x$1.prototype.mulTo=function(_u,$u,Bu){_u.multiplyTo($u,Bu),this.reduce(Bu)},x$1.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},c$2.prototype.copyTo=function(_u){for(var $u=this.t-1;$u>=0;--$u)_u[$u]=this[$u];_u.t=this.t,_u.s=this.s},c$2.prototype.fromInt=function(_u){this.t=1,this.s=_u<0?-1:0,_u>0?this[0]=_u:_u<-1?this[0]=_u+this.DV:this.t=0},c$2.prototype.fromString=function(_u,$u){var Bu;if($u==16)Bu=4;else if($u==8)Bu=3;else if($u==256)Bu=8;else if($u==2)Bu=1;else if($u==32)Bu=5;else{if($u!=4)return void this.fromRadix(_u,$u);Bu=2}this.t=0,this.s=0;for(var Ru=_u.length,Lu=!1,Ou=0;--Ru>=0;){var Fu=Bu==8?255&_u[Ru]:m$2(_u,Ru);Fu<0?_u.charAt(Ru)=="-"&&(Lu=!0):(Lu=!1,Ou==0?this[this.t++]=Fu:Ou+Bu>this.DB?(this[this.t-1]|=(Fu&(1<<this.DB-Ou)-1)<<Ou,this[this.t++]=Fu>>this.DB-Ou):this[this.t-1]|=Fu<<Ou,(Ou+=Bu)>=this.DB&&(Ou-=this.DB))}Bu==8&&(128&_u[0])!=0&&(this.s=-1,Ou>0&&(this[this.t-1]|=(1<<this.DB-Ou)-1<<Ou)),this.clamp(),Lu&&c$2.ZERO.subTo(this,this)},c$2.prototype.clamp=function(){for(var _u=this.s&this.DM;this.t>0&&this[this.t-1]==_u;)--this.t},c$2.prototype.dlShiftTo=function(_u,$u){var Bu;for(Bu=this.t-1;Bu>=0;--Bu)$u[Bu+_u]=this[Bu];for(Bu=_u-1;Bu>=0;--Bu)$u[Bu]=0;$u.t=this.t+_u,$u.s=this.s},c$2.prototype.drShiftTo=function(_u,$u){for(var Bu=_u;Bu<this.t;++Bu)$u[Bu-_u]=this[Bu];$u.t=Math.max(this.t-_u,0),$u.s=this.s},c$2.prototype.lShiftTo=function(_u,$u){var Bu,Ru=_u%this.DB,Lu=this.DB-Ru,Ou=(1<<Lu)-1,Fu=Math.floor(_u/this.DB),Nu=this.s<<Ru&this.DM;for(Bu=this.t-1;Bu>=0;--Bu)$u[Bu+Fu+1]=this[Bu]>>Lu|Nu,Nu=(this[Bu]&Ou)<<Ru;for(Bu=Fu-1;Bu>=0;--Bu)$u[Bu]=0;$u[Fu]=Nu,$u.t=this.t+Fu+1,$u.s=this.s,$u.clamp()},c$2.prototype.rShiftTo=function(_u,$u){$u.s=this.s;var Bu=Math.floor(_u/this.DB);if(Bu>=this.t)$u.t=0;else{var Ru=_u%this.DB,Lu=this.DB-Ru,Ou=(1<<Ru)-1;$u[0]=this[Bu]>>Ru;for(var Fu=Bu+1;Fu<this.t;++Fu)$u[Fu-Bu-1]|=(this[Fu]&Ou)<<Lu,$u[Fu-Bu]=this[Fu]>>Ru;Ru>0&&($u[this.t-Bu-1]|=(this.s&Ou)<<Lu),$u.t=this.t-Bu,$u.clamp()}},c$2.prototype.subTo=function(_u,$u){for(var Bu=0,Ru=0,Lu=Math.min(_u.t,this.t);Bu<Lu;)Ru+=this[Bu]-_u[Bu],$u[Bu++]=Ru&this.DM,Ru>>=this.DB;if(_u.t<this.t){for(Ru-=_u.s;Bu<this.t;)Ru+=this[Bu],$u[Bu++]=Ru&this.DM,Ru>>=this.DB;Ru+=this.s}else{for(Ru+=this.s;Bu<_u.t;)Ru-=_u[Bu],$u[Bu++]=Ru&this.DM,Ru>>=this.DB;Ru-=_u.s}$u.s=Ru<0?-1:0,Ru<-1?$u[Bu++]=this.DV+Ru:Ru>0&&($u[Bu++]=Ru),$u.t=Bu,$u.clamp()},c$2.prototype.multiplyTo=function(_u,$u){var Bu=this.abs(),Ru=_u.abs(),Lu=Bu.t;for($u.t=Lu+Ru.t;--Lu>=0;)$u[Lu]=0;for(Lu=0;Lu<Ru.t;++Lu)$u[Lu+Bu.t]=Bu.am(0,Ru[Lu],$u,Lu,0,Bu.t);$u.s=0,$u.clamp(),this.s!=_u.s&&c$2.ZERO.subTo($u,$u)},c$2.prototype.squareTo=function(_u){for(var $u=this.abs(),Bu=_u.t=2*$u.t;--Bu>=0;)_u[Bu]=0;for(Bu=0;Bu<$u.t-1;++Bu){var Ru=$u.am(Bu,$u[Bu],_u,2*Bu,0,1);(_u[Bu+$u.t]+=$u.am(Bu+1,2*$u[Bu],_u,2*Bu+1,Ru,$u.t-Bu-1))>=$u.DV&&(_u[Bu+$u.t]-=$u.DV,_u[Bu+$u.t+1]=1)}_u.t>0&&(_u[_u.t-1]+=$u.am(Bu,$u[Bu],_u,2*Bu,0,1)),_u.s=0,_u.clamp()},c$2.prototype.divRemTo=function(_u,$u,Bu){var Ru=_u.abs();if(!(Ru.t<=0)){var Lu=this.abs();if(Lu.t<Ru.t)return $u!=null&&$u.fromInt(0),void(Bu!=null&&this.copyTo(Bu));Bu==null&&(Bu=d$1());var Ou=d$1(),Fu=this.s,Nu=_u.s,Vu=this.DB-y$2(Ru[Ru.t-1]);Vu>0?(Ru.lShiftTo(Vu,Ou),Lu.lShiftTo(Vu,Bu)):(Ru.copyTo(Ou),Lu.copyTo(Bu));var Uu=Ou.t,Gu=Ou[Uu-1];if(Gu!=0){var zu=Gu*(1<<this.F1)+(Uu>1?Ou[Uu-2]>>this.F2:0),Hu=this.FV/zu,ju=(1<<this.F1)/zu,Qu=1<<this.F2,Xu=Bu.t,Ku=Xu-Uu,Wu=$u==null?d$1():$u;for(Ou.dlShiftTo(Ku,Wu),Bu.compareTo(Wu)>=0&&(Bu[Bu.t++]=1,Bu.subTo(Wu,Bu)),c$2.ONE.dlShiftTo(Uu,Wu),Wu.subTo(Ou,Ou);Ou.t<Uu;)Ou[Ou.t++]=0;for(;--Ku>=0;){var qu=Bu[--Xu]==Gu?this.DM:Math.floor(Bu[Xu]*Hu+(Bu[Xu-1]+Qu)*ju);if((Bu[Xu]+=Ou.am(0,qu,Bu,Ku,0,Uu))<qu)for(Ou.dlShiftTo(Ku,Wu),Bu.subTo(Wu,Bu);Bu[Xu]<--qu;)Bu.subTo(Wu,Bu)}$u!=null&&(Bu.drShiftTo(Uu,$u),Fu!=Nu&&c$2.ZERO.subTo($u,$u)),Bu.t=Uu,Bu.clamp(),Vu>0&&Bu.rShiftTo(Vu,Bu),Fu<0&&c$2.ZERO.subTo(Bu,Bu)}}},c$2.prototype.invDigit=function(){if(this.t<1)return 0;var _u=this[0];if((1&_u)==0)return 0;var $u=3&_u;return($u=($u=($u=($u=$u*(2-(15&_u)*$u)&15)*(2-(255&_u)*$u)&255)*(2-((65535&_u)*$u&65535))&65535)*(2-_u*$u%this.DV)%this.DV)>0?this.DV-$u:-$u},c$2.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$2.prototype.exp=function(_u,$u){if(_u>4294967295||_u<1)return c$2.ONE;var Bu=d$1(),Ru=d$1(),Lu=$u.convert(this),Ou=y$2(_u)-1;for(Lu.copyTo(Bu);--Ou>=0;)if($u.sqrTo(Bu,Ru),(_u&1<<Ou)>0)$u.mulTo(Ru,Lu,Bu);else{var Fu=Bu;Bu=Ru,Ru=Fu}return $u.revert(Bu)},c$2.prototype.toString=function(_u){if(this.s<0)return"-"+this.negate().toString(_u);var $u;if(_u==16)$u=4;else if(_u==8)$u=3;else if(_u==2)$u=1;else if(_u==32)$u=5;else{if(_u!=4)return this.toRadix(_u);$u=2}var Bu,Ru=(1<<$u)-1,Lu=!1,Ou="",Fu=this.t,Nu=this.DB-Fu*this.DB%$u;if(Fu-- >0)for(Nu<this.DB&&(Bu=this[Fu]>>Nu)>0&&(Lu=!0,Ou=g$2(Bu));Fu>=0;)Nu<$u?(Bu=(this[Fu]&(1<<Nu)-1)<<$u-Nu,Bu|=this[--Fu]>>(Nu+=this.DB-$u)):(Bu=this[Fu]>>(Nu-=$u)&Ru,Nu<=0&&(Nu+=this.DB,--Fu)),Bu>0&&(Lu=!0),Lu&&(Ou+=g$2(Bu));return Lu?Ou:"0"},c$2.prototype.negate=function(){var _u=d$1();return c$2.ZERO.subTo(this,_u),_u},c$2.prototype.abs=function(){return this.s<0?this.negate():this},c$2.prototype.compareTo=function(_u){var $u=this.s-_u.s;if($u!=0)return $u;var Bu=this.t;if(($u=Bu-_u.t)!=0)return this.s<0?-$u:$u;for(;--Bu>=0;)if(($u=this[Bu]-_u[Bu])!=0)return $u;return 0},c$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$2(this[this.t-1]^this.s&this.DM)},c$2.prototype.mod=function(_u){var $u=d$1();return this.abs().divRemTo(_u,null,$u),this.s<0&&$u.compareTo(c$2.ZERO)>0&&_u.subTo($u,$u),$u},c$2.prototype.modPowInt=function(_u,$u){var Bu;return Bu=_u<256||$u.isEven()?new b$1($u):new x$1($u),this.exp(_u,Bu)},c$2.ZERO=v$3(0),c$2.ONE=v$3(1),B$1.prototype.convert=T,B$1.prototype.revert=T,B$1.prototype.mulTo=function(_u,$u,Bu){_u.multiplyTo($u,Bu)},B$1.prototype.sqrTo=function(_u,$u){_u.squareTo($u)},P$2.prototype.convert=function(_u){if(_u.s<0||_u.t>2*this.m.t)return _u.mod(this.m);if(_u.compareTo(this.m)<0)return _u;var $u=d$1();return _u.copyTo($u),this.reduce($u),$u},P$2.prototype.revert=function(_u){return _u},P$2.prototype.reduce=function(_u){for(_u.drShiftTo(this.m.t-1,this.r2),_u.t>this.m.t+1&&(_u.t=this.m.t+1,_u.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);_u.compareTo(this.r2)<0;)_u.dAddOffset(1,this.m.t+1);for(_u.subTo(this.r2,_u);_u.compareTo(this.m)>=0;)_u.subTo(this.m,_u)},P$2.prototype.mulTo=function(_u,$u,Bu){_u.multiplyTo($u,Bu),this.reduce(Bu)},P$2.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)};var R$2=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k$1=(1<<26)/R$2[R$2.length-1];c$2.prototype.chunkSize=function(_u){return Math.floor(Math.LN2*this.DB/Math.log(_u))},c$2.prototype.toRadix=function(_u){if(_u==null&&(_u=10),this.signum()==0||_u<2||_u>36)return"0";var $u=this.chunkSize(_u),Bu=Math.pow(_u,$u),Ru=v$3(Bu),Lu=d$1(),Ou=d$1(),Fu="";for(this.divRemTo(Ru,Lu,Ou);Lu.signum()>0;)Fu=(Bu+Ou.intValue()).toString(_u).substr(1)+Fu,Lu.divRemTo(Ru,Lu,Ou);return Ou.intValue().toString(_u)+Fu},c$2.prototype.fromRadix=function(_u,$u){this.fromInt(0),$u==null&&($u=10);for(var Bu=this.chunkSize($u),Ru=Math.pow($u,Bu),Lu=!1,Ou=0,Fu=0,Nu=0;Nu<_u.length;++Nu){var Vu=m$2(_u,Nu);Vu<0?_u.charAt(Nu)=="-"&&this.signum()==0&&(Lu=!0):(Fu=$u*Fu+Vu,++Ou>=Bu&&(this.dMultiply(Ru),this.dAddOffset(Fu,0),Ou=0,Fu=0))}Ou>0&&(this.dMultiply(Math.pow($u,Ou)),this.dAddOffset(Fu,0)),Lu&&c$2.ZERO.subTo(this,this)},c$2.prototype.fromNumber=function(_u,$u,Bu){if(typeof $u=="number")if(_u<2)this.fromInt(1);else for(this.fromNumber(_u,Bu),this.testBit(_u-1)||this.bitwiseTo(c$2.ONE.shiftLeft(_u-1),E$2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime($u);)this.dAddOffset(2,0),this.bitLength()>_u&&this.subTo(c$2.ONE.shiftLeft(_u-1),this);else{var Ru=new Array,Lu=7&_u;Ru.length=1+(_u>>3),$u.nextBytes(Ru),Lu>0?Ru[0]&=(1<<Lu)-1:Ru[0]=0,this.fromString(Ru,256)}},c$2.prototype.bitwiseTo=function(_u,$u,Bu){var Ru,Lu,Ou=Math.min(_u.t,this.t);for(Ru=0;Ru<Ou;++Ru)Bu[Ru]=$u(this[Ru],_u[Ru]);if(_u.t<this.t){for(Lu=_u.s&this.DM,Ru=Ou;Ru<this.t;++Ru)Bu[Ru]=$u(this[Ru],Lu);Bu.t=this.t}else{for(Lu=this.s&this.DM,Ru=Ou;Ru<_u.t;++Ru)Bu[Ru]=$u(Lu,_u[Ru]);Bu.t=_u.t}Bu.s=$u(this.s,_u.s),Bu.clamp()},c$2.prototype.changeBit=function(_u,$u){var Bu=c$2.ONE.shiftLeft(_u);return this.bitwiseTo(Bu,$u,Bu),Bu},c$2.prototype.addTo=function(_u,$u){for(var Bu=0,Ru=0,Lu=Math.min(_u.t,this.t);Bu<Lu;)Ru+=this[Bu]+_u[Bu],$u[Bu++]=Ru&this.DM,Ru>>=this.DB;if(_u.t<this.t){for(Ru+=_u.s;Bu<this.t;)Ru+=this[Bu],$u[Bu++]=Ru&this.DM,Ru>>=this.DB;Ru+=this.s}else{for(Ru+=this.s;Bu<_u.t;)Ru+=_u[Bu],$u[Bu++]=Ru&this.DM,Ru>>=this.DB;Ru+=_u.s}$u.s=Ru<0?-1:0,Ru>0?$u[Bu++]=Ru:Ru<-1&&($u[Bu++]=this.DV+Ru),$u.t=Bu,$u.clamp()},c$2.prototype.dMultiply=function(_u){this[this.t]=this.am(0,_u-1,this,0,0,this.t),++this.t,this.clamp()},c$2.prototype.dAddOffset=function(_u,$u){if(_u!=0){for(;this.t<=$u;)this[this.t++]=0;for(this[$u]+=_u;this[$u]>=this.DV;)this[$u]-=this.DV,++$u>=this.t&&(this[this.t++]=0),++this[$u]}},c$2.prototype.multiplyLowerTo=function(_u,$u,Bu){var Ru,Lu=Math.min(this.t+_u.t,$u);for(Bu.s=0,Bu.t=Lu;Lu>0;)Bu[--Lu]=0;for(Ru=Bu.t-this.t;Lu<Ru;++Lu)Bu[Lu+this.t]=this.am(0,_u[Lu],Bu,Lu,0,this.t);for(Ru=Math.min(_u.t,$u);Lu<Ru;++Lu)this.am(0,_u[Lu],Bu,Lu,0,$u-Lu);Bu.clamp()},c$2.prototype.multiplyUpperTo=function(_u,$u,Bu){--$u;var Ru=Bu.t=this.t+_u.t-$u;for(Bu.s=0;--Ru>=0;)Bu[Ru]=0;for(Ru=Math.max($u-this.t,0);Ru<_u.t;++Ru)Bu[this.t+Ru-$u]=this.am($u-Ru,_u[Ru],Bu,0,0,this.t+Ru-$u);Bu.clamp(),Bu.drShiftTo(1,Bu)},c$2.prototype.modInt=function(_u){if(_u<=0)return 0;var $u=this.DV%_u,Bu=this.s<0?_u-1:0;if(this.t>0)if($u==0)Bu=this[0]%_u;else for(var Ru=this.t-1;Ru>=0;--Ru)Bu=($u*Bu+this[Ru])%_u;return Bu},c$2.prototype.millerRabin=function(_u){var $u=this.subtract(c$2.ONE),Bu=$u.getLowestSetBit();if(Bu<=0)return!1;var Ru=$u.shiftRight(Bu);(_u=_u+1>>1)>R$2.length&&(_u=R$2.length);for(var Lu=d$1(),Ou=0;Ou<_u;++Ou){Lu.fromInt(R$2[Math.floor(Math.random()*R$2.length)]);var Fu=Lu.modPow(Ru,this);if(Fu.compareTo(c$2.ONE)!=0&&Fu.compareTo($u)!=0){for(var Nu=1;Nu++<Bu&&Fu.compareTo($u)!=0;)if((Fu=Fu.modPowInt(2,this)).compareTo(c$2.ONE)==0)return!1;if(Fu.compareTo($u)!=0)return!1}}return!0},c$2.prototype.clone=function(){var _u=d$1();return this.copyTo(_u),_u},c$2.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$2.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$2.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$2.prototype.toByteArray=function(){var _u=this.t,$u=new Array;$u[0]=this.s;var Bu,Ru=this.DB-_u*this.DB%8,Lu=0;if(_u-- >0)for(Ru<this.DB&&(Bu=this[_u]>>Ru)!=(this.s&this.DM)>>Ru&&($u[Lu++]=Bu|this.s<<this.DB-Ru);_u>=0;)Ru<8?(Bu=(this[_u]&(1<<Ru)-1)<<8-Ru,Bu|=this[--_u]>>(Ru+=this.DB-8)):(Bu=this[_u]>>(Ru-=8)&255,Ru<=0&&(Ru+=this.DB,--_u)),(128&Bu)!=0&&(Bu|=-256),Lu==0&&(128&this.s)!=(128&Bu)&&++Lu,(Lu>0||Bu!=this.s)&&($u[Lu++]=Bu);return $u},c$2.prototype.equals=function(_u){return this.compareTo(_u)==0},c$2.prototype.min=function(_u){return this.compareTo(_u)<0?this:_u},c$2.prototype.max=function(_u){return this.compareTo(_u)>0?this:_u},c$2.prototype.and=function(_u){var $u=d$1();return this.bitwiseTo(_u,w$2,$u),$u},c$2.prototype.or=function(_u){var $u=d$1();return this.bitwiseTo(_u,E$2,$u),$u},c$2.prototype.xor=function(_u){var $u=d$1();return this.bitwiseTo(_u,M$2,$u),$u},c$2.prototype.andNot=function(_u){var $u=d$1();return this.bitwiseTo(_u,I$1,$u),$u},c$2.prototype.not=function(){for(var _u=d$1(),$u=0;$u<this.t;++$u)_u[$u]=this.DM&~this[$u];return _u.t=this.t,_u.s=~this.s,_u},c$2.prototype.shiftLeft=function(_u){var $u=d$1();return _u<0?this.rShiftTo(-_u,$u):this.lShiftTo(_u,$u),$u},c$2.prototype.shiftRight=function(_u){var $u=d$1();return _u<0?this.lShiftTo(-_u,$u):this.rShiftTo(_u,$u),$u},c$2.prototype.getLowestSetBit=function(){for(var _u=0;_u<this.t;++_u)if(this[_u]!=0)return _u*this.DB+S$1(this[_u]);return this.s<0?this.t*this.DB:-1},c$2.prototype.bitCount=function(){for(var _u=0,$u=this.s&this.DM,Bu=0;Bu<this.t;++Bu)_u+=C$3(this[Bu]^$u);return _u},c$2.prototype.testBit=function(_u){var $u=Math.floor(_u/this.DB);return $u>=this.t?this.s!=0:(this[$u]&1<<_u%this.DB)!=0},c$2.prototype.setBit=function(_u){return this.changeBit(_u,E$2)},c$2.prototype.clearBit=function(_u){return this.changeBit(_u,I$1)},c$2.prototype.flipBit=function(_u){return this.changeBit(_u,M$2)},c$2.prototype.add=function(_u){var $u=d$1();return this.addTo(_u,$u),$u},c$2.prototype.subtract=function(_u){var $u=d$1();return this.subTo(_u,$u),$u},c$2.prototype.multiply=function(_u){var $u=d$1();return this.multiplyTo(_u,$u),$u},c$2.prototype.divide=function(_u){var $u=d$1();return this.divRemTo(_u,$u,null),$u},c$2.prototype.remainder=function(_u){var $u=d$1();return this.divRemTo(_u,null,$u),$u},c$2.prototype.divideAndRemainder=function(_u){var $u=d$1(),Bu=d$1();return this.divRemTo(_u,$u,Bu),new Array($u,Bu)},c$2.prototype.modPow=function(_u,$u){var Bu,Ru,Lu=_u.bitLength(),Ou=v$3(1);if(Lu<=0)return Ou;Bu=Lu<18?1:Lu<48?3:Lu<144?4:Lu<768?5:6,Ru=Lu<8?new b$1($u):$u.isEven()?new P$2($u):new x$1($u);var Fu=new Array,Nu=3,Vu=Bu-1,Uu=(1<<Bu)-1;if(Fu[1]=Ru.convert(this),Bu>1){var Gu=d$1();for(Ru.sqrTo(Fu[1],Gu);Nu<=Uu;)Fu[Nu]=d$1(),Ru.mulTo(Gu,Fu[Nu-2],Fu[Nu]),Nu+=2}var zu,Hu,ju=_u.t-1,Qu=!0,Xu=d$1();for(Lu=y$2(_u[ju])-1;ju>=0;){for(Lu>=Vu?zu=_u[ju]>>Lu-Vu&Uu:(zu=(_u[ju]&(1<<Lu+1)-1)<<Vu-Lu,ju>0&&(zu|=_u[ju-1]>>this.DB+Lu-Vu)),Nu=Bu;(1&zu)==0;)zu>>=1,--Nu;if((Lu-=Nu)<0&&(Lu+=this.DB,--ju),Qu)Fu[zu].copyTo(Ou),Qu=!1;else{for(;Nu>1;)Ru.sqrTo(Ou,Xu),Ru.sqrTo(Xu,Ou),Nu-=2;Nu>0?Ru.sqrTo(Ou,Xu):(Hu=Ou,Ou=Xu,Xu=Hu),Ru.mulTo(Xu,Fu[zu],Ou)}for(;ju>=0&&(_u[ju]&1<<Lu)==0;)Ru.sqrTo(Ou,Xu),Hu=Ou,Ou=Xu,Xu=Hu,--Lu<0&&(Lu=this.DB-1,--ju)}return Ru.revert(Ou)},c$2.prototype.modInverse=function(_u){var $u=_u.isEven();if(this.isEven()&&$u||_u.signum()==0)return c$2.ZERO;for(var Bu=_u.clone(),Ru=this.clone(),Lu=v$3(1),Ou=v$3(0),Fu=v$3(0),Nu=v$3(1);Bu.signum()!=0;){for(;Bu.isEven();)Bu.rShiftTo(1,Bu),$u?(Lu.isEven()&&Ou.isEven()||(Lu.addTo(this,Lu),Ou.subTo(_u,Ou)),Lu.rShiftTo(1,Lu)):Ou.isEven()||Ou.subTo(_u,Ou),Ou.rShiftTo(1,Ou);for(;Ru.isEven();)Ru.rShiftTo(1,Ru),$u?(Fu.isEven()&&Nu.isEven()||(Fu.addTo(this,Fu),Nu.subTo(_u,Nu)),Fu.rShiftTo(1,Fu)):Nu.isEven()||Nu.subTo(_u,Nu),Nu.rShiftTo(1,Nu);Bu.compareTo(Ru)>=0?(Bu.subTo(Ru,Bu),$u&&Lu.subTo(Fu,Lu),Ou.subTo(Nu,Ou)):(Ru.subTo(Bu,Ru),$u&&Fu.subTo(Lu,Fu),Nu.subTo(Ou,Nu))}return Ru.compareTo(c$2.ONE)!=0?c$2.ZERO:Nu.compareTo(_u)>=0?Nu.subtract(_u):Nu.signum()<0?(Nu.addTo(_u,Nu),Nu.signum()<0?Nu.add(_u):Nu):Nu},c$2.prototype.pow=function(_u){return this.exp(_u,new B$1)},c$2.prototype.gcd=function(_u){var $u=this.s<0?this.negate():this.clone(),Bu=_u.s<0?_u.negate():_u.clone();if($u.compareTo(Bu)<0){var Ru=$u;$u=Bu,Bu=Ru}var Lu=$u.getLowestSetBit(),Ou=Bu.getLowestSetBit();if(Ou<0)return $u;for(Lu<Ou&&(Ou=Lu),Ou>0&&($u.rShiftTo(Ou,$u),Bu.rShiftTo(Ou,Bu));$u.signum()>0;)(Lu=$u.getLowestSetBit())>0&&$u.rShiftTo(Lu,$u),(Lu=Bu.getLowestSetBit())>0&&Bu.rShiftTo(Lu,Bu),$u.compareTo(Bu)>=0?($u.subTo(Bu,$u),$u.rShiftTo(1,$u)):(Bu.subTo($u,Bu),Bu.rShiftTo(1,Bu));return Ou>0&&Bu.lShiftTo(Ou,Bu),Bu},c$2.prototype.isProbablePrime=function(_u){var $u,Bu=this.abs();if(Bu.t==1&&Bu[0]<=R$2[R$2.length-1]){for($u=0;$u<R$2.length;++$u)if(Bu[0]==R$2[$u])return!0;return!1}if(Bu.isEven())return!1;for($u=1;$u<R$2.length;){for(var Ru=R$2[$u],Lu=$u+1;Lu<R$2.length&&Ru<k$1;)Ru*=R$2[Lu++];for(Ru=Bu.modInt(Ru);$u<Lu;)if(Ru%R$2[$u++]==0)return!1}return Bu.millerRabin(_u)},c$2.prototype.square=function(){var _u=d$1();return this.squareTo(_u),_u};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L$2(_u){var $u,Bu,Ru="";for($u=0;$u+3<=_u.length;$u+=3)Bu=parseInt(_u.substring($u,$u+3),16),Ru+=D$1.charAt(Bu>>6)+D$1.charAt(63&Bu);for($u+1==_u.length?(Bu=parseInt(_u.substring($u,$u+1),16),Ru+=D$1.charAt(Bu<<2)):$u+2==_u.length&&(Bu=parseInt(_u.substring($u,$u+2),16),Ru+=D$1.charAt(Bu>>2)+D$1.charAt((3&Bu)<<4));(3&Ru.length)>0;)Ru+="=";return Ru}function O$2(_u){var $u,Bu,Ru,Lu="",Ou=0;for($u=0;$u<_u.length&&_u.charAt($u)!="=";++$u)(Ru=D$1.indexOf(_u.charAt($u)))<0||(Ou==0?(Lu+=g$2(Ru>>2),Bu=3&Ru,Ou=1):Ou==1?(Lu+=g$2(Bu<<2|Ru>>4),Bu=15&Ru,Ou=2):Ou==2?(Lu+=g$2(Bu),Lu+=g$2(Ru>>2),Bu=3&Ru,Ou=3):(Lu+=g$2(Bu<<2|Ru>>4),Lu+=g$2(15&Ru),Ou=0));return Ou==1&&(Lu+=g$2(Bu<<2)),Lu}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function N$3(){this.i=0,this.j=0,this.S=new Array}N$3.prototype.init=function(_u){var $u,Bu,Ru;for($u=0;$u<256;++$u)this.S[$u]=$u;for(Bu=0,$u=0;$u<256;++$u)Bu=Bu+this.S[$u]+_u[$u%_u.length]&255,Ru=this.S[$u],this.S[$u]=this.S[Bu],this.S[Bu]=Ru;this.i=0,this.j=0},N$3.prototype.next=function(){var _u;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,_u=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=_u,this.S[_u+this.S[this.i]&255]};var F$2,Q$2,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function _$2(){var _u;_u=new Date().getTime(),Q$2[V$1++]^=255&_u,Q$2[V$1++]^=_u>>8&255,Q$2[V$1++]^=_u>>16&255,Q$2[V$1++]^=_u>>24&255,V$1>=256&&(V$1-=256)}if(Q$2==null){var H$2;if(Q$2=new Array,V$1=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var q$2=window.crypto||window.msCrypto;if(q$2.getRandomValues){var z=new Uint8Array(32);for(q$2.getRandomValues(z),H$2=0;H$2<32;++H$2)Q$2[V$1++]=z[H$2]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var K$1=window.crypto.random(32);for(H$2=0;H$2<K$1.length;++H$2)Q$2[V$1++]=255&K$1.charCodeAt(H$2)}}for(;V$1<256;)H$2=Math.floor(65536*Math.random()),Q$2[V$1++]=H$2>>>8,Q$2[V$1++]=255&H$2;V$1=0,_$2()}function U$1(){if(F$2==null){for(_$2(),(F$2=new N$3).init(Q$2),V$1=0;V$1<Q$2.length;++V$1)Q$2[V$1]=0;V$1=0}return F$2.next()}function j$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G$1(_u,$u){return new c$2(_u,$u)}function W$3(_u,$u,Bu){for(var Ru="",Lu=0;Ru.length<$u;)Ru+=Bu(String.fromCharCode.apply(String,_u.concat([(4278190080&Lu)>>24,(16711680&Lu)>>16,(65280&Lu)>>8,255&Lu]))),Lu+=1;return Ru}function X$1(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y$1(_u,$u,Bu){for(var Ru="",Lu=0;Ru.length<$u;)Ru+=Bu(_u+String.fromCharCode.apply(String,[(4278190080&Lu)>>24,(16711680&Lu)>>16,(65280&Lu)>>8,255&Lu])),Lu+=1;return Ru}function Z$1(_u){for(var $u="",Bu=0;Bu<_u.length;Bu++){var Ru=_u[Bu].toString(16);Ru.length==1&&(Ru="0"+Ru),$u+=Ru}return $u}function J$1(_u){return Z$1(function($u){for(var Bu=new Array,Ru=0;Ru<$u.length;Ru++)Bu[Ru]=$u.charCodeAt(Ru);return Bu}(_u))}function $$1(_u){return _u.length%4==2?_u+="==":_u.length%4==3&&(_u+="="),_u=(_u=_u.replace(/-/g,"+")).replace(/_/g,"/")}function ee(_u){return _u.length%2==1&&(_u="0"+_u),function($u){return($u=($u=$u.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(L$2(_u))}function te(_u){return O$2($$1(_u))}function ie$1(_u){return function($u){return $u.replace(/%/g,"")}(function($u){for(var Bu=encodeURIComponent($u),Ru="",Lu=0;Lu<Bu.length;Lu++)Bu[Lu]=="%"?(Ru+=Bu.substr(Lu,3),Lu+=2):Ru=Ru+"%"+J$1(Bu[Lu]);return Ru}(_u))}function ne(_u){return decodeURIComponent(function($u){return $u.replace(/(..)/g,"%$1")}(_u))}function re$1(_u){for(var $u="",Bu=0;Bu<_u.length-1;Bu+=2)$u+=String.fromCharCode(parseInt(_u.substr(Bu,2),16));return $u}function oe$1(_u){for(var $u="",Bu=0;Bu<_u.length;Bu++)$u+=("0"+_u.charCodeAt(Bu).toString(16)).slice(-2);return $u}function se$1(_u){var $u=function(Bu){return L$2(Bu)}(_u).replace(/(.{64})/g,`$1\r
`);return $u=$u.replace(/\r\n$/,"")}function ae$1(_u,$u){return"-----BEGIN "+$u+`-----\r
`+se$1(_u)+`\r
-----END `+$u+`-----\r
`}function le(_u,$u){if(_u.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+$u;return function(Bu){return O$2(Bu.replace(/[^0-9A-Za-z\/+=]*/g,""))}(_u=$u!==void 0?(_u=_u.replace(new RegExp("^[^]*-----BEGIN "+$u+"-----"),"")).replace(new RegExp("-----END "+$u+"-----[^]*$"),""):(_u=_u.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ue$1(_u){var $u="malformed hex value";if(!_u.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw $u;if(_u.length!=8)return _u.length==32?function(Bu){if(!Bu.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Ru=(Bu=Bu.toLowerCase()).match(/.{1,4}/g),Lu=0;Lu<8;Lu++)Ru[Lu]=Ru[Lu].replace(/^0+/,""),Ru[Lu]==""&&(Ru[Lu]="0");var Ou=(Bu=":"+Ru.join(":")+":").match(/:(0:){2,}/g);if(Ou===null)return Bu.slice(1,-1);var Fu="";for(Lu=0;Lu<Ou.length;Lu++)Ou[Lu].length>Fu.length&&(Fu=Ou[Lu]);return(Bu=Bu.replace(Fu,"::")).slice(1,-1)}(_u):_u;try{return parseInt(_u.substr(0,2),16)+"."+parseInt(_u.substr(2,2),16)+"."+parseInt(_u.substr(4,2),16)+"."+parseInt(_u.substr(6,2),16)}catch{throw $u}}function he(_u){return _u.match(/.{4}/g).map(function($u){var Bu=parseInt($u.substr(0,2),16),Ru=parseInt($u.substr(2),16);if(Bu==0&Ru<128)return String.fromCharCode(Ru);if(Bu<8){var Lu=128|63&Ru;return ne((192|(7&Bu)<<3|(192&Ru)>>6).toString(16)+Lu.toString(16))}Lu=128|(15&Bu)<<2|(192&Ru)>>6;var Ou=128|63&Ru;return ne((224|(240&Bu)>>4).toString(16)+Lu.toString(16)+Ou.toString(16))}).join("")}function ce$1(_u){return!(_u.length%2!=0||!_u.match(/^[0-9a-f]+$/)&&!_u.match(/^[0-9A-F]+$/))}function de$1(_u){return _u.length%2==1?"0"+_u:_u.substr(0,1)>"7"?"00"+_u:_u}j$1.prototype.nextBytes=function(_u){var $u;for($u=0;$u<_u.length;++$u)_u[$u]=U$1()},X$1.prototype.doPublic=function(_u){return _u.modPowInt(this.e,this.n)},X$1.prototype.setPublic=function(_u,$u){if(this.isPublic=!0,this.isPrivate=!1,typeof _u!="string")this.n=_u,this.e=$u;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA public key";this.n=G$1(_u,16),this.e=parseInt($u,16)}},X$1.prototype.encrypt=function(_u){var $u=function(Lu,Ou){if(Ou<Lu.length+11)throw"Message too long for RSA";for(var Fu=new Array,Nu=Lu.length-1;Nu>=0&&Ou>0;){var Vu=Lu.charCodeAt(Nu--);Vu<128?Fu[--Ou]=Vu:Vu>127&&Vu<2048?(Fu[--Ou]=63&Vu|128,Fu[--Ou]=Vu>>6|192):(Fu[--Ou]=63&Vu|128,Fu[--Ou]=Vu>>6&63|128,Fu[--Ou]=Vu>>12|224)}Fu[--Ou]=0;for(var Uu=new j$1,Gu=new Array;Ou>2;){for(Gu[0]=0;Gu[0]==0;)Uu.nextBytes(Gu);Fu[--Ou]=Gu[0]}return Fu[--Ou]=2,Fu[--Ou]=0,new c$2(Fu)}(_u,this.n.bitLength()+7>>3);if($u==null)return null;var Bu=this.doPublic($u);if(Bu==null)return null;var Ru=Bu.toString(16);return(1&Ru.length)==0?Ru:"0"+Ru},X$1.prototype.encryptOAEP=function(_u,$u,Bu){var Ru=function(Fu,Nu,Vu,Uu){var Gu=l$3.crypto.MessageDigest,zu=l$3.crypto.Util,Hu=null;if(Vu||(Vu="sha1"),typeof Vu=="string"&&(Hu=Gu.getCanonicalAlgName(Vu),Uu=Gu.getHashLength(Hu),Vu=function(_h){return re$1(zu.hashHex(oe$1(_h),Hu))}),Fu.length+2*Uu+2>Nu)throw"Message too long for RSA";var ju,Qu="";for(ju=0;ju<Nu-Fu.length-2*Uu-2;ju+=1)Qu+="\0";var Xu=Vu("")+Qu+""+Fu,Ku=new Array(Uu);new j$1().nextBytes(Ku);var Wu=W$3(Ku,Xu.length,Vu),qu=[];for(ju=0;ju<Xu.length;ju+=1)qu[ju]=Xu.charCodeAt(ju)^Wu.charCodeAt(ju);var Yu=W$3(qu,Ku.length,Vu),Zu=[0];for(ju=0;ju<Ku.length;ju+=1)Zu[ju+1]=Ku[ju]^Yu.charCodeAt(ju);return new c$2(Zu.concat(qu))}(_u,this.n.bitLength()+7>>3,$u,Bu);if(Ru==null)return null;var Lu=this.doPublic(Ru);if(Lu==null)return null;var Ou=Lu.toString(16);return(1&Ou.length)==0?Ou:"0"+Ou},X$1.prototype.type="RSA",X$1.prototype.doPrivate=function(_u){if(this.p==null||this.q==null)return _u.modPow(this.d,this.n);for(var $u=_u.mod(this.p).modPow(this.dmp1,this.p),Bu=_u.mod(this.q).modPow(this.dmq1,this.q);$u.compareTo(Bu)<0;)$u=$u.add(this.p);return $u.subtract(Bu).multiply(this.coeff).mod(this.p).multiply(this.q).add(Bu)},X$1.prototype.setPrivate=function(_u,$u,Bu){if(this.isPrivate=!0,typeof _u!="string")this.n=_u,this.e=$u,this.d=Bu;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key";this.n=G$1(_u,16),this.e=parseInt($u,16),this.d=G$1(Bu,16)}},X$1.prototype.setPrivateEx=function(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){if(this.isPrivate=!0,this.isPublic=!1,_u==null)throw"RSASetPrivateEx N == null";if($u==null)throw"RSASetPrivateEx E == null";if(_u.length==0)throw"RSASetPrivateEx N.length == 0";if($u.length==0)throw"RSASetPrivateEx E.length == 0";if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G$1(_u,16),this.e=parseInt($u,16),this.d=G$1(Bu,16),this.p=G$1(Ru,16),this.q=G$1(Lu,16),this.dmp1=G$1(Ou,16),this.dmq1=G$1(Fu,16),this.coeff=G$1(Nu,16)},X$1.prototype.generate=function(_u,$u){var Bu=new j$1,Ru=_u>>1;this.e=parseInt($u,16);for(var Lu=new c$2($u,16);;){for(;this.p=new c$2(_u-Ru,1,Bu),this.p.subtract(c$2.ONE).gcd(Lu).compareTo(c$2.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$2(Ru,1,Bu),this.q.subtract(c$2.ONE).gcd(Lu).compareTo(c$2.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Ou=this.p;this.p=this.q,this.q=Ou}var Fu=this.p.subtract(c$2.ONE),Nu=this.q.subtract(c$2.ONE),Vu=Fu.multiply(Nu);if(Vu.gcd(Lu).compareTo(c$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==_u)){this.d=Lu.modInverse(Vu),this.dmp1=this.d.mod(Fu),this.dmq1=this.d.mod(Nu),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X$1.prototype.decrypt=function(_u){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var $u=G$1(_u,16),Bu=this.doPrivate($u);return Bu==null?null:function(Ru,Lu){for(var Ou=Ru.toByteArray(),Fu=0;Fu<Ou.length&&Ou[Fu]==0;)++Fu;if(Ou.length-Fu!=Lu-1||Ou[Fu]!=2)return null;for(++Fu;Ou[Fu]!=0;)if(++Fu>=Ou.length)return null;for(var Nu="";++Fu<Ou.length;){var Vu=255&Ou[Fu];Vu<128?Nu+=String.fromCharCode(Vu):Vu>191&&Vu<224?(Nu+=String.fromCharCode((31&Vu)<<6|63&Ou[Fu+1]),++Fu):(Nu+=String.fromCharCode((15&Vu)<<12|(63&Ou[Fu+1])<<6|63&Ou[Fu+2]),Fu+=2)}return Nu}(Bu,this.n.bitLength()+7>>3)},X$1.prototype.decryptOAEP=function(_u,$u,Bu){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Ru=G$1(_u,16),Lu=this.doPrivate(Ru);return Lu==null?null:function(Ou,Fu,Nu,Vu){var Uu=l$3.crypto.MessageDigest,Gu=l$3.crypto.Util,zu=null;for(Nu||(Nu="sha1"),typeof Nu=="string"&&(zu=Uu.getCanonicalAlgName(Nu),Vu=Uu.getHashLength(zu),Nu=function(Zu){return re$1(Gu.hashHex(oe$1(Zu),zu))}),Ou=Ou.toByteArray(),Hu=0;Hu<Ou.length;Hu+=1)Ou[Hu]&=255;for(;Ou.length<Fu;)Ou.unshift(0);if((Ou=String.fromCharCode.apply(String,Ou)).length<2*Vu+2)throw"Cipher too short";var Hu,ju=Ou.substr(1,Vu),Qu=Ou.substr(Vu+1),Xu=Y$1(Qu,Vu,Nu),Ku=[];for(Hu=0;Hu<ju.length;Hu+=1)Ku[Hu]=ju.charCodeAt(Hu)^Xu.charCodeAt(Hu);var Wu=Y$1(String.fromCharCode.apply(String,Ku),Ou.length-Vu,Nu),qu=[];for(Hu=0;Hu<Qu.length;Hu+=1)qu[Hu]=Qu.charCodeAt(Hu)^Wu.charCodeAt(Hu);if((qu=String.fromCharCode.apply(String,qu)).substr(0,Vu)!==Nu(""))throw"Hash mismatch";var Yu=(qu=qu.substr(Vu)).indexOf("");if((Yu!=-1?qu.substr(0,Yu).lastIndexOf("\0"):-1)+1!=Yu)throw"Malformed data";return qu.substr(Yu+1)}(Lu,this.n.bitLength()+7>>3,$u,Bu)},l$3.lang!==void 0&&l$3.lang||(l$3.lang={}),l$3.lang.String=function(){},l$3.lang.String.isInteger=function(_u){return!!_u.match(/^[0-9]+$/)||!!_u.match(/^-[0-9]+$/)},l$3.lang.String.isHex=function(_u){return ce$1(_u)},l$3.lang.String.isBase64=function(_u){return!(!(_u=_u.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||_u.length%4!=0)},l$3.lang.String.isBase64URL=function(_u){return!_u.match(/[+/=]/)&&(_u=$$1(_u),l$3.lang.String.isBase64(_u))},l$3.lang.String.isIntegerArray=function(_u){return!!(_u=_u.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},l$3.lang.String.isPrintable=function(_u){return _u.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},l$3.lang.String.isIA5=function(_u){return _u.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},l$3.lang.String.isMail=function(_u){return _u.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pe$1=function(_u,$u,Bu){return Bu==null&&(Bu="0"),_u.length>=$u?_u:new Array($u-_u.length+1).join(Bu)+_u};function fe$1(_u,$u){var Bu=function(){};Bu.prototype=$u.prototype,_u.prototype=new Bu,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u)}l$3.crypto!==void 0&&l$3.crypto||(l$3.crypto={}),l$3.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$2.algo.MD5,sha1:h$2.algo.SHA1,sha224:h$2.algo.SHA224,sha256:h$2.algo.SHA256,sha384:h$2.algo.SHA384,sha512:h$2.algo.SHA512,ripemd160:h$2.algo.RIPEMD160},this.getDigestInfoHex=function(_u,$u){if(this.DIGESTINFOHEAD[$u]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+$u;return this.DIGESTINFOHEAD[$u]+_u},this.getPaddedDigestInfoHex=function(_u,$u,Bu){var Ru=this.getDigestInfoHex(_u,$u),Lu=Bu/4;if(Ru.length+22>Lu)throw"key is too short for SigAlg: keylen="+Bu+","+$u;for(var Ou="0001",Fu="00"+Ru,Nu="",Vu=Lu-Ou.length-Fu.length,Uu=0;Uu<Vu;Uu+=2)Nu+="ff";return Ou+Nu+Fu},this.hashString=function(_u,$u){return new l$3.crypto.MessageDigest({alg:$u}).digestString(_u)},this.hashHex=function(_u,$u){return new l$3.crypto.MessageDigest({alg:$u}).digestHex(_u)},this.sha1=function(_u){return this.hashString(_u,"sha1")},this.sha256=function(_u){return this.hashString(_u,"sha256")},this.sha256Hex=function(_u){return this.hashHex(_u,"sha256")},this.sha512=function(_u){return this.hashString(_u,"sha512")},this.sha512Hex=function(_u){return this.hashHex(_u,"sha512")},this.isKey=function(_u){return _u instanceof X$1||_u instanceof l$3.crypto.DSA||_u instanceof l$3.crypto.ECDSA}},l$3.crypto.Util.md5=function(_u){return new l$3.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(_u)},l$3.crypto.Util.ripemd160=function(_u){return new l$3.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(_u)},l$3.crypto.Util.SECURERANDOMGEN=new j$1,l$3.crypto.Util.getRandomHexOfNbytes=function(_u){var $u=new Array(_u);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes($u),Z$1($u)},l$3.crypto.Util.getRandomBigIntegerOfNbytes=function(_u){return new c$2(l$3.crypto.Util.getRandomHexOfNbytes(_u),16)},l$3.crypto.Util.getRandomHexOfNbits=function(_u){var $u=_u%8,Bu=new Array((_u-$u)/8+1);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes(Bu),Bu[0]=(255<<$u&255^255)&Bu[0],Z$1(Bu)},l$3.crypto.Util.getRandomBigIntegerOfNbits=function(_u){return new c$2(l$3.crypto.Util.getRandomHexOfNbits(_u),16)},l$3.crypto.Util.getRandomBigIntegerZeroToMax=function(_u){for(var $u=_u.bitLength();;){var Bu=l$3.crypto.Util.getRandomBigIntegerOfNbits($u);if(_u.compareTo(Bu)!=-1)return Bu}},l$3.crypto.Util.getRandomBigIntegerMinToMax=function(_u,$u){var Bu=_u.compareTo($u);if(Bu==1)throw"biMin is greater than biMax";if(Bu==0)return _u;var Ru=$u.subtract(_u);return l$3.crypto.Util.getRandomBigIntegerZeroToMax(Ru).add(_u)},l$3.crypto.MessageDigest=function(_u){this.setAlgAndProvider=function($u,Bu){if(($u=l$3.crypto.MessageDigest.getCanonicalAlgName($u))!==null&&Bu===void 0&&(Bu=l$3.crypto.Util.DEFAULTPROVIDER[$u]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf($u)!=-1&&Bu=="cryptojs"){try{this.md=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[$u].create()}catch(Ru){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Ru}this.updateString=function(Ru){this.md.update(Ru)},this.updateHex=function(Ru){var Lu=h$2.enc.Hex.parse(Ru);this.md.update(Lu)},this.digest=function(){return this.md.finalize().toString(h$2.enc.Hex)},this.digestString=function(Ru){return this.updateString(Ru),this.digest()},this.digestHex=function(Ru){return this.updateHex(Ru),this.digest()}}if(":sha256:".indexOf($u)!=-1&&Bu=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Ru){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Ru}this.updateString=function(Ru){this.md.update(Ru)},this.updateHex=function(Ru){var Lu=sjcl.codec.hex.toBits(Ru);this.md.update(Lu)},this.digest=function(){var Ru=this.md.finalize();return sjcl.codec.hex.fromBits(Ru)},this.digestString=function(Ru){return this.updateString(Ru),this.digest()},this.digestHex=function(Ru){return this.updateHex(Ru),this.digest()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},_u!==void 0&&_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},l$3.crypto.MessageDigest.getCanonicalAlgName=function(_u){return typeof _u=="string"&&(_u=(_u=_u.toLowerCase()).replace(/-/,"")),_u},l$3.crypto.MessageDigest.getHashLength=function(_u){var $u=l$3.crypto.MessageDigest,Bu=$u.getCanonicalAlgName(_u);if($u.HASHLENGTH[Bu]===void 0)throw"not supported algorithm: "+_u;return $u.HASHLENGTH[Bu]},l$3.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},l$3.crypto.Mac=function(_u){this.setAlgAndProvider=function($u,Bu){if(($u=$u.toLowerCase())==null&&($u="hmacsha1"),($u=$u.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+$u;Bu===void 0&&(Bu=l$3.crypto.Util.DEFAULTPROVIDER[$u]),this.algProv=$u+"/"+Bu;var Ru=$u.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Ru)!=-1&&Bu=="cryptojs"){try{var Lu=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Ru];this.mac=h$2.algo.HMAC.create(Lu,this.pass)}catch(Ou){throw"setAlgAndProvider hash alg set fail hashAlg="+Ru+"/"+Ou}this.updateString=function(Ou){this.mac.update(Ou)},this.updateHex=function(Ou){var Fu=h$2.enc.Hex.parse(Ou);this.mac.update(Fu)},this.doFinal=function(){return this.mac.finalize().toString(h$2.enc.Hex)},this.doFinalString=function(Ou){return this.updateString(Ou),this.doFinal()},this.doFinalHex=function(Ou){return this.updateHex(Ou),this.doFinal()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function($u){if(typeof $u=="string"){var Bu=$u;return $u.length%2!=1&&$u.match(/^[0-9A-Fa-f]+$/)||(Bu=oe$1($u)),void(this.pass=h$2.enc.Hex.parse(Bu))}if(typeof $u!="object")throw"KJUR.crypto.Mac unsupported password type: "+$u;if(Bu=null,$u.hex!==void 0){if($u.hex.length%2!=0||!$u.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+$u.hex;Bu=$u.hex}if($u.utf8!==void 0&&(Bu=ie$1($u.utf8)),$u.rstr!==void 0&&(Bu=oe$1($u.rstr)),$u.b64!==void 0&&(Bu=O$2($u.b64)),$u.b64u!==void 0&&(Bu=te($u.b64u)),Bu==null)throw"KJUR.crypto.Mac unsupported password type: "+$u;this.pass=h$2.enc.Hex.parse(Bu)},_u!==void 0&&(_u.pass!==void 0&&this.setPassword(_u.pass),_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},l$3.crypto.Signature=function(_u){var $u=null;if(this._setAlgNames=function(){var Bu=this.algName.match(/^(.+)with(.+)$/);Bu&&(this.mdAlgName=Bu[1].toLowerCase(),this.pubkeyAlgName=Bu[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Bu,Ru){for(var Lu="",Ou=Ru/4-Bu.length,Fu=0;Fu<Ou;Fu++)Lu+="0";return Lu+Bu},this.setAlgAndProvider=function(Bu,Ru){if(this._setAlgNames(),Ru!="cryptojs/jsrsa")throw new Error("provider not supported: "+Ru);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new l$3.crypto.MessageDigest({alg:this.mdAlgName})}catch(Lu){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Lu)}this.init=function(Lu,Ou){var Fu=null;try{Fu=Ou===void 0?Ee.getKey(Lu):Ee.getKey(Lu,Ou)}catch(Nu){throw"init failed:"+Nu}if(Fu.isPrivate===!0)this.prvKey=Fu,this.state="SIGN";else{if(Fu.isPublic!==!0)throw"init failed.:"+Fu;this.pubKey=Fu,this.state="VERIFY"}},this.updateString=function(Lu){this.md.updateString(Lu)},this.updateHex=function(Lu){this.md.updateHex(Lu)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.prvKey=new l$3.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof l$3.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof l$3.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Lu){return this.updateString(Lu),this.sign()},this.signHex=function(Lu){return this.updateHex(Lu),this.sign()},this.verify=function(Lu){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.pubKey=new l$3.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Lu,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Lu);if(l$3.crypto.ECDSA!==void 0&&this.pubKey instanceof l$3.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Lu);if(l$3.crypto.DSA!==void 0&&this.pubKey instanceof l$3.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Lu);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Bu,Ru){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Bu){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Bu){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Bu){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Bu){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Bu){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=_u,_u!==void 0&&(_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0?this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=_u.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),_u.psssaltlen!==void 0&&(this.pssSaltLen=_u.psssaltlen),_u.prvkeypem!==void 0)){if(_u.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{$u=Ee.getKey(_u.prvkeypem),this.init($u)}catch(Bu){throw"fatal error to load pem private key: "+Bu}}},l$3.crypto.Cipher=function(_u){},l$3.crypto.Cipher.encrypt=function(_u,$u,Bu){if($u instanceof X$1&&$u.isPublic){var Ru=l$3.crypto.Cipher.getAlgByKeyAndName($u,Bu);if(Ru==="RSA")return $u.encrypt(_u);if(Ru==="RSAOAEP")return $u.encryptOAEP(_u,"sha1");var Lu=Ru.match(/^RSAOAEP(\d+)$/);if(Lu!==null)return $u.encryptOAEP(_u,"sha"+Lu[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+Bu}throw"Cipher.encrypt: unsupported key or algorithm"},l$3.crypto.Cipher.decrypt=function(_u,$u,Bu){if($u instanceof X$1&&$u.isPrivate){var Ru=l$3.crypto.Cipher.getAlgByKeyAndName($u,Bu);if(Ru==="RSA")return $u.decrypt(_u);if(Ru==="RSAOAEP")return $u.decryptOAEP(_u,"sha1");var Lu=Ru.match(/^RSAOAEP(\d+)$/);if(Lu!==null)return $u.decryptOAEP(_u,"sha"+Lu[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+Bu}throw"Cipher.decrypt: unsupported key or algorithm"},l$3.crypto.Cipher.getAlgByKeyAndName=function(_u,$u){if(_u instanceof X$1){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf($u)!=-1)return $u;if($u==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+$u}throw"getAlgByKeyAndName: not supported algorithm name: "+$u},l$3.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Ae,ge$1,me$1,ve$1,ye,be$1,xe,we,Ee=(Ae=function(_u,$u,Bu){return ge$1(h$2.AES,_u,$u,Bu)},ge$1=function(_u,$u,Bu,Ru){var Lu=h$2.enc.Hex.parse($u),Ou=h$2.enc.Hex.parse(Bu),Fu=h$2.enc.Hex.parse(Ru),Nu={};Nu.key=Ou,Nu.iv=Fu,Nu.ciphertext=Lu;var Vu=_u.decrypt(Nu,Ou,{iv:Fu});return h$2.enc.Hex.stringify(Vu)},me$1=function(_u,$u,Bu){return ve$1(h$2.AES,_u,$u,Bu)},ve$1=function(_u,$u,Bu,Ru){var Lu=h$2.enc.Hex.parse($u),Ou=h$2.enc.Hex.parse(Bu),Fu=h$2.enc.Hex.parse(Ru),Nu=_u.encrypt(Lu,Ou,{iv:Fu}),Vu=h$2.enc.Hex.parse(Nu.toString());return h$2.enc.Base64.stringify(Vu)},ye={"AES-256-CBC":{proc:Ae,eproc:me$1,keylen:32,ivlen:16},"AES-192-CBC":{proc:Ae,eproc:me$1,keylen:24,ivlen:16},"AES-128-CBC":{proc:Ae,eproc:me$1,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(_u,$u,Bu){return ge$1(h$2.TripleDES,_u,$u,Bu)},eproc:function(_u,$u,Bu){return ve$1(h$2.TripleDES,_u,$u,Bu)},keylen:24,ivlen:8},"DES-CBC":{proc:function(_u,$u,Bu){return ge$1(h$2.DES,_u,$u,Bu)},eproc:function(_u,$u,Bu){return ve$1(h$2.DES,_u,$u,Bu)},keylen:8,ivlen:8}},be$1=function(_u){var $u={},Bu=_u.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Bu&&($u.cipher=Bu[1],$u.ivsalt=Bu[2]);var Ru=_u.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ru&&($u.type=Ru[1]);var Lu=-1,Ou=0;_u.indexOf(`\r
\r
`)!=-1&&(Lu=_u.indexOf(`\r
\r
`),Ou=2),_u.indexOf(`

`)!=-1&&(Lu=_u.indexOf(`

`),Ou=1);var Fu=_u.indexOf("-----END");if(Lu!=-1&&Fu!=-1){var Nu=_u.substring(Lu+2*Ou,Fu-Ou);Nu=Nu.replace(/\s+/g,""),$u.data=Nu}return $u},xe=function(_u,$u,Bu){for(var Ru=Bu.substring(0,16),Lu=h$2.enc.Hex.parse(Ru),Ou=h$2.enc.Utf8.parse($u),Fu=ye[_u].keylen+ye[_u].ivlen,Nu="",Vu=null;;){var Uu=h$2.algo.MD5.create();if(Vu!=null&&Uu.update(Vu),Uu.update(Ou),Uu.update(Lu),Vu=Uu.finalize(),(Nu+=h$2.enc.Hex.stringify(Vu)).length>=2*Fu)break}var Gu={};return Gu.keyhex=Nu.substr(0,2*ye[_u].keylen),Gu.ivhex=Nu.substr(2*ye[_u].keylen,2*ye[_u].ivlen),Gu},we=function(_u,$u,Bu,Ru){var Lu=h$2.enc.Base64.parse(_u),Ou=h$2.enc.Hex.stringify(Lu);return(0,ye[$u].proc)(Ou,Bu,Ru)},{version:"1.0.0",parsePKCS5PEM:function(_u){return be$1(_u)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(_u,$u,Bu){return xe(_u,$u,Bu)},decryptKeyB64:function(_u,$u,Bu,Ru){return we(_u,$u,Bu,Ru)},getDecryptedKeyHex:function(_u,$u){var Bu=be$1(_u),Ru=Bu.cipher,Lu=Bu.ivsalt,Ou=Bu.data,Fu=xe(Ru,$u,Lu).keyhex;return we(Ou,Ru,Fu,Lu)},getEncryptedPKCS5PEMFromPrvKeyHex:function(_u,$u,Bu,Ru,Lu){var Ou="";if(Ru!==void 0&&Ru!=null||(Ru="AES-256-CBC"),ye[Ru]===void 0)throw"KEYUTIL unsupported algorithm: "+Ru;Lu!==void 0&&Lu!=null||(Lu=function(Nu){var Vu=h$2.lib.WordArray.random(Nu);return h$2.enc.Hex.stringify(Vu)}(ye[Ru].ivlen).toUpperCase());var Fu=function(Nu,Vu,Uu,Gu){return(0,ye[Vu].eproc)(Nu,Uu,Gu)}($u,Ru,xe(Ru,Bu,Lu).keyhex,Lu);return Ou="-----BEGIN "+_u+` PRIVATE KEY-----\r
`,Ou+=`Proc-Type: 4,ENCRYPTED\r
`,Ou+="DEK-Info: "+Ru+","+Lu+`\r
`,Ou+=`\r
`,Ou+=Fu.replace(/(.{64})/g,`$1\r
`),Ou+=`\r
-----END `+_u+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(_u){var $u=Me,Bu=$u.getChildIdx,Ru=$u.getV,Lu={},Ou=Bu(_u,0);if(Ou.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Ou.length;Lu.ciphertext=Ru(_u,Ou[1]);var Fu=Bu(_u,Ou[0]);if(Fu.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Fu.length;if(Ru(_u,Fu[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Nu=Bu(_u,Fu[1]);if(Fu.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Nu.length;var Vu=Bu(_u,Nu[1]);if(Vu.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Vu.length;if(Ru(_u,Vu[0])!="2a864886f70d0307")throw"this only supports TripleDES";Lu.encryptionSchemeAlg="TripleDES",Lu.encryptionSchemeIV=Ru(_u,Vu[1]);var Uu=Bu(_u,Nu[0]);if(Uu.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Uu.length;if(Ru(_u,Uu[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Gu=Bu(_u,Uu[1]);if(Gu.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Gu.length;Lu.pbkdf2Salt=Ru(_u,Gu[0]);var zu=Ru(_u,Gu[1]);try{Lu.pbkdf2Iter=parseInt(zu,16)}catch{throw"malformed format pbkdf2Iter: "+zu}return Lu},getPBKDF2KeyHexFromParam:function(_u,$u){var Bu=h$2.enc.Hex.parse(_u.pbkdf2Salt),Ru=_u.pbkdf2Iter,Lu=h$2.PBKDF2($u,Bu,{keySize:6,iterations:Ru});return h$2.enc.Hex.stringify(Lu)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(_u,$u){var Bu=le(_u,"ENCRYPTED PRIVATE KEY"),Ru=this.parseHexOfEncryptedPKCS8(Bu),Lu=Ee.getPBKDF2KeyHexFromParam(Ru,$u),Ou={};Ou.ciphertext=h$2.enc.Hex.parse(Ru.ciphertext);var Fu=h$2.enc.Hex.parse(Lu),Nu=h$2.enc.Hex.parse(Ru.encryptionSchemeIV),Vu=h$2.TripleDES.decrypt(Ou,Fu,{iv:Nu});return h$2.enc.Hex.stringify(Vu)},getKeyFromEncryptedPKCS8PEM:function(_u,$u){var Bu=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(_u,$u);return this.getKeyFromPlainPrivatePKCS8Hex(Bu)},parsePlainPrivatePKCS8Hex:function(_u){var $u=Me,Bu=$u.getChildIdx,Ru=$u.getV,Lu={algparam:null};if(_u.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ou=Bu(_u,0);if(Ou.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(_u.substr(Ou[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Fu=Bu(_u,Ou[1]);if(Fu.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(_u.substr(Fu[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Lu.algoid=Ru(_u,Fu[0]),_u.substr(Fu[1],2)=="06"&&(Lu.algparam=Ru(_u,Fu[1])),_u.substr(Ou[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Lu.keyidx=$u.getVidx(_u,Ou[2]),Lu},getKeyFromPlainPrivatePKCS8PEM:function(_u){var $u=le(_u,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex($u)},getKeyFromPlainPrivatePKCS8Hex:function(_u){var $u,Bu=this.parsePlainPrivatePKCS8Hex(_u);if(Bu.algoid=="2a864886f70d010101")$u=new X$1;else if(Bu.algoid=="2a8648ce380401")$u=new l$3.crypto.DSA;else{if(Bu.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";$u=new l$3.crypto.ECDSA}return $u.readPKCS8PrvKeyHex(_u),$u},_getKeyFromPublicPKCS8Hex:function(_u){var $u,Bu=Me.getVbyList(_u,0,[0,0],"06");if(Bu==="2a864886f70d010101")$u=new X$1;else if(Bu==="2a8648ce380401")$u=new l$3.crypto.DSA;else{if(Bu!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";$u=new l$3.crypto.ECDSA}return $u.readPKCS8PubKeyHex(_u),$u},parsePublicRawRSAKeyHex:function(_u){var $u=Me,Bu=$u.getChildIdx,Ru=$u.getV,Lu={};if(_u.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Ou=Bu(_u,0);if(Ou.length!=2)throw"malformed RSA key(code:002)";if(_u.substr(Ou[0],2)!="02")throw"malformed RSA key(code:003)";if(Lu.n=Ru(_u,Ou[0]),_u.substr(Ou[1],2)!="02")throw"malformed RSA key(code:004)";return Lu.e=Ru(_u,Ou[1]),Lu},parsePublicPKCS8Hex:function(_u){var $u=Me,Bu=$u.getChildIdx,Ru=$u.getV,Lu={algparam:null},Ou=Bu(_u,0);if(Ou.length!=2)throw"outer DERSequence shall have 2 elements: "+Ou.length;var Fu=Ou[0];if(_u.substr(Fu,2)!="30")throw"malformed PKCS8 public key(code:001)";var Nu=Bu(_u,Fu);if(Nu.length!=2)throw"malformed PKCS8 public key(code:002)";if(_u.substr(Nu[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Lu.algoid=Ru(_u,Nu[0]),_u.substr(Nu[1],2)=="06"?Lu.algparam=Ru(_u,Nu[1]):_u.substr(Nu[1],2)=="30"&&(Lu.algparam={},Lu.algparam.p=$u.getVbyList(_u,Nu[1],[0],"02"),Lu.algparam.q=$u.getVbyList(_u,Nu[1],[1],"02"),Lu.algparam.g=$u.getVbyList(_u,Nu[1],[2],"02")),_u.substr(Ou[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Lu.key=Ru(_u,Ou[1]).substr(2),Lu}});Ee.getKey=function(_u,$u,Bu){var Ru=(Ku=Me).getChildIdx;Ku.getV;var Lu=Ku.getVbyList,Ou=l$3.crypto,Fu=Ou.ECDSA,Nu=Ou.DSA,Vu=X$1,Uu=le,Gu=Ee;if(Vu!==void 0&&_u instanceof Vu||Fu!==void 0&&_u instanceof Fu||Nu!==void 0&&_u instanceof Nu)return _u;if(_u.curve!==void 0&&_u.xy!==void 0&&_u.d===void 0)return new Fu({pub:_u.xy,curve:_u.curve});if(_u.curve!==void 0&&_u.d!==void 0)return new Fu({prv:_u.d,curve:_u.curve});if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(_f=new Vu).setPublic(_u.n,_u.e),_f;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.co!==void 0&&_u.qi===void 0)return(_f=new Vu).setPrivateEx(_u.n,_u.e,_u.d,_u.p,_u.q,_u.dp,_u.dq,_u.co),_f;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p===void 0)return(_f=new Vu).setPrivate(_u.n,_u.e,_u.d),_f;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x===void 0)return(_f=new Nu).setPublic(_u.p,_u.q,_u.g,_u.y),_f;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x!==void 0)return(_f=new Nu).setPrivate(_u.p,_u.q,_u.g,_u.y,_u.x),_f;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(_f=new Vu).setPublic(te(_u.n),te(_u.e)),_f;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.qi!==void 0)return(_f=new Vu).setPrivateEx(te(_u.n),te(_u.e),te(_u.d),te(_u.p),te(_u.q),te(_u.dp),te(_u.dq),te(_u.qi)),_f;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0)return(_f=new Vu).setPrivate(te(_u.n),te(_u.e),te(_u.d)),_f;if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d===void 0){var zu=(Ju=new Fu({curve:_u.crv})).ecparams.keylen/4,Hu="04"+("0000000000"+te(_u.x)).slice(-zu)+("0000000000"+te(_u.y)).slice(-zu);return Ju.setPublicKeyHex(Hu),Ju}if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d!==void 0){zu=(Ju=new Fu({curve:_u.crv})).ecparams.keylen/4,Hu="04"+("0000000000"+te(_u.x)).slice(-zu)+("0000000000"+te(_u.y)).slice(-zu);var ju=("0000000000"+te(_u.d)).slice(-zu);return Ju.setPublicKeyHex(Hu),Ju.setPrivateKeyHex(ju),Ju}if(Bu==="pkcs5prv"){var Qu,Xu=_u,Ku=Me;if((Qu=Ru(Xu,0)).length===9)(_f=new Vu).readPKCS5PrvKeyHex(Xu);else if(Qu.length===6)(_f=new Nu).readPKCS5PrvKeyHex(Xu);else{if(!(Qu.length>2&&Xu.substr(Qu[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(_f=new Fu).readPKCS5PrvKeyHex(Xu)}return _f}if(Bu==="pkcs8prv")return _f=Gu.getKeyFromPlainPrivatePKCS8Hex(_u);if(Bu==="pkcs8pub")return Gu._getKeyFromPublicPKCS8Hex(_u);if(Bu==="x509pub")return Be$1.getPublicKeyFromCertHex(_u);if(_u.indexOf("-END CERTIFICATE-",0)!=-1||_u.indexOf("-END X509 CERTIFICATE-",0)!=-1||_u.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Be$1.getPublicKeyFromCertPEM(_u);if(_u.indexOf("-END PUBLIC KEY-")!=-1){var Wu=le(_u,"PUBLIC KEY");return Gu._getKeyFromPublicPKCS8Hex(Wu)}if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var qu=Uu(_u,"RSA PRIVATE KEY");return Gu.getKey(qu,null,"pkcs5prv")}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var Yu=Lu(rp=Uu(_u,"DSA PRIVATE KEY"),0,[1],"02"),Zu=Lu(rp,0,[2],"02"),_h=Lu(rp,0,[3],"02"),ep=Lu(rp,0,[4],"02"),ip=Lu(rp,0,[5],"02");return(_f=new Nu).setPrivate(new c$2(Yu,16),new c$2(Zu,16),new c$2(_h,16),new c$2(ep,16),new c$2(ip,16)),_f}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1)return qu=Uu(_u,"EC PRIVATE KEY"),Gu.getKey(qu,null,"pkcs5prv");if(_u.indexOf("-END PRIVATE KEY-")!=-1)return Gu.getKeyFromPlainPrivatePKCS8PEM(_u);if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var ap=Gu.getDecryptedKeyHex(_u,$u),sp=new X$1;return sp.readPKCS5PrvKeyHex(ap),sp}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var Ju,_f=Lu(rp=Gu.getDecryptedKeyHex(_u,$u),0,[1],"04"),np=Lu(rp,0,[2,0],"06"),tp=Lu(rp,0,[3,0],"03").substr(2);if(l$3.crypto.OID.oidhex2name[np]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+np;return(Ju=new Fu({curve:l$3.crypto.OID.oidhex2name[np]})).setPublicKeyHex(tp),Ju.setPrivateKeyHex(_f),Ju.isPublic=!1,Ju}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var rp;return Yu=Lu(rp=Gu.getDecryptedKeyHex(_u,$u),0,[1],"02"),Zu=Lu(rp,0,[2],"02"),_h=Lu(rp,0,[3],"02"),ep=Lu(rp,0,[4],"02"),ip=Lu(rp,0,[5],"02"),(_f=new Nu).setPrivate(new c$2(Yu,16),new c$2(Zu,16),new c$2(_h,16),new c$2(ep,16),new c$2(ip,16)),_f}if(_u.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Gu.getKeyFromEncryptedPKCS8PEM(_u,$u);throw new Error("not supported argument")},Ee.generateKeypair=function(_u,$u){if(_u=="RSA"){var Bu=$u;(Fu=new X$1).generate(Bu,"10001"),Fu.isPrivate=!0,Fu.isPublic=!0;var Ru=new X$1,Lu=Fu.n.toString(16),Ou=Fu.e.toString(16);return Ru.setPublic(Lu,Ou),Ru.isPrivate=!1,Ru.isPublic=!0,(Nu={}).prvKeyObj=Fu,Nu.pubKeyObj=Ru,Nu}if(_u=="EC"){var Fu,Nu,Vu=$u,Uu=new l$3.crypto.ECDSA({curve:Vu}).generateKeyPairHex();return(Fu=new l$3.crypto.ECDSA({curve:Vu})).setPublicKeyHex(Uu.ecpubhex),Fu.setPrivateKeyHex(Uu.ecprvhex),Fu.isPrivate=!0,Fu.isPublic=!1,(Ru=new l$3.crypto.ECDSA({curve:Vu})).setPublicKeyHex(Uu.ecpubhex),Ru.isPrivate=!1,Ru.isPublic=!0,(Nu={}).prvKeyObj=Fu,Nu.pubKeyObj=Ru,Nu}throw"unknown algorithm: "+_u},Ee.getPEM=function(_u,$u,Bu,Ru,Lu,Ou){var Fu=l$3,Nu=Fu.asn1,Vu=Nu.DERObjectIdentifier,Uu=Nu.DERInteger,Gu=Nu.ASN1Util.newObject,zu=Nu.x509.SubjectPublicKeyInfo,Hu=Fu.crypto,ju=Hu.DSA,Qu=Hu.ECDSA,Xu=X$1;function Ku(Ju){return Gu({seq:[{int:0},{int:{bigint:Ju.n}},{int:Ju.e},{int:{bigint:Ju.d}},{int:{bigint:Ju.p}},{int:{bigint:Ju.q}},{int:{bigint:Ju.dmp1}},{int:{bigint:Ju.dmq1}},{int:{bigint:Ju.coeff}}]})}function Wu(Ju){return Gu({seq:[{int:1},{octstr:{hex:Ju.prvKeyHex}},{tag:["a0",!0,{oid:{name:Ju.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Ju.pubKeyHex}}]}]})}function qu(Ju){return Gu({seq:[{int:0},{int:{bigint:Ju.p}},{int:{bigint:Ju.q}},{int:{bigint:Ju.g}},{int:{bigint:Ju.y}},{int:{bigint:Ju.x}}]})}if((Xu!==void 0&&_u instanceof Xu||ju!==void 0&&_u instanceof ju||Qu!==void 0&&_u instanceof Qu)&&_u.isPublic==1&&($u===void 0||$u=="PKCS8PUB"))return ae$1(ep=new zu(_u).getEncodedHex(),"PUBLIC KEY");if($u=="PKCS1PRV"&&Xu!==void 0&&_u instanceof Xu&&(Bu===void 0||Bu==null)&&_u.isPrivate==1)return ae$1(ep=Ku(_u).getEncodedHex(),"RSA PRIVATE KEY");if($u=="PKCS1PRV"&&Qu!==void 0&&_u instanceof Qu&&(Bu===void 0||Bu==null)&&_u.isPrivate==1){var Yu=new Vu({name:_u.curveName}).getEncodedHex(),Zu=Wu(_u).getEncodedHex(),_h="";return _h+=ae$1(Yu,"EC PARAMETERS"),_h+=ae$1(Zu,"EC PRIVATE KEY")}if($u=="PKCS1PRV"&&ju!==void 0&&_u instanceof ju&&(Bu===void 0||Bu==null)&&_u.isPrivate==1)return ae$1(ep=qu(_u).getEncodedHex(),"DSA PRIVATE KEY");if($u=="PKCS5PRV"&&Xu!==void 0&&_u instanceof Xu&&Bu!==void 0&&Bu!=null&&_u.isPrivate==1){var ep=Ku(_u).getEncodedHex();return Ru===void 0&&(Ru="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",ep,Bu,Ru,Ou)}if($u=="PKCS5PRV"&&Qu!==void 0&&_u instanceof Qu&&Bu!==void 0&&Bu!=null&&_u.isPrivate==1)return ep=Wu(_u).getEncodedHex(),Ru===void 0&&(Ru="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",ep,Bu,Ru,Ou);if($u=="PKCS5PRV"&&ju!==void 0&&_u instanceof ju&&Bu!==void 0&&Bu!=null&&_u.isPrivate==1)return ep=qu(_u).getEncodedHex(),Ru===void 0&&(Ru="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",ep,Bu,Ru,Ou);var ip=function(Ju,_f){var np=ap(Ju,_f);return new Gu({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:np.pbkdf2Salt}},{int:np.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:np.encryptionSchemeIV}}]}]}]},{octstr:{hex:np.ciphertext}}]}).getEncodedHex()},ap=function(Ju,_f){var np=h$2.lib.WordArray.random(8),tp=h$2.lib.WordArray.random(8),rp=h$2.PBKDF2(_f,np,{keySize:6,iterations:100}),op=h$2.enc.Hex.parse(Ju),lp=h$2.TripleDES.encrypt(op,rp,{iv:tp})+"",up={};return up.ciphertext=lp,up.pbkdf2Salt=h$2.enc.Hex.stringify(np),up.pbkdf2Iter=100,up.encryptionSchemeAlg="DES-EDE3-CBC",up.encryptionSchemeIV=h$2.enc.Hex.stringify(tp),up};if($u=="PKCS8PRV"&&Xu!=null&&_u instanceof Xu&&_u.isPrivate==1){var sp=Ku(_u).getEncodedHex();return ep=Gu({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:sp}}]}).getEncodedHex(),Bu===void 0||Bu==null?ae$1(ep,"PRIVATE KEY"):ae$1(Zu=ip(ep,Bu),"ENCRYPTED PRIVATE KEY")}if($u=="PKCS8PRV"&&Qu!==void 0&&_u instanceof Qu&&_u.isPrivate==1)return sp=new Gu({seq:[{int:1},{octstr:{hex:_u.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+_u.pubKeyHex}}]}]}).getEncodedHex(),ep=Gu({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:_u.curveName}}]},{octstr:{hex:sp}}]}).getEncodedHex(),Bu===void 0||Bu==null?ae$1(ep,"PRIVATE KEY"):ae$1(Zu=ip(ep,Bu),"ENCRYPTED PRIVATE KEY");if($u=="PKCS8PRV"&&ju!==void 0&&_u instanceof ju&&_u.isPrivate==1)return sp=new Uu({bigint:_u.x}).getEncodedHex(),ep=Gu({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:_u.p}},{int:{bigint:_u.q}},{int:{bigint:_u.g}}]}]},{octstr:{hex:sp}}]}).getEncodedHex(),Bu===void 0||Bu==null?ae$1(ep,"PRIVATE KEY"):ae$1(Zu=ip(ep,Bu),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ee.getKeyFromCSRPEM=function(_u){var $u=le(_u,"CERTIFICATE REQUEST");return Ee.getKeyFromCSRHex($u)},Ee.getKeyFromCSRHex=function(_u){var $u=Ee.parseCSRHex(_u);return Ee.getKey($u.p8pubkeyhex,null,"pkcs8pub")},Ee.parseCSRHex=function(_u){var $u=Me,Bu=$u.getChildIdx,Ru=$u.getTLV,Lu={},Ou=_u;if(Ou.substr(0,2)!="30")throw"malformed CSR(code:001)";var Fu=Bu(Ou,0);if(Fu.length<1)throw"malformed CSR(code:002)";if(Ou.substr(Fu[0],2)!="30")throw"malformed CSR(code:003)";var Nu=Bu(Ou,Fu[0]);if(Nu.length<3)throw"malformed CSR(code:004)";return Lu.p8pubkeyhex=Ru(Ou,Nu[2]),Lu},Ee.getKeyID=function(_u){var $u=Ee,Bu=Me;typeof _u=="string"&&_u.indexOf("BEGIN ")!=-1&&(_u=$u.getKey(_u));var Ru=le($u.getPEM(_u)),Lu=Bu.getIdxbyList(Ru,0,[1]),Ou=Bu.getV(Ru,Lu).substring(2);return l$3.crypto.Util.hashHex(Ou,"sha1")},Ee.getJWKFromKey=function(_u){var $u={};if(_u instanceof X$1&&_u.isPrivate)return $u.kty="RSA",$u.n=ee(_u.n.toString(16)),$u.e=ee(_u.e.toString(16)),$u.d=ee(_u.d.toString(16)),$u.p=ee(_u.p.toString(16)),$u.q=ee(_u.q.toString(16)),$u.dp=ee(_u.dmp1.toString(16)),$u.dq=ee(_u.dmq1.toString(16)),$u.qi=ee(_u.coeff.toString(16)),$u;if(_u instanceof X$1&&_u.isPublic)return $u.kty="RSA",$u.n=ee(_u.n.toString(16)),$u.e=ee(_u.e.toString(16)),$u;if(_u instanceof l$3.crypto.ECDSA&&_u.isPrivate){if((Ru=_u.getShortNISTPCurveName())!=="P-256"&&Ru!=="P-384")throw"unsupported curve name for JWT: "+Ru;var Bu=_u.getPublicKeyXYHex();return $u.kty="EC",$u.crv=Ru,$u.x=ee(Bu.x),$u.y=ee(Bu.y),$u.d=ee(_u.prvKeyHex),$u}if(_u instanceof l$3.crypto.ECDSA&&_u.isPublic){var Ru;if((Ru=_u.getShortNISTPCurveName())!=="P-256"&&Ru!=="P-384")throw"unsupported curve name for JWT: "+Ru;return Bu=_u.getPublicKeyXYHex(),$u.kty="EC",$u.crv=Ru,$u.x=ee(Bu.x),$u.y=ee(Bu.y),$u}throw"not supported key object"},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.ASN1Util=new function(){this.integerToByteHex=function(_u){var $u=_u.toString(16);return $u.length%2==1&&($u="0"+$u),$u},this.bigIntToMinTwosComplementsHex=function(_u){var $u=_u.toString(16);if($u.substr(0,1)!="-")$u.length%2==1?$u="0"+$u:$u.match(/^[0-7]/)||($u="00"+$u);else{var Bu=$u.substr(1).length;Bu%2==1?Bu+=1:$u.match(/^[0-7]/)||(Bu+=2);for(var Ru="",Lu=0;Lu<Bu;Lu++)Ru+="f";$u=new c$2(Ru,16).xor(_u).add(c$2.ONE).toString(16).replace(/^-/,"")}return $u},this.getPEMStringFromHex=function(_u,$u){return ae$1(_u,$u)},this.newObject=function(_u){var $u=l$3.asn1,Bu=$u.ASN1Object,Ru=$u.DERBoolean,Lu=$u.DERInteger,Ou=$u.DERBitString,Fu=$u.DEROctetString,Nu=$u.DERNull,Vu=$u.DERObjectIdentifier,Uu=$u.DEREnumerated,Gu=$u.DERUTF8String,zu=$u.DERNumericString,Hu=$u.DERPrintableString,ju=$u.DERTeletexString,Qu=$u.DERIA5String,Xu=$u.DERUTCTime,Ku=$u.DERGeneralizedTime,Wu=$u.DERVisibleString,qu=$u.DERBMPString,Yu=$u.DERSequence,Zu=$u.DERSet,_h=$u.DERTaggedObject,ep=$u.ASN1Util.newObject;if(_u instanceof $u.ASN1Object)return _u;var ip=Object.keys(_u);if(ip.length!=1)throw new Error("key of param shall be only one.");var ap=ip[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+ap+":")==-1)throw new Error("undefined key: "+ap);if(ap=="bool")return new Ru(_u[ap]);if(ap=="int")return new Lu(_u[ap]);if(ap=="bitstr")return new Ou(_u[ap]);if(ap=="octstr")return new Fu(_u[ap]);if(ap=="null")return new Nu(_u[ap]);if(ap=="oid")return new Vu(_u[ap]);if(ap=="enum")return new Uu(_u[ap]);if(ap=="utf8str")return new Gu(_u[ap]);if(ap=="numstr")return new zu(_u[ap]);if(ap=="prnstr")return new Hu(_u[ap]);if(ap=="telstr")return new ju(_u[ap]);if(ap=="ia5str")return new Qu(_u[ap]);if(ap=="utctime")return new Xu(_u[ap]);if(ap=="gentime")return new Ku(_u[ap]);if(ap=="visstr")return new Wu(_u[ap]);if(ap=="bmpstr")return new qu(_u[ap]);if(ap=="asn1")return new Bu(_u[ap]);if(ap=="seq"){for(var sp=_u[ap],Ju=[],_f=0;_f<sp.length;_f++){var np=ep(sp[_f]);Ju.push(np)}return new Yu({array:Ju})}if(ap=="set"){for(sp=_u[ap],Ju=[],_f=0;_f<sp.length;_f++)np=ep(sp[_f]),Ju.push(np);return new Zu({array:Ju})}if(ap=="tag"){var tp=_u[ap];if(Object.prototype.toString.call(tp)==="[object Array]"&&tp.length==3){var rp=ep(tp[2]);return new _h({tag:tp[0],explicit:tp[1],obj:rp})}return new _h(tp)}},this.jsonToASN1HEX=function(_u){return this.newObject(_u).getEncodedHex()}},l$3.asn1.ASN1Util.oidHexToInt=function(_u){for(var $u="",Bu=parseInt(_u.substr(0,2),16),Ru=($u=Math.floor(Bu/40)+"."+Bu%40,""),Lu=2;Lu<_u.length;Lu+=2){var Ou=("00000000"+parseInt(_u.substr(Lu,2),16).toString(2)).slice(-8);Ru+=Ou.substr(1,7),Ou.substr(0,1)=="0"&&($u=$u+"."+new c$2(Ru,2).toString(10),Ru="")}return $u},l$3.asn1.ASN1Util.oidIntToHex=function(_u){var $u=function(Nu){var Vu=Nu.toString(16);return Vu.length==1&&(Vu="0"+Vu),Vu},Bu=function(Nu){var Vu="",Uu=new c$2(Nu,10).toString(2),Gu=7-Uu.length%7;Gu==7&&(Gu=0);for(var zu="",Hu=0;Hu<Gu;Hu++)zu+="0";for(Uu=zu+Uu,Hu=0;Hu<Uu.length-1;Hu+=7){var ju=Uu.substr(Hu,7);Hu!=Uu.length-7&&(ju="1"+ju),Vu+=$u(parseInt(ju,2))}return Vu};if(!_u.match(/^[0-9.]+$/))throw"malformed oid string: "+_u;var Ru="",Lu=_u.split("."),Ou=40*parseInt(Lu[0])+parseInt(Lu[1]);Ru+=$u(Ou),Lu.splice(0,2);for(var Fu=0;Fu<Lu.length;Fu++)Ru+=Bu(Lu[Fu]);return Ru},l$3.asn1.ASN1Object=function(_u){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var $u=this.hV.length/2,Bu=$u.toString(16);if(Bu.length%2==1&&(Bu="0"+Bu),$u<128)return Bu;var Ru=Bu.length/2;if(Ru>15)throw"ASN.1 length too long to represent by 8x: n = "+$u.toString(16);return(128+Ru).toString(16)+Bu},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function($u){this.params=$u},_u!=null&&_u.tlv!=null&&(this.hTLV=_u.tlv,this.isModified=!1)},l$3.asn1.DERAbstractString=function(_u){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=ie$1(this.s).toLowerCase()},this.setStringHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"?this.setString(_u):_u.str!==void 0?this.setString(_u.str):_u.hex!==void 0&&this.setStringHex(_u.hex))},u$2.lang.extend(l$3.asn1.DERAbstractString,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractTime=function(_u){l$3.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function($u){var Bu=$u.getTime()+6e4*$u.getTimezoneOffset();return new Date(Bu)},this.formatDate=function($u,Bu,Ru){var Lu=this.zeroPadding,Ou=this.localDateToUTC($u),Fu=String(Ou.getFullYear());Bu=="utc"&&(Fu=Fu.substr(2,2));var Nu=Fu+Lu(String(Ou.getMonth()+1),2)+Lu(String(Ou.getDate()),2)+Lu(String(Ou.getHours()),2)+Lu(String(Ou.getMinutes()),2)+Lu(String(Ou.getSeconds()),2);if(Ru===!0){var Vu=Ou.getMilliseconds();if(Vu!=0){var Uu=Lu(String(Vu),3);Nu=Nu+"."+(Uu=Uu.replace(/[0]+$/,""))}}return Nu+"Z"},this.zeroPadding=function($u,Bu){return $u.length>=Bu?$u:new Array(Bu-$u.length+1).join("0")+$u},this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=J$1($u)},this.setByDateValue=function($u,Bu,Ru,Lu,Ou,Fu){var Nu=new Date(Date.UTC($u,Bu-1,Ru,Lu,Ou,Fu,0));this.setByDate(Nu)},this.getFreshValueHex=function(){return this.hV}},u$2.lang.extend(l$3.asn1.DERAbstractTime,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractStructured=function(_u){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array=$u},this.appendASN1Object=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array.push($u)},this.asn1Array=new Array,_u!==void 0&&_u.array!==void 0&&(this.asn1Array=_u.array)},u$2.lang.extend(l$3.asn1.DERAbstractStructured,l$3.asn1.ASN1Object),l$3.asn1.DERBoolean=function(_u){l$3.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=_u==0?"010100":"0101ff"},u$2.lang.extend(l$3.asn1.DERBoolean,l$3.asn1.ASN1Object),l$3.asn1.DERInteger=function(_u){l$3.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Bu=new c$2(String($u),10);this.setByBigInteger(Bu)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.bigint!==void 0?this.setByBigInteger(_u.bigint):_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$2.lang.extend(l$3.asn1.DERInteger,l$3.asn1.ASN1Object),l$3.asn1.DERBitString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$3.asn1.ASN1Util.newObject(_u.obj);_u.hex="00"+$u.getEncodedHex()}l$3.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(Bu){this.hTLV=null,this.isModified=!0,this.hV=Bu},this.setUnusedBitsAndHexValue=function(Bu,Ru){if(Bu<0||7<Bu)throw"unused bits shall be from 0 to 7: u = "+Bu;var Lu="0"+Bu;this.hTLV=null,this.isModified=!0,this.hV=Lu+Ru},this.setByBinaryString=function(Bu){var Ru=8-(Bu=Bu.replace(/0+$/,"")).length%8;Ru==8&&(Ru=0);for(var Lu=0;Lu<=Ru;Lu++)Bu+="0";var Ou="";for(Lu=0;Lu<Bu.length-1;Lu+=8){var Fu=Bu.substr(Lu,8),Nu=parseInt(Fu,2).toString(16);Nu.length==1&&(Nu="0"+Nu),Ou+=Nu}this.hTLV=null,this.isModified=!0,this.hV="0"+Ru+Ou},this.setByBooleanArray=function(Bu){for(var Ru="",Lu=0;Lu<Bu.length;Lu++)Bu[Lu]==1?Ru+="1":Ru+="0";this.setByBinaryString(Ru)},this.newFalseArray=function(Bu){for(var Ru=new Array(Bu),Lu=0;Lu<Bu;Lu++)Ru[Lu]=!1;return Ru},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"&&_u.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(_u):_u.hex!==void 0?this.setHexValueIncludingUnusedBits(_u.hex):_u.bin!==void 0?this.setByBinaryString(_u.bin):_u.array!==void 0&&this.setByBooleanArray(_u.array))},u$2.lang.extend(l$3.asn1.DERBitString,l$3.asn1.ASN1Object),l$3.asn1.DEROctetString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$3.asn1.ASN1Util.newObject(_u.obj);_u.hex=$u.getEncodedHex()}l$3.asn1.DEROctetString.superclass.constructor.call(this,_u),this.hT="04"},u$2.lang.extend(l$3.asn1.DEROctetString,l$3.asn1.DERAbstractString),l$3.asn1.DERNull=function(){l$3.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},u$2.lang.extend(l$3.asn1.DERNull,l$3.asn1.ASN1Object),l$3.asn1.DERObjectIdentifier=function(_u){l$3.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.setValueOidString=function($u){var Bu=function(Ru){var Lu=function(Gu){var zu=Gu.toString(16);return zu.length==1&&(zu="0"+zu),zu},Ou=function(Gu){var zu="",Hu=parseInt(Gu,10).toString(2),ju=7-Hu.length%7;ju==7&&(ju=0);for(var Qu="",Xu=0;Xu<ju;Xu++)Qu+="0";for(Hu=Qu+Hu,Xu=0;Xu<Hu.length-1;Xu+=7){var Ku=Hu.substr(Xu,7);Xu!=Hu.length-7&&(Ku="1"+Ku),zu+=Lu(parseInt(Ku,2))}return zu};try{if(!Ru.match(/^[0-9.]+$/))return null;var Fu="",Nu=Ru.split("."),Vu=40*parseInt(Nu[0],10)+parseInt(Nu[1],10);Fu+=Lu(Vu),Nu.splice(0,2);for(var Uu=0;Uu<Nu.length;Uu++)Fu+=Ou(Nu[Uu]);return Fu}catch{return null}}($u);if(Bu==null)throw new Error("malformed oid string: "+$u);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Bu},this.setValueName=function($u){var Bu=l$3.asn1.x509.OID.name2oid($u);if(Bu==="")throw new Error("DERObjectIdentifier oidName undefined: "+$u);this.setValueOidString(Bu)},this.setValueNameOrOid=function($u){$u.match(/^[0-2].[0-9.]+$/)?this.setValueOidString($u):this.setValueName($u)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function($u){typeof $u=="string"?this.setValueNameOrOid($u):$u.oid!==void 0?this.setValueNameOrOid($u.oid):$u.name!==void 0?this.setValueNameOrOid($u.name):$u.hex!==void 0&&this.setValueHex($u.hex)},_u!==void 0&&this.setByParam(_u)},u$2.lang.extend(l$3.asn1.DERObjectIdentifier,l$3.asn1.ASN1Object),l$3.asn1.DEREnumerated=function(_u){l$3.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Bu=new c$2(String($u),10);this.setByBigInteger(Bu)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$2.lang.extend(l$3.asn1.DEREnumerated,l$3.asn1.ASN1Object),l$3.asn1.DERUTF8String=function(_u){l$3.asn1.DERUTF8String.superclass.constructor.call(this,_u),this.hT="0c"},u$2.lang.extend(l$3.asn1.DERUTF8String,l$3.asn1.DERAbstractString),l$3.asn1.DERNumericString=function(_u){l$3.asn1.DERNumericString.superclass.constructor.call(this,_u),this.hT="12"},u$2.lang.extend(l$3.asn1.DERNumericString,l$3.asn1.DERAbstractString),l$3.asn1.DERPrintableString=function(_u){l$3.asn1.DERPrintableString.superclass.constructor.call(this,_u),this.hT="13"},u$2.lang.extend(l$3.asn1.DERPrintableString,l$3.asn1.DERAbstractString),l$3.asn1.DERTeletexString=function(_u){l$3.asn1.DERTeletexString.superclass.constructor.call(this,_u),this.hT="14"},u$2.lang.extend(l$3.asn1.DERTeletexString,l$3.asn1.DERAbstractString),l$3.asn1.DERIA5String=function(_u){l$3.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="16"},u$2.lang.extend(l$3.asn1.DERIA5String,l$3.asn1.DERAbstractString),l$3.asn1.DERVisibleString=function(_u){l$3.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="1a"},u$2.lang.extend(l$3.asn1.DERVisibleString,l$3.asn1.DERAbstractString),l$3.asn1.DERBMPString=function(_u){l$3.asn1.DERBMPString.superclass.constructor.call(this,_u),this.hT="1e"},u$2.lang.extend(l$3.asn1.DERBMPString,l$3.asn1.DERAbstractString),l$3.asn1.DERUTCTime=function(_u){l$3.asn1.DERUTCTime.superclass.constructor.call(this,_u),this.hT="17",this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{12}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date))},u$2.lang.extend(l$3.asn1.DERUTCTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERGeneralizedTime=function(_u){l$3.asn1.DERGeneralizedTime.superclass.constructor.call(this,_u),this.hT="18",this.withMillis=!1,this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{14}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date),_u.millis===!0&&(this.withMillis=!0))},u$2.lang.extend(l$3.asn1.DERGeneralizedTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERSequence=function(_u){l$3.asn1.DERSequence.superclass.constructor.call(this,_u),this.hT="30",this.getFreshValueHex=function(){for(var $u="",Bu=0;Bu<this.asn1Array.length;Bu++)$u+=this.asn1Array[Bu].getEncodedHex();return this.hV=$u,this.hV}},u$2.lang.extend(l$3.asn1.DERSequence,l$3.asn1.DERAbstractStructured),l$3.asn1.DERSet=function(_u){l$3.asn1.DERSet.superclass.constructor.call(this,_u),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var $u=new Array,Bu=0;Bu<this.asn1Array.length;Bu++){var Ru=this.asn1Array[Bu];$u.push(Ru.getEncodedHex())}return this.sortFlag==1&&$u.sort(),this.hV=$u.join(""),this.hV},_u!==void 0&&_u.sortflag!==void 0&&_u.sortflag==0&&(this.sortFlag=!1)},u$2.lang.extend(l$3.asn1.DERSet,l$3.asn1.DERAbstractStructured),l$3.asn1.DERTaggedObject=function(_u){l$3.asn1.DERTaggedObject.superclass.constructor.call(this);var $u=l$3.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Bu,Ru,Lu){this.hT=Ru,this.isExplicit=Bu,this.asn1Object=Lu,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Lu.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Ru),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Bu){Bu.tag!=null&&(this.hT=Bu.tag),Bu.explicit!=null&&(this.isExplicit=Bu.explicit),Bu.tage!=null&&(this.hT=Bu.tage,this.isExplicit=!0),Bu.tagi!=null&&(this.hT=Bu.tagi,this.isExplicit=!1),Bu.obj!=null&&(Bu.obj instanceof $u.ASN1Object?(this.asn1Object=Bu.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof Bu.obj=="object"&&(this.asn1Object=$u.ASN1Util.newObject(Bu.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},_u!=null&&this.setByParam(_u)},u$2.lang.extend(l$3.asn1.DERTaggedObject,l$3.asn1.ASN1Object);var Me=new function(){};function Ie(_u,$u){for(var Bu="",Ru=$u/4-_u.length,Lu=0;Lu<Ru;Lu++)Bu+="0";return Bu+_u}function Se(_u,$u,Bu){for(var Ru="",Lu=0;Ru.length<$u;)Ru+=re$1(Bu(oe$1(_u+String.fromCharCode.apply(String,[(4278190080&Lu)>>24,(16711680&Lu)>>16,(65280&Lu)>>8,255&Lu])))),Lu+=1;return Ru}function Ce$1(_u){for(var $u in l$3.crypto.Util.DIGESTINFOHEAD){var Bu=l$3.crypto.Util.DIGESTINFOHEAD[$u],Ru=Bu.length;if(_u.substring(0,Ru)==Bu)return[$u,_u.substring(Ru)]}return[]}function Be$1(_u){var $u,Bu=Me,Ru=Bu.getChildIdx,Lu=Bu.getV,Ou=Bu.getTLV,Fu=Bu.getVbyList,Nu=Bu.getVbyListEx,Vu=Bu.getTLVbyList,Uu=Bu.getTLVbyListEx,Gu=Bu.getIdxbyList,zu=Bu.getIdxbyListEx,Hu=Bu.getVidx,ju=Bu.getInt,Qu=Bu.oidname,Xu=Bu.hextooidstr,Ku=le;try{$u=l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Wu=Vu(this.hex,0,[0,0]);if(Wu.substr(0,2)=="a0"){var qu=Vu(Wu,0,[0]),Yu=ju(qu,0);if(Yu<0||2<Yu)throw new Error("malformed version field");return this.version=Yu+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Nu(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Wu=Uu(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Wu)},this.getAlgorithmIdentifierName=function(Wu){for(var qu in $u)if(Wu===$u[qu])return qu;return Qu(Nu(Wu,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Vu(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Vu(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Wu=Fu(this.hex,0,[0,4+this.foffset,0]);return Wu=Wu.replace(/(..)/g,"%$1"),Wu=decodeURIComponent(Wu)},this.getNotAfter=function(){var Wu=Fu(this.hex,0,[0,4+this.foffset,1]);return Wu=Wu.replace(/(..)/g,"%$1"),Wu=decodeURIComponent(Wu)},this.getPublicKeyHex=function(){return Bu.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Gu(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Wu=this.getPublicKeyIdx();return Gu(this.hex,Wu,[1,0],"30")},this.getPublicKey=function(){return Ee.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Wu=Vu(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Wu)},this.getSignatureValueHex=function(){return Fu(this.hex,0,[2],"03",!0)},this.verifySignature=function(Wu){var qu=this.getSignatureAlgorithmField(),Yu=this.getSignatureValueHex(),Zu=Vu(this.hex,0,[0],"30"),_h=new l$3.crypto.Signature({alg:qu});return _h.init(Wu),_h.updateHex(Zu),_h.verify(Yu)},this.parseExt=function(Wu){var qu,Yu,Zu;if(Wu===void 0){if(Zu=this.hex,this.version!==3)return-1;qu=Gu(Zu,0,[0,7,0],"30"),Yu=Ru(Zu,qu)}else{Zu=le(Wu);var _h=Gu(Zu,0,[0,3,0,0],"06");if(Lu(Zu,_h)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);qu=Gu(Zu,0,[0,3,0,1,0],"30"),Yu=Ru(Zu,qu),this.hex=Zu}this.aExtInfo=new Array;for(var ep=0;ep<Yu.length;ep++){var ip={critical:!1},ap=0;Ru(Zu,Yu[ep]).length===3&&(ip.critical=!0,ap=1),ip.oid=Bu.hextooidstr(Fu(Zu,Yu[ep],[0],"06"));var sp=Gu(Zu,Yu[ep],[1+ap]);ip.vidx=Hu(Zu,sp),this.aExtInfo.push(ip)}},this.getExtInfo=function(Wu){var qu=this.aExtInfo,Yu=Wu;if(Wu.match(/^[0-9.]+$/)||(Yu=l$3.asn1.x509.OID.name2oid(Wu)),Yu!==""){for(var Zu=0;Zu<qu.length;Zu++)if(qu[Zu].oid===Yu)return qu[Zu]}},this.getExtBasicConstraints=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("basicConstraints");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"basicConstraints"};if(qu&&(Zu.critical=!0),Wu==="3000")return Zu;if(Wu==="30030101ff")return Zu.cA=!0,Zu;if(Wu.substr(0,12)==="30060101ff02"){var _h=Lu(Wu,10),ep=parseInt(_h,16);return Zu.cA=!0,Zu.pathLen=ep,Zu}throw new Error("hExtV parse error: "+Wu)},this.getExtKeyUsage=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("keyUsage");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"keyUsage"};return qu&&(Zu.critical=!0),Zu.names=this.getExtKeyUsageString(Wu).split(","),Zu},this.getExtKeyUsageBin=function(Wu){if(Wu===void 0){var qu=this.getExtInfo("keyUsage");if(qu===void 0)return"";Wu=Ou(this.hex,qu.vidx)}if(Wu.length!=8&&Wu.length!=10)throw new Error("malformed key usage value: "+Wu);var Yu="000000000000000"+parseInt(Wu.substr(6),16).toString(2);return Wu.length==8&&(Yu=Yu.slice(-8)),Wu.length==10&&(Yu=Yu.slice(-16)),(Yu=Yu.replace(/0+$/,""))==""&&(Yu="0"),Yu},this.getExtKeyUsageString=function(Wu){for(var qu=this.getExtKeyUsageBin(Wu),Yu=new Array,Zu=0;Zu<qu.length;Zu++)qu.substr(Zu,1)=="1"&&Yu.push(Be$1.KEYUSAGE_NAME[Zu]);return Yu.join(",")},this.getExtSubjectKeyIdentifier=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("subjectKeyIdentifier");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"subjectKeyIdentifier"};qu&&(Zu.critical=!0);var _h=Lu(Wu,0);return Zu.kid={hex:_h},Zu},this.getExtAuthorityKeyIdentifier=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("authorityKeyIdentifier");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"authorityKeyIdentifier"};qu&&(Zu.critical=!0);for(var _h=Ru(Wu,0),ep=0;ep<_h.length;ep++){var ip=Wu.substr(_h[ep],2);if(ip==="80"&&(Zu.kid={hex:Lu(Wu,_h[ep])}),ip==="a1"){var ap=Ou(Wu,_h[ep]),sp=this.getGeneralNames(ap);Zu.issuer=sp[0].dn}ip==="82"&&(Zu.sn={hex:Lu(Wu,_h[ep])})}return Zu},this.getExtExtKeyUsage=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("extKeyUsage");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"extKeyUsage",array:[]};qu&&(Zu.critical=!0);for(var _h=Ru(Wu,0),ep=0;ep<_h.length;ep++)Zu.array.push(Qu(Lu(Wu,_h[ep])));return Zu},this.getExtExtKeyUsageName=function(){var Wu=this.getExtInfo("extKeyUsage");if(Wu===void 0)return Wu;var qu=new Array,Yu=Ou(this.hex,Wu.vidx);if(Yu==="")return qu;for(var Zu=Ru(Yu,0),_h=0;_h<Zu.length;_h++)qu.push(Qu(Lu(Yu,Zu[_h])));return qu},this.getExtSubjectAltName=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("subjectAltName");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"subjectAltName",array:[]};return qu&&(Zu.critical=!0),Zu.array=this.getGeneralNames(Wu),Zu},this.getExtIssuerAltName=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("issuerAltName");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"issuerAltName",array:[]};return qu&&(Zu.critical=!0),Zu.array=this.getGeneralNames(Wu),Zu},this.getGeneralNames=function(Wu){for(var qu=Ru(Wu,0),Yu=[],Zu=0;Zu<qu.length;Zu++){var _h=this.getGeneralName(Ou(Wu,qu[Zu]));_h!==void 0&&Yu.push(_h)}return Yu},this.getGeneralName=function(Wu){var qu=Wu.substr(0,2),Yu=Lu(Wu,0),Zu=re$1(Yu);return qu=="81"?{rfc822:Zu}:qu=="82"?{dns:Zu}:qu=="86"?{uri:Zu}:qu=="87"?{ip:ue$1(Yu)}:qu=="a4"?{dn:this.getX500Name(Yu)}:void 0},this.getExtSubjectAltName2=function(){var Wu,qu,Yu,Zu=this.getExtInfo("subjectAltName");if(Zu===void 0)return Zu;for(var _h=new Array,ep=Ou(this.hex,Zu.vidx),ip=Ru(ep,0),ap=0;ap<ip.length;ap++)Yu=ep.substr(ip[ap],2),Wu=Lu(ep,ip[ap]),Yu==="81"&&(qu=ne(Wu),_h.push(["MAIL",qu])),Yu==="82"&&(qu=ne(Wu),_h.push(["DNS",qu])),Yu==="84"&&(qu=Be$1.hex2dn(Wu,0),_h.push(["DN",qu])),Yu==="86"&&(qu=ne(Wu),_h.push(["URI",qu])),Yu==="87"&&(qu=ue$1(Wu),_h.push(["IP",qu]));return _h},this.getExtCRLDistributionPoints=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("cRLDistributionPoints");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"cRLDistributionPoints",array:[]};qu&&(Zu.critical=!0);for(var _h=Ru(Wu,0),ep=0;ep<_h.length;ep++){var ip=Ou(Wu,_h[ep]);Zu.array.push(this.getDistributionPoint(ip))}return Zu},this.getDistributionPoint=function(Wu){for(var qu={},Yu=Ru(Wu,0),Zu=0;Zu<Yu.length;Zu++){var _h=Wu.substr(Yu[Zu],2),ep=Ou(Wu,Yu[Zu]);_h=="a0"&&(qu.dpname=this.getDistributionPointName(ep))}return qu},this.getDistributionPointName=function(Wu){for(var qu={},Yu=Ru(Wu,0),Zu=0;Zu<Yu.length;Zu++){var _h=Wu.substr(Yu[Zu],2),ep=Ou(Wu,Yu[Zu]);_h=="a0"&&(qu.full=this.getGeneralNames(ep))}return qu},this.getExtCRLDistributionPointsURI=function(){var Wu=this.getExtInfo("cRLDistributionPoints");if(Wu===void 0)return Wu;for(var qu=new Array,Yu=Ru(this.hex,Wu.vidx),Zu=0;Zu<Yu.length;Zu++)try{var _h=ne(Fu(this.hex,Yu[Zu],[0,0,0],"86"));qu.push(_h)}catch{}return qu},this.getExtAIAInfo=function(){var Wu=this.getExtInfo("authorityInfoAccess");if(Wu===void 0)return Wu;for(var qu={ocsp:[],caissuer:[]},Yu=Ru(this.hex,Wu.vidx),Zu=0;Zu<Yu.length;Zu++){var _h=Fu(this.hex,Yu[Zu],[0],"06"),ep=Fu(this.hex,Yu[Zu],[1],"86");_h==="2b06010505073001"&&qu.ocsp.push(ne(ep)),_h==="2b06010505073002"&&qu.caissuer.push(ne(ep))}return qu},this.getExtAuthorityInfoAccess=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("authorityInfoAccess");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"authorityInfoAccess",array:[]};qu&&(Zu.critical=!0);for(var _h=Ru(Wu,0),ep=0;ep<_h.length;ep++){var ip=Nu(Wu,_h[ep],[0],"06"),ap=ne(Fu(Wu,_h[ep],[1],"86"));if(ip=="2b06010505073001")Zu.array.push({ocsp:ap});else{if(ip!="2b06010505073002")throw new Error("unknown method: "+ip);Zu.array.push({caissuer:ap})}}return Zu},this.getExtCertificatePolicies=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("certificatePolicies");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"certificatePolicies",array:[]};qu&&(Zu.critical=!0);for(var _h=Ru(Wu,0),ep=0;ep<_h.length;ep++){var ip=Ou(Wu,_h[ep]),ap=this.getPolicyInformation(ip);Zu.array.push(ap)}return Zu},this.getPolicyInformation=function(Wu){var qu={},Yu=Fu(Wu,0,[0],"06");qu.policyoid=Qu(Yu);var Zu=zu(Wu,0,[1],"30");if(Zu!=-1){qu.array=[];for(var _h=Ru(Wu,Zu),ep=0;ep<_h.length;ep++){var ip=Ou(Wu,_h[ep]),ap=this.getPolicyQualifierInfo(ip);qu.array.push(ap)}}return qu},this.getPolicyQualifierInfo=function(Wu){var qu={},Yu=Fu(Wu,0,[0],"06");if(Yu==="2b06010505070201"){var Zu=Nu(Wu,0,[1],"16");qu.cps=re$1(Zu)}else if(Yu==="2b06010505070202"){var _h=Vu(Wu,0,[1],"30");qu.unotice=this.getUserNotice(_h)}return qu},this.getUserNotice=function(Wu){for(var qu={},Yu=Ru(Wu,0),Zu=0;Zu<Yu.length;Zu++){var _h=Ou(Wu,Yu[Zu]);_h.substr(0,2)!="30"&&(qu.exptext=this.getDisplayText(_h))}return qu},this.getDisplayText=function(Wu){var qu={};return qu.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Wu.substr(0,2)],qu.str=re$1(Lu(Wu,0)),qu},this.getExtCRLNumber=function(Wu,qu){var Yu={extname:"cRLNumber"};if(qu&&(Yu.critical=!0),Wu.substr(0,2)=="02")return Yu.num={hex:Lu(Wu,0)},Yu;throw new Error("hExtV parse error: "+Wu)},this.getExtCRLReason=function(Wu,qu){var Yu={extname:"cRLReason"};if(qu&&(Yu.critical=!0),Wu.substr(0,2)=="0a")return Yu.code=parseInt(Lu(Wu,0),16),Yu;throw new Error("hExtV parse error: "+Wu)},this.getExtOcspNonce=function(Wu,qu){var Yu={extname:"ocspNonce"};qu&&(Yu.critical=!0);var Zu=Lu(Wu,0);return Yu.hex=Zu,Yu},this.getExtOcspNoCheck=function(Wu,qu){var Yu={extname:"ocspNoCheck"};return qu&&(Yu.critical=!0),Yu},this.getExtAdobeTimeStamp=function(Wu,qu){if(Wu===void 0&&qu===void 0){var Yu=this.getExtInfo("adobeTimeStamp");if(Yu===void 0)return;Wu=Ou(this.hex,Yu.vidx),qu=Yu.critical}var Zu={extname:"adobeTimeStamp"};qu&&(Zu.critical=!0);var _h=Ru(Wu,0);if(_h.length>1){var ep=Ou(Wu,_h[1]),ip=this.getGeneralName(ep);ip.uri!=null&&(Zu.uri=ip.uri)}if(_h.length>2){var ap=Ou(Wu,_h[2]);ap=="0101ff"&&(Zu.reqauth=!0),ap=="010100"&&(Zu.reqauth=!1)}return Zu},this.getX500NameRule=function(Wu){for(var qu=null,Yu=[],Zu=0;Zu<Wu.length;Zu++)for(var _h=Wu[Zu],ep=0;ep<_h.length;ep++)Yu.push(_h[ep]);for(Zu=0;Zu<Yu.length;Zu++){var ip=Yu[Zu],ap=ip.ds,sp=ip.value,Ju=ip.type;if(ap!="prn"&&ap!="utf8"&&ap!="ia5")return"mixed";if(ap=="ia5"){if(Ju!="CN")return"mixed";if(l$3.lang.String.isMail(sp))continue;return"mixed"}if(Ju=="C"){if(ap=="prn")continue;return"mixed"}if(qu==null)qu=ap;else if(qu!==ap)return"mixed"}return qu==null?"prn":qu},this.getX500Name=function(Wu){var qu=this.getX500NameArray(Wu);return{array:qu,str:this.dnarraytostr(qu)}},this.getX500NameArray=function(Wu){for(var qu=[],Yu=Ru(Wu,0),Zu=0;Zu<Yu.length;Zu++)qu.push(this.getRDN(Ou(Wu,Yu[Zu])));return qu},this.getRDN=function(Wu){for(var qu=[],Yu=Ru(Wu,0),Zu=0;Zu<Yu.length;Zu++)qu.push(this.getAttrTypeAndValue(Ou(Wu,Yu[Zu])));return qu},this.getAttrTypeAndValue=function(Wu){var qu={type:null,value:null,ds:null},Yu=Ru(Wu,0),Zu=Fu(Wu,Yu[0],[],"06"),_h=Fu(Wu,Yu[1],[]),ep=l$3.asn1.ASN1Util.oidHexToInt(Zu);return qu.type=l$3.asn1.x509.OID.oid2atype(ep),qu.ds=this.HEX2STAG[Wu.substr(Yu[1],2)],qu.ds!="bmp"?qu.value=ne(_h):qu.value=he(_h),qu},this.readCertPEM=function(Wu){this.readCertHex(Ku(Wu))},this.readCertHex=function(Wu){this.hex=Wu,this.getVersion();try{Gu(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Wu={};return Wu.version=this.getVersion(),Wu.serial={hex:this.getSerialNumberHex()},Wu.sigalg=this.getSignatureAlgorithmField(),Wu.issuer=this.getIssuer(),Wu.notbefore=this.getNotBefore(),Wu.notafter=this.getNotAfter(),Wu.subject=this.getSubject(),Wu.sbjpubkey=ae$1(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Wu.ext=this.getExtParamArray()),Wu.sighex=this.getSignatureValueHex(),Wu},this.getExtParamArray=function(Wu){Wu==null&&zu(this.hex,0,[0,"[3]"])!=-1&&(Wu=Uu(this.hex,0,[0,"[3]",0],"30"));for(var qu=[],Yu=Ru(Wu,0),Zu=0;Zu<Yu.length;Zu++){var _h=Ou(Wu,Yu[Zu]),ep=this.getExtParam(_h);ep!=null&&qu.push(ep)}return qu},this.getExtParam=function(Wu){var qu=Ru(Wu,0).length;if(qu!=2&&qu!=3)throw new Error("wrong number elements in Extension: "+qu+" "+Wu);var Yu=Xu(Fu(Wu,0,[0],"06")),Zu=!1;qu==3&&Vu(Wu,0,[1])=="0101ff"&&(Zu=!0);var _h=Vu(Wu,0,[qu-1,0]),ep=void 0;if(Yu=="2.5.29.14"?ep=this.getExtSubjectKeyIdentifier(_h,Zu):Yu=="2.5.29.15"?ep=this.getExtKeyUsage(_h,Zu):Yu=="2.5.29.17"?ep=this.getExtSubjectAltName(_h,Zu):Yu=="2.5.29.18"?ep=this.getExtIssuerAltName(_h,Zu):Yu=="2.5.29.19"?ep=this.getExtBasicConstraints(_h,Zu):Yu=="2.5.29.31"?ep=this.getExtCRLDistributionPoints(_h,Zu):Yu=="2.5.29.32"?ep=this.getExtCertificatePolicies(_h,Zu):Yu=="2.5.29.35"?ep=this.getExtAuthorityKeyIdentifier(_h,Zu):Yu=="2.5.29.37"?ep=this.getExtExtKeyUsage(_h,Zu):Yu=="1.3.6.1.5.5.7.1.1"?ep=this.getExtAuthorityInfoAccess(_h,Zu):Yu=="2.5.29.20"?ep=this.getExtCRLNumber(_h,Zu):Yu=="2.5.29.21"?ep=this.getExtCRLReason(_h,Zu):Yu=="1.3.6.1.5.5.7.48.1.2"?ep=this.getExtOcspNonce(_h,Zu):Yu=="1.3.6.1.5.5.7.48.1.5"?ep=this.getExtOcspNoCheck(_h,Zu):Yu=="1.2.840.113583.1.1.9.1"&&(ep=this.getExtAdobeTimeStamp(_h,Zu)),ep!=null)return ep;var ip={extname:Yu,extn:_h};return Zu&&(ip.critical=!0),ip},this.findExt=function(Wu,qu){for(var Yu=0;Yu<Wu.length;Yu++)if(Wu[Yu].extname==qu)return Wu[Yu];return null},this.updateExtCDPFullURI=function(Wu,qu){var Yu=this.findExt(Wu,"cRLDistributionPoints");if(Yu!=null&&Yu.array!=null){for(var Zu=Yu.array,_h=0;_h<Zu.length;_h++)if(Zu[_h].dpname!=null&&Zu[_h].dpname.full!=null)for(var ep=Zu[_h].dpname.full,ip=0;ip<ep.length;ip++){var ap=ep[_h];ap.uri!=null&&(ap.uri=qu)}}},this.updateExtAIAOCSP=function(Wu,qu){var Yu=this.findExt(Wu,"authorityInfoAccess");if(Yu!=null&&Yu.array!=null)for(var Zu=Yu.array,_h=0;_h<Zu.length;_h++)Zu[_h].ocsp!=null&&(Zu[_h].ocsp=qu)},this.updateExtAIACAIssuer=function(Wu,qu){var Yu=this.findExt(Wu,"authorityInfoAccess");if(Yu!=null&&Yu.array!=null)for(var Zu=Yu.array,_h=0;_h<Zu.length;_h++)Zu[_h].caissuer!=null&&(Zu[_h].caissuer=qu)},this.dnarraytostr=function(Wu){return"/"+Wu.map(function(qu){return function(Yu){return Yu.map(function(Zu){return function(_h){return _h.type+"="+_h.value}(Zu).replace(/\+/,"\\+")}).join("+")}(qu).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Wu,qu,Yu,Zu,_h=function(rp){for(var op="",lp=rp.array,up=0;up<lp.length;up++){var cp=lp[up];if(op+="    policy oid: "+cp.policyoid+`
`,cp.array!==void 0)for(var Ap=0;Ap<cp.array.length;Ap++){var yp=cp.array[Ap];yp.cps!==void 0&&(op+="    cps: "+yp.cps+`
`)}}return op},ep=function(rp){for(var op="",lp=rp.array,up=0;up<lp.length;up++){var cp=lp[up];try{cp.dpname.full[0].uri!==void 0&&(op+="    "+cp.dpname.full[0].uri+`
`)}catch{}try{cp.dname.full[0].dn.hex!==void 0&&(op+="    "+Be$1.hex2dn(cp.dpname.full[0].dn.hex)+`
`)}catch{}}return op},ip=function(rp){for(var op="",lp=rp.array,up=0;up<lp.length;up++){var cp=lp[up];cp.caissuer!==void 0&&(op+="    caissuer: "+cp.caissuer+`
`),cp.ocsp!==void 0&&(op+="    ocsp: "+cp.ocsp+`
`)}return op};if(Wu=`Basic Fields
`,Wu+="  serial number: "+this.getSerialNumberHex()+`
`,Wu+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Wu+="  issuer: "+this.getIssuerString()+`
`,Wu+="  notBefore: "+this.getNotBefore()+`
`,Wu+="  notAfter: "+this.getNotAfter()+`
`,Wu+="  subject: "+this.getSubjectString()+`
`,Wu+=`  subject public key info: 
`,Wu+="    key algorithm: "+(qu=this.getPublicKey()).type+`
`,qu.type==="RSA"&&(Wu+="    n="+de$1(qu.n.toString(16)).substr(0,16)+`...
`,Wu+="    e="+de$1(qu.e.toString(16))+`
`),(Yu=this.aExtInfo)!=null){Wu+=`X509v3 Extensions:
`;for(var ap=0;ap<Yu.length;ap++){var sp=Yu[ap],Ju=l$3.asn1.x509.OID.oid2name(sp.oid);Ju===""&&(Ju=sp.oid);var _f="";if(sp.critical===!0&&(_f="CRITICAL"),Wu+="  "+Ju+" "+_f+`:
`,Ju==="basicConstraints"){var np=this.getExtBasicConstraints();np.cA===void 0?Wu+=`    {}
`:(Wu+="    cA=true",np.pathLen!==void 0&&(Wu+=", pathLen="+np.pathLen),Wu+=`
`)}else if(Ju==="keyUsage")Wu+="    "+this.getExtKeyUsageString()+`
`;else if(Ju==="subjectKeyIdentifier")Wu+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Ju==="authorityKeyIdentifier"){var tp=this.getExtAuthorityKeyIdentifier();tp.kid!==void 0&&(Wu+="    kid="+tp.kid.hex+`
`)}else Ju==="extKeyUsage"?Wu+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Ju==="subjectAltName"?Wu+="    "+(Zu=this.getExtSubjectAltName(),JSON.stringify(Zu.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Ju==="cRLDistributionPoints"?Wu+=ep(this.getExtCRLDistributionPoints()):Ju==="authorityInfoAccess"?Wu+=ip(this.getExtAuthorityInfoAccess()):Ju==="certificatePolicies"&&(Wu+=_h(this.getExtCertificatePolicies()))}}return Wu+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Wu+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof _u=="string"&&(_u.indexOf("-----BEGIN")!=-1?this.readCertPEM(_u):l$3.lang.String.isHex(_u)&&this.readCertHex(_u))}function Te$1(_u){return h$2.SHA256(_u).toString()}Me.getLblen=function(_u,$u){if(_u.substr($u+2,1)!="8")return 1;var Bu=parseInt(_u.substr($u+3,1));return Bu==0?-1:0<Bu&&Bu<10?Bu+1:-2},Me.getL=function(_u,$u){var Bu=Me.getLblen(_u,$u);return Bu<1?"":_u.substr($u+2,2*Bu)},Me.getVblen=function(_u,$u){var Bu;return(Bu=Me.getL(_u,$u))==""?-1:(Bu.substr(0,1)==="8"?new c$2(Bu.substr(2),16):new c$2(Bu,16)).intValue()},Me.getVidx=function(_u,$u){var Bu=Me.getLblen(_u,$u);return Bu<0?Bu:$u+2*(Bu+1)},Me.getV=function(_u,$u){var Bu=Me.getVidx(_u,$u),Ru=Me.getVblen(_u,$u);return _u.substr(Bu,2*Ru)},Me.getTLV=function(_u,$u){return _u.substr($u,2)+Me.getL(_u,$u)+Me.getV(_u,$u)},Me.getTLVblen=function(_u,$u){return 2+2*Me.getLblen(_u,$u)+2*Me.getVblen(_u,$u)},Me.getNextSiblingIdx=function(_u,$u){return Me.getVidx(_u,$u)+2*Me.getVblen(_u,$u)},Me.getChildIdx=function(_u,$u){var Bu,Ru,Lu,Ou=Me,Fu=[];Bu=Ou.getVidx(_u,$u),Ru=2*Ou.getVblen(_u,$u),_u.substr($u,2)=="03"&&(Bu+=2,Ru-=2),Lu=0;for(var Nu=Bu;Lu<=Ru;){var Vu=Ou.getTLVblen(_u,Nu);if((Lu+=Vu)<=Ru&&Fu.push(Nu),Nu+=Vu,Lu>=Ru)break}return Fu},Me.getNthChildIdx=function(_u,$u,Bu){return Me.getChildIdx(_u,$u)[Bu]},Me.getIdxbyList=function(_u,$u,Bu,Ru){var Lu,Ou,Fu=Me;return Bu.length==0?Ru!==void 0&&_u.substr($u,2)!==Ru?-1:$u:(Lu=Bu.shift())>=(Ou=Fu.getChildIdx(_u,$u)).length?-1:Fu.getIdxbyList(_u,Ou[Lu],Bu,Ru)},Me.getIdxbyListEx=function(_u,$u,Bu,Ru){var Lu,Ou,Fu=Me;if(Bu.length==0)return Ru!==void 0&&_u.substr($u,2)!==Ru?-1:$u;Lu=Bu.shift(),Ou=Fu.getChildIdx(_u,$u);for(var Nu=0,Vu=0;Vu<Ou.length;Vu++){var Uu=_u.substr(Ou[Vu],2);if(typeof Lu=="number"&&!Fu.isContextTag(Uu)&&Nu==Lu||typeof Lu=="string"&&Fu.isContextTag(Uu,Lu))return Fu.getIdxbyListEx(_u,Ou[Vu],Bu,Ru);Fu.isContextTag(Uu)||Nu++}return-1},Me.getTLVbyList=function(_u,$u,Bu,Ru){var Lu=Me,Ou=Lu.getIdxbyList(_u,$u,Bu,Ru);return Ou==-1||Ou>=_u.length?null:Lu.getTLV(_u,Ou)},Me.getTLVbyListEx=function(_u,$u,Bu,Ru){var Lu=Me,Ou=Lu.getIdxbyListEx(_u,$u,Bu,Ru);return Ou==-1?null:Lu.getTLV(_u,Ou)},Me.getVbyList=function(_u,$u,Bu,Ru,Lu){var Ou,Fu,Nu=Me;return(Ou=Nu.getIdxbyList(_u,$u,Bu,Ru))==-1||Ou>=_u.length?null:(Fu=Nu.getV(_u,Ou),Lu===!0&&(Fu=Fu.substr(2)),Fu)},Me.getVbyListEx=function(_u,$u,Bu,Ru,Lu){var Ou,Fu,Nu=Me;return(Ou=Nu.getIdxbyListEx(_u,$u,Bu,Ru))==-1?null:(Fu=Nu.getV(_u,Ou),_u.substr(Ou,2)=="03"&&Lu!==!1&&(Fu=Fu.substr(2)),Fu)},Me.getInt=function(_u,$u,Bu){Bu==null&&(Bu=-1);try{var Ru=_u.substr($u,2);if(Ru!="02"&&Ru!="03")return Bu;var Lu=Me.getV(_u,$u);return Ru=="02"?parseInt(Lu,16):function(Ou){try{var Fu=Ou.substr(0,2);if(Fu=="00")return parseInt(Ou.substr(2),16);var Nu=parseInt(Fu,16),Vu=Ou.substr(2),Uu=parseInt(Vu,16).toString(2);return Uu=="0"&&(Uu="00000000"),Uu=Uu.slice(0,0-Nu),parseInt(Uu,2)}catch{return-1}}(Lu)}catch{return Bu}},Me.getOID=function(_u,$u,Bu){Bu==null&&(Bu=null);try{return _u.substr($u,2)!="06"?Bu:function(Ru){if(!ce$1(Ru))return null;try{var Lu=[],Ou=Ru.substr(0,2),Fu=parseInt(Ou,16);Lu[0]=new String(Math.floor(Fu/40)),Lu[1]=new String(Fu%40);for(var Nu=Ru.substr(2),Vu=[],Uu=0;Uu<Nu.length/2;Uu++)Vu.push(parseInt(Nu.substr(2*Uu,2),16));var Gu=[],zu="";for(Uu=0;Uu<Vu.length;Uu++)128&Vu[Uu]?zu+=pe$1((127&Vu[Uu]).toString(2),7):(zu+=pe$1((127&Vu[Uu]).toString(2),7),Gu.push(new String(parseInt(zu,2))),zu="");var Hu=Lu.join(".");return Gu.length>0&&(Hu=Hu+"."+Gu.join(".")),Hu}catch{return null}}(Me.getV(_u,$u))}catch{return Bu}},Me.getOIDName=function(_u,$u,Bu){Bu==null&&(Bu=null);try{var Ru=Me.getOID(_u,$u,Bu);if(Ru==Bu)return Bu;var Lu=l$3.asn1.x509.OID.oid2name(Ru);return Lu==""?Ru:Lu}catch{return Bu}},Me.getString=function(_u,$u,Bu){Bu==null&&(Bu=null);try{return re$1(Me.getV(_u,$u))}catch{return Bu}},Me.hextooidstr=function(_u){var $u=function(zu,Hu){return zu.length>=Hu?zu:new Array(Hu-zu.length+1).join("0")+zu},Bu=[],Ru=_u.substr(0,2),Lu=parseInt(Ru,16);Bu[0]=new String(Math.floor(Lu/40)),Bu[1]=new String(Lu%40);for(var Ou=_u.substr(2),Fu=[],Nu=0;Nu<Ou.length/2;Nu++)Fu.push(parseInt(Ou.substr(2*Nu,2),16));var Vu=[],Uu="";for(Nu=0;Nu<Fu.length;Nu++)128&Fu[Nu]?Uu+=$u((127&Fu[Nu]).toString(2),7):(Uu+=$u((127&Fu[Nu]).toString(2),7),Vu.push(new String(parseInt(Uu,2))),Uu="");var Gu=Bu.join(".");return Vu.length>0&&(Gu=Gu+"."+Vu.join(".")),Gu},Me.dump=function(_u,$u,Bu,Ru){var Lu=Me,Ou=Lu.getV,Fu=Lu.dump,Nu=Lu.getChildIdx,Vu=_u;_u instanceof l$3.asn1.ASN1Object&&(Vu=_u.getEncodedHex());var Uu=function(ip,ap){return ip.length<=2*ap?ip:ip.substr(0,ap)+"..(total "+ip.length/2+"bytes).."+ip.substr(ip.length-ap,ap)};$u===void 0&&($u={ommit_long_octet:32}),Bu===void 0&&(Bu=0),Ru===void 0&&(Ru="");var Gu,zu=$u.ommit_long_octet;if((Gu=Vu.substr(Bu,2))=="01")return(Hu=Ou(Vu,Bu))=="00"?Ru+`BOOLEAN FALSE
`:Ru+`BOOLEAN TRUE
`;if(Gu=="02")return Ru+"INTEGER "+Uu(Hu=Ou(Vu,Bu),zu)+`
`;if(Gu=="03"){var Hu=Ou(Vu,Bu);if(Lu.isASN1HEX(Hu.substr(2))){var ju=Ru+`BITSTRING, encapsulates
`;return ju+=Fu(Hu.substr(2),$u,0,Ru+"  ")}return Ru+"BITSTRING "+Uu(Hu,zu)+`
`}if(Gu=="04")return Hu=Ou(Vu,Bu),Lu.isASN1HEX(Hu)?(ju=Ru+`OCTETSTRING, encapsulates
`,ju+=Fu(Hu,$u,0,Ru+"  ")):Ru+"OCTETSTRING "+Uu(Hu,zu)+`
`;if(Gu=="05")return Ru+`NULL
`;if(Gu=="06"){var Qu=Ou(Vu,Bu),Xu=l$3.asn1.ASN1Util.oidHexToInt(Qu),Ku=l$3.asn1.x509.OID.oid2name(Xu),Wu=Xu.replace(/\./g," ");return Ku!=""?Ru+"ObjectIdentifier "+Ku+" ("+Wu+`)
`:Ru+"ObjectIdentifier ("+Wu+`)
`}if(Gu=="0a")return Ru+"ENUMERATED "+parseInt(Ou(Vu,Bu))+`
`;if(Gu=="0c")return Ru+"UTF8String '"+ne(Ou(Vu,Bu))+`'
`;if(Gu=="13")return Ru+"PrintableString '"+ne(Ou(Vu,Bu))+`'
`;if(Gu=="14")return Ru+"TeletexString '"+ne(Ou(Vu,Bu))+`'
`;if(Gu=="16")return Ru+"IA5String '"+ne(Ou(Vu,Bu))+`'
`;if(Gu=="17")return Ru+"UTCTime "+ne(Ou(Vu,Bu))+`
`;if(Gu=="18")return Ru+"GeneralizedTime "+ne(Ou(Vu,Bu))+`
`;if(Gu=="1a")return Ru+"VisualString '"+ne(Ou(Vu,Bu))+`'
`;if(Gu=="1e")return Ru+"BMPString '"+he(Ou(Vu,Bu))+`'
`;if(Gu=="30"){if(Vu.substr(Bu,4)=="3000")return Ru+`SEQUENCE {}
`;ju=Ru+`SEQUENCE
`;var qu=$u;if(((_h=Nu(Vu,Bu)).length==2||_h.length==3)&&Vu.substr(_h[0],2)=="06"&&Vu.substr(_h[_h.length-1],2)=="04"){Ku=Lu.oidname(Ou(Vu,_h[0]));var Yu=JSON.parse(JSON.stringify($u));Yu.x509ExtName=Ku,qu=Yu}for(var Zu=0;Zu<_h.length;Zu++)ju+=Fu(Vu,qu,_h[Zu],Ru+"  ");return ju}if(Gu=="31"){ju=Ru+`SET
`;var _h=Nu(Vu,Bu);for(Zu=0;Zu<_h.length;Zu++)ju+=Fu(Vu,$u,_h[Zu],Ru+"  ");return ju}if((128&(Gu=parseInt(Gu,16)))!=0){var ep=31&Gu;if((32&Gu)!=0){for(ju=Ru+"["+ep+`]
`,_h=Nu(Vu,Bu),Zu=0;Zu<_h.length;Zu++)ju+=Fu(Vu,$u,_h[Zu],Ru+"  ");return ju}if(Hu=Ou(Vu,Bu),Me.isASN1HEX(Hu)){var ju=Ru+"["+ep+`]
`;return ju+=Fu(Hu,$u,0,Ru+"  ")}return(Hu.substr(0,8)=="68747470"||$u.x509ExtName==="subjectAltName"&&ep==2)&&(Hu=ne(Hu)),ju=Ru+"["+ep+"] "+Hu+`
`}return Ru+"UNKNOWN("+Gu+") "+Ou(Vu,Bu)+`
`},Me.isContextTag=function(_u,$u){var Bu,Ru;_u=_u.toLowerCase();try{Bu=parseInt(_u,16)}catch{return-1}if($u===void 0)return(192&Bu)==128;try{return $u.match(/^\[[0-9]+\]$/)!=null&&!((Ru=parseInt($u.substr(1,$u.length-1),10))>31)&&(192&Bu)==128&&(31&Bu)==Ru}catch{return!1}},Me.isASN1HEX=function(_u){var $u=Me;if(_u.length%2==1)return!1;var Bu=$u.getVblen(_u,0),Ru=_u.substr(0,2),Lu=$u.getL(_u,0);return _u.length-Ru.length-Lu.length==2*Bu},Me.checkStrictDER=function(_u,$u,Bu,Ru,Lu){var Ou=Me;if(Bu===void 0){if(typeof _u!="string")throw new Error("not hex string");if(_u=_u.toLowerCase(),!l$3.lang.String.isHex(_u))throw new Error("not hex string");Bu=_u.length,Lu=(Ru=_u.length/2)<128?1:Math.ceil(Ru.toString(16))+1}if(Ou.getL(_u,$u).length>2*Lu)throw new Error("L of TLV too long: idx="+$u);var Fu=Ou.getVblen(_u,$u);if(Fu>Ru)throw new Error("value of L too long than hex: idx="+$u);var Nu=Ou.getTLV(_u,$u),Vu=Nu.length-2-Ou.getL(_u,$u).length;if(Vu!==2*Fu)throw new Error("V string length and L's value not the same:"+Vu+"/"+2*Fu);if($u===0&&_u.length!=Nu.length)throw new Error("total length and TLV length unmatch:"+_u.length+"!="+Nu.length);var Uu=_u.substr($u,2);if(Uu==="02"){var Gu=Ou.getVidx(_u,$u);if(_u.substr(Gu,2)=="00"&&_u.charCodeAt(Gu+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Uu,16)){for(var zu=Ou.getVblen(_u,$u),Hu=0,ju=Ou.getChildIdx(_u,$u),Qu=0;Qu<ju.length;Qu++)Hu+=Ou.getTLV(_u,ju[Qu]).length,Ou.checkStrictDER(_u,ju[Qu],Bu,Ru,Lu);if(2*zu!=Hu)throw new Error("sum of children's TLV length and L unmatch: "+2*zu+"!="+Hu)}},Me.oidname=function(_u){var $u=l$3.asn1;l$3.lang.String.isHex(_u)&&(_u=$u.ASN1Util.oidHexToInt(_u));var Bu=$u.x509.OID.oid2name(_u);return Bu===""&&(Bu=_u),Bu},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.x509!==void 0&&l$3.asn1.x509||(l$3.asn1.x509={}),l$3.asn1.x509.Certificate=function(_u){l$3.asn1.x509.Certificate.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.DERBitString,Ru=$u.DERSequence,Lu=$u.x509,Ou=Lu.TBSCertificate,Fu=Lu.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Nu){this.params=Nu},this.sign=function(){var Nu=this.params,Vu=Nu.sigalg;Nu.sigalg.name!=null&&(Vu=Nu.sigalg.name);var Uu=Nu.tbsobj.getEncodedHex(),Gu=new l$3.crypto.Signature({alg:Vu});Gu.init(Nu.cakey),Gu.updateHex(Uu),Nu.sighex=Gu.sign()},this.getPEM=function(){return ae$1(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Nu=this.params;if(Nu.tbsobj!=null&&Nu.tbsobj!=null||(Nu.tbsobj=new Ou(Nu)),Nu.sighex==null&&Nu.cakey!=null&&this.sign(),Nu.sighex==null)throw new Error("sighex or cakey parameter not defined");var Vu=[];return Vu.push(Nu.tbsobj),Vu.push(new Fu({name:Nu.sigalg})),Vu.push(new Bu({hex:"00"+Nu.sighex})),new Ru({array:Vu}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.Certificate,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertificate=function(_u){l$3.asn1.x509.TBSCertificate.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.x509,Ru=$u.DERTaggedObject,Lu=$u.DERInteger,Ou=$u.DERSequence,Fu=Bu.AlgorithmIdentifier,Nu=Bu.Time,Vu=Bu.X500Name,Uu=Bu.Extensions,Gu=Bu.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(zu){this.params=zu},this.getEncodedHex=function(){var zu=[],Hu=this.params;if(Hu.version!=null||Hu.version!=1){var ju=2;Hu.version!=null&&(ju=Hu.version-1);var Qu=new Ru({obj:new Lu({int:ju})});zu.push(Qu)}return zu.push(new Lu(Hu.serial)),zu.push(new Fu({name:Hu.sigalg})),zu.push(new Vu(Hu.issuer)),zu.push(new Ou({array:[new Nu(Hu.notbefore),new Nu(Hu.notafter)]})),zu.push(new Vu(Hu.subject)),zu.push(new Gu(Ee.getKey(Hu.sbjpubkey))),Hu.ext!==void 0&&Hu.ext.length>0&&zu.push(new Ru({tag:"a3",obj:new Uu(Hu.ext)})),new l$3.asn1.DERSequence({array:zu}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.TBSCertificate,l$3.asn1.ASN1Object),l$3.asn1.x509.Extensions=function(_u){l$3.asn1.x509.Extensions.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.DERSequence,Ru=$u.x509;this.aParam=[],this.setByParam=function(Lu){this.aParam=Lu},this.getEncodedHex=function(){for(var Lu=[],Ou=0;Ou<this.aParam.length;Ou++){var Fu=this.aParam[Ou],Nu=Fu.extname,Vu=null;if(Fu.extn!=null)Vu=new Ru.PrivateExtension(Fu);else if(Nu=="subjectKeyIdentifier")Vu=new Ru.SubjectKeyIdentifier(Fu);else if(Nu=="keyUsage")Vu=new Ru.KeyUsage(Fu);else if(Nu=="subjectAltName")Vu=new Ru.SubjectAltName(Fu);else if(Nu=="issuerAltName")Vu=new Ru.IssuerAltName(Fu);else if(Nu=="basicConstraints")Vu=new Ru.BasicConstraints(Fu);else if(Nu=="cRLDistributionPoints")Vu=new Ru.CRLDistributionPoints(Fu);else if(Nu=="certificatePolicies")Vu=new Ru.CertificatePolicies(Fu);else if(Nu=="authorityKeyIdentifier")Vu=new Ru.AuthorityKeyIdentifier(Fu);else if(Nu=="extKeyUsage")Vu=new Ru.ExtKeyUsage(Fu);else if(Nu=="authorityInfoAccess")Vu=new Ru.AuthorityInfoAccess(Fu);else if(Nu=="cRLNumber")Vu=new Ru.CRLNumber(Fu);else if(Nu=="cRLReason")Vu=new Ru.CRLReason(Fu);else if(Nu=="ocspNonce")Vu=new Ru.OCSPNonce(Fu);else if(Nu=="ocspNoCheck")Vu=new Ru.OCSPNoCheck(Fu);else if(Nu=="adobeTimeStamp")Vu=new Ru.AdobeTimeStamp(Fu);else{if(Nu!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Fu));Vu=new Ru.SubjectDirectoryAttributes(Fu)}Vu!=null&&Lu.push(Vu)}return new Bu({array:Lu}).getEncodedHex()},_u!=null&&this.setByParam(_u)},fe$1(l$3.asn1.x509.Extensions,l$3.asn1.ASN1Object),l$3.asn1.x509.Extension=function(_u){l$3.asn1.x509.Extension.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.DERObjectIdentifier,Ru=$u.DEROctetString;$u.DERBitString;var Lu=$u.DERBoolean,Ou=$u.DERSequence;this.getEncodedHex=function(){var Fu=new Bu({oid:this.oid}),Nu=new Ru({hex:this.getExtnValueHex()}),Vu=new Array;return Vu.push(Fu),this.critical&&Vu.push(new Lu),Vu.push(Nu),new Ou({array:Vu}).getEncodedHex()},this.critical=!1,_u!==void 0&&_u.critical!==void 0&&(this.critical=_u.critical)},fe$1(l$3.asn1.x509.Extension,l$3.asn1.ASN1Object),l$3.asn1.x509.KeyUsage=function(_u){l$3.asn1.x509.KeyUsage.superclass.constructor.call(this,_u);var $u=Be$1.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",_u!==void 0&&(_u.bin!==void 0&&(this.asn1ExtnValue=new l$3.asn1.DERBitString(_u)),_u.names!==void 0&&_u.names.length!==void 0)){for(var Bu=_u.names,Ru="000000000",Lu=0;Lu<Bu.length;Lu++)for(var Ou=0;Ou<$u.length;Ou++)Bu[Lu]===$u[Ou]&&(Ru=Ru.substring(0,Ou)+"1"+Ru.substring(Ou+1,Ru.length));this.asn1ExtnValue=new l$3.asn1.DERBitString({bin:Ru})}},fe$1(l$3.asn1.x509.KeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.BasicConstraints=function(_u){l$3.asn1.x509.BasicConstraints.superclass.constructor.call(this,_u);var $u=l$3.asn1,Bu=$u.DERBoolean,Ru=$u.DERInteger,Lu=$u.DERSequence;this.getExtnValueHex=function(){var Ou=new Array;this.cA&&Ou.push(new Bu),this.pathLen>-1&&Ou.push(new Ru({int:this.pathLen}));var Fu=new Lu({array:Ou});return this.asn1ExtnValue=Fu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,_u!==void 0&&(_u.cA!==void 0&&(this.cA=_u.cA),_u.pathLen!==void 0&&(this.pathLen=_u.pathLen))},fe$1(l$3.asn1.x509.BasicConstraints,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLDistributionPoints=function(_u){l$3.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,_u);var $u=l$3.asn1,Bu=$u.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Ru){for(var Lu=[],Ou=0;Ou<Ru.length;Ou++)if(Ru[Ou]instanceof l$3.asn1.ASN1Object)Lu.push(Ru[Ou]);else{var Fu=new Bu.DistributionPoint(Ru[Ou]);Lu.push(Fu)}this.asn1ExtnValue=new $u.DERSequence({array:Lu})},this.setByOneURI=function(Ru){var Lu=new Bu.DistributionPoint({fulluri:Ru});this.setByDPArray([Lu])},this.oid="2.5.29.31",_u!==void 0&&(_u.array!==void 0?this.setByDPArray(_u.array):_u.uri!==void 0&&this.setByOneURI(_u.uri))},fe$1(l$3.asn1.x509.CRLDistributionPoints,l$3.asn1.x509.Extension),l$3.asn1.x509.DistributionPoint=function(_u){l$3.asn1.x509.DistributionPoint.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.x509.DistributionPointName;this.getEncodedHex=function(){var Ru=new $u.DERSequence;if(this.asn1DP!=null){var Lu=new $u.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Ru.appendASN1Object(Lu)}return this.hTLV=Ru.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.dpobj!==void 0?this.asn1DP=_u.dpobj:_u.dpname!==void 0?this.asn1DP=new Bu(_u.dpname):_u.fulluri!==void 0&&(this.asn1DP=new Bu({full:[{uri:_u.fulluri}]})))},fe$1(l$3.asn1.x509.DistributionPoint,l$3.asn1.ASN1Object),l$3.asn1.x509.DistributionPointName=function(_u){l$3.asn1.x509.DistributionPointName.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new Bu({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},_u!==void 0)if($u.x509.GeneralNames.prototype.isPrototypeOf(_u))this.type="full",this.tag="a0",this.asn1V=_u;else{if(_u.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new $u.x509.GeneralNames(_u.full)}},fe$1(l$3.asn1.x509.DistributionPointName,l$3.asn1.ASN1Object),l$3.asn1.x509.CertificatePolicies=function(_u){l$3.asn1.x509.CertificatePolicies.superclass.constructor.call(this,_u);var $u=l$3.asn1,Bu=$u.x509,Ru=$u.DERSequence,Lu=Bu.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Ou=[],Fu=0;Fu<this.params.array.length;Fu++)Ou.push(new Lu(this.params.array[Fu]));var Nu=new Ru({array:Ou});return this.asn1ExtnValue=Nu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.CertificatePolicies,l$3.asn1.x509.Extension),l$3.asn1.x509.PolicyInformation=function(_u){l$3.asn1.x509.PolicyInformation.superclass.constructor.call(this,_u);var $u=l$3.asn1,Bu=$u.DERSequence,Ru=$u.DERObjectIdentifier,Lu=$u.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Ou=[new Ru(this.params.policyoid)];if(this.params.array!==void 0){for(var Fu=[],Nu=0;Nu<this.params.array.length;Nu++)Fu.push(new Lu(this.params.array[Nu]));Fu.length>0&&Ou.push(new Bu({array:Fu}))}return new Bu({array:Ou}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.PolicyInformation,l$3.asn1.ASN1Object),l$3.asn1.x509.PolicyQualifierInfo=function(_u){l$3.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,_u);var $u=l$3.asn1,Bu=$u.DERSequence,Ru=$u.DERIA5String,Lu=$u.DERObjectIdentifier,Ou=$u.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new Bu({array:[new Lu({oid:"1.3.6.1.5.5.7.2.1"}),new Ru({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new Bu({array:[new Lu({oid:"1.3.6.1.5.5.7.2.2"}),new Ou(this.params.unotice)]}).getEncodedHex():void 0},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.PolicyQualifierInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.UserNotice=function(_u){l$3.asn1.x509.UserNotice.superclass.constructor.call(this,_u);var $u=l$3.asn1.DERSequence;l$3.asn1.DERInteger;var Bu=l$3.asn1.x509.DisplayText,Ru=l$3.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Lu=[];return this.params.noticeref!==void 0&&Lu.push(new Ru(this.params.noticeref)),this.params.exptext!==void 0&&Lu.push(new Bu(this.params.exptext)),new $u({array:Lu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.UserNotice,l$3.asn1.ASN1Object),l$3.asn1.x509.NoticeReference=function(_u){l$3.asn1.x509.NoticeReference.superclass.constructor.call(this,_u);var $u=l$3.asn1.DERSequence,Bu=l$3.asn1.DERInteger,Ru=l$3.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Lu=[];if(this.params.org!==void 0&&Lu.push(new Ru(this.params.org)),this.params.noticenum!==void 0){for(var Ou=[],Fu=this.params.noticenum,Nu=0;Nu<Fu.length;Nu++)Ou.push(new Bu(Fu[Nu]));Lu.push(new $u({array:Ou}))}if(Lu.length==0)throw new Error("parameter is empty");return new $u({array:Lu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.NoticeReference,l$3.asn1.ASN1Object),l$3.asn1.x509.DisplayText=function(_u){l$3.asn1.x509.DisplayText.superclass.constructor.call(this,_u),this.hT="0c",_u!==void 0&&(_u.type==="ia5"?this.hT="16":_u.type==="vis"?this.hT="1a":_u.type==="bmp"&&(this.hT="1e"))},fe$1(l$3.asn1.x509.DisplayText,l$3.asn1.DERAbstractString),l$3.asn1.x509.ExtKeyUsage=function(_u){l$3.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,_u);var $u=l$3.asn1;this.setPurposeArray=function(Bu){this.asn1ExtnValue=new $u.DERSequence;for(var Ru=0;Ru<Bu.length;Ru++){var Lu=new $u.DERObjectIdentifier(Bu[Ru]);this.asn1ExtnValue.appendASN1Object(Lu)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",_u!==void 0&&_u.array!==void 0&&this.setPurposeArray(_u.array)},fe$1(l$3.asn1.x509.ExtKeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityKeyIdentifier=function(_u){l$3.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$3,Bu=$u.asn1,Ru=Bu.DERTaggedObject,Lu=Bu.x509.GeneralNames;$u.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Ou=new Array;this.asn1KID&&Ou.push(new Ru({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Ou.push(new Ru({explicit:!1,tag:"a1",obj:new Lu([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Ou.push(new Ru({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Fu=new Bu.DERSequence({array:Ou});return this.asn1ExtnValue=Fu,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Ou){if(Ou.str!==void 0||Ou.hex!==void 0)this.asn1KID=new l$3.asn1.DEROctetString(Ou);else if(typeof Ou=="object"&&l$3.crypto.Util.isKey(Ou)||typeof Ou=="string"&&Ou.indexOf("BEGIN ")!=-1){var Fu=Ou;typeof Ou=="string"&&(Fu=Ee.getKey(Ou));var Nu=Ee.getKeyID(Fu);this.asn1KID=new l$3.asn1.DEROctetString({hex:Nu})}},this.setCertIssuerByParam=function(Ou){Ou.str!==void 0||Ou.ldapstr!==void 0||Ou.hex!==void 0||Ou.certsubject!==void 0||Ou.certissuer!==void 0?this.asn1CertIssuer=new l$3.asn1.x509.X500Name(Ou):typeof Ou=="string"&&Ou.indexOf("BEGIN ")!=-1&&Ou.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new l$3.asn1.x509.X500Name({certissuer:Ou}))},this.setCertSNByParam=function(Ou){if(Ou.str!==void 0||Ou.bigint!==void 0||Ou.hex!==void 0)this.asn1CertSN=new l$3.asn1.DERInteger(Ou);else if(typeof Ou=="string"&&Ou.indexOf("BEGIN ")!=-1&&Ou.indexOf("CERTIFICATE")){var Fu=new Be$1;Fu.readCertPEM(Ou);var Nu=Fu.getSerialNumberHex();this.asn1CertSN=new l$3.asn1.DERInteger({hex:Nu})}},this.oid="2.5.29.35",_u!==void 0&&(_u.kid!==void 0&&this.setKIDByParam(_u.kid),_u.issuer!==void 0&&this.setCertIssuerByParam(_u.issuer),_u.sn!==void 0&&this.setCertSNByParam(_u.sn),_u.issuersn!==void 0&&typeof _u.issuersn=="string"&&_u.issuersn.indexOf("BEGIN ")!=-1&&_u.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(_u.issuersn),this.setCertIssuerByParam(_u.issuersn)))},fe$1(l$3.asn1.x509.AuthorityKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectKeyIdentifier=function(_u){l$3.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$3.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Bu){if(Bu.str!==void 0||Bu.hex!==void 0)this.asn1KID=new $u(Bu);else if(typeof Bu=="object"&&l$3.crypto.Util.isKey(Bu)||typeof Bu=="string"&&Bu.indexOf("BEGIN")!=-1){var Ru=Bu;typeof Bu=="string"&&(Ru=Ee.getKey(Bu));var Lu=Ee.getKeyID(Ru);this.asn1KID=new l$3.asn1.DEROctetString({hex:Lu})}},this.oid="2.5.29.14",_u!==void 0&&_u.kid!==void 0&&this.setKIDByParam(_u.kid)},fe$1(l$3.asn1.x509.SubjectKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityInfoAccess=function(_u){l$3.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,_u),this.setAccessDescriptionArray=function($u){for(var Bu=new Array,Ru=l$3.asn1,Lu=Ru.DERSequence,Ou=Ru.DERObjectIdentifier,Fu=Ru.x509.GeneralName,Nu=0;Nu<$u.length;Nu++){var Vu,Uu=$u[Nu];if(Uu.ocsp!==void 0)Vu=new Lu({array:[new Ou({oid:"1.3.6.1.5.5.7.48.1"}),new Fu({uri:Uu.ocsp})]});else{if(Uu.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Uu));Vu=new Lu({array:[new Ou({oid:"1.3.6.1.5.5.7.48.2"}),new Fu({uri:Uu.caissuer})]})}Bu.push(Vu)}this.asn1ExtnValue=new Lu({array:Bu})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",_u!==void 0&&_u.array!==void 0&&this.setAccessDescriptionArray(_u.array)},fe$1(l$3.asn1.x509.AuthorityInfoAccess,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectAltName=function(_u){l$3.asn1.x509.SubjectAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$1(l$3.asn1.x509.SubjectAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.IssuerAltName=function(_u){l$3.asn1.x509.IssuerAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$1(l$3.asn1.x509.IssuerAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectDirectoryAttributes=function(_u){l$3.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,_u);var $u=l$3.asn1,Bu=$u.DERSequence,Ru=$u.ASN1Util.newObject,Lu=$u.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Ou=[],Fu=0;Fu<this.params.array.length;Fu++){var Nu=this.params.array[Fu],Vu={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Nu.attr=="dateOfBirth")Vu.seq[0].oid=Lu(Nu.attr),Vu.seq[1].set[0]={gentime:Nu.str};else if(Nu.attr=="placeOfBirth")Vu.seq[0].oid=Lu(Nu.attr),Vu.seq[1].set[0]={utf8str:Nu.str};else if(Nu.attr=="gender")Vu.seq[0].oid=Lu(Nu.attr),Vu.seq[1].set[0]={prnstr:Nu.str};else if(Nu.attr=="countryOfCitizenship")Vu.seq[0].oid=Lu(Nu.attr),Vu.seq[1].set[0]={prnstr:Nu.str};else{if(Nu.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Nu.attr);Vu.seq[0].oid=Lu(Nu.attr),Vu.seq[1].set[0]={prnstr:Nu.str}}Ou.push(new Ru(Vu))}var Uu=new Bu({array:Ou});return this.asn1ExtnValue=Uu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.SubjectDirectoryAttributes,l$3.asn1.x509.Extension),l$3.asn1.x509.PrivateExtension=function(_u){l$3.asn1.x509.PrivateExtension.superclass.constructor.call(this,_u);var $u=l$3,Bu=$u.lang.String.isHex,Ru=$u.asn1,Lu=Ru.x509.OID.name2oid,Ou=Ru.ASN1Util.newObject;this.params=null,this.setByParam=function(Fu){this.oid=Lu(Fu.extname),this.params=Fu},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Fu=this.params.extn;if(typeof Fu=="string"&&Bu(Fu))return Fu;if(typeof Fu=="object")try{return Ou(Fu).getEncodedHex()}catch{}throw new Error("unsupported extn value")},_u!=null&&this.setByParam(_u)},fe$1(l$3.asn1.x509.PrivateExtension,l$3.asn1.x509.Extension),l$3.asn1.x509.CRL=function(_u){l$3.asn1.x509.CRL.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.DERSequence,Ru=$u.DERBitString,Lu=$u.x509,Ou=Lu.AlgorithmIdentifier,Fu=Lu.TBSCertList;this.params=void 0,this.setByParam=function(Nu){this.params=Nu},this.sign=function(){var Nu=new Fu(this.params).getEncodedHex(),Vu=new l$3.crypto.Signature({alg:this.params.sigalg});Vu.init(this.params.cakey),Vu.updateHex(Nu);var Uu=Vu.sign();this.params.sighex=Uu},this.getPEM=function(){return ae$1(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Nu=this.params;if(Nu.tbsobj==null&&(Nu.tbsobj=new Fu(Nu)),Nu.sighex==null&&Nu.cakey!=null&&this.sign(),Nu.sighex==null)throw new Error("sighex or cakey parameter not defined");var Vu=[];return Vu.push(Nu.tbsobj),Vu.push(new Ou({name:Nu.sigalg})),Vu.push(new Ru({hex:"00"+Nu.sighex})),new Bu({array:Vu}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.CRL,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertList=function(_u){l$3.asn1.x509.TBSCertList.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.DERInteger,Ru=$u.DERSequence,Lu=$u.DERTaggedObject;$u.DERObjectIdentifier;var Ou=$u.x509,Fu=Ou.AlgorithmIdentifier,Nu=Ou.Time,Vu=Ou.Extensions,Uu=Ou.X500Name;this.params=null,this.setByParam=function(Gu){this.params=Gu},this.getRevCertSequence=function(){for(var Gu=[],zu=this.params.revcert,Hu=0;Hu<zu.length;Hu++){var ju=[new Bu(zu[Hu].sn),new Nu(zu[Hu].date)];zu[Hu].ext!=null&&ju.push(new Vu(zu[Hu].ext)),Gu.push(new Ru({array:ju}))}return new Ru({array:Gu})},this.getEncodedHex=function(){var Gu=[],zu=this.params;if(zu.version!=null){var Hu=zu.version-1,ju=new Bu({int:Hu});Gu.push(ju)}if(Gu.push(new Fu({name:zu.sigalg})),Gu.push(new Uu(zu.issuer)),Gu.push(new Nu(zu.thisupdate)),zu.nextupdate!=null&&Gu.push(new Nu(zu.nextupdate)),zu.revcert!=null&&Gu.push(this.getRevCertSequence()),zu.ext!=null){var Qu=new Vu(zu.ext);Gu.push(new Lu({tag:"a0",explicit:!0,obj:Qu}))}return new Ru({array:Gu}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.TBSCertList,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLEntry=function(_u){l$3.asn1.x509.CRLEntry.superclass.constructor.call(this);var $u=l$3.asn1;this.setCertSerial=function(Bu){this.sn=new $u.DERInteger(Bu)},this.setRevocationDate=function(Bu){this.time=new $u.x509.Time(Bu)},this.getEncodedHex=function(){var Bu=new $u.DERSequence({array:[this.sn,this.time]});return this.TLV=Bu.getEncodedHex(),this.TLV},_u!==void 0&&(_u.time!==void 0&&this.setRevocationDate(_u.time),_u.sn!==void 0&&this.setCertSerial(_u.sn))},fe$1(l$3.asn1.x509.CRLEntry,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLNumber=function(_u){l$3.asn1.x509.CRLNumber.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.CRLNumber,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLReason=function(_u){l$3.asn1.x509.CRLReason.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.CRLReason,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNonce=function(_u){l$3.asn1.x509.OCSPNonce.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.OCSPNonce,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNoCheck=function(_u){l$3.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.OCSPNoCheck,l$3.asn1.x509.Extension),l$3.asn1.x509.AdobeTimeStamp=function(_u){l$3.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,_u);var $u=l$3.asn1,Bu=$u.DERInteger,Ru=$u.DERBoolean,Lu=$u.DERSequence,Ou=$u.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Fu=this.params,Nu=[new Bu(1)];return Nu.push(new Ou({uri:Fu.uri})),Fu.reqauth!=null&&Nu.push(new Ru(Fu.reqauth)),this.asn1ExtnValue=new Lu({array:Nu}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.AdobeTimeStamp,l$3.asn1.x509.Extension),l$3.asn1.x509.X500Name=function(_u){l$3.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$3.asn1,Bu=$u.x509,Ru=Bu.RDN;this.setByString=function(Lu,Ou){Ou!==void 0&&(this.sRule=Ou);var Fu=Lu.split("/");Fu.shift();for(var Nu=[],Vu=0;Vu<Fu.length;Vu++)if(Fu[Vu].match(/^[^=]+=.+$/))Nu.push(Fu[Vu]);else{var Uu=Nu.length-1;Nu[Uu]=Nu[Uu]+"/"+Fu[Vu]}for(Vu=0;Vu<Nu.length;Vu++)this.asn1Array.push(new Ru({str:Nu[Vu],rule:this.sRule}))},this.setByLdapString=function(Lu,Ou){Ou!==void 0&&(this.sRule=Ou);var Fu=Bu.X500Name.ldapToCompat(Lu);this.setByString(Fu,Ou)},this.setByObject=function(Lu,Ou){for(var Fu in Ou!==void 0&&(this.sRule=Ou),Lu)if(Lu.hasOwnProperty(Fu)){var Nu=new Ru({str:Fu+"="+Lu[Fu],rule:this.sRule});this.asn1Array?this.asn1Array.push(Nu):this.asn1Array=[Nu]}},this.setByParam=function(Lu){var Ou;Lu.rule!==void 0&&(this.sRule=Lu.rule),Lu.array!==void 0?this.paramArray=Lu.array:Lu.str!==void 0?this.setByString(Lu.str):Lu.ldapstr!==void 0?this.setByLdapString(Lu.ldapstr):Lu.hex!==void 0?this.hTLV=Lu.hex:Lu.certissuer!==void 0?((Ou=new Be$1).readCertPEM(Lu.certissuer),this.hTLV=Ou.getIssuerHex()):Lu.certsubject!==void 0?((Ou=new Be$1).readCertPEM(Lu.certsubject),this.hTLV=Ou.getSubjectHex()):typeof Lu=="object"&&Lu.certsubject===void 0&&Lu.certissuer===void 0&&this.setByObject(Lu)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Lu=0;Lu<this.paramArray.length;Lu++){var Ou={array:this.paramArray[Lu]};this.sRule!="utf8"&&(Ou.rule=this.sRule);var Fu=new Ru(Ou);this.asn1Array.push(Fu)}var Nu=new $u.DERSequence({array:this.asn1Array});return this.hTLV=Nu.getEncodedHex(),this.hTLV},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.X500Name,l$3.asn1.ASN1Object),l$3.asn1.x509.X500Name.compatToLDAP=function(_u){if(_u.substr(0,1)!=="/")throw"malformed input";var $u=(_u=_u.substr(1)).split("/");return $u.reverse(),($u=$u.map(function(Bu){return Bu.replace(/,/,"\\,")})).join(",")},l$3.asn1.x509.X500Name.onelineToLDAP=function(_u){return l$3.asn1.x509.X500Name.compatToLDAP(_u)},l$3.asn1.x509.X500Name.ldapToCompat=function(_u){for(var $u=_u.split(","),Bu=!1,Ru=[],Lu=0;$u.length>0;Lu++){var Ou=$u.shift();if(Bu===!0){var Fu=(Ru.pop()+","+Ou).replace(/\\,/g,",");Ru.push(Fu),Bu=!1}else Ru.push(Ou);Ou.substr(-1,1)==="\\"&&(Bu=!0)}return(Ru=Ru.map(function(Nu){return Nu.replace("/","\\/")})).reverse(),"/"+Ru.join("/")},l$3.asn1.x509.X500Name.ldapToOneline=function(_u){return l$3.asn1.x509.X500Name.ldapToCompat(_u)},l$3.asn1.x509.RDN=function(_u){l$3.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$3.asn1.x509.AttributeTypeAndValue;this.setByParam=function(Bu){Bu.rule!==void 0&&(this.sRule=Bu.rule),Bu.str!==void 0&&this.addByMultiValuedString(Bu.str),Bu.array!==void 0&&(this.paramArray=Bu.array)},this.addByString=function(Bu){this.asn1Array.push(new l$3.asn1.x509.AttributeTypeAndValue({str:Bu,rule:this.sRule}))},this.addByMultiValuedString=function(Bu){for(var Ru=l$3.asn1.x509.RDN.parseString(Bu),Lu=0;Lu<Ru.length;Lu++)this.addByString(Ru[Lu])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Bu=0;Bu<this.paramArray.length;Bu++){var Ru=this.paramArray[Bu];Ru.rule!==void 0&&this.sRule!="utf8"&&(Ru.rule=this.sRule);var Lu=new $u(Ru);this.asn1Array.push(Lu)}var Ou=new l$3.asn1.DERSet({array:this.asn1Array});return this.TLV=Ou.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.RDN,l$3.asn1.ASN1Object),l$3.asn1.x509.RDN.parseString=function(_u){for(var $u=_u.split(/\+/),Bu=!1,Ru=[],Lu=0;$u.length>0;Lu++){var Ou=$u.shift();if(Bu===!0){var Fu=(Ru.pop()+"+"+Ou).replace(/\\\+/g,"+");Ru.push(Fu),Bu=!1}else Ru.push(Ou);Ou.substr(-1,1)==="\\"&&(Bu=!0)}var Nu=!1,Vu=[];for(Lu=0;Ru.length>0;Lu++){if(Ou=Ru.shift(),Nu===!0){var Uu=Vu.pop();Ou.match(/"$/)?(Fu=(Uu+"+"+Ou).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Vu.push(Fu),Nu=!1):Vu.push(Uu+"+"+Ou)}else Vu.push(Ou);Ou.match(/^[^=]+="/)&&(Nu=!0)}return Vu},l$3.asn1.x509.AttributeTypeAndValue=function(_u){l$3.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var $u=l$3,Bu=$u.asn1,Ru=Bu.DERSequence,Lu=Bu.DERUTF8String,Ou=Bu.DERPrintableString,Fu=Bu.DERTeletexString,Nu=Bu.DERIA5String,Vu=Bu.DERVisibleString,Uu=Bu.DERBMPString,Gu=$u.lang.String.isMail,zu=$u.lang.String.isPrintable;this.setByParam=function(Hu){if(Hu.rule!==void 0&&(this.sRule=Hu.rule),Hu.ds!==void 0&&(this.dsType=Hu.ds),Hu.value===void 0&&Hu.str!==void 0){var ju=Hu.str.match(/^([^=]+)=(.+)$/);if(!ju)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=ju[1],this.sValue=ju[2]}else this.sType=Hu.type,this.sValue=Hu.value},this.setByString=function(Hu,ju){ju!==void 0&&(this.sRule=ju);var Qu=Hu.match(/^([^=]+)=(.+)$/);if(!Qu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Qu[1],Qu[2])},this._getDsType=function(){var Hu=this.sType,ju=this.sValue,Qu=this.sRule;return Qu==="prn"?Hu=="CN"&&Gu(ju)?"ia5":zu(ju)?"prn":"utf8":Qu==="utf8"?Hu=="CN"&&Gu(ju)?"ia5":Hu=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(Hu,ju,Qu){Qu!==void 0&&(this.sRule=Qu),this.sType=Hu,this.sValue=ju},this.getValueObj=function(Hu,ju){if(Hu=="utf8")return new Lu({str:ju});if(Hu=="prn")return new Ou({str:ju});if(Hu=="tel")return new Fu({str:ju});if(Hu=="ia5")return new Nu({str:ju});if(Hu=="vis")return new Vu({str:ju});if(Hu=="bmp")return new Uu({str:ju});throw new Error("unsupported directory string type: type="+Hu+" value="+ju)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var Hu=l$3.asn1.x509.OID.atype2obj(this.sType),ju=this.getValueObj(this.dsType,this.sValue),Qu=new Ru({array:[Hu,ju]});return this.TLV=Qu.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.AttributeTypeAndValue,l$3.asn1.ASN1Object),l$3.asn1.x509.SubjectPublicKeyInfo=function(_u){l$3.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var $u=l$3,Bu=$u.asn1,Ru=Bu.DERInteger,Lu=Bu.DERBitString,Ou=Bu.DERObjectIdentifier,Fu=Bu.DERSequence,Nu=Bu.ASN1Util.newObject,Vu=Bu.x509.AlgorithmIdentifier,Uu=$u.crypto;Uu.ECDSA,Uu.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Fu({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Gu=this.getASN1Object();return this.hTLV=Gu.getEncodedHex(),this.hTLV},this.setPubKey=function(Gu){try{if(Gu instanceof X$1){var zu=Nu({seq:[{int:{bigint:Gu.n}},{int:{int:Gu.e}}]}).getEncodedHex();this.asn1AlgId=new Vu({name:"rsaEncryption"}),this.asn1SubjPKey=new Lu({hex:"00"+zu})}}catch{}try{if(Gu instanceof l$3.crypto.ECDSA){var Hu=new Ou({name:Gu.curveName});this.asn1AlgId=new Vu({name:"ecPublicKey",asn1params:Hu}),this.asn1SubjPKey=new Lu({hex:"00"+Gu.pubKeyHex})}}catch{}try{if(Gu instanceof l$3.crypto.DSA){Hu=new Nu({seq:[{int:{bigint:Gu.p}},{int:{bigint:Gu.q}},{int:{bigint:Gu.g}}]}),this.asn1AlgId=new Vu({name:"dsa",asn1params:Hu});var ju=new Ru({bigint:Gu.y});this.asn1SubjPKey=new Lu({hex:"00"+ju.getEncodedHex()})}}catch{}},_u!==void 0&&this.setPubKey(_u)},fe$1(l$3.asn1.x509.SubjectPublicKeyInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.Time=function(_u){l$3.asn1.x509.Time.superclass.constructor.call(this);var $u=l$3.asn1,Bu=$u.DERUTCTime,Ru=$u.DERGeneralizedTime;this.setTimeParams=function(Lu){this.timeParams=Lu},this.getEncodedHex=function(){var Lu=null;return Lu=this.timeParams!=null?this.type=="utc"?new Bu(this.timeParams):new Ru(this.timeParams):this.type=="utc"?new Bu:new Ru,this.TLV=Lu.getEncodedHex(),this.TLV},this.type="utc",_u!==void 0&&(_u.type!==void 0?this.type=_u.type:_u.str!==void 0&&(_u.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),_u.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=_u)},fe$1(l$3.asn1.x509.Time,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier=function(_u){l$3.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var $u=l$3.asn1,Bu=$u.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Lu=null;for(var Ou in Bu)Ou===this.nameAlg&&(Lu=Bu[Ou]);if(Lu!==null)return this.hTLV=Lu,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=$u.x509.OID.name2obj(this.nameAlg));var Fu=[this.asn1Alg];this.asn1Params!==null&&Fu.push(this.asn1Params);var Nu=new $u.DERSequence({array:Fu});return this.hTLV=Nu.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.name!==void 0&&(this.nameAlg=_u.name),_u.asn1params!==void 0&&(this.asn1Params=_u.asn1params),_u.paramempty!==void 0&&(this.paramEmpty=_u.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Ru=this.nameAlg.toLowerCase();Ru.substr(-7,7)!=="withdsa"&&Ru.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new $u.DERNull)}},fe$1(l$3.asn1.x509.AlgorithmIdentifier,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},l$3.asn1.x509.GeneralName=function(_u){l$3.asn1.x509.GeneralName.superclass.constructor.call(this);var $u={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},Bu=l$3.asn1;Bu.DERSequence;var Ru=Bu.DEROctetString,Lu=Bu.DERIA5String,Ou=Bu.DERTaggedObject,Fu=Bu.ASN1Object,Nu=Bu.x509.X500Name,Vu=le;this.explicit=!1,this.setByParam=function(Uu){var Gu=null;if(Uu!==void 0){if(Uu.rfc822!==void 0&&(this.type="rfc822",Gu=new Lu({str:Uu[this.type]})),Uu.dns!==void 0&&(this.type="dns",Gu=new Lu({str:Uu[this.type]})),Uu.uri!==void 0&&(this.type="uri",Gu=new Lu({str:Uu[this.type]})),Uu.dn!==void 0&&(this.type="dn",this.explicit=!0,Gu=typeof Uu.dn=="string"?new Nu({str:Uu.dn}):Uu.dn instanceof l$3.asn1.x509.X500Name?Uu.dn:new Nu(Uu.dn)),Uu.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Gu=new Nu({ldapstr:Uu.ldapdn})),Uu.certissuer!==void 0){this.type="dn",this.explicit=!0;var zu=null;if((ju=Uu.certissuer).match(/^[0-9A-Fa-f]+$/),ju.indexOf("-----BEGIN ")!=-1&&(zu=Vu(ju)),zu==null)throw"certissuer param not cert";(Qu=new Be$1).hex=zu;var Hu=Qu.getIssuerHex();(Gu=new Fu).hTLV=Hu}if(Uu.certsubj!==void 0){this.type="dn",this.explicit=!0;var ju,Qu;if(zu=null,(ju=Uu.certsubj).match(/^[0-9A-Fa-f]+$/),ju.indexOf("-----BEGIN ")!=-1&&(zu=Vu(ju)),zu==null)throw"certsubj param not cert";(Qu=new Be$1).hex=zu,Hu=Qu.getSubjectHex(),(Gu=new Fu).hTLV=Hu}if(Uu.ip!==void 0){this.type="ip",this.explicit=!1;var Xu,Ku=Uu.ip,Wu="malformed IP address";if(Ku.match(/^[0-9.]+[.][0-9.]+$/)){if((Xu=function(qu){qu=(qu=(qu=qu.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return qu.split(/,/).map(function(Yu,Zu,_h){var ep=parseInt(Yu);if(ep<0||255<ep)throw"integer not in range 0-255";return("00"+ep.toString(16)).slice(-2)}).join("")}catch(Yu){throw"malformed integer array string: "+Yu}}("["+Ku.split(".").join(",")+"]")).length!==8)throw Wu}else if(Ku.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))Xu=function(qu){var Yu="malformed IPv6 address";if(!qu.match(/^[0-9A-Fa-f:]+$/))throw Yu;var Zu=(qu=qu.toLowerCase()).split(":").length-1;if(Zu<2)throw Yu;var _h=":".repeat(7-Zu+2),ep=(qu=qu.replace("::",_h)).split(":");if(ep.length!=8)throw Yu;for(var ip=0;ip<8;ip++)ep[ip]=("0000"+ep[ip]).slice(-4);return ep.join("")}(Ku);else{if(!Ku.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Wu;Xu=Ku}Gu=new Ru({hex:Xu})}if(this.type==null)throw"unsupported type in params="+Uu;this.asn1Obj=new Ou({explicit:this.explicit,tag:$u[this.type],obj:Gu})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.GeneralName,l$3.asn1.ASN1Object),l$3.asn1.x509.GeneralNames=function(_u){l$3.asn1.x509.GeneralNames.superclass.constructor.call(this);var $u=l$3.asn1;this.setByParamArray=function(Bu){for(var Ru=0;Ru<Bu.length;Ru++){var Lu=new $u.x509.GeneralName(Bu[Ru]);this.asn1Array.push(Lu)}},this.getEncodedHex=function(){return new $u.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,_u!==void 0&&this.setByParamArray(_u)},fe$1(l$3.asn1.x509.GeneralNames,l$3.asn1.ASN1Object),l$3.asn1.x509.OID=new function(_u){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];if(this.name2oidList[$u]===void 0)throw"Name of ObjectIdentifier not defined: "+$u;var Bu=this.name2oidList[$u],Ru=new l$3.asn1.DERObjectIdentifier({oid:Bu});return this.objCache[$u]=Ru,Ru},this.atype2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];var Bu;if($u.match(/^\d+\.\d+\.[0-9.]+$/))Bu=$u;else if(this.atype2oidList[$u]!==void 0)Bu=this.atype2oidList[$u];else{if(this.name2oidList[$u]===void 0)throw"AttributeType name undefined: "+$u;Bu=this.name2oidList[$u]}var Ru=new l$3.asn1.DERObjectIdentifier({oid:Bu});return this.objCache[$u]=Ru,Ru}},l$3.asn1.x509.OID.oid2name=function(_u){var $u=l$3.asn1.x509.OID.name2oidList;for(var Bu in $u)if($u[Bu]==_u)return Bu;return""},l$3.asn1.x509.OID.oid2atype=function(_u){var $u=l$3.asn1.x509.OID.atype2oidList;for(var Bu in $u)if($u[Bu]==_u)return Bu;return _u},l$3.asn1.x509.OID.name2oid=function(_u){if(_u.match(/^[0-9.]+$/))return _u;var $u=l$3.asn1.x509.OID.name2oidList;return $u[_u]===void 0?"":$u[_u]},l$3.asn1.x509.X509Util={},l$3.asn1.x509.X509Util.newCertPEM=function(_u){var $u=l$3.asn1.x509;return $u.TBSCertificate,new $u.Certificate(_u).getPEM()},X$1.getPosArrayOfChildrenFromHex=function(_u){return Me.getChildIdx(_u,0)},X$1.getHexValueArrayOfChildrenFromHex=function(_u){var $u,Bu=Me.getV,Ru=Bu(_u,($u=X$1.getPosArrayOfChildrenFromHex(_u))[0]),Lu=Bu(_u,$u[1]),Ou=Bu(_u,$u[2]),Fu=Bu(_u,$u[3]),Nu=Bu(_u,$u[4]),Vu=Bu(_u,$u[5]),Uu=Bu(_u,$u[6]),Gu=Bu(_u,$u[7]),zu=Bu(_u,$u[8]);return($u=new Array).push(Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu),$u},X$1.prototype.readPrivateKeyFromPEMString=function(_u){var $u=le(_u),Bu=X$1.getHexValueArrayOfChildrenFromHex($u);this.setPrivateEx(Bu[1],Bu[2],Bu[3],Bu[4],Bu[5],Bu[6],Bu[7],Bu[8])},X$1.prototype.readPKCS5PrvKeyHex=function(_u){var $u=X$1.getHexValueArrayOfChildrenFromHex(_u);this.setPrivateEx($u[1],$u[2],$u[3],$u[4],$u[5],$u[6],$u[7],$u[8])},X$1.prototype.readPKCS8PrvKeyHex=function(_u){var $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu=Me,Gu=Uu.getVbyListEx;if(Uu.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");try{$u=Gu(_u,0,[2,0,1],"02"),Bu=Gu(_u,0,[2,0,2],"02"),Ru=Gu(_u,0,[2,0,3],"02"),Lu=Gu(_u,0,[2,0,4],"02"),Ou=Gu(_u,0,[2,0,5],"02"),Fu=Gu(_u,0,[2,0,6],"02"),Nu=Gu(_u,0,[2,0,7],"02"),Vu=Gu(_u,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx($u,Bu,Ru,Lu,Ou,Fu,Nu,Vu)},X$1.prototype.readPKCS5PubKeyHex=function(_u){var $u=Me,Bu=$u.getV;if($u.isASN1HEX(_u)===!1)throw new Error("keyHex is not ASN.1 hex string");var Ru=$u.getChildIdx(_u,0);if(Ru.length!==2||_u.substr(Ru[0],2)!=="02"||_u.substr(Ru[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Lu=Bu(_u,Ru[0]),Ou=Bu(_u,Ru[1]);this.setPublic(Lu,Ou)},X$1.prototype.readPKCS8PubKeyHex=function(_u){var $u=Me;if($u.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");if($u.getTLVbyListEx(_u,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var Bu=$u.getTLVbyListEx(_u,0,[1,0]);this.readPKCS5PubKeyHex(Bu)},X$1.prototype.readCertPubKeyHex=function(_u,$u){var Bu,Ru;(Bu=new Be$1).readCertHex(_u),Ru=Bu.getPublicKeyHex(),this.readPKCS8PubKeyHex(Ru)},X$1.prototype.sign=function(_u,$u){var Bu,Ru=(Bu=_u,l$3.crypto.Util.hashString(Bu,$u));return this.signWithMessageHash(Ru,$u)},X$1.prototype.signWithMessageHash=function(_u,$u){var Bu=G$1(l$3.crypto.Util.getPaddedDigestInfoHex(_u,$u,this.n.bitLength()),16);return Ie(this.doPrivate(Bu).toString(16),this.n.bitLength())},X$1.prototype.signPSS=function(_u,$u,Bu){var Ru,Lu=(Ru=oe$1(_u),l$3.crypto.Util.hashHex(Ru,$u));return Bu===void 0&&(Bu=-1),this.signWithMessageHashPSS(Lu,$u,Bu)},X$1.prototype.signWithMessageHashPSS=function(_u,$u,Bu){var Ru,Lu=re$1(_u),Ou=Lu.length,Fu=this.n.bitLength()-1,Nu=Math.ceil(Fu/8),Vu=function(Ku){return l$3.crypto.Util.hashHex(Ku,$u)};if(Bu===-1||Bu===void 0)Bu=Ou;else if(Bu===-2)Bu=Nu-Ou-2;else if(Bu<-2)throw new Error("invalid salt length");if(Nu<Ou+Bu+2)throw new Error("data too long");var Uu="";Bu>0&&(Uu=new Array(Bu),new j$1().nextBytes(Uu),Uu=String.fromCharCode.apply(String,Uu));var Gu=re$1(Vu(oe$1("\0\0\0\0\0\0\0\0"+Lu+Uu))),zu=[];for(Ru=0;Ru<Nu-Bu-Ou-2;Ru+=1)zu[Ru]=0;var Hu=String.fromCharCode.apply(String,zu)+""+Uu,ju=Se(Gu,Hu.length,Vu),Qu=[];for(Ru=0;Ru<Hu.length;Ru+=1)Qu[Ru]=Hu.charCodeAt(Ru)^ju.charCodeAt(Ru);var Xu=65280>>8*Nu-Fu&255;for(Qu[0]&=~Xu,Ru=0;Ru<Ou;Ru++)Qu.push(Gu.charCodeAt(Ru));return Qu.push(188),Ie(this.doPrivate(new c$2(Qu)).toString(16),this.n.bitLength())},X$1.prototype.verify=function(_u,$u){if(($u=$u.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var Bu=G$1($u,16),Ru=this.n.bitLength();if(Bu.bitLength()>Ru)return!1;var Lu=this.doPublic(Bu).toString(16);if(Lu.length+3!=Ru/4)return!1;var Ou=Ce$1(Lu.replace(/^1f+00/,""));if(Ou.length==0)return!1;var Fu,Nu=Ou[0];return Ou[1]==(Fu=_u,l$3.crypto.Util.hashString(Fu,Nu))},X$1.prototype.verifyWithMessageHash=function(_u,$u){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Bu=G$1($u,16);if(Bu.bitLength()>this.n.bitLength())return 0;var Ru=Ce$1(this.doPublic(Bu).toString(16).replace(/^1f+00/,""));return Ru.length!=0&&(Ru[0],Ru[1]==_u)},X$1.prototype.verifyPSS=function(_u,$u,Bu,Ru){var Lu=function(Ou){return l$3.crypto.Util.hashHex(Ou,Bu)}(oe$1(_u));return Ru===void 0&&(Ru=-1),this.verifyWithMessageHashPSS(Lu,$u,Bu,Ru)},X$1.prototype.verifyWithMessageHashPSS=function(_u,$u,Bu,Ru){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Lu,Ou=new c$2($u,16),Fu=function(qu){return l$3.crypto.Util.hashHex(qu,Bu)},Nu=re$1(_u),Vu=Nu.length,Uu=this.n.bitLength()-1,Gu=Math.ceil(Uu/8);if(Ru===-1||Ru===void 0)Ru=Vu;else if(Ru===-2)Ru=Gu-Vu-2;else if(Ru<-2)throw new Error("invalid salt length");if(Gu<Vu+Ru+2)throw new Error("data too long");var zu=this.doPublic(Ou).toByteArray();for(Lu=0;Lu<zu.length;Lu+=1)zu[Lu]&=255;for(;zu.length<Gu;)zu.unshift(0);if(zu[Gu-1]!==188)throw new Error("encoded message does not end in 0xbc");var Hu=(zu=String.fromCharCode.apply(String,zu)).substr(0,Gu-Vu-1),ju=zu.substr(Hu.length,Vu),Qu=65280>>8*Gu-Uu&255;if((Hu.charCodeAt(0)&Qu)!=0)throw new Error("bits beyond keysize not zero");var Xu=Se(ju,Hu.length,Fu),Ku=[];for(Lu=0;Lu<Hu.length;Lu+=1)Ku[Lu]=Hu.charCodeAt(Lu)^Xu.charCodeAt(Lu);Ku[0]&=~Qu;var Wu=Gu-Vu-Ru-2;for(Lu=0;Lu<Wu;Lu+=1)if(Ku[Lu]!==0)throw new Error("leftmost octets not zero");if(Ku[Wu]!==1)throw new Error("0x01 marker not found");return ju===re$1(Fu(oe$1("\0\0\0\0\0\0\0\0"+Nu+String.fromCharCode.apply(String,Ku.slice(-Ru)))))},X$1.SALT_LEN_HLEN=-1,X$1.SALT_LEN_MAX=-2,X$1.SALT_LEN_RECOVER=-2,Be$1.hex2dn=function(_u,$u){$u===void 0&&($u=0);var Bu=new Be$1;return Me.getTLV(_u,$u),Bu.getX500Name(_u).str},Be$1.hex2rdn=function(_u,$u){if($u===void 0&&($u=0),_u.substr($u,2)!=="31")throw new Error("malformed RDN");for(var Bu=new Array,Ru=Me.getChildIdx(_u,$u),Lu=0;Lu<Ru.length;Lu++)Bu.push(Be$1.hex2attrTypeValue(_u,Ru[Lu]));return(Bu=Bu.map(function(Ou){return Ou.replace("+","\\+")})).join("+")},Be$1.hex2attrTypeValue=function(_u,$u){var Bu=Me,Ru=Bu.getV;if($u===void 0&&($u=0),_u.substr($u,2)!=="30")throw new Error("malformed attribute type and value");var Lu=Bu.getChildIdx(_u,$u);Lu.length!==2||_u.substr(Lu[0],2);var Ou=Ru(_u,Lu[0]),Fu=l$3.asn1.ASN1Util.oidHexToInt(Ou);return l$3.asn1.x509.OID.oid2atype(Fu)+"="+re$1(Ru(_u,Lu[1]))},Be$1.getPublicKeyFromCertHex=function(_u){var $u=new Be$1;return $u.readCertHex(_u),$u.getPublicKey()},Be$1.getPublicKeyFromCertPEM=function(_u){var $u=new Be$1;return $u.readCertPEM(_u),$u.getPublicKey()},Be$1.getPublicKeyInfoPropOfCertPEM=function(_u){var $u,Bu,Ru=Me.getVbyList,Lu={};return Lu.algparam=null,($u=new Be$1).readCertPEM(_u),Bu=$u.getPublicKeyHex(),Lu.keyhex=Ru(Bu,0,[1],"03").substr(2),Lu.algoid=Ru(Bu,0,[0,0],"06"),Lu.algoid==="2a8648ce3d0201"&&(Lu.algparam=Ru(Bu,0,[0,1],"06")),Lu},Be$1.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Pe,Re=[(Pe=new Be$1,Pe.readCertPEM(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=113,Ru=126,Lu=0,Ou="";return arguments[Lu].split(Ou).map(function(Fu){return Fu.charCodeAt(Lu)>Ru?Fu:String.fromCharCode((Fu.charCodeAt(Lu)+Bu)%Ru)}).join(Ou)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Pe)];function ke(_u,$u){var Bu=_u.getIssuerHex();if(Bu===_u.getSubjectHex())return _u.verifySignature(_u.getPublicKey());var Ru=function(Lu,Ou){for(var Fu=0,Nu=Ou;Fu<Nu.length;Fu++){var Vu=Nu[Fu];if(Vu.getSubjectHex()===Lu)return Vu}}(Bu,$u);return!!Ru&&_u.verifySignature(Ru.getPublicKey())!==!1&&ke(Ru,$u)}function De(_u){return _u.getIssuerHex()!==_u.getSubjectHex()&&ke(_u,Re)}(function(_u){var $u=new Be$1;typeof _u=="string"?$u.readCertPEM(_u):$u.readCertHex(_u.hex),De($u),Re.push($u)})(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=113,Ru=126,Lu=0,Ou="";return arguments[Lu].split(Ou).map(function(Fu){return Fu.charCodeAt(Lu)>Ru?Fu:String.fromCharCode((Fu.charCodeAt(Lu)+Bu)%Ru)}).join(Ou)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var Le$1,Oe$1=(Le$1="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(Le$1,">$"):Symbol(Le$1));function Ne(_u){return _u[Oe$1]||(_u[Oe$1]={}),_u[Oe$1]}var Fe=function(){function _u(){}return _u.prototype.hasListener=function($u){var Bu=Ne(this);return Bu&&Bu[$u]&&Bu[$u].length>0},_u.prototype.on=function($u,Bu,Ru){var Lu=this,Ou=Ne(this);return Ou[$u]||(Ou[$u]=[]),Ou[$u].push([Bu,Ru||!1]),function(){return Lu.off($u,Bu)}},_u.prototype.once=function($u,Bu){return this.on($u,Bu,!0)},_u.prototype.off=function($u,Bu){if($u!==void 0){var Ru,Lu=Ne(this);if(Lu[$u]||(Lu[$u]=[]),Bu!==void 0){for(var Ou=0;Ou<Lu[$u].length&&Lu[$u][Ou][0]!==Bu;Ou++);Ou<Lu[$u].length&&Lu[$u].splice(Ou,1)}else Lu[$u].length=0}else(Ru=this)[Oe$1]||delete Ru[Oe$1]},_u.prototype.emit=function($u){for(var Bu=[],Ru=1;Ru<arguments.length;Ru++)Bu[Ru-1]=arguments[Ru];for(var Lu=!1,Ou=Ne(this),Fu=Ou[$u]||[],Nu=0,Vu=Fu.slice();Nu<Vu.length;Nu++){var Uu=Vu[Nu],Gu=Uu[0],zu=Uu[1],Hu=zu!==void 0&&zu,ju=Gu.apply(void 0,Bu);Hu&&this.off($u,Gu),ju===!1&&(Lu=!0)}return Lu},_u}();function Qe$1(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u]}var Ve=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),_e=typeof performance!="undefined"?function(){return Ve+performance.now()}:function(){return Date.now()};function He$1(_u){Object.freeze(_u);var $u=typeof _u=="function",Bu=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(_u).forEach(function(Ru){!Bu.call(_u,Ru)||$u&&(Ru==="caller"||Ru==="callee"||Ru==="arguments")||_u[Ru]===null||typeof _u[Ru]!="object"&&typeof _u[Ru]!="function"||Object.isFrozen(_u[Ru])||He$1(_u[Ru])}),_u}var qe=/^([^.]+)(\.([^.]+))*$/;function ze$1(_u){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(_u)}function Ke(_u,$u){return qe.test(_u)&&qe.test($u)&&function(Bu,Ru){if(Bu==="*")return!0;var Lu=Bu.split(".").reverse(),Ou=Ru.split(".").reverse();if(Lu.length<=1)return Bu===Ru;for(var Fu=0;Fu<Lu.length;Fu++)if(Lu[Fu]!==Ou[Fu])return!1;return!0}(_u,$u)}var Ue=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],je=He$1(JSON.parse(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=113,Ru=126,Lu=0,Ou="";return arguments[Lu].split(Ou).map(function(Fu){return Fu.charCodeAt(Lu)>Ru?Fu:String.fromCharCode((Fu.charCodeAt(Lu)+Bu)%Ru)}).join(Ou)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/pnyp{|qr;vr/j"))),Ge$1=function(_u){function $u(Bu,Ru,Lu){return _u.call(this,"[NETWORK]: request proxy error(type: ".concat(Ru,", reason: ").concat(Lu,"): ").concat(Bu))||this}return t$3.__extends($u,_u),$u}(Error),We$1=function(_u){function $u(Bu,Ru,Lu){var Ou=_u.call(this,"[NETWORK]: response error(type: ".concat(Ru,", status: ").concat(Lu,"): ").concat(Bu))||this;return Ou.httpStatus=Lu,Ou}return t$3.__extends($u,_u),$u}(Error);(function(_u){function $u(Bu,Ru){return _u.call(this,"[NETWORK]: request abort(type: ".concat(Ru,"): ").concat(Bu))||this}t$3.__extends($u,_u)})(Error);var Xe$1=function(_u){function $u(Bu,Ru,Lu){return _u.call(this,"[NETWORK]: request timeout(type: ".concat(Ru,", timeout: ").concat(Lu,"ms): ").concat(Bu))||this}return t$3.__extends($u,_u),$u}(Error),Ye$1=function(_u){function $u(Bu,Ru,Lu){return _u.call(this,"[NETWORK]: request forbidden(type: ".concat(Ru,", reason: ").concat(Lu,"): ").concat(Bu))||this}return t$3.__extends($u,_u),$u}(Error);function Ze(_u){for(var $u=0,Bu=Ue;$u<Bu.length;$u++){var Ru=Bu[$u],Lu=_u.match(Ru);if(Lu)return"jsonp_"+Lu[1]}return null}function Je$1(_u){return Ze(_u)!==null}function $e(_u){return Ue.reduce(function($u,Bu){return $u.replace(Bu,"")},_u)}function et(_u){if(/^blob\:/i.test(_u))return"blob:";if(/^data\:/i.test(_u))return"data:";var $u=_u.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/i);return $u?$u[2]:location.hostname}var tt=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$3.__extends($u,_u),$u}(Fe);function it$1(_u,$u,Bu,Ru,Lu){$u===void 0&&($u={}),Bu===void 0&&(Bu=Qe$1),Ru===void 0&&(Ru=Qe$1),Lu===void 0&&(Lu=Qe$1);var Ou=_e(),Fu=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Nu){return/^https\:/.test(location.href)&&/^http\:/.test(Nu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Nu,"'. This request was automatically upgraded to HTTPS")),Nu.replace(/^http\:/,"https:")):Nu}).catch(function(Nu){var Vu,Uu=Ze(_u)?"Script":"XMLHttpRequest",Gu=new Ge$1(Fu,Uu,Nu&&Nu.message?String(Nu.message):String(Nu));return(Vu=$u.networkSubscribe)===null||Vu===void 0||Vu.emit("network",_u,Uu,"proxy-error",Gu.message),Promise.reject(Gu)}).then(function(Nu){return new Promise(function(Vu,Uu){var Gu,zu=$u.allowHosts?je.concat($u.allowHosts):je.slice(),Hu=et(Nu),ju=Ze(Nu);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je.filter(function(_f){return Ke(_f,location.hostname)}).length===0&&!ze$1(Hu)&&zu.filter(function(_f){return Ke(_f,Hu)}).length===0){var Qu=ju?"Script":"XMLHttpRequest",Xu=new Ye$1(Nu,Qu,"request host(".concat(Hu,") is not allowed"));return Ru(Xu),Uu(Xu),void((Gu=$u.networkSubscribe)===null||Gu===void 0||Gu.emit("network",Nu,Qu,"forbidden",Xu.message))}if(ju){var Ku=window,Wu=null,qu=!1,Yu=document.createElement("script");Ku[ju]=function(_f){var np,tp,rp=_e(),op=rp-Ou;if(delete Ku[ju],Yu.parentNode&&Yu.parentNode.removeChild(Yu),Wu!==null&&(window.clearTimeout(Wu),Wu=null),qu!==!0){if(_f.indexOf("data:")!==0){var lp=new We$1(Nu,"Script",500);return Ru(lp),Uu(lp),void((np=$u.networkSubscribe)===null||np===void 0||np.emit("network",Nu,"Script","error",lp.message))}var up=_f.split(","),cp=(up[0].match(/:(.*?);/)||[])[1],Ap=up[1];if($u.responseType==="arraybuffer"||$u.responseType==="blob"){for(var yp=atob(up[1]),Ip=yp.length,Ep=new Uint8Array(Ip),Vp=0;Vp<Ip;Vp++)Ep[Vp]=yp.charCodeAt(Vp);Ap=$u.responseType==="arraybuffer"?Ep.buffer:new Blob([Ep],{type:cp})}var $p={body:Ap,meta:{origin:Fu,source:Nu,requestTime:Ou,responseTime:rp,costs:op,headers:{}}};Bu($p),Vu($p),(tp=$u.networkSubscribe)===null||tp===void 0||tp.emit("network",Nu,"Script","ok",JSON.stringify($p.meta)),qu=!0}},Yu.src=Nu,document.body.appendChild(Yu),typeof $u.timeout=="number"&&(Wu=window.setTimeout(function(){var _f;if(Wu=null,qu!==!0){qu=!0;var np=new Xe$1(Nu,"Script",$u.timeout||NaN);Ru(np),Uu(np),(_f=$u.networkSubscribe)===null||_f===void 0||_f.emit("network",Nu,"Script","timeout",np.message)}},$u.timeout))}else{var Zu=!1,_h=new XMLHttpRequest,ep=function(){_h&&(_h.removeEventListener("timeout",ip,!1),_h.removeEventListener("progress",ap,!1),_h.removeEventListener("load",sp,!1),_h.removeEventListener("error",Ju,!1)),_h=null,ep=Qe$1},ip=function(){var _f;if(Zu!==!0){Zu=!0,ep();var np=new Xe$1(Nu,"XMLHttpRequest",$u.timeout||NaN);Ru(np),Uu(np),(_f=$u.networkSubscribe)===null||_f===void 0||_f.emit("network",Nu,"XMLHttpRequest","timeout",np.message)}},ap=function(_f){Zu!==!0&&_f.lengthComputable&&(_f.total<=0||Lu(_f.loaded/_f.total))},sp=function(_f){var np;if(Zu!==!0){var tp=this.status;if(tp===0||tp>=200&&tp<400){Zu=!0,ep();var rp=_e(),op=rp-Ou,lp=function(Ap){if(!Ap)return{};for(var yp={},Ip=Ap.trim().split(`
`),Ep=0;Ep<Ip.length;Ep++){var Vp=Ip[Ep],$p=Vp.indexOf(":"),kp=Vp.slice(0,$p).trim().toLowerCase(),Bp=Vp.slice($p+1).trim();Bp&&(yp[kp]?yp[kp]+=", "+Bp:yp[kp]=Bp)}return yp}(this.getAllResponseHeaders()),up=_f.total,cp={body:this.response,meta:{origin:Fu,source:Nu,requestTime:Ou,responseTime:rp,costs:op,headers:lp,size:up}};Bu(cp),Vu(cp),(np=$u.networkSubscribe)===null||np===void 0||np.emit("network",Nu,"XMLHttpRequest","ok",JSON.stringify(cp.meta))}else Ju.call(this)}},Ju=function(){var _f;if(Zu!==!0){Zu=!0,ep();var np=new We$1(Nu,"XMLHttpRequest",this.status);Ru(np),Uu(np),(_f=$u.networkSubscribe)===null||_f===void 0||_f.emit("network",Nu,"XMLHttpRequest","error",np.message)}};_h.addEventListener("timeout",ip,!1),_h.addEventListener("progress",ap,!1),_h.addEventListener("load",sp,!1),_h.addEventListener("error",Ju,!1),$u.responseType&&(_h.responseType=$u.responseType),typeof $u.timeout=="number"&&(_h.timeout=$u.timeout),_h.open("GET",Nu,!0),_h.send(null)}})})}var nt$1={};function rt$1(_u,$u,Bu,Ru,Lu,Ou){$u===void 0&&($u={}),Bu===void 0&&(Bu=Qe$1),Ru===void 0&&(Ru=Qe$1),Lu===void 0&&(Lu=Qe$1);var Fu=_e(),Nu=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Vu){return/^https\:/.test(location.href)&&/^http\:/.test(Vu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Vu,"'. This request was automatically upgraded to HTTPS")),Vu.replace(/^http\:/,"https:")):Vu}).catch(function(Vu){var Uu,Gu=new Ge$1(Nu,"Image",Vu&&Vu.message?String(Vu.message):String(Vu));return(Uu=$u.networkSubscribe)===null||Uu===void 0||Uu.emit("network",_u,"Image","proxy-error",Gu.message),Promise.reject(Gu)}).then(function(Vu){return new Promise(function(Uu,Gu){var zu,Hu=$u.allowHosts?je.concat($u.allowHosts):je.slice(),ju=et(Vu);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je.filter(function(qu){return Ke(qu,location.hostname)}).length===0&&!ze$1(ju)&&Hu.filter(function(qu){return Ke(qu,ju)}).length===0){var Qu=new Ye$1(Vu,"Image","request host(".concat(ju,") is not allowed"));return Ru(Qu),Gu(Qu),void((zu=$u.networkSubscribe)===null||zu===void 0||zu.emit("network",Vu,"Image","forbidden",Qu.message))}var Xu=Ou!=null?Ou:new Image,Ku=!1,Wu=null;typeof $u.timeout=="number"&&(Wu=window.setTimeout(function(){var qu;if(Xu.onload=Qe$1,Xu.onerror=Qe$1,Wu=null,Ku!==!0){Ku=!0;var Yu=new Xe$1(Vu,"Image",$u.timeout);Ru(Yu),Gu(Yu),(qu=$u.networkSubscribe)===null||qu===void 0||qu.emit("network",Vu,"Image","timeout",Yu.message)}},$u.timeout)),Xu.onload=function(){var qu;if(Xu.onload=Qe$1,Xu.onerror=Qe$1,Wu!==null&&(clearTimeout(Wu),Wu=null),Ku!==!0){var Yu=_e();Ku=!0;var Zu={body:Xu,meta:{headers:{},origin:Nu,source:Vu,requestTime:Fu,responseTime:Yu,costs:Yu-Fu}};Lu(1),Bu(Zu),Uu(Zu),(qu=$u.networkSubscribe)===null||qu===void 0||qu.emit("network",Vu,"Image","ok",JSON.stringify(Zu.meta))}},Xu.onerror=function(){var qu;if(Xu.onload=Qe$1,Xu.onerror=Qe$1,Wu!==null&&(clearTimeout(Wu),Wu=null),Ku!==!0){Ku=!0;var Yu=new We$1(Vu,"Image",0);Ru(Yu),Gu(Yu),(qu=$u.networkSubscribe)===null||qu===void 0||qu.emit("network",Vu,"Image","ok",Yu.message)}},Lu(0),Xu.src=Vu})})}var ot=function(){if(typeof window!="undefined"){var _u=window;return _u.requestAnimationFrame||_u.mozRequestAnimationFrame||_u.webkitRequestAnimationFrame||_u.msRequestAnimationFrame||function($u){return setTimeout($u,16)}}return function($u){return setTimeout($u,16)}}(),st=16,at=function(){function _u(){this.frames=[],this.stoped=!1,this.time=_e(),this.context=null,this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(_u,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new _u),this.sharedInstance},enumerable:!1,configurable:!0}),_u.getFrameTime=function(){return st},_u.prototype.loop=function(){for(var $u=[],Bu=0;Bu<arguments.length;Bu++)$u[Bu]=arguments[Bu];if(!this.stoped){var Ru=_e(),Lu=Ru-this.time;this.time=Ru;var Ou=[];st=Lu;for(var Fu=0,Nu=this.frames;Fu<Nu.length;Fu++){var Vu=Nu[Fu];if(Vu.delay>0)Vu.delay=Vu.delay-1;else{try{Vu.callback.apply(Vu,t$3.__spreadArray([Ru,Lu],$u,!1))}catch(Uu){console.error(Uu)}Vu.once&&Ou.push(Vu)}}Ou.length>0&&(this.frames=this.frames.filter(function(Uu){return Ou.indexOf(Uu)===-1})),this.requestAnimationFrame(this.loop)}},_u.prototype.setContext=function($u){this.cancelAnimationFrame(this.requestId),this.context=$u,this.requestId=this.requestAnimationFrame(this.loop)},_u.prototype.getContext=function(){return this.context},_u.prototype.requestAnimationFrame=function($u){return this.context?this.context.requestAnimationFrame($u):ot($u)},_u.prototype.cancelAnimationFrame=function($u){this.context?this.context.cancelAnimationFrame($u):function(Bu){var Ru;if(typeof window!="undefined"){var Lu=window;Ru=Lu.cancelAnimationFrame||Lu.mozCancelAnimationFrame||Lu.webkitCancelAnimationFrame||Lu.msCancelAnimationFrame||function(Ou){return window.clearTimeout(Ou)}}else Ru=function(Ou){return window.clearTimeout(Ou)};Ru(Bu)}(this.loop),this.requestId=null},_u.prototype.remove=function($u){var Bu=this.frames.indexOf($u);Bu>=0&&this.frames.splice(Bu,1)},_u.prototype.add=function($u,Bu,Ru,Lu){var Ou=this;Bu===void 0&&(Bu=!1),Ru===void 0&&(Ru=0),Lu===void 0&&(Lu=5);var Fu={callback:$u,once:Bu,delay:Ru,order:Lu};return this.frames.push(Fu),this.frames.sort(function(Nu,Vu){return Nu.order-Vu.order}),function(){return Ou.remove(Fu)}},_u.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},_u}(),lt=/^https?\:\/\/?([^\/]+)/;function ut$1(_u,$u){return _u.replace(lt,function(Bu,Ru){return Bu.slice(0,Bu.length-Ru.length)+$u})}var ht$1={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]},"test-vr-public.realsee-cdn.cn":{pano:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],texture:["test-vr-image.realsee-cdn.cn"],tile:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],default:["test-vr-image.realsee-cdn.cn"]}};function ct$1(_u,$u){var Bu=t$3.__assign(t$3.__assign({},ht$1),$u.mappings),Ru=function(Ou){var Fu=Ou.match(lt);return Fu===null?null:Fu[1]}(_u);if(Ru===null)return _u;var Lu=Bu[Ru];return Lu?(/\.basis(\?|$)/.test(_u)&&$u.basisLoaderInitialized!==!0&&(_u=_u.replace(/\.basis(\?|$)/,".jpg$1")),function(Ou,Fu){var Nu,Vu=Ou.split("?")[0],Uu=Vu.split(".").pop();if(Uu==="jpeg"&&(Uu="jpg"),Uu!=="png"&&Uu!=="jpg")return Ou;var Gu="";if(Fu.format!==void 0&&Fu.format!==Uu&&(Gu+="/format/".concat(Fu.format)),Fu.cut!==void 0&&(Gu+="/cut/".concat(Fu.cut[2],"x").concat(Fu.cut[3],"x").concat(Fu.cut[0],"x").concat(Fu.cut[1])),Fu.quality!==void 0){var zu=(Nu=Fu.format)!==null&&Nu!==void 0?Nu:Uu;zu&&["jpg","webp","tpg","heif","avif"].indexOf(zu)>=0&&(Gu+="/quality/".concat(Fu.quality))}if(Fu.size!==void 0){var Hu=Ou.match(/\/cube_(\d+)\//);(Hu?Number(Hu[1]):NaN)!==Number(Fu.size)&&(Gu+="/thumbnail/".concat(Fu.size,"x"))}return Fu.sharpen!==void 0&&(Gu+="/sharpen/".concat(Fu.sharpen)),Gu.length&&(Gu="?imageMogr2"+Gu),Vu+Gu}(function(Ou,Fu,Nu){var Vu=Fu.split("."),Uu=Vu[0],Gu=Vu.slice(1);if(Uu==="texture")return ut$1(Ou,Nu.texture[0]);if(Uu==="pano"||Uu==="pano_luminance")switch(Gu[0],Gu[1]){case"front":case"left":case"up":return ut$1(Ou,Nu.pano[0]);case"down":case"right":case"back":return ut$1(Ou,Nu.pano[1])}else if(Uu==="pano_tile"||Uu==="pano_tile_luminance"){Gu[0],Gu[1];var zu=Gu[2],Hu=Gu[3],ju=Gu[4],Qu=Math.pow(2,Number(zu))*Number(Hu)+Number(ju);if(!isNaN(Qu))return ut$1(Ou,Nu.tile[Qu%2])}return ut$1(Ou,Nu.default[0])}(_u,$u.key,Lu),$u)):_u}function dt(_u){return new Promise(function($u){var Bu=new Image,Ru=setTimeout(function(){Bu.onload=Bu.onerror=function(){},clearTimeout(Ru),$u(!1)});Bu.onload=Bu.onerror=function(){Bu.onload=Bu.onerror=function(){},clearTimeout(Ru),$u(Bu.height===2)},Bu.src=_u})}var pt$1=null,ft=function(_u){function $u(){var Bu=_u!==null&&_u.apply(this,arguments)||this;return Bu.floorIndex=0,Bu.needsRender=!0,Bu}return t$3.__extends($u,_u),$u}(r$3.Mesh),At=function(_u){function $u(){var Bu=_u!==null&&_u.apply(this,arguments)||this;return Bu.needsRender=!0,Bu.enableTransparent=!0,Bu}return t$3.__extends($u,_u),$u.prototype.getTransparent=function(){return this.enableTransparent},$u.prototype.setTransparent=function(Bu){this.enableTransparent=Bu,this.traverse(function(Ru){Ru instanceof ft&&Ru.material.forEach(function(Lu){Lu.transparent=Bu})})},$u.prototype.getMaterial=function(){var Bu=null;return this.traverse(function(Ru){if(Bu===null&&Ru instanceof ft){var Lu=Ru.material[0];Bu={pano0:Lu.pano0,pano1:Lu.pano1,modelAlpha:Lu.modelAlpha,progress:Lu.progress,useBlackTransition:Lu.useBlackTransition,useXRBlackTransition:Lu.useXRBlackTransition,perspToOrtho:Lu.perspToOrtho,opacity:Lu.opacity,floorInfo:Lu.floorInfo}}}),Bu},$u.prototype.setMaterial=function(Bu){this.traverse(function(Ru){Ru instanceof ft&&Ru.material.forEach(function(Lu){Bu.pano0!==void 0&&(Lu.pano0=Bu.pano0),Bu.pano1!==void 0&&(Lu.pano1=Bu.pano1),Bu.modelAlpha!==void 0&&(Lu.modelAlpha=Bu.modelAlpha),Bu.progress!==void 0&&(Lu.progress=Bu.progress),Bu.useBlackTransition!==void 0&&(Lu.useBlackTransition=Bu.useBlackTransition),Bu.useXRBlackTransition!==void 0&&(Lu.useXRBlackTransition=Bu.useXRBlackTransition),Bu.perspToOrtho!==void 0&&(Lu.perspToOrtho=Bu.perspToOrtho),Bu.opacity!==void 0&&(Lu.opacity=Bu.opacity),Bu.floorInfo!==void 0&&(Lu.floorInfo=Bu.floorInfo)})})},$u.prototype.disposeMaterial=function(){this.traverse(function(Bu){if(Bu instanceof ft){var Ru=[];Bu.material.forEach(function(Lu){var Ou=Lu.uniforms;Object.keys(Ou).map(function(Fu){if(/^pano\d\_/.test(Fu))Ou[Fu].value=null;else{var Nu=Ou[Fu].value;Nu&&typeof Nu.dispose=="function"&&Ru.indexOf(Nu)===-1&&(Ou[Fu].value=null,Ru.push(Nu))}}),Lu.dispose()}),Ru.forEach(function(Lu){return Lu.dispose()})}})},$u.prototype.disposeGeometry=function(){this.traverse(function(Bu){Bu instanceof ft&&Bu.geometry.dispose()})},$u}(r$3.Group),gt$1=function(_u){function $u(){var Bu=_u!==null&&_u.apply(this,arguments)||this;return Bu.floorIndex=0,Bu}return t$3.__extends($u,_u),$u}(At),mt$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=113,Ru=126,Lu=0,Ou="";return arguments[Lu].split(Ou).map(function(Fu){return Fu.charCodeAt(Lu)>Ru?Fu:String.fromCharCode((Fu.charCodeAt(Lu)+Bu)%Ru)}).join(Ou)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;===>9-no5q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{666H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),vt$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=113,Ru=126,Lu=0,Ou="";return arguments[Lu].split(Ou).map(function(Fu){return Fu.charCodeAt(Lu)>Ru?Fu:String.fromCharCode((Fu.charCodeAt(Lu)+Bu)%Ru)}).join(Ou)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-e_lOYNPXlP\\Y\\_-rpA5=;=9=;=9=;=9>;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvs0vs-qrsv{rq5b`RlPYV]SY\\\\_6{vs|z-rp@-sy||V{s|H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--vs-5q|5cvr]|vv|{9-[|zny6-I-=;=6-\n----qvpnqH--\f--0vs-qrsv{rq5b`RlPYV]SY\\\\_6----vs-5|yq]|vv|{;\b-I-sy||V{s|;-\v\v-|yq]|vv|{;\b-K-sy||V{s|;t6-\n------qvpnqH----\f--0r{qvs--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryvs-qrsv{rq5b`Rle_lOYNPXla_N[`VaV\\[6}n{|P|y|-J-zv\x075}n{|=P|y|9e_lOYNPXlP\\Y\\_9zv{5>;=9-}|tr66H0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function yt(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var bt=yt();bt.width=bt.height=8;var xt=new r$3.Texture(bt);xt.name="EMPTY_TEXTURE";var wt$1=new r$3.CubeTexture([bt,bt,bt,bt,bt,bt]);wt$1.name="EMPTY_CUBE_TEXTURE",xt.dispose=wt$1.dispose=function(){};var Et$1=Object.assign({modelAlpha:new r$3.Uniform(0),progress:new r$3.Uniform(0),pano0_map:new r$3.Uniform(wt$1),pano0_luminanceMap:new r$3.Uniform(null),pano0_matrix:new r$3.Uniform(new r$3.Matrix4),pano1_map:new r$3.Uniform(wt$1),pano1_luminanceMap:new r$3.Uniform(null),pano1_matrix:new r$3.Uniform(new r$3.Matrix4),modelCenter:new r$3.Uniform(new r$3.Vector3),perspToOrtho:new r$3.Uniform(0),floorInfo:new r$3.Vector3(0,0,0)},{exposure:new r$3.Uniform(1),emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsUtils.clone(r$3.UniformsLib.common),r$3.UniformsUtils.clone(r$3.UniformsLib.lights)),Mt=function(_u){function $u(Bu){Bu===void 0&&(Bu={});var Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu=this;return Hu=_u.call(this,{vertexShader:mt$1,fragmentShader:vt$1,uniforms:r$3.UniformsUtils.clone(Et$1),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_XR_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1,USE_CLIPFLOOR:!1},blending:r$3.NoBlending,lights:!0})||this,Object.defineProperties(Hu,{pano0:{get:function(){return this.uniforms.pano0_map.value===wt$1?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(ju){ju===null?(this.uniforms.pano0_map.value=wt$1,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=ju.map,this.uniforms.pano0_luminanceMap.value=ju.luminanceMap,this.uniforms.pano0_matrix.value.copy(ju.matrix));var Qu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Qu&&(this.defines.USE_LUMINANCE=Qu,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===wt$1?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(ju){ju===null?(this.uniforms.pano1_map.value=wt$1,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=ju.map,this.uniforms.pano1_luminanceMap.value=ju.luminanceMap,this.uniforms.pano1_matrix.value.copy(ju.matrix));var Qu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Qu&&(this.defines.USE_LUMINANCE=Qu,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(ju){this.uniforms.modelAlpha.value=ju}},progress:{get:function(){return this.uniforms.progress.value},set:function(ju){this.uniforms.progress.value=ju}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(ju){this.defines.USE_BLACK_TRANSITION!==ju&&(this.defines.USE_BLACK_TRANSITION=ju,this.needsUpdate=!0)}},useXRBlackTransition:{get:function(){return this.defines.USE_XR_BLACK_TRANSITION},set:function(ju){this.defines.USE_XR_BLACK_TRANSITION!==ju&&(this.defines.USE_XR_BLACK_TRANSITION=ju,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(ju){this.uniforms.opacity.value=ju;var Qu=ju<1?r$3.NormalBlending:r$3.NoBlending;Qu!==this.blending&&(this.blending=Qu,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(ju){this.uniforms.perspToOrtho.value=ju}},floorInfo:{get:function(){return this.uniforms.floorInfo.value},set:function(ju){ju&&ju.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!1,this.needsUpdate=!0),ju&&!ju.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!0,this.uniforms.floorInfo.value=ju,this.needsUpdate=!0)}}}),Hu.pano0=(Ru=Bu.pano0)!==null&&Ru!==void 0?Ru:null,Hu.pano1=(Lu=Bu.pano1)!==null&&Lu!==void 0?Lu:null,Hu.modelAlpha=(Ou=Bu.modelAlpha)!==null&&Ou!==void 0?Ou:1,Hu.progress=(Fu=Bu.progress)!==null&&Fu!==void 0?Fu:0,Hu.useBlackTransition=(Nu=Bu.useBlackTransition)!==null&&Nu!==void 0&&Nu,Hu.useXRBlackTransition=(Vu=Bu.useXRBlackTransition)!==null&&Vu!==void 0&&Vu,Hu.perspToOrtho=(Uu=Bu.perspToOrtho)!==null&&Uu!==void 0?Uu:0,Hu.opacity=(Gu=Bu.opacity)!==null&&Gu!==void 0?Gu:1,Hu.originOpacity=1,Hu.floorInfo=(zu=Bu.floorInfo)!==null&&zu!==void 0?zu:null,Hu}return t$3.__extends($u,_u),$u}(r$3.ShaderMaterial),It$1=function(_u){function $u(Bu){var Ru=Bu.preserveDrawingBuffer,Lu=Ru===void 0||Ru,Ou=Bu.backgroundColor,Fu=Ou===void 0?1579548:Ou,Nu=Bu.backgroundAlpha,Vu=Nu===void 0?1:Nu,Uu=Bu.pixelRatio,Gu=Uu===void 0?1:Uu,zu=Bu.antialias,Hu=zu!==void 0&&zu,ju=Bu.webgl2,Qu=this;if(ju!==void 0&&ju){var Xu=document.createElement("canvas"),Ku=Xu.getContext("webgl2");if(Ku===null)throw new Error("error occurred when getting webgl2 canvas context");Qu=_u.call(this,{antialias:Hu,preserveDrawingBuffer:Lu,alpha:Vu<1,canvas:Xu,context:Ku})||this}else Qu=_u.call(this,{antialias:Hu,preserveDrawingBuffer:Lu,alpha:Vu<1})||this;return Qu.setPixelRatio(Gu),Qu.setClearColor(Fu,Vu),Qu.outputEncoding=r$3.sRGBEncoding,Qu.autoClear=!0,Qu}return t$3.__extends($u,_u),$u}(r$3.WebGLRenderer),St$1=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$3.__extends($u,_u),$u.prototype.add=function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.prototype.add.apply(this,Bu)},$u.prototype.remove=function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.prototype.remove.apply(this,Bu)},$u}(r$3.Scene),Ct$1=2*Math.PI,Bt=Math.PI/2;function Tt(_u){return _u>0&&_u<=Ct$1?_u:(_u%Ct$1+Ct$1)%Ct$1}var Pt$1,Rt,kt$1,Dt$1,Lt=function(_u){function $u(Bu){var Ru=_u.call(this,Bu,1,.1,1e3)||this;return Ru.pose={longitude:0,latitude:0,fov:Bu,distance:0,offset:new r$3.Vector3},Ru.computePose(),Ru}return t$3.__extends($u,_u),$u.prototype.computePose=function(){var Bu=this.getWorldDirection(new r$3.Vector3);return this.pose.longitude=Tt(-Math.atan2(Bu.x,-Bu.z)),this.pose.latitude=-Math.asin(Bu.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},$u.prototype.setFromPose=function(Bu){var Ru,Lu,Ou,Fu,Nu,Vu=Tt((Ru=Bu.longitude)!==null&&Ru!==void 0?Ru:this.pose.longitude),Uu=Math.max(1e-4-Bt,Math.min(Bt-1e-4,(Lu=Bu.latitude)!==null&&Lu!==void 0?Lu:this.pose.latitude)),Gu=(Ou=Bu.fov)!==null&&Ou!==void 0?Ou:this.pose.fov,zu=(Fu=Bu.distance)!==null&&Fu!==void 0?Fu:this.pose.distance,Hu=(Nu=Bu.offset)!==null&&Nu!==void 0?Nu:this.pose.offset,ju=function(Qu){var Xu=Math.abs(Math.cos(Qu.latitude));return new r$3.Vector3(-Math.sin(Qu.longitude)*Xu,-Math.sin(Qu.latitude),-Math.cos(Qu.longitude)*Xu)}({longitude:Vu,latitude:Uu}).normalize();return this.position.set(0,0,0),this.lookAt(ju),this.position.add(Hu).sub(ju.clone().setLength(zu)),this.fov!==Gu&&(this.fov=Gu,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Vu,this.pose.latitude=Uu,this.pose.fov=Gu,this.pose.distance=zu,this.pose.offset.copy(Hu),this},$u.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},$u}(r$3.PerspectiveCamera),Ot=function(){function _u($u,Bu,Ru){this.x=$u,this.y=Bu,this.z=Ru}return _u.prototype.copy=function($u){return this.x=$u.x,this.y=$u.y,this.z=$u.z,this},_u.prototype.set=function($u,Bu,Ru){return this.x=$u,this.y=Bu,this.z=Ru,this},_u.prototype.fromArray=function($u,Bu){return Bu===void 0&&(Bu=0),this.x=$u[Bu],this.y=$u[Bu+1],this.z=$u[Bu+2],this},_u.prototype.add=function($u){return this.x+=$u.x,this.y+=$u.y,this.z+=$u.z,this},_u.prototype.multiplyScalar=function($u){return this.x*=$u,this.y*=$u,this.z*=$u,this},_u.prototype.subVectors=function($u,Bu){return this.x=$u.x-Bu.x,this.y=$u.y-Bu.y,this.z=$u.z-Bu.z,this},_u.prototype.dot=function($u){return this.x*$u.x+this.y*$u.y+this.z*$u.z},_u.prototype.cross=function($u){var Bu=this.x,Ru=this.y,Lu=this.z;return this.x=Ru*$u.z-Lu*$u.y,this.y=Lu*$u.x-Bu*$u.z,this.z=Bu*$u.y-Ru*$u.x,this},_u.prototype.crossVectors=function($u,Bu){var Ru=$u.x,Lu=$u.y,Ou=$u.z,Fu=Bu.x,Nu=Bu.y,Vu=Bu.z;return this.x=Lu*Vu-Ou*Nu,this.y=Ou*Fu-Ru*Vu,this.z=Ru*Nu-Lu*Fu,this},_u.prototype.clone=function(){return new _u(this.x,this.y,this.z)},_u}(),Nt$1=function(_u,$u,Bu){this.extents=_u,this.startIndex=$u,this.endIndex=Bu},Ft$1=function(_u,$u){this.triangle=_u,this.intersectionPoint=$u},Qt=(Pt$1=new Ot(0,0,0),Rt=new Ot(0,0,0),kt$1=new Ot(0,0,0),Dt$1=new Ot(0,0,0),function(_u,$u,Bu,Ru,Lu,Ou){Rt.subVectors($u,_u),kt$1.subVectors(Bu,_u),Dt$1.crossVectors(Rt,kt$1);var Fu,Nu=Lu.dot(Dt$1);if(Nu>0){if(Ou)return null;Fu=1}else{if(!(Nu<0))return null;Fu=-1,Nu=-Nu}Pt$1.subVectors(Ru,_u);var Vu=Fu*Lu.dot(kt$1.crossVectors(Pt$1,kt$1));if(Vu<0)return null;var Uu=Fu*Lu.dot(Rt.cross(Pt$1));if(Uu<0||Vu+Uu>Nu)return null;var Gu=-Fu*Pt$1.dot(Dt$1);if(Gu<0)return null;var zu=Gu/Nu;return new Ot(0,0,0).copy(Lu).multiplyScalar(zu).add(Ru)}),Vt$1=function(_u,$u){this.min=_u,this.max=$u};function _t(_u,$u,Bu){var Ru=new Vt$1(0,0);$u.x>=0?(Ru.min=(Bu.extents[0]-_u.x)*$u.x,Ru.max=(Bu.extents[3]-_u.x)*$u.x):(Ru.min=(Bu.extents[3]-_u.x)*$u.x,Ru.max=(Bu.extents[0]-_u.x)*$u.x);var Lu=new Vt$1(0,0);if($u.y>=0?(Lu.min=(Bu.extents[1]-_u.y)*$u.y,Lu.max=(Bu.extents[4]-_u.y)*$u.y):(Lu.min=(Bu.extents[4]-_u.y)*$u.y,Lu.max=(Bu.extents[1]-_u.y)*$u.y),Ru.min>Lu.max||Lu.min>Ru.max)return!1;Lu.min>Ru.min&&(Ru.min=Lu.min),Lu.max<Ru.max&&(Ru.max=Lu.max);var Ou=new Vt$1(0,0);return $u.z>=0?(Ou.min=(Bu.extents[2]-_u.z)*$u.z,Ou.max=(Bu.extents[5]-_u.z)*$u.z):(Ou.min=(Bu.extents[5]-_u.z)*$u.z,Ou.max=(Bu.extents[2]-_u.z)*$u.z),!(Ru.min>Ou.max||Ou.min>Ru.max)&&(Ou.min>Ru.min&&(Ru.min=Ou.min),Ou.max<Ru.max&&(Ru.max=Ou.max),!(Ru.max<0))}function Ht$1(_u,$u,Bu,Ru,Lu){if(Bu>=Ru)return[0,0,0,0,0,0];for(var Ou=1/0,Fu=1/0,Nu=1/0,Vu=-1/0,Uu=-1/0,Gu=-1/0,zu=Bu,Hu=void 0,ju=void 0;zu<Ru;zu++)(ju=$u[Hu=6*_u[zu]])<Ou&&(Ou=ju),(ju=$u[Hu+1])<Fu&&(Fu=ju),(ju=$u[Hu+2])<Nu&&(Nu=ju),(ju=$u[Hu+3])>Vu&&(Vu=ju),(ju=$u[Hu+4])>Uu&&(Uu=ju),(ju=$u[Hu+5])>Gu&&(Gu=ju);return[Ou-Lu,Fu-Lu,Nu-Lu,Vu+Lu,Uu+Lu,Gu+Lu]}var qt=function(){function _u(){}return _u.prototype.create=function($u){return this.trianglesArray=$u,this},_u.prototype.splitNode=function($u){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var Bu=this.trianglesArray,Ru=Bu.length/9,Lu=new Uint32Array(Ru),Ou=new Float32Array(6*Ru),Fu=[],Nu=1/0,Vu=1/0,Uu=1/0,Gu=-1/0,zu=-1/0,Hu=-1/0,ju=0,Qu=0,Xu=0,Ku=void 0,Wu=void 0,qu=void 0,Yu=void 0,Zu=void 0,_h=void 0,ep=void 0;ju<Ru;ju++,Qu+=6,Xu+=9)Lu[ju]=ju,Ku=Yu=Bu[Xu],(ep=Bu[Xu+3])<Ku&&(Ku=ep),ep>Yu&&(Yu=ep),(ep=Bu[Xu+6])<Ku&&(Ku=ep),ep>Yu&&(Yu=ep),Wu=Zu=Bu[Xu+1],(ep=Bu[Xu+4])<Wu&&(Wu=ep),ep>Zu&&(Zu=ep),(ep=Bu[Xu+7])<Wu&&(Wu=ep),ep>Zu&&(Zu=ep),qu=_h=Bu[Xu+2],(ep=Bu[Xu+5])<qu&&(qu=ep),ep>_h&&(_h=ep),(ep=Bu[Xu+8])<qu&&(qu=ep),ep>_h&&(_h=ep),Ku<Nu&&(Nu=Ku),Yu>Gu&&(Gu=Yu),Wu<Vu&&(Vu=Wu),Zu>zu&&(zu=Zu),qu<Uu&&(Uu=qu),_h>Hu&&(Hu=_h),Ou[Qu]=Ku,Ou[Qu+1]=Wu,Ou[Qu+2]=qu,Ou[Qu+3]=Yu,Ou[Qu+4]=Zu,Ou[Qu+5]=_h;var ip,ap=new Nt$1([Nu,Vu,Uu,Gu,zu,Hu],0,Ru);function sp(Ju){for(var _f=Ju.startIndex,np=Ju.endIndex,tp=Ju.extents,rp=[tp[3]-tp[0],tp[4]-tp[1],tp[5]-tp[2]],op=[0,1,2].sort(function(kp,Bp){return rp[Bp]-rp[kp]}),lp=0;lp<3;lp++){for(var up=op[lp],cp=tp[up]+tp[up+3],Ap=_f,yp=np-1,Ip=-1,Ep=void 0;Ap<=yp;)Ip===-1?(Ep=Lu[Ap],Ou[6*Ep+up]+Ou[6*Ep+up+3]<cp?Ap++:Ip=Ep):(Ep=Lu[yp],Ou[6*Ep+up]+Ou[6*Ep+up+3]>=cp||(Lu[Ap]=Ep,Lu[yp]=Ip,Ip=-1,Ap++),yp--);if(Ap>_f&&Ap<np){var Vp=new Nt$1(Ht$1(Lu,Ou,_f,Ap,1e-6),_f,Ap);Vp.endIndex-Vp.startIndex>$u&&Fu.push(Vp);var $p=new Nt$1(Ht$1(Lu,Ou,Ap,np,1e-6),Ap,np);$p.endIndex-$p.startIndex>$u&&Fu.push($p),Ju.node0=Vp,Ju.node1=$p,Ju.startIndex=0,Ju.endIndex=0;break}}}for(Fu.push(ap);ip=Fu.pop();)sp(ip);return this.offsetArray=Lu,this.rootNode=ap,this},_u.prototype.intersectRay=function($u,Bu,Ru){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Lu,Ou=this.trianglesArray,Fu=this.offsetArray,Nu=this.rootNode,Vu=[],Uu=[],Gu=new Ot(1/Bu.x,1/Bu.y,1/Bu.z),zu=[Nu];Lu=zu.pop();)if(_t($u,Gu,Lu)){Lu.node0&&zu.push(Lu.node0),Lu.node1&&zu.push(Lu.node1);for(var Hu=Lu.startIndex;Hu<Lu.endIndex;Hu++)Vu.push(Fu[Hu])}for(var ju=new Ot(0,0,0),Qu=new Ot(0,0,0),Xu=new Ot(0,0,0),Ku=new Ot($u.x,$u.y,$u.z),Wu=new Ot(Bu.x,Bu.y,Bu.z),qu=(Hu=0,void 0),Yu=Vu.length;Hu<Yu;Hu++){qu=9*Vu[Hu],ju.x=Ou[qu],ju.y=Ou[qu+1],ju.z=Ou[qu+2],Qu.x=Ou[qu+3],Qu.y=Ou[qu+3+1],Qu.z=Ou[qu+3+2],Xu.x=Ou[qu+6],Xu.y=Ou[qu+6+1],Xu.z=Ou[qu+6+2];var Zu=Qt(ju,Qu,Xu,Ku,Wu,Ru);Zu&&Uu.push(new Ft$1([ju.clone(),Qu.clone(),Xu.clone()],Zu))}return Uu},_u.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},_u}(),zt=!1,Kt=[];function Ut$1(_u){if(_u===void 0&&(_u=!1),_u||!zt){zt=!0;var $u=Kt.shift();if($u){try{$u()}catch{}at.shared.add(function(){return Ut$1(!0)},!0,2)}else zt=!1}}function jt$1(_u){return new Promise(function($u,Bu){Kt.push(function(){try{$u(_u())}catch(Ru){Bu(Ru)}}),Ut$1()})}function Gt$1(){var _u={OutWindow:function(){this._windowSize=0}};return _u.OutWindow.prototype.create=function($u){this._buffer&&this._windowSize===$u||(this._buffer=[]),this._windowSize=$u,this._pos=0,this._streamPos=0},_u.OutWindow.prototype.flush=function(){var $u=this._pos-this._streamPos;if($u!==0){for(;$u--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},_u.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},_u.OutWindow.prototype.setStream=function($u){this.releaseStream(),this._stream=$u},_u.OutWindow.prototype.init=function($u){$u||(this._streamPos=0,this._pos=0)},_u.OutWindow.prototype.copyBlock=function($u,Bu){var Ru=this._pos-$u-1;for(Ru<0&&(Ru+=this._windowSize);Bu--;)Ru>=this._windowSize&&(Ru=0),this._buffer[this._pos++]=this._buffer[Ru++],this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.putByte=function($u){this._buffer[this._pos++]=$u,this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.getByte=function($u){var Bu=this._pos-$u-1;return Bu<0&&(Bu+=this._windowSize),this._buffer[Bu]},_u.RangeDecoder=function(){},_u.RangeDecoder.prototype.setStream=function($u){this._stream=$u},_u.RangeDecoder.prototype.releaseStream=function(){this._stream=null},_u.RangeDecoder.prototype.init=function(){var $u=5;for(this._code=0,this._range=-1;$u--;)this._code=this._code<<8|this._stream.readByte()},_u.RangeDecoder.prototype.decodeDirectBits=function($u){for(var Bu,Ru=0,Lu=$u;Lu--;)this._range>>>=1,Bu=this._code-this._range>>>31,this._code-=this._range&Bu-1,Ru=Ru<<1|1-Bu,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Ru},_u.RangeDecoder.prototype.decodeBit=function($u,Bu){var Ru=$u[Bu],Lu=(this._range>>>11)*Ru;return(2147483648^this._code)<(2147483648^Lu)?(this._range=Lu,$u[Bu]+=2048-Ru>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Lu,this._code-=Lu,$u[Bu]-=Ru>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},_u.initBitModels=function($u,Bu){for(;Bu--;)$u[Bu]=1024},_u.BitTreeDecoder=function($u){this._models=[],this._numBitLevels=$u},_u.BitTreeDecoder.prototype.init=function(){_u.initBitModels(this._models,1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.decode=function($u){for(var Bu=1,Ru=this._numBitLevels;Ru--;)Bu=Bu<<1|$u.decodeBit(this._models,Bu);return Bu-(1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.reverseDecode=function($u){for(var Bu,Ru=1,Lu=0,Ou=0;Ou<this._numBitLevels;++Ou)Ru=Ru<<1|(Bu=$u.decodeBit(this._models,Ru)),Lu|=Bu<<Ou;return Lu},_u.reverseDecode2=function($u,Bu,Ru,Lu){for(var Ou,Fu=1,Nu=0,Vu=0;Vu<Lu;++Vu)Fu=Fu<<1|(Ou=Ru.decodeBit($u,Bu+Fu)),Nu|=Ou<<Vu;return Nu},_u.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new _u.BitTreeDecoder(8),this._numPosStates=0},_u.LenDecoder.prototype.create=function($u){for(;this._numPosStates<$u;++this._numPosStates)this._lowCoder[this._numPosStates]=new _u.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new _u.BitTreeDecoder(3)},_u.LenDecoder.prototype.init=function(){var $u=this._numPosStates;for(_u.initBitModels(this._choice,2);$u--;)this._lowCoder[$u].init(),this._midCoder[$u].init();this._highCoder.init()},_u.LenDecoder.prototype.decode=function($u,Bu){return $u.decodeBit(this._choice,0)===0?this._lowCoder[Bu].decode($u):$u.decodeBit(this._choice,1)===0?8+this._midCoder[Bu].decode($u):16+this._highCoder.decode($u)},_u.Decoder2=function(){this._decoders=[]},_u.Decoder2.prototype.init=function(){_u.initBitModels(this._decoders,768)},_u.Decoder2.prototype.decodeNormal=function($u){var Bu=1;do Bu=Bu<<1|$u.decodeBit(this._decoders,Bu);while(Bu<256);return 255&Bu},_u.Decoder2.prototype.decodeWithMatchByte=function($u,Bu){var Ru,Lu,Ou=1;do if(Ru=Bu>>7&1,Bu<<=1,Ou=Ou<<1|(Lu=$u.decodeBit(this._decoders,(1+Ru<<8)+Ou)),Ru!==Lu){for(;Ou<256;)Ou=Ou<<1|$u.decodeBit(this._decoders,Ou);break}while(Ou<256);return 255&Ou},_u.LiteralDecoder=function(){},_u.LiteralDecoder.prototype.create=function($u,Bu){var Ru;if(!this._coders||this._numPrevBits!==Bu||this._numPosBits!==$u)for(this._numPosBits=$u,this._posMask=(1<<$u)-1,this._numPrevBits=Bu,this._coders=[],Ru=1<<this._numPrevBits+this._numPosBits;Ru--;)this._coders[Ru]=new _u.Decoder2},_u.LiteralDecoder.prototype.init=function(){for(var $u=1<<this._numPrevBits+this._numPosBits;$u--;)this._coders[$u].init()},_u.LiteralDecoder.prototype.getDecoder=function($u,Bu){return this._coders[(($u&this._posMask)<<this._numPrevBits)+((255&Bu)>>>8-this._numPrevBits)]},_u.Decoder=function(){this._outWindow=new _u.OutWindow,this._rangeDecoder=new _u.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new _u.BitTreeDecoder(4),this._lenDecoder=new _u.LenDecoder,this._repLenDecoder=new _u.LenDecoder,this._literalDecoder=new _u.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new _u.BitTreeDecoder(6),this._posSlotDecoder[1]=new _u.BitTreeDecoder(6),this._posSlotDecoder[2]=new _u.BitTreeDecoder(6),this._posSlotDecoder[3]=new _u.BitTreeDecoder(6)},_u.Decoder.prototype.setDictionarySize=function($u){return!($u<0)&&(this._dictionarySize!==$u&&(this._dictionarySize=$u,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},_u.Decoder.prototype.setLcLpPb=function($u,Bu,Ru){var Lu=1<<Ru;return!($u>8||Bu>4||Ru>4)&&(this._literalDecoder.create(Bu,$u),this._lenDecoder.create(Lu),this._repLenDecoder.create(Lu),this._posStateMask=Lu-1,!0)},_u.Decoder.prototype.init=function(){var $u=4;for(this._outWindow.init(!1),_u.initBitModels(this._isMatchDecoders,192),_u.initBitModels(this._isRep0LongDecoders,192),_u.initBitModels(this._isRepDecoders,12),_u.initBitModels(this._isRepG0Decoders,12),_u.initBitModels(this._isRepG1Decoders,12),_u.initBitModels(this._isRepG2Decoders,12),_u.initBitModels(this._posDecoders,114),this._literalDecoder.init();$u--;)this._posSlotDecoder[$u].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},_u.Decoder.prototype.decode=function($u,Bu,Ru){var Lu,Ou,Fu,Nu,Vu,Uu,Gu=0,zu=0,Hu=0,ju=0,Qu=0,Xu=0,Ku=0;for(this._rangeDecoder.setStream($u),this._outWindow.setStream(Bu),this.init();Ru<0||Xu<Ru;)if(Lu=Xu&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Gu<<4)+Lu)===0)Ou=this._literalDecoder.getDecoder(Xu++,Ku),Ku=Gu>=7?Ou.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(zu)):Ou.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Ku),Gu=Gu<4?0:Gu-(Gu<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Gu)===1)Fu=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Gu)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Gu<<4)+Lu)===0&&(Gu=Gu<7?9:11,Fu=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Gu)===0?Nu=Hu:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Gu)===0?Nu=ju:(Nu=Qu,Qu=ju),ju=Hu),Hu=zu,zu=Nu),Fu===0&&(Fu=2+this._repLenDecoder.decode(this._rangeDecoder,Lu),Gu=Gu<7?8:11);else if(Qu=ju,ju=Hu,Hu=zu,Fu=2+this._lenDecoder.decode(this._rangeDecoder,Lu),Gu=Gu<7?7:10,(Vu=this._posSlotDecoder[Fu<=5?Fu-2:3].decode(this._rangeDecoder))>=4){if(zu=(2|1&Vu)<<(Uu=(Vu>>1)-1),Vu<14)zu+=_u.reverseDecode2(this._posDecoders,zu-Vu-1,this._rangeDecoder,Uu);else if(zu+=this._rangeDecoder.decodeDirectBits(Uu-4)<<4,(zu+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(zu===-1)break;return!1}}else zu=Vu;if(zu>=Xu||zu>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(zu,Fu),Xu+=Fu,Ku=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},_u.Decoder.prototype.setDecoderProperties=function($u){var Bu,Ru,Lu,Ou,Fu;return!($u.size<5)&&(Ru=(Bu=$u.readByte())%9,Lu=(Bu=~~(Bu/9))%5,Ou=~~(Bu/5),!!this.setLcLpPb(Ru,Lu,Ou)&&(Fu=$u.readByte(),Fu|=$u.readByte()<<8,Fu|=$u.readByte()<<16,Fu+=16777216*$u.readByte(),this.setDictionarySize(Fu)))},_u.decompress=function($u,Bu,Ru,Lu){var Ou=new _u.Decoder;if(!Ou.setDecoderProperties($u))throw"Incorrect stream properties";if(!Ou.decode(Bu,Ru,Lu))throw"Error in data stream";return!0},_u.decompressFile=function($u,Bu){var Ru,Lu=new _u.Decoder;if(!Lu.setDecoderProperties($u))throw"Incorrect stream properties";if(Ru=$u.readByte(),Ru|=$u.readByte()<<8,Ru|=$u.readByte()<<16,Ru+=16777216*$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),!Lu.decode($u,Bu,Ru))throw"Error in data stream";return!0},_u}var Wt$1=Gt$1(),Xt=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Gt$1.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Bu){try{var Ru={data:$u,offset:0,readByte:function(){return this.data[this.offset++]}},Lu=Ru.data.length,Ou={data:[],offset:0,writeByte:function(Vu){var Uu=Math.floor(this.offset/Lu);this.data[Uu]||(this.data[Uu]=new Uint8Array(Lu)),this.data[Uu][this.offset%Lu]=Vu,this.offset++}};_u.decompressFile(Ru,Ou);for(var Fu=new Uint8Array(Ou.offset),Nu=0;Nu<Ou.offset;Nu++)Fu[Nu]=Ou.data[Math.floor(Nu/Lu)][Nu%Lu];Bu(null,Fu)}catch(Vu){Bu(Vu)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(_u){for(var $u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bu=new Uint8Array(256),Ru=0;Ru<$u.length;Ru++)Bu[$u.charCodeAt(Ru)]=Ru;var Lu,Ou,Fu,Nu,Vu,Uu=.75*_u.length,Gu=_u.length,zu=0;_u[_u.length-1]==="="&&(Uu--,_u[_u.length-2]==="="&&Uu--);var Hu=new ArrayBuffer(Uu),ju=new Uint8Array(Hu);for(Lu=0;Lu<Gu;Lu+=4)Ou=Bu[_u.charCodeAt(Lu)],Fu=Bu[_u.charCodeAt(Lu+1)],Nu=Bu[_u.charCodeAt(Lu+2)],Vu=Bu[_u.charCodeAt(Lu+3)],ju[zu++]=Ou<<2|Fu>>4,ju[zu++]=(15&Fu)<<4|Nu>>2,ju[zu++]=(3&Nu)<<6|63&Vu;return Hu}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Bu){try{var Ru=new WebAssembly.Memory({initial:16}),Lu=new WebAssembly.Module(_u),Ou=new WebAssembly.Instance(Lu,{env:{memory:Ru,abort:function(){Bu(new Error("webAssembly abort"))}}}).exports,Fu=Ou.newU8Array($u.length);new Uint8Array(Ru.buffer,Fu+24,$u.length).set($u);var Nu=Ou.decode(Fu),Vu=new Uint32Array(Ru.buffer,Nu,4),Uu=Vu[0],Gu=Vu[2],zu=Vu[3];Uu?Bu(null,new Uint8Array(Ru.buffer,zu+24,Gu).slice(0,Gu)):Bu(new Error("lzma deocder error"))}catch(Hu){Bu(Hu)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Yt=typeof Worker!="undefined"&&typeof Blob!="undefined",Zt$1="";if(Yt)try{var Jt=new Blob([Xt],{type:"text/javascript"});Zt$1=URL.createObjectURL(Jt)}catch(_u){}var $t=function(){function _u(){var $u=this;if(!Yt)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var Bu=this.worker=new Worker(Zt$1);Bu.onmessage=function(Ru){var Lu=Ru.data,Ou=Lu.id,Fu=Lu.result,Nu=Lu.error,Vu=$u.getKey(Ou);$u.requests[Vu]&&(Nu?$u.requests[Vu](new Error(Nu)):$u.requests[Vu](null,Fu),delete $u.requests[Vu])},Bu.onerror=function(Ru){return console.error(Ru)}}return _u.prototype.getKey=function($u){return"key_"+String($u)},_u.prototype.decompress=function($u,Bu){var Ru=++this.callCounter;this.requests[this.getKey(Ru)]=Bu,this.worker.postMessage({type:"decompress",id:Ru,data:$u},[$u.buffer])},_u.prototype.terminate=function(){this.worker.terminate()},_u.support=Yt,_u}();function ei$1(_u){return Array.prototype.reduce.call(_u,function($u,Bu,Ru){return $u|Bu<<8*Ru},0)}function ti$1(_u){var $u=new Uint8Array(_u),Bu=ei$1($u.slice(0,4));if(Bu>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Ru=[],Lu=[],Ou=4+4*Bu,Fu=0;Fu<Bu;Fu++)Lu[Fu]=ei$1($u.slice(4+4*Fu,8+4*Fu)),Ru[Fu]=Fu===Bu-1?$u.subarray(Ou,Ou+Lu[Fu]):$u.slice(Ou,Ou+Lu[Fu]),Ou+=Lu[Fu];return $t.support?function(Nu){for(var Vu=[],Uu=Nu.length,Gu=function(Hu){Vu.push(new Promise(function(ju,Qu){var Xu=new $t;Xu.decompress(Nu[Hu],function(Ku,Wu){if(Xu.terminate(),Ku)return Qu(Ku);ju(Wu)})}))},zu=0;zu<Uu;zu++)Gu(zu);return Promise.all(Vu)}(Ru):Promise.resolve(function(Nu){for(var Vu,Uu=[],Gu=Nu.length,zu=function(ju){var Qu={data:Nu[ju],offset:0,readByte:function(){return this.data[this.offset++]}},Xu=Qu.data.length,Ku={data:[],offset:0,writeByte:function(qu){var Yu=Math.floor(this.offset/Xu);this.data[Yu]||(this.data[Yu]=new Uint8Array(Xu)),this.data[Yu][this.offset%Xu]=qu,this.offset++}};Wt$1.decompressFile(Qu,Ku),Vu=new Uint8Array(Ku.offset);for(var Wu=0;Wu<Ku.offset;Wu++)Vu[Wu]=Ku.data[Math.floor(Wu/Xu)][Wu%Xu];Uu.push(Vu)},Hu=0;Hu<Gu;Hu++)zu(Hu);return Uu}(Ru))}function ii(_u,$u){for(var Bu={},Ru=0,Lu=$u;Ru<Lu.length;Ru++){var Ou=Lu[Ru];Ou in _u&&(Bu[Ou]=_u[Ou])}return Bu}var ni$1=!1;try{ni$1=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(_u){}var ri=[];function oi$1(){var _u=this.src;this.onerror=this.onload=Qe$1,this.removeAttribute("src"),/^blob\:/.test(_u)&&URL.revokeObjectURL(_u),this.close=Qe$1}function si$1(){ri.push(this)}function ai(){return Object.assign(new Image,{crossOrigin:"",close:oi$1})}function li(_u){return new Promise(function($u,Bu){var Ru=ai();Ru.onload=function(){Ru.onload=Ru.onerror=Qe$1,setTimeout(function(){return $u(Ru)},30)},Ru.onerror=function(){var Lu=Ru.src;Ru.onload=Ru.onerror=Qe$1,Ru.close(),Bu(new Error("image load error: ".concat(Lu)))},Ru.src=URL.createObjectURL(_u)})}function ui(_u,$u){if($u&&(_u.width>$u.width||_u.height>$u.height)){var Bu=function(Vu,Uu){var Gu=ri.shift();if(Gu)return Gu.width=Vu,Gu.height=Uu,Gu;if(ni$1){var zu=new OffscreenCanvas(Vu,Uu);return Object.assign(zu,{close:si$1})}return zu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(zu,{close:si$1})}(Math.min(_u.width,$u.width),Math.min(_u.height,$u.height)),Ru=Bu.getContext("2d");Ru.clearRect(0,0,Bu.width,Bu.height),Ru.drawImage(_u,0,0,Bu.width,Bu.height),_u.close();var Lu=new r$3.Texture(Bu);Lu.needsUpdate=!0,Lu.flipY=!0;var Ou=Lu.dispose;return Lu.dispose=function(){Bu.close(),Ou.call(Lu),delete Lu.dispose},Lu}var Fu=new r$3.Texture(_u);Fu.needsUpdate=!0,Fu.minFilter=r$3.LinearFilter,Fu.magFilter=r$3.LinearFilter,Fu.flipY=!0;var Nu=Fu.dispose;return Fu.dispose=function(){_u.close(),Nu.call(Fu),delete Fu.dispose},Fu}var hi=new r$3.WebGLRenderTarget(1,1),ci=new r$3.OrthographicCamera(-1,1,1,-1,0,1),di=new r$3.BufferGeometry;di.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var pi=new r$3.Mesh(di),fi=new r$3.Scene;fi.add(pi);var Ai$1,gi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi(_u,$u,Bu){return $u.flipY!==void 0&&(_u.flipY=$u.flipY),$u.format!==void 0&&(_u.format=$u.format),$u.encoding!==void 0&&(_u.encoding=$u.encoding),$u.minFilter!==void 0&&(_u.minFilter=$u.minFilter),$u.magFilter!==void 0&&(_u.magFilter=$u.magFilter),Bu?new Promise(function(Ru){at.shared.add(function(){try{var Lu=Bu.getRenderTarget();Bu.setRenderTarget(hi),_u instanceof r$3.CubeTexture?(pi.material=mi,mi.uniforms.map.value=_u,Bu.render(fi,ci),mi.uniforms.map.value=null):(pi.material=gi,gi.uniforms.map.value=_u,Bu.render(fi,ci),mi.uniforms.map.value=null),Bu.setRenderTarget(Lu),Ru(_u)}catch{Ru(_u)}},!0,1)}):Promise.resolve(_u)}var yi$1=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,bi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},wi$1=((Ai$1={})[bi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai$1[bi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai$1),Ei$1=function(){function _u(){}return _u.setTranscoderPath=function($u){return this.transcoderPath=$u,this},_u.setWorkerLimit=function($u){return this.workerLimit=$u,this},_u.isInitialized=function(){return this.workerPool.filter(function($u){return $u._initialized}).length!==0},_u.detectSupport=function($u){var Bu=this.workerConfig;if(Bu.astcSupported=!!$u.extensions.get("WEBGL_compressed_texture_astc"),Bu.bptcSupported=!!$u.extensions.get("EXT_texture_compression_bptc"),Bu.etcSupported=!!$u.extensions.get("WEBGL_compressed_texture_etc1"),Bu.dxtSupported=!!$u.extensions.get("WEBGL_compressed_texture_s3tc"),Bu.pvrtcSupported=!!$u.extensions.get("WEBGL_compressed_texture_pvrtc")||!!$u.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),Bu.astcSupported)Bu.format=_u.BASIS_FORMAT.cTFASTC_4x4;else if(Bu.bptcSupported)Bu.format=_u.BASIS_FORMAT.cTFBC7_M5;else if(Bu.dxtSupported)Bu.format=_u.BASIS_FORMAT.cTFBC3;else if(Bu.pvrtcSupported)Bu.format=_u.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!Bu.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");Bu.format=_u.BASIS_FORMAT.cTFETC1}return this},_u.createTexture=function($u){var Bu,Ru,Lu=this,Ou=$u.byteLength,Fu=this._allocateWorker(Ou).then(function(Nu){return Bu=Nu,Ru=Lu.workerNextTaskID++,new Promise(function(Vu,Uu){Bu._callbacks[Ru]={resolve:Vu,reject:Uu},Bu.postMessage({type:"transcode",id:Ru,buffer:$u},[$u])})}).then(function(Nu){var Vu,Uu=Lu.workerConfig,Gu=Nu.width,zu=Nu.height,Hu=Nu.mipmaps;switch(Nu.format){case bi.cTFASTC_4x4:Vu=new r$3.CompressedTexture(Hu,Gu,zu,r$3.RGBA_ASTC_4x4_Format);break;case bi.cTFBC1:case bi.cTFBC3:Vu=new r$3.CompressedTexture(Hu,Gu,zu,wi$1[Uu.format],r$3.UnsignedByteType);break;case bi.cTFETC1:Vu=new r$3.CompressedTexture(Hu,Gu,zu,r$3.RGB_ETC1_Format);break;case bi.cTFPVRTC1_4_RGB:Vu=new r$3.CompressedTexture(Hu,Gu,zu,r$3.RGB_PVRTC_4BPPV1_Format);break;case bi.cTFPVRTC1_4_RGBA:Vu=new r$3.CompressedTexture(Hu,Gu,zu,r$3.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Vu.minFilter=Hu.length===1?r$3.LinearFilter:r$3.LinearMipmapLinearFilter,Vu.magFilter=r$3.LinearFilter,Vu.generateMipmaps=!1,Vu.needsUpdate=!0,Vu});return Fu.catch(function(){return!0}).then(function(){Bu&&Ru&&(Bu._taskLoad-=Ou,delete Bu._callbacks[Ru])}),Fu},_u._initTranscoder=function(){var $u=this;if(!this.transcoderPending){var Bu=new r$3.FileLoader;Bu.setPath(this.transcoderPath);var Ru=new Promise(function(Fu,Nu){Bu.load("basis_transcoder.js",Fu,void 0,Nu)}),Lu=new r$3.FileLoader;Lu.setPath(this.transcoderPath),Lu.setResponseType("arraybuffer");var Ou=new Promise(function(Fu,Nu){Lu.load("basis_transcoder.wasm",Fu,void 0,Nu)});this.transcoderPending=Promise.all([Ru,Ou]).then(function(Fu){var Nu=Fu[0],Vu=Fu[1],Uu=["/* basis_transcoder.js */",Nu,"/* worker */",yi$1].join(`
`);$u.workerSourceURL=URL.createObjectURL(new Blob([Uu])),$u.transcoderBinary=Vu})}return this.transcoderPending},_u._allocateWorker=function($u){var Bu=this;return this._initTranscoder().then(function(){if(Bu.workerPool.length<Bu.workerLimit){var Ru=function(Ou){var Fu=new Worker(Ou);return Object.assign(Fu,{_callbacks:{},_initialized:!1,_taskLoad:0})}(Bu.workerSourceURL);Ru._callbacks={},Ru._initialized=!1,Ru._taskLoad=0,Ru.postMessage({type:"init",config:Bu.workerConfig,transcoderBinary:Bu.transcoderBinary}),Ru.onmessage=function(Ou){var Fu=Ou.data;switch(Fu.type){case"initialized":Ru._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Ru._callbacks[Fu.id].resolve(Fu);break;case"error":Ru._callbacks[Fu.id].reject(Fu);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Fu.type,'"'))}},Bu.workerPool.push(Ru)}else Bu.workerPool.sort(function(Ou,Fu){return Ou._taskLoad>Fu._taskLoad?-1:1});var Lu=Bu.workerPool[Bu.workerPool.length-1];return Lu._taskLoad+=$u,Lu})},_u.prototype.dispose=function(){for(var $u=0;$u<_u.workerPool.length;$u++)_u.workerPool[$u].terminate();return _u.workerPool.length=0,this},_u.BASIS_FORMAT=bi,_u.DXT_FORMAT=xi,_u.DXT_FORMAT_MAP=wi$1,_u.transcoderPath="https://vr-public.realsee-cdn.cn/release/static/image/release/five/basis/",_u.transcoderBinary=null,_u.transcoderPending=null,_u.workerLimit=1,_u.workerPool=[],_u.workerNextTaskID=1,_u.workerSourceURL="",_u.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},_u}();function Mi$1(_u){var $u=_u.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return $u?$u[1]:location.protocol}var Ii=function(){function _u($u){this.timeout=$u.timeout,this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u},_u.prototype.load=function($u,Bu,Ru,Lu,Ou,Fu){var Nu;Bu===void 0&&(Bu={}),Ru===void 0&&(Ru=Qe$1),Lu===void 0&&(Lu=Qe$1),Ou===void 0&&(Ou=Qe$1);var Vu=Mi$1($u),Uu={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Gu=(Nu=Bu.viaAjax)!==null&&Nu!==void 0&&Nu,zu=Je$1($u),Hu=/^https?:$/.test(Vu),ju=/\.basis$/.test($e($u).split("?")[0]);if(zu?Gu=!0:Hu||(Gu=!1),Gu){if(ju){var Qu=null,Xu="arraybuffer";return Bu.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):it$1($u,t$3.__assign(t$3.__assign({},Uu),{responseType:Xu}),void 0,void 0,Ou).then(function(Yu){return Qu=Yu.meta,Ei$1.createTexture(Yu.body)}).then(function(Yu){return Bu.preInit!==!1?vi(Yu,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii(Bu,["wrapS","wrapT"])),Fu):Yu}).then(function(Yu){var Zu={meta:Qu,body:Yu};return Ru(Zu),Zu}).catch(function(Yu){return Lu(Yu),Promise.reject(Yu)})}return Xu="blob",it$1($u,t$3.__assign(t$3.__assign({},Uu),{responseType:Xu}),void 0,void 0,Ou).then(function(Yu){return li(Yu.body)}).then(function(Yu){return ui(Yu,Bu.maxSize)}).then(function(Yu){return Bu.preInit!==!1?vi(Yu,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Bu),Fu):Yu}).then(function(Yu){var Zu={meta:null,body:Yu};return Ru(Zu),Zu}).catch(function(Yu){return Lu(Yu),Promise.reject(Yu)})}if(ju){var Ku=new Error("cannot load basis texture via image");return Lu(Ku),Promise.reject(Ku)}var Wu=null,qu=ai();return rt$1($u,Uu,void 0,void 0,Ou,qu).then(function(Yu){return Wu=Yu.meta,ui(Yu.body,Bu.maxSize)}).then(function(Yu){return Bu.preInit!==!1?vi(Yu,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Bu),Fu):Yu}).then(function(Yu){var Zu={meta:Wu,body:Yu};return Ru(Zu),Zu}).catch(function(Yu){return qu.close(),Lu(Yu),Promise.reject(Yu)})},_u.prototype.loadCube=function($u,Bu,Ru,Lu,Ou,Fu){var Nu;Bu===void 0&&(Bu={}),Ru===void 0&&(Ru=Qe$1),Lu===void 0&&(Lu=Qe$1),Ou===void 0&&(Ou=Qe$1),performance.now(),Array.isArray($u)||($u=[$u.right,$u.left,$u.up,$u.down,$u.front,$u.back]);for(var Vu={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Uu=[],Gu=[0,0,0,0,0,0],zu=[],Hu=function(Xu){var Ku=$u[Xu],Wu=Mi$1(Ku),qu=function(_f){Gu[Xu]=_f,Ou(Gu.reduce(function(np,tp){return np+tp},0)/6)},Yu=(Nu=Bu.viaAjax)!==null&&Nu!==void 0&&Nu,Zu=/^https?:$/.test(Wu),_h=Je$1(Ku),ep=/\.basis$/.test($e(Ku).split("?")[0]);if(_h?Yu=!0:Zu||(Yu=!1),Yu)if(ep){var ip="arraybuffer",ap=it$1(Ku,t$3.__assign(t$3.__assign({},Vu),{responseType:ip}),void 0,void 0,qu).then(function(_f){return zu[Xu]=_f.meta,Ei$1.createTexture(_f.body)});Uu.push(ap)}else ip="blob",ap=it$1(Ku,t$3.__assign(t$3.__assign({},Vu),{responseType:ip}),void 0,void 0,qu).then(function(_f){return zu[Xu]=_f.meta,li(_f.body)}),Uu.push(ap);else{if(ep){var sp=new Error("cannot load basis texture via image");return Lu(sp),{value:Promise.reject(sp)}}var Ju=ai();ap=rt$1(Ku,Vu,void 0,void 0,qu,Ju).then(function(_f){return zu[Xu]=_f.meta,_f.body}).catch(function(_f){return Ju.close(),Promise.reject(_f)}),Uu.push(ap)}},ju=0;ju<6;ju++){var Qu=Hu(ju);if(typeof Qu=="object")return Qu.value}return Promise.all(Uu).then(function(Xu){return performance.now(),Xu[0]instanceof r$3.CompressedTexture?function(Ku){var Wu=new r$3.CubeTexture(Ku);Wu.needsUpdate=!0;var qu=Wu.dispose;return Wu.dispose=function(){for(var Yu=0,Zu=Ku;Yu<Zu.length;Yu++)Zu[Yu].dispose();qu.call(Wu),delete Wu.dispose},Wu.isCompressedTexture=!0,Wu.format=Ku[0].format,Wu.minFilter=Ku[0].minFilter,Wu.magFilter=Ku[0].magFilter,Wu}(Xu):function(Ku){var Wu=new r$3.CubeTexture(Ku);Wu.needsUpdate=!0,Wu.minFilter=r$3.LinearFilter,Wu.magFilter=r$3.LinearFilter,Wu.flipY=!1;var qu=Wu.dispose;return Wu.dispose=function(){for(var Yu=0,Zu=Ku;Yu<Zu.length;Yu++)Zu[Yu].close();qu.call(Wu),delete Wu.dispose},Wu}(Xu)}).then(function(Xu){return Bu.preInit!==!1?Xu.isCompressedTexture?vi(Xu,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii(Bu,["wrapS","wrapT"])),Fu):vi(Xu,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},Bu),Fu):Xu}).then(function(Xu){var Ku={body:Xu,meta:zu};return Ru(Ku),Ku}).catch(function(Xu){for(var Ku=0,Wu=Uu;Ku<Wu.length;Ku++)Wu[Ku].then(function(qu){qu instanceof r$3.Texture?qu.dispose():qu.close()}).catch(Qe$1);return Lu(Xu),Promise.reject(Xu)})},_u}();const Si=o$2.Reader,Ci=o$2.util,Bi$1=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Bi$1.Model=(()=>{function _u($u){if(this.chunks=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.chunks=Ci.emptyArray,_u.decode=function($u,Bu){$u instanceof Si||($u=Si.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new Bi$1.Model;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:Lu.chunks&&Lu.chunks.length||(Lu.chunks=[]),Lu.chunks.push(Bi$1.Chunk.decode($u,$u.uint32()));break;default:$u.skipType(7&Ou)}}return Lu},_u})();Bi$1.Chunk=(()=>{function _u($u){if($u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.vertices=null,_u.prototype.faces=null,_u.prototype.name="",_u.prototype.texture="",_u.decode=function($u,Bu){$u instanceof Si||($u=Si.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new Bi$1.Chunk;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:Lu.vertices=Bi$1.Vertices.decode($u,$u.uint32());break;case 2:Lu.faces=Bi$1.Faces.decode($u,$u.uint32());break;case 3:Lu.name=$u.string();break;case 4:Lu.texture=$u.string();break;default:$u.skipType(7&Ou)}}if(!Lu.hasOwnProperty("vertices"))throw Ci.ProtocolError("missing required 'vertices'",{instance:Lu});if(!Lu.hasOwnProperty("faces"))throw Ci.ProtocolError("missing required 'faces'",{instance:Lu});if(!Lu.hasOwnProperty("name"))throw Ci.ProtocolError("missing required 'name'",{instance:Lu});return Lu},_u})(),Bi$1.Vertices=(()=>{function _u($u){if(this.xyz=[],this.uvs=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.xyz=Ci.emptyArray,_u.prototype.uvs=Ci.emptyArray,_u.decode=function($u,Bu){$u instanceof Si||($u=Si.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new Bi$1.Vertices;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:if(Lu.xyz&&Lu.xyz.length||(Lu.xyz=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.xyz.push($u.float())}else Lu.xyz.push($u.float());break;case 2:if(Lu.uvs&&Lu.uvs.length||(Lu.uvs=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.uvs.push($u.float())}else Lu.uvs.push($u.float());break;default:$u.skipType(7&Ou)}}return Lu},_u})(),Bi$1.Faces=(()=>{function _u($u){if(this.indices=[],this.normals=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.indices=Ci.emptyArray,_u.prototype.normals=Ci.emptyArray,_u.decode=function($u,Bu){$u instanceof Si||($u=Si.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new Bi$1.Faces;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:if(Lu.indices&&Lu.indices.length||(Lu.indices=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.indices.push($u.uint32())}else Lu.indices.push($u.uint32());break;case 2:if(Lu.normals&&Lu.normals.length||(Lu.normals=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.normals.push($u.float())}else Lu.normals.push($u.float());break;default:$u.skipType(7&Ou)}}return Lu},_u})();var Pi=new r$3.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1).elements;function Ri(_u){var $u=_u.match(/(group|floor)-?(\d+)/);return $u?parseInt($u[2],10):0}function ki$1(_u){var $u=_u.match(/(chunk)-?(\d+)/);return $u?parseInt($u[2],10):0}function Di$1(_u){return 1e6*Ri(_u.name)+1e3*ki$1(_u.name)+function($u){var Bu=$u.match(/(sub)-?(\d+)/);return Bu?parseInt(Bu[2],10):0}(_u.name)}function Li$1(_u,$u,Bu,Ru,Lu){var Ou=t$3.__assign({key:"texture.pbm",basisLoaderInitialized:Ei$1.isInitialized()},ii($u,["format","quality","size","sharpen","mappings"]));return _u=$u.transform?$u.transform(_u,Ou):ct$1(_u,Ou),new Ii({allowHosts:Bu,requestProxy:Ru,networkSubscribe:Lu}).load(_u,{wrapS:r$3.ClampToEdgeWrapping,wrapT:r$3.ClampToEdgeWrapping,minFilter:r$3.LinearFilter,maxSize:typeof Ou.size=="number"?new r$3.Vector2(Ou.size,Ou.size):void 0,preInit:!0}).then(function(Fu){var Nu=Fu.body;return Nu.needsUpdate=!0,Nu})}function Oi$1(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){Lu===void 0&&(Lu={});for(var Vu=function(rp){for(var op,lp,up=[],cp=!0,Ap=0,yp=rp.chunks;Ap<yp.length;Ap++)if(!(Cm=yp[Ap]).faces.normals||Cm.faces.normals.length===0){cp=!1;break}for(var Ip=[],Ep=0,Vp=rp.chunks.sort(function(mm,Bm){return Di$1(mm)-Di$1(Bm)});Ep<Vp.length;Ep++){var $p=Ri((Cm=Vp[Ep]).name);Ip[$p]||(Ip[$p]=[]),Ip[$p].push(Cm)}for(var kp=0;kp<Ip.length;kp++){var Bp=Ip[kp];if(Bp)if(cp){for(var fp=0,dp=0;dp<Bp.length;dp++)fp+=(Cm=Bp[dp]).faces.indices.length;for(var bp=3*fp,gp=2*fp,wp=3*fp,Sp=new ArrayBuffer(4*bp+4*gp+4*wp),Cp=new Float32Array(Sp,0,bp),Lp=new Float32Array(Sp,4*bp,gp),zp=new Float32Array(Sp,4*bp+4*gp,wp),Dp=[],hp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],vp=0,Np=0;Np<Bp.length;Np++){var Fp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],qp=(Cm=Bp[Np]).vertices.xyz,jp=Cm.vertices.uvs,Xp=Cm.faces.indices,rm=Cm.faces.normals,em=Xp.length;for(dp=0;dp<em;dp++){var lm=Xp[dp],Zp=qp[3*lm],im=qp[3*lm+1],Jp=qp[3*lm+2],am=1/(Pi[3]*Zp+Pi[7]*im+Pi[11]*Jp+Pi[15]),Pp=(Pi[0]*Zp+Pi[4]*im+Pi[8]*Jp+Pi[12])*am,tm=(Pi[1]*Zp+Pi[5]*im+Pi[9]*Jp+Pi[13])*am,sm=(Pi[2]*Zp+Pi[6]*im+Pi[10]*Jp+Pi[14])*am;Cp[3*vp+3*dp]=Pp,Cp[3*vp+3*dp+1]=tm,Cp[3*vp+3*dp+2]=sm,Lp[2*vp+2*dp]=jp[2*lm],Lp[2*vp+2*dp+1]=jp[2*lm+1];var cm=3*Math.floor(dp/3),um=rm[cm],vm=rm[cm+1],_m=rm[cm+2],Mm=1/(Pi[3]*um+Pi[7]*vm+Pi[11]*_m+Pi[15]),Rm=(Pi[0]*um+Pi[4]*vm+Pi[8]*_m+Pi[12])*Mm,wm=(Pi[1]*um+Pi[5]*vm+Pi[9]*_m+Pi[13])*Mm,Pm=(Pi[2]*um+Pi[6]*vm+Pi[10]*_m+Pi[14])*Mm;zp[3*vp+3*dp]=Rm,zp[3*vp+3*dp+1]=wm,zp[3*vp+3*dp+2]=Pm,Pp<Fp[0]&&(Fp[0]=Pp),tm<Fp[1]&&(Fp[1]=tm),sm<Fp[2]&&(Fp[2]=sm),Pp>Fp[3]&&(Fp[3]=Pp),tm>Fp[4]&&(Fp[4]=tm),sm>Fp[5]&&(Fp[5]=sm)}Fp[0]<hp[0]&&(hp[0]=Fp[0]),Fp[1]<hp[1]&&(hp[1]=Fp[1]),Fp[2]<hp[2]&&(hp[2]=Fp[2]),Fp[3]>hp[3]&&(hp[3]=Fp[3]),Fp[4]>hp[4]&&(hp[4]=Fp[4]),Fp[5]>hp[5]&&(hp[5]=Fp[5]),Dp.push({materialIndex:Np,name:Cm.name,chunkName:ki$1(Cm.name),start:vp,count:Cm.faces.indices.length,texture:(op=Cm.texture)!==null&&op!==void 0?op:void 0}),vp+=em}up.push({floorIndex:kp,vertices:Cp,uvs:Lp,indices:null,normals:zp,groups:Dp,extents:hp})}else{fp=0;var Im=0;for(dp=0;dp<Bp.length;dp++)Im+=(Cm=Bp[dp]).vertices.xyz.length/3,fp+=Cm.faces.indices.length;bp=3*Im,gp=2*Im,wp=3*Im;var Sm=fp,Dm=(Sp=new ArrayBuffer(4*bp+4*gp+4*wp+4*Sm),Cp=new Float32Array(Sp,0,bp),Lp=new Float32Array(Sp,4*bp,gp),zp=new Float32Array(Sp,4*bp+4*gp,wp),new Uint32Array(Sp,4*bp+4*gp+4*wp,Sm)),Vm=(Dp=[],hp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],0);for(vp=0,Np=0;Np<Bp.length;Np++){Fp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],qp=(Cm=Bp[Np]).vertices.xyz,jp=Cm.vertices.uvs,Xp=Cm.faces.indices;var Cm,_p=qp.length/3;for(em=Xp.length,dp=0;dp<_p;dp++)Zp=qp[3*dp],im=qp[3*dp+1],Jp=qp[3*dp+2],am=1/(Pi[3]*Zp+Pi[7]*im+Pi[11]*Jp+Pi[15]),Pp=(Pi[0]*Zp+Pi[4]*im+Pi[8]*Jp+Pi[12])*am,tm=(Pi[1]*Zp+Pi[5]*im+Pi[9]*Jp+Pi[13])*am,sm=(Pi[2]*Zp+Pi[6]*im+Pi[10]*Jp+Pi[14])*am,Cp[3*vp+3*dp]=Pp,Cp[3*vp+3*dp+1]=tm,Cp[3*vp+3*dp+2]=sm,Lp[2*vp+2*dp]=jp[2*dp],Lp[2*vp+2*dp+1]=jp[2*dp+1],Pp<Fp[0]&&(Fp[0]=Pp),tm<Fp[1]&&(Fp[1]=tm),sm<Fp[2]&&(Fp[2]=sm),Pp>Fp[3]&&(Fp[3]=Pp),tm>Fp[4]&&(Fp[4]=tm),sm>Fp[5]&&(Fp[5]=sm);for(Fp[0]<hp[0]&&(hp[0]=Fp[0]),Fp[1]<hp[1]&&(hp[1]=Fp[1]),Fp[2]<hp[2]&&(hp[2]=Fp[2]),Fp[3]>hp[3]&&(hp[3]=Fp[3]),Fp[4]>hp[4]&&(hp[4]=Fp[4]),Fp[5]>hp[5]&&(hp[5]=Fp[5]),dp=0;dp<em;dp++)Dm[Vm+dp]=vp+Xp[dp];Dp.push({materialIndex:Np,name:Cm.name,chunkName:ki$1(Cm.name),start:Vm,count:Cm.faces.indices.length,texture:(lp=Cm.texture)!==null&&lp!==void 0?lp:void 0}),vp+=_p,Vm+=em}for(dp=0;dp<fp;dp+=3){var Hp,Gp,Qp,om,Am,gm,dm,pm,bm,Tm,pp,Mp,Tp,Up,Kp,fm;um=void 0,vm=void 0,_m=void 0,Hp=3*Dm[dp],Gp=3*Dm[dp+1],Qp=3*Dm[dp+2],om=Cp[Hp],Am=Cp[Hp+1],gm=Cp[Hp+2],dm=Cp[Gp],pm=Cp[Gp+1],bm=Cp[Gp+2],Tm=Cp[Qp],um=(Mp=Cp[Qp+1]-pm)*(fm=gm-bm)-(Tp=Cp[Qp+2]-bm)*(Kp=Am-pm),vm=Tp*(Up=om-dm)-(pp=Tm-dm)*fm,_m=pp*Kp-Mp*Up,zp[Hp]+=um,zp[Hp+1]+=vm,zp[Hp+2]+=_m,zp[Gp]+=um,zp[Gp+1]+=vm,zp[Gp+2]+=_m,zp[Qp]+=um,zp[Qp+1]+=vm,zp[Qp+2]+=_m}up.push({floorIndex:kp,vertices:Cp,uvs:Lp,indices:Dm,normals:zp,groups:Dp,extents:hp})}}return up}(_u),Uu=[],Gu=0,zu=Vu;Gu<zu.length;Gu++){var Hu=zu[Gu],ju=Hu.floorIndex,Qu=Hu.vertices,Xu=Hu.uvs,Ku=Hu.indices,Wu=Hu.normals,qu=Hu.groups,Yu=Hu.extents,Zu=new r$3.Box3;Zu.min.x=Yu[0],Zu.min.y=Yu[1],Zu.min.z=Yu[2],Zu.max.x=Yu[3],Zu.max.y=Yu[4],Zu.max.z=Yu[5];var _h=new r$3.BufferGeometry;_h.setAttribute("position",new r$3.BufferAttribute(Qu,3)),_h.setAttribute("uv",new r$3.BufferAttribute(Xu,2)),_h.setAttribute("normal",new r$3.BufferAttribute(Wu,3)),Ku&&_h.setIndex(new r$3.BufferAttribute(Ku,1)),_h.boundingBox=Zu,_h.boundingSphere=Zu.getBoundingSphere(new r$3.Sphere);for(var ep=0,ip=qu;ep<ip.length;ep++){var ap=ip[ep];_h.addGroup(ap.start,ap.count,ap.materialIndex)}for(var sp=[],Ju=function(rp){var op=Bu[rp.chunkName]||(rp.texture?$u+rp.texture:void 0),lp=new Mt;if(sp.push(lp),op){var up=void 0;op in Lu?up=Lu[op]:(up=Li$1(op,Ru,Ou,Fu,Nu),Lu[op]=up),up.then(function(cp){lp.uniforms.map.value=cp,lp.uniforms.exposure.value=3.3},function(){lp.defines.USE_MAP=!1,lp.uniforms.diffuse.value=new r$3.Color(16777215)})}else lp.defines.USE_MAP=!1,lp.uniforms.diffuse.value=new r$3.Color(16777215)},_f=0,np=qu;_f<np.length;_f++)Ju(ap=np[_f]);var tp=new ft(_h,sp);tp.name="model_floor_"+ju,tp.floorIndex=ju,Uu.push(tp)}return{objects:Uu,texturePromise:Promise.all(Object.keys(Lu).map(function(rp){return Lu[rp].catch(Qe$1)})).then(Qe$1)}}function Ni$1(_u,$u){return(_u=Object.assign({},_u)).autoResize!==!1&&($u>96?_u.size=Math.min(_u.size||1/0,100):$u>48?_u.size=Math.min(_u.size||1/0,200):$u>24?_u.size=Math.min(_u.size||1/0,400):$u>12?_u.size=Math.min(_u.size||1/0,800):$u>4&&(_u.size=Math.min(_u.size||1/0,1024))),_u}function Fi$1(_u){return _u.indexOf("//")===0||/^[0-9a-z]+\:/i.test(_u)}const Qi$1=o$2.Reader,Vi$1=o$2.util,_i$1=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Hi=_i$1.Model=(()=>{function _u($u){if(this.meshes=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.meshes=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Model;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:Lu.meshes&&Lu.meshes.length||(Lu.meshes=[]),Lu.meshes.push(_i$1.Mesh.decode($u,$u.uint32()));break;default:$u.skipType(7&Ou)}}return Lu},_u})();function qi$1(_u){for(var $u=[0,0,0],Bu=0;Bu<_u.attributes.normal.array.length/9;Bu++)$u[0]=_u.attributes.normal.array[9*Bu],$u[1]=_u.attributes.normal.array[9*Bu+1],$u[2]=_u.attributes.normal.array[9*Bu+2],_u.attributes.normal.array[9*Bu]=_u.attributes.normal.array[9*Bu+6],_u.attributes.normal.array[9*Bu+1]=_u.attributes.normal.array[9*Bu+7],_u.attributes.normal.array[9*Bu+2]=_u.attributes.normal.array[9*Bu+8],_u.attributes.normal.array[9*Bu+6]=$u[0],_u.attributes.normal.array[9*Bu+7]=$u[1],_u.attributes.normal.array[9*Bu+8]=$u[2];for(Bu=0;Bu<_u.attributes.position.array.length/9;Bu++)$u[0]=_u.attributes.position.array[9*Bu],$u[1]=_u.attributes.position.array[9*Bu+1],$u[2]=_u.attributes.position.array[9*Bu+2],_u.attributes.position.array[9*Bu]=_u.attributes.position.array[9*Bu+6],_u.attributes.position.array[9*Bu+1]=_u.attributes.position.array[9*Bu+7],_u.attributes.position.array[9*Bu+2]=_u.attributes.position.array[9*Bu+8],_u.attributes.position.array[9*Bu+6]=$u[0],_u.attributes.position.array[9*Bu+7]=$u[1],_u.attributes.position.array[9*Bu+8]=$u[2];for(Bu=0;Bu<_u.attributes.uv.array.length/6;Bu++)$u[0]=_u.attributes.uv.array[6*Bu],$u[1]=_u.attributes.uv.array[6*Bu+1],_u.attributes.uv.array[6*Bu]=_u.attributes.uv.array[6*Bu+4],_u.attributes.uv.array[6*Bu+1]=_u.attributes.uv.array[6*Bu+5],_u.attributes.uv.array[6*Bu+4]=$u[0],_u.attributes.uv.array[6*Bu+5]=$u[1];_u.attributes.normal.needsUpdate=!0,_u.attributes.position.needsUpdate=!0,_u.attributes.uv.needsUpdate=!0}function zi$1(_u){var $u=_u.position,Bu=_u.normal,Ru=_u.uv,Lu=_u.uv2,Ou=_u.groups,Fu=new r$3.BufferGeometry;Fu.setAttribute("position",new r$3.BufferAttribute(new Float32Array($u.array),3)),Bu&&Fu.setAttribute("normal",new r$3.BufferAttribute(new Float32Array(Bu.array),3)),Ru&&Fu.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(Ru.array),2)),Lu&&Fu.setAttribute("uv2",new r$3.BufferAttribute(new Float32Array(Lu.array),2));for(var Nu=0,Vu=Ou;Nu<Vu.length;Nu++){var Uu=Vu[Nu];Fu.addGroup(Uu.start,Uu.count,Uu.materialIndex)}return Fu}function Ki(_u,$u,Bu,Ru,Lu,Ou){if(Ou.hasOwnProperty(_u))return Ou[_u];Fi$1(_u=_u.split("?")[0])||(_u=$u+_u),(_u=_u.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(_u="https:"+_u);var Fu=t$3.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ei$1.isInitialized()},ii(Bu,["quality","format","sharpen","mappings"]));return Ou[_u=Bu.transform?Bu.transform(_u,Fu):ct$1(_u,Fu)]=Lu.load(_u,{wrapS:r$3.RepeatWrapping,wrapT:r$3.RepeatWrapping}).then(function(Nu){var Vu=Nu.body;return Ru&&Vu.repeat.copy(Ru),Vu.needsUpdate=!0,Vu.updateMatrix(),Vu})}function Ui$1(_u,$u,Bu,Ru,Lu){var Ou=[],Fu=new Mt,Nu=Fu.uniforms;Nu.exposure.value=4.3;var Vu=Fu.defines;if(Vu.USE_MAP=!1,Vu.USE_UV=!1,_u.kd&&(Nu.diffuse.value=new r$3.Color().fromArray(_u.kd.rgb)),_u.mapkd){var Uu=null;if(_u.mapkdrepeat){var Gu=_u.mapkdrepeat.split(/\s+/).map(function(Qu){return Number(Qu)}),zu=Gu[0],Hu=Gu[1];Uu=new r$3.Vector2(zu,Hu)}Ou.push(Ki(_u.mapkd,$u,Bu,Uu,Ru,Lu).then(function(Qu){Vu.USE_MAP=!0,Vu.USE_UV=!0,Nu.map.value=Qu,Nu.uvTransform.value=Qu.matrix,Fu.needsUpdate=!0}).catch(Qe$1))}if(_u.ks&&(Nu.specular.value=new r$3.Color().fromArray(_u.ks.rgb)),_u.mapks&&Ou.push(Ki(_u.mapks,$u,Bu,null,Ru,Lu).then(function(Qu){Nu.specularMap.value=Qu}).catch(Qe$1)),_u.ke&&(Nu.emissive.value=new r$3.Color().fromArray(_u.ke.rgb)),_u.mapke&&Ou.push(Ki(_u.mapke,$u,Bu,null,Ru,Lu).then(function(Qu){Nu.emissiveMap.value=Qu}).catch(Qe$1)),_u.norm&&Ou.push(Ki(_u.norm,$u,Bu,null,Ru,Lu).then(function(Qu){Nu.normalMap.value=Qu}).catch(Qe$1)),_u.mapbump&&Ou.push(Ki(_u.mapbump,$u,Bu,null,Ru,Lu).then(function(Qu){Nu.bumpMap.value=Qu}).catch(Qe$1)),_u.bump&&Ou.push(Ki(_u.bump,$u,Bu,null,Ru,Lu).then(function(Qu){Nu.bumpMap.value=Qu}).catch(Qe$1)),typeof _u.ns=="number"&&(Nu.shininess.value=_u.ns),typeof _u.d=="number"){var ju=_u.d;ju>0&&ju<1&&(Fu.originOpacity=ju,Fu.opacity=ju)}return{material:Fu,textureReady:Promise.all(Ou).then(Qe$1)}}function ji$1(_u,$u,Bu,Ru,Lu,Ou){for(var Fu,Nu=[],Vu=[],Uu=(Fu=_u,Hi.decode(Fu).meshes),Gu=new Ii({allowHosts:Ru,requestProxy:Lu,networkSubscribe:Ou}),zu=new r$3.Matrix4,Hu=new r$3.Vector3,ju=new r$3.Quaternion,Qu=new r$3.Vector3,Xu={},Ku=0,Wu=Uu;Ku<Wu.length;Ku++){var qu=Wu[Ku],Yu=qu.name,Zu=qu.chunks,_h=qu.matrix;if(Yu!=="Ceiling"&&Yu!=="CeilingDrop")for(var ep=0,ip=_h;ep<ip.length;ep++){var ap=ip[ep];zu.elements=ap.elements;var sp=new gt$1;sp.renderOrder=-3;for(var Ju=0;Ju<Zu.length;Ju++){var _f=zi$1(Zu[Ju].geometry);_f.applyMatrix4(zu),zu.decompose(Hu,ju,Qu),Qu.x*Qu.y*Qu.z<0&&_f.attributes.normal&&_f.attributes.position&&_f.attributes.uv&&qi$1(_f);for(var np=[],tp=0,rp=Zu[Ju].material;tp<rp.length;tp++){var op=Ui$1(rp[tp],$u,Bu,Gu,Xu),lp=op.material,up=op.textureReady;Vu.push(up),np.push(lp)}var cp=new ft(_f,np);cp.name="chunk_"+Ju,sp.add(cp)}sp.floorIndex=0,sp.name=Yu,Nu.push(sp)}}return{objects:Nu,texturePromise:Promise.all(Vu).catch(Qe$1)}}function Gi(_u,$u){if(!_u)throw new Error("math.gl assertion ".concat($u))}_i$1.Mesh=(()=>{function _u($u){if(this.chunks=[],this.matrix=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.name="",_u.prototype.chunks=Vi$1.emptyArray,_u.prototype.matrix=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Mesh;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:Lu.name=$u.string();break;case 2:Lu.chunks&&Lu.chunks.length||(Lu.chunks=[]),Lu.chunks.push(_i$1.Chunk.decode($u,$u.uint32()));break;case 3:Lu.matrix&&Lu.matrix.length||(Lu.matrix=[]),Lu.matrix.push(_i$1.Matrix.decode($u,$u.uint32()));break;default:$u.skipType(7&Ou)}}if(!Lu.hasOwnProperty("name"))throw Vi$1.ProtocolError("missing required 'name'",{instance:Lu});return Lu},_u})(),_i$1.Matrix=(()=>{function _u($u){if(this.elements=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.elements=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Matrix;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:if(Lu.elements&&Lu.elements.length||(Lu.elements=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.elements.push($u.float())}else Lu.elements.push($u.float());break;default:$u.skipType(7&Ou)}}return Lu},_u})(),_i$1.Chunk=(()=>{function _u($u){if(this.material=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.geometry=null,_u.prototype.material=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Chunk;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 2:Lu.geometry=_i$1.Geometry.decode($u,$u.uint32());break;case 3:Lu.material&&Lu.material.length||(Lu.material=[]),Lu.material.push(_i$1.Material.decode($u,$u.uint32()));break;default:$u.skipType(7&Ou)}}if(!Lu.hasOwnProperty("geometry"))throw Vi$1.ProtocolError("missing required 'geometry'",{instance:Lu});return Lu},_u})(),_i$1.Geometry=(()=>{function _u($u){if(this.groups=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.position=null,_u.prototype.uv=null,_u.prototype.uv2=null,_u.prototype.normal=null,_u.prototype.groups=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Geometry;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:Lu.position=_i$1.Position.decode($u,$u.uint32());break;case 2:Lu.uv=_i$1.UV.decode($u,$u.uint32());break;case 3:Lu.uv2=_i$1.UV.decode($u,$u.uint32());break;case 4:Lu.normal=_i$1.Normal.decode($u,$u.uint32());break;case 5:Lu.groups&&Lu.groups.length||(Lu.groups=[]),Lu.groups.push(_i$1.Group.decode($u,$u.uint32()));break;default:$u.skipType(7&Ou)}}if(!Lu.hasOwnProperty("position"))throw Vi$1.ProtocolError("missing required 'position'",{instance:Lu});if(!Lu.hasOwnProperty("normal"))throw Vi$1.ProtocolError("missing required 'normal'",{instance:Lu});return Lu},_u})(),_i$1.Position=(()=>{function _u($u){if(this.array=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.array=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Position;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:if(Lu.array&&Lu.array.length||(Lu.array=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.array.push($u.float())}else Lu.array.push($u.float());break;default:$u.skipType(7&Ou)}}return Lu},_u})(),_i$1.UV=(()=>{function _u($u){if(this.array=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.array=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.UV;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:if(Lu.array&&Lu.array.length||(Lu.array=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.array.push($u.float())}else Lu.array.push($u.float());break;default:$u.skipType(7&Ou)}}return Lu},_u})(),_i$1.Normal=(()=>{function _u($u){if(this.array=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.array=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Normal;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:if(Lu.array&&Lu.array.length||(Lu.array=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.array.push($u.float())}else Lu.array.push($u.float());break;default:$u.skipType(7&Ou)}}return Lu},_u})(),_i$1.Group=(()=>{function _u($u){if($u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.start=0,_u.prototype.count=0,_u.prototype.materialIndex=0,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Group;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:Lu.start=$u.uint32();break;case 2:Lu.count=$u.uint32();break;case 3:Lu.materialIndex=$u.uint32();break;default:$u.skipType(7&Ou)}}if(!Lu.hasOwnProperty("start"))throw Vi$1.ProtocolError("missing required 'start'",{instance:Lu});if(!Lu.hasOwnProperty("count"))throw Vi$1.ProtocolError("missing required 'count'",{instance:Lu});if(!Lu.hasOwnProperty("materialIndex"))throw Vi$1.ProtocolError("missing required 'materialIndex'",{instance:Lu});return Lu},_u})(),_i$1.Material=(()=>{function _u($u){if($u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.kd=null,_u.prototype.ks=null,_u.prototype.ke=null,_u.prototype.mapkd="",_u.prototype.mapks="",_u.prototype.mapke="",_u.prototype.norm="",_u.prototype.mapbump="",_u.prototype.bump="",_u.prototype.mapd="",_u.prototype.ns=0,_u.prototype.d=0,_u.prototype.tr=0,_u.prototype.mapkdrepeat="",_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Material;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:Lu.kd=_i$1.Color.decode($u,$u.uint32());break;case 2:Lu.ks=_i$1.Color.decode($u,$u.uint32());break;case 3:Lu.ke=_i$1.Color.decode($u,$u.uint32());break;case 4:Lu.mapkd=$u.string();break;case 5:Lu.mapks=$u.string();break;case 6:Lu.mapke=$u.string();break;case 7:Lu.norm=$u.string();break;case 8:Lu.mapbump=$u.string();break;case 9:Lu.bump=$u.string();break;case 10:Lu.mapd=$u.string();break;case 11:Lu.ns=$u.float();break;case 12:Lu.d=$u.float();break;case 13:Lu.tr=$u.float();break;case 14:Lu.mapkdrepeat=$u.string();break;default:$u.skipType(7&Ou)}}return Lu},_u})(),_i$1.Color=(()=>{function _u($u){if(this.rgb=[],$u)for(let Bu=Object.keys($u),Ru=0;Ru<Bu.length;++Ru)$u[Bu[Ru]]!=null&&(this[Bu[Ru]]=$u[Bu[Ru]])}return _u.prototype.rgb=Vi$1.emptyArray,_u.decode=function($u,Bu){$u instanceof Qi$1||($u=Qi$1.create($u));let Ru=Bu===void 0?$u.len:$u.pos+Bu,Lu=new _i$1.Color;for(;$u.pos<Ru;){let Ou=$u.uint32();switch(Ou>>>3){case 1:if(Lu.rgb&&Lu.rgb.length||(Lu.rgb=[]),(7&Ou)==2){let Fu=$u.uint32()+$u.pos;for(;$u.pos<Fu;)Lu.rgb.push($u.float())}else Lu.rgb.push($u.float());break;default:$u.skipType(7&Ou)}}return Lu},_u})();const Wi$1={};function Xi$1(_u,{precision:$u=Wi$1.precision||4}={}){return _u=function(Bu){return Math.round(Bu/Wi$1.EPSILON)*Wi$1.EPSILON}(_u),"".concat(parseFloat(_u.toPrecision($u)))}function Yi$1(_u){return Array.isArray(_u)||ArrayBuffer.isView(_u)&&!(_u instanceof DataView)}function Zi(_u,$u,Bu){const Ru=Wi$1.EPSILON;Bu&&(Wi$1.EPSILON=Bu);try{if(_u===$u)return!0;if(Yi$1(_u)&&Yi$1($u)){if(_u.length!==$u.length)return!1;for(let Lu=0;Lu<_u.length;++Lu)if(!Zi(_u[Lu],$u[Lu]))return!1;return!0}return _u&&_u.equals?_u.equals($u):$u&&$u.equals?$u.equals(_u):!(!Number.isFinite(_u)||!Number.isFinite($u))&&Math.abs(_u-$u)<=Wi$1.EPSILON*Math.max(1,Math.abs(_u),Math.abs($u))}finally{Wi$1.EPSILON=Ru}}Wi$1.EPSILON=1e-12,Wi$1.debug=!1,Wi$1.precision=4,Wi$1.printTypes=!1,Wi$1.printDegrees=!1,Wi$1.printRowMajor=!0;class Ji$1 extends function($u){function Bu(){var Ru=Reflect.construct($u,Array.from(arguments));return Object.setPrototypeOf(Ru,Object.getPrototypeOf(this)),Ru}return Bu.prototype=Object.create($u.prototype,{constructor:{value:$u,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Bu,$u):Bu.__proto__=$u,Bu}(Array){get ELEMENTS(){return Gi(!1),0}clone(){return new this.constructor().copy(this)}from($u){return Array.isArray($u)?this.copy($u):this.fromObject($u)}fromArray($u,Bu=0){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]=$u[Ru+Bu];return this.check()}to($u){return $u===this?this:Yi$1($u)?this.toArray($u):this.toObject($u)}toTarget($u){return $u?this.to($u):this}toArray($u=[],Bu=0){for(let Ru=0;Ru<this.ELEMENTS;++Ru)$u[Bu+Ru]=this[Ru];return $u}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wi$1)}formatString($u){let Bu="";for(let Ru=0;Ru<this.ELEMENTS;++Ru)Bu+=(Ru>0?", ":"")+Xi$1(this[Ru],$u);return"".concat($u.printTypes?this.constructor.name:"","[").concat(Bu,"]")}equals($u){if(!$u||this.length!==$u.length)return!1;for(let Bu=0;Bu<this.ELEMENTS;++Bu)if(!Zi(this[Bu],$u[Bu]))return!1;return!0}exactEquals($u){if(!$u||this.length!==$u.length)return!1;for(let Bu=0;Bu<this.ELEMENTS;++Bu)if(this[Bu]!==$u[Bu])return!1;return!0}negate(){for(let $u=0;$u<this.ELEMENTS;++$u)this[$u]=-this[$u];return this.check()}lerp($u,Bu,Ru){Ru===void 0&&(Ru=Bu,Bu=$u,$u=this);for(let Lu=0;Lu<this.ELEMENTS;++Lu){const Ou=$u[Lu];this[Lu]=Ou+Ru*(Bu[Lu]-Ou)}return this.check()}min($u){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]=Math.min($u[Bu],this[Bu]);return this.check()}max($u){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]=Math.max($u[Bu],this[Bu]);return this.check()}clamp($u,Bu){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]=Math.min(Math.max(this[Ru],$u[Ru]),Bu[Ru]);return this.check()}add(...$u){for(const Bu of $u)for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]+=Bu[Ru];return this.check()}subtract(...$u){for(const Bu of $u)for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]-=Bu[Ru];return this.check()}scale($u){if(Array.isArray($u))return this.multiply($u);for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]*=$u;return this.check()}sub($u){return this.subtract($u)}setScalar($u){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]=$u;return this.check()}addScalar($u){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]+=$u;return this.check()}subScalar($u){return this.addScalar(-$u)}multiplyScalar($u){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]*=$u;return this.check()}divideScalar($u){return this.scale(1/$u)}clampScalar($u,Bu){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]=Math.min(Math.max(this[Ru],$u),Bu);return this.check()}multiplyByScalar($u){return this.scale($u)}get elements(){return this}check(){if(Wi$1.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let $u=this.length===this.ELEMENTS;for(let Bu=0;Bu<this.ELEMENTS;++Bu)$u=$u&&Number.isFinite(this[Bu]);return $u}}function $i(_u){if(!Number.isFinite(_u))throw new Error("Invalid number ".concat(_u));return _u}function en$1(_u,$u,Bu=""){if(Wi$1.debug&&!function(Ru,Lu){if(Ru.length!==Lu)return!1;for(let Ou=0;Ou<Ru.length;++Ou)if(!Number.isFinite(Ru[Ou]))return!1;return!0}(_u,$u))throw new Error("math.gl: ".concat(Bu," some fields set to invalid numbers'"));return _u}const tn$1={};function nn(_u,$u){tn$1[_u]||(tn$1[_u]=!0,console.warn("".concat(_u," has been removed in version ").concat($u,", see upgrade guide for more information")))}class rn$1 extends Ji$1{get ELEMENTS(){return Gi(!1),0}copy($u){return Gi(!1),this}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let $u=0;for(let Bu=0;Bu<this.ELEMENTS;++Bu)$u+=this[Bu]*this[Bu];return $u}magnitudeSquared(){return this.lengthSquared()}distance($u){return Math.sqrt(this.distanceSquared($u))}distanceSquared($u){let Bu=0;for(let Ru=0;Ru<this.ELEMENTS;++Ru){const Lu=this[Ru]-$u[Ru];Bu+=Lu*Lu}return $i(Bu)}dot($u){let Bu=0;for(let Ru=0;Ru<this.ELEMENTS;++Ru)Bu+=this[Ru]*$u[Ru];return $i(Bu)}normalize(){const $u=this.magnitude();if($u!==0)for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]/=$u;return this.check()}multiply(...$u){for(const Bu of $u)for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]*=Bu[Ru];return this.check()}divide(...$u){for(const Bu of $u)for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]/=Bu[Ru];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo($u){return this.distance($u)}distanceToSquared($u){return this.distanceSquared($u)}getComponent($u){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),$i(this[$u])}setComponent($u,Bu){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),this[$u]=Bu,this.check()}addVectors($u,Bu){return this.copy($u).add(Bu)}subVectors($u,Bu){return this.copy($u).subtract(Bu)}multiplyVectors($u,Bu){return this.copy($u).multiply(Bu)}addScaledVector($u,Bu){return this.add(new this.constructor($u).multiplyScalar(Bu))}}var on=typeof Float32Array!="undefined"?Float32Array:Array;function sn$1(){var _u=new on(3);return on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u}function an$1(_u,$u,Bu){var Ru=new on(3);return Ru[0]=_u,Ru[1]=$u,Ru[2]=Bu,Ru}function ln$1(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]}function un$1(_u,$u,Bu){var Ru=$u[0],Lu=$u[1],Ou=$u[2],Fu=Bu[0],Nu=Bu[1],Vu=Bu[2];return _u[0]=Lu*Vu-Ou*Nu,_u[1]=Ou*Fu-Ru*Vu,_u[2]=Ru*Nu-Lu*Fu,_u}function hn(_u,$u,Bu){var Ru=$u[0],Lu=$u[1],Ou=$u[2],Fu=Bu[3]*Ru+Bu[7]*Lu+Bu[11]*Ou+Bu[15];return Fu=Fu||1,_u[0]=(Bu[0]*Ru+Bu[4]*Lu+Bu[8]*Ou+Bu[12])/Fu,_u[1]=(Bu[1]*Ru+Bu[5]*Lu+Bu[9]*Ou+Bu[13])/Fu,_u[2]=(Bu[2]*Ru+Bu[6]*Lu+Bu[10]*Ou+Bu[14])/Fu,_u}function cn$1(_u,$u,Bu){var Ru=$u[0],Lu=$u[1],Ou=$u[2];return _u[0]=Ru*Bu[0]+Lu*Bu[3]+Ou*Bu[6],_u[1]=Ru*Bu[1]+Lu*Bu[4]+Ou*Bu[7],_u[2]=Ru*Bu[2]+Lu*Bu[5]+Ou*Bu[8],_u}Math.hypot||(Math.hypot=function(){for(var _u=0,$u=arguments.length;$u--;)_u+=arguments[$u]*arguments[$u];return Math.sqrt(_u)});var dn$1=function(_u){var $u=_u[0],Bu=_u[1],Ru=_u[2];return Math.hypot($u,Bu,Ru)};function pn$1(_u,$u,Bu){const Ru=$u[0],Lu=$u[1],Ou=$u[2],Fu=Bu[3]*Ru+Bu[7]*Lu+Bu[11]*Ou||1;return _u[0]=(Bu[0]*Ru+Bu[4]*Lu+Bu[8]*Ou)/Fu,_u[1]=(Bu[1]*Ru+Bu[5]*Lu+Bu[9]*Ou)/Fu,_u[2]=(Bu[2]*Ru+Bu[6]*Lu+Bu[10]*Ou)/Fu,_u}sn$1();const fn=[0,0,0],An$1={};class gn extends rn$1{static get ZERO(){return An$1.ZERO=An$1.ZERO||Object.freeze(new gn(0,0,0,0))}constructor($u=0,Bu=0,Ru=0){super(-0,-0,-0),arguments.length===1&&Yi$1($u)?this.copy($u):(Wi$1.debug&&($i($u),$i(Bu),$i(Ru)),this[0]=$u,this[1]=Bu,this[2]=Ru)}set($u,Bu,Ru){return this[0]=$u,this[1]=Bu,this[2]=Ru,this.check()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this.check()}fromObject($u){return Wi$1.debug&&($i($u.x),$i($u.y),$i($u.z)),this[0]=$u.x,this[1]=$u.y,this[2]=$u.z,this.check()}toObject($u){return $u.x=this[0],$u.y=this[1],$u.z=this[2],$u}get ELEMENTS(){return 3}get z(){return this[2]}set z($u){this[2]=$i($u)}angle($u){return function(Bu,Ru){var Lu=Bu[0],Ou=Bu[1],Fu=Bu[2],Nu=Ru[0],Vu=Ru[1],Uu=Ru[2],Gu=Math.sqrt(Lu*Lu+Ou*Ou+Fu*Fu)*Math.sqrt(Nu*Nu+Vu*Vu+Uu*Uu),zu=Gu&&ln$1(Bu,Ru)/Gu;return Math.acos(Math.min(Math.max(zu,-1),1))}(this,$u)}cross($u){return un$1(this,this,$u),this.check()}rotateX({radians:$u,origin:Bu=fn}){return function(Ru,Lu,Ou,Fu){var Nu=[],Vu=[];Nu[0]=Lu[0]-Ou[0],Nu[1]=Lu[1]-Ou[1],Nu[2]=Lu[2]-Ou[2],Vu[0]=Nu[0],Vu[1]=Nu[1]*Math.cos(Fu)-Nu[2]*Math.sin(Fu),Vu[2]=Nu[1]*Math.sin(Fu)+Nu[2]*Math.cos(Fu),Ru[0]=Vu[0]+Ou[0],Ru[1]=Vu[1]+Ou[1],Ru[2]=Vu[2]+Ou[2]}(this,this,Bu,$u),this.check()}rotateY({radians:$u,origin:Bu=fn}){return function(Ru,Lu,Ou,Fu){var Nu=[],Vu=[];Nu[0]=Lu[0]-Ou[0],Nu[1]=Lu[1]-Ou[1],Nu[2]=Lu[2]-Ou[2],Vu[0]=Nu[2]*Math.sin(Fu)+Nu[0]*Math.cos(Fu),Vu[1]=Nu[1],Vu[2]=Nu[2]*Math.cos(Fu)-Nu[0]*Math.sin(Fu),Ru[0]=Vu[0]+Ou[0],Ru[1]=Vu[1]+Ou[1],Ru[2]=Vu[2]+Ou[2]}(this,this,Bu,$u),this.check()}rotateZ({radians:$u,origin:Bu=fn}){return function(Ru,Lu,Ou,Fu){var Nu=[],Vu=[];Nu[0]=Lu[0]-Ou[0],Nu[1]=Lu[1]-Ou[1],Nu[2]=Lu[2]-Ou[2],Vu[0]=Nu[0]*Math.cos(Fu)-Nu[1]*Math.sin(Fu),Vu[1]=Nu[0]*Math.sin(Fu)+Nu[1]*Math.cos(Fu),Vu[2]=Nu[2],Ru[0]=Vu[0]+Ou[0],Ru[1]=Vu[1]+Ou[1],Ru[2]=Vu[2]+Ou[2]}(this,this,Bu,$u),this.check()}transform($u){return this.transformAsPoint($u)}transformAsPoint($u){return hn(this,this,$u),this.check()}transformAsVector($u){return pn$1(this,this,$u),this.check()}transformByMatrix3($u){return cn$1(this,this,$u),this.check()}transformByMatrix2($u){return function(Bu,Ru,Lu){const Ou=Ru[0],Fu=Ru[1];Bu[0]=Lu[0]*Ou+Lu[2]*Fu,Bu[1]=Lu[1]*Ou+Lu[3]*Fu,Bu[2]=Ru[2]}(this,this,$u),this.check()}transformByQuaternion($u){return function(Bu,Ru,Lu){var Ou=Lu[0],Fu=Lu[1],Nu=Lu[2],Vu=Lu[3],Uu=Ru[0],Gu=Ru[1],zu=Ru[2],Hu=Fu*zu-Nu*Gu,ju=Nu*Uu-Ou*zu,Qu=Ou*Gu-Fu*Uu,Xu=Fu*Qu-Nu*ju,Ku=Nu*Hu-Ou*Qu,Wu=Ou*ju-Fu*Hu,qu=2*Vu;Hu*=qu,ju*=qu,Qu*=qu,Xu*=2,Ku*=2,Wu*=2,Bu[0]=Uu+Hu+Xu,Bu[1]=Gu+ju+Ku,Bu[2]=zu+Qu+Wu}(this,this,$u),this.check()}}var mn$1={throttleRequests:!0,maxRequests:5},vn$1=function(){function _u($u){$u===void 0&&($u={}),this.props=t$3.__assign(t$3.__assign({},mn$1),$u),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferred=null}return _u.prototype.scheduleRequest=function($u,Bu){if(Bu===void 0&&(Bu=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has($u))return this.requestMap.get($u);var Ru={identiy:$u,priority:0,getPriority:Bu,resolve:function(){}},Lu=new Promise(function(Ou){return Ru.resolve=Ou});return this.requestQueue.push(Ru),this.requestMap.set($u,Lu),this.issueNewRequests(),Lu},_u.prototype.issueRequest=function($u){var Bu=this,Ru=$u.identiy,Lu=$u.resolve,Ou=!1;this.activeRequestCount++,Lu({done:function(){Ou||(Ou=!0,Bu.requestMap.delete(Ru),Bu.activeRequestCount--,Bu.issueNewRequests())}})},_u.prototype.issueNewRequests=function(){var $u=this;this.deferred||(this.deferred=setTimeout(function(){return $u.issueNewRequestsAsync()},0))},_u.prototype.issueNewRequestsAsync=function(){this.deferred=null;var $u=Math.max(this.props.maxRequests-this.activeRequestCount,0);if($u!==0){this.updateAllRequests();for(var Bu=0;Bu<$u;Bu++){var Ru=this.requestQueue.shift();Ru&&this.issueRequest(Ru)}}},_u.prototype.updateAllRequests=function(){for(var $u=this.requestQueue,Bu=0;Bu<$u.length;Bu++){var Ru=$u[Bu];this.updateRequest(Ru)||($u.splice(Bu,1),this.requestMap.delete(Ru.identiy),Bu--)}$u.sort(function(Lu,Ou){return Lu.priority-Ou.priority})},_u.prototype.updateRequest=function($u){return $u.priority=$u.getPriority($u.identiy),!($u.priority<0)||($u.resolve(null),!1)},_u}(),yn=function(_u,$u,Bu){this.item=_u,this.previous=$u,this.next=Bu},bn$1=function(){function _u(){this.head=null,this.tail=null,this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.add=function($u){var Bu=new yn($u,this.tail,null);return this.tail?(this.tail.next=Bu,this.tail=Bu):(this.head=Bu,this.tail=Bu),this._length++,Bu},_u.prototype.remove=function($u){$u.previous&&$u.next?($u.previous.next=$u.next,$u.next.previous=$u.previous):$u.previous?($u.previous.next=null,this.tail=$u.previous):$u.next?($u.next.previous=null,this.head=$u.next):(this.head=null,this.tail=null),$u.next=null,$u.previous=null,this._length--},_u.prototype.splice=function($u,Bu){$u!==Bu&&(this.remove(Bu),this.insert($u,Bu))},_u.prototype.insert=function($u,Bu){var Ru=$u.next;$u.next=Bu,this.tail===$u?this.tail=Bu:Ru.previous=Bu,Bu.next=Ru,Bu.previous=$u,this._length++},_u}(),xn=function(){function _u(){this.list=new bn$1,this.sentinel=this.list.add("sentinel")}return _u.prototype.reset=function(){this.list.splice(this.list.tail,this.sentinel)},_u.prototype.touch=function($u){var Bu=$u.cacheNode;Bu&&this.list.splice(this.sentinel,Bu)},_u.prototype.add=function($u,Bu){$u.cacheNode||($u.cacheNode=this.list.add($u),Bu&&Bu($u))},_u.prototype.unloadTile=function($u,Bu){var Ru=$u.cacheNode;Ru&&(this.list.remove(Ru),$u.cacheNode=void 0,Bu&&Bu($u))},_u.prototype.unloadTiles=function($u,Bu){for(var Ru=this.list.head;Ru!==this.sentinel&&$u();){var Lu=Ru.item;Ru=Ru.next,this.unloadTile(Lu,Bu)}},_u}();class wn extends Ji$1{get ELEMENTS(){return Gi(!1),0}get RANK(){return Gi(!1),0}toString(){let $u="[";if(Wi$1.printRowMajor){$u+="row-major:";for(let Bu=0;Bu<this.RANK;++Bu)for(let Ru=0;Ru<this.RANK;++Ru)$u+=" ".concat(this[Ru*this.RANK+Bu])}else{$u+="column-major:";for(let Bu=0;Bu<this.ELEMENTS;++Bu)$u+=" ".concat(this[Bu])}return $u+="]",$u}getElementIndex($u,Bu){return Bu*this.RANK+$u}getElement($u,Bu){return this[Bu*this.RANK+$u]}setElement($u,Bu,Ru){return this[Bu*this.RANK+$u]=$i(Ru),this}getColumn($u,Bu=new Array(this.RANK).fill(-0)){const Ru=$u*this.RANK;for(let Lu=0;Lu<this.RANK;++Lu)Bu[Lu]=this[Ru+Lu];return Bu}setColumn($u,Bu){const Ru=$u*this.RANK;for(let Lu=0;Lu<this.RANK;++Lu)this[Ru+Lu]=Bu[Lu];return this}}function En(_u,$u,Bu){var Ru=$u[0],Lu=$u[1],Ou=$u[2],Fu=$u[3],Nu=$u[4],Vu=$u[5],Uu=$u[6],Gu=$u[7],zu=$u[8],Hu=$u[9],ju=$u[10],Qu=$u[11],Xu=$u[12],Ku=$u[13],Wu=$u[14],qu=$u[15],Yu=Bu[0],Zu=Bu[1],_h=Bu[2],ep=Bu[3];return _u[0]=Yu*Ru+Zu*Nu+_h*zu+ep*Xu,_u[1]=Yu*Lu+Zu*Vu+_h*Hu+ep*Ku,_u[2]=Yu*Ou+Zu*Uu+_h*ju+ep*Wu,_u[3]=Yu*Fu+Zu*Gu+_h*Qu+ep*qu,Yu=Bu[4],Zu=Bu[5],_h=Bu[6],ep=Bu[7],_u[4]=Yu*Ru+Zu*Nu+_h*zu+ep*Xu,_u[5]=Yu*Lu+Zu*Vu+_h*Hu+ep*Ku,_u[6]=Yu*Ou+Zu*Uu+_h*ju+ep*Wu,_u[7]=Yu*Fu+Zu*Gu+_h*Qu+ep*qu,Yu=Bu[8],Zu=Bu[9],_h=Bu[10],ep=Bu[11],_u[8]=Yu*Ru+Zu*Nu+_h*zu+ep*Xu,_u[9]=Yu*Lu+Zu*Vu+_h*Hu+ep*Ku,_u[10]=Yu*Ou+Zu*Uu+_h*ju+ep*Wu,_u[11]=Yu*Fu+Zu*Gu+_h*Qu+ep*qu,Yu=Bu[12],Zu=Bu[13],_h=Bu[14],ep=Bu[15],_u[12]=Yu*Ru+Zu*Nu+_h*zu+ep*Xu,_u[13]=Yu*Lu+Zu*Vu+_h*Hu+ep*Ku,_u[14]=Yu*Ou+Zu*Uu+_h*ju+ep*Wu,_u[15]=Yu*Fu+Zu*Gu+_h*Qu+ep*qu,_u}function Mn(_u,$u,Bu){var Ru=Bu[0],Lu=Bu[1],Ou=Bu[2];return _u[0]=$u[0]*Ru,_u[1]=$u[1]*Ru,_u[2]=$u[2]*Ru,_u[3]=$u[3]*Ru,_u[4]=$u[4]*Lu,_u[5]=$u[5]*Lu,_u[6]=$u[6]*Lu,_u[7]=$u[7]*Lu,_u[8]=$u[8]*Ou,_u[9]=$u[9]*Ou,_u[10]=$u[10]*Ou,_u[11]=$u[11]*Ou,_u[12]=$u[12],_u[13]=$u[13],_u[14]=$u[14],_u[15]=$u[15],_u}(function(){var _u;_u=new on(2),on!=Float32Array&&(_u[0]=0,_u[1]=0)})(),function(){var _u;_u=new on(4),on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=0)}();const In=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Sn=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Cn=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Bn={};class Tn extends wn{static get IDENTITY(){return Bn.IDENTITY=Bn.IDENTITY||Object.freeze(new Tn(In)),Bn.IDENTITY}static get ZERO(){return Bn.ZERO=Bn.ZERO||Object.freeze(new Tn(Sn)),Bn.ZERO}get INDICES(){return Cn}get ELEMENTS(){return 16}get RANK(){return 4}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this[9]=$u[9],this[10]=$u[10],this[11]=$u[11],this[12]=$u[12],this[13]=$u[13],this[14]=$u[14],this[15]=$u[15],this.check()}set($u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku){return this[0]=$u,this[1]=Bu,this[2]=Ru,this[3]=Lu,this[4]=Ou,this[5]=Fu,this[6]=Nu,this[7]=Vu,this[8]=Uu,this[9]=Gu,this[10]=zu,this[11]=Hu,this[12]=ju,this[13]=Qu,this[14]=Xu,this[15]=Ku,this.check()}setRowMajor($u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku){return this[0]=$u,this[1]=Ou,this[2]=Uu,this[3]=ju,this[4]=Bu,this[5]=Fu,this[6]=Gu,this[7]=Qu,this[8]=Ru,this[9]=Nu,this[10]=zu,this[11]=Xu,this[12]=Lu,this[13]=Vu,this[14]=Hu,this[15]=Ku,this.check()}toRowMajor($u){return $u[0]=this[0],$u[1]=this[4],$u[2]=this[8],$u[3]=this[12],$u[4]=this[1],$u[5]=this[5],$u[6]=this[9],$u[7]=this[13],$u[8]=this[2],$u[9]=this[6],$u[10]=this[10],$u[11]=this[14],$u[12]=this[3],$u[13]=this[7],$u[14]=this[11],$u[15]=this[15],$u}identity(){return this.copy(In)}fromQuaternion($u){return function(Bu,Ru){var Lu=Ru[0],Ou=Ru[1],Fu=Ru[2],Nu=Ru[3],Vu=Lu+Lu,Uu=Ou+Ou,Gu=Fu+Fu,zu=Lu*Vu,Hu=Ou*Vu,ju=Ou*Uu,Qu=Fu*Vu,Xu=Fu*Uu,Ku=Fu*Gu,Wu=Nu*Vu,qu=Nu*Uu,Yu=Nu*Gu;Bu[0]=1-ju-Ku,Bu[1]=Hu+Yu,Bu[2]=Qu-qu,Bu[3]=0,Bu[4]=Hu-Yu,Bu[5]=1-zu-Ku,Bu[6]=Xu+Wu,Bu[7]=0,Bu[8]=Qu+qu,Bu[9]=Xu-Wu,Bu[10]=1-zu-ju,Bu[11]=0,Bu[12]=0,Bu[13]=0,Bu[14]=0,Bu[15]=1}(this,$u),this.check()}frustum({left:$u,right:Bu,bottom:Ru,top:Lu,near:Ou,far:Fu}){return Fu===1/0?Tn._computeInfinitePerspectiveOffCenter(this,$u,Bu,Ru,Lu,Ou):function(Nu,Vu,Uu,Gu,zu,Hu,ju){var Qu=1/(Uu-Vu),Xu=1/(zu-Gu),Ku=1/(Hu-ju);Nu[0]=2*Hu*Qu,Nu[1]=0,Nu[2]=0,Nu[3]=0,Nu[4]=0,Nu[5]=2*Hu*Xu,Nu[6]=0,Nu[7]=0,Nu[8]=(Uu+Vu)*Qu,Nu[9]=(zu+Gu)*Xu,Nu[10]=(ju+Hu)*Ku,Nu[11]=-1,Nu[12]=0,Nu[13]=0,Nu[14]=ju*Hu*2*Ku,Nu[15]=0}(this,$u,Bu,Ru,Lu,Ou,Fu),this.check()}static _computeInfinitePerspectiveOffCenter($u,Bu,Ru,Lu,Ou,Fu){const Nu=2*Fu/(Ru-Bu),Vu=2*Fu/(Ou-Lu),Uu=(Ru+Bu)/(Ru-Bu),Gu=(Ou+Lu)/(Ou-Lu),zu=-2*Fu;return $u[0]=Nu,$u[1]=0,$u[2]=0,$u[3]=0,$u[4]=0,$u[5]=Vu,$u[6]=0,$u[7]=0,$u[8]=Uu,$u[9]=Gu,$u[10]=-1,$u[11]=-1,$u[12]=0,$u[13]=0,$u[14]=zu,$u[15]=0,$u}lookAt($u,Bu,Ru){return arguments.length===1&&({eye:$u,center:Bu,up:Ru}=$u),function(Lu,Ou,Fu,Nu){var Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu,qu=Ou[0],Yu=Ou[1],Zu=Ou[2],_h=Nu[0],ep=Nu[1],ip=Nu[2],ap=Fu[0],sp=Fu[1],Ju=Fu[2];Math.abs(qu-ap)<1e-6&&Math.abs(Yu-sp)<1e-6&&Math.abs(Zu-Ju)<1e-6?function(_f){_f[0]=1,_f[1]=0,_f[2]=0,_f[3]=0,_f[4]=0,_f[5]=1,_f[6]=0,_f[7]=0,_f[8]=0,_f[9]=0,_f[10]=1,_f[11]=0,_f[12]=0,_f[13]=0,_f[14]=0,_f[15]=1}(Lu):(Qu=qu-ap,Xu=Yu-sp,Ku=Zu-Ju,Vu=ep*(Ku*=Wu=1/Math.hypot(Qu,Xu,Ku))-ip*(Xu*=Wu),Uu=ip*(Qu*=Wu)-_h*Ku,Gu=_h*Xu-ep*Qu,(Wu=Math.hypot(Vu,Uu,Gu))?(Vu*=Wu=1/Wu,Uu*=Wu,Gu*=Wu):(Vu=0,Uu=0,Gu=0),zu=Xu*Gu-Ku*Uu,Hu=Ku*Vu-Qu*Gu,ju=Qu*Uu-Xu*Vu,(Wu=Math.hypot(zu,Hu,ju))?(zu*=Wu=1/Wu,Hu*=Wu,ju*=Wu):(zu=0,Hu=0,ju=0),Lu[0]=Vu,Lu[1]=zu,Lu[2]=Qu,Lu[3]=0,Lu[4]=Uu,Lu[5]=Hu,Lu[6]=Xu,Lu[7]=0,Lu[8]=Gu,Lu[9]=ju,Lu[10]=Ku,Lu[11]=0,Lu[12]=-(Vu*qu+Uu*Yu+Gu*Zu),Lu[13]=-(zu*qu+Hu*Yu+ju*Zu),Lu[14]=-(Qu*qu+Xu*Yu+Ku*Zu),Lu[15]=1)}(this,$u,Bu=Bu||[0,0,0],Ru=Ru||[0,1,0]),this.check()}ortho({left:$u,right:Bu,bottom:Ru,top:Lu,near:Ou=.1,far:Fu=500}){return function(Nu,Vu,Uu,Gu,zu,Hu,ju){var Qu=1/(Vu-Uu),Xu=1/(Gu-zu),Ku=1/(Hu-ju);Nu[0]=-2*Qu,Nu[1]=0,Nu[2]=0,Nu[3]=0,Nu[4]=0,Nu[5]=-2*Xu,Nu[6]=0,Nu[7]=0,Nu[8]=0,Nu[9]=0,Nu[10]=2*Ku,Nu[11]=0,Nu[12]=(Vu+Uu)*Qu,Nu[13]=(zu+Gu)*Xu,Nu[14]=(ju+Hu)*Ku,Nu[15]=1}(this,$u,Bu,Ru,Lu,Ou,Fu),this.check()}orthographic({fovy:$u=45*Math.PI/180,aspect:Bu=1,focalDistance:Ru=1,near:Lu=.1,far:Ou=500}){if($u>2*Math.PI)throw Error("radians");const Fu=$u/2,Nu=Ru*Math.tan(Fu),Vu=Nu*Bu;return new Tn().ortho({left:-Vu,right:Vu,bottom:-Nu,top:Nu,near:Lu,far:Ou})}perspective({fovy:$u,fov:Bu=45*Math.PI/180,aspect:Ru=1,near:Lu=.1,far:Ou=500}={}){if(($u=$u||Bu)>2*Math.PI)throw Error("radians");return function(Fu,Nu,Vu,Uu,Gu){var zu,Hu=1/Math.tan(Nu/2);Fu[0]=Hu/Vu,Fu[1]=0,Fu[2]=0,Fu[3]=0,Fu[4]=0,Fu[5]=Hu,Fu[6]=0,Fu[7]=0,Fu[8]=0,Fu[9]=0,Fu[11]=-1,Fu[12]=0,Fu[13]=0,Fu[15]=0,Gu!=null&&Gu!==1/0?(zu=1/(Uu-Gu),Fu[10]=(Gu+Uu)*zu,Fu[14]=2*Gu*Uu*zu):(Fu[10]=-1,Fu[14]=-2*Uu)}(this,$u,Ru,Lu,Ou),this.check()}determinant(){return Bu=($u=this)[0],Ru=$u[1],Lu=$u[2],Ou=$u[3],Fu=$u[4],Nu=$u[5],Vu=$u[6],Uu=$u[7],Gu=$u[8],zu=$u[9],Hu=$u[10],ju=$u[11],Qu=$u[12],Xu=$u[13],Ku=$u[14],Wu=$u[15],(Bu*Nu-Ru*Fu)*(Hu*Wu-ju*Ku)-(Bu*Vu-Lu*Fu)*(zu*Wu-ju*Xu)+(Bu*Uu-Ou*Fu)*(zu*Ku-Hu*Xu)+(Ru*Vu-Lu*Nu)*(Gu*Wu-ju*Qu)-(Ru*Uu-Ou*Nu)*(Gu*Ku-Hu*Qu)+(Lu*Uu-Ou*Vu)*(Gu*Xu-zu*Qu);var $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu}getScale($u=[-0,-0,-0]){return $u[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),$u[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),$u[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),$u}getTranslation($u=[-0,-0,-0]){return $u[0]=this[12],$u[1]=this[13],$u[2]=this[14],$u}getRotation($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Bu=null){const Ru=this.getScale(Bu||[-0,-0,-0]),Lu=1/Ru[0],Ou=1/Ru[1],Fu=1/Ru[2];return $u[0]=this[0]*Lu,$u[1]=this[1]*Ou,$u[2]=this[2]*Fu,$u[3]=0,$u[4]=this[4]*Lu,$u[5]=this[5]*Ou,$u[6]=this[6]*Fu,$u[7]=0,$u[8]=this[8]*Lu,$u[9]=this[9]*Ou,$u[10]=this[10]*Fu,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,$u}getRotationMatrix3($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0],Bu=null){const Ru=this.getScale(Bu||[-0,-0,-0]),Lu=1/Ru[0],Ou=1/Ru[1],Fu=1/Ru[2];return $u[0]=this[0]*Lu,$u[1]=this[1]*Ou,$u[2]=this[2]*Fu,$u[3]=this[4]*Lu,$u[4]=this[5]*Ou,$u[5]=this[6]*Fu,$u[6]=this[8]*Lu,$u[7]=this[9]*Ou,$u[8]=this[10]*Fu,$u}transpose(){return function($u,Bu){if($u===Bu){var Ru=Bu[1],Lu=Bu[2],Ou=Bu[3],Fu=Bu[6],Nu=Bu[7],Vu=Bu[11];$u[1]=Bu[4],$u[2]=Bu[8],$u[3]=Bu[12],$u[4]=Ru,$u[6]=Bu[9],$u[7]=Bu[13],$u[8]=Lu,$u[9]=Fu,$u[11]=Bu[14],$u[12]=Ou,$u[13]=Nu,$u[14]=Vu}else $u[0]=Bu[0],$u[1]=Bu[4],$u[2]=Bu[8],$u[3]=Bu[12],$u[4]=Bu[1],$u[5]=Bu[5],$u[6]=Bu[9],$u[7]=Bu[13],$u[8]=Bu[2],$u[9]=Bu[6],$u[10]=Bu[10],$u[11]=Bu[14],$u[12]=Bu[3],$u[13]=Bu[7],$u[14]=Bu[11],$u[15]=Bu[15]}(this,this),this.check()}invert(){var $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu,qu,Yu,Zu,_h,ep,ip,ap,sp,Ju,_f,np,tp,rp,op;return $u=this,Ru=(Bu=this)[0],Lu=Bu[1],Ou=Bu[2],Fu=Bu[3],Nu=Bu[4],Vu=Bu[5],Uu=Bu[6],Gu=Bu[7],zu=Bu[8],Hu=Bu[9],ju=Bu[10],Qu=Bu[11],Xu=Bu[12],Ku=Bu[13],Wu=Bu[14],qu=Bu[15],(op=(Yu=Ru*Vu-Lu*Nu)*(rp=ju*qu-Qu*Wu)-(Zu=Ru*Uu-Ou*Nu)*(tp=Hu*qu-Qu*Ku)+(_h=Ru*Gu-Fu*Nu)*(np=Hu*Wu-ju*Ku)+(ep=Lu*Uu-Ou*Vu)*(_f=zu*qu-Qu*Xu)-(ip=Lu*Gu-Fu*Vu)*(Ju=zu*Wu-ju*Xu)+(ap=Ou*Gu-Fu*Uu)*(sp=zu*Ku-Hu*Xu))&&(op=1/op,$u[0]=(Vu*rp-Uu*tp+Gu*np)*op,$u[1]=(Ou*tp-Lu*rp-Fu*np)*op,$u[2]=(Ku*ap-Wu*ip+qu*ep)*op,$u[3]=(ju*ip-Hu*ap-Qu*ep)*op,$u[4]=(Uu*_f-Nu*rp-Gu*Ju)*op,$u[5]=(Ru*rp-Ou*_f+Fu*Ju)*op,$u[6]=(Wu*_h-Xu*ap-qu*Zu)*op,$u[7]=(zu*ap-ju*_h+Qu*Zu)*op,$u[8]=(Nu*tp-Vu*_f+Gu*sp)*op,$u[9]=(Lu*_f-Ru*tp-Fu*sp)*op,$u[10]=(Xu*ip-Ku*_h+qu*Yu)*op,$u[11]=(Hu*_h-zu*ip-Qu*Yu)*op,$u[12]=(Vu*Ju-Nu*np-Uu*sp)*op,$u[13]=(Ru*np-Lu*Ju+Ou*sp)*op,$u[14]=(Ku*Zu-Xu*ep-Wu*Yu)*op,$u[15]=(zu*ep-Hu*Zu+ju*Yu)*op),this.check()}multiplyLeft($u){return En(this,$u,this),this.check()}multiplyRight($u){return En(this,this,$u),this.check()}rotateX($u){var Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu;return Bu=this,Ru=this,Lu=$u,Ou=Math.sin(Lu),Fu=Math.cos(Lu),Nu=Ru[4],Vu=Ru[5],Uu=Ru[6],Gu=Ru[7],zu=Ru[8],Hu=Ru[9],ju=Ru[10],Qu=Ru[11],Ru!==Bu&&(Bu[0]=Ru[0],Bu[1]=Ru[1],Bu[2]=Ru[2],Bu[3]=Ru[3],Bu[12]=Ru[12],Bu[13]=Ru[13],Bu[14]=Ru[14],Bu[15]=Ru[15]),Bu[4]=Nu*Fu+zu*Ou,Bu[5]=Vu*Fu+Hu*Ou,Bu[6]=Uu*Fu+ju*Ou,Bu[7]=Gu*Fu+Qu*Ou,Bu[8]=zu*Fu-Nu*Ou,Bu[9]=Hu*Fu-Vu*Ou,Bu[10]=ju*Fu-Uu*Ou,Bu[11]=Qu*Fu-Gu*Ou,this.check()}rotateY($u){var Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu;return Bu=this,Ru=this,Lu=$u,Ou=Math.sin(Lu),Fu=Math.cos(Lu),Nu=Ru[0],Vu=Ru[1],Uu=Ru[2],Gu=Ru[3],zu=Ru[8],Hu=Ru[9],ju=Ru[10],Qu=Ru[11],Ru!==Bu&&(Bu[4]=Ru[4],Bu[5]=Ru[5],Bu[6]=Ru[6],Bu[7]=Ru[7],Bu[12]=Ru[12],Bu[13]=Ru[13],Bu[14]=Ru[14],Bu[15]=Ru[15]),Bu[0]=Nu*Fu-zu*Ou,Bu[1]=Vu*Fu-Hu*Ou,Bu[2]=Uu*Fu-ju*Ou,Bu[3]=Gu*Fu-Qu*Ou,Bu[8]=Nu*Ou+zu*Fu,Bu[9]=Vu*Ou+Hu*Fu,Bu[10]=Uu*Ou+ju*Fu,Bu[11]=Gu*Ou+Qu*Fu,this.check()}rotateZ($u){var Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu;return Bu=this,Ru=this,Lu=$u,Ou=Math.sin(Lu),Fu=Math.cos(Lu),Nu=Ru[0],Vu=Ru[1],Uu=Ru[2],Gu=Ru[3],zu=Ru[4],Hu=Ru[5],ju=Ru[6],Qu=Ru[7],Ru!==Bu&&(Bu[8]=Ru[8],Bu[9]=Ru[9],Bu[10]=Ru[10],Bu[11]=Ru[11],Bu[12]=Ru[12],Bu[13]=Ru[13],Bu[14]=Ru[14],Bu[15]=Ru[15]),Bu[0]=Nu*Fu+zu*Ou,Bu[1]=Vu*Fu+Hu*Ou,Bu[2]=Uu*Fu+ju*Ou,Bu[3]=Gu*Fu+Qu*Ou,Bu[4]=zu*Fu-Nu*Ou,Bu[5]=Hu*Fu-Vu*Ou,Bu[6]=ju*Fu-Uu*Ou,Bu[7]=Qu*Fu-Gu*Ou,this.check()}rotateXYZ([$u,Bu,Ru]){return this.rotateX($u).rotateY(Bu).rotateZ(Ru)}rotateAxis($u,Bu){return function(Ru,Lu,Ou,Fu){var Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu,qu,Yu,Zu,_h,ep,ip,ap,sp,Ju,_f,np,tp,rp,op=Fu[0],lp=Fu[1],up=Fu[2],cp=Math.hypot(op,lp,up);cp<1e-6||(op*=cp=1/cp,lp*=cp,up*=cp,Nu=Math.sin(Ou),Uu=1-(Vu=Math.cos(Ou)),Gu=Lu[0],zu=Lu[1],Hu=Lu[2],ju=Lu[3],Qu=Lu[4],Xu=Lu[5],Ku=Lu[6],Wu=Lu[7],qu=Lu[8],Yu=Lu[9],Zu=Lu[10],_h=Lu[11],ep=op*op*Uu+Vu,ip=lp*op*Uu+up*Nu,ap=up*op*Uu-lp*Nu,sp=op*lp*Uu-up*Nu,Ju=lp*lp*Uu+Vu,_f=up*lp*Uu+op*Nu,np=op*up*Uu+lp*Nu,tp=lp*up*Uu-op*Nu,rp=up*up*Uu+Vu,Ru[0]=Gu*ep+Qu*ip+qu*ap,Ru[1]=zu*ep+Xu*ip+Yu*ap,Ru[2]=Hu*ep+Ku*ip+Zu*ap,Ru[3]=ju*ep+Wu*ip+_h*ap,Ru[4]=Gu*sp+Qu*Ju+qu*_f,Ru[5]=zu*sp+Xu*Ju+Yu*_f,Ru[6]=Hu*sp+Ku*Ju+Zu*_f,Ru[7]=ju*sp+Wu*Ju+_h*_f,Ru[8]=Gu*np+Qu*tp+qu*rp,Ru[9]=zu*np+Xu*tp+Yu*rp,Ru[10]=Hu*np+Ku*tp+Zu*rp,Ru[11]=ju*np+Wu*tp+_h*rp,Lu!==Ru&&(Ru[12]=Lu[12],Ru[13]=Lu[13],Ru[14]=Lu[14],Ru[15]=Lu[15]))}(this,this,$u,Bu),this.check()}scale($u){return Array.isArray($u)?Mn(this,this,$u):Mn(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Bu,Ru,Lu){var Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu=Lu[0],qu=Lu[1],Yu=Lu[2];Ru===Bu?(Bu[12]=Ru[0]*Wu+Ru[4]*qu+Ru[8]*Yu+Ru[12],Bu[13]=Ru[1]*Wu+Ru[5]*qu+Ru[9]*Yu+Ru[13],Bu[14]=Ru[2]*Wu+Ru[6]*qu+Ru[10]*Yu+Ru[14],Bu[15]=Ru[3]*Wu+Ru[7]*qu+Ru[11]*Yu+Ru[15]):(Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Uu=Ru[4],Gu=Ru[5],zu=Ru[6],Hu=Ru[7],ju=Ru[8],Qu=Ru[9],Xu=Ru[10],Ku=Ru[11],Bu[0]=Ou,Bu[1]=Fu,Bu[2]=Nu,Bu[3]=Vu,Bu[4]=Uu,Bu[5]=Gu,Bu[6]=zu,Bu[7]=Hu,Bu[8]=ju,Bu[9]=Qu,Bu[10]=Xu,Bu[11]=Ku,Bu[12]=Ou*Wu+Uu*qu+ju*Yu+Ru[12],Bu[13]=Fu*Wu+Gu*qu+Qu*Yu+Ru[13],Bu[14]=Nu*Wu+zu*qu+Xu*Yu+Ru[14],Bu[15]=Vu*Wu+Hu*qu+Ku*Yu+Ru[15])}(this,this,$u),this.check()}transform($u,Bu){return $u.length===4?(en$1(Bu=function(Ru,Lu,Ou){var Fu=Lu[0],Nu=Lu[1],Vu=Lu[2],Uu=Lu[3];return Ru[0]=Ou[0]*Fu+Ou[4]*Nu+Ou[8]*Vu+Ou[12]*Uu,Ru[1]=Ou[1]*Fu+Ou[5]*Nu+Ou[9]*Vu+Ou[13]*Uu,Ru[2]=Ou[2]*Fu+Ou[6]*Nu+Ou[10]*Vu+Ou[14]*Uu,Ru[3]=Ou[3]*Fu+Ou[7]*Nu+Ou[11]*Vu+Ou[15]*Uu,Ru}(Bu||[-0,-0,-0,-0],$u,this),4),Bu):this.transformAsPoint($u,Bu)}transformAsPoint($u,Bu){const{length:Ru}=$u;switch(Ru){case 2:Lu=Bu||[-0,-0],Fu=this,Nu=(Ou=$u)[0],Vu=Ou[1],Lu[0]=Fu[0]*Nu+Fu[4]*Vu+Fu[12],Lu[1]=Fu[1]*Nu+Fu[5]*Vu+Fu[13],Bu=Lu;break;case 3:Bu=hn(Bu||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}var Lu,Ou,Fu,Nu,Vu;return en$1(Bu,$u.length),Bu}transformAsVector($u,Bu){switch($u.length){case 2:Bu=function(Ru,Lu,Ou){const Fu=Lu[0],Nu=Lu[1],Vu=Ou[3]*Fu+Ou[7]*Nu||1;return Ru[0]=(Ou[0]*Fu+Ou[4]*Nu)/Vu,Ru[1]=(Ou[1]*Fu+Ou[5]*Nu)/Vu,Ru}(Bu||[-0,-0],$u,this);break;case 3:Bu=pn$1(Bu||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en$1(Bu,$u.length),Bu}makeRotationX($u){return this.identity().rotateX($u)}makeTranslation($u,Bu,Ru){return this.identity().translate([$u,Bu,Ru])}transformPoint($u,Bu){return nn("Matrix4.transformPoint","3.0"),this.transformAsPoint($u,Bu)}transformVector($u,Bu){return nn("Matrix4.transformVector","3.0"),this.transformAsPoint($u,Bu)}transformDirection($u,Bu){return nn("Matrix4.transformDirection","3.0"),this.transformAsVector($u,Bu)}}var Pn$1=new gn,Rn=new gn,kn$1=function(){function _u($u,Bu){$u===void 0&&($u=[0,0,1]),Bu===void 0&&(Bu=0),this.normal=new gn,this.distance=-0,this.fromNormalDistance($u,Bu)}return _u.prototype.fromNormalDistance=function($u,Bu){return this.normal.from($u).normalize(),this.distance=Bu,this},_u.prototype.fromPointNormal=function($u,Bu){$u=Pn$1.from($u),this.normal.from(Bu).normalize();var Ru=-this.normal.dot($u);return this.distance=Ru,this},_u.prototype.fromCoefficients=function($u,Bu,Ru,Lu){return this.normal.set($u,Bu,Ru),this.distance=Lu,this},_u.prototype.clone=function(){return new _u(this.normal,this.distance)},_u.prototype.equals=function($u){return this.distance===$u.distance&&this.normal.equals($u.normal)},_u.prototype.getPointDistance=function($u){return this.normal.dot($u)+this.distance},_u.prototype.transform=function($u){var Bu=Rn.copy(this.normal).transformAsVector($u).normalize(),Ru=this.normal.scale(-this.distance).transform($u);return this.fromPointNormal(Ru,Bu)},_u.prototype.projectPointOntoPlane=function($u,Bu){Bu===void 0&&(Bu=[0,0,0]),$u=Pn$1.from($u);var Ru=this.getPointDistance($u),Lu=Rn.copy(this.normal).scale(Ru);return $u.subtract(Lu).to(Bu)},_u}(),Dn$1=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ln$1=[new gn([1,0,0]),new gn([0,1,0]),new gn([0,0,1])],On=new gn,Nn$1=new gn,Fn=function(){function _u($u){$u===void 0&&($u=[]),this.planes=$u}return Object.defineProperty(_u,"MASK_OUTSIDE",{get:function(){return 4294967295},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INSIDE",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INDETERMINATE",{get:function(){return 2147483647},enumerable:!1,configurable:!0}),_u.prototype.fromBoundingSphere=function($u){this.planes.length=2*Ln$1.length;for(var Bu=$u.center,Ru=$u.radius,Lu=0,Ou=0,Fu=Ln$1;Ou<Fu.length;Ou++){var Nu=Fu[Ou],Vu=this.planes[Lu],Uu=this.planes[Lu+1];Vu||(Vu=this.planes[Lu]=new kn$1),Uu||(Uu=this.planes[Lu+1]=new kn$1);var Gu=On.copy(Nu).scale(-Ru).add(Bu);Vu.fromPointNormal(Gu,Nu);var zu=On.copy(Nu).scale(Ru).add(Bu),Hu=Nn$1.copy(Nu).negate();Uu.fromPointNormal(zu,Hu),Lu+=2}return this},_u.prototype.computeVisibilityWithPlaneMask=function($u,Bu){if(Bu===_u.MASK_OUTSIDE||Bu===_u.MASK_INSIDE)return Bu;for(var Ru=_u.MASK_INSIDE,Lu=this.planes,Ou=0;Ou<this.planes.length;++Ou){var Fu=Ou<31?1<<Ou:0;if(!(Ou<31&&(Bu&Fu)==0)){var Nu=Lu[Ou],Vu=$u.intersectPlane(Nu);if(Vu===Dn$1.OUTSIDE)return _u.MASK_OUTSIDE;Vu===Dn$1.INTERSECTING&&(Ru|=Fu)}}return Ru},_u}();function Qn$1(_u,$u,Bu){var Ru=$u[0],Lu=$u[1],Ou=$u[2],Fu=$u[3],Nu=$u[4],Vu=$u[5],Uu=$u[6],Gu=$u[7],zu=$u[8],Hu=Bu[0],ju=Bu[1],Qu=Bu[2],Xu=Bu[3],Ku=Bu[4],Wu=Bu[5],qu=Bu[6],Yu=Bu[7],Zu=Bu[8];return _u[0]=Hu*Ru+ju*Fu+Qu*Uu,_u[1]=Hu*Lu+ju*Nu+Qu*Gu,_u[2]=Hu*Ou+ju*Vu+Qu*zu,_u[3]=Xu*Ru+Ku*Fu+Wu*Uu,_u[4]=Xu*Lu+Ku*Nu+Wu*Gu,_u[5]=Xu*Ou+Ku*Vu+Wu*zu,_u[6]=qu*Ru+Yu*Fu+Zu*Uu,_u[7]=qu*Lu+Yu*Nu+Zu*Gu,_u[8]=qu*Ou+Yu*Vu+Zu*zu,_u}function Vn$1(_u,$u,Bu){var Ru=Bu[0],Lu=Bu[1];return _u[0]=Ru*$u[0],_u[1]=Ru*$u[1],_u[2]=Ru*$u[2],_u[3]=Lu*$u[3],_u[4]=Lu*$u[4],_u[5]=Lu*$u[5],_u[6]=$u[6],_u[7]=$u[7],_u[8]=$u[8],_u}function _n$1(){var _u=new on(4);return on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u[3]=1,_u}function Hn(_u,$u,Bu){Bu*=.5;var Ru=Math.sin(Bu);return _u[0]=Ru*$u[0],_u[1]=Ru*$u[1],_u[2]=Ru*$u[2],_u[3]=Math.cos(Bu),_u}function qn(_u,$u,Bu){var Ru=$u[0],Lu=$u[1],Ou=$u[2],Fu=$u[3],Nu=Bu[0],Vu=Bu[1],Uu=Bu[2],Gu=Bu[3];return _u[0]=Ru*Gu+Fu*Nu+Lu*Uu-Ou*Vu,_u[1]=Lu*Gu+Fu*Vu+Ou*Nu-Ru*Uu,_u[2]=Ou*Gu+Fu*Uu+Ru*Vu-Lu*Nu,_u[3]=Fu*Gu-Ru*Nu-Lu*Vu-Ou*Uu,_u}function zn$1(_u,$u,Bu,Ru){var Lu,Ou,Fu,Nu,Vu,Uu=$u[0],Gu=$u[1],zu=$u[2],Hu=$u[3],ju=Bu[0],Qu=Bu[1],Xu=Bu[2],Ku=Bu[3];return(Ou=Uu*ju+Gu*Qu+zu*Xu+Hu*Ku)<0&&(Ou=-Ou,ju=-ju,Qu=-Qu,Xu=-Xu,Ku=-Ku),1-Ou>1e-6?(Lu=Math.acos(Ou),Fu=Math.sin(Lu),Nu=Math.sin((1-Ru)*Lu)/Fu,Vu=Math.sin(Ru*Lu)/Fu):(Nu=1-Ru,Vu=Ru),_u[0]=Nu*Uu+Vu*ju,_u[1]=Nu*Gu+Vu*Qu,_u[2]=Nu*zu+Vu*Xu,_u[3]=Nu*Hu+Vu*Ku,_u}function Kn$1(_u,$u){var Bu,Ru=$u[0]+$u[4]+$u[8];if(Ru>0)Bu=Math.sqrt(Ru+1),_u[3]=.5*Bu,Bu=.5/Bu,_u[0]=($u[5]-$u[7])*Bu,_u[1]=($u[6]-$u[2])*Bu,_u[2]=($u[1]-$u[3])*Bu;else{var Lu=0;$u[4]>$u[0]&&(Lu=1),$u[8]>$u[3*Lu+Lu]&&(Lu=2);var Ou=(Lu+1)%3,Fu=(Lu+2)%3;Bu=Math.sqrt($u[3*Lu+Lu]-$u[3*Ou+Ou]-$u[3*Fu+Fu]+1),_u[Lu]=.5*Bu,Bu=.5/Bu,_u[3]=($u[3*Ou+Fu]-$u[3*Fu+Ou])*Bu,_u[Ou]=($u[3*Ou+Lu]+$u[3*Lu+Ou])*Bu,_u[Fu]=($u[3*Fu+Lu]+$u[3*Lu+Fu])*Bu}return _u}var Un$1,jn,Gn$1,Wn,Xn=function(_u,$u,Bu){return _u[0]=$u[0]+Bu[0],_u[1]=$u[1]+Bu[1],_u[2]=$u[2]+Bu[2],_u[3]=$u[3]+Bu[3],_u},Yn=function(_u,$u,Bu){return _u[0]=$u[0]*Bu,_u[1]=$u[1]*Bu,_u[2]=$u[2]*Bu,_u[3]=$u[3]*Bu,_u},Zn$1=function(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]+_u[3]*$u[3]},Jn=function(_u,$u,Bu,Ru){var Lu=$u[0],Ou=$u[1],Fu=$u[2],Nu=$u[3];return _u[0]=Lu+Ru*(Bu[0]-Lu),_u[1]=Ou+Ru*(Bu[1]-Ou),_u[2]=Fu+Ru*(Bu[2]-Fu),_u[3]=Nu+Ru*(Bu[3]-Nu),_u},$n$1=function(_u){var $u=_u[0],Bu=_u[1],Ru=_u[2],Lu=_u[3];return Math.hypot($u,Bu,Ru,Lu)},er=function(_u){var $u=_u[0],Bu=_u[1],Ru=_u[2],Lu=_u[3];return $u*$u+Bu*Bu+Ru*Ru+Lu*Lu},tr=function(_u,$u){var Bu=$u[0],Ru=$u[1],Lu=$u[2],Ou=$u[3],Fu=Bu*Bu+Ru*Ru+Lu*Lu+Ou*Ou;return Fu>0&&(Fu=1/Math.sqrt(Fu)),_u[0]=Bu*Fu,_u[1]=Ru*Fu,_u[2]=Lu*Fu,_u[3]=Ou*Fu,_u},ir=(Un$1=sn$1(),jn=an$1(1,0,0),Gn$1=an$1(0,1,0),function(_u,$u,Bu){var Ru=ln$1($u,Bu);return Ru<-.999999?(un$1(Un$1,jn,$u),dn$1(Un$1)<1e-6&&un$1(Un$1,Gn$1,$u),function(Lu,Ou){var Fu=Ou[0],Nu=Ou[1],Vu=Ou[2],Uu=Fu*Fu+Nu*Nu+Vu*Vu;Uu>0&&(Uu=1/Math.sqrt(Uu)),Lu[0]=Ou[0]*Uu,Lu[1]=Ou[1]*Uu,Lu[2]=Ou[2]*Uu}(Un$1,Un$1),Hn(_u,Un$1,Math.PI),_u):Ru>.999999?(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=1,_u):(un$1(Un$1,$u,Bu),_u[0]=Un$1[0],_u[1]=Un$1[1],_u[2]=Un$1[2],_u[3]=1+Ru,tr(_u,_u))});_n$1(),_n$1(),Wn=new on(9),on!=Float32Array&&(Wn[1]=0,Wn[2]=0,Wn[3]=0,Wn[5]=0,Wn[6]=0,Wn[7]=0),Wn[0]=1,Wn[4]=1,Wn[8]=1;const nr=[0,0,0,1];class rr extends Ji$1{constructor($u=0,Bu=0,Ru=0,Lu=1){super(-0,-0,-0,-0),Array.isArray($u)&&arguments.length===1?this.copy($u):this.set($u,Bu,Ru,Lu)}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this.check()}set($u,Bu,Ru,Lu){return this[0]=$u,this[1]=Bu,this[2]=Ru,this[3]=Lu,this.check()}fromMatrix3($u){return Kn$1(this,$u),this.check()}identity(){return function($u){$u[0]=0,$u[1]=0,$u[2]=0,$u[3]=1}(this),this.check()}fromAxisRotation($u,Bu){return Hn(this,$u,Bu),this.check()}setAxisAngle($u,Bu){return this.fromAxisRotation($u,Bu)}get ELEMENTS(){return 4}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}get z(){return this[2]}set z($u){this[2]=$i($u)}get w(){return this[3]}set w($u){this[3]=$i($u)}len(){return $n$1(this)}lengthSquared(){return er(this)}dot($u,Bu){if(Bu!==void 0)throw new Error("Quaternion.dot only takes one argument");return Zn$1(this,$u)}rotationTo($u,Bu){return ir(this,$u,Bu),this.check()}add($u,Bu){if(Bu!==void 0)throw new Error("Quaternion.add only takes one argument");return Xn(this,this,$u),this.check()}calculateW(){return function($u,Bu){var Ru=Bu[0],Lu=Bu[1],Ou=Bu[2];$u[0]=Ru,$u[1]=Lu,$u[2]=Ou,$u[3]=Math.sqrt(Math.abs(1-Ru*Ru-Lu*Lu-Ou*Ou))}(this,this),this.check()}conjugate(){return function($u,Bu){$u[0]=-Bu[0],$u[1]=-Bu[1],$u[2]=-Bu[2],$u[3]=Bu[3]}(this,this),this.check()}invert(){return function($u,Bu){var Ru=Bu[0],Lu=Bu[1],Ou=Bu[2],Fu=Bu[3],Nu=Ru*Ru+Lu*Lu+Ou*Ou+Fu*Fu,Vu=Nu?1/Nu:0;$u[0]=-Ru*Vu,$u[1]=-Lu*Vu,$u[2]=-Ou*Vu,$u[3]=Fu*Vu}(this,this),this.check()}lerp($u,Bu,Ru){return Jn(this,$u,Bu,Ru),this.check()}multiplyRight($u,Bu){return Gi(!Bu),qn(this,this,$u),this.check()}multiplyLeft($u,Bu){return Gi(!Bu),qn(this,$u,this),this.check()}normalize(){const $u=this.len(),Bu=$u>0?1/$u:0;return this[0]=this[0]*Bu,this[1]=this[1]*Bu,this[2]=this[2]*Bu,this[3]=this[3]*Bu,$u===0&&(this[3]=1),this.check()}rotateX($u){return function(Bu,Ru,Lu){Lu*=.5;var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Uu=Math.sin(Lu),Gu=Math.cos(Lu);Bu[0]=Ou*Gu+Vu*Uu,Bu[1]=Fu*Gu+Nu*Uu,Bu[2]=Nu*Gu-Fu*Uu,Bu[3]=Vu*Gu-Ou*Uu}(this,this,$u),this.check()}rotateY($u){return function(Bu,Ru,Lu){Lu*=.5;var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Uu=Math.sin(Lu),Gu=Math.cos(Lu);Bu[0]=Ou*Gu-Nu*Uu,Bu[1]=Fu*Gu+Vu*Uu,Bu[2]=Nu*Gu+Ou*Uu,Bu[3]=Vu*Gu-Fu*Uu}(this,this,$u),this.check()}rotateZ($u){return function(Bu,Ru,Lu){Lu*=.5;var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Uu=Math.sin(Lu),Gu=Math.cos(Lu);Bu[0]=Ou*Gu+Fu*Uu,Bu[1]=Fu*Gu-Ou*Uu,Bu[2]=Nu*Gu+Vu*Uu,Bu[3]=Vu*Gu-Nu*Uu}(this,this,$u),this.check()}scale($u){return Yn(this,this,$u),this.check()}slerp($u,Bu,Ru){switch(arguments.length){case 1:({start:$u=nr,target:Bu,ratio:Ru}=arguments[0]);break;case 2:[Bu,Ru]=arguments,$u=this}return zn$1(this,$u,Bu,Ru),this.check()}transformVector4($u,Bu=$u){return function(Ru,Lu,Ou){var Fu=Lu[0],Nu=Lu[1],Vu=Lu[2],Uu=Ou[0],Gu=Ou[1],zu=Ou[2],Hu=Ou[3],ju=Hu*Fu+Gu*Vu-zu*Nu,Qu=Hu*Nu+zu*Fu-Uu*Vu,Xu=Hu*Vu+Uu*Nu-Gu*Fu,Ku=-Uu*Fu-Gu*Nu-zu*Vu;Ru[0]=ju*Hu+Ku*-Uu+Qu*-zu-Xu*-Gu,Ru[1]=Qu*Hu+Ku*-Gu+Xu*-Uu-ju*-zu,Ru[2]=Xu*Hu+Ku*-zu+ju*-Gu-Qu*-Uu,Ru[3]=Lu[3]}(Bu,$u,this),en$1(Bu,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle($u,Bu){return this.setAxisAngle($u,Bu)}premultiply($u,Bu){return this.multiplyLeft($u,Bu)}multiply($u,Bu){return this.multiplyRight($u,Bu)}}const or=Object.freeze([1,0,0,0,1,0,0,0,1]),sr=Object.freeze([0,0,0,0,0,0,0,0,0]),ar=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),lr={};class ur extends wn{static get IDENTITY(){return lr.IDENTITY=lr.IDENTITY||Object.freeze(new ur(or)),lr.IDENTITY}static get ZERO(){return lr.ZERO=lr.ZERO||Object.freeze(new ur(sr)),lr.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ar}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this.check()}set($u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu){return this[0]=$u,this[1]=Bu,this[2]=Ru,this[3]=Lu,this[4]=Ou,this[5]=Fu,this[6]=Nu,this[7]=Vu,this[8]=Uu,this.check()}setRowMajor($u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu){return this[0]=$u,this[1]=Lu,this[2]=Nu,this[3]=Bu,this[4]=Ou,this[5]=Vu,this[6]=Ru,this[7]=Fu,this[8]=Uu,this.check()}determinant(){return Bu=($u=this)[0],Ru=$u[1],Lu=$u[2],Ou=$u[3],Fu=$u[4],Nu=$u[5],Vu=$u[6],Uu=$u[7],Gu=$u[8],Bu*(Gu*Fu-Nu*Uu)+Ru*(-Gu*Ou+Nu*Vu)+Lu*(Uu*Ou-Fu*Vu);var $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu}identity(){return this.copy(or)}fromQuaternion($u){return function(Bu,Ru){var Lu=Ru[0],Ou=Ru[1],Fu=Ru[2],Nu=Ru[3],Vu=Lu+Lu,Uu=Ou+Ou,Gu=Fu+Fu,zu=Lu*Vu,Hu=Ou*Vu,ju=Ou*Uu,Qu=Fu*Vu,Xu=Fu*Uu,Ku=Fu*Gu,Wu=Nu*Vu,qu=Nu*Uu,Yu=Nu*Gu;Bu[0]=1-ju-Ku,Bu[3]=Hu-Yu,Bu[6]=Qu+qu,Bu[1]=Hu+Yu,Bu[4]=1-zu-Ku,Bu[7]=Xu-Wu,Bu[2]=Qu-qu,Bu[5]=Xu+Wu,Bu[8]=1-zu-ju}(this,$u),this.check()}transpose(){return function($u,Bu){if($u===Bu){var Ru=Bu[1],Lu=Bu[2],Ou=Bu[5];$u[1]=Bu[3],$u[2]=Bu[6],$u[3]=Ru,$u[5]=Bu[7],$u[6]=Lu,$u[7]=Ou}else $u[0]=Bu[0],$u[1]=Bu[3],$u[2]=Bu[6],$u[3]=Bu[1],$u[4]=Bu[4],$u[5]=Bu[7],$u[6]=Bu[2],$u[7]=Bu[5],$u[8]=Bu[8]}(this,this),this.check()}invert(){return function($u,Bu){var Ru=Bu[0],Lu=Bu[1],Ou=Bu[2],Fu=Bu[3],Nu=Bu[4],Vu=Bu[5],Uu=Bu[6],Gu=Bu[7],zu=Bu[8],Hu=zu*Nu-Vu*Gu,ju=-zu*Fu+Vu*Uu,Qu=Gu*Fu-Nu*Uu,Xu=Ru*Hu+Lu*ju+Ou*Qu;Xu&&(Xu=1/Xu,$u[0]=Hu*Xu,$u[1]=(-zu*Lu+Ou*Gu)*Xu,$u[2]=(Vu*Lu-Ou*Nu)*Xu,$u[3]=ju*Xu,$u[4]=(zu*Ru-Ou*Uu)*Xu,$u[5]=(-Vu*Ru+Ou*Fu)*Xu,$u[6]=Qu*Xu,$u[7]=(-Gu*Ru+Lu*Uu)*Xu,$u[8]=(Nu*Ru-Lu*Fu)*Xu)}(this,this),this.check()}multiplyLeft($u){return Qn$1(this,$u,this),this.check()}multiplyRight($u){return Qn$1(this,this,$u),this.check()}rotate($u){return function(Bu,Ru,Lu){var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Uu=Ru[4],Gu=Ru[5],zu=Ru[6],Hu=Ru[7],ju=Ru[8],Qu=Math.sin(Lu),Xu=Math.cos(Lu);Bu[0]=Xu*Ou+Qu*Vu,Bu[1]=Xu*Fu+Qu*Uu,Bu[2]=Xu*Nu+Qu*Gu,Bu[3]=Xu*Vu-Qu*Ou,Bu[4]=Xu*Uu-Qu*Fu,Bu[5]=Xu*Gu-Qu*Nu,Bu[6]=zu,Bu[7]=Hu,Bu[8]=ju}(this,this,$u),this.check()}scale($u){return Array.isArray($u)?Vn$1(this,this,$u):Vn$1(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Bu,Ru,Lu){var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Uu=Ru[4],Gu=Ru[5],zu=Ru[6],Hu=Ru[7],ju=Ru[8],Qu=Lu[0],Xu=Lu[1];Bu[0]=Ou,Bu[1]=Fu,Bu[2]=Nu,Bu[3]=Vu,Bu[4]=Uu,Bu[5]=Gu,Bu[6]=Qu*Ou+Xu*Vu+zu,Bu[7]=Qu*Fu+Xu*Uu+Hu,Bu[8]=Qu*Nu+Xu*Gu+ju}(this,this,$u),this.check()}transform($u,Bu){switch($u.length){case 2:Bu=function(Ru,Lu,Ou){var Fu=Lu[0],Nu=Lu[1];return Ru[0]=Ou[0]*Fu+Ou[3]*Nu+Ou[6],Ru[1]=Ou[1]*Fu+Ou[4]*Nu+Ou[7],Ru}(Bu||[-0,-0],$u,this);break;case 3:Bu=cn$1(Bu||[-0,-0,-0],$u,this);break;case 4:Bu=function(Ru,Lu,Ou){const Fu=Lu[0],Nu=Lu[1],Vu=Lu[2];return Ru[0]=Ou[0]*Fu+Ou[3]*Nu+Ou[6]*Vu,Ru[1]=Ou[1]*Fu+Ou[4]*Nu+Ou[7]*Vu,Ru[2]=Ou[2]*Fu+Ou[5]*Nu+Ou[8]*Vu,Ru[3]=Lu[3],Ru}(Bu||[-0,-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en$1(Bu,$u.length),Bu}transformVector($u,Bu){return nn("Matrix3.transformVector"),this.transform($u,Bu)}transformVector2($u,Bu){return nn("Matrix3.transformVector"),this.transform($u,Bu)}transformVector3($u,Bu){return nn("Matrix3.transformVector"),this.transform($u,Bu)}}var hr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),cr=new gn,dr=new gn,pr=function(){function _u($u,Bu){$u===void 0&&($u=[0,0,0]),Bu===void 0&&(Bu=0),this.radius=-0,this.center=new gn,this.fromCenterRadius($u,Bu)}return _u.prototype.fromCenterRadius=function($u,Bu){return this.center.from($u),this.radius=Bu,this},_u.prototype.fromCornerPoints=function($u,Bu){return Bu=cr.from(Bu),this.center=new gn().from($u).add(Bu).scale(.5),this.radius=this.center.distance(Bu),this},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.radius===$u.radius},_u.prototype.clone=function(){return new _u(this.center,this.radius)},_u.prototype.union=function($u){var Bu=this.center,Ru=this.radius,Lu=$u.center,Ou=$u.radius,Fu=cr.copy(Lu).subtract(Bu),Nu=Fu.magnitude();if(Ru>=Nu+Ou)return this.clone();if(Ou>=Nu+Ru)return $u.clone();var Vu=.5*(Ru+Nu+Ou);return dr.copy(Fu).scale((-Ru+Vu)/Nu).add(Bu),this.center.copy(dr),this.radius=Vu,this},_u.prototype.expand=function($u){var Bu=($u=cr.from($u)).subtract(this.center).magnitude();return Bu>this.radius&&(this.radius=Bu),this},_u.prototype.transform=function($u){this.center.transform($u);var Bu=function(Ru,Lu){var Ou=Lu[0],Fu=Lu[1],Nu=Lu[2],Vu=Lu[4],Uu=Lu[5],Gu=Lu[6],zu=Lu[8],Hu=Lu[9],ju=Lu[10];return Ru[0]=Math.hypot(Ou,Fu,Nu),Ru[1]=Math.hypot(Vu,Uu,Gu),Ru[2]=Math.hypot(zu,Hu,ju),Ru}(cr,$u);return this.radius=Math.max(Bu[0],Math.max(Bu[1],Bu[2]))*this.radius,this},_u.prototype.distanceSquaredTo=function($u){var Bu=this.distanceTo($u);return Bu*Bu},_u.prototype.distanceTo=function($u){var Bu=($u=cr.from($u)).subtract(this.center);return Math.max(0,Bu.len()-this.radius)},_u.prototype.intersectPlane=function($u){var Bu=this.center,Ru=this.radius,Lu=$u.normal.dot(Bu)+$u.distance;return Lu<-Ru?hr.OUTSIDE:Lu<Ru?hr.INTERSECTING:hr.INSIDE},_u}(),fr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ar$1=new gn,gr=new gn,mr=new gn,vr$1=new gn,yr$1=new gn,br$1=new gn,xr=new gn,wr=0,Er=1,Mr=2,Ir=3,Sr=4,Cr=5,Br=6,Tr=7,Pr$1=8,Rr=function(){function _u($u,Bu){$u===void 0&&($u=[0,0,0]),Bu===void 0&&(Bu=[0,0,0,0,0,0,0,0,0]),this.center=new gn().from($u),this.halfAxes=new ur(Bu)}return Object.defineProperty(_u.prototype,"halfSize",{get:function(){var $u=this.halfAxes.getColumn(0),Bu=this.halfAxes.getColumn(1),Ru=this.halfAxes.getColumn(2);return[new gn($u).len(),new gn(Bu).len(),new gn(Ru).len()]},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"quaternion",{get:function(){var $u=this.halfAxes.getColumn(0),Bu=this.halfAxes.getColumn(1),Ru=this.halfAxes.getColumn(2),Lu=new gn($u).normalize(),Ou=new gn(Bu).normalize(),Fu=new gn(Ru).normalize();return new rr().fromMatrix3(new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Lu,!0),Ou,!0),Fu,!0)))},enumerable:!1,configurable:!0}),_u.prototype.fromCenterHalfSizeQuaternion=function($u,Bu,Ru){var Lu=new rr(Ru),Ou=new ur().fromQuaternion(Lu);return Ou[0]=Ou[0]*Bu[0],Ou[1]=Ou[1]*Bu[0],Ou[2]=Ou[2]*Bu[0],Ou[3]=Ou[3]*Bu[1],Ou[4]=Ou[4]*Bu[1],Ou[5]=Ou[5]*Bu[1],Ou[6]=Ou[6]*Bu[2],Ou[7]=Ou[7]*Bu[2],Ou[8]=Ou[8]*Bu[2],this.center=new gn().from($u),this.halfAxes=Ou,this},_u.prototype.clone=function(){return new _u(this.center,this.halfAxes)},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.halfAxes.equals($u.halfAxes)},_u.prototype.getBoundingSphere=function($u){$u===void 0&&($u=new pr);var Bu=this.halfAxes,Ru=Bu.getColumn(0,mr),Lu=Bu.getColumn(1,vr$1),Ou=Bu.getColumn(2,yr$1),Fu=Ar$1.copy(Ru).add(Lu).add(Ou);return $u.center.copy(this.center),$u.radius=Fu.magnitude(),$u},_u.prototype.intersectPlane=function($u){var Bu=this.center,Ru=$u.normal,Lu=this.halfAxes,Ou=Ru.x,Fu=Ru.y,Nu=Ru.z,Vu=Math.abs(Ou*Lu[wr]+Fu*Lu[Er]+Nu*Lu[Mr])+Math.abs(Ou*Lu[Ir]+Fu*Lu[Sr]+Nu*Lu[Cr])+Math.abs(Ou*Lu[Br]+Fu*Lu[Tr]+Nu*Lu[Pr$1]),Uu=Ru.dot(Bu)+$u.distance;return Uu<=-Vu?fr.OUTSIDE:Uu>=Vu?fr.INSIDE:fr.INTERSECTING},_u.prototype.distanceTo=function($u){return Math.sqrt(this.distanceSquaredTo($u))},_u.prototype.distanceSquaredTo=function($u){var Bu=gr.from($u).subtract(this.center),Ru=this.halfAxes,Lu=Ru.getColumn(0,mr),Ou=Ru.getColumn(1,vr$1),Fu=Ru.getColumn(2,yr$1),Nu=Lu.magnitude(),Vu=Ou.magnitude(),Uu=Fu.magnitude();Lu.normalize(),Ou.normalize(),Fu.normalize();var Gu,zu=0;return(Gu=Math.abs(Bu.dot(Lu))-Nu)>0&&(zu+=Gu*Gu),(Gu=Math.abs(Bu.dot(Ou))-Vu)>0&&(zu+=Gu*Gu),(Gu=Math.abs(Bu.dot(Fu))-Uu)>0&&(zu+=Gu*Gu),zu},_u.prototype.computePlaneDistances=function($u,Bu,Ru){Ru===void 0&&(Ru=[-0,-0]);var Lu=Number.POSITIVE_INFINITY,Ou=Number.NEGATIVE_INFINITY,Fu=this.center,Nu=this.halfAxes,Vu=Nu.getColumn(0,mr),Uu=Nu.getColumn(1,vr$1),Gu=Nu.getColumn(2,yr$1),zu=br$1.copy(Vu).add(Uu).add(Gu).add(Fu),Hu=xr.copy(zu).subtract($u),ju=Bu.dot(Hu);return Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),zu.copy(Fu).add(Vu).add(Uu).subtract(Gu),Hu.copy(zu).subtract($u),ju=Bu.dot(Hu),Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),zu.copy(Fu).add(Vu).subtract(Uu).add(Gu),Hu.copy(zu).subtract($u),ju=Bu.dot(Hu),Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),zu.copy(Fu).add(Vu).subtract(Uu).subtract(Gu),Hu.copy(zu).subtract($u),ju=Bu.dot(Hu),Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),Fu.copy(zu).subtract(Vu).add(Uu).add(Gu),Hu.copy(zu).subtract($u),ju=Bu.dot(Hu),Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),Fu.copy(zu).subtract(Vu).add(Uu).subtract(Gu),Hu.copy(zu).subtract($u),ju=Bu.dot(Hu),Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),Fu.copy(zu).subtract(Vu).subtract(Uu).add(Gu),Hu.copy(zu).subtract($u),ju=Bu.dot(Hu),Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),Fu.copy(zu).subtract(Vu).subtract(Uu).subtract(Gu),Hu.copy(zu).subtract($u),ju=Bu.dot(Hu),Lu=Math.min(ju,Lu),Ou=Math.max(ju,Ou),Ru[0]=Lu,Ru[1]=Ou,Ru},_u.prototype.transform=function($u){this.center.transformAsPoint($u);var Bu=this.halfAxes.getColumn(0,mr);Bu.transformAsPoint($u);var Ru=this.halfAxes.getColumn(1,vr$1);Ru.transformAsPoint($u);var Lu=this.halfAxes.getColumn(2,yr$1);return Lu.transformAsPoint($u),this.halfAxes=new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Bu,!0),Ru,!0),Lu,!0)),this},_u}();function kr(_u,$u){if(_u.box)return function(Bu,Ru){var Lu=new gn(Bu[0],Bu[1],Bu[2]);Ru.transform(Lu,Lu);var Ou=[];if(Bu.length===10){var Fu=Bu.slice(3,6),Nu=new rr;Nu.fromArray(Bu,6);var Vu=new gn([1,0,0]),Uu=new gn([0,1,0]),Gu=new gn([0,0,1]);Vu.transformByQuaternion(Nu),Vu.scale(Fu[0]),Uu.transformByQuaternion(Nu),Uu.scale(Fu[1]),Gu.transformByQuaternion(Nu),Gu.scale(Fu[2]),Ou=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Vu.toArray(),!0),Uu.toArray(),!0),Gu.toArray(),!0)}else Ou=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Bu.slice(3,6),!0),Bu.slice(6,9),!0),Bu.slice(9,12),!0);var zu=Ru.transformAsVector(Ou.slice(0,3),[0,0,0]),Hu=Ru.transformAsVector(Ou.slice(3,6),[0,0,0]),ju=Ru.transformAsVector(Ou.slice(6,9),[0,0,0]),Qu=new ur([zu[0],zu[1],zu[2],Hu[0],Hu[1],Hu[2],ju[0],ju[1],ju[2]]);return new Rr(Lu,Qu)}(_u.box,$u);throw new Error("3D Tile: boundingVolume must only can be box")}function Dr(_u,$u){if(_u.dynamicScreenSpaceError&&_u.dynamicScreenSpaceErrorComputedDensity){var Bu=_u.dynamicScreenSpaceErrorComputedDensity,Ru=_u.dynamicScreenSpaceErrorFactor;return function(Lu,Ou){var Fu=Lu*Ou;return 1-Math.exp(-Fu*Fu)}($u,Bu)*Ru}return 0}function Lr(_u,$u,Bu){var Ru=new TextDecoder("utf8"),Lu=new Uint8Array(_u,$u,Bu);return Ru.decode(Lu)}function Or(_u,$u,Bu){return Bu===void 0&&(Bu=0),Bu=function(Ru,Lu,Ou){Ou===void 0&&(Ou=0);var Fu=Ru.header,Nu=Fu.featureTableJsonByteLength,Vu=Fu.featureTableBinaryByteLength,Uu=Fu.batchLength;if(Ru.featureTableJson={BATCH_LENGTH:Uu||0},Nu>0){var Gu=Lr(Lu,Ou,Nu);Ru.featureTableJson=JSON.parse(Gu)}return Ou+=Nu,Ru.featureTableBinary=new Uint8Array(Lu,Ou,Vu),Ou+=Vu}(_u,$u,Bu),Bu=function(Ru,Lu,Ou){Ou===void 0&&(Ou=0);var Fu=Ru.header,Nu=Fu.batchTableJsonByteLength,Vu=Fu.batchTableBinaryByteLength;if(Nu>0){var Uu=Lr(Lu,Ou,Nu);Ru.batchTableJson=JSON.parse(Uu),Ou+=Nu,Vu>0&&(Ru.batchTableBinary=new Uint8Array(Lu,Ou,Vu),Ru.batchTableBinary=new Uint8Array(Ru.batchTableBinary),Ou+=Vu)}return Ou}(_u,$u,Bu)}function Nr(_u,$u,Bu){Bu===void 0&&(Bu=0);var Ru=_u.byteOffset+_u.byteLength-Bu;if(Ru===0)throw new Error("glTF byte length must be greater than 0.");return _u.rotateYtoZ=!0,_u.gltfUpAxis="Y",_u.gltfArrayBuffer=function(Lu,Ou,Fu){var Nu=Fu!==void 0?new Uint8Array(Lu).subarray(Ou,Ou+Fu):new Uint8Array(Lu).subarray(Ou);return new Uint8Array(Nu).buffer}($u,Bu,Ru),_u.gltfByteOffset=0,_u.gltfByteLength=Ru,Bu%4==0||console.warn("".concat(_u.type,": embedded glb is not aligned to a 4-byte boundary.")),_u.byteOffset+_u.byteLength}function Fr(_u,$u,Bu){Bu=function(Lu,Ou,Fu){Fu===void 0&&(Fu=0);var Nu=new DataView(Ou);if(Lu.magic=Nu.getUint32(Fu,!0),Fu+=4,Lu.version=Nu.getUint32(Fu,!0),Fu+=4,Lu.byteLength=Nu.getUint32(Fu,!0),Fu+=4,Lu.version!==1)throw new Error("3D Tile Version ".concat(Lu.version," not supported"));return Fu}(_u,$u,Bu),Bu=function(Lu,Ou,Fu){Fu===void 0&&(Fu=0);var Nu,Vu=new DataView(Ou);Lu.header=Lu.header||{};var Uu=Vu.getUint32(Fu,!0);Fu+=4;var Gu=Vu.getUint32(Fu,!0);Fu+=4;var zu=Vu.getUint32(Fu,!0);Fu+=4;var Hu=Vu.getUint32(Fu,!0);return Fu+=4,zu>=570425344?(Fu-=8,Nu=Uu,zu=Gu,Hu=0,Uu=0,Gu=0,console.warn("b3dm tile in legacy format.")):Hu>=570425344&&(Fu-=4,Nu=zu,zu=Uu,Hu=Gu,Uu=0,Gu=0,console.warn("b3dm tile in legacy format.")),Lu.header.featureTableJsonByteLength=Uu,Lu.header.featureTableBinaryByteLength=Gu,Lu.header.batchTableJsonByteLength=zu,Lu.header.batchTableBinaryByteLength=Hu,Lu.header.batchLength=Nu,Fu}(_u,$u,Bu),Bu=Nr(_u,$u,Bu=Or(_u,$u,Bu));var Ru=_u.featureTableJson.RTC_CENTER;return Ru&&Number.isFinite(Ru.byteOffset)&&(_u.rtcCenter=new Float32Array(_u.featureTableBinary.buffer,_u.featureTableBinary.buffer.byteOffset+Ru.byteOffset,3)),Bu}var Qr=function(){function _u($u,Bu,Ru){this.header=Bu,this.tileset=$u,this.parent=Ru,this.children=[],this.contentState="UNLOADED",this.transform=this.header.transform?new Tn(this.header.transform.slice()):new Tn;var Lu=this.parent&&this.parent.computedTransform?this.parent.computedTransform.clone():$u.modelMatrix.clone();this.computedTransform=new Tn(Lu).multiplyRight(this.transform),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform),this.depth=this.parent?this.parent.depth+1:0,this.distanceToCamera=0,this.centerZDepth=0,this.screenSpaceError=0,this.shouldRefine=!1,this.visibilityPlaneMask=Fn.MASK_INDETERMINATE,this.visible=!1,this.selectionDepth=0,this.frameNumber=0,this.touchedFrameNumber=0,this.selectedFrameNumber=0,this.requestedFrameNumber=0}return Object.defineProperty(_u.prototype,"id",{get:function(){return this.header.id},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.header.refine||this.parent&&this.parent.refine||"REPLACE"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.header.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUrl",{get:function(){if(this.header.content.uri){var $u=this.tileset.b3dmMapping.b3dm_base_url;$u=/\/$/.test($u)?$u:$u+"/";var Bu=this.tileset.b3dmMapping.b3dm_url[this.header.content.uri];Bu=/^\//.test(Bu)?Bu.slice(1):Bu;var Ru=/^https?:/.test(Bu)?Bu:$u+Bu;if(Ru.indexOf("http")!==-1&&Ru.indexOf("https")===-1){var Lu=Ru.slice(4);Ru="https"+Lu}return Ru}return this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.header.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.header.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasEmptyContent",{get:function(){return!this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"selected",{get:function(){return this.selectedFrameNumber===this.tileset.frameNumber},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasRenderContent",{get:function(){return!this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasChildren",{get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentReady",{get:function(){return this.contentState==="READY"||this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentAvailable",{get:function(){return Boolean(this.contentReady&&this.hasRenderContent||!1)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasUnloadedContent",{get:function(){return this.hasRenderContent&&this.contentUnloaded},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUnloaded",{get:function(){return this.contentState==="UNLOADED"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentFailed",{get:function(){return this.contentState==="FAILED"},enumerable:!1,configurable:!0}),_u.prototype.getScreenSpaceError=function($u,Bu){if(this.tileset.type==="TILES3D")return function(Ru,Lu,Ou){var Fu=Ru.tileset,Nu=Ru.parent&&Ru.parent.lodMetricValue||Ru.lodMetricValue,Vu=Ou?Nu:Ru.lodMetricValue;if(Vu===0)return 0;var Uu=Math.max(Ru.distanceToCamera,1e-7),Gu=Fu.options.viewDistanceScale,zu=Vu*Lu.height*Gu/(Uu*Lu.sseDenominator);return zu-Dr(Fu,Uu)}(this,$u,Bu);throw new Error("Unsupported tileset type")},_u.prototype.getPriority=function(){var $u=this.tileset.traverser,Bu=$u.options.skipLevelOfDetail,Ru=this.refine==="ADD"||Bu;if(Ru&&!this.visible||this.tileset.frameNumber-this.touchedFrameNumber>=1||this.contentState==="UNLOADED")return-1;var Lu=this.parent,Ou=Lu&&(!Ru||this.screenSpaceError===0)?Lu.screenSpaceError:this.screenSpaceError,Fu=$u.root?$u.root.screenSpaceError:0;return Math.max(Fu-Ou,0)},_u.prototype.loadContent=function(){var $u=this;return this.hasEmptyContent||!this.contentUrl?Promise.resolve(!1):this.content?Promise.resolve(!0):(this.contentState="LOADING",this.tileset.requestScheduler.scheduleRequest(this.id,function(){return $u.getPriority()}).then(function(Bu){return Bu?it$1($u.contentUrl,{responseType:"arraybuffer",allowHosts:$u.tileset.options.allowHosts,networkSubscribe:$u.tileset.options.networkSubscribe,requestProxy:$u.tileset.options.requestProxy}).then(function(Ru){return Ru.body}).then(function(Ru){return Fr(Lu={byteOffset:0,type:"b3dm"},Ru,Lu.byteOffset),Lu;var Lu}).then(function(Ru){return $u.content=Ru,$u.tileset.options.contentLoader($u).then(function(){return $u.contentState="READY",Bu.done(),!0})}).catch(function(Ru){return $u.contentState="FAILED",Bu.done(),Promise.reject(Ru)}):($u.contentState="UNLOADED",Promise.resolve(!1))}))},_u.prototype.unloadContent=function(){this.content=void 0,this.contentState="UNLOADED"},_u.prototype.updateVisibility=function($u){if(this.frameNumber!==$u.frameNumber){var Bu=this.parent,Ru=Bu?Bu.visibilityPlaneMask:Fn.MASK_INDETERMINATE,Lu=Bu?Bu.computedTransform:this.tileset.modelMatrix;this.updateTransform(Lu),this.distanceToCamera=this.distanceToTile($u),this.screenSpaceError=this.getScreenSpaceError($u,!1),this.visibilityPlaneMask=this.visibility($u,Ru),this.visible=this.visibilityPlaneMask!==Fn.MASK_OUTSIDE,this.frameNumber=$u.frameNumber}},_u.prototype.visibility=function($u,Bu){return $u.cullingVolume.computeVisibilityWithPlaneMask(this.boundingVolume,Bu)},_u.prototype.distanceToTile=function($u){return Math.sqrt(Math.max(this.boundingVolume.distanceSquaredTo($u.camera.position),0))},_u.prototype.updateTransform=function($u){$u===void 0&&($u=new Tn);var Bu=$u.clone().multiplyRight(this.transform);!Bu.equals(this.computedTransform)&&(this.computedTransform.copy(Bu),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform))},_u}(),Vr=function(){function _u(){this.map=new Map,this.array=[],this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.get=function($u){return this.array[$u]},_u.prototype.set=function($u,Bu){$u>=this.length&&(this._length=$u+1),this.map.has(this.array[$u])&&this.map.delete(this.array[$u]),this.array[$u]=Bu,this.map.set(Bu,$u)},_u.prototype.delete=function($u){var Bu=this.map.get($u);Bu!==void 0&&Bu>=0&&(this.array.splice(Bu,1),this.map.delete($u),this._length--)},_u.prototype.push=function($u){if(!this.map.has($u)){var Bu=this._length++;this.array[Bu]=$u,this.map.set($u,Bu)}},_u.prototype.pop=function(){var $u=this.array[--this._length];return this.map.delete($u),$u},_u.prototype.reset=function(){this.array=[],this.map=new Map,this._length=0},_u.prototype.find=function($u){return this.map.has($u)},_u}(),_r=function(){function _u($u){this.options=$u,this._traversalStack=new Vr,this._emptyTraversalStack=new Vr,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return _u.prototype.traverse=function($u,Bu){this.root=$u,this.reset(),this.updateTile($u,Bu),this._frameNumber=Bu.frameNumber,this.executeTraversal($u,Bu)},_u.prototype.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},_u.prototype.executeTraversal=function($u,Bu){var Ru=this._traversalStack;for($u.selectionDepth=1,Ru.push($u);Ru.length>0;){var Lu=Ru.pop(),Ou=!1;if(this.canTraverse(Lu,Bu)){this.updateChildTiles(Lu,Bu);var Fu=Lu.hasRenderContent?Lu.selectionDepth+1:Lu.selectionDepth;Ou=this.updateAndPushChildren(Lu,Bu,Ru,Fu)}var Nu=Lu.parent,Vu=Boolean(!Nu||Nu.shouldRefine),Uu=!Ou;Lu.hasRenderContent?Lu.refine==="ADD"?(this.loadTile(Lu,Bu),this.selectTile(Lu,Bu)):Lu.refine==="REPLACE"&&(this.loadTile(Lu,Bu),Uu&&this.selectTile(Lu,Bu)):(this.emptyTiles[Lu.id]=Lu,this.loadTile(Lu,Bu),Uu&&this.selectTile(Lu,Bu)),this.touchTile(Lu,Bu),Lu.shouldRefine=Ou&&Vu}this.options.onTraversalEnd(Bu)},_u.prototype.updateChildTiles=function($u,Bu){for(var Ru=0,Lu=$u.children;Ru<Lu.length;Ru++){var Ou=Lu[Ru];this.updateTile(Ou,Bu)}return!0},_u.prototype.updateAndPushChildren=function($u,Bu,Ru,Lu){var Ou=this.options,Fu=Ou.loadSiblings,Nu=Ou.skipLevelOfDetail,Vu=$u.children;Vu.sort(this.compareDistanceToCamera.bind(this));for(var Uu=$u.refine==="REPLACE"&&$u.hasRenderContent&&!Nu,Gu=!1,zu=!0,Hu=0,ju=Vu;Hu<ju.length;Hu++){var Qu=ju[Hu];if(Qu.selectionDepth=Lu,Qu.visible?(Ru.find(Qu)&&Ru.delete(Qu),Ru.push(Qu),Gu=!0):(Uu||Fu)&&(this.loadTile(Qu,Bu),this.touchTile(Qu,Bu)),Uu){var Xu=void 0;if(Xu=Qu.hasRenderContent?Qu.contentAvailable:this.executeEmptyTraversal(Qu,Bu),!(zu=zu&&Xu))return!1}}return Gu||(zu=!1),zu},_u.prototype.updateTile=function($u,Bu){this.updateTileVisibility($u,Bu)},_u.prototype.selectTile=function($u,Bu){this.shouldSelectTile($u)&&($u.selectedFrameNumber=Bu.frameNumber,this.selectedTiles[$u.id]=$u)},_u.prototype.loadTile=function($u,Bu){this.shouldLoadTile($u)&&($u.requestedFrameNumber=Bu.frameNumber,this.requestedTiles[$u.id]=$u)},_u.prototype.touchTile=function($u,Bu){$u.tileset.cache.touch($u),$u.touchedFrameNumber=Bu.frameNumber},_u.prototype.canTraverse=function($u,Bu,Ru,Lu){return Ru===void 0&&(Ru=!1),Lu===void 0&&(Lu=!1),!!$u.hasChildren&&!(!Lu&&!$u.visible)&&this.shouldRefine($u,Bu,Ru)},_u.prototype.shouldLoadTile=function($u){var Bu=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.hasUnloadedContent&&Bu},_u.prototype.shouldSelectTile=function($u){var Bu=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.contentAvailable&&!this.options.skipLevelOfDetail&&Bu},_u.prototype.shouldRefine=function($u,Bu,Ru){var Lu=$u.screenSpaceError;return Ru&&(Lu=$u.getScreenSpaceError(Bu,!0)),Lu>this.options.maxScreenSpaceError},_u.prototype.updateTileVisibility=function($u,Bu){if($u.updateVisibility(Bu),$u.visible){var Ru=$u.children.length>0;this.meetsScreenSpaceErrorEarly($u,Bu)?$u.visible=!1:$u.refine!=="REPLACE"||!Ru||this.anyChildrenVisible($u,Bu)||($u.visible=!1)}},_u.prototype.meetsScreenSpaceErrorEarly=function($u,Bu){var Ru=$u.parent;return!(!Ru||Ru.refine!=="ADD")&&!this.shouldRefine($u,Bu,!0)},_u.prototype.compareDistanceToCamera=function($u,Bu){return Bu.distanceToCamera===0&&$u.distanceToCamera===0?Bu.centerZDepth-$u.centerZDepth:Bu.distanceToCamera-$u.distanceToCamera},_u.prototype.anyChildrenVisible=function($u,Bu){for(var Ru=!1,Lu=0,Ou=$u.children;Lu<Ou.length;Lu++){var Fu=Ou[Lu];Fu.updateVisibility(Bu),Ru=Ru||Fu.visible}return Ru},_u.prototype.everyChildrenVisibleIsLoaded=function($u){for(var Bu=!0,Ru=0,Lu=$u.children;Ru<Lu.length;Ru++){var Ou=Lu[Ru];Ou.visible&&Ou.contentState!=="READY"&&(Bu=!1)}return Bu},_u.prototype.executeEmptyTraversal=function($u,Bu){var Ru=!0,Lu=this._emptyTraversalStack;for(Lu.push($u);Lu.length>0&&Ru;){var Ou=Lu.pop();if(this.updateTile(Ou,Bu),Ou.visible||this.loadTile(Ou,Bu),this.touchTile(Ou,Bu),!Ou.hasRenderContent&&this.canTraverse(Ou,Bu,!1,!0))for(var Fu=0,Nu=Ou.children;Fu<Nu.length;Fu++){var Vu=Nu[Fu];Lu.find(Vu)&&Lu.delete(Vu),Lu.push(Vu)}else Ou.contentAvailable||(Ru=!1)}return Ru},_u}();function Hr(_u){for(var $u=[],Bu=0,Ru=Object.keys(_u);Bu<Ru.length;Bu++){var Lu=Ru[Bu];$u.push(_u[Lu])}return $u}var qr=function(){function _u($u,Bu){var Ru=this;this.rawJson=$u,this.b3dmMapping=$u.b3dmMapping,this.options=Bu,this.traverser=new _r({loadSiblings:!1,maxScreenSpaceError:this.options.maxScreenSpaceError,skipLevelOfDetail:!1,maxDepth:this.options.maxDepth,onTraversalEnd:function(Gu){return Ru.onTraversalEnd(Gu)}}),this.cache=new xn,this.requestScheduler=new vn$1({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.frameNumber=0,this.pendingCount=0,this._tiles={},this.selectedTiles=[],this.requestedTiles=[],this.memoryUsageInBytes=0,this.root=new Qr(this,$u.root);for(var Lu=[this.root];Lu.length>0;)for(var Ou=Lu.pop(),Fu=0,Nu=Ou.header.children||[];Fu<Nu.length;Fu++){var Vu=Nu[Fu],Uu=new Qr(this,Vu,Ou);Uu.depth=Ou.depth+1,Ou.children.push(Uu),Lu.push(Uu)}}return Object.defineProperty(_u.prototype,"maxMemoryUsage",{get:function(){return this.options.maxMemoryUsage},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"asset",{get:function(){return this.rawJson.asset},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.rawJson.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"basePath",{get:function(){return this.rawJson.basePath},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"modelMatrix",{get:function(){return this.options.modelMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"geometricError",{get:function(){return this.rawJson.geometricError},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.rawJson.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.rawJson.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.rawJson.root.refine},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"tiles",{get:function(){return Hr(this._tiles)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"floorInfo",{get:function(){return this.rawJson.floorInfo||this.rawJson.floor_info||[]},enumerable:!1,configurable:!0}),_u.prototype.reset=function(){for(var $u=[this.root];$u.length>0;){for(var Bu=$u.pop(),Ru=0,Lu=Bu.children;Ru<Lu.length;Ru++){var Ou=Lu[Ru];$u.push(Ou)}this.cache.unloadTile(Bu),this.unloadTile(Bu)}this.cache.reset(),this.traverser.reset(),this.selectedTiles=[],this.requestedTiles=[]},_u.prototype.isLoaded=function(){return this.pendingCount===0&&this.frameNumber!==0},_u.prototype.onTraversalEnd=function($u){var Bu=this,Ru=new gn($u.camera.position);this.selectedTiles=this.options.onTraversalComplete(Hr(this.traverser.selectedTiles)),this.requestedTiles=Hr(this.traverser.requestedTiles).slice().sort(function(Uu,Gu){return Uu.boundingVolume.center.distanceTo(Ru)-Gu.boundingVolume.center.distanceTo(Ru)});for(var Lu=0,Ou=this.selectedTiles;Lu<Ou.length;Lu++){var Fu=Ou[Lu];this._tiles[Fu.id]=Fu}for(var Nu=0,Vu=this.requestedTiles;Nu<Vu.length;Nu++)(Fu=Vu[Nu]).contentUnloaded&&this.loadTile(Fu);this.cache.unloadTiles(function(){return Bu.memoryUsageInBytes>1024*Bu.maxMemoryUsage*1024},function(Uu){return Bu.unloadTile(Uu)})},_u.prototype.loadTile=function($u){var Bu=this;this.pendingCount++,$u.loadContent().catch(function(Ru){var Lu=Ru.message||Ru.toString();return console.error("A 3D tile failed to load: ".concat($u.id," ").concat(Lu)),Bu.options.onTileError($u,Lu),!1}).then(function(Ru){Bu.pendingCount--,Ru&&(Bu.cache.add($u,function(){$u.content&&(Bu.memoryUsageInBytes+=$u.content.byteLength||0)}),Bu.options.onTileLoad($u))})},_u.prototype.unloadTile=function($u){this.memoryUsageInBytes-=$u.content&&$u.content.byteLength||0,this.options.onTileUnload($u),$u.unloadContent()},_u}();function zr(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Kr(){return(zr()+zr()+"-"+zr()+"-4"+zr().substr(0,3)+"-"+zr()+"-"+zr()+zr()+zr()).toLowerCase()}function Ur(_u,$u){var Bu;return _u.content&&(_u.contentUrl="".concat($u,"/").concat(_u.content.uri||_u.content.url)),_u.id=(Bu=_u.contentUrl)!==null&&Bu!==void 0?Bu:"empty:"+Kr(),_u.lodMetricType="geometricError",_u.lodMetricValue=_u.geometricError,_u.transformMatrix=_u.transform,_u.type=_u.contentUrl?"SCENEGRAPH":"EMPTY",_u.refine=function(Ru){switch(Ru){case"REPLACE":case"replace":return"REPLACE";case"ADD":case"add":return"ADD";default:throw new Error("refine ".concat(Ru," is not supported."))}}(_u.refine),_u}function jr(_u,$u){var Bu,Ru=JSON.parse(JSON.stringify(_u));return Ru.basePath=$u,Ru.root=function(Lu,Ou){Lu=Ur(Lu,Ou);var Fu=[];for(Fu.push(Lu);Fu.length>0;)for(var Nu=0,Vu=(Fu.pop()||{}).children||[];Nu<Vu.length;Nu++){var Uu=Vu[Nu];Ur(Uu,Ou),Fu.push(Uu)}return Lu}(Ru.root,$u),Ru.type="TILES3D",Ru.lodMetricType="geometricError",Ru.lodMetricValue=((Bu=Ru.root)===null||Bu===void 0?void 0:Bu.lodMetricValue)||0,Ru}var Gr=new(function(){function _u(fp){e$2.Loader.call(this,fp),this.dracoLoader=null,this.ddsLoader=null}function $u(){var fp={};return{get:function(dp){return fp[dp]},add:function(dp,bp){fp[dp]=bp},remove:function(dp){delete fp[dp]},removeAll:function(){fp={}}}}_u.prototype=Object.assign(Object.create(e$2.Loader.prototype),{constructor:_u,load:function(fp,dp,bp,gp){var wp,Sp=this;wp=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:e$2.LoaderUtils.extractUrlBase(fp),Sp.manager.itemStart(fp);var Cp=function(zp){gp?gp(zp):console.error(zp),Sp.manager.itemError(fp),Sp.manager.itemEnd(fp)},Lp=new e$2.FileLoader(Sp.manager);Lp.setPath(this.path),Lp.setResponseType("arraybuffer"),Lp.setRequestHeader(this.requestHeader),Sp.crossOrigin==="use-credentials"&&Lp.setWithCredentials(!0),Lp.load(fp,function(zp){try{Sp.parse(zp,wp,function(Dp){dp(Dp),Sp.manager.itemEnd(fp)},Cp)}catch(Dp){Cp(Dp)}},bp,Cp)},setDRACOLoader:function(fp){return this.dracoLoader=fp,this},setDDSLoader:function(fp){return this.ddsLoader=fp,this},parse:function(fp,dp,bp,gp){var wp,Sp={};if(typeof fp=="string")wp=fp;else if(e$2.LoaderUtils.decodeText(new Uint8Array(fp,0,4))===Nu){try{Sp[Bu.KHR_BINARY_GLTF]=new Gu(fp)}catch(vp){return void(gp&&gp(vp))}wp=Sp[Bu.KHR_BINARY_GLTF].content}else wp=e$2.LoaderUtils.decodeText(new Uint8Array(fp));var Cp=JSON.parse(wp);if(Cp.asset===void 0||Cp.asset.version[0]<2)gp&&gp(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(Cp.extensionsUsed)for(var Lp=0;Lp<Cp.extensionsUsed.length;++Lp){var zp=Cp.extensionsUsed[Lp],Dp=Cp.extensionsRequired||[];switch(zp){case Bu.KHR_LIGHTS_PUNCTUAL:Sp[zp]=new Lu(Cp);break;case Bu.KHR_MATERIALS_CLEARCOAT:Sp[zp]=new Fu;break;case Bu.KHR_MATERIALS_UNLIT:Sp[zp]=new Ou;break;case Bu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Sp[zp]=new Qu;break;case Bu.KHR_DRACO_MESH_COMPRESSION:Sp[zp]=new zu(Cp,this.dracoLoader);break;case Bu.MSFT_TEXTURE_DDS:Sp[zp]=new Ru(this.ddsLoader);break;case Bu.KHR_TEXTURE_TRANSFORM:Sp[zp]=new Hu;break;case Bu.KHR_MESH_QUANTIZATION:Sp[zp]=new Xu;break;default:Dp.indexOf(zp)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+zp+'".')}}var hp=new $p(Cp,Sp,{path:dp||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});hp.fileLoader.setRequestHeader(this.requestHeader),hp.parse(bp,gp)}}});var Bu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function Ru(fp){if(!fp)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Bu.MSFT_TEXTURE_DDS,this.ddsLoader=fp}function Lu(fp){this.name=Bu.KHR_LIGHTS_PUNCTUAL;var dp=fp.extensions&&fp.extensions[Bu.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=dp.lights||[]}function Ou(){this.name=Bu.KHR_MATERIALS_UNLIT}function Fu(){this.name=Bu.KHR_MATERIALS_CLEARCOAT}Lu.prototype.loadLight=function(fp){var dp,bp=this.lightDefs[fp],gp=new e$2.Color(16777215);bp.color!==void 0&&gp.fromArray(bp.color);var wp=bp.range!==void 0?bp.range:0;switch(bp.type){case"directional":(dp=new e$2.DirectionalLight(gp)).target.position.set(0,0,-1),dp.add(dp.target);break;case"point":(dp=new e$2.PointLight(gp)).distance=wp;break;case"spot":(dp=new e$2.SpotLight(gp)).distance=wp,bp.spot=bp.spot||{},bp.spot.innerConeAngle=bp.spot.innerConeAngle!==void 0?bp.spot.innerConeAngle:0,bp.spot.outerConeAngle=bp.spot.outerConeAngle!==void 0?bp.spot.outerConeAngle:Math.PI/4,dp.angle=bp.spot.outerConeAngle,dp.penumbra=1-bp.spot.innerConeAngle/bp.spot.outerConeAngle,dp.target.position.set(0,0,-1),dp.add(dp.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+bp.type+'".')}return dp.position.set(0,0,0),dp.decay=2,bp.intensity!==void 0&&(dp.intensity=bp.intensity),dp.name=bp.name||"light_"+fp,Promise.resolve(dp)},Ou.prototype.getMaterialType=function(){return e$2.MeshBasicMaterial},Ou.prototype.extendParams=function(fp,dp,bp){var gp=[];fp.color=new e$2.Color(1,1,1),fp.opacity=1;var wp=dp.pbrMetallicRoughness;if(wp){if(Array.isArray(wp.baseColorFactor)){var Sp=wp.baseColorFactor;fp.color.fromArray(Sp),fp.opacity=Sp[3]}wp.baseColorTexture!==void 0&&gp.push(bp.assignTexture(fp,"map",wp.baseColorTexture))}return Promise.all(gp)},Fu.prototype.getMaterialType=function(){return e$2.MeshPhysicalMaterial},Fu.prototype.extendParams=function(fp,dp,bp){var gp=[],wp=dp.extensions[this.name];if(wp.clearcoatFactor!==void 0&&(fp.clearcoat=wp.clearcoatFactor),wp.clearcoatTexture!==void 0&&gp.push(bp.assignTexture(fp,"clearcoatMap",wp.clearcoatTexture)),wp.clearcoatRoughnessFactor!==void 0&&(fp.clearcoatRoughness=wp.clearcoatRoughnessFactor),wp.clearcoatRoughnessTexture!==void 0&&gp.push(bp.assignTexture(fp,"clearcoatRoughnessMap",wp.clearcoatRoughnessTexture)),wp.clearcoatNormalTexture!==void 0&&(gp.push(bp.assignTexture(fp,"clearcoatNormalMap",wp.clearcoatNormalTexture)),wp.clearcoatNormalTexture.scale!==void 0)){var Sp=wp.clearcoatNormalTexture.scale;fp.clearcoatNormalScale=new e$2.Vector2(Sp,Sp)}return Promise.all(gp)};var Nu="glTF",Vu=1313821514,Uu=5130562;function Gu(fp){this.name=Bu.KHR_BINARY_GLTF,this.content=null,this.body=null;var dp=new DataView(fp,0,12);if(this.header={magic:e$2.LoaderUtils.decodeText(new Uint8Array(fp.slice(0,4))),version:dp.getUint32(4,!0),length:dp.getUint32(8,!0)},this.header.magic!==Nu)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var bp=new DataView(fp,12),gp=0;gp<bp.byteLength;){var wp=bp.getUint32(gp,!0);gp+=4;var Sp=bp.getUint32(gp,!0);if(gp+=4,Sp===Vu){var Cp=new Uint8Array(fp,12+gp,wp);this.content=e$2.LoaderUtils.decodeText(Cp)}else if(Sp===Uu){var Lp=12+gp;this.body=fp.slice(Lp,Lp+wp)}gp+=wp}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function zu(fp,dp){if(!dp)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Bu.KHR_DRACO_MESH_COMPRESSION,this.json=fp,this.dracoLoader=dp,this.dracoLoader.preload()}function Hu(){this.name=Bu.KHR_TEXTURE_TRANSFORM}function ju(fp){e$2.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var dp=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),bp=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),gp=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),wp=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Sp=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),Cp={specular:{value:new e$2.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Cp,this.onBeforeCompile=function(Lp){for(var zp in Cp)Lp.uniforms[zp]=Cp[zp];Lp.fragmentShader=Lp.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),Lp.fragmentShader=Lp.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),Lp.fragmentShader=Lp.fragmentShader.replace("#include <roughnessmap_pars_fragment>",dp),Lp.fragmentShader=Lp.fragmentShader.replace("#include <metalnessmap_pars_fragment>",bp),Lp.fragmentShader=Lp.fragmentShader.replace("#include <roughnessmap_fragment>",gp),Lp.fragmentShader=Lp.fragmentShader.replace("#include <metalnessmap_fragment>",wp),Lp.fragmentShader=Lp.fragmentShader.replace("#include <lights_physical_fragment>",Sp)},Object.defineProperties(this,{specular:{get:function(){return Cp.specular.value},set:function(Lp){Cp.specular.value=Lp}},specularMap:{get:function(){return Cp.specularMap.value},set:function(Lp){Cp.specularMap.value=Lp}},glossiness:{get:function(){return Cp.glossiness.value},set:function(Lp){Cp.glossiness.value=Lp}},glossinessMap:{get:function(){return Cp.glossinessMap.value},set:function(Lp){Cp.glossinessMap.value=Lp,Lp?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(fp)}function Qu(){return{name:Bu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return ju},extendParams:function(fp,dp,bp){var gp=dp.extensions[this.name];fp.color=new e$2.Color(1,1,1),fp.opacity=1;var wp=[];if(Array.isArray(gp.diffuseFactor)){var Sp=gp.diffuseFactor;fp.color.fromArray(Sp),fp.opacity=Sp[3]}if(gp.diffuseTexture!==void 0&&wp.push(bp.assignTexture(fp,"map",gp.diffuseTexture)),fp.emissive=new e$2.Color(0,0,0),fp.glossiness=gp.glossinessFactor!==void 0?gp.glossinessFactor:1,fp.specular=new e$2.Color(1,1,1),Array.isArray(gp.specularFactor)&&fp.specular.fromArray(gp.specularFactor),gp.specularGlossinessTexture!==void 0){var Cp=gp.specularGlossinessTexture;wp.push(bp.assignTexture(fp,"glossinessMap",Cp)),wp.push(bp.assignTexture(fp,"specularMap",Cp))}return Promise.all(wp)},createMaterial:function(fp){var dp=new ju(fp);return dp.fog=!0,dp.color=fp.color,dp.map=fp.map===void 0?null:fp.map,dp.lightMap=null,dp.lightMapIntensity=1,dp.aoMap=fp.aoMap===void 0?null:fp.aoMap,dp.aoMapIntensity=1,dp.emissive=fp.emissive,dp.emissiveIntensity=1,dp.emissiveMap=fp.emissiveMap===void 0?null:fp.emissiveMap,dp.bumpMap=fp.bumpMap===void 0?null:fp.bumpMap,dp.bumpScale=1,dp.normalMap=fp.normalMap===void 0?null:fp.normalMap,dp.normalMapType=e$2.TangentSpaceNormalMap,fp.normalScale&&(dp.normalScale=fp.normalScale),dp.displacementMap=null,dp.displacementScale=1,dp.displacementBias=0,dp.specularMap=fp.specularMap===void 0?null:fp.specularMap,dp.specular=fp.specular,dp.glossinessMap=fp.glossinessMap===void 0?null:fp.glossinessMap,dp.glossiness=fp.glossiness,dp.alphaMap=null,dp.envMap=fp.envMap===void 0?null:fp.envMap,dp.envMapIntensity=1,dp.refractionRatio=.98,dp}}}function Xu(){this.name=Bu.KHR_MESH_QUANTIZATION}function Ku(fp,dp,bp,gp){e$2.Interpolant.call(this,fp,dp,bp,gp)}zu.prototype.decodePrimitive=function(fp,dp){var bp=this.json,gp=this.dracoLoader,wp=fp.extensions[this.name].bufferView,Sp=fp.extensions[this.name].attributes,Cp={},Lp={},zp={};for(var Dp in Sp){var hp=np[Dp]||Dp.toLowerCase();Cp[hp]=Sp[Dp]}for(Dp in fp.attributes)if(hp=np[Dp]||Dp.toLowerCase(),Sp[Dp]!==void 0){var vp=bp.accessors[fp.attributes[Dp]],Np=ap[vp.componentType];zp[hp]=Np,Lp[hp]=vp.normalized===!0}return dp.getDependency("bufferView",wp).then(function(Fp){return new Promise(function(qp){gp.decodeDracoFile(Fp,function(jp){for(var Xp in jp.attributes){var rm=jp.attributes[Xp],em=Lp[Xp];em!==void 0&&(rm.normalized=em)}qp(jp)},Cp,zp)})})},Hu.prototype.extendTexture=function(fp,dp){return fp=fp.clone(),dp.offset!==void 0&&fp.offset.fromArray(dp.offset),dp.rotation!==void 0&&(fp.rotation=dp.rotation),dp.scale!==void 0&&fp.repeat.fromArray(dp.scale),dp.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),fp.needsUpdate=!0,fp},ju.prototype=Object.create(e$2.MeshStandardMaterial.prototype),ju.prototype.constructor=ju,ju.prototype.copy=function(fp){return e$2.MeshStandardMaterial.prototype.copy.call(this,fp),this.specularMap=fp.specularMap,this.specular.copy(fp.specular),this.glossinessMap=fp.glossinessMap,this.glossiness=fp.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},Ku.prototype=Object.create(e$2.Interpolant.prototype),Ku.prototype.constructor=Ku,Ku.prototype.copySampleValue_=function(fp){for(var dp=this.resultBuffer,bp=this.sampleValues,gp=this.valueSize,wp=fp*gp*3+gp,Sp=0;Sp!==gp;Sp++)dp[Sp]=bp[wp+Sp];return dp},Ku.prototype.beforeStart_=Ku.prototype.copySampleValue_,Ku.prototype.afterEnd_=Ku.prototype.copySampleValue_,Ku.prototype.interpolate_=function(fp,dp,bp,gp){for(var wp=this.resultBuffer,Sp=this.sampleValues,Cp=this.valueSize,Lp=2*Cp,zp=3*Cp,Dp=gp-dp,hp=(bp-dp)/Dp,vp=hp*hp,Np=vp*hp,Fp=fp*zp,qp=Fp-zp,jp=-2*Np+3*vp,Xp=Np-vp,rm=1-jp,em=Xp-vp+hp,lm=0;lm!==Cp;lm++){var Zp=Sp[qp+lm+Cp],im=Sp[qp+lm+Lp]*Dp,Jp=Sp[Fp+lm+Cp],am=Sp[Fp+lm]*Dp;wp[lm]=rm*Zp+em*im+jp*Jp+Xp*am}return wp};var Wu=0,qu=1,Yu=2,Zu=3,_h=4,ep=5,ip=6,ap={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},sp={9728:e$2.NearestFilter,9729:e$2.LinearFilter,9984:e$2.NearestMipmapNearestFilter,9985:e$2.LinearMipmapNearestFilter,9986:e$2.NearestMipmapLinearFilter,9987:e$2.LinearMipmapLinearFilter},Ju={33071:e$2.ClampToEdgeWrapping,33648:e$2.MirroredRepeatWrapping,10497:e$2.RepeatWrapping},_f={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},np={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},tp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rp={CUBICSPLINE:void 0,LINEAR:e$2.InterpolateLinear,STEP:e$2.InterpolateDiscrete},op="OPAQUE",lp="MASK",up="BLEND",cp={"image/png":e$2.RGBAFormat,"image/jpeg":e$2.RGBFormat};function Ap(fp,dp){return typeof fp!="string"||fp===""?"":(/^https?:\/\//i.test(dp)&&/^\//.test(fp)&&(dp=dp.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(fp)||/^data:.*,.*$/i.test(fp)||/^blob:.*$/i.test(fp)?fp:dp+fp)}function yp(fp,dp,bp){for(var gp in bp.extensions)fp[gp]===void 0&&(dp.userData.gltfExtensions=dp.userData.gltfExtensions||{},dp.userData.gltfExtensions[gp]=bp.extensions[gp])}function Ip(fp,dp){dp.extras!==void 0&&(typeof dp.extras=="object"?Object.assign(fp.userData,dp.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+dp.extras))}function Ep(fp,dp){if(fp.updateMorphTargets(),dp.weights!==void 0)for(var bp=0,gp=dp.weights.length;bp<gp;bp++)fp.morphTargetInfluences[bp]=dp.weights[bp];if(dp.extras&&Array.isArray(dp.extras.targetNames)){var wp=dp.extras.targetNames;if(fp.morphTargetInfluences.length===wp.length)for(fp.morphTargetDictionary={},bp=0,gp=wp.length;bp<gp;bp++)fp.morphTargetDictionary[wp[bp]]=bp;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Vp(fp){for(var dp="",bp=Object.keys(fp).sort(),gp=0,wp=bp.length;gp<wp;gp++)dp+=bp[gp]+":"+fp[bp[gp]]+";";return dp}function $p(fp,dp,bp){this.json=fp||{},this.extensions=dp||{},this.options=bp||{},this.cache=new $u,this.associations=new Map,this.primitiveCache={},this.textureLoader=new e$2.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e$2.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function kp(fp,dp,bp){var gp=dp.attributes,wp=[];function Sp(Dp,hp){return bp.getDependency("accessor",Dp).then(function(vp){fp.setAttribute(hp,vp)})}for(var Cp in gp){var Lp=np[Cp]||Cp.toLowerCase();Lp in fp.attributes||wp.push(Sp(gp[Cp],Lp))}if(dp.indices!==void 0&&!fp.index){var zp=bp.getDependency("accessor",dp.indices).then(function(Dp){fp.setIndex(Dp)});wp.push(zp)}return Ip(fp,dp),function(Dp,hp,vp){var Np=hp.attributes,Fp=new e$2.Box3;if(Np.POSITION!==void 0){var qp=(im=vp.json.accessors[Np.POSITION]).min,jp=im.max;if(qp!==void 0&&jp!==void 0){Fp.set(new e$2.Vector3(qp[0],qp[1],qp[2]),new e$2.Vector3(jp[0],jp[1],jp[2]));var Xp=hp.targets;if(Xp!==void 0){for(var rm=new e$2.Vector3,em=new e$2.Vector3,lm=0,Zp=Xp.length;lm<Zp;lm++){var im,Jp=Xp[lm];Jp.POSITION!==void 0&&(qp=(im=vp.json.accessors[Jp.POSITION]).min,jp=im.max,qp!==void 0&&jp!==void 0?(em.setX(Math.max(Math.abs(qp[0]),Math.abs(jp[0]))),em.setY(Math.max(Math.abs(qp[1]),Math.abs(jp[1]))),em.setZ(Math.max(Math.abs(qp[2]),Math.abs(jp[2]))),rm.max(em)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}Fp.expandByVector(rm)}Dp.boundingBox=Fp;var am=new e$2.Sphere;Fp.getCenter(am.center),am.radius=Fp.min.distanceTo(Fp.max)/2,Dp.boundingSphere=am}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(fp,dp,bp),Promise.all(wp).then(function(){return dp.targets!==void 0?function(Dp,hp,vp){for(var Np=!1,Fp=!1,qp=0,jp=hp.length;qp<jp&&((em=hp[qp]).POSITION!==void 0&&(Np=!0),em.NORMAL!==void 0&&(Fp=!0),!Np||!Fp);qp++);if(!Np&&!Fp)return Promise.resolve(Dp);var Xp=[],rm=[];for(qp=0,jp=hp.length;qp<jp;qp++){var em=hp[qp];if(Np){var lm=em.POSITION!==void 0?vp.getDependency("accessor",em.POSITION):Dp.attributes.position;Xp.push(lm)}Fp&&(lm=em.NORMAL!==void 0?vp.getDependency("accessor",em.NORMAL):Dp.attributes.normal,rm.push(lm))}return Promise.all([Promise.all(Xp),Promise.all(rm)]).then(function(Zp){var im=Zp[0],Jp=Zp[1];return Np&&(Dp.morphAttributes.position=im),Fp&&(Dp.morphAttributes.normal=Jp),Dp.morphTargetsRelative=!0,Dp})}(fp,dp.targets,bp):fp})}function Bp(fp,dp){var bp=fp.getIndex();if(bp===null){var gp=[],wp=fp.getAttribute("position");if(wp===void 0)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),fp;for(var Sp=0;Sp<wp.count;Sp++)gp.push(Sp);fp.setIndex(gp),bp=fp.getIndex()}var Cp=bp.count-2,Lp=[];if(dp===e$2.TriangleFanDrawMode)for(Sp=1;Sp<=Cp;Sp++)Lp.push(bp.getX(0)),Lp.push(bp.getX(Sp)),Lp.push(bp.getX(Sp+1));else for(Sp=0;Sp<Cp;Sp++)Sp%2==0?(Lp.push(bp.getX(Sp)),Lp.push(bp.getX(Sp+1)),Lp.push(bp.getX(Sp+2))):(Lp.push(bp.getX(Sp+2)),Lp.push(bp.getX(Sp+1)),Lp.push(bp.getX(Sp)));Lp.length/3!==Cp&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var zp=fp.clone();return zp.setIndex(Lp),zp}return $p.prototype.parse=function(fp,dp){var bp=this,gp=this.json,wp=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(Sp){var Cp={scene:Sp[0][gp.scene||0],scenes:Sp[0],animations:Sp[1],cameras:Sp[2],asset:gp.asset,parser:bp,userData:{}};yp(wp,Cp,gp),Ip(Cp,gp),fp(Cp)}).catch(dp)},$p.prototype.markDefs=function(){for(var fp=this.json.nodes||[],dp=this.json.skins||[],bp=this.json.meshes||[],gp={},wp={},Sp=0,Cp=dp.length;Sp<Cp;Sp++)for(var Lp=dp[Sp].joints,zp=0,Dp=Lp.length;zp<Dp;zp++)fp[Lp[zp]].isBone=!0;for(var hp=0,vp=fp.length;hp<vp;hp++){var Np=fp[hp];Np.mesh!==void 0&&(gp[Np.mesh]===void 0&&(gp[Np.mesh]=wp[Np.mesh]=0),gp[Np.mesh]++,Np.skin!==void 0&&(bp[Np.mesh].isSkinnedMesh=!0))}this.json.meshReferences=gp,this.json.meshUses=wp},$p.prototype.getDependency=function(fp,dp){var bp=fp+":"+dp,gp=this.cache.get(bp);if(!gp){switch(fp){case"scene":gp=this.loadScene(dp);break;case"node":gp=this.loadNode(dp);break;case"mesh":gp=this.loadMesh(dp);break;case"accessor":gp=this.loadAccessor(dp);break;case"bufferView":gp=this.loadBufferView(dp);break;case"buffer":gp=this.loadBuffer(dp);break;case"material":gp=this.loadMaterial(dp);break;case"texture":gp=this.loadTexture(dp);break;case"skin":gp=this.loadSkin(dp);break;case"animation":gp=this.loadAnimation(dp);break;case"camera":gp=this.loadCamera(dp);break;case"light":gp=this.extensions[Bu.KHR_LIGHTS_PUNCTUAL].loadLight(dp);break;default:throw new Error("Unknown type: "+fp)}this.cache.add(bp,gp)}return gp},$p.prototype.getDependencies=function(fp){var dp=this.cache.get(fp);if(!dp){var bp=this,gp=this.json[fp+(fp==="mesh"?"es":"s")]||[];dp=Promise.all(gp.map(function(wp,Sp){return bp.getDependency(fp,Sp)})),this.cache.add(fp,dp)}return dp},$p.prototype.loadBuffer=function(fp){var dp=this.json.buffers[fp],bp=this.fileLoader;if(dp.type&&dp.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+dp.type+" buffer type is not supported.");if(dp.uri===void 0&&fp===0)return Promise.resolve(this.extensions[Bu.KHR_BINARY_GLTF].body);var gp=this.options;return new Promise(function(wp,Sp){bp.load(Ap(dp.uri,gp.path),wp,void 0,function(){Sp(new Error('THREE.GLTFLoader: Failed to load buffer "'+dp.uri+'".'))})})},$p.prototype.loadBufferView=function(fp){var dp=this.json.bufferViews[fp];return this.getDependency("buffer",dp.buffer).then(function(bp){var gp=dp.byteLength||0,wp=dp.byteOffset||0;return bp.slice(wp,wp+gp)})},$p.prototype.loadAccessor=function(fp){var dp=this,bp=this.json,gp=this.json.accessors[fp];if(gp.bufferView===void 0&&gp.sparse===void 0)return Promise.resolve(null);var wp=[];return gp.bufferView!==void 0?wp.push(this.getDependency("bufferView",gp.bufferView)):wp.push(null),gp.sparse!==void 0&&(wp.push(this.getDependency("bufferView",gp.sparse.indices.bufferView)),wp.push(this.getDependency("bufferView",gp.sparse.values.bufferView))),Promise.all(wp).then(function(Sp){var Cp,Lp,zp=Sp[0],Dp=_f[gp.type],hp=ap[gp.componentType],vp=hp.BYTES_PER_ELEMENT,Np=vp*Dp,Fp=gp.byteOffset||0,qp=gp.bufferView!==void 0?bp.bufferViews[gp.bufferView].byteStride:void 0,jp=gp.normalized===!0;if(qp&&qp!==Np){var Xp=Math.floor(Fp/qp),rm="InterleavedBuffer:"+gp.bufferView+":"+gp.componentType+":"+Xp+":"+gp.count,em=dp.cache.get(rm);em||(Cp=new hp(zp,Xp*qp,gp.count*qp/vp),em=new e$2.InterleavedBuffer(Cp,qp/vp),dp.cache.add(rm,em)),Lp=new e$2.InterleavedBufferAttribute(em,Dp,Fp%qp/vp,jp)}else Cp=zp===null?new hp(gp.count*Dp):new hp(zp,Fp,gp.count*Dp),Lp=new e$2.BufferAttribute(Cp,Dp,jp);if(gp.sparse!==void 0){var lm=_f.SCALAR,Zp=ap[gp.sparse.indices.componentType],im=gp.sparse.indices.byteOffset||0,Jp=gp.sparse.values.byteOffset||0,am=new Zp(Sp[1],im,gp.sparse.count*lm),Pp=new hp(Sp[2],Jp,gp.sparse.count*Dp);zp!==null&&(Lp=new e$2.BufferAttribute(Lp.array.slice(),Lp.itemSize,Lp.normalized));for(var tm=0,sm=am.length;tm<sm;tm++){var cm=am[tm];if(Lp.setX(cm,Pp[tm*Dp]),Dp>=2&&Lp.setY(cm,Pp[tm*Dp+1]),Dp>=3&&Lp.setZ(cm,Pp[tm*Dp+2]),Dp>=4&&Lp.setW(cm,Pp[tm*Dp+3]),Dp>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Lp})},$p.prototype.loadTexture=function(fp){var dp,bp=this,gp=this.json,wp=this.options,Sp=this.textureLoader,Cp=self.URL||self.webkitURL,Lp=gp.textures[fp],zp=Lp.extensions||{},Dp=(dp=zp[Bu.MSFT_TEXTURE_DDS]?gp.images[zp[Bu.MSFT_TEXTURE_DDS].source]:gp.images[Lp.source]).uri,hp=!1;return dp.bufferView!==void 0&&(Dp=bp.getDependency("bufferView",dp.bufferView).then(function(vp){hp=!0;var Np=new Blob([vp],{type:dp.mimeType});return Dp=Cp.createObjectURL(Np)})),Promise.resolve(Dp).then(function(vp){var Np=wp.manager.getHandler(vp);return Np||(Np=zp[Bu.MSFT_TEXTURE_DDS]?bp.extensions[Bu.MSFT_TEXTURE_DDS].ddsLoader:Sp),new Promise(function(Fp,qp){Np.load(Ap(vp,wp.path),Fp,void 0,qp)})}).then(function(vp){hp===!0&&Cp.revokeObjectURL(Dp),vp.flipY=!1,Lp.name&&(vp.name=Lp.name),dp.mimeType in cp&&(vp.format=cp[dp.mimeType]);var Np=(gp.samplers||{})[Lp.sampler]||{};return vp.magFilter=sp[Np.magFilter]||e$2.LinearFilter,vp.minFilter=sp[Np.minFilter]||e$2.LinearMipmapLinearFilter,vp.wrapS=Ju[Np.wrapS]||e$2.RepeatWrapping,vp.wrapT=Ju[Np.wrapT]||e$2.RepeatWrapping,bp.associations.set(vp,{type:"textures",index:fp}),vp})},$p.prototype.assignTexture=function(fp,dp,bp){var gp=this;return this.getDependency("texture",bp.index).then(function(wp){if(!wp.isCompressedTexture)switch(dp){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":wp.format=e$2.RGBFormat}if(bp.texCoord===void 0||bp.texCoord==0||dp==="aoMap"&&bp.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+bp.texCoord+" for texture "+dp+" not yet supported."),gp.extensions[Bu.KHR_TEXTURE_TRANSFORM]){var Sp=bp.extensions!==void 0?bp.extensions[Bu.KHR_TEXTURE_TRANSFORM]:void 0;if(Sp){var Cp=this.associations.get(wp);wp=gp.extensions[Bu.KHR_TEXTURE_TRANSFORM].extendTexture(wp,Sp),this.associations.set(wp,Cp)}}fp[dp]=wp})},$p.prototype.assignFinalMaterial=function(fp){var dp=fp.geometry,bp=fp.material,gp=dp.attributes.tangent!==void 0,wp=dp.attributes.color!==void 0,Sp=dp.attributes.normal===void 0,Cp=fp.isSkinnedMesh===!0,Lp=Object.keys(dp.morphAttributes).length>0,zp=Lp&&dp.morphAttributes.normal!==void 0;if(fp.isPoints){var Dp="PointsMaterial:"+bp.uuid,hp=this.cache.get(Dp);hp||(hp=new e$2.PointsMaterial,e$2.Material.prototype.copy.call(hp,bp),hp.color.copy(bp.color),hp.map=bp.map,hp.sizeAttenuation=!1,this.cache.add(Dp,hp)),bp=hp}else if(fp.isLine){Dp="LineBasicMaterial:"+bp.uuid;var vp=this.cache.get(Dp);vp||(vp=new e$2.LineBasicMaterial,e$2.Material.prototype.copy.call(vp,bp),vp.color.copy(bp.color),this.cache.add(Dp,vp)),bp=vp}if(gp||wp||Sp||Cp||Lp){Dp="ClonedMaterial:"+bp.uuid+":",bp.isGLTFSpecularGlossinessMaterial&&(Dp+="specular-glossiness:"),Cp&&(Dp+="skinning:"),gp&&(Dp+="vertex-tangents:"),wp&&(Dp+="vertex-colors:"),Sp&&(Dp+="flat-shading:"),Lp&&(Dp+="morph-targets:"),zp&&(Dp+="morph-normals:");var Np=this.cache.get(Dp);Np||(Np=bp.clone(),Cp&&(Np.skinning=!0),gp&&(Np.vertexTangents=!0),wp&&(Np.vertexColors=!0),Sp&&(Np.flatShading=!0),Lp&&(Np.morphTargets=!0),zp&&(Np.morphNormals=!0),this.cache.add(Dp,Np),this.associations.set(Np,this.associations.get(bp))),bp=Np}bp.aoMap&&dp.attributes.uv2===void 0&&dp.attributes.uv!==void 0&&dp.setAttribute("uv2",dp.attributes.uv),bp.normalScale&&!gp&&(bp.normalScale.y=-bp.normalScale.y),bp.clearcoatNormalScale&&!gp&&(bp.clearcoatNormalScale.y=-bp.clearcoatNormalScale.y),fp.material=bp},$p.prototype.loadMaterial=function(fp){var dp,bp=this,gp=this.json,wp=this.extensions,Sp=gp.materials[fp],Cp={},Lp=Sp.extensions||{},zp=[];if(Lp[Bu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Dp=wp[Bu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];dp=Dp.getMaterialType(),zp.push(Dp.extendParams(Cp,Sp,bp))}else if(Lp[Bu.KHR_MATERIALS_UNLIT]){var hp=wp[Bu.KHR_MATERIALS_UNLIT];dp=hp.getMaterialType(),zp.push(hp.extendParams(Cp,Sp,bp))}else{dp=e$2.MeshStandardMaterial;var vp=Sp.pbrMetallicRoughness||{};if(Cp.color=new e$2.Color(1,1,1),Cp.opacity=1,Array.isArray(vp.baseColorFactor)){var Np=vp.baseColorFactor;Cp.color.fromArray(Np),Cp.opacity=Np[3]}vp.baseColorTexture!==void 0&&zp.push(bp.assignTexture(Cp,"map",vp.baseColorTexture)),Cp.metalness=vp.metallicFactor!==void 0?vp.metallicFactor:1,Cp.roughness=vp.roughnessFactor!==void 0?vp.roughnessFactor:1,vp.metallicRoughnessTexture!==void 0&&(zp.push(bp.assignTexture(Cp,"metalnessMap",vp.metallicRoughnessTexture)),zp.push(bp.assignTexture(Cp,"roughnessMap",vp.metallicRoughnessTexture)))}Sp.doubleSided===!0&&(Cp.side=e$2.DoubleSide);var Fp=Sp.alphaMode||op;if(Fp===up?(Cp.transparent=!0,Cp.depthWrite=!1):(Cp.transparent=!1,Fp===lp&&(Cp.alphaTest=Sp.alphaCutoff!==void 0?Sp.alphaCutoff:.5)),Sp.normalTexture!==void 0&&dp!==e$2.MeshBasicMaterial&&(zp.push(bp.assignTexture(Cp,"normalMap",Sp.normalTexture)),Cp.normalScale=new e$2.Vector2(1,1),Sp.normalTexture.scale!==void 0&&Cp.normalScale.set(Sp.normalTexture.scale,Sp.normalTexture.scale)),Sp.occlusionTexture!==void 0&&dp!==e$2.MeshBasicMaterial&&(zp.push(bp.assignTexture(Cp,"aoMap",Sp.occlusionTexture)),Sp.occlusionTexture.strength!==void 0&&(Cp.aoMapIntensity=Sp.occlusionTexture.strength)),Sp.emissiveFactor!==void 0&&dp!==e$2.MeshBasicMaterial&&(Cp.emissive=new e$2.Color().fromArray(Sp.emissiveFactor)),Sp.emissiveTexture!==void 0&&dp!==e$2.MeshBasicMaterial&&zp.push(bp.assignTexture(Cp,"emissiveMap",Sp.emissiveTexture)),Lp[Bu.KHR_MATERIALS_CLEARCOAT]){var qp=wp[Bu.KHR_MATERIALS_CLEARCOAT];dp=qp.getMaterialType(),zp.push(qp.extendParams(Cp,{extensions:Lp},bp))}return Promise.all(zp).then(function(){var jp;return jp=dp===ju?wp[Bu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Cp):new dp(Cp),Sp.name&&(jp.name=Sp.name),jp.map&&(jp.map.encoding=e$2.sRGBEncoding),jp.emissiveMap&&(jp.emissiveMap.encoding=e$2.sRGBEncoding),Ip(jp,Sp),bp.associations.set(jp,{type:"materials",index:fp}),Sp.extensions&&yp(wp,jp,Sp),jp})},$p.prototype.loadGeometries=function(fp){var dp=this,bp=this.extensions,gp=this.primitiveCache;function wp(qp){return bp[Bu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(qp,dp).then(function(jp){return kp(jp,qp,dp)})}for(var Sp,Cp,Lp=[],zp=0,Dp=fp.length;zp<Dp;zp++){var hp,vp=fp[zp],Np=(Cp=void 0,(Cp=(Sp=vp).extensions&&Sp.extensions[Bu.KHR_DRACO_MESH_COMPRESSION])?"draco:"+Cp.bufferView+":"+Cp.indices+":"+Vp(Cp.attributes):Sp.indices+":"+Vp(Sp.attributes)+":"+Sp.mode),Fp=gp[Np];Fp?Lp.push(Fp.promise):(hp=vp.extensions&&vp.extensions[Bu.KHR_DRACO_MESH_COMPRESSION]?wp(vp):kp(new e$2.BufferGeometry,vp,dp),gp[Np]={primitive:vp,promise:hp},Lp.push(hp))}return Promise.all(Lp)},$p.prototype.loadMesh=function(fp){for(var dp,bp=this,gp=this.json.meshes[fp],wp=gp.primitives,Sp=[],Cp=0,Lp=wp.length;Cp<Lp;Cp++){var zp=wp[Cp].material===void 0?((dp=this.cache).DefaultMaterial===void 0&&(dp.DefaultMaterial=new e$2.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e$2.FrontSide})),dp.DefaultMaterial):this.getDependency("material",wp[Cp].material);Sp.push(zp)}return Sp.push(bp.loadGeometries(wp)),Promise.all(Sp).then(function(Dp){for(var hp=Dp.slice(0,Dp.length-1),vp=Dp[Dp.length-1],Np=[],Fp=0,qp=vp.length;Fp<qp;Fp++){var jp,Xp=vp[Fp],rm=wp[Fp],em=hp[Fp];if(rm.mode===_h||rm.mode===ep||rm.mode===ip||rm.mode===void 0)(jp=gp.isSkinnedMesh===!0?new e$2.SkinnedMesh(Xp,em):new e$2.Mesh(Xp,em)).isSkinnedMesh!==!0||jp.geometry.attributes.skinWeight.normalized||jp.normalizeSkinWeights(),rm.mode===ep?jp.geometry=Bp(jp.geometry,e$2.TriangleStripDrawMode):rm.mode===ip&&(jp.geometry=Bp(jp.geometry,e$2.TriangleFanDrawMode));else if(rm.mode===qu)jp=new e$2.LineSegments(Xp,em);else if(rm.mode===Zu)jp=new e$2.Line(Xp,em);else if(rm.mode===Yu)jp=new e$2.LineLoop(Xp,em);else{if(rm.mode!==Wu)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+rm.mode);jp=new e$2.Points(Xp,em)}Object.keys(jp.geometry.morphAttributes).length>0&&Ep(jp,gp),jp.name=gp.name||"mesh_"+fp,vp.length>1&&(jp.name+="_"+Fp),Ip(jp,gp),bp.assignFinalMaterial(jp),Np.push(jp)}if(Np.length===1)return Np[0];var lm=new e$2.Group;for(Fp=0,qp=Np.length;Fp<qp;Fp++)lm.add(Np[Fp]);return lm})},$p.prototype.loadCamera=function(fp){var dp,bp=this.json.cameras[fp],gp=bp[bp.type];if(gp)return bp.type==="perspective"?dp=new e$2.PerspectiveCamera(e$2.MathUtils.radToDeg(gp.yfov),gp.aspectRatio||1,gp.znear||1,gp.zfar||2e6):bp.type==="orthographic"&&(dp=new e$2.OrthographicCamera(-gp.xmag,gp.xmag,gp.ymag,-gp.ymag,gp.znear,gp.zfar)),bp.name&&(dp.name=bp.name),Ip(dp,bp),Promise.resolve(dp);console.warn("THREE.GLTFLoader: Missing camera parameters.")},$p.prototype.loadSkin=function(fp){var dp=this.json.skins[fp],bp={joints:dp.joints};return dp.inverseBindMatrices===void 0?Promise.resolve(bp):this.getDependency("accessor",dp.inverseBindMatrices).then(function(gp){return bp.inverseBindMatrices=gp,bp})},$p.prototype.loadAnimation=function(fp){for(var dp=this.json.animations[fp],bp=[],gp=[],wp=[],Sp=[],Cp=[],Lp=0,zp=dp.channels.length;Lp<zp;Lp++){var Dp=dp.channels[Lp],hp=dp.samplers[Dp.sampler],vp=Dp.target,Np=vp.node!==void 0?vp.node:vp.id,Fp=dp.parameters!==void 0?dp.parameters[hp.input]:hp.input,qp=dp.parameters!==void 0?dp.parameters[hp.output]:hp.output;bp.push(this.getDependency("node",Np)),gp.push(this.getDependency("accessor",Fp)),wp.push(this.getDependency("accessor",qp)),Sp.push(hp),Cp.push(vp)}return Promise.all([Promise.all(bp),Promise.all(gp),Promise.all(wp),Promise.all(Sp),Promise.all(Cp)]).then(function(jp){for(var Xp=jp[0],rm=jp[1],em=jp[2],lm=jp[3],Zp=jp[4],im=[],Jp=0,am=Xp.length;Jp<am;Jp++){var Pp=Xp[Jp],tm=rm[Jp],sm=em[Jp],cm=lm[Jp],um=Zp[Jp];if(Pp!==void 0){var vm;switch(Pp.updateMatrix(),Pp.matrixAutoUpdate=!0,tp[um.path]){case tp.weights:vm=e$2.NumberKeyframeTrack;break;case tp.rotation:vm=e$2.QuaternionKeyframeTrack;break;case tp.position:case tp.scale:default:vm=e$2.VectorKeyframeTrack}var _m=Pp.name?Pp.name:Pp.uuid,Mm=cm.interpolation!==void 0?rp[cm.interpolation]:e$2.InterpolateLinear,Rm=[];tp[um.path]===tp.weights?Pp.traverse(function(_p){_p.isMesh===!0&&_p.morphTargetInfluences&&Rm.push(_p.name?_p.name:_p.uuid)}):Rm.push(_m);var wm=sm.array;if(sm.normalized){var Pm;if(wm.constructor===Int8Array)Pm=1/127;else if(wm.constructor===Uint8Array)Pm=1/255;else if(wm.constructor==Int16Array)Pm=1/32767;else{if(wm.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");Pm=1/65535}for(var Im=new Float32Array(wm.length),Sm=0,Dm=wm.length;Sm<Dm;Sm++)Im[Sm]=wm[Sm]*Pm;wm=Im}for(Sm=0,Dm=Rm.length;Sm<Dm;Sm++){var Vm=new vm(Rm[Sm]+"."+tp[um.path],tm.array,wm,Mm);cm.interpolation==="CUBICSPLINE"&&(Vm.createInterpolant=function(_p){return new Ku(this.times,this.values,this.getValueSize()/3,_p)},Vm.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),im.push(Vm)}}}var Cm=dp.name?dp.name:"animation_"+fp;return new e$2.AnimationClip(Cm,void 0,im)})},$p.prototype.loadNode=function(fp){var dp,bp=this.json,gp=this.extensions,wp=this,Sp=bp.meshReferences,Cp=bp.meshUses,Lp=bp.nodes[fp];return(dp=[],Lp.mesh!==void 0&&dp.push(wp.getDependency("mesh",Lp.mesh).then(function(zp){var Dp;if(Sp[Lp.mesh]>1){var hp=Cp[Lp.mesh]++;(Dp=zp.clone()).name+="_instance_"+hp}else Dp=zp;return Lp.weights!==void 0&&Dp.traverse(function(vp){if(vp.isMesh)for(var Np=0,Fp=Lp.weights.length;Np<Fp;Np++)vp.morphTargetInfluences[Np]=Lp.weights[Np]}),Dp})),Lp.camera!==void 0&&dp.push(wp.getDependency("camera",Lp.camera)),Lp.extensions&&Lp.extensions[Bu.KHR_LIGHTS_PUNCTUAL]&&Lp.extensions[Bu.KHR_LIGHTS_PUNCTUAL].light!==void 0&&dp.push(wp.getDependency("light",Lp.extensions[Bu.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(dp)).then(function(zp){var Dp;if((Dp=Lp.isBone===!0?new e$2.Bone:zp.length>1?new e$2.Group:zp.length===1?zp[0]:new e$2.Object3D)!==zp[0])for(var hp=0,vp=zp.length;hp<vp;hp++)Dp.add(zp[hp]);if(Lp.name&&(Dp.userData.name=Lp.name,Dp.name=e$2.PropertyBinding.sanitizeNodeName(Lp.name)),Ip(Dp,Lp),Lp.extensions&&yp(gp,Dp,Lp),Lp.matrix!==void 0){var Np=new e$2.Matrix4;Np.fromArray(Lp.matrix),Dp.applyMatrix4(Np)}else Lp.translation!==void 0&&Dp.position.fromArray(Lp.translation),Lp.rotation!==void 0&&Dp.quaternion.fromArray(Lp.rotation),Lp.scale!==void 0&&Dp.scale.fromArray(Lp.scale);return wp.associations.set(Dp,{type:"nodes",index:fp}),Dp})},$p.prototype.loadScene=function(){function fp(dp,bp,gp,wp){var Sp=gp.nodes[dp];return wp.getDependency("node",dp).then(function(Cp){return Sp.skin===void 0?Cp:wp.getDependency("skin",Sp.skin).then(function(zp){for(var Dp=[],hp=0,vp=(Lp=zp).joints.length;hp<vp;hp++)Dp.push(wp.getDependency("node",Lp.joints[hp]));return Promise.all(Dp)}).then(function(zp){return Cp.traverse(function(Dp){if(Dp.isMesh){for(var hp=[],vp=[],Np=0,Fp=zp.length;Np<Fp;Np++){var qp=zp[Np];if(qp){hp.push(qp);var jp=new e$2.Matrix4;Lp.inverseBindMatrices!==void 0&&jp.fromArray(Lp.inverseBindMatrices.array,16*Np),vp.push(jp)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Lp.joints[Np])}Dp.bind(new e$2.Skeleton(hp,vp),Dp.matrixWorld)}}),Cp});var Lp}).then(function(Cp){bp.add(Cp);var Lp=[];if(Sp.children)for(var zp=Sp.children,Dp=0,hp=zp.length;Dp<hp;Dp++){var vp=zp[Dp];Lp.push(fp(vp,Cp,gp,wp))}return Promise.all(Lp)})}return function(dp){var bp=this.json,gp=this.extensions,wp=this.json.scenes[dp],Sp=new e$2.Group;wp.name&&(Sp.name=wp.name),Ip(Sp,wp),wp.extensions&&yp(gp,Sp,wp);for(var Cp=wp.nodes||[],Lp=[],zp=0,Dp=Cp.length;zp<Dp;zp++)Lp.push(fp(Cp[zp],Sp,bp,this));return Promise.all(Lp).then(function(){return Sp})}}(),_u}()),Wr=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(1,0,0),Math.PI/2);function Xr(_u){function $u(Bu){if(Bu.isMesh)return function(Fu){var Nu=new ft;Nu.geometry=Fu.geometry,Nu.geometry.computeVertexNormals(),Nu.geometry.computeBoundingBox(),Nu.geometry.computeBoundingSphere(),Nu.geometry.addGroup(0,Fu.geometry.index.count,0);var Vu=new Mt;return Vu.uniforms.map.value=Fu.material.map,Vu.uniforms.exposure.value=3.3,Vu.opacity=1,Fu.material.dispose(),Nu.material=[Vu],Nu.position.copy(Fu.position),Nu.quaternion.copy(Fu.quaternion),Nu.scale.copy(Fu.scale),Nu.matrix.compose(Nu.position,Nu.quaternion,Nu.scale),Nu}(Bu);if(Bu.isGroup){for(var Ru=function(Fu){var Nu=new gt$1;return Nu.position.copy(Fu.position),Nu.quaternion.copy(Fu.quaternion),Nu.scale.copy(Fu.scale),Nu.matrix.compose(Nu.position,Nu.quaternion,Nu.scale),Nu}(Bu),Lu=0;Lu<Bu.children.length;Lu++){var Ou=$u(Bu.children[Lu]);Ru.add(Ou)}return Ru}return new gt$1}return new Promise(function(Bu,Ru){var Lu,Ou=new r$3.Matrix4().fromArray(_u.computedTransform);if(((Lu=_u.tileset.asset)===null||Lu===void 0?void 0:Lu.gltfUpAxis)!=="Z"&&Ou.multiply(Wr),_u.content){var Fu=_u.content.gltfArrayBuffer,Nu=_u.contentUrl?_u.contentUrl.slice(0,_u.contentUrl.lastIndexOf("/")+1):"";Gr.parse(Fu,Nu,function(Vu){var Uu=Vu.scene,Gu=new gt$1,zu=$u(Uu);zu.applyMatrix4(Ou),Gu.add(zu),Bu(Gu)},function(Vu){Ru(new Error("error parsing gltf in tile ".concat(_u.id,": ").concat(Vu.message)))})}else Bu(new gt$1)})}function Yr(_u){_u.traverse(function($u){if($u instanceof ft){$u.geometry.dispose();for(var Bu=0,Ru=$u.material;Bu<Ru.length;Bu++){var Lu=Ru[Bu];Lu.uniforms.map&&Lu.uniforms.map.value&&(Lu.uniforms.map.value.dispose(),Lu.uniforms.map.value=null)}}})}function Zr(_u){return new r$3.Matrix4().fromArray([2*_u[0],2*_u[1],2*_u[2],0,2*_u[3],2*_u[4],2*_u[5],0,2*_u[6],2*_u[7],2*_u[8],0,0,0,0,1])}function Jr(_u){return new Tn(_u.toArray())}function $r(_u){var $u=_u.planes.map(function(Bu){return new kn$1(Bu.normal.toArray(),Bu.constant)});return new Fn($u)}var eo$1=new r$3.EdgesGeometry(new r$3.BoxBufferGeometry(1,1,1)),to=new r$3.LineBasicMaterial({color:new r$3.Color(1,1,0),transparent:!0});function io(_u){_u.updateMatrix(),_u.updateMatrixWorld(),_u.matrixWorld.getInverse(_u.matrixWorldInverse);var $u=new r$3.Matrix4().multiplyMatrices(_u.projectionMatrix,_u.matrixWorldInverse);return new r$3.Frustum().setFromProjectionMatrix($u)}var no={throttleRequests:!0,maxRequests:64,updateInterval:.1,maxScreenSpaceError:8,maxMemoryUsage:32,viewDistanceScale:.2,onNodeCreated:function(){}},ro$1=function(_u){function $u(Bu){Bu===void 0&&(Bu={});var Ru=_u.call(this)||this;return Ru.options=t$3.__assign(t$3.__assign({},no),Bu),Ru.clock=new r$3.Clock,Ru.timer=0,Ru.unloadTileQueue=[],Ru.nodes={},Ru.boundings={},Ru.nodeGroup=new r$3.Group,Ru.boundingGroup=new r$3.Group,Ru.add(Ru.nodeGroup),Ru.sseDenominator=null,Ru.lastCameraTransform=new r$3.Matrix4,Ru.lastCameraAspect=1,Ru.lastCameraFov=null,Ru.lastCamera=null,Ru.lastRenderer=null,Ru.enabled=!1,Ru}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"enable",{get:function(){return this.enabled},set:function(Bu){this.enabled!==Bu&&(this.enabled=Bu,this.enabled===!1?this.reset():(this.timer=0,this.clock.getDelta()))},enumerable:!1,configurable:!0}),$u.prototype.load=function(Bu){var Ru=this,Lu=Bu.tileset_url;Bu.tileset_url_md5;var Ou=Bu.b3md_mappings_url;Bu.b3md_mappings_url_md5;var Fu={modelMatrix:Jr(new r$3.Matrix4().fromArray([1,0,0,0,0,-1,0,1e9,0,0,-1,0,0,0,0,1])),maxMemoryUsage:this.options.maxMemoryUsage,maxScreenSpaceError:this.options.maxScreenSpaceError,viewDistanceScale:this.options.viewDistanceScale,throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests,contentLoader:function(Gu){var zu=function(Hu){var ju=Hu.boundingVolume,Qu=new r$3.LineSegments(eo$1,to);return Qu.applyMatrix4(Zr(ju.halfAxes)),Qu.position.set(ju.center[0],ju.center[1],ju.center[2]),Qu}(Gu);return zu.visible=!1,Ru.boundings[Gu.id]=zu,Ru.boundingGroup.add(zu),zu.updateMatrixWorld(!0),Gu.type==="SCENEGRAPH"||Gu.type==="MESH"?Xr(Gu).then(function(Hu){Ru.tileset===void 0?Yr(Hu):(Hu.visible=!1,Ru.nodes[Gu.id]=Hu,Ru.nodeGroup.add(Hu),Ru.options.onNodeCreated(Hu),Hu.updateMatrixWorld(!0))}):Promise.resolve()},onTileLoad:function(){Ru.enabled&&Ru.tileset&&Ru.lastRenderer&&Ru.lastCamera&&(Ru.tileset.frameNumber++,Ru.tilesetUpdate(Ru.tileset,Ru.lastRenderer,Ru.lastCamera)),Ru.enabled||Ru.reset()},onTileUnload:function(Gu){Ru.unloadTileQueue.push(Gu)},onTileError:function(Gu,zu){console.error("Tile error",Gu.id,zu)},onTraversalComplete:function(Gu){return Gu},allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy,maxDepth:this.options.maxDepth},Nu=Lu.split("/").slice(0,-1).join("/"),Vu=it$1(Lu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Gu){return JSON.parse(Gu.body)}).then(function(Gu){return jr(Gu,Nu)}),Uu=it$1(Ou,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Gu){return JSON.parse(Gu.body)});Promise.all([Vu,Uu]).then(function(Gu){var zu=Gu[0],Hu=Gu[1];zu.b3dmMapping=Hu;var ju=Ru.tileset=new qr(zu,Fu),Qu=new r$3.Matrix4;if(ju.root&&ju.root.boundingVolume){var Xu=ju.root.boundingVolume,Ku=Xu.halfAxes,Wu=Xu.center;Qu.extractRotation(Zr(Ku)),Qu.setPosition(Wu[0],Wu[1],Wu[2])}ju.modelMatrix.copy(Jr(new r$3.Matrix4().getInverse(Qu)))})},$u.prototype.update=function(Bu,Ru){this.lastCamera=Ru,this.lastRenderer=Bu,this.enabled!==!1&&(this.timer+=this.clock.getDelta(),this.tileset&&this.timer>=this.options.updateInterval&&(Ru.matrixWorld.equals(this.lastCameraTransform)&&Ru.aspect===this.lastCameraAspect&&Ru.fov===this.lastCameraFov||(this.timer=0,this.tileset.frameNumber++,this.lastCameraTransform.copy(Ru.matrixWorld),this.tilesetUpdate(this.tileset,Bu,Ru))))},$u.prototype.tilesetUpdate=function(Bu,Ru,Lu){this.sseDenominator&&Lu.aspect===this.lastCameraAspect&&Lu.fov===this.lastCameraFov||(this.sseDenominator=function(ju){var Qu=ju.aspect,Xu=ju.fov/180*Math.PI,Ku=ju.aspect<=1?Xu:2*Math.atan(Math.tan(.5*Xu)/Qu);return 2*Math.tan(.5*Ku)}(Lu),this.lastCameraAspect=Lu.aspect,this.lastCameraFov=Lu.fov);var Ou,Fu={camera:{position:Lu.getWorldPosition(new r$3.Vector3).toArray(),direction:Lu.getWorldDirection(new r$3.Vector3).toArray(),up:Lu.up.toArray()},height:Ru.getSize(new r$3.Vector2).height,frameNumber:Bu.frameNumber,sseDenominator:this.sseDenominator,cullingVolume:$r(io(Lu))};Bu.cache.reset(),Bu.traverser.traverse(Bu.root,Fu);for(var Nu=0,Vu=Bu.tiles;Nu<Vu.length;Nu++){var Uu=Vu[Nu],Gu=Uu.selected,zu=Uu.id;this.nodes[zu]&&this.nodes[zu].visible!==Gu&&(this.nodes[zu].visible=Gu,Gu&&(this.nodes[zu].needsRender=!0)),this.boundings[zu]&&this.boundings[zu].visible!==Gu&&(this.boundings[zu].visible=Gu)}for(;Ou=this.unloadTileQueue.pop();){if(zu=Ou.id,this.nodes[zu]){var Hu=this.nodes[zu];this.nodeGroup.remove(Hu),Yr(Hu),delete this.nodes[zu]}this.boundings[zu]&&(Hu=this.boundings[zu],this.boundingGroup.remove(Hu),delete this.boundings[zu])}},$u.prototype.reset=function(){if(this.tileset){this.tileset.reset();for(var Bu=void 0;Bu=this.unloadTileQueue.pop();)if(Bu.contentState!=="UNLOADED"){var Ru=Bu.id;if(this.nodes[Ru]){var Lu=this.nodes[Ru];this.nodeGroup.remove(Lu),Yr(Lu),delete this.nodes[Ru]}this.boundings[Ru]&&(Lu=this.boundings[Ru],this.boundingGroup.remove(Lu),delete this.boundings[Ru])}for(var Ou=0,Fu=Object.keys(this.nodes);Ou<Fu.length;Ou++){Ru=Fu[Ou];var Nu=this.nodes[Ru];this.nodeGroup.remove(Nu),Yr(Nu),delete this.nodes[Ru]}for(var Vu=0,Uu=Object.keys(this.boundings);Vu<Uu.length;Vu++)Ru=Uu[Vu],Nu=this.boundings[Ru],this.boundingGroup.remove(Nu),delete this.boundings[Ru]}},$u}(At);function oo$1(_u){return _u==null}var so=function(_u,$u){$u===void 0&&($u=1e-4),$u=Math.max($u,Number.EPSILON);for(var Bu={},Ru=_u.getIndex(),Lu=_u.getAttribute("position"),Ou=Ru?Ru.count:Lu.count,Fu=0,Nu=Object.keys(_u.attributes),Vu={},Uu={},Gu=[],zu=["getX","getY","getZ","getW"],Hu=0,ju=Nu.length;Hu<ju;Hu++)Vu[Yu=Nu[Hu]]=[],(ip=_u.morphAttributes[Yu])&&(Uu[Yu]=new Array(ip.length).fill().map(function(){return[]}));var Qu=Math.log10(1/$u),Xu=Math.pow(10,Qu);for(Hu=0;Hu<Ou;Hu++){var Ku=Ru?Ru.getX(Hu):Hu,Wu="",qu=0;for(ju=Nu.length;qu<ju;qu++)for(var Yu=Nu[qu],Zu=(ep=_u.getAttribute(Yu)).itemSize,_h=0;_h<Zu;_h++)Wu+="".concat(~~(ep[zu[_h]](Ku)*Xu),",");if(Wu in Bu)Gu.push(Bu[Wu]);else{for(qu=0,ju=Nu.length;qu<ju;qu++){Yu=Nu[qu];var ep=_u.getAttribute(Yu),ip=_u.morphAttributes[Yu],ap=(Zu=ep.itemSize,Vu[Yu]),sp=Uu[Yu];for(_h=0;_h<Zu;_h++){var Ju=zu[_h];if(ap.push(ep[Ju](Ku)),ip)for(var _f=0,np=ip.length;_f<np;_f++)sp[_f].push(ip[_f][Ju](Ku))}}Bu[Wu]=Fu,Gu.push(Fu),Fu++}}var tp=_u.clone();for(Hu=0,ju=Nu.length;Hu<ju;Hu++){Yu=Nu[Hu];var rp=_u.getAttribute(Yu),op=new rp.array.constructor(Vu[Yu]);if(ep=new r$3.BufferAttribute(op,rp.itemSize,rp.normalized),tp.setAttribute(Yu,ep),Yu in Uu)for(qu=0;qu<Uu[Yu].length;qu++){var lp=_u.morphAttributes[Yu][qu],up=(op=new lp.array.constructor(Uu[Yu][qu]),new r$3.BufferAttribute(op,lp.itemSize,lp.normalized));tp.morphAttributes[Yu][qu]=up}}return tp.setIndex(Gu),tp};function ao$1(_u){var $u;return new(($u=r$3.Triangle).bind.apply($u,t$3.__spreadArray([void 0],_u.map(function(Bu){return new r$3.Vector3(Bu.x,Bu.y,Bu.z)}),!1)))}var lo$1={at3d:function(_u,$u){for(var Bu=Ni$1($u.textureOptions,_u.textures.length),Ru={},Lu=0,Ou=_u.textures;Lu<Ou.length;Lu++){var Fu=Ou[Lu];Ru[Fu]=Li$1(Fu,Bu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Nu){return ti$1(Nu.body)}).then(function(Nu){return jt$1(function(){for(var Vu,Uu={chunks:[]},Gu=0,zu=Nu;Gu<zu.length;Gu++){var Hu=zu[Gu],ju=Ti.decode(Hu);ju.chunks.length&&(Vu=Uu.chunks).push.apply(Vu,ju.chunks)}return Uu})}).then(function(Nu){return jt$1(function(){return Oi$1(Nu,_u.textureBase,_u.textures.slice(),Bu,Ru,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},pbm:function(_u,$u){for(var Bu=Ni$1($u.textureOptions,_u.textures.length),Ru={},Lu=0,Ou=_u.textures;Lu<Ou.length;Lu++){var Fu=Ou[Lu];Ru[Fu]=Li$1(Fu,Bu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Nu){return jt$1(function(){var Vu=new Uint8Array(Nu.body);return Ti.decode(Vu)})}).then(function(Nu){return jt$1(function(){return Oi$1(Nu,_u.textureBase,_u.textures.slice(),Bu,Ru,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},dome:function(_u,$u){return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Bu){return ji$1(new Uint8Array(Bu.body),_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})},domez:function(_u,$u){return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Bu){return ti$1(Bu.body)}).then(function(Bu){var Ru=Bu.reduce(function(Fu,Nu){return Fu+Nu.length},0),Lu=new Uint8Array(Ru),Ou=0;return Bu.forEach(function(Fu){Lu.set(Fu,Ou),Ou+=Fu.length}),Lu}).then(function(Bu){return ji$1(Bu,_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})}},uo$1=function(_u){function $u(Bu){Bu===void 0&&(Bu={});var Ru=_u.call(this)||this;return Ru.empty=!0,Ru.name="model",Ru.loaded=!1,Ru.bvhs=Object.assign([],{loaded:!1}),Ru.bounding=new r$3.Box3,Ru.shownFloor=null,Ru.floorLength=0,Ru.requestProxy=Bu.requestProxy,Ru.networkSubscribe=Bu.networkSubscribe,Ru.allowHosts=Bu.allowHosts,Ru.renderOrder=-3,Ru}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"hasTiles",{get:function(){return this.tiledModel!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableTiles",{get:function(){return!!this.tiledModel&&this.tiledModel.enable},set:function(Bu){this.tiledModel&&(this.tiledModel.enable=Bu)},enumerable:!1,configurable:!0}),$u.prototype.getEdges=function(Bu){var Ru;if(Bu===void 0&&(Bu=30/180*Math.PI),!this.originModel)return[];for(var Lu=Math.cos(Bu),Ou=[],Fu=0,Nu=this.originModel.children;Fu<Nu.length;Fu++){var Vu=Nu[Fu];if(Vu instanceof ft){for(var Uu={},Gu=["a","b","c"],zu=so(Vu.geometry),Hu=zu.getAttribute("position").array,ju=((Ru=zu.getIndex())===null||Ru===void 0?void 0:Ru.array)||[],Qu=[],Xu=[],Ku=0,Wu=Hu.length;Ku<Wu;Ku+=3)Qu.push(new r$3.Vector3(Hu[Ku],Hu[Ku+1],Hu[Ku+2]));for(Ku=0,Wu=ju.length;Ku<Wu;Ku+=3){var qu=ju[Ku],Yu=ju[Ku+1],Zu=ju[Ku+2],_h=new r$3.Vector3().crossVectors(Qu[Yu].clone().sub(Qu[qu]),Qu[Zu].clone().sub(Qu[qu])).normalize();Xu.push({a:qu,b:Yu,c:Zu,normal:_h})}for(Ku=0,Wu=Xu.length;Ku<Wu;Ku++)for(var ep=Xu[Ku],ip=0;ip<3;ip++){var ap=ep[Gu[ip]],sp=ep[Gu[(ip+1)%3]],Ju=[Math.min(ap,sp),Math.max(ap,sp)];Uu[_f=Ju[0]+"-"+Ju[1]]===void 0?Uu[_f]={index1:Ju[0],index2:Ju[1],face1:Ku}:Uu[_f].face2=Ku}for(var _f in Uu){var np=Uu[_f];if(np.face2===void 0||Xu[np.face1].normal.dot(Xu[np.face2].normal)<=Lu){var tp=Qu[np.index1],rp=Qu[np.index2];Ou.push(new r$3.Line3(tp,rp))}}zu.dispose(),Qu.length=0,Xu.length=0}}return Ou},$u.prototype.hasFloors=function(){return this.hasFloors_()},$u.prototype.hasFloors_=function(){var Bu=[];return this.traverse(function(Ru){Ru instanceof ft&&(Bu[Ru.floorIndex]=!0)}),Bu.length},$u.prototype.show=function(){for(var Bu,Ru,Lu=[],Ou=0;Ou<arguments.length;Ou++)Lu[Ou]=arguments[Ou];var Fu=this.shownFloor,Nu=null,Vu=(Bu=Lu[1])!==null&&Bu!==void 0?Bu:.1,Uu=Lu.length!==0;this.shownFloor=Nu=Uu?Lu[0]:null,this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)}),!((Ru=this.tiledModel)===null||Ru===void 0)&&Ru.enable?this.b3dmShow(Fu,Nu):this.at3dShow(Fu,Nu,Vu)},$u.prototype.at3dShow=function(Bu,Ru,Lu){this.traverse(function(Ou){Ou instanceof ft&&Ou.material.forEach(function(Fu){Ru===null||Ru===Ou.floorIndex?Fu.opacity=1*Fu.originOpacity:Fu.opacity=Fu.originOpacity*Lu})}),Bu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},$u.prototype.b3dmShow=function(Bu,Ru){var Lu,Ou;if(!((Ou=(Lu=this.tiledModel)===null||Lu===void 0?void 0:Lu.tileset)===null||Ou===void 0)&&Ou.floorInfo){if(typeof Ru=="number"&&Ru>=0&&Ru<this.tiledModel.tileset.floorInfo.length){var Fu=this.tiledModel.tileset.floorInfo,Nu=-Fu[Ru].ground,Vu=Fu[Ru].height+Nu;this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(Nu,Vu,0)})}else this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)});Bu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0}},$u.prototype.intersectRaycaster=function(Bu,Ru){var Lu=Bu.ray,Ou=Lu.origin,Fu=Lu.direction;if(oo$1(Ru))if(oo$1(this.shownFloor)){var Nu=this.floorLength;Ru=[];for(var Vu=-1;Vu<Nu;Vu++)Ru.push(Vu)}else Ru=[this.shownFloor];var Uu=[],Gu=[];Array.isArray(Ru)?Gu.push.apply(Gu,Ru):Gu.push(Ru);for(var zu=function(Xu){var Ku=Hu.bvhs&&Hu.bvhs[Xu];if(Ku){var Wu=new Ot(Ou.x,Ou.y,Ou.z),qu=new Ot(Fu.x,Fu.y,Fu.z);(Yu=Ku.intersectRay(Wu,qu,!0).map(function(_h){var ep=_h.intersectionPoint,ip=_h.triangle,ap=new r$3.Vector3(ep.x,ep.y,ep.z);return{point:ap,face:{normal:ao$1(ip).getNormal(new r$3.Vector3)},distance:Ou.distanceTo(ap)}})).length&&Uu.push.apply(Uu,Yu)}else if(Hu.originModel){var Yu,Zu=[];Hu.originModel.traverse(function(_h){_h instanceof ft&&_h.floorIndex===Xu&&Zu.push(_h)}),(Yu=Bu.intersectObjects(Zu).map(function(_h){return{face:_h.face?{normal:_h.face.normal}:void 0,point:_h.point,distance:_h.distance}})).length&&Uu.push.apply(Uu,Yu)}},Hu=this,ju=0,Qu=Gu;ju<Qu.length;ju++)zu(Qu[ju]);return Uu.filter(function(Xu){var Ku=Xu.distance;return Ku<=Bu.far&&Ku>=Bu.near}).sort(function(Xu,Ku){return Xu.distance-Ku.distance})},$u.prototype.buildBVH=function(){if(!this.bvhs.loaded&&this.originModel){var Bu=[];this.originModel.traverse(function(ep){ep instanceof ft&&(Bu[ep.floorIndex]=Bu[ep.floorIndex]||[],Bu[ep.floorIndex].push(ep.geometry))}),this.bvhs.length=0;for(var Ru=0,Lu=Bu;Ru<Lu.length;Ru++){var Ou=Lu[Ru],Fu=0;if(Ou){for(var Nu=0,Vu=Ou;Nu<Vu.length;Nu++){var Uu=0;Uu=(Qu=Vu[Nu]).index?Qu.index.array.length:Qu.attributes.position.array.length/3,Fu+=3*Math.floor(Uu/3)}for(var Gu=new Float32Array(3*Fu),zu=0,Hu=0,ju=Ou;Hu<ju.length;Hu++){var Qu,Xu=(Qu=ju[Hu]).attributes.position.array,Ku=Qu.index?Qu.index.array:null;if(Ku){for(var Wu=3*Math.floor(Ku.length/3),qu=0,Yu=void 0,Zu=void 0;qu<Wu;qu++)Yu=3*(zu+qu),Zu=3*Ku[qu],Gu[Yu]=Xu[Zu],Gu[Yu+1]=Xu[Zu+1],Gu[Yu+2]=Xu[Zu+2];zu+=Wu}else{for(Wu=3*Math.floor(Xu.length/3/3),qu=0,Yu=void 0,Zu=void 0;qu<Wu;qu++)Zu=3*qu,Gu[Yu=3*(zu+qu)]=Xu[Zu],Gu[Yu+1]=Xu[Zu+1],Gu[Yu+2]=Xu[Zu+2];zu+=Wu}}var _h=new qt().create(Gu).splitNode(50);this.bvhs.push(_h)}}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},$u.prototype.load=function(Bu,Ru){var Lu=this;if(Ru===void 0&&(Ru={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Ou=function(Nu,Vu){if(Vu===void 0&&(Vu=[]),/^blob\:/.test(Nu))return"at3d";var Uu=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Nu);if(!Uu)return"";for(var Gu=0,zu=String(Uu[1]).trim().split(".").slice(1).reverse();Gu<zu.length;Gu++){var Hu=zu[Gu],ju=Vu.indexOf(Hu);if(ju>=0)return Vu[ju]}return""}(Bu.file,Object.keys(lo$1)),Fu=lo$1[Ou];if(!Fu)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Ou,") does not support."));return this.name=Bu.file,Fu(Bu,{textureOptions:Ru,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}).then(function(Nu){var Vu=Nu.objects,Uu=Nu.texturePromise;Lu.bounding.makeEmpty();var Gu=Lu.originModel=new At;Gu.renderOrder=-3;for(var zu=0,Hu=Vu;zu<Hu.length;zu++)(Ku=Hu[zu]).traverse(function(qu){if(qu instanceof ft){var Yu=qu.geometry;Yu.boundingBox||Yu.computeBoundingBox(),Yu.boundingSphere||Yu.computeBoundingSphere(),Lu.bounding.union(Yu.boundingBox)}}),Gu.add(Ku);for(var ju=Lu.bounding.getCenter(new r$3.Vector3),Qu=0,Xu=Vu;Qu<Xu.length;Qu++){var Ku;(Ku=Xu[Qu]).traverse(function(qu){if(qu instanceof ft)for(var Yu=0,Zu=qu.material;Yu<Zu.length;Yu++)Zu[Yu].uniforms.modelCenter.value=ju})}if(Lu.add(Gu),Lu.floorLength=Lu.hasFloors_(),Lu.empty=!1,Lu.loaded=!0,Bu.tiles&&Bu.tiles.tileset_url&&Bu.tiles.b3md_mappings_url){var Wu=Lu.tiledModel=new ro$1({onNodeCreated:function(qu){var Yu=Gu.getMaterial();Yu&&(qu.setMaterial(Yu),qu.renderOrder=-3),qu.traverse(function(Zu){if(Zu instanceof ft)for(var _h=0,ep=Zu.material;_h<ep.length;_h++)ep[_h].uniforms.modelCenter.value=ju})},allowHosts:Lu.allowHosts,networkSubscribe:Lu.networkSubscribe,requestProxy:Lu.requestProxy});Wu.renderOrder=-3,Lu.add(Wu),Wu.load(Bu.tiles)}Bu.bvh&&Lu.buildBVH(),jt$1(function(){Lu.emit("geometryLoaded"),Uu.then(function(){Lu.emit("materialLoaded"),Lu.emit("loaded")})})}).catch(function(Nu){return Lu.name="",Lu.emit("error",Nu),Promise.reject(Nu)})},$u.prototype.update=function(Bu,Ru){if(this.originModel){var Lu=this.originModel.visible;if(this.tiledModel&&this.tiledModel.enable&&this.tiledModel.tileset){this.tiledModel.update(Bu,Ru);var Ou=this.tiledModel.tileset.root;Ou.content&&Ou.contentState==="READY"&&Lu!==!1&&(this.setTransparent(!1),this.shownFloor&&this.show(this.shownFloor),this.originModel.visible=!1,this.originModel.needsRender=!0)}else Lu!==!0&&(this.originModel.visible=!0,this.originModel.needsRender=!0)}},$u.prototype.dispose=function(){this.off();var Bu=this.originModel,Ru=this.tiledModel;if(Ru&&(Ru.enable=!1,Ru.reset()),Bu)for(Bu.disposeGeometry(),Bu.disposeMaterial();Bu.children.length;)Bu.remove(Bu.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},$u}(At);Object.assign(uo$1.prototype,{on:Fe.prototype.on,once:Fe.prototype.once,off:Fe.prototype.off,emit:Fe.prototype.emit,hasListener:Fe.prototype.hasListener});function ho$1(_u,$u,Bu){return _u<$u?$u:_u>Bu?Bu:_u}function co$1(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=[];_u=_u.map(function(Nu){return(Nu!=null?Nu:"").trim()}).filter(function(Nu){return Nu.length>0&&!/^\/+$/.test(Nu)});for(var Ru=0;Ru<_u.length;Ru++){var Lu=Ru===0,Ou=Ru===_u.length-1,Fu=_u[Ru];Lu||(Fu=Fu.replace(/^\/+/,"")),Ou||(Fu=Fu.replace(/\/+$/,"")),Bu.push(Fu)}return Bu.join("/")}function po$1(_u,$u){if(_u===$u)return!0;if(_u&&$u&&typeof _u=="object"&&typeof $u=="object"){if(_u.constructor!==$u.constructor)return!1;var Bu,Ru,Lu;if(Array.isArray(_u)){if((Bu=_u.length)!=$u.length)return!1;for(Ru=Bu;Ru--!=0;)if(!po$1(_u[Ru],$u[Ru]))return!1;return!0}if(_u.constructor===RegExp)return _u.source===$u.source&&_u.flags===$u.flags;if(_u.valueOf!==Object.prototype.valueOf)return _u.valueOf()===$u.valueOf();if(_u.toString!==Object.prototype.toString)return _u.toString()===$u.toString();if((Bu=(Lu=Object.keys(_u)).length)!==Object.keys($u).length)return!1;for(Ru=Bu;Ru--!=0;)if(!Object.prototype.hasOwnProperty.call($u,Lu[Ru]))return!1;for(Ru=Bu;Ru--!=0;){var Ou=Lu[Ru];if(!po$1(_u[Ou],$u[Ou]))return!1}return!0}return _u!=_u&&$u!=$u}function fo$1(_u){return typeof _u=="number"}function Ao(_u){return(_u&_u-1)==0&&_u!==0}var go$1=function(){return new Error("Invalid input.")},mo$1=function(){return new Error("Invalid certificate.")},vo=function(){return new Error("Invalid signature.")};function yo(_u,$u){$u===void 0&&($u=!1);var Bu=typeof _u;if(Bu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Ru="[",Lu=_u.length-1,Ou=0;Ou<Lu;Ou++)Ru+=yo(_u[Ou],!1)+",";return Lu>-1&&(Ru+=yo(_u[Ou],!1)),Ru+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return yo(_u.toJSON(),$u);var Fu=Object.keys(_u).sort(),Nu=Fu.length;for(Ru="",Ou=0;Ou<Nu;){var Vu=Fu[Ou],Uu=yo(_u[Vu],!0);Uu!==void 0&&(Ou&&Ru!==""&&(Ru+=","),Ru+=JSON.stringify(Vu)+":"+Uu),Ou++}return"{"+Ru+"}"}switch(Bu){case"function":case"undefined":return $u?void 0:null;case"number":return 0;default:return isFinite(_u)?_u:null}}function bo(_u){return String(yo(_u,!1))}function xo$1(_u){var $u,Bu,Ru;if(Array.isArray(_u)){var Lu,Ou,Fu=void 0;if(_u.length<=0)return go$1();for(var Nu=function(Zu){var _h=xo$1(_u[Zu]);if(_h instanceof Error)return{value:_h};if(Fu){if(Fu!==_h.issuer)return{value:mo$1()}}else Fu=_h.issuer;Lu?_h.expire.getTime()<Lu.getTime()&&(Lu=_h.expire):Lu=_h.expire,Ou=Ou?Ou.filter(function(ep){return _h.allowHosts.indexOf(ep)!==-1}):_h.allowHosts},Vu=0;Vu<_u.length;Vu++){var Uu=Nu(Vu);if(typeof Uu=="object")return Uu.value}return He$1({issuer:Fu,expire:Lu,allowHosts:Ou})}var Gu=JSON.parse(_u),zu=typeof location!="undefined"?location.hostname:"",Hu=Date.now();if(typeof Gu!="object")return go$1();var ju=new Date(typeof Gu.expire_at=="string"&&/^\d+$/.test(Gu.expire_at)?Number(Gu.expire_at):Gu.expire_at),Qu=Array.isArray(Gu.allow_hosts)?Gu.allow_hosts:[];if(zu.length===0||ze$1(zu)||je.filter(function(Zu){return Ke(Zu,zu)}).length>0){var Xu=String(($u=Gu.certificate)!==null&&$u!==void 0?$u:"");if(Xu){var Ku=new Be$1;return Ku.readCertPEM(Xu),He$1({issuer:Ku.getSubjectString(),expire:ju,allowHosts:Qu})}return He$1({issuer:"none",expire:ju,allowHosts:Qu})}var Wu=String((Bu=Gu.certificate)!==null&&Bu!==void 0?Bu:"");if(!Wu)return mo$1();var qu=new Be$1;qu.readCertPEM(Wu);var Yu=String((Ru=Gu._signature)!==null&&Ru!==void 0?Ru:"");return Yu?function(Zu,_h,ep){var ip=new Be$1;if(typeof ep=="string"?ip.readCertPEM(ep):ip.readCertHex(ep.hex),De(ip)===!1)return!1;var ap=new X$1;return ap.readCertPubKeyHex(ip.hex,6),!!ap.verify(Zu,O$2(_h))}(bo(function(Zu,_h){for(var ep={},ip=0,ap=Object.keys(Zu);ip<ap.length;ip++){var sp=ap[ip];_h.indexOf(sp)===-1&&(ep[sp]=Zu[sp])}return ep}(Gu,["_signature"])),Yu,qu)===!1?vo():Hu<ju.getTime()?Qu.filter(function(Zu){return Ke(Zu,zu)}).length===0?function(Zu){return new Error("host(".concat(JSON.stringify(Zu),") is not allowed."))}(zu):He$1({issuer:qu.getSubjectString(),expire:ju,allowHosts:Qu}):function(Zu){return new Error("date(".concat(Zu.toString(),") expired."))}(ju):vo()}var wo$1=new WeakMap,Eo$1=function(){function _u(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return _u.prototype.toJSON=function(){return this.raw.works},_u.parse=Co$1,_u}();function Mo(_u){return _u==null?"null":Array.isArray(_u)?"array":typeof _u=="object"?"dict":"value"}function Io$1(_u,$u){var Bu=Mo(_u),Ru=Mo($u);if(Ru==="null")return _u;if(Ru==="value")return $u;if(Ru!==Bu)return JSON.parse(JSON.stringify($u));if(Ru==="array")for(var Lu=0;Lu<$u.length;Lu++)_u[Lu]=Io$1(_u[Lu],$u[Lu]);else if(Ru==="dict")for(var Ou in $u)_u[Ou]=Io$1(_u[Ou],$u[Ou]);return _u}function So(_u,$u,Bu){for(var Ru,Lu=JSON.stringify($u),Ou=[],Fu=0,Nu=[].concat(_u);Fu<Nu.length;Fu++){var Vu=Nu[Fu];Vu instanceof Eo$1?Ou.push.apply(Ou,Vu.raw.works):typeof Vu=="string"?Ou.push(Vu):Ou.push(JSON.stringify(Vu))}var Uu=xo$1(Ou);if(Uu instanceof Error)return Uu;$u=JSON.parse(Lu),_u=Ou.map(function(Dp){return JSON.parse(Dp)}).reduce(function(Dp,hp){return Io$1(Dp,hp)});var Gu=new Eo$1;if(Uu instanceof Error)return Uu;Gu.issuer=Uu.issuer,Gu.expire=Uu.expire,Gu.allowHosts=Uu.allowHosts,Gu.raw={works:Ou,options:Lu};var zu=(Ru=_u.base_url)!==null&&Ru!==void 0?Ru:"";zu&&zu[zu.length-1]!=="/"&&(zu+="/");var Hu=function(Dp,hp){return Dp.indexOf(hp)===0},ju=function(Dp,hp){var vp,Np=Dp;if($u.jsonp===!0){Np=Dp.replace(/([\?\#].*)?$/i,"");var Fp=Te$1("".concat(Np)).slice(0,7);Np="".concat(Np,".").concat(Fp,".jsonp")}if($u.shortPath===!0){var qp=Np.replace(zu,"").split("."),jp=(vp=qp.shift())!==null&&vp!==void 0?vp:"",Xp=qp.join(".");Np=co$1(zu,Te$1(jp))+(Xp?"."+Xp:"")}var rm=Np.replace(zu,"");return $u.baseURL&&(Np=co$1($u.baseURL,rm)),Bu&&Bu(Dp,Np,rm,hp),Np},Qu=function(Dp,hp){var vp,Np,Fp,qp,jp,Xp,rm=Dp;if(!Fi$1(Dp)){var em=(Xp=(qp=(Np=(vp=_u.panorama)===null||vp===void 0?void 0:vp.pano_high_cube_base_url)!==null&&Np!==void 0?Np:(Fp=_u.panorama)===null||Fp===void 0?void 0:Fp.pano_cube_base_url)!==null&&qp!==void 0?qp:(jp=_u.panorama)===null||jp===void 0?void 0:jp.base_url)!==null&&Xp!==void 0?Xp:"";em&&(em=co$1(em,String(hp))),rm=co$1(em,rm)}return Fi$1(rm)||(rm=co$1(zu,rm)),Hu(rm,zu)||console.warn("".concat(rm," is not start with base_url(").concat(zu,").")),ju(rm,"panorama")},Xu=function(Dp){var hp=Dp;return Fi$1(hp)||(hp=co$1(zu,Dp)),Hu(hp,zu)||console.warn("".concat(hp," is not start with base_url(").concat(zu,").")),ju(hp,"model")},Ku=function(Dp,hp){hp===void 0&&(hp="");var vp=Dp;return Fi$1(vp)||(vp=co$1(hp,vp)),Fi$1(vp)||(vp=co$1(zu,vp)),Hu(vp,zu)||console.warn("".concat(vp," is not start with base_url(").concat(zu,").")),ju(vp,"texture")};if(Uu instanceof Error||(Gu.workCode=String(_u.work_code||_u.code||_u.vr_code||_u.workCode),Gu.name=String(_u.name),Uu instanceof Error))return Uu;if(_u.model){var Wu={bvh:!0,async:!1,textureBase:"",textures:[]};typeof $u.modelBvh=="boolean"?Wu.bvh=$u.modelBvh:typeof _u.model.bvh=="boolean"?Wu.bvh=_u.model.bvh:typeof _u.bvh=="boolean"&&(Wu.bvh=_u.bvh),_u.model.file?Wu.file=Xu(_u.model.file):_u.model.file_url&&(Wu.file=Xu(_u.model.file_url)),_u.model.textureBase?Wu.textureBase=_u.model.textureBase:_u.model.material_base_url&&(Wu.textureBase=_u.model.material_base_url),Array.isArray(_u.model.textures)?Wu.textures=_u.model.textures.map(function(Dp){return Ku(Dp,Wu.textureBase)}):Array.isArray(_u.model.material_textures)&&(Wu.textures=_u.model.material_textures.map(function(Dp){return Ku(Dp,Wu.textureBase)})),_u.model.tiles&&(Wu.tiles=_u.model.tiles),Wu.file&&(Gu.model=Wu)}if(Uu instanceof Error)return Uu;if(_u.observers&&Array.isArray(_u.observers)){var qu=[];_u.panorama&&(Array.isArray(_u.panorama)?qu=_u.panorama:Array.isArray(_u.panorama.list)?qu=_u.panorama.list:Array.isArray(_u.panorama.info)&&(qu=_u.panorama.info));for(var Yu=0;Yu<_u.observers.length;Yu++){var Zu={},_h=_u.observers[Yu];if(!_h)break;var ep=qu[Yu];if(!ep)break;_h=Object.assign({},_h,ep,{active:_h.active!==!1&&ep.active!==!1}),Zu.panoIndex=Yu,Zu.active=_h.active!==!1,Zu.loadable=_h.loadable===!0,Zu.images={up:Qu(_h.images?_h.images.up:_h.up,Yu),down:Qu(_h.images?_h.images.down:_h.down,Yu),right:Qu(_h.images?_h.images.right:_h.right,Yu),left:Qu(_h.images?_h.images.left:_h.left,Yu),front:Qu(_h.images?_h.images.front:_h.front,Yu),back:Qu(_h.images?_h.images.back:_h.back,Yu)};var ip=_h.images?_h.images.depth:_h.depth;ip&&(Zu.images.depth=Qu(ip,Yu));var ap=_h.images?_h.images.luminance:_h.luminance;ap&&(Zu.images.luminance={up:Qu(ap.up,Yu),down:Qu(ap.down,Yu),right:Qu(ap.right,Yu),left:Qu(ap.left,Yu),front:Qu(ap.front,Yu),back:Qu(ap.back,Yu)});var sp=_h.images?_h.images.tiles:_h.tiles;if(sp){for(var Ju=[],_f=function(Dp){var hp=Dp.match(/\/cube_(\d+)\//);if(hp){var vp=Number(hp[1]);if(Ao(vp))return vp}return!1},np=function(Dp,hp){return Dp.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(hp,"/")})},tp=0,rp=sp;tp<rp.length;tp++){var op=rp[tp];if(typeof op=="number"){var lp=op,up=_f(Zu.images.front);if(up===!1)continue;if(($p=Math.max(up,512*Math.pow(2,lp)))>2048){var cp=np(Zu.images.up,$p),Ap=np(Zu.images.down,$p),yp=np(Zu.images.right,$p),Ip=np(Zu.images.left,$p),Ep=np(Zu.images.front,$p),Vp=np(Zu.images.back,$p);Ju.push({level:lp,size:$p,up:cp,down:Ap,right:yp,left:Ip,front:Ep,back:Vp})}else cp=Zu.images.up,Ap=Zu.images.down,yp=Zu.images.right,Ip=Zu.images.left,Ep=Zu.images.front,Vp=Zu.images.back,Ju.push({level:lp,size:$p,up:cp,down:Ap,right:yp,left:Ip,front:Ep,back:Vp})}else{var $p;if(typeof(lp=op.level)!="number"||typeof($p=op.size)!="number")continue;cp=Qu(op.up,Yu),Ap=Qu(op.down,Yu),yp=Qu(op.right,Yu),Ip=Qu(op.left,Yu),Ep=Qu(op.front,Yu),Vp=Qu(op.back,Yu),Ju.push({level:lp,size:$p,up:cp,down:Ap,right:yp,left:Ip,front:Ep,back:Vp})}}Ju.sort(function(Dp,hp){return Dp.level-hp.level}),Zu.images.tiles=Ju}if(_h.position instanceof r$3.Vector3)Zu.position=_h.position.clone();else{if(!Array.isArray(_h.position))break;Zu.position=new r$3.Vector3().fromArray(_h.position)}if(_h.standingPosition instanceof r$3.Vector3)Zu.standingPosition=_h.standingPosition.clone();else if(Array.isArray(_h.standingPosition))Zu.standingPosition=new r$3.Vector3().fromArray(_h.standingPosition);else if(_h.standing_position instanceof r$3.Vector3)Zu.standingPosition=_h.standing_position.clone();else{if(!Array.isArray(_h.standing_position))break;Zu.standingPosition=new r$3.Vector3().fromArray(_h.standing_position)}if(_h.quaternion instanceof r$3.Quaternion)Zu.quaternion=_h.quaternion.clone();else if(Array.isArray(_h.quaternion))Zu.quaternion=new r$3.Quaternion().fromArray(_h.quaternion);else{if(!_h.quaternion)break;var kp=_h.quaternion,Bp=kp.x,fp=kp.y,dp=kp.z,bp=kp.w;Zu.quaternion=new r$3.Quaternion(Bp,fp,dp,bp)}if(Array.isArray(_h.accessibleNodes)?Zu.accessibleNodes=_h.accessibleNodes.slice():Array.isArray(_h.accessible_nodes)&&(Zu.accessibleNodes=_h.accessible_nodes.slice()),Array.isArray(_h.visibleNodes)?Zu.visibleNodes=_h.visibleNodes.slice():Array.isArray(_h.visible_nodes)&&(Zu.visibleNodes=_h.visible_nodes.slice()),fo$1(_h.floorIndex)?Zu.floorIndex=_h.floorIndex:fo$1(_h.floor_index)?Zu.floorIndex=_h.floor_index:Zu.floorIndex=0,_h.video){var gp={};typeof _h.video.source=="string"&&(gp.source=_h.video.source),_h.video.matrix instanceof r$3.Matrix4?gp.matrix=_h.video.matrix.clone():Array.isArray(_h.video.matrix)&&(gp.matrix=new r$3.Matrix4().fromArray(_h.video.matrix)),_h.video.size instanceof r$3.Vector2?gp.size=_h.video.size.clone():Array.isArray(_h.video.size)&&(gp.size=new r$3.Vector2().fromArray(_h.video.size)),gp.source&&gp.matrix&&gp.size&&(Zu.video=gp)}Gu.observers[Yu]=Zu}}if(Uu instanceof Error)return Uu;for(var wp=0,Sp=Gu.observers;wp<Sp.length;wp++){if((Zu=Sp[wp]).accessibleNodes)Zu.accessibleNodes=Zu.accessibleNodes.filter(function(Dp){return Dp<Gu.observers.length});else{Zu.accessibleNodes=[];for(var Cp=0;Cp<Gu.observers.length;Cp++)Gu.observers[Cp]!==Zu&&Zu.accessibleNodes.push(Cp)}if(Zu.visibleNodes)Zu.visibleNodes=Zu.visibleNodes.filter(function(Dp){return Dp<Gu.observers.length});else for(Zu.visibleNodes=[],Cp=0;Cp<Gu.observers.length;Cp++)Gu.observers[Cp]!==Zu&&Zu.visibleNodes.push(Cp)}if(Uu instanceof Error)return Uu;if(_u.initial)if(_u.initial.mode!=="Floorplan"&&_u.initial.mode!=="Topview"&&_u.initial.mode!=="Panorama"&&_u.initial.mode!=="VRPanorama"&&_u.initial.mode!=="Model"&&_u.initial.mode!=="DepthPanorama"||(Gu.initial.mode=_u.initial.mode),fo$1(_u.initial.latitude)&&(Gu.initial.latitude=_u.initial.latitude),fo$1(_u.initial.longitude)?Gu.initial.longitude=_u.initial.longitude:fo$1(_u.initial.heading)&&(Gu.initial.longitude=-(360*(_u.initial.heading-.25)+90)/180*Math.PI),fo$1(_u.initial.fov)&&(Gu.initial.fov=_u.initial.fov),fo$1(_u.initial.panoIndex)){var Lp=Gu.observers.length>0?Gu.observers.length-1:0;Gu.initial.panoIndex=ho$1(_u.initial.panoIndex,0,Lp)}else fo$1(_u.initial.pano_index)?(Lp=Gu.observers.length>0?Gu.observers.length-1:0,Gu.initial.panoIndex=ho$1(_u.initial.pano_index,0,Lp)):fo$1(_u.initial.pano)&&(Lp=Gu.observers.length>0?Gu.observers.length-1:0,Gu.initial.panoIndex=ho$1(_u.initial.pano,0,Lp));if(Uu instanceof Error)return Uu;var zp=He$1(Gu);return wo$1.set(zp,{works:Ou,options:Lu}),zp}function Co$1(_u,$u,Bu){typeof _u=="string"&&_u.trim()[0]==="{"&&(_u=JSON.parse(_u));var Ru=wo$1.get(_u);if(Ru){if($u&&!po$1(JSON.parse(Ru.options),$u))throw new Error("[PARSE FAILED]: work is parsed with different options.");return _u}var Lu=So(_u,$u!=null?$u:{},Bu);if(Lu instanceof Error)throw new Error("[PARSE FAILED]: "+Lu.message);return Lu}function Bo(_u,$u,Bu){return _u+($u-_u)*Bu}function To$1(_u,$u){var Bu=$u[1]-$u[0];return _u<$u[0]?To$1(_u+Bu,$u):_u>=$u[1]?To$1(_u-Bu,$u):_u}function Po$1(_u,$u,Bu,Ru){return Ru?function(Lu,Ou,Fu,Nu){var Vu=Nu[1]-Nu[0];return Lu=To$1(Lu,Nu),Bo((Ou=To$1(Ou,Nu))-Lu>Vu/2?Lu+Vu:Lu-Ou>Vu/2?Lu-Vu:Lu,Ou,Fu)}(_u,$u,Bu,Ru):Bo(_u,$u,Bu)}var Ro$1=function(){function _u($u){for(var Bu in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=_e(),this.startVelocity=0,this.duration=0,this.keyframes=[],$u){var Ru=$u[Bu];typeof Ru=="number"?(this.value[Bu]=Ru,this.config[Bu]={circle:!1}):(this.value[Bu]=Ru.value,this.config[Bu]={circle:Ru.circle})}this.keyframes=[{progress:0,value:t$3.__assign({},this.value)},{progress:1,value:t$3.__assign({},this.value)}]}return _u.prototype.getProgress=function($u){var Bu=$u-this.startTime;return Bu<0?0:Bu>=this.duration?1:1-function(Ru,Lu,Ou,Fu){var Nu=(Lu*Ou+2*Ru)/Math.pow(Ou,3),Vu=-(2*Lu*Ou+3*Ru)/Math.pow(Ou,2),Uu=Lu,Gu=Ru;return Nu*Math.pow(Fu,3)+Vu*Math.pow(Fu,2)+Uu*Fu+Gu}(1,this.startVelocity,this.duration,Bu)},_u.prototype.getValue=function($u){for(var Bu=1;Bu<this.keyframes.length;Bu++)if(this.keyframes[Bu].progress>$u){var Ru=this.keyframes[Bu-1],Lu=this.keyframes[Bu],Ou={};for(var Fu in this.config){var Nu=($u-Ru.progress)/(Lu.progress-Ru.progress);Ou[Fu]=Po$1(Ru.value[Fu],Lu.value[Fu],Nu,this.config[Fu].circle)}return Ou}return t$3.__assign({},this.keyframes[this.keyframes.length-1].value)},_u.prototype.getProgressVelocity=function($u){var Bu=$u-this.startTime;return Bu>=this.duration?0:function(Ru,Lu,Ou,Fu){var Nu=(Lu*Ou+2*Ru)/Math.pow(Ou,3),Vu=-(2*Lu*Ou+3*Ru)/Math.pow(Ou,2),Uu=Lu;return 3*Nu*Math.pow(Fu,2)+2*Vu*Fu+Uu}(1,this.startVelocity,this.duration,Bu)},_u.prototype.update=function($u){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress($u))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},_u.prototype.getKeyFrameSegment=function($u){for(var Bu=this.getProgress($u),Ru=1;Ru<this.keyframes.length;Ru++)if(this.keyframes[Ru].progress>Bu)return[this.keyframes[Ru-1],this.keyframes[Ru]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},_u.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},_u.prototype.set=function($u,Bu,Ru,Lu){var Ou;Ru===void 0&&(Ru=0),isNaN(Bu)&&(Bu=0),isNaN(Ru)&&(Ru=0),Lu=Lu!=null?Lu:_e();var Fu=this.getProgress(Lu),Nu=this.getValue(Fu),Vu={};for(var Uu in this.config)Vu[Uu]=(Ou=$u[Uu])!==null&&Ou!==void 0?Ou:Nu[Uu];var Gu=[{progress:0,value:Nu},{progress:1,value:Vu}];return this.setKeyframes(Gu,Bu,Ru,Lu)},_u.prototype.setKeyframes=function($u,Bu,Ru,Lu){var Ou=this;if(Ru===void 0&&(Ru=0),$u.length<2)throw new Error("keyframes invalid.");return isNaN(Bu)&&(Bu=0),isNaN(Ru)&&(Ru=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Fu,Nu){Lu=Lu!=null?Lu:_e(),Ou.progress=0,Ou.ended=!1,Ou.startTime=Lu,Ou.startVelocity=Ru,Ou.keyframes=$u,Ou.duration=Bu,Bu===0?(Ou.progress=1,Ou.value=t$3.__assign({},$u[$u.length-1].value)):Ou.value=t$3.__assign({},$u[0].value),Ou.callbacks=[Fu,Nu]})},_u.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},_u}(),ko=yt(),Do=new r$3.Texture(ko);ko.onload=function(){return Do.needsUpdate=!0},ko.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var Lo=new r$3.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),Oo=new r$3.MeshBasicMaterial({map:Do,transparent:!0}),No$1=new r$3.SphereBufferGeometry(.12,16,16),Fo$1=new r$3.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function Qo$1(){if(typeof document=="undefined"){var _u=new r$3.Texture;return Object.assign(_u,{draw:function(Gu){},retain:!1,pool:!1})}var $u=document.createElement("canvas"),Bu=512,Ru=256,Lu=190;$u.setAttribute("width",String(Bu)),$u.setAttribute("height",String(Bu));var Ou=new r$3.Texture($u),Fu=$u.getContext("2d");if(!Fu)throw Error("cannot create canvas context");var Nu=Fu.createRadialGradient(Ru,Ru,150,Ru,Ru,0);function Vu(){var Gu=Math.PI/12,zu=2*Math.PI/3;Fu&&(Fu.beginPath(),Fu.arc(Ru,Ru,Lu,0*zu,1*zu-Gu),Fu.stroke(),Fu.beginPath(),Fu.arc(Ru,Ru,Lu,1*zu,2*zu-Gu),Fu.stroke(),Fu.beginPath(),Fu.arc(Ru,Ru,Lu,2*zu,3*zu-Gu),Fu.stroke())}function Uu(Gu){Fu&&(Fu.clearRect(0,0,Bu,Bu),Fu.lineWidth=20,Gu!==-1&&(Fu.globalCompositeOperation="source-over",Fu.strokeStyle="rgba(255, 255, 255, 1)",Vu(),Fu.globalCompositeOperation="source-in",Fu.beginPath(),Fu.arc(Ru,Ru,Lu,0,2*Math.PI*Gu),Fu.strokeStyle="rgba(255, 255, 255, 1)",Fu.stroke(),Fu.globalCompositeOperation="source-over",Fu.strokeStyle="rgba(255, 255, 255, "+(Gu?.5:1)+")",Vu()),Fu.beginPath(),Fu.arc(Ru,Ru,150,0,2*Math.PI),Fu.closePath(),Fu.fillStyle=Nu,Fu.fill(),Fu.fillStyle="rgba(255, 255, 255, 0.01)",Fu.fillRect(0,0,Bu,Bu),Ou.needsUpdate=!0)}return Nu.addColorStop(0,"rgba(255, 255, 255, 1)"),Nu.addColorStop(.15,"rgba(255, 255, 255, 1)"),Nu.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Nu.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Uu(0),Object.assign(Ou,{draw:Uu,retain:!1,pool:!1})}var Vo=[],_o$1=Qo$1();_o$1.draw(0);var Ho$1=Qo$1();Ho$1.draw(1);var qo=Qo$1();qo.draw(-1);var zo=new r$3.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Ko(){return new r$3.Mesh(zo,new r$3.MeshBasicMaterial({map:_o$1,transparent:!0}))}function Uo$1(_u,$u){var Bu=_u.map;$u===0||$u===1?(Bu.pool===!0&&(Bu.retain=!1),$u===0&&(_u.map=_o$1),$u===1&&(_u.map=Ho$1)):(Bu.pool!==!0&&(_u.map=function(){for(var Ru=0,Lu=Vo;Ru<Lu.length;Ru++){var Ou=Lu[Ru];if(Ou.retain===!1)return Ou}var Fu=Qo$1();return Fu.pool=!0,Fu.retain=!0,Vo.push(Fu),Fu}()),_u.map.draw($u))}var jo=function(_u){function $u(){var Bu=_u.call(this)||this;return Bu.loading=!1,Bu.disabled=!1,Bu.current=!1,Bu.progress=0,Bu.opacity=0,Bu.hitTestMesh=new r$3.Mesh(No$1,Fo$1),Bu.add(Bu.hitTestMesh),Bu.centerMesh=Ko(),Bu.centerMesh.position.y+=.01,Bu.add(Bu.centerMesh),Bu.loadingMesh=new r$3.Mesh(Lo,Oo),Bu.loadingMesh.position.y+=.011,Bu.progressMotion=new Ro$1({progress:Bu.progress}),Bu.opacityMotion=new Ro$1({opacity:Bu.opacity}),Bu.needsRender=!0,Bu.renderOrder=-2,Bu}return t$3.__extends($u,_u),$u.prototype.setLoading=function(Bu){var Ru=this;this.loading=Bu,this.stopInterval&&this.stopInterval(),Bu?(this.add(this.loadingMesh),this.stopInterval=at.shared.add(function(){Ru.loadingMesh.rotateOnAxis(new r$3.Vector3(0,1,0),.1),Ru.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},$u.prototype.setDisabled=function(Bu){this.disabled=Bu,function(Ru,Lu){var Ou=Ru.map;Ou.pool===!0&&(Ou.retain=!1),Ru.map=Lu?qo:_o$1}(this.centerMesh.material,Bu),this.needsRender=!0},$u.prototype.setProgress=function(Bu){this.setLoading(!1),this.setDisabled(!1),this.progress=Bu=ho$1(Bu,0,1),Bu!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:Bu},120).catch(Qe$1)},$u.prototype.setOpacity=function(Bu){this.opacity=Bu=ho$1(Bu,0,1),this.current&&(Bu=1),Bu!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:Bu},500).catch(Qe$1)},$u.prototype.setCurrent=function(Bu){this.current!==Bu&&(this.current=Bu,this.setOpacity(this.opacity))},$u.prototype.updateTime=function(Bu,Ru){this.opacityMotion.ended||(this.opacityMotion.update(Bu),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(Bu),Uo$1(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},$u.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},$u}(r$3.Object3D),Go$1=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Wo$1=new Float32Array([0,1,1,1,0,0,1,0]),Xo$1=new Uint8Array([0,2,1,2,3,1]),Yo$1=new r$3.BufferGeometry;Yo$1.setAttribute("position",new r$3.BufferAttribute(Go$1,3)),Yo$1.setAttribute("uv",new r$3.BufferAttribute(Wo$1,2)),Yo$1.setIndex(new r$3.BufferAttribute(Xo$1,1));var Zo,Jo,$o=(Zo=yt(),Jo=new r$3.Texture,Zo.onload=function(){if(typeof document!="undefined"){var _u=256,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Bu=$u.getContext("2d");if(Bu){Bu.drawImage(Zo,0,0,_u,_u),Bu.globalCompositeOperation="source-out";var Ru=128;Bu.beginPath(),Bu.lineWidth=29.952,Bu.arc(Ru,Ru,84.48,0,2*Math.PI),Bu.strokeStyle="rgba(255, 255, 255, 0.5)",Bu.closePath(),Bu.stroke(),Jo.image=$u,Jo.needsUpdate=!0}}},Zo.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Jo),es=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256,Ru=199.68;return $u.beginPath(),$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ts$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256,Ru=138.24,Lu=$u.createLinearGradient(Bu-Math.cos(Math.PI/4)*Ru,Bu-Math.sin(Math.PI/4)*Ru,Bu+Math.cos(Math.PI/4)*Ru,Bu+Math.sin(Math.PI/4)*Ru);return Lu.addColorStop(0,"rgba(255, 255, 255, 1)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Lu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.strokeStyle=Lu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),is$2=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256,Ru=199.68,Lu=$u.createLinearGradient(Bu+Math.cos(Math.PI/4)*Ru,Bu-Math.sin(Math.PI/4)*Ru,Bu-Math.cos(Math.PI/4)*Ru,Bu+Math.sin(Math.PI/4)*Ru);return Lu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.strokeStyle=Lu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ns$1=function(_u,$u){var Bu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Bu,Bu,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},rs$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ns$1($u,2*Math.PI);var Bu=new r$3.CanvasTexture(_u);return Object.assign(Bu,{setProgress:function(Ru){$u&&(ns$1($u,Ru),Bu.needsUpdate=!0)}})}return null},os$1=[],ss$1=rs$1(),as$1=function(_u){function $u(){var Bu=_u.call(this)||this;Bu.progress=0,Bu.opacity=0,Bu.loading=!1,Bu.current=!1,Bu.disabled=!1,Bu.ringRotateMotion=new Ro$1({angle:0}),Bu.tapMotion=new Ro$1({scale:1,opacity:1}),Bu.progressMotion=new Ro$1({progress:0}),Bu.progressOpacityMotion=new Ro$1({opacity:0}),Bu.opacityMotion=new Ro$1({opacity:0});var Ru={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Bu.centerMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:ts$1,opacity:0}))),Bu.ringMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:is$2,opacity:0}))),Bu.loadingMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:$o,opacity:.5}))),Bu.disableMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:es,opacity:0}))),Bu.progressMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:ss$1,opacity:0}))),Bu.loadingMesh.visible=!1,Bu.disableMesh.visible=!1,Bu.ringMesh.position.y=.003,Bu.disableMesh.position.y=.002,Bu.centerMesh.position.y=.002,Bu.loadingMesh.position.y=.005,Bu.progressMesh.position.y=.004,Bu.centerMesh.frustumCulled=!1,Bu.ringMesh.frustumCulled=!1,Bu.progressMesh.frustumCulled=!1,Bu.loadingMesh.frustumCulled=!1,Bu.disableMesh.frustumCulled=!1,Bu.renderOrder=-2,Bu.add(Bu.centerMesh),Bu.add(Bu.ringMesh),Bu.add(Bu.progressMesh),Bu.add(Bu.loadingMesh),Bu.add(Bu.disableMesh),Bu.needsRender=!0,Bu}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Bu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Bu&&(Bu=ho$1(Bu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Bu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho$1(1.2*Bu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho$1(1.2*Bu,0,1)},100).catch(Qe$1)),this.progress=Bu)},$u.prototype.setOpacity=function(Bu){this.opacity!==Bu&&(this.opacity=Bu=ho$1(Bu,0,1),this.opacityMotion.set({opacity:Bu},500).catch(Qe$1))},$u.prototype.setCurrent=function(Bu){if(this.current!==Bu){if(Bu===!0&&this.ringRotateMotion.ended){var Ru=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Ru,5e3).catch(Qe$1)}this.current=Bu}},$u.prototype.setLoading=function(Bu){this.loading!==Bu&&(this.loading=Bu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Bu,this.needsRender=!0)},$u.prototype.setDisabled=function(Bu){this.disabled!==Bu&&(this.disabled=Bu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Bu,this.ringMesh.visible=!Bu,this.centerMesh.visible=!Bu,this.needsRender=!0)},$u.prototype.tap=function(){var Bu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Bu.progressOpacityMotion.set({opacity:Bu.progress>0?1:0},300).catch(Qe$1),Bu.progressMotion.set({progress:Bu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Bu,Ru){var Lu=ho$1(Math.max(Bu,Ru)/1e3,1,1.8);this.scale.set(Lu,0,Lu)},$u.prototype.updateTime=function(Bu,Ru){var Lu;if(!this.progressMotion.ended){this.progressMotion.update(Bu);var Ou=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ou===0)this.progressMesh.material.map!==ss$1&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=ss$1);else if(Ou===1)this.progressMesh.material.map!==ss$1&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=ss$1);else{if(this.progressMesh.material.map===ss$1){var Fu=os$1.pop()||rs$1();this.progressMesh.material.map=Fu}(Lu=this.progressMesh.material.map)===null||Lu===void 0||Lu.setProgress(Ou)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Bu);var Nu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Nu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Bu),Nu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Nu,this.ringMesh.material.opacity=Nu,this.disableMesh.material.opacity=Nu,this.loadingMesh.material.opacity=Nu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ru/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Bu);var Vu=this.tapMotion.value.scale;this.centerMesh.scale.set(Vu,Vu,Vu),this.ringMesh.scale.set(Vu,Vu,Vu),this.progressMesh.scale.set(Vu,Vu,Vu),Nu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Nu,this.ringMesh.material.opacity=Nu,this.disableMesh.material.opacity=Nu,this.loadingMesh.material.opacity=Nu,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Bu),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ss$1&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$3.Object3D),ls=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),us$1=new Float32Array([0,1,1,1,0,0,1,0]),hs$1=new Uint8Array([0,2,1,2,3,1]),cs=new r$3.BufferGeometry;cs.setAttribute("position",new r$3.BufferAttribute(ls,3)),cs.setAttribute("uv",new r$3.BufferAttribute(us$1,2)),cs.setIndex(new r$3.BufferAttribute(hs$1,1));var ds=function(){var _u=yt(),$u=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Bu=256,Ru=document.createElement("canvas");Ru.setAttribute("width",String(Bu)),Ru.setAttribute("height",String(Bu));var Lu=Ru.getContext("2d");if(Lu){Lu.drawImage(_u,0,0,Bu,Bu),Lu.globalCompositeOperation="source-out";var Ou=128;Lu.beginPath(),Lu.lineWidth=29.952,Lu.arc(Ou,Ou,84.48,0,2*Math.PI),Lu.strokeStyle="rgba(255, 255, 255, 0.5)",Lu.closePath(),Lu.stroke(),$u.image=Ru,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),ps$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256,Ru=199.68;return $u.beginPath(),$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),fs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u)return $u.beginPath(),$u.arc(256,256,199.68,0,2*Math.PI),$u.fillStyle="rgba(0, 0, 0, 0.2)",$u.closePath(),$u.fill(),new r$3.CanvasTexture(_u)}return null}(),As=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256,Ru=138.24,Lu=$u.createLinearGradient(Bu-Math.cos(Math.PI/4)*Ru,Bu-Math.sin(Math.PI/4)*Ru,Bu+Math.cos(Math.PI/4)*Ru,Bu+Math.sin(Math.PI/4)*Ru);return Lu.addColorStop(0,"rgba(255, 255, 255, 1)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Lu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.strokeStyle=Lu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),gs$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256,Ru=199.68,Lu=$u.createLinearGradient(Bu+Math.cos(Math.PI/4)*Ru,Bu-Math.sin(Math.PI/4)*Ru,Bu-Math.cos(Math.PI/4)*Ru,Bu+Math.sin(Math.PI/4)*Ru);return Lu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.strokeStyle=Lu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ms$1=function(_u,$u){var Bu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Bu,Bu,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},vs$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ms$1($u,2*Math.PI);var Bu=new r$3.CanvasTexture(_u);return Object.assign(Bu,{setProgress:function(Ru){$u&&(ms$1($u,Ru),Bu.needsUpdate=!0)}})}return null},ys=[],bs$1=vs$1(),xs=function(_u){function $u(){var Bu=_u.call(this)||this;Bu.progress=0,Bu.opacity=0,Bu.loading=!1,Bu.current=!1,Bu.disabled=!1,Bu.ringRotateMotion=new Ro$1({angle:0}),Bu.tapMotion=new Ro$1({scale:1,opacity:1}),Bu.progressMotion=new Ro$1({progress:0}),Bu.progressOpacityMotion=new Ro$1({opacity:0}),Bu.opacityMotion=new Ro$1({opacity:0});var Ru={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Bu.backgroundMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:fs,opacity:1}))),Bu.centerMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:As,opacity:0}))),Bu.ringMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:gs$1,opacity:0}))),Bu.loadingMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:ds,opacity:.5}))),Bu.disableMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:ps$1,opacity:0}))),Bu.progressMesh=new r$3.Mesh(cs,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:bs$1,opacity:0}))),Bu.loadingMesh.visible=!1,Bu.disableMesh.visible=!1,Bu.backgroundMesh.position.y=.0018,Bu.ringMesh.position.y=.003,Bu.disableMesh.position.y=.002,Bu.centerMesh.position.y=.002,Bu.loadingMesh.position.y=.005,Bu.progressMesh.position.y=.004,Bu.centerMesh.frustumCulled=!1,Bu.ringMesh.frustumCulled=!1,Bu.progressMesh.frustumCulled=!1,Bu.loadingMesh.frustumCulled=!1,Bu.disableMesh.frustumCulled=!1,Bu.renderOrder=-2,Bu.add(Bu.backgroundMesh),Bu.add(Bu.centerMesh),Bu.add(Bu.ringMesh),Bu.add(Bu.progressMesh),Bu.add(Bu.loadingMesh),Bu.add(Bu.disableMesh),Bu.needsRender=!0,Bu}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Bu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Bu&&(Bu=ho$1(Bu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Bu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho$1(1.2*Bu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho$1(1.2*Bu,0,1)},100).catch(Qe$1)),this.progress=Bu)},$u.prototype.setOpacity=function(Bu){this.opacity!==Bu&&(this.opacity=Bu=ho$1(Bu,0,1),this.opacityMotion.set({opacity:Bu},500).catch(Qe$1))},$u.prototype.setCurrent=function(Bu){if(this.current!==Bu){if(Bu===!0&&this.ringRotateMotion.ended){var Ru=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Ru,5e3).catch(Qe$1)}this.current=Bu}},$u.prototype.setLoading=function(Bu){this.loading!==Bu&&(this.loading=Bu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Bu,this.needsRender=!0)},$u.prototype.setDisabled=function(Bu){this.disabled!==Bu&&(this.disabled=Bu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Bu,this.ringMesh.visible=!Bu,this.centerMesh.visible=!Bu,this.needsRender=!0)},$u.prototype.tap=function(){var Bu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Bu.progressOpacityMotion.set({opacity:Bu.progress>0?1:0},300).catch(Qe$1),Bu.progressMotion.set({progress:Bu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Bu,Ru){var Lu=ho$1(Math.max(Bu,Ru)/1e3,1,1.8);this.scale.set(Lu,0,Lu)},$u.prototype.updateTime=function(Bu,Ru){var Lu;if(!this.progressMotion.ended){this.progressMotion.update(Bu);var Ou=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ou===0)this.progressMesh.material.map!==bs$1&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs$1);else if(Ou===1)this.progressMesh.material.map!==bs$1&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs$1);else{if(this.progressMesh.material.map===bs$1){var Fu=ys.pop()||vs$1();this.progressMesh.material.map=Fu}(Lu=this.progressMesh.material.map)===null||Lu===void 0||Lu.setProgress(Ou)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Bu);var Nu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Nu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Bu),Nu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.backgroundMesh.material.opacity=Nu,this.centerMesh.material.opacity=Nu,this.ringMesh.material.opacity=Nu,this.disableMesh.material.opacity=Nu,this.loadingMesh.material.opacity=Nu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ru/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Bu);var Vu=this.tapMotion.value.scale;this.backgroundMesh.scale.set(Vu,Vu,Vu),this.centerMesh.scale.set(Vu,Vu,Vu),this.ringMesh.scale.set(Vu,Vu,Vu),this.progressMesh.scale.set(Vu,Vu,Vu),Nu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Nu,this.ringMesh.material.opacity=Nu,this.disableMesh.material.opacity=Nu,this.loadingMesh.material.opacity=Nu,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Bu),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==bs$1&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$3.Object3D),ws=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Es=new Float32Array([0,1,1,1,0,0,1,0]),Ms=new Uint8Array([0,2,1,2,3,1]),Is=new r$3.BufferGeometry;Is.setAttribute("position",new r$3.BufferAttribute(ws,3)),Is.setAttribute("uv",new r$3.BufferAttribute(Es,2)),Is.setIndex(new r$3.BufferAttribute(Ms,1));var Ss=function(){var _u=yt(),$u=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Bu=256,Ru=document.createElement("canvas");Ru.setAttribute("width",String(Bu)),Ru.setAttribute("height",String(Bu));var Lu=Ru.getContext("2d");if(Lu){Lu.drawImage(_u,0,0,Bu,Bu),Lu.globalCompositeOperation="source-out";var Ou=128;Lu.beginPath(),Lu.lineWidth=29.44,Lu.arc(Ou,Ou,55.04,0,2*Math.PI),Lu.strokeStyle="rgba(255, 255, 255, 0.7)",Lu.closePath(),Lu.stroke(),$u.image=Ru,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256,Ru=199.68;return $u.beginPath(),$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Bu,Bu,Ru,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Bs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");if($u){var Bu=128;return $u.beginPath(),$u.lineWidth=29.44,$u.arc(Bu,Bu,84.48,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 1)",$u.shadowBlur=19.2,$u.shadowColor="rgba(200, 200, 200, 0.2)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Ts=function(_u,$u){var Bu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Bu,Bu,57.6,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.6)",_u.stroke()},Ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&Ts($u,2*Math.PI);var Bu=new r$3.CanvasTexture(_u);return Object.assign(Bu,{setProgress:function(Ru){$u&&(Ts($u,Ru),Bu.needsUpdate=!0)}})}return null},Rs=[],ks=Ps(),Ds=function(_u){function $u(){var Bu=_u.call(this)||this;Bu.progress=0,Bu.opacity=0,Bu.loading=!1,Bu.current=!1,Bu.disabled=!1,Bu.tapMotion=new Ro$1({scale:1,opacity:1}),Bu.progressMotion=new Ro$1({progress:0}),Bu.progressOpacityMotion=new Ro$1({opacity:0}),Bu.opacityMotion=new Ro$1({opacity:0});var Ru={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Bu.centerMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Bs,opacity:0}))),Bu.loadingMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Ss,opacity:.5}))),Bu.disableMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Cs,opacity:0}))),Bu.progressMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:ks,opacity:0}))),Bu.loadingMesh.visible=!1,Bu.disableMesh.visible=!1,Bu.disableMesh.position.y=.002,Bu.centerMesh.position.y=.002,Bu.loadingMesh.position.y=.005,Bu.progressMesh.position.y=.004,Bu.centerMesh.frustumCulled=!1,Bu.progressMesh.frustumCulled=!1,Bu.loadingMesh.frustumCulled=!1,Bu.disableMesh.frustumCulled=!1,Bu.renderOrder=-2,Bu.add(Bu.centerMesh),Bu.add(Bu.progressMesh),Bu.add(Bu.loadingMesh),Bu.add(Bu.disableMesh),Bu.needsRender=!0,Bu}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Bu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Bu&&(Bu=ho$1(Bu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Bu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho$1(1.2*Bu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho$1(1.2*Bu,0,1)},100).catch(Qe$1)),this.progress=Bu)},$u.prototype.setOpacity=function(Bu){Bu>0&&(Bu=1),this.opacity!==Bu&&(this.opacity=Bu=ho$1(Bu,0,1),this.opacityMotion.set({opacity:Bu},500).catch(Qe$1))},$u.prototype.setCurrent=function(Bu){this.current!==Bu&&(this.current=Bu)},$u.prototype.setLoading=function(Bu){this.loading!==Bu&&(this.loading=Bu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Bu,this.needsRender=!0)},$u.prototype.setDisabled=function(Bu){this.disabled!==Bu&&(this.disabled=Bu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Bu,this.centerMesh.visible=!Bu,this.needsRender=!0)},$u.prototype.tap=function(){var Bu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Bu.progressOpacityMotion.set({opacity:Bu.progress>0?1:0},300).catch(Qe$1),Bu.progressMotion.set({progress:Bu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Bu,Ru){var Lu=ho$1(Math.max(Bu,Ru)/1e3,1.2,1.8);this.scale.set(Lu,0,Lu)},$u.prototype.updateTime=function(Bu,Ru){var Lu;if(!this.progressMotion.ended){this.progressMotion.update(Bu);var Ou=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ou===0)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else if(Ou===1)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else{if(this.progressMesh.material.map===ks){var Fu=Rs.pop()||Ps();this.progressMesh.material.map=Fu}(Lu=this.progressMesh.material.map)===null||Lu===void 0||Lu.setProgress(Ou)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Bu);var Nu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Nu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Bu),Nu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Nu,this.disableMesh.material.opacity=Nu,this.loadingMesh.material.opacity=Nu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ru/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Bu);var Vu=this.tapMotion.value.scale;this.centerMesh.scale.set(Vu,Vu,Vu),this.progressMesh.scale.set(Vu,Vu,Vu),Nu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Nu,this.disableMesh.material.opacity=Nu,this.loadingMesh.material.opacity=Nu,this.needsRender=!0}},$u.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$3.Object3D),Ls$1=new r$3.CircleBufferGeometry(.1,16),Os=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Bu=$u.getContext("2d");if(Bu){var Ru=256,Lu=192,Ou=76.8;Bu.lineWidth=Ou,Bu.arc(Ru,Ru,Lu,0,2*Math.PI),Bu.strokeStyle="rgba(147, 162, 255, 0.3)",Bu.shadowBlur=12.8,Bu.shadowColor="rgba(255, 255, 255, 0.6)",Bu.stroke(),Bu.lineWidth=Ou,Bu.arc(Ru,Ru,Lu,0,2*Math.PI);var Fu=Bu.createRadialGradient(Ru,Ru,153.6,Ru,Ru,230.4);Fu.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Fu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(1,"rgba(255, 255, 255, 0.3)"),Bu.strokeStyle=Fu,Bu.stroke(),Bu.beginPath(),Bu.lineWidth=4.8,Bu.arc(Ru,Ru,228,0,2*Math.PI);var Nu=Bu.createLinearGradient(0,0,_u,0);return Nu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Nu.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Bu.strokeStyle=Nu,Bu.stroke(),new r$3.CanvasTexture($u)}}return null}(),Ns$1=new r$3.MeshBasicMaterial({map:Os,transparent:!0}),Fs$1=function(_u){function $u(){var Bu=_u.call(this)||this;return Bu.ringMesh=new r$3.Mesh(Ls$1,Ns$1),Bu.ringMesh.renderOrder=-3,Bu.add(Bu.ringMesh),Bu}return t$3.__extends($u,_u),$u.prototype.dispose=function(){this.remove(this.ringMesh)},$u}(r$3.Object3D);function Qs$1(_u,$u,Bu){var Ru=Math.abs(_u-$u);return Ru<.001||Bu!==void 0&&Math.abs(Bu-Ru)<.001}function Vs(_u,$u,Bu){return!Qs$1(_u,$u,Bu)}function _s$1(_u,$u){return _u.distanceTo($u)<.001}function Hs$1(_u,$u){return!_s$1(_u,$u)}var qs=new r$3.Vector3(0,0,0),zs=function(_u){function $u(Bu,Ru){Ru===void 0&&(Ru=qs);var Lu=_u.call(this)||this,Ou=new r$3.BoxBufferGeometry(Bu.max.x-Bu.min.x+2*Ru.x,Bu.max.y-Bu.min.y+2*Ru.y,Bu.max.z-Bu.min.z+2*Ru.z,1,1);Ou.groups.length=0,Ou.groups.push({start:0,count:36,materialIndex:0}),Ou.applyMatrix4(new r$3.Matrix4().makeScale(-1,1,1)),Ou.computeVertexNormals();var Fu=new Mt;Fu.defines.USE_MAP=!1,Fu.defines.USE_UV=!1,Fu.uniforms.diffuse.value=new r$3.Color(16777215);var Nu=new ft(Ou,[Fu]);return Nu.floorIndex=-1,Nu.position.copy(Bu.getCenter(new r$3.Vector3)),Nu.frustumCulled=!1,Lu.renderOrder=-3,Lu.add(Nu),Lu.boundingBox=new r$3.Box3,Lu.computeBoundingBox(),Lu}return t$3.__extends($u,_u),$u.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},$u.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},$u}(gt$1);function Ks$1(_u,$u){return $u===void 0&&($u=qs),new zs(_u,$u)}function Us(_u){var $u=_u.getError();if($u===_u.NO_ERROR)return null;switch($u){case _u.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case _u.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case _u.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case _u.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case _u.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case _u.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}var js=2*Math.PI;function Gs$1(_u){return _u>=0&&_u<js?_u:(_u%js+js)%js}var Ws$1=Math.PI,Xs$1=2*Ws$1;function Ys(_u,$u,Bu){if(_u===$u)return $u;var Ru=$u-_u;return Math.abs(Ru)<=Bu?$u:_u+(Ru>0?1:-1)*Bu}(function(){try{var _u=document.createElement("canvas");!window.WebGLRenderingContext||!_u.getContext("webgl")&&_u.getContext("experimental-webgl")}catch{return!1}})();var Zs=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(_u)||/webos/i.test(_u)||/ipad|iphone|ipod/i.test(_u)||/iemobile/i.test(_u)||/opera mini/i.test(_u)||/blackberry/i.test(_u)||/windows phone/i.test(_u)};function Js(_u,$u){_u.mode=$u.mode,_u.panoIndex=$u.panoIndex,_u.longitude=$u.longitude,_u.latitude=$u.latitude,_u.fov=$u.fov,_u.offset.copy($u.offset)}function $s$1(_u,$u){return _u.panoIndex===$u.panoIndex&&_u.mode===$u.mode&&Qs$1(_u.longitude,$u.longitude,2*Math.PI)&&Qs$1(_u.latitude,$u.latitude)&&Qs$1(_u.fov,$u.fov)&&_s$1(_u.offset,$u.offset)}var ea$1=function(_u){return Number(_u)};function ta(_u,$u,Bu){var Ru;$u===void 0&&($u=ea$1),Bu===void 0&&(Bu=!1);for(var Lu,Ou=1/0,Fu=0,Nu=_u;Fu<Nu.length;Fu++){var Vu=Nu[Fu],Uu=$u(Vu);Uu<=Ou&&(Lu=(Ru=[Vu,Uu])[0],Ou=Ru[1])}return Bu?[Lu,Ou]:Lu}function ia$1(_u){for(var $u in _u)return!1;return!0}function na(_u){return{longitude:_u.longitude,latitude:_u.latitude,fov:_u.fov,offset:_u.offset.clone(),distance:_u.distance}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var ra=function(_u,$u,Bu,Ru){var Lu,Ou=["","webkit","Moz","MS","ms","o"],Fu=$u.createElement?$u.createElement("div"):Ru,Nu=Math.round,Vu=Math.abs,Uu=Date.now;function Gu(pp,Mp,Tp){return setTimeout(Wu(pp,Tp),Mp)}function zu(pp,Mp,Tp){return!!Array.isArray(pp)&&(Hu(pp,Tp[Mp],Tp),!0)}function Hu(pp,Mp,Tp){var Up;if(pp)if(pp.forEach)pp.forEach(Mp,Tp);else if(pp.length!==Ru)for(Up=0;Up<pp.length;)Mp.call(Tp,pp[Up],Up,pp),Up++;else for(Up in pp)pp.hasOwnProperty(Up)&&Mp.call(Tp,pp[Up],Up,pp)}function ju(pp,Mp,Tp){var Up="DEPRECATED METHOD: "+Mp+`
`+Tp+` AT 
`;return function(){var Kp=new Error("get-stack-trace"),fm=Kp&&Kp.stack?Kp.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",mm=_u.console&&(_u.console.warn||_u.console.log);return mm&&mm.call(_u.console,Up,fm),pp.apply(this,arguments)}}Lu=typeof Object.assign!="function"?function(pp){if(pp===Ru||pp===null)throw new TypeError("Cannot convert undefined or null to object");for(var Mp=Object(pp),Tp=1;Tp<arguments.length;Tp++){var Up=arguments[Tp];if(Up!==Ru&&Up!==null)for(var Kp in Up)Up.hasOwnProperty(Kp)&&(Mp[Kp]=Up[Kp])}return Mp}:Object.assign;var Qu=ju(function(pp,Mp,Tp){for(var Up=Object.keys(Mp),Kp=0;Kp<Up.length;)(!Tp||Tp&&pp[Up[Kp]]===Ru)&&(pp[Up[Kp]]=Mp[Up[Kp]]),Kp++;return pp},"extend","Use `assign`."),Xu=ju(function(pp,Mp){return Qu(pp,Mp,!0)},"merge","Use `assign`.");function Ku(pp,Mp,Tp){var Up,Kp=Mp.prototype;(Up=pp.prototype=Object.create(Kp)).constructor=pp,Up._super=Kp,Tp&&Lu(Up,Tp)}function Wu(pp,Mp){return function(){return pp.apply(Mp,arguments)}}function qu(pp,Mp){return typeof pp=="function"?pp.apply(Mp&&Mp[0]||Ru,Mp):pp}function Yu(pp,Mp){return pp===Ru?Mp:pp}function Zu(pp,Mp,Tp){Hu(ap(Mp),function(Up){pp.addEventListener(Up,Tp,!1)})}function _h(pp,Mp,Tp){Hu(ap(Mp),function(Up){pp.removeEventListener(Up,Tp,!1)})}function ep(pp,Mp){for(;pp;){if(pp==Mp)return!0;pp=pp.parentNode}return!1}function ip(pp,Mp){return pp.indexOf(Mp)>-1}function ap(pp){return pp.trim().split(/\s+/g)}function sp(pp,Mp,Tp){if(pp.indexOf&&!Tp)return pp.indexOf(Mp);for(var Up=0;Up<pp.length;){if(Tp&&pp[Up][Tp]==Mp||!Tp&&pp[Up]===Mp)return Up;Up++}return-1}function Ju(pp){return Array.prototype.slice.call(pp,0)}function _f(pp,Mp,Tp){for(var Up=[],Kp=[],fm=0;fm<pp.length;){var mm=Mp?pp[fm][Mp]:pp[fm];sp(Kp,mm)<0&&Up.push(pp[fm]),Kp[fm]=mm,fm++}return Tp&&(Up=Mp?Up.sort(function(Bm,hm){return Bm[Mp]>hm[Mp]}):Up.sort()),Up}function np(pp,Mp){for(var Tp,Up,Kp=Mp[0].toUpperCase()+Mp.slice(1),fm=0;fm<Ou.length;){if((Up=(Tp=Ou[fm])?Tp+Kp:Mp)in pp)return Up;fm++}return Ru}var tp=1;function rp(pp){var Mp=pp.ownerDocument||pp;return Mp.defaultView||Mp.parentWindow||_u}var op="ontouchstart"in _u,lp=np(_u,"PointerEvent")!==Ru,up=op&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),cp="touch",Ap="mouse",yp=24,Ip=["x","y"],Ep=["clientX","clientY"];function Vp(pp,Mp){var Tp=this;this.manager=pp,this.callback=Mp,this.element=pp.element,this.target=pp.options.inputTarget,this.domHandler=function(Up){qu(pp.options.enable,[pp])&&Tp.handler(Up)},this.init()}function $p(pp,Mp,Tp){var Up=Tp.pointers.length,Kp=Tp.changedPointers.length,fm=1&Mp&&Up-Kp==0,mm=12&Mp&&Up-Kp==0;Tp.isFirst=!!fm,Tp.isFinal=!!mm,fm&&(pp.session={}),Tp.eventType=Mp,function(Bm,hm){var Lm=Bm.session,Um=hm.pointers,vy=Um.length;Lm.firstInput||(Lm.firstInput=kp(hm)),vy>1&&!Lm.firstMultiple?Lm.firstMultiple=kp(hm):vy===1&&(Lm.firstMultiple=!1);var yy=Lm.firstInput,Qm=Lm.firstMultiple,Gm=Qm?Qm.center:yy.center,Jm=hm.center=Bp(Um);hm.timeStamp=Uu(),hm.deltaTime=hm.timeStamp-yy.timeStamp,hm.angle=gp(Gm,Jm),hm.distance=bp(Gm,Jm),function(Fm,$m){var Nm=$m.center,Km=Fm.offsetDelta||{},Xm=Fm.prevDelta||{},Wm=Fm.prevInput||{};$m.eventType!==1&&Wm.eventType!==4||(Xm=Fm.prevDelta={x:Wm.deltaX||0,y:Wm.deltaY||0},Km=Fm.offsetDelta={x:Nm.x,y:Nm.y}),$m.deltaX=Xm.x+(Nm.x-Km.x),$m.deltaY=Xm.y+(Nm.y-Km.y)}(Lm,hm),hm.offsetDirection=dp(hm.deltaX,hm.deltaY);var zm=fp(hm.deltaTime,hm.deltaX,hm.deltaY);hm.overallVelocityX=zm.x,hm.overallVelocityY=zm.y,hm.overallVelocity=Vu(zm.x)>Vu(zm.y)?zm.x:zm.y,hm.scale=Qm?function(Fm,$m){return bp($m[0],$m[1],Ep)/bp(Fm[0],Fm[1],Ep)}(Qm.pointers,Um):1,hm.rotation=Qm?function(Fm,$m){return gp($m[1],$m[0],Ep)+gp(Fm[1],Fm[0],Ep)}(Qm.pointers,Um):0,hm.maxPointers=Lm.prevInput?hm.pointers.length>Lm.prevInput.maxPointers?hm.pointers.length:Lm.prevInput.maxPointers:hm.pointers.length,function(Fm,$m){var Nm,Km,Xm,Wm,km=Fm.lastInterval||$m,gy=$m.timeStamp-km.timeStamp;if($m.eventType!=8&&(gy>25||km.velocity===Ru)){var Ay=$m.deltaX-km.deltaX,by=$m.deltaY-km.deltaY,Ym=fp(gy,Ay,by);Km=Ym.x,Xm=Ym.y,Nm=Vu(Ym.x)>Vu(Ym.y)?Ym.x:Ym.y,Wm=dp(Ay,by),Fm.lastInterval=$m}else Nm=km.velocity,Km=km.velocityX,Xm=km.velocityY,Wm=km.direction;$m.velocity=Nm,$m.velocityX=Km,$m.velocityY=Xm,$m.direction=Wm}(Lm,hm);var Hm=Bm.element;ep(hm.srcEvent.target,Hm)&&(Hm=hm.srcEvent.target),hm.target=Hm}(pp,Tp),pp.emit("hammer.input",Tp),pp.recognize(Tp),pp.session.prevInput=Tp}function kp(pp){for(var Mp=[],Tp=0;Tp<pp.pointers.length;)Mp[Tp]={clientX:Nu(pp.pointers[Tp].clientX),clientY:Nu(pp.pointers[Tp].clientY)},Tp++;return{timeStamp:Uu(),pointers:Mp,center:Bp(Mp),deltaX:pp.deltaX,deltaY:pp.deltaY}}function Bp(pp){var Mp=pp.length;if(Mp===1)return{x:Nu(pp[0].clientX),y:Nu(pp[0].clientY)};for(var Tp=0,Up=0,Kp=0;Kp<Mp;)Tp+=pp[Kp].clientX,Up+=pp[Kp].clientY,Kp++;return{x:Nu(Tp/Mp),y:Nu(Up/Mp)}}function fp(pp,Mp,Tp){return{x:Mp/pp||0,y:Tp/pp||0}}function dp(pp,Mp){return pp===Mp?1:Vu(pp)>=Vu(Mp)?pp<0?2:4:Mp<0?8:16}function bp(pp,Mp,Tp){Tp||(Tp=Ip);var Up=Mp[Tp[0]]-pp[Tp[0]],Kp=Mp[Tp[1]]-pp[Tp[1]];return Math.sqrt(Up*Up+Kp*Kp)}function gp(pp,Mp,Tp){Tp||(Tp=Ip);var Up=Mp[Tp[0]]-pp[Tp[0]],Kp=Mp[Tp[1]]-pp[Tp[1]];return 180*Math.atan2(Kp,Up)/Math.PI}Vp.prototype={handler:function(){},init:function(){this.evEl&&Zu(this.element,this.evEl,this.domHandler),this.evTarget&&Zu(this.target,this.evTarget,this.domHandler),this.evWin&&Zu(rp(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_h(this.element,this.evEl,this.domHandler),this.evTarget&&_h(this.target,this.evTarget,this.domHandler),this.evWin&&_h(rp(this.element),this.evWin,this.domHandler)}};var wp={mousedown:1,mousemove:2,mouseup:4},Sp="mousedown",Cp="mousemove mouseup";function Lp(){this.evEl=Sp,this.evWin=Cp,this.pressed=!1,Vp.apply(this,arguments)}Ku(Lp,Vp,{handler:function(pp){var Mp=wp[pp.type];1&Mp&&(pp.button===0||pp.button===2)&&(this.pressed=!0),2&Mp&&pp.which!==1&&(Mp=4),this.pressed&&(4&Mp&&(this.pressed=!1),this.callback(this.manager,Mp,{pointers:[pp],changedPointers:[pp],pointerType:Ap,srcEvent:pp}))}});var zp={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Dp={2:cp,3:"pen",4:Ap,5:"kinect"},hp="pointerdown",vp="pointermove pointerup pointercancel";function Np(){this.evEl=hp,this.evWin=vp,Vp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_u.MSPointerEvent&&!_u.PointerEvent&&(hp="MSPointerDown",vp="MSPointerMove MSPointerUp MSPointerCancel"),Ku(Np,Vp,{handler:function(pp){var Mp=this.store,Tp=!1,Up=!1,Kp=pp.type.toLowerCase().replace("ms",""),fm=zp[Kp],mm=Dp[pp.pointerType]||pp.pointerType,Bm=mm==cp,hm=sp(Mp,pp.pointerId,"pointerId");1&fm&&(pp.button===0||pp.button===2||Bm)?hm<0&&(Mp.push(pp),hm=Mp.length-1):12&fm?Tp=!0:Bm||pp.buttons!==0||(Tp=!0,Up=!0,fm=zp.pointerup),hm<0||(Up||(Mp[hm]=pp),this.callback(this.manager,fm,{pointers:Mp,changedPointers:[pp],pointerType:mm,srcEvent:Mp[hm]}),Tp&&Mp.splice(hm,1))}});var Fp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},qp="touchstart",jp="touchstart touchmove touchend touchcancel";function Xp(){this.evTarget=qp,this.evWin=jp,this.started=!1,Vp.apply(this,arguments)}function rm(pp,Mp){var Tp=Ju(pp.touches),Up=Ju(pp.changedTouches);return 12&Mp&&(Tp=_f(Tp.concat(Up),"identifier",!0)),[Tp,Up]}Ku(Xp,Vp,{handler:function(pp){var Mp=Fp[pp.type];if(Mp===1&&(this.started=!0),this.started){var Tp=rm.call(this,pp,Mp);12&Mp&&Tp[0].length-Tp[1].length==0&&(this.started=!1),this.callback(this.manager,Mp,{pointers:Tp[0],changedPointers:Tp[1],pointerType:cp,srcEvent:pp})}}});var em={touchstart:1,touchmove:2,touchend:4,touchcancel:8},lm="touchstart touchmove touchend touchcancel";function Zp(){this.evTarget=lm,this.targetIds={},Vp.apply(this,arguments)}function im(pp,Mp){var Tp=Ju(pp.touches),Up=this.targetIds;if(3&Mp&&Tp.length===1)return Up[Tp[0].identifier]=!0,[Tp,Tp];var Kp,fm,mm=Ju(pp.changedTouches),Bm=[],hm=this.target;if(fm=Tp.filter(function(Lm){return ep(Lm.target,hm)}),Mp===1)for(Kp=0;Kp<fm.length;)Up[fm[Kp].identifier]=!0,Kp++;for(Kp=0;Kp<mm.length;)Up[mm[Kp].identifier]&&Bm.push(mm[Kp]),12&Mp&&delete Up[mm[Kp].identifier],Kp++;return Bm.length?[_f(fm.concat(Bm),"identifier",!0),Bm]:void 0}Ku(Zp,Vp,{handler:function(pp){var Mp=em[pp.type],Tp=im.call(this,pp,Mp);Tp&&this.callback(this.manager,Mp,{pointers:Tp[0],changedPointers:Tp[1],pointerType:cp,srcEvent:pp})}});function Jp(){Vp.apply(this,arguments);var pp=Wu(this.handler,this);this.touch=new Zp(this.manager,pp),this.mouse=new Lp(this.manager,pp),this.primaryTouch=null,this.lastTouches=[]}function am(pp,Mp){1&pp?(this.primaryTouch=Mp.changedPointers[0].identifier,Pp.call(this,Mp)):12&pp&&Pp.call(this,Mp)}function Pp(pp){var Mp=pp.changedPointers[0];if(Mp.identifier===this.primaryTouch){var Tp={x:Mp.clientX,y:Mp.clientY};this.lastTouches.push(Tp);var Up=this.lastTouches;setTimeout(function(){var Kp=Up.indexOf(Tp);Kp>-1&&Up.splice(Kp,1)},2500)}}function tm(pp){for(var Mp=pp.srcEvent.clientX,Tp=pp.srcEvent.clientY,Up=0;Up<this.lastTouches.length;Up++){var Kp=this.lastTouches[Up],fm=Math.abs(Mp-Kp.x),mm=Math.abs(Tp-Kp.y);if(fm<=25&&mm<=25)return!0}return!1}Ku(Jp,Vp,{handler:function(pp,Mp,Tp){var Up=Tp.pointerType==cp,Kp=Tp.pointerType==Ap;if(!(Kp&&Tp.sourceCapabilities&&Tp.sourceCapabilities.firesTouchEvents)){if(Up)am.call(this,Mp,Tp);else if(Kp&&tm.call(this,Tp))return;this.callback(pp,Mp,Tp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var sm=Fu?np(Fu.style,"touchAction"):Ru,cm=sm!==Ru,um="compute",vm="auto",_m="manipulation",Mm="none",Rm="pan-x",wm="pan-y",Pm=function(){if(!cm)return!1;var pp={},Mp=_u.CSS&&_u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Tp){pp[Tp]=!Mp||_u.CSS.supports("touch-action",Tp)}),pp}();function Im(pp,Mp){this.manager=pp,this.set(Mp)}Im.prototype={set:function(pp){pp==um&&(pp=this.compute()),cm&&this.manager.element.style&&Pm[pp]&&(this.manager.element.style[sm]=pp),this.actions=pp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var pp=[];return Hu(this.manager.recognizers,function(Mp){qu(Mp.options.enable,[Mp])&&(pp=pp.concat(Mp.getTouchAction()))}),function(Mp){if(ip(Mp,Mm))return Mm;var Tp=ip(Mp,Rm),Up=ip(Mp,wm);return Tp&&Up?Mm:Tp||Up?Tp?Rm:wm:ip(Mp,_m)?_m:vm}(pp.join(" "))},preventDefaults:function(pp){var Mp=pp.srcEvent,Tp=pp.offsetDirection;if(this.manager.session.prevented)Mp.preventDefault();else{var Up=this.actions,Kp=ip(Up,Mm)&&!Pm.none,fm=ip(Up,wm)&&!Pm["pan-y"],mm=ip(Up,Rm)&&!Pm["pan-x"];if(Kp){var Bm=pp.pointers.length===1,hm=pp.distance<2,Lm=pp.deltaTime<250;if(Bm&&hm&&Lm)return}if(!mm||!fm)return Kp||fm&&6&Tp||mm&&Tp&yp?this.preventSrc(Mp):void 0}},preventSrc:function(pp){this.manager.session.prevented=!0,pp.preventDefault()}};var Sm=32;function Dm(pp){this.options=Lu({},this.defaults,pp||{}),this.id=tp++,this.manager=null,this.options.enable=Yu(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Vm(pp){return 16&pp?"cancel":8&pp?"end":4&pp?"move":2&pp?"start":""}function Cm(pp){return pp==16?"down":pp==8?"up":pp==2?"left":pp==4?"right":""}function _p(pp,Mp){var Tp=Mp.manager;return Tp?Tp.get(pp):pp}function Hp(){Dm.apply(this,arguments)}function Gp(){Hp.apply(this,arguments),this.pX=null,this.pY=null}function Qp(){Hp.apply(this,arguments)}function om(){Dm.apply(this,arguments),this._timer=null,this._input=null}function Am(){Hp.apply(this,arguments)}function gm(){Hp.apply(this,arguments)}function dm(){Dm.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function pm(pp,Mp){return(Mp=Mp||{}).recognizers=Yu(Mp.recognizers,pm.defaults.preset),new bm(pp,Mp)}Dm.prototype={defaults:{},set:function(pp){return Lu(this.options,pp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(pp){if(zu(pp,"recognizeWith",this))return this;var Mp=this.simultaneous;return Mp[(pp=_p(pp,this)).id]||(Mp[pp.id]=pp,pp.recognizeWith(this)),this},dropRecognizeWith:function(pp){return zu(pp,"dropRecognizeWith",this)||(pp=_p(pp,this),delete this.simultaneous[pp.id]),this},requireFailure:function(pp){if(zu(pp,"requireFailure",this))return this;var Mp=this.requireFail;return sp(Mp,pp=_p(pp,this))===-1&&(Mp.push(pp),pp.requireFailure(this)),this},dropRequireFailure:function(pp){if(zu(pp,"dropRequireFailure",this))return this;pp=_p(pp,this);var Mp=sp(this.requireFail,pp);return Mp>-1&&this.requireFail.splice(Mp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(pp){return!!this.simultaneous[pp.id]},emit:function(pp){var Mp=this,Tp=this.state;function Up(Kp){Mp.manager.emit(Kp,pp)}Tp<8&&Up(Mp.options.event+Vm(Tp)),Up(Mp.options.event),pp.additionalEvent&&Up(pp.additionalEvent),Tp>=8&&Up(Mp.options.event+Vm(Tp))},tryEmit:function(pp){if(this.canEmit())return this.emit(pp);this.state=Sm},canEmit:function(){for(var pp=0;pp<this.requireFail.length;){if(!(33&this.requireFail[pp].state))return!1;pp++}return!0},recognize:function(pp){var Mp=Lu({},pp);if(!qu(this.options.enable,[this,Mp]))return this.reset(),void(this.state=Sm);56&this.state&&(this.state=1),this.state=this.process(Mp),30&this.state&&this.tryEmit(Mp)},process:function(pp){},getTouchAction:function(){},reset:function(){}},Ku(Hp,Dm,{defaults:{pointers:1},attrTest:function(pp){var Mp=this.options.pointers;return Mp===0||pp.pointers.length===Mp},process:function(pp){var Mp=this.state,Tp=pp.eventType,Up=6&Mp,Kp=this.attrTest(pp);return Up&&(8&Tp||!Kp)?16|Mp:Up||Kp?4&Tp?8|Mp:2&Mp?4|Mp:2:Sm}}),Ku(Gp,Hp,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var pp=this.options.direction,Mp=[];return 6&pp&&Mp.push(wm),pp&yp&&Mp.push(Rm),Mp},directionTest:function(pp){var Mp=this.options,Tp=!0,Up=pp.distance,Kp=pp.direction,fm=pp.deltaX,mm=pp.deltaY;return Kp&Mp.direction||(6&Mp.direction?(Kp=fm===0?1:fm<0?2:4,Tp=fm!=this.pX,Up=Math.abs(pp.deltaX)):(Kp=mm===0?1:mm<0?8:16,Tp=mm!=this.pY,Up=Math.abs(pp.deltaY))),pp.direction=Kp,Tp&&Up>Mp.threshold&&Kp&Mp.direction},attrTest:function(pp){return Hp.prototype.attrTest.call(this,pp)&&(2&this.state||!(2&this.state)&&this.directionTest(pp))},emit:function(pp){this.pX=pp.deltaX,this.pY=pp.deltaY;var Mp=Cm(pp.direction);Mp&&(pp.additionalEvent=this.options.event+Mp),this._super.emit.call(this,pp)}}),Ku(Qp,Hp,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mm]},attrTest:function(pp){return this._super.attrTest.call(this,pp)&&(Math.abs(pp.scale-1)>this.options.threshold||2&this.state)},emit:function(pp){if(pp.scale!==1){var Mp=pp.scale<1?"in":"out";pp.additionalEvent=this.options.event+Mp}this._super.emit.call(this,pp)}}),Ku(om,Dm,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[vm]},process:function(pp){var Mp=this.options,Tp=pp.pointers.length===Mp.pointers,Up=pp.distance<Mp.threshold,Kp=pp.deltaTime>Mp.time;if(this._input=pp,!Up||!Tp||12&pp.eventType&&!Kp)this.reset();else if(1&pp.eventType)this.reset(),this._timer=Gu(function(){this.state=8,this.tryEmit()},Mp.time,this);else if(4&pp.eventType)return 8;return Sm},reset:function(){clearTimeout(this._timer)},emit:function(pp){this.state===8&&(pp&&4&pp.eventType?this.manager.emit(this.options.event+"up",pp):(this._input.timeStamp=Uu(),this.manager.emit(this.options.event,this._input)))}}),Ku(Am,Hp,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mm]},attrTest:function(pp){return this._super.attrTest.call(this,pp)&&(Math.abs(pp.rotation)>this.options.threshold||2&this.state)}}),Ku(gm,Hp,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Gp.prototype.getTouchAction.call(this)},attrTest:function(pp){var Mp,Tp=this.options.direction;return 30&Tp?Mp=pp.overallVelocity:6&Tp?Mp=pp.overallVelocityX:Tp&yp&&(Mp=pp.overallVelocityY),this._super.attrTest.call(this,pp)&&Tp&pp.offsetDirection&&pp.distance>this.options.threshold&&pp.maxPointers==this.options.pointers&&Vu(Mp)>this.options.velocity&&4&pp.eventType},emit:function(pp){var Mp=Cm(pp.offsetDirection);Mp&&this.manager.emit(this.options.event+Mp,pp),this.manager.emit(this.options.event,pp)}}),Ku(dm,Dm,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[_m]},process:function(pp){var Mp=this.options,Tp=pp.pointers.length===Mp.pointers,Up=pp.distance<Mp.threshold,Kp=pp.deltaTime<Mp.time;if(this.reset(),1&pp.eventType&&this.count===0)return this.failTimeout();if(Up&&Kp&&Tp){if(pp.eventType!=4)return this.failTimeout();var fm=!this.pTime||pp.timeStamp-this.pTime<Mp.interval,mm=!this.pCenter||bp(this.pCenter,pp.center)<Mp.posThreshold;if(this.pTime=pp.timeStamp,this.pCenter=pp.center,mm&&fm?this.count+=1:this.count=1,this._input=pp,this.count%Mp.taps===0)return this.hasRequireFailures()?(this._timer=Gu(function(){this.state=8,this.tryEmit()},Mp.interval,this),2):8}return Sm},failTimeout:function(){return this._timer=Gu(function(){this.state=Sm},this.options.interval,this),Sm},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),pm.VERSION="2.0.7",pm.defaults={domEvents:!1,touchAction:um,enable:!0,inputTarget:null,inputClass:null,preset:[[Am,{enable:!1}],[Qp,{enable:!1},["rotate"]],[gm,{direction:6}],[Gp,{direction:6},["swipe"]],[dm],[dm,{event:"doubletap",taps:2},["tap"]],[om]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function bm(pp,Mp){var Tp;this.options=Lu({},pm.defaults,Mp||{}),this.options.inputTarget=this.options.inputTarget||pp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=pp,this.input=new((Tp=this).options.inputClass||(lp?Np:up?Zp:op?Jp:Lp))(Tp,$p),this.touchAction=new Im(this,this.options.touchAction),Tm(this,!0),Hu(this.options.recognizers,function(Up){var Kp=this.add(new Up[0](Up[1]));Up[2]&&Kp.recognizeWith(Up[2]),Up[3]&&Kp.requireFailure(Up[3])},this)}function Tm(pp,Mp){var Tp,Up=pp.element;Up.style&&(Hu(pp.options.cssProps,function(Kp,fm){Tp=np(Up.style,fm),Mp?(pp.oldCssProps[Tp]=Up.style[Tp],Up.style[Tp]=Kp):Up.style[Tp]=pp.oldCssProps[Tp]||""}),Mp||(pp.oldCssProps={}))}return bm.prototype={set:function(pp){return Lu(this.options,pp),pp.touchAction&&this.touchAction.update(),pp.inputTarget&&(this.input.destroy(),this.input.target=pp.inputTarget,this.input.init()),this},stop:function(pp){this.session.stopped=pp?2:1},recognize:function(pp){var Mp=this.session;if(!Mp.stopped){var Tp;this.touchAction.preventDefaults(pp);var Up=this.recognizers,Kp=Mp.curRecognizer;(!Kp||Kp&&8&Kp.state)&&(Kp=Mp.curRecognizer=null);for(var fm=0;fm<Up.length;)Tp=Up[fm],Mp.stopped===2||Kp&&Tp!=Kp&&!Tp.canRecognizeWith(Kp)?Tp.reset():Tp.recognize(pp),!Kp&&14&Tp.state&&(Kp=Mp.curRecognizer=Tp),fm++}},get:function(pp){if(pp instanceof Dm)return pp;for(var Mp=this.recognizers,Tp=0;Tp<Mp.length;Tp++)if(Mp[Tp].options.event==pp)return Mp[Tp];return null},add:function(pp){if(zu(pp,"add",this))return this;var Mp=this.get(pp.options.event);return Mp&&this.remove(Mp),this.recognizers.push(pp),pp.manager=this,this.touchAction.update(),pp},remove:function(pp){if(zu(pp,"remove",this))return this;if(pp=this.get(pp)){var Mp=this.recognizers,Tp=sp(Mp,pp);Tp!==-1&&(Mp.splice(Tp,1),this.touchAction.update())}return this},on:function(pp,Mp){if(pp!==Ru&&Mp!==Ru){var Tp=this.handlers;return Hu(ap(pp),function(Up){Tp[Up]=Tp[Up]||[],Tp[Up].push(Mp)}),this}},off:function(pp,Mp){if(pp!==Ru){var Tp=this.handlers;return Hu(ap(pp),function(Up){Mp?Tp[Up]&&Tp[Up].splice(sp(Tp[Up],Mp),1):delete Tp[Up]}),this}},emit:function(pp,Mp){this.options.domEvents&&function(Kp,fm){var mm=$u.createEvent("Event");mm.initEvent(Kp,!0,!0),mm.gesture=fm,fm.target.dispatchEvent(mm)}(pp,Mp);var Tp=this.handlers[pp]&&this.handlers[pp].slice();if(Tp&&Tp.length){Mp.type=pp,Mp.preventDefault=function(){Mp.srcEvent.preventDefault()};for(var Up=0;Up<Tp.length;)Tp[Up](Mp),Up++}},destroy:function(){this.element&&Tm(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Lu(pm,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Sm,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:yp,DIRECTION_ALL:30,Manager:bm,Input:Vp,TouchAction:Im,TouchInput:Zp,MouseInput:Lp,PointerEventInput:Np,TouchMouseInput:Jp,SingleTouchInput:Xp,Recognizer:Dm,AttrRecognizer:Hp,Tap:dm,Pan:Gp,Swipe:gm,Pinch:Qp,Rotate:Am,Press:om,on:Zu,off:_h,each:Hu,merge:Xu,extend:Qu,assign:Lu,inherit:Ku,bindFn:Wu,prefixed:np}),pm}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function oa(_u,$u,Bu){var Ru=$u.offsetWidth,Lu=$u.offsetHeight,Ou=$u.getBoundingClientRect(),Fu=Ou.top,Nu=Ou.left;return Bu&&(Nu+=Ru*Bu.left,Fu+=Lu*(1-Bu.bottom-Bu.height),Ru*=Bu.width,Lu*=Bu.height),new r$3.Vector2((_u.x-Nu)/Ru*2-1,-(_u.y-Fu)/Lu*2+1)}var sa=new r$3.OrthographicCamera(-1,1,1,-1,0,1),aa$1=new r$3.BufferGeometry;aa$1.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),aa$1.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var la=new r$3.Mesh(aa$1),ua=new r$3.Scene;ua.add(la);var ha$1=function(){function _u($u,Bu){var Ru;this.renderer=$u,this.material=new r$3.ShaderMaterial({vertexShader:(Ru=Bu.vertex)!==null&&Ru!==void 0?Ru:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:Bu.fragment,uniforms:Object.assign({inputBuffer:new r$3.Uniform(null)},Bu.uniforms),defines:Object.assign({},Bu.defines),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Bu){var Ru=this.renderer.getRenderTarget(),Lu=la.material;this.material.uniforms.inputBuffer.value=$u.texture,la.material=this.material,this.renderer.setRenderTarget(Bu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Ru),la.material=Lu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),ca$1=function(){function _u($u){this.renderer=$u,this.material=new r$3.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$3.Uniform(new r$3.Vector3)}),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Bu){var Ru=this.renderer.getRenderTarget(),Lu=la.material;this.material.uniforms.inputValue.value.copy($u),la.material=this.material,this.renderer.setRenderTarget(Bu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Ru),la.material=Lu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),da$1=function(_u){function $u(Bu){return _u.call(this,Bu,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$3.__extends($u,_u),$u}(ha$1),pa=function(){function _u($u){this.enable=!0,this.renderer=$u,this.copyPass=new da$1(this.renderer)}return _u.prototype.render=function($u,Bu){this.copyPass.render($u,Bu)},_u.prototype.dispose=function(){this.copyPass.dispose()},_u}(),fa$1=function(_u){function $u(Bu){var Ru,Lu=this;Lu=_u.call(this)||this;var Ou=$u.parseArgs(Bu);return Lu.pending=!0,Lu.userAction=Ou.initial[3],Lu.destroyed=!1,Lu.ident=Ou.ident,Lu.scene=Ou.scene,Lu.helper=Ou.helper,Lu.camera=Ou.camera,Lu.renderer=Ou.renderer,Lu.scissor=Ou.scissor,Lu.element=Ou.element,Lu.model=Ou.model,Lu.enableIOSEDR=(Ru=Ou.enableIOSEDR)!==null&&Ru!==void 0&&Ru,Lu.work=Ou.work,Lu.imageOptions=Ou.imageOptions,Lu.videoTexture=Ou.videoTexture,Lu.networkSubscribe=Ou.networkSubscribe,Lu.requestProxy=Ou.requestProxy,Lu.needsRender=!0,Lu.maxFov=120,Lu.minFov=40,Lu.maxLatitude=+Math.PI/2,Lu.minLatitude=-Math.PI/2,Lu.cameraMotion=new Ro$1({longitude:{value:Lu.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Lu.camera.pose.latitude,fov:Lu.camera.pose.fov}),Lu.eventUnbinds=[Ou.element].concat(Ou.extraElements||[]).map(function(Fu){return Lu.bindEvents(Fu)}),at.shared.add(function(){return Lu.initAnimation.apply(Lu,Ou.initial)},!0),Lu}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){return t$3.__assign({},Bu)},$u.initAnimationEndState=function(Bu){var Ru=this.parseArgs(Bu);return{longitude:Ru.camera.pose.longitude,latitude:Ru.camera.pose.latitude,fov:Ru.camera.pose.fov,offset:Ru.camera.pose.offset.clone(),distance:Ru.camera.pose.distance}},$u.prototype.destroy=function(){var Bu;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Ru=0,Lu=this.eventUnbinds;Ru<Lu.length;Ru++)(0,Lu[Ru])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),delete this.pressState},$u.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},$u.prototype.bindExtraElement=function(Bu){for(var Ru=0,Lu=this.eventUnbinds;Ru<Lu.length;Ru++)if(Lu[Ru].element===Bu)return;this.eventUnbinds.push(this.bindEvents(Bu))},$u.prototype.unbindExtraElement=function(Bu){for(var Ru=[],Lu=0,Ou=this.eventUnbinds;Lu<Ou.length;Lu++){var Fu=Ou[Lu];Fu.element===Bu?Fu():Ru.push(Fu)}this.eventUnbinds=Ru},$u.prototype.updateRenderSize=function(){this.needsRender=!0},$u.prototype.updateModel=function(Bu){this.model=Bu,this.needsRender=!0},$u.prototype.updateWork=function(Bu,Ru,Lu,Ou,Fu){return this.work=Bu,this.userAction=Fu,!1},$u.prototype.updateTime=function(Bu,Ru){for(var Lu=[],Ou=2;Ou<arguments.length;Ou++)Lu[Ou-2]=arguments[Ou];if(!this.destroyed){var Fu={};this.cameraMotion.ended&&(this.cameraMotion.update(Bu),Fu.longitude=this.cameraMotion.value.longitude,Fu.latitude=this.cameraMotion.value.latitude,Fu.fov=this.cameraMotion.value.fov),ia$1(Fu)&&this.setCamera(Fu)}},$u.prototype.render=function(){this.renderer.render(this.scene,this.camera)},$u.prototype.postProcessing=function(Bu,Ru){this.destroyed||(this.effect||(this.effect=new pa(this.renderer)),this.effect.render(Bu,Ru))},$u.prototype.updateCamera=function(Bu,Ru,Lu){return this.userAction=Lu,this.cameraMotion.set(Bu,Ru)},$u.prototype.getTargetPose=function(){var Bu=this.cameraMotion.getKeyFrameSegment(_e())[1];return{longitude:Bu.value.longitude,latitude:Bu.value.latitude,fov:Bu.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}},$u.prototype.moveToPano=function(Bu,Ru,Lu){Ru===void 0&&(Ru={}),this.userAction=Lu;var Ou={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};Ru.moveStartCallback&&Ru.moveStartCallback(Bu,Ou),this.emit("moveToPano",Bu,this.userAction),this.emit("panoWillArrive",Bu,Ou,this.userAction),this.emit("panoArrived",Bu,Ou,this.userAction),Ru.moveEndCallback&&Ru.moveEndCallback(Bu,Ou)},$u.prototype.initAnimation=function(Bu,Ru,Lu,Ou){this.pending=!1,this.userAction=Ou},$u.prototype.setCamera=function(Bu){var Ru,Lu,Ou,Fu,Nu;Bu===void 0&&(Bu={});var Vu=(Ru=Bu.longitude)!==null&&Ru!==void 0?Ru:this.camera.pose.longitude,Uu=(Lu=Bu.latitude)!==null&&Lu!==void 0?Lu:this.camera.pose.latitude,Gu=(Ou=Bu.fov)!==null&&Ou!==void 0?Ou:this.camera.pose.fov,zu=(Fu=Bu.distance)!==null&&Fu!==void 0?Fu:this.camera.pose.distance,Hu=(Nu=Bu.offset)!==null&&Nu!==void 0?Nu:this.camera.pose.offset,ju=this.camera.position.clone(),Qu=Vs(Vu,this.camera.pose.longitude,2*Math.PI)||Vs(Uu,this.camera.pose.latitude),Xu=Vs(Gu,this.camera.pose.fov),Ku=Vs(zu,this.camera.pose.distance),Wu=Hs$1(Hu,this.camera.pose.offset);this.camera.setFromPose({longitude:Vu,latitude:Uu,fov:Gu,distance:zu,offset:Hu});var qu=Hs$1(ju,this.camera.position);Xu&&this.emit("cameraFovUpdate",Gu,this.userAction),Qu&&this.emit("cameraDirectionUpdate",{longitude:Vu,latitude:Uu},this.userAction),qu&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(Xu||Qu||Wu||Ku)&&this.emit("cameraUpdate",{longitude:Vu,latitude:Uu,fov:Gu,offset:Hu,distance:zu},this.userAction),this.needsRender=!0},$u.prototype.onPanGesture=function(Bu){var Ru=this.panState,Lu=Bu.pointers.length;if(Bu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Bu.center.x,y:Bu.center.y},Ru!==void 0&&Ru.pointerLength===Lu){var Ou=Bu.pointers.map(function(Fu){return ii(Fu,["x","y"])});this.emit("wantsGesture","pan",Ou,Bu.isFinal)||this.emit("gesture","pan",Ou,Bu.isFinal)}},$u.prototype.onTapGesture=function(Bu){var Ru=Bu.pointers.map(function(Lu){return ii(Lu,["x","y"])});this.emit("wantsGesture","tap",Ru,!0)||this.emit("gesture","tap",Ru,!0)},$u.prototype.onPressGesture=function(Bu,Ru){var Lu,Ou=[Bu];if(this.emit("wantsGesture","press",Ou,Ru))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;this.emit("gesture","press",Ou,Ru)},$u.prototype.onPinchGesture=function(Bu){var Ru=Bu.pointers.map(function(Lu){return ii(Lu,["x","y"])});this.emit("wantsGesture","pinch",Ru,Bu.isFinal)||this.emit("gesture","pinch",Ru,Bu.isFinal)},$u.prototype.onMouseWheel=function(Bu){var Ru=(Math.abs(Bu.deltaY)>Math.abs(Bu.deltaX)?Bu.deltaY:Bu.deltaX)/-60,Lu=[{x:Bu.clientX,y:Bu.clientY,delta:Ru}];this.emit("wantsGesture","mouseWheel",Lu,!1)||this.emit("gesture","mouseWheel",Lu,!1)},$u.prototype.onMouseMove=function(Bu){},$u.prototype.onMouseOut=function(){},$u.prototype.relativeClientPosition=function(Bu){return oa(Bu,this.element,this.scissor)},$u.prototype.bindEvents=function(Bu){var Ru=this,Lu=function(ip){var ap=oa(ip,Ru.element,Ru.scissor);return!(Math.abs(ap.x)>1||Math.abs(ap.y)>1)},Ou=new ra.Manager(Bu),Fu=function(ip){return ip.session.firstInput||null};Ou.add(new ra.Pan({threshold:10,pointers:0})),Ou.add(new ra.Tap({interval:410})),Ou.add(new ra.Pinch({threshold:0,pointers:2})),Ou.on("panstart pan",function(ip){var ap=Fu(Ou);ap&&!Lu(ap.center)||(Ru.onPanGesture(ip),Ku())}),Ou.on("tap",function(ip){if(ip.pointerType!=="mouse"||ip.srcEvent.button===0){var ap=Fu(Ou);ap&&!Lu(ap.center)||(Ru.onTapGesture(ip),Ku())}}),Ou.on("pinchstart pinch pinchend",function(ip){var ap=Fu(Ou);ap&&!Lu(ap.center)||(Ru.onPinchGesture(ip),Ku())});var Nu=null,Vu=null,Uu=function(ip,ap,sp){var Ju=ip==="pinchend"?ap:ap-sp.deltaY/280;return{type:ip,target:sp.target,pointerType:"mouse",srcEvent:sp,pointers:[{x:sp.clientX,y:sp.clientY}],isFirst:ip==="pinchstart",isFinal:ip==="pinchend",scale:ho$1(Ju,.1,10),center:{x:sp.clientX,y:sp.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Gu=function(ip){var ap,sp={x:ip.clientX,y:ip.clientY};if(Lu(sp)){if(ip.preventDefault(),ip.ctrlKey){var Ju=(ap=Nu==null?void 0:Nu.prevInput.scale)!==null&&ap!==void 0?ap:1,_f=Uu(Nu?"pinch":"pinchstart",Ju,ip);Nu===null?Nu={firstInput:_f,prevInput:_f}:Nu.prevInput=_f,Ru.onPinchGesture(_f),Vu!==null&&window.clearTimeout(Vu),Vu=window.setTimeout(function(){var np;Vu=null;var tp=(np=Nu==null?void 0:Nu.prevInput.scale)!==null&&np!==void 0?np:1,rp=Uu("pinchend",tp,ip);Nu=null,Ru.onPinchGesture(rp)},200)}else Ru.onMouseWheel(ip);Ku()}},zu=function(ip){if(!Zs()){var ap={x:ip.clientX,y:ip.clientY};Lu(ap)?(Ru.onMouseMove(ip),Ru.pressState&&Math.abs(ip.clientX-Ru.pressState.x)>10&&Math.abs(ip.clientY-Ru.pressState.y)>10&&Ku()):Ru.onMouseOut()}},Hu=function(){Ru.onMouseOut(),Ku()},ju=function(ip,ap){if(Lu(ip)){Ru.pressState={x:ip.x,y:ip.y,time:Ru.pressState?Ru.pressState.time:ap,stop:Qe$1};var sp=ap-Ru.pressState.time;Ru.onPressGesture({x:ip.x,y:ip.y,delta:sp},!1),Ru.pressState&&(Ru.pressState.stop=at.shared.add(function(Ju){return ju({x:ip.x,y:ip.y},Ju)},!0,1))}else Ku()},Qu=function(ip){Ku(),ip.touches.length>1||ip.changedTouches.length<=0||ju({x:ip.changedTouches[0].clientX,y:ip.changedTouches[0].clientY},_e())},Xu=function(ip){Ku(),ju({x:ip.clientX,y:ip.clientY},_e())},Ku=function(){var ip;if(Ru.pressState){var ap=_e()-Ru.pressState.time;Ru.onPressGesture({x:Ru.pressState.x,y:Ru.pressState.y,delta:ap},!0),(ip=Ru.pressState)===null||ip===void 0||ip.stop(),delete Ru.pressState}},Wu=null,qu=function(ip){var ap,sp="pinch",Ju=!1,_f=!1;switch(ip.type){case"gesturestart":sp="pinchstart",Ju=!0;break;case"gestureend":sp="pinchend",_f=!0}return{type:sp,target:ip.target,pointerType:"mouse",srcEvent:ip,pointers:[{x:ip.clientX,y:ip.clientY}],isFirst:Ju,isFinal:_f,scale:(ap=ip.scale)!==null&&ap!==void 0?ap:1,center:{x:ip.clientX,y:ip.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Yu=function(ip){if(ip.preventDefault(),!Zs()){var ap=qu(ip),sp=(Wu={firstInput:ap}).firstInput;sp&&!Lu(sp.center)||Ru.onPinchGesture(ap)}},Zu=function(ip){if(ip.preventDefault(),!Zs()&&Wu){var ap=qu(ip),sp=Wu.firstInput;sp&&!Lu(sp.center)||Ru.onPinchGesture(ap)}},_h=function(ip){if(ip.preventDefault(),!Zs()&&Wu){var ap=qu(ip),sp=Wu.firstInput;Wu=null,sp&&!Lu(sp.center)||Ru.onPinchGesture(ap)}},ep=function(ip){if(ip&&typeof ip.preventDefault=="function"&&ip.currentTarget===Bu&&ip.preventDefault(),typeof getSelection=="function"){var ap=getSelection();ap&&ap.focusNode&&(ap.removeAllRanges&&ap.removeAllRanges(),ap.empty&&ap.empty())}};return Bu.addEventListener("wheel",Gu,{passive:!1}),Bu.addEventListener("mousemove",zu,!1),Bu.addEventListener("mouseout",Hu,!1),Bu.addEventListener("touchstart",Qu,!1),Bu.addEventListener("touchend",Ku,!1),Bu.addEventListener("touchcancel",Ku,!1),Bu.addEventListener("mousedown",Xu,!1),Bu.addEventListener("mouseup",Ku,!1),Bu.addEventListener("gesturestart",Yu,{passive:!1}),Bu.addEventListener("gesturechange",Zu,{passive:!1}),Bu.addEventListener("gestureend",_h,{passive:!1}),Bu.addEventListener("touchstart",ep,!1),Bu.addEventListener("contextmenu",ep,!1),Object.assign(function(){Ou.destroy(),Bu.removeEventListener("wheel",Gu,!1),Bu.removeEventListener("mousemove",zu,!1),Bu.removeEventListener("mouseout",Hu,!1),Bu.removeEventListener("touchstart",Qu,!1),Bu.removeEventListener("touchend",Ku,!1),Bu.removeEventListener("touchcancel",Ku,!1),Bu.removeEventListener("mousedown",Xu,!1),Bu.removeEventListener("mouseup",Ku,!1),Bu.removeEventListener("gesturestart",Yu,!1),Bu.removeEventListener("gesturechange",Zu,!1),Bu.removeEventListener("gestureend",_h,!1),Bu.removeEventListener("touchstart",ep,!1),Bu.removeEventListener("contextmenu",ep,!1)},{element:Bu})},$u}(Fe),Aa=function(_u){function $u(Bu){var Ru,Lu,Ou,Fu,Nu=this,Vu=$u.parseArgs(Bu);return(Nu=_u.call(this,Vu)||this).defaultLongitude=Vu.defaultLongitude,Nu.defaultLatitude=Vu.defaultLatitude,Nu.defaultFov=Vu.defaultFov,Nu.maxFov=Vu.maxFov,Nu.minFov=Vu.minFov,Nu.maxLatitude=Vu.maxLatitude,Nu.minLatitude=Vu.minLatitude,Nu.locationMotion=new Ro$1({x:Nu.camera.pose.offset.x,y:Nu.camera.pose.offset.y,z:Nu.camera.pose.offset.z,distance:Nu.camera.pose.distance,modelAlpha:(Lu=(Ru=Nu.model.getMaterial())===null||Ru===void 0?void 0:Ru.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Fu=(Ou=Nu.model.getMaterial())===null||Ou===void 0?void 0:Ou.perspToOrtho)!==null&&Fu!==void 0?Fu:0}),Nu}return t$3.__extends($u,_u),$u.distanceFromModel=function(Bu,Ru,Lu){var Ou=Bu.bounding,Fu=Math.pow(Math.pow(Ou.max.x-Ou.min.x+1,2)+Math.pow(Ou.max.y-Ou.min.y+1,2)+Math.pow(Ou.max.z-Ou.min.z+1,2),.5),Nu=Fu/2/Math.tan(Math.PI*Ru/360);return Lu<1&&(Nu/=Lu),isNaN(Nu)?Fu:Nu},$u.parseArgs=function(Bu){var Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu=_u.parseArgs.call(this,Bu);return t$3.__assign(t$3.__assign({},Gu),{defaultLongitude:(Ru=Bu.defaultLongitude)!==null&&Ru!==void 0?Ru:Math.PI/4,defaultLatitude:(Lu=Bu.defaultLatitude)!==null&&Lu!==void 0?Lu:Math.PI/4,defaultFov:(Ou=Bu.defaultFov)!==null&&Ou!==void 0?Ou:80,maxFov:(Fu=Bu.maxFov)!==null&&Fu!==void 0?Fu:120,minFov:(Nu=Bu.minFov)!==null&&Nu!==void 0?Nu:40,maxLatitude:(Vu=Bu.maxLatitude)!==null&&Vu!==void 0?Vu:+Math.PI/2,minLatitude:(Uu=Bu.minLatitude)!==null&&Uu!==void 0?Uu:-Math.PI/2})},$u.initAnimationEndPose=function(Bu){var Ru,Lu,Ou,Fu=this.parseArgs(Bu),Nu=Bu.initial[1];return{longitude:(Ru=Nu.longitude)!==null&&Ru!==void 0?Ru:Fu.defaultLongitude,latitude:ho$1((Lu=Nu.latitude)!==null&&Lu!==void 0?Lu:Fu.defaultLatitude,Fu.minLatitude,Fu.maxLatitude),fov:(Ou=Nu.fov)!==null&&Ou!==void 0?Ou:Fu.defaultFov,offset:Bu.model.bounding.getCenter(new r$3.Vector3),distance:$u.distanceFromModel(Fu.model,Fu.defaultFov,Fu.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Bu,Ru,Lu,Ou,Fu){return this.work=Bu,this.updateCamera(Lu,Ou!=null?Ou:0,Fu),!0},$u.prototype.updateModel=function(Bu){_u.prototype.updateModel.call(this,Bu);var Ru=Bu.bounding.getCenter(new r$3.Vector3),Lu=$u.distanceFromModel(Bu,this.defaultFov,this.camera.aspect);this.locationMotion.set({x:Ru.x,y:Ru.y,z:Ru.z,distance:Lu},0).catch(Qe$1)},$u.prototype.updateTime=function(Bu,Ru){for(var Lu=[],Ou=2;Ou<arguments.length;Ou++)Lu[Ou-2]=arguments[Ou];if(!this.destroyed){var Fu={},Nu={};this.locationMotion.ended||(this.locationMotion.update(Bu),Fu.modelAlpha=this.locationMotion.value.modelAlpha,Fu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Nu.distance=this.locationMotion.value.distance,Nu.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Bu),Nu.longitude=this.cameraMotion.value.longitude,Nu.latitude=this.cameraMotion.value.latitude,Nu.fov=this.cameraMotion.value.fov),ia$1(Fu)||this.model.setMaterial(Fu),ia$1(Nu)||this.setCamera(Nu)}},$u.prototype.getTargetPose=function(){var Bu=this.cameraMotion.getKeyFrameSegment(_e())[1],Ru=this.locationMotion.getKeyFrameSegment(_e())[1];return{longitude:Bu.value.longitude,latitude:Bu.value.latitude,fov:Bu.value.fov,offset:new r$3.Vector3(Ru.value.x,Ru.value.y,Ru.value.z),distance:Ru.value.distance}},$u.prototype.initAnimation=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu=this;if(!this.destroyed){this.pending=!1,this.userAction=Ou;var Gu={longitude:(Fu=Ru.longitude)!==null&&Fu!==void 0?Fu:this.defaultLongitude,latitude:ho$1((Nu=Ru.latitude)!==null&&Nu!==void 0?Nu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Vu=Ru.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},zu=ii(Gu,["longitude","latitude","fov"]),Hu={x:Gu.offset.x,y:Gu.offset.y,z:Gu.offset.z,distance:Gu.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Bu,Gu,this.userAction),this.cameraMotion.set(zu,Lu).catch(Qe$1),this.locationMotion.set(Hu,Lu).then(function(){Uu.emit("initAnimationEnded",Bu,Gu,Uu.userAction)},function(ju){var Qu=na(Uu.camera.pose);Uu.emit("initAnimationEnded",Bu,Qu,Uu.userAction)}).catch(Qe$1)}},$u.prototype.updateRenderSize=function(){this.locationMotion.set({distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},$u.prototype.getForwardPanoIndexOrNot=function(Bu){var Ru=this.work.observers.filter(function(Nu){return Nu.active}),Lu=this.model.intersectRaycaster(Bu)[0];if(!Lu)return null;var Ou=ta(Ru,function(Nu){return Nu.standingPosition.distanceTo(Lu.point)},!0),Fu=Ou[0];return Ou[1]<5?this.work.observers.indexOf(Fu):null},$u.prototype.coordinatesForOffset=function(Bu){var Ru=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Bu.x/(Ru.x*this.scissor.width),latitude:2*Bu.y/(Ru.y*this.scissor.height)}},$u.prototype.requestInteriaMovement=function(Bu,Ru){var Lu=this;if(this.interiaMovement!==!1){for(var Ou=t$3.__assign({},Bu),Fu={longitude:0,latitude:0},Nu=0;Nu<Ru;Nu++)Ou.longitude*=.996,Ou.latitude*=.994008,Fu.longitude+=Ou.longitude,Fu.latitude+=Ou.latitude;var Vu=Gs$1(this.cameraMotion.value.longitude+Fu.longitude),Uu=ho$1(this.cameraMotion.value.latitude+Fu.latitude,this.minLatitude,this.maxLatitude),Gu={longitude:Vu,latitude:Uu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Vu,latitude:Uu},0).catch(Qe$1);var zu=Ou.longitude>1e-4||Ou.longitude<-1e-4||Ou.latitude>1e-4||Ou.latitude<-1e-4;this.emit("interiaPan",Gu,!zu),zu?at.shared.add(function(Hu,ju){Lu.requestInteriaMovement(Ou,0|ju)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Bu){var Ru=this.panState,Lu=Bu.pointers.length;if(Bu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Bu.center.x,y:Bu.center.y},Ru!==void 0&&Ru.pointerLength===Lu){var Ou=Bu.pointers.map(function(Xu){return ii(Xu,["x","y"])});if(!this.emit("wantsGesture","pan",Ou,Bu.isFinal)){var Fu={x:Bu.center.x-Ru.x,y:Bu.center.y-Ru.y},Nu=this.relativeClientPosition(Bu.center),Vu=this.camera.pose.latitude<Math.PI/6||Nu.y<0?-1:1;Fu.x*=Vu;var Uu=this.coordinatesForOffset(Fu),Gu=Gs$1(this.cameraMotion.value.longitude+Uu.longitude),zu=ho$1(this.cameraMotion.value.latitude+Uu.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Bu.overallVelocityX)>.2&&Math.atan2(Math.abs(Bu.overallVelocityY),Math.abs(Bu.overallVelocityX))<Math.PI/6.923&&(zu=this.cameraMotion.value.latitude);var Hu={longitude:Gu,latitude:zu,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Hu,Bu.isFinal)&&(this.emit("gesture","pan",Ou,Bu.isFinal),this.emit("panGesture",Hu,Bu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:Hu.longitude,latitude:Hu.latitude},0).catch(Qe$1),Bu.isFinal&&!this.emit("wantsInteriaPan",Hu))){this.interiaMovement=!0;var ju=Bu.velocityX*Vu,Qu=Bu.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:ju,y:Qu}),0)}}}},$u.prototype.onPinchGesture=function(Bu){var Ru,Lu=(Ru=this.pinchState)===null||Ru===void 0?void 0:Ru.fov,Ou=!1;if(Bu.type!=="pinchstart"){if(Bu.type==="pinchend"&&(Ou=!0,delete this.panState,delete this.pinchState),Lu!==void 0){var Fu=Bu.pointers.map(function(Vu){return ii(Vu,["x","y"])});if(!this.emit("wantsGesture","pinch",Fu,Ou)){var Nu=ho$1(Lu/Bu.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Bu.scale,Nu,Ou)||this.emit("wantsChangeCameraFov",Nu)||(this.emit("gesture","pinch",Fu,Ou),this.emit("pinchGesture",Bu.scale,Nu,Ou),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Nu},0).catch(Qe$1),this.onPanGesture(Bu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Bu){var Ru=this,Lu=(Math.abs(Bu.deltaY)>Math.abs(Bu.deltaX)?Bu.deltaY:Bu.deltaX)/-60,Ou=[{x:Bu.clientX,y:Bu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ou,!1)){var Fu=this.minFov,Nu=this.maxFov,Vu=ho$1(this.camera.fov-Lu,Fu,Nu);this.emit("wantsMouseWheel",Lu,Vu,!1)||this.emit("wantsChangeCameraFov",Vu)||(this.emit("gesture","mouseWheel",Ou,!1),this.emit("mouseWheel",Lu,Vu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Vu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ru.mouseWheelState,Ru.emit("wantsGesture","mouseWheel",Ou,!0)||Ru.emit("wantsMouseWheel",Lu,Vu,!0)||(Ru.emit("gesture","mouseWheel",Ou,!0),Ru.emit("mouseWheel",0,Vu,!0))},200)})}},$u.prototype.onTapGesture=function(Bu){var Ru=Bu.pointers.map(function(Vu){return ii(Vu,["x","y"])});if(!this.emit("wantsGesture","tap",Ru,!0)){var Lu=this.relativeClientPosition(Bu.center),Ou=new r$3.Raycaster;if(Ou.setFromCamera(Lu,this.camera),!this.emit("wantsTapGesture",Ou,Lu,!0)){this.emit("gesture","tap",Ru,!0),this.emit("tapGesture",Ou,Lu,!0),this.interiaMovement=!1;var Fu=this.getForwardPanoIndexOrNot(Ou);if(!oo$1(Fu)){this.emit("panoSelected",Fu);var Nu={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Fu,Nu,!0)}}}},$u.prototype.onPressGesture=function(Bu,Ru){var Lu,Ou,Fu=[Bu];if(this.emit("wantsGesture","press",Fu,Ru))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;var Nu=this.relativeClientPosition(Bu),Vu=new r$3.Raycaster;if(Vu.setFromCamera(Nu,this.camera),this.emit("wantsPressGesture",Vu,Nu,Bu.delta,Ru))return(Ou=this.pressState)===null||Ou===void 0||Ou.stop(),void delete this.pressState;this.emit("gesture","press",Fu,Ru),this.emit("pressGesture",Vu,Nu,Bu.delta,Ru)},$u}(fa$1),ga$1=function(_u){function $u(Bu){var Ru=$u.parseArgs(Bu);return _u.call(this,Ru)||this}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){var Ru=[Bu.initial[0],t$3.__assign(t$3.__assign({},Bu.initial[1]),{longitude:0,latitude:Math.PI/2}),Bu.initial[2],Bu.initial[3]],Lu=t$3.__assign(t$3.__assign({},Bu),{initial:Ru,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return _u.parseArgs.call(this,Lu)},$u.initAnimationEndPose=function(Bu){var Ru=this.parseArgs(Bu);return _u.initAnimationEndPose.call(this,Ru)},$u.prototype.updateModel=function(Bu){this.model=Bu,this.needsRender=!0;var Ru=Bu.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Ru.x,y:Ru.y,z:Ru.z,distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},$u.prototype.initAnimation=function(Bu,Ru,Lu,Ou){var Fu,Nu=this;if(!this.destroyed){this.pending=!1,this.userAction=Ou;var Vu={longitude:0,latitude:Math.PI/2,fov:ho$1((Fu=Ru.fov)!==null&&Fu!==void 0?Fu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Uu=ii(Vu,["longitude","latitude","fov"]),Gu={x:Vu.offset.x,y:Vu.offset.y,z:Vu.offset.z,distance:Vu.distance,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Uu,Lu).catch(Qe$1),this.locationMotion.set(Gu,Lu).then(function(){Nu.emit("initAnimationEnded",Bu,Vu,Nu.userAction)},function(zu){var Hu=na(Nu.camera.pose);Nu.emit("initAnimationEnded",Bu,Hu,Nu.userAction)})}},$u.prototype.getZoomOffsetFromFov=function(Bu,Ru,Lu){var Ou=new r$3.Vector3(0,-1,0),Fu=Math.tan(Lu/2*Math.PI/180),Nu=Math.tan(Ru.fov/2*Math.PI/180),Vu=(Nu-Fu)/Nu,Uu=new r$3.Raycaster;Uu.setFromCamera(Bu,Ru);var Gu=Uu.ray.direction,zu=Gu.angleTo(Ou),Hu=Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect),ju=Hu*Math.tan(zu),Qu=Gu.clone().setLength(Hu*Math.cos(zu)).projectOnPlane(Ou),Xu=Qu.length(),Ku=Vu/Xu*Qu.x*ju,Wu=Vu/Xu*Qu.z*ju;return new r$3.Vector3(Ku,0,Wu)},$u.prototype.requestInteriaMovement=function(Bu,Ru){},$u.prototype.onPanGesture=function(Bu){var Ru=this.panState,Lu=Bu.pointers.length;if(Bu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Bu.center.x,y:Bu.center.y},Ru!==void 0&&Ru.pointerLength===Lu){var Ou=Bu.pointers.map(function(Ku){return ii(Ku,["x","y"])});if(!this.emit("wantsGesture","pan",Ou,Bu.isFinal)){var Fu=Bu.center.x-Ru.x,Nu=Bu.center.y-Ru.y,Vu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Uu=this.model.bounding,Gu=Uu.getCenter(new r$3.Vector3),zu=(Uu.max.x-Uu.min.x)/this.defaultFov*this.cameraMotion.value.fov,Hu=(Uu.max.y,Uu.min.y,this.defaultFov,this.cameraMotion.value.fov,(Uu.max.z-Uu.min.z)/this.defaultFov*this.cameraMotion.value.fov),ju=(this.camera.position.y-Uu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Qu=this.renderer.getSize(new r$3.Vector2);Vu.add(function(Ku,Wu){var qu=new r$3.Vector3;return qu.setFromMatrixColumn(Wu,0),qu.multiplyScalar(-Ku),qu}(2*Fu*ju/Qu.y,this.camera.matrix)),Vu.add(function(Ku,Wu,qu){var Yu=new r$3.Vector3;return Yu.setFromMatrixColumn(qu,0),Yu.crossVectors(Wu,Yu),Yu.multiplyScalar(Ku),Yu}(2*Nu*ju/Qu.y,this.camera.up,this.camera.matrix)),Vu.x=ho$1(Vu.x,Gu.x-zu,Gu.x+zu),Vu.z=ho$1(Vu.z,Gu.z-Hu,Gu.z+Hu),Vu.y=Gu.y;var Xu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Vu,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",Xu,Bu.isFinal)||(this.emit("gesture","pan",Ou,Bu.isFinal),this.emit("panGesture",Xu,Bu.isFinal),this.userAction=!0,this.locationMotion.set({x:Vu.x,y:Vu.y,z:Vu.z},0).catch(Qe$1))}}},$u.prototype.onPinchGesture=function(Bu){var Ru,Lu=(Ru=this.pinchState)===null||Ru===void 0?void 0:Ru.fov,Ou=!1;if(Bu.type!=="pinchstart"){if(Bu.type==="pinchend"&&(Ou=!0,delete this.pinchState),Lu!==void 0){var Fu=Bu.pointers.map(function(zu){return ii(zu,["x","y"])});if(!this.emit("wantsGesture","pinch",Fu,Ou)){var Nu=ho$1(Lu/Bu.scale,this.minFov,this.maxFov),Vu=this.relativeClientPosition({x:Bu.center.x,y:Bu.center.y}),Uu=this.getZoomOffsetFromFov(Vu,this.camera,Nu),Gu=this.camera.pose.offset.clone().add(Uu);this.emit("wantsPinchGesture",Bu.scale,Nu,Ou)||this.emit("wantsChangeCameraFov",Nu)||(this.emit("gesture","pinch",Fu,Ou),this.emit("pinchGesture",Bu.scale,Nu,Ou),this.userAction=!0,this.locationMotion.set({x:Gu.x,y:Gu.y,z:Gu.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Nu},0).catch(Qe$1),this.onPanGesture(Bu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Bu){var Ru=this,Lu=(Math.abs(Bu.deltaY)>Math.abs(Bu.deltaX)?Bu.deltaY:Bu.deltaX)/-60,Ou=[{x:Bu.clientX,y:Bu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ou,!1)){var Fu=ho$1(this.cameraMotion.value.fov-Lu,this.minFov,this.maxFov),Nu=this.relativeClientPosition({x:Bu.clientX,y:Bu.clientY}),Vu=this.getZoomOffsetFromFov(Nu,this.camera,Fu),Uu=this.camera.pose.offset.clone().add(Vu);this.emit("wantsMouseWheel",Lu,Fu,!1)||this.emit("wantsChangeCameraFov",Fu)||(this.emit("gesture","mouseWheel",Ou,!1),this.emit("mouseWheel",Lu,Fu,!1),this.userAction=!0,this.locationMotion.set({x:Uu.x,y:Uu.y,z:Uu.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Fu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ru.mouseWheelState,Ru.emit("wantsGesture","mouseWheel",Ou,!0)||Ru.emit("wantsMouseWheel",Lu,Fu,!0)||Ru.emit("wantsChangeCameraFov",Fu)||(Ru.emit("gesture","mouseWheel",Ou,!0),Ru.emit("mouseWheel",0,Fu,!0))},200)})}},$u}(Aa);function ma(_u,$u){$u===void 0&&($u=!1);var Bu=typeof _u;if(Bu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Ru="[",Lu=_u.length-1,Ou=0;Ou<Lu;Ou++)Ru+=ma(_u[Ou],!1)+",";return Lu>-1&&(Ru+=ma(_u[Ou],!1)),Ru+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return ma(_u.toJSON(),$u);var Fu=Object.keys(_u).sort(),Nu=Fu.length;for(Ru="",Ou=0;Ou<Nu;){var Vu=Fu[Ou],Uu=ma(_u[Vu],!0);Uu!==void 0&&(Ou&&Ru!==""&&(Ru+=","),Ru+=JSON.stringify(Vu)+":"+Uu),Ou++}return"{"+Ru+"}"}switch(Bu){case"function":case"undefined":return $u?void 0:null;case"number":return _u;default:return isFinite(_u)?_u:null}}function va(_u){return Te$1(String(ma(_u,!1)))}var ya,ba$1=function(_u){function $u(Bu){var Ru=this,Lu=$u.parseArgs(Bu);return(Ru=_u.call(this,Lu)||this).defaultLongitude=Lu.defaultLongitude,Ru.defaultLatitude=Lu.defaultLongitude,Ru.defaultFov=Lu.defaultFov,Ru.maxFov=Lu.maxFov,Ru.minFov=Lu.minFov,Ru.maxLatitude=Lu.maxLatitude,Ru.minLatitude=Lu.minLatitude,Ru.moveSpeed=Lu.moveSpeed,Ru.intersectMeshCreator=Lu.intersectMeshCreator,Ru.interiaMovement=!1,Ru.intersectMesh=Ru.intersectMeshCreator(),Ru.intersectMesh.name="intersect",Ru.intersectMesh.visible=!1,Ru.helper.add(Ru.intersectMesh),Ru}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){var Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu=_u.parseArgs.call(this,Bu);return t$3.__assign(t$3.__assign({},Hu),{defaultLongitude:(Ru=Bu.defaultLongitude)!==null&&Ru!==void 0?Ru:0,defaultLatitude:(Lu=Bu.defaultLatitude)!==null&&Lu!==void 0?Lu:0,defaultFov:(Ou=Bu.defaultFov)!==null&&Ou!==void 0?Ou:90,maxFov:(Fu=Bu.maxFov)!==null&&Fu!==void 0?Fu:120,minFov:(Nu=Bu.minFov)!==null&&Nu!==void 0?Nu:40,maxLatitude:(Vu=Bu.maxLatitude)!==null&&Vu!==void 0?Vu:+Math.PI/2,minLatitude:(Uu=Bu.minLatitude)!==null&&Uu!==void 0?Uu:-Math.PI/2,moveSpeed:(Gu=Bu.moveSpeed)!==null&&Gu!==void 0?Gu:3.2,intersectMeshCreator:(zu=Bu.intersectMeshCreator)!==null&&zu!==void 0?zu:function(){return new Fs$1}})},$u.initAnimationEndPose=function(Bu){var Ru,Lu,Ou,Fu=this.parseArgs(Bu),Nu=Bu.initial,Vu=Nu[0],Uu=Nu[1];return{longitude:(Ru=Uu.longitude)!==null&&Ru!==void 0?Ru:Fu.defaultLongitude,latitude:ho$1((Lu=Uu.latitude)!==null&&Lu!==void 0?Lu:Fu.defaultLatitude,Fu.minLatitude,Fu.maxLatitude),fov:ho$1((Ou=Uu.fov)!==null&&Ou!==void 0?Ou:Fu.defaultFov,Fu.minFov,Fu.maxFov),offset:Fu.work.observers[Vu].position.clone(),distance:0}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},$u.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&_u.prototype.isReady.call(this)},$u.prototype.calculateMovingDuration=function(Bu,Ru){switch(typeof Bu){case"function":return Bu(Ru,this.moveSpeed);case"number":return Bu;case"string":return Number(Bu);default:return ho$1(Ru,1,3)/this.moveSpeed*1e3}},$u.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},$u.prototype.coordinatesForOffset=function(Bu){var Ru=this.cameraMotion.value.fov,Lu=this.camera.aspect,Ou=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Bu.x/(Ou.x*this.scissor.width)*Ru/95*Lu,latitude:-2*Bu.y/(Ou.y*this.scissor.height)*Ru/95}},$u.prototype.cameraBounce=function(){var Bu=this.cameraMotion.value,Ru=Bu.longitude,Lu=Bu.latitude,Ou=Bu.fov,Fu=[{progress:0,value:{longitude:Ru,latitude:Lu,fov:Ou}},{progress:.5,value:{longitude:Ru,latitude:Lu,fov:.98*Ou}},{progress:1,value:{longitude:Ru,latitude:Lu,fov:Ou}}];this.cameraMotion.setKeyframes(Fu,500).catch(Qe$1)},$u.prototype.requestInteriaMovement=function(Bu,Ru){var Lu=this;if(this.interiaMovement!==!1){for(var Ou=t$3.__assign({},Bu),Fu={longitude:0,latitude:0},Nu=0;Nu<Ru;Nu++)Ou.longitude*=.996,Ou.latitude*=.98604,Fu.longitude+=Ou.longitude,Fu.latitude+=Ou.latitude;var Vu=Gs$1(this.cameraMotion.value.longitude+Fu.longitude),Uu=ho$1(this.cameraMotion.value.latitude+Fu.latitude,this.minLatitude,this.maxLatitude),Gu={longitude:Vu,latitude:Uu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Vu,latitude:Uu},0).catch(Qe$1);var zu=Ou.longitude>1e-4||Ou.longitude<-1e-4||Ou.latitude>1e-4||Ou.latitude<-1e-4;this.emit("interiaPan",Gu,!zu),zu?at.shared.add(function(Hu,ju){Lu.requestInteriaMovement(Ou,0|ju)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Bu){var Ru=this.panState,Lu=Bu.pointers.length;if(Bu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Bu.center.x,y:Bu.center.y},Ru!==void 0&&Ru.pointerLength===Lu){var Ou=Bu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","pan",Ou,Bu.isFinal)){var Fu={x:Bu.center.x-Ru.x,y:Bu.center.y-Ru.y},Nu=this.coordinatesForOffset(Fu),Vu=Gs$1(this.cameraMotion.value.longitude+Nu.longitude),Uu=ho$1(this.cameraMotion.value.latitude+Nu.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Bu.overallVelocityX)>.2&&Math.atan2(Math.abs(Bu.overallVelocityY),Math.abs(Bu.overallVelocityX))<Math.PI/6.923&&(Uu=this.cameraMotion.value.latitude);var Gu={longitude:Vu,latitude:Uu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Gu,Bu.isFinal)){this.emit("gesture","pan",Ou,Bu.isFinal),this.emit("panGesture",Gu,Bu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var zu={longitude:Gu.longitude,latitude:Gu.latitude,fov:Gu.fov};if(this.cameraMotion.set(zu,0).catch(Qe$1),Bu.isFinal&&!this.emit("wantsInteriaPan",Gu)){this.interiaMovement=!0;var Hu=Bu.velocityX,ju=.6*Bu.velocityY;Math.abs(ju)>.5&&Math.abs(Hu)<.5&&(Hu=0),this.requestInteriaMovement(this.coordinatesForOffset({x:Hu,y:ju}),0)}}}}},$u.prototype.onPinchGesture=function(Bu){var Ru,Lu=(Ru=this.pinchState)===null||Ru===void 0?void 0:Ru.fov,Ou=Bu.scale,Fu=!1;if(Bu.type!=="pinchstart"){if(Bu.type==="pinchend"&&(Fu=!0,delete this.pinchState),Lu!==void 0){var Nu=Bu.pointers.map(function(Uu){return ii(Uu,["x","y"])});if(!this.emit("wantsGesture","pinch",Nu,Fu)){var Vu=ho$1(Lu/Ou,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Ou,Vu,Fu)||this.emit("wantsChangeCameraFov",Vu)||(this.emit("gesture","pinch",Nu,Fu),this.emit("pinchGesture",Ou,Vu,Fu),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Vu},0).catch(Qe$1),this.onPanGesture(Bu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Bu){var Ru=this,Lu=(Math.abs(Bu.deltaY)>Math.abs(Bu.deltaX)?Bu.deltaY:Bu.deltaX)/-60,Ou=[{x:Bu.clientX,y:Bu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ou,!1)){var Fu=ho$1(this.cameraMotion.value.fov-Lu,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Lu,Fu,!1)||this.emit("wantsChangeCameraFov",Fu)||(this.emit("gesture","mouseWheel",Ou,!1),this.emit("mouseWheel",Lu,Fu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Fu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ru.mouseWheelState,Ru.emit("wantsGesture","mouseWheel",Ou,!0)||Ru.emit("wantsMouseWheel",Lu,Fu,!0)||Ru.emit("wantsChangeCameraFov",Fu)||(Ru.emit("gesture","mouseWheel",Ou,!0),Ru.emit("mouseWheel",0,Fu,!0))},200)})}},$u.prototype.onMouseMove=function(Bu){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Ru=this.relativeClientPosition({x:Bu.clientX,y:Bu.clientY}),Lu=new r$3.Raycaster;if(Lu.setFromCamera(Ru,this.camera),this.emit("wantsShowIntersectionOnModel",Lu))this.hideIntersectMesh();else{var Ou=this.model.intersectRaycaster(Lu)[0];if(Ou&&Ou.face){var Fu=Ou.face.normal,Nu=Fu.clone().multiplyScalar(.05),Vu=Ou.point.clone().add(Nu);this.intersectMesh.position.copy(Vu);var Uu=Vu.clone().add(Nu);if(this.intersectMesh.lookAt(Uu),Math.abs(Fu.y)>.99){var Gu=this.camera.position.clone().sub(Vu);this.intersectMesh.rotation.z=-Math.atan2(Gu.z,Gu.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Ou,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:Bu.clientX,clientY:Bu.clientY}}}},$u.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},$u.prototype.onPressGesture=function(Bu,Ru){var Lu,Ou,Fu=[Bu];if(this.emit("wantsGesture","press",Fu,Ru))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;var Nu=this.relativeClientPosition(Bu),Vu=new r$3.Raycaster;if(Vu.setFromCamera(Nu,this.camera),this.emit("wantsPressGesture",Vu,Nu,Bu.delta,Ru))return(Ou=this.pressState)===null||Ou===void 0||Ou.stop(),void delete this.pressState;this.emit("gesture","press",Fu,Ru),this.emit("pressGesture",Vu,Nu,Bu.delta,Ru)},$u}(fa$1);function xa(){return ya||(ya=new Promise(function(_u){var $u,Bu=document.createElement("video");Bu.muted=!0,Bu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Bu.addEventListener("timeupdate",function Ru(){Bu.removeEventListener("timeupdate",Ru,!1),clearTimeout($u);var Lu=document.createElement("canvas");Lu.width=Lu.height=1;var Ou=Lu.getContext("2d");Ou?(Ou.drawImage(Bu,0,0,1,1),Ou.getImageData(0,0,1,1).data[3]>10?_u(!0):_u(!1)):_u(!1)},!1),Bu.addEventListener("canplay",function Ru(){Bu.removeEventListener("canplay",Ru,!1),Bu.play()},!1),$u=window.setTimeout(function(){return _u(!1)},1e3)}))}var wa,Ea=function(_u){function $u(Bu,Ru){return Ru===void 0&&(Ru=.5),_u.call(this,Bu,{uniforms:{inputBuffer:new r$3.Uniform(null),scale:new r$3.Uniform(Ru)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$3.__extends($u,_u),$u}(ha$1),Ma$1=function(_u){function $u(Bu,Ru){Ru===void 0&&(Ru=.002);var Lu=_u.call(this,Bu,{uniforms:{targetBuffer:new r$3.Uniform(null),inputBuffer:new r$3.Uniform(null),step:new r$3.Uniform(Ru)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Lu.material.extensions.shaderTextureLOD=!0,Lu}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(Bu){this.material.uniforms.targetBuffer.value=Bu},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(Bu){this.material.uniforms.step.value=Bu},enumerable:!1,configurable:!0}),$u}(ha$1),Ia=function(_u){function $u(Bu){var Ru=_u.call(this,Bu,{uniforms:{inputBuffer:new r$3.Uniform(null),luminanceAdaptiveBuffer:new r$3.Uniform(null),progress:new r$3.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Ru.material.transparent=!0,Ru}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(Bu){this.material.uniforms.luminanceAdaptiveBuffer.value=Bu},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(Bu){this.material.uniforms.progress.value=Bu},enumerable:!1,configurable:!0}),$u}(ha$1),Sa$1=function(_u){function $u(Bu){var Ru=_u.call(this,Bu)||this;return Ru.enableTime=_e(),Ru.renderer=Bu,Ru.valuePass=new ca$1(Ru.renderer),Ru.luminancePass=new Ea(Ru.renderer,Math.sqrt(1/3)),Ru.nextStepPass=new Ma$1(Ru.renderer,.01),Ru.luminanceAdaptivePass=new Ia(Ru.renderer),Ru}return t$3.__extends($u,_u),$u.prototype.render=function(Bu,Ru){if(!this.enable)return this.enableTime=null,void this.copyPass.render(Bu);this.enableTime===null&&(this.enableTime=_e()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$3.WebGLRenderTarget(128,128,{minFilter:r$3.LinearMipmapLinearFilter,magFilter:r$3.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$3.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(Bu,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((_e()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(Bu,Ru)},$u.prototype.dispose=function(){var Bu,Ru,Lu;(Bu=this.luminanceTargetBuffer)===null||Bu===void 0||Bu.dispose(),(Ru=this.luminancePrevBuffer)===null||Ru===void 0||Ru.dispose(),(Lu=this.luminanceNextBuffer)===null||Lu===void 0||Lu.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},$u}(pa),Ca=["up","down","left","right","front","back"],Ba$1=(wa=Math.SQRT1_2)!==null&&wa!==void 0?wa:Math.sqrt(2),Ta$1={up:new r$3.Quaternion(Ba$1,0,0,Ba$1),down:new r$3.Quaternion(-Ba$1,0,0,Ba$1),left:new r$3.Quaternion(0,Ba$1,0,Ba$1),right:new r$3.Quaternion(0,-Ba$1,0,Ba$1),front:new r$3.Quaternion(0,0,0,1),back:new r$3.Quaternion(0,1,0,0)},Pa=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI),Ra$1=new r$3.PerspectiveCamera,ka$1=new r$3.Frustum,Da$1=new r$3.Matrix4,La$1=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Oa$1=new Float32Array([0,0,1,0,0,1,1,1]),Na$1=new Uint8Array([0,1,2,1,3,2]),Fa$1=new r$3.BufferGeometry;Fa$1.setAttribute("position",new r$3.BufferAttribute(La$1,3)),Fa$1.setAttribute("uv",new r$3.BufferAttribute(Oa$1,2)),Fa$1.setIndex(new r$3.BufferAttribute(Na$1,1));var Qa$1=function(_u){function $u(){var Bu=_u.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return Bu.depthTest=!1,Bu.depthWrite=!1,Bu.blending=r$3.NoBlending,Bu.map=Bu.uniforms.map.value,Bu.luminanceMap=Bu.uniforms.luminanceMap.value,Object.defineProperties(Bu,{map:{get:function(){return this.uniforms.map.value},set:function(Ru){this.uniforms.map.value=Ru}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Ru){this.uniforms.luminanceMap.value=Ru,this.defines.USE_LUMINANCE=Ru!==null,this.needsUpdate=!0}}}),Bu}return t$3.__extends($u,_u),$u}(r$3.ShaderMaterial),Va$1=function(_u){function $u(){var Bu=_u!==null&&_u.apply(this,arguments)||this;return Bu.level=0,Bu.sideCount=0,Bu.col=0,Bu.row=0,Bu.index=0,Bu.type="up",Bu}return t$3.__extends($u,_u),$u}(r$3.Box3),_a$2=function(_u){function $u(Bu,Ru){var Lu=this,Ou=new Qa$1;return Ou.visible=!1,(Lu=_u.call(this,Fa$1,Ou)||this).position.copy(Bu.getCenter(new r$3.Vector3)),Lu.quaternion.copy(Ta$1[Bu.type]),Lu.scale.setScalar(1/Math.pow(2,Bu.level)),Lu.name="tile-box",Lu.level=Bu.level,Lu.activeTime=-1,Lu.disposed=!1,Lu.needsRender=!1,Lu.frustumCulled=!1,Ru.then(function(Fu){var Nu=Fu[0],Vu=Fu[1];Lu.disposed?(Nu.dispose(),Vu==null||Vu.dispose()):(Lu.material.map=Nu,Lu.material.luminanceMap=Vu,Lu.material.needsUpdate=!0,Lu.material.visible=!0,Lu.needsRender=!0)}).catch(Qe$1),Lu}return t$3.__extends($u,_u),$u.getBox=function(Bu,Ru,Lu){var Ou=new Va$1,Fu=Math.pow(2,Bu),Nu=1/Fu,Vu=Lu%Fu,Uu=Math.floor(Lu/Fu);switch(Ou.level=Bu,Ou.index=Lu,Ou.sideCount=Fu,Ou.row=Uu,Ou.col=Vu,Ou.type=Ru,Ru){case"up":Ou.min.y=.5,Ou.max.y=.5,Ou.min.x=+Vu*Nu-.5,Ou.max.x=+Vu*Nu-.5+Nu,Ou.min.z=-Uu*Nu+.5-Nu,Ou.max.z=-Uu*Nu+.5;break;case"down":Ou.min.y=-.5,Ou.max.y=-.5,Ou.min.x=+Vu*Nu-.5,Ou.max.x=+Vu*Nu-.5+Nu,Ou.min.z=+Uu*Nu-.5,Ou.max.z=+Uu*Nu-.5+Nu;break;case"left":Ou.min.x=-.5,Ou.max.x=-.5,Ou.min.z=-Vu*Nu+.5-Nu,Ou.max.z=-Vu*Nu+.5,Ou.min.y=-Uu*Nu+.5-Nu,Ou.max.y=-Uu*Nu+.5;break;case"right":Ou.min.x=.5,Ou.max.x=.5,Ou.min.z=+Vu*Nu-.5,Ou.max.z=+Vu*Nu-.5+Nu,Ou.min.y=-Uu*Nu+.5-Nu,Ou.max.y=-Uu*Nu+.5;break;case"front":Ou.min.z=-.5,Ou.max.z=-.5,Ou.min.x=+Vu*Nu-.5,Ou.max.x=+Vu*Nu-.5+Nu,Ou.min.y=-Uu*Nu+.5-Nu,Ou.max.y=-Uu*Nu+.5;break;case"back":Ou.min.z=.5,Ou.max.z=.5,Ou.min.x=-Vu*Nu+.5-Nu,Ou.max.x=-Vu*Nu+.5,Ou.min.y=-Uu*Nu+.5-Nu,Ou.max.y=-Uu*Nu+.5}return Ou},$u.prototype.updateTime=function(Bu){},$u.prototype.dispose=function(){var Bu;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(Bu=this.material.luminanceMap)===null||Bu===void 0||Bu.dispose()),this.material.dispose()},$u}(r$3.Mesh),Ha$1=function(_u){function $u(){var Bu=_u.call(this)||this;return Bu.needsRender=!1,Bu.name="tiling",Bu}return t$3.__extends($u,_u),$u}(r$3.Group),qa$1=function(){function _u($u,Bu){this.disposed=!1,this.textureLoader=new Ii($u),this.level=0,this.panoIndex=0,this.pedding=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=Bu,this.object=new Ha$1}return _u.prototype.setAllowHosts=function($u){this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.textureLoader.setNetworkSubscribe($u)},_u.prototype.cleanup=function(){for(var $u=0;$u<this.tiles.length;$u++)if(this.tiles[$u]){var Bu=this.tiles[$u],Ru="level-group:"+$u,Lu=this.object.getObjectByName(Ru);for(var Ou in Bu){var Fu=Bu[Ou];Fu.dispose(),Lu.remove(Fu),delete Bu[Ou],this.object.needsRender=!0}}},_u.prototype.setRotation=function($u){if(!this.disposed){var Bu=new r$3.Quaternion().multiplyQuaternions($u,Pa);this.object.quaternion.equals(Bu)||(this.object.quaternion.copy(Bu),this.object.needsRender=!0)}},_u.prototype.setPosition=function($u){this.disposed||this.object.position.equals($u)||(this.object.position.copy($u),this.object.needsRender=!0)},_u.prototype.setResource=function($u){if(!this.disposed&&this.resource!==$u){this.cleanup(),this.resource=$u;for(var Bu=0;Bu<$u.length;Bu++){var Ru=$u[Bu].level;this.tiles[Ru]={};var Lu="level-group:"+Ru,Ou=this.object.getObjectByName(Lu);Ou||((Ou=new r$3.Group).name=Lu,Ou.renderOrder=-2),this.object.add(Ou)}this.object.needsRender=!0}},_u.prototype.setLuminance=function($u){this.luminance=$u},_u.prototype.getTileResources=function($u){for(var Bu,Ru=(Bu=this.imageOptions.size)!==null&&Bu!==void 0?Bu:2048,Lu=[],Ou=this.resource.length-1;Ou>=0;Ou--)this.resource[Ou].level<=$u&&512*Math.pow(2,this.resource[Ou].level)>Ru&&Lu.unshift(this.resource[Ou]);return Lu},_u.prototype.update=function($u,Bu,Ru){var Lu=this;if(!this.disposed){this.level=Bu;var Ou=Ra$1.copy($u);Ou.position.set(0,0,0),Ou.quaternion.premultiply(this.object.quaternion.clone().inverse()),Ou.updateMatrixWorld(!0),Ou.updateProjectionMatrix();for(var Fu=Ou.getWorldDirection(new r$3.Vector3),Nu=ka$1.setFromProjectionMatrix(Da$1.multiplyMatrices(Ou.projectionMatrix,Ou.matrixWorldInverse)),Vu=this.getTileResources(Bu),Uu=function(Ku){if(Ku){for(var Wu=[],qu=Ku.level,Yu=Math.pow(2,qu),Zu=Yu*Yu,_h=Gu.object.getObjectByName("level-group:"+qu),ep=0,ip=Ca;ep<ip.length;ep++)for(var ap=ip[ep],sp=0;sp<Zu;sp++){var Ju=_a$2.getBox(qu,ap,sp);Nu.intersectsBox(Ju)&&Wu.push(Ju)}var _f=new r$3.Vector3;Wu.sort(function(hp,vp){return hp.getCenter(_f).angleTo(Fu)-vp.getCenter(_f).angleTo(Fu)});for(var np=[],tp=0,rp=Wu;tp<rp.length;tp++){var op=(Ju=rp[tp]).sideCount,lp=Ju.row,up=Ju.col,cp=(ap=Ju.type,"tile-level:".concat(qu,"-face:").concat(ap,"-row:").concat(lp,"-col:").concat(up));if(!Gu.tiles[qu][cp]){var Ap=Ku[ap],yp=Ku.size,Ip=yp/op,Ep=[Ip*up,Ip*lp,Ip,Ip],Vp=t$3.__assign({key:"pano_tile.".concat(Gu.panoIndex,".").concat(ap,".").concat(qu,".").concat(lp,".").concat(up),basisLoaderInitialized:Ei$1.isInitialized(),cut:Ep},ii(Gu.imageOptions,["format","mappings"]));qu<=1&&(Vp.format==="jpg"||/\.jpg$/.test(Ap))?(Ip!==1024&&(Vp.size=1024),Vp.quality=70):Ip!==512&&(Vp.size=512);var $p=Gu.imageOptions.transform?Gu.imageOptions.transform(Ap,Vp):ct$1(Ap,Vp),kp=Gu.textureLoader.load($p,{preInit:!0}).then(function(hp){return hp.body}),Bp=null;if(Gu.luminance){var fp=Gu.luminance[ap],dp=fp.match(/\/cube_(\d+)\//),bp=!!dp&&Number(dp[1]);if(bp!==!1){var gp=yp/bp,wp=t$3.__assign(t$3.__assign({},Vp),{size:256,cut:[Ep[0]/gp,Ep[1]/gp,Ep[2]/gp,Ep[3]/gp],key:"pano_tile_luminance.".concat(Gu.panoIndex,".").concat(ap,".").concat(qu,".").concat(lp,".").concat(up)}),Sp=Gu.imageOptions.transform?Gu.imageOptions.transform(fp,wp):ct$1(fp,wp);Bp=Gu.textureLoader.load(Sp,{format:r$3.LuminanceFormat,preInit:!0}).then(function(hp){return hp.body}).catch(function(){return null})}}Gu.pedding++;var Cp=Promise.all([kp,Bp]).then(function(hp){return Lu.pedding--,hp},function(hp){return Lu.pedding--,Promise.reject(hp)});(Dp=Gu.tiles[qu][cp]=new _a$2(Ju,Cp)).name=cp,Dp.renderOrder=qu,_h.add(Dp)}Gu.tiles[qu][cp].activeTime=Ru,np.push(cp)}for(var Lp=0,zp=Object.keys(Gu.tiles[qu]).sort(function(hp,vp){return Lu.tiles[qu][vp].activeTime-Lu.tiles[qu][hp].activeTime}).slice(Math.max(24,np.length));Lp<zp.length;Lp++){cp=zp[Lp];var Dp=Gu.tiles[qu][cp];_h.remove(Dp),Dp.dispose(),delete Gu.tiles[qu][cp],Gu.object.needsRender=!0}}},Gu=this,zu=0,Hu=Vu;zu<Hu.length;zu++)Uu(Hu[zu]);for(var ju=0;ju<this.tiles.length;ju++)if(this.tiles[ju]){var Qu=Vu.length>0&&ju<=Vu[Vu.length-1].level;for(var Xu in this.tiles[ju])this.tiles[ju][Xu].visible!==Qu&&(this.tiles[ju][Xu].visible=Qu,this.tiles[ju][Xu].needsRender=!0),this.tiles[ju][Xu].updateTime(Ru)}}},_u.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},_u}(),za$1=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Ka$1=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),Ua$1=new r$3.BufferGeometry;Ua$1.setAttribute("position",new r$3.BufferAttribute(za$1,3)),Ua$1.setIndex(new r$3.BufferAttribute(Ka$1,1));var ja$1=function(){function _u(){this.material=new r$3.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$3.Uniform(null),matrix:new r$3.Uniform(null),alpha:new r$3.Uniform(null),map:new r$3.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor}),this.object=new r$3.Mesh(Ua$1,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new Ro$1({alpha:0})}return _u.prototype.setMaterial=function($u){$u?(this.material.uniforms.size.value=$u.size,this.material.uniforms.matrix.value=$u.matrix,this.material.uniforms.map.value=$u.map,this.alphaMotion.set({alpha:$u.alpha},500).catch(Qe$1),this.material.uniforms.alpha.value=$u.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Qe$1));var Bu=$u!==null;Bu!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=Bu,this.material.needsUpdate=!0,this.object.visible=$u!==null)},_u.prototype.updateTime=function($u){this.alphaMotion.ended||(this.alphaMotion.update($u),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},_u.prototype.dispose=function(){this.material.dispose()},_u}(),Ga$1=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Wa$1=new r$3.Vector3(-1,1,1),Xa$1=function(_u){function $u(Bu){var Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu=this,zu=$u.parseArgs(Bu);(Gu=_u.call(this,zu)||this).initAnimationed=!1,Gu.currentPanoIndex=zu.initial[0],Gu.maxAccessibleDistance=zu.maxAccessibleDistance,Gu.panoTapTriggerRadius=zu.panoTapTriggerRadius,Gu.panoCircleMeshCreator=zu.panoCircleMeshCreator,Gu.tileLevelForFov=zu.tileLevelForFov;var Hu=Gu.model.getMaterial()||{},ju=Hu.pano0,Qu=Hu.pano1;ju&&(Qu==null?void 0:Qu.map)!==ju.map&&(Gu.model.setMaterial({pano0:Qu}),ju.map.dispose(),(Ru=ju.luminanceMap)===null||Ru===void 0||Ru.dispose()),Gu.boundingMesh=Gu.generateBoundingMesh(),Gu.boundingMesh.setMaterial(Gu.model.getMaterial()||{}),Gu.boundingMesh.visible=!1,Gu.scene.add(Gu.boundingMesh),Gu.panoMeshes=[],Gu.updatePanoMeshes(),Gu.locationMotion=new Ro$1({count:0,distance:Gu.camera.pose.distance,modelAlpha:(Ou=(Lu=Gu.model.getMaterial())===null||Lu===void 0?void 0:Lu.modelAlpha)!==null&&Ou!==void 0?Ou:0,perspToOrtho:(Nu=(Fu=Gu.model.getMaterial())===null||Fu===void 0?void 0:Fu.perspToOrtho)!==null&&Nu!==void 0?Nu:0}),Gu.panoResources={},Gu.panoResources[Gu.locationMotion.keyframes[0].key=Gu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Gu.currentPanoIndex,workCode:Gu.work.workCode,panoPicture:(Uu=(Vu=Gu.model.getMaterial())===null||Vu===void 0?void 0:Vu.pano1)!==null&&Uu!==void 0?Uu:null,position:Gu.camera.pose.offset.clone(),effect:"fly"};var Xu={allowHosts:Gu.work.allowHosts,requestProxy:Gu.requestProxy,networkSubscribe:Gu.networkSubscribe};return Gu.textureLoader=new Ii(Xu),Gu.tiling=new qa$1(Xu,Gu.imageOptions),Gu.scene.add(Gu.tiling.object),Gu.panoVideo=new ja$1,Gu.scene.add(Gu.panoVideo.object),Gu}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){var Ru,Lu,Ou,Fu,Nu=_u.parseArgs.call(this,Bu);return t$3.__assign(t$3.__assign({},Nu),{maxAccessibleDistance:(Ru=Bu.maxAccessibleDistance)!==null&&Ru!==void 0?Ru:5,panoTapTriggerRadius:(Lu=Bu.panoTapTriggerRadius)!==null&&Lu!==void 0?Lu:.5,panoCircleMeshCreator:(Ou=Bu.panoCircleMeshCreator)!==null&&Ou!==void 0?Ou:function(){return new as$1},tileLevelForFov:(Fu=Bu.tileLevelForFov)!==null&&Fu!==void 0?Fu:function(Vu,Uu){var Gu=2*Math.atan(Math.tan(Vu/180*Math.PI/2)*(Uu.width/Uu.height))/Math.PI*180,zu=Math.max(Uu.width/Gu,Uu.height/Vu);return zu>80?4:zu>48?3:zu>24?2:zu>12?1:0}})},$u.initAnimationEndPose=function(Bu){var Ru=this.parseArgs(Bu);return _u.initAnimationEndPose.call(this,Ru)},$u.prototype.destroy=function(){var Bu,Ru,Lu=this;_u.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Qu){Lu.helper.remove(Qu),Qu.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Ou=this.videoTexture.image;Ou.pause(),Ou.oncanplay=function(){},Ou.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Fu=(Bu=this.model.getMaterial())!==null&&Bu!==void 0?Bu:{},Nu=Fu.pano0,Vu=Fu.pano1,Uu=0,Gu=Object.keys(this.panoResources);Uu<Gu.length;Uu++){var zu=Gu[Uu],Hu=this.panoResources[zu];if(Hu.panoPicture){var ju=Hu.panoPicture.map;ju&&ju!==(Nu==null?void 0:Nu.map)&&ju!==(Vu==null?void 0:Vu.map)&&(ju.dispose(),(Ru=Hu.panoPicture.luminanceMap)===null||Ru===void 0||Ru.dispose(),Hu.panoPicture=null)}delete this.panoResources[zu]}},$u.prototype.isReady=function(){return this.locationMotion.ended===!0&&_u.prototype.isReady.call(this)},$u.prototype.isTileReady=function(){return this.initAnimationed&&this.tiling.pedding<=0},$u.prototype.updateWork=function(Bu,Ru,Lu,Ou,Fu){var Nu=this;this.userAction=Fu,this.work=Bu,this.currentPanoIndex=Ru,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Vu={},Uu=!0;this.boundingMesh&&(Vu=this.boundingMesh.getMaterial()||{},Uu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Uu,this.boundingMesh.setMaterial(Vu),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Gu=0,zu=this.panoMeshes;Gu<zu.length;Gu++)zu[Gu].visible=!1;return this.moveToPano(Ru,{effect:"fade",duration:Ou,longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov,moveEndCallback:function(){Nu.initAnimationed=!0},moveCancelCallback:function(){Nu.initAnimationed=!0}},Fu),!0},$u.prototype.updateModel=function(Bu){this.model=Bu;var Ru={},Lu=!0;this.boundingMesh&&(Ru=this.boundingMesh.getMaterial()||{},Lu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Lu,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Ru),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},$u.prototype.updateTime=function(Bu,Ru){for(var Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu=[],Hu=2;Hu<arguments.length;Hu++)zu[Hu-2]=arguments[Hu];if(!this.destroyed){var ju={},Qu={},Xu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Ku=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Wu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Bu);var qu=this.locationMotion.getKeyFrameSegment(Bu),Yu=qu[0],Zu=qu[1],_h=this.panoResourceFromLocationMotionKeyframe(Yu),ep=this.panoResourceFromLocationMotionKeyframe(Zu),ip=new r$3.Vector3().copy(_h.position),ap=new r$3.Vector3().copy(ep.position),sp=this.locationMotion.value.count-Zu.value.count+1;ju.progress=sp,ju.modelAlpha=this.locationMotion.value.modelAlpha,ju.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),ep.panoPicture&&(sp<1?_h.panoPicture&&(ju.pano0=_h.panoPicture):ju.pano0=ep.panoPicture,ju.pano1=ep.panoPicture),Wu=ju.useBlackTransition=ep.effect==="instant"||ep.effect==="montage",ep.effect!=="fade"&&ep.effect!=="montage"||(ju.pano0&&_h.panoPicture&&(ju.pano0={map:ju.pano0.map,luminanceMap:ju.pano0.luminanceMap,matrix:_h.panoPicture.matrix.clone().setPosition(ep.position)}),ip.copy(ap)),Qu.distance=this.locationMotion.value.distance,Qu.offset=new r$3.Vector3(ip.x+(ap.x-ip.x)*sp,ip.y+(ap.y-ip.y)*sp,ip.z+(ap.z-ip.z)*sp);for(var Ju=[],_f=[],np=0,tp=this.locationMotion.keyframes;np<tp.length;np++){var rp=tp[np],op=rp.key,lp=rp.progress;op!==void 0&&(Ju.push(op),lp>=this.locationMotion.progress&&_f.push(op))}for(var up=0,cp=Object.keys(this.panoResources);up<cp.length;up++){var Ap=cp[up];if(!(_f.indexOf(Ap)>=0)){var yp=this.panoResources[Ap];if(yp.panoPicture){var Ip=yp.panoPicture.map;if(Ip){if(Ip===((Lu=ju.pano0)===null||Lu===void 0?void 0:Lu.map)||Ip===((Ou=ju.pano1)===null||Ou===void 0?void 0:Ou.map))continue;Ip.dispose(),(Fu=yp.panoPicture.luminanceMap)===null||Fu===void 0||Fu.dispose(),yp.panoPicture=null}}Ju.indexOf(Ap)>=0||delete this.panoResources[Ap]}}_h.workCode===ep.workCode?this.currentPanoIndex=sp<.5?_h.panoIndex:ep.panoIndex:this.currentPanoIndex=ep.panoIndex,this.emit("movingToPano",Ku.panoIndex,Xu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Bu),Qu.longitude=this.cameraMotion.value.longitude,Qu.latitude=this.cameraMotion.value.latitude,Qu.fov=this.cameraMotion.value.fov),ia$1(ju)===!1&&(this.model.setMaterial(ju),this.boundingMesh.setMaterial(ju)),ia$1(Qu)===!1&&this.setCamera(Qu),this.camera.pose.distance>.1)for(var Ep=0;Ep<this.work.observers.length;Ep++)(Bp=this.panoMeshes[Ep])&&(Bp.visible=!1);else{var Vp=this.work.observers[this.currentPanoIndex];if(Vp){var $p=Vp.visibleNodes.concat(this.currentPanoIndex),kp=this.getForwardPanoIndexOrNot();for(Ep=0;Ep<this.work.observers.length;Ep++){var Bp,fp=this.work.observers[Ep];if(Bp=this.panoMeshes[Ep])if(fp.loadable||fp.active)if($p.indexOf(Ep)!==-1)if(Wu)Bp.visible=!1,Bp.setOpacity(0);else{Bp.visible=!0;var dp=Bp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Bp.setCurrent(kp===Ep),Bp.setOpacity(dp<.01?0:ho$1(1.4/dp,.5,.7)),Bp.updateTime&&Bp.updateTime(Bu,Ru)}else Bp.visible=!1,Bp.setOpacity(0);else Bp.visible=!1,Bp.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Nu=this.boundingMesh.getMaterial())===null||Nu===void 0?void 0:Nu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var bp=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var gp=Ku.panoIndex,wp=this.work.observers[gp];if(wp)if(_s$1(this.camera.position,wp.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Vu=wp.images.luminance)!==null&&Vu!==void 0?Vu:null),this.tiling.panoIndex!==gp&&this.tiling.cleanup(),this.tiling.panoIndex=gp,this.tiling.setResource((Gu=(Uu=wp.images)===null||Uu===void 0?void 0:Uu.tiles)!==null&&Gu!==void 0?Gu:[]),this.tiling.setRotation(wp.quaternion),this.tiling.setPosition(wp.position);var Sp=this.renderer.getDrawingBufferSize(new r$3.Vector2);Sp.width*=this.scissor.width,Sp.height*=this.scissor.height;var Cp=this.imageOptions.size;if(Cp===void 0&&wp){var Lp=wp.images.up.match(/\/cube_(\d+)\//);Lp&&(Cp=Number(Lp[1]))}Cp===void 0&&(Cp=2048);var zp=0;Cp>=1024&&(zp=1),Cp>=2048&&(zp=2),Cp>=4096&&(zp=3),Cp>=8192&&(zp=4);var Dp=this.tileLevelForFov(this.camera.fov,Sp),hp=Dp>zp?Dp:0;this.tiling.update(this.camera,hp,Bu)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;bp!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(Bu)}},$u.prototype.render=function(){var Bu=this.work.observers[this.currentPanoIndex];Bu&&Bu.video&&(this.needsRender=!0),_u.prototype.render.call(this)},$u.prototype.postProcessing=function(Bu,Ru){if(!this.destroyed)return this.effect||(this.effect=new Sa$1(this.renderer)),this.effect.render(Bu,Ru)},$u.prototype.getTargetPose=function(){var Bu=this.cameraMotion.getKeyFrameSegment(_e())[1],Ru=this.locationMotion.getKeyFrameSegment(_e())[1],Lu=this.panoResourceFromLocationMotionKeyframe(Ru),Ou=this.work.observers[Lu.panoIndex];return{longitude:Bu.value.longitude,latitude:Bu.value.latitude,fov:Bu.value.fov,offset:Ou?Ou.position.clone():this.camera.position.clone(),distance:this.locationMotion.value.distance}},$u.prototype.moveToPano=function(Bu,Ru,Lu){var Ou,Fu,Nu,Vu=this,Uu=this.work.observers[Bu],Gu=t$3.__assign({key:"pano.".concat(Bu),basisLoaderInitialized:Ei$1.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),zu=(Ou=this.imageOptions.transform)!==null&&Ou!==void 0?Ou:ct$1,Hu={right:zu(Uu.images.right,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".right")})),left:zu(Uu.images.left,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".left")})),up:zu(Uu.images.up,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".up")})),down:zu(Uu.images.down,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".down")})),front:zu(Uu.images.front,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".front")})),back:zu(Uu.images.back,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".back")}))},ju={key:"pano_luminance.".concat(Bu),basisLoaderInitialized:Ei$1.isInitialized(),size:Gu.size?Gu.size/2:1024},Qu=this.enableIOSEDR&&Uu.images.luminance?{right:zu(Uu.images.luminance.right,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".right")})),left:zu(Uu.images.luminance.left,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".left")})),up:zu(Uu.images.luminance.up,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".up")})),down:zu(Uu.images.luminance.down,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".down")})),front:zu(Uu.images.luminance.front,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".front")})),back:zu(Uu.images.luminance.back,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".back")}))}:null,Xu="pano:"+va(Hu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Xu)return;var Ku=this.pendingTextureTask.panoIndex;(Fu=this.panoMeshes[Ku])===null||Fu===void 0||Fu.setProgress(0),this.emit("textureAbort",Ku,Uu),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Wu,qu=this.model.getMaterial()||{},Yu=qu.pano0,Zu=qu.pano1;if(Yu&&Yu.map.name===Xu&&Yu.luminanceMap!==null===this.enableIOSEDR?Wu=Yu:(Zu==null?void 0:Zu.map.name)===Xu&&Zu.luminanceMap!==null===this.enableIOSEDR&&(Wu=Zu),Wu){var _h={panoIndex:Bu,workCode:this.work.workCode,effect:(Nu=Ru.effect)!==null&&Nu!==void 0?Nu:"fly",panoPicture:{map:Wu.map,luminanceMap:Wu.luminanceMap,matrix:new r$3.Matrix4().compose(Uu.position,Uu.quaternion,Wa$1)},position:Uu.position.clone()};at.shared.add(function(){Vu.pending=!1,Vu.emit("panoLoaded",Bu),Vu.doMoveToPano(Bu,_h,Ru,Lu)},!0,1)}else{this.pendingTextureTask={panoIndex:Bu,hash:Xu,onLoad:function(ip,ap){var sp,Ju;if(Vu.pending=!1,Vu.destroyed)ip.body.dispose();else{ip.body.name=Xu,Vu.emit("panoLoaded",Bu);var _f={panoIndex:Bu,workCode:Vu.work.workCode,effect:(sp=Ru.effect)!==null&&sp!==void 0?sp:"fly",panoPicture:{map:ip.body,luminanceMap:(Ju=ap==null?void 0:ap.body)!==null&&Ju!==void 0?Ju:null,matrix:new r$3.Matrix4().compose(Uu.position,Uu.quaternion,Wa$1)},position:Uu.position.clone()};Vu.doMoveToPano(Bu,_f,Ru,Lu)}},onError:function(ip){Vu.pending=!1,Ru.moveCancelCallback&&Ru.moveCancelCallback(),Vu.emit("panoLoadError",ip,Bu),Vu.emit("moveToPanoCanceled",Bu)}};var ep=this.panoMeshes[Bu];ep&&ep.tap&&ep.tap(),Promise.all([this.textureLoader.loadCube(Hu,{format:r$3.RGBFormat,viaAjax:!0},void 0,void 0,function(ip){var ap,sp;Vu.emit("textureLoading",ip,Bu,Uu),((ap=Vu.pendingTextureTask)===null||ap===void 0?void 0:ap.hash)===Xu&&((sp=Vu.panoMeshes[Bu])===null||sp===void 0||sp.setProgress(ip))},this.renderer),Qu?this.textureLoader.loadCube(Qu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(ip){var ap,sp,Ju=ip[0],_f=ip[1];((ap=Vu.pendingTextureTask)===null||ap===void 0?void 0:ap.hash)===Xu?(Vu.pendingTextureTask.onLoad(Ju,_f),(sp=Vu.panoMeshes[Bu])===null||sp===void 0||sp.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureLoaded",Bu,Uu,Ju.meta)):(Ju.body.dispose(),_f==null||_f.body.dispose())}).catch(function(ip){var ap,sp;((ap=Vu.pendingTextureTask)===null||ap===void 0?void 0:ap.hash)===Xu&&(Vu.pendingTextureTask.onError(ip),(sp=Vu.panoMeshes[Bu])===null||sp===void 0||sp.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureError",ip,Bu,Uu),Vu.emit("error",ip))}),this.emit("textureStartLoad",Bu,Uu)}},$u.prototype.initAnimation=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu=this;if(!this.destroyed){var Gu=!1;this.pending=!1,this.userAction=Ou,this.moveToPano(Bu,{longitude:(Fu=Ru.longitude)!==null&&Fu!==void 0?Fu:this.defaultLongitude,latitude:ho$1((Nu=Ru.latitude)!==null&&Nu!==void 0?Nu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Vu=Ru.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),duration:Lu,moveStartCallback:function(zu,Hu){Gu=!0,Uu.emit("initAnimationWillStart",zu,Hu,Uu.userAction)},moveEndCallback:function(zu,Hu){Uu.emit("initAnimationEnded",zu,Hu,Uu.userAction),Uu.initAnimationed=!0},moveCancelCallback:function(){var zu={longitude:Uu.camera.pose.longitude,latitude:Uu.camera.pose.latitude,fov:Uu.camera.pose.fov,offset:Uu.camera.pose.offset.clone(),distance:Uu.camera.pose.distance};Gu===!1&&Uu.emit("initAnimationWillStart",Uu.currentPanoIndex,zu,Uu.userAction),Uu.emit("initAnimationEnded",Uu.currentPanoIndex,zu,Uu.userAction),Uu.initAnimationed=!0}},Ou)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Bu){return this.panoResources[Bu.key]},$u.prototype.locationMotionKeyframesLength=function(Bu){for(var Ru=0,Lu=1;Lu<Bu.length;Lu++){var Ou=this.panoResourceFromLocationMotionKeyframe(Bu[Lu-1]).position,Fu=this.panoResourceFromLocationMotionKeyframe(Bu[Lu]).position;Ru+=Ou.distanceTo(Fu)*(Bu[Lu].value.count-Bu[Lu-1].value.count)}return Ru},$u.prototype.updatePanoMeshes=function(Bu){Bu===void 0&&(Bu=!0);for(var Ru={},Lu=0,Ou=this.panoMeshes;Lu<Ou.length;Lu++)Ru[(Uu=Ou[Lu]).name]=Uu;this.panoMeshes.length=0;for(var Fu=0;Fu<this.work.observers.length;Fu++){var Nu="panoCircle_".concat(this.work.workCode,"_").concat(Fu),Vu=this.work.observers[Fu],Uu=void 0;if(Ru[Nu]?((Uu=Ru[Nu]).loading===!0&&Vu.loadable===!1&&Uu.setLoading(!1),delete Ru[Nu]):((Uu=this.panoCircleMeshCreator()).name=Nu,this.helper.add(Uu)),Uu.position.copy(Vu.standingPosition),Bu&&this.model.loaded&&this.model.bvhs.loaded){var Gu=new r$3.Vector3(0,-1,0),zu=new r$3.Vector3(0,.1,0).add(Uu.position),Hu=new r$3.Raycaster(zu,Gu,0,.2),ju=this.model.intersectRaycaster(Hu)[0];ju&&ju.point.distanceTo(zu)<.1&&Uu.position.copy(ju.point)}this.panoMeshes[Fu]=Uu}for(var Qu=0,Xu=Object.keys(Ru);Qu<Xu.length;Qu++){var Ku=Xu[Qu];this.helper.remove(Ru[Ku]),Ru[Ku].dispose(),delete Ru[Ku]}},$u.prototype.generateBoundingMesh=function(Bu){Bu===void 0&&(Bu=!1);for(var Ru=this.model.bounding.clone(),Lu=0,Ou=this.work.observers;Lu<Ou.length;Lu++){var Fu=Ou[Lu];Ru.expandByPoint(Fu.standingPosition),Ru.expandByPoint(new r$3.Vector3().fromArray([Fu.position.x,2*Fu.position.y-Fu.standingPosition.y,Fu.position.z]))}Bu&&Ru.expandByPoint(this.camera.position);var Nu=Ks$1(Ru,new r$3.Vector3(1,0,1));return Nu.name="panorama_bounding",Nu},$u.prototype.doMoveToPano=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu=this;Lu===void 0&&(Lu={}),this.userAction=Ou;var Gu=_e(),zu=Kr();this.tiling.cleanup(),this.panoResources[zu]=Ru;var Hu,ju,Qu;if(this.locationMotion.ended){var Xu=this.locationMotion.getKeyFrameSegment(Gu);Xu[0];var Ku=Xu[1],Wu=this.locationMotion.value,qu=this.panoResourceFromLocationMotionKeyframe(Ku).position,Yu=Ru.position;Hu=Math.max(qu.distanceTo(Yu),1),ju=[{key:Ku.key,progress:0,value:t$3.__assign(t$3.__assign({},Wu),{count:0})},{key:zu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Qu=0}else{var Zu=this.locationMotion.getKeyFrameSegment(Gu),_h=Zu[0],ep=(Ku=Zu[1],Wu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(_h).position),ip=(qu=this.panoResourceFromLocationMotionKeyframe(Ku).position,Yu=Ru.position,Ku.value.count-Wu.count),ap=Math.max(ep.distanceTo(qu),1)*ip;Hu=ap+Math.max(qu.distanceTo(Yu),1),ju=[{key:_h.key,progress:0,value:t$3.__assign({},Wu)},{key:Ku.key,progress:ap/Hu,value:Ku.value},{key:zu,progress:1,value:{count:Ku.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var sp=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ju=this.locationMotionKeyframesLength(ju);Qu=sp===0||sp===0?0:this.locationMotion.getProgressVelocity(Gu)*sp/Ju}var _f=this.calculateMovingDuration(Lu.duration,Lu.effect==="fade"||Lu.effect==="montage"?0:Hu),np={longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},tp={longitude:(Fu=np.longitude)!==null&&Fu!==void 0?Fu:this.camera.pose.longitude,latitude:(Nu=np.latitude)!==null&&Nu!==void 0?Nu:this.camera.pose.latitude,fov:(Vu=np.fov)!==null&&Vu!==void 0?Vu:this.camera.pose.fov,offset:Ru.position.clone(),distance:this.camera.pose.distance};Lu.moveStartCallback&&Lu.moveStartCallback(Bu,tp),this.emit("panoWillArrive",Bu,tp,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(np,_f).catch(Qe$1),this.locationMotion.setKeyframes(ju,_f,Qu).then(function(){var rp,op,lp,up={longitude:Uu.camera.pose.longitude,latitude:Uu.camera.pose.latitude,fov:Uu.camera.pose.fov,offset:Uu.camera.pose.offset.clone(),distance:Uu.camera.pose.distance};Lu.moveEndCallback&&Lu.moveEndCallback(Bu,up),Uu.emit("panoArrived",Bu,up,Ou);var cp=Uu.work.observers[Uu.currentPanoIndex];if(cp&&cp.video&&Uu.videoTexture&&Uu.videoTexture.image instanceof HTMLVideoElement){var Ap=Ga$1.clone().multiply((lp=(op=(rp=Uu.model.getMaterial())===null||rp===void 0?void 0:rp.pano1)===null||op===void 0?void 0:op.matrix)!==null&&lp!==void 0?lp:new r$3.Matrix4).multiply(cp.video.matrix),yp={map:Uu.videoTexture,size:cp.video.size,matrix:Ap,alpha:1},Ip=Kr(),Ep=Uu.videoTexture.image;Ep.setAttribute("uuid",Ip),xa().then(function(Vp){Vp&&cp.video&&Ep.getAttribute("uuid")===Ip&&(Ep.oncanplay=function(){Ep.oncanplay=Qe$1,Ep.play()},Ep.ontimeupdate=function(){Ep.currentTime>.5&&(Ep.ontimeupdate=Qe$1,Uu.panoVideo.setMaterial(yp))},Ep.src=cp.video.source)}).catch(function(){Ep.removeAttribute("uuid")})}},function(){Lu.moveCancelCallback&&Lu.moveCancelCallback(),Uu.emit("moveToPanoCanceled",Bu)})},$u.prototype.getForwardPanoIndexOrNot=function(Bu){var Ru=this,Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return null;var Ou=Bu!=null?Bu:new r$3.Raycaster(this.camera.position.clone(),this.camera.getWorldDirection(new r$3.Vector3)),Fu=Ou.ray.origin.clone(),Nu=new r$3.Vector3,Vu=this.model.intersectRaycaster(new r$3.Raycaster(Ou.ray.origin,new r$3.Vector3(0,-1,0)))[0];Vu&&Vu.distance<=2?Nu.copy(Vu.point):Nu.copy(Ou.ray.origin).add(new r$3.Vector3(0,-1.5,0));var Uu=this.model.intersectRaycaster(Ou)[0],Gu=(Uu?Uu.point:Ou.ray.origin.clone().add(Ou.ray.direction.clone().normalize().multiplyScalar(3))).clone().sub(Nu).normalize();if(Gu.length()===0)return null;for(var zu=Lu.accessibleNodes.filter(function(Yu){if(Yu===Ru.currentPanoIndex)return!1;var Zu=Ru.work.observers[Yu],_h=Zu.standingPosition.clone().sub(Fu);return _h.length()!==0&&!(_h.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(Zu.loadable||Zu.active)}).slice().sort(function(Yu,Zu){return Ru.work.observers[Yu].standingPosition.clone().distanceTo(Nu)-Ru.work.observers[Zu].standingPosition.clone().distanceTo(Nu)}),Hu=0,ju=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Hu<ju.length;Hu++)for(var Qu=ju[Hu],Xu=0,Ku=zu;Xu<Ku.length;Xu++){var Wu=Ku[Xu],qu=this.work.observers[Wu].standingPosition.clone().sub(Nu);if(qu.length()!==0&&Gu.angleTo(qu)<Qu)return Wu}return null},$u.prototype.onTapGesture=function(Bu){var Ru=this,Lu=Bu.pointers.map(function(np){return ii(np,["x","y"])});if(!this.emit("wantsGesture","tap",Lu,!0)){var Ou=this.relativeClientPosition(Bu.center),Fu=new r$3.Raycaster;if(Fu.setFromCamera(Ou,this.camera),!this.emit("wantsTapGesture",Fu,Ou,!0)){this.emit("gesture","tap",Lu,!0),this.emit("tapGesture",Fu,Ou,!0),this.interiaMovement=!1;var Nu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Vu=null,Uu=this.work.observers[this.currentPanoIndex];if(Uu){var Gu=Uu.accessibleNodes.filter(function(np){if(np===Ru.currentPanoIndex)return!1;var tp=Ru.work.observers[np];return!(tp.position.distanceTo(Ru.camera.position)>Ru.maxAccessibleDistance)&&(tp.loadable||tp.active)}),zu=this.model.intersectRaycaster(Fu)[0];if(zu){var Hu=ta(Gu,function(np){var tp=Ru.work.observers[np].standingPosition.clone();return tp.clone().sub(Ru.camera.position).setY(0).angleTo(Nu)>Math.PI/2?1/0:tp.distanceTo(zu.point)},!0),ju=Hu[0];Hu[1]<this.panoTapTriggerRadius&&(Vu=ju)}oo$1(Vu)&&(Vu=this.getForwardPanoIndexOrNot(Fu));for(var Qu=0,Xu=this.locationMotion.keyframes;Qu<Xu.length;Qu++){var Ku=Xu[Qu],Wu=this.panoResourceFromLocationMotionKeyframe(Ku);if(!(Ku.progress<this.locationMotion.progress)&&Wu.panoIndex===Vu){Vu=null;break}}if(this.emit("panoSelected",Vu),oo$1(Vu))this.locationMotion.ended===!0&&this.cameraBounce();else{var qu=this.work.observers[Vu];if(qu.active){for(var Yu={},Zu=Math.PI/6,_h=Math.PI/12,ep=qu.position.clone().setY(0).sub(Uu.position.clone().setY(0)).normalize(),ip=[],ap=0,sp=qu.accessibleNodes;ap<sp.length;ap++)if((ju=sp[ap])!==this.currentPanoIndex&&ju!==Vu){var Ju=this.work.observers[ju].position.clone().sub(qu.position).setY(0);ep.angleTo(Ju)<Zu&&ip.push(Ju)}var _f=(ip.length>0?ip:t$3.__spreadArray(t$3.__spreadArray([],[],!0),[],!0)).slice().sort(function(np,tp){return np.angleTo(ep)-tp.angleTo(ep)})[0];_f&&_f.angleTo(Nu)>_h&&(Yu.longitude=Math.atan2(-_f.x,-_f.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Yu.latitude=ho$1(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Yu.fov=this.defaultFov),this.emit("wantsMoveToPano",Vu,Yu,!0)}else this.panoMeshes[Vu]&&(this.panoMeshes[Vu].setDisabled(!1),this.panoMeshes[Vu].setLoading(!0))}}}}},$u}(ba$1),Ya$1=Math.PI/180,Za$1=180/Math.PI,Ja$1=function(){var _u=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return _u}}(),$a$1=function(){var _u=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return _u}}(),el$1=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return _u}}(),tl$1=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,$u=_u?parseInt(_u[1],10):null;return function(){return $u}}(),il$1=function(){var _u=!1;if(tl$1()===65){var $u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if($u){var Bu=$u[1].split(".");Bu[0],Bu[1];var Ru=Bu[2],Lu=Bu[3];_u=parseInt(Ru,10)===3325&&parseInt(Lu,10)<148}}return function(){return _u}}(),nl$1=function(){var _u=Ja$1()&&$a$1()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return _u}}(),rl$1=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return _u}}();function ol$1(){var _u=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return rl$1()?!_u:_u}var sl$1,al$1=(sl$1={},function(_u,$u){sl$1[_u]===void 0&&(console.warn("cardboard: "+$u),sl$1[_u]=!0)});function ll$1(_u){var $u,Bu=_u.indexOf("://");$u=Bu!==-1?Bu+3:0;var Ru=_u.indexOf("/",$u);return Ru===-1&&(Ru=_u.length),_u.substring(0,Ru)}var ul$1,hl$1=function(_u,$u,Bu){(function(Ru,Lu,Ou){var Fu=Lu?Lu[0]:0,Nu=Lu?Lu[1]:0,Vu=Lu?Lu[2]:0,Uu=Lu?Lu[3]:1,Gu=Fu+Fu,zu=Nu+Nu,Hu=Vu+Vu,ju=Fu*Gu,Qu=Fu*zu,Xu=Fu*Hu,Ku=Nu*zu,Wu=Nu*Hu,qu=Vu*Hu,Yu=Uu*Gu,Zu=Uu*zu,_h=Uu*Hu;Ru[0]=1-(Ku+qu),Ru[1]=Qu+_h,Ru[2]=Xu-Zu,Ru[3]=0,Ru[4]=Qu-_h,Ru[5]=1-(ju+qu),Ru[6]=Wu+Yu,Ru[7]=0,Ru[8]=Xu+Zu,Ru[9]=Wu-Yu,Ru[10]=1-(ju+Ku),Ru[11]=0,Ru[12]=Ou?Ou[0]:0,Ru[13]=Ou?Ou[1]:0,Ru[14]=Ou?Ou[2]:0,Ru[15]=1})(_u,$u),Bu&&function(Ru,Lu,Ou){var Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu,qu=Ou[0],Yu=Ou[1],Zu=Ou[2];Lu===Ru?(Ru[12]=Lu[0]*qu+Lu[4]*Yu+Lu[8]*Zu+Lu[12],Ru[13]=Lu[1]*qu+Lu[5]*Yu+Lu[9]*Zu+Lu[13],Ru[14]=Lu[2]*qu+Lu[6]*Yu+Lu[10]*Zu+Lu[14],Ru[15]=Lu[3]*qu+Lu[7]*Yu+Lu[11]*Zu+Lu[15]):(Fu=Lu[0],Nu=Lu[1],Vu=Lu[2],Uu=Lu[3],Gu=Lu[4],zu=Lu[5],Hu=Lu[6],ju=Lu[7],Qu=Lu[8],Xu=Lu[9],Ku=Lu[10],Wu=Lu[11],Ru[0]=Fu,Ru[1]=Nu,Ru[2]=Vu,Ru[3]=Uu,Ru[4]=Gu,Ru[5]=zu,Ru[6]=Hu,Ru[7]=ju,Ru[8]=Qu,Ru[9]=Xu,Ru[10]=Ku,Ru[11]=Wu,Ru[12]=Fu*qu+Gu*Yu+Qu*Zu+Lu[12],Ru[13]=Nu*qu+zu*Yu+Xu*Zu+Lu[13],Ru[14]=Vu*qu+Hu*Yu+Ku*Zu+Lu[14],Ru[15]=Uu*qu+ju*Yu+Wu*Zu+Lu[15])}(_u,_u,Bu),function(Ru,Lu){var Ou=Lu[0],Fu=Lu[1],Nu=Lu[2],Vu=Lu[3],Uu=Lu[4],Gu=Lu[5],zu=Lu[6],Hu=Lu[7],ju=Lu[8],Qu=Lu[9],Xu=Lu[10],Ku=Lu[11],Wu=Lu[12],qu=Lu[13],Yu=Lu[14],Zu=Lu[15],_h=Ou*Gu-Fu*Uu,ep=Ou*zu-Nu*Uu,ip=Ou*Hu-Vu*Uu,ap=Fu*zu-Nu*Gu,sp=Fu*Hu-Vu*Gu,Ju=Nu*Hu-Vu*zu,_f=ju*qu-Qu*Wu,np=ju*Yu-Xu*Wu,tp=ju*Zu-Ku*Wu,rp=Qu*Yu-Xu*qu,op=Qu*Zu-Ku*qu,lp=Xu*Zu-Ku*Yu,up=_h*lp-ep*op+ip*rp+ap*tp-sp*np+Ju*_f;up&&(up=1/up,Ru[0]=(Gu*lp-zu*op+Hu*rp)*up,Ru[1]=(Nu*op-Fu*lp-Vu*rp)*up,Ru[2]=(qu*Ju-Yu*sp+Zu*ap)*up,Ru[3]=(Xu*sp-Qu*Ju-Ku*ap)*up,Ru[4]=(zu*tp-Uu*lp-Hu*np)*up,Ru[5]=(Ou*lp-Nu*tp+Vu*np)*up,Ru[6]=(Yu*ip-Wu*Ju-Zu*ep)*up,Ru[7]=(ju*Ju-Xu*ip+Ku*ep)*up,Ru[8]=(Uu*op-Gu*tp+Hu*_f)*up,Ru[9]=(Fu*tp-Ou*op-Vu*_f)*up,Ru[10]=(Wu*sp-qu*ip+Zu*_h)*up,Ru[11]=(Qu*ip-ju*sp-Ku*_h)*up,Ru[12]=(Gu*np-Uu*rp-zu*_f)*up,Ru[13]=(Ou*rp-Fu*np+Nu*_f)*up,Ru[14]=(qu*ep-Wu*ap-Yu*_h)*up,Ru[15]=(ju*ap-Qu*ep+Xu*_h)*up)}(_u,_u)},cl$1=function(){function _u($u,Bu){$u===void 0&&($u=new r$3.Vector3),Bu===void 0&&(Bu=0),this.sample=$u,this.timestampS=Bu}return _u.prototype.set=function($u,Bu){this.sample=$u,this.timestampS=Bu},_u.prototype.copy=function($u){this.set($u.sample,$u.timestampS)},_u}(),dl$1=function(){function _u($u,Bu){this.kFilter=$u,this.isDebug=Bu,this.currentAccelMeasurement=new cl$1,this.currentGyroMeasurement=new cl$1,this.previousGyroMeasurement=new cl$1,Ja$1()?this.filterQ=new r$3.Quaternion(-1,0,0,1):this.filterQ=new r$3.Quaternion(1,0,0,1),this.previousFilterQ=new r$3.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$3.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$3.Vector3,this.measuredGravity=new r$3.Vector3,this.gyroIntegralQ=new r$3.Quaternion}return _u.prototype.addAccelMeasurement=function($u,Bu){this.currentAccelMeasurement.set($u,Bu)},_u.prototype.addGyroMeasurement=function($u,Bu){this.currentGyroMeasurement.set($u,Bu);var Ru,Lu=Bu-this.previousGyroMeasurement.timestampS;Ru=Lu,isNaN(Ru)||Ru<=.001||Ru>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},_u.prototype.getOrientation=function(){return this.filterQ},_u.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var $u=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,Bu=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,$u);this.gyroIntegralQ.multiply(Bu),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(Bu);var Ru=new r$3.Quaternion;Ru.copy(this.filterQ),Ru.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Ru),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Lu,Ou=new r$3.Quaternion;Ou.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Ou.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Za$1*((Lu=Ou).w>1?0:2*Math.acos(Lu.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Fu=new r$3.Quaternion;Fu.copy(this.filterQ),Fu.multiply(Ou),this.filterQ.slerp(Fu,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},_u.prototype.accelToQuaternion_=function($u){var Bu=new r$3.Vector3;Bu.copy($u),Bu.normalize();var Ru=new r$3.Quaternion;return Ru.setFromUnitVectors(new r$3.Vector3(0,0,-1),Bu),Ru.inverse(),Ru},_u.prototype.gyroToQuaternionDelta_=function($u,Bu){var Ru=new r$3.Quaternion,Lu=new r$3.Vector3;return Lu.copy($u),Lu.normalize(),Ru.setFromAxisAngle(Lu,$u.length()*Bu),Ru},_u}(),pl$1=function(){function _u($u,Bu){this.predictionTimeS=$u,this.isDebug=Bu,this.previousQ=new r$3.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$3.Quaternion,this.outQ=new r$3.Quaternion}return _u.prototype.getPrediction=function($u,Bu,Ru){if(!this.previousTimestampS)return this.previousQ.copy($u),this.previousTimestampS=Ru,$u;var Lu=new r$3.Vector3;Lu.copy(Bu),Lu.normalize();var Ou=Bu.length();if(Ou<20*Ya$1)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Za$1*Ou).toFixed(1)),this.outQ.copy($u),this.previousQ.copy($u),this.outQ;var Fu=Ou*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Lu,Fu),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy($u),this.previousTimestampS=Ru,this.outQ},_u}(),fl$1=function(){function _u($u){this.coefficients=$u}return _u.prototype.distortInverse=function($u){for(var Bu=0,Ru=1,Lu=$u-this.distort(Bu);Math.abs(Ru-Bu)>1e-4;){var Ou=$u-this.distort(Ru),Fu=Ru-Ou*((Ru-Bu)/(Ou-Lu));Bu=Ru,Ru=Fu,Lu=Ou}return Ru},_u.prototype.distort=function($u){for(var Bu=$u*$u,Ru=0,Lu=0;Lu<this.coefficients.length;Lu++)Ru=Bu*(Ru+this.coefficients[Lu]);return(Ru+1)*$u},_u}(),Al$1=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},gl$1=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},ml$1=function(){function _u($u,Bu,Ru,Lu){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Ru,this.accelerometer=new r$3.Vector3,this.gyroscope=new r$3.Vector3,this.filter=new dl$1($u,Lu),this.posePredictor=new pl$1(Bu,Lu),this.isFirefoxAndroid=el$1(),this.isIOS=Ja$1();var Ou=tl$1();this.isDeviceMotionInRadians=!this.isIOS&&Ou!==null&&Ou<66,this.isWithoutDeviceMotion=il$1()||nl$1(),this.filterToWorldQ=new r$3.Quaternion,Ja$1()?this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$3.Quaternion,this.worldToScreenQ=new r$3.Quaternion,this.originalPoseAdjustQ=new r$3.Quaternion;var Fu=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Fu),this.setScreenTransform_(),ol$1()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$3.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return _u.prototype.getPosition=function(){return null},_u.prototype.getOrientation=function(){var $u;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Fu=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,0,-1),0),Nu=new r$3.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Nu.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/-2):Nu.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/2),Fu.multiply(Nu)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Ru=new r$3.Quaternion).setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),Ru),$u=this._deviceOrientationQ;var Bu=new r$3.Quaternion;return Bu.copy($u),Bu.multiply(this.deviceOrientationFilterToWorldQ),Bu.multiply(this.resetQ),Bu.multiply(this.worldToScreenQ),Bu.multiplyQuaternions(this.deviceOrientationFixQ,Bu),this.yawOnly&&(Bu.x=0,Bu.z=0,Bu.normalize()),this.orientationOut_[0]=Bu.x,this.orientationOut_[1]=Bu.y,this.orientationOut_[2]=Bu.z,this.orientationOut_[3]=Bu.w,this.orientationOut_}var Ru,Lu=this.filter.getOrientation();$u=this.posePredictor.getPrediction(Lu,this.gyroscope,this.previousTimestampS);var Ou=new r$3.Quaternion;return Ou.copy(this.filterToWorldQ),Ou.multiply(this.resetQ),Ou.multiply($u),Ou.multiply(this.worldToScreenQ),this.yawOnly&&(Ou.x=0,Ou.z=0,Ou.normalize()),this.orientationOut_[0]=Ou.x,this.orientationOut_[1]=Ou.y,this.orientationOut_[2]=Ou.z,this.orientationOut_[3]=Ou.w,this.orientationOut_},_u.prototype.getPose=function(){var $u=new Al$1;return $u.orientation=this.getOrientation(),$u},_u.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ol$1()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},_u.prototype.getFrameData=function($u){var Bu=this.getOrientation(),Ru=this.getEyeOffset(),Lu=this.getEyeProjectionMatrix();return $u.pose.angularAcceleration=null,$u.pose.angularVelocity=null,$u.pose.linearAcceleration=null,$u.pose.linearVelocity=null,$u.pose.orientation=Bu,$u.pose.position=null,$u.timestamp=this.previousTimestampS,$u.leftProjectionMatrix.set(Lu.left),$u.rightProjectionMatrix.set(Lu.right),hl$1($u.leftViewMatrix,Bu,Ru.left),hl$1($u.rightViewMatrix,Bu,Ru.right),$u},_u.prototype.start=function(){if(typeof window=="undefined")return function(){};var $u=this.onDeviceMotion_.bind(this),Bu=this.onOrientationChange_.bind(this),Ru=this.onMessage_.bind(this),Lu=this.onDeviceOrientation_.bind(this);return Ja$1()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Ou=window.self!==window.top,Fu=ll$1(document.referrer),Nu=ll$1(window.location.href);return Ou&&Fu!==Nu}()&&window.addEventListener("message",Ru),window.addEventListener("orientationchange",Bu),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Lu):window.addEventListener("devicemotion",$u),function(){window.removeEventListener("devicemotion",$u),window.removeEventListener("deviceorientation",Bu),window.removeEventListener("orientationchange",Bu),window.removeEventListener("message",Ru)}},_u.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},_u.prototype.getEyeProjectionMatrix=function(){var $u=this.getEyeFieldOfView(),Bu=this.depthNear,Ru=this.depthFar,Lu={left:[],right:[]},Ou=$u.left.upDegrees*Ya$1,Fu=$u.left.downDegrees*Ya$1,Nu=2/((Uu=$u.left.leftDegrees*Ya$1)+(Gu=$u.left.rightDegrees*Ya$1)),Vu=2/(Ou+Fu);Lu.left[0]=Nu,Lu.left[1]=0,Lu.left[2]=0,Lu.left[3]=0,Lu.left[4]=0,Lu.left[5]=Vu,Lu.left[6]=0,Lu.left[7]=0,Lu.left[8]=-(Uu-Gu)*Nu*.5,Lu.left[9]=(Ou-Fu)*Vu*.5,Lu.left[10]=Ru/(Bu-Ru),Lu.left[11]=-1,Lu.left[12]=0,Lu.left[13]=0,Lu.left[14]=Ru*Bu/(Bu-Ru),Lu.left[15]=0;var Uu,Gu;return Ou=$u.right.upDegrees*Ya$1,Fu=$u.right.downDegrees*Ya$1,Nu=2/((Uu=$u.right.leftDegrees*Ya$1)+(Gu=$u.right.rightDegrees*Ya$1)),Vu=2/(Ou+Fu),Lu.right[0]=Nu,Lu.right[1]=0,Lu.right[2]=0,Lu.right[3]=0,Lu.right[4]=0,Lu.right[5]=Vu,Lu.right[6]=0,Lu.right[7]=0,Lu.right[8]=-(Uu-Gu)*Nu*.5,Lu.right[9]=(Ou-Fu)*Vu*.5,Lu.right[10]=Ru/(Bu-Ru),Lu.right[11]=-1,Lu.right[12]=0,Lu.right[13]=0,Lu.right[14]=Ru*Bu/(Bu-Ru),Lu.right[15]=0,Lu},_u.prototype.getEyeFieldOfView=function(){var $u=this.viewer,Bu=this.device,Ru=new fl$1($u.distortionCoefficients),Lu=$u.screenLensDistance,Ou=(Bu.widthMeters-$u.interLensDistance)/2,Fu=$u.interLensDistance/2,Nu=$u.baselineLensDistance-Bu.bevelMeters,Vu=Bu.heightMeters-Nu,Uu=Za$1*Math.atan(Ru.distort(Ou/Lu)),Gu=Za$1*Math.atan(Ru.distort(Fu/Lu)),zu=Za$1*Math.atan(Ru.distort(Nu/Lu)),Hu=Za$1*Math.atan(Ru.distort(Vu/Lu)),ju=new gl$1,Qu=new gl$1;return ju.leftDegrees=Math.min(Uu,$u.fov),ju.rightDegrees=Math.min(Gu,$u.fov),ju.downDegrees=Math.min(zu,$u.fov),ju.upDegrees=Math.min(Hu,$u.fov),Qu.leftDegrees=ju.rightDegrees,Qu.rightDegrees=ju.leftDegrees,Qu.upDegrees=ju.upDegrees,Qu.downDegrees=ju.downDegrees,{left:ju,right:Qu}},_u.prototype.onDeviceOrientation_=function($u){this._deviceOrientationQ=this._deviceOrientationQ||new r$3.Quaternion;var Bu=$u.alpha,Ru=$u.beta,Lu=$u.gamma;Bu=(Bu||0)*Math.PI/180,Ru=(Ru||0)*Math.PI/180,Lu=(Lu||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$3.Euler(Bu,Ru,-Lu,"YXZ"))},_u.prototype.onDeviceMotion_=function($u){this.updateDeviceMotion_($u)},_u.prototype.updateDeviceMotion_=function($u){var Bu=$u.accelerationIncludingGravity,Ru=$u.rotationRate,Lu=$u.timeStamp/1e3,Ou=Lu-this.previousTimestampS;return Ou<0?(al$1("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Lu)):Ou<=.001||Ou>1?(al$1("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Lu)):(Bu&&(this.accelerometer.set(-Bu.x,-Bu.y,-Bu.z),Ru&&(rl$1()?this.gyroscope.set(-Ru.beta,Ru.alpha,Ru.gamma):this.gyroscope.set(Ru.alpha,Ru.beta,Ru.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Lu)),this.filter.addAccelMeasurement(this.accelerometer,Lu)),void(this.previousTimestampS=Lu))},_u.prototype.onOrientationChange_=function(){this.setScreenTransform_()},_u.prototype.onMessage_=function($u){var Bu=$u.data;Bu&&Bu.type&&Bu.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(Bu.deviceMotionEvent)},_u.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},_u}(),vl$1=[0,0,.5,1],yl$1=[.5,0,.5,1],bl$1=function(){function _u($u){var Bu=this;this.renderer=$u,this.sensor=new ml$1(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$3.PerspectiveCamera,this.cameraR=new r$3.PerspectiveCamera;var Ru=this.sensor.start();this.dispose=function(){var Lu=Bu.renderer.getSize(new r$3.Vector2);Bu.renderer.setScissor(0,0,Lu.width,Lu.height),Bu.renderer.setViewport(0,0,Lu.width,Lu.height),Bu.renderer.setScissorTest(!1),Ru()}}return _u.prototype.render=function($u,Bu){var Ru=this.renderer.getSize(new r$3.Vector2);if(Ru.width>Ru.height){var Lu=$u.autoUpdate;Lu&&($u.updateMatrixWorld(),$u.autoUpdate=!1);var Ou={x:Math.round(Ru.width*vl$1[0]),y:Math.round(Ru.height*vl$1[1]),width:Math.round(Ru.width*vl$1[2]),height:Math.round(Ru.height*vl$1[3])},Fu={x:Math.round(Ru.width*yl$1[0]),y:Math.round(Ru.height*yl$1[1]),width:Math.round(Ru.width*yl$1[2]),height:Math.round(Ru.height*yl$1[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),Bu.parent===null&&Bu.updateMatrixWorld(),Bu.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),Bu.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Nu=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$3.Vector3().fromArray(Nu.left),this.scale),this.cameraR.translateOnAxis(new r$3.Vector3().fromArray(Nu.right),this.scale);var Vu=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Vu.left.slice(),this.cameraR.projectionMatrix.elements=Vu.right.slice(),this.renderer.setViewport(Ou.x,Ou.y,Ou.width,Ou.height),this.renderer.setScissor(Ou.x,Ou.y,Ou.width,Ou.height),this.renderer.render($u,this.cameraL),this.renderer.setViewport(Fu.x,Fu.y,Fu.width,Fu.height),this.renderer.setScissor(Fu.x,Fu.y,Fu.width,Fu.height),this.renderer.render($u,this.cameraR),this.renderer.setViewport(0,0,Ru.width,Ru.height),this.renderer.setScissor(0,0,Ru.width,Ru.height),this.renderer.setScissorTest(!1),Lu&&($u.autoUpdate=!0)}else this.renderer.render($u,Bu)},_u.prototype.dispose=function(){},_u}(),xl$1={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},wl$1=typeof navigator!="undefined"&&(ul$1=xl$1[navigator.language.split("-")[0]])!==null&&ul$1!==void 0?ul$1:xl$1.zh,El$1=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(wl$1.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(wl$1.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function Ml$1(_u){for(var $u=1,Bu=document.getElementsByTagName("meta"),Ru=0;Ru<Bu.length;Ru++){var Lu=Bu[Ru];if(Lu.getAttribute("name")==="viewport"){var Ou=(Lu.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Ou&&($u=Number(Ou[1])),isNaN($u)&&($u=1)}}return El$1.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,_u).replace(/(\d+)px/g,function(Fu,Nu){return function(Vu){return Math.floor(Vu*$u)+"px"}(Number(Nu))})}var Il$1=new r$3.CircleBufferGeometry(.12,16),Sl$1=function(){var _u=yt(),$u=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Bu=256,Ru=document.createElement("canvas");Ru.setAttribute("width",String(Bu)),Ru.setAttribute("height",String(Bu));var Lu=Ru.getContext("2d");if(Lu){Lu.drawImage(_u,0,0,Bu,Bu),Lu.globalCompositeOperation="source-out";var Ou=128;Lu.beginPath(),Lu.lineWidth=6.4,Lu.arc(Ou,Ou,83.2,0,2*Math.PI),Lu.strokeStyle="rgba(255, 255, 255, 1.0)",Lu.closePath(),Lu.stroke(),$u.image=Ru,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cl$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Bu=256;return $u.beginPath(),$u.arc(Bu,Bu,192,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Bu,Bu,192,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Bl$1=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Bu=$u.getContext("2d");if(Bu){var Ru=256;Bu.arc(Ru,Ru,192,0,2*Math.PI),Bu.fillStyle="rgba(85, 90, 255, 0.6)",Bu.shadowBlur=25.6,Bu.shadowColor="rgba(255, 255, 255, 0.6)",Bu.fill(),Bu.arc(Ru,Ru,192,0,2*Math.PI);var Lu=Bu.createRadialGradient(Ru,Ru,0,Ru,Ru,Ru);Lu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.2)"),Bu.fillStyle=Lu,Bu.fill(),Bu.lineWidth=4.8,Bu.arc(Ru,Ru,187.2,0,2*Math.PI);var Ou=Bu.createLinearGradient(0,0,0,_u);return Ou.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ou.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Bu.strokeStyle=Ou,Bu.stroke(),new r$3.CanvasTexture($u)}}return null}(),Tl$1=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Bu=$u.getContext("2d");if(Bu){var Ru=256,Lu=179.2;Bu.arc(Ru,Ru,Lu,0,2*Math.PI),Bu.fillStyle="rgba(255, 255, 255, 0.4)",Bu.shadowBlur=25.6,Bu.shadowColor="rgba(255, 255, 255, 0.6)",Bu.fill(),Bu.arc(Ru,Ru,Lu,0,2*Math.PI);var Ou=Bu.createRadialGradient(Ru,Ru,0,Ru,Ru,Ru);Ou.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Bu.fillStyle=Ou,Bu.fill(),Bu.lineWidth=4.8,Bu.arc(Ru,Ru,Lu-4.8,0,2*Math.PI);var Fu=Bu.createLinearGradient(0,0,0,_u);return Fu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Fu.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Bu.strokeStyle=Fu,Bu.stroke(),new r$3.CanvasTexture($u)}}return null}(),Pl$1=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Bu=$u.getContext("2d");if(Bu){var Ru=256,Lu=217.6,Ou=64;Bu.lineWidth=Ou,Bu.arc(Ru,Ru,Lu,0,2*Math.PI),Bu.strokeStyle="rgba(147, 162, 255, 0.3)",Bu.shadowBlur=25.6,Bu.shadowColor="rgba(255, 255, 255, 0.6)",Bu.stroke(),Bu.lineWidth=Ou,Bu.arc(Ru,Ru,Lu,0,2*Math.PI);var Fu=Bu.createRadialGradient(Ru,Ru,185.6,Ru,Ru,249.6);Fu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Fu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Bu.strokeStyle=Fu,Bu.stroke(),Bu.beginPath(),Bu.lineWidth=4,Bu.arc(Ru,Ru,245.6,0,2*Math.PI);var Nu=Bu.createLinearGradient(0,0,_u,0);return Nu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Nu.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Bu.strokeStyle=Nu,Bu.stroke(),new r$3.CanvasTexture($u)}}return null}(),Rl$1=function(_u){function $u(){var Bu=_u.call(this)||this;Bu.progress=0,Bu.opacity=0,Bu.loading=!1,Bu.current=!1,Bu.disabled=!1,Bu.opacityMotion=new Ro$1({opacity:0}),Bu.loadingMotion=new Ro$1({opacity:0}),Bu.currentMotion=new Ro$1({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Ru={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return Bu.hitTestMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{color:0,opacity:0}))),Bu.hitTestMesh.scale.set(1.5,1.5,1.5),Bu.centerMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Bl$1,opacity:0}))),Bu.centerMesh2=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Tl$1,opacity:0}))),Bu.ringMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Pl$1,opacity:0}))),Bu.loadingMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Sl$1,opacity:.8}))),Bu.disableMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ru),{map:Cl$1}))),Bu.loadingMesh.visible=!1,Bu.disableMesh.visible=!1,Bu.hitTestMesh.position.z=0,Bu.ringMesh.position.z=.003,Bu.disableMesh.position.z=.002,Bu.centerMesh.position.z=.002,Bu.centerMesh2.position.z=.002,Bu.loadingMesh.position.z=.005,Bu.hitTestMesh.frustumCulled=!1,Bu.centerMesh.frustumCulled=!1,Bu.centerMesh2.frustumCulled=!1,Bu.ringMesh.frustumCulled=!1,Bu.loadingMesh.frustumCulled=!1,Bu.disableMesh.frustumCulled=!1,Bu.add(Bu.hitTestMesh),Bu.add(Bu.centerMesh),Bu.add(Bu.centerMesh2),Bu.add(Bu.ringMesh),Bu.add(Bu.loadingMesh),Bu.add(Bu.disableMesh),Bu.renderOrder=1e4,Bu.needsRender=!0,Bu}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Bu){this.progress=Bu,this.setLoading(Bu>0)},$u.prototype.setOpacity=function(Bu){this.opacity!==Bu&&(this.opacity=Bu=ho$1(Bu,0,1),this.opacityMotion.set({opacity:Bu},30).catch(Qe$1))},$u.prototype.setCurrent=function(Bu){if(this.current!==Bu){if(Bu){var Ru=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Ru,1500).catch(Qe$1)}else Ru=[{progress:0,value:t$3.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Ru,200).catch(Qe$1);this.current=Bu}},$u.prototype.setLoading=function(Bu){this.loading!==Bu&&(Bu?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=Bu,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},$u.prototype.setDisabled=function(Bu){this.disabled!==Bu&&(this.disabled=Bu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Bu,this.centerMesh.visible=!Bu,this.needsRender=!0)},$u.prototype.tap=function(){return Promise.resolve()},$u.prototype.updateTime=function(Bu,Ru){this.opacityMotion.update(Bu),this.currentMotion.update(Bu),this.loadingMotion.update(Bu);var Lu=this.opacityMotion.value.opacity,Ou=this.currentMotion.value,Fu=Ou.ringScale,Nu=Ou.ringOpacity,Vu=Ou.circleFade,Uu=Ou.circleOpacity,Gu=Ou.circleScale;if(this.ringMesh.scale.set(Fu,Fu,Fu),this.centerMesh.scale.set(Gu,Gu,Gu),this.centerMesh2.scale.set(Gu,Gu,Gu),this.ringMesh.material.opacity=Nu*Lu,this.centerMesh.material.opacity=(1-Vu)*Lu,this.centerMesh2.material.opacity=Vu*Uu*Lu,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Ru/200);var zu=this.opacityMotion.value.opacity,Hu=1.1;this.centerMesh.scale.set(Hu,Hu,Hu),this.centerMesh2.scale.set(Hu,Hu,Hu),this.centerMesh.material.opacity=0*zu,this.centerMesh2.material.opacity=.2*zu}else this.loadingMesh.visible=!1;this.needsRender=!0},$u.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},$u}(r$3.Object3D),kl$1=function(_u){function $u(Bu){var Ru=this,Lu=$u.parseArgs(Bu);(Ru=_u.call(this,Lu)||this).cardboard=new bl$1(Ru.renderer);var Ou,Fu,Nu,Vu=(Ou="five_vr_helper_"+Kr(),Fu=Ml$1(Ou),(Nu=document.createElement("div")).className=Ou,Nu.innerHTML=Fu,Nu);Ru.helperElement=Vu;var Uu=new ra(Vu);return Ru.element.parentNode&&(Ru.element.parentNode.insertBefore(Vu,Ru.element),Ru.setHelperElementSize(),Uu.on("tap",function(){return Ru.emit("vrWantsToExit")})),Ru.destroyHelper=function(){Uu.destroy(),Vu.parentNode&&Vu.parentNode.removeChild(Vu),delete Ru.helperElement},Ru.boundingMesh.visible=!0,Ru}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){var Ru=t$3.__assign(t$3.__assign({},Bu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Ru)},$u.initAnimationEndPose=function(Bu){var Ru=this.parseArgs(Bu);return _u.initAnimationEndPose.call(this,Ru)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var Bu=0,Ru=this.panoMeshes;Bu<Ru.length;Bu++){var Lu=Ru[Bu];this.helper.remove(Lu),Lu.dispose()}this.panoMeshes.length=0},$u.prototype.isReady=function(){return!1},$u.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},$u.prototype.updatePanoMeshes=function(){var Bu=this;this.panoMeshes.forEach(function(Fu){Bu.helper.remove(Fu),Fu.dispose()}),this.panoMeshes.length=0;for(var Ru=0;Ru<this.work.observers.length;Ru++){var Lu=this.work.observers[Ru],Ou=new Rl$1;Ou.name="panoSphere_".concat(this.work.workCode,"_").concat(Ru),Ou.position.copy(Lu.position),Ou.needsRender=!0,this.helper.add(Ou),this.panoMeshes[Ru]=Ou}},$u.prototype.updateTime=function(Bu,Ru){for(var Lu,Ou,Fu=[],Nu=2;Nu<arguments.length;Nu++)Fu[Nu-2]=arguments[Nu];if(!this.destroyed){this.needsRender=!0;var Vu={},Uu={};if(this.locationMotion.ended===!1){this.locationMotion.update(Bu);var Gu=this.locationMotion.getKeyFrameSegment(Bu),zu=Gu[0],Hu=Gu[1],ju=this.panoResourceFromLocationMotionKeyframe(zu),Qu=this.panoResourceFromLocationMotionKeyframe(Hu),Xu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Ku=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Wu=ju.position,qu=Qu.position,Yu=this.locationMotion.value.count-Hu.value.count+1;Vu.modelAlpha=this.locationMotion.value.modelAlpha,Vu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Vu.useBlackTransition=Qu.effect==="instant",Qu.panoPicture&&(Yu<1?ju.panoPicture&&(Vu.pano0=ju.panoPicture):Vu.pano0=Qu.panoPicture,Vu.pano1=Qu.panoPicture),Qu.effect==="fade"&&(Vu.pano0&&ju.panoPicture&&(Vu.pano0={map:Vu.pano0.map,luminanceMap:Vu.pano0.luminanceMap,matrix:ju.panoPicture.matrix.clone().setPosition(Qu.position)}),Wu.copy(qu)),Vu.progress=Yu,Uu.distance=this.locationMotion.value.distance,Uu.offset=new r$3.Vector3(Wu.x+(qu.x-Wu.x)*Yu,Wu.y+(qu.y-Wu.y)*Yu,Wu.z+(qu.z-Wu.z)*Yu);for(var Zu=[],_h=[],ep=0,ip=this.locationMotion.keyframes;ep<ip.length;ep++){var ap=ip[ep],sp=ap.key,Ju=ap.progress;sp!==void 0&&(Zu.push(sp),Ju>=this.locationMotion.progress&&_h.push(sp))}for(var _f=0,np=Object.keys(this.panoResources);_f<np.length;_f++){var tp=np[_f];if(!(_h.indexOf(tp)>=0)){var rp=this.panoResources[tp];if(rp.panoPicture){var op=rp.panoPicture.map;if(op){if(op===((Lu=Vu.pano0)===null||Lu===void 0?void 0:Lu.map)||op===((Ou=Vu.pano1)===null||Ou===void 0?void 0:Ou.map))continue;op.dispose(),rp.panoPicture=null}}Zu.indexOf(tp)>=0||delete this.panoResources[tp]}}this.currentPanoIndex=Yu<.5?ju.panoIndex:Qu.panoIndex,this.emit("movingToPano",Ku.panoIndex,Xu.panoIndex,this.locationMotion.progress)}ia$1(Vu)===!1&&(this.model.setMaterial(Vu),this.boundingMesh.setMaterial(Vu)),Uu.offset&&this.camera.position.copy(Uu.offset);var lp=this.camera.pose.longitude,up=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var cp=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),Ap=0;Ap<this.work.observers.length;Ap++){var yp=this.work.observers[Ap];if((Vp=this.panoMeshes[Ap]).visible=!0,yp.loadable||yp.active){if(cp.indexOf(Ap)===-1)Vp.visible=!1;else{Vp.visible=!0;var Ip=Vp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Ip<.05?Vp.setOpacity(0):Vp.setOpacity(ho$1(1.5/Ip,0,1)),this.currentPanoIndex===Ap&&Vp.setOpacity(0)}Vp.lookAt(this.camera.position)}else Vp.visible=!0}var Ep=this.intersect(Bu);for(Ap=0;Ap<this.work.observers.length;Ap++)(Vp=this.panoMeshes[Ap])==null||Vp.setCurrent(Vp===Ep);for(Ap=0;Ap<this.work.observers.length;Ap++){var Vp;(Vp=this.panoMeshes[Ap])&&Vp.updateTime&&Vp.updateTime(Bu,Ru)}lp===this.camera.pose.longitude&&up===this.camera.pose.latitude||(this.cameraMotion.set(ii(this.camera.pose,["longitude","latitude"]),0).catch(Qe$1),this.emit("cameraDirectionUpdate",ii(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",na(ii(this.camera.pose,["longitude","latitude","fov","offset","distance"])),!0))}},$u.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},$u.prototype.setCamera=function(Bu){},$u.prototype.destroyHelper=function(){},$u.prototype.setHelperElementSize=function(){if(this.helperElement){var Bu=new r$3.Vector2(this.element.offsetWidth,this.element.offsetHeight),Ru=Bu.x*this.scissor.left,Lu=Bu.y*(1-this.scissor.bottom-this.scissor.height),Ou=Bu.x*this.scissor.width,Fu=Bu.y*this.scissor.height;this.helperElement.style.marginLeft=Ru+"px",this.helperElement.style.marginTop=Lu+"px",this.helperElement.style.width=Ou+"px",this.helperElement.style.height=Fu+"px"}},$u.prototype.intersect=function(Bu){var Ru;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&Bu-this.activeTime>1500){var Lu=this.activePanoMesh;return(Gu=this.panoMeshes.indexOf(Lu))>=0&&this.moveToPano(Gu,{},!0),delete this.activePanoMesh,delete this.activeTime,Lu}for(var Ou=this.camera.getWorldDirection(new r$3.Vector3),Fu=new r$3.Raycaster(this.camera.position,Ou),Nu=void 0,Vu=[],Uu=this.work.observers[this.currentPanoIndex].visibleNodes,Gu=0;Gu<this.work.observers.length;Gu++){var zu=this.panoMeshes[Gu];if(Uu.indexOf(Gu)!==-1){var Hu=Fu.intersectObject((Ru=zu.hitTestMesh)!==null&&Ru!==void 0?Ru:zu,!0)[0];Hu&&Vu.push({panoMesh:zu,intersection:Hu})}}var ju=Vu.sort(function(qu,Yu){return qu.intersection.distance-Yu.intersection.distance})[0];if(ju?(Nu=ju.intersection,this.activePanoMesh!==ju.panoMesh&&(this.activePanoMesh=ju.panoMesh,this.activeTime=Bu),this.intersectMesh.position.copy(ju.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Nu)if((Nu=this.model.intersectRaycaster(Fu)[0])&&Nu.face){var Qu=Nu.face.normal,Xu=new r$3.Quaternion;Xu.setFromUnitVectors(new r$3.Vector3(0,0,1),Qu),this.intersectMesh.quaternion.copy(Xu);var Ku=Qu.clone().multiplyScalar(.05),Wu=Nu.point.clone().add(Ku);this.intersectMesh.position.copy(Wu),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Nu,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return ju==null?void 0:ju.panoMesh},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u}(Xa$1),Dl$1=function(_u){function $u(Bu){var Ru,Lu,Ou,Fu,Nu=this,Vu=$u.parseArgs(Bu);return(Nu=_u.call(this,Vu)||this).currentPanoIndex=Vu.initial[0],Nu.locationMotion=new Ro$1({x:Nu.camera.pose.offset.x,y:Nu.camera.pose.offset.y,z:Nu.camera.pose.offset.z,distance:Nu.camera.pose.distance,modelAlpha:(Lu=(Ru=Nu.model.getMaterial())===null||Ru===void 0?void 0:Ru.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Fu=(Ou=Nu.model.getMaterial())===null||Ou===void 0?void 0:Ou.perspToOrtho)!==null&&Fu!==void 0?Fu:0}),Nu}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){return _u.parseArgs.call(this,Bu)},$u.initAnimationEndPose=function(Bu){var Ru=this.parseArgs(Bu);return _u.initAnimationEndPose.call(this,Ru)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose()},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Bu,Ru,Lu,Ou,Fu){this.work=Bu,this.currentPanoIndex=Ru,this.hideIntersectMesh();var Nu={duration:0,longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov};return this.moveToPano(Ru,Nu,Fu),!0},$u.prototype.updateTime=function(Bu,Ru){for(var Lu=[],Ou=2;Ou<arguments.length;Ou++)Lu[Ou-2]=arguments[Ou];if(!this.destroyed){var Fu={},Nu={};if(!this.locationMotion.ended){this.locationMotion.update(Bu),Fu.modelAlpha=this.locationMotion.value.modelAlpha,Fu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Nu.distance=this.locationMotion.value.distance,Nu.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Vu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Uu=ta(this.work.observers,function(Gu){return Gu.position.distanceTo(Vu)});this.currentPanoIndex=this.work.observers.indexOf(Uu)}this.cameraMotion.ended||(this.cameraMotion.update(Bu),Nu.longitude=this.cameraMotion.value.longitude,Nu.latitude=this.cameraMotion.value.latitude,Nu.fov=this.cameraMotion.value.fov),ia$1(Fu)||this.model.setMaterial(Fu),ia$1(Nu)||this.setCamera(Nu)}},$u.prototype.initAnimation=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu=this;this.destroyed||(this.pending=!1,this.userAction=Ou,this.moveToPano(Bu,{longitude:(Fu=Ru.longitude)!==null&&Fu!==void 0?Fu:this.defaultLongitude,latitude:ho$1((Nu=Ru.latitude)!==null&&Nu!==void 0?Nu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Vu=Ru.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),duration:Lu,moveStartCallback:function(Gu,zu){Uu.emit("initAnimationWillStart",Gu,zu,Uu.userAction)},moveEndCallback:function(Gu,zu){Uu.emit("initAnimationEnded",Gu,zu,Uu.userAction)},moveCancelCallback:function(){var Gu=Uu.currentPanoIndex,zu={longitude:Uu.camera.pose.longitude,latitude:Uu.camera.pose.latitude,fov:Uu.camera.pose.fov,offset:Uu.camera.pose.offset.clone(),distance:Uu.camera.pose.distance};Uu.emit("initAnimationEnded",Gu,zu,Uu.userAction)}},Ou))},$u.prototype.getTargetPose=function(){var Bu=this.cameraMotion.getKeyFrameSegment(_e())[1],Ru=this.locationMotion.getKeyFrameSegment(_e())[1];return{longitude:Bu.value.longitude,latitude:Bu.value.latitude,fov:Bu.value.fov,offset:new r$3.Vector3(Ru.value.x,Ru.value.y,Ru.value.z),distance:Ru.value.distance}},$u.prototype.moveToPano=function(Bu,Ru,Lu){Ru===void 0&&(Ru={});var Ou=this.work.observers[Bu];Ou&&this.moveToPosition(Ou.position,Ru,Lu)},$u.prototype.moveToPosition=function(Bu,Ru,Lu){var Ou,Fu,Nu,Vu=this;Ru===void 0&&(Ru={}),this.userAction=Lu;for(var Uu=_e(),Gu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(Bu),zu=this.locationMotion.getProgressVelocity(Uu),Hu=0,ju=1;ju<this.locationMotion.keyframes.length;ju++){var Qu=this.locationMotion.keyframes[ju-1].value,Xu=Qu.x,Ku=Qu.y,Wu=Qu.z,qu=this.locationMotion.keyframes[ju].value,Yu=qu.x,Zu=qu.y,_h=qu.z;Hu+=Math.sqrt(Math.pow(Yu-Xu,2)+Math.pow(Zu-Ku,2)+Math.pow(_h-Wu,2))}var ep=Gu===0?0:zu*Hu/Gu,ip=this.calculateMovingDuration(Ru.duration,Gu),ap={x:Bu.x,y:Bu.y,z:Bu.z,distance:0,modelAlpha:1,perspToOrtho:0},sp={longitude:Ru.longitude,latitude:Ru.latitude,fov:Ru.fov},Ju={longitude:(Ou=sp.longitude)!==null&&Ou!==void 0?Ou:this.camera.pose.longitude,latitude:(Fu=sp.latitude)!==null&&Fu!==void 0?Fu:this.camera.pose.latitude,fov:(Nu=sp.fov)!==null&&Nu!==void 0?Nu:this.camera.pose.fov,offset:Bu.clone(),distance:0},_f=ta(this.work.observers,function(tp){return tp.position.distanceTo(Bu)}),np=this.work.observers.indexOf(_f);this.emit("moveToPano",np,this.userAction),Ru.moveStartCallback&&Ru.moveStartCallback(np,Ju),this.emit("panoWillArrive",np,Ju,this.userAction),this.cameraMotion.set(sp,ip).catch(Qe$1),this.locationMotion.set(ap,ip,ep).then(function(){var tp=na(Vu.camera.pose);Ru.moveEndCallback&&Ru.moveEndCallback(np,tp),Vu.emit("panoArrived",np,tp,Vu.userAction)},function(){Ru.moveCancelCallback&&Ru.moveCancelCallback(),Vu.emit("moveToPanoCanceled",np)})},$u.prototype.onTapGesture=function(Bu){var Ru=Bu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","tap",Ru,!0)){var Lu=this.relativeClientPosition(Bu.center),Ou=new r$3.Raycaster;if(Ou.setFromCamera(Lu,this.camera),!this.emit("wantsTapGesture",Ou,Lu,!0)){this.emit("gesture","tap",Ru,!0),this.emit("tapGesture",Ou,Lu,!0),this.interiaMovement=!1;var Fu=this.model.intersectRaycaster(Ou)[0];if(Fu&&Fu.face){var Nu=Fu.face.normal,Vu=Fu.point;if(new r$3.Vector3(0,1,0).angleTo(Nu)>Math.PI/3){var Uu=this.camera.position.clone().setY(Vu.y),Gu=Vu.clone().sub(Uu).setLength(.3),zu=Vu.clone().sub(Gu);Ou.set(zu,new r$3.Vector3(0,-1,0)),Fu=this.model.intersectRaycaster(Ou)[0]}}if(Fu){var Hu=Fu.point.clone(),ju=ta(this.work.observers.filter(function(Qu){return Math.abs(Qu.standingPosition.y-Hu.y)<1}),function(Qu){return Qu.standingPosition.distanceTo(Hu)});if(ju)return Hu.y=ju.position.y,void this.moveToPosition(Hu,{},!0)}this.cameraBounce()}}},$u}(ba$1),Ll$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=113,Ru=126,Lu=0,Ou="";return arguments[Lu].split(Ou).map(function(Fu){return Fu.charCodeAt(Lu)>Ru?Fu:String.fromCharCode((Fu.charCodeAt(Lu)+Bu)%Ru)}).join(Ou)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Ol$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Bu=113,Ru=126,Lu=0,Ou="";return arguments[Lu].split(Ou).map(function(Fu){return Fu.charCodeAt(Lu)>Ru?Fu:String.fromCharCode((Fu.charCodeAt(Lu)+Bu)%Ru)}).join(Ou)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Nl$1=Object.assign({opacity:new r$3.Uniform(1),scale:new r$3.Uniform(13.1),panoMap:new r$3.Uniform(null),panoDisplacementMap:new r$3.Uniform(null),panoPosition:new r$3.Uniform(new r$3.Vector3),panoMatrix:new r$3.Uniform(new r$3.Matrix4)},{emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Fl$1=new r$3.SphereBufferGeometry(.01,128,128),Ql$1=function(){function _u($u){$u===void 0&&($u={}),this.textureLoader=new Ii({allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}),this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u,this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u,this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u,this.textureLoader.setNetworkSubscribe($u)},_u.prototype.load=function($u,Bu,Ru,Lu,Ou,Fu,Nu,Vu){var Uu=[0,0],Gu=function(Hu,ju){Uu[ju]=Hu,Nu(.8*Uu[0]+.2*Uu[1])},zu=[this.textureLoader.load($u,{viaAjax:!0},void 0,void 0,function(Hu){return Gu(Hu,1)},Vu),this.textureLoader.loadCube(Bu,{viaAjax:!0},void 0,void 0,function(Hu){return Gu(Hu,0)},Vu)];return Promise.all(zu).then(function(Hu){var ju=Hu[0],Qu=Hu[1],Xu={body:function(Ku,Wu,qu,Yu){var Zu=new r$3.ShaderMaterial({side:r$3.BackSide,vertexShader:Ll$1,fragmentShader:Ol$1,transparent:!0,uniforms:r$3.UniformsUtils.clone(Nl$1)}),_h=Wu;return _h.needsUpdate=!0,_h.minFilter=r$3.LinearFilter,_h.magFilter=r$3.LinearFilter,Ku.needsUpdate=!0,Ku.minFilter=r$3.LinearFilter,Ku.magFilter=r$3.LinearFilter,Zu.uniforms.opacity.value=0,Zu.uniforms.panoMap.value=_h,Zu.uniforms.panoDisplacementMap.value=Ku,Zu.uniforms.panoPosition.value=qu,Zu.uniforms.panoMatrix.value=Yu,Object.assign(new r$3.Mesh(Fl$1,Zu),{frustumCulled:!1,dispose:function(){this.material instanceof r$3.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(ju.body,Qu.body,Ru,Lu),meta:t$3.__spreadArray([ju.meta],Qu.meta,!0)};return Ou(Xu),Xu}).catch(function(Hu){for(var ju=0,Qu=zu;ju<Qu.length;ju++)Qu[ju].then(function(Xu){return Xu.body.dispose()}).catch(Qe$1);return Fu(Hu),Promise.reject(Hu)})},_u}(),Vl=new r$3.Vector3(-1,1,1),_l$1=function(_u){function $u(Bu){var Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu=this,zu=$u.parseArgs(Bu);return(Gu=_u.call(this,zu)||this).currentPanoIndex=zu.initial[0],Gu.maxAccessibleDistance=zu.maxAccessibleDistance,Gu.panoTapTriggerRadius=zu.panoTapTriggerRadius,Gu.panoCircleMeshCreator=zu.panoCircleMeshCreator,Gu.boundingMesh=Gu.generateBoundingMesh(),Gu.boundingMesh.setMaterial(Gu.model.getMaterial()||{}),Gu.boundingMesh.visible=!1,Gu.scene.add(Gu.boundingMesh),Gu.panoModelGroup=new r$3.Group,Gu.panoModelGroup.name="panoModels",Gu.scene.add(Gu.panoModelGroup),Gu.panoMeshes=[],Gu.updatePanoMeshes(),Gu.helper.remove(Gu.intersectMesh),Gu.locationMotion=new Ro$1({count:0,distance:Gu.camera.pose.distance,modelAlpha:(Lu=(Ru=Gu.model.getMaterial())===null||Ru===void 0?void 0:Ru.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Fu=(Ou=Gu.model.getMaterial())===null||Ou===void 0?void 0:Ou.perspToOrtho)!==null&&Fu!==void 0?Fu:0}),Gu.panoResources={},Gu.panoResources[Gu.locationMotion.keyframes[0].key=Gu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Gu.currentPanoIndex,workCode:Gu.work.workCode,matrix:(Uu=(Vu=(Nu=Gu.model.getMaterial())===null||Nu===void 0?void 0:Nu.pano1)===null||Vu===void 0?void 0:Vu.matrix)!==null&&Uu!==void 0?Uu:new r$3.Matrix4,position:Gu.camera.pose.offset.clone(),effect:"fly"},Gu.depthTextureLoader=new Ql$1({allowHosts:Gu.work.allowHosts,requestProxy:Gu.requestProxy,networkSubscribe:Gu.networkSubscribe}),Gu}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){var Ru,Lu,Ou,Fu=_u.parseArgs.call(this,Bu);return t$3.__assign(t$3.__assign({},Fu),{maxAccessibleDistance:(Ru=Bu.maxAccessibleDistance)!==null&&Ru!==void 0?Ru:5,panoTapTriggerRadius:(Lu=Bu.panoTapTriggerRadius)!==null&&Lu!==void 0?Lu:1,panoCircleMeshCreator:(Ou=Bu.panoCircleMeshCreator)!==null&&Ou!==void 0?Ou:function(){return new as$1}})},$u.initAnimationEndPose=function(Bu){var Ru=this.parseArgs(Bu);return _u.initAnimationEndPose.call(this,Ru)},$u.prototype.destroy=function(){var Bu,Ru=this;if(_u.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Lu=0,Ou=this.panoModelGroup.children;Lu<Ou.length;Lu++){var Fu=Ou[Lu];typeof Fu.dispose=="function"&&Fu.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Qu){Ru.helper.remove(Qu),Qu.dispose()}),this.panoMeshes.length=0);for(var Nu=(Bu=this.model.getMaterial())!==null&&Bu!==void 0?Bu:{},Vu=Nu.pano0,Uu=Nu.pano1,Gu=0,zu=Object.keys(this.panoResources);Gu<zu.length;Gu++){var Hu=zu[Gu],ju=this.panoResources[Hu];ju.panoModel&&ju.panoModel.material.uniforms.panoMap.value!==(Vu==null?void 0:Vu.map)&&ju.panoModel.material.uniforms.panoMap.value!==(Uu==null?void 0:Uu.map)&&(this.panoModelGroup.remove(ju.panoModel),ju.panoModel.material.uniforms.panoMap.value.dispose(),ju.panoModel.dispose(),delete ju.panoModel),delete this.panoResources[Hu]}this.interiaMovement=!1},$u.prototype.isReady=function(){return this.locationMotion.ended===!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Bu,Ru,Lu,Ou,Fu){this.userAction=Fu,this.work=Bu,this.currentPanoIndex=Ru,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Nu={},Vu=!0;this.boundingMesh&&(Nu=this.boundingMesh.getMaterial()||{},Vu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Vu,this.boundingMesh.setMaterial(Nu),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Uu=0,Gu=this.panoMeshes;Uu<Gu.length;Uu++)Gu[Uu].visible=!1;return this.moveToPano(Ru,{effect:"fade",duration:Ou,longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},Fu),!0},$u.prototype.updateTime=function(Bu,Ru){for(var Lu,Ou,Fu,Nu=[],Vu=2;Vu<arguments.length;Vu++)Nu[Vu-2]=arguments[Vu];if(!this.destroyed){var Uu={},Gu={},zu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ju=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Bu);var Qu=this.locationMotion.getKeyFrameSegment(Bu),Xu=Qu[0],Ku=Qu[1],Wu=this.panoResourceFromLocationMotionKeyframe(Xu),qu=this.panoResourceFromLocationMotionKeyframe(Ku),Yu=new r$3.Vector3().copy(Wu.position),Zu=new r$3.Vector3().copy(qu.position),_h=this.locationMotion.value.count-Ku.value.count+1;Uu.progress=_h,Uu.modelAlpha=this.locationMotion.value.modelAlpha,Uu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var ep=0,ip=this.panoModelGroup.children;ep<ip.length;ep++){var ap=ip[ep];ap.visible=ap===Wu.panoModel||ap===qu.panoModel}Wu.panoModel&&(Wu.panoModel.material.uniforms.opacity.value=1-_h,Wu.panoModel.material.depthTest=_h!==0),qu.panoModel&&(qu.panoModel.material.uniforms.opacity.value=_h,qu.panoModel.material.depthTest=_h!==1),qu.panoModel&&(_h<1?Wu.panoModel&&(Uu.pano0={map:Wu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Wu.matrix}):Uu.pano0={map:qu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:qu.matrix},Uu.pano1={map:qu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:qu.matrix}),ju=Uu.useBlackTransition=qu.effect==="instant"||qu.effect==="montage",qu.effect!=="fade"&&qu.effect!=="montage"||(Uu.pano0&&(Uu.pano0={map:Uu.pano0.map,luminanceMap:null,matrix:Wu.matrix.clone().setPosition(qu.position)}),Yu.copy(Zu)),Gu.distance=this.locationMotion.value.distance,Gu.offset=new r$3.Vector3(Yu.x+(Zu.x-Yu.x)*_h,Yu.y+(Zu.y-Yu.y)*_h,Yu.z+(Zu.z-Yu.z)*_h);for(var sp=[],Ju=[],_f=0,np=this.locationMotion.keyframes;_f<np.length;_f++){var tp=np[_f],rp=tp.key,op=tp.progress;rp!==void 0&&(sp.push(rp),op>=this.locationMotion.progress&&Ju.push(rp))}for(var lp=0,up=Object.keys(this.panoResources);lp<up.length;lp++){var cp=up[lp];if(!(Ju.indexOf(cp)>=0)){var Ap=this.panoResources[cp];if(Ap.panoModel){if(Ap.panoModel.material.uniforms.panoMap.value===((Lu=Uu.pano0)===null||Lu===void 0?void 0:Lu.map)||Ap.panoModel.material.uniforms.panoMap.value===((Ou=Uu.pano1)===null||Ou===void 0?void 0:Ou.map))continue;this.panoModelGroup.remove(Ap.panoModel),Ap.panoModel.material.uniforms.panoMap.value.dispose(),Ap.panoModel.dispose(),delete Ap.panoModel}sp.indexOf(cp)>=0||delete this.panoResources[cp]}}Wu.workCode===qu.workCode?this.currentPanoIndex=_h<.5?Wu.panoIndex:qu.panoIndex:this.currentPanoIndex=qu.panoIndex,this.emit("movingToPano",Hu.panoIndex,zu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Bu),Gu.longitude=this.cameraMotion.value.longitude,Gu.latitude=this.cameraMotion.value.latitude,Gu.fov=this.cameraMotion.value.fov),ia$1(Uu)===!1&&(this.model.setMaterial(Uu),this.boundingMesh.setMaterial(Uu)),ia$1(Gu)===!1&&this.setCamera(Gu),this.camera.pose.distance>.1)for(var yp=0;yp<this.work.observers.length;yp++)($p=this.panoMeshes[yp])&&($p.visible=!1);else{var Ip=this.work.observers[this.currentPanoIndex];if(Ip){var Ep=Ip.visibleNodes.concat(this.currentPanoIndex),Vp=this.getForwardPanoIndexOrNot();for(yp=0;yp<this.work.observers.length;yp++){var $p,kp=this.work.observers[yp];if($p=this.panoMeshes[yp])if(kp.loadable||kp.active)if(Ep.indexOf(yp)!==-1)if(ju)$p.visible=!1,$p.setOpacity(0);else{$p.visible=!0;var Bp=$p.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);$p.setCurrent(Vp===yp),$p.setOpacity(Bp<.01?0:ho$1(1.4/Bp,.5,.7)),$p.updateTime&&$p.updateTime(Bu,Ru)}else $p.visible=!1,$p.setOpacity(0);else $p.visible=!1,$p.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Fu=this.boundingMesh.getMaterial())===null||Fu===void 0?void 0:Fu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},$u.prototype.getTargetPose=function(){var Bu=this.cameraMotion.getKeyFrameSegment(_e())[1],Ru=this.locationMotion.getKeyFrameSegment(_e())[1],Lu=this.panoResourceFromLocationMotionKeyframe(Ru),Ou=this.work.observers[Lu.panoIndex];return{longitude:Bu.value.longitude,latitude:Bu.value.latitude,fov:Bu.value.fov,offset:Ou?Ou.position.clone():this.camera.position.clone(),distance:0}},$u.prototype.moveToPano=function(Bu,Ru,Lu){var Ou,Fu,Nu=this;Ru===void 0&&(Ru={});var Vu=this.work.observers[Bu].images.depth,Uu=t$3.__assign({key:"pano.".concat(Bu),basisLoaderInitialized:Ei$1.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),Gu=(Ou=this.imageOptions.transform)!==null&&Ou!==void 0?Ou:ct$1,zu={right:Gu(this.work.observers[Bu].images.right,t$3.__assign(t$3.__assign({},Uu),{key:"pano.".concat(Bu,".right")})),left:Gu(this.work.observers[Bu].images.left,t$3.__assign(t$3.__assign({},Uu),{key:"pano.".concat(Bu,".left")})),up:Gu(this.work.observers[Bu].images.up,t$3.__assign(t$3.__assign({},Uu),{key:"pano.".concat(Bu,".up")})),down:Gu(this.work.observers[Bu].images.down,t$3.__assign(t$3.__assign({},Uu),{key:"pano.".concat(Bu,".down")})),front:Gu(this.work.observers[Bu].images.front,t$3.__assign(t$3.__assign({},Uu),{key:"pano.".concat(Bu,".front")})),back:Gu(this.work.observers[Bu].images.back,t$3.__assign(t$3.__assign({},Uu),{key:"pano.".concat(Bu,".back")}))},Hu=this.work.observers[Bu],ju=Hu.position,Qu=Hu.quaternion,Xu=new r$3.Matrix4().compose(ju,Qu,new r$3.Vector3(-1,1,1)),Ku="pano:"+va(zu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Ku)return;var Wu=this.pendingTextureTask.panoIndex;(Fu=this.panoMeshes[Wu])===null||Fu===void 0||Fu.setProgress(0),this.emit("textureAbort",Wu,this.work.observers[Wu]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:Bu,hash:Ku,onLoad:function(Yu){Nu.pending=!1,Nu.destroyed?Yu.body.dispose():(Yu.body.name=Ku,Nu.emit("panoLoaded",Bu),Nu.doMoveToPano(Bu,Yu.body,Ru,Lu))},onError:function(Yu){Nu.pending=!1,Ru.moveCancelCallback&&Ru.moveCancelCallback(),Nu.emit("panoLoadError",Yu,Bu),Nu.emit("moveToPanoCanceled",Bu)}};var qu=this.panoMeshes[Bu];qu&&qu.tap&&qu.tap(),this.depthTextureLoader.load(Vu,zu,ju,Xu,function(Yu){var Zu,_h;((Zu=Nu.pendingTextureTask)===null||Zu===void 0?void 0:Zu.hash)===Ku?(Nu.pendingTextureTask.onLoad(Yu),(_h=Nu.panoMeshes[Bu])===null||_h===void 0||_h.setProgress(0),delete Nu.pendingTextureTask,Nu.emit("textureLoaded",Bu,Nu.work.observers[Bu],Yu.meta)):Yu.body.dispose()},function(Yu){var Zu,_h;((Zu=Nu.pendingTextureTask)===null||Zu===void 0?void 0:Zu.hash)===Ku&&(Nu.pendingTextureTask.onError(Yu),(_h=Nu.panoMeshes[Bu])===null||_h===void 0||_h.setProgress(0),delete Nu.pendingTextureTask,Nu.emit("textureError",Yu,Bu,Nu.work.observers[Bu]),Nu.emit("error",Yu))},function(Yu){var Zu,_h;Nu.emit("textureLoading",Yu,Bu,Nu.work.observers[Bu]),((Zu=Nu.pendingTextureTask)===null||Zu===void 0?void 0:Zu.hash)===Ku&&((_h=Nu.panoMeshes[Bu])===null||_h===void 0||_h.setProgress(Yu))},this.renderer),this.emit("textureStartLoad",Bu,this.work.observers[Bu])},$u.prototype.initAnimation=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu=this;if(!this.destroyed){var Gu=!1;this.pending=!1,this.userAction=Ou,this.moveToPano(Bu,{longitude:(Fu=Ru.longitude)!==null&&Fu!==void 0?Fu:this.defaultLongitude,latitude:ho$1((Nu=Ru.latitude)!==null&&Nu!==void 0?Nu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Vu=Ru.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),duration:Lu,moveStartCallback:function(zu,Hu){Gu=!0,Uu.emit("initAnimationWillStart",zu,Hu,Uu.userAction)},moveEndCallback:function(zu,Hu){Uu.emit("initAnimationEnded",zu,Hu,Uu.userAction)},moveCancelCallback:function(){var zu=na(Uu.camera.pose);Gu===!1&&Uu.emit("initAnimationWillStart",Uu.currentPanoIndex,zu,Uu.userAction),Uu.emit("initAnimationEnded",Uu.currentPanoIndex,zu,Uu.userAction)}},Ou)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Bu){return this.panoResources[Bu.key]},$u.prototype.locationMotionKeyframesLength=function(Bu){for(var Ru=0,Lu=1;Lu<Bu.length;Lu++){var Ou=this.panoResourceFromLocationMotionKeyframe(Bu[Lu-1]).position,Fu=this.panoResourceFromLocationMotionKeyframe(Bu[Lu]).position;Ru+=Ou.distanceTo(Fu)*(Bu[Lu].value.count-Bu[Lu-1].value.count)}return Ru},$u.prototype.updatePanoMeshes=function(){for(var Bu={},Ru=0,Lu=this.panoMeshes;Ru<Lu.length;Ru++)Bu[(Vu=Lu[Ru]).name]=Vu;this.panoMeshes.length=0;for(var Ou=0;Ou<this.work.observers.length;Ou++){var Fu="panoCircle_".concat(this.work.workCode,"_").concat(Ou),Nu=this.work.observers[Ou],Vu=void 0;Bu[Fu]?(Vu=Bu[Fu],delete Bu[Fu]):((Vu=this.panoCircleMeshCreator()).name=Fu,this.helper.add(Vu)),Vu.position.copy(Nu.standingPosition),this.panoMeshes[Ou]=Vu}for(var Uu=0,Gu=Object.keys(Bu);Uu<Gu.length;Uu++){var zu=Gu[Uu];this.helper.remove(Bu[zu]),Bu[zu].dispose(),delete Bu[zu]}},$u.prototype.generateBoundingMesh=function(Bu){Bu===void 0&&(Bu=!1);for(var Ru=this.model.bounding.clone(),Lu=0,Ou=this.work.observers;Lu<Ou.length;Lu++){var Fu=Ou[Lu];Ru.expandByPoint(Fu.standingPosition),Ru.expandByPoint(new r$3.Vector3().fromArray([Fu.position.x,2*Fu.position.y-Fu.standingPosition.y,Fu.position.z]))}Bu&&Ru.expandByPoint(this.camera.position);var Nu=Ks$1(Ru,new r$3.Vector3(1,0,1));return Nu.name="panorama_bounding",Nu.frustumCulled=!1,Nu},$u.prototype.doMoveToPano=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu,Gu=this;Lu===void 0&&(Lu={}),this.userAction=Ou;var zu=_e(),Hu=Kr(),ju=this.work.observers[Bu],Qu=this.panoResources[Hu]={panoIndex:Bu,workCode:this.work.workCode,effect:(Fu=Lu.effect)!==null&&Fu!==void 0?Fu:"fly",panoModel:Ru,matrix:new r$3.Matrix4().compose(ju.position,ju.quaternion,Vl),position:ju.position.clone()};Ru.visible=!1,Ru.renderOrder=-1,this.panoModelGroup.add(Ru);var Xu,Ku,Wu;if(this.locationMotion.ended){var qu=this.locationMotion.getKeyFrameSegment(zu);qu[0];var Yu=qu[1],Zu=this.locationMotion.value,_h=this.panoResourceFromLocationMotionKeyframe(Yu).position,ep=Qu.position;Xu=Math.max(_h.distanceTo(ep),1),Ku=[{key:Yu.key,progress:0,value:t$3.__assign(t$3.__assign({},Zu),{count:0})},{key:Hu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Wu=0}else{var ip=this.locationMotion.getKeyFrameSegment(zu),ap=ip[0],sp=(Yu=ip[1],Zu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(ap).position),Ju=(_h=this.panoResourceFromLocationMotionKeyframe(Yu).position,ep=Qu.position,Yu.value.count-Zu.count),_f=Math.max(sp.distanceTo(_h),1)*Ju;Xu=_f+Math.max(_h.distanceTo(ep),1),Ku=[{key:ap.key,progress:0,value:t$3.__assign({},Zu)},{key:Yu.key,progress:_f/Xu,value:Yu.value},{key:Hu,progress:1,value:{count:Yu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var np=this.locationMotionKeyframesLength(this.locationMotion.keyframes),tp=this.locationMotionKeyframesLength(Ku);Wu=np===0||np===0?0:this.locationMotion.getProgressVelocity(zu)*np/tp}var rp=this.calculateMovingDuration(Lu.duration,Lu.effect==="fade"||Lu.effect==="montage"?0:Xu),op={longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},lp={longitude:(Nu=op.longitude)!==null&&Nu!==void 0?Nu:this.camera.pose.longitude,latitude:(Vu=op.latitude)!==null&&Vu!==void 0?Vu:this.camera.pose.latitude,fov:(Uu=op.fov)!==null&&Uu!==void 0?Uu:this.camera.pose.fov,offset:ju.position.clone(),distance:this.camera.pose.distance};Lu.moveStartCallback&&Lu.moveStartCallback(Bu,lp),this.emit("panoWillArrive",Bu,lp,this.userAction),this.cameraMotion.set(op,rp).catch(Qe$1),this.locationMotion.setKeyframes(Ku,rp,Wu).then(function(){var up={longitude:Gu.camera.pose.longitude,latitude:Gu.camera.pose.latitude,fov:Gu.camera.pose.fov,offset:Gu.camera.pose.offset.clone(),distance:Gu.camera.pose.distance};Lu.moveEndCallback&&Lu.moveEndCallback(Bu,up),Gu.emit("panoArrived",Bu,up,Ou)},function(){Lu.moveCancelCallback&&Lu.moveCancelCallback(),Gu.emit("moveToPanoCanceled",Bu)})},$u.prototype.getForwardPanoIndexOrNot=function(Bu){var Ru=this,Lu=this.camera.getWorldDirection(new r$3.Vector3),Ou=this.camera.position.clone(),Fu=this.work.observers[this.currentPanoIndex];if(!Fu)return null;var Nu=Fu.accessibleNodes.filter(function(Wu){if(Wu===Ru.currentPanoIndex)return!1;var qu=Ru.work.observers[Wu],Yu=qu.standingPosition.clone().sub(Ou);return Yu.length()!==0&&!(Yu.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(qu.loadable||qu.active)}),Vu=(Bu?Bu.ray.direction.clone():Lu.clone()).setY(0);if(Vu.length()===0)return null;for(var Uu=Nu.slice().sort(function(Wu,qu){var Yu=Ru.work.observers[Wu].position.clone().setY(Ou.y),Zu=Ru.work.observers[qu].position.clone().setY(Ou.y);return Yu.distanceTo(Ou)-Zu.distanceTo(Ou)}),Gu=0,zu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Gu<zu.length;Gu++)for(var Hu=zu[Gu],ju=0,Qu=Uu;ju<Qu.length;ju++){var Xu=Qu[ju],Ku=this.work.observers[Xu].position.clone().setY(Ou.y).sub(Ou);if(Ku.length()!==0&&Vu.angleTo(Ku)<Hu)return Xu}return null},$u.prototype.onTapGesture=function(Bu){var Ru=this,Lu=Bu.pointers.map(function(up){return ii(up,["x","y"])});if(!this.emit("wantsGesture","tap",Lu,!0)){var Ou=this.relativeClientPosition(Bu.center),Fu=new r$3.Raycaster;if(Fu.setFromCamera(Ou,this.camera),!this.emit("wantsTapGesture",Fu,Ou,!0)){this.emit("gesture","tap",Lu,!0),this.emit("tapGesture",Fu,Ou,!0),this.interiaMovement=!1;var Nu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Vu=null,Uu=this.work.observers[this.currentPanoIndex];if(Uu){var Gu=Uu.accessibleNodes.filter(function(up){if(up===Ru.currentPanoIndex)return!1;var cp=Ru.work.observers[up];return!(cp.position.distanceTo(Ru.camera.position)>Ru.maxAccessibleDistance)&&(cp.loadable||cp.active)}),zu=Fu.intersectObject(this.boundingMesh,!0)[0];if(zu){var Hu=ta(Gu,function(up){var cp=Ru.work.observers[up].standingPosition.clone();return cp.clone().sub(Ru.camera.position).setY(0).angleTo(Nu)>Math.PI/2?1/0:cp.distanceTo(zu.point)},!0),ju=Hu[0];Hu[1]<this.panoTapTriggerRadius&&(Vu=ju)}oo$1(Vu)&&(Vu=this.getForwardPanoIndexOrNot(Fu));for(var Qu=0,Xu=this.locationMotion.keyframes;Qu<Xu.length;Qu++){var Ku=Xu[Qu],Wu=this.panoResourceFromLocationMotionKeyframe(Ku);if(!(Ku.progress<this.locationMotion.progress)&&Wu.panoIndex===Vu){Vu=null;break}}if(this.emit("panoSelected",Vu),oo$1(Vu))this.locationMotion.ended===!0&&this.cameraBounce();else{var qu=this.work.observers[Vu];if(qu.active){for(var Yu={},Zu=Math.PI/6,_h=Math.PI/12,ep=new r$3.Vector3(0,1,0),ip=qu.position.clone().setY(0).sub(Uu.position.clone().setY(0)).normalize(),ap=ip.clone().applyAxisAngle(ep,Zu),sp=ip.clone().applyAxisAngle(ep,-Zu),Ju=[],_f=[],np=[],tp=0,rp=qu.accessibleNodes;tp<rp.length;tp++)if((ju=rp[tp])!==this.currentPanoIndex&&ju!==Vu){var op=this.work.observers[ju].position.clone().sub(qu.position).setY(0);ip.angleTo(op)<Zu?np.push(op):ap.angleTo(op)<Zu?Ju.push(op):sp.angleTo(op)<Zu&&_f.push(op)}var lp=(np.length>0?np:t$3.__spreadArray(t$3.__spreadArray([],Ju,!0),_f,!0)).slice().sort(function(up,cp){return up.angleTo(ip)-cp.angleTo(ip)})[0];lp&&lp.angleTo(Nu)>_h&&(Yu.longitude=Math.atan2(-lp.x,-lp.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Yu.latitude=ho$1(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Vu,Yu,!0)}else this.panoMeshes[Vu]&&(this.panoMeshes[Vu].setDisabled(!1),this.panoMeshes[Vu].setLoading(!0))}}}}},$u}(ba$1);function Hl$1(_u,$u){var Bu=new r$3.Vector3;return Bu.setFromMatrixColumn($u,0),Bu.multiplyScalar(-_u),Bu}function ql(_u,$u,Bu){var Ru=new r$3.Vector3;return Ru.setFromMatrixColumn(Bu,0),Ru.crossVectors($u,Ru),Ru.multiplyScalar(_u),Ru}var zl$1=function(_u){function $u(Bu){var Ru,Lu,Ou,Fu,Nu=this,Vu=$u.parseArgs(Bu);return(Nu=_u.call(this,Vu)||this).currentPanoIndex=Vu.initial[0],Nu.defaultLongitude=Vu.defaultLongitude,Nu.defaultLatitude=Vu.defaultLatitude,Nu.defaultDistance=Vu.defaultDistance,Nu.maxLatitude=Vu.maxLatitude,Nu.minLatitude=Vu.minLatitude,Nu.maxDistance=Vu.maxDistance,Nu.minDistance=Vu.minDistance,Nu.locationMotion=new Ro$1({x:Nu.camera.pose.offset.x,y:Nu.camera.pose.offset.y,z:Nu.camera.pose.offset.z,distance:Nu.camera.pose.distance,modelAlpha:(Lu=(Ru=Nu.model.getMaterial())===null||Ru===void 0?void 0:Ru.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Fu=(Ou=Nu.model.getMaterial())===null||Ou===void 0?void 0:Ou.perspToOrtho)!==null&&Fu!==void 0?Fu:0}),Nu}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){var Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu=_u.parseArgs.call(this,Bu);return t$3.__assign(t$3.__assign({},Gu),{defaultLongitude:(Ru=Bu.defaultLongitude)!==null&&Ru!==void 0?Ru:Math.PI/4,defaultLatitude:(Lu=Bu.defaultLatitude)!==null&&Lu!==void 0?Lu:Math.PI/4,defaultDistance:(Ou=Bu.defaultDistance)!==null&&Ou!==void 0?Ou:100,maxLatitude:(Fu=Bu.maxLatitude)!==null&&Fu!==void 0?Fu:+Math.PI/2,minLatitude:(Nu=Bu.minLatitude)!==null&&Nu!==void 0?Nu:0,maxDistance:(Vu=Bu.maxDistance)!==null&&Vu!==void 0?Vu:100,minDistance:(Uu=Bu.minDistance)!==null&&Uu!==void 0?Uu:2})},$u.distanceFromModel=function(Bu,Ru,Lu){var Ou=Bu.bounding,Fu=Math.pow(Math.pow(Ou.max.x-Ou.min.x+1,2)+Math.pow(Ou.max.y-Ou.min.y+1,2)+Math.pow(Ou.max.z-Ou.min.z+1,2),.5),Nu=Fu/2/Math.tan(Math.PI*Ru/360);return Lu<1&&(Nu/=Lu),isNaN(Nu)?Fu:Nu},$u.initAnimationEndPose=function(Bu){var Ru,Lu,Ou=this.parseArgs(Bu),Fu=Bu.initial[0],Nu=Bu.initial[1];return{longitude:(Ru=Nu.longitude)!==null&&Ru!==void 0?Ru:Ou.defaultLongitude,latitude:ho$1((Lu=Nu.latitude)!==null&&Lu!==void 0?Lu:Ou.defaultLatitude,Ou.minLatitude,Ou.maxLatitude),fov:90,offset:Ou.work.observers[Fu].position.clone(),distance:$u.distanceFromModel(Ou.model,90,Ou.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.model.enableTiles=!1,this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Bu,Ru,Lu,Ou,Fu){return this.work=Bu,this.updateCamera(Lu,Ou,Fu),!0},$u.prototype.updateModel=function(Bu){_u.prototype.updateModel.call(this,Bu);var Ru=Bu.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Ru.x,y:Ru.y,z:Ru.z},0).catch(Qe$1),this.model.enableTiles=!0},$u.prototype.updateTime=function(Bu,Ru){if(!this.destroyed){var Lu={},Ou={};this.locationMotion.ended||(this.locationMotion.update(Bu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ou.distance=this.locationMotion.value.distance,Ou.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Bu),Ou.longitude=this.cameraMotion.value.longitude,Ou.latitude=this.cameraMotion.value.latitude,Ou.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Ou)||this.setCamera(Ou)}},$u.prototype.setCamera=function(Bu){_u.prototype.setCamera.call(this,Bu);var Ru=this.camera.pose.offset.clone();if(this.model.bvhs.loaded){var Lu=new r$3.Raycaster(this.camera.getWorldPosition(new r$3.Vector3),this.camera.getWorldDirection(new r$3.Vector3)),Ou=this.model.intersectRaycaster(Lu)[0];Ou&&Ru.copy(Ou.point)}var Fu=ta(this.work.observers,function(Vu){return Vu.position.distanceTo(Ru)}),Nu=this.work.observers.indexOf(Fu);Nu!==this.currentPanoIndex&&(this.emit("moveToPano",Nu,this.userAction),this.emit("panoWillArrive",Nu,na(this.camera.pose),this.userAction),this.currentPanoIndex=Nu,this.emit("panoArrived",Nu,na(this.camera.pose),this.userAction))},$u.prototype.getTargetPose=function(){var Bu=this.cameraMotion.getKeyFrameSegment(_e())[1],Ru=this.locationMotion.getKeyFrameSegment(_e())[1];return{longitude:Bu.value.longitude,latitude:Bu.value.latitude,fov:Bu.value.fov,distance:Ru.value.distance,offset:new r$3.Vector3(Ru.value.x,Ru.value.y,Ru.value.z)}},$u.prototype.initAnimation=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu=this;if(!this.destroyed){this.pending=!1,this.userAction=Ou;var Uu={longitude:(Fu=Ru.longitude)!==null&&Fu!==void 0?Fu:this.defaultLongitude,latitude:ho$1((Nu=Ru.latitude)!==null&&Nu!==void 0?Nu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:90,offset:this.model.bounding.getCenter(new r$3.Vector3),distance:$u.distanceFromModel(this.model,90,this.camera.aspect)},Gu=ii(Uu,["longitude","latitude","fov"]),zu={x:Uu.offset.x,y:Uu.offset.y,z:Uu.offset.z,distance:Uu.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Bu,Uu,this.userAction),this.cameraMotion.set(Gu,Lu).catch(Qe$1),this.locationMotion.set(zu,Lu).then(function(){Vu.emit("initAnimationEnded",Bu,Uu,Vu.userAction)},function(Hu){var ju=na(Vu.camera.pose);Vu.emit("initAnimationEnded",Bu,ju,Vu.userAction)}).then(function(){Vu.model.enableTiles=!0})}},$u.prototype.getForwardPanoIndexOrNot=function(Bu){var Ru=this.work.observers.filter(function(Nu){return Nu.active}),Lu=this.model.intersectRaycaster(Bu)[0];if(!Lu)return null;var Ou=ta(Ru,function(Nu){return Nu.standingPosition.distanceTo(Lu.point)},!0),Fu=Ou[0];return Ou[1]<5?this.work.observers.indexOf(Fu):null},$u.prototype.coordinatesForOffset=function(Bu){var Ru=this.cameraMotion.value.fov,Lu=this.camera.aspect,Ou=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Bu.x/(Ou.x*this.scissor.width)*Ru/95*Lu,latitude:-2*Bu.y/(Ou.y*this.scissor.height)*Ru/95}},$u.prototype.onPanGesture=function(Bu){var Ru=this.panState,Lu=Bu.pointers.length;if(Bu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Bu.center.x,y:Bu.center.y},Ru!==void 0&&Ru.pointerLength===Lu){var Ou=Bu.pointers.map(function(qu){return ii(qu,["x","y"])});if(!this.emit("wantsGesture","pan",Ou,Bu.isFinal))if(Bu.pointerType==="mouse"&&Bu.srcEvent.buttons===2){var Fu={x:Bu.center.x-Ru.x,y:Bu.center.y-Ru.y},Nu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Vu=this.model.bounding,Uu=Vu.getCenter(new r$3.Vector3),Gu={x:(Vu.max.x-Vu.min.x)/90*this.cameraMotion.value.fov,y:(Vu.max.y-Vu.min.y)/90*this.cameraMotion.value.fov,z:(Vu.max.z-Vu.min.z)/90*this.cameraMotion.value.fov},zu=(this.camera.position.y-Vu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Hu=this.renderer.getSize(new r$3.Vector2);Nu.add(Hl$1(2*Fu.x*zu/Hu.y,this.camera.matrix)),Nu.add(ql(2*Fu.y*zu/Hu.y,this.camera.up,this.camera.matrix)),Nu.x=ho$1(Nu.x,Uu.x-Gu.x,Uu.x+Gu.x),Nu.z=ho$1(Nu.z,Uu.z-Gu.z,Uu.z+Gu.z);var ju={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Nu,distance:this.locationMotion.value.distance};if(this.emit("wantsPanGesture",ju,Bu.isFinal))return;this.emit("gesture","pan",Ou,Bu.isFinal),this.emit("panGesture",ju,Bu.isFinal),this.userAction=!0,this.locationMotion.set({x:Nu.x,y:Nu.y,z:Nu.z},0).catch(Qe$1)}else{Nu={x:Bu.center.x-Ru.x,y:Bu.center.y-Ru.y};var Qu=this.coordinatesForOffset(Nu),Xu=Gs$1(this.cameraMotion.value.longitude+-1*Qu.longitude),Ku=ho$1(this.cameraMotion.value.latitude+-1*Qu.latitude,this.minLatitude,this.maxLatitude);if(this.camera.aspect<1&&Math.abs(Bu.overallVelocityX)>.2&&Math.atan2(Math.abs(Bu.overallVelocityY),Math.abs(Bu.overallVelocityX))<Math.PI/6.923&&(Ku=this.cameraMotion.value.latitude),ju={longitude:Xu,latitude:Ku,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance},this.emit("wantsPanGesture",ju,Bu.isFinal))return;this.emit("gesture","pan",Ou,Bu.isFinal),this.emit("panGesture",ju,Bu.isFinal),this.userAction=!0,this.interiaMovement=!1;var Wu={longitude:ju.longitude,latitude:ju.latitude,fov:ju.fov};this.cameraMotion.set(Wu,0).catch(Qe$1),Bu.isFinal&&(this.emit("wantsInteriaPan",ju)||(this.interiaMovement=!0,Bu.velocityX,Bu.velocityY))}}},$u.prototype.onPinchGesture=function(Bu){var Ru=this.pinchState||{},Lu=Ru.distance;Ru.offsetY;var Ou=!1;if(Bu.type!=="pinchstart"){if(Bu.type==="pinchend"&&(Ou=!0,delete this.pinchState),Lu!==void 0){this.pinchState={distance:Lu};var Fu=Bu.pointers.map(function(Zu){return ii(Zu,["x","y"])});if(this.emit("wantsGesture","pinch",Fu,Ou))return;var Nu=ho$1(Lu/Bu.scale,this.minDistance,this.maxDistance);if(this.emit("wantsPinchGesture",Bu.scale,this.camera.pose.fov,Ou))return;this.emit("gesture","pinch",Fu,Ou),this.emit("pinchGesture",Bu.scale,this.camera.pose.fov,Ou),this.userAction=!0,this.locationMotion.set({distance:Nu},0).catch(Qe$1)}var Vu=this.panState,Uu=Bu.pointers.length;if(Bu.isFinal?delete this.panState:this.panState={pointerLength:Uu,x:Bu.center.x,y:Bu.center.y},Vu!==void 0&&Vu.pointerLength===Uu){var Gu=Bu.pointers.map(function(Zu){return ii(Zu,["x","y"])});if(!this.emit("wantsGesture","pinch",Gu,Ou)){var zu=Bu.pointers.map(function(Zu){return ii(Zu,["x","y"])});if(!this.emit("wantsGesture","pinch",zu,Ou)){var Hu={x:Bu.center.x-Vu.x,y:Bu.center.y-Vu.y},ju=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Qu=this.model.bounding,Xu=Qu.getCenter(new r$3.Vector3),Ku={x:(Qu.max.x-Qu.min.x)/90*this.cameraMotion.value.fov,y:(Qu.max.y-Qu.min.y)/90*this.cameraMotion.value.fov,z:(Qu.max.z-Qu.min.z)/90*this.cameraMotion.value.fov},Wu=(this.camera.position.y-Qu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),qu=this.renderer.getSize(new r$3.Vector2);ju.add(Hl$1(2*Hu.x*Wu/qu.y,this.camera.matrix)),ju.add(ql(2*Hu.y*Wu/qu.y,this.camera.up,this.camera.matrix)),ju.x=ho$1(ju.x,Xu.x-Ku.x,Xu.x+Ku.x),ju.z=ho$1(ju.z,Xu.z-Ku.z,Xu.z+Ku.z);var Yu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:ju,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",Yu,Bu.isFinal)||(this.emit("gesture","pan",zu,Bu.isFinal),this.emit("panGesture",Yu,Bu.isFinal),this.userAction=!0,this.locationMotion.set({x:ju.x,y:ju.y,z:ju.z},0).catch(Qe$1))}}}}else this.pinchState={distance:this.locationMotion.value.distance}},$u.prototype.onMouseWheel=function(Bu){var Ru=this,Lu=(Math.abs(Bu.deltaY)>Math.abs(Bu.deltaX)?Bu.deltaY:Bu.deltaX)/-60,Ou=[{x:Bu.clientX,y:Bu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ou,!1)){var Fu=ho$1(this.locationMotion.value.distance-Lu/2,this.minDistance,this.maxDistance);this.emit("wantsMouseWheel",Lu,this.camera.pose.fov,!1)||(this.emit("gesture","mouseWheel",Ou,!1),this.emit("mouseWheel",Lu,this.camera.pose.fov,!1),this.userAction=!0,this.locationMotion.set({distance:Fu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ru.mouseWheelState,Ru.emit("wantsGesture","mouseWheel",Ou,!0)||Ru.emit("wantsMouseWheel",Lu,Ru.camera.pose.fov,!0)||(Ru.emit("gesture","mouseWheel",Ou,!0),Ru.emit("mouseWheel",0,Ru.camera.pose.fov,!0))},200)})}},$u.prototype.onTapGesture=function(Bu){var Ru=Bu.pointers.map(function(Vu){return ii(Vu,["x","y"])});if(!this.emit("wantsGesture","tap",Ru,!0)){var Lu=this.relativeClientPosition(Bu.center),Ou=new r$3.Raycaster;if(Ou.setFromCamera(Lu,this.camera),!this.emit("wantsTapGesture",Ou,Lu,!0)){this.emit("gesture","tap",Ru,!0),this.emit("tapGesture",Ou,Lu,!0),this.interiaMovement=!1;var Fu=this.getForwardPanoIndexOrNot(Ou);if(!oo$1(Fu)){this.emit("panoSelected",Fu);var Nu={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Fu,Nu,!0)}}}},$u.prototype.onPressGesture=function(Bu,Ru){var Lu,Ou,Fu=[Bu];if(this.emit("wantsGesture","press",Fu,Ru))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;var Nu=this.relativeClientPosition(Bu),Vu=new r$3.Raycaster;if(Vu.setFromCamera(Nu,this.camera),this.emit("wantsPressGesture",Vu,Nu,Bu.delta,Ru))return(Ou=this.pressState)===null||Ou===void 0||Ou.stop(),void delete this.pressState;this.emit("gesture","press",Fu,Ru),this.emit("pressGesture",Vu,Nu,Bu.delta,Ru)},$u}(fa$1),Kl={type:"move"},Ul=function(){function _u(){this._targetRay=null,this._grip=null,this._hand=null,this._axes=[0,0]}return _u.prototype.getHandSpace=function(){return this._hand===null&&(this._hand=new r$3.Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},_u.prototype.getTargetRaySpace=function(){return this._targetRay===null&&(this._targetRay=new r$3.Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r$3.Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r$3.Vector3),this._targetRay},_u.prototype.getGripSpace=function(){return this._grip===null&&(this._grip=new r$3.Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r$3.Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r$3.Vector3),this._grip},_u.prototype.dispatchEvent=function($u){return this._targetRay!==null&&this._targetRay.dispatchEvent($u),this._grip!==null&&this._grip.dispatchEvent($u),this._hand!==null&&this._hand.dispatchEvent($u),this},_u.prototype.disconnect=function($u){return this.dispatchEvent({type:"disconnected",data:$u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},_u.prototype.getAxes=function(){return this._axes},_u.prototype.update=function($u,Bu,Ru){var Lu=null,Ou=null,Fu=null,Nu=this._targetRay,Vu=this._grip,Uu=this._hand;if($u&&$u.gamepad&&$u.gamepad.axes&&(this._axes=[$u.gamepad.axes[2],$u.gamepad.axes[3]]),$u&&Bu.session.visibilityState!=="visible-blurred")if(Nu!==null&&(Lu=Bu.getPose($u.targetRaySpace,Ru))!==null&&(Nu.matrix.fromArray(Lu.transform.matrix),Nu.matrix.decompose(Nu.position,Nu.rotation,Nu.scale),Lu.linearVelocity?(Nu.hasLinearVelocity=!0,Nu.linearVelocity.copy(Lu.linearVelocity)):Nu.hasLinearVelocity=!1,Lu.angularVelocity?(Nu.hasAngularVelocity=!0,Nu.angularVelocity.copy(Lu.angularVelocity)):Nu.hasAngularVelocity=!1,this.dispatchEvent(Kl)),Uu&&$u.hand){Fu=!0;for(var Gu=0,zu=$u.hand.values();Gu<zu.length;Gu++){var Hu=zu[Gu],ju=Bu.getJointPose(Hu,Ru);if(Uu.joints[Hu.jointName]===void 0){var Qu=new r$3.Group;Qu.matrixAutoUpdate=!1,Qu.visible=!1,Uu.joints[Hu.jointName]=Qu,Uu.add(Qu)}var Xu=Uu.joints[Hu.jointName];ju!==null&&(Xu.matrix.fromArray(ju.transform.matrix),Xu.matrix.decompose(Xu.position,Xu.rotation,Xu.scale),Xu.jointRadius=ju.radius),Xu.visible=ju!==null}var Ku=Uu.joints["index-finger-tip"],Wu=Uu.joints["thumb-tip"],qu=Ku.position.distanceTo(Wu.position);Uu.inputState.pinching&&qu>.025?(Uu.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:$u.handedness,target:this})):!Uu.inputState.pinching&&qu<=.015&&(Uu.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:$u.handedness,target:this}))}else Vu!==null&&$u.gripSpace&&(Ou=Bu.getPose($u.gripSpace,Ru))!==null&&(Vu.matrix.fromArray(Ou.transform.matrix),Vu.matrix.decompose(Vu.position,Vu.rotation,Vu.scale),Ou.linearVelocity?(Vu.hasLinearVelocity=!0,Vu.linearVelocity.copy(Ou.linearVelocity)):Vu.hasLinearVelocity=!1,Ou.angularVelocity?(Vu.hasAngularVelocity=!0,Vu.angularVelocity.copy(Ou.angularVelocity)):Vu.hasAngularVelocity=!1);return Nu!==null&&(Nu.visible=Lu!==null),Vu!==null&&(Vu.visible=Ou!==null),Uu!==null&&(Uu.visible=Fu!==null),this},_u}(),jl$1=function(_u){function $u(Bu,Ru,Lu){var Ou,Fu,Nu,Vu=this;return(Vu=_u.call(this)||this).isPanorama=(Ou=Lu==null?void 0:Lu.isPanorama)===null||Ou===void 0||Ou,Vu.machineType=(Fu=Lu==null?void 0:Lu.machineType)!==null&&Fu!==void 0?Fu:"Pico",Vu.renderer=Bu,Vu.gl=Ru,Vu.enabled=!1,Vu.session=null,Vu.referenceSpaceType=(Nu=Lu==null?void 0:Lu.referenceSpaceType)!==null&&Nu!==void 0?Nu:"local-floor",Vu.referenceSpace=null,Vu.controllers=[new Ul,new Ul],Vu.inputSourcesMap=new Map,Vu.cameraVR=new r$3.ArrayCamera,Vu.cameraL=new r$3.PerspectiveCamera,Vu.cameraR=new r$3.PerspectiveCamera,Vu.cameraL.viewport=new r$3.Vector4,Vu.cameraR.viewport=new r$3.Vector4,Vu.cameraL.layers.enable(1),Vu.cameraR.layers.enable(2),Vu.cameraVR.layers.enable(1),Vu.cameraVR.layers.enable(2),Vu.isPresenting=!1,Vu.currentDepthNear=null,Vu.currentDepthFar=null,Vu.cameraLPos=new r$3.Vector3,Vu.cameraRPos=new r$3.Vector3,Vu}return t$3.__extends($u,_u),$u.prototype.getController=function(Bu){var Ru=this.controllers[Bu];return Ru||console.warn("no controller find"),Ru.getTargetRaySpace()},$u.prototype.getCameras=function(){return{cameraL:this.cameraL,cameraR:this.cameraR,cameraVR:this.cameraVR}},$u.prototype.updateCamera=function(Bu,Ru){Ru===null?Bu.matrixWorld.copy(Bu.matrix):Bu.matrixWorld.multiplyMatrices(Ru.matrixWorld,Bu.matrix),Bu.matrixWorldInverse.getInverse(Bu.matrixWorld)},$u.prototype.setProjectionFromUnion=function(Bu,Ru,Lu){this.cameraLPos.setFromMatrixPosition(Ru.matrixWorld),this.cameraRPos.setFromMatrixPosition(Lu.matrixWorld);var Ou=this.cameraLPos.distanceTo(this.cameraRPos),Fu=Ru.projectionMatrix.elements,Nu=Lu.projectionMatrix.elements,Vu=Fu[14]/(Fu[10]-1),Uu=Fu[14]/(Fu[10]+1),Gu=(Fu[9]+1)/Fu[5],zu=(Fu[9]-1)/Fu[5],Hu=(Fu[8]-1)/Fu[0],ju=(Nu[8]+1)/Nu[0],Qu=Vu*Hu,Xu=Vu*ju,Ku=Ou/(-Hu+ju),Wu=Ku*-Hu;Ru.matrixWorld.decompose(Bu.position,Bu.quaternion,Bu.scale),Bu.translateX(Wu),Bu.translateZ(Ku),Bu.matrixWorld.compose(Bu.position,Bu.quaternion,Bu.scale),Bu.matrixWorldInverse.getInverse(Bu.matrixWorld);var qu=Vu+Ku,Yu=Uu+Ku,Zu=Qu-Wu,_h=Xu+(Ou-Wu),ep=Gu*Uu/Yu*qu,ip=zu*Uu/Yu*qu;Bu.projectionMatrix.makePerspective(Zu,_h,ep,ip,qu,Yu)},$u.prototype.getCamera=function(Bu){this.cameraVR.near=this.cameraR.near=this.cameraL.near=Bu.near,this.cameraVR.far=this.cameraR.far=this.cameraL.far=Bu.far,!this.session||this.currentDepthNear===this.cameraVR.near&&this.currentDepthFar===this.cameraVR.far||(this.session.updateRenderState({depthNear:this.cameraVR.near,depthFar:this.cameraVR.far}),this.currentDepthNear=this.cameraVR.near,this.currentDepthFar=this.cameraVR.far);var Ru=Bu.parent,Lu=this.cameraVR.cameras;this.updateCamera(this.cameraVR,Ru);for(var Ou=0;Ou<Lu.length;Ou++)this.updateCamera(Lu[Ou],Ru);Bu.matrixWorld.copy(this.cameraVR.matrixWorld);for(var Fu=Bu.children,Nu=(Ou=0,Fu.length);Ou<Nu;Ou++)Fu[Ou].updateMatrixWorld(!0);return Lu.length===2?this.setProjectionFromUnion(this.cameraVR,this.cameraL,this.cameraR):this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix),this.cameraVR},$u.prototype.updateInputSources=function(Bu){if(this.session){for(var Ru=this.session.inputSources,Lu=0;Lu<this.controllers.length;Lu++)this.inputSourcesMap.set(Ru[Lu],this.controllers[Lu]);for(Lu=0;Lu<Bu.removed.length;Lu++){var Ou=Bu.removed[Lu];(Fu=this.inputSourcesMap.get(Ou))&&(Fu.dispatchEvent({type:"disconnected",data:Ou}),this.inputSourcesMap.delete(Ou))}for(Lu=0;Lu<Bu.added.length;Lu++){var Fu;Ou=Bu.added[Lu],(Fu=this.inputSourcesMap.get(Ou))&&Fu.dispatchEvent({type:"connected",data:Ou})}}else console.warn("session is lose!")},$u.prototype.onSessionEvent=function(Bu){var Ru=this.inputSourcesMap.get(Bu.inputSource);Ru&&Ru.dispatchEvent({type:Bu.type})},$u.prototype.onSessionEnd=function(){this.inputSourcesMap.forEach(function(Bu,Ru){Bu.disconnect(Ru)}),this.inputSourcesMap.clear(),this.renderer.setFramebuffer(null),this.renderer.setRenderTarget(this.renderer.getRenderTarget()),this.isPresenting=!1,this.session=null,at.shared.setContext(null),this.emit("webXRSessionEnd")},$u.prototype.onRequestReferenceSpace=function(Bu){this.referenceSpace=Bu,this.isPresenting=!0,this.emit("webXRSessionStart")},$u.prototype.setSession=function(Bu){var Ru=this;if(this.session=Bu,this.session){this.session.addEventListener("select",function(Ou){Ru.onSessionEvent(Ou)}),this.session.addEventListener("selectstart",function(Ou){Ru.onSessionEvent(Ou)}),this.session.addEventListener("selectend",function(Ou){Ru.onSessionEvent(Ou)}),this.session.addEventListener("squeeze",function(Ou){Ru.onSessionEvent(Ou)}),this.session.addEventListener("squeezestart",function(Ou){Ru.onSessionEvent(Ou)}),this.session.addEventListener("squeezeend",function(Ou){Ru.onSessionEvent(Ou)}),this.session.addEventListener("end",function(Ou){Ru.onSessionEnd()});var Lu=this.gl.getContextAttributes();this.gl.makeXRCompatible().then(function(){var Ou={antialias:Lu==null?void 0:Lu.antialias,alpha:Lu==null?void 0:Lu.alpha,depth:Lu==null?void 0:Lu.depth,stencil:Lu==null?void 0:Lu.stencil,framebufferScaleFactor:1};if(Ru.session){switch(Ru.machineType){case"Pico":Ru.session.updateRenderState({baseLayer:new XRWebGLLayer(Ru.session,Ru.gl,Ou)});break;case"Oculus":Ru.session.updateRenderState({layers:[new XRWebGLLayer(Ru.session,Ru.gl,Ou)]});break;default:Ru.machineType}Ru.session.requestReferenceSpace(Ru.referenceSpaceType).then(function(Fu){Ru.onRequestReferenceSpace(Fu)}),Ru.session.addEventListener("inputsourceschange",function(Fu){Ru.updateInputSources(Fu)})}else console.error("session is lose while set session!")})}},$u}(Fe),Gl$1=["webXRSessionStart","webXRSessionEnd"];function Wl$1(_u,$u){if(!$u)return _u;var Bu=_u.match(/\d+_[a-z].png/);return _u.substring(0,Bu.index)+$u+"/"+_u.substring(Bu.index)}var Xl=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Yl=new r$3.Vector3(-1,1,1),Zl=function(_u){function $u(Bu){var Ru=_u.call(this,Bu)||this;Ru.xrManager=new jl$1(Ru.renderer,Ru.renderer.getContext()),Ru.xrControllerRay=new r$3.Raycaster,Ru.boundingMesh.visible=!0,Ru.panoResources={},Ru.panoResources[Ru.locationMotion.keyframes[0].key=Ru.locationMotion.keyframes[1].key=Kr()]={panoIndex:Ru.currentPanoIndex,workCode:Ru.work.workCode,leftPanoPicture:null,position:Ru.camera.pose.offset.clone(),effect:"fade"};var Lu=at.shared.getContext();if(!Lu)return console.error("\u83B7\u53D6session\u5931\u8D25\uFF0C\u8BF7\u9000\u51FA\u91CD\u8BD5"),Ru;Lu.addEventListener("select",function(Uu){Ru.emit("webXRSelected","Select"),Ru.checkSelectedPano()}),Lu.addEventListener("squeeze",function(Uu){Ru.emit("webXRSelected","Squeeze")}),Ru.xrManager.setSession(Lu);for(var Ou=function(Uu){Fu.xrManager.on(Uu,function(){for(var Gu=[],zu=0;zu<arguments.length;zu++)Gu[zu]=arguments[zu];Ru.emit.apply(Ru,t$3.__spreadArray([Uu],Gu,!1))})},Fu=this,Nu=0,Vu=Gl$1;Nu<Vu.length;Nu++)Ou(Vu[Nu]);return Ru}return t$3.__extends($u,_u),$u.parseArgs=function(Bu){var Ru=t$3.__assign(t$3.__assign({},Bu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Ru)},$u.initAnimationEndPose=function(Bu){var Ru=this.parseArgs(Bu);return _u.initAnimationEndPose.call(this,Ru)},$u.prototype.moveToPano=function(Bu,Ru,Lu){var Ou,Fu,Nu,Vu=this,Uu=this.work.observers[Bu],Gu=t$3.__assign({key:"pano.".concat(Bu),basisLoaderInitialized:Ei$1.isInitialized()},ii(this.imageOptions,["format","size","quality"])),zu=(Ou=this.imageOptions.transform)!==null&&Ou!==void 0?Ou:ct$1,Hu={right:Wl$1(zu(Uu.images.right,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".right")}))),left:Wl$1(zu(Uu.images.left,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".left")}))),up:Wl$1(zu(Uu.images.up,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".up")}))),down:Wl$1(zu(Uu.images.down,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".down")}))),front:Wl$1(zu(Uu.images.front,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".front")}))),back:Wl$1(zu(Uu.images.back,t$3.__assign(t$3.__assign({},Gu),{key:"".concat(Gu.key,".back")})))},ju={key:"pano_luminance.".concat(Bu),basisLoaderInitialized:Ei$1.isInitialized(),size:Gu.size?Gu.size/2:1024},Qu=this.enableIOSEDR&&Uu.images.luminance?{right:zu(Uu.images.luminance.right,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".right")})),left:zu(Uu.images.luminance.left,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".left")})),up:zu(Uu.images.luminance.up,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".up")})),down:zu(Uu.images.luminance.down,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".down")})),front:zu(Uu.images.luminance.front,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".front")})),back:zu(Uu.images.luminance.back,t$3.__assign(t$3.__assign({},ju),{key:"".concat(ju.key,".back")}))}:null,Xu="pano:"+va(Hu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Xu)return;var Ku=this.pendingTextureTask.panoIndex;(Fu=this.panoMeshes[Ku])===null||Fu===void 0||Fu.setProgress(0),this.emit("textureAbort",Ku,Uu),this.pendingTextureTask.onError(new Error("texture aborted"))}var Wu,qu=this.model.getMaterial()||{},Yu=qu.pano0,Zu=qu.pano1;if((Yu==null?void 0:Yu.map.name)===Xu?Wu=Yu:(Zu==null?void 0:Zu.map.name)===Xu&&(Wu=Zu),Wu){var _h={panoIndex:Bu,workCode:this.work.workCode,effect:(Nu=Ru.effect)!==null&&Nu!==void 0?Nu:"fade",leftPanoPicture:{map:Wu.map,luminanceMap:Wu.luminanceMap,matrix:new r$3.Matrix4().compose(Uu.position,Uu.quaternion,Yl)},position:Uu.position.clone()};this.doMoveToPano(Bu,_h,Ru,Lu)}else this.pending=!0,this.pendingTextureTask={panoIndex:Bu,hash:Xu,onLoad:function(ep,ip){var ap,sp;if(Vu.pending=!1,Vu.destroyed)ep.body.dispose();else{ep.body.name=Xu;var Ju={panoIndex:Bu,workCode:Vu.work.workCode,effect:(ap=Ru.effect)!==null&&ap!==void 0?ap:"fade",leftPanoPicture:{map:ep.body,luminanceMap:(sp=ip==null?void 0:ip.body)!==null&&sp!==void 0?sp:null,matrix:new r$3.Matrix4().compose(Uu.position,Uu.quaternion,Yl)},position:Uu.position.clone()};Vu.doMoveToPano(Bu,Ju,Ru,Lu)}},onError:function(ep){Vu.pending=!1,Ru.moveCancelCallback&&Ru.moveCancelCallback(),Vu.emit("panoLoadError",ep,Bu),Vu.emit("moveToPanoCanceled",Bu)}},Promise.all([this.textureLoader.loadCube(Hu,{format:r$3.RGBFormat},void 0,void 0,function(ep){var ip,ap;((ip=Vu.pendingTextureTask)===null||ip===void 0?void 0:ip.hash)===Xu&&((ap=Vu.panoMeshes[Bu])===null||ap===void 0||ap.setProgress(ep)),Vu.emit("textureLoading",ep,Bu,Uu)}),Qu?this.textureLoader.loadCube(Qu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(ep){var ip,ap,sp=ep[0],Ju=ep[1];((ip=Vu.pendingTextureTask)===null||ip===void 0?void 0:ip.hash)===Xu?(Vu.pendingTextureTask.onLoad(sp,Ju),(ap=Vu.panoMeshes[Bu])===null||ap===void 0||ap.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureLoaded",Bu,Uu,sp.meta)):(sp.body.dispose(),Ju==null||Ju.body.dispose())}).catch(function(ep){var ip,ap;((ip=Vu.pendingTextureTask)===null||ip===void 0?void 0:ip.hash)===Xu&&(Vu.pendingTextureTask.onError(ep),(ap=Vu.panoMeshes[Bu])===null||ap===void 0||ap.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureError",ep,Bu,Uu),Vu.emit("error",ep))}),this.emit("textureStartLoad",Bu,Uu)},$u.prototype.doMoveToPano=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu=this;Lu===void 0&&(Lu={}),this.userAction=Ou;var Gu=_e(),zu=Kr();this.panoResources[zu]=Ru;var Hu,ju,Qu;if(this.locationMotion.ended){var Xu=this.locationMotion.getKeyFrameSegment(Gu);Xu[0];var Ku=Xu[1],Wu=this.locationMotion.value,qu=this.panoResourceFromLocationMotionKeyframe(Ku).position,Yu=Ru.position;Hu=Math.max(qu.distanceTo(Yu),1),ju=[{key:Ku.key,progress:0,value:t$3.__assign(t$3.__assign({},Wu),{count:0})},{key:zu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Qu=0}else{var Zu=this.locationMotion.getKeyFrameSegment(Gu),_h=Zu[0],ep=(Ku=Zu[1],Wu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(_h).position),ip=(qu=this.panoResourceFromLocationMotionKeyframe(Ku).position,Yu=Ru.position,Ku.value.count-Wu.count),ap=Math.max(ep.distanceTo(qu),1)*ip;Hu=ap+Math.max(qu.distanceTo(Yu),1),ju=[{key:_h.key,progress:0,value:t$3.__assign({},Wu)},{key:Ku.key,progress:ap/Hu,value:Ku.value},{key:zu,progress:1,value:{count:Ku.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var sp=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ju=this.locationMotionKeyframesLength(ju);Qu=this.locationMotion.getProgressVelocity(Gu)*sp/Ju}var _f=this.calculateMovingDuration(Lu.duration,Hu),np={longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},tp={longitude:(Fu=np.longitude)!==null&&Fu!==void 0?Fu:this.camera.pose.longitude,latitude:(Nu=np.latitude)!==null&&Nu!==void 0?Nu:this.camera.pose.latitude,fov:(Vu=np.fov)!==null&&Vu!==void 0?Vu:this.camera.pose.fov,offset:Ru.position.clone(),distance:0};Lu.moveStartCallback&&Lu.moveStartCallback(Bu,tp),this.emit("panoWillArrive",Bu,tp,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(np,_f).catch(Qe$1),this.locationMotion.setKeyframes(ju,_f,Qu).then(function(){var rp,op,lp,up={longitude:Uu.camera.pose.longitude,latitude:Uu.camera.pose.latitude,fov:Uu.camera.pose.fov,offset:Uu.camera.pose.offset.clone(),distance:0};Lu.moveEndCallback&&Lu.moveEndCallback(Bu,up),Uu.emit("panoArrived",Bu,up,Ou);var cp=Uu.work.observers[Uu.currentPanoIndex];if(cp&&cp.video&&Uu.videoTexture&&Uu.videoTexture.image instanceof HTMLVideoElement){var Ap=Xl.clone().multiply((lp=(op=(rp=Uu.model.getMaterial())===null||rp===void 0?void 0:rp.pano1)===null||op===void 0?void 0:op.matrix)!==null&&lp!==void 0?lp:new r$3.Matrix4).multiply(cp.video.matrix),yp={map:Uu.videoTexture,size:cp.video.size,matrix:Ap,alpha:1},Ip=Kr(),Ep=Uu.videoTexture.image;Ep.setAttribute("uuid",Ip),xa().then(function(Vp){Vp&&cp.video&&Ep.getAttribute("uuid")===Ip&&(Ep.oncanplay=function(){Ep.oncanplay=Qe$1,Ep.play()},Ep.ontimeupdate=function(){Ep.currentTime>.5&&(Ep.ontimeupdate=Qe$1,Uu.panoVideo.setMaterial(yp))},Ep.src=cp.video.source)}).catch(function(){Ep.removeAttribute("uuid")})}},function(){Lu.moveCancelCallback&&Lu.moveCancelCallback(),Uu.emit("moveToPanoCanceled",Bu)})},$u.prototype.checkSelectedPano=function(){var Bu=this,Ru=this.xrControllerRay;this.interiaMovement=!1;var Lu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Ou=null,Fu=this.work.observers[this.currentPanoIndex];if(!Fu)return Ou;var Nu=Fu.accessibleNodes.filter(function(rp){if(rp===Bu.currentPanoIndex)return!1;var op=Bu.work.observers[rp];return!(op.position.distanceTo(Bu.camera.position)>Bu.maxAccessibleDistance)&&(op.loadable||op.active)}),Vu=this.model.intersectRaycaster(Ru)[0];if(Vu){var Uu=ta(Nu,function(rp){var op=Bu.work.observers[rp].standingPosition.clone();return op.clone().sub(Bu.camera.position).setY(0).angleTo(Lu)>Math.PI/2?1/0:op.distanceTo(Vu.point)},!0),Gu=Uu[0];Uu[1]<this.panoTapTriggerRadius&&(Ou=Gu)}oo$1(Ou)&&(Ou=this.getForwardPanoIndexOrNot(Ru));for(var zu=0,Hu=this.locationMotion.keyframes;zu<Hu.length;zu++){var ju=Hu[zu],Qu=this.panoResourceFromLocationMotionKeyframe(ju);if(!(ju.progress<this.locationMotion.progress)&&Qu.panoIndex===Ou){Ou=null;break}}if(this.emit("panoSelected",Ou),oo$1(Ou))return this.locationMotion.ended===!0&&this.cameraBounce(),Ou;var Xu=this.work.observers[Ou];if(!Xu.active)return this.panoMeshes[Ou]&&(this.panoMeshes[Ou].setDisabled(!1),this.panoMeshes[Ou].setLoading(!0)),Ou;for(var Ku={effect:"fade"},Wu=Math.PI/6,qu=Math.PI/12,Yu=new r$3.Vector3(0,1,0),Zu=Xu.position.clone().setY(0).sub(Fu.position.clone().setY(0)).normalize(),_h=Zu.clone().applyAxisAngle(Yu,Wu),ep=Zu.clone().applyAxisAngle(Yu,-Wu),ip=[],ap=[],sp=[],Ju=0,_f=Xu.accessibleNodes;Ju<_f.length;Ju++)if((Gu=_f[Ju])!==this.currentPanoIndex&&Gu!==Ou){var np=this.work.observers[Gu].position.clone().sub(Xu.position).setY(0);Zu.angleTo(np)<Wu?sp.push(np):_h.angleTo(np)<Wu?ip.push(np):ep.angleTo(np)<Wu&&ap.push(np)}var tp=(sp.length>0?sp:t$3.__spreadArray(t$3.__spreadArray([],ip,!0),ap,!0)).slice().sort(function(rp,op){return rp.angleTo(Zu)-op.angleTo(Zu)})[0];return tp&&tp.angleTo(Lu)>qu&&(Ku.longitude=Math.atan2(-tp.x,-tp.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Ku.latitude=ho$1(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Ku.fov=this.defaultFov),this.emit("wantsMoveToPano",Ou,Ku,!0),Ou},$u.prototype.destroy=function(){_u.prototype.destroy.call(this)},$u.prototype.isReady=function(){return!1},$u.prototype.updateTime=function(Bu,Ru){for(var Lu,Ou,Fu,Nu=[],Vu=2;Vu<arguments.length;Vu++)Nu[Vu-2]=arguments[Vu];var Uu={},Gu={};if(this.locationMotion.ended===!1){this.locationMotion.update(Bu);var zu=this.locationMotion.getKeyFrameSegment(Bu),Hu=zu[0],ju=zu[1],Qu=this.panoResourceFromLocationMotionKeyframe(Hu),Xu=this.panoResourceFromLocationMotionKeyframe(ju),Ku=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Wu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),qu=new r$3.Vector3().copy(Qu.position),Yu=new r$3.Vector3().copy(Xu.position),Zu=this.locationMotion.value.count-ju.value.count+1;Uu.modelAlpha=this.locationMotion.value.modelAlpha,Uu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Uu.useBlackTransition=Xu.effect==="instant",Xu.leftPanoPicture&&(Zu<1?Qu.leftPanoPicture&&(Uu.pano0=Qu.leftPanoPicture):Uu.pano0=Xu.leftPanoPicture,Uu.pano1=Xu.leftPanoPicture),Xu.effect==="fade"&&(Uu.pano0&&Qu.leftPanoPicture&&(Uu.pano0={map:Uu.pano0.map,luminanceMap:Uu.pano0.luminanceMap,matrix:Qu.leftPanoPicture.matrix.clone().setPosition(Xu.position)}),qu.copy(Yu)),Uu.progress=Zu,Gu.distance=this.locationMotion.value.distance,Gu.offset=new r$3.Vector3(qu.x+(Yu.x-qu.x)*Zu,qu.y+(Yu.y-qu.y)*Zu,qu.z+(Yu.z-qu.z)*Zu);for(var _h=[],ep=[],ip=0,ap=this.locationMotion.keyframes;ip<ap.length;ip++){var sp=ap[ip],Ju=sp.key,_f=sp.progress;Ju!==void 0&&(_h.push(Ju),_f>=this.locationMotion.progress&&ep.push(Ju))}for(var np=0,tp=Object.keys(this.panoResources);np<tp.length;np++){var rp=tp[np];if(!(ep.indexOf(rp)>=0)){var op=this.panoResources[rp];if(op.leftPanoPicture){var lp=op.leftPanoPicture.map;if(lp){if(lp===((Lu=Uu.pano0)===null||Lu===void 0?void 0:Lu.map)||lp===((Ou=Uu.pano1)===null||Ou===void 0?void 0:Ou.map))continue;lp.dispose(),(Fu=op.leftPanoPicture.luminanceMap)===null||Fu===void 0||Fu.dispose(),op.leftPanoPicture=null}}_h.indexOf(rp)>=0||delete this.panoResources[rp]}}Qu.workCode===Xu.workCode?this.currentPanoIndex=Zu<.5?Qu.panoIndex:Xu.panoIndex:this.currentPanoIndex=Xu.panoIndex,this.emit("movingToPano",Wu.panoIndex,Ku.panoIndex,this.locationMotion.progress),this.tiling.object.visible=!1}else this.tiling.object.visible=this.tileLevelForFov!==!1;this.cameraMotion.ended===!1&&(this.cameraMotion.update(Bu),Gu.longitude=this.cameraMotion.value.longitude,Gu.latitude=this.cameraMotion.value.latitude,Gu.fov=this.cameraMotion.value.fov),ia$1(Uu)===!1&&(this.model.setMaterial(Uu),this.boundingMesh.setMaterial(Uu)),ia$1(Gu)===!1&&this.setCamera(Gu),Nu[0];var up=Nu[1];if(up)if(this.xrManager.session){var cp=this.xrManager.referenceSpace;if(cp){var Ap=this.xrManager.cameraVR,yp=this.xrManager.cameraL,Ip=this.xrManager.cameraR,Ep=[yp,Ip],Vp=up.getViewerPose(cp),$p=new r$3.Vector3(0,0,0);if(Vp){var kp=void 0;switch(this.xrManager.machineType){case"Pico":kp=this.xrManager.session.renderState.baseLayer;break;case"Oculus":var Bp=this.xrManager.session.renderState.layers;Bp&&(kp=Bp[0]);break;default:this.xrManager.machineType}var fp=Vp.views;if(!kp)return void console.error("no layer found");this.renderer.setFramebuffer(kp.framebuffer);var dp=!1;fp.length!==Ap.cameras.length&&(Ap.cameras.length=0,dp=!0);for(var bp=0;bp<fp.length;bp++){var gp=fp[bp],wp=kp.getViewport(gp),Sp=Ep[bp];Sp.matrix.fromArray(gp.transform.matrix);var Cp=new r$3.Vector3,Lp=new r$3.Quaternion,zp=new r$3.Vector3;Sp.matrix.decompose(Cp,Lp,zp);var Dp=new r$3.Vector3,hp=new r$3.Quaternion,vp=new r$3.Vector3;this.camera.matrix.decompose(Dp,hp,vp),$p.copy(Dp),Sp.matrix.compose(Dp,Lp,zp),Sp.projectionMatrix.fromArray(gp.projectionMatrix),Sp.viewport.set(wp.x,wp.y,wp.width,wp.height),bp===0&&Ap.matrix.copy(Sp.matrix),dp===!0&&Ap.cameras.push(Sp)}}var Np=this.xrManager.session.inputSources;for(bp=0;bp<this.xrManager.controllers.length;bp++){var Fp=this.xrManager.controllers[bp],qp=Np[bp];Fp.update(qp,up,cp)}var jp=this.xrManager.getController(0),Xp=jp.position.add($p);this.xrControllerRay.set(Xp,new r$3.Vector3(0,0,-1).applyEuler(jp.rotation));var rm=this.model.intersectRaycaster(this.xrControllerRay);if(rm.length>=1&&rm[0].face){var em=rm[0].face.normal,lm=em.clone().multiplyScalar(.05),Zp=rm[0].point.clone().add(lm);this.intersectMesh.position.copy(Zp);var im=Zp.clone().add(lm);if(this.intersectMesh.lookAt(im),Math.abs(em.y)>.99){var Jp=this.camera.position.clone().sub(Zp);this.intersectMesh.rotation.z=-Math.atan2(Jp.z,Jp.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",rm[0],this.intersectMesh)}if(this.camera.pose.distance>.1)for(var am=0;am<this.work.observers.length;am++)(cm=this.panoMeshes[am])&&(cm.visible=!1);else{var Pp=this.work.observers[this.currentPanoIndex];if(Pp){var tm=Pp.visibleNodes.concat(this.currentPanoIndex),sm=this.getForwardPanoIndexOrNot();for(am=0;am<this.work.observers.length;am++){var cm,um=this.work.observers[am];if(cm=this.panoMeshes[am])if(um.loadable||um.active)if(tm.indexOf(am)!==-1){cm.visible=!0;var vm=cm.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);cm.setCurrent(sm===am),cm.setOpacity(vm<.01?0:ho$1(1.4/vm,.5,.7)),cm.updateTime&&cm.updateTime(Bu,Ru)}else cm.visible=!1,cm.setOpacity(0);else cm.visible=!1,cm.setOpacity(0)}}}this.needsRender=!0}}else console.error("session\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");else console.error("xrFrame\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5")},$u.prototype.render=function(){var Bu=this.xrManager.getCamera(this.camera);this.renderer.render(this.scene,Bu)},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Bu){return this.panoResources[Bu.key]},$u.prototype.prepareForMoveToPano=function(Bu){var Ru=this,Lu={useXRBlackTransition:!0},Ou=_e(),Fu=0;return new Promise(function(Nu,Vu){var Uu=setInterval(function(){if((Fu=Math.min(1,(_e()-Ou)/1e3))>=1)return Lu.useXRBlackTransition=!1,Lu.progress=0,Ru.model.setMaterial(Lu),clearInterval(Uu),void Nu(!0);Lu.progress=Fu,Ru.model.setMaterial(Lu)},50)})},$u}(Xa$1),Jl=["Panorama","DepthPanorama","Model"],$l$1={Floorplan:Aa,Topview:ga$1,Panorama:Xa$1,VRPanorama:kl$1,Model:Dl$1,DepthPanorama:_l$1,Mapview:zl$1,XRPanorama:Zl};function eu$1(_u){for(var $u=0,Bu=Jl;$u<Bu.length;$u++){var Ru=Bu[$u];if(typeof _u=="string"){if(Ru===_u)return!0}else if(_u instanceof fa$1&&_u instanceof $l$1[Ru])return!0}return!1}var tu$1=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError","webXRSessionStart","webXRSessionEnd","webXRSelected"];function iu$1(_u){for(var $u,Bu,Ru={},Lu=0,Ou=_u.split(/(\;|\,)/);Lu<Ou.length;Lu++){var Fu=Ou[Lu].split("="),Nu=($u=Fu[0])===null||$u===void 0?void 0:$u.trim(),Vu=(Bu=Fu[1])===null||Bu===void 0?void 0:Bu.trim();Nu&&Vu&&(Ru[Nu]=Vu)}return Ru}function nu$1(){for(var _u,$u=document.getElementsByTagName("meta"),Bu=0;Bu<$u.length;Bu++){var Ru=$u[Bu];if(Ru.getAttribute("name")==="viewport"){var Lu=iu$1((_u=Ru.getAttribute("content"))!==null&&_u!==void 0?_u:""),Ou=Number(Lu["initial-scale"]);if(!isNaN(Ou))return Ou}}return 1}var ru$1=[351,63],ou$1=[20,20],su$1=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),au$1=new Float32Array([0,0,1,0,0,1,1,1]),lu$1=new Uint8Array([0,1,2,1,3,2]),uu$1=new r$3.BufferGeometry;uu$1.setAttribute("position",new r$3.BufferAttribute(su$1,3)),uu$1.setAttribute("uv",new r$3.BufferAttribute(au$1,2)),uu$1.setIndex(new r$3.BufferAttribute(lu$1,1));var hu$1=new r$3.MeshBasicMaterial({transparent:!0,depthTest:!1}),cu$1=new r$3.Mesh(uu$1,hu$1),du$1=new r$3.Scene;du$1.add(cu$1);var pu$1=new r$3.OrthographicCamera(-.5,.5,.5,-.5,.1,1);pu$1.position.set(0,0,.5),pu$1.lookAt(0,0,0);var fu$1=new r$3.Vector4,Au$1=new r$3.Vector4;function gu$1(_u){if(hu$1.map){var $u=_u.getViewport(fu$1),Bu=_u.getScissor(Au$1),Ru=_u.getScissorTest(),Lu=_u.autoClear;_u.setViewport(Bu.x+ou$1[0]/3,Bu.y+ou$1[1]/3,ru$1[0]/3,ru$1[1]/3),_u.setScissor(Bu.x+ou$1[0]/3,Bu.y+ou$1[1]/3,ru$1[0]/3,ru$1[1]/3),_u.setScissorTest(!0),_u.autoClear=!1,_u.render(du$1,pu$1),_u.setViewport($u),_u.setScissor(Bu),_u.setScissorTest(Ru),_u.autoClear=Lu}else{var Ou=new r$3.Texture,Fu=new Image;Fu.onload=function(){Ou.image=Fu,Ou.wrapS=r$3.ClampToEdgeWrapping,Ou.wrapT=r$3.ClampToEdgeWrapping,Ou.minFilter=r$3.LinearFilter,Ou.needsUpdate=!0,hu$1.needsUpdate=!0,Fu.onload=function(){}},Fu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",hu$1.map=Ou}}var mu$1=new r$3.Box3(new r$3.Vector3(-50,-50,-50),new r$3.Vector3(50,50,50)),vu$1=function(_u){return _u.replace("//vrlab-public.ljcdn.com/","//vr-public.realsee-cdn.cn/").replace("//vrlab-image4.ljcdn.com/","//vr-image-4.realsee-cdn.cn/").replace("//vrlab-image3.ljcdn.com/","//vr-image-3.realsee-cdn.cn/").replace("//vrlab-image2.ljcdn.com/","//vr-image-2.realsee-cdn.cn/").replace("//vrlab-image1.ljcdn.com/","//vr-image-1.realsee-cdn.cn/")},yu$1=new r$3.Vector2,bu$1=new r$3.Frustum,xu$1=new r$3.Matrix4,wu$1=new WeakMap,Eu$1=new WeakMap,Mu=function(_u){function $u(Bu){Bu===void 0&&(Bu={});var Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu=this;if((Qu=_u.call(this)||this).ident=Kr(),Iu$1.instances[Qu.ident]=Qu,Qu.renderSwitch01=0,Qu.panoIndex=0,Qu.needsRender=!1,Qu.onlyRenderIfNeeds=(Ru=Bu.onlyRenderIfNeeds)===null||Ru===void 0||Ru,Qu.imageOptions=t$3.__assign({},(Lu=Bu.imageOptions)!==null&&Lu!==void 0?Lu:{}),Qu.textureOptions=t$3.__assign({},(Ou=Bu.textureOptions)!==null&&Ou!==void 0?Ou:{}),Qu.poweredByRealsee=(Fu=Bu.poweredByRealsee)===null||Fu===void 0||Fu,Qu.extraElements=[],Qu.controllerInits={Panorama:Object.assign({},Bu.panorama),Model:Object.assign({},Bu.model),Floorplan:Object.assign({},Bu.floorplan),Topview:Object.assign({},Bu.topview),Mapview:Object.assign({},Bu.mapview),DepthPanorama:Object.assign({},Bu.depthPanorama),VRPanorama:Object.assign({},Bu.vrPanorama),XRPanorama:Object.assign({},Bu.xrPanorama)},Qu.fps={testCount:0,testTime:_e()},Qu.modeChangeDuration=(Nu=Bu.modeChangeDuration)!==null&&Nu!==void 0?Nu:800,Qu.panoramaLikeSavedPose={},typeof window!="undefined")if(Bu.renderer)Bu.renderer instanceof It$1&&Qu.throwError(new Error("cannot render a internal renderer")),Qu.renderer=Bu.renderer;else try{Qu.renderer=new It$1({preserveDrawingBuffer:Bu.preserveDrawingBuffer,backgroundColor:Bu.backgroundColor,backgroundAlpha:Bu.backgroundAlpha,antialias:Bu.antialias,webgl2:Bu==null?void 0:Bu.webgl2});var Xu=nu$1();Qu.renderer.setPixelRatio(Xu===1?window.devicePixelRatio:1),Qu.renderer.setSize(512,512)}catch(sp){sp instanceof Error&&Qu.throwError(sp)}Qu.getPixelsRenderTarget=new r$3.WebGLRenderTarget(1,1,{encoding:(Uu=(Vu=Qu.renderer)===null||Vu===void 0?void 0:Vu.outputEncoding)!==null&&Uu!==void 0?Uu:r$3.sRGBEncoding}),Qu.scissor=Object.assign({left:0,bottom:0,width:1,height:1},Bu.scissor),Qu.camera=new Lt(80),Qu.scene=new St$1,Qu.lastLoadWorkTask=Promise.resolve(),Qu.requestProxy=(Gu=Bu.requestProxy)!==null&&Gu!==void 0?Gu:vu$1,Qu.networkSubscribe=new tt,Qu.networkSubscribe.on("network",function(sp,Ju,_f,np){var tp;Qu.emit("network",sp,Ju,_f,np),(tp=Qu.analysis)===null||tp===void 0||tp.network(Qu.work,sp,Ju,_f,np)}),Qu.model=new uo$1({allowHosts:[],requestProxy:Qu.requestProxy,networkSubscribe:Qu.networkSubscribe});var Ku=Ks$1(mu$1);Ku.name="model_empty",Qu.model.add(Ku),Qu.model.visible=!1,Qu.readyCallbacks=[],Qu.modelPending=!1,Qu.syncingState=!1,Qu.scene.add(Qu.model),Qu.helperGroup=new r$3.Group,Qu.helperGroup.name="helper",Qu.scene.add(Qu.helperGroup),Qu.videoTexture=new r$3.VideoTexture(Bu.videoInstance||function(){var sp=document.createElement("video");sp.loop=!0,sp.autoplay=!0,sp.playsInline=!0,sp.muted=!0,sp.crossOrigin="";var Ju=function(){document.removeEventListener("touchstart",Ju,!1),document.removeEventListener("mousedown",Ju,!1),sp.muted=!1};return document.addEventListener("touchstart",Ju,!1),document.addEventListener("mousedown",Ju,!1),sp}()),function(sp){(Ju=new r$3.DirectionalLight(16777215,.5)).position.copy(new r$3.Vector3(1,1,1)),sp.add(Ju);var Ju=new r$3.DirectionalLight(16777215,.3);sp.add(Ju),Ju=new r$3.AmbientLight(16777215,.3),sp.add(Ju)}(Qu.scene),Qu.state={mode:(zu=Qu.currentMode)!==null&&zu!==void 0?zu:"Panorama",panoIndex:(Hu=Qu.panoIndex)!==null&&Hu!==void 0?Hu:0,longitude:Qu.camera.pose.longitude,latitude:Qu.camera.pose.latitude,fov:Qu.camera.pose.fov,offset:Qu.camera.pose.offset.clone(),distance:Qu.camera.pose.distance},Qu.stateSynced=!1,Qu._enableIOSEDR=!1,Qu.destroyed=!1,Qu.paused=!0,typeof window!="undefined"&&(Bu.play!==!1&&Qu.play(),((ju=Bu.initialBasisLoader)!==null&&ju!==void 0&&ju)!==!1&&(typeof Bu.initialBasisLoader=="string"?Qu.initBasisLoader(Bu.initialBasisLoader):Qu.initBasisLoader()),Qu.stopAnimationLoop=at.shared.add(function(sp,Ju){for(var _f=[],np=2;np<arguments.length;np++)_f[np-2]=arguments[np];Qu.updateTime.apply(Qu,t$3.__spreadArray([sp,Ju],_f,!1))},!1,0,10));var Wu=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Qu.currentMode==="VRPanorama"&&Qu.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",Wu,!1),Qu.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",Wu,!1)},Qu.plugins={},Bu.plugins&&Bu.plugins.length)for(var qu=0,Yu=Bu.plugins;qu<Yu.length;qu++){var Zu=Yu[qu];if(typeof Zu=="function")Zu(Qu);else if(Array.isArray(Zu)){var _h=Zu[0],ep=Zu[1],ip=Zu[2];if(typeof _h=="function"){var ap=_h(Qu,ip);typeof ep=="string"&&(Qu.plugins[ep]?Qu.throwError(new Error("plugin name ".concat(ep," is exists."))):Qu.plugins[ep]=ap)}}}return Qu}return t$3.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.dispose=function(){var Bu,Ru;if(this.destroyed!==!0){delete Iu$1.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),(Bu=this.renderer)===null||Bu===void 0||Bu.setAnimationLoop(null),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Lu=this.getElement();Lu&&Lu.parentNode&&Lu.parentNode.removeChild(Lu),this.scene.remove(this.model);var Ou=this.model.getMaterial();Ou&&(Ou.pano0&&Ou.pano0.map.dispose(),Ou.pano1&&Ou.pano1.map!==((Ru=Ou.pano0)===null||Ru===void 0?void 0:Ru.map)&&Ou.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof It$1&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},$u.prototype.setScissor=function(Bu){Object.assign(this.scissor,Bu),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty($u.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(Bu){this.helperGroup.visible!==Bu&&(this.helperGroup.visible=Bu,this.emit("helpersVisibleChange",Bu),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(Bu){this._enableIOSEDR!==Bu&&(this._enableIOSEDR=Bu,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(Bu){var Ru,Lu;if(Bu){if(!this.screenBuffer){var Ou=this.getDrawingBufferSize(yu$1);this.screenBuffer=new r$3.WebGLRenderTarget(Ou.x,Ou.y,{encoding:(Lu=(Ru=this.renderer)===null||Ru===void 0?void 0:Ru.outputEncoding)!==null&&Lu!==void 0?Lu:r$3.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),$u.prototype.updateConfiguration=function(Bu){var Ru=!1;Bu.panorama&&(Object.assign(this.controllerInits.Panorama,Bu.panorama),this.currentMode==="Panorama"&&(Ru=!0)),Bu.model&&(Object.assign(this.controllerInits.Model,Bu.model),this.currentMode==="Model"&&(Ru=!0)),Bu.floorplan&&(Object.assign(this.controllerInits.Floorplan,Bu.floorplan),this.currentMode==="Floorplan"&&(Ru=!0)),Bu.topview&&(Object.assign(this.controllerInits.Topview,Bu.topview),this.currentMode==="Topview"&&(Ru=!0)),Bu.mapview&&(Object.assign(this.controllerInits.Mapview,Bu.topview),this.currentMode==="Mapview"&&(Ru=!0)),Bu.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,Bu.depthPanorama),this.currentMode==="DepthPanorama"&&(Ru=!0)),Bu.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,Bu.vrPanorama),this.currentMode==="VRPanorama"&&(Ru=!0)),Bu.imageOptions&&(Object.assign(this.imageOptions,Bu.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Ru=!0)),Ru&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},$u.prototype.appendTo=function(Bu,Ru){if(Ru===void 0&&(Ru={}),this.renderer)if(this.renderer instanceof It$1){var Lu=this.getElement();if(Lu){Bu.appendChild(Lu),this.refresh(Ru);var Ou=window.getComputedStyle(Bu).position;Ou!=="relative"&&Ou!=="absolute"&&Ou!=="fixed"&&Ou!=="sticky"&&(Bu.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},$u.prototype.refresh=function(Bu,Ru){if(Bu===void 0&&(Bu={}),this.renderer){var Lu=this.getElement();if(Lu){var Ou=Lu.parentNode;if(Ou&&Ou.nodeName){var Fu=Bu.width,Nu=Fu===void 0?Ou.offsetWidth:Fu,Vu=Bu.height,Uu=Vu===void 0?Ou.offsetHeight:Vu;this.renderer instanceof It$1&&(Ru&&this.renderer.setPixelRatio(Ru),this.renderer.setSize(Nu,Uu))}var Gu=this.renderer.getSize(new r$3.Vector2);this.camera.aspect=Gu.x*this.scissor.width/(Gu.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},$u.prototype.addExtraElement=function(Bu){var Ru=this;return this.extraElements.indexOf(Bu)===-1&&(this.extraElements.push(Bu),this.controller&&this.controller.bindExtraElement(Bu)),function(){return Ru.removeExtraElement(Bu)}},$u.prototype.removeExtraElement=function(Bu){var Ru=this.extraElements.indexOf(Bu);Ru!==-1&&(this.extraElements.splice(Ru,1),this.controller&&this.controller.unbindExtraElement(Bu))},$u.prototype.getPose=function(){var Bu=this.camera.copyPose(),Ru=Bu.longitude,Lu=Bu.latitude,Ou=Bu.fov,Fu=Bu.offset,Nu=Bu.distance;return{longitude:Ru,latitude:Lu,fov:Ou,offset:Fu.clone(),distance:Nu}},$u.prototype.getSize=function(Bu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(Bu),Bu.x*=this.scissor.width,Bu.y*=this.scissor.height,Bu},$u.prototype.getDrawingBufferSize=function(Bu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(Bu),Bu.x*=this.scissor.width,Bu.y*=this.scissor.height,Bu},$u.prototype.updateCamera=function(Bu,Ru,Lu){return Lu===void 0&&(Lu=!0),this.controller?this.controller.updateCamera(Bu,Ru,Lu):Promise.reject(new Error("controller is not initialized."))},$u.prototype.getLongitudeAndLatitude=function(){var Bu=this.getPose();return{longitude:Bu.longitude,latitude:Bu.latitude}},$u.prototype.getOffset=function(){return this.getPose().offset},$u.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var Bu=this.work.observers[this.panoIndex],Ru=new r$3.Object3D;return Ru.position.copy(Bu.position),Ru.quaternion.copy(Bu.quaternion),Ru.scale.set(1,1,1),Ru.updateMatrixWorld(!0),function(Lu,Ou){var Fu=new r$3.Vector3(0,0,-1);Fu.applyQuaternion(Lu.quaternion);var Nu=Ou.quaternion.clone().inverse();return Fu.applyQuaternion(Nu),{theta:Math.atan2(Fu.x,-Fu.z),phi:-Math.asin(Fu.y),lookAtVector:Fu}}(this.camera,Ru)}},$u.prototype.initBasisLoader=function(Bu){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof Bu=="string"&&Ei$1.setTranscoderPath(Bu),Ei$1.workerConfig.format||Ei$1.detectSupport(this.renderer),Ei$1._allocateWorker(0)}catch(Ru){Ru instanceof Error&&this.throwError(Ru)}},Object.defineProperty($u.prototype,"work",{get:function(){var Bu=Eu$1.get(this);if(Bu&&wo$1.get(Bu))return Bu},enumerable:!1,configurable:!0}),$u.prototype.load=function(Bu,Ru,Lu,Ou){var Fu=this;if(Ou===void 0&&(Ou=!0),!this.renderer)throw new Error("renderer is not initialized");var Nu=this.lastLoadWorkTask.then(function(){return!(Vu=Bu)||typeof Vu!="object"&&typeof Vu!="function"||typeof Vu.then!="function"?Fu.load_(Bu,Ru,Lu,Ou):Bu.then(function(Uu){return Fu.load_(Uu,Ru,Lu,Ou)});var Vu});return this.lastLoadWorkTask=Nu.catch(function(Vu){Fu.throwError(Vu)}),Nu},$u.prototype.load_=function(Bu,Ru,Lu,Ou){var Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu=this;Ou===void 0&&(Ou=!0);var Ku,Wu,qu,Yu=Co$1(Bu),Zu=this.work;Ru===void 0&&(Ru=Zu?"inherit":"initial"),Ru==="inherit"?(Ku=typeof this.panoIndex=="number"&&Yu.observers[this.panoIndex]?this.panoIndex:Yu.initial.panoIndex,Wu=(Fu=this.currentMode)!==null&&Fu!==void 0?Fu:Yu.initial.mode,qu={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Ru==="initial"?(Wu=(Nu=this.currentMode)!==null&&Nu!==void 0?Nu:Yu.initial.mode,Ku=Yu.initial.panoIndex,qu=Wu===$u.Mode.Panorama||Wu===$u.Mode.DepthPanorama||Wu===$u.Mode.Model||Wu===$u.Mode.VRPanorama||Wu===$u.Mode.XRPanorama?{longitude:Yu.initial.longitude,latitude:Yu.initial.latitude,fov:Yu.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Ku=(Vu=Ru.panoIndex)!==null&&Vu!==void 0?Vu:Yu.initial.panoIndex,Wu=(Gu=(Uu=Ru.mode)!==null&&Uu!==void 0?Uu:this.currentMode)!==null&&Gu!==void 0?Gu:"Panorama",qu={longitude:(zu=Ru.longitude)!==null&&zu!==void 0?zu:Yu.initial.longitude,latitude:(Hu=Ru.latitude)!==null&&Hu!==void 0?Hu:Yu.initial.latitude,fov:(ju=Ru.fov)!==null&&ju!==void 0?ju:Yu.initial.fov}),this.emit("willLoad",Bu,Yu,{panoIndex:Ku,mode:Wu,longitude:qu.longitude,latitude:qu.latitude,fov:qu.fov});var _h=function(){var ip;Xu.panoIndex=Ku,Xu.panoramaLikeSavedPose.longitude=Yu.initial.longitude,Xu.panoramaLikeSavedPose.latitude=Yu.initial.latitude,Xu.panoramaLikeSavedPose.fov=Yu.initial.fov;var ap=Xu.controller?Lu!=null?Lu:Xu.modeChangeDuration:0,sp=t$3.__assign(t$3.__assign({initial:[Ku,qu,ap,Ou]},Xu.commonParams()),Xu.controllerInits[Wu]);Xu.controller?Xu.controller.updateWork(Yu,Ku,qu,ap,Ou)===!1&&(Xu.controller.destroy(),Xu.controller=Xu.applyController(Wu,sp)):Xu.controller=Xu.applyController(Wu,sp),Xu.emit("load",Bu,Yu,{panoIndex:Ku,mode:Wu,longitude:qu.longitude,latitude:qu.latitude,fov:qu.fov}),(ip=Xu.analysis)===null||ip===void 0||ip.work(Yu)},ep=function(ip){var ap;ip===void 0&&(ip=Qe$1),Yu.model&&(Xu.model.name!==((ap=Yu.model)===null||ap===void 0?void 0:ap.file)?(Xu.emit("modelWillLoad",Yu.model),Xu.loadModel(Yu.model,Yu.allowHosts,ip,!0)):ip&&ip())};return Eu$1.set(this,Yu),Wu===$u.Mode.Floorplan||Wu===$u.Mode.Topview||Wu===$u.Mode.Mapview||Wu===$u.Mode.Model?ep(function(){_h(),Xu.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Yu.initial.fov,longitude:Yu.initial.longitude,latitude:Yu.initial.latitude,offset:Yu.observers[Yu.initial.panoIndex].position}),this.needsRender=!0),_h(),(Qu=this.controller)===null||Qu===void 0||Qu.once("panoLoaded",function(){Xu.needsRender=!0,Xu.emit("cameraUpdate",Xu.camera.copyPose(),Ou),ep()})),this.ready().then(function(){Xu.emit("loaded",Bu,Xu.work)})},$u.prototype.changeMode=function(Bu,Ru,Lu,Ou,Fu){var Nu=this;if(Ru===void 0&&(Ru={}),Lu===void 0&&(Lu=this.modeChangeDuration),Ou===void 0&&(Ou=!0),Fu===void 0&&(Fu=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Vu,Uu){if(!$u.Mode.hasOwnProperty(Bu)){var Gu=new Error('mode "'.concat(Bu,'" is not existed'));return Nu.throwError(Gu),void Uu(Gu)}if((Bu===$u.Mode.Floorplan||Bu===$u.Mode.Topview||Bu===$u.Mode.Mapview||Bu===$u.Mode.Model)&&(oo$1(Nu.model)||Nu.model.loaded!==!0))return Gu=new Error("model is not ready."),Nu.throwError(Gu),void Uu(Gu);if(oo$1(Nu.controller))return Gu=new Error("controller is not ready."),Nu.throwError(Gu),void Uu(Gu);var zu=Nu.controller,Hu=Nu.currentMode,ju=function(){var Xu,Ku,Wu,qu;if(Nu.emit("wantsChangeMode",Bu,Hu))Uu(new Error("change mode canceled."));else{if(Nu.controller&&Fu===!1&&Hu===Bu)Bu===$u.Mode.Panorama||Bu===$u.Mode.DepthPanorama||Bu===$u.Mode.Model||Bu===$u.Mode.VRPanorama||Bu===$u.Mode.XRPanorama?typeof Ru.panoIndex=="number"&&Ru.panoIndex!==Nu.panoIndex?Nu.controller.moveToPano((Ku=(Xu=Ru.panoIndex)!==null&&Xu!==void 0?Xu:Nu.panoIndex)!==null&&Ku!==void 0?Ku:0,t$3.__assign({duration:Lu},Ru),Ou):Nu.controller.updateCamera(Ru,Lu,Ou).catch(Qe$1):(typeof Ru.panoIndex=="number"&&Ru.panoIndex!==Nu.panoIndex&&(Nu.panoIndex=Ru.panoIndex),Nu.controller.updateCamera(Ru,Lu,Ou).catch(Qe$1));else{zu.destroy();var Yu=(qu=(Wu=Ru.panoIndex)!==null&&Wu!==void 0?Wu:Nu.panoIndex)!==null&&qu!==void 0?qu:0,Zu=eu$1(Bu)?Nu.panoramaLikeSavedPose:{};Bu===$u.Mode.Mapview&&(Zu.longitude=Nu.panoramaLikeSavedPose.longitude),typeof Ru.longitude!="number"&&typeof Ru.latitude!="number"||(Zu.longitude=Ru.longitude,Zu.latitude=Ru.latitude),typeof Ru.fov=="number"&&(Zu.fov=Ru.fov);var _h=t$3.__assign(t$3.__assign({initial:[Yu,Zu,Lu,Ou]},Nu.commonParams()),Nu.controllerInits[Bu]);Nu.saveControllerPose(zu),Nu.controller=Nu.applyController(Bu,_h);var ep=$l$1[Bu].initAnimationEndPose(_h);Nu.emit("modeChange",Bu,Hu,Yu,ep,Ou)}Vu()}};if(Bu===$u.Mode.VRPanorama)Nu.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(Xu){if(Xu=="granted")return Promise.resolve();var Ku=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(Ku)}):Promise.resolve()).then(function(){return ju()}).catch(function(Xu){Xu instanceof Error&&(Nu.exitFullscreen(),Nu.throwError(Xu),Uu(Xu))});else if(Bu===$u.Mode.XRPanorama){var Qu=at.shared.getContext();Qu?Qu.end():function(){if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then(function(Ku){return Ku?Promise.resolve():Promise.reject()}).then(function(){return navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(function(Ku){return Promise.resolve(Ku)})});var Xu=new Error("Request XR Permission denied.");return Promise.reject(Xu)}().then(function(Xu){at.shared.setContext(Xu),ju()}).catch(function(Xu){Xu instanceof Error&&(Nu.throwError(Xu),Uu(Xu))}),Nu.on("webXRSessionEnd",function(){Nu.changeMode("Panorama")})}else ju()})},$u.prototype.getPixels=function(Bu,Ru,Lu,Ou,Fu){if(Fu===void 0&&(Fu=1),!this.renderer)throw new Error("renderer is not initialized.");var Nu=this.getPixelsRenderTarget,Vu=this.renderer.getSize(new r$3.Vector2);Bu=ho$1(Bu,Math.floor(Lu/2),Math.floor(Vu.x-Lu)),Ru=ho$1(Ru,Math.floor(Ou/2),Math.floor(Vu.y-Ou)),Nu.setSize(Lu*Fu,Ou*Fu),this.renderer.setRenderTarget(Nu),this.camera.setViewOffset(Vu.width,Vu.height,Bu,Vu.height-Ru-Ou,Lu,Ou),this.controller?this.controller.render():this.renderer.render(this.scene,this.camera);var Uu=new Uint8Array(Lu*Fu*Ou*Fu*4);return this.renderer.readRenderTargetPixels(Nu,0,0,Lu*Fu,Ou*Fu,Uu),this.renderer.setRenderTarget(null),this.camera.clearViewOffset(),Uu},$u.prototype.getElement=function(){var Bu;return(Bu=this.renderer)===null||Bu===void 0?void 0:Bu.domElement},$u.prototype.render=function(Bu,Ru){var Lu=this;if(Ru===void 0&&(Ru=!1),!this.renderer)return null;if(Ru){var Ou=this.renderer.getSize(yu$1);this.scene.traverseVisible(function(Nu){Nu.setResolution&&Nu.setResolution(Ou.x,Ou.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Fu=this.getDrawingBufferSize(yu$1);return this.screenBuffer.setSize(Fu.x,Fu.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.currentMode!=="XRPanorama"&&this.poweredByRealsee&&gu$1(this.renderer),this.renderer.setRenderTarget(null),Bu&&at.shared.add(Bu,!0),this.screenBuffer}return this.aroundScissor(function(){Lu.renderer&&(Lu.controller?Lu.controller.render():Lu.renderer.render(Lu.scene,Lu.camera),Lu.poweredByRealsee&&Lu.currentMode!=="VRPanorama"&&Lu.currentMode!=="XRPanorama"&&gu$1(Lu.renderer)),Bu&&at.shared.add(Bu,!0)}),null},$u.prototype.updateTime=function(Bu,Ru){for(var Lu,Ou=this,Fu=[],Nu=2;Nu<arguments.length;Nu++)Fu[Nu-2]=arguments[Nu];if(!this.destroyed){this.syncingState=this.syncState(Bu,Ru),this.controller&&(Lu=this.controller).updateTime.apply(Lu,t$3.__spreadArray([Bu,Ru],Fu,!1)),this.syncingState=!1;var Vu=new r$3.Vector2(512,512),Uu=new r$3.Vector2(512,512);this.renderer&&(this.renderer.getSize(Vu),Vu.x*=this.scissor.width,Vu.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Uu),Uu.x*=this.scissor.width,Uu.y*=this.scissor.height);var Gu=[];if(xu$1.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.renderer&&this.model.update(this.renderer,this.camera),bu$1.setFromProjectionMatrix(xu$1),this.scene.traverse(function(qu){if(qu.setResolution&&qu.setResolution(Vu.x,Vu.y),qu.mixer instanceof r$3.AnimationMixer){var Yu=wu$1.get(qu.mixer);Yu||(Yu=new r$3.Clock,wu$1.set(qu.mixer,Yu)),qu.mixer.update(Yu.getDelta())}(qu instanceof r$3.Mesh||qu instanceof r$3.Line||qu instanceof r$3.Points)&&(qu instanceof r$3.ImmediateRenderObject||!qu.frustumCulled||bu$1.intersectsObject(qu))&&Gu.push(qu)}),Uu.width*Uu.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var zu=void 0;if(this.onlyRenderIfNeeds!==!0)zu=this.render();else{for(var Hu=0,ju=Gu;Hu<ju.length;Hu++){var Qu=ju[Hu],Xu=function(qu){qu.needsRender===!0?(qu.needsRender=!1,Ou.needsRender=!0):qu.mixer&&qu.mixer.stats.actions.inUse>0&&(Ou.needsRender=!0)};Xu(Qu),Qu.traverseAncestors(Xu)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(zu=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Ou.controller.postProcessing(Ou.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",zu!==void 0)}if(this.fps.testTime&&Bu-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=Bu,this.fps.testCount=0,this.renderer){var Ku=this.renderer.getContext(),Wu=Us(Ku);Wu&&this.throwError(Wu)}}},$u.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof It$1&&this.renderer.clear(!0,!0,!0)},$u.prototype.play=function(){this.needsRender=!0,this.paused=!1},$u.prototype.moveToPano=function(Bu,Ru,Lu){Ru===void 0&&(Ru={}),Lu===void 0&&(Lu=!0);var Ou=this,Fu=Ou.controller,Nu=Ou.currentMode,Vu=Ou.renderer;return Fu?Vu?(Nu===$u.Mode.Floorplan||Nu===$u.Mode.Topview||Nu===$u.Mode.Mapview?oo$1(Bu)||(this.panoIndex=Bu,this.changeMode($u.Mode.Panorama,Ru,void 0,Lu)):Fu.moveToPano(Bu,Ru,Lu),this.ready()):(this.throwError(new Error("renderer is not initialized.")),Promise.resolve()):(this.throwError(new Error("controller is not initialized.")),Promise.resolve())},$u.prototype.preloadPano=function(Bu,Ru){var Lu=this;if(Ru===void 0&&(Ru=Qe$1),!this.work)return Promise.reject(new Error("work never loaded"));var Ou=this.work.observers[Bu],Fu=this.work.allowHosts,Nu=_e();return Promise.all(["right","left","up","down","front","back"].map(function(Vu){var Uu=t$3.__assign({key:"pano.".concat(Bu,".").concat(Vu),basisLoaderInitialized:Ei$1.isInitialized()},ii(Lu.imageOptions,["size","format","quality","mappings"])),Gu=Ou.images[Vu];return function(zu,Hu){Hu===void 0&&(Hu={});var ju=_e(),Qu=zu;return Promise.resolve().then(function(){return Hu.requestProxy?Hu.requestProxy(zu):zu}).then(function(Xu){return/^https\:/.test(location.href)&&/^http\:/.test(Xu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Xu,"'. This request was automatically upgraded to HTTPS")),Xu.replace(/^http\:/,"https:")):Xu}).catch(function(Xu){var Ku,Wu=new Ge$1(Qu,"Link",Xu&&Xu.message?String(Xu.message):String(Xu));return(Ku=Hu.networkSubscribe)===null||Ku===void 0||Ku.emit("network",zu,"Link","proxy-error",Wu.message),Promise.reject(Wu)}).then(function(Xu){return Xu in nt$1?nt$1[Xu]:nt$1[Xu]=new Promise(function(Ku,Wu){var qu,Yu=Hu.allowHosts?je.concat(Hu.allowHosts):je.slice(),Zu=et(Xu);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je.filter(function(sp){return Ke(sp,location.hostname)}).length===0&&!ze$1(Zu)&&Yu.filter(function(sp){return Ke(sp,Zu)}).length===0){var _h=new Ye$1(Xu,"Link","request host(".concat(Zu,") is not allowed"));return Wu(_h),void((qu=Hu.networkSubscribe)===null||qu===void 0||qu.emit("network",Xu,"Link","forbidden",_h.message))}var ep=document.createElement("link");ep.href=Xu,ep.rel=ep.relList&&ep.relList.supports("prefetch")?"prefetch":"preload",ep.as="fetch",ep.crossOrigin="";var ip=document.head||document.getElementsByTagName("head")[0];ip&&ip.appendChild(ep);var ap=!1;ep.onload=function(){var sp;if(ap!==!0){ap=!0,Ku();var Ju=_e(),_f={origin:Qu,source:Xu,requestTime:ju,responseTime:Ju,costs:Ju-ju,headers:{}};(sp=Hu.networkSubscribe)===null||sp===void 0||sp.emit("network",Xu,"Link","preload",JSON.stringify(_f))}},ep.onerror=function(sp){var Ju;if(ap!==!0){ap=!0;var _f=new We$1(Xu,"Link",0);Wu(_f),(Ju=Hu.networkSubscribe)===null||Ju===void 0||Ju.emit("network",Xu,"Link","error",_f.message)}}})})}(Lu.imageOptions.transform?Lu.imageOptions.transform(Gu,Uu):ct$1(Gu,Uu),{allowHosts:Fu,requestProxy:Lu.requestProxy,networkSubscribe:Lu.networkSubscribe})})).then(function(){var Vu=_e()-Nu;return Ru(Vu),Vu})},$u.prototype.project2d=function(Bu,Ru){if(Ru===void 0&&(Ru=!1),!this.renderer)return null;if(this.model.empty===!1&&Ru){var Lu=this.camera.position,Ou=Bu.clone().sub(Lu),Fu=new r$3.Raycaster(Lu,Ou.clone().normalize()),Nu=this.model.intersectRaycaster(Fu)[0];if(Nu&&Nu.distance+.01<Ou.length())return null}var Vu=Bu.clone().project(this.camera);if(Math.abs(Vu.z)>1)return null;var Uu=this.renderer.getSize(new r$3.Vector2),Gu=Uu.x*this.scissor.width,zu=Uu.y*this.scissor.height,Hu=Uu.x*this.scissor.left+(Vu.x+1)/2*Gu,ju=Uu.y*(1-this.scissor.bottom-this.scissor.height)+(1-Vu.y)/2*zu;return new r$3.Vector2(Hu,ju)},$u.prototype.getRenderObjects=function(Bu){xu$1.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bu$1.setFromProjectionMatrix(xu$1),Bu||(Bu=this.scene);var Ru=[];return Bu.traverseVisible(function(Lu){(Lu instanceof r$3.Mesh||Lu instanceof r$3.Line||Lu instanceof r$3.Points)&&(Lu instanceof r$3.ImmediateRenderObject||!Lu.frustumCulled||bu$1.intersectsObject(Lu))&&Ru.push(Lu)}),Ru},$u.prototype.getCurrentState=function(){return t$3.__assign(t$3.__assign({},this.getPose()),{mode:this.currentMode||$u.Mode.Panorama,panoIndex:this.panoIndex||0})},$u.prototype.setState=function(Bu,Ru,Lu){var Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju;Ru===void 0&&(Ru=!1),Lu===void 0&&(Lu=!0),!(Bu=Object.assign({},Bu)).offset||Bu instanceof r$3.Vector3||(Bu.offset=new r$3.Vector3(Bu.offset.x,Bu.offset.y,Bu.offset.z));var Qu,Xu,Ku,Wu,qu,Yu=(Ou=Bu.panoIndex)!==null&&Ou!==void 0?Ou:this.state.panoIndex,Zu=(Fu=Bu.mode)!==null&&Fu!==void 0?Fu:this.state.mode;if(this.work)if(this.work.observers[Yu])if(Bu.mode!==$u.Mode.Floorplan&&Bu.mode!==$u.Mode.Topview&&Bu.mode!==$u.Mode.Mapview&&Bu.mode!==$u.Mode.Model||!oo$1(this.model)&&this.model.loaded===!0){if(this.state.mode!==Zu){if(Zu==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var _h=void 0;_h=eu$1(this.state.mode)&&eu$1(Zu)?t$3.__assign({},this.state):eu$1(Zu)?t$3.__assign({},this.panoramaLikeSavedPose):Zu===$u.Mode.Mapview?{longitude:this.panoramaLikeSavedPose.latitude}:t$3.__assign({},Bu),typeof Bu.longitude=="number"&&(_h.longitude=Bu.longitude),typeof Bu.latitude=="number"&&(_h.latitude=Bu.latitude),typeof Bu.fov=="number"&&(_h.fov=Bu.fov);var ep=t$3.__assign(t$3.__assign({initial:[Yu,_h,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[Zu]),ip=$l$1[Zu].initAnimationEndPose(ep);Qu=ip.longitude,Xu=ip.latitude,Ku=ip.fov,Wu=ip.offset,qu=ip.distance}else Qu=(Nu=Bu.longitude)!==null&&Nu!==void 0?Nu:this.state.longitude,Xu=(Vu=Bu.latitude)!==null&&Vu!==void 0?Vu:this.state.latitude,Ku=(Uu=Bu.fov)!==null&&Uu!==void 0?Uu:this.state.fov,Wu=(Gu=Bu.offset)!==null&&Gu!==void 0?Gu:this.state.offset,qu=(zu=Bu.distance)!==null&&zu!==void 0?zu:this.state.distance;var ap={panoIndex:Yu,mode:Zu,longitude:Qu,latitude:Xu,fov:Ku,offset:Wu,distance:qu};this.emit("setState",ap),$s$1(this.state,ap)||(this.controller&&ap.mode==="VRPanorama"&&ap.mode!==this.state.mode?(Js(this.state,ap),this.changeMode("VRPanorama")):this.controller&&ap.mode==="XRPanorama"&&ap.mode!==this.state.mode?(Js(this.state,ap),this.changeMode("XRPanorama")):(Js(this.state,ap),this.controller&&(this.controller.userAction=Lu),Ru&&this.state.mode===ap.mode&&(this.syncingState=this.syncState(_e(),0,Ru),this.syncingState&&((Hu=this.controller)===null||Hu===void 0||Hu.updateTime(_e(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Lu),(ju=this.analysis)===null||ju===void 0||ju.state(this.work,this.state)))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},$u.prototype.aroundScissor=function(Bu){if(this.renderer)if(this.state.mode!=="XRPanorama"){var Ru=new r$3.Vector2,Lu=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Lu){this.renderer.getSize(Ru);var Ou=Math.floor(Ru.x*this.scissor.left),Fu=Math.floor(Ru.y*this.scissor.bottom),Nu=Math.floor(Ru.x*this.scissor.width),Vu=Math.floor(Ru.y*this.scissor.height);this.renderer.setViewport(Ou,Fu,Nu,Vu),this.renderer.setScissor(Ou,Fu,Nu,Vu),this.renderer.setScissorTest(!0)}Bu(),Lu&&(this.renderer.setViewport(0,0,Ru.x,Ru.y),this.renderer.setScissor(0,0,Ru.x,Ru.y),this.renderer.setScissorTest(!1))}else Bu()},$u.prototype.syncState=function(Bu,Ru,Lu){Lu===void 0&&(Lu=!1);var Ou=this.stateSynced;if(this.stateSynced=!1,!this.work||!this.controller)return!1;if(this.state.mode!==this.currentMode){var Fu={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Fu,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Nu=this.currentMode;if(!(Nu===$u.Mode.Floorplan||Nu===$u.Mode.Topview||Nu===$u.Mode.Mapview||Nu===$u.Mode.Model)||!this.modelPending){var Vu=this.readyCallbacks.slice();this.readyCallbacks.length=0;for(var Uu=0,Gu=Vu;Uu<Gu.length;Uu++){var zu=Gu[Uu];this.controller instanceof $l$1.Panorama?zu.tile!==!0||this.controller.isTileReady()?zu():this.readyCallbacks.push(zu):zu()}}}if(this.controller instanceof $l$1.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Hu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Hu,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Hu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance},this.controller.moveToPano(this.state.panoIndex,Hu,!1),!0;if(this.controller instanceof $l$1.Topview||this.controller instanceof $l$1.Mapview){var ju=1,Qu=Lu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,ju),Xu=Lu?new r$3.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$3.Vector3(Ys(this.camera.pose.offset.x,this.state.offset.x,.2),Ys(this.camera.pose.offset.y,this.state.offset.y,.2),Ys(this.camera.pose.offset.z,this.state.offset.z,.2));if(Vs(Qu,this.camera.pose.fov)||Hs$1(Xu,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Qu},0).catch(Qe$1),this.controller.locationMotion.set({x:Xu.x,y:Xu.y,z:Xu.z},0).catch(Qe$1),!0}else{ju=1;var Ku=Math.PI/45,Wu=(Qu=Lu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,ju),Lu?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Zu,_h,ep){if(Zu.longitude===_h.longitude&&Zu.latitude===_h.latitude)return{longitude:_h.longitude,latitude:_h.latitude};var ip=Gs$1(Zu.longitude),ap=Zu.latitude,sp=Gs$1(_h.longitude),Ju=_h.latitude;sp-ip>Ws$1?ip+=Xs$1:ip-sp>Ws$1&&(ip-=Xs$1);var _f=ep/Math.sqrt(Math.pow(sp-ip,2)+Math.pow(Ju-ap,2));return _f>=1?{longitude:_h.longitude,latitude:_h.latitude}:{longitude:ip+(sp-ip)*_f,latitude:ap+(Ju-ap)*_f}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Ku)),qu=Wu.longitude,Yu=Wu.latitude;if(Vs(qu,this.camera.pose.longitude,2*Math.PI)||Vs(Yu,this.camera.pose.latitude)||Vs(Qu,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:qu,latitude:Yu,fov:Qu},0).catch(Qe$1),!0}return this.stateSynced=!0,Ou===!1&&this.emit("stateSynced",this.state),!1},$u.prototype.ready=function(Bu){var Ru=this;return Bu===void 0&&(Bu={}),new Promise(function(Lu){var Ou;Ru.readyCallbacks.push(Object.assign(Lu,{tile:(Ou=Bu.tile)!==null&&Ou!==void 0&&Ou}))})},$u.prototype.requestFullscreen=function(){var Bu;if(Zs()){var Ru=(Bu=this.getElement())===null||Bu===void 0?void 0:Bu.parentNode;Ru&&"requestFullscreen"in Ru&&typeof document!="undefined"&&document.fullscreenElement===null&&Ru.requestFullscreen()}},$u.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},$u.prototype.throwError=function(Bu){this.hasListener("error")?this.emit("error",Bu):console.error(Bu)},$u.prototype.loadModel=function(Bu,Ru,Lu,Ou){var Fu=this,Nu=Bu.file;this.emit("modelWillLoad",Bu);var Vu=new uo$1({allowHosts:Ru,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe});Vu.once("bvhLoaded",function(){var Uu,Gu;Fu.destroyed||Nu===((Gu=(Uu=Fu.work)===null||Uu===void 0?void 0:Uu.model)===null||Gu===void 0?void 0:Gu.file)&&Fu.emit("modelBvhLoaded",Vu)}),Vu.once("materialLoaded",function(){var Uu,Gu;Fu.destroyed||Nu===((Gu=(Uu=Fu.work)===null||Uu===void 0?void 0:Uu.model)===null||Gu===void 0?void 0:Gu.file)&&Fu.emit("modelMaterialLoaded",Vu)}),Vu.once("geometryLoaded",function(){var Uu,Gu;Fu.destroyed||Nu===((Gu=(Uu=Fu.work)===null||Uu===void 0?void 0:Uu.model)===null||Gu===void 0?void 0:Gu.file)&&(Vu.bounding.max.y-Vu.bounding.min.y<1.5&&(Vu.bounding.max.y=Vu.bounding.min.y+10),Fu.emit("modelGeometryLoaded",Vu))}),Vu.once("loaded",function(){var Uu,Gu,zu,Hu;if(!Fu.destroyed&&Nu===((Gu=(Uu=Fu.work)===null||Uu===void 0?void 0:Uu.model)===null||Gu===void 0?void 0:Gu.file)){var ju,Qu=Fu.model;Qu&&(Qu.show(),ju=Qu.getMaterial()||{},Fu.scene.remove(Qu),Qu.dispose(),Vu.setTransparent(Qu.getTransparent())),ju&&Vu.setMaterial(ju),Fu.model=Vu,Fu.scene.add(Vu),(zu=Fu.controller)===null||zu===void 0||zu.updateModel(Vu),(Hu=Fu.renderer)===null||Hu===void 0||Hu.compile(Fu.scene,Fu.camera),Fu.needsRender=!0,Fu.modelPending=!1,Lu(),Fu.emit("modelLoaded",Vu)}}),Vu.on("shownFloorChange",function(Uu,Gu){var zu,Hu;Fu.destroyed||Nu===((Hu=(zu=Fu.work)===null||zu===void 0?void 0:zu.model)===null||Hu===void 0?void 0:Hu.file)&&Fu.emit("modelShownFloorChange",Uu,Gu)}),Vu.on("error",function(Uu){var Gu,zu,Hu,ju;if(!Fu.destroyed&&Nu===((zu=(Gu=Fu.work)===null||Gu===void 0?void 0:Gu.model)===null||zu===void 0?void 0:zu.file)){Vu.bounding.makeEmpty();for(var Qu=0,Xu=Fu.work.observers;Qu<Xu.length;Qu++){var Ku=Xu[Qu];Vu.bounding.expandByPoint(Ku.standingPosition),Vu.bounding.expandByPoint(new r$3.Vector3().fromArray([Ku.position.x,2*Ku.position.y-Ku.standingPosition.y,Ku.position.z]))}var Wu=Ks$1(Vu.bounding,new r$3.Vector3(1,0,1));Wu.visible=!0,Wu.name="model_empty",Vu.add(Wu);var qu,Yu=Fu.model;Yu&&(Yu.show(),qu=Yu.getMaterial()||{},Fu.scene.remove(Yu),Yu.dispose(),Vu.setTransparent(Yu.getTransparent())),qu&&Vu.setMaterial(qu),Fu.model=Vu,Fu.scene.add(Vu),(Hu=Fu.controller)===null||Hu===void 0||Hu.updateModel(Vu),(ju=Fu.renderer)===null||ju===void 0||ju.compile(Fu.scene,Fu.camera),Fu.emit("modelLoadError",Uu,Vu),Fu.throwError(Uu),Fu.modelPending=!1,Lu()}}),this.modelPending=!0,Vu.load(Bu,this.textureOptions).catch(Qe$1)},$u.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe,requestProxy:this.requestProxy}},$u.prototype.saveControllerPose=function(Bu){Bu===void 0&&(Bu=this.controller),Bu&&eu$1(Bu)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},$u.prototype.applyController=function(Bu,Ru){var Lu=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Ou=$l$1[Bu];Bu===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(Bu===$u.Mode.Floorplan||Bu===$u.Mode.Topview||Bu===$u.Mode.Model||Bu===$u.Mode.Mapview),this.currentMode=Bu;for(var Fu=new Ou(Ru),Nu=function(ju){Fu.on(ju,function(){for(var Qu=[],Xu=0;Xu<arguments.length;Xu++)Qu[Xu]=arguments[Xu];var Ku=Lu.emit.apply(Lu,t$3.__spreadArray([ju],Qu,!1));if(Ku)return!1})},Vu=0,Uu=tu$1;Vu<Uu.length;Vu++)Nu(Uu[Vu]);var Gu=$l$1[Bu].initAnimationEndPose(Ru),zu=Ru.initial[3],Hu={panoIndex:Ru.initial[0],mode:Bu,longitude:Gu.longitude,latitude:Gu.latitude,fov:Gu.fov,offset:Gu.offset,distance:Gu.distance};return $s$1(this.state,Hu)||(Js(this.state,Hu),this.emit("stateChange",this.state,zu)),this.emit("currentStateChange",this.getCurrentState(),zu),Fu.on("cameraUpdate",function(ju,Qu){var Xu;if(Lu.controller){var Ku=t$3.__assign(t$3.__assign({},Lu.controller.getTargetPose()),{panoIndex:Lu.panoIndex,mode:Bu});Qu&&Lu.syncingState===!1&&Lu.state.mode===Ku.mode&&!$s$1(Lu.state,Ku)&&(Js(Lu.state,Ku),Lu.emit("stateChange",Lu.state,Qu),(Xu=Lu.analysis)===null||Xu===void 0||Xu.state(Lu.work,Lu.state))}Lu.emit("currentStateChange",Lu.getCurrentState(),Qu)}),Fu.on("initAnimationWillStart",function(ju,Qu,Xu){var Ku,Wu=t$3.__assign(t$3.__assign({},Qu),{panoIndex:ju,mode:Bu});Xu&&Lu.state.mode===Wu.mode&&!$s$1(Lu.state,Wu)&&(Js(Lu.state,Wu),Lu.emit("stateChange",Lu.state,Xu),(Ku=Lu.analysis)===null||Ku===void 0||Ku.state(Lu.work,Lu.state))}),Fu.on("initAnimationEnded",function(ju,Qu,Xu){var Ku,Wu=t$3.__assign(t$3.__assign({},Qu),{panoIndex:ju,mode:Bu});Xu&&Lu.state.mode===Wu.mode&&!$s$1(Lu.state,Wu)&&(Js(Lu.state,Wu),Lu.emit("stateChange",Lu.state,Xu),(Ku=Lu.analysis)===null||Ku===void 0||Ku.state(Lu.work,Lu.state))}),Fu.on("panoWillArrive",function(ju,Qu,Xu){var Ku;Lu.panoIndex=ju;var Wu=t$3.__assign(t$3.__assign({},Qu),{panoIndex:ju,mode:Bu});Xu&&Lu.state.mode===Wu.mode&&!$s$1(Lu.state,Wu)&&(Js(Lu.state,Wu),Lu.emit("stateChange",Lu.state,Xu),(Ku=Lu.analysis)===null||Ku===void 0||Ku.state(Lu.work,Lu.state))}),Fu.on("panoArrived",function(ju,Qu,Xu){var Ku,Wu=t$3.__assign(t$3.__assign({},Qu),{panoIndex:ju,mode:Bu});Xu&&Lu.state.mode===Wu.mode&&!$s$1(Lu.state,Wu)&&(Js(Lu.state,Wu),Lu.emit("stateChange",Lu.state,Xu),(Ku=Lu.analysis)===null||Ku===void 0||Ku.state(Lu.work,Lu.state))}),Fu.on("moveToPano",function(ju,Qu){Lu.emit("currentStateChange",Lu.getCurrentState(),Qu)}),Fu.on("wantsMoveToPano",function(ju,Qu,Xu){var Ku=Lu.emit("wantsMoveToPano",ju,Qu,Xu);Ku||(Ku=Lu.emit("wantsToMoveToPano",ju,Qu,Xu)),Ku||Lu.moveToPano(ju,Qu,Xu)}),Fu.on("vrWantsToExit",function(){Lu.currentMode===$u.Mode.VRPanorama&&(Lu.exitFullscreen(),Lu.changeMode($u.Mode.Panorama))}),Fu.on("error",function(ju){return Lu.throwError(ju)}),Fu},$u.prototype.removeEventListeners=function(){},$u.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",Mapview:"Mapview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama",XRPanorama:"XRPanorama"},$u.Line=null,$u}(Fe),Iu$1={instances:{},constructor:Mu};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:Iu$1});var Su$1=function(){function _u(){}return _u.createButton=function($u){var Bu=document.createElement("button");function Ru(){Bu.style.display="",Bu.style.cursor="auto",Bu.style.left="calc(50% - 75px)",Bu.style.width="150px",Bu.onmouseenter=null,Bu.onmouseleave=null,Bu.onclick=null,Bu.textContent="VR NOT SUPPORTED"}function Lu(Fu){Fu.style.position="absolute",Fu.style.bottom="20px",Fu.style.padding="12px 6px",Fu.style.border="1px solid #fff",Fu.style.borderRadius="4px",Fu.style.background="rgba(0,0,0,0.1)",Fu.style.color="#fff",Fu.style.font="normal 13px sans-serif",Fu.style.textAlign="center",Fu.style.opacity="0.5",Fu.style.outline="none",Fu.style.zIndex="999"}if("xr"in navigator)return Bu.id="VRButton",Bu.style.display="none",Lu(Bu),navigator.xr.isSessionSupported("immersive-vr").then(function(Fu){Fu?(Bu.style.display="",Bu.style.cursor="pointer",Bu.style.left="calc(50% - 50px)",Bu.style.width="100px",Bu.textContent="ENTER VR",Bu.onmouseenter=function(){Bu.style.opacity="1.0"},Bu.onmouseleave=function(){Bu.style.opacity="0.5"},Bu.onclick=function(){$u&&$u()}):Ru()}),Bu;var Ou=document.createElement("a");return window.isSecureContext===!1?(Ou.href=document.location.href.replace(/^http:/,"https:"),Ou.innerHTML="WEBXR NEEDS HTTPS"):(Ou.href="https://immersiveweb.dev/",Ou.innerHTML="WEBXR NOT AVAILABLE"),Ou.style.left="calc(50% - 90px)",Ou.style.width="180px",Ou.style.textDecoration="none",Lu(Ou),Ou},_u}();five.AnimationFrameLoop=at,five.BVH=qt,five.BVHIntersect=Ft$1,five.BVHNode=Nt$1,five.BVHVector3=Ot,five.Camera=Lt,Five=five.Five=Mu,five.InternalWebGLRenderer=It$1,five.IntersectMesh=Fs$1,five.LegacyPanoCircleMesh=jo,five.Model=uo$1,five.NetworkSubscribe=tt,five.PBMContainer=At,five.PBMGroup=gt$1,five.PBMMaterial=Mt,five.PBMMesh=ft,five.PROXY_CONTROLLER_EVENT_NAMES=tu$1,five.PanoCircleMesh=as$1,five.PanoCircleMeshDark=xs,five.PanoCircleMeshSolid=Ds,five.Scene=St$1,Subscribe=five.Subscribe=Fe,five.Tile3D=Qr,five.Tile3DModel=ro$1,five.TileBoundingSphere=pr,five.TileCacheNode=yn,five.TileCullingVolume=Fn,five.TileOrientedBoundingBox=Rr,five.TilePlane=kn$1,five.TileRequestScheduler=vn$1,five.Tileset3D=qr,five.Tileset3DTraverser=_r,five.TilesetCache=xn,five.Work=Eo$1,five.XRButton=Su$1,five.defaultImageURLTransform=ct$1,five.getViewportScale=nu$1,five.imageSupport=function(){return pt$1||(pt$1=Promise.all([dt("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),dt("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA")]).then(function(_u){var $u=_u[0];return{webp:_u[1],avif:$u}}).catch(function(){return{webp:!1,avif:!1}}))},parseWork=five.parseWork=Co$1;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$2=react$1.exports,n$2=require$$1,r$2=five;function o$1(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Bu){if(Bu!=="default"){var Ru=Object.getOwnPropertyDescriptor(_u,Bu);Object.defineProperty($u,Bu,Ru.get?Ru:{enumerable:!0,get:function(){return _u[Bu]}})}}),$u.default=_u,Object.freeze($u)}var u$1=o$1(t$2),i$1=o$1(n$2),a$1=[],f$1=[],c$1=u$1.createContext(null);function s$1(){var _u=u$1.useContext(c$1);if(!_u)throw new Error("FiveProvider never found.");return _u.five}function l$2(){var _u=u$1.useContext(c$1);if(!_u)throw new Error("FiveProvider never found.");return _u.loadWork}var d={display:"inline-block",overflow:"hidden"};function v$2(_u,$u){var Bu=s$1(),Ru=[Bu];$u!==void 0&&(Ru=Ru.concat($u)),u$1.useLayoutEffect(function(){return _u(Bu.scene)},Ru)}var p$1=v$2;function h$1(_u){return e$1.__assign({},_u.state)}function m$1(_u){var $u=_u.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(_u.camera.position,$u)}function y$1(_u){return _u.camera.getWorldDirection(new i$1.Vector3)}function g$1(_u){return _u.model.empty?"Empty":"Loaded"}function S(_u,$u){return $u.indexOf(_u)>=0}function b(_u,$u){for(var Bu=0,Ru=Object.keys($u);Bu<Ru.length;Bu++){var Lu=Ru[Bu];$u[Lu]!==void 0&&(_u[Lu]=$u[Lu])}}function C$2(_u,$u){if(S("loadWork",$u))return _u}function w$1(_u,$u){if(S("setState",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.setState.apply(_u,Bu)}}function k(_u,$u){if(S("on",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.on.apply(_u,Bu)}}function x(_u,$u){if(S("on",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.once.apply(_u,Bu)}}function E$1(_u,$u){if(S("off",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.off.apply(_u,Bu)}}function L$1(_u,$u){if(S("intersectRaycaster",$u))return function(){for(var Bu,Ru=[],Lu=0;Lu<arguments.length;Lu++)Ru[Lu]=arguments[Lu];return(Bu=_u.model).intersectRaycaster.apply(Bu,Ru)}}function F$1(_u,$u){if(S("project2d",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.project2d.apply(_u,Bu)}}function _$1(_u,$u){if(S("updateCamera",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.updateCamera.apply(_u,Bu)}}function P$1(_u,$u){if(S("initBasisLoader",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.initBasisLoader.apply(_u,Bu)}}function R$1(_u,$u){if(S("getPixels",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.getPixels.apply(_u,Bu)}}function V(_u,$u){if(S("render",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.render.apply(_u,Bu)}}function W$2(_u,$u){if(S("needsRender",$u))return function(){_u.needsRender=!0}}function M$1(_u,$u){if(S("preloadPano",$u))return function(){for(var Bu=[],Ru=0;Ru<arguments.length;Ru++)Bu[Ru]=arguments[Ru];return _u.preloadPano.apply(_u,Bu)}}function O$1(_u,$u){if(S("showFloor",$u))return function(Bu){typeof Bu=="number"?_u.model.show(Bu):_u.model.show()}}function j(_u,$u){if(S("toggleHelperVisible",$u))return function(Bu){_u.helperVisible=Bu}}function A$1(_u,$u){for(var Bu={},Ru=$u.length,Lu=-1;++Lu<Ru;){var Ou=$u[Lu];Ou in _u&&(Bu[Ou]=_u[Ou])}return Bu}function N$2(_u,$u){for(var Bu=0;Bu<_u.length;Bu++)for(var Ru=0;Ru<$u.length;Ru++)if(_u[Bu]===$u[Ru])return!0;return!1}var U=function(){function _u($u,Bu){this.values=$u,this.listeners=[],this.onValuesChange=Bu}return _u.prototype.on=function($u,Bu){var Ru=this,Lu=[$u,Bu];return this.listeners.push(Lu),function(){var Ou=Ru.listeners.indexOf(Lu);Ou>=0&&Ru.listeners.splice(Ou,1)}},_u.prototype.getValues=function($u){return A$1(this.values,$u)},_u.prototype.setValues=function($u,Bu){var Ru,Lu,Ou=[];for(var Fu in Bu)$u.indexOf(Fu)>=0&&(Ru=Bu[Fu],Lu=this.values[Fu],!(typeof Ru=="number"&&typeof Lu=="number"&&isNaN(Ru)&&isNaN(Lu)||Ru===Lu))&&Ou.push(Fu);if(Ou.length!==0){for(var Nu=e$1.__assign({},this.values),Vu=0,Uu=Ou;Vu<Uu.length;Vu++){var Gu=Uu[Vu];this.values[Gu]=Bu[Gu]}this.onValuesChange&&this.onValuesChange(this.values,Nu);for(var zu=0,Hu=this.listeners;zu<Hu.length;zu++){var ju=Hu[zu],Qu=ju[0],Xu=ju[1];if(N$2(Qu,Ou)){var Ku=A$1(Nu,Qu);Xu(A$1(this.values,Qu),Ku)}}}},_u}();FiveCanvas=react.FiveCanvas=function(_u){var $u=_u.width,Bu=_u.height,Ru=s$1(),Lu=u$1.createRef(),Ou=e$1.__assign({width:$u,height:Bu},d);return u$1.useLayoutEffect(function(){if(Lu.current&&Ru.renderer){if(Ru.renderer.domElement.parentNode!==null&&Ru.renderer.domElement.parentNode!==Lu.current)throw new Error("There are more than 2 fiveCanvas in this context.");Ru.renderer.domElement.parentNode!==Lu.current&&Lu.current.appendChild(Ru.renderer.domElement),Ru.camera.aspect=$u/Bu,Ru.camera.updateProjectionMatrix(),Ru.renderer.setSize($u,Bu),Ru.needsRender=!0}},[$u,Bu,Lu.current]),u$1.createElement("div",{ref:Lu,style:Ou})},react.INJECTION_PROPNAME="$five",react.Store=U,react.createFiveFeature=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];return _u},createFiveProvider=react.createFiveProvider=function(_u){return _u===void 0&&(_u={}),function($u){function Bu(Ru){var Lu,Ou=this;Ou=$u.call(this,Ru)||this;var Fu=function(Nu){var Vu=Nu===void 0?{}:Nu,Uu=Vu.backgroundColor,Gu=Uu===void 0?1579548:Uu,zu=Vu.backgroundAlpha,Hu=zu===void 0?1:zu,ju=Vu.pixelRatio,Qu=ju===void 0?1:ju,Xu=Vu.webgl2,Ku=Xu!==void 0&&Xu;if(typeof window!="undefined"){var Wu=null;if(!(Wu=Ku?a$1.shift():f$1.shift())){if(Ku){var qu=document.createElement("canvas"),Yu=qu.getContext("webgl2");if(Yu===null)throw new Error("error occurred when getting webgl2 canvas context");Wu=new i$1.WebGLRenderer({antialias:!1,alpha:!0,canvas:qu,context:Yu})}else Wu=new i$1.WebGLRenderer({antialias:!1,alpha:!0});Wu.outputEncoding=i$1.sRGBEncoding}return Wu.setPixelRatio(Qu),Wu.setClearColor(Gu,Hu),Wu.autoClear=!0,Wu}}({pixelRatio:r$2.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:_u.backgroundAlpha,backgroundColor:_u.backgroundColor,webgl2:_u==null?void 0:_u.webgl2});return Ou.five=new r$2.Five(e$1.__assign({renderer:Fu},_u)),(Ru.work||Ru.initialWork)&&Ou.five.load(Ru.work||Ru.initialWork,Ru.initialState,void 0,(Lu=Ru.initialUserAction)===null||Lu===void 0||Lu),Ou.five.on("load",function(){var Nu;Ou.props.onWorkChange&&Ou.props.onWorkChange((Nu=Ou.five)===null||Nu===void 0?void 0:Nu.work)}),Ou.five.on("stateChange",function(Nu,Vu){Ou.props.onStateChange&&Ou.props.onStateChange(Nu,Vu)}),Ou.five.on("currentStateChange",function(Nu,Vu){Ou.props.onCurrentStateChange&&Ou.props.onCurrentStateChange(Nu,Vu)}),Ou.five.on("error",function(Nu){Ou.props.onError?Ou.props.onError(Nu):console.warn(Nu.message)}),Ou}return e$1.__extends(Bu,$u),Bu.prototype.loadWork=function(Ru,Lu,Ou,Fu){if(Fu===void 0&&(Fu=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Ru,Lu,Ou,Fu)},Bu.prototype.shouldComponentUpdate=function(Ru){var Lu,Ou;return Ru.work&&Ru.work!==((Lu=this.five)===null||Lu===void 0?void 0:Lu.work)&&((Ou=this.five)===null||Ou===void 0||Ou.load(Ru.work,Ru.initialState)),!0},Bu.prototype.componentWillUnmount=function(){var Ru;this.five&&(this.five.dispose(),(Ru=this.five.renderer)&&(Ru.capabilities.isWebGL2?f$1.indexOf(Ru)===-1&&f$1.push(Ru):a$1.indexOf(Ru)===-1&&a$1.push(Ru)),delete this.five)},Bu.prototype.render=function(){var Ru=this;return u$1.createElement(c$1.Provider,{value:{five:this.five,loadWork:function(){for(var Lu=[],Ou=0;Ou<arguments.length;Ou++)Lu[Ou]=arguments[Ou];return Ru.loadWork.apply(Ru,Lu)}}},this.props.children)},Bu}(u$1.Component)},react.createStore=function(_u){var $u=u$1.createContext(null);return{useStore:function(Bu){var Ru=u$1.useContext($u);if(Ru===null)throw new Error("StoreProvider never found.");var Lu=u$1.useRef(!0),Ou=u$1.useState(Ru.getValues(Bu)),Fu=Ou[0],Nu=Ou[1],Vu=e$1.__spreadArray([Ru],Bu,!0);return u$1.useLayoutEffect(function(){return Lu.current?Lu.current=!1:Nu(Ru.getValues(Bu)),Ru.on(Bu,function(Uu){return Nu(Uu)})},Vu),[Fu,u$1.useCallback(function(Uu){return Ru.setValues(Bu,Uu)},Vu)]},useStoreSetter:function(Bu){var Ru=u$1.useContext($u);if(Ru===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(Lu){return Ru.setValues(Bu,Lu)},e$1.__spreadArray([Ru],Bu,!0))},watchStore:function(Bu,Ru,Lu){var Ou=u$1.useContext($u);if(Ou===null)throw new Error("StoreProvider never found.");var Fu=e$1.__spreadArray([Ou],Bu,!0);Lu!==void 0&&(Fu=Fu.concat(Lu)),u$1.useLayoutEffect(function(){return Ou.on(Bu,Ru)},Fu)},useStoreAction:function(Bu){var Ru=u$1.useContext($u);if(Ru===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var Lu=[],Ou=0;Ou<arguments.length;Ou++)Lu[Ou]=arguments[Ou];var Fu=_u[Bu],Nu=Fu[0],Vu=Fu.slice(1),Uu=function(){return Ru.getValues(Vu)},Gu=function(zu){return Ru.setValues(Vu,zu)};return Nu.apply(void 0,e$1.__spreadArray([Uu,Gu],Lu,!1))},[])},StoreProvider:function(Bu){function Ru(Lu){var Ou=Bu.call(this,Lu)||this;return Ou.store=new U(Lu.initialValue,function(){for(var Fu,Nu=[],Vu=0;Vu<arguments.length;Vu++)Nu[Vu]=arguments[Vu];Ou.props.onValuesChange&&(Fu=Ou.props).onValuesChange.apply(Fu,Nu)}),Ou}return e$1.__extends(Ru,Bu),Ru.prototype.shouldComponentUpdate=function(Lu){return Lu.children!==this.props.children},Ru.prototype.render=function(){return u$1.createElement($u.Provider,{value:this.store},this.props.children)},Ru}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var _u=s$1();return{updateCamera:u$1.useCallback(function($u,Bu){return _u.updateCamera($u,Bu)},[_u]),initBasisLoader:u$1.useCallback(function($u){return _u.initBasisLoader($u)},[_u]),getPixels:u$1.useCallback(function($u,Bu,Ru,Lu,Ou){return _u.getPixels($u,Bu,Ru,Lu,Ou)},[_u]),render:u$1.useCallback(function($u){return _u.render($u)},[_u]),needsRender:u$1.useCallback(function(){return _u.needsRender=!0},[_u]),preloadPano:u$1.useCallback(function($u,Bu){return _u.preloadPano($u,Bu)},[_u])}},react.useFiveCameraDirection=function(){var _u=s$1(),$u=u$1.useState(function(){return y$1(_u)}),Bu=$u[0],Ru=$u[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Ru(y$1(_u))})},[_u]),Bu},react.useFiveCameraRaycaster=function(){var _u=s$1(),$u=u$1.useState(function(){return m$1(_u)}),Bu=$u[0],Ru=$u[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Ru(m$1(_u))})},[_u]),Bu},react.useFiveCurrentObserver=function(){var _u=s$1(),$u=u$1.useState(function(){return _u.getCurrentState()}),Bu=$u[0],Ru=$u[1];return u$1.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Ru(_u.getCurrentState())})},[_u]),_u.work?_u.work.observers[Bu.panoIndex]:null},react.useFiveCurrentState=function(){var _u=s$1(),$u=u$1.useState(function(){return _u.getCurrentState()}),Bu=$u[0],Ru=$u[1],Lu=u$1.useCallback(function(Ou,Fu,Nu){Fu===void 0&&(Fu=!1),Nu===void 0&&(Nu=!0);var Vu=typeof Ou=="function"?Ou(_u.getCurrentState()):Ou;_u.setState(Vu,Fu,Nu)},[_u]);return u$1.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Ru(_u.getCurrentState())})},[_u]),[Bu,Lu]},react.useFiveEventCallback=function(_u,$u,Bu){var Ru=s$1(),Lu=[Ru,_u];Bu!==void 0&&(Lu=Lu.concat(Bu)),u$1.useLayoutEffect(function(){return Ru.on(_u,$u)},Lu)},react.useFiveFloor=function(){var _u=s$1(),$u=u$1.useState(_u.model.shownFloor),Bu=$u[0],Ru=$u[1],Lu=u$1.useState(_u.model.floorLength),Ou=Lu[0],Fu=Lu[1],Nu=u$1.useCallback(function(Vu){typeof Vu=="number"?_u.model.show(Vu):_u.model.show()},[_u]);return u$1.useLayoutEffect(function(){var Vu=[];return Vu.push(_u.on("modelShownFloorChange",function(){return Ru(_u.model.shownFloor)})),Vu.push(_u.on("modelLoaded",function(){return Fu(_u.model.floorLength)})),function(){for(var Uu;Uu=Vu.shift();)Uu()}},[_u]),[Bu,Ou,Nu]},react.useFiveHelper=function(){var _u=s$1(),$u=u$1.useState(_u.helperVisible),Bu=$u[0],Ru=$u[1],Lu=u$1.useCallback(function(Ou){_u.helperVisible=Ou},[_u]);return u$1.useLayoutEffect(function(){return _u.on("helpersVisibleChange",function(Ou){return Ru(Ou)})},[_u]),[Bu,Lu]},react.useFiveModelIntersectRaycaster=function(){var _u=s$1();return u$1.useCallback(function($u){return _u.model.intersectRaycaster($u)},[_u])},react.useFiveModelReadyState=function(){var _u=s$1(),$u=u$1.useState(function(){return g$1(_u)}),Bu=$u[0],Ru=$u[1];return u$1.useLayoutEffect(function(){return _u.on("modelLoaded",function(){return Ru(g$1(_u))})},[_u]),Bu},react.useFiveProject2d=function(){var _u=s$1(),$u=u$1.useState(function(){return Symbol()});$u[0];var Bu=$u[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Bu(Symbol())})},[_u]),u$1.useCallback(function(Ru,Lu){return _u.project2d(Ru,Lu)},[_u])},react.useFiveScene=p$1,react.useFiveSceneEffect=v$2,react.useFiveState=function(){var _u=s$1(),$u=u$1.useState(function(){return h$1(_u)}),Bu=$u[0],Ru=$u[1],Lu=u$1.useCallback(function(Ou,Fu,Nu){Fu===void 0&&(Fu=!1),Nu===void 0&&(Nu=!0);var Vu=typeof Ou=="function"?Ou(_u.getCurrentState()):Ou;_u.setState(Vu,Fu,Nu)},[_u]);return u$1.useLayoutEffect(function(){return _u.on("stateChange",function(){return Ru(h$1(_u))})},[_u]),[Bu,Lu]},react.useFiveWork=function(){var _u=s$1(),$u=l$2(),Bu=u$1.useState(function(){return _u.work}),Ru=Bu[0],Lu=Bu[1];return u$1.useLayoutEffect(function(){return _u.on("load",function(){return Lu(_u.work)})},[_u]),[Ru,$u]},react.withFive=function(_u){return function($u){return u$1.forwardRef(function(Bu,Ru){var Lu=s$1(),Ou=l$2(),Fu=function(fp,dp){return[S("unsafe__fiveInstance",dp)?fp:void 0]}(Lu,_u)[0],Nu=function(fp,dp){var bp=S("state",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return e$1.__assign({},fp.state)},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("stateChange",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),Vu=Nu[0],Uu=Nu[1],Gu=function(fp,dp){var bp=S("currentState",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.getCurrentState()},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("currentStateChange",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),zu=Gu[0],Hu=Gu[1],ju=function(fp,dp){var bp=S("currentObserver",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.getCurrentState()},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("currentStateChange",function(){return Sp(Symbol())})},[fp]),[Cp?fp.work?fp.work.observers[Cp.panoIndex]:null:void 0,wp]}(Lu,_u),Qu=ju[0],Xu=ju[1],Ku=function(fp,dp){var bp=S("work",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.work},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("load",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),Wu=Ku[0],qu=Ku[1],Yu=function(fp,dp){var bp=S("model",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.model},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("modelLoaded",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),Zu=Yu[0],_h=Yu[1],ep=function(fp,dp){return[S("scene",dp)?fp.scene:void 0]}(Lu,_u)[0],ip=function(fp,dp){var bp=S("cameraDirection",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.camera.getWorldDirection(new i$1.Vector3)},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("cameraUpdate",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),ap=ip[0],sp=ip[1],Ju=function(fp,dp){var bp=S("cameraRaycaster",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp){var Lp=fp.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(fp.camera.position,Lp)}},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("cameraUpdate",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),_f=Ju[0],np=Ju[1],tp=function(fp,dp){var bp=S("modelReadyState",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.model.empty?"Empty":"Loaded"},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("modelLoaded",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),rp=tp[0],op=tp[1],lp=function(fp,dp){var bp=S("shownFloor",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.model.shownFloor},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("modelShownFloorChange",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),up=lp[0],cp=lp[1],Ap=function(fp,dp){var bp=S("totalFloorLength",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.model.hasFloors()},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("modelLoaded",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),yp=Ap[0],Ip=Ap[1],Ep=function(fp,dp){var bp=S("helperVisible",dp),gp=u$1.useState(Symbol()),wp=gp[0],Sp=gp[1],Cp=u$1.useMemo(function(){if(bp)return fp.helperVisible},[fp,wp]);return u$1.useLayoutEffect(function(){if(bp)return fp.on("helpersVisibleChange",function(){return Sp(Symbol())})},[fp]),[Cp,wp]}(Lu,_u),Vp=Ep[0],$p=Ep[1],kp=u$1.useMemo(function(){var fp={};return b(fp,{setState:w$1(Lu,_u),loadWork:C$2(Ou,_u),on:k(Lu,_u),once:x(Lu,_u),off:E$1(Lu,_u),intersectRaycaster:L$1(Lu,_u),project2d:F$1(Lu,_u),updateCamera:_$1(Lu,_u),initBasisLoader:P$1(Lu,_u),getPixels:R$1(Lu,_u),render:V(Lu,_u),needsRender:W$2(Lu,_u),preloadPano:M$1(Lu,_u),showFloor:O$1(Lu,_u),toggleHelperVisible:j(Lu,_u)}),fp},[Lu,Ou]),Bp=u$1.useMemo(function(){var fp=e$1.__assign({},kp);return b(fp,{unsafe__fiveInstance:Fu,state:Vu,currentState:zu,currentObserver:Qu,work:Wu,model:Zu,scene:ep,cameraDirection:ap,cameraRaycaster:_f,modelReadyState:rp,shownFloor:up,totalFloorLength:yp,helperVisible:Vp}),fp},[Lu,kp,Uu,Hu,Xu,qu,_h,sp,np,op,cp,Ip,$p]);return u$1.createElement($u,e$1.__assign({ref:Ru,$five:Bp},Bu))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$1.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_u,$u,Bu){var Ru,Lu={},Ou=null,Fu=null;Bu!==void 0&&(Ou=""+Bu),$u.key!==void 0&&(Ou=""+$u.key),$u.ref!==void 0&&(Fu=$u.ref);for(Ru in $u)n$1.call($u,Ru)&&!p.hasOwnProperty(Ru)&&(Lu[Ru]=$u[Ru]);if(_u&&_u.defaultProps)for(Ru in $u=_u.defaultProps,$u)Lu[Ru]===void 0&&(Lu[Ru]=$u[Ru]);return{$$typeof:g,type:_u,key:Ou,ref:Fu,props:Lu,_owner:m.current}}reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(_u){(function(){var $u={}.hasOwnProperty;function Bu(){for(var Ru=[],Lu=0;Lu<arguments.length;Lu++){var Ou=arguments[Lu];if(!!Ou){var Fu=typeof Ou;if(Fu==="string"||Fu==="number")Ru.push(Ou);else if(Array.isArray(Ou)){if(Ou.length){var Nu=Bu.apply(null,Ou);Nu&&Ru.push(Nu)}}else if(Fu==="object"){if(Ou.toString!==Object.prototype.toString&&!Ou.toString.toString().includes("[native code]")){Ru.push(Ou.toString());continue}for(var Vu in Ou)$u.call(Ou,Vu)&&Ou[Vu]&&Ru.push(Vu)}}}return Ru.join(" ")}_u.exports?(Bu.default=Bu,_u.exports=Bu):window.classNames=Bu})()})(classnames);var classNames=classnames.exports;function die(_u){for(var $u=arguments.length,Bu=new Array($u>1?$u-1:0),Ru=1;Ru<$u;Ru++)Bu[Ru-1]=arguments[Ru];throw new Error(typeof _u=="number"?"[MobX] minified error nr: "+_u+(Bu.length?" "+Bu.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+_u)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(_u){var $u=!1;return function(){if(!$u)return $u=!0,_u.apply(this,arguments)}}var noop=function _u(){};function isFunction(_u){return typeof _u=="function"}function isStringish(_u){var $u=typeof _u;switch($u){case"string":case"symbol":case"number":return!0}return!1}function isObject(_u){return _u!==null&&typeof _u=="object"}function isPlainObject(_u){if(!isObject(_u))return!1;var $u=Object.getPrototypeOf(_u);if($u==null)return!0;var Bu=Object.hasOwnProperty.call($u,"constructor")&&$u.constructor;return typeof Bu=="function"&&Bu.toString()===plainObjectString}function isGenerator(_u){var $u=_u==null?void 0:_u.constructor;return $u?$u.name==="GeneratorFunction"||$u.displayName==="GeneratorFunction":!1}function addHiddenProp(_u,$u,Bu){defineProperty(_u,$u,{enumerable:!1,writable:!0,configurable:!0,value:Bu})}function addHiddenFinalProp(_u,$u,Bu){defineProperty(_u,$u,{enumerable:!1,writable:!1,configurable:!0,value:Bu})}function createInstanceofPredicate(_u,$u){var Bu="isMobX"+_u;return $u.prototype[Bu]=!0,function(Ru){return isObject(Ru)&&Ru[Bu]===!0}}function isES6Map(_u){return _u instanceof Map}function isES6Set(_u){return _u instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(_u){var $u=Object.keys(_u);if(!hasGetOwnPropertySymbols)return $u;var Bu=Object.getOwnPropertySymbols(_u);return Bu.length?[].concat($u,Bu.filter(function(Ru){return objectPrototype.propertyIsEnumerable.call(_u,Ru)})):$u}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(_u){return Object.getOwnPropertyNames(_u).concat(Object.getOwnPropertySymbols(_u))}:Object.getOwnPropertyNames;function toPrimitive(_u){return _u===null?null:typeof _u=="object"?""+_u:_u}function hasProp(_u,$u){return objectPrototype.hasOwnProperty.call(_u,$u)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function _u($u){var Bu={};return ownKeys($u).forEach(function(Ru){Bu[Ru]=getDescriptor($u,Ru)}),Bu};function _defineProperties(_u,$u){for(var Bu=0;Bu<$u.length;Bu++){var Ru=$u[Bu];Ru.enumerable=Ru.enumerable||!1,Ru.configurable=!0,"value"in Ru&&(Ru.writable=!0),Object.defineProperty(_u,Ru.key,Ru)}}function _createClass(_u,$u,Bu){return $u&&_defineProperties(_u.prototype,$u),Bu&&_defineProperties(_u,Bu),Object.defineProperty(_u,"prototype",{writable:!1}),_u}function _extends(){return _extends=Object.assign||function(_u){for(var $u=1;$u<arguments.length;$u++){var Bu=arguments[$u];for(var Ru in Bu)Object.prototype.hasOwnProperty.call(Bu,Ru)&&(_u[Ru]=Bu[Ru])}return _u},_extends.apply(this,arguments)}function _inheritsLoose(_u,$u){_u.prototype=Object.create($u.prototype),_u.prototype.constructor=_u,_setPrototypeOf(_u,$u)}function _setPrototypeOf(_u,$u){return _setPrototypeOf=Object.setPrototypeOf||function(Ru,Lu){return Ru.__proto__=Lu,Ru},_setPrototypeOf(_u,$u)}function _assertThisInitialized(_u){if(_u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _u}function _unsupportedIterableToArray(_u,$u){if(!!_u){if(typeof _u=="string")return _arrayLikeToArray(_u,$u);var Bu=Object.prototype.toString.call(_u).slice(8,-1);if(Bu==="Object"&&_u.constructor&&(Bu=_u.constructor.name),Bu==="Map"||Bu==="Set")return Array.from(_u);if(Bu==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Bu))return _arrayLikeToArray(_u,$u)}}function _arrayLikeToArray(_u,$u){($u==null||$u>_u.length)&&($u=_u.length);for(var Bu=0,Ru=new Array($u);Bu<$u;Bu++)Ru[Bu]=_u[Bu];return Ru}function _createForOfIteratorHelperLoose(_u,$u){var Bu=typeof Symbol!="undefined"&&_u[Symbol.iterator]||_u["@@iterator"];if(Bu)return(Bu=Bu.call(_u)).next.bind(Bu);if(Array.isArray(_u)||(Bu=_unsupportedIterableToArray(_u))||$u&&_u&&typeof _u.length=="number"){Bu&&(_u=Bu);var Ru=0;return function(){return Ru>=_u.length?{done:!0}:{done:!1,value:_u[Ru++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(_u){function $u(Bu,Ru){storeAnnotation(Bu,Ru,_u)}return Object.assign($u,_u)}function storeAnnotation(_u,$u,Bu){hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),isOverride(Bu)||(_u[storedAnnotationsSymbol][$u]=Bu)}function collectStoredAnnotations(_u){return hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),_u[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function _u(Bu){Bu===void 0&&(Bu="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=Bu}var $u=_u.prototype;return $u.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Ru){return Ru()})},$u.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Ru){return Ru()})},$u.reportObserved=function(){return reportObserved(this)},$u.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},$u.toString=function(){return this.name_},_u}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(_u,$u,Bu){$u===void 0&&($u=noop),Bu===void 0&&(Bu=noop);var Ru=new Atom(_u);return $u!==noop&&onBecomeObserved(Ru,$u),Bu!==noop&&onBecomeUnobserved(Ru,Bu),Ru}function identityComparer(_u,$u){return _u===$u}function structuralComparer(_u,$u){return deepEqual(_u,$u)}function shallowComparer(_u,$u){return deepEqual(_u,$u,1)}function defaultComparer(_u,$u){return Object.is?Object.is(_u,$u):_u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(_u,$u,Bu){return isObservable(_u)?_u:Array.isArray(_u)?observable.array(_u,{name:Bu}):isPlainObject(_u)?observable.object(_u,void 0,{name:Bu}):isES6Map(_u)?observable.map(_u,{name:Bu}):isES6Set(_u)?observable.set(_u,{name:Bu}):typeof _u=="function"&&!isAction(_u)&&!isFlow(_u)?isGenerator(_u)?flow(_u):autoAction(Bu,_u):_u}function shallowEnhancer(_u,$u,Bu){if(_u==null||isObservableObject(_u)||isObservableArray(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(Array.isArray(_u))return observable.array(_u,{name:Bu,deep:!1});if(isPlainObject(_u))return observable.object(_u,void 0,{name:Bu,deep:!1});if(isES6Map(_u))return observable.map(_u,{name:Bu,deep:!1});if(isES6Set(_u))return observable.set(_u,{name:Bu,deep:!1})}function referenceEnhancer(_u){return _u}function refStructEnhancer(_u,$u){return deepEqual(_u,$u)?$u:_u}var OVERRIDE="override";function isOverride(_u){return _u.annotationType_===OVERRIDE}function createActionAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$1,extend_:extend_$1}}function make_$1(_u,$u,Bu,Ru){var Lu;if((Lu=this.options_)!=null&&Lu.bound)return this.extend_(_u,$u,Bu,!1)===null?0:1;if(Ru===_u.target_)return this.extend_(_u,$u,Bu,!1)===null?0:2;if(isAction(Bu.value))return 1;var Ou=createActionDescriptor(_u,this,$u,Bu,!1);return defineProperty(Ru,$u,Ou),2}function extend_$1(_u,$u,Bu,Ru){var Lu=createActionDescriptor(_u,this,$u,Bu);return _u.defineProperty_($u,Lu,Ru)}function assertActionDescriptor(_u,$u,Bu,Ru){$u.annotationType_,Ru.value}function createActionDescriptor(_u,$u,Bu,Ru,Lu){var Ou,Fu,Nu,Vu,Uu,Gu,zu;Lu===void 0&&(Lu=globalState.safeDescriptors),assertActionDescriptor(_u,$u,Bu,Ru);var Hu=Ru.value;if((Ou=$u.options_)!=null&&Ou.bound){var ju;Hu=Hu.bind((ju=_u.proxy_)!=null?ju:_u.target_)}return{value:createAction((Fu=(Nu=$u.options_)==null?void 0:Nu.name)!=null?Fu:Bu.toString(),Hu,(Vu=(Uu=$u.options_)==null?void 0:Uu.autoAction)!=null?Vu:!1,(Gu=$u.options_)!=null&&Gu.bound?(zu=_u.proxy_)!=null?zu:_u.target_:void 0),configurable:Lu?_u.isPlainObject_:!0,enumerable:!1,writable:!Lu}}function createFlowAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$2,extend_:extend_$2}}function make_$2(_u,$u,Bu,Ru){var Lu;if(Ru===_u.target_)return this.extend_(_u,$u,Bu,!1)===null?0:2;if((Lu=this.options_)!=null&&Lu.bound&&(!hasProp(_u.target_,$u)||!isFlow(_u.target_[$u]))&&this.extend_(_u,$u,Bu,!1)===null)return 0;if(isFlow(Bu.value))return 1;var Ou=createFlowDescriptor(_u,this,$u,Bu,!1,!1);return defineProperty(Ru,$u,Ou),2}function extend_$2(_u,$u,Bu,Ru){var Lu,Ou=createFlowDescriptor(_u,this,$u,Bu,(Lu=this.options_)==null?void 0:Lu.bound);return _u.defineProperty_($u,Ou,Ru)}function assertFlowDescriptor(_u,$u,Bu,Ru){$u.annotationType_,Ru.value}function createFlowDescriptor(_u,$u,Bu,Ru,Lu,Ou){Ou===void 0&&(Ou=globalState.safeDescriptors),assertFlowDescriptor(_u,$u,Bu,Ru);var Fu=Ru.value;if(isFlow(Fu)||(Fu=flow(Fu)),Lu){var Nu;Fu=Fu.bind((Nu=_u.proxy_)!=null?Nu:_u.target_),Fu.isMobXFlow=!0}return{value:Fu,configurable:Ou?_u.isPlainObject_:!0,enumerable:!1,writable:!Ou}}function createComputedAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$3,extend_:extend_$3}}function make_$3(_u,$u,Bu){return this.extend_(_u,$u,Bu,!1)===null?0:1}function extend_$3(_u,$u,Bu,Ru){return assertComputedDescriptor(_u,this,$u,Bu),_u.defineComputedProperty_($u,_extends({},this.options_,{get:Bu.get,set:Bu.set}),Ru)}function assertComputedDescriptor(_u,$u,Bu,Ru){$u.annotationType_,Ru.get}function createObservableAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$4,extend_:extend_$4}}function make_$4(_u,$u,Bu){return this.extend_(_u,$u,Bu,!1)===null?0:1}function extend_$4(_u,$u,Bu,Ru){var Lu,Ou;return assertObservableDescriptor(_u,this),_u.defineObservableProperty_($u,Bu.value,(Lu=(Ou=this.options_)==null?void 0:Ou.enhancer)!=null?Lu:deepEnhancer,Ru)}function assertObservableDescriptor(_u,$u,Bu,Ru){$u.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(_u){return{annotationType_:AUTO,options_:_u,make_:make_$5,extend_:extend_$5}}function make_$5(_u,$u,Bu,Ru){var Lu,Ou;if(Bu.get)return computed.make_(_u,$u,Bu,Ru);if(Bu.set){var Fu=createAction($u.toString(),Bu.set);return Ru===_u.target_?_u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:Fu})===null?0:2:(defineProperty(Ru,$u,{configurable:!0,set:Fu}),2)}if(Ru!==_u.target_&&typeof Bu.value=="function"){var Nu;if(isGenerator(Bu.value)){var Vu,Uu=(Vu=this.options_)!=null&&Vu.autoBind?flow.bound:flow;return Uu.make_(_u,$u,Bu,Ru)}var Gu=(Nu=this.options_)!=null&&Nu.autoBind?autoAction.bound:autoAction;return Gu.make_(_u,$u,Bu,Ru)}var zu=((Lu=this.options_)==null?void 0:Lu.deep)===!1?observable.ref:observable;if(typeof Bu.value=="function"&&(Ou=this.options_)!=null&&Ou.autoBind){var Hu;Bu.value=Bu.value.bind((Hu=_u.proxy_)!=null?Hu:_u.target_)}return zu.make_(_u,$u,Bu,Ru)}function extend_$5(_u,$u,Bu,Ru){var Lu,Ou;if(Bu.get)return computed.extend_(_u,$u,Bu,Ru);if(Bu.set)return _u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:createAction($u.toString(),Bu.set)},Ru);if(typeof Bu.value=="function"&&(Lu=this.options_)!=null&&Lu.autoBind){var Fu;Bu.value=Bu.value.bind((Fu=_u.proxy_)!=null?Fu:_u.target_)}var Nu=((Ou=this.options_)==null?void 0:Ou.deep)===!1?observable.ref:observable;return Nu.extend_(_u,$u,Bu,Ru)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(_u){return _u||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(_u){return _u.deep===!0?deepEnhancer:_u.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(_u.defaultDecorator)}function getAnnotationFromOptions(_u){var $u;return _u?($u=_u.defaultDecorator)!=null?$u:createAutoAnnotation(_u):void 0}function getEnhancerFromAnnotation(_u){var $u,Bu;return _u&&($u=(Bu=_u.options_)==null?void 0:Bu.enhancer)!=null?$u:deepEnhancer}function createObservable(_u,$u,Bu){if(isStringish($u)){storeAnnotation(_u,$u,observableAnnotation);return}return isObservable(_u)?_u:isPlainObject(_u)?observable.object(_u,$u,Bu):Array.isArray(_u)?observable.array(_u,$u):isES6Map(_u)?observable.map(_u,$u):isES6Set(_u)?observable.set(_u,$u):typeof _u=="object"&&_u!==null?_u:observable.box(_u,$u)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function _u($u,Bu){var Ru=asCreateObservableOptions(Bu);return new ObservableValue($u,getEnhancerFromOptions(Ru),Ru.name,!0,Ru.equals)},array:function _u($u,Bu){var Ru=asCreateObservableOptions(Bu);return(globalState.useProxies===!1||Ru.proxy===!1?createLegacyArray:createObservableArray)($u,getEnhancerFromOptions(Ru),Ru.name)},map:function _u($u,Bu){var Ru=asCreateObservableOptions(Bu);return new ObservableMap($u,getEnhancerFromOptions(Ru),Ru.name)},set:function _u($u,Bu){var Ru=asCreateObservableOptions(Bu);return new ObservableSet($u,getEnhancerFromOptions(Ru),Ru.name)},object:function _u($u,Bu,Ru){return extendObservable(globalState.useProxies===!1||(Ru==null?void 0:Ru.proxy)===!1?asObservableObject({},Ru):asDynamicObservableObject({},Ru),$u,Bu)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function _u($u,Bu){if(isStringish(Bu))return storeAnnotation($u,Bu,computedAnnotation);if(isPlainObject($u))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,$u));var Ru=isPlainObject(Bu)?Bu:{};return Ru.get=$u,Ru.name||(Ru.name=$u.name||""),new ComputedValue(Ru)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(_u,$u,Bu,Ru){Bu===void 0&&(Bu=!1);function Lu(){return executeAction(_u,Bu,$u,Ru||this,arguments)}return Lu.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=_u,Object.defineProperty(Lu,"name",tmpNameDescriptor)),Lu}function executeAction(_u,$u,Bu,Ru,Lu){var Ou=_startAction(_u,$u);try{return Bu.apply(Ru,Lu)}catch(Fu){throw Ou.error_=Fu,Fu}finally{_endAction(Ou)}}function _startAction(_u,$u,Bu,Ru){var Lu=!1,Ou=0,Fu=globalState.trackingDerivation,Nu=!$u||!Fu;startBatch();var Vu=globalState.allowStateChanges;Nu&&(untrackedStart(),Vu=allowStateChangesStart(!0));var Uu=allowStateReadsStart(!0),Gu={runAsAction_:Nu,prevDerivation_:Fu,prevAllowStateChanges_:Vu,prevAllowStateReads_:Uu,notifySpy_:Lu,startTime_:Ou,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Gu.actionId_,Gu}function _endAction(_u){currentActionId!==_u.actionId_&&die(30),currentActionId=_u.parentActionId_,_u.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(_u.prevAllowStateChanges_),allowStateReadsEnd(_u.prevAllowStateReads_),endBatch(),_u.runAsAction_&&untrackedEnd(_u.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(_u,$u){var Bu=allowStateChangesStart(_u);try{return $u()}finally{allowStateChangesEnd(Bu)}}function allowStateChangesStart(_u){var $u=globalState.allowStateChanges;return globalState.allowStateChanges=_u,$u}function allowStateChangesEnd(_u){globalState.allowStateChanges=_u}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(_u){_inheritsLoose($u,_u);function $u(Ru,Lu,Ou,Fu,Nu){var Vu;return Ou===void 0&&(Ou="ObservableValue"),Nu===void 0&&(Nu=comparer.default),Vu=_u.call(this,Ou)||this,Vu.enhancer=void 0,Vu.name_=void 0,Vu.equals=void 0,Vu.hasUnreportedChange_=!1,Vu.interceptors_=void 0,Vu.changeListeners_=void 0,Vu.value_=void 0,Vu.dehancer=void 0,Vu.enhancer=Lu,Vu.name_=Ou,Vu.equals=Nu,Vu.value_=Lu(Ru,void 0,Ou),Vu}var Bu=$u.prototype;return Bu.dehanceValue=function(Lu){return this.dehancer!==void 0?this.dehancer(Lu):Lu},Bu.set=function(Lu){this.value_,Lu=this.prepareNewValue_(Lu),Lu!==globalState.UNCHANGED&&this.setNewValue_(Lu)},Bu.prepareNewValue_=function(Lu){if(hasInterceptors(this)){var Ou=interceptChange(this,{object:this,type:UPDATE,newValue:Lu});if(!Ou)return globalState.UNCHANGED;Lu=Ou.newValue}return Lu=this.enhancer(Lu,this.value_,this.name_),this.equals(this.value_,Lu)?globalState.UNCHANGED:Lu},Bu.setNewValue_=function(Lu){var Ou=this.value_;this.value_=Lu,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Lu,oldValue:Ou})},Bu.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},Bu.intercept_=function(Lu){return registerInterceptor(this,Lu)},Bu.observe_=function(Lu,Ou){return Ou&&Lu({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Lu)},Bu.raw=function(){return this.value_},Bu.toJSON=function(){return this.get()},Bu.toString=function(){return this.name_+"["+this.value_+"]"},Bu.valueOf=function(){return toPrimitive(this.get())},Bu[_Symbol$toPrimitive]=function(){return this.valueOf()},$u}(Atom),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(){function _u(Bu){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,Bu.get||die(31),this.derivation=Bu.get,this.name_=Bu.name||"ComputedValue",Bu.set&&(this.setter_=createAction("ComputedValue-setter",Bu.set)),this.equals_=Bu.equals||(Bu.compareStructural||Bu.struct?comparer.structural:comparer.default),this.scope_=Bu.context,this.requiresReaction_=Bu.requiresReaction,this.keepAlive_=!!Bu.keepAlive}var $u=_u.prototype;return $u.onBecomeStale_=function(){propagateMaybeChanged(this)},$u.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Ru){return Ru()})},$u.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Ru){return Ru()})},$u.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Ru=globalState.trackingContext;this.keepAlive_&&!Ru&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Ru}var Lu=this.value_;if(isCaughtException(Lu))throw Lu.cause;return Lu},$u.set=function(Ru){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Ru)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},$u.trackAndCompute=function(){var Ru=this.value_,Lu=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Ou=this.computeValue_(!0),Fu=Lu||isCaughtException(Ru)||isCaughtException(Ou)||!this.equals_(Ru,Ou);return Fu&&(this.value_=Ou),Fu},$u.computeValue_=function(Ru){this.isComputing_=!0;var Lu=allowStateChangesStart(!1),Ou;if(Ru)Ou=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Ou=this.derivation.call(this.scope_);else try{Ou=this.derivation.call(this.scope_)}catch(Fu){Ou=new CaughtException(Fu)}return allowStateChangesEnd(Lu),this.isComputing_=!1,Ou},$u.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},$u.observe_=function(Ru,Lu){var Ou=this,Fu=!0,Nu=void 0;return autorun(function(){var Vu=Ou.get();if(!Fu||Lu){var Uu=untrackedStart();Ru({observableKind:"computed",debugObjectName:Ou.name_,type:UPDATE,object:Ou,newValue:Vu,oldValue:Nu}),untrackedEnd(Uu)}Fu=!1,Nu=Vu})},$u.warnAboutUntrackedRead_=function(){},$u.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},$u.valueOf=function(){return toPrimitive(this.get())},$u[_Symbol$toPrimitive$1]=function(){return this.valueOf()},_u}(),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(_u){_u[_u.NOT_TRACKING_=-1]="NOT_TRACKING_",_u[_u.UP_TO_DATE_=0]="UP_TO_DATE_",_u[_u.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",_u[_u.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(_u){_u[_u.NONE=0]="NONE",_u[_u.LOG=1]="LOG",_u[_u.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function _u($u){this.cause=void 0,this.cause=$u};function isCaughtException(_u){return _u instanceof CaughtException}function shouldCompute(_u){switch(_u.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var $u=allowStateReadsStart(!0),Bu=untrackedStart(),Ru=_u.observing_,Lu=Ru.length,Ou=0;Ou<Lu;Ou++){var Fu=Ru[Ou];if(isComputedValue(Fu)){if(globalState.disableErrorBoundaries)Fu.get();else try{Fu.get()}catch{return untrackedEnd(Bu),allowStateReadsEnd($u),!0}if(_u.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(Bu),allowStateReadsEnd($u),!0}}return changeDependenciesStateTo0(_u),untrackedEnd(Bu),allowStateReadsEnd($u),!1}}}function checkIfStateModificationsAreAllowed(_u){}function trackDerivedFunction(_u,$u,Bu){var Ru=allowStateReadsStart(!0);changeDependenciesStateTo0(_u),_u.newObserving_=new Array(_u.observing_.length+100),_u.unboundDepsCount_=0,_u.runId_=++globalState.runId;var Lu=globalState.trackingDerivation;globalState.trackingDerivation=_u,globalState.inBatch++;var Ou;if(globalState.disableErrorBoundaries===!0)Ou=$u.call(Bu);else try{Ou=$u.call(Bu)}catch(Fu){Ou=new CaughtException(Fu)}return globalState.inBatch--,globalState.trackingDerivation=Lu,bindDependencies(_u),allowStateReadsEnd(Ru),Ou}function bindDependencies(_u){for(var $u=_u.observing_,Bu=_u.observing_=_u.newObserving_,Ru=IDerivationState_.UP_TO_DATE_,Lu=0,Ou=_u.unboundDepsCount_,Fu=0;Fu<Ou;Fu++){var Nu=Bu[Fu];Nu.diffValue_===0&&(Nu.diffValue_=1,Lu!==Fu&&(Bu[Lu]=Nu),Lu++),Nu.dependenciesState_>Ru&&(Ru=Nu.dependenciesState_)}for(Bu.length=Lu,_u.newObserving_=null,Ou=$u.length;Ou--;){var Vu=$u[Ou];Vu.diffValue_===0&&removeObserver(Vu,_u),Vu.diffValue_=0}for(;Lu--;){var Uu=Bu[Lu];Uu.diffValue_===1&&(Uu.diffValue_=0,addObserver(Uu,_u))}Ru!==IDerivationState_.UP_TO_DATE_&&(_u.dependenciesState_=Ru,_u.onBecomeStale_())}function clearObserving(_u){var $u=_u.observing_;_u.observing_=[];for(var Bu=$u.length;Bu--;)removeObserver($u[Bu],_u);_u.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(_u){var $u=untrackedStart();try{return _u()}finally{untrackedEnd($u)}}function untrackedStart(){var _u=globalState.trackingDerivation;return globalState.trackingDerivation=null,_u}function untrackedEnd(_u){globalState.trackingDerivation=_u}function allowStateReadsStart(_u){var $u=globalState.allowStateReads;return globalState.allowStateReads=_u,$u}function allowStateReadsEnd(_u){globalState.allowStateReads=_u}function changeDependenciesStateTo0(_u){if(_u.dependenciesState_!==IDerivationState_.UP_TO_DATE_){_u.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var $u=_u.observing_,Bu=$u.length;Bu--;)$u[Bu].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function _u(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var _u=getGlobal();return _u.__mobxInstanceCount>0&&!_u.__mobxGlobals&&(canMergeGlobalState=!1),_u.__mobxGlobals&&_u.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?_u.__mobxGlobals?(_u.__mobxInstanceCount+=1,_u.__mobxGlobals.UNCHANGED||(_u.__mobxGlobals.UNCHANGED={}),_u.__mobxGlobals):(_u.__mobxInstanceCount=1,_u.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var _u=getGlobal();--_u.__mobxInstanceCount===0&&(_u.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(_u,$u){_u.observers_.add($u),_u.lowestObserverState_>$u.dependenciesState_&&(_u.lowestObserverState_=$u.dependenciesState_)}function removeObserver(_u,$u){_u.observers_.delete($u),_u.observers_.size===0&&queueForUnobservation(_u)}function queueForUnobservation(_u){_u.isPendingUnobservation_===!1&&(_u.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(_u))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var _u=globalState.pendingUnobservations,$u=0;$u<_u.length;$u++){var Bu=_u[$u];Bu.isPendingUnobservation_=!1,Bu.observers_.size===0&&(Bu.isBeingObserved_&&(Bu.isBeingObserved_=!1,Bu.onBUO()),Bu instanceof ComputedValue&&Bu.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(_u){var $u=globalState.trackingDerivation;return $u!==null?($u.runId_!==_u.lastAccessedBy_&&(_u.lastAccessedBy_=$u.runId_,$u.newObserving_[$u.unboundDepsCount_++]=_u,!_u.isBeingObserved_&&globalState.trackingContext&&(_u.isBeingObserved_=!0,_u.onBO())),!0):(_u.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(_u),!1)}function propagateChanged(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&$u.onBecomeStale_(),$u.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?$u.dependenciesState_=IDerivationState_.STALE_:$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(_u){_u.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&($u.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,$u.onBecomeStale_())}))}var Reaction=function(){function _u(Bu,Ru,Lu,Ou){Bu===void 0&&(Bu="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=Bu,this.onInvalidate_=Ru,this.errorHandler_=Lu,this.requiresObservable_=Ou}var $u=_u.prototype;return $u.onBecomeStale_=function(){this.schedule_()},$u.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},$u.isScheduled=function(){return this.isScheduled_},$u.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Ru=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Lu){this.reportExceptionInDerivation_(Lu)}}globalState.trackingContext=Ru,endBatch()}},$u.track=function(Ru){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Lu=globalState.trackingContext;globalState.trackingContext=this;var Ou=trackDerivedFunction(this,Ru,void 0);globalState.trackingContext=Lu,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Ou)&&this.reportExceptionInDerivation_(Ou.cause),endBatch()}},$u.reportExceptionInDerivation_=function(Ru){var Lu=this;if(this.errorHandler_){this.errorHandler_(Ru,this);return}if(globalState.disableErrorBoundaries)throw Ru;var Ou="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Ou,Ru),globalState.globalReactionErrorHandlers.forEach(function(Fu){return Fu(Ru,Lu)})},$u.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},$u.getDisposer_=function(){var Ru=this.dispose.bind(this);return Ru[$mobx]=this,Ru},$u.toString=function(){return"Reaction["+this.name_+"]"},$u.trace=function(Ru){Ru===void 0&&(Ru=!1),trace(this,Ru)},_u}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function _u($u){return $u()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var _u=globalState.pendingReactions,$u=0;_u.length>0;){++$u===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+_u[0]),_u.splice(0));for(var Bu=_u.splice(0),Ru=0,Lu=Bu.length;Ru<Lu;Ru++)Bu[Ru].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(_u){var $u=reactionScheduler;reactionScheduler=function(Ru){return _u(function(){return $u(Ru)})}}function isSpyEnabled(){return!1}function spyReport(_u){}function spyReportStart(_u){}function spyReportEnd(_u){}function spy(_u){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(_u){var $u=function(Ru,Lu){if(isFunction(Ru))return createAction(Ru.name||DEFAULT_ACTION_NAME,Ru,_u);if(isFunction(Lu))return createAction(Ru,Lu,_u);if(isStringish(Lu))return storeAnnotation(Ru,Lu,_u?autoActionAnnotation:actionAnnotation);if(isStringish(Ru))return createDecoratorAnnotation(createActionAnnotation(_u?AUTOACTION:ACTION,{name:Ru,autoAction:_u}))};return $u}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(_u){return executeAction(_u.name||DEFAULT_ACTION_NAME,!1,_u,this,void 0)}function isAction(_u){return isFunction(_u)&&_u.isMobxAction===!0}function autorun(_u,$u){var Bu,Ru;$u===void 0&&($u=EMPTY_OBJECT);var Lu=(Bu=(Ru=$u)==null?void 0:Ru.name)!=null?Bu:"Autorun",Ou=!$u.scheduler&&!$u.delay,Fu;if(Ou)Fu=new Reaction(Lu,function(){this.track(Uu)},$u.onError,$u.requiresObservable);else{var Nu=createSchedulerFromOptions($u),Vu=!1;Fu=new Reaction(Lu,function(){Vu||(Vu=!0,Nu(function(){Vu=!1,Fu.isDisposed_||Fu.track(Uu)}))},$u.onError,$u.requiresObservable)}function Uu(){_u(Fu)}return Fu.schedule_(),Fu.getDisposer_()}var run=function _u($u){return $u()};function createSchedulerFromOptions(_u){return _u.scheduler?_u.scheduler:_u.delay?function($u){return setTimeout($u,_u.delay)}:run}function reaction(_u,$u,Bu){var Ru;Bu===void 0&&(Bu=EMPTY_OBJECT);var Lu=(Ru=Bu.name)!=null?Ru:"Reaction",Ou=action(Lu,Bu.onError?wrapErrorHandler(Bu.onError,$u):$u),Fu=!Bu.scheduler&&!Bu.delay,Nu=createSchedulerFromOptions(Bu),Vu=!0,Uu=!1,Gu,zu,Hu=Bu.compareStructural?comparer.structural:Bu.equals||comparer.default,ju=new Reaction(Lu,function(){Vu||Fu?Qu():Uu||(Uu=!0,Nu(Qu))},Bu.onError,Bu.requiresObservable);function Qu(){if(Uu=!1,!ju.isDisposed_){var Xu=!1;ju.track(function(){var Ku=allowStateChanges(!1,function(){return _u(ju)});Xu=Vu||!Hu(Gu,Ku),zu=Gu,Gu=Ku}),(Vu&&Bu.fireImmediately||!Vu&&Xu)&&Ou(Gu,zu,ju),Vu=!1}}return ju.schedule_(),ju.getDisposer_()}function wrapErrorHandler(_u,$u){return function(){try{return $u.apply(this,arguments)}catch(Bu){_u.call(this,Bu)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(_u,$u,Bu){return interceptHook(ON_BECOME_OBSERVED,_u,$u,Bu)}function onBecomeUnobserved(_u,$u,Bu){return interceptHook(ON_BECOME_UNOBSERVED,_u,$u,Bu)}function interceptHook(_u,$u,Bu,Ru){var Lu=typeof Ru=="function"?getAtom($u,Bu):getAtom($u),Ou=isFunction(Ru)?Ru:Bu,Fu=_u+"L";return Lu[Fu]?Lu[Fu].add(Ou):Lu[Fu]=new Set([Ou]),function(){var Nu=Lu[Fu];Nu&&(Nu.delete(Ou),Nu.size===0&&delete Lu[Fu])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(_u){_u.isolateGlobalState===!0&&isolateGlobalState();var $u=_u.useProxies,Bu=_u.enforceActions;if($u!==void 0&&(globalState.useProxies=$u===ALWAYS?!0:$u===NEVER?!1:typeof Proxy!="undefined"),$u==="ifavailable"&&(globalState.verifyProxies=!0),Bu!==void 0){var Ru=Bu===ALWAYS?ALWAYS:Bu===OBSERVED;globalState.enforceActions=Ru,globalState.allowStateChanges=!(Ru===!0||Ru===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Lu){Lu in _u&&(globalState[Lu]=!!_u[Lu])}),globalState.allowStateReads=!globalState.observableRequiresReaction,_u.reactionScheduler&&setReactionScheduler(_u.reactionScheduler)}function extendObservable(_u,$u,Bu,Ru){var Lu=getOwnPropertyDescriptors($u),Ou=asObservableObject(_u,Ru)[$mobx];startBatch();try{ownKeys(Lu).forEach(function(Fu){Ou.extend_(Fu,Lu[Fu],Bu&&Fu in Bu?Bu[Fu]:!0)})}finally{endBatch()}return _u}function getDependencyTree(_u,$u){return nodeToDependencyTree(getAtom(_u,$u))}function nodeToDependencyTree(_u){var $u={name:_u.name_};return _u.observing_&&_u.observing_.length>0&&($u.dependencies=unique(_u.observing_).map(nodeToDependencyTree)),$u}function unique(_u){return Array.from(new Set(_u))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function _u($u,Bu){if(isStringish(Bu))return storeAnnotation($u,Bu,flowAnnotation);var Ru=$u,Lu=Ru.name||"<unnamed flow>",Ou=function(){var Nu=this,Vu=arguments,Uu=++generatorId,Gu=action(Lu+" - runid: "+Uu+" - init",Ru).apply(Nu,Vu),zu,Hu=void 0,ju=new Promise(function(Qu,Xu){var Ku=0;zu=Xu;function Wu(Zu){Hu=void 0;var _h;try{_h=action(Lu+" - runid: "+Uu+" - yield "+Ku++,Gu.next).call(Gu,Zu)}catch(ep){return Xu(ep)}Yu(_h)}function qu(Zu){Hu=void 0;var _h;try{_h=action(Lu+" - runid: "+Uu+" - yield "+Ku++,Gu.throw).call(Gu,Zu)}catch(ep){return Xu(ep)}Yu(_h)}function Yu(Zu){if(isFunction(Zu==null?void 0:Zu.then)){Zu.then(Yu,Xu);return}return Zu.done?Qu(Zu.value):(Hu=Promise.resolve(Zu.value),Hu.then(Wu,qu))}Wu(void 0)});return ju.cancel=action(Lu+" - runid: "+Uu+" - cancel",function(){try{Hu&&cancelPromise(Hu);var Qu=Gu.return(void 0),Xu=Promise.resolve(Qu.value);Xu.then(noop,noop),cancelPromise(Xu),zu(new FlowCancellationError)}catch(Ku){zu(Ku)}}),ju};return Ou.isMobXFlow=!0,Ou},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(_u){isFunction(_u.cancel)&&_u.cancel()}function isFlow(_u){return(_u==null?void 0:_u.isMobXFlow)===!0}function _isObservable(_u,$u){return _u?$u!==void 0?isObservableObject(_u)?_u[$mobx].values_.has($u):!1:isObservableObject(_u)||!!_u[$mobx]||isAtom(_u)||isReaction(_u)||isComputedValue(_u):!1}function isObservable(_u){return _isObservable(_u)}function trace(){die("trace() is not available in production builds");for(var _u=!1,$u=arguments.length,Bu=new Array($u),Ru=0;Ru<$u;Ru++)Bu[Ru]=arguments[Ru];typeof Bu[Bu.length-1]=="boolean"&&(_u=Bu.pop());var Lu=getAtomFromArgs(Bu);if(!Lu)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Lu.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Lu.name_+"' tracing enabled"),Lu.isTracing_=_u?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(_u){switch(_u.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(_u[0]);case 2:return getAtom(_u[0],_u[1])}}function transaction(_u,$u){$u===void 0&&($u=void 0),startBatch();try{return _u.apply($u)}finally{endBatch()}}function getAdm(_u){return _u[$mobx]}var objectProxyTraps={has:function _u($u,Bu){return getAdm($u).has_(Bu)},get:function _u($u,Bu){return getAdm($u).get_(Bu)},set:function _u($u,Bu,Ru){var Lu;return isStringish(Bu)?(Lu=getAdm($u).set_(Bu,Ru,!0))!=null?Lu:!0:!1},deleteProperty:function _u($u,Bu){var Ru;return isStringish(Bu)?(Ru=getAdm($u).delete_(Bu,!0))!=null?Ru:!0:!1},defineProperty:function _u($u,Bu,Ru){var Lu;return(Lu=getAdm($u).defineProperty_(Bu,Ru))!=null?Lu:!0},ownKeys:function _u($u){return getAdm($u).ownKeys_()},preventExtensions:function _u($u){die(13)}};function asDynamicObservableObject(_u,$u){var Bu,Ru;return assertProxies(),_u=asObservableObject(_u,$u),(Ru=(Bu=_u[$mobx]).proxy_)!=null?Ru:Bu.proxy_=new Proxy(_u,objectProxyTraps)}function hasInterceptors(_u){return _u.interceptors_!==void 0&&_u.interceptors_.length>0}function registerInterceptor(_u,$u){var Bu=_u.interceptors_||(_u.interceptors_=[]);return Bu.push($u),once(function(){var Ru=Bu.indexOf($u);Ru!==-1&&Bu.splice(Ru,1)})}function interceptChange(_u,$u){var Bu=untrackedStart();try{for(var Ru=[].concat(_u.interceptors_||[]),Lu=0,Ou=Ru.length;Lu<Ou&&($u=Ru[Lu]($u),$u&&!$u.type&&die(14),!!$u);Lu++);return $u}finally{untrackedEnd(Bu)}}function hasListeners(_u){return _u.changeListeners_!==void 0&&_u.changeListeners_.length>0}function registerListener(_u,$u){var Bu=_u.changeListeners_||(_u.changeListeners_=[]);return Bu.push($u),once(function(){var Ru=Bu.indexOf($u);Ru!==-1&&Bu.splice(Ru,1)})}function notifyListeners(_u,$u){var Bu=untrackedStart(),Ru=_u.changeListeners_;if(!!Ru){Ru=Ru.slice();for(var Lu=0,Ou=Ru.length;Lu<Ou;Lu++)Ru[Lu]($u);untrackedEnd(Bu)}}function makeObservable(_u,$u,Bu){var Ru=asObservableObject(_u,Bu)[$mobx];startBatch();try{var Lu;(Lu=$u)!=null||($u=collectStoredAnnotations(_u)),ownKeys($u).forEach(function(Ou){return Ru.make_(Ou,$u[Ou])})}finally{endBatch()}return _u}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function _u($u,Bu){var Ru=$u[$mobx];return Bu===$mobx?Ru:Bu==="length"?Ru.getArrayLength_():typeof Bu=="string"&&!isNaN(Bu)?Ru.get_(parseInt(Bu)):hasProp(arrayExtensions,Bu)?arrayExtensions[Bu]:$u[Bu]},set:function _u($u,Bu,Ru){var Lu=$u[$mobx];return Bu==="length"&&Lu.setArrayLength_(Ru),typeof Bu=="symbol"||isNaN(Bu)?$u[Bu]=Ru:Lu.set_(parseInt(Bu),Ru),!0},preventExtensions:function _u(){die(15)}},ObservableArrayAdministration=function(){function _u(Bu,Ru,Lu,Ou){Bu===void 0&&(Bu="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Lu,this.legacyMode_=Ou,this.atom_=new Atom(Bu),this.enhancer_=function(Fu,Nu){return Ru(Fu,Nu,"ObservableArray[..]")}}var $u=_u.prototype;return $u.dehanceValue_=function(Ru){return this.dehancer!==void 0?this.dehancer(Ru):Ru},$u.dehanceValues_=function(Ru){return this.dehancer!==void 0&&Ru.length>0?Ru.map(this.dehancer):Ru},$u.intercept_=function(Ru){return registerInterceptor(this,Ru)},$u.observe_=function(Ru,Lu){return Lu===void 0&&(Lu=!1),Lu&&Ru({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Ru)},$u.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},$u.setArrayLength_=function(Ru){(typeof Ru!="number"||isNaN(Ru)||Ru<0)&&die("Out of range: "+Ru);var Lu=this.values_.length;if(Ru!==Lu)if(Ru>Lu){for(var Ou=new Array(Ru-Lu),Fu=0;Fu<Ru-Lu;Fu++)Ou[Fu]=void 0;this.spliceWithArray_(Lu,0,Ou)}else this.spliceWithArray_(Ru,Lu-Ru)},$u.updateArrayLength_=function(Ru,Lu){Ru!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Lu,this.legacyMode_&&Lu>0&&reserveArrayBuffer(Ru+Lu+1)},$u.spliceWithArray_=function(Ru,Lu,Ou){var Fu=this;this.atom_;var Nu=this.values_.length;if(Ru===void 0?Ru=0:Ru>Nu?Ru=Nu:Ru<0&&(Ru=Math.max(0,Nu+Ru)),arguments.length===1?Lu=Nu-Ru:Lu==null?Lu=0:Lu=Math.max(0,Math.min(Lu,Nu-Ru)),Ou===void 0&&(Ou=EMPTY_ARRAY),hasInterceptors(this)){var Vu=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Ru,removedCount:Lu,added:Ou});if(!Vu)return EMPTY_ARRAY;Lu=Vu.removedCount,Ou=Vu.added}if(Ou=Ou.length===0?Ou:Ou.map(function(zu){return Fu.enhancer_(zu,void 0)}),this.legacyMode_){var Uu=Ou.length-Lu;this.updateArrayLength_(Nu,Uu)}var Gu=this.spliceItemsIntoValues_(Ru,Lu,Ou);return(Lu!==0||Ou.length!==0)&&this.notifyArraySplice_(Ru,Ou,Gu),this.dehanceValues_(Gu)},$u.spliceItemsIntoValues_=function(Ru,Lu,Ou){if(Ou.length<MAX_SPLICE_SIZE){var Fu;return(Fu=this.values_).splice.apply(Fu,[Ru,Lu].concat(Ou))}else{var Nu=this.values_.slice(Ru,Ru+Lu),Vu=this.values_.slice(Ru+Lu);this.values_.length+=Ou.length-Lu;for(var Uu=0;Uu<Ou.length;Uu++)this.values_[Ru+Uu]=Ou[Uu];for(var Gu=0;Gu<Vu.length;Gu++)this.values_[Ru+Ou.length+Gu]=Vu[Gu];return Nu}},$u.notifyArrayChildUpdate_=function(Ru,Lu,Ou){var Fu=!this.owned_&&isSpyEnabled(),Nu=hasListeners(this),Vu=Nu||Fu?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Ru,newValue:Lu,oldValue:Ou}:null;this.atom_.reportChanged(),Nu&&notifyListeners(this,Vu)},$u.notifyArraySplice_=function(Ru,Lu,Ou){var Fu=!this.owned_&&isSpyEnabled(),Nu=hasListeners(this),Vu=Nu||Fu?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Ru,removed:Ou,added:Lu,removedCount:Ou.length,addedCount:Lu.length}:null;this.atom_.reportChanged(),Nu&&notifyListeners(this,Vu)},$u.get_=function(Ru){if(Ru<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Ru]);console.warn("[mobx.array] Attempt to read an array index ("+Ru+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},$u.set_=function(Ru,Lu){var Ou=this.values_;if(Ru<Ou.length){this.atom_;var Fu=Ou[Ru];if(hasInterceptors(this)){var Nu=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Ru,newValue:Lu});if(!Nu)return;Lu=Nu.newValue}Lu=this.enhancer_(Lu,Fu);var Vu=Lu!==Fu;Vu&&(Ou[Ru]=Lu,this.notifyArrayChildUpdate_(Ru,Lu,Fu))}else Ru===Ou.length?this.spliceWithArray_(Ru,0,[Lu]):die(17,Ru,Ou.length)},_u}();function createObservableArray(_u,$u,Bu,Ru){Bu===void 0&&(Bu="ObservableArray"),Ru===void 0&&(Ru=!1),assertProxies();var Lu=new ObservableArrayAdministration(Bu,$u,Ru,!1);addHiddenFinalProp(Lu.values_,$mobx,Lu);var Ou=new Proxy(Lu.values_,arrayTraps);if(Lu.proxy_=Ou,_u&&_u.length){var Fu=allowStateChangesStart(!0);Lu.spliceWithArray_(0,0,_u),allowStateChangesEnd(Fu)}return Ou}var arrayExtensions={clear:function _u(){return this.splice(0)},replace:function _u($u){var Bu=this[$mobx];return Bu.spliceWithArray_(0,Bu.values_.length,$u)},toJSON:function _u(){return this.slice()},splice:function _u($u,Bu){for(var Ru=arguments.length,Lu=new Array(Ru>2?Ru-2:0),Ou=2;Ou<Ru;Ou++)Lu[Ou-2]=arguments[Ou];var Fu=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Fu.spliceWithArray_($u);case 2:return Fu.spliceWithArray_($u,Bu)}return Fu.spliceWithArray_($u,Bu,Lu)},spliceWithArray:function _u($u,Bu,Ru){return this[$mobx].spliceWithArray_($u,Bu,Ru)},push:function _u(){for(var $u=this[$mobx],Bu=arguments.length,Ru=new Array(Bu),Lu=0;Lu<Bu;Lu++)Ru[Lu]=arguments[Lu];return $u.spliceWithArray_($u.values_.length,0,Ru),$u.values_.length},pop:function _u(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function _u(){return this.splice(0,1)[0]},unshift:function _u(){for(var $u=this[$mobx],Bu=arguments.length,Ru=new Array(Bu),Lu=0;Lu<Bu;Lu++)Ru[Lu]=arguments[Lu];return $u.spliceWithArray_(0,0,Ru),$u.values_.length},reverse:function _u(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function _u(){globalState.trackingDerivation&&die(37,"sort");var $u=this.slice();return $u.sort.apply($u,arguments),this.replace($u),this},remove:function _u($u){var Bu=this[$mobx],Ru=Bu.dehanceValues_(Bu.values_).indexOf($u);return Ru>-1?(this.splice(Ru,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(_u,$u){typeof Array.prototype[_u]=="function"&&(arrayExtensions[_u]=$u(_u))}function simpleFunc(_u){return function(){var $u=this[$mobx];$u.atom_.reportObserved();var Bu=$u.dehanceValues_($u.values_);return Bu[_u].apply(Bu,arguments)}}function mapLikeFunc(_u){return function($u,Bu){var Ru=this,Lu=this[$mobx];Lu.atom_.reportObserved();var Ou=Lu.dehanceValues_(Lu.values_);return Ou[_u](function(Fu,Nu){return $u.call(Bu,Fu,Nu,Ru)})}}function reduceLikeFunc(_u){return function(){var $u=this,Bu=this[$mobx];Bu.atom_.reportObserved();var Ru=Bu.dehanceValues_(Bu.values_),Lu=arguments[0];return arguments[0]=function(Ou,Fu,Nu){return Lu(Ou,Fu,Nu,$u)},Ru[_u].apply(Ru,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(_u){return isObject(_u)&&isObservableArrayAdministration(_u[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(){function _u(Bu,Ru,Lu){var Ou=this;Ru===void 0&&(Ru=deepEnhancer),Lu===void 0&&(Lu="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Ru,this.name_=Lu,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,allowStateChanges(!0,function(){Ou.merge(Bu)})}var $u=_u.prototype;return $u.has_=function(Ru){return this.data_.has(Ru)},$u.has=function(Ru){var Lu=this;if(!globalState.trackingDerivation)return this.has_(Ru);var Ou=this.hasMap_.get(Ru);if(!Ou){var Fu=Ou=new ObservableValue(this.has_(Ru),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Ru,Fu),onBecomeUnobserved(Fu,function(){return Lu.hasMap_.delete(Ru)})}return Ou.get()},$u.set=function(Ru,Lu){var Ou=this.has_(Ru);if(hasInterceptors(this)){var Fu=interceptChange(this,{type:Ou?UPDATE:ADD,object:this,newValue:Lu,name:Ru});if(!Fu)return this;Lu=Fu.newValue}return Ou?this.updateValue_(Ru,Lu):this.addValue_(Ru,Lu),this},$u.delete=function(Ru){var Lu=this;if(this.keysAtom_,hasInterceptors(this)){var Ou=interceptChange(this,{type:DELETE,object:this,name:Ru});if(!Ou)return!1}if(this.has_(Ru)){var Fu=isSpyEnabled(),Nu=hasListeners(this),Vu=Nu||Fu?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Ru).value_,name:Ru}:null;return transaction(function(){var Uu;Lu.keysAtom_.reportChanged(),(Uu=Lu.hasMap_.get(Ru))==null||Uu.setNewValue_(!1);var Gu=Lu.data_.get(Ru);Gu.setNewValue_(void 0),Lu.data_.delete(Ru)}),Nu&&notifyListeners(this,Vu),!0}return!1},$u.updateValue_=function(Ru,Lu){var Ou=this.data_.get(Ru);if(Lu=Ou.prepareNewValue_(Lu),Lu!==globalState.UNCHANGED){var Fu=isSpyEnabled(),Nu=hasListeners(this),Vu=Nu||Fu?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Ou.value_,name:Ru,newValue:Lu}:null;Ou.setNewValue_(Lu),Nu&&notifyListeners(this,Vu)}},$u.addValue_=function(Ru,Lu){var Ou=this;this.keysAtom_,transaction(function(){var Uu,Gu=new ObservableValue(Lu,Ou.enhancer_,"ObservableMap.key",!1);Ou.data_.set(Ru,Gu),Lu=Gu.value_,(Uu=Ou.hasMap_.get(Ru))==null||Uu.setNewValue_(!0),Ou.keysAtom_.reportChanged()});var Fu=isSpyEnabled(),Nu=hasListeners(this),Vu=Nu||Fu?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Ru,newValue:Lu}:null;Nu&&notifyListeners(this,Vu)},$u.get=function(Ru){return this.has(Ru)?this.dehanceValue_(this.data_.get(Ru).get()):this.dehanceValue_(void 0)},$u.dehanceValue_=function(Ru){return this.dehancer!==void 0?this.dehancer(Ru):Ru},$u.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},$u.values=function(){var Ru=this,Lu=this.keys();return makeIterable({next:function(){var Fu=Lu.next(),Nu=Fu.done,Vu=Fu.value;return{done:Nu,value:Nu?void 0:Ru.get(Vu)}}})},$u.entries=function(){var Ru=this,Lu=this.keys();return makeIterable({next:function(){var Fu=Lu.next(),Nu=Fu.done,Vu=Fu.value;return{done:Nu,value:Nu?void 0:[Vu,Ru.get(Vu)]}}})},$u[_Symbol$iterator]=function(){return this.entries()},$u.forEach=function(Ru,Lu){for(var Ou=_createForOfIteratorHelperLoose(this),Fu;!(Fu=Ou()).done;){var Nu=Fu.value,Vu=Nu[0],Uu=Nu[1];Ru.call(Lu,Uu,Vu,this)}},$u.merge=function(Ru){var Lu=this;return isObservableMap(Ru)&&(Ru=new Map(Ru)),transaction(function(){isPlainObject(Ru)?getPlainObjectKeys(Ru).forEach(function(Ou){return Lu.set(Ou,Ru[Ou])}):Array.isArray(Ru)?Ru.forEach(function(Ou){var Fu=Ou[0],Nu=Ou[1];return Lu.set(Fu,Nu)}):isES6Map(Ru)?(Ru.constructor!==Map&&die(19,Ru),Ru.forEach(function(Ou,Fu){return Lu.set(Fu,Ou)})):Ru!=null&&die(20,Ru)}),this},$u.clear=function(){var Ru=this;transaction(function(){untracked(function(){for(var Lu=_createForOfIteratorHelperLoose(Ru.keys()),Ou;!(Ou=Lu()).done;){var Fu=Ou.value;Ru.delete(Fu)}})})},$u.replace=function(Ru){var Lu=this;return transaction(function(){for(var Ou=convertToMap(Ru),Fu=new Map,Nu=!1,Vu=_createForOfIteratorHelperLoose(Lu.data_.keys()),Uu;!(Uu=Vu()).done;){var Gu=Uu.value;if(!Ou.has(Gu)){var zu=Lu.delete(Gu);if(zu)Nu=!0;else{var Hu=Lu.data_.get(Gu);Fu.set(Gu,Hu)}}}for(var ju=_createForOfIteratorHelperLoose(Ou.entries()),Qu;!(Qu=ju()).done;){var Xu=Qu.value,Ku=Xu[0],Wu=Xu[1],qu=Lu.data_.has(Ku);if(Lu.set(Ku,Wu),Lu.data_.has(Ku)){var Yu=Lu.data_.get(Ku);Fu.set(Ku,Yu),qu||(Nu=!0)}}if(!Nu)if(Lu.data_.size!==Fu.size)Lu.keysAtom_.reportChanged();else for(var Zu=Lu.data_.keys(),_h=Fu.keys(),ep=Zu.next(),ip=_h.next();!ep.done;){if(ep.value!==ip.value){Lu.keysAtom_.reportChanged();break}ep=Zu.next(),ip=_h.next()}Lu.data_=Fu}),this},$u.toString=function(){return"[object ObservableMap]"},$u.toJSON=function(){return Array.from(this)},$u.observe_=function(Ru,Lu){return registerListener(this,Ru)},$u.intercept_=function(Ru){return registerInterceptor(this,Ru)},_createClass(_u,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag,get:function(){return"Map"}}]),_u}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(_u){if(isES6Map(_u)||isObservableMap(_u))return _u;if(Array.isArray(_u))return new Map(_u);if(isPlainObject(_u)){var $u=new Map;for(var Bu in _u)$u.set(Bu,_u[Bu]);return $u}else return die(21,_u)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(){function _u(Bu,Ru,Lu){Ru===void 0&&(Ru=deepEnhancer),Lu===void 0&&(Lu="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Lu,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Ou,Fu){return Ru(Ou,Fu,Lu)},Bu&&this.replace(Bu)}var $u=_u.prototype;return $u.dehanceValue_=function(Ru){return this.dehancer!==void 0?this.dehancer(Ru):Ru},$u.clear=function(){var Ru=this;transaction(function(){untracked(function(){for(var Lu=_createForOfIteratorHelperLoose(Ru.data_.values()),Ou;!(Ou=Lu()).done;){var Fu=Ou.value;Ru.delete(Fu)}})})},$u.forEach=function(Ru,Lu){for(var Ou=_createForOfIteratorHelperLoose(this),Fu;!(Fu=Ou()).done;){var Nu=Fu.value;Ru.call(Lu,Nu,Nu,this)}},$u.add=function(Ru){var Lu=this;if(this.atom_,hasInterceptors(this)){var Ou=interceptChange(this,{type:ADD,object:this,newValue:Ru});if(!Ou)return this}if(!this.has(Ru)){transaction(function(){Lu.data_.add(Lu.enhancer_(Ru,void 0)),Lu.atom_.reportChanged()});var Fu=!1,Nu=hasListeners(this),Vu=Nu||Fu?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Ru}:null;Nu&&notifyListeners(this,Vu)}return this},$u.delete=function(Ru){var Lu=this;if(hasInterceptors(this)){var Ou=interceptChange(this,{type:DELETE,object:this,oldValue:Ru});if(!Ou)return!1}if(this.has(Ru)){var Fu=!1,Nu=hasListeners(this),Vu=Nu||Fu?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Ru}:null;return transaction(function(){Lu.atom_.reportChanged(),Lu.data_.delete(Ru)}),Nu&&notifyListeners(this,Vu),!0}return!1},$u.has=function(Ru){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Ru))},$u.entries=function(){var Ru=0,Lu=Array.from(this.keys()),Ou=Array.from(this.values());return makeIterable({next:function(){var Nu=Ru;return Ru+=1,Nu<Ou.length?{value:[Lu[Nu],Ou[Nu]],done:!1}:{done:!0}}})},$u.keys=function(){return this.values()},$u.values=function(){this.atom_.reportObserved();var Ru=this,Lu=0,Ou=Array.from(this.data_.values());return makeIterable({next:function(){return Lu<Ou.length?{value:Ru.dehanceValue_(Ou[Lu++]),done:!1}:{done:!0}}})},$u.replace=function(Ru){var Lu=this;return isObservableSet(Ru)&&(Ru=new Set(Ru)),transaction(function(){Array.isArray(Ru)?(Lu.clear(),Ru.forEach(function(Ou){return Lu.add(Ou)})):isES6Set(Ru)?(Lu.clear(),Ru.forEach(function(Ou){return Lu.add(Ou)})):Ru!=null&&die("Cannot initialize set from "+Ru)}),this},$u.observe_=function(Ru,Lu){return registerListener(this,Ru)},$u.intercept_=function(Ru){return registerInterceptor(this,Ru)},$u.toJSON=function(){return Array.from(this)},$u.toString=function(){return"[object ObservableSet]"},$u[_Symbol$iterator$1]=function(){return this.values()},_createClass(_u,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag$1,get:function(){return"Set"}}]),_u}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function _u(Bu,Ru,Lu,Ou){Ru===void 0&&(Ru=new Map),Ou===void 0&&(Ou=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=Bu,this.values_=Ru,this.name_=Lu,this.defaultAnnotation_=Ou,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var $u=_u.prototype;return $u.getObservablePropValue_=function(Ru){return this.values_.get(Ru).get()},$u.setObservablePropValue_=function(Ru,Lu){var Ou=this.values_.get(Ru);if(Ou instanceof ComputedValue)return Ou.set(Lu),!0;if(hasInterceptors(this)){var Fu=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Ru,newValue:Lu});if(!Fu)return null;Lu=Fu.newValue}if(Lu=Ou.prepareNewValue_(Lu),Lu!==globalState.UNCHANGED){var Nu=hasListeners(this),Vu=!1,Uu=Nu||Vu?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Ou.value_,name:Ru,newValue:Lu}:null;Ou.setNewValue_(Lu),Nu&&notifyListeners(this,Uu)}return!0},$u.get_=function(Ru){return globalState.trackingDerivation&&!hasProp(this.target_,Ru)&&this.has_(Ru),this.target_[Ru]},$u.set_=function(Ru,Lu,Ou){return Ou===void 0&&(Ou=!1),hasProp(this.target_,Ru)?this.values_.has(Ru)?this.setObservablePropValue_(Ru,Lu):Ou?Reflect.set(this.target_,Ru,Lu):(this.target_[Ru]=Lu,!0):this.extend_(Ru,{value:Lu,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Ou)},$u.has_=function(Ru){if(!globalState.trackingDerivation)return Ru in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Lu=this.pendingKeys_.get(Ru);return Lu||(Lu=new ObservableValue(Ru in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Ru,Lu)),Lu.get()},$u.make_=function(Ru,Lu){if(Lu===!0&&(Lu=this.defaultAnnotation_),Lu!==!1){if(!(Ru in this.target_)){var Ou;if((Ou=this.target_[storedAnnotationsSymbol])!=null&&Ou[Ru])return;die(1,Lu.annotationType_,this.name_+"."+Ru.toString())}for(var Fu=this.target_;Fu&&Fu!==objectPrototype;){var Nu=getDescriptor(Fu,Ru);if(Nu){var Vu=Lu.make_(this,Ru,Nu,Fu);if(Vu===0)return;if(Vu===1)break}Fu=Object.getPrototypeOf(Fu)}recordAnnotationApplied(this,Lu,Ru)}},$u.extend_=function(Ru,Lu,Ou,Fu){if(Fu===void 0&&(Fu=!1),Ou===!0&&(Ou=this.defaultAnnotation_),Ou===!1)return this.defineProperty_(Ru,Lu,Fu);var Nu=Ou.extend_(this,Ru,Lu,Fu);return Nu&&recordAnnotationApplied(this,Ou,Ru),Nu},$u.defineProperty_=function(Ru,Lu,Ou){Ou===void 0&&(Ou=!1);try{startBatch();var Fu=this.delete_(Ru);if(!Fu)return Fu;if(hasInterceptors(this)){var Nu=interceptChange(this,{object:this.proxy_||this.target_,name:Ru,type:ADD,newValue:Lu.value});if(!Nu)return null;var Vu=Nu.newValue;Lu.value!==Vu&&(Lu=_extends({},Lu,{value:Vu}))}if(Ou){if(!Reflect.defineProperty(this.target_,Ru,Lu))return!1}else defineProperty(this.target_,Ru,Lu);this.notifyPropertyAddition_(Ru,Lu.value)}finally{endBatch()}return!0},$u.defineObservableProperty_=function(Ru,Lu,Ou,Fu){Fu===void 0&&(Fu=!1);try{startBatch();var Nu=this.delete_(Ru);if(!Nu)return Nu;if(hasInterceptors(this)){var Vu=interceptChange(this,{object:this.proxy_||this.target_,name:Ru,type:ADD,newValue:Lu});if(!Vu)return null;Lu=Vu.newValue}var Uu=getCachedObservablePropDescriptor(Ru),Gu={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Uu.get,set:Uu.set};if(Fu){if(!Reflect.defineProperty(this.target_,Ru,Gu))return!1}else defineProperty(this.target_,Ru,Gu);var zu=new ObservableValue(Lu,Ou,"ObservableObject.key",!1);this.values_.set(Ru,zu),this.notifyPropertyAddition_(Ru,zu.value_)}finally{endBatch()}return!0},$u.defineComputedProperty_=function(Ru,Lu,Ou){Ou===void 0&&(Ou=!1);try{startBatch();var Fu=this.delete_(Ru);if(!Fu)return Fu;if(hasInterceptors(this)){var Nu=interceptChange(this,{object:this.proxy_||this.target_,name:Ru,type:ADD,newValue:void 0});if(!Nu)return null}Lu.name||(Lu.name="ObservableObject.key"),Lu.context=this.proxy_||this.target_;var Vu=getCachedObservablePropDescriptor(Ru),Uu={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Vu.get,set:Vu.set};if(Ou){if(!Reflect.defineProperty(this.target_,Ru,Uu))return!1}else defineProperty(this.target_,Ru,Uu);this.values_.set(Ru,new ComputedValue(Lu)),this.notifyPropertyAddition_(Ru,void 0)}finally{endBatch()}return!0},$u.delete_=function(Ru,Lu){if(Lu===void 0&&(Lu=!1),!hasProp(this.target_,Ru))return!0;if(hasInterceptors(this)){var Ou=interceptChange(this,{object:this.proxy_||this.target_,name:Ru,type:REMOVE});if(!Ou)return null}try{var Fu,Nu;startBatch();var Vu=hasListeners(this),Uu=!1,Gu=this.values_.get(Ru),zu=void 0;if(!Gu&&(Vu||Uu)){var Hu;zu=(Hu=getDescriptor(this.target_,Ru))==null?void 0:Hu.value}if(Lu){if(!Reflect.deleteProperty(this.target_,Ru))return!1}else delete this.target_[Ru];if(Gu&&(this.values_.delete(Ru),Gu instanceof ObservableValue&&(zu=Gu.value_),propagateChanged(Gu)),this.keysAtom_.reportChanged(),(Fu=this.pendingKeys_)==null||(Nu=Fu.get(Ru))==null||Nu.set(Ru in this.target_),Vu||Uu){var ju={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:zu,name:Ru};Vu&&notifyListeners(this,ju)}}finally{endBatch()}return!0},$u.observe_=function(Ru,Lu){return registerListener(this,Ru)},$u.intercept_=function(Ru){return registerInterceptor(this,Ru)},$u.notifyPropertyAddition_=function(Ru,Lu){var Ou,Fu,Nu=hasListeners(this),Vu=!1;if(Nu||Vu){var Uu=Nu||Vu?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Ru,newValue:Lu}:null;Nu&&notifyListeners(this,Uu)}(Ou=this.pendingKeys_)==null||(Fu=Ou.get(Ru))==null||Fu.set(!0),this.keysAtom_.reportChanged()},$u.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},$u.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},_u}();function asObservableObject(_u,$u){var Bu;if(hasProp(_u,$mobx))return _u;var Ru=(Bu=$u==null?void 0:$u.name)!=null?Bu:"ObservableObject",Lu=new ObservableObjectAdministration(_u,new Map,String(Ru),getAnnotationFromOptions($u));return addHiddenProp(_u,$mobx,Lu),_u}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(_u){return descriptorCache[_u]||(descriptorCache[_u]={get:function(){return this[$mobx].getObservablePropValue_(_u)},set:function(Bu){return this[$mobx].setObservablePropValue_(_u,Bu)}})}function isObservableObject(_u){return isObject(_u)?isObservableObjectAdministration(_u[$mobx]):!1}function recordAnnotationApplied(_u,$u,Bu){var Ru;(Ru=_u.target_[storedAnnotationsSymbol])==null||delete Ru[Bu]}var ENTRY_0=createArrayEntryDescriptor(0),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function _u(){};function inherit(_u,$u){Object.setPrototypeOf?Object.setPrototypeOf(_u.prototype,$u):_u.prototype.__proto__!==void 0?_u.prototype.__proto__=$u:_u.prototype=$u}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(_u,$u,Bu){_inheritsLoose(Ru,_u);function Ru(Ou,Fu,Nu,Vu){var Uu;Nu===void 0&&(Nu="ObservableArray"),Vu===void 0&&(Vu=!1),Uu=_u.call(this)||this;var Gu=new ObservableArrayAdministration(Nu,Fu,Vu,!0);if(Gu.proxy_=_assertThisInitialized(Uu),addHiddenFinalProp(_assertThisInitialized(Uu),$mobx,Gu),Ou&&Ou.length){var zu=allowStateChangesStart(!0);Uu.spliceWithArray(0,0,Ou),allowStateChangesEnd(zu)}return Object.defineProperty(_assertThisInitialized(Uu),"0",ENTRY_0),Uu}var Lu=Ru.prototype;return Lu.concat=function(){this[$mobx].atom_.reportObserved();for(var Fu=arguments.length,Nu=new Array(Fu),Vu=0;Vu<Fu;Vu++)Nu[Vu]=arguments[Vu];return Array.prototype.concat.apply(this.slice(),Nu.map(function(Uu){return isObservableArray(Uu)?Uu.slice():Uu}))},Lu[Bu]=function(){var Ou=this,Fu=0;return makeIterable({next:function(){return Fu<Ou.length?{value:Ou[Fu++],done:!1}:{done:!0,value:void 0}}})},_createClass(Ru,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Fu){this[$mobx].setArrayLength_(Fu)}},{key:$u,get:function(){return"Array"}}]),Ru}(StubArray,Symbol.toStringTag,Symbol.iterator);Object.entries(arrayExtensions).forEach(function(_u){var $u=_u[0],Bu=_u[1];$u!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,$u,Bu)});function createArrayEntryDescriptor(_u){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(_u)},set:function(Bu){this[$mobx].set_(_u,Bu)}}}function createArrayBufferItem(_u){defineProperty(LegacyObservableArray.prototype,""+_u,createArrayEntryDescriptor(_u))}function reserveArrayBuffer(_u){if(_u>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var $u=OBSERVABLE_ARRAY_BUFFER_SIZE;$u<_u+100;$u++)createArrayBufferItem($u);OBSERVABLE_ARRAY_BUFFER_SIZE=_u}}reserveArrayBuffer(1e3);function createLegacyArray(_u,$u,Bu){return new LegacyObservableArray(_u,$u,Bu)}function getAtom(_u,$u){if(typeof _u=="object"&&_u!==null){if(isObservableArray(_u))return $u!==void 0&&die(23),_u[$mobx].atom_;if(isObservableSet(_u))return _u[$mobx];if(isObservableMap(_u)){if($u===void 0)return _u.keysAtom_;var Bu=_u.data_.get($u)||_u.hasMap_.get($u);return Bu||die(25,$u,getDebugName(_u)),Bu}if(isObservableObject(_u)){if(!$u)return die(26);var Ru=_u[$mobx].values_.get($u);return Ru||die(27,$u,getDebugName(_u)),Ru}if(isAtom(_u)||isComputedValue(_u)||isReaction(_u))return _u}else if(isFunction(_u)&&isReaction(_u[$mobx]))return _u[$mobx];die(28)}function getAdministration(_u,$u){if(_u||die(29),$u!==void 0)return getAdministration(getAtom(_u,$u));if(isAtom(_u)||isComputedValue(_u)||isReaction(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(_u[$mobx])return _u[$mobx];die(24,_u)}function getDebugName(_u,$u){var Bu;if($u!==void 0)Bu=getAtom(_u,$u);else{if(isAction(_u))return _u.name;isObservableObject(_u)||isObservableMap(_u)||isObservableSet(_u)?Bu=getAdministration(_u):Bu=getAtom(_u)}return Bu.name_}var toString=objectPrototype.toString;function deepEqual(_u,$u,Bu){return Bu===void 0&&(Bu=-1),eq(_u,$u,Bu)}function eq(_u,$u,Bu,Ru,Lu){if(_u===$u)return _u!==0||1/_u===1/$u;if(_u==null||$u==null)return!1;if(_u!==_u)return $u!==$u;var Ou=typeof _u;if(Ou!=="function"&&Ou!=="object"&&typeof $u!="object")return!1;var Fu=toString.call(_u);if(Fu!==toString.call($u))return!1;switch(Fu){case"[object RegExp]":case"[object String]":return""+_u==""+$u;case"[object Number]":return+_u!=+_u?+$u!=+$u:+_u==0?1/+_u===1/$u:+_u==+$u;case"[object Date]":case"[object Boolean]":return+_u==+$u;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(_u)===Symbol.valueOf.call($u);case"[object Map]":case"[object Set]":Bu>=0&&Bu++;break}_u=unwrap(_u),$u=unwrap($u);var Nu=Fu==="[object Array]";if(!Nu){if(typeof _u!="object"||typeof $u!="object")return!1;var Vu=_u.constructor,Uu=$u.constructor;if(Vu!==Uu&&!(isFunction(Vu)&&Vu instanceof Vu&&isFunction(Uu)&&Uu instanceof Uu)&&"constructor"in _u&&"constructor"in $u)return!1}if(Bu===0)return!1;Bu<0&&(Bu=-1),Ru=Ru||[],Lu=Lu||[];for(var Gu=Ru.length;Gu--;)if(Ru[Gu]===_u)return Lu[Gu]===$u;if(Ru.push(_u),Lu.push($u),Nu){if(Gu=_u.length,Gu!==$u.length)return!1;for(;Gu--;)if(!eq(_u[Gu],$u[Gu],Bu-1,Ru,Lu))return!1}else{var zu=Object.keys(_u),Hu;if(Gu=zu.length,Object.keys($u).length!==Gu)return!1;for(;Gu--;)if(Hu=zu[Gu],!(hasProp($u,Hu)&&eq(_u[Hu],$u[Hu],Bu-1,Ru,Lu)))return!1}return Ru.pop(),Lu.pop(),!0}function unwrap(_u){return isObservableArray(_u)?_u.slice():isES6Map(_u)||isObservableMap(_u)||isES6Set(_u)||isObservableSet(_u)?Array.from(_u.entries()):_u}function makeIterable(_u){return _u[Symbol.iterator]=getSelf,_u}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(_u){var $u=getGlobal();typeof $u[_u]=="undefined"&&die("MobX requires global '"+_u+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(_u){_u()}function observerBatching(_u){_u||(_u=defaultNoopBatch),configure({reactionScheduler:_u})}function printDebugValue(_u){return getDependencyTree(_u)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(_u){var $u={reaction:_u,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return $u}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(_u){var $u=new Map,Bu=1,Ru=new _u(function(Ou){var Fu=$u.get(Ou);Fu&&(Fu.reaction.dispose(),$u.delete(Ou))});return{addReactionToTrack:function(Lu,Ou,Fu){var Nu=Bu++;return Ru.register(Fu,Nu,Lu),Lu.current=createTrackingData(Ou),Lu.current.finalizationRegistryCleanupToken=Nu,$u.set(Nu,Lu.current),Lu.current},recordReactionAsCommitted:function(Lu){Ru.unregister(Lu),Lu.current&&Lu.current.finalizationRegistryCleanupToken&&$u.delete(Lu.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(_u){var $u=typeof Symbol=="function"&&Symbol.iterator,Bu=$u&&_u[$u],Ru=0;if(Bu)return Bu.call(_u);if(_u&&typeof _u.length=="number")return{next:function(){return _u&&Ru>=_u.length&&(_u=void 0),{value:_u&&_u[Ru++],done:!_u}}};throw new TypeError($u?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var _u=new Set,$u;function Bu(){$u&&(clearTimeout($u),Nu())}function Ru(){var Vu,Uu;if(_u.size>0){try{for(var Gu=__values(_u),zu=Gu.next();!zu.done;zu=Gu.next()){var Hu=zu.value,ju=Hu.current;ju&&(ju.reaction.dispose(),Hu.current=null)}}catch(Qu){Vu={error:Qu}}finally{try{zu&&!zu.done&&(Uu=Gu.return)&&Uu.call(Gu)}finally{if(Vu)throw Vu.error}}_u.clear()}$u&&(clearTimeout($u),$u=void 0)}function Lu(){$u===void 0&&($u=setTimeout(Nu,CLEANUP_TIMER_LOOP_MILLIS))}function Ou(Vu){_u.add(Vu),Lu()}function Fu(Vu){_u.delete(Vu)}function Nu(){$u=void 0;var Vu=Date.now();_u.forEach(function(Uu){var Gu=Uu.current;Gu&&Vu>=Gu.cleanAt&&(Gu.reaction.dispose(),Uu.current=null,_u.delete(Uu))}),_u.size>0&&Lu()}return{addReactionToTrack:function(Vu,Uu,Gu){return Vu.current=createTrackingData(Uu),Ou(Vu),Vu.current},recordReactionAsCommitted:Fu,forceCleanupTimerToRunNowForTests:Bu,resetCleanupScheduleForTests:Ru}}var _a$1=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a$1.addReactionToTrack,recordReactionAsCommitted=_a$1.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(_u,$u){var Bu=typeof Symbol=="function"&&_u[Symbol.iterator];if(!Bu)return _u;var Ru=Bu.call(_u),Lu,Ou=[],Fu;try{for(;($u===void 0||$u-- >0)&&!(Lu=Ru.next()).done;)Ou.push(Lu.value)}catch(Nu){Fu={error:Nu}}finally{try{Lu&&!Lu.done&&(Bu=Ru.return)&&Bu.call(Ru)}finally{if(Fu)throw Fu.error}}return Ou};function observerComponentNameFor(_u){return"observer".concat(_u)}var ObjectToBeRetainedByReact=function(){function _u(){}return _u}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(_u,$u){$u===void 0&&($u="observed");var Bu=__read(React.useState(objectToBeRetainedByReactFactory),1),Ru=Bu[0],Lu=__read(React.useState(),2),Ou=Lu[1],Fu=function(){return Ou([])},Nu=React.useRef(null);if(!Nu.current)var Vu=new Reaction(observerComponentNameFor($u),function(){Uu.mounted?Fu():Uu.changedBeforeMount=!0}),Uu=addReactionToTrack(Nu,Vu,Ru);var Gu=Nu.current.reaction;React.useDebugValue(Gu,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Nu),Nu.current?(Nu.current.mounted=!0,Nu.current.changedBeforeMount&&(Nu.current.changedBeforeMount=!1,Fu())):(Nu.current={reaction:new Reaction(observerComponentNameFor($u),function(){Fu()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Fu()),function(){Nu.current.reaction.dispose(),Nu.current=null}},[]);var zu,Hu;if(Gu.track(function(){try{zu=_u()}catch(ju){Hu=ju}}),Hu)throw Hu;return zu}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(_u){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(_u){return null}).$$typeof;function observer$1(_u,$u){var Bu;if(ReactMemoSymbol&&_u.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Ru=(Bu=$u==null?void 0:$u.forwardRef)!==null&&Bu!==void 0?Bu:!1,Lu=_u,Ou=_u.displayName||_u.name;if(ReactForwardRefSymbol&&_u.$$typeof===ReactForwardRefSymbol&&(Ru=!0,Lu=_u.render,typeof Lu!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Fu=function(Nu,Vu){return useObserver(function(){return Lu(Nu,Vu)},Ou)};return Ou!==""&&(Fu.displayName=Ou),_u.contextTypes&&(Fu.contextTypes=_u.contextTypes),Ru&&(Fu=react$1.exports.forwardRef(Fu)),Fu=react$1.exports.memo(Fu),copyStaticProperties(_u,Fu),Fu}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(_u,$u){Object.keys(_u).forEach(function(Bu){hoistBlackList[Bu]||Object.defineProperty($u,Bu,Object.getOwnPropertyDescriptor(_u,Bu))})}globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol(_u){if(typeof Symbol=="function")return Symbol(_u);var $u="__$mobx-react "+_u+" ("+symbolId+")";return symbolId++,$u}var createdSymbols={};function newSymbol(_u){return createdSymbols[_u]||(createdSymbols[_u]=createSymbol(_u)),createdSymbols[_u]}function shallowEqual(_u,$u){if(is$1(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Bu=Object.keys(_u),Ru=Object.keys($u);if(Bu.length!==Ru.length)return!1;for(var Lu=0;Lu<Bu.length;Lu++)if(!Object.hasOwnProperty.call($u,Bu[Lu])||!is$1(_u[Bu[Lu]],$u[Bu[Lu]]))return!1;return!0}function is$1(_u,$u){return _u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}function setHiddenProp(_u,$u,Bu){Object.hasOwnProperty.call(_u,$u)?_u[$u]=Bu:Object.defineProperty(_u,$u,{enumerable:!1,configurable:!0,writable:!0,value:Bu})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(_u,$u){var Bu=_u[mobxMixins]=_u[mobxMixins]||{},Ru=Bu[$u]=Bu[$u]||{};return Ru.locks=Ru.locks||0,Ru.methods=Ru.methods||[],Ru}function wrapper(_u,$u){for(var Bu=this,Ru=arguments.length,Lu=new Array(Ru>2?Ru-2:0),Ou=2;Ou<Ru;Ou++)Lu[Ou-2]=arguments[Ou];$u.locks++;try{var Fu;return _u!=null&&(Fu=_u.apply(this,Lu)),Fu}finally{$u.locks--,$u.locks===0&&$u.methods.forEach(function(Nu){Nu.apply(Bu,Lu)})}}function wrapFunction(_u,$u){var Bu=function(){for(var Lu=arguments.length,Ou=new Array(Lu),Fu=0;Fu<Lu;Fu++)Ou[Fu]=arguments[Fu];wrapper.call.apply(wrapper,[this,_u,$u].concat(Ou))};return Bu}function patch(_u,$u,Bu){var Ru=getMixins(_u,$u);Ru.methods.indexOf(Bu)<0&&Ru.methods.push(Bu);var Lu=Object.getOwnPropertyDescriptor(_u,$u);if(!(Lu&&Lu[mobxPatchedDefinition])){var Ou=_u[$u],Fu=createDefinition(_u,$u,Lu?Lu.enumerable:void 0,Ru,Ou);Object.defineProperty(_u,$u,Fu)}}function createDefinition(_u,$u,Bu,Ru,Lu){var Ou,Fu=wrapFunction(Lu,Ru);return Ou={},Ou[mobxPatchedDefinition]=!0,Ou.get=function(){return Fu},Ou.set=function(Vu){if(this===_u)Fu=wrapFunction(Vu,Ru);else{var Uu=createDefinition(this,$u,Bu,Ru,Vu);Object.defineProperty(this,$u,Uu)}},Ou.configurable=!0,Ou.enumerable=Bu,Ou}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(_u){var $u=_u.prototype;if(_u[mobxObserverProperty]){var Bu=getDisplayName($u);console.warn("The provided component class ("+Bu+`)
                has already been declared as an observer component.`)}else _u[mobxObserverProperty]=!0;if($u.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(_u.__proto__!==react$1.exports.PureComponent){if(!$u.shouldComponentUpdate)$u.shouldComponentUpdate=observerSCU;else if($u.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp($u,"props"),makeObservableProp($u,"state"),_u.contextType&&makeObservableProp($u,"context");var Ru=$u.render;if(typeof Ru!="function"){var Lu=getDisplayName($u);throw new Error("[mobx-react] class component ("+Lu+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return $u.render=function(){return this.render=createReactiveRender.call(this,Ru),this.render()},patch($u,"componentDidMount",function(){this[mobxIsUnmounted]=!1,this.render[mobxAdminProperty]||react$1.exports.Component.prototype.forceUpdate.call(this)}),patch($u,"componentWillUnmount",function(){var Ou=this.render[mobxAdminProperty];if(Ou)Ou.dispose(),this.render[mobxAdminProperty]=null;else{var Fu=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Fu+`)
                was overridden after MobX attached. This may result in a memory leak if the
                overridden reactive render was not properly disposed.`)}this[mobxIsUnmounted]=!0}),_u}function getDisplayName(_u){return _u.displayName||_u.name||_u.constructor&&(_u.constructor.displayName||_u.constructor.name)||"<component>"}function createReactiveRender(_u){var $u=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var Bu=getDisplayName(this),Ru=_u.bind(this),Lu=!1,Ou=function(){var Vu=new Reaction(Bu+".render()",function(){if(!Lu&&(Lu=!0,$u[mobxIsUnmounted]!==!0)){var Uu=!0;try{setHiddenProp($u,isForcingUpdateKey,!0),$u[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call($u),Uu=!1}finally{setHiddenProp($u,isForcingUpdateKey,!1),Uu&&(Vu.dispose(),$u.render[mobxAdminProperty]=null)}}});return Vu.reactComponent=$u,Vu};function Fu(){var Nu;Lu=!1;var Vu=(Nu=Fu[mobxAdminProperty])!=null?Nu:Fu[mobxAdminProperty]=Ou(),Uu=void 0,Gu=void 0;if(Vu.track(function(){try{Gu=allowStateChanges(!1,Ru)}catch(zu){Uu=zu}}),Uu)throw Uu;return Gu}return Fu}function observerSCU(_u,$u){return this.state!==$u?!0:!shallowEqual(this.props,_u)}function makeObservableProp(_u,$u){var Bu=newSymbol("reactProp_"+$u+"_valueHolder"),Ru=newSymbol("reactProp_"+$u+"_atomHolder");function Lu(){return this[Ru]||setHiddenProp(this,Ru,createAtom("reactive "+$u)),this[Ru]}Object.defineProperty(_u,$u,{configurable:!0,enumerable:!0,get:function(){var Fu=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Fu=allowStateReadsStart(!0)),Lu.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Fu),this[Bu]},set:function(Fu){!this[isForcingUpdateKey]&&!shallowEqual(this[Bu],Fu)?(setHiddenProp(this,Bu,Fu),setHiddenProp(this,skipRenderKey,!0),Lu.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,Bu,Fu)}})}function observer(_u){return _u.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react$1.exports.Component,_u)||Object.prototype.isPrototypeOf.call(react$1.exports.PureComponent,_u)?makeClassComponentObserver(_u):observer$1(_u)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame=window.requestAnimationFrame||(_u=>setTimeout(_u,16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function nextFrame(_u,$u=0){$u<=0?_requestAnimationFrame(_u):_requestAnimationFrame(()=>nextFrame(_u,$u-1))}function requestAnimationFrameInterval(_u,$u=60){let Bu=-1,Ru=0,Lu=-1;const Ou=1e3/$u;function Fu(Nu){Lu===-1&&(Lu=Nu),Bu=_requestAnimationFrame(Fu),!(Nu-Ru<Ou)&&(Ru=Nu,_u&&_u(Nu-Lu))}return Bu=_requestAnimationFrame(Fu),function(){_cancelAnimationFrame(Bu)}}function setElementDataset(_u,$u){_u&&Object.keys($u).forEach(Bu=>{const Ru=$u[Bu].toString();_u instanceof Element?_u.setAttribute(`data-${Bu}`,Ru):_u instanceof Document?_u.documentElement.setAttribute(`data-${Bu}`,Ru):_u instanceof HTMLElement?_u.dataset[Bu]=Ru:_u.setAttribute(`data-${Bu}`,Ru)})}function getFileExpandedName(_u){if(!_u)return"";const $u=_u.lastIndexOf(".");return _u.substring($u+1).toLowerCase()}function getMediaType(_u){const $u=getFileExpandedName(_u);return getMediaTypeByExpandedName($u)}function getMediaTypeByExpandedName(_u){return _u?/jpg|jpeg|png$/.test(_u)?"image":/mp3|wav$/.test(_u)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(_u)?"video":"unknown":"unknown"}class Controller extends Subscribe{constructor({five:Bu,container:Ru,configs:Lu}){super();xm(this,"five");xm(this,"configs");xm(this,"videoAgentScene");xm(this,"vreoUnit");xm(this,"stopInterval");xm(this,"playing",!1);xm(this,"ended",!1);xm(this,"loading",!1);xm(this,"containerSize",{width:0,height:0});xm(this,"appSize");xm(this,"container");xm(this,"waveAppearance",null);xm(this,"appearance",{waveStyle:"wave"});xm(this,"avatar",{});xm(this,"visible",!1);xm(this,"popUp",null);xm(this,"drawerConfig",null);this.configs=Lu,this.container=Ru,this.five=Bu,this.appSize=Lu.appSize,this.appearance={...this.appearance,...Lu.appearance},makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,loading:observable,setLoading:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,waveAppearance:observable,avatar:observable,containerSize:observable,setContainerSize:action,appearance:observable,setAppearance:action,configs:observable.ref,setEnded:action,setAvatar:action}),reaction(()=>[this.appearance.waveStyle,this.loading],([Ou,Fu])=>{if(Fu===null){this.waveAppearance=null;return}if(Ou==="wave")switch(Fu){case!0:this.waveAppearance="double";break;case!1:this.waveAppearance="solid";break}else if(Ou==="solid")switch(Fu){case!0:this.waveAppearance="swap";break;case!1:this.waveAppearance="expand";break}},{fireImmediately:!0}),this.appSize?setElementDataset(this.container,{size:this.appSize}):reaction(()=>this.containerSize,Ou=>{if(!(Ou!=null&&Ou.width))return;const Fu=Ou.width,Nu=Ou.height,Vu=(()=>Fu<=500?"S":Fu<=1024?"M":Fu<=2048?"L":"XL")(),Uu=(()=>Nu>Fu?"portrait":"landscape")();setElementDataset(this.container,{size:Vu}),setElementDataset(this.container,{orientation:Uu})},{fireImmediately:!0}),reaction(()=>this.ended,Ou=>{Ou&&this.emit("paused",!0)}),reaction(()=>this.playing,Ou=>{this.ended||this.emit(Ou?"playing":"paused")})}get agentType(){var Ru,Lu;const Bu=getMediaType((Ru=this.videoAgentScene)==null?void 0:Ru.videoAgentMesh.videoUrl);return(Lu=this.avatar)!=null&&Lu.force?"avatar":Bu==="video"?"video":"none"}openPopUp(Bu){if(!Bu){this.popUp=null;return}this.popUp=Bu}setLoading(Bu){this.loading=Bu}setAvatar(Bu){this.avatar=Bu}setContainerSize(Bu,Ru){this.containerSize={width:Bu,height:Ru}}setVisible(Bu){this.visible=Bu}setPlaying(Bu){this.playing=Bu}setEnded(Bu){this.ended=Bu}setAppearance(Bu){this.appearance={...this.appearance,...Bu}}openDrawer(Bu){var Ru;if(!Bu){this.drawerConfig={content:"",height:(Ru=this.drawerConfig)==null?void 0:Ru.height};return}this.drawerConfig=Bu}get ready(){return!!this.videoAgentScene}get currentTime(){var Bu;return((Bu=this.videoAgentScene)==null?void 0:Bu.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Ru=>{if(Ru.parsed)return!1;const Lu=this.currentTime-Ru.start;return Lu<=100&&Lu>=0}):[]}get mediaInstance(){var Bu;return(Bu=this.videoAgentScene)==null?void 0:Bu.videoAgentMesh.mediaInstance}requestAnimationFrameLoop(Bu){var Lu,Ou,Fu,Nu;if((Lu=this.mediaInstance)!=null&&Lu.ended){this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause();return}if(!this.playing){(Ou=this.mediaInstance)!=null&&Ou.paused||(Fu=this.mediaInstance)==null||Fu.pause();return}((Nu=this.mediaInstance)==null?void 0:Nu.paused)&&this.playing&&this.mediaInstance.play(),this.currentKeyframes.forEach(Vu=>{Vu.parsed||(Vu.parsed=!0,this.emit(Vu.type,Vu),Bu&&Bu(Vu.type,Vu))})}run(Bu){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop(Bu)))}dispose(){this.setPlaying(!1),this.currentKeyframes&&this.currentKeyframes.forEach(Bu=>Bu.parsed=!1),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.currentTime=0),this.stopInterval&&(this.stopInterval(),this.stopInterval=void 0)}}const ControllerContext=react$1.exports.createContext(null);function useController(){const _u=React.useContext(ControllerContext);if(!_u)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return _u}function useFiveInstance(){const _u=useController();if(!_u.five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return _u.five}function useFiveProject2d(){const _u=useFiveInstance();return $u=>_u.project2d($u,!1)}var CameraMovementEffect=(_u=>(_u.Move="Move",_u.Rotate="Rotate",_u))(CameraMovementEffect||{}),Rotation=(_u=>(_u.Clockwise="Clockwise",_u.Anticlockwise="Anticlockwise",_u.Loop="Loop",_u))(Rotation||{}),Easing$1={Linear:{None:function(_u){return _u}},Quadratic:{In:function(_u){return _u*_u},Out:function(_u){return _u*(2-_u)},InOut:function(_u){return(_u*=2)<1?.5*_u*_u:-.5*(--_u*(_u-2)-1)}},Cubic:{In:function(_u){return _u*_u*_u},Out:function(_u){return--_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u:.5*((_u-=2)*_u*_u+2)}},Quartic:{In:function(_u){return _u*_u*_u*_u},Out:function(_u){return 1- --_u*_u*_u*_u},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u:-.5*((_u-=2)*_u*_u*_u-2)}},Quintic:{In:function(_u){return _u*_u*_u*_u*_u},Out:function(_u){return--_u*_u*_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u*_u:.5*((_u-=2)*_u*_u*_u*_u+2)}},Sinusoidal:{In:function(_u){return 1-Math.cos(_u*Math.PI/2)},Out:function(_u){return Math.sin(_u*Math.PI/2)},InOut:function(_u){return .5*(1-Math.cos(Math.PI*_u))}},Exponential:{In:function(_u){return _u===0?0:Math.pow(1024,_u-1)},Out:function(_u){return _u===1?1:1-Math.pow(2,-10*_u)},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2)<1?.5*Math.pow(1024,_u-1):.5*(-Math.pow(2,-10*(_u-1))+2)}},Circular:{In:function(_u){return 1-Math.sqrt(1-_u*_u)},Out:function(_u){return Math.sqrt(1- --_u*_u)},InOut:function(_u){return(_u*=2)<1?-.5*(Math.sqrt(1-_u*_u)-1):.5*(Math.sqrt(1-(_u-=2)*_u)+1)}},Elastic:{In:function(_u){return _u===0?0:_u===1?1:-Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)},Out:function(_u){return _u===0?0:_u===1?1:Math.pow(2,-10*_u)*Math.sin((_u-.1)*5*Math.PI)+1},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2,_u<1?-.5*Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI):.5*Math.pow(2,-10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)+1)}},Back:{In:function(_u){var $u=1.70158;return _u*_u*(($u+1)*_u-$u)},Out:function(_u){var $u=1.70158;return--_u*_u*(($u+1)*_u+$u)+1},InOut:function(_u){var $u=2.5949095;return(_u*=2)<1?.5*(_u*_u*(($u+1)*_u-$u)):.5*((_u-=2)*_u*(($u+1)*_u+$u)+2)}},Bounce:{In:function(_u){return 1-Easing$1.Bounce.Out(1-_u)},Out:function(_u){return _u<1/2.75?7.5625*_u*_u:_u<2/2.75?7.5625*(_u-=1.5/2.75)*_u+.75:_u<2.5/2.75?7.5625*(_u-=2.25/2.75)*_u+.9375:7.5625*(_u-=2.625/2.75)*_u+.984375},InOut:function(_u){return _u<.5?Easing$1.Bounce.In(_u*2)*.5:Easing$1.Bounce.Out(_u*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var _u=process.hrtime();return _u[0]*1e3+_u[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var $u=this;return Object.keys(this._tweens).map(function(Bu){return $u._tweens[Bu]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function($u){this._tweens[$u.getId()]=$u,this._tweensAddedDuringUpdate[$u.getId()]=$u},_u.prototype.remove=function($u){delete this._tweens[$u.getId()],delete this._tweensAddedDuringUpdate[$u.getId()]},_u.prototype.update=function($u,Bu){$u===void 0&&($u=now$1()),Bu===void 0&&(Bu=!1);var Ru=Object.keys(this._tweens);if(Ru.length===0)return!1;for(;Ru.length>0;){this._tweensAddedDuringUpdate={};for(var Lu=0;Lu<Ru.length;Lu++){var Ou=this._tweens[Ru[Lu]],Fu=!Bu;Ou&&Ou.update($u,Fu)===!1&&!Bu&&delete this._tweens[Ru[Lu]]}Ru=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),Interpolation={Linear:function(_u,$u){var Bu=_u.length-1,Ru=Bu*$u,Lu=Math.floor(Ru),Ou=Interpolation.Utils.Linear;return $u<0?Ou(_u[0],_u[1],Ru):$u>1?Ou(_u[Bu],_u[Bu-1],Bu-Ru):Ou(_u[Lu],_u[Lu+1>Bu?Bu:Lu+1],Ru-Lu)},Bezier:function(_u,$u){for(var Bu=0,Ru=_u.length-1,Lu=Math.pow,Ou=Interpolation.Utils.Bernstein,Fu=0;Fu<=Ru;Fu++)Bu+=Lu(1-$u,Ru-Fu)*Lu($u,Fu)*_u[Fu]*Ou(Ru,Fu);return Bu},CatmullRom:function(_u,$u){var Bu=_u.length-1,Ru=Bu*$u,Lu=Math.floor(Ru),Ou=Interpolation.Utils.CatmullRom;return _u[0]===_u[Bu]?($u<0&&(Lu=Math.floor(Ru=Bu*(1+$u))),Ou(_u[(Lu-1+Bu)%Bu],_u[Lu],_u[(Lu+1)%Bu],_u[(Lu+2)%Bu],Ru-Lu)):$u<0?_u[0]-(Ou(_u[0],_u[0],_u[1],_u[1],-Ru)-_u[0]):$u>1?_u[Bu]-(Ou(_u[Bu],_u[Bu],_u[Bu-1],_u[Bu-1],Ru-Bu)-_u[Bu]):Ou(_u[Lu?Lu-1:0],_u[Lu],_u[Bu<Lu+1?Bu:Lu+1],_u[Bu<Lu+2?Bu:Lu+2],Ru-Lu)},Utils:{Linear:function(_u,$u,Bu){return($u-_u)*Bu+_u},Bernstein:function(_u,$u){var Bu=Interpolation.Utils.Factorial;return Bu(_u)/Bu($u)/Bu(_u-$u)},Factorial:function(){var _u=[1];return function($u){var Bu=1;if(_u[$u])return _u[$u];for(var Ru=$u;Ru>1;Ru--)Bu*=Ru;return _u[$u]=Bu,Bu}}(),CatmullRom:function(_u,$u,Bu,Ru,Lu){var Ou=(Bu-_u)*.5,Fu=(Ru-$u)*.5,Nu=Lu*Lu,Vu=Lu*Nu;return(2*$u-2*Bu+Ou+Fu)*Vu+(-3*$u+3*Bu-2*Ou-Fu)*Nu+Ou*Lu+$u}}},Sequence=function(){function _u(){}return _u.nextId=function(){return _u._nextId++},_u._nextId=0,_u}(),mainGroup=new Group,Tween=function(){function _u($u,Bu){Bu===void 0&&(Bu=mainGroup),this._object=$u,this._group=Bu,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing$1.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return _u.prototype.getId=function(){return this._id},_u.prototype.isPlaying=function(){return this._isPlaying},_u.prototype.isPaused=function(){return this._isPaused},_u.prototype.to=function($u,Bu){return this._valuesEnd=Object.create($u),Bu!==void 0&&(this._duration=Bu),this},_u.prototype.duration=function($u){return this._duration=$u,this},_u.prototype.start=function($u){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Bu in this._valuesStartRepeat)this._swapEndStartRepeatValues(Bu),this._valuesStart[Bu]=this._valuesStartRepeat[Bu]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=$u!==void 0?typeof $u=="string"?now$1()+parseFloat($u):$u:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},_u.prototype._setupProperties=function($u,Bu,Ru,Lu){for(var Ou in Ru){var Fu=$u[Ou],Nu=Array.isArray(Fu),Vu=Nu?"array":typeof Fu,Uu=!Nu&&Array.isArray(Ru[Ou]);if(!(Vu==="undefined"||Vu==="function")){if(Uu){var Gu=Ru[Ou];if(Gu.length===0)continue;Gu=Gu.map(this._handleRelativeValue.bind(this,Fu)),Ru[Ou]=[Fu].concat(Gu)}if((Vu==="object"||Nu)&&Fu&&!Uu){Bu[Ou]=Nu?[]:{};for(var zu in Fu)Bu[Ou][zu]=Fu[zu];Lu[Ou]=Nu?[]:{},this._setupProperties(Fu,Bu[Ou],Ru[Ou],Lu[Ou])}else typeof Bu[Ou]=="undefined"&&(Bu[Ou]=Fu),Nu||(Bu[Ou]*=1),Uu?Lu[Ou]=Ru[Ou].slice().reverse():Lu[Ou]=Bu[Ou]||0}}},_u.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},_u.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},_u.prototype.pause=function($u){return $u===void 0&&($u=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=$u,this._group&&this._group.remove(this),this)},_u.prototype.resume=function($u){return $u===void 0&&($u=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=$u-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},_u.prototype.stopChainedTweens=function(){for(var $u=0,Bu=this._chainedTweens.length;$u<Bu;$u++)this._chainedTweens[$u].stop();return this},_u.prototype.group=function($u){return this._group=$u,this},_u.prototype.delay=function($u){return this._delayTime=$u,this},_u.prototype.repeat=function($u){return this._initialRepeat=$u,this._repeat=$u,this},_u.prototype.repeatDelay=function($u){return this._repeatDelayTime=$u,this},_u.prototype.yoyo=function($u){return this._yoyo=$u,this},_u.prototype.easing=function($u){return this._easingFunction=$u,this},_u.prototype.interpolation=function($u){return this._interpolationFunction=$u,this},_u.prototype.chain=function(){for(var $u=[],Bu=0;Bu<arguments.length;Bu++)$u[Bu]=arguments[Bu];return this._chainedTweens=$u,this},_u.prototype.onStart=function($u){return this._onStartCallback=$u,this},_u.prototype.onUpdate=function($u){return this._onUpdateCallback=$u,this},_u.prototype.onRepeat=function($u){return this._onRepeatCallback=$u,this},_u.prototype.onComplete=function($u){return this._onCompleteCallback=$u,this},_u.prototype.onStop=function($u){return this._onStopCallback=$u,this},_u.prototype.update=function($u,Bu){if($u===void 0&&($u=now$1()),Bu===void 0&&(Bu=!0),this._isPaused)return!0;var Ru,Lu,Ou=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if($u>Ou)return!1;Bu&&this.start($u)}if(this._goToEnd=!1,$u<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Lu=($u-this._startTime)/this._duration,Lu=this._duration===0||Lu>1?1:Lu;var Fu=this._easingFunction(Lu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Fu),this._onUpdateCallback&&this._onUpdateCallback(this._object,Lu),Lu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Ru in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Ru]=="string"&&(this._valuesStartRepeat[Ru]=this._valuesStartRepeat[Ru]+parseFloat(this._valuesEnd[Ru])),this._yoyo&&this._swapEndStartRepeatValues(Ru),this._valuesStart[Ru]=this._valuesStartRepeat[Ru];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=$u+this._repeatDelayTime:this._startTime=$u+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Nu=0,Vu=this._chainedTweens.length;Nu<Vu;Nu++)this._chainedTweens[Nu].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},_u.prototype._updateProperties=function($u,Bu,Ru,Lu){for(var Ou in Ru)if(Bu[Ou]!==void 0){var Fu=Bu[Ou]||0,Nu=Ru[Ou],Vu=Array.isArray($u[Ou]),Uu=Array.isArray(Nu),Gu=!Vu&&Uu;Gu?$u[Ou]=this._interpolationFunction(Nu,Lu):typeof Nu=="object"&&Nu?this._updateProperties($u[Ou],Fu,Nu,Lu):(Nu=this._handleRelativeValue(Fu,Nu),typeof Nu=="number"&&($u[Ou]=Fu+(Nu-Fu)*Lu))}},_u.prototype._handleRelativeValue=function($u,Bu){return typeof Bu!="string"?Bu:Bu.charAt(0)==="+"||Bu.charAt(0)==="-"?$u+parseFloat(Bu):parseFloat(Bu)},_u.prototype._swapEndStartRepeatValues=function($u){var Bu=this._valuesStartRepeat[$u],Ru=this._valuesEnd[$u];typeof Ru=="string"?this._valuesStartRepeat[$u]=this._valuesStartRepeat[$u]+parseFloat(Ru):this._valuesStartRepeat[$u]=this._valuesEnd[$u],this._valuesEnd[$u]=Bu},_u}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing:Easing$1,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update};const Easing=Easing$1;function tween(_u,$u,Bu,Ru=Easing.Linear.None){const Lu=new Tween(_u).to($u,Bu).easing(Ru);nextFrame(()=>Lu.start(0));const Ou=requestAnimationFrameInterval(Nu=>{Lu.update(Nu)===!1&&Ou()}),Fu=[];return Lu.onDestroy=Nu=>(Fu.push(Nu),Lu),Lu.destroy=function(){this.stop(),Object.assign(Lu,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let Nu;for(;Nu=Fu.shift();)Nu();Ou()},Lu}function tweenProgress$1(_u,$u){return tween({progress:0},{progress:1},_u,$u)}const PI$1=Math.PI,PI_2$1=PI$1*2;function formatLatitude(_u){return _u%PI_2$1}function formatLongitude(_u){return _u%PI_2$1}const getLongitudeParams=(_u,$u,Bu)=>{if(_u=formatLongitude(_u),$u=formatLongitude($u),Bu===Rotation.Anticlockwise&&_u>$u)$u+=PI_2$1;else if(Bu===Rotation.Clockwise&&$u>_u)_u+=PI_2$1;else{if(Bu!==Rotation.Anticlockwise&&Bu!==Rotation.Clockwise&&$u-_u>PI$1)return getLongitudeParams(_u,$u,Rotation.Clockwise);if(Bu!==Rotation.Anticlockwise&&Bu!==Rotation.Clockwise&&_u-$u>PI$1)return getLongitudeParams(_u,$u,Rotation.Anticlockwise)}return{from:_u,to:$u}};function progressNumber(_u,$u,Bu){return _u+($u-_u)*Bu}const CameraMovementPlugin=_u=>{const $u=(Lu,Ou,Fu={preload:!0})=>new Promise(async(Nu,Vu)=>{if(Fu.asyncStartCallback&&Fu.asyncStartCallback(),_u.panoIndex===void 0)return Vu(!1);if(Lu.mode&&Lu.mode!==_u.currentMode&&await new Promise(Gu=>{!Lu.mode||(_u.once("modeChange",zu=>{_u.once("initAnimationEnded",()=>{zu===Lu.mode&&Gu(!0)})}),_u.changeMode(Lu.mode,{fov:Lu.fov||void 0,latitude:Lu.latitude||void 0,longitude:Lu.longitude||void 0,panoIndex:Lu.panoIndex||void 0}))}),Lu.mode===Five.Mode.Floorplan||(Fu.preload&&Lu.panoIndex!==void 0&&Lu.panoIndex!==_u.panoIndex&&await _u.preloadPano(Lu.panoIndex),Fu.asyncEndCallback&&Fu.asyncEndCallback(),Lu.panoIndex===void 0&&Lu.fov===void 0&&Lu.latitude===void 0&&Lu.longitude===void 0))return Nu(!0);const Uu=Lu.panoIndex!==void 0?Lu.panoIndex:_u.panoIndex;if(Uu!==void 0){const Gu=Object.assign(Lu,{duration:Ou,moveEndCallback:()=>Nu(!0),moveCancelCallback:()=>{Nu(!0)}});await _u.moveToPano(Uu,Gu)}else Vu(!1)}),Bu=Lu=>{const Ou=_u.state,Fu=formatLatitude(Ou.latitude),Nu=formatLatitude(Lu.latitude),{from:Vu,to:Uu}=getLongitudeParams(Ou.longitude,Lu.longitude,Lu.rotation||Rotation.Loop),Gu=Ou.fov,zu=Lu.fov;return{from:{latitude:Fu,longitude:Vu,fov:Gu},to:{latitude:Nu,longitude:Uu,fov:zu}}};return{move:$u,rotate:async(Lu,Ou,Fu={})=>{Fu.asyncStartCallback&&Fu.asyncStartCallback(),Lu.mode&&_u.currentMode!==Lu.mode&&await _u.changeMode(Lu.mode),Lu.mode===Five.Mode.Panorama&&_u.currentMode===Five.Mode.Panorama&&Lu.panoIndex!==void 0&&Lu.panoIndex!==_u.panoIndex&&(Fu.preload&&await _u.preloadPano(Lu.panoIndex),await new Promise((Uu,Gu)=>{_u.moveToPano(Lu.panoIndex,{moveEndCallback:()=>Uu(!0),moveCancelCallback:()=>Gu(!1),effect:"fade"})})),Fu.asyncEndCallback&&Fu.asyncEndCallback();const{from:Nu,to:Vu}=Bu(Lu);return await new Promise((Uu,Gu)=>{const zu=({progress:Ku})=>{const Wu={};Wu.longitude=progressNumber(Nu.longitude,Vu.longitude,Ku)%PI_2$1,Wu.latitude=progressNumber(Nu.latitude,Vu.latitude,Ku),Wu.fov=progressNumber(Nu.fov,Vu.fov,Ku),_u.setState(Wu,!0)},Hu=()=>{Uu(!0)},ju=()=>{Uu(!1)};let Qu=Ou;Lu.rotation===Rotation.Loop&&(Qu=Lu.rotateSpeed?Math.ceil(Math.abs(Vu.longitude-Nu.longitude)/Lu.rotateSpeed*1e3):Ou);const Xu=tweenProgress$1(Qu,Easing.Linear.None).onUpdate(zu).onComplete(Hu).onDestroy(ju);Lu.rotation===Rotation.Loop&&Xu.repeat(1/0).yoyo(!0),setTimeout(()=>{Xu.destroy(),Uu(!0)},Ou)})}}};var VreoKeyframeEnum=(_u=>(_u.CameraMovement="CameraMovement",_u.PanoTag="PanoTag",_u.PanoTextLabel="PanoTextLabel",_u.Prompter="Prompter",_u.UpdateVRPanorama="UpdateVRPanorama",_u.ModelVideo="ModelVideo",_u.PanoEffect="PanoEffect",_u.InfoPanel="InfoPanel",_u.VideoEffect="VideoEffect",_u.BgMusic="BgMusic",_u.Exit="Exit",_u.Custom="Custom",_u))(VreoKeyframeEnum||{}),InfoPanelTypeEnum=(_u=>(_u.Image="Image",_u.Video="Video",_u))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(_u=>(_u.Drawer="Drawer",_u.PopUp="PopUp",_u))(InfoPanelStyleEnum||{});function CameraMovement(){const _u=useController(),$u=useFiveInstance(),Bu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Ru=async Lu=>{Bu.current||(Bu.current=CameraMovementPlugin($u));const{start:Ou,end:Fu,data:Nu}=Lu,Vu=Nu,Uu=Vu.effect;Uu===CameraMovementEffect.Rotate?await Bu.current.rotate(Nu,Fu-Ou):Uu===CameraMovementEffect.Move?await Bu.current.move(Nu,Fu-Ou):Vu.panoIndex!==void 0&&Vu.panoIndex!==$u.panoIndex?await Bu.current.move(Nu,Fu-Ou):await Bu.current.rotate(Nu,Fu-Ou)};return _u.on(VreoKeyframeEnum.CameraMovement,Ru),()=>{_u.off(VreoKeyframeEnum.CameraMovement,Ru)}},[_u]),jsx(Fragment,{})}const resizeObserverCache=new Map;function addResizeListener(_u,$u,Bu=!0){if(!_u)return()=>{};if(Bu&&$u(_u.clientWidth,_u.clientHeight),typeof ResizeObserver!="undefined"&&ResizeObserver){const Ru=new ResizeObserver(()=>$u(_u.clientWidth,_u.clientHeight));return Ru.observe(_u),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u&&Ru.unobserve(_u),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}}else{const Ru=document.createElement("iframe");return Ru.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",Ru.classList.add("resize-sensor-iframe"),_u.appendChild(Ru),Ru.contentWindow?(Ru.contentWindow.addEventListener("resize",()=>{$u(Ru.clientWidth,Ru.clientHeight)}),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u.removeChild(Ru),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}):()=>{}}}function hasResizeListener(_u){return _u?resizeObserverCache.get(_u)||0>0:!1}function ResizeObserver$1(){const _u=React.useRef(null),$u=useController();return React.useEffect(()=>{if(!_u.current)return;const Bu=$u.container.parentElement;if(hasResizeListener(Bu))return;const Ru=addResizeListener(Bu,(Lu,Ou)=>{$u.setContainerSize(Lu,Ou)});return()=>{Ru()}},[]),jsx("div",{className:"resizeObserver-element",ref:_u})}function InfoPanelImg({url:_u,children:$u}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--img",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[$u,jsx("img",{className:"vreo-infoPanelImg",src:_u})]})})})})}function InfoPanelVideo({url:_u,children:$u}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--video",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[$u,jsx("div",{className:"vreo-infoPanelVideo",children:jsx("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:_u})})]})})})})}const Title=_u=>!_u.title&&!_u.subTitle?null:jsxs(Fragment,{children:[jsx("div",{className:"vreo-infoPanel-title-shadow"}),jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:_u.title}),jsx("div",{className:"vreo-infoPanel-t2",children:_u.subTitle})]})]});function InfoPanel(){const _u=react$1.exports.useRef(),$u=useController();return react$1.exports.useEffect(()=>{var Ru;if(((Ru=$u.configs)==null?void 0:Ru.keyframeMap.InfoPanel)===!1)return;const Bu=Lu=>{const{start:Ou,end:Fu,data:Nu}=Lu,Vu=Nu,{title:Uu,subTitle:Gu,style:zu}=Vu;do{if(zu===InfoPanelStyleEnum.PopUp){Vu.type===InfoPanelTypeEnum.Image?$u.openPopUp(jsx(InfoPanelImg,{url:Vu.url,children:jsx(Title,{title:Uu,subTitle:Gu})})):Vu.type===InfoPanelTypeEnum.Video&&$u.openPopUp(jsx(InfoPanelVideo,{url:Vu.url,children:jsx(Title,{title:Uu,subTitle:Gu})}));break}Vu.type===InfoPanelTypeEnum.Image?$u.openDrawer({content:jsx(InfoPanelImg,{url:Vu.url,children:jsx(Title,{title:Uu,subTitle:Gu})}),height:"60vh"}):Vu.type===InfoPanelTypeEnum.Video&&$u.openDrawer({content:jsx(InfoPanelVideo,{url:Vu.url,children:jsx(Title,{title:Uu,subTitle:Gu})}),height:"60vh"})}while(!1);_u.current=setTimeout(()=>{$u.openDrawer(!1),$u.openPopUp(!1)},Fu-Ou)};return $u.on(VreoKeyframeEnum.InfoPanel,Bu),()=>{$u.off(VreoKeyframeEnum.InfoPanel,Bu),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}const ModelTVVideoPlugin=(_u,{videoElement:$u})=>{const Bu={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:$u},Ru=zu=>{Bu.videoTexture&&(Bu.videoTexture.image.muted=zu,Bu.videoTexture.image.play())},Lu=()=>Bu.videoTexture?Bu.videoTexture.image.muted:!0,Ou=()=>{if(Bu.enabled||!Bu.videoTexture)return;Bu.enabled=!0,Bu.videoMeshes=Nu(),Bu.videoMeshes.forEach(Hu=>_u.scene.add(Hu));const zu=()=>{if(!Bu.videoTexture)return;const Hu=()=>{var ju;!Bu.videoTexture||((ju=Bu.videoTexture)==null||ju.image.removeEventListener("timeupdate",Hu),Bu.videoTextureEnabled=!0,Bu.videoMeshes.forEach(Qu=>{Qu.material.map!==Bu.videoTexture&&(Qu.material.map=Bu.videoTexture)}),_u.needsRender=!0)};Bu.videoTexture.image.addEventListener("timeupdate",Hu),Bu.videoTexture&&Bu.videoMeshes.length&&Bu.videoTexture.image.play()};if(_u.model.loaded)zu();else return _u.once("modelLoaded",()=>zu())},Fu=()=>{!Bu.enabled||(Bu.enabled=!1,Bu.videoMeshes.forEach(zu=>{zu.geometry.dispose(),zu.material.dispose(),_u.scene.remove(zu),Bu.videoTexture&&Bu.videoTexture.image.pause()}),Bu.videoMeshes=[],_u.needsRender=!0)},Nu=()=>Bu.rectPoints.map((zu,Hu)=>{const ju=new BufferGeometry,Qu=128,Xu=[];Xu.push(zu[0].x,zu[0].y,zu[0].z);for(let Zu=1;Zu<Qu;Zu++)Xu.push(zu[0].x+(zu[1].x-zu[0].x)*Zu/Qu,zu[0].y+(zu[1].y-zu[0].y)*Zu/Qu,zu[0].z+(zu[1].z-zu[0].z)*Zu/Qu);Xu.push(zu[1].x,zu[1].y,zu[1].z),Xu.push(zu[2].x,zu[2].y,zu[2].z);for(let Zu=1;Zu<Qu;Zu++)Xu.push(zu[2].x+(zu[3].x-zu[2].x)*Zu/Qu,zu[2].y+(zu[3].y-zu[2].y)*Zu/Qu,zu[2].z+(zu[3].z-zu[2].z)*Zu/Qu);Xu.push(zu[3].x,zu[3].y,zu[3].z);const Ku=[];Ku.push(0,1);for(let Zu=1;Zu<Qu;Zu++)Ku.push(0,1-Zu/Qu);Ku.push(0,0),Ku.push(1,0);for(let Zu=1;Zu<Qu;Zu++)Ku.push(1,Zu/Qu);Ku.push(1,1);const Wu=[];for(let Zu=0;Zu<Qu;Zu++)Wu.push(Zu,Zu+1,Qu*2-Zu,Zu,Qu*2-Zu,Qu*2+1-Zu);ju.setAttribute("position",new BufferAttribute(new Float32Array(Xu),3)),ju.setAttribute("uv",new BufferAttribute(new Float32Array(Ku),2)),ju.setIndex(new BufferAttribute(new Uint32Array(Wu),1));const qu=new MeshBasicMaterial({map:Bu.videoTextureEnabled?Bu.videoTexture:Bu.imageTexture,side:DoubleSide}),Yu=new Mesh(ju,qu);return Yu.renderOrder=1,Yu.name=`video-${Hu}-${performance.now()}`,Yu}),Vu=zu=>{const Hu=new TextureLoader().load(zu);return Hu.minFilter=LinearFilter,Hu.magFilter=LinearFilter,Hu.format=RGBFormat,Hu},Uu=(zu,Hu)=>new Promise((ju,Qu)=>{const Xu=new XMLHttpRequest;Xu.onreadystatechange=()=>{if(Xu.readyState==4)if(Xu.status==200){const Ku=window.URL||window.webkitURL;Hu=Hu||document.createElement("video"),Hu.crossOrigin="anonymous",Hu.autoplay=!0,Hu.muted=!0,Hu.loop=!0,Hu.playsInline=!0,Hu.src=Ku.createObjectURL(Xu.response);const Wu=new VideoTexture(Hu);Wu.minFilter=LinearFilter,Wu.magFilter=LinearFilter,Wu.format=RGBFormat,ju(Object.assign(Wu,{videoSource:zu}))}else Qu(new Error("Video download Error: "+Xu.status))},Xu.onerror=Ku=>Qu(Ku),Xu.open("GET",zu),Xu.responseType="blob",Xu.send()}),Gu=async(zu,Hu)=>{const{video_src:ju,video_poster_src:Qu,points:Xu}=zu;Bu.videoSource=ju,Bu.rectPoints=Xu.map(Ku=>Ku.map(({x:Wu,y:qu,z:Yu})=>new Vector3(Wu,qu,Yu))),Bu.imageTexture=Vu(Qu),Hu&&(Bu.videoElement=Hu),Bu.videoTexture=await Uu(Bu.videoSource,Bu.videoElement),Bu.enabled=!!zu.enable,Bu.enabled&&Ou()};return _u.on("modeChange",()=>Ru(!0)),_u.on("wantsTapGesture",zu=>{if(!Bu.enabled)return;const[Hu]=zu.intersectObjects(_u.scene.children,!0);if(!!Hu&&/^video/.test(Hu.object.name))return Bu.videoTexture&&Ru(!Bu.videoTexture.image.muted),!1}),_u.on("panoArrived",()=>{if(!Bu.enabled||Lu())return;const zu=_u.camera.position;Bu.rectPoints.find(ju=>{const Qu=ju.reduce((Xu,Ku)=>new Vector3(Xu.x+Ku.x/ju.length,Xu.y+Ku.y/ju.length,Xu.z+Ku.z/ju.length),new Vector3);return ju.map(Xu=>new Vector3((Xu.x+Qu.x)/2,(Xu.y+Qu.y)/2,(Xu.z+Qu.z)/2)).filter(Xu=>{Xu=Xu.clone().sub(zu).normalize();const Ku=new Raycaster(zu,Xu),[Wu]=Ku.intersectObjects(_u.scene.children,!0);return!!Wu&&/^video/.test(Wu.object.name)}).length>=2})||Ru(!0)}),_u.on("renderFrame",()=>{Bu.videoMeshes.forEach(zu=>{zu&&(zu.needsRender=!0)})}),_u.on("load",zu=>{zu.modelTVVideoData&&Gu(zu.modelTVVideoData)}),{enable:Ou,disable:Fu,load:Gu}};function createTransMatrix(_u){const $u=new Matrix4;return $u.fromArray(_u),Bu=>{const Ru=new Vector3(...Bu);return Ru.applyMatrix4($u),Ru.toArray()}}function ModelVideo(){const _u=useController(),$u=useFiveInstance(),Bu=react$1.exports.useRef(),Ru=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Lu=async Ou=>{var Qu,Xu;Bu.current||(Bu.current=ModelTVVideoPlugin($u,{}));const{start:Fu,end:Nu}=Ou,{videoSrc:Vu,videoPosterSrc:Uu,vertexs:Gu,matrixWorld:zu}=Ou.data,Hu=(()=>{if(Gu.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(Gu.length===4)return Gu;const Ku=new Box3;return Gu.forEach(Wu=>Ku.expandByPoint(new Vector3(Wu.x,Wu.y,Wu.z))),[new Vector3(Ku.min.x,Ku.max.y,Ku.max.z),new Vector3(Ku.min.x,Ku.min.y,Ku.max.z),new Vector3(Ku.max.x,Ku.min.y,Ku.max.z),new Vector3(Ku.max.x,Ku.max.y,Ku.max.z)]})(),ju=(()=>{if(zu){const Ku=createTransMatrix(zu);return[Hu.map(Wu=>{const qu=Ku([Wu.x,Wu.y,Wu.z]);return{x:qu[0],y:qu[1],z:qu[2]}})]}return[Hu]})();Bu.current.disable(),await Bu.current.load({video_src:Vu,video_poster_src:Uu,points:ju},(Xu=(Qu=_u.configs)==null?void 0:Qu.videos)==null?void 0:Xu.modelTVVideo),Bu.current.enable(),Ru.current=setTimeout(()=>{var Ku;return(Ku=Bu.current)==null?void 0:Ku.disable()},Nu-Fu)};return _u.on(VreoKeyframeEnum.ModelVideo,Lu),()=>{_u.off(VreoKeyframeEnum.ModelVideo,Lu),Ru.current&&clearTimeout(Ru.current)}},[_u]),jsx(Fragment,{})}var line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t$1=tslib.exports;function e(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Bu){if(Bu!=="default"){var Ru=Object.getOwnPropertyDescriptor(_u,Bu);Object.defineProperty($u,Bu,Ru.get?Ru:{enumerable:!0,get:function(){return _u[Bu]}})}}),$u.default=_u,Object.freeze($u)}var n=e(require$$1),i=function(_u){function $u(){var Bu=_u.call(this)||this;return Bu.type="LineSegmentsGeometry",Bu.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),Bu.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),Bu.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),Bu}return t$1.__extends($u,_u),$u.prototype.applyMatrix4=function(Bu){var Ru=this.attributes.instanceStart,Lu=this.attributes.instanceEnd;return Ru!==void 0&&(Ru.applyMatrix4(Bu),Lu.applyMatrix4(Bu),Ru.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},$u.prototype.setPositions=function(Bu){var Ru;Ru=Bu instanceof Float32Array?Bu:Array.isArray(Bu)?new Float32Array(Bu):new Float32Array;var Lu=new n.InstancedInterleavedBuffer(Ru,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(Lu,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(Lu,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},$u.prototype.setColors=function(Bu){var Ru;Ru=Bu instanceof Float32Array?Bu:Array.isArray(Bu)?new Float32Array(Bu):new Float32Array;var Lu=new n.InstancedInterleavedBuffer(Ru,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(Lu,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(Lu,3,3)),this},$u.prototype.fromWireframeGeometry=function(Bu){return this.setPositions(Bu.attributes.position.array),this},$u.prototype.fromEdgesGeometry=function(Bu){return this.setPositions(Bu.attributes.position.array),this},$u.prototype.fromMesh=function(Bu){return this.fromWireframeGeometry(new n.WireframeGeometry(Bu.geometry)),this},$u.prototype.fromLineSegments=function(Bu){var Ru=Bu.geometry;if(Ru instanceof n.Geometry){var Lu=new n.BufferGeometry().fromGeometry(Ru);this.setPositions(Lu.attributes.position.array)}else Ru instanceof n.BufferGeometry&&this.setPositions(Ru.attributes.position.array);return this},$u.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n.Box3);var Bu=this.attributes.instanceStart,Ru=this.attributes.instanceEnd;if(Bu!==void 0&&Ru!==void 0){var Lu=new n.Box3;this.boundingBox.setFromBufferAttribute(Bu),Lu.setFromBufferAttribute(Ru),this.boundingBox.union(Lu)}},$u.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n.Sphere),this.boundingBox===null&&this.computeBoundingBox();var Bu=this.attributes.instanceStart,Ru=this.attributes.instanceEnd;if(Bu!==void 0&&Ru!==void 0){var Lu=this.boundingSphere.center;this.boundingBox.getCenter(Lu);for(var Ou=0,Fu=new n.Vector3,Nu=0,Vu=Bu.count;Nu<Vu;Nu++)Fu.fromBufferAttribute(Bu,Nu),Ou=Math.max(Ou,Lu.distanceToSquared(Fu)),Fu.fromBufferAttribute(Ru,Nu),Ou=Math.max(Ou,Lu.distanceToSquared(Fu));this.boundingSphere.radius=Math.sqrt(Ou),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},$u.prototype.toJSON=function(){},$u}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r$1={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o=function(_u){function $u(Bu){var Ru=_u.call(this,{uniforms:n.UniformsUtils.clone(r$1.uniforms),vertexShader:r$1.vertexShader,fragmentShader:r$1.fragmentShader,clipping:!0})||this;return Ru.type="LineMaterial",Ru.dashed=!1,Object.defineProperties(Ru,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Lu){this.uniforms.diffuse.value=Lu}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Lu){this.uniforms.linewidth.value=Lu}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Lu){this.uniforms.dashScale.value=Lu}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Lu){this.uniforms.dashSize.value=Lu}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Lu){this.uniforms.gapSize.value=Lu}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Lu){this.uniforms.opacity.value=Lu}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Lu){this.uniforms.resolution.value.copy(Lu)}}}),Ru.setValues(Bu),Ru}return t$1.__extends($u,_u),$u}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(_u){function $u(Bu,Ru){var Lu=_u.call(this)||this;return Lu.type="LineSegments2",Lu.geometry=Bu!==void 0?Bu:new i,Lu.material=Ru!==void 0?Ru:new o({color:16777215*Math.random()}),Lu}return t$1.__extends($u,_u),$u.prototype.computeLineDistances=function(){for(var Bu=this.geometry,Ru=Bu.attributes.instanceStart,Lu=Bu.attributes.instanceEnd,Ou=new Float32Array(2*Ru.count),Fu=new n.Vector3,Nu=new n.Vector3,Vu=0,Uu=0,Gu=Ru.count;Vu<Gu;Vu++,Uu+=2)Fu.fromBufferAttribute(Ru,Vu),Nu.fromBufferAttribute(Lu,Vu),Ou[Uu]=Uu===0?0:Ou[Uu-1],Ou[Uu+1]=Ou[Uu]+Fu.distanceTo(Nu);var zu=new n.InstancedInterleavedBuffer(Ou,2,1);return Bu.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(zu,1,0)),Bu.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(zu,1,1)),this},$u.prototype.raycast=function(Bu,Ru){Bu.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Lu=Bu.ray,Ou=Bu.camera,Fu=Ou.projectionMatrix,Nu=this.geometry,Vu=this.material,Uu=Vu.resolution,Gu=Vu.linewidth,zu=Nu.attributes.instanceStart,Hu=Nu.attributes.instanceEnd,ju=new n.Vector4,Qu=new n.Vector4,Xu=new n.Vector4,Ku=new n.Vector3,Wu=new n.Matrix4,qu=new n.Line3,Yu=new n.Vector3;Lu.at(1,Xu),Xu.w=1,Xu.applyMatrix4(Ou.matrixWorldInverse),Xu.applyMatrix4(Fu),Xu.multiplyScalar(1/Xu.w),Xu.x*=Uu.x/2,Xu.y*=Uu.y/2,Xu.z=0,Ku.copy(Xu);var Zu=this.matrixWorld;Wu.multiplyMatrices(Ou.matrixWorldInverse,Zu);for(var _h=0,ep=zu.count;_h<ep;_h++){ju.fromBufferAttribute(zu,_h),Qu.fromBufferAttribute(Hu,_h),ju.w=1,Qu.w=1,ju.applyMatrix4(Wu),Qu.applyMatrix4(Wu),ju.applyMatrix4(Fu),Qu.applyMatrix4(Fu),ju.multiplyScalar(1/ju.w),Qu.multiplyScalar(1/Qu.w);var ip=ju.z<-1&&Qu.z<-1,ap=ju.z>1&&Qu.z>1;if(!ip&&!ap){ju.x*=Uu.x/2,ju.y*=Uu.y/2,Qu.x*=Uu.x/2,Qu.y*=Uu.y/2,qu.start.copy(ju),qu.start.z=0,qu.end.copy(Qu),qu.end.z=0;var sp=qu.closestPointToPointParameter(Ku,!0);qu.at(sp,Yu);var Ju=n.MathUtils.lerp(ju.z,Qu.z,sp),_f=Ju>=-1&&Ju<=1,np=Ku.distanceTo(Yu)<.5*Gu;if(_f&&np){qu.start.fromBufferAttribute(zu,_h),qu.end.fromBufferAttribute(Hu,_h),qu.start.applyMatrix4(Zu),qu.end.applyMatrix4(Zu);var tp=new n.Vector3,rp=new n.Vector3;Lu.distanceSqToSegment(qu.start,qu.end,rp,tp),Ru.push({point:rp,pointOnLine:tp,distance:Lu.origin.distanceTo(rp),object:this,faceIndex:_h})}}}},$u}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(_u){function $u(Bu,Ru){var Lu=_u.call(this,Bu,Ru)||this;return Lu.type="Line2",Lu}return t$1.__extends($u,_u),$u}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(_u){function $u(){var Bu=_u.call(this)||this;return Bu.type="LineGeometry",Bu}return t$1.__extends($u,_u),$u.prototype.setPositions=function(Bu){for(var Ru=Bu.length-3,Lu=new Float32Array(2*Ru),Ou=0;Ou<Ru;Ou+=3)Lu[2*Ou]=Bu[Ou],Lu[2*Ou+1]=Bu[Ou+1],Lu[2*Ou+2]=Bu[Ou+2],Lu[2*Ou+3]=Bu[Ou+3],Lu[2*Ou+4]=Bu[Ou+4],Lu[2*Ou+5]=Bu[Ou+5];return _u.prototype.setPositions.call(this,Lu),this},$u.prototype.setColors=function(Bu){for(var Ru=Bu.length-3,Lu=new Float32Array(2*Ru),Ou=0;Ou<Ru;Ou+=3)Lu[2*Ou]=Bu[Ou],Lu[2*Ou+1]=Bu[Ou+1],Lu[2*Ou+2]=Bu[Ou+2],Lu[2*Ou+3]=Bu[Ou+3],Lu[2*Ou+4]=Bu[Ou+4],Lu[2*Ou+5]=Bu[Ou+5];return _u.prototype.setColors.call(this,Lu),this},$u.prototype.fromLine=function(Bu){var Ru=Bu.geometry;if(Ru instanceof n.Geometry){var Lu=new n.BufferGeometry().fromGeometry(Ru);this.setPositions(Lu.attributes.position.array)}else Ru instanceof n.BufferGeometry&&this.setPositions(Ru.attributes.position.array);return this},$u.prototype.copy=function(){return this},$u}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l$1=function(_u){function $u(Bu,Ru){Bu===void 0&&(Bu=new n.Vector3),Ru===void 0&&(Ru=new n.Vector3);var Lu=_u.call(this)||this;Lu.type="FiveLine",Lu.needsRender=!0;var Ou=new u,Fu=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});Lu.line=new s(Ou,Fu);var Nu=new n.BufferGeometry,Vu=new n.PointsMaterial({color:14467195,size:8,map:c||(c=new n.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Lu.points=new n.Points(Nu,Vu),Lu.points.renderOrder=11,Lu.points.frustumCulled=!1,Lu.setPoints(Bu,Ru),Lu.add(Lu.line,Lu.points),Lu}return t$1.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.setPoints=function(Bu,Ru){var Lu=[].concat(Bu.toArray(),Ru.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(Lu),3)),this.line.geometry.setPositions(Lu),this.line.computeLineDistances(),this.needsRender=!0},$u.prototype.getPoints=function(){var Bu=this.points.geometry.attributes.position.array;return[new n.Vector3(Bu[0],Bu[1],Bu[2]),new n.Vector3(Bu[3],Bu[4],Bu[5])]},$u.prototype.setMaterial=function(Bu){var Ru=this.line.material;for(var Lu in Bu)if(Bu.hasOwnProperty(Lu)){var Ou=Bu[Lu];Lu==="dashed"?(Ru.dashed=Ou,Ou?Ru.defines.USE_DASH="":delete Ru.defines.USE_DASH,Ru.needsUpdate=!0):Ru[Lu]=Bu[Lu]}this.needsRender=!0},$u.prototype.setResolution=function(Bu,Ru){var Lu=this.line.material.resolution;Lu.x===Bu&&Lu.y===Ru||(Lu.set(Bu,Ru),this.needsRender=!0)},$u}(n.Object3D);Object.assign(l$1.prototype,{isFiveLine:!0}),Line=line.Line=l$1,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;class BetterTween extends exports.Tween{constructor(){super(...arguments);xm(this,"disposeMethods",[]);xm(this,"animationFrameDisposer");xm(this,"onDispose",Bu=>(this.disposeMethods.push(Bu),this));xm(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval(()=>this.update()),this));xm(this,"dispose",()=>{var Bu;this.stop(),(Bu=this.animationFrameDisposer)==null||Bu.call(this),this.disposeMethods.forEach(Ru=>Ru()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(_u,$u=exports.Easing.Linear.None){const Bu=new BetterTween({progress:0}).to({progress:1});return _u!==void 0&&Bu.duration(_u),$u!==void 0&&Bu.easing($u),Bu}function lineAnime(_u,$u,Bu){const Ru="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Lu=new TextureLoader().load(Ru),Ou=new Color(16777215),Fu=new Line;Fu.setMaterial({linewidth:2,color:Ou});const Nu=Fu.points.material;return Nu.map=Lu,Nu.color.set(Ou),Fu.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:Vu})=>{const Uu=.5-Vu/2,Gu=.5+Vu/2,zu=$u.clone().lerp(Bu,Uu),Hu=$u.clone().lerp(Bu,Gu);Fu.setPoints(zu,Hu)}).onStart(()=>_u.scene.add(Fu)).onDispose(()=>{_u.scene.remove(Fu),_u.needsRender=!0})}function PanoEffect(){const[_u,$u]=react$1.exports.useState(null),Bu=useFiveInstance(),Ru=react$1.exports.useRef(null),[Lu,Ou]=react$1.exports.useState(null),Fu=react$1.exports.useRef(),Nu=useController(),Vu=useFiveProject2d(),Uu=()=>{Ru.current&&Ru.current.dispose()};return react$1.exports.useEffect(()=>{const Gu=zu=>{const{start:Hu,end:ju,data:Qu}=zu,Xu=Qu,[Ku,Wu]=Xu.twoVertexs,qu=new Vector3(Ku.x,Ku.y,Ku.z),Yu=new Vector3(Wu.x,Wu.y,Wu.z);Ru.current=lineAnime(Bu,qu.clone(),Yu.clone()),Ru.current.play();const Zu=qu.lerp(Yu,.5),_h=qu.distanceTo(Yu),ep=Vu(Zu);if(!ep)return;const{x:ip,y:ap}=ep;$u({center:Zu,distance:_h}),Ou({left:ip,top:ap}),Fu.current=setTimeout(()=>{$u(null),Ou(null),Uu()},ju-Hu)};return Nu.on(VreoKeyframeEnum.PanoEffect,Gu),()=>{Nu.off(VreoKeyframeEnum.PanoEffect,Gu),Fu.current&&clearTimeout(Fu.current),Uu()}},[Nu]),react$1.exports.useEffect(()=>{const Gu=()=>{if(!(_u!=null&&_u.center))return;const{x:zu,y:Hu,z:ju}=_u.center,Qu=Vu(new Vector3(zu,Hu,ju));if(!Qu)return;const{x:Xu,y:Ku}=Qu;Ou({left:Xu,top:Ku})};return Bu.on("currentStateChange",Gu),()=>{Bu.off("currentStateChange",Gu)}},[_u==null?void 0:_u.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":_u}),style:{left:((Lu==null?void 0:Lu.left)||0)+"px",top:((Lu==null?void 0:Lu.top)||0)+"px"},children:(_u==null?void 0:_u.distance.toFixed(4))+"m"})})}var CSS3DObject=function(_u){Object3D.call(this),this.element=_u,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function($u){$u.element instanceof Element&&$u.element.parentNode!==null&&$u.element.parentNode.removeChild($u.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(_u){CSS3DObject.call(this,_u)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var _u=this,$u,Bu,Ru,Lu,Ou=new Matrix4,Fu={camera:{fov:0,style:""},objects:new WeakMap},Nu=document.createElement("div");Nu.style.overflow="hidden",this.domElement=Nu;var Vu=document.createElement("div");Vu.style.WebkitTransformStyle="preserve-3d",Vu.style.transformStyle="preserve-3d",Vu.style.pointerEvents="none",Nu.appendChild(Vu);var Uu=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:$u,height:Bu}},this.setSize=function(Wu,qu){$u=Wu,Bu=qu,Ru=$u/2,Lu=Bu/2,Nu.style.width=Wu+"px",Nu.style.height=qu+"px",Vu.style.width=Wu+"px",Vu.style.height=qu+"px"};function Gu(Wu){return Math.abs(Wu)<1e-10?0:Wu}function zu(Wu){var qu=Wu.elements;return"matrix3d("+Gu(qu[0])+","+Gu(-qu[1])+","+Gu(qu[2])+","+Gu(qu[3])+","+Gu(qu[4])+","+Gu(-qu[5])+","+Gu(qu[6])+","+Gu(qu[7])+","+Gu(qu[8])+","+Gu(-qu[9])+","+Gu(qu[10])+","+Gu(qu[11])+","+Gu(qu[12])+","+Gu(-qu[13])+","+Gu(qu[14])+","+Gu(qu[15])+")"}function Hu(Wu,qu){var Yu=Wu.elements,Zu="matrix3d("+Gu(Yu[0])+","+Gu(Yu[1])+","+Gu(Yu[2])+","+Gu(Yu[3])+","+Gu(-Yu[4])+","+Gu(-Yu[5])+","+Gu(-Yu[6])+","+Gu(-Yu[7])+","+Gu(Yu[8])+","+Gu(Yu[9])+","+Gu(Yu[10])+","+Gu(Yu[11])+","+Gu(Yu[12])+","+Gu(Yu[13])+","+Gu(Yu[14])+","+Gu(Yu[15])+")";return Uu?"translate(-50%,-50%)translate("+Ru+"px,"+Lu+"px)"+qu+Zu:"translate(-50%,-50%)"+Zu}function ju(Wu,qu,Yu,Zu){if(Wu instanceof CSS3DObject){Wu.onBeforeRender(_u,qu,Yu);var _h;Wu instanceof CSS3DSprite?(Ou.copy(Yu.matrixWorldInverse),Ou.transpose(),Ou.copyPosition(Wu.matrixWorld),Ou.scale(Wu.scale),Ou.elements[3]=0,Ou.elements[7]=0,Ou.elements[11]=0,Ou.elements[15]=1,_h=Hu(Ou,Zu)):_h=Hu(Wu.matrixWorld,Zu);var ep=Wu.element,ip=Fu.objects.get(Wu);if(ip===void 0||ip.style!==_h){ep.style.WebkitTransform=_h,ep.style.transform=_h;var ap={style:_h};Uu&&(ap.distanceToCameraSquared=Qu(Yu,Wu)),Fu.objects.set(Wu,ap)}ep.style.display=Wu.visible?"":"none",ep.parentNode!==Vu&&Vu.appendChild(ep),Wu.onAfterRender(_u,qu,Yu)}for(var sp=0,Ju=Wu.children.length;sp<Ju;sp++)ju(Wu.children[sp],qu,Yu,Zu)}var Qu=function(){var Wu=new Vector3,qu=new Vector3;return function(Yu,Zu){return Wu.setFromMatrixPosition(Yu.matrixWorld),qu.setFromMatrixPosition(Zu.matrixWorld),Wu.distanceToSquared(qu)}}();function Xu(Wu){var qu=[];return Wu.traverse(function(Yu){Yu instanceof CSS3DObject&&qu.push(Yu)}),qu}function Ku(Wu){for(var qu=Xu(Wu).sort(function(ep,ip){var ap=Fu.objects.get(ep).distanceToCameraSquared,sp=Fu.objects.get(ip).distanceToCameraSquared;return ap-sp}),Yu=qu.length,Zu=0,_h=qu.length;Zu<_h;Zu++)qu[Zu].element.style.zIndex=Yu-Zu}this.render=function(Wu,qu){var Yu=qu.projectionMatrix.elements[5]*Lu;if(Fu.camera.fov!==Yu&&(qu.isPerspectiveCamera?(Nu.style.WebkitPerspective=Yu+"px",Nu.style.perspective=Yu+"px"):(Nu.style.WebkitPerspective="",Nu.style.perspective=""),Fu.camera.fov=Yu),Wu.autoUpdate===!0&&Wu.updateMatrixWorld(),qu.parent===null&&qu.updateMatrixWorld(),qu.isOrthographicCamera)var Zu=-(qu.right+qu.left)/2,_h=(qu.top+qu.bottom)/2;var ep=qu.isOrthographicCamera?"scale("+Yu+")translate("+Gu(Zu)+"px,"+Gu(_h)+"px)"+zu(qu.matrixWorldInverse):"translateZ("+Yu+"px)"+zu(qu.matrixWorldInverse),ip=ep+"translate("+Ru+"px,"+Lu+"px)";Fu.camera.style!==ip&&!Uu&&(Vu.style.WebkitTransform=ip,Vu.style.transform=ip,Fu.camera.style=ip),ju(Wu,Wu,qu,ep),Uu&&Ku(Wu)}};/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l=void 0,aa=mod;function r(_u,$u){var Bu=_u.split("."),Ru=aa;!(Bu[0]in Ru)&&Ru.execScript&&Ru.execScript("var "+Bu[0]);for(var Lu;Bu.length&&(Lu=Bu.shift());)!Bu.length&&$u!==l?Ru[Lu]=$u:Ru=Ru[Lu]?Ru[Lu]:Ru[Lu]={}}var t=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function v$1(_u){var $u=_u.length,Bu=0,Ru=Number.POSITIVE_INFINITY,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju;for(zu=0;zu<$u;++zu)_u[zu]>Bu&&(Bu=_u[zu]),_u[zu]<Ru&&(Ru=_u[zu]);for(Lu=1<<Bu,Ou=new(t?Uint32Array:Array)(Lu),Fu=1,Nu=0,Vu=2;Fu<=Bu;){for(zu=0;zu<$u;++zu)if(_u[zu]===Fu){for(Uu=0,Gu=Nu,Hu=0;Hu<Fu;++Hu)Uu=Uu<<1|Gu&1,Gu>>=1;for(ju=Fu<<16|zu,Hu=Uu;Hu<Lu;Hu+=Vu)Ou[Hu]=ju;++Nu}++Fu,Nu<<=1,Vu<<=1}return[Ou,Bu,Ru]}function w(_u,$u){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t?new Uint8Array(_u):_u,this.m=!1,this.i=y,this.r=!1,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.bufferSize&&(this.h=$u.bufferSize),$u.bufferType&&(this.i=$u.bufferType),$u.resize&&(this.r=$u.resize)),this.i){case A:this.b=32768,this.c=new(t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0,this.c=new(t?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A=0,y=1,B={t:A,s:y};w.prototype.k=function(){for(;!this.m;){var _u=C$1(this,3);switch(_u&1&&(this.m=!0),_u>>>=1,_u){case 0:var $u=this.input,Bu=this.a,Ru=this.c,Lu=this.b,Ou=$u.length,Fu=l,Nu=l,Vu=Ru.length,Uu=l;if(this.d=this.f=0,Bu+1>=Ou)throw Error("invalid uncompressed block header: LEN");if(Fu=$u[Bu++]|$u[Bu++]<<8,Bu+1>=Ou)throw Error("invalid uncompressed block header: NLEN");if(Nu=$u[Bu++]|$u[Bu++]<<8,Fu===~Nu)throw Error("invalid uncompressed block header: length verify");if(Bu+Fu>$u.length)throw Error("input buffer is broken");switch(this.i){case A:for(;Lu+Fu>Ru.length;){if(Uu=Vu-Lu,Fu-=Uu,t)Ru.set($u.subarray(Bu,Bu+Uu),Lu),Lu+=Uu,Bu+=Uu;else for(;Uu--;)Ru[Lu++]=$u[Bu++];this.b=Lu,Ru=this.e(),Lu=this.b}break;case y:for(;Lu+Fu>Ru.length;)Ru=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t)Ru.set($u.subarray(Bu,Bu+Fu),Lu),Lu+=Fu,Bu+=Fu;else for(;Fu--;)Ru[Lu++]=$u[Bu++];this.a=Bu,this.b=Lu,this.c=Ru;break;case 1:this.j(ba,ca);break;case 2:for(var Gu=C$1(this,5)+257,zu=C$1(this,5)+1,Hu=C$1(this,4)+4,ju=new(t?Uint8Array:Array)(D.length),Qu=l,Xu=l,Ku=l,Wu=l,qu=l,Yu=l,Zu=l,ep=l,_h=l,ep=0;ep<Hu;++ep)ju[D[ep]]=C$1(this,3);if(!t)for(ep=Hu,Hu=ju.length;ep<Hu;++ep)ju[D[ep]]=0;for(Qu=v$1(ju),Wu=new(t?Uint8Array:Array)(Gu+zu),ep=0,_h=Gu+zu;ep<_h;)switch(qu=E(this,Qu),qu){case 16:for(Zu=3+C$1(this,2);Zu--;)Wu[ep++]=Yu;break;case 17:for(Zu=3+C$1(this,3);Zu--;)Wu[ep++]=0;Yu=0;break;case 18:for(Zu=11+C$1(this,7);Zu--;)Wu[ep++]=0;Yu=0;break;default:Yu=Wu[ep++]=qu}Xu=v$1(t?Wu.subarray(0,Gu):Wu.slice(0,Gu)),Ku=v$1(t?Wu.subarray(Gu):Wu.slice(Gu)),this.j(Xu,Ku);break;default:throw Error("unknown BTYPE: "+_u)}}return this.n()};var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H$1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H$1):H$1,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N$1=t?new Uint8Array(ea):ea,O=new(t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v$1(O),Q$1=new(t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q$1.length;R<ga;++R)Q$1[R]=5;var ca=v$1(Q$1);function C$1(_u,$u){for(var Bu=_u.f,Ru=_u.d,Lu=_u.input,Ou=_u.a,Fu=Lu.length,Nu;Ru<$u;){if(Ou>=Fu)throw Error("input buffer is broken");Bu|=Lu[Ou++]<<Ru,Ru+=8}return Nu=Bu&(1<<$u)-1,_u.f=Bu>>>$u,_u.d=Ru-$u,_u.a=Ou,Nu}function E(_u,$u){for(var Bu=_u.f,Ru=_u.d,Lu=_u.input,Ou=_u.a,Fu=Lu.length,Nu=$u[0],Vu=$u[1],Uu,Gu;Ru<Vu&&!(Ou>=Fu);)Bu|=Lu[Ou++]<<Ru,Ru+=8;if(Uu=Nu[Bu&(1<<Vu)-1],Gu=Uu>>>16,Gu>Ru)throw Error("invalid code length: "+Gu);return _u.f=Bu>>Gu,_u.d=Ru-Gu,_u.a=Ou,Uu&65535}w.prototype.j=function(_u,$u){var Bu=this.c,Ru=this.b;this.o=_u;for(var Lu=Bu.length-258,Ou,Fu,Nu,Vu;(Ou=E(this,_u))!==256;)if(256>Ou)Ru>=Lu&&(this.b=Ru,Bu=this.e(),Ru=this.b),Bu[Ru++]=Ou;else for(Fu=Ou-257,Vu=I[Fu],0<K[Fu]&&(Vu+=C$1(this,K[Fu])),Ou=E(this,$u),Nu=da[Ou],0<N$1[Ou]&&(Nu+=C$1(this,N$1[Ou])),Ru>=Lu&&(this.b=Ru,Bu=this.e(),Ru=this.b);Vu--;)Bu[Ru]=Bu[Ru++-Nu];for(;8<=this.d;)this.d-=8,this.a--;this.b=Ru};w.prototype.w=function(_u,$u){var Bu=this.c,Ru=this.b;this.o=_u;for(var Lu=Bu.length,Ou,Fu,Nu,Vu;(Ou=E(this,_u))!==256;)if(256>Ou)Ru>=Lu&&(Bu=this.e(),Lu=Bu.length),Bu[Ru++]=Ou;else for(Fu=Ou-257,Vu=I[Fu],0<K[Fu]&&(Vu+=C$1(this,K[Fu])),Ou=E(this,$u),Nu=da[Ou],0<N$1[Ou]&&(Nu+=C$1(this,N$1[Ou])),Ru+Vu>Lu&&(Bu=this.e(),Lu=Bu.length);Vu--;)Bu[Ru]=Bu[Ru++-Nu];for(;8<=this.d;)this.d-=8,this.a--;this.b=Ru};w.prototype.e=function(){var _u=new(t?Uint8Array:Array)(this.b-32768),$u=this.b-32768,Bu,Ru,Lu=this.c;if(t)_u.set(Lu.subarray(32768,_u.length));else for(Bu=0,Ru=_u.length;Bu<Ru;++Bu)_u[Bu]=Lu[Bu+32768];if(this.g.push(_u),this.l+=_u.length,t)Lu.set(Lu.subarray($u,$u+32768));else for(Bu=0;32768>Bu;++Bu)Lu[Bu]=Lu[$u+Bu];return this.b=32768,Lu};w.prototype.z=function(_u){var $u,Bu=this.input.length/this.a+1|0,Ru,Lu,Ou,Fu=this.input,Nu=this.c;return _u&&(typeof _u.p=="number"&&(Bu=_u.p),typeof _u.u=="number"&&(Bu+=_u.u)),2>Bu?(Ru=(Fu.length-this.a)/this.o[2],Ou=258*(Ru/2)|0,Lu=Ou<Nu.length?Nu.length+Ou:Nu.length<<1):Lu=Nu.length*Bu,t?($u=new Uint8Array(Lu),$u.set(Nu)):$u=Nu,this.c=$u};w.prototype.n=function(){var _u=0,$u=this.c,Bu=this.g,Ru,Lu=new(t?Uint8Array:Array)(this.l+(this.b-32768)),Ou,Fu,Nu,Vu;if(Bu.length===0)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Ou=0,Fu=Bu.length;Ou<Fu;++Ou)for(Ru=Bu[Ou],Nu=0,Vu=Ru.length;Nu<Vu;++Nu)Lu[_u++]=Ru[Nu];for(Ou=32768,Fu=this.b;Ou<Fu;++Ou)Lu[_u++]=$u[Ou];return this.g=[],this.buffer=Lu};w.prototype.v=function(){var _u,$u=this.b;return t?this.r?(_u=new Uint8Array($u),_u.set(this.c.subarray(0,$u))):_u=this.c.subarray(0,$u):(this.c.length>$u&&(this.c.length=$u),_u=this.c),this.buffer=_u};function W$1(_u,$u){var Bu,Ru;switch(this.input=_u,this.a=0,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.verify&&(this.A=$u.verify)),Bu=_u[this.a++],Ru=_u[this.a++],Bu&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((Bu<<8)+Ru)%31!==0)throw Error("invalid fcheck flag:"+((Bu<<8)+Ru)%31);if(Ru&32)throw Error("fdict flag is not supported");this.q=new w(_u,{index:this.a,bufferSize:$u.bufferSize,bufferType:$u.bufferType,resize:$u.resize})}W$1.prototype.k=function(){var _u=this.input,$u,Bu;if($u=this.q.k(),this.a=this.q.a,this.A){Bu=(_u[this.a++]<<24|_u[this.a++]<<16|_u[this.a++]<<8|_u[this.a++])>>>0;var Ru=$u;if(typeof Ru=="string"){var Lu=Ru.split(""),Ou,Fu;for(Ou=0,Fu=Lu.length;Ou<Fu;Ou++)Lu[Ou]=(Lu[Ou].charCodeAt(0)&255)>>>0;Ru=Lu}for(var Nu=1,Vu=0,Uu=Ru.length,Gu,zu=0;0<Uu;){Gu=1024<Uu?1024:Uu,Uu-=Gu;do Nu+=Ru[zu++],Vu+=Nu;while(--Gu);Nu%=65521,Vu%=65521}if(Bu!==(Vu<<16|Nu)>>>0)throw Error("invalid adler-32 checksum")}return $u};var ha=8;r("Zlib.Inflate",W$1);r("Zlib.Inflate.prototype.decompress",W$1.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r("Zlib.Inflate.BufferType."+Z,X[Z]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(_u,$u,Bu){var Ru=Bu.length-_u-1;if($u>=Bu[Ru])return Ru-1;if($u<=Bu[_u])return _u;for(var Lu=_u,Ou=Ru,Fu=Math.floor((Lu+Ou)/2);$u<Bu[Fu]||$u>=Bu[Fu+1];)$u<Bu[Fu]?Ou=Fu:Lu=Fu,Fu=Math.floor((Lu+Ou)/2);return Fu},calcBasisFunctions:function(_u,$u,Bu,Ru){var Lu=[],Ou=[],Fu=[];Lu[0]=1;for(var Nu=1;Nu<=Bu;++Nu){Ou[Nu]=$u-Ru[_u+1-Nu],Fu[Nu]=Ru[_u+Nu]-$u;for(var Vu=0,Uu=0;Uu<Nu;++Uu){var Gu=Fu[Uu+1],zu=Ou[Nu-Uu],Hu=Lu[Uu]/(Gu+zu);Lu[Uu]=Vu+Gu*Hu,Vu=zu*Hu}Lu[Nu]=Vu}return Lu},calcBSplinePoint:function(_u,$u,Bu,Ru){for(var Lu=this.findSpan(_u,Ru,$u),Ou=this.calcBasisFunctions(Lu,Ru,_u,$u),Fu=new Vector4(0,0,0,0),Nu=0;Nu<=_u;++Nu){var Vu=Bu[Lu-_u+Nu],Uu=Ou[Nu],Gu=Vu.w*Uu;Fu.x+=Vu.x*Gu,Fu.y+=Vu.y*Gu,Fu.z+=Vu.z*Gu,Fu.w+=Vu.w*Uu}return Fu},calcBasisFunctionDerivatives:function(_u,$u,Bu,Ru,Lu){for(var Ou=[],Fu=0;Fu<=Bu;++Fu)Ou[Fu]=0;for(var Nu=[],Fu=0;Fu<=Ru;++Fu)Nu[Fu]=Ou.slice(0);for(var Vu=[],Fu=0;Fu<=Bu;++Fu)Vu[Fu]=Ou.slice(0);Vu[0][0]=1;for(var Uu=Ou.slice(0),Gu=Ou.slice(0),zu=1;zu<=Bu;++zu){Uu[zu]=$u-Lu[_u+1-zu],Gu[zu]=Lu[_u+zu]-$u;for(var Hu=0,sp=0;sp<zu;++sp){var ju=Gu[sp+1],Qu=Uu[zu-sp];Vu[zu][sp]=ju+Qu;var Xu=Vu[sp][zu-1]/Vu[zu][sp];Vu[sp][zu]=Hu+ju*Xu,Hu=Qu*Xu}Vu[zu][zu]=Hu}for(var zu=0;zu<=Bu;++zu)Nu[0][zu]=Vu[zu][Bu];for(var sp=0;sp<=Bu;++sp){for(var Ku=0,Wu=1,qu=[],Fu=0;Fu<=Bu;++Fu)qu[Fu]=Ou.slice(0);qu[0][0]=1;for(var Yu=1;Yu<=Ru;++Yu){var Zu=0,_h=sp-Yu,ep=Bu-Yu;sp>=Yu&&(qu[Wu][0]=qu[Ku][0]/Vu[ep+1][_h],Zu=qu[Wu][0]*Vu[_h][ep]);for(var ip=_h>=-1?1:-_h,ap=sp-1<=ep?Yu-1:Bu-sp,zu=ip;zu<=ap;++zu)qu[Wu][zu]=(qu[Ku][zu]-qu[Ku][zu-1])/Vu[ep+1][_h+zu],Zu+=qu[Wu][zu]*Vu[_h+zu][ep];sp<=ep&&(qu[Wu][Yu]=-qu[Ku][Yu-1]/Vu[ep+1][sp],Zu+=qu[Wu][Yu]*Vu[sp][ep]),Nu[Yu][sp]=Zu;var zu=Ku;Ku=Wu,Wu=zu}}for(var sp=Bu,Yu=1;Yu<=Ru;++Yu){for(var zu=0;zu<=Bu;++zu)Nu[Yu][zu]*=sp;sp*=Bu-Yu}return Nu},calcBSplineDerivatives:function(_u,$u,Bu,Ru,Lu){for(var Ou=Lu<_u?Lu:_u,Fu=[],Nu=this.findSpan(_u,Ru,$u),Vu=this.calcBasisFunctionDerivatives(Nu,Ru,_u,Ou,$u),Uu=[],Gu=0;Gu<Bu.length;++Gu){var zu=Bu[Gu].clone(),Hu=zu.w;zu.x*=Hu,zu.y*=Hu,zu.z*=Hu,Uu[Gu]=zu}for(var ju=0;ju<=Ou;++ju){for(var zu=Uu[Nu-_u].clone().multiplyScalar(Vu[ju][0]),Qu=1;Qu<=_u;++Qu)zu.add(Uu[Nu-_u+Qu].clone().multiplyScalar(Vu[ju][Qu]));Fu[ju]=zu}for(var ju=Ou+1;ju<=Lu+1;++ju)Fu[ju]=new Vector4(0,0,0);return Fu},calcKoverI:function(_u,$u){for(var Bu=1,Ru=2;Ru<=_u;++Ru)Bu*=Ru;for(var Lu=1,Ru=2;Ru<=$u;++Ru)Lu*=Ru;for(var Ru=2;Ru<=_u-$u;++Ru)Lu*=Ru;return Bu/Lu},calcRationalCurveDerivatives:function(_u){for(var $u=_u.length,Bu=[],Ru=[],Lu=0;Lu<$u;++Lu){var Ou=_u[Lu];Bu[Lu]=new Vector3(Ou.x,Ou.y,Ou.z),Ru[Lu]=Ou.w}for(var Fu=[],Nu=0;Nu<$u;++Nu){for(var Vu=Bu[Nu].clone(),Lu=1;Lu<=Nu;++Lu)Vu.sub(Fu[Nu-Lu].clone().multiplyScalar(this.calcKoverI(Nu,Lu)*Ru[Lu]));Fu[Nu]=Vu.divideScalar(Ru[0])}return Fu},calcNURBSDerivatives:function(_u,$u,Bu,Ru,Lu){var Ou=this.calcBSplineDerivatives(_u,$u,Bu,Ru,Lu);return this.calcRationalCurveDerivatives(Ou)},calcSurfacePoint:function(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu){for(var Vu=this.findSpan(_u,Ou,Bu),Uu=this.findSpan($u,Fu,Ru),Gu=this.calcBasisFunctions(Vu,Ou,_u,Bu),zu=this.calcBasisFunctions(Uu,Fu,$u,Ru),Hu=[],ju=0;ju<=$u;++ju){Hu[ju]=new Vector4(0,0,0,0);for(var Qu=0;Qu<=_u;++Qu){var Xu=Lu[Vu-_u+Qu][Uu-$u+ju].clone(),Ku=Xu.w;Xu.x*=Ku,Xu.y*=Ku,Xu.z*=Ku,Hu[ju].add(Xu.multiplyScalar(Gu[Qu]))}}for(var Wu=new Vector4(0,0,0,0),ju=0;ju<=$u;++ju)Wu.add(Hu[ju].multiplyScalar(zu[ju]));Wu.divideScalar(Wu.w),Nu.set(Wu.x,Wu.y,Wu.z)}},NURBSCurve=function(_u,$u,Bu,Ru,Lu){Curve.call(this),this.degree=_u,this.knots=$u,this.controlPoints=[],this.startKnot=Ru||0,this.endKnot=Lu||this.knots.length-1;for(var Ou=0;Ou<Bu.length;++Ou){var Fu=Bu[Ou];this.controlPoints[Ou]=new Vector4(Fu.x,Fu.y,Fu.z,Fu.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(_u,$u){var Bu=$u||new Vector3,Ru=this.knots[this.startKnot]+_u*(this.knots[this.endKnot]-this.knots[this.startKnot]),Lu=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Ru);return Lu.w!=1&&Lu.divideScalar(Lu.w),Bu.set(Lu.x,Lu.y,Lu.z)};NURBSCurve.prototype.getTangent=function(_u,$u){var Bu=$u||new Vector3,Ru=this.knots[0]+_u*(this.knots[this.knots.length-1]-this.knots[0]),Lu=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Ru,1);return Bu.copy(Lu[1]).normalize(),Bu};(function(){var _u,$u,Bu;function Ru(Ju){Loader.call(this,Ju)}Ru.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Ru,load:function(Ju,_f,np,tp){var rp=this,op=rp.path===""?LoaderUtils.extractUrlBase(Ju):rp.path,lp=new FileLoader(this.manager);lp.setPath(rp.path),lp.setResponseType("arraybuffer"),lp.load(Ju,function(up){try{_f(rp.parse(up,op))}catch(cp){tp?tp(cp):console.error(cp),rp.manager.itemError(Ju)}},np,tp)},parse:function(Ju,_f){if(zu(Ju))_u=new Vu().parse(Ju);else{var np=ep(Ju);if(!Hu(np))throw new Error("THREE.FBXLoader: Unknown format.");if(ju(np)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ju(np));_u=new Nu().parse(np)}var tp=new TextureLoader(this.manager).setPath(this.resourcePath||_f).setCrossOrigin(this.crossOrigin);return new Lu(tp,this.manager).parse(_u)}});function Lu(Ju,_f){this.textureLoader=Ju,this.manager=_f}Lu.prototype={constructor:Lu,parse:function(){$u=this.parseConnections();var Ju=this.parseImages(),_f=this.parseTextures(Ju),np=this.parseMaterials(_f),tp=this.parseDeformers(),rp=new Ou().parse(tp);return this.parseScene(tp,rp,np),Bu},parseConnections:function(){var Ju=new Map;if("Connections"in _u){var _f=_u.Connections.connections;_f.forEach(function(np){var tp=np[0],rp=np[1],op=np[2];Ju.has(tp)||Ju.set(tp,{parents:[],children:[]});var lp={ID:rp,relationship:op};Ju.get(tp).parents.push(lp),Ju.has(rp)||Ju.set(rp,{parents:[],children:[]});var up={ID:tp,relationship:op};Ju.get(rp).children.push(up)})}return Ju},parseImages:function(){var Ju={},_f={};if("Video"in _u.Objects){var np=_u.Objects.Video;for(var tp in np){var rp=np[tp],op=parseInt(tp);if(Ju[op]=rp.RelativeFilename||rp.Filename,"Content"in rp){var lp=rp.Content instanceof ArrayBuffer&&rp.Content.byteLength>0,up=typeof rp.Content=="string"&&rp.Content!=="";if(lp||up){var cp=this.parseImage(np[tp]);_f[rp.RelativeFilename||rp.Filename]=cp}}}}for(var op in Ju){var Ap=Ju[op];_f[Ap]!==void 0?Ju[op]=_f[Ap]:Ju[op]=Ju[op].split("\\").pop()}return Ju},parseImage:function(Ju){var _f=Ju.Content,np=Ju.RelativeFilename||Ju.Filename,tp=np.slice(np.lastIndexOf(".")+1).toLowerCase(),rp;switch(tp){case"bmp":rp="image/bmp";break;case"jpg":case"jpeg":rp="image/jpeg";break;case"png":rp="image/png";break;case"tif":rp="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",np),rp="image/tga";break;default:console.warn('FBXLoader: Image type "'+tp+'" is not supported.');return}if(typeof _f=="string")return"data:"+rp+";base64,"+_f;var op=new Uint8Array(_f);return window.URL.createObjectURL(new Blob([op],{type:rp}))},parseTextures:function(Ju){var _f=new Map;if("Texture"in _u.Objects){var np=_u.Objects.Texture;for(var tp in np){var rp=this.parseTexture(np[tp],Ju);_f.set(parseInt(tp),rp)}}return _f},parseTexture:function(Ju,_f){var np=this.loadTexture(Ju,_f);np.ID=Ju.id,np.name=Ju.attrName;var tp=Ju.WrapModeU,rp=Ju.WrapModeV,op=tp!==void 0?tp.value:0,lp=rp!==void 0?rp.value:0;if(np.wrapS=op===0?RepeatWrapping:ClampToEdgeWrapping,np.wrapT=lp===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in Ju){var up=Ju.Scaling.value;np.repeat.x=up[0],np.repeat.y=up[1]}return np},loadTexture:function(Ju,_f){var np,tp=this.textureLoader.path,rp=$u.get(Ju.id).children;rp!==void 0&&rp.length>0&&_f[rp[0].ID]!==void 0&&(np=_f[rp[0].ID],(np.indexOf("blob:")===0||np.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var op,lp=Ju.FileName.slice(-3).toLowerCase();if(lp==="tga"){var up=this.manager.getHandler(".tga");up===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",Ju.RelativeFilename),op=new Texture):op=up.load(np)}else lp==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",Ju.RelativeFilename),op=new Texture):op=this.textureLoader.load(np);return this.textureLoader.setPath(tp),op},parseMaterials:function(Ju){var _f=new Map;if("Material"in _u.Objects){var np=_u.Objects.Material;for(var tp in np){var rp=this.parseMaterial(np[tp],Ju);rp!==null&&_f.set(parseInt(tp),rp)}}return _f},parseMaterial:function(Ju,_f){var np=Ju.id,tp=Ju.attrName,rp=Ju.ShadingModel;if(typeof rp=="object"&&(rp=rp.value),!$u.has(np))return null;var op=this.parseParameters(Ju,_f,np),lp;switch(rp.toLowerCase()){case"phong":lp=new MeshPhongMaterial;break;case"lambert":lp=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',rp),lp=new MeshPhongMaterial;break}return lp.setValues(op),lp.name=tp,lp},parseParameters:function(Ju,_f,np){var tp={};Ju.BumpFactor&&(tp.bumpScale=Ju.BumpFactor.value),Ju.Diffuse?tp.color=new Color().fromArray(Ju.Diffuse.value):Ju.DiffuseColor&&Ju.DiffuseColor.type==="Color"&&(tp.color=new Color().fromArray(Ju.DiffuseColor.value)),Ju.DisplacementFactor&&(tp.displacementScale=Ju.DisplacementFactor.value),Ju.Emissive?tp.emissive=new Color().fromArray(Ju.Emissive.value):Ju.EmissiveColor&&Ju.EmissiveColor.type==="Color"&&(tp.emissive=new Color().fromArray(Ju.EmissiveColor.value)),Ju.EmissiveFactor&&(tp.emissiveIntensity=parseFloat(Ju.EmissiveFactor.value)),Ju.Opacity&&(tp.opacity=parseFloat(Ju.Opacity.value)),tp.opacity<1&&(tp.transparent=!0),Ju.ReflectionFactor&&(tp.reflectivity=Ju.ReflectionFactor.value),Ju.Shininess&&(tp.shininess=Ju.Shininess.value),Ju.Specular?tp.specular=new Color().fromArray(Ju.Specular.value):Ju.SpecularColor&&Ju.SpecularColor.type==="Color"&&(tp.specular=new Color().fromArray(Ju.SpecularColor.value));var rp=this;return $u.get(np).children.forEach(function(op){var lp=op.relationship;switch(lp){case"Bump":tp.bumpMap=rp.getTexture(_f,op.ID);break;case"Maya|TEX_ao_map":tp.aoMap=rp.getTexture(_f,op.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":tp.map=rp.getTexture(_f,op.ID),tp.map.encoding=sRGBEncoding;break;case"DisplacementColor":tp.displacementMap=rp.getTexture(_f,op.ID);break;case"EmissiveColor":tp.emissiveMap=rp.getTexture(_f,op.ID),tp.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":tp.normalMap=rp.getTexture(_f,op.ID);break;case"ReflectionColor":tp.envMap=rp.getTexture(_f,op.ID),tp.envMap.mapping=EquirectangularReflectionMapping,tp.envMap.encoding=sRGBEncoding;break;case"SpecularColor":tp.specularMap=rp.getTexture(_f,op.ID),tp.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":tp.alphaMap=rp.getTexture(_f,op.ID),tp.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",lp);break}}),tp},getTexture:function(Ju,_f){return"LayeredTexture"in _u.Objects&&_f in _u.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),_f=$u.get(_f).children[0].ID),Ju.get(_f)},parseDeformers:function(){var Ju={},_f={};if("Deformer"in _u.Objects){var np=_u.Objects.Deformer;for(var tp in np){var rp=np[tp],op=$u.get(parseInt(tp));if(rp.attrType==="Skin"){var lp=this.parseSkeleton(op,np);lp.ID=tp,op.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),lp.geometryID=op.parents[0].ID,Ju[tp]=lp}else if(rp.attrType==="BlendShape"){var up={id:tp};up.rawTargets=this.parseMorphTargets(op,np),up.id=tp,op.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),_f[tp]=up}}}return{skeletons:Ju,morphTargets:_f}},parseSkeleton:function(Ju,_f){var np=[];return Ju.children.forEach(function(tp){var rp=_f[tp.ID];if(rp.attrType==="Cluster"){var op={ID:tp.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(rp.TransformLink.a)};"Indexes"in rp&&(op.indices=rp.Indexes.a,op.weights=rp.Weights.a),np.push(op)}}),{rawBones:np,bones:[]}},parseMorphTargets:function(Ju,_f){for(var np=[],tp=0;tp<Ju.children.length;tp++){var rp=Ju.children[tp],op=_f[rp.ID],lp={name:op.attrName,initialWeight:op.DeformPercent,id:op.id,fullWeights:op.FullWeights.a};if(op.attrType!=="BlendShapeChannel")return;lp.geoID=$u.get(parseInt(rp.ID)).children.filter(function(up){return up.relationship===void 0})[0].ID,np.push(lp)}return np},parseScene:function(Ju,_f,np){Bu=new Group$1;var tp=this.parseModels(Ju.skeletons,_f,np),rp=_u.Objects.Model,op=this;tp.forEach(function(up){var cp=rp[up.ID];op.setLookAtProperties(up,cp);var Ap=$u.get(up.ID).parents;Ap.forEach(function(yp){var Ip=tp.get(yp.ID);Ip!==void 0&&Ip.add(up)}),up.parent===null&&Bu.add(up)}),this.bindSkeleton(Ju.skeletons,_f,tp),this.createAmbientLight(),this.setupMorphMaterials(),Bu.traverse(function(up){if(up.userData.transformData){up.parent&&(up.userData.transformData.parentMatrixWorld=up.parent.matrix);var cp=Yu(up.userData.transformData);up.applyMatrix4(cp)}});var lp=new Fu().parse();Bu.children.length===1&&Bu.children[0].isGroup&&(Bu.children[0].animations=lp,Bu=Bu.children[0]),Bu.animations=lp},parseModels:function(Ju,_f,np){var tp=new Map,rp=_u.Objects.Model;for(var op in rp){var lp=parseInt(op),up=rp[op],cp=$u.get(lp),Ap=this.buildSkeleton(cp,Ju,lp,up.attrName);if(!Ap){switch(up.attrType){case"Camera":Ap=this.createCamera(cp);break;case"Light":Ap=this.createLight(cp);break;case"Mesh":Ap=this.createMesh(cp,_f,np);break;case"NurbsCurve":Ap=this.createCurve(cp,_f);break;case"LimbNode":case"Root":Ap=new Bone;break;case"Null":default:Ap=new Group$1;break}Ap.name=up.attrName?PropertyBinding.sanitizeNodeName(up.attrName):"",Ap.ID=lp}this.getTransformData(Ap,up),tp.set(lp,Ap)}return tp},buildSkeleton:function(Ju,_f,np,tp){var rp=null;return Ju.parents.forEach(function(op){for(var lp in _f){var up=_f[lp];up.rawBones.forEach(function(cp,Ap){if(cp.ID===op.ID){var yp=rp;rp=new Bone,rp.matrixWorld.copy(cp.transformLink),rp.name=tp?PropertyBinding.sanitizeNodeName(tp):"",rp.ID=np,up.bones[Ap]=rp,yp!==null&&rp.add(yp)}})}}),rp},createCamera:function(Ju){var _f,np;if(Ju.children.forEach(function(Ip){var Ep=_u.Objects.NodeAttribute[Ip.ID];Ep!==void 0&&(np=Ep)}),np===void 0)_f=new Object3D;else{var tp=0;np.CameraProjectionType!==void 0&&np.CameraProjectionType.value===1&&(tp=1);var rp=1;np.NearPlane!==void 0&&(rp=np.NearPlane.value/1e3);var op=1e3;np.FarPlane!==void 0&&(op=np.FarPlane.value/1e3);var lp=window.innerWidth,up=window.innerHeight;np.AspectWidth!==void 0&&np.AspectHeight!==void 0&&(lp=np.AspectWidth.value,up=np.AspectHeight.value);var cp=lp/up,Ap=45;np.FieldOfView!==void 0&&(Ap=np.FieldOfView.value);var yp=np.FocalLength?np.FocalLength.value:null;switch(tp){case 0:_f=new PerspectiveCamera(Ap,cp,rp,op),yp!==null&&_f.setFocalLength(yp);break;case 1:_f=new OrthographicCamera(-lp/2,lp/2,up/2,-up/2,rp,op);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+tp+"."),_f=new Object3D;break}}return _f},createLight:function(Ju){var _f,np;if(Ju.children.forEach(function(yp){var Ip=_u.Objects.NodeAttribute[yp.ID];Ip!==void 0&&(np=Ip)}),np===void 0)_f=new Object3D;else{var tp;np.LightType===void 0?tp=0:tp=np.LightType.value;var rp=16777215;np.Color!==void 0&&(rp=new Color().fromArray(np.Color.value));var op=np.Intensity===void 0?1:np.Intensity.value/100;np.CastLightOnObject!==void 0&&np.CastLightOnObject.value===0&&(op=0);var lp=0;np.FarAttenuationEnd!==void 0&&(np.EnableFarAttenuation!==void 0&&np.EnableFarAttenuation.value===0?lp=0:lp=np.FarAttenuationEnd.value);var up=1;switch(tp){case 0:_f=new PointLight(rp,op,lp,up);break;case 1:_f=new DirectionalLight(rp,op);break;case 2:var cp=Math.PI/3;np.InnerAngle!==void 0&&(cp=MathUtils.degToRad(np.InnerAngle.value));var Ap=0;np.OuterAngle!==void 0&&(Ap=MathUtils.degToRad(np.OuterAngle.value),Ap=Math.max(Ap,1)),_f=new SpotLight(rp,op,lp,cp,Ap,up);break;default:console.warn("THREE.FBXLoader: Unknown light type "+np.LightType.value+", defaulting to a PointLight."),_f=new PointLight(rp,op);break}np.CastShadows!==void 0&&np.CastShadows.value===1&&(_f.castShadow=!0)}return _f},createMesh:function(Ju,_f,np){var tp,rp=null,op=null,lp=[];return Ju.children.forEach(function(up){_f.has(up.ID)&&(rp=_f.get(up.ID)),np.has(up.ID)&&lp.push(np.get(up.ID))}),lp.length>1?op=lp:lp.length>0?op=lp[0]:(op=new MeshPhongMaterial({color:13421772}),lp.push(op)),"color"in rp.attributes&&lp.forEach(function(up){up.vertexColors=!0}),rp.FBX_Deformer?(lp.forEach(function(up){up.skinning=!0}),tp=new SkinnedMesh(rp,op),tp.normalizeSkinWeights()):tp=new Mesh(rp,op),tp},createCurve:function(Ju,_f){var np=Ju.children.reduce(function(rp,op){return _f.has(op.ID)&&(rp=_f.get(op.ID)),rp},null),tp=new LineBasicMaterial({color:3342591,linewidth:1});return new Line$1(np,tp)},getTransformData:function(Ju,_f){var np={};"InheritType"in _f&&(np.inheritType=parseInt(_f.InheritType.value)),"RotationOrder"in _f?np.eulerOrder=Zu(_f.RotationOrder.value):np.eulerOrder="ZYX","Lcl_Translation"in _f&&(np.translation=_f.Lcl_Translation.value),"PreRotation"in _f&&(np.preRotation=_f.PreRotation.value),"Lcl_Rotation"in _f&&(np.rotation=_f.Lcl_Rotation.value),"PostRotation"in _f&&(np.postRotation=_f.PostRotation.value),"Lcl_Scaling"in _f&&(np.scale=_f.Lcl_Scaling.value),"ScalingOffset"in _f&&(np.scalingOffset=_f.ScalingOffset.value),"ScalingPivot"in _f&&(np.scalingPivot=_f.ScalingPivot.value),"RotationOffset"in _f&&(np.rotationOffset=_f.RotationOffset.value),"RotationPivot"in _f&&(np.rotationPivot=_f.RotationPivot.value),Ju.userData.transformData=np},setLookAtProperties:function(Ju,_f){if("LookAtProperty"in _f){var np=$u.get(Ju.ID).children;np.forEach(function(tp){if(tp.relationship==="LookAtProperty"){var rp=_u.Objects.Model[tp.ID];if("Lcl_Translation"in rp){var op=rp.Lcl_Translation.value;Ju.target!==void 0?(Ju.target.position.fromArray(op),Bu.add(Ju.target)):Ju.lookAt(new Vector3().fromArray(op))}}})}},bindSkeleton:function(Ju,_f,np){var tp=this.parsePoseNodes();for(var rp in Ju){var op=Ju[rp],lp=$u.get(parseInt(op.ID)).parents;lp.forEach(function(up){if(_f.has(up.ID)){var cp=up.ID,Ap=$u.get(cp);Ap.parents.forEach(function(yp){if(np.has(yp.ID)){var Ip=np.get(yp.ID);Ip.bind(new Skeleton(op.bones),tp[yp.ID])}})}})}},parsePoseNodes:function(){var Ju={};if("Pose"in _u.Objects){var _f=_u.Objects.Pose;for(var np in _f)if(_f[np].attrType==="BindPose"){var tp=_f[np].PoseNode;Array.isArray(tp)?tp.forEach(function(rp){Ju[rp.Node]=new Matrix4().fromArray(rp.Matrix.a)}):Ju[tp.Node]=new Matrix4().fromArray(tp.Matrix.a)}}return Ju},createAmbientLight:function(){if("GlobalSettings"in _u&&"AmbientColor"in _u.GlobalSettings){var Ju=_u.GlobalSettings.AmbientColor.value,_f=Ju[0],np=Ju[1],tp=Ju[2];if(_f!==0||np!==0||tp!==0){var rp=new Color(_f,np,tp);Bu.add(new AmbientLight(rp,1))}}},setupMorphMaterials:function(){var Ju=this;Bu.traverse(function(_f){_f.isMesh&&_f.geometry.morphAttributes.position&&_f.geometry.morphAttributes.position.length&&(Array.isArray(_f.material)?_f.material.forEach(function(np,tp){Ju.setupMorphMaterial(_f,np,tp)}):Ju.setupMorphMaterial(_f,_f.material))})},setupMorphMaterial:function(Ju,_f,np){var tp=Ju.uuid,rp=_f.uuid,op=!1;if(Bu.traverse(function(up){up.isMesh&&(Array.isArray(up.material)?up.material.forEach(function(cp){cp.uuid===rp&&up.uuid!==tp&&(op=!0)}):up.material.uuid===rp&&up.uuid!==tp&&(op=!0))}),op===!0){var lp=_f.clone();lp.morphTargets=!0,np===void 0?Ju.material=lp:Ju.material[np]=lp}else _f.morphTargets=!0}};function Ou(){}Ou.prototype={constructor:Ou,parse:function(Ju){var _f=new Map;if("Geometry"in _u.Objects){var np=_u.Objects.Geometry;for(var tp in np){var rp=$u.get(parseInt(tp)),op=this.parseGeometry(rp,np[tp],Ju);_f.set(parseInt(tp),op)}}return _f},parseGeometry:function(Ju,_f,np){switch(_f.attrType){case"Mesh":return this.parseMeshGeometry(Ju,_f,np);case"NurbsCurve":return this.parseNurbsGeometry(_f)}},parseMeshGeometry:function(Ju,_f,np){var tp=np.skeletons,rp=[],op=Ju.parents.map(function(yp){return _u.Objects.Model[yp.ID]});if(op.length!==0){var lp=Ju.children.reduce(function(yp,Ip){return tp[Ip.ID]!==void 0&&(yp=tp[Ip.ID]),yp},null);Ju.children.forEach(function(yp){np.morphTargets[yp.ID]!==void 0&&rp.push(np.morphTargets[yp.ID])});var up=op[0],cp={};"RotationOrder"in up&&(cp.eulerOrder=Zu(up.RotationOrder.value)),"InheritType"in up&&(cp.inheritType=parseInt(up.InheritType.value)),"GeometricTranslation"in up&&(cp.translation=up.GeometricTranslation.value),"GeometricRotation"in up&&(cp.rotation=up.GeometricRotation.value),"GeometricScaling"in up&&(cp.scale=up.GeometricScaling.value);var Ap=Yu(cp);return this.genGeometry(_f,lp,rp,Ap)}},genGeometry:function(Ju,_f,np,tp){var rp=new BufferGeometry;Ju.attrName&&(rp.name=Ju.attrName);var op=this.parseGeoNode(Ju,_f),lp=this.genBuffers(op),up=new Float32BufferAttribute(lp.vertex,3);if(up.applyMatrix4(tp),rp.setAttribute("position",up),lp.colors.length>0&&rp.setAttribute("color",new Float32BufferAttribute(lp.colors,3)),_f&&(rp.setAttribute("skinIndex",new Uint16BufferAttribute(lp.weightsIndices,4)),rp.setAttribute("skinWeight",new Float32BufferAttribute(lp.vertexWeights,4)),rp.FBX_Deformer=_f),lp.normal.length>0){var cp=new Matrix3().getNormalMatrix(tp),Ap=new Float32BufferAttribute(lp.normal,3);Ap.applyNormalMatrix(cp),rp.setAttribute("normal",Ap)}if(lp.uvs.forEach(function($p,kp){var Bp="uv"+(kp+1).toString();kp===0&&(Bp="uv"),rp.setAttribute(Bp,new Float32BufferAttribute(lp.uvs[kp],2))}),op.material&&op.material.mappingType!=="AllSame"){var yp=lp.materialIndex[0],Ip=0;if(lp.materialIndex.forEach(function($p,kp){$p!==yp&&(rp.addGroup(Ip,kp-Ip,yp),yp=$p,Ip=kp)}),rp.groups.length>0){var Ep=rp.groups[rp.groups.length-1],Vp=Ep.start+Ep.count;Vp!==lp.materialIndex.length&&rp.addGroup(Vp,lp.materialIndex.length-Vp,yp)}rp.groups.length===0&&rp.addGroup(0,lp.materialIndex.length,lp.materialIndex[0])}return this.addMorphTargets(rp,Ju,np,tp),rp},parseGeoNode:function(Ju,_f){var np={};if(np.vertexPositions=Ju.Vertices!==void 0?Ju.Vertices.a:[],np.vertexIndices=Ju.PolygonVertexIndex!==void 0?Ju.PolygonVertexIndex.a:[],Ju.LayerElementColor&&(np.color=this.parseVertexColors(Ju.LayerElementColor[0])),Ju.LayerElementMaterial&&(np.material=this.parseMaterialIndices(Ju.LayerElementMaterial[0])),Ju.LayerElementNormal&&(np.normal=this.parseNormals(Ju.LayerElementNormal[0])),Ju.LayerElementUV){np.uv=[];for(var tp=0;Ju.LayerElementUV[tp];)np.uv.push(this.parseUVs(Ju.LayerElementUV[tp])),tp++}return np.weightTable={},_f!==null&&(np.skeleton=_f,_f.rawBones.forEach(function(rp,op){rp.indices.forEach(function(lp,up){np.weightTable[lp]===void 0&&(np.weightTable[lp]=[]),np.weightTable[lp].push({id:op,weight:rp.weights[up]})})})),np},genBuffers:function(Ju){var _f={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},np=0,tp=0,rp=!1,op=[],lp=[],up=[],cp=[],Ap=[],yp=[],Ip=this;return Ju.vertexIndices.forEach(function(Ep,Vp){var $p=!1;Ep<0&&(Ep=Ep^-1,$p=!0);var kp=[],Bp=[];if(op.push(Ep*3,Ep*3+1,Ep*3+2),Ju.color){var fp=Ku(Vp,np,Ep,Ju.color);up.push(fp[0],fp[1],fp[2])}if(Ju.skeleton){if(Ju.weightTable[Ep]!==void 0&&Ju.weightTable[Ep].forEach(function(Sp){Bp.push(Sp.weight),kp.push(Sp.id)}),Bp.length>4){rp||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),rp=!0);var dp=[0,0,0,0],bp=[0,0,0,0];Bp.forEach(function(Sp,Cp){var Lp=Sp,zp=kp[Cp];bp.forEach(function(Dp,hp,vp){if(Lp>Dp){vp[hp]=Lp,Lp=Dp;var Np=dp[hp];dp[hp]=zp,zp=Np}})}),kp=dp,Bp=bp}for(;Bp.length<4;)Bp.push(0),kp.push(0);for(var gp=0;gp<4;++gp)Ap.push(Bp[gp]),yp.push(kp[gp])}if(Ju.normal){var fp=Ku(Vp,np,Ep,Ju.normal);lp.push(fp[0],fp[1],fp[2])}if(Ju.material&&Ju.material.mappingType!=="AllSame")var wp=Ku(Vp,np,Ep,Ju.material)[0];Ju.uv&&Ju.uv.forEach(function(Sp,Cp){var Lp=Ku(Vp,np,Ep,Sp);cp[Cp]===void 0&&(cp[Cp]=[]),cp[Cp].push(Lp[0]),cp[Cp].push(Lp[1])}),tp++,$p&&(Ip.genFace(_f,Ju,op,wp,lp,up,cp,Ap,yp,tp),np++,tp=0,op=[],lp=[],up=[],cp=[],Ap=[],yp=[])}),_f},genFace:function(Ju,_f,np,tp,rp,op,lp,up,cp,Ap){for(var yp=2;yp<Ap;yp++)Ju.vertex.push(_f.vertexPositions[np[0]]),Ju.vertex.push(_f.vertexPositions[np[1]]),Ju.vertex.push(_f.vertexPositions[np[2]]),Ju.vertex.push(_f.vertexPositions[np[(yp-1)*3]]),Ju.vertex.push(_f.vertexPositions[np[(yp-1)*3+1]]),Ju.vertex.push(_f.vertexPositions[np[(yp-1)*3+2]]),Ju.vertex.push(_f.vertexPositions[np[yp*3]]),Ju.vertex.push(_f.vertexPositions[np[yp*3+1]]),Ju.vertex.push(_f.vertexPositions[np[yp*3+2]]),_f.skeleton&&(Ju.vertexWeights.push(up[0]),Ju.vertexWeights.push(up[1]),Ju.vertexWeights.push(up[2]),Ju.vertexWeights.push(up[3]),Ju.vertexWeights.push(up[(yp-1)*4]),Ju.vertexWeights.push(up[(yp-1)*4+1]),Ju.vertexWeights.push(up[(yp-1)*4+2]),Ju.vertexWeights.push(up[(yp-1)*4+3]),Ju.vertexWeights.push(up[yp*4]),Ju.vertexWeights.push(up[yp*4+1]),Ju.vertexWeights.push(up[yp*4+2]),Ju.vertexWeights.push(up[yp*4+3]),Ju.weightsIndices.push(cp[0]),Ju.weightsIndices.push(cp[1]),Ju.weightsIndices.push(cp[2]),Ju.weightsIndices.push(cp[3]),Ju.weightsIndices.push(cp[(yp-1)*4]),Ju.weightsIndices.push(cp[(yp-1)*4+1]),Ju.weightsIndices.push(cp[(yp-1)*4+2]),Ju.weightsIndices.push(cp[(yp-1)*4+3]),Ju.weightsIndices.push(cp[yp*4]),Ju.weightsIndices.push(cp[yp*4+1]),Ju.weightsIndices.push(cp[yp*4+2]),Ju.weightsIndices.push(cp[yp*4+3])),_f.color&&(Ju.colors.push(op[0]),Ju.colors.push(op[1]),Ju.colors.push(op[2]),Ju.colors.push(op[(yp-1)*3]),Ju.colors.push(op[(yp-1)*3+1]),Ju.colors.push(op[(yp-1)*3+2]),Ju.colors.push(op[yp*3]),Ju.colors.push(op[yp*3+1]),Ju.colors.push(op[yp*3+2])),_f.material&&_f.material.mappingType!=="AllSame"&&(Ju.materialIndex.push(tp),Ju.materialIndex.push(tp),Ju.materialIndex.push(tp)),_f.normal&&(Ju.normal.push(rp[0]),Ju.normal.push(rp[1]),Ju.normal.push(rp[2]),Ju.normal.push(rp[(yp-1)*3]),Ju.normal.push(rp[(yp-1)*3+1]),Ju.normal.push(rp[(yp-1)*3+2]),Ju.normal.push(rp[yp*3]),Ju.normal.push(rp[yp*3+1]),Ju.normal.push(rp[yp*3+2])),_f.uv&&_f.uv.forEach(function(Ip,Ep){Ju.uvs[Ep]===void 0&&(Ju.uvs[Ep]=[]),Ju.uvs[Ep].push(lp[Ep][0]),Ju.uvs[Ep].push(lp[Ep][1]),Ju.uvs[Ep].push(lp[Ep][(yp-1)*2]),Ju.uvs[Ep].push(lp[Ep][(yp-1)*2+1]),Ju.uvs[Ep].push(lp[Ep][yp*2]),Ju.uvs[Ep].push(lp[Ep][yp*2+1])})},addMorphTargets:function(Ju,_f,np,tp){if(np.length!==0){Ju.morphTargetsRelative=!0,Ju.morphAttributes.position=[];var rp=this;np.forEach(function(op){op.rawTargets.forEach(function(lp){var up=_u.Objects.Geometry[lp.geoID];up!==void 0&&rp.genMorphGeometry(Ju,_f,up,tp,lp.name)})})}},genMorphGeometry:function(Ju,_f,np,tp,rp){for(var op=_f.PolygonVertexIndex!==void 0?_f.PolygonVertexIndex.a:[],lp=np.Vertices!==void 0?np.Vertices.a:[],up=np.Indexes!==void 0?np.Indexes.a:[],cp=Ju.attributes.position.count*3,Ap=new Float32Array(cp),yp=0;yp<up.length;yp++){var Ip=up[yp]*3;Ap[Ip]=lp[yp*3],Ap[Ip+1]=lp[yp*3+1],Ap[Ip+2]=lp[yp*3+2]}var Ep={vertexIndices:op,vertexPositions:Ap},Vp=this.genBuffers(Ep),$p=new Float32BufferAttribute(Vp.vertex,3);$p.name=rp||np.attrName,$p.applyMatrix4(tp),Ju.morphAttributes.position.push($p)},parseNormals:function(Ju){var _f=Ju.MappingInformationType,np=Ju.ReferenceInformationType,tp=Ju.Normals.a,rp=[];return np==="IndexToDirect"&&("NormalIndex"in Ju?rp=Ju.NormalIndex.a:"NormalsIndex"in Ju&&(rp=Ju.NormalsIndex.a)),{dataSize:3,buffer:tp,indices:rp,mappingType:_f,referenceType:np}},parseUVs:function(Ju){var _f=Ju.MappingInformationType,np=Ju.ReferenceInformationType,tp=Ju.UV.a,rp=[];return np==="IndexToDirect"&&(rp=Ju.UVIndex.a),{dataSize:2,buffer:tp,indices:rp,mappingType:_f,referenceType:np}},parseVertexColors:function(Ju){var _f=Ju.MappingInformationType,np=Ju.ReferenceInformationType,tp=Ju.Colors.a,rp=[];return np==="IndexToDirect"&&(rp=Ju.ColorIndex.a),{dataSize:4,buffer:tp,indices:rp,mappingType:_f,referenceType:np}},parseMaterialIndices:function(Ju){var _f=Ju.MappingInformationType,np=Ju.ReferenceInformationType;if(_f==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:np};for(var tp=Ju.Materials.a,rp=[],op=0;op<tp.length;++op)rp.push(op);return{dataSize:1,buffer:tp,indices:rp,mappingType:_f,referenceType:np}},parseNurbsGeometry:function(Ju){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var _f=parseInt(Ju.Order);if(isNaN(_f))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",Ju.Order,Ju.id),new BufferGeometry;for(var np=_f-1,tp=Ju.KnotVector.a,rp=[],op=Ju.Points.a,lp=0,up=op.length;lp<up;lp+=4)rp.push(new Vector4().fromArray(op,lp));var cp,Ap;if(Ju.Form==="Closed")rp.push(rp[0]);else if(Ju.Form==="Periodic"){cp=np,Ap=tp.length-1-cp;for(var lp=0;lp<np;++lp)rp.push(rp[lp])}var yp=new NURBSCurve(np,tp,rp,cp,Ap),Ip=yp.getPoints(rp.length*7),Ep=new Float32Array(Ip.length*3);Ip.forEach(function($p,kp){$p.toArray(Ep,kp*3)});var Vp=new BufferGeometry;return Vp.setAttribute("position",new BufferAttribute(Ep,3)),Vp}};function Fu(){}Fu.prototype={constructor:Fu,parse:function(){var Ju=[],_f=this.parseClips();if(_f!==void 0)for(var np in _f){var tp=_f[np],rp=this.addClip(tp);Ju.push(rp)}return Ju},parseClips:function(){if(_u.Objects.AnimationCurve!==void 0){var Ju=this.parseAnimationCurveNodes();this.parseAnimationCurves(Ju);var _f=this.parseAnimationLayers(Ju),np=this.parseAnimStacks(_f);return np}},parseAnimationCurveNodes:function(){var Ju=_u.Objects.AnimationCurveNode,_f=new Map;for(var np in Ju){var tp=Ju[np];if(tp.attrName.match(/S|R|T|DeformPercent/)!==null){var rp={id:tp.id,attr:tp.attrName,curves:{}};_f.set(rp.id,rp)}}return _f},parseAnimationCurves:function(Ju){var _f=_u.Objects.AnimationCurve;for(var np in _f){var tp={id:_f[np].id,times:_f[np].KeyTime.a.map(Qu),values:_f[np].KeyValueFloat.a},rp=$u.get(tp.id);if(rp!==void 0){var op=rp.parents[0].ID,lp=rp.parents[0].relationship;lp.match(/X/)?Ju.get(op).curves.x=tp:lp.match(/Y/)?Ju.get(op).curves.y=tp:lp.match(/Z/)?Ju.get(op).curves.z=tp:lp.match(/d|DeformPercent/)&&Ju.has(op)&&(Ju.get(op).curves.morph=tp)}}},parseAnimationLayers:function(Ju){var _f=_u.Objects.AnimationLayer,np=new Map;for(var tp in _f){var rp=[],op=$u.get(parseInt(tp));if(op!==void 0){var lp=op.children;lp.forEach(function(up,cp){if(Ju.has(up.ID)){var Ap=Ju.get(up.ID);if(Ap.curves.x!==void 0||Ap.curves.y!==void 0||Ap.curves.z!==void 0){if(rp[cp]===void 0){var yp=$u.get(up.ID).parents.filter(function(Bp){return Bp.relationship!==void 0})[0].ID;if(yp!==void 0){var Ip=_u.Objects.Model[yp.toString()];if(Ip===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",up);return}var Ep={modelName:Ip.attrName?PropertyBinding.sanitizeNodeName(Ip.attrName):"",ID:Ip.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Bu.traverse(function(Bp){Bp.ID===Ip.id&&(Ep.transform=Bp.matrix,Bp.userData.transformData&&(Ep.eulerOrder=Bp.userData.transformData.eulerOrder))}),Ep.transform||(Ep.transform=new Matrix4),"PreRotation"in Ip&&(Ep.preRotation=Ip.PreRotation.value),"PostRotation"in Ip&&(Ep.postRotation=Ip.PostRotation.value),rp[cp]=Ep}}rp[cp]&&(rp[cp][Ap.attr]=Ap)}else if(Ap.curves.morph!==void 0){if(rp[cp]===void 0){var Vp=$u.get(up.ID).parents.filter(function(bp){return bp.relationship!==void 0})[0].ID,$p=$u.get(Vp).parents[0].ID,kp=$u.get($p).parents[0].ID,yp=$u.get(kp).parents[0].ID,Ip=_u.Objects.Model[yp],Ep={modelName:Ip.attrName?PropertyBinding.sanitizeNodeName(Ip.attrName):"",morphName:_u.Objects.Deformer[Vp].attrName};rp[cp]=Ep}rp[cp][Ap.attr]=Ap}}}),np.set(parseInt(tp),rp)}}return np},parseAnimStacks:function(Ju){var _f=_u.Objects.AnimationStack,np={};for(var tp in _f){var rp=$u.get(parseInt(tp)).children;rp.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var op=Ju.get(rp[0].ID);np[tp]={name:_f[tp].attrName,layer:op}}return np},addClip:function(Ju){var _f=[],np=this;return Ju.layer.forEach(function(tp){_f=_f.concat(np.generateTracks(tp))}),new AnimationClip(Ju.name,-1,_f)},generateTracks:function(Ju){var _f=[],np=new Vector3,tp=new Quaternion,rp=new Vector3;if(Ju.transform&&Ju.transform.decompose(np,tp,rp),np=np.toArray(),tp=new Euler().setFromQuaternion(tp,Ju.eulerOrder).toArray(),rp=rp.toArray(),Ju.T!==void 0&&Object.keys(Ju.T.curves).length>0){var op=this.generateVectorTrack(Ju.modelName,Ju.T.curves,np,"position");op!==void 0&&_f.push(op)}if(Ju.R!==void 0&&Object.keys(Ju.R.curves).length>0){var lp=this.generateRotationTrack(Ju.modelName,Ju.R.curves,tp,Ju.preRotation,Ju.postRotation,Ju.eulerOrder);lp!==void 0&&_f.push(lp)}if(Ju.S!==void 0&&Object.keys(Ju.S.curves).length>0){var up=this.generateVectorTrack(Ju.modelName,Ju.S.curves,rp,"scale");up!==void 0&&_f.push(up)}if(Ju.DeformPercent!==void 0){var cp=this.generateMorphTrack(Ju);cp!==void 0&&_f.push(cp)}return _f},generateVectorTrack:function(Ju,_f,np,tp){var rp=this.getTimesForAllAxes(_f),op=this.getKeyframeTrackValues(rp,_f,np);return new VectorKeyframeTrack(Ju+"."+tp,rp,op)},generateRotationTrack:function(Ju,_f,np,tp,rp,op){_f.x!==void 0&&(this.interpolateRotations(_f.x),_f.x.values=_f.x.values.map(MathUtils.degToRad)),_f.y!==void 0&&(this.interpolateRotations(_f.y),_f.y.values=_f.y.values.map(MathUtils.degToRad)),_f.z!==void 0&&(this.interpolateRotations(_f.z),_f.z.values=_f.z.values.map(MathUtils.degToRad));var lp=this.getTimesForAllAxes(_f),up=this.getKeyframeTrackValues(lp,_f,np);tp!==void 0&&(tp=tp.map(MathUtils.degToRad),tp.push(op),tp=new Euler().fromArray(tp),tp=new Quaternion().setFromEuler(tp)),rp!==void 0&&(rp=rp.map(MathUtils.degToRad),rp.push(op),rp=new Euler().fromArray(rp),rp=new Quaternion().setFromEuler(rp).inverse());for(var cp=new Quaternion,Ap=new Euler,yp=[],Ip=0;Ip<up.length;Ip+=3)Ap.set(up[Ip],up[Ip+1],up[Ip+2],op),cp.setFromEuler(Ap),tp!==void 0&&cp.premultiply(tp),rp!==void 0&&cp.multiply(rp),cp.toArray(yp,Ip/3*4);return new QuaternionKeyframeTrack(Ju+".quaternion",lp,yp)},generateMorphTrack:function(Ju){var _f=Ju.DeformPercent.curves.morph,np=_f.values.map(function(rp){return rp/100}),tp=Bu.getObjectByName(Ju.modelName).morphTargetDictionary[Ju.morphName];return new NumberKeyframeTrack(Ju.modelName+".morphTargetInfluences["+tp+"]",_f.times,np)},getTimesForAllAxes:function(Ju){var _f=[];return Ju.x!==void 0&&(_f=_f.concat(Ju.x.times)),Ju.y!==void 0&&(_f=_f.concat(Ju.y.times)),Ju.z!==void 0&&(_f=_f.concat(Ju.z.times)),_f=_f.sort(function(np,tp){return np-tp}).filter(function(np,tp,rp){return rp.indexOf(np)==tp}),_f},getKeyframeTrackValues:function(Ju,_f,np){var tp=np,rp=[],op=-1,lp=-1,up=-1;return Ju.forEach(function(cp){if(_f.x&&(op=_f.x.times.indexOf(cp)),_f.y&&(lp=_f.y.times.indexOf(cp)),_f.z&&(up=_f.z.times.indexOf(cp)),op!==-1){var Ap=_f.x.values[op];rp.push(Ap),tp[0]=Ap}else rp.push(tp[0]);if(lp!==-1){var yp=_f.y.values[lp];rp.push(yp),tp[1]=yp}else rp.push(tp[1]);if(up!==-1){var Ip=_f.z.values[up];rp.push(Ip),tp[2]=Ip}else rp.push(tp[2])}),rp},interpolateRotations:function(Ju){for(var _f=1;_f<Ju.values.length;_f++){var np=Ju.values[_f-1],tp=Ju.values[_f]-np,rp=Math.abs(tp);if(rp>=180){for(var op=rp/180,lp=tp/op,up=np+lp,cp=Ju.times[_f-1],Ap=Ju.times[_f]-cp,yp=Ap/op,Ip=cp+yp,Ep=[],Vp=[];Ip<Ju.times[_f];)Ep.push(Ip),Ip+=yp,Vp.push(up),up+=lp;Ju.times=sp(Ju.times,_f,Ep),Ju.values=sp(Ju.values,_f,Vp)}}}};function Nu(){}Nu.prototype={constructor:Nu,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(Ju){this.nodeStack.push(Ju),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(Ju,_f){this.currentProp=Ju,this.currentPropName=_f},parse:function(Ju){this.currentIndent=0,this.allNodes=new Gu,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var _f=this,np=Ju.split(/[\r\n]+/);return np.forEach(function(tp,rp){var op=tp.match(/^[\s\t]*;/),lp=tp.match(/^[\s\t]*$/);if(!(op||lp)){var up=tp.match("^\\t{"+_f.currentIndent+"}(\\w+):(.*){",""),cp=tp.match("^\\t{"+_f.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),Ap=tp.match("^\\t{"+(_f.currentIndent-1)+"}}");up?_f.parseNodeBegin(tp,up):cp?_f.parseNodeProperty(tp,cp,np[++rp]):Ap?_f.popStack():tp.match(/^[^\s\t}]/)&&_f.parseNodePropertyContinued(tp)}}),this.allNodes},parseNodeBegin:function(Ju,_f){var np=_f[1].trim().replace(/^"/,"").replace(/"$/,""),tp=_f[2].split(",").map(function(up){return up.trim().replace(/^"/,"").replace(/"$/,"")}),rp={name:np},op=this.parseNodeAttr(tp),lp=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(np,rp):np in lp?(np==="PoseNode"?lp.PoseNode.push(rp):lp[np].id!==void 0&&(lp[np]={},lp[np][lp[np].id]=lp[np]),op.id!==""&&(lp[np][op.id]=rp)):typeof op.id=="number"?(lp[np]={},lp[np][op.id]=rp):np!=="Properties70"&&(np==="PoseNode"?lp[np]=[rp]:lp[np]=rp),typeof op.id=="number"&&(rp.id=op.id),op.name!==""&&(rp.attrName=op.name),op.type!==""&&(rp.attrType=op.type),this.pushStack(rp)},parseNodeAttr:function(Ju){var _f=Ju[0];Ju[0]!==""&&(_f=parseInt(Ju[0]),isNaN(_f)&&(_f=Ju[0]));var np="",tp="";return Ju.length>1&&(np=Ju[1].replace(/^(\w+)::/,""),tp=Ju[2]),{id:_f,name:np,type:tp}},parseNodeProperty:function(Ju,_f,np){var tp=_f[1].replace(/^"/,"").replace(/"$/,"").trim(),rp=_f[2].replace(/^"/,"").replace(/"$/,"").trim();tp==="Content"&&rp===","&&(rp=np.replace(/"/g,"").replace(/,$/,"").trim());var op=this.getCurrentNode(),lp=op.name;if(lp==="Properties70"){this.parseNodeSpecialProperty(Ju,tp,rp);return}if(tp==="C"){var up=rp.split(",").slice(1),cp=parseInt(up[0]),Ap=parseInt(up[1]),yp=rp.split(",").slice(3);yp=yp.map(function(Ip){return Ip.trim().replace(/^"/,"")}),tp="connections",rp=[cp,Ap],ip(rp,yp),op[tp]===void 0&&(op[tp]=[])}tp==="Node"&&(op.id=rp),tp in op&&Array.isArray(op[tp])?op[tp].push(rp):tp!=="a"?op[tp]=rp:op.a=rp,this.setCurrentProp(op,tp),tp==="a"&&rp.slice(-1)!==","&&(op.a=_h(rp))},parseNodePropertyContinued:function(Ju){var _f=this.getCurrentNode();_f.a+=Ju,Ju.slice(-1)!==","&&(_f.a=_h(_f.a))},parseNodeSpecialProperty:function(Ju,_f,np){var tp=np.split('",').map(function(Ap){return Ap.trim().replace(/^\"/,"").replace(/\s/,"_")}),rp=tp[0],op=tp[1],lp=tp[2],up=tp[3],cp=tp[4];switch(op){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":cp=parseFloat(cp);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":cp=_h(cp);break}this.getPrevNode()[rp]={type:op,type2:lp,flag:up,value:cp},this.setCurrentProp(this.getPrevNode(),rp)}};function Vu(){}Vu.prototype={constructor:Vu,parse:function(Ju){var _f=new Uu(Ju);_f.skip(23);var np=_f.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+np);for(var tp=new Gu;!this.endOfContent(_f);){var rp=this.parseNode(_f,np);rp!==null&&tp.add(rp.name,rp)}return tp},endOfContent:function(Ju){return Ju.size()%16===0?(Ju.getOffset()+160+16&-16)>=Ju.size():Ju.getOffset()+160+16>=Ju.size()},parseNode:function(Ju,_f){var np={},tp=_f>=7500?Ju.getUint64():Ju.getUint32(),rp=_f>=7500?Ju.getUint64():Ju.getUint32();_f>=7500?Ju.getUint64():Ju.getUint32();var op=Ju.getUint8(),lp=Ju.getString(op);if(tp===0)return null;for(var up=[],cp=0;cp<rp;cp++)up.push(this.parseProperty(Ju));var Ap=up.length>0?up[0]:"",yp=up.length>1?up[1]:"",Ip=up.length>2?up[2]:"";for(np.singleProperty=rp===1&&Ju.getOffset()===tp;tp>Ju.getOffset();){var Ep=this.parseNode(Ju,_f);Ep!==null&&this.parseSubNode(lp,np,Ep)}return np.propertyList=up,typeof Ap=="number"&&(np.id=Ap),yp!==""&&(np.attrName=yp),Ip!==""&&(np.attrType=Ip),lp!==""&&(np.name=lp),np},parseSubNode:function(Ju,_f,np){if(np.singleProperty===!0){var tp=np.propertyList[0];Array.isArray(tp)?(_f[np.name]=np,np.a=tp):_f[np.name]=tp}else if(Ju==="Connections"&&np.name==="C"){var rp=[];np.propertyList.forEach(function(Ip,Ep){Ep!==0&&rp.push(Ip)}),_f.connections===void 0&&(_f.connections=[]),_f.connections.push(rp)}else if(np.name==="Properties70"){var op=Object.keys(np);op.forEach(function(Ip){_f[Ip]=np[Ip]})}else if(Ju==="Properties70"&&np.name==="P"){var lp=np.propertyList[0],up=np.propertyList[1],cp=np.propertyList[2],Ap=np.propertyList[3],yp;lp.indexOf("Lcl ")===0&&(lp=lp.replace("Lcl ","Lcl_")),up.indexOf("Lcl ")===0&&(up=up.replace("Lcl ","Lcl_")),up==="Color"||up==="ColorRGB"||up==="Vector"||up==="Vector3D"||up.indexOf("Lcl_")===0?yp=[np.propertyList[4],np.propertyList[5],np.propertyList[6]]:yp=np.propertyList[4],_f[lp]={type:up,type2:cp,flag:Ap,value:yp}}else _f[np.name]===void 0?typeof np.id=="number"?(_f[np.name]={},_f[np.name][np.id]=np):_f[np.name]=np:np.name==="PoseNode"?(Array.isArray(_f[np.name])||(_f[np.name]=[_f[np.name]]),_f[np.name].push(np)):_f[np.name][np.id]===void 0&&(_f[np.name][np.id]=np)},parseProperty:function(Ju){var _f=Ju.getString(1);switch(_f){case"C":return Ju.getBoolean();case"D":return Ju.getFloat64();case"F":return Ju.getFloat32();case"I":return Ju.getInt32();case"L":return Ju.getInt64();case"R":var np=Ju.getUint32();return Ju.getArrayBuffer(np);case"S":var np=Ju.getUint32();return Ju.getString(np);case"Y":return Ju.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var tp=Ju.getUint32(),rp=Ju.getUint32(),op=Ju.getUint32();if(rp===0)switch(_f){case"b":case"c":return Ju.getBooleanArray(tp);case"d":return Ju.getFloat64Array(tp);case"f":return Ju.getFloat32Array(tp);case"i":return Ju.getInt32Array(tp);case"l":return Ju.getInt64Array(tp)}typeof Zlib=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var lp=new Zlib.Inflate(new Uint8Array(Ju.getArrayBuffer(op))),up=new Uu(lp.decompress().buffer);switch(_f){case"b":case"c":return up.getBooleanArray(tp);case"d":return up.getFloat64Array(tp);case"f":return up.getFloat32Array(tp);case"i":return up.getInt32Array(tp);case"l":return up.getInt64Array(tp)}default:throw new Error("THREE.FBXLoader: Unknown property type "+_f)}}};function Uu(Ju,_f){this.dv=new DataView(Ju),this.offset=0,this.littleEndian=_f!==void 0?_f:!0}Uu.prototype={constructor:Uu,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(Ju){this.offset+=Ju},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(Ju){for(var _f=[],np=0;np<Ju;np++)_f.push(this.getBoolean());return _f},getUint8:function(){var Ju=this.dv.getUint8(this.offset);return this.offset+=1,Ju},getInt16:function(){var Ju=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,Ju},getInt32:function(){var Ju=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,Ju},getInt32Array:function(Ju){for(var _f=[],np=0;np<Ju;np++)_f.push(this.getInt32());return _f},getUint32:function(){var Ju=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,Ju},getInt64:function(){var Ju,_f;return this.littleEndian?(Ju=this.getUint32(),_f=this.getUint32()):(_f=this.getUint32(),Ju=this.getUint32()),_f&2147483648?(_f=~_f&4294967295,Ju=~Ju&4294967295,Ju===4294967295&&(_f=_f+1&4294967295),Ju=Ju+1&4294967295,-(_f*4294967296+Ju)):_f*4294967296+Ju},getInt64Array:function(Ju){for(var _f=[],np=0;np<Ju;np++)_f.push(this.getInt64());return _f},getUint64:function(){var Ju,_f;return this.littleEndian?(Ju=this.getUint32(),_f=this.getUint32()):(_f=this.getUint32(),Ju=this.getUint32()),_f*4294967296+Ju},getFloat32:function(){var Ju=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,Ju},getFloat32Array:function(Ju){for(var _f=[],np=0;np<Ju;np++)_f.push(this.getFloat32());return _f},getFloat64:function(){var Ju=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,Ju},getFloat64Array:function(Ju){for(var _f=[],np=0;np<Ju;np++)_f.push(this.getFloat64());return _f},getArrayBuffer:function(Ju){var _f=this.dv.buffer.slice(this.offset,this.offset+Ju);return this.offset+=Ju,_f},getString:function(Ju){for(var _f=[],np=0;np<Ju;np++)_f[np]=this.getUint8();var tp=_f.indexOf(0);return tp>=0&&(_f=_f.slice(0,tp)),LoaderUtils.decodeText(new Uint8Array(_f))}};function Gu(){}Gu.prototype={constructor:Gu,add:function(Ju,_f){this[Ju]=_f}};function zu(Ju){var _f="Kaydara FBX Binary  \0";return Ju.byteLength>=_f.length&&_f===ep(Ju,0,_f.length)}function Hu(Ju){var _f=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],np=0;function tp(lp){var up=Ju[lp-1];return Ju=Ju.slice(np+lp),np++,up}for(var rp=0;rp<_f.length;++rp){var op=tp(1);if(op===_f[rp])return!1}return!0}function ju(Ju){var _f=/FBXVersion: (\d+)/,np=Ju.match(_f);if(np){var tp=parseInt(np[1]);return tp}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Qu(Ju){return Ju/46186158e3}var Xu=[];function Ku(Ju,_f,np,tp){var rp;switch(tp.mappingType){case"ByPolygonVertex":rp=Ju;break;case"ByPolygon":rp=_f;break;case"ByVertice":rp=np;break;case"AllSame":rp=tp.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+tp.mappingType)}tp.referenceType==="IndexToDirect"&&(rp=tp.indices[rp]);var op=rp*tp.dataSize,lp=op+tp.dataSize;return ap(Xu,tp.buffer,op,lp)}var Wu=new Euler,qu=new Vector3;function Yu(Ju){var _f=new Matrix4,np=new Matrix4,tp=new Matrix4,rp=new Matrix4,op=new Matrix4,lp=new Matrix4,up=new Matrix4,cp=new Matrix4,Ap=new Matrix4,yp=new Matrix4,Ip=new Matrix4,Ep=Ju.inheritType?Ju.inheritType:0;if(Ju.translation&&_f.setPosition(qu.fromArray(Ju.translation)),Ju.preRotation){var Vp=Ju.preRotation.map(MathUtils.degToRad);Vp.push(Ju.eulerOrder),np.makeRotationFromEuler(Wu.fromArray(Vp))}if(Ju.rotation){var Vp=Ju.rotation.map(MathUtils.degToRad);Vp.push(Ju.eulerOrder),tp.makeRotationFromEuler(Wu.fromArray(Vp))}if(Ju.postRotation){var Vp=Ju.postRotation.map(MathUtils.degToRad);Vp.push(Ju.eulerOrder),rp.makeRotationFromEuler(Wu.fromArray(Vp))}Ju.scale&&op.scale(qu.fromArray(Ju.scale)),Ju.scalingOffset&&up.setPosition(qu.fromArray(Ju.scalingOffset)),Ju.scalingPivot&&lp.setPosition(qu.fromArray(Ju.scalingPivot)),Ju.rotationOffset&&cp.setPosition(qu.fromArray(Ju.rotationOffset)),Ju.rotationPivot&&Ap.setPosition(qu.fromArray(Ju.rotationPivot)),Ju.parentMatrixWorld&&(yp=Ju.parentMatrixWorld);var $p=np.multiply(tp).multiply(rp),kp=new Matrix4;yp.extractRotation(kp);var Bp=new Matrix4;Bp.copyPosition(yp);var fp=new Matrix4;fp.getInverse(kp).multiply(yp);var dp=new Matrix4;if(Ep===0)dp.copy(kp).multiply($p).multiply(fp).multiply(op);else if(Ep===1)dp.copy(kp).multiply(fp).multiply($p).multiply(op);else{var bp=new Matrix4().getInverse(op),gp=new Matrix4().multiply(fp).multiply(bp);dp.copy(kp).multiply($p).multiply(gp).multiply(op)}var wp=new Matrix4().getInverse(Ap),Sp=new Matrix4().getInverse(lp),Cp=new Matrix4;Cp.copy(_f).multiply(cp).multiply(Ap).multiply(np).multiply(tp).multiply(rp).multiply(wp).multiply(up).multiply(lp).multiply(op).multiply(Sp);var Lp=new Matrix4().copyPosition(Cp),zp=new Matrix4().copy(yp).multiply(Lp);return Ip.copyPosition(zp),Cp=new Matrix4().multiply(Ip).multiply(dp),Cp}function Zu(Ju){Ju=Ju||0;var _f=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return Ju===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),_f[0]):_f[Ju]}function _h(Ju){var _f=Ju.split(",").map(function(np){return parseFloat(np)});return _f}function ep(Ju,_f,np){return _f===void 0&&(_f=0),np===void 0&&(np=Ju.byteLength),LoaderUtils.decodeText(new Uint8Array(Ju,_f,np))}function ip(Ju,_f){for(var np=0,tp=Ju.length,rp=_f.length;np<rp;np++,tp++)Ju[tp]=_f[np]}function ap(Ju,_f,np,tp){for(var rp=np,op=0;rp<tp;rp++,op++)Ju[op]=_f[rp];return Ju}function sp(Ju,_f,np){return Ju.slice(0,_f).concat(np).concat(Ju.slice(_f))}return Ru})();var ed=Object.defineProperty,td=(_u,$u,Bu)=>$u in _u?ed(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Bu}):_u[$u]=Bu,v=(_u,$u,Bu)=>(td(_u,typeof $u!="symbol"?$u+"":$u,Bu),Bu);Promise.resolve();var Qn;typeof self>"u"&&typeof process<"u"&&process.hrtime?Qn=function(){var _u=process.hrtime();return _u[0]*1e3+_u[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?Qn=self.performance.now.bind(self.performance):Date.now!==void 0?Qn=Date.now:Qn=function(){return new Date().getTime()};var an=Qn,$l=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var $u=this;return Object.keys(this._tweens).map(function(Bu){return $u._tweens[Bu]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function($u){this._tweens[$u.getId()]=$u,this._tweensAddedDuringUpdate[$u.getId()]=$u},_u.prototype.remove=function($u){delete this._tweens[$u.getId()],delete this._tweensAddedDuringUpdate[$u.getId()]},_u.prototype.update=function($u,Bu){$u===void 0&&($u=an()),Bu===void 0&&(Bu=!1);var Ru=Object.keys(this._tweens);if(Ru.length===0)return!1;for(;Ru.length>0;){this._tweensAddedDuringUpdate={};for(var Lu=0;Lu<Ru.length;Lu++){var Ou=this._tweens[Ru[Lu]],Fu=!Bu;Ou&&Ou.update($u,Fu)===!1&&!Bu&&delete this._tweens[Ru[Lu]]}Ru=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),ec=new $l,St=ec;St.getAll.bind(St);St.removeAll.bind(St);St.add.bind(St);St.remove.bind(St);St.update.bind(St);function Wt(){return((1+Math.random())*65536|0).toString(16).substring(1)}function it(){return(Wt()+Wt()+"-"+Wt()+"-4"+Wt().substr(0,3)+"-"+Wt()+"-"+Wt()+Wt()+Wt()).toLowerCase()}function kd(_u){return typeof Symbol>"u"?`$Symbol<${_u}>$`:Symbol(_u)}const Un=kd("$$EVENT$$");function Ai(_u){return _u[Un]||(_u[Un]={}),_u[Un]}function Dd(_u){_u[Un]||delete _u[Un]}class si{hasListener($u){const Bu=Ai(this);return Boolean((Bu==null?void 0:Bu[$u])&&Bu[$u].length>0)}on($u,Bu,Ru){const Lu=Ai(this);return Lu[$u]||(Lu[$u]=[]),Lu[$u].push([Bu,Ru||!1]),()=>this.off($u,Bu)}once($u,Bu){return this.on($u,Bu,!0)}off($u,Bu){if($u===void 0){Dd(this);return}const Ru=Ai(this);if(Ru[$u]||(Ru[$u]=[]),Bu===void 0){Ru[$u].length=0;return}let Lu=0;for(;Lu<Ru[$u].length&&Ru[$u][Lu][0]!==Bu;Lu++);Lu<Ru[$u].length&&Ru[$u].splice(Lu,1)}emit($u,...Bu){let Ru=!1;const Lu=Ai(this)[$u]||[];for(let Ou of Lu.slice()){const[Fu,Nu=!1]=Ou,Vu=Fu(...Bu);Nu&&this.off($u,Fu),Vu===!1&&(Ru=!0)}return Ru}}function tc(..._u){const $u=new Vector3;return _u.forEach(Bu=>{$u.add(Bu)}),$u.divideScalar(_u.length),$u}function Qi(_u,$u){const Bu=Math.round(_u);return Bu%2===0?Bu:Bu+Number($u!=null&&$u.smaller?-1:1)}const Ld=({x:_u,y:$u,z:Bu})=>new Vector3(_u,$u,Bu),Ht=([_u,$u,Bu])=>new Vector3(_u,$u,Bu),Kn=_u=>_u instanceof Vector3?_u:Array.isArray(_u)?Ht(_u):Ld(_u),nc="1.0.2",Md=`CSS3DObjectPlus@${nc}`,zd=.00216,Od=.003;class ic extends CSS3DObject{constructor($u,Bu,Ru=Od,Lu=1,Ou="front"){const Fu=Math.max(zd,Ru),Nu=Bu[0].distanceTo(Bu[1]),Vu=Bu[1].distanceTo(Bu[2]),Uu=Qi(Nu/Ru*Lu),Gu=Qi(Vu/Ru*Lu),zu=tc(...Bu);let Hu;if(Fu===Ru)$u.style.width=`${Uu}px`,$u.style.height=`${Gu}px`,Hu=$u;else{const Yu=document.createElement("div");Yu.style.width=`${Uu}px`,Yu.style.height=`${Gu}px`,Yu.style.pointerEvents="none";const Zu=Ru/Fu;$u.style.position="absolute",$u.style.left="0",$u.style.top="0",$u.style.width=`${Zu*Uu}px`,$u.style.height=`${Zu*Gu}px`,Yu.appendChild($u),Hu=Yu}if(super(Hu),v(this,"version",nc),v(this,"width"),v(this,"height"),v(this,"domWidthPx"),v(this,"domHeightPx"),v(this,"cornerPoints"),v(this,"ratio"),v(this,"container"),v(this,"centerPosition"),v(this,"mode","front"),v(this,"hooks",new si),v(this,"isCSS3DObjectPlus",!0),this.scale.set(Fu,Fu,Fu),this.cornerPoints=Bu,this.ratio=Ru,this.container=$u,this.mode=Ou,Fu===Ru)this.width=Nu,this.height=Vu,this.domWidthPx=Uu,this.domHeightPx=Gu,this.centerPosition=zu;else{const Yu=Ru/Fu;this.width=Yu*Nu,this.height=Yu*Vu,this.domWidthPx=Yu*Uu,this.domHeightPx=Yu*Gu,this.centerPosition=new Vector3().subVectors(zu,Bu[0]).multiplyScalar(Yu).add(Bu[0])}$u.classList.add(`${Md}__container`);const ju=new Vector3().subVectors(Bu[1],Bu[0]),Qu=new Vector3().subVectors(Bu[3],Bu[0]),Xu=new Vector3().crossVectors(ju,Qu).normalize();this.lookAt(Xu);const Ku=this.up.clone().applyQuaternion(this.quaternion),Wu=Qu.clone(),qu=new Vector3().crossVectors(Ku,Wu).normalize();this.rotateOnWorldAxis(qu,Ku.angleTo(Wu)),this.position.copy(zu)}changeMode($u,Bu){if($u===this.mode)return;const Ru=this.mode;this.mode=$u,this.hooks.emit("changeMode",$u,Ru,Bu)}applyScaleMatrix4($u){this.scale.applyMatrix4($u),this.hooks.emit("applyScaleMatrix4",$u)}applyMatrix4($u){super.applyMatrix4($u),this.hooks.emit("applyMatrix4",$u)}applyQuaternion($u){return super.applyQuaternion($u),this.hooks.emit("applyQuaternion",$u),this}}const jd="v2.0.1",sc="CSS3DRenderer",rn=`${sc}@${jd}`,vr=_u=>`${rn}--${_u}`,ge={};class oc{constructor(){v(this,"hooks",new si),v(this,"state",{enabled:!0,visible:!0,disposed:!1}),v(this,"store",{rendered:!1,disposers:[],frontModeCSS3DObjects:{},behindModeCSS3DObjects:{}}),v(this,"create3DElement",($u,Bu,Ru)=>{if(this.state.disposed)return this.disposedErrorLog();const Lu=(()=>{const tp={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none"};return Object.assign(tp,Ru)})(),Ou=Bu.map(Kn);if((Ou==null?void 0:Ou.length)<4)return console.error(`${rn}: requires 4 point but params may have fewer`);const{ratio:Fu,devicePixelRatio:Nu,mode:Vu,autoRender:Uu,container:Gu,pointerEvents:zu}=Lu,Hu=[],{css3DObject:ju,opacityMesh:Qu}=this.createObject(Ou,{ratio:Fu,dpr:Nu,container:Gu,mode:Vu,pointerEvents:zu});Gu.id=`container--${ju.uuid}`;const Xu=Vu==="front"&&!ge.frontModeStore,Ku=Vu==="behind"&&!ge.behindModeStore;Vu==="front"&&this.initGlobalModeStore("front"),Vu==="behind"&&this.initGlobalModeStore("behind",Lu.scene),ju.hooks.on("changeMode",(tp,rp,op)=>{var lp,up,cp;if(tp===rp)return;tp==="front"&&this.initGlobalModeStore("front"),tp==="behind"&&this.initGlobalModeStore("behind",op);const Ap=rp==="front"?ge.frontModeStore:ge.behindModeStore,yp=tp==="front"?ge.frontModeStore:ge.behindModeStore,Ip=rp==="behind"?this.store.behindModeCSS3DObjects:this.store.frontModeCSS3DObjects,Ep=tp==="behind"?this.store.behindModeCSS3DObjects:this.store.frontModeCSS3DObjects;if(!Ip||!Ep)return console.error(`${rn}: changeMode error: prevObjects or nextObjects is undefined`);const Vp=Ip[ju.uuid];if(!Vp)return console.error(`${rn}: changeMode error: prevObject is undefined`);if(tp==="behind"){const $p=(lp=Vp.opacityMesh)!=null?lp:this.createOpacityMesh(Vp.css3DObject);Ap==null||Ap.css3DScene.remove(Vp.css3DObject),Ep[ju.uuid]={css3DObject:ju,opacityMesh:$p,visible:!0,enabled:!0,mode:tp,scene:op},yp==null||yp.css3DScene.add(ju),op==null||op.add($p)}tp==="front"&&(Ap==null||Ap.css3DScene.remove(Vp.css3DObject),(cp=(up=Ip[ju.uuid])==null?void 0:up.scene)==null||cp.remove(Vp.opacityMesh),Ep[ju.uuid]={css3DObject:ju,visible:!0,enabled:!0,mode:tp},yp==null||yp.css3DScene.add(ju)),tp==="behind"&&this.appendToElement(ge.behindModeContainer,"behind"),tp==="front"&&this.appendToElement(ge.frontModeContainer,"front"),this.render($u),console.log("change success")});const Wu=Vu==="front"?ge.frontModeStore:ge.behindModeStore,{css3DScene:qu,css3DRenderer:Yu}=Wu,Zu=(()=>{const tp=()=>{var rp,op;const lp=ju.mode;if(lp==="front")this.store.frontModeCSS3DObjects[ju.uuid]={visible:!0,enabled:!0,css3DObject:ju,mode:"front"};else{if(!Lu.scene)return;this.store.behindModeCSS3DObjects[ju.uuid]={visible:!0,enabled:!0,css3DObject:ju,opacityMesh:Qu,mode:"behind",scene:Lu.scene}}qu.getObjectById(ju.id)||qu.add(ju),lp==="behind"&&Qu&&((rp=Lu.scene)!=null&&rp.getObjectById(Qu.id)||(op=Lu.scene)==null||op.add(Qu),Hu.push(()=>{var up;return Qu&&((up=Lu.scene)==null?void 0:up.remove(Qu))}))};return Xu||Ku?(Yu.domElement.style.position="absolute",Yu.domElement.style.top="0",Yu.domElement.style.userSelect="none",Yu.domElement.style.pointerEvents="none",Yu.domElement.classList.add(vr(Vu)),()=>{tp(),this.render($u)}):(this.store.rendered=!0,()=>tp())})(),_h=Vu==="front"?ge.frontModeContainer:ge.behindModeContainer;if(_h){this.appendToElement(_h,Vu);const tp=Vu==="front"?ge.frontModeStore:ge.behindModeStore;tp&&(tp.appendedToPage=!0)}const ep=tp=>this.setVisibleById(ju.uuid,tp),ip=tp=>this.setEnabledById(ju.uuid,tp),ap=()=>ep(!0),sp=()=>ep(!1),Ju=()=>ip(!0),_f=()=>ip(!1),np=()=>(delete this.store.frontModeCSS3DObjects[ju.uuid],delete this.store.behindModeCSS3DObjects[ju.uuid],Hu.forEach(tp=>tp==null?void 0:tp()),qu.remove(ju),qu.children.length===0&&(typeof Wu.requestAnimationFrameId=="number"&&cancelAnimationFrame(Wu.requestAnimationFrameId),Yu.domElement.remove(),Vu==="front"&&(ge.frontModeStore=void 0),Vu==="behind"&&(ge.behindModeStore=void 0),ge.frontModeResizeObserver=void 0,ge.behindModeResizeObserver=void 0),!0);return this.store.disposers.push(np),Uu&&Zu(),{id:ju.uuid,container:Gu,dispose:np,css3DObject:ju,render:Uu?void 0:Zu,show:ap,hide:sp,setVisible:ep,disable:_f,enable:Ju,setEnabled:ip,appendToElement:tp=>this.appendToElement(tp,Vu)}}),v(this,"setVisibleById",($u,Bu)=>{var Ru;const Lu=(Ru=this.store.frontModeCSS3DObjects[$u])!=null?Ru:this.store.behindModeCSS3DObjects[$u];if(!Lu)return console.error("id not found",$u);Lu.visible=Bu,this.state.visible&&(Lu.css3DObject.visible=Bu,Lu.mode==="behind"&&(Lu.opacityMesh.visible=Bu))}),v(this,"setEnabledById",($u,Bu)=>{var Ru,Lu,Ou;const Fu=(Ru=this.store.frontModeCSS3DObjects[$u])!=null?Ru:this.store.behindModeCSS3DObjects[$u];if(!Fu)return;const Nu=Fu.mode==="front"?(Lu=ge.frontModeStore)==null?void 0:Lu.css3DScene:(Ou=ge.behindModeStore)==null?void 0:Ou.css3DScene;!Nu||(Bu?(Nu.add(Fu.css3DObject),Fu.mode==="behind"&&Fu.scene.add(Fu.opacityMesh)):(Nu.remove(Fu.css3DObject),Fu.mode==="behind"&&Fu.scene.remove(Fu.opacityMesh)),Fu.enabled=Bu)}),v(this,"createObject",($u,Bu)=>{const{ratio:Ru,dpr:Lu,container:Ou,mode:Fu,pointerEvents:Nu}=Bu,Vu=new ic(Ou,$u,Ru,Lu,Fu);Ou.style.pointerEvents=Nu,Ou.classList.add(`${sc}__container`);const Uu=Fu==="behind"?this.createOpacityMesh(Vu):void 0;return{css3DObject:Vu,opacityMesh:Uu}}),v(this,"createOpacityMesh",$u=>{const{domWidthPx:Bu,domHeightPx:Ru}=$u,Lu=new MeshBasicMaterial({opacity:0,color:0,transparent:!1,side:DoubleSide}),Ou=new PlaneGeometry(Bu,Ru),Fu=new Mesh(Ou,Lu);return Fu.name=vr("mesh"),Fu.position.copy($u.position),Fu.rotation.copy($u.rotation),Fu.scale.copy($u.scale),$u.hooks.on("applyMatrix4",Nu=>Fu.applyMatrix4(Nu)),$u.hooks.on("applyQuaternion",Nu=>Fu.applyQuaternion(Nu)),$u.hooks.on("applyScaleMatrix4",Nu=>Fu.scale.applyMatrix4(Nu)),Fu}),v(this,"createResizeObserver",($u,Bu,Ru=!0)=>{if(!$u)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const Lu=()=>{const Fu=Qi($u.clientWidth,{smaller:!0}),Nu=Qi($u.clientHeight,{smaller:!0});Bu(Fu,Nu)};if(typeof ResizeObserver>"u"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>Lu(),unobserve:()=>{}};const Ou=new ResizeObserver(Lu);return Ru&&Lu(),{observe:()=>Ou.observe($u),unobserve:()=>Ou.unobserve($u)}}),v(this,"disposedErrorLog",()=>{console.error(`${rn} is disposed`)})}getCurrentState(){return this.state}setState($u,Bu={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();const Ru={...this.state};this.state=Object.assign(this.state,$u),Ru.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Ru.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Ru,userAction:Bu.userAction})}dispose(){this.store.disposers.forEach($u=>$u==null?void 0:$u()),this.store.disposers=[],this.hooks.emit("dispose"),this.state.disposed=!0}async show({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:$u}),this.hooks.emit("show",{userAction:$u})}async hide({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:$u}),this.hooks.emit("hide",{userAction:$u})}enable({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:$u}),this.hooks.emit("enable",{userAction:$u})}disable({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:$u}),this.hooks.emit("disable",{userAction:$u})}setContainer($u,Bu){Bu==="front"?ge.frontModeContainer=$u:ge.behindModeContainer=$u}appendToElement($u,Bu){const Ru=Bu==="front"?ge.frontModeStore:ge.behindModeStore;if(!Ru){if(Bu==="front"&&!ge.frontModeContainer){if(!$u)throw new Error(`${rn} Cannot append to container: front mode but container is ${$u}`);ge.frontModeContainer=$u}if(Bu==="behind"&&!ge.behindModeContainer){if(!$u)throw new Error(`${rn} Cannot append to container: behind mode but container is ${$u}`);ge.behindModeContainer=$u}return}if(Ru.appendedToPage)return;const Lu=Bu==="behind"?ge.behindModeContainer:ge.frontModeContainer;if(!Lu)return console.error("wrapper is undefined");if(Lu.appendChild(Ru.css3DRenderer.domElement),Bu==="behind"&&!ge.behindModeResizeObserver){const Ou=(Vu,Uu)=>{var Gu;(Gu=ge.behindModeStore)==null||Gu.css3DRenderer.setSize(Vu,Uu)},{observe:Fu,unobserve:Nu}=this.createResizeObserver(Lu,Ou,!0);ge.behindModeResizeObserver={observe:Fu,unobserve:Nu},Fu(),this.store.disposers.push(Nu)}if(Bu==="front"&&!ge.frontModeResizeObserver){const Ou=(Vu,Uu)=>{var Gu;(Gu=ge.frontModeStore)==null||Gu.css3DRenderer.setSize(Vu,Uu)},{observe:Fu,unobserve:Nu}=this.createResizeObserver(Lu,Ou,!0);ge.frontModeResizeObserver={observe:Fu,unobserve:Nu},Fu(),this.store.disposers.push(Nu)}Ru.appendedToPage=!0}render($u){const Bu=ge.behindModeStore,Ru=ge.frontModeStore;if(Bu&&Object.keys(this.store.behindModeCSS3DObjects).length>0&&!Bu.requestAnimationFrameId){const Lu=()=>{const Ou=requestAnimationFrame(Lu);Bu.requestAnimationFrameId=Ou,Bu.css3DRenderer.render(Bu.css3DScene,$u)};Lu()}if(Ru&&Object.keys(this.store.frontModeCSS3DObjects).length>0&&!Ru.requestAnimationFrameId){const Lu=()=>{const Ou=requestAnimationFrame(Lu);Ru.requestAnimationFrameId=Ou,Ru.css3DRenderer.render(Ru.css3DScene,$u)};Lu()}Object.keys(this.store.frontModeCSS3DObjects).length===0&&(Ru==null?void 0:Ru.requestAnimationFrameId)!==void 0&&(cancelAnimationFrame(Ru.requestAnimationFrameId),Ru.requestAnimationFrameId=void 0),Object.keys(this.store.behindModeCSS3DObjects).length===0&&(Bu==null?void 0:Bu.requestAnimationFrameId)!==void 0&&(cancelAnimationFrame(Bu.requestAnimationFrameId),Bu.requestAnimationFrameId=void 0)}initGlobalModeStore($u,Bu){const Ru=$u==="front"&&!ge.frontModeStore;$u==="behind"&&!ge.behindModeStore&&(ge.behindModeStore={scene:Bu,css3DScene:new Scene,css3DRenderer:new CSS3DRenderer}),Ru&&(ge.frontModeStore={css3DScene:new Scene,css3DRenderer:new CSS3DRenderer})}async handleShow(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=$u.visible}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=$u.visible,$u.opacityMesh.visible=$u.visible})}async handleHide(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=!1}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=!1,$u.opacityMesh.visible=!1})}handleEnable(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{var Bu;!$u.enabled||(Bu=ge.frontModeStore)==null||Bu.css3DScene.add($u.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{var Bu,Ru;!$u.enabled||((Bu=ge.behindModeStore)==null||Bu.css3DScene.add($u.css3DObject),(Ru=ge.behindModeStore)==null||Ru.scene.add($u.opacityMesh))})}handleDisable(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{var Bu;(Bu=ge.frontModeStore)==null||Bu.css3DScene.remove($u.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{var Bu,Ru;(Bu=ge.behindModeStore)==null||Bu.css3DScene.remove($u.css3DObject),(Ru=ge.behindModeStore)==null||Ru.scene.remove($u.opacityMesh)})}}const Bd="v2.0.1",br=`CSS3DRenderPlugin@${Bd}`;class Rd extends oc{constructor($u){super(),v(this,"five"),v(this,"behindFiveContainer"),v(this,"staticPrefix","//vrlab-static.ljcdn.com"),v(this,"create3DDomContainer",(Bu,Ru)=>{if(this.state.disposed)return;const Lu=(()=>{var ju;(Ru==null?void 0:Ru.dpr)!==void 0&&console.warn(`${br}: please use "config.devicePixelRatio" replace "config.dpr"`);const Qu={ratio:.00216,devicePixelRatio:(ju=Ru==null?void 0:Ru.dpr)!=null?ju:1,mode:"front",autoRender:!0};return Object.assign(Qu,Ru,(Ru==null?void 0:Ru.mode)==="behind"?{scene:this.five.scene}:void 0)})(),Ou=this.five.getElement();if(!Ou){console.error(`${br}: five.getElement() is ${Ou}`);return}const{autoRender:Fu,mode:Nu}=Lu,Vu=Nu==="front"?Ou.parentElement:Lu.behindFiveContainer;this.setContainer(Vu||document.body,"front");const Uu=this.getBehindFiveElement();Uu&&this.setContainer(Uu,"behind"),this.appendToElement(Vu||document.body,Nu);const Gu=this.create3DElement(this.five.camera,Bu,{...Lu,autoRender:!1});if(!Gu)return;const zu=Gu.render,Hu=()=>{var ju;Nu==="front"&&zu(),Nu==="behind"&&((ju=this.five.model)!=null&&ju.loaded?zu():this.five.once("modelLoaded",()=>zu()))};return Fu&&Hu(),{...Gu,render:Fu?void 0:Hu}}),this.five=$u}disposeAll(){return this.dispose()}setState(...$u){const Bu=super.setState(...$u);return this.five.needsRender=!0,Bu}getBehindFiveElement(){var $u;const{behindFiveContainer:Bu}=this;if(Bu)return Bu;const Ru=document.createElement("div");Ru.style.position="absolute",Ru.style.pointerEvents="none",Ru.style.top="0",Ru.style.left="0",Ru.style.width="100%",Ru.style.height="100%",this.behindFiveContainer=Ru;const Lu=this.five.getElement();if(!Lu)return;const Ou=($u=Lu==null?void 0:Lu.style.position)!=null?$u:getComputedStyle(Lu);(!Ou||Ou==="static")&&console.warn("if you want to use css3DRenderPlugin behind mode, five element position is static, please set position to relative or absolute");const Fu=Lu==null?void 0:Lu.parentElement;if(Fu)return Fu.insertBefore(Ru,Lu),Ru}}const os=_u=>new Rd(_u);function ce(){}const Dn=_u=>_u;function ze(_u,$u){for(const Bu in $u)_u[Bu]=$u[Bu];return _u}function rc(_u){return _u()}function Ar(){return Object.create(null)}function Nt(_u){_u.forEach(rc)}function rs(_u){return typeof _u=="function"}function ue(_u,$u){return _u!=_u?$u==$u:_u!==$u||_u&&typeof _u=="object"||typeof _u=="function"}let yi;function kt(_u,$u){return yi||(yi=document.createElement("a")),yi.href=$u,_u===yi.href}function Hd(_u){return Object.keys(_u).length===0}function ln(_u,$u,Bu,Ru){if(_u){const Lu=ac(_u,$u,Bu,Ru);return _u[0](Lu)}}function ac(_u,$u,Bu,Ru){return _u[1]&&Ru?ze(Bu.ctx.slice(),_u[1](Ru($u))):Bu.ctx}function cn(_u,$u,Bu,Ru){if(_u[2]&&Ru){const Lu=_u[2](Ru(Bu));if($u.dirty===void 0)return Lu;if(typeof Lu=="object"){const Ou=[],Fu=Math.max($u.dirty.length,Lu.length);for(let Nu=0;Nu<Fu;Nu+=1)Ou[Nu]=$u.dirty[Nu]|Lu[Nu];return Ou}return $u.dirty|Lu}return $u.dirty}function un(_u,$u,Bu,Ru,Lu,Ou){if(Lu){const Fu=ac($u,Bu,Ru,Ou);_u.p(Fu,Lu)}}function dn(_u){if(_u.ctx.length>32){const $u=[],Bu=_u.ctx.length/32;for(let Ru=0;Ru<Bu;Ru++)$u[Ru]=-1;return $u}return-1}function lc(_u){const $u={};for(const Bu in _u)Bu[0]!=="$"&&($u[Bu]=_u[Bu]);return $u}function _i(_u,$u){const Bu={};$u=new Set($u);for(const Ru in _u)!$u.has(Ru)&&Ru[0]!=="$"&&(Bu[Ru]=_u[Ru]);return Bu}const cc=typeof window<"u";let uc=cc?()=>window.performance.now():()=>Date.now(),wo=cc?_u=>requestAnimationFrame(_u):ce;const kn=new Set;function dc(_u){kn.forEach($u=>{$u.c(_u)||(kn.delete($u),$u.f())}),kn.size!==0&&wo(dc)}function fc(_u){let $u;return kn.size===0&&wo(dc),{promise:new Promise(Bu=>{kn.add($u={c:_u,f:Bu})}),abort(){kn.delete($u)}}}function _(_u,$u){_u.appendChild($u)}function me(_u,$u,Bu){const Ru=Eo(_u);if(!Ru.getElementById($u)){const Lu=Q("style");Lu.id=$u,Lu.textContent=Bu,hc(Ru,Lu)}}function Eo(_u){if(!_u)return document;const $u=_u.getRootNode?_u.getRootNode():_u.ownerDocument;return $u&&$u.host?$u:_u.ownerDocument}function Fd(_u){const $u=Q("style");return hc(Eo(_u),$u),$u.sheet}function hc(_u,$u){return _(_u.head||_u,$u),$u.sheet}function N(_u,$u,Bu){_u.insertBefore($u,Bu||null)}function H(_u){_u.parentNode.removeChild(_u)}function Dt(_u,$u){for(let Bu=0;Bu<_u.length;Bu+=1)_u[Bu]&&_u[Bu].d($u)}function Q(_u){return document.createElement(_u)}function Te(_u){return document.createElementNS("http://www.w3.org/2000/svg",_u)}function He(_u){return document.createTextNode(_u)}function q(){return He(" ")}function Ce(){return He("")}function Oe(_u,$u,Bu,Ru){return _u.addEventListener($u,Bu,Ru),()=>_u.removeEventListener($u,Bu,Ru)}function Po(_u){return function($u){return $u.stopPropagation(),_u.call(this,$u)}}function C(_u,$u,Bu){Bu==null?_u.removeAttribute($u):_u.getAttribute($u)!==Bu&&_u.setAttribute($u,Bu)}function Wi(_u,$u){const Bu=Object.getOwnPropertyDescriptors(_u.__proto__);for(const Ru in $u)$u[Ru]==null?_u.removeAttribute(Ru):Ru==="style"?_u.style.cssText=$u[Ru]:Ru==="__value"?_u.value=_u[Ru]=$u[Ru]:Bu[Ru]&&Bu[Ru].set?_u[Ru]=$u[Ru]:C(_u,Ru,$u[Ru])}function Nd(_u){return Array.from(_u.childNodes)}function Xe(_u,$u){$u=""+$u,_u.wholeText!==$u&&(_u.data=$u)}function W(_u,$u,Bu,Ru){Bu===null?_u.style.removeProperty($u):_u.style.setProperty($u,Bu,Ru?"important":"")}let wi;function Gd(){if(wi===void 0){wi=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{wi=!0}}return wi}function en(_u,$u){getComputedStyle(_u).position==="static"&&(_u.style.position="relative");const Bu=Q("iframe");Bu.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),Bu.setAttribute("aria-hidden","true"),Bu.tabIndex=-1;const Ru=Gd();let Lu;return Ru?(Bu.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",Lu=Oe(window,"message",Ou=>{Ou.source===Bu.contentWindow&&$u()})):(Bu.src="about:blank",Bu.onload=()=>{Lu=Oe(Bu.contentWindow,"resize",$u)}),_(_u,Bu),()=>{(Ru||Lu&&Bu.contentWindow)&&Lu(),H(Bu)}}function ie(_u,$u,Bu){_u.classList[Bu?"add":"remove"]($u)}function pc(_u,$u,{bubbles:Bu=!1,cancelable:Ru=!1}={}){const Lu=document.createEvent("CustomEvent");return Lu.initCustomEvent(_u,Bu,Ru,$u),Lu}class Xi{constructor($u=!1){this.is_svg=!1,this.is_svg=$u,this.e=this.n=null}c($u){this.h($u)}m($u,Bu,Ru=null){this.e||(this.is_svg?this.e=Te(Bu.nodeName):this.e=Q(Bu.nodeName),this.t=Bu,this.c($u)),this.i(Ru)}h($u){this.e.innerHTML=$u,this.n=Array.from(this.e.childNodes)}i($u){for(let Bu=0;Bu<this.n.length;Bu+=1)N(this.t,this.n[Bu],$u)}p($u){this.d(),this.h($u),this.i(this.a)}d(){this.n.forEach(H)}}const Yi=new Map;let Ui=0;function Qd(_u){let $u=5381,Bu=_u.length;for(;Bu--;)$u=($u<<5)-$u^_u.charCodeAt(Bu);return $u>>>0}function _d(_u,$u){const Bu={stylesheet:Fd($u),rules:{}};return Yi.set(_u,Bu),Bu}function mc(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu=0){const Vu=16.666/Ru;let Uu=`{
`;for(let Ku=0;Ku<=1;Ku+=Vu){const Wu=$u+(Bu-$u)*Ou(Ku);Uu+=Ku*100+`%{${Fu(Wu,1-Wu)}}
`}const Gu=Uu+`100% {${Fu(Bu,1-Bu)}}
}`,zu=`__svelte_${Qd(Gu)}_${Nu}`,Hu=Eo(_u),{stylesheet:ju,rules:Qu}=Yi.get(Hu)||_d(Hu,_u);Qu[zu]||(Qu[zu]=!0,ju.insertRule(`@keyframes ${zu} ${Gu}`,ju.cssRules.length));const Xu=_u.style.animation||"";return _u.style.animation=`${Xu?`${Xu}, `:""}${zu} ${Ru}ms linear ${Lu}ms 1 both`,Ui+=1,zu}function Ks(_u,$u){const Bu=(_u.style.animation||"").split(", "),Ru=Bu.filter($u?Ou=>Ou.indexOf($u)<0:Ou=>Ou.indexOf("__svelte")===-1),Lu=Bu.length-Ru.length;Lu&&(_u.style.animation=Ru.join(", "),Ui-=Lu,Ui||Wd())}function Wd(){wo(()=>{Ui||(Yi.forEach(_u=>{const{ownerNode:$u}=_u.stylesheet;$u&&H($u)}),Yi.clear())})}let $n;function Vn(_u){$n=_u}function vn(){if(!$n)throw new Error("Function called outside component initialization");return $n}function Co(_u){vn().$$.before_update.push(_u)}function mt(_u){vn().$$.on_mount.push(_u)}function Io(_u){vn().$$.after_update.push(_u)}function tn(_u){vn().$$.on_destroy.push(_u)}function Xd(){const _u=vn();return($u,Bu,{cancelable:Ru=!1}={})=>{const Lu=_u.$$.callbacks[$u];if(Lu){const Ou=pc($u,Bu,{cancelable:Ru});return Lu.slice().forEach(Fu=>{Fu.call(_u,Ou)}),!Ou.defaultPrevented}return!0}}function $s(_u,$u){return vn().$$.context.set(_u,$u),$u}function ei(_u){return vn().$$.context.get(_u)}function Yd(_u,$u){const Bu=_u.$$.callbacks[$u.type];Bu&&Bu.slice().forEach(Ru=>Ru.call(this,$u))}const _n=[],We=[],Fi=[],yr=[],gc=Promise.resolve();let eo=!1;function vc(){eo||(eo=!0,gc.then(bc))}function Ud(){return vc(),gc}function Be(_u){Fi.push(_u)}const Ls=new Set;let Ei=0;function bc(){const _u=$n;do{for(;Ei<_n.length;){const $u=_n[Ei];Ei++,Vn($u),Vd($u.$$)}for(Vn(null),_n.length=0,Ei=0;We.length;)We.pop()();for(let $u=0;$u<Fi.length;$u+=1){const Bu=Fi[$u];Ls.has(Bu)||(Ls.add(Bu),Bu())}Fi.length=0}while(_n.length);for(;yr.length;)yr.pop()();eo=!1,Ls.clear(),Vn(_u)}function Vd(_u){if(_u.fragment!==null){_u.update(),Nt(_u.before_update);const $u=_u.dirty;_u.dirty=[-1],_u.fragment&&_u.fragment.p(_u.ctx,$u),_u.after_update.forEach(Be)}}let Nn;function Ac(){return Nn||(Nn=Promise.resolve(),Nn.then(()=>{Nn=null})),Nn}function Vi(_u,$u,Bu){_u.dispatchEvent(pc(`${$u?"intro":"outro"}${Bu}`))}const Ni=new Set;let Ut;function ve(){Ut={r:0,c:[],p:Ut}}function be(){Ut.r||Nt(Ut.c),Ut=Ut.p}function M(_u,$u){_u&&_u.i&&(Ni.delete(_u),_u.i($u))}function F(_u,$u,Bu,Ru){if(_u&&_u.o){if(Ni.has(_u))return;Ni.add(_u),Ut.c.push(()=>{Ni.delete(_u),Ru&&(Bu&&_u.d(1),Ru())}),_u.o($u)}else Ru&&Ru()}const yc={duration:0};function bn(_u,$u,Bu){let Ru=$u(_u,Bu),Lu=!1,Ou,Fu,Nu=0;function Vu(){Ou&&Ks(_u,Ou)}function Uu(){const{delay:zu=0,duration:Hu=300,easing:ju=Dn,tick:Qu=ce,css:Xu}=Ru||yc;Xu&&(Ou=mc(_u,0,1,Hu,zu,ju,Xu,Nu++)),Qu(0,1);const Ku=uc()+zu,Wu=Ku+Hu;Fu&&Fu.abort(),Lu=!0,Be(()=>Vi(_u,!0,"start")),Fu=fc(qu=>{if(Lu){if(qu>=Wu)return Qu(1,0),Vi(_u,!0,"end"),Vu(),Lu=!1;if(qu>=Ku){const Yu=ju((qu-Ku)/Hu);Qu(Yu,1-Yu)}}return Lu})}let Gu=!1;return{start(){Gu||(Gu=!0,Ks(_u),rs(Ru)?(Ru=Ru(),Ac().then(Uu)):Uu())},invalidate(){Gu=!1},end(){Lu&&(Vu(),Lu=!1)}}}function zn(_u,$u,Bu){let Ru=$u(_u,Bu),Lu=!0,Ou;const Fu=Ut;Fu.r+=1;function Nu(){const{delay:Vu=0,duration:Uu=300,easing:Gu=Dn,tick:zu=ce,css:Hu}=Ru||yc;Hu&&(Ou=mc(_u,1,0,Uu,Vu,Gu,Hu));const ju=uc()+Vu,Qu=ju+Uu;Be(()=>Vi(_u,!1,"start")),fc(Xu=>{if(Lu){if(Xu>=Qu)return zu(0,1),Vi(_u,!1,"end"),--Fu.r||Nt(Fu.c),!1;if(Xu>=ju){const Ku=Gu((Xu-ju)/Uu);zu(1-Ku,Ku)}}return Lu})}return rs(Ru)?Ac().then(()=>{Ru=Ru(),Nu()}):Nu(),{end(Vu){Vu&&Ru.tick&&Ru.tick(1,0),Lu&&(Ou&&Ks(_u,Ou),Lu=!1)}}}function Gt(_u,$u){F(_u,1,1,()=>{$u.delete(_u.key)})}function gt(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu){let Hu=_u.length,ju=Ou.length,Qu=Hu;const Xu={};for(;Qu--;)Xu[_u[Qu].key]=Qu;const Ku=[],Wu=new Map,qu=new Map;for(Qu=ju;Qu--;){const ep=zu(Lu,Ou,Qu),ip=Bu(ep);let ap=Fu.get(ip);ap?Ru&&ap.p(ep,$u):(ap=Uu(ip,ep),ap.c()),Wu.set(ip,Ku[Qu]=ap),ip in Xu&&qu.set(ip,Math.abs(Qu-Xu[ip]))}const Yu=new Set,Zu=new Set;function _h(ep){M(ep,1),ep.m(Nu,Gu),Fu.set(ep.key,ep),Gu=ep.first,ju--}for(;Hu&&ju;){const ep=Ku[ju-1],ip=_u[Hu-1],ap=ep.key,sp=ip.key;ep===ip?(Gu=ep.first,Hu--,ju--):Wu.has(sp)?!Fu.has(ap)||Yu.has(ap)?_h(ep):Zu.has(sp)?Hu--:qu.get(ap)>qu.get(sp)?(Zu.add(ap),_h(ep)):(Yu.add(sp),Hu--):(Vu(ip,Fu),Hu--)}for(;Hu--;){const ep=_u[Hu];Wu.has(ep.key)||Vu(ep,Fu)}for(;ju;)_h(Ku[ju-1]);return Ku}function Ye(_u,$u){const Bu={},Ru={},Lu={$$scope:1};let Ou=_u.length;for(;Ou--;){const Fu=_u[Ou],Nu=$u[Ou];if(Nu){for(const Vu in Fu)Vu in Nu||(Ru[Vu]=1);for(const Vu in Nu)Lu[Vu]||(Bu[Vu]=Nu[Vu],Lu[Vu]=1);_u[Ou]=Nu}else for(const Vu in Fu)Lu[Vu]=1}for(const Fu in Ru)Fu in Bu||(Bu[Fu]=void 0);return Bu}function re(_u){_u&&_u.c()}function se(_u,$u,Bu,Ru){const{fragment:Lu,after_update:Ou}=_u.$$;Lu&&Lu.m($u,Bu),Ru||Be(()=>{const Fu=_u.$$.on_mount.map(rc).filter(rs);_u.$$.on_destroy?_u.$$.on_destroy.push(...Fu):Nt(Fu),_u.$$.on_mount=[]}),Ou.forEach(Be)}function oe(_u,$u){const Bu=_u.$$;Bu.fragment!==null&&(Nt(Bu.on_destroy),Bu.fragment&&Bu.fragment.d($u),Bu.on_destroy=Bu.fragment=null,Bu.ctx=[])}function Jd(_u,$u){_u.$$.dirty[0]===-1&&(_n.push(_u),vc(),_u.$$.dirty.fill(0)),_u.$$.dirty[$u/31|0]|=1<<$u%31}function de(_u,$u,Bu,Ru,Lu,Ou,Fu,Nu=[-1]){const Vu=$n;Vn(_u);const Uu=_u.$$={fragment:null,ctx:[],props:Ou,update:ce,not_equal:Lu,bound:Ar(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map($u.context||(Vu?Vu.$$.context:[])),callbacks:Ar(),dirty:Nu,skip_bound:!1,root:$u.target||Vu.$$.root};Fu&&Fu(Uu.root);let Gu=!1;if(Uu.ctx=Bu?Bu(_u,$u.props||{},(zu,Hu,...ju)=>{const Qu=ju.length?ju[0]:Hu;return Uu.ctx&&Lu(Uu.ctx[zu],Uu.ctx[zu]=Qu)&&(!Uu.skip_bound&&Uu.bound[zu]&&Uu.bound[zu](Qu),Gu&&Jd(_u,zu)),Hu}):[],Uu.update(),Gu=!0,Nt(Uu.before_update),Uu.fragment=Ru?Ru(Uu.ctx):!1,$u.target){if($u.hydrate){const zu=Nd($u.target);Uu.fragment&&Uu.fragment.l(zu),zu.forEach(H)}else Uu.fragment&&Uu.fragment.c();$u.intro&&M(_u.$$.fragment),se(_u,$u.target,$u.anchor,$u.customElement),bc()}Vn(Vu)}class fe{$destroy(){oe(this,1),this.$destroy=ce}$on($u,Bu){if(!rs(Bu))return ce;const Ru=this.$$.callbacks[$u]||(this.$$.callbacks[$u]=[]);return Ru.push(Bu),()=>{const Lu=Ru.indexOf(Bu);Lu!==-1&&Ru.splice(Lu,1)}}$set($u){this.$$set&&!Hd($u)&&(this.$$.skip_bound=!0,this.$$set($u),this.$$.skip_bound=!1)}}function Ji(_u){return Object.prototype.toString.call(_u)==="[object Object]"}function as(_u,$u){return _u===$u?!0:typeof _u!=typeof $u?!1:!!(Number.isNaN(_u)&&Number.isNaN($u))}function uf(_u,$u){const Bu=Object.getOwnPropertyNames(_u),Ru=Object.getOwnPropertyNames($u);if(Bu.length!==Ru.length)return!1;for(let Lu=0,Ou=Bu.length;Lu<Ou;Lu++){const Fu=Bu[Lu];if(!as(_u[Fu],$u[Fu]))return!1}return!0}function df(_u,$u){if(_u.length!==$u.length)return!1;for(let Bu=0,Ru=_u.length;Bu<Ru;Bu++)if(!as(_u[Bu],$u[Bu]))return!1;return!0}function ff(_u,$u){return as(_u,$u)?!0:Ji(_u)&&Ji($u)?uf(_u,$u):Array.isArray(_u)&&Array.isArray($u)?df(_u,$u):!1}function xo(_u,$u){return as(_u,$u)?!0:Ji(_u)&&Ji($u)?pf(_u,$u):Array.isArray(_u)&&Array.isArray($u)?hf(_u,$u):!1}function hf(_u,$u){if(_u.length!==$u.length)return!1;for(let Bu=0,Ru=_u.length;Bu<Ru;Bu++)if(!xo(_u[Bu],$u[Bu]))return!1;return!0}function pf(_u,$u){const Bu=Object.getOwnPropertyNames(_u),Ru=Object.getOwnPropertyNames($u);if(Bu.length!==Ru.length)return!1;for(let Lu=0,Ou=Bu.length;Lu<Ou;Lu++){const Fu=Bu[Lu];if(!xo(_u[Fu],$u[Fu]))return!1}return!0}function Et(_u,$u,Bu={deep:!1}){return Bu.deep?xo(_u,$u):ff(_u,$u)}function Ln(_u){return _u<.5?4*_u*_u*_u:.5*Math.pow(2*_u-2,3)+1}function Ec(_u){const $u=_u-1;return $u*$u*$u+1}function pn(_u,{delay:$u=0,duration:Bu=400,easing:Ru=Dn}={}){const Lu=+getComputedStyle(_u).opacity;return{delay:$u,duration:Bu,easing:Ru,css:Ou=>`opacity: ${Ou*Lu}`}}function Pr(_u,{delay:$u=0,duration:Bu=400,easing:Ru=Ec,x:Lu=0,y:Ou=0,opacity:Fu=0}={}){const Nu=getComputedStyle(_u),Vu=+Nu.opacity,Uu=Nu.transform==="none"?"":Nu.transform,Gu=Vu*(1-Fu);return{delay:$u,duration:Bu,easing:Ru,css:(zu,Hu)=>`
			transform: ${Uu} translate(${(1-zu)*Lu}px, ${(1-zu)*Ou}px);
			opacity: ${Vu-Gu*Hu}`}}function qi(_u,{delay:$u=0,speed:Bu,duration:Ru,easing:Lu=Ln}={}){let Ou=_u.getTotalLength();const Fu=getComputedStyle(_u);return Fu.strokeLinecap!=="butt"&&(Ou+=parseInt(Fu.strokeWidth)),Ru===void 0?Bu===void 0?Ru=800:Ru=Ou/Bu:typeof Ru=="function"&&(Ru=Ru(Ou)),{delay:$u,duration:Ru,easing:Lu,css:(Nu,Vu)=>`stroke-dasharray: ${Nu*Ou} ${Vu*Ou}`}}const Pn=[];function To(_u,$u=ce){let Bu;const Ru=new Set;function Lu(Nu){if(ue(_u,Nu)&&(_u=Nu,Bu)){const Vu=!Pn.length;for(const Uu of Ru)Uu[1](),Pn.push(Uu,_u);if(Vu){for(let Uu=0;Uu<Pn.length;Uu+=2)Pn[Uu][0](Pn[Uu+1]);Pn.length=0}}}function Ou(Nu){Lu(Nu(_u))}function Fu(Nu,Vu=ce){const Uu=[Nu,Vu];return Ru.add(Uu),Ru.size===1&&(Bu=$u(Lu)||ce),Nu(_u),()=>{Ru.delete(Uu),Ru.size===0&&(Bu(),Bu=null)}}return{set:Lu,update:Ou,subscribe:Fu}}class us{constructor($u,Bu){v(this,"five"),v(this,"hooks",new si),v(this,"staticPrefix","//vrlab-static.ljcdn.com"),this.five=$u,Bu!=null&&Bu.staticPrefix&&(this.staticPrefix=Bu.staticPrefix)}getCurrentState(){return this.state}}class An extends us{}new TextureLoader;var zc={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(_u){(function($u,Bu,Ru,Lu){var Ou=["","webkit","Moz","MS","ms","o"],Fu=Bu.createElement("div"),Nu="function",Vu=Math.round,Uu=Math.abs,Gu=Date.now;function zu(mp,xp,Rp){return setTimeout(Yu(mp,Rp),xp)}function Hu(mp,xp,Rp){return Array.isArray(mp)?(ju(mp,Rp[xp],Rp),!0):!1}function ju(mp,xp,Rp){var Wp;if(mp)if(mp.forEach)mp.forEach(xp,Rp);else if(mp.length!==Lu)for(Wp=0;Wp<mp.length;)xp.call(Rp,mp[Wp],Wp,mp),Wp++;else for(Wp in mp)mp.hasOwnProperty(Wp)&&xp.call(Rp,mp[Wp],Wp,mp)}function Qu(mp,xp,Rp){var Wp="DEPRECATED METHOD: "+xp+`
`+Rp+` AT 
`;return function(){var Yp=new Error("get-stack-trace"),ym=Yp&&Yp.stack?Yp.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Em=$u.console&&($u.console.warn||$u.console.log);return Em&&Em.call($u.console,Wp,ym),mp.apply(this,arguments)}}var Xu;typeof Object.assign!="function"?Xu=function(mp){if(mp===Lu||mp===null)throw new TypeError("Cannot convert undefined or null to object");for(var xp=Object(mp),Rp=1;Rp<arguments.length;Rp++){var Wp=arguments[Rp];if(Wp!==Lu&&Wp!==null)for(var Yp in Wp)Wp.hasOwnProperty(Yp)&&(xp[Yp]=Wp[Yp])}return xp}:Xu=Object.assign;var Ku=Qu(function(mp,xp,Rp){for(var Wp=Object.keys(xp),Yp=0;Yp<Wp.length;)(!Rp||Rp&&mp[Wp[Yp]]===Lu)&&(mp[Wp[Yp]]=xp[Wp[Yp]]),Yp++;return mp},"extend","Use `assign`."),Wu=Qu(function(mp,xp){return Ku(mp,xp,!0)},"merge","Use `assign`.");function qu(mp,xp,Rp){var Wp=xp.prototype,Yp;Yp=mp.prototype=Object.create(Wp),Yp.constructor=mp,Yp._super=Wp,Rp&&Xu(Yp,Rp)}function Yu(mp,xp){return function(){return mp.apply(xp,arguments)}}function Zu(mp,xp){return typeof mp==Nu?mp.apply(xp&&xp[0]||Lu,xp):mp}function _h(mp,xp){return mp===Lu?xp:mp}function ep(mp,xp,Rp){ju(Ju(xp),function(Wp){mp.addEventListener(Wp,Rp,!1)})}function ip(mp,xp,Rp){ju(Ju(xp),function(Wp){mp.removeEventListener(Wp,Rp,!1)})}function ap(mp,xp){for(;mp;){if(mp==xp)return!0;mp=mp.parentNode}return!1}function sp(mp,xp){return mp.indexOf(xp)>-1}function Ju(mp){return mp.trim().split(/\s+/g)}function _f(mp,xp,Rp){if(mp.indexOf&&!Rp)return mp.indexOf(xp);for(var Wp=0;Wp<mp.length;){if(Rp&&mp[Wp][Rp]==xp||!Rp&&mp[Wp]===xp)return Wp;Wp++}return-1}function np(mp){return Array.prototype.slice.call(mp,0)}function tp(mp,xp,Rp){for(var Wp=[],Yp=[],ym=0;ym<mp.length;){var Em=xp?mp[ym][xp]:mp[ym];_f(Yp,Em)<0&&Wp.push(mp[ym]),Yp[ym]=Em,ym++}return Rp&&(xp?Wp=Wp.sort(function(Om,qm){return Om[xp]>qm[xp]}):Wp=Wp.sort()),Wp}function rp(mp,xp){for(var Rp,Wp,Yp=xp[0].toUpperCase()+xp.slice(1),ym=0;ym<Ou.length;){if(Rp=Ou[ym],Wp=Rp?Rp+Yp:xp,Wp in mp)return Wp;ym++}return Lu}var op=1;function lp(){return op++}function up(mp){var xp=mp.ownerDocument||mp;return xp.defaultView||xp.parentWindow||$u}var cp=/mobile|tablet|ip(ad|hone|od)|android/i,Ap="ontouchstart"in $u,yp=rp($u,"PointerEvent")!==Lu,Ip=Ap&&cp.test(navigator.userAgent),Ep="touch",Vp="pen",$p="mouse",kp="kinect",Bp=25,fp=1,dp=2,bp=4,gp=8,wp=1,Sp=2,Cp=4,Lp=8,zp=16,Dp=Sp|Cp,hp=Lp|zp,vp=Dp|hp,Np=["x","y"],Fp=["clientX","clientY"];function qp(mp,xp){var Rp=this;this.manager=mp,this.callback=xp,this.element=mp.element,this.target=mp.options.inputTarget,this.domHandler=function(Wp){Zu(mp.options.enable,[mp])&&Rp.handler(Wp)},this.init()}qp.prototype={handler:function(){},init:function(){this.evEl&&ep(this.element,this.evEl,this.domHandler),this.evTarget&&ep(this.target,this.evTarget,this.domHandler),this.evWin&&ep(up(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ip(this.element,this.evEl,this.domHandler),this.evTarget&&ip(this.target,this.evTarget,this.domHandler),this.evWin&&ip(up(this.element),this.evWin,this.domHandler)}};function jp(mp){var xp,Rp=mp.options.inputClass;return Rp?xp=Rp:yp?xp=Sm:Ip?xp=om:Ap?xp=pm:xp=Mm,new xp(mp,Xp)}function Xp(mp,xp,Rp){var Wp=Rp.pointers.length,Yp=Rp.changedPointers.length,ym=xp&fp&&Wp-Yp===0,Em=xp&(bp|gp)&&Wp-Yp===0;Rp.isFirst=!!ym,Rp.isFinal=!!Em,ym&&(mp.session={}),Rp.eventType=xp,rm(mp,Rp),mp.emit("hammer.input",Rp),mp.recognize(Rp),mp.session.prevInput=Rp}function rm(mp,xp){var Rp=mp.session,Wp=xp.pointers,Yp=Wp.length;Rp.firstInput||(Rp.firstInput=Zp(xp)),Yp>1&&!Rp.firstMultiple?Rp.firstMultiple=Zp(xp):Yp===1&&(Rp.firstMultiple=!1);var ym=Rp.firstInput,Em=Rp.firstMultiple,Om=Em?Em.center:ym.center,qm=xp.center=im(Wp);xp.timeStamp=Gu(),xp.deltaTime=xp.timeStamp-ym.timeStamp,xp.angle=tm(Om,qm),xp.distance=Pp(Om,qm),em(Rp,xp),xp.offsetDirection=am(xp.deltaX,xp.deltaY);var jm=Jp(xp.deltaTime,xp.deltaX,xp.deltaY);xp.overallVelocityX=jm.x,xp.overallVelocityY=jm.y,xp.overallVelocity=Uu(jm.x)>Uu(jm.y)?jm.x:jm.y,xp.scale=Em?cm(Em.pointers,Wp):1,xp.rotation=Em?sm(Em.pointers,Wp):0,xp.maxPointers=Rp.prevInput?xp.pointers.length>Rp.prevInput.maxPointers?xp.pointers.length:Rp.prevInput.maxPointers:xp.pointers.length,lm(Rp,xp);var Zm=mp.element;ap(xp.srcEvent.target,Zm)&&(Zm=xp.srcEvent.target),xp.target=Zm}function em(mp,xp){var Rp=xp.center,Wp=mp.offsetDelta||{},Yp=mp.prevDelta||{},ym=mp.prevInput||{};(xp.eventType===fp||ym.eventType===bp)&&(Yp=mp.prevDelta={x:ym.deltaX||0,y:ym.deltaY||0},Wp=mp.offsetDelta={x:Rp.x,y:Rp.y}),xp.deltaX=Yp.x+(Rp.x-Wp.x),xp.deltaY=Yp.y+(Rp.y-Wp.y)}function lm(mp,xp){var Rp=mp.lastInterval||xp,Wp=xp.timeStamp-Rp.timeStamp,Yp,ym,Em,Om;if(xp.eventType!=gp&&(Wp>Bp||Rp.velocity===Lu)){var qm=xp.deltaX-Rp.deltaX,jm=xp.deltaY-Rp.deltaY,Zm=Jp(Wp,qm,jm);ym=Zm.x,Em=Zm.y,Yp=Uu(Zm.x)>Uu(Zm.y)?Zm.x:Zm.y,Om=am(qm,jm),mp.lastInterval=xp}else Yp=Rp.velocity,ym=Rp.velocityX,Em=Rp.velocityY,Om=Rp.direction;xp.velocity=Yp,xp.velocityX=ym,xp.velocityY=Em,xp.direction=Om}function Zp(mp){for(var xp=[],Rp=0;Rp<mp.pointers.length;)xp[Rp]={clientX:Vu(mp.pointers[Rp].clientX),clientY:Vu(mp.pointers[Rp].clientY)},Rp++;return{timeStamp:Gu(),pointers:xp,center:im(xp),deltaX:mp.deltaX,deltaY:mp.deltaY}}function im(mp){var xp=mp.length;if(xp===1)return{x:Vu(mp[0].clientX),y:Vu(mp[0].clientY)};for(var Rp=0,Wp=0,Yp=0;Yp<xp;)Rp+=mp[Yp].clientX,Wp+=mp[Yp].clientY,Yp++;return{x:Vu(Rp/xp),y:Vu(Wp/xp)}}function Jp(mp,xp,Rp){return{x:xp/mp||0,y:Rp/mp||0}}function am(mp,xp){return mp===xp?wp:Uu(mp)>=Uu(xp)?mp<0?Sp:Cp:xp<0?Lp:zp}function Pp(mp,xp,Rp){Rp||(Rp=Np);var Wp=xp[Rp[0]]-mp[Rp[0]],Yp=xp[Rp[1]]-mp[Rp[1]];return Math.sqrt(Wp*Wp+Yp*Yp)}function tm(mp,xp,Rp){Rp||(Rp=Np);var Wp=xp[Rp[0]]-mp[Rp[0]],Yp=xp[Rp[1]]-mp[Rp[1]];return Math.atan2(Yp,Wp)*180/Math.PI}function sm(mp,xp){return tm(xp[1],xp[0],Fp)+tm(mp[1],mp[0],Fp)}function cm(mp,xp){return Pp(xp[0],xp[1],Fp)/Pp(mp[0],mp[1],Fp)}var um={mousedown:fp,mousemove:dp,mouseup:bp},vm="mousedown",_m="mousemove mouseup";function Mm(){this.evEl=vm,this.evWin=_m,this.pressed=!1,qp.apply(this,arguments)}qu(Mm,qp,{handler:function(mp){var xp=um[mp.type];xp&fp&&mp.button===0&&(this.pressed=!0),xp&dp&&mp.which!==1&&(xp=bp),this.pressed&&(xp&bp&&(this.pressed=!1),this.callback(this.manager,xp,{pointers:[mp],changedPointers:[mp],pointerType:$p,srcEvent:mp}))}});var Rm={pointerdown:fp,pointermove:dp,pointerup:bp,pointercancel:gp,pointerout:gp},wm={2:Ep,3:Vp,4:$p,5:kp},Pm="pointerdown",Im="pointermove pointerup pointercancel";$u.MSPointerEvent&&!$u.PointerEvent&&(Pm="MSPointerDown",Im="MSPointerMove MSPointerUp MSPointerCancel");function Sm(){this.evEl=Pm,this.evWin=Im,qp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}qu(Sm,qp,{handler:function(mp){var xp=this.store,Rp=!1,Wp=mp.type.toLowerCase().replace("ms",""),Yp=Rm[Wp],ym=wm[mp.pointerType]||mp.pointerType,Em=ym==Ep,Om=_f(xp,mp.pointerId,"pointerId");Yp&fp&&(mp.button===0||Em)?Om<0&&(xp.push(mp),Om=xp.length-1):Yp&(bp|gp)&&(Rp=!0),!(Om<0)&&(xp[Om]=mp,this.callback(this.manager,Yp,{pointers:xp,changedPointers:[mp],pointerType:ym,srcEvent:mp}),Rp&&xp.splice(Om,1))}});var Dm={touchstart:fp,touchmove:dp,touchend:bp,touchcancel:gp},Vm="touchstart",Cm="touchstart touchmove touchend touchcancel";function _p(){this.evTarget=Vm,this.evWin=Cm,this.started=!1,qp.apply(this,arguments)}qu(_p,qp,{handler:function(mp){var xp=Dm[mp.type];if(xp===fp&&(this.started=!0),!!this.started){var Rp=Hp.call(this,mp,xp);xp&(bp|gp)&&Rp[0].length-Rp[1].length===0&&(this.started=!1),this.callback(this.manager,xp,{pointers:Rp[0],changedPointers:Rp[1],pointerType:Ep,srcEvent:mp})}}});function Hp(mp,xp){var Rp=np(mp.touches),Wp=np(mp.changedTouches);return xp&(bp|gp)&&(Rp=tp(Rp.concat(Wp),"identifier",!0)),[Rp,Wp]}var Gp={touchstart:fp,touchmove:dp,touchend:bp,touchcancel:gp},Qp="touchstart touchmove touchend touchcancel";function om(){this.evTarget=Qp,this.targetIds={},qp.apply(this,arguments)}qu(om,qp,{handler:function(mp){var xp=Gp[mp.type],Rp=Am.call(this,mp,xp);!Rp||this.callback(this.manager,xp,{pointers:Rp[0],changedPointers:Rp[1],pointerType:Ep,srcEvent:mp})}});function Am(mp,xp){var Rp=np(mp.touches),Wp=this.targetIds;if(xp&(fp|dp)&&Rp.length===1)return Wp[Rp[0].identifier]=!0,[Rp,Rp];var Yp,ym,Em=np(mp.changedTouches),Om=[],qm=this.target;if(ym=Rp.filter(function(jm){return ap(jm.target,qm)}),xp===fp)for(Yp=0;Yp<ym.length;)Wp[ym[Yp].identifier]=!0,Yp++;for(Yp=0;Yp<Em.length;)Wp[Em[Yp].identifier]&&Om.push(Em[Yp]),xp&(bp|gp)&&delete Wp[Em[Yp].identifier],Yp++;if(Om.length)return[tp(ym.concat(Om),"identifier",!0),Om]}var gm=2500,dm=25;function pm(){qp.apply(this,arguments);var mp=Yu(this.handler,this);this.touch=new om(this.manager,mp),this.mouse=new Mm(this.manager,mp),this.primaryTouch=null,this.lastTouches=[]}qu(pm,qp,{handler:function(mp,xp,Rp){var Wp=Rp.pointerType==Ep,Yp=Rp.pointerType==$p;if(!(Yp&&Rp.sourceCapabilities&&Rp.sourceCapabilities.firesTouchEvents)){if(Wp)bm.call(this,xp,Rp);else if(Yp&&pp.call(this,Rp))return;this.callback(mp,xp,Rp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function bm(mp,xp){mp&fp?(this.primaryTouch=xp.changedPointers[0].identifier,Tm.call(this,xp)):mp&(bp|gp)&&Tm.call(this,xp)}function Tm(mp){var xp=mp.changedPointers[0];if(xp.identifier===this.primaryTouch){var Rp={x:xp.clientX,y:xp.clientY};this.lastTouches.push(Rp);var Wp=this.lastTouches,Yp=function(){var ym=Wp.indexOf(Rp);ym>-1&&Wp.splice(ym,1)};setTimeout(Yp,gm)}}function pp(mp){for(var xp=mp.srcEvent.clientX,Rp=mp.srcEvent.clientY,Wp=0;Wp<this.lastTouches.length;Wp++){var Yp=this.lastTouches[Wp],ym=Math.abs(xp-Yp.x),Em=Math.abs(Rp-Yp.y);if(ym<=dm&&Em<=dm)return!0}return!1}var Mp=rp(Fu.style,"touchAction"),Tp=Mp!==Lu,Up="compute",Kp="auto",fm="manipulation",mm="none",Bm="pan-x",hm="pan-y",Lm=yy();function Um(mp,xp){this.manager=mp,this.set(xp)}Um.prototype={set:function(mp){mp==Up&&(mp=this.compute()),Tp&&this.manager.element.style&&Lm[mp]&&(this.manager.element.style[Mp]=mp),this.actions=mp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var mp=[];return ju(this.manager.recognizers,function(xp){Zu(xp.options.enable,[xp])&&(mp=mp.concat(xp.getTouchAction()))}),vy(mp.join(" "))},preventDefaults:function(mp){var xp=mp.srcEvent,Rp=mp.offsetDirection;if(this.manager.session.prevented){xp.preventDefault();return}var Wp=this.actions,Yp=sp(Wp,mm)&&!Lm[mm],ym=sp(Wp,hm)&&!Lm[hm],Em=sp(Wp,Bm)&&!Lm[Bm];if(Yp){var Om=mp.pointers.length===1,qm=mp.distance<2,jm=mp.deltaTime<250;if(Om&&qm&&jm)return}if(!(Em&&ym)&&(Yp||ym&&Rp&Dp||Em&&Rp&hp))return this.preventSrc(xp)},preventSrc:function(mp){this.manager.session.prevented=!0,mp.preventDefault()}};function vy(mp){if(sp(mp,mm))return mm;var xp=sp(mp,Bm),Rp=sp(mp,hm);return xp&&Rp?mm:xp||Rp?xp?Bm:hm:sp(mp,fm)?fm:Kp}function yy(){if(!Tp)return!1;var mp={},xp=$u.CSS&&$u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Rp){mp[Rp]=xp?$u.CSS.supports("touch-action",Rp):!0}),mp}var Qm=1,Gm=2,Jm=4,zm=8,Hm=zm,Fm=16,$m=32;function Nm(mp){this.options=Xu({},this.defaults,mp||{}),this.id=lp(),this.manager=null,this.options.enable=_h(this.options.enable,!0),this.state=Qm,this.simultaneous={},this.requireFail=[]}Nm.prototype={defaults:{},set:function(mp){return Xu(this.options,mp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(mp){if(Hu(mp,"recognizeWith",this))return this;var xp=this.simultaneous;return mp=Wm(mp,this),xp[mp.id]||(xp[mp.id]=mp,mp.recognizeWith(this)),this},dropRecognizeWith:function(mp){return Hu(mp,"dropRecognizeWith",this)?this:(mp=Wm(mp,this),delete this.simultaneous[mp.id],this)},requireFailure:function(mp){if(Hu(mp,"requireFailure",this))return this;var xp=this.requireFail;return mp=Wm(mp,this),_f(xp,mp)===-1&&(xp.push(mp),mp.requireFailure(this)),this},dropRequireFailure:function(mp){if(Hu(mp,"dropRequireFailure",this))return this;mp=Wm(mp,this);var xp=_f(this.requireFail,mp);return xp>-1&&this.requireFail.splice(xp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(mp){return!!this.simultaneous[mp.id]},emit:function(mp){var xp=this,Rp=this.state;function Wp(Yp){xp.manager.emit(Yp,mp)}Rp<zm&&Wp(xp.options.event+Km(Rp)),Wp(xp.options.event),mp.additionalEvent&&Wp(mp.additionalEvent),Rp>=zm&&Wp(xp.options.event+Km(Rp))},tryEmit:function(mp){if(this.canEmit())return this.emit(mp);this.state=$m},canEmit:function(){for(var mp=0;mp<this.requireFail.length;){if(!(this.requireFail[mp].state&($m|Qm)))return!1;mp++}return!0},recognize:function(mp){var xp=Xu({},mp);if(!Zu(this.options.enable,[this,xp])){this.reset(),this.state=$m;return}this.state&(Hm|Fm|$m)&&(this.state=Qm),this.state=this.process(xp),this.state&(Gm|Jm|zm|Fm)&&this.tryEmit(xp)},process:function(mp){},getTouchAction:function(){},reset:function(){}};function Km(mp){return mp&Fm?"cancel":mp&zm?"end":mp&Jm?"move":mp&Gm?"start":""}function Xm(mp){return mp==zp?"down":mp==Lp?"up":mp==Sp?"left":mp==Cp?"right":""}function Wm(mp,xp){var Rp=xp.manager;return Rp?Rp.get(mp):mp}function km(){Nm.apply(this,arguments)}qu(km,Nm,{defaults:{pointers:1},attrTest:function(mp){var xp=this.options.pointers;return xp===0||mp.pointers.length===xp},process:function(mp){var xp=this.state,Rp=mp.eventType,Wp=xp&(Gm|Jm),Yp=this.attrTest(mp);return Wp&&(Rp&gp||!Yp)?xp|Fm:Wp||Yp?Rp&bp?xp|zm:xp&Gm?xp|Jm:Gm:$m}});function gy(){km.apply(this,arguments),this.pX=null,this.pY=null}qu(gy,km,{defaults:{event:"pan",threshold:10,pointers:1,direction:vp},getTouchAction:function(){var mp=this.options.direction,xp=[];return mp&Dp&&xp.push(hm),mp&hp&&xp.push(Bm),xp},directionTest:function(mp){var xp=this.options,Rp=!0,Wp=mp.distance,Yp=mp.direction,ym=mp.deltaX,Em=mp.deltaY;return Yp&xp.direction||(xp.direction&Dp?(Yp=ym===0?wp:ym<0?Sp:Cp,Rp=ym!=this.pX,Wp=Math.abs(mp.deltaX)):(Yp=Em===0?wp:Em<0?Lp:zp,Rp=Em!=this.pY,Wp=Math.abs(mp.deltaY))),mp.direction=Yp,Rp&&Wp>xp.threshold&&Yp&xp.direction},attrTest:function(mp){return km.prototype.attrTest.call(this,mp)&&(this.state&Gm||!(this.state&Gm)&&this.directionTest(mp))},emit:function(mp){this.pX=mp.deltaX,this.pY=mp.deltaY;var xp=Xm(mp.direction);xp&&(mp.additionalEvent=this.options.event+xp),this._super.emit.call(this,mp)}});function Ay(){km.apply(this,arguments)}qu(Ay,km,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[mm]},attrTest:function(mp){return this._super.attrTest.call(this,mp)&&(Math.abs(mp.scale-1)>this.options.threshold||this.state&Gm)},emit:function(mp){if(mp.scale!==1){var xp=mp.scale<1?"in":"out";mp.additionalEvent=this.options.event+xp}this._super.emit.call(this,mp)}});function by(){Nm.apply(this,arguments),this._timer=null,this._input=null}qu(by,Nm,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Kp]},process:function(mp){var xp=this.options,Rp=mp.pointers.length===xp.pointers,Wp=mp.distance<xp.threshold,Yp=mp.deltaTime>xp.time;if(this._input=mp,!Wp||!Rp||mp.eventType&(bp|gp)&&!Yp)this.reset();else if(mp.eventType&fp)this.reset(),this._timer=zu(function(){this.state=Hm,this.tryEmit()},xp.time,this);else if(mp.eventType&bp)return Hm;return $m},reset:function(){clearTimeout(this._timer)},emit:function(mp){this.state===Hm&&(mp&&mp.eventType&bp?this.manager.emit(this.options.event+"up",mp):(this._input.timeStamp=Gu(),this.manager.emit(this.options.event,this._input)))}});function Ym(){km.apply(this,arguments)}qu(Ym,km,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[mm]},attrTest:function(mp){return this._super.attrTest.call(this,mp)&&(Math.abs(mp.rotation)>this.options.threshold||this.state&Gm)}});function wy(){km.apply(this,arguments)}qu(wy,km,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Dp|hp,pointers:1},getTouchAction:function(){return gy.prototype.getTouchAction.call(this)},attrTest:function(mp){var xp=this.options.direction,Rp;return xp&(Dp|hp)?Rp=mp.overallVelocity:xp&Dp?Rp=mp.overallVelocityX:xp&hp&&(Rp=mp.overallVelocityY),this._super.attrTest.call(this,mp)&&xp&mp.offsetDirection&&mp.distance>this.options.threshold&&mp.maxPointers==this.options.pointers&&Uu(Rp)>this.options.velocity&&mp.eventType&bp},emit:function(mp){var xp=Xm(mp.offsetDirection);xp&&this.manager.emit(this.options.event+xp,mp),this.manager.emit(this.options.event,mp)}});function xy(){Nm.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}qu(xy,Nm,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[fm]},process:function(mp){var xp=this.options,Rp=mp.pointers.length===xp.pointers,Wp=mp.distance<xp.threshold,Yp=mp.deltaTime<xp.time;if(this.reset(),mp.eventType&fp&&this.count===0)return this.failTimeout();if(Wp&&Yp&&Rp){if(mp.eventType!=bp)return this.failTimeout();var ym=this.pTime?mp.timeStamp-this.pTime<xp.interval:!0,Em=!this.pCenter||Pp(this.pCenter,mp.center)<xp.posThreshold;this.pTime=mp.timeStamp,this.pCenter=mp.center,!Em||!ym?this.count=1:this.count+=1,this._input=mp;var Om=this.count%xp.taps;if(Om===0)return this.hasRequireFailures()?(this._timer=zu(function(){this.state=Hm,this.tryEmit()},xp.interval,this),Gm):Hm}return $m},failTimeout:function(){return this._timer=zu(function(){this.state=$m},this.options.interval,this),$m},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Hm&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function my(mp,xp){return xp=xp||{},xp.recognizers=_h(xp.recognizers,my.defaults.preset),new My(mp,xp)}my.VERSION="2.0.7",my.defaults={domEvents:!1,touchAction:Up,enable:!0,inputTarget:null,inputClass:null,preset:[[Ym,{enable:!1}],[Ay,{enable:!1},["rotate"]],[wy,{direction:Dp}],[gy,{direction:Dp},["swipe"]],[xy],[xy,{event:"doubletap",taps:2},["tap"]],[by]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Cy=1,Sy=2;function My(mp,xp){this.options=Xu({},my.defaults,xp||{}),this.options.inputTarget=this.options.inputTarget||mp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=mp,this.input=jp(this),this.touchAction=new Um(this,this.options.touchAction),Ey(this,!0),ju(this.options.recognizers,function(Rp){var Wp=this.add(new Rp[0](Rp[1]));Rp[2]&&Wp.recognizeWith(Rp[2]),Rp[3]&&Wp.requireFailure(Rp[3])},this)}My.prototype={set:function(mp){return Xu(this.options,mp),mp.touchAction&&this.touchAction.update(),mp.inputTarget&&(this.input.destroy(),this.input.target=mp.inputTarget,this.input.init()),this},stop:function(mp){this.session.stopped=mp?Sy:Cy},recognize:function(mp){var xp=this.session;if(!xp.stopped){this.touchAction.preventDefaults(mp);var Rp,Wp=this.recognizers,Yp=xp.curRecognizer;(!Yp||Yp&&Yp.state&Hm)&&(Yp=xp.curRecognizer=null);for(var ym=0;ym<Wp.length;)Rp=Wp[ym],xp.stopped!==Sy&&(!Yp||Rp==Yp||Rp.canRecognizeWith(Yp))?Rp.recognize(mp):Rp.reset(),!Yp&&Rp.state&(Gm|Jm|zm)&&(Yp=xp.curRecognizer=Rp),ym++}},get:function(mp){if(mp instanceof Nm)return mp;for(var xp=this.recognizers,Rp=0;Rp<xp.length;Rp++)if(xp[Rp].options.event==mp)return xp[Rp];return null},add:function(mp){if(Hu(mp,"add",this))return this;var xp=this.get(mp.options.event);return xp&&this.remove(xp),this.recognizers.push(mp),mp.manager=this,this.touchAction.update(),mp},remove:function(mp){if(Hu(mp,"remove",this))return this;if(mp=this.get(mp),mp){var xp=this.recognizers,Rp=_f(xp,mp);Rp!==-1&&(xp.splice(Rp,1),this.touchAction.update())}return this},on:function(mp,xp){if(mp!==Lu&&xp!==Lu){var Rp=this.handlers;return ju(Ju(mp),function(Wp){Rp[Wp]=Rp[Wp]||[],Rp[Wp].push(xp)}),this}},off:function(mp,xp){if(mp!==Lu){var Rp=this.handlers;return ju(Ju(mp),function(Wp){xp?Rp[Wp]&&Rp[Wp].splice(_f(Rp[Wp],xp),1):delete Rp[Wp]}),this}},emit:function(mp,xp){this.options.domEvents&&Ty(mp,xp);var Rp=this.handlers[mp]&&this.handlers[mp].slice();if(!(!Rp||!Rp.length)){xp.type=mp,xp.preventDefault=function(){xp.srcEvent.preventDefault()};for(var Wp=0;Wp<Rp.length;)Rp[Wp](xp),Wp++}},destroy:function(){this.element&&Ey(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Ey(mp,xp){var Rp=mp.element;if(Rp.style){var Wp;ju(mp.options.cssProps,function(Yp,ym){Wp=rp(Rp.style,ym),xp?(mp.oldCssProps[Wp]=Rp.style[Wp],Rp.style[Wp]=Yp):Rp.style[Wp]=mp.oldCssProps[Wp]||""}),xp||(mp.oldCssProps={})}}function Ty(mp,xp){var Rp=Bu.createEvent("Event");Rp.initEvent(mp,!0,!0),Rp.gesture=xp,xp.target.dispatchEvent(Rp)}Xu(my,{INPUT_START:fp,INPUT_MOVE:dp,INPUT_END:bp,INPUT_CANCEL:gp,STATE_POSSIBLE:Qm,STATE_BEGAN:Gm,STATE_CHANGED:Jm,STATE_ENDED:zm,STATE_RECOGNIZED:Hm,STATE_CANCELLED:Fm,STATE_FAILED:$m,DIRECTION_NONE:wp,DIRECTION_LEFT:Sp,DIRECTION_RIGHT:Cp,DIRECTION_UP:Lp,DIRECTION_DOWN:zp,DIRECTION_HORIZONTAL:Dp,DIRECTION_VERTICAL:hp,DIRECTION_ALL:vp,Manager:My,Input:qp,TouchAction:Um,TouchInput:om,MouseInput:Mm,PointerEventInput:Sm,TouchMouseInput:pm,SingleTouchInput:_p,Recognizer:Nm,AttrRecognizer:km,Tap:xy,Pan:gy,Swipe:wy,Pinch:Ay,Rotate:Ym,Press:by,on:ep,off:ip,each:ju,merge:Wu,extend:Ku,assign:Xu,inherit:qu,bindFn:Yu,prefixed:rp});var $y=typeof $u<"u"?$u:typeof self<"u"?self:{};$y.Hammer=my,typeof Lu=="function"&&Lu.amd?Lu(function(){return my}):_u.exports?_u.exports=my:$u[Ru]=my})(window,document,"Hammer")})(zc);zc.exports;new Color(16777215);new Color(6522623);new Color(16777215);new Color(6522623);const nm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==";new TextureLoader().load(nm);var _c={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(_u){(function(){var $u={}.hasOwnProperty;function Bu(){for(var Ru=[],Lu=0;Lu<arguments.length;Lu++){var Ou=arguments[Lu];if(Ou){var Fu=typeof Ou;if(Fu==="string"||Fu==="number")Ru.push(Ou);else if(Array.isArray(Ou)){if(Ou.length){var Nu=Bu.apply(null,Ou);Nu&&Ru.push(Nu)}}else if(Fu==="object"){if(Ou.toString!==Object.prototype.toString&&!Ou.toString.toString().includes("[native code]")){Ru.push(Ou.toString());continue}for(var Vu in Ou)$u.call(Ou,Vu)&&Ou[Vu]&&Ru.push(Vu)}}}return Ru.join(" ")}_u.exports?(Bu.default=Bu,_u.exports=Bu):window.classNames=Bu})()})(_c);_c.exports;var hs={},Ng=Gg;function Gg(_u,$u,Bu){return _u[0]=$u[0]+Bu[0],_u[1]=$u[1]+Bu[1],_u}var Qg=_g;function _g(_u,$u,Bu){return _u[0]=$u,_u[1]=Bu,_u}var Wg=Xg;function Xg(_u,$u){var Bu=$u[0],Ru=$u[1],Lu=Bu*Bu+Ru*Ru;return Lu>0&&(Lu=1/Math.sqrt(Lu),_u[0]=$u[0]*Lu,_u[1]=$u[1]*Lu),_u}var Yg=Ug;function Ug(_u,$u,Bu){return _u[0]=$u[0]-Bu[0],_u[1]=$u[1]-Bu[1],_u}var Vg=Zg;function Zg(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]}var Jg=Ng,oo=Qg,Xc=Wg,qg=Yg,Kg=Vg,Ta=[0,0];hs.computeMiter=function(_u,$u,Bu,Ru,Lu){return Jg(_u,Bu,Ru),Xc(_u,_u),oo($u,-_u[1],_u[0]),oo(Ta,-Bu[1],Bu[0]),Lu/Kg($u,Ta)};hs.normal=function(_u,$u){return oo(_u,-$u[1],$u[0]),_u};hs.direction=function(_u,$u,Bu){return qg(_u,$u,Bu),Xc(_u,_u),_u};var jt=hs,sn=[0,0],ki=[0,0],Sa=[0,0],Gn=[0,0],$g=function(_u,$u){var Bu=null,Ru=[];$u&&(_u=_u.slice(),_u.push(_u[0]));for(var Lu=_u.length,Ou=1;Ou<Lu;Ou++){var Fu=_u[Ou-1],Nu=_u[Ou],Vu=Ou<_u.length-1?_u[Ou+1]:null;if(jt.direction(sn,Nu,Fu),Bu||(Bu=[0,0],jt.normal(Bu,sn)),Ou===1&&Hs(Ru,Bu,1),!Vu)jt.normal(Bu,sn),Hs(Ru,Bu,1);else{jt.direction(ki,Vu,Nu);var Uu=jt.computeMiter(Sa,Gn,sn,ki,1);Hs(Ru,Gn,Uu)}}if(_u.length>2&&$u){var Gu=_u[Lu-2],zu=_u[0],Hu=_u[1];jt.direction(sn,zu,Gu),jt.direction(ki,Hu,zu),jt.normal(Bu,sn);var ju=jt.computeMiter(Sa,Gn,sn,ki,1);Ru[0][0]=Gn.slice(),Ru[Lu-1][0]=Gn.slice(),Ru[0][1]=ju,Ru[Lu-1][1]=ju,Ru.pop()}return Ru};function Hs(_u,$u,Bu){_u.push([[$u[0],$u[1]],Bu])}const e0=2,t0=3,n0=3,i0=2;function s0(_u,$u){var Bu,Ru,Lu;if(_u.length<2)return console.warn("positionList length must be greater than 1"),[];const Ou=(Bu=$u==null?void 0:$u.unitWidth)!=null?Bu:.5,Fu=(Ru=$u==null?void 0:$u.unitHeight)!=null?Ru:.5,Nu=(Lu=$u==null?void 0:$u.skipPanoIndexMesh)!=null?Lu:!1,Vu=new CatmullRomCurve3(_u,!1,"catmullrom",1);if(Nu){const Uu=Math.ceil(Vu.getLength()/Fu*1.5),Gu=Vu.getPoints(Uu),zu=[];let Hu=0;const ju=_u;return ju.forEach((Qu,Xu)=>{let Ku=0,Wu=99999999;Gu.forEach((ep,ip)=>{const ap=ep.distanceTo(Qu);ap<Wu&&(Ku=ip,Wu=ap)});const qu=Gu[Ku+1],Yu=qu==null?void 0:qu.distanceTo(Qu),Zu=Gu[Ku-1],_h=Zu==null?void 0:Zu.distanceTo(Qu);if(Ku>Hu&&Ku-Hu>1){let ep=Ku;Zu!==void 0&&_h>.8&&(ep=Ku+1),Zu!==void 0&&_h>.2&&_h<.3?ep=Ku:Wu>.2&&Wu<.3&&(ep=Ku+1);let ip=Hu;if(qu!==void 0&&Yu>.2&&Yu<.3?ip=Hu+1:Wu>.2&&Wu<.3&&(ip=Hu),Gu[ip]&&Gu[ip+1]){const Ju=ju[Xu-1];if(Ju)if(Ju.equals(Gu[ip]))ip+=1;else{const _f=new Vector3().subVectors(Gu[ip+1],Gu[ip]),np=new Vector3().subVectors(Ju,Gu[ip]);_f.angleTo(np)<Math.PI/2&&(ip+=1)}}if(ep<ip||ep-ip<=1)return;const ap=Gu.slice(ip,ep),sp=ka(ap,Ou,Fu);zu.push(sp),Hu=Ku}}),zu}else{const Uu=Math.ceil(Vu.getLength()),Gu=Vu.getPoints(Uu);return[ka(Gu,Ou,Fu)]}}function ka(_u,$u,Bu){const Ru=$u/2,Lu=Bu/$u,Ou=_u.length,Fu=$g(_u.map(Ku=>[Ku.x,Ku.z])),Nu=(_u.length-1)*e0*t0,Vu=2*Ou,Uu=Vu*n0,Gu=Vu*i0,zu=new Uint32Array(Nu),Hu=new Float32Array(Uu),ju=new Float32Array(Gu);_u.forEach((Ku,Wu)=>{});let Qu=0;for(let Ku=0;Ku<_u.length;Ku++){const[Wu,qu]=Fu[Ku][0],Yu=_u[Ku],{x:Zu,y:_h,z:ep}=Yu,ip=new Vector3(Zu+Wu*Ru,_h+.05,ep+qu*Ru);Hu[Ku*6+0]=ip.x,Hu[Ku*6+1]=ip.y,Hu[Ku*6+2]=ip.z;const ap=new Vector3(Zu-Wu*Ru,_h+.05,ep-qu*Ru);Hu[Ku*6+3]=ap.x,Hu[Ku*6+4]=ap.y,Hu[Ku*6+5]=ap.z,Qu+=Ku>0?_u[Ku-1].clone().sub(_u[Ku]).length():0;const sp=Qu/$u/Lu;ju[Ku*4+0]=0,ju[Ku*4+1]=sp,ju[Ku*4+2]=1,ju[Ku*4+3]=sp,Ku!==_u.length-1&&(zu[Ku*6+0]=Ku*2+0,zu[Ku*6+1]=Ku*2+2,zu[Ku*6+2]=Ku*2+1,zu[Ku*6+3]=Ku*2+2,zu[Ku*6+4]=Ku*2+3,zu[Ku*6+5]=Ku*2+1)}const Xu=new BufferGeometry;return Xu.setAttribute("position",new BufferAttribute(Hu,3)),Xu.setAttribute("uv",new BufferAttribute(ju,2)),Xu.setIndex(new BufferAttribute(zu,1)),Xu}function o0(_u){const $u=new TextureLoader().load(_u.textureUrl);return $u.wrapS=$u.wrapT=RepeatWrapping,$u.encoding=sRGBEncoding,new MeshBasicMaterial({color:16777215,map:$u,transparent:!0,opacity:.8})}function ti(_u){return _u!=null}const Yc="v1.0.1",Uc="GuideLinePlugin",ro=`${Uc}@${Yc}`,Da=_u=>`${ro}--${_u}`;class Vc extends An{constructor($u,Bu){super($u,Bu),v(this,"state",{visible:!1,enabled:!0,disposed:!1}),v(this,"data"),v(this,"linesGroup"),v(this,"disposedErrorLog",()=>{console.error(`${ro} is disposed`)}),v(this,"actionWhenEnabled",Ru=>{if(this.state.enabled)return Ru()}),Object.assign(window,{[`__${Uc}_DEBUG__`]:this})}async load($u,Bu,Ru=!0){const Lu=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Ou=await this.formatData($u);this.hooks.emit("dataChange",Ou,Lu),this.data=Ou,this.linesGroup&&this.five.scene.remove(this.linesGroup);const Fu=this.getLinesGroup(Ou.routes);!Fu||(this.linesGroup=Fu,await this.waitFiveModelLoaded(),this.five.scene.add(Fu),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),Bu&&this.setState(Bu),this.five.needsRender=!0,this.hooks.emit("dataLoaded",Ou),console.log(`${ro} loaded`,Ou))}async formatData($u){return typeof $u=="object"&&$u!==null&&$u.version&&$u.data?$u.data:$u}async show($u){this.setState({visible:!0},$u)}async hide($u){this.setState({visible:!1},$u)}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.setState({disposed:!0})}setState($u,Bu){var Ru;if(this.state.disposed)return this.disposedErrorLog();const Lu={...this.state};this.state={...this.state,...$u},$u.disposed!==void 0&&$u.disposed!==Lu.disposed&&$u.disposed&&this.handleDispose(),$u.visible!==void 0&&$u.visible!==Lu.visible&&this.handleVisible($u.visible,Bu==null?void 0:Bu.userAction),$u.enabled!==void 0&&$u.enabled!==Lu.enabled&&this.handleEnable($u.enabled,Bu==null?void 0:Bu.userAction),Et(Lu,this.state,{deep:!0})||(this.hooks.emit("stateChange",{state:this.state,prevState:Lu,userAction:(Ru=Bu==null?void 0:Bu.userAction)!=null?Ru:!0}),this.five.needsRender=!0)}handleEnable($u,Bu=!0){this.linesGroup&&($u?(this.five.scene.add(this.linesGroup),this.actionWhenEnabled(()=>this.hooks.emit("enable",{userAction:Bu}))):(this.five.scene.remove(this.linesGroup),this.hooks.emit("disable",{userAction:Bu})))}handleVisible($u,Bu=!0){this.linesGroup&&($u?(this.linesGroup.visible=!0,this.actionWhenEnabled(()=>this.hooks.emit("show",{userAction:Bu}))):(this.linesGroup.visible=!1,this.actionWhenEnabled(()=>this.hooks.emit("hide",{userAction:Bu}))))}handleDispose(){this.linesGroup&&this.five.scene.add(this.linesGroup)}getLinesGroup($u){const Bu=$u.map(this.getLine.bind(this)).filter(ti),Ru=new Group$1;if(Ru.name=Da("route-group"),Bu.length!==0)return Ru.add(...Bu),Ru}getLine($u){var Bu,Ru,Lu,Ou;const Fu=new Group$1,Nu=$u.panoIndexList.map(Gu=>{var zu;return(zu=this.five.work.observers[Gu])==null?void 0:zu.standingPosition}).filter(ti),Vu=s0(Nu,{skipPanoIndexMesh:(Bu=$u.skipPanoIndexMesh)!=null?Bu:!0,unitWidth:(Ru=$u.unitWidth)!=null?Ru:.6,unitHeight:(Lu=$u.unitHeight)!=null?Lu:.4});if(!Vu)return;const Uu=o0({textureUrl:(Ou=$u.arrowTextureUrl)!=null?Ou:this.staticPrefix+"/release/web/arrow6.b6ce0c62.png"});return Vu.forEach(Gu=>{const zu=new Mesh(Gu,Uu);zu.name=Da("route-line-mesh"),Fu.add(zu)}),Fu}async waitFiveModelLoaded(){return new Promise($u=>{if(this.five.model.loaded){$u();return}this.five.once("modelLoaded",()=>{$u()})})}}v(Vc,"lasestVersion",Yc);const r0=(_u,$u)=>new Vc(_u,$u);function La(_u){const $u=Math.abs(Math.cos(_u.latitude));return new Vector3(-Math.sin(_u.longitude)*$u,-Math.sin(_u.latitude),-Math.cos(_u.longitude)*$u)}function a0(_u,$u){const Bu=La(_u),Ru=La($u);return Bu.angleTo(Ru)}const l0=async _u=>{try{_u().then(()=>{},()=>{}).catch(()=>{})}catch{}},Di=Math.PI*2;function c0(_u){return _u>=0&&_u<Di?_u:(_u%Di+Di)%Di}function u0(_u){return{longitude:c0(-Math.atan2(_u.x,-_u.z)),latitude:-Math.asin(_u.y/1)}}function d0(_u,$u,Bu,Ru){const Lu=-_u/Bu,Ou=_u;return Lu*Ru+Ou}function f0(_u){return new Promise($u=>{setTimeout(()=>{$u()},_u)})}const Zc="v1.0.6",Jc="CruisePlugin",ps=`${Jc}@${Zc}`,Ma=()=>{console.error(`${ps} is disposed`)},h0=()=>{console.warn(`${ps} is disabled`)},p0=()=>{console.error(`${ps} is disabled`)},Fs=new Map;class qc extends An{constructor($u,Bu){super($u,Bu),v(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1,config:{speedConfig:{rotateSpeed:.001,rotateSpeedUnit:"rad/ms",moveSpeed:.002,moveSpeedUnit:"m/ms"}}}),v(this,"data"),v(this,"config"),v(this,"privateState",{playing:!1,currentPlayQueue:[],currentPlayKeyframe:null,broke:!1,disposers:[],modeChanging:!1}),v(this,"GuideLine"),this.config=Bu,Object.assign(window,{[`__${Jc}_DEBUG__`]:this});const Ru=this.setFiveLinearUpdateCamera.bind(this),Lu=this.setFiveOriginUpdateCamera.bind(this);this.hooks.on("play",Ru),this.hooks.on("broke",Lu),this.hooks.on("end",Lu),this.hooks.on("pause",Lu),this.privateState.disposers.push(()=>{this.hooks.off("play",Ru),this.hooks.off("broke",Lu),this.hooks.off("end",Lu),this.hooks.off("pause",Lu)})}async load($u,Bu,Ru){var Lu,Ou,Fu,Nu,Vu;if(this.state.disposed)return Ma();this.privateState.fiveOriginGetProgress||(Ou=(Lu=this.five.controller)==null?void 0:Lu.cameraMotion)!=null&&Ou.getProgress||(await this.waitFiveLoaded(),this.privateState.fiveOriginGetProgress=(Nu=(Fu=this.five.controller)==null?void 0:Fu.cameraMotion)==null?void 0:Nu.getProgress),this.clear();const Uu=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Gu=await this.formatData($u);this.data=Gu,this.hooks.emit("dataChange",Gu,Uu);let zu=[],Hu;const ju=this.data.keyframes.filter(Qu=>Qu.data.panoIndex!==void 0);ju.filter((Qu,Xu)=>{var Ku;return Qu.data.panoIndex!==((Ku=ju[Xu-1])==null?void 0:Ku.data.panoIndex)}).map(Qu=>Qu.data.panoIndex).forEach(Qu=>{var Xu,Ku;const Wu=(Xu=this.five.work.observers[Qu])==null?void 0:Xu.floorIndex;if(Wu!==void 0)if(Hu===Wu){const qu=zu.length-1;zu[qu]=[...(Ku=zu[qu])!=null?Ku:[],Qu]}else{Hu=Wu;const qu=zu.length;zu[qu]=[Qu]}}),this.GuideLine||(this.GuideLine=r0(this.five,this.config)),(Vu=this.GuideLine)==null||Vu.load({routes:zu.map(Qu=>({panoIndexList:Qu}))}),this.setState({playing:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing),this.changeSpeed(this.state.speed),Bu&&this.setState(Bu,{userAction:Ru}),console.log(`${ps} loaded`,Gu),this.hooks.emit("dataLoaded",Gu)}play($u){this.setState({playing:!0},$u)}playFrom($u){const{index:Bu,id:Ru,userAction:Lu}=$u;this.state.playing&&this.setState({playing:!1},{userAction:Lu}),this.setState({playing:!0},{userAction:Lu,playFromIndex:Bu,playFromId:Ru})}playFromStart($u){return this.playFrom({...$u,index:0})}pause($u){this.setState({playing:!1},$u)}async show($u){this.setState({visible:!0},$u)}async hide($u){this.setState({visible:!1},$u)}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.setState({disposed:!0})}setState($u,Bu){var Ru;if(this.state.disposed)return Ma();if(!this.state.enabled&&$u.enabled!==!0&&$u.disposed!==!0)return p0();const Lu={...this.state};this.state={...this.state,...$u},$u.disposed!==void 0&&$u.disposed!==Lu.disposed&&$u.disposed&&this.handleDispose(),$u.visible!==void 0&&$u.visible!==Lu.visible&&this.handleVisible($u.visible,Bu==null?void 0:Bu.userAction),$u.enabled!==void 0&&$u.enabled!==Lu.enabled&&this.handleEnable($u.enabled,Bu==null?void 0:Bu.userAction),$u.playing!==void 0&&$u.playing!==Lu.playing&&this.changePlayState($u.playing,Bu),$u.speed!==void 0&&$u.speed!==Lu.speed&&this.changeSpeed($u.speed,Bu==null?void 0:Bu.userAction),Et(Lu,this.state,{deep:!0})||this.hooks.emit("stateChange",{state:this.state,prevState:Lu,userAction:(Ru=Bu==null?void 0:Bu.userAction)!=null?Ru:!0})}async formatData($u){this.five.work||await this.waitFiveLoaded();const Bu=this.five.work.observers,Ru=(()=>{const Lu=$u;return typeof Lu=="object"&&Lu!==null&&Lu.version&&Lu.data?Lu.data:Lu})();if(Ru.keyframes)return{keyframesId:it(),keyframes:Ru.keyframes.map((Lu,Ou)=>{var Fu;const Nu=Ru.keyframes[Ou+1],Vu=(()=>!Nu||Nu.start===void 0||Lu.end===void 0?0:Nu.start-Lu.end)();return{id:(Fu=Lu.uuid)!=null?Fu:it(),moveIndex:Ou,stay:Vu,index:Ou,...Lu}})};if(Ru.panoIndexList){let Lu=[];const{moveEffect:Ou,moveToFirstPanoEffect:Fu}=Ru;return this.privateState.moveToFirstPanoEffect=Fu,Ru.panoIndexList.forEach((Nu,Vu)=>{const Uu=(()=>{var Gu,zu,Hu,ju;const Qu=Ru.panoIndexList.slice(Vu).find(qu=>qu!==Nu);if(Qu===void 0)return;const Xu=(Gu=Bu[Nu])==null?void 0:Gu.position,Ku=(zu=Bu[Qu])==null?void 0:zu.position;if(!Ku||!Xu||((Hu=Bu[Nu])==null?void 0:Hu.floorIndex)!==((ju=Bu[Qu])==null?void 0:ju.floorIndex))return;const Wu=new Vector3().subVectors(Ku,Xu);return u0(Wu)})();Ru.moveType===void 0||Ru.moveType==="justMove"?Lu.push({moveIndex:Vu,stay:Ru.stay,data:{effect:"Move",panoIndex:Nu,moveEffect:Ou,...Uu!=null?Uu:{}}}):Ru.moveType==="moveAndRotate"&&(Lu.push({moveIndex:Vu,stay:Ru.stay,data:{effect:"Move",panoIndex:Nu,moveEffect:Ou}}),Uu&&Lu.push({moveIndex:Vu,stay:Ru.stay,data:{effect:"Rotate",panoIndex:Nu,...Uu}}))}),{keyframesId:it(),keyframes:Lu.map((Nu,Vu)=>({id:it(),index:Vu,...Nu}))}}else throw new Error("format error: data no keyframes or no panoIndexList")}handleEnable($u,Bu=!0){var Ru,Lu;$u?((Ru=this.GuideLine)==null||Ru.enable(),this.hooks.emit("enable",{userAction:Bu})):((Lu=this.GuideLine)==null||Lu.disable(),this.changePlayState(!1,{userAction:Bu}),this.hooks.emit("disable",{userAction:Bu})),this.state.enabled=$u}handleVisible($u,Bu=!0){var Ru,Lu;$u?((Ru=this.GuideLine)==null||Ru.show(),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:Bu}))):((Lu=this.GuideLine)==null||Lu.hide(),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:Bu}))),this.state.visible=$u}changePlayState($u,Bu){this.actionIfStateIsEnabled(()=>{var Ru;return this.hooks.emit("playStateChange",$u?"playing":"pause",{userAction:(Ru=Bu==null?void 0:Bu.userAction)!=null?Ru:!0})}),$u?this.handlePlay(Bu):this.handlePause(Bu),this.state.playing=$u}async handlePlay($u){var Bu;const{data:Ru,state:Lu,privateState:Ou,hooks:Fu}=this;if(Ou.playing||!(Ru!=null&&Ru.keyframes)||(Ru==null?void 0:Ru.keyframes.length)===0)return;const Nu=it();Ou.playId=Nu,Ou.playing=!0,Ou.broke=!1;const Vu=Ru.keyframes,Uu=this.getPauseData();($u==null?void 0:$u.notEmitEvent)!==!0&&Fu.emit("play",{userAction:(Bu=$u==null?void 0:$u.userAction)!=null?Bu:!0});let Gu=!1;const zu=await(async()=>{var Hu,ju;if(($u==null?void 0:$u.playFromIndex)!==void 0)return $u.playFromIndex;if(($u==null?void 0:$u.playFromId)!==void 0)return(Hu=this.data)==null?void 0:Hu.keyframes.findIndex(Qu=>Qu.id===$u.playFromId);if(Uu!=null&&Uu.keyframeId){const Qu=(ju=this.data)==null?void 0:ju.keyframes.find(Xu=>Xu.id===Uu.keyframeId);if(Uu!=null&&Uu.fiveState&&await this.move(Uu.fiveState,{moveEffect:Ou.moveToFirstPanoEffect}),Qu){if(Qu.data.effect==="Move")return Qu.index;if(Qu.data.effect==="Rotate"){const Xu=Uu.duration!==void 0?Uu.duration*(1-Uu.playedProgress):void 0;return await this.playKeyframe(Qu,{duration:Xu}),Gu=!0,Qu.index+1}}}})();this.clearPauseData();for(const Hu of Vu){if(Ou.broke||!Lu.playing||!Ou.playing||Nu!==Ou.playId)return;if(!(zu!==void 0&&Hu.index<zu))try{Fu.emit("playIndexChange",Hu.index,Hu),await this.playKeyframe(Hu,{moveEffect:Gu===!1?Ou.moveToFirstPanoEffect:void 0,duration:800}),Hu.stay&&await f0(Hu.stay),Gu===!1&&(Gu=!0)}catch{return Promise.resolve("broke")}}Lu.playing&&Nu===Ou.playId&&(this.setState({playing:!1},{userAction:!1}),Fu.emit("end"),this.clearPauseData())}handlePause($u){var Bu;const{state:Ru,privateState:Lu,hooks:Ou}=this;Ru.playing=!1,Lu.playing!==!1&&(Lu.playing=!1,this.setPauseData(),Lu.broke||this.forceInteruptUpdateCamera(),($u==null?void 0:$u.notEmitEvent)!==!0&&Ou.emit("pause",{userAction:(Bu=$u==null?void 0:$u.userAction)!=null?Bu:!0}))}async playKeyframe($u,Bu){var Ru;const{privateState:Lu}=this;return((Ru=this.privateState.currentPlayKeyframe)==null?void 0:Ru.keyframe.id)!==$u.id&&(this.privateState.currentPlayKeyframe={keyframe:$u}),Lu.currentPlayQueue.push(this.getPlayPromise($u,Bu)),this.actionPromiseQueue()}addInterruptListener($u){const Bu=()=>{this.privateState.modeChanging||$u()},Ru=$u;return this.five.once("gesture",Ru),this.five.once("wantsChangeMode",Bu),()=>{this.five.off("gesture",Ru),this.five.once("wantsChangeMode",Bu)}}async getPlayPromise($u,Bu){const Ru=$u.data;if((Bu==null?void 0:Bu.duration)!=null||$u.start!==void 0&&$u.end!==void 0&&$u.end-$u.start,!!Ru)return new Promise((Lu,Ou)=>{let Fu=!1;this.addInterruptListener(()=>{if(!Fu)return this.hooks.emit("broke"),this.privateState.broke=!0,this.setState({playing:!1}),Fu=!0,Ou(new Error("play is interupted"))});try{if(Fu)return;const Nu=()=>{Lu(),Fu=!0};switch(Ru.effect){case"Move":this.move(Ru,Bu).then(Nu);break;case"Rotate":this.rotate(Ru,Bu).then(Nu);break;default:this.rotate(Ru,Bu).then(Nu)}}catch{}})}async actionPromiseQueue(){const{privateState:$u}=this;return new Promise((Bu,Ru)=>{if($u.currentPlayQueue.length===0){Bu();return}const Lu=$u.currentPlayQueue.shift();if(!Lu){Bu();return}Lu.then(Bu,Ru)}).then(()=>$u.currentPlayQueue.length===0?Promise.resolve():this.actionPromiseQueue())}async move($u,Bu){if($u.mode&&$u.mode!==this.five.currentMode)await this.changeMode($u);else if($u.panoIndex!==this.five.panoIndex)await this.changePano($u,Bu);else return Promise.resolve()}async rotate($u,Bu){if($u.mode&&$u.mode!==this.five.currentMode)await this.changeMode({mode:$u.mode,panoIndex:$u.panoIndex});else if($u.panoIndex&&$u.panoIndex!==this.five.panoIndex)return await this.changePano($u,Bu);await this.updateCamera($u,Bu==null?void 0:Bu.duration)}async updateCamera($u,Bu=800){const{five:Ru,privateState:Lu,state:Ou}=this;let Fu=Bu;const Nu=(()=>{var Uu,Gu;const zu=(Uu=Ou.config)==null?void 0:Uu.speedConfig,Hu=(Gu=$u.rotateSpeed)!=null?Gu:zu==null?void 0:zu.rotateSpeed;if((zu==null?void 0:zu.rotateSpeedUnit)===void 0)return Hu;if(Hu!==void 0)return zu.rotateSpeedUnit==="rad/ms"?Hu:Hu/1e3})();if(Nu){const Uu=this.five.getCurrentState();Fu=a0(Uu,$u)/Nu}Lu.currentPlayKeyframe&&(Lu.currentPlayKeyframe.originDuration=Fu);const Vu=this.getSpeededDuration(Fu);return new Promise(Uu=>{l0(()=>Ru.updateCamera($u,Vu)),setTimeout(()=>Uu(),Vu)})}async changePano($u,Bu){var Ru;const{five:Lu,privateState:Ou,state:Fu}=this;if(typeof $u.panoIndex!="number"||$u.panoIndex===Lu.panoIndex)return;Lu.getCurrentState().mode;const Nu=Lu.getCurrentState().mode!=="Panorama";Nu&&(this.privateState.modeChanging=!0);let Vu=(Ru=Bu==null?void 0:Bu.duration)!=null?Ru:800;const Uu=(()=>{var zu,Hu;const ju=(zu=Fu.config)==null?void 0:zu.speedConfig,Qu=(Hu=$u.moveSpeed)!=null?Hu:ju==null?void 0:ju.moveSpeed;if((ju==null?void 0:ju.moveSpeedUnit)===void 0)return Qu;if(Qu!==void 0)return ju.moveSpeedUnit==="m/ms"?Qu:Qu/1e3})();if(Uu&&typeof Lu.panoIndex=="number"&&typeof $u.panoIndex=="number"){const zu=Lu.work.observers[Lu.panoIndex].position,Hu=Lu.work.observers[$u.panoIndex].position;Vu=zu.distanceTo(Hu)/Uu}Ou.currentPlayKeyframe&&(Ou.currentPlayKeyframe.originDuration=Vu);const Gu=this.getSpeededDuration(Vu);await new Promise(zu=>{var Hu,ju,Qu;Lu.moveToPano($u.panoIndex,{latitude:$u.latitude,longitude:$u.longitude,fov:$u.fov,duration:Gu,effect:(Qu=(ju=Bu==null?void 0:Bu.moveEffect)!=null?ju:(Hu=this.state.config)==null?void 0:Hu.moveEffect)!=null?Qu:$u.moveEffect,moveCancelCallback:()=>zu(),moveEndCallback:()=>zu()}),Nu&&Lu.once("panoArrived",()=>zu())}),Nu&&(this.privateState.modeChanging=!1)}changeSpeed($u,Bu=!0){const{state:Ru,privateState:Lu,hooks:Ou}=this,{currentPlayKeyframe:Fu}=Lu;if(Ou.emit("speedChange",$u,{userAction:Bu}),Ru.playing&&Fu)try{const Nu=Fu.originDuration!==void 0?Fu.originDuration*(1-this.getProgress()):void 0,Vu=this.playKeyframe(Fu.keyframe,{duration:Nu});Lu.currentPlayQueue.push(Vu)}catch{}}getSpeededDuration($u){return $u/this.state.speed}getProgress(){return this.five.controller.cameraMotion.progress}async changeMode($u,Bu){$u.mode&&$u.mode!==this.five.currentMode&&(this.privateState.modeChanging=!0,console.log("this.privateState.modeChanging",this.privateState.modeChanging),await this.five.changeMode($u.mode,$u,Bu),this.privateState.modeChanging=!1)}forceInteruptUpdateCamera(){this.five.updateCamera({},0)}getPauseData(){var $u,Bu;if(($u=this.data)!=null&&$u.keyframesId)return Fs.get((Bu=this.data)==null?void 0:Bu.keyframesId)}setPauseData(){var $u,Bu,Ru,Lu;if(($u=this.data)!=null&&$u.keyframesId)return Fs.set((Bu=this.data)==null?void 0:Bu.keyframesId,{keyframeId:(Ru=this.privateState.currentPlayKeyframe)==null?void 0:Ru.keyframe.id,fiveState:this.five.getCurrentState(),duration:(Lu=this.privateState.currentPlayKeyframe)==null?void 0:Lu.originDuration,playedProgress:this.getProgress()})}clearPauseData(){var $u,Bu;if(($u=this.data)!=null&&$u.keyframesId)return Fs.delete((Bu=this.data)==null?void 0:Bu.keyframesId)}clear(){this.clearPauseData(),this.privateState.currentPlayKeyframe=null}handleDispose(){var $u,Bu;this.setState({playing:!1}),this.clearPauseData(),this.clear(),($u=this.GuideLine)==null||$u.dispose(),this.GuideLine=void 0,(Bu=this.privateState.disposers)==null||Bu.forEach(Ru=>Ru==null?void 0:Ru())}actionIfStateIsEnabled($u,Bu){if(this.state.enabled)return $u();Bu!=null&&Bu.warnLog&&h0()}async waitFiveLoaded(){return new Promise($u=>{if(this.five.work){$u();return}this.five.once("loaded",()=>{$u()})})}setFiveLinearUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=$u=>{const Bu=this.five.controller.cameraMotion,Ru=$u-Bu.startTime;return Ru<0?0:Ru>=Bu.duration?1:1-d0(1,Bu.startVelocity,Bu.duration,Ru)})}setFiveOriginUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=this.privateState.fiveOriginGetProgress)}}v(qc,"PluginVersion",Zc);var Pt={exports:{}};function ts(_u){return _u===null?"null":typeof _u>"u"?"undefined":typeof _u=="object"?Array.isArray(_u)?"array":"object":typeof _u}function Kc(_u){return ts(_u)==="object"?lo(_u):ts(_u)==="array"?ao(_u):_u}function ao(_u){return _u.map(Kc)}function lo(_u){const $u={};for(const Bu in _u)!_u.hasOwnProperty(Bu)||($u[Bu]=Kc(_u[Bu]));return $u}function ms(_u,$u=[],Bu={}){const Ru={arrayBehaviour:Bu.arrayBehaviour||"replace"},Lu=$u.map(Fu=>Fu||{}),Ou=_u||{};for(let Fu=0;Fu<Lu.length;Fu++){const Nu=Lu[Fu],Vu=Object.keys(Nu);for(let Uu=0;Uu<Vu.length;Uu++){const Gu=Vu[Uu],zu=Nu[Gu],Hu=ts(zu),ju=ts(Ou[Gu]);if(Hu==="object")if(ju!=="undefined"){const Qu=ju==="object"?Ou[Gu]:{};Ou[Gu]=ms({},[Qu,lo(zu)],Ru)}else Ou[Gu]=lo(zu);else if(Hu==="array")if(ju==="array"){const Qu=ao(zu);Ou[Gu]=Ru.arrayBehaviour==="merge"?Ou[Gu].concat(Qu):Qu}else Ou[Gu]=ao(zu);else Ou[Gu]=zu}}return Ou}Pt.exports=function(_u,...$u){return ms(_u,$u)};Pt.exports.noMutate=function(..._u){return ms({},_u)};Pt.exports.withOptions=function(_u,$u,Bu){return ms(_u,$u,Bu)};function m0(_u,$u){$u.forEach(Bu=>{const Ru=new SphereGeometry(.02,16,16),Lu=[],Ou=[new MeshBasicMaterial({color:16776960}),new MeshBasicMaterial({color:16711935}),new MeshBasicMaterial({color:16711680}),new MeshBasicMaterial({color:65535})];if(Bu.position.length===4)Bu.position.forEach((Fu,Nu)=>{const Vu=Ou[Nu],Uu=new Mesh(Ru,Vu);Uu.position.copy(Ht(Fu)),Lu.push(Uu)});else{const Fu=Ou[0],Nu=new Mesh(Ru,Fu);Nu.position.copy(Ht(Bu.position)),Lu.push(Nu)}Lu.forEach(Fu=>{Fu.material.depthTest=!1,_u.scene.add(Fu)})})}const Ge=_u=>_u;function $c(_u){if(_u.length<3)return;const $u=_u.map(Kn),Bu=$u[1].clone().sub($u[0]),Ru=$u[2].clone().sub($u[1]);return Bu.cross(Ru)}function Li(_u){if(Array.isArray(_u)&&_u.length===4){const $u=_u.map(Kn);return tc($u[0],$u[2])}else return Kn(_u)}function Mi(_u,$u){if(_u===void 0)return;const{min:Bu,max:Ru}=$u!=null?$u:{};if(!(Bu===void 0&&Ru===void 0))return!(typeof Ru=="number"&&Ru<_u||typeof Bu=="number"&&Bu>_u)}function g0(_u,$u){_u.model.loaded?$u():_u.once("modelLoaded",()=>$u())}function v0(_u,$u,Bu){const Ru=new Plane().setFromNormalAndCoplanarPoint(Bu,$u),Lu=$u.clone().sub(_u).cross(new Vector3(0,1,0)).setLength(.01),Ou=new Vector3(0,.01,0);return[$u.clone().sub(Lu).sub(Ou),$u.clone().add(Lu).sub(Ou),$u.clone().add(Lu).add(Ou),$u.clone().sub(Lu).add(Ou)].map(Fu=>Ru.projectPoint(Fu,new Vector3))}const za=(_u,$u=1e3/60)=>{let Bu=null;const Ru=_u;return(...Lu)=>{Bu&&clearTimeout(Bu),Bu=setTimeout(()=>{Ru==null||Ru(...Lu),Bu&&clearTimeout(Bu),Bu=null},$u)}};function b0(_u,$u=200){let Bu;return function(...Ru){Bu||(_u.apply(this,Ru),Bu=setTimeout(function(){Bu=null},$u))}}function A0(_u,$u){const[Bu,Ru]=$u;if(Bu>=Ru||Ru<=1||Bu<=1)return-1;const Lu={},Ou=Fu=>(Lu[Fu]||(Lu[Fu]=_u(Fu)),Lu[Fu]);for(let Fu=Bu;Fu<Ru;Fu++){const Nu=Ou(Fu),Vu=Ou(Fu-1);if(Nu<Vu)return Fu}return-1}function Oa(_u,$u){if(!$u||typeof ResizeObserver>"u"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Bu=new ResizeObserver(_u);return{observe:()=>Bu.observe($u),unobserve:()=>Bu.unobserve($u)}}}var wt=(_u=>(_u.Two="2D",_u.Three="3D",_u))(wt||{}),ut=(_u=>(_u.PointTag="PointTag",_u.PlaneTag="PlaneTag",_u))(ut||{}),ht=(_u=>(_u.Audio="Audio",_u.Text="Text",_u.ImageText="ImageText",_u.Link="Link",_u.Marketing="Marketing",_u.MediaPlane="MediaPlane",_u.Custom="Custom",_u))(ht||{}),co=(_u=>(_u.VrLink="vr",_u.NormalLink="normal",_u))(co||{});function y0(_u){me(_u,"svelte-1omzoh4",".straight-line.svelte-1omzoh4{display:block;width:100%;height:100%;overflow:visible}")}function ja(_u){let $u,Bu,Ru,Lu;return{c(){$u=Te("path"),C($u,"fill","none"),C($u,"stroke","url(#"+_u[4]+")"),C($u,"stroke-width","1"),C($u,"d","M0 0.5 L 148 0.5")},m(Ou,Fu){N(Ou,$u,Fu),Lu=!0},p(Ou,Fu){_u=Ou},i(Ou){Lu||(Ou&&Be(()=>{Ru&&Ru.end(1),Bu=bn($u,qi,{duration:_u[1],delay:_u[0]}),Bu.start()}),Lu=!0)},o(Ou){Bu&&Bu.invalidate(),Ou&&(Ru=zn($u,qi,{duration:_u[1],delay:_u[2]})),Lu=!1},d(Ou){Ou&&H($u),Ou&&Ru&&Ru.end()}}}function w0(_u){let $u,Bu,Ru,Lu,Ou,Fu=_u[3]&&ja(_u);return{c(){$u=Te("svg"),Bu=Te("defs"),Ru=Te("linearGradient"),Lu=Te("stop"),Ou=Te("stop"),Fu&&Fu.c(),C(Lu,"offset","25%"),C(Lu,"stop-color","white"),C(Lu,"stop-opacity","1"),C(Ou,"offset","100%"),C(Ou,"stop-color","white"),C(Ou,"stop-opacity","0.5"),C(Ru,"id",_u[4]),C(Ru,"gradientUnits","userSpaceOnUse"),C($u,"class","straight-line svelte-1omzoh4"),C($u,"viewBox","0 0 148 1"),C($u,"preserveAspectRatio","none")},m(Nu,Vu){N(Nu,$u,Vu),_($u,Bu),_(Bu,Ru),_(Ru,Lu),_(Ru,Ou),Fu&&Fu.m($u,null)},p(Nu,[Vu]){Nu[3]?Fu?(Fu.p(Nu,Vu),Vu&8&&M(Fu,1)):(Fu=ja(Nu),Fu.c(),M(Fu,1),Fu.m($u,null)):Fu&&(ve(),F(Fu,1,1,()=>{Fu=null}),be())},i(Nu){M(Fu)},o(Nu){F(Fu)},d(Nu){Nu&&H($u),Fu&&Fu.d()}}}function E0(_u,$u,Bu){let{inDelay:Ru=0}=$u,{duration:Lu=0}=$u,{outDelay:Ou=0}=$u,{unfolded:Fu}=$u;const Nu=it();return _u.$$set=Vu=>{"inDelay"in Vu&&Bu(0,Ru=Vu.inDelay),"duration"in Vu&&Bu(1,Lu=Vu.duration),"outDelay"in Vu&&Bu(2,Ou=Vu.outDelay),"unfolded"in Vu&&Bu(3,Fu=Vu.unfolded)},[Ru,Lu,Ou,Fu,Nu]}class eu extends fe{constructor($u){super(),de(this,$u,E0,w0,ue,{inDelay:0,duration:1,outDelay:2,unfolded:3},y0)}}function P0(_u){me(_u,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function Ba(_u){let $u,Bu,Ru,Lu,Ou;return{c(){$u=Q("div"),C($u,"class","shadow svelte-faoauy"),C($u,"style",Bu=`
      left:${ct(_u[5])};
      bottom:${ct(_u[6])};
      box-shadow: 0 0 ${ct(_u[10])} ${ct(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),W($u,"width",ct(_u[3])),W($u,"height",ct(_u[4])),W($u,"z-index",_u[13])},m(Fu,Nu){N(Fu,$u,Nu),Ou=!0},p(Fu,Nu){_u=Fu,(!Ou||Nu&8160&&Bu!==(Bu=`
      left:${ct(_u[5])};
      bottom:${ct(_u[6])};
      box-shadow: 0 0 ${ct(_u[10])} ${ct(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&C($u,"style",Bu),Nu&8&&W($u,"width",ct(_u[3])),Nu&16&&W($u,"height",ct(_u[4])),Nu&8192&&W($u,"z-index",_u[13])},i(Fu){Ou||(Fu&&Be(()=>{Lu&&Lu.end(1),Ru=bn($u,pn,{duration:_u[0]}),Ru.start()}),Ou=!0)},o(Fu){Ru&&Ru.invalidate(),Fu&&(Lu=zn($u,pn,{duration:_u[1]})),Ou=!1},d(Fu){Fu&&H($u),Fu&&Lu&&Lu.end()}}}function C0(_u){let $u,Bu=_u[2]&&Ba(_u);return{c(){Bu&&Bu.c(),$u=Ce()},m(Ru,Lu){Bu&&Bu.m(Ru,Lu),N(Ru,$u,Lu)},p(Ru,[Lu]){Ru[2]?Bu?(Bu.p(Ru,Lu),Lu&4&&M(Bu,1)):(Bu=Ba(Ru),Bu.c(),M(Bu,1),Bu.m($u.parentNode,$u)):Bu&&(ve(),F(Bu,1,1,()=>{Bu=null}),be())},i(Ru){M(Bu)},o(Ru){F(Bu)},d(Ru){Bu&&Bu.d(Ru),Ru&&H($u)}}}function ct(_u){return typeof _u=="number"?_u/16+"rem":_u}function I0(_u,$u,Bu){let{inDelay:Ru=1e3}=$u,{outDelay:Lu=1e3}=$u,{visible:Ou=!0}=$u,{width:Fu=0}=$u,{height:Nu=0}=$u,{left:Vu=0}=$u,{bottom:Uu=0}=$u,{center:Gu=!1}=$u,{horizontalCenter:zu=!1}=$u,{verticalCenter:Hu=!1}=$u,{blurRadius:ju}=$u,{spreadRadius:Qu}=$u,{opacity:Xu=.15}=$u,{zIndex:Ku=void 0}=$u;return _u.$$set=Wu=>{"inDelay"in Wu&&Bu(0,Ru=Wu.inDelay),"outDelay"in Wu&&Bu(1,Lu=Wu.outDelay),"visible"in Wu&&Bu(2,Ou=Wu.visible),"width"in Wu&&Bu(3,Fu=Wu.width),"height"in Wu&&Bu(4,Nu=Wu.height),"left"in Wu&&Bu(5,Vu=Wu.left),"bottom"in Wu&&Bu(6,Uu=Wu.bottom),"center"in Wu&&Bu(7,Gu=Wu.center),"horizontalCenter"in Wu&&Bu(8,zu=Wu.horizontalCenter),"verticalCenter"in Wu&&Bu(9,Hu=Wu.verticalCenter),"blurRadius"in Wu&&Bu(10,ju=Wu.blurRadius),"spreadRadius"in Wu&&Bu(11,Qu=Wu.spreadRadius),"opacity"in Wu&&Bu(12,Xu=Wu.opacity),"zIndex"in Wu&&Bu(13,Ku=Wu.zIndex)},[Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku]}class vt extends fe{constructor($u){super(),de(this,$u,I0,C0,ue,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,blurRadius:10,spreadRadius:11,opacity:12,zIndex:13},P0)}}var tu={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Ro={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},x0=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ns={CSS:{},springs:{}};function Ct(_u,$u,Bu){return Math.min(Math.max(_u,$u),Bu)}function Zn(_u,$u){return _u.indexOf($u)>-1}function Ns(_u,$u){return _u.apply(null,$u)}var pe={arr:function(_u){return Array.isArray(_u)},obj:function(_u){return Zn(Object.prototype.toString.call(_u),"Object")},pth:function(_u){return pe.obj(_u)&&_u.hasOwnProperty("totalLength")},svg:function(_u){return _u instanceof SVGElement},inp:function(_u){return _u instanceof HTMLInputElement},dom:function(_u){return _u.nodeType||pe.svg(_u)},str:function(_u){return typeof _u=="string"},fnc:function(_u){return typeof _u=="function"},und:function(_u){return typeof _u>"u"},nil:function(_u){return pe.und(_u)||_u===null},hex:function(_u){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(_u)},rgb:function(_u){return/^rgb/.test(_u)},hsl:function(_u){return/^hsl/.test(_u)},col:function(_u){return pe.hex(_u)||pe.rgb(_u)||pe.hsl(_u)},key:function(_u){return!tu.hasOwnProperty(_u)&&!Ro.hasOwnProperty(_u)&&_u!=="targets"&&_u!=="keyframes"}};function nu(_u){var $u=/\(([^)]+)\)/.exec(_u);return $u?$u[1].split(",").map(function(Bu){return parseFloat(Bu)}):[]}function iu(_u,$u){var Bu=nu(_u),Ru=Ct(pe.und(Bu[0])?1:Bu[0],.1,100),Lu=Ct(pe.und(Bu[1])?100:Bu[1],.1,100),Ou=Ct(pe.und(Bu[2])?10:Bu[2],.1,100),Fu=Ct(pe.und(Bu[3])?0:Bu[3],.1,100),Nu=Math.sqrt(Lu/Ru),Vu=Ou/(2*Math.sqrt(Lu*Ru)),Uu=Vu<1?Nu*Math.sqrt(1-Vu*Vu):0,Gu=1,zu=Vu<1?(Vu*Nu+-Fu)/Uu:-Fu+Nu;function Hu(Qu){var Xu=$u?$u*Qu/1e3:Qu;return Vu<1?Xu=Math.exp(-Xu*Vu*Nu)*(Gu*Math.cos(Uu*Xu)+zu*Math.sin(Uu*Xu)):Xu=(Gu+zu*Xu)*Math.exp(-Xu*Nu),Qu===0||Qu===1?Qu:1-Xu}function ju(){var Qu=ns.springs[_u];if(Qu)return Qu;for(var Xu=1/6,Ku=0,Wu=0;;)if(Ku+=Xu,Hu(Ku)===1){if(Wu++,Wu>=16)break}else Wu=0;var qu=Ku*Xu*1e3;return ns.springs[_u]=qu,qu}return $u?Hu:ju}function T0(_u){return _u===void 0&&(_u=10),function($u){return Math.ceil(Ct($u,1e-6,1)*_u)*(1/_u)}}var S0=function(){var _u=11,$u=1/(_u-1);function Bu(Gu,zu){return 1-3*zu+3*Gu}function Ru(Gu,zu){return 3*zu-6*Gu}function Lu(Gu){return 3*Gu}function Ou(Gu,zu,Hu){return((Bu(zu,Hu)*Gu+Ru(zu,Hu))*Gu+Lu(zu))*Gu}function Fu(Gu,zu,Hu){return 3*Bu(zu,Hu)*Gu*Gu+2*Ru(zu,Hu)*Gu+Lu(zu)}function Nu(Gu,zu,Hu,ju,Qu){var Xu,Ku,Wu=0;do Ku=zu+(Hu-zu)/2,Xu=Ou(Ku,ju,Qu)-Gu,Xu>0?Hu=Ku:zu=Ku;while(Math.abs(Xu)>1e-7&&++Wu<10);return Ku}function Vu(Gu,zu,Hu,ju){for(var Qu=0;Qu<4;++Qu){var Xu=Fu(zu,Hu,ju);if(Xu===0)return zu;var Ku=Ou(zu,Hu,ju)-Gu;zu-=Ku/Xu}return zu}function Uu(Gu,zu,Hu,ju){if(!(0<=Gu&&Gu<=1&&0<=Hu&&Hu<=1))return;var Qu=new Float32Array(_u);if(Gu!==zu||Hu!==ju)for(var Xu=0;Xu<_u;++Xu)Qu[Xu]=Ou(Xu*$u,Gu,Hu);function Ku(Wu){for(var qu=0,Yu=1,Zu=_u-1;Yu!==Zu&&Qu[Yu]<=Wu;++Yu)qu+=$u;--Yu;var _h=(Wu-Qu[Yu])/(Qu[Yu+1]-Qu[Yu]),ep=qu+_h*$u,ip=Fu(ep,Gu,Hu);return ip>=.001?Vu(Wu,ep,Gu,Hu):ip===0?ep:Nu(Wu,qu,qu+$u,Gu,Hu)}return function(Wu){return Gu===zu&&Hu===ju||Wu===0||Wu===1?Wu:Ou(Ku(Wu),zu,ju)}}return Uu}(),su=function(){var _u={linear:function(){return function(Ru){return Ru}}},$u={Sine:function(){return function(Ru){return 1-Math.cos(Ru*Math.PI/2)}},Circ:function(){return function(Ru){return 1-Math.sqrt(1-Ru*Ru)}},Back:function(){return function(Ru){return Ru*Ru*(3*Ru-2)}},Bounce:function(){return function(Ru){for(var Lu,Ou=4;Ru<((Lu=Math.pow(2,--Ou))-1)/11;);return 1/Math.pow(4,3-Ou)-7.5625*Math.pow((Lu*3-2)/22-Ru,2)}},Elastic:function(Ru,Lu){Ru===void 0&&(Ru=1),Lu===void 0&&(Lu=.5);var Ou=Ct(Ru,1,10),Fu=Ct(Lu,.1,2);return function(Nu){return Nu===0||Nu===1?Nu:-Ou*Math.pow(2,10*(Nu-1))*Math.sin((Nu-1-Fu/(Math.PI*2)*Math.asin(1/Ou))*(Math.PI*2)/Fu)}}},Bu=["Quad","Cubic","Quart","Quint","Expo"];return Bu.forEach(function(Ru,Lu){$u[Ru]=function(){return function(Ou){return Math.pow(Ou,Lu+2)}}}),Object.keys($u).forEach(function(Ru){var Lu=$u[Ru];_u["easeIn"+Ru]=Lu,_u["easeOut"+Ru]=function(Ou,Fu){return function(Nu){return 1-Lu(Ou,Fu)(1-Nu)}},_u["easeInOut"+Ru]=function(Ou,Fu){return function(Nu){return Nu<.5?Lu(Ou,Fu)(Nu*2)/2:1-Lu(Ou,Fu)(Nu*-2+2)/2}},_u["easeOutIn"+Ru]=function(Ou,Fu){return function(Nu){return Nu<.5?(1-Lu(Ou,Fu)(1-Nu*2))/2:(Lu(Ou,Fu)(Nu*2-1)+1)/2}}}),_u}();function Ho(_u,$u){if(pe.fnc(_u))return _u;var Bu=_u.split("(")[0],Ru=su[Bu],Lu=nu(_u);switch(Bu){case"spring":return iu(_u,$u);case"cubicBezier":return Ns(S0,Lu);case"steps":return Ns(T0,Lu);default:return Ns(Ru,Lu)}}function ou(_u){try{var $u=document.querySelectorAll(_u);return $u}catch{return}}function gs(_u,$u){for(var Bu=_u.length,Ru=arguments.length>=2?arguments[1]:void 0,Lu=[],Ou=0;Ou<Bu;Ou++)if(Ou in _u){var Fu=_u[Ou];$u.call(Ru,Fu,Ou,_u)&&Lu.push(Fu)}return Lu}function vs(_u){return _u.reduce(function($u,Bu){return $u.concat(pe.arr(Bu)?vs(Bu):Bu)},[])}function Ra(_u){return pe.arr(_u)?_u:(pe.str(_u)&&(_u=ou(_u)||_u),_u instanceof NodeList||_u instanceof HTMLCollection?[].slice.call(_u):[_u])}function Fo(_u,$u){return _u.some(function(Bu){return Bu===$u})}function No(_u){var $u={};for(var Bu in _u)$u[Bu]=_u[Bu];return $u}function uo(_u,$u){var Bu=No(_u);for(var Ru in _u)Bu[Ru]=$u.hasOwnProperty(Ru)?$u[Ru]:_u[Ru];return Bu}function bs(_u,$u){var Bu=No(_u);for(var Ru in $u)Bu[Ru]=pe.und(_u[Ru])?$u[Ru]:_u[Ru];return Bu}function k0(_u){var $u=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(_u);return $u?"rgba("+$u[1]+",1)":_u}function D0(_u){var $u=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Bu=_u.replace($u,function(Nu,Vu,Uu,Gu){return Vu+Vu+Uu+Uu+Gu+Gu}),Ru=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Bu),Lu=parseInt(Ru[1],16),Ou=parseInt(Ru[2],16),Fu=parseInt(Ru[3],16);return"rgba("+Lu+","+Ou+","+Fu+",1)"}function L0(_u){var $u=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_u)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(_u),Bu=parseInt($u[1],10)/360,Ru=parseInt($u[2],10)/100,Lu=parseInt($u[3],10)/100,Ou=$u[4]||1;function Fu(Hu,ju,Qu){return Qu<0&&(Qu+=1),Qu>1&&(Qu-=1),Qu<1/6?Hu+(ju-Hu)*6*Qu:Qu<1/2?ju:Qu<2/3?Hu+(ju-Hu)*(2/3-Qu)*6:Hu}var Nu,Vu,Uu;if(Ru==0)Nu=Vu=Uu=Lu;else{var Gu=Lu<.5?Lu*(1+Ru):Lu+Ru-Lu*Ru,zu=2*Lu-Gu;Nu=Fu(zu,Gu,Bu+1/3),Vu=Fu(zu,Gu,Bu),Uu=Fu(zu,Gu,Bu-1/3)}return"rgba("+Nu*255+","+Vu*255+","+Uu*255+","+Ou+")"}function M0(_u){if(pe.rgb(_u))return k0(_u);if(pe.hex(_u))return D0(_u);if(pe.hsl(_u))return L0(_u)}function Ft(_u){var $u=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(_u);if($u)return $u[1]}function z0(_u){if(Zn(_u,"translate")||_u==="perspective")return"px";if(Zn(_u,"rotate")||Zn(_u,"skew"))return"deg"}function fo(_u,$u){return pe.fnc(_u)?_u($u.target,$u.id,$u.total):_u}function It(_u,$u){return _u.getAttribute($u)}function Go(_u,$u,Bu){var Ru=Ft($u);if(Fo([Bu,"deg","rad","turn"],Ru))return $u;var Lu=ns.CSS[$u+Bu];if(!pe.und(Lu))return Lu;var Ou=100,Fu=document.createElement(_u.tagName),Nu=_u.parentNode&&_u.parentNode!==document?_u.parentNode:document.body;Nu.appendChild(Fu),Fu.style.position="absolute",Fu.style.width=Ou+Bu;var Vu=Ou/Fu.offsetWidth;Nu.removeChild(Fu);var Uu=Vu*parseFloat($u);return ns.CSS[$u+Bu]=Uu,Uu}function ru(_u,$u,Bu){if($u in _u.style){var Ru=$u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Lu=_u.style[$u]||getComputedStyle(_u).getPropertyValue(Ru)||"0";return Bu?Go(_u,Lu,Bu):Lu}}function Qo(_u,$u){if(pe.dom(_u)&&!pe.inp(_u)&&(!pe.nil(It(_u,$u))||pe.svg(_u)&&_u[$u]))return"attribute";if(pe.dom(_u)&&Fo(x0,$u))return"transform";if(pe.dom(_u)&&$u!=="transform"&&ru(_u,$u))return"css";if(_u[$u]!=null)return"object"}function au(_u){if(pe.dom(_u)){for(var $u=_u.style.transform||"",Bu=/(\w+)\(([^)]*)\)/g,Ru=new Map,Lu;Lu=Bu.exec($u);)Ru.set(Lu[1],Lu[2]);return Ru}}function O0(_u,$u,Bu,Ru){var Lu=Zn($u,"scale")?1:0+z0($u),Ou=au(_u).get($u)||Lu;return Bu&&(Bu.transforms.list.set($u,Ou),Bu.transforms.last=$u),Ru?Go(_u,Ou,Ru):Ou}function _o(_u,$u,Bu,Ru){switch(Qo(_u,$u)){case"transform":return O0(_u,$u,Ru,Bu);case"css":return ru(_u,$u,Bu);case"attribute":return It(_u,$u);default:return _u[$u]||0}}function Wo(_u,$u){var Bu=/^(\*=|\+=|-=)/.exec(_u);if(!Bu)return _u;var Ru=Ft(_u)||0,Lu=parseFloat($u),Ou=parseFloat(_u.replace(Bu[0],""));switch(Bu[0][0]){case"+":return Lu+Ou+Ru;case"-":return Lu-Ou+Ru;case"*":return Lu*Ou+Ru}}function lu(_u,$u){if(pe.col(_u))return M0(_u);if(/\s/g.test(_u))return _u;var Bu=Ft(_u),Ru=Bu?_u.substr(0,_u.length-Bu.length):_u;return $u?Ru+$u:Ru}function Xo(_u,$u){return Math.sqrt(Math.pow($u.x-_u.x,2)+Math.pow($u.y-_u.y,2))}function j0(_u){return Math.PI*2*It(_u,"r")}function B0(_u){return It(_u,"width")*2+It(_u,"height")*2}function R0(_u){return Xo({x:It(_u,"x1"),y:It(_u,"y1")},{x:It(_u,"x2"),y:It(_u,"y2")})}function cu(_u){for(var $u=_u.points,Bu=0,Ru,Lu=0;Lu<$u.numberOfItems;Lu++){var Ou=$u.getItem(Lu);Lu>0&&(Bu+=Xo(Ru,Ou)),Ru=Ou}return Bu}function H0(_u){var $u=_u.points;return cu(_u)+Xo($u.getItem($u.numberOfItems-1),$u.getItem(0))}function uu(_u){if(_u.getTotalLength)return _u.getTotalLength();switch(_u.tagName.toLowerCase()){case"circle":return j0(_u);case"rect":return B0(_u);case"line":return R0(_u);case"polyline":return cu(_u);case"polygon":return H0(_u)}}function F0(_u){var $u=uu(_u);return _u.setAttribute("stroke-dasharray",$u),$u}function N0(_u){for(var $u=_u.parentNode;pe.svg($u)&&pe.svg($u.parentNode);)$u=$u.parentNode;return $u}function du(_u,$u){var Bu=$u||{},Ru=Bu.el||N0(_u),Lu=Ru.getBoundingClientRect(),Ou=It(Ru,"viewBox"),Fu=Lu.width,Nu=Lu.height,Vu=Bu.viewBox||(Ou?Ou.split(" "):[0,0,Fu,Nu]);return{el:Ru,viewBox:Vu,x:Vu[0]/1,y:Vu[1]/1,w:Fu,h:Nu,vW:Vu[2],vH:Vu[3]}}function G0(_u,$u){var Bu=pe.str(_u)?ou(_u)[0]:_u,Ru=$u||100;return function(Lu){return{property:Lu,el:Bu,svg:du(Bu),totalLength:uu(Bu)*(Ru/100)}}}function Q0(_u,$u,Bu){function Ru(Gu){Gu===void 0&&(Gu=0);var zu=$u+Gu>=1?$u+Gu:0;return _u.el.getPointAtLength(zu)}var Lu=du(_u.el,_u.svg),Ou=Ru(),Fu=Ru(-1),Nu=Ru(1),Vu=Bu?1:Lu.w/Lu.vW,Uu=Bu?1:Lu.h/Lu.vH;switch(_u.property){case"x":return(Ou.x-Lu.x)*Vu;case"y":return(Ou.y-Lu.y)*Uu;case"angle":return Math.atan2(Nu.y-Fu.y,Nu.x-Fu.x)*180/Math.PI}}function Ha(_u,$u){var Bu=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Ru=lu(pe.pth(_u)?_u.totalLength:_u,$u)+"";return{original:Ru,numbers:Ru.match(Bu)?Ru.match(Bu).map(Number):[0],strings:pe.str(_u)||$u?Ru.split(Bu):[]}}function Yo(_u){var $u=_u?vs(pe.arr(_u)?_u.map(Ra):Ra(_u)):[];return gs($u,function(Bu,Ru,Lu){return Lu.indexOf(Bu)===Ru})}function fu(_u){var $u=Yo(_u);return $u.map(function(Bu,Ru){return{target:Bu,id:Ru,total:$u.length,transforms:{list:au(Bu)}}})}function _0(_u,$u){var Bu=No($u);if(/^spring/.test(Bu.easing)&&(Bu.duration=iu(Bu.easing)),pe.arr(_u)){var Ru=_u.length,Lu=Ru===2&&!pe.obj(_u[0]);Lu?_u={value:_u}:pe.fnc($u.duration)||(Bu.duration=$u.duration/Ru)}var Ou=pe.arr(_u)?_u:[_u];return Ou.map(function(Fu,Nu){var Vu=pe.obj(Fu)&&!pe.pth(Fu)?Fu:{value:Fu};return pe.und(Vu.delay)&&(Vu.delay=Nu?0:$u.delay),pe.und(Vu.endDelay)&&(Vu.endDelay=Nu===Ou.length-1?$u.endDelay:0),Vu}).map(function(Fu){return bs(Fu,Bu)})}function W0(_u){for(var $u=gs(vs(_u.map(function(Ou){return Object.keys(Ou)})),function(Ou){return pe.key(Ou)}).reduce(function(Ou,Fu){return Ou.indexOf(Fu)<0&&Ou.push(Fu),Ou},[]),Bu={},Ru=function(Ou){var Fu=$u[Ou];Bu[Fu]=_u.map(function(Nu){var Vu={};for(var Uu in Nu)pe.key(Uu)?Uu==Fu&&(Vu.value=Nu[Uu]):Vu[Uu]=Nu[Uu];return Vu})},Lu=0;Lu<$u.length;Lu++)Ru(Lu);return Bu}function X0(_u,$u){var Bu=[],Ru=$u.keyframes;Ru&&($u=bs(W0(Ru),$u));for(var Lu in $u)pe.key(Lu)&&Bu.push({name:Lu,tweens:_0($u[Lu],_u)});return Bu}function Y0(_u,$u){var Bu={};for(var Ru in _u){var Lu=fo(_u[Ru],$u);pe.arr(Lu)&&(Lu=Lu.map(function(Ou){return fo(Ou,$u)}),Lu.length===1&&(Lu=Lu[0])),Bu[Ru]=Lu}return Bu.duration=parseFloat(Bu.duration),Bu.delay=parseFloat(Bu.delay),Bu}function U0(_u,$u){var Bu;return _u.tweens.map(function(Ru){var Lu=Y0(Ru,$u),Ou=Lu.value,Fu=pe.arr(Ou)?Ou[1]:Ou,Nu=Ft(Fu),Vu=_o($u.target,_u.name,Nu,$u),Uu=Bu?Bu.to.original:Vu,Gu=pe.arr(Ou)?Ou[0]:Uu,zu=Ft(Gu)||Ft(Vu),Hu=Nu||zu;return pe.und(Fu)&&(Fu=Uu),Lu.from=Ha(Gu,Hu),Lu.to=Ha(Wo(Fu,Gu),Hu),Lu.start=Bu?Bu.end:0,Lu.end=Lu.start+Lu.delay+Lu.duration+Lu.endDelay,Lu.easing=Ho(Lu.easing,Lu.duration),Lu.isPath=pe.pth(Ou),Lu.isPathTargetInsideSVG=Lu.isPath&&pe.svg($u.target),Lu.isColor=pe.col(Lu.from.original),Lu.isColor&&(Lu.round=1),Bu=Lu,Lu})}var hu={css:function(_u,$u,Bu){return _u.style[$u]=Bu},attribute:function(_u,$u,Bu){return _u.setAttribute($u,Bu)},object:function(_u,$u,Bu){return _u[$u]=Bu},transform:function(_u,$u,Bu,Ru,Lu){if(Ru.list.set($u,Bu),$u===Ru.last||Lu){var Ou="";Ru.list.forEach(function(Fu,Nu){Ou+=Nu+"("+Fu+") "}),_u.style.transform=Ou}}};function pu(_u,$u){var Bu=fu(_u);Bu.forEach(function(Ru){for(var Lu in $u){var Ou=fo($u[Lu],Ru),Fu=Ru.target,Nu=Ft(Ou),Vu=_o(Fu,Lu,Nu,Ru),Uu=Nu||Ft(Vu),Gu=Wo(lu(Ou,Uu),Vu),zu=Qo(Fu,Lu);hu[zu](Fu,Lu,Gu,Ru.transforms,!0)}})}function V0(_u,$u){var Bu=Qo(_u.target,$u.name);if(Bu){var Ru=U0($u,_u),Lu=Ru[Ru.length-1];return{type:Bu,property:$u.name,animatable:_u,tweens:Ru,duration:Lu.end,delay:Ru[0].delay,endDelay:Lu.endDelay}}}function Z0(_u,$u){return gs(vs(_u.map(function(Bu){return $u.map(function(Ru){return V0(Bu,Ru)})})),function(Bu){return!pe.und(Bu)})}function mu(_u,$u){var Bu=_u.length,Ru=function(Ou){return Ou.timelineOffset?Ou.timelineOffset:0},Lu={};return Lu.duration=Bu?Math.max.apply(Math,_u.map(function(Ou){return Ru(Ou)+Ou.duration})):$u.duration,Lu.delay=Bu?Math.min.apply(Math,_u.map(function(Ou){return Ru(Ou)+Ou.delay})):$u.delay,Lu.endDelay=Bu?Lu.duration-Math.max.apply(Math,_u.map(function(Ou){return Ru(Ou)+Ou.duration-Ou.endDelay})):$u.endDelay,Lu}var Fa=0;function J0(_u){var $u=uo(tu,_u),Bu=uo(Ro,_u),Ru=X0(Bu,_u),Lu=fu(_u.targets),Ou=Z0(Lu,Ru),Fu=mu(Ou,Bu),Nu=Fa;return Fa++,bs($u,{id:Nu,children:[],animatables:Lu,animations:Ou,duration:Fu.duration,delay:Fu.delay,endDelay:Fu.endDelay})}var pt=[],gu=function(){var _u;function $u(){!_u&&(!Na()||!Le.suspendWhenDocumentHidden)&&pt.length>0&&(_u=requestAnimationFrame(Bu))}function Bu(Lu){for(var Ou=pt.length,Fu=0;Fu<Ou;){var Nu=pt[Fu];Nu.paused?(pt.splice(Fu,1),Ou--):(Nu.tick(Lu),Fu++)}_u=Fu>0?requestAnimationFrame(Bu):void 0}function Ru(){!Le.suspendWhenDocumentHidden||(Na()?_u=cancelAnimationFrame(_u):(pt.forEach(function(Lu){return Lu._onDocumentVisibility()}),gu()))}return typeof document<"u"&&document.addEventListener("visibilitychange",Ru),$u}();function Na(){return!!document&&document.hidden}function Le(_u){_u===void 0&&(_u={});var $u=0,Bu=0,Ru=0,Lu,Ou=0,Fu=null;function Nu(qu){var Yu=window.Promise&&new Promise(function(Zu){return Fu=Zu});return qu.finished=Yu,Yu}var Vu=J0(_u);Nu(Vu);function Uu(){var qu=Vu.direction;qu!=="alternate"&&(Vu.direction=qu!=="normal"?"normal":"reverse"),Vu.reversed=!Vu.reversed,Lu.forEach(function(Yu){return Yu.reversed=Vu.reversed})}function Gu(qu){return Vu.reversed?Vu.duration-qu:qu}function zu(){$u=0,Bu=Gu(Vu.currentTime)*(1/Le.speed)}function Hu(qu,Yu){Yu&&Yu.seek(qu-Yu.timelineOffset)}function ju(qu){if(Vu.reversePlayback)for(var Yu=Ou;Yu--;)Hu(qu,Lu[Yu]);else for(var Zu=0;Zu<Ou;Zu++)Hu(qu,Lu[Zu])}function Qu(qu){for(var Yu=0,Zu=Vu.animations,_h=Zu.length;Yu<_h;){var ep=Zu[Yu],ip=ep.animatable,ap=ep.tweens,sp=ap.length-1,Ju=ap[sp];sp&&(Ju=gs(ap,function(Bp){return qu<Bp.end})[0]||Ju);for(var _f=Ct(qu-Ju.start-Ju.delay,0,Ju.duration)/Ju.duration,np=isNaN(_f)?1:Ju.easing(_f),tp=Ju.to.strings,rp=Ju.round,op=[],lp=Ju.to.numbers.length,up=void 0,cp=0;cp<lp;cp++){var Ap=void 0,yp=Ju.to.numbers[cp],Ip=Ju.from.numbers[cp]||0;Ju.isPath?Ap=Q0(Ju.value,np*yp,Ju.isPathTargetInsideSVG):Ap=Ip+np*(yp-Ip),rp&&(Ju.isColor&&cp>2||(Ap=Math.round(Ap*rp)/rp)),op.push(Ap)}var Ep=tp.length;if(!Ep)up=op[0];else{up=tp[0];for(var Vp=0;Vp<Ep;Vp++){tp[Vp];var $p=tp[Vp+1],kp=op[Vp];isNaN(kp)||($p?up+=kp+$p:up+=kp+" ")}}hu[ep.type](ip.target,ep.property,up,ip.transforms),ep.currentValue=up,Yu++}}function Xu(qu){Vu[qu]&&!Vu.passThrough&&Vu[qu](Vu)}function Ku(){Vu.remaining&&Vu.remaining!==!0&&Vu.remaining--}function Wu(qu){var Yu=Vu.duration,Zu=Vu.delay,_h=Yu-Vu.endDelay,ep=Gu(qu);Vu.progress=Ct(ep/Yu*100,0,100),Vu.reversePlayback=ep<Vu.currentTime,Lu&&ju(ep),!Vu.began&&Vu.currentTime>0&&(Vu.began=!0,Xu("begin")),!Vu.loopBegan&&Vu.currentTime>0&&(Vu.loopBegan=!0,Xu("loopBegin")),ep<=Zu&&Vu.currentTime!==0&&Qu(0),(ep>=_h&&Vu.currentTime!==Yu||!Yu)&&Qu(Yu),ep>Zu&&ep<_h?(Vu.changeBegan||(Vu.changeBegan=!0,Vu.changeCompleted=!1,Xu("changeBegin")),Xu("change"),Qu(ep)):Vu.changeBegan&&(Vu.changeCompleted=!0,Vu.changeBegan=!1,Xu("changeComplete")),Vu.currentTime=Ct(ep,0,Yu),Vu.began&&Xu("update"),qu>=Yu&&(Bu=0,Ku(),Vu.remaining?($u=Ru,Xu("loopComplete"),Vu.loopBegan=!1,Vu.direction==="alternate"&&Uu()):(Vu.paused=!0,Vu.completed||(Vu.completed=!0,Xu("loopComplete"),Xu("complete"),!Vu.passThrough&&"Promise"in window&&(Fu(),Nu(Vu)))))}return Vu.reset=function(){var qu=Vu.direction;Vu.passThrough=!1,Vu.currentTime=0,Vu.progress=0,Vu.paused=!0,Vu.began=!1,Vu.loopBegan=!1,Vu.changeBegan=!1,Vu.completed=!1,Vu.changeCompleted=!1,Vu.reversePlayback=!1,Vu.reversed=qu==="reverse",Vu.remaining=Vu.loop,Lu=Vu.children,Ou=Lu.length;for(var Yu=Ou;Yu--;)Vu.children[Yu].reset();(Vu.reversed&&Vu.loop!==!0||qu==="alternate"&&Vu.loop===1)&&Vu.remaining++,Qu(Vu.reversed?Vu.duration:0)},Vu._onDocumentVisibility=zu,Vu.set=function(qu,Yu){return pu(qu,Yu),Vu},Vu.tick=function(qu){Ru=qu,$u||($u=Ru),Wu((Ru+(Bu-$u))*Le.speed)},Vu.seek=function(qu){Wu(Gu(qu))},Vu.pause=function(){Vu.paused=!0,zu()},Vu.play=function(){!Vu.paused||(Vu.completed&&Vu.reset(),Vu.paused=!1,pt.push(Vu),zu(),gu())},Vu.reverse=function(){Uu(),Vu.completed=!Vu.reversed,zu()},Vu.restart=function(){Vu.reset(),Vu.play()},Vu.remove=function(qu){var Yu=Yo(qu);vu(Yu,Vu)},Vu.reset(),Vu.autoplay&&Vu.play(),Vu}function Ga(_u,$u){for(var Bu=$u.length;Bu--;)Fo(_u,$u[Bu].animatable.target)&&$u.splice(Bu,1)}function vu(_u,$u){var Bu=$u.animations,Ru=$u.children;Ga(_u,Bu);for(var Lu=Ru.length;Lu--;){var Ou=Ru[Lu],Fu=Ou.animations;Ga(_u,Fu),!Fu.length&&!Ou.children.length&&Ru.splice(Lu,1)}!Bu.length&&!Ru.length&&$u.pause()}function q0(_u){for(var $u=Yo(_u),Bu=pt.length;Bu--;){var Ru=pt[Bu];vu($u,Ru)}}function K0(_u,$u){$u===void 0&&($u={});var Bu=$u.direction||"normal",Ru=$u.easing?Ho($u.easing):null,Lu=$u.grid,Ou=$u.axis,Fu=$u.from||0,Nu=Fu==="first",Vu=Fu==="center",Uu=Fu==="last",Gu=pe.arr(_u),zu=parseFloat(Gu?_u[0]:_u),Hu=Gu?parseFloat(_u[1]):0,ju=Ft(Gu?_u[1]:_u)||0,Qu=$u.start||0+(Gu?zu:0),Xu=[],Ku=0;return function(Wu,qu,Yu){if(Nu&&(Fu=0),Vu&&(Fu=(Yu-1)/2),Uu&&(Fu=Yu-1),!Xu.length){for(var Zu=0;Zu<Yu;Zu++){if(!Lu)Xu.push(Math.abs(Fu-Zu));else{var _h=Vu?(Lu[0]-1)/2:Fu%Lu[0],ep=Vu?(Lu[1]-1)/2:Math.floor(Fu/Lu[0]),ip=Zu%Lu[0],ap=Math.floor(Zu/Lu[0]),sp=_h-ip,Ju=ep-ap,_f=Math.sqrt(sp*sp+Ju*Ju);Ou==="x"&&(_f=-sp),Ou==="y"&&(_f=-Ju),Xu.push(_f)}Ku=Math.max.apply(Math,Xu)}Ru&&(Xu=Xu.map(function(tp){return Ru(tp/Ku)*Ku})),Bu==="reverse"&&(Xu=Xu.map(function(tp){return Ou?tp<0?tp*-1:-tp:Math.abs(Ku-tp)}))}var np=Gu?(Hu-zu)/Ku:zu;return Qu+np*(Math.round(Xu[qu]*100)/100)+ju}}function $0(_u){_u===void 0&&(_u={});var $u=Le(_u);return $u.duration=0,$u.add=function(Bu,Ru){var Lu=pt.indexOf($u),Ou=$u.children;Lu>-1&&pt.splice(Lu,1);function Fu(Hu){Hu.passThrough=!0}for(var Nu=0;Nu<Ou.length;Nu++)Fu(Ou[Nu]);var Vu=bs(Bu,uo(Ro,_u));Vu.targets=Vu.targets||_u.targets;var Uu=$u.duration;Vu.autoplay=!1,Vu.direction=$u.direction,Vu.timelineOffset=pe.und(Ru)?Uu:Wo(Ru,Uu),Fu($u),$u.seek(Vu.timelineOffset);var Gu=Le(Vu);Fu(Gu),Ou.push(Gu);var zu=mu(Ou,_u);return $u.delay=zu.delay,$u.endDelay=zu.endDelay,$u.duration=zu.duration,$u.seek(0),$u.reset(),$u.autoplay&&$u.play(),$u},$u}Le.version="3.2.1";Le.speed=1;Le.suspendWhenDocumentHidden=!0;Le.running=pt;Le.remove=q0;Le.get=_o;Le.set=pu;Le.convertPx=Go;Le.path=G0;Le.setDashoffset=F0;Le.stagger=K0;Le.timeline=$0;Le.easing=Ho;Le.penner=su;Le.random=function(_u,$u){return Math.floor(Math.random()*($u-_u+1))+_u};function ev(){return Math.random().toString(36).slice(-6)}const Qa=ev();function tv(_u){me(_u,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function _a(_u,$u,Bu){const Ru=_u.slice();return Ru[10]=$u[Bu],Ru[11]=$u,Ru[12]=Bu,Ru}function Wa(_u){let $u,Bu=_u[10]+"",Ru,Lu=_u[12];const Ou=()=>_u[6]($u,Lu),Fu=()=>_u[6](null,Lu);return{c(){$u=Q("span"),Ru=He(Bu),C($u,"class","text-char svelte-1b2n9wi")},m(Nu,Vu){N(Nu,$u,Vu),_($u,Ru),Ou()},p(Nu,Vu){_u=Nu,Vu&2&&Bu!==(Bu=_u[10]+"")&&Xe(Ru,Bu),Lu!==_u[12]&&(Fu(),Lu=_u[12],Ou())},d(Nu){Nu&&H($u),Fu()}}}function nv(_u){let $u,Bu=_u[1],Ru=[];for(let Lu=0;Lu<Bu.length;Lu+=1)Ru[Lu]=Wa(_a(_u,Bu,Lu));return{c(){for(let Lu=0;Lu<Ru.length;Lu+=1)Ru[Lu].c();$u=Ce()},m(Lu,Ou){for(let Fu=0;Fu<Ru.length;Fu+=1)Ru[Fu].m(Lu,Ou);N(Lu,$u,Ou)},p(Lu,[Ou]){if(Ou&3){Bu=Lu[1];let Fu;for(Fu=0;Fu<Bu.length;Fu+=1){const Nu=_a(Lu,Bu,Fu);Ru[Fu]?Ru[Fu].p(Nu,Ou):(Ru[Fu]=Wa(Nu),Ru[Fu].c(),Ru[Fu].m($u.parentNode,$u))}for(;Fu<Ru.length;Fu+=1)Ru[Fu].d(1);Ru.length=Bu.length}},i:ce,o:ce,d(Lu){Dt(Ru,Lu),Lu&&H($u)}}}function iv(_u,$u,Bu){let Ru,{inDelay:Lu=0}=$u,{outDelay:Ou=0}=$u,{content:Fu}=$u,{unfolded:Nu}=$u,Vu,Uu=[],Gu;function zu(ju){clearTimeout(Vu),Vu=setTimeout(function(){!Gu||(ju&&Gu.reversed||!ju&&!Gu.reversed)&&(Gu.reverse(),Gu.play())},ju?Lu:Ou)}mt(function(){const ju=(()=>{const Qu=A0(Xu=>Uu[Xu].getBoundingClientRect().x,[Math.min(Uu.length-1,10),Math.min(Uu.length-1,30)]);if(Qu>0)return Qu})();Gu=Le({targets:Uu.filter(ti).slice(0,ju),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:Le.stagger(50),easing:"easeInOutCubic"}),Nu&&Gu.seek(Gu.duration)});function Hu(ju,Qu){We[ju?"unshift":"push"](()=>{Uu[Qu]=ju,Bu(0,Uu)})}return _u.$$set=ju=>{"inDelay"in ju&&Bu(2,Lu=ju.inDelay),"outDelay"in ju&&Bu(3,Ou=ju.outDelay),"content"in ju&&Bu(4,Fu=ju.content),"unfolded"in ju&&Bu(5,Nu=ju.unfolded)},_u.$$.update=()=>{_u.$$.dirty&16&&Bu(1,Ru=(()=>{const ju=[],Qu=new RegExp(/\p{Regional_Indicator}\p{Regional_Indicator}|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?(\u200D\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?)+|\p{Emoji_Presentation}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)/gu),Xu=`__EMOJI_SPLIT_${Qa}__`,Ku=`__EMOJI_${Qa}__`;return Fu.slice().replace(Qu,Wu=>`${Xu}${Ku}${Wu}${Xu}`).split(Xu).forEach(Wu=>Wu.startsWith(Ku)?ju.push(Wu.slice(Ku.length)):ju.push(...Wu.split(""))),ju.filter(Boolean)})()),_u.$$.dirty&32&&zu(Nu)},[Uu,Ru,Lu,Ou,Fu,Nu,Hu]}class bu extends fe{constructor($u){super(),de(this,$u,iv,nv,ue,{inDelay:2,outDelay:3,content:4,unfolded:5},tv)}}const sv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",Xa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAACoCAMAAAD6pITnAAABQVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvr68AAAAAAAAAAAB5eXkAAAA8PDzr6+sLCwuenp4UFBT////8/PyLi4umpqZycnKxsbHMzMykpKTy8vKoqKhcXFwpKSmwsLD+/v7k5OSCgoLw8PDo6Oi0tLRkZGSrq6syMjL6+vrn5+eYmJj29vbd3d3Q0NCwsLDDw8Pz8/PT09P09PSwsLB/f39OTk739/fh4eHY2NiFhYX4+PjGxsZkZGSkpKS3t7eRkZG/v78eHh6CgoKKiorr6+uysrL+/v77+/vb29v9/f2wsLCysrKxsbFdXV39/f3u7u7t7e3j4+OoqKj5+fmrq6vp6elqamqVlZWtra0+Pj7w8PDW1tbJycnNzc27u7v29vba2tqXl5cjIyNsbGzf399ubm7d3d3///8pT4ZyAAAAanRSTlMzAAYIDA8KFRIccB8XIlIZPr80ZDb88FppT2iLaNJrRzpW+LNWzrp0Sm086rdg26WST4LVltltU0Pfq51X44UoJHdcfjcuHMFF++6i82RiWxX2x8SvSOc7vEs1LiHKmYiOe92gLCMfqE2kqsY2dQAAEBhJREFUeNrs2MFqq0AUxvHT28xdnEWQGNBKMHGnARdutIsspARxU+NOiu//HrdUZFozYTxMbltn5v8IPw7fxMCD7Vuy0OIs9FKz0OIs9FKz0OIs9FKz0OKWCf3nl/fw37sz9O8n/Tl+dWj9hO/nrQ5tCLICtiq0HPlRi1Sw7w+tIfA0ZWt1aLHxX2165NGt6dByZqHwasEJvRWoVaAnyjrwivqKTaVWh/6iPCFm2sS5OTaBWh16osyRq7Krs+jSBDkuvDxoLlFWd2XFsbm1gJoMTWcezrjqswbf8930xTsV64VXnLyX1PXxvSbrq+G41ag5NJGZK7d9/Yroe+u9swWt2jr7tecjvtZ9y63p1HRoAXOZ5Rh68QG07RB7IeZZOaHm0lRoOjOr6gD9wgHtcwofg7piCtRAdebMZYaJ9wyG9OwlmJWcmioN5HMemSMMnzQbZclkP4UYjdTkowai8zgaF/TfNmBYmzcfL+OACKTVoSfMbY1+bBzzB3XsY91OqAnQFGe26gMsjBqNz20LDPoVI0sDZTaGc44wPYLBHVOMhqOmzAfMdB7PmZVBEoPhxUlQsuGoZ0sDbTZYh67R5zx0dLFjkvkgQl/NxsnIR3Da5nQ1HwRoiTNjVZPswfbRPmkqxuZLA8U5CA343J6bEwYUaZjvXOY7jf87onfY5aVEmgLNndE9g+1TZxe5NAFa5pwa+5Fyq206XxpmOle5a52vpd28mikNsoEe38Gd3Q1B5934IspmGmY5t01o30Fhh7BpJ9JkaO7MosT+rruRk0SMS0ugZc4d2u+Um+2xmyMNsoeQMVbiP/bMhSdtKIrjJ3sEcrMsFagFpqC4ifIaviY4MAONPHQ6xDgX49vodr7/B9i5lnpb0setddFFfonaXhDw58n/nNvWYIQjNfaNJImG6Fe0COhkdHR9w4VINPnDu6RBJqBH1+tcycnENHh6PmYv/vqzF3Ps2GLav+i3PDiKMMKDIg+Pt+6iPQo63Gaj4PAkx9phc0nLi6YGqnveYqswwpNVtqWbJnGSoq3BEd6Ljy5xSBCL74XN4SEpWgTHt1EnlO2H30R4SIm2FvR0fDRCSxGJT7uXNHgU9C8YIcUvj5IGl4IOhxdSo4KWJJJaCIddShrcCnqLJWCEJAm25VbS4FbQ7fkY+GF9vzUPL5XYfNutpMGloMNJDfxQRuLgxe5vtGTYpaTBpaCvWQX8cIicahNeJhV2bSlpGdF6QS/EwReooy5HgvdwTdMUuSaUIBzfMJ3NZjVwYKr52/LcjULUErrrRQX8EF/QS1pOtCjoH19WfYo2+BR4KCwgIgMZFCQchWQRccam+LTs+UxJxSUQnCLiEZg4p4Vt8MHqlx+ipF1FWwv6mCkPFI07F89MdCQ+zxoXG+vlq4Ojk1IPDRbhnvcqopoGwSwiboAPFHZsKWkv0UYrbKfAH2iioDwr0VBCWy5NY9UYnZ8OtZwE+CHVNtqht2iRHKHvWgDReBgNKrqwbOV9ENHLOIR6eHLVsGR0kVbzQnyaTrvgC+17yDE7wDE5bthcENGofo0FEz0MCyI6gZ3eeL5eXVnKkM7Fid82H+4EERtgcEFnY36vLN04Zgc4JscxmwoimlhK/BvRxc8m1pBYM68kHJthDogq4goQMyfrFcPphzsKSA/dHfEWc0RnrUWBRBZOsWPH7ADH5KDhLqBo7C3+E9Fn6ErUXnSMjfUqQnS6gzgJOis4RAkgl0ErCakBT2SHt+g3uuhdLahoYqzycNHlqJWKT9EH/X6fK8z3+wd0GqXDZSGaT3MTLqIb+ADR2q4u+o276FcW0ex9YNFEPvXIU4e86LpYqgPRQjyMGKI3u4h9cBE99hDR75lJNOEm2kiOG5YOIlrwefOxRacnTDAkmHlFcRDNB2VmiN6gVe0+YCiC6dmZRYMsJFS+xS1z+jx+ymUFvEmzGyM7PESLiL5mSiDRglLtKeZoq+hKniB3vbvvaj7f49+JbRgwSQ+CYE3sE//QYVF2y3ItQlpS9E8WCyZakPkAUjABn7S+MhOaf9EKwQu3QD8r6MCBveh0R2RQiw5/gxQx9lNStIjodhz8go7sS8WQis7MBtsZeotesoi+Ne1WqnQsO+nG207dEOyn6FBoIRpctKCbfVrRue07jhC74/TFO6G+0jA1xB0wKKpI1PQq7SCOgyTRhVDIfpIGh14Ymi4GFW3lIPd0og3i46hO8GbY3BF5JhJ9J6UzMVVFzhVwEsi7pyTF6ZBDNwSHiA7tNR9XNFabEqI7H2yYMYs+H7PSR6I/tFi2FV1WEcv61DHRGc6zLt4zvm2aVWBevIQ3zT0h+rWc6F3tkUVjp+wtOgM2NMyiCyjBmFV0hP8ttRYfJIzxrqGS0GUF7smYRPPfWjJmjQ90sA6SaLu+RSdrjyyaWH8a0azUgmYLiVbOEA3ZHaSw2DaqOoKCLpxiq0Lmb4HYp5UmSFJLyokWQ8e7L6uPL3rpSUR3yOy+HroR00WlxAoSna8i6i/PiC4XDX8UmKXSzgHM8U8Vk7/J8m4wdvz3ouc+WikiURxanDP/KpFHInMBFqZmkDgbvKyRxHUu2sjmc/3Wfh/+oejnGh0+po7E+YmKnN5ZgdueHCaDeLg56GJ8hzQQndfDJE9Hm3Dp64ZWLekl2npJKRR691ybobTojUvjfW/TUKnX0YbCacN0mf/MIhqueGnwf0BGAflm+C4UuhdNeIt+mvFO/WRDdVj0Gi1u2oqmB2bETWwdfWEWbViz3ANngzuFh/pSOoNYv+UtFKRp7vkW/Zw3LJN8U2wrmo5LRnEhkbGILnNK9JQycWoRXTBmizzZBZ3PtMY/0zxIU5z2Lfo5b8GlREfGM4VUwyxaBc7RYChRLKL52FwZbFyqIEpatHDJLbhv0X/ZOaPetGEgAEd7K0LLYBAadQXagcogndAQEiorFQsoCs0eKAG1qHSsPKzL//8By9mxEzMy26jNHpp7gCgoEf7sO/vOd/4PQSXtH+JKg1YO/btnoqCnxDRr4RsgQCo1oCGoJA062TApX6RBg7CgPR1k5vc7fJeioHVqiqeRIXwnOaAhTCoNOvnAf20Q17X59ad9QQtOhj9gQ5G44scEG/ImHfT3hQP/0qCT38qyvMVghM+kxPZubdziHuh4k8rLggbPsUxc8Zuge4NHWsT9EdrK2gLNd1jUpDdnzz3s87a7RU8nAXe4KFxC458D9CkILCLRRQR00yZzYTN04F2aNyas228zqrRnqCadblAPtHdDXMg2UedDeFN7f9D8yRCF62gimEEXd97iAT7rVWF/RR509jkSaMTCizS04ACwMlnMNYpAjbTZ/vaCoA0U1wD5Gtyt5JA+Pil9NF6qohnSWQJaOEyaXSaaEvbukuRyVn2dnlDDWUO3HkGBRwzoZh4LBp0PRBZ0mLHrYUts4r9haogzNOAjcmuF1LuaWWal49HZZJMcDTygQVaE7xcS6FFKNjIjIeh4YUFvGBvdAfERavDdDUHDb/WwvweNGfay0CxVWMG1vRZLctwDtJpk2u5PeOSIugn4skG3k5ACn+pyoC/quRsYqhveqqOEI4vW8Wxlo8spbkEtULauqNNV+q4Kgn4TBT1PLhH9zoExlVeo9lp0ox+b5uoCmioH+iG4YfJAX0OHFpQL8oLCZxSLoi1oGuQ9HCnPKWj+LjhdSKvL5EorCv2iN9VJTBdekCfZFb/DUKkxioC2cruEccGDqGGBgu5H5ZqCHvkgh3STYPEE+ZDakFE4B/qe764sATQ33WB72XGfZLHQh9YRpW57jy7q44w3uSXjaKUNd646WImCbjqOo3V/9ZRwMgyFXXX0YW3Xc636zDWhN91tO6F3tIrA9sp93KIDQMcb6T3L3+y9yt964UPviSZV9UhTIw09Gwxi3HX/h2FMXM00Wd0f+TfOKfWt5cPfOlcSWdyFlkMKtGxBZ+vVF3QKg2ZnQzUtUZYrUVYBtFDaLmuk1bls0f3KKiuvVfyie5Ux0b5wSivokL5Kj5EQFz1zBQOaU1qx20gfnKQHo4gfjHJywJpofvlbaDvG6VE/4kf9jMFyCJe/sbbjID28SvjwKjygOQWdcbZDHafHsf1h74xxGISBIJjWdhOFF6RLeAOSm7ikpEH+/zviQ4LTWTbrB+w9YbRaBBI7Y/cpgW40B/rpXiPNgcHRgUENNPjpvt0dkZOZY5OZ0TQHAl13RyG9cQQW3+y3wrnZHAoaRDpz1nhk1jjXgcag60jvfB7iJ+FuAo1Ba3dopB2n5/H0vNNAd+fYYKQzZQpIppBRoAU0jnSiHuReD5JgoAU0jrSj8OZeeONgoAU0jHQhTYVT955HQYNAg6FuLY+8UkrWk5KtWYsDDHWDSAvpSM1eT7MXtTjA9DyOtJCmOLItjhTOONBYD3KRTlShtlSo6eLc0INg0LY8jpp2iXLf6n6TcJaCNsXRB43LQ0iHRF11ratOQTjD4sCgLelIAbsVsEfLGYBGpLWmQ1y/fHM531O+awymoLFmD9f0STq//cLvHuVei39n4QwLelyFakiHzU/8lveYJ78Fw3lAhQojbUn/27Gf1kaBOIzju2kWktH8oQ1oPaTrzSzk4CX2UBAKHiUnKfXu+38Lu78Js08rA89h2sOMfl+B82F4RJvsNPn/08Upa+BsGWgKzaX1fJwnfan/nPVsMGfEoe3SUZ+parIfL4dKZX1kdybQiErHN+mhU2kxyZfifZGqbrg5x9yZQ2M8xtJ6qKP6qtL3yVHfv6fqWkd6nsfOGA4GzaVXRlqom1wdHyc1IIfHo8obYTbOK+rMobl0VOfqlDz/mEjPyUnldUScHaBH0p+pu0yl1QQ+y/dVqrLuE/PY2QGaSGvqoSkv6pgUAf9t+l0kR3Upm0EzU2cOzaWt1Juh71ql0mT7tA9ssg/7p22SKtV2/bCxMFudOTSXXkIa1GK9qfuyVf9KH86vyUu19bzqJXk9P6Ryorbs640ogxnOS4szg+bSmA9QG2vBHurmrSvza5tdlOddsvaal91bUw+CbJTBjNmAM4Xm0pKWxnwYalgLdnBFH5UNM2ZDOy/gTKC5NObDSm2sA/KO0NrCjNkgzgSazIdIG2pYi3ZgrddQBrM409ng0Fwa1P+tDXYY4msJyFAGM3Em0ETaQg1rwRbugNrpYijbmeHsDg3pMbVYA1u0db6q75AYA1mUR8zMmUPzS22oYW200c7T4lswhjKY+XXm0Fwa1LDW2Cj2OpxDkKEMZpszh3aghrXhDqiVCcqE2Rka0iNqWEPbZ3U8O4yhDGbi7A4Naqu1cAfTLwRlwuwAzanFWmsH2VISZcLsAE2pYS3YwXHLaYAMZc7sDg1qWBtszR1Y5lx3UCbMDtCMWqyBHQI5TgFkKBNmB2hGDWvtHUx3aOHA7AgNa2gH2QI5KLtBwzpA8AVyVHaHBnbwOeA4Qk8I2wHla6GD9f4yFA7tnh/8P789gZ6zNUP72gxtb4b2tRna3gztazO0vRna1/4CjIBfFd68JpIAAAAASUVORK5CYII=",Ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAAC3aM1AAAAKo0lEQVR4Ae2cW2wU1xmAxxcutqFxRJ04jWW5NBelIJUKcX1ARaWoAp4QEiAFaFBAPIBElDcQEkg0Sh6IokjNQ1NxKw9IjaUg1X1IXQl4AIGEQh4IFQHkGhsMhnKLL1Bj9//G+4/Pzs7OztpzW9u/9O+5zJlzznz7n/+cMzO7ZVY6ZLp0o1qUsCqjlRJWGCpR64WhAxLvy2i/hL2ihIlKWUKtT5V2a0VfyijpMOS5VPI4o48kJB2rxAkUa5slWicKyDgEuN2iD0Sx7sglDqAM4ddFfypaHvkVeTcwKNn3RTtFcRORSZRAa6TXDaJYZZoEa+0Q7YmiU1EAxR82iWKRaRYstk00VD8bJlDqqhdtFMVfloLgV9tFu0SHwuhwWEBZ7rwlOiOMTiVQx4/S5jXRMS+7wrAkfOQvRYFaqoKbekUUoGOatMYCFOv+uWiTaFKztzQdmnAN+H02FCy3RiWjBUrjb4vyrY43mSkXxArlv6JF+9XRAOUbfEeUnc54FdbOPxEFKmvYwFIsUGDOFS3VyScwGCk4TfRlUZZXgaEWA5RhjmVOBJhymbZMkU9cAFADDf+gQJmA8JnjeZjL5XkKlsqdMHZYBSUoUGbz8TgBFQSUKYBPxd1xB8tXggBlndnkW8vEOMjQ556r7zq10PqRxfobE4NXoKuEhe8Gxg8ofpPtZBArDtSbcVAIFjCBjaf4wXpNznjV86yJnck2lccv7P9zJJ+FchJ3jSbFmwBsYJQj+YA2SUk/682paIJlwKbJ65q9gLKPTfvNYa9riTsPRrDKEi+gPLaIXLZs2fJae3v7oVu3bn129OjRJZE3GE0DOazcsxUL2F9H0/ZIrYsWLao5e/Zsy9SpU6cMDQ1ZZWVlQ/fu3bu2devWD1taWh6OlCyJ2LfSS2dt6gbKOivyHdGZM2c2LVu2bMf9+/etvr4+q7a21poxY4b1QuTSpUt/Xbx48ZclgXK4k/ckuK79NYc8jjYW3ykAeTZvPX/+3MJCHz58aN29e9caHBysEOv9w5MnT77ev38/671SEJg5E7gJlC2mmY71YoALVODW1NTU7du37/CNGzcOzpw5M7E+BQRA/5xH5WZnbasJWEkkxbDWp0+fWnfu3LGePXtWNnv27OXd3d3fNDc3/zaSBsOr1GGnQFmkxvV6TMHLEFdq4V8fPHhgVVZWVq1du/aAgD28evVqbvimUWBnL/QVaOruc8rMb/X391sy+1s9PT1ls2bNevvUqVNfX7x48f00EpU+2QwVaGqsE1jAVCWNG8C3yqRVOX/+/Pdk0mo+cODAmxxLkdgMUwMUgIiCNNPl5eXWwMCA9fjxY6u3t9eqrq6u37t37+GbN2/uS9Gk5QDl/p7nRt++wpg+Mgt8ByjNKlwzLpOVbbHiZ8sbGxt/L7717ydPnlwWUzf9moHhdCyU5yWpEgWpIZ1Ti8VaETYEwK2oqHhp3bp1H8mS6/OVK1cm7bqq6Z3vHWi79xF/KDhCBebOM9MaZzUAVAmZtObLtrX5/PnzGyPurl/1toWyf09UGO4IoBCgKjTSmq+h5mkZ/CsqUrVw4cKdMmkd37NnTxMZMUsVFpoIUIXIBSsYDRWCpglNyGY+ZdWqZRVgb2Vlp/WLgwcPHpWd1gcxT1o20Eq9gBjDQS+g2r4CJE1cQzdIrzT1ZuqeIjutdTJpfXXs2LEFdiXRf1Rioc7GPvr2hluQC0bshGl5xDXNQS9g5Gk5LUOo52lIOWTatGmvbt68+VPZzv5x6dKlUb/1UpEIUBmaDlAvaIBQcPmOU8YNjzxEYQ6n7M/y+vr637S2th5paGjg9ZqoJBmgStO8cBOcguKq3flKwjzXXc59TM+pqqr62ZEjR36n6QjCiiT8Jz7OZqqwAIiYIPSY5usxhU1azzPztJxdofdHoJe+vE8tnMuVxPKDKFdXsoByzA1FgZqh1mFCU6jkaVzLuUPZDLRt27btX+78ENMvEgEqNO33LSV0hjQXpaBMMJrHcYXuFSfPRwY7Ojq+Wb58+fa2trZQf0bjavMFQz4xCwUQa0egKTiFSVoB6vF8IRel57kukC3qrRMnTny8ffv2y+5jEaRtoPYWI4LK/ap0/Fg+SOQjZmiWNSvXMmaefFHPrl69enLBggVfClSnPbNMBPEBhrzzCDSCBjyrZNnEAUCYlqXA3MfUUjVfy5FvHuM4IvdOv9u1a9e7c+fO/XOMMGm6jyEfO1BmJBEbKKFCUUtTYPTQL85xU2Q//0geUX+xYsWKFjM/xrgNdMy/HhtFhx0LNc9VeCZgjVPODVzLyyEmndb169cfOnfu3I9mnTHH+7FQ3sqNVcQq7VleGzXA5FikllGwlCWOEGfSOX78+Mc7duyIY9LR7uQLewGKhbKUiPOuvT3k6ZUbFJAQhWyGmp8J+69cucKk85eY/STNewkM+4e/6jH8FM+r5kJ55qRkAtTzyFMrJE/LKHx5tnR5586dm2TSiXMG1+7lC+2fM2KhCAnnYb2dE+1Hlg9VUApSARKaefJFPDp9+vQX8qgjqUnHj0oW0Ed+JcM+ZloodZsAtS2FKc+MOD54+/btf27YsOHThCcd7Z5XaDNUC2X8QziWh1wCyFloK0zTSskjjcozo3bZ6XySkknHCyR5sLO3tAqUzG7RWIDqLA8wRKESV5CSZ086S5YsScukQ/fyCexs0UmJBD+9y1rO2CUi+NAhb1YNVHmPyQYqD9ku7969e9O8efPSNOmY3TXjMHN+tmhaKDdJ+JFo5C/cdnV1ddIjrJGdkoKUx8HsdP60atWqf3C8RARmzg2m4UXfSM9jeSW8rq6u8vr163+TV8JfyQx3e9LZuHHjoQsXLvSMdKckYt9KL53tu/sBHXeeeJMk0rdJ5P2kQXkvqXXOnDnlEr8pTyUPrVmz5qvOzs7/lQTCkU4y1LtGkjIfmIlMnJ+K/MojfzIrl8B3kpU1osxJSYtTAL8wKf4EYJQFk+JeQMlvE3UcLRmTkkUANm1ZOZmE24dqGU5gOfCyZkyGWQT+IykW8zmSz0IpiLNN8t5iTmdTkgGTrInI7JcfULaH10Qnh/4IMVjAxNk6jxwajuUb8lqOZRT3S/lx06RY1g8C4akfiEJAOZdFKzsq/nNjIssdufjbhQAEAUodOGDWp4m8S0oHEhb+YexGkD4EBUpdVMrfl/E/RhNJnsjF/ls0r980YRQDlAqBylIqylcCzf4lHecB5veigSfmYoBycaxN2SHgT8e7pWKZwCzqzZpigUr9DlRuoIxXn8pIZJgHtkwpa8togHIiw587LeNx9mc2ZwIK5DOlXJaMFqhWwoMp/Ax+1W+ToOXTHGKNrDMLLo38LmKsQKmbdSrWil+N82UJaS40YTuJv/RdtAdpzet+aJDzvMpQV71oo2gYX5RXG2HnYZXtouzNRzXE3R0KE6jWjZU2iaZ9u8pqpU3UfvwrYSgSBVDtGDurBlHn/zj0QMIh7qlDNOfmcBj9ihKo9o+l1euiWGxSE5eun3na6jxQk3joEgdQ7TR+FWutE43lhQpph3sQvISAVRa9ppRzipY4gZqdw8/WigIWDWt1gD8EIsqSLlT/KPUVlKSAujs2XTLYeRHiIlA2DVi1qkRtK8PSULaEDF+Ue7ashwkTlf8DQc/cITdx9+UAAAAASUVORK5CYII=";function ov(_u){me(_u,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function Ua(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu;return Bu=new vt({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){$u=Q("div"),re(Bu.$$.fragment),Ru=q(),Lu=Q("div"),C(Lu,"class",Ou="arrow "+_u[0]+" svelte-1ogmlqq"),W(Lu,"background-image","url("+sv+")"),C($u,"class","arrow-wrapper svelte-1ogmlqq")},m(zu,Hu){N(zu,$u,Hu),se(Bu,$u,null),_($u,Ru),_($u,Lu),Vu=!0,Uu||(Gu=Oe(Lu,"click",_u[5]),Uu=!0)},p(zu,Hu){_u=zu,(!Vu||Hu&1&&Ou!==(Ou="arrow "+_u[0]+" svelte-1ogmlqq"))&&C(Lu,"class",Ou)},i(zu){Vu||(M(Bu.$$.fragment,zu),zu&&Be(()=>{Nu&&Nu.end(1),Fu=bn(Lu,pn,{duration:_u[2],delay:_u[3],easing:Ln}),Fu.start()}),Vu=!0)},o(zu){F(Bu.$$.fragment,zu),Fu&&Fu.invalidate(),zu&&(Nu=zn(Lu,pn,{duration:_u[2],delay:_u[4],easing:Ln})),Vu=!1},d(zu){zu&&H($u),oe(Bu),zu&&Nu&&Nu.end(),Uu=!1,Gu()}}}function rv(_u){let $u,Bu,Ru=_u[1]&&Ua(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[1]?Ru?(Ru.p(Lu,Ou),Ou&2&&M(Ru,1)):(Ru=Ua(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function av(_u,$u,Bu){let{direction:Ru="right"}=$u,{visible:Lu=!0}=$u,{duration:Ou=0}=$u,{inDelay:Fu=0}=$u,{outDelay:Nu=0}=$u;function Vu(Uu){Yd.call(this,_u,Uu)}return _u.$$set=Uu=>{"direction"in Uu&&Bu(0,Ru=Uu.direction),"visible"in Uu&&Bu(1,Lu=Uu.visible),"duration"in Uu&&Bu(2,Ou=Uu.duration),"inDelay"in Uu&&Bu(3,Fu=Uu.inDelay),"outDelay"in Uu&&Bu(4,Nu=Uu.outDelay)},[Ru,Lu,Ou,Fu,Nu,Vu]}class lv extends fe{constructor($u){super(),de(this,$u,av,rv,ue,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},ov)}}function cv(_u,$u,Bu=20,Ru=5){return new Promise((Lu,Ou)=>{let Fu=0;const Nu=setInterval(()=>{const Vu=_u();$u(Vu)?(clearInterval(Nu),Lu(Vu)):Fu>=Ru&&(clearInterval(Nu),Ou(Vu)),Fu++},Bu)})}function uv(_u){me(_u,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function Va(_u,$u,Bu){const Ru=_u.slice();return Ru[11]=$u[Bu].id,Ru[12]=$u[Bu].content,Ru}function Za(_u,$u){let Bu,Ru,Lu;return Ru=new bu({props:{unfolded:$u[0],content:$u[12],inDelay:500,outDelay:$u[5]}}),{key:_u,first:null,c(){Bu=Q("div"),re(Ru.$$.fragment),C(Bu,"class","text svelte-1fuzm7v"),W(Bu,"transform",$u[7]),this.first=Bu},m(Ou,Fu){N(Ou,Bu,Fu),se(Ru,Bu,null),$u[10](Bu),Lu=!0},p(Ou,Fu){$u=Ou;const Nu={};Fu&1&&(Nu.unfolded=$u[0]),Fu&2&&(Nu.content=$u[12]),Fu&32&&(Nu.outDelay=$u[5]),Ru.$set(Nu),Fu&128&&W(Bu,"transform",$u[7])},i(Ou){Lu||(M(Ru.$$.fragment,Ou),Lu=!0)},o(Ou){F(Ru.$$.fragment,Ou),Lu=!1},d(Ou){Ou&&H(Bu),oe(Ru),$u[10](null)}}}function Ja(_u){let $u,Bu,Ru;return Bu=new lv({props:{direction:_u[6],visible:_u[0],inDelay:600,duration:1e3}}),{c(){$u=Q("div"),re(Bu.$$.fragment),C($u,"class","arrow svelte-1fuzm7v")},m(Lu,Ou){N(Lu,$u,Ou),se(Bu,$u,null),Ru=!0},p(Lu,Ou){const Fu={};Ou&64&&(Fu.direction=Lu[6]),Ou&1&&(Fu.visible=Lu[0]),Bu.$set(Fu)},i(Lu){Ru||(M(Bu.$$.fragment,Lu),Ru=!0)},o(Lu){F(Bu.$$.fragment,Lu),Ru=!1},d(Lu){Lu&&H($u),oe(Bu)}}}function dv(_u){let $u=[],Bu=new Map,Ru,Lu,Ou,Fu=_u[1];const Nu=Uu=>Uu[11];for(let Uu=0;Uu<Fu.length;Uu+=1){let Gu=Va(_u,Fu,Uu),zu=Nu(Gu);Bu.set(zu,$u[Uu]=Za(zu,Gu))}let Vu=_u[3]<_u[4]&&Ja(_u);return{c(){for(let Uu=0;Uu<$u.length;Uu+=1)$u[Uu].c();Ru=q(),Vu&&Vu.c(),Lu=Ce()},m(Uu,Gu){for(let zu=0;zu<$u.length;zu+=1)$u[zu].m(Uu,Gu);N(Uu,Ru,Gu),Vu&&Vu.m(Uu,Gu),N(Uu,Lu,Gu),Ou=!0},p(Uu,[Gu]){Gu&167&&(Fu=Uu[1],ve(),$u=gt($u,Gu,Nu,1,Uu,Fu,Bu,Ru.parentNode,Gt,Za,Ru,Va),be()),Uu[3]<Uu[4]?Vu?(Vu.p(Uu,Gu),Gu&24&&M(Vu,1)):(Vu=Ja(Uu),Vu.c(),M(Vu,1),Vu.m(Lu.parentNode,Lu)):Vu&&(ve(),F(Vu,1,1,()=>{Vu=null}),be())},i(Uu){if(!Ou){for(let Gu=0;Gu<Fu.length;Gu+=1)M($u[Gu]);M(Vu),Ou=!0}},o(Uu){for(let Gu=0;Gu<$u.length;Gu+=1)F($u[Gu]);F(Vu),Ou=!1},d(Uu){for(let Gu=0;Gu<$u.length;Gu+=1)$u[Gu].d(Uu);Uu&&H(Ru),Vu&&Vu.d(Uu),Uu&&H(Lu)}}}function fv(_u,$u,Bu){let Ru,Lu,Ou,{visible:Fu=!1}=$u,{textUnfolded:Nu=!1}=$u,{textItems:Vu}=$u,Uu,Gu=0,zu=0,Hu=0;function ju(Qu){We[Qu?"unshift":"push"](()=>{Uu=Qu,Bu(2,Uu)})}return _u.$$set=Qu=>{"visible"in Qu&&Bu(0,Fu=Qu.visible),"textUnfolded"in Qu&&Bu(8,Nu=Qu.textUnfolded),"textItems"in Qu&&Bu(1,Vu=Qu.textItems)},_u.$$.update=()=>{if(_u.$$.dirty&5&&Uu&&Fu){const{lineHeight:Qu}=getComputedStyle(Uu);Bu(4,Hu=Uu.offsetHeight),cv(()=>Uu==null?void 0:Uu.offsetHeight,Boolean).then(()=>{Bu(4,Hu=Uu.offsetHeight)}),Bu(3,zu=Number(Qu.replace("px","")))}_u.$$.dirty&280&&Bu(9,Gu=Nu?zu-Hu:0),_u.$$.dirty&512&&Bu(7,Ru=`translateY(${Gu}px)`),_u.$$.dirty&256&&Bu(6,Lu=Nu?"left":"right"),_u.$$.dirty&256&&Bu(5,Ou=Nu?450:0)},[Fu,Vu,Uu,zu,Hu,Ou,Lu,Ru,Nu,Gu,ju]}class Au extends fe{constructor($u){super(),de(this,$u,fv,dv,ue,{visible:0,textUnfolded:8,textItems:1},uv)}}function hv(_u){me(_u,"svelte-18yy5x8",".line.svelte-18yy5x8{position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-18yy5x8{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function qa(_u){var $u,Bu;let Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju;return Ru=new vt({props:{visible:_u[2],left:_u[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Fu=new eu({props:{unfolded:_u[2],duration:1e3,outDelay:_u[5]+40*Math.min((Bu=($u=_u[4][0])==null?void 0:$u.content.length)!=null?Bu:10,15)}}),Uu=new Au({props:{visible:_u[2],textUnfolded:_u[1],textItems:_u[4]}}),{c(){re(Ru.$$.fragment),Lu=q(),Ou=Q("div"),re(Fu.$$.fragment),Nu=q(),Vu=Q("div"),re(Uu.$$.fragment),C(Ou,"class","line svelte-18yy5x8"),W(Ou,"width",_u[3]+"px"),C(Vu,"class","content svelte-18yy5x8"),Be(()=>_u[9].call(Vu))},m(Qu,Xu){se(Ru,Qu,Xu),N(Qu,Lu,Xu),N(Qu,Ou,Xu),se(Fu,Ou,null),N(Qu,Nu,Xu),N(Qu,Vu,Xu),se(Uu,Vu,null),Gu=en(Vu,_u[9].bind(Vu)),zu=!0,Hu||(ju=Oe(Vu,"click",_u[6]),Hu=!0)},p(Qu,Xu){var Ku,Wu;const qu={};Xu&4&&(qu.visible=Qu[2]),Xu&8&&(qu.left=Qu[3]/2+"px"),Ru.$set(qu);const Yu={};Xu&4&&(Yu.unfolded=Qu[2]),Xu&48&&(Yu.outDelay=Qu[5]+40*Math.min((Wu=(Ku=Qu[4][0])==null?void 0:Ku.content.length)!=null?Wu:10,15)),Fu.$set(Yu),Xu&8&&W(Ou,"width",Qu[3]+"px");const Zu={};Xu&4&&(Zu.visible=Qu[2]),Xu&2&&(Zu.textUnfolded=Qu[1]),Xu&16&&(Zu.textItems=Qu[4]),Uu.$set(Zu)},i(Qu){zu||(M(Ru.$$.fragment,Qu),M(Fu.$$.fragment,Qu),M(Uu.$$.fragment,Qu),zu=!0)},o(Qu){F(Ru.$$.fragment,Qu),F(Fu.$$.fragment,Qu),F(Uu.$$.fragment,Qu),zu=!1},d(Qu){oe(Ru,Qu),Qu&&H(Lu),Qu&&H(Ou),oe(Fu),Qu&&H(Nu),Qu&&H(Vu),oe(Uu),Gu(),Hu=!1,ju()}}}function pv(_u){let $u,Bu,Ru=_u[0].state&&qa(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[0].state?Ru?(Ru.p(Lu,Ou),Ou&1&&M(Ru,1)):(Ru=qa(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function mv(_u,$u,Bu){let Ru,Lu,Ou;var Fu;let{tag:Nu}=$u,Vu,Uu=!1,Gu=[];function zu(){Bu(1,Uu=!Uu)}function Hu(){Vu=this.clientWidth,Bu(3,Vu)}return _u.$$set=ju=>{"tag"in ju&&Bu(0,Nu=ju.tag)},_u.$$.update=()=>{_u.$$.dirty&129&&Bu(2,Ru=!!(!(Bu(7,Fu=Nu.state)===null||Fu===void 0)&&Fu.unfolded)),_u.$$.dirty&1&&Bu(8,Lu=Nu.data.text),_u.$$.dirty&256&&Bu(4,Gu=[{id:it(),content:Lu}]),_u.$$.dirty&4&&(Ru||setTimeout(()=>{Bu(1,Uu=!1)},20)),_u.$$.dirty&2&&Bu(5,Ou=Uu?450:0)},[Nu,Uu,Ru,Vu,Gu,Ou,zu,Fu,Lu,Hu]}class gv extends fe{constructor($u){super(),de(this,$u,mv,pv,ue,{tag:0},hv)}}function vv(_u){me(_u,"svelte-e72ouh",".line.svelte-e72ouh{width:100%;height:100%;overflow:visible}")}function Ka(_u){let $u,Bu,Ru,Lu;return{c(){$u=Te("path"),C($u,"fill","none"),C($u,"stroke","url(#"+_u[4]+")"),C($u,"stroke-width","1"),C($u,"d","M0 21 L14 0.5 L105 0.5")},m(Ou,Fu){N(Ou,$u,Fu),Lu=!0},p(Ou,Fu){_u=Ou},i(Ou){Lu||(Ou&&Be(()=>{Ru&&Ru.end(1),Bu=bn($u,qi,{duration:_u[1],delay:_u[0],easing:Ec}),Bu.start()}),Lu=!0)},o(Ou){Bu&&Bu.invalidate(),Ou&&(Ru=zn($u,qi,{duration:_u[1],delay:_u[2],easing:Ln})),Lu=!1},d(Ou){Ou&&H($u),Ou&&Ru&&Ru.end()}}}function bv(_u){let $u,Bu,Ru,Lu,Ou,Fu=_u[3]&&Ka(_u);return{c(){$u=Te("svg"),Bu=Te("defs"),Ru=Te("linearGradient"),Lu=Te("stop"),Ou=Te("stop"),Fu&&Fu.c(),C(Lu,"offset","25%"),C(Lu,"stop-color","white"),C(Lu,"stop-opacity","1"),C(Ou,"offset","100%"),C(Ou,"stop-color","white"),C(Ou,"stop-opacity","0.5"),C(Ru,"id",_u[4]),C(Ru,"gradientUnits","userSpaceOnUse"),C($u,"class","line svelte-e72ouh"),C($u,"viewBox","0 0 105 21")},m(Nu,Vu){N(Nu,$u,Vu),_($u,Bu),_(Bu,Ru),_(Ru,Lu),_(Ru,Ou),Fu&&Fu.m($u,null)},p(Nu,[Vu]){Nu[3]?Fu?(Fu.p(Nu,Vu),Vu&8&&M(Fu,1)):(Fu=Ka(Nu),Fu.c(),M(Fu,1),Fu.m($u,null)):Fu&&(ve(),F(Fu,1,1,()=>{Fu=null}),be())},i(Nu){M(Fu)},o(Nu){F(Fu)},d(Nu){Nu&&H($u),Fu&&Fu.d()}}}function Av(_u,$u,Bu){let{inDelay:Ru=0}=$u,{duration:Lu=0}=$u,{outDelay:Ou=0}=$u,{unfolded:Fu}=$u;const Nu=it();return _u.$$set=Vu=>{"inDelay"in Vu&&Bu(0,Ru=Vu.inDelay),"duration"in Vu&&Bu(1,Lu=Vu.duration),"outDelay"in Vu&&Bu(2,Ou=Vu.outDelay),"unfolded"in Vu&&Bu(3,Fu=Vu.unfolded)},[Ru,Lu,Ou,Fu,Nu]}class yv extends fe{constructor($u){super(),de(this,$u,Av,bv,ue,{inDelay:0,duration:1,outDelay:2,unfolded:3},vv)}}function $a(_u){return _u!==null&&typeof _u=="object"&&"constructor"in _u&&_u.constructor===Object}function Uo(_u={},$u={}){Object.keys($u).forEach(Bu=>{typeof _u[Bu]>"u"?_u[Bu]=$u[Bu]:$a($u[Bu])&&$a(_u[Bu])&&Object.keys($u[Bu]).length>0&&Uo(_u[Bu],$u[Bu])})}const yu={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Je(){const _u=typeof document<"u"?document:{};return Uo(_u,yu),_u}const wv={document:yu,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(_u){return typeof setTimeout>"u"?(_u(),null):setTimeout(_u,0)},cancelAnimationFrame(_u){typeof setTimeout>"u"||clearTimeout(_u)}};function Qe(){const _u=typeof window<"u"?window:{};return Uo(_u,wv),_u}function Ev(_u){const $u=_u.__proto__;Object.defineProperty(_u,"__proto__",{get(){return $u},set(Bu){$u.__proto__=Bu}})}class Vt extends Array{constructor($u){typeof $u=="number"?super($u):(super(...$u||[]),Ev(this))}}function oi(_u=[]){const $u=[];return _u.forEach(Bu=>{Array.isArray(Bu)?$u.push(...oi(Bu)):$u.push(Bu)}),$u}function wu(_u,$u){return Array.prototype.filter.call(_u,$u)}function Pv(_u){const $u=[];for(let Bu=0;Bu<_u.length;Bu+=1)$u.indexOf(_u[Bu])===-1&&$u.push(_u[Bu]);return $u}function Cv(_u,$u){if(typeof _u!="string")return[_u];const Bu=[],Ru=$u.querySelectorAll(_u);for(let Lu=0;Lu<Ru.length;Lu+=1)Bu.push(Ru[Lu]);return Bu}function ae(_u,$u){const Bu=Qe(),Ru=Je();let Lu=[];if(!$u&&_u instanceof Vt)return _u;if(!_u)return new Vt(Lu);if(typeof _u=="string"){const Ou=_u.trim();if(Ou.indexOf("<")>=0&&Ou.indexOf(">")>=0){let Fu="div";Ou.indexOf("<li")===0&&(Fu="ul"),Ou.indexOf("<tr")===0&&(Fu="tbody"),(Ou.indexOf("<td")===0||Ou.indexOf("<th")===0)&&(Fu="tr"),Ou.indexOf("<tbody")===0&&(Fu="table"),Ou.indexOf("<option")===0&&(Fu="select");const Nu=Ru.createElement(Fu);Nu.innerHTML=Ou;for(let Vu=0;Vu<Nu.childNodes.length;Vu+=1)Lu.push(Nu.childNodes[Vu])}else Lu=Cv(_u.trim(),$u||Ru)}else if(_u.nodeType||_u===Bu||_u===Ru)Lu.push(_u);else if(Array.isArray(_u)){if(_u instanceof Vt)return _u;Lu=_u}return new Vt(Pv(Lu))}ae.fn=Vt.prototype;function Iv(..._u){const $u=oi(_u.map(Bu=>Bu.split(" ")));return this.forEach(Bu=>{Bu.classList.add(...$u)}),this}function xv(..._u){const $u=oi(_u.map(Bu=>Bu.split(" ")));return this.forEach(Bu=>{Bu.classList.remove(...$u)}),this}function Tv(..._u){const $u=oi(_u.map(Bu=>Bu.split(" ")));this.forEach(Bu=>{$u.forEach(Ru=>{Bu.classList.toggle(Ru)})})}function Sv(..._u){const $u=oi(_u.map(Bu=>Bu.split(" ")));return wu(this,Bu=>$u.filter(Ru=>Bu.classList.contains(Ru)).length>0).length>0}function kv(_u,$u){if(arguments.length===1&&typeof _u=="string")return this[0]?this[0].getAttribute(_u):void 0;for(let Bu=0;Bu<this.length;Bu+=1)if(arguments.length===2)this[Bu].setAttribute(_u,$u);else for(const Ru in _u)this[Bu][Ru]=_u[Ru],this[Bu].setAttribute(Ru,_u[Ru]);return this}function Dv(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].removeAttribute(_u);return this}function Lv(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].style.transform=_u;return this}function Mv(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].style.transitionDuration=typeof _u!="string"?`${_u}ms`:_u;return this}function zv(..._u){let[$u,Bu,Ru,Lu]=_u;typeof _u[1]=="function"&&([$u,Ru,Lu]=_u,Bu=void 0),Lu||(Lu=!1);function Ou(Uu){const Gu=Uu.target;if(!Gu)return;const zu=Uu.target.dom7EventData||[];if(zu.indexOf(Uu)<0&&zu.unshift(Uu),ae(Gu).is(Bu))Ru.apply(Gu,zu);else{const Hu=ae(Gu).parents();for(let ju=0;ju<Hu.length;ju+=1)ae(Hu[ju]).is(Bu)&&Ru.apply(Hu[ju],zu)}}function Fu(Uu){const Gu=Uu&&Uu.target?Uu.target.dom7EventData||[]:[];Gu.indexOf(Uu)<0&&Gu.unshift(Uu),Ru.apply(this,Gu)}const Nu=$u.split(" ");let Vu;for(let Uu=0;Uu<this.length;Uu+=1){const Gu=this[Uu];if(Bu)for(Vu=0;Vu<Nu.length;Vu+=1){const zu=Nu[Vu];Gu.dom7LiveListeners||(Gu.dom7LiveListeners={}),Gu.dom7LiveListeners[zu]||(Gu.dom7LiveListeners[zu]=[]),Gu.dom7LiveListeners[zu].push({listener:Ru,proxyListener:Ou}),Gu.addEventListener(zu,Ou,Lu)}else for(Vu=0;Vu<Nu.length;Vu+=1){const zu=Nu[Vu];Gu.dom7Listeners||(Gu.dom7Listeners={}),Gu.dom7Listeners[zu]||(Gu.dom7Listeners[zu]=[]),Gu.dom7Listeners[zu].push({listener:Ru,proxyListener:Fu}),Gu.addEventListener(zu,Fu,Lu)}}return this}function Ov(..._u){let[$u,Bu,Ru,Lu]=_u;typeof _u[1]=="function"&&([$u,Ru,Lu]=_u,Bu=void 0),Lu||(Lu=!1);const Ou=$u.split(" ");for(let Fu=0;Fu<Ou.length;Fu+=1){const Nu=Ou[Fu];for(let Vu=0;Vu<this.length;Vu+=1){const Uu=this[Vu];let Gu;if(!Bu&&Uu.dom7Listeners?Gu=Uu.dom7Listeners[Nu]:Bu&&Uu.dom7LiveListeners&&(Gu=Uu.dom7LiveListeners[Nu]),Gu&&Gu.length)for(let zu=Gu.length-1;zu>=0;zu-=1){const Hu=Gu[zu];Ru&&Hu.listener===Ru||Ru&&Hu.listener&&Hu.listener.dom7proxy&&Hu.listener.dom7proxy===Ru?(Uu.removeEventListener(Nu,Hu.proxyListener,Lu),Gu.splice(zu,1)):Ru||(Uu.removeEventListener(Nu,Hu.proxyListener,Lu),Gu.splice(zu,1))}}}return this}function jv(..._u){const $u=Qe(),Bu=_u[0].split(" "),Ru=_u[1];for(let Lu=0;Lu<Bu.length;Lu+=1){const Ou=Bu[Lu];for(let Fu=0;Fu<this.length;Fu+=1){const Nu=this[Fu];if($u.CustomEvent){const Vu=new $u.CustomEvent(Ou,{detail:Ru,bubbles:!0,cancelable:!0});Nu.dom7EventData=_u.filter((Uu,Gu)=>Gu>0),Nu.dispatchEvent(Vu),Nu.dom7EventData=[],delete Nu.dom7EventData}}}return this}function Bv(_u){const $u=this;function Bu(Ru){Ru.target===this&&(_u.call(this,Ru),$u.off("transitionend",Bu))}return _u&&$u.on("transitionend",Bu),this}function Rv(_u){if(this.length>0){if(_u){const $u=this.styles();return this[0].offsetWidth+parseFloat($u.getPropertyValue("margin-right"))+parseFloat($u.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function Hv(_u){if(this.length>0){if(_u){const $u=this.styles();return this[0].offsetHeight+parseFloat($u.getPropertyValue("margin-top"))+parseFloat($u.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function Fv(){if(this.length>0){const _u=Qe(),$u=Je(),Bu=this[0],Ru=Bu.getBoundingClientRect(),Lu=$u.body,Ou=Bu.clientTop||Lu.clientTop||0,Fu=Bu.clientLeft||Lu.clientLeft||0,Nu=Bu===_u?_u.scrollY:Bu.scrollTop,Vu=Bu===_u?_u.scrollX:Bu.scrollLeft;return{top:Ru.top+Nu-Ou,left:Ru.left+Vu-Fu}}return null}function Nv(){const _u=Qe();return this[0]?_u.getComputedStyle(this[0],null):{}}function Gv(_u,$u){const Bu=Qe();let Ru;if(arguments.length===1)if(typeof _u=="string"){if(this[0])return Bu.getComputedStyle(this[0],null).getPropertyValue(_u)}else{for(Ru=0;Ru<this.length;Ru+=1)for(const Lu in _u)this[Ru].style[Lu]=_u[Lu];return this}if(arguments.length===2&&typeof _u=="string"){for(Ru=0;Ru<this.length;Ru+=1)this[Ru].style[_u]=$u;return this}return this}function Qv(_u){return _u?(this.forEach(($u,Bu)=>{_u.apply($u,[$u,Bu])}),this):this}function _v(_u){const $u=wu(this,_u);return ae($u)}function Wv(_u){if(typeof _u>"u")return this[0]?this[0].innerHTML:null;for(let $u=0;$u<this.length;$u+=1)this[$u].innerHTML=_u;return this}function Xv(_u){if(typeof _u>"u")return this[0]?this[0].textContent.trim():null;for(let $u=0;$u<this.length;$u+=1)this[$u].textContent=_u;return this}function Yv(_u){const $u=Qe(),Bu=Je(),Ru=this[0];let Lu,Ou;if(!Ru||typeof _u>"u")return!1;if(typeof _u=="string"){if(Ru.matches)return Ru.matches(_u);if(Ru.webkitMatchesSelector)return Ru.webkitMatchesSelector(_u);if(Ru.msMatchesSelector)return Ru.msMatchesSelector(_u);for(Lu=ae(_u),Ou=0;Ou<Lu.length;Ou+=1)if(Lu[Ou]===Ru)return!0;return!1}if(_u===Bu)return Ru===Bu;if(_u===$u)return Ru===$u;if(_u.nodeType||_u instanceof Vt){for(Lu=_u.nodeType?[_u]:_u,Ou=0;Ou<Lu.length;Ou+=1)if(Lu[Ou]===Ru)return!0;return!1}return!1}function Uv(){let _u=this[0],$u;if(_u){for($u=0;(_u=_u.previousSibling)!==null;)_u.nodeType===1&&($u+=1);return $u}}function Vv(_u){if(typeof _u>"u")return this;const $u=this.length;if(_u>$u-1)return ae([]);if(_u<0){const Bu=$u+_u;return Bu<0?ae([]):ae([this[Bu]])}return ae([this[_u]])}function Zv(..._u){let $u;const Bu=Je();for(let Ru=0;Ru<_u.length;Ru+=1){$u=_u[Ru];for(let Lu=0;Lu<this.length;Lu+=1)if(typeof $u=="string"){const Ou=Bu.createElement("div");for(Ou.innerHTML=$u;Ou.firstChild;)this[Lu].appendChild(Ou.firstChild)}else if($u instanceof Vt)for(let Ou=0;Ou<$u.length;Ou+=1)this[Lu].appendChild($u[Ou]);else this[Lu].appendChild($u)}return this}function Jv(_u){const $u=Je();let Bu,Ru;for(Bu=0;Bu<this.length;Bu+=1)if(typeof _u=="string"){const Lu=$u.createElement("div");for(Lu.innerHTML=_u,Ru=Lu.childNodes.length-1;Ru>=0;Ru-=1)this[Bu].insertBefore(Lu.childNodes[Ru],this[Bu].childNodes[0])}else if(_u instanceof Vt)for(Ru=0;Ru<_u.length;Ru+=1)this[Bu].insertBefore(_u[Ru],this[Bu].childNodes[0]);else this[Bu].insertBefore(_u,this[Bu].childNodes[0]);return this}function qv(_u){return this.length>0?_u?this[0].nextElementSibling&&ae(this[0].nextElementSibling).is(_u)?ae([this[0].nextElementSibling]):ae([]):this[0].nextElementSibling?ae([this[0].nextElementSibling]):ae([]):ae([])}function Kv(_u){const $u=[];let Bu=this[0];if(!Bu)return ae([]);for(;Bu.nextElementSibling;){const Ru=Bu.nextElementSibling;_u?ae(Ru).is(_u)&&$u.push(Ru):$u.push(Ru),Bu=Ru}return ae($u)}function $v(_u){if(this.length>0){const $u=this[0];return _u?$u.previousElementSibling&&ae($u.previousElementSibling).is(_u)?ae([$u.previousElementSibling]):ae([]):$u.previousElementSibling?ae([$u.previousElementSibling]):ae([])}return ae([])}function e1(_u){const $u=[];let Bu=this[0];if(!Bu)return ae([]);for(;Bu.previousElementSibling;){const Ru=Bu.previousElementSibling;_u?ae(Ru).is(_u)&&$u.push(Ru):$u.push(Ru),Bu=Ru}return ae($u)}function t1(_u){const $u=[];for(let Bu=0;Bu<this.length;Bu+=1)this[Bu].parentNode!==null&&(_u?ae(this[Bu].parentNode).is(_u)&&$u.push(this[Bu].parentNode):$u.push(this[Bu].parentNode));return ae($u)}function n1(_u){const $u=[];for(let Bu=0;Bu<this.length;Bu+=1){let Ru=this[Bu].parentNode;for(;Ru;)_u?ae(Ru).is(_u)&&$u.push(Ru):$u.push(Ru),Ru=Ru.parentNode}return ae($u)}function i1(_u){let $u=this;return typeof _u>"u"?ae([]):($u.is(_u)||($u=$u.parents(_u).eq(0)),$u)}function s1(_u){const $u=[];for(let Bu=0;Bu<this.length;Bu+=1){const Ru=this[Bu].querySelectorAll(_u);for(let Lu=0;Lu<Ru.length;Lu+=1)$u.push(Ru[Lu])}return ae($u)}function o1(_u){const $u=[];for(let Bu=0;Bu<this.length;Bu+=1){const Ru=this[Bu].children;for(let Lu=0;Lu<Ru.length;Lu+=1)(!_u||ae(Ru[Lu]).is(_u))&&$u.push(Ru[Lu])}return ae($u)}function r1(){for(let _u=0;_u<this.length;_u+=1)this[_u].parentNode&&this[_u].parentNode.removeChild(this[_u]);return this}const el={addClass:Iv,removeClass:xv,hasClass:Sv,toggleClass:Tv,attr:kv,removeAttr:Dv,transform:Lv,transition:Mv,on:zv,off:Ov,trigger:jv,transitionEnd:Bv,outerWidth:Rv,outerHeight:Hv,styles:Nv,offset:Fv,css:Gv,each:Qv,html:Wv,text:Xv,is:Yv,index:Uv,eq:Vv,append:Zv,prepend:Jv,next:qv,nextAll:Kv,prev:$v,prevAll:e1,parent:t1,parents:n1,closest:i1,find:s1,children:o1,filter:_v,remove:r1};Object.keys(el).forEach(_u=>{Object.defineProperty(ae.fn,_u,{value:el[_u],writable:!0})});function a1(_u){const $u=_u;Object.keys($u).forEach(Bu=>{try{$u[Bu]=null}catch{}try{delete $u[Bu]}catch{}})}function is(_u,$u=0){return setTimeout(_u,$u)}function ni(){return Date.now()}function l1(_u){const $u=Qe();let Bu;return $u.getComputedStyle&&(Bu=$u.getComputedStyle(_u,null)),!Bu&&_u.currentStyle&&(Bu=_u.currentStyle),Bu||(Bu=_u.style),Bu}function c1(_u,$u="x"){const Bu=Qe();let Ru,Lu,Ou;const Fu=l1(_u);return Bu.WebKitCSSMatrix?(Lu=Fu.transform||Fu.webkitTransform,Lu.split(",").length>6&&(Lu=Lu.split(", ").map(Nu=>Nu.replace(",",".")).join(", ")),Ou=new Bu.WebKitCSSMatrix(Lu==="none"?"":Lu)):(Ou=Fu.MozTransform||Fu.OTransform||Fu.MsTransform||Fu.msTransform||Fu.transform||Fu.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),Ru=Ou.toString().split(",")),$u==="x"&&(Bu.WebKitCSSMatrix?Lu=Ou.m41:Ru.length===16?Lu=parseFloat(Ru[12]):Lu=parseFloat(Ru[4])),$u==="y"&&(Bu.WebKitCSSMatrix?Lu=Ou.m42:Ru.length===16?Lu=parseFloat(Ru[13]):Lu=parseFloat(Ru[5])),Lu||0}function zi(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function u1(_u){return typeof window<"u"&&typeof window.HTMLElement<"u"?_u instanceof HTMLElement:_u&&(_u.nodeType===1||_u.nodeType===11)}function rt(..._u){const $u=Object(_u[0]),Bu=["__proto__","constructor","prototype"];for(let Ru=1;Ru<_u.length;Ru+=1){const Lu=_u[Ru];if(Lu!=null&&!u1(Lu)){const Ou=Object.keys(Object(Lu)).filter(Fu=>Bu.indexOf(Fu)<0);for(let Fu=0,Nu=Ou.length;Fu<Nu;Fu+=1){const Vu=Ou[Fu],Uu=Object.getOwnPropertyDescriptor(Lu,Vu);Uu!==void 0&&Uu.enumerable&&(zi($u[Vu])&&zi(Lu[Vu])?Lu[Vu].__swiper__?$u[Vu]=Lu[Vu]:rt($u[Vu],Lu[Vu]):!zi($u[Vu])&&zi(Lu[Vu])?($u[Vu]={},Lu[Vu].__swiper__?$u[Vu]=Lu[Vu]:rt($u[Vu],Lu[Vu])):$u[Vu]=Lu[Vu])}}}return $u}function Oi(_u,$u,Bu){_u.style.setProperty($u,Bu)}function Eu({swiper:_u,targetPosition:$u,side:Bu}){const Ru=Qe(),Lu=-_u.translate;let Ou=null,Fu;const Nu=_u.params.speed;_u.wrapperEl.style.scrollSnapType="none",Ru.cancelAnimationFrame(_u.cssModeFrameID);const Vu=$u>Lu?"next":"prev",Uu=(zu,Hu)=>Vu==="next"&&zu>=Hu||Vu==="prev"&&zu<=Hu,Gu=()=>{Fu=new Date().getTime(),Ou===null&&(Ou=Fu);const zu=Math.max(Math.min((Fu-Ou)/Nu,1),0),Hu=.5-Math.cos(zu*Math.PI)/2;let ju=Lu+Hu*($u-Lu);if(Uu(ju,$u)&&(ju=$u),_u.wrapperEl.scrollTo({[Bu]:ju}),Uu(ju,$u)){_u.wrapperEl.style.overflow="hidden",_u.wrapperEl.style.scrollSnapType="",setTimeout(()=>{_u.wrapperEl.style.overflow="",_u.wrapperEl.scrollTo({[Bu]:ju})}),Ru.cancelAnimationFrame(_u.cssModeFrameID);return}_u.cssModeFrameID=Ru.requestAnimationFrame(Gu)};Gu()}let Gs;function d1(){const _u=Qe(),$u=Je();return{smoothScroll:$u.documentElement&&"scrollBehavior"in $u.documentElement.style,touch:!!("ontouchstart"in _u||_u.DocumentTouch&&$u instanceof _u.DocumentTouch),passiveListener:function(){let Bu=!1;try{const Ru=Object.defineProperty({},"passive",{get(){Bu=!0}});_u.addEventListener("testPassiveListener",null,Ru)}catch{}return Bu}(),gestures:function(){return"ongesturestart"in _u}()}}function Pu(){return Gs||(Gs=d1()),Gs}let Qs;function f1({userAgent:_u}={}){const $u=Pu(),Bu=Qe(),Ru=Bu.navigator.platform,Lu=_u||Bu.navigator.userAgent,Ou={ios:!1,android:!1},Fu=Bu.screen.width,Nu=Bu.screen.height,Vu=Lu.match(/(Android);?[\s\/]+([\d.]+)?/);let Uu=Lu.match(/(iPad).*OS\s([\d_]+)/);const Gu=Lu.match(/(iPod)(.*OS\s([\d_]+))?/),zu=!Uu&&Lu.match(/(iPhone\sOS|iOS)\s([\d_]+)/),Hu=Ru==="Win32";let ju=Ru==="MacIntel";const Qu=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!Uu&&ju&&$u.touch&&Qu.indexOf(`${Fu}x${Nu}`)>=0&&(Uu=Lu.match(/(Version)\/([\d.]+)/),Uu||(Uu=[0,1,"13_0_0"]),ju=!1),Vu&&!Hu&&(Ou.os="android",Ou.android=!0),(Uu||zu||Gu)&&(Ou.os="ios",Ou.ios=!0),Ou}function h1(_u={}){return Qs||(Qs=f1(_u)),Qs}let _s;function p1(){const _u=Qe();function $u(){const Bu=_u.navigator.userAgent.toLowerCase();return Bu.indexOf("safari")>=0&&Bu.indexOf("chrome")<0&&Bu.indexOf("android")<0}return{isSafari:$u(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_u.navigator.userAgent)}}function m1(){return _s||(_s=p1()),_s}function g1({swiper:_u,on:$u,emit:Bu}){const Ru=Qe();let Lu=null,Ou=null;const Fu=()=>{!_u||_u.destroyed||!_u.initialized||(Bu("beforeResize"),Bu("resize"))},Nu=()=>{!_u||_u.destroyed||!_u.initialized||(Lu=new ResizeObserver(Gu=>{Ou=Ru.requestAnimationFrame(()=>{const{width:zu,height:Hu}=_u;let ju=zu,Qu=Hu;Gu.forEach(({contentBoxSize:Xu,contentRect:Ku,target:Wu})=>{Wu&&Wu!==_u.el||(ju=Ku?Ku.width:(Xu[0]||Xu).inlineSize,Qu=Ku?Ku.height:(Xu[0]||Xu).blockSize)}),(ju!==zu||Qu!==Hu)&&Fu()})}),Lu.observe(_u.el))},Vu=()=>{Ou&&Ru.cancelAnimationFrame(Ou),Lu&&Lu.unobserve&&_u.el&&(Lu.unobserve(_u.el),Lu=null)},Uu=()=>{!_u||_u.destroyed||!_u.initialized||Bu("orientationchange")};$u("init",()=>{if(_u.params.resizeObserver&&typeof Ru.ResizeObserver<"u"){Nu();return}Ru.addEventListener("resize",Fu),Ru.addEventListener("orientationchange",Uu)}),$u("destroy",()=>{Vu(),Ru.removeEventListener("resize",Fu),Ru.removeEventListener("orientationchange",Uu)})}function v1({swiper:_u,extendParams:$u,on:Bu,emit:Ru}){const Lu=[],Ou=Qe(),Fu=(Uu,Gu={})=>{const zu=Ou.MutationObserver||Ou.WebkitMutationObserver,Hu=new zu(ju=>{if(ju.length===1){Ru("observerUpdate",ju[0]);return}const Qu=function(){Ru("observerUpdate",ju[0])};Ou.requestAnimationFrame?Ou.requestAnimationFrame(Qu):Ou.setTimeout(Qu,0)});Hu.observe(Uu,{attributes:typeof Gu.attributes>"u"?!0:Gu.attributes,childList:typeof Gu.childList>"u"?!0:Gu.childList,characterData:typeof Gu.characterData>"u"?!0:Gu.characterData}),Lu.push(Hu)},Nu=()=>{if(_u.params.observer){if(_u.params.observeParents){const Uu=_u.$el.parents();for(let Gu=0;Gu<Uu.length;Gu+=1)Fu(Uu[Gu])}Fu(_u.$el[0],{childList:_u.params.observeSlideChildren}),Fu(_u.$wrapperEl[0],{attributes:!1})}},Vu=()=>{Lu.forEach(Uu=>{Uu.disconnect()}),Lu.splice(0,Lu.length)};$u({observer:!1,observeParents:!1,observeSlideChildren:!1}),Bu("init",Nu),Bu("destroy",Vu)}const b1={on(_u,$u,Bu){const Ru=this;if(!Ru.eventsListeners||Ru.destroyed||typeof $u!="function")return Ru;const Lu=Bu?"unshift":"push";return _u.split(" ").forEach(Ou=>{Ru.eventsListeners[Ou]||(Ru.eventsListeners[Ou]=[]),Ru.eventsListeners[Ou][Lu]($u)}),Ru},once(_u,$u,Bu){const Ru=this;if(!Ru.eventsListeners||Ru.destroyed||typeof $u!="function")return Ru;function Lu(...Ou){Ru.off(_u,Lu),Lu.__emitterProxy&&delete Lu.__emitterProxy,$u.apply(Ru,Ou)}return Lu.__emitterProxy=$u,Ru.on(_u,Lu,Bu)},onAny(_u,$u){const Bu=this;if(!Bu.eventsListeners||Bu.destroyed||typeof _u!="function")return Bu;const Ru=$u?"unshift":"push";return Bu.eventsAnyListeners.indexOf(_u)<0&&Bu.eventsAnyListeners[Ru](_u),Bu},offAny(_u){const $u=this;if(!$u.eventsListeners||$u.destroyed||!$u.eventsAnyListeners)return $u;const Bu=$u.eventsAnyListeners.indexOf(_u);return Bu>=0&&$u.eventsAnyListeners.splice(Bu,1),$u},off(_u,$u){const Bu=this;return!Bu.eventsListeners||Bu.destroyed||!Bu.eventsListeners||_u.split(" ").forEach(Ru=>{typeof $u>"u"?Bu.eventsListeners[Ru]=[]:Bu.eventsListeners[Ru]&&Bu.eventsListeners[Ru].forEach((Lu,Ou)=>{(Lu===$u||Lu.__emitterProxy&&Lu.__emitterProxy===$u)&&Bu.eventsListeners[Ru].splice(Ou,1)})}),Bu},emit(..._u){const $u=this;if(!$u.eventsListeners||$u.destroyed||!$u.eventsListeners)return $u;let Bu,Ru,Lu;return typeof _u[0]=="string"||Array.isArray(_u[0])?(Bu=_u[0],Ru=_u.slice(1,_u.length),Lu=$u):(Bu=_u[0].events,Ru=_u[0].data,Lu=_u[0].context||$u),Ru.unshift(Lu),(Array.isArray(Bu)?Bu:Bu.split(" ")).forEach(Ou=>{$u.eventsAnyListeners&&$u.eventsAnyListeners.length&&$u.eventsAnyListeners.forEach(Fu=>{Fu.apply(Lu,[Ou,...Ru])}),$u.eventsListeners&&$u.eventsListeners[Ou]&&$u.eventsListeners[Ou].forEach(Fu=>{Fu.apply(Lu,Ru)})}),$u}};function A1(){const _u=this;let $u,Bu;const Ru=_u.$el;typeof _u.params.width<"u"&&_u.params.width!==null?$u=_u.params.width:$u=Ru[0].clientWidth,typeof _u.params.height<"u"&&_u.params.height!==null?Bu=_u.params.height:Bu=Ru[0].clientHeight,!($u===0&&_u.isHorizontal()||Bu===0&&_u.isVertical())&&($u=$u-parseInt(Ru.css("padding-left")||0,10)-parseInt(Ru.css("padding-right")||0,10),Bu=Bu-parseInt(Ru.css("padding-top")||0,10)-parseInt(Ru.css("padding-bottom")||0,10),Number.isNaN($u)&&($u=0),Number.isNaN(Bu)&&(Bu=0),Object.assign(_u,{width:$u,height:Bu,size:_u.isHorizontal()?$u:Bu}))}function y1(){const _u=this;function $u(Ju){return _u.isHorizontal()?Ju:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Ju]}function Bu(Ju,_f){return parseFloat(Ju.getPropertyValue($u(_f))||0)}const Ru=_u.params,{$wrapperEl:Lu,size:Ou,rtlTranslate:Fu,wrongRTL:Nu}=_u,Vu=_u.virtual&&Ru.virtual.enabled,Uu=Vu?_u.virtual.slides.length:_u.slides.length,Gu=Lu.children(`.${_u.params.slideClass}`),zu=Vu?_u.virtual.slides.length:Gu.length;let Hu=[];const ju=[],Qu=[];let Xu=Ru.slidesOffsetBefore;typeof Xu=="function"&&(Xu=Ru.slidesOffsetBefore.call(_u));let Ku=Ru.slidesOffsetAfter;typeof Ku=="function"&&(Ku=Ru.slidesOffsetAfter.call(_u));const Wu=_u.snapGrid.length,qu=_u.slidesGrid.length;let Yu=Ru.spaceBetween,Zu=-Xu,_h=0,ep=0;if(typeof Ou>"u")return;typeof Yu=="string"&&Yu.indexOf("%")>=0&&(Yu=parseFloat(Yu.replace("%",""))/100*Ou),_u.virtualSize=-Yu,Fu?Gu.css({marginLeft:"",marginBottom:"",marginTop:""}):Gu.css({marginRight:"",marginBottom:"",marginTop:""}),Ru.centeredSlides&&Ru.cssMode&&(Oi(_u.wrapperEl,"--swiper-centered-offset-before",""),Oi(_u.wrapperEl,"--swiper-centered-offset-after",""));const ip=Ru.grid&&Ru.grid.rows>1&&_u.grid;ip&&_u.grid.initSlides(zu);let ap;const sp=Ru.slidesPerView==="auto"&&Ru.breakpoints&&Object.keys(Ru.breakpoints).filter(Ju=>typeof Ru.breakpoints[Ju].slidesPerView<"u").length>0;for(let Ju=0;Ju<zu;Ju+=1){ap=0;const _f=Gu.eq(Ju);if(ip&&_u.grid.updateSlide(Ju,_f,zu,$u),_f.css("display")!=="none"){if(Ru.slidesPerView==="auto"){sp&&(Gu[Ju].style[$u("width")]="");const np=getComputedStyle(_f[0]),tp=_f[0].style.transform,rp=_f[0].style.webkitTransform;if(tp&&(_f[0].style.transform="none"),rp&&(_f[0].style.webkitTransform="none"),Ru.roundLengths)ap=_u.isHorizontal()?_f.outerWidth(!0):_f.outerHeight(!0);else{const op=Bu(np,"width"),lp=Bu(np,"padding-left"),up=Bu(np,"padding-right"),cp=Bu(np,"margin-left"),Ap=Bu(np,"margin-right"),yp=np.getPropertyValue("box-sizing");if(yp&&yp==="border-box")ap=op+cp+Ap;else{const{clientWidth:Ip,offsetWidth:Ep}=_f[0];ap=op+lp+up+cp+Ap+(Ep-Ip)}}tp&&(_f[0].style.transform=tp),rp&&(_f[0].style.webkitTransform=rp),Ru.roundLengths&&(ap=Math.floor(ap))}else ap=(Ou-(Ru.slidesPerView-1)*Yu)/Ru.slidesPerView,Ru.roundLengths&&(ap=Math.floor(ap)),Gu[Ju]&&(Gu[Ju].style[$u("width")]=`${ap}px`);Gu[Ju]&&(Gu[Ju].swiperSlideSize=ap),Qu.push(ap),Ru.centeredSlides?(Zu=Zu+ap/2+_h/2+Yu,_h===0&&Ju!==0&&(Zu=Zu-Ou/2-Yu),Ju===0&&(Zu=Zu-Ou/2-Yu),Math.abs(Zu)<1/1e3&&(Zu=0),Ru.roundLengths&&(Zu=Math.floor(Zu)),ep%Ru.slidesPerGroup===0&&Hu.push(Zu),ju.push(Zu)):(Ru.roundLengths&&(Zu=Math.floor(Zu)),(ep-Math.min(_u.params.slidesPerGroupSkip,ep))%_u.params.slidesPerGroup===0&&Hu.push(Zu),ju.push(Zu),Zu=Zu+ap+Yu),_u.virtualSize+=ap+Yu,_h=ap,ep+=1}}if(_u.virtualSize=Math.max(_u.virtualSize,Ou)+Ku,Fu&&Nu&&(Ru.effect==="slide"||Ru.effect==="coverflow")&&Lu.css({width:`${_u.virtualSize+Ru.spaceBetween}px`}),Ru.setWrapperSize&&Lu.css({[$u("width")]:`${_u.virtualSize+Ru.spaceBetween}px`}),ip&&_u.grid.updateWrapperSize(ap,Hu,$u),!Ru.centeredSlides){const Ju=[];for(let _f=0;_f<Hu.length;_f+=1){let np=Hu[_f];Ru.roundLengths&&(np=Math.floor(np)),Hu[_f]<=_u.virtualSize-Ou&&Ju.push(np)}Hu=Ju,Math.floor(_u.virtualSize-Ou)-Math.floor(Hu[Hu.length-1])>1&&Hu.push(_u.virtualSize-Ou)}if(Hu.length===0&&(Hu=[0]),Ru.spaceBetween!==0){const Ju=_u.isHorizontal()&&Fu?"marginLeft":$u("marginRight");Gu.filter((_f,np)=>Ru.cssMode?np!==Gu.length-1:!0).css({[Ju]:`${Yu}px`})}if(Ru.centeredSlides&&Ru.centeredSlidesBounds){let Ju=0;Qu.forEach(np=>{Ju+=np+(Ru.spaceBetween?Ru.spaceBetween:0)}),Ju-=Ru.spaceBetween;const _f=Ju-Ou;Hu=Hu.map(np=>np<0?-Xu:np>_f?_f+Ku:np)}if(Ru.centerInsufficientSlides){let Ju=0;if(Qu.forEach(_f=>{Ju+=_f+(Ru.spaceBetween?Ru.spaceBetween:0)}),Ju-=Ru.spaceBetween,Ju<Ou){const _f=(Ou-Ju)/2;Hu.forEach((np,tp)=>{Hu[tp]=np-_f}),ju.forEach((np,tp)=>{ju[tp]=np+_f})}}if(Object.assign(_u,{slides:Gu,snapGrid:Hu,slidesGrid:ju,slidesSizesGrid:Qu}),Ru.centeredSlides&&Ru.cssMode&&!Ru.centeredSlidesBounds){Oi(_u.wrapperEl,"--swiper-centered-offset-before",`${-Hu[0]}px`),Oi(_u.wrapperEl,"--swiper-centered-offset-after",`${_u.size/2-Qu[Qu.length-1]/2}px`);const Ju=-_u.snapGrid[0],_f=-_u.slidesGrid[0];_u.snapGrid=_u.snapGrid.map(np=>np+Ju),_u.slidesGrid=_u.slidesGrid.map(np=>np+_f)}if(zu!==Uu&&_u.emit("slidesLengthChange"),Hu.length!==Wu&&(_u.params.watchOverflow&&_u.checkOverflow(),_u.emit("snapGridLengthChange")),ju.length!==qu&&_u.emit("slidesGridLengthChange"),Ru.watchSlidesProgress&&_u.updateSlidesOffset(),!Vu&&!Ru.cssMode&&(Ru.effect==="slide"||Ru.effect==="fade")){const Ju=`${Ru.containerModifierClass}backface-hidden`,_f=_u.$el.hasClass(Ju);zu<=Ru.maxBackfaceHiddenSlides?_f||_u.$el.addClass(Ju):_f&&_u.$el.removeClass(Ju)}}function w1(_u){const $u=this,Bu=[],Ru=$u.virtual&&$u.params.virtual.enabled;let Lu=0,Ou;typeof _u=="number"?$u.setTransition(_u):_u===!0&&$u.setTransition($u.params.speed);const Fu=Nu=>Ru?$u.slides.filter(Vu=>parseInt(Vu.getAttribute("data-swiper-slide-index"),10)===Nu)[0]:$u.slides.eq(Nu)[0];if($u.params.slidesPerView!=="auto"&&$u.params.slidesPerView>1)if($u.params.centeredSlides)($u.visibleSlides||ae([])).each(Nu=>{Bu.push(Nu)});else for(Ou=0;Ou<Math.ceil($u.params.slidesPerView);Ou+=1){const Nu=$u.activeIndex+Ou;if(Nu>$u.slides.length&&!Ru)break;Bu.push(Fu(Nu))}else Bu.push(Fu($u.activeIndex));for(Ou=0;Ou<Bu.length;Ou+=1)if(typeof Bu[Ou]<"u"){const Nu=Bu[Ou].offsetHeight;Lu=Nu>Lu?Nu:Lu}(Lu||Lu===0)&&$u.$wrapperEl.css("height",`${Lu}px`)}function E1(){const _u=this,$u=_u.slides;for(let Bu=0;Bu<$u.length;Bu+=1)$u[Bu].swiperSlideOffset=_u.isHorizontal()?$u[Bu].offsetLeft:$u[Bu].offsetTop}function P1(_u=this&&this.translate||0){const $u=this,Bu=$u.params,{slides:Ru,rtlTranslate:Lu,snapGrid:Ou}=$u;if(Ru.length===0)return;typeof Ru[0].swiperSlideOffset>"u"&&$u.updateSlidesOffset();let Fu=-_u;Lu&&(Fu=_u),Ru.removeClass(Bu.slideVisibleClass),$u.visibleSlidesIndexes=[],$u.visibleSlides=[];for(let Nu=0;Nu<Ru.length;Nu+=1){const Vu=Ru[Nu];let Uu=Vu.swiperSlideOffset;Bu.cssMode&&Bu.centeredSlides&&(Uu-=Ru[0].swiperSlideOffset);const Gu=(Fu+(Bu.centeredSlides?$u.minTranslate():0)-Uu)/(Vu.swiperSlideSize+Bu.spaceBetween),zu=(Fu-Ou[0]+(Bu.centeredSlides?$u.minTranslate():0)-Uu)/(Vu.swiperSlideSize+Bu.spaceBetween),Hu=-(Fu-Uu),ju=Hu+$u.slidesSizesGrid[Nu];(Hu>=0&&Hu<$u.size-1||ju>1&&ju<=$u.size||Hu<=0&&ju>=$u.size)&&($u.visibleSlides.push(Vu),$u.visibleSlidesIndexes.push(Nu),Ru.eq(Nu).addClass(Bu.slideVisibleClass)),Vu.progress=Lu?-Gu:Gu,Vu.originalProgress=Lu?-zu:zu}$u.visibleSlides=ae($u.visibleSlides)}function C1(_u){const $u=this;if(typeof _u>"u"){const Uu=$u.rtlTranslate?-1:1;_u=$u&&$u.translate&&$u.translate*Uu||0}const Bu=$u.params,Ru=$u.maxTranslate()-$u.minTranslate();let{progress:Lu,isBeginning:Ou,isEnd:Fu}=$u;const Nu=Ou,Vu=Fu;Ru===0?(Lu=0,Ou=!0,Fu=!0):(Lu=(_u-$u.minTranslate())/Ru,Ou=Lu<=0,Fu=Lu>=1),Object.assign($u,{progress:Lu,isBeginning:Ou,isEnd:Fu}),(Bu.watchSlidesProgress||Bu.centeredSlides&&Bu.autoHeight)&&$u.updateSlidesProgress(_u),Ou&&!Nu&&$u.emit("reachBeginning toEdge"),Fu&&!Vu&&$u.emit("reachEnd toEdge"),(Nu&&!Ou||Vu&&!Fu)&&$u.emit("fromEdge"),$u.emit("progress",Lu)}function I1(){const _u=this,{slides:$u,params:Bu,$wrapperEl:Ru,activeIndex:Lu,realIndex:Ou}=_u,Fu=_u.virtual&&Bu.virtual.enabled;$u.removeClass(`${Bu.slideActiveClass} ${Bu.slideNextClass} ${Bu.slidePrevClass} ${Bu.slideDuplicateActiveClass} ${Bu.slideDuplicateNextClass} ${Bu.slideDuplicatePrevClass}`);let Nu;Fu?Nu=_u.$wrapperEl.find(`.${Bu.slideClass}[data-swiper-slide-index="${Lu}"]`):Nu=$u.eq(Lu),Nu.addClass(Bu.slideActiveClass),Bu.loop&&(Nu.hasClass(Bu.slideDuplicateClass)?Ru.children(`.${Bu.slideClass}:not(.${Bu.slideDuplicateClass})[data-swiper-slide-index="${Ou}"]`).addClass(Bu.slideDuplicateActiveClass):Ru.children(`.${Bu.slideClass}.${Bu.slideDuplicateClass}[data-swiper-slide-index="${Ou}"]`).addClass(Bu.slideDuplicateActiveClass));let Vu=Nu.nextAll(`.${Bu.slideClass}`).eq(0).addClass(Bu.slideNextClass);Bu.loop&&Vu.length===0&&(Vu=$u.eq(0),Vu.addClass(Bu.slideNextClass));let Uu=Nu.prevAll(`.${Bu.slideClass}`).eq(0).addClass(Bu.slidePrevClass);Bu.loop&&Uu.length===0&&(Uu=$u.eq(-1),Uu.addClass(Bu.slidePrevClass)),Bu.loop&&(Vu.hasClass(Bu.slideDuplicateClass)?Ru.children(`.${Bu.slideClass}:not(.${Bu.slideDuplicateClass})[data-swiper-slide-index="${Vu.attr("data-swiper-slide-index")}"]`).addClass(Bu.slideDuplicateNextClass):Ru.children(`.${Bu.slideClass}.${Bu.slideDuplicateClass}[data-swiper-slide-index="${Vu.attr("data-swiper-slide-index")}"]`).addClass(Bu.slideDuplicateNextClass),Uu.hasClass(Bu.slideDuplicateClass)?Ru.children(`.${Bu.slideClass}:not(.${Bu.slideDuplicateClass})[data-swiper-slide-index="${Uu.attr("data-swiper-slide-index")}"]`).addClass(Bu.slideDuplicatePrevClass):Ru.children(`.${Bu.slideClass}.${Bu.slideDuplicateClass}[data-swiper-slide-index="${Uu.attr("data-swiper-slide-index")}"]`).addClass(Bu.slideDuplicatePrevClass)),_u.emitSlidesClasses()}function x1(_u){const $u=this,Bu=$u.rtlTranslate?$u.translate:-$u.translate,{slidesGrid:Ru,snapGrid:Lu,params:Ou,activeIndex:Fu,realIndex:Nu,snapIndex:Vu}=$u;let Uu=_u,Gu;if(typeof Uu>"u"){for(let Hu=0;Hu<Ru.length;Hu+=1)typeof Ru[Hu+1]<"u"?Bu>=Ru[Hu]&&Bu<Ru[Hu+1]-(Ru[Hu+1]-Ru[Hu])/2?Uu=Hu:Bu>=Ru[Hu]&&Bu<Ru[Hu+1]&&(Uu=Hu+1):Bu>=Ru[Hu]&&(Uu=Hu);Ou.normalizeSlideIndex&&(Uu<0||typeof Uu>"u")&&(Uu=0)}if(Lu.indexOf(Bu)>=0)Gu=Lu.indexOf(Bu);else{const Hu=Math.min(Ou.slidesPerGroupSkip,Uu);Gu=Hu+Math.floor((Uu-Hu)/Ou.slidesPerGroup)}if(Gu>=Lu.length&&(Gu=Lu.length-1),Uu===Fu){Gu!==Vu&&($u.snapIndex=Gu,$u.emit("snapIndexChange"));return}const zu=parseInt($u.slides.eq(Uu).attr("data-swiper-slide-index")||Uu,10);Object.assign($u,{snapIndex:Gu,realIndex:zu,previousIndex:Fu,activeIndex:Uu}),$u.emit("activeIndexChange"),$u.emit("snapIndexChange"),Nu!==zu&&$u.emit("realIndexChange"),($u.initialized||$u.params.runCallbacksOnInit)&&$u.emit("slideChange")}function T1(_u){const $u=this,Bu=$u.params,Ru=ae(_u).closest(`.${Bu.slideClass}`)[0];let Lu=!1,Ou;if(Ru){for(let Fu=0;Fu<$u.slides.length;Fu+=1)if($u.slides[Fu]===Ru){Lu=!0,Ou=Fu;break}}if(Ru&&Lu)$u.clickedSlide=Ru,$u.virtual&&$u.params.virtual.enabled?$u.clickedIndex=parseInt(ae(Ru).attr("data-swiper-slide-index"),10):$u.clickedIndex=Ou;else{$u.clickedSlide=void 0,$u.clickedIndex=void 0;return}Bu.slideToClickedSlide&&$u.clickedIndex!==void 0&&$u.clickedIndex!==$u.activeIndex&&$u.slideToClickedSlide()}const S1={updateSize:A1,updateSlides:y1,updateAutoHeight:w1,updateSlidesOffset:E1,updateSlidesProgress:P1,updateProgress:C1,updateSlidesClasses:I1,updateActiveIndex:x1,updateClickedSlide:T1};function k1(_u=this.isHorizontal()?"x":"y"){const $u=this,{params:Bu,rtlTranslate:Ru,translate:Lu,$wrapperEl:Ou}=$u;if(Bu.virtualTranslate)return Ru?-Lu:Lu;if(Bu.cssMode)return Lu;let Fu=c1(Ou[0],_u);return Ru&&(Fu=-Fu),Fu||0}function D1(_u,$u){const Bu=this,{rtlTranslate:Ru,params:Lu,$wrapperEl:Ou,wrapperEl:Fu,progress:Nu}=Bu;let Vu=0,Uu=0;const Gu=0;Bu.isHorizontal()?Vu=Ru?-_u:_u:Uu=_u,Lu.roundLengths&&(Vu=Math.floor(Vu),Uu=Math.floor(Uu)),Lu.cssMode?Fu[Bu.isHorizontal()?"scrollLeft":"scrollTop"]=Bu.isHorizontal()?-Vu:-Uu:Lu.virtualTranslate||Ou.transform(`translate3d(${Vu}px, ${Uu}px, ${Gu}px)`),Bu.previousTranslate=Bu.translate,Bu.translate=Bu.isHorizontal()?Vu:Uu;let zu;const Hu=Bu.maxTranslate()-Bu.minTranslate();Hu===0?zu=0:zu=(_u-Bu.minTranslate())/Hu,zu!==Nu&&Bu.updateProgress(_u),Bu.emit("setTranslate",Bu.translate,$u)}function L1(){return-this.snapGrid[0]}function M1(){return-this.snapGrid[this.snapGrid.length-1]}function z1(_u=0,$u=this.params.speed,Bu=!0,Ru=!0,Lu){const Ou=this,{params:Fu,wrapperEl:Nu}=Ou;if(Ou.animating&&Fu.preventInteractionOnTransition)return!1;const Vu=Ou.minTranslate(),Uu=Ou.maxTranslate();let Gu;if(Ru&&_u>Vu?Gu=Vu:Ru&&_u<Uu?Gu=Uu:Gu=_u,Ou.updateProgress(Gu),Fu.cssMode){const zu=Ou.isHorizontal();if($u===0)Nu[zu?"scrollLeft":"scrollTop"]=-Gu;else{if(!Ou.support.smoothScroll)return Eu({swiper:Ou,targetPosition:-Gu,side:zu?"left":"top"}),!0;Nu.scrollTo({[zu?"left":"top"]:-Gu,behavior:"smooth"})}return!0}return $u===0?(Ou.setTransition(0),Ou.setTranslate(Gu),Bu&&(Ou.emit("beforeTransitionStart",$u,Lu),Ou.emit("transitionEnd"))):(Ou.setTransition($u),Ou.setTranslate(Gu),Bu&&(Ou.emit("beforeTransitionStart",$u,Lu),Ou.emit("transitionStart")),Ou.animating||(Ou.animating=!0,Ou.onTranslateToWrapperTransitionEnd||(Ou.onTranslateToWrapperTransitionEnd=function(zu){!Ou||Ou.destroyed||zu.target===this&&(Ou.$wrapperEl[0].removeEventListener("transitionend",Ou.onTranslateToWrapperTransitionEnd),Ou.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ou.onTranslateToWrapperTransitionEnd),Ou.onTranslateToWrapperTransitionEnd=null,delete Ou.onTranslateToWrapperTransitionEnd,Bu&&Ou.emit("transitionEnd"))}),Ou.$wrapperEl[0].addEventListener("transitionend",Ou.onTranslateToWrapperTransitionEnd),Ou.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ou.onTranslateToWrapperTransitionEnd))),!0}const O1={getTranslate:k1,setTranslate:D1,minTranslate:L1,maxTranslate:M1,translateTo:z1};function j1(_u,$u){const Bu=this;Bu.params.cssMode||Bu.$wrapperEl.transition(_u),Bu.emit("setTransition",_u,$u)}function Cu({swiper:_u,runCallbacks:$u,direction:Bu,step:Ru}){const{activeIndex:Lu,previousIndex:Ou}=_u;let Fu=Bu;if(Fu||(Lu>Ou?Fu="next":Lu<Ou?Fu="prev":Fu="reset"),_u.emit(`transition${Ru}`),$u&&Lu!==Ou){if(Fu==="reset"){_u.emit(`slideResetTransition${Ru}`);return}_u.emit(`slideChangeTransition${Ru}`),Fu==="next"?_u.emit(`slideNextTransition${Ru}`):_u.emit(`slidePrevTransition${Ru}`)}}function B1(_u=!0,$u){const Bu=this,{params:Ru}=Bu;Ru.cssMode||(Ru.autoHeight&&Bu.updateAutoHeight(),Cu({swiper:Bu,runCallbacks:_u,direction:$u,step:"Start"}))}function R1(_u=!0,$u){const Bu=this,{params:Ru}=Bu;Bu.animating=!1,!Ru.cssMode&&(Bu.setTransition(0),Cu({swiper:Bu,runCallbacks:_u,direction:$u,step:"End"}))}const H1={setTransition:j1,transitionStart:B1,transitionEnd:R1};function F1(_u=0,$u=this.params.speed,Bu=!0,Ru,Lu){if(typeof _u!="number"&&typeof _u!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof _u}] given.`);if(typeof _u=="string"){const Yu=parseInt(_u,10);if(!isFinite(Yu))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Yu}const Ou=this;let Fu=_u;Fu<0&&(Fu=0);const{params:Nu,snapGrid:Vu,slidesGrid:Uu,previousIndex:Gu,activeIndex:zu,rtlTranslate:Hu,wrapperEl:ju,enabled:Qu}=Ou;if(Ou.animating&&Nu.preventInteractionOnTransition||!Qu&&!Ru&&!Lu)return!1;const Xu=Math.min(Ou.params.slidesPerGroupSkip,Fu);let Ku=Xu+Math.floor((Fu-Xu)/Ou.params.slidesPerGroup);Ku>=Vu.length&&(Ku=Vu.length-1);const Wu=-Vu[Ku];if(Nu.normalizeSlideIndex)for(let Yu=0;Yu<Uu.length;Yu+=1){const Zu=-Math.floor(Wu*100),_h=Math.floor(Uu[Yu]*100),ep=Math.floor(Uu[Yu+1]*100);typeof Uu[Yu+1]<"u"?Zu>=_h&&Zu<ep-(ep-_h)/2?Fu=Yu:Zu>=_h&&Zu<ep&&(Fu=Yu+1):Zu>=_h&&(Fu=Yu)}if(Ou.initialized&&Fu!==zu&&(!Ou.allowSlideNext&&Wu<Ou.translate&&Wu<Ou.minTranslate()||!Ou.allowSlidePrev&&Wu>Ou.translate&&Wu>Ou.maxTranslate()&&(zu||0)!==Fu))return!1;Fu!==(Gu||0)&&Bu&&Ou.emit("beforeSlideChangeStart"),Ou.updateProgress(Wu);let qu;if(Fu>zu?qu="next":Fu<zu?qu="prev":qu="reset",Hu&&-Wu===Ou.translate||!Hu&&Wu===Ou.translate)return Ou.updateActiveIndex(Fu),Nu.autoHeight&&Ou.updateAutoHeight(),Ou.updateSlidesClasses(),Nu.effect!=="slide"&&Ou.setTranslate(Wu),qu!=="reset"&&(Ou.transitionStart(Bu,qu),Ou.transitionEnd(Bu,qu)),!1;if(Nu.cssMode){const Yu=Ou.isHorizontal(),Zu=Hu?Wu:-Wu;if($u===0){const _h=Ou.virtual&&Ou.params.virtual.enabled;_h&&(Ou.wrapperEl.style.scrollSnapType="none",Ou._immediateVirtual=!0),ju[Yu?"scrollLeft":"scrollTop"]=Zu,_h&&requestAnimationFrame(()=>{Ou.wrapperEl.style.scrollSnapType="",Ou._swiperImmediateVirtual=!1})}else{if(!Ou.support.smoothScroll)return Eu({swiper:Ou,targetPosition:Zu,side:Yu?"left":"top"}),!0;ju.scrollTo({[Yu?"left":"top"]:Zu,behavior:"smooth"})}return!0}return Ou.setTransition($u),Ou.setTranslate(Wu),Ou.updateActiveIndex(Fu),Ou.updateSlidesClasses(),Ou.emit("beforeTransitionStart",$u,Ru),Ou.transitionStart(Bu,qu),$u===0?Ou.transitionEnd(Bu,qu):Ou.animating||(Ou.animating=!0,Ou.onSlideToWrapperTransitionEnd||(Ou.onSlideToWrapperTransitionEnd=function(Yu){!Ou||Ou.destroyed||Yu.target===this&&(Ou.$wrapperEl[0].removeEventListener("transitionend",Ou.onSlideToWrapperTransitionEnd),Ou.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ou.onSlideToWrapperTransitionEnd),Ou.onSlideToWrapperTransitionEnd=null,delete Ou.onSlideToWrapperTransitionEnd,Ou.transitionEnd(Bu,qu))}),Ou.$wrapperEl[0].addEventListener("transitionend",Ou.onSlideToWrapperTransitionEnd),Ou.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ou.onSlideToWrapperTransitionEnd)),!0}function N1(_u=0,$u=this.params.speed,Bu=!0,Ru){if(typeof _u=="string"){const Fu=parseInt(_u,10);if(!isFinite(Fu))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Fu}const Lu=this;let Ou=_u;return Lu.params.loop&&(Ou+=Lu.loopedSlides),Lu.slideTo(Ou,$u,Bu,Ru)}function G1(_u=this.params.speed,$u=!0,Bu){const Ru=this,{animating:Lu,enabled:Ou,params:Fu}=Ru;if(!Ou)return Ru;let Nu=Fu.slidesPerGroup;Fu.slidesPerView==="auto"&&Fu.slidesPerGroup===1&&Fu.slidesPerGroupAuto&&(Nu=Math.max(Ru.slidesPerViewDynamic("current",!0),1));const Vu=Ru.activeIndex<Fu.slidesPerGroupSkip?1:Nu;if(Fu.loop){if(Lu&&Fu.loopPreventsSlide)return!1;Ru.loopFix(),Ru._clientLeft=Ru.$wrapperEl[0].clientLeft}return Fu.rewind&&Ru.isEnd?Ru.slideTo(0,_u,$u,Bu):Ru.slideTo(Ru.activeIndex+Vu,_u,$u,Bu)}function Q1(_u=this.params.speed,$u=!0,Bu){const Ru=this,{params:Lu,animating:Ou,snapGrid:Fu,slidesGrid:Nu,rtlTranslate:Vu,enabled:Uu}=Ru;if(!Uu)return Ru;if(Lu.loop){if(Ou&&Lu.loopPreventsSlide)return!1;Ru.loopFix(),Ru._clientLeft=Ru.$wrapperEl[0].clientLeft}const Gu=Vu?Ru.translate:-Ru.translate;function zu(Ku){return Ku<0?-Math.floor(Math.abs(Ku)):Math.floor(Ku)}const Hu=zu(Gu),ju=Fu.map(Ku=>zu(Ku));let Qu=Fu[ju.indexOf(Hu)-1];if(typeof Qu>"u"&&Lu.cssMode){let Ku;Fu.forEach((Wu,qu)=>{Hu>=Wu&&(Ku=qu)}),typeof Ku<"u"&&(Qu=Fu[Ku>0?Ku-1:Ku])}let Xu=0;if(typeof Qu<"u"&&(Xu=Nu.indexOf(Qu),Xu<0&&(Xu=Ru.activeIndex-1),Lu.slidesPerView==="auto"&&Lu.slidesPerGroup===1&&Lu.slidesPerGroupAuto&&(Xu=Xu-Ru.slidesPerViewDynamic("previous",!0)+1,Xu=Math.max(Xu,0))),Lu.rewind&&Ru.isBeginning){const Ku=Ru.params.virtual&&Ru.params.virtual.enabled&&Ru.virtual?Ru.virtual.slides.length-1:Ru.slides.length-1;return Ru.slideTo(Ku,_u,$u,Bu)}return Ru.slideTo(Xu,_u,$u,Bu)}function _1(_u=this.params.speed,$u=!0,Bu){const Ru=this;return Ru.slideTo(Ru.activeIndex,_u,$u,Bu)}function W1(_u=this.params.speed,$u=!0,Bu,Ru=.5){const Lu=this;let Ou=Lu.activeIndex;const Fu=Math.min(Lu.params.slidesPerGroupSkip,Ou),Nu=Fu+Math.floor((Ou-Fu)/Lu.params.slidesPerGroup),Vu=Lu.rtlTranslate?Lu.translate:-Lu.translate;if(Vu>=Lu.snapGrid[Nu]){const Uu=Lu.snapGrid[Nu],Gu=Lu.snapGrid[Nu+1];Vu-Uu>(Gu-Uu)*Ru&&(Ou+=Lu.params.slidesPerGroup)}else{const Uu=Lu.snapGrid[Nu-1],Gu=Lu.snapGrid[Nu];Vu-Uu<=(Gu-Uu)*Ru&&(Ou-=Lu.params.slidesPerGroup)}return Ou=Math.max(Ou,0),Ou=Math.min(Ou,Lu.slidesGrid.length-1),Lu.slideTo(Ou,_u,$u,Bu)}function X1(){const _u=this,{params:$u,$wrapperEl:Bu}=_u,Ru=$u.slidesPerView==="auto"?_u.slidesPerViewDynamic():$u.slidesPerView;let Lu=_u.clickedIndex,Ou;if($u.loop){if(_u.animating)return;Ou=parseInt(ae(_u.clickedSlide).attr("data-swiper-slide-index"),10),$u.centeredSlides?Lu<_u.loopedSlides-Ru/2||Lu>_u.slides.length-_u.loopedSlides+Ru/2?(_u.loopFix(),Lu=Bu.children(`.${$u.slideClass}[data-swiper-slide-index="${Ou}"]:not(.${$u.slideDuplicateClass})`).eq(0).index(),is(()=>{_u.slideTo(Lu)})):_u.slideTo(Lu):Lu>_u.slides.length-Ru?(_u.loopFix(),Lu=Bu.children(`.${$u.slideClass}[data-swiper-slide-index="${Ou}"]:not(.${$u.slideDuplicateClass})`).eq(0).index(),is(()=>{_u.slideTo(Lu)})):_u.slideTo(Lu)}else _u.slideTo(Lu)}const Y1={slideTo:F1,slideToLoop:N1,slideNext:G1,slidePrev:Q1,slideReset:_1,slideToClosest:W1,slideToClickedSlide:X1};function U1(){const _u=this,$u=Je(),{params:Bu,$wrapperEl:Ru}=_u,Lu=Ru.children().length>0?ae(Ru.children()[0].parentNode):Ru;Lu.children(`.${Bu.slideClass}.${Bu.slideDuplicateClass}`).remove();let Ou=Lu.children(`.${Bu.slideClass}`);if(Bu.loopFillGroupWithBlank){const Vu=Bu.slidesPerGroup-Ou.length%Bu.slidesPerGroup;if(Vu!==Bu.slidesPerGroup){for(let Uu=0;Uu<Vu;Uu+=1){const Gu=ae($u.createElement("div")).addClass(`${Bu.slideClass} ${Bu.slideBlankClass}`);Lu.append(Gu)}Ou=Lu.children(`.${Bu.slideClass}`)}}Bu.slidesPerView==="auto"&&!Bu.loopedSlides&&(Bu.loopedSlides=Ou.length),_u.loopedSlides=Math.ceil(parseFloat(Bu.loopedSlides||Bu.slidesPerView,10)),_u.loopedSlides+=Bu.loopAdditionalSlides,_u.loopedSlides>Ou.length&&_u.params.loopedSlidesLimit&&(_u.loopedSlides=Ou.length);const Fu=[],Nu=[];Ou.each((Vu,Uu)=>{ae(Vu).attr("data-swiper-slide-index",Uu)});for(let Vu=0;Vu<_u.loopedSlides;Vu+=1){const Uu=Vu-Math.floor(Vu/Ou.length)*Ou.length;Nu.push(Ou.eq(Uu)[0]),Fu.unshift(Ou.eq(Ou.length-Uu-1)[0])}for(let Vu=0;Vu<Nu.length;Vu+=1)Lu.append(ae(Nu[Vu].cloneNode(!0)).addClass(Bu.slideDuplicateClass));for(let Vu=Fu.length-1;Vu>=0;Vu-=1)Lu.prepend(ae(Fu[Vu].cloneNode(!0)).addClass(Bu.slideDuplicateClass))}function V1(){const _u=this;_u.emit("beforeLoopFix");const{activeIndex:$u,slides:Bu,loopedSlides:Ru,allowSlidePrev:Lu,allowSlideNext:Ou,snapGrid:Fu,rtlTranslate:Nu}=_u;let Vu;_u.allowSlidePrev=!0,_u.allowSlideNext=!0;const Uu=-Fu[$u]-_u.getTranslate();$u<Ru?(Vu=Bu.length-Ru*3+$u,Vu+=Ru,_u.slideTo(Vu,0,!1,!0)&&Uu!==0&&_u.setTranslate((Nu?-_u.translate:_u.translate)-Uu)):$u>=Bu.length-Ru&&(Vu=-Bu.length+$u+Ru,Vu+=Ru,_u.slideTo(Vu,0,!1,!0)&&Uu!==0&&_u.setTranslate((Nu?-_u.translate:_u.translate)-Uu)),_u.allowSlidePrev=Lu,_u.allowSlideNext=Ou,_u.emit("loopFix")}function Z1(){const _u=this,{$wrapperEl:$u,params:Bu,slides:Ru}=_u;$u.children(`.${Bu.slideClass}.${Bu.slideDuplicateClass},.${Bu.slideClass}.${Bu.slideBlankClass}`).remove(),Ru.removeAttr("data-swiper-slide-index")}const J1={loopCreate:U1,loopFix:V1,loopDestroy:Z1};function q1(_u){const $u=this;if($u.support.touch||!$u.params.simulateTouch||$u.params.watchOverflow&&$u.isLocked||$u.params.cssMode)return;const Bu=$u.params.touchEventsTarget==="container"?$u.el:$u.wrapperEl;Bu.style.cursor="move",Bu.style.cursor=_u?"grabbing":"grab"}function K1(){const _u=this;_u.support.touch||_u.params.watchOverflow&&_u.isLocked||_u.params.cssMode||(_u[_u.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const $1={setGrabCursor:q1,unsetGrabCursor:K1};function eb(_u,$u=this){function Bu(Ru){if(!Ru||Ru===Je()||Ru===Qe())return null;Ru.assignedSlot&&(Ru=Ru.assignedSlot);const Lu=Ru.closest(_u);return!Lu&&!Ru.getRootNode?null:Lu||Bu(Ru.getRootNode().host)}return Bu($u)}function tb(_u){const $u=this,Bu=Je(),Ru=Qe(),Lu=$u.touchEventsData,{params:Ou,touches:Fu,enabled:Nu}=$u;if(!Nu||$u.animating&&Ou.preventInteractionOnTransition)return;!$u.animating&&Ou.cssMode&&Ou.loop&&$u.loopFix();let Vu=_u;Vu.originalEvent&&(Vu=Vu.originalEvent);let Uu=ae(Vu.target);if(Ou.touchEventsTarget==="wrapper"&&!Uu.closest($u.wrapperEl).length||(Lu.isTouchEvent=Vu.type==="touchstart",!Lu.isTouchEvent&&"which"in Vu&&Vu.which===3)||!Lu.isTouchEvent&&"button"in Vu&&Vu.button>0||Lu.isTouched&&Lu.isMoved)return;const Gu=!!Ou.noSwipingClass&&Ou.noSwipingClass!=="",zu=_u.composedPath?_u.composedPath():_u.path;Gu&&Vu.target&&Vu.target.shadowRoot&&zu&&(Uu=ae(zu[0]));const Hu=Ou.noSwipingSelector?Ou.noSwipingSelector:`.${Ou.noSwipingClass}`,ju=!!(Vu.target&&Vu.target.shadowRoot);if(Ou.noSwiping&&(ju?eb(Hu,Uu[0]):Uu.closest(Hu)[0])){$u.allowClick=!0;return}if(Ou.swipeHandler&&!Uu.closest(Ou.swipeHandler)[0])return;Fu.currentX=Vu.type==="touchstart"?Vu.targetTouches[0].pageX:Vu.pageX,Fu.currentY=Vu.type==="touchstart"?Vu.targetTouches[0].pageY:Vu.pageY;const Qu=Fu.currentX,Xu=Fu.currentY,Ku=Ou.edgeSwipeDetection||Ou.iOSEdgeSwipeDetection,Wu=Ou.edgeSwipeThreshold||Ou.iOSEdgeSwipeThreshold;if(Ku&&(Qu<=Wu||Qu>=Ru.innerWidth-Wu))if(Ku==="prevent")_u.preventDefault();else return;if(Object.assign(Lu,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Fu.startX=Qu,Fu.startY=Xu,Lu.touchStartTime=ni(),$u.allowClick=!0,$u.updateSize(),$u.swipeDirection=void 0,Ou.threshold>0&&(Lu.allowThresholdMove=!1),Vu.type!=="touchstart"){let qu=!0;Uu.is(Lu.focusableElements)&&(qu=!1,Uu[0].nodeName==="SELECT"&&(Lu.isTouched=!1)),Bu.activeElement&&ae(Bu.activeElement).is(Lu.focusableElements)&&Bu.activeElement!==Uu[0]&&Bu.activeElement.blur();const Yu=qu&&$u.allowTouchMove&&Ou.touchStartPreventDefault;(Ou.touchStartForcePreventDefault||Yu)&&!Uu[0].isContentEditable&&Vu.preventDefault()}$u.params.freeMode&&$u.params.freeMode.enabled&&$u.freeMode&&$u.animating&&!Ou.cssMode&&$u.freeMode.onTouchStart(),$u.emit("touchStart",Vu)}function nb(_u){const $u=Je(),Bu=this,Ru=Bu.touchEventsData,{params:Lu,touches:Ou,rtlTranslate:Fu,enabled:Nu}=Bu;if(!Nu)return;let Vu=_u;if(Vu.originalEvent&&(Vu=Vu.originalEvent),!Ru.isTouched){Ru.startMoving&&Ru.isScrolling&&Bu.emit("touchMoveOpposite",Vu);return}if(Ru.isTouchEvent&&Vu.type!=="touchmove")return;const Uu=Vu.type==="touchmove"&&Vu.targetTouches&&(Vu.targetTouches[0]||Vu.changedTouches[0]),Gu=Vu.type==="touchmove"?Uu.pageX:Vu.pageX,zu=Vu.type==="touchmove"?Uu.pageY:Vu.pageY;if(Vu.preventedByNestedSwiper){Ou.startX=Gu,Ou.startY=zu;return}if(!Bu.allowTouchMove){ae(Vu.target).is(Ru.focusableElements)||(Bu.allowClick=!1),Ru.isTouched&&(Object.assign(Ou,{startX:Gu,startY:zu,currentX:Gu,currentY:zu}),Ru.touchStartTime=ni());return}if(Ru.isTouchEvent&&Lu.touchReleaseOnEdges&&!Lu.loop){if(Bu.isVertical()){if(zu<Ou.startY&&Bu.translate<=Bu.maxTranslate()||zu>Ou.startY&&Bu.translate>=Bu.minTranslate()){Ru.isTouched=!1,Ru.isMoved=!1;return}}else if(Gu<Ou.startX&&Bu.translate<=Bu.maxTranslate()||Gu>Ou.startX&&Bu.translate>=Bu.minTranslate())return}if(Ru.isTouchEvent&&$u.activeElement&&Vu.target===$u.activeElement&&ae(Vu.target).is(Ru.focusableElements)){Ru.isMoved=!0,Bu.allowClick=!1;return}if(Ru.allowTouchCallbacks&&Bu.emit("touchMove",Vu),Vu.targetTouches&&Vu.targetTouches.length>1)return;Ou.currentX=Gu,Ou.currentY=zu;const Hu=Ou.currentX-Ou.startX,ju=Ou.currentY-Ou.startY;if(Bu.params.threshold&&Math.sqrt(Hu**2+ju**2)<Bu.params.threshold)return;if(typeof Ru.isScrolling>"u"){let Wu;Bu.isHorizontal()&&Ou.currentY===Ou.startY||Bu.isVertical()&&Ou.currentX===Ou.startX?Ru.isScrolling=!1:Hu*Hu+ju*ju>=25&&(Wu=Math.atan2(Math.abs(ju),Math.abs(Hu))*180/Math.PI,Ru.isScrolling=Bu.isHorizontal()?Wu>Lu.touchAngle:90-Wu>Lu.touchAngle)}if(Ru.isScrolling&&Bu.emit("touchMoveOpposite",Vu),typeof Ru.startMoving>"u"&&(Ou.currentX!==Ou.startX||Ou.currentY!==Ou.startY)&&(Ru.startMoving=!0),Ru.isScrolling){Ru.isTouched=!1;return}if(!Ru.startMoving)return;Bu.allowClick=!1,!Lu.cssMode&&Vu.cancelable&&Vu.preventDefault(),Lu.touchMoveStopPropagation&&!Lu.nested&&Vu.stopPropagation(),Ru.isMoved||(Lu.loop&&!Lu.cssMode&&Bu.loopFix(),Ru.startTranslate=Bu.getTranslate(),Bu.setTransition(0),Bu.animating&&Bu.$wrapperEl.trigger("webkitTransitionEnd transitionend"),Ru.allowMomentumBounce=!1,Lu.grabCursor&&(Bu.allowSlideNext===!0||Bu.allowSlidePrev===!0)&&Bu.setGrabCursor(!0),Bu.emit("sliderFirstMove",Vu)),Bu.emit("sliderMove",Vu),Ru.isMoved=!0;let Qu=Bu.isHorizontal()?Hu:ju;Ou.diff=Qu,Qu*=Lu.touchRatio,Fu&&(Qu=-Qu),Bu.swipeDirection=Qu>0?"prev":"next",Ru.currentTranslate=Qu+Ru.startTranslate;let Xu=!0,Ku=Lu.resistanceRatio;if(Lu.touchReleaseOnEdges&&(Ku=0),Qu>0&&Ru.currentTranslate>Bu.minTranslate()?(Xu=!1,Lu.resistance&&(Ru.currentTranslate=Bu.minTranslate()-1+(-Bu.minTranslate()+Ru.startTranslate+Qu)**Ku)):Qu<0&&Ru.currentTranslate<Bu.maxTranslate()&&(Xu=!1,Lu.resistance&&(Ru.currentTranslate=Bu.maxTranslate()+1-(Bu.maxTranslate()-Ru.startTranslate-Qu)**Ku)),Xu&&(Vu.preventedByNestedSwiper=!0),!Bu.allowSlideNext&&Bu.swipeDirection==="next"&&Ru.currentTranslate<Ru.startTranslate&&(Ru.currentTranslate=Ru.startTranslate),!Bu.allowSlidePrev&&Bu.swipeDirection==="prev"&&Ru.currentTranslate>Ru.startTranslate&&(Ru.currentTranslate=Ru.startTranslate),!Bu.allowSlidePrev&&!Bu.allowSlideNext&&(Ru.currentTranslate=Ru.startTranslate),Lu.threshold>0)if(Math.abs(Qu)>Lu.threshold||Ru.allowThresholdMove){if(!Ru.allowThresholdMove){Ru.allowThresholdMove=!0,Ou.startX=Ou.currentX,Ou.startY=Ou.currentY,Ru.currentTranslate=Ru.startTranslate,Ou.diff=Bu.isHorizontal()?Ou.currentX-Ou.startX:Ou.currentY-Ou.startY;return}}else{Ru.currentTranslate=Ru.startTranslate;return}!Lu.followFinger||Lu.cssMode||((Lu.freeMode&&Lu.freeMode.enabled&&Bu.freeMode||Lu.watchSlidesProgress)&&(Bu.updateActiveIndex(),Bu.updateSlidesClasses()),Bu.params.freeMode&&Lu.freeMode.enabled&&Bu.freeMode&&Bu.freeMode.onTouchMove(),Bu.updateProgress(Ru.currentTranslate),Bu.setTranslate(Ru.currentTranslate))}function ib(_u){const $u=this,Bu=$u.touchEventsData,{params:Ru,touches:Lu,rtlTranslate:Ou,slidesGrid:Fu,enabled:Nu}=$u;if(!Nu)return;let Vu=_u;if(Vu.originalEvent&&(Vu=Vu.originalEvent),Bu.allowTouchCallbacks&&$u.emit("touchEnd",Vu),Bu.allowTouchCallbacks=!1,!Bu.isTouched){Bu.isMoved&&Ru.grabCursor&&$u.setGrabCursor(!1),Bu.isMoved=!1,Bu.startMoving=!1;return}Ru.grabCursor&&Bu.isMoved&&Bu.isTouched&&($u.allowSlideNext===!0||$u.allowSlidePrev===!0)&&$u.setGrabCursor(!1);const Uu=ni(),Gu=Uu-Bu.touchStartTime;if($u.allowClick){const qu=Vu.path||Vu.composedPath&&Vu.composedPath();$u.updateClickedSlide(qu&&qu[0]||Vu.target),$u.emit("tap click",Vu),Gu<300&&Uu-Bu.lastClickTime<300&&$u.emit("doubleTap doubleClick",Vu)}if(Bu.lastClickTime=ni(),is(()=>{$u.destroyed||($u.allowClick=!0)}),!Bu.isTouched||!Bu.isMoved||!$u.swipeDirection||Lu.diff===0||Bu.currentTranslate===Bu.startTranslate){Bu.isTouched=!1,Bu.isMoved=!1,Bu.startMoving=!1;return}Bu.isTouched=!1,Bu.isMoved=!1,Bu.startMoving=!1;let zu;if(Ru.followFinger?zu=Ou?$u.translate:-$u.translate:zu=-Bu.currentTranslate,Ru.cssMode)return;if($u.params.freeMode&&Ru.freeMode.enabled){$u.freeMode.onTouchEnd({currentPos:zu});return}let Hu=0,ju=$u.slidesSizesGrid[0];for(let qu=0;qu<Fu.length;qu+=qu<Ru.slidesPerGroupSkip?1:Ru.slidesPerGroup){const Yu=qu<Ru.slidesPerGroupSkip-1?1:Ru.slidesPerGroup;typeof Fu[qu+Yu]<"u"?zu>=Fu[qu]&&zu<Fu[qu+Yu]&&(Hu=qu,ju=Fu[qu+Yu]-Fu[qu]):zu>=Fu[qu]&&(Hu=qu,ju=Fu[Fu.length-1]-Fu[Fu.length-2])}let Qu=null,Xu=null;Ru.rewind&&($u.isBeginning?Xu=$u.params.virtual&&$u.params.virtual.enabled&&$u.virtual?$u.virtual.slides.length-1:$u.slides.length-1:$u.isEnd&&(Qu=0));const Ku=(zu-Fu[Hu])/ju,Wu=Hu<Ru.slidesPerGroupSkip-1?1:Ru.slidesPerGroup;if(Gu>Ru.longSwipesMs){if(!Ru.longSwipes){$u.slideTo($u.activeIndex);return}$u.swipeDirection==="next"&&(Ku>=Ru.longSwipesRatio?$u.slideTo(Ru.rewind&&$u.isEnd?Qu:Hu+Wu):$u.slideTo(Hu)),$u.swipeDirection==="prev"&&(Ku>1-Ru.longSwipesRatio?$u.slideTo(Hu+Wu):Xu!==null&&Ku<0&&Math.abs(Ku)>Ru.longSwipesRatio?$u.slideTo(Xu):$u.slideTo(Hu))}else{if(!Ru.shortSwipes){$u.slideTo($u.activeIndex);return}$u.navigation&&(Vu.target===$u.navigation.nextEl||Vu.target===$u.navigation.prevEl)?Vu.target===$u.navigation.nextEl?$u.slideTo(Hu+Wu):$u.slideTo(Hu):($u.swipeDirection==="next"&&$u.slideTo(Qu!==null?Qu:Hu+Wu),$u.swipeDirection==="prev"&&$u.slideTo(Xu!==null?Xu:Hu))}}function tl(){const _u=this,{params:$u,el:Bu}=_u;if(Bu&&Bu.offsetWidth===0)return;$u.breakpoints&&_u.setBreakpoint();const{allowSlideNext:Ru,allowSlidePrev:Lu,snapGrid:Ou}=_u;_u.allowSlideNext=!0,_u.allowSlidePrev=!0,_u.updateSize(),_u.updateSlides(),_u.updateSlidesClasses(),($u.slidesPerView==="auto"||$u.slidesPerView>1)&&_u.isEnd&&!_u.isBeginning&&!_u.params.centeredSlides?_u.slideTo(_u.slides.length-1,0,!1,!0):_u.slideTo(_u.activeIndex,0,!1,!0),_u.autoplay&&_u.autoplay.running&&_u.autoplay.paused&&_u.autoplay.run(),_u.allowSlidePrev=Lu,_u.allowSlideNext=Ru,_u.params.watchOverflow&&Ou!==_u.snapGrid&&_u.checkOverflow()}function sb(_u){const $u=this;!$u.enabled||$u.allowClick||($u.params.preventClicks&&_u.preventDefault(),$u.params.preventClicksPropagation&&$u.animating&&(_u.stopPropagation(),_u.stopImmediatePropagation()))}function ob(){const _u=this,{wrapperEl:$u,rtlTranslate:Bu,enabled:Ru}=_u;if(!Ru)return;_u.previousTranslate=_u.translate,_u.isHorizontal()?_u.translate=-$u.scrollLeft:_u.translate=-$u.scrollTop,_u.translate===0&&(_u.translate=0),_u.updateActiveIndex(),_u.updateSlidesClasses();let Lu;const Ou=_u.maxTranslate()-_u.minTranslate();Ou===0?Lu=0:Lu=(_u.translate-_u.minTranslate())/Ou,Lu!==_u.progress&&_u.updateProgress(Bu?-_u.translate:_u.translate),_u.emit("setTranslate",_u.translate,!1)}let nl=!1;function rb(){}const Iu=(_u,$u)=>{const Bu=Je(),{params:Ru,touchEvents:Lu,el:Ou,wrapperEl:Fu,device:Nu,support:Vu}=_u,Uu=!!Ru.nested,Gu=$u==="on"?"addEventListener":"removeEventListener",zu=$u;if(!Vu.touch)Ou[Gu](Lu.start,_u.onTouchStart,!1),Bu[Gu](Lu.move,_u.onTouchMove,Uu),Bu[Gu](Lu.end,_u.onTouchEnd,!1);else{const Hu=Lu.start==="touchstart"&&Vu.passiveListener&&Ru.passiveListeners?{passive:!0,capture:!1}:!1;Ou[Gu](Lu.start,_u.onTouchStart,Hu),Ou[Gu](Lu.move,_u.onTouchMove,Vu.passiveListener?{passive:!1,capture:Uu}:Uu),Ou[Gu](Lu.end,_u.onTouchEnd,Hu),Lu.cancel&&Ou[Gu](Lu.cancel,_u.onTouchEnd,Hu)}(Ru.preventClicks||Ru.preventClicksPropagation)&&Ou[Gu]("click",_u.onClick,!0),Ru.cssMode&&Fu[Gu]("scroll",_u.onScroll),Ru.updateOnWindowResize?_u[zu](Nu.ios||Nu.android?"resize orientationchange observerUpdate":"resize observerUpdate",tl,!0):_u[zu]("observerUpdate",tl,!0)};function ab(){const _u=this,$u=Je(),{params:Bu,support:Ru}=_u;_u.onTouchStart=tb.bind(_u),_u.onTouchMove=nb.bind(_u),_u.onTouchEnd=ib.bind(_u),Bu.cssMode&&(_u.onScroll=ob.bind(_u)),_u.onClick=sb.bind(_u),Ru.touch&&!nl&&($u.addEventListener("touchstart",rb),nl=!0),Iu(_u,"on")}function lb(){Iu(this,"off")}const cb={attachEvents:ab,detachEvents:lb},il=(_u,$u)=>_u.grid&&$u.grid&&$u.grid.rows>1;function ub(){const _u=this,{activeIndex:$u,initialized:Bu,loopedSlides:Ru=0,params:Lu,$el:Ou}=_u,Fu=Lu.breakpoints;if(!Fu||Fu&&Object.keys(Fu).length===0)return;const Nu=_u.getBreakpoint(Fu,_u.params.breakpointsBase,_u.el);if(!Nu||_u.currentBreakpoint===Nu)return;const Vu=(Nu in Fu?Fu[Nu]:void 0)||_u.originalParams,Uu=il(_u,Lu),Gu=il(_u,Vu),zu=Lu.enabled;Uu&&!Gu?(Ou.removeClass(`${Lu.containerModifierClass}grid ${Lu.containerModifierClass}grid-column`),_u.emitContainerClasses()):!Uu&&Gu&&(Ou.addClass(`${Lu.containerModifierClass}grid`),(Vu.grid.fill&&Vu.grid.fill==="column"||!Vu.grid.fill&&Lu.grid.fill==="column")&&Ou.addClass(`${Lu.containerModifierClass}grid-column`),_u.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(Xu=>{const Ku=Lu[Xu]&&Lu[Xu].enabled,Wu=Vu[Xu]&&Vu[Xu].enabled;Ku&&!Wu&&_u[Xu].disable(),!Ku&&Wu&&_u[Xu].enable()});const Hu=Vu.direction&&Vu.direction!==Lu.direction,ju=Lu.loop&&(Vu.slidesPerView!==Lu.slidesPerView||Hu);Hu&&Bu&&_u.changeDirection(),rt(_u.params,Vu);const Qu=_u.params.enabled;Object.assign(_u,{allowTouchMove:_u.params.allowTouchMove,allowSlideNext:_u.params.allowSlideNext,allowSlidePrev:_u.params.allowSlidePrev}),zu&&!Qu?_u.disable():!zu&&Qu&&_u.enable(),_u.currentBreakpoint=Nu,_u.emit("_beforeBreakpoint",Vu),ju&&Bu&&(_u.loopDestroy(),_u.loopCreate(),_u.updateSlides(),_u.slideTo($u-Ru+_u.loopedSlides,0,!1)),_u.emit("breakpoint",Vu)}function db(_u,$u="window",Bu){if(!_u||$u==="container"&&!Bu)return;let Ru=!1;const Lu=Qe(),Ou=$u==="window"?Lu.innerHeight:Bu.clientHeight,Fu=Object.keys(_u).map(Nu=>{if(typeof Nu=="string"&&Nu.indexOf("@")===0){const Vu=parseFloat(Nu.substr(1));return{value:Ou*Vu,point:Nu}}return{value:Nu,point:Nu}});Fu.sort((Nu,Vu)=>parseInt(Nu.value,10)-parseInt(Vu.value,10));for(let Nu=0;Nu<Fu.length;Nu+=1){const{point:Vu,value:Uu}=Fu[Nu];$u==="window"?Lu.matchMedia(`(min-width: ${Uu}px)`).matches&&(Ru=Vu):Uu<=Bu.clientWidth&&(Ru=Vu)}return Ru||"max"}const fb={setBreakpoint:ub,getBreakpoint:db};function hb(_u,$u){const Bu=[];return _u.forEach(Ru=>{typeof Ru=="object"?Object.keys(Ru).forEach(Lu=>{Ru[Lu]&&Bu.push($u+Lu)}):typeof Ru=="string"&&Bu.push($u+Ru)}),Bu}function pb(){const _u=this,{classNames:$u,params:Bu,rtl:Ru,$el:Lu,device:Ou,support:Fu}=_u,Nu=hb(["initialized",Bu.direction,{"pointer-events":!Fu.touch},{"free-mode":_u.params.freeMode&&Bu.freeMode.enabled},{autoheight:Bu.autoHeight},{rtl:Ru},{grid:Bu.grid&&Bu.grid.rows>1},{"grid-column":Bu.grid&&Bu.grid.rows>1&&Bu.grid.fill==="column"},{android:Ou.android},{ios:Ou.ios},{"css-mode":Bu.cssMode},{centered:Bu.cssMode&&Bu.centeredSlides},{"watch-progress":Bu.watchSlidesProgress}],Bu.containerModifierClass);$u.push(...Nu),Lu.addClass([...$u].join(" ")),_u.emitContainerClasses()}function mb(){const _u=this,{$el:$u,classNames:Bu}=_u;$u.removeClass(Bu.join(" ")),_u.emitContainerClasses()}const gb={addClasses:pb,removeClasses:mb};function vb(_u,$u,Bu,Ru,Lu,Ou){const Fu=Qe();let Nu;function Vu(){Ou&&Ou()}!ae(_u).parent("picture")[0]&&(!_u.complete||!Lu)&&$u?(Nu=new Fu.Image,Nu.onload=Vu,Nu.onerror=Vu,Ru&&(Nu.sizes=Ru),Bu&&(Nu.srcset=Bu),$u&&(Nu.src=$u)):Vu()}function bb(){const _u=this;_u.imagesToLoad=_u.$el.find("img");function $u(){typeof _u>"u"||_u===null||!_u||_u.destroyed||(_u.imagesLoaded!==void 0&&(_u.imagesLoaded+=1),_u.imagesLoaded===_u.imagesToLoad.length&&(_u.params.updateOnImagesReady&&_u.update(),_u.emit("imagesReady")))}for(let Bu=0;Bu<_u.imagesToLoad.length;Bu+=1){const Ru=_u.imagesToLoad[Bu];_u.loadImage(Ru,Ru.currentSrc||Ru.getAttribute("src"),Ru.srcset||Ru.getAttribute("srcset"),Ru.sizes||Ru.getAttribute("sizes"),!0,$u)}}const Ab={loadImage:vb,preloadImages:bb};function yb(){const _u=this,{isLocked:$u,params:Bu}=_u,{slidesOffsetBefore:Ru}=Bu;if(Ru){const Lu=_u.slides.length-1,Ou=_u.slidesGrid[Lu]+_u.slidesSizesGrid[Lu]+Ru*2;_u.isLocked=_u.size>Ou}else _u.isLocked=_u.snapGrid.length===1;Bu.allowSlideNext===!0&&(_u.allowSlideNext=!_u.isLocked),Bu.allowSlidePrev===!0&&(_u.allowSlidePrev=!_u.isLocked),$u&&$u!==_u.isLocked&&(_u.isEnd=!1),$u!==_u.isLocked&&_u.emit(_u.isLocked?"lock":"unlock")}const wb={checkOverflow:yb},sl={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Eb(_u,$u){return function(Bu={}){const Ru=Object.keys(Bu)[0],Lu=Bu[Ru];if(typeof Lu!="object"||Lu===null){rt($u,Bu);return}if(["navigation","pagination","scrollbar"].indexOf(Ru)>=0&&_u[Ru]===!0&&(_u[Ru]={auto:!0}),!(Ru in _u&&"enabled"in Lu)){rt($u,Bu);return}_u[Ru]===!0&&(_u[Ru]={enabled:!0}),typeof _u[Ru]=="object"&&!("enabled"in _u[Ru])&&(_u[Ru].enabled=!0),_u[Ru]||(_u[Ru]={enabled:!1}),rt($u,Bu)}}const Ws={eventsEmitter:b1,update:S1,translate:O1,transition:H1,slide:Y1,loop:J1,grabCursor:$1,events:cb,breakpoints:fb,checkOverflow:wb,classes:gb,images:Ab},Xs={};class nt{constructor(...$u){let Bu,Ru;if($u.length===1&&$u[0].constructor&&Object.prototype.toString.call($u[0]).slice(8,-1)==="Object"?Ru=$u[0]:[Bu,Ru]=$u,Ru||(Ru={}),Ru=rt({},Ru),Bu&&!Ru.el&&(Ru.el=Bu),Ru.el&&ae(Ru.el).length>1){const Nu=[];return ae(Ru.el).each(Vu=>{const Uu=rt({},Ru,{el:Vu});Nu.push(new nt(Uu))}),Nu}const Lu=this;Lu.__swiper__=!0,Lu.support=Pu(),Lu.device=h1({userAgent:Ru.userAgent}),Lu.browser=m1(),Lu.eventsListeners={},Lu.eventsAnyListeners=[],Lu.modules=[...Lu.__modules__],Ru.modules&&Array.isArray(Ru.modules)&&Lu.modules.push(...Ru.modules);const Ou={};Lu.modules.forEach(Nu=>{Nu({swiper:Lu,extendParams:Eb(Ru,Ou),on:Lu.on.bind(Lu),once:Lu.once.bind(Lu),off:Lu.off.bind(Lu),emit:Lu.emit.bind(Lu)})});const Fu=rt({},sl,Ou);return Lu.params=rt({},Fu,Xs,Ru),Lu.originalParams=rt({},Lu.params),Lu.passedParams=rt({},Ru),Lu.params&&Lu.params.on&&Object.keys(Lu.params.on).forEach(Nu=>{Lu.on(Nu,Lu.params.on[Nu])}),Lu.params&&Lu.params.onAny&&Lu.onAny(Lu.params.onAny),Lu.$=ae,Object.assign(Lu,{enabled:Lu.params.enabled,el:Bu,classNames:[],slides:ae(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return Lu.params.direction==="horizontal"},isVertical(){return Lu.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:Lu.params.allowSlideNext,allowSlidePrev:Lu.params.allowSlidePrev,touchEvents:function(){const Nu=["touchstart","touchmove","touchend","touchcancel"],Vu=["pointerdown","pointermove","pointerup"];return Lu.touchEventsTouch={start:Nu[0],move:Nu[1],end:Nu[2],cancel:Nu[3]},Lu.touchEventsDesktop={start:Vu[0],move:Vu[1],end:Vu[2]},Lu.support.touch||!Lu.params.simulateTouch?Lu.touchEventsTouch:Lu.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:Lu.params.focusableElements,lastClickTime:ni(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:Lu.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),Lu.emit("_swiper"),Lu.params.init&&Lu.init(),Lu}enable(){const $u=this;$u.enabled||($u.enabled=!0,$u.params.grabCursor&&$u.setGrabCursor(),$u.emit("enable"))}disable(){const $u=this;!$u.enabled||($u.enabled=!1,$u.params.grabCursor&&$u.unsetGrabCursor(),$u.emit("disable"))}setProgress($u,Bu){const Ru=this;$u=Math.min(Math.max($u,0),1);const Lu=Ru.minTranslate(),Ou=(Ru.maxTranslate()-Lu)*$u+Lu;Ru.translateTo(Ou,typeof Bu>"u"?0:Bu),Ru.updateActiveIndex(),Ru.updateSlidesClasses()}emitContainerClasses(){const $u=this;if(!$u.params._emitClasses||!$u.el)return;const Bu=$u.el.className.split(" ").filter(Ru=>Ru.indexOf("swiper")===0||Ru.indexOf($u.params.containerModifierClass)===0);$u.emit("_containerClasses",Bu.join(" "))}getSlideClasses($u){const Bu=this;return Bu.destroyed?"":$u.className.split(" ").filter(Ru=>Ru.indexOf("swiper-slide")===0||Ru.indexOf(Bu.params.slideClass)===0).join(" ")}emitSlidesClasses(){const $u=this;if(!$u.params._emitClasses||!$u.el)return;const Bu=[];$u.slides.each(Ru=>{const Lu=$u.getSlideClasses(Ru);Bu.push({slideEl:Ru,classNames:Lu}),$u.emit("_slideClass",Ru,Lu)}),$u.emit("_slideClasses",Bu)}slidesPerViewDynamic($u="current",Bu=!1){const Ru=this,{params:Lu,slides:Ou,slidesGrid:Fu,slidesSizesGrid:Nu,size:Vu,activeIndex:Uu}=Ru;let Gu=1;if(Lu.centeredSlides){let zu=Ou[Uu].swiperSlideSize,Hu;for(let ju=Uu+1;ju<Ou.length;ju+=1)Ou[ju]&&!Hu&&(zu+=Ou[ju].swiperSlideSize,Gu+=1,zu>Vu&&(Hu=!0));for(let ju=Uu-1;ju>=0;ju-=1)Ou[ju]&&!Hu&&(zu+=Ou[ju].swiperSlideSize,Gu+=1,zu>Vu&&(Hu=!0))}else if($u==="current")for(let zu=Uu+1;zu<Ou.length;zu+=1)(Bu?Fu[zu]+Nu[zu]-Fu[Uu]<Vu:Fu[zu]-Fu[Uu]<Vu)&&(Gu+=1);else for(let zu=Uu-1;zu>=0;zu-=1)Fu[Uu]-Fu[zu]<Vu&&(Gu+=1);return Gu}update(){const $u=this;if(!$u||$u.destroyed)return;const{snapGrid:Bu,params:Ru}=$u;Ru.breakpoints&&$u.setBreakpoint(),$u.updateSize(),$u.updateSlides(),$u.updateProgress(),$u.updateSlidesClasses();function Lu(){const Fu=$u.rtlTranslate?$u.translate*-1:$u.translate,Nu=Math.min(Math.max(Fu,$u.maxTranslate()),$u.minTranslate());$u.setTranslate(Nu),$u.updateActiveIndex(),$u.updateSlidesClasses()}let Ou;$u.params.freeMode&&$u.params.freeMode.enabled?(Lu(),$u.params.autoHeight&&$u.updateAutoHeight()):(($u.params.slidesPerView==="auto"||$u.params.slidesPerView>1)&&$u.isEnd&&!$u.params.centeredSlides?Ou=$u.slideTo($u.slides.length-1,0,!1,!0):Ou=$u.slideTo($u.activeIndex,0,!1,!0),Ou||Lu()),Ru.watchOverflow&&Bu!==$u.snapGrid&&$u.checkOverflow(),$u.emit("update")}changeDirection($u,Bu=!0){const Ru=this,Lu=Ru.params.direction;return $u||($u=Lu==="horizontal"?"vertical":"horizontal"),$u===Lu||$u!=="horizontal"&&$u!=="vertical"||(Ru.$el.removeClass(`${Ru.params.containerModifierClass}${Lu}`).addClass(`${Ru.params.containerModifierClass}${$u}`),Ru.emitContainerClasses(),Ru.params.direction=$u,Ru.slides.each(Ou=>{$u==="vertical"?Ou.style.width="":Ou.style.height=""}),Ru.emit("changeDirection"),Bu&&Ru.update()),Ru}changeLanguageDirection($u){const Bu=this;Bu.rtl&&$u==="rtl"||!Bu.rtl&&$u==="ltr"||(Bu.rtl=$u==="rtl",Bu.rtlTranslate=Bu.params.direction==="horizontal"&&Bu.rtl,Bu.rtl?(Bu.$el.addClass(`${Bu.params.containerModifierClass}rtl`),Bu.el.dir="rtl"):(Bu.$el.removeClass(`${Bu.params.containerModifierClass}rtl`),Bu.el.dir="ltr"),Bu.update())}mount($u){const Bu=this;if(Bu.mounted)return!0;const Ru=ae($u||Bu.params.el);if($u=Ru[0],!$u)return!1;$u.swiper=Bu;const Lu=()=>`.${(Bu.params.wrapperClass||"").trim().split(" ").join(".")}`;let Ou=(()=>{if($u&&$u.shadowRoot&&$u.shadowRoot.querySelector){const Fu=ae($u.shadowRoot.querySelector(Lu()));return Fu.children=Nu=>Ru.children(Nu),Fu}return Ru.children?Ru.children(Lu()):ae(Ru).children(Lu())})();if(Ou.length===0&&Bu.params.createElements){const Fu=Je().createElement("div");Ou=ae(Fu),Fu.className=Bu.params.wrapperClass,Ru.append(Fu),Ru.children(`.${Bu.params.slideClass}`).each(Nu=>{Ou.append(Nu)})}return Object.assign(Bu,{$el:Ru,el:$u,$wrapperEl:Ou,wrapperEl:Ou[0],mounted:!0,rtl:$u.dir.toLowerCase()==="rtl"||Ru.css("direction")==="rtl",rtlTranslate:Bu.params.direction==="horizontal"&&($u.dir.toLowerCase()==="rtl"||Ru.css("direction")==="rtl"),wrongRTL:Ou.css("display")==="-webkit-box"}),!0}init($u){const Bu=this;return Bu.initialized||Bu.mount($u)===!1||(Bu.emit("beforeInit"),Bu.params.breakpoints&&Bu.setBreakpoint(),Bu.addClasses(),Bu.params.loop&&Bu.loopCreate(),Bu.updateSize(),Bu.updateSlides(),Bu.params.watchOverflow&&Bu.checkOverflow(),Bu.params.grabCursor&&Bu.enabled&&Bu.setGrabCursor(),Bu.params.preloadImages&&Bu.preloadImages(),Bu.params.loop?Bu.slideTo(Bu.params.initialSlide+Bu.loopedSlides,0,Bu.params.runCallbacksOnInit,!1,!0):Bu.slideTo(Bu.params.initialSlide,0,Bu.params.runCallbacksOnInit,!1,!0),Bu.attachEvents(),Bu.initialized=!0,Bu.emit("init"),Bu.emit("afterInit")),Bu}destroy($u=!0,Bu=!0){const Ru=this,{params:Lu,$el:Ou,$wrapperEl:Fu,slides:Nu}=Ru;return typeof Ru.params>"u"||Ru.destroyed||(Ru.emit("beforeDestroy"),Ru.initialized=!1,Ru.detachEvents(),Lu.loop&&Ru.loopDestroy(),Bu&&(Ru.removeClasses(),Ou.removeAttr("style"),Fu.removeAttr("style"),Nu&&Nu.length&&Nu.removeClass([Lu.slideVisibleClass,Lu.slideActiveClass,Lu.slideNextClass,Lu.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),Ru.emit("destroy"),Object.keys(Ru.eventsListeners).forEach(Vu=>{Ru.off(Vu)}),$u!==!1&&(Ru.$el[0].swiper=null,a1(Ru)),Ru.destroyed=!0),null}static extendDefaults($u){rt(Xs,$u)}static get extendedDefaults(){return Xs}static get defaults(){return sl}static installModule($u){nt.prototype.__modules__||(nt.prototype.__modules__=[]);const Bu=nt.prototype.__modules__;typeof $u=="function"&&Bu.indexOf($u)<0&&Bu.push($u)}static use($u){return Array.isArray($u)?($u.forEach(Bu=>nt.installModule(Bu)),nt):(nt.installModule($u),nt)}}Object.keys(Ws).forEach(_u=>{Object.keys(Ws[_u]).forEach($u=>{nt.prototype[$u]=Ws[_u][$u]})});nt.use([g1,v1]);function Pb({swiper:_u,extendParams:$u,on:Bu,emit:Ru}){let Lu;_u.autoplay={running:!1,paused:!1},$u({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function Ou(){if(!_u.size){_u.autoplay.running=!1,_u.autoplay.paused=!1;return}const Xu=_u.slides.eq(_u.activeIndex);let Ku=_u.params.autoplay.delay;Xu.attr("data-swiper-autoplay")&&(Ku=Xu.attr("data-swiper-autoplay")||_u.params.autoplay.delay),clearTimeout(Lu),Lu=is(()=>{let Wu;_u.params.autoplay.reverseDirection?_u.params.loop?(_u.loopFix(),Wu=_u.slidePrev(_u.params.speed,!0,!0),Ru("autoplay")):_u.isBeginning?_u.params.autoplay.stopOnLastSlide?Nu():(Wu=_u.slideTo(_u.slides.length-1,_u.params.speed,!0,!0),Ru("autoplay")):(Wu=_u.slidePrev(_u.params.speed,!0,!0),Ru("autoplay")):_u.params.loop?(_u.loopFix(),Wu=_u.slideNext(_u.params.speed,!0,!0),Ru("autoplay")):_u.isEnd?_u.params.autoplay.stopOnLastSlide?Nu():(Wu=_u.slideTo(0,_u.params.speed,!0,!0),Ru("autoplay")):(Wu=_u.slideNext(_u.params.speed,!0,!0),Ru("autoplay")),(_u.params.cssMode&&_u.autoplay.running||Wu===!1)&&Ou()},Ku)}function Fu(){return typeof Lu<"u"||_u.autoplay.running?!1:(_u.autoplay.running=!0,Ru("autoplayStart"),Ou(),!0)}function Nu(){return!_u.autoplay.running||typeof Lu>"u"?!1:(Lu&&(clearTimeout(Lu),Lu=void 0),_u.autoplay.running=!1,Ru("autoplayStop"),!0)}function Vu(Xu){!_u.autoplay.running||_u.autoplay.paused||(Lu&&clearTimeout(Lu),_u.autoplay.paused=!0,Xu===0||!_u.params.autoplay.waitForTransition?(_u.autoplay.paused=!1,Ou()):["transitionend","webkitTransitionEnd"].forEach(Ku=>{_u.$wrapperEl[0].addEventListener(Ku,Gu)}))}function Uu(){const Xu=Je();Xu.visibilityState==="hidden"&&_u.autoplay.running&&Vu(),Xu.visibilityState==="visible"&&_u.autoplay.paused&&(Ou(),_u.autoplay.paused=!1)}function Gu(Xu){!_u||_u.destroyed||!_u.$wrapperEl||Xu.target===_u.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(Ku=>{_u.$wrapperEl[0].removeEventListener(Ku,Gu)}),_u.autoplay.paused=!1,_u.autoplay.running?Ou():Nu())}function zu(){_u.params.autoplay.disableOnInteraction?Nu():(Ru("autoplayPause"),Vu()),["transitionend","webkitTransitionEnd"].forEach(Xu=>{_u.$wrapperEl[0].removeEventListener(Xu,Gu)})}function Hu(){_u.params.autoplay.disableOnInteraction||(_u.autoplay.paused=!1,Ru("autoplayResume"),Ou())}function ju(){_u.params.autoplay.pauseOnMouseEnter&&(_u.$el.on("mouseenter",zu),_u.$el.on("mouseleave",Hu))}function Qu(){_u.$el.off("mouseenter",zu),_u.$el.off("mouseleave",Hu)}Bu("init",()=>{_u.params.autoplay.enabled&&(Fu(),Je().addEventListener("visibilitychange",Uu),ju())}),Bu("beforeTransitionStart",(Xu,Ku,Wu)=>{_u.autoplay.running&&(Wu||!_u.params.autoplay.disableOnInteraction?_u.autoplay.pause(Ku):Nu())}),Bu("sliderFirstMove",()=>{_u.autoplay.running&&(_u.params.autoplay.disableOnInteraction?Nu():Vu())}),Bu("touchEnd",()=>{_u.params.cssMode&&_u.autoplay.paused&&!_u.params.autoplay.disableOnInteraction&&Ou()}),Bu("destroy",()=>{Qu(),_u.autoplay.running&&Nu(),Je().removeEventListener("visibilitychange",Uu)}),Object.assign(_u.autoplay,{pause:Vu,run:Ou,start:Fu,stop:Nu})}function mn(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function Zt(_u,$u){const Bu=["__proto__","constructor","prototype"];Object.keys($u).filter(Ru=>Bu.indexOf(Ru)<0).forEach(Ru=>{typeof _u[Ru]>"u"?_u[Ru]=$u[Ru]:mn($u[Ru])&&mn(_u[Ru])&&Object.keys($u[Ru]).length>0?$u[Ru].__swiper__?_u[Ru]=$u[Ru]:Zt(_u[Ru],$u[Ru]):_u[Ru]=$u[Ru]})}function ho(_u={}){return _u.navigation&&typeof _u.navigation.nextEl>"u"&&typeof _u.navigation.prevEl>"u"}function po(_u={}){return _u.pagination&&typeof _u.pagination.el>"u"}function mo(_u={}){return _u.scrollbar&&typeof _u.scrollbar.el>"u"}function ss(_u=""){const $u=_u.split(" ").map(Ru=>Ru.trim()).filter(Ru=>!!Ru),Bu=[];return $u.forEach(Ru=>{Bu.indexOf(Ru)<0&&Bu.push(Ru)}),Bu.join(" ")}const xu=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function Cb(_u={},$u=!0){const Bu={on:{}},Ru={},Lu={};Zt(Bu,nt.defaults),Zt(Bu,nt.extendedDefaults),Bu._emitClasses=!0,Bu.init=!1;const Ou={},Fu=xu.map(Vu=>Vu.replace(/_/,"")),Nu=Object.assign({},_u);return Object.keys(Nu).forEach(Vu=>{typeof _u[Vu]>"u"||(Fu.indexOf(Vu)>=0?mn(_u[Vu])?(Bu[Vu]={},Lu[Vu]={},Zt(Bu[Vu],_u[Vu]),Zt(Lu[Vu],_u[Vu])):(Bu[Vu]=_u[Vu],Lu[Vu]=_u[Vu]):Vu.search(/on[A-Z]/)===0&&typeof _u[Vu]=="function"?$u?Ru[`${Vu[2].toLowerCase()}${Vu.substr(3)}`]=_u[Vu]:Bu.on[`${Vu[2].toLowerCase()}${Vu.substr(3)}`]=_u[Vu]:Ou[Vu]=_u[Vu])}),["navigation","pagination","scrollbar"].forEach(Vu=>{Bu[Vu]===!0&&(Bu[Vu]={}),Bu[Vu]===!1&&delete Bu[Vu]}),{params:Bu,passedParams:Lu,rest:Ou,events:Ru}}function Ib({el:_u,nextEl:$u,prevEl:Bu,paginationEl:Ru,scrollbarEl:Lu,swiper:Ou},Fu){ho(Fu)&&$u&&Bu&&(Ou.params.navigation.nextEl=$u,Ou.originalParams.navigation.nextEl=$u,Ou.params.navigation.prevEl=Bu,Ou.originalParams.navigation.prevEl=Bu),po(Fu)&&Ru&&(Ou.params.pagination.el=Ru,Ou.originalParams.pagination.el=Ru),mo(Fu)&&Lu&&(Ou.params.scrollbar.el=Lu,Ou.originalParams.scrollbar.el=Lu),Ou.init(_u)}function xb(_u,$u,Bu,Ru,Lu){const Ou=[];if(!$u)return Ou;const Fu=Nu=>{Ou.indexOf(Nu)<0&&Ou.push(Nu)};if(Bu&&Ru){const Nu=Ru.map(Lu),Vu=Bu.map(Lu);Nu.join("")!==Vu.join("")&&Fu("children"),Ru.length!==Bu.length&&Fu("children")}return xu.filter(Nu=>Nu[0]==="_").map(Nu=>Nu.replace(/_/,"")).forEach(Nu=>{if(Nu in _u&&Nu in $u)if(mn(_u[Nu])&&mn($u[Nu])){const Vu=Object.keys(_u[Nu]),Uu=Object.keys($u[Nu]);Vu.length!==Uu.length?Fu(Nu):(Vu.forEach(Gu=>{_u[Nu][Gu]!==$u[Nu][Gu]&&Fu(Nu)}),Uu.forEach(Gu=>{_u[Nu][Gu]!==$u[Nu][Gu]&&Fu(Nu)}))}else _u[Nu]!==$u[Nu]&&Fu(Nu)}),Ou}function Tb({swiper:_u,slides:$u,passedParams:Bu,changedParams:Ru,nextEl:Lu,prevEl:Ou,scrollbarEl:Fu,paginationEl:Nu}){const Vu=Ru.filter(_h=>_h!=="children"&&_h!=="direction"),{params:Uu,pagination:Gu,navigation:zu,scrollbar:Hu,virtual:ju,thumbs:Qu}=_u;let Xu,Ku,Wu,qu,Yu;Ru.includes("thumbs")&&Bu.thumbs&&Bu.thumbs.swiper&&Uu.thumbs&&!Uu.thumbs.swiper&&(Xu=!0),Ru.includes("controller")&&Bu.controller&&Bu.controller.control&&Uu.controller&&!Uu.controller.control&&(Ku=!0),Ru.includes("pagination")&&Bu.pagination&&(Bu.pagination.el||Nu)&&(Uu.pagination||Uu.pagination===!1)&&Gu&&!Gu.el&&(Wu=!0),Ru.includes("scrollbar")&&Bu.scrollbar&&(Bu.scrollbar.el||Fu)&&(Uu.scrollbar||Uu.scrollbar===!1)&&Hu&&!Hu.el&&(qu=!0),Ru.includes("navigation")&&Bu.navigation&&(Bu.navigation.prevEl||Ou)&&(Bu.navigation.nextEl||Lu)&&(Uu.navigation||Uu.navigation===!1)&&zu&&!zu.prevEl&&!zu.nextEl&&(Yu=!0);const Zu=_h=>{!_u[_h]||(_u[_h].destroy(),_h==="navigation"?(Uu[_h].prevEl=void 0,Uu[_h].nextEl=void 0,_u[_h].prevEl=void 0,_u[_h].nextEl=void 0):(Uu[_h].el=void 0,_u[_h].el=void 0))};Vu.forEach(_h=>{if(mn(Uu[_h])&&mn(Bu[_h]))Zt(Uu[_h],Bu[_h]);else{const ep=Bu[_h];(ep===!0||ep===!1)&&(_h==="navigation"||_h==="pagination"||_h==="scrollbar")?ep===!1&&Zu(_h):Uu[_h]=Bu[_h]}}),Vu.includes("controller")&&!Ku&&_u.controller&&_u.controller.control&&Uu.controller&&Uu.controller.control&&(_u.controller.control=Uu.controller.control),Ru.includes("children")&&$u&&ju&&Uu.virtual.enabled?(ju.slides=$u,ju.update(!0)):Ru.includes("children")&&_u.lazy&&_u.params.lazy.enabled&&_u.lazy.load(),Xu&&Qu.init()&&Qu.update(!0),Ku&&(_u.controller.control=Uu.controller.control),Wu&&(Nu&&(Uu.pagination.el=Nu),Gu.init(),Gu.render(),Gu.update()),qu&&(Fu&&(Uu.scrollbar.el=Fu),Hu.init(),Hu.updateSize(),Hu.setTranslate()),Yu&&(Lu&&(Uu.navigation.nextEl=Lu),Ou&&(Uu.navigation.prevEl=Ou),zu.init(),zu.update()),Ru.includes("allowSlideNext")&&(_u.allowSlideNext=Bu.allowSlideNext),Ru.includes("allowSlidePrev")&&(_u.allowSlidePrev=Bu.allowSlidePrev),Ru.includes("direction")&&_u.changeDirection(Bu.direction,!1),_u.update()}const Sb=_u=>({virtualData:_u&512}),ol=_u=>({virtualData:_u[9]}),kb=_u=>({virtualData:_u&512}),rl=_u=>({virtualData:_u[9]}),Db=_u=>({virtualData:_u&512}),al=_u=>({virtualData:_u[9]}),Lb=_u=>({virtualData:_u&512}),ll=_u=>({virtualData:_u[9]}),Mb=_u=>({virtualData:_u&512}),cl=_u=>({virtualData:_u[9]});function ul(_u){let $u,Bu,Ru;return{c(){$u=Q("div"),Bu=q(),Ru=Q("div"),C($u,"class","swiper-button-prev"),C(Ru,"class","swiper-button-next")},m(Lu,Ou){N(Lu,$u,Ou),_u[13]($u),N(Lu,Bu,Ou),N(Lu,Ru,Ou),_u[14](Ru)},p:ce,d(Lu){Lu&&H($u),_u[13](null),Lu&&H(Bu),Lu&&H(Ru),_u[14](null)}}}function dl(_u){let $u;return{c(){$u=Q("div"),C($u,"class","swiper-scrollbar")},m(Bu,Ru){N(Bu,$u,Ru),_u[15]($u)},p:ce,d(Bu){Bu&&H($u),_u[15](null)}}}function fl(_u){let $u;return{c(){$u=Q("div"),C($u,"class","swiper-pagination")},m(Bu,Ru){N(Bu,$u,Ru),_u[16]($u)},p:ce,d(Bu){Bu&&H($u),_u[16](null)}}}function zb(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu=ho(_u[2]),Vu,Uu=mo(_u[2]),Gu,zu=po(_u[2]),Hu,ju,Qu;const Xu=_u[12]["container-start"],Ku=ln(Xu,_u,_u[11],cl),Wu=_u[12]["wrapper-start"],qu=ln(Wu,_u,_u[11],ll),Yu=_u[12].default,Zu=ln(Yu,_u,_u[11],al),_h=_u[12]["wrapper-end"],ep=ln(_h,_u,_u[11],rl);let ip=Nu&&ul(_u),ap=Uu&&dl(_u),sp=zu&&fl(_u);const Ju=_u[12]["container-end"],_f=ln(Ju,_u,_u[11],ol);let np=[{class:ju=ss(`${_u[1]}${_u[0]?` ${_u[0]}`:""}`)},_u[3]],tp={};for(let rp=0;rp<np.length;rp+=1)tp=ze(tp,np[rp]);return{c(){$u=Q("div"),Ku&&Ku.c(),Bu=q(),Ru=Q("div"),qu&&qu.c(),Lu=q(),Zu&&Zu.c(),Ou=q(),ep&&ep.c(),Fu=q(),ip&&ip.c(),Vu=q(),ap&&ap.c(),Gu=q(),sp&&sp.c(),Hu=q(),_f&&_f.c(),C(Ru,"class","swiper-wrapper"),Wi($u,tp)},m(rp,op){N(rp,$u,op),Ku&&Ku.m($u,null),_($u,Bu),_($u,Ru),qu&&qu.m(Ru,null),_(Ru,Lu),Zu&&Zu.m(Ru,null),_(Ru,Ou),ep&&ep.m(Ru,null),_($u,Fu),ip&&ip.m($u,null),_($u,Vu),ap&&ap.m($u,null),_($u,Gu),sp&&sp.m($u,null),_($u,Hu),_f&&_f.m($u,null),_u[17]($u),Qu=!0},p(rp,[op]){Ku&&Ku.p&&(!Qu||op&2560)&&un(Ku,Xu,rp,rp[11],Qu?cn(Xu,rp[11],op,Mb):dn(rp[11]),cl),qu&&qu.p&&(!Qu||op&2560)&&un(qu,Wu,rp,rp[11],Qu?cn(Wu,rp[11],op,Lb):dn(rp[11]),ll),Zu&&Zu.p&&(!Qu||op&2560)&&un(Zu,Yu,rp,rp[11],Qu?cn(Yu,rp[11],op,Db):dn(rp[11]),al),ep&&ep.p&&(!Qu||op&2560)&&un(ep,_h,rp,rp[11],Qu?cn(_h,rp[11],op,kb):dn(rp[11]),rl),op&4&&(Nu=ho(rp[2])),Nu?ip?ip.p(rp,op):(ip=ul(rp),ip.c(),ip.m($u,Vu)):ip&&(ip.d(1),ip=null),op&4&&(Uu=mo(rp[2])),Uu?ap?ap.p(rp,op):(ap=dl(rp),ap.c(),ap.m($u,Gu)):ap&&(ap.d(1),ap=null),op&4&&(zu=po(rp[2])),zu?sp?sp.p(rp,op):(sp=fl(rp),sp.c(),sp.m($u,Hu)):sp&&(sp.d(1),sp=null),_f&&_f.p&&(!Qu||op&2560)&&un(_f,Ju,rp,rp[11],Qu?cn(Ju,rp[11],op,Sb):dn(rp[11]),ol),Wi($u,tp=Ye(np,[(!Qu||op&3&&ju!==(ju=ss(`${rp[1]}${rp[0]?` ${rp[0]}`:""}`)))&&{class:ju},op&8&&rp[3]]))},i(rp){Qu||(M(Ku,rp),M(qu,rp),M(Zu,rp),M(ep,rp),M(_f,rp),Qu=!0)},o(rp){F(Ku,rp),F(qu,rp),F(Zu,rp),F(ep,rp),F(_f,rp),Qu=!1},d(rp){rp&&H($u),Ku&&Ku.d(rp),qu&&qu.d(rp),Zu&&Zu.d(rp),ep&&ep.d(rp),ip&&ip.d(),ap&&ap.d(),sp&&sp.d(),_f&&_f.d(rp),_u[17](null)}}}function Ob(_u,$u,Bu){const Ru=["class","swiper"];let Lu=_i($u,Ru),{$$slots:Ou={},$$scope:Fu}=$u;const Nu=Xd();let{class:Vu=void 0}=$u,Uu="swiper",Gu=!1,zu=null,Hu=null,ju,Qu,Xu,Ku,Wu=null,qu=null,Yu=null,Zu=null,_h=null,ep={slides:[]};function ip(){return zu}const ap=lp=>{Bu(9,ep=lp),Ud().then(()=>{zu.$wrapperEl.children(".swiper-slide").each(up=>{up.onSwiper&&up.onSwiper(zu)}),zu.updateSlides(),zu.updateProgress(),zu.updateSlidesClasses(),zu.lazy&&zu.params.lazy.enabled&&zu.lazy.load()})},sp=()=>{ju=Cb(Lu),Bu(2,Qu=ju.params),Xu=ju.passedParams,Bu(3,Ku=ju.rest)};sp(),Hu=Xu;const Ju=()=>{Gu=!0};if(Qu.onAny=(lp,...up)=>{Nu(lp,up)},Object.assign(Qu.on,{_beforeBreakpoint:Ju,_containerClasses(lp,up){Bu(1,Uu=up)}}),zu=new nt(Qu),$s("swiper",zu),zu.virtual&&zu.params.virtual.enabled){const lp={cache:!1,renderExternal:up=>{ap(up),Qu.virtual&&Qu.virtual.renderExternal&&Qu.virtual.renderExternal(up)},renderExternalUpdate:!1};Zt(zu.params.virtual,lp),Zt(zu.originalParams.virtual,lp)}mt(()=>{!Wu||(Ib({el:Wu,nextEl:Yu,prevEl:qu,paginationEl:_h,scrollbarEl:Zu,swiper:zu},Qu),Nu("swiper",[zu]),!Qu.virtual&&zu.slides.each(lp=>{lp.onSwiper&&lp.onSwiper(zu)}))}),Io(()=>{if(!zu)return;sp();const lp=xb(Xu,Hu);(lp.length||Gu)&&zu&&!zu.destroyed&&Tb({swiper:zu,passedParams:Xu,changedParams:lp,nextEl:Yu,prevEl:qu,scrollbarEl:Zu,paginationEl:_h}),Gu=!1,Hu=Xu}),tn(()=>{typeof window<"u"&&zu&&!zu.destroyed&&zu.destroy(!0,!1)});function _f(lp){We[lp?"unshift":"push"](()=>{qu=lp,Bu(5,qu)})}function np(lp){We[lp?"unshift":"push"](()=>{Yu=lp,Bu(6,Yu)})}function tp(lp){We[lp?"unshift":"push"](()=>{Zu=lp,Bu(7,Zu)})}function rp(lp){We[lp?"unshift":"push"](()=>{_h=lp,Bu(8,_h)})}function op(lp){We[lp?"unshift":"push"](()=>{Wu=lp,Bu(4,Wu)})}return _u.$$set=lp=>{$u=ze(ze({},$u),lc(lp)),Bu(27,Lu=_i($u,Ru)),"class"in lp&&Bu(0,Vu=lp.class),"$$scope"in lp&&Bu(11,Fu=lp.$$scope)},[Vu,Uu,Qu,Ku,Wu,qu,Yu,Zu,_h,ep,ip,Fu,Ou,_f,np,tp,rp,op]}class jb extends fe{constructor($u){super(),de(this,$u,Ob,zb,ue,{class:0,swiper:10})}get swiper(){return this.$$.ctx[10]}}const Bb=_u=>({data:_u&32}),hl=_u=>({data:_u[5]}),Rb=_u=>({data:_u&32}),pl=_u=>({data:_u[5]});function Hb(_u){let $u;const Bu=_u[8].default,Ru=ln(Bu,_u,_u[7],hl);return{c(){Ru&&Ru.c()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),$u=!0},p(Lu,Ou){Ru&&Ru.p&&(!$u||Ou&160)&&un(Ru,Bu,Lu,Lu[7],$u?cn(Bu,Lu[7],Ou,Bb):dn(Lu[7]),hl)},i(Lu){$u||(M(Ru,Lu),$u=!0)},o(Lu){F(Ru,Lu),$u=!1},d(Lu){Ru&&Ru.d(Lu)}}}function Fb(_u){let $u,Bu,Ru;const Lu=_u[8].default,Ou=ln(Lu,_u,_u[7],pl);return{c(){$u=Q("div"),Ou&&Ou.c(),C($u,"class","swiper-zoom-container"),C($u,"data-swiper-zoom",Bu=typeof _u[0]=="number"?_u[0]:void 0)},m(Fu,Nu){N(Fu,$u,Nu),Ou&&Ou.m($u,null),Ru=!0},p(Fu,Nu){Ou&&Ou.p&&(!Ru||Nu&160)&&un(Ou,Lu,Fu,Fu[7],Ru?cn(Lu,Fu[7],Nu,Rb):dn(Fu[7]),pl),(!Ru||Nu&1&&Bu!==(Bu=typeof Fu[0]=="number"?Fu[0]:void 0))&&C($u,"data-swiper-zoom",Bu)},i(Fu){Ru||(M(Ou,Fu),Ru=!0)},o(Fu){F(Ou,Fu),Ru=!1},d(Fu){Fu&&H($u),Ou&&Ou.d(Fu)}}}function Nb(_u){let $u,Bu,Ru,Lu,Ou;const Fu=[Fb,Hb],Nu=[];function Vu(zu,Hu){return zu[0]?0:1}Bu=Vu(_u),Ru=Nu[Bu]=Fu[Bu](_u);let Uu=[{class:Lu=ss(`${_u[3]}${_u[2]?` ${_u[2]}`:""}`)},{"data-swiper-slide-index":_u[1]},_u[6]],Gu={};for(let zu=0;zu<Uu.length;zu+=1)Gu=ze(Gu,Uu[zu]);return{c(){$u=Q("div"),Ru.c(),Wi($u,Gu)},m(zu,Hu){N(zu,$u,Hu),Nu[Bu].m($u,null),_u[9]($u),Ou=!0},p(zu,[Hu]){let ju=Bu;Bu=Vu(zu),Bu===ju?Nu[Bu].p(zu,Hu):(ve(),F(Nu[ju],1,1,()=>{Nu[ju]=null}),be(),Ru=Nu[Bu],Ru?Ru.p(zu,Hu):(Ru=Nu[Bu]=Fu[Bu](zu),Ru.c()),M(Ru,1),Ru.m($u,null)),Wi($u,Gu=Ye(Uu,[(!Ou||Hu&12&&Lu!==(Lu=ss(`${zu[3]}${zu[2]?` ${zu[2]}`:""}`)))&&{class:Lu},(!Ou||Hu&2)&&{"data-swiper-slide-index":zu[1]},Hu&64&&zu[6]]))},i(zu){Ou||(M(Ru),Ou=!0)},o(zu){F(Ru),Ou=!1},d(zu){zu&&H($u),Nu[Bu].d(),_u[9](null)}}}function Gb(_u,$u,Bu){let Ru;const Lu=["zoom","virtualIndex","class"];let Ou=_i($u,Lu),{$$slots:Fu={},$$scope:Nu}=$u,{zoom:Vu=void 0}=$u,{virtualIndex:Uu=void 0}=$u,{class:Gu=void 0}=$u,zu=null,Hu="swiper-slide",ju=ei("swiper"),Qu=!1;const Xu=(Yu,Zu,_h)=>{Zu===zu&&Bu(3,Hu=_h)},Ku=()=>{!ju||Qu||(ju.on("_slideClass",Xu),Qu=!0)},Wu=()=>{!ju||(ju.off("_slideClass",Xu),Qu=!1)};mt(()=>{typeof Uu>"u"||(Bu(4,zu.onSwiper=Yu=>{ju=Yu,Ku()},zu),Ku())}),Io(()=>{if(!(!zu||!ju)){if(ju.destroyed){Hu!=="swiper-slide"&&Bu(3,Hu="swiper-slide");return}Ku()}}),Co(()=>{Ku()}),tn(()=>{!ju||Wu()});function qu(Yu){We[Yu?"unshift":"push"](()=>{zu=Yu,Bu(4,zu)})}return _u.$$set=Yu=>{$u=ze(ze({},$u),lc(Yu)),Bu(6,Ou=_i($u,Lu)),"zoom"in Yu&&Bu(0,Vu=Yu.zoom),"virtualIndex"in Yu&&Bu(1,Uu=Yu.virtualIndex),"class"in Yu&&Bu(2,Gu=Yu.class),"$$scope"in Yu&&Bu(7,Nu=Yu.$$scope)},_u.$$.update=()=>{_u.$$.dirty&8&&Bu(5,Ru={isActive:Hu.indexOf("swiper-slide-active")>=0||Hu.indexOf("swiper-slide-duplicate-active")>=0,isVisible:Hu.indexOf("swiper-slide-visible")>=0,isDuplicate:Hu.indexOf("swiper-slide-duplicate")>=0,isPrev:Hu.indexOf("swiper-slide-prev")>=0||Hu.indexOf("swiper-slide-duplicate-prev")>=0,isNext:Hu.indexOf("swiper-slide-next")>=0||Hu.indexOf("swiper-slide-duplicate-next")>=0})},[Vu,Uu,Gu,Hu,zu,Ru,Ou,Nu,Fu,qu]}class Qb extends fe{constructor($u){super(),de(this,$u,Gb,Nb,ue,{zoom:0,virtualIndex:1,class:2})}}function _b(_u){me(_u,"svelte-cwtvzu",".media-item.svelte-cwtvzu.svelte-cwtvzu{height:100%}.media-content.svelte-cwtvzu.svelte-cwtvzu{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.video-icon.svelte-cwtvzu.svelte-cwtvzu{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-cwtvzu.svelte-cwtvzu{display:none;pointer-events:auto;position:absolute;width:100%;height:100%;top:0;left:0}.video-play-button-container.showPlayButton.svelte-cwtvzu.svelte-cwtvzu{display:block}.video-icon.large.svelte-cwtvzu.svelte-cwtvzu{width:12.5rem;height:6.25rem}.video-icon.small.svelte-cwtvzu.svelte-cwtvzu{width:1.75rem;height:1.75rem}.video-icon.svelte-cwtvzu .video-icon-img.svelte-cwtvzu{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-cwtvzu .video-icon-img.canPlay.svelte-cwtvzu{cursor:pointer}")}function ml(_u){let $u;function Bu(Ou,Fu){if(Ou[0].type==="Image")return Xb;if(Ou[0].type==="Video")return Wb}let Ru=Bu(_u),Lu=Ru&&Ru(_u);return{c(){$u=Q("div"),Lu&&Lu.c(),C($u,"class","media-item svelte-cwtvzu")},m(Ou,Fu){N(Ou,$u,Fu),Lu&&Lu.m($u,null)},p(Ou,Fu){Ru===(Ru=Bu(Ou))&&Lu?Lu.p(Ou,Fu):(Lu&&Lu.d(1),Lu=Ru&&Ru(Ou),Lu&&(Lu.c(),Lu.m($u,null)))},d(Ou){Ou&&H($u),Lu&&Lu.d()}}}function Wb(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu;return{c(){var Hu;$u=Q("video"),Fu=q(),Nu=Q("div"),Vu=Q("div"),Uu=Q("div"),C($u,"class","media-content svelte-cwtvzu"),C($u,"style",Bu=`object-fit: ${_u[3]};`),kt($u.src,Ru=_u[0].url+"#t=0.1")||C($u,"src",Ru),C($u,"poster",Lu=(Hu=_u[0].videoCoverUrl)!=null?Hu:void 0),C($u,"preload",Ou=_u[0].videoCoverUrl?void 0:"auto"),$u.playsInline=!0,C($u,"paused",""),$u.loop=!1,C($u,"crossorigin",""),$u.controls=!1,ie($u,"showPlayButton",_u[5]),C(Uu,"class","video-icon-img svelte-cwtvzu"),W(Uu,"background-image","url("+(_u[1]==="large"?Xa:Ya)+")"),ie(Uu,"canPlay",_u[2]),C(Vu,"class","video-icon svelte-cwtvzu"),ie(Vu,"large",_u[1]==="large"),ie(Vu,"small",_u[1]==="small"),C(Nu,"class","video-play-button-container svelte-cwtvzu"),ie(Nu,"showPlayButton",_u[5])},m(Hu,ju){N(Hu,$u,ju),_u[7]($u),N(Hu,Fu,ju),N(Hu,Nu,ju),_(Nu,Vu),_(Vu,Uu),Gu||(zu=[Oe($u,"click",_u[6]),Oe(Uu,"click",_u[8])],Gu=!0)},p(Hu,ju){var Qu;ju&8&&Bu!==(Bu=`object-fit: ${Hu[3]};`)&&C($u,"style",Bu),ju&1&&!kt($u.src,Ru=Hu[0].url+"#t=0.1")&&C($u,"src",Ru),ju&1&&Lu!==(Lu=(Qu=Hu[0].videoCoverUrl)!=null?Qu:void 0)&&C($u,"poster",Lu),ju&1&&Ou!==(Ou=Hu[0].videoCoverUrl?void 0:"auto")&&C($u,"preload",Ou),ju&32&&ie($u,"showPlayButton",Hu[5]),ju&2&&W(Uu,"background-image","url("+(Hu[1]==="large"?Xa:Ya)+")"),ju&4&&ie(Uu,"canPlay",Hu[2]),ju&2&&ie(Vu,"large",Hu[1]==="large"),ju&2&&ie(Vu,"small",Hu[1]==="small"),ju&32&&ie(Nu,"showPlayButton",Hu[5])},d(Hu){Hu&&H($u),_u[7](null),Hu&&H(Fu),Hu&&H(Nu),Gu=!1,Nt(zu)}}}function Xb(_u){let $u,Bu,Ru,Lu;return{c(){$u=Q("img"),C($u,"class","media-content svelte-cwtvzu"),C($u,"style",Bu=`object-fit: ${_u[3]};`),kt($u.src,Ru=_u[0].url)||C($u,"src",Ru),C($u,"alt",Lu=_u[0].name)},m(Ou,Fu){N(Ou,$u,Fu)},p(Ou,Fu){Fu&8&&Bu!==(Bu=`object-fit: ${Ou[3]};`)&&C($u,"style",Bu),Fu&1&&!kt($u.src,Ru=Ou[0].url)&&C($u,"src",Ru),Fu&1&&Lu!==(Lu=Ou[0].name)&&C($u,"alt",Lu)},d(Ou){Ou&&H($u)}}}function Yb(_u){let $u,Bu=_u[0]&&ml(_u);return{c(){Bu&&Bu.c(),$u=Ce()},m(Ru,Lu){Bu&&Bu.m(Ru,Lu),N(Ru,$u,Lu)},p(Ru,[Lu]){Ru[0]?Bu?Bu.p(Ru,Lu):(Bu=ml(Ru),Bu.c(),Bu.m($u.parentNode,$u)):Bu&&(Bu.d(1),Bu=null)},i:ce,o:ce,d(Ru){Bu&&Bu.d(Ru),Ru&&H($u)}}}function Ub(_u,$u,Bu){let{media:Ru}=$u,{playButtonIfNeed:Lu="small"}=$u,{canPlay:Ou=!0}=$u,{objectFit:Fu="cover"}=$u,Nu,Vu=!1;const Uu=()=>Nu==null?void 0:Nu.pause();function Gu(Hu){We[Hu?"unshift":"push"](()=>{Nu=Hu,Bu(4,Nu)})}const zu=()=>{!Ou||Nu&&Nu.play()};return _u.$$set=Hu=>{"media"in Hu&&Bu(0,Ru=Hu.media),"playButtonIfNeed"in Hu&&Bu(1,Lu=Hu.playButtonIfNeed),"canPlay"in Hu&&Bu(2,Ou=Hu.canPlay),"objectFit"in Hu&&Bu(3,Fu=Hu.objectFit)},_u.$$.update=()=>{_u.$$.dirty&16&&Nu&&(Bu(5,Vu=Nu.paused),Nu.addEventListener("play",()=>{Bu(5,Vu=!1)}),Nu.addEventListener("pause",()=>{Bu(5,Vu=!0)}))},[Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu]}class Tu extends fe{constructor($u){super(),de(this,$u,Ub,Yb,ue,{media:0,playButtonIfNeed:1,canPlay:2,objectFit:3},_b)}}function Vb(_u){me(_u,"svelte-ai0lv9",".media.svelte-ai0lv9{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}")}function gl(_u,$u,Bu){const Ru=_u.slice();return Ru[23]=$u[Bu],Ru}function vl(_u){let $u,Bu,Ru,Lu,Ou,Fu;const Nu=[Jb,Zb],Vu=[];function Uu(Gu,zu){return Gu[13]?0:1}return Bu=Uu(_u),Ru=Vu[Bu]=Nu[Bu](_u),{c(){$u=Q("div"),Ru.c(),C($u,"class","media svelte-ai0lv9"),ie($u,"unfolded",_u[4])},m(Gu,zu){N(Gu,$u,zu),Vu[Bu].m($u,null),Fu=!0},p(Gu,zu){_u=Gu;let Hu=Bu;Bu=Uu(_u),Bu===Hu?Vu[Bu].p(_u,zu):(ve(),F(Vu[Hu],1,1,()=>{Vu[Hu]=null}),be(),Ru=Vu[Bu],Ru?Ru.p(_u,zu):(Ru=Vu[Bu]=Nu[Bu](_u),Ru.c()),M(Ru,1),Ru.m($u,null)),(!Fu||zu&16)&&ie($u,"unfolded",_u[4])},i(Gu){Fu||(M(Ru),Gu&&Be(()=>{Ou&&Ou.end(1),Lu=bn($u,Pr,_u[5]?{y:4,duration:_u[3],delay:_u[1],easing:Dn}:void 0),Lu.start()}),Fu=!0)},o(Gu){F(Ru),Lu&&Lu.invalidate(),Gu&&(Ou=zn($u,Pr,_u[5]?{y:4,duration:_u[3],delay:_u[2],easing:Dn}:void 0)),Fu=!1},d(Gu){Gu&&H($u),Vu[Bu].d(),Gu&&Ou&&Ou.end()}}}function Zb(_u){let $u,Bu;return $u=new Tu({props:{media:_u[0][0],objectFit:_u[8],playButtonIfNeed:_u[6],canPlay:_u[7]}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&1&&(Ou.media=Ru[0][0]),Lu&256&&(Ou.objectFit=Ru[8]),Lu&64&&(Ou.playButtonIfNeed=Ru[6]),Lu&128&&(Ou.canPlay=Ru[7]),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function Jb(_u){let $u,Bu;return $u=new jb({props:{style:"height: 100%",modules:[Pb],spaceBetween:30,autoplay:_u[14]?Ge({delay:4e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1,loop:!0,$$slots:{default:[Kb]},$$scope:{ctx:_u}}}),$u.$on("init",_u[19]),$u.$on("slideChange",_u[20]),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&16384&&(Ou.autoplay=Ru[14]?Ge({delay:4e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1),Lu&67111360&&(Ou.$$scope={dirty:Lu,ctx:Ru}),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function qb(_u){let $u,Bu,Ru;return $u=new Tu({props:{media:_u[23],objectFit:_u[8],playButtonIfNeed:_u[6],canPlay:_u[7]}}),{c(){re($u.$$.fragment),Bu=q()},m(Lu,Ou){se($u,Lu,Ou),N(Lu,Bu,Ou),Ru=!0},p(Lu,Ou){const Fu={};Ou&2048&&(Fu.media=Lu[23]),Ou&256&&(Fu.objectFit=Lu[8]),Ou&64&&(Fu.playButtonIfNeed=Lu[6]),Ou&128&&(Fu.canPlay=Lu[7]),$u.$set(Fu)},i(Lu){Ru||(M($u.$$.fragment,Lu),Ru=!0)},o(Lu){F($u.$$.fragment,Lu),Ru=!1},d(Lu){oe($u,Lu),Lu&&H(Bu)}}}function bl(_u){let $u,Bu;return $u=new Qb({props:{$$slots:{default:[qb]},$$scope:{ctx:_u}}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&67111360&&(Ou.$$scope={dirty:Lu,ctx:Ru}),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function Kb(_u){let $u,Bu,Ru=_u[11],Lu=[];for(let Fu=0;Fu<Ru.length;Fu+=1)Lu[Fu]=bl(gl(_u,Ru,Fu));const Ou=Fu=>F(Lu[Fu],1,1,()=>{Lu[Fu]=null});return{c(){for(let Fu=0;Fu<Lu.length;Fu+=1)Lu[Fu].c();$u=Ce()},m(Fu,Nu){for(let Vu=0;Vu<Lu.length;Vu+=1)Lu[Vu].m(Fu,Nu);N(Fu,$u,Nu),Bu=!0},p(Fu,Nu){if(Nu&2496){Ru=Fu[11];let Vu;for(Vu=0;Vu<Ru.length;Vu+=1){const Uu=gl(Fu,Ru,Vu);Lu[Vu]?(Lu[Vu].p(Uu,Nu),M(Lu[Vu],1)):(Lu[Vu]=bl(Uu),Lu[Vu].c(),M(Lu[Vu],1),Lu[Vu].m($u.parentNode,$u))}for(ve(),Vu=Ru.length;Vu<Lu.length;Vu+=1)Ou(Vu);be()}},i(Fu){if(!Bu){for(let Nu=0;Nu<Ru.length;Nu+=1)M(Lu[Nu]);Bu=!0}},o(Fu){Lu=Lu.filter(Boolean);for(let Nu=0;Nu<Lu.length;Nu+=1)F(Lu[Nu]);Bu=!1},d(Fu){Dt(Lu,Fu),Fu&&H($u)}}}function $b(_u){let $u,Bu,Ru=_u[4]&&vl(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[4]?Ru?(Ru.p(Lu,Ou),Ou&16&&M(Ru,1)):(Ru=vl(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function eA(_u,$u,Bu){let Ru,Lu,Ou,{tag:Fu}=$u,{mediaData:Nu}=$u,{inDelay:Vu=0}=$u,{outDelay:Uu=0}=$u,{duration:Gu=0}=$u,{unfolded:zu=!0}=$u,{animation:Hu=!0}=$u,{playButtonIfNeed:ju="small"}=$u,{canPlay:Qu=!0}=$u,{objectFit:Xu="cover"}=$u,{enableCarousel:Ku=!0}=$u,{autoplayConfig:Wu={autoplay:!0,autoplayVideo:!1}}=$u;const qu=ei("mediaStore"),Yu=ei("hooks");let Zu;function _h(Ju){!Ru||!Zu||(qu.set({currentMediaUrl:this.src}),Yu.emit("playStateChange",{event:Ju,state:"playing",tag:Fu,mediaInstance:this}),Zu.autoplay.stop())}function ep(Ju){!Ru||!Zu||(Yu.emit("playStateChange",{event:Ju,state:"paused",tag:Fu,mediaInstance:this}),Zu.autoplay.running||Zu.autoplay.start())}let ip=null;const ap=Ju=>{Bu(10,Zu=Ju.detail[0])},sp=async Ju=>{var _f,np,tp;if(!Ou||!Wu.autoplayVideo)return;const rp=Ju.detail[0];if(!rp)return;const op=rp.realIndex;if(op===ip)return;Bu(12,ip=op);const lp=Lu[op];if(!lp||lp.type!=="Video")return;rp.autoplay.stop(),rp.slides.map(cp=>cp.querySelector("video")).filter(ti).forEach(cp=>cp.pause());const up=(_f=rp.slides[rp.activeIndex])==null?void 0:_f.querySelector("video");if(up&&(up.removeEventListener("play",_h),up.removeEventListener("pause",ep),up.addEventListener("play",_h),up.addEventListener("pause",ep)),up){up.addEventListener("click",()=>up.pause());const cp=(tp=(np=up.parentElement)==null?void 0:np.getElementsByClassName("video-play-button-container"))==null?void 0:tp[0];up.addEventListener("play",()=>cp==null?void 0:cp.classList.remove("showPlayButton")),up.addEventListener("pause",()=>cp==null?void 0:cp.classList.add("showPlayButton")),cp&&(up.paused?cp.classList.add("showPlayButton"):cp.classList.remove("showPlayButton"),cp.addEventListener("click",()=>up.play()))}};return _u.$$set=Ju=>{"tag"in Ju&&Bu(17,Fu=Ju.tag),"mediaData"in Ju&&Bu(0,Nu=Ju.mediaData),"inDelay"in Ju&&Bu(1,Vu=Ju.inDelay),"outDelay"in Ju&&Bu(2,Uu=Ju.outDelay),"duration"in Ju&&Bu(3,Gu=Ju.duration),"unfolded"in Ju&&Bu(4,zu=Ju.unfolded),"animation"in Ju&&Bu(5,Hu=Ju.animation),"playButtonIfNeed"in Ju&&Bu(6,ju=Ju.playButtonIfNeed),"canPlay"in Ju&&Bu(7,Qu=Ju.canPlay),"objectFit"in Ju&&Bu(8,Xu=Ju.objectFit),"enableCarousel"in Ju&&Bu(18,Ku=Ju.enableCarousel),"autoplayConfig"in Ju&&Bu(9,Wu=Ju.autoplayConfig)},_u.$$.update=()=>{_u.$$.dirty&262145&&Bu(13,Ru=Ku&&(Nu==null?void 0:Nu.length)>1),_u.$$.dirty&1&&Bu(11,Lu=Nu),_u.$$.dirty&2560&&Bu(14,Ou=Lu.length>1&&Wu.autoplay),_u.$$.dirty&1024&&Zu&&Zu.slides.forEach(Ju=>{const _f=Ju.querySelector("video");_f&&qu.subscribe(({currentMediaUrl:np})=>{np!==_f.src&&_f.pause()})})},[Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Wu,Zu,Lu,ip,Ru,Ou,_h,ep,Fu,Ku,ap,sp]}class Su extends fe{constructor($u){super(),de(this,$u,eA,$b,ue,{tag:17,mediaData:0,inDelay:1,outDelay:2,duration:3,unfolded:4,animation:5,playButtonIfNeed:6,canPlay:7,objectFit:8,enableCarousel:18,autoplayConfig:9},Vb)}}function tA(_u){me(_u,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function Al(_u,$u,Bu){const Ru=_u.slice();return Ru[8]=$u[Bu].id,Ru[1]=$u[Bu].content,Ru}function yl(_u){let $u,Bu,Ru,Lu,Ou,Fu=[],Nu=new Map,Vu,Uu,Gu;$u=new vt({props:{visible:_u[4],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),Lu=new yv({props:{unfolded:_u[4],duration:1e3,outDelay:400}});let zu=_u[2];const Hu=Qu=>Qu[8];for(let Qu=0;Qu<zu.length;Qu+=1){let Xu=Al(_u,zu,Qu),Ku=Hu(Xu);Nu.set(Ku,Fu[Qu]=wl(Ku,Xu))}let ju=_u[3]&&El(_u);return{c(){re($u.$$.fragment),Bu=q(),Ru=Q("div"),re(Lu.$$.fragment),Ou=q();for(let Qu=0;Qu<Fu.length;Qu+=1)Fu[Qu].c();Vu=q(),ju&&ju.c(),Uu=Ce(),C(Ru,"class","line svelte-1f7m1lj")},m(Qu,Xu){se($u,Qu,Xu),N(Qu,Bu,Xu),N(Qu,Ru,Xu),se(Lu,Ru,null),N(Qu,Ou,Xu);for(let Ku=0;Ku<Fu.length;Ku+=1)Fu[Ku].m(Qu,Xu);N(Qu,Vu,Xu),ju&&ju.m(Qu,Xu),N(Qu,Uu,Xu),Gu=!0},p(Qu,Xu){const Ku={};Xu&16&&(Ku.visible=Qu[4]),$u.$set(Ku);const Wu={};Xu&16&&(Wu.unfolded=Qu[4]),Lu.$set(Wu),Xu&20&&(zu=Qu[2],ve(),Fu=gt(Fu,Xu,Hu,1,Qu,zu,Nu,Vu.parentNode,Gt,wl,Vu,Al),be()),Qu[3]?ju?(ju.p(Qu,Xu),Xu&8&&M(ju,1)):(ju=El(Qu),ju.c(),M(ju,1),ju.m(Uu.parentNode,Uu)):ju&&(ve(),F(ju,1,1,()=>{ju=null}),be())},i(Qu){if(!Gu){M($u.$$.fragment,Qu),M(Lu.$$.fragment,Qu);for(let Xu=0;Xu<zu.length;Xu+=1)M(Fu[Xu]);M(ju),Gu=!0}},o(Qu){F($u.$$.fragment,Qu),F(Lu.$$.fragment,Qu);for(let Xu=0;Xu<Fu.length;Xu+=1)F(Fu[Xu]);F(ju),Gu=!1},d(Qu){oe($u,Qu),Qu&&H(Bu),Qu&&H(Ru),oe(Lu),Qu&&H(Ou);for(let Xu=0;Xu<Fu.length;Xu+=1)Fu[Xu].d(Qu);Qu&&H(Vu),ju&&ju.d(Qu),Qu&&H(Uu)}}}function wl(_u,$u){let Bu,Ru,Lu;return Ru=new bu({props:{unfolded:$u[4],content:$u[1],inDelay:500}}),{key:_u,first:null,c(){Bu=Q("div"),re(Ru.$$.fragment),C(Bu,"class","text svelte-1f7m1lj"),this.first=Bu},m(Ou,Fu){N(Ou,Bu,Fu),se(Ru,Bu,null),Lu=!0},p(Ou,Fu){$u=Ou;const Nu={};Fu&16&&(Nu.unfolded=$u[4]),Fu&4&&(Nu.content=$u[1]),Ru.$set(Nu)},i(Ou){Lu||(M(Ru.$$.fragment,Ou),Lu=!0)},o(Ou){F(Ru.$$.fragment,Ou),Lu=!1},d(Ou){Ou&&H(Bu),oe(Ru)}}}function El(_u){let $u,Bu,Ru;return Bu=new Su({props:{autoplayConfig:{autoplay:!1},unfolded:_u[4],mediaData:_u[3],tag:_u[0],enableCarousel:!1,canPlay:!1,playButtonIfNeed:"small",inDelay:500,duration:500}}),{c(){$u=Q("div"),re(Bu.$$.fragment),C($u,"class","media-wrapper svelte-1f7m1lj")},m(Lu,Ou){N(Lu,$u,Ou),se(Bu,$u,null),Ru=!0},p(Lu,Ou){const Fu={};Ou&16&&(Fu.unfolded=Lu[4]),Ou&8&&(Fu.mediaData=Lu[3]),Ou&1&&(Fu.tag=Lu[0]),Bu.$set(Fu)},i(Lu){Ru||(M(Bu.$$.fragment,Lu),Ru=!0)},o(Lu){F(Bu.$$.fragment,Lu),Ru=!1},d(Lu){Lu&&H($u),oe(Bu)}}}function nA(_u){let $u,Bu,Ru=_u[0].state&&yl(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[0].state?Ru?(Ru.p(Lu,Ou),Ou&1&&M(Ru,1)):(Ru=yl(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function iA(_u,$u,Bu){let Ru,Lu,Ou;var Fu,Nu,Vu;let{tag:Uu}=$u,Gu;return _u.$$set=zu=>{"tag"in zu&&Bu(0,Uu=zu.tag)},_u.$$.update=()=>{_u.$$.dirty&1&&Bu(4,Ru=Uu.state?Uu.state.unfolded:!1),_u.$$.dirty&225&&Bu(1,Lu=(Bu(6,Nu=Bu(5,Fu=Uu.data.text)===null||Fu===void 0?void 0:Fu.length)!==null&&Nu!==void 0?Nu:0)>7?(Bu(7,Vu=Uu.data.text)===null||Vu===void 0?void 0:Vu.substring(0,6))+"...":Uu.data.text),_u.$$.dirty&1&&Bu(3,Ou=Uu.data.mediaData),_u.$$.dirty&2&&Bu(2,Gu=Lu?[{id:it(),content:Lu}]:[])},[Uu,Lu,Gu,Ou,Ru,Fu,Nu,Vu]}class sA extends fe{constructor($u){super(),de(this,$u,iA,nA,ue,{tag:0},tA)}}function oA(_u){me(_u,"svelte-8mby9k",".svelte-8mby9k.svelte-8mby9k{box-sizing:border-box}.marketing.svelte-8mby9k.svelte-8mby9k{transform:translateY(-100%)}.content.svelte-8mby9k .headerImage.svelte-8mby9k{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.line.svelte-8mby9k.svelte-8mby9k{position:absolute;height:2.0625rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.content.svelte-8mby9k.svelte-8mby9k{background-color:white;position:relative;display:flex;flex-direction:column;min-width:11.125rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition:all 500ms}.title.svelte-8mby9k.svelte-8mby9k{position:absolute;background-color:white;border-radius:0.25rem;width:100%;top:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.title.svelte-8mby9k .text.svelte-8mby9k{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem;color:#000}.footer.svelte-8mby9k.svelte-8mby9k{position:relative;padding-left:0.75rem;padding-right:0.75rem;width:100%;height:1.375rem;display:flex;align-items:center}.footer.svelte-8mby9k .goto-button.svelte-8mby9k{flex-shrink:0;white-space:nowrap;background-image:linear-gradient(to right, rgba(87, 144, 253, 1) 0, rgba(42, 114, 254, 1) 100%);color:#fff;font-size:0.625rem;border-radius:0.875rem;font-weight:bold;padding-left:0.5rem;padding-right:0.5rem;height:1.25rem;margin-left:auto;display:flex;align-items:center}.footer.svelte-8mby9k .goto-icon.svelte-8mby9k::after{content:'';display:inline-block;width:0.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAeFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////GqOSsAAAAJ3RSTlMAFNO2pYt4bErz8uP6ysawgVtBPDcR5C4s2L6ZmJBzZGJXUyEeDws/0G2zAAAAkklEQVQ4y+3TRw6DMBAF0OAeJ3QCpCe0uf8NwRILLBYfiS1/aT3JoymnI+sERZ5VCH0iVto3QDfBLmeSSMUTogRV9bBEpJAKaYpGijn13aTSLeraeG9D0NZFZv4/rRL5FDHnITlllqjv6tykWsmX4JHr05y7j6oFKq2P8He48B0tAM0EY0EDxquClw6vLz6EI35GmwwSZpe+WOgAAAAASUVORK5CYII=);background-size:100% auto;background-repeat:no-repeat}.price.svelte-8mby9k.svelte-8mby9k{flex-shrink:0;margin-right:0.75rem;white-space:nowrap;color:#ff6600;display:flex;align-items:baseline}.price.svelte-8mby9k .value.svelte-8mby9k{position:relative;top:0.0625rem;font-size:1.125rem;line-height:1.375rem;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0rem}.price.svelte-8mby9k .unit.svelte-8mby9k{padding-left:0.125rem;font-size:0.625rem}.tag.svelte-8mby9k.svelte-8mby9k{position:relative;background-color:white;display:flex;width:-moz-max-content;width:max-content;padding-left:0.75rem;padding-right:0.75rem;min-height:1.75rem}.tag.svelte-8mby9k .base-tag.svelte-8mby9k{height:1rem;margin-top:1.375rem;margin-bottom:0.5rem;margin-right:0.25rem;font-size:0.625rem;line-height:0.875rem;padding:0.0625rem 0.25rem;border-radius:0.125rem;overflow:hidden}.tag.svelte-8mby9k .primary-tag.svelte-8mby9k{background:#e5eefe;color:#0055ff}.tag.svelte-8mby9k .secondary-tag.svelte-8mby9k{background:rgba(255, 102, 0, 0.08);color:rgba(255, 102, 0, 1)}.unfolded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 1)}.folded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.unfolded.svelte-8mby9k .content.svelte-8mby9k{opacity:1}.folded.svelte-8mby9k .content.svelte-8mby9k{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}")}function Pl(_u,$u,Bu){const Ru=_u.slice();return Ru[0]=$u[Bu],Ru}function Cl(_u,$u,Bu){const Ru=_u.slice();return Ru[0]=$u[Bu],Ru}function Il(_u){let $u,Bu=_u[0]+"",Ru;return{c(){$u=Q("div"),Ru=He(Bu),C($u,"class","base-tag primary-tag svelte-8mby9k")},m(Lu,Ou){N(Lu,$u,Ou),_($u,Ru)},p(Lu,Ou){Ou&4&&Bu!==(Bu=Lu[0]+"")&&Xe(Ru,Bu)},d(Lu){Lu&&H($u)}}}function xl(_u){let $u,Bu=_u[0]&&Il(_u);return{c(){Bu&&Bu.c(),$u=Ce()},m(Ru,Lu){Bu&&Bu.m(Ru,Lu),N(Ru,$u,Lu)},p(Ru,Lu){Ru[0]?Bu?Bu.p(Ru,Lu):(Bu=Il(Ru),Bu.c(),Bu.m($u.parentNode,$u)):Bu&&(Bu.d(1),Bu=null)},d(Ru){Bu&&Bu.d(Ru),Ru&&H($u)}}}function Tl(_u){let $u,Bu=_u[0]+"",Ru;return{c(){$u=Q("div"),Ru=He(Bu),C($u,"class","base-tag secondary-tag svelte-8mby9k")},m(Lu,Ou){N(Lu,$u,Ou),_($u,Ru)},p(Lu,Ou){Ou&4&&Bu!==(Bu=Lu[0]+"")&&Xe(Ru,Bu)},d(Lu){Lu&&H($u)}}}function Sl(_u){let $u,Bu=_u[0]&&Tl(_u);return{c(){Bu&&Bu.c(),$u=Ce()},m(Ru,Lu){Bu&&Bu.m(Ru,Lu),N(Ru,$u,Lu)},p(Ru,Lu){Ru[0]?Bu?Bu.p(Ru,Lu):(Bu=Tl(Ru),Bu.c(),Bu.m($u.parentNode,$u)):Bu&&(Bu.d(1),Bu=null)},d(Ru){Bu&&Bu.d(Ru),Ru&&H($u)}}}function kl(_u){let $u,Bu,Ru=_u[2].price.value+"",Lu,Ou,Fu=_u[2].price.unit&&Dl(_u);return{c(){$u=Q("div"),Bu=Q("span"),Lu=He(Ru),Ou=q(),Fu&&Fu.c(),C(Bu,"class","value svelte-8mby9k"),C($u,"class","price svelte-8mby9k")},m(Nu,Vu){N(Nu,$u,Vu),_($u,Bu),_(Bu,Lu),_($u,Ou),Fu&&Fu.m($u,null)},p(Nu,Vu){Vu&4&&Ru!==(Ru=Nu[2].price.value+"")&&Xe(Lu,Ru),Nu[2].price.unit?Fu?Fu.p(Nu,Vu):(Fu=Dl(Nu),Fu.c(),Fu.m($u,null)):Fu&&(Fu.d(1),Fu=null)},d(Nu){Nu&&H($u),Fu&&Fu.d()}}}function Dl(_u){let $u,Bu=_u[2].price.unit+"",Ru;return{c(){$u=Q("span"),Ru=He(Bu),C($u,"class","unit svelte-8mby9k")},m(Lu,Ou){N(Lu,$u,Ou),_($u,Ru)},p(Lu,Ou){Ou&4&&Bu!==(Bu=Lu[2].price.unit+"")&&Xe(Ru,Bu)},d(Lu){Lu&&H($u)}}}function Ll(_u){let $u,Bu=_u[2].highlightText+"",Ru;return{c(){$u=Q("div"),Ru=He(Bu),C($u,"class","goto-button goto-icon svelte-8mby9k")},m(Lu,Ou){N(Lu,$u,Ou),_($u,Ru)},p(Lu,Ou){Ou&4&&Bu!==(Bu=Lu[2].highlightText+"")&&Xe(Ru,Bu)},d(Lu){Lu&&H($u)}}}function rA(_u){var $u,Bu;let Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu=_u[2].title+"",qu,Yu,Zu,_h,ep;Lu=new vt({props:{visible:_u[1],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let ip=_u[2].brandTags||[],ap=[];for(let tp=0;tp<ip.length;tp+=1)ap[tp]=xl(Cl(_u,ip,tp));let sp=_u[2].tags||[],Ju=[];for(let tp=0;tp<sp.length;tp+=1)Ju[tp]=Sl(Pl(_u,sp,tp));let _f=(($u=_u[2].price)==null?void 0:$u.value)!==void 0&&((Bu=_u[2].price)==null?void 0:Bu.value)!==null&&kl(_u),np=_u[2].highlightText&&Ll(_u);return{c(){var tp,rp;Ru=Q("div"),re(Lu.$$.fragment),Ou=q(),Fu=Q("div"),Nu=q(),Vu=Q("div"),Uu=Q("img"),zu=q(),Hu=Q("div");for(let op=0;op<ap.length;op+=1)ap[op].c();ju=q();for(let op=0;op<Ju.length;op+=1)Ju[op].c();Qu=q(),Xu=Q("div"),Ku=Q("div"),qu=He(Wu),Yu=q(),Zu=Q("div"),_f&&_f.c(),_h=q(),np&&np.c(),C(Fu,"class","line svelte-8mby9k"),W(Fu,"transition-delay",_u[1]?ji+"ms":Bi+zl-Ml-40+"ms"),C(Uu,"class","headerImage svelte-8mby9k"),kt(Uu.src,Gu=_u[2].headerPictureUrl)||C(Uu,"src",Gu),C(Uu,"alt",""),C(Hu,"class","tag svelte-8mby9k"),C(Ku,"class","text svelte-8mby9k"),C(Xu,"class","title svelte-8mby9k"),C(Zu,"class","footer svelte-8mby9k"),W(Zu,"height",((tp=_u[2].price)==null?void 0:tp.value)!==void 0&&((rp=_u[2].price)==null?void 0:rp.value)!==null&&_u[2].highlightText?void 0:"1rem"),C(Vu,"class","content svelte-8mby9k"),W(Vu,"transition-delay",_u[1]?ji+Bi+"ms":"0ms"),C(Ru,"class","marketing svelte-8mby9k"),ie(Ru,"unfolded",_u[1]),ie(Ru,"folded",_u[3])},m(tp,rp){N(tp,Ru,rp),se(Lu,Ru,null),_(Ru,Ou),_(Ru,Fu),_(Ru,Nu),_(Ru,Vu),_(Vu,Uu),_(Vu,zu),_(Vu,Hu);for(let op=0;op<ap.length;op+=1)ap[op].m(Hu,null);_(Hu,ju);for(let op=0;op<Ju.length;op+=1)Ju[op].m(Hu,null);_(Vu,Qu),_(Vu,Xu),_(Xu,Ku),_(Ku,qu),_(Vu,Yu),_(Vu,Zu),_f&&_f.m(Zu,null),_(Zu,_h),np&&np.m(Zu,null),ep=!0},p(tp,[rp]){var op,lp,up,cp;const Ap={};if(rp&2&&(Ap.visible=tp[1]),Lu.$set(Ap),rp&2&&W(Fu,"transition-delay",tp[1]?ji+"ms":Bi+zl-Ml-40+"ms"),(!ep||rp&4&&!kt(Uu.src,Gu=tp[2].headerPictureUrl))&&C(Uu,"src",Gu),rp&4){ip=tp[2].brandTags||[];let yp;for(yp=0;yp<ip.length;yp+=1){const Ip=Cl(tp,ip,yp);ap[yp]?ap[yp].p(Ip,rp):(ap[yp]=xl(Ip),ap[yp].c(),ap[yp].m(Hu,ju))}for(;yp<ap.length;yp+=1)ap[yp].d(1);ap.length=ip.length}if(rp&4){sp=tp[2].tags||[];let yp;for(yp=0;yp<sp.length;yp+=1){const Ip=Pl(tp,sp,yp);Ju[yp]?Ju[yp].p(Ip,rp):(Ju[yp]=Sl(Ip),Ju[yp].c(),Ju[yp].m(Hu,null))}for(;yp<Ju.length;yp+=1)Ju[yp].d(1);Ju.length=sp.length}(!ep||rp&4)&&Wu!==(Wu=tp[2].title+"")&&Xe(qu,Wu),((op=tp[2].price)==null?void 0:op.value)!==void 0&&((lp=tp[2].price)==null?void 0:lp.value)!==null?_f?_f.p(tp,rp):(_f=kl(tp),_f.c(),_f.m(Zu,_h)):_f&&(_f.d(1),_f=null),tp[2].highlightText?np?np.p(tp,rp):(np=Ll(tp),np.c(),np.m(Zu,null)):np&&(np.d(1),np=null),rp&4&&W(Zu,"height",((up=tp[2].price)==null?void 0:up.value)!==void 0&&((cp=tp[2].price)==null?void 0:cp.value)!==null&&tp[2].highlightText?void 0:"1rem"),rp&2&&W(Vu,"transition-delay",tp[1]?ji+Bi+"ms":"0ms"),(!ep||rp&2)&&ie(Ru,"unfolded",tp[1]),(!ep||rp&8)&&ie(Ru,"folded",tp[3])},i(tp){ep||(M(Lu.$$.fragment,tp),ep=!0)},o(tp){F(Lu.$$.fragment,tp),ep=!1},d(tp){tp&&H(Ru),oe(Lu),Dt(ap,tp),Dt(Ju,tp),_f&&_f.d(),np&&np.d()}}}const ji=400,Ml=500,Bi=180,zl=500;function aA(_u,$u,Bu){let Ru,Lu,Ou;var Fu,Nu;let{tag:Vu}=$u;return _u.$$set=Uu=>{"tag"in Uu&&Bu(0,Vu=Uu.tag)},_u.$$.update=()=>{_u.$$.dirty&49&&Bu(1,Ru=Bu(5,Nu=Bu(4,Fu=Vu.state)===null||Fu===void 0?void 0:Fu.unfolded)!==null&&Nu!==void 0?Nu:!1),_u.$$.dirty&2&&Bu(3,Lu=!Ru),_u.$$.dirty&1&&Bu(2,Ou=Vu.data)},[Vu,Ru,Ou,Lu,Fu,Nu]}class lA extends fe{constructor($u){super(),de(this,$u,aA,rA,ue,{tag:0},oA)}}function cA(_u){me(_u,"svelte-1ku3wt4",`.audio.svelte-1ku3wt4.svelte-1ku3wt4{position:relative;width:100%;height:100%;cursor:pointer}@keyframes svelte-1ku3wt4-playing{25%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='9' cy='9' r='8' transform='translate(-1 -1)' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}50%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.533 6.685L4.169 8.049l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}75%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm-.656 4.874l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .875-.333 1.67-.88 2.268l.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}}.paused.svelte-1ku3wt4 .audio-icon.svelte-1ku3wt4{animation:none}.audio-icon.svelte-1ku3wt4.svelte-1ku3wt4{width:100%;height:100%;border-radius:50%;background-size:100%;animation:svelte-1ku3wt4-playing 2s steps(1) infinite;background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm1.428 2.79l-.953.952a6.222 6.222 0 0 1 1.775 4.36c0 1.571-.58 3.006-1.538 4.103l-.184.202.793.794a7.344 7.344 0 0 0 2.21-5.26A7.341 7.341 0 0 0 9.428 2.79zM7.344 4.873l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .802-.28 1.537-.748 2.115l-.132.153.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}`)}function Ol(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu=!0,Uu,Gu,zu,Hu,ju;return Bu=new vt({props:{center:!0,blurRadius:15,spreadRadius:6}}),{c(){$u=Q("div"),re(Bu.$$.fragment),Ru=q(),Lu=Q("div"),Ou=q(),Fu=Q("audio"),C(Lu,"class","audio-icon svelte-1ku3wt4"),Fu.controls=!1,C(Fu,"playsinline",""),kt(Fu.src,Nu=_u[3])||C(Fu,"src",Nu),C($u,"class","audio svelte-1ku3wt4"),ie($u,"paused",_u[6])},m(Qu,Xu){N(Qu,$u,Xu),se(Bu,$u,null),_($u,Ru),_($u,Lu),_($u,Ou),_($u,Fu),_u[9](Fu),zu=!0,Hu||(ju=[Oe(Fu,"play",_u[10]),Oe(Fu,"pause",_u[10]),Oe($u,"click",Po(_u[7]))],Hu=!0)},p(Qu,Xu){_u=Qu,(!zu||Xu&8&&!kt(Fu.src,Nu=_u[3]))&&C(Fu,"src",Nu),Xu&64&&Vu!==(Vu=_u[6])&&Fu[Vu?"pause":"play"](),(!zu||Xu&64)&&ie($u,"paused",_u[6])},i(Qu){zu||(M(Bu.$$.fragment,Qu),Qu&&Be(()=>{Gu&&Gu.end(1),Uu=bn($u,pn,{duration:_u[2],delay:_u[0],easing:Ln}),Uu.start()}),zu=!0)},o(Qu){F(Bu.$$.fragment,Qu),Uu&&Uu.invalidate(),Qu&&(Gu=zn($u,pn,{duration:_u[2],delay:_u[1],easing:Ln})),zu=!1},d(Qu){Qu&&H($u),oe(Bu),_u[9](null),Qu&&Gu&&Gu.end(),Hu=!1,Nt(ju)}}}function uA(_u){let $u,Bu,Ru=_u[4]&&Ol(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[4]?Ru?(Ru.p(Lu,Ou),Ou&16&&M(Ru,1)):(Ru=Ol(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function dA(_u,$u,Bu){let{inDelay:Ru=0}=$u,{outDelay:Lu=0}=$u,{duration:Ou=0}=$u,{url:Fu}=$u,{unfolded:Nu}=$u,{hooksInfo:Vu={}}=$u;const Uu=ei("hooks"),Gu=ei("mediaStore");let zu,Hu=!0;Gu.subscribe(({currentMediaUrl:Ku})=>{Ku!==Fu&&(zu==null||zu.pause())});function ju(Ku){Gu.set({currentMediaUrl:Fu}),zu&&(Uu.emit("click",Object.assign({event:Ku,target:"AudioTagPlayIcon",audioInstance:zu},Vu)),zu.paused?zu.play():zu.pause(),Bu(5,zu.onplay=Wu=>Uu.emit("playStateChange",Object.assign({event:Wu,state:"playing",mediaInstance:zu},Vu)),zu),Bu(5,zu.onpause=Wu=>Uu.emit("playStateChange",Object.assign({event:Wu,state:"paused",mediaInstance:zu},Vu)),zu))}function Qu(Ku){We[Ku?"unshift":"push"](()=>{zu=Ku,Bu(5,zu)})}function Xu(){Hu=this.paused,Bu(6,Hu)}return _u.$$set=Ku=>{"inDelay"in Ku&&Bu(0,Ru=Ku.inDelay),"outDelay"in Ku&&Bu(1,Lu=Ku.outDelay),"duration"in Ku&&Bu(2,Ou=Ku.duration),"url"in Ku&&Bu(3,Fu=Ku.url),"unfolded"in Ku&&Bu(4,Nu=Ku.unfolded),"hooksInfo"in Ku&&Bu(8,Vu=Ku.hooksInfo)},_u.$$.update=()=>{_u.$$.dirty&48&&(Nu||zu==null||zu.pause())},[Ru,Lu,Ou,Fu,Nu,zu,Hu,ju,Vu,Qu,Xu]}class fA extends fe{constructor($u){super(),de(this,$u,dA,uA,ue,{inDelay:0,outDelay:1,duration:2,url:3,unfolded:4,hooksInfo:8},cA)}}function hA(_u){me(_u,"svelte-4r8s18",".audio-tag.svelte-4r8s18.svelte-4r8s18{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.line.svelte-4r8s18.svelte-4r8s18{display:flex;position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-4r8s18.svelte-4r8s18{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-4r8s18.svelte-4r8s18{position:relative;width:100%;height:100%}.audio-icon.svelte-4r8s18.svelte-4r8s18{vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.unfolded.svelte-4r8s18 .audio-icon.svelte-4r8s18{pointer-events:auto}")}function jl(_u){var $u,Bu,Ru,Lu;let Ou,Fu,Nu,Vu,Uu,Gu,zu,Hu,ju,Qu,Xu,Ku,Wu,qu,Yu,Zu,_h;return Fu=new vt({props:{visible:_u[5],left:_u[2]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Uu=new eu({props:{unfolded:_u[5],duration:1e3,outDelay:_u[4]+20*Math.min((Bu=($u=_u[3][0])==null?void 0:$u.content.length)!=null?Bu:10,15)}}),Qu=new fA({props:{unfolded:_u[5],url:_u[0].data.audioUrl,duration:1e3,outDelay:20*Math.min((Lu=(Ru=_u[3][0])==null?void 0:Ru.content.length)!=null?Lu:10,15),hooksInfo:{tag:_u[0]}}}),Wu=new Au({props:{visible:_u[5],textUnfolded:_u[1],textItems:_u[3]}}),{c(){Ou=Q("div"),re(Fu.$$.fragment),Nu=q(),Vu=Q("div"),re(Uu.$$.fragment),Gu=q(),zu=Q("div"),Hu=Q("div"),ju=Q("div"),re(Qu.$$.fragment),Xu=q(),Ku=Q("div"),re(Wu.$$.fragment),C(Vu,"class","line svelte-4r8s18"),W(Vu,"width",_u[2]+"px"),C(ju,"class","audio-icon svelte-4r8s18"),W(Ku,"display","inline-block"),C(Hu,"class","wrapper svelte-4r8s18"),C(zu,"class","content svelte-4r8s18"),Be(()=>_u[9].call(zu)),C(Ou,"class","audio-tag svelte-4r8s18"),ie(Ou,"unfolded",_u[5])},m(ep,ip){N(ep,Ou,ip),se(Fu,Ou,null),_(Ou,Nu),_(Ou,Vu),se(Uu,Vu,null),_(Ou,Gu),_(Ou,zu),_(zu,Hu),_(Hu,ju),se(Qu,ju,null),_(Hu,Xu),_(Hu,Ku),se(Wu,Ku,null),qu=en(zu,_u[9].bind(zu)),Yu=!0,Zu||(_h=Oe(Ku,"click",_u[6]),Zu=!0)},p(ep,ip){var ap,sp,Ju,_f;const np={};ip&32&&(np.visible=ep[5]),ip&4&&(np.left=ep[2]/2+"px"),Fu.$set(np);const tp={};ip&32&&(tp.unfolded=ep[5]),ip&24&&(tp.outDelay=ep[4]+20*Math.min((sp=(ap=ep[3][0])==null?void 0:ap.content.length)!=null?sp:10,15)),Uu.$set(tp),ip&4&&W(Vu,"width",ep[2]+"px");const rp={};ip&32&&(rp.unfolded=ep[5]),ip&1&&(rp.url=ep[0].data.audioUrl),ip&8&&(rp.outDelay=20*Math.min((_f=(Ju=ep[3][0])==null?void 0:Ju.content.length)!=null?_f:10,15)),ip&1&&(rp.hooksInfo={tag:ep[0]}),Qu.$set(rp);const op={};ip&32&&(op.visible=ep[5]),ip&2&&(op.textUnfolded=ep[1]),ip&8&&(op.textItems=ep[3]),Wu.$set(op),(!Yu||ip&32)&&ie(Ou,"unfolded",ep[5])},i(ep){Yu||(M(Fu.$$.fragment,ep),M(Uu.$$.fragment,ep),M(Qu.$$.fragment,ep),M(Wu.$$.fragment,ep),Yu=!0)},o(ep){F(Fu.$$.fragment,ep),F(Uu.$$.fragment,ep),F(Qu.$$.fragment,ep),F(Wu.$$.fragment,ep),Yu=!1},d(ep){ep&&H(Ou),oe(Fu),oe(Uu),oe(Qu),oe(Wu),qu(),Zu=!1,_h()}}}function pA(_u){let $u,Bu,Ru=_u[0].state&&jl(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[0].state?Ru?(Ru.p(Lu,Ou),Ou&1&&M(Ru,1)):(Ru=jl(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function mA(_u,$u,Bu){let Ru,Lu,Ou;var Fu;let{tag:Nu}=$u,Vu=!1,Uu,Gu=[];function zu(){Bu(1,Vu=!Vu)}function Hu(){Uu=this.clientWidth,Bu(2,Uu)}return _u.$$set=ju=>{"tag"in ju&&Bu(0,Nu=ju.tag)},_u.$$.update=()=>{_u.$$.dirty&129&&Bu(5,Ru=!!(!(Bu(7,Fu=Nu.state)===null||Fu===void 0)&&Fu.unfolded)),_u.$$.dirty&1&&Bu(8,Lu=Nu.data.text),_u.$$.dirty&256&&Bu(3,Gu=[{id:it(),content:Lu}]),_u.$$.dirty&2&&Bu(4,Ou=Vu?450:0)},[Nu,Vu,Uu,Gu,Ou,Ru,zu,Fu,Lu,Hu]}class gA extends fe{constructor($u){super(),de(this,$u,mA,pA,ue,{tag:0},hA)}}function vA(_u){me(_u,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function Bl(_u){let $u,Bu,Ru;return Bu=new Su({props:{unfolded:_u[5],mediaData:_u[4],objectFit:_u[2],enableCarousel:_u[1],autoplayConfig:_u[3],tag:_u[0],canPlay:!0,playButtonIfNeed:"large",inDelay:500,duration:500}}),{c(){$u=Q("div"),re(Bu.$$.fragment),C($u,"class","media-wrapper svelte-10cw0el")},m(Lu,Ou){N(Lu,$u,Ou),se(Bu,$u,null),Ru=!0},p(Lu,Ou){const Fu={};Ou&32&&(Fu.unfolded=Lu[5]),Ou&16&&(Fu.mediaData=Lu[4]),Ou&4&&(Fu.objectFit=Lu[2]),Ou&2&&(Fu.enableCarousel=Lu[1]),Ou&8&&(Fu.autoplayConfig=Lu[3]),Ou&1&&(Fu.tag=Lu[0]),Bu.$set(Fu)},i(Lu){Ru||(M(Bu.$$.fragment,Lu),Ru=!0)},o(Lu){F(Bu.$$.fragment,Lu),Ru=!1},d(Lu){Lu&&H($u),oe(Bu)}}}function bA(_u){let $u,Bu,Ru=_u[0].state&&_u[4]&&Bl(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[0].state&&Lu[4]?Ru?(Ru.p(Lu,Ou),Ou&17&&M(Ru,1)):(Ru=Bl(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function AA(_u,$u,Bu){let Ru,Lu,Ou,Fu,Nu;var Vu,Uu;let{tag:Gu}=$u;return _u.$$set=zu=>{"tag"in zu&&Bu(0,Gu=zu.tag)},_u.$$.update=()=>{_u.$$.dirty&1&&Bu(5,Ru=Gu.state?Gu.state.unfolded:!1),_u.$$.dirty&1&&Bu(4,Lu=Gu.data.mediaData),_u.$$.dirty&1&&Bu(1,Ou=Gu.data.enableCarousel),_u.$$.dirty&67&&Bu(3,Fu=Bu(6,Vu=Gu.data.autoplayConfig)!==null&&Vu!==void 0?Vu:{autoplay:Ou!=null?Ou:!0,autoplayVideo:!0}),_u.$$.dirty&129&&Bu(2,Nu=Bu(7,Uu=Gu.data.objectFit)!==null&&Uu!==void 0?Uu:(()=>Gu.data.adaptationMode==="stretch"?"cover":Gu.data.adaptationMode==="proportional"?"contain":void 0)())},[Gu,Ou,Nu,Fu,Lu,Ru,Vu,Uu]}class yA extends fe{constructor($u){super(),de(this,$u,AA,bA,ue,{tag:0},vA)}}function wA(_u){me(_u,"svelte-7x7u86",".wrapper.svelte-7x7u86{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-7x7u86{position:relative;display:flex;align-items:center;justify-content:center}.icon.svelte-7x7u86{position:relative;margin-bottom:0.6875rem}.arrow0.svelte-7x7u86,.arrow1.svelte-7x7u86,.arrow2.svelte-7x7u86{position:absolute;width:1.625rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAAAkCAYAAAAnxQwhAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATqADAAQAAAABAAAAJAAAAABrx2urAAAGm0lEQVRoBd2ZXbCVUxjH26QSfSCS0JwoFNEZ0cc45iSmUUaqC+KCwUUXxYUZw4yrLhozLlDDRWa6oW5yOFTT0IcyKn1JnIjDKelLPipJcXT8fttaZ95qd+yzv+uZ+e211rvfd61n/ddaz1rv3qkOFWgtLS3n4Vb34NqhVCr1d6W5mao0hxBNwfrCOcG346S7Ee9gKFdEUjHCIZi+XA69E8p4rQVM98EeBLRcdqsI4RCtI0r0h4uCIvo1BZx1b4GzTjsA3yFec7pUxo+yC4doXen/IDg/6GB5GlSH8mbSWXA4lI+SNiDekVAuS1JW4RCtF72+EWI8c6k+A6ZJc5m+BHvCxX9ItyLe/lAueVIW4UI8u4beDkj02FnnTOuUuJbM/kVhNjQkLjaSbyxH3Cu5cIjmUWMoOKti+2PIT4JsrI6blkKMe87GTYhX0iNLdDwbh/O+B9G6UclIMNWcXQ/CrRbaYRu5dz44C7XfYTXimZbESiYconk2GwGdwSOF4j0JV0AuZrybA4plfYq4BvF2kRbdSiIcog2hJ+6StmcnFesJ6AL52DEefgOiWNa/EfG25FNpNs8WVbgQz+7EEc9o0RRxYiwUKDXuJcVqovxRMeNe0YRDtB44Pw4uAc0jx2gYZqEItoE63TSc0fILLEa8oryqFUU4ROuH04oWl6I76WQwzhXTXLILIO6wLuVFiLedtKBWcOEQ7XY8rE146ZvAwxDfDBJfFSX7J7XOgz8Sta9AvE8T5byzBRMuxLP78Mg3Ac3l0gcmWCiD1dPmboh9/JL8+4WKe7HSvPqFaL6cTwGF0jyc3gTOvnLaehr/HOIrnUeYeYj3W75O5S0covnq9AhcEJxpJr0Lrgrlcic7cWAZ+AuM5o8DbyJeY7qU40dewiFaDe26FOOIKppl41olmWK9C1E8V0Q94q3M1cmchAvx7CEaHZ5oWKfGJ8qVmF2EU75hxH67YcxHQK+1y2IFWT+EaBdz81SoCg+59fvCXuh4tjnUf0tIC5WsoyJjnUckbTu8hni/WsjW2iUcog2k4unQPTTglm/HPLcVwpqoZCu4lOLxxeOFocCfneJgkc3LfuDpzyDG5UPkZyHetmxrzVo4RLubSh+FGM8OkHcTuBDyMUfaTihQHJBYn0cafTTVfKFX0KHgzM/HDvPwcugZKnGw5iLeh6HcZvK/woV45gu5wkVTtLGxkEN6jGc2gaJ5lDkXtCjUXvIrQf9qoDckzU56pFC8augMudoSHoziWcdSmIOA8e3Da6dYm8Ihmu+Zz8H14ckYWHONZ19Qz4+go53A9qNYLvtPYBlON5C2Gn4MpuDsHgVxecXvHQQH8krw7JiLuUnohz5pX8NM/PB9N6OdVjicNaa8AHFJROeqMtZ0+ovGk2/AI0o3iGKRTcey9aSO8locbXN3wyc75k4+BoaBYSNZ3yHKHj2ug6uhPdbEzQ6qK0ARXQ0z8MmYe4plFA4Hx3Hn0xB3Hiv0V9qTYxCXMpoie2LX+vyXnPDpiH4Ay3HMe9tt+NiTh0bDPRBXRLIed07tZvDebEzhN4CzV3O5voyPi9KlxMcJwuGMQj0FE8M9Ku9I1MIJ94bvk4mNGORdcr41GLd8xjpM94HxZAmO7CAtmOF3Pyoz5srJ8bCZaw68M95NJU4GshlNf1dAf4i+15F/Bb9b416rGDRuPHsRHCHN2PEz3GahDXMq/wR9wfgTGyObFnE56ULwDxW/K5rRB/tTDa4YY2Imf3Zx/TIwFLVl6/iyF8SNxxX0LH1Ix720cDRoTJgNcbT2hwdUPZPZeCNYsc9EQazPEV4NTm9/zjlKWnKjT11otBYUcRS4AuKgmjrYToxrwUHPZN9z0Ql0afhyL+k0+rQtRQOu/3qIAhjIB0IPSJrrvwEcARvTko44896DhXFUvKESjD66msbD/eBMSw60eQVygAfDyXH8INe2gZPLiaF4ExTucTLPg2aMGg7uVpqzZwu4tm8Ad7UoFtn0q4ti1SHWt16odKO/A/DxAZgAcYVFt+3nV2AcHAIdQTsOa6Ea7P9MhZtB5jHQmsDltwMM8qrszFPpaEfILIYF4H+ZVnrGGf12coyEyXAvdIU4KUydaa4+r/cDl3UVaHMVzun7erp4+g/FWQWK5a6oeGeNoYHijAVFrIG44shmtKkK52x6FSZluMW4pVjvIJbHibPe0MPl61JWxEEZOvw216a3LkEeGMGFO0D1d8KqMyVu4WtRDE2Mh85Az6Wuso/RZA1ph38BBMvNbHuq7kAAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:contain;animation-fill-mode:backwards;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-duration:1.2s}.arrow1.svelte-7x7u86{position:relative}.arrow0.svelte-7x7u86{top:-0.75rem;animation-name:svelte-7x7u86-up0}.arrow1.svelte-7x7u86{animation-name:svelte-7x7u86-up1}.arrow2.svelte-7x7u86{top:0.75rem;animation-name:svelte-7x7u86-up2}.text.svelte-7x7u86{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;word-break:break-all;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}@keyframes svelte-7x7u86-up0{0%{opacity:0.8;transform:translate3d(0, 0, 0) scale(0.84)}33.33%,100%{opacity:0;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up1{0%{opacity:1;transform:translate3d(0, 0, 0) scale(1)}33.33%,100%{opacity:0.8;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up2{0%{opacity:0}33.33%,100%{opacity:1;transform:translate3d(0, -0.75rem, 0)}}.link.svelte-7x7u86{position:relative;width:1.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAkCAMAAAAgl+0yAAAAnFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+TINBkAAAAM3RSTlMAjLy6ILM2Fi+Zng3BrPvao4VC9ceneQfKkmNdV1AbEeLOsHA77ujUtn5JLnRraSUUjVLj/+RVAAABhElEQVRIx63V2W6CQBiGYUBUQGDYdwTZQZZa7v/eimik/ket/7yZ4yeTTCYf8+dOX8etxGVoxAvCVbguR3g0uRTMA0w4odGi+CbzFnGKosCqrmHc5rdEwzCwqtGFJlC7DqtOcTxANY67BHnVKOpVoEZRjFPdLgxbqIZhhFTjINChGgThF06NhpGd35OGMcCppyDPfajm+YhUR8cRoeo4+RGlJnnbalBt2x6nHh1dt4Gq6bqDU886y2ZQZVn9jFJ51vcbqPo+Up18UeSgKoo3nHqVJEkGqi1JPk49aLZmQdW2xXf1zP+vUFHsC1QVReK33xdk+w9SaqAq+732UvvdZ2UEqrud8lR5Wc4a7pO8GaoL9VBjy7rMlMosq1lV43LhZlrtF+yuJlbtEXpqXXP3NYwI8VJqakOIziw5aepV1FQuTdfhvlWVZdJCrao6MPe0spRpqV5ZFivqNqYpq3RQ2TST5/h4quoRCmwqq6rymol6plV53IZSomTKE/MroWfxDevL/wAEdPq1eGDh4AAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-size:contain;animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:1.2s;animation-name:svelte-7x7u86-left-right}@keyframes svelte-7x7u86-left-right{0%,100%{opacity:0.8;transform:translateX(-0.3125rem)}50%{opacity:1;transform:translateX(0)}}")}function EA(_u){let $u,Bu,Ru,Lu;return $u=new vt({props:{visible:!0,outDelay:0,inDelay:0,width:1.4,left:13,bottom:"auto",blurRadius:50,spreadRadius:18}}),{c(){re($u.$$.fragment),Bu=q(),Ru=Q("div"),C(Ru,"class","link svelte-7x7u86")},m(Ou,Fu){se($u,Ou,Fu),N(Ou,Bu,Fu),N(Ou,Ru,Fu),Lu=!0},i(Ou){Lu||(M($u.$$.fragment,Ou),Lu=!0)},o(Ou){F($u.$$.fragment,Ou),Lu=!1},d(Ou){oe($u,Ou),Ou&&H(Bu),Ou&&H(Ru)}}}function PA(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu;return $u=new vt({props:{visible:!0,outDelay:0,inDelay:0,height:1.2,left:13,bottom:12,blurRadius:50,spreadRadius:18}}),{c(){re($u.$$.fragment),Bu=q(),Ru=Q("div"),Lu=q(),Ou=Q("div"),Fu=q(),Nu=Q("div"),C(Ru,"class","arrow0 svelte-7x7u86"),C(Ou,"class","arrow1 svelte-7x7u86"),C(Nu,"class","arrow2 svelte-7x7u86")},m(Uu,Gu){se($u,Uu,Gu),N(Uu,Bu,Gu),N(Uu,Ru,Gu),N(Uu,Lu,Gu),N(Uu,Ou,Gu),N(Uu,Fu,Gu),N(Uu,Nu,Gu),Vu=!0},i(Uu){Vu||(M($u.$$.fragment,Uu),Vu=!0)},o(Uu){F($u.$$.fragment,Uu),Vu=!1},d(Uu){oe($u,Uu),Uu&&H(Bu),Uu&&H(Ru),Uu&&H(Lu),Uu&&H(Ou),Uu&&H(Fu),Uu&&H(Nu)}}}function CA(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu,Gu=_u[0].text+"",zu,Hu;const ju=[PA,EA],Qu=[];function Xu(Ku,Wu){return Ku[0].linkType===co.VrLink?0:Ku[0].linkType===co.NormalLink?1:-1}return~(Ru=Xu(_u))&&(Lu=Qu[Ru]=ju[Ru](_u)),Nu=new vt({props:{visible:!0,outDelay:0,inDelay:0,left:"auto",bottom:"auto",width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){$u=Q("div"),Bu=Q("div"),Lu&&Lu.c(),Ou=q(),Fu=Q("div"),re(Nu.$$.fragment),Vu=q(),Uu=Q("div"),zu=He(Gu),C(Bu,"class","icon svelte-7x7u86"),C(Uu,"class","text svelte-7x7u86"),C(Fu,"class","text-wrapper svelte-7x7u86"),C($u,"class","wrapper svelte-7x7u86")},m(Ku,Wu){N(Ku,$u,Wu),_($u,Bu),~Ru&&Qu[Ru].m(Bu,null),_($u,Ou),_($u,Fu),se(Nu,Fu,null),_(Fu,Vu),_(Fu,Uu),_(Uu,zu),Hu=!0},p(Ku,[Wu]){let qu=Ru;Ru=Xu(Ku),Ru!==qu&&(Lu&&(ve(),F(Qu[qu],1,1,()=>{Qu[qu]=null}),be()),~Ru?(Lu=Qu[Ru],Lu||(Lu=Qu[Ru]=ju[Ru](Ku),Lu.c()),M(Lu,1),Lu.m(Bu,null)):Lu=null),(!Hu||Wu&1)&&Gu!==(Gu=Ku[0].text+"")&&Xe(zu,Gu)},i(Ku){Hu||(M(Lu),M(Nu.$$.fragment,Ku),Hu=!0)},o(Ku){F(Lu),F(Nu.$$.fragment,Ku),Hu=!1},d(Ku){Ku&&H($u),~Ru&&Qu[Ru].d(),oe(Nu)}}}function IA(_u,$u,Bu){let Ru,{tag:Lu}=$u;return _u.$$set=Ou=>{"tag"in Ou&&Bu(1,Lu=Ou.tag)},_u.$$.update=()=>{_u.$$.dirty&2&&Bu(0,Ru=Lu.data)},[Ru,Lu]}class xA extends fe{constructor($u){super(),de(this,$u,IA,CA,ue,{tag:1},wA)}}function TA(_u){me(_u,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function Rl(_u){let $u,Bu=_u[0].element+"",Ru;return{c(){$u=new Xi(!1),Ru=Ce(),$u.a=Ru},m(Lu,Ou){$u.m(Bu,Lu,Ou),N(Lu,Ru,Ou)},p(Lu,Ou){Ou&1&&Bu!==(Bu=Lu[0].element+"")&&$u.p(Bu)},d(Lu){Lu&&H(Ru),Lu&&$u.d()}}}function SA(_u){let $u,Bu=typeof _u[0].element=="string"&&Rl(_u);return{c(){$u=Q("div"),Bu&&Bu.c(),C($u,"class","customElement__container svelte-kzl2aj")},m(Ru,Lu){N(Ru,$u,Lu),Bu&&Bu.m($u,null),_u[2]($u)},p(Ru,[Lu]){typeof Ru[0].element=="string"?Bu?Bu.p(Ru,Lu):(Bu=Rl(Ru),Bu.c(),Bu.m($u,null)):Bu&&(Bu.d(1),Bu=null)},i:ce,o:ce,d(Ru){Ru&&H($u),Bu&&Bu.d(),_u[2](null)}}}function kA(_u,$u,Bu){let{tag:Ru}=$u,Lu,Ou;mt(()=>{if(Lu){if(Ru.element instanceof Element){const Nu=Ru.element;Lu.appendChild(Nu),Ou=()=>Lu==null?void 0:Lu.removeChild(Nu)}else if(typeof Ru.element=="function"){const Nu=Ru.element;Ou=Nu(Lu)}}}),tn(()=>{Ou==null||Ou()});function Fu(Nu){We[Nu?"unshift":"push"](()=>{Lu=Nu,Bu(1,Lu)})}return _u.$$set=Nu=>{"tag"in Nu&&Bu(0,Ru=Nu.tag)},[Ru,Lu,Fu]}class DA extends fe{constructor($u){super(),de(this,$u,kA,SA,ue,{tag:0},TA)}}function LA(_u){me(_u,"svelte-95x526",`@font-face{font-family:'TG-TYPE';font-style:normal;font-weight:400;src:local('TG-TYPE-Bold'),
      url(data:application/font-woff2;charset=utf-8;base64,T1RUTwAKAIAAAwAgQ0ZGINFD4CEAAAaQAAAHC0dTVUIAAQAAAAANnAAAAApPUy8yaB5pEwAAAjQAAABgY21hcEItjGUAAAT0AAABfGhlYWQS1WWOAAAAtAAAADZoaGVhBfMBxwAAAhAAAAAkaG10eJ9gBO8AAADsAAABJG1heHAASVAAAAAArAAAAAZuYW1lqczkZQAAApQAAAJecG9zdP+4ADIAAAZwAAAAIAAAUAAASQAAAAEAAAABAADkeHeyXw889QADA+gAAAAA2NoRKwAAAADY2hErACn/OAHgAyAAAQADAAIAAAAAAAAB9ABdAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACCAA7AcwAdwIIADMCCAA0AhwAMwISADkCCAAuAfQANAH+ACsB/gApAggANAEeAFABHgBQAR4AUAIIADQCCAAuAR4AUAEeAFABfAAxAAEAAAPo/zgAAAIcACkAKQHgAAEAAAAAAAAAAAAAAAAAAABJAAMCLgGQAAUACAKKAlgAAABLAooCWAAAAV4AMgEsAAAAAAgAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFVLV04AIAAg/xsDIP84AMgD6ADIAAAAAQAAAAAB9AK8AAAAIAAAAAAAEADGAAEAAAAAAAEADAAAAAEAAAAAAAIABAAMAAEAAAAAAAMAGwAQAAEAAAAAAAQAEQArAAEAAAAAAAUAPAA8AAEAAAAAAAYAEAB4AAEAAAAAAAgADAAAAAEAAAAAAAkADAAAAAMAAQQJAAEAGACIAAMAAQQJAAIACACgAAMAAQQJAAMANgCoAAMAAQQJAAQAIgDeAAMAAQQJAAUAeAEAAAMAAQQJAAYAIAF4AAMAAQQJAAgAGACIAAMAAQQJAAkAGACIQUxJQkFCQSBGb250Qm9sZDEuMDAwO1VLV047QUxJQkFCQUZvbnQtQm9sZEFMSUJBQkEgRm9udCBCb2xkVmVyc2lvbiAxLjAwMDtQUyAwMDEuMDAwO2hvdGNvbnYgMS4wLjg4O21ha2VvdGYubGliMi41LjY0Nzc1QUxJQkFCQUZvbnQtQm9sZABBAEwASQBCAEEAQgBBACAARgBvAG4AdABCAG8AbABkADEALgAwADAAMAA7AFUASwBXAE4AOwBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAEEATABJAEIAQQBCAEEAIABGAG8AbgB0ACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMAAwADEALgAwADAAMAA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANAA3ADcANQBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAAAAAAADAAAAAwAAASIAAQAAAAAAHAADAAEAAAEiAAABBgAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABCSEMANjc4OTo7PD0+PwAAAAAAAAACAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGwAAAAAAABwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFoAAAAQABAAAwAAACAALgA5AFoAegCl/xv//wAAACAALAAwAEEAYQCl/xr////hAAAABv/B/7v/nwAAAAEAAAAOAAAAAAAAAAAACgAAAEIASABDAEYARwADAAAAAAAA/7UAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAgABAQERQUxJQkFCQUZvbnQtQm9sZAABAQEg+A8A+CAB+CEC+BgEtPtc+HT5tAX3KA/3UBGcHAZWEgAHAQENExoiKTpLbmluZS4wMDEuMDAxbW9uZXkudW5pRkYxQm5pbmUuMDAxdW5pRkYxQWNvcHlyaWdodCBtaXNzaW5nQUxJQkFCQSBGb250IEJvbGQAAAEAAQAAIhkAQhkAEQkBhwABigAADQAADwAAZAABiAABiwABiQAADgAASQIAAQCtAK4ArwCwALEAsgCzALQAtQC2ALcAuAC5ALoAuwC8AL0AvgC/AMAAwQDCAMMAxADFAMYAxwDIAMkAygDLAMwAzQDOAM8A0ADRANIA0wDUANUA1gDXANgA2QDaANsA3ADdAN4A3wDgAOEA4gFDAVoBqwIsAloCuAMcAzkDzwQ4BDoEPARRBFMEVQTNBOIE8QUEmPtc0Ky6rKKsuqzHrKPDoa2irLCspq2vraWssKzOAejVrKytrKzYA/gu+bQV+9H+fPfRBj76ORVqSWbNavs6rM2wSqwH7vsVFUXNafs68wfNaRVqZ6wG704VaklFJ6zNsEmsB/c6TxUn+zqt9xnNB6z7DhX7Bfs69wWsO++6anRpwwfv+0EV+wX7OvcFB/cZahUnXO8GrFMVamsHRVwF8Wr7OqwG0boFRawGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OrIr5UQH3OPdUA/ebihVmaZSdbB9Mr2TL0xr3vgewlK2eqh7Kr86y1BuvrIJ5qh/HZrJIQhr7vgdngmp5bR5OZ0tkQxv46ARUX2FSH/u+B1a5YMDAs7TCHve+B8RjtVYeDnD4utkB93HzA/cL+QgVPfH8vPP5UgcOrIn5UgG++DYD+GmJFfw28wb3svfUBZ2glKSnGsNduFBWXF1UiB4ijgaMsJWsnqoIyLHMstYbsa6Ceawfy2ezSUAaVndXZ2Me+2/7jQX3pwYOrIvy92Tz90ryEr/zM/L3SvMu8hPy+B/3/xUT7LCwpMDDGq6CrHqoHsZnTK5DG2lrg3puH09pZk5EGobykAe4tba6vrViXFZiYlcedyOfBhPyxLpdUlJcW1JSXLvEH5ojfAdllGiebB5LsM5j1xuwrpSeqx/KsLPO1xrKcMNerx4OwPL1Affi8gP4dPdlFWD4fPshBvuJ/HkF+wH3ryPy87YH+8z1Ffc69+QF++QHDrb3ZNf3ZfAB9zX3YwP3nRZlaJSebB9LsGPO1xrzBlK6XMTEubrEHtcHxF26UlJcXFIeI/g0+BYh+677JAaorK2ZsBuwroJ4qx/LZrNHPxo/B2aCaHhrHktmR2NAGw6si/X3b/IBufX3b/ID95n4QBWAg4uKhh/3EfelBfsHBvtK/CMFfnCFbm0aZJVnnmoeSrLPYdobsq6Vnqwfy7K10dgasoGueKwey2RHtT4b+9YETlu7yMe8vcfHvVlPT1laTx8OmIr5UQG/+B8D93iKFfsIBvdo+OYF+6T2+B8oBg6iifL3bPX3QPEStvNB8vc/8jXxE/L4EvgHFRPss7Cnu78arYOreqgexWpNr0YbaWyDem4fUmlmTUcaXqBftGAeE/JWYmROSxpklWieax5Ksc9i2BuxrpWerB/LsbTP2BrHaMVath4T7PsN93QVu7FjXFtlZltcZbC7urGzuh8T8oX8ghVPW7zHx7q6yMa9W1BPWVpQHw6i96Tz92/0AbTz93DzA/hp+HkVsIGveKwezmNFtUAbZGeBeGofSmNiRT8aZJVnnmseSrHPYtoboAb7EvukBfcHBvdL+CEFmaySqaQa+9gWxry+yJ6dhoGcHq12oWZmGk5YW1BMXLnKHg4gCiEK+11L91IlCvdiyhWtb6hpJgoeJAoOIQogCqz3pe/3b/UBufX3bfQD+G74dxWyga94rB7NZEW0PhtlaIF4ah9KY2FFPxo7tkTPZh6MjIqKjB+TiJCIjYoIjgaCoKGHoRuanY6QoB+IgfsB+6QF9wcG9y/4IgWYppGnqhr7a/sCFVBbvMjHu7zGyLxbTk5aWk4fDvtd+AojCoz7jBUmCh8kCq1vqGkeDvtdi/cS94wjCvwKBCIKDiD3ru8BvPeuA7z4EhUn967vBw4eoDf/DAmLDAv47BT4exWcEwAHAQFBXW97ipCarPcv8+7yAfdl8gP4aPf6FfIjB+r3gwUiBi77gwWHBjH3gwUkBuP7gwUnJPcxKPsxI/cx+y/y9y/3MPP7MO4GDvtdi/cSJQr3JBZkcqOzsKSksrCkcWdlcnFmHw6up6eurm+naGhvb2hop2+uHwv3EiUK9yP4ChUiCgt3SgWxBrnmBZGVj5eZGgsB2/cSAwtobm5paqBzqoYLAAABAAAAAAAAAAAAAA==)
        format('woff2')}.content__container.svelte-95x526{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif}.content__container.unClickable.svelte-95x526{pointer-events:none !important}.content__container.unClickable.svelte-95x526 *{pointer-events:none !important}*{-webkit-tap-highlight-color:transparent}.content__wrapper.svelte-95x526{pointer-events:none;width:100%;height:100%}.withAnimation.svelte-95x526{transition:opacity 0.3s linear}.content__container.hide.svelte-95x526{opacity:0;pointer-events:none}.content__container.hide.svelte-95x526 *{pointer-events:none !important}.content__container.disable.svelte-95x526{display:none}.content__container.hide.svelte-95x526 *{pointer-events:none}.content.svelte-95x526{position:relative;width:100%;height:100%;font-size:0.75rem;line-height:1.125rem;color:#fff}.content.svelte-95x526:not(.unfolded){pointer-events:none}.content.svelte-95x526:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-95x526{pointer-events:auto}`)}function MA(_u){let $u,Bu;return $u=new yA({props:{tag:Ge(_u[1])}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&2&&(Ou.tag=Ge(Ru[1])),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function zA(_u){let $u,Bu;return $u=new xA({props:{tag:Ge(_u[1])}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&2&&(Ou.tag=Ge(Ru[1])),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function OA(_u){let $u,Bu;return $u=new lA({props:{tag:Ge(_u[1])}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&2&&(Ou.tag=Ge(Ru[1])),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function jA(_u){let $u,Bu;return $u=new gA({props:{tag:Ge(_u[1])}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&2&&(Ou.tag=Ge(Ru[1])),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function BA(_u){let $u,Bu;return $u=new sA({props:{tag:Ge(_u[1])}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&2&&(Ou.tag=Ge(Ru[1])),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function RA(_u){let $u,Bu;return $u=new gv({props:{tag:Ge(_u[1])}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&2&&(Ou.tag=Ge(Ru[1])),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function HA(_u){let $u,Bu;return $u=new DA({props:{tag:Ge(_u[1])}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&2&&(Ou.tag=Ge(Ru[1])),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function FA(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu,Vu,Uu;const Gu=[HA,RA,BA,jA,OA,zA,MA],zu=[];function Hu(ju,Qu){return ju[1].element?0:ju[1].contentType===ht.Text?1:ju[1].contentType===ht.ImageText?2:ju[1].contentType===ht.Audio?3:ju[1].contentType===ht.Marketing?4:ju[1].contentType===ht.Link?5:ju[1].contentType===ht.MediaPlane?6:-1}return~(Lu=Hu(_u))&&(Ou=zu[Lu]=Gu[Lu](_u)),{c(){var ju,Qu,Xu;$u=Q("div"),Bu=Q("div"),Ru=Q("div"),Ou&&Ou.c(),C(Ru,"class","content svelte-95x526"),ie(Ru,"unfolded",(ju=_u[1].state)==null?void 0:ju.unfolded),C(Bu,"class","content__wrapper svelte-95x526"),C($u,"class","content__container svelte-95x526"),C($u,"data-id",Fu=_u[1].id),ie($u,"disable",_u[1].enabled===!1||((Qu=_u[1].temporaryState)==null?void 0:Qu.visible)===!1),ie($u,"hide",!_u[3].visible||!_u[3].enabled||!_u[4].visible||!((Xu=_u[1].state)!=null&&Xu.visible)),ie($u,"withAnimation",_u[0]),ie($u,"unClickable",_u[1].clickable===!1),W($u,"width",_u[1].pointType==="PointTag"?0:"100%"),W($u,"height",_u[1].pointType==="PointTag"?0:"100%")},m(ju,Qu){N(ju,$u,Qu),_($u,Bu),_(Bu,Ru),~Lu&&zu[Lu].m(Ru,null),Nu=!0,Vu||(Uu=Oe($u,"click",Po(_u[13])),Vu=!0)},p(ju,[Qu]){var Xu,Ku,Wu;let qu=Lu;Lu=Hu(ju),Lu===qu?~Lu&&zu[Lu].p(ju,Qu):(Ou&&(ve(),F(zu[qu],1,1,()=>{zu[qu]=null}),be()),~Lu?(Ou=zu[Lu],Ou?Ou.p(ju,Qu):(Ou=zu[Lu]=Gu[Lu](ju),Ou.c()),M(Ou,1),Ou.m(Ru,null)):Ou=null),(!Nu||Qu&2)&&ie(Ru,"unfolded",(Xu=ju[1].state)==null?void 0:Xu.unfolded),(!Nu||Qu&2&&Fu!==(Fu=ju[1].id))&&C($u,"data-id",Fu),(!Nu||Qu&2)&&ie($u,"disable",ju[1].enabled===!1||((Ku=ju[1].temporaryState)==null?void 0:Ku.visible)===!1),(!Nu||Qu&26)&&ie($u,"hide",!ju[3].visible||!ju[3].enabled||!ju[4].visible||!((Wu=ju[1].state)!=null&&Wu.visible)),(!Nu||Qu&1)&&ie($u,"withAnimation",ju[0]),(!Nu||Qu&2)&&ie($u,"unClickable",ju[1].clickable===!1),Qu&2&&W($u,"width",ju[1].pointType==="PointTag"?0:"100%"),Qu&2&&W($u,"height",ju[1].pointType==="PointTag"?0:"100%")},i(ju){Nu||(M(Ou),Nu=!0)},o(ju){F(Ou),Nu=!1},d(ju){ju&&H($u),~Lu&&zu[Lu].d(),Vu=!1,Uu()}}}function NA(_u,$u,Bu){let Ru,Lu,Ou,Fu;var Nu,Vu;let{withAnimation:Uu=!1}=$u,{tag:Gu}=$u,{hooks:zu}=$u,{state:Hu}=$u,{mediaStore:ju}=$u,{temporaryState:Qu}=$u;$s("hooks",zu),$s("mediaStore",ju);let Xu,Ku;function Wu(Yu){Yu?zu.emit("exposure",{id:Fu,type:"start"}):zu.emit("exposure",{id:Fu,type:"end"})}const qu=Yu=>zu.emit("click",{event:Yu,target:"TagContent",tag:Gu});return _u.$$set=Yu=>{"withAnimation"in Yu&&Bu(0,Uu=Yu.withAnimation),"tag"in Yu&&Bu(1,Gu=Yu.tag),"hooks"in Yu&&Bu(2,zu=Yu.hooks),"state"in Yu&&Bu(3,Hu=Yu.state),"mediaStore"in Yu&&Bu(5,ju=Yu.mediaStore),"temporaryState"in Yu&&Bu(4,Qu=Yu.temporaryState)},_u.$$.update=()=>{_u.$$.dirty&66&&Bu(11,Ru=Bu(6,Nu=Gu.state)===null||Nu===void 0?void 0:Nu.unfolded),_u.$$.dirty&130&&Bu(10,Lu=Bu(7,Vu=Gu.state)===null||Vu===void 0?void 0:Vu.visible),_u.$$.dirty&1048&&Bu(12,Ou=Hu.visible&&Qu.visible&&Lu),_u.$$.dirty&2&&(Fu=Gu.id),_u.$$.dirty&4096&&Wu(Ou),_u.$$.dirty&3842&&Gu.hooks&&(Ru!==void 0&&Ru!==Ku&&(Bu(9,Ku=Ru),Ru?Gu.hooks.emit("unfolded"):Gu.hooks.emit("folded")),Lu!==void 0&&Lu!==Xu&&(Bu(8,Xu=Lu),Lu?Gu.hooks.emit("show"):Gu.hooks.emit("hide")))},[Uu,Gu,zu,Hu,Qu,ju,Nu,Vu,Xu,Ku,Lu,Ru,Ou,qu]}class ku extends fe{constructor($u){super(),de(this,$u,NA,FA,ue,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:5,temporaryState:4},LA)}}function GA(_u){me(_u,"svelte-fuismw",".point.svelte-fuismw.svelte-fuismw{pointer-events:none;width:1.5rem;height:1.5rem}.small-point.svelte-fuismw.svelte-fuismw,.big-point.svelte-fuismw.svelte-fuismw{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-fuismw.svelte-fuismw{background-color:rgba(0, 0, 0, 0.1)}.folded.point.svelte-fuismw.svelte-fuismw{animation:svelte-fuismw-breathing 2s linear infinite}.big-point.svelte-fuismw.svelte-fuismw::before,.big-point.svelte-fuismw.svelte-fuismw::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-fuismw.svelte-fuismw::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=)}.folded.svelte-fuismw .big-point.svelte-fuismw::before{animation:svelte-fuismw-rotate 2s linear infinite}.big-point.svelte-fuismw.svelte-fuismw::after{position:absolute;width:1rem;height:1rem;background-image:var(--iconUrl)}.small-point.svelte-fuismw.svelte-fuismw::before{content:'';display:block;position:absolute;pointer-events:none;width:0.25rem;height:0.25rem;border-radius:100%;background-color:white}.folded.svelte-fuismw .big-point.svelte-fuismw{opacity:1;scale:1}.unfolded.svelte-fuismw .big-point.svelte-fuismw{opacity:0;scale:0}.folded.svelte-fuismw .small-point.svelte-fuismw{opacity:0;scale:6}.unfolded.svelte-fuismw .small-point.svelte-fuismw{opacity:1;scale:1}@keyframes svelte-fuismw-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes svelte-fuismw-breathing{0%{transform:scale(1)}25%{transform:scale(0.9)}50%{transform:scale(1)}}")}function QA(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu;return Bu=new vt({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){$u=Q("div"),re(Bu.$$.fragment),Ru=q(),Lu=Q("div"),Ou=q(),Fu=Q("div"),C(Lu,"class","small-point svelte-fuismw"),W(Lu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),C(Fu,"class","big-point svelte-fuismw"),W(Fu,"--iconUrl","url("+_u[1]+")"),W(Fu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),C($u,"class","point svelte-fuismw"),ie($u,"folded",_u[3]),ie($u,"unfolded",_u[0])},m(Vu,Uu){N(Vu,$u,Uu),se(Bu,$u,null),_($u,Ru),_($u,Lu),_($u,Ou),_($u,Fu),Nu=!0},p(Vu,[Uu]){Uu&12&&W(Lu,"transition-delay",Vu[3]?Vu[2]+"ms":"0ms"),(!Nu||Uu&2)&&W(Fu,"--iconUrl","url("+Vu[1]+")"),Uu&12&&W(Fu,"transition-delay",Vu[3]?Vu[2]+"ms":"0ms"),(!Nu||Uu&8)&&ie($u,"folded",Vu[3]),(!Nu||Uu&1)&&ie($u,"unfolded",Vu[0])},i(Vu){Nu||(M(Bu.$$.fragment,Vu),Nu=!0)},o(Vu){F(Bu.$$.fragment,Vu),Nu=!1},d(Vu){Vu&&H($u),oe(Bu)}}}function _A(_u,$u,Bu){let Ru,{unfolded:Lu}=$u,{iconUrl:Ou}=$u,{foldDelay:Fu=800}=$u;return _u.$$set=Nu=>{"unfolded"in Nu&&Bu(0,Lu=Nu.unfolded),"iconUrl"in Nu&&Bu(1,Ou=Nu.iconUrl),"foldDelay"in Nu&&Bu(2,Fu=Nu.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Bu(3,Ru=!Lu)},[Lu,Ou,Fu,Ru]}class WA extends fe{constructor($u){super(),de(this,$u,_A,QA,ue,{unfolded:0,iconUrl:1,foldDelay:2},GA)}}function XA(_u){me(_u,"svelte-jzvcn0",".point.svelte-jzvcn0.svelte-jzvcn0{pointer-events:none;width:1rem;height:1rem}.small-point.svelte-jzvcn0.svelte-jzvcn0,.big-point.svelte-jzvcn0.svelte-jzvcn0{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-jzvcn0.svelte-jzvcn0::before,.big-point.svelte-jzvcn0.svelte-jzvcn0::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-jzvcn0.svelte-jzvcn0::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=);background-size:contain;background-repeat:no-repeat}.small-point.svelte-jzvcn0.svelte-jzvcn0::before{content:'';display:block;position:absolute;pointer-events:none;width:0.375rem;height:0.375rem;border-radius:100%;background-color:white}.unfolded.svelte-jzvcn0 .big-point.svelte-jzvcn0{opacity:0;transform:scale(0)}.folded.svelte-jzvcn0 .big-point.svelte-jzvcn0{opacity:1;transform:scale(1)}.unfolded.svelte-jzvcn0 .small-point.svelte-jzvcn0{transform:scale(0.6)}.folded.svelte-jzvcn0 .small-point.svelte-jzvcn0{transform:scale(1)}")}function YA(_u){let $u,Bu,Ru,Lu,Ou,Fu,Nu;return Bu=new vt({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){$u=Q("div"),re(Bu.$$.fragment),Ru=q(),Lu=Q("div"),Ou=q(),Fu=Q("div"),C(Lu,"class","small-point svelte-jzvcn0"),W(Lu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),C(Fu,"class","big-point svelte-jzvcn0"),W(Fu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),C($u,"class","point svelte-jzvcn0"),ie($u,"unfolded",_u[0]),ie($u,"folded",_u[2])},m(Vu,Uu){N(Vu,$u,Uu),se(Bu,$u,null),_($u,Ru),_($u,Lu),_($u,Ou),_($u,Fu),Nu=!0},p(Vu,[Uu]){Uu&6&&W(Lu,"transition-delay",Vu[2]?Vu[1]+"ms":"0ms"),Uu&6&&W(Fu,"transition-delay",Vu[2]?Vu[1]+"ms":"0ms"),(!Nu||Uu&1)&&ie($u,"unfolded",Vu[0]),(!Nu||Uu&4)&&ie($u,"folded",Vu[2])},i(Vu){Nu||(M(Bu.$$.fragment,Vu),Nu=!0)},o(Vu){F(Bu.$$.fragment,Vu),Nu=!1},d(Vu){Vu&&H($u),oe(Bu)}}}function UA(_u,$u,Bu){let Ru,{unfolded:Lu}=$u,{foldDelay:Ou=800}=$u;return _u.$$set=Fu=>{"unfolded"in Fu&&Bu(0,Lu=Fu.unfolded),"foldDelay"in Fu&&Bu(1,Ou=Fu.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Bu(2,Ru=!Lu)},[Lu,Ou,Ru]}class VA extends fe{constructor($u){super(),de(this,$u,UA,YA,ue,{unfolded:0,foldDelay:1},XA)}}function ZA(_u){me(_u,"svelte-8en2lj",".point-click-helper.svelte-8en2lj{position:absolute;width:2.5rem;height:2.5rem;left:50%;top:50%;transform:translate(-50%, -50%)}")}function Hl(_u){let $u,Bu,Ru=_u[0].contentType!==ht.Link&&Fl(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,Ou){Lu[0].contentType!==ht.Link?Ru?(Ru.p(Lu,Ou),Ou&1&&M(Ru,1)):(Ru=Fl(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function Fl(_u){let $u,Bu,Ru,Lu,Ou,Fu;const Nu=[qA,JA],Vu=[];function Uu(Gu,zu){var Hu,ju,Qu,Xu;return((ju=(Hu=Gu[0].style)==null?void 0:Hu.point)==null?void 0:ju.style)==="CustomIcon"&&((Xu=(Qu=Gu[0].style)==null?void 0:Qu.point)==null?void 0:Xu.iconUrl)?0:1}return Ru=Uu(_u),Lu=Vu[Ru]=Nu[Ru](_u),{c(){$u=Q("div"),Bu=q(),Lu.c(),Ou=Ce(),C($u,"class","point-click-helper svelte-8en2lj")},m(Gu,zu){N(Gu,$u,zu),N(Gu,Bu,zu),Vu[Ru].m(Gu,zu),N(Gu,Ou,zu),Fu=!0},p(Gu,zu){let Hu=Ru;Ru=Uu(Gu),Ru===Hu?Vu[Ru].p(Gu,zu):(ve(),F(Vu[Hu],1,1,()=>{Vu[Hu]=null}),be(),Lu=Vu[Ru],Lu?Lu.p(Gu,zu):(Lu=Vu[Ru]=Nu[Ru](Gu),Lu.c()),M(Lu,1),Lu.m(Ou.parentNode,Ou))},i(Gu){Fu||(M(Lu),Fu=!0)},o(Gu){F(Lu),Fu=!1},d(Gu){Gu&&H($u),Gu&&H(Bu),Vu[Ru].d(Gu),Gu&&H(Ou)}}}function JA(_u){let $u,Bu;return $u=new VA({props:{unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&1&&(Ou.unfolded=Ru[0].state.unfolded),Lu&2&&(Ou.foldDelay=Ru[1]),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function qA(_u){let $u,Bu;return $u=new WA({props:{iconUrl:_u[0].style.point.iconUrl,unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&1&&(Ou.iconUrl=Ru[0].style.point.iconUrl),Lu&1&&(Ou.unfolded=Ru[0].state.unfolded),Lu&2&&(Ou.foldDelay=Ru[1]),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function KA(_u){var $u,Bu,Ru;let Lu,Ou,Fu=(($u=_u[0].pointTagStyle)==null?void 0:$u.leftPercent)&&((Bu=_u[0].pointTagStyle)==null?void 0:Bu.topPercent)&&_u[0].enabled!==!1&&_u[0].state&&((Ru=_u[0].temporaryState)==null?void 0:Ru.visible)!==!1&&Hl(_u);return{c(){Fu&&Fu.c(),Lu=Ce()},m(Nu,Vu){Fu&&Fu.m(Nu,Vu),N(Nu,Lu,Vu),Ou=!0},p(Nu,[Vu]){var Uu,Gu,zu;((Uu=Nu[0].pointTagStyle)==null?void 0:Uu.leftPercent)&&((Gu=Nu[0].pointTagStyle)==null?void 0:Gu.topPercent)&&Nu[0].enabled!==!1&&Nu[0].state&&((zu=Nu[0].temporaryState)==null?void 0:zu.visible)!==!1?Fu?(Fu.p(Nu,Vu),Vu&1&&M(Fu,1)):(Fu=Hl(Nu),Fu.c(),M(Fu,1),Fu.m(Lu.parentNode,Lu)):Fu&&(ve(),F(Fu,1,1,()=>{Fu=null}),be())},i(Nu){Ou||(M(Fu),Ou=!0)},o(Nu){F(Fu),Ou=!1},d(Nu){Fu&&Fu.d(Nu),Nu&&H(Lu)}}}function $A(_u,$u,Bu){let Ru;var Lu,Ou;let{tag:Fu}=$u;return _u.$$set=Nu=>{"tag"in Nu&&Bu(0,Fu=Nu.tag)},_u.$$.update=()=>{_u.$$.dirty&13&&Bu(1,Ru=Bu(3,Ou=Bu(2,Lu=Fu.style)===null||Lu===void 0?void 0:Lu.foldedPointDelay)!==null&&Ou!==void 0?Ou:Fu.contentType===ht.Marketing?600:void 0)},[Fu,Ru,Lu,Ou]}class ey extends fe{constructor($u){super(),de(this,$u,$A,KA,ue,{tag:0},ZA)}}function ty(_u){me(_u,"svelte-1vzhbu2",".wrapper.svelte-1vzhbu2{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto}.point.svelte-1vzhbu2{-webkit-tap-highlight-color:transparent;position:absolute;transform:translate(-50%, -50%);left:50%;top:50%}")}function Nl(_u){let $u,Bu;return $u=new ku({props:{mediaStore:_u[4],withAnimation:_u[0],tag:Ge(_u[1]),hooks:_u[2],state:_u[3],temporaryState:_u[5]}}),{c(){re($u.$$.fragment)},m(Ru,Lu){se($u,Ru,Lu),Bu=!0},p(Ru,Lu){const Ou={};Lu&16&&(Ou.mediaStore=Ru[4]),Lu&1&&(Ou.withAnimation=Ru[0]),Lu&2&&(Ou.tag=Ge(Ru[1])),Lu&4&&(Ou.hooks=Ru[2]),Lu&8&&(Ou.state=Ru[3]),Lu&32&&(Ou.temporaryState=Ru[5]),$u.$set(Ou)},i(Ru){Bu||(M($u.$$.fragment,Ru),Bu=!0)},o(Ru){F($u.$$.fragment,Ru),Bu=!1},d(Ru){oe($u,Ru)}}}function Gl(_u){let $u,Bu,Ru,Lu,Ou;return Bu=new ey({props:{tag:_u[1]}}),{c(){$u=Q("div"),re(Bu.$$.fragment),C($u,"class","point svelte-1vzhbu2")},m(Fu,Nu){N(Fu,$u,Nu),se(Bu,$u,null),Ru=!0,Lu||(Ou=Oe($u,"click",Po(_u[11])),Lu=!0)},p(Fu,Nu){const Vu={};Nu&2&&(Vu.tag=Fu[1]),Bu.$set(Vu)},i(Fu){Ru||(M(Bu.$$.fragment,Fu),Ru=!0)},o(Fu){F(Bu.$$.fragment,Fu),Ru=!1},d(Fu){Fu&&H($u),oe(Bu),Lu=!1,Ou()}}}function ny(_u){var $u,Bu;let Ru,Lu,Ou,Fu,Nu=_u[1].dimensionType===wt.Two&&Nl(_u),Vu=_u[1].pointType===ut.PointTag&&((Bu=($u=_u[1].style)==null?void 0:$u.point)==null?void 0:Bu.style)!=="noPoint"&&Gl(_u);return{c(){Ru=Q("div"),Nu&&Nu.c(),Lu=q(),Vu&&Vu.c(),C(Ru,"class","wrapper svelte-1vzhbu2"),C(Ru,"data-id",Ou=_u[1].id),ie(Ru,"hide",_u[10]),ie(Ru,"unfolded",_u[6]),W(Ru,"left",_u[9]),W(Ru,"top",_u[8]),W(Ru,"z-index",_u[7])},m(Uu,Gu){N(Uu,Ru,Gu),Nu&&Nu.m(Ru,null),_(Ru,Lu),Vu&&Vu.m(Ru,null),Fu=!0},p(Uu,[Gu]){var zu,Hu;Uu[1].dimensionType===wt.Two?Nu?(Nu.p(Uu,Gu),Gu&2&&M(Nu,1)):(Nu=Nl(Uu),Nu.c(),M(Nu,1),Nu.m(Ru,Lu)):Nu&&(ve(),F(Nu,1,1,()=>{Nu=null}),be()),Uu[1].pointType===ut.PointTag&&((Hu=(zu=Uu[1].style)==null?void 0:zu.point)==null?void 0:Hu.style)!=="noPoint"?Vu?(Vu.p(Uu,Gu),Gu&2&&M(Vu,1)):(Vu=Gl(Uu),Vu.c(),M(Vu,1),Vu.m(Ru,null)):Vu&&(ve(),F(Vu,1,1,()=>{Vu=null}),be()),(!Fu||Gu&2&&Ou!==(Ou=Uu[1].id))&&C(Ru,"data-id",Ou),(!Fu||Gu&1024)&&ie(Ru,"hide",Uu[10]),(!Fu||Gu&64)&&ie(Ru,"unfolded",Uu[6]),Gu&512&&W(Ru,"left",Uu[9]),Gu&256&&W(Ru,"top",Uu[8]),Gu&128&&W(Ru,"z-index",Uu[7])},i(Uu){Fu||(M(Nu),M(Vu),Fu=!0)},o(Uu){F(Nu),F(Vu),Fu=!1},d(Uu){Uu&&H(Ru),Nu&&Nu.d(),Vu&&Vu.d()}}}function iy(_u,$u,Bu){let Ru,Lu,Ou,Fu,Nu,Vu;var Uu,Gu,zu,Hu;let{withAnimation:ju=!1}=$u,{tag:Qu}=$u,{hooks:Xu}=$u,{state:Ku}=$u,{mediaStore:Wu}=$u,{temporaryState:qu}=$u,Yu,Zu=!1;function _h(ip){Yu!==void 0&&clearTimeout(Yu),Zu=!0,Yu=setTimeout(()=>{Zu=!1},800)}const ep=ip=>{Zu||Xu.emit("click",{event:ip,target:"TagPoint",tag:Qu})};return _u.$$set=ip=>{"withAnimation"in ip&&Bu(0,ju=ip.withAnimation),"tag"in ip&&Bu(1,Qu=ip.tag),"hooks"in ip&&Bu(2,Xu=ip.hooks),"state"in ip&&Bu(3,Ku=ip.state),"mediaStore"in ip&&Bu(4,Wu=ip.mediaStore),"temporaryState"in ip&&Bu(5,qu=ip.temporaryState)},_u.$$.update=()=>{_u.$$.dirty&4098&&Bu(16,Ru=Bu(12,Uu=Qu.state)===null||Uu===void 0?void 0:Uu.visible),_u.$$.dirty&65536&&Bu(10,Lu=!Ru),_u.$$.dirty&8194&&Bu(6,Ou=Bu(13,Gu=Qu.state)===null||Gu===void 0?void 0:Gu.unfolded),_u.$$.dirty&16386&&Bu(9,Fu=(Bu(14,zu=Qu.pointTagStyle)===null||zu===void 0?void 0:zu.leftPercent)+"%"),_u.$$.dirty&32770&&Bu(8,Nu=(Bu(15,Hu=Qu.pointTagStyle)===null||Hu===void 0?void 0:Hu.topPercent)+"%"),_u.$$.dirty&2&&Bu(7,Vu=Qu.contentType===ht.Link?1:0),_u.$$.dirty&64&&_h()},[ju,Qu,Xu,Ku,Wu,qu,Ou,Vu,Nu,Fu,Lu,ep,Uu,Gu,zu,Hu,Ru]}class sy extends fe{constructor($u){super(),de(this,$u,iy,ny,ue,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:4,temporaryState:5},ty)}}function oy(_u){me(_u,"svelte-1eci49s",".tag--container.svelte-1eci49s{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tag.hide.svelte-1eci49s{display:none}.withAnimation.svelte-1eci49s{transition:opacity 0.3s linear}.tag--container.hide.svelte-1eci49s{opacity:0;pointer-events:none}.tag--container.hide.svelte-1eci49s *{pointer-events:none}")}function Ql(_u,$u,Bu){const Ru=_u.slice();return Ru[6]=$u[Bu],Ru}function _l(_u){let $u,Bu=[],Ru=new Map,Lu,Ou=_u[1];const Fu=Nu=>Nu[6].id;for(let Nu=0;Nu<Ou.length;Nu+=1){let Vu=Ql(_u,Ou,Nu),Uu=Fu(Vu);Ru.set(Uu,Bu[Nu]=Wl(Uu,Vu))}return{c(){$u=Q("div");for(let Nu=0;Nu<Bu.length;Nu+=1)Bu[Nu].c();C($u,"class","tag--container svelte-1eci49s"),ie($u,"hide",!_u[3].visible||!_u[5].visible),ie($u,"withAnimation",_u[0])},m(Nu,Vu){N(Nu,$u,Vu);for(let Uu=0;Uu<Bu.length;Uu+=1)Bu[Uu].m($u,null);Lu=!0},p(Nu,Vu){Vu&63&&(Ou=Nu[1],ve(),Bu=gt(Bu,Vu,Fu,1,Nu,Ou,Ru,$u,Gt,Wl,null,Ql),be()),(!Lu||Vu&40)&&ie($u,"hide",!Nu[3].visible||!Nu[5].visible),(!Lu||Vu&1)&&ie($u,"withAnimation",Nu[0])},i(Nu){if(!Lu){for(let Vu=0;Vu<Ou.length;Vu+=1)M(Bu[Vu]);Lu=!0}},o(Nu){for(let Vu=0;Vu<Bu.length;Vu+=1)F(Bu[Vu]);Lu=!1},d(Nu){Nu&&H($u);for(let Vu=0;Vu<Bu.length;Vu+=1)Bu[Vu].d()}}}function Wl(_u,$u){let Bu,Ru,Lu,Ou;const Fu=[{tag:$u[6],hooks:$u[2],state:$u[3],mediaStore:$u[4],temporaryState:$u[5],withAnimation:$u[0]}];let Nu={};for(let Vu=0;Vu<Fu.length;Vu+=1)Nu=ze(Nu,Fu[Vu]);return Ru=new sy({props:Nu}),{key:_u,first:null,c(){var Vu,Uu,Gu;Bu=Q("div"),re(Ru.$$.fragment),Lu=q(),C(Bu,"class","tag svelte-1eci49s"),ie(Bu,"hide",!((Vu=$u[6].pointTagStyle)!=null&&Vu.leftPercent)||!((Uu=$u[6].pointTagStyle)!=null&&Uu.topPercent)||$u[6].enabled===!1||!$u[6].state||((Gu=$u[6].temporaryState)==null?void 0:Gu.visible)===!1),this.first=Bu},m(Vu,Uu){N(Vu,Bu,Uu),se(Ru,Bu,null),_(Bu,Lu),Ou=!0},p(Vu,Uu){var Gu,zu,Hu;$u=Vu;const ju=Uu&63?Ye(Fu,[{tag:$u[6],hooks:$u[2],state:$u[3],mediaStore:$u[4],temporaryState:$u[5],withAnimation:$u[0]}]):{};Ru.$set(ju),(!Ou||Uu&2)&&ie(Bu,"hide",!((Gu=$u[6].pointTagStyle)!=null&&Gu.leftPercent)||!((zu=$u[6].pointTagStyle)!=null&&zu.topPercent)||$u[6].enabled===!1||!$u[6].state||((Hu=$u[6].temporaryState)==null?void 0:Hu.visible)===!1)},i(Vu){Ou||(M(Ru.$$.fragment,Vu),Ou=!0)},o(Vu){F(Ru.$$.fragment,Vu),Ou=!1},d(Vu){Vu&&H(Bu),oe(Ru)}}}function ry(_u){let $u,Bu,Ru=_u[3].enabled&&_l(_u);return{c(){Ru&&Ru.c(),$u=Ce()},m(Lu,Ou){Ru&&Ru.m(Lu,Ou),N(Lu,$u,Ou),Bu=!0},p(Lu,[Ou]){Lu[3].enabled?Ru?(Ru.p(Lu,Ou),Ou&8&&M(Ru,1)):(Ru=_l(Lu),Ru.c(),M(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),F(Ru,1,1,()=>{Ru=null}),be())},i(Lu){Bu||(M(Ru),Bu=!0)},o(Lu){F(Ru),Bu=!1},d(Lu){Ru&&Ru.d(Lu),Lu&&H($u)}}}function ay(_u,$u,Bu){let{withAnimation:Ru=!1}=$u,{tags:Lu=[]}=$u,{hooks:Ou}=$u,{state:Fu}=$u,{mediaStore:Nu}=$u,{temporaryState:Vu}=$u;return _u.$$set=Uu=>{"withAnimation"in Uu&&Bu(0,Ru=Uu.withAnimation),"tags"in Uu&&Bu(1,Lu=Uu.tags),"hooks"in Uu&&Bu(2,Ou=Uu.hooks),"state"in Uu&&Bu(3,Fu=Uu.state),"mediaStore"in Uu&&Bu(4,Nu=Uu.mediaStore),"temporaryState"in Uu&&Bu(5,Vu=Uu.temporaryState)},[Ru,Lu,Ou,Fu,Nu,Vu]}class ly extends fe{constructor($u){super(),de(this,$u,ay,ry,ue,{withAnimation:0,tags:1,hooks:2,state:3,mediaStore:4,temporaryState:5},oy)}}const cy={globalConfig:{initialState:{},visibleConfig:{visibleDistance:{max:5},angleRange:{min:-45,max:45}},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"}},tag3DConfig:{ratio:.0035}},contentTypeConfig:{"Any-Link-Any":{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},"Any-Marketing-Any":{unfoldedConfig:void 0},"3D-MediaPlane-PlaneTag":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{alwaysShowWhenMovePano:!0,angleRange:void 0,visibleDistance:void 0}}}};class uy extends us{constructor($u){super($u),v(this,"tagCacheByPanoIndex",{})}getCaches({panoIndex:$u,id:Bu,key:Ru}){var Lu,Ou,Fu,Nu;const{five:Vu}=this,Uu=(Lu=Vu.panoIndex)!=null?Lu:$u;if(Uu===void 0)throw new Error(`TagCacheController getCache(): fivePanoIndex is ${Uu}`);const Gu=`${(Fu=(Ou=Vu.work)==null?void 0:Ou.workCode)!=null?Fu:Vu.model.uuid}-${Uu}`;let zu=this.tagCacheByPanoIndex[Gu];return zu||(zu=new Map,this.tagCacheByPanoIndex[Gu]=zu),Bu===void 0?zu:Ru===void 0?zu.get(Bu)||(zu.set(Bu,{}),zu.get(Bu)):(Nu=zu.get(Bu))==null?void 0:Nu[Ru]}clearCache(){this.tagCacheByPanoIndex={}}}class dy extends uy{constructor($u){super($u),v(this,"tags",[]),v(this,"config",cy),v(this,"raycaster",new Raycaster)}getTagById($u){const Bu=this.tags.find(Ru=>Ru.id===$u);if(!Bu){console.error(`getTagById(): tag is ${Bu}, id is ${$u}`);return}return Bu}changeConfig($u,Bu=!0){Bu?this.config=Pt.exports({},this.config,$u):this.config=$u,this.clearCache()}changeGlobalConfig($u,Bu=!0){Bu?this.config.globalConfig=Pt.exports({},this.config.globalConfig,$u):this.config.globalConfig=$u,this.clearCache()}changeContentTypeConfig($u,Bu,Ru=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),Ru?this.config.contentTypeConfig[$u]=Pt.exports({},this.config.contentTypeConfig[$u],Bu):this.config.contentTypeConfig[$u]=Bu,this.clearCache()}getVisibleByPanoIndex($u,Bu){var Ru;const Lu=this.getCaches({panoIndex:Bu,id:$u.id}),Ou=(Ru=this.five.panoIndex)!=null?Ru:Bu;if(Lu.visible!==void 0)return Lu.visible;{const Fu=(()=>{var Nu,Vu,Uu,Gu,zu;const Hu=(Nu=this.getTagConfig($u).visibleConfig)!=null?Nu:{},ju=this.getDistance($u);if(typeof Hu=="function")return Hu(this.five,{tag:$u,distance:ju});if(Hu.keep==="hidden")return!1;if(Hu.keep==="visible")return!0;if(Hu.visiblePanoIndex!==void 0&&(Ou===void 0||!Hu.visiblePanoIndex.includes(Ou))||Hu.visibleDistance!==void 0&&Hu.visibleDistance!=="unLimited"&&Mi(ju,Hu.visibleDistance)===!1)return!1;if(((Vu=Hu.intersectRaycaster)==null?void 0:Vu.enabled)!==!1){if(Ou===void 0)return!1;const Qu=(Uu=this.five.work.observers[Ou])==null?void 0:Uu.position;if(Qu===void 0)throw new Error(`getVisible(): observerPosition is ${Qu}`);const Xu=Li($u.position).sub(Qu).normalize();this.raycaster.set(Qu,Xu);const[Ku]=this.five.model.intersectRaycaster(this.raycaster),Wu=(zu=(Gu=Hu.intersectRaycaster)==null?void 0:Gu.distanceAccuracy)!=null?zu:.01;if(Ku&&Ku.distance+Wu<ju)return!1}return!(Hu.angleRange&&$u.dimensionType===wt.Three&&Mi(this.getAngle($u),Hu.angleRange)===!1)})();return Lu.visible=Fu,Lu.visible}}getUnfoldedByPanoIndex($u,Bu){if(!this.getVisibleByPanoIndex($u))return;const Ru=this.getCaches({panoIndex:Bu,id:$u.id});if(Ru.unfolded!==void 0)return Ru.unfolded;{const Lu=this.getTagConfig($u).unfoldedConfig;if(!Lu)return;const Ou=(()=>{const Nu=this.getDistance($u);if(typeof Lu=="function")return Lu(this.five,{tag:$u,distance:Nu});if(Lu.keep==="folded")return!1;if(Lu.keep==="unfolded")return!0;if(Lu.disableUnfold===!0)return!1;if(Lu.disableFold===!0)return!0;if(Lu.unfoldDistance&&Mi(Nu,Lu.unfoldDistance)===!1)return!1})();Ru.unfolded=Ou;const Fu=this.getUnfoldedByCamera($u);return Fu!==void 0?Fu:Ru.unfolded}}getUnfoldedByCamera($u){return this.getVisibleByPanoIndex($u)?(()=>{var Bu;const Ru=this.getDistance($u),Lu=this.getTagConfig($u).unfoldedConfig;if(Lu){if(typeof Lu=="function")return Lu(this.five,{tag:$u,distance:Ru});if(Lu.keep==="folded")return!1;if(Lu.keep==="unfolded")return!0;if(Lu.disableUnfold===!0)return!1;if(Lu.disableFold===!0)return!0;if(Lu.autoUnfold===void 0)return;if(Lu.autoUnfold.strategy==="ScreenPostion"){const Ou=this.getTagProject($u);if(Ou&&Mi(Ou.x,Lu.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(Lu.autoUnfold.strategy==="MinimumDistance"){const Ou=this.filterPointTag().filter(Fu=>this.getVisibleByPanoIndex(Fu)).filter(Fu=>{const Nu=this.getTagProject(Fu);if(!Nu)return!1;const{x:Vu,y:Uu,z:Gu}=Nu;return!(Math.abs(Gu)>1||Math.abs(Vu)>1||Math.abs(Uu)>1)}).filter(Fu=>{var Nu;const Vu=this.getTagConfig(Fu).unfoldedConfig;return typeof Vu=="object"&&((Nu=Vu.autoUnfold)==null?void 0:Nu.strategy)==="MinimumDistance"}).map(Fu=>({id:Fu.id,distance:this.getDistance(Fu)})).filter(Fu=>Fu.distance!==void 0).sort((Fu,Nu)=>Fu.distance-Nu.distance).findIndex(Fu=>Fu.id===$u.id);if(Ou===-1||!(Ou<=((Bu=Lu.autoUnfold.maxNumber)!=null?Bu:1)-1))return!1}return!0}})():void 0}getDistance($u,Bu){var Ru,Lu,Ou;const Fu=(Ru=this.five.panoIndex)!=null?Ru:Bu;if(Fu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Fu}`);const Nu=this.getCaches({panoIndex:Bu,id:$u.id});if(Nu.distance!==void 0)return Nu.distance;{const Vu=(Ou=(Lu=this.five.work)==null?void 0:Lu.observers[Fu])==null?void 0:Ou.position;if(Vu===void 0)throw new Error(`getDistance(): observerPosition is ${Vu}`);const Uu=(()=>$u.pointType===ut.PointTag?Ht($u==null?void 0:$u.position):Li($u.position))(),Gu=Vu.distanceTo(Uu);return Nu.distance=Gu,Gu}}getAngle($u,Bu){var Ru,Lu,Ou;const Fu=(Ru=this.five.panoIndex)!=null?Ru:Bu;if(Fu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Fu}`);const Nu=this.getCaches({panoIndex:Bu,id:$u.id});if(Nu.angle!==void 0)return Nu.angle;{const Vu=(Ou=(Lu=this.five.work)==null?void 0:Lu.observers[Fu])==null?void 0:Ou.position;if(Vu===void 0)throw new Error(`getAngleRange(): observerPosition is ${Vu}`);const Uu=(()=>$u.pointType===ut.PointTag?Kn($u.normal):$c($u.position))();if(!Uu)return;const Gu=new Vector3().copy(Vu).sub(Li($u.position)),zu=Uu.angleTo(Gu)*180/Math.PI;return Nu.angle=zu,Nu.angle}}getTagConfig($u){var Bu;if(!$u)return(Bu=this.config.globalConfig)!=null?Bu:{};const Ru={};return this.config.contentTypeConfig&&Object.keys(this.config.contentTypeConfig).forEach(Lu=>{const Ou=Lu;if(Ru[Ou])return;const Fu=Ou.split("-"),[Nu="Any",Vu="Any",Uu="Any"]=Fu||[];($u.dimensionType===Nu||Nu==="Any")&&($u.contentType===Vu||Vu==="Any")&&($u.pointType===Uu||Uu==="Any")&&(Ru[Ou]=this.config.contentTypeConfig[Ou])}),Pt.exports({},this.config.globalConfig,...Object.values(Ru),$u.config)}canBe($u,Bu){const Ru=this.getTagConfig(Bu);if(!Ru||typeof Ru!="object")return!0;if($u==="show"||$u==="hide"){if(!Ru.visibleConfig||typeof Ru.visibleConfig!="object")return!0;if($u==="show"&&Ru.visibleConfig.keep==="hidden"||$u==="hide"&&(Ru.visibleConfig.keep==="visible"||Ru.visibleConfig.alwaysShowWhenMovePano))return!1}if($u==="fold"||$u==="unfold"){if(!Ru.unfoldedConfig||typeof Ru.unfoldedConfig!="object")return!0;if($u==="fold"&&(Ru.unfoldedConfig.disableFold||Ru.unfoldedConfig.keep==="unfolded")||$u==="unfold"&&(Ru.unfoldedConfig.disableUnfold||Ru.unfoldedConfig.keep==="folded"))return!1}return!0}setPointTagPosition(){const $u=this.filterPointTag();$u.length!==0&&$u.forEach(Bu=>{var Ru;if(!((Ru=Bu.state)!=null&&Ru.visible)){Bu.pointTagStyle=void 0;return}const Lu=this.getTagProject(Bu);if(!Lu){Bu.pointTagStyle=void 0;return}Bu.pointTagStyle={leftPercent:(Lu.x+1)/2*100,topPercent:(-Lu.y+1)/2*100}})}setVisibleByPanoIndex(){this.tags.forEach($u=>{const Bu=this.getVisibleByPanoIndex($u);$u.state&&($u.state.visible=Bu)})}setUnfoldedByPanoIndex(){this.tags.forEach($u=>{const Bu=this.getUnfoldedByPanoIndex($u);if(!!$u.state&&(Bu!==void 0&&($u.state.unfolded=Bu),Bu&&!$u.state.visible)){const Ru=this.getTagConfig($u);typeof Ru.unfoldedConfig=="object"&&Ru.unfoldedConfig.autoUnfoldWhenHide!==!1&&($u.state.unfolded=!1)}})}getTagProject($u){if(!this.getVisibleByPanoIndex($u))return;const Bu=Li($u.position),{x:Ru,y:Lu,z:Ou}=Bu.project(this.five.camera);if(!(Ou>1))return{x:Ru,y:Lu,z:Ou}}filterPointTag(){return this.tags.filter($u=>$u.pointType===ut.PointTag)}filterTag2D(){return this.tags.filter($u=>$u.dimensionType===wt.Two)}filter3DPointTag(){return this.tags.filter($u=>$u.dimensionType===wt.Three&&$u.pointType===ut.PointTag)}filter3DTag(){return this.tags.filter($u=>$u.dimensionType===wt.Three)}filterPlaneTag(){return this.tags.filter($u=>$u.dimensionType===wt.Three&&$u.pointType===ut.PlaneTag)}}const Du="1.2.6",go=`DnalogelPlugin-PanoTagPlugin@${Du}`,fy=!1;class hy extends dy{constructor($u,Bu){super($u),v(this,"version",Du),v(this,"state",{enabled:!0,visible:!0}),v(this,"params"),v(this,"debug"),v(this,"css3DRenderPlugin"),v(this,"TagContainerSvelte"),v(this,"temporaryState",{visible:!0}),v(this,"mediaStore",To({currentMediaUrl:""})),v(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),v(this,"staticUrl"),v(this,"disposedErrorLog",()=>{console.error(`${go} is disposed`)}),this.params={debug:!1,mergePluginDefaultConfigToLoadDataConfig:!1,config:this.config,staticConfig:{host:"vrlab-static.ljcdn.com"},...Bu},this.debug=this.params.debug,this.config=this.params.config,this.staticUrl=(()=>{var Ru;const Lu=this.params.staticConfig;if(typeof Lu=="string")return Lu;{const Ou=Lu.protocol?Lu.protocol+":":"",Fu=(Ru=Lu.host)!=null?Ru:"vrlab-static.ljcdn.com",Nu=Lu.port?":"+Lu.port:"";return`${Ou}//${Fu}${Nu}`}})(),Object.assign(window,{__PANOTAGPLUGIN_DEBUG__:this})}load($u,Bu){var Ru,Lu;this.clearTags(),console.log(go,"load:",{data:$u}),this.params.mergePluginDefaultConfigToLoadDataConfig?this.config=Pt.exports({},this.config,{globalConfig:(Ru=$u.globalConfig)!=null?Ru:{},contentTypeConfig:(Lu=$u.contentTypeConfig)!=null?Lu:{}}):($u.globalConfig&&(this.config.globalConfig=$u.globalConfig),$u.contentTypeConfig&&(this.config.contentTypeConfig=$u.contentTypeConfig)),this.addTag($u.tagList,Bu),this.debug&&m0(this.five,this.tags)}addTag($u,Bu){const Ru=(Array.isArray($u)?$u:[$u]).map(Lu=>{const Ou=this.getTagConfig(Lu);return{...Lu,state:{visible:void 0,unfolded:fy,...Ou.initialState},hooks:new Subscribe,clickable:Ou.clickable}}).filter(Lu=>Lu.position);this.tags.push(...Ru),g0(this.five,()=>{var Lu,Ou,Fu;this.store.eventListenerDisposer&&((Ou=(Lu=this.store).eventListenerDisposer)==null||Ou.call(Lu)),this.state.enabled&&(this.store.eventListenerDisposer=this.addEventListener()),this.addResizeListener(),this.checkPanelTag(),this.setVisibleAndUnfolded({withAnimation:(Fu=Bu==null?void 0:Bu.withAnimation)!=null?Fu:!0}).then(()=>this.updateRenderAllTags()),this.updateRenderAllTags()})}clearTags(){this.tags=[],this.clearCache(),this.disposeAllCSS3DContainer(),this.updateRenderAllTags()}async show($u){const{userAction:Bu=!0,withAnimation:Ru=!1}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:Bu,visibleWithAnimation:Ru}),this.hooks.emit("show",{userAction:Bu,withAnimation:Ru})}async hide($u){const{userAction:Bu=!0,withAnimation:Ru=!1}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:Bu,visibleWithAnimation:Ru}),this.hooks.emit("hide",{userAction:Bu,withAnimation:Ru})}enable($u){const{userAction:Bu=!0}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:Bu}),this.hooks.emit("enable",{userAction:Bu})}disable($u){const{userAction:Bu=!0}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:Bu}),this.hooks.emit("disable",{userAction:Bu})}dispose(){var $u,Bu,Ru,Lu,Ou,Fu;this.disposeAllCSS3DContainer(),($u=this.TagContainerSvelte)==null||$u.$destroy(),this.filter3DTag().forEach(Nu=>{var Vu;return(Vu=Nu.tag3DContentSvelte)==null?void 0:Vu.svelteApp.$destroy()}),this.tags=[],(Bu=this.store.disposers)==null||Bu.forEach(Nu=>Nu==null?void 0:Nu()),this.store.disposers=[],this.store.disposed=!0,(Lu=(Ru=this.store).eventListenerDisposer)==null||Lu.call(Ru),this.store.eventListenerDisposer=void 0,(Fu=(Ou=this.store).resizeObserverDisposer)==null||Fu.call(Ou),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.clearCache(),this.hooks.emit("dispose")}setState($u,Bu){if(this.store.disposed)return this.disposedErrorLog();const{userAction:Ru=!0,visibleWithAnimation:Lu=!1}=Bu,Ou={...this.state};this.state=Object.assign(this.state,$u),this.store.visibleWithAnimation=Lu,Ou.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Ou.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Ou,userAction:Ru})}changeTagNormalById($u,Bu){const Ru=this.getTagById($u);!Ru||!Ru.tag3DContentSvelte||(Ru.tag3DContentSvelte.currentNormal=Ht(Bu),this.updateRenderPlaneTag())}changeDataById($u,Bu,Ru=!0){const Lu=this.getTagById($u);!Lu||(Ru?Lu.data=Pt.exports({},Lu.data,Bu):Object.assign(Lu.data,Bu),this.checkPanelTag(),this.updateRenderAllTags())}changeTagById($u,Bu,Ru=!0){const Lu=this.getTagById($u);!Bu||(Ru?Pt.exports(Lu,Bu):Object.assign(Lu,Bu),(Lu==null?void 0:Lu.tag3DContentSvelte)&&(Bu==null?void 0:Bu.normal)&&(Lu.tag3DContentSvelte.currentNormal=Ht(Bu.normal)),this.updateRenderAllTags(),this.checkPanelTag())}destroyTagById($u){(Array.isArray($u)?$u:[$u]).forEach(Bu=>{const Ru=this.tags.findIndex(Lu=>Lu.id===Bu);Ru!==-1&&this.tags.splice(Ru,1)}),this.updateRenderAllTags()}pauseCurrentMedia(){this.mediaStore.set({currentMediaUrl:""})}async setVisibleAndUnfolded({withAnimation:$u}={withAnimation:!1}){return this.setVisibleByPanoIndex(),$u?new Promise((Bu,Ru)=>{setTimeout(()=>{this.setUnfoldedByPanoIndex(),Bu()},10)}):(this.setUnfoldedByPanoIndex(),Promise.resolve())}handleShow(){this.state.visible=!0,this.updateTagContainerVisible()}handleHide(){this.state.visible=!1,this.updateTagContainerVisible()}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.updateRenderAllTags()}handleDisable(){var $u,Bu,Ru;this.state.enabled=!1,(Bu=($u=this.store).eventListenerDisposer)==null||Bu.call($u),(Ru=this.TagContainerSvelte)==null||Ru.$set({tags:[]}),this.filter3DTag().forEach(Lu=>{var Ou;(Ou=Lu.tag3DContentSvelte)==null||Ou.svelteApp.$destroy(),Lu.tag3DContentSvelte=void 0})}addEventListener(){const{five:$u,hooks:Bu}=this,Ru=this.handleFiveWantsMoveToPano.bind(this),Lu=this.handleFiveModeChange.bind(this),Ou=this.handleFiveCameraUpdate.bind(this),Fu=this.handleFiveCameraUpdateDebounce(),Nu=this.handleFivePanoArrived.bind(this),Vu=this.clickhandler.bind(this);return $u.on("wantsMoveToPano",Ru),$u.on("modeChange",Lu),$u.on("cameraUpdate",Ou),$u.on("cameraUpdate",Fu),$u.on("panoArrived",Nu),Bu.on("click",Vu),()=>{$u.off("wantsMoveToPano",Ru),$u.off("modeChange",Lu),$u.off("cameraUpdate",Ou),$u.off("cameraUpdate",Fu),$u.off("panoArrived",Nu),Bu.off("click",Vu),this.store.eventListenerDisposer=void 0}}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const $u=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=$u,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(!this.store.disposed)return;const $u=this.five.getElement(),Bu=()=>{!this.state.enabled||(this.show(),this.updateRenderAllTags())},Ru=()=>{!this.state.enabled||this.hide()},{observe:Lu,unobserve:Ou}=Oa(b0(()=>{!this.store.resizeObserverDisposer||Ru()},500),$u),{observe:Fu,unobserve:Nu}=Oa(za(()=>Bu(),400),$u);return Lu(),Fu(),()=>{Ou(),Nu()}}handleFiveModeChange($u){$u==="Panorama"?this.five.once("panoArrived",()=>this.temporaryShow()):this.temporaryHide()}handleFiveWantsMoveToPano(){this.tags.forEach($u=>{const Bu=this.getTagConfig($u);typeof Bu.visibleConfig=="object"&&Bu.visibleConfig.keep?$u.temporaryState={...$u.temporaryState,visible:Bu.visibleConfig.keep==="visible"}:typeof Bu.visibleConfig=="object"&&Bu.visibleConfig.alwaysShowWhenMovePano?$u.temporaryState={...$u.temporaryState,visible:!0}:$u.temporaryState={...$u.temporaryState,visible:!1}}),this.updateRenderAllTags()}temporaryShow(){this.temporaryState.visible=!0}temporaryHide(){this.temporaryState.visible=!1}clickhandler($u){if($u.target!=="TagPoint")return;if(!$u.tag.state)return console.warn("Clickhandler: params.tag.state is undefined");const Bu=this.canBe("fold",$u.tag),Ru=this.canBe("unfold",$u.tag);Bu&&Ru&&($u.tag.state.unfolded=!$u.tag.state.unfolded,$u.tag.state.unfolded&&this.tags.forEach(Lu=>{Lu.id!==$u.tag.id&&Lu.state&&this.canBe("fold",Lu)&&(Lu.state.unfolded=!1)}),this.updateRenderAllTags())}updateRenderAllTags(){this.updateRenderPointTag(),this.updateRenderPlaneTag()}updateTagContainerVisible(){var $u;($u=this.TagContainerSvelte)==null||$u.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation}),this.filter3DTag().forEach(Bu=>{var Ru;(Ru=Bu.tag3DContentSvelte)==null||Ru.svelteApp.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation})})}handleFiveCameraUpdateDebounce(){return za(()=>{this.setUnfoldedByCamera(),this.updateRenderAllTags()},100)}handleFiveCameraUpdate(){this.updateRenderPointTag()}async handleFivePanoArrived(){await this.setVisibleAndUnfolded(),this.tags.forEach($u=>{$u.temporaryState={...$u.temporaryState,visible:!0}}),this.updateRenderAllTags()}setUnfoldedByCamera(){let $u=!1;this.tags.forEach(Bu=>{const Ru=this.getUnfoldedByCamera(Bu);!Bu.state||Ru!==void 0&&(Ru===!0&&($u=!0),Bu.state.unfolded=Ru)}),$u&&this.tags.forEach(Bu=>{const Ru=this.getTagConfig(Bu).unfoldedConfig;typeof Ru=="object"&&(Ru.autoUnfold||Ru.disableFold||Ru.keep)||Bu.state&&(Bu.state.unfolded=!1)})}updateRenderPointTag(){var $u;const Bu=this.filterPointTag();if(this.setPointTagPosition(),this.TagContainerSvelte)this.TagContainerSvelte.$set({tags:Bu,state:this.state,temporaryState:this.temporaryState});else{const Ru=($u=this.five.getElement())==null?void 0:$u.parentElement;if(!Ru)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new ly({target:Ru,props:{hooks:this.hooks,tags:Bu,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore}})}}updateRenderPlaneTag(){[...this.filterPlaneTag(),...this.filter3DPointTag()].forEach($u=>{var Bu;if($u.tag3DContentSvelte){const{svelteApp:Ru,domContainer:Lu,initialNormal:Ou,currentNormal:Fu}=$u.tag3DContentSvelte;if(Ru.$set({tag:$u,hooks:this.hooks,state:this.state,temporaryState:this.temporaryState}),!Ou.equals(Fu)){const Nu=new Quaternion().setFromUnitVectors(Ou,Fu);Lu.css3DObject.setRotationFromQuaternion(Nu)}}else{if(((Bu=$u.state)==null?void 0:Bu.visible)===!1)return;if(this.css3DRenderPlugin||(this.css3DRenderPlugin=os(this.five)),$u.pointType===ut.PointTag&&!$u.normal)return console.error("updateRenderPlaneTag: \u4E09\u7EF4\u70B9\u6807\u7B7E\u7F3A\u5C11\u6CD5\u5411\u91CF\uFF01");const Ru=$u.pointType===ut.PlaneTag?$u.position:v0(this.five.camera.position,Ht($u.position),Ht($u.normal)),Lu=$u.pointType===ut.PlaneTag?$c($u.position):Ht($u.normal),Ou=this.getTagConfig($u).tag3DConfig,Fu=this.css3DRenderPlugin.create3DDomContainer(Ru,Ou);if(!Fu)return;this.store.css3DRenderDisposer.set($u.id,Fu.dispose),$u.tag3DContentSvelte={svelteApp:new ku({target:Fu.container,props:{tag:$u,hooks:this.hooks,state:this.state,mediaStore:this.mediaStore,temporaryState:this.temporaryState}}),domContainer:Fu,initialNormal:Lu,currentNormal:Lu}}}),this.checkPanelTag()}disposeAllCSS3DContainer(){for(const[$u,Bu]of this.store.css3DRenderDisposer)Bu==null||Bu();this.store.css3DRenderDisposer=new Map}checkPanelTag(){this.tags.forEach($u=>{var Bu;$u.dimensionType===wt.Two&&$u.pointType===ut.PointTag&&((Bu=$u.tag3DContentSvelte)==null||Bu.domContainer.dispose(),$u.tag3DContentSvelte=void 0)});for(const[$u,Bu]of this.store.css3DRenderDisposer){const Ru=this.getTagById($u);(!Ru||Ru.dimensionType!==wt.Three)&&(Bu==null||Bu(),this.store.css3DRenderDisposer.delete($u))}}}const Ew=(_u,$u)=>new hy(_u,$u);new Vector3;function PanoTag(){const _u=react$1.exports.useRef(),$u=useController(),Bu=useFiveInstance(),Ru=react$1.exports.useRef(Ew(Bu,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"},unfoldDistance:{max:100}}}}}));return react$1.exports.useEffect(()=>{var Ou;if(((Ou=$u.configs)==null?void 0:Ou.keyframeMap.PanoTag)===!1)return;const Lu=Fu=>{if(!Ru.current)return;const{start:Nu,end:Vu,data:Uu}=Fu,Gu=Uu,zu=Date.now().toString(),Hu=ut.PointTag,ju=wt.Two,Qu=[Gu.vertex.x,Gu.vertex.y,Gu.vertex.z],Xu=(()=>Gu.imgUrl?{id:zu,pointType:Hu,position:Qu,dimensionType:ju,contentType:ht.ImageText,data:{text:Gu.text,mediaData:[{type:"Image",url:Gu.imgUrl}]}}:{id:zu,pointType:Hu,position:Qu,dimensionType:ju,contentType:ht.Text,data:{text:Gu.text}})();Ru.current.load({tagList:[Xu]}),_u.current=setTimeout(()=>{var Wu;const Ku=Ru.current.getTagById(zu);Ku.state&&(Ku.state.unfolded=!1,Ru.current.updateRenderAllTags()),(Wu=Ku.hooks)==null||Wu.on("folded",()=>{setTimeout(()=>{Ku.state&&(Ku.state.visible=!1,Ru.current.destroyTagById(zu))},1500)})},Vu-Nu)};return $u.on(VreoKeyframeEnum.PanoTag,Lu),()=>{$u.off(VreoKeyframeEnum.PanoTag,Lu),_u.current&&clearTimeout(_u.current)}},[$u]),null}function evenNumber(_u,$u){const Bu=Math.round(_u);return Bu%2===0?Bu:Bu+Number($u!=null&&$u.smaller?-1:1)}function centerPoint(_u,$u){return new Vector3((_u.x+$u.x)/2,(_u.y+$u.y)/2,(_u.z+$u.z)/2)}const transformPositionToVector3=({x:_u,y:$u,z:Bu})=>new Vector3(_u,$u,Bu);function createResizeObserver(_u,$u){if(!$u||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Bu=new ResizeObserver(_u);return{observe:()=>Bu.observe($u),unobserve:()=>Bu.unobserve($u)}}}const CSS3DRenderPlugin=_u=>{const $u={disposeCallbacks:[]},Bu=(...Lu)=>{var np,tp,rp;const Ou=Lu[0].map(op=>op instanceof Vector3?op:transformPositionToVector3(op)),Fu=Lu[1];if((Ou==null?void 0:Ou.length)<4)return console.error("points must be equal or greater than than 4");if(!((np=_u==null?void 0:_u.model)!=null&&np.loaded))return console.error("five.model.loaded is: ",(tp=_u==null?void 0:_u.model)==null?void 0:tp.loaded);const Nu=_u.getElement();if(!Nu)return console.error("five.getElement() is "+Nu);const Vu=[],Uu=(Fu==null?void 0:Fu.ratio)||.00216;Uu<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const Gu=(Fu==null?void 0:Fu.dpr)||1,zu=(Fu==null?void 0:Fu.mode)||"front",Hu=(rp=Fu==null?void 0:Fu.autoRender)!=null?rp:!0,ju=(Fu==null?void 0:Fu.behindFiveContainer)||Nu.parentElement||document.body,Qu=(Fu==null?void 0:Fu.container)||document.createElement("div");Qu.classList.add("__Vreo-plugin--CSS3DRenderPlugin");const{css3DObject:Xu,mesh:Ku}=Ru(Ou,{ratio:Uu,dpr:Gu,container:Qu,mode:zu});let Wu;const qu=zu==="front"&&!$u.frontMode,Yu=zu==="behind"&&!$u.behindMode,Zu=!(qu||Yu);let _h=!1,ep=null;Yu&&($u.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),qu&&($u.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:ip,css3DRenderer:ap}=zu==="behind"?$u.behindMode:$u.frontMode,sp=(()=>{if(Zu)return()=>{ip.add(Xu)};{const op=()=>{const up=evenNumber(Nu.clientWidth,{smaller:!0}),cp=evenNumber(Nu.clientHeight,{smaller:!0});ap.setSize(up,cp)};op(),Wu=createResizeObserver(op,Nu),ap.domElement.style.position="absolute",ap.domElement.style.top="0",ap.domElement.style.userSelect="none",ap.domElement.style.pointerEvents="none";const lp=()=>{_h||(ep=requestAnimationFrame(lp),ap.render(ip,_u.camera))};return()=>{var up;ip.add(Xu),(up=Wu==null?void 0:Wu.observe)==null||up.call(Wu),lp(),zu==="behind"&&Ku&&(_u.scene.add(Ku),Vu.push(()=>Ku&&_u.scene.remove(Ku)))}}})();qu&&(Nu.parentElement||document.body).appendChild(ap.domElement),Yu&&ju.appendChild(ap.domElement);const Ju=()=>{var op;return _h=!0,Vu.forEach(lp=>lp==null?void 0:lp()),ip.remove(Xu),typeof ep=="number"&&cancelAnimationFrame(ep),ip.children.length===0&&(ap.domElement.remove(),zu==="front"&&($u.frontMode=void 0),zu==="behind"&&($u.behindMode=void 0),!$u.behindMode&&!$u.frontMode&&((op=Wu==null?void 0:Wu.unobserve)==null||op.call(Wu))),!0},_f=$u.disposeCallbacks.findIndex(op=>op===Ju);return _f!==-1?$u.disposeCallbacks.splice(_f,1):$u.disposeCallbacks.push(Ju),Hu&&sp(),{container:Qu,dispose:Ju,css3DObject:Xu,render:Hu?void 0:sp}},Ru=(Lu,Ou)=>{const{ratio:Fu,dpr:Nu,container:Vu,mode:Uu}=Ou,Gu=Lu[0].distanceTo(Lu[1]),zu=Lu[1].distanceTo(Lu[2]),Hu=evenNumber(Gu/Fu*Nu),ju=evenNumber(zu/Fu*Nu),Qu=new CSS3DObject(Vu);Qu.scale.set(Fu,Fu,Fu),Vu.style.width=Hu+"px",Vu.style.height=ju+"px",Vu.style.pointerEvents="none";const Xu=centerPoint(Lu[0],Lu[2]),Ku=Lu[1].clone().sub(Lu[0]),Wu=Lu[2].clone().sub(Lu[1]),qu=new Vector3(0,1,0).angleTo(new Vector3(0,Wu.y,Wu.z)),Yu=new Vector3(1,0,0).angleTo(new Vector3(Ku.x,0,Ku.z)),Zu=Ku.angleTo(new Vector3(Ku.x,0,Ku.z)),_h=(Wu.z>0?-1:1)*qu,ep=(Ku.z<0?1:-1)*Yu,ip=(Ku.x>0&&Ku.y<0||Ku.x<0&&Ku.y>0?-1:1)*Zu;Qu.rotateOnWorldAxis(new Vector3(1,0,0),_h),Qu.rotateOnWorldAxis(new Vector3(0,1,0),ep),Qu.rotateOnWorldAxis(new Vector3(0,0,1),ip),Qu.position.set(Xu.x,Xu.y,Xu.z);let ap;if(Uu==="behind"){const sp=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),Ju=new PlaneGeometry(Hu,ju);ap=new Mesh(Ju,sp),ap.name="CSS3DRenderPlugin-mesh",ap.position.copy(Qu.position),ap.rotation.copy(Qu.rotation),ap.scale.copy(Qu.scale)}return{css3DObject:Qu,mesh:ap}};return{create3DDomContainer:Bu,disposeAll:()=>{$u.disposeCallbacks.forEach(Lu=>Lu==null?void 0:Lu()),$u.disposeCallbacks=[]}}},calcPoints=(_u,$u,Bu,Ru)=>{const Lu=Bu/375,Ou=Ru/375,Fu=new PlaneGeometry(Lu,Ou);if($u){const qu=new Vector3($u.x+_u.x,$u.y+_u.y,$u.z+_u.z);Fu.lookAt(qu)}const Nu=new MeshBasicMaterial({color:16776960,side:DoubleSide}),Vu=new Mesh(Fu,Nu),Uu=_u.clone();Vu.position.copy(Uu);const[Gu,zu,Hu,ju]=Vu.geometry.vertices,Qu=Uu.clone().add(ju),Xu=Uu.clone().add(Hu),Ku=Uu.clone().add(zu),Wu=Uu.clone().add(Gu);return[Qu,Xu,Wu,Ku]};function PanoTextLabel(){const _u=react$1.exports.useRef(),$u=useController(),Bu=useFiveInstance(),Ru=react$1.exports.useRef();return react$1.exports.useEffect(()=>{var Ou;if(((Ou=$u.configs)==null?void 0:Ou.keyframeMap.PanoTextLabel)===!1)return;const Lu=Fu=>{var _h,ep,ip;const{start:Nu,end:Vu,data:Uu}=Fu,Gu=Uu;if(Uu.text==="")return;const{x:zu,y:Hu,z:ju}=Gu.vertex,Qu=new Vector3(zu,Hu,ju),Xu=new Vector3((_h=Gu.normal)==null?void 0:_h.x,(ep=Gu.normal)==null?void 0:ep.y,(ip=Gu.normal)==null?void 0:ip.z),Ku=200,Wu=30,qu=calcPoints(Qu,Gu.normal&&Xu,Ku,Wu);Ru.current||(Ru.current=CSS3DRenderPlugin(Bu));const Yu=Ru.current.create3DDomContainer(qu),Zu=Yu==null?void 0:Yu.css3DObject;if(Uu.quaternion){const ap=new Quaternion(Uu.quaternion.x,Uu.quaternion.y,Uu.quaternion.z,Uu.quaternion.w);Zu==null||Zu.quaternion.copy(ap)}Yu!=null&&Yu.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${Uu.fontSize||16}px`},className:"PanoText-innerText",children:Uu.text||""})})}),Yu==null?void 0:Yu.container),_u.current=setTimeout(()=>{var ap;(ap=Ru.current)==null||ap.disposeAll()},Vu-Nu)};return $u.on(VreoKeyframeEnum.PanoTextLabel,Lu),()=>{$u.off(VreoKeyframeEnum.PanoTextLabel,Lu),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}function Prompter(){const[_u,$u]=react$1.exports.useState(""),[Bu,Ru]=react$1.exports.useState(!0),Lu=react$1.exports.useRef(null),Ou=useController();return react$1.exports.useEffect(()=>{var Nu;if(((Nu=Ou.configs)==null?void 0:Nu.keyframeMap.Prompter)===!1)return;const Fu=Vu=>{const{start:Uu,end:Gu,data:zu}=Vu;$u(zu.text),Ru(!1),Lu.current&&(clearTimeout(Lu.current),Lu.current=null),Lu.current=setTimeout(()=>{Ru(!0),$u(""),Lu.current&&clearTimeout(Lu.current),Lu.current=null},Gu-Uu)};return Ou.on(VreoKeyframeEnum.Prompter,Fu),()=>{Ou.off(VreoKeyframeEnum.Prompter,Fu)}},[Ou]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":Bu,[`vreo-prompter-left--${Ou.agentType}`]:!0}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:_u})})})}function UpdateVRPanorama(){const _u=useController(),$u=useFiveInstance(),Bu=react$1.exports.useRef(null),Ru=react$1.exports.useRef(null),Lu=react$1.exports.useCallback(()=>{if(Ru.current=null,Bu.current){const Nu=parseWork(Bu.current);$u.load(Nu)}},[]),Ou=react$1.exports.useCallback(()=>{if(Bu.current){const Nu=parseWork(Bu.current);Object.assign(window,{$rawWork:Nu}),$u.load(Nu)}},[]),Fu=react$1.exports.useCallback(()=>{!Ru.current||$u.load(Ru.current)},[]);return react$1.exports.useEffect(()=>{const Nu=Vu=>{var zu;Bu.current||(Bu.current=$u.work.raw.works);const Uu=Vu.data;if(Uu.work){Ru.current=parseWork(Uu.work),$u.load(Ru.current);return}const Gu=(zu=$u.work)==null?void 0:zu.raw.works[0];if(Uu.dynamic_scene&&!Uu.panorama){const ju=JSON.parse(Gu).panorama,Qu=Uu.dynamic_scene.images.index;ju.list[Qu]=Uu.dynamic_scene.images,Uu.panorama=ju,delete Uu.dynamic_scene}Object.assign(window,{$work1:JSON.parse(Gu),$work2:Uu,parseWork}),Ru.current=parseWork([Gu,Uu]),$u.load(Ru.current)};return _u.on(VreoKeyframeEnum.UpdateVRPanorama,Nu),_u.on(VreoKeyframeEnum.Exit,Lu),_u.on("loaded",Lu),_u.on("paused",Ou),_u.on("playing",Fu),()=>{_u.off(VreoKeyframeEnum.UpdateVRPanorama,Nu),_u.off(VreoKeyframeEnum.Exit,Lu),_u.off("loaded",Lu),_u.off("paused",Ou),_u.off("playing",Fu)}},[]),jsx(Fragment,{})}const inlinePlay=_u=>{if(!_u)return;const $u=()=>{_u.removeEventListener("canplaythrough",$u);try{_u.play()}catch{}};_u.addEventListener("canplaythrough",$u),_u.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const _u=react$1.exports.useRef(null),$u=react$1.exports.useRef(),Bu=useController(),Ru=react$1.exports.useRef(),[Lu,Ou]=react$1.exports.useState(!1),Fu=useFiveInstance(),Nu=Vu=>{!$u.current||($u.current.src=Vu)};return react$1.exports.useEffect(()=>{const Vu=async Uu=>{const{start:Gu,end:zu}=Uu,{videoSrc:Hu,fov:ju,direction:Qu,panoIndex:Xu,vector:Ku}=Uu.data,[Wu,qu]=(()=>{if(Ku)return[Ku.longitude,Ku.latitude];if(!Qu)return[0,0];let Yu=-Math.atan2(Qu.x,-Qu.z);Yu=(Yu%PI_2+PI_2)%PI_2;const Zu=-Math.asin(Qu.y/1);return[Yu,Zu]})();Fu.setState({fov:ju,panoIndex:Xu,longitude:Wu,latitude:qu},!0),Nu(Hu),inlinePlay($u.current),Ou(!0),Ru.current=setTimeout(()=>{var Yu,Zu;(Yu=$u.current)!=null&&Yu.paused||(Zu=$u.current)==null||Zu.pause(),Ou(!1),Nu("")},zu-Gu)};return Bu.on(VreoKeyframeEnum.VideoEffect,Vu),()=>{Bu.off(VreoKeyframeEnum.VideoEffect,Vu),Ru.current&&clearTimeout(Ru.current)}},[Bu]),react$1.exports.useEffect(()=>{var Uu,Gu;if(!_u.current)return;const Vu=((Gu=(Uu=Bu.configs)==null?void 0:Uu.videos)==null?void 0:Gu.videoEffect)||document.createElement("video");Vu.setAttribute("playsinline","true"),Vu.setAttribute("webkit-playsinline","true"),Vu.setAttribute("autoplay","true"),Vu.setAttribute("key","VideoEffect-video"),Vu.setAttribute("class","VideoEffect-video"),$u.current=Vu,_u.current.append($u.current),document.addEventListener("WeixinJSBridgeReady",function(){var zu;(zu=$u.current)==null||zu.play()},!1),_u.current},[]),jsx("div",{ref:_u,className:classNames("VideoEffect",{"VideoEffect--visible":Lu})})}const Preloader={blob:_u=>{const $u=()=>null;return new Promise((Bu,Ru)=>{const Lu=new XMLHttpRequest,Ou=()=>{Lu.ontimeout=$u,Lu.onreadystatechange=$u,Lu.onprogress=$u,Lu.onabort=$u};Lu.ontimeout=()=>{Ru(new Error("timeout")),Ou()},Lu.onreadystatechange=()=>{Lu.readyState===4&&(Lu.status===0&&!Lu.response||(Lu.status===200||Lu.status===0?(Bu(Lu.response),Ou()):(Ru(new Error("status:"+Lu.status)),Ou())))},Lu.open("GET",_u,!0),Lu.responseType="blob",Lu.send(null)})}};class AudioLike extends Subscribe{constructor({duration:Bu}={}){super();xm(this,"$timestamp",null);xm(this,"$currentTime",0);xm(this,"$duration",0);xm(this,"stopInterval");xm(this,"muted",!1);xm(this,"src","");Bu&&(this.$duration=Bu)}setAttribute(Bu,Ru){}play(){this.$currentTime===this.$duration&&(this.$currentTime=0),this.$timestamp===null&&(this.$timestamp=performance.now()-this.$currentTime),this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=null}requestAnimationFrameLoop(){if(this.$timestamp===null)return;const Bu=performance.now();this.$currentTime=Bu-this.$timestamp,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(Bu){this.$currentTime=Bu}get duration(){return this.$duration}set duration(Bu){this.pause(),this.$duration=Bu,this.$timestamp=null,this.$currentTime=0}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(Bu,Ru,Lu=!1){this.on(Bu,Ru)}removeEventListener(Bu,Ru,Lu=!1){this.off(Bu,Ru)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(Bu,Ru,Lu,Ou,Fu={preload:!0}){var Qu,Xu,Ku;if(!Fu.videoInstance)if(cacheInstance.videoInstance)Fu.videoInstance=cacheInstance.videoInstance;else{const Wu=document.createElement("video");Wu.style.opacity="0",Wu.style.pointerEvents="none",Wu.style.display="none",document.body.append(Wu),Fu.videoInstance=Wu,cacheInstance.videoInstance=Wu,Wu.playsInline=!0,Wu.controls=!1}const Nu=new PlaneGeometry(Bu,Ru,Lu,Ou),Vu=new VideoTexture(Fu.videoInstance),Uu=new ShaderMaterial({uniforms:{map:{value:Vu},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(Nu,Uu);xm(this,"options");xm(this,"videoUrl");xm(this,"freeze");xm(this,"paused");xm(this,"audioInstance");xm(this,"audioLikeInstance");xm(this,"$removeEventListener");if(this.options=Fu,this.freeze=!1,this.paused=!0,Fu.audioInstance)this.audioInstance=Fu.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const Wu=document.createElement("audio");Wu.crossOrigin="",Wu.muted=!1,Wu.autoplay=!1,Wu.style.display="none",document.body.appendChild(Wu),this.audioInstance=Wu,cacheInstance.audioInstance=Wu}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const Gu=Wu=>runInAction(()=>this.paused=Wu),zu=()=>Gu(!0),Hu=()=>Gu(!1),ju=()=>console.log("vreo: video \u64AD\u653E\u7ED3\u675F");this.audioInstance.addEventListener("pause",zu),this.audioInstance.addEventListener("play",Hu),(Qu=this.options.videoInstance)==null||Qu.addEventListener("pause",zu),(Xu=this.options.videoInstance)==null||Xu.addEventListener("play",Hu),this.audioLikeInstance.addEventListener("pause",zu),this.audioLikeInstance.addEventListener("play",Hu),(Ku=this.options.videoInstance)==null||Ku.addEventListener("ended",ju),this.$removeEventListener=()=>{var Wu,qu,Yu;this.audioInstance.removeEventListener("pause",zu),this.audioInstance.removeEventListener("play",Hu),(Wu=this.options.videoInstance)==null||Wu.removeEventListener("pause",zu),(qu=this.options.videoInstance)==null||qu.removeEventListener("play",Hu),this.audioLikeInstance.removeEventListener("pause",zu),this.audioLikeInstance.removeEventListener("play",Hu),(Yu=this.options.videoInstance)==null||Yu.removeEventListener("ended",ju)}}get mediaInstance(){return this.videoUrl?getMediaType(this.videoUrl)==="audio"?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(Bu){if(this.videoUrl===Bu)return;this.videoUrl=Bu,this.freeze=!0,await this.mediaInstance.pause();const Ru=this.material.uniforms;this.mediaInstance.muted=!0,this.mediaInstance.src=this.options.preload||this.options.preload===void 0||getMediaType(this.videoUrl)==="video"?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.mediaInstance.setAttribute("data-src",this.videoUrl);const Lu=()=>{this.mediaInstance.currentTime!==0&&(this.freeze=!1,this.mediaInstance.muted=!1,Ru.enable.value=getMediaType(this.videoUrl)?1:0,this.mediaInstance.removeEventListener("timeupdate",Lu,!1))};this.mediaInstance.addEventListener("timeupdate",Lu,!1)}async play(Bu="",Ru=0,Lu){return Bu=Bu||"",Lu&&!Bu?(this.currentTime&&(this.mediaInstance.currentTime=Ru),this.mediaInstance.duration=Lu,this.videoUrl="",this.mediaInstance.play(),!0):Bu?Bu===this.videoUrl?(this.mediaInstance.currentTime=Ru,await this.mediaInstance.play(),!0):(await this.update(Bu),this.mediaInstance.pause(),await new Promise(Ou=>setTimeout(async()=>{this.mediaInstance.currentTime=Ru,await this.mediaInstance.play(),Ou(!0)},20))):(this.videoUrl?await this.mediaInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.mediaInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor($u,Bu){xm(this,"videoAgentMesh");xm(this,"scene",new Scene);xm(this,"camera",new OrthographicCamera(-240,240,135,-135));xm(this,"renderer",new WebGLRenderer({alpha:!0}));xm(this,"disposers",[]);xm(this,"run",()=>{!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.run)});xm(this,"dispose",()=>{var $u;($u=this.videoAgentMesh)==null||$u.dispose(),this.disposers.forEach(Bu=>Bu==null?void 0:Bu())});if(this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,Bu),$u){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Ru=this.renderer.domElement;Ru.classList.add("VideoAgent-canvas");const Lu=addResizeListener($u,(Ou,Fu)=>{this.renderer.setSize(Ou*window.devicePixelRatio,Fu*window.devicePixelRatio),Ru.style.width=`${Ou}px`,Ru.style.height=`${Fu}px`});this.disposers.push(Lu),$u.append(Ru),this.scene.add(this.videoAgentMesh),this.run()}}}function VideoAgent(_u){var Ou;const $u=react$1.exports.useRef(null),Bu=useController(),Ru=react$1.exports.useMemo(()=>{var Fu;return((Fu=Bu.avatar)==null?void 0:Fu.url)&&Bu.avatar.force===!0},[Bu.avatar]),Lu=react$1.exports.useMemo(()=>{var Fu;return Ru?!1:((Fu=Bu.videoAgentScene)==null?void 0:Fu.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[Bu.videoAgentScene]);return react$1.exports.useEffect(()=>{if(!$u.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(Bu.videoAgentScene){console.warn('VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4');return}const Fu=new VideoAgentScene($u.current,_u.options);return Bu.videoAgentScene=Fu,()=>{var Nu;Bu.dispose(),(Nu=Bu.videoAgentScene)==null||Nu.dispose()}},[]),jsxs(Fragment,{children:[jsx("div",{className:"Avatar",style:{display:Ru?"block":"none"},children:jsx("div",{className:"Avatar-wrapper ratio-1-1",children:jsx("img",{className:"Avatar-img",src:(Ou=Bu.avatar)==null?void 0:Ou.url,onClick:()=>{var Fu;return(Fu=_u.onClick)==null?void 0:Fu.call(_u)}})})}),jsx("div",{className:classNames("VideoAgent",{hide:!Lu}),children:jsx("div",{className:"VideoAgent-container",children:jsx("div",{className:"VideoAgent-wrapper ratio-16-9",children:jsx("div",{className:"VideoAgent-inner",ref:$u,children:jsx("div",{className:"VideoAgent-play",onClick:()=>{var Fu;return(Fu=_u.onClick)==null?void 0:Fu.call(_u)}})})})})})]})}function BgMusic(){const _u=useController(),$u=react$1.exports.useRef(null),Bu=react$1.exports.useCallback(()=>{$u.current&&(clearTimeout($u.current),$u.current=null)},[]);return react$1.exports.useEffect(()=>{const Ru=new Audio;Ru.setAttribute("id","vreo-singleton-bgmusic"),Ru.style.display="none",Ru.setAttribute("playsinline","true"),Ru.loop=!0,document.body.append(Ru);const Lu=Ou=>{const{start:Fu,end:Nu}=Ou,{url:Vu}=Ou.data;Ru.src=Vu;const Uu=()=>{Ru.play()};Ru.addEventListener("canplaythrough",Uu),Bu();const Gu=()=>{Ru.pause(),Ru.currentTime=0,Ru.src="",Bu(),Ru.removeEventListener("canplaythrough",Uu)},zu=Nu-Fu||5e3;$u.current=setTimeout(()=>{Gu()},zu),_u.once("paused",()=>{Gu()})};return _u.on(VreoKeyframeEnum.BgMusic,Lu),()=>{_u.off(VreoKeyframeEnum.BgMusic,Lu),document.body.removeChild(Ru),Bu()}}),jsx(Fragment,{})}const prefix="https://vr-public.realsee-cdn.cn/release/static/image/release/",WAVES={single:{width:766,height:60,frames:20,hevc:"vapor/static/wave-single.140d197f4838c130b69e87dfd0705479.mov",vp9:"vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm",png:"vapor/static/wave-single.f51aade2a6e1c59211698a1a24e6135f.png"},double:{width:766,height:60,frames:16,hevc:"vapor/static/wave-double.3e6d73050ee6958cc3060b107ebe5f39.mov",vp9:"/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm",png:"/vapor/static/wave-double.ab4fe7d8a70395109ca4f759af7bd53f.png"},solid:{width:1126,height:90,frames:48,hevc:"vapor/static/wave-solid.cf68912a93275d07aa6b5097ea11fdda.mov",vp9:"vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm",png:"vapor/static/wave-solid.6969d7f3f2f44f7ac1ade30e65660cb1.png"},swap:{width:2250,height:180,frames:41,hevc:"vapor/static/wave-swap.b38f22e2cf84ee21e9be35f7f56c9cfc.mov",vp9:"vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm",png:"vapor/static/wave-swap.772ba526a7210dcc01567062c6319545.png"},expand:{width:2250,height:180,frames:45,hevc:"vapor/static/wave-expand.9529956c5954740cd4c9d07d51e32822.mov",vp9:"vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm",png:"vapor/static/wave-expand.62fcf27b445533e6eb1b17bab5eafa0d.png"}},userAgent=typeof navigator!="undefined"?navigator.userAgent:"",isAppleDevice=/(iPhone|iPad|iPod)/i.test(userAgent),isSafari=/safari/i.test(userAgent)&&!/chrome/i.test(userAgent)&&/version/i.test(userAgent),isMicroMessenger=/microMessenger/i.test(userAgent),canPlayHevc=isAppleDevice||isSafari,canPlayVp9=typeof MediaSource!="undefined"&&MediaSource.isTypeSupported("video/webm; codecs=vp9");function Wave(_u){const $u=React.useMemo(()=>{var Ou;const Lu=(Ou=_u==null?void 0:_u.appearance)!=null?Ou:"solid";return WAVES[Lu]},[_u==null?void 0:_u.appearance]),Bu=React.useMemo(()=>$u.height/$u.width,[$u]);let Ru=null;return isMicroMessenger?Ru=jsx(KeyframeWaveContent,{wave:$u}):canPlayVp9?Ru=jsx(VideoWaveContent,{format:"vp9",wave:$u}):canPlayHevc?Ru=jsx(VideoWaveContent,{format:"hevc",wave:$u}):Ru=jsx(KeyframeWaveContent,{wave:$u}),jsx("div",{className:"vreo-wave",children:jsx("div",{style:{position:"relative",width:"100%",paddingTop:`${Bu*100}%`},children:jsx("div",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0},children:Ru})})})}const VideoWaveContent=({wave:_u,format:$u})=>{const Bu=react$1.exports.useRef(null),[Ru,Lu]=react$1.exports.useState(!1),[Ou,Fu]=react$1.exports.useState(!1),Nu=prefix+_u[$u];react$1.exports.useEffect(()=>{Lu(!1)},[Nu]);const Vu=react$1.exports.useCallback(()=>{Bu.current&&Bu.current.play(),Lu(!0)},[]),Uu=react$1.exports.useCallback(()=>{Fu(!0)},[]);return Ou?jsx(KeyframeWaveContent,{wave:_u}):jsx("video",{style:{opacity:Ru?1:0},preload:"auto",ref:Bu,width:"100%",height:"100%",playsInline:!0,autoPlay:!0,onCanPlay:Vu,onError:Uu,muted:!0,loop:!0,src:Nu})},KeyframeWaveContent=({wave:_u})=>{const $u=prefix+_u.png;return jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(${$u})`,backgroundSize:"100%",animationName:"vreo-wave-keyframes",animationTimingFunction:`steps(${_u.frames-1})`,animationDuration:`${_u.frames/25}s`,animationIterationCount:"infinite"}})},AppView=observer(({controller:_u})=>{var $u,Bu;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!_u.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[_u.waveAppearance&&jsx(Wave,{appearance:_u.waveAppearance}),jsx(VideoAgent,{onClick:()=>{_u.playing?_u.setPlaying(!1):_u.setPlaying(!0)},options:(($u=_u.configs)==null?void 0:$u.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(Bu=_u.configs)==null?void 0:Bu.customPanelChildren]})})});function App(){const _u=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(ResizeObserver$1,{}),jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:_u})]})}const DrawerView=observer(({controller:_u})=>{var Ru;const $u="400px",Bu=(()=>{var Ou;const Lu=(Ou=_u.drawerConfig)==null?void 0:Ou.height;return Lu?typeof Lu=="number"?Lu+"px":Lu:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":_u.drawerConfig&&_u.drawerConfig.content}),onClick:()=>_u.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:Bu,maxHeight:$u},children:((Ru=_u.drawerConfig)==null?void 0:Ru.content)||""})})});function Drawer(){const _u=useController();return jsx(DrawerView,{controller:_u})}const PopUpView=observer(({controller:_u})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":_u.popUp}),onClick:()=>_u.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:_u.popUp||""})}));function PopUp(){const _u=useController();return jsx(PopUpView,{controller:_u})}class Player extends Subscribe{constructor(Bu,Ru={}){var Lu;super();xm(this,"$five");xm(this,"controller");xm(this,"configs");if(this.$five=Bu,Ru.container||(Ru.container=Ru.containter),!Ru.container){const Ou=document.getElementById("vreo-app")||document.createElement("div");reactDom.exports.unmountComponentAtNode(Ou),Ou.setAttribute("id","vreo-app"),Ru.container=Ou;const Fu=(Lu=Bu.getElement())==null?void 0:Lu.parentNode;Fu?Fu.append(Ou):document.body.append(Ou)}Ru.container.classList.contains("vreo-app")||Ru.container.classList.add("vreo-app"),this.configs=Object.freeze(Object.assign({keyframeMap:{}},Ru)),this.controller=new Controller({five:Bu,container:Ru.container,configs:this.configs}),reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Ou,Fu)=>jsx(Ou,{subscribe:{on:(Nu,Vu)=>this.on(Nu,Vu),once:(Nu,Vu)=>this.once(Nu,Vu),off:(Nu,Vu)=>this.off(Nu,Vu)},five:Bu},Fu))]}),Ru.container),reaction(()=>this.controller.ended,Ou=>{Ou&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Ou=>{this.controller.ended||this.emit(Ou?"playing":"paused")})}async load(Bu,Ru=0,Lu=!1,Ou=!1){var Fu,Nu,Vu,Uu;if(this.controller.setLoading(!0),Ou&&(Bu=JSON.parse(JSON.stringify(Bu))),this.controller.visible||(this.controller.setVisible(!0),await new Promise(Gu=>{setTimeout(()=>Gu(!0),500)})),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=Bu,(Fu=this.controller.mediaInstance)==null||Fu.pause(),this.$five.imageOptions.size&&((Nu=this.configs.imageOptions)==null?void 0:Nu.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Lu||Lu===void 0&&this.configs.autoPreload){const Gu=Bu.keyframes.filter(Hu=>!(Hu.type!==VreoKeyframeEnum.CameraMovement||Hu.data.panoIndex===void 0)).reduce((Hu,ju)=>{const Qu=ju.data.panoIndex;return Hu[Qu]||(Hu[Qu]=!0),Hu},{}),zu=Object.keys(Gu);for(let Hu=0;Hu<zu.length;Hu++)await this.$five.preloadPano(Number(zu[Hu]))}return this.emit("loaded",Bu),this.controller.emit("loaded",Bu),(Vu=this.controller.videoAgentScene)!=null&&Vu.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=Ru/1e3),this.controller.setAvatar(Bu.video.avatar),await((Uu=this.controller.videoAgentScene)==null?void 0:Uu.videoAgentMesh.play(Bu.video.url,Ru/1e3,Bu.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((Gu,zu)=>this.emit(Gu,zu)),this.controller.setLoading(!1),!0}get paused(){return!this.controller.playing}play(Bu){return this.controller.playing||(Bu&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=Bu/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setPlaying(!0)),!0}setAppearance(Bu){this.controller.setAppearance(Bu)}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.pause(),this.controller.dispose(),this.configs.container&&reactDom.exports.unmountComponentAtNode(this.configs.container)}}console.log(`

\u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
\u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
\u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
\u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

`);var _default="";export{CSS3DRenderPlugin as C,FiveCanvas as F,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,createFiveProvider as c,Raycaster as d,Fragment as e,reactDom as f,jsx as j,parseWork as p,react$1 as r,tweenProgress as t,unsafe__useFiveInstance as u};
