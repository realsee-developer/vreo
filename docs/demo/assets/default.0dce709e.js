var Gm=Object.defineProperty;var zm=(_u,$u,Tu)=>$u in _u?Gm(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu;var bv=(_u,$u,Tu)=>(zm(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const p$j=function(){const $u=document.createElement("link").relList;if($u&&$u.supports&&$u.supports("modulepreload"))return;for(const Pu of document.querySelectorAll('link[rel="modulepreload"]'))Cu(Pu);new MutationObserver(Pu=>{for(const Ru of Pu)if(Ru.type==="childList")for(const Lu of Ru.addedNodes)Lu.tagName==="LINK"&&Lu.rel==="modulepreload"&&Cu(Lu)}).observe(document,{childList:!0,subtree:!0});function Tu(Pu){const Ru={};return Pu.integrity&&(Ru.integrity=Pu.integrity),Pu.referrerpolicy&&(Ru.referrerPolicy=Pu.referrerpolicy),Pu.crossorigin==="use-credentials"?Ru.credentials="include":Pu.crossorigin==="anonymous"?Ru.credentials="omit":Ru.credentials="same-origin",Ru}function Cu(Pu){if(Pu.ep)return;Pu.ep=!0;const Ru=Tu(Pu);fetch(Pu.href,Ru)}};p$j();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(_u){if(_u.__esModule)return _u;var $u=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(_u).forEach(function(Tu){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}),$u}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(_u){if(_u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_u)}function shouldUseNative(){try{if(!Object.assign)return!1;var _u=new String("abc");if(_u[5]="de",Object.getOwnPropertyNames(_u)[0]==="5")return!1;for(var $u={},Tu=0;Tu<10;Tu++)$u["_"+String.fromCharCode(Tu)]=Tu;var Cu=Object.getOwnPropertyNames($u).map(function(Ru){return $u[Ru]});if(Cu.join("")!=="0123456789")return!1;var Pu={};return"abcdefghijklmnopqrst".split("").forEach(function(Ru){Pu[Ru]=Ru}),Object.keys(Object.assign({},Pu)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(_u,$u){for(var Tu,Cu=toObject(_u),Pu,Ru=1;Ru<arguments.length;Ru++){Tu=Object(arguments[Ru]);for(var Lu in Tu)hasOwnProperty.call(Tu,Lu)&&(Cu[Lu]=Tu[Lu]);if(getOwnPropertySymbols){Pu=getOwnPropertySymbols(Tu);for(var Bu=0;Bu<Pu.length;Bu++)propIsEnumerable.call(Tu,Pu[Bu])&&(Cu[Pu[Bu]]=Tu[Pu[Bu]])}}return Cu};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$k=objectAssign,n$o=typeof Symbol=="function"&&Symbol.for,p$i=n$o?Symbol.for("react.element"):60103,q$a=n$o?Symbol.for("react.portal"):60106,r$p=n$o?Symbol.for("react.fragment"):60107,t$i=n$o?Symbol.for("react.strict_mode"):60108,u$m=n$o?Symbol.for("react.profiler"):60114,v$g=n$o?Symbol.for("react.provider"):60109,w$h=n$o?Symbol.for("react.context"):60110,x$h=n$o?Symbol.for("react.forward_ref"):60112,y$m=n$o?Symbol.for("react.suspense"):60113,z$d=n$o?Symbol.for("react.memo"):60115,A$k=n$o?Symbol.for("react.lazy"):60116,B$c=typeof Symbol=="function"&&Symbol.iterator;function C$m(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Tu=1;Tu<arguments.length;Tu++)$u+="&args[]="+encodeURIComponent(arguments[Tu]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$k={};function F$f(_u,$u,Tu){this.props=_u,this.context=$u,this.refs=E$k,this.updater=Tu||D$e}F$f.prototype.isReactComponent={};F$f.prototype.setState=function(_u,$u){if(typeof _u!="object"&&typeof _u!="function"&&_u!=null)throw Error(C$m(85));this.updater.enqueueSetState(this,_u,$u,"setState")};F$f.prototype.forceUpdate=function(_u){this.updater.enqueueForceUpdate(this,_u,"forceUpdate")};function G$c(){}G$c.prototype=F$f.prototype;function H$d(_u,$u,Tu){this.props=_u,this.context=$u,this.refs=E$k,this.updater=Tu||D$e}var I$j=H$d.prototype=new G$c;I$j.constructor=H$d;l$k(I$j,F$f.prototype);I$j.isPureReactComponent=!0;var J$c={current:null},K$g=Object.prototype.hasOwnProperty,L$h={key:!0,ref:!0,__self:!0,__source:!0};function M$o(_u,$u,Tu){var Cu,Pu={},Ru=null,Lu=null;if($u!=null)for(Cu in $u.ref!==void 0&&(Lu=$u.ref),$u.key!==void 0&&(Ru=""+$u.key),$u)K$g.call($u,Cu)&&!L$h.hasOwnProperty(Cu)&&(Pu[Cu]=$u[Cu]);var Bu=arguments.length-2;if(Bu===1)Pu.children=Tu;else if(1<Bu){for(var Vu=Array(Bu),Ou=0;Ou<Bu;Ou++)Vu[Ou]=arguments[Ou+2];Pu.children=Vu}if(_u&&_u.defaultProps)for(Cu in Bu=_u.defaultProps,Bu)Pu[Cu]===void 0&&(Pu[Cu]=Bu[Cu]);return{$$typeof:p$i,type:_u,key:Ru,ref:Lu,props:Pu,_owner:J$c.current}}function N$c(_u,$u){return{$$typeof:p$i,type:_u.type,key:$u,ref:_u.ref,props:_u.props,_owner:_u._owner}}function O$g(_u){return typeof _u=="object"&&_u!==null&&_u.$$typeof===p$i}function escape$1(_u){var $u={"=":"=0",":":"=2"};return"$"+(""+_u).replace(/[=:]/g,function(Tu){return $u[Tu]})}var P$g=/\/+/g,Q$g=[];function R$f(_u,$u,Tu,Cu){if(Q$g.length){var Pu=Q$g.pop();return Pu.result=_u,Pu.keyPrefix=$u,Pu.func=Tu,Pu.context=Cu,Pu.count=0,Pu}return{result:_u,keyPrefix:$u,func:Tu,context:Cu,count:0}}function S$e(_u){_u.result=null,_u.keyPrefix=null,_u.func=null,_u.context=null,_u.count=0,10>Q$g.length&&Q$g.push(_u)}function T$e(_u,$u,Tu,Cu){var Pu=typeof _u;(Pu==="undefined"||Pu==="boolean")&&(_u=null);var Ru=!1;if(_u===null)Ru=!0;else switch(Pu){case"string":case"number":Ru=!0;break;case"object":switch(_u.$$typeof){case p$i:case q$a:Ru=!0}}if(Ru)return Tu(Cu,_u,$u===""?"."+U$e(_u,0):$u),1;if(Ru=0,$u=$u===""?".":$u+":",Array.isArray(_u))for(var Lu=0;Lu<_u.length;Lu++){Pu=_u[Lu];var Bu=$u+U$e(Pu,Lu);Ru+=T$e(Pu,Bu,Tu,Cu)}else if(_u===null||typeof _u!="object"?Bu=null:(Bu=B$c&&_u[B$c]||_u["@@iterator"],Bu=typeof Bu=="function"?Bu:null),typeof Bu=="function")for(_u=Bu.call(_u),Lu=0;!(Pu=_u.next()).done;)Pu=Pu.value,Bu=$u+U$e(Pu,Lu++),Ru+=T$e(Pu,Bu,Tu,Cu);else if(Pu==="object")throw Tu=""+_u,Error(C$m(31,Tu==="[object Object]"?"object with keys {"+Object.keys(_u).join(", ")+"}":Tu,""));return Ru}function V$d(_u,$u,Tu){return _u==null?0:T$e(_u,"",$u,Tu)}function U$e(_u,$u){return typeof _u=="object"&&_u!==null&&_u.key!=null?escape$1(_u.key):$u.toString(36)}function W$a(_u,$u){_u.func.call(_u.context,$u,_u.count++)}function aa$3(_u,$u,Tu){var Cu=_u.result,Pu=_u.keyPrefix;_u=_u.func.call(_u.context,$u,_u.count++),Array.isArray(_u)?X$7(_u,Cu,Tu,function(Ru){return Ru}):_u!=null&&(O$g(_u)&&(_u=N$c(_u,Pu+(!_u.key||$u&&$u.key===_u.key?"":(""+_u.key).replace(P$g,"$&/")+"/")+Tu)),Cu.push(_u))}function X$7(_u,$u,Tu,Cu,Pu){var Ru="";Tu!=null&&(Ru=(""+Tu).replace(P$g,"$&/")+"/"),$u=R$f($u,Ru,Cu,Pu),V$d(_u,aa$3,$u),S$e($u)}var Y$c={current:null};function Z$9(){var _u=Y$c.current;if(_u===null)throw Error(C$m(321));return _u}var ba$3={ReactCurrentDispatcher:Y$c,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$c,IsSomeRendererActing:{current:!1},assign:l$k};react_production_min.Children={map:function(_u,$u,Tu){if(_u==null)return _u;var Cu=[];return X$7(_u,Cu,null,$u,Tu),Cu},forEach:function(_u,$u,Tu){if(_u==null)return _u;$u=R$f(null,null,$u,Tu),V$d(_u,W$a,$u),S$e($u)},count:function(_u){return V$d(_u,function(){return null},null)},toArray:function(_u){var $u=[];return X$7(_u,$u,null,function(Tu){return Tu}),$u},only:function(_u){if(!O$g(_u))throw Error(C$m(143));return _u}};react_production_min.Component=F$f;react_production_min.Fragment=r$p;react_production_min.Profiler=u$m;react_production_min.PureComponent=H$d;react_production_min.StrictMode=t$i;react_production_min.Suspense=y$m;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$3;react_production_min.cloneElement=function(_u,$u,Tu){if(_u==null)throw Error(C$m(267,_u));var Cu=l$k({},_u.props),Pu=_u.key,Ru=_u.ref,Lu=_u._owner;if($u!=null){if($u.ref!==void 0&&(Ru=$u.ref,Lu=J$c.current),$u.key!==void 0&&(Pu=""+$u.key),_u.type&&_u.type.defaultProps)var Bu=_u.type.defaultProps;for(Vu in $u)K$g.call($u,Vu)&&!L$h.hasOwnProperty(Vu)&&(Cu[Vu]=$u[Vu]===void 0&&Bu!==void 0?Bu[Vu]:$u[Vu])}var Vu=arguments.length-2;if(Vu===1)Cu.children=Tu;else if(1<Vu){Bu=Array(Vu);for(var Ou=0;Ou<Vu;Ou++)Bu[Ou]=arguments[Ou+2];Cu.children=Bu}return{$$typeof:p$i,type:_u.type,key:Pu,ref:Ru,props:Cu,_owner:Lu}};react_production_min.createContext=function(_u,$u){return $u===void 0&&($u=null),_u={$$typeof:w$h,_calculateChangedBits:$u,_currentValue:_u,_currentValue2:_u,_threadCount:0,Provider:null,Consumer:null},_u.Provider={$$typeof:v$g,_context:_u},_u.Consumer=_u};react_production_min.createElement=M$o;react_production_min.createFactory=function(_u){var $u=M$o.bind(null,_u);return $u.type=_u,$u};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_u){return{$$typeof:x$h,render:_u}};react_production_min.isValidElement=O$g;react_production_min.lazy=function(_u){return{$$typeof:A$k,_ctor:_u,_status:-1,_result:null}};react_production_min.memo=function(_u,$u){return{$$typeof:z$d,type:_u,compare:$u===void 0?null:$u}};react_production_min.useCallback=function(_u,$u){return Z$9().useCallback(_u,$u)};react_production_min.useContext=function(_u,$u){return Z$9().useContext(_u,$u)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(_u,$u){return Z$9().useEffect(_u,$u)};react_production_min.useImperativeHandle=function(_u,$u,Tu){return Z$9().useImperativeHandle(_u,$u,Tu)};react_production_min.useLayoutEffect=function(_u,$u){return Z$9().useLayoutEffect(_u,$u)};react_production_min.useMemo=function(_u,$u){return Z$9().useMemo(_u,$u)};react_production_min.useReducer=function(_u,$u,Tu){return Z$9().useReducer(_u,$u,Tu)};react_production_min.useRef=function(_u){return Z$9().useRef(_u)};react_production_min.useState=function(_u){return Z$9().useState(_u)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_u){var $u,Tu,Cu,Pu,Ru;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Lu=null,Bu=null,Vu=function(){if(Lu!==null)try{var Ep=_u.unstable_now();Lu(!0,Ep),Lu=null}catch(Bp){throw setTimeout(Vu,0),Bp}},Ou=Date.now();_u.unstable_now=function(){return Date.now()-Ou},$u=function(Ep){Lu!==null?setTimeout($u,0,Ep):(Lu=Ep,setTimeout(Vu,0))},Tu=function(Ep,Bp){Bu=setTimeout(Ep,Bp)},Cu=function(){clearTimeout(Bu)},Pu=function(){return!1},Ru=_u.unstable_forceFrameRate=function(){}}else{var Du=window.performance,ku=window.Date,Fu=window.setTimeout,Nu=window.clearTimeout;if(typeof console!="undefined"){var Gu=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Gu!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof Du=="object"&&typeof Du.now=="function")_u.unstable_now=function(){return Du.now()};else{var zu=ku.now();_u.unstable_now=function(){return ku.now()-zu}}var Hu=!1,Uu=null,ju=-1,Wu=5,Qu=0;Pu=function(){return _u.unstable_now()>=Qu},Ru=function(){},_u.unstable_forceFrameRate=function(Ep){0>Ep||125<Ep?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Wu=0<Ep?Math.floor(1e3/Ep):5};var qu=new MessageChannel,Yu=qu.port2;qu.port1.onmessage=function(){if(Uu!==null){var Ep=_u.unstable_now();Qu=Ep+Wu;try{Uu(!0,Ep)?Yu.postMessage(null):(Hu=!1,Uu=null)}catch(Bp){throw Yu.postMessage(null),Bp}}else Hu=!1},$u=function(Ep){Uu=Ep,Hu||(Hu=!0,Yu.postMessage(null))},Tu=function(Ep,Bp){ju=Fu(function(){Ep(_u.unstable_now())},Bp)},Cu=function(){Nu(ju),ju=-1}}function Ju(Ep,Bp){var Ip=Ep.length;Ep.push(Bp);e:for(;;){var ep=Ip-1>>>1,_f=Ep[ep];if(_f!==void 0&&0<Ku(_f,Bp))Ep[ep]=Bp,Ep[Ip]=_f,Ip=ep;else break e}}function _d(Ep){return Ep=Ep[0],Ep===void 0?null:Ep}function tp(Ep){var Bp=Ep[0];if(Bp!==void 0){var Ip=Ep.pop();if(Ip!==Bp){Ep[0]=Ip;e:for(var ep=0,_f=Ep.length;ep<_f;){var op=2*(ep+1)-1,rp=Ep[op],up=op+1,cp=Ep[up];if(rp!==void 0&&0>Ku(rp,Ip))cp!==void 0&&0>Ku(cp,rp)?(Ep[ep]=cp,Ep[up]=Ip,ep=up):(Ep[ep]=rp,Ep[op]=Ip,ep=op);else if(cp!==void 0&&0>Ku(cp,Ip))Ep[ep]=cp,Ep[up]=Ip,ep=up;else break e}}return Bp}return null}function Ku(Ep,Bp){var Ip=Ep.sortIndex-Bp.sortIndex;return Ip!==0?Ip:Ep.id-Bp.id}var Xu=[],Zu=[],_c=1,Xc=null,_h=3,ip=!1,ap=!1,hp=!1;function Ap(Ep){for(var Bp=_d(Zu);Bp!==null;){if(Bp.callback===null)tp(Zu);else if(Bp.startTime<=Ep)tp(Zu),Bp.sortIndex=Bp.expirationTime,Ju(Xu,Bp);else break;Bp=_d(Zu)}}function gp(Ep){if(hp=!1,Ap(Ep),!ap)if(_d(Xu)!==null)ap=!0,$u(Rp);else{var Bp=_d(Zu);Bp!==null&&Tu(gp,Bp.startTime-Ep)}}function Rp(Ep,Bp){ap=!1,hp&&(hp=!1,Cu()),ip=!0;var Ip=_h;try{for(Ap(Bp),Xc=_d(Xu);Xc!==null&&(!(Xc.expirationTime>Bp)||Ep&&!Pu());){var ep=Xc.callback;if(ep!==null){Xc.callback=null,_h=Xc.priorityLevel;var _f=ep(Xc.expirationTime<=Bp);Bp=_u.unstable_now(),typeof _f=="function"?Xc.callback=_f:Xc===_d(Xu)&&tp(Xu),Ap(Bp)}else tp(Xu);Xc=_d(Xu)}if(Xc!==null)var op=!0;else{var rp=_d(Zu);rp!==null&&Tu(gp,rp.startTime-Bp),op=!1}return op}finally{Xc=null,_h=Ip,ip=!1}}function Sp(Ep){switch(Ep){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Dp=Ru;_u.unstable_IdlePriority=5,_u.unstable_ImmediatePriority=1,_u.unstable_LowPriority=4,_u.unstable_NormalPriority=3,_u.unstable_Profiling=null,_u.unstable_UserBlockingPriority=2,_u.unstable_cancelCallback=function(Ep){Ep.callback=null},_u.unstable_continueExecution=function(){ap||ip||(ap=!0,$u(Rp))},_u.unstable_getCurrentPriorityLevel=function(){return _h},_u.unstable_getFirstCallbackNode=function(){return _d(Xu)},_u.unstable_next=function(Ep){switch(_h){case 1:case 2:case 3:var Bp=3;break;default:Bp=_h}var Ip=_h;_h=Bp;try{return Ep()}finally{_h=Ip}},_u.unstable_pauseExecution=function(){},_u.unstable_requestPaint=Dp,_u.unstable_runWithPriority=function(Ep,Bp){switch(Ep){case 1:case 2:case 3:case 4:case 5:break;default:Ep=3}var Ip=_h;_h=Ep;try{return Bp()}finally{_h=Ip}},_u.unstable_scheduleCallback=function(Ep,Bp,Ip){var ep=_u.unstable_now();if(typeof Ip=="object"&&Ip!==null){var _f=Ip.delay;_f=typeof _f=="number"&&0<_f?ep+_f:ep,Ip=typeof Ip.timeout=="number"?Ip.timeout:Sp(Ep)}else Ip=Sp(Ep),_f=ep;return Ip=_f+Ip,Ep={id:_c++,callback:Bp,priorityLevel:Ep,startTime:_f,expirationTime:Ip,sortIndex:-1},_f>ep?(Ep.sortIndex=_f,Ju(Zu,Ep),_d(Xu)===null&&Ep===_d(Zu)&&(hp?Cu():hp=!0,Tu(gp,_f-ep))):(Ep.sortIndex=Ip,Ju(Xu,Ep),ap||ip||(ap=!0,$u(Rp))),Ep},_u.unstable_shouldYield=function(){var Ep=_u.unstable_now();Ap(Ep);var Bp=_d(Xu);return Bp!==Xc&&Xc!==null&&Bp!==null&&Bp.callback!==null&&Bp.startTime<=Ep&&Bp.expirationTime<Xc.expirationTime||Pu()},_u.unstable_wrapCallback=function(Ep){var Bp=_h;return function(){var Ip=_h;_h=Bp;try{return Ep.apply(this,arguments)}finally{_h=Ip}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=react$1.exports,n$n=objectAssign,r$o=scheduler.exports;function u$l(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Tu=1;Tu<arguments.length;Tu++)$u+="&args[]="+encodeURIComponent(arguments[Tu]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$2)throw Error(u$l(227));function ba$2(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu){var Ou=Array.prototype.slice.call(arguments,3);try{$u.apply(Tu,Ou)}catch(Du){this.onError(Du)}}var da$2=!1,ea$2=null,fa$2=!1,ha$2=null,ia$2={onError:function(_u){da$2=!0,ea$2=_u}};function ja$1(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu){da$2=!1,ea$2=null,ba$2.apply(ia$2,arguments)}function ka$1(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu){if(ja$1.apply(this,arguments),da$2){if(da$2){var Ou=ea$2;da$2=!1,ea$2=null}else throw Error(u$l(198));fa$2||(fa$2=!0,ha$2=Ou)}}var la$1=null,ma$1=null,na$1=null;function oa$1(_u,$u,Tu){var Cu=_u.type||"unknown-event";_u.currentTarget=na$1(Tu),ka$1(Cu,$u,void 0,_u),_u.currentTarget=null}var pa$1=null,qa$1={};function ra$1(){if(pa$1)for(var _u in qa$1){var $u=qa$1[_u],Tu=pa$1.indexOf(_u);if(!(-1<Tu))throw Error(u$l(96,_u));if(!sa$1[Tu]){if(!$u.extractEvents)throw Error(u$l(97,_u));sa$1[Tu]=$u,Tu=$u.eventTypes;for(var Cu in Tu){var Pu=void 0,Ru=Tu[Cu],Lu=$u,Bu=Cu;if(ta$1.hasOwnProperty(Bu))throw Error(u$l(99,Bu));ta$1[Bu]=Ru;var Vu=Ru.phasedRegistrationNames;if(Vu){for(Pu in Vu)Vu.hasOwnProperty(Pu)&&ua$1(Vu[Pu],Lu,Bu);Pu=!0}else Ru.registrationName?(ua$1(Ru.registrationName,Lu,Bu),Pu=!0):Pu=!1;if(!Pu)throw Error(u$l(98,Cu,_u))}}}}function ua$1(_u,$u,Tu){if(va$1[_u])throw Error(u$l(100,_u));va$1[_u]=$u,wa$1[_u]=$u.eventTypes[Tu].dependencies}var sa$1=[],ta$1={},va$1={},wa$1={};function xa$1(_u){var $u=!1,Tu;for(Tu in _u)if(_u.hasOwnProperty(Tu)){var Cu=_u[Tu];if(!qa$1.hasOwnProperty(Tu)||qa$1[Tu]!==Cu){if(qa$1[Tu])throw Error(u$l(102,Tu));qa$1[Tu]=Cu,$u=!0}}$u&&ra$1()}var ya$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za$1=null,Aa$1=null,Ba$1=null;function Ca$1(_u){if(_u=ma$1(_u)){if(typeof za$1!="function")throw Error(u$l(280));var $u=_u.stateNode;$u&&($u=la$1($u),za$1(_u.stateNode,_u.type,$u))}}function Da$1(_u){Aa$1?Ba$1?Ba$1.push(_u):Ba$1=[_u]:Aa$1=_u}function Ea$1(){if(Aa$1){var _u=Aa$1,$u=Ba$1;if(Ba$1=Aa$1=null,Ca$1(_u),$u)for(_u=0;_u<$u.length;_u++)Ca$1($u[_u])}}function Fa$1(_u,$u){return _u($u)}function Ga$1(_u,$u,Tu,Cu,Pu){return _u($u,Tu,Cu,Pu)}function Ha$1(){}var Ia$1=Fa$1,Ja$1=!1,Ka$1=!1;function La$1(){(Aa$1!==null||Ba$1!==null)&&(Ha$1(),Ea$1())}function Ma$1(_u,$u,Tu){if(Ka$1)return _u($u,Tu);Ka$1=!0;try{return Ia$1(_u,$u,Tu)}finally{Ka$1=!1,La$1()}}var Na$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa$1=Object.prototype.hasOwnProperty,Pa$1={},Qa$1={};function Ra$1(_u){return Oa$1.call(Qa$1,_u)?!0:Oa$1.call(Pa$1,_u)?!1:Na$1.test(_u)?Qa$1[_u]=!0:(Pa$1[_u]=!0,!1)}function Sa$1(_u,$u,Tu,Cu){if(Tu!==null&&Tu.type===0)return!1;switch(typeof $u){case"function":case"symbol":return!0;case"boolean":return Cu?!1:Tu!==null?!Tu.acceptsBooleans:(_u=_u.toLowerCase().slice(0,5),_u!=="data-"&&_u!=="aria-");default:return!1}}function Ta$1(_u,$u,Tu,Cu){if($u===null||typeof $u=="undefined"||Sa$1(_u,$u,Tu,Cu))return!0;if(Cu)return!1;if(Tu!==null)switch(Tu.type){case 3:return!$u;case 4:return $u===!1;case 5:return isNaN($u);case 6:return isNaN($u)||1>$u}return!1}function v$f(_u,$u,Tu,Cu,Pu,Ru){this.acceptsBooleans=$u===2||$u===3||$u===4,this.attributeName=Cu,this.attributeNamespace=Pu,this.mustUseProperty=Tu,this.propertyName=_u,this.type=$u,this.sanitizeURL=Ru}var C$l={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_u){C$l[_u]=new v$f(_u,0,!1,_u,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_u){var $u=_u[0];C$l[$u]=new v$f($u,1,!1,_u[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_u){C$l[_u]=new v$f(_u,2,!1,_u.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_u){C$l[_u]=new v$f(_u,2,!1,_u,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_u){C$l[_u]=new v$f(_u,3,!1,_u.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(_u){C$l[_u]=new v$f(_u,3,!0,_u,null,!1)});["capture","download"].forEach(function(_u){C$l[_u]=new v$f(_u,4,!1,_u,null,!1)});["cols","rows","size","span"].forEach(function(_u){C$l[_u]=new v$f(_u,6,!1,_u,null,!1)});["rowSpan","start"].forEach(function(_u){C$l[_u]=new v$f(_u,5,!1,_u.toLowerCase(),null,!1)});var Ua$1=/[\-:]([a-z])/g;function Va$1(_u){return _u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_u){var $u=_u.replace(Ua$1,Va$1);C$l[$u]=new v$f($u,1,!1,_u,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_u){var $u=_u.replace(Ua$1,Va$1);C$l[$u]=new v$f($u,1,!1,_u,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(_u){var $u=_u.replace(Ua$1,Va$1);C$l[$u]=new v$f($u,1,!1,_u,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(_u){C$l[_u]=new v$f(_u,1,!1,_u.toLowerCase(),null,!1)});C$l.xlinkHref=new v$f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(_u){C$l[_u]=new v$f(_u,1,!1,_u.toLowerCase(),null,!0)});var Wa$1=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa$1.hasOwnProperty("ReactCurrentDispatcher")||(Wa$1.ReactCurrentDispatcher={current:null});Wa$1.hasOwnProperty("ReactCurrentBatchConfig")||(Wa$1.ReactCurrentBatchConfig={suspense:null});function Xa$1(_u,$u,Tu,Cu){var Pu=C$l.hasOwnProperty($u)?C$l[$u]:null,Ru=Pu!==null?Pu.type===0:Cu?!1:!(!(2<$u.length)||$u[0]!=="o"&&$u[0]!=="O"||$u[1]!=="n"&&$u[1]!=="N");Ru||(Ta$1($u,Tu,Pu,Cu)&&(Tu=null),Cu||Pu===null?Ra$1($u)&&(Tu===null?_u.removeAttribute($u):_u.setAttribute($u,""+Tu)):Pu.mustUseProperty?_u[Pu.propertyName]=Tu===null?Pu.type===3?!1:"":Tu:($u=Pu.attributeName,Cu=Pu.attributeNamespace,Tu===null?_u.removeAttribute($u):(Pu=Pu.type,Tu=Pu===3||Pu===4&&Tu===!0?"":""+Tu,Cu?_u.setAttributeNS(Cu,$u,Tu):_u.setAttribute($u,Tu))))}var Ya$1=/^(.*)[\\\/]/,E$j=typeof Symbol=="function"&&Symbol.for,Za$1=E$j?Symbol.for("react.element"):60103,$a$1=E$j?Symbol.for("react.portal"):60106,ab=E$j?Symbol.for("react.fragment"):60107,bb=E$j?Symbol.for("react.strict_mode"):60108,cb=E$j?Symbol.for("react.profiler"):60114,db=E$j?Symbol.for("react.provider"):60109,eb=E$j?Symbol.for("react.context"):60110,fb=E$j?Symbol.for("react.concurrent_mode"):60111,gb=E$j?Symbol.for("react.forward_ref"):60112,hb=E$j?Symbol.for("react.suspense"):60113,ib=E$j?Symbol.for("react.suspense_list"):60120,jb=E$j?Symbol.for("react.memo"):60115,kb=E$j?Symbol.for("react.lazy"):60116,lb=E$j?Symbol.for("react.block"):60121,mb=typeof Symbol=="function"&&Symbol.iterator;function nb(_u){return _u===null||typeof _u!="object"?null:(_u=mb&&_u[mb]||_u["@@iterator"],typeof _u=="function"?_u:null)}function ob(_u){if(_u._status===-1){_u._status=0;var $u=_u._ctor;$u=$u(),_u._result=$u,$u.then(function(Tu){_u._status===0&&(Tu=Tu.default,_u._status=1,_u._result=Tu)},function(Tu){_u._status===0&&(_u._status=2,_u._result=Tu)})}}function pb(_u){if(_u==null)return null;if(typeof _u=="function")return _u.displayName||_u.name||null;if(typeof _u=="string")return _u;switch(_u){case ab:return"Fragment";case $a$1:return"Portal";case cb:return"Profiler";case bb:return"StrictMode";case hb:return"Suspense";case ib:return"SuspenseList"}if(typeof _u=="object")switch(_u.$$typeof){case eb:return"Context.Consumer";case db:return"Context.Provider";case gb:var $u=_u.render;return $u=$u.displayName||$u.name||"",_u.displayName||($u!==""?"ForwardRef("+$u+")":"ForwardRef");case jb:return pb(_u.type);case lb:return pb(_u.render);case kb:if(_u=_u._status===1?_u._result:null)return pb(_u)}return null}function qb(_u){var $u="";do{e:switch(_u.tag){case 3:case 4:case 6:case 7:case 10:case 9:var Tu="";break e;default:var Cu=_u._debugOwner,Pu=_u._debugSource,Ru=pb(_u.type);Tu=null,Cu&&(Tu=pb(Cu.type)),Cu=Ru,Ru="",Pu?Ru=" (at "+Pu.fileName.replace(Ya$1,"")+":"+Pu.lineNumber+")":Tu&&(Ru=" (created by "+Tu+")"),Tu=`
    in `+(Cu||"Unknown")+Ru}$u+=Tu,_u=_u.return}while(_u);return $u}function rb(_u){switch(typeof _u){case"boolean":case"number":case"object":case"string":case"undefined":return _u;default:return""}}function sb(_u){var $u=_u.type;return(_u=_u.nodeName)&&_u.toLowerCase()==="input"&&($u==="checkbox"||$u==="radio")}function tb(_u){var $u=sb(_u)?"checked":"value",Tu=Object.getOwnPropertyDescriptor(_u.constructor.prototype,$u),Cu=""+_u[$u];if(!_u.hasOwnProperty($u)&&typeof Tu!="undefined"&&typeof Tu.get=="function"&&typeof Tu.set=="function"){var Pu=Tu.get,Ru=Tu.set;return Object.defineProperty(_u,$u,{configurable:!0,get:function(){return Pu.call(this)},set:function(Lu){Cu=""+Lu,Ru.call(this,Lu)}}),Object.defineProperty(_u,$u,{enumerable:Tu.enumerable}),{getValue:function(){return Cu},setValue:function(Lu){Cu=""+Lu},stopTracking:function(){_u._valueTracker=null,delete _u[$u]}}}}function xb(_u){_u._valueTracker||(_u._valueTracker=tb(_u))}function yb(_u){if(!_u)return!1;var $u=_u._valueTracker;if(!$u)return!0;var Tu=$u.getValue(),Cu="";return _u&&(Cu=sb(_u)?_u.checked?"true":"false":_u.value),_u=Cu,_u!==Tu?($u.setValue(_u),!0):!1}function zb(_u,$u){var Tu=$u.checked;return n$n({},$u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Tu!=null?Tu:_u._wrapperState.initialChecked})}function Ab(_u,$u){var Tu=$u.defaultValue==null?"":$u.defaultValue,Cu=$u.checked!=null?$u.checked:$u.defaultChecked;Tu=rb($u.value!=null?$u.value:Tu),_u._wrapperState={initialChecked:Cu,initialValue:Tu,controlled:$u.type==="checkbox"||$u.type==="radio"?$u.checked!=null:$u.value!=null}}function Bb(_u,$u){$u=$u.checked,$u!=null&&Xa$1(_u,"checked",$u,!1)}function Cb(_u,$u){Bb(_u,$u);var Tu=rb($u.value),Cu=$u.type;if(Tu!=null)Cu==="number"?(Tu===0&&_u.value===""||_u.value!=Tu)&&(_u.value=""+Tu):_u.value!==""+Tu&&(_u.value=""+Tu);else if(Cu==="submit"||Cu==="reset"){_u.removeAttribute("value");return}$u.hasOwnProperty("value")?Db(_u,$u.type,Tu):$u.hasOwnProperty("defaultValue")&&Db(_u,$u.type,rb($u.defaultValue)),$u.checked==null&&$u.defaultChecked!=null&&(_u.defaultChecked=!!$u.defaultChecked)}function Eb(_u,$u,Tu){if($u.hasOwnProperty("value")||$u.hasOwnProperty("defaultValue")){var Cu=$u.type;if(!(Cu!=="submit"&&Cu!=="reset"||$u.value!==void 0&&$u.value!==null))return;$u=""+_u._wrapperState.initialValue,Tu||$u===_u.value||(_u.value=$u),_u.defaultValue=$u}Tu=_u.name,Tu!==""&&(_u.name=""),_u.defaultChecked=!!_u._wrapperState.initialChecked,Tu!==""&&(_u.name=Tu)}function Db(_u,$u,Tu){($u!=="number"||_u.ownerDocument.activeElement!==_u)&&(Tu==null?_u.defaultValue=""+_u._wrapperState.initialValue:_u.defaultValue!==""+Tu&&(_u.defaultValue=""+Tu))}function Fb(_u){var $u="";return aa$2.Children.forEach(_u,function(Tu){Tu!=null&&($u+=Tu)}),$u}function Gb(_u,$u){return _u=n$n({children:void 0},$u),($u=Fb($u.children))&&(_u.children=$u),_u}function Hb(_u,$u,Tu,Cu){if(_u=_u.options,$u){$u={};for(var Pu=0;Pu<Tu.length;Pu++)$u["$"+Tu[Pu]]=!0;for(Tu=0;Tu<_u.length;Tu++)Pu=$u.hasOwnProperty("$"+_u[Tu].value),_u[Tu].selected!==Pu&&(_u[Tu].selected=Pu),Pu&&Cu&&(_u[Tu].defaultSelected=!0)}else{for(Tu=""+rb(Tu),$u=null,Pu=0;Pu<_u.length;Pu++){if(_u[Pu].value===Tu){_u[Pu].selected=!0,Cu&&(_u[Pu].defaultSelected=!0);return}$u!==null||_u[Pu].disabled||($u=_u[Pu])}$u!==null&&($u.selected=!0)}}function Ib(_u,$u){if($u.dangerouslySetInnerHTML!=null)throw Error(u$l(91));return n$n({},$u,{value:void 0,defaultValue:void 0,children:""+_u._wrapperState.initialValue})}function Jb(_u,$u){var Tu=$u.value;if(Tu==null){if(Tu=$u.children,$u=$u.defaultValue,Tu!=null){if($u!=null)throw Error(u$l(92));if(Array.isArray(Tu)){if(!(1>=Tu.length))throw Error(u$l(93));Tu=Tu[0]}$u=Tu}$u==null&&($u=""),Tu=$u}_u._wrapperState={initialValue:rb(Tu)}}function Kb(_u,$u){var Tu=rb($u.value),Cu=rb($u.defaultValue);Tu!=null&&(Tu=""+Tu,Tu!==_u.value&&(_u.value=Tu),$u.defaultValue==null&&_u.defaultValue!==Tu&&(_u.defaultValue=Tu)),Cu!=null&&(_u.defaultValue=""+Cu)}function Lb(_u){var $u=_u.textContent;$u===_u._wrapperState.initialValue&&$u!==""&&$u!==null&&(_u.value=$u)}var Mb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb(_u){switch(_u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(_u,$u){return _u==null||_u==="http://www.w3.org/1999/xhtml"?Nb($u):_u==="http://www.w3.org/2000/svg"&&$u==="foreignObject"?"http://www.w3.org/1999/xhtml":_u}var Pb,Qb=function(_u){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function($u,Tu,Cu,Pu){MSApp.execUnsafeLocalFunction(function(){return _u($u,Tu,Cu,Pu)})}:_u}(function(_u,$u){if(_u.namespaceURI!==Mb.svg||"innerHTML"in _u)_u.innerHTML=$u;else{for(Pb=Pb||document.createElement("div"),Pb.innerHTML="<svg>"+$u.valueOf().toString()+"</svg>",$u=Pb.firstChild;_u.firstChild;)_u.removeChild(_u.firstChild);for(;$u.firstChild;)_u.appendChild($u.firstChild)}});function Rb(_u,$u){if($u){var Tu=_u.firstChild;if(Tu&&Tu===_u.lastChild&&Tu.nodeType===3){Tu.nodeValue=$u;return}}_u.textContent=$u}function Sb(_u,$u){var Tu={};return Tu[_u.toLowerCase()]=$u.toLowerCase(),Tu["Webkit"+_u]="webkit"+$u,Tu["Moz"+_u]="moz"+$u,Tu}var Tb={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},Ub={},Vb={};ya$1&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),"TransitionEvent"in window||delete Tb.transitionend.transition);function Wb(_u){if(Ub[_u])return Ub[_u];if(!Tb[_u])return _u;var $u=Tb[_u],Tu;for(Tu in $u)if($u.hasOwnProperty(Tu)&&Tu in Vb)return Ub[_u]=$u[Tu];return _u}var Xb=Wb("animationend"),Yb=Wb("animationiteration"),Zb=Wb("animationstart"),$b=Wb("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new(typeof WeakMap=="function"?WeakMap:Map);function cc(_u){var $u=bc.get(_u);return $u===void 0&&($u=new Map,bc.set(_u,$u)),$u}function dc(_u){var $u=_u,Tu=_u;if(_u.alternate)for(;$u.return;)$u=$u.return;else{_u=$u;do $u=_u,($u.effectTag&1026)!==0&&(Tu=$u.return),_u=$u.return;while(_u)}return $u.tag===3?Tu:null}function ec(_u){if(_u.tag===13){var $u=_u.memoizedState;if($u===null&&(_u=_u.alternate,_u!==null&&($u=_u.memoizedState)),$u!==null)return $u.dehydrated}return null}function fc(_u){if(dc(_u)!==_u)throw Error(u$l(188))}function gc(_u){var $u=_u.alternate;if(!$u){if($u=dc(_u),$u===null)throw Error(u$l(188));return $u!==_u?null:_u}for(var Tu=_u,Cu=$u;;){var Pu=Tu.return;if(Pu===null)break;var Ru=Pu.alternate;if(Ru===null){if(Cu=Pu.return,Cu!==null){Tu=Cu;continue}break}if(Pu.child===Ru.child){for(Ru=Pu.child;Ru;){if(Ru===Tu)return fc(Pu),_u;if(Ru===Cu)return fc(Pu),$u;Ru=Ru.sibling}throw Error(u$l(188))}if(Tu.return!==Cu.return)Tu=Pu,Cu=Ru;else{for(var Lu=!1,Bu=Pu.child;Bu;){if(Bu===Tu){Lu=!0,Tu=Pu,Cu=Ru;break}if(Bu===Cu){Lu=!0,Cu=Pu,Tu=Ru;break}Bu=Bu.sibling}if(!Lu){for(Bu=Ru.child;Bu;){if(Bu===Tu){Lu=!0,Tu=Ru,Cu=Pu;break}if(Bu===Cu){Lu=!0,Cu=Ru,Tu=Pu;break}Bu=Bu.sibling}if(!Lu)throw Error(u$l(189))}}if(Tu.alternate!==Cu)throw Error(u$l(190))}if(Tu.tag!==3)throw Error(u$l(188));return Tu.stateNode.current===Tu?_u:$u}function hc(_u){if(_u=gc(_u),!_u)return null;for(var $u=_u;;){if($u.tag===5||$u.tag===6)return $u;if($u.child)$u.child.return=$u,$u=$u.child;else{if($u===_u)break;for(;!$u.sibling;){if(!$u.return||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}}return null}function ic(_u,$u){if($u==null)throw Error(u$l(30));return _u==null?$u:Array.isArray(_u)?Array.isArray($u)?(_u.push.apply(_u,$u),_u):(_u.push($u),_u):Array.isArray($u)?[_u].concat($u):[_u,$u]}function jc(_u,$u,Tu){Array.isArray(_u)?_u.forEach($u,Tu):_u&&$u.call(Tu,_u)}var kc=null;function lc(_u){if(_u){var $u=_u._dispatchListeners,Tu=_u._dispatchInstances;if(Array.isArray($u))for(var Cu=0;Cu<$u.length&&!_u.isPropagationStopped();Cu++)oa$1(_u,$u[Cu],Tu[Cu]);else $u&&oa$1(_u,$u,Tu);_u._dispatchListeners=null,_u._dispatchInstances=null,_u.isPersistent()||_u.constructor.release(_u)}}function mc(_u){if(_u!==null&&(kc=ic(kc,_u)),_u=kc,kc=null,_u){if(jc(_u,lc),kc)throw Error(u$l(95));if(fa$2)throw _u=ha$2,fa$2=!1,ha$2=null,_u}}function nc(_u){return _u=_u.target||_u.srcElement||window,_u.correspondingUseElement&&(_u=_u.correspondingUseElement),_u.nodeType===3?_u.parentNode:_u}function oc(_u){if(!ya$1)return!1;_u="on"+_u;var $u=_u in document;return $u||($u=document.createElement("div"),$u.setAttribute(_u,"return;"),$u=typeof $u[_u]=="function"),$u}var pc=[];function qc(_u){_u.topLevelType=null,_u.nativeEvent=null,_u.targetInst=null,_u.ancestors.length=0,10>pc.length&&pc.push(_u)}function rc(_u,$u,Tu,Cu){if(pc.length){var Pu=pc.pop();return Pu.topLevelType=_u,Pu.eventSystemFlags=Cu,Pu.nativeEvent=$u,Pu.targetInst=Tu,Pu}return{topLevelType:_u,eventSystemFlags:Cu,nativeEvent:$u,targetInst:Tu,ancestors:[]}}function sc(_u){var $u=_u.targetInst,Tu=$u;do{if(!Tu){_u.ancestors.push(Tu);break}var Cu=Tu;if(Cu.tag===3)Cu=Cu.stateNode.containerInfo;else{for(;Cu.return;)Cu=Cu.return;Cu=Cu.tag!==3?null:Cu.stateNode.containerInfo}if(!Cu)break;$u=Tu.tag,$u!==5&&$u!==6||_u.ancestors.push(Tu),Tu=tc(Cu)}while(Tu);for(Tu=0;Tu<_u.ancestors.length;Tu++){$u=_u.ancestors[Tu];var Pu=nc(_u.nativeEvent);Cu=_u.topLevelType;var Ru=_u.nativeEvent,Lu=_u.eventSystemFlags;Tu===0&&(Lu|=64);for(var Bu=null,Vu=0;Vu<sa$1.length;Vu++){var Ou=sa$1[Vu];Ou&&(Ou=Ou.extractEvents(Cu,$u,Ru,Pu,Lu))&&(Bu=ic(Bu,Ou))}mc(Bu)}}function uc(_u,$u,Tu){if(!Tu.has(_u)){switch(_u){case"scroll":vc($u,"scroll",!0);break;case"focus":case"blur":vc($u,"focus",!0),vc($u,"blur",!0),Tu.set("blur",null),Tu.set("focus",null);break;case"cancel":case"close":oc(_u)&&vc($u,_u,!0);break;case"invalid":case"submit":case"reset":break;default:ac.indexOf(_u)===-1&&F$e(_u,$u)}Tu.set(_u,null)}}var wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc(_u,$u){var Tu=cc($u);Hc.forEach(function(Cu){uc(Cu,$u,Tu)}),Ic.forEach(function(Cu){uc(Cu,$u,Tu)})}function Kc(_u,$u,Tu,Cu,Pu){return{blockedOn:_u,topLevelType:$u,eventSystemFlags:Tu|32,nativeEvent:Pu,container:Cu}}function Lc(_u,$u){switch(_u){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec.delete($u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete($u.pointerId)}}function Mc(_u,$u,Tu,Cu,Pu,Ru){return _u===null||_u.nativeEvent!==Ru?(_u=Kc($u,Tu,Cu,Pu,Ru),$u!==null&&($u=Nc($u),$u!==null&&xc($u)),_u):(_u.eventSystemFlags|=Cu,_u)}function Oc(_u,$u,Tu,Cu,Pu){switch($u){case"focus":return Bc=Mc(Bc,_u,$u,Tu,Cu,Pu),!0;case"dragenter":return Cc=Mc(Cc,_u,$u,Tu,Cu,Pu),!0;case"mouseover":return Dc=Mc(Dc,_u,$u,Tu,Cu,Pu),!0;case"pointerover":var Ru=Pu.pointerId;return Ec.set(Ru,Mc(Ec.get(Ru)||null,_u,$u,Tu,Cu,Pu)),!0;case"gotpointercapture":return Ru=Pu.pointerId,Fc.set(Ru,Mc(Fc.get(Ru)||null,_u,$u,Tu,Cu,Pu)),!0}return!1}function Pc(_u){var $u=tc(_u.target);if($u!==null){var Tu=dc($u);if(Tu!==null){if($u=Tu.tag,$u===13){if($u=ec(Tu),$u!==null){_u.blockedOn=$u,r$o.unstable_runWithPriority(_u.priority,function(){yc(Tu)});return}}else if($u===3&&Tu.stateNode.hydrate){_u.blockedOn=Tu.tag===3?Tu.stateNode.containerInfo:null;return}}}_u.blockedOn=null}function Qc(_u){if(_u.blockedOn!==null)return!1;var $u=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);if($u!==null){var Tu=Nc($u);return Tu!==null&&xc(Tu),_u.blockedOn=$u,!1}return!0}function Sc(_u,$u,Tu){Qc(_u)&&Tu.delete($u)}function Tc(){for(zc=!1;0<Ac.length;){var _u=Ac[0];if(_u.blockedOn!==null){_u=Nc(_u.blockedOn),_u!==null&&wc(_u);break}var $u=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);$u!==null?_u.blockedOn=$u:Ac.shift()}Bc!==null&&Qc(Bc)&&(Bc=null),Cc!==null&&Qc(Cc)&&(Cc=null),Dc!==null&&Qc(Dc)&&(Dc=null),Ec.forEach(Sc),Fc.forEach(Sc)}function Uc(_u,$u){_u.blockedOn===$u&&(_u.blockedOn=null,zc||(zc=!0,r$o.unstable_scheduleCallback(r$o.unstable_NormalPriority,Tc)))}function Vc(_u){function $u(Pu){return Uc(Pu,_u)}if(0<Ac.length){Uc(Ac[0],_u);for(var Tu=1;Tu<Ac.length;Tu++){var Cu=Ac[Tu];Cu.blockedOn===_u&&(Cu.blockedOn=null)}}for(Bc!==null&&Uc(Bc,_u),Cc!==null&&Uc(Cc,_u),Dc!==null&&Uc(Dc,_u),Ec.forEach($u),Fc.forEach($u),Tu=0;Tu<Gc.length;Tu++)Cu=Gc[Tu],Cu.blockedOn===_u&&(Cu.blockedOn=null);for(;0<Gc.length&&(Tu=Gc[0],Tu.blockedOn===null);)Pc(Tu),Tu.blockedOn===null&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb,"animationEnd",Yb,"animationIteration",Zb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b,"transitionEnd","waiting","waiting"];function ad(_u,$u){for(var Tu=0;Tu<_u.length;Tu+=2){var Cu=_u[Tu],Pu=_u[Tu+1],Ru="on"+(Pu[0].toUpperCase()+Pu.slice(1));Ru={phasedRegistrationNames:{bubbled:Ru,captured:Ru+"Capture"},dependencies:[Cu],eventPriority:$u},Zc.set(Cu,$u),Yc.set(Cu,Ru),Wc[Pu]=Ru}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad($c,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);var dd=r$o.unstable_UserBlockingPriority,ed=r$o.unstable_runWithPriority,fd=!0;function F$e(_u,$u){vc($u,_u,!1)}function vc(_u,$u,Tu){var Cu=Zc.get($u);switch(Cu===void 0?2:Cu){case 0:Cu=gd.bind(null,$u,1,_u);break;case 1:Cu=hd.bind(null,$u,1,_u);break;default:Cu=id.bind(null,$u,1,_u)}Tu?_u.addEventListener($u,Cu,!0):_u.addEventListener($u,Cu,!1)}function gd(_u,$u,Tu,Cu){Ja$1||Ha$1();var Pu=id,Ru=Ja$1;Ja$1=!0;try{Ga$1(Pu,_u,$u,Tu,Cu)}finally{(Ja$1=Ru)||La$1()}}function hd(_u,$u,Tu,Cu){ed(dd,id.bind(null,_u,$u,Tu,Cu))}function id(_u,$u,Tu,Cu){if(fd)if(0<Ac.length&&-1<Hc.indexOf(_u))_u=Kc(null,_u,$u,Tu,Cu),Ac.push(_u);else{var Pu=Rc(_u,$u,Tu,Cu);if(Pu===null)Lc(_u,Cu);else if(-1<Hc.indexOf(_u))_u=Kc(Pu,_u,$u,Tu,Cu),Ac.push(_u);else if(!Oc(Pu,_u,$u,Tu,Cu)){Lc(_u,Cu),_u=rc(_u,Cu,null,$u);try{Ma$1(sc,_u)}finally{qc(_u)}}}}function Rc(_u,$u,Tu,Cu){if(Tu=nc(Cu),Tu=tc(Tu),Tu!==null){var Pu=dc(Tu);if(Pu===null)Tu=null;else{var Ru=Pu.tag;if(Ru===13){if(Tu=ec(Pu),Tu!==null)return Tu;Tu=null}else if(Ru===3){if(Pu.stateNode.hydrate)return Pu.tag===3?Pu.stateNode.containerInfo:null;Tu=null}else Pu!==Tu&&(Tu=null)}}_u=rc(_u,Cu,Tu,$u);try{Ma$1(sc,_u)}finally{qc(_u)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(_u){kd.forEach(function($u){$u=$u+_u.charAt(0).toUpperCase()+_u.substring(1),jd[$u]=jd[_u]})});function ld(_u,$u,Tu){return $u==null||typeof $u=="boolean"||$u===""?"":Tu||typeof $u!="number"||$u===0||jd.hasOwnProperty(_u)&&jd[_u]?(""+$u).trim():$u+"px"}function md(_u,$u){_u=_u.style;for(var Tu in $u)if($u.hasOwnProperty(Tu)){var Cu=Tu.indexOf("--")===0,Pu=ld(Tu,$u[Tu],Cu);Tu==="float"&&(Tu="cssFloat"),Cu?_u.setProperty(Tu,Pu):_u[Tu]=Pu}}var nd=n$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(_u,$u){if($u){if(nd[_u]&&($u.children!=null||$u.dangerouslySetInnerHTML!=null))throw Error(u$l(137,_u,""));if($u.dangerouslySetInnerHTML!=null){if($u.children!=null)throw Error(u$l(60));if(!(typeof $u.dangerouslySetInnerHTML=="object"&&"__html"in $u.dangerouslySetInnerHTML))throw Error(u$l(61))}if($u.style!=null&&typeof $u.style!="object")throw Error(u$l(62,""))}}function pd(_u,$u){if(_u.indexOf("-")===-1)return typeof $u.is=="string";switch(_u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb.html;function rd(_u,$u){_u=_u.nodeType===9||_u.nodeType===11?_u:_u.ownerDocument;var Tu=cc(_u);$u=wa$1[$u];for(var Cu=0;Cu<$u.length;Cu++)uc($u[Cu],_u,Tu)}function sd(){}function td(_u){if(_u=_u||(typeof document!="undefined"?document:void 0),typeof _u=="undefined")return null;try{return _u.activeElement||_u.body}catch{return _u.body}}function ud(_u){for(;_u&&_u.firstChild;)_u=_u.firstChild;return _u}function vd(_u,$u){var Tu=ud(_u);_u=0;for(var Cu;Tu;){if(Tu.nodeType===3){if(Cu=_u+Tu.textContent.length,_u<=$u&&Cu>=$u)return{node:Tu,offset:$u-_u};_u=Cu}e:{for(;Tu;){if(Tu.nextSibling){Tu=Tu.nextSibling;break e}Tu=Tu.parentNode}Tu=void 0}Tu=ud(Tu)}}function wd(_u,$u){return _u&&$u?_u===$u?!0:_u&&_u.nodeType===3?!1:$u&&$u.nodeType===3?wd(_u,$u.parentNode):"contains"in _u?_u.contains($u):_u.compareDocumentPosition?!!(_u.compareDocumentPosition($u)&16):!1:!1}function xd(){for(var _u=window,$u=td();$u instanceof _u.HTMLIFrameElement;){try{var Tu=typeof $u.contentWindow.location.href=="string"}catch{Tu=!1}if(Tu)_u=$u.contentWindow;else break;$u=td(_u.document)}return $u}function yd(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u&&($u==="input"&&(_u.type==="text"||_u.type==="search"||_u.type==="tel"||_u.type==="url"||_u.type==="password")||$u==="textarea"||_u.contentEditable==="true")}var zd="$",Ad="/$",Bd="$?",Cd="$!",Dd=null,Ed=null;function Fd(_u,$u){switch(_u){case"button":case"input":case"select":case"textarea":return!!$u.autoFocus}return!1}function Gd(_u,$u){return _u==="textarea"||_u==="option"||_u==="noscript"||typeof $u.children=="string"||typeof $u.children=="number"||typeof $u.dangerouslySetInnerHTML=="object"&&$u.dangerouslySetInnerHTML!==null&&$u.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd(_u){for(;_u!=null;_u=_u.nextSibling){var $u=_u.nodeType;if($u===1||$u===3)break}return _u}function Kd(_u){_u=_u.previousSibling;for(var $u=0;_u;){if(_u.nodeType===8){var Tu=_u.data;if(Tu===zd||Tu===Cd||Tu===Bd){if($u===0)return _u;$u--}else Tu===Ad&&$u++}_u=_u.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(_u){var $u=_u[Md];if($u)return $u;for(var Tu=_u.parentNode;Tu;){if($u=Tu[Od]||Tu[Md]){if(Tu=$u.alternate,$u.child!==null||Tu!==null&&Tu.child!==null)for(_u=Kd(_u);_u!==null;){if(Tu=_u[Md])return Tu;_u=Kd(_u)}return $u}_u=Tu,Tu=_u.parentNode}return null}function Nc(_u){return _u=_u[Md]||_u[Od],!_u||_u.tag!==5&&_u.tag!==6&&_u.tag!==13&&_u.tag!==3?null:_u}function Pd(_u){if(_u.tag===5||_u.tag===6)return _u.stateNode;throw Error(u$l(33))}function Qd(_u){return _u[Nd]||null}function Rd(_u){do _u=_u.return;while(_u&&_u.tag!==5);return _u||null}function Sd(_u,$u){var Tu=_u.stateNode;if(!Tu)return null;var Cu=la$1(Tu);if(!Cu)return null;Tu=Cu[$u];e:switch($u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Cu=!Cu.disabled)||(_u=_u.type,Cu=!(_u==="button"||_u==="input"||_u==="select"||_u==="textarea")),_u=!Cu;break e;default:_u=!1}if(_u)return null;if(Tu&&typeof Tu!="function")throw Error(u$l(231,$u,typeof Tu));return Tu}function Td(_u,$u,Tu){($u=Sd(_u,Tu.dispatchConfig.phasedRegistrationNames[$u]))&&(Tu._dispatchListeners=ic(Tu._dispatchListeners,$u),Tu._dispatchInstances=ic(Tu._dispatchInstances,_u))}function Ud(_u){if(_u&&_u.dispatchConfig.phasedRegistrationNames){for(var $u=_u._targetInst,Tu=[];$u;)Tu.push($u),$u=Rd($u);for($u=Tu.length;0<$u--;)Td(Tu[$u],"captured",_u);for($u=0;$u<Tu.length;$u++)Td(Tu[$u],"bubbled",_u)}}function Vd(_u,$u,Tu){_u&&Tu&&Tu.dispatchConfig.registrationName&&($u=Sd(_u,Tu.dispatchConfig.registrationName))&&(Tu._dispatchListeners=ic(Tu._dispatchListeners,$u),Tu._dispatchInstances=ic(Tu._dispatchInstances,_u))}function Wd(_u){_u&&_u.dispatchConfig.registrationName&&Vd(_u._targetInst,null,_u)}function Xd(_u){jc(_u,Ud)}var Yd=null,Zd=null,$d=null;function ae$3(){if($d)return $d;var _u,$u=Zd,Tu=$u.length,Cu,Pu="value"in Yd?Yd.value:Yd.textContent,Ru=Pu.length;for(_u=0;_u<Tu&&$u[_u]===Pu[_u];_u++);var Lu=Tu-_u;for(Cu=1;Cu<=Lu&&$u[Tu-Cu]===Pu[Ru-Cu];Cu++);return $d=Pu.slice(_u,1<Cu?1-Cu:void 0)}function be$4(){return!0}function ce$3(){return!1}function G$b(_u,$u,Tu,Cu){this.dispatchConfig=_u,this._targetInst=$u,this.nativeEvent=Tu,_u=this.constructor.Interface;for(var Pu in _u)_u.hasOwnProperty(Pu)&&(($u=_u[Pu])?this[Pu]=$u(Tu):Pu==="target"?this.target=Cu:this[Pu]=Tu[Pu]);return this.isDefaultPrevented=(Tu.defaultPrevented!=null?Tu.defaultPrevented:Tu.returnValue===!1)?be$4:ce$3,this.isPropagationStopped=ce$3,this}n$n(G$b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _u=this.nativeEvent;_u&&(_u.preventDefault?_u.preventDefault():typeof _u.returnValue!="unknown"&&(_u.returnValue=!1),this.isDefaultPrevented=be$4)},stopPropagation:function(){var _u=this.nativeEvent;_u&&(_u.stopPropagation?_u.stopPropagation():typeof _u.cancelBubble!="unknown"&&(_u.cancelBubble=!0),this.isPropagationStopped=be$4)},persist:function(){this.isPersistent=be$4},isPersistent:ce$3,destructor:function(){var _u=this.constructor.Interface,$u;for($u in _u)this[$u]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$3,this._dispatchInstances=this._dispatchListeners=null}});G$b.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(_u){return _u.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$b.extend=function(_u){function $u(){}function Tu(){return Cu.apply(this,arguments)}var Cu=this;$u.prototype=Cu.prototype;var Pu=new $u;return n$n(Pu,Tu.prototype),Tu.prototype=Pu,Tu.prototype.constructor=Tu,Tu.Interface=n$n({},Cu.Interface,_u),Tu.extend=Cu.extend,de$5(Tu),Tu};de$5(G$b);function ee$4(_u,$u,Tu,Cu){if(this.eventPool.length){var Pu=this.eventPool.pop();return this.call(Pu,_u,$u,Tu,Cu),Pu}return new this(_u,$u,Tu,Cu)}function fe$4(_u){if(!(_u instanceof this))throw Error(u$l(279));_u.destructor(),10>this.eventPool.length&&this.eventPool.push(_u)}function de$5(_u){_u.eventPool=[],_u.getPooled=ee$4,_u.release=fe$4}var ge$5=G$b.extend({data:null}),he$5=G$b.extend({data:null}),ie$5=[9,13,27,32],je$2=ya$1&&"CompositionEvent"in window,ke$4=null;ya$1&&"documentMode"in document&&(ke$4=document.documentMode);var le$3=ya$1&&"TextEvent"in window&&!ke$4,me$4=ya$1&&(!je$2||ke$4&&8<ke$4&&11>=ke$4),ne$2=String.fromCharCode(32),oe$2={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$6=!1;function qe$2(_u,$u){switch(_u){case"keyup":return ie$5.indexOf($u.keyCode)!==-1;case"keydown":return $u.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$4(_u){return _u=_u.detail,typeof _u=="object"&&"data"in _u?_u.data:null}var se$3=!1;function te$3(_u,$u){switch(_u){case"compositionend":return re$4($u);case"keypress":return $u.which!==32?null:(pe$6=!0,ne$2);case"textInput":return _u=$u.data,_u===ne$2&&pe$6?null:_u;default:return null}}function ue$3(_u,$u){if(se$3)return _u==="compositionend"||!je$2&&qe$2(_u,$u)?(_u=ae$3(),$d=Zd=Yd=null,se$3=!1,_u):null;switch(_u){case"paste":return null;case"keypress":if(!($u.ctrlKey||$u.altKey||$u.metaKey)||$u.ctrlKey&&$u.altKey){if($u.char&&1<$u.char.length)return $u.char;if($u.which)return String.fromCharCode($u.which)}return null;case"compositionend":return me$4&&$u.locale!=="ko"?null:$u.data;default:return null}}var ve$3={eventTypes:oe$2,extractEvents:function(_u,$u,Tu,Cu){var Pu;if(je$2)e:{switch(_u){case"compositionstart":var Ru=oe$2.compositionStart;break e;case"compositionend":Ru=oe$2.compositionEnd;break e;case"compositionupdate":Ru=oe$2.compositionUpdate;break e}Ru=void 0}else se$3?qe$2(_u,Tu)&&(Ru=oe$2.compositionEnd):_u==="keydown"&&Tu.keyCode===229&&(Ru=oe$2.compositionStart);return Ru?(me$4&&Tu.locale!=="ko"&&(se$3||Ru!==oe$2.compositionStart?Ru===oe$2.compositionEnd&&se$3&&(Pu=ae$3()):(Yd=Cu,Zd="value"in Yd?Yd.value:Yd.textContent,se$3=!0)),Ru=ge$5.getPooled(Ru,$u,Tu,Cu),Pu?Ru.data=Pu:(Pu=re$4(Tu),Pu!==null&&(Ru.data=Pu)),Xd(Ru),Pu=Ru):Pu=null,(_u=le$3?te$3(_u,Tu):ue$3(_u,Tu))?($u=he$5.getPooled(oe$2.beforeInput,$u,Tu,Cu),$u.data=_u,Xd($u)):$u=null,Pu===null?$u:$u===null?Pu:[Pu,$u]}},we$3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$2(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u==="input"?!!we$3[_u.type]:$u==="textarea"}var ye$4={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$1(_u,$u,Tu){return _u=G$b.getPooled(ye$4.change,_u,$u,Tu),_u.type="change",Da$1(Tu),Xd(_u),_u}var Ae$2=null,Be$1=null;function Ce$3(_u){mc(_u)}function De$2(_u){var $u=Pd(_u);if(yb($u))return _u}function Ee$2(_u,$u){if(_u==="change")return $u}var Fe$1=!1;ya$1&&(Fe$1=oc("input")&&(!document.documentMode||9<document.documentMode));function Ge$1(){Ae$2&&(Ae$2.detachEvent("onpropertychange",He$1),Be$1=Ae$2=null)}function He$1(_u){if(_u.propertyName==="value"&&De$2(Be$1))if(_u=ze$1(Be$1,_u,nc(_u)),Ja$1)mc(_u);else{Ja$1=!0;try{Fa$1(Ce$3,_u)}finally{Ja$1=!1,La$1()}}}function Ie$2(_u,$u,Tu){_u==="focus"?(Ge$1(),Ae$2=$u,Be$1=Tu,Ae$2.attachEvent("onpropertychange",He$1)):_u==="blur"&&Ge$1()}function Je$1(_u){if(_u==="selectionchange"||_u==="keyup"||_u==="keydown")return De$2(Be$1)}function Ke$1(_u,$u){if(_u==="click")return De$2($u)}function Le$1(_u,$u){if(_u==="input"||_u==="change")return De$2($u)}var Me$2={eventTypes:ye$4,_isInputEventSupported:Fe$1,extractEvents:function(_u,$u,Tu,Cu){var Pu=$u?Pd($u):window,Ru=Pu.nodeName&&Pu.nodeName.toLowerCase();if(Ru==="select"||Ru==="input"&&Pu.type==="file")var Lu=Ee$2;else if(xe$2(Pu))if(Fe$1)Lu=Le$1;else{Lu=Je$1;var Bu=Ie$2}else(Ru=Pu.nodeName)&&Ru.toLowerCase()==="input"&&(Pu.type==="checkbox"||Pu.type==="radio")&&(Lu=Ke$1);if(Lu&&(Lu=Lu(_u,$u)))return ze$1(Lu,Tu,Cu);Bu&&Bu(_u,Pu,$u),_u==="blur"&&(_u=Pu._wrapperState)&&_u.controlled&&Pu.type==="number"&&Db(Pu,"number",Pu.value)}},Ne$2=G$b.extend({view:null,detail:null}),Oe$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$1(_u){var $u=this.nativeEvent;return $u.getModifierState?$u.getModifierState(_u):(_u=Oe$2[_u])?!!$u[_u]:!1}function Qe$2(){return Pe$1}var Re$2=0,Se$1=0,Te$2=!1,Ue$2=!1,Ve$1=Ne$2.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$2,button:null,buttons:null,relatedTarget:function(_u){return _u.relatedTarget||(_u.fromElement===_u.srcElement?_u.toElement:_u.fromElement)},movementX:function(_u){if("movementX"in _u)return _u.movementX;var $u=Re$2;return Re$2=_u.screenX,Te$2?_u.type==="mousemove"?_u.screenX-$u:0:(Te$2=!0,0)},movementY:function(_u){if("movementY"in _u)return _u.movementY;var $u=Se$1;return Se$1=_u.screenY,Ue$2?_u.type==="mousemove"?_u.screenY-$u:0:(Ue$2=!0,0)}}),We$2=Ve$1.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$1={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$1={eventTypes:Xe$1,extractEvents:function(_u,$u,Tu,Cu,Pu){var Ru=_u==="mouseover"||_u==="pointerover",Lu=_u==="mouseout"||_u==="pointerout";if(Ru&&(Pu&32)===0&&(Tu.relatedTarget||Tu.fromElement)||!Lu&&!Ru)return null;if(Ru=Cu.window===Cu?Cu:(Ru=Cu.ownerDocument)?Ru.defaultView||Ru.parentWindow:window,Lu){if(Lu=$u,$u=($u=Tu.relatedTarget||Tu.toElement)?tc($u):null,$u!==null){var Bu=dc($u);($u!==Bu||$u.tag!==5&&$u.tag!==6)&&($u=null)}}else Lu=null;if(Lu===$u)return null;if(_u==="mouseout"||_u==="mouseover")var Vu=Ve$1,Ou=Xe$1.mouseLeave,Du=Xe$1.mouseEnter,ku="mouse";else(_u==="pointerout"||_u==="pointerover")&&(Vu=We$2,Ou=Xe$1.pointerLeave,Du=Xe$1.pointerEnter,ku="pointer");if(_u=Lu==null?Ru:Pd(Lu),Ru=$u==null?Ru:Pd($u),Ou=Vu.getPooled(Ou,Lu,Tu,Cu),Ou.type=ku+"leave",Ou.target=_u,Ou.relatedTarget=Ru,Tu=Vu.getPooled(Du,$u,Tu,Cu),Tu.type=ku+"enter",Tu.target=Ru,Tu.relatedTarget=_u,Cu=Lu,ku=$u,Cu&&ku)e:{for(Vu=Cu,Du=ku,Lu=0,_u=Vu;_u;_u=Rd(_u))Lu++;for(_u=0,$u=Du;$u;$u=Rd($u))_u++;for(;0<Lu-_u;)Vu=Rd(Vu),Lu--;for(;0<_u-Lu;)Du=Rd(Du),_u--;for(;Lu--;){if(Vu===Du||Vu===Du.alternate)break e;Vu=Rd(Vu),Du=Rd(Du)}Vu=null}else Vu=null;for(Du=Vu,Vu=[];Cu&&Cu!==Du&&(Lu=Cu.alternate,!(Lu!==null&&Lu===Du));)Vu.push(Cu),Cu=Rd(Cu);for(Cu=[];ku&&ku!==Du&&(Lu=ku.alternate,!(Lu!==null&&Lu===Du));)Cu.push(ku),ku=Rd(ku);for(ku=0;ku<Vu.length;ku++)Vd(Vu[ku],"bubbled",Ou);for(ku=Cu.length;0<ku--;)Vd(Cu[ku],"captured",Tu);return(Pu&64)===0?[Ou]:[Ou,Tu]}};function Ze$1(_u,$u){return _u===$u&&(_u!==0||1/_u===1/$u)||_u!==_u&&$u!==$u}var $e$1=typeof Object.is=="function"?Object.is:Ze$1,af=Object.prototype.hasOwnProperty;function bf(_u,$u){if($e$1(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Tu=Object.keys(_u),Cu=Object.keys($u);if(Tu.length!==Cu.length)return!1;for(Cu=0;Cu<Tu.length;Cu++)if(!af.call($u,Tu[Cu])||!$e$1(_u[Tu[Cu]],$u[Tu[Cu]]))return!1;return!0}var cf=ya$1&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff=null,gf=null,hf=!1;function jf(_u,$u){var Tu=$u.window===$u?$u.document:$u.nodeType===9?$u:$u.ownerDocument;return hf||ef==null||ef!==td(Tu)?null:(Tu=ef,"selectionStart"in Tu&&yd(Tu)?Tu={start:Tu.selectionStart,end:Tu.selectionEnd}:(Tu=(Tu.ownerDocument&&Tu.ownerDocument.defaultView||window).getSelection(),Tu={anchorNode:Tu.anchorNode,anchorOffset:Tu.anchorOffset,focusNode:Tu.focusNode,focusOffset:Tu.focusOffset}),gf&&bf(gf,Tu)?null:(gf=Tu,_u=G$b.getPooled(df.select,ff,_u,$u),_u.type="select",_u.target=ef,Xd(_u),_u))}var kf={eventTypes:df,extractEvents:function(_u,$u,Tu,Cu,Pu,Ru){if(Pu=Ru||(Cu.window===Cu?Cu.document:Cu.nodeType===9?Cu:Cu.ownerDocument),!(Ru=!Pu)){e:{Pu=cc(Pu),Ru=wa$1.onSelect;for(var Lu=0;Lu<Ru.length;Lu++)if(!Pu.has(Ru[Lu])){Pu=!1;break e}Pu=!0}Ru=!Pu}if(Ru)return null;switch(Pu=$u?Pd($u):window,_u){case"focus":(xe$2(Pu)||Pu.contentEditable==="true")&&(ef=Pu,ff=$u,gf=null);break;case"blur":gf=ff=ef=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(Tu,Cu);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(Tu,Cu)}return null}},lf=G$b.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$b.extend({clipboardData:function(_u){return"clipboardData"in _u?_u.clipboardData:window.clipboardData}}),nf=Ne$2.extend({relatedTarget:null});function of(_u){var $u=_u.keyCode;return"charCode"in _u?(_u=_u.charCode,_u===0&&$u===13&&(_u=13)):_u=$u,_u===10&&(_u=13),32<=_u||_u===13?_u:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne$2.extend({key:function(_u){if(_u.key){var $u=pf[_u.key]||_u.key;if($u!=="Unidentified")return $u}return _u.type==="keypress"?(_u=of(_u),_u===13?"Enter":String.fromCharCode(_u)):_u.type==="keydown"||_u.type==="keyup"?qf[_u.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$2,charCode:function(_u){return _u.type==="keypress"?of(_u):0},keyCode:function(_u){return _u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0},which:function(_u){return _u.type==="keypress"?of(_u):_u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0}}),sf=Ve$1.extend({dataTransfer:null}),tf=Ne$2.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$2}),uf=G$b.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$1.extend({deltaX:function(_u){return"deltaX"in _u?_u.deltaX:"wheelDeltaX"in _u?-_u.wheelDeltaX:0},deltaY:function(_u){return"deltaY"in _u?_u.deltaY:"wheelDeltaY"in _u?-_u.wheelDeltaY:"wheelDelta"in _u?-_u.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(_u,$u,Tu,Cu){var Pu=Yc.get(_u);if(!Pu)return null;switch(_u){case"keypress":if(of(Tu)===0)return null;case"keydown":case"keyup":_u=rf;break;case"blur":case"focus":_u=nf;break;case"click":if(Tu.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_u=Ve$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_u=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_u=tf;break;case Xb:case Yb:case Zb:_u=lf;break;case $b:_u=uf;break;case"scroll":_u=Ne$2;break;case"wheel":_u=vf;break;case"copy":case"cut":case"paste":_u=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_u=We$2;break;default:_u=G$b}return $u=_u.getPooled(Pu,$u,Tu,Cu),Xd($u),$u}};if(pa$1)throw Error(u$l(101));pa$1=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra$1();var xf=Nc;la$1=Qd;ma$1=xf;na$1=Pd;xa$1({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye$1,ChangeEventPlugin:Me$2,SelectEventPlugin:kf,BeforeInputEventPlugin:ve$3});var yf=[],zf=-1;function H$c(_u){0>zf||(_u.current=yf[zf],yf[zf]=null,zf--)}function I$i(_u,$u){zf++,yf[zf]=_u.current,_u.current=$u}var Af={},J$b={current:Af},K$f={current:!1},Bf=Af;function Cf(_u,$u){var Tu=_u.type.contextTypes;if(!Tu)return Af;var Cu=_u.stateNode;if(Cu&&Cu.__reactInternalMemoizedUnmaskedChildContext===$u)return Cu.__reactInternalMemoizedMaskedChildContext;var Pu={},Ru;for(Ru in Tu)Pu[Ru]=$u[Ru];return Cu&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=$u,_u.__reactInternalMemoizedMaskedChildContext=Pu),Pu}function L$g(_u){return _u=_u.childContextTypes,_u!=null}function Df(){H$c(K$f),H$c(J$b)}function Ef(_u,$u,Tu){if(J$b.current!==Af)throw Error(u$l(168));I$i(J$b,$u),I$i(K$f,Tu)}function Ff(_u,$u,Tu){var Cu=_u.stateNode;if(_u=$u.childContextTypes,typeof Cu.getChildContext!="function")return Tu;Cu=Cu.getChildContext();for(var Pu in Cu)if(!(Pu in _u))throw Error(u$l(108,pb($u)||"Unknown",Pu));return n$n({},Tu,{},Cu)}function Gf(_u){return _u=(_u=_u.stateNode)&&_u.__reactInternalMemoizedMergedChildContext||Af,Bf=J$b.current,I$i(J$b,_u),I$i(K$f,K$f.current),!0}function Hf(_u,$u,Tu){var Cu=_u.stateNode;if(!Cu)throw Error(u$l(169));Tu?(_u=Ff(_u,$u,Bf),Cu.__reactInternalMemoizedMergedChildContext=_u,H$c(K$f),H$c(J$b),I$i(J$b,_u)):H$c(K$f),I$i(K$f,Tu)}var If=r$o.unstable_runWithPriority,Jf=r$o.unstable_scheduleCallback,Kf=r$o.unstable_cancelCallback,Lf=r$o.unstable_requestPaint,Mf=r$o.unstable_now,Nf=r$o.unstable_getCurrentPriorityLevel,Of=r$o.unstable_ImmediatePriority,Pf=r$o.unstable_UserBlockingPriority,Qf=r$o.unstable_NormalPriority,Rf=r$o.unstable_LowPriority,Sf=r$o.unstable_IdlePriority,Tf={},Uf=r$o.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u$l(332))}}function bg(_u){switch(_u){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u$l(332))}}function cg(_u,$u){return _u=bg(_u),If(_u,$u)}function dg(_u,$u,Tu){return _u=bg(_u),Jf(_u,$u,Tu)}function eg(_u){return Wf===null?(Wf=[_u],Xf=Jf(Of,fg)):Wf.push(_u),Tf}function gg(){if(Xf!==null){var _u=Xf;Xf=null,Kf(_u)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var _u=0;try{var $u=Wf;cg(99,function(){for(;_u<$u.length;_u++){var Tu=$u[_u];do Tu=Tu(!0);while(Tu!==null)}}),Wf=null}catch(Tu){throw Wf!==null&&(Wf=Wf.slice(_u+1)),Jf(Of,gg),Tu}finally{Yf=!1}}}function hg(_u,$u,Tu){return Tu/=10,1073741821-(((1073741821-_u+$u/10)/Tu|0)+1)*Tu}function ig(_u,$u){if(_u&&_u.defaultProps){$u=n$n({},$u),_u=_u.defaultProps;for(var Tu in _u)$u[Tu]===void 0&&($u[Tu]=_u[Tu])}return $u}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(_u){var $u=jg.current;H$c(jg),_u.type._context._currentValue=$u}function pg(_u,$u){for(;_u!==null;){var Tu=_u.alternate;if(_u.childExpirationTime<$u)_u.childExpirationTime=$u,Tu!==null&&Tu.childExpirationTime<$u&&(Tu.childExpirationTime=$u);else if(Tu!==null&&Tu.childExpirationTime<$u)Tu.childExpirationTime=$u;else break;_u=_u.return}}function qg(_u,$u){kg=_u,mg=lg=null,_u=_u.dependencies,_u!==null&&_u.firstContext!==null&&(_u.expirationTime>=$u&&(rg=!0),_u.firstContext=null)}function sg(_u,$u){if(mg!==_u&&$u!==!1&&$u!==0)if((typeof $u!="number"||$u===1073741823)&&(mg=_u,$u=1073741823),$u={context:_u,observedBits:$u,next:null},lg===null){if(kg===null)throw Error(u$l(308));lg=$u,kg.dependencies={expirationTime:0,firstContext:$u,responders:null}}else lg=lg.next=$u;return _u._currentValue}var tg=!1;function ug(_u){_u.updateQueue={baseState:_u.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(_u,$u){_u=_u.updateQueue,$u.updateQueue===_u&&($u.updateQueue={baseState:_u.baseState,baseQueue:_u.baseQueue,shared:_u.shared,effects:_u.effects})}function wg(_u,$u){return _u={expirationTime:_u,suspenseConfig:$u,tag:0,payload:null,callback:null,next:null},_u.next=_u}function xg(_u,$u){if(_u=_u.updateQueue,_u!==null){_u=_u.shared;var Tu=_u.pending;Tu===null?$u.next=$u:($u.next=Tu.next,Tu.next=$u),_u.pending=$u}}function yg(_u,$u){var Tu=_u.alternate;Tu!==null&&vg(Tu,_u),_u=_u.updateQueue,Tu=_u.baseQueue,Tu===null?(_u.baseQueue=$u.next=$u,$u.next=$u):($u.next=Tu.next,Tu.next=$u)}function zg(_u,$u,Tu,Cu){var Pu=_u.updateQueue;tg=!1;var Ru=Pu.baseQueue,Lu=Pu.shared.pending;if(Lu!==null){if(Ru!==null){var Bu=Ru.next;Ru.next=Lu.next,Lu.next=Bu}Ru=Lu,Pu.shared.pending=null,Bu=_u.alternate,Bu!==null&&(Bu=Bu.updateQueue,Bu!==null&&(Bu.baseQueue=Lu))}if(Ru!==null){Bu=Ru.next;var Vu=Pu.baseState,Ou=0,Du=null,ku=null,Fu=null;if(Bu!==null){var Nu=Bu;do{if(Lu=Nu.expirationTime,Lu<Cu){var Gu={expirationTime:Nu.expirationTime,suspenseConfig:Nu.suspenseConfig,tag:Nu.tag,payload:Nu.payload,callback:Nu.callback,next:null};Fu===null?(ku=Fu=Gu,Du=Vu):Fu=Fu.next=Gu,Lu>Ou&&(Ou=Lu)}else{Fu!==null&&(Fu=Fu.next={expirationTime:1073741823,suspenseConfig:Nu.suspenseConfig,tag:Nu.tag,payload:Nu.payload,callback:Nu.callback,next:null}),Ag(Lu,Nu.suspenseConfig);e:{var zu=_u,Hu=Nu;switch(Lu=$u,Gu=Tu,Hu.tag){case 1:if(zu=Hu.payload,typeof zu=="function"){Vu=zu.call(Gu,Vu,Lu);break e}Vu=zu;break e;case 3:zu.effectTag=zu.effectTag&-4097|64;case 0:if(zu=Hu.payload,Lu=typeof zu=="function"?zu.call(Gu,Vu,Lu):zu,Lu==null)break e;Vu=n$n({},Vu,Lu);break e;case 2:tg=!0}}Nu.callback!==null&&(_u.effectTag|=32,Lu=Pu.effects,Lu===null?Pu.effects=[Nu]:Lu.push(Nu))}if(Nu=Nu.next,Nu===null||Nu===Bu){if(Lu=Pu.shared.pending,Lu===null)break;Nu=Ru.next=Lu.next,Lu.next=Bu,Pu.baseQueue=Ru=Lu,Pu.shared.pending=null}}while(1)}Fu===null?Du=Vu:Fu.next=ku,Pu.baseState=Du,Pu.baseQueue=Fu,Bg(Ou),_u.expirationTime=Ou,_u.memoizedState=Vu}}function Cg(_u,$u,Tu){if(_u=$u.effects,$u.effects=null,_u!==null)for($u=0;$u<_u.length;$u++){var Cu=_u[$u],Pu=Cu.callback;if(Pu!==null){if(Cu.callback=null,Cu=Pu,Pu=Tu,typeof Cu!="function")throw Error(u$l(191,Cu));Cu.call(Pu)}}}var Dg=Wa$1.ReactCurrentBatchConfig,Eg=new aa$2.Component().refs;function Fg(_u,$u,Tu,Cu){$u=_u.memoizedState,Tu=Tu(Cu,$u),Tu=Tu==null?$u:n$n({},$u,Tu),_u.memoizedState=Tu,_u.expirationTime===0&&(_u.updateQueue.baseState=Tu)}var Jg={isMounted:function(_u){return(_u=_u._reactInternalFiber)?dc(_u)===_u:!1},enqueueSetState:function(_u,$u,Tu){_u=_u._reactInternalFiber;var Cu=Gg(),Pu=Dg.suspense;Cu=Hg(Cu,_u,Pu),Pu=wg(Cu,Pu),Pu.payload=$u,Tu!=null&&(Pu.callback=Tu),xg(_u,Pu),Ig(_u,Cu)},enqueueReplaceState:function(_u,$u,Tu){_u=_u._reactInternalFiber;var Cu=Gg(),Pu=Dg.suspense;Cu=Hg(Cu,_u,Pu),Pu=wg(Cu,Pu),Pu.tag=1,Pu.payload=$u,Tu!=null&&(Pu.callback=Tu),xg(_u,Pu),Ig(_u,Cu)},enqueueForceUpdate:function(_u,$u){_u=_u._reactInternalFiber;var Tu=Gg(),Cu=Dg.suspense;Tu=Hg(Tu,_u,Cu),Cu=wg(Tu,Cu),Cu.tag=2,$u!=null&&(Cu.callback=$u),xg(_u,Cu),Ig(_u,Tu)}};function Kg(_u,$u,Tu,Cu,Pu,Ru,Lu){return _u=_u.stateNode,typeof _u.shouldComponentUpdate=="function"?_u.shouldComponentUpdate(Cu,Ru,Lu):$u.prototype&&$u.prototype.isPureReactComponent?!bf(Tu,Cu)||!bf(Pu,Ru):!0}function Lg(_u,$u,Tu){var Cu=!1,Pu=Af,Ru=$u.contextType;return typeof Ru=="object"&&Ru!==null?Ru=sg(Ru):(Pu=L$g($u)?Bf:J$b.current,Cu=$u.contextTypes,Ru=(Cu=Cu!=null)?Cf(_u,Pu):Af),$u=new $u(Tu,Ru),_u.memoizedState=$u.state!==null&&$u.state!==void 0?$u.state:null,$u.updater=Jg,_u.stateNode=$u,$u._reactInternalFiber=_u,Cu&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=Pu,_u.__reactInternalMemoizedMaskedChildContext=Ru),$u}function Mg(_u,$u,Tu,Cu){_u=$u.state,typeof $u.componentWillReceiveProps=="function"&&$u.componentWillReceiveProps(Tu,Cu),typeof $u.UNSAFE_componentWillReceiveProps=="function"&&$u.UNSAFE_componentWillReceiveProps(Tu,Cu),$u.state!==_u&&Jg.enqueueReplaceState($u,$u.state,null)}function Ng(_u,$u,Tu,Cu){var Pu=_u.stateNode;Pu.props=Tu,Pu.state=_u.memoizedState,Pu.refs=Eg,ug(_u);var Ru=$u.contextType;typeof Ru=="object"&&Ru!==null?Pu.context=sg(Ru):(Ru=L$g($u)?Bf:J$b.current,Pu.context=Cf(_u,Ru)),zg(_u,Tu,Pu,Cu),Pu.state=_u.memoizedState,Ru=$u.getDerivedStateFromProps,typeof Ru=="function"&&(Fg(_u,$u,Ru,Tu),Pu.state=_u.memoizedState),typeof $u.getDerivedStateFromProps=="function"||typeof Pu.getSnapshotBeforeUpdate=="function"||typeof Pu.UNSAFE_componentWillMount!="function"&&typeof Pu.componentWillMount!="function"||($u=Pu.state,typeof Pu.componentWillMount=="function"&&Pu.componentWillMount(),typeof Pu.UNSAFE_componentWillMount=="function"&&Pu.UNSAFE_componentWillMount(),$u!==Pu.state&&Jg.enqueueReplaceState(Pu,Pu.state,null),zg(_u,Tu,Pu,Cu),Pu.state=_u.memoizedState),typeof Pu.componentDidMount=="function"&&(_u.effectTag|=4)}var Og=Array.isArray;function Pg(_u,$u,Tu){if(_u=Tu.ref,_u!==null&&typeof _u!="function"&&typeof _u!="object"){if(Tu._owner){if(Tu=Tu._owner,Tu){if(Tu.tag!==1)throw Error(u$l(309));var Cu=Tu.stateNode}if(!Cu)throw Error(u$l(147,_u));var Pu=""+_u;return $u!==null&&$u.ref!==null&&typeof $u.ref=="function"&&$u.ref._stringRef===Pu?$u.ref:($u=function(Ru){var Lu=Cu.refs;Lu===Eg&&(Lu=Cu.refs={}),Ru===null?delete Lu[Pu]:Lu[Pu]=Ru},$u._stringRef=Pu,$u)}if(typeof _u!="string")throw Error(u$l(284));if(!Tu._owner)throw Error(u$l(290,_u))}return _u}function Qg(_u,$u){if(_u.type!=="textarea")throw Error(u$l(31,Object.prototype.toString.call($u)==="[object Object]"?"object with keys {"+Object.keys($u).join(", ")+"}":$u,""))}function Rg(_u){function $u(Hu,Uu){if(_u){var ju=Hu.lastEffect;ju!==null?(ju.nextEffect=Uu,Hu.lastEffect=Uu):Hu.firstEffect=Hu.lastEffect=Uu,Uu.nextEffect=null,Uu.effectTag=8}}function Tu(Hu,Uu){if(!_u)return null;for(;Uu!==null;)$u(Hu,Uu),Uu=Uu.sibling;return null}function Cu(Hu,Uu){for(Hu=new Map;Uu!==null;)Uu.key!==null?Hu.set(Uu.key,Uu):Hu.set(Uu.index,Uu),Uu=Uu.sibling;return Hu}function Pu(Hu,Uu){return Hu=Sg(Hu,Uu),Hu.index=0,Hu.sibling=null,Hu}function Ru(Hu,Uu,ju){return Hu.index=ju,_u?(ju=Hu.alternate,ju!==null?(ju=ju.index,ju<Uu?(Hu.effectTag=2,Uu):ju):(Hu.effectTag=2,Uu)):Uu}function Lu(Hu){return _u&&Hu.alternate===null&&(Hu.effectTag=2),Hu}function Bu(Hu,Uu,ju,Wu){return Uu===null||Uu.tag!==6?(Uu=Tg(ju,Hu.mode,Wu),Uu.return=Hu,Uu):(Uu=Pu(Uu,ju),Uu.return=Hu,Uu)}function Vu(Hu,Uu,ju,Wu){return Uu!==null&&Uu.elementType===ju.type?(Wu=Pu(Uu,ju.props),Wu.ref=Pg(Hu,Uu,ju),Wu.return=Hu,Wu):(Wu=Ug(ju.type,ju.key,ju.props,null,Hu.mode,Wu),Wu.ref=Pg(Hu,Uu,ju),Wu.return=Hu,Wu)}function Ou(Hu,Uu,ju,Wu){return Uu===null||Uu.tag!==4||Uu.stateNode.containerInfo!==ju.containerInfo||Uu.stateNode.implementation!==ju.implementation?(Uu=Vg(ju,Hu.mode,Wu),Uu.return=Hu,Uu):(Uu=Pu(Uu,ju.children||[]),Uu.return=Hu,Uu)}function Du(Hu,Uu,ju,Wu,Qu){return Uu===null||Uu.tag!==7?(Uu=Wg(ju,Hu.mode,Wu,Qu),Uu.return=Hu,Uu):(Uu=Pu(Uu,ju),Uu.return=Hu,Uu)}function ku(Hu,Uu,ju){if(typeof Uu=="string"||typeof Uu=="number")return Uu=Tg(""+Uu,Hu.mode,ju),Uu.return=Hu,Uu;if(typeof Uu=="object"&&Uu!==null){switch(Uu.$$typeof){case Za$1:return ju=Ug(Uu.type,Uu.key,Uu.props,null,Hu.mode,ju),ju.ref=Pg(Hu,null,Uu),ju.return=Hu,ju;case $a$1:return Uu=Vg(Uu,Hu.mode,ju),Uu.return=Hu,Uu}if(Og(Uu)||nb(Uu))return Uu=Wg(Uu,Hu.mode,ju,null),Uu.return=Hu,Uu;Qg(Hu,Uu)}return null}function Fu(Hu,Uu,ju,Wu){var Qu=Uu!==null?Uu.key:null;if(typeof ju=="string"||typeof ju=="number")return Qu!==null?null:Bu(Hu,Uu,""+ju,Wu);if(typeof ju=="object"&&ju!==null){switch(ju.$$typeof){case Za$1:return ju.key===Qu?ju.type===ab?Du(Hu,Uu,ju.props.children,Wu,Qu):Vu(Hu,Uu,ju,Wu):null;case $a$1:return ju.key===Qu?Ou(Hu,Uu,ju,Wu):null}if(Og(ju)||nb(ju))return Qu!==null?null:Du(Hu,Uu,ju,Wu,null);Qg(Hu,ju)}return null}function Nu(Hu,Uu,ju,Wu,Qu){if(typeof Wu=="string"||typeof Wu=="number")return Hu=Hu.get(ju)||null,Bu(Uu,Hu,""+Wu,Qu);if(typeof Wu=="object"&&Wu!==null){switch(Wu.$$typeof){case Za$1:return Hu=Hu.get(Wu.key===null?ju:Wu.key)||null,Wu.type===ab?Du(Uu,Hu,Wu.props.children,Qu,Wu.key):Vu(Uu,Hu,Wu,Qu);case $a$1:return Hu=Hu.get(Wu.key===null?ju:Wu.key)||null,Ou(Uu,Hu,Wu,Qu)}if(Og(Wu)||nb(Wu))return Hu=Hu.get(ju)||null,Du(Uu,Hu,Wu,Qu,null);Qg(Uu,Wu)}return null}function Gu(Hu,Uu,ju,Wu){for(var Qu=null,qu=null,Yu=Uu,Ju=Uu=0,_d=null;Yu!==null&&Ju<ju.length;Ju++){Yu.index>Ju?(_d=Yu,Yu=null):_d=Yu.sibling;var tp=Fu(Hu,Yu,ju[Ju],Wu);if(tp===null){Yu===null&&(Yu=_d);break}_u&&Yu&&tp.alternate===null&&$u(Hu,Yu),Uu=Ru(tp,Uu,Ju),qu===null?Qu=tp:qu.sibling=tp,qu=tp,Yu=_d}if(Ju===ju.length)return Tu(Hu,Yu),Qu;if(Yu===null){for(;Ju<ju.length;Ju++)Yu=ku(Hu,ju[Ju],Wu),Yu!==null&&(Uu=Ru(Yu,Uu,Ju),qu===null?Qu=Yu:qu.sibling=Yu,qu=Yu);return Qu}for(Yu=Cu(Hu,Yu);Ju<ju.length;Ju++)_d=Nu(Yu,Hu,Ju,ju[Ju],Wu),_d!==null&&(_u&&_d.alternate!==null&&Yu.delete(_d.key===null?Ju:_d.key),Uu=Ru(_d,Uu,Ju),qu===null?Qu=_d:qu.sibling=_d,qu=_d);return _u&&Yu.forEach(function(Ku){return $u(Hu,Ku)}),Qu}function zu(Hu,Uu,ju,Wu){var Qu=nb(ju);if(typeof Qu!="function")throw Error(u$l(150));if(ju=Qu.call(ju),ju==null)throw Error(u$l(151));for(var qu=Qu=null,Yu=Uu,Ju=Uu=0,_d=null,tp=ju.next();Yu!==null&&!tp.done;Ju++,tp=ju.next()){Yu.index>Ju?(_d=Yu,Yu=null):_d=Yu.sibling;var Ku=Fu(Hu,Yu,tp.value,Wu);if(Ku===null){Yu===null&&(Yu=_d);break}_u&&Yu&&Ku.alternate===null&&$u(Hu,Yu),Uu=Ru(Ku,Uu,Ju),qu===null?Qu=Ku:qu.sibling=Ku,qu=Ku,Yu=_d}if(tp.done)return Tu(Hu,Yu),Qu;if(Yu===null){for(;!tp.done;Ju++,tp=ju.next())tp=ku(Hu,tp.value,Wu),tp!==null&&(Uu=Ru(tp,Uu,Ju),qu===null?Qu=tp:qu.sibling=tp,qu=tp);return Qu}for(Yu=Cu(Hu,Yu);!tp.done;Ju++,tp=ju.next())tp=Nu(Yu,Hu,Ju,tp.value,Wu),tp!==null&&(_u&&tp.alternate!==null&&Yu.delete(tp.key===null?Ju:tp.key),Uu=Ru(tp,Uu,Ju),qu===null?Qu=tp:qu.sibling=tp,qu=tp);return _u&&Yu.forEach(function(Xu){return $u(Hu,Xu)}),Qu}return function(Hu,Uu,ju,Wu){var Qu=typeof ju=="object"&&ju!==null&&ju.type===ab&&ju.key===null;Qu&&(ju=ju.props.children);var qu=typeof ju=="object"&&ju!==null;if(qu)switch(ju.$$typeof){case Za$1:e:{for(qu=ju.key,Qu=Uu;Qu!==null;){if(Qu.key===qu){switch(Qu.tag){case 7:if(ju.type===ab){Tu(Hu,Qu.sibling),Uu=Pu(Qu,ju.props.children),Uu.return=Hu,Hu=Uu;break e}break;default:if(Qu.elementType===ju.type){Tu(Hu,Qu.sibling),Uu=Pu(Qu,ju.props),Uu.ref=Pg(Hu,Qu,ju),Uu.return=Hu,Hu=Uu;break e}}Tu(Hu,Qu);break}else $u(Hu,Qu);Qu=Qu.sibling}ju.type===ab?(Uu=Wg(ju.props.children,Hu.mode,Wu,ju.key),Uu.return=Hu,Hu=Uu):(Wu=Ug(ju.type,ju.key,ju.props,null,Hu.mode,Wu),Wu.ref=Pg(Hu,Uu,ju),Wu.return=Hu,Hu=Wu)}return Lu(Hu);case $a$1:e:{for(Qu=ju.key;Uu!==null;){if(Uu.key===Qu)if(Uu.tag===4&&Uu.stateNode.containerInfo===ju.containerInfo&&Uu.stateNode.implementation===ju.implementation){Tu(Hu,Uu.sibling),Uu=Pu(Uu,ju.children||[]),Uu.return=Hu,Hu=Uu;break e}else{Tu(Hu,Uu);break}else $u(Hu,Uu);Uu=Uu.sibling}Uu=Vg(ju,Hu.mode,Wu),Uu.return=Hu,Hu=Uu}return Lu(Hu)}if(typeof ju=="string"||typeof ju=="number")return ju=""+ju,Uu!==null&&Uu.tag===6?(Tu(Hu,Uu.sibling),Uu=Pu(Uu,ju),Uu.return=Hu,Hu=Uu):(Tu(Hu,Uu),Uu=Tg(ju,Hu.mode,Wu),Uu.return=Hu,Hu=Uu),Lu(Hu);if(Og(ju))return Gu(Hu,Uu,ju,Wu);if(nb(ju))return zu(Hu,Uu,ju,Wu);if(qu&&Qg(Hu,ju),typeof ju=="undefined"&&!Qu)switch(Hu.tag){case 1:case 0:throw Hu=Hu.type,Error(u$l(152,Hu.displayName||Hu.name||"Component"))}return Tu(Hu,Uu)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(_u){if(_u===Zg)throw Error(u$l(174));return _u}function dh(_u,$u){switch(I$i(bh,$u),I$i(ah,_u),I$i($g,Zg),_u=$u.nodeType,_u){case 9:case 11:$u=($u=$u.documentElement)?$u.namespaceURI:Ob(null,"");break;default:_u=_u===8?$u.parentNode:$u,$u=_u.namespaceURI||null,_u=_u.tagName,$u=Ob($u,_u)}H$c($g),I$i($g,$u)}function eh(){H$c($g),H$c(ah),H$c(bh)}function fh(_u){ch(bh.current);var $u=ch($g.current),Tu=Ob($u,_u.type);$u!==Tu&&(I$i(ah,_u),I$i($g,Tu))}function gh(_u){ah.current===_u&&(H$c($g),H$c(ah))}var M$n={current:0};function hh(_u){for(var $u=_u;$u!==null;){if($u.tag===13){var Tu=$u.memoizedState;if(Tu!==null&&(Tu=Tu.dehydrated,Tu===null||Tu.data===Bd||Tu.data===Cd))return $u}else if($u.tag===19&&$u.memoizedProps.revealOrder!==void 0){if(($u.effectTag&64)!==0)return $u}else if($u.child!==null){$u.child.return=$u,$u=$u.child;continue}if($u===_u)break;for(;$u.sibling===null;){if($u.return===null||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}return null}function ih(_u,$u){return{responder:_u,props:$u}}var jh=Wa$1.ReactCurrentDispatcher,kh=Wa$1.ReactCurrentBatchConfig,lh=0,N$b=null,O$f=null,P$f=null,mh=!1;function Q$f(){throw Error(u$l(321))}function nh(_u,$u){if($u===null)return!1;for(var Tu=0;Tu<$u.length&&Tu<_u.length;Tu++)if(!$e$1(_u[Tu],$u[Tu]))return!1;return!0}function oh(_u,$u,Tu,Cu,Pu,Ru){if(lh=Ru,N$b=$u,$u.memoizedState=null,$u.updateQueue=null,$u.expirationTime=0,jh.current=_u===null||_u.memoizedState===null?ph:qh,_u=Tu(Cu,Pu),$u.expirationTime===lh){Ru=0;do{if($u.expirationTime=0,!(25>Ru))throw Error(u$l(301));Ru+=1,P$f=O$f=null,$u.updateQueue=null,jh.current=rh,_u=Tu(Cu,Pu)}while($u.expirationTime===lh)}if(jh.current=sh,$u=O$f!==null&&O$f.next!==null,lh=0,P$f=O$f=N$b=null,mh=!1,$u)throw Error(u$l(300));return _u}function th(){var _u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$f===null?N$b.memoizedState=P$f=_u:P$f=P$f.next=_u,P$f}function uh(){if(O$f===null){var _u=N$b.alternate;_u=_u!==null?_u.memoizedState:null}else _u=O$f.next;var $u=P$f===null?N$b.memoizedState:P$f.next;if($u!==null)P$f=$u,O$f=_u;else{if(_u===null)throw Error(u$l(310));O$f=_u,_u={memoizedState:O$f.memoizedState,baseState:O$f.baseState,baseQueue:O$f.baseQueue,queue:O$f.queue,next:null},P$f===null?N$b.memoizedState=P$f=_u:P$f=P$f.next=_u}return P$f}function vh(_u,$u){return typeof $u=="function"?$u(_u):$u}function wh(_u){var $u=uh(),Tu=$u.queue;if(Tu===null)throw Error(u$l(311));Tu.lastRenderedReducer=_u;var Cu=O$f,Pu=Cu.baseQueue,Ru=Tu.pending;if(Ru!==null){if(Pu!==null){var Lu=Pu.next;Pu.next=Ru.next,Ru.next=Lu}Cu.baseQueue=Pu=Ru,Tu.pending=null}if(Pu!==null){Pu=Pu.next,Cu=Cu.baseState;var Bu=Lu=Ru=null,Vu=Pu;do{var Ou=Vu.expirationTime;if(Ou<lh){var Du={expirationTime:Vu.expirationTime,suspenseConfig:Vu.suspenseConfig,action:Vu.action,eagerReducer:Vu.eagerReducer,eagerState:Vu.eagerState,next:null};Bu===null?(Lu=Bu=Du,Ru=Cu):Bu=Bu.next=Du,Ou>N$b.expirationTime&&(N$b.expirationTime=Ou,Bg(Ou))}else Bu!==null&&(Bu=Bu.next={expirationTime:1073741823,suspenseConfig:Vu.suspenseConfig,action:Vu.action,eagerReducer:Vu.eagerReducer,eagerState:Vu.eagerState,next:null}),Ag(Ou,Vu.suspenseConfig),Cu=Vu.eagerReducer===_u?Vu.eagerState:_u(Cu,Vu.action);Vu=Vu.next}while(Vu!==null&&Vu!==Pu);Bu===null?Ru=Cu:Bu.next=Lu,$e$1(Cu,$u.memoizedState)||(rg=!0),$u.memoizedState=Cu,$u.baseState=Ru,$u.baseQueue=Bu,Tu.lastRenderedState=Cu}return[$u.memoizedState,Tu.dispatch]}function xh(_u){var $u=uh(),Tu=$u.queue;if(Tu===null)throw Error(u$l(311));Tu.lastRenderedReducer=_u;var Cu=Tu.dispatch,Pu=Tu.pending,Ru=$u.memoizedState;if(Pu!==null){Tu.pending=null;var Lu=Pu=Pu.next;do Ru=_u(Ru,Lu.action),Lu=Lu.next;while(Lu!==Pu);$e$1(Ru,$u.memoizedState)||(rg=!0),$u.memoizedState=Ru,$u.baseQueue===null&&($u.baseState=Ru),Tu.lastRenderedState=Ru}return[Ru,Cu]}function yh(_u){var $u=th();return typeof _u=="function"&&(_u=_u()),$u.memoizedState=$u.baseState=_u,_u=$u.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:_u},_u=_u.dispatch=zh.bind(null,N$b,_u),[$u.memoizedState,_u]}function Ah(_u,$u,Tu,Cu){return _u={tag:_u,create:$u,destroy:Tu,deps:Cu,next:null},$u=N$b.updateQueue,$u===null?($u={lastEffect:null},N$b.updateQueue=$u,$u.lastEffect=_u.next=_u):(Tu=$u.lastEffect,Tu===null?$u.lastEffect=_u.next=_u:(Cu=Tu.next,Tu.next=_u,_u.next=Cu,$u.lastEffect=_u)),_u}function Bh(){return uh().memoizedState}function Ch(_u,$u,Tu,Cu){var Pu=th();N$b.effectTag|=_u,Pu.memoizedState=Ah(1|$u,Tu,void 0,Cu===void 0?null:Cu)}function Dh(_u,$u,Tu,Cu){var Pu=uh();Cu=Cu===void 0?null:Cu;var Ru=void 0;if(O$f!==null){var Lu=O$f.memoizedState;if(Ru=Lu.destroy,Cu!==null&&nh(Cu,Lu.deps)){Ah($u,Tu,Ru,Cu);return}}N$b.effectTag|=_u,Pu.memoizedState=Ah(1|$u,Tu,Ru,Cu)}function Eh(_u,$u){return Ch(516,4,_u,$u)}function Fh(_u,$u){return Dh(516,4,_u,$u)}function Gh(_u,$u){return Dh(4,2,_u,$u)}function Hh(_u,$u){if(typeof $u=="function")return _u=_u(),$u(_u),function(){$u(null)};if($u!=null)return _u=_u(),$u.current=_u,function(){$u.current=null}}function Ih(_u,$u,Tu){return Tu=Tu!=null?Tu.concat([_u]):null,Dh(4,2,Hh.bind(null,$u,_u),Tu)}function Jh(){}function Kh(_u,$u){return th().memoizedState=[_u,$u===void 0?null:$u],_u}function Lh(_u,$u){var Tu=uh();$u=$u===void 0?null:$u;var Cu=Tu.memoizedState;return Cu!==null&&$u!==null&&nh($u,Cu[1])?Cu[0]:(Tu.memoizedState=[_u,$u],_u)}function Mh(_u,$u){var Tu=uh();$u=$u===void 0?null:$u;var Cu=Tu.memoizedState;return Cu!==null&&$u!==null&&nh($u,Cu[1])?Cu[0]:(_u=_u(),Tu.memoizedState=[_u,$u],_u)}function Nh(_u,$u,Tu){var Cu=ag();cg(98>Cu?98:Cu,function(){_u(!0)}),cg(97<Cu?97:Cu,function(){var Pu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{_u(!1),Tu()}finally{kh.suspense=Pu}})}function zh(_u,$u,Tu){var Cu=Gg(),Pu=Dg.suspense;Cu=Hg(Cu,_u,Pu),Pu={expirationTime:Cu,suspenseConfig:Pu,action:Tu,eagerReducer:null,eagerState:null,next:null};var Ru=$u.pending;if(Ru===null?Pu.next=Pu:(Pu.next=Ru.next,Ru.next=Pu),$u.pending=Pu,Ru=_u.alternate,_u===N$b||Ru!==null&&Ru===N$b)mh=!0,Pu.expirationTime=lh,N$b.expirationTime=lh;else{if(_u.expirationTime===0&&(Ru===null||Ru.expirationTime===0)&&(Ru=$u.lastRenderedReducer,Ru!==null))try{var Lu=$u.lastRenderedState,Bu=Ru(Lu,Tu);if(Pu.eagerReducer=Ru,Pu.eagerState=Bu,$e$1(Bu,Lu))return}catch{}finally{}Ig(_u,Cu)}}var sh={readContext:sg,useCallback:Q$f,useContext:Q$f,useEffect:Q$f,useImperativeHandle:Q$f,useLayoutEffect:Q$f,useMemo:Q$f,useReducer:Q$f,useRef:Q$f,useState:Q$f,useDebugValue:Q$f,useResponder:Q$f,useDeferredValue:Q$f,useTransition:Q$f},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(_u,$u,Tu){return Tu=Tu!=null?Tu.concat([_u]):null,Ch(4,2,Hh.bind(null,$u,_u),Tu)},useLayoutEffect:function(_u,$u){return Ch(4,2,_u,$u)},useMemo:function(_u,$u){var Tu=th();return $u=$u===void 0?null:$u,_u=_u(),Tu.memoizedState=[_u,$u],_u},useReducer:function(_u,$u,Tu){var Cu=th();return $u=Tu!==void 0?Tu($u):$u,Cu.memoizedState=Cu.baseState=$u,_u=Cu.queue={pending:null,dispatch:null,lastRenderedReducer:_u,lastRenderedState:$u},_u=_u.dispatch=zh.bind(null,N$b,_u),[Cu.memoizedState,_u]},useRef:function(_u){var $u=th();return _u={current:_u},$u.memoizedState=_u},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Tu=yh(_u),Cu=Tu[0],Pu=Tu[1];return Eh(function(){var Ru=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Pu(_u)}finally{kh.suspense=Ru}},[_u,$u]),Cu},useTransition:function(_u){var $u=yh(!1),Tu=$u[0];return $u=$u[1],[Kh(Nh.bind(null,$u,_u),[$u,_u]),Tu]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Tu=wh(vh),Cu=Tu[0],Pu=Tu[1];return Fh(function(){var Ru=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Pu(_u)}finally{kh.suspense=Ru}},[_u,$u]),Cu},useTransition:function(_u){var $u=wh(vh),Tu=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Tu]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Tu=xh(vh),Cu=Tu[0],Pu=Tu[1];return Fh(function(){var Ru=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Pu(_u)}finally{kh.suspense=Ru}},[_u,$u]),Cu},useTransition:function(_u){var $u=xh(vh),Tu=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Tu]}},Oh=null,Ph=null,Qh=!1;function Rh(_u,$u){var Tu=Sh(5,null,null,0);Tu.elementType="DELETED",Tu.type="DELETED",Tu.stateNode=$u,Tu.return=_u,Tu.effectTag=8,_u.lastEffect!==null?(_u.lastEffect.nextEffect=Tu,_u.lastEffect=Tu):_u.firstEffect=_u.lastEffect=Tu}function Th(_u,$u){switch(_u.tag){case 5:var Tu=_u.type;return $u=$u.nodeType!==1||Tu.toLowerCase()!==$u.nodeName.toLowerCase()?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 6:return $u=_u.pendingProps===""||$u.nodeType!==3?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 13:return!1;default:return!1}}function Uh(_u){if(Qh){var $u=Ph;if($u){var Tu=$u;if(!Th(_u,$u)){if($u=Jd(Tu.nextSibling),!$u||!Th(_u,$u)){_u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u;return}Rh(Oh,Tu)}Oh=_u,Ph=Jd($u.firstChild)}else _u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u}}function Vh(_u){for(_u=_u.return;_u!==null&&_u.tag!==5&&_u.tag!==3&&_u.tag!==13;)_u=_u.return;Oh=_u}function Wh(_u){if(_u!==Oh)return!1;if(!Qh)return Vh(_u),Qh=!0,!1;var $u=_u.type;if(_u.tag!==5||$u!=="head"&&$u!=="body"&&!Gd($u,_u.memoizedProps))for($u=Ph;$u;)Rh(_u,$u),$u=Jd($u.nextSibling);if(Vh(_u),_u.tag===13){if(_u=_u.memoizedState,_u=_u!==null?_u.dehydrated:null,!_u)throw Error(u$l(317));e:{for(_u=_u.nextSibling,$u=0;_u;){if(_u.nodeType===8){var Tu=_u.data;if(Tu===Ad){if($u===0){Ph=Jd(_u.nextSibling);break e}$u--}else Tu!==zd&&Tu!==Cd&&Tu!==Bd||$u++}_u=_u.nextSibling}Ph=null}}else Ph=Oh?Jd(_u.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa$1.ReactCurrentOwner,rg=!1;function R$e(_u,$u,Tu,Cu){$u.child=_u===null?Yg($u,null,Tu,Cu):Xg($u,_u.child,Tu,Cu)}function Zh(_u,$u,Tu,Cu,Pu){Tu=Tu.render;var Ru=$u.ref;return qg($u,Pu),Cu=oh(_u,$u,Tu,Cu,Ru,Pu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Pu&&(_u.expirationTime=0),$h(_u,$u,Pu)):($u.effectTag|=1,R$e(_u,$u,Cu,Pu),$u.child)}function ai$1(_u,$u,Tu,Cu,Pu,Ru){if(_u===null){var Lu=Tu.type;return typeof Lu=="function"&&!bi$1(Lu)&&Lu.defaultProps===void 0&&Tu.compare===null&&Tu.defaultProps===void 0?($u.tag=15,$u.type=Lu,ci$2(_u,$u,Lu,Cu,Pu,Ru)):(_u=Ug(Tu.type,null,Cu,null,$u.mode,Ru),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}return Lu=_u.child,Pu<Ru&&(Pu=Lu.memoizedProps,Tu=Tu.compare,Tu=Tu!==null?Tu:bf,Tu(Pu,Cu)&&_u.ref===$u.ref)?$h(_u,$u,Ru):($u.effectTag|=1,_u=Sg(Lu,Cu),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}function ci$2(_u,$u,Tu,Cu,Pu,Ru){return _u!==null&&bf(_u.memoizedProps,Cu)&&_u.ref===$u.ref&&(rg=!1,Pu<Ru)?($u.expirationTime=_u.expirationTime,$h(_u,$u,Ru)):di$1(_u,$u,Tu,Cu,Ru)}function ei$1(_u,$u){var Tu=$u.ref;(_u===null&&Tu!==null||_u!==null&&_u.ref!==Tu)&&($u.effectTag|=128)}function di$1(_u,$u,Tu,Cu,Pu){var Ru=L$g(Tu)?Bf:J$b.current;return Ru=Cf($u,Ru),qg($u,Pu),Tu=oh(_u,$u,Tu,Cu,Ru,Pu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Pu&&(_u.expirationTime=0),$h(_u,$u,Pu)):($u.effectTag|=1,R$e(_u,$u,Tu,Pu),$u.child)}function fi$1(_u,$u,Tu,Cu,Pu){if(L$g(Tu)){var Ru=!0;Gf($u)}else Ru=!1;if(qg($u,Pu),$u.stateNode===null)_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),Lg($u,Tu,Cu),Ng($u,Tu,Cu,Pu),Cu=!0;else if(_u===null){var Lu=$u.stateNode,Bu=$u.memoizedProps;Lu.props=Bu;var Vu=Lu.context,Ou=Tu.contextType;typeof Ou=="object"&&Ou!==null?Ou=sg(Ou):(Ou=L$g(Tu)?Bf:J$b.current,Ou=Cf($u,Ou));var Du=Tu.getDerivedStateFromProps,ku=typeof Du=="function"||typeof Lu.getSnapshotBeforeUpdate=="function";ku||typeof Lu.UNSAFE_componentWillReceiveProps!="function"&&typeof Lu.componentWillReceiveProps!="function"||(Bu!==Cu||Vu!==Ou)&&Mg($u,Lu,Cu,Ou),tg=!1;var Fu=$u.memoizedState;Lu.state=Fu,zg($u,Cu,Lu,Pu),Vu=$u.memoizedState,Bu!==Cu||Fu!==Vu||K$f.current||tg?(typeof Du=="function"&&(Fg($u,Tu,Du,Cu),Vu=$u.memoizedState),(Bu=tg||Kg($u,Tu,Bu,Cu,Fu,Vu,Ou))?(ku||typeof Lu.UNSAFE_componentWillMount!="function"&&typeof Lu.componentWillMount!="function"||(typeof Lu.componentWillMount=="function"&&Lu.componentWillMount(),typeof Lu.UNSAFE_componentWillMount=="function"&&Lu.UNSAFE_componentWillMount()),typeof Lu.componentDidMount=="function"&&($u.effectTag|=4)):(typeof Lu.componentDidMount=="function"&&($u.effectTag|=4),$u.memoizedProps=Cu,$u.memoizedState=Vu),Lu.props=Cu,Lu.state=Vu,Lu.context=Ou,Cu=Bu):(typeof Lu.componentDidMount=="function"&&($u.effectTag|=4),Cu=!1)}else Lu=$u.stateNode,vg(_u,$u),Bu=$u.memoizedProps,Lu.props=$u.type===$u.elementType?Bu:ig($u.type,Bu),Vu=Lu.context,Ou=Tu.contextType,typeof Ou=="object"&&Ou!==null?Ou=sg(Ou):(Ou=L$g(Tu)?Bf:J$b.current,Ou=Cf($u,Ou)),Du=Tu.getDerivedStateFromProps,(ku=typeof Du=="function"||typeof Lu.getSnapshotBeforeUpdate=="function")||typeof Lu.UNSAFE_componentWillReceiveProps!="function"&&typeof Lu.componentWillReceiveProps!="function"||(Bu!==Cu||Vu!==Ou)&&Mg($u,Lu,Cu,Ou),tg=!1,Vu=$u.memoizedState,Lu.state=Vu,zg($u,Cu,Lu,Pu),Fu=$u.memoizedState,Bu!==Cu||Vu!==Fu||K$f.current||tg?(typeof Du=="function"&&(Fg($u,Tu,Du,Cu),Fu=$u.memoizedState),(Du=tg||Kg($u,Tu,Bu,Cu,Vu,Fu,Ou))?(ku||typeof Lu.UNSAFE_componentWillUpdate!="function"&&typeof Lu.componentWillUpdate!="function"||(typeof Lu.componentWillUpdate=="function"&&Lu.componentWillUpdate(Cu,Fu,Ou),typeof Lu.UNSAFE_componentWillUpdate=="function"&&Lu.UNSAFE_componentWillUpdate(Cu,Fu,Ou)),typeof Lu.componentDidUpdate=="function"&&($u.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate=="function"&&($u.effectTag|=256)):(typeof Lu.componentDidUpdate!="function"||Bu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate!="function"||Bu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=256),$u.memoizedProps=Cu,$u.memoizedState=Fu),Lu.props=Cu,Lu.state=Fu,Lu.context=Ou,Cu=Du):(typeof Lu.componentDidUpdate!="function"||Bu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate!="function"||Bu===_u.memoizedProps&&Vu===_u.memoizedState||($u.effectTag|=256),Cu=!1);return gi$1(_u,$u,Tu,Cu,Ru,Pu)}function gi$1(_u,$u,Tu,Cu,Pu,Ru){ei$1(_u,$u);var Lu=($u.effectTag&64)!==0;if(!Cu&&!Lu)return Pu&&Hf($u,Tu,!1),$h(_u,$u,Ru);Cu=$u.stateNode,Yh.current=$u;var Bu=Lu&&typeof Tu.getDerivedStateFromError!="function"?null:Cu.render();return $u.effectTag|=1,_u!==null&&Lu?($u.child=Xg($u,_u.child,null,Ru),$u.child=Xg($u,null,Bu,Ru)):R$e(_u,$u,Bu,Ru),$u.memoizedState=Cu.state,Pu&&Hf($u,Tu,!0),$u.child}function hi$1(_u){var $u=_u.stateNode;$u.pendingContext?Ef(_u,$u.pendingContext,$u.pendingContext!==$u.context):$u.context&&Ef(_u,$u.context,!1),dh(_u,$u.containerInfo)}var ii$1={dehydrated:null,retryTime:0};function ji$1(_u,$u,Tu){var Cu=$u.mode,Pu=$u.pendingProps,Ru=M$n.current,Lu=!1,Bu;if((Bu=($u.effectTag&64)!==0)||(Bu=(Ru&2)!==0&&(_u===null||_u.memoizedState!==null)),Bu?(Lu=!0,$u.effectTag&=-65):_u!==null&&_u.memoizedState===null||Pu.fallback===void 0||Pu.unstable_avoidThisFallback===!0||(Ru|=1),I$i(M$n,Ru&1),_u===null){if(Pu.fallback!==void 0&&Uh($u),Lu){if(Lu=Pu.fallback,Pu=Wg(null,Cu,0,null),Pu.return=$u,($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Pu.child=_u;_u!==null;)_u.return=Pu,_u=_u.sibling;return Tu=Wg(Lu,Cu,Tu,null),Tu.return=$u,Pu.sibling=Tu,$u.memoizedState=ii$1,$u.child=Pu,Tu}return Cu=Pu.children,$u.memoizedState=null,$u.child=Yg($u,null,Cu,Tu)}if(_u.memoizedState!==null){if(_u=_u.child,Cu=_u.sibling,Lu){if(Pu=Pu.fallback,Tu=Sg(_u,_u.pendingProps),Tu.return=$u,($u.mode&2)===0&&(Lu=$u.memoizedState!==null?$u.child.child:$u.child,Lu!==_u.child))for(Tu.child=Lu;Lu!==null;)Lu.return=Tu,Lu=Lu.sibling;return Cu=Sg(Cu,Pu),Cu.return=$u,Tu.sibling=Cu,Tu.childExpirationTime=0,$u.memoizedState=ii$1,$u.child=Tu,Cu}return Tu=Xg($u,_u.child,Pu.children,Tu),$u.memoizedState=null,$u.child=Tu}if(_u=_u.child,Lu){if(Lu=Pu.fallback,Pu=Wg(null,Cu,0,null),Pu.return=$u,Pu.child=_u,_u!==null&&(_u.return=Pu),($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Pu.child=_u;_u!==null;)_u.return=Pu,_u=_u.sibling;return Tu=Wg(Lu,Cu,Tu,null),Tu.return=$u,Pu.sibling=Tu,Tu.effectTag|=2,Pu.childExpirationTime=0,$u.memoizedState=ii$1,$u.child=Pu,Tu}return $u.memoizedState=null,$u.child=Xg($u,_u,Pu.children,Tu)}function ki$1(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Tu=_u.alternate;Tu!==null&&Tu.expirationTime<$u&&(Tu.expirationTime=$u),pg(_u.return,$u)}function li$1(_u,$u,Tu,Cu,Pu,Ru){var Lu=_u.memoizedState;Lu===null?_u.memoizedState={isBackwards:$u,rendering:null,renderingStartTime:0,last:Cu,tail:Tu,tailExpiration:0,tailMode:Pu,lastEffect:Ru}:(Lu.isBackwards=$u,Lu.rendering=null,Lu.renderingStartTime=0,Lu.last=Cu,Lu.tail=Tu,Lu.tailExpiration=0,Lu.tailMode=Pu,Lu.lastEffect=Ru)}function mi$1(_u,$u,Tu){var Cu=$u.pendingProps,Pu=Cu.revealOrder,Ru=Cu.tail;if(R$e(_u,$u,Cu.children,Tu),Cu=M$n.current,(Cu&2)!==0)Cu=Cu&1|2,$u.effectTag|=64;else{if(_u!==null&&(_u.effectTag&64)!==0)e:for(_u=$u.child;_u!==null;){if(_u.tag===13)_u.memoizedState!==null&&ki$1(_u,Tu);else if(_u.tag===19)ki$1(_u,Tu);else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===$u)break e;for(;_u.sibling===null;){if(_u.return===null||_u.return===$u)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Cu&=1}if(I$i(M$n,Cu),($u.mode&2)===0)$u.memoizedState=null;else switch(Pu){case"forwards":for(Tu=$u.child,Pu=null;Tu!==null;)_u=Tu.alternate,_u!==null&&hh(_u)===null&&(Pu=Tu),Tu=Tu.sibling;Tu=Pu,Tu===null?(Pu=$u.child,$u.child=null):(Pu=Tu.sibling,Tu.sibling=null),li$1($u,!1,Pu,Tu,Ru,$u.lastEffect);break;case"backwards":for(Tu=null,Pu=$u.child,$u.child=null;Pu!==null;){if(_u=Pu.alternate,_u!==null&&hh(_u)===null){$u.child=Pu;break}_u=Pu.sibling,Pu.sibling=Tu,Tu=Pu,Pu=_u}li$1($u,!0,Tu,null,Ru,$u.lastEffect);break;case"together":li$1($u,!1,null,null,void 0,$u.lastEffect);break;default:$u.memoizedState=null}return $u.child}function $h(_u,$u,Tu){_u!==null&&($u.dependencies=_u.dependencies);var Cu=$u.expirationTime;if(Cu!==0&&Bg(Cu),$u.childExpirationTime<Tu)return null;if(_u!==null&&$u.child!==_u.child)throw Error(u$l(153));if($u.child!==null){for(_u=$u.child,Tu=Sg(_u,_u.pendingProps),$u.child=Tu,Tu.return=$u;_u.sibling!==null;)_u=_u.sibling,Tu=Tu.sibling=Sg(_u,_u.pendingProps),Tu.return=$u;Tu.sibling=null}return $u.child}var ni$1,oi$1,pi$1,qi$1;ni$1=function(_u,$u){for(var Tu=$u.child;Tu!==null;){if(Tu.tag===5||Tu.tag===6)_u.appendChild(Tu.stateNode);else if(Tu.tag!==4&&Tu.child!==null){Tu.child.return=Tu,Tu=Tu.child;continue}if(Tu===$u)break;for(;Tu.sibling===null;){if(Tu.return===null||Tu.return===$u)return;Tu=Tu.return}Tu.sibling.return=Tu.return,Tu=Tu.sibling}};oi$1=function(){};pi$1=function(_u,$u,Tu,Cu,Pu){var Ru=_u.memoizedProps;if(Ru!==Cu){var Lu=$u.stateNode;switch(ch($g.current),_u=null,Tu){case"input":Ru=zb(Lu,Ru),Cu=zb(Lu,Cu),_u=[];break;case"option":Ru=Gb(Lu,Ru),Cu=Gb(Lu,Cu),_u=[];break;case"select":Ru=n$n({},Ru,{value:void 0}),Cu=n$n({},Cu,{value:void 0}),_u=[];break;case"textarea":Ru=Ib(Lu,Ru),Cu=Ib(Lu,Cu),_u=[];break;default:typeof Ru.onClick!="function"&&typeof Cu.onClick=="function"&&(Lu.onclick=sd)}od(Tu,Cu);var Bu,Vu;Tu=null;for(Bu in Ru)if(!Cu.hasOwnProperty(Bu)&&Ru.hasOwnProperty(Bu)&&Ru[Bu]!=null)if(Bu==="style")for(Vu in Lu=Ru[Bu],Lu)Lu.hasOwnProperty(Vu)&&(Tu||(Tu={}),Tu[Vu]="");else Bu!=="dangerouslySetInnerHTML"&&Bu!=="children"&&Bu!=="suppressContentEditableWarning"&&Bu!=="suppressHydrationWarning"&&Bu!=="autoFocus"&&(va$1.hasOwnProperty(Bu)?_u||(_u=[]):(_u=_u||[]).push(Bu,null));for(Bu in Cu){var Ou=Cu[Bu];if(Lu=Ru!=null?Ru[Bu]:void 0,Cu.hasOwnProperty(Bu)&&Ou!==Lu&&(Ou!=null||Lu!=null))if(Bu==="style")if(Lu){for(Vu in Lu)!Lu.hasOwnProperty(Vu)||Ou&&Ou.hasOwnProperty(Vu)||(Tu||(Tu={}),Tu[Vu]="");for(Vu in Ou)Ou.hasOwnProperty(Vu)&&Lu[Vu]!==Ou[Vu]&&(Tu||(Tu={}),Tu[Vu]=Ou[Vu])}else Tu||(_u||(_u=[]),_u.push(Bu,Tu)),Tu=Ou;else Bu==="dangerouslySetInnerHTML"?(Ou=Ou?Ou.__html:void 0,Lu=Lu?Lu.__html:void 0,Ou!=null&&Lu!==Ou&&(_u=_u||[]).push(Bu,Ou)):Bu==="children"?Lu===Ou||typeof Ou!="string"&&typeof Ou!="number"||(_u=_u||[]).push(Bu,""+Ou):Bu!=="suppressContentEditableWarning"&&Bu!=="suppressHydrationWarning"&&(va$1.hasOwnProperty(Bu)?(Ou!=null&&rd(Pu,Bu),_u||Lu===Ou||(_u=[])):(_u=_u||[]).push(Bu,Ou))}Tu&&(_u=_u||[]).push("style",Tu),Pu=_u,($u.updateQueue=Pu)&&($u.effectTag|=4)}};qi$1=function(_u,$u,Tu,Cu){Tu!==Cu&&($u.effectTag|=4)};function ri$1(_u,$u){switch(_u.tailMode){case"hidden":$u=_u.tail;for(var Tu=null;$u!==null;)$u.alternate!==null&&(Tu=$u),$u=$u.sibling;Tu===null?_u.tail=null:Tu.sibling=null;break;case"collapsed":Tu=_u.tail;for(var Cu=null;Tu!==null;)Tu.alternate!==null&&(Cu=Tu),Tu=Tu.sibling;Cu===null?$u||_u.tail===null?_u.tail=null:_u.tail.sibling=null:Cu.sibling=null}}function si$1(_u,$u,Tu){var Cu=$u.pendingProps;switch($u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$g($u.type)&&Df(),null;case 3:return eh(),H$c(K$f),H$c(J$b),Tu=$u.stateNode,Tu.pendingContext&&(Tu.context=Tu.pendingContext,Tu.pendingContext=null),_u!==null&&_u.child!==null||!Wh($u)||($u.effectTag|=4),oi$1($u),null;case 5:gh($u),Tu=ch(bh.current);var Pu=$u.type;if(_u!==null&&$u.stateNode!=null)pi$1(_u,$u,Pu,Cu,Tu),_u.ref!==$u.ref&&($u.effectTag|=128);else{if(!Cu){if($u.stateNode===null)throw Error(u$l(166));return null}if(_u=ch($g.current),Wh($u)){Cu=$u.stateNode,Pu=$u.type;var Ru=$u.memoizedProps;switch(Cu[Md]=$u,Cu[Nd]=Ru,Pu){case"iframe":case"object":case"embed":F$e("load",Cu);break;case"video":case"audio":for(_u=0;_u<ac.length;_u++)F$e(ac[_u],Cu);break;case"source":F$e("error",Cu);break;case"img":case"image":case"link":F$e("error",Cu),F$e("load",Cu);break;case"form":F$e("reset",Cu),F$e("submit",Cu);break;case"details":F$e("toggle",Cu);break;case"input":Ab(Cu,Ru),F$e("invalid",Cu),rd(Tu,"onChange");break;case"select":Cu._wrapperState={wasMultiple:!!Ru.multiple},F$e("invalid",Cu),rd(Tu,"onChange");break;case"textarea":Jb(Cu,Ru),F$e("invalid",Cu),rd(Tu,"onChange")}od(Pu,Ru),_u=null;for(var Lu in Ru)if(Ru.hasOwnProperty(Lu)){var Bu=Ru[Lu];Lu==="children"?typeof Bu=="string"?Cu.textContent!==Bu&&(_u=["children",Bu]):typeof Bu=="number"&&Cu.textContent!==""+Bu&&(_u=["children",""+Bu]):va$1.hasOwnProperty(Lu)&&Bu!=null&&rd(Tu,Lu)}switch(Pu){case"input":xb(Cu),Eb(Cu,Ru,!0);break;case"textarea":xb(Cu),Lb(Cu);break;case"select":case"option":break;default:typeof Ru.onClick=="function"&&(Cu.onclick=sd)}Tu=_u,$u.updateQueue=Tu,Tu!==null&&($u.effectTag|=4)}else{switch(Lu=Tu.nodeType===9?Tu:Tu.ownerDocument,_u===qd&&(_u=Nb(Pu)),_u===qd?Pu==="script"?(_u=Lu.createElement("div"),_u.innerHTML="<script><\/script>",_u=_u.removeChild(_u.firstChild)):typeof Cu.is=="string"?_u=Lu.createElement(Pu,{is:Cu.is}):(_u=Lu.createElement(Pu),Pu==="select"&&(Lu=_u,Cu.multiple?Lu.multiple=!0:Cu.size&&(Lu.size=Cu.size))):_u=Lu.createElementNS(_u,Pu),_u[Md]=$u,_u[Nd]=Cu,ni$1(_u,$u,!1,!1),$u.stateNode=_u,Lu=pd(Pu,Cu),Pu){case"iframe":case"object":case"embed":F$e("load",_u),Bu=Cu;break;case"video":case"audio":for(Bu=0;Bu<ac.length;Bu++)F$e(ac[Bu],_u);Bu=Cu;break;case"source":F$e("error",_u),Bu=Cu;break;case"img":case"image":case"link":F$e("error",_u),F$e("load",_u),Bu=Cu;break;case"form":F$e("reset",_u),F$e("submit",_u),Bu=Cu;break;case"details":F$e("toggle",_u),Bu=Cu;break;case"input":Ab(_u,Cu),Bu=zb(_u,Cu),F$e("invalid",_u),rd(Tu,"onChange");break;case"option":Bu=Gb(_u,Cu);break;case"select":_u._wrapperState={wasMultiple:!!Cu.multiple},Bu=n$n({},Cu,{value:void 0}),F$e("invalid",_u),rd(Tu,"onChange");break;case"textarea":Jb(_u,Cu),Bu=Ib(_u,Cu),F$e("invalid",_u),rd(Tu,"onChange");break;default:Bu=Cu}od(Pu,Bu);var Vu=Bu;for(Ru in Vu)if(Vu.hasOwnProperty(Ru)){var Ou=Vu[Ru];Ru==="style"?md(_u,Ou):Ru==="dangerouslySetInnerHTML"?(Ou=Ou?Ou.__html:void 0,Ou!=null&&Qb(_u,Ou)):Ru==="children"?typeof Ou=="string"?(Pu!=="textarea"||Ou!=="")&&Rb(_u,Ou):typeof Ou=="number"&&Rb(_u,""+Ou):Ru!=="suppressContentEditableWarning"&&Ru!=="suppressHydrationWarning"&&Ru!=="autoFocus"&&(va$1.hasOwnProperty(Ru)?Ou!=null&&rd(Tu,Ru):Ou!=null&&Xa$1(_u,Ru,Ou,Lu))}switch(Pu){case"input":xb(_u),Eb(_u,Cu,!1);break;case"textarea":xb(_u),Lb(_u);break;case"option":Cu.value!=null&&_u.setAttribute("value",""+rb(Cu.value));break;case"select":_u.multiple=!!Cu.multiple,Tu=Cu.value,Tu!=null?Hb(_u,!!Cu.multiple,Tu,!1):Cu.defaultValue!=null&&Hb(_u,!!Cu.multiple,Cu.defaultValue,!0);break;default:typeof Bu.onClick=="function"&&(_u.onclick=sd)}Fd(Pu,Cu)&&($u.effectTag|=4)}$u.ref!==null&&($u.effectTag|=128)}return null;case 6:if(_u&&$u.stateNode!=null)qi$1(_u,$u,_u.memoizedProps,Cu);else{if(typeof Cu!="string"&&$u.stateNode===null)throw Error(u$l(166));Tu=ch(bh.current),ch($g.current),Wh($u)?(Tu=$u.stateNode,Cu=$u.memoizedProps,Tu[Md]=$u,Tu.nodeValue!==Cu&&($u.effectTag|=4)):(Tu=(Tu.nodeType===9?Tu:Tu.ownerDocument).createTextNode(Cu),Tu[Md]=$u,$u.stateNode=Tu)}return null;case 13:return H$c(M$n),Cu=$u.memoizedState,($u.effectTag&64)!==0?($u.expirationTime=Tu,$u):(Tu=Cu!==null,Cu=!1,_u===null?$u.memoizedProps.fallback!==void 0&&Wh($u):(Pu=_u.memoizedState,Cu=Pu!==null,Tu||Pu===null||(Pu=_u.child.sibling,Pu!==null&&(Ru=$u.firstEffect,Ru!==null?($u.firstEffect=Pu,Pu.nextEffect=Ru):($u.firstEffect=$u.lastEffect=Pu,Pu.nextEffect=null),Pu.effectTag=8))),Tu&&!Cu&&($u.mode&2)!==0&&(_u===null&&$u.memoizedProps.unstable_avoidThisFallback!==!0||(M$n.current&1)!==0?S$d===ti$2&&(S$d=ui$1):((S$d===ti$2||S$d===ui$1)&&(S$d=vi$2),wi$1!==0&&T$d!==null&&(xi$1(T$d,U$d),yi$1(T$d,wi$1)))),(Tu||Cu)&&($u.effectTag|=4),null);case 4:return eh(),oi$1($u),null;case 10:return og($u),null;case 17:return L$g($u.type)&&Df(),null;case 19:if(H$c(M$n),Cu=$u.memoizedState,Cu===null)return null;if(Pu=($u.effectTag&64)!==0,Ru=Cu.rendering,Ru===null){if(Pu)ri$1(Cu,!1);else if(S$d!==ti$2||_u!==null&&(_u.effectTag&64)!==0)for(Ru=$u.child;Ru!==null;){if(_u=hh(Ru),_u!==null){for($u.effectTag|=64,ri$1(Cu,!1),Pu=_u.updateQueue,Pu!==null&&($u.updateQueue=Pu,$u.effectTag|=4),Cu.lastEffect===null&&($u.firstEffect=null),$u.lastEffect=Cu.lastEffect,Cu=$u.child;Cu!==null;)Pu=Cu,Ru=Tu,Pu.effectTag&=2,Pu.nextEffect=null,Pu.firstEffect=null,Pu.lastEffect=null,_u=Pu.alternate,_u===null?(Pu.childExpirationTime=0,Pu.expirationTime=Ru,Pu.child=null,Pu.memoizedProps=null,Pu.memoizedState=null,Pu.updateQueue=null,Pu.dependencies=null):(Pu.childExpirationTime=_u.childExpirationTime,Pu.expirationTime=_u.expirationTime,Pu.child=_u.child,Pu.memoizedProps=_u.memoizedProps,Pu.memoizedState=_u.memoizedState,Pu.updateQueue=_u.updateQueue,Ru=_u.dependencies,Pu.dependencies=Ru===null?null:{expirationTime:Ru.expirationTime,firstContext:Ru.firstContext,responders:Ru.responders}),Cu=Cu.sibling;return I$i(M$n,M$n.current&1|2),$u.child}Ru=Ru.sibling}}else{if(!Pu)if(_u=hh(Ru),_u!==null){if($u.effectTag|=64,Pu=!0,Tu=_u.updateQueue,Tu!==null&&($u.updateQueue=Tu,$u.effectTag|=4),ri$1(Cu,!0),Cu.tail===null&&Cu.tailMode==="hidden"&&!Ru.alternate)return $u=$u.lastEffect=Cu.lastEffect,$u!==null&&($u.nextEffect=null),null}else 2*$f()-Cu.renderingStartTime>Cu.tailExpiration&&1<Tu&&($u.effectTag|=64,Pu=!0,ri$1(Cu,!1),$u.expirationTime=$u.childExpirationTime=Tu-1);Cu.isBackwards?(Ru.sibling=$u.child,$u.child=Ru):(Tu=Cu.last,Tu!==null?Tu.sibling=Ru:$u.child=Ru,Cu.last=Ru)}return Cu.tail!==null?(Cu.tailExpiration===0&&(Cu.tailExpiration=$f()+500),Tu=Cu.tail,Cu.rendering=Tu,Cu.tail=Tu.sibling,Cu.lastEffect=$u.lastEffect,Cu.renderingStartTime=$f(),Tu.sibling=null,$u=M$n.current,I$i(M$n,Pu?$u&1|2:$u&1),Tu):null}throw Error(u$l(156,$u.tag))}function zi$1(_u){switch(_u.tag){case 1:L$g(_u.type)&&Df();var $u=_u.effectTag;return $u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 3:if(eh(),H$c(K$f),H$c(J$b),$u=_u.effectTag,($u&64)!==0)throw Error(u$l(285));return _u.effectTag=$u&-4097|64,_u;case 5:return gh(_u),null;case 13:return H$c(M$n),$u=_u.effectTag,$u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 19:return H$c(M$n),null;case 4:return eh(),null;case 10:return og(_u),null;default:return null}}function Ai$1(_u,$u){return{value:_u,source:$u,stack:qb($u)}}var Bi$1=typeof WeakSet=="function"?WeakSet:Set;function Ci$1(_u,$u){var Tu=$u.source,Cu=$u.stack;Cu===null&&Tu!==null&&(Cu=qb(Tu)),Tu!==null&&pb(Tu.type),$u=$u.value,_u!==null&&_u.tag===1&&pb(_u.type);try{console.error($u)}catch(Pu){setTimeout(function(){throw Pu})}}function Di$1(_u,$u){try{$u.props=_u.memoizedProps,$u.state=_u.memoizedState,$u.componentWillUnmount()}catch(Tu){Ei$1(_u,Tu)}}function Fi$1(_u){var $u=_u.ref;if($u!==null)if(typeof $u=="function")try{$u(null)}catch(Tu){Ei$1(_u,Tu)}else $u.current=null}function Gi$1(_u,$u){switch($u.tag){case 0:case 11:case 15:case 22:return;case 1:if($u.effectTag&256&&_u!==null){var Tu=_u.memoizedProps,Cu=_u.memoizedState;_u=$u.stateNode,$u=_u.getSnapshotBeforeUpdate($u.elementType===$u.type?Tu:ig($u.type,Tu),Cu),_u.__reactInternalSnapshotBeforeUpdate=$u}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$l(163))}function Hi$1(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Tu=$u=$u.next;do{if((Tu.tag&_u)===_u){var Cu=Tu.destroy;Tu.destroy=void 0,Cu!==void 0&&Cu()}Tu=Tu.next}while(Tu!==$u)}}function Ii$1(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Tu=$u=$u.next;do{if((Tu.tag&_u)===_u){var Cu=Tu.create;Tu.destroy=Cu()}Tu=Tu.next}while(Tu!==$u)}}function Ji$1(_u,$u,Tu){switch(Tu.tag){case 0:case 11:case 15:case 22:Ii$1(3,Tu);return;case 1:if(_u=Tu.stateNode,Tu.effectTag&4)if($u===null)_u.componentDidMount();else{var Cu=Tu.elementType===Tu.type?$u.memoizedProps:ig(Tu.type,$u.memoizedProps);_u.componentDidUpdate(Cu,$u.memoizedState,_u.__reactInternalSnapshotBeforeUpdate)}$u=Tu.updateQueue,$u!==null&&Cg(Tu,$u,_u);return;case 3:if($u=Tu.updateQueue,$u!==null){if(_u=null,Tu.child!==null)switch(Tu.child.tag){case 5:_u=Tu.child.stateNode;break;case 1:_u=Tu.child.stateNode}Cg(Tu,$u,_u)}return;case 5:_u=Tu.stateNode,$u===null&&Tu.effectTag&4&&Fd(Tu.type,Tu.memoizedProps)&&_u.focus();return;case 6:return;case 4:return;case 12:return;case 13:Tu.memoizedState===null&&(Tu=Tu.alternate,Tu!==null&&(Tu=Tu.memoizedState,Tu!==null&&(Tu=Tu.dehydrated,Tu!==null&&Vc(Tu))));return;case 19:case 17:case 20:case 21:return}throw Error(u$l(163))}function Ki$1(_u,$u,Tu){switch(typeof Li$1=="function"&&Li$1($u),$u.tag){case 0:case 11:case 14:case 15:case 22:if(_u=$u.updateQueue,_u!==null&&(_u=_u.lastEffect,_u!==null)){var Cu=_u.next;cg(97<Tu?97:Tu,function(){var Pu=Cu;do{var Ru=Pu.destroy;if(Ru!==void 0){var Lu=$u;try{Ru()}catch(Bu){Ei$1(Lu,Bu)}}Pu=Pu.next}while(Pu!==Cu)})}break;case 1:Fi$1($u),Tu=$u.stateNode,typeof Tu.componentWillUnmount=="function"&&Di$1($u,Tu);break;case 5:Fi$1($u);break;case 4:Mi$1(_u,$u,Tu)}}function Ni$1(_u){var $u=_u.alternate;_u.return=null,_u.child=null,_u.memoizedState=null,_u.updateQueue=null,_u.dependencies=null,_u.alternate=null,_u.firstEffect=null,_u.lastEffect=null,_u.pendingProps=null,_u.memoizedProps=null,_u.stateNode=null,$u!==null&&Ni$1($u)}function Oi$1(_u){return _u.tag===5||_u.tag===3||_u.tag===4}function Pi$1(_u){e:{for(var $u=_u.return;$u!==null;){if(Oi$1($u)){var Tu=$u;break e}$u=$u.return}throw Error(u$l(160))}switch($u=Tu.stateNode,Tu.tag){case 5:var Cu=!1;break;case 3:$u=$u.containerInfo,Cu=!0;break;case 4:$u=$u.containerInfo,Cu=!0;break;default:throw Error(u$l(161))}Tu.effectTag&16&&(Rb($u,""),Tu.effectTag&=-17);e:t:for(Tu=_u;;){for(;Tu.sibling===null;){if(Tu.return===null||Oi$1(Tu.return)){Tu=null;break e}Tu=Tu.return}for(Tu.sibling.return=Tu.return,Tu=Tu.sibling;Tu.tag!==5&&Tu.tag!==6&&Tu.tag!==18;){if(Tu.effectTag&2||Tu.child===null||Tu.tag===4)continue t;Tu.child.return=Tu,Tu=Tu.child}if(!(Tu.effectTag&2)){Tu=Tu.stateNode;break e}}Cu?Qi$1(_u,Tu,$u):Ri$1(_u,Tu,$u)}function Qi$1(_u,$u,Tu){var Cu=_u.tag,Pu=Cu===5||Cu===6;if(Pu)_u=Pu?_u.stateNode:_u.stateNode.instance,$u?Tu.nodeType===8?Tu.parentNode.insertBefore(_u,$u):Tu.insertBefore(_u,$u):(Tu.nodeType===8?($u=Tu.parentNode,$u.insertBefore(_u,Tu)):($u=Tu,$u.appendChild(_u)),Tu=Tu._reactRootContainer,Tu!=null||$u.onclick!==null||($u.onclick=sd));else if(Cu!==4&&(_u=_u.child,_u!==null))for(Qi$1(_u,$u,Tu),_u=_u.sibling;_u!==null;)Qi$1(_u,$u,Tu),_u=_u.sibling}function Ri$1(_u,$u,Tu){var Cu=_u.tag,Pu=Cu===5||Cu===6;if(Pu)_u=Pu?_u.stateNode:_u.stateNode.instance,$u?Tu.insertBefore(_u,$u):Tu.appendChild(_u);else if(Cu!==4&&(_u=_u.child,_u!==null))for(Ri$1(_u,$u,Tu),_u=_u.sibling;_u!==null;)Ri$1(_u,$u,Tu),_u=_u.sibling}function Mi$1(_u,$u,Tu){for(var Cu=$u,Pu=!1,Ru,Lu;;){if(!Pu){Pu=Cu.return;e:for(;;){if(Pu===null)throw Error(u$l(160));switch(Ru=Pu.stateNode,Pu.tag){case 5:Lu=!1;break e;case 3:Ru=Ru.containerInfo,Lu=!0;break e;case 4:Ru=Ru.containerInfo,Lu=!0;break e}Pu=Pu.return}Pu=!0}if(Cu.tag===5||Cu.tag===6){e:for(var Bu=_u,Vu=Cu,Ou=Tu,Du=Vu;;)if(Ki$1(Bu,Du,Ou),Du.child!==null&&Du.tag!==4)Du.child.return=Du,Du=Du.child;else{if(Du===Vu)break e;for(;Du.sibling===null;){if(Du.return===null||Du.return===Vu)break e;Du=Du.return}Du.sibling.return=Du.return,Du=Du.sibling}Lu?(Bu=Ru,Vu=Cu.stateNode,Bu.nodeType===8?Bu.parentNode.removeChild(Vu):Bu.removeChild(Vu)):Ru.removeChild(Cu.stateNode)}else if(Cu.tag===4){if(Cu.child!==null){Ru=Cu.stateNode.containerInfo,Lu=!0,Cu.child.return=Cu,Cu=Cu.child;continue}}else if(Ki$1(_u,Cu,Tu),Cu.child!==null){Cu.child.return=Cu,Cu=Cu.child;continue}if(Cu===$u)break;for(;Cu.sibling===null;){if(Cu.return===null||Cu.return===$u)return;Cu=Cu.return,Cu.tag===4&&(Pu=!1)}Cu.sibling.return=Cu.return,Cu=Cu.sibling}}function Si$1(_u,$u){switch($u.tag){case 0:case 11:case 14:case 15:case 22:Hi$1(3,$u);return;case 1:return;case 5:var Tu=$u.stateNode;if(Tu!=null){var Cu=$u.memoizedProps,Pu=_u!==null?_u.memoizedProps:Cu;_u=$u.type;var Ru=$u.updateQueue;if($u.updateQueue=null,Ru!==null){for(Tu[Nd]=Cu,_u==="input"&&Cu.type==="radio"&&Cu.name!=null&&Bb(Tu,Cu),pd(_u,Pu),$u=pd(_u,Cu),Pu=0;Pu<Ru.length;Pu+=2){var Lu=Ru[Pu],Bu=Ru[Pu+1];Lu==="style"?md(Tu,Bu):Lu==="dangerouslySetInnerHTML"?Qb(Tu,Bu):Lu==="children"?Rb(Tu,Bu):Xa$1(Tu,Lu,Bu,$u)}switch(_u){case"input":Cb(Tu,Cu);break;case"textarea":Kb(Tu,Cu);break;case"select":$u=Tu._wrapperState.wasMultiple,Tu._wrapperState.wasMultiple=!!Cu.multiple,_u=Cu.value,_u!=null?Hb(Tu,!!Cu.multiple,_u,!1):$u!==!!Cu.multiple&&(Cu.defaultValue!=null?Hb(Tu,!!Cu.multiple,Cu.defaultValue,!0):Hb(Tu,!!Cu.multiple,Cu.multiple?[]:"",!1))}}}return;case 6:if($u.stateNode===null)throw Error(u$l(162));$u.stateNode.nodeValue=$u.memoizedProps;return;case 3:$u=$u.stateNode,$u.hydrate&&($u.hydrate=!1,Vc($u.containerInfo));return;case 12:return;case 13:if(Tu=$u,$u.memoizedState===null?Cu=!1:(Cu=!0,Tu=$u.child,Ti$1=$f()),Tu!==null)e:for(_u=Tu;;){if(_u.tag===5)Ru=_u.stateNode,Cu?(Ru=Ru.style,typeof Ru.setProperty=="function"?Ru.setProperty("display","none","important"):Ru.display="none"):(Ru=_u.stateNode,Pu=_u.memoizedProps.style,Pu=Pu!=null&&Pu.hasOwnProperty("display")?Pu.display:null,Ru.style.display=ld("display",Pu));else if(_u.tag===6)_u.stateNode.nodeValue=Cu?"":_u.memoizedProps;else if(_u.tag===13&&_u.memoizedState!==null&&_u.memoizedState.dehydrated===null){Ru=_u.child.sibling,Ru.return=_u,_u=Ru;continue}else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===Tu)break;for(;_u.sibling===null;){if(_u.return===null||_u.return===Tu)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Ui$1($u);return;case 19:Ui$1($u);return;case 17:return}throw Error(u$l(163))}function Ui$1(_u){var $u=_u.updateQueue;if($u!==null){_u.updateQueue=null;var Tu=_u.stateNode;Tu===null&&(Tu=_u.stateNode=new Bi$1),$u.forEach(function(Cu){var Pu=Vi$1.bind(null,_u,Cu);Tu.has(Cu)||(Tu.add(Cu),Cu.then(Pu,Pu))})}}var Wi$1=typeof WeakMap=="function"?WeakMap:Map;function Xi$1(_u,$u,Tu){Tu=wg(Tu,null),Tu.tag=3,Tu.payload={element:null};var Cu=$u.value;return Tu.callback=function(){Yi$1||(Yi$1=!0,Zi$1=Cu),Ci$1(_u,$u)},Tu}function $i$1(_u,$u,Tu){Tu=wg(Tu,null),Tu.tag=3;var Cu=_u.type.getDerivedStateFromError;if(typeof Cu=="function"){var Pu=$u.value;Tu.payload=function(){return Ci$1(_u,$u),Cu(Pu)}}var Ru=_u.stateNode;return Ru!==null&&typeof Ru.componentDidCatch=="function"&&(Tu.callback=function(){typeof Cu!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$1(_u,$u));var Lu=$u.stack;this.componentDidCatch($u.value,{componentStack:Lu!==null?Lu:""})}),Tu}var bj=Math.ceil,cj=Wa$1.ReactCurrentDispatcher,dj=Wa$1.ReactCurrentOwner,V$c=0,ej=8,fj=16,gj=32,ti$2=0,hj=1,ij=2,ui$1=3,vi$2=4,jj=5,W$9=V$c,T$d=null,X$6=null,U$d=0,S$d=ti$2,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$1=0,oj=!1,Ti$1=0,pj=500,Y$b=null,Yi$1=!1,Zi$1=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W$9&(fj|gj))!==V$c?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(_u,$u,Tu){if($u=$u.mode,($u&2)===0)return 1073741823;var Cu=ag();if(($u&4)===0)return Cu===99?1073741823:1073741822;if((W$9&fj)!==V$c)return U$d;if(Tu!==null)_u=hg(_u,Tu.timeoutMs|0||5e3,250);else switch(Cu){case 99:_u=1073741823;break;case 98:_u=hg(_u,150,100);break;case 97:case 96:_u=hg(_u,5e3,250);break;case 95:_u=2;break;default:throw Error(u$l(326))}return T$d!==null&&_u===U$d&&--_u,_u}function Ig(_u,$u){if(50<uj)throw uj=0,vj=null,Error(u$l(185));if(_u=xj(_u,$u),_u!==null){var Tu=ag();$u===1073741823?(W$9&ej)!==V$c&&(W$9&(fj|gj))===V$c?yj(_u):(Z$8(_u),W$9===V$c&&gg()):Z$8(_u),(W$9&4)===V$c||Tu!==98&&Tu!==99||(tj===null?tj=new Map([[_u,$u]]):(Tu=tj.get(_u),(Tu===void 0||Tu>$u)&&tj.set(_u,$u)))}}function xj(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Tu=_u.alternate;Tu!==null&&Tu.expirationTime<$u&&(Tu.expirationTime=$u);var Cu=_u.return,Pu=null;if(Cu===null&&_u.tag===3)Pu=_u.stateNode;else for(;Cu!==null;){if(Tu=Cu.alternate,Cu.childExpirationTime<$u&&(Cu.childExpirationTime=$u),Tu!==null&&Tu.childExpirationTime<$u&&(Tu.childExpirationTime=$u),Cu.return===null&&Cu.tag===3){Pu=Cu.stateNode;break}Cu=Cu.return}return Pu!==null&&(T$d===Pu&&(Bg($u),S$d===vi$2&&xi$1(Pu,U$d)),yi$1(Pu,$u)),Pu}function zj(_u){var $u=_u.lastExpiredTime;if($u!==0||($u=_u.firstPendingTime,!Aj(_u,$u)))return $u;var Tu=_u.lastPingedTime;return _u=_u.nextKnownPendingLevel,_u=Tu>_u?Tu:_u,2>=_u&&$u!==_u?0:_u}function Z$8(_u){if(_u.lastExpiredTime!==0)_u.callbackExpirationTime=1073741823,_u.callbackPriority=99,_u.callbackNode=eg(yj.bind(null,_u));else{var $u=zj(_u),Tu=_u.callbackNode;if($u===0)Tu!==null&&(_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90);else{var Cu=Gg();if($u===1073741823?Cu=99:$u===1||$u===2?Cu=95:(Cu=10*(1073741821-$u)-10*(1073741821-Cu),Cu=0>=Cu?99:250>=Cu?98:5250>=Cu?97:95),Tu!==null){var Pu=_u.callbackPriority;if(_u.callbackExpirationTime===$u&&Pu>=Cu)return;Tu!==Tf&&Kf(Tu)}_u.callbackExpirationTime=$u,_u.callbackPriority=Cu,$u=$u===1073741823?eg(yj.bind(null,_u)):dg(Cu,Bj.bind(null,_u),{timeout:10*(1073741821-$u)-$f()}),_u.callbackNode=$u}}}function Bj(_u,$u){if(wj=0,$u)return $u=Gg(),Cj(_u,$u),Z$8(_u),null;var Tu=zj(_u);if(Tu!==0){if($u=_u.callbackNode,(W$9&(fj|gj))!==V$c)throw Error(u$l(327));if(Dj(),_u===T$d&&Tu===U$d||Ej(_u,Tu),X$6!==null){var Cu=W$9;W$9|=fj;var Pu=Fj();do try{Gj();break}catch(Bu){Hj(_u,Bu)}while(1);if(ng(),W$9=Cu,cj.current=Pu,S$d===hj)throw $u=kj,Ej(_u,Tu),xi$1(_u,Tu),Z$8(_u),$u;if(X$6===null)switch(Pu=_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=Tu,Cu=S$d,T$d=null,Cu){case ti$2:case hj:throw Error(u$l(345));case ij:Cj(_u,2<Tu?2:Tu);break;case ui$1:if(xi$1(_u,Tu),Cu=_u.lastSuspendedTime,Tu===Cu&&(_u.nextKnownPendingLevel=Ij(Pu)),lj===1073741823&&(Pu=Ti$1+pj-$f(),10<Pu)){if(oj){var Ru=_u.lastPingedTime;if(Ru===0||Ru>=Tu){_u.lastPingedTime=Tu,Ej(_u,Tu);break}}if(Ru=zj(_u),Ru!==0&&Ru!==Tu)break;if(Cu!==0&&Cu!==Tu){_u.lastPingedTime=Cu;break}_u.timeoutHandle=Hd(Jj.bind(null,_u),Pu);break}Jj(_u);break;case vi$2:if(xi$1(_u,Tu),Cu=_u.lastSuspendedTime,Tu===Cu&&(_u.nextKnownPendingLevel=Ij(Pu)),oj&&(Pu=_u.lastPingedTime,Pu===0||Pu>=Tu)){_u.lastPingedTime=Tu,Ej(_u,Tu);break}if(Pu=zj(_u),Pu!==0&&Pu!==Tu)break;if(Cu!==0&&Cu!==Tu){_u.lastPingedTime=Cu;break}if(mj!==1073741823?Cu=10*(1073741821-mj)-$f():lj===1073741823?Cu=0:(Cu=10*(1073741821-lj)-5e3,Pu=$f(),Tu=10*(1073741821-Tu)-Pu,Cu=Pu-Cu,0>Cu&&(Cu=0),Cu=(120>Cu?120:480>Cu?480:1080>Cu?1080:1920>Cu?1920:3e3>Cu?3e3:4320>Cu?4320:1960*bj(Cu/1960))-Cu,Tu<Cu&&(Cu=Tu)),10<Cu){_u.timeoutHandle=Hd(Jj.bind(null,_u),Cu);break}Jj(_u);break;case jj:if(lj!==1073741823&&nj!==null){Ru=lj;var Lu=nj;if(Cu=Lu.busyMinDurationMs|0,0>=Cu?Cu=0:(Pu=Lu.busyDelayMs|0,Ru=$f()-(10*(1073741821-Ru)-(Lu.timeoutMs|0||5e3)),Cu=Ru<=Pu?0:Pu+Cu-Ru),10<Cu){xi$1(_u,Tu),_u.timeoutHandle=Hd(Jj.bind(null,_u),Cu);break}}Jj(_u);break;default:throw Error(u$l(329))}if(Z$8(_u),_u.callbackNode===$u)return Bj.bind(null,_u)}}return null}function yj(_u){var $u=_u.lastExpiredTime;if($u=$u!==0?$u:1073741823,(W$9&(fj|gj))!==V$c)throw Error(u$l(327));if(Dj(),_u===T$d&&$u===U$d||Ej(_u,$u),X$6!==null){var Tu=W$9;W$9|=fj;var Cu=Fj();do try{Kj();break}catch(Pu){Hj(_u,Pu)}while(1);if(ng(),W$9=Tu,cj.current=Cu,S$d===hj)throw Tu=kj,Ej(_u,$u),xi$1(_u,$u),Z$8(_u),Tu;if(X$6!==null)throw Error(u$l(261));_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=$u,T$d=null,Jj(_u),Z$8(_u)}return null}function Lj(){if(tj!==null){var _u=tj;tj=null,_u.forEach(function($u,Tu){Cj(Tu,$u),Z$8(Tu)}),gg()}}function Mj(_u,$u){var Tu=W$9;W$9|=1;try{return _u($u)}finally{W$9=Tu,W$9===V$c&&gg()}}function Nj(_u,$u){var Tu=W$9;W$9&=-2,W$9|=ej;try{return _u($u)}finally{W$9=Tu,W$9===V$c&&gg()}}function Ej(_u,$u){_u.finishedWork=null,_u.finishedExpirationTime=0;var Tu=_u.timeoutHandle;if(Tu!==-1&&(_u.timeoutHandle=-1,Id(Tu)),X$6!==null)for(Tu=X$6.return;Tu!==null;){var Cu=Tu;switch(Cu.tag){case 1:Cu=Cu.type.childContextTypes,Cu!=null&&Df();break;case 3:eh(),H$c(K$f),H$c(J$b);break;case 5:gh(Cu);break;case 4:eh();break;case 13:H$c(M$n);break;case 19:H$c(M$n);break;case 10:og(Cu)}Tu=Tu.return}T$d=_u,X$6=Sg(_u.current,null),U$d=$u,S$d=ti$2,kj=null,mj=lj=1073741823,nj=null,wi$1=0,oj=!1}function Hj(_u,$u){do{try{if(ng(),jh.current=sh,mh)for(var Tu=N$b.memoizedState;Tu!==null;){var Cu=Tu.queue;Cu!==null&&(Cu.pending=null),Tu=Tu.next}if(lh=0,P$f=O$f=N$b=null,mh=!1,X$6===null||X$6.return===null)return S$d=hj,kj=$u,X$6=null;e:{var Pu=_u,Ru=X$6.return,Lu=X$6,Bu=$u;if($u=U$d,Lu.effectTag|=2048,Lu.firstEffect=Lu.lastEffect=null,Bu!==null&&typeof Bu=="object"&&typeof Bu.then=="function"){var Vu=Bu;if((Lu.mode&2)===0){var Ou=Lu.alternate;Ou?(Lu.updateQueue=Ou.updateQueue,Lu.memoizedState=Ou.memoizedState,Lu.expirationTime=Ou.expirationTime):(Lu.updateQueue=null,Lu.memoizedState=null)}var Du=(M$n.current&1)!==0,ku=Ru;do{var Fu;if(Fu=ku.tag===13){var Nu=ku.memoizedState;if(Nu!==null)Fu=Nu.dehydrated!==null;else{var Gu=ku.memoizedProps;Fu=Gu.fallback===void 0?!1:Gu.unstable_avoidThisFallback!==!0?!0:!Du}}if(Fu){var zu=ku.updateQueue;if(zu===null){var Hu=new Set;Hu.add(Vu),ku.updateQueue=Hu}else zu.add(Vu);if((ku.mode&2)===0){if(ku.effectTag|=64,Lu.effectTag&=-2981,Lu.tag===1)if(Lu.alternate===null)Lu.tag=17;else{var Uu=wg(1073741823,null);Uu.tag=2,xg(Lu,Uu)}Lu.expirationTime=1073741823;break e}Bu=void 0,Lu=$u;var ju=Pu.pingCache;if(ju===null?(ju=Pu.pingCache=new Wi$1,Bu=new Set,ju.set(Vu,Bu)):(Bu=ju.get(Vu),Bu===void 0&&(Bu=new Set,ju.set(Vu,Bu))),!Bu.has(Lu)){Bu.add(Lu);var Wu=Oj.bind(null,Pu,Vu,Lu);Vu.then(Wu,Wu)}ku.effectTag|=4096,ku.expirationTime=$u;break e}ku=ku.return}while(ku!==null);Bu=Error((pb(Lu.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb(Lu))}S$d!==jj&&(S$d=ij),Bu=Ai$1(Bu,Lu),ku=Ru;do{switch(ku.tag){case 3:Vu=Bu,ku.effectTag|=4096,ku.expirationTime=$u;var Qu=Xi$1(ku,Vu,$u);yg(ku,Qu);break e;case 1:Vu=Bu;var qu=ku.type,Yu=ku.stateNode;if((ku.effectTag&64)===0&&(typeof qu.getDerivedStateFromError=="function"||Yu!==null&&typeof Yu.componentDidCatch=="function"&&(aj===null||!aj.has(Yu)))){ku.effectTag|=4096,ku.expirationTime=$u;var Ju=$i$1(ku,Vu,$u);yg(ku,Ju);break e}}ku=ku.return}while(ku!==null)}X$6=Pj(X$6)}catch(_d){$u=_d;continue}break}while(1)}function Fj(){var _u=cj.current;return cj.current=sh,_u===null?sh:_u}function Ag(_u,$u){_u<lj&&2<_u&&(lj=_u),$u!==null&&_u<mj&&2<_u&&(mj=_u,nj=$u)}function Bg(_u){_u>wi$1&&(wi$1=_u)}function Kj(){for(;X$6!==null;)X$6=Qj(X$6)}function Gj(){for(;X$6!==null&&!Uf();)X$6=Qj(X$6)}function Qj(_u){var $u=Rj(_u.alternate,_u,U$d);return _u.memoizedProps=_u.pendingProps,$u===null&&($u=Pj(_u)),dj.current=null,$u}function Pj(_u){X$6=_u;do{var $u=X$6.alternate;if(_u=X$6.return,(X$6.effectTag&2048)===0){if($u=si$1($u,X$6,U$d),U$d===1||X$6.childExpirationTime!==1){for(var Tu=0,Cu=X$6.child;Cu!==null;){var Pu=Cu.expirationTime,Ru=Cu.childExpirationTime;Pu>Tu&&(Tu=Pu),Ru>Tu&&(Tu=Ru),Cu=Cu.sibling}X$6.childExpirationTime=Tu}if($u!==null)return $u;_u!==null&&(_u.effectTag&2048)===0&&(_u.firstEffect===null&&(_u.firstEffect=X$6.firstEffect),X$6.lastEffect!==null&&(_u.lastEffect!==null&&(_u.lastEffect.nextEffect=X$6.firstEffect),_u.lastEffect=X$6.lastEffect),1<X$6.effectTag&&(_u.lastEffect!==null?_u.lastEffect.nextEffect=X$6:_u.firstEffect=X$6,_u.lastEffect=X$6))}else{if($u=zi$1(X$6),$u!==null)return $u.effectTag&=2047,$u;_u!==null&&(_u.firstEffect=_u.lastEffect=null,_u.effectTag|=2048)}if($u=X$6.sibling,$u!==null)return $u;X$6=_u}while(X$6!==null);return S$d===ti$2&&(S$d=jj),null}function Ij(_u){var $u=_u.expirationTime;return _u=_u.childExpirationTime,$u>_u?$u:_u}function Jj(_u){var $u=ag();return cg(99,Sj.bind(null,_u,$u)),null}function Sj(_u,$u){do Dj();while(rj!==null);if((W$9&(fj|gj))!==V$c)throw Error(u$l(327));var Tu=_u.finishedWork,Cu=_u.finishedExpirationTime;if(Tu===null)return null;if(_u.finishedWork=null,_u.finishedExpirationTime=0,Tu===_u.current)throw Error(u$l(177));_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90,_u.nextKnownPendingLevel=0;var Pu=Ij(Tu);if(_u.firstPendingTime=Pu,Cu<=_u.lastSuspendedTime?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:Cu<=_u.firstSuspendedTime&&(_u.firstSuspendedTime=Cu-1),Cu<=_u.lastPingedTime&&(_u.lastPingedTime=0),Cu<=_u.lastExpiredTime&&(_u.lastExpiredTime=0),_u===T$d&&(X$6=T$d=null,U$d=0),1<Tu.effectTag?Tu.lastEffect!==null?(Tu.lastEffect.nextEffect=Tu,Pu=Tu.firstEffect):Pu=Tu:Pu=Tu.firstEffect,Pu!==null){var Ru=W$9;W$9|=gj,dj.current=null,Dd=fd;var Lu=xd();if(yd(Lu)){if("selectionStart"in Lu)var Bu={start:Lu.selectionStart,end:Lu.selectionEnd};else e:{Bu=(Bu=Lu.ownerDocument)&&Bu.defaultView||window;var Vu=Bu.getSelection&&Bu.getSelection();if(Vu&&Vu.rangeCount!==0){Bu=Vu.anchorNode;var Ou=Vu.anchorOffset,Du=Vu.focusNode;Vu=Vu.focusOffset;try{Bu.nodeType,Du.nodeType}catch{Bu=null;break e}var ku=0,Fu=-1,Nu=-1,Gu=0,zu=0,Hu=Lu,Uu=null;t:for(;;){for(var ju;Hu!==Bu||Ou!==0&&Hu.nodeType!==3||(Fu=ku+Ou),Hu!==Du||Vu!==0&&Hu.nodeType!==3||(Nu=ku+Vu),Hu.nodeType===3&&(ku+=Hu.nodeValue.length),(ju=Hu.firstChild)!==null;)Uu=Hu,Hu=ju;for(;;){if(Hu===Lu)break t;if(Uu===Bu&&++Gu===Ou&&(Fu=ku),Uu===Du&&++zu===Vu&&(Nu=ku),(ju=Hu.nextSibling)!==null)break;Hu=Uu,Uu=Hu.parentNode}Hu=ju}Bu=Fu===-1||Nu===-1?null:{start:Fu,end:Nu}}else Bu=null}Bu=Bu||{start:0,end:0}}else Bu=null;Ed={activeElementDetached:null,focusedElem:Lu,selectionRange:Bu},fd=!1,Y$b=Pu;do try{Tj()}catch(tp){if(Y$b===null)throw Error(u$l(330));Ei$1(Y$b,tp),Y$b=Y$b.nextEffect}while(Y$b!==null);Y$b=Pu;do try{for(Lu=_u,Bu=$u;Y$b!==null;){var Wu=Y$b.effectTag;if(Wu&16&&Rb(Y$b.stateNode,""),Wu&128){var Qu=Y$b.alternate;if(Qu!==null){var qu=Qu.ref;qu!==null&&(typeof qu=="function"?qu(null):qu.current=null)}}switch(Wu&1038){case 2:Pi$1(Y$b),Y$b.effectTag&=-3;break;case 6:Pi$1(Y$b),Y$b.effectTag&=-3,Si$1(Y$b.alternate,Y$b);break;case 1024:Y$b.effectTag&=-1025;break;case 1028:Y$b.effectTag&=-1025,Si$1(Y$b.alternate,Y$b);break;case 4:Si$1(Y$b.alternate,Y$b);break;case 8:Ou=Y$b,Mi$1(Lu,Ou,Bu),Ni$1(Ou)}Y$b=Y$b.nextEffect}}catch(tp){if(Y$b===null)throw Error(u$l(330));Ei$1(Y$b,tp),Y$b=Y$b.nextEffect}while(Y$b!==null);if(qu=Ed,Qu=xd(),Wu=qu.focusedElem,Bu=qu.selectionRange,Qu!==Wu&&Wu&&Wu.ownerDocument&&wd(Wu.ownerDocument.documentElement,Wu)){for(Bu!==null&&yd(Wu)&&(Qu=Bu.start,qu=Bu.end,qu===void 0&&(qu=Qu),"selectionStart"in Wu?(Wu.selectionStart=Qu,Wu.selectionEnd=Math.min(qu,Wu.value.length)):(qu=(Qu=Wu.ownerDocument||document)&&Qu.defaultView||window,qu.getSelection&&(qu=qu.getSelection(),Ou=Wu.textContent.length,Lu=Math.min(Bu.start,Ou),Bu=Bu.end===void 0?Lu:Math.min(Bu.end,Ou),!qu.extend&&Lu>Bu&&(Ou=Bu,Bu=Lu,Lu=Ou),Ou=vd(Wu,Lu),Du=vd(Wu,Bu),Ou&&Du&&(qu.rangeCount!==1||qu.anchorNode!==Ou.node||qu.anchorOffset!==Ou.offset||qu.focusNode!==Du.node||qu.focusOffset!==Du.offset)&&(Qu=Qu.createRange(),Qu.setStart(Ou.node,Ou.offset),qu.removeAllRanges(),Lu>Bu?(qu.addRange(Qu),qu.extend(Du.node,Du.offset)):(Qu.setEnd(Du.node,Du.offset),qu.addRange(Qu)))))),Qu=[],qu=Wu;qu=qu.parentNode;)qu.nodeType===1&&Qu.push({element:qu,left:qu.scrollLeft,top:qu.scrollTop});for(typeof Wu.focus=="function"&&Wu.focus(),Wu=0;Wu<Qu.length;Wu++)qu=Qu[Wu],qu.element.scrollLeft=qu.left,qu.element.scrollTop=qu.top}fd=!!Dd,Ed=Dd=null,_u.current=Tu,Y$b=Pu;do try{for(Wu=_u;Y$b!==null;){var Yu=Y$b.effectTag;if(Yu&36&&Ji$1(Wu,Y$b.alternate,Y$b),Yu&128){Qu=void 0;var Ju=Y$b.ref;if(Ju!==null){var _d=Y$b.stateNode;switch(Y$b.tag){case 5:Qu=_d;break;default:Qu=_d}typeof Ju=="function"?Ju(Qu):Ju.current=Qu}}Y$b=Y$b.nextEffect}}catch(tp){if(Y$b===null)throw Error(u$l(330));Ei$1(Y$b,tp),Y$b=Y$b.nextEffect}while(Y$b!==null);Y$b=null,Vf(),W$9=Ru}else _u.current=Tu;if(qj)qj=!1,rj=_u,sj=$u;else for(Y$b=Pu;Y$b!==null;)$u=Y$b.nextEffect,Y$b.nextEffect=null,Y$b=$u;if($u=_u.firstPendingTime,$u===0&&(aj=null),$u===1073741823?_u===vj?uj++:(uj=0,vj=_u):uj=0,typeof Uj=="function"&&Uj(Tu.stateNode,Cu),Z$8(_u),Yi$1)throw Yi$1=!1,_u=Zi$1,Zi$1=null,_u;return(W$9&ej)!==V$c||gg(),null}function Tj(){for(;Y$b!==null;){var _u=Y$b.effectTag;(_u&256)!==0&&Gi$1(Y$b.alternate,Y$b),(_u&512)===0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$b=Y$b.nextEffect}}function Dj(){if(sj!==90){var _u=97<sj?97:sj;return sj=90,cg(_u,Vj)}}function Vj(){if(rj===null)return!1;var _u=rj;if(rj=null,(W$9&(fj|gj))!==V$c)throw Error(u$l(331));var $u=W$9;for(W$9|=gj,_u=_u.current.firstEffect;_u!==null;){try{var Tu=_u;if((Tu.effectTag&512)!==0)switch(Tu.tag){case 0:case 11:case 15:case 22:Hi$1(5,Tu),Ii$1(5,Tu)}}catch(Cu){if(_u===null)throw Error(u$l(330));Ei$1(_u,Cu)}Tu=_u.nextEffect,_u.nextEffect=null,_u=Tu}return W$9=$u,gg(),!0}function Wj(_u,$u,Tu){$u=Ai$1(Tu,$u),$u=Xi$1(_u,$u,1073741823),xg(_u,$u),_u=xj(_u,1073741823),_u!==null&&Z$8(_u)}function Ei$1(_u,$u){if(_u.tag===3)Wj(_u,_u,$u);else for(var Tu=_u.return;Tu!==null;){if(Tu.tag===3){Wj(Tu,_u,$u);break}else if(Tu.tag===1){var Cu=Tu.stateNode;if(typeof Tu.type.getDerivedStateFromError=="function"||typeof Cu.componentDidCatch=="function"&&(aj===null||!aj.has(Cu))){_u=Ai$1($u,_u),_u=$i$1(Tu,_u,1073741823),xg(Tu,_u),Tu=xj(Tu,1073741823),Tu!==null&&Z$8(Tu);break}}Tu=Tu.return}}function Oj(_u,$u,Tu){var Cu=_u.pingCache;Cu!==null&&Cu.delete($u),T$d===_u&&U$d===Tu?S$d===vi$2||S$d===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(_u,U$d):oj=!0:Aj(_u,Tu)&&($u=_u.lastPingedTime,$u!==0&&$u<Tu||(_u.lastPingedTime=Tu,Z$8(_u)))}function Vi$1(_u,$u){var Tu=_u.stateNode;Tu!==null&&Tu.delete($u),$u=0,$u===0&&($u=Gg(),$u=Hg($u,_u,null)),_u=xj(_u,$u),_u!==null&&Z$8(_u)}var Rj;Rj=function(_u,$u,Tu){var Cu=$u.expirationTime;if(_u!==null){var Pu=$u.pendingProps;if(_u.memoizedProps!==Pu||K$f.current)rg=!0;else{if(Cu<Tu){switch(rg=!1,$u.tag){case 3:hi$1($u),Xh();break;case 5:if(fh($u),$u.mode&4&&Tu!==1&&Pu.hidden)return $u.expirationTime=$u.childExpirationTime=1,null;break;case 1:L$g($u.type)&&Gf($u);break;case 4:dh($u,$u.stateNode.containerInfo);break;case 10:Cu=$u.memoizedProps.value,Pu=$u.type._context,I$i(jg,Pu._currentValue),Pu._currentValue=Cu;break;case 13:if($u.memoizedState!==null)return Cu=$u.child.childExpirationTime,Cu!==0&&Cu>=Tu?ji$1(_u,$u,Tu):(I$i(M$n,M$n.current&1),$u=$h(_u,$u,Tu),$u!==null?$u.sibling:null);I$i(M$n,M$n.current&1);break;case 19:if(Cu=$u.childExpirationTime>=Tu,(_u.effectTag&64)!==0){if(Cu)return mi$1(_u,$u,Tu);$u.effectTag|=64}if(Pu=$u.memoizedState,Pu!==null&&(Pu.rendering=null,Pu.tail=null),I$i(M$n,M$n.current),!Cu)return null}return $h(_u,$u,Tu)}rg=!1}}else rg=!1;switch($u.expirationTime=0,$u.tag){case 2:if(Cu=$u.type,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,Pu=Cf($u,J$b.current),qg($u,Tu),Pu=oh(null,$u,Cu,_u,Pu,Tu),$u.effectTag|=1,typeof Pu=="object"&&Pu!==null&&typeof Pu.render=="function"&&Pu.$$typeof===void 0){if($u.tag=1,$u.memoizedState=null,$u.updateQueue=null,L$g(Cu)){var Ru=!0;Gf($u)}else Ru=!1;$u.memoizedState=Pu.state!==null&&Pu.state!==void 0?Pu.state:null,ug($u);var Lu=Cu.getDerivedStateFromProps;typeof Lu=="function"&&Fg($u,Cu,Lu,_u),Pu.updater=Jg,$u.stateNode=Pu,Pu._reactInternalFiber=$u,Ng($u,Cu,_u,Tu),$u=gi$1(null,$u,Cu,!0,Ru,Tu)}else $u.tag=0,R$e(null,$u,Pu,Tu),$u=$u.child;return $u;case 16:e:{if(Pu=$u.elementType,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,ob(Pu),Pu._status!==1)throw Pu._result;switch(Pu=Pu._result,$u.type=Pu,Ru=$u.tag=Xj(Pu),_u=ig(Pu,_u),Ru){case 0:$u=di$1(null,$u,Pu,_u,Tu);break e;case 1:$u=fi$1(null,$u,Pu,_u,Tu);break e;case 11:$u=Zh(null,$u,Pu,_u,Tu);break e;case 14:$u=ai$1(null,$u,Pu,ig(Pu.type,_u),Cu,Tu);break e}throw Error(u$l(306,Pu,""))}return $u;case 0:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),di$1(_u,$u,Cu,Pu,Tu);case 1:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),fi$1(_u,$u,Cu,Pu,Tu);case 3:if(hi$1($u),Cu=$u.updateQueue,_u===null||Cu===null)throw Error(u$l(282));if(Cu=$u.pendingProps,Pu=$u.memoizedState,Pu=Pu!==null?Pu.element:null,vg(_u,$u),zg($u,Cu,null,Tu),Cu=$u.memoizedState.element,Cu===Pu)Xh(),$u=$h(_u,$u,Tu);else{if((Pu=$u.stateNode.hydrate)&&(Ph=Jd($u.stateNode.containerInfo.firstChild),Oh=$u,Pu=Qh=!0),Pu)for(Tu=Yg($u,null,Cu,Tu),$u.child=Tu;Tu;)Tu.effectTag=Tu.effectTag&-3|1024,Tu=Tu.sibling;else R$e(_u,$u,Cu,Tu),Xh();$u=$u.child}return $u;case 5:return fh($u),_u===null&&Uh($u),Cu=$u.type,Pu=$u.pendingProps,Ru=_u!==null?_u.memoizedProps:null,Lu=Pu.children,Gd(Cu,Pu)?Lu=null:Ru!==null&&Gd(Cu,Ru)&&($u.effectTag|=16),ei$1(_u,$u),$u.mode&4&&Tu!==1&&Pu.hidden?($u.expirationTime=$u.childExpirationTime=1,$u=null):(R$e(_u,$u,Lu,Tu),$u=$u.child),$u;case 6:return _u===null&&Uh($u),null;case 13:return ji$1(_u,$u,Tu);case 4:return dh($u,$u.stateNode.containerInfo),Cu=$u.pendingProps,_u===null?$u.child=Xg($u,null,Cu,Tu):R$e(_u,$u,Cu,Tu),$u.child;case 11:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),Zh(_u,$u,Cu,Pu,Tu);case 7:return R$e(_u,$u,$u.pendingProps,Tu),$u.child;case 8:return R$e(_u,$u,$u.pendingProps.children,Tu),$u.child;case 12:return R$e(_u,$u,$u.pendingProps.children,Tu),$u.child;case 10:e:{Cu=$u.type._context,Pu=$u.pendingProps,Lu=$u.memoizedProps,Ru=Pu.value;var Bu=$u.type._context;if(I$i(jg,Bu._currentValue),Bu._currentValue=Ru,Lu!==null)if(Bu=Lu.value,Ru=$e$1(Bu,Ru)?0:(typeof Cu._calculateChangedBits=="function"?Cu._calculateChangedBits(Bu,Ru):1073741823)|0,Ru===0){if(Lu.children===Pu.children&&!K$f.current){$u=$h(_u,$u,Tu);break e}}else for(Bu=$u.child,Bu!==null&&(Bu.return=$u);Bu!==null;){var Vu=Bu.dependencies;if(Vu!==null){Lu=Bu.child;for(var Ou=Vu.firstContext;Ou!==null;){if(Ou.context===Cu&&(Ou.observedBits&Ru)!==0){Bu.tag===1&&(Ou=wg(Tu,null),Ou.tag=2,xg(Bu,Ou)),Bu.expirationTime<Tu&&(Bu.expirationTime=Tu),Ou=Bu.alternate,Ou!==null&&Ou.expirationTime<Tu&&(Ou.expirationTime=Tu),pg(Bu.return,Tu),Vu.expirationTime<Tu&&(Vu.expirationTime=Tu);break}Ou=Ou.next}}else Lu=Bu.tag===10&&Bu.type===$u.type?null:Bu.child;if(Lu!==null)Lu.return=Bu;else for(Lu=Bu;Lu!==null;){if(Lu===$u){Lu=null;break}if(Bu=Lu.sibling,Bu!==null){Bu.return=Lu.return,Lu=Bu;break}Lu=Lu.return}Bu=Lu}R$e(_u,$u,Pu.children,Tu),$u=$u.child}return $u;case 9:return Pu=$u.type,Ru=$u.pendingProps,Cu=Ru.children,qg($u,Tu),Pu=sg(Pu,Ru.unstable_observedBits),Cu=Cu(Pu),$u.effectTag|=1,R$e(_u,$u,Cu,Tu),$u.child;case 14:return Pu=$u.type,Ru=ig(Pu,$u.pendingProps),Ru=ig(Pu.type,Ru),ai$1(_u,$u,Pu,Ru,Cu,Tu);case 15:return ci$2(_u,$u,$u.type,$u.pendingProps,Cu,Tu);case 17:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),$u.tag=1,L$g(Cu)?(_u=!0,Gf($u)):_u=!1,qg($u,Tu),Lg($u,Cu,Pu),Ng($u,Cu,Pu,Tu),gi$1(null,$u,Cu,!0,_u,Tu);case 19:return mi$1(_u,$u,Tu)}throw Error(u$l(156,$u.tag))};var Uj=null,Li$1=null;function Yj(_u){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if($u.isDisabled||!$u.supportsFiber)return!0;try{var Tu=$u.inject(_u);Uj=function(Cu){try{$u.onCommitFiberRoot(Tu,Cu,void 0,(Cu.current.effectTag&64)===64)}catch{}},Li$1=function(Cu){try{$u.onCommitFiberUnmount(Tu,Cu)}catch{}}}catch{}return!0}function Zj(_u,$u,Tu,Cu){this.tag=_u,this.key=Tu,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Cu,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(_u,$u,Tu,Cu){return new Zj(_u,$u,Tu,Cu)}function bi$1(_u){return _u=_u.prototype,!(!_u||!_u.isReactComponent)}function Xj(_u){if(typeof _u=="function")return bi$1(_u)?1:0;if(_u!=null){if(_u=_u.$$typeof,_u===gb)return 11;if(_u===jb)return 14}return 2}function Sg(_u,$u){var Tu=_u.alternate;return Tu===null?(Tu=Sh(_u.tag,$u,_u.key,_u.mode),Tu.elementType=_u.elementType,Tu.type=_u.type,Tu.stateNode=_u.stateNode,Tu.alternate=_u,_u.alternate=Tu):(Tu.pendingProps=$u,Tu.effectTag=0,Tu.nextEffect=null,Tu.firstEffect=null,Tu.lastEffect=null),Tu.childExpirationTime=_u.childExpirationTime,Tu.expirationTime=_u.expirationTime,Tu.child=_u.child,Tu.memoizedProps=_u.memoizedProps,Tu.memoizedState=_u.memoizedState,Tu.updateQueue=_u.updateQueue,$u=_u.dependencies,Tu.dependencies=$u===null?null:{expirationTime:$u.expirationTime,firstContext:$u.firstContext,responders:$u.responders},Tu.sibling=_u.sibling,Tu.index=_u.index,Tu.ref=_u.ref,Tu}function Ug(_u,$u,Tu,Cu,Pu,Ru){var Lu=2;if(Cu=_u,typeof _u=="function")bi$1(_u)&&(Lu=1);else if(typeof _u=="string")Lu=5;else e:switch(_u){case ab:return Wg(Tu.children,Pu,Ru,$u);case fb:Lu=8,Pu|=7;break;case bb:Lu=8,Pu|=1;break;case cb:return _u=Sh(12,Tu,$u,Pu|8),_u.elementType=cb,_u.type=cb,_u.expirationTime=Ru,_u;case hb:return _u=Sh(13,Tu,$u,Pu),_u.type=hb,_u.elementType=hb,_u.expirationTime=Ru,_u;case ib:return _u=Sh(19,Tu,$u,Pu),_u.elementType=ib,_u.expirationTime=Ru,_u;default:if(typeof _u=="object"&&_u!==null)switch(_u.$$typeof){case db:Lu=10;break e;case eb:Lu=9;break e;case gb:Lu=11;break e;case jb:Lu=14;break e;case kb:Lu=16,Cu=null;break e;case lb:Lu=22;break e}throw Error(u$l(130,_u==null?_u:typeof _u,""))}return $u=Sh(Lu,Tu,$u,Pu),$u.elementType=_u,$u.type=Cu,$u.expirationTime=Ru,$u}function Wg(_u,$u,Tu,Cu){return _u=Sh(7,_u,Cu,$u),_u.expirationTime=Tu,_u}function Tg(_u,$u,Tu){return _u=Sh(6,_u,null,$u),_u.expirationTime=Tu,_u}function Vg(_u,$u,Tu){return $u=Sh(4,_u.children!==null?_u.children:[],_u.key,$u),$u.expirationTime=Tu,$u.stateNode={containerInfo:_u.containerInfo,pendingChildren:null,implementation:_u.implementation},$u}function ak(_u,$u,Tu){this.tag=$u,this.current=null,this.containerInfo=_u,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=Tu,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(_u,$u){var Tu=_u.firstSuspendedTime;return _u=_u.lastSuspendedTime,Tu!==0&&Tu>=$u&&_u<=$u}function xi$1(_u,$u){var Tu=_u.firstSuspendedTime,Cu=_u.lastSuspendedTime;Tu<$u&&(_u.firstSuspendedTime=$u),(Cu>$u||Tu===0)&&(_u.lastSuspendedTime=$u),$u<=_u.lastPingedTime&&(_u.lastPingedTime=0),$u<=_u.lastExpiredTime&&(_u.lastExpiredTime=0)}function yi$1(_u,$u){$u>_u.firstPendingTime&&(_u.firstPendingTime=$u);var Tu=_u.firstSuspendedTime;Tu!==0&&($u>=Tu?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:$u>=_u.lastSuspendedTime&&(_u.lastSuspendedTime=$u+1),$u>_u.nextKnownPendingLevel&&(_u.nextKnownPendingLevel=$u))}function Cj(_u,$u){var Tu=_u.lastExpiredTime;(Tu===0||Tu>$u)&&(_u.lastExpiredTime=$u)}function bk(_u,$u,Tu,Cu){var Pu=$u.current,Ru=Gg(),Lu=Dg.suspense;Ru=Hg(Ru,Pu,Lu);e:if(Tu){Tu=Tu._reactInternalFiber;t:{if(dc(Tu)!==Tu||Tu.tag!==1)throw Error(u$l(170));var Bu=Tu;do{switch(Bu.tag){case 3:Bu=Bu.stateNode.context;break t;case 1:if(L$g(Bu.type)){Bu=Bu.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Bu=Bu.return}while(Bu!==null);throw Error(u$l(171))}if(Tu.tag===1){var Vu=Tu.type;if(L$g(Vu)){Tu=Ff(Tu,Vu,Bu);break e}}Tu=Bu}else Tu=Af;return $u.context===null?$u.context=Tu:$u.pendingContext=Tu,$u=wg(Ru,Lu),$u.payload={element:_u},Cu=Cu===void 0?null:Cu,Cu!==null&&($u.callback=Cu),xg(Pu,$u),Ig(Pu,Ru),Ru}function ck(_u){if(_u=_u.current,!_u.child)return null;switch(_u.child.tag){case 5:return _u.child.stateNode;default:return _u.child.stateNode}}function dk(_u,$u){_u=_u.memoizedState,_u!==null&&_u.dehydrated!==null&&_u.retryTime<$u&&(_u.retryTime=$u)}function ek(_u,$u){dk(_u,$u),(_u=_u.alternate)&&dk(_u,$u)}function fk(_u,$u,Tu){Tu=Tu!=null&&Tu.hydrate===!0;var Cu=new ak(_u,$u,Tu),Pu=Sh(3,null,null,$u===2?7:$u===1?3:0);Cu.current=Pu,Pu.stateNode=Cu,ug(Pu),_u[Od]=Cu.current,Tu&&$u!==0&&Jc(_u,_u.nodeType===9?_u:_u.ownerDocument),this._internalRoot=Cu}fk.prototype.render=function(_u){bk(_u,this._internalRoot,null,null)};fk.prototype.unmount=function(){var _u=this._internalRoot,$u=_u.containerInfo;bk(null,_u,null,function(){$u[Od]=null})};function gk(_u){return!(!_u||_u.nodeType!==1&&_u.nodeType!==9&&_u.nodeType!==11&&(_u.nodeType!==8||_u.nodeValue!==" react-mount-point-unstable "))}function hk(_u,$u){if($u||($u=_u?_u.nodeType===9?_u.documentElement:_u.firstChild:null,$u=!(!$u||$u.nodeType!==1||!$u.hasAttribute("data-reactroot"))),!$u)for(var Tu;Tu=_u.lastChild;)_u.removeChild(Tu);return new fk(_u,0,$u?{hydrate:!0}:void 0)}function ik(_u,$u,Tu,Cu,Pu){var Ru=Tu._reactRootContainer;if(Ru){var Lu=Ru._internalRoot;if(typeof Pu=="function"){var Bu=Pu;Pu=function(){var Ou=ck(Lu);Bu.call(Ou)}}bk($u,Lu,_u,Pu)}else{if(Ru=Tu._reactRootContainer=hk(Tu,Cu),Lu=Ru._internalRoot,typeof Pu=="function"){var Vu=Pu;Pu=function(){var Ou=ck(Lu);Vu.call(Ou)}}Nj(function(){bk($u,Lu,_u,Pu)})}return ck(Lu)}function jk(_u,$u,Tu){var Cu=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a$1,key:Cu==null?null:""+Cu,children:_u,containerInfo:$u,implementation:Tu}}wc=function(_u){if(_u.tag===13){var $u=hg(Gg(),150,100);Ig(_u,$u),ek(_u,$u)}};xc=function(_u){_u.tag===13&&(Ig(_u,3),ek(_u,3))};yc=function(_u){if(_u.tag===13){var $u=Gg();$u=Hg($u,_u,null),Ig(_u,$u),ek(_u,$u)}};za$1=function(_u,$u,Tu){switch($u){case"input":if(Cb(_u,Tu),$u=Tu.name,Tu.type==="radio"&&$u!=null){for(Tu=_u;Tu.parentNode;)Tu=Tu.parentNode;for(Tu=Tu.querySelectorAll("input[name="+JSON.stringify(""+$u)+'][type="radio"]'),$u=0;$u<Tu.length;$u++){var Cu=Tu[$u];if(Cu!==_u&&Cu.form===_u.form){var Pu=Qd(Cu);if(!Pu)throw Error(u$l(90));yb(Cu),Cb(Cu,Pu)}}}break;case"textarea":Kb(_u,Tu);break;case"select":$u=Tu.value,$u!=null&&Hb(_u,!!Tu.multiple,$u,!1)}};Fa$1=Mj;Ga$1=function(_u,$u,Tu,Cu,Pu){var Ru=W$9;W$9|=4;try{return cg(98,_u.bind(null,$u,Tu,Cu,Pu))}finally{W$9=Ru,W$9===V$c&&gg()}};Ha$1=function(){(W$9&(1|fj|gj))===V$c&&(Lj(),Dj())};Ia$1=function(_u,$u){var Tu=W$9;W$9|=2;try{return _u($u)}finally{W$9=Tu,W$9===V$c&&gg()}};function kk(_u,$u){var Tu=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk($u))throw Error(u$l(200));return jk(_u,$u,null,Tu)}var lk={Events:[Nc,Pd,Qd,xa$1,ta$1,Xd,function(_u){jc(_u,Wd)},Da$1,Ea$1,id,mc,Dj,{current:!1}]};(function(_u){var $u=_u.findFiberByHostInstance;return Yj(n$n({},_u,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(Tu){return Tu=hc(Tu),Tu===null?null:Tu.stateNode},findFiberByHostInstance:function(Tu){return $u?$u(Tu):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(_u){if(_u==null)return null;if(_u.nodeType===1)return _u;var $u=_u._reactInternalFiber;if($u===void 0)throw typeof _u.render=="function"?Error(u$l(188)):Error(u$l(268,Object.keys(_u)));return _u=hc($u),_u=_u===null?null:_u.stateNode,_u};reactDom_production_min.flushSync=function(_u,$u){if((W$9&(fj|gj))!==V$c)throw Error(u$l(187));var Tu=W$9;W$9|=1;try{return cg(99,_u.bind(null,$u))}finally{W$9=Tu,gg()}};reactDom_production_min.hydrate=function(_u,$u,Tu){if(!gk($u))throw Error(u$l(200));return ik(null,_u,$u,!0,Tu)};reactDom_production_min.render=function(_u,$u,Tu){if(!gk($u))throw Error(u$l(200));return ik(null,_u,$u,!1,Tu)};reactDom_production_min.unmountComponentAtNode=function(_u){if(!gk(_u))throw Error(u$l(40));return _u._reactRootContainer?(Nj(function(){ik(null,null,_u,!1,function(){_u._reactRootContainer=null,_u[Od]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(_u,$u){return kk(_u,$u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_u,$u,Tu,Cu){if(!gk(Tu))throw Error(u$l(200));if(_u==null||_u._reactInternalFiber===void 0)throw Error(u$l(38));return ik(_u,$u,Tu,!1,Cu)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_u){console.error(_u)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(_u){return typeof _u=="number"&&isFinite(_u)&&Math.floor(_u)===_u});Math.sign===void 0&&(Math.sign=function(_u){return _u<0?-1:_u>0?1:+_u});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(_u){if(_u==null)throw new TypeError("Cannot convert undefined or null to object");const $u=Object(_u);for(let Tu=1;Tu<arguments.length;Tu++){const Cu=arguments[Tu];if(Cu!=null)for(const Pu in Cu)Object.prototype.hasOwnProperty.call(Cu,Pu)&&($u[Pu]=Cu[Pu])}return $u});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(_u,$u){this._listeners===void 0&&(this._listeners={});var Tu=this._listeners;Tu[_u]===void 0&&(Tu[_u]=[]),Tu[_u].indexOf($u)===-1&&Tu[_u].push($u)},hasEventListener:function(_u,$u){if(this._listeners===void 0)return!1;var Tu=this._listeners;return Tu[_u]!==void 0&&Tu[_u].indexOf($u)!==-1},removeEventListener:function(_u,$u){if(this._listeners!==void 0){var Tu=this._listeners,Cu=Tu[_u];if(Cu!==void 0){var Pu=Cu.indexOf($u);Pu!==-1&&Cu.splice(Pu,1)}}},dispatchEvent:function(_u){if(this._listeners!==void 0){var $u=this._listeners,Tu=$u[_u.type];if(Tu!==void 0){_u.target=this;for(var Cu=Tu.slice(0),Pu=0,Ru=Cu.length;Pu<Ru;Pu++)Cu[Pu].call(this,_u)}}}});var _lut=[];for(var i$n=0;i$n<256;i$n++)_lut[i$n]=(i$n<16?"0":"")+i$n.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var _u=Math.random()*4294967295|0,$u=Math.random()*4294967295|0,Tu=Math.random()*4294967295|0,Cu=Math.random()*4294967295|0,Pu=_lut[_u&255]+_lut[_u>>8&255]+_lut[_u>>16&255]+_lut[_u>>24&255]+"-"+_lut[$u&255]+_lut[$u>>8&255]+"-"+_lut[$u>>16&15|64]+_lut[$u>>24&255]+"-"+_lut[Tu&63|128]+_lut[Tu>>8&255]+"-"+_lut[Tu>>16&255]+_lut[Tu>>24&255]+_lut[Cu&255]+_lut[Cu>>8&255]+_lut[Cu>>16&255]+_lut[Cu>>24&255];return Pu.toUpperCase()},clamp:function(_u,$u,Tu){return Math.max($u,Math.min(Tu,_u))},euclideanModulo:function(_u,$u){return(_u%$u+$u)%$u},mapLinear:function(_u,$u,Tu,Cu,Pu){return Cu+(_u-$u)*(Pu-Cu)/(Tu-$u)},lerp:function(_u,$u,Tu){return(1-Tu)*_u+Tu*$u},smoothstep:function(_u,$u,Tu){return _u<=$u?0:_u>=Tu?1:(_u=(_u-$u)/(Tu-$u),_u*_u*(3-2*_u))},smootherstep:function(_u,$u,Tu){return _u<=$u?0:_u>=Tu?1:(_u=(_u-$u)/(Tu-$u),_u*_u*_u*(_u*(_u*6-15)+10))},randInt:function(_u,$u){return _u+Math.floor(Math.random()*($u-_u+1))},randFloat:function(_u,$u){return _u+Math.random()*($u-_u)},randFloatSpread:function(_u){return _u*(.5-Math.random())},degToRad:function(_u){return _u*MathUtils.DEG2RAD},radToDeg:function(_u){return _u*MathUtils.RAD2DEG},isPowerOfTwo:function(_u){return(_u&_u-1)===0&&_u!==0},ceilPowerOfTwo:function(_u){return Math.pow(2,Math.ceil(Math.log(_u)/Math.LN2))},floorPowerOfTwo:function(_u){return Math.pow(2,Math.floor(Math.log(_u)/Math.LN2))},setQuaternionFromProperEuler:function(_u,$u,Tu,Cu,Pu){var Ru=Math.cos,Lu=Math.sin,Bu=Ru(Tu/2),Vu=Lu(Tu/2),Ou=Ru(($u+Cu)/2),Du=Lu(($u+Cu)/2),ku=Ru(($u-Cu)/2),Fu=Lu(($u-Cu)/2),Nu=Ru((Cu-$u)/2),Gu=Lu((Cu-$u)/2);switch(Pu){case"XYX":_u.set(Bu*Du,Vu*ku,Vu*Fu,Bu*Ou);break;case"YZY":_u.set(Vu*Fu,Bu*Du,Vu*ku,Bu*Ou);break;case"ZXZ":_u.set(Vu*ku,Vu*Fu,Bu*Du,Bu*Ou);break;case"XZX":_u.set(Bu*Du,Vu*Gu,Vu*Nu,Bu*Ou);break;case"YXY":_u.set(Vu*Nu,Bu*Du,Vu*Gu,Bu*Ou);break;case"ZYZ":_u.set(Vu*Gu,Vu*Nu,Bu*Du,Bu*Ou);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Pu)}}};function Vector2(_u,$u){this.x=_u||0,this.y=$u||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(_u){this.x=_u}},height:{get:function(){return this.y},set:function(_u){this.y=_u}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(_u,$u){return this.x=_u,this.y=$u,this},setScalar:function(_u){return this.x=_u,this.y=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this},multiply:function(_u){return this.x*=_u.x,this.y*=_u.y,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},applyMatrix3:function(_u){var $u=this.x,Tu=this.y,Cu=_u.elements;return this.x=Cu[0]*$u+Cu[3]*Tu+Cu[6],this.y=Cu[1]*$u+Cu[4]*Tu+Cu[7],this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this},clampLength:function(_u,$u){var Tu=this.length();return this.divideScalar(Tu||1).multiplyScalar(Math.max(_u,Math.min($u,Tu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(_u){return this.x*_u.x+this.y*_u.y},cross:function(_u){return this.x*_u.y-this.y*_u.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var _u=Math.atan2(-this.y,-this.x)+Math.PI;return _u},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Tu=this.y-_u.y;return $u*$u+Tu*Tu},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this},lerpVectors:function(_u,$u,Tu){return this.x=_u.x+($u.x-_u.x)*Tu,this.y=_u.y+($u.y-_u.y)*Tu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u},fromBufferAttribute:function(_u,$u,Tu){return Tu!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this},rotateAround:function(_u,$u){var Tu=Math.cos($u),Cu=Math.sin($u),Pu=this.x-_u.x,Ru=this.y-_u.y;return this.x=Pu*Tu-Ru*Cu+_u.x,this.y=Pu*Cu+Ru*Tu+_u.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu){var Ou=this.elements;return Ou[0]=_u,Ou[1]=Cu,Ou[2]=Lu,Ou[3]=$u,Ou[4]=Pu,Ou[5]=Bu,Ou[6]=Tu,Ou[7]=Ru,Ou[8]=Vu,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Tu=_u.elements;return $u[0]=Tu[0],$u[1]=Tu[1],$u[2]=Tu[2],$u[3]=Tu[3],$u[4]=Tu[4],$u[5]=Tu[5],$u[6]=Tu[6],$u[7]=Tu[7],$u[8]=Tu[8],this},extractBasis:function(_u,$u,Tu){return _u.setFromMatrix3Column(this,0),$u.setFromMatrix3Column(this,1),Tu.setFromMatrix3Column(this,2),this},setFromMatrix4:function(_u){var $u=_u.elements;return this.set($u[0],$u[4],$u[8],$u[1],$u[5],$u[9],$u[2],$u[6],$u[10]),this},multiply:function(_u){return this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Tu=_u.elements,Cu=$u.elements,Pu=this.elements,Ru=Tu[0],Lu=Tu[3],Bu=Tu[6],Vu=Tu[1],Ou=Tu[4],Du=Tu[7],ku=Tu[2],Fu=Tu[5],Nu=Tu[8],Gu=Cu[0],zu=Cu[3],Hu=Cu[6],Uu=Cu[1],ju=Cu[4],Wu=Cu[7],Qu=Cu[2],qu=Cu[5],Yu=Cu[8];return Pu[0]=Ru*Gu+Lu*Uu+Bu*Qu,Pu[3]=Ru*zu+Lu*ju+Bu*qu,Pu[6]=Ru*Hu+Lu*Wu+Bu*Yu,Pu[1]=Vu*Gu+Ou*Uu+Du*Qu,Pu[4]=Vu*zu+Ou*ju+Du*qu,Pu[7]=Vu*Hu+Ou*Wu+Du*Yu,Pu[2]=ku*Gu+Fu*Uu+Nu*Qu,Pu[5]=ku*zu+Fu*ju+Nu*qu,Pu[8]=ku*Hu+Fu*Wu+Nu*Yu,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[3]*=_u,$u[6]*=_u,$u[1]*=_u,$u[4]*=_u,$u[7]*=_u,$u[2]*=_u,$u[5]*=_u,$u[8]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Tu=_u[1],Cu=_u[2],Pu=_u[3],Ru=_u[4],Lu=_u[5],Bu=_u[6],Vu=_u[7],Ou=_u[8];return $u*Ru*Ou-$u*Lu*Vu-Tu*Pu*Ou+Tu*Lu*Bu+Cu*Pu*Vu-Cu*Ru*Bu},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var Tu=_u.elements,Cu=this.elements,Pu=Tu[0],Ru=Tu[1],Lu=Tu[2],Bu=Tu[3],Vu=Tu[4],Ou=Tu[5],Du=Tu[6],ku=Tu[7],Fu=Tu[8],Nu=Fu*Vu-Ou*ku,Gu=Ou*Du-Fu*Bu,zu=ku*Bu-Vu*Du,Hu=Pu*Nu+Ru*Gu+Lu*zu;if(Hu===0)return this.set(0,0,0,0,0,0,0,0,0);var Uu=1/Hu;return Cu[0]=Nu*Uu,Cu[1]=(Lu*ku-Fu*Ru)*Uu,Cu[2]=(Ou*Ru-Lu*Vu)*Uu,Cu[3]=Gu*Uu,Cu[4]=(Fu*Pu-Lu*Du)*Uu,Cu[5]=(Lu*Bu-Ou*Pu)*Uu,Cu[6]=zu*Uu,Cu[7]=(Ru*Du-ku*Pu)*Uu,Cu[8]=(Vu*Pu-Ru*Bu)*Uu,this},transpose:function(){var _u,$u=this.elements;return _u=$u[1],$u[1]=$u[3],$u[3]=_u,_u=$u[2],$u[2]=$u[6],$u[6]=_u,_u=$u[5],$u[5]=$u[7],$u[7]=_u,this},getNormalMatrix:function(_u){return this.setFromMatrix4(_u).getInverse(this).transpose()},transposeIntoArray:function(_u){var $u=this.elements;return _u[0]=$u[0],_u[1]=$u[3],_u[2]=$u[6],_u[3]=$u[1],_u[4]=$u[4],_u[5]=$u[7],_u[6]=$u[2],_u[7]=$u[5],_u[8]=$u[8],this},setUvTransform:function(_u,$u,Tu,Cu,Pu,Ru,Lu){var Bu=Math.cos(Pu),Vu=Math.sin(Pu);this.set(Tu*Bu,Tu*Vu,-Tu*(Bu*Ru+Vu*Lu)+Ru+_u,-Cu*Vu,Cu*Bu,-Cu*(-Vu*Ru+Bu*Lu)+Lu+$u,0,0,1)},scale:function(_u,$u){var Tu=this.elements;return Tu[0]*=_u,Tu[3]*=_u,Tu[6]*=_u,Tu[1]*=$u,Tu[4]*=$u,Tu[7]*=$u,this},rotate:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u),Cu=this.elements,Pu=Cu[0],Ru=Cu[3],Lu=Cu[6],Bu=Cu[1],Vu=Cu[4],Ou=Cu[7];return Cu[0]=$u*Pu+Tu*Bu,Cu[3]=$u*Ru+Tu*Vu,Cu[6]=$u*Lu+Tu*Ou,Cu[1]=-Tu*Pu+$u*Bu,Cu[4]=-Tu*Ru+$u*Vu,Cu[7]=-Tu*Lu+$u*Ou,this},translate:function(_u,$u){var Tu=this.elements;return Tu[0]+=_u*Tu[2],Tu[3]+=_u*Tu[5],Tu[6]+=_u*Tu[8],Tu[1]+=$u*Tu[2],Tu[4]+=$u*Tu[5],Tu[7]+=$u*Tu[8],this},equals:function(_u){for(var $u=this.elements,Tu=_u.elements,Cu=0;Cu<9;Cu++)if($u[Cu]!==Tu[Cu])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Tu=0;Tu<9;Tu++)this.elements[Tu]=_u[Tu+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Tu=this.elements;return _u[$u]=Tu[0],_u[$u+1]=Tu[1],_u[$u+2]=Tu[2],_u[$u+3]=Tu[3],_u[$u+4]=Tu[4],_u[$u+5]=Tu[5],_u[$u+6]=Tu[6],_u[$u+7]=Tu[7],_u[$u+8]=Tu[8],_u}});var _canvas,ImageUtils={getDataURL:function(_u){var $u;if(typeof HTMLCanvasElement=="undefined")return _u.src;if(_u instanceof HTMLCanvasElement)$u=_u;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=_u.width,_canvas.height=_u.height;var Tu=_canvas.getContext("2d");_u instanceof ImageData?Tu.putImageData(_u,0,0):Tu.drawImage(_u,0,0,_u.width,_u.height),$u=_canvas}return $u.width>2048||$u.height>2048?$u.toDataURL("image/jpeg",.6):$u.toDataURL("image/png")}},textureId=0;function Texture(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=_u!==void 0?_u:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=$u!==void 0?$u:Texture.DEFAULT_MAPPING,this.wrapS=Tu!==void 0?Tu:ClampToEdgeWrapping,this.wrapT=Cu!==void 0?Cu:ClampToEdgeWrapping,this.magFilter=Pu!==void 0?Pu:LinearFilter,this.minFilter=Ru!==void 0?Ru:LinearMipmapLinearFilter,this.anisotropy=Vu!==void 0?Vu:1,this.format=Lu!==void 0?Lu:RGBAFormat,this.internalFormat=null,this.type=Bu!==void 0?Bu:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Ou!==void 0?Ou:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.name=_u.name,this.image=_u.image,this.mipmaps=_u.mipmaps.slice(0),this.mapping=_u.mapping,this.wrapS=_u.wrapS,this.wrapT=_u.wrapT,this.magFilter=_u.magFilter,this.minFilter=_u.minFilter,this.anisotropy=_u.anisotropy,this.format=_u.format,this.internalFormat=_u.internalFormat,this.type=_u.type,this.offset.copy(_u.offset),this.repeat.copy(_u.repeat),this.center.copy(_u.center),this.rotation=_u.rotation,this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrix.copy(_u.matrix),this.generateMipmaps=_u.generateMipmaps,this.premultiplyAlpha=_u.premultiplyAlpha,this.flipY=_u.flipY,this.unpackAlignment=_u.unpackAlignment,this.encoding=_u.encoding,this},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";if(!$u&&_u.textures[this.uuid]!==void 0)return _u.textures[this.uuid];var Tu={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Cu=this.image;if(Cu.uuid===void 0&&(Cu.uuid=MathUtils.generateUUID()),!$u&&_u.images[Cu.uuid]===void 0){var Pu;if(Array.isArray(Cu)){Pu=[];for(var Ru=0,Lu=Cu.length;Ru<Lu;Ru++)Pu.push(ImageUtils.getDataURL(Cu[Ru]))}else Pu=ImageUtils.getDataURL(Cu);_u.images[Cu.uuid]={uuid:Cu.uuid,url:Pu}}Tu.image=Cu.uuid}return $u||(_u.textures[this.uuid]=Tu),Tu},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(_u){if(this.mapping!==UVMapping)return _u;if(_u.applyMatrix3(this.matrix),_u.x<0||_u.x>1)switch(this.wrapS){case RepeatWrapping:_u.x=_u.x-Math.floor(_u.x);break;case ClampToEdgeWrapping:_u.x=_u.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.x)%2)===1?_u.x=Math.ceil(_u.x)-_u.x:_u.x=_u.x-Math.floor(_u.x);break}if(_u.y<0||_u.y>1)switch(this.wrapT){case RepeatWrapping:_u.y=_u.y-Math.floor(_u.y);break;case ClampToEdgeWrapping:_u.y=_u.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.y)%2)===1?_u.y=Math.ceil(_u.y)-_u.y:_u.y=_u.y-Math.floor(_u.y);break}return this.flipY&&(_u.y=1-_u.y),_u}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function Vector4(_u,$u,Tu,Cu){this.x=_u||0,this.y=$u||0,this.z=Tu||0,this.w=Cu!==void 0?Cu:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(_u){this.z=_u}},height:{get:function(){return this.w},set:function(_u){this.w=_u}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(_u,$u,Tu,Cu){return this.x=_u,this.y=$u,this.z=Tu,this.w=Cu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this.w=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setW:function(_u){return this.w=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;case 3:this.w=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this.w=_u.w!==void 0?_u.w:1,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this.w+=_u.w,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this.w+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this.w=_u.w+$u.w,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this.w+=_u.w*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this.w-=_u.w,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this.w-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this.w=_u.w-$u.w,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this.w*=_u,this},applyMatrix4:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=this.w,Ru=_u.elements;return this.x=Ru[0]*$u+Ru[4]*Tu+Ru[8]*Cu+Ru[12]*Pu,this.y=Ru[1]*$u+Ru[5]*Tu+Ru[9]*Cu+Ru[13]*Pu,this.z=Ru[2]*$u+Ru[6]*Tu+Ru[10]*Cu+Ru[14]*Pu,this.w=Ru[3]*$u+Ru[7]*Tu+Ru[11]*Cu+Ru[15]*Pu,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},setAxisAngleFromQuaternion:function(_u){this.w=2*Math.acos(_u.w);var $u=Math.sqrt(1-_u.w*_u.w);return $u<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_u.x/$u,this.y=_u.y/$u,this.z=_u.z/$u),this},setAxisAngleFromRotationMatrix:function(_u){var $u,Tu,Cu,Pu,Ru=.01,Lu=.1,Bu=_u.elements,Vu=Bu[0],Ou=Bu[4],Du=Bu[8],ku=Bu[1],Fu=Bu[5],Nu=Bu[9],Gu=Bu[2],zu=Bu[6],Hu=Bu[10];if(Math.abs(Ou-ku)<Ru&&Math.abs(Du-Gu)<Ru&&Math.abs(Nu-zu)<Ru){if(Math.abs(Ou+ku)<Lu&&Math.abs(Du+Gu)<Lu&&Math.abs(Nu+zu)<Lu&&Math.abs(Vu+Fu+Hu-3)<Lu)return this.set(1,0,0,0),this;$u=Math.PI;var Uu=(Vu+1)/2,ju=(Fu+1)/2,Wu=(Hu+1)/2,Qu=(Ou+ku)/4,qu=(Du+Gu)/4,Yu=(Nu+zu)/4;return Uu>ju&&Uu>Wu?Uu<Ru?(Tu=0,Cu=.707106781,Pu=.707106781):(Tu=Math.sqrt(Uu),Cu=Qu/Tu,Pu=qu/Tu):ju>Wu?ju<Ru?(Tu=.707106781,Cu=0,Pu=.707106781):(Cu=Math.sqrt(ju),Tu=Qu/Cu,Pu=Yu/Cu):Wu<Ru?(Tu=.707106781,Cu=.707106781,Pu=0):(Pu=Math.sqrt(Wu),Tu=qu/Pu,Cu=Yu/Pu),this.set(Tu,Cu,Pu,$u),this}var Ju=Math.sqrt((zu-Nu)*(zu-Nu)+(Du-Gu)*(Du-Gu)+(ku-Ou)*(ku-Ou));return Math.abs(Ju)<.001&&(Ju=1),this.x=(zu-Nu)/Ju,this.y=(Du-Gu)/Ju,this.z=(ku-Ou)/Ju,this.w=Math.acos((Vu+Fu+Hu-1)/2),this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this.w=Math.min(this.w,_u.w),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this.w=Math.max(this.w,_u.w),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this.w=Math.max(_u.w,Math.min($u.w,this.w)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this.w=Math.max(_u,Math.min($u,this.w)),this},clampLength:function(_u,$u){var Tu=this.length();return this.divideScalar(Tu||1).multiplyScalar(Math.max(_u,Math.min($u,Tu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z+this.w*_u.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this.w+=(_u.w-this.w)*$u,this},lerpVectors:function(_u,$u,Tu){return this.x=_u.x+($u.x-_u.x)*Tu,this.y=_u.y+($u.y-_u.y)*Tu,this.z=_u.z+($u.z-_u.z)*Tu,this.w=_u.w+($u.w-_u.w)*Tu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z&&_u.w===this.w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this.w=_u[$u+3],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u[$u+3]=this.w,_u},fromBufferAttribute:function(_u,$u,Tu){return Tu!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this.w=_u.getW($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(_u,$u,Tu){this.width=_u,this.height=$u,this.scissor=new Vector4(0,0,_u,$u),this.scissorTest=!1,this.viewport=new Vector4(0,0,_u,$u),Tu=Tu||{},this.texture=new Texture(void 0,Tu.mapping,Tu.wrapS,Tu.wrapT,Tu.magFilter,Tu.minFilter,Tu.format,Tu.type,Tu.anisotropy,Tu.encoding),this.texture.image={},this.texture.image.width=_u,this.texture.image.height=$u,this.texture.generateMipmaps=Tu.generateMipmaps!==void 0?Tu.generateMipmaps:!1,this.texture.minFilter=Tu.minFilter!==void 0?Tu.minFilter:LinearFilter,this.depthBuffer=Tu.depthBuffer!==void 0?Tu.depthBuffer:!0,this.stencilBuffer=Tu.stencilBuffer!==void 0?Tu.stencilBuffer:!0,this.depthTexture=Tu.depthTexture!==void 0?Tu.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(_u,$u){(this.width!==_u||this.height!==$u)&&(this.width=_u,this.height=$u,this.texture.image.width=_u,this.texture.image.height=$u,this.dispose()),this.viewport.set(0,0,_u,$u),this.scissor.set(0,0,_u,$u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.width=_u.width,this.height=_u.height,this.viewport.copy(_u.viewport),this.texture=_u.texture.clone(),this.depthBuffer=_u.depthBuffer,this.stencilBuffer=_u.stencilBuffer,this.depthTexture=_u.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(_u,$u,Tu){WebGLRenderTarget.call(this,_u,$u,Tu),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(_u){return WebGLRenderTarget.prototype.copy.call(this,_u),this.samples=_u.samples,this}});function Quaternion(_u,$u,Tu,Cu){this._x=_u||0,this._y=$u||0,this._z=Tu||0,this._w=Cu!==void 0?Cu:1}Object.assign(Quaternion,{slerp:function(_u,$u,Tu,Cu){return Tu.copy(_u).slerp($u,Cu)},slerpFlat:function(_u,$u,Tu,Cu,Pu,Ru,Lu){var Bu=Tu[Cu+0],Vu=Tu[Cu+1],Ou=Tu[Cu+2],Du=Tu[Cu+3],ku=Pu[Ru+0],Fu=Pu[Ru+1],Nu=Pu[Ru+2],Gu=Pu[Ru+3];if(Du!==Gu||Bu!==ku||Vu!==Fu||Ou!==Nu){var zu=1-Lu,Hu=Bu*ku+Vu*Fu+Ou*Nu+Du*Gu,Uu=Hu>=0?1:-1,ju=1-Hu*Hu;if(ju>Number.EPSILON){var Wu=Math.sqrt(ju),Qu=Math.atan2(Wu,Hu*Uu);zu=Math.sin(zu*Qu)/Wu,Lu=Math.sin(Lu*Qu)/Wu}var qu=Lu*Uu;if(Bu=Bu*zu+ku*qu,Vu=Vu*zu+Fu*qu,Ou=Ou*zu+Nu*qu,Du=Du*zu+Gu*qu,zu===1-Lu){var Yu=1/Math.sqrt(Bu*Bu+Vu*Vu+Ou*Ou+Du*Du);Bu*=Yu,Vu*=Yu,Ou*=Yu,Du*=Yu}}_u[$u]=Bu,_u[$u+1]=Vu,_u[$u+2]=Ou,_u[$u+3]=Du},multiplyQuaternionsFlat:function(_u,$u,Tu,Cu,Pu,Ru){var Lu=Tu[Cu],Bu=Tu[Cu+1],Vu=Tu[Cu+2],Ou=Tu[Cu+3],Du=Pu[Ru],ku=Pu[Ru+1],Fu=Pu[Ru+2],Nu=Pu[Ru+3];return _u[$u]=Lu*Nu+Ou*Du+Bu*Fu-Vu*ku,_u[$u+1]=Bu*Nu+Ou*ku+Vu*Du-Lu*Fu,_u[$u+2]=Vu*Nu+Ou*Fu+Lu*ku-Bu*Du,_u[$u+3]=Ou*Nu-Lu*Du-Bu*ku-Vu*Fu,_u}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(_u){this._w=_u,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(_u,$u,Tu,Cu){return this._x=_u,this._y=$u,this._z=Tu,this._w=Cu,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(_u){return this._x=_u.x,this._y=_u.y,this._z=_u.z,this._w=_u.w,this._onChangeCallback(),this},setFromEuler:function(_u,$u){if(!(_u&&_u.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var Tu=_u._x,Cu=_u._y,Pu=_u._z,Ru=_u.order,Lu=Math.cos,Bu=Math.sin,Vu=Lu(Tu/2),Ou=Lu(Cu/2),Du=Lu(Pu/2),ku=Bu(Tu/2),Fu=Bu(Cu/2),Nu=Bu(Pu/2);switch(Ru){case"XYZ":this._x=ku*Ou*Du+Vu*Fu*Nu,this._y=Vu*Fu*Du-ku*Ou*Nu,this._z=Vu*Ou*Nu+ku*Fu*Du,this._w=Vu*Ou*Du-ku*Fu*Nu;break;case"YXZ":this._x=ku*Ou*Du+Vu*Fu*Nu,this._y=Vu*Fu*Du-ku*Ou*Nu,this._z=Vu*Ou*Nu-ku*Fu*Du,this._w=Vu*Ou*Du+ku*Fu*Nu;break;case"ZXY":this._x=ku*Ou*Du-Vu*Fu*Nu,this._y=Vu*Fu*Du+ku*Ou*Nu,this._z=Vu*Ou*Nu+ku*Fu*Du,this._w=Vu*Ou*Du-ku*Fu*Nu;break;case"ZYX":this._x=ku*Ou*Du-Vu*Fu*Nu,this._y=Vu*Fu*Du+ku*Ou*Nu,this._z=Vu*Ou*Nu-ku*Fu*Du,this._w=Vu*Ou*Du+ku*Fu*Nu;break;case"YZX":this._x=ku*Ou*Du+Vu*Fu*Nu,this._y=Vu*Fu*Du+ku*Ou*Nu,this._z=Vu*Ou*Nu-ku*Fu*Du,this._w=Vu*Ou*Du-ku*Fu*Nu;break;case"XZY":this._x=ku*Ou*Du-Vu*Fu*Nu,this._y=Vu*Fu*Du-ku*Ou*Nu,this._z=Vu*Ou*Nu+ku*Fu*Du,this._w=Vu*Ou*Du+ku*Fu*Nu;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ru)}return $u!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(_u,$u){var Tu=$u/2,Cu=Math.sin(Tu);return this._x=_u.x*Cu,this._y=_u.y*Cu,this._z=_u.z*Cu,this._w=Math.cos(Tu),this._onChangeCallback(),this},setFromRotationMatrix:function(_u){var $u=_u.elements,Tu=$u[0],Cu=$u[4],Pu=$u[8],Ru=$u[1],Lu=$u[5],Bu=$u[9],Vu=$u[2],Ou=$u[6],Du=$u[10],ku=Tu+Lu+Du,Fu;return ku>0?(Fu=.5/Math.sqrt(ku+1),this._w=.25/Fu,this._x=(Ou-Bu)*Fu,this._y=(Pu-Vu)*Fu,this._z=(Ru-Cu)*Fu):Tu>Lu&&Tu>Du?(Fu=2*Math.sqrt(1+Tu-Lu-Du),this._w=(Ou-Bu)/Fu,this._x=.25*Fu,this._y=(Cu+Ru)/Fu,this._z=(Pu+Vu)/Fu):Lu>Du?(Fu=2*Math.sqrt(1+Lu-Tu-Du),this._w=(Pu-Vu)/Fu,this._x=(Cu+Ru)/Fu,this._y=.25*Fu,this._z=(Bu+Ou)/Fu):(Fu=2*Math.sqrt(1+Du-Tu-Lu),this._w=(Ru-Cu)/Fu,this._x=(Pu+Vu)/Fu,this._y=(Bu+Ou)/Fu,this._z=.25*Fu),this._onChangeCallback(),this},setFromUnitVectors:function(_u,$u){var Tu=1e-6,Cu=_u.dot($u)+1;return Cu<Tu?(Cu=0,Math.abs(_u.x)>Math.abs(_u.z)?(this._x=-_u.y,this._y=_u.x,this._z=0,this._w=Cu):(this._x=0,this._y=-_u.z,this._z=_u.y,this._w=Cu)):(this._x=_u.y*$u.z-_u.z*$u.y,this._y=_u.z*$u.x-_u.x*$u.z,this._z=_u.x*$u.y-_u.y*$u.x,this._w=Cu),this.normalize()},angleTo:function(_u){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(_u),-1,1)))},rotateTowards:function(_u,$u){var Tu=this.angleTo(_u);if(Tu===0)return this;var Cu=Math.min(1,$u/Tu);return this.slerp(_u,Cu),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(_u){return this._x*_u._x+this._y*_u._y+this._z*_u._z+this._w*_u._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var _u=this.length();return _u===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_u=1/_u,this._x=this._x*_u,this._y=this._y*_u,this._z=this._z*_u,this._w=this._w*_u),this._onChangeCallback(),this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(_u,$u)):this.multiplyQuaternions(this,_u)},premultiply:function(_u){return this.multiplyQuaternions(_u,this)},multiplyQuaternions:function(_u,$u){var Tu=_u._x,Cu=_u._y,Pu=_u._z,Ru=_u._w,Lu=$u._x,Bu=$u._y,Vu=$u._z,Ou=$u._w;return this._x=Tu*Ou+Ru*Lu+Cu*Vu-Pu*Bu,this._y=Cu*Ou+Ru*Bu+Pu*Lu-Tu*Vu,this._z=Pu*Ou+Ru*Vu+Tu*Bu-Cu*Lu,this._w=Ru*Ou-Tu*Lu-Cu*Bu-Pu*Vu,this._onChangeCallback(),this},slerp:function(_u,$u){if($u===0)return this;if($u===1)return this.copy(_u);var Tu=this._x,Cu=this._y,Pu=this._z,Ru=this._w,Lu=Ru*_u._w+Tu*_u._x+Cu*_u._y+Pu*_u._z;if(Lu<0?(this._w=-_u._w,this._x=-_u._x,this._y=-_u._y,this._z=-_u._z,Lu=-Lu):this.copy(_u),Lu>=1)return this._w=Ru,this._x=Tu,this._y=Cu,this._z=Pu,this;var Bu=1-Lu*Lu;if(Bu<=Number.EPSILON){var Vu=1-$u;return this._w=Vu*Ru+$u*this._w,this._x=Vu*Tu+$u*this._x,this._y=Vu*Cu+$u*this._y,this._z=Vu*Pu+$u*this._z,this.normalize(),this._onChangeCallback(),this}var Ou=Math.sqrt(Bu),Du=Math.atan2(Ou,Lu),ku=Math.sin((1-$u)*Du)/Ou,Fu=Math.sin($u*Du)/Ou;return this._w=Ru*ku+this._w*Fu,this._x=Tu*ku+this._x*Fu,this._y=Cu*ku+this._y*Fu,this._z=Pu*ku+this._z*Fu,this._onChangeCallback(),this},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._w===this._w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this._x=_u[$u],this._y=_u[$u+1],this._z=_u[$u+2],this._w=_u[$u+3],this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._w,_u},fromBufferAttribute:function(_u,$u){return this._x=_u.getX($u),this._y=_u.getY($u),this._z=_u.getZ($u),this._w=_u.getW($u),this},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(_u,$u,Tu){this.x=_u||0,this.y=$u||0,this.z=Tu||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(_u,$u,Tu){return this.x=_u,this.y=$u,this.z=Tu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(_u,$u)):(this.x*=_u.x,this.y*=_u.y,this.z*=_u.z,this)},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this},multiplyVectors:function(_u,$u){return this.x=_u.x*$u.x,this.y=_u.y*$u.y,this.z=_u.z*$u.z,this},applyEuler:function(_u){return _u&&_u.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(_u))},applyAxisAngle:function(_u,$u){return this.applyQuaternion(_quaternion.setFromAxisAngle(_u,$u))},applyMatrix3:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.elements;return this.x=Pu[0]*$u+Pu[3]*Tu+Pu[6]*Cu,this.y=Pu[1]*$u+Pu[4]*Tu+Pu[7]*Cu,this.z=Pu[2]*$u+Pu[5]*Tu+Pu[8]*Cu,this},applyNormalMatrix:function(_u){return this.applyMatrix3(_u).normalize()},applyMatrix4:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.elements,Ru=1/(Pu[3]*$u+Pu[7]*Tu+Pu[11]*Cu+Pu[15]);return this.x=(Pu[0]*$u+Pu[4]*Tu+Pu[8]*Cu+Pu[12])*Ru,this.y=(Pu[1]*$u+Pu[5]*Tu+Pu[9]*Cu+Pu[13])*Ru,this.z=(Pu[2]*$u+Pu[6]*Tu+Pu[10]*Cu+Pu[14])*Ru,this},applyQuaternion:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.x,Ru=_u.y,Lu=_u.z,Bu=_u.w,Vu=Bu*$u+Ru*Cu-Lu*Tu,Ou=Bu*Tu+Lu*$u-Pu*Cu,Du=Bu*Cu+Pu*Tu-Ru*$u,ku=-Pu*$u-Ru*Tu-Lu*Cu;return this.x=Vu*Bu+ku*-Pu+Ou*-Lu-Du*-Ru,this.y=Ou*Bu+ku*-Ru+Du*-Pu-Vu*-Lu,this.z=Du*Bu+ku*-Lu+Vu*-Ru-Ou*-Pu,this},project:function(_u){return this.applyMatrix4(_u.matrixWorldInverse).applyMatrix4(_u.projectionMatrix)},unproject:function(_u){return this.applyMatrix4(_u.projectionMatrixInverse).applyMatrix4(_u.matrixWorld)},transformDirection:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.elements;return this.x=Pu[0]*$u+Pu[4]*Tu+Pu[8]*Cu,this.y=Pu[1]*$u+Pu[5]*Tu+Pu[9]*Cu,this.z=Pu[2]*$u+Pu[6]*Tu+Pu[10]*Cu,this.normalize()},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this.z/=_u.z,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this},clampLength:function(_u,$u){var Tu=this.length();return this.divideScalar(Tu||1).multiplyScalar(Math.max(_u,Math.min($u,Tu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this},lerpVectors:function(_u,$u,Tu){return this.x=_u.x+($u.x-_u.x)*Tu,this.y=_u.y+($u.y-_u.y)*Tu,this.z=_u.z+($u.z-_u.z)*Tu,this},cross:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(_u,$u)):this.crossVectors(this,_u)},crossVectors:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z,Ru=$u.x,Lu=$u.y,Bu=$u.z;return this.x=Cu*Bu-Pu*Lu,this.y=Pu*Ru-Tu*Bu,this.z=Tu*Lu-Cu*Ru,this},projectOnVector:function(_u){var $u=_u.lengthSq();if($u===0)return this.set(0,0,0);var Tu=_u.dot(this)/$u;return this.copy(_u).multiplyScalar(Tu)},projectOnPlane:function(_u){return _vector.copy(this).projectOnVector(_u),this.sub(_vector)},reflect:function(_u){return this.sub(_vector.copy(_u).multiplyScalar(2*this.dot(_u)))},angleTo:function(_u){var $u=Math.sqrt(this.lengthSq()*_u.lengthSq());if($u===0)return Math.PI/2;var Tu=this.dot(_u)/$u;return Math.acos(MathUtils.clamp(Tu,-1,1))},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Tu=this.y-_u.y,Cu=this.z-_u.z;return $u*$u+Tu*Tu+Cu*Cu},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)+Math.abs(this.z-_u.z)},setFromSpherical:function(_u){return this.setFromSphericalCoords(_u.radius,_u.phi,_u.theta)},setFromSphericalCoords:function(_u,$u,Tu){var Cu=Math.sin($u)*_u;return this.x=Cu*Math.sin(Tu),this.y=Math.cos($u)*_u,this.z=Cu*Math.cos(Tu),this},setFromCylindrical:function(_u){return this.setFromCylindricalCoords(_u.radius,_u.theta,_u.y)},setFromCylindricalCoords:function(_u,$u,Tu){return this.x=_u*Math.sin($u),this.y=Tu,this.z=_u*Math.cos($u),this},setFromMatrixPosition:function(_u){var $u=_u.elements;return this.x=$u[12],this.y=$u[13],this.z=$u[14],this},setFromMatrixScale:function(_u){var $u=this.setFromMatrixColumn(_u,0).length(),Tu=this.setFromMatrixColumn(_u,1).length(),Cu=this.setFromMatrixColumn(_u,2).length();return this.x=$u,this.y=Tu,this.z=Cu,this},setFromMatrixColumn:function(_u,$u){return this.fromArray(_u.elements,$u*4)},setFromMatrix3Column:function(_u,$u){return this.fromArray(_u.elements,$u*3)},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u},fromBufferAttribute:function(_u,$u,Tu){return Tu!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu){var Hu=this.elements;return Hu[0]=_u,Hu[4]=$u,Hu[8]=Tu,Hu[12]=Cu,Hu[1]=Pu,Hu[5]=Ru,Hu[9]=Lu,Hu[13]=Bu,Hu[2]=Vu,Hu[6]=Ou,Hu[10]=Du,Hu[14]=ku,Hu[3]=Fu,Hu[7]=Nu,Hu[11]=Gu,Hu[15]=zu,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Tu=_u.elements;return $u[0]=Tu[0],$u[1]=Tu[1],$u[2]=Tu[2],$u[3]=Tu[3],$u[4]=Tu[4],$u[5]=Tu[5],$u[6]=Tu[6],$u[7]=Tu[7],$u[8]=Tu[8],$u[9]=Tu[9],$u[10]=Tu[10],$u[11]=Tu[11],$u[12]=Tu[12],$u[13]=Tu[13],$u[14]=Tu[14],$u[15]=Tu[15],this},copyPosition:function(_u){var $u=this.elements,Tu=_u.elements;return $u[12]=Tu[12],$u[13]=Tu[13],$u[14]=Tu[14],this},extractBasis:function(_u,$u,Tu){return _u.setFromMatrixColumn(this,0),$u.setFromMatrixColumn(this,1),Tu.setFromMatrixColumn(this,2),this},makeBasis:function(_u,$u,Tu){return this.set(_u.x,$u.x,Tu.x,0,_u.y,$u.y,Tu.y,0,_u.z,$u.z,Tu.z,0,0,0,0,1),this},extractRotation:function(_u){var $u=this.elements,Tu=_u.elements,Cu=1/_v1.setFromMatrixColumn(_u,0).length(),Pu=1/_v1.setFromMatrixColumn(_u,1).length(),Ru=1/_v1.setFromMatrixColumn(_u,2).length();return $u[0]=Tu[0]*Cu,$u[1]=Tu[1]*Cu,$u[2]=Tu[2]*Cu,$u[3]=0,$u[4]=Tu[4]*Pu,$u[5]=Tu[5]*Pu,$u[6]=Tu[6]*Pu,$u[7]=0,$u[8]=Tu[8]*Ru,$u[9]=Tu[9]*Ru,$u[10]=Tu[10]*Ru,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromEuler:function(_u){_u&&_u.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var $u=this.elements,Tu=_u.x,Cu=_u.y,Pu=_u.z,Ru=Math.cos(Tu),Lu=Math.sin(Tu),Bu=Math.cos(Cu),Vu=Math.sin(Cu),Ou=Math.cos(Pu),Du=Math.sin(Pu);if(_u.order==="XYZ"){var ku=Ru*Ou,Fu=Ru*Du,Nu=Lu*Ou,Gu=Lu*Du;$u[0]=Bu*Ou,$u[4]=-Bu*Du,$u[8]=Vu,$u[1]=Fu+Nu*Vu,$u[5]=ku-Gu*Vu,$u[9]=-Lu*Bu,$u[2]=Gu-ku*Vu,$u[6]=Nu+Fu*Vu,$u[10]=Ru*Bu}else if(_u.order==="YXZ"){var zu=Bu*Ou,Hu=Bu*Du,Uu=Vu*Ou,ju=Vu*Du;$u[0]=zu+ju*Lu,$u[4]=Uu*Lu-Hu,$u[8]=Ru*Vu,$u[1]=Ru*Du,$u[5]=Ru*Ou,$u[9]=-Lu,$u[2]=Hu*Lu-Uu,$u[6]=ju+zu*Lu,$u[10]=Ru*Bu}else if(_u.order==="ZXY"){var zu=Bu*Ou,Hu=Bu*Du,Uu=Vu*Ou,ju=Vu*Du;$u[0]=zu-ju*Lu,$u[4]=-Ru*Du,$u[8]=Uu+Hu*Lu,$u[1]=Hu+Uu*Lu,$u[5]=Ru*Ou,$u[9]=ju-zu*Lu,$u[2]=-Ru*Vu,$u[6]=Lu,$u[10]=Ru*Bu}else if(_u.order==="ZYX"){var ku=Ru*Ou,Fu=Ru*Du,Nu=Lu*Ou,Gu=Lu*Du;$u[0]=Bu*Ou,$u[4]=Nu*Vu-Fu,$u[8]=ku*Vu+Gu,$u[1]=Bu*Du,$u[5]=Gu*Vu+ku,$u[9]=Fu*Vu-Nu,$u[2]=-Vu,$u[6]=Lu*Bu,$u[10]=Ru*Bu}else if(_u.order==="YZX"){var Wu=Ru*Bu,Qu=Ru*Vu,qu=Lu*Bu,Yu=Lu*Vu;$u[0]=Bu*Ou,$u[4]=Yu-Wu*Du,$u[8]=qu*Du+Qu,$u[1]=Du,$u[5]=Ru*Ou,$u[9]=-Lu*Ou,$u[2]=-Vu*Ou,$u[6]=Qu*Du+qu,$u[10]=Wu-Yu*Du}else if(_u.order==="XZY"){var Wu=Ru*Bu,Qu=Ru*Vu,qu=Lu*Bu,Yu=Lu*Vu;$u[0]=Bu*Ou,$u[4]=-Du,$u[8]=Vu*Ou,$u[1]=Wu*Du+Yu,$u[5]=Ru*Ou,$u[9]=Qu*Du-qu,$u[2]=qu*Du-Qu,$u[6]=Lu*Ou,$u[10]=Yu*Du+Wu}return $u[3]=0,$u[7]=0,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromQuaternion:function(_u){return this.compose(_zero,_u,_one)},lookAt:function(_u,$u,Tu){var Cu=this.elements;return _z.subVectors(_u,$u),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Tu,_z),_x.lengthSq()===0&&(Math.abs(Tu.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Tu,_z)),_x.normalize(),_y.crossVectors(_z,_x),Cu[0]=_x.x,Cu[4]=_y.x,Cu[8]=_z.x,Cu[1]=_x.y,Cu[5]=_y.y,Cu[9]=_z.y,Cu[2]=_x.z,Cu[6]=_y.z,Cu[10]=_z.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(_u,$u)):this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Tu=_u.elements,Cu=$u.elements,Pu=this.elements,Ru=Tu[0],Lu=Tu[4],Bu=Tu[8],Vu=Tu[12],Ou=Tu[1],Du=Tu[5],ku=Tu[9],Fu=Tu[13],Nu=Tu[2],Gu=Tu[6],zu=Tu[10],Hu=Tu[14],Uu=Tu[3],ju=Tu[7],Wu=Tu[11],Qu=Tu[15],qu=Cu[0],Yu=Cu[4],Ju=Cu[8],_d=Cu[12],tp=Cu[1],Ku=Cu[5],Xu=Cu[9],Zu=Cu[13],_c=Cu[2],Xc=Cu[6],_h=Cu[10],ip=Cu[14],ap=Cu[3],hp=Cu[7],Ap=Cu[11],gp=Cu[15];return Pu[0]=Ru*qu+Lu*tp+Bu*_c+Vu*ap,Pu[4]=Ru*Yu+Lu*Ku+Bu*Xc+Vu*hp,Pu[8]=Ru*Ju+Lu*Xu+Bu*_h+Vu*Ap,Pu[12]=Ru*_d+Lu*Zu+Bu*ip+Vu*gp,Pu[1]=Ou*qu+Du*tp+ku*_c+Fu*ap,Pu[5]=Ou*Yu+Du*Ku+ku*Xc+Fu*hp,Pu[9]=Ou*Ju+Du*Xu+ku*_h+Fu*Ap,Pu[13]=Ou*_d+Du*Zu+ku*ip+Fu*gp,Pu[2]=Nu*qu+Gu*tp+zu*_c+Hu*ap,Pu[6]=Nu*Yu+Gu*Ku+zu*Xc+Hu*hp,Pu[10]=Nu*Ju+Gu*Xu+zu*_h+Hu*Ap,Pu[14]=Nu*_d+Gu*Zu+zu*ip+Hu*gp,Pu[3]=Uu*qu+ju*tp+Wu*_c+Qu*ap,Pu[7]=Uu*Yu+ju*Ku+Wu*Xc+Qu*hp,Pu[11]=Uu*Ju+ju*Xu+Wu*_h+Qu*Ap,Pu[15]=Uu*_d+ju*Zu+Wu*ip+Qu*gp,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[4]*=_u,$u[8]*=_u,$u[12]*=_u,$u[1]*=_u,$u[5]*=_u,$u[9]*=_u,$u[13]*=_u,$u[2]*=_u,$u[6]*=_u,$u[10]*=_u,$u[14]*=_u,$u[3]*=_u,$u[7]*=_u,$u[11]*=_u,$u[15]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Tu=_u[4],Cu=_u[8],Pu=_u[12],Ru=_u[1],Lu=_u[5],Bu=_u[9],Vu=_u[13],Ou=_u[2],Du=_u[6],ku=_u[10],Fu=_u[14],Nu=_u[3],Gu=_u[7],zu=_u[11],Hu=_u[15];return Nu*(+Pu*Bu*Du-Cu*Vu*Du-Pu*Lu*ku+Tu*Vu*ku+Cu*Lu*Fu-Tu*Bu*Fu)+Gu*(+$u*Bu*Fu-$u*Vu*ku+Pu*Ru*ku-Cu*Ru*Fu+Cu*Vu*Ou-Pu*Bu*Ou)+zu*(+$u*Vu*Du-$u*Lu*Fu-Pu*Ru*Du+Tu*Ru*Fu+Pu*Lu*Ou-Tu*Vu*Ou)+Hu*(-Cu*Lu*Ou-$u*Bu*Du+$u*Lu*ku+Cu*Ru*Du-Tu*Ru*ku+Tu*Bu*Ou)},transpose:function(){var _u=this.elements,$u;return $u=_u[1],_u[1]=_u[4],_u[4]=$u,$u=_u[2],_u[2]=_u[8],_u[8]=$u,$u=_u[6],_u[6]=_u[9],_u[9]=$u,$u=_u[3],_u[3]=_u[12],_u[12]=$u,$u=_u[7],_u[7]=_u[13],_u[13]=$u,$u=_u[11],_u[11]=_u[14],_u[14]=$u,this},setPosition:function(_u,$u,Tu){var Cu=this.elements;return _u.isVector3?(Cu[12]=_u.x,Cu[13]=_u.y,Cu[14]=_u.z):(Cu[12]=_u,Cu[13]=$u,Cu[14]=Tu),this},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var Tu=this.elements,Cu=_u.elements,Pu=Cu[0],Ru=Cu[1],Lu=Cu[2],Bu=Cu[3],Vu=Cu[4],Ou=Cu[5],Du=Cu[6],ku=Cu[7],Fu=Cu[8],Nu=Cu[9],Gu=Cu[10],zu=Cu[11],Hu=Cu[12],Uu=Cu[13],ju=Cu[14],Wu=Cu[15],Qu=Nu*ju*ku-Uu*Gu*ku+Uu*Du*zu-Ou*ju*zu-Nu*Du*Wu+Ou*Gu*Wu,qu=Hu*Gu*ku-Fu*ju*ku-Hu*Du*zu+Vu*ju*zu+Fu*Du*Wu-Vu*Gu*Wu,Yu=Fu*Uu*ku-Hu*Nu*ku+Hu*Ou*zu-Vu*Uu*zu-Fu*Ou*Wu+Vu*Nu*Wu,Ju=Hu*Nu*Du-Fu*Uu*Du-Hu*Ou*Gu+Vu*Uu*Gu+Fu*Ou*ju-Vu*Nu*ju,_d=Pu*Qu+Ru*qu+Lu*Yu+Bu*Ju;if(_d===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var tp=1/_d;return Tu[0]=Qu*tp,Tu[1]=(Uu*Gu*Bu-Nu*ju*Bu-Uu*Lu*zu+Ru*ju*zu+Nu*Lu*Wu-Ru*Gu*Wu)*tp,Tu[2]=(Ou*ju*Bu-Uu*Du*Bu+Uu*Lu*ku-Ru*ju*ku-Ou*Lu*Wu+Ru*Du*Wu)*tp,Tu[3]=(Nu*Du*Bu-Ou*Gu*Bu-Nu*Lu*ku+Ru*Gu*ku+Ou*Lu*zu-Ru*Du*zu)*tp,Tu[4]=qu*tp,Tu[5]=(Fu*ju*Bu-Hu*Gu*Bu+Hu*Lu*zu-Pu*ju*zu-Fu*Lu*Wu+Pu*Gu*Wu)*tp,Tu[6]=(Hu*Du*Bu-Vu*ju*Bu-Hu*Lu*ku+Pu*ju*ku+Vu*Lu*Wu-Pu*Du*Wu)*tp,Tu[7]=(Vu*Gu*Bu-Fu*Du*Bu+Fu*Lu*ku-Pu*Gu*ku-Vu*Lu*zu+Pu*Du*zu)*tp,Tu[8]=Yu*tp,Tu[9]=(Hu*Nu*Bu-Fu*Uu*Bu-Hu*Ru*zu+Pu*Uu*zu+Fu*Ru*Wu-Pu*Nu*Wu)*tp,Tu[10]=(Vu*Uu*Bu-Hu*Ou*Bu+Hu*Ru*ku-Pu*Uu*ku-Vu*Ru*Wu+Pu*Ou*Wu)*tp,Tu[11]=(Fu*Ou*Bu-Vu*Nu*Bu-Fu*Ru*ku+Pu*Nu*ku+Vu*Ru*zu-Pu*Ou*zu)*tp,Tu[12]=Ju*tp,Tu[13]=(Fu*Uu*Lu-Hu*Nu*Lu+Hu*Ru*Gu-Pu*Uu*Gu-Fu*Ru*ju+Pu*Nu*ju)*tp,Tu[14]=(Hu*Ou*Lu-Vu*Uu*Lu-Hu*Ru*Du+Pu*Uu*Du+Vu*Ru*ju-Pu*Ou*ju)*tp,Tu[15]=(Vu*Nu*Lu-Fu*Ou*Lu+Fu*Ru*Du-Pu*Nu*Du-Vu*Ru*Gu+Pu*Ou*Gu)*tp,this},scale:function(_u){var $u=this.elements,Tu=_u.x,Cu=_u.y,Pu=_u.z;return $u[0]*=Tu,$u[4]*=Cu,$u[8]*=Pu,$u[1]*=Tu,$u[5]*=Cu,$u[9]*=Pu,$u[2]*=Tu,$u[6]*=Cu,$u[10]*=Pu,$u[3]*=Tu,$u[7]*=Cu,$u[11]*=Pu,this},getMaxScaleOnAxis:function(){var _u=this.elements,$u=_u[0]*_u[0]+_u[1]*_u[1]+_u[2]*_u[2],Tu=_u[4]*_u[4]+_u[5]*_u[5]+_u[6]*_u[6],Cu=_u[8]*_u[8]+_u[9]*_u[9]+_u[10]*_u[10];return Math.sqrt(Math.max($u,Tu,Cu))},makeTranslation:function(_u,$u,Tu){return this.set(1,0,0,_u,0,1,0,$u,0,0,1,Tu,0,0,0,1),this},makeRotationX:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u);return this.set(1,0,0,0,0,$u,-Tu,0,0,Tu,$u,0,0,0,0,1),this},makeRotationY:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u);return this.set($u,0,Tu,0,0,1,0,0,-Tu,0,$u,0,0,0,0,1),this},makeRotationZ:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u);return this.set($u,-Tu,0,0,Tu,$u,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(_u,$u){var Tu=Math.cos($u),Cu=Math.sin($u),Pu=1-Tu,Ru=_u.x,Lu=_u.y,Bu=_u.z,Vu=Pu*Ru,Ou=Pu*Lu;return this.set(Vu*Ru+Tu,Vu*Lu-Cu*Bu,Vu*Bu+Cu*Lu,0,Vu*Lu+Cu*Bu,Ou*Lu+Tu,Ou*Bu-Cu*Ru,0,Vu*Bu-Cu*Lu,Ou*Bu+Cu*Ru,Pu*Bu*Bu+Tu,0,0,0,0,1),this},makeScale:function(_u,$u,Tu){return this.set(_u,0,0,0,0,$u,0,0,0,0,Tu,0,0,0,0,1),this},makeShear:function(_u,$u,Tu){return this.set(1,$u,Tu,0,_u,1,Tu,0,_u,$u,1,0,0,0,0,1),this},compose:function(_u,$u,Tu){var Cu=this.elements,Pu=$u._x,Ru=$u._y,Lu=$u._z,Bu=$u._w,Vu=Pu+Pu,Ou=Ru+Ru,Du=Lu+Lu,ku=Pu*Vu,Fu=Pu*Ou,Nu=Pu*Du,Gu=Ru*Ou,zu=Ru*Du,Hu=Lu*Du,Uu=Bu*Vu,ju=Bu*Ou,Wu=Bu*Du,Qu=Tu.x,qu=Tu.y,Yu=Tu.z;return Cu[0]=(1-(Gu+Hu))*Qu,Cu[1]=(Fu+Wu)*Qu,Cu[2]=(Nu-ju)*Qu,Cu[3]=0,Cu[4]=(Fu-Wu)*qu,Cu[5]=(1-(ku+Hu))*qu,Cu[6]=(zu+Uu)*qu,Cu[7]=0,Cu[8]=(Nu+ju)*Yu,Cu[9]=(zu-Uu)*Yu,Cu[10]=(1-(ku+Gu))*Yu,Cu[11]=0,Cu[12]=_u.x,Cu[13]=_u.y,Cu[14]=_u.z,Cu[15]=1,this},decompose:function(_u,$u,Tu){var Cu=this.elements,Pu=_v1.set(Cu[0],Cu[1],Cu[2]).length(),Ru=_v1.set(Cu[4],Cu[5],Cu[6]).length(),Lu=_v1.set(Cu[8],Cu[9],Cu[10]).length(),Bu=this.determinant();Bu<0&&(Pu=-Pu),_u.x=Cu[12],_u.y=Cu[13],_u.z=Cu[14],_m1.copy(this);var Vu=1/Pu,Ou=1/Ru,Du=1/Lu;return _m1.elements[0]*=Vu,_m1.elements[1]*=Vu,_m1.elements[2]*=Vu,_m1.elements[4]*=Ou,_m1.elements[5]*=Ou,_m1.elements[6]*=Ou,_m1.elements[8]*=Du,_m1.elements[9]*=Du,_m1.elements[10]*=Du,$u.setFromRotationMatrix(_m1),Tu.x=Pu,Tu.y=Ru,Tu.z=Lu,this},makePerspective:function(_u,$u,Tu,Cu,Pu,Ru){Ru===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Lu=this.elements,Bu=2*Pu/($u-_u),Vu=2*Pu/(Tu-Cu),Ou=($u+_u)/($u-_u),Du=(Tu+Cu)/(Tu-Cu),ku=-(Ru+Pu)/(Ru-Pu),Fu=-2*Ru*Pu/(Ru-Pu);return Lu[0]=Bu,Lu[4]=0,Lu[8]=Ou,Lu[12]=0,Lu[1]=0,Lu[5]=Vu,Lu[9]=Du,Lu[13]=0,Lu[2]=0,Lu[6]=0,Lu[10]=ku,Lu[14]=Fu,Lu[3]=0,Lu[7]=0,Lu[11]=-1,Lu[15]=0,this},makeOrthographic:function(_u,$u,Tu,Cu,Pu,Ru){var Lu=this.elements,Bu=1/($u-_u),Vu=1/(Tu-Cu),Ou=1/(Ru-Pu),Du=($u+_u)*Bu,ku=(Tu+Cu)*Vu,Fu=(Ru+Pu)*Ou;return Lu[0]=2*Bu,Lu[4]=0,Lu[8]=0,Lu[12]=-Du,Lu[1]=0,Lu[5]=2*Vu,Lu[9]=0,Lu[13]=-ku,Lu[2]=0,Lu[6]=0,Lu[10]=-2*Ou,Lu[14]=-Fu,Lu[3]=0,Lu[7]=0,Lu[11]=0,Lu[15]=1,this},equals:function(_u){for(var $u=this.elements,Tu=_u.elements,Cu=0;Cu<16;Cu++)if($u[Cu]!==Tu[Cu])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Tu=0;Tu<16;Tu++)this.elements[Tu]=_u[Tu+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Tu=this.elements;return _u[$u]=Tu[0],_u[$u+1]=Tu[1],_u[$u+2]=Tu[2],_u[$u+3]=Tu[3],_u[$u+4]=Tu[4],_u[$u+5]=Tu[5],_u[$u+6]=Tu[6],_u[$u+7]=Tu[7],_u[$u+8]=Tu[8],_u[$u+9]=Tu[9],_u[$u+10]=Tu[10],_u[$u+11]=Tu[11],_u[$u+12]=Tu[12],_u[$u+13]=Tu[13],_u[$u+14]=Tu[14],_u[$u+15]=Tu[15],_u}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(_u,$u,Tu,Cu){this._x=_u||0,this._y=$u||0,this._z=Tu||0,this._order=Cu||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(_u){this._order=_u,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(_u,$u,Tu,Cu){return this._x=_u,this._y=$u,this._z=Tu,this._order=Cu||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(_u){return this._x=_u._x,this._y=_u._y,this._z=_u._z,this._order=_u._order,this._onChangeCallback(),this},setFromRotationMatrix:function(_u,$u,Tu){var Cu=MathUtils.clamp,Pu=_u.elements,Ru=Pu[0],Lu=Pu[4],Bu=Pu[8],Vu=Pu[1],Ou=Pu[5],Du=Pu[9],ku=Pu[2],Fu=Pu[6],Nu=Pu[10];switch($u=$u||this._order,$u){case"XYZ":this._y=Math.asin(Cu(Bu,-1,1)),Math.abs(Bu)<.9999999?(this._x=Math.atan2(-Du,Nu),this._z=Math.atan2(-Lu,Ru)):(this._x=Math.atan2(Fu,Ou),this._z=0);break;case"YXZ":this._x=Math.asin(-Cu(Du,-1,1)),Math.abs(Du)<.9999999?(this._y=Math.atan2(Bu,Nu),this._z=Math.atan2(Vu,Ou)):(this._y=Math.atan2(-ku,Ru),this._z=0);break;case"ZXY":this._x=Math.asin(Cu(Fu,-1,1)),Math.abs(Fu)<.9999999?(this._y=Math.atan2(-ku,Nu),this._z=Math.atan2(-Lu,Ou)):(this._y=0,this._z=Math.atan2(Vu,Ru));break;case"ZYX":this._y=Math.asin(-Cu(ku,-1,1)),Math.abs(ku)<.9999999?(this._x=Math.atan2(Fu,Nu),this._z=Math.atan2(Vu,Ru)):(this._x=0,this._z=Math.atan2(-Lu,Ou));break;case"YZX":this._z=Math.asin(Cu(Vu,-1,1)),Math.abs(Vu)<.9999999?(this._x=Math.atan2(-Du,Ou),this._y=Math.atan2(-ku,Ru)):(this._x=0,this._y=Math.atan2(Bu,Nu));break;case"XZY":this._z=Math.asin(-Cu(Lu,-1,1)),Math.abs(Lu)<.9999999?(this._x=Math.atan2(Fu,Ou),this._y=Math.atan2(Bu,Ru)):(this._x=Math.atan2(-Du,Nu),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+$u)}return this._order=$u,Tu!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(_u,$u,Tu){return _matrix.makeRotationFromQuaternion(_u),this.setFromRotationMatrix(_matrix,$u,Tu)},setFromVector3:function(_u,$u){return this.set(_u.x,_u.y,_u.z,$u||this._order)},reorder:function(_u){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,_u)},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._order===this._order},fromArray:function(_u){return this._x=_u[0],this._y=_u[1],this._z=_u[2],_u[3]!==void 0&&(this._order=_u[3]),this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._order,_u},toVector3:function(_u){return _u?_u.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(_u){this.mask=1<<_u|0},enable:function(_u){this.mask|=1<<_u|0},enableAll:function(){this.mask=-1},toggle:function(_u){this.mask^=1<<_u|0},disable:function(_u){this.mask&=~(1<<_u|0)},disableAll:function(){this.mask=0},test:function(_u){return(this.mask&_u.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var _u=new Vector3,$u=new Euler,Tu=new Quaternion,Cu=new Vector3(1,1,1);function Pu(){Tu.setFromEuler($u,!1)}function Ru(){$u.setFromQuaternion(Tu,void 0,!1)}$u._onChange(Pu),Tu._onChange(Ru),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_u},rotation:{configurable:!0,enumerable:!0,value:$u},quaternion:{configurable:!0,enumerable:!0,value:Tu},scale:{configurable:!0,enumerable:!0,value:Cu},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_u),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(_u){return this.quaternion.premultiply(_u),this},setRotationFromAxisAngle:function(_u,$u){this.quaternion.setFromAxisAngle(_u,$u)},setRotationFromEuler:function(_u){this.quaternion.setFromEuler(_u,!0)},setRotationFromMatrix:function(_u){this.quaternion.setFromRotationMatrix(_u)},setRotationFromQuaternion:function(_u){this.quaternion.copy(_u)},rotateOnAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.premultiply(_q1),this},rotateX:function(_u){return this.rotateOnAxis(_xAxis,_u)},rotateY:function(_u){return this.rotateOnAxis(_yAxis,_u)},rotateZ:function(_u){return this.rotateOnAxis(_zAxis,_u)},translateOnAxis:function(_u,$u){return _v1$1.copy(_u).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar($u)),this},translateX:function(_u){return this.translateOnAxis(_xAxis,_u)},translateY:function(_u){return this.translateOnAxis(_yAxis,_u)},translateZ:function(_u){return this.translateOnAxis(_zAxis,_u)},localToWorld:function(_u){return _u.applyMatrix4(this.matrixWorld)},worldToLocal:function(_u){return _u.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(_u,$u,Tu){_u.isVector3?_target.copy(_u):_target.set(_u,$u,Tu);var Cu=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Cu&&(_m1$1.extractRotation(Cu.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.add(arguments[$u]);return this}return _u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_u),this):(_u&&_u.isObject3D?(_u.parent!==null&&_u.parent.remove(_u),_u.parent=this,this.children.push(_u),_u.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_u),this)},remove:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.remove(arguments[$u]);return this}var Tu=this.children.indexOf(_u);return Tu!==-1&&(_u.parent=null,this.children.splice(Tu,1),_u.dispatchEvent(_removedEvent)),this},attach:function(_u){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),_u.parent!==null&&(_u.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_u.parent.matrixWorld)),_u.applyMatrix4(_m1$1),_u.updateWorldMatrix(!1,!1),this.add(_u),this},getObjectById:function(_u){return this.getObjectByProperty("id",_u)},getObjectByName:function(_u){return this.getObjectByProperty("name",_u)},getObjectByProperty:function(_u,$u){if(this[_u]===$u)return this;for(var Tu=0,Cu=this.children.length;Tu<Cu;Tu++){var Pu=this.children[Tu],Ru=Pu.getObjectByProperty(_u,$u);if(Ru!==void 0)return Ru}},getWorldPosition:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),_u.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),_u=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_u,_scale),_u},getWorldScale:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,_u),_u},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set($u[8],$u[9],$u[10]).normalize()},raycast:function(){},traverse:function(_u){_u(this);for(var $u=this.children,Tu=0,Cu=$u.length;Tu<Cu;Tu++)$u[Tu].traverse(_u)},traverseVisible:function(_u){if(this.visible!==!1){_u(this);for(var $u=this.children,Tu=0,Cu=$u.length;Tu<Cu;Tu++)$u[Tu].traverseVisible(_u)}},traverseAncestors:function(_u){var $u=this.parent;$u!==null&&(_u($u),$u.traverseAncestors(_u))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_u)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_u=!0);for(var $u=this.children,Tu=0,Cu=$u.length;Tu<Cu;Tu++)$u[Tu].updateMatrixWorld(_u)},updateWorldMatrix:function(_u,$u){var Tu=this.parent;if(_u===!0&&Tu!==null&&Tu.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),$u===!0)for(var Cu=this.children,Pu=0,Ru=Cu.length;Pu<Ru;Pu++)Cu[Pu].updateWorldMatrix(!1,!0)},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string",Tu={};$u&&(_u={geometries:{},materials:{},textures:{},images:{},shapes:{}},Tu.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Cu={};Cu.uuid=this.uuid,Cu.type=this.type,this.name!==""&&(Cu.name=this.name),this.castShadow===!0&&(Cu.castShadow=!0),this.receiveShadow===!0&&(Cu.receiveShadow=!0),this.visible===!1&&(Cu.visible=!1),this.frustumCulled===!1&&(Cu.frustumCulled=!1),this.renderOrder!==0&&(Cu.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Cu.userData=this.userData),Cu.layers=this.layers.mask,Cu.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Cu.matrixAutoUpdate=!1),this.isInstancedMesh&&(Cu.type="InstancedMesh",Cu.count=this.count,Cu.instanceMatrix=this.instanceMatrix.toJSON());function Pu(Hu,Uu){return Hu[Uu.uuid]===void 0&&(Hu[Uu.uuid]=Uu.toJSON(_u)),Uu.uuid}if(this.isMesh||this.isLine||this.isPoints){Cu.geometry=Pu(_u.geometries,this.geometry);var Ru=this.geometry.parameters;if(Ru!==void 0&&Ru.shapes!==void 0){var Lu=Ru.shapes;if(Array.isArray(Lu))for(var Bu=0,Vu=Lu.length;Bu<Vu;Bu++){var Ou=Lu[Bu];Pu(_u.shapes,Ou)}else Pu(_u.shapes,Lu)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Du=[],Bu=0,Vu=this.material.length;Bu<Vu;Bu++)Du.push(Pu(_u.materials,this.material[Bu]));Cu.material=Du}else Cu.material=Pu(_u.materials,this.material);if(this.children.length>0){Cu.children=[];for(var Bu=0;Bu<this.children.length;Bu++)Cu.children.push(this.children[Bu].toJSON(_u).object)}if($u){var ku=zu(_u.geometries),Fu=zu(_u.materials),Nu=zu(_u.textures),Gu=zu(_u.images),Lu=zu(_u.shapes);ku.length>0&&(Tu.geometries=ku),Fu.length>0&&(Tu.materials=Fu),Nu.length>0&&(Tu.textures=Nu),Gu.length>0&&(Tu.images=Gu),Lu.length>0&&(Tu.shapes=Lu)}return Tu.object=Cu,Tu;function zu(Hu){var Uu=[];for(var ju in Hu){var Wu=Hu[ju];delete Wu.metadata,Uu.push(Wu)}return Uu}},clone:function(_u){return new this.constructor().copy(this,_u)},copy:function(_u,$u){if($u===void 0&&($u=!0),this.name=_u.name,this.up.copy(_u.up),this.position.copy(_u.position),this.quaternion.copy(_u.quaternion),this.scale.copy(_u.scale),this.matrix.copy(_u.matrix),this.matrixWorld.copy(_u.matrixWorld),this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_u.matrixWorldNeedsUpdate,this.layers.mask=_u.layers.mask,this.visible=_u.visible,this.castShadow=_u.castShadow,this.receiveShadow=_u.receiveShadow,this.frustumCulled=_u.frustumCulled,this.renderOrder=_u.renderOrder,this.userData=JSON.parse(JSON.stringify(_u.userData)),$u===!0)for(var Tu=0;Tu<_u.children.length;Tu++){var Cu=_u.children[Tu];this.add(Cu.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),_u.background!==null&&(this.background=_u.background.clone()),_u.environment!==null&&(this.environment=_u.environment.clone()),_u.fog!==null&&(this.fog=_u.fog.clone()),_u.overrideMaterial!==null&&(this.overrideMaterial=_u.overrideMaterial.clone()),this.autoUpdate=_u.autoUpdate,this.matrixAutoUpdate=_u.matrixAutoUpdate,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return this.background!==null&&($u.object.background=this.background.toJSON(_u)),this.environment!==null&&($u.object.environment=this.environment.toJSON(_u)),this.fog!==null&&($u.object.fog=this.fog.toJSON()),$u},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(_u,$u){this.min=_u!==void 0?_u:new Vector3(1/0,1/0,1/0),this.max=$u!==void 0?$u:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromArray:function(_u){for(var $u=1/0,Tu=1/0,Cu=1/0,Pu=-1/0,Ru=-1/0,Lu=-1/0,Bu=0,Vu=_u.length;Bu<Vu;Bu+=3){var Ou=_u[Bu],Du=_u[Bu+1],ku=_u[Bu+2];Ou<$u&&($u=Ou),Du<Tu&&(Tu=Du),ku<Cu&&(Cu=ku),Ou>Pu&&(Pu=Ou),Du>Ru&&(Ru=Du),ku>Lu&&(Lu=ku)}return this.min.set($u,Tu,Cu),this.max.set(Pu,Ru,Lu),this},setFromBufferAttribute:function(_u){for(var $u=1/0,Tu=1/0,Cu=1/0,Pu=-1/0,Ru=-1/0,Lu=-1/0,Bu=0,Vu=_u.count;Bu<Vu;Bu++){var Ou=_u.getX(Bu),Du=_u.getY(Bu),ku=_u.getZ(Bu);Ou<$u&&($u=Ou),Du<Tu&&(Tu=Du),ku<Cu&&(Cu=ku),Ou>Pu&&(Pu=Ou),Du>Ru&&(Ru=Du),ku>Lu&&(Lu=ku)}return this.min.set($u,Tu,Cu),this.max.set(Pu,Ru,Lu),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Tu=_u.length;$u<Tu;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Tu=_vector$1.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Tu),this.max.copy(_u).add(Tu),this},setFromObject:function(_u){return this.makeEmpty(),this.expandByObject(_u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},expandByObject:function(_u){_u.updateWorldMatrix(!1,!1);var $u=_u.geometry;$u!==void 0&&($u.boundingBox===null&&$u.computeBoundingBox(),_box.copy($u.boundingBox),_box.applyMatrix4(_u.matrixWorld),this.union(_box));for(var Tu=_u.children,Cu=0,Pu=Tu.length;Cu<Pu;Cu++)this.expandByObject(Tu[Cu]);return this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y||_u.z<this.min.z||_u.z>this.max.z)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y&&this.min.z<=_u.min.z&&_u.max.z<=this.max.z},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),$u=new Vector3),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y),(_u.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y||_u.max.z<this.min.z||_u.min.z>this.max.z)},intersectsSphere:function(_u){return this.clampPoint(_u.center,_vector$1),_vector$1.distanceToSquared(_u.center)<=_u.radius*_u.radius},intersectsPlane:function(_u){var $u,Tu;return _u.normal.x>0?($u=_u.normal.x*this.min.x,Tu=_u.normal.x*this.max.x):($u=_u.normal.x*this.max.x,Tu=_u.normal.x*this.min.x),_u.normal.y>0?($u+=_u.normal.y*this.min.y,Tu+=_u.normal.y*this.max.y):($u+=_u.normal.y*this.max.y,Tu+=_u.normal.y*this.min.y),_u.normal.z>0?($u+=_u.normal.z*this.min.z,Tu+=_u.normal.z*this.max.z):($u+=_u.normal.z*this.max.z,Tu+=_u.normal.z*this.min.z),$u<=-_u.constant&&Tu>=-_u.constant},intersectsTriangle:function(_u){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(_u.a,_center),_v1$2.subVectors(_u.b,_center),_v2.subVectors(_u.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var $u=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes($u,_v0,_v1$2,_v2,_extents)||($u=[1,0,0,0,1,0,0,0,1],!satForAxes($u,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),$u=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes($u,_v0,_v1$2,_v2,_extents))},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$1.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},getBoundingSphere:function(_u){return _u===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(_u.center),_u.radius=this.getSize(_vector$1).length()*.5,_u},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this.isEmpty()&&this.makeEmpty(),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},applyMatrix4:function(_u){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_u),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_u),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_u),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_u),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_u),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_u),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_u),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_u),this.setFromPoints(_points),this)},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});function satForAxes(_u,$u,Tu,Cu,Pu){var Ru,Lu;for(Ru=0,Lu=_u.length-3;Ru<=Lu;Ru+=3){_testAxis.fromArray(_u,Ru);var Bu=Pu.x*Math.abs(_testAxis.x)+Pu.y*Math.abs(_testAxis.y)+Pu.z*Math.abs(_testAxis.z),Vu=$u.dot(_testAxis),Ou=Tu.dot(_testAxis),Du=Cu.dot(_testAxis);if(Math.max(-Math.max(Vu,Ou,Du),Math.min(Vu,Ou,Du))>Bu)return!1}return!0}var _box$1=new Box3;function Sphere(_u,$u){this.center=_u!==void 0?_u:new Vector3,this.radius=$u!==void 0?$u:-1}Object.assign(Sphere.prototype,{set:function(_u,$u){return this.center.copy(_u),this.radius=$u,this},setFromPoints:function(_u,$u){var Tu=this.center;$u!==void 0?Tu.copy($u):_box$1.setFromPoints(_u).getCenter(Tu);for(var Cu=0,Pu=0,Ru=_u.length;Pu<Ru;Pu++)Cu=Math.max(Cu,Tu.distanceToSquared(_u[Pu]));return this.radius=Math.sqrt(Cu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.center.copy(_u.center),this.radius=_u.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(_u){return _u.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(_u){return _u.distanceTo(this.center)-this.radius},intersectsSphere:function(_u){var $u=this.radius+_u.radius;return _u.center.distanceToSquared(this.center)<=$u*$u},intersectsBox:function(_u){return _u.intersectsSphere(this)},intersectsPlane:function(_u){return Math.abs(_u.distanceToPoint(this.center))<=this.radius},clampPoint:function(_u,$u){var Tu=this.center.distanceToSquared(_u);return $u===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u),Tu>this.radius*this.radius&&($u.sub(this.center).normalize(),$u.multiplyScalar(this.radius).add(this.center)),$u},getBoundingBox:function(_u){return _u===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),_u=new Box3),this.isEmpty()?(_u.makeEmpty(),_u):(_u.set(this.center,this.center),_u.expandByScalar(this.radius),_u)},applyMatrix4:function(_u){return this.center.applyMatrix4(_u),this.radius=this.radius*_u.getMaxScaleOnAxis(),this},translate:function(_u){return this.center.add(_u),this},equals:function(_u){return _u.center.equals(this.center)&&_u.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(_u,$u){this.origin=_u!==void 0?_u:new Vector3,this.direction=$u!==void 0?$u:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(_u,$u){return this.origin.copy(_u),this.direction.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.origin.copy(_u.origin),this.direction.copy(_u.direction),this},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Ray: .at() target is now required"),$u=new Vector3),$u.copy(this.direction).multiplyScalar(_u).add(this.origin)},lookAt:function(_u){return this.direction.copy(_u).sub(this.origin).normalize(),this},recast:function(_u){return this.origin.copy(this.at(_u,_vector$2)),this},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),$u=new Vector3),$u.subVectors(_u,this.origin);var Tu=$u.dot(this.direction);return Tu<0?$u.copy(this.origin):$u.copy(this.direction).multiplyScalar(Tu).add(this.origin)},distanceToPoint:function(_u){return Math.sqrt(this.distanceSqToPoint(_u))},distanceSqToPoint:function(_u){var $u=_vector$2.subVectors(_u,this.origin).dot(this.direction);return $u<0?this.origin.distanceToSquared(_u):(_vector$2.copy(this.direction).multiplyScalar($u).add(this.origin),_vector$2.distanceToSquared(_u))},distanceSqToSegment:function(_u,$u,Tu,Cu){_segCenter.copy(_u).add($u).multiplyScalar(.5),_segDir.copy($u).sub(_u).normalize(),_diff.copy(this.origin).sub(_segCenter);var Pu=_u.distanceTo($u)*.5,Ru=-this.direction.dot(_segDir),Lu=_diff.dot(this.direction),Bu=-_diff.dot(_segDir),Vu=_diff.lengthSq(),Ou=Math.abs(1-Ru*Ru),Du,ku,Fu,Nu;if(Ou>0)if(Du=Ru*Bu-Lu,ku=Ru*Lu-Bu,Nu=Pu*Ou,Du>=0)if(ku>=-Nu)if(ku<=Nu){var Gu=1/Ou;Du*=Gu,ku*=Gu,Fu=Du*(Du+Ru*ku+2*Lu)+ku*(Ru*Du+ku+2*Bu)+Vu}else ku=Pu,Du=Math.max(0,-(Ru*ku+Lu)),Fu=-Du*Du+ku*(ku+2*Bu)+Vu;else ku=-Pu,Du=Math.max(0,-(Ru*ku+Lu)),Fu=-Du*Du+ku*(ku+2*Bu)+Vu;else ku<=-Nu?(Du=Math.max(0,-(-Ru*Pu+Lu)),ku=Du>0?-Pu:Math.min(Math.max(-Pu,-Bu),Pu),Fu=-Du*Du+ku*(ku+2*Bu)+Vu):ku<=Nu?(Du=0,ku=Math.min(Math.max(-Pu,-Bu),Pu),Fu=ku*(ku+2*Bu)+Vu):(Du=Math.max(0,-(Ru*Pu+Lu)),ku=Du>0?Pu:Math.min(Math.max(-Pu,-Bu),Pu),Fu=-Du*Du+ku*(ku+2*Bu)+Vu);else ku=Ru>0?-Pu:Pu,Du=Math.max(0,-(Ru*ku+Lu)),Fu=-Du*Du+ku*(ku+2*Bu)+Vu;return Tu&&Tu.copy(this.direction).multiplyScalar(Du).add(this.origin),Cu&&Cu.copy(_segDir).multiplyScalar(ku).add(_segCenter),Fu},intersectSphere:function(_u,$u){_vector$2.subVectors(_u.center,this.origin);var Tu=_vector$2.dot(this.direction),Cu=_vector$2.dot(_vector$2)-Tu*Tu,Pu=_u.radius*_u.radius;if(Cu>Pu)return null;var Ru=Math.sqrt(Pu-Cu),Lu=Tu-Ru,Bu=Tu+Ru;return Lu<0&&Bu<0?null:Lu<0?this.at(Bu,$u):this.at(Lu,$u)},intersectsSphere:function(_u){return this.distanceSqToPoint(_u.center)<=_u.radius*_u.radius},distanceToPlane:function(_u){var $u=_u.normal.dot(this.direction);if($u===0)return _u.distanceToPoint(this.origin)===0?0:null;var Tu=-(this.origin.dot(_u.normal)+_u.constant)/$u;return Tu>=0?Tu:null},intersectPlane:function(_u,$u){var Tu=this.distanceToPlane(_u);return Tu===null?null:this.at(Tu,$u)},intersectsPlane:function(_u){var $u=_u.distanceToPoint(this.origin);if($u===0)return!0;var Tu=_u.normal.dot(this.direction);return Tu*$u<0},intersectBox:function(_u,$u){var Tu,Cu,Pu,Ru,Lu,Bu,Vu=1/this.direction.x,Ou=1/this.direction.y,Du=1/this.direction.z,ku=this.origin;return Vu>=0?(Tu=(_u.min.x-ku.x)*Vu,Cu=(_u.max.x-ku.x)*Vu):(Tu=(_u.max.x-ku.x)*Vu,Cu=(_u.min.x-ku.x)*Vu),Ou>=0?(Pu=(_u.min.y-ku.y)*Ou,Ru=(_u.max.y-ku.y)*Ou):(Pu=(_u.max.y-ku.y)*Ou,Ru=(_u.min.y-ku.y)*Ou),Tu>Ru||Pu>Cu||((Pu>Tu||Tu!==Tu)&&(Tu=Pu),(Ru<Cu||Cu!==Cu)&&(Cu=Ru),Du>=0?(Lu=(_u.min.z-ku.z)*Du,Bu=(_u.max.z-ku.z)*Du):(Lu=(_u.max.z-ku.z)*Du,Bu=(_u.min.z-ku.z)*Du),Tu>Bu||Lu>Cu)||((Lu>Tu||Tu!==Tu)&&(Tu=Lu),(Bu<Cu||Cu!==Cu)&&(Cu=Bu),Cu<0)?null:this.at(Tu>=0?Tu:Cu,$u)},intersectsBox:function(_u){return this.intersectBox(_u,_vector$2)!==null},intersectTriangle:function(_u,$u,Tu,Cu,Pu){_edge1.subVectors($u,_u),_edge2.subVectors(Tu,_u),_normal.crossVectors(_edge1,_edge2);var Ru=this.direction.dot(_normal),Lu;if(Ru>0){if(Cu)return null;Lu=1}else if(Ru<0)Lu=-1,Ru=-Ru;else return null;_diff.subVectors(this.origin,_u);var Bu=Lu*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Bu<0)return null;var Vu=Lu*this.direction.dot(_edge1.cross(_diff));if(Vu<0||Bu+Vu>Ru)return null;var Ou=-Lu*_diff.dot(_normal);return Ou<0?null:this.at(Ou/Ru,Pu)},applyMatrix4:function(_u){return this.origin.applyMatrix4(_u),this.direction.transformDirection(_u),this},equals:function(_u){return _u.origin.equals(this.origin)&&_u.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(_u,$u){this.normal=_u!==void 0?_u:new Vector3(1,0,0),this.constant=$u!==void 0?$u:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(_u,$u){return this.normal.copy(_u),this.constant=$u,this},setComponents:function(_u,$u,Tu,Cu){return this.normal.set(_u,$u,Tu),this.constant=Cu,this},setFromNormalAndCoplanarPoint:function(_u,$u){return this.normal.copy(_u),this.constant=-$u.dot(this.normal),this},setFromCoplanarPoints:function(_u,$u,Tu){var Cu=_vector1.subVectors(Tu,$u).cross(_vector2.subVectors(_u,$u)).normalize();return this.setFromNormalAndCoplanarPoint(Cu,_u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.normal.copy(_u.normal),this.constant=_u.constant,this},normalize:function(){var _u=1/this.normal.length();return this.normal.multiplyScalar(_u),this.constant*=_u,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(_u){return this.normal.dot(_u)+this.constant},distanceToSphere:function(_u){return this.distanceToPoint(_u.center)-_u.radius},projectPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),$u=new Vector3),$u.copy(this.normal).multiplyScalar(-this.distanceToPoint(_u)).add(_u)},intersectLine:function(_u,$u){$u===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),$u=new Vector3);var Tu=_u.delta(_vector1),Cu=this.normal.dot(Tu);if(Cu===0)return this.distanceToPoint(_u.start)===0?$u.copy(_u.start):void 0;var Pu=-(_u.start.dot(this.normal)+this.constant)/Cu;if(!(Pu<0||Pu>1))return $u.copy(Tu).multiplyScalar(Pu).add(_u.start)},intersectsLine:function(_u){var $u=this.distanceToPoint(_u.start),Tu=this.distanceToPoint(_u.end);return $u<0&&Tu>0||Tu<0&&$u>0},intersectsBox:function(_u){return _u.intersectsPlane(this)},intersectsSphere:function(_u){return _u.intersectsPlane(this)},coplanarPoint:function(_u){return _u===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),_u=new Vector3),_u.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(_u,$u){var Tu=$u||_normalMatrix.getNormalMatrix(_u),Cu=this.coplanarPoint(_vector1).applyMatrix4(_u),Pu=this.normal.applyMatrix3(Tu).normalize();return this.constant=-Cu.dot(Pu),this},translate:function(_u){return this.constant-=_u.dot(this.normal),this},equals:function(_u){return _u.normal.equals(this.normal)&&_u.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(_u,$u,Tu){this.a=_u!==void 0?_u:new Vector3,this.b=$u!==void 0?$u:new Vector3,this.c=Tu!==void 0?Tu:new Vector3}Object.assign(Triangle,{getNormal:function(_u,$u,Tu,Cu){Cu===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Cu=new Vector3),Cu.subVectors(Tu,$u),_v0$1.subVectors(_u,$u),Cu.cross(_v0$1);var Pu=Cu.lengthSq();return Pu>0?Cu.multiplyScalar(1/Math.sqrt(Pu)):Cu.set(0,0,0)},getBarycoord:function(_u,$u,Tu,Cu,Pu){_v0$1.subVectors(Cu,$u),_v1$3.subVectors(Tu,$u),_v2$1.subVectors(_u,$u);var Ru=_v0$1.dot(_v0$1),Lu=_v0$1.dot(_v1$3),Bu=_v0$1.dot(_v2$1),Vu=_v1$3.dot(_v1$3),Ou=_v1$3.dot(_v2$1),Du=Ru*Vu-Lu*Lu;if(Pu===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Pu=new Vector3),Du===0)return Pu.set(-2,-1,-1);var ku=1/Du,Fu=(Vu*Bu-Lu*Ou)*ku,Nu=(Ru*Ou-Lu*Bu)*ku;return Pu.set(1-Fu-Nu,Nu,Fu)},containsPoint:function(_u,$u,Tu,Cu){return Triangle.getBarycoord(_u,$u,Tu,Cu,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){return this.getBarycoord(_u,$u,Tu,Cu,_v3),Bu.set(0,0),Bu.addScaledVector(Pu,_v3.x),Bu.addScaledVector(Ru,_v3.y),Bu.addScaledVector(Lu,_v3.z),Bu},isFrontFacing:function(_u,$u,Tu,Cu){return _v0$1.subVectors(Tu,$u),_v1$3.subVectors(_u,$u),_v0$1.cross(_v1$3).dot(Cu)<0}});Object.assign(Triangle.prototype,{set:function(_u,$u,Tu){return this.a.copy(_u),this.b.copy($u),this.c.copy(Tu),this},setFromPointsAndIndices:function(_u,$u,Tu,Cu){return this.a.copy(_u[$u]),this.b.copy(_u[Tu]),this.c.copy(_u[Cu]),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.a.copy(_u.a),this.b.copy(_u.b),this.c.copy(_u.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),_u=new Vector3),_u.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(_u){return Triangle.getNormal(this.a,this.b,this.c,_u)},getPlane:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),_u=new Plane),_u.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(_u,$u){return Triangle.getBarycoord(_u,this.a,this.b,this.c,$u)},getUV:function(_u,$u,Tu,Cu,Pu){return Triangle.getUV(_u,this.a,this.b,this.c,$u,Tu,Cu,Pu)},containsPoint:function(_u){return Triangle.containsPoint(_u,this.a,this.b,this.c)},isFrontFacing:function(_u){return Triangle.isFrontFacing(this.a,this.b,this.c,_u)},intersectsBox:function(_u){return _u.intersectsTriangle(this)},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),$u=new Vector3);var Tu=this.a,Cu=this.b,Pu=this.c,Ru,Lu;_vab.subVectors(Cu,Tu),_vac.subVectors(Pu,Tu),_vap.subVectors(_u,Tu);var Bu=_vab.dot(_vap),Vu=_vac.dot(_vap);if(Bu<=0&&Vu<=0)return $u.copy(Tu);_vbp.subVectors(_u,Cu);var Ou=_vab.dot(_vbp),Du=_vac.dot(_vbp);if(Ou>=0&&Du<=Ou)return $u.copy(Cu);var ku=Bu*Du-Ou*Vu;if(ku<=0&&Bu>=0&&Ou<=0)return Ru=Bu/(Bu-Ou),$u.copy(Tu).addScaledVector(_vab,Ru);_vcp.subVectors(_u,Pu);var Fu=_vab.dot(_vcp),Nu=_vac.dot(_vcp);if(Nu>=0&&Fu<=Nu)return $u.copy(Pu);var Gu=Fu*Vu-Bu*Nu;if(Gu<=0&&Vu>=0&&Nu<=0)return Lu=Vu/(Vu-Nu),$u.copy(Tu).addScaledVector(_vac,Lu);var zu=Ou*Nu-Fu*Du;if(zu<=0&&Du-Ou>=0&&Fu-Nu>=0)return _vbc.subVectors(Pu,Cu),Lu=(Du-Ou)/(Du-Ou+(Fu-Nu)),$u.copy(Cu).addScaledVector(_vbc,Lu);var Hu=1/(zu+Gu+ku);return Ru=Gu*Hu,Lu=ku*Hu,$u.copy(Tu).addScaledVector(_vab,Ru).addScaledVector(_vac,Lu)},equals:function(_u){return _u.a.equals(this.a)&&_u.b.equals(this.b)&&_u.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(_u,$u,Tu){return $u===void 0&&Tu===void 0?this.set(_u):this.setRGB(_u,$u,Tu)}function hue2rgb(_u,$u,Tu){return Tu<0&&(Tu+=1),Tu>1&&(Tu-=1),Tu<1/6?_u+($u-_u)*6*Tu:Tu<1/2?$u:Tu<2/3?_u+($u-_u)*6*(2/3-Tu):_u}function SRGBToLinear(_u){return _u<.04045?_u*.0773993808:Math.pow(_u*.9478672986+.0521327014,2.4)}function LinearToSRGB(_u){return _u<.0031308?_u*12.92:1.055*Math.pow(_u,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(_u){return _u&&_u.isColor?this.copy(_u):typeof _u=="number"?this.setHex(_u):typeof _u=="string"&&this.setStyle(_u),this},setScalar:function(_u){return this.r=_u,this.g=_u,this.b=_u,this},setHex:function(_u){return _u=Math.floor(_u),this.r=(_u>>16&255)/255,this.g=(_u>>8&255)/255,this.b=(_u&255)/255,this},setRGB:function(_u,$u,Tu){return this.r=_u,this.g=$u,this.b=Tu,this},setHSL:function(_u,$u,Tu){if(_u=MathUtils.euclideanModulo(_u,1),$u=MathUtils.clamp($u,0,1),Tu=MathUtils.clamp(Tu,0,1),$u===0)this.r=this.g=this.b=Tu;else{var Cu=Tu<=.5?Tu*(1+$u):Tu+$u-Tu*$u,Pu=2*Tu-Cu;this.r=hue2rgb(Pu,Cu,_u+1/3),this.g=hue2rgb(Pu,Cu,_u),this.b=hue2rgb(Pu,Cu,_u-1/3)}return this},setStyle:function(_u){function $u(ku){ku!==void 0&&parseFloat(ku)<1&&console.warn("THREE.Color: Alpha component of "+_u+" will be ignored.")}var Tu;if(Tu=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(_u)){var Cu,Pu=Tu[1],Ru=Tu[2];switch(Pu){case"rgb":case"rgba":if(Cu=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru))return this.r=Math.min(255,parseInt(Cu[1],10))/255,this.g=Math.min(255,parseInt(Cu[2],10))/255,this.b=Math.min(255,parseInt(Cu[3],10))/255,$u(Cu[5]),this;if(Cu=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru))return this.r=Math.min(100,parseInt(Cu[1],10))/100,this.g=Math.min(100,parseInt(Cu[2],10))/100,this.b=Math.min(100,parseInt(Cu[3],10))/100,$u(Cu[5]),this;break;case"hsl":case"hsla":if(Cu=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru)){var Lu=parseFloat(Cu[1])/360,Bu=parseInt(Cu[2],10)/100,Vu=parseInt(Cu[3],10)/100;return $u(Cu[5]),this.setHSL(Lu,Bu,Vu)}break}}else if(Tu=/^\#([A-Fa-f0-9]+)$/.exec(_u)){var Ou=Tu[1],Du=Ou.length;if(Du===3)return this.r=parseInt(Ou.charAt(0)+Ou.charAt(0),16)/255,this.g=parseInt(Ou.charAt(1)+Ou.charAt(1),16)/255,this.b=parseInt(Ou.charAt(2)+Ou.charAt(2),16)/255,this;if(Du===6)return this.r=parseInt(Ou.charAt(0)+Ou.charAt(1),16)/255,this.g=parseInt(Ou.charAt(2)+Ou.charAt(3),16)/255,this.b=parseInt(Ou.charAt(4)+Ou.charAt(5),16)/255,this}return _u&&_u.length>0?this.setColorName(_u):this},setColorName:function(_u){var $u=_colorKeywords[_u];return $u!==void 0?this.setHex($u):console.warn("THREE.Color: Unknown color "+_u),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(_u){return this.r=_u.r,this.g=_u.g,this.b=_u.b,this},copyGammaToLinear:function(_u,$u){return $u===void 0&&($u=2),this.r=Math.pow(_u.r,$u),this.g=Math.pow(_u.g,$u),this.b=Math.pow(_u.b,$u),this},copyLinearToGamma:function(_u,$u){$u===void 0&&($u=2);var Tu=$u>0?1/$u:1;return this.r=Math.pow(_u.r,Tu),this.g=Math.pow(_u.g,Tu),this.b=Math.pow(_u.b,Tu),this},convertGammaToLinear:function(_u){return this.copyGammaToLinear(this,_u),this},convertLinearToGamma:function(_u){return this.copyLinearToGamma(this,_u),this},copySRGBToLinear:function(_u){return this.r=SRGBToLinear(_u.r),this.g=SRGBToLinear(_u.g),this.b=SRGBToLinear(_u.b),this},copyLinearToSRGB:function(_u){return this.r=LinearToSRGB(_u.r),this.g=LinearToSRGB(_u.g),this.b=LinearToSRGB(_u.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(_u){_u===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),_u={h:0,s:0,l:0});var $u=this.r,Tu=this.g,Cu=this.b,Pu=Math.max($u,Tu,Cu),Ru=Math.min($u,Tu,Cu),Lu,Bu,Vu=(Ru+Pu)/2;if(Ru===Pu)Lu=0,Bu=0;else{var Ou=Pu-Ru;switch(Bu=Vu<=.5?Ou/(Pu+Ru):Ou/(2-Pu-Ru),Pu){case $u:Lu=(Tu-Cu)/Ou+(Tu<Cu?6:0);break;case Tu:Lu=(Cu-$u)/Ou+2;break;case Cu:Lu=($u-Tu)/Ou+4;break}Lu/=6}return _u.h=Lu,_u.s=Bu,_u.l=Vu,_u},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(_u,$u,Tu){return this.getHSL(_hslA),_hslA.h+=_u,_hslA.s+=$u,_hslA.l+=Tu,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(_u){return this.r+=_u.r,this.g+=_u.g,this.b+=_u.b,this},addColors:function(_u,$u){return this.r=_u.r+$u.r,this.g=_u.g+$u.g,this.b=_u.b+$u.b,this},addScalar:function(_u){return this.r+=_u,this.g+=_u,this.b+=_u,this},sub:function(_u){return this.r=Math.max(0,this.r-_u.r),this.g=Math.max(0,this.g-_u.g),this.b=Math.max(0,this.b-_u.b),this},multiply:function(_u){return this.r*=_u.r,this.g*=_u.g,this.b*=_u.b,this},multiplyScalar:function(_u){return this.r*=_u,this.g*=_u,this.b*=_u,this},lerp:function(_u,$u){return this.r+=(_u.r-this.r)*$u,this.g+=(_u.g-this.g)*$u,this.b+=(_u.b-this.b)*$u,this},lerpHSL:function(_u,$u){this.getHSL(_hslA),_u.getHSL(_hslB);var Tu=MathUtils.lerp(_hslA.h,_hslB.h,$u),Cu=MathUtils.lerp(_hslA.s,_hslB.s,$u),Pu=MathUtils.lerp(_hslA.l,_hslB.l,$u);return this.setHSL(Tu,Cu,Pu),this},equals:function(_u){return _u.r===this.r&&_u.g===this.g&&_u.b===this.b},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.r=_u[$u],this.g=_u[$u+1],this.b=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.r,_u[$u+1]=this.g,_u[$u+2]=this.b,_u},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(_u,$u,Tu,Cu,Pu,Ru){this.a=_u,this.b=$u,this.c=Tu,this.normal=Cu&&Cu.isVector3?Cu:new Vector3,this.vertexNormals=Array.isArray(Cu)?Cu:[],this.color=Pu&&Pu.isColor?Pu:new Color,this.vertexColors=Array.isArray(Pu)?Pu:[],this.materialIndex=Ru!==void 0?Ru:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.a=_u.a,this.b=_u.b,this.c=_u.c,this.normal.copy(_u.normal),this.color.copy(_u.color),this.materialIndex=_u.materialIndex;for(var $u=0,Tu=_u.vertexNormals.length;$u<Tu;$u++)this.vertexNormals[$u]=_u.vertexNormals[$u].clone();for(var $u=0,Tu=_u.vertexColors.length;$u<Tu;$u++)this.vertexColors[$u]=_u.vertexColors[$u].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(_u){if(_u!==void 0)for(var $u in _u){var Tu=_u[$u];if(Tu===void 0){console.warn("THREE.Material: '"+$u+"' parameter is undefined.");continue}if($u==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Tu===FlatShading;continue}var Cu=this[$u];if(Cu===void 0){console.warn("THREE."+this.type+": '"+$u+"' is not a property of this material.");continue}Cu&&Cu.isColor?Cu.set(Tu):Cu&&Cu.isVector3&&Tu&&Tu.isVector3?Cu.copy(Tu):this[$u]=Tu}},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";$u&&(_u={textures:{},images:{}});var Tu={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};Tu.uuid=this.uuid,Tu.type=this.type,this.name!==""&&(Tu.name=this.name),this.color&&this.color.isColor&&(Tu.color=this.color.getHex()),this.roughness!==void 0&&(Tu.roughness=this.roughness),this.metalness!==void 0&&(Tu.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(Tu.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(Tu.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(Tu.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Tu.specular=this.specular.getHex()),this.shininess!==void 0&&(Tu.shininess=this.shininess),this.clearcoat!==void 0&&(Tu.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Tu.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Tu.clearcoatMap=this.clearcoatMap.toJSON(_u).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Tu.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_u).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Tu.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_u).uuid,Tu.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(Tu.map=this.map.toJSON(_u).uuid),this.matcap&&this.matcap.isTexture&&(Tu.matcap=this.matcap.toJSON(_u).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Tu.alphaMap=this.alphaMap.toJSON(_u).uuid),this.lightMap&&this.lightMap.isTexture&&(Tu.lightMap=this.lightMap.toJSON(_u).uuid),this.aoMap&&this.aoMap.isTexture&&(Tu.aoMap=this.aoMap.toJSON(_u).uuid,Tu.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Tu.bumpMap=this.bumpMap.toJSON(_u).uuid,Tu.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Tu.normalMap=this.normalMap.toJSON(_u).uuid,Tu.normalMapType=this.normalMapType,Tu.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Tu.displacementMap=this.displacementMap.toJSON(_u).uuid,Tu.displacementScale=this.displacementScale,Tu.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Tu.roughnessMap=this.roughnessMap.toJSON(_u).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Tu.metalnessMap=this.metalnessMap.toJSON(_u).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Tu.emissiveMap=this.emissiveMap.toJSON(_u).uuid),this.specularMap&&this.specularMap.isTexture&&(Tu.specularMap=this.specularMap.toJSON(_u).uuid),this.envMap&&this.envMap.isTexture&&(Tu.envMap=this.envMap.toJSON(_u).uuid,Tu.reflectivity=this.reflectivity,Tu.refractionRatio=this.refractionRatio,this.combine!==void 0&&(Tu.combine=this.combine),this.envMapIntensity!==void 0&&(Tu.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(Tu.gradientMap=this.gradientMap.toJSON(_u).uuid),this.size!==void 0&&(Tu.size=this.size),this.sizeAttenuation!==void 0&&(Tu.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Tu.blending=this.blending),this.flatShading===!0&&(Tu.flatShading=this.flatShading),this.side!==FrontSide&&(Tu.side=this.side),this.vertexColors&&(Tu.vertexColors=!0),this.opacity<1&&(Tu.opacity=this.opacity),this.transparent===!0&&(Tu.transparent=this.transparent),Tu.depthFunc=this.depthFunc,Tu.depthTest=this.depthTest,Tu.depthWrite=this.depthWrite,Tu.stencilWrite=this.stencilWrite,Tu.stencilWriteMask=this.stencilWriteMask,Tu.stencilFunc=this.stencilFunc,Tu.stencilRef=this.stencilRef,Tu.stencilFuncMask=this.stencilFuncMask,Tu.stencilFail=this.stencilFail,Tu.stencilZFail=this.stencilZFail,Tu.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(Tu.rotation=this.rotation),this.polygonOffset===!0&&(Tu.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Tu.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Tu.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(Tu.linewidth=this.linewidth),this.dashSize!==void 0&&(Tu.dashSize=this.dashSize),this.gapSize!==void 0&&(Tu.gapSize=this.gapSize),this.scale!==void 0&&(Tu.scale=this.scale),this.dithering===!0&&(Tu.dithering=!0),this.alphaTest>0&&(Tu.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(Tu.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(Tu.wireframe=this.wireframe),this.wireframeLinewidth>1&&(Tu.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Tu.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Tu.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(Tu.morphTargets=!0),this.morphNormals===!0&&(Tu.morphNormals=!0),this.skinning===!0&&(Tu.skinning=!0),this.visible===!1&&(Tu.visible=!1),this.toneMapped===!1&&(Tu.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(Tu.userData=this.userData);function Cu(Lu){var Bu=[];for(var Vu in Lu){var Ou=Lu[Vu];delete Ou.metadata,Bu.push(Ou)}return Bu}if($u){var Pu=Cu(_u.textures),Ru=Cu(_u.images);Pu.length>0&&(Tu.textures=Pu),Ru.length>0&&(Tu.images=Ru)}return Tu},clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.name=_u.name,this.fog=_u.fog,this.blending=_u.blending,this.side=_u.side,this.flatShading=_u.flatShading,this.vertexColors=_u.vertexColors,this.opacity=_u.opacity,this.transparent=_u.transparent,this.blendSrc=_u.blendSrc,this.blendDst=_u.blendDst,this.blendEquation=_u.blendEquation,this.blendSrcAlpha=_u.blendSrcAlpha,this.blendDstAlpha=_u.blendDstAlpha,this.blendEquationAlpha=_u.blendEquationAlpha,this.depthFunc=_u.depthFunc,this.depthTest=_u.depthTest,this.depthWrite=_u.depthWrite,this.stencilWriteMask=_u.stencilWriteMask,this.stencilFunc=_u.stencilFunc,this.stencilRef=_u.stencilRef,this.stencilFuncMask=_u.stencilFuncMask,this.stencilFail=_u.stencilFail,this.stencilZFail=_u.stencilZFail,this.stencilZPass=_u.stencilZPass,this.stencilWrite=_u.stencilWrite;var $u=_u.clippingPlanes,Tu=null;if($u!==null){var Cu=$u.length;Tu=new Array(Cu);for(var Pu=0;Pu!==Cu;++Pu)Tu[Pu]=$u[Pu].clone()}return this.clippingPlanes=Tu,this.clipIntersection=_u.clipIntersection,this.clipShadows=_u.clipShadows,this.shadowSide=_u.shadowSide,this.colorWrite=_u.colorWrite,this.precision=_u.precision,this.polygonOffset=_u.polygonOffset,this.polygonOffsetFactor=_u.polygonOffsetFactor,this.polygonOffsetUnits=_u.polygonOffsetUnits,this.dithering=_u.dithering,this.alphaTest=_u.alphaTest,this.premultipliedAlpha=_u.premultipliedAlpha,this.visible=_u.visible,this.toneMapped=_u.toneMapped,this.userData=JSON.parse(JSON.stringify(_u.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function MeshBasicMaterial(_u){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(_u)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(_u,$u,Tu){if(Array.isArray(_u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=_u,this.itemSize=$u,this.count=_u!==void 0?_u.length/$u:0,this.normalized=Tu===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.name=_u.name,this.array=new _u.array.constructor(_u.array),this.itemSize=_u.itemSize,this.count=_u.count,this.normalized=_u.normalized,this.usage=_u.usage,this},copyAt:function(_u,$u,Tu){_u*=this.itemSize,Tu*=$u.itemSize;for(var Cu=0,Pu=this.itemSize;Cu<Pu;Cu++)this.array[_u+Cu]=$u.array[Tu+Cu];return this},copyArray:function(_u){return this.array.set(_u),this},copyColorsArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Ru=_u[Cu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Cu),Ru=new Color),$u[Tu++]=Ru.r,$u[Tu++]=Ru.g,$u[Tu++]=Ru.b}return this},copyVector2sArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Ru=_u[Cu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Cu),Ru=new Vector2),$u[Tu++]=Ru.x,$u[Tu++]=Ru.y}return this},copyVector3sArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Ru=_u[Cu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Cu),Ru=new Vector3),$u[Tu++]=Ru.x,$u[Tu++]=Ru.y,$u[Tu++]=Ru.z}return this},copyVector4sArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Ru=_u[Cu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Cu),Ru=new Vector4),$u[Tu++]=Ru.x,$u[Tu++]=Ru.y,$u[Tu++]=Ru.z,$u[Tu++]=Ru.w}return this},applyMatrix3:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix3(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix4(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyNormalMatrix(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.transformDirection(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},getX:function(_u){return this.array[_u*this.itemSize]},setX:function(_u,$u){return this.array[_u*this.itemSize]=$u,this},getY:function(_u){return this.array[_u*this.itemSize+1]},setY:function(_u,$u){return this.array[_u*this.itemSize+1]=$u,this},getZ:function(_u){return this.array[_u*this.itemSize+2]},setZ:function(_u,$u){return this.array[_u*this.itemSize+2]=$u,this},getW:function(_u){return this.array[_u*this.itemSize+3]},setW:function(_u,$u){return this.array[_u*this.itemSize+3]=$u,this},setXY:function(_u,$u,Tu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Tu,this},setXYZ:function(_u,$u,Tu,Cu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Tu,this.array[_u+2]=Cu,this},setXYZW:function(_u,$u,Tu,Cu,Pu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Tu,this.array[_u+2]=Cu,this.array[_u+3]=Pu,this},onUpload:function(_u){return this.onUploadCallback=_u,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Int8Array(_u),$u,Tu)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint8Array(_u),$u,Tu)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint8ClampedArray(_u),$u,Tu)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Int16Array(_u),$u,Tu)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint16Array(_u),$u,Tu)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Int32Array(_u),$u,Tu)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint32Array(_u),$u,Tu)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Float32Array(_u),$u,Tu)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Float64Array(_u),$u,Tu)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(_u){for(var $u,Tu=[],Cu=void 0,Pu=_u.faces,Ru=0;Ru<Pu.length;Ru++){var Lu=Pu[Ru];Lu.materialIndex!==Cu&&(Cu=Lu.materialIndex,$u!==void 0&&($u.count=Ru*3-$u.start,Tu.push($u)),$u={start:Ru*3,materialIndex:Cu})}$u!==void 0&&($u.count=Ru*3-$u.start,Tu.push($u)),this.groups=Tu},fromGeometry:function(_u){var $u=_u.faces,Tu=_u.vertices,Cu=_u.faceVertexUvs,Pu=Cu[0]&&Cu[0].length>0,Ru=Cu[1]&&Cu[1].length>0,Lu=_u.morphTargets,Bu=Lu.length,Vu;if(Bu>0){Vu=[];for(var Ou=0;Ou<Bu;Ou++)Vu[Ou]={name:Lu[Ou].name,data:[]};this.morphTargets.position=Vu}var Du=_u.morphNormals,ku=Du.length,Fu;if(ku>0){Fu=[];for(var Ou=0;Ou<ku;Ou++)Fu[Ou]={name:Du[Ou].name,data:[]};this.morphTargets.normal=Fu}var Nu=_u.skinIndices,Gu=_u.skinWeights,zu=Nu.length===Tu.length,Hu=Gu.length===Tu.length;Tu.length>0&&$u.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Ou=0;Ou<$u.length;Ou++){var Uu=$u[Ou];this.vertices.push(Tu[Uu.a],Tu[Uu.b],Tu[Uu.c]);var ju=Uu.vertexNormals;if(ju.length===3)this.normals.push(ju[0],ju[1],ju[2]);else{var Wu=Uu.normal;this.normals.push(Wu,Wu,Wu)}var Qu=Uu.vertexColors;if(Qu.length===3)this.colors.push(Qu[0],Qu[1],Qu[2]);else{var qu=Uu.color;this.colors.push(qu,qu,qu)}if(Pu===!0){var Yu=Cu[0][Ou];Yu!==void 0?this.uvs.push(Yu[0],Yu[1],Yu[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Ou),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Ru===!0){var Yu=Cu[1][Ou];Yu!==void 0?this.uvs2.push(Yu[0],Yu[1],Yu[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Ou),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var Ju=0;Ju<Bu;Ju++){var _d=Lu[Ju].vertices;Vu[Ju].data.push(_d[Uu.a],_d[Uu.b],_d[Uu.c])}for(var Ju=0;Ju<ku;Ju++){var tp=Du[Ju].vertexNormals[Ou];Fu[Ju].data.push(tp.a,tp.b,tp.c)}zu&&this.skinIndices.push(Nu[Uu.a],Nu[Uu.b],Nu[Uu.c]),Hu&&this.skinWeights.push(Gu[Uu.a],Gu[Uu.b],Gu[Uu.c])}return this.computeGroups(_u),this.verticesNeedUpdate=_u.verticesNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this}});function arrayMax(_u){if(_u.length===0)return-1/0;let $u=_u[0];for(let Tu=1,Cu=_u.length;Tu<Cu;++Tu)_u[Tu]>$u&&($u=_u[Tu]);return $u}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(_u){Array.isArray(_u)?this.index=new(arrayMax(_u)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(_u,1):this.index=_u},getAttribute:function(_u){return this.attributes[_u]},setAttribute:function(_u,$u){return this.attributes[_u]=$u,this},deleteAttribute:function(_u){return delete this.attributes[_u],this},addGroup:function(_u,$u,Tu){this.groups.push({start:_u,count:$u,materialIndex:Tu!==void 0?Tu:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(_u,$u){this.drawRange.start=_u,this.drawRange.count=$u},applyMatrix4:function(_u){var $u=this.attributes.position;$u!==void 0&&($u.applyMatrix4(_u),$u.needsUpdate=!0);var Tu=this.attributes.normal;if(Tu!==void 0){var Cu=new Matrix3().getNormalMatrix(_u);Tu.applyNormalMatrix(Cu),Tu.needsUpdate=!0}var Pu=this.attributes.tangent;return Pu!==void 0&&(Pu.transformDirection(_u),Pu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(_u){return _m1$2.makeRotationX(_u),this.applyMatrix4(_m1$2),this},rotateY:function(_u){return _m1$2.makeRotationY(_u),this.applyMatrix4(_m1$2),this},rotateZ:function(_u){return _m1$2.makeRotationZ(_u),this.applyMatrix4(_m1$2),this},translate:function(_u,$u,Tu){return _m1$2.makeTranslation(_u,$u,Tu),this.applyMatrix4(_m1$2),this},scale:function(_u,$u,Tu){return _m1$2.makeScale(_u,$u,Tu),this.applyMatrix4(_m1$2),this},lookAt:function(_u){return _obj.lookAt(_u),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(_u){var $u=_u.geometry;if(_u.isPoints||_u.isLine){var Tu=new Float32BufferAttribute($u.vertices.length*3,3),Cu=new Float32BufferAttribute($u.colors.length*3,3);if(this.setAttribute("position",Tu.copyVector3sArray($u.vertices)),this.setAttribute("color",Cu.copyColorsArray($u.colors)),$u.lineDistances&&$u.lineDistances.length===$u.vertices.length){var Pu=new Float32BufferAttribute($u.lineDistances.length,1);this.setAttribute("lineDistance",Pu.copyArray($u.lineDistances))}$u.boundingSphere!==null&&(this.boundingSphere=$u.boundingSphere.clone()),$u.boundingBox!==null&&(this.boundingBox=$u.boundingBox.clone())}else _u.isMesh&&$u&&$u.isGeometry&&this.fromGeometry($u);return this},setFromPoints:function(_u){for(var $u=[],Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=_u[Tu];$u.push(Pu.x,Pu.y,Pu.z||0)}return this.setAttribute("position",new Float32BufferAttribute($u,3)),this},updateFromObject:function(_u){var $u=_u.geometry;if(_u.isMesh){var Tu=$u.__directGeometry;if($u.elementsNeedUpdate===!0&&(Tu=void 0,$u.elementsNeedUpdate=!1),Tu===void 0)return this.fromGeometry($u);Tu.verticesNeedUpdate=$u.verticesNeedUpdate,Tu.normalsNeedUpdate=$u.normalsNeedUpdate,Tu.colorsNeedUpdate=$u.colorsNeedUpdate,Tu.uvsNeedUpdate=$u.uvsNeedUpdate,Tu.groupsNeedUpdate=$u.groupsNeedUpdate,$u.verticesNeedUpdate=!1,$u.normalsNeedUpdate=!1,$u.colorsNeedUpdate=!1,$u.uvsNeedUpdate=!1,$u.groupsNeedUpdate=!1,$u=Tu}var Cu;return $u.verticesNeedUpdate===!0&&(Cu=this.attributes.position,Cu!==void 0&&(Cu.copyVector3sArray($u.vertices),Cu.needsUpdate=!0),$u.verticesNeedUpdate=!1),$u.normalsNeedUpdate===!0&&(Cu=this.attributes.normal,Cu!==void 0&&(Cu.copyVector3sArray($u.normals),Cu.needsUpdate=!0),$u.normalsNeedUpdate=!1),$u.colorsNeedUpdate===!0&&(Cu=this.attributes.color,Cu!==void 0&&(Cu.copyColorsArray($u.colors),Cu.needsUpdate=!0),$u.colorsNeedUpdate=!1),$u.uvsNeedUpdate&&(Cu=this.attributes.uv,Cu!==void 0&&(Cu.copyVector2sArray($u.uvs),Cu.needsUpdate=!0),$u.uvsNeedUpdate=!1),$u.lineDistancesNeedUpdate&&(Cu=this.attributes.lineDistance,Cu!==void 0&&(Cu.copyArray($u.lineDistances),Cu.needsUpdate=!0),$u.lineDistancesNeedUpdate=!1),$u.groupsNeedUpdate&&($u.computeGroups(_u.geometry),this.groups=$u.groups,$u.groupsNeedUpdate=!1),this},fromGeometry:function(_u){return _u.__directGeometry=new DirectGeometry().fromGeometry(_u),this.fromDirectGeometry(_u.__directGeometry)},fromDirectGeometry:function(_u){var $u=new Float32Array(_u.vertices.length*3);if(this.setAttribute("position",new BufferAttribute($u,3).copyVector3sArray(_u.vertices)),_u.normals.length>0){var Tu=new Float32Array(_u.normals.length*3);this.setAttribute("normal",new BufferAttribute(Tu,3).copyVector3sArray(_u.normals))}if(_u.colors.length>0){var Cu=new Float32Array(_u.colors.length*3);this.setAttribute("color",new BufferAttribute(Cu,3).copyColorsArray(_u.colors))}if(_u.uvs.length>0){var Pu=new Float32Array(_u.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Pu,2).copyVector2sArray(_u.uvs))}if(_u.uvs2.length>0){var Ru=new Float32Array(_u.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Ru,2).copyVector2sArray(_u.uvs2))}this.groups=_u.groups;for(var Lu in _u.morphTargets){for(var Bu=[],Vu=_u.morphTargets[Lu],Ou=0,Du=Vu.length;Ou<Du;Ou++){var ku=Vu[Ou],Fu=new Float32BufferAttribute(ku.data.length*3,3);Fu.name=ku.name,Bu.push(Fu.copyVector3sArray(ku.data))}this.morphAttributes[Lu]=Bu}if(_u.skinIndices.length>0){var Nu=new Float32BufferAttribute(_u.skinIndices.length*4,4);this.setAttribute("skinIndex",Nu.copyVector4sArray(_u.skinIndices))}if(_u.skinWeights.length>0){var Gu=new Float32BufferAttribute(_u.skinWeights.length*4,4);this.setAttribute("skinWeight",Gu.copyVector4sArray(_u.skinWeights))}return _u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u!==void 0){if(this.boundingBox.setFromBufferAttribute(_u),$u)for(var Tu=0,Cu=$u.length;Tu<Cu;Tu++){var Pu=$u[Tu];_box$2.setFromBufferAttribute(Pu),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u){var Tu=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_u),$u)for(var Cu=0,Pu=$u.length;Cu<Pu;Cu++){var Ru=$u[Cu];_boxMorphTargets.setFromBufferAttribute(Ru),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Tu);for(var Lu=0,Cu=0,Pu=_u.count;Cu<Pu;Cu++)_vector$4.fromBufferAttribute(_u,Cu),Lu=Math.max(Lu,Tu.distanceToSquared(_vector$4));if($u)for(var Cu=0,Pu=$u.length;Cu<Pu;Cu++)for(var Ru=$u[Cu],Bu=this.morphTargetsRelative,Vu=0,Ou=Ru.count;Vu<Ou;Vu++)_vector$4.fromBufferAttribute(Ru,Vu),Bu&&(_offset.fromBufferAttribute(_u,Vu),_vector$4.add(_offset)),Lu=Math.max(Lu,Tu.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Lu),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var _u=this.index,$u=this.attributes;if($u.position){var Tu=$u.position.array;if($u.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(Tu.length),3));else for(var Cu=$u.normal.array,Pu=0,Ru=Cu.length;Pu<Ru;Pu++)Cu[Pu]=0;var Lu=$u.normal.array,Bu,Vu,Ou,Du=new Vector3,ku=new Vector3,Fu=new Vector3,Nu=new Vector3,Gu=new Vector3;if(_u)for(var zu=_u.array,Pu=0,Ru=_u.count;Pu<Ru;Pu+=3)Bu=zu[Pu+0]*3,Vu=zu[Pu+1]*3,Ou=zu[Pu+2]*3,Du.fromArray(Tu,Bu),ku.fromArray(Tu,Vu),Fu.fromArray(Tu,Ou),Nu.subVectors(Fu,ku),Gu.subVectors(Du,ku),Nu.cross(Gu),Lu[Bu]+=Nu.x,Lu[Bu+1]+=Nu.y,Lu[Bu+2]+=Nu.z,Lu[Vu]+=Nu.x,Lu[Vu+1]+=Nu.y,Lu[Vu+2]+=Nu.z,Lu[Ou]+=Nu.x,Lu[Ou+1]+=Nu.y,Lu[Ou+2]+=Nu.z;else for(var Pu=0,Ru=Tu.length;Pu<Ru;Pu+=9)Du.fromArray(Tu,Pu),ku.fromArray(Tu,Pu+3),Fu.fromArray(Tu,Pu+6),Nu.subVectors(Fu,ku),Gu.subVectors(Du,ku),Nu.cross(Gu),Lu[Pu]=Nu.x,Lu[Pu+1]=Nu.y,Lu[Pu+2]=Nu.z,Lu[Pu+3]=Nu.x,Lu[Pu+4]=Nu.y,Lu[Pu+5]=Nu.z,Lu[Pu+6]=Nu.x,Lu[Pu+7]=Nu.y,Lu[Pu+8]=Nu.z;this.normalizeNormals(),$u.normal.needsUpdate=!0}},merge:function(_u,$u){if(!(_u&&_u.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",_u);return}$u===void 0&&($u=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var Tu=this.attributes;for(var Cu in Tu)if(_u.attributes[Cu]!==void 0)for(var Pu=Tu[Cu],Ru=Pu.array,Lu=_u.attributes[Cu],Bu=Lu.array,Vu=Lu.itemSize*$u,Ou=Math.min(Bu.length,Ru.length-Vu),Du=0,ku=Vu;Du<Ou;Du++,ku++)Ru[ku]=Bu[Du];return this},normalizeNormals:function(){for(var _u=this.attributes.normal,$u=0,Tu=_u.count;$u<Tu;$u++)_vector$4.x=_u.getX($u),_vector$4.y=_u.getY($u),_vector$4.z=_u.getZ($u),_vector$4.normalize(),_u.setXYZ($u,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function _u(zu,Hu){for(var Uu=zu.array,ju=zu.itemSize,Wu=zu.normalized,Qu=new Uu.constructor(Hu.length*ju),qu=0,Yu=0,Ju=0,_d=Hu.length;Ju<_d;Ju++){qu=Hu[Ju]*ju;for(var tp=0;tp<ju;tp++)Qu[Yu++]=Uu[qu++]}return new BufferAttribute(Qu,ju,Wu)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var $u=new BufferGeometry,Tu=this.index.array,Cu=this.attributes;for(var Pu in Cu){var Ru=Cu[Pu],Lu=_u(Ru,Tu);$u.setAttribute(Pu,Lu)}var Bu=this.morphAttributes;for(Pu in Bu){for(var Vu=[],Ou=Bu[Pu],Du=0,ku=Ou.length;Du<ku;Du++){var Ru=Ou[Du],Lu=_u(Ru,Tu);Vu.push(Lu)}$u.morphAttributes[Pu]=Vu}$u.morphTargetsRelative=this.morphTargetsRelative;for(var Fu=this.groups,Du=0,Nu=Fu.length;Du<Nu;Du++){var Gu=Fu[Du];$u.addGroup(Gu.start,Gu.count,Gu.materialIndex)}return $u},toJSON:function(){var _u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),Object.keys(this.userData).length>0&&(_u.userData=this.userData),this.parameters!==void 0){var $u=this.parameters;for(var Tu in $u)$u[Tu]!==void 0&&(_u[Tu]=$u[Tu]);return _u}_u.data={attributes:{}};var Cu=this.index;Cu!==null&&(_u.data.index={type:Cu.array.constructor.name,array:Array.prototype.slice.call(Cu.array)});var Pu=this.attributes;for(var Tu in Pu){var Ru=Pu[Tu],Lu=Ru.toJSON();Ru.name!==""&&(Lu.name=Ru.name),_u.data.attributes[Tu]=Lu}var Bu={},Vu=!1;for(var Tu in this.morphAttributes){for(var Ou=this.morphAttributes[Tu],Du=[],ku=0,Fu=Ou.length;ku<Fu;ku++){var Ru=Ou[ku],Lu=Ru.toJSON();Ru.name!==""&&(Lu.name=Ru.name),Du.push(Lu)}Du.length>0&&(Bu[Tu]=Du,Vu=!0)}Vu&&(_u.data.morphAttributes=Bu,_u.data.morphTargetsRelative=this.morphTargetsRelative);var Nu=this.groups;Nu.length>0&&(_u.data.groups=JSON.parse(JSON.stringify(Nu)));var Gu=this.boundingSphere;return Gu!==null&&(_u.data.boundingSphere={center:Gu.center.toArray(),radius:Gu.radius}),_u},clone:function(){return new BufferGeometry().copy(this)},copy:function(_u){var $u,Tu,Cu;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Pu=_u.index;Pu!==null&&this.setIndex(Pu.clone());var Ru=_u.attributes;for($u in Ru){var Lu=Ru[$u];this.setAttribute($u,Lu.clone())}var Bu=_u.morphAttributes;for($u in Bu){var Vu=[],Ou=Bu[$u];for(Tu=0,Cu=Ou.length;Tu<Cu;Tu++)Vu.push(Ou[Tu].clone());this.morphAttributes[$u]=Vu}this.morphTargetsRelative=_u.morphTargetsRelative;var Du=_u.groups;for(Tu=0,Cu=Du.length;Tu<Cu;Tu++){var ku=Du[Tu];this.addGroup(ku.start,ku.count,ku.materialIndex)}var Fu=_u.boundingBox;Fu!==null&&(this.boundingBox=Fu.clone());var Nu=_u.boundingSphere;return Nu!==null&&(this.boundingSphere=Nu.clone()),this.drawRange.start=_u.drawRange.start,this.drawRange.count=_u.drawRange.count,this.userData=_u.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(_u,$u){Object3D.call(this),this.type="Mesh",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_u.morphTargetInfluences.slice()),_u.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_u.morphTargetDictionary)),this},updateMorphTargets:function(){var _u=this.geometry,$u,Tu,Cu;if(_u.isBufferGeometry){var Pu=_u.morphAttributes,Ru=Object.keys(Pu);if(Ru.length>0){var Lu=Pu[Ru[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Tu=Lu.length;$u<Tu;$u++)Cu=Lu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Cu]=$u}}else{var Bu=_u.morphTargets;Bu!==void 0&&Bu.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(_u,$u){var Tu=this.geometry,Cu=this.material,Pu=this.matrixWorld;if(Cu!==void 0&&(Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere.copy(Tu.boundingSphere),_sphere.applyMatrix4(Pu),_u.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Pu),_ray.copy(_u.ray).applyMatrix4(_inverseMatrix),!(Tu.boundingBox!==null&&_ray.intersectsBox(Tu.boundingBox)===!1)))){var Ru;if(Tu.isBufferGeometry){var Lu,Bu,Vu,Ou=Tu.index,Du=Tu.attributes.position,ku=Tu.morphAttributes.position,Fu=Tu.morphTargetsRelative,Nu=Tu.attributes.uv,Gu=Tu.attributes.uv2,zu=Tu.groups,Hu=Tu.drawRange,Uu,ju,Wu,Qu,qu,Yu,Ju,_d;if(Ou!==null)if(Array.isArray(Cu))for(Uu=0,Wu=zu.length;Uu<Wu;Uu++)for(qu=zu[Uu],Yu=Cu[qu.materialIndex],Ju=Math.max(qu.start,Hu.start),_d=Math.min(qu.start+qu.count,Hu.start+Hu.count),ju=Ju,Qu=_d;ju<Qu;ju+=3)Lu=Ou.getX(ju),Bu=Ou.getX(ju+1),Vu=Ou.getX(ju+2),Ru=checkBufferGeometryIntersection(this,Yu,_u,_ray,Du,ku,Fu,Nu,Gu,Lu,Bu,Vu),Ru&&(Ru.faceIndex=Math.floor(ju/3),Ru.face.materialIndex=qu.materialIndex,$u.push(Ru));else for(Ju=Math.max(0,Hu.start),_d=Math.min(Ou.count,Hu.start+Hu.count),Uu=Ju,Wu=_d;Uu<Wu;Uu+=3)Lu=Ou.getX(Uu),Bu=Ou.getX(Uu+1),Vu=Ou.getX(Uu+2),Ru=checkBufferGeometryIntersection(this,Cu,_u,_ray,Du,ku,Fu,Nu,Gu,Lu,Bu,Vu),Ru&&(Ru.faceIndex=Math.floor(Uu/3),$u.push(Ru));else if(Du!==void 0)if(Array.isArray(Cu))for(Uu=0,Wu=zu.length;Uu<Wu;Uu++)for(qu=zu[Uu],Yu=Cu[qu.materialIndex],Ju=Math.max(qu.start,Hu.start),_d=Math.min(qu.start+qu.count,Hu.start+Hu.count),ju=Ju,Qu=_d;ju<Qu;ju+=3)Lu=ju,Bu=ju+1,Vu=ju+2,Ru=checkBufferGeometryIntersection(this,Yu,_u,_ray,Du,ku,Fu,Nu,Gu,Lu,Bu,Vu),Ru&&(Ru.faceIndex=Math.floor(ju/3),Ru.face.materialIndex=qu.materialIndex,$u.push(Ru));else for(Ju=Math.max(0,Hu.start),_d=Math.min(Du.count,Hu.start+Hu.count),Uu=Ju,Wu=_d;Uu<Wu;Uu+=3)Lu=Uu,Bu=Uu+1,Vu=Uu+2,Ru=checkBufferGeometryIntersection(this,Cu,_u,_ray,Du,ku,Fu,Nu,Gu,Lu,Bu,Vu),Ru&&(Ru.faceIndex=Math.floor(Uu/3),$u.push(Ru))}else if(Tu.isGeometry){var tp,Ku,Xu,Zu=Array.isArray(Cu),_c=Tu.vertices,Xc=Tu.faces,_h,ip=Tu.faceVertexUvs[0];ip.length>0&&(_h=ip);for(var ap=0,hp=Xc.length;ap<hp;ap++){var Ap=Xc[ap],gp=Zu?Cu[Ap.materialIndex]:Cu;if(gp!==void 0&&(tp=_c[Ap.a],Ku=_c[Ap.b],Xu=_c[Ap.c],Ru=checkIntersection(this,gp,_u,_ray,tp,Ku,Xu,_intersectionPoint),Ru)){if(_h&&_h[ap]){var Rp=_h[ap];_uvA.copy(Rp[0]),_uvB.copy(Rp[1]),_uvC.copy(Rp[2]),Ru.uv=Triangle.getUV(_intersectionPoint,tp,Ku,Xu,_uvA,_uvB,_uvC,new Vector2)}Ru.face=Ap,Ru.faceIndex=ap,$u.push(Ru)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){var Vu;if($u.side===BackSide?Vu=Cu.intersectTriangle(Lu,Ru,Pu,!0,Bu):Vu=Cu.intersectTriangle(Pu,Ru,Lu,$u.side!==DoubleSide,Bu),Vu===null)return null;_intersectionPointWorld.copy(Bu),_intersectionPointWorld.applyMatrix4(_u.matrixWorld);var Ou=Tu.ray.origin.distanceTo(_intersectionPointWorld);return Ou<Tu.near||Ou>Tu.far?null:{distance:Ou,point:_intersectionPointWorld.clone(),object:_u}}function checkBufferGeometryIntersection(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku){_vA.fromBufferAttribute(Pu,Ou),_vB.fromBufferAttribute(Pu,Du),_vC.fromBufferAttribute(Pu,ku);var Fu=_u.morphTargetInfluences;if($u.morphTargets&&Ru&&Fu){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Nu=0,Gu=Ru.length;Nu<Gu;Nu++){var zu=Fu[Nu],Hu=Ru[Nu];zu!==0&&(_tempA.fromBufferAttribute(Hu,Ou),_tempB.fromBufferAttribute(Hu,Du),_tempC.fromBufferAttribute(Hu,ku),Lu?(_morphA.addScaledVector(_tempA,zu),_morphB.addScaledVector(_tempB,zu),_morphC.addScaledVector(_tempC,zu)):(_morphA.addScaledVector(_tempA.sub(_vA),zu),_morphB.addScaledVector(_tempB.sub(_vB),zu),_morphC.addScaledVector(_tempC.sub(_vC),zu)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}_u.isSkinnedMesh&&(_u.boneTransform(Ou,_vA),_u.boneTransform(Du,_vB),_u.boneTransform(ku,_vC));var Uu=checkIntersection(_u,$u,Tu,Cu,_vA,_vB,_vC,_intersectionPoint);if(Uu){Bu&&(_uvA.fromBufferAttribute(Bu,Ou),_uvB.fromBufferAttribute(Bu,Du),_uvC.fromBufferAttribute(Bu,ku),Uu.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Vu&&(_uvA.fromBufferAttribute(Vu,Ou),_uvB.fromBufferAttribute(Vu,Du),_uvC.fromBufferAttribute(Vu,ku),Uu.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var ju=new Face3(Ou,Du,ku);Triangle.getNormal(_vA,_vB,_vC,ju.normal),Uu.face=ju}return Uu}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(_u){for(var $u=new Matrix3().getNormalMatrix(_u),Tu=0,Cu=this.vertices.length;Tu<Cu;Tu++){var Pu=this.vertices[Tu];Pu.applyMatrix4(_u)}for(var Tu=0,Cu=this.faces.length;Tu<Cu;Tu++){var Ru=this.faces[Tu];Ru.normal.applyMatrix3($u).normalize();for(var Lu=0,Bu=Ru.vertexNormals.length;Lu<Bu;Lu++)Ru.vertexNormals[Lu].applyMatrix3($u).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(_u){return _m1$3.makeRotationX(_u),this.applyMatrix4(_m1$3),this},rotateY:function(_u){return _m1$3.makeRotationY(_u),this.applyMatrix4(_m1$3),this},rotateZ:function(_u){return _m1$3.makeRotationZ(_u),this.applyMatrix4(_m1$3),this},translate:function(_u,$u,Tu){return _m1$3.makeTranslation(_u,$u,Tu),this.applyMatrix4(_m1$3),this},scale:function(_u,$u,Tu){return _m1$3.makeScale(_u,$u,Tu),this.applyMatrix4(_m1$3),this},lookAt:function(_u){return _obj$1.lookAt(_u),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(_u){var $u=this,Tu=_u.index!==null?_u.index.array:void 0,Cu=_u.attributes;if(Cu.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Pu=Cu.position.array,Ru=Cu.normal!==void 0?Cu.normal.array:void 0,Lu=Cu.color!==void 0?Cu.color.array:void 0,Bu=Cu.uv!==void 0?Cu.uv.array:void 0,Vu=Cu.uv2!==void 0?Cu.uv2.array:void 0;Vu!==void 0&&(this.faceVertexUvs[1]=[]);for(var Ou=0;Ou<Pu.length;Ou+=3)$u.vertices.push(new Vector3().fromArray(Pu,Ou)),Lu!==void 0&&$u.colors.push(new Color().fromArray(Lu,Ou));function Du(Uu,ju,Wu,Qu){var qu=Lu===void 0?[]:[$u.colors[Uu].clone(),$u.colors[ju].clone(),$u.colors[Wu].clone()],Yu=Ru===void 0?[]:[new Vector3().fromArray(Ru,Uu*3),new Vector3().fromArray(Ru,ju*3),new Vector3().fromArray(Ru,Wu*3)],Ju=new Face3(Uu,ju,Wu,Yu,qu,Qu);$u.faces.push(Ju),Bu!==void 0&&$u.faceVertexUvs[0].push([new Vector2().fromArray(Bu,Uu*2),new Vector2().fromArray(Bu,ju*2),new Vector2().fromArray(Bu,Wu*2)]),Vu!==void 0&&$u.faceVertexUvs[1].push([new Vector2().fromArray(Vu,Uu*2),new Vector2().fromArray(Vu,ju*2),new Vector2().fromArray(Vu,Wu*2)])}var ku=_u.groups;if(ku.length>0)for(var Ou=0;Ou<ku.length;Ou++)for(var Fu=ku[Ou],Nu=Fu.start,Gu=Fu.count,zu=Nu,Hu=Nu+Gu;zu<Hu;zu+=3)Tu!==void 0?Du(Tu[zu],Tu[zu+1],Tu[zu+2],Fu.materialIndex):Du(zu,zu+1,zu+2,Fu.materialIndex);else if(Tu!==void 0)for(var Ou=0;Ou<Tu.length;Ou+=3)Du(Tu[Ou],Tu[Ou+1],Tu[Ou+2]);else for(var Ou=0;Ou<Pu.length/3;Ou+=3)Du(Ou,Ou+1,Ou+2);return this.computeFaceNormals(),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var _u=this.boundingSphere.center,$u=this.boundingSphere.radius,Tu=$u===0?1:1/$u,Cu=new Matrix4;return Cu.set(Tu,0,0,-Tu*_u.x,0,Tu,0,-Tu*_u.y,0,0,Tu,-Tu*_u.z,0,0,0,1),this.applyMatrix4(Cu),this},computeFaceNormals:function(){for(var _u=new Vector3,$u=new Vector3,Tu=0,Cu=this.faces.length;Tu<Cu;Tu++){var Pu=this.faces[Tu],Ru=this.vertices[Pu.a],Lu=this.vertices[Pu.b],Bu=this.vertices[Pu.c];_u.subVectors(Bu,Lu),$u.subVectors(Ru,Lu),_u.cross($u),_u.normalize(),Pu.normal.copy(_u)}},computeVertexNormals:function(_u){_u===void 0&&(_u=!0);var $u,Tu,Cu,Pu,Ru,Lu;for(Lu=new Array(this.vertices.length),$u=0,Tu=this.vertices.length;$u<Tu;$u++)Lu[$u]=new Vector3;if(_u){var Bu,Vu,Ou,Du=new Vector3,ku=new Vector3;for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)Ru=this.faces[Cu],Bu=this.vertices[Ru.a],Vu=this.vertices[Ru.b],Ou=this.vertices[Ru.c],Du.subVectors(Ou,Vu),ku.subVectors(Bu,Vu),Du.cross(ku),Lu[Ru.a].add(Du),Lu[Ru.b].add(Du),Lu[Ru.c].add(Du)}else for(this.computeFaceNormals(),Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)Ru=this.faces[Cu],Lu[Ru.a].add(Ru.normal),Lu[Ru.b].add(Ru.normal),Lu[Ru.c].add(Ru.normal);for($u=0,Tu=this.vertices.length;$u<Tu;$u++)Lu[$u].normalize();for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++){Ru=this.faces[Cu];var Fu=Ru.vertexNormals;Fu.length===3?(Fu[0].copy(Lu[Ru.a]),Fu[1].copy(Lu[Ru.b]),Fu[2].copy(Lu[Ru.c])):(Fu[0]=Lu[Ru.a].clone(),Fu[1]=Lu[Ru.b].clone(),Fu[2]=Lu[Ru.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var _u,$u,Tu;for(this.computeFaceNormals(),_u=0,$u=this.faces.length;_u<$u;_u++){Tu=this.faces[_u];var Cu=Tu.vertexNormals;Cu.length===3?(Cu[0].copy(Tu.normal),Cu[1].copy(Tu.normal),Cu[2].copy(Tu.normal)):(Cu[0]=Tu.normal.clone(),Cu[1]=Tu.normal.clone(),Cu[2]=Tu.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var _u,$u,Tu,Cu,Pu;for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)for(Pu=this.faces[Tu],Pu.__originalFaceNormal?Pu.__originalFaceNormal.copy(Pu.normal):Pu.__originalFaceNormal=Pu.normal.clone(),Pu.__originalVertexNormals||(Pu.__originalVertexNormals=[]),_u=0,$u=Pu.vertexNormals.length;_u<$u;_u++)Pu.__originalVertexNormals[_u]?Pu.__originalVertexNormals[_u].copy(Pu.vertexNormals[_u]):Pu.__originalVertexNormals[_u]=Pu.vertexNormals[_u].clone();var Ru=new Geometry;for(Ru.faces=this.faces,_u=0,$u=this.morphTargets.length;_u<$u;_u++){if(!this.morphNormals[_u]){this.morphNormals[_u]={},this.morphNormals[_u].faceNormals=[],this.morphNormals[_u].vertexNormals=[];var Lu=this.morphNormals[_u].faceNormals,Bu=this.morphNormals[_u].vertexNormals,Ou,Du;for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)Ou=new Vector3,Du={a:new Vector3,b:new Vector3,c:new Vector3},Lu.push(Ou),Bu.push(Du)}var Vu=this.morphNormals[_u];Ru.vertices=this.morphTargets[_u].vertices,Ru.computeFaceNormals(),Ru.computeVertexNormals();var Ou,Du;for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)Pu=this.faces[Tu],Ou=Vu.faceNormals[Tu],Du=Vu.vertexNormals[Tu],Ou.copy(Pu.normal),Du.a.copy(Pu.vertexNormals[0]),Du.b.copy(Pu.vertexNormals[1]),Du.c.copy(Pu.vertexNormals[2])}for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)Pu=this.faces[Tu],Pu.normal=Pu.__originalFaceNormal,Pu.vertexNormals=Pu.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(_u,$u,Tu){if(!(_u&&_u.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",_u);return}var Cu,Pu=this.vertices.length,Ru=this.vertices,Lu=_u.vertices,Bu=this.faces,Vu=_u.faces,Ou=this.colors,Du=_u.colors;Tu===void 0&&(Tu=0),$u!==void 0&&(Cu=new Matrix3().getNormalMatrix($u));for(var ku=0,Fu=Lu.length;ku<Fu;ku++){var Nu=Lu[ku],Gu=Nu.clone();$u!==void 0&&Gu.applyMatrix4($u),Ru.push(Gu)}for(var ku=0,Fu=Du.length;ku<Fu;ku++)Ou.push(Du[ku].clone());for(ku=0,Fu=Vu.length;ku<Fu;ku++){var zu=Vu[ku],Hu,Uu,ju,Wu=zu.vertexNormals,Qu=zu.vertexColors;Hu=new Face3(zu.a+Pu,zu.b+Pu,zu.c+Pu),Hu.normal.copy(zu.normal),Cu!==void 0&&Hu.normal.applyMatrix3(Cu).normalize();for(var qu=0,Yu=Wu.length;qu<Yu;qu++)Uu=Wu[qu].clone(),Cu!==void 0&&Uu.applyMatrix3(Cu).normalize(),Hu.vertexNormals.push(Uu);Hu.color.copy(zu.color);for(var qu=0,Yu=Qu.length;qu<Yu;qu++)ju=Qu[qu],Hu.vertexColors.push(ju.clone());Hu.materialIndex=zu.materialIndex+Tu,Bu.push(Hu)}for(var ku=0,Fu=_u.faceVertexUvs.length;ku<Fu;ku++){var Ju=_u.faceVertexUvs[ku];this.faceVertexUvs[ku]===void 0&&(this.faceVertexUvs[ku]=[]);for(var qu=0,Yu=Ju.length;qu<Yu;qu++){for(var _d=Ju[qu],tp=[],Ku=0,Xu=_d.length;Ku<Xu;Ku++)tp.push(_d[Ku].clone());this.faceVertexUvs[ku].push(tp)}}},mergeMesh:function(_u){if(!(_u&&_u.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",_u);return}_u.matrixAutoUpdate&&_u.updateMatrix(),this.merge(_u.geometry,_u.matrix)},mergeVertices:function(){var _u={},$u=[],Tu=[],Cu,Pu,Ru=4,Lu=Math.pow(10,Ru),Bu,Vu,Ou,Du,ku,Fu;for(Bu=0,Vu=this.vertices.length;Bu<Vu;Bu++)Cu=this.vertices[Bu],Pu=Math.round(Cu.x*Lu)+"_"+Math.round(Cu.y*Lu)+"_"+Math.round(Cu.z*Lu),_u[Pu]===void 0?(_u[Pu]=Bu,$u.push(this.vertices[Bu]),Tu[Bu]=$u.length-1):Tu[Bu]=Tu[_u[Pu]];var Nu=[];for(Bu=0,Vu=this.faces.length;Bu<Vu;Bu++){Ou=this.faces[Bu],Ou.a=Tu[Ou.a],Ou.b=Tu[Ou.b],Ou.c=Tu[Ou.c],Du=[Ou.a,Ou.b,Ou.c];for(var Gu=0;Gu<3;Gu++)if(Du[Gu]===Du[(Gu+1)%3]){Nu.push(Bu);break}}for(Bu=Nu.length-1;Bu>=0;Bu--){var zu=Nu[Bu];for(this.faces.splice(zu,1),ku=0,Fu=this.faceVertexUvs.length;ku<Fu;ku++)this.faceVertexUvs[ku].splice(zu,1)}var Hu=this.vertices.length-$u.length;return this.vertices=$u,Hu},setFromPoints:function(_u){this.vertices=[];for(var $u=0,Tu=_u.length;$u<Tu;$u++){var Cu=_u[$u];this.vertices.push(new Vector3(Cu.x,Cu.y,Cu.z||0))}return this},sortFacesByMaterialIndex:function(){for(var _u=this.faces,$u=_u.length,Tu=0;Tu<$u;Tu++)_u[Tu]._id=Tu;function Cu(Ou,Du){return Ou.materialIndex-Du.materialIndex}_u.sort(Cu);var Pu=this.faceVertexUvs[0],Ru=this.faceVertexUvs[1],Lu,Bu;Pu&&Pu.length===$u&&(Lu=[]),Ru&&Ru.length===$u&&(Bu=[]);for(var Tu=0;Tu<$u;Tu++){var Vu=_u[Tu]._id;Lu&&Lu.push(Pu[Vu]),Bu&&Bu.push(Ru[Vu])}Lu&&(this.faceVertexUvs[0]=Lu),Bu&&(this.faceVertexUvs[1]=Bu)},toJSON:function(){var _u={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),this.parameters!==void 0){var $u=this.parameters;for(var Tu in $u)$u[Tu]!==void 0&&(_u[Tu]=$u[Tu]);return _u}for(var Cu=[],Pu=0;Pu<this.vertices.length;Pu++){var Ru=this.vertices[Pu];Cu.push(Ru.x,Ru.y,Ru.z)}for(var Lu=[],Bu=[],Vu={},Ou=[],Du={},ku=[],Fu={},Pu=0;Pu<this.faces.length;Pu++){var Nu=this.faces[Pu],Gu=!0,zu=!1,Hu=this.faceVertexUvs[0][Pu]!==void 0,Uu=Nu.normal.length()>0,ju=Nu.vertexNormals.length>0,Wu=Nu.color.r!==1||Nu.color.g!==1||Nu.color.b!==1,Qu=Nu.vertexColors.length>0,qu=0;if(qu=tp(qu,0,0),qu=tp(qu,1,Gu),qu=tp(qu,2,zu),qu=tp(qu,3,Hu),qu=tp(qu,4,Uu),qu=tp(qu,5,ju),qu=tp(qu,6,Wu),qu=tp(qu,7,Qu),Lu.push(qu),Lu.push(Nu.a,Nu.b,Nu.c),Lu.push(Nu.materialIndex),Hu){var Yu=this.faceVertexUvs[0][Pu];Lu.push(Zu(Yu[0]),Zu(Yu[1]),Zu(Yu[2]))}if(Uu&&Lu.push(Ku(Nu.normal)),ju){var Ju=Nu.vertexNormals;Lu.push(Ku(Ju[0]),Ku(Ju[1]),Ku(Ju[2]))}if(Wu&&Lu.push(Xu(Nu.color)),Qu){var _d=Nu.vertexColors;Lu.push(Xu(_d[0]),Xu(_d[1]),Xu(_d[2]))}}function tp(_c,Xc,_h){return _h?_c|1<<Xc:_c&~(1<<Xc)}function Ku(_c){var Xc=_c.x.toString()+_c.y.toString()+_c.z.toString();return Vu[Xc]!==void 0||(Vu[Xc]=Bu.length/3,Bu.push(_c.x,_c.y,_c.z)),Vu[Xc]}function Xu(_c){var Xc=_c.r.toString()+_c.g.toString()+_c.b.toString();return Du[Xc]!==void 0||(Du[Xc]=Ou.length,Ou.push(_c.getHex())),Du[Xc]}function Zu(_c){var Xc=_c.x.toString()+_c.y.toString();return Fu[Xc]!==void 0||(Fu[Xc]=ku.length/2,ku.push(_c.x,_c.y)),Fu[Xc]}return _u.data={},_u.data.vertices=Cu,_u.data.normals=Bu,Ou.length>0&&(_u.data.colors=Ou),ku.length>0&&(_u.data.uvs=[ku]),_u.data.faces=Lu,_u},clone:function(){return new Geometry().copy(this)},copy:function(_u){var $u,Tu,Cu,Pu,Ru,Lu;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Bu=_u.vertices;for($u=0,Tu=Bu.length;$u<Tu;$u++)this.vertices.push(Bu[$u].clone());var Vu=_u.colors;for($u=0,Tu=Vu.length;$u<Tu;$u++)this.colors.push(Vu[$u].clone());var Ou=_u.faces;for($u=0,Tu=Ou.length;$u<Tu;$u++)this.faces.push(Ou[$u].clone());for($u=0,Tu=_u.faceVertexUvs.length;$u<Tu;$u++){var Du=_u.faceVertexUvs[$u];for(this.faceVertexUvs[$u]===void 0&&(this.faceVertexUvs[$u]=[]),Cu=0,Pu=Du.length;Cu<Pu;Cu++){var ku=Du[Cu],Fu=[];for(Ru=0,Lu=ku.length;Ru<Lu;Ru++){var Nu=ku[Ru];Fu.push(Nu.clone())}this.faceVertexUvs[$u].push(Fu)}}var Gu=_u.morphTargets;for($u=0,Tu=Gu.length;$u<Tu;$u++){var zu={};if(zu.name=Gu[$u].name,Gu[$u].vertices!==void 0)for(zu.vertices=[],Cu=0,Pu=Gu[$u].vertices.length;Cu<Pu;Cu++)zu.vertices.push(Gu[$u].vertices[Cu].clone());if(Gu[$u].normals!==void 0)for(zu.normals=[],Cu=0,Pu=Gu[$u].normals.length;Cu<Pu;Cu++)zu.normals.push(Gu[$u].normals[Cu].clone());this.morphTargets.push(zu)}var Hu=_u.morphNormals;for($u=0,Tu=Hu.length;$u<Tu;$u++){var Uu={};if(Hu[$u].vertexNormals!==void 0)for(Uu.vertexNormals=[],Cu=0,Pu=Hu[$u].vertexNormals.length;Cu<Pu;Cu++){var ju=Hu[$u].vertexNormals[Cu],Wu={};Wu.a=ju.a.clone(),Wu.b=ju.b.clone(),Wu.c=ju.c.clone(),Uu.vertexNormals.push(Wu)}if(Hu[$u].faceNormals!==void 0)for(Uu.faceNormals=[],Cu=0,Pu=Hu[$u].faceNormals.length;Cu<Pu;Cu++)Uu.faceNormals.push(Hu[$u].faceNormals[Cu].clone());this.morphNormals.push(Uu)}var Qu=_u.skinWeights;for($u=0,Tu=Qu.length;$u<Tu;$u++)this.skinWeights.push(Qu[$u].clone());var qu=_u.skinIndices;for($u=0,Tu=qu.length;$u<Tu;$u++)this.skinIndices.push(qu[$u].clone());var Yu=_u.lineDistances;for($u=0,Tu=Yu.length;$u<Tu;$u++)this.lineDistances.push(Yu[$u]);var Ju=_u.boundingBox;Ju!==null&&(this.boundingBox=Ju.clone());var _d=_u.boundingSphere;return _d!==null&&(this.boundingSphere=_d.clone()),this.elementsNeedUpdate=_u.elementsNeedUpdate,this.verticesNeedUpdate=_u.verticesNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.lineDistancesNeedUpdate=_u.lineDistancesNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor($u,Tu,Cu,Pu,Ru,Lu){super(),this.type="BoxGeometry",this.parameters={width:$u,height:Tu,depth:Cu,widthSegments:Pu,heightSegments:Ru,depthSegments:Lu},this.fromBufferGeometry(new BoxBufferGeometry($u,Tu,Cu,Pu,Ru,Lu)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor($u,Tu,Cu,Pu,Ru,Lu){super(),this.type="BoxBufferGeometry",this.parameters={width:$u,height:Tu,depth:Cu,widthSegments:Pu,heightSegments:Ru,depthSegments:Lu};const Bu=this;$u=$u||1,Tu=Tu||1,Cu=Cu||1,Pu=Math.floor(Pu)||1,Ru=Math.floor(Ru)||1,Lu=Math.floor(Lu)||1;const Vu=[],Ou=[],Du=[],ku=[];let Fu=0,Nu=0;Gu("z","y","x",-1,-1,Cu,Tu,$u,Lu,Ru,0),Gu("z","y","x",1,-1,Cu,Tu,-$u,Lu,Ru,1),Gu("x","z","y",1,1,$u,Cu,Tu,Pu,Lu,2),Gu("x","z","y",1,-1,$u,Cu,-Tu,Pu,Lu,3),Gu("x","y","z",1,-1,$u,Tu,Cu,Pu,Ru,4),Gu("x","y","z",-1,-1,$u,Tu,-Cu,Pu,Ru,5),this.setIndex(Vu),this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("normal",new Float32BufferAttribute(Du,3)),this.setAttribute("uv",new Float32BufferAttribute(ku,2));function Gu(zu,Hu,Uu,ju,Wu,Qu,qu,Yu,Ju,_d,tp){const Ku=Qu/Ju,Xu=qu/_d,Zu=Qu/2,_c=qu/2,Xc=Yu/2,_h=Ju+1,ip=_d+1;let ap=0,hp=0;const Ap=new Vector3;for(let gp=0;gp<ip;gp++){const Rp=gp*Xu-_c;for(let Sp=0;Sp<_h;Sp++){const Dp=Sp*Ku-Zu;Ap[zu]=Dp*ju,Ap[Hu]=Rp*Wu,Ap[Uu]=Xc,Ou.push(Ap.x,Ap.y,Ap.z),Ap[zu]=0,Ap[Hu]=0,Ap[Uu]=Yu>0?1:-1,Du.push(Ap.x,Ap.y,Ap.z),ku.push(Sp/Ju),ku.push(1-gp/_d),ap+=1}}for(let gp=0;gp<_d;gp++)for(let Rp=0;Rp<Ju;Rp++){const Sp=Fu+Rp+_h*gp,Dp=Fu+Rp+_h*(gp+1),Ep=Fu+(Rp+1)+_h*(gp+1),Bp=Fu+(Rp+1)+_h*gp;Vu.push(Sp,Dp,Bp),Vu.push(Dp,Ep,Bp),hp+=6}Bu.addGroup(Nu,hp,tp),Nu+=hp,Fu+=ap}}}function cloneUniforms(_u){var $u={};for(var Tu in _u){$u[Tu]={};for(var Cu in _u[Tu]){var Pu=_u[Tu][Cu];Pu&&(Pu.isColor||Pu.isMatrix3||Pu.isMatrix4||Pu.isVector2||Pu.isVector3||Pu.isVector4||Pu.isTexture)?$u[Tu][Cu]=Pu.clone():Array.isArray(Pu)?$u[Tu][Cu]=Pu.slice():$u[Tu][Cu]=Pu}}return $u}function mergeUniforms(_u){for(var $u={},Tu=0;Tu<_u.length;Tu++){var Cu=cloneUniforms(_u[Tu]);for(var Pu in Cu)$u[Pu]=Cu[Pu]}return $u}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(_u){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,_u!==void 0&&(_u.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(_u))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.fragmentShader=_u.fragmentShader,this.vertexShader=_u.vertexShader,this.uniforms=cloneUniforms(_u.uniforms),this.defines=Object.assign({},_u.defines),this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.lights=_u.lights,this.clipping=_u.clipping,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.extensions=Object.assign({},_u.extensions),this};ShaderMaterial.prototype.toJSON=function(_u){var $u=Material.prototype.toJSON.call(this,_u);$u.uniforms={};for(var Tu in this.uniforms){var Cu=this.uniforms[Tu],Pu=Cu.value;Pu&&Pu.isTexture?$u.uniforms[Tu]={type:"t",value:Pu.toJSON(_u).uuid}:Pu&&Pu.isColor?$u.uniforms[Tu]={type:"c",value:Pu.getHex()}:Pu&&Pu.isVector2?$u.uniforms[Tu]={type:"v2",value:Pu.toArray()}:Pu&&Pu.isVector3?$u.uniforms[Tu]={type:"v3",value:Pu.toArray()}:Pu&&Pu.isVector4?$u.uniforms[Tu]={type:"v4",value:Pu.toArray()}:Pu&&Pu.isMatrix3?$u.uniforms[Tu]={type:"m3",value:Pu.toArray()}:Pu&&Pu.isMatrix4?$u.uniforms[Tu]={type:"m4",value:Pu.toArray()}:$u.uniforms[Tu]={value:Pu}}Object.keys(this.defines).length>0&&($u.defines=this.defines),$u.vertexShader=this.vertexShader,$u.fragmentShader=this.fragmentShader;var Ru={};for(var Lu in this.extensions)this.extensions[Lu]===!0&&(Ru[Lu]=!0);return Object.keys(Ru).length>0&&($u.extensions=Ru),$u};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),this.matrixWorldInverse.copy(_u.matrixWorldInverse),this.projectionMatrix.copy(_u.projectionMatrix),this.projectionMatrixInverse.copy(_u.projectionMatrixInverse),this},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set(-$u[8],-$u[9],-$u[10]).normalize()},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(_u,$u){Object3D.prototype.updateWorldMatrix.call(this,_u,$u),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(_u,$u,Tu,Cu){Camera.call(this),this.type="PerspectiveCamera",this.fov=_u!==void 0?_u:50,this.zoom=1,this.near=Tu!==void 0?Tu:.1,this.far=Cu!==void 0?Cu:2e3,this.focus=10,this.aspect=$u!==void 0?$u:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.fov=_u.fov,this.zoom=_u.zoom,this.near=_u.near,this.far=_u.far,this.focus=_u.focus,this.aspect=_u.aspect,this.view=_u.view===null?null:Object.assign({},_u.view),this.filmGauge=_u.filmGauge,this.filmOffset=_u.filmOffset,this},setFocalLength:function(_u){var $u=.5*this.getFilmHeight()/_u;this.fov=MathUtils.RAD2DEG*2*Math.atan($u),this.updateProjectionMatrix()},getFocalLength:function(){var _u=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_u},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(_u,$u,Tu,Cu,Pu,Ru){this.aspect=_u/$u,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Tu,this.view.offsetY=Cu,this.view.width=Pu,this.view.height=Ru,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=this.near,$u=_u*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,Tu=2*$u,Cu=this.aspect*Tu,Pu=-.5*Cu,Ru=this.view;if(this.view!==null&&this.view.enabled){var Lu=Ru.fullWidth,Bu=Ru.fullHeight;Pu+=Ru.offsetX*Cu/Lu,$u-=Ru.offsetY*Tu/Bu,Cu*=Ru.width/Lu,Tu*=Ru.height/Bu}var Vu=this.filmOffset;Vu!==0&&(Pu+=_u*Vu/this.getFilmWidth()),this.projectionMatrix.makePerspective(Pu,Pu+Cu,$u,$u-Tu,_u,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.fov=this.fov,$u.object.zoom=this.zoom,$u.object.near=this.near,$u.object.far=this.far,$u.object.focus=this.focus,$u.object.aspect=this.aspect,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u.object.filmGauge=this.filmGauge,$u.object.filmOffset=this.filmOffset,$u}});var fov=90,aspect=1;function CubeCamera(_u,$u,Tu){if(Object3D.call(this),this.type="CubeCamera",Tu.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=Tu;var Cu=new PerspectiveCamera(fov,aspect,_u,$u);Cu.layers=this.layers,Cu.up.set(0,-1,0),Cu.lookAt(new Vector3(1,0,0)),this.add(Cu);var Pu=new PerspectiveCamera(fov,aspect,_u,$u);Pu.layers=this.layers,Pu.up.set(0,-1,0),Pu.lookAt(new Vector3(-1,0,0)),this.add(Pu);var Ru=new PerspectiveCamera(fov,aspect,_u,$u);Ru.layers=this.layers,Ru.up.set(0,0,1),Ru.lookAt(new Vector3(0,1,0)),this.add(Ru);var Lu=new PerspectiveCamera(fov,aspect,_u,$u);Lu.layers=this.layers,Lu.up.set(0,0,-1),Lu.lookAt(new Vector3(0,-1,0)),this.add(Lu);var Bu=new PerspectiveCamera(fov,aspect,_u,$u);Bu.layers=this.layers,Bu.up.set(0,-1,0),Bu.lookAt(new Vector3(0,0,1)),this.add(Bu);var Vu=new PerspectiveCamera(fov,aspect,_u,$u);Vu.layers=this.layers,Vu.up.set(0,-1,0),Vu.lookAt(new Vector3(0,0,-1)),this.add(Vu),this.update=function(Ou,Du){this.parent===null&&this.updateMatrixWorld();var ku=Ou.xr.enabled,Fu=Ou.getRenderTarget();Ou.xr.enabled=!1;var Nu=Tu.texture.generateMipmaps;Tu.texture.generateMipmaps=!1,Ou.setRenderTarget(Tu,0),Ou.render(Du,Cu),Ou.setRenderTarget(Tu,1),Ou.render(Du,Pu),Ou.setRenderTarget(Tu,2),Ou.render(Du,Ru),Ou.setRenderTarget(Tu,3),Ou.render(Du,Lu),Ou.setRenderTarget(Tu,4),Ou.render(Du,Bu),Tu.texture.generateMipmaps=Nu,Ou.setRenderTarget(Tu,5),Ou.render(Du,Vu),Ou.setRenderTarget(Fu),Ou.xr.enabled=ku},this.clear=function(Ou,Du,ku,Fu){for(var Nu=Ou.getRenderTarget(),Gu=0;Gu<6;Gu++)Ou.setRenderTarget(Tu,Gu),Ou.clear(Du,ku,Fu);Ou.setRenderTarget(Nu)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(_u,$u,Tu){Number.isInteger($u)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),$u=Tu),WebGLRenderTarget.call(this,_u,_u,$u)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(_u,$u){this.texture.type=$u.type,this.texture.format=$u.format,this.texture.encoding=$u.encoding;var Tu=new Scene,Cu={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Pu=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Cu.uniforms),vertexShader:Cu.vertexShader,fragmentShader:Cu.fragmentShader,side:BackSide,blending:NoBlending});Pu.uniforms.tEquirect.value=$u;var Ru=new Mesh(new BoxBufferGeometry(5,5,5),Pu);Tu.add(Ru);var Lu=new CubeCamera(1,10,this);return Lu.update(_u,Tu),Ru.geometry.dispose(),Ru.material.dispose(),this};function DataTexture(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku){Texture.call(this,null,Ru,Lu,Bu,Vu,Ou,Cu,Pu,Du,ku),this.image={data:_u||null,width:$u||1,height:Tu||1},this.magFilter=Vu!==void 0?Vu:NearestFilter,this.minFilter=Ou!==void 0?Ou:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(_u,$u,Tu,Cu,Pu,Ru){this.planes=[_u!==void 0?_u:new Plane,$u!==void 0?$u:new Plane,Tu!==void 0?Tu:new Plane,Cu!==void 0?Cu:new Plane,Pu!==void 0?Pu:new Plane,Ru!==void 0?Ru:new Plane]}Object.assign(Frustum.prototype,{set:function(_u,$u,Tu,Cu,Pu,Ru){var Lu=this.planes;return Lu[0].copy(_u),Lu[1].copy($u),Lu[2].copy(Tu),Lu[3].copy(Cu),Lu[4].copy(Pu),Lu[5].copy(Ru),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){for(var $u=this.planes,Tu=0;Tu<6;Tu++)$u[Tu].copy(_u.planes[Tu]);return this},setFromProjectionMatrix:function(_u){var $u=this.planes,Tu=_u.elements,Cu=Tu[0],Pu=Tu[1],Ru=Tu[2],Lu=Tu[3],Bu=Tu[4],Vu=Tu[5],Ou=Tu[6],Du=Tu[7],ku=Tu[8],Fu=Tu[9],Nu=Tu[10],Gu=Tu[11],zu=Tu[12],Hu=Tu[13],Uu=Tu[14],ju=Tu[15];return $u[0].setComponents(Lu-Cu,Du-Bu,Gu-ku,ju-zu).normalize(),$u[1].setComponents(Lu+Cu,Du+Bu,Gu+ku,ju+zu).normalize(),$u[2].setComponents(Lu+Pu,Du+Vu,Gu+Fu,ju+Hu).normalize(),$u[3].setComponents(Lu-Pu,Du-Vu,Gu-Fu,ju-Hu).normalize(),$u[4].setComponents(Lu-Ru,Du-Ou,Gu-Nu,ju-Uu).normalize(),$u[5].setComponents(Lu+Ru,Du+Ou,Gu+Nu,ju+Uu).normalize(),this},intersectsObject:function(_u){var $u=_u.geometry;return $u.boundingSphere===null&&$u.computeBoundingSphere(),_sphere$1.copy($u.boundingSphere).applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(_u){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(_u){for(var $u=this.planes,Tu=_u.center,Cu=-_u.radius,Pu=0;Pu<6;Pu++){var Ru=$u[Pu].distanceToPoint(Tu);if(Ru<Cu)return!1}return!0},intersectsBox:function(_u){for(var $u=this.planes,Tu=0;Tu<6;Tu++){var Cu=$u[Tu];if(_vector$5.x=Cu.normal.x>0?_u.max.x:_u.min.x,_vector$5.y=Cu.normal.y>0?_u.max.y:_u.min.y,_vector$5.z=Cu.normal.z>0?_u.max.z:_u.min.z,Cu.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(_u){for(var $u=this.planes,Tu=0;Tu<6;Tu++)if($u[Tu].distanceToPoint(_u)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var _u=null,$u=!1,Tu=null;function Cu(Pu,Ru){$u!==!1&&(Tu(Pu,Ru),_u.requestAnimationFrame(Cu))}return{start:function(){$u!==!0&&Tu!==null&&(_u.requestAnimationFrame(Cu),$u=!0)},stop:function(){$u=!1},setAnimationLoop:function(Pu){Tu=Pu},setContext:function(Pu){_u=Pu}}}function WebGLAttributes(_u,$u){var Tu=$u.isWebGL2,Cu=new WeakMap;function Pu(Ou,Du){var ku=Ou.array,Fu=Ou.usage,Nu=_u.createBuffer();_u.bindBuffer(Du,Nu),_u.bufferData(Du,ku,Fu),Ou.onUploadCallback();var Gu=5126;return ku instanceof Float32Array?Gu=5126:ku instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):ku instanceof Uint16Array?Gu=5123:ku instanceof Int16Array?Gu=5122:ku instanceof Uint32Array?Gu=5125:ku instanceof Int32Array?Gu=5124:ku instanceof Int8Array?Gu=5120:ku instanceof Uint8Array&&(Gu=5121),{buffer:Nu,type:Gu,bytesPerElement:ku.BYTES_PER_ELEMENT,version:Ou.version}}function Ru(Ou,Du,ku){var Fu=Du.array,Nu=Du.updateRange;_u.bindBuffer(ku,Ou),Nu.count===-1?_u.bufferSubData(ku,0,Fu):(Tu?_u.bufferSubData(ku,Nu.offset*Fu.BYTES_PER_ELEMENT,Fu,Nu.offset,Nu.count):_u.bufferSubData(ku,Nu.offset*Fu.BYTES_PER_ELEMENT,Fu.subarray(Nu.offset,Nu.offset+Nu.count)),Nu.count=-1)}function Lu(Ou){return Ou.isInterleavedBufferAttribute&&(Ou=Ou.data),Cu.get(Ou)}function Bu(Ou){Ou.isInterleavedBufferAttribute&&(Ou=Ou.data);var Du=Cu.get(Ou);Du&&(_u.deleteBuffer(Du.buffer),Cu.delete(Ou))}function Vu(Ou,Du){Ou.isInterleavedBufferAttribute&&(Ou=Ou.data);var ku=Cu.get(Ou);ku===void 0?Cu.set(Ou,Pu(Ou,Du)):ku.version<Ou.version&&(Ru(ku.buffer,Ou,Du),ku.version=Ou.version)}return{get:Lu,remove:Bu,update:Vu}}function PlaneGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:_u,height:$u,widthSegments:Tu,heightSegments:Cu},this.fromBufferGeometry(new PlaneBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:_u,height:$u,widthSegments:Tu,heightSegments:Cu},_u=_u||1,$u=$u||1;var Pu=_u/2,Ru=$u/2,Lu=Math.floor(Tu)||1,Bu=Math.floor(Cu)||1,Vu=Lu+1,Ou=Bu+1,Du=_u/Lu,ku=$u/Bu,Fu,Nu,Gu=[],zu=[],Hu=[],Uu=[];for(Nu=0;Nu<Ou;Nu++){var ju=Nu*ku-Ru;for(Fu=0;Fu<Vu;Fu++){var Wu=Fu*Du-Pu;zu.push(Wu,-ju,0),Hu.push(0,0,1),Uu.push(Fu/Lu),Uu.push(1-Nu/Bu)}}for(Nu=0;Nu<Bu;Nu++)for(Fu=0;Fu<Lu;Fu++){var Qu=Fu+Vu*Nu,qu=Fu+Vu*(Nu+1),Yu=Fu+1+Vu*(Nu+1),Ju=Fu+1+Vu*Nu;Gu.push(Qu,qu,Ju),Gu.push(qu,Yu,Ju)}this.setIndex(Gu),this.setAttribute("position",new Float32BufferAttribute(zu,3)),this.setAttribute("normal",new Float32BufferAttribute(Hu,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(_u,$u,Tu,Cu){var Pu=new Color(0),Ru=0,Lu,Bu,Vu=null,Ou=0,Du=null;function ku(Nu,Gu,zu,Hu){var Uu=Gu.background,ju=_u.xr,Wu=ju.getSession&&ju.getSession();if(Wu&&Wu.environmentBlendMode==="additive"&&(Uu=null),Uu===null?Fu(Pu,Ru):Uu&&Uu.isColor&&(Fu(Uu,1),Hu=!0),(_u.autoClear||Hu)&&_u.clear(_u.autoClearColor,_u.autoClearDepth,_u.autoClearStencil),Uu&&(Uu.isCubeTexture||Uu.isWebGLCubeRenderTarget||Uu.mapping===CubeUVReflectionMapping)){Bu===void 0&&(Bu=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Bu.geometry.deleteAttribute("normal"),Bu.geometry.deleteAttribute("uv"),Bu.onBeforeRender=function(qu,Yu,Ju){this.matrixWorld.copyPosition(Ju.matrixWorld)},Object.defineProperty(Bu.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Tu.update(Bu));var Qu=Uu.isWebGLCubeRenderTarget?Uu.texture:Uu;Bu.material.uniforms.envMap.value=Qu,Bu.material.uniforms.flipEnvMap.value=Qu.isCubeTexture?-1:1,(Vu!==Uu||Ou!==Qu.version||Du!==_u.toneMapping)&&(Bu.material.needsUpdate=!0,Vu=Uu,Ou=Qu.version,Du=_u.toneMapping),Nu.unshift(Bu,Bu.geometry,Bu.material,0,0,null)}else Uu&&Uu.isTexture&&(Lu===void 0&&(Lu=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Lu.geometry.deleteAttribute("normal"),Object.defineProperty(Lu.material,"map",{get:function(){return this.uniforms.t2D.value}}),Tu.update(Lu)),Lu.material.uniforms.t2D.value=Uu,Uu.matrixAutoUpdate===!0&&Uu.updateMatrix(),Lu.material.uniforms.uvTransform.value.copy(Uu.matrix),(Vu!==Uu||Ou!==Uu.version||Du!==_u.toneMapping)&&(Lu.material.needsUpdate=!0,Vu=Uu,Ou=Uu.version,Du=_u.toneMapping),Nu.unshift(Lu,Lu.geometry,Lu.material,0,0,null))}function Fu(Nu,Gu){$u.buffers.color.setClear(Nu.r,Nu.g,Nu.b,Gu,Cu)}return{getClearColor:function(){return Pu},setClearColor:function(Nu,Gu){Pu.set(Nu),Ru=Gu!==void 0?Gu:1,Fu(Pu,Ru)},getClearAlpha:function(){return Ru},setClearAlpha:function(Nu){Ru=Nu,Fu(Pu,Ru)},render:ku}}function WebGLBufferRenderer(_u,$u,Tu,Cu){var Pu=Cu.isWebGL2,Ru;function Lu(Ou){Ru=Ou}function Bu(Ou,Du){_u.drawArrays(Ru,Ou,Du),Tu.update(Du,Ru)}function Vu(Ou,Du,ku,Fu){if(Fu!==0){var Nu,Gu;if(Pu)Nu=_u,Gu="drawArraysInstanced";else if(Nu=$u.get("ANGLE_instanced_arrays"),Gu="drawArraysInstancedANGLE",Nu===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Nu[Gu](Ru,Du,ku,Fu),Tu.update(ku,Ru,Fu)}}this.setMode=Lu,this.render=Bu,this.renderInstances=Vu}function WebGLCapabilities(_u,$u,Tu){var Cu;function Pu(){if(Cu!==void 0)return Cu;var Yu=$u.get("EXT_texture_filter_anisotropic");return Yu!==null?Cu=_u.getParameter(Yu.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Cu=0,Cu}function Ru(Yu){if(Yu==="highp"){if(_u.getShaderPrecisionFormat(35633,36338).precision>0&&_u.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Yu="mediump"}return Yu==="mediump"&&_u.getShaderPrecisionFormat(35633,36337).precision>0&&_u.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Lu=typeof WebGL2RenderingContext!="undefined"&&_u instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&_u instanceof WebGL2ComputeRenderingContext,Bu=Tu.precision!==void 0?Tu.precision:"highp",Vu=Ru(Bu);Vu!==Bu&&(console.warn("THREE.WebGLRenderer:",Bu,"not supported, using",Vu,"instead."),Bu=Vu);var Ou=Tu.logarithmicDepthBuffer===!0,Du=_u.getParameter(34930),ku=_u.getParameter(35660),Fu=_u.getParameter(3379),Nu=_u.getParameter(34076),Gu=_u.getParameter(34921),zu=_u.getParameter(36347),Hu=_u.getParameter(36348),Uu=_u.getParameter(36349),ju=ku>0,Wu=Lu||!!$u.get("OES_texture_float"),Qu=ju&&Wu,qu=Lu?_u.getParameter(36183):0;return{isWebGL2:Lu,getMaxAnisotropy:Pu,getMaxPrecision:Ru,precision:Bu,logarithmicDepthBuffer:Ou,maxTextures:Du,maxVertexTextures:ku,maxTextureSize:Fu,maxCubemapSize:Nu,maxAttributes:Gu,maxVertexUniforms:zu,maxVaryings:Hu,maxFragmentUniforms:Uu,vertexTextures:ju,floatFragmentTextures:Wu,floatVertexTextures:Qu,maxSamples:qu}}function WebGLClipping(){var _u=this,$u=null,Tu=0,Cu=!1,Pu=!1,Ru=new Plane,Lu=new Matrix3,Bu={value:null,needsUpdate:!1};this.uniform=Bu,this.numPlanes=0,this.numIntersection=0,this.init=function(Du,ku,Fu){var Nu=Du.length!==0||ku||Tu!==0||Cu;return Cu=ku,$u=Ou(Du,Fu,0),Tu=Du.length,Nu},this.beginShadows=function(){Pu=!0,Ou(null)},this.endShadows=function(){Pu=!1,Vu()},this.setState=function(Du,ku,Fu,Nu,Gu,zu){if(!Cu||Du===null||Du.length===0||Pu&&!Fu)Pu?Ou(null):Vu();else{var Hu=Pu?0:Tu,Uu=Hu*4,ju=Gu.clippingState||null;Bu.value=ju,ju=Ou(Du,Nu,Uu,zu);for(var Wu=0;Wu!==Uu;++Wu)ju[Wu]=$u[Wu];Gu.clippingState=ju,this.numIntersection=ku?this.numPlanes:0,this.numPlanes+=Hu}};function Vu(){Bu.value!==$u&&(Bu.value=$u,Bu.needsUpdate=Tu>0),_u.numPlanes=Tu,_u.numIntersection=0}function Ou(Du,ku,Fu,Nu){var Gu=Du!==null?Du.length:0,zu=null;if(Gu!==0){if(zu=Bu.value,Nu!==!0||zu===null){var Hu=Fu+Gu*4,Uu=ku.matrixWorldInverse;Lu.getNormalMatrix(Uu),(zu===null||zu.length<Hu)&&(zu=new Float32Array(Hu));for(var ju=0,Wu=Fu;ju!==Gu;++ju,Wu+=4)Ru.copy(Du[ju]).applyMatrix4(Uu,Lu),Ru.normal.toArray(zu,Wu),zu[Wu+3]=Ru.constant}Bu.value=zu,Bu.needsUpdate=!0}return _u.numPlanes=Gu,_u.numIntersection=0,zu}}function WebGLExtensions(_u){var $u={};return{get:function(Tu){if($u[Tu]!==void 0)return $u[Tu];var Cu;switch(Tu){case"WEBGL_depth_texture":Cu=_u.getExtension("WEBGL_depth_texture")||_u.getExtension("MOZ_WEBGL_depth_texture")||_u.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Cu=_u.getExtension("EXT_texture_filter_anisotropic")||_u.getExtension("MOZ_EXT_texture_filter_anisotropic")||_u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Cu=_u.getExtension("WEBGL_compressed_texture_s3tc")||_u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Cu=_u.getExtension("WEBGL_compressed_texture_pvrtc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Cu=_u.getExtension(Tu)}return Cu===null&&console.warn("THREE.WebGLRenderer: "+Tu+" extension not supported."),$u[Tu]=Cu,Cu}}}function WebGLGeometries(_u,$u,Tu){var Cu=new WeakMap,Pu=new WeakMap;function Ru(Du){var ku=Du.target,Fu=Cu.get(ku);Fu.index!==null&&$u.remove(Fu.index);for(var Nu in Fu.attributes)$u.remove(Fu.attributes[Nu]);ku.removeEventListener("dispose",Ru),Cu.delete(ku);var Gu=Pu.get(Fu);Gu&&($u.remove(Gu),Pu.delete(Fu)),Tu.memory.geometries--}function Lu(Du,ku){var Fu=Cu.get(ku);return Fu||(ku.addEventListener("dispose",Ru),ku.isBufferGeometry?Fu=ku:ku.isGeometry&&(ku._bufferGeometry===void 0&&(ku._bufferGeometry=new BufferGeometry().setFromObject(Du)),Fu=ku._bufferGeometry),Cu.set(ku,Fu),Tu.memory.geometries++,Fu)}function Bu(Du){var ku=Du.index,Fu=Du.attributes;ku!==null&&$u.update(ku,34963);for(var Nu in Fu)$u.update(Fu[Nu],34962);var Gu=Du.morphAttributes;for(var Nu in Gu)for(var zu=Gu[Nu],Hu=0,Uu=zu.length;Hu<Uu;Hu++)$u.update(zu[Hu],34962)}function Vu(Du){var ku=[],Fu=Du.index,Nu=Du.attributes.position,Gu=0;if(Fu!==null){var zu=Fu.array;Gu=Fu.version;for(var Hu=0,Uu=zu.length;Hu<Uu;Hu+=3){var ju=zu[Hu+0],Wu=zu[Hu+1],Qu=zu[Hu+2];ku.push(ju,Wu,Wu,Qu,Qu,ju)}}else{var zu=Nu.array;Gu=Nu.version;for(var Hu=0,Uu=zu.length/3-1;Hu<Uu;Hu+=3){var ju=Hu+0,Wu=Hu+1,Qu=Hu+2;ku.push(ju,Wu,Wu,Qu,Qu,ju)}}var qu=new(arrayMax(ku)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(ku,1);qu.version=Gu,$u.update(qu,34963);var Yu=Pu.get(Du);Yu&&$u.remove(Yu),Pu.set(Du,qu)}function Ou(Du){var ku=Pu.get(Du);if(ku){var Fu=Du.index;Fu!==null&&ku.version<Fu.version&&Vu(Du)}else Vu(Du);return Pu.get(Du)}return{get:Lu,update:Bu,getWireframeAttribute:Ou}}function WebGLIndexedBufferRenderer(_u,$u,Tu,Cu){var Pu=Cu.isWebGL2,Ru;function Lu(Fu){Ru=Fu}var Bu,Vu;function Ou(Fu){Bu=Fu.type,Vu=Fu.bytesPerElement}function Du(Fu,Nu){_u.drawElements(Ru,Nu,Bu,Fu*Vu),Tu.update(Nu,Ru)}function ku(Fu,Nu,Gu,zu){if(zu!==0){var Hu,Uu;if(Pu)Hu=_u,Uu="drawElementsInstanced";else if(Hu=$u.get("ANGLE_instanced_arrays"),Uu="drawElementsInstancedANGLE",Hu===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Hu[Uu](Ru,Gu,Bu,Nu*Vu,zu),Tu.update(Gu,Ru,zu)}}this.setMode=Lu,this.setIndex=Ou,this.render=Du,this.renderInstances=ku}function WebGLInfo(_u){var $u={geometries:0,textures:0},Tu={frame:0,calls:0,triangles:0,points:0,lines:0};function Cu(Ru,Lu,Bu){switch(Bu=Bu||1,Tu.calls++,Lu){case 4:Tu.triangles+=Bu*(Ru/3);break;case 1:Tu.lines+=Bu*(Ru/2);break;case 3:Tu.lines+=Bu*(Ru-1);break;case 2:Tu.lines+=Bu*Ru;break;case 0:Tu.points+=Bu*Ru;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Lu);break}}function Pu(){Tu.frame++,Tu.calls=0,Tu.triangles=0,Tu.points=0,Tu.lines=0}return{memory:$u,render:Tu,programs:null,autoReset:!0,reset:Pu,update:Cu}}function absNumericalSort(_u,$u){return Math.abs($u[1])-Math.abs(_u[1])}function WebGLMorphtargets(_u){var $u={},Tu=new Float32Array(8);function Cu(Pu,Ru,Lu,Bu){var Vu=Pu.morphTargetInfluences,Ou=Vu===void 0?0:Vu.length,Du=$u[Ru.id];if(Du===void 0){Du=[];for(var ku=0;ku<Ou;ku++)Du[ku]=[ku,0];$u[Ru.id]=Du}for(var Fu=Lu.morphTargets&&Ru.morphAttributes.position,Nu=Lu.morphNormals&&Ru.morphAttributes.normal,ku=0;ku<Ou;ku++){var Gu=Du[ku];Gu[1]!==0&&(Fu&&Ru.deleteAttribute("morphTarget"+ku),Nu&&Ru.deleteAttribute("morphNormal"+ku))}for(var ku=0;ku<Ou;ku++){var Gu=Du[ku];Gu[0]=ku,Gu[1]=Vu[ku]}Du.sort(absNumericalSort);for(var zu=0,ku=0;ku<8;ku++){var Gu=Du[ku];if(Gu){var Hu=Gu[0],Uu=Gu[1];if(Uu){Fu&&Ru.setAttribute("morphTarget"+ku,Fu[Hu]),Nu&&Ru.setAttribute("morphNormal"+ku,Nu[Hu]),Tu[ku]=Uu,zu+=Uu;continue}}Tu[ku]=0}var ju=Ru.morphTargetsRelative?1:1-zu;Bu.getUniforms().setValue(_u,"morphTargetBaseInfluence",ju),Bu.getUniforms().setValue(_u,"morphTargetInfluences",Tu)}return{update:Cu}}function WebGLObjects(_u,$u,Tu,Cu){var Pu=new WeakMap;function Ru(Bu){var Vu=Cu.render.frame,Ou=Bu.geometry,Du=$u.get(Bu,Ou);return Pu.get(Du)!==Vu&&(Ou.isGeometry&&Du.updateFromObject(Bu),$u.update(Du),Pu.set(Du,Vu)),Bu.isInstancedMesh&&Tu.update(Bu.instanceMatrix,34962),Du}function Lu(){Pu=new WeakMap}return{update:Ru,dispose:Lu}}function CubeTexture(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou){_u=_u!==void 0?_u:[],$u=$u!==void 0?$u:CubeReflectionMapping,Lu=Lu!==void 0?Lu:RGBFormat,Texture.call(this,_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(_u){this.image=_u}});function DataTexture2DArray(_u,$u,Tu,Cu){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Tu||1,depth:Cu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(_u,$u,Tu,Cu){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Tu||1,depth:Cu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(_u,$u,Tu){var Cu=_u[0];if(Cu<=0||Cu>0)return _u;var Pu=$u*Tu,Ru=arrayCacheF32[Pu];if(Ru===void 0&&(Ru=new Float32Array(Pu),arrayCacheF32[Pu]=Ru),$u!==0){Cu.toArray(Ru,0);for(var Lu=1,Bu=0;Lu!==$u;++Lu)Bu+=Tu,_u[Lu].toArray(Ru,Bu)}return Ru}function arraysEqual(_u,$u){if(_u.length!==$u.length)return!1;for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++)if(_u[Tu]!==$u[Tu])return!1;return!0}function copyArray(_u,$u){for(var Tu=0,Cu=$u.length;Tu<Cu;Tu++)_u[Tu]=$u[Tu]}function allocTexUnits(_u,$u){var Tu=arrayCacheI32[$u];Tu===void 0&&(Tu=new Int32Array($u),arrayCacheI32[$u]=Tu);for(var Cu=0;Cu!==$u;++Cu)Tu[Cu]=_u.allocateTextureUnit();return Tu}function setValueV1f(_u,$u){var Tu=this.cache;Tu[0]!==$u&&(_u.uniform1f(this.addr,$u),Tu[0]=$u)}function setValueV2f(_u,$u){var Tu=this.cache;if($u.x!==void 0)(Tu[0]!==$u.x||Tu[1]!==$u.y)&&(_u.uniform2f(this.addr,$u.x,$u.y),Tu[0]=$u.x,Tu[1]=$u.y);else{if(arraysEqual(Tu,$u))return;_u.uniform2fv(this.addr,$u),copyArray(Tu,$u)}}function setValueV3f(_u,$u){var Tu=this.cache;if($u.x!==void 0)(Tu[0]!==$u.x||Tu[1]!==$u.y||Tu[2]!==$u.z)&&(_u.uniform3f(this.addr,$u.x,$u.y,$u.z),Tu[0]=$u.x,Tu[1]=$u.y,Tu[2]=$u.z);else if($u.r!==void 0)(Tu[0]!==$u.r||Tu[1]!==$u.g||Tu[2]!==$u.b)&&(_u.uniform3f(this.addr,$u.r,$u.g,$u.b),Tu[0]=$u.r,Tu[1]=$u.g,Tu[2]=$u.b);else{if(arraysEqual(Tu,$u))return;_u.uniform3fv(this.addr,$u),copyArray(Tu,$u)}}function setValueV4f(_u,$u){var Tu=this.cache;if($u.x!==void 0)(Tu[0]!==$u.x||Tu[1]!==$u.y||Tu[2]!==$u.z||Tu[3]!==$u.w)&&(_u.uniform4f(this.addr,$u.x,$u.y,$u.z,$u.w),Tu[0]=$u.x,Tu[1]=$u.y,Tu[2]=$u.z,Tu[3]=$u.w);else{if(arraysEqual(Tu,$u))return;_u.uniform4fv(this.addr,$u),copyArray(Tu,$u)}}function setValueM2(_u,$u){var Tu=this.cache,Cu=$u.elements;if(Cu===void 0){if(arraysEqual(Tu,$u))return;_u.uniformMatrix2fv(this.addr,!1,$u),copyArray(Tu,$u)}else{if(arraysEqual(Tu,Cu))return;mat2array.set(Cu),_u.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(Tu,Cu)}}function setValueM3(_u,$u){var Tu=this.cache,Cu=$u.elements;if(Cu===void 0){if(arraysEqual(Tu,$u))return;_u.uniformMatrix3fv(this.addr,!1,$u),copyArray(Tu,$u)}else{if(arraysEqual(Tu,Cu))return;mat3array.set(Cu),_u.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(Tu,Cu)}}function setValueM4(_u,$u){var Tu=this.cache,Cu=$u.elements;if(Cu===void 0){if(arraysEqual(Tu,$u))return;_u.uniformMatrix4fv(this.addr,!1,$u),copyArray(Tu,$u)}else{if(arraysEqual(Tu,Cu))return;mat4array.set(Cu),_u.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(Tu,Cu)}}function setValueT1(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.safeSetTexture2D($u||emptyTexture,Pu)}function setValueT2DArray1(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.setTexture2DArray($u||emptyTexture2dArray,Pu)}function setValueT3D1(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.setTexture3D($u||emptyTexture3d,Pu)}function setValueT6(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.safeSetTextureCube($u||emptyCubeTexture,Pu)}function setValueV1i(_u,$u){var Tu=this.cache;Tu[0]!==$u&&(_u.uniform1i(this.addr,$u),Tu[0]=$u)}function setValueV2i(_u,$u){var Tu=this.cache;arraysEqual(Tu,$u)||(_u.uniform2iv(this.addr,$u),copyArray(Tu,$u))}function setValueV3i(_u,$u){var Tu=this.cache;arraysEqual(Tu,$u)||(_u.uniform3iv(this.addr,$u),copyArray(Tu,$u))}function setValueV4i(_u,$u){var Tu=this.cache;arraysEqual(Tu,$u)||(_u.uniform4iv(this.addr,$u),copyArray(Tu,$u))}function setValueV1ui(_u,$u){var Tu=this.cache;Tu[0]!==$u&&(_u.uniform1ui(this.addr,$u),Tu[0]=$u)}function getSingularSetter(_u){switch(_u){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_u,$u){_u.uniform1fv(this.addr,$u)}function setValueV1iArray(_u,$u){_u.uniform1iv(this.addr,$u)}function setValueV2iArray(_u,$u){_u.uniform2iv(this.addr,$u)}function setValueV3iArray(_u,$u){_u.uniform3iv(this.addr,$u)}function setValueV4iArray(_u,$u){_u.uniform4iv(this.addr,$u)}function setValueV2fArray(_u,$u){var Tu=flatten($u,this.size,2);_u.uniform2fv(this.addr,Tu)}function setValueV3fArray(_u,$u){var Tu=flatten($u,this.size,3);_u.uniform3fv(this.addr,Tu)}function setValueV4fArray(_u,$u){var Tu=flatten($u,this.size,4);_u.uniform4fv(this.addr,Tu)}function setValueM2Array(_u,$u){var Tu=flatten($u,this.size,4);_u.uniformMatrix2fv(this.addr,!1,Tu)}function setValueM3Array(_u,$u){var Tu=flatten($u,this.size,9);_u.uniformMatrix3fv(this.addr,!1,Tu)}function setValueM4Array(_u,$u){var Tu=flatten($u,this.size,16);_u.uniformMatrix4fv(this.addr,!1,Tu)}function setValueT1Array(_u,$u,Tu){var Cu=$u.length,Pu=allocTexUnits(Tu,Cu);_u.uniform1iv(this.addr,Pu);for(var Ru=0;Ru!==Cu;++Ru)Tu.safeSetTexture2D($u[Ru]||emptyTexture,Pu[Ru])}function setValueT6Array(_u,$u,Tu){var Cu=$u.length,Pu=allocTexUnits(Tu,Cu);_u.uniform1iv(this.addr,Pu);for(var Ru=0;Ru!==Cu;++Ru)Tu.safeSetTextureCube($u[Ru]||emptyCubeTexture,Pu[Ru])}function getPureArraySetter(_u){switch(_u){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(_u,$u,Tu){this.id=_u,this.addr=Tu,this.cache=[],this.setValue=getSingularSetter($u.type)}function PureArrayUniform(_u,$u,Tu){this.id=_u,this.addr=Tu,this.cache=[],this.size=$u.size,this.setValue=getPureArraySetter($u.type)}PureArrayUniform.prototype.updateCache=function(_u){var $u=this.cache;_u instanceof Float32Array&&$u.length!==_u.length&&(this.cache=new Float32Array(_u.length)),copyArray($u,_u)};function StructuredUniform(_u){this.id=_u,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(_u,$u,Tu){for(var Cu=this.seq,Pu=0,Ru=Cu.length;Pu!==Ru;++Pu){var Lu=Cu[Pu];Lu.setValue(_u,$u[Lu.id],Tu)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(_u,$u){_u.seq.push($u),_u.map[$u.id]=$u}function parseUniform(_u,$u,Tu){var Cu=_u.name,Pu=Cu.length;for(RePathPart.lastIndex=0;;){var Ru=RePathPart.exec(Cu),Lu=RePathPart.lastIndex,Bu=Ru[1],Vu=Ru[2]==="]",Ou=Ru[3];if(Vu&&(Bu=Bu|0),Ou===void 0||Ou==="["&&Lu+2===Pu){addUniform(Tu,Ou===void 0?new SingleUniform(Bu,_u,$u):new PureArrayUniform(Bu,_u,$u));break}else{var Du=Tu.map,ku=Du[Bu];ku===void 0&&(ku=new StructuredUniform(Bu),addUniform(Tu,ku)),Tu=ku}}}function WebGLUniforms(_u,$u){this.seq=[],this.map={};for(var Tu=_u.getProgramParameter($u,35718),Cu=0;Cu<Tu;++Cu){var Pu=_u.getActiveUniform($u,Cu),Ru=_u.getUniformLocation($u,Pu.name);parseUniform(Pu,Ru,this)}}WebGLUniforms.prototype.setValue=function(_u,$u,Tu,Cu){var Pu=this.map[$u];Pu!==void 0&&Pu.setValue(_u,Tu,Cu)};WebGLUniforms.prototype.setOptional=function(_u,$u,Tu){var Cu=$u[Tu];Cu!==void 0&&this.setValue(_u,Tu,Cu)};WebGLUniforms.upload=function(_u,$u,Tu,Cu){for(var Pu=0,Ru=$u.length;Pu!==Ru;++Pu){var Lu=$u[Pu],Bu=Tu[Lu.id];Bu.needsUpdate!==!1&&Lu.setValue(_u,Bu.value,Cu)}};WebGLUniforms.seqWithValue=function(_u,$u){for(var Tu=[],Cu=0,Pu=_u.length;Cu!==Pu;++Cu){var Ru=_u[Cu];Ru.id in $u&&Tu.push(Ru)}return Tu};function WebGLShader(_u,$u,Tu){var Cu=_u.createShader($u);return _u.shaderSource(Cu,Tu),_u.compileShader(Cu),Cu}var programIdCount=0;function addLineNumbers(_u){for(var $u=_u.split(`
`),Tu=0;Tu<$u.length;Tu++)$u[Tu]=Tu+1+": "+$u[Tu];return $u.join(`
`)}function getEncodingComponents(_u){switch(_u){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+_u)}}function getShaderErrors(_u,$u,Tu){var Cu=_u.getShaderParameter($u,35713),Pu=_u.getShaderInfoLog($u).trim();if(Cu&&Pu==="")return"";var Ru=_u.getShaderSource($u);return"THREE.WebGLShader: gl.getShaderInfoLog() "+Tu+`
`+Pu+addLineNumbers(Ru)}function getTexelDecodingFunction(_u,$u){var Tu=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return "+Tu[0]+"ToLinear"+Tu[1]+"; }"}function getTexelEncodingFunction(_u,$u){var Tu=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return LinearTo"+Tu[0]+Tu[1]+"; }"}function getToneMappingFunction(_u,$u){var Tu;switch($u){case LinearToneMapping:Tu="Linear";break;case ReinhardToneMapping:Tu="Reinhard";break;case Uncharted2ToneMapping:Tu="Uncharted2";break;case CineonToneMapping:Tu="OptimizedCineon";break;case ACESFilmicToneMapping:Tu="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+$u)}return"vec3 "+_u+"( vec3 color ) { return "+Tu+"ToneMapping( color ); }"}function generateExtensions(_u){var $u=[_u.extensionDerivatives||_u.envMapCubeUV||_u.bumpMap||_u.tangentSpaceNormalMap||_u.clearcoatNormalMap||_u.flatShading||_u.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(_u.extensionFragDepth||_u.logarithmicDepthBuffer)&&_u.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",_u.extensionDrawBuffers&&_u.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(_u.extensionShaderTextureLOD||_u.envMap)&&_u.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return $u.filter(filterEmptyLine).join(`
`)}function generateDefines(_u){var $u=[];for(var Tu in _u){var Cu=_u[Tu];Cu!==!1&&$u.push("#define "+Tu+" "+Cu)}return $u.join(`
`)}function fetchAttributeLocations(_u,$u){for(var Tu={},Cu=_u.getProgramParameter($u,35721),Pu=0;Pu<Cu;Pu++){var Ru=_u.getActiveAttrib($u,Pu),Lu=Ru.name;Tu[Lu]=_u.getAttribLocation($u,Lu)}return Tu}function filterEmptyLine(_u){return _u!==""}function replaceLightNums(_u,$u){return _u.replace(/NUM_DIR_LIGHTS/g,$u.numDirLights).replace(/NUM_SPOT_LIGHTS/g,$u.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,$u.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,$u.numPointLights).replace(/NUM_HEMI_LIGHTS/g,$u.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,$u.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,$u.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,$u.numPointLightShadows)}function replaceClippingPlaneNums(_u,$u){return _u.replace(/NUM_CLIPPING_PLANES/g,$u.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,$u.numClippingPlanes-$u.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_u){return _u.replace(includePattern,includeReplacer)}function includeReplacer(_u,$u){var Tu=ShaderChunk[$u];if(Tu===void 0)throw new Error("Can not resolve #include <"+$u+">");return resolveIncludes(Tu)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(_u){return _u.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(_u,$u,Tu,Cu){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(_u,$u,Tu,Cu)}function loopReplacer(_u,$u,Tu,Cu){for(var Pu="",Ru=parseInt($u);Ru<parseInt(Tu);Ru++)Pu+=Cu.replace(/\[ i \]/g,"[ "+Ru+" ]").replace(/UNROLLED_LOOP_INDEX/g,Ru);return Pu}function generatePrecision(_u){var $u="precision "+_u.precision+` float;
precision `+_u.precision+" int;";return _u.precision==="highp"?$u+=`
#define HIGH_PRECISION`:_u.precision==="mediump"?$u+=`
#define MEDIUM_PRECISION`:_u.precision==="lowp"&&($u+=`
#define LOW_PRECISION`),$u}function generateShadowMapTypeDefine(_u){var $u="SHADOWMAP_TYPE_BASIC";return _u.shadowMapType===PCFShadowMap?$u="SHADOWMAP_TYPE_PCF":_u.shadowMapType===PCFSoftShadowMap?$u="SHADOWMAP_TYPE_PCF_SOFT":_u.shadowMapType===VSMShadowMap&&($u="SHADOWMAP_TYPE_VSM"),$u}function generateEnvMapTypeDefine(_u){var $u="ENVMAP_TYPE_CUBE";if(_u.envMap)switch(_u.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:$u="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:$u="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:$u="ENVMAP_TYPE_SPHERE";break}return $u}function generateEnvMapModeDefine(_u){var $u="ENVMAP_MODE_REFLECTION";if(_u.envMap)switch(_u.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_MODE_REFRACTION";break}return $u}function generateEnvMapBlendingDefine(_u){var $u="ENVMAP_BLENDING_NONE";if(_u.envMap)switch(_u.combine){case MultiplyOperation:$u="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:$u="ENVMAP_BLENDING_MIX";break;case AddOperation:$u="ENVMAP_BLENDING_ADD";break}return $u}function WebGLProgram(_u,$u,Tu){var Cu=_u.getContext(),Pu=Tu.defines,Ru=Tu.vertexShader,Lu=Tu.fragmentShader,Bu=generateShadowMapTypeDefine(Tu),Vu=generateEnvMapTypeDefine(Tu),Ou=generateEnvMapModeDefine(Tu),Du=generateEnvMapBlendingDefine(Tu),ku=_u.gammaFactor>0?_u.gammaFactor:1,Fu=Tu.isWebGL2?"":generateExtensions(Tu),Nu=generateDefines(Pu),Gu=Cu.createProgram(),zu,Hu;if(Tu.isRawShaderMaterial?(zu=[Nu].filter(filterEmptyLine).join(`
`),zu.length>0&&(zu+=`
`),Hu=[Fu,Nu].filter(filterEmptyLine).join(`
`),Hu.length>0&&(Hu+=`
`)):(zu=[generatePrecision(Tu),"#define SHADER_NAME "+Tu.shaderName,Nu,Tu.instancing?"#define USE_INSTANCING":"",Tu.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ku,"#define MAX_BONES "+Tu.maxBones,Tu.useFog&&Tu.fog?"#define USE_FOG":"",Tu.useFog&&Tu.fogExp2?"#define FOG_EXP2":"",Tu.map?"#define USE_MAP":"",Tu.envMap?"#define USE_ENVMAP":"",Tu.envMap?"#define "+Ou:"",Tu.lightMap?"#define USE_LIGHTMAP":"",Tu.aoMap?"#define USE_AOMAP":"",Tu.emissiveMap?"#define USE_EMISSIVEMAP":"",Tu.bumpMap?"#define USE_BUMPMAP":"",Tu.normalMap?"#define USE_NORMALMAP":"",Tu.normalMap&&Tu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Tu.normalMap&&Tu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Tu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Tu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Tu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Tu.displacementMap&&Tu.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Tu.specularMap?"#define USE_SPECULARMAP":"",Tu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Tu.metalnessMap?"#define USE_METALNESSMAP":"",Tu.alphaMap?"#define USE_ALPHAMAP":"",Tu.vertexTangents?"#define USE_TANGENT":"",Tu.vertexColors?"#define USE_COLOR":"",Tu.vertexUvs?"#define USE_UV":"",Tu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Tu.flatShading?"#define FLAT_SHADED":"",Tu.skinning?"#define USE_SKINNING":"",Tu.useVertexTexture?"#define BONE_TEXTURE":"",Tu.morphTargets?"#define USE_MORPHTARGETS":"",Tu.morphNormals&&Tu.flatShading===!1?"#define USE_MORPHNORMALS":"",Tu.doubleSided?"#define DOUBLE_SIDED":"",Tu.flipSided?"#define FLIP_SIDED":"",Tu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Tu.shadowMapEnabled?"#define "+Bu:"",Tu.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Tu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Tu.logarithmicDepthBuffer&&Tu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Hu=[Fu,generatePrecision(Tu),"#define SHADER_NAME "+Tu.shaderName,Nu,Tu.alphaTest?"#define ALPHATEST "+Tu.alphaTest+(Tu.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+ku,Tu.useFog&&Tu.fog?"#define USE_FOG":"",Tu.useFog&&Tu.fogExp2?"#define FOG_EXP2":"",Tu.map?"#define USE_MAP":"",Tu.matcap?"#define USE_MATCAP":"",Tu.envMap?"#define USE_ENVMAP":"",Tu.envMap?"#define "+Vu:"",Tu.envMap?"#define "+Ou:"",Tu.envMap?"#define "+Du:"",Tu.lightMap?"#define USE_LIGHTMAP":"",Tu.aoMap?"#define USE_AOMAP":"",Tu.emissiveMap?"#define USE_EMISSIVEMAP":"",Tu.bumpMap?"#define USE_BUMPMAP":"",Tu.normalMap?"#define USE_NORMALMAP":"",Tu.normalMap&&Tu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Tu.normalMap&&Tu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Tu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Tu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Tu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Tu.specularMap?"#define USE_SPECULARMAP":"",Tu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Tu.metalnessMap?"#define USE_METALNESSMAP":"",Tu.alphaMap?"#define USE_ALPHAMAP":"",Tu.sheen?"#define USE_SHEEN":"",Tu.vertexTangents?"#define USE_TANGENT":"",Tu.vertexColors?"#define USE_COLOR":"",Tu.vertexUvs?"#define USE_UV":"",Tu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Tu.gradientMap?"#define USE_GRADIENTMAP":"",Tu.flatShading?"#define FLAT_SHADED":"",Tu.doubleSided?"#define DOUBLE_SIDED":"",Tu.flipSided?"#define FLIP_SIDED":"",Tu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Tu.shadowMapEnabled?"#define "+Bu:"",Tu.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Tu.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Tu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Tu.logarithmicDepthBuffer&&Tu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(Tu.extensionShaderTextureLOD||Tu.envMap)&&Tu.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",Tu.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",Tu.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",Tu.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",Tu.toneMapping):"",Tu.dithering?"#define DITHERING":"",Tu.outputEncoding||Tu.mapEncoding||Tu.matcapEncoding||Tu.envMapEncoding||Tu.emissiveMapEncoding||Tu.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",Tu.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",Tu.mapEncoding):"",Tu.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",Tu.matcapEncoding):"",Tu.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",Tu.envMapEncoding):"",Tu.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",Tu.emissiveMapEncoding):"",Tu.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",Tu.lightMapEncoding):"",Tu.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",Tu.outputEncoding):"",Tu.depthPacking?"#define DEPTH_PACKING "+Tu.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ru=resolveIncludes(Ru),Ru=replaceLightNums(Ru,Tu),Ru=replaceClippingPlaneNums(Ru,Tu),Lu=resolveIncludes(Lu),Lu=replaceLightNums(Lu,Tu),Lu=replaceClippingPlaneNums(Lu,Tu),Ru=unrollLoops(Ru),Lu=unrollLoops(Lu),Tu.isWebGL2&&!Tu.isRawShaderMaterial){var Uu=!1,ju=/^\s*#version\s+300\s+es\s*\n/;Tu.isShaderMaterial&&Ru.match(ju)!==null&&Lu.match(ju)!==null&&(Uu=!0,Ru=Ru.replace(ju,""),Lu=Lu.replace(ju,"")),zu=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+zu,Hu=[`#version 300 es
`,"#define varying in",Uu?"":"out highp vec4 pc_fragColor;",Uu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Hu}var Wu=zu+Ru,Qu=Hu+Lu,qu=WebGLShader(Cu,35633,Wu),Yu=WebGLShader(Cu,35632,Qu);if(Cu.attachShader(Gu,qu),Cu.attachShader(Gu,Yu),Tu.index0AttributeName!==void 0?Cu.bindAttribLocation(Gu,0,Tu.index0AttributeName):Tu.morphTargets===!0&&Cu.bindAttribLocation(Gu,0,"position"),Cu.linkProgram(Gu),_u.debug.checkShaderErrors){var Ju=Cu.getProgramInfoLog(Gu).trim(),_d=Cu.getShaderInfoLog(qu).trim(),tp=Cu.getShaderInfoLog(Yu).trim(),Ku=!0,Xu=!0;if(Cu.getProgramParameter(Gu,35714)===!1){Ku=!1;var Zu=getShaderErrors(Cu,qu,"vertex"),_c=getShaderErrors(Cu,Yu,"fragment");console.error("THREE.WebGLProgram: shader error: ",Cu.getError(),"35715",Cu.getProgramParameter(Gu,35715),"gl.getProgramInfoLog",Ju,Zu,_c)}else Ju!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Ju):(_d===""||tp==="")&&(Xu=!1);Xu&&(this.diagnostics={runnable:Ku,programLog:Ju,vertexShader:{log:_d,prefix:zu},fragmentShader:{log:tp,prefix:Hu}})}Cu.deleteShader(qu),Cu.deleteShader(Yu);var Xc;this.getUniforms=function(){return Xc===void 0&&(Xc=new WebGLUniforms(Cu,Gu)),Xc};var _h;return this.getAttributes=function(){return _h===void 0&&(_h=fetchAttributeLocations(Cu,Gu)),_h},this.destroy=function(){Cu.deleteProgram(Gu),this.program=void 0},this.name=Tu.shaderName,this.id=programIdCount++,this.cacheKey=$u,this.usedTimes=1,this.program=Gu,this.vertexShader=qu,this.fragmentShader=Yu,this}function WebGLPrograms(_u,$u,Tu){var Cu=[],Pu=Tu.isWebGL2,Ru=Tu.logarithmicDepthBuffer,Lu=Tu.floatVertexTextures,Bu=Tu.precision,Vu=Tu.maxVertexUniforms,Ou=Tu.vertexTextures,Du={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},ku=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Fu(zu,Hu){var Uu;if(Hu){var ju=ShaderLib[Hu];Uu={name:zu.type,uniforms:UniformsUtils.clone(ju.uniforms),vertexShader:ju.vertexShader,fragmentShader:ju.fragmentShader}}else Uu={name:zu.type,uniforms:zu.uniforms,vertexShader:zu.vertexShader,fragmentShader:zu.fragmentShader};return Uu}function Nu(zu){var Hu=zu.skeleton,Uu=Hu.bones;if(Lu)return 1024;var ju=Vu,Wu=Math.floor((ju-20)/4),Qu=Math.min(Wu,Uu.length);return Qu<Uu.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Uu.length+" bones. This GPU supports "+Qu+"."),0):Qu}function Gu(zu){var Hu;return zu?zu.isTexture?Hu=zu.encoding:zu.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Hu=zu.texture.encoding):Hu=LinearEncoding,Hu}this.getParameters=function(zu,Hu,Uu,ju,Wu,Qu,qu){var Yu=ju.fog,Ju=zu.isMeshStandardMaterial?ju.environment:null,_d=zu.envMap||Ju,tp=Du[zu.type],Ku=qu.isSkinnedMesh?Nu(qu):0;zu.precision!==null&&(Bu=Tu.getMaxPrecision(zu.precision),Bu!==zu.precision&&console.warn("THREE.WebGLProgram.getParameters:",zu.precision,"not supported, using",Bu,"instead."));var Xu=Fu(zu,tp);zu.onBeforeCompile(Xu,_u);var Zu=_u.getRenderTarget(),_c={isWebGL2:Pu,shaderID:tp,shaderName:Xu.name,uniforms:Xu.uniforms,vertexShader:Xu.vertexShader,fragmentShader:Xu.fragmentShader,defines:zu.defines,isRawShaderMaterial:zu.isRawShaderMaterial,isShaderMaterial:zu.isShaderMaterial,precision:Bu,instancing:qu.isInstancedMesh===!0,supportsVertexTextures:Ou,outputEncoding:Zu!==null?Gu(Zu.texture):_u.outputEncoding,map:!!zu.map,mapEncoding:Gu(zu.map),matcap:!!zu.matcap,matcapEncoding:Gu(zu.matcap),envMap:!!_d,envMapMode:_d&&_d.mapping,envMapEncoding:Gu(_d),envMapCubeUV:!!_d&&(_d.mapping===CubeUVReflectionMapping||_d.mapping===CubeUVRefractionMapping),lightMap:!!zu.lightMap,lightMapEncoding:Gu(zu.lightMap),aoMap:!!zu.aoMap,emissiveMap:!!zu.emissiveMap,emissiveMapEncoding:Gu(zu.emissiveMap),bumpMap:!!zu.bumpMap,normalMap:!!zu.normalMap,objectSpaceNormalMap:zu.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:zu.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!zu.clearcoatMap,clearcoatRoughnessMap:!!zu.clearcoatRoughnessMap,clearcoatNormalMap:!!zu.clearcoatNormalMap,displacementMap:!!zu.displacementMap,roughnessMap:!!zu.roughnessMap,metalnessMap:!!zu.metalnessMap,specularMap:!!zu.specularMap,alphaMap:!!zu.alphaMap,gradientMap:!!zu.gradientMap,sheen:!!zu.sheen,combine:zu.combine,vertexTangents:zu.normalMap&&zu.vertexTangents,vertexColors:zu.vertexColors,vertexUvs:!!zu.map||!!zu.bumpMap||!!zu.normalMap||!!zu.specularMap||!!zu.alphaMap||!!zu.emissiveMap||!!zu.roughnessMap||!!zu.metalnessMap||!!zu.clearcoatMap||!!zu.clearcoatRoughnessMap||!!zu.clearcoatNormalMap||!!zu.displacementMap,uvsVertexOnly:!(!!zu.map||!!zu.bumpMap||!!zu.normalMap||!!zu.specularMap||!!zu.alphaMap||!!zu.emissiveMap||!!zu.roughnessMap||!!zu.metalnessMap||!!zu.clearcoatNormalMap)&&!!zu.displacementMap,fog:!!Yu,useFog:zu.fog,fogExp2:Yu&&Yu.isFogExp2,flatShading:zu.flatShading,sizeAttenuation:zu.sizeAttenuation,logarithmicDepthBuffer:Ru,skinning:zu.skinning&&Ku>0,maxBones:Ku,useVertexTexture:Lu,morphTargets:zu.morphTargets,morphNormals:zu.morphNormals,maxMorphTargets:_u.maxMorphTargets,maxMorphNormals:_u.maxMorphNormals,numDirLights:Hu.directional.length,numPointLights:Hu.point.length,numSpotLights:Hu.spot.length,numRectAreaLights:Hu.rectArea.length,numHemiLights:Hu.hemi.length,numDirLightShadows:Hu.directionalShadowMap.length,numPointLightShadows:Hu.pointShadowMap.length,numSpotLightShadows:Hu.spotShadowMap.length,numClippingPlanes:Wu,numClipIntersection:Qu,dithering:zu.dithering,shadowMapEnabled:_u.shadowMap.enabled&&Uu.length>0,shadowMapType:_u.shadowMap.type,toneMapping:zu.toneMapped?_u.toneMapping:NoToneMapping,physicallyCorrectLights:_u.physicallyCorrectLights,premultipliedAlpha:zu.premultipliedAlpha,alphaTest:zu.alphaTest,doubleSided:zu.side===DoubleSide,flipSided:zu.side===BackSide,depthPacking:zu.depthPacking!==void 0?zu.depthPacking:!1,index0AttributeName:zu.index0AttributeName,extensionDerivatives:zu.extensions&&zu.extensions.derivatives,extensionFragDepth:zu.extensions&&zu.extensions.fragDepth,extensionDrawBuffers:zu.extensions&&zu.extensions.drawBuffers,extensionShaderTextureLOD:zu.extensions&&zu.extensions.shaderTextureLOD,rendererExtensionFragDepth:Pu||$u.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Pu||$u.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Pu||$u.get("EXT_shader_texture_lod")!==null,onBeforeCompile:zu.onBeforeCompile};return _c},this.getProgramCacheKey=function(zu){var Hu=[];if(zu.shaderID?Hu.push(zu.shaderID):(Hu.push(zu.fragmentShader),Hu.push(zu.vertexShader)),zu.defines!==void 0)for(var Uu in zu.defines)Hu.push(Uu),Hu.push(zu.defines[Uu]);if(zu.isRawShaderMaterial===void 0){for(var ju=0;ju<ku.length;ju++)Hu.push(zu[ku[ju]]);Hu.push(_u.outputEncoding),Hu.push(_u.gammaFactor)}return Hu.push(zu.onBeforeCompile.toString()),Hu.join()},this.acquireProgram=function(zu,Hu){for(var Uu,ju=0,Wu=Cu.length;ju<Wu;ju++){var Qu=Cu[ju];if(Qu.cacheKey===Hu){Uu=Qu,++Uu.usedTimes;break}}return Uu===void 0&&(Uu=new WebGLProgram(_u,Hu,zu),Cu.push(Uu)),Uu},this.releaseProgram=function(zu){if(--zu.usedTimes===0){var Hu=Cu.indexOf(zu);Cu[Hu]=Cu[Cu.length-1],Cu.pop(),zu.destroy()}},this.programs=Cu}function WebGLProperties(){var _u=new WeakMap;function $u(Ru){var Lu=_u.get(Ru);return Lu===void 0&&(Lu={},_u.set(Ru,Lu)),Lu}function Tu(Ru){_u.delete(Ru)}function Cu(Ru,Lu,Bu){_u.get(Ru)[Lu]=Bu}function Pu(){_u=new WeakMap}return{get:$u,remove:Tu,update:Cu,dispose:Pu}}function painterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.program!==$u.program?_u.program.id-$u.program.id:_u.material.id!==$u.material.id?_u.material.id-$u.material.id:_u.z!==$u.z?_u.z-$u.z:_u.id-$u.id}function reversePainterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.z!==$u.z?$u.z-_u.z:_u.id-$u.id}function WebGLRenderList(){var _u=[],$u=0,Tu=[],Cu=[],Pu={id:-1};function Ru(){$u=0,Tu.length=0,Cu.length=0}function Lu(ku,Fu,Nu,Gu,zu,Hu){var Uu=_u[$u];return Uu===void 0?(Uu={id:ku.id,object:ku,geometry:Fu,material:Nu,program:Nu.program||Pu,groupOrder:Gu,renderOrder:ku.renderOrder,z:zu,group:Hu},_u[$u]=Uu):(Uu.id=ku.id,Uu.object=ku,Uu.geometry=Fu,Uu.material=Nu,Uu.program=Nu.program||Pu,Uu.groupOrder=Gu,Uu.renderOrder=ku.renderOrder,Uu.z=zu,Uu.group=Hu),$u++,Uu}function Bu(ku,Fu,Nu,Gu,zu,Hu){var Uu=Lu(ku,Fu,Nu,Gu,zu,Hu);(Nu.transparent===!0?Cu:Tu).push(Uu)}function Vu(ku,Fu,Nu,Gu,zu,Hu){var Uu=Lu(ku,Fu,Nu,Gu,zu,Hu);(Nu.transparent===!0?Cu:Tu).unshift(Uu)}function Ou(ku,Fu){Tu.length>1&&Tu.sort(ku||painterSortStable),Cu.length>1&&Cu.sort(Fu||reversePainterSortStable)}function Du(){for(var ku=$u,Fu=_u.length;ku<Fu;ku++){var Nu=_u[ku];if(Nu.id===null)break;Nu.id=null,Nu.object=null,Nu.geometry=null,Nu.material=null,Nu.program=null,Nu.group=null}}return{opaque:Tu,transparent:Cu,init:Ru,push:Bu,unshift:Vu,finish:Du,sort:Ou}}function WebGLRenderLists(){var _u=new WeakMap;function $u(Pu){var Ru=Pu.target;Ru.removeEventListener("dispose",$u),_u.delete(Ru)}function Tu(Pu,Ru){var Lu=_u.get(Pu),Bu;return Lu===void 0?(Bu=new WebGLRenderList,_u.set(Pu,new WeakMap),_u.get(Pu).set(Ru,Bu),Pu.addEventListener("dispose",$u)):(Bu=Lu.get(Ru),Bu===void 0&&(Bu=new WebGLRenderList,Lu.set(Ru,Bu))),Bu}function Cu(){_u=new WeakMap}return{get:Tu,dispose:Cu}}function UniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Tu;switch($u.type){case"DirectionalLight":Tu={direction:new Vector3,color:new Color};break;case"SpotLight":Tu={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":Tu={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":Tu={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":Tu={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _u[$u.id]=Tu,Tu}}}function ShadowUniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Tu;switch($u.type){case"DirectionalLight":Tu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":Tu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":Tu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _u[$u.id]=Tu,Tu}}}var nextVersion=0;function shadowCastingLightsFirst(_u,$u){return($u.castShadow?1:0)-(_u.castShadow?1:0)}function WebGLLights(){for(var _u=new UniformsCache,$u=ShadowUniformsCache(),Tu={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Cu=0;Cu<9;Cu++)Tu.probe.push(new Vector3);var Pu=new Vector3,Ru=new Matrix4,Lu=new Matrix4;function Bu(Vu,Ou,Du){for(var ku=0,Fu=0,Nu=0,Gu=0;Gu<9;Gu++)Tu.probe[Gu].set(0,0,0);var zu=0,Hu=0,Uu=0,ju=0,Wu=0,Qu=0,qu=0,Yu=0,Ju=Du.matrixWorldInverse;Vu.sort(shadowCastingLightsFirst);for(var Gu=0,_d=Vu.length;Gu<_d;Gu++){var tp=Vu[Gu],Ku=tp.color,Xu=tp.intensity,Zu=tp.distance,_c=tp.shadow&&tp.shadow.map?tp.shadow.map.texture:null;if(tp.isAmbientLight)ku+=Ku.r*Xu,Fu+=Ku.g*Xu,Nu+=Ku.b*Xu;else if(tp.isLightProbe)for(var Xc=0;Xc<9;Xc++)Tu.probe[Xc].addScaledVector(tp.sh.coefficients[Xc],Xu);else if(tp.isDirectionalLight){var _h=_u.get(tp);if(_h.color.copy(tp.color).multiplyScalar(tp.intensity),_h.direction.setFromMatrixPosition(tp.matrixWorld),Pu.setFromMatrixPosition(tp.target.matrixWorld),_h.direction.sub(Pu),_h.direction.transformDirection(Ju),tp.castShadow){var ip=tp.shadow,ap=$u.get(tp);ap.shadowBias=ip.bias,ap.shadowRadius=ip.radius,ap.shadowMapSize=ip.mapSize,Tu.directionalShadow[zu]=ap,Tu.directionalShadowMap[zu]=_c,Tu.directionalShadowMatrix[zu]=tp.shadow.matrix,Qu++}Tu.directional[zu]=_h,zu++}else if(tp.isSpotLight){var _h=_u.get(tp);if(_h.position.setFromMatrixPosition(tp.matrixWorld),_h.position.applyMatrix4(Ju),_h.color.copy(Ku).multiplyScalar(Xu),_h.distance=Zu,_h.direction.setFromMatrixPosition(tp.matrixWorld),Pu.setFromMatrixPosition(tp.target.matrixWorld),_h.direction.sub(Pu),_h.direction.transformDirection(Ju),_h.coneCos=Math.cos(tp.angle),_h.penumbraCos=Math.cos(tp.angle*(1-tp.penumbra)),_h.decay=tp.decay,tp.castShadow){var ip=tp.shadow,ap=$u.get(tp);ap.shadowBias=ip.bias,ap.shadowRadius=ip.radius,ap.shadowMapSize=ip.mapSize,Tu.spotShadow[Uu]=ap,Tu.spotShadowMap[Uu]=_c,Tu.spotShadowMatrix[Uu]=tp.shadow.matrix,Yu++}Tu.spot[Uu]=_h,Uu++}else if(tp.isRectAreaLight){var _h=_u.get(tp);_h.color.copy(Ku).multiplyScalar(Xu),_h.position.setFromMatrixPosition(tp.matrixWorld),_h.position.applyMatrix4(Ju),Lu.identity(),Ru.copy(tp.matrixWorld),Ru.premultiply(Ju),Lu.extractRotation(Ru),_h.halfWidth.set(tp.width*.5,0,0),_h.halfHeight.set(0,tp.height*.5,0),_h.halfWidth.applyMatrix4(Lu),_h.halfHeight.applyMatrix4(Lu),Tu.rectArea[ju]=_h,ju++}else if(tp.isPointLight){var _h=_u.get(tp);if(_h.position.setFromMatrixPosition(tp.matrixWorld),_h.position.applyMatrix4(Ju),_h.color.copy(tp.color).multiplyScalar(tp.intensity),_h.distance=tp.distance,_h.decay=tp.decay,tp.castShadow){var ip=tp.shadow,ap=$u.get(tp);ap.shadowBias=ip.bias,ap.shadowRadius=ip.radius,ap.shadowMapSize=ip.mapSize,ap.shadowCameraNear=ip.camera.near,ap.shadowCameraFar=ip.camera.far,Tu.pointShadow[Hu]=ap,Tu.pointShadowMap[Hu]=_c,Tu.pointShadowMatrix[Hu]=tp.shadow.matrix,qu++}Tu.point[Hu]=_h,Hu++}else if(tp.isHemisphereLight){var _h=_u.get(tp);_h.direction.setFromMatrixPosition(tp.matrixWorld),_h.direction.transformDirection(Ju),_h.direction.normalize(),_h.skyColor.copy(tp.color).multiplyScalar(Xu),_h.groundColor.copy(tp.groundColor).multiplyScalar(Xu),Tu.hemi[Wu]=_h,Wu++}}Tu.ambient[0]=ku,Tu.ambient[1]=Fu,Tu.ambient[2]=Nu;var hp=Tu.hash;(hp.directionalLength!==zu||hp.pointLength!==Hu||hp.spotLength!==Uu||hp.rectAreaLength!==ju||hp.hemiLength!==Wu||hp.numDirectionalShadows!==Qu||hp.numPointShadows!==qu||hp.numSpotShadows!==Yu)&&(Tu.directional.length=zu,Tu.spot.length=Uu,Tu.rectArea.length=ju,Tu.point.length=Hu,Tu.hemi.length=Wu,Tu.directionalShadow.length=Qu,Tu.directionalShadowMap.length=Qu,Tu.pointShadow.length=qu,Tu.pointShadowMap.length=qu,Tu.spotShadow.length=Yu,Tu.spotShadowMap.length=Yu,Tu.directionalShadowMatrix.length=Qu,Tu.pointShadowMatrix.length=qu,Tu.spotShadowMatrix.length=Yu,hp.directionalLength=zu,hp.pointLength=Hu,hp.spotLength=Uu,hp.rectAreaLength=ju,hp.hemiLength=Wu,hp.numDirectionalShadows=Qu,hp.numPointShadows=qu,hp.numSpotShadows=Yu,Tu.version=nextVersion++)}return{setup:Bu,state:Tu}}function WebGLRenderState(){var _u=new WebGLLights,$u=[],Tu=[];function Cu(){$u.length=0,Tu.length=0}function Pu(Vu){$u.push(Vu)}function Ru(Vu){Tu.push(Vu)}function Lu(Vu){_u.setup($u,Tu,Vu)}var Bu={lightsArray:$u,shadowsArray:Tu,lights:_u};return{init:Cu,state:Bu,setupLights:Lu,pushLight:Pu,pushShadow:Ru}}function WebGLRenderStates(){var _u=new WeakMap;function $u(Pu){var Ru=Pu.target;Ru.removeEventListener("dispose",$u),_u.delete(Ru)}function Tu(Pu,Ru){var Lu;return _u.has(Pu)===!1?(Lu=new WebGLRenderState,_u.set(Pu,new WeakMap),_u.get(Pu).set(Ru,Lu),Pu.addEventListener("dispose",$u)):_u.get(Pu).has(Ru)===!1?(Lu=new WebGLRenderState,_u.get(Pu).set(Ru,Lu)):Lu=_u.get(Pu).get(Ru),Lu}function Cu(){_u=new WeakMap}return{get:Tu,dispose:Cu}}function MeshDepthMaterial(_u){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(_u)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.depthPacking=_u.depthPacking,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this};function MeshDistanceMaterial(_u){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(_u)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.referencePosition.copy(_u.referencePosition),this.nearDistance=_u.nearDistance,this.farDistance=_u.farDistance,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(_u,$u,Tu){var Cu=new Frustum,Pu=new Vector2,Ru=new Vector2,Lu=new Vector4,Bu=[],Vu=[],Ou={},Du={0:BackSide,1:FrontSide,2:DoubleSide},ku=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Fu=ku.clone();Fu.defines.HORIZONAL_PASS=1;var Nu=new BufferGeometry;Nu.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Gu=new Mesh(Nu,ku),zu=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(qu,Yu,Ju){if(zu.enabled!==!1&&!(zu.autoUpdate===!1&&zu.needsUpdate===!1)&&qu.length!==0){var _d=_u.getRenderTarget(),tp=_u.getActiveCubeFace(),Ku=_u.getActiveMipmapLevel(),Xu=_u.state;Xu.setBlending(NoBlending),Xu.buffers.color.setClear(1,1,1,1),Xu.buffers.depth.setTest(!0),Xu.setScissorTest(!1);for(var Zu=0,_c=qu.length;Zu<_c;Zu++){var Xc=qu[Zu],_h=Xc.shadow;if(_h===void 0){console.warn("THREE.WebGLShadowMap:",Xc,"has no shadow.");continue}Pu.copy(_h.mapSize);var ip=_h.getFrameExtents();if(Pu.multiply(ip),Ru.copy(_h.mapSize),(Pu.x>Tu||Pu.y>Tu)&&(Pu.x>Tu&&(Ru.x=Math.floor(Tu/ip.x),Pu.x=Ru.x*ip.x,_h.mapSize.x=Ru.x),Pu.y>Tu&&(Ru.y=Math.floor(Tu/ip.y),Pu.y=Ru.y*ip.y,_h.mapSize.y=Ru.y)),_h.map===null&&!_h.isPointLightShadow&&this.type===VSMShadowMap){var ap={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};_h.map=new WebGLRenderTarget(Pu.x,Pu.y,ap),_h.map.texture.name=Xc.name+".shadowMap",_h.mapPass=new WebGLRenderTarget(Pu.x,Pu.y,ap),_h.camera.updateProjectionMatrix()}if(_h.map===null){var ap={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};_h.map=new WebGLRenderTarget(Pu.x,Pu.y,ap),_h.map.texture.name=Xc.name+".shadowMap",_h.camera.updateProjectionMatrix()}_u.setRenderTarget(_h.map),_u.clear();for(var hp=_h.getViewportCount(),Ap=0;Ap<hp;Ap++){var gp=_h.getViewport(Ap);Lu.set(Ru.x*gp.x,Ru.y*gp.y,Ru.x*gp.z,Ru.y*gp.w),Xu.viewport(Lu),_h.updateMatrices(Xc,Ap),Cu=_h.getFrustum(),Qu(Yu,Ju,_h.camera,Xc,this.type)}!_h.isPointLightShadow&&this.type===VSMShadowMap&&Hu(_h,Ju)}zu.needsUpdate=!1,_u.setRenderTarget(_d,tp,Ku)}};function Hu(qu,Yu){var Ju=$u.update(Gu);ku.uniforms.shadow_pass.value=qu.map.texture,ku.uniforms.resolution.value=qu.mapSize,ku.uniforms.radius.value=qu.radius,_u.setRenderTarget(qu.mapPass),_u.clear(),_u.renderBufferDirect(Yu,null,Ju,ku,Gu,null),Fu.uniforms.shadow_pass.value=qu.mapPass.texture,Fu.uniforms.resolution.value=qu.mapSize,Fu.uniforms.radius.value=qu.radius,_u.setRenderTarget(qu.map),_u.clear(),_u.renderBufferDirect(Yu,null,Ju,Fu,Gu,null)}function Uu(qu,Yu,Ju){var _d=qu<<0|Yu<<1|Ju<<2,tp=Bu[_d];return tp===void 0&&(tp=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:qu,skinning:Yu}),Bu[_d]=tp),tp}function ju(qu,Yu,Ju){var _d=qu<<0|Yu<<1|Ju<<2,tp=Vu[_d];return tp===void 0&&(tp=new MeshDistanceMaterial({morphTargets:qu,skinning:Yu}),Vu[_d]=tp),tp}function Wu(qu,Yu,Ju,_d,tp,Ku,Xu){var Zu=null,_c=Uu,Xc=qu.customDepthMaterial;if(_d.isPointLight===!0&&(_c=ju,Xc=qu.customDistanceMaterial),Xc===void 0){var _h=!1;Ju.morphTargets===!0&&(_h=Yu.morphAttributes&&Yu.morphAttributes.position&&Yu.morphAttributes.position.length>0);var ip=!1;qu.isSkinnedMesh===!0&&(Ju.skinning===!0?ip=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",qu));var ap=qu.isInstancedMesh===!0;Zu=_c(_h,ip,ap)}else Zu=Xc;if(_u.localClippingEnabled&&Ju.clipShadows===!0&&Ju.clippingPlanes.length!==0){var hp=Zu.uuid,Ap=Ju.uuid,gp=Ou[hp];gp===void 0&&(gp={},Ou[hp]=gp);var Rp=gp[Ap];Rp===void 0&&(Rp=Zu.clone(),gp[Ap]=Rp),Zu=Rp}return Zu.visible=Ju.visible,Zu.wireframe=Ju.wireframe,Xu===VSMShadowMap?Zu.side=Ju.shadowSide!==null?Ju.shadowSide:Ju.side:Zu.side=Ju.shadowSide!==null?Ju.shadowSide:Du[Ju.side],Zu.clipShadows=Ju.clipShadows,Zu.clippingPlanes=Ju.clippingPlanes,Zu.clipIntersection=Ju.clipIntersection,Zu.wireframeLinewidth=Ju.wireframeLinewidth,Zu.linewidth=Ju.linewidth,_d.isPointLight===!0&&Zu.isMeshDistanceMaterial===!0&&(Zu.referencePosition.setFromMatrixPosition(_d.matrixWorld),Zu.nearDistance=tp,Zu.farDistance=Ku),Zu}function Qu(qu,Yu,Ju,_d,tp){if(qu.visible!==!1){var Ku=qu.layers.test(Yu.layers);if(Ku&&(qu.isMesh||qu.isLine||qu.isPoints)&&(qu.castShadow||qu.receiveShadow&&tp===VSMShadowMap)&&(!qu.frustumCulled||Cu.intersectsObject(qu))){qu.modelViewMatrix.multiplyMatrices(Ju.matrixWorldInverse,qu.matrixWorld);var Xu=$u.update(qu),Zu=qu.material;if(Array.isArray(Zu))for(var _c=Xu.groups,Xc=0,_h=_c.length;Xc<_h;Xc++){var ip=_c[Xc],ap=Zu[ip.materialIndex];if(ap&&ap.visible){var hp=Wu(qu,Xu,ap,_d,Ju.near,Ju.far,tp);_u.renderBufferDirect(Ju,null,Xu,hp,qu,ip)}}else if(Zu.visible){var hp=Wu(qu,Xu,Zu,_d,Ju.near,Ju.far,tp);_u.renderBufferDirect(Ju,null,Xu,hp,qu,null)}}for(var Ap=qu.children,gp=0,Rp=Ap.length;gp<Rp;gp++)Qu(Ap[gp],Yu,Ju,_d,tp)}}}function WebGLState(_u,$u,Tu){var Cu=Tu.isWebGL2;function Pu(){var Tp=!1,Jp=new Vector4,nv=null,ov=new Vector4(0,0,0,0);return{setMask:function(rv){nv!==rv&&!Tp&&(_u.colorMask(rv,rv,rv,rv),nv=rv)},setLocked:function(rv){Tp=rv},setClear:function(rv,hv,Av,xv,wv){wv===!0&&(rv*=xv,hv*=xv,Av*=xv),Jp.set(rv,hv,Av,xv),ov.equals(Jp)===!1&&(_u.clearColor(rv,hv,Av,xv),ov.copy(Jp))},reset:function(){Tp=!1,nv=null,ov.set(-1,0,0,0)}}}function Ru(){var Tp=!1,Jp=null,nv=null,ov=null;return{setTest:function(rv){rv?op(2929):rp(2929)},setMask:function(rv){Jp!==rv&&!Tp&&(_u.depthMask(rv),Jp=rv)},setFunc:function(rv){if(nv!==rv){if(rv)switch(rv){case NeverDepth:_u.depthFunc(512);break;case AlwaysDepth:_u.depthFunc(519);break;case LessDepth:_u.depthFunc(513);break;case LessEqualDepth:_u.depthFunc(515);break;case EqualDepth:_u.depthFunc(514);break;case GreaterEqualDepth:_u.depthFunc(518);break;case GreaterDepth:_u.depthFunc(516);break;case NotEqualDepth:_u.depthFunc(517);break;default:_u.depthFunc(515)}else _u.depthFunc(515);nv=rv}},setLocked:function(rv){Tp=rv},setClear:function(rv){ov!==rv&&(_u.clearDepth(rv),ov=rv)},reset:function(){Tp=!1,Jp=null,nv=null,ov=null}}}function Lu(){var Tp=!1,Jp=null,nv=null,ov=null,rv=null,hv=null,Av=null,xv=null,wv=null;return{setTest:function(fv){Tp||(fv?op(2960):rp(2960))},setMask:function(fv){Jp!==fv&&!Tp&&(_u.stencilMask(fv),Jp=fv)},setFunc:function(fv,$v,Tv){(nv!==fv||ov!==$v||rv!==Tv)&&(_u.stencilFunc(fv,$v,Tv),nv=fv,ov=$v,rv=Tv)},setOp:function(fv,$v,Tv){(hv!==fv||Av!==$v||xv!==Tv)&&(_u.stencilOp(fv,$v,Tv),hv=fv,Av=$v,xv=Tv)},setLocked:function(fv){Tp=fv},setClear:function(fv){wv!==fv&&(_u.clearStencil(fv),wv=fv)},reset:function(){Tp=!1,Jp=null,nv=null,ov=null,rv=null,hv=null,Av=null,xv=null,wv=null}}}var Bu=new Pu,Vu=new Ru,Ou=new Lu,Du=_u.getParameter(34921),ku=new Uint8Array(Du),Fu=new Uint8Array(Du),Nu=new Uint8Array(Du),Gu={},zu=null,Hu=null,Uu=null,ju=null,Wu=null,Qu=null,qu=null,Yu=null,Ju=null,_d=!1,tp=null,Ku=null,Xu=null,Zu=null,_c=null,Xc=_u.getParameter(35661),_h=!1,ip=0,ap=_u.getParameter(7938);ap.indexOf("WebGL")!==-1?(ip=parseFloat(/^WebGL\ ([0-9])/.exec(ap)[1]),_h=ip>=1):ap.indexOf("OpenGL ES")!==-1&&(ip=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ap)[1]),_h=ip>=2);var hp=null,Ap={},gp=new Vector4,Rp=new Vector4;function Sp(Tp,Jp,nv){var ov=new Uint8Array(4),rv=_u.createTexture();_u.bindTexture(Tp,rv),_u.texParameteri(Tp,10241,9728),_u.texParameteri(Tp,10240,9728);for(var hv=0;hv<nv;hv++)_u.texImage2D(Jp+hv,0,6408,1,1,0,6408,5121,ov);return rv}var Dp={};Dp[3553]=Sp(3553,3553,1),Dp[34067]=Sp(34067,34069,6),Bu.setClear(0,0,0,1),Vu.setClear(1),Ou.setClear(0),op(2929),Vu.setFunc(LessEqualDepth),sp(!1),lp(CullFaceBack),op(2884),xp(NoBlending);function Ep(){for(var Tp=0,Jp=ku.length;Tp<Jp;Tp++)ku[Tp]=0}function Bp(Tp){Ip(Tp,0)}function Ip(Tp,Jp){if(ku[Tp]=1,Fu[Tp]===0&&(_u.enableVertexAttribArray(Tp),Fu[Tp]=1),Nu[Tp]!==Jp){var nv=Cu?_u:$u.get("ANGLE_instanced_arrays");nv[Cu?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Tp,Jp),Nu[Tp]=Jp}}function ep(){for(var Tp=0,Jp=Fu.length;Tp!==Jp;++Tp)Fu[Tp]!==ku[Tp]&&(_u.disableVertexAttribArray(Tp),Fu[Tp]=0)}function _f(Tp,Jp,nv,ov,rv,hv){Cu===!0&&(nv===5124||nv===5125)?_u.vertexAttribIPointer(Tp,Jp,nv,ov,rv,hv):_u.vertexAttribPointer(Tp,Jp,nv,ov,rv,hv)}function op(Tp){Gu[Tp]!==!0&&(_u.enable(Tp),Gu[Tp]=!0)}function rp(Tp){Gu[Tp]!==!1&&(_u.disable(Tp),Gu[Tp]=!1)}function up(Tp){return zu!==Tp?(_u.useProgram(Tp),zu=Tp,!0):!1}var cp={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Cu)cp[MinEquation]=32775,cp[MaxEquation]=32776;else{var fp=$u.get("EXT_blend_minmax");fp!==null&&(cp[MinEquation]=fp.MIN_EXT,cp[MaxEquation]=fp.MAX_EXT)}var vp={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function xp(Tp,Jp,nv,ov,rv,hv,Av,xv){if(Tp===NoBlending){Hu&&(rp(3042),Hu=!1);return}if(Hu||(op(3042),Hu=!0),Tp!==CustomBlending){if(Tp!==Uu||xv!==_d){if((ju!==AddEquation||qu!==AddEquation)&&(_u.blendEquation(32774),ju=AddEquation,qu=AddEquation),xv)switch(Tp){case NormalBlending:_u.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:_u.blendFunc(1,1);break;case SubtractiveBlending:_u.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:_u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tp);break}else switch(Tp){case NormalBlending:_u.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:_u.blendFunc(770,1);break;case SubtractiveBlending:_u.blendFunc(0,769);break;case MultiplyBlending:_u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tp);break}Wu=null,Qu=null,Yu=null,Ju=null,Uu=Tp,_d=xv}return}rv=rv||Jp,hv=hv||nv,Av=Av||ov,(Jp!==ju||rv!==qu)&&(_u.blendEquationSeparate(cp[Jp],cp[rv]),ju=Jp,qu=rv),(nv!==Wu||ov!==Qu||hv!==Yu||Av!==Ju)&&(_u.blendFuncSeparate(vp[nv],vp[ov],vp[hv],vp[Av]),Wu=nv,Qu=ov,Yu=hv,Ju=Av),Uu=Tp,_d=null}function mp(Tp,Jp){Tp.side===DoubleSide?rp(2884):op(2884);var nv=Tp.side===BackSide;Jp&&(nv=!nv),sp(nv),Tp.blending===NormalBlending&&Tp.transparent===!1?xp(NoBlending):xp(Tp.blending,Tp.blendEquation,Tp.blendSrc,Tp.blendDst,Tp.blendEquationAlpha,Tp.blendSrcAlpha,Tp.blendDstAlpha,Tp.premultipliedAlpha),Vu.setFunc(Tp.depthFunc),Vu.setTest(Tp.depthTest),Vu.setMask(Tp.depthWrite),Bu.setMask(Tp.colorWrite);var ov=Tp.stencilWrite;Ou.setTest(ov),ov&&(Ou.setMask(Tp.stencilWriteMask),Ou.setFunc(Tp.stencilFunc,Tp.stencilRef,Tp.stencilFuncMask),Ou.setOp(Tp.stencilFail,Tp.stencilZFail,Tp.stencilZPass)),Mp(Tp.polygonOffset,Tp.polygonOffsetFactor,Tp.polygonOffsetUnits)}function sp(Tp){tp!==Tp&&(Tp?_u.frontFace(2304):_u.frontFace(2305),tp=Tp)}function lp(Tp){Tp!==CullFaceNone?(op(2884),Tp!==Ku&&(Tp===CullFaceBack?_u.cullFace(1029):Tp===CullFaceFront?_u.cullFace(1028):_u.cullFace(1032))):rp(2884),Ku=Tp}function $p(Tp){Tp!==Xu&&(_h&&_u.lineWidth(Tp),Xu=Tp)}function Mp(Tp,Jp,nv){Tp?(op(32823),(Zu!==Jp||_c!==nv)&&(_u.polygonOffset(Jp,nv),Zu=Jp,_c=nv)):rp(32823)}function kp(Tp){Tp?op(3089):rp(3089)}function Vp(Tp){Tp===void 0&&(Tp=33984+Xc-1),hp!==Tp&&(_u.activeTexture(Tp),hp=Tp)}function Gp(Tp,Jp){hp===null&&Vp();var nv=Ap[hp];nv===void 0&&(nv={type:void 0,texture:void 0},Ap[hp]=nv),(nv.type!==Tp||nv.texture!==Jp)&&(_u.bindTexture(Tp,Jp||Dp[Tp]),nv.type=Tp,nv.texture=Jp)}function qp(){var Tp=Ap[hp];Tp!==void 0&&Tp.type!==void 0&&(_u.bindTexture(Tp.type,null),Tp.type=void 0,Tp.texture=void 0)}function Wp(){try{_u.compressedTexImage2D.apply(_u,arguments)}catch(Tp){console.error("THREE.WebGLState:",Tp)}}function Yp(){try{_u.texImage2D.apply(_u,arguments)}catch(Tp){console.error("THREE.WebGLState:",Tp)}}function Kp(){try{_u.texImage3D.apply(_u,arguments)}catch(Tp){console.error("THREE.WebGLState:",Tp)}}function ev(Tp){gp.equals(Tp)===!1&&(_u.scissor(Tp.x,Tp.y,Tp.z,Tp.w),gp.copy(Tp))}function Xp(Tp){Rp.equals(Tp)===!1&&(_u.viewport(Tp.x,Tp.y,Tp.z,Tp.w),Rp.copy(Tp))}function Zp(){for(var Tp=0;Tp<Fu.length;Tp++)Fu[Tp]===1&&(_u.disableVertexAttribArray(Tp),Fu[Tp]=0);Gu={},hp=null,Ap={},zu=null,Uu=null,tp=null,Ku=null,Bu.reset(),Vu.reset(),Ou.reset()}return{buffers:{color:Bu,depth:Vu,stencil:Ou},initAttributes:Ep,enableAttribute:Bp,enableAttributeAndDivisor:Ip,disableUnusedAttributes:ep,vertexAttribPointer:_f,enable:op,disable:rp,useProgram:up,setBlending:xp,setMaterial:mp,setFlipSided:sp,setCullFace:lp,setLineWidth:$p,setPolygonOffset:Mp,setScissorTest:kp,activeTexture:Vp,bindTexture:Gp,unbindTexture:qp,compressedTexImage2D:Wp,texImage2D:Yp,texImage3D:Kp,scissor:ev,viewport:Xp,reset:Zp}}function WebGLTextures(_u,$u,Tu,Cu,Pu,Ru,Lu){var Bu=Pu.isWebGL2,Vu=Pu.maxTextures,Ou=Pu.maxCubemapSize,Du=Pu.maxTextureSize,ku=Pu.maxSamples,Fu=new WeakMap,Nu,Gu=!1;try{Gu=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function zu(sp,lp){return Gu?new OffscreenCanvas(sp,lp):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Hu(sp,lp,$p,Mp){var kp=1;if((sp.width>Mp||sp.height>Mp)&&(kp=Mp/Math.max(sp.width,sp.height)),kp<1||lp===!0)if(typeof HTMLImageElement!="undefined"&&sp instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&sp instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&sp instanceof ImageBitmap){var Vp=lp?MathUtils.floorPowerOfTwo:Math.floor,Gp=Vp(kp*sp.width),qp=Vp(kp*sp.height);Nu===void 0&&(Nu=zu(Gp,qp));var Wp=$p?zu(Gp,qp):Nu;Wp.width=Gp,Wp.height=qp;var Yp=Wp.getContext("2d");return Yp.drawImage(sp,0,0,Gp,qp),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+sp.width+"x"+sp.height+") to ("+Gp+"x"+qp+")."),Wp}else return"data"in sp&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+sp.width+"x"+sp.height+")."),sp;return sp}function Uu(sp){return MathUtils.isPowerOfTwo(sp.width)&&MathUtils.isPowerOfTwo(sp.height)}function ju(sp){return Bu?!1:sp.wrapS!==ClampToEdgeWrapping||sp.wrapT!==ClampToEdgeWrapping||sp.minFilter!==NearestFilter&&sp.minFilter!==LinearFilter}function Wu(sp,lp){return sp.generateMipmaps&&lp&&sp.minFilter!==NearestFilter&&sp.minFilter!==LinearFilter}function Qu(sp,lp,$p,Mp){_u.generateMipmap(sp);var kp=Cu.get(lp);kp.__maxMipLevel=Math.log(Math.max($p,Mp))*Math.LOG2E}function qu(sp,lp,$p){if(Bu===!1)return lp;if(sp!==null){if(_u[sp]!==void 0)return _u[sp];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+sp+"'")}var Mp=lp;return lp===6403&&($p===5126&&(Mp=33326),$p===5131&&(Mp=33325),$p===5121&&(Mp=33321)),lp===6407&&($p===5126&&(Mp=34837),$p===5131&&(Mp=34843),$p===5121&&(Mp=32849)),lp===6408&&($p===5126&&(Mp=34836),$p===5131&&(Mp=34842),$p===5121&&(Mp=32856)),(Mp===33325||Mp===33326||Mp===34842||Mp===34836)&&$u.get("EXT_color_buffer_float"),Mp}function Yu(sp){return sp===NearestFilter||sp===NearestMipmapNearestFilter||sp===NearestMipmapLinearFilter?9728:9729}function Ju(sp){var lp=sp.target;lp.removeEventListener("dispose",Ju),tp(lp),lp.isVideoTexture&&Fu.delete(lp),Lu.memory.textures--}function _d(sp){var lp=sp.target;lp.removeEventListener("dispose",_d),Ku(lp),Lu.memory.textures--}function tp(sp){var lp=Cu.get(sp);lp.__webglInit!==void 0&&(_u.deleteTexture(lp.__webglTexture),Cu.remove(sp))}function Ku(sp){var lp=Cu.get(sp),$p=Cu.get(sp.texture);if(!!sp){if($p.__webglTexture!==void 0&&_u.deleteTexture($p.__webglTexture),sp.depthTexture&&sp.depthTexture.dispose(),sp.isWebGLCubeRenderTarget)for(var Mp=0;Mp<6;Mp++)_u.deleteFramebuffer(lp.__webglFramebuffer[Mp]),lp.__webglDepthbuffer&&_u.deleteRenderbuffer(lp.__webglDepthbuffer[Mp]);else _u.deleteFramebuffer(lp.__webglFramebuffer),lp.__webglDepthbuffer&&_u.deleteRenderbuffer(lp.__webglDepthbuffer),lp.__webglMultisampledFramebuffer&&_u.deleteFramebuffer(lp.__webglMultisampledFramebuffer),lp.__webglColorRenderbuffer&&_u.deleteRenderbuffer(lp.__webglColorRenderbuffer),lp.__webglDepthRenderbuffer&&_u.deleteRenderbuffer(lp.__webglDepthRenderbuffer);Cu.remove(sp.texture),Cu.remove(sp)}}var Xu=0;function Zu(){Xu=0}function _c(){var sp=Xu;return sp>=Vu&&console.warn("THREE.WebGLTextures: Trying to use "+sp+" texture units while this GPU supports only "+Vu),Xu+=1,sp}function Xc(sp,lp){var $p=Cu.get(sp);if(sp.isVideoTexture&&cp(sp),sp.version>0&&$p.__version!==sp.version){var Mp=sp.image;if(Mp===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Mp.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Dp($p,sp,lp);return}}Tu.activeTexture(33984+lp),Tu.bindTexture(3553,$p.__webglTexture)}function _h(sp,lp){var $p=Cu.get(sp);if(sp.version>0&&$p.__version!==sp.version){Dp($p,sp,lp);return}Tu.activeTexture(33984+lp),Tu.bindTexture(35866,$p.__webglTexture)}function ip(sp,lp){var $p=Cu.get(sp);if(sp.version>0&&$p.__version!==sp.version){Dp($p,sp,lp);return}Tu.activeTexture(33984+lp),Tu.bindTexture(32879,$p.__webglTexture)}function ap(sp,lp){if(sp.image.length===6){var $p=Cu.get(sp);if(sp.version>0&&$p.__version!==sp.version){Sp($p,sp),Tu.activeTexture(33984+lp),Tu.bindTexture(34067,$p.__webglTexture),_u.pixelStorei(37440,sp.flipY);for(var Mp=sp&&(sp.isCompressedTexture||sp.image[0].isCompressedTexture),kp=sp.image[0]&&sp.image[0].isDataTexture,Vp=[],Gp=0;Gp<6;Gp++)!Mp&&!kp?Vp[Gp]=Hu(sp.image[Gp],!1,!0,Ou):Vp[Gp]=kp?sp.image[Gp].image:sp.image[Gp];var qp=Vp[0],Wp=Uu(qp)||Bu,Yp=Ru.convert(sp.format),Kp=Ru.convert(sp.type),ev=qu(sp.internalFormat,Yp,Kp);Rp(34067,sp,Wp);var Xp;if(Mp){for(var Gp=0;Gp<6;Gp++){Xp=Vp[Gp].mipmaps;for(var Zp=0;Zp<Xp.length;Zp++){var Tp=Xp[Zp];sp.format!==RGBAFormat&&sp.format!==RGBFormat?Yp!==null?Tu.compressedTexImage2D(34069+Gp,Zp,ev,Tp.width,Tp.height,0,Tp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Tu.texImage2D(34069+Gp,Zp,ev,Tp.width,Tp.height,0,Yp,Kp,Tp.data)}}$p.__maxMipLevel=Xp.length-1}else{Xp=sp.mipmaps;for(var Gp=0;Gp<6;Gp++)if(kp){Tu.texImage2D(34069+Gp,0,ev,Vp[Gp].width,Vp[Gp].height,0,Yp,Kp,Vp[Gp].data);for(var Zp=0;Zp<Xp.length;Zp++){var Tp=Xp[Zp],Jp=Tp.image[Gp].image;Tu.texImage2D(34069+Gp,Zp+1,ev,Jp.width,Jp.height,0,Yp,Kp,Jp.data)}}else{Tu.texImage2D(34069+Gp,0,ev,Yp,Kp,Vp[Gp]);for(var Zp=0;Zp<Xp.length;Zp++){var Tp=Xp[Zp];Tu.texImage2D(34069+Gp,Zp+1,ev,Yp,Kp,Tp.image[Gp])}}$p.__maxMipLevel=Xp.length}Wu(sp,Wp)&&Qu(34067,sp,qp.width,qp.height),$p.__version=sp.version,sp.onUpdate&&sp.onUpdate(sp)}else Tu.activeTexture(33984+lp),Tu.bindTexture(34067,$p.__webglTexture)}}function hp(sp,lp){Tu.activeTexture(33984+lp),Tu.bindTexture(34067,Cu.get(sp).__webglTexture)}var Ap={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},gp={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Rp(sp,lp,$p){$p?(_u.texParameteri(sp,10242,Ap[lp.wrapS]),_u.texParameteri(sp,10243,Ap[lp.wrapT]),(sp===32879||sp===35866)&&_u.texParameteri(sp,32882,Ap[lp.wrapR]),_u.texParameteri(sp,10240,gp[lp.magFilter]),_u.texParameteri(sp,10241,gp[lp.minFilter])):(_u.texParameteri(sp,10242,33071),_u.texParameteri(sp,10243,33071),(sp===32879||sp===35866)&&_u.texParameteri(sp,32882,33071),(lp.wrapS!==ClampToEdgeWrapping||lp.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_u.texParameteri(sp,10240,Yu(lp.magFilter)),_u.texParameteri(sp,10241,Yu(lp.minFilter)),lp.minFilter!==NearestFilter&&lp.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Mp=$u.get("EXT_texture_filter_anisotropic");if(Mp){if(lp.type===FloatType&&$u.get("OES_texture_float_linear")===null||lp.type===HalfFloatType&&(Bu||$u.get("OES_texture_half_float_linear"))===null)return;(lp.anisotropy>1||Cu.get(lp).__currentAnisotropy)&&(_u.texParameterf(sp,Mp.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(lp.anisotropy,Pu.getMaxAnisotropy())),Cu.get(lp).__currentAnisotropy=lp.anisotropy)}}function Sp(sp,lp){sp.__webglInit===void 0&&(sp.__webglInit=!0,lp.addEventListener("dispose",Ju),sp.__webglTexture=_u.createTexture(),Lu.memory.textures++)}function Dp(sp,lp,$p){var Mp=3553;lp.isDataTexture2DArray&&(Mp=35866),lp.isDataTexture3D&&(Mp=32879),Sp(sp,lp),Tu.activeTexture(33984+$p),Tu.bindTexture(Mp,sp.__webglTexture),_u.pixelStorei(37440,lp.flipY),_u.pixelStorei(37441,lp.premultiplyAlpha),_u.pixelStorei(3317,lp.unpackAlignment);var kp=ju(lp)&&Uu(lp.image)===!1,Vp=Hu(lp.image,kp,!1,Du),Gp=Uu(Vp)||Bu,qp=Ru.convert(lp.format),Wp=Ru.convert(lp.type),Yp=qu(lp.internalFormat,qp,Wp);Rp(Mp,lp,Gp);var Kp,ev=lp.mipmaps;if(lp.isDepthTexture)Yp=6402,Bu?lp.type===FloatType?Yp=36012:lp.type===UnsignedIntType?Yp=33190:lp.type===UnsignedInt248Type?Yp=35056:Yp=33189:lp.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),lp.format===DepthFormat&&Yp===6402&&lp.type!==UnsignedShortType&&lp.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),lp.type=UnsignedShortType,Wp=Ru.convert(lp.type)),lp.format===DepthStencilFormat&&Yp===6402&&(Yp=34041,lp.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),lp.type=UnsignedInt248Type,Wp=Ru.convert(lp.type))),Tu.texImage2D(3553,0,Yp,Vp.width,Vp.height,0,qp,Wp,null);else if(lp.isDataTexture)if(ev.length>0&&Gp){for(var Xp=0,Zp=ev.length;Xp<Zp;Xp++)Kp=ev[Xp],Tu.texImage2D(3553,Xp,Yp,Kp.width,Kp.height,0,qp,Wp,Kp.data);lp.generateMipmaps=!1,sp.__maxMipLevel=ev.length-1}else Tu.texImage2D(3553,0,Yp,Vp.width,Vp.height,0,qp,Wp,Vp.data),sp.__maxMipLevel=0;else if(lp.isCompressedTexture){for(var Xp=0,Zp=ev.length;Xp<Zp;Xp++)Kp=ev[Xp],lp.format!==RGBAFormat&&lp.format!==RGBFormat?qp!==null?Tu.compressedTexImage2D(3553,Xp,Yp,Kp.width,Kp.height,0,Kp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Tu.texImage2D(3553,Xp,Yp,Kp.width,Kp.height,0,qp,Wp,Kp.data);sp.__maxMipLevel=ev.length-1}else if(lp.isDataTexture2DArray)Tu.texImage3D(35866,0,Yp,Vp.width,Vp.height,Vp.depth,0,qp,Wp,Vp.data),sp.__maxMipLevel=0;else if(lp.isDataTexture3D)Tu.texImage3D(32879,0,Yp,Vp.width,Vp.height,Vp.depth,0,qp,Wp,Vp.data),sp.__maxMipLevel=0;else if(ev.length>0&&Gp){for(var Xp=0,Zp=ev.length;Xp<Zp;Xp++)Kp=ev[Xp],Tu.texImage2D(3553,Xp,Yp,qp,Wp,Kp);lp.generateMipmaps=!1,sp.__maxMipLevel=ev.length-1}else Tu.texImage2D(3553,0,Yp,qp,Wp,Vp),sp.__maxMipLevel=0;Wu(lp,Gp)&&Qu(Mp,lp,Vp.width,Vp.height),sp.__version=lp.version,lp.onUpdate&&lp.onUpdate(lp)}function Ep(sp,lp,$p,Mp){var kp=Ru.convert(lp.texture.format),Vp=Ru.convert(lp.texture.type),Gp=qu(lp.texture.internalFormat,kp,Vp);Tu.texImage2D(Mp,0,Gp,lp.width,lp.height,0,kp,Vp,null),_u.bindFramebuffer(36160,sp),_u.framebufferTexture2D(36160,$p,Mp,Cu.get(lp.texture).__webglTexture,0),_u.bindFramebuffer(36160,null)}function Bp(sp,lp,$p){if(_u.bindRenderbuffer(36161,sp),lp.depthBuffer&&!lp.stencilBuffer){var Mp=33189;if($p){var kp=lp.depthTexture;kp&&kp.isDepthTexture&&(kp.type===FloatType?Mp=36012:kp.type===UnsignedIntType&&(Mp=33190));var Vp=up(lp);_u.renderbufferStorageMultisample(36161,Vp,Mp,lp.width,lp.height)}else _u.renderbufferStorage(36161,Mp,lp.width,lp.height);_u.framebufferRenderbuffer(36160,36096,36161,sp)}else if(lp.depthBuffer&&lp.stencilBuffer){if($p){var Vp=up(lp);_u.renderbufferStorageMultisample(36161,Vp,35056,lp.width,lp.height)}else _u.renderbufferStorage(36161,34041,lp.width,lp.height);_u.framebufferRenderbuffer(36160,33306,36161,sp)}else{var Gp=Ru.convert(lp.texture.format),qp=Ru.convert(lp.texture.type),Mp=qu(lp.texture.internalFormat,Gp,qp);if($p){var Vp=up(lp);_u.renderbufferStorageMultisample(36161,Vp,Mp,lp.width,lp.height)}else _u.renderbufferStorage(36161,Mp,lp.width,lp.height)}_u.bindRenderbuffer(36161,null)}function Ip(sp,lp){var $p=lp&&lp.isWebGLCubeRenderTarget;if($p)throw new Error("Depth Texture with cube render targets is not supported");if(_u.bindFramebuffer(36160,sp),!(lp.depthTexture&&lp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Cu.get(lp.depthTexture).__webglTexture||lp.depthTexture.image.width!==lp.width||lp.depthTexture.image.height!==lp.height)&&(lp.depthTexture.image.width=lp.width,lp.depthTexture.image.height=lp.height,lp.depthTexture.needsUpdate=!0),Xc(lp.depthTexture,0);var Mp=Cu.get(lp.depthTexture).__webglTexture;if(lp.depthTexture.format===DepthFormat)_u.framebufferTexture2D(36160,36096,3553,Mp,0);else if(lp.depthTexture.format===DepthStencilFormat)_u.framebufferTexture2D(36160,33306,3553,Mp,0);else throw new Error("Unknown depthTexture format")}function ep(sp){var lp=Cu.get(sp),$p=sp.isWebGLCubeRenderTarget===!0;if(sp.depthTexture){if($p)throw new Error("target.depthTexture not supported in Cube render targets");Ip(lp.__webglFramebuffer,sp)}else if($p){lp.__webglDepthbuffer=[];for(var Mp=0;Mp<6;Mp++)_u.bindFramebuffer(36160,lp.__webglFramebuffer[Mp]),lp.__webglDepthbuffer[Mp]=_u.createRenderbuffer(),Bp(lp.__webglDepthbuffer[Mp],sp,!1)}else _u.bindFramebuffer(36160,lp.__webglFramebuffer),lp.__webglDepthbuffer=_u.createRenderbuffer(),Bp(lp.__webglDepthbuffer,sp,!1);_u.bindFramebuffer(36160,null)}function _f(sp){var lp=Cu.get(sp),$p=Cu.get(sp.texture);sp.addEventListener("dispose",_d),$p.__webglTexture=_u.createTexture(),Lu.memory.textures++;var Mp=sp.isWebGLCubeRenderTarget===!0,kp=sp.isWebGLMultisampleRenderTarget===!0,Vp=Uu(sp)||Bu;if(Bu&&sp.texture.format===RGBFormat&&(sp.texture.type===FloatType||sp.texture.type===HalfFloatType)&&(sp.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Mp){lp.__webglFramebuffer=[];for(var Gp=0;Gp<6;Gp++)lp.__webglFramebuffer[Gp]=_u.createFramebuffer()}else if(lp.__webglFramebuffer=_u.createFramebuffer(),kp)if(Bu){lp.__webglMultisampledFramebuffer=_u.createFramebuffer(),lp.__webglColorRenderbuffer=_u.createRenderbuffer(),_u.bindRenderbuffer(36161,lp.__webglColorRenderbuffer);var qp=Ru.convert(sp.texture.format),Wp=Ru.convert(sp.texture.type),Yp=qu(sp.texture.internalFormat,qp,Wp),Kp=up(sp);_u.renderbufferStorageMultisample(36161,Kp,Yp,sp.width,sp.height),_u.bindFramebuffer(36160,lp.__webglMultisampledFramebuffer),_u.framebufferRenderbuffer(36160,36064,36161,lp.__webglColorRenderbuffer),_u.bindRenderbuffer(36161,null),sp.depthBuffer&&(lp.__webglDepthRenderbuffer=_u.createRenderbuffer(),Bp(lp.__webglDepthRenderbuffer,sp,!0)),_u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Mp){Tu.bindTexture(34067,$p.__webglTexture),Rp(34067,sp.texture,Vp);for(var Gp=0;Gp<6;Gp++)Ep(lp.__webglFramebuffer[Gp],sp,36064,34069+Gp);Wu(sp.texture,Vp)&&Qu(34067,sp.texture,sp.width,sp.height),Tu.bindTexture(34067,null)}else Tu.bindTexture(3553,$p.__webglTexture),Rp(3553,sp.texture,Vp),Ep(lp.__webglFramebuffer,sp,36064,3553),Wu(sp.texture,Vp)&&Qu(3553,sp.texture,sp.width,sp.height),Tu.bindTexture(3553,null);sp.depthBuffer&&ep(sp)}function op(sp){var lp=sp.texture,$p=Uu(sp)||Bu;if(Wu(lp,$p)){var Mp=sp.isWebGLCubeRenderTarget?34067:3553,kp=Cu.get(lp).__webglTexture;Tu.bindTexture(Mp,kp),Qu(Mp,lp,sp.width,sp.height),Tu.bindTexture(Mp,null)}}function rp(sp){if(sp.isWebGLMultisampleRenderTarget)if(Bu){var lp=Cu.get(sp);_u.bindFramebuffer(36008,lp.__webglMultisampledFramebuffer),_u.bindFramebuffer(36009,lp.__webglFramebuffer);var $p=sp.width,Mp=sp.height,kp=16384;sp.depthBuffer&&(kp|=256),sp.stencilBuffer&&(kp|=1024),_u.blitFramebuffer(0,0,$p,Mp,0,0,$p,Mp,kp,9728),_u.bindFramebuffer(36160,lp.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function up(sp){return Bu&&sp.isWebGLMultisampleRenderTarget?Math.min(ku,sp.samples):0}function cp(sp){var lp=Lu.render.frame;Fu.get(sp)!==lp&&(Fu.set(sp,lp),sp.update())}var fp=!1,vp=!1;function xp(sp,lp){sp&&sp.isWebGLRenderTarget&&(fp===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),fp=!0),sp=sp.texture),Xc(sp,lp)}function mp(sp,lp){sp&&sp.isWebGLCubeRenderTarget&&(vp===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),vp=!0),sp=sp.texture),sp&&sp.isCubeTexture||Array.isArray(sp.image)&&sp.image.length===6?ap(sp,lp):hp(sp,lp)}this.allocateTextureUnit=_c,this.resetTextureUnits=Zu,this.setTexture2D=Xc,this.setTexture2DArray=_h,this.setTexture3D=ip,this.setTextureCube=ap,this.setTextureCubeDynamic=hp,this.setupRenderTarget=_f,this.updateRenderTargetMipmap=op,this.updateMultisampleRenderTarget=rp,this.safeSetTexture2D=xp,this.safeSetTextureCube=mp}function WebGLUtils(_u,$u,Tu){var Cu=Tu.isWebGL2;function Pu(Ru){var Lu;if(Ru===UnsignedByteType)return 5121;if(Ru===UnsignedShort4444Type)return 32819;if(Ru===UnsignedShort5551Type)return 32820;if(Ru===UnsignedShort565Type)return 33635;if(Ru===ByteType)return 5120;if(Ru===ShortType)return 5122;if(Ru===UnsignedShortType)return 5123;if(Ru===IntType)return 5124;if(Ru===UnsignedIntType)return 5125;if(Ru===FloatType)return 5126;if(Ru===HalfFloatType)return Cu?5131:(Lu=$u.get("OES_texture_half_float"),Lu!==null?Lu.HALF_FLOAT_OES:null);if(Ru===AlphaFormat)return 6406;if(Ru===RGBFormat)return 6407;if(Ru===RGBAFormat)return 6408;if(Ru===LuminanceFormat)return 6409;if(Ru===LuminanceAlphaFormat)return 6410;if(Ru===DepthFormat)return 6402;if(Ru===DepthStencilFormat)return 34041;if(Ru===RedFormat)return 6403;if(Ru===RedIntegerFormat)return 36244;if(Ru===RGFormat)return 33319;if(Ru===RGIntegerFormat)return 33320;if(Ru===RGBIntegerFormat)return 36248;if(Ru===RGBAIntegerFormat)return 36249;if(Ru===RGB_S3TC_DXT1_Format||Ru===RGBA_S3TC_DXT1_Format||Ru===RGBA_S3TC_DXT3_Format||Ru===RGBA_S3TC_DXT5_Format)if(Lu=$u.get("WEBGL_compressed_texture_s3tc"),Lu!==null){if(Ru===RGB_S3TC_DXT1_Format)return Lu.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ru===RGBA_S3TC_DXT1_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ru===RGBA_S3TC_DXT3_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ru===RGBA_S3TC_DXT5_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Ru===RGB_PVRTC_4BPPV1_Format||Ru===RGB_PVRTC_2BPPV1_Format||Ru===RGBA_PVRTC_4BPPV1_Format||Ru===RGBA_PVRTC_2BPPV1_Format)if(Lu=$u.get("WEBGL_compressed_texture_pvrtc"),Lu!==null){if(Ru===RGB_PVRTC_4BPPV1_Format)return Lu.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ru===RGB_PVRTC_2BPPV1_Format)return Lu.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ru===RGBA_PVRTC_4BPPV1_Format)return Lu.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ru===RGBA_PVRTC_2BPPV1_Format)return Lu.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Ru===RGB_ETC1_Format)return Lu=$u.get("WEBGL_compressed_texture_etc1"),Lu!==null?Lu.COMPRESSED_RGB_ETC1_WEBGL:null;if((Ru===RGB_ETC2_Format||Ru===RGBA_ETC2_EAC_Format)&&(Lu=$u.get("WEBGL_compressed_texture_etc"),Lu!==null)){if(Ru===RGB_ETC2_Format)return Lu.COMPRESSED_RGB8_ETC2;if(Ru===RGBA_ETC2_EAC_Format)return Lu.COMPRESSED_RGBA8_ETC2_EAC}if(Ru===RGBA_ASTC_4x4_Format||Ru===RGBA_ASTC_5x4_Format||Ru===RGBA_ASTC_5x5_Format||Ru===RGBA_ASTC_6x5_Format||Ru===RGBA_ASTC_6x6_Format||Ru===RGBA_ASTC_8x5_Format||Ru===RGBA_ASTC_8x6_Format||Ru===RGBA_ASTC_8x8_Format||Ru===RGBA_ASTC_10x5_Format||Ru===RGBA_ASTC_10x6_Format||Ru===RGBA_ASTC_10x8_Format||Ru===RGBA_ASTC_10x10_Format||Ru===RGBA_ASTC_12x10_Format||Ru===RGBA_ASTC_12x12_Format||Ru===SRGB8_ALPHA8_ASTC_4x4_Format||Ru===SRGB8_ALPHA8_ASTC_5x4_Format||Ru===SRGB8_ALPHA8_ASTC_5x5_Format||Ru===SRGB8_ALPHA8_ASTC_6x5_Format||Ru===SRGB8_ALPHA8_ASTC_6x6_Format||Ru===SRGB8_ALPHA8_ASTC_8x5_Format||Ru===SRGB8_ALPHA8_ASTC_8x6_Format||Ru===SRGB8_ALPHA8_ASTC_8x8_Format||Ru===SRGB8_ALPHA8_ASTC_10x5_Format||Ru===SRGB8_ALPHA8_ASTC_10x6_Format||Ru===SRGB8_ALPHA8_ASTC_10x8_Format||Ru===SRGB8_ALPHA8_ASTC_10x10_Format||Ru===SRGB8_ALPHA8_ASTC_12x10_Format||Ru===SRGB8_ALPHA8_ASTC_12x12_Format)return Lu=$u.get("WEBGL_compressed_texture_astc"),Lu!==null?Ru:null;if(Ru===RGBA_BPTC_Format)return Lu=$u.get("EXT_texture_compression_bptc"),Lu!==null?Ru:null;if(Ru===UnsignedInt248Type)return Cu?34042:(Lu=$u.get("WEBGL_depth_texture"),Lu!==null?Lu.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Pu}}function ArrayCamera(_u){PerspectiveCamera.call(this),this.cameras=_u||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(_u){return this._targetRay!==null&&this._targetRay.dispatchEvent(_u),this._grip!==null&&this._grip.dispatchEvent(_u),this},disconnect:function(_u){return this.dispatchEvent({type:"disconnected",data:_u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(_u,$u,Tu){var Cu=null,Pu=null,Ru=this._targetRay,Lu=this._grip;return _u&&(Ru!==null&&(Cu=$u.getPose(_u.targetRaySpace,Tu),Cu!==null&&(Ru.matrix.fromArray(Cu.transform.matrix),Ru.matrix.decompose(Ru.position,Ru.rotation,Ru.scale))),Lu!==null&&_u.gripSpace&&(Pu=$u.getPose(_u.gripSpace,Tu),Pu!==null&&(Lu.matrix.fromArray(Pu.transform.matrix),Lu.matrix.decompose(Lu.position,Lu.rotation,Lu.scale)))),Ru!==null&&(Ru.visible=Cu!==null),Lu!==null&&(Lu.visible=Pu!==null),this}});function WebXRManager(_u,$u){var Tu=this,Cu=null,Pu=1,Ru=null,Lu="local-floor",Bu=null,Vu=[],Ou=new Map,Du=new PerspectiveCamera;Du.layers.enable(1),Du.viewport=new Vector4;var ku=new PerspectiveCamera;ku.layers.enable(2),ku.viewport=new Vector4;var Fu=[Du,ku],Nu=new ArrayCamera;Nu.layers.enable(1),Nu.layers.enable(2);var Gu=null,zu=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Xu){var Zu=Vu[Xu];return Zu===void 0&&(Zu=new WebXRController,Vu[Xu]=Zu),Zu.getTargetRaySpace()},this.getControllerGrip=function(Xu){var Zu=Vu[Xu];return Zu===void 0&&(Zu=new WebXRController,Vu[Xu]=Zu),Zu.getGripSpace()};function Hu(Xu){var Zu=Ou.get(Xu.inputSource);Zu&&Zu.dispatchEvent({type:Xu.type})}function Uu(){Ou.forEach(function(Xu,Zu){Xu.disconnect(Zu)}),Ou.clear(),_u.setFramebuffer(null),_u.setRenderTarget(_u.getRenderTarget()),Ku.stop(),Tu.isPresenting=!1,Tu.dispatchEvent({type:"sessionend"})}function ju(Xu){Ru=Xu,Ku.setContext(Cu),Ku.start(),Tu.isPresenting=!0,Tu.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Xu){Pu=Xu,Tu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Xu){Lu=Xu,Tu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Ru},this.getSession=function(){return Cu},this.setSession=function(Xu){if(Cu=Xu,Cu!==null){Cu.addEventListener("select",Hu),Cu.addEventListener("selectstart",Hu),Cu.addEventListener("selectend",Hu),Cu.addEventListener("squeeze",Hu),Cu.addEventListener("squeezestart",Hu),Cu.addEventListener("squeezeend",Hu),Cu.addEventListener("end",Uu);var Zu=$u.getContextAttributes();Zu.xrCompatible!==!0&&$u.makeXRCompatible();var _c={antialias:Zu.antialias,alpha:Zu.alpha,depth:Zu.depth,stencil:Zu.stencil,framebufferScaleFactor:Pu},Xc=new XRWebGLLayer(Cu,$u,_c);Cu.updateRenderState({baseLayer:Xc}),Cu.requestReferenceSpace(Lu).then(ju),Cu.addEventListener("inputsourceschange",Wu)}};function Wu(Xu){for(var Zu=Cu.inputSources,_c=0;_c<Vu.length;_c++)Ou.set(Zu[_c],Vu[_c]);for(var _c=0;_c<Xu.removed.length;_c++){var Xc=Xu.removed[_c],_h=Ou.get(Xc);_h&&(_h.dispatchEvent({type:"disconnected",data:Xc}),Ou.delete(Xc))}for(var _c=0;_c<Xu.added.length;_c++){var Xc=Xu.added[_c],_h=Ou.get(Xc);_h&&_h.dispatchEvent({type:"connected",data:Xc})}}var Qu=new Vector3,qu=new Vector3;function Yu(Xu,Zu,_c){Qu.setFromMatrixPosition(Zu.matrixWorld),qu.setFromMatrixPosition(_c.matrixWorld);var Xc=Qu.distanceTo(qu),_h=Zu.projectionMatrix.elements,ip=_c.projectionMatrix.elements,ap=_h[14]/(_h[10]-1),hp=_h[14]/(_h[10]+1),Ap=(_h[9]+1)/_h[5],gp=(_h[9]-1)/_h[5],Rp=(_h[8]-1)/_h[0],Sp=(ip[8]+1)/ip[0],Dp=ap*Rp,Ep=ap*Sp,Bp=Xc/(-Rp+Sp),Ip=Bp*-Rp;Zu.matrixWorld.decompose(Xu.position,Xu.quaternion,Xu.scale),Xu.translateX(Ip),Xu.translateZ(Bp),Xu.matrixWorld.compose(Xu.position,Xu.quaternion,Xu.scale),Xu.matrixWorldInverse.getInverse(Xu.matrixWorld);var ep=ap+Bp,_f=hp+Bp,op=Dp-Ip,rp=Ep+(Xc-Ip),up=Ap*hp/_f*ep,cp=gp*hp/_f*ep;Xu.projectionMatrix.makePerspective(op,rp,up,cp,ep,_f)}function Ju(Xu,Zu){Zu===null?Xu.matrixWorld.copy(Xu.matrix):Xu.matrixWorld.multiplyMatrices(Zu.matrixWorld,Xu.matrix),Xu.matrixWorldInverse.getInverse(Xu.matrixWorld)}this.getCamera=function(Xu){Nu.near=ku.near=Du.near=Xu.near,Nu.far=ku.far=Du.far=Xu.far,(Gu!==Nu.near||zu!==Nu.far)&&(Cu.updateRenderState({depthNear:Nu.near,depthFar:Nu.far}),Gu=Nu.near,zu=Nu.far);var Zu=Xu.parent,_c=Nu.cameras;Ju(Nu,Zu);for(var Xc=0;Xc<_c.length;Xc++)Ju(_c[Xc],Zu);Xu.matrixWorld.copy(Nu.matrixWorld);for(var _h=Xu.children,Xc=0,ip=_h.length;Xc<ip;Xc++)_h[Xc].updateMatrixWorld(!0);return _c.length===2?Yu(Nu,Du,ku):Nu.projectionMatrix.copy(Du.projectionMatrix),Nu};var _d=null;function tp(Xu,Zu){if(Bu=Zu.getViewerPose(Ru),Bu!==null){var _c=Bu.views,Xc=Cu.renderState.baseLayer;_u.setFramebuffer(Xc.framebuffer);var _h=!1;_c.length!==Nu.cameras.length&&(Nu.cameras.length=0,_h=!0);for(var ip=0;ip<_c.length;ip++){var ap=_c[ip],hp=Xc.getViewport(ap),Ap=Fu[ip];Ap.matrix.fromArray(ap.transform.matrix),Ap.projectionMatrix.fromArray(ap.projectionMatrix),Ap.viewport.set(hp.x,hp.y,hp.width,hp.height),ip===0&&Nu.matrix.copy(Ap.matrix),_h===!0&&Nu.cameras.push(Ap)}}for(var gp=Cu.inputSources,ip=0;ip<Vu.length;ip++){var Rp=Vu[ip],Sp=gp[ip];Rp.update(Sp,Zu,Ru)}_d&&_d(Xu,Zu)}var Ku=new WebGLAnimation;Ku.setAnimationLoop(tp),this.setAnimationLoop=function(Xu){_d=Xu},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(_u){function $u(Uu,ju){Uu.fogColor.value.copy(ju.color),ju.isFog?(Uu.fogNear.value=ju.near,Uu.fogFar.value=ju.far):ju.isFogExp2&&(Uu.fogDensity.value=ju.density)}function Tu(Uu,ju,Wu,Qu,qu){ju.isMeshBasicMaterial?Cu(Uu,ju):ju.isMeshLambertMaterial?(Cu(Uu,ju),Vu(Uu,ju)):ju.isMeshToonMaterial?(Cu(Uu,ju),Du(Uu,ju)):ju.isMeshPhongMaterial?(Cu(Uu,ju),Ou(Uu,ju)):ju.isMeshStandardMaterial?(Cu(Uu,ju,Wu),ju.isMeshPhysicalMaterial?Fu(Uu,ju,Wu):ku(Uu,ju,Wu)):ju.isMeshMatcapMaterial?(Cu(Uu,ju),Nu(Uu,ju)):ju.isMeshDepthMaterial?(Cu(Uu,ju),Gu(Uu,ju)):ju.isMeshDistanceMaterial?(Cu(Uu,ju),zu(Uu,ju)):ju.isMeshNormalMaterial?(Cu(Uu,ju),Hu(Uu,ju)):ju.isLineBasicMaterial?(Pu(Uu,ju),ju.isLineDashedMaterial&&Ru(Uu,ju)):ju.isPointsMaterial?Lu(Uu,ju,Qu,qu):ju.isSpriteMaterial?Bu(Uu,ju):ju.isShadowMaterial?(Uu.color.value.copy(ju.color),Uu.opacity.value=ju.opacity):ju.isShaderMaterial&&(ju.uniformsNeedUpdate=!1)}function Cu(Uu,ju,Wu){Uu.opacity.value=ju.opacity,ju.color&&Uu.diffuse.value.copy(ju.color),ju.emissive&&Uu.emissive.value.copy(ju.emissive).multiplyScalar(ju.emissiveIntensity),ju.map&&(Uu.map.value=ju.map),ju.alphaMap&&(Uu.alphaMap.value=ju.alphaMap),ju.specularMap&&(Uu.specularMap.value=ju.specularMap);var Qu=ju.envMap||Wu;Qu&&(Uu.envMap.value=Qu,Uu.flipEnvMap.value=Qu.isCubeTexture?-1:1,Uu.reflectivity.value=ju.reflectivity,Uu.refractionRatio.value=ju.refractionRatio,Uu.maxMipLevel.value=_u.get(Qu).__maxMipLevel),ju.lightMap&&(Uu.lightMap.value=ju.lightMap,Uu.lightMapIntensity.value=ju.lightMapIntensity),ju.aoMap&&(Uu.aoMap.value=ju.aoMap,Uu.aoMapIntensity.value=ju.aoMapIntensity);var qu;ju.map?qu=ju.map:ju.specularMap?qu=ju.specularMap:ju.displacementMap?qu=ju.displacementMap:ju.normalMap?qu=ju.normalMap:ju.bumpMap?qu=ju.bumpMap:ju.roughnessMap?qu=ju.roughnessMap:ju.metalnessMap?qu=ju.metalnessMap:ju.alphaMap?qu=ju.alphaMap:ju.emissiveMap&&(qu=ju.emissiveMap),qu!==void 0&&(qu.isWebGLRenderTarget&&(qu=qu.texture),qu.matrixAutoUpdate===!0&&qu.updateMatrix(),Uu.uvTransform.value.copy(qu.matrix));var Yu;ju.aoMap?Yu=ju.aoMap:ju.lightMap&&(Yu=ju.lightMap),Yu!==void 0&&(Yu.isWebGLRenderTarget&&(Yu=Yu.texture),Yu.matrixAutoUpdate===!0&&Yu.updateMatrix(),Uu.uv2Transform.value.copy(Yu.matrix))}function Pu(Uu,ju){Uu.diffuse.value.copy(ju.color),Uu.opacity.value=ju.opacity}function Ru(Uu,ju){Uu.dashSize.value=ju.dashSize,Uu.totalSize.value=ju.dashSize+ju.gapSize,Uu.scale.value=ju.scale}function Lu(Uu,ju,Wu,Qu){Uu.diffuse.value.copy(ju.color),Uu.opacity.value=ju.opacity,Uu.size.value=ju.size*Wu,Uu.scale.value=Qu*.5,ju.map&&(Uu.map.value=ju.map),ju.alphaMap&&(Uu.alphaMap.value=ju.alphaMap);var qu;ju.map?qu=ju.map:ju.alphaMap&&(qu=ju.alphaMap),qu!==void 0&&(qu.matrixAutoUpdate===!0&&qu.updateMatrix(),Uu.uvTransform.value.copy(qu.matrix))}function Bu(Uu,ju){Uu.diffuse.value.copy(ju.color),Uu.opacity.value=ju.opacity,Uu.rotation.value=ju.rotation,ju.map&&(Uu.map.value=ju.map),ju.alphaMap&&(Uu.alphaMap.value=ju.alphaMap);var Wu;ju.map?Wu=ju.map:ju.alphaMap&&(Wu=ju.alphaMap),Wu!==void 0&&(Wu.matrixAutoUpdate===!0&&Wu.updateMatrix(),Uu.uvTransform.value.copy(Wu.matrix))}function Vu(Uu,ju){ju.emissiveMap&&(Uu.emissiveMap.value=ju.emissiveMap)}function Ou(Uu,ju){Uu.specular.value.copy(ju.specular),Uu.shininess.value=Math.max(ju.shininess,1e-4),ju.emissiveMap&&(Uu.emissiveMap.value=ju.emissiveMap),ju.bumpMap&&(Uu.bumpMap.value=ju.bumpMap,Uu.bumpScale.value=ju.bumpScale,ju.side===BackSide&&(Uu.bumpScale.value*=-1)),ju.normalMap&&(Uu.normalMap.value=ju.normalMap,Uu.normalScale.value.copy(ju.normalScale),ju.side===BackSide&&Uu.normalScale.value.negate()),ju.displacementMap&&(Uu.displacementMap.value=ju.displacementMap,Uu.displacementScale.value=ju.displacementScale,Uu.displacementBias.value=ju.displacementBias)}function Du(Uu,ju){Uu.specular.value.copy(ju.specular),Uu.shininess.value=Math.max(ju.shininess,1e-4),ju.gradientMap&&(Uu.gradientMap.value=ju.gradientMap),ju.emissiveMap&&(Uu.emissiveMap.value=ju.emissiveMap),ju.bumpMap&&(Uu.bumpMap.value=ju.bumpMap,Uu.bumpScale.value=ju.bumpScale,ju.side===BackSide&&(Uu.bumpScale.value*=-1)),ju.normalMap&&(Uu.normalMap.value=ju.normalMap,Uu.normalScale.value.copy(ju.normalScale),ju.side===BackSide&&Uu.normalScale.value.negate()),ju.displacementMap&&(Uu.displacementMap.value=ju.displacementMap,Uu.displacementScale.value=ju.displacementScale,Uu.displacementBias.value=ju.displacementBias)}function ku(Uu,ju,Wu){Uu.roughness.value=ju.roughness,Uu.metalness.value=ju.metalness,ju.roughnessMap&&(Uu.roughnessMap.value=ju.roughnessMap),ju.metalnessMap&&(Uu.metalnessMap.value=ju.metalnessMap),ju.emissiveMap&&(Uu.emissiveMap.value=ju.emissiveMap),ju.bumpMap&&(Uu.bumpMap.value=ju.bumpMap,Uu.bumpScale.value=ju.bumpScale,ju.side===BackSide&&(Uu.bumpScale.value*=-1)),ju.normalMap&&(Uu.normalMap.value=ju.normalMap,Uu.normalScale.value.copy(ju.normalScale),ju.side===BackSide&&Uu.normalScale.value.negate()),ju.displacementMap&&(Uu.displacementMap.value=ju.displacementMap,Uu.displacementScale.value=ju.displacementScale,Uu.displacementBias.value=ju.displacementBias),(ju.envMap||Wu)&&(Uu.envMapIntensity.value=ju.envMapIntensity)}function Fu(Uu,ju,Wu){ku(Uu,ju,Wu),Uu.reflectivity.value=ju.reflectivity,Uu.clearcoat.value=ju.clearcoat,Uu.clearcoatRoughness.value=ju.clearcoatRoughness,ju.sheen&&Uu.sheen.value.copy(ju.sheen),ju.clearcoatMap&&(Uu.clearcoatMap.value=ju.clearcoatMap),ju.clearcoatRoughnessMap&&(Uu.clearcoatRoughnessMap.value=ju.clearcoatRoughnessMap),ju.clearcoatNormalMap&&(Uu.clearcoatNormalScale.value.copy(ju.clearcoatNormalScale),Uu.clearcoatNormalMap.value=ju.clearcoatNormalMap,ju.side===BackSide&&Uu.clearcoatNormalScale.value.negate()),Uu.transparency.value=ju.transparency}function Nu(Uu,ju){ju.matcap&&(Uu.matcap.value=ju.matcap),ju.bumpMap&&(Uu.bumpMap.value=ju.bumpMap,Uu.bumpScale.value=ju.bumpScale,ju.side===BackSide&&(Uu.bumpScale.value*=-1)),ju.normalMap&&(Uu.normalMap.value=ju.normalMap,Uu.normalScale.value.copy(ju.normalScale),ju.side===BackSide&&Uu.normalScale.value.negate()),ju.displacementMap&&(Uu.displacementMap.value=ju.displacementMap,Uu.displacementScale.value=ju.displacementScale,Uu.displacementBias.value=ju.displacementBias)}function Gu(Uu,ju){ju.displacementMap&&(Uu.displacementMap.value=ju.displacementMap,Uu.displacementScale.value=ju.displacementScale,Uu.displacementBias.value=ju.displacementBias)}function zu(Uu,ju){ju.displacementMap&&(Uu.displacementMap.value=ju.displacementMap,Uu.displacementScale.value=ju.displacementScale,Uu.displacementBias.value=ju.displacementBias),Uu.referencePosition.value.copy(ju.referencePosition),Uu.nearDistance.value=ju.nearDistance,Uu.farDistance.value=ju.farDistance}function Hu(Uu,ju){ju.bumpMap&&(Uu.bumpMap.value=ju.bumpMap,Uu.bumpScale.value=ju.bumpScale,ju.side===BackSide&&(Uu.bumpScale.value*=-1)),ju.normalMap&&(Uu.normalMap.value=ju.normalMap,Uu.normalScale.value.copy(ju.normalScale),ju.side===BackSide&&Uu.normalScale.value.negate()),ju.displacementMap&&(Uu.displacementMap.value=ju.displacementMap,Uu.displacementScale.value=ju.displacementScale,Uu.displacementBias.value=ju.displacementBias)}return{refreshFogUniforms:$u,refreshMaterialUniforms:Tu}}function WebGLRenderer(_u){_u=_u||{};var $u=_u.canvas!==void 0?_u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Tu=_u.context!==void 0?_u.context:null,Cu=_u.alpha!==void 0?_u.alpha:!1,Pu=_u.depth!==void 0?_u.depth:!0,Ru=_u.stencil!==void 0?_u.stencil:!0,Lu=_u.antialias!==void 0?_u.antialias:!1,Bu=_u.premultipliedAlpha!==void 0?_u.premultipliedAlpha:!0,Vu=_u.preserveDrawingBuffer!==void 0?_u.preserveDrawingBuffer:!1,Ou=_u.powerPreference!==void 0?_u.powerPreference:"default",Du=_u.failIfMajorPerformanceCaveat!==void 0?_u.failIfMajorPerformanceCaveat:!1,ku=null,Fu=null;this.domElement=$u,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Nu=this,Gu=!1,zu=null,Hu=0,Uu=0,ju=null,Wu=null,Qu=-1,qu={geometry:null,program:null,wireframe:!1},Yu=null,Ju=null,_d=new Vector4,tp=new Vector4,Ku=null,Xu=$u.width,Zu=$u.height,_c=1,Xc=null,_h=null,ip=new Vector4(0,0,Xu,Zu),ap=new Vector4(0,0,Xu,Zu),hp=!1,Ap=new Frustum,gp=new WebGLClipping,Rp=!1,Sp=!1,Dp=new Matrix4,Ep=new Vector3;function Bp(){return ju===null?_c:1}var Ip;try{var ep={alpha:Cu,depth:Pu,stencil:Ru,antialias:Lu,premultipliedAlpha:Bu,preserveDrawingBuffer:Vu,powerPreference:Ou,failIfMajorPerformanceCaveat:Du};if($u.addEventListener("webglcontextlost",Xp,!1),$u.addEventListener("webglcontextrestored",Zp,!1),Ip=Tu||$u.getContext("webgl",ep)||$u.getContext("experimental-webgl",ep),Ip===null)throw $u.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Ip.getShaderPrecisionFormat===void 0&&(Ip.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(wp){throw console.error("THREE.WebGLRenderer: "+wp.message),wp}var _f,op,rp,up,cp,fp,vp,xp,mp,sp,lp,$p,Mp,kp,Vp,Gp,qp,Wp;function Yp(){_f=new WebGLExtensions(Ip),op=new WebGLCapabilities(Ip,_f,_u),op.isWebGL2===!1&&(_f.get("WEBGL_depth_texture"),_f.get("OES_texture_float"),_f.get("OES_texture_half_float"),_f.get("OES_texture_half_float_linear"),_f.get("OES_standard_derivatives"),_f.get("OES_element_index_uint"),_f.get("ANGLE_instanced_arrays")),_f.get("OES_texture_float_linear"),Wp=new WebGLUtils(Ip,_f,op),rp=new WebGLState(Ip,_f,op),rp.scissor(tp.copy(ap).multiplyScalar(_c).floor()),rp.viewport(_d.copy(ip).multiplyScalar(_c).floor()),up=new WebGLInfo,cp=new WebGLProperties,fp=new WebGLTextures(Ip,_f,rp,cp,op,Wp,up),vp=new WebGLAttributes(Ip,op),xp=new WebGLGeometries(Ip,vp,up),mp=new WebGLObjects(Ip,xp,vp,up),Vp=new WebGLMorphtargets(Ip),sp=new WebGLPrograms(Nu,_f,op),lp=new WebGLMaterials(cp),$p=new WebGLRenderLists,Mp=new WebGLRenderStates,kp=new WebGLBackground(Nu,rp,mp,Bu),Gp=new WebGLBufferRenderer(Ip,_f,up,op),qp=new WebGLIndexedBufferRenderer(Ip,_f,up,op),up.programs=sp.programs,Nu.capabilities=op,Nu.extensions=_f,Nu.properties=cp,Nu.renderLists=$p,Nu.state=rp,Nu.info=up}Yp();var Kp=new WebXRManager(Nu,Ip);this.xr=Kp;var ev=new WebGLShadowMap(Nu,mp,op.maxTextureSize);this.shadowMap=ev,this.getContext=function(){return Ip},this.getContextAttributes=function(){return Ip.getContextAttributes()},this.forceContextLoss=function(){var wp=_f.get("WEBGL_lose_context");wp&&wp.loseContext()},this.forceContextRestore=function(){var wp=_f.get("WEBGL_lose_context");wp&&wp.restoreContext()},this.getPixelRatio=function(){return _c},this.setPixelRatio=function(wp){wp!==void 0&&(_c=wp,this.setSize(Xu,Zu,!1))},this.getSize=function(wp){return wp===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),wp=new Vector2),wp.set(Xu,Zu)},this.setSize=function(wp,jp,Up){if(Kp.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Xu=wp,Zu=jp,$u.width=Math.floor(wp*_c),$u.height=Math.floor(jp*_c),Up!==!1&&($u.style.width=wp+"px",$u.style.height=jp+"px"),this.setViewport(0,0,wp,jp)},this.getDrawingBufferSize=function(wp){return wp===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),wp=new Vector2),wp.set(Xu*_c,Zu*_c).floor()},this.setDrawingBufferSize=function(wp,jp,Up){Xu=wp,Zu=jp,_c=Up,$u.width=Math.floor(wp*Up),$u.height=Math.floor(jp*Up),this.setViewport(0,0,wp,jp)},this.getCurrentViewport=function(wp){return wp===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),wp=new Vector4),wp.copy(_d)},this.getViewport=function(wp){return wp.copy(ip)},this.setViewport=function(wp,jp,Up,zp){wp.isVector4?ip.set(wp.x,wp.y,wp.z,wp.w):ip.set(wp,jp,Up,zp),rp.viewport(_d.copy(ip).multiplyScalar(_c).floor())},this.getScissor=function(wp){return wp.copy(ap)},this.setScissor=function(wp,jp,Up,zp){wp.isVector4?ap.set(wp.x,wp.y,wp.z,wp.w):ap.set(wp,jp,Up,zp),rp.scissor(tp.copy(ap).multiplyScalar(_c).floor())},this.getScissorTest=function(){return hp},this.setScissorTest=function(wp){rp.setScissorTest(hp=wp)},this.setOpaqueSort=function(wp){Xc=wp},this.setTransparentSort=function(wp){_h=wp},this.getClearColor=function(){return kp.getClearColor()},this.setClearColor=function(){kp.setClearColor.apply(kp,arguments)},this.getClearAlpha=function(){return kp.getClearAlpha()},this.setClearAlpha=function(){kp.setClearAlpha.apply(kp,arguments)},this.clear=function(wp,jp,Up){var zp=0;(wp===void 0||wp)&&(zp|=16384),(jp===void 0||jp)&&(zp|=256),(Up===void 0||Up)&&(zp|=1024),Ip.clear(zp)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){$u.removeEventListener("webglcontextlost",Xp,!1),$u.removeEventListener("webglcontextrestored",Zp,!1),$p.dispose(),Mp.dispose(),cp.dispose(),mp.dispose(),Kp.dispose(),wv.stop()};function Xp(wp){wp.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Gu=!0}function Zp(){console.log("THREE.WebGLRenderer: Context Restored."),Gu=!1,Yp()}function Tp(wp){var jp=wp.target;jp.removeEventListener("dispose",Tp),Jp(jp)}function Jp(wp){nv(wp),cp.remove(wp)}function nv(wp){var jp=cp.get(wp).program;wp.program=void 0,jp!==void 0&&sp.releaseProgram(jp)}function ov(wp,jp){wp.render(function(Up){Nu.renderBufferImmediate(Up,jp)})}this.renderBufferImmediate=function(wp,jp){rp.initAttributes();var Up=cp.get(wp);wp.hasPositions&&!Up.position&&(Up.position=Ip.createBuffer()),wp.hasNormals&&!Up.normal&&(Up.normal=Ip.createBuffer()),wp.hasUvs&&!Up.uv&&(Up.uv=Ip.createBuffer()),wp.hasColors&&!Up.color&&(Up.color=Ip.createBuffer());var zp=jp.getAttributes();wp.hasPositions&&(Ip.bindBuffer(34962,Up.position),Ip.bufferData(34962,wp.positionArray,35048),rp.enableAttribute(zp.position),Ip.vertexAttribPointer(zp.position,3,5126,!1,0,0)),wp.hasNormals&&(Ip.bindBuffer(34962,Up.normal),Ip.bufferData(34962,wp.normalArray,35048),rp.enableAttribute(zp.normal),Ip.vertexAttribPointer(zp.normal,3,5126,!1,0,0)),wp.hasUvs&&(Ip.bindBuffer(34962,Up.uv),Ip.bufferData(34962,wp.uvArray,35048),rp.enableAttribute(zp.uv),Ip.vertexAttribPointer(zp.uv,2,5126,!1,0,0)),wp.hasColors&&(Ip.bindBuffer(34962,Up.color),Ip.bufferData(34962,wp.colorArray,35048),rp.enableAttribute(zp.color),Ip.vertexAttribPointer(zp.color,3,5126,!1,0,0)),rp.disableUnusedAttributes(),Ip.drawArrays(4,0,wp.count),wp.count=0};var rv=new Scene;this.renderBufferDirect=function(wp,jp,Up,zp,iv,gv){jp===null&&(jp=rv);var vv=iv.isMesh&&iv.matrixWorld.determinant()<0,lv=Cv(wp,jp,zp,iv);rp.setMaterial(zp,vv);var dv=!1;(qu.geometry!==Up.id||qu.program!==lv.id||qu.wireframe!==(zp.wireframe===!0))&&(qu.geometry=Up.id,qu.program=lv.id,qu.wireframe=zp.wireframe===!0,dv=!0),(zp.morphTargets||zp.morphNormals)&&(Vp.update(iv,Up,zp,lv),dv=!0),iv.isInstancedMesh===!0&&(dv=!0);var cv=Up.index,Pv=Up.attributes.position;if(cv===null){if(Pv===void 0||Pv.count===0)return}else if(cv.count===0)return;var dp=1;zp.wireframe===!0&&(cv=xp.getWireframeAttribute(Up),dp=2);var _p,Cp=Gp;cv!==null&&(_p=vp.get(cv),Cp=qp,Cp.setIndex(_p)),dv&&(hv(iv,Up,zp,lv),cv!==null&&Ip.bindBuffer(34963,_p.buffer));var Fp=cv!==null?cv.count:Pv.count,Hp=Up.drawRange.start*dp,uv=Up.drawRange.count*dp,pv=gv!==null?gv.start*dp:0,Lv=gv!==null?gv.count*dp:1/0,sv=Math.max(Hp,pv),Bv=Math.min(Fp,Hp+uv,pv+Lv)-1,Vv=Math.max(0,Bv-sv+1);if(Vv!==0){if(iv.isMesh)zp.wireframe===!0?(rp.setLineWidth(zp.wireframeLinewidth*Bp()),Cp.setMode(1)):Cp.setMode(4);else if(iv.isLine){var um=zp.linewidth;um===void 0&&(um=1),rp.setLineWidth(um*Bp()),iv.isLineSegments?Cp.setMode(1):iv.isLineLoop?Cp.setMode(2):Cp.setMode(3)}else iv.isPoints?Cp.setMode(0):iv.isSprite&&Cp.setMode(4);if(iv.isInstancedMesh)Cp.renderInstances(Up,sv,Vv,iv.count);else if(Up.isInstancedBufferGeometry){var dm=Math.min(Up.instanceCount,Up._maxInstanceCount);Cp.renderInstances(Up,sv,Vv,dm)}else Cp.render(sv,Vv)}};function hv(wp,jp,Up,zp){if(!(op.isWebGL2===!1&&(wp.isInstancedMesh||jp.isInstancedBufferGeometry)&&_f.get("ANGLE_instanced_arrays")===null)){rp.initAttributes();var iv=jp.attributes,gv=zp.getAttributes(),vv=Up.defaultAttributeValues;for(var lv in gv){var dv=gv[lv];if(dv>=0){var cv=iv[lv];if(cv!==void 0){var Pv=cv.normalized,dp=cv.itemSize,_p=vp.get(cv);if(_p===void 0)continue;var Cp=_p.buffer,Fp=_p.type,Hp=_p.bytesPerElement;if(cv.isInterleavedBufferAttribute){var uv=cv.data,pv=uv.stride,Lv=cv.offset;uv&&uv.isInstancedInterleavedBuffer?(rp.enableAttributeAndDivisor(dv,uv.meshPerAttribute),jp._maxInstanceCount===void 0&&(jp._maxInstanceCount=uv.meshPerAttribute*uv.count)):rp.enableAttribute(dv),Ip.bindBuffer(34962,Cp),rp.vertexAttribPointer(dv,dp,Fp,Pv,pv*Hp,Lv*Hp)}else cv.isInstancedBufferAttribute?(rp.enableAttributeAndDivisor(dv,cv.meshPerAttribute),jp._maxInstanceCount===void 0&&(jp._maxInstanceCount=cv.meshPerAttribute*cv.count)):rp.enableAttribute(dv),Ip.bindBuffer(34962,Cp),rp.vertexAttribPointer(dv,dp,Fp,Pv,0,0)}else if(lv==="instanceMatrix"){var _p=vp.get(wp.instanceMatrix);if(_p===void 0)continue;var Cp=_p.buffer,Fp=_p.type;rp.enableAttributeAndDivisor(dv+0,1),rp.enableAttributeAndDivisor(dv+1,1),rp.enableAttributeAndDivisor(dv+2,1),rp.enableAttributeAndDivisor(dv+3,1),Ip.bindBuffer(34962,Cp),Ip.vertexAttribPointer(dv+0,4,Fp,!1,64,0),Ip.vertexAttribPointer(dv+1,4,Fp,!1,64,16),Ip.vertexAttribPointer(dv+2,4,Fp,!1,64,32),Ip.vertexAttribPointer(dv+3,4,Fp,!1,64,48)}else if(vv!==void 0){var sv=vv[lv];if(sv!==void 0)switch(sv.length){case 2:Ip.vertexAttrib2fv(dv,sv);break;case 3:Ip.vertexAttrib3fv(dv,sv);break;case 4:Ip.vertexAttrib4fv(dv,sv);break;default:Ip.vertexAttrib1fv(dv,sv)}}}}rp.disableUnusedAttributes()}}this.compile=function(wp,jp){Fu=Mp.get(wp,jp),Fu.init(),wp.traverse(function(zp){zp.isLight&&(Fu.pushLight(zp),zp.castShadow&&Fu.pushShadow(zp))}),Fu.setupLights(jp);const Up={};wp.traverse(function(zp){let iv=zp.material;if(iv)if(Array.isArray(iv))for(let gv=0;gv<iv.length;gv++){let vv=iv[gv];vv.uuid in Up||(yv(vv,wp,zp),Up[vv.uuid]=!0)}else iv.uuid in Up||(yv(iv,wp,zp),Up[iv.uuid]=!0)})};var Av=null;function xv(wp){Kp.isPresenting||Av&&Av(wp)}var wv=new WebGLAnimation;wv.setAnimationLoop(xv),typeof window!="undefined"&&wv.setContext(window),this.setAnimationLoop=function(wp){Av=wp,Kp.setAnimationLoop(wp),wv.start()},this.render=function(wp,jp){var Up,zp;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Up=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),zp=arguments[3]),!(jp&&jp.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Gu){qu.geometry=null,qu.program=null,qu.wireframe=!1,Qu=-1,Yu=null,wp.autoUpdate===!0&&wp.updateMatrixWorld(),jp.parent===null&&jp.updateMatrixWorld(),Kp.enabled&&Kp.isPresenting&&(jp=Kp.getCamera(jp)),wp.onBeforeRender(Nu,wp,jp,Up||ju),Fu=Mp.get(wp,jp),Fu.init(),Dp.multiplyMatrices(jp.projectionMatrix,jp.matrixWorldInverse),Ap.setFromProjectionMatrix(Dp),Sp=this.localClippingEnabled,Rp=gp.init(this.clippingPlanes,Sp,jp),ku=$p.get(wp,jp),ku.init(),fv(wp,jp,0,Nu.sortObjects),ku.finish(),Nu.sortObjects===!0&&ku.sort(Xc,_h),Rp&&gp.beginShadows();var iv=Fu.state.shadowsArray;ev.render(iv,wp,jp),Fu.setupLights(jp),Rp&&gp.endShadows(),this.info.autoReset&&this.info.reset(),Up!==void 0&&this.setRenderTarget(Up),kp.render(ku,wp,jp,zp);var gv=ku.opaque,vv=ku.transparent;if(wp.overrideMaterial){var lv=wp.overrideMaterial;gv.length&&$v(gv,wp,jp,lv),vv.length&&$v(vv,wp,jp,lv)}else gv.length&&$v(gv,wp,jp),vv.length&&$v(vv,wp,jp);wp.onAfterRender(Nu,wp,jp),ju!==null&&(fp.updateRenderTargetMipmap(ju),fp.updateMultisampleRenderTarget(ju)),rp.buffers.depth.setTest(!0),rp.buffers.depth.setMask(!0),rp.buffers.color.setMask(!0),rp.setPolygonOffset(!1),ku=null,Fu=null}};function fv(wp,jp,Up,zp){if(wp.visible!==!1){var iv=wp.layers.test(jp.layers);if(iv){if(wp.isGroup)Up=wp.renderOrder;else if(wp.isLOD)wp.autoUpdate===!0&&wp.update(jp);else if(wp.isLight)Fu.pushLight(wp),wp.castShadow&&Fu.pushShadow(wp);else if(wp.isSprite){if(!wp.frustumCulled||Ap.intersectsSprite(wp)){zp&&Ep.setFromMatrixPosition(wp.matrixWorld).applyMatrix4(Dp);var gv=mp.update(wp),vv=wp.material;vv.visible&&ku.push(wp,gv,vv,Up,Ep.z,null)}}else if(wp.isImmediateRenderObject)zp&&Ep.setFromMatrixPosition(wp.matrixWorld).applyMatrix4(Dp),ku.push(wp,null,wp.material,Up,Ep.z,null);else if((wp.isMesh||wp.isLine||wp.isPoints)&&(wp.isSkinnedMesh&&wp.skeleton.frame!==up.render.frame&&(wp.skeleton.update(),wp.skeleton.frame=up.render.frame),!wp.frustumCulled||Ap.intersectsObject(wp))){zp&&Ep.setFromMatrixPosition(wp.matrixWorld).applyMatrix4(Dp);var gv=mp.update(wp),vv=wp.material;if(Array.isArray(vv))for(var lv=gv.groups,dv=0,cv=lv.length;dv<cv;dv++){var Pv=lv[dv],dp=vv[Pv.materialIndex];dp&&dp.visible&&ku.push(wp,gv,dp,Up,Ep.z,Pv)}else vv.visible&&ku.push(wp,gv,vv,Up,Ep.z,null)}}for(var _p=wp.children,dv=0,cv=_p.length;dv<cv;dv++)fv(_p[dv],jp,Up,zp)}}function $v(wp,jp,Up,zp){for(var iv=0,gv=wp.length;iv<gv;iv++){var vv=wp[iv],lv=vv.object,dv=vv.geometry,cv=zp===void 0?vv.material:zp,Pv=vv.group;if(Up.isArrayCamera){Ju=Up;for(var dp=Up.cameras,_p=0,Cp=dp.length;_p<Cp;_p++){var Fp=dp[_p];lv.layers.test(Fp.layers)&&(rp.viewport(_d.copy(Fp.viewport)),Fu.setupLights(Fp),Tv(lv,jp,Fp,dv,cv,Pv))}}else Ju=null,Tv(lv,jp,Up,dv,cv,Pv)}}function Tv(wp,jp,Up,zp,iv,gv){if(wp.onBeforeRender(Nu,jp,Up,zp,iv,gv),Fu=Mp.get(jp,Ju||Up),wp.modelViewMatrix.multiplyMatrices(Up.matrixWorldInverse,wp.matrixWorld),wp.normalMatrix.getNormalMatrix(wp.modelViewMatrix),wp.isImmediateRenderObject){var vv=Cv(Up,jp,iv,wp);rp.setMaterial(iv),qu.geometry=null,qu.program=null,qu.wireframe=!1,ov(wp,vv)}else Nu.renderBufferDirect(Up,jp,zp,iv,wp,gv);wp.onAfterRender(Nu,jp,Up,zp,iv,gv),Fu=Mp.get(jp,Ju||Up)}function yv(wp,jp,Up){var zp=cp.get(wp),iv=Fu.state.lights,gv=Fu.state.shadowsArray,vv=iv.state.version,lv=sp.getParameters(wp,iv.state,gv,jp,gp.numPlanes,gp.numIntersection,Up),dv=sp.getProgramCacheKey(lv),cv=zp.program,Pv=!0;if(cv===void 0)wp.addEventListener("dispose",Tp);else if(cv.cacheKey!==dv)nv(wp);else if(zp.lightsStateVersion!==vv)zp.lightsStateVersion=vv,Pv=!1;else{if(lv.shaderID!==void 0)return;Pv=!1}Pv&&(cv=sp.acquireProgram(lv,dv),zp.program=cv,zp.uniforms=lv.uniforms,zp.outputEncoding=lv.outputEncoding,wp.program=cv);var dp=cv.getAttributes();if(wp.morphTargets){wp.numSupportedMorphTargets=0;for(var _p=0;_p<Nu.maxMorphTargets;_p++)dp["morphTarget"+_p]>=0&&wp.numSupportedMorphTargets++}if(wp.morphNormals){wp.numSupportedMorphNormals=0;for(var _p=0;_p<Nu.maxMorphNormals;_p++)dp["morphNormal"+_p]>=0&&wp.numSupportedMorphNormals++}var Cp=zp.uniforms;(!wp.isShaderMaterial&&!wp.isRawShaderMaterial||wp.clipping===!0)&&(zp.numClippingPlanes=gp.numPlanes,zp.numIntersection=gp.numIntersection,Cp.clippingPlanes=gp.uniform),zp.environment=wp.isMeshStandardMaterial?jp.environment:null,zp.fog=jp.fog,zp.needsLights=Ev(wp),zp.lightsStateVersion=vv,zp.needsLights&&(Cp.ambientLightColor.value=iv.state.ambient,Cp.lightProbe.value=iv.state.probe,Cp.directionalLights.value=iv.state.directional,Cp.directionalLightShadows.value=iv.state.directionalShadow,Cp.spotLights.value=iv.state.spot,Cp.spotLightShadows.value=iv.state.spotShadow,Cp.rectAreaLights.value=iv.state.rectArea,Cp.pointLights.value=iv.state.point,Cp.pointLightShadows.value=iv.state.pointShadow,Cp.hemisphereLights.value=iv.state.hemi,Cp.directionalShadowMap.value=iv.state.directionalShadowMap,Cp.directionalShadowMatrix.value=iv.state.directionalShadowMatrix,Cp.spotShadowMap.value=iv.state.spotShadowMap,Cp.spotShadowMatrix.value=iv.state.spotShadowMatrix,Cp.pointShadowMap.value=iv.state.pointShadowMap,Cp.pointShadowMatrix.value=iv.state.pointShadowMatrix);var Fp=zp.program.getUniforms(),Hp=WebGLUniforms.seqWithValue(Fp.seq,Cp);zp.uniformsList=Hp}function Cv(wp,jp,Up,zp){fp.resetTextureUnits();var iv=jp.fog,gv=Up.isMeshStandardMaterial?jp.environment:null,vv=ju===null?Nu.outputEncoding:ju.texture.encoding,lv=cp.get(Up),dv=Fu.state.lights;if(Rp&&(Sp||wp!==Yu)){var cv=wp===Yu&&Up.id===Qu;gp.setState(Up.clippingPlanes,Up.clipIntersection,Up.clipShadows,wp,lv,cv)}Up.version===lv.__version?(lv.program===void 0||Up.fog&&lv.fog!==iv||lv.environment!==gv||lv.needsLights&&lv.lightsStateVersion!==dv.state.version||lv.numClippingPlanes!==void 0&&(lv.numClippingPlanes!==gp.numPlanes||lv.numIntersection!==gp.numIntersection)||lv.outputEncoding!==vv)&&yv(Up,jp,zp):(yv(Up,jp,zp),lv.__version=Up.version);var Pv=!1,dp=!1,_p=!1,Cp=lv.program,Fp=Cp.getUniforms(),Hp=lv.uniforms;if(rp.useProgram(Cp.program)&&(Pv=!0,dp=!0,_p=!0),Up.id!==Qu&&(Qu=Up.id,dp=!0),Pv||Yu!==wp){if(Fp.setValue(Ip,"projectionMatrix",wp.projectionMatrix),op.logarithmicDepthBuffer&&Fp.setValue(Ip,"logDepthBufFC",2/(Math.log(wp.far+1)/Math.LN2)),Yu!==wp&&(Yu=wp,dp=!0,_p=!0),Up.isShaderMaterial||Up.isMeshPhongMaterial||Up.isMeshToonMaterial||Up.isMeshStandardMaterial||Up.envMap){var uv=Fp.map.cameraPosition;uv!==void 0&&uv.setValue(Ip,Ep.setFromMatrixPosition(wp.matrixWorld))}(Up.isMeshPhongMaterial||Up.isMeshToonMaterial||Up.isMeshLambertMaterial||Up.isMeshBasicMaterial||Up.isMeshStandardMaterial||Up.isShaderMaterial)&&Fp.setValue(Ip,"isOrthographic",wp.isOrthographicCamera===!0),(Up.isMeshPhongMaterial||Up.isMeshToonMaterial||Up.isMeshLambertMaterial||Up.isMeshBasicMaterial||Up.isMeshStandardMaterial||Up.isShaderMaterial||Up.skinning)&&Fp.setValue(Ip,"viewMatrix",wp.matrixWorldInverse)}if(Up.skinning){Fp.setOptional(Ip,zp,"bindMatrix"),Fp.setOptional(Ip,zp,"bindMatrixInverse");var pv=zp.skeleton;if(pv){var Lv=pv.bones;if(op.floatVertexTextures){if(pv.boneTexture===void 0){var sv=Math.sqrt(Lv.length*4);sv=MathUtils.ceilPowerOfTwo(sv),sv=Math.max(sv,4);var Bv=new Float32Array(sv*sv*4);Bv.set(pv.boneMatrices);var Vv=new DataTexture(Bv,sv,sv,RGBAFormat,FloatType);pv.boneMatrices=Bv,pv.boneTexture=Vv,pv.boneTextureSize=sv}Fp.setValue(Ip,"boneTexture",pv.boneTexture,fp),Fp.setValue(Ip,"boneTextureSize",pv.boneTextureSize)}else Fp.setOptional(Ip,pv,"boneMatrices")}}return(dp||lv.receiveShadow!==zp.receiveShadow)&&(lv.receiveShadow=zp.receiveShadow,Fp.setValue(Ip,"receiveShadow",zp.receiveShadow)),dp&&(Fp.setValue(Ip,"toneMappingExposure",Nu.toneMappingExposure),Fp.setValue(Ip,"toneMappingWhitePoint",Nu.toneMappingWhitePoint),lv.needsLights&&Dv(Hp,_p),iv&&Up.fog&&lp.refreshFogUniforms(Hp,iv),lp.refreshMaterialUniforms(Hp,Up,gv,_c,Zu),Hp.ltc_1!==void 0&&(Hp.ltc_1.value=UniformsLib.LTC_1),Hp.ltc_2!==void 0&&(Hp.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(Ip,lv.uniformsList,Hp,fp)),Up.isShaderMaterial&&Up.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ip,lv.uniformsList,Hp,fp),Up.uniformsNeedUpdate=!1),Up.isSpriteMaterial&&Fp.setValue(Ip,"center",zp.center),Fp.setValue(Ip,"modelViewMatrix",zp.modelViewMatrix),Fp.setValue(Ip,"normalMatrix",zp.normalMatrix),Fp.setValue(Ip,"modelMatrix",zp.matrixWorld),Cp}function Dv(wp,jp){wp.ambientLightColor.needsUpdate=jp,wp.lightProbe.needsUpdate=jp,wp.directionalLights.needsUpdate=jp,wp.directionalLightShadows.needsUpdate=jp,wp.pointLights.needsUpdate=jp,wp.pointLightShadows.needsUpdate=jp,wp.spotLights.needsUpdate=jp,wp.spotLightShadows.needsUpdate=jp,wp.rectAreaLights.needsUpdate=jp,wp.hemisphereLights.needsUpdate=jp}function Ev(wp){return wp.isMeshLambertMaterial||wp.isMeshToonMaterial||wp.isMeshPhongMaterial||wp.isMeshStandardMaterial||wp.isShadowMaterial||wp.isShaderMaterial&&wp.lights===!0}this.setFramebuffer=function(wp){zu!==wp&&ju===null&&Ip.bindFramebuffer(36160,wp),zu=wp},this.getActiveCubeFace=function(){return Hu},this.getActiveMipmapLevel=function(){return Uu},this.getRenderTarget=function(){return ju},this.setRenderTarget=function(wp,jp,Up){ju=wp,Hu=jp,Uu=Up,wp&&cp.get(wp).__webglFramebuffer===void 0&&fp.setupRenderTarget(wp);var zp=zu,iv=!1;if(wp){var gv=cp.get(wp).__webglFramebuffer;wp.isWebGLCubeRenderTarget?(zp=gv[jp||0],iv=!0):wp.isWebGLMultisampleRenderTarget?zp=cp.get(wp).__webglMultisampledFramebuffer:zp=gv,_d.copy(wp.viewport),tp.copy(wp.scissor),Ku=wp.scissorTest}else _d.copy(ip).multiplyScalar(_c).floor(),tp.copy(ap).multiplyScalar(_c).floor(),Ku=hp;if(Wu!==zp&&(Ip.bindFramebuffer(36160,zp),Wu=zp),rp.viewport(_d),rp.scissor(tp),rp.setScissorTest(Ku),iv){var vv=cp.get(wp.texture);Ip.framebufferTexture2D(36160,36064,34069+(jp||0),vv.__webglTexture,Up||0)}},this.readRenderTargetPixels=function(wp,jp,Up,zp,iv,gv,vv){if(!(wp&&wp.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var lv=cp.get(wp).__webglFramebuffer;if(wp.isWebGLCubeRenderTarget&&vv!==void 0&&(lv=lv[vv]),lv){var dv=!1;lv!==Wu&&(Ip.bindFramebuffer(36160,lv),dv=!0);try{var cv=wp.texture,Pv=cv.format,dp=cv.type;if(Pv!==RGBAFormat&&Wp.convert(Pv)!==Ip.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(dp!==UnsignedByteType&&Wp.convert(dp)!==Ip.getParameter(35738)&&!(dp===FloatType&&(op.isWebGL2||_f.get("OES_texture_float")||_f.get("WEBGL_color_buffer_float")))&&!(dp===HalfFloatType&&(op.isWebGL2?_f.get("EXT_color_buffer_float"):_f.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ip.checkFramebufferStatus(36160)===36053?jp>=0&&jp<=wp.width-zp&&Up>=0&&Up<=wp.height-iv&&Ip.readPixels(jp,Up,zp,iv,Wp.convert(Pv),Wp.convert(dp),gv):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{dv&&Ip.bindFramebuffer(36160,Wu)}}},this.copyFramebufferToTexture=function(wp,jp,Up){Up===void 0&&(Up=0);var zp=Math.pow(2,-Up),iv=Math.floor(jp.image.width*zp),gv=Math.floor(jp.image.height*zp),vv=Wp.convert(jp.format);fp.setTexture2D(jp,0),Ip.copyTexImage2D(3553,Up,vv,wp.x,wp.y,iv,gv,0),rp.unbindTexture()},this.copyTextureToTexture=function(wp,jp,Up,zp){zp===void 0&&(zp=0);var iv=jp.image.width,gv=jp.image.height,vv=Wp.convert(Up.format),lv=Wp.convert(Up.type);fp.setTexture2D(Up,0),jp.isDataTexture?Ip.texSubImage2D(3553,zp,wp.x,wp.y,iv,gv,vv,lv,jp.image.data):jp.isCompressedTexture?Ip.compressedTexSubImage2D(3553,zp,wp.x,wp.y,jp.mipmaps[0].width,jp.mipmaps[0].height,vv,jp.mipmaps[0].data):Ip.texSubImage2D(3553,zp,wp.x,wp.y,vv,lv,jp.image),zp===0&&Up.generateMipmaps&&Ip.generateMipmap(3553),rp.unbindTexture()},this.initTexture=function(wp){fp.setTexture2D(wp,0),rp.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(_u,$u){this.name="",this.color=new Color(_u),this.density=$u!==void 0?$u:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(_u,$u,Tu){this.name="",this.color=new Color(_u),this.near=$u!==void 0?$u:1,this.far=Tu!==void 0?Tu:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(_u,$u){this.array=_u,this.stride=$u,this.count=_u!==void 0?_u.length/$u:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.array=new _u.array.constructor(_u.array),this.count=_u.count,this.stride=_u.stride,this.usage=_u.usage,this},copyAt:function(_u,$u,Tu){_u*=this.stride,Tu*=$u.stride;for(var Cu=0,Pu=this.stride;Cu<Pu;Cu++)this.array[_u+Cu]=$u.array[Tu+Cu];return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(_u){return this.onUploadCallback=_u,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(_u,$u,Tu,Cu){this.name="",this.data=_u,this.itemSize=$u,this.offset=Tu,this.normalized=Cu===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(_u){for(var $u=0,Tu=this.data.count;$u<Tu;$u++)_vector$6.x=this.getX($u),_vector$6.y=this.getY($u),_vector$6.z=this.getZ($u),_vector$6.applyMatrix4(_u),this.setXYZ($u,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset]=$u,this},setY:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+1]=$u,this},setZ:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+2]=$u,this},setW:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+3]=$u,this},getX:function(_u){return this.data.array[_u*this.data.stride+this.offset]},getY:function(_u){return this.data.array[_u*this.data.stride+this.offset+1]},getZ:function(_u){return this.data.array[_u*this.data.stride+this.offset+2]},getW:function(_u){return this.data.array[_u*this.data.stride+this.offset+3]},setXY:function(_u,$u,Tu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Tu,this},setXYZ:function(_u,$u,Tu,Cu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Tu,this.data.array[_u+2]=Cu,this},setXYZW:function(_u,$u,Tu,Cu,Pu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Tu,this.data.array[_u+2]=Cu,this.data.array[_u+3]=Pu,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Tu=$u*this.data.stride+this.offset,Cu=0;Cu<this.itemSize;Cu++)_u.push(this.data.array[Tu+Cu]);return new BufferAttribute(new this.array.constructor(_u),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Tu=$u*this.data.stride+this.offset,Cu=0;Cu<this.itemSize;Cu++)_u.push(this.data.array[Tu+Cu]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:_u,normalized:this.normalized}}});function SpriteMaterial(_u){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(_u)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.rotation=_u.rotation,this.sizeAttenuation=_u.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(_u){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var $u=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Tu=new InterleavedBuffer($u,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Tu,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Tu,2,3,!1))}this.geometry=_geometry,this.material=_u!==void 0?_u:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(_u,$u){_u.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_u.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_u.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_u.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var Tu=this.material.rotation,Cu,Pu;Tu!==0&&(Pu=Math.cos(Tu),Cu=Math.sin(Tu));var Ru=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Ru,_worldScale,Cu,Pu),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Ru,_worldScale,Cu,Pu),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Ru,_worldScale,Cu,Pu),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Lu=_u.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Lu===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Ru,_worldScale,Cu,Pu),_uvB$1.set(0,1),Lu=_u.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Lu===null))){var Bu=_u.ray.origin.distanceTo(_intersectPoint);Bu<_u.near||Bu>_u.far||$u.push({distance:Bu,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.center!==void 0&&this.center.copy(_u.center),this}});function transformVertex(_u,$u,Tu,Cu,Pu,Ru){_alignedPosition.subVectors(_u,Tu).addScalar(.5).multiply(Cu),Pu!==void 0?(_rotatedPosition.x=Ru*_alignedPosition.x-Pu*_alignedPosition.y,_rotatedPosition.y=Pu*_alignedPosition.x+Ru*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_u.copy($u),_u.x+=_rotatedPosition.x,_u.y+=_rotatedPosition.y,_u.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(_u){Object3D.prototype.copy.call(this,_u,!1);for(var $u=_u.levels,Tu=0,Cu=$u.length;Tu<Cu;Tu++){var Pu=$u[Tu];this.addLevel(Pu.object.clone(),Pu.distance)}return this.autoUpdate=_u.autoUpdate,this},addLevel:function(_u,$u){$u===void 0&&($u=0),$u=Math.abs($u);for(var Tu=this.levels,Cu=0;Cu<Tu.length&&!($u<Tu[Cu].distance);Cu++);return Tu.splice(Cu,0,{distance:$u,object:_u}),this.add(_u),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(_u){var $u=this.levels;if($u.length>0){for(var Tu=1,Cu=$u.length;Tu<Cu&&!(_u<$u[Tu].distance);Tu++);return $u[Tu-1].object}return null},raycast:function(_u,$u){var Tu=this.levels;if(Tu.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Cu=_u.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Cu).raycast(_u,$u)}},update:function(_u){var $u=this.levels;if($u.length>1){_v1$4.setFromMatrixPosition(_u.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var Tu=_v1$4.distanceTo(_v2$2)/_u.zoom;$u[0].object.visible=!0;for(var Cu=1,Pu=$u.length;Cu<Pu&&Tu>=$u[Cu].distance;Cu++)$u[Cu-1].object.visible=!1,$u[Cu].object.visible=!0;for(this._currentLevel=Cu-1;Cu<Pu;Cu++)$u[Cu].object.visible=!1}},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);this.autoUpdate===!1&&($u.object.autoUpdate=!1),$u.object.levels=[];for(var Tu=this.levels,Cu=0,Pu=Tu.length;Cu<Pu;Cu++){var Ru=Tu[Cu];$u.object.levels.push({object:Ru.object.uuid,distance:Ru.distance})}return $u}});function SkinnedMesh(_u,$u){_u&&_u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,_u,$u),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(_u,$u){this.skeleton=_u,$u===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),$u=this.matrixWorld),this.bindMatrix.copy($u),this.bindMatrixInverse.getInverse($u)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var _u=new Vector4,$u=this.geometry.attributes.skinWeight,Tu=0,Cu=$u.count;Tu<Cu;Tu++){_u.x=$u.getX(Tu),_u.y=$u.getY(Tu),_u.z=$u.getZ(Tu),_u.w=$u.getW(Tu);var Pu=1/_u.manhattanLength();Pu!==1/0?_u.multiplyScalar(Pu):_u.set(1,0,0,0),$u.setXYZW(Tu,_u.x,_u.y,_u.z,_u.w)}},updateMatrixWorld:function(_u){Mesh.prototype.updateMatrixWorld.call(this,_u),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var _u=new Vector3,$u=new Vector4,Tu=new Vector4,Cu=new Vector3,Pu=new Matrix4;return function(Ru,Lu){var Bu=this.skeleton,Vu=this.geometry;$u.fromBufferAttribute(Vu.attributes.skinIndex,Ru),Tu.fromBufferAttribute(Vu.attributes.skinWeight,Ru),_u.fromBufferAttribute(Vu.attributes.position,Ru).applyMatrix4(this.bindMatrix),Lu.set(0,0,0);for(var Ou=0;Ou<4;Ou++){var Du=Tu.getComponent(Ou);if(Du!==0){var ku=$u.getComponent(Ou);Pu.multiplyMatrices(Bu.bones[ku].matrixWorld,Bu.boneInverses[ku]),Lu.addScaledVector(Cu.copy(_u).applyMatrix4(Pu),Du)}}return Lu.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(_u,$u){if(_u=_u||[],this.bones=_u.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,$u===void 0)this.calculateInverses();else if(this.bones.length===$u.length)this.boneInverses=$u.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var Tu=0,Cu=this.bones.length;Tu<Cu;Tu++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var _u=0,$u=this.bones.length;_u<$u;_u++){var Tu=new Matrix4;this.bones[_u]&&Tu.getInverse(this.bones[_u].matrixWorld),this.boneInverses.push(Tu)}},pose:function(){var _u,$u,Tu;for($u=0,Tu=this.bones.length;$u<Tu;$u++)_u=this.bones[$u],_u&&_u.matrixWorld.getInverse(this.boneInverses[$u]);for($u=0,Tu=this.bones.length;$u<Tu;$u++)_u=this.bones[$u],_u&&(_u.parent&&_u.parent.isBone?(_u.matrix.getInverse(_u.parent.matrixWorld),_u.matrix.multiply(_u.matrixWorld)):_u.matrix.copy(_u.matrixWorld),_u.matrix.decompose(_u.position,_u.quaternion,_u.scale))},update:function(){for(var _u=this.bones,$u=this.boneInverses,Tu=this.boneMatrices,Cu=this.boneTexture,Pu=0,Ru=_u.length;Pu<Ru;Pu++){var Lu=_u[Pu]?_u[Pu].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Lu,$u[Pu]),_offsetMatrix.toArray(Tu,Pu*16)}Cu!==void 0&&(Cu.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(_u){for(var $u=0,Tu=this.bones.length;$u<Tu;$u++){var Cu=this.bones[$u];if(Cu.name===_u)return Cu}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(_u,$u,Tu){Mesh.call(this,_u,$u),this.instanceMatrix=new BufferAttribute(new Float32Array(Tu*16),16),this.count=Tu,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(_u,$u){$u.fromArray(this.instanceMatrix.array,_u*16)},raycast:function(_u,$u){var Tu=this.matrixWorld,Cu=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Pu=0;Pu<Cu;Pu++){this.getMatrixAt(Pu,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Tu,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(_u,_instanceIntersects);for(var Ru=0,Lu=_instanceIntersects.length;Ru<Lu;Ru++){var Bu=_instanceIntersects[Ru];Bu.instanceId=Pu,Bu.object=this,$u.push(Bu)}_instanceIntersects.length=0}},setMatrixAt:function(_u,$u){$u.toArray(this.instanceMatrix.array,_u*16)},updateMorphTargets:function(){}});function LineBasicMaterial(_u){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(_u)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.linewidth=_u.linewidth,this.linecap=_u.linecap,this.linejoin=_u.linejoin,this.morphTargets=_u.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(_u,$u,Tu){Tu===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Tu=[0],Cu=1,Pu=$u.count;Cu<Pu;Cu++)_start.fromBufferAttribute($u,Cu-1),_end.fromBufferAttribute($u,Cu),Tu[Cu]=Tu[Cu-1],Tu[Cu]+=_start.distanceTo(_end);_u.setAttribute("lineDistance",new Float32BufferAttribute(Tu,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry){var Ru=_u.vertices,Tu=_u.lineDistances;Tu[0]=0;for(var Cu=1,Pu=Ru.length;Cu<Pu;Cu++)Tu[Cu]=Tu[Cu-1],Tu[Cu]+=Ru[Cu-1].distanceTo(Ru[Cu])}return this},raycast:function(_u,$u){var Tu=this.geometry,Cu=this.matrixWorld,Pu=_u.params.Line.threshold;if(Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere$2.copy(Tu.boundingSphere),_sphere$2.applyMatrix4(Cu),_sphere$2.radius+=Pu,_u.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Cu),_ray$1.copy(_u.ray).applyMatrix4(_inverseMatrix$1);var Ru=Pu/((this.scale.x+this.scale.y+this.scale.z)/3),Lu=Ru*Ru,Bu=new Vector3,Vu=new Vector3,Ou=new Vector3,Du=new Vector3,ku=this&&this.isLineSegments?2:1;if(Tu.isBufferGeometry){var Fu=Tu.index,Nu=Tu.attributes,Gu=Nu.position.array;if(Fu!==null)for(var zu=Fu.array,Hu=0,Uu=zu.length-1;Hu<Uu;Hu+=ku){var ju=zu[Hu],Wu=zu[Hu+1];Bu.fromArray(Gu,ju*3),Vu.fromArray(Gu,Wu*3);var Qu=_ray$1.distanceSqToSegment(Bu,Vu,Du,Ou);if(!(Qu>Lu)){Du.applyMatrix4(this.matrixWorld);var qu=_u.ray.origin.distanceTo(Du);qu<_u.near||qu>_u.far||$u.push({distance:qu,point:Ou.clone().applyMatrix4(this.matrixWorld),index:Hu,face:null,faceIndex:null,object:this})}}else for(var Hu=0,Uu=Gu.length/3-1;Hu<Uu;Hu+=ku){Bu.fromArray(Gu,3*Hu),Vu.fromArray(Gu,3*Hu+3);var Qu=_ray$1.distanceSqToSegment(Bu,Vu,Du,Ou);if(!(Qu>Lu)){Du.applyMatrix4(this.matrixWorld);var qu=_u.ray.origin.distanceTo(Du);qu<_u.near||qu>_u.far||$u.push({distance:qu,point:Ou.clone().applyMatrix4(this.matrixWorld),index:Hu,face:null,faceIndex:null,object:this})}}}else if(Tu.isGeometry)for(var Yu=Tu.vertices,Ju=Yu.length,Hu=0;Hu<Ju-1;Hu+=ku){var Qu=_ray$1.distanceSqToSegment(Yu[Hu],Yu[Hu+1],Du,Ou);if(!(Qu>Lu)){Du.applyMatrix4(this.matrixWorld);var qu=_u.ray.origin.distanceTo(Du);qu<_u.near||qu>_u.far||$u.push({distance:qu,point:Ou.clone().applyMatrix4(this.matrixWorld),index:Hu,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var _u=this.geometry,$u,Tu,Cu;if(_u.isBufferGeometry){var Pu=_u.morphAttributes,Ru=Object.keys(Pu);if(Ru.length>0){var Lu=Pu[Ru[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Tu=Lu.length;$u<Tu;$u++)Cu=Lu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Cu]=$u}}else{var Bu=_u.morphTargets;Bu!==void 0&&Bu.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(_u,$u){Line$1.call(this,_u,$u),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Tu=[],Cu=0,Pu=$u.count;Cu<Pu;Cu+=2)_start$1.fromBufferAttribute($u,Cu),_end$1.fromBufferAttribute($u,Cu+1),Tu[Cu]=Cu===0?0:Tu[Cu-1],Tu[Cu+1]=Tu[Cu]+_start$1.distanceTo(_end$1);_u.setAttribute("lineDistance",new Float32BufferAttribute(Tu,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry)for(var Ru=_u.vertices,Tu=_u.lineDistances,Cu=0,Pu=Ru.length;Cu<Pu;Cu+=2)_start$1.copy(Ru[Cu]),_end$1.copy(Ru[Cu+1]),Tu[Cu]=Cu===0?0:Tu[Cu-1],Tu[Cu+1]=Tu[Cu]+_start$1.distanceTo(_end$1);return this}});function LineLoop(_u,$u){Line$1.call(this,_u,$u),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(_u){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(_u)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.size=_u.size,this.sizeAttenuation=_u.sizeAttenuation,this.morphTargets=_u.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(_u,$u){Object3D.call(this),this.type="Points",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(_u,$u){var Tu=this.geometry,Cu=this.matrixWorld,Pu=_u.params.Points.threshold;if(Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere$3.copy(Tu.boundingSphere),_sphere$3.applyMatrix4(Cu),_sphere$3.radius+=Pu,_u.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Cu),_ray$2.copy(_u.ray).applyMatrix4(_inverseMatrix$2);var Ru=Pu/((this.scale.x+this.scale.y+this.scale.z)/3),Lu=Ru*Ru;if(Tu.isBufferGeometry){var Bu=Tu.index,Vu=Tu.attributes,Ou=Vu.position.array;if(Bu!==null)for(var Du=Bu.array,ku=0,Fu=Du.length;ku<Fu;ku++){var Nu=Du[ku];_position$1.fromArray(Ou,Nu*3),testPoint(_position$1,Nu,Lu,Cu,_u,$u,this)}else for(var ku=0,Gu=Ou.length/3;ku<Gu;ku++)_position$1.fromArray(Ou,ku*3),testPoint(_position$1,ku,Lu,Cu,_u,$u,this)}else for(var zu=Tu.vertices,ku=0,Gu=zu.length;ku<Gu;ku++)testPoint(zu[ku],ku,Lu,Cu,_u,$u,this)}},updateMorphTargets:function(){var _u=this.geometry,$u,Tu,Cu;if(_u.isBufferGeometry){var Pu=_u.morphAttributes,Ru=Object.keys(Pu);if(Ru.length>0){var Lu=Pu[Ru[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Tu=Lu.length;$u<Tu;$u++)Cu=Lu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Cu]=$u}}else{var Bu=_u.morphTargets;Bu!==void 0&&Bu.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(_u,$u,Tu,Cu,Pu,Ru,Lu){var Bu=_ray$2.distanceSqToPoint(_u);if(Bu<Tu){var Vu=new Vector3;_ray$2.closestPointToPoint(_u,Vu),Vu.applyMatrix4(Cu);var Ou=Pu.ray.origin.distanceTo(Vu);if(Ou<Pu.near||Ou>Pu.far)return;Ru.push({distance:Ou,distanceToRay:Math.sqrt(Bu),point:Vu,index:$u,face:null,object:Lu})}}function VideoTexture(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu){Texture.call(this,_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu),this.format=Lu!==void 0?Lu:RGBFormat,this.minFilter=Ru!==void 0?Ru:LinearFilter,this.magFilter=Pu!==void 0?Pu:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var _u=this.image;_u.readyState>=_u.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku){Texture.call(this,null,Ru,Lu,Bu,Vu,Ou,Cu,Pu,Du,ku),this.image={width:$u,height:Tu},this.mipmaps=_u,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu){Texture.call(this,_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou){if(Ou=Ou!==void 0?Ou:DepthFormat,Ou!==DepthFormat&&Ou!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Tu===void 0&&Ou===DepthFormat&&(Tu=UnsignedShortType),Tu===void 0&&Ou===DepthStencilFormat&&(Tu=UnsignedInt248Type),Texture.call(this,null,Cu,Pu,Ru,Lu,Bu,Ou,Tu,Vu),this.image={width:_u,height:$u},this.magFilter=Lu!==void 0?Lu:NearestFilter,this.minFilter=Bu!==void 0?Bu:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(_u){BufferGeometry.call(this),this.type="WireframeGeometry";var $u=[],Tu,Cu,Pu,Ru,Lu,Bu=[0,0],Vu={},Ou,Du,ku,Fu,Nu=["a","b","c"],Gu;if(_u&&_u.isGeometry){var zu=_u.faces;for(Tu=0,Pu=zu.length;Tu<Pu;Tu++){var Hu=zu[Tu];for(Cu=0;Cu<3;Cu++)Du=Hu[Nu[Cu]],ku=Hu[Nu[(Cu+1)%3]],Bu[0]=Math.min(Du,ku),Bu[1]=Math.max(Du,ku),Fu=Bu[0]+","+Bu[1],Vu[Fu]===void 0&&(Vu[Fu]={index1:Bu[0],index2:Bu[1]})}for(Fu in Vu)Ou=Vu[Fu],Gu=_u.vertices[Ou.index1],$u.push(Gu.x,Gu.y,Gu.z),Gu=_u.vertices[Ou.index2],$u.push(Gu.x,Gu.y,Gu.z)}else if(_u&&_u.isBufferGeometry){var Uu,ju,Wu,Qu,qu,Yu,Ju,_d;if(Gu=new Vector3,_u.index!==null){for(Uu=_u.attributes.position,ju=_u.index,Wu=_u.groups,Wu.length===0&&(Wu=[{start:0,count:ju.count,materialIndex:0}]),Ru=0,Lu=Wu.length;Ru<Lu;++Ru)for(Qu=Wu[Ru],qu=Qu.start,Yu=Qu.count,Tu=qu,Pu=qu+Yu;Tu<Pu;Tu+=3)for(Cu=0;Cu<3;Cu++)Du=ju.getX(Tu+Cu),ku=ju.getX(Tu+(Cu+1)%3),Bu[0]=Math.min(Du,ku),Bu[1]=Math.max(Du,ku),Fu=Bu[0]+","+Bu[1],Vu[Fu]===void 0&&(Vu[Fu]={index1:Bu[0],index2:Bu[1]});for(Fu in Vu)Ou=Vu[Fu],Gu.fromBufferAttribute(Uu,Ou.index1),$u.push(Gu.x,Gu.y,Gu.z),Gu.fromBufferAttribute(Uu,Ou.index2),$u.push(Gu.x,Gu.y,Gu.z)}else for(Uu=_u.attributes.position,Tu=0,Pu=Uu.count/3;Tu<Pu;Tu++)for(Cu=0;Cu<3;Cu++)Ju=3*Tu+Cu,Gu.fromBufferAttribute(Uu,Ju),$u.push(Gu.x,Gu.y,Gu.z),_d=3*Tu+(Cu+1)%3,Gu.fromBufferAttribute(Uu,_d),$u.push(Gu.x,Gu.y,Gu.z)}this.setAttribute("position",new Float32BufferAttribute($u,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(_u,$u,Tu){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:_u,slices:$u,stacks:Tu},this.fromBufferGeometry(new ParametricBufferGeometry(_u,$u,Tu)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(_u,$u,Tu){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:_u,slices:$u,stacks:Tu};var Cu=[],Pu=[],Ru=[],Lu=[],Bu=1e-5,Vu=new Vector3,Ou=new Vector3,Du=new Vector3,ku=new Vector3,Fu=new Vector3,Nu,Gu;_u.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var zu=$u+1;for(Nu=0;Nu<=Tu;Nu++){var Hu=Nu/Tu;for(Gu=0;Gu<=$u;Gu++){var Uu=Gu/$u;_u(Uu,Hu,Ou),Pu.push(Ou.x,Ou.y,Ou.z),Uu-Bu>=0?(_u(Uu-Bu,Hu,Du),ku.subVectors(Ou,Du)):(_u(Uu+Bu,Hu,Du),ku.subVectors(Du,Ou)),Hu-Bu>=0?(_u(Uu,Hu-Bu,Du),Fu.subVectors(Ou,Du)):(_u(Uu,Hu+Bu,Du),Fu.subVectors(Du,Ou)),Vu.crossVectors(ku,Fu).normalize(),Ru.push(Vu.x,Vu.y,Vu.z),Lu.push(Uu,Hu)}}for(Nu=0;Nu<Tu;Nu++)for(Gu=0;Gu<$u;Gu++){var ju=Nu*zu+Gu,Wu=Nu*zu+Gu+1,Qu=(Nu+1)*zu+Gu+1,qu=(Nu+1)*zu+Gu;Cu.push(ju,Wu,qu),Cu.push(Wu,Qu,qu)}this.setIndex(Cu),this.setAttribute("position",new Float32BufferAttribute(Pu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:_u,indices:$u,radius:Tu,detail:Cu},this.fromBufferGeometry(new PolyhedronBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:_u,indices:$u,radius:Tu,detail:Cu},Tu=Tu||1,Cu=Cu||0;var Pu=[],Ru=[];Lu(Cu),Vu(Tu),Ou(),this.setAttribute("position",new Float32BufferAttribute(Pu,3)),this.setAttribute("normal",new Float32BufferAttribute(Pu.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ru,2)),Cu===0?this.computeVertexNormals():this.normalizeNormals();function Lu(Uu){for(var ju=new Vector3,Wu=new Vector3,Qu=new Vector3,qu=0;qu<$u.length;qu+=3)Fu($u[qu+0],ju),Fu($u[qu+1],Wu),Fu($u[qu+2],Qu),Bu(ju,Wu,Qu,Uu)}function Bu(Uu,ju,Wu,Qu){var qu=Math.pow(2,Qu),Yu=[],Ju,_d;for(Ju=0;Ju<=qu;Ju++){Yu[Ju]=[];var tp=Uu.clone().lerp(Wu,Ju/qu),Ku=ju.clone().lerp(Wu,Ju/qu),Xu=qu-Ju;for(_d=0;_d<=Xu;_d++)_d===0&&Ju===qu?Yu[Ju][_d]=tp:Yu[Ju][_d]=tp.clone().lerp(Ku,_d/Xu)}for(Ju=0;Ju<qu;Ju++)for(_d=0;_d<2*(qu-Ju)-1;_d++){var Zu=Math.floor(_d/2);_d%2===0?(ku(Yu[Ju][Zu+1]),ku(Yu[Ju+1][Zu]),ku(Yu[Ju][Zu])):(ku(Yu[Ju][Zu+1]),ku(Yu[Ju+1][Zu+1]),ku(Yu[Ju+1][Zu]))}}function Vu(Uu){for(var ju=new Vector3,Wu=0;Wu<Pu.length;Wu+=3)ju.x=Pu[Wu+0],ju.y=Pu[Wu+1],ju.z=Pu[Wu+2],ju.normalize().multiplyScalar(Uu),Pu[Wu+0]=ju.x,Pu[Wu+1]=ju.y,Pu[Wu+2]=ju.z}function Ou(){for(var Uu=new Vector3,ju=0;ju<Pu.length;ju+=3){Uu.x=Pu[ju+0],Uu.y=Pu[ju+1],Uu.z=Pu[ju+2];var Wu=zu(Uu)/2/Math.PI+.5,Qu=Hu(Uu)/Math.PI+.5;Ru.push(Wu,1-Qu)}Nu(),Du()}function Du(){for(var Uu=0;Uu<Ru.length;Uu+=6){var ju=Ru[Uu+0],Wu=Ru[Uu+2],Qu=Ru[Uu+4],qu=Math.max(ju,Wu,Qu),Yu=Math.min(ju,Wu,Qu);qu>.9&&Yu<.1&&(ju<.2&&(Ru[Uu+0]+=1),Wu<.2&&(Ru[Uu+2]+=1),Qu<.2&&(Ru[Uu+4]+=1))}}function ku(Uu){Pu.push(Uu.x,Uu.y,Uu.z)}function Fu(Uu,ju){var Wu=Uu*3;ju.x=_u[Wu+0],ju.y=_u[Wu+1],ju.z=_u[Wu+2]}function Nu(){for(var Uu=new Vector3,ju=new Vector3,Wu=new Vector3,Qu=new Vector3,qu=new Vector2,Yu=new Vector2,Ju=new Vector2,_d=0,tp=0;_d<Pu.length;_d+=9,tp+=6){Uu.set(Pu[_d+0],Pu[_d+1],Pu[_d+2]),ju.set(Pu[_d+3],Pu[_d+4],Pu[_d+5]),Wu.set(Pu[_d+6],Pu[_d+7],Pu[_d+8]),qu.set(Ru[tp+0],Ru[tp+1]),Yu.set(Ru[tp+2],Ru[tp+3]),Ju.set(Ru[tp+4],Ru[tp+5]),Qu.copy(Uu).add(ju).add(Wu).divideScalar(3);var Ku=zu(Qu);Gu(qu,tp+0,Uu,Ku),Gu(Yu,tp+2,ju,Ku),Gu(Ju,tp+4,Wu,Ku)}}function Gu(Uu,ju,Wu,Qu){Qu<0&&Uu.x===1&&(Ru[ju]=Uu.x-1),Wu.x===0&&Wu.z===0&&(Ru[ju]=Qu/2/Math.PI+.5)}function zu(Uu){return Math.atan2(Uu.z,-Uu.x)}function Hu(Uu){return Math.atan2(-Uu.y,Math.sqrt(Uu.x*Uu.x+Uu.z*Uu.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(_u,$u){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new TetrahedronBufferGeometry(_u,$u)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(_u,$u){var Tu=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Cu=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,Tu,Cu,_u,$u),this.type="TetrahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(_u,$u){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new OctahedronBufferGeometry(_u,$u)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(_u,$u){var Tu=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Cu=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,Tu,Cu,_u,$u),this.type="OctahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(_u,$u){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new IcosahedronBufferGeometry(_u,$u)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(_u,$u){var Tu=(1+Math.sqrt(5))/2,Cu=[-1,Tu,0,1,Tu,0,-1,-Tu,0,1,-Tu,0,0,-1,Tu,0,1,Tu,0,-1,-Tu,0,1,-Tu,Tu,0,-1,Tu,0,1,-Tu,0,-1,-Tu,0,1],Pu=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Cu,Pu,_u,$u),this.type="IcosahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(_u,$u){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new DodecahedronBufferGeometry(_u,$u)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(_u,$u){var Tu=(1+Math.sqrt(5))/2,Cu=1/Tu,Pu=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Cu,-Tu,0,-Cu,Tu,0,Cu,-Tu,0,Cu,Tu,-Cu,-Tu,0,-Cu,Tu,0,Cu,-Tu,0,Cu,Tu,0,-Tu,0,-Cu,Tu,0,-Cu,-Tu,0,Cu,Tu,0,Cu],Ru=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Pu,Ru,_u,$u),this.type="DodecahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(_u,$u,Tu,Cu,Pu,Ru){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Tu,radialSegments:Cu,closed:Pu},Ru!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Lu=new TubeBufferGeometry(_u,$u,Tu,Cu,Pu);this.tangents=Lu.tangents,this.normals=Lu.normals,this.binormals=Lu.binormals,this.fromBufferGeometry(Lu),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(_u,$u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Tu,radialSegments:Cu,closed:Pu},$u=$u||64,Tu=Tu||1,Cu=Cu||8,Pu=Pu||!1;var Ru=_u.computeFrenetFrames($u,Pu);this.tangents=Ru.tangents,this.normals=Ru.normals,this.binormals=Ru.binormals;var Lu=new Vector3,Bu=new Vector3,Vu=new Vector2,Ou=new Vector3,Du,ku,Fu=[],Nu=[],Gu=[],zu=[];Hu(),this.setIndex(zu),this.setAttribute("position",new Float32BufferAttribute(Fu,3)),this.setAttribute("normal",new Float32BufferAttribute(Nu,3)),this.setAttribute("uv",new Float32BufferAttribute(Gu,2));function Hu(){for(Du=0;Du<$u;Du++)Uu(Du);Uu(Pu===!1?$u:0),Wu(),ju()}function Uu(Qu){Ou=_u.getPointAt(Qu/$u,Ou);var qu=Ru.normals[Qu],Yu=Ru.binormals[Qu];for(ku=0;ku<=Cu;ku++){var Ju=ku/Cu*Math.PI*2,_d=Math.sin(Ju),tp=-Math.cos(Ju);Bu.x=tp*qu.x+_d*Yu.x,Bu.y=tp*qu.y+_d*Yu.y,Bu.z=tp*qu.z+_d*Yu.z,Bu.normalize(),Nu.push(Bu.x,Bu.y,Bu.z),Lu.x=Ou.x+Tu*Bu.x,Lu.y=Ou.y+Tu*Bu.y,Lu.z=Ou.z+Tu*Bu.z,Fu.push(Lu.x,Lu.y,Lu.z)}}function ju(){for(ku=1;ku<=$u;ku++)for(Du=1;Du<=Cu;Du++){var Qu=(Cu+1)*(ku-1)+(Du-1),qu=(Cu+1)*ku+(Du-1),Yu=(Cu+1)*ku+Du,Ju=(Cu+1)*(ku-1)+Du;zu.push(Qu,qu,Ju),zu.push(qu,Yu,Ju)}}function Wu(){for(Du=0;Du<=$u;Du++)for(ku=0;ku<=Cu;ku++)Vu.x=Du/$u,Vu.y=ku/Cu,Gu.push(Vu.x,Vu.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.path=this.parameters.path.toJSON(),_u};function TorusKnotGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Tu,radialSegments:Cu,p:Pu,q:Ru},Lu!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(_u,$u,Tu,Cu,Pu,Ru)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(_u,$u,Tu,Cu,Pu,Ru){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Tu,radialSegments:Cu,p:Pu,q:Ru},_u=_u||1,$u=$u||.4,Tu=Math.floor(Tu)||64,Cu=Math.floor(Cu)||8,Pu=Pu||2,Ru=Ru||3;var Lu=[],Bu=[],Vu=[],Ou=[],Du,ku,Fu=new Vector3,Nu=new Vector3,Gu=new Vector3,zu=new Vector3,Hu=new Vector3,Uu=new Vector3,ju=new Vector3;for(Du=0;Du<=Tu;++Du){var Wu=Du/Tu*Pu*Math.PI*2;for(Xu(Wu,Pu,Ru,_u,Gu),Xu(Wu+.01,Pu,Ru,_u,zu),Uu.subVectors(zu,Gu),ju.addVectors(zu,Gu),Hu.crossVectors(Uu,ju),ju.crossVectors(Hu,Uu),Hu.normalize(),ju.normalize(),ku=0;ku<=Cu;++ku){var Qu=ku/Cu*Math.PI*2,qu=-$u*Math.cos(Qu),Yu=$u*Math.sin(Qu);Fu.x=Gu.x+(qu*ju.x+Yu*Hu.x),Fu.y=Gu.y+(qu*ju.y+Yu*Hu.y),Fu.z=Gu.z+(qu*ju.z+Yu*Hu.z),Bu.push(Fu.x,Fu.y,Fu.z),Nu.subVectors(Fu,Gu).normalize(),Vu.push(Nu.x,Nu.y,Nu.z),Ou.push(Du/Tu),Ou.push(ku/Cu)}}for(ku=1;ku<=Tu;ku++)for(Du=1;Du<=Cu;Du++){var Ju=(Cu+1)*(ku-1)+(Du-1),_d=(Cu+1)*ku+(Du-1),tp=(Cu+1)*ku+Du,Ku=(Cu+1)*(ku-1)+Du;Lu.push(Ju,_d,Ku),Lu.push(_d,tp,Ku)}this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("normal",new Float32BufferAttribute(Vu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2));function Xu(Zu,_c,Xc,_h,ip){var ap=Math.cos(Zu),hp=Math.sin(Zu),Ap=Xc/_c*Zu,gp=Math.cos(Ap);ip.x=_h*(2+gp)*.5*ap,ip.y=_h*(2+gp)*hp*.5,ip.z=_h*Math.sin(Ap)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(_u,$u,Tu,Cu,Pu){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Tu,tubularSegments:Cu,arc:Pu},this.fromBufferGeometry(new TorusBufferGeometry(_u,$u,Tu,Cu,Pu)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(_u,$u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Tu,tubularSegments:Cu,arc:Pu},_u=_u||1,$u=$u||.4,Tu=Math.floor(Tu)||8,Cu=Math.floor(Cu)||6,Pu=Pu||Math.PI*2;var Ru=[],Lu=[],Bu=[],Vu=[],Ou=new Vector3,Du=new Vector3,ku=new Vector3,Fu,Nu;for(Fu=0;Fu<=Tu;Fu++)for(Nu=0;Nu<=Cu;Nu++){var Gu=Nu/Cu*Pu,zu=Fu/Tu*Math.PI*2;Du.x=(_u+$u*Math.cos(zu))*Math.cos(Gu),Du.y=(_u+$u*Math.cos(zu))*Math.sin(Gu),Du.z=$u*Math.sin(zu),Lu.push(Du.x,Du.y,Du.z),Ou.x=_u*Math.cos(Gu),Ou.y=_u*Math.sin(Gu),ku.subVectors(Du,Ou).normalize(),Bu.push(ku.x,ku.y,ku.z),Vu.push(Nu/Cu),Vu.push(Fu/Tu)}for(Fu=1;Fu<=Tu;Fu++)for(Nu=1;Nu<=Cu;Nu++){var Hu=(Cu+1)*Fu+Nu-1,Uu=(Cu+1)*(Fu-1)+Nu-1,ju=(Cu+1)*(Fu-1)+Nu,Wu=(Cu+1)*Fu+Nu;Ru.push(Hu,Uu,Wu),Ru.push(Uu,ju,Wu)}this.setIndex(Ru),this.setAttribute("position",new Float32BufferAttribute(Lu,3)),this.setAttribute("normal",new Float32BufferAttribute(Bu,3)),this.setAttribute("uv",new Float32BufferAttribute(Vu,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(_u,$u,Tu){Tu=Tu||2;var Cu=$u&&$u.length,Pu=Cu?$u[0]*Tu:_u.length,Ru=linkedList(_u,0,Pu,Tu,!0),Lu=[];if(!Ru||Ru.next===Ru.prev)return Lu;var Bu,Vu,Ou,Du,ku,Fu,Nu;if(Cu&&(Ru=eliminateHoles(_u,$u,Ru,Tu)),_u.length>80*Tu){Bu=Ou=_u[0],Vu=Du=_u[1];for(var Gu=Tu;Gu<Pu;Gu+=Tu)ku=_u[Gu],Fu=_u[Gu+1],ku<Bu&&(Bu=ku),Fu<Vu&&(Vu=Fu),ku>Ou&&(Ou=ku),Fu>Du&&(Du=Fu);Nu=Math.max(Ou-Bu,Du-Vu),Nu=Nu!==0?1/Nu:0}return earcutLinked(Ru,Lu,Tu,Bu,Vu,Nu),Lu}};function linkedList(_u,$u,Tu,Cu,Pu){var Ru,Lu;if(Pu===signedArea(_u,$u,Tu,Cu)>0)for(Ru=$u;Ru<Tu;Ru+=Cu)Lu=insertNode(Ru,_u[Ru],_u[Ru+1],Lu);else for(Ru=Tu-Cu;Ru>=$u;Ru-=Cu)Lu=insertNode(Ru,_u[Ru],_u[Ru+1],Lu);return Lu&&equals(Lu,Lu.next)&&(removeNode(Lu),Lu=Lu.next),Lu}function filterPoints(_u,$u){if(!_u)return _u;$u||($u=_u);var Tu=_u,Cu;do if(Cu=!1,!Tu.steiner&&(equals(Tu,Tu.next)||area(Tu.prev,Tu,Tu.next)===0)){if(removeNode(Tu),Tu=$u=Tu.prev,Tu===Tu.next)break;Cu=!0}else Tu=Tu.next;while(Cu||Tu!==$u);return $u}function earcutLinked(_u,$u,Tu,Cu,Pu,Ru,Lu){if(!!_u){!Lu&&Ru&&indexCurve(_u,Cu,Pu,Ru);for(var Bu=_u,Vu,Ou;_u.prev!==_u.next;){if(Vu=_u.prev,Ou=_u.next,Ru?isEarHashed(_u,Cu,Pu,Ru):isEar(_u)){$u.push(Vu.i/Tu),$u.push(_u.i/Tu),$u.push(Ou.i/Tu),removeNode(_u),_u=Ou.next,Bu=Ou.next;continue}if(_u=Ou,_u===Bu){Lu?Lu===1?(_u=cureLocalIntersections(filterPoints(_u),$u,Tu),earcutLinked(_u,$u,Tu,Cu,Pu,Ru,2)):Lu===2&&splitEarcut(_u,$u,Tu,Cu,Pu,Ru):earcutLinked(filterPoints(_u),$u,Tu,Cu,Pu,Ru,1);break}}}}function isEar(_u){var $u=_u.prev,Tu=_u,Cu=_u.next;if(area($u,Tu,Cu)>=0)return!1;for(var Pu=_u.next.next;Pu!==_u.prev;){if(pointInTriangle($u.x,$u.y,Tu.x,Tu.y,Cu.x,Cu.y,Pu.x,Pu.y)&&area(Pu.prev,Pu,Pu.next)>=0)return!1;Pu=Pu.next}return!0}function isEarHashed(_u,$u,Tu,Cu){var Pu=_u.prev,Ru=_u,Lu=_u.next;if(area(Pu,Ru,Lu)>=0)return!1;for(var Bu=Pu.x<Ru.x?Pu.x<Lu.x?Pu.x:Lu.x:Ru.x<Lu.x?Ru.x:Lu.x,Vu=Pu.y<Ru.y?Pu.y<Lu.y?Pu.y:Lu.y:Ru.y<Lu.y?Ru.y:Lu.y,Ou=Pu.x>Ru.x?Pu.x>Lu.x?Pu.x:Lu.x:Ru.x>Lu.x?Ru.x:Lu.x,Du=Pu.y>Ru.y?Pu.y>Lu.y?Pu.y:Lu.y:Ru.y>Lu.y?Ru.y:Lu.y,ku=zOrder(Bu,Vu,$u,Tu,Cu),Fu=zOrder(Ou,Du,$u,Tu,Cu),Nu=_u.prevZ,Gu=_u.nextZ;Nu&&Nu.z>=ku&&Gu&&Gu.z<=Fu;){if(Nu!==_u.prev&&Nu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Ru.x,Ru.y,Lu.x,Lu.y,Nu.x,Nu.y)&&area(Nu.prev,Nu,Nu.next)>=0||(Nu=Nu.prevZ,Gu!==_u.prev&&Gu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Ru.x,Ru.y,Lu.x,Lu.y,Gu.x,Gu.y)&&area(Gu.prev,Gu,Gu.next)>=0))return!1;Gu=Gu.nextZ}for(;Nu&&Nu.z>=ku;){if(Nu!==_u.prev&&Nu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Ru.x,Ru.y,Lu.x,Lu.y,Nu.x,Nu.y)&&area(Nu.prev,Nu,Nu.next)>=0)return!1;Nu=Nu.prevZ}for(;Gu&&Gu.z<=Fu;){if(Gu!==_u.prev&&Gu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Ru.x,Ru.y,Lu.x,Lu.y,Gu.x,Gu.y)&&area(Gu.prev,Gu,Gu.next)>=0)return!1;Gu=Gu.nextZ}return!0}function cureLocalIntersections(_u,$u,Tu){var Cu=_u;do{var Pu=Cu.prev,Ru=Cu.next.next;!equals(Pu,Ru)&&intersects(Pu,Cu,Cu.next,Ru)&&locallyInside(Pu,Ru)&&locallyInside(Ru,Pu)&&($u.push(Pu.i/Tu),$u.push(Cu.i/Tu),$u.push(Ru.i/Tu),removeNode(Cu),removeNode(Cu.next),Cu=_u=Ru),Cu=Cu.next}while(Cu!==_u);return filterPoints(Cu)}function splitEarcut(_u,$u,Tu,Cu,Pu,Ru){var Lu=_u;do{for(var Bu=Lu.next.next;Bu!==Lu.prev;){if(Lu.i!==Bu.i&&isValidDiagonal(Lu,Bu)){var Vu=splitPolygon(Lu,Bu);Lu=filterPoints(Lu,Lu.next),Vu=filterPoints(Vu,Vu.next),earcutLinked(Lu,$u,Tu,Cu,Pu,Ru),earcutLinked(Vu,$u,Tu,Cu,Pu,Ru);return}Bu=Bu.next}Lu=Lu.next}while(Lu!==_u)}function eliminateHoles(_u,$u,Tu,Cu){var Pu=[],Ru,Lu,Bu,Vu,Ou;for(Ru=0,Lu=$u.length;Ru<Lu;Ru++)Bu=$u[Ru]*Cu,Vu=Ru<Lu-1?$u[Ru+1]*Cu:_u.length,Ou=linkedList(_u,Bu,Vu,Cu,!1),Ou===Ou.next&&(Ou.steiner=!0),Pu.push(getLeftmost(Ou));for(Pu.sort(compareX),Ru=0;Ru<Pu.length;Ru++)eliminateHole(Pu[Ru],Tu),Tu=filterPoints(Tu,Tu.next);return Tu}function compareX(_u,$u){return _u.x-$u.x}function eliminateHole(_u,$u){if($u=findHoleBridge(_u,$u),$u){var Tu=splitPolygon($u,_u);filterPoints($u,$u.next),filterPoints(Tu,Tu.next)}}function findHoleBridge(_u,$u){var Tu=$u,Cu=_u.x,Pu=_u.y,Ru=-1/0,Lu;do{if(Pu<=Tu.y&&Pu>=Tu.next.y&&Tu.next.y!==Tu.y){var Bu=Tu.x+(Pu-Tu.y)*(Tu.next.x-Tu.x)/(Tu.next.y-Tu.y);if(Bu<=Cu&&Bu>Ru){if(Ru=Bu,Bu===Cu){if(Pu===Tu.y)return Tu;if(Pu===Tu.next.y)return Tu.next}Lu=Tu.x<Tu.next.x?Tu:Tu.next}}Tu=Tu.next}while(Tu!==$u);if(!Lu)return null;if(Cu===Ru)return Lu;var Vu=Lu,Ou=Lu.x,Du=Lu.y,ku=1/0,Fu;Tu=Lu;do Cu>=Tu.x&&Tu.x>=Ou&&Cu!==Tu.x&&pointInTriangle(Pu<Du?Cu:Ru,Pu,Ou,Du,Pu<Du?Ru:Cu,Pu,Tu.x,Tu.y)&&(Fu=Math.abs(Pu-Tu.y)/(Cu-Tu.x),locallyInside(Tu,_u)&&(Fu<ku||Fu===ku&&(Tu.x>Lu.x||Tu.x===Lu.x&&sectorContainsSector(Lu,Tu)))&&(Lu=Tu,ku=Fu)),Tu=Tu.next;while(Tu!==Vu);return Lu}function sectorContainsSector(_u,$u){return area(_u.prev,_u,$u.prev)<0&&area($u.next,_u,_u.next)<0}function indexCurve(_u,$u,Tu,Cu){var Pu=_u;do Pu.z===null&&(Pu.z=zOrder(Pu.x,Pu.y,$u,Tu,Cu)),Pu.prevZ=Pu.prev,Pu.nextZ=Pu.next,Pu=Pu.next;while(Pu!==_u);Pu.prevZ.nextZ=null,Pu.prevZ=null,sortLinked(Pu)}function sortLinked(_u){var $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou=1;do{for(Tu=_u,_u=null,Ru=null,Lu=0;Tu;){for(Lu++,Cu=Tu,Bu=0,$u=0;$u<Ou&&(Bu++,Cu=Cu.nextZ,!!Cu);$u++);for(Vu=Ou;Bu>0||Vu>0&&Cu;)Bu!==0&&(Vu===0||!Cu||Tu.z<=Cu.z)?(Pu=Tu,Tu=Tu.nextZ,Bu--):(Pu=Cu,Cu=Cu.nextZ,Vu--),Ru?Ru.nextZ=Pu:_u=Pu,Pu.prevZ=Ru,Ru=Pu;Tu=Cu}Ru.nextZ=null,Ou*=2}while(Lu>1);return _u}function zOrder(_u,$u,Tu,Cu,Pu){return _u=32767*(_u-Tu)*Pu,$u=32767*($u-Cu)*Pu,_u=(_u|_u<<8)&16711935,_u=(_u|_u<<4)&252645135,_u=(_u|_u<<2)&858993459,_u=(_u|_u<<1)&1431655765,$u=($u|$u<<8)&16711935,$u=($u|$u<<4)&252645135,$u=($u|$u<<2)&858993459,$u=($u|$u<<1)&1431655765,_u|$u<<1}function getLeftmost(_u){var $u=_u,Tu=_u;do($u.x<Tu.x||$u.x===Tu.x&&$u.y<Tu.y)&&(Tu=$u),$u=$u.next;while($u!==_u);return Tu}function pointInTriangle(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){return(Pu-Lu)*($u-Bu)-(_u-Lu)*(Ru-Bu)>=0&&(_u-Lu)*(Cu-Bu)-(Tu-Lu)*($u-Bu)>=0&&(Tu-Lu)*(Ru-Bu)-(Pu-Lu)*(Cu-Bu)>=0}function isValidDiagonal(_u,$u){return _u.next.i!==$u.i&&_u.prev.i!==$u.i&&!intersectsPolygon(_u,$u)&&(locallyInside(_u,$u)&&locallyInside($u,_u)&&middleInside(_u,$u)&&(area(_u.prev,_u,$u.prev)||area(_u,$u.prev,$u))||equals(_u,$u)&&area(_u.prev,_u,_u.next)>0&&area($u.prev,$u,$u.next)>0)}function area(_u,$u,Tu){return($u.y-_u.y)*(Tu.x-$u.x)-($u.x-_u.x)*(Tu.y-$u.y)}function equals(_u,$u){return _u.x===$u.x&&_u.y===$u.y}function intersects(_u,$u,Tu,Cu){var Pu=sign(area(_u,$u,Tu)),Ru=sign(area(_u,$u,Cu)),Lu=sign(area(Tu,Cu,_u)),Bu=sign(area(Tu,Cu,$u));return!!(Pu!==Ru&&Lu!==Bu||Pu===0&&onSegment(_u,Tu,$u)||Ru===0&&onSegment(_u,Cu,$u)||Lu===0&&onSegment(Tu,_u,Cu)||Bu===0&&onSegment(Tu,$u,Cu))}function onSegment(_u,$u,Tu){return $u.x<=Math.max(_u.x,Tu.x)&&$u.x>=Math.min(_u.x,Tu.x)&&$u.y<=Math.max(_u.y,Tu.y)&&$u.y>=Math.min(_u.y,Tu.y)}function sign(_u){return _u>0?1:_u<0?-1:0}function intersectsPolygon(_u,$u){var Tu=_u;do{if(Tu.i!==_u.i&&Tu.next.i!==_u.i&&Tu.i!==$u.i&&Tu.next.i!==$u.i&&intersects(Tu,Tu.next,_u,$u))return!0;Tu=Tu.next}while(Tu!==_u);return!1}function locallyInside(_u,$u){return area(_u.prev,_u,_u.next)<0?area(_u,$u,_u.next)>=0&&area(_u,_u.prev,$u)>=0:area(_u,$u,_u.prev)<0||area(_u,_u.next,$u)<0}function middleInside(_u,$u){var Tu=_u,Cu=!1,Pu=(_u.x+$u.x)/2,Ru=(_u.y+$u.y)/2;do Tu.y>Ru!=Tu.next.y>Ru&&Tu.next.y!==Tu.y&&Pu<(Tu.next.x-Tu.x)*(Ru-Tu.y)/(Tu.next.y-Tu.y)+Tu.x&&(Cu=!Cu),Tu=Tu.next;while(Tu!==_u);return Cu}function splitPolygon(_u,$u){var Tu=new Node(_u.i,_u.x,_u.y),Cu=new Node($u.i,$u.x,$u.y),Pu=_u.next,Ru=$u.prev;return _u.next=$u,$u.prev=_u,Tu.next=Pu,Pu.prev=Tu,Cu.next=Tu,Tu.prev=Cu,Ru.next=Cu,Cu.prev=Ru,Cu}function insertNode(_u,$u,Tu,Cu){var Pu=new Node(_u,$u,Tu);return Cu?(Pu.next=Cu.next,Pu.prev=Cu,Cu.next.prev=Pu,Cu.next=Pu):(Pu.prev=Pu,Pu.next=Pu),Pu}function removeNode(_u){_u.next.prev=_u.prev,_u.prev.next=_u.next,_u.prevZ&&(_u.prevZ.nextZ=_u.nextZ),_u.nextZ&&(_u.nextZ.prevZ=_u.prevZ)}function Node(_u,$u,Tu){this.i=_u,this.x=$u,this.y=Tu,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(_u,$u,Tu,Cu){for(var Pu=0,Ru=$u,Lu=Tu-Cu;Ru<Tu;Ru+=Cu)Pu+=(_u[Lu]-_u[Ru])*(_u[Ru+1]+_u[Lu+1]),Lu=Ru;return Pu}var ShapeUtils={area:function(_u){for(var $u=_u.length,Tu=0,Cu=$u-1,Pu=0;Pu<$u;Cu=Pu++)Tu+=_u[Cu].x*_u[Pu].y-_u[Pu].x*_u[Cu].y;return Tu*.5},isClockWise:function(_u){return ShapeUtils.area(_u)<0},triangulateShape:function(_u,$u){var Tu=[],Cu=[],Pu=[];removeDupEndPts(_u),addContour(Tu,_u);var Ru=_u.length;$u.forEach(removeDupEndPts);for(var Lu=0;Lu<$u.length;Lu++)Cu.push(Ru),Ru+=$u[Lu].length,addContour(Tu,$u[Lu]);for(var Bu=Earcut.triangulate(Tu,Cu),Lu=0;Lu<Bu.length;Lu+=3)Pu.push(Bu.slice(Lu,Lu+3));return Pu}};function removeDupEndPts(_u){var $u=_u.length;$u>2&&_u[$u-1].equals(_u[0])&&_u.pop()}function addContour(_u,$u){for(var Tu=0;Tu<$u.length;Tu++)_u.push($u[Tu].x),_u.push($u[Tu].y)}function ExtrudeGeometry(_u,$u){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:_u,options:$u},this.fromBufferGeometry(new ExtrudeBufferGeometry(_u,$u)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Tu=this.parameters.options;return toJSON($u,Tu,_u)};function ExtrudeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:_u,options:$u},_u=Array.isArray(_u)?_u:[_u];for(var Tu=this,Cu=[],Pu=[],Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Bu=_u[Ru];Vu(Bu)}this.setAttribute("position",new Float32BufferAttribute(Cu,3)),this.setAttribute("uv",new Float32BufferAttribute(Pu,2)),this.computeVertexNormals();function Vu(Ou){var Du=[],ku=$u.curveSegments!==void 0?$u.curveSegments:12,Fu=$u.steps!==void 0?$u.steps:1,Nu=$u.depth!==void 0?$u.depth:100,Gu=$u.bevelEnabled!==void 0?$u.bevelEnabled:!0,zu=$u.bevelThickness!==void 0?$u.bevelThickness:6,Hu=$u.bevelSize!==void 0?$u.bevelSize:zu-2,Uu=$u.bevelOffset!==void 0?$u.bevelOffset:0,ju=$u.bevelSegments!==void 0?$u.bevelSegments:3,Wu=$u.extrudePath,Qu=$u.UVGenerator!==void 0?$u.UVGenerator:WorldUVGenerator;$u.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Nu=$u.amount);var qu,Yu=!1,Ju,_d,tp,Ku;Wu&&(qu=Wu.getSpacedPoints(Fu),Yu=!0,Gu=!1,Ju=Wu.computeFrenetFrames(Fu,!1),_d=new Vector3,tp=new Vector3,Ku=new Vector3),Gu||(ju=0,zu=0,Hu=0,Uu=0);var Xu,Zu,_c,Xc=Ou.extractPoints(ku),_h=Xc.shape,ip=Xc.holes,ap=!ShapeUtils.isClockWise(_h);if(ap)for(_h=_h.reverse(),Zu=0,_c=ip.length;Zu<_c;Zu++)Xu=ip[Zu],ShapeUtils.isClockWise(Xu)&&(ip[Zu]=Xu.reverse());var hp=ShapeUtils.triangulateShape(_h,ip),Ap=_h;for(Zu=0,_c=ip.length;Zu<_c;Zu++)Xu=ip[Zu],_h=_h.concat(Xu);function gp(Kp,ev,Xp){return ev||console.error("THREE.ExtrudeGeometry: vec does not exist"),ev.clone().multiplyScalar(Xp).add(Kp)}var Rp,Sp,Dp,Ep,Bp,Ip=_h.length,ep,_f=hp.length;function op(Kp,ev,Xp){var Zp,Tp,Jp,nv=Kp.x-ev.x,ov=Kp.y-ev.y,rv=Xp.x-Kp.x,hv=Xp.y-Kp.y,Av=nv*nv+ov*ov,xv=nv*hv-ov*rv;if(Math.abs(xv)>Number.EPSILON){var wv=Math.sqrt(Av),fv=Math.sqrt(rv*rv+hv*hv),$v=ev.x-ov/wv,Tv=ev.y+nv/wv,yv=Xp.x-hv/fv,Cv=Xp.y+rv/fv,Dv=((yv-$v)*hv-(Cv-Tv)*rv)/(nv*hv-ov*rv);Zp=$v+nv*Dv-Kp.x,Tp=Tv+ov*Dv-Kp.y;var Ev=Zp*Zp+Tp*Tp;if(Ev<=2)return new Vector2(Zp,Tp);Jp=Math.sqrt(Ev/2)}else{var wp=!1;nv>Number.EPSILON?rv>Number.EPSILON&&(wp=!0):nv<-Number.EPSILON?rv<-Number.EPSILON&&(wp=!0):Math.sign(ov)===Math.sign(hv)&&(wp=!0),wp?(Zp=-ov,Tp=nv,Jp=Math.sqrt(Av)):(Zp=nv,Tp=ov,Jp=Math.sqrt(Av/2))}return new Vector2(Zp/Jp,Tp/Jp)}for(var rp=[],up=0,cp=Ap.length,fp=cp-1,vp=up+1;up<cp;up++,fp++,vp++)fp===cp&&(fp=0),vp===cp&&(vp=0),rp[up]=op(Ap[up],Ap[fp],Ap[vp]);var xp=[],mp,sp=rp.concat();for(Zu=0,_c=ip.length;Zu<_c;Zu++){for(Xu=ip[Zu],mp=[],up=0,cp=Xu.length,fp=cp-1,vp=up+1;up<cp;up++,fp++,vp++)fp===cp&&(fp=0),vp===cp&&(vp=0),mp[up]=op(Xu[up],Xu[fp],Xu[vp]);xp.push(mp),sp=sp.concat(mp)}for(Rp=0;Rp<ju;Rp++){for(Dp=Rp/ju,Ep=zu*Math.cos(Dp*Math.PI/2),Sp=Hu*Math.sin(Dp*Math.PI/2)+Uu,up=0,cp=Ap.length;up<cp;up++)Bp=gp(Ap[up],rp[up],Sp),Vp(Bp.x,Bp.y,-Ep);for(Zu=0,_c=ip.length;Zu<_c;Zu++)for(Xu=ip[Zu],mp=xp[Zu],up=0,cp=Xu.length;up<cp;up++)Bp=gp(Xu[up],mp[up],Sp),Vp(Bp.x,Bp.y,-Ep)}for(Sp=Hu+Uu,up=0;up<Ip;up++)Bp=Gu?gp(_h[up],sp[up],Sp):_h[up],Yu?(tp.copy(Ju.normals[0]).multiplyScalar(Bp.x),_d.copy(Ju.binormals[0]).multiplyScalar(Bp.y),Ku.copy(qu[0]).add(tp).add(_d),Vp(Ku.x,Ku.y,Ku.z)):Vp(Bp.x,Bp.y,0);var lp;for(lp=1;lp<=Fu;lp++)for(up=0;up<Ip;up++)Bp=Gu?gp(_h[up],sp[up],Sp):_h[up],Yu?(tp.copy(Ju.normals[lp]).multiplyScalar(Bp.x),_d.copy(Ju.binormals[lp]).multiplyScalar(Bp.y),Ku.copy(qu[lp]).add(tp).add(_d),Vp(Ku.x,Ku.y,Ku.z)):Vp(Bp.x,Bp.y,Nu/Fu*lp);for(Rp=ju-1;Rp>=0;Rp--){for(Dp=Rp/ju,Ep=zu*Math.cos(Dp*Math.PI/2),Sp=Hu*Math.sin(Dp*Math.PI/2)+Uu,up=0,cp=Ap.length;up<cp;up++)Bp=gp(Ap[up],rp[up],Sp),Vp(Bp.x,Bp.y,Nu+Ep);for(Zu=0,_c=ip.length;Zu<_c;Zu++)for(Xu=ip[Zu],mp=xp[Zu],up=0,cp=Xu.length;up<cp;up++)Bp=gp(Xu[up],mp[up],Sp),Yu?Vp(Bp.x,Bp.y+qu[Fu-1].y,qu[Fu-1].x+Ep):Vp(Bp.x,Bp.y,Nu+Ep)}$p(),Mp();function $p(){var Kp=Cu.length/3;if(Gu){var ev=0,Xp=Ip*ev;for(up=0;up<_f;up++)ep=hp[up],Gp(ep[2]+Xp,ep[1]+Xp,ep[0]+Xp);for(ev=Fu+ju*2,Xp=Ip*ev,up=0;up<_f;up++)ep=hp[up],Gp(ep[0]+Xp,ep[1]+Xp,ep[2]+Xp)}else{for(up=0;up<_f;up++)ep=hp[up],Gp(ep[2],ep[1],ep[0]);for(up=0;up<_f;up++)ep=hp[up],Gp(ep[0]+Ip*Fu,ep[1]+Ip*Fu,ep[2]+Ip*Fu)}Tu.addGroup(Kp,Cu.length/3-Kp,0)}function Mp(){var Kp=Cu.length/3,ev=0;for(kp(Ap,ev),ev+=Ap.length,Zu=0,_c=ip.length;Zu<_c;Zu++)Xu=ip[Zu],kp(Xu,ev),ev+=Xu.length;Tu.addGroup(Kp,Cu.length/3-Kp,1)}function kp(Kp,ev){var Xp,Zp;for(up=Kp.length;--up>=0;){Xp=up,Zp=up-1,Zp<0&&(Zp=Kp.length-1);var Tp=0,Jp=Fu+ju*2;for(Tp=0;Tp<Jp;Tp++){var nv=Ip*Tp,ov=Ip*(Tp+1),rv=ev+Xp+nv,hv=ev+Zp+nv,Av=ev+Zp+ov,xv=ev+Xp+ov;qp(rv,hv,Av,xv)}}}function Vp(Kp,ev,Xp){Du.push(Kp),Du.push(ev),Du.push(Xp)}function Gp(Kp,ev,Xp){Wp(Kp),Wp(ev),Wp(Xp);var Zp=Cu.length/3,Tp=Qu.generateTopUV(Tu,Cu,Zp-3,Zp-2,Zp-1);Yp(Tp[0]),Yp(Tp[1]),Yp(Tp[2])}function qp(Kp,ev,Xp,Zp){Wp(Kp),Wp(ev),Wp(Zp),Wp(ev),Wp(Xp),Wp(Zp);var Tp=Cu.length/3,Jp=Qu.generateSideWallUV(Tu,Cu,Tp-6,Tp-3,Tp-2,Tp-1);Yp(Jp[0]),Yp(Jp[1]),Yp(Jp[3]),Yp(Jp[1]),Yp(Jp[2]),Yp(Jp[3])}function Wp(Kp){Cu.push(Du[Kp*3+0]),Cu.push(Du[Kp*3+1]),Cu.push(Du[Kp*3+2])}function Yp(Kp){Pu.push(Kp.x),Pu.push(Kp.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Tu=this.parameters.options;return toJSON($u,Tu,_u)};var WorldUVGenerator={generateTopUV:function(_u,$u,Tu,Cu,Pu){var Ru=$u[Tu*3],Lu=$u[Tu*3+1],Bu=$u[Cu*3],Vu=$u[Cu*3+1],Ou=$u[Pu*3],Du=$u[Pu*3+1];return[new Vector2(Ru,Lu),new Vector2(Bu,Vu),new Vector2(Ou,Du)]},generateSideWallUV:function(_u,$u,Tu,Cu,Pu,Ru){var Lu=$u[Tu*3],Bu=$u[Tu*3+1],Vu=$u[Tu*3+2],Ou=$u[Cu*3],Du=$u[Cu*3+1],ku=$u[Cu*3+2],Fu=$u[Pu*3],Nu=$u[Pu*3+1],Gu=$u[Pu*3+2],zu=$u[Ru*3],Hu=$u[Ru*3+1],Uu=$u[Ru*3+2];return Math.abs(Bu-Du)<.01?[new Vector2(Lu,1-Vu),new Vector2(Ou,1-ku),new Vector2(Fu,1-Gu),new Vector2(zu,1-Uu)]:[new Vector2(Bu,1-Vu),new Vector2(Du,1-ku),new Vector2(Nu,1-Gu),new Vector2(Hu,1-Uu)]}};function toJSON(_u,$u,Tu){if(Tu.shapes=[],Array.isArray(_u))for(var Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Ru=_u[Cu];Tu.shapes.push(Ru.uuid)}else Tu.shapes.push(_u.uuid);return $u.extrudePath!==void 0&&(Tu.options.extrudePath=$u.extrudePath.toJSON()),Tu}function TextGeometry(_u,$u){Geometry.call(this),this.type="TextGeometry",this.parameters={text:_u,parameters:$u},this.fromBufferGeometry(new TextBufferGeometry(_u,$u)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(_u,$u){$u=$u||{};var Tu=$u.font;if(!(Tu&&Tu.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Cu=Tu.generateShapes(_u,$u.size);$u.depth=$u.height!==void 0?$u.height:50,$u.bevelThickness===void 0&&($u.bevelThickness=10),$u.bevelSize===void 0&&($u.bevelSize=8),$u.bevelEnabled===void 0&&($u.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Cu,$u),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Tu,phiStart:Cu,phiLength:Pu,thetaStart:Ru,thetaLength:Lu},this.fromBufferGeometry(new SphereBufferGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Tu,phiStart:Cu,phiLength:Pu,thetaStart:Ru,thetaLength:Lu},_u=_u||1,$u=Math.max(3,Math.floor($u)||8),Tu=Math.max(2,Math.floor(Tu)||6),Cu=Cu!==void 0?Cu:0,Pu=Pu!==void 0?Pu:Math.PI*2,Ru=Ru!==void 0?Ru:0,Lu=Lu!==void 0?Lu:Math.PI;var Bu=Math.min(Ru+Lu,Math.PI),Vu,Ou,Du=0,ku=[],Fu=new Vector3,Nu=new Vector3,Gu=[],zu=[],Hu=[],Uu=[];for(Ou=0;Ou<=Tu;Ou++){var ju=[],Wu=Ou/Tu,Qu=0;for(Ou==0&&Ru==0?Qu=.5/$u:Ou==Tu&&Bu==Math.PI&&(Qu=-.5/$u),Vu=0;Vu<=$u;Vu++){var qu=Vu/$u;Fu.x=-_u*Math.cos(Cu+qu*Pu)*Math.sin(Ru+Wu*Lu),Fu.y=_u*Math.cos(Ru+Wu*Lu),Fu.z=_u*Math.sin(Cu+qu*Pu)*Math.sin(Ru+Wu*Lu),zu.push(Fu.x,Fu.y,Fu.z),Nu.copy(Fu).normalize(),Hu.push(Nu.x,Nu.y,Nu.z),Uu.push(qu+Qu,1-Wu),ju.push(Du++)}ku.push(ju)}for(Ou=0;Ou<Tu;Ou++)for(Vu=0;Vu<$u;Vu++){var Yu=ku[Ou][Vu+1],Ju=ku[Ou][Vu],_d=ku[Ou+1][Vu],tp=ku[Ou+1][Vu+1];(Ou!==0||Ru>0)&&Gu.push(Yu,Ju,tp),(Ou!==Tu-1||Bu<Math.PI)&&Gu.push(Ju,_d,tp)}this.setIndex(Gu),this.setAttribute("position",new Float32BufferAttribute(zu,3)),this.setAttribute("normal",new Float32BufferAttribute(Hu,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(_u,$u,Tu,Cu,Pu,Ru){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Tu,phiSegments:Cu,thetaStart:Pu,thetaLength:Ru},this.fromBufferGeometry(new RingBufferGeometry(_u,$u,Tu,Cu,Pu,Ru)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(_u,$u,Tu,Cu,Pu,Ru){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Tu,phiSegments:Cu,thetaStart:Pu,thetaLength:Ru},_u=_u||.5,$u=$u||1,Pu=Pu!==void 0?Pu:0,Ru=Ru!==void 0?Ru:Math.PI*2,Tu=Tu!==void 0?Math.max(3,Tu):8,Cu=Cu!==void 0?Math.max(1,Cu):1;var Lu=[],Bu=[],Vu=[],Ou=[],Du,ku=_u,Fu=($u-_u)/Cu,Nu=new Vector3,Gu=new Vector2,zu,Hu;for(zu=0;zu<=Cu;zu++){for(Hu=0;Hu<=Tu;Hu++)Du=Pu+Hu/Tu*Ru,Nu.x=ku*Math.cos(Du),Nu.y=ku*Math.sin(Du),Bu.push(Nu.x,Nu.y,Nu.z),Vu.push(0,0,1),Gu.x=(Nu.x/$u+1)/2,Gu.y=(Nu.y/$u+1)/2,Ou.push(Gu.x,Gu.y);ku+=Fu}for(zu=0;zu<Cu;zu++){var Uu=zu*(Tu+1);for(Hu=0;Hu<Tu;Hu++){Du=Hu+Uu;var ju=Du,Wu=Du+Tu+1,Qu=Du+Tu+2,qu=Du+1;Lu.push(ju,Wu,qu),Lu.push(Wu,Qu,qu)}}this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("normal",new Float32BufferAttribute(Vu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:_u,segments:$u,phiStart:Tu,phiLength:Cu},this.fromBufferGeometry(new LatheBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:_u,segments:$u,phiStart:Tu,phiLength:Cu},$u=Math.floor($u)||12,Tu=Tu||0,Cu=Cu||Math.PI*2,Cu=MathUtils.clamp(Cu,0,Math.PI*2);var Pu=[],Ru=[],Lu=[],Bu,Vu=1/$u,Ou=new Vector3,Du=new Vector2,ku,Fu;for(ku=0;ku<=$u;ku++){var Nu=Tu+ku*Vu*Cu,Gu=Math.sin(Nu),zu=Math.cos(Nu);for(Fu=0;Fu<=_u.length-1;Fu++)Ou.x=_u[Fu].x*Gu,Ou.y=_u[Fu].y,Ou.z=_u[Fu].x*zu,Ru.push(Ou.x,Ou.y,Ou.z),Du.x=ku/$u,Du.y=Fu/(_u.length-1),Lu.push(Du.x,Du.y)}for(ku=0;ku<$u;ku++)for(Fu=0;Fu<_u.length-1;Fu++){Bu=Fu+ku*_u.length;var Hu=Bu,Uu=Bu+_u.length,ju=Bu+_u.length+1,Wu=Bu+1;Pu.push(Hu,Uu,Wu),Pu.push(Uu,ju,Wu)}if(this.setIndex(Pu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2)),this.computeVertexNormals(),Cu===Math.PI*2){var Qu=this.attributes.normal.array,qu=new Vector3,Yu=new Vector3,Ju=new Vector3;for(Bu=$u*_u.length*3,ku=0,Fu=0;ku<_u.length;ku++,Fu+=3)qu.x=Qu[Fu+0],qu.y=Qu[Fu+1],qu.z=Qu[Fu+2],Yu.x=Qu[Bu+Fu+0],Yu.y=Qu[Bu+Fu+1],Yu.z=Qu[Bu+Fu+2],Ju.addVectors(qu,Yu).normalize(),Qu[Fu+0]=Qu[Bu+Fu+0]=Ju.x,Qu[Fu+1]=Qu[Bu+Fu+1]=Ju.y,Qu[Fu+2]=Qu[Bu+Fu+2]=Ju.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(_u,$u){Geometry.call(this),this.type="ShapeGeometry",typeof $u=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),$u=$u.curveSegments),this.parameters={shapes:_u,curveSegments:$u},this.fromBufferGeometry(new ShapeBufferGeometry(_u,$u)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function ShapeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:_u,curveSegments:$u},$u=$u||12;var Tu=[],Cu=[],Pu=[],Ru=[],Lu=0,Bu=0;if(Array.isArray(_u)===!1)Ou(_u);else for(var Vu=0;Vu<_u.length;Vu++)Ou(_u[Vu]),this.addGroup(Lu,Bu,Vu),Lu+=Bu,Bu=0;this.setIndex(Tu),this.setAttribute("position",new Float32BufferAttribute(Cu,3)),this.setAttribute("normal",new Float32BufferAttribute(Pu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ru,2));function Ou(Du){var ku,Fu,Nu,Gu=Cu.length/3,zu=Du.extractPoints($u),Hu=zu.shape,Uu=zu.holes;for(ShapeUtils.isClockWise(Hu)===!1&&(Hu=Hu.reverse()),ku=0,Fu=Uu.length;ku<Fu;ku++)Nu=Uu[ku],ShapeUtils.isClockWise(Nu)===!0&&(Uu[ku]=Nu.reverse());var ju=ShapeUtils.triangulateShape(Hu,Uu);for(ku=0,Fu=Uu.length;ku<Fu;ku++)Nu=Uu[ku],Hu=Hu.concat(Nu);for(ku=0,Fu=Hu.length;ku<Fu;ku++){var Wu=Hu[ku];Cu.push(Wu.x,Wu.y,0),Pu.push(0,0,1),Ru.push(Wu.x,Wu.y)}for(ku=0,Fu=ju.length;ku<Fu;ku++){var Qu=ju[ku],qu=Qu[0]+Gu,Yu=Qu[1]+Gu,Ju=Qu[2]+Gu;Tu.push(qu,Yu,Ju),Bu+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function toJSON$1(_u,$u){if($u.shapes=[],Array.isArray(_u))for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=_u[Tu];$u.shapes.push(Pu.uuid)}else $u.shapes.push(_u.uuid);return $u}function EdgesGeometry(_u,$u){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:$u},$u=$u!==void 0?$u:1;var Tu=[],Cu=Math.cos(MathUtils.DEG2RAD*$u),Pu=[0,0],Ru={},Lu,Bu,Vu,Ou=["a","b","c"],Du;_u.isBufferGeometry?(Du=new Geometry,Du.fromBufferGeometry(_u)):Du=_u.clone(),Du.mergeVertices(),Du.computeFaceNormals();for(var ku=Du.vertices,Fu=Du.faces,Nu=0,Gu=Fu.length;Nu<Gu;Nu++)for(var zu=Fu[Nu],Hu=0;Hu<3;Hu++)Lu=zu[Ou[Hu]],Bu=zu[Ou[(Hu+1)%3]],Pu[0]=Math.min(Lu,Bu),Pu[1]=Math.max(Lu,Bu),Vu=Pu[0]+","+Pu[1],Ru[Vu]===void 0?Ru[Vu]={index1:Pu[0],index2:Pu[1],face1:Nu,face2:void 0}:Ru[Vu].face2=Nu;for(Vu in Ru){var Uu=Ru[Vu];if(Uu.face2===void 0||Fu[Uu.face1].normal.dot(Fu[Uu.face2].normal)<=Cu){var ju=ku[Uu.index1];Tu.push(ju.x,ju.y,ju.z),ju=ku[Uu.index2],Tu.push(ju.x,ju.y,ju.z)}}this.setAttribute("position",new Float32BufferAttribute(Tu,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Tu,radialSegments:Cu,heightSegments:Pu,openEnded:Ru,thetaStart:Lu,thetaLength:Bu},this.fromBufferGeometry(new CylinderBufferGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Tu,radialSegments:Cu,heightSegments:Pu,openEnded:Ru,thetaStart:Lu,thetaLength:Bu};var Vu=this;_u=_u!==void 0?_u:1,$u=$u!==void 0?$u:1,Tu=Tu||1,Cu=Math.floor(Cu)||8,Pu=Math.floor(Pu)||1,Ru=Ru!==void 0?Ru:!1,Lu=Lu!==void 0?Lu:0,Bu=Bu!==void 0?Bu:Math.PI*2;var Ou=[],Du=[],ku=[],Fu=[],Nu=0,Gu=[],zu=Tu/2,Hu=0;Uu(),Ru===!1&&(_u>0&&ju(!0),$u>0&&ju(!1)),this.setIndex(Ou),this.setAttribute("position",new Float32BufferAttribute(Du,3)),this.setAttribute("normal",new Float32BufferAttribute(ku,3)),this.setAttribute("uv",new Float32BufferAttribute(Fu,2));function Uu(){var Wu,Qu,qu=new Vector3,Yu=new Vector3,Ju=0,_d=($u-_u)/Tu;for(Qu=0;Qu<=Pu;Qu++){var tp=[],Ku=Qu/Pu,Xu=Ku*($u-_u)+_u;for(Wu=0;Wu<=Cu;Wu++){var Zu=Wu/Cu,_c=Zu*Bu+Lu,Xc=Math.sin(_c),_h=Math.cos(_c);Yu.x=Xu*Xc,Yu.y=-Ku*Tu+zu,Yu.z=Xu*_h,Du.push(Yu.x,Yu.y,Yu.z),qu.set(Xc,_d,_h).normalize(),ku.push(qu.x,qu.y,qu.z),Fu.push(Zu,1-Ku),tp.push(Nu++)}Gu.push(tp)}for(Wu=0;Wu<Cu;Wu++)for(Qu=0;Qu<Pu;Qu++){var ip=Gu[Qu][Wu],ap=Gu[Qu+1][Wu],hp=Gu[Qu+1][Wu+1],Ap=Gu[Qu][Wu+1];Ou.push(ip,ap,Ap),Ou.push(ap,hp,Ap),Ju+=6}Vu.addGroup(Hu,Ju,0),Hu+=Ju}function ju(Wu){var Qu,qu,Yu,Ju=new Vector2,_d=new Vector3,tp=0,Ku=Wu===!0?_u:$u,Xu=Wu===!0?1:-1;for(qu=Nu,Qu=1;Qu<=Cu;Qu++)Du.push(0,zu*Xu,0),ku.push(0,Xu,0),Fu.push(.5,.5),Nu++;for(Yu=Nu,Qu=0;Qu<=Cu;Qu++){var Zu=Qu/Cu,_c=Zu*Bu+Lu,Xc=Math.cos(_c),_h=Math.sin(_c);_d.x=Ku*_h,_d.y=zu*Xu,_d.z=Ku*Xc,Du.push(_d.x,_d.y,_d.z),ku.push(0,Xu,0),Ju.x=Xc*.5+.5,Ju.y=_h*.5*Xu+.5,Fu.push(Ju.x,Ju.y),Nu++}for(Qu=0;Qu<Cu;Qu++){var ip=qu+Qu,ap=Yu+Qu;Wu===!0?Ou.push(ap,ap+1,ip):Ou.push(ap+1,ap,ip),tp+=3}Vu.addGroup(Hu,tp,Wu===!0?1:2),Hu+=tp}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu){CylinderGeometry.call(this,0,_u,$u,Tu,Cu,Pu,Ru,Lu),this.type="ConeGeometry",this.parameters={radius:_u,height:$u,radialSegments:Tu,heightSegments:Cu,openEnded:Pu,thetaStart:Ru,thetaLength:Lu}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(_u,$u,Tu,Cu,Pu,Ru,Lu){CylinderBufferGeometry.call(this,0,_u,$u,Tu,Cu,Pu,Ru,Lu),this.type="ConeBufferGeometry",this.parameters={radius:_u,height:$u,radialSegments:Tu,heightSegments:Cu,openEnded:Pu,thetaStart:Ru,thetaLength:Lu}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Tu,thetaLength:Cu},this.fromBufferGeometry(new CircleBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Tu,thetaLength:Cu},_u=_u||1,$u=$u!==void 0?Math.max(3,$u):8,Tu=Tu!==void 0?Tu:0,Cu=Cu!==void 0?Cu:Math.PI*2;var Pu=[],Ru=[],Lu=[],Bu=[],Vu,Ou,Du=new Vector3,ku=new Vector2;for(Ru.push(0,0,0),Lu.push(0,0,1),Bu.push(.5,.5),Ou=0,Vu=3;Ou<=$u;Ou++,Vu+=3){var Fu=Tu+Ou/$u*Cu;Du.x=_u*Math.cos(Fu),Du.y=_u*Math.sin(Fu),Ru.push(Du.x,Du.y,Du.z),Lu.push(0,0,1),ku.x=(Ru[Vu]/_u+1)/2,ku.y=(Ru[Vu+1]/_u+1)/2,Bu.push(ku.x,ku.y)}for(Vu=1;Vu<=$u;Vu++)Pu.push(Vu,Vu+1,0);this.setIndex(Pu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("normal",new Float32BufferAttribute(Lu,3)),this.setAttribute("uv",new Float32BufferAttribute(Bu,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(_u){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(_u)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this};function RawShaderMaterial(_u){ShaderMaterial.call(this,_u),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(_u){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(_u)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={STANDARD:""},this.color.copy(_u.color),this.roughness=_u.roughness,this.metalness=_u.metalness,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.roughnessMap=_u.roughnessMap,this.metalnessMap=_u.metalnessMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.envMapIntensity=_u.envMapIntensity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.vertexTangents=_u.vertexTangents,this};function MeshPhysicalMaterial(_u){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(_u)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(_u){return MeshStandardMaterial.prototype.copy.call(this,_u),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=_u.clearcoat,this.clearcoatMap=_u.clearcoatMap,this.clearcoatRoughness=_u.clearcoatRoughness,this.clearcoatRoughnessMap=_u.clearcoatRoughnessMap,this.clearcoatNormalMap=_u.clearcoatNormalMap,this.clearcoatNormalScale.copy(_u.clearcoatNormalScale),this.reflectivity=_u.reflectivity,_u.sheen?this.sheen=(this.sheen||new Color).copy(_u.sheen):this.sheen=null,this.transparency=_u.transparency,this};function MeshPhongMaterial(_u){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshToonMaterial(_u){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.gradientMap=_u.gradientMap,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshNormalMaterial(_u){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshLambertMaterial(_u){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshMatcapMaterial(_u){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={MATCAP:""},this.color.copy(_u.color),this.matcap=_u.matcap,this.map=_u.map,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.alphaMap=_u.alphaMap,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function LineDashedMaterial(_u){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_u)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(_u){return LineBasicMaterial.prototype.copy.call(this,_u),this.scale=_u.scale,this.dashSize=_u.dashSize,this.gapSize=_u.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(_u,$u,Tu){return AnimationUtils.isTypedArray(_u)?new _u.constructor(_u.subarray($u,Tu!==void 0?Tu:_u.length)):_u.slice($u,Tu)},convertArray:function(_u,$u,Tu){return!_u||!Tu&&_u.constructor===$u?_u:typeof $u.BYTES_PER_ELEMENT=="number"?new $u(_u):Array.prototype.slice.call(_u)},isTypedArray:function(_u){return ArrayBuffer.isView(_u)&&!(_u instanceof DataView)},getKeyframeOrder:function(_u){function $u(Ru,Lu){return _u[Ru]-_u[Lu]}for(var Tu=_u.length,Cu=new Array(Tu),Pu=0;Pu!==Tu;++Pu)Cu[Pu]=Pu;return Cu.sort($u),Cu},sortedArray:function(_u,$u,Tu){for(var Cu=_u.length,Pu=new _u.constructor(Cu),Ru=0,Lu=0;Lu!==Cu;++Ru)for(var Bu=Tu[Ru]*$u,Vu=0;Vu!==$u;++Vu)Pu[Lu++]=_u[Bu+Vu];return Pu},flattenJSON:function(_u,$u,Tu,Cu){for(var Pu=1,Ru=_u[0];Ru!==void 0&&Ru[Cu]===void 0;)Ru=_u[Pu++];if(Ru!==void 0){var Lu=Ru[Cu];if(Lu!==void 0)if(Array.isArray(Lu))do Lu=Ru[Cu],Lu!==void 0&&($u.push(Ru.time),Tu.push.apply(Tu,Lu)),Ru=_u[Pu++];while(Ru!==void 0);else if(Lu.toArray!==void 0)do Lu=Ru[Cu],Lu!==void 0&&($u.push(Ru.time),Lu.toArray(Tu,Tu.length)),Ru=_u[Pu++];while(Ru!==void 0);else do Lu=Ru[Cu],Lu!==void 0&&($u.push(Ru.time),Tu.push(Lu)),Ru=_u[Pu++];while(Ru!==void 0)}},subclip:function(_u,$u,Tu,Cu,Pu){Pu=Pu||30;var Ru=_u.clone();Ru.name=$u;for(var Lu=[],Bu=0;Bu<Ru.tracks.length;++Bu){for(var Vu=Ru.tracks[Bu],Ou=Vu.getValueSize(),Du=[],ku=[],Fu=0;Fu<Vu.times.length;++Fu){var Nu=Vu.times[Fu]*Pu;if(!(Nu<Tu||Nu>=Cu)){Du.push(Vu.times[Fu]);for(var Gu=0;Gu<Ou;++Gu)ku.push(Vu.values[Fu*Ou+Gu])}}Du.length!==0&&(Vu.times=AnimationUtils.convertArray(Du,Vu.times.constructor),Vu.values=AnimationUtils.convertArray(ku,Vu.values.constructor),Lu.push(Vu))}Ru.tracks=Lu;for(var zu=1/0,Bu=0;Bu<Ru.tracks.length;++Bu)zu>Ru.tracks[Bu].times[0]&&(zu=Ru.tracks[Bu].times[0]);for(var Bu=0;Bu<Ru.tracks.length;++Bu)Ru.tracks[Bu].shift(-1*zu);return Ru.resetDuration(),Ru},makeClipAdditive:function(_u,$u,Tu,Cu){$u===void 0&&($u=0),Tu===void 0&&(Tu=_u),(Cu===void 0||Cu<=0)&&(Cu=30);for(var Pu=_u.tracks.length,Ru=$u/Cu,Lu=0;Lu<Pu;++Lu){var Bu=Tu.tracks[Lu],Vu=Bu.ValueTypeName;if(!(Vu==="bool"||Vu==="string")){var Ou=_u.tracks.find(function(Qu){return Qu.name===Bu.name&&Qu.ValueTypeName===Vu});if(Ou!==void 0){var Du=Bu.getValueSize(),ku=Bu.times.length-1,Fu;if(Ru<=Bu.times[0])Fu=AnimationUtils.arraySlice(Bu.values,0,Bu.valueSize);else if(Ru>=Bu.times[ku]){var Nu=ku*Du;Fu=AnimationUtils.arraySlice(Bu.values,Nu)}else{var Gu=Bu.createInterpolant();Gu.evaluate(Ru),Fu=Gu.resultBuffer}if(Vu==="quaternion"){var zu=new Quaternion(Fu[0],Fu[1],Fu[2],Fu[3]).normalize().conjugate();zu.toArray(Fu)}for(var Hu=Ou.times.length,Uu=0;Uu<Hu;++Uu){var ju=Uu*Du;if(Vu==="quaternion")Quaternion.multiplyQuaternionsFlat(Ou.values,ju,Fu,0,Ou.values,ju);else for(var Wu=0;Wu<Du;++Wu)Ou.values[ju+Wu]-=Fu[Wu]}}}}return _u.blendMode=AdditiveAnimationBlendMode,_u}};function Interpolant(_u,$u,Tu,Cu){this.parameterPositions=_u,this._cachedIndex=0,this.resultBuffer=Cu!==void 0?Cu:new $u.constructor(Tu),this.sampleValues=$u,this.valueSize=Tu}Object.assign(Interpolant.prototype,{evaluate:function(_u){var $u=this.parameterPositions,Tu=this._cachedIndex,Cu=$u[Tu],Pu=$u[Tu-1];e:{t:{var Ru;n:{r:if(!(_u<Cu)){for(var Lu=Tu+2;;){if(Cu===void 0){if(_u<Pu)break r;return Tu=$u.length,this._cachedIndex=Tu,this.afterEnd_(Tu-1,_u,Pu)}if(Tu===Lu)break;if(Pu=Cu,Cu=$u[++Tu],_u<Cu)break t}Ru=$u.length;break n}if(!(_u>=Pu)){var Bu=$u[1];_u<Bu&&(Tu=2,Pu=Bu);for(var Lu=Tu-2;;){if(Pu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Cu);if(Tu===Lu)break;if(Cu=Pu,Pu=$u[--Tu-1],_u>=Pu)break t}Ru=Tu,Tu=0;break n}break e}for(;Tu<Ru;){var Vu=Tu+Ru>>>1;_u<$u[Vu]?Ru=Vu:Tu=Vu+1}if(Cu=$u[Tu],Pu=$u[Tu-1],Pu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Cu);if(Cu===void 0)return Tu=$u.length,this._cachedIndex=Tu,this.afterEnd_(Tu-1,Pu,_u)}this._cachedIndex=Tu,this.intervalChanged_(Tu,Pu,Cu)}return this.interpolate_(Tu,Pu,_u,Cu)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(_u){for(var $u=this.resultBuffer,Tu=this.sampleValues,Cu=this.valueSize,Pu=_u*Cu,Ru=0;Ru!==Cu;++Ru)$u[Ru]=Tu[Pu+Ru];return $u},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(_u,$u,Tu){var Cu=this.parameterPositions,Pu=_u-2,Ru=_u+1,Lu=Cu[Pu],Bu=Cu[Ru];if(Lu===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Pu=_u,Lu=2*$u-Tu;break;case WrapAroundEnding:Pu=Cu.length-2,Lu=$u+Cu[Pu]-Cu[Pu+1];break;default:Pu=_u,Lu=Tu}if(Bu===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ru=_u,Bu=2*Tu-$u;break;case WrapAroundEnding:Ru=1,Bu=Tu+Cu[1]-Cu[0];break;default:Ru=_u-1,Bu=$u}var Vu=(Tu-$u)*.5,Ou=this.valueSize;this._weightPrev=Vu/($u-Lu),this._weightNext=Vu/(Bu-Tu),this._offsetPrev=Pu*Ou,this._offsetNext=Ru*Ou},interpolate_:function(_u,$u,Tu,Cu){for(var Pu=this.resultBuffer,Ru=this.sampleValues,Lu=this.valueSize,Bu=_u*Lu,Vu=Bu-Lu,Ou=this._offsetPrev,Du=this._offsetNext,ku=this._weightPrev,Fu=this._weightNext,Nu=(Tu-$u)/(Cu-$u),Gu=Nu*Nu,zu=Gu*Nu,Hu=-ku*zu+2*ku*Gu-ku*Nu,Uu=(1+ku)*zu+(-1.5-2*ku)*Gu+(-.5+ku)*Nu+1,ju=(-1-Fu)*zu+(1.5+Fu)*Gu+.5*Nu,Wu=Fu*zu-Fu*Gu,Qu=0;Qu!==Lu;++Qu)Pu[Qu]=Hu*Ru[Ou+Qu]+Uu*Ru[Vu+Qu]+ju*Ru[Bu+Qu]+Wu*Ru[Du+Qu];return Pu}});function LinearInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(_u,$u,Tu,Cu){for(var Pu=this.resultBuffer,Ru=this.sampleValues,Lu=this.valueSize,Bu=_u*Lu,Vu=Bu-Lu,Ou=(Tu-$u)/(Cu-$u),Du=1-Ou,ku=0;ku!==Lu;++ku)Pu[ku]=Ru[Vu+ku]*Du+Ru[Bu+ku]*Ou;return Pu}});function DiscreteInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(_u){return this.copySampleValue_(_u-1)}});function KeyframeTrack(_u,$u,Tu,Cu){if(_u===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if($u===void 0||$u.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_u);this.name=_u,this.times=AnimationUtils.convertArray($u,this.TimeBufferType),this.values=AnimationUtils.convertArray(Tu,this.ValueBufferType),this.setInterpolation(Cu||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(_u){var $u=_u.constructor,Tu;if($u.toJSON!==void 0)Tu=$u.toJSON(_u);else{Tu={name:_u.name,times:AnimationUtils.convertArray(_u.times,Array),values:AnimationUtils.convertArray(_u.values,Array)};var Cu=_u.getInterpolation();Cu!==_u.DefaultInterpolation&&(Tu.interpolation=Cu)}return Tu.type=_u.ValueTypeName,Tu}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(_u){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodLinear:function(_u){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:function(_u){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_u)},setInterpolation:function(_u){var $u;switch(_u){case InterpolateDiscrete:$u=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:$u=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:$u=this.InterpolantFactoryMethodSmooth;break}if($u===void 0){var Tu="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_u!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Tu);return console.warn("THREE.KeyframeTrack:",Tu),this}return this.createInterpolant=$u,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(_u){if(_u!==0)for(var $u=this.times,Tu=0,Cu=$u.length;Tu!==Cu;++Tu)$u[Tu]+=_u;return this},scale:function(_u){if(_u!==1)for(var $u=this.times,Tu=0,Cu=$u.length;Tu!==Cu;++Tu)$u[Tu]*=_u;return this},trim:function(_u,$u){for(var Tu=this.times,Cu=Tu.length,Pu=0,Ru=Cu-1;Pu!==Cu&&Tu[Pu]<_u;)++Pu;for(;Ru!==-1&&Tu[Ru]>$u;)--Ru;if(++Ru,Pu!==0||Ru!==Cu){Pu>=Ru&&(Ru=Math.max(Ru,1),Pu=Ru-1);var Lu=this.getValueSize();this.times=AnimationUtils.arraySlice(Tu,Pu,Ru),this.values=AnimationUtils.arraySlice(this.values,Pu*Lu,Ru*Lu)}return this},validate:function(){var _u=!0,$u=this.getValueSize();$u-Math.floor($u)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_u=!1);var Tu=this.times,Cu=this.values,Pu=Tu.length;Pu===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_u=!1);for(var Ru=null,Lu=0;Lu!==Pu;Lu++){var Bu=Tu[Lu];if(typeof Bu=="number"&&isNaN(Bu)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Lu,Bu),_u=!1;break}if(Ru!==null&&Ru>Bu){console.error("THREE.KeyframeTrack: Out of order keys.",this,Lu,Bu,Ru),_u=!1;break}Ru=Bu}if(Cu!==void 0&&AnimationUtils.isTypedArray(Cu))for(var Lu=0,Vu=Cu.length;Lu!==Vu;++Lu){var Ou=Cu[Lu];if(isNaN(Ou)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Lu,Ou),_u=!1;break}}return _u},optimize:function(){for(var _u=AnimationUtils.arraySlice(this.times),$u=AnimationUtils.arraySlice(this.values),Tu=this.getValueSize(),Cu=this.getInterpolation()===InterpolateSmooth,Pu=1,Ru=_u.length-1,Lu=1;Lu<Ru;++Lu){var Bu=!1,Vu=_u[Lu],Ou=_u[Lu+1];if(Vu!==Ou&&(Lu!==1||Vu!==Vu[0]))if(Cu)Bu=!0;else for(var Du=Lu*Tu,ku=Du-Tu,Fu=Du+Tu,Nu=0;Nu!==Tu;++Nu){var Gu=$u[Du+Nu];if(Gu!==$u[ku+Nu]||Gu!==$u[Fu+Nu]){Bu=!0;break}}if(Bu){if(Lu!==Pu){_u[Pu]=_u[Lu];for(var zu=Lu*Tu,Hu=Pu*Tu,Nu=0;Nu!==Tu;++Nu)$u[Hu+Nu]=$u[zu+Nu]}++Pu}}if(Ru>0){_u[Pu]=_u[Ru];for(var zu=Ru*Tu,Hu=Pu*Tu,Nu=0;Nu!==Tu;++Nu)$u[Hu+Nu]=$u[zu+Nu];++Pu}return Pu!==_u.length?(this.times=AnimationUtils.arraySlice(_u,0,Pu),this.values=AnimationUtils.arraySlice($u,0,Pu*Tu)):(this.times=_u,this.values=$u),this},clone:function(){var _u=AnimationUtils.arraySlice(this.times,0),$u=AnimationUtils.arraySlice(this.values,0),Tu=this.constructor,Cu=new Tu(this.name,_u,$u);return Cu.createInterpolant=this.createInterpolant,Cu}});function BooleanKeyframeTrack(_u,$u,Tu){KeyframeTrack.call(this,_u,$u,Tu)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(_u,$u,Tu,Cu){for(var Pu=this.resultBuffer,Ru=this.sampleValues,Lu=this.valueSize,Bu=_u*Lu,Vu=(Tu-$u)/(Cu-$u),Ou=Bu+Lu;Bu!==Ou;Bu+=4)Quaternion.slerpFlat(Pu,0,Ru,Bu-Lu,Ru,Bu,Vu);return Pu}});function QuaternionKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(_u){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(_u,$u,Tu,Cu){this.name=_u,this.tracks=Tu,this.duration=$u!==void 0?$u:-1,this.blendMode=Cu!==void 0?Cu:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(_u){switch(_u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_u)}function parseKeyframeTrack(_u){if(_u.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var $u=getTrackTypeForValueTypeName(_u.type);if(_u.times===void 0){var Tu=[],Cu=[];AnimationUtils.flattenJSON(_u.keys,Tu,Cu,"value"),_u.times=Tu,_u.values=Cu}return $u.parse!==void 0?$u.parse(_u):new $u(_u.name,_u.times,_u.values,_u.interpolation)}Object.assign(AnimationClip,{parse:function(_u){for(var $u=[],Tu=_u.tracks,Cu=1/(_u.fps||1),Pu=0,Ru=Tu.length;Pu!==Ru;++Pu)$u.push(parseKeyframeTrack(Tu[Pu]).scale(Cu));return new AnimationClip(_u.name,_u.duration,$u,_u.blendMode)},toJSON:function(_u){for(var $u=[],Tu=_u.tracks,Cu={name:_u.name,duration:_u.duration,tracks:$u,uuid:_u.uuid,blendMode:_u.blendMode},Pu=0,Ru=Tu.length;Pu!==Ru;++Pu)$u.push(KeyframeTrack.toJSON(Tu[Pu]));return Cu},CreateFromMorphTargetSequence:function(_u,$u,Tu,Cu){for(var Pu=$u.length,Ru=[],Lu=0;Lu<Pu;Lu++){var Bu=[],Vu=[];Bu.push((Lu+Pu-1)%Pu,Lu,(Lu+1)%Pu),Vu.push(0,1,0);var Ou=AnimationUtils.getKeyframeOrder(Bu);Bu=AnimationUtils.sortedArray(Bu,1,Ou),Vu=AnimationUtils.sortedArray(Vu,1,Ou),!Cu&&Bu[0]===0&&(Bu.push(Pu),Vu.push(Vu[0])),Ru.push(new NumberKeyframeTrack(".morphTargetInfluences["+$u[Lu].name+"]",Bu,Vu).scale(1/Tu))}return new AnimationClip(_u,-1,Ru)},findByName:function(_u,$u){var Tu=_u;if(!Array.isArray(_u)){var Cu=_u;Tu=Cu.geometry&&Cu.geometry.animations||Cu.animations}for(var Pu=0;Pu<Tu.length;Pu++)if(Tu[Pu].name===$u)return Tu[Pu];return null},CreateClipsFromMorphTargetSequences:function(_u,$u,Tu){for(var Cu={},Pu=/^([\w-]*?)([\d]+)$/,Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Bu=_u[Ru],Vu=Bu.name.match(Pu);if(Vu&&Vu.length>1){var Ou=Vu[1],Du=Cu[Ou];Du||(Cu[Ou]=Du=[]),Du.push(Bu)}}var ku=[];for(var Ou in Cu)ku.push(AnimationClip.CreateFromMorphTargetSequence(Ou,Cu[Ou],$u,Tu));return ku},parseAnimation:function(_u,$u){if(!_u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var Tu=function(Qu,qu,Yu,Ju,_d){if(Yu.length!==0){var tp=[],Ku=[];AnimationUtils.flattenJSON(Yu,tp,Ku,Ju),tp.length!==0&&_d.push(new Qu(qu,tp,Ku))}},Cu=[],Pu=_u.name||"default",Ru=_u.length||-1,Lu=_u.fps||30,Bu=_u.blendMode,Vu=_u.hierarchy||[],Ou=0;Ou<Vu.length;Ou++){var Du=Vu[Ou].keys;if(!(!Du||Du.length===0))if(Du[0].morphTargets){for(var ku={},Fu=0;Fu<Du.length;Fu++)if(Du[Fu].morphTargets)for(var Nu=0;Nu<Du[Fu].morphTargets.length;Nu++)ku[Du[Fu].morphTargets[Nu]]=-1;for(var Gu in ku){for(var zu=[],Hu=[],Nu=0;Nu!==Du[Fu].morphTargets.length;++Nu){var Uu=Du[Fu];zu.push(Uu.time),Hu.push(Uu.morphTarget===Gu?1:0)}Cu.push(new NumberKeyframeTrack(".morphTargetInfluence["+Gu+"]",zu,Hu))}Ru=ku.length*(Lu||1)}else{var ju=".bones["+$u[Ou].name+"]";Tu(VectorKeyframeTrack,ju+".position",Du,"pos",Cu),Tu(QuaternionKeyframeTrack,ju+".quaternion",Du,"rot",Cu),Tu(VectorKeyframeTrack,ju+".scale",Du,"scl",Cu)}}if(Cu.length===0)return null;var Wu=new AnimationClip(Pu,Ru,Cu,Bu);return Wu}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var _u=this.tracks,$u=0,Tu=0,Cu=_u.length;Tu!==Cu;++Tu){var Pu=this.tracks[Tu];$u=Math.max($u,Pu.times[Pu.times.length-1])}return this.duration=$u,this},trim:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].trim(0,this.duration);return this},validate:function(){for(var _u=!0,$u=0;$u<this.tracks.length;$u++)_u=_u&&this.tracks[$u].validate();return _u},optimize:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].optimize();return this},clone:function(){for(var _u=[],$u=0;$u<this.tracks.length;$u++)_u.push(this.tracks[$u].clone());return new AnimationClip(this.name,this.duration,_u,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(_u,$u){this.enabled!==!1&&(this.files[_u]=$u)},get:function(_u){if(this.enabled!==!1)return this.files[_u]},remove:function(_u){delete this.files[_u]},clear:function(){this.files={}}};function LoadingManager(_u,$u,Tu){var Cu=this,Pu=!1,Ru=0,Lu=0,Bu=void 0,Vu=[];this.onStart=void 0,this.onLoad=_u,this.onProgress=$u,this.onError=Tu,this.itemStart=function(Ou){Lu++,Pu===!1&&Cu.onStart!==void 0&&Cu.onStart(Ou,Ru,Lu),Pu=!0},this.itemEnd=function(Ou){Ru++,Cu.onProgress!==void 0&&Cu.onProgress(Ou,Ru,Lu),Ru===Lu&&(Pu=!1,Cu.onLoad!==void 0&&Cu.onLoad())},this.itemError=function(Ou){Cu.onError!==void 0&&Cu.onError(Ou)},this.resolveURL=function(Ou){return Bu?Bu(Ou):Ou},this.setURLModifier=function(Ou){return Bu=Ou,this},this.addHandler=function(Ou,Du){return Vu.push(Ou,Du),this},this.removeHandler=function(Ou){var Du=Vu.indexOf(Ou);return Du!==-1&&Vu.splice(Du,2),this},this.getHandler=function(Ou){for(var Du=0,ku=Vu.length;Du<ku;Du+=2){var Fu=Vu[Du],Nu=Vu[Du+1];if(Fu.global&&(Fu.lastIndex=0),Fu.test(Ou))return Nu}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(_u){this.manager=_u!==void 0?_u:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(_u,$u){var Tu=this;return new Promise(function(Cu,Pu){Tu.load(_u,Cu,$u,Pu)})},parse:function(){},setCrossOrigin:function(_u){return this.crossOrigin=_u,this},setPath:function(_u){return this.path=_u,this},setResourcePath:function(_u){return this.resourcePath=_u,this},setRequestHeader:function(_u){return this.requestHeader=_u,this}});var loading={};function FileLoader(_u){Loader.call(this,_u)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(_u,$u,Tu,Cu){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Pu=this,Ru=Cache.get(_u);if(Ru!==void 0)return Pu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Ru),Pu.manager.itemEnd(_u)},0),Ru;if(loading[_u]!==void 0){loading[_u].push({onLoad:$u,onProgress:Tu,onError:Cu});return}var Lu=/^data:(.*?)(;base64)?,(.*)$/,Bu=_u.match(Lu);if(Bu){var Vu=Bu[1],Ou=!!Bu[2],Du=Bu[3];Du=decodeURIComponent(Du),Ou&&(Du=atob(Du));try{var ku,Fu=(this.responseType||"").toLowerCase();switch(Fu){case"arraybuffer":case"blob":for(var Nu=new Uint8Array(Du.length),Gu=0;Gu<Du.length;Gu++)Nu[Gu]=Du.charCodeAt(Gu);Fu==="blob"?ku=new Blob([Nu.buffer],{type:Vu}):ku=Nu.buffer;break;case"document":var zu=new DOMParser;ku=zu.parseFromString(Du,Vu);break;case"json":ku=JSON.parse(Du);break;default:ku=Du;break}setTimeout(function(){$u&&$u(ku),Pu.manager.itemEnd(_u)},0)}catch(ju){setTimeout(function(){Cu&&Cu(ju),Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)},0)}}else{loading[_u]=[],loading[_u].push({onLoad:$u,onProgress:Tu,onError:Cu});var Hu=new XMLHttpRequest;Hu.open("GET",_u,!0),Hu.addEventListener("load",function(ju){var Wu=this.response,Qu=loading[_u];if(delete loading[_u],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(_u,Wu);for(var qu=0,Yu=Qu.length;qu<Yu;qu++){var Ju=Qu[qu];Ju.onLoad&&Ju.onLoad(Wu)}Pu.manager.itemEnd(_u)}else{for(var qu=0,Yu=Qu.length;qu<Yu;qu++){var Ju=Qu[qu];Ju.onError&&Ju.onError(ju)}Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)}},!1),Hu.addEventListener("progress",function(ju){for(var Wu=loading[_u],Qu=0,qu=Wu.length;Qu<qu;Qu++){var Yu=Wu[Qu];Yu.onProgress&&Yu.onProgress(ju)}},!1),Hu.addEventListener("error",function(ju){var Wu=loading[_u];delete loading[_u];for(var Qu=0,qu=Wu.length;Qu<qu;Qu++){var Yu=Wu[Qu];Yu.onError&&Yu.onError(ju)}Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)},!1),Hu.addEventListener("abort",function(ju){var Wu=loading[_u];delete loading[_u];for(var Qu=0,qu=Wu.length;Qu<qu;Qu++){var Yu=Wu[Qu];Yu.onError&&Yu.onError(ju)}Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)},!1),this.responseType!==void 0&&(Hu.responseType=this.responseType),this.withCredentials!==void 0&&(Hu.withCredentials=this.withCredentials),Hu.overrideMimeType&&Hu.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Uu in this.requestHeader)Hu.setRequestHeader(Uu,this.requestHeader[Uu]);Hu.send(null)}return Pu.manager.itemStart(_u),Hu},setResponseType:function(_u){return this.responseType=_u,this},setWithCredentials:function(_u){return this.withCredentials=_u,this},setMimeType:function(_u){return this.mimeType=_u,this}});function AnimationLoader(_u){Loader.call(this,_u)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=new FileLoader(Pu.manager);Ru.setPath(Pu.path),Ru.load(_u,function(Lu){try{$u(Pu.parse(JSON.parse(Lu)))}catch(Bu){Cu?Cu(Bu):console.error(Bu),Pu.manager.itemError(_u)}},Tu,Cu)},parse:function(_u){for(var $u=[],Tu=0;Tu<_u.length;Tu++){var Cu=AnimationClip.parse(_u[Tu]);$u.push(Cu)}return $u}});function CompressedTextureLoader(_u){Loader.call(this,_u)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=[],Lu=new CompressedTexture;Lu.image=Ru;var Bu=new FileLoader(this.manager);Bu.setPath(this.path),Bu.setResponseType("arraybuffer");function Vu(Fu){Bu.load(_u[Fu],function(Nu){var Gu=Pu.parse(Nu,!0);Ru[Fu]={width:Gu.width,height:Gu.height,format:Gu.format,mipmaps:Gu.mipmaps},Ou+=1,Ou===6&&(Gu.mipmapCount===1&&(Lu.minFilter=LinearFilter),Lu.format=Gu.format,Lu.needsUpdate=!0,$u&&$u(Lu))},Tu,Cu)}if(Array.isArray(_u))for(var Ou=0,Du=0,ku=_u.length;Du<ku;++Du)Vu(Du);else Bu.load(_u,function(Fu){var Nu=Pu.parse(Fu,!0);if(Nu.isCubemap)for(var Gu=Nu.mipmaps.length/Nu.mipmapCount,zu=0;zu<Gu;zu++){Ru[zu]={mipmaps:[]};for(var Hu=0;Hu<Nu.mipmapCount;Hu++)Ru[zu].mipmaps.push(Nu.mipmaps[zu*Nu.mipmapCount+Hu]),Ru[zu].format=Nu.format,Ru[zu].width=Nu.width,Ru[zu].height=Nu.height}else Lu.image.width=Nu.width,Lu.image.height=Nu.height,Lu.mipmaps=Nu.mipmaps;Nu.mipmapCount===1&&(Lu.minFilter=LinearFilter),Lu.format=Nu.format,Lu.needsUpdate=!0,$u&&$u(Lu)},Tu,Cu);return Lu}});function DataTextureLoader(_u){Loader.call(this,_u)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=new DataTexture,Lu=new FileLoader(this.manager);return Lu.setResponseType("arraybuffer"),Lu.setPath(this.path),Lu.load(_u,function(Bu){var Vu=Pu.parse(Bu);!Vu||(Vu.image!==void 0?Ru.image=Vu.image:Vu.data!==void 0&&(Ru.image.width=Vu.width,Ru.image.height=Vu.height,Ru.image.data=Vu.data),Ru.wrapS=Vu.wrapS!==void 0?Vu.wrapS:ClampToEdgeWrapping,Ru.wrapT=Vu.wrapT!==void 0?Vu.wrapT:ClampToEdgeWrapping,Ru.magFilter=Vu.magFilter!==void 0?Vu.magFilter:LinearFilter,Ru.minFilter=Vu.minFilter!==void 0?Vu.minFilter:LinearFilter,Ru.anisotropy=Vu.anisotropy!==void 0?Vu.anisotropy:1,Vu.format!==void 0&&(Ru.format=Vu.format),Vu.type!==void 0&&(Ru.type=Vu.type),Vu.mipmaps!==void 0&&(Ru.mipmaps=Vu.mipmaps,Ru.minFilter=LinearMipmapLinearFilter),Vu.mipmapCount===1&&(Ru.minFilter=LinearFilter),Ru.needsUpdate=!0,$u&&$u(Ru,Vu))},Tu,Cu),Ru}});function ImageLoader(_u){Loader.call(this,_u)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(_u,$u,Tu,Cu){this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Pu=this,Ru=Cache.get(_u);if(Ru!==void 0)return Pu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Ru),Pu.manager.itemEnd(_u)},0),Ru;var Lu=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Bu(){Lu.removeEventListener("load",Bu,!1),Lu.removeEventListener("error",Vu,!1),Cache.add(_u,this),$u&&$u(this),Pu.manager.itemEnd(_u)}function Vu(Ou){Lu.removeEventListener("load",Bu,!1),Lu.removeEventListener("error",Vu,!1),Cu&&Cu(Ou),Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)}return Lu.addEventListener("load",Bu,!1),Lu.addEventListener("error",Vu,!1),_u.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Lu.crossOrigin=this.crossOrigin),Pu.manager.itemStart(_u),Lu.src=_u,Lu}});function CubeTextureLoader(_u){Loader.call(this,_u)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(_u,$u,Tu,Cu){var Pu=new CubeTexture,Ru=new ImageLoader(this.manager);Ru.setCrossOrigin(this.crossOrigin),Ru.setPath(this.path);var Lu=0;function Bu(Ou){Ru.load(_u[Ou],function(Du){Pu.images[Ou]=Du,Lu++,Lu===6&&(Pu.needsUpdate=!0,$u&&$u(Pu))},void 0,Cu)}for(var Vu=0;Vu<_u.length;++Vu)Bu(Vu);return Pu}});function TextureLoader(_u){Loader.call(this,_u)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(_u,$u,Tu,Cu){var Pu=new Texture,Ru=new ImageLoader(this.manager);return Ru.setCrossOrigin(this.crossOrigin),Ru.setPath(this.path),Ru.load(_u,function(Lu){Pu.image=Lu;var Bu=_u.search(/\.jpe?g($|\?)/i)>0||_u.search(/^data\:image\/jpeg/)===0;Pu.format=Bu?RGBFormat:RGBAFormat,Pu.needsUpdate=!0,$u!==void 0&&$u(Pu)},Tu,Cu),Pu}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(_u,$u){var Tu=this.getUtoTmapping(_u);return this.getPoint(Tu,$u)},getPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Tu=0;Tu<=_u;Tu++)$u.push(this.getPoint(Tu/_u));return $u},getSpacedPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Tu=0;Tu<=_u;Tu++)$u.push(this.getPointAt(Tu/_u));return $u},getLength:function(){var _u=this.getLengths();return _u[_u.length-1]},getLengths:function(_u){if(_u===void 0&&(_u=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===_u+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var $u=[],Tu,Cu=this.getPoint(0),Pu,Ru=0;for($u.push(0),Pu=1;Pu<=_u;Pu++)Tu=this.getPoint(Pu/_u),Ru+=Tu.distanceTo(Cu),$u.push(Ru),Cu=Tu;return this.cacheArcLengths=$u,$u},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(_u,$u){var Tu=this.getLengths(),Cu=0,Pu=Tu.length,Ru;$u?Ru=$u:Ru=_u*Tu[Pu-1];for(var Lu=0,Bu=Pu-1,Vu;Lu<=Bu;)if(Cu=Math.floor(Lu+(Bu-Lu)/2),Vu=Tu[Cu]-Ru,Vu<0)Lu=Cu+1;else if(Vu>0)Bu=Cu-1;else{Bu=Cu;break}if(Cu=Bu,Tu[Cu]===Ru)return Cu/(Pu-1);var Ou=Tu[Cu],Du=Tu[Cu+1],ku=Du-Ou,Fu=(Ru-Ou)/ku,Nu=(Cu+Fu)/(Pu-1);return Nu},getTangent:function(_u,$u){var Tu=1e-4,Cu=_u-Tu,Pu=_u+Tu;Cu<0&&(Cu=0),Pu>1&&(Pu=1);var Ru=this.getPoint(Cu),Lu=this.getPoint(Pu),Bu=$u||(Ru.isVector2?new Vector2:new Vector3);return Bu.copy(Lu).sub(Ru).normalize(),Bu},getTangentAt:function(_u,$u){var Tu=this.getUtoTmapping(_u);return this.getTangent(Tu,$u)},computeFrenetFrames:function(_u,$u){var Tu=new Vector3,Cu=[],Pu=[],Ru=[],Lu=new Vector3,Bu=new Matrix4,Vu,Ou,Du;for(Vu=0;Vu<=_u;Vu++)Ou=Vu/_u,Cu[Vu]=this.getTangentAt(Ou,new Vector3),Cu[Vu].normalize();Pu[0]=new Vector3,Ru[0]=new Vector3;var ku=Number.MAX_VALUE,Fu=Math.abs(Cu[0].x),Nu=Math.abs(Cu[0].y),Gu=Math.abs(Cu[0].z);for(Fu<=ku&&(ku=Fu,Tu.set(1,0,0)),Nu<=ku&&(ku=Nu,Tu.set(0,1,0)),Gu<=ku&&Tu.set(0,0,1),Lu.crossVectors(Cu[0],Tu).normalize(),Pu[0].crossVectors(Cu[0],Lu),Ru[0].crossVectors(Cu[0],Pu[0]),Vu=1;Vu<=_u;Vu++)Pu[Vu]=Pu[Vu-1].clone(),Ru[Vu]=Ru[Vu-1].clone(),Lu.crossVectors(Cu[Vu-1],Cu[Vu]),Lu.length()>Number.EPSILON&&(Lu.normalize(),Du=Math.acos(MathUtils.clamp(Cu[Vu-1].dot(Cu[Vu]),-1,1)),Pu[Vu].applyMatrix4(Bu.makeRotationAxis(Lu,Du))),Ru[Vu].crossVectors(Cu[Vu],Pu[Vu]);if($u===!0)for(Du=Math.acos(MathUtils.clamp(Pu[0].dot(Pu[_u]),-1,1)),Du/=_u,Cu[0].dot(Lu.crossVectors(Pu[0],Pu[_u]))>0&&(Du=-Du),Vu=1;Vu<=_u;Vu++)Pu[Vu].applyMatrix4(Bu.makeRotationAxis(Cu[Vu],Du*Vu)),Ru[Vu].crossVectors(Cu[Vu],Pu[Vu]);return{tangents:Cu,normals:Pu,binormals:Ru}},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this},toJSON:function(){var _u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return _u.arcLengthDivisions=this.arcLengthDivisions,_u.type=this.type,_u},fromJSON:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this}});function EllipseCurve(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){Curve.call(this),this.type="EllipseCurve",this.aX=_u||0,this.aY=$u||0,this.xRadius=Tu||1,this.yRadius=Cu||1,this.aStartAngle=Pu||0,this.aEndAngle=Ru||2*Math.PI,this.aClockwise=Lu||!1,this.aRotation=Bu||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(_u,$u){for(var Tu=$u||new Vector2,Cu=Math.PI*2,Pu=this.aEndAngle-this.aStartAngle,Ru=Math.abs(Pu)<Number.EPSILON;Pu<0;)Pu+=Cu;for(;Pu>Cu;)Pu-=Cu;Pu<Number.EPSILON&&(Ru?Pu=0:Pu=Cu),this.aClockwise===!0&&!Ru&&(Pu===Cu?Pu=-Cu:Pu=Pu-Cu);var Lu=this.aStartAngle+_u*Pu,Bu=this.aX+this.xRadius*Math.cos(Lu),Vu=this.aY+this.yRadius*Math.sin(Lu);if(this.aRotation!==0){var Ou=Math.cos(this.aRotation),Du=Math.sin(this.aRotation),ku=Bu-this.aX,Fu=Vu-this.aY;Bu=ku*Ou-Fu*Du+this.aX,Vu=ku*Du+Fu*Ou+this.aY}return Tu.set(Bu,Vu)};EllipseCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};EllipseCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.aX=this.aX,_u.aY=this.aY,_u.xRadius=this.xRadius,_u.yRadius=this.yRadius,_u.aStartAngle=this.aStartAngle,_u.aEndAngle=this.aEndAngle,_u.aClockwise=this.aClockwise,_u.aRotation=this.aRotation,_u};EllipseCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};function ArcCurve(_u,$u,Tu,Cu,Pu,Ru){EllipseCurve.call(this,_u,$u,Tu,Tu,Cu,Pu,Ru),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var _u=0,$u=0,Tu=0,Cu=0;function Pu(Ru,Lu,Bu,Vu){_u=Ru,$u=Bu,Tu=-3*Ru+3*Lu-2*Bu-Vu,Cu=2*Ru-2*Lu+Bu+Vu}return{initCatmullRom:function(Ru,Lu,Bu,Vu,Ou){Pu(Lu,Bu,Ou*(Bu-Ru),Ou*(Vu-Lu))},initNonuniformCatmullRom:function(Ru,Lu,Bu,Vu,Ou,Du,ku){var Fu=(Lu-Ru)/Ou-(Bu-Ru)/(Ou+Du)+(Bu-Lu)/Du,Nu=(Bu-Lu)/Du-(Vu-Lu)/(Du+ku)+(Vu-Bu)/ku;Fu*=Du,Nu*=Du,Pu(Lu,Bu,Fu,Nu)},calc:function(Ru){var Lu=Ru*Ru,Bu=Lu*Ru;return _u+$u*Ru+Tu*Lu+Cu*Bu}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(_u,$u,Tu,Cu){Curve.call(this),this.type="CatmullRomCurve3",this.points=_u||[],this.closed=$u||!1,this.curveType=Tu||"centripetal",this.tension=Cu||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.points,Pu=Cu.length,Ru=(Pu-(this.closed?0:1))*_u,Lu=Math.floor(Ru),Bu=Ru-Lu;this.closed?Lu+=Lu>0?0:(Math.floor(Math.abs(Lu)/Pu)+1)*Pu:Bu===0&&Lu===Pu-1&&(Lu=Pu-2,Bu=1);var Vu,Ou,Du,ku;if(this.closed||Lu>0?Vu=Cu[(Lu-1)%Pu]:(tmp.subVectors(Cu[0],Cu[1]).add(Cu[0]),Vu=tmp),Ou=Cu[Lu%Pu],Du=Cu[(Lu+1)%Pu],this.closed||Lu+2<Pu?ku=Cu[(Lu+2)%Pu]:(tmp.subVectors(Cu[Pu-1],Cu[Pu-2]).add(Cu[Pu-1]),ku=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Fu=this.curveType==="chordal"?.5:.25,Nu=Math.pow(Vu.distanceToSquared(Ou),Fu),Gu=Math.pow(Ou.distanceToSquared(Du),Fu),zu=Math.pow(Du.distanceToSquared(ku),Fu);Gu<1e-4&&(Gu=1),Nu<1e-4&&(Nu=Gu),zu<1e-4&&(zu=Gu),px.initNonuniformCatmullRom(Vu.x,Ou.x,Du.x,ku.x,Nu,Gu,zu),py.initNonuniformCatmullRom(Vu.y,Ou.y,Du.y,ku.y,Nu,Gu,zu),pz.initNonuniformCatmullRom(Vu.z,Ou.z,Du.z,ku.z,Nu,Gu,zu)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Vu.x,Ou.x,Du.x,ku.x,this.tension),py.initCatmullRom(Vu.y,Ou.y,Du.y,ku.y,this.tension),pz.initCatmullRom(Vu.z,Ou.z,Du.z,ku.z,this.tension));return Tu.set(px.calc(Bu),py.calc(Bu),pz.calc(Bu)),Tu};CatmullRomCurve3.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(Cu.clone())}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Tu=this.points.length;$u<Tu;$u++){var Cu=this.points[$u];_u.points.push(Cu.toArray())}return _u.closed=this.closed,_u.curveType=this.curveType,_u.tension=this.tension,_u};CatmullRomCurve3.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(new Vector3().fromArray(Cu))}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};function CatmullRom(_u,$u,Tu,Cu,Pu){var Ru=(Cu-$u)*.5,Lu=(Pu-Tu)*.5,Bu=_u*_u,Vu=_u*Bu;return(2*Tu-2*Cu+Ru+Lu)*Vu+(-3*Tu+3*Cu-2*Ru-Lu)*Bu+Ru*_u+Tu}function QuadraticBezierP0(_u,$u){var Tu=1-_u;return Tu*Tu*$u}function QuadraticBezierP1(_u,$u){return 2*(1-_u)*_u*$u}function QuadraticBezierP2(_u,$u){return _u*_u*$u}function QuadraticBezier(_u,$u,Tu,Cu){return QuadraticBezierP0(_u,$u)+QuadraticBezierP1(_u,Tu)+QuadraticBezierP2(_u,Cu)}function CubicBezierP0(_u,$u){var Tu=1-_u;return Tu*Tu*Tu*$u}function CubicBezierP1(_u,$u){var Tu=1-_u;return 3*Tu*Tu*_u*$u}function CubicBezierP2(_u,$u){return 3*(1-_u)*_u*_u*$u}function CubicBezierP3(_u,$u){return _u*_u*_u*$u}function CubicBezier(_u,$u,Tu,Cu,Pu){return CubicBezierP0(_u,$u)+CubicBezierP1(_u,Tu)+CubicBezierP2(_u,Cu)+CubicBezierP3(_u,Pu)}function CubicBezierCurve(_u,$u,Tu,Cu){Curve.call(this),this.type="CubicBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Tu||new Vector2,this.v3=Cu||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2,Cu=this.v0,Pu=this.v1,Ru=this.v2,Lu=this.v3;return Tu.set(CubicBezier(_u,Cu.x,Pu.x,Ru.x,Lu.x),CubicBezier(_u,Cu.y,Pu.y,Ru.y,Lu.y)),Tu};CubicBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function CubicBezierCurve3(_u,$u,Tu,Cu){Curve.call(this),this.type="CubicBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Tu||new Vector3,this.v3=Cu||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.v0,Pu=this.v1,Ru=this.v2,Lu=this.v3;return Tu.set(CubicBezier(_u,Cu.x,Pu.x,Ru.x,Lu.x),CubicBezier(_u,Cu.y,Pu.y,Ru.y,Lu.y),CubicBezier(_u,Cu.z,Pu.z,Ru.z,Lu.z)),Tu};CubicBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function LineCurve(_u,$u){Curve.call(this),this.type="LineCurve",this.v1=_u||new Vector2,this.v2=$u||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2;return _u===1?Tu.copy(this.v2):(Tu.copy(this.v2).sub(this.v1),Tu.multiplyScalar(_u).add(this.v1)),Tu};LineCurve.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve.prototype.getTangent=function(_u,$u){var Tu=$u||new Vector2,Tu=Tu.copy(this.v2).sub(this.v1).normalize();return Tu};LineCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function LineCurve3(_u,$u){Curve.call(this),this.type="LineCurve3",this.v1=_u||new Vector3,this.v2=$u||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3;return _u===1?Tu.copy(this.v2):(Tu.copy(this.v2).sub(this.v1),Tu.multiplyScalar(_u).add(this.v1)),Tu};LineCurve3.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve(_u,$u,Tu){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Tu||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2,Cu=this.v0,Pu=this.v1,Ru=this.v2;return Tu.set(QuadraticBezier(_u,Cu.x,Pu.x,Ru.x),QuadraticBezier(_u,Cu.y,Pu.y,Ru.y)),Tu};QuadraticBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve3(_u,$u,Tu){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Tu||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.v0,Pu=this.v1,Ru=this.v2;return Tu.set(QuadraticBezier(_u,Cu.x,Pu.x,Ru.x),QuadraticBezier(_u,Cu.y,Pu.y,Ru.y),QuadraticBezier(_u,Cu.z,Pu.z,Ru.z)),Tu};QuadraticBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function SplineCurve(_u){Curve.call(this),this.type="SplineCurve",this.points=_u||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2,Cu=this.points,Pu=(Cu.length-1)*_u,Ru=Math.floor(Pu),Lu=Pu-Ru,Bu=Cu[Ru===0?Ru:Ru-1],Vu=Cu[Ru],Ou=Cu[Ru>Cu.length-2?Cu.length-1:Ru+1],Du=Cu[Ru>Cu.length-3?Cu.length-1:Ru+2];return Tu.set(CatmullRom(Lu,Bu.x,Vu.x,Ou.x,Du.x),CatmullRom(Lu,Bu.y,Vu.y,Ou.y,Du.y)),Tu};SplineCurve.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(Cu.clone())}return this};SplineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Tu=this.points.length;$u<Tu;$u++){var Cu=this.points[$u];_u.points.push(Cu.toArray())}return _u};SplineCurve.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(new Vector2().fromArray(Cu))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(_u){this.curves.push(_u)},closePath:function(){var _u=this.curves[0].getPoint(0),$u=this.curves[this.curves.length-1].getPoint(1);_u.equals($u)||this.curves.push(new LineCurve($u,_u))},getPoint:function(_u){for(var $u=_u*this.getLength(),Tu=this.getCurveLengths(),Cu=0;Cu<Tu.length;){if(Tu[Cu]>=$u){var Pu=Tu[Cu]-$u,Ru=this.curves[Cu],Lu=Ru.getLength(),Bu=Lu===0?0:1-Pu/Lu;return Ru.getPointAt(Bu)}Cu++}return null},getLength:function(){var _u=this.getCurveLengths();return _u[_u.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var _u=[],$u=0,Tu=0,Cu=this.curves.length;Tu<Cu;Tu++)$u+=this.curves[Tu].getLength(),_u.push($u);return this.cacheLengths=_u,_u},getSpacedPoints:function(_u){_u===void 0&&(_u=40);for(var $u=[],Tu=0;Tu<=_u;Tu++)$u.push(this.getPoint(Tu/_u));return this.autoClose&&$u.push($u[0]),$u},getPoints:function(_u){_u=_u||12;for(var $u=[],Tu,Cu=0,Pu=this.curves;Cu<Pu.length;Cu++)for(var Ru=Pu[Cu],Lu=Ru&&Ru.isEllipseCurve?_u*2:Ru&&(Ru.isLineCurve||Ru.isLineCurve3)?1:Ru&&Ru.isSplineCurve?_u*Ru.points.length:_u,Bu=Ru.getPoints(Lu),Vu=0;Vu<Bu.length;Vu++){var Ou=Bu[Vu];Tu&&Tu.equals(Ou)||($u.push(Ou),Tu=Ou)}return this.autoClose&&$u.length>1&&!$u[$u.length-1].equals($u[0])&&$u.push($u[0]),$u},copy:function(_u){Curve.prototype.copy.call(this,_u),this.curves=[];for(var $u=0,Tu=_u.curves.length;$u<Tu;$u++){var Cu=_u.curves[$u];this.curves.push(Cu.clone())}return this.autoClose=_u.autoClose,this},toJSON:function(){var _u=Curve.prototype.toJSON.call(this);_u.autoClose=this.autoClose,_u.curves=[];for(var $u=0,Tu=this.curves.length;$u<Tu;$u++){var Cu=this.curves[$u];_u.curves.push(Cu.toJSON())}return _u},fromJSON:function(_u){Curve.prototype.fromJSON.call(this,_u),this.autoClose=_u.autoClose,this.curves=[];for(var $u=0,Tu=_u.curves.length;$u<Tu;$u++){var Cu=_u.curves[$u];this.curves.push(new Curves[Cu.type]().fromJSON(Cu))}return this}});function Path(_u){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,_u&&this.setFromPoints(_u)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(_u){this.moveTo(_u[0].x,_u[0].y);for(var $u=1,Tu=_u.length;$u<Tu;$u++)this.lineTo(_u[$u].x,_u[$u].y);return this},moveTo:function(_u,$u){return this.currentPoint.set(_u,$u),this},lineTo:function(_u,$u){var Tu=new LineCurve(this.currentPoint.clone(),new Vector2(_u,$u));return this.curves.push(Tu),this.currentPoint.set(_u,$u),this},quadraticCurveTo:function(_u,$u,Tu,Cu){var Pu=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Tu,Cu));return this.curves.push(Pu),this.currentPoint.set(Tu,Cu),this},bezierCurveTo:function(_u,$u,Tu,Cu,Pu,Ru){var Lu=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Tu,Cu),new Vector2(Pu,Ru));return this.curves.push(Lu),this.currentPoint.set(Pu,Ru),this},splineThru:function(_u){var $u=[this.currentPoint.clone()].concat(_u),Tu=new SplineCurve($u);return this.curves.push(Tu),this.currentPoint.copy(_u[_u.length-1]),this},arc:function(_u,$u,Tu,Cu,Pu,Ru){var Lu=this.currentPoint.x,Bu=this.currentPoint.y;return this.absarc(_u+Lu,$u+Bu,Tu,Cu,Pu,Ru),this},absarc:function(_u,$u,Tu,Cu,Pu,Ru){return this.absellipse(_u,$u,Tu,Tu,Cu,Pu,Ru),this},ellipse:function(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){var Vu=this.currentPoint.x,Ou=this.currentPoint.y;return this.absellipse(_u+Vu,$u+Ou,Tu,Cu,Pu,Ru,Lu,Bu),this},absellipse:function(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){var Vu=new EllipseCurve(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu);if(this.curves.length>0){var Ou=Vu.getPoint(0);Ou.equals(this.currentPoint)||this.lineTo(Ou.x,Ou.y)}this.curves.push(Vu);var Du=Vu.getPoint(1);return this.currentPoint.copy(Du),this},copy:function(_u){return CurvePath.prototype.copy.call(this,_u),this.currentPoint.copy(_u.currentPoint),this},toJSON:function(){var _u=CurvePath.prototype.toJSON.call(this);return _u.currentPoint=this.currentPoint.toArray(),_u},fromJSON:function(_u){return CurvePath.prototype.fromJSON.call(this,_u),this.currentPoint.fromArray(_u.currentPoint),this}});function Shape(_u){Path.call(this,_u),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(_u){for(var $u=[],Tu=0,Cu=this.holes.length;Tu<Cu;Tu++)$u[Tu]=this.holes[Tu].getPoints(_u);return $u},extractPoints:function(_u){return{shape:this.getPoints(_u),holes:this.getPointsHoles(_u)}},copy:function(_u){Path.prototype.copy.call(this,_u),this.holes=[];for(var $u=0,Tu=_u.holes.length;$u<Tu;$u++){var Cu=_u.holes[$u];this.holes.push(Cu.clone())}return this},toJSON:function(){var _u=Path.prototype.toJSON.call(this);_u.uuid=this.uuid,_u.holes=[];for(var $u=0,Tu=this.holes.length;$u<Tu;$u++){var Cu=this.holes[$u];_u.holes.push(Cu.toJSON())}return _u},fromJSON:function(_u){Path.prototype.fromJSON.call(this,_u),this.uuid=_u.uuid,this.holes=[];for(var $u=0,Tu=_u.holes.length;$u<Tu;$u++){var Cu=_u.holes[$u];this.holes.push(new Path().fromJSON(Cu))}return this}});function Light(_u,$u){Object3D.call(this),this.type="Light",this.color=new Color(_u),this.intensity=$u!==void 0?$u:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),this.color.copy(_u.color),this.intensity=_u.intensity,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.color=this.color.getHex(),$u.object.intensity=this.intensity,this.groundColor!==void 0&&($u.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&($u.object.distance=this.distance),this.angle!==void 0&&($u.object.angle=this.angle),this.decay!==void 0&&($u.object.decay=this.decay),this.penumbra!==void 0&&($u.object.penumbra=this.penumbra),this.shadow!==void 0&&($u.object.shadow=this.shadow.toJSON()),$u}});function HemisphereLight(_u,$u,Tu){Light.call(this,_u,Tu),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color($u)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.groundColor.copy(_u.groundColor),this}});function LightShadow(_u){this.camera=_u,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(_u){var $u=this.camera,Tu=this.matrix,Cu=this._projScreenMatrix,Pu=this._lookTarget,Ru=this._lightPositionWorld;Ru.setFromMatrixPosition(_u.matrixWorld),$u.position.copy(Ru),Pu.setFromMatrixPosition(_u.target.matrixWorld),$u.lookAt(Pu),$u.updateMatrixWorld(),Cu.multiplyMatrices($u.projectionMatrix,$u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cu),Tu.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Tu.multiply($u.projectionMatrix),Tu.multiply($u.matrixWorldInverse)},getViewport:function(_u){return this._viewports[_u]},getFrameExtents:function(){return this._frameExtents},copy:function(_u){return this.camera=_u.camera.clone(),this.bias=_u.bias,this.radius=_u.radius,this.mapSize.copy(_u.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u={};return this.bias!==0&&(_u.bias=this.bias),this.radius!==1&&(_u.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_u.mapSize=this.mapSize.toArray()),_u.camera=this.camera.toJSON(!1).object,delete _u.camera.matrix,_u}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(_u){var $u=this.camera,Tu=MathUtils.RAD2DEG*2*_u.angle,Cu=this.mapSize.width/this.mapSize.height,Pu=_u.distance||$u.far;(Tu!==$u.fov||Cu!==$u.aspect||Pu!==$u.far)&&($u.fov=Tu,$u.aspect=Cu,$u.far=Pu,$u.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,_u)}});function SpotLight(_u,$u,Tu,Cu,Pu,Ru){Light.call(this,_u,$u),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Lu){this.intensity=Lu/Math.PI}}),this.distance=Tu!==void 0?Tu:0,this.angle=Cu!==void 0?Cu:Math.PI/3,this.penumbra=Pu!==void 0?Pu:0,this.decay=Ru!==void 0?Ru:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.angle=_u.angle,this.penumbra=_u.penumbra,this.decay=_u.decay,this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(_u,$u){$u===void 0&&($u=0);var Tu=this.camera,Cu=this.matrix,Pu=this._lightPositionWorld,Ru=this._lookTarget,Lu=this._projScreenMatrix;Pu.setFromMatrixPosition(_u.matrixWorld),Tu.position.copy(Pu),Ru.copy(Tu.position),Ru.add(this._cubeDirections[$u]),Tu.up.copy(this._cubeUps[$u]),Tu.lookAt(Ru),Tu.updateMatrixWorld(),Cu.makeTranslation(-Pu.x,-Pu.y,-Pu.z),Lu.multiplyMatrices(Tu.projectionMatrix,Tu.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lu)}});function PointLight(_u,$u,Tu,Cu){Light.call(this,_u,$u),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Pu){this.intensity=Pu/(4*Math.PI)}}),this.distance=Tu!==void 0?Tu:0,this.decay=Cu!==void 0?Cu:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.decay=_u.decay,this.shadow=_u.shadow.clone(),this}});function OrthographicCamera(_u,$u,Tu,Cu,Pu,Ru){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_u!==void 0?_u:-1,this.right=$u!==void 0?$u:1,this.top=Tu!==void 0?Tu:1,this.bottom=Cu!==void 0?Cu:-1,this.near=Pu!==void 0?Pu:.1,this.far=Ru!==void 0?Ru:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.left=_u.left,this.right=_u.right,this.top=_u.top,this.bottom=_u.bottom,this.near=_u.near,this.far=_u.far,this.zoom=_u.zoom,this.view=_u.view===null?null:Object.assign({},_u.view),this},setViewOffset:function(_u,$u,Tu,Cu,Pu,Ru){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Tu,this.view.offsetY=Cu,this.view.width=Pu,this.view.height=Ru,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=(this.right-this.left)/(2*this.zoom),$u=(this.top-this.bottom)/(2*this.zoom),Tu=(this.right+this.left)/2,Cu=(this.top+this.bottom)/2,Pu=Tu-_u,Ru=Tu+_u,Lu=Cu+$u,Bu=Cu-$u;if(this.view!==null&&this.view.enabled){var Vu=(this.right-this.left)/this.view.fullWidth/this.zoom,Ou=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Pu+=Vu*this.view.offsetX,Ru=Pu+Vu*this.view.width,Lu-=Ou*this.view.offsetY,Bu=Lu-Ou*this.view.height}this.projectionMatrix.makeOrthographic(Pu,Ru,Lu,Bu,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.zoom=this.zoom,$u.object.left=this.left,$u.object.right=this.right,$u.object.top=this.top,$u.object.bottom=this.bottom,$u.object.near=this.near,$u.object.far=this.far,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(_u){LightShadow.prototype.updateMatrices.call(this,_u)}});function DirectionalLight(_u,$u){Light.call(this,_u,$u),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function AmbientLight(_u,$u){Light.call(this,_u,$u),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(_u,$u,Tu,Cu){Light.call(this,_u,$u),this.type="RectAreaLight",this.width=Tu!==void 0?Tu:10,this.height=Cu!==void 0?Cu:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.width=_u.width,this.height=_u.height,this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.width=this.width,$u.object.height=this.height,$u}});function SphericalHarmonics3(){this.coefficients=[];for(var _u=0;_u<9;_u++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].copy(_u[$u]);return this},zero:function(){for(var _u=0;_u<9;_u++)this.coefficients[_u].set(0,0,0);return this},getAt:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z,Ru=this.coefficients;return $u.copy(Ru[0]).multiplyScalar(.282095),$u.addScaledVector(Ru[1],.488603*Cu),$u.addScaledVector(Ru[2],.488603*Pu),$u.addScaledVector(Ru[3],.488603*Tu),$u.addScaledVector(Ru[4],1.092548*(Tu*Cu)),$u.addScaledVector(Ru[5],1.092548*(Cu*Pu)),$u.addScaledVector(Ru[6],.315392*(3*Pu*Pu-1)),$u.addScaledVector(Ru[7],1.092548*(Tu*Pu)),$u.addScaledVector(Ru[8],.546274*(Tu*Tu-Cu*Cu)),$u},getIrradianceAt:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z,Ru=this.coefficients;return $u.copy(Ru[0]).multiplyScalar(.886227),$u.addScaledVector(Ru[1],2*.511664*Cu),$u.addScaledVector(Ru[2],2*.511664*Pu),$u.addScaledVector(Ru[3],2*.511664*Tu),$u.addScaledVector(Ru[4],2*.429043*Tu*Cu),$u.addScaledVector(Ru[5],2*.429043*Cu*Pu),$u.addScaledVector(Ru[6],.743125*Pu*Pu-.247708),$u.addScaledVector(Ru[7],2*.429043*Tu*Pu),$u.addScaledVector(Ru[8],.429043*(Tu*Tu-Cu*Cu)),$u},add:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].add(_u.coefficients[$u]);return this},addScaledSH:function(_u,$u){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].addScaledVector(_u.coefficients[Tu],$u);return this},scale:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].multiplyScalar(_u);return this},lerp:function(_u,$u){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].lerp(_u.coefficients[Tu],$u);return this},equals:function(_u){for(var $u=0;$u<9;$u++)if(!this.coefficients[$u].equals(_u.coefficients[$u]))return!1;return!0},copy:function(_u){return this.set(_u.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Tu=this.coefficients,Cu=0;Cu<9;Cu++)Tu[Cu].fromArray(_u,$u+Cu*3);return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);for(var Tu=this.coefficients,Cu=0;Cu<9;Cu++)Tu[Cu].toArray(_u,$u+Cu*3);return _u}});Object.assign(SphericalHarmonics3,{getBasisAt:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z;$u[0]=.282095,$u[1]=.488603*Cu,$u[2]=.488603*Pu,$u[3]=.488603*Tu,$u[4]=1.092548*Tu*Cu,$u[5]=1.092548*Cu*Pu,$u[6]=.315392*(3*Pu*Pu-1),$u[7]=1.092548*Tu*Pu,$u[8]=.546274*(Tu*Tu-Cu*Cu)}});function LightProbe(_u,$u){Light.call(this,void 0,$u),this.type="LightProbe",this.sh=_u!==void 0?_u:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.sh.copy(_u.sh),this},fromJSON:function(_u){return this.intensity=_u.intensity,this.sh.fromArray(_u.sh),this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.sh=this.sh.toArray(),$u}});function MaterialLoader(_u){Loader.call(this,_u),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=new FileLoader(Pu.manager);Ru.setPath(Pu.path),Ru.load(_u,function(Lu){try{$u(Pu.parse(JSON.parse(Lu)))}catch(Bu){Cu?Cu(Bu):console.error(Bu),Pu.manager.itemError(_u)}},Tu,Cu)},parse:function(_u){var $u=this.textures;function Tu(Vu){return $u[Vu]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Vu),$u[Vu]}var Cu=new Materials[_u.type];if(_u.uuid!==void 0&&(Cu.uuid=_u.uuid),_u.name!==void 0&&(Cu.name=_u.name),_u.color!==void 0&&Cu.color.setHex(_u.color),_u.roughness!==void 0&&(Cu.roughness=_u.roughness),_u.metalness!==void 0&&(Cu.metalness=_u.metalness),_u.sheen!==void 0&&(Cu.sheen=new Color().setHex(_u.sheen)),_u.emissive!==void 0&&Cu.emissive.setHex(_u.emissive),_u.specular!==void 0&&Cu.specular.setHex(_u.specular),_u.shininess!==void 0&&(Cu.shininess=_u.shininess),_u.clearcoat!==void 0&&(Cu.clearcoat=_u.clearcoat),_u.clearcoatRoughness!==void 0&&(Cu.clearcoatRoughness=_u.clearcoatRoughness),_u.fog!==void 0&&(Cu.fog=_u.fog),_u.flatShading!==void 0&&(Cu.flatShading=_u.flatShading),_u.blending!==void 0&&(Cu.blending=_u.blending),_u.combine!==void 0&&(Cu.combine=_u.combine),_u.side!==void 0&&(Cu.side=_u.side),_u.opacity!==void 0&&(Cu.opacity=_u.opacity),_u.transparent!==void 0&&(Cu.transparent=_u.transparent),_u.alphaTest!==void 0&&(Cu.alphaTest=_u.alphaTest),_u.depthTest!==void 0&&(Cu.depthTest=_u.depthTest),_u.depthWrite!==void 0&&(Cu.depthWrite=_u.depthWrite),_u.colorWrite!==void 0&&(Cu.colorWrite=_u.colorWrite),_u.stencilWrite!==void 0&&(Cu.stencilWrite=_u.stencilWrite),_u.stencilWriteMask!==void 0&&(Cu.stencilWriteMask=_u.stencilWriteMask),_u.stencilFunc!==void 0&&(Cu.stencilFunc=_u.stencilFunc),_u.stencilRef!==void 0&&(Cu.stencilRef=_u.stencilRef),_u.stencilFuncMask!==void 0&&(Cu.stencilFuncMask=_u.stencilFuncMask),_u.stencilFail!==void 0&&(Cu.stencilFail=_u.stencilFail),_u.stencilZFail!==void 0&&(Cu.stencilZFail=_u.stencilZFail),_u.stencilZPass!==void 0&&(Cu.stencilZPass=_u.stencilZPass),_u.wireframe!==void 0&&(Cu.wireframe=_u.wireframe),_u.wireframeLinewidth!==void 0&&(Cu.wireframeLinewidth=_u.wireframeLinewidth),_u.wireframeLinecap!==void 0&&(Cu.wireframeLinecap=_u.wireframeLinecap),_u.wireframeLinejoin!==void 0&&(Cu.wireframeLinejoin=_u.wireframeLinejoin),_u.rotation!==void 0&&(Cu.rotation=_u.rotation),_u.linewidth!==1&&(Cu.linewidth=_u.linewidth),_u.dashSize!==void 0&&(Cu.dashSize=_u.dashSize),_u.gapSize!==void 0&&(Cu.gapSize=_u.gapSize),_u.scale!==void 0&&(Cu.scale=_u.scale),_u.polygonOffset!==void 0&&(Cu.polygonOffset=_u.polygonOffset),_u.polygonOffsetFactor!==void 0&&(Cu.polygonOffsetFactor=_u.polygonOffsetFactor),_u.polygonOffsetUnits!==void 0&&(Cu.polygonOffsetUnits=_u.polygonOffsetUnits),_u.skinning!==void 0&&(Cu.skinning=_u.skinning),_u.morphTargets!==void 0&&(Cu.morphTargets=_u.morphTargets),_u.morphNormals!==void 0&&(Cu.morphNormals=_u.morphNormals),_u.dithering!==void 0&&(Cu.dithering=_u.dithering),_u.vertexTangents!==void 0&&(Cu.vertexTangents=_u.vertexTangents),_u.visible!==void 0&&(Cu.visible=_u.visible),_u.toneMapped!==void 0&&(Cu.toneMapped=_u.toneMapped),_u.userData!==void 0&&(Cu.userData=_u.userData),_u.vertexColors!==void 0&&(typeof _u.vertexColors=="number"?Cu.vertexColors=_u.vertexColors>0:Cu.vertexColors=_u.vertexColors),_u.uniforms!==void 0)for(var Pu in _u.uniforms){var Ru=_u.uniforms[Pu];switch(Cu.uniforms[Pu]={},Ru.type){case"t":Cu.uniforms[Pu].value=Tu(Ru.value);break;case"c":Cu.uniforms[Pu].value=new Color().setHex(Ru.value);break;case"v2":Cu.uniforms[Pu].value=new Vector2().fromArray(Ru.value);break;case"v3":Cu.uniforms[Pu].value=new Vector3().fromArray(Ru.value);break;case"v4":Cu.uniforms[Pu].value=new Vector4().fromArray(Ru.value);break;case"m3":Cu.uniforms[Pu].value=new Matrix3().fromArray(Ru.value);case"m4":Cu.uniforms[Pu].value=new Matrix4().fromArray(Ru.value);break;default:Cu.uniforms[Pu].value=Ru.value}}if(_u.defines!==void 0&&(Cu.defines=_u.defines),_u.vertexShader!==void 0&&(Cu.vertexShader=_u.vertexShader),_u.fragmentShader!==void 0&&(Cu.fragmentShader=_u.fragmentShader),_u.extensions!==void 0)for(var Lu in _u.extensions)Cu.extensions[Lu]=_u.extensions[Lu];if(_u.shading!==void 0&&(Cu.flatShading=_u.shading===1),_u.size!==void 0&&(Cu.size=_u.size),_u.sizeAttenuation!==void 0&&(Cu.sizeAttenuation=_u.sizeAttenuation),_u.map!==void 0&&(Cu.map=Tu(_u.map)),_u.matcap!==void 0&&(Cu.matcap=Tu(_u.matcap)),_u.alphaMap!==void 0&&(Cu.alphaMap=Tu(_u.alphaMap)),_u.bumpMap!==void 0&&(Cu.bumpMap=Tu(_u.bumpMap)),_u.bumpScale!==void 0&&(Cu.bumpScale=_u.bumpScale),_u.normalMap!==void 0&&(Cu.normalMap=Tu(_u.normalMap)),_u.normalMapType!==void 0&&(Cu.normalMapType=_u.normalMapType),_u.normalScale!==void 0){var Bu=_u.normalScale;Array.isArray(Bu)===!1&&(Bu=[Bu,Bu]),Cu.normalScale=new Vector2().fromArray(Bu)}return _u.displacementMap!==void 0&&(Cu.displacementMap=Tu(_u.displacementMap)),_u.displacementScale!==void 0&&(Cu.displacementScale=_u.displacementScale),_u.displacementBias!==void 0&&(Cu.displacementBias=_u.displacementBias),_u.roughnessMap!==void 0&&(Cu.roughnessMap=Tu(_u.roughnessMap)),_u.metalnessMap!==void 0&&(Cu.metalnessMap=Tu(_u.metalnessMap)),_u.emissiveMap!==void 0&&(Cu.emissiveMap=Tu(_u.emissiveMap)),_u.emissiveIntensity!==void 0&&(Cu.emissiveIntensity=_u.emissiveIntensity),_u.specularMap!==void 0&&(Cu.specularMap=Tu(_u.specularMap)),_u.envMap!==void 0&&(Cu.envMap=Tu(_u.envMap)),_u.envMapIntensity!==void 0&&(Cu.envMapIntensity=_u.envMapIntensity),_u.reflectivity!==void 0&&(Cu.reflectivity=_u.reflectivity),_u.refractionRatio!==void 0&&(Cu.refractionRatio=_u.refractionRatio),_u.lightMap!==void 0&&(Cu.lightMap=Tu(_u.lightMap)),_u.lightMapIntensity!==void 0&&(Cu.lightMapIntensity=_u.lightMapIntensity),_u.aoMap!==void 0&&(Cu.aoMap=Tu(_u.aoMap)),_u.aoMapIntensity!==void 0&&(Cu.aoMapIntensity=_u.aoMapIntensity),_u.gradientMap!==void 0&&(Cu.gradientMap=Tu(_u.gradientMap)),_u.clearcoatMap!==void 0&&(Cu.clearcoatMap=Tu(_u.clearcoatMap)),_u.clearcoatRoughnessMap!==void 0&&(Cu.clearcoatRoughnessMap=Tu(_u.clearcoatRoughnessMap)),_u.clearcoatNormalMap!==void 0&&(Cu.clearcoatNormalMap=Tu(_u.clearcoatNormalMap)),_u.clearcoatNormalScale!==void 0&&(Cu.clearcoatNormalScale=new Vector2().fromArray(_u.clearcoatNormalScale)),Cu},setTextures:function(_u){return this.textures=_u,this}});var LoaderUtils={decodeText:function(_u){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(_u);for(var $u="",Tu=0,Cu=_u.length;Tu<Cu;Tu++)$u+=String.fromCharCode(_u[Tu]);try{return decodeURIComponent(escape($u))}catch{return $u}},extractUrlBase:function(_u){var $u=_u.lastIndexOf("/");return $u===-1?"./":_u.substr(0,$u+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(_u){return BufferGeometry.prototype.copy.call(this,_u),this.instanceCount=_u.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.instanceCount=this.instanceCount,_u.isInstancedBufferGeometry=!0,_u}});function InstancedBufferAttribute(_u,$u,Tu,Cu){typeof Tu=="number"&&(Cu=Tu,Tu=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,_u,$u,Tu),this.meshPerAttribute=Cu||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(_u){return BufferAttribute.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this},toJSON:function(){var _u=BufferAttribute.prototype.toJSON.call(this);return _u.meshPerAttribute=this.meshPerAttribute,_u.isInstancedBufferAttribute=!0,_u}});function BufferGeometryLoader(_u){Loader.call(this,_u)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=new FileLoader(Pu.manager);Ru.setPath(Pu.path),Ru.load(_u,function(Lu){try{$u(Pu.parse(JSON.parse(Lu)))}catch(Bu){Cu?Cu(Bu):console.error(Bu),Pu.manager.itemError(_u)}},Tu,Cu)},parse:function(_u){var $u=_u.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,Tu=_u.data.index;if(Tu!==void 0){var Cu=new TYPED_ARRAYS[Tu.type](Tu.array);$u.setIndex(new BufferAttribute(Cu,1))}var Pu=_u.data.attributes;for(var Ru in Pu){var Lu=Pu[Ru],Cu=new TYPED_ARRAYS[Lu.type](Lu.array),Bu=Lu.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Vu=new Bu(Cu,Lu.itemSize,Lu.normalized);Lu.name!==void 0&&(Vu.name=Lu.name),$u.setAttribute(Ru,Vu)}var Ou=_u.data.morphAttributes;if(Ou)for(var Ru in Ou){for(var Du=Ou[Ru],ku=[],Fu=0,Nu=Du.length;Fu<Nu;Fu++){var Lu=Du[Fu],Cu=new TYPED_ARRAYS[Lu.type](Lu.array),Vu=new BufferAttribute(Cu,Lu.itemSize,Lu.normalized);Lu.name!==void 0&&(Vu.name=Lu.name),ku.push(Vu)}$u.morphAttributes[Ru]=ku}var Gu=_u.data.morphTargetsRelative;Gu&&($u.morphTargetsRelative=!0);var zu=_u.data.groups||_u.data.drawcalls||_u.data.offsets;if(zu!==void 0)for(var Fu=0,Hu=zu.length;Fu!==Hu;++Fu){var Uu=zu[Fu];$u.addGroup(Uu.start,Uu.count,Uu.materialIndex)}var ju=_u.data.boundingSphere;if(ju!==void 0){var Wu=new Vector3;ju.center!==void 0&&Wu.fromArray(ju.center),$u.boundingSphere=new Sphere(Wu,ju.radius)}return _u.name&&($u.name=_u.name),_u.userData&&($u.userData=_u.userData),$u}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(_u){Loader.call(this,_u)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=this.path===""?LoaderUtils.extractUrlBase(_u):this.path;this.resourcePath=this.resourcePath||Ru;var Lu=new FileLoader(Pu.manager);Lu.setPath(this.path),Lu.load(_u,function(Bu){var Vu=null;try{Vu=JSON.parse(Bu)}catch(Du){Cu!==void 0&&Cu(Du),console.error("THREE:ObjectLoader: Can't parse "+_u+".",Du.message);return}var Ou=Vu.metadata;if(Ou===void 0||Ou.type===void 0||Ou.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+_u);return}Pu.parse(Vu,$u)},Tu,Cu)},parse:function(_u,$u){var Tu=this.parseShape(_u.shapes),Cu=this.parseGeometries(_u.geometries,Tu),Pu=this.parseImages(_u.images,function(){$u!==void 0&&$u(Bu)}),Ru=this.parseTextures(_u.textures,Pu),Lu=this.parseMaterials(_u.materials,Ru),Bu=this.parseObject(_u.object,Cu,Lu);return _u.animations&&(Bu.animations=this.parseAnimations(_u.animations)),(_u.images===void 0||_u.images.length===0)&&$u!==void 0&&$u(Bu),Bu},parseShape:function(_u){var $u={};if(_u!==void 0)for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=new Shape().fromJSON(_u[Tu]);$u[Pu.uuid]=Pu}return $u},parseGeometries:function(_u,$u){var Tu={};if(_u!==void 0)for(var Cu=new BufferGeometryLoader,Pu=0,Ru=_u.length;Pu<Ru;Pu++){var Lu,Bu=_u[Pu];switch(Bu.type){case"PlaneGeometry":case"PlaneBufferGeometry":Lu=new Geometries[Bu.type](Bu.width,Bu.height,Bu.widthSegments,Bu.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Lu=new Geometries[Bu.type](Bu.width,Bu.height,Bu.depth,Bu.widthSegments,Bu.heightSegments,Bu.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Lu=new Geometries[Bu.type](Bu.radius,Bu.segments,Bu.thetaStart,Bu.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Lu=new Geometries[Bu.type](Bu.radiusTop,Bu.radiusBottom,Bu.height,Bu.radialSegments,Bu.heightSegments,Bu.openEnded,Bu.thetaStart,Bu.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Lu=new Geometries[Bu.type](Bu.radius,Bu.height,Bu.radialSegments,Bu.heightSegments,Bu.openEnded,Bu.thetaStart,Bu.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Lu=new Geometries[Bu.type](Bu.radius,Bu.widthSegments,Bu.heightSegments,Bu.phiStart,Bu.phiLength,Bu.thetaStart,Bu.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Lu=new Geometries[Bu.type](Bu.radius,Bu.detail);break;case"RingGeometry":case"RingBufferGeometry":Lu=new Geometries[Bu.type](Bu.innerRadius,Bu.outerRadius,Bu.thetaSegments,Bu.phiSegments,Bu.thetaStart,Bu.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Lu=new Geometries[Bu.type](Bu.radius,Bu.tube,Bu.radialSegments,Bu.tubularSegments,Bu.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Lu=new Geometries[Bu.type](Bu.radius,Bu.tube,Bu.tubularSegments,Bu.radialSegments,Bu.p,Bu.q);break;case"TubeGeometry":case"TubeBufferGeometry":Lu=new Geometries[Bu.type](new Curves[Bu.path.type]().fromJSON(Bu.path),Bu.tubularSegments,Bu.radius,Bu.radialSegments,Bu.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Lu=new Geometries[Bu.type](Bu.points,Bu.segments,Bu.phiStart,Bu.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Lu=new Geometries[Bu.type](Bu.vertices,Bu.indices,Bu.radius,Bu.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var ku=[],Vu=0,Ou=Bu.shapes.length;Vu<Ou;Vu++){var Du=$u[Bu.shapes[Vu]];ku.push(Du)}Lu=new Geometries[Bu.type](ku,Bu.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var ku=[],Vu=0,Ou=Bu.shapes.length;Vu<Ou;Vu++){var Du=$u[Bu.shapes[Vu]];ku.push(Du)}var Fu=Bu.options.extrudePath;Fu!==void 0&&(Bu.options.extrudePath=new Curves[Fu.type]().fromJSON(Fu)),Lu=new Geometries[Bu.type](ku,Bu.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Lu=Cu.parse(Bu);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Bu.type+'"');continue}Lu.uuid=Bu.uuid,Bu.name!==void 0&&(Lu.name=Bu.name),Lu.isBufferGeometry===!0&&Bu.userData!==void 0&&(Lu.userData=Bu.userData),Tu[Bu.uuid]=Lu}return Tu},parseMaterials:function(_u,$u){var Tu={},Cu={};if(_u!==void 0){var Pu=new MaterialLoader;Pu.setTextures($u);for(var Ru=0,Lu=_u.length;Ru<Lu;Ru++){var Bu=_u[Ru];if(Bu.type==="MultiMaterial"){for(var Vu=[],Ou=0;Ou<Bu.materials.length;Ou++){var Du=Bu.materials[Ou];Tu[Du.uuid]===void 0&&(Tu[Du.uuid]=Pu.parse(Du)),Vu.push(Tu[Du.uuid])}Cu[Bu.uuid]=Vu}else Tu[Bu.uuid]===void 0&&(Tu[Bu.uuid]=Pu.parse(Bu)),Cu[Bu.uuid]=Tu[Bu.uuid]}}return Cu},parseAnimations:function(_u){for(var $u=[],Tu=0;Tu<_u.length;Tu++){var Cu=_u[Tu],Pu=AnimationClip.parse(Cu);Cu.uuid!==void 0&&(Pu.uuid=Cu.uuid),$u.push(Pu)}return $u},parseImages:function(_u,$u){var Tu=this,Cu={};function Pu(zu){return Tu.manager.itemStart(zu),Lu.load(zu,function(){Tu.manager.itemEnd(zu)},void 0,function(){Tu.manager.itemError(zu),Tu.manager.itemEnd(zu)})}if(_u!==void 0&&_u.length>0){var Ru=new LoadingManager($u),Lu=new ImageLoader(Ru);Lu.setCrossOrigin(this.crossOrigin);for(var Bu=0,Vu=_u.length;Bu<Vu;Bu++){var Ou=_u[Bu],Du=Ou.url;if(Array.isArray(Du)){Cu[Ou.uuid]=[];for(var ku=0,Fu=Du.length;ku<Fu;ku++){var Nu=Du[ku],Gu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Nu)?Nu:Tu.resourcePath+Nu;Cu[Ou.uuid].push(Pu(Gu))}}else{var Gu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ou.url)?Ou.url:Tu.resourcePath+Ou.url;Cu[Ou.uuid]=Pu(Gu)}}}return Cu},parseTextures:function(_u,$u){function Tu(Vu,Ou){return typeof Vu=="number"?Vu:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Vu),Ou[Vu])}var Cu={};if(_u!==void 0)for(var Pu=0,Ru=_u.length;Pu<Ru;Pu++){var Lu=_u[Pu];Lu.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Lu.uuid),$u[Lu.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Lu.image);var Bu;Array.isArray($u[Lu.image])?Bu=new CubeTexture($u[Lu.image]):Bu=new Texture($u[Lu.image]),Bu.needsUpdate=!0,Bu.uuid=Lu.uuid,Lu.name!==void 0&&(Bu.name=Lu.name),Lu.mapping!==void 0&&(Bu.mapping=Tu(Lu.mapping,TEXTURE_MAPPING)),Lu.offset!==void 0&&Bu.offset.fromArray(Lu.offset),Lu.repeat!==void 0&&Bu.repeat.fromArray(Lu.repeat),Lu.center!==void 0&&Bu.center.fromArray(Lu.center),Lu.rotation!==void 0&&(Bu.rotation=Lu.rotation),Lu.wrap!==void 0&&(Bu.wrapS=Tu(Lu.wrap[0],TEXTURE_WRAPPING),Bu.wrapT=Tu(Lu.wrap[1],TEXTURE_WRAPPING)),Lu.format!==void 0&&(Bu.format=Lu.format),Lu.type!==void 0&&(Bu.type=Lu.type),Lu.encoding!==void 0&&(Bu.encoding=Lu.encoding),Lu.minFilter!==void 0&&(Bu.minFilter=Tu(Lu.minFilter,TEXTURE_FILTER)),Lu.magFilter!==void 0&&(Bu.magFilter=Tu(Lu.magFilter,TEXTURE_FILTER)),Lu.anisotropy!==void 0&&(Bu.anisotropy=Lu.anisotropy),Lu.flipY!==void 0&&(Bu.flipY=Lu.flipY),Lu.premultiplyAlpha!==void 0&&(Bu.premultiplyAlpha=Lu.premultiplyAlpha),Lu.unpackAlignment!==void 0&&(Bu.unpackAlignment=Lu.unpackAlignment),Cu[Lu.uuid]=Bu}return Cu},parseObject:function(_u,$u,Tu){var Cu;function Pu(Hu){return $u[Hu]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Hu),$u[Hu]}function Ru(Hu){if(Hu!==void 0){if(Array.isArray(Hu)){for(var Uu=[],ju=0,Wu=Hu.length;ju<Wu;ju++){var Qu=Hu[ju];Tu[Qu]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Qu),Uu.push(Tu[Qu])}return Uu}return Tu[Hu]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Hu),Tu[Hu]}}switch(_u.type){case"Scene":Cu=new Scene,_u.background!==void 0&&Number.isInteger(_u.background)&&(Cu.background=new Color(_u.background)),_u.fog!==void 0&&(_u.fog.type==="Fog"?Cu.fog=new Fog(_u.fog.color,_u.fog.near,_u.fog.far):_u.fog.type==="FogExp2"&&(Cu.fog=new FogExp2(_u.fog.color,_u.fog.density)));break;case"PerspectiveCamera":Cu=new PerspectiveCamera(_u.fov,_u.aspect,_u.near,_u.far),_u.focus!==void 0&&(Cu.focus=_u.focus),_u.zoom!==void 0&&(Cu.zoom=_u.zoom),_u.filmGauge!==void 0&&(Cu.filmGauge=_u.filmGauge),_u.filmOffset!==void 0&&(Cu.filmOffset=_u.filmOffset),_u.view!==void 0&&(Cu.view=Object.assign({},_u.view));break;case"OrthographicCamera":Cu=new OrthographicCamera(_u.left,_u.right,_u.top,_u.bottom,_u.near,_u.far),_u.zoom!==void 0&&(Cu.zoom=_u.zoom),_u.view!==void 0&&(Cu.view=Object.assign({},_u.view));break;case"AmbientLight":Cu=new AmbientLight(_u.color,_u.intensity);break;case"DirectionalLight":Cu=new DirectionalLight(_u.color,_u.intensity);break;case"PointLight":Cu=new PointLight(_u.color,_u.intensity,_u.distance,_u.decay);break;case"RectAreaLight":Cu=new RectAreaLight(_u.color,_u.intensity,_u.width,_u.height);break;case"SpotLight":Cu=new SpotLight(_u.color,_u.intensity,_u.distance,_u.angle,_u.penumbra,_u.decay);break;case"HemisphereLight":Cu=new HemisphereLight(_u.color,_u.groundColor,_u.intensity);break;case"LightProbe":Cu=new LightProbe().fromJSON(_u);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Lu=Pu(_u.geometry),Bu=Ru(_u.material);Cu=new Mesh(Lu,Bu);break;case"InstancedMesh":var Lu=Pu(_u.geometry),Bu=Ru(_u.material),Vu=_u.count,Ou=_u.instanceMatrix;Cu=new InstancedMesh(Lu,Bu,Vu),Cu.instanceMatrix=new BufferAttribute(new Float32Array(Ou.array),16);break;case"LOD":Cu=new LOD;break;case"Line":Cu=new Line$1(Pu(_u.geometry),Ru(_u.material),_u.mode);break;case"LineLoop":Cu=new LineLoop(Pu(_u.geometry),Ru(_u.material));break;case"LineSegments":Cu=new LineSegments(Pu(_u.geometry),Ru(_u.material));break;case"PointCloud":case"Points":Cu=new Points(Pu(_u.geometry),Ru(_u.material));break;case"Sprite":Cu=new Sprite(Ru(_u.material));break;case"Group":Cu=new Group$1;break;default:Cu=new Object3D}if(Cu.uuid=_u.uuid,_u.name!==void 0&&(Cu.name=_u.name),_u.matrix!==void 0?(Cu.matrix.fromArray(_u.matrix),_u.matrixAutoUpdate!==void 0&&(Cu.matrixAutoUpdate=_u.matrixAutoUpdate),Cu.matrixAutoUpdate&&Cu.matrix.decompose(Cu.position,Cu.quaternion,Cu.scale)):(_u.position!==void 0&&Cu.position.fromArray(_u.position),_u.rotation!==void 0&&Cu.rotation.fromArray(_u.rotation),_u.quaternion!==void 0&&Cu.quaternion.fromArray(_u.quaternion),_u.scale!==void 0&&Cu.scale.fromArray(_u.scale)),_u.castShadow!==void 0&&(Cu.castShadow=_u.castShadow),_u.receiveShadow!==void 0&&(Cu.receiveShadow=_u.receiveShadow),_u.shadow&&(_u.shadow.bias!==void 0&&(Cu.shadow.bias=_u.shadow.bias),_u.shadow.radius!==void 0&&(Cu.shadow.radius=_u.shadow.radius),_u.shadow.mapSize!==void 0&&Cu.shadow.mapSize.fromArray(_u.shadow.mapSize),_u.shadow.camera!==void 0&&(Cu.shadow.camera=this.parseObject(_u.shadow.camera))),_u.visible!==void 0&&(Cu.visible=_u.visible),_u.frustumCulled!==void 0&&(Cu.frustumCulled=_u.frustumCulled),_u.renderOrder!==void 0&&(Cu.renderOrder=_u.renderOrder),_u.userData!==void 0&&(Cu.userData=_u.userData),_u.layers!==void 0&&(Cu.layers.mask=_u.layers),_u.children!==void 0)for(var Du=_u.children,ku=0;ku<Du.length;ku++)Cu.add(this.parseObject(Du[ku],$u,Tu));if(_u.type==="LOD"){_u.autoUpdate!==void 0&&(Cu.autoUpdate=_u.autoUpdate);for(var Fu=_u.levels,Nu=0;Nu<Fu.length;Nu++){var Gu=Fu[Nu],zu=Cu.getObjectByProperty("uuid",Gu.object);zu!==void 0&&Cu.addLevel(zu,Gu.distance)}}return Cu}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(_u){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,_u),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function($u){return this.options=$u,this},load:function(_u,$u,Tu,Cu){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Pu=this,Ru=Cache.get(_u);if(Ru!==void 0)return Pu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Ru),Pu.manager.itemEnd(_u)},0),Ru;fetch(_u).then(function(Lu){return Lu.blob()}).then(function(Lu){return Pu.options===void 0?createImageBitmap(Lu):createImageBitmap(Lu,Pu.options)}).then(function(Lu){Cache.add(_u,Lu),$u&&$u(Lu),Pu.manager.itemEnd(_u)}).catch(function(Lu){Cu&&Cu(Lu),Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)}),Pu.manager.itemStart(_u)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(_u,$u){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_u,$u),this},lineTo:function(_u,$u){return this.currentPath.lineTo(_u,$u),this},quadraticCurveTo:function(_u,$u,Tu,Cu){return this.currentPath.quadraticCurveTo(_u,$u,Tu,Cu),this},bezierCurveTo:function(_u,$u,Tu,Cu,Pu,Ru){return this.currentPath.bezierCurveTo(_u,$u,Tu,Cu,Pu,Ru),this},splineThru:function(_u){return this.currentPath.splineThru(_u),this},toShapes:function(_u,$u){function Tu(_h){for(var ip=[],ap=0,hp=_h.length;ap<hp;ap++){var Ap=_h[ap],gp=new Shape;gp.curves=Ap.curves,ip.push(gp)}return ip}function Cu(_h,ip){for(var ap=ip.length,hp=!1,Ap=ap-1,gp=0;gp<ap;Ap=gp++){var Rp=ip[Ap],Sp=ip[gp],Dp=Sp.x-Rp.x,Ep=Sp.y-Rp.y;if(Math.abs(Ep)>Number.EPSILON){if(Ep<0&&(Rp=ip[gp],Dp=-Dp,Sp=ip[Ap],Ep=-Ep),_h.y<Rp.y||_h.y>Sp.y)continue;if(_h.y===Rp.y){if(_h.x===Rp.x)return!0}else{var Bp=Ep*(_h.x-Rp.x)-Dp*(_h.y-Rp.y);if(Bp===0)return!0;if(Bp<0)continue;hp=!hp}}else{if(_h.y!==Rp.y)continue;if(Sp.x<=_h.x&&_h.x<=Rp.x||Rp.x<=_h.x&&_h.x<=Sp.x)return!0}}return hp}var Pu=ShapeUtils.isClockWise,Ru=this.subPaths;if(Ru.length===0)return[];if($u===!0)return Tu(Ru);var Lu,Bu,Vu,Ou=[];if(Ru.length===1)return Bu=Ru[0],Vu=new Shape,Vu.curves=Bu.curves,Ou.push(Vu),Ou;var Du=!Pu(Ru[0].getPoints());Du=_u?!Du:Du;var ku=[],Fu=[],Nu=[],Gu=0,zu;Fu[Gu]=void 0,Nu[Gu]=[];for(var Hu=0,Uu=Ru.length;Hu<Uu;Hu++)Bu=Ru[Hu],zu=Bu.getPoints(),Lu=Pu(zu),Lu=_u?!Lu:Lu,Lu?(!Du&&Fu[Gu]&&Gu++,Fu[Gu]={s:new Shape,p:zu},Fu[Gu].s.curves=Bu.curves,Du&&Gu++,Nu[Gu]=[]):Nu[Gu].push({h:Bu,p:zu[0]});if(!Fu[0])return Tu(Ru);if(Fu.length>1){for(var ju=!1,Wu=[],Qu=0,qu=Fu.length;Qu<qu;Qu++)ku[Qu]=[];for(var Qu=0,qu=Fu.length;Qu<qu;Qu++)for(var Yu=Nu[Qu],Ju=0;Ju<Yu.length;Ju++){for(var _d=Yu[Ju],tp=!0,Ku=0;Ku<Fu.length;Ku++)Cu(_d.p,Fu[Ku].p)&&(Qu!==Ku&&Wu.push({froms:Qu,tos:Ku,hole:Ju}),tp?(tp=!1,ku[Ku].push(_d)):ju=!0);tp&&ku[Qu].push(_d)}Wu.length>0&&(ju||(Nu=ku))}for(var Xu,Hu=0,Zu=Fu.length;Hu<Zu;Hu++){Vu=Fu[Hu].s,Ou.push(Vu),Xu=Nu[Hu];for(var _c=0,Xc=Xu.length;_c<Xc;_c++)Vu.holes.push(Xu[_c].h)}return Ou}});function Font(_u){this.type="Font",this.data=_u}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(_u,$u){$u===void 0&&($u=100);for(var Tu=[],Cu=createPaths(_u,$u,this.data),Pu=0,Ru=Cu.length;Pu<Ru;Pu++)Array.prototype.push.apply(Tu,Cu[Pu].toShapes());return Tu}});function createPaths(_u,$u,Tu){for(var Cu=Array.from?Array.from(_u):String(_u).split(""),Pu=$u/Tu.resolution,Ru=(Tu.boundingBox.yMax-Tu.boundingBox.yMin+Tu.underlineThickness)*Pu,Lu=[],Bu=0,Vu=0,Ou=0;Ou<Cu.length;Ou++){var Du=Cu[Ou];if(Du===`
`)Bu=0,Vu-=Ru;else{var ku=createPath(Du,Pu,Bu,Vu,Tu);Bu+=ku.offsetX,Lu.push(ku.path)}}return Lu}function createPath(_u,$u,Tu,Cu,Pu){var Ru=Pu.glyphs[_u]||Pu.glyphs["?"];if(!Ru){console.error('THREE.Font: character "'+_u+'" does not exists in font family '+Pu.familyName+".");return}var Lu=new ShapePath,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu;if(Ru.o)for(var zu=Ru._cachedOutline||(Ru._cachedOutline=Ru.o.split(" ")),Hu=0,Uu=zu.length;Hu<Uu;){var ju=zu[Hu++];switch(ju){case"m":Bu=zu[Hu++]*$u+Tu,Vu=zu[Hu++]*$u+Cu,Lu.moveTo(Bu,Vu);break;case"l":Bu=zu[Hu++]*$u+Tu,Vu=zu[Hu++]*$u+Cu,Lu.lineTo(Bu,Vu);break;case"q":Ou=zu[Hu++]*$u+Tu,Du=zu[Hu++]*$u+Cu,ku=zu[Hu++]*$u+Tu,Fu=zu[Hu++]*$u+Cu,Lu.quadraticCurveTo(ku,Fu,Ou,Du);break;case"b":Ou=zu[Hu++]*$u+Tu,Du=zu[Hu++]*$u+Cu,ku=zu[Hu++]*$u+Tu,Fu=zu[Hu++]*$u+Cu,Nu=zu[Hu++]*$u+Tu,Gu=zu[Hu++]*$u+Cu,Lu.bezierCurveTo(ku,Fu,Nu,Gu,Ou,Du);break}}return{offsetX:Ru.ha*$u,path:Lu}}function FontLoader(_u){Loader.call(this,_u)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=new FileLoader(this.manager);Ru.setPath(this.path),Ru.load(_u,function(Lu){var Bu;try{Bu=JSON.parse(Lu)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Bu=JSON.parse(Lu.substring(65,Lu.length-2))}var Vu=Pu.parse(Bu);$u&&$u(Vu)},Tu,Cu)},parse:function(_u){return new Font(_u)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(_u){_context=_u}};function AudioLoader(_u){Loader.call(this,_u)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Ru=new FileLoader(Pu.manager);Ru.setResponseType("arraybuffer"),Ru.setPath(Pu.path),Ru.load(_u,function(Lu){try{var Bu=Lu.slice(0),Vu=AudioContext.getContext();Vu.decodeAudioData(Bu,function(Ou){$u(Ou)})}catch(Ou){Cu?Cu(Ou):console.error(Ou),Pu.manager.itemError(_u)}},Tu,Cu)}});function HemisphereLightProbe(_u,$u,Tu){LightProbe.call(this,void 0,Tu);var Cu=new Color().set(_u),Pu=new Color().set($u),Ru=new Vector3(Cu.r,Cu.g,Cu.b),Lu=new Vector3(Pu.r,Pu.g,Pu.b),Bu=Math.sqrt(Math.PI),Vu=Bu*Math.sqrt(.75);this.sh.coefficients[0].copy(Ru).add(Lu).multiplyScalar(Bu),this.sh.coefficients[1].copy(Ru).sub(Lu).multiplyScalar(Vu)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});function AmbientLightProbe(_u,$u){LightProbe.call(this,void 0,$u);var Tu=new Color().set(_u);this.sh.coefficients[0].set(Tu.r,Tu.g,Tu.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(_u){var $u=this._cache,Tu=$u.focus!==_u.focus||$u.fov!==_u.fov||$u.aspect!==_u.aspect*this.aspect||$u.near!==_u.near||$u.far!==_u.far||$u.zoom!==_u.zoom||$u.eyeSep!==this.eyeSep;if(Tu){$u.focus=_u.focus,$u.fov=_u.fov,$u.aspect=_u.aspect*this.aspect,$u.near=_u.near,$u.far=_u.far,$u.zoom=_u.zoom,$u.eyeSep=this.eyeSep;var Cu=_u.projectionMatrix.clone(),Pu=$u.eyeSep/2,Ru=Pu*$u.near/$u.focus,Lu=$u.near*Math.tan(MathUtils.DEG2RAD*$u.fov*.5)/$u.zoom,Bu,Vu;_eyeLeft.elements[12]=-Pu,_eyeRight.elements[12]=Pu,Bu=-Lu*$u.aspect+Ru,Vu=Lu*$u.aspect+Ru,Cu.elements[0]=2*$u.near/(Vu-Bu),Cu.elements[8]=(Vu+Bu)/(Vu-Bu),this.cameraL.projectionMatrix.copy(Cu),Bu=-Lu*$u.aspect-Ru,Vu=Lu*$u.aspect-Ru,Cu.elements[0]=2*$u.near/(Vu-Bu),Cu.elements[8]=(Vu+Bu)/(Vu-Bu),this.cameraR.projectionMatrix.copy(Cu)}this.cameraL.matrixWorld.copy(_u.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_u.matrixWorld).multiply(_eyeRight)}});function Clock(_u){this.autoStart=_u!==void 0?_u:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var _u=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var $u=(typeof performance=="undefined"?Date:performance).now();_u=($u-this.oldTime)/1e3,this.oldTime=$u,this.elapsedTime+=_u}return _u}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(_u){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_u,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u);var $u=this.context.listener,Tu=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),$u.positionX){var Cu=this.context.currentTime+this.timeDelta;$u.positionX.linearRampToValueAtTime(_position$2.x,Cu),$u.positionY.linearRampToValueAtTime(_position$2.y,Cu),$u.positionZ.linearRampToValueAtTime(_position$2.z,Cu),$u.forwardX.linearRampToValueAtTime(_orientation.x,Cu),$u.forwardY.linearRampToValueAtTime(_orientation.y,Cu),$u.forwardZ.linearRampToValueAtTime(_orientation.z,Cu),$u.upX.linearRampToValueAtTime(Tu.x,Cu),$u.upY.linearRampToValueAtTime(Tu.y,Cu),$u.upZ.linearRampToValueAtTime(Tu.z,Cu)}else $u.setPosition(_position$2.x,_position$2.y,_position$2.z),$u.setOrientation(_orientation.x,_orientation.y,_orientation.z,Tu.x,Tu.y,Tu.z)}});function Audio$1(_u){Object3D.call(this),this.type="Audio",this.listener=_u,this.context=_u.context,this.gain=this.context.createGain(),this.gain.connect(_u.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$1,getOutput:function(){return this.gain},setNodeSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_u,this.connect(),this},setMediaElementSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_u),this.connect(),this},setMediaStreamSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_u),this.connect(),this},setBuffer:function(_u){return this.buffer=_u,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(_u){if(_u===void 0&&(_u=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_u;var $u=this.context.createBufferSource();return $u.buffer=this.buffer,$u.loop=this.loop,$u.loopStart=this.loopStart,$u.loopEnd=this.loopEnd,$u.onended=this.onEnded.bind(this),$u.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=$u,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].connect(this.filters[_u]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].disconnect(this.filters[_u]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(_u){return _u||(_u=[]),this.isPlaying===!0?(this.disconnect(),this.filters=_u,this.connect()):this.filters=_u,this},setDetune:function(_u){if(this.detune=_u,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(_u){return this.setFilters(_u?[_u]:[])},setPlaybackRate:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_u,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_u,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(_u){return this.loopStart=_u,this},setLoopEnd:function(_u){return this.loopEnd=_u,this},getVolume:function(){return this.gain.gain.value},setVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(_u){Audio$1.call(this,_u),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$1.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(_u){return this.panner.refDistance=_u,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(_u){return this.panner.rolloffFactor=_u,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(_u){return this.panner.distanceModel=_u,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(_u){return this.panner.maxDistance=_u,this},setDirectionalCone:function(_u,$u,Tu){return this.panner.coneInnerAngle=_u,this.panner.coneOuterAngle=$u,this.panner.coneOuterGain=Tu,this},updateMatrixWorld:function(_u){if(Object3D.prototype.updateMatrixWorld.call(this,_u),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var $u=this.panner;if($u.positionX){var Tu=this.context.currentTime+this.listener.timeDelta;$u.positionX.linearRampToValueAtTime(_position$3.x,Tu),$u.positionY.linearRampToValueAtTime(_position$3.y,Tu),$u.positionZ.linearRampToValueAtTime(_position$3.z,Tu),$u.orientationX.linearRampToValueAtTime(_orientation$1.x,Tu),$u.orientationY.linearRampToValueAtTime(_orientation$1.y,Tu),$u.orientationZ.linearRampToValueAtTime(_orientation$1.z,Tu)}else $u.setPosition(_position$3.x,_position$3.y,_position$3.z),$u.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(_u,$u){this.analyser=_u.context.createAnalyser(),this.analyser.fftSize=$u!==void 0?$u:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),_u.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var _u=0,$u=this.getFrequencyData(),Tu=0;Tu<$u.length;Tu++)_u+=$u[Tu];return _u/$u.length}});function PropertyMixer(_u,$u,Tu){this.binding=_u,this.valueSize=Tu;var Cu,Pu,Ru;switch($u){case"quaternion":Cu=this._slerp,Pu=this._slerpAdditive,Ru=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Tu*6),this._workIndex=5;break;case"string":case"bool":Cu=this._select,Pu=this._select,Ru=this._setAdditiveIdentityOther,this.buffer=new Array(Tu*5);break;default:Cu=this._lerp,Pu=this._lerpAdditive,Ru=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Tu*5)}this._mixBufferRegion=Cu,this._mixBufferRegionAdditive=Pu,this._setIdentity=Ru,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(_u,$u){var Tu=this.buffer,Cu=this.valueSize,Pu=_u*Cu+Cu,Ru=this.cumulativeWeight;if(Ru===0){for(var Lu=0;Lu!==Cu;++Lu)Tu[Pu+Lu]=Tu[Lu];Ru=$u}else{Ru+=$u;var Bu=$u/Ru;this._mixBufferRegion(Tu,Pu,0,Bu,Cu)}this.cumulativeWeight=Ru},accumulateAdditive:function(_u){var $u=this.buffer,Tu=this.valueSize,Cu=Tu*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive($u,Cu,0,_u,Tu),this.cumulativeWeightAdditive+=_u},apply:function(_u){var $u=this.valueSize,Tu=this.buffer,Cu=_u*$u+$u,Pu=this.cumulativeWeight,Ru=this.cumulativeWeightAdditive,Lu=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Pu<1){var Bu=$u*this._origIndex;this._mixBufferRegion(Tu,Cu,Bu,1-Pu,$u)}Ru>0&&this._mixBufferRegionAdditive(Tu,Cu,this._addIndex*$u,1,$u);for(var Vu=$u,Ou=$u+$u;Vu!==Ou;++Vu)if(Tu[Vu]!==Tu[Vu+$u]){Lu.setValue(Tu,Cu);break}},saveOriginalState:function(){var _u=this.binding,$u=this.buffer,Tu=this.valueSize,Cu=Tu*this._origIndex;_u.getValue($u,Cu);for(var Pu=Tu,Ru=Cu;Pu!==Ru;++Pu)$u[Pu]=$u[Cu+Pu%Tu];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var _u=this.valueSize*3;this.binding.setValue(this.buffer,_u)},_setAdditiveIdentityNumeric:function(){for(var _u=this._addIndex*this.valueSize,$u=_u+this.valueSize,Tu=_u;Tu<$u;Tu++)this.buffer[Tu]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var _u=this._origIndex*this.valueSize,$u=this._addIndex*this.valueSize,Tu=0;Tu<this.valueSize;Tu++)this.buffer[$u+Tu]=this.buffer[_u+Tu]},_select:function(_u,$u,Tu,Cu,Pu){if(Cu>=.5)for(var Ru=0;Ru!==Pu;++Ru)_u[$u+Ru]=_u[Tu+Ru]},_slerp:function(_u,$u,Tu,Cu){Quaternion.slerpFlat(_u,$u,_u,$u,_u,Tu,Cu)},_slerpAdditive:function(_u,$u,Tu,Cu,Pu){var Ru=this._workIndex*Pu;Quaternion.multiplyQuaternionsFlat(_u,Ru,_u,$u,_u,Tu),Quaternion.slerpFlat(_u,$u,_u,$u,_u,Ru,Cu)},_lerp:function(_u,$u,Tu,Cu,Pu){for(var Ru=1-Cu,Lu=0;Lu!==Pu;++Lu){var Bu=$u+Lu;_u[Bu]=_u[Bu]*Ru+_u[Tu+Lu]*Cu}},_lerpAdditive:function(_u,$u,Tu,Cu,Pu){for(var Ru=0;Ru!==Pu;++Ru){var Lu=$u+Ru;_u[Lu]=_u[Lu]+_u[Tu+Ru]*Cu}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(_u,$u,Tu){var Cu=Tu||PropertyBinding.parseTrackName($u);this._targetGroup=_u,this._bindings=_u.subscribe_($u,Cu)}Object.assign(Composite.prototype,{getValue:function(_u,$u){this.bind();var Tu=this._targetGroup.nCachedObjects_,Cu=this._bindings[Tu];Cu!==void 0&&Cu.getValue(_u,$u)},setValue:function(_u,$u){for(var Tu=this._bindings,Cu=this._targetGroup.nCachedObjects_,Pu=Tu.length;Cu!==Pu;++Cu)Tu[Cu].setValue(_u,$u)},bind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Tu=_u.length;$u!==Tu;++$u)_u[$u].bind()},unbind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Tu=_u.length;$u!==Tu;++$u)_u[$u].unbind()}});function PropertyBinding(_u,$u,Tu){this.path=$u,this.parsedPath=Tu||PropertyBinding.parseTrackName($u),this.node=PropertyBinding.findNode(_u,this.parsedPath.nodeName)||_u,this.rootNode=_u}Object.assign(PropertyBinding,{Composite,create:function(_u,$u,Tu){return _u&&_u.isAnimationObjectGroup?new PropertyBinding.Composite(_u,$u,Tu):new PropertyBinding(_u,$u,Tu)},sanitizeNodeName:function(_u){return _u.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(_u){var $u=_trackRe.exec(_u);if(!$u)throw new Error("PropertyBinding: Cannot parse trackName: "+_u);var Tu={nodeName:$u[2],objectName:$u[3],objectIndex:$u[4],propertyName:$u[5],propertyIndex:$u[6]},Cu=Tu.nodeName&&Tu.nodeName.lastIndexOf(".");if(Cu!==void 0&&Cu!==-1){var Pu=Tu.nodeName.substring(Cu+1);_supportedObjectNames.indexOf(Pu)!==-1&&(Tu.nodeName=Tu.nodeName.substring(0,Cu),Tu.objectName=Pu)}if(Tu.propertyName===null||Tu.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_u);return Tu},findNode:function(_u,$u){if(!$u||$u===""||$u==="."||$u===-1||$u===_u.name||$u===_u.uuid)return _u;if(_u.skeleton){var Tu=_u.skeleton.getBoneByName($u);if(Tu!==void 0)return Tu}if(_u.children){var Cu=function(Ru){for(var Lu=0;Lu<Ru.length;Lu++){var Bu=Ru[Lu];if(Bu.name===$u||Bu.uuid===$u)return Bu;var Vu=Cu(Bu.children);if(Vu)return Vu}return null},Pu=Cu(_u.children);if(Pu)return Pu}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function($u,Tu){$u[Tu]=this.node[this.propertyName]},function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Ru=Cu.length;Pu!==Ru;++Pu)$u[Tu++]=Cu[Pu]},function($u,Tu){$u[Tu]=this.resolvedProperty[this.propertyIndex]},function($u,Tu){this.resolvedProperty.toArray($u,Tu)}],SetterByBindingTypeAndVersioning:[[function($u,Tu){this.targetObject[this.propertyName]=$u[Tu]},function($u,Tu){this.targetObject[this.propertyName]=$u[Tu],this.targetObject.needsUpdate=!0},function($u,Tu){this.targetObject[this.propertyName]=$u[Tu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Ru=Cu.length;Pu!==Ru;++Pu)Cu[Pu]=$u[Tu++]},function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Ru=Cu.length;Pu!==Ru;++Pu)Cu[Pu]=$u[Tu++];this.targetObject.needsUpdate=!0},function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Ru=Cu.length;Pu!==Ru;++Pu)Cu[Pu]=$u[Tu++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Tu){this.resolvedProperty[this.propertyIndex]=$u[Tu]},function($u,Tu){this.resolvedProperty[this.propertyIndex]=$u[Tu],this.targetObject.needsUpdate=!0},function($u,Tu){this.resolvedProperty[this.propertyIndex]=$u[Tu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Tu){this.resolvedProperty.fromArray($u,Tu)},function($u,Tu){this.resolvedProperty.fromArray($u,Tu),this.targetObject.needsUpdate=!0},function($u,Tu){this.resolvedProperty.fromArray($u,Tu),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function($u,Tu){this.bind(),this.getValue($u,Tu)},setValue:function($u,Tu){this.bind(),this.setValue($u,Tu)},bind:function(){var _u=this.node,$u=this.parsedPath,Tu=$u.objectName,Cu=$u.propertyName,Pu=$u.propertyIndex;if(_u||(_u=PropertyBinding.findNode(this.rootNode,$u.nodeName)||this.rootNode,this.node=_u),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_u){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(Tu){var Ru=$u.objectIndex;switch(Tu){case"materials":if(!_u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_u=_u.material.materials;break;case"bones":if(!_u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_u=_u.skeleton.bones;for(var Lu=0;Lu<_u.length;Lu++)if(_u[Lu].name===Ru){Ru=Lu;break}break;default:if(_u[Tu]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_u=_u[Tu]}if(Ru!==void 0){if(_u[Ru]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_u);return}_u=_u[Ru]}}var Bu=_u[Cu];if(Bu===void 0){var Vu=$u.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Vu+"."+Cu+" but it wasn't found.",_u);return}var Ou=this.Versioning.None;this.targetObject=_u,_u.needsUpdate!==void 0?Ou=this.Versioning.NeedsUpdate:_u.matrixWorldNeedsUpdate!==void 0&&(Ou=this.Versioning.MatrixWorldNeedsUpdate);var Du=this.BindingType.Direct;if(Pu!==void 0){if(Cu==="morphTargetInfluences"){if(!_u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(_u.geometry.isBufferGeometry){if(!_u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_u.morphTargetDictionary[Pu]!==void 0&&(Pu=_u.morphTargetDictionary[Pu])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Du=this.BindingType.ArrayElement,this.resolvedProperty=Bu,this.propertyIndex=Pu}else Bu.fromArray!==void 0&&Bu.toArray!==void 0?(Du=this.BindingType.HasFromToArray,this.resolvedProperty=Bu):Array.isArray(Bu)?(Du=this.BindingType.EntireArray,this.resolvedProperty=Bu):this.propertyName=Cu;this.getValue=this.GetterByBindingType[Du],this.setValue=this.SetterByBindingTypeAndVersioning[Du][Ou]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var _u={};this._indicesByUUID=_u;for(var $u=0,Tu=arguments.length;$u!==Tu;++$u)_u[arguments[$u].uuid]=$u;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Cu=this;this.stats={objects:{get total(){return Cu._objects.length},get inUse(){return this.total-Cu.nCachedObjects_}},get bindingsPerObject(){return Cu._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var _u=this._objects,$u=_u.length,Tu=this.nCachedObjects_,Cu=this._indicesByUUID,Pu=this._paths,Ru=this._parsedPaths,Lu=this._bindings,Bu=Lu.length,Vu=void 0,Ou=0,Du=arguments.length;Ou!==Du;++Ou){var ku=arguments[Ou],Fu=ku.uuid,Nu=Cu[Fu];if(Nu===void 0){Nu=$u++,Cu[Fu]=Nu,_u.push(ku);for(var Gu=0,zu=Bu;Gu!==zu;++Gu)Lu[Gu].push(new PropertyBinding(ku,Pu[Gu],Ru[Gu]))}else if(Nu<Tu){Vu=_u[Nu];var Hu=--Tu,Uu=_u[Hu];Cu[Uu.uuid]=Nu,_u[Nu]=Uu,Cu[Fu]=Hu,_u[Hu]=ku;for(var Gu=0,zu=Bu;Gu!==zu;++Gu){var ju=Lu[Gu],Wu=ju[Hu],Qu=ju[Nu];ju[Nu]=Wu,Qu===void 0&&(Qu=new PropertyBinding(ku,Pu[Gu],Ru[Gu])),ju[Hu]=Qu}}else _u[Nu]!==Vu&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Tu},remove:function(){for(var _u=this._objects,$u=this.nCachedObjects_,Tu=this._indicesByUUID,Cu=this._bindings,Pu=Cu.length,Ru=0,Lu=arguments.length;Ru!==Lu;++Ru){var Bu=arguments[Ru],Vu=Bu.uuid,Ou=Tu[Vu];if(Ou!==void 0&&Ou>=$u){var Du=$u++,ku=_u[Du];Tu[ku.uuid]=Ou,_u[Ou]=ku,Tu[Vu]=Du,_u[Du]=Bu;for(var Fu=0,Nu=Pu;Fu!==Nu;++Fu){var Gu=Cu[Fu],zu=Gu[Du],Hu=Gu[Ou];Gu[Ou]=zu,Gu[Du]=Hu}}}this.nCachedObjects_=$u},uncache:function(){for(var _u=this._objects,$u=_u.length,Tu=this.nCachedObjects_,Cu=this._indicesByUUID,Pu=this._bindings,Ru=Pu.length,Lu=0,Bu=arguments.length;Lu!==Bu;++Lu){var Vu=arguments[Lu],Ou=Vu.uuid,Du=Cu[Ou];if(Du!==void 0)if(delete Cu[Ou],Du<Tu){var ku=--Tu,Fu=_u[ku],Nu=--$u,Gu=_u[Nu];Cu[Fu.uuid]=Du,_u[Du]=Fu,Cu[Gu.uuid]=ku,_u[ku]=Gu,_u.pop();for(var zu=0,Hu=Ru;zu!==Hu;++zu){var Uu=Pu[zu],ju=Uu[ku],Wu=Uu[Nu];Uu[Du]=ju,Uu[ku]=Wu,Uu.pop()}}else{var Nu=--$u,Gu=_u[Nu];Cu[Gu.uuid]=Du,_u[Du]=Gu,_u.pop();for(var zu=0,Hu=Ru;zu!==Hu;++zu){var Uu=Pu[zu];Uu[Du]=Uu[Nu],Uu.pop()}}}this.nCachedObjects_=Tu},subscribe_:function(_u,$u){var Tu=this._bindingsIndicesByPath,Cu=Tu[_u],Pu=this._bindings;if(Cu!==void 0)return Pu[Cu];var Ru=this._paths,Lu=this._parsedPaths,Bu=this._objects,Vu=Bu.length,Ou=this.nCachedObjects_,Du=new Array(Vu);Cu=Pu.length,Tu[_u]=Cu,Ru.push(_u),Lu.push($u),Pu.push(Du);for(var ku=Ou,Fu=Bu.length;ku!==Fu;++ku){var Nu=Bu[ku];Du[ku]=new PropertyBinding(Nu,_u,$u)}return Du},unsubscribe_:function(_u){var $u=this._bindingsIndicesByPath,Tu=$u[_u];if(Tu!==void 0){var Cu=this._paths,Pu=this._parsedPaths,Ru=this._bindings,Lu=Ru.length-1,Bu=Ru[Lu],Vu=_u[Lu];$u[Vu]=Tu,Ru[Tu]=Bu,Ru.pop(),Pu[Tu]=Pu[Lu],Pu.pop(),Cu[Tu]=Cu[Lu],Cu.pop()}}});function AnimationAction(_u,$u,Tu,Cu){this._mixer=_u,this._clip=$u,this._localRoot=Tu||null,this.blendMode=Cu||$u.blendMode;for(var Pu=$u.tracks,Ru=Pu.length,Lu=new Array(Ru),Bu={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Vu=0;Vu!==Ru;++Vu){var Ou=Pu[Vu].createInterpolant(null);Lu[Vu]=Ou,Ou.settings=Bu}this._interpolantSettings=Bu,this._interpolants=Lu,this._propertyBindings=new Array(Ru),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(_u){return this._startTime=_u,this},setLoop:function(_u,$u){return this.loop=_u,this.repetitions=$u,this},setEffectiveWeight:function(_u){return this.weight=_u,this._effectiveWeight=this.enabled?_u:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(_u){return this._scheduleFading(_u,0,1)},fadeOut:function(_u){return this._scheduleFading(_u,1,0)},crossFadeFrom:function(_u,$u,Tu){if(_u.fadeOut($u),this.fadeIn($u),Tu){var Cu=this._clip.duration,Pu=_u._clip.duration,Ru=Pu/Cu,Lu=Cu/Pu;_u.warp(1,Ru,$u),this.warp(Lu,1,$u)}return this},crossFadeTo:function(_u,$u,Tu){return _u.crossFadeFrom(this,$u,Tu)},stopFading:function(){var _u=this._weightInterpolant;return _u!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},setEffectiveTimeScale:function(_u){return this.timeScale=_u,this._effectiveTimeScale=this.paused?0:_u,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(_u){return this.timeScale=this._clip.duration/_u,this.stopWarping()},syncWith:function(_u){return this.time=_u.time,this.timeScale=_u.timeScale,this.stopWarping()},halt:function(_u){return this.warp(this._effectiveTimeScale,0,_u)},warp:function(_u,$u,Tu){var Cu=this._mixer,Pu=Cu.time,Ru=this._timeScaleInterpolant,Lu=this.timeScale;Ru===null&&(Ru=Cu._lendControlInterpolant(),this._timeScaleInterpolant=Ru);var Bu=Ru.parameterPositions,Vu=Ru.sampleValues;return Bu[0]=Pu,Bu[1]=Pu+Tu,Vu[0]=_u/Lu,Vu[1]=$u/Lu,this},stopWarping:function(){var _u=this._timeScaleInterpolant;return _u!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(_u,$u,Tu,Cu){if(!this.enabled){this._updateWeight(_u);return}var Pu=this._startTime;if(Pu!==null){var Ru=(_u-Pu)*Tu;if(Ru<0||Tu===0)return;this._startTime=null,$u=Tu*Ru}$u*=this._updateTimeScale(_u);var Lu=this._updateTime($u),Bu=this._updateWeight(_u);if(Bu>0){var Vu=this._interpolants,Ou=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Du=0,ku=Vu.length;Du!==ku;++Du)Vu[Du].evaluate(Lu),Ou[Du].accumulateAdditive(Bu);break;case NormalAnimationBlendMode:default:for(var Du=0,ku=Vu.length;Du!==ku;++Du)Vu[Du].evaluate(Lu),Ou[Du].accumulate(Cu,Bu)}}},_updateWeight:function(_u){var $u=0;if(this.enabled){$u=this.weight;var Tu=this._weightInterpolant;if(Tu!==null){var Cu=Tu.evaluate(_u)[0];$u*=Cu,_u>Tu.parameterPositions[1]&&(this.stopFading(),Cu===0&&(this.enabled=!1))}}return this._effectiveWeight=$u,$u},_updateTimeScale:function(_u){var $u=0;if(!this.paused){$u=this.timeScale;var Tu=this._timeScaleInterpolant;if(Tu!==null){var Cu=Tu.evaluate(_u)[0];$u*=Cu,_u>Tu.parameterPositions[1]&&(this.stopWarping(),$u===0?this.paused=!0:this.timeScale=$u)}}return this._effectiveTimeScale=$u,$u},_updateTime:function(_u){var $u=this.time+_u,Tu=this._clip.duration,Cu=this.loop,Pu=this._loopCount,Ru=Cu===LoopPingPong;if(_u===0)return Pu===-1?$u:Ru&&(Pu&1)===1?Tu-$u:$u;if(Cu===LoopOnce){Pu===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if($u>=Tu)$u=Tu;else if($u<0)$u=0;else{this.time=$u;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u<0?-1:1})}}else{if(Pu===-1&&(_u>=0?(Pu=0,this._setEndings(!0,this.repetitions===0,Ru)):this._setEndings(this.repetitions===0,!0,Ru)),$u>=Tu||$u<0){var Lu=Math.floor($u/Tu);$u-=Tu*Lu,Pu+=Math.abs(Lu);var Bu=this.repetitions-Pu;if(Bu<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,$u=_u>0?Tu:0,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u>0?1:-1});else{if(Bu===1){var Vu=_u<0;this._setEndings(Vu,!Vu,Ru)}else this._setEndings(!1,!1,Ru);this._loopCount=Pu,this.time=$u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Lu})}}else this.time=$u;if(Ru&&(Pu&1)===1)return Tu-$u}return $u},_setEndings:function(_u,$u,Tu){var Cu=this._interpolantSettings;Tu?(Cu.endingStart=ZeroSlopeEnding,Cu.endingEnd=ZeroSlopeEnding):(_u?Cu.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Cu.endingStart=WrapAroundEnding,$u?Cu.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Cu.endingEnd=WrapAroundEnding)},_scheduleFading:function(_u,$u,Tu){var Cu=this._mixer,Pu=Cu.time,Ru=this._weightInterpolant;Ru===null&&(Ru=Cu._lendControlInterpolant(),this._weightInterpolant=Ru);var Lu=Ru.parameterPositions,Bu=Ru.sampleValues;return Lu[0]=Pu,Bu[0]=$u,Lu[1]=Pu+_u,Bu[1]=Tu,this}});function AnimationMixer(_u){this._root=_u,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(_u,$u){var Tu=_u._localRoot||this._root,Cu=_u._clip.tracks,Pu=Cu.length,Ru=_u._propertyBindings,Lu=_u._interpolants,Bu=Tu.uuid,Vu=this._bindingsByRootAndName,Ou=Vu[Bu];Ou===void 0&&(Ou={},Vu[Bu]=Ou);for(var Du=0;Du!==Pu;++Du){var ku=Cu[Du],Fu=ku.name,Nu=Ou[Fu];if(Nu!==void 0)Ru[Du]=Nu;else{if(Nu=Ru[Du],Nu!==void 0){Nu._cacheIndex===null&&(++Nu.referenceCount,this._addInactiveBinding(Nu,Bu,Fu));continue}var Gu=$u&&$u._propertyBindings[Du].binding.parsedPath;Nu=new PropertyMixer(PropertyBinding.create(Tu,Fu,Gu),ku.ValueTypeName,ku.getValueSize()),++Nu.referenceCount,this._addInactiveBinding(Nu,Bu,Fu),Ru[Du]=Nu}Lu[Du].resultBuffer=Nu.buffer}},_activateAction:function(_u){if(!this._isActiveAction(_u)){if(_u._cacheIndex===null){var $u=(_u._localRoot||this._root).uuid,Tu=_u._clip.uuid,Cu=this._actionsByClip[Tu];this._bindAction(_u,Cu&&Cu.knownActions[0]),this._addInactiveAction(_u,Tu,$u)}for(var Pu=_u._propertyBindings,Ru=0,Lu=Pu.length;Ru!==Lu;++Ru){var Bu=Pu[Ru];Bu.useCount++===0&&(this._lendBinding(Bu),Bu.saveOriginalState())}this._lendAction(_u)}},_deactivateAction:function(_u){if(this._isActiveAction(_u)){for(var $u=_u._propertyBindings,Tu=0,Cu=$u.length;Tu!==Cu;++Tu){var Pu=$u[Tu];--Pu.useCount===0&&(Pu.restoreOriginalState(),this._takeBackBinding(Pu))}this._takeBackAction(_u)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var _u=this;this.stats={actions:{get total(){return _u._actions.length},get inUse(){return _u._nActiveActions}},bindings:{get total(){return _u._bindings.length},get inUse(){return _u._nActiveBindings}},controlInterpolants:{get total(){return _u._controlInterpolants.length},get inUse(){return _u._nActiveControlInterpolants}}}},_isActiveAction:function(_u){var $u=_u._cacheIndex;return $u!==null&&$u<this._nActiveActions},_addInactiveAction:function(_u,$u,Tu){var Cu=this._actions,Pu=this._actionsByClip,Ru=Pu[$u];if(Ru===void 0)Ru={knownActions:[_u],actionByRoot:{}},_u._byClipCacheIndex=0,Pu[$u]=Ru;else{var Lu=Ru.knownActions;_u._byClipCacheIndex=Lu.length,Lu.push(_u)}_u._cacheIndex=Cu.length,Cu.push(_u),Ru.actionByRoot[Tu]=_u},_removeInactiveAction:function(_u){var $u=this._actions,Tu=$u[$u.length-1],Cu=_u._cacheIndex;Tu._cacheIndex=Cu,$u[Cu]=Tu,$u.pop(),_u._cacheIndex=null;var Pu=_u._clip.uuid,Ru=this._actionsByClip,Lu=Ru[Pu],Bu=Lu.knownActions,Vu=Bu[Bu.length-1],Ou=_u._byClipCacheIndex;Vu._byClipCacheIndex=Ou,Bu[Ou]=Vu,Bu.pop(),_u._byClipCacheIndex=null;var Du=Lu.actionByRoot,ku=(_u._localRoot||this._root).uuid;delete Du[ku],Bu.length===0&&delete Ru[Pu],this._removeInactiveBindingsForAction(_u)},_removeInactiveBindingsForAction:function(_u){for(var $u=_u._propertyBindings,Tu=0,Cu=$u.length;Tu!==Cu;++Tu){var Pu=$u[Tu];--Pu.referenceCount===0&&this._removeInactiveBinding(Pu)}},_lendAction:function(_u){var $u=this._actions,Tu=_u._cacheIndex,Cu=this._nActiveActions++,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_takeBackAction:function(_u){var $u=this._actions,Tu=_u._cacheIndex,Cu=--this._nActiveActions,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_addInactiveBinding:function(_u,$u,Tu){var Cu=this._bindingsByRootAndName,Pu=Cu[$u],Ru=this._bindings;Pu===void 0&&(Pu={},Cu[$u]=Pu),Pu[Tu]=_u,_u._cacheIndex=Ru.length,Ru.push(_u)},_removeInactiveBinding:function(_u){var $u=this._bindings,Tu=_u.binding,Cu=Tu.rootNode.uuid,Pu=Tu.path,Ru=this._bindingsByRootAndName,Lu=Ru[Cu],Bu=$u[$u.length-1],Vu=_u._cacheIndex;Bu._cacheIndex=Vu,$u[Vu]=Bu,$u.pop(),delete Lu[Pu],Object.keys(Lu).length===0&&delete Ru[Cu]},_lendBinding:function(_u){var $u=this._bindings,Tu=_u._cacheIndex,Cu=this._nActiveBindings++,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_takeBackBinding:function(_u){var $u=this._bindings,Tu=_u._cacheIndex,Cu=--this._nActiveBindings,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_lendControlInterpolant:function(){var _u=this._controlInterpolants,$u=this._nActiveControlInterpolants++,Tu=_u[$u];return Tu===void 0&&(Tu=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Tu.__cacheIndex=$u,_u[$u]=Tu),Tu},_takeBackControlInterpolant:function(_u){var $u=this._controlInterpolants,Tu=_u.__cacheIndex,Cu=--this._nActiveControlInterpolants,Pu=$u[Cu];_u.__cacheIndex=Cu,$u[Cu]=_u,Pu.__cacheIndex=Tu,$u[Tu]=Pu},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(_u,$u,Tu){var Cu=$u||this._root,Pu=Cu.uuid,Ru=typeof _u=="string"?AnimationClip.findByName(Cu,_u):_u,Lu=Ru!==null?Ru.uuid:_u,Bu=this._actionsByClip[Lu],Vu=null;if(Tu===void 0&&(Ru!==null?Tu=Ru.blendMode:Tu=NormalAnimationBlendMode),Bu!==void 0){var Ou=Bu.actionByRoot[Pu];if(Ou!==void 0&&Ou.blendMode===Tu)return Ou;Vu=Bu.knownActions[0],Ru===null&&(Ru=Vu._clip)}if(Ru===null)return null;var Du=new AnimationAction(this,Ru,$u,Tu);return this._bindAction(Du,Vu),this._addInactiveAction(Du,Lu,Pu),Du},existingAction:function(_u,$u){var Tu=$u||this._root,Cu=Tu.uuid,Pu=typeof _u=="string"?AnimationClip.findByName(Tu,_u):_u,Ru=Pu?Pu.uuid:_u,Lu=this._actionsByClip[Ru];return Lu!==void 0&&Lu.actionByRoot[Cu]||null},stopAllAction:function(){for(var _u=this._actions,$u=this._nActiveActions,Tu=$u-1;Tu>=0;--Tu)_u[Tu].stop();return this},update:function(_u){_u*=this.timeScale;for(var $u=this._actions,Tu=this._nActiveActions,Cu=this.time+=_u,Pu=Math.sign(_u),Ru=this._accuIndex^=1,Lu=0;Lu!==Tu;++Lu){var Bu=$u[Lu];Bu._update(Cu,_u,Pu,Ru)}for(var Vu=this._bindings,Ou=this._nActiveBindings,Lu=0;Lu!==Ou;++Lu)Vu[Lu].apply(Ru);return this},setTime:function(_u){this.time=0;for(var $u=0;$u<this._actions.length;$u++)this._actions[$u].time=0;return this.update(_u)},getRoot:function(){return this._root},uncacheClip:function(_u){var $u=this._actions,Tu=_u.uuid,Cu=this._actionsByClip,Pu=Cu[Tu];if(Pu!==void 0){for(var Ru=Pu.knownActions,Lu=0,Bu=Ru.length;Lu!==Bu;++Lu){var Vu=Ru[Lu];this._deactivateAction(Vu);var Ou=Vu._cacheIndex,Du=$u[$u.length-1];Vu._cacheIndex=null,Vu._byClipCacheIndex=null,Du._cacheIndex=Ou,$u[Ou]=Du,$u.pop(),this._removeInactiveBindingsForAction(Vu)}delete Cu[Tu]}},uncacheRoot:function(_u){var $u=_u.uuid,Tu=this._actionsByClip;for(var Cu in Tu){var Pu=Tu[Cu].actionByRoot,Ru=Pu[$u];Ru!==void 0&&(this._deactivateAction(Ru),this._removeInactiveAction(Ru))}var Lu=this._bindingsByRootAndName,Bu=Lu[$u];if(Bu!==void 0)for(var Vu in Bu){var Ou=Bu[Vu];Ou.restoreOriginalState(),this._removeInactiveBinding(Ou)}},uncacheAction:function(_u,$u){var Tu=this.existingAction(_u,$u);Tu!==null&&(this._deactivateAction(Tu),this._removeInactiveAction(Tu))}});function Uniform(_u){typeof _u=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),_u=arguments[1]),this.value=_u}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(_u,$u,Tu){InterleavedBuffer.call(this,_u,$u),this.meshPerAttribute=Tu||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(_u){return InterleavedBuffer.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this}});function Raycaster(_u,$u,Tu,Cu){this.ray=new Ray(_u,$u),this.near=Tu||0,this.far=Cu||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(_u,$u){return _u.distance-$u.distance}function intersectObject(_u,$u,Tu,Cu){if(_u.layers.test($u.layers)&&_u.raycast($u,Tu),Cu===!0)for(var Pu=_u.children,Ru=0,Lu=Pu.length;Ru<Lu;Ru++)intersectObject(Pu[Ru],$u,Tu,!0)}Object.assign(Raycaster.prototype,{set:function(_u,$u){this.ray.set(_u,$u)},setFromCamera:function(_u,$u){$u&&$u.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition($u.matrixWorld),this.ray.direction.set(_u.x,_u.y,.5).unproject($u).sub(this.ray.origin).normalize(),this.camera=$u):$u&&$u.isOrthographicCamera?(this.ray.origin.set(_u.x,_u.y,($u.near+$u.far)/($u.near-$u.far)).unproject($u),this.ray.direction.set(0,0,-1).transformDirection($u.matrixWorld),this.camera=$u):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(_u,$u,Tu){var Cu=Tu||[];return intersectObject(_u,this,Cu,$u),Cu.sort(ascSort),Cu},intersectObjects:function(_u,$u,Tu){var Cu=Tu||[];if(Array.isArray(_u)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Cu;for(var Pu=0,Ru=_u.length;Pu<Ru;Pu++)intersectObject(_u[Pu],this,Cu,$u);return Cu.sort(ascSort),Cu}});function Spherical(_u,$u,Tu){return this.radius=_u!==void 0?_u:1,this.phi=$u!==void 0?$u:0,this.theta=Tu!==void 0?Tu:0,this}Object.assign(Spherical.prototype,{set:function(_u,$u,Tu){return this.radius=_u,this.phi=$u,this.theta=Tu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.phi=_u.phi,this.theta=_u.theta,this},makeSafe:function(){var _u=1e-6;return this.phi=Math.max(_u,Math.min(Math.PI-_u,this.phi)),this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Tu){return this.radius=Math.sqrt(_u*_u+$u*$u+Tu*Tu),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_u,Tu),this.phi=Math.acos(MathUtils.clamp($u/this.radius,-1,1))),this}});function Cylindrical(_u,$u,Tu){return this.radius=_u!==void 0?_u:1,this.theta=$u!==void 0?$u:0,this.y=Tu!==void 0?Tu:0,this}Object.assign(Cylindrical.prototype,{set:function(_u,$u,Tu){return this.radius=_u,this.theta=$u,this.y=Tu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.theta=_u.theta,this.y=_u.y,this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Tu){return this.radius=Math.sqrt(_u*_u+Tu*Tu),this.theta=Math.atan2(_u,Tu),this.y=$u,this}});var _vector$7=new Vector2;function Box2(_u,$u){this.min=_u!==void 0?_u:new Vector2(1/0,1/0),this.max=$u!==void 0?$u:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Tu=_u.length;$u<Tu;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Tu=_vector$7.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Tu),this.max.copy(_u).add(Tu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),$u=new Vector2),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y)},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),$u=new Vector2),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$7.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(_u,$u){this.start=_u!==void 0?_u:new Vector3,this.end=$u!==void 0?$u:new Vector3}Object.assign(Line3.prototype,{set:function(_u,$u){return this.start.copy(_u),this.end.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.start.copy(_u.start),this.end.copy(_u.end),this},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),_u=new Vector3),_u.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),_u=new Vector3),_u.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Line3: .at() target is now required"),$u=new Vector3),this.delta($u).multiplyScalar(_u).add(this.start)},closestPointToPointParameter:function(_u,$u){_startP.subVectors(_u,this.start),_startEnd.subVectors(this.end,this.start);var Tu=_startEnd.dot(_startEnd),Cu=_startEnd.dot(_startP),Pu=Cu/Tu;return $u&&(Pu=MathUtils.clamp(Pu,0,1)),Pu},closestPointToPoint:function(_u,$u,Tu){var Cu=this.closestPointToPointParameter(_u,$u);return Tu===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),Tu=new Vector3),this.delta(Tu).multiplyScalar(Cu).add(this.start)},applyMatrix4:function(_u){return this.start.applyMatrix4(_u),this.end.applyMatrix4(_u),this},equals:function(_u){return _u.start.equals(this.start)&&_u.end.equals(this.end)}});function ImmediateRenderObject(_u){Object3D.call(this),this.material=_u,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(_u,$u){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=$u;for(var Tu=new BufferGeometry,Cu=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Pu=0,Ru=1,Lu=32;Pu<Lu;Pu++,Ru++){var Bu=Pu/Lu*Math.PI*2,Vu=Ru/Lu*Math.PI*2;Cu.push(Math.cos(Bu),Math.sin(Bu),1,Math.cos(Vu),Math.sin(Vu),1)}Tu.setAttribute("position",new Float32BufferAttribute(Cu,3));var Ou=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Tu,Ou),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var _u=this.light.distance?this.light.distance:1e3,$u=_u*Math.tan(this.light.angle);this.cone.scale.set($u,$u,_u),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(_u){var $u=[];_u&&_u.isBone&&$u.push(_u);for(var Tu=0;Tu<_u.children.length;Tu++)$u.push.apply($u,getBoneList(_u.children[Tu]));return $u}function SkeletonHelper(_u){for(var $u=getBoneList(_u),Tu=new BufferGeometry,Cu=[],Pu=[],Ru=new Color(0,0,1),Lu=new Color(0,1,0),Bu=0;Bu<$u.length;Bu++){var Vu=$u[Bu];Vu.parent&&Vu.parent.isBone&&(Cu.push(0,0,0),Cu.push(0,0,0),Pu.push(Ru.r,Ru.g,Ru.b),Pu.push(Lu.r,Lu.g,Lu.b))}Tu.setAttribute("position",new Float32BufferAttribute(Cu,3)),Tu.setAttribute("color",new Float32BufferAttribute(Pu,3));var Ou=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,Tu,Ou),this.type="SkeletonHelper",this.root=_u,this.bones=$u,this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(_u){var $u=this.bones,Tu=this.geometry,Cu=Tu.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Pu=0,Ru=0;Pu<$u.length;Pu++){var Lu=$u[Pu];Lu.parent&&Lu.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Lu.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Cu.setXYZ(Ru,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Lu.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Cu.setXYZ(Ru+1,_vector$9.x,_vector$9.y,_vector$9.z),Ru+=2)}Tu.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,_u)};function PointLightHelper(_u,$u,Tu){this.light=_u,this.light.updateMatrixWorld(),this.color=Tu;var Cu=new SphereBufferGeometry($u,4,2),Pu=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Cu,Pu),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(_u,$u,Tu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Tu;var Cu=new OctahedronBufferGeometry($u);Cu.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Pu=Cu.getAttribute("position"),Ru=new Float32Array(Pu.count*3);Cu.setAttribute("color",new BufferAttribute(Ru,3)),this.add(new Mesh(Cu,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var _u=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var $u=_u.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var Tu=0,Cu=$u.count;Tu<Cu;Tu++){var Pu=Tu<Cu/2?_color1:_color2;$u.setXYZ(Tu,Pu.r,Pu.g,Pu.b)}$u.needsUpdate=!0}_u.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(_u,$u,Tu,Cu){_u=_u||10,$u=$u||10,Tu=new Color(Tu!==void 0?Tu:4473924),Cu=new Color(Cu!==void 0?Cu:8947848);for(var Pu=$u/2,Ru=_u/$u,Lu=_u/2,Bu=[],Vu=[],Ou=0,Du=0,ku=-Lu;Ou<=$u;Ou++,ku+=Ru){Bu.push(-Lu,0,ku,Lu,0,ku),Bu.push(ku,0,-Lu,ku,0,Lu);var Fu=Ou===Pu?Tu:Cu;Fu.toArray(Vu,Du),Du+=3,Fu.toArray(Vu,Du),Du+=3,Fu.toArray(Vu,Du),Du+=3,Fu.toArray(Vu,Du),Du+=3}var Nu=new BufferGeometry;Nu.setAttribute("position",new Float32BufferAttribute(Bu,3)),Nu.setAttribute("color",new Float32BufferAttribute(Vu,3));var Gu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Nu,Gu),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(_u){return LineSegments.prototype.copy.call(this,_u),this.geometry.copy(_u.geometry),this.material.copy(_u.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(_u,$u,Tu,Cu,Pu,Ru){_u=_u||10,$u=$u||16,Tu=Tu||8,Cu=Cu||64,Pu=new Color(Pu!==void 0?Pu:4473924),Ru=new Color(Ru!==void 0?Ru:8947848);var Lu=[],Bu=[],Vu,Ou,Du,ku,Fu,Nu,Gu;for(ku=0;ku<=$u;ku++)Du=ku/$u*(Math.PI*2),Vu=Math.sin(Du)*_u,Ou=Math.cos(Du)*_u,Lu.push(0,0,0),Lu.push(Vu,0,Ou),Gu=ku&1?Pu:Ru,Bu.push(Gu.r,Gu.g,Gu.b),Bu.push(Gu.r,Gu.g,Gu.b);for(ku=0;ku<=Tu;ku++)for(Gu=ku&1?Pu:Ru,Nu=_u-_u/Tu*ku,Fu=0;Fu<Cu;Fu++)Du=Fu/Cu*(Math.PI*2),Vu=Math.sin(Du)*Nu,Ou=Math.cos(Du)*Nu,Lu.push(Vu,0,Ou),Bu.push(Gu.r,Gu.g,Gu.b),Du=(Fu+1)/Cu*(Math.PI*2),Vu=Math.sin(Du)*Nu,Ou=Math.cos(Du)*Nu,Lu.push(Vu,0,Ou),Bu.push(Gu.r,Gu.g,Gu.b);var zu=new BufferGeometry;zu.setAttribute("position",new Float32BufferAttribute(Lu,3)),zu.setAttribute("color",new Float32BufferAttribute(Bu,3));var Hu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,zu,Hu),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(_u,$u,Tu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Tu,$u===void 0&&($u=1);var Cu=new BufferGeometry;Cu.setAttribute("position",new Float32BufferAttribute([-$u,$u,0,$u,$u,0,$u,-$u,0,-$u,-$u,0,-$u,$u,0],3));var Pu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Cu,Pu),this.add(this.lightPlane),Cu=new BufferGeometry,Cu.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Cu,Pu),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(_u){var $u=new BufferGeometry,Tu=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Cu=[],Pu=[],Ru={},Lu=new Color(16755200),Bu=new Color(16711680),Vu=new Color(43775),Ou=new Color(16777215),Du=new Color(3355443);ku("n1","n2",Lu),ku("n2","n4",Lu),ku("n4","n3",Lu),ku("n3","n1",Lu),ku("f1","f2",Lu),ku("f2","f4",Lu),ku("f4","f3",Lu),ku("f3","f1",Lu),ku("n1","f1",Lu),ku("n2","f2",Lu),ku("n3","f3",Lu),ku("n4","f4",Lu),ku("p","n1",Bu),ku("p","n2",Bu),ku("p","n3",Bu),ku("p","n4",Bu),ku("u1","u2",Vu),ku("u2","u3",Vu),ku("u3","u1",Vu),ku("c","t",Ou),ku("p","c",Du),ku("cn1","cn2",Du),ku("cn3","cn4",Du),ku("cf1","cf2",Du),ku("cf3","cf4",Du);function ku(Nu,Gu,zu){Fu(Nu,zu),Fu(Gu,zu)}function Fu(Nu,Gu){Cu.push(0,0,0),Pu.push(Gu.r,Gu.g,Gu.b),Ru[Nu]===void 0&&(Ru[Nu]=[]),Ru[Nu].push(Cu.length/3-1)}$u.setAttribute("position",new Float32BufferAttribute(Cu,3)),$u.setAttribute("color",new Float32BufferAttribute(Pu,3)),LineSegments.call(this,$u,Tu),this.type="CameraHelper",this.camera=_u,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ru,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var _u=this.geometry,$u=this.pointMap,Tu=1,Cu=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",$u,_u,_camera,0,0,-1),setPoint("t",$u,_u,_camera,0,0,1),setPoint("n1",$u,_u,_camera,-Tu,-Cu,-1),setPoint("n2",$u,_u,_camera,Tu,-Cu,-1),setPoint("n3",$u,_u,_camera,-Tu,Cu,-1),setPoint("n4",$u,_u,_camera,Tu,Cu,-1),setPoint("f1",$u,_u,_camera,-Tu,-Cu,1),setPoint("f2",$u,_u,_camera,Tu,-Cu,1),setPoint("f3",$u,_u,_camera,-Tu,Cu,1),setPoint("f4",$u,_u,_camera,Tu,Cu,1),setPoint("u1",$u,_u,_camera,Tu*.7,Cu*1.1,-1),setPoint("u2",$u,_u,_camera,-Tu*.7,Cu*1.1,-1),setPoint("u3",$u,_u,_camera,0,Cu*2,-1),setPoint("cf1",$u,_u,_camera,-Tu,0,1),setPoint("cf2",$u,_u,_camera,Tu,0,1),setPoint("cf3",$u,_u,_camera,0,-Cu,1),setPoint("cf4",$u,_u,_camera,0,Cu,1),setPoint("cn1",$u,_u,_camera,-Tu,0,-1),setPoint("cn2",$u,_u,_camera,Tu,0,-1),setPoint("cn3",$u,_u,_camera,0,-Cu,-1),setPoint("cn4",$u,_u,_camera,0,Cu,-1),_u.getAttribute("position").needsUpdate=!0};function setPoint(_u,$u,Tu,Cu,Pu,Ru,Lu){_vector$b.set(Pu,Ru,Lu).unproject(Cu);var Bu=$u[_u];if(Bu!==void 0)for(var Vu=Tu.getAttribute("position"),Ou=0,Du=Bu.length;Ou<Du;Ou++)Vu.setXYZ(Bu[Ou],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(_u,$u){this.object=_u,$u===void 0&&($u=16776960);var Tu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Cu=new Float32Array(8*3),Pu=new BufferGeometry;Pu.setIndex(new BufferAttribute(Tu,1)),Pu.setAttribute("position",new BufferAttribute(Cu,3)),LineSegments.call(this,Pu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(_u){if(_u!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var $u=_box$3.min,Tu=_box$3.max,Cu=this.geometry.attributes.position,Pu=Cu.array;Pu[0]=Tu.x,Pu[1]=Tu.y,Pu[2]=Tu.z,Pu[3]=$u.x,Pu[4]=Tu.y,Pu[5]=Tu.z,Pu[6]=$u.x,Pu[7]=$u.y,Pu[8]=Tu.z,Pu[9]=Tu.x,Pu[10]=$u.y,Pu[11]=Tu.z,Pu[12]=Tu.x,Pu[13]=Tu.y,Pu[14]=$u.z,Pu[15]=$u.x,Pu[16]=Tu.y,Pu[17]=$u.z,Pu[18]=$u.x,Pu[19]=$u.y,Pu[20]=$u.z,Pu[21]=Tu.x,Pu[22]=$u.y,Pu[23]=$u.z,Cu.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(_u){return this.object=_u,this.update(),this};BoxHelper.prototype.copy=function(_u){return LineSegments.prototype.copy.call(this,_u),this.object=_u.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(_u,$u){this.type="Box3Helper",this.box=_u,$u=$u||16776960;var Tu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Cu=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Pu=new BufferGeometry;Pu.setIndex(new BufferAttribute(Tu,1)),Pu.setAttribute("position",new Float32BufferAttribute(Cu,3)),LineSegments.call(this,Pu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(_u){var $u=this.box;$u.isEmpty()||($u.getCenter(this.position),$u.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,_u))};function PlaneHelper(_u,$u,Tu){this.plane=_u,this.size=$u===void 0?1:$u;var Cu=Tu!==void 0?Tu:16776960,Pu=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Ru=new BufferGeometry;Ru.setAttribute("position",new Float32BufferAttribute(Pu,3)),Ru.computeBoundingSphere(),Line$1.call(this,Ru,new LineBasicMaterial({color:Cu,toneMapped:!1})),this.type="PlaneHelper";var Lu=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Bu=new BufferGeometry;Bu.setAttribute("position",new Float32BufferAttribute(Lu,3)),Bu.computeBoundingSphere(),this.add(new Mesh(Bu,new MeshBasicMaterial({color:Cu,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(_u){var $u=-this.plane.constant;Math.abs($u)<1e-8&&($u=1e-8),this.scale.set(.5*this.size,.5*this.size,$u),this.children[0].material.side=$u<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,_u)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(_u,$u,Tu,Cu,Pu,Ru){Object3D.call(this),this.type="ArrowHelper",_u===void 0&&(_u=new Vector3(0,0,1)),$u===void 0&&($u=new Vector3(0,0,0)),Tu===void 0&&(Tu=1),Cu===void 0&&(Cu=16776960),Pu===void 0&&(Pu=.2*Tu),Ru===void 0&&(Ru=.2*Pu),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy($u),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Cu,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Cu,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_u),this.setLength(Tu,Pu,Ru)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(_u){if(_u.y>.99999)this.quaternion.set(0,0,0,1);else if(_u.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_u.z,0,-_u.x).normalize();var $u=Math.acos(_u.y);this.quaternion.setFromAxisAngle(_axis,$u)}};ArrowHelper.prototype.setLength=function(_u,$u,Tu){$u===void 0&&($u=.2*_u),Tu===void 0&&(Tu=.2*$u),this.line.scale.set(1,Math.max(1e-4,_u-$u),1),this.line.updateMatrix(),this.cone.scale.set(Tu,$u,Tu),this.cone.position.y=_u,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(_u){this.line.material.color.set(_u),this.cone.material.color.set(_u)};ArrowHelper.prototype.copy=function(_u){return Object3D.prototype.copy.call(this,_u,!1),this.line.copy(_u.line),this.cone.copy(_u.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(_u){_u=_u||1;var $u=[0,0,0,_u,0,0,0,0,0,0,_u,0,0,0,0,0,0,_u],Tu=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Cu=new BufferGeometry;Cu.setAttribute("position",new Float32BufferAttribute($u,3)),Cu.setAttribute("color",new Float32BufferAttribute(Tu,3));var Pu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Cu,Pu),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(_u){this._renderer=_u,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(_u,$u=0,Tu=.1,Cu=100){_oldTarget=this._renderer.getRenderTarget();var Pu=this._allocateTargets();return this._sceneToCubeUV(_u,Tu,Cu,Pu),$u>0&&this._blur(Pu,0,0,$u),this._applyPMREM(Pu),this._cleanup(Pu),Pu},fromEquirectangular:function(_u){return _u.magFilter=NearestFilter,_u.minFilter=NearestFilter,_u.generateMipmaps=!1,this.fromCubemap(_u)},fromCubemap:function(_u){_oldTarget=this._renderer.getRenderTarget();var $u=this._allocateTargets(_u);return this._textureToCubeUV(_u,$u),this._applyPMREM($u),this._cleanup($u),$u},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var _u=0;_u<_lodPlanes.length;_u++)_lodPlanes[_u].dispose()},_cleanup:function(_u){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),_u.scissorTest=!1,_u.setSize(_u.width,_u.height)},_allocateTargets:function(_u){var $u={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(_u)?_u.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},Tu=_createRenderTarget($u);return Tu.depthBuffer=!_u,this._pingPongRenderTarget=_createRenderTarget($u),Tu},_compileMaterial:function(_u){var $u=new Mesh(_lodPlanes[0],_u);this._renderer.compile($u,_flatCamera)},_sceneToCubeUV:function(_u,$u,Tu,Cu){var Pu=90,Ru=1,Lu=new PerspectiveCamera(Pu,Ru,$u,Tu),Bu=[1,-1,1,1,1,1],Vu=[1,1,1,-1,-1,-1],Ou=this._renderer,Du=Ou.outputEncoding,ku=Ou.toneMapping,Fu=Ou.toneMappingExposure,Nu=Ou.getClearColor(),Gu=Ou.getClearAlpha();Ou.toneMapping=LinearToneMapping,Ou.toneMappingExposure=1,Ou.outputEncoding=LinearEncoding;var zu=_u.background;if(zu&&zu.isColor){zu.convertSRGBToLinear();var Hu=Math.max(zu.r,zu.g,zu.b),Uu=Math.min(Math.max(Math.ceil(Math.log2(Hu)),-128),127);zu=zu.multiplyScalar(Math.pow(2,-Uu));var ju=(Uu+128)/255;Ou.setClearColor(zu,ju),_u.background=null}for(var Wu=0;Wu<6;Wu++){var Qu=Wu%3;Qu==0?(Lu.up.set(0,Bu[Wu],0),Lu.lookAt(Vu[Wu],0,0)):Qu==1?(Lu.up.set(0,0,Bu[Wu]),Lu.lookAt(0,Vu[Wu],0)):(Lu.up.set(0,Bu[Wu],0),Lu.lookAt(0,0,Vu[Wu])),_setViewport(Cu,Qu*SIZE_MAX,Wu>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Ou.setRenderTarget(Cu),Ou.render(_u,Lu)}Ou.toneMapping=ku,Ou.toneMappingExposure=Fu,Ou.outputEncoding=Du,Ou.setClearColor(Nu,Gu)},_textureToCubeUV:function(_u,$u){var Tu=this._renderer;_u.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Cu=_u.isCubeTexture?this._cubemapShader:this._equirectShader,Pu=new Mesh(_lodPlanes[0],Cu),Ru=Cu.uniforms;Ru.envMap.value=_u,_u.isCubeTexture||Ru.texelSize.value.set(1/_u.image.width,1/_u.image.height),Ru.inputEncoding.value=ENCODINGS[_u.encoding],Ru.outputEncoding.value=ENCODINGS[$u.texture.encoding],_setViewport($u,0,0,3*SIZE_MAX,2*SIZE_MAX),Tu.setRenderTarget($u),Tu.render(Pu,_flatCamera)},_applyPMREM:function(_u){var $u=this._renderer,Tu=$u.autoClear;$u.autoClear=!1;for(var Cu=1;Cu<TOTAL_LODS;Cu++){var Pu=Math.sqrt(_sigmas[Cu]*_sigmas[Cu]-_sigmas[Cu-1]*_sigmas[Cu-1]),Ru=_axisDirections[(Cu-1)%_axisDirections.length];this._blur(_u,Cu-1,Cu,Pu,Ru)}$u.autoClear=Tu},_blur:function(_u,$u,Tu,Cu,Pu){var Ru=this._pingPongRenderTarget;this._halfBlur(_u,Ru,$u,Tu,Cu,"latitudinal",Pu),this._halfBlur(Ru,_u,Tu,Tu,Cu,"longitudinal",Pu)},_halfBlur:function(_u,$u,Tu,Cu,Pu,Ru,Lu){var Bu=this._renderer,Vu=this._blurMaterial;Ru!=="latitudinal"&&Ru!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Ou=3,Du=new Mesh(_lodPlanes[Cu],Vu),ku=Vu.uniforms,Fu=_sizeLods[Tu]-1,Nu=isFinite(Pu)?Math.PI/(2*Fu):2*Math.PI/(2*MAX_SAMPLES-1),Gu=Pu/Nu,zu=isFinite(Pu)?1+Math.floor(Ou*Gu):MAX_SAMPLES;zu>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Pu}, is too large and will clip, as it requested ${zu} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Hu=[],Uu=0,ju=0;ju<MAX_SAMPLES;++ju){var qu=ju/Gu,Wu=Math.exp(-qu*qu/2);Hu.push(Wu),ju==0?Uu+=Wu:ju<zu&&(Uu+=2*Wu)}for(var ju=0;ju<Hu.length;ju++)Hu[ju]=Hu[ju]/Uu;ku.envMap.value=_u.texture,ku.samples.value=zu,ku.weights.value=Hu,ku.latitudinal.value=Ru==="latitudinal",Lu&&(ku.poleAxis.value=Lu),ku.dTheta.value=Nu,ku.mipInt.value=LOD_MAX-Tu,ku.inputEncoding.value=ENCODINGS[_u.texture.encoding],ku.outputEncoding.value=ENCODINGS[_u.texture.encoding];var Qu=_sizeLods[Cu],qu=3*Math.max(0,SIZE_MAX-2*Qu),Yu=(Cu===0?0:2*SIZE_MAX)+2*Qu*(Cu>LOD_MAX-LOD_MIN?Cu-LOD_MAX+LOD_MIN:0);_setViewport($u,qu,Yu,3*Qu,2*Qu),Bu.setRenderTarget($u),Bu.render(Du,_flatCamera)}};function _isLDR(_u){return _u===void 0||_u.type!==UnsignedByteType?!1:_u.encoding===LinearEncoding||_u.encoding===sRGBEncoding||_u.encoding===GammaEncoding}function _createPlanes(){for(var _u=[],$u=[],Tu=[],Cu=LOD_MAX,Pu=0;Pu<TOTAL_LODS;Pu++){var Ru=Math.pow(2,Cu);$u.push(Ru);var Lu=1/Ru;Pu>LOD_MAX-LOD_MIN?Lu=EXTRA_LOD_SIGMA[Pu-LOD_MAX+LOD_MIN-1]:Pu==0&&(Lu=0),Tu.push(Lu);for(var Bu=1/(Ru-1),Vu=-Bu/2,Ou=1+Bu/2,Du=[Vu,Vu,Ou,Vu,Ou,Ou,Vu,Vu,Ou,Ou,Vu,Ou],ku=6,Fu=6,Nu=3,Gu=2,zu=1,Hu=new Float32Array(Nu*Fu*ku),Uu=new Float32Array(Gu*Fu*ku),ju=new Float32Array(zu*Fu*ku),Wu=0;Wu<ku;Wu++){var Qu=Wu%3*2/3-1,qu=Wu>2?0:-1,Yu=[Qu,qu,0,Qu+2/3,qu,0,Qu+2/3,qu+1,0,Qu,qu,0,Qu+2/3,qu+1,0,Qu,qu+1,0];Hu.set(Yu,Nu*Fu*Wu),Uu.set(Du,Gu*Fu*Wu);var Ju=[Wu,Wu,Wu,Wu,Wu,Wu];ju.set(Ju,zu*Fu*Wu)}var _d=new BufferGeometry;_d.setAttribute("position",new BufferAttribute(Hu,Nu)),_d.setAttribute("uv",new BufferAttribute(Uu,Gu)),_d.setAttribute("faceIndex",new BufferAttribute(ju,zu)),_u.push(_d),Cu>LOD_MIN&&Cu--}return{_lodPlanes:_u,_sizeLods:$u,_sigmas:Tu}}function _createRenderTarget(_u){var $u=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,_u);return $u.texture.mapping=CubeUVReflectionMapping,$u.texture.name="PMREM.cubeUv",$u.scissorTest=!0,$u}function _setViewport(_u,$u,Tu,Cu,Pu){_u.viewport.set($u,Tu,Cu,Pu),_u.scissor.set($u,Tu,Cu,Pu)}function _getBlurShader(_u){var $u=new Float32Array(_u),Tu=new Vector3(0,1,0),Cu=new RawShaderMaterial({defines:{n:_u},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:$u},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Tu},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Cu.type="SphericalGaussianBlur",Cu}function _getEquirectShader(){var _u=new Vector2(1,1),$u=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:_u},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return $u.type="EquirectangularToCubeUV",$u}function _getCubemapShader(){var _u=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _u.type="CubemapToCubeUV",_u}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(_u,$u,Tu,Cu,Pu,Ru,Lu){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(_u,$u,Tu,Pu,Ru,Lu)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(_u){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),_u}function MultiMaterial(_u){return _u===void 0&&(_u=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),_u.isMultiMaterial=!0,_u.materials=_u,_u.clone=function(){return _u.slice()},_u}function PointCloud(_u,$u){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(_u,$u)}function Particle(_u){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(_u)}function ParticleSystem(_u,$u){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(_u,$u)}function PointCloudMaterial(_u){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleBasicMaterial(_u){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleSystemMaterial(_u){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function Vertex(_u,$u,Tu){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(_u,$u,Tu)}function DynamicBufferAttribute(_u,$u){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(_u,$u).setUsage(DynamicDrawUsage)}function Int8Attribute(_u,$u){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(_u,$u)}function Uint8Attribute(_u,$u){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(_u,$u)}function Uint8ClampedAttribute(_u,$u){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(_u,$u)}function Int16Attribute(_u,$u){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(_u,$u)}function Uint16Attribute(_u,$u){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(_u,$u)}function Int32Attribute(_u,$u){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(_u,$u)}function Uint32Attribute(_u,$u){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(_u,$u)}function Float32Attribute(_u,$u){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(_u,$u)}function Float64Attribute(_u,$u){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(_u,$u)}Curve.create=function(_u,$u){return console.log("THREE.Curve.create() has been deprecated"),_u.prototype=Object.create(Curve.prototype),_u.prototype.constructor=_u,_u.prototype.getPoint=$u,_u};Object.assign(CurvePath.prototype,{createPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getPoints(_u);return this.createGeometry($u)},createSpacedPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getSpacedPoints(_u);return this.createGeometry($u)},createGeometry:function(_u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var $u=new Geometry,Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=_u[Tu];$u.vertices.push(new Vector3(Pu.x,Pu.y,Pu.z||0))}return $u}});Object.assign(Path.prototype,{fromPoints:function(_u){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(_u)}});function ClosedSplineCurve3(_u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(_u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(_u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(_u){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(_u)}function BoundingBoxHelper(_u,$u){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(_u,$u)}function EdgesHelper(_u,$u){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(_u,$u){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(_u){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(_u)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(_u){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(_u)}function BinaryTextureLoader(_u){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(_u)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(_u){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(_u)}});Object.assign(Box2.prototype,{center:function(_u){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},size:function(_u){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Box3.prototype,{center:function(_u){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)},size:function(_u){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(_u){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(_u)};Line3.prototype.center=function(_u){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(_u)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(_u){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(_u)},nextPowerOfTwo:function(_u){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(_u)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},multiplyVector3:function(_u){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(_u){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(_u)},flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(_u){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(_u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(_u){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector4:function(_u){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(_u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),_u.transformDirection(this)},crossVector:function(_u){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(_u,$u,Tu,Cu,Pu,Ru){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(_u,$u,Cu,Tu,Pu,Ru)}});Plane.prototype.isIntersectionLine=function(_u){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(_u)};Quaternion.prototype.multiplyVector3=function(_u){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),_u.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(_u){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionPlane:function(_u){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(_u,$u){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(_u,$u)},midpoint:function(_u){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(_u)},normal:function(_u){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(_u)},plane:function(_u){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(_u)}});Object.assign(Triangle,{barycoordFromPoint:function(_u,$u,Tu,Cu,Pu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(_u,$u,Tu,Cu,Pu)},normal:function(_u,$u,Tu,Cu){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(_u,$u,Tu,Cu)}});Object.assign(Shape.prototype,{extractAllPoints:function(_u){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(_u)},extrude:function(_u){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,_u)},makeGeometry:function(_u){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,_u)}});Object.assign(Vector2.prototype,{fromAttribute:function(_u,$u,Tu){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Tu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(_u){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(_u)},getScaleFromMatrix:function(_u){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(_u)},getColumnFromMatrix:function(_u,$u){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn($u,_u)},applyProjection:function(_u){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(_u)},fromAttribute:function(_u,$u,Tu){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Tu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(_u,$u,Tu){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Tu)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(_u){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.assign(Object3D.prototype,{getChildByName:function(_u){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(_u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(_u,$u){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis($u,_u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(_u){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(_u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=_u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(_u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=_u}});PerspectiveCamera.prototype.setLens=function(_u,$u){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),$u!==void 0&&(this.filmGauge=$u),this.setFocalLength(_u)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(_u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=_u}},shadowCameraLeft:{set:function(_u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=_u}},shadowCameraRight:{set:function(_u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=_u}},shadowCameraTop:{set:function(_u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=_u}},shadowCameraBottom:{set:function(_u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=_u}},shadowCameraNear:{set:function(_u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=_u}},shadowCameraFar:{set:function(_u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=_u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(_u){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=_u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(_u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=_u}},shadowMapHeight:{set:function(_u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=_u}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(_u){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(_u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(_u)},addAttribute:function(_u,$u){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!($u&&$u.isBufferAttribute)&&!($u&&$u.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(_u,new BufferAttribute(arguments[1],arguments[2]))):_u==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex($u),this):this.setAttribute(_u,$u)},addDrawCall:function(_u,$u,Tu){Tu!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(_u,$u)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(_u){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(_u)},applyMatrix:function(_u){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(_u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=_u}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(_u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=_u}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(_u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(_u)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(_u){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(_u){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_u===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(_u){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=_u}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(_u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=_u}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(_u,$u,Tu,Cu){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(_u),this.clear($u,Tu,Cu)},animate:function(_u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(_u)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(_u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(_u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=_u}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=_u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(_u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=_u===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(_u,$u,Tu){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(_u,Tu)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=_u}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=_u}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=_u}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=_u}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(_u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=_u}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(_u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=_u}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(_u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=_u}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(_u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=_u}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(_u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=_u}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(_u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=_u}}});Object.defineProperties(Audio$1.prototype,{load:{value:function(_u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var $u=this,Tu=new AudioLoader;return Tu.load(_u,function(Cu){$u.setBuffer(Cu)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(_u,$u){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(_u,$u)};var GeometryUtils={merge:function(_u,$u,Tu){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Cu;$u.isMesh&&($u.matrixAutoUpdate&&$u.updateMatrix(),Cu=$u.matrix,$u=$u.geometry),_u.merge($u,Cu,Tu)},center:function(_u){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),_u.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(_u,$u,Tu,Cu){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Pu=new TextureLoader;Pu.setCrossOrigin(this.crossOrigin);var Ru=Pu.load(_u,Tu,void 0,Cu);return $u&&(Ru.mapping=$u),Ru};ImageUtils.loadTextureCube=function(_u,$u,Tu,Cu){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Pu=new CubeTextureLoader;Pu.setCrossOrigin(this.crossOrigin);var Ru=Pu.load(_u,Tu,void 0,Cu);return $u&&(Ru.mapping=$u),Ru};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var Ce$2=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(Ce$2),tslib={exports:{}};(function(_u){var $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Uu,ju,Wu,Qu,qu,Yu,Ju,_d,tp;(function(Ku){var Xu=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Ku(Zu(Xu,Zu(_u.exports)));function Zu(_c,Xc){return _c!==Xu&&(typeof Object.create=="function"?Object.defineProperty(_c,"__esModule",{value:!0}):_c.__esModule=!0),function(_h,ip){return _c[_h]=Xc?Xc(_h,ip):ip}}})(function(Ku){var Xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_c,Xc){_c.__proto__=Xc}||function(_c,Xc){for(var _h in Xc)Object.prototype.hasOwnProperty.call(Xc,_h)&&(_c[_h]=Xc[_h])};$u=function(_c,Xc){if(typeof Xc!="function"&&Xc!==null)throw new TypeError("Class extends value "+String(Xc)+" is not a constructor or null");Xu(_c,Xc);function _h(){this.constructor=_c}_c.prototype=Xc===null?Object.create(Xc):(_h.prototype=Xc.prototype,new _h)},Tu=Object.assign||function(_c){for(var Xc,_h=1,ip=arguments.length;_h<ip;_h++){Xc=arguments[_h];for(var ap in Xc)Object.prototype.hasOwnProperty.call(Xc,ap)&&(_c[ap]=Xc[ap])}return _c},Cu=function(_c,Xc){var _h={};for(var ip in _c)Object.prototype.hasOwnProperty.call(_c,ip)&&Xc.indexOf(ip)<0&&(_h[ip]=_c[ip]);if(_c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ap=0,ip=Object.getOwnPropertySymbols(_c);ap<ip.length;ap++)Xc.indexOf(ip[ap])<0&&Object.prototype.propertyIsEnumerable.call(_c,ip[ap])&&(_h[ip[ap]]=_c[ip[ap]]);return _h},Pu=function(_c,Xc,_h,ip){var ap=arguments.length,hp=ap<3?Xc:ip===null?ip=Object.getOwnPropertyDescriptor(Xc,_h):ip,Ap;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")hp=Reflect.decorate(_c,Xc,_h,ip);else for(var gp=_c.length-1;gp>=0;gp--)(Ap=_c[gp])&&(hp=(ap<3?Ap(hp):ap>3?Ap(Xc,_h,hp):Ap(Xc,_h))||hp);return ap>3&&hp&&Object.defineProperty(Xc,_h,hp),hp},Ru=function(_c,Xc){return function(_h,ip){Xc(_h,ip,_c)}},Lu=function(_c,Xc){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(_c,Xc)},Bu=function(_c,Xc,_h,ip){function ap(hp){return hp instanceof _h?hp:new _h(function(Ap){Ap(hp)})}return new(_h||(_h=Promise))(function(hp,Ap){function gp(Dp){try{Sp(ip.next(Dp))}catch(Ep){Ap(Ep)}}function Rp(Dp){try{Sp(ip.throw(Dp))}catch(Ep){Ap(Ep)}}function Sp(Dp){Dp.done?hp(Dp.value):ap(Dp.value).then(gp,Rp)}Sp((ip=ip.apply(_c,Xc||[])).next())})},Vu=function(_c,Xc){var _h={label:0,sent:function(){if(hp[0]&1)throw hp[1];return hp[1]},trys:[],ops:[]},ip,ap,hp,Ap;return Ap={next:gp(0),throw:gp(1),return:gp(2)},typeof Symbol=="function"&&(Ap[Symbol.iterator]=function(){return this}),Ap;function gp(Sp){return function(Dp){return Rp([Sp,Dp])}}function Rp(Sp){if(ip)throw new TypeError("Generator is already executing.");for(;_h;)try{if(ip=1,ap&&(hp=Sp[0]&2?ap.return:Sp[0]?ap.throw||((hp=ap.return)&&hp.call(ap),0):ap.next)&&!(hp=hp.call(ap,Sp[1])).done)return hp;switch(ap=0,hp&&(Sp=[Sp[0]&2,hp.value]),Sp[0]){case 0:case 1:hp=Sp;break;case 4:return _h.label++,{value:Sp[1],done:!1};case 5:_h.label++,ap=Sp[1],Sp=[0];continue;case 7:Sp=_h.ops.pop(),_h.trys.pop();continue;default:if(hp=_h.trys,!(hp=hp.length>0&&hp[hp.length-1])&&(Sp[0]===6||Sp[0]===2)){_h=0;continue}if(Sp[0]===3&&(!hp||Sp[1]>hp[0]&&Sp[1]<hp[3])){_h.label=Sp[1];break}if(Sp[0]===6&&_h.label<hp[1]){_h.label=hp[1],hp=Sp;break}if(hp&&_h.label<hp[2]){_h.label=hp[2],_h.ops.push(Sp);break}hp[2]&&_h.ops.pop(),_h.trys.pop();continue}Sp=Xc.call(_c,_h)}catch(Dp){Sp=[6,Dp],ap=0}finally{ip=hp=0}if(Sp[0]&5)throw Sp[1];return{value:Sp[0]?Sp[1]:void 0,done:!0}}},Ou=function(_c,Xc){for(var _h in _c)_h!=="default"&&!Object.prototype.hasOwnProperty.call(Xc,_h)&&tp(Xc,_c,_h)},tp=Object.create?function(_c,Xc,_h,ip){ip===void 0&&(ip=_h);var ap=Object.getOwnPropertyDescriptor(Xc,_h);(!ap||("get"in ap?!Xc.__esModule:ap.writable||ap.configurable))&&(ap={enumerable:!0,get:function(){return Xc[_h]}}),Object.defineProperty(_c,ip,ap)}:function(_c,Xc,_h,ip){ip===void 0&&(ip=_h),_c[ip]=Xc[_h]},Du=function(_c){var Xc=typeof Symbol=="function"&&Symbol.iterator,_h=Xc&&_c[Xc],ip=0;if(_h)return _h.call(_c);if(_c&&typeof _c.length=="number")return{next:function(){return _c&&ip>=_c.length&&(_c=void 0),{value:_c&&_c[ip++],done:!_c}}};throw new TypeError(Xc?"Object is not iterable.":"Symbol.iterator is not defined.")},ku=function(_c,Xc){var _h=typeof Symbol=="function"&&_c[Symbol.iterator];if(!_h)return _c;var ip=_h.call(_c),ap,hp=[],Ap;try{for(;(Xc===void 0||Xc-- >0)&&!(ap=ip.next()).done;)hp.push(ap.value)}catch(gp){Ap={error:gp}}finally{try{ap&&!ap.done&&(_h=ip.return)&&_h.call(ip)}finally{if(Ap)throw Ap.error}}return hp},Fu=function(){for(var _c=[],Xc=0;Xc<arguments.length;Xc++)_c=_c.concat(ku(arguments[Xc]));return _c},Nu=function(){for(var _c=0,Xc=0,_h=arguments.length;Xc<_h;Xc++)_c+=arguments[Xc].length;for(var ip=Array(_c),ap=0,Xc=0;Xc<_h;Xc++)for(var hp=arguments[Xc],Ap=0,gp=hp.length;Ap<gp;Ap++,ap++)ip[ap]=hp[Ap];return ip},Gu=function(_c,Xc,_h){if(_h||arguments.length===2)for(var ip=0,ap=Xc.length,hp;ip<ap;ip++)(hp||!(ip in Xc))&&(hp||(hp=Array.prototype.slice.call(Xc,0,ip)),hp[ip]=Xc[ip]);return _c.concat(hp||Array.prototype.slice.call(Xc))},zu=function(_c){return this instanceof zu?(this.v=_c,this):new zu(_c)},Hu=function(_c,Xc,_h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ip=_h.apply(_c,Xc||[]),ap,hp=[];return ap={},Ap("next"),Ap("throw"),Ap("return"),ap[Symbol.asyncIterator]=function(){return this},ap;function Ap(Bp){ip[Bp]&&(ap[Bp]=function(Ip){return new Promise(function(ep,_f){hp.push([Bp,Ip,ep,_f])>1||gp(Bp,Ip)})})}function gp(Bp,Ip){try{Rp(ip[Bp](Ip))}catch(ep){Ep(hp[0][3],ep)}}function Rp(Bp){Bp.value instanceof zu?Promise.resolve(Bp.value.v).then(Sp,Dp):Ep(hp[0][2],Bp)}function Sp(Bp){gp("next",Bp)}function Dp(Bp){gp("throw",Bp)}function Ep(Bp,Ip){Bp(Ip),hp.shift(),hp.length&&gp(hp[0][0],hp[0][1])}},Uu=function(_c){var Xc,_h;return Xc={},ip("next"),ip("throw",function(ap){throw ap}),ip("return"),Xc[Symbol.iterator]=function(){return this},Xc;function ip(ap,hp){Xc[ap]=_c[ap]?function(Ap){return(_h=!_h)?{value:zu(_c[ap](Ap)),done:ap==="return"}:hp?hp(Ap):Ap}:hp}},ju=function(_c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xc=_c[Symbol.asyncIterator],_h;return Xc?Xc.call(_c):(_c=typeof Du=="function"?Du(_c):_c[Symbol.iterator](),_h={},ip("next"),ip("throw"),ip("return"),_h[Symbol.asyncIterator]=function(){return this},_h);function ip(hp){_h[hp]=_c[hp]&&function(Ap){return new Promise(function(gp,Rp){Ap=_c[hp](Ap),ap(gp,Rp,Ap.done,Ap.value)})}}function ap(hp,Ap,gp,Rp){Promise.resolve(Rp).then(function(Sp){hp({value:Sp,done:gp})},Ap)}},Wu=function(_c,Xc){return Object.defineProperty?Object.defineProperty(_c,"raw",{value:Xc}):_c.raw=Xc,_c};var Zu=Object.create?function(_c,Xc){Object.defineProperty(_c,"default",{enumerable:!0,value:Xc})}:function(_c,Xc){_c.default=Xc};Qu=function(_c){if(_c&&_c.__esModule)return _c;var Xc={};if(_c!=null)for(var _h in _c)_h!=="default"&&Object.prototype.hasOwnProperty.call(_c,_h)&&tp(Xc,_c,_h);return Zu(Xc,_c),Xc},qu=function(_c){return _c&&_c.__esModule?_c:{default:_c}},Yu=function(_c,Xc,_h,ip){if(_h==="a"&&!ip)throw new TypeError("Private accessor was defined without a getter");if(typeof Xc=="function"?_c!==Xc||!ip:!Xc.has(_c))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _h==="m"?ip:_h==="a"?ip.call(_c):ip?ip.value:Xc.get(_c)},Ju=function(_c,Xc,_h,ip,ap){if(ip==="m")throw new TypeError("Private method is not writable");if(ip==="a"&&!ap)throw new TypeError("Private accessor was defined without a setter");if(typeof Xc=="function"?_c!==Xc||!ap:!Xc.has(_c))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ip==="a"?ap.call(_c,_h):ap?ap.value=_h:Xc.set(_c,_h),_h},_d=function(_c,Xc){if(Xc===null||typeof Xc!="object"&&typeof Xc!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof _c=="function"?Xc===_c:_c.has(Xc)},Ku("__extends",$u),Ku("__assign",Tu),Ku("__rest",Cu),Ku("__decorate",Pu),Ku("__param",Ru),Ku("__metadata",Lu),Ku("__awaiter",Bu),Ku("__generator",Vu),Ku("__exportStar",Ou),Ku("__createBinding",tp),Ku("__values",Du),Ku("__read",ku),Ku("__spread",Fu),Ku("__spreadArrays",Nu),Ku("__spreadArray",Gu),Ku("__await",zu),Ku("__asyncGenerator",Hu),Ku("__asyncDelegator",Uu),Ku("__asyncValues",ju),Ku("__makeTemplateObject",Wu),Ku("__importStar",Qu),Ku("__importDefault",qu),Ku("__classPrivateFieldGet",Yu),Ku("__classPrivateFieldSet",Ju),Ku("__classPrivateFieldIn",_d)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(_u,$u){for(var Tu=new Array(arguments.length-1),Cu=0,Pu=2,Ru=!0;Pu<arguments.length;)Tu[Cu++]=arguments[Pu++];return new Promise(function(Bu,Vu){Tu[Cu]=function(Du){if(Ru)if(Ru=!1,Du)Vu(Du);else{for(var ku=new Array(arguments.length-1),Fu=0;Fu<ku.length;)ku[Fu++]=arguments[Fu];Bu.apply(null,ku)}};try{_u.apply($u||null,Tu)}catch(Ou){Ru&&(Ru=!1,Vu(Ou))}})}var base64$1={};(function(_u){var $u=_u;$u.length=function(Bu){var Vu=Bu.length;if(!Vu)return 0;for(var Ou=0;--Vu%4>1&&Bu.charAt(Vu)==="=";)++Ou;return Math.ceil(Bu.length*3)/4-Ou};for(var Tu=new Array(64),Cu=new Array(123),Pu=0;Pu<64;)Cu[Tu[Pu]=Pu<26?Pu+65:Pu<52?Pu+71:Pu<62?Pu-4:Pu-59|43]=Pu++;$u.encode=function(Bu,Vu,Ou){for(var Du=null,ku=[],Fu=0,Nu=0,Gu;Vu<Ou;){var zu=Bu[Vu++];switch(Nu){case 0:ku[Fu++]=Tu[zu>>2],Gu=(zu&3)<<4,Nu=1;break;case 1:ku[Fu++]=Tu[Gu|zu>>4],Gu=(zu&15)<<2,Nu=2;break;case 2:ku[Fu++]=Tu[Gu|zu>>6],ku[Fu++]=Tu[zu&63],Nu=0;break}Fu>8191&&((Du||(Du=[])).push(String.fromCharCode.apply(String,ku)),Fu=0)}return Nu&&(ku[Fu++]=Tu[Gu],ku[Fu++]=61,Nu===1&&(ku[Fu++]=61)),Du?(Fu&&Du.push(String.fromCharCode.apply(String,ku.slice(0,Fu))),Du.join("")):String.fromCharCode.apply(String,ku.slice(0,Fu))};var Ru="invalid encoding";$u.decode=function(Bu,Vu,Ou){for(var Du=Ou,ku=0,Fu,Nu=0;Nu<Bu.length;){var Gu=Bu.charCodeAt(Nu++);if(Gu===61&&ku>1)break;if((Gu=Cu[Gu])===void 0)throw Error(Ru);switch(ku){case 0:Fu=Gu,ku=1;break;case 1:Vu[Ou++]=Fu<<2|(Gu&48)>>4,Fu=Gu,ku=2;break;case 2:Vu[Ou++]=(Fu&15)<<4|(Gu&60)>>2,Fu=Gu,ku=3;break;case 3:Vu[Ou++]=(Fu&3)<<6|Gu,ku=0;break}}if(ku===1)throw Error(Ru);return Ou-Du},$u.test=function(Bu){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Bu)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function($u,Tu,Cu){return(this._listeners[$u]||(this._listeners[$u]=[])).push({fn:Tu,ctx:Cu||this}),this};EventEmitter.prototype.off=function($u,Tu){if($u===void 0)this._listeners={};else if(Tu===void 0)this._listeners[$u]=[];else for(var Cu=this._listeners[$u],Pu=0;Pu<Cu.length;)Cu[Pu].fn===Tu?Cu.splice(Pu,1):++Pu;return this};EventEmitter.prototype.emit=function($u){var Tu=this._listeners[$u];if(Tu){for(var Cu=[],Pu=1;Pu<arguments.length;)Cu.push(arguments[Pu++]);for(Pu=0;Pu<Tu.length;)Tu[Pu].fn.apply(Tu[Pu++].ctx,Cu)}return this};var float=factory(factory);function factory(_u){return typeof Float32Array!="undefined"?function(){var $u=new Float32Array([-0]),Tu=new Uint8Array($u.buffer),Cu=Tu[3]===128;function Pu(Vu,Ou,Du){$u[0]=Vu,Ou[Du]=Tu[0],Ou[Du+1]=Tu[1],Ou[Du+2]=Tu[2],Ou[Du+3]=Tu[3]}function Ru(Vu,Ou,Du){$u[0]=Vu,Ou[Du]=Tu[3],Ou[Du+1]=Tu[2],Ou[Du+2]=Tu[1],Ou[Du+3]=Tu[0]}_u.writeFloatLE=Cu?Pu:Ru,_u.writeFloatBE=Cu?Ru:Pu;function Lu(Vu,Ou){return Tu[0]=Vu[Ou],Tu[1]=Vu[Ou+1],Tu[2]=Vu[Ou+2],Tu[3]=Vu[Ou+3],$u[0]}function Bu(Vu,Ou){return Tu[3]=Vu[Ou],Tu[2]=Vu[Ou+1],Tu[1]=Vu[Ou+2],Tu[0]=Vu[Ou+3],$u[0]}_u.readFloatLE=Cu?Lu:Bu,_u.readFloatBE=Cu?Bu:Lu}():function(){function $u(Cu,Pu,Ru,Lu){var Bu=Pu<0?1:0;if(Bu&&(Pu=-Pu),Pu===0)Cu(1/Pu>0?0:2147483648,Ru,Lu);else if(isNaN(Pu))Cu(2143289344,Ru,Lu);else if(Pu>34028234663852886e22)Cu((Bu<<31|2139095040)>>>0,Ru,Lu);else if(Pu<11754943508222875e-54)Cu((Bu<<31|Math.round(Pu/1401298464324817e-60))>>>0,Ru,Lu);else{var Vu=Math.floor(Math.log(Pu)/Math.LN2),Ou=Math.round(Pu*Math.pow(2,-Vu)*8388608)&8388607;Cu((Bu<<31|Vu+127<<23|Ou)>>>0,Ru,Lu)}}_u.writeFloatLE=$u.bind(null,writeUintLE),_u.writeFloatBE=$u.bind(null,writeUintBE);function Tu(Cu,Pu,Ru){var Lu=Cu(Pu,Ru),Bu=(Lu>>31)*2+1,Vu=Lu>>>23&255,Ou=Lu&8388607;return Vu===255?Ou?NaN:Bu*(1/0):Vu===0?Bu*1401298464324817e-60*Ou:Bu*Math.pow(2,Vu-150)*(Ou+8388608)}_u.readFloatLE=Tu.bind(null,readUintLE),_u.readFloatBE=Tu.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var $u=new Float64Array([-0]),Tu=new Uint8Array($u.buffer),Cu=Tu[7]===128;function Pu(Vu,Ou,Du){$u[0]=Vu,Ou[Du]=Tu[0],Ou[Du+1]=Tu[1],Ou[Du+2]=Tu[2],Ou[Du+3]=Tu[3],Ou[Du+4]=Tu[4],Ou[Du+5]=Tu[5],Ou[Du+6]=Tu[6],Ou[Du+7]=Tu[7]}function Ru(Vu,Ou,Du){$u[0]=Vu,Ou[Du]=Tu[7],Ou[Du+1]=Tu[6],Ou[Du+2]=Tu[5],Ou[Du+3]=Tu[4],Ou[Du+4]=Tu[3],Ou[Du+5]=Tu[2],Ou[Du+6]=Tu[1],Ou[Du+7]=Tu[0]}_u.writeDoubleLE=Cu?Pu:Ru,_u.writeDoubleBE=Cu?Ru:Pu;function Lu(Vu,Ou){return Tu[0]=Vu[Ou],Tu[1]=Vu[Ou+1],Tu[2]=Vu[Ou+2],Tu[3]=Vu[Ou+3],Tu[4]=Vu[Ou+4],Tu[5]=Vu[Ou+5],Tu[6]=Vu[Ou+6],Tu[7]=Vu[Ou+7],$u[0]}function Bu(Vu,Ou){return Tu[7]=Vu[Ou],Tu[6]=Vu[Ou+1],Tu[5]=Vu[Ou+2],Tu[4]=Vu[Ou+3],Tu[3]=Vu[Ou+4],Tu[2]=Vu[Ou+5],Tu[1]=Vu[Ou+6],Tu[0]=Vu[Ou+7],$u[0]}_u.readDoubleLE=Cu?Lu:Bu,_u.readDoubleBE=Cu?Bu:Lu}():function(){function $u(Cu,Pu,Ru,Lu,Bu,Vu){var Ou=Lu<0?1:0;if(Ou&&(Lu=-Lu),Lu===0)Cu(0,Bu,Vu+Pu),Cu(1/Lu>0?0:2147483648,Bu,Vu+Ru);else if(isNaN(Lu))Cu(0,Bu,Vu+Pu),Cu(2146959360,Bu,Vu+Ru);else if(Lu>17976931348623157e292)Cu(0,Bu,Vu+Pu),Cu((Ou<<31|2146435072)>>>0,Bu,Vu+Ru);else{var Du;if(Lu<22250738585072014e-324)Du=Lu/5e-324,Cu(Du>>>0,Bu,Vu+Pu),Cu((Ou<<31|Du/4294967296)>>>0,Bu,Vu+Ru);else{var ku=Math.floor(Math.log(Lu)/Math.LN2);ku===1024&&(ku=1023),Du=Lu*Math.pow(2,-ku),Cu(Du*4503599627370496>>>0,Bu,Vu+Pu),Cu((Ou<<31|ku+1023<<20|Du*1048576&1048575)>>>0,Bu,Vu+Ru)}}}_u.writeDoubleLE=$u.bind(null,writeUintLE,0,4),_u.writeDoubleBE=$u.bind(null,writeUintBE,4,0);function Tu(Cu,Pu,Ru,Lu,Bu){var Vu=Cu(Lu,Bu+Pu),Ou=Cu(Lu,Bu+Ru),Du=(Ou>>31)*2+1,ku=Ou>>>20&2047,Fu=4294967296*(Ou&1048575)+Vu;return ku===2047?Fu?NaN:Du*(1/0):ku===0?Du*5e-324*Fu:Du*Math.pow(2,ku-1075)*(Fu+4503599627370496)}_u.readDoubleLE=Tu.bind(null,readUintLE,0,4),_u.readDoubleBE=Tu.bind(null,readUintBE,4,0)}(),_u}function writeUintLE(_u,$u,Tu){$u[Tu]=_u&255,$u[Tu+1]=_u>>>8&255,$u[Tu+2]=_u>>>16&255,$u[Tu+3]=_u>>>24}function writeUintBE(_u,$u,Tu){$u[Tu]=_u>>>24,$u[Tu+1]=_u>>>16&255,$u[Tu+2]=_u>>>8&255,$u[Tu+3]=_u&255}function readUintLE(_u,$u){return(_u[$u]|_u[$u+1]<<8|_u[$u+2]<<16|_u[$u+3]<<24)>>>0}function readUintBE(_u,$u){return(_u[$u]<<24|_u[$u+1]<<16|_u[$u+2]<<8|_u[$u+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_u){}return null}var utf8$2={};(function(_u){var $u=_u;$u.length=function(Cu){for(var Pu=0,Ru=0,Lu=0;Lu<Cu.length;++Lu)Ru=Cu.charCodeAt(Lu),Ru<128?Pu+=1:Ru<2048?Pu+=2:(Ru&64512)===55296&&(Cu.charCodeAt(Lu+1)&64512)===56320?(++Lu,Pu+=4):Pu+=3;return Pu},$u.read=function(Cu,Pu,Ru){var Lu=Ru-Pu;if(Lu<1)return"";for(var Bu=null,Vu=[],Ou=0,Du;Pu<Ru;)Du=Cu[Pu++],Du<128?Vu[Ou++]=Du:Du>191&&Du<224?Vu[Ou++]=(Du&31)<<6|Cu[Pu++]&63:Du>239&&Du<365?(Du=((Du&7)<<18|(Cu[Pu++]&63)<<12|(Cu[Pu++]&63)<<6|Cu[Pu++]&63)-65536,Vu[Ou++]=55296+(Du>>10),Vu[Ou++]=56320+(Du&1023)):Vu[Ou++]=(Du&15)<<12|(Cu[Pu++]&63)<<6|Cu[Pu++]&63,Ou>8191&&((Bu||(Bu=[])).push(String.fromCharCode.apply(String,Vu)),Ou=0);return Bu?(Ou&&Bu.push(String.fromCharCode.apply(String,Vu.slice(0,Ou))),Bu.join("")):String.fromCharCode.apply(String,Vu.slice(0,Ou))},$u.write=function(Cu,Pu,Ru){for(var Lu=Ru,Bu,Vu,Ou=0;Ou<Cu.length;++Ou)Bu=Cu.charCodeAt(Ou),Bu<128?Pu[Ru++]=Bu:Bu<2048?(Pu[Ru++]=Bu>>6|192,Pu[Ru++]=Bu&63|128):(Bu&64512)===55296&&((Vu=Cu.charCodeAt(Ou+1))&64512)===56320?(Bu=65536+((Bu&1023)<<10)+(Vu&1023),++Ou,Pu[Ru++]=Bu>>18|240,Pu[Ru++]=Bu>>12&63|128,Pu[Ru++]=Bu>>6&63|128,Pu[Ru++]=Bu&63|128):(Pu[Ru++]=Bu>>12|224,Pu[Ru++]=Bu>>6&63|128,Pu[Ru++]=Bu&63|128);return Ru-Lu}})(utf8$2);var pool_1=pool;function pool(_u,$u,Tu){var Cu=Tu||8192,Pu=Cu>>>1,Ru=null,Lu=Cu;return function(Vu){if(Vu<1||Vu>Pu)return _u(Vu);Lu+Vu>Cu&&(Ru=_u(Cu),Lu=0);var Ou=$u.call(Ru,Lu,Lu+=Vu);return Lu&7&&(Lu=(Lu|7)+1),Ou}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(_u,$u){this.lo=_u>>>0,this.hi=$u>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function _u($u){if($u===0)return zero;var Tu=$u<0;Tu&&($u=-$u);var Cu=$u>>>0,Pu=($u-Cu)/4294967296>>>0;return Tu&&(Pu=~Pu>>>0,Cu=~Cu>>>0,++Cu>4294967295&&(Cu=0,++Pu>4294967295&&(Pu=0))),new LongBits$2(Cu,Pu)};LongBits$2.from=function _u($u){if(typeof $u=="number")return LongBits$2.fromNumber($u);if(util$5.isString($u))if(util$5.Long)$u=util$5.Long.fromString($u);else return LongBits$2.fromNumber(parseInt($u,10));return $u.low||$u.high?new LongBits$2($u.low>>>0,$u.high>>>0):zero};LongBits$2.prototype.toNumber=function _u($u){if(!$u&&this.hi>>>31){var Tu=~this.lo+1>>>0,Cu=~this.hi>>>0;return Tu||(Cu=Cu+1>>>0),-(Tu+Cu*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function _u($u){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean($u)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean($u)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function _u($u){return $u===zeroHash?zero:new LongBits$2((charCodeAt.call($u,0)|charCodeAt.call($u,1)<<8|charCodeAt.call($u,2)<<16|charCodeAt.call($u,3)<<24)>>>0,(charCodeAt.call($u,4)|charCodeAt.call($u,5)<<8|charCodeAt.call($u,6)<<16|charCodeAt.call($u,7)<<24)>>>0)};LongBits$2.prototype.toHash=function _u(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function _u(){var $u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$u)>>>0,this.lo=(this.lo<<1^$u)>>>0,this};LongBits$2.prototype.zzDecode=function _u(){var $u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$u)>>>0,this.hi=(this.hi>>>1^$u)>>>0,this};LongBits$2.prototype.length=function _u(){var $u=this.lo,Tu=(this.lo>>>28|this.hi<<4)>>>0,Cu=this.hi>>>24;return Cu===0?Tu===0?$u<16384?$u<128?1:2:$u<2097152?3:4:Tu<16384?Tu<128?5:6:Tu<2097152?7:8:Cu<128?9:10};(function(_u){var $u=_u;$u.asPromise=aspromise,$u.base64=base64$1,$u.EventEmitter=eventemitter,$u.float=float,$u.inquire=inquire_1,$u.utf8=utf8$2,$u.pool=pool_1,$u.LongBits=longbits,$u.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),$u.global=$u.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,$u.emptyArray=Object.freeze?Object.freeze([]):[],$u.emptyObject=Object.freeze?Object.freeze({}):{},$u.isInteger=Number.isInteger||function(Ru){return typeof Ru=="number"&&isFinite(Ru)&&Math.floor(Ru)===Ru},$u.isString=function(Ru){return typeof Ru=="string"||Ru instanceof String},$u.isObject=function(Ru){return Ru&&typeof Ru=="object"},$u.isset=$u.isSet=function(Ru,Lu){var Bu=Ru[Lu];return Bu!=null&&Ru.hasOwnProperty(Lu)?typeof Bu!="object"||(Array.isArray(Bu)?Bu.length:Object.keys(Bu).length)>0:!1},$u.Buffer=function(){try{var Pu=$u.inquire("buffer").Buffer;return Pu.prototype.utf8Write?Pu:null}catch{return null}}(),$u._Buffer_from=null,$u._Buffer_allocUnsafe=null,$u.newBuffer=function(Ru){return typeof Ru=="number"?$u.Buffer?$u._Buffer_allocUnsafe(Ru):new $u.Array(Ru):$u.Buffer?$u._Buffer_from(Ru):typeof Uint8Array=="undefined"?Ru:new Uint8Array(Ru)},$u.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,$u.Long=$u.global.dcodeIO&&$u.global.dcodeIO.Long||$u.global.Long||$u.inquire("long"),$u.key2Re=/^true|false|0|1$/,$u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,$u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,$u.longToHash=function(Ru){return Ru?$u.LongBits.from(Ru).toHash():$u.LongBits.zeroHash},$u.longFromHash=function(Ru,Lu){var Bu=$u.LongBits.fromHash(Ru);return $u.Long?$u.Long.fromBits(Bu.lo,Bu.hi,Lu):Bu.toNumber(Boolean(Lu))};function Tu(Pu,Ru,Lu){for(var Bu=Object.keys(Ru),Vu=0;Vu<Bu.length;++Vu)(Pu[Bu[Vu]]===void 0||!Lu)&&(Pu[Bu[Vu]]=Ru[Bu[Vu]]);return Pu}$u.merge=Tu,$u.lcFirst=function(Ru){return Ru.charAt(0).toLowerCase()+Ru.substring(1)};function Cu(Pu){function Ru(Lu,Bu){if(!(this instanceof Ru))return new Ru(Lu,Bu);Object.defineProperty(this,"message",{get:function(){return Lu}}),Error.captureStackTrace?Error.captureStackTrace(this,Ru):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Bu&&Tu(this,Bu)}return(Ru.prototype=Object.create(Error.prototype)).constructor=Ru,Object.defineProperty(Ru.prototype,"name",{get:function(){return Pu}}),Ru.prototype.toString=function(){return this.name+": "+this.message},Ru}$u.newError=Cu,$u.ProtocolError=Cu("ProtocolError"),$u.oneOfGetter=function(Ru){for(var Lu={},Bu=0;Bu<Ru.length;++Bu)Lu[Ru[Bu]]=1;return function(){for(var Vu=Object.keys(this),Ou=Vu.length-1;Ou>-1;--Ou)if(Lu[Vu[Ou]]===1&&this[Vu[Ou]]!==void 0&&this[Vu[Ou]]!==null)return Vu[Ou]}},$u.oneOfSetter=function(Ru){return function(Lu){for(var Bu=0;Bu<Ru.length;++Bu)Ru[Bu]!==Lu&&delete this[Ru[Bu]]}},$u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},$u._configure=function(){var Pu=$u.Buffer;if(!Pu){$u._Buffer_from=$u._Buffer_allocUnsafe=null;return}$u._Buffer_from=Pu.from!==Uint8Array.from&&Pu.from||function(Lu,Bu){return new Pu(Lu,Bu)},$u._Buffer_allocUnsafe=Pu.allocUnsafe||function(Lu){return new Pu(Lu)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(_u,$u,Tu){this.fn=_u,this.len=$u,this.next=void 0,this.val=Tu}function noop$1(){}function State(_u){this.head=_u.head,this.tail=_u.tail,this.len=_u.len,this.next=_u.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function _u(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function _u($u){return new util$4.Array($u)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function _u($u,Tu,Cu){return this.tail=this.tail.next=new Op($u,Tu,Cu),this.len+=Tu,this};function writeByte(_u,$u,Tu){$u[Tu]=_u&255}function writeVarint32(_u,$u,Tu){for(;_u>127;)$u[Tu++]=_u&127|128,_u>>>=7;$u[Tu]=_u}function VarintOp(_u,$u){this.len=_u,this.next=void 0,this.val=$u}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function _u($u){return this.len+=(this.tail=this.tail.next=new VarintOp(($u=$u>>>0)<128?1:$u<16384?2:$u<2097152?3:$u<268435456?4:5,$u)).len,this};Writer$1.prototype.int32=function _u($u){return $u<0?this._push(writeVarint64,10,LongBits$1.fromNumber($u)):this.uint32($u)};Writer$1.prototype.sint32=function _u($u){return this.uint32(($u<<1^$u>>31)>>>0)};function writeVarint64(_u,$u,Tu){for(;_u.hi;)$u[Tu++]=_u.lo&127|128,_u.lo=(_u.lo>>>7|_u.hi<<25)>>>0,_u.hi>>>=7;for(;_u.lo>127;)$u[Tu++]=_u.lo&127|128,_u.lo=_u.lo>>>7;$u[Tu++]=_u.lo}Writer$1.prototype.uint64=function _u($u){var Tu=LongBits$1.from($u);return this._push(writeVarint64,Tu.length(),Tu)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function _u($u){var Tu=LongBits$1.from($u).zzEncode();return this._push(writeVarint64,Tu.length(),Tu)};Writer$1.prototype.bool=function _u($u){return this._push(writeByte,1,$u?1:0)};function writeFixed32(_u,$u,Tu){$u[Tu]=_u&255,$u[Tu+1]=_u>>>8&255,$u[Tu+2]=_u>>>16&255,$u[Tu+3]=_u>>>24}Writer$1.prototype.fixed32=function _u($u){return this._push(writeFixed32,4,$u>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function _u($u){var Tu=LongBits$1.from($u);return this._push(writeFixed32,4,Tu.lo)._push(writeFixed32,4,Tu.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function _u($u){return this._push(util$4.float.writeFloatLE,4,$u)};Writer$1.prototype.double=function _u($u){return this._push(util$4.float.writeDoubleLE,8,$u)};var writeBytes=util$4.Array.prototype.set?function _u($u,Tu,Cu){Tu.set($u,Cu)}:function _u($u,Tu,Cu){for(var Pu=0;Pu<$u.length;++Pu)Tu[Cu+Pu]=$u[Pu]};Writer$1.prototype.bytes=function _u($u){var Tu=$u.length>>>0;if(!Tu)return this._push(writeByte,1,0);if(util$4.isString($u)){var Cu=Writer$1.alloc(Tu=base64.length($u));base64.decode($u,Cu,0),$u=Cu}return this.uint32(Tu)._push(writeBytes,Tu,$u)};Writer$1.prototype.string=function _u($u){var Tu=utf8$1.length($u);return Tu?this.uint32(Tu)._push(utf8$1.write,Tu,$u):this._push(writeByte,1,0)};Writer$1.prototype.fork=function _u(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function _u(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function _u(){var $u=this.head,Tu=this.tail,Cu=this.len;return this.reset().uint32(Cu),Cu&&(this.tail.next=$u.next,this.tail=Tu,this.len+=Cu),this};Writer$1.prototype.finish=function _u(){for(var $u=this.head.next,Tu=this.constructor.alloc(this.len),Cu=0;$u;)$u.fn($u.val,Tu,Cu),Cu+=$u.len,$u=$u.next;return Tu};Writer$1._configure=function(_u){BufferWriter$1=_u,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function($u,Tu,Cu){Tu.set($u,Cu)}:function($u,Tu,Cu){if($u.copy)$u.copy(Tu,Cu,0,$u.length);else for(var Pu=0;Pu<$u.length;)Tu[Cu++]=$u[Pu++]}};BufferWriter.prototype.bytes=function _u($u){util$3.isString($u)&&($u=util$3._Buffer_from($u,"base64"));var Tu=$u.length>>>0;return this.uint32(Tu),Tu&&this._push(BufferWriter.writeBytesBuffer,Tu,$u),this};function writeStringBuffer(_u,$u,Tu){_u.length<40?util$3.utf8.write(_u,$u,Tu):$u.utf8Write?$u.utf8Write(_u,Tu):$u.write(_u,Tu)}BufferWriter.prototype.string=function _u($u){var Tu=util$3.Buffer.byteLength($u);return this.uint32(Tu),Tu&&this._push(writeStringBuffer,Tu,$u),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(_u,$u){return RangeError("index out of range: "+_u.pos+" + "+($u||1)+" > "+_u.len)}function Reader$1(_u){this.buf=_u,this.pos=0,this.len=_u.length}var create_array=typeof Uint8Array!="undefined"?function _u($u){if($u instanceof Uint8Array||Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")}:function _u($u){if(Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")},create=function _u(){return util$2.Buffer?function(Tu){return(Reader$1.create=function(Pu){return util$2.Buffer.isBuffer(Pu)?new BufferReader$1(Pu):create_array(Pu)})(Tu)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function _u(){var $u=4294967295;return function(){if($u=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||($u=($u|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return $u;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return $u}}();Reader$1.prototype.int32=function _u(){return this.uint32()|0};Reader$1.prototype.sint32=function _u(){var $u=this.uint32();return $u>>>1^-($u&1)|0};function readLongVarint(){var _u=new LongBits(0,0),$u=0;if(this.len-this.pos>4){for(;$u<4;++$u)if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u;if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<28)>>>0,_u.hi=(_u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return _u;$u=0}else{for(;$u<3;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u}return _u.lo=(_u.lo|(this.buf[this.pos++]&127)<<$u*7)>>>0,_u}if(this.len-this.pos>4){for(;$u<5;++$u)if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}else for(;$u<5;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function _u(){return this.uint32()!==0};function readFixed32_end(_u,$u){return(_u[$u-4]|_u[$u-3]<<8|_u[$u-2]<<16|_u[$u-1]<<24)>>>0}Reader$1.prototype.fixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var $u=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$u};Reader$1.prototype.double=function _u(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var $u=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$u};Reader$1.prototype.bytes=function _u(){var $u=this.uint32(),Tu=this.pos,Cu=this.pos+$u;if(Cu>this.len)throw indexOutOfRange(this,$u);return this.pos+=$u,Array.isArray(this.buf)?this.buf.slice(Tu,Cu):Tu===Cu?new this.buf.constructor(0):this._slice.call(this.buf,Tu,Cu)};Reader$1.prototype.string=function _u(){var $u=this.bytes();return utf8.read($u,0,$u.length)};Reader$1.prototype.skip=function _u($u){if(typeof $u=="number"){if(this.pos+$u>this.len)throw indexOutOfRange(this,$u);this.pos+=$u}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(_u){switch(_u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(_u=this.uint32()&7)!==4;)this.skipType(_u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+_u+" at offset "+this.pos)}return this};Reader$1._configure=function(_u){BufferReader$1=_u,Reader$1.create=create(),BufferReader$1._configure();var $u=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[$u](!1)},uint64:function(){return readLongVarint.call(this)[$u](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[$u](!1)},fixed64:function(){return readFixed64.call(this)[$u](!0)},sfixed64:function(){return readFixed64.call(this)[$u](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(_u){Reader.call(this,_u)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function _u(){var $u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$u,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(_u,$u,Tu){if(typeof _u!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=_u,this.requestDelimited=Boolean($u),this.responseDelimited=Boolean(Tu)}Service.prototype.rpcCall=function _u($u,Tu,Cu,Pu,Ru){if(!Pu)throw TypeError("request must be specified");var Lu=this;if(!Ru)return util.asPromise(_u,Lu,$u,Tu,Cu,Pu);if(!Lu.rpcImpl){setTimeout(function(){Ru(Error("already ended"))},0);return}try{return Lu.rpcImpl($u,Tu[Lu.requestDelimited?"encodeDelimited":"encode"](Pu).finish(),function(Vu,Ou){if(Vu)return Lu.emit("error",Vu,$u),Ru(Vu);if(Ou===null){Lu.end(!0);return}if(!(Ou instanceof Cu))try{Ou=Cu[Lu.responseDelimited?"decodeDelimited":"decode"](Ou)}catch(Du){return Lu.emit("error",Du,$u),Ru(Du)}return Lu.emit("data",Ou,$u),Ru(null,Ou)})}catch(Bu){Lu.emit("error",Bu,$u),setTimeout(function(){Ru(Bu)},0);return}};Service.prototype.end=function _u($u){return this.rpcImpl&&($u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(_u){var $u=_u;$u.Service=service})(rpc);var roots={};(function(_u){var $u=_u;$u.build="minimal",$u.Writer=writer,$u.BufferWriter=writer_buffer,$u.Reader=reader,$u.BufferReader=reader_buffer,$u.util=minimal$1,$u.rpc=rpc,$u.roots=roots,$u.configure=Tu;function Tu(){$u.util._configure(),$u.Writer._configure($u.BufferWriter),$u.Reader._configure($u.BufferReader)}Tu()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$g=require$$1,t$h=tslib.exports,i$m=minimal;function n$m(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Tu){if(Tu!=="default"){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}}),$u.default=_u,Object.freeze($u)}var r$n=n$m(e$g),o$i=n$m(i$m),s$k=Number(r$n.REVISION);if(s$k<115||s$k>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$k,l$j={},u$k={},h$j=h$j||function(_u,$u){var Tu={},Cu=Tu.lib={},Pu=Cu.Base=function(){function Fu(){}return{extend:function(Nu){Fu.prototype=this;var Gu=new Fu;return Nu&&Gu.mixIn(Nu),Gu.hasOwnProperty("init")||(Gu.init=function(){Gu.$super.init.apply(this,arguments)}),Gu.init.prototype=Gu,Gu.$super=this,Gu},create:function(){var Nu=this.extend();return Nu.init.apply(Nu,arguments),Nu},init:function(){},mixIn:function(Nu){for(var Gu in Nu)Nu.hasOwnProperty(Gu)&&(this[Gu]=Nu[Gu]);Nu.hasOwnProperty("toString")&&(this.toString=Nu.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Ru=Cu.WordArray=Pu.extend({init:function(Fu,Nu){Fu=this.words=Fu||[],this.sigBytes=Nu!=null?Nu:4*Fu.length},toString:function(Fu){return(Fu||Bu).stringify(this)},concat:function(Fu){var Nu=this.words,Gu=Fu.words,zu=this.sigBytes,Hu=Fu.sigBytes;if(this.clamp(),zu%4)for(var Uu=0;Uu<Hu;Uu++){var ju=Gu[Uu>>>2]>>>24-Uu%4*8&255;Nu[zu+Uu>>>2]|=ju<<24-(zu+Uu)%4*8}else for(Uu=0;Uu<Hu;Uu+=4)Nu[zu+Uu>>>2]=Gu[Uu>>>2];return this.sigBytes+=Hu,this},clamp:function(){var Fu=this.words,Nu=this.sigBytes;Fu[Nu>>>2]&=4294967295<<32-Nu%4*8,Fu.length=_u.ceil(Nu/4)},clone:function(){var Fu=Pu.clone.call(this);return Fu.words=this.words.slice(0),Fu},random:function(Fu){for(var Nu=[],Gu=0;Gu<Fu;Gu+=4)Nu.push(4294967296*_u.random()|0);return new Ru.init(Nu,Fu)}}),Lu=Tu.enc={},Bu=Lu.Hex={stringify:function(Fu){for(var Nu=Fu.words,Gu=Fu.sigBytes,zu=[],Hu=0;Hu<Gu;Hu++){var Uu=Nu[Hu>>>2]>>>24-Hu%4*8&255;zu.push((Uu>>>4).toString(16)),zu.push((15&Uu).toString(16))}return zu.join("")},parse:function(Fu){for(var Nu=Fu.length,Gu=[],zu=0;zu<Nu;zu+=2)Gu[zu>>>3]|=parseInt(Fu.substr(zu,2),16)<<24-zu%8*4;return new Ru.init(Gu,Nu/2)}},Vu=Lu.Latin1={stringify:function(Fu){for(var Nu=Fu.words,Gu=Fu.sigBytes,zu=[],Hu=0;Hu<Gu;Hu++){var Uu=Nu[Hu>>>2]>>>24-Hu%4*8&255;zu.push(String.fromCharCode(Uu))}return zu.join("")},parse:function(Fu){for(var Nu=Fu.length,Gu=[],zu=0;zu<Nu;zu++)Gu[zu>>>2]|=(255&Fu.charCodeAt(zu))<<24-zu%4*8;return new Ru.init(Gu,Nu)}},Ou=Lu.Utf8={stringify:function(Fu){try{return decodeURIComponent(escape(Vu.stringify(Fu)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Fu){return Vu.parse(unescape(encodeURIComponent(Fu)))}},Du=Cu.BufferedBlockAlgorithm=Pu.extend({reset:function(){this._data=new Ru.init,this._nDataBytes=0},_append:function(Fu){typeof Fu=="string"&&(Fu=Ou.parse(Fu)),this._data.concat(Fu),this._nDataBytes+=Fu.sigBytes},_process:function(Fu){var Nu=this._data,Gu=Nu.words,zu=Nu.sigBytes,Hu=this.blockSize,Uu=zu/(4*Hu),ju=(Uu=Fu?_u.ceil(Uu):_u.max((0|Uu)-this._minBufferSize,0))*Hu,Wu=_u.min(4*ju,zu);if(ju){for(var Qu=0;Qu<ju;Qu+=Hu)this._doProcessBlock(Gu,Qu);var qu=Gu.splice(0,ju);Nu.sigBytes-=Wu}return new Ru.init(qu,Wu)},clone:function(){var Fu=Pu.clone.call(this);return Fu._data=this._data.clone(),Fu},_minBufferSize:0});Cu.Hasher=Du.extend({cfg:Pu.extend(),init:function(Fu){this.cfg=this.cfg.extend(Fu),this.reset()},reset:function(){Du.reset.call(this),this._doReset()},update:function(Fu){return this._append(Fu),this._process(),this},finalize:function(Fu){return Fu&&this._append(Fu),this._doFinalize()},blockSize:16,_createHelper:function(Fu){return function(Nu,Gu){return new Fu.init(Gu).finalize(Nu)}},_createHmacHelper:function(Fu){return function(Nu,Gu){return new ku.HMAC.init(Fu,Gu).finalize(Nu)}}});var ku=Tu.algo={};return Tu}(Math);function c$s(_u,$u,Tu){_u!=null&&(typeof _u=="number"?this.fromNumber(_u,$u,Tu):$u==null&&typeof _u!="string"?this.fromString(_u,256):this.fromString(_u,$u))}function d$n(){return new c$s(null)}(function(_u){for(var $u=h$j,Tu=(Pu=$u.lib).WordArray,Cu=Pu.Hasher,Pu=$u.algo,Ru=[],Lu=[],Bu=function(Gu){return 4294967296*(Gu-(0|Gu))|0},Vu=2,Ou=0;64>Ou;){var Du;e:{Du=Vu;for(var ku=_u.sqrt(Du),Fu=2;Fu<=ku;Fu++)if(!(Du%Fu)){Du=!1;break e}Du=!0}Du&&(8>Ou&&(Ru[Ou]=Bu(_u.pow(Vu,.5))),Lu[Ou]=Bu(_u.pow(Vu,1/3)),Ou++),Vu++}var Nu=[];Pu=Pu.SHA256=Cu.extend({_doReset:function(){this._hash=new Tu.init(Ru.slice(0))},_doProcessBlock:function(Gu,zu){for(var Hu=this._hash.words,Uu=Hu[0],ju=Hu[1],Wu=Hu[2],Qu=Hu[3],qu=Hu[4],Yu=Hu[5],Ju=Hu[6],_d=Hu[7],tp=0;64>tp;tp++){if(16>tp)Nu[tp]=0|Gu[zu+tp];else{var Ku=Nu[tp-15],Xu=Nu[tp-2];Nu[tp]=((Ku<<25|Ku>>>7)^(Ku<<14|Ku>>>18)^Ku>>>3)+Nu[tp-7]+((Xu<<15|Xu>>>17)^(Xu<<13|Xu>>>19)^Xu>>>10)+Nu[tp-16]}Ku=_d+((qu<<26|qu>>>6)^(qu<<21|qu>>>11)^(qu<<7|qu>>>25))+(qu&Yu^~qu&Ju)+Lu[tp]+Nu[tp],Xu=((Uu<<30|Uu>>>2)^(Uu<<19|Uu>>>13)^(Uu<<10|Uu>>>22))+(Uu&ju^Uu&Wu^ju&Wu),_d=Ju,Ju=Yu,Yu=qu,qu=Qu+Ku|0,Qu=Wu,Wu=ju,ju=Uu,Uu=Ku+Xu|0}Hu[0]=Hu[0]+Uu|0,Hu[1]=Hu[1]+ju|0,Hu[2]=Hu[2]+Wu|0,Hu[3]=Hu[3]+Qu|0,Hu[4]=Hu[4]+qu|0,Hu[5]=Hu[5]+Yu|0,Hu[6]=Hu[6]+Ju|0,Hu[7]=Hu[7]+_d|0},_doFinalize:function(){var Gu=this._data,zu=Gu.words,Hu=8*this._nDataBytes,Uu=8*Gu.sigBytes;return zu[Uu>>>5]|=128<<24-Uu%32,zu[14+(Uu+64>>>9<<4)]=_u.floor(Hu/4294967296),zu[15+(Uu+64>>>9<<4)]=Hu,Gu.sigBytes=4*zu.length,this._process(),this._hash},clone:function(){var Gu=Cu.clone.call(this);return Gu._hash=this._hash.clone(),Gu}}),$u.SHA256=Cu._createHelper(Pu),$u.HmacSHA256=Cu._createHmacHelper(Pu)})(Math),h$j.lib.Cipher||function(_u){var $u=(Nu=h$j).lib,Tu=$u.Base,Cu=$u.WordArray,Pu=$u.BufferedBlockAlgorithm,Ru=Nu.enc.Base64,Lu=Nu.algo.EvpKDF,Bu=$u.Cipher=Pu.extend({cfg:Tu.extend(),createEncryptor:function(zu,Hu){return this.create(this._ENC_XFORM_MODE,zu,Hu)},createDecryptor:function(zu,Hu){return this.create(this._DEC_XFORM_MODE,zu,Hu)},init:function(zu,Hu,Uu){this.cfg=this.cfg.extend(Uu),this._xformMode=zu,this._key=Hu,this.reset()},reset:function(){Pu.reset.call(this),this._doReset()},process:function(zu){return this._append(zu),this._process()},finalize:function(zu){return zu&&this._append(zu),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(zu){return{encrypt:function(Hu,Uu,ju){return(typeof Uu=="string"?Gu:Fu).encrypt(zu,Hu,Uu,ju)},decrypt:function(Hu,Uu,ju){return(typeof Uu=="string"?Gu:Fu).decrypt(zu,Hu,Uu,ju)}}}});$u.StreamCipher=Bu.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Vu=Nu.mode={},Ou=function(zu,Hu,Uu){var ju=this._iv;ju?this._iv=void 0:ju=this._prevBlock;for(var Wu=0;Wu<Uu;Wu++)zu[Hu+Wu]^=ju[Wu]},Du=($u.BlockCipherMode=Tu.extend({createEncryptor:function(zu,Hu){return this.Encryptor.create(zu,Hu)},createDecryptor:function(zu,Hu){return this.Decryptor.create(zu,Hu)},init:function(zu,Hu){this._cipher=zu,this._iv=Hu}})).extend();Du.Encryptor=Du.extend({processBlock:function(zu,Hu){var Uu=this._cipher,ju=Uu.blockSize;Ou.call(this,zu,Hu,ju),Uu.encryptBlock(zu,Hu),this._prevBlock=zu.slice(Hu,Hu+ju)}}),Du.Decryptor=Du.extend({processBlock:function(zu,Hu){var Uu=this._cipher,ju=Uu.blockSize,Wu=zu.slice(Hu,Hu+ju);Uu.decryptBlock(zu,Hu),Ou.call(this,zu,Hu,ju),this._prevBlock=Wu}}),Vu=Vu.CBC=Du,Du=(Nu.pad={}).Pkcs7={pad:function(zu,Hu){for(var Uu,ju=(Uu=(Uu=4*Hu)-zu.sigBytes%Uu)<<24|Uu<<16|Uu<<8|Uu,Wu=[],Qu=0;Qu<Uu;Qu+=4)Wu.push(ju);Uu=Cu.create(Wu,Uu),zu.concat(Uu)},unpad:function(zu){zu.sigBytes-=255&zu.words[zu.sigBytes-1>>>2]}},$u.BlockCipher=Bu.extend({cfg:Bu.cfg.extend({mode:Vu,padding:Du}),reset:function(){Bu.reset.call(this);var zu=(Hu=this.cfg).iv,Hu=Hu.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Uu=Hu.createEncryptor;else Uu=Hu.createDecryptor,this._minBufferSize=1;this._mode=Uu.call(Hu,this,zu&&zu.words)},_doProcessBlock:function(zu,Hu){this._mode.processBlock(zu,Hu)},_doFinalize:function(){var zu=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){zu.pad(this._data,this.blockSize);var Hu=this._process(!0)}else Hu=this._process(!0),zu.unpad(Hu);return Hu},blockSize:4});var ku=$u.CipherParams=Tu.extend({init:function(zu){this.mixIn(zu)},toString:function(zu){return(zu||this.formatter).stringify(this)}}),Fu=(Vu=(Nu.format={}).OpenSSL={stringify:function(zu){var Hu=zu.ciphertext;return((zu=zu.salt)?Cu.create([1398893684,1701076831]).concat(zu).concat(Hu):Hu).toString(Ru)},parse:function(zu){var Hu=(zu=Ru.parse(zu)).words;if(Hu[0]==1398893684&&Hu[1]==1701076831){var Uu=Cu.create(Hu.slice(2,4));Hu.splice(0,4),zu.sigBytes-=16}return ku.create({ciphertext:zu,salt:Uu})}},$u.SerializableCipher=Tu.extend({cfg:Tu.extend({format:Vu}),encrypt:function(zu,Hu,Uu,ju){ju=this.cfg.extend(ju);var Wu=zu.createEncryptor(Uu,ju);return Hu=Wu.finalize(Hu),Wu=Wu.cfg,ku.create({ciphertext:Hu,key:Uu,iv:Wu.iv,algorithm:zu,mode:Wu.mode,padding:Wu.padding,blockSize:zu.blockSize,formatter:ju.format})},decrypt:function(zu,Hu,Uu,ju){return ju=this.cfg.extend(ju),Hu=this._parse(Hu,ju.format),zu.createDecryptor(Uu,ju).finalize(Hu.ciphertext)},_parse:function(zu,Hu){return typeof zu=="string"?Hu.parse(zu,this):zu}})),Nu=(Nu.kdf={}).OpenSSL={execute:function(zu,Hu,Uu,ju){return ju||(ju=Cu.random(8)),zu=Lu.create({keySize:Hu+Uu}).compute(zu,ju),Uu=Cu.create(zu.words.slice(Hu),4*Uu),zu.sigBytes=4*Hu,ku.create({key:zu,iv:Uu,salt:ju})}},Gu=$u.PasswordBasedCipher=Fu.extend({cfg:Fu.cfg.extend({kdf:Nu}),encrypt:function(zu,Hu,Uu,ju){return Uu=(ju=this.cfg.extend(ju)).kdf.execute(Uu,zu.keySize,zu.ivSize),ju.iv=Uu.iv,(zu=Fu.encrypt.call(this,zu,Hu,Uu.key,ju)).mixIn(Uu),zu},decrypt:function(zu,Hu,Uu,ju){return ju=this.cfg.extend(ju),Hu=this._parse(Hu,ju.format),Uu=ju.kdf.execute(Uu,zu.keySize,zu.ivSize,Hu.salt),ju.iv=Uu.iv,Fu.decrypt.call(this,zu,Hu,Uu.key,ju)}})}(),function(){for(var _u=h$j,$u=_u.lib.BlockCipher,Tu=_u.algo,Cu=[],Pu=[],Ru=[],Lu=[],Bu=[],Vu=[],Ou=[],Du=[],ku=[],Fu=[],Nu=[],Gu=0;256>Gu;Gu++)Nu[Gu]=128>Gu?Gu<<1:Gu<<1^283;var zu=0,Hu=0;for(Gu=0;256>Gu;Gu++){var Uu=(Uu=Hu^Hu<<1^Hu<<2^Hu<<3^Hu<<4)>>>8^255&Uu^99;Cu[zu]=Uu,Pu[Uu]=zu;var ju=Nu[zu],Wu=Nu[ju],Qu=Nu[Wu],qu=257*Nu[Uu]^16843008*Uu;Ru[zu]=qu<<24|qu>>>8,Lu[zu]=qu<<16|qu>>>16,Bu[zu]=qu<<8|qu>>>24,Vu[zu]=qu,qu=16843009*Qu^65537*Wu^257*ju^16843008*zu,Ou[Uu]=qu<<24|qu>>>8,Du[Uu]=qu<<16|qu>>>16,ku[Uu]=qu<<8|qu>>>24,Fu[Uu]=qu,zu?(zu=ju^Nu[Nu[Nu[Qu^ju]]],Hu^=Nu[Nu[Hu]]):zu=Hu=1}var Yu=[0,1,2,4,8,16,32,64,128,27,54];Tu=Tu.AES=$u.extend({_doReset:function(){for(var Ju=(tp=this._key).words,_d=tp.sigBytes/4,tp=4*((this._nRounds=_d+6)+1),Ku=this._keySchedule=[],Xu=0;Xu<tp;Xu++)if(Xu<_d)Ku[Xu]=Ju[Xu];else{var Zu=Ku[Xu-1];Xu%_d?6<_d&&Xu%_d==4&&(Zu=Cu[Zu>>>24]<<24|Cu[Zu>>>16&255]<<16|Cu[Zu>>>8&255]<<8|Cu[255&Zu]):(Zu=Cu[(Zu=Zu<<8|Zu>>>24)>>>24]<<24|Cu[Zu>>>16&255]<<16|Cu[Zu>>>8&255]<<8|Cu[255&Zu],Zu^=Yu[Xu/_d|0]<<24),Ku[Xu]=Ku[Xu-_d]^Zu}for(Ju=this._invKeySchedule=[],_d=0;_d<tp;_d++)Xu=tp-_d,Zu=_d%4?Ku[Xu]:Ku[Xu-4],Ju[_d]=4>_d||4>=Xu?Zu:Ou[Cu[Zu>>>24]]^Du[Cu[Zu>>>16&255]]^ku[Cu[Zu>>>8&255]]^Fu[Cu[255&Zu]]},encryptBlock:function(Ju,_d){this._doCryptBlock(Ju,_d,this._keySchedule,Ru,Lu,Bu,Vu,Cu)},decryptBlock:function(Ju,_d){var tp=Ju[_d+1];Ju[_d+1]=Ju[_d+3],Ju[_d+3]=tp,this._doCryptBlock(Ju,_d,this._invKeySchedule,Ou,Du,ku,Fu,Pu),tp=Ju[_d+1],Ju[_d+1]=Ju[_d+3],Ju[_d+3]=tp},_doCryptBlock:function(Ju,_d,tp,Ku,Xu,Zu,_c,Xc){for(var _h=this._nRounds,ip=Ju[_d]^tp[0],ap=Ju[_d+1]^tp[1],hp=Ju[_d+2]^tp[2],Ap=Ju[_d+3]^tp[3],gp=4,Rp=1;Rp<_h;Rp++){var Sp=Ku[ip>>>24]^Xu[ap>>>16&255]^Zu[hp>>>8&255]^_c[255&Ap]^tp[gp++],Dp=Ku[ap>>>24]^Xu[hp>>>16&255]^Zu[Ap>>>8&255]^_c[255&ip]^tp[gp++],Ep=Ku[hp>>>24]^Xu[Ap>>>16&255]^Zu[ip>>>8&255]^_c[255&ap]^tp[gp++];Ap=Ku[Ap>>>24]^Xu[ip>>>16&255]^Zu[ap>>>8&255]^_c[255&hp]^tp[gp++],ip=Sp,ap=Dp,hp=Ep}Sp=(Xc[ip>>>24]<<24|Xc[ap>>>16&255]<<16|Xc[hp>>>8&255]<<8|Xc[255&Ap])^tp[gp++],Dp=(Xc[ap>>>24]<<24|Xc[hp>>>16&255]<<16|Xc[Ap>>>8&255]<<8|Xc[255&ip])^tp[gp++],Ep=(Xc[hp>>>24]<<24|Xc[Ap>>>16&255]<<16|Xc[ip>>>8&255]<<8|Xc[255&ap])^tp[gp++],Ap=(Xc[Ap>>>24]<<24|Xc[ip>>>16&255]<<16|Xc[ap>>>8&255]<<8|Xc[255&hp])^tp[gp++],Ju[_d]=Sp,Ju[_d+1]=Dp,Ju[_d+2]=Ep,Ju[_d+3]=Ap},keySize:8}),_u.AES=$u._createHelper(Tu)}(),u$k.lang={extend:function(_u,$u,Tu){if(!$u||!_u)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Cu=function(){};if(Cu.prototype=$u.prototype,_u.prototype=new Cu,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u),Tu){var Pu;for(Pu in Tu)_u.prototype[Pu]=Tu[Pu];var Ru=function(){},Lu=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Ru=function(Bu,Vu){for(Pu=0;Pu<Lu.length;Pu+=1){var Ou=Lu[Pu],Du=Vu[Ou];typeof Du=="function"&&Du!=Object.prototype[Ou]&&(Bu[Ou]=Du)}})}catch{}Ru(_u.prototype,Tu)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$s.prototype.am=function(_u,$u,Tu,Cu,Pu,Ru){for(var Lu=32767&$u,Bu=$u>>15;--Ru>=0;){var Vu=32767&this[_u],Ou=this[_u++]>>15,Du=Bu*Vu+Ou*Lu;Pu=((Vu=Lu*Vu+((32767&Du)<<15)+Tu[Cu]+(1073741823&Pu))>>>30)+(Du>>>15)+Bu*Ou+(Pu>>>30),Tu[Cu++]=1073741823&Vu}return Pu},a$k=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$s.prototype.am=function(_u,$u,Tu,Cu,Pu,Ru){for(;--Ru>=0;){var Lu=$u*this[_u++]+Tu[Cu]+Pu;Pu=Math.floor(Lu/67108864),Tu[Cu++]=67108863&Lu}return Pu},a$k=26):(c$s.prototype.am=function(_u,$u,Tu,Cu,Pu,Ru){for(var Lu=16383&$u,Bu=$u>>14;--Ru>=0;){var Vu=16383&this[_u],Ou=this[_u++]>>14,Du=Bu*Vu+Ou*Lu;Pu=((Vu=Lu*Vu+((16383&Du)<<14)+Tu[Cu]+Pu)>>28)+(Du>>14)+Bu*Ou,Tu[Cu++]=268435455&Vu}return Pu},a$k=28),c$s.prototype.DB=a$k,c$s.prototype.DM=(1<<a$k)-1,c$s.prototype.DV=1<<a$k;c$s.prototype.FV=Math.pow(2,52),c$s.prototype.F1=52-a$k,c$s.prototype.F2=2*a$k-52;var p$h,f$g,A$j=new Array;for(p$h="0".charCodeAt(0),f$g=0;f$g<=9;++f$g)A$j[p$h++]=f$g;for(p$h="a".charCodeAt(0),f$g=10;f$g<36;++f$g)A$j[p$h++]=f$g;for(p$h="A".charCodeAt(0),f$g=10;f$g<36;++f$g)A$j[p$h++]=f$g;function g$n(_u){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(_u)}function m$i(_u,$u){var Tu=A$j[_u.charCodeAt($u)];return Tu==null?-1:Tu}function v$e(_u){var $u=d$n();return $u.fromInt(_u),$u}function y$l(_u){var $u,Tu=1;return($u=_u>>>16)!=0&&(_u=$u,Tu+=16),($u=_u>>8)!=0&&(_u=$u,Tu+=8),($u=_u>>4)!=0&&(_u=$u,Tu+=4),($u=_u>>2)!=0&&(_u=$u,Tu+=2),($u=_u>>1)!=0&&(_u=$u,Tu+=1),Tu}function b$e(_u){this.m=_u}function x$g(_u){this.m=_u,this.mp=_u.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<_u.DB-15)-1,this.mt2=2*_u.t}function w$g(_u,$u){return _u&$u}function E$i(_u,$u){return _u|$u}function M$m(_u,$u){return _u^$u}function I$h(_u,$u){return _u&~$u}function S$c(_u){if(_u==0)return-1;var $u=0;return(65535&_u)==0&&(_u>>=16,$u+=16),(255&_u)==0&&(_u>>=8,$u+=8),(15&_u)==0&&(_u>>=4,$u+=4),(3&_u)==0&&(_u>>=2,$u+=2),(1&_u)==0&&++$u,$u}function C$k(_u){for(var $u=0;_u!=0;)_u&=_u-1,++$u;return $u}function B$b(){}function T$c(_u){return _u}function P$e(_u){this.r2=d$n(),this.q3=d$n(),c$s.ONE.dlShiftTo(2*_u.t,this.r2),this.mu=this.r2.divide(_u),this.m=_u}b$e.prototype.convert=function(_u){return _u.s<0||_u.compareTo(this.m)>=0?_u.mod(this.m):_u},b$e.prototype.revert=function(_u){return _u},b$e.prototype.reduce=function(_u){_u.divRemTo(this.m,null,_u)},b$e.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu),this.reduce(Tu)},b$e.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},x$g.prototype.convert=function(_u){var $u=d$n();return _u.abs().dlShiftTo(this.m.t,$u),$u.divRemTo(this.m,null,$u),_u.s<0&&$u.compareTo(c$s.ZERO)>0&&this.m.subTo($u,$u),$u},x$g.prototype.revert=function(_u){var $u=d$n();return _u.copyTo($u),this.reduce($u),$u},x$g.prototype.reduce=function(_u){for(;_u.t<=this.mt2;)_u[_u.t++]=0;for(var $u=0;$u<this.m.t;++$u){var Tu=32767&_u[$u],Cu=Tu*this.mpl+((Tu*this.mph+(_u[$u]>>15)*this.mpl&this.um)<<15)&_u.DM;for(_u[Tu=$u+this.m.t]+=this.m.am(0,Cu,_u,$u,0,this.m.t);_u[Tu]>=_u.DV;)_u[Tu]-=_u.DV,_u[++Tu]++}_u.clamp(),_u.drShiftTo(this.m.t,_u),_u.compareTo(this.m)>=0&&_u.subTo(this.m,_u)},x$g.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu),this.reduce(Tu)},x$g.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},c$s.prototype.copyTo=function(_u){for(var $u=this.t-1;$u>=0;--$u)_u[$u]=this[$u];_u.t=this.t,_u.s=this.s},c$s.prototype.fromInt=function(_u){this.t=1,this.s=_u<0?-1:0,_u>0?this[0]=_u:_u<-1?this[0]=_u+this.DV:this.t=0},c$s.prototype.fromString=function(_u,$u){var Tu;if($u==16)Tu=4;else if($u==8)Tu=3;else if($u==256)Tu=8;else if($u==2)Tu=1;else if($u==32)Tu=5;else{if($u!=4)return void this.fromRadix(_u,$u);Tu=2}this.t=0,this.s=0;for(var Cu=_u.length,Pu=!1,Ru=0;--Cu>=0;){var Lu=Tu==8?255&_u[Cu]:m$i(_u,Cu);Lu<0?_u.charAt(Cu)=="-"&&(Pu=!0):(Pu=!1,Ru==0?this[this.t++]=Lu:Ru+Tu>this.DB?(this[this.t-1]|=(Lu&(1<<this.DB-Ru)-1)<<Ru,this[this.t++]=Lu>>this.DB-Ru):this[this.t-1]|=Lu<<Ru,(Ru+=Tu)>=this.DB&&(Ru-=this.DB))}Tu==8&&(128&_u[0])!=0&&(this.s=-1,Ru>0&&(this[this.t-1]|=(1<<this.DB-Ru)-1<<Ru)),this.clamp(),Pu&&c$s.ZERO.subTo(this,this)},c$s.prototype.clamp=function(){for(var _u=this.s&this.DM;this.t>0&&this[this.t-1]==_u;)--this.t},c$s.prototype.dlShiftTo=function(_u,$u){var Tu;for(Tu=this.t-1;Tu>=0;--Tu)$u[Tu+_u]=this[Tu];for(Tu=_u-1;Tu>=0;--Tu)$u[Tu]=0;$u.t=this.t+_u,$u.s=this.s},c$s.prototype.drShiftTo=function(_u,$u){for(var Tu=_u;Tu<this.t;++Tu)$u[Tu-_u]=this[Tu];$u.t=Math.max(this.t-_u,0),$u.s=this.s},c$s.prototype.lShiftTo=function(_u,$u){var Tu,Cu=_u%this.DB,Pu=this.DB-Cu,Ru=(1<<Pu)-1,Lu=Math.floor(_u/this.DB),Bu=this.s<<Cu&this.DM;for(Tu=this.t-1;Tu>=0;--Tu)$u[Tu+Lu+1]=this[Tu]>>Pu|Bu,Bu=(this[Tu]&Ru)<<Cu;for(Tu=Lu-1;Tu>=0;--Tu)$u[Tu]=0;$u[Lu]=Bu,$u.t=this.t+Lu+1,$u.s=this.s,$u.clamp()},c$s.prototype.rShiftTo=function(_u,$u){$u.s=this.s;var Tu=Math.floor(_u/this.DB);if(Tu>=this.t)$u.t=0;else{var Cu=_u%this.DB,Pu=this.DB-Cu,Ru=(1<<Cu)-1;$u[0]=this[Tu]>>Cu;for(var Lu=Tu+1;Lu<this.t;++Lu)$u[Lu-Tu-1]|=(this[Lu]&Ru)<<Pu,$u[Lu-Tu]=this[Lu]>>Cu;Cu>0&&($u[this.t-Tu-1]|=(this.s&Ru)<<Pu),$u.t=this.t-Tu,$u.clamp()}},c$s.prototype.subTo=function(_u,$u){for(var Tu=0,Cu=0,Pu=Math.min(_u.t,this.t);Tu<Pu;)Cu+=this[Tu]-_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;if(_u.t<this.t){for(Cu-=_u.s;Tu<this.t;)Cu+=this[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu+=this.s}else{for(Cu+=this.s;Tu<_u.t;)Cu-=_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu-=_u.s}$u.s=Cu<0?-1:0,Cu<-1?$u[Tu++]=this.DV+Cu:Cu>0&&($u[Tu++]=Cu),$u.t=Tu,$u.clamp()},c$s.prototype.multiplyTo=function(_u,$u){var Tu=this.abs(),Cu=_u.abs(),Pu=Tu.t;for($u.t=Pu+Cu.t;--Pu>=0;)$u[Pu]=0;for(Pu=0;Pu<Cu.t;++Pu)$u[Pu+Tu.t]=Tu.am(0,Cu[Pu],$u,Pu,0,Tu.t);$u.s=0,$u.clamp(),this.s!=_u.s&&c$s.ZERO.subTo($u,$u)},c$s.prototype.squareTo=function(_u){for(var $u=this.abs(),Tu=_u.t=2*$u.t;--Tu>=0;)_u[Tu]=0;for(Tu=0;Tu<$u.t-1;++Tu){var Cu=$u.am(Tu,$u[Tu],_u,2*Tu,0,1);(_u[Tu+$u.t]+=$u.am(Tu+1,2*$u[Tu],_u,2*Tu+1,Cu,$u.t-Tu-1))>=$u.DV&&(_u[Tu+$u.t]-=$u.DV,_u[Tu+$u.t+1]=1)}_u.t>0&&(_u[_u.t-1]+=$u.am(Tu,$u[Tu],_u,2*Tu,0,1)),_u.s=0,_u.clamp()},c$s.prototype.divRemTo=function(_u,$u,Tu){var Cu=_u.abs();if(!(Cu.t<=0)){var Pu=this.abs();if(Pu.t<Cu.t)return $u!=null&&$u.fromInt(0),void(Tu!=null&&this.copyTo(Tu));Tu==null&&(Tu=d$n());var Ru=d$n(),Lu=this.s,Bu=_u.s,Vu=this.DB-y$l(Cu[Cu.t-1]);Vu>0?(Cu.lShiftTo(Vu,Ru),Pu.lShiftTo(Vu,Tu)):(Cu.copyTo(Ru),Pu.copyTo(Tu));var Ou=Ru.t,Du=Ru[Ou-1];if(Du!=0){var ku=Du*(1<<this.F1)+(Ou>1?Ru[Ou-2]>>this.F2:0),Fu=this.FV/ku,Nu=(1<<this.F1)/ku,Gu=1<<this.F2,zu=Tu.t,Hu=zu-Ou,Uu=$u==null?d$n():$u;for(Ru.dlShiftTo(Hu,Uu),Tu.compareTo(Uu)>=0&&(Tu[Tu.t++]=1,Tu.subTo(Uu,Tu)),c$s.ONE.dlShiftTo(Ou,Uu),Uu.subTo(Ru,Ru);Ru.t<Ou;)Ru[Ru.t++]=0;for(;--Hu>=0;){var ju=Tu[--zu]==Du?this.DM:Math.floor(Tu[zu]*Fu+(Tu[zu-1]+Gu)*Nu);if((Tu[zu]+=Ru.am(0,ju,Tu,Hu,0,Ou))<ju)for(Ru.dlShiftTo(Hu,Uu),Tu.subTo(Uu,Tu);Tu[zu]<--ju;)Tu.subTo(Uu,Tu)}$u!=null&&(Tu.drShiftTo(Ou,$u),Lu!=Bu&&c$s.ZERO.subTo($u,$u)),Tu.t=Ou,Tu.clamp(),Vu>0&&Tu.rShiftTo(Vu,Tu),Lu<0&&c$s.ZERO.subTo(Tu,Tu)}}},c$s.prototype.invDigit=function(){if(this.t<1)return 0;var _u=this[0];if((1&_u)==0)return 0;var $u=3&_u;return($u=($u=($u=($u=$u*(2-(15&_u)*$u)&15)*(2-(255&_u)*$u)&255)*(2-((65535&_u)*$u&65535))&65535)*(2-_u*$u%this.DV)%this.DV)>0?this.DV-$u:-$u},c$s.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$s.prototype.exp=function(_u,$u){if(_u>4294967295||_u<1)return c$s.ONE;var Tu=d$n(),Cu=d$n(),Pu=$u.convert(this),Ru=y$l(_u)-1;for(Pu.copyTo(Tu);--Ru>=0;)if($u.sqrTo(Tu,Cu),(_u&1<<Ru)>0)$u.mulTo(Cu,Pu,Tu);else{var Lu=Tu;Tu=Cu,Cu=Lu}return $u.revert(Tu)},c$s.prototype.toString=function(_u){if(this.s<0)return"-"+this.negate().toString(_u);var $u;if(_u==16)$u=4;else if(_u==8)$u=3;else if(_u==2)$u=1;else if(_u==32)$u=5;else{if(_u!=4)return this.toRadix(_u);$u=2}var Tu,Cu=(1<<$u)-1,Pu=!1,Ru="",Lu=this.t,Bu=this.DB-Lu*this.DB%$u;if(Lu-- >0)for(Bu<this.DB&&(Tu=this[Lu]>>Bu)>0&&(Pu=!0,Ru=g$n(Tu));Lu>=0;)Bu<$u?(Tu=(this[Lu]&(1<<Bu)-1)<<$u-Bu,Tu|=this[--Lu]>>(Bu+=this.DB-$u)):(Tu=this[Lu]>>(Bu-=$u)&Cu,Bu<=0&&(Bu+=this.DB,--Lu)),Tu>0&&(Pu=!0),Pu&&(Ru+=g$n(Tu));return Pu?Ru:"0"},c$s.prototype.negate=function(){var _u=d$n();return c$s.ZERO.subTo(this,_u),_u},c$s.prototype.abs=function(){return this.s<0?this.negate():this},c$s.prototype.compareTo=function(_u){var $u=this.s-_u.s;if($u!=0)return $u;var Tu=this.t;if(($u=Tu-_u.t)!=0)return this.s<0?-$u:$u;for(;--Tu>=0;)if(($u=this[Tu]-_u[Tu])!=0)return $u;return 0},c$s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$l(this[this.t-1]^this.s&this.DM)},c$s.prototype.mod=function(_u){var $u=d$n();return this.abs().divRemTo(_u,null,$u),this.s<0&&$u.compareTo(c$s.ZERO)>0&&_u.subTo($u,$u),$u},c$s.prototype.modPowInt=function(_u,$u){var Tu;return Tu=_u<256||$u.isEven()?new b$e($u):new x$g($u),this.exp(_u,Tu)},c$s.ZERO=v$e(0),c$s.ONE=v$e(1),B$b.prototype.convert=T$c,B$b.prototype.revert=T$c,B$b.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu)},B$b.prototype.sqrTo=function(_u,$u){_u.squareTo($u)},P$e.prototype.convert=function(_u){if(_u.s<0||_u.t>2*this.m.t)return _u.mod(this.m);if(_u.compareTo(this.m)<0)return _u;var $u=d$n();return _u.copyTo($u),this.reduce($u),$u},P$e.prototype.revert=function(_u){return _u},P$e.prototype.reduce=function(_u){for(_u.drShiftTo(this.m.t-1,this.r2),_u.t>this.m.t+1&&(_u.t=this.m.t+1,_u.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);_u.compareTo(this.r2)<0;)_u.dAddOffset(1,this.m.t+1);for(_u.subTo(this.r2,_u);_u.compareTo(this.m)>=0;)_u.subTo(this.m,_u)},P$e.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu),this.reduce(Tu)},P$e.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)};var R$d=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k$f=(1<<26)/R$d[R$d.length-1];c$s.prototype.chunkSize=function(_u){return Math.floor(Math.LN2*this.DB/Math.log(_u))},c$s.prototype.toRadix=function(_u){if(_u==null&&(_u=10),this.signum()==0||_u<2||_u>36)return"0";var $u=this.chunkSize(_u),Tu=Math.pow(_u,$u),Cu=v$e(Tu),Pu=d$n(),Ru=d$n(),Lu="";for(this.divRemTo(Cu,Pu,Ru);Pu.signum()>0;)Lu=(Tu+Ru.intValue()).toString(_u).substr(1)+Lu,Pu.divRemTo(Cu,Pu,Ru);return Ru.intValue().toString(_u)+Lu},c$s.prototype.fromRadix=function(_u,$u){this.fromInt(0),$u==null&&($u=10);for(var Tu=this.chunkSize($u),Cu=Math.pow($u,Tu),Pu=!1,Ru=0,Lu=0,Bu=0;Bu<_u.length;++Bu){var Vu=m$i(_u,Bu);Vu<0?_u.charAt(Bu)=="-"&&this.signum()==0&&(Pu=!0):(Lu=$u*Lu+Vu,++Ru>=Tu&&(this.dMultiply(Cu),this.dAddOffset(Lu,0),Ru=0,Lu=0))}Ru>0&&(this.dMultiply(Math.pow($u,Ru)),this.dAddOffset(Lu,0)),Pu&&c$s.ZERO.subTo(this,this)},c$s.prototype.fromNumber=function(_u,$u,Tu){if(typeof $u=="number")if(_u<2)this.fromInt(1);else for(this.fromNumber(_u,Tu),this.testBit(_u-1)||this.bitwiseTo(c$s.ONE.shiftLeft(_u-1),E$i,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime($u);)this.dAddOffset(2,0),this.bitLength()>_u&&this.subTo(c$s.ONE.shiftLeft(_u-1),this);else{var Cu=new Array,Pu=7&_u;Cu.length=1+(_u>>3),$u.nextBytes(Cu),Pu>0?Cu[0]&=(1<<Pu)-1:Cu[0]=0,this.fromString(Cu,256)}},c$s.prototype.bitwiseTo=function(_u,$u,Tu){var Cu,Pu,Ru=Math.min(_u.t,this.t);for(Cu=0;Cu<Ru;++Cu)Tu[Cu]=$u(this[Cu],_u[Cu]);if(_u.t<this.t){for(Pu=_u.s&this.DM,Cu=Ru;Cu<this.t;++Cu)Tu[Cu]=$u(this[Cu],Pu);Tu.t=this.t}else{for(Pu=this.s&this.DM,Cu=Ru;Cu<_u.t;++Cu)Tu[Cu]=$u(Pu,_u[Cu]);Tu.t=_u.t}Tu.s=$u(this.s,_u.s),Tu.clamp()},c$s.prototype.changeBit=function(_u,$u){var Tu=c$s.ONE.shiftLeft(_u);return this.bitwiseTo(Tu,$u,Tu),Tu},c$s.prototype.addTo=function(_u,$u){for(var Tu=0,Cu=0,Pu=Math.min(_u.t,this.t);Tu<Pu;)Cu+=this[Tu]+_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;if(_u.t<this.t){for(Cu+=_u.s;Tu<this.t;)Cu+=this[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu+=this.s}else{for(Cu+=this.s;Tu<_u.t;)Cu+=_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu+=_u.s}$u.s=Cu<0?-1:0,Cu>0?$u[Tu++]=Cu:Cu<-1&&($u[Tu++]=this.DV+Cu),$u.t=Tu,$u.clamp()},c$s.prototype.dMultiply=function(_u){this[this.t]=this.am(0,_u-1,this,0,0,this.t),++this.t,this.clamp()},c$s.prototype.dAddOffset=function(_u,$u){if(_u!=0){for(;this.t<=$u;)this[this.t++]=0;for(this[$u]+=_u;this[$u]>=this.DV;)this[$u]-=this.DV,++$u>=this.t&&(this[this.t++]=0),++this[$u]}},c$s.prototype.multiplyLowerTo=function(_u,$u,Tu){var Cu,Pu=Math.min(this.t+_u.t,$u);for(Tu.s=0,Tu.t=Pu;Pu>0;)Tu[--Pu]=0;for(Cu=Tu.t-this.t;Pu<Cu;++Pu)Tu[Pu+this.t]=this.am(0,_u[Pu],Tu,Pu,0,this.t);for(Cu=Math.min(_u.t,$u);Pu<Cu;++Pu)this.am(0,_u[Pu],Tu,Pu,0,$u-Pu);Tu.clamp()},c$s.prototype.multiplyUpperTo=function(_u,$u,Tu){--$u;var Cu=Tu.t=this.t+_u.t-$u;for(Tu.s=0;--Cu>=0;)Tu[Cu]=0;for(Cu=Math.max($u-this.t,0);Cu<_u.t;++Cu)Tu[this.t+Cu-$u]=this.am($u-Cu,_u[Cu],Tu,0,0,this.t+Cu-$u);Tu.clamp(),Tu.drShiftTo(1,Tu)},c$s.prototype.modInt=function(_u){if(_u<=0)return 0;var $u=this.DV%_u,Tu=this.s<0?_u-1:0;if(this.t>0)if($u==0)Tu=this[0]%_u;else for(var Cu=this.t-1;Cu>=0;--Cu)Tu=($u*Tu+this[Cu])%_u;return Tu},c$s.prototype.millerRabin=function(_u){var $u=this.subtract(c$s.ONE),Tu=$u.getLowestSetBit();if(Tu<=0)return!1;var Cu=$u.shiftRight(Tu);(_u=_u+1>>1)>R$d.length&&(_u=R$d.length);for(var Pu=d$n(),Ru=0;Ru<_u;++Ru){Pu.fromInt(R$d[Math.floor(Math.random()*R$d.length)]);var Lu=Pu.modPow(Cu,this);if(Lu.compareTo(c$s.ONE)!=0&&Lu.compareTo($u)!=0){for(var Bu=1;Bu++<Tu&&Lu.compareTo($u)!=0;)if((Lu=Lu.modPowInt(2,this)).compareTo(c$s.ONE)==0)return!1;if(Lu.compareTo($u)!=0)return!1}}return!0},c$s.prototype.clone=function(){var _u=d$n();return this.copyTo(_u),_u},c$s.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$s.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$s.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$s.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$s.prototype.toByteArray=function(){var _u=this.t,$u=new Array;$u[0]=this.s;var Tu,Cu=this.DB-_u*this.DB%8,Pu=0;if(_u-- >0)for(Cu<this.DB&&(Tu=this[_u]>>Cu)!=(this.s&this.DM)>>Cu&&($u[Pu++]=Tu|this.s<<this.DB-Cu);_u>=0;)Cu<8?(Tu=(this[_u]&(1<<Cu)-1)<<8-Cu,Tu|=this[--_u]>>(Cu+=this.DB-8)):(Tu=this[_u]>>(Cu-=8)&255,Cu<=0&&(Cu+=this.DB,--_u)),(128&Tu)!=0&&(Tu|=-256),Pu==0&&(128&this.s)!=(128&Tu)&&++Pu,(Pu>0||Tu!=this.s)&&($u[Pu++]=Tu);return $u},c$s.prototype.equals=function(_u){return this.compareTo(_u)==0},c$s.prototype.min=function(_u){return this.compareTo(_u)<0?this:_u},c$s.prototype.max=function(_u){return this.compareTo(_u)>0?this:_u},c$s.prototype.and=function(_u){var $u=d$n();return this.bitwiseTo(_u,w$g,$u),$u},c$s.prototype.or=function(_u){var $u=d$n();return this.bitwiseTo(_u,E$i,$u),$u},c$s.prototype.xor=function(_u){var $u=d$n();return this.bitwiseTo(_u,M$m,$u),$u},c$s.prototype.andNot=function(_u){var $u=d$n();return this.bitwiseTo(_u,I$h,$u),$u},c$s.prototype.not=function(){for(var _u=d$n(),$u=0;$u<this.t;++$u)_u[$u]=this.DM&~this[$u];return _u.t=this.t,_u.s=~this.s,_u},c$s.prototype.shiftLeft=function(_u){var $u=d$n();return _u<0?this.rShiftTo(-_u,$u):this.lShiftTo(_u,$u),$u},c$s.prototype.shiftRight=function(_u){var $u=d$n();return _u<0?this.lShiftTo(-_u,$u):this.rShiftTo(_u,$u),$u},c$s.prototype.getLowestSetBit=function(){for(var _u=0;_u<this.t;++_u)if(this[_u]!=0)return _u*this.DB+S$c(this[_u]);return this.s<0?this.t*this.DB:-1},c$s.prototype.bitCount=function(){for(var _u=0,$u=this.s&this.DM,Tu=0;Tu<this.t;++Tu)_u+=C$k(this[Tu]^$u);return _u},c$s.prototype.testBit=function(_u){var $u=Math.floor(_u/this.DB);return $u>=this.t?this.s!=0:(this[$u]&1<<_u%this.DB)!=0},c$s.prototype.setBit=function(_u){return this.changeBit(_u,E$i)},c$s.prototype.clearBit=function(_u){return this.changeBit(_u,I$h)},c$s.prototype.flipBit=function(_u){return this.changeBit(_u,M$m)},c$s.prototype.add=function(_u){var $u=d$n();return this.addTo(_u,$u),$u},c$s.prototype.subtract=function(_u){var $u=d$n();return this.subTo(_u,$u),$u},c$s.prototype.multiply=function(_u){var $u=d$n();return this.multiplyTo(_u,$u),$u},c$s.prototype.divide=function(_u){var $u=d$n();return this.divRemTo(_u,$u,null),$u},c$s.prototype.remainder=function(_u){var $u=d$n();return this.divRemTo(_u,null,$u),$u},c$s.prototype.divideAndRemainder=function(_u){var $u=d$n(),Tu=d$n();return this.divRemTo(_u,$u,Tu),new Array($u,Tu)},c$s.prototype.modPow=function(_u,$u){var Tu,Cu,Pu=_u.bitLength(),Ru=v$e(1);if(Pu<=0)return Ru;Tu=Pu<18?1:Pu<48?3:Pu<144?4:Pu<768?5:6,Cu=Pu<8?new b$e($u):$u.isEven()?new P$e($u):new x$g($u);var Lu=new Array,Bu=3,Vu=Tu-1,Ou=(1<<Tu)-1;if(Lu[1]=Cu.convert(this),Tu>1){var Du=d$n();for(Cu.sqrTo(Lu[1],Du);Bu<=Ou;)Lu[Bu]=d$n(),Cu.mulTo(Du,Lu[Bu-2],Lu[Bu]),Bu+=2}var ku,Fu,Nu=_u.t-1,Gu=!0,zu=d$n();for(Pu=y$l(_u[Nu])-1;Nu>=0;){for(Pu>=Vu?ku=_u[Nu]>>Pu-Vu&Ou:(ku=(_u[Nu]&(1<<Pu+1)-1)<<Vu-Pu,Nu>0&&(ku|=_u[Nu-1]>>this.DB+Pu-Vu)),Bu=Tu;(1&ku)==0;)ku>>=1,--Bu;if((Pu-=Bu)<0&&(Pu+=this.DB,--Nu),Gu)Lu[ku].copyTo(Ru),Gu=!1;else{for(;Bu>1;)Cu.sqrTo(Ru,zu),Cu.sqrTo(zu,Ru),Bu-=2;Bu>0?Cu.sqrTo(Ru,zu):(Fu=Ru,Ru=zu,zu=Fu),Cu.mulTo(zu,Lu[ku],Ru)}for(;Nu>=0&&(_u[Nu]&1<<Pu)==0;)Cu.sqrTo(Ru,zu),Fu=Ru,Ru=zu,zu=Fu,--Pu<0&&(Pu=this.DB-1,--Nu)}return Cu.revert(Ru)},c$s.prototype.modInverse=function(_u){var $u=_u.isEven();if(this.isEven()&&$u||_u.signum()==0)return c$s.ZERO;for(var Tu=_u.clone(),Cu=this.clone(),Pu=v$e(1),Ru=v$e(0),Lu=v$e(0),Bu=v$e(1);Tu.signum()!=0;){for(;Tu.isEven();)Tu.rShiftTo(1,Tu),$u?(Pu.isEven()&&Ru.isEven()||(Pu.addTo(this,Pu),Ru.subTo(_u,Ru)),Pu.rShiftTo(1,Pu)):Ru.isEven()||Ru.subTo(_u,Ru),Ru.rShiftTo(1,Ru);for(;Cu.isEven();)Cu.rShiftTo(1,Cu),$u?(Lu.isEven()&&Bu.isEven()||(Lu.addTo(this,Lu),Bu.subTo(_u,Bu)),Lu.rShiftTo(1,Lu)):Bu.isEven()||Bu.subTo(_u,Bu),Bu.rShiftTo(1,Bu);Tu.compareTo(Cu)>=0?(Tu.subTo(Cu,Tu),$u&&Pu.subTo(Lu,Pu),Ru.subTo(Bu,Ru)):(Cu.subTo(Tu,Cu),$u&&Lu.subTo(Pu,Lu),Bu.subTo(Ru,Bu))}return Cu.compareTo(c$s.ONE)!=0?c$s.ZERO:Bu.compareTo(_u)>=0?Bu.subtract(_u):Bu.signum()<0?(Bu.addTo(_u,Bu),Bu.signum()<0?Bu.add(_u):Bu):Bu},c$s.prototype.pow=function(_u){return this.exp(_u,new B$b)},c$s.prototype.gcd=function(_u){var $u=this.s<0?this.negate():this.clone(),Tu=_u.s<0?_u.negate():_u.clone();if($u.compareTo(Tu)<0){var Cu=$u;$u=Tu,Tu=Cu}var Pu=$u.getLowestSetBit(),Ru=Tu.getLowestSetBit();if(Ru<0)return $u;for(Pu<Ru&&(Ru=Pu),Ru>0&&($u.rShiftTo(Ru,$u),Tu.rShiftTo(Ru,Tu));$u.signum()>0;)(Pu=$u.getLowestSetBit())>0&&$u.rShiftTo(Pu,$u),(Pu=Tu.getLowestSetBit())>0&&Tu.rShiftTo(Pu,Tu),$u.compareTo(Tu)>=0?($u.subTo(Tu,$u),$u.rShiftTo(1,$u)):(Tu.subTo($u,Tu),Tu.rShiftTo(1,Tu));return Ru>0&&Tu.lShiftTo(Ru,Tu),Tu},c$s.prototype.isProbablePrime=function(_u){var $u,Tu=this.abs();if(Tu.t==1&&Tu[0]<=R$d[R$d.length-1]){for($u=0;$u<R$d.length;++$u)if(Tu[0]==R$d[$u])return!0;return!1}if(Tu.isEven())return!1;for($u=1;$u<R$d.length;){for(var Cu=R$d[$u],Pu=$u+1;Pu<R$d.length&&Cu<k$f;)Cu*=R$d[Pu++];for(Cu=Tu.modInt(Cu);$u<Pu;)if(Cu%R$d[$u++]==0)return!1}return Tu.millerRabin(_u)},c$s.prototype.square=function(){var _u=d$n();return this.squareTo(_u),_u};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D$d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L$f(_u){var $u,Tu,Cu="";for($u=0;$u+3<=_u.length;$u+=3)Tu=parseInt(_u.substring($u,$u+3),16),Cu+=D$d.charAt(Tu>>6)+D$d.charAt(63&Tu);for($u+1==_u.length?(Tu=parseInt(_u.substring($u,$u+1),16),Cu+=D$d.charAt(Tu<<2)):$u+2==_u.length&&(Tu=parseInt(_u.substring($u,$u+2),16),Cu+=D$d.charAt(Tu>>2)+D$d.charAt((3&Tu)<<4));(3&Cu.length)>0;)Cu+="=";return Cu}function O$e(_u){var $u,Tu,Cu,Pu="",Ru=0;for($u=0;$u<_u.length&&_u.charAt($u)!="=";++$u)(Cu=D$d.indexOf(_u.charAt($u)))<0||(Ru==0?(Pu+=g$n(Cu>>2),Tu=3&Cu,Ru=1):Ru==1?(Pu+=g$n(Tu<<2|Cu>>4),Tu=15&Cu,Ru=2):Ru==2?(Pu+=g$n(Tu),Pu+=g$n(Cu>>2),Tu=3&Cu,Ru=3):(Pu+=g$n(Tu<<2|Cu>>4),Pu+=g$n(15&Cu),Ru=0));return Ru==1&&(Pu+=g$n(Tu<<2)),Pu}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function N$a(){this.i=0,this.j=0,this.S=new Array}N$a.prototype.init=function(_u){var $u,Tu,Cu;for($u=0;$u<256;++$u)this.S[$u]=$u;for(Tu=0,$u=0;$u<256;++$u)Tu=Tu+this.S[$u]+_u[$u%_u.length]&255,Cu=this.S[$u],this.S[$u]=this.S[Tu],this.S[Tu]=Cu;this.i=0,this.j=0},N$a.prototype.next=function(){var _u;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,_u=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=_u,this.S[_u+this.S[this.i]&255]};var F$d,Q$e,V$b;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function _$9(){var _u;_u=new Date().getTime(),Q$e[V$b++]^=255&_u,Q$e[V$b++]^=_u>>8&255,Q$e[V$b++]^=_u>>16&255,Q$e[V$b++]^=_u>>24&255,V$b>=256&&(V$b-=256)}if(Q$e==null){var H$b;if(Q$e=new Array,V$b=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var q$9=window.crypto||window.msCrypto;if(q$9.getRandomValues){var z$c=new Uint8Array(32);for(q$9.getRandomValues(z$c),H$b=0;H$b<32;++H$b)Q$e[V$b++]=z$c[H$b]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var K$e=window.crypto.random(32);for(H$b=0;H$b<K$e.length;++H$b)Q$e[V$b++]=255&K$e.charCodeAt(H$b)}}for(;V$b<256;)H$b=Math.floor(65536*Math.random()),Q$e[V$b++]=H$b>>>8,Q$e[V$b++]=255&H$b;V$b=0,_$9()}function U$c(){if(F$d==null){for(_$9(),(F$d=new N$a).init(Q$e),V$b=0;V$b<Q$e.length;++V$b)Q$e[V$b]=0;V$b=0}return F$d.next()}function j$8(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G$a(_u,$u){return new c$s(_u,$u)}function W$8(_u,$u,Tu){for(var Cu="",Pu=0;Cu.length<$u;)Cu+=Tu(String.fromCharCode.apply(String,_u.concat([(4278190080&Pu)>>24,(16711680&Pu)>>16,(65280&Pu)>>8,255&Pu]))),Pu+=1;return Cu}function X$5(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y$a(_u,$u,Tu){for(var Cu="",Pu=0;Cu.length<$u;)Cu+=Tu(_u+String.fromCharCode.apply(String,[(4278190080&Pu)>>24,(16711680&Pu)>>16,(65280&Pu)>>8,255&Pu])),Pu+=1;return Cu}function Z$7(_u){for(var $u="",Tu=0;Tu<_u.length;Tu++){var Cu=_u[Tu].toString(16);Cu.length==1&&(Cu="0"+Cu),$u+=Cu}return $u}function J$a(_u){return Z$7(function($u){for(var Tu=new Array,Cu=0;Cu<$u.length;Cu++)Tu[Cu]=$u.charCodeAt(Cu);return Tu}(_u))}function $$7(_u){return _u.length%4==2?_u+="==":_u.length%4==3&&(_u+="="),_u=(_u=_u.replace(/-/g,"+")).replace(/_/g,"/")}function ee$3(_u){return _u.length%2==1&&(_u="0"+_u),function($u){return($u=($u=$u.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(L$f(_u))}function te$2(_u){return O$e($$7(_u))}function ie$4(_u){return function($u){return $u.replace(/%/g,"")}(function($u){for(var Tu=encodeURIComponent($u),Cu="",Pu=0;Pu<Tu.length;Pu++)Tu[Pu]=="%"?(Cu+=Tu.substr(Pu,3),Pu+=2):Cu=Cu+"%"+J$a(Tu[Pu]);return Cu}(_u))}function ne$1(_u){return decodeURIComponent(function($u){return $u.replace(/(..)/g,"%$1")}(_u))}function re$3(_u){for(var $u="",Tu=0;Tu<_u.length-1;Tu+=2)$u+=String.fromCharCode(parseInt(_u.substr(Tu,2),16));return $u}function oe$1(_u){for(var $u="",Tu=0;Tu<_u.length;Tu++)$u+=("0"+_u.charCodeAt(Tu).toString(16)).slice(-2);return $u}function se$2(_u){var $u=function(Tu){return L$f(Tu)}(_u).replace(/(.{64})/g,`$1\r
`);return $u=$u.replace(/\r\n$/,"")}function ae$2(_u,$u){return"-----BEGIN "+$u+`-----\r
`+se$2(_u)+`\r
-----END `+$u+`-----\r
`}function le$2(_u,$u){if(_u.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+$u;return function(Tu){return O$e(Tu.replace(/[^0-9A-Za-z\/+=]*/g,""))}(_u=$u!==void 0?(_u=_u.replace(new RegExp("^[^]*-----BEGIN "+$u+"-----"),"")).replace(new RegExp("-----END "+$u+"-----[^]*$"),""):(_u=_u.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ue$2(_u){var $u="malformed hex value";if(!_u.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw $u;if(_u.length!=8)return _u.length==32?function(Tu){if(!Tu.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Cu=(Tu=Tu.toLowerCase()).match(/.{1,4}/g),Pu=0;Pu<8;Pu++)Cu[Pu]=Cu[Pu].replace(/^0+/,""),Cu[Pu]==""&&(Cu[Pu]="0");var Ru=(Tu=":"+Cu.join(":")+":").match(/:(0:){2,}/g);if(Ru===null)return Tu.slice(1,-1);var Lu="";for(Pu=0;Pu<Ru.length;Pu++)Ru[Pu].length>Lu.length&&(Lu=Ru[Pu]);return(Tu=Tu.replace(Lu,"::")).slice(1,-1)}(_u):_u;try{return parseInt(_u.substr(0,2),16)+"."+parseInt(_u.substr(2,2),16)+"."+parseInt(_u.substr(4,2),16)+"."+parseInt(_u.substr(6,2),16)}catch{throw $u}}function he$4(_u){return _u.match(/.{4}/g).map(function($u){var Tu=parseInt($u.substr(0,2),16),Cu=parseInt($u.substr(2),16);if(Tu==0&Cu<128)return String.fromCharCode(Cu);if(Tu<8){var Pu=128|63&Cu;return ne$1((192|(7&Tu)<<3|(192&Cu)>>6).toString(16)+Pu.toString(16))}Pu=128|(15&Tu)<<2|(192&Cu)>>6;var Ru=128|63&Cu;return ne$1((224|(240&Tu)>>4).toString(16)+Pu.toString(16)+Ru.toString(16))}).join("")}function ce$2(_u){return!(_u.length%2!=0||!_u.match(/^[0-9a-f]+$/)&&!_u.match(/^[0-9A-F]+$/))}function de$4(_u){return _u.length%2==1?"0"+_u:_u.substr(0,1)>"7"?"00"+_u:_u}j$8.prototype.nextBytes=function(_u){var $u;for($u=0;$u<_u.length;++$u)_u[$u]=U$c()},X$5.prototype.doPublic=function(_u){return _u.modPowInt(this.e,this.n)},X$5.prototype.setPublic=function(_u,$u){if(this.isPublic=!0,this.isPrivate=!1,typeof _u!="string")this.n=_u,this.e=$u;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA public key";this.n=G$a(_u,16),this.e=parseInt($u,16)}},X$5.prototype.encrypt=function(_u){var $u=function(Pu,Ru){if(Ru<Pu.length+11)throw"Message too long for RSA";for(var Lu=new Array,Bu=Pu.length-1;Bu>=0&&Ru>0;){var Vu=Pu.charCodeAt(Bu--);Vu<128?Lu[--Ru]=Vu:Vu>127&&Vu<2048?(Lu[--Ru]=63&Vu|128,Lu[--Ru]=Vu>>6|192):(Lu[--Ru]=63&Vu|128,Lu[--Ru]=Vu>>6&63|128,Lu[--Ru]=Vu>>12|224)}Lu[--Ru]=0;for(var Ou=new j$8,Du=new Array;Ru>2;){for(Du[0]=0;Du[0]==0;)Ou.nextBytes(Du);Lu[--Ru]=Du[0]}return Lu[--Ru]=2,Lu[--Ru]=0,new c$s(Lu)}(_u,this.n.bitLength()+7>>3);if($u==null)return null;var Tu=this.doPublic($u);if(Tu==null)return null;var Cu=Tu.toString(16);return(1&Cu.length)==0?Cu:"0"+Cu},X$5.prototype.encryptOAEP=function(_u,$u,Tu){var Cu=function(Lu,Bu,Vu,Ou){var Du=l$j.crypto.MessageDigest,ku=l$j.crypto.Util,Fu=null;if(Vu||(Vu="sha1"),typeof Vu=="string"&&(Fu=Du.getCanonicalAlgName(Vu),Ou=Du.getHashLength(Fu),Vu=function(qu){return re$3(ku.hashHex(oe$1(qu),Fu))}),Lu.length+2*Ou+2>Bu)throw"Message too long for RSA";var Nu,Gu="";for(Nu=0;Nu<Bu-Lu.length-2*Ou-2;Nu+=1)Gu+="\0";var zu=Vu("")+Gu+""+Lu,Hu=new Array(Ou);new j$8().nextBytes(Hu);var Uu=W$8(Hu,zu.length,Vu),ju=[];for(Nu=0;Nu<zu.length;Nu+=1)ju[Nu]=zu.charCodeAt(Nu)^Uu.charCodeAt(Nu);var Wu=W$8(ju,Hu.length,Vu),Qu=[0];for(Nu=0;Nu<Hu.length;Nu+=1)Qu[Nu+1]=Hu[Nu]^Wu.charCodeAt(Nu);return new c$s(Qu.concat(ju))}(_u,this.n.bitLength()+7>>3,$u,Tu);if(Cu==null)return null;var Pu=this.doPublic(Cu);if(Pu==null)return null;var Ru=Pu.toString(16);return(1&Ru.length)==0?Ru:"0"+Ru},X$5.prototype.type="RSA",X$5.prototype.doPrivate=function(_u){if(this.p==null||this.q==null)return _u.modPow(this.d,this.n);for(var $u=_u.mod(this.p).modPow(this.dmp1,this.p),Tu=_u.mod(this.q).modPow(this.dmq1,this.q);$u.compareTo(Tu)<0;)$u=$u.add(this.p);return $u.subtract(Tu).multiply(this.coeff).mod(this.p).multiply(this.q).add(Tu)},X$5.prototype.setPrivate=function(_u,$u,Tu){if(this.isPrivate=!0,typeof _u!="string")this.n=_u,this.e=$u,this.d=Tu;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key";this.n=G$a(_u,16),this.e=parseInt($u,16),this.d=G$a(Tu,16)}},X$5.prototype.setPrivateEx=function(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){if(this.isPrivate=!0,this.isPublic=!1,_u==null)throw"RSASetPrivateEx N == null";if($u==null)throw"RSASetPrivateEx E == null";if(_u.length==0)throw"RSASetPrivateEx N.length == 0";if($u.length==0)throw"RSASetPrivateEx E.length == 0";if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G$a(_u,16),this.e=parseInt($u,16),this.d=G$a(Tu,16),this.p=G$a(Cu,16),this.q=G$a(Pu,16),this.dmp1=G$a(Ru,16),this.dmq1=G$a(Lu,16),this.coeff=G$a(Bu,16)},X$5.prototype.generate=function(_u,$u){var Tu=new j$8,Cu=_u>>1;this.e=parseInt($u,16);for(var Pu=new c$s($u,16);;){for(;this.p=new c$s(_u-Cu,1,Tu),this.p.subtract(c$s.ONE).gcd(Pu).compareTo(c$s.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$s(Cu,1,Tu),this.q.subtract(c$s.ONE).gcd(Pu).compareTo(c$s.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Ru=this.p;this.p=this.q,this.q=Ru}var Lu=this.p.subtract(c$s.ONE),Bu=this.q.subtract(c$s.ONE),Vu=Lu.multiply(Bu);if(Vu.gcd(Pu).compareTo(c$s.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==_u)){this.d=Pu.modInverse(Vu),this.dmp1=this.d.mod(Lu),this.dmq1=this.d.mod(Bu),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X$5.prototype.decrypt=function(_u){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var $u=G$a(_u,16),Tu=this.doPrivate($u);return Tu==null?null:function(Cu,Pu){for(var Ru=Cu.toByteArray(),Lu=0;Lu<Ru.length&&Ru[Lu]==0;)++Lu;if(Ru.length-Lu!=Pu-1||Ru[Lu]!=2)return null;for(++Lu;Ru[Lu]!=0;)if(++Lu>=Ru.length)return null;for(var Bu="";++Lu<Ru.length;){var Vu=255&Ru[Lu];Vu<128?Bu+=String.fromCharCode(Vu):Vu>191&&Vu<224?(Bu+=String.fromCharCode((31&Vu)<<6|63&Ru[Lu+1]),++Lu):(Bu+=String.fromCharCode((15&Vu)<<12|(63&Ru[Lu+1])<<6|63&Ru[Lu+2]),Lu+=2)}return Bu}(Tu,this.n.bitLength()+7>>3)},X$5.prototype.decryptOAEP=function(_u,$u,Tu){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Cu=G$a(_u,16),Pu=this.doPrivate(Cu);return Pu==null?null:function(Ru,Lu,Bu,Vu){var Ou=l$j.crypto.MessageDigest,Du=l$j.crypto.Util,ku=null;for(Bu||(Bu="sha1"),typeof Bu=="string"&&(ku=Ou.getCanonicalAlgName(Bu),Vu=Ou.getHashLength(ku),Bu=function(Qu){return re$3(Du.hashHex(oe$1(Qu),ku))}),Ru=Ru.toByteArray(),Fu=0;Fu<Ru.length;Fu+=1)Ru[Fu]&=255;for(;Ru.length<Lu;)Ru.unshift(0);if((Ru=String.fromCharCode.apply(String,Ru)).length<2*Vu+2)throw"Cipher too short";var Fu,Nu=Ru.substr(1,Vu),Gu=Ru.substr(Vu+1),zu=Y$a(Gu,Vu,Bu),Hu=[];for(Fu=0;Fu<Nu.length;Fu+=1)Hu[Fu]=Nu.charCodeAt(Fu)^zu.charCodeAt(Fu);var Uu=Y$a(String.fromCharCode.apply(String,Hu),Ru.length-Vu,Bu),ju=[];for(Fu=0;Fu<Gu.length;Fu+=1)ju[Fu]=Gu.charCodeAt(Fu)^Uu.charCodeAt(Fu);if((ju=String.fromCharCode.apply(String,ju)).substr(0,Vu)!==Bu(""))throw"Hash mismatch";var Wu=(ju=ju.substr(Vu)).indexOf("");if((Wu!=-1?ju.substr(0,Wu).lastIndexOf("\0"):-1)+1!=Wu)throw"Malformed data";return ju.substr(Wu+1)}(Pu,this.n.bitLength()+7>>3,$u,Tu)},l$j.lang!==void 0&&l$j.lang||(l$j.lang={}),l$j.lang.String=function(){},l$j.lang.String.isInteger=function(_u){return!!_u.match(/^[0-9]+$/)||!!_u.match(/^-[0-9]+$/)},l$j.lang.String.isHex=function(_u){return ce$2(_u)},l$j.lang.String.isBase64=function(_u){return!(!(_u=_u.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||_u.length%4!=0)},l$j.lang.String.isBase64URL=function(_u){return!_u.match(/[+/=]/)&&(_u=$$7(_u),l$j.lang.String.isBase64(_u))},l$j.lang.String.isIntegerArray=function(_u){return!!(_u=_u.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},l$j.lang.String.isPrintable=function(_u){return _u.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},l$j.lang.String.isIA5=function(_u){return _u.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},l$j.lang.String.isMail=function(_u){return _u.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pe$5=function(_u,$u,Tu){return Tu==null&&(Tu="0"),_u.length>=$u?_u:new Array($u-_u.length+1).join(Tu)+_u};function fe$3(_u,$u){var Tu=function(){};Tu.prototype=$u.prototype,_u.prototype=new Tu,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u)}l$j.crypto!==void 0&&l$j.crypto||(l$j.crypto={}),l$j.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$j.algo.MD5,sha1:h$j.algo.SHA1,sha224:h$j.algo.SHA224,sha256:h$j.algo.SHA256,sha384:h$j.algo.SHA384,sha512:h$j.algo.SHA512,ripemd160:h$j.algo.RIPEMD160},this.getDigestInfoHex=function(_u,$u){if(this.DIGESTINFOHEAD[$u]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+$u;return this.DIGESTINFOHEAD[$u]+_u},this.getPaddedDigestInfoHex=function(_u,$u,Tu){var Cu=this.getDigestInfoHex(_u,$u),Pu=Tu/4;if(Cu.length+22>Pu)throw"key is too short for SigAlg: keylen="+Tu+","+$u;for(var Ru="0001",Lu="00"+Cu,Bu="",Vu=Pu-Ru.length-Lu.length,Ou=0;Ou<Vu;Ou+=2)Bu+="ff";return Ru+Bu+Lu},this.hashString=function(_u,$u){return new l$j.crypto.MessageDigest({alg:$u}).digestString(_u)},this.hashHex=function(_u,$u){return new l$j.crypto.MessageDigest({alg:$u}).digestHex(_u)},this.sha1=function(_u){return this.hashString(_u,"sha1")},this.sha256=function(_u){return this.hashString(_u,"sha256")},this.sha256Hex=function(_u){return this.hashHex(_u,"sha256")},this.sha512=function(_u){return this.hashString(_u,"sha512")},this.sha512Hex=function(_u){return this.hashHex(_u,"sha512")},this.isKey=function(_u){return _u instanceof X$5||_u instanceof l$j.crypto.DSA||_u instanceof l$j.crypto.ECDSA}},l$j.crypto.Util.md5=function(_u){return new l$j.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(_u)},l$j.crypto.Util.ripemd160=function(_u){return new l$j.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(_u)},l$j.crypto.Util.SECURERANDOMGEN=new j$8,l$j.crypto.Util.getRandomHexOfNbytes=function(_u){var $u=new Array(_u);return l$j.crypto.Util.SECURERANDOMGEN.nextBytes($u),Z$7($u)},l$j.crypto.Util.getRandomBigIntegerOfNbytes=function(_u){return new c$s(l$j.crypto.Util.getRandomHexOfNbytes(_u),16)},l$j.crypto.Util.getRandomHexOfNbits=function(_u){var $u=_u%8,Tu=new Array((_u-$u)/8+1);return l$j.crypto.Util.SECURERANDOMGEN.nextBytes(Tu),Tu[0]=(255<<$u&255^255)&Tu[0],Z$7(Tu)},l$j.crypto.Util.getRandomBigIntegerOfNbits=function(_u){return new c$s(l$j.crypto.Util.getRandomHexOfNbits(_u),16)},l$j.crypto.Util.getRandomBigIntegerZeroToMax=function(_u){for(var $u=_u.bitLength();;){var Tu=l$j.crypto.Util.getRandomBigIntegerOfNbits($u);if(_u.compareTo(Tu)!=-1)return Tu}},l$j.crypto.Util.getRandomBigIntegerMinToMax=function(_u,$u){var Tu=_u.compareTo($u);if(Tu==1)throw"biMin is greater than biMax";if(Tu==0)return _u;var Cu=$u.subtract(_u);return l$j.crypto.Util.getRandomBigIntegerZeroToMax(Cu).add(_u)},l$j.crypto.MessageDigest=function(_u){this.setAlgAndProvider=function($u,Tu){if(($u=l$j.crypto.MessageDigest.getCanonicalAlgName($u))!==null&&Tu===void 0&&(Tu=l$j.crypto.Util.DEFAULTPROVIDER[$u]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf($u)!=-1&&Tu=="cryptojs"){try{this.md=l$j.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[$u].create()}catch(Cu){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Cu}this.updateString=function(Cu){this.md.update(Cu)},this.updateHex=function(Cu){var Pu=h$j.enc.Hex.parse(Cu);this.md.update(Pu)},this.digest=function(){return this.md.finalize().toString(h$j.enc.Hex)},this.digestString=function(Cu){return this.updateString(Cu),this.digest()},this.digestHex=function(Cu){return this.updateHex(Cu),this.digest()}}if(":sha256:".indexOf($u)!=-1&&Tu=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Cu){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Cu}this.updateString=function(Cu){this.md.update(Cu)},this.updateHex=function(Cu){var Pu=sjcl.codec.hex.toBits(Cu);this.md.update(Pu)},this.digest=function(){var Cu=this.md.finalize();return sjcl.codec.hex.fromBits(Cu)},this.digestString=function(Cu){return this.updateString(Cu),this.digest()},this.digestHex=function(Cu){return this.updateHex(Cu),this.digest()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},_u!==void 0&&_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$j.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},l$j.crypto.MessageDigest.getCanonicalAlgName=function(_u){return typeof _u=="string"&&(_u=(_u=_u.toLowerCase()).replace(/-/,"")),_u},l$j.crypto.MessageDigest.getHashLength=function(_u){var $u=l$j.crypto.MessageDigest,Tu=$u.getCanonicalAlgName(_u);if($u.HASHLENGTH[Tu]===void 0)throw"not supported algorithm: "+_u;return $u.HASHLENGTH[Tu]},l$j.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},l$j.crypto.Mac=function(_u){this.setAlgAndProvider=function($u,Tu){if(($u=$u.toLowerCase())==null&&($u="hmacsha1"),($u=$u.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+$u;Tu===void 0&&(Tu=l$j.crypto.Util.DEFAULTPROVIDER[$u]),this.algProv=$u+"/"+Tu;var Cu=$u.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Cu)!=-1&&Tu=="cryptojs"){try{var Pu=l$j.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Cu];this.mac=h$j.algo.HMAC.create(Pu,this.pass)}catch(Ru){throw"setAlgAndProvider hash alg set fail hashAlg="+Cu+"/"+Ru}this.updateString=function(Ru){this.mac.update(Ru)},this.updateHex=function(Ru){var Lu=h$j.enc.Hex.parse(Ru);this.mac.update(Lu)},this.doFinal=function(){return this.mac.finalize().toString(h$j.enc.Hex)},this.doFinalString=function(Ru){return this.updateString(Ru),this.doFinal()},this.doFinalHex=function(Ru){return this.updateHex(Ru),this.doFinal()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function($u){if(typeof $u=="string"){var Tu=$u;return $u.length%2!=1&&$u.match(/^[0-9A-Fa-f]+$/)||(Tu=oe$1($u)),void(this.pass=h$j.enc.Hex.parse(Tu))}if(typeof $u!="object")throw"KJUR.crypto.Mac unsupported password type: "+$u;if(Tu=null,$u.hex!==void 0){if($u.hex.length%2!=0||!$u.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+$u.hex;Tu=$u.hex}if($u.utf8!==void 0&&(Tu=ie$4($u.utf8)),$u.rstr!==void 0&&(Tu=oe$1($u.rstr)),$u.b64!==void 0&&(Tu=O$e($u.b64)),$u.b64u!==void 0&&(Tu=te$2($u.b64u)),Tu==null)throw"KJUR.crypto.Mac unsupported password type: "+$u;this.pass=h$j.enc.Hex.parse(Tu)},_u!==void 0&&(_u.pass!==void 0&&this.setPassword(_u.pass),_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$j.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},l$j.crypto.Signature=function(_u){var $u=null;if(this._setAlgNames=function(){var Tu=this.algName.match(/^(.+)with(.+)$/);Tu&&(this.mdAlgName=Tu[1].toLowerCase(),this.pubkeyAlgName=Tu[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Tu,Cu){for(var Pu="",Ru=Cu/4-Tu.length,Lu=0;Lu<Ru;Lu++)Pu+="0";return Pu+Tu},this.setAlgAndProvider=function(Tu,Cu){if(this._setAlgNames(),Cu!="cryptojs/jsrsa")throw new Error("provider not supported: "+Cu);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new l$j.crypto.MessageDigest({alg:this.mdAlgName})}catch(Pu){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Pu)}this.init=function(Pu,Ru){var Lu=null;try{Lu=Ru===void 0?Ee$1.getKey(Pu):Ee$1.getKey(Pu,Ru)}catch(Bu){throw"init failed:"+Bu}if(Lu.isPrivate===!0)this.prvKey=Lu,this.state="SIGN";else{if(Lu.isPublic!==!0)throw"init failed.:"+Lu;this.pubKey=Lu,this.state="VERIFY"}},this.updateString=function(Pu){this.md.updateString(Pu)},this.updateHex=function(Pu){this.md.updateHex(Pu)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&l$j.crypto.ECDSA!==void 0&&(this.prvKey=new l$j.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X$5&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X$5&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof l$j.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof l$j.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Pu){return this.updateString(Pu),this.sign()},this.signHex=function(Pu){return this.updateHex(Pu),this.sign()},this.verify=function(Pu){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&l$j.crypto.ECDSA!==void 0&&(this.pubKey=new l$j.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X$5&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Pu,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X$5&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Pu);if(l$j.crypto.ECDSA!==void 0&&this.pubKey instanceof l$j.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Pu);if(l$j.crypto.DSA!==void 0&&this.pubKey instanceof l$j.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Pu);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Tu,Cu){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Tu){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Tu){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Tu){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Tu){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Tu){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=_u,_u!==void 0&&(_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0?this.provName=l$j.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=_u.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),_u.psssaltlen!==void 0&&(this.pssSaltLen=_u.psssaltlen),_u.prvkeypem!==void 0)){if(_u.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{$u=Ee$1.getKey(_u.prvkeypem),this.init($u)}catch(Tu){throw"fatal error to load pem private key: "+Tu}}},l$j.crypto.Cipher=function(_u){},l$j.crypto.Cipher.encrypt=function(_u,$u,Tu){if($u instanceof X$5&&$u.isPublic){var Cu=l$j.crypto.Cipher.getAlgByKeyAndName($u,Tu);if(Cu==="RSA")return $u.encrypt(_u);if(Cu==="RSAOAEP")return $u.encryptOAEP(_u,"sha1");var Pu=Cu.match(/^RSAOAEP(\d+)$/);if(Pu!==null)return $u.encryptOAEP(_u,"sha"+Pu[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+Tu}throw"Cipher.encrypt: unsupported key or algorithm"},l$j.crypto.Cipher.decrypt=function(_u,$u,Tu){if($u instanceof X$5&&$u.isPrivate){var Cu=l$j.crypto.Cipher.getAlgByKeyAndName($u,Tu);if(Cu==="RSA")return $u.decrypt(_u);if(Cu==="RSAOAEP")return $u.decryptOAEP(_u,"sha1");var Pu=Cu.match(/^RSAOAEP(\d+)$/);if(Pu!==null)return $u.decryptOAEP(_u,"sha"+Pu[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+Tu}throw"Cipher.decrypt: unsupported key or algorithm"},l$j.crypto.Cipher.getAlgByKeyAndName=function(_u,$u){if(_u instanceof X$5){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf($u)!=-1)return $u;if($u==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+$u}throw"getAlgByKeyAndName: not supported algorithm name: "+$u},l$j.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Ae$1,ge$4,me$3,ve$2,ye$3,be$3,xe$1,we$2,Ee$1=(Ae$1=function(_u,$u,Tu){return ge$4(h$j.AES,_u,$u,Tu)},ge$4=function(_u,$u,Tu,Cu){var Pu=h$j.enc.Hex.parse($u),Ru=h$j.enc.Hex.parse(Tu),Lu=h$j.enc.Hex.parse(Cu),Bu={};Bu.key=Ru,Bu.iv=Lu,Bu.ciphertext=Pu;var Vu=_u.decrypt(Bu,Ru,{iv:Lu});return h$j.enc.Hex.stringify(Vu)},me$3=function(_u,$u,Tu){return ve$2(h$j.AES,_u,$u,Tu)},ve$2=function(_u,$u,Tu,Cu){var Pu=h$j.enc.Hex.parse($u),Ru=h$j.enc.Hex.parse(Tu),Lu=h$j.enc.Hex.parse(Cu),Bu=_u.encrypt(Pu,Ru,{iv:Lu}),Vu=h$j.enc.Hex.parse(Bu.toString());return h$j.enc.Base64.stringify(Vu)},ye$3={"AES-256-CBC":{proc:Ae$1,eproc:me$3,keylen:32,ivlen:16},"AES-192-CBC":{proc:Ae$1,eproc:me$3,keylen:24,ivlen:16},"AES-128-CBC":{proc:Ae$1,eproc:me$3,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(_u,$u,Tu){return ge$4(h$j.TripleDES,_u,$u,Tu)},eproc:function(_u,$u,Tu){return ve$2(h$j.TripleDES,_u,$u,Tu)},keylen:24,ivlen:8},"DES-CBC":{proc:function(_u,$u,Tu){return ge$4(h$j.DES,_u,$u,Tu)},eproc:function(_u,$u,Tu){return ve$2(h$j.DES,_u,$u,Tu)},keylen:8,ivlen:8}},be$3=function(_u){var $u={},Tu=_u.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Tu&&($u.cipher=Tu[1],$u.ivsalt=Tu[2]);var Cu=_u.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Cu&&($u.type=Cu[1]);var Pu=-1,Ru=0;_u.indexOf(`\r
\r
`)!=-1&&(Pu=_u.indexOf(`\r
\r
`),Ru=2),_u.indexOf(`

`)!=-1&&(Pu=_u.indexOf(`

`),Ru=1);var Lu=_u.indexOf("-----END");if(Pu!=-1&&Lu!=-1){var Bu=_u.substring(Pu+2*Ru,Lu-Ru);Bu=Bu.replace(/\s+/g,""),$u.data=Bu}return $u},xe$1=function(_u,$u,Tu){for(var Cu=Tu.substring(0,16),Pu=h$j.enc.Hex.parse(Cu),Ru=h$j.enc.Utf8.parse($u),Lu=ye$3[_u].keylen+ye$3[_u].ivlen,Bu="",Vu=null;;){var Ou=h$j.algo.MD5.create();if(Vu!=null&&Ou.update(Vu),Ou.update(Ru),Ou.update(Pu),Vu=Ou.finalize(),(Bu+=h$j.enc.Hex.stringify(Vu)).length>=2*Lu)break}var Du={};return Du.keyhex=Bu.substr(0,2*ye$3[_u].keylen),Du.ivhex=Bu.substr(2*ye$3[_u].keylen,2*ye$3[_u].ivlen),Du},we$2=function(_u,$u,Tu,Cu){var Pu=h$j.enc.Base64.parse(_u),Ru=h$j.enc.Hex.stringify(Pu);return(0,ye$3[$u].proc)(Ru,Tu,Cu)},{version:"1.0.0",parsePKCS5PEM:function(_u){return be$3(_u)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(_u,$u,Tu){return xe$1(_u,$u,Tu)},decryptKeyB64:function(_u,$u,Tu,Cu){return we$2(_u,$u,Tu,Cu)},getDecryptedKeyHex:function(_u,$u){var Tu=be$3(_u),Cu=Tu.cipher,Pu=Tu.ivsalt,Ru=Tu.data,Lu=xe$1(Cu,$u,Pu).keyhex;return we$2(Ru,Cu,Lu,Pu)},getEncryptedPKCS5PEMFromPrvKeyHex:function(_u,$u,Tu,Cu,Pu){var Ru="";if(Cu!==void 0&&Cu!=null||(Cu="AES-256-CBC"),ye$3[Cu]===void 0)throw"KEYUTIL unsupported algorithm: "+Cu;Pu!==void 0&&Pu!=null||(Pu=function(Bu){var Vu=h$j.lib.WordArray.random(Bu);return h$j.enc.Hex.stringify(Vu)}(ye$3[Cu].ivlen).toUpperCase());var Lu=function(Bu,Vu,Ou,Du){return(0,ye$3[Vu].eproc)(Bu,Ou,Du)}($u,Cu,xe$1(Cu,Tu,Pu).keyhex,Pu);return Ru="-----BEGIN "+_u+` PRIVATE KEY-----\r
`,Ru+=`Proc-Type: 4,ENCRYPTED\r
`,Ru+="DEK-Info: "+Cu+","+Pu+`\r
`,Ru+=`\r
`,Ru+=Lu.replace(/(.{64})/g,`$1\r
`),Ru+=`\r
-----END `+_u+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(_u){var $u=Me$1,Tu=$u.getChildIdx,Cu=$u.getV,Pu={},Ru=Tu(_u,0);if(Ru.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Ru.length;Pu.ciphertext=Cu(_u,Ru[1]);var Lu=Tu(_u,Ru[0]);if(Lu.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Lu.length;if(Cu(_u,Lu[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Bu=Tu(_u,Lu[1]);if(Lu.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Bu.length;var Vu=Tu(_u,Bu[1]);if(Vu.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Vu.length;if(Cu(_u,Vu[0])!="2a864886f70d0307")throw"this only supports TripleDES";Pu.encryptionSchemeAlg="TripleDES",Pu.encryptionSchemeIV=Cu(_u,Vu[1]);var Ou=Tu(_u,Bu[0]);if(Ou.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Ou.length;if(Cu(_u,Ou[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Du=Tu(_u,Ou[1]);if(Du.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Du.length;Pu.pbkdf2Salt=Cu(_u,Du[0]);var ku=Cu(_u,Du[1]);try{Pu.pbkdf2Iter=parseInt(ku,16)}catch{throw"malformed format pbkdf2Iter: "+ku}return Pu},getPBKDF2KeyHexFromParam:function(_u,$u){var Tu=h$j.enc.Hex.parse(_u.pbkdf2Salt),Cu=_u.pbkdf2Iter,Pu=h$j.PBKDF2($u,Tu,{keySize:6,iterations:Cu});return h$j.enc.Hex.stringify(Pu)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(_u,$u){var Tu=le$2(_u,"ENCRYPTED PRIVATE KEY"),Cu=this.parseHexOfEncryptedPKCS8(Tu),Pu=Ee$1.getPBKDF2KeyHexFromParam(Cu,$u),Ru={};Ru.ciphertext=h$j.enc.Hex.parse(Cu.ciphertext);var Lu=h$j.enc.Hex.parse(Pu),Bu=h$j.enc.Hex.parse(Cu.encryptionSchemeIV),Vu=h$j.TripleDES.decrypt(Ru,Lu,{iv:Bu});return h$j.enc.Hex.stringify(Vu)},getKeyFromEncryptedPKCS8PEM:function(_u,$u){var Tu=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(_u,$u);return this.getKeyFromPlainPrivatePKCS8Hex(Tu)},parsePlainPrivatePKCS8Hex:function(_u){var $u=Me$1,Tu=$u.getChildIdx,Cu=$u.getV,Pu={algparam:null};if(_u.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ru=Tu(_u,0);if(Ru.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(_u.substr(Ru[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Lu=Tu(_u,Ru[1]);if(Lu.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(_u.substr(Lu[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Pu.algoid=Cu(_u,Lu[0]),_u.substr(Lu[1],2)=="06"&&(Pu.algparam=Cu(_u,Lu[1])),_u.substr(Ru[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Pu.keyidx=$u.getVidx(_u,Ru[2]),Pu},getKeyFromPlainPrivatePKCS8PEM:function(_u){var $u=le$2(_u,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex($u)},getKeyFromPlainPrivatePKCS8Hex:function(_u){var $u,Tu=this.parsePlainPrivatePKCS8Hex(_u);if(Tu.algoid=="2a864886f70d010101")$u=new X$5;else if(Tu.algoid=="2a8648ce380401")$u=new l$j.crypto.DSA;else{if(Tu.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";$u=new l$j.crypto.ECDSA}return $u.readPKCS8PrvKeyHex(_u),$u},_getKeyFromPublicPKCS8Hex:function(_u){var $u,Tu=Me$1.getVbyList(_u,0,[0,0],"06");if(Tu==="2a864886f70d010101")$u=new X$5;else if(Tu==="2a8648ce380401")$u=new l$j.crypto.DSA;else{if(Tu!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";$u=new l$j.crypto.ECDSA}return $u.readPKCS8PubKeyHex(_u),$u},parsePublicRawRSAKeyHex:function(_u){var $u=Me$1,Tu=$u.getChildIdx,Cu=$u.getV,Pu={};if(_u.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Ru=Tu(_u,0);if(Ru.length!=2)throw"malformed RSA key(code:002)";if(_u.substr(Ru[0],2)!="02")throw"malformed RSA key(code:003)";if(Pu.n=Cu(_u,Ru[0]),_u.substr(Ru[1],2)!="02")throw"malformed RSA key(code:004)";return Pu.e=Cu(_u,Ru[1]),Pu},parsePublicPKCS8Hex:function(_u){var $u=Me$1,Tu=$u.getChildIdx,Cu=$u.getV,Pu={algparam:null},Ru=Tu(_u,0);if(Ru.length!=2)throw"outer DERSequence shall have 2 elements: "+Ru.length;var Lu=Ru[0];if(_u.substr(Lu,2)!="30")throw"malformed PKCS8 public key(code:001)";var Bu=Tu(_u,Lu);if(Bu.length!=2)throw"malformed PKCS8 public key(code:002)";if(_u.substr(Bu[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Pu.algoid=Cu(_u,Bu[0]),_u.substr(Bu[1],2)=="06"?Pu.algparam=Cu(_u,Bu[1]):_u.substr(Bu[1],2)=="30"&&(Pu.algparam={},Pu.algparam.p=$u.getVbyList(_u,Bu[1],[0],"02"),Pu.algparam.q=$u.getVbyList(_u,Bu[1],[1],"02"),Pu.algparam.g=$u.getVbyList(_u,Bu[1],[2],"02")),_u.substr(Ru[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Pu.key=Cu(_u,Ru[1]).substr(2),Pu}});Ee$1.getKey=function(_u,$u,Tu){var Cu=(Hu=Me$1).getChildIdx;Hu.getV;var Pu=Hu.getVbyList,Ru=l$j.crypto,Lu=Ru.ECDSA,Bu=Ru.DSA,Vu=X$5,Ou=le$2,Du=Ee$1;if(Vu!==void 0&&_u instanceof Vu||Lu!==void 0&&_u instanceof Lu||Bu!==void 0&&_u instanceof Bu)return _u;if(_u.curve!==void 0&&_u.xy!==void 0&&_u.d===void 0)return new Lu({pub:_u.xy,curve:_u.curve});if(_u.curve!==void 0&&_u.d!==void 0)return new Lu({prv:_u.d,curve:_u.curve});if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(Xu=new Vu).setPublic(_u.n,_u.e),Xu;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.co!==void 0&&_u.qi===void 0)return(Xu=new Vu).setPrivateEx(_u.n,_u.e,_u.d,_u.p,_u.q,_u.dp,_u.dq,_u.co),Xu;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p===void 0)return(Xu=new Vu).setPrivate(_u.n,_u.e,_u.d),Xu;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x===void 0)return(Xu=new Bu).setPublic(_u.p,_u.q,_u.g,_u.y),Xu;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x!==void 0)return(Xu=new Bu).setPrivate(_u.p,_u.q,_u.g,_u.y,_u.x),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(Xu=new Vu).setPublic(te$2(_u.n),te$2(_u.e)),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.qi!==void 0)return(Xu=new Vu).setPrivateEx(te$2(_u.n),te$2(_u.e),te$2(_u.d),te$2(_u.p),te$2(_u.q),te$2(_u.dp),te$2(_u.dq),te$2(_u.qi)),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0)return(Xu=new Vu).setPrivate(te$2(_u.n),te$2(_u.e),te$2(_u.d)),Xu;if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d===void 0){var ku=(Ku=new Lu({curve:_u.crv})).ecparams.keylen/4,Fu="04"+("0000000000"+te$2(_u.x)).slice(-ku)+("0000000000"+te$2(_u.y)).slice(-ku);return Ku.setPublicKeyHex(Fu),Ku}if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d!==void 0){ku=(Ku=new Lu({curve:_u.crv})).ecparams.keylen/4,Fu="04"+("0000000000"+te$2(_u.x)).slice(-ku)+("0000000000"+te$2(_u.y)).slice(-ku);var Nu=("0000000000"+te$2(_u.d)).slice(-ku);return Ku.setPublicKeyHex(Fu),Ku.setPrivateKeyHex(Nu),Ku}if(Tu==="pkcs5prv"){var Gu,zu=_u,Hu=Me$1;if((Gu=Cu(zu,0)).length===9)(Xu=new Vu).readPKCS5PrvKeyHex(zu);else if(Gu.length===6)(Xu=new Bu).readPKCS5PrvKeyHex(zu);else{if(!(Gu.length>2&&zu.substr(Gu[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Xu=new Lu).readPKCS5PrvKeyHex(zu)}return Xu}if(Tu==="pkcs8prv")return Xu=Du.getKeyFromPlainPrivatePKCS8Hex(_u);if(Tu==="pkcs8pub")return Du._getKeyFromPublicPKCS8Hex(_u);if(Tu==="x509pub")return Be.getPublicKeyFromCertHex(_u);if(_u.indexOf("-END CERTIFICATE-",0)!=-1||_u.indexOf("-END X509 CERTIFICATE-",0)!=-1||_u.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Be.getPublicKeyFromCertPEM(_u);if(_u.indexOf("-END PUBLIC KEY-")!=-1){var Uu=le$2(_u,"PUBLIC KEY");return Du._getKeyFromPublicPKCS8Hex(Uu)}if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var ju=Ou(_u,"RSA PRIVATE KEY");return Du.getKey(ju,null,"pkcs5prv")}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var Wu=Pu(Xc=Ou(_u,"DSA PRIVATE KEY"),0,[1],"02"),Qu=Pu(Xc,0,[2],"02"),qu=Pu(Xc,0,[3],"02"),Yu=Pu(Xc,0,[4],"02"),Ju=Pu(Xc,0,[5],"02");return(Xu=new Bu).setPrivate(new c$s(Wu,16),new c$s(Qu,16),new c$s(qu,16),new c$s(Yu,16),new c$s(Ju,16)),Xu}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1)return ju=Ou(_u,"EC PRIVATE KEY"),Du.getKey(ju,null,"pkcs5prv");if(_u.indexOf("-END PRIVATE KEY-")!=-1)return Du.getKeyFromPlainPrivatePKCS8PEM(_u);if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var _d=Du.getDecryptedKeyHex(_u,$u),tp=new X$5;return tp.readPKCS5PrvKeyHex(_d),tp}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var Ku,Xu=Pu(Xc=Du.getDecryptedKeyHex(_u,$u),0,[1],"04"),Zu=Pu(Xc,0,[2,0],"06"),_c=Pu(Xc,0,[3,0],"03").substr(2);if(l$j.crypto.OID.oidhex2name[Zu]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+Zu;return(Ku=new Lu({curve:l$j.crypto.OID.oidhex2name[Zu]})).setPublicKeyHex(_c),Ku.setPrivateKeyHex(Xu),Ku.isPublic=!1,Ku}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var Xc;return Wu=Pu(Xc=Du.getDecryptedKeyHex(_u,$u),0,[1],"02"),Qu=Pu(Xc,0,[2],"02"),qu=Pu(Xc,0,[3],"02"),Yu=Pu(Xc,0,[4],"02"),Ju=Pu(Xc,0,[5],"02"),(Xu=new Bu).setPrivate(new c$s(Wu,16),new c$s(Qu,16),new c$s(qu,16),new c$s(Yu,16),new c$s(Ju,16)),Xu}if(_u.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Du.getKeyFromEncryptedPKCS8PEM(_u,$u);throw new Error("not supported argument")},Ee$1.generateKeypair=function(_u,$u){if(_u=="RSA"){var Tu=$u;(Lu=new X$5).generate(Tu,"10001"),Lu.isPrivate=!0,Lu.isPublic=!0;var Cu=new X$5,Pu=Lu.n.toString(16),Ru=Lu.e.toString(16);return Cu.setPublic(Pu,Ru),Cu.isPrivate=!1,Cu.isPublic=!0,(Bu={}).prvKeyObj=Lu,Bu.pubKeyObj=Cu,Bu}if(_u=="EC"){var Lu,Bu,Vu=$u,Ou=new l$j.crypto.ECDSA({curve:Vu}).generateKeyPairHex();return(Lu=new l$j.crypto.ECDSA({curve:Vu})).setPublicKeyHex(Ou.ecpubhex),Lu.setPrivateKeyHex(Ou.ecprvhex),Lu.isPrivate=!0,Lu.isPublic=!1,(Cu=new l$j.crypto.ECDSA({curve:Vu})).setPublicKeyHex(Ou.ecpubhex),Cu.isPrivate=!1,Cu.isPublic=!0,(Bu={}).prvKeyObj=Lu,Bu.pubKeyObj=Cu,Bu}throw"unknown algorithm: "+_u},Ee$1.getPEM=function(_u,$u,Tu,Cu,Pu,Ru){var Lu=l$j,Bu=Lu.asn1,Vu=Bu.DERObjectIdentifier,Ou=Bu.DERInteger,Du=Bu.ASN1Util.newObject,ku=Bu.x509.SubjectPublicKeyInfo,Fu=Lu.crypto,Nu=Fu.DSA,Gu=Fu.ECDSA,zu=X$5;function Hu(Ku){return Du({seq:[{int:0},{int:{bigint:Ku.n}},{int:Ku.e},{int:{bigint:Ku.d}},{int:{bigint:Ku.p}},{int:{bigint:Ku.q}},{int:{bigint:Ku.dmp1}},{int:{bigint:Ku.dmq1}},{int:{bigint:Ku.coeff}}]})}function Uu(Ku){return Du({seq:[{int:1},{octstr:{hex:Ku.prvKeyHex}},{tag:["a0",!0,{oid:{name:Ku.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Ku.pubKeyHex}}]}]})}function ju(Ku){return Du({seq:[{int:0},{int:{bigint:Ku.p}},{int:{bigint:Ku.q}},{int:{bigint:Ku.g}},{int:{bigint:Ku.y}},{int:{bigint:Ku.x}}]})}if((zu!==void 0&&_u instanceof zu||Nu!==void 0&&_u instanceof Nu||Gu!==void 0&&_u instanceof Gu)&&_u.isPublic==1&&($u===void 0||$u=="PKCS8PUB"))return ae$2(Yu=new ku(_u).getEncodedHex(),"PUBLIC KEY");if($u=="PKCS1PRV"&&zu!==void 0&&_u instanceof zu&&(Tu===void 0||Tu==null)&&_u.isPrivate==1)return ae$2(Yu=Hu(_u).getEncodedHex(),"RSA PRIVATE KEY");if($u=="PKCS1PRV"&&Gu!==void 0&&_u instanceof Gu&&(Tu===void 0||Tu==null)&&_u.isPrivate==1){var Wu=new Vu({name:_u.curveName}).getEncodedHex(),Qu=Uu(_u).getEncodedHex(),qu="";return qu+=ae$2(Wu,"EC PARAMETERS"),qu+=ae$2(Qu,"EC PRIVATE KEY")}if($u=="PKCS1PRV"&&Nu!==void 0&&_u instanceof Nu&&(Tu===void 0||Tu==null)&&_u.isPrivate==1)return ae$2(Yu=ju(_u).getEncodedHex(),"DSA PRIVATE KEY");if($u=="PKCS5PRV"&&zu!==void 0&&_u instanceof zu&&Tu!==void 0&&Tu!=null&&_u.isPrivate==1){var Yu=Hu(_u).getEncodedHex();return Cu===void 0&&(Cu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Yu,Tu,Cu,Ru)}if($u=="PKCS5PRV"&&Gu!==void 0&&_u instanceof Gu&&Tu!==void 0&&Tu!=null&&_u.isPrivate==1)return Yu=Uu(_u).getEncodedHex(),Cu===void 0&&(Cu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Yu,Tu,Cu,Ru);if($u=="PKCS5PRV"&&Nu!==void 0&&_u instanceof Nu&&Tu!==void 0&&Tu!=null&&_u.isPrivate==1)return Yu=ju(_u).getEncodedHex(),Cu===void 0&&(Cu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Yu,Tu,Cu,Ru);var Ju=function(Ku,Xu){var Zu=_d(Ku,Xu);return new Du({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Zu.pbkdf2Salt}},{int:Zu.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Zu.encryptionSchemeIV}}]}]}]},{octstr:{hex:Zu.ciphertext}}]}).getEncodedHex()},_d=function(Ku,Xu){var Zu=h$j.lib.WordArray.random(8),_c=h$j.lib.WordArray.random(8),Xc=h$j.PBKDF2(Xu,Zu,{keySize:6,iterations:100}),_h=h$j.enc.Hex.parse(Ku),ip=h$j.TripleDES.encrypt(_h,Xc,{iv:_c})+"",ap={};return ap.ciphertext=ip,ap.pbkdf2Salt=h$j.enc.Hex.stringify(Zu),ap.pbkdf2Iter=100,ap.encryptionSchemeAlg="DES-EDE3-CBC",ap.encryptionSchemeIV=h$j.enc.Hex.stringify(_c),ap};if($u=="PKCS8PRV"&&zu!=null&&_u instanceof zu&&_u.isPrivate==1){var tp=Hu(_u).getEncodedHex();return Yu=Du({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:tp}}]}).getEncodedHex(),Tu===void 0||Tu==null?ae$2(Yu,"PRIVATE KEY"):ae$2(Qu=Ju(Yu,Tu),"ENCRYPTED PRIVATE KEY")}if($u=="PKCS8PRV"&&Gu!==void 0&&_u instanceof Gu&&_u.isPrivate==1)return tp=new Du({seq:[{int:1},{octstr:{hex:_u.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+_u.pubKeyHex}}]}]}).getEncodedHex(),Yu=Du({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:_u.curveName}}]},{octstr:{hex:tp}}]}).getEncodedHex(),Tu===void 0||Tu==null?ae$2(Yu,"PRIVATE KEY"):ae$2(Qu=Ju(Yu,Tu),"ENCRYPTED PRIVATE KEY");if($u=="PKCS8PRV"&&Nu!==void 0&&_u instanceof Nu&&_u.isPrivate==1)return tp=new Ou({bigint:_u.x}).getEncodedHex(),Yu=Du({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:_u.p}},{int:{bigint:_u.q}},{int:{bigint:_u.g}}]}]},{octstr:{hex:tp}}]}).getEncodedHex(),Tu===void 0||Tu==null?ae$2(Yu,"PRIVATE KEY"):ae$2(Qu=Ju(Yu,Tu),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ee$1.getKeyFromCSRPEM=function(_u){var $u=le$2(_u,"CERTIFICATE REQUEST");return Ee$1.getKeyFromCSRHex($u)},Ee$1.getKeyFromCSRHex=function(_u){var $u=Ee$1.parseCSRHex(_u);return Ee$1.getKey($u.p8pubkeyhex,null,"pkcs8pub")},Ee$1.parseCSRHex=function(_u){var $u=Me$1,Tu=$u.getChildIdx,Cu=$u.getTLV,Pu={},Ru=_u;if(Ru.substr(0,2)!="30")throw"malformed CSR(code:001)";var Lu=Tu(Ru,0);if(Lu.length<1)throw"malformed CSR(code:002)";if(Ru.substr(Lu[0],2)!="30")throw"malformed CSR(code:003)";var Bu=Tu(Ru,Lu[0]);if(Bu.length<3)throw"malformed CSR(code:004)";return Pu.p8pubkeyhex=Cu(Ru,Bu[2]),Pu},Ee$1.getKeyID=function(_u){var $u=Ee$1,Tu=Me$1;typeof _u=="string"&&_u.indexOf("BEGIN ")!=-1&&(_u=$u.getKey(_u));var Cu=le$2($u.getPEM(_u)),Pu=Tu.getIdxbyList(Cu,0,[1]),Ru=Tu.getV(Cu,Pu).substring(2);return l$j.crypto.Util.hashHex(Ru,"sha1")},Ee$1.getJWKFromKey=function(_u){var $u={};if(_u instanceof X$5&&_u.isPrivate)return $u.kty="RSA",$u.n=ee$3(_u.n.toString(16)),$u.e=ee$3(_u.e.toString(16)),$u.d=ee$3(_u.d.toString(16)),$u.p=ee$3(_u.p.toString(16)),$u.q=ee$3(_u.q.toString(16)),$u.dp=ee$3(_u.dmp1.toString(16)),$u.dq=ee$3(_u.dmq1.toString(16)),$u.qi=ee$3(_u.coeff.toString(16)),$u;if(_u instanceof X$5&&_u.isPublic)return $u.kty="RSA",$u.n=ee$3(_u.n.toString(16)),$u.e=ee$3(_u.e.toString(16)),$u;if(_u instanceof l$j.crypto.ECDSA&&_u.isPrivate){if((Cu=_u.getShortNISTPCurveName())!=="P-256"&&Cu!=="P-384")throw"unsupported curve name for JWT: "+Cu;var Tu=_u.getPublicKeyXYHex();return $u.kty="EC",$u.crv=Cu,$u.x=ee$3(Tu.x),$u.y=ee$3(Tu.y),$u.d=ee$3(_u.prvKeyHex),$u}if(_u instanceof l$j.crypto.ECDSA&&_u.isPublic){var Cu;if((Cu=_u.getShortNISTPCurveName())!=="P-256"&&Cu!=="P-384")throw"unsupported curve name for JWT: "+Cu;return Tu=_u.getPublicKeyXYHex(),$u.kty="EC",$u.crv=Cu,$u.x=ee$3(Tu.x),$u.y=ee$3(Tu.y),$u}throw"not supported key object"},l$j.asn1!==void 0&&l$j.asn1||(l$j.asn1={}),l$j.asn1.ASN1Util=new function(){this.integerToByteHex=function(_u){var $u=_u.toString(16);return $u.length%2==1&&($u="0"+$u),$u},this.bigIntToMinTwosComplementsHex=function(_u){var $u=_u.toString(16);if($u.substr(0,1)!="-")$u.length%2==1?$u="0"+$u:$u.match(/^[0-7]/)||($u="00"+$u);else{var Tu=$u.substr(1).length;Tu%2==1?Tu+=1:$u.match(/^[0-7]/)||(Tu+=2);for(var Cu="",Pu=0;Pu<Tu;Pu++)Cu+="f";$u=new c$s(Cu,16).xor(_u).add(c$s.ONE).toString(16).replace(/^-/,"")}return $u},this.getPEMStringFromHex=function(_u,$u){return ae$2(_u,$u)},this.newObject=function(_u){var $u=l$j.asn1,Tu=$u.ASN1Object,Cu=$u.DERBoolean,Pu=$u.DERInteger,Ru=$u.DERBitString,Lu=$u.DEROctetString,Bu=$u.DERNull,Vu=$u.DERObjectIdentifier,Ou=$u.DEREnumerated,Du=$u.DERUTF8String,ku=$u.DERNumericString,Fu=$u.DERPrintableString,Nu=$u.DERTeletexString,Gu=$u.DERIA5String,zu=$u.DERUTCTime,Hu=$u.DERGeneralizedTime,Uu=$u.DERVisibleString,ju=$u.DERBMPString,Wu=$u.DERSequence,Qu=$u.DERSet,qu=$u.DERTaggedObject,Yu=$u.ASN1Util.newObject;if(_u instanceof $u.ASN1Object)return _u;var Ju=Object.keys(_u);if(Ju.length!=1)throw new Error("key of param shall be only one.");var _d=Ju[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+_d+":")==-1)throw new Error("undefined key: "+_d);if(_d=="bool")return new Cu(_u[_d]);if(_d=="int")return new Pu(_u[_d]);if(_d=="bitstr")return new Ru(_u[_d]);if(_d=="octstr")return new Lu(_u[_d]);if(_d=="null")return new Bu(_u[_d]);if(_d=="oid")return new Vu(_u[_d]);if(_d=="enum")return new Ou(_u[_d]);if(_d=="utf8str")return new Du(_u[_d]);if(_d=="numstr")return new ku(_u[_d]);if(_d=="prnstr")return new Fu(_u[_d]);if(_d=="telstr")return new Nu(_u[_d]);if(_d=="ia5str")return new Gu(_u[_d]);if(_d=="utctime")return new zu(_u[_d]);if(_d=="gentime")return new Hu(_u[_d]);if(_d=="visstr")return new Uu(_u[_d]);if(_d=="bmpstr")return new ju(_u[_d]);if(_d=="asn1")return new Tu(_u[_d]);if(_d=="seq"){for(var tp=_u[_d],Ku=[],Xu=0;Xu<tp.length;Xu++){var Zu=Yu(tp[Xu]);Ku.push(Zu)}return new Wu({array:Ku})}if(_d=="set"){for(tp=_u[_d],Ku=[],Xu=0;Xu<tp.length;Xu++)Zu=Yu(tp[Xu]),Ku.push(Zu);return new Qu({array:Ku})}if(_d=="tag"){var _c=_u[_d];if(Object.prototype.toString.call(_c)==="[object Array]"&&_c.length==3){var Xc=Yu(_c[2]);return new qu({tag:_c[0],explicit:_c[1],obj:Xc})}return new qu(_c)}},this.jsonToASN1HEX=function(_u){return this.newObject(_u).getEncodedHex()}},l$j.asn1.ASN1Util.oidHexToInt=function(_u){for(var $u="",Tu=parseInt(_u.substr(0,2),16),Cu=($u=Math.floor(Tu/40)+"."+Tu%40,""),Pu=2;Pu<_u.length;Pu+=2){var Ru=("00000000"+parseInt(_u.substr(Pu,2),16).toString(2)).slice(-8);Cu+=Ru.substr(1,7),Ru.substr(0,1)=="0"&&($u=$u+"."+new c$s(Cu,2).toString(10),Cu="")}return $u},l$j.asn1.ASN1Util.oidIntToHex=function(_u){var $u=function(Bu){var Vu=Bu.toString(16);return Vu.length==1&&(Vu="0"+Vu),Vu},Tu=function(Bu){var Vu="",Ou=new c$s(Bu,10).toString(2),Du=7-Ou.length%7;Du==7&&(Du=0);for(var ku="",Fu=0;Fu<Du;Fu++)ku+="0";for(Ou=ku+Ou,Fu=0;Fu<Ou.length-1;Fu+=7){var Nu=Ou.substr(Fu,7);Fu!=Ou.length-7&&(Nu="1"+Nu),Vu+=$u(parseInt(Nu,2))}return Vu};if(!_u.match(/^[0-9.]+$/))throw"malformed oid string: "+_u;var Cu="",Pu=_u.split("."),Ru=40*parseInt(Pu[0])+parseInt(Pu[1]);Cu+=$u(Ru),Pu.splice(0,2);for(var Lu=0;Lu<Pu.length;Lu++)Cu+=Tu(Pu[Lu]);return Cu},l$j.asn1.ASN1Object=function(_u){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var $u=this.hV.length/2,Tu=$u.toString(16);if(Tu.length%2==1&&(Tu="0"+Tu),$u<128)return Tu;var Cu=Tu.length/2;if(Cu>15)throw"ASN.1 length too long to represent by 8x: n = "+$u.toString(16);return(128+Cu).toString(16)+Tu},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function($u){this.params=$u},_u!=null&&_u.tlv!=null&&(this.hTLV=_u.tlv,this.isModified=!1)},l$j.asn1.DERAbstractString=function(_u){l$j.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=ie$4(this.s).toLowerCase()},this.setStringHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"?this.setString(_u):_u.str!==void 0?this.setString(_u.str):_u.hex!==void 0&&this.setStringHex(_u.hex))},u$k.lang.extend(l$j.asn1.DERAbstractString,l$j.asn1.ASN1Object),l$j.asn1.DERAbstractTime=function(_u){l$j.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function($u){var Tu=$u.getTime()+6e4*$u.getTimezoneOffset();return new Date(Tu)},this.formatDate=function($u,Tu,Cu){var Pu=this.zeroPadding,Ru=this.localDateToUTC($u),Lu=String(Ru.getFullYear());Tu=="utc"&&(Lu=Lu.substr(2,2));var Bu=Lu+Pu(String(Ru.getMonth()+1),2)+Pu(String(Ru.getDate()),2)+Pu(String(Ru.getHours()),2)+Pu(String(Ru.getMinutes()),2)+Pu(String(Ru.getSeconds()),2);if(Cu===!0){var Vu=Ru.getMilliseconds();if(Vu!=0){var Ou=Pu(String(Vu),3);Bu=Bu+"."+(Ou=Ou.replace(/[0]+$/,""))}}return Bu+"Z"},this.zeroPadding=function($u,Tu){return $u.length>=Tu?$u:new Array(Tu-$u.length+1).join("0")+$u},this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=J$a($u)},this.setByDateValue=function($u,Tu,Cu,Pu,Ru,Lu){var Bu=new Date(Date.UTC($u,Tu-1,Cu,Pu,Ru,Lu,0));this.setByDate(Bu)},this.getFreshValueHex=function(){return this.hV}},u$k.lang.extend(l$j.asn1.DERAbstractTime,l$j.asn1.ASN1Object),l$j.asn1.DERAbstractStructured=function(_u){l$j.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array=$u},this.appendASN1Object=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array.push($u)},this.asn1Array=new Array,_u!==void 0&&_u.array!==void 0&&(this.asn1Array=_u.array)},u$k.lang.extend(l$j.asn1.DERAbstractStructured,l$j.asn1.ASN1Object),l$j.asn1.DERBoolean=function(_u){l$j.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=_u==0?"010100":"0101ff"},u$k.lang.extend(l$j.asn1.DERBoolean,l$j.asn1.ASN1Object),l$j.asn1.DERInteger=function(_u){l$j.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$j.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Tu=new c$s(String($u),10);this.setByBigInteger(Tu)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.bigint!==void 0?this.setByBigInteger(_u.bigint):_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$k.lang.extend(l$j.asn1.DERInteger,l$j.asn1.ASN1Object),l$j.asn1.DERBitString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$j.asn1.ASN1Util.newObject(_u.obj);_u.hex="00"+$u.getEncodedHex()}l$j.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(Tu){this.hTLV=null,this.isModified=!0,this.hV=Tu},this.setUnusedBitsAndHexValue=function(Tu,Cu){if(Tu<0||7<Tu)throw"unused bits shall be from 0 to 7: u = "+Tu;var Pu="0"+Tu;this.hTLV=null,this.isModified=!0,this.hV=Pu+Cu},this.setByBinaryString=function(Tu){var Cu=8-(Tu=Tu.replace(/0+$/,"")).length%8;Cu==8&&(Cu=0);for(var Pu=0;Pu<=Cu;Pu++)Tu+="0";var Ru="";for(Pu=0;Pu<Tu.length-1;Pu+=8){var Lu=Tu.substr(Pu,8),Bu=parseInt(Lu,2).toString(16);Bu.length==1&&(Bu="0"+Bu),Ru+=Bu}this.hTLV=null,this.isModified=!0,this.hV="0"+Cu+Ru},this.setByBooleanArray=function(Tu){for(var Cu="",Pu=0;Pu<Tu.length;Pu++)Tu[Pu]==1?Cu+="1":Cu+="0";this.setByBinaryString(Cu)},this.newFalseArray=function(Tu){for(var Cu=new Array(Tu),Pu=0;Pu<Tu;Pu++)Cu[Pu]=!1;return Cu},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"&&_u.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(_u):_u.hex!==void 0?this.setHexValueIncludingUnusedBits(_u.hex):_u.bin!==void 0?this.setByBinaryString(_u.bin):_u.array!==void 0&&this.setByBooleanArray(_u.array))},u$k.lang.extend(l$j.asn1.DERBitString,l$j.asn1.ASN1Object),l$j.asn1.DEROctetString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$j.asn1.ASN1Util.newObject(_u.obj);_u.hex=$u.getEncodedHex()}l$j.asn1.DEROctetString.superclass.constructor.call(this,_u),this.hT="04"},u$k.lang.extend(l$j.asn1.DEROctetString,l$j.asn1.DERAbstractString),l$j.asn1.DERNull=function(){l$j.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},u$k.lang.extend(l$j.asn1.DERNull,l$j.asn1.ASN1Object),l$j.asn1.DERObjectIdentifier=function(_u){l$j.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.setValueOidString=function($u){var Tu=function(Cu){var Pu=function(Du){var ku=Du.toString(16);return ku.length==1&&(ku="0"+ku),ku},Ru=function(Du){var ku="",Fu=parseInt(Du,10).toString(2),Nu=7-Fu.length%7;Nu==7&&(Nu=0);for(var Gu="",zu=0;zu<Nu;zu++)Gu+="0";for(Fu=Gu+Fu,zu=0;zu<Fu.length-1;zu+=7){var Hu=Fu.substr(zu,7);zu!=Fu.length-7&&(Hu="1"+Hu),ku+=Pu(parseInt(Hu,2))}return ku};try{if(!Cu.match(/^[0-9.]+$/))return null;var Lu="",Bu=Cu.split("."),Vu=40*parseInt(Bu[0],10)+parseInt(Bu[1],10);Lu+=Pu(Vu),Bu.splice(0,2);for(var Ou=0;Ou<Bu.length;Ou++)Lu+=Ru(Bu[Ou]);return Lu}catch{return null}}($u);if(Tu==null)throw new Error("malformed oid string: "+$u);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Tu},this.setValueName=function($u){var Tu=l$j.asn1.x509.OID.name2oid($u);if(Tu==="")throw new Error("DERObjectIdentifier oidName undefined: "+$u);this.setValueOidString(Tu)},this.setValueNameOrOid=function($u){$u.match(/^[0-2].[0-9.]+$/)?this.setValueOidString($u):this.setValueName($u)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function($u){typeof $u=="string"?this.setValueNameOrOid($u):$u.oid!==void 0?this.setValueNameOrOid($u.oid):$u.name!==void 0?this.setValueNameOrOid($u.name):$u.hex!==void 0&&this.setValueHex($u.hex)},_u!==void 0&&this.setByParam(_u)},u$k.lang.extend(l$j.asn1.DERObjectIdentifier,l$j.asn1.ASN1Object),l$j.asn1.DEREnumerated=function(_u){l$j.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$j.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Tu=new c$s(String($u),10);this.setByBigInteger(Tu)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$k.lang.extend(l$j.asn1.DEREnumerated,l$j.asn1.ASN1Object),l$j.asn1.DERUTF8String=function(_u){l$j.asn1.DERUTF8String.superclass.constructor.call(this,_u),this.hT="0c"},u$k.lang.extend(l$j.asn1.DERUTF8String,l$j.asn1.DERAbstractString),l$j.asn1.DERNumericString=function(_u){l$j.asn1.DERNumericString.superclass.constructor.call(this,_u),this.hT="12"},u$k.lang.extend(l$j.asn1.DERNumericString,l$j.asn1.DERAbstractString),l$j.asn1.DERPrintableString=function(_u){l$j.asn1.DERPrintableString.superclass.constructor.call(this,_u),this.hT="13"},u$k.lang.extend(l$j.asn1.DERPrintableString,l$j.asn1.DERAbstractString),l$j.asn1.DERTeletexString=function(_u){l$j.asn1.DERTeletexString.superclass.constructor.call(this,_u),this.hT="14"},u$k.lang.extend(l$j.asn1.DERTeletexString,l$j.asn1.DERAbstractString),l$j.asn1.DERIA5String=function(_u){l$j.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="16"},u$k.lang.extend(l$j.asn1.DERIA5String,l$j.asn1.DERAbstractString),l$j.asn1.DERVisibleString=function(_u){l$j.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="1a"},u$k.lang.extend(l$j.asn1.DERVisibleString,l$j.asn1.DERAbstractString),l$j.asn1.DERBMPString=function(_u){l$j.asn1.DERBMPString.superclass.constructor.call(this,_u),this.hT="1e"},u$k.lang.extend(l$j.asn1.DERBMPString,l$j.asn1.DERAbstractString),l$j.asn1.DERUTCTime=function(_u){l$j.asn1.DERUTCTime.superclass.constructor.call(this,_u),this.hT="17",this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"utc"),this.hV=J$a(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$a(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{12}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date))},u$k.lang.extend(l$j.asn1.DERUTCTime,l$j.asn1.DERAbstractTime),l$j.asn1.DERGeneralizedTime=function(_u){l$j.asn1.DERGeneralizedTime.superclass.constructor.call(this,_u),this.hT="18",this.withMillis=!1,this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$a(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$a(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{14}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date),_u.millis===!0&&(this.withMillis=!0))},u$k.lang.extend(l$j.asn1.DERGeneralizedTime,l$j.asn1.DERAbstractTime),l$j.asn1.DERSequence=function(_u){l$j.asn1.DERSequence.superclass.constructor.call(this,_u),this.hT="30",this.getFreshValueHex=function(){for(var $u="",Tu=0;Tu<this.asn1Array.length;Tu++)$u+=this.asn1Array[Tu].getEncodedHex();return this.hV=$u,this.hV}},u$k.lang.extend(l$j.asn1.DERSequence,l$j.asn1.DERAbstractStructured),l$j.asn1.DERSet=function(_u){l$j.asn1.DERSet.superclass.constructor.call(this,_u),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var $u=new Array,Tu=0;Tu<this.asn1Array.length;Tu++){var Cu=this.asn1Array[Tu];$u.push(Cu.getEncodedHex())}return this.sortFlag==1&&$u.sort(),this.hV=$u.join(""),this.hV},_u!==void 0&&_u.sortflag!==void 0&&_u.sortflag==0&&(this.sortFlag=!1)},u$k.lang.extend(l$j.asn1.DERSet,l$j.asn1.DERAbstractStructured),l$j.asn1.DERTaggedObject=function(_u){l$j.asn1.DERTaggedObject.superclass.constructor.call(this);var $u=l$j.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Tu,Cu,Pu){this.hT=Cu,this.isExplicit=Tu,this.asn1Object=Pu,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Pu.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Cu),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Tu){Tu.tag!=null&&(this.hT=Tu.tag),Tu.explicit!=null&&(this.isExplicit=Tu.explicit),Tu.tage!=null&&(this.hT=Tu.tage,this.isExplicit=!0),Tu.tagi!=null&&(this.hT=Tu.tagi,this.isExplicit=!1),Tu.obj!=null&&(Tu.obj instanceof $u.ASN1Object?(this.asn1Object=Tu.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof Tu.obj=="object"&&(this.asn1Object=$u.ASN1Util.newObject(Tu.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},_u!=null&&this.setByParam(_u)},u$k.lang.extend(l$j.asn1.DERTaggedObject,l$j.asn1.ASN1Object);var Me$1=new function(){};function Ie$1(_u,$u){for(var Tu="",Cu=$u/4-_u.length,Pu=0;Pu<Cu;Pu++)Tu+="0";return Tu+_u}function Se(_u,$u,Tu){for(var Cu="",Pu=0;Cu.length<$u;)Cu+=re$3(Tu(oe$1(_u+String.fromCharCode.apply(String,[(4278190080&Pu)>>24,(16711680&Pu)>>16,(65280&Pu)>>8,255&Pu])))),Pu+=1;return Cu}function Ce$1(_u){for(var $u in l$j.crypto.Util.DIGESTINFOHEAD){var Tu=l$j.crypto.Util.DIGESTINFOHEAD[$u],Cu=Tu.length;if(_u.substring(0,Cu)==Tu)return[$u,_u.substring(Cu)]}return[]}function Be(_u){var $u,Tu=Me$1,Cu=Tu.getChildIdx,Pu=Tu.getV,Ru=Tu.getTLV,Lu=Tu.getVbyList,Bu=Tu.getVbyListEx,Vu=Tu.getTLVbyList,Ou=Tu.getTLVbyListEx,Du=Tu.getIdxbyList,ku=Tu.getIdxbyListEx,Fu=Tu.getVidx,Nu=Tu.getInt,Gu=Tu.oidname,zu=Tu.hextooidstr,Hu=le$2;try{$u=l$j.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Uu=Vu(this.hex,0,[0,0]);if(Uu.substr(0,2)=="a0"){var ju=Vu(Uu,0,[0]),Wu=Nu(ju,0);if(Wu<0||2<Wu)throw new Error("malformed version field");return this.version=Wu+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Bu(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Uu=Ou(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Uu)},this.getAlgorithmIdentifierName=function(Uu){for(var ju in $u)if(Uu===$u[ju])return ju;return Gu(Bu(Uu,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Vu(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Vu(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Uu=Lu(this.hex,0,[0,4+this.foffset,0]);return Uu=Uu.replace(/(..)/g,"%$1"),Uu=decodeURIComponent(Uu)},this.getNotAfter=function(){var Uu=Lu(this.hex,0,[0,4+this.foffset,1]);return Uu=Uu.replace(/(..)/g,"%$1"),Uu=decodeURIComponent(Uu)},this.getPublicKeyHex=function(){return Tu.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Du(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Uu=this.getPublicKeyIdx();return Du(this.hex,Uu,[1,0],"30")},this.getPublicKey=function(){return Ee$1.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Uu=Vu(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Uu)},this.getSignatureValueHex=function(){return Lu(this.hex,0,[2],"03",!0)},this.verifySignature=function(Uu){var ju=this.getSignatureAlgorithmField(),Wu=this.getSignatureValueHex(),Qu=Vu(this.hex,0,[0],"30"),qu=new l$j.crypto.Signature({alg:ju});return qu.init(Uu),qu.updateHex(Qu),qu.verify(Wu)},this.parseExt=function(Uu){var ju,Wu,Qu;if(Uu===void 0){if(Qu=this.hex,this.version!==3)return-1;ju=Du(Qu,0,[0,7,0],"30"),Wu=Cu(Qu,ju)}else{Qu=le$2(Uu);var qu=Du(Qu,0,[0,3,0,0],"06");if(Pu(Qu,qu)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);ju=Du(Qu,0,[0,3,0,1,0],"30"),Wu=Cu(Qu,ju),this.hex=Qu}this.aExtInfo=new Array;for(var Yu=0;Yu<Wu.length;Yu++){var Ju={critical:!1},_d=0;Cu(Qu,Wu[Yu]).length===3&&(Ju.critical=!0,_d=1),Ju.oid=Tu.hextooidstr(Lu(Qu,Wu[Yu],[0],"06"));var tp=Du(Qu,Wu[Yu],[1+_d]);Ju.vidx=Fu(Qu,tp),this.aExtInfo.push(Ju)}},this.getExtInfo=function(Uu){var ju=this.aExtInfo,Wu=Uu;if(Uu.match(/^[0-9.]+$/)||(Wu=l$j.asn1.x509.OID.name2oid(Uu)),Wu!==""){for(var Qu=0;Qu<ju.length;Qu++)if(ju[Qu].oid===Wu)return ju[Qu]}},this.getExtBasicConstraints=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("basicConstraints");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"basicConstraints"};if(ju&&(Qu.critical=!0),Uu==="3000")return Qu;if(Uu==="30030101ff")return Qu.cA=!0,Qu;if(Uu.substr(0,12)==="30060101ff02"){var qu=Pu(Uu,10),Yu=parseInt(qu,16);return Qu.cA=!0,Qu.pathLen=Yu,Qu}throw new Error("hExtV parse error: "+Uu)},this.getExtKeyUsage=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("keyUsage");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"keyUsage"};return ju&&(Qu.critical=!0),Qu.names=this.getExtKeyUsageString(Uu).split(","),Qu},this.getExtKeyUsageBin=function(Uu){if(Uu===void 0){var ju=this.getExtInfo("keyUsage");if(ju===void 0)return"";Uu=Ru(this.hex,ju.vidx)}if(Uu.length!=8&&Uu.length!=10)throw new Error("malformed key usage value: "+Uu);var Wu="000000000000000"+parseInt(Uu.substr(6),16).toString(2);return Uu.length==8&&(Wu=Wu.slice(-8)),Uu.length==10&&(Wu=Wu.slice(-16)),(Wu=Wu.replace(/0+$/,""))==""&&(Wu="0"),Wu},this.getExtKeyUsageString=function(Uu){for(var ju=this.getExtKeyUsageBin(Uu),Wu=new Array,Qu=0;Qu<ju.length;Qu++)ju.substr(Qu,1)=="1"&&Wu.push(Be.KEYUSAGE_NAME[Qu]);return Wu.join(",")},this.getExtSubjectKeyIdentifier=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("subjectKeyIdentifier");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"subjectKeyIdentifier"};ju&&(Qu.critical=!0);var qu=Pu(Uu,0);return Qu.kid={hex:qu},Qu},this.getExtAuthorityKeyIdentifier=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("authorityKeyIdentifier");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"authorityKeyIdentifier"};ju&&(Qu.critical=!0);for(var qu=Cu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Ju=Uu.substr(qu[Yu],2);if(Ju==="80"&&(Qu.kid={hex:Pu(Uu,qu[Yu])}),Ju==="a1"){var _d=Ru(Uu,qu[Yu]),tp=this.getGeneralNames(_d);Qu.issuer=tp[0].dn}Ju==="82"&&(Qu.sn={hex:Pu(Uu,qu[Yu])})}return Qu},this.getExtExtKeyUsage=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("extKeyUsage");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"extKeyUsage",array:[]};ju&&(Qu.critical=!0);for(var qu=Cu(Uu,0),Yu=0;Yu<qu.length;Yu++)Qu.array.push(Gu(Pu(Uu,qu[Yu])));return Qu},this.getExtExtKeyUsageName=function(){var Uu=this.getExtInfo("extKeyUsage");if(Uu===void 0)return Uu;var ju=new Array,Wu=Ru(this.hex,Uu.vidx);if(Wu==="")return ju;for(var Qu=Cu(Wu,0),qu=0;qu<Qu.length;qu++)ju.push(Gu(Pu(Wu,Qu[qu])));return ju},this.getExtSubjectAltName=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("subjectAltName");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"subjectAltName",array:[]};return ju&&(Qu.critical=!0),Qu.array=this.getGeneralNames(Uu),Qu},this.getExtIssuerAltName=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("issuerAltName");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"issuerAltName",array:[]};return ju&&(Qu.critical=!0),Qu.array=this.getGeneralNames(Uu),Qu},this.getGeneralNames=function(Uu){for(var ju=Cu(Uu,0),Wu=[],Qu=0;Qu<ju.length;Qu++){var qu=this.getGeneralName(Ru(Uu,ju[Qu]));qu!==void 0&&Wu.push(qu)}return Wu},this.getGeneralName=function(Uu){var ju=Uu.substr(0,2),Wu=Pu(Uu,0),Qu=re$3(Wu);return ju=="81"?{rfc822:Qu}:ju=="82"?{dns:Qu}:ju=="86"?{uri:Qu}:ju=="87"?{ip:ue$2(Wu)}:ju=="a4"?{dn:this.getX500Name(Wu)}:void 0},this.getExtSubjectAltName2=function(){var Uu,ju,Wu,Qu=this.getExtInfo("subjectAltName");if(Qu===void 0)return Qu;for(var qu=new Array,Yu=Ru(this.hex,Qu.vidx),Ju=Cu(Yu,0),_d=0;_d<Ju.length;_d++)Wu=Yu.substr(Ju[_d],2),Uu=Pu(Yu,Ju[_d]),Wu==="81"&&(ju=ne$1(Uu),qu.push(["MAIL",ju])),Wu==="82"&&(ju=ne$1(Uu),qu.push(["DNS",ju])),Wu==="84"&&(ju=Be.hex2dn(Uu,0),qu.push(["DN",ju])),Wu==="86"&&(ju=ne$1(Uu),qu.push(["URI",ju])),Wu==="87"&&(ju=ue$2(Uu),qu.push(["IP",ju]));return qu},this.getExtCRLDistributionPoints=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("cRLDistributionPoints");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"cRLDistributionPoints",array:[]};ju&&(Qu.critical=!0);for(var qu=Cu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Ju=Ru(Uu,qu[Yu]);Qu.array.push(this.getDistributionPoint(Ju))}return Qu},this.getDistributionPoint=function(Uu){for(var ju={},Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Uu.substr(Wu[Qu],2),Yu=Ru(Uu,Wu[Qu]);qu=="a0"&&(ju.dpname=this.getDistributionPointName(Yu))}return ju},this.getDistributionPointName=function(Uu){for(var ju={},Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Uu.substr(Wu[Qu],2),Yu=Ru(Uu,Wu[Qu]);qu=="a0"&&(ju.full=this.getGeneralNames(Yu))}return ju},this.getExtCRLDistributionPointsURI=function(){var Uu=this.getExtInfo("cRLDistributionPoints");if(Uu===void 0)return Uu;for(var ju=new Array,Wu=Cu(this.hex,Uu.vidx),Qu=0;Qu<Wu.length;Qu++)try{var qu=ne$1(Lu(this.hex,Wu[Qu],[0,0,0],"86"));ju.push(qu)}catch{}return ju},this.getExtAIAInfo=function(){var Uu=this.getExtInfo("authorityInfoAccess");if(Uu===void 0)return Uu;for(var ju={ocsp:[],caissuer:[]},Wu=Cu(this.hex,Uu.vidx),Qu=0;Qu<Wu.length;Qu++){var qu=Lu(this.hex,Wu[Qu],[0],"06"),Yu=Lu(this.hex,Wu[Qu],[1],"86");qu==="2b06010505073001"&&ju.ocsp.push(ne$1(Yu)),qu==="2b06010505073002"&&ju.caissuer.push(ne$1(Yu))}return ju},this.getExtAuthorityInfoAccess=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("authorityInfoAccess");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"authorityInfoAccess",array:[]};ju&&(Qu.critical=!0);for(var qu=Cu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Ju=Bu(Uu,qu[Yu],[0],"06"),_d=ne$1(Lu(Uu,qu[Yu],[1],"86"));if(Ju=="2b06010505073001")Qu.array.push({ocsp:_d});else{if(Ju!="2b06010505073002")throw new Error("unknown method: "+Ju);Qu.array.push({caissuer:_d})}}return Qu},this.getExtCertificatePolicies=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("certificatePolicies");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"certificatePolicies",array:[]};ju&&(Qu.critical=!0);for(var qu=Cu(Uu,0),Yu=0;Yu<qu.length;Yu++){var Ju=Ru(Uu,qu[Yu]),_d=this.getPolicyInformation(Ju);Qu.array.push(_d)}return Qu},this.getPolicyInformation=function(Uu){var ju={},Wu=Lu(Uu,0,[0],"06");ju.policyoid=Gu(Wu);var Qu=ku(Uu,0,[1],"30");if(Qu!=-1){ju.array=[];for(var qu=Cu(Uu,Qu),Yu=0;Yu<qu.length;Yu++){var Ju=Ru(Uu,qu[Yu]),_d=this.getPolicyQualifierInfo(Ju);ju.array.push(_d)}}return ju},this.getPolicyQualifierInfo=function(Uu){var ju={},Wu=Lu(Uu,0,[0],"06");if(Wu==="2b06010505070201"){var Qu=Bu(Uu,0,[1],"16");ju.cps=re$3(Qu)}else if(Wu==="2b06010505070202"){var qu=Vu(Uu,0,[1],"30");ju.unotice=this.getUserNotice(qu)}return ju},this.getUserNotice=function(Uu){for(var ju={},Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Ru(Uu,Wu[Qu]);qu.substr(0,2)!="30"&&(ju.exptext=this.getDisplayText(qu))}return ju},this.getDisplayText=function(Uu){var ju={};return ju.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Uu.substr(0,2)],ju.str=re$3(Pu(Uu,0)),ju},this.getExtCRLNumber=function(Uu,ju){var Wu={extname:"cRLNumber"};if(ju&&(Wu.critical=!0),Uu.substr(0,2)=="02")return Wu.num={hex:Pu(Uu,0)},Wu;throw new Error("hExtV parse error: "+Uu)},this.getExtCRLReason=function(Uu,ju){var Wu={extname:"cRLReason"};if(ju&&(Wu.critical=!0),Uu.substr(0,2)=="0a")return Wu.code=parseInt(Pu(Uu,0),16),Wu;throw new Error("hExtV parse error: "+Uu)},this.getExtOcspNonce=function(Uu,ju){var Wu={extname:"ocspNonce"};ju&&(Wu.critical=!0);var Qu=Pu(Uu,0);return Wu.hex=Qu,Wu},this.getExtOcspNoCheck=function(Uu,ju){var Wu={extname:"ocspNoCheck"};return ju&&(Wu.critical=!0),Wu},this.getExtAdobeTimeStamp=function(Uu,ju){if(Uu===void 0&&ju===void 0){var Wu=this.getExtInfo("adobeTimeStamp");if(Wu===void 0)return;Uu=Ru(this.hex,Wu.vidx),ju=Wu.critical}var Qu={extname:"adobeTimeStamp"};ju&&(Qu.critical=!0);var qu=Cu(Uu,0);if(qu.length>1){var Yu=Ru(Uu,qu[1]),Ju=this.getGeneralName(Yu);Ju.uri!=null&&(Qu.uri=Ju.uri)}if(qu.length>2){var _d=Ru(Uu,qu[2]);_d=="0101ff"&&(Qu.reqauth=!0),_d=="010100"&&(Qu.reqauth=!1)}return Qu},this.getX500NameRule=function(Uu){for(var ju=null,Wu=[],Qu=0;Qu<Uu.length;Qu++)for(var qu=Uu[Qu],Yu=0;Yu<qu.length;Yu++)Wu.push(qu[Yu]);for(Qu=0;Qu<Wu.length;Qu++){var Ju=Wu[Qu],_d=Ju.ds,tp=Ju.value,Ku=Ju.type;if(_d!="prn"&&_d!="utf8"&&_d!="ia5")return"mixed";if(_d=="ia5"){if(Ku!="CN")return"mixed";if(l$j.lang.String.isMail(tp))continue;return"mixed"}if(Ku=="C"){if(_d=="prn")continue;return"mixed"}if(ju==null)ju=_d;else if(ju!==_d)return"mixed"}return ju==null?"prn":ju},this.getX500Name=function(Uu){var ju=this.getX500NameArray(Uu);return{array:ju,str:this.dnarraytostr(ju)}},this.getX500NameArray=function(Uu){for(var ju=[],Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++)ju.push(this.getRDN(Ru(Uu,Wu[Qu])));return ju},this.getRDN=function(Uu){for(var ju=[],Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++)ju.push(this.getAttrTypeAndValue(Ru(Uu,Wu[Qu])));return ju},this.getAttrTypeAndValue=function(Uu){var ju={type:null,value:null,ds:null},Wu=Cu(Uu,0),Qu=Lu(Uu,Wu[0],[],"06"),qu=Lu(Uu,Wu[1],[]),Yu=l$j.asn1.ASN1Util.oidHexToInt(Qu);return ju.type=l$j.asn1.x509.OID.oid2atype(Yu),ju.ds=this.HEX2STAG[Uu.substr(Wu[1],2)],ju.ds!="bmp"?ju.value=ne$1(qu):ju.value=he$4(qu),ju},this.readCertPEM=function(Uu){this.readCertHex(Hu(Uu))},this.readCertHex=function(Uu){this.hex=Uu,this.getVersion();try{Du(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Uu={};return Uu.version=this.getVersion(),Uu.serial={hex:this.getSerialNumberHex()},Uu.sigalg=this.getSignatureAlgorithmField(),Uu.issuer=this.getIssuer(),Uu.notbefore=this.getNotBefore(),Uu.notafter=this.getNotAfter(),Uu.subject=this.getSubject(),Uu.sbjpubkey=ae$2(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Uu.ext=this.getExtParamArray()),Uu.sighex=this.getSignatureValueHex(),Uu},this.getExtParamArray=function(Uu){Uu==null&&ku(this.hex,0,[0,"[3]"])!=-1&&(Uu=Ou(this.hex,0,[0,"[3]",0],"30"));for(var ju=[],Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var qu=Ru(Uu,Wu[Qu]),Yu=this.getExtParam(qu);Yu!=null&&ju.push(Yu)}return ju},this.getExtParam=function(Uu){var ju=Cu(Uu,0).length;if(ju!=2&&ju!=3)throw new Error("wrong number elements in Extension: "+ju+" "+Uu);var Wu=zu(Lu(Uu,0,[0],"06")),Qu=!1;ju==3&&Vu(Uu,0,[1])=="0101ff"&&(Qu=!0);var qu=Vu(Uu,0,[ju-1,0]),Yu=void 0;if(Wu=="2.5.29.14"?Yu=this.getExtSubjectKeyIdentifier(qu,Qu):Wu=="2.5.29.15"?Yu=this.getExtKeyUsage(qu,Qu):Wu=="2.5.29.17"?Yu=this.getExtSubjectAltName(qu,Qu):Wu=="2.5.29.18"?Yu=this.getExtIssuerAltName(qu,Qu):Wu=="2.5.29.19"?Yu=this.getExtBasicConstraints(qu,Qu):Wu=="2.5.29.31"?Yu=this.getExtCRLDistributionPoints(qu,Qu):Wu=="2.5.29.32"?Yu=this.getExtCertificatePolicies(qu,Qu):Wu=="2.5.29.35"?Yu=this.getExtAuthorityKeyIdentifier(qu,Qu):Wu=="2.5.29.37"?Yu=this.getExtExtKeyUsage(qu,Qu):Wu=="1.3.6.1.5.5.7.1.1"?Yu=this.getExtAuthorityInfoAccess(qu,Qu):Wu=="2.5.29.20"?Yu=this.getExtCRLNumber(qu,Qu):Wu=="2.5.29.21"?Yu=this.getExtCRLReason(qu,Qu):Wu=="1.3.6.1.5.5.7.48.1.2"?Yu=this.getExtOcspNonce(qu,Qu):Wu=="1.3.6.1.5.5.7.48.1.5"?Yu=this.getExtOcspNoCheck(qu,Qu):Wu=="1.2.840.113583.1.1.9.1"&&(Yu=this.getExtAdobeTimeStamp(qu,Qu)),Yu!=null)return Yu;var Ju={extname:Wu,extn:qu};return Qu&&(Ju.critical=!0),Ju},this.findExt=function(Uu,ju){for(var Wu=0;Wu<Uu.length;Wu++)if(Uu[Wu].extname==ju)return Uu[Wu];return null},this.updateExtCDPFullURI=function(Uu,ju){var Wu=this.findExt(Uu,"cRLDistributionPoints");if(Wu!=null&&Wu.array!=null){for(var Qu=Wu.array,qu=0;qu<Qu.length;qu++)if(Qu[qu].dpname!=null&&Qu[qu].dpname.full!=null)for(var Yu=Qu[qu].dpname.full,Ju=0;Ju<Yu.length;Ju++){var _d=Yu[qu];_d.uri!=null&&(_d.uri=ju)}}},this.updateExtAIAOCSP=function(Uu,ju){var Wu=this.findExt(Uu,"authorityInfoAccess");if(Wu!=null&&Wu.array!=null)for(var Qu=Wu.array,qu=0;qu<Qu.length;qu++)Qu[qu].ocsp!=null&&(Qu[qu].ocsp=ju)},this.updateExtAIACAIssuer=function(Uu,ju){var Wu=this.findExt(Uu,"authorityInfoAccess");if(Wu!=null&&Wu.array!=null)for(var Qu=Wu.array,qu=0;qu<Qu.length;qu++)Qu[qu].caissuer!=null&&(Qu[qu].caissuer=ju)},this.dnarraytostr=function(Uu){return"/"+Uu.map(function(ju){return function(Wu){return Wu.map(function(Qu){return function(qu){return qu.type+"="+qu.value}(Qu).replace(/\+/,"\\+")}).join("+")}(ju).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Uu,ju,Wu,Qu,qu=function(Xc){for(var _h="",ip=Xc.array,ap=0;ap<ip.length;ap++){var hp=ip[ap];if(_h+="    policy oid: "+hp.policyoid+`
`,hp.array!==void 0)for(var Ap=0;Ap<hp.array.length;Ap++){var gp=hp.array[Ap];gp.cps!==void 0&&(_h+="    cps: "+gp.cps+`
`)}}return _h},Yu=function(Xc){for(var _h="",ip=Xc.array,ap=0;ap<ip.length;ap++){var hp=ip[ap];try{hp.dpname.full[0].uri!==void 0&&(_h+="    "+hp.dpname.full[0].uri+`
`)}catch{}try{hp.dname.full[0].dn.hex!==void 0&&(_h+="    "+Be.hex2dn(hp.dpname.full[0].dn.hex)+`
`)}catch{}}return _h},Ju=function(Xc){for(var _h="",ip=Xc.array,ap=0;ap<ip.length;ap++){var hp=ip[ap];hp.caissuer!==void 0&&(_h+="    caissuer: "+hp.caissuer+`
`),hp.ocsp!==void 0&&(_h+="    ocsp: "+hp.ocsp+`
`)}return _h};if(Uu=`Basic Fields
`,Uu+="  serial number: "+this.getSerialNumberHex()+`
`,Uu+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Uu+="  issuer: "+this.getIssuerString()+`
`,Uu+="  notBefore: "+this.getNotBefore()+`
`,Uu+="  notAfter: "+this.getNotAfter()+`
`,Uu+="  subject: "+this.getSubjectString()+`
`,Uu+=`  subject public key info: 
`,Uu+="    key algorithm: "+(ju=this.getPublicKey()).type+`
`,ju.type==="RSA"&&(Uu+="    n="+de$4(ju.n.toString(16)).substr(0,16)+`...
`,Uu+="    e="+de$4(ju.e.toString(16))+`
`),(Wu=this.aExtInfo)!=null){Uu+=`X509v3 Extensions:
`;for(var _d=0;_d<Wu.length;_d++){var tp=Wu[_d],Ku=l$j.asn1.x509.OID.oid2name(tp.oid);Ku===""&&(Ku=tp.oid);var Xu="";if(tp.critical===!0&&(Xu="CRITICAL"),Uu+="  "+Ku+" "+Xu+`:
`,Ku==="basicConstraints"){var Zu=this.getExtBasicConstraints();Zu.cA===void 0?Uu+=`    {}
`:(Uu+="    cA=true",Zu.pathLen!==void 0&&(Uu+=", pathLen="+Zu.pathLen),Uu+=`
`)}else if(Ku==="keyUsage")Uu+="    "+this.getExtKeyUsageString()+`
`;else if(Ku==="subjectKeyIdentifier")Uu+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Ku==="authorityKeyIdentifier"){var _c=this.getExtAuthorityKeyIdentifier();_c.kid!==void 0&&(Uu+="    kid="+_c.kid.hex+`
`)}else Ku==="extKeyUsage"?Uu+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Ku==="subjectAltName"?Uu+="    "+(Qu=this.getExtSubjectAltName(),JSON.stringify(Qu.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Ku==="cRLDistributionPoints"?Uu+=Yu(this.getExtCRLDistributionPoints()):Ku==="authorityInfoAccess"?Uu+=Ju(this.getExtAuthorityInfoAccess()):Ku==="certificatePolicies"&&(Uu+=qu(this.getExtCertificatePolicies()))}}return Uu+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Uu+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof _u=="string"&&(_u.indexOf("-----BEGIN")!=-1?this.readCertPEM(_u):l$j.lang.String.isHex(_u)&&this.readCertHex(_u))}function Te$1(_u){return h$j.SHA256(_u).toString()}Me$1.getLblen=function(_u,$u){if(_u.substr($u+2,1)!="8")return 1;var Tu=parseInt(_u.substr($u+3,1));return Tu==0?-1:0<Tu&&Tu<10?Tu+1:-2},Me$1.getL=function(_u,$u){var Tu=Me$1.getLblen(_u,$u);return Tu<1?"":_u.substr($u+2,2*Tu)},Me$1.getVblen=function(_u,$u){var Tu;return(Tu=Me$1.getL(_u,$u))==""?-1:(Tu.substr(0,1)==="8"?new c$s(Tu.substr(2),16):new c$s(Tu,16)).intValue()},Me$1.getVidx=function(_u,$u){var Tu=Me$1.getLblen(_u,$u);return Tu<0?Tu:$u+2*(Tu+1)},Me$1.getV=function(_u,$u){var Tu=Me$1.getVidx(_u,$u),Cu=Me$1.getVblen(_u,$u);return _u.substr(Tu,2*Cu)},Me$1.getTLV=function(_u,$u){return _u.substr($u,2)+Me$1.getL(_u,$u)+Me$1.getV(_u,$u)},Me$1.getTLVblen=function(_u,$u){return 2+2*Me$1.getLblen(_u,$u)+2*Me$1.getVblen(_u,$u)},Me$1.getNextSiblingIdx=function(_u,$u){return Me$1.getVidx(_u,$u)+2*Me$1.getVblen(_u,$u)},Me$1.getChildIdx=function(_u,$u){var Tu,Cu,Pu,Ru=Me$1,Lu=[];Tu=Ru.getVidx(_u,$u),Cu=2*Ru.getVblen(_u,$u),_u.substr($u,2)=="03"&&(Tu+=2,Cu-=2),Pu=0;for(var Bu=Tu;Pu<=Cu;){var Vu=Ru.getTLVblen(_u,Bu);if((Pu+=Vu)<=Cu&&Lu.push(Bu),Bu+=Vu,Pu>=Cu)break}return Lu},Me$1.getNthChildIdx=function(_u,$u,Tu){return Me$1.getChildIdx(_u,$u)[Tu]},Me$1.getIdxbyList=function(_u,$u,Tu,Cu){var Pu,Ru,Lu=Me$1;return Tu.length==0?Cu!==void 0&&_u.substr($u,2)!==Cu?-1:$u:(Pu=Tu.shift())>=(Ru=Lu.getChildIdx(_u,$u)).length?-1:Lu.getIdxbyList(_u,Ru[Pu],Tu,Cu)},Me$1.getIdxbyListEx=function(_u,$u,Tu,Cu){var Pu,Ru,Lu=Me$1;if(Tu.length==0)return Cu!==void 0&&_u.substr($u,2)!==Cu?-1:$u;Pu=Tu.shift(),Ru=Lu.getChildIdx(_u,$u);for(var Bu=0,Vu=0;Vu<Ru.length;Vu++){var Ou=_u.substr(Ru[Vu],2);if(typeof Pu=="number"&&!Lu.isContextTag(Ou)&&Bu==Pu||typeof Pu=="string"&&Lu.isContextTag(Ou,Pu))return Lu.getIdxbyListEx(_u,Ru[Vu],Tu,Cu);Lu.isContextTag(Ou)||Bu++}return-1},Me$1.getTLVbyList=function(_u,$u,Tu,Cu){var Pu=Me$1,Ru=Pu.getIdxbyList(_u,$u,Tu,Cu);return Ru==-1||Ru>=_u.length?null:Pu.getTLV(_u,Ru)},Me$1.getTLVbyListEx=function(_u,$u,Tu,Cu){var Pu=Me$1,Ru=Pu.getIdxbyListEx(_u,$u,Tu,Cu);return Ru==-1?null:Pu.getTLV(_u,Ru)},Me$1.getVbyList=function(_u,$u,Tu,Cu,Pu){var Ru,Lu,Bu=Me$1;return(Ru=Bu.getIdxbyList(_u,$u,Tu,Cu))==-1||Ru>=_u.length?null:(Lu=Bu.getV(_u,Ru),Pu===!0&&(Lu=Lu.substr(2)),Lu)},Me$1.getVbyListEx=function(_u,$u,Tu,Cu,Pu){var Ru,Lu,Bu=Me$1;return(Ru=Bu.getIdxbyListEx(_u,$u,Tu,Cu))==-1?null:(Lu=Bu.getV(_u,Ru),_u.substr(Ru,2)=="03"&&Pu!==!1&&(Lu=Lu.substr(2)),Lu)},Me$1.getInt=function(_u,$u,Tu){Tu==null&&(Tu=-1);try{var Cu=_u.substr($u,2);if(Cu!="02"&&Cu!="03")return Tu;var Pu=Me$1.getV(_u,$u);return Cu=="02"?parseInt(Pu,16):function(Ru){try{var Lu=Ru.substr(0,2);if(Lu=="00")return parseInt(Ru.substr(2),16);var Bu=parseInt(Lu,16),Vu=Ru.substr(2),Ou=parseInt(Vu,16).toString(2);return Ou=="0"&&(Ou="00000000"),Ou=Ou.slice(0,0-Bu),parseInt(Ou,2)}catch{return-1}}(Pu)}catch{return Tu}},Me$1.getOID=function(_u,$u,Tu){Tu==null&&(Tu=null);try{return _u.substr($u,2)!="06"?Tu:function(Cu){if(!ce$2(Cu))return null;try{var Pu=[],Ru=Cu.substr(0,2),Lu=parseInt(Ru,16);Pu[0]=new String(Math.floor(Lu/40)),Pu[1]=new String(Lu%40);for(var Bu=Cu.substr(2),Vu=[],Ou=0;Ou<Bu.length/2;Ou++)Vu.push(parseInt(Bu.substr(2*Ou,2),16));var Du=[],ku="";for(Ou=0;Ou<Vu.length;Ou++)128&Vu[Ou]?ku+=pe$5((127&Vu[Ou]).toString(2),7):(ku+=pe$5((127&Vu[Ou]).toString(2),7),Du.push(new String(parseInt(ku,2))),ku="");var Fu=Pu.join(".");return Du.length>0&&(Fu=Fu+"."+Du.join(".")),Fu}catch{return null}}(Me$1.getV(_u,$u))}catch{return Tu}},Me$1.getOIDName=function(_u,$u,Tu){Tu==null&&(Tu=null);try{var Cu=Me$1.getOID(_u,$u,Tu);if(Cu==Tu)return Tu;var Pu=l$j.asn1.x509.OID.oid2name(Cu);return Pu==""?Cu:Pu}catch{return Tu}},Me$1.getString=function(_u,$u,Tu){Tu==null&&(Tu=null);try{return re$3(Me$1.getV(_u,$u))}catch{return Tu}},Me$1.hextooidstr=function(_u){var $u=function(ku,Fu){return ku.length>=Fu?ku:new Array(Fu-ku.length+1).join("0")+ku},Tu=[],Cu=_u.substr(0,2),Pu=parseInt(Cu,16);Tu[0]=new String(Math.floor(Pu/40)),Tu[1]=new String(Pu%40);for(var Ru=_u.substr(2),Lu=[],Bu=0;Bu<Ru.length/2;Bu++)Lu.push(parseInt(Ru.substr(2*Bu,2),16));var Vu=[],Ou="";for(Bu=0;Bu<Lu.length;Bu++)128&Lu[Bu]?Ou+=$u((127&Lu[Bu]).toString(2),7):(Ou+=$u((127&Lu[Bu]).toString(2),7),Vu.push(new String(parseInt(Ou,2))),Ou="");var Du=Tu.join(".");return Vu.length>0&&(Du=Du+"."+Vu.join(".")),Du},Me$1.dump=function(_u,$u,Tu,Cu){var Pu=Me$1,Ru=Pu.getV,Lu=Pu.dump,Bu=Pu.getChildIdx,Vu=_u;_u instanceof l$j.asn1.ASN1Object&&(Vu=_u.getEncodedHex());var Ou=function(Ju,_d){return Ju.length<=2*_d?Ju:Ju.substr(0,_d)+"..(total "+Ju.length/2+"bytes).."+Ju.substr(Ju.length-_d,_d)};$u===void 0&&($u={ommit_long_octet:32}),Tu===void 0&&(Tu=0),Cu===void 0&&(Cu="");var Du,ku=$u.ommit_long_octet;if((Du=Vu.substr(Tu,2))=="01")return(Fu=Ru(Vu,Tu))=="00"?Cu+`BOOLEAN FALSE
`:Cu+`BOOLEAN TRUE
`;if(Du=="02")return Cu+"INTEGER "+Ou(Fu=Ru(Vu,Tu),ku)+`
`;if(Du=="03"){var Fu=Ru(Vu,Tu);if(Pu.isASN1HEX(Fu.substr(2))){var Nu=Cu+`BITSTRING, encapsulates
`;return Nu+=Lu(Fu.substr(2),$u,0,Cu+"  ")}return Cu+"BITSTRING "+Ou(Fu,ku)+`
`}if(Du=="04")return Fu=Ru(Vu,Tu),Pu.isASN1HEX(Fu)?(Nu=Cu+`OCTETSTRING, encapsulates
`,Nu+=Lu(Fu,$u,0,Cu+"  ")):Cu+"OCTETSTRING "+Ou(Fu,ku)+`
`;if(Du=="05")return Cu+`NULL
`;if(Du=="06"){var Gu=Ru(Vu,Tu),zu=l$j.asn1.ASN1Util.oidHexToInt(Gu),Hu=l$j.asn1.x509.OID.oid2name(zu),Uu=zu.replace(/\./g," ");return Hu!=""?Cu+"ObjectIdentifier "+Hu+" ("+Uu+`)
`:Cu+"ObjectIdentifier ("+Uu+`)
`}if(Du=="0a")return Cu+"ENUMERATED "+parseInt(Ru(Vu,Tu))+`
`;if(Du=="0c")return Cu+"UTF8String '"+ne$1(Ru(Vu,Tu))+`'
`;if(Du=="13")return Cu+"PrintableString '"+ne$1(Ru(Vu,Tu))+`'
`;if(Du=="14")return Cu+"TeletexString '"+ne$1(Ru(Vu,Tu))+`'
`;if(Du=="16")return Cu+"IA5String '"+ne$1(Ru(Vu,Tu))+`'
`;if(Du=="17")return Cu+"UTCTime "+ne$1(Ru(Vu,Tu))+`
`;if(Du=="18")return Cu+"GeneralizedTime "+ne$1(Ru(Vu,Tu))+`
`;if(Du=="1a")return Cu+"VisualString '"+ne$1(Ru(Vu,Tu))+`'
`;if(Du=="1e")return Cu+"BMPString '"+he$4(Ru(Vu,Tu))+`'
`;if(Du=="30"){if(Vu.substr(Tu,4)=="3000")return Cu+`SEQUENCE {}
`;Nu=Cu+`SEQUENCE
`;var ju=$u;if(((qu=Bu(Vu,Tu)).length==2||qu.length==3)&&Vu.substr(qu[0],2)=="06"&&Vu.substr(qu[qu.length-1],2)=="04"){Hu=Pu.oidname(Ru(Vu,qu[0]));var Wu=JSON.parse(JSON.stringify($u));Wu.x509ExtName=Hu,ju=Wu}for(var Qu=0;Qu<qu.length;Qu++)Nu+=Lu(Vu,ju,qu[Qu],Cu+"  ");return Nu}if(Du=="31"){Nu=Cu+`SET
`;var qu=Bu(Vu,Tu);for(Qu=0;Qu<qu.length;Qu++)Nu+=Lu(Vu,$u,qu[Qu],Cu+"  ");return Nu}if((128&(Du=parseInt(Du,16)))!=0){var Yu=31&Du;if((32&Du)!=0){for(Nu=Cu+"["+Yu+`]
`,qu=Bu(Vu,Tu),Qu=0;Qu<qu.length;Qu++)Nu+=Lu(Vu,$u,qu[Qu],Cu+"  ");return Nu}if(Fu=Ru(Vu,Tu),Me$1.isASN1HEX(Fu)){var Nu=Cu+"["+Yu+`]
`;return Nu+=Lu(Fu,$u,0,Cu+"  ")}return(Fu.substr(0,8)=="68747470"||$u.x509ExtName==="subjectAltName"&&Yu==2)&&(Fu=ne$1(Fu)),Nu=Cu+"["+Yu+"] "+Fu+`
`}return Cu+"UNKNOWN("+Du+") "+Ru(Vu,Tu)+`
`},Me$1.isContextTag=function(_u,$u){var Tu,Cu;_u=_u.toLowerCase();try{Tu=parseInt(_u,16)}catch{return-1}if($u===void 0)return(192&Tu)==128;try{return $u.match(/^\[[0-9]+\]$/)!=null&&!((Cu=parseInt($u.substr(1,$u.length-1),10))>31)&&(192&Tu)==128&&(31&Tu)==Cu}catch{return!1}},Me$1.isASN1HEX=function(_u){var $u=Me$1;if(_u.length%2==1)return!1;var Tu=$u.getVblen(_u,0),Cu=_u.substr(0,2),Pu=$u.getL(_u,0);return _u.length-Cu.length-Pu.length==2*Tu},Me$1.checkStrictDER=function(_u,$u,Tu,Cu,Pu){var Ru=Me$1;if(Tu===void 0){if(typeof _u!="string")throw new Error("not hex string");if(_u=_u.toLowerCase(),!l$j.lang.String.isHex(_u))throw new Error("not hex string");Tu=_u.length,Pu=(Cu=_u.length/2)<128?1:Math.ceil(Cu.toString(16))+1}if(Ru.getL(_u,$u).length>2*Pu)throw new Error("L of TLV too long: idx="+$u);var Lu=Ru.getVblen(_u,$u);if(Lu>Cu)throw new Error("value of L too long than hex: idx="+$u);var Bu=Ru.getTLV(_u,$u),Vu=Bu.length-2-Ru.getL(_u,$u).length;if(Vu!==2*Lu)throw new Error("V string length and L's value not the same:"+Vu+"/"+2*Lu);if($u===0&&_u.length!=Bu.length)throw new Error("total length and TLV length unmatch:"+_u.length+"!="+Bu.length);var Ou=_u.substr($u,2);if(Ou==="02"){var Du=Ru.getVidx(_u,$u);if(_u.substr(Du,2)=="00"&&_u.charCodeAt(Du+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Ou,16)){for(var ku=Ru.getVblen(_u,$u),Fu=0,Nu=Ru.getChildIdx(_u,$u),Gu=0;Gu<Nu.length;Gu++)Fu+=Ru.getTLV(_u,Nu[Gu]).length,Ru.checkStrictDER(_u,Nu[Gu],Tu,Cu,Pu);if(2*ku!=Fu)throw new Error("sum of children's TLV length and L unmatch: "+2*ku+"!="+Fu)}},Me$1.oidname=function(_u){var $u=l$j.asn1;l$j.lang.String.isHex(_u)&&(_u=$u.ASN1Util.oidHexToInt(_u));var Tu=$u.x509.OID.oid2name(_u);return Tu===""&&(Tu=_u),Tu},l$j.asn1!==void 0&&l$j.asn1||(l$j.asn1={}),l$j.asn1.x509!==void 0&&l$j.asn1.x509||(l$j.asn1.x509={}),l$j.asn1.x509.Certificate=function(_u){l$j.asn1.x509.Certificate.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.DERBitString,Cu=$u.DERSequence,Pu=$u.x509,Ru=Pu.TBSCertificate,Lu=Pu.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Bu){this.params=Bu},this.sign=function(){var Bu=this.params,Vu=Bu.sigalg;Bu.sigalg.name!=null&&(Vu=Bu.sigalg.name);var Ou=Bu.tbsobj.getEncodedHex(),Du=new l$j.crypto.Signature({alg:Vu});Du.init(Bu.cakey),Du.updateHex(Ou),Bu.sighex=Du.sign()},this.getPEM=function(){return ae$2(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Bu=this.params;if(Bu.tbsobj!=null&&Bu.tbsobj!=null||(Bu.tbsobj=new Ru(Bu)),Bu.sighex==null&&Bu.cakey!=null&&this.sign(),Bu.sighex==null)throw new Error("sighex or cakey parameter not defined");var Vu=[];return Vu.push(Bu.tbsobj),Vu.push(new Lu({name:Bu.sigalg})),Vu.push(new Tu({hex:"00"+Bu.sighex})),new Cu({array:Vu}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$3(l$j.asn1.x509.Certificate,l$j.asn1.ASN1Object),l$j.asn1.x509.TBSCertificate=function(_u){l$j.asn1.x509.TBSCertificate.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.x509,Cu=$u.DERTaggedObject,Pu=$u.DERInteger,Ru=$u.DERSequence,Lu=Tu.AlgorithmIdentifier,Bu=Tu.Time,Vu=Tu.X500Name,Ou=Tu.Extensions,Du=Tu.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(ku){this.params=ku},this.getEncodedHex=function(){var ku=[],Fu=this.params;if(Fu.version!=null||Fu.version!=1){var Nu=2;Fu.version!=null&&(Nu=Fu.version-1);var Gu=new Cu({obj:new Pu({int:Nu})});ku.push(Gu)}return ku.push(new Pu(Fu.serial)),ku.push(new Lu({name:Fu.sigalg})),ku.push(new Vu(Fu.issuer)),ku.push(new Ru({array:[new Bu(Fu.notbefore),new Bu(Fu.notafter)]})),ku.push(new Vu(Fu.subject)),ku.push(new Du(Ee$1.getKey(Fu.sbjpubkey))),Fu.ext!==void 0&&Fu.ext.length>0&&ku.push(new Cu({tag:"a3",obj:new Ou(Fu.ext)})),new l$j.asn1.DERSequence({array:ku}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$3(l$j.asn1.x509.TBSCertificate,l$j.asn1.ASN1Object),l$j.asn1.x509.Extensions=function(_u){l$j.asn1.x509.Extensions.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.DERSequence,Cu=$u.x509;this.aParam=[],this.setByParam=function(Pu){this.aParam=Pu},this.getEncodedHex=function(){for(var Pu=[],Ru=0;Ru<this.aParam.length;Ru++){var Lu=this.aParam[Ru],Bu=Lu.extname,Vu=null;if(Lu.extn!=null)Vu=new Cu.PrivateExtension(Lu);else if(Bu=="subjectKeyIdentifier")Vu=new Cu.SubjectKeyIdentifier(Lu);else if(Bu=="keyUsage")Vu=new Cu.KeyUsage(Lu);else if(Bu=="subjectAltName")Vu=new Cu.SubjectAltName(Lu);else if(Bu=="issuerAltName")Vu=new Cu.IssuerAltName(Lu);else if(Bu=="basicConstraints")Vu=new Cu.BasicConstraints(Lu);else if(Bu=="cRLDistributionPoints")Vu=new Cu.CRLDistributionPoints(Lu);else if(Bu=="certificatePolicies")Vu=new Cu.CertificatePolicies(Lu);else if(Bu=="authorityKeyIdentifier")Vu=new Cu.AuthorityKeyIdentifier(Lu);else if(Bu=="extKeyUsage")Vu=new Cu.ExtKeyUsage(Lu);else if(Bu=="authorityInfoAccess")Vu=new Cu.AuthorityInfoAccess(Lu);else if(Bu=="cRLNumber")Vu=new Cu.CRLNumber(Lu);else if(Bu=="cRLReason")Vu=new Cu.CRLReason(Lu);else if(Bu=="ocspNonce")Vu=new Cu.OCSPNonce(Lu);else if(Bu=="ocspNoCheck")Vu=new Cu.OCSPNoCheck(Lu);else if(Bu=="adobeTimeStamp")Vu=new Cu.AdobeTimeStamp(Lu);else{if(Bu!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Lu));Vu=new Cu.SubjectDirectoryAttributes(Lu)}Vu!=null&&Pu.push(Vu)}return new Tu({array:Pu}).getEncodedHex()},_u!=null&&this.setByParam(_u)},fe$3(l$j.asn1.x509.Extensions,l$j.asn1.ASN1Object),l$j.asn1.x509.Extension=function(_u){l$j.asn1.x509.Extension.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.DERObjectIdentifier,Cu=$u.DEROctetString;$u.DERBitString;var Pu=$u.DERBoolean,Ru=$u.DERSequence;this.getEncodedHex=function(){var Lu=new Tu({oid:this.oid}),Bu=new Cu({hex:this.getExtnValueHex()}),Vu=new Array;return Vu.push(Lu),this.critical&&Vu.push(new Pu),Vu.push(Bu),new Ru({array:Vu}).getEncodedHex()},this.critical=!1,_u!==void 0&&_u.critical!==void 0&&(this.critical=_u.critical)},fe$3(l$j.asn1.x509.Extension,l$j.asn1.ASN1Object),l$j.asn1.x509.KeyUsage=function(_u){l$j.asn1.x509.KeyUsage.superclass.constructor.call(this,_u);var $u=Be.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",_u!==void 0&&(_u.bin!==void 0&&(this.asn1ExtnValue=new l$j.asn1.DERBitString(_u)),_u.names!==void 0&&_u.names.length!==void 0)){for(var Tu=_u.names,Cu="000000000",Pu=0;Pu<Tu.length;Pu++)for(var Ru=0;Ru<$u.length;Ru++)Tu[Pu]===$u[Ru]&&(Cu=Cu.substring(0,Ru)+"1"+Cu.substring(Ru+1,Cu.length));this.asn1ExtnValue=new l$j.asn1.DERBitString({bin:Cu})}},fe$3(l$j.asn1.x509.KeyUsage,l$j.asn1.x509.Extension),l$j.asn1.x509.BasicConstraints=function(_u){l$j.asn1.x509.BasicConstraints.superclass.constructor.call(this,_u);var $u=l$j.asn1,Tu=$u.DERBoolean,Cu=$u.DERInteger,Pu=$u.DERSequence;this.getExtnValueHex=function(){var Ru=new Array;this.cA&&Ru.push(new Tu),this.pathLen>-1&&Ru.push(new Cu({int:this.pathLen}));var Lu=new Pu({array:Ru});return this.asn1ExtnValue=Lu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,_u!==void 0&&(_u.cA!==void 0&&(this.cA=_u.cA),_u.pathLen!==void 0&&(this.pathLen=_u.pathLen))},fe$3(l$j.asn1.x509.BasicConstraints,l$j.asn1.x509.Extension),l$j.asn1.x509.CRLDistributionPoints=function(_u){l$j.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,_u);var $u=l$j.asn1,Tu=$u.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Cu){for(var Pu=[],Ru=0;Ru<Cu.length;Ru++)if(Cu[Ru]instanceof l$j.asn1.ASN1Object)Pu.push(Cu[Ru]);else{var Lu=new Tu.DistributionPoint(Cu[Ru]);Pu.push(Lu)}this.asn1ExtnValue=new $u.DERSequence({array:Pu})},this.setByOneURI=function(Cu){var Pu=new Tu.DistributionPoint({fulluri:Cu});this.setByDPArray([Pu])},this.oid="2.5.29.31",_u!==void 0&&(_u.array!==void 0?this.setByDPArray(_u.array):_u.uri!==void 0&&this.setByOneURI(_u.uri))},fe$3(l$j.asn1.x509.CRLDistributionPoints,l$j.asn1.x509.Extension),l$j.asn1.x509.DistributionPoint=function(_u){l$j.asn1.x509.DistributionPoint.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.x509.DistributionPointName;this.getEncodedHex=function(){var Cu=new $u.DERSequence;if(this.asn1DP!=null){var Pu=new $u.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Cu.appendASN1Object(Pu)}return this.hTLV=Cu.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.dpobj!==void 0?this.asn1DP=_u.dpobj:_u.dpname!==void 0?this.asn1DP=new Tu(_u.dpname):_u.fulluri!==void 0&&(this.asn1DP=new Tu({full:[{uri:_u.fulluri}]})))},fe$3(l$j.asn1.x509.DistributionPoint,l$j.asn1.ASN1Object),l$j.asn1.x509.DistributionPointName=function(_u){l$j.asn1.x509.DistributionPointName.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new Tu({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},_u!==void 0)if($u.x509.GeneralNames.prototype.isPrototypeOf(_u))this.type="full",this.tag="a0",this.asn1V=_u;else{if(_u.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new $u.x509.GeneralNames(_u.full)}},fe$3(l$j.asn1.x509.DistributionPointName,l$j.asn1.ASN1Object),l$j.asn1.x509.CertificatePolicies=function(_u){l$j.asn1.x509.CertificatePolicies.superclass.constructor.call(this,_u);var $u=l$j.asn1,Tu=$u.x509,Cu=$u.DERSequence,Pu=Tu.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Ru=[],Lu=0;Lu<this.params.array.length;Lu++)Ru.push(new Pu(this.params.array[Lu]));var Bu=new Cu({array:Ru});return this.asn1ExtnValue=Bu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",_u!==void 0&&(this.params=_u)},fe$3(l$j.asn1.x509.CertificatePolicies,l$j.asn1.x509.Extension),l$j.asn1.x509.PolicyInformation=function(_u){l$j.asn1.x509.PolicyInformation.superclass.constructor.call(this,_u);var $u=l$j.asn1,Tu=$u.DERSequence,Cu=$u.DERObjectIdentifier,Pu=$u.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Ru=[new Cu(this.params.policyoid)];if(this.params.array!==void 0){for(var Lu=[],Bu=0;Bu<this.params.array.length;Bu++)Lu.push(new Pu(this.params.array[Bu]));Lu.length>0&&Ru.push(new Tu({array:Lu}))}return new Tu({array:Ru}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$3(l$j.asn1.x509.PolicyInformation,l$j.asn1.ASN1Object),l$j.asn1.x509.PolicyQualifierInfo=function(_u){l$j.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,_u);var $u=l$j.asn1,Tu=$u.DERSequence,Cu=$u.DERIA5String,Pu=$u.DERObjectIdentifier,Ru=$u.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new Tu({array:[new Pu({oid:"1.3.6.1.5.5.7.2.1"}),new Cu({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new Tu({array:[new Pu({oid:"1.3.6.1.5.5.7.2.2"}),new Ru(this.params.unotice)]}).getEncodedHex():void 0},_u!==void 0&&(this.params=_u)},fe$3(l$j.asn1.x509.PolicyQualifierInfo,l$j.asn1.ASN1Object),l$j.asn1.x509.UserNotice=function(_u){l$j.asn1.x509.UserNotice.superclass.constructor.call(this,_u);var $u=l$j.asn1.DERSequence;l$j.asn1.DERInteger;var Tu=l$j.asn1.x509.DisplayText,Cu=l$j.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Pu=[];return this.params.noticeref!==void 0&&Pu.push(new Cu(this.params.noticeref)),this.params.exptext!==void 0&&Pu.push(new Tu(this.params.exptext)),new $u({array:Pu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$3(l$j.asn1.x509.UserNotice,l$j.asn1.ASN1Object),l$j.asn1.x509.NoticeReference=function(_u){l$j.asn1.x509.NoticeReference.superclass.constructor.call(this,_u);var $u=l$j.asn1.DERSequence,Tu=l$j.asn1.DERInteger,Cu=l$j.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Pu=[];if(this.params.org!==void 0&&Pu.push(new Cu(this.params.org)),this.params.noticenum!==void 0){for(var Ru=[],Lu=this.params.noticenum,Bu=0;Bu<Lu.length;Bu++)Ru.push(new Tu(Lu[Bu]));Pu.push(new $u({array:Ru}))}if(Pu.length==0)throw new Error("parameter is empty");return new $u({array:Pu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$3(l$j.asn1.x509.NoticeReference,l$j.asn1.ASN1Object),l$j.asn1.x509.DisplayText=function(_u){l$j.asn1.x509.DisplayText.superclass.constructor.call(this,_u),this.hT="0c",_u!==void 0&&(_u.type==="ia5"?this.hT="16":_u.type==="vis"?this.hT="1a":_u.type==="bmp"&&(this.hT="1e"))},fe$3(l$j.asn1.x509.DisplayText,l$j.asn1.DERAbstractString),l$j.asn1.x509.ExtKeyUsage=function(_u){l$j.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,_u);var $u=l$j.asn1;this.setPurposeArray=function(Tu){this.asn1ExtnValue=new $u.DERSequence;for(var Cu=0;Cu<Tu.length;Cu++){var Pu=new $u.DERObjectIdentifier(Tu[Cu]);this.asn1ExtnValue.appendASN1Object(Pu)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",_u!==void 0&&_u.array!==void 0&&this.setPurposeArray(_u.array)},fe$3(l$j.asn1.x509.ExtKeyUsage,l$j.asn1.x509.Extension),l$j.asn1.x509.AuthorityKeyIdentifier=function(_u){l$j.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$j,Tu=$u.asn1,Cu=Tu.DERTaggedObject,Pu=Tu.x509.GeneralNames;$u.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Ru=new Array;this.asn1KID&&Ru.push(new Cu({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Ru.push(new Cu({explicit:!1,tag:"a1",obj:new Pu([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Ru.push(new Cu({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Lu=new Tu.DERSequence({array:Ru});return this.asn1ExtnValue=Lu,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Ru){if(Ru.str!==void 0||Ru.hex!==void 0)this.asn1KID=new l$j.asn1.DEROctetString(Ru);else if(typeof Ru=="object"&&l$j.crypto.Util.isKey(Ru)||typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1){var Lu=Ru;typeof Ru=="string"&&(Lu=Ee$1.getKey(Ru));var Bu=Ee$1.getKeyID(Lu);this.asn1KID=new l$j.asn1.DEROctetString({hex:Bu})}},this.setCertIssuerByParam=function(Ru){Ru.str!==void 0||Ru.ldapstr!==void 0||Ru.hex!==void 0||Ru.certsubject!==void 0||Ru.certissuer!==void 0?this.asn1CertIssuer=new l$j.asn1.x509.X500Name(Ru):typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1&&Ru.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new l$j.asn1.x509.X500Name({certissuer:Ru}))},this.setCertSNByParam=function(Ru){if(Ru.str!==void 0||Ru.bigint!==void 0||Ru.hex!==void 0)this.asn1CertSN=new l$j.asn1.DERInteger(Ru);else if(typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1&&Ru.indexOf("CERTIFICATE")){var Lu=new Be;Lu.readCertPEM(Ru);var Bu=Lu.getSerialNumberHex();this.asn1CertSN=new l$j.asn1.DERInteger({hex:Bu})}},this.oid="2.5.29.35",_u!==void 0&&(_u.kid!==void 0&&this.setKIDByParam(_u.kid),_u.issuer!==void 0&&this.setCertIssuerByParam(_u.issuer),_u.sn!==void 0&&this.setCertSNByParam(_u.sn),_u.issuersn!==void 0&&typeof _u.issuersn=="string"&&_u.issuersn.indexOf("BEGIN ")!=-1&&_u.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(_u.issuersn),this.setCertIssuerByParam(_u.issuersn)))},fe$3(l$j.asn1.x509.AuthorityKeyIdentifier,l$j.asn1.x509.Extension),l$j.asn1.x509.SubjectKeyIdentifier=function(_u){l$j.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$j.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Tu){if(Tu.str!==void 0||Tu.hex!==void 0)this.asn1KID=new $u(Tu);else if(typeof Tu=="object"&&l$j.crypto.Util.isKey(Tu)||typeof Tu=="string"&&Tu.indexOf("BEGIN")!=-1){var Cu=Tu;typeof Tu=="string"&&(Cu=Ee$1.getKey(Tu));var Pu=Ee$1.getKeyID(Cu);this.asn1KID=new l$j.asn1.DEROctetString({hex:Pu})}},this.oid="2.5.29.14",_u!==void 0&&_u.kid!==void 0&&this.setKIDByParam(_u.kid)},fe$3(l$j.asn1.x509.SubjectKeyIdentifier,l$j.asn1.x509.Extension),l$j.asn1.x509.AuthorityInfoAccess=function(_u){l$j.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,_u),this.setAccessDescriptionArray=function($u){for(var Tu=new Array,Cu=l$j.asn1,Pu=Cu.DERSequence,Ru=Cu.DERObjectIdentifier,Lu=Cu.x509.GeneralName,Bu=0;Bu<$u.length;Bu++){var Vu,Ou=$u[Bu];if(Ou.ocsp!==void 0)Vu=new Pu({array:[new Ru({oid:"1.3.6.1.5.5.7.48.1"}),new Lu({uri:Ou.ocsp})]});else{if(Ou.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Ou));Vu=new Pu({array:[new Ru({oid:"1.3.6.1.5.5.7.48.2"}),new Lu({uri:Ou.caissuer})]})}Tu.push(Vu)}this.asn1ExtnValue=new Pu({array:Tu})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",_u!==void 0&&_u.array!==void 0&&this.setAccessDescriptionArray(_u.array)},fe$3(l$j.asn1.x509.AuthorityInfoAccess,l$j.asn1.x509.Extension),l$j.asn1.x509.SubjectAltName=function(_u){l$j.asn1.x509.SubjectAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$j.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$3(l$j.asn1.x509.SubjectAltName,l$j.asn1.x509.Extension),l$j.asn1.x509.IssuerAltName=function(_u){l$j.asn1.x509.IssuerAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$j.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$3(l$j.asn1.x509.IssuerAltName,l$j.asn1.x509.Extension),l$j.asn1.x509.SubjectDirectoryAttributes=function(_u){l$j.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,_u);var $u=l$j.asn1,Tu=$u.DERSequence,Cu=$u.ASN1Util.newObject,Pu=$u.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Ru=[],Lu=0;Lu<this.params.array.length;Lu++){var Bu=this.params.array[Lu],Vu={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Bu.attr=="dateOfBirth")Vu.seq[0].oid=Pu(Bu.attr),Vu.seq[1].set[0]={gentime:Bu.str};else if(Bu.attr=="placeOfBirth")Vu.seq[0].oid=Pu(Bu.attr),Vu.seq[1].set[0]={utf8str:Bu.str};else if(Bu.attr=="gender")Vu.seq[0].oid=Pu(Bu.attr),Vu.seq[1].set[0]={prnstr:Bu.str};else if(Bu.attr=="countryOfCitizenship")Vu.seq[0].oid=Pu(Bu.attr),Vu.seq[1].set[0]={prnstr:Bu.str};else{if(Bu.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Bu.attr);Vu.seq[0].oid=Pu(Bu.attr),Vu.seq[1].set[0]={prnstr:Bu.str}}Ru.push(new Cu(Vu))}var Ou=new Tu({array:Ru});return this.asn1ExtnValue=Ou,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",_u!==void 0&&(this.params=_u)},fe$3(l$j.asn1.x509.SubjectDirectoryAttributes,l$j.asn1.x509.Extension),l$j.asn1.x509.PrivateExtension=function(_u){l$j.asn1.x509.PrivateExtension.superclass.constructor.call(this,_u);var $u=l$j,Tu=$u.lang.String.isHex,Cu=$u.asn1,Pu=Cu.x509.OID.name2oid,Ru=Cu.ASN1Util.newObject;this.params=null,this.setByParam=function(Lu){this.oid=Pu(Lu.extname),this.params=Lu},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Lu=this.params.extn;if(typeof Lu=="string"&&Tu(Lu))return Lu;if(typeof Lu=="object")try{return Ru(Lu).getEncodedHex()}catch{}throw new Error("unsupported extn value")},_u!=null&&this.setByParam(_u)},fe$3(l$j.asn1.x509.PrivateExtension,l$j.asn1.x509.Extension),l$j.asn1.x509.CRL=function(_u){l$j.asn1.x509.CRL.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.DERSequence,Cu=$u.DERBitString,Pu=$u.x509,Ru=Pu.AlgorithmIdentifier,Lu=Pu.TBSCertList;this.params=void 0,this.setByParam=function(Bu){this.params=Bu},this.sign=function(){var Bu=new Lu(this.params).getEncodedHex(),Vu=new l$j.crypto.Signature({alg:this.params.sigalg});Vu.init(this.params.cakey),Vu.updateHex(Bu);var Ou=Vu.sign();this.params.sighex=Ou},this.getPEM=function(){return ae$2(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Bu=this.params;if(Bu.tbsobj==null&&(Bu.tbsobj=new Lu(Bu)),Bu.sighex==null&&Bu.cakey!=null&&this.sign(),Bu.sighex==null)throw new Error("sighex or cakey parameter not defined");var Vu=[];return Vu.push(Bu.tbsobj),Vu.push(new Ru({name:Bu.sigalg})),Vu.push(new Cu({hex:"00"+Bu.sighex})),new Tu({array:Vu}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$3(l$j.asn1.x509.CRL,l$j.asn1.ASN1Object),l$j.asn1.x509.TBSCertList=function(_u){l$j.asn1.x509.TBSCertList.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.DERInteger,Cu=$u.DERSequence,Pu=$u.DERTaggedObject;$u.DERObjectIdentifier;var Ru=$u.x509,Lu=Ru.AlgorithmIdentifier,Bu=Ru.Time,Vu=Ru.Extensions,Ou=Ru.X500Name;this.params=null,this.setByParam=function(Du){this.params=Du},this.getRevCertSequence=function(){for(var Du=[],ku=this.params.revcert,Fu=0;Fu<ku.length;Fu++){var Nu=[new Tu(ku[Fu].sn),new Bu(ku[Fu].date)];ku[Fu].ext!=null&&Nu.push(new Vu(ku[Fu].ext)),Du.push(new Cu({array:Nu}))}return new Cu({array:Du})},this.getEncodedHex=function(){var Du=[],ku=this.params;if(ku.version!=null){var Fu=ku.version-1,Nu=new Tu({int:Fu});Du.push(Nu)}if(Du.push(new Lu({name:ku.sigalg})),Du.push(new Ou(ku.issuer)),Du.push(new Bu(ku.thisupdate)),ku.nextupdate!=null&&Du.push(new Bu(ku.nextupdate)),ku.revcert!=null&&Du.push(this.getRevCertSequence()),ku.ext!=null){var Gu=new Vu(ku.ext);Du.push(new Pu({tag:"a0",explicit:!0,obj:Gu}))}return new Cu({array:Du}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$3(l$j.asn1.x509.TBSCertList,l$j.asn1.ASN1Object),l$j.asn1.x509.CRLEntry=function(_u){l$j.asn1.x509.CRLEntry.superclass.constructor.call(this);var $u=l$j.asn1;this.setCertSerial=function(Tu){this.sn=new $u.DERInteger(Tu)},this.setRevocationDate=function(Tu){this.time=new $u.x509.Time(Tu)},this.getEncodedHex=function(){var Tu=new $u.DERSequence({array:[this.sn,this.time]});return this.TLV=Tu.getEncodedHex(),this.TLV},_u!==void 0&&(_u.time!==void 0&&this.setRevocationDate(_u.time),_u.sn!==void 0&&this.setCertSerial(_u.sn))},fe$3(l$j.asn1.x509.CRLEntry,l$j.asn1.ASN1Object),l$j.asn1.x509.CRLNumber=function(_u){l$j.asn1.x509.CRLNumber.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$j.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",_u!=null&&(this.params=_u)},fe$3(l$j.asn1.x509.CRLNumber,l$j.asn1.x509.Extension),l$j.asn1.x509.CRLReason=function(_u){l$j.asn1.x509.CRLReason.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$j.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",_u!=null&&(this.params=_u)},fe$3(l$j.asn1.x509.CRLReason,l$j.asn1.x509.Extension),l$j.asn1.x509.OCSPNonce=function(_u){l$j.asn1.x509.OCSPNonce.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$j.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",_u!=null&&(this.params=_u)},fe$3(l$j.asn1.x509.OCSPNonce,l$j.asn1.x509.Extension),l$j.asn1.x509.OCSPNoCheck=function(_u){l$j.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$j.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",_u!=null&&(this.params=_u)},fe$3(l$j.asn1.x509.OCSPNoCheck,l$j.asn1.x509.Extension),l$j.asn1.x509.AdobeTimeStamp=function(_u){l$j.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,_u);var $u=l$j.asn1,Tu=$u.DERInteger,Cu=$u.DERBoolean,Pu=$u.DERSequence,Ru=$u.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Lu=this.params,Bu=[new Tu(1)];return Bu.push(new Ru({uri:Lu.uri})),Lu.reqauth!=null&&Bu.push(new Cu(Lu.reqauth)),this.asn1ExtnValue=new Pu({array:Bu}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",_u!==void 0&&this.setByParam(_u)},fe$3(l$j.asn1.x509.AdobeTimeStamp,l$j.asn1.x509.Extension),l$j.asn1.x509.X500Name=function(_u){l$j.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$j.asn1,Tu=$u.x509,Cu=Tu.RDN;this.setByString=function(Pu,Ru){Ru!==void 0&&(this.sRule=Ru);var Lu=Pu.split("/");Lu.shift();for(var Bu=[],Vu=0;Vu<Lu.length;Vu++)if(Lu[Vu].match(/^[^=]+=.+$/))Bu.push(Lu[Vu]);else{var Ou=Bu.length-1;Bu[Ou]=Bu[Ou]+"/"+Lu[Vu]}for(Vu=0;Vu<Bu.length;Vu++)this.asn1Array.push(new Cu({str:Bu[Vu],rule:this.sRule}))},this.setByLdapString=function(Pu,Ru){Ru!==void 0&&(this.sRule=Ru);var Lu=Tu.X500Name.ldapToCompat(Pu);this.setByString(Lu,Ru)},this.setByObject=function(Pu,Ru){for(var Lu in Ru!==void 0&&(this.sRule=Ru),Pu)if(Pu.hasOwnProperty(Lu)){var Bu=new Cu({str:Lu+"="+Pu[Lu],rule:this.sRule});this.asn1Array?this.asn1Array.push(Bu):this.asn1Array=[Bu]}},this.setByParam=function(Pu){var Ru;Pu.rule!==void 0&&(this.sRule=Pu.rule),Pu.array!==void 0?this.paramArray=Pu.array:Pu.str!==void 0?this.setByString(Pu.str):Pu.ldapstr!==void 0?this.setByLdapString(Pu.ldapstr):Pu.hex!==void 0?this.hTLV=Pu.hex:Pu.certissuer!==void 0?((Ru=new Be).readCertPEM(Pu.certissuer),this.hTLV=Ru.getIssuerHex()):Pu.certsubject!==void 0?((Ru=new Be).readCertPEM(Pu.certsubject),this.hTLV=Ru.getSubjectHex()):typeof Pu=="object"&&Pu.certsubject===void 0&&Pu.certissuer===void 0&&this.setByObject(Pu)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Pu=0;Pu<this.paramArray.length;Pu++){var Ru={array:this.paramArray[Pu]};this.sRule!="utf8"&&(Ru.rule=this.sRule);var Lu=new Cu(Ru);this.asn1Array.push(Lu)}var Bu=new $u.DERSequence({array:this.asn1Array});return this.hTLV=Bu.getEncodedHex(),this.hTLV},_u!==void 0&&this.setByParam(_u)},fe$3(l$j.asn1.x509.X500Name,l$j.asn1.ASN1Object),l$j.asn1.x509.X500Name.compatToLDAP=function(_u){if(_u.substr(0,1)!=="/")throw"malformed input";var $u=(_u=_u.substr(1)).split("/");return $u.reverse(),($u=$u.map(function(Tu){return Tu.replace(/,/,"\\,")})).join(",")},l$j.asn1.x509.X500Name.onelineToLDAP=function(_u){return l$j.asn1.x509.X500Name.compatToLDAP(_u)},l$j.asn1.x509.X500Name.ldapToCompat=function(_u){for(var $u=_u.split(","),Tu=!1,Cu=[],Pu=0;$u.length>0;Pu++){var Ru=$u.shift();if(Tu===!0){var Lu=(Cu.pop()+","+Ru).replace(/\\,/g,",");Cu.push(Lu),Tu=!1}else Cu.push(Ru);Ru.substr(-1,1)==="\\"&&(Tu=!0)}return(Cu=Cu.map(function(Bu){return Bu.replace("/","\\/")})).reverse(),"/"+Cu.join("/")},l$j.asn1.x509.X500Name.ldapToOneline=function(_u){return l$j.asn1.x509.X500Name.ldapToCompat(_u)},l$j.asn1.x509.RDN=function(_u){l$j.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$j.asn1.x509.AttributeTypeAndValue;this.setByParam=function(Tu){Tu.rule!==void 0&&(this.sRule=Tu.rule),Tu.str!==void 0&&this.addByMultiValuedString(Tu.str),Tu.array!==void 0&&(this.paramArray=Tu.array)},this.addByString=function(Tu){this.asn1Array.push(new l$j.asn1.x509.AttributeTypeAndValue({str:Tu,rule:this.sRule}))},this.addByMultiValuedString=function(Tu){for(var Cu=l$j.asn1.x509.RDN.parseString(Tu),Pu=0;Pu<Cu.length;Pu++)this.addByString(Cu[Pu])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Tu=0;Tu<this.paramArray.length;Tu++){var Cu=this.paramArray[Tu];Cu.rule!==void 0&&this.sRule!="utf8"&&(Cu.rule=this.sRule);var Pu=new $u(Cu);this.asn1Array.push(Pu)}var Ru=new l$j.asn1.DERSet({array:this.asn1Array});return this.TLV=Ru.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$3(l$j.asn1.x509.RDN,l$j.asn1.ASN1Object),l$j.asn1.x509.RDN.parseString=function(_u){for(var $u=_u.split(/\+/),Tu=!1,Cu=[],Pu=0;$u.length>0;Pu++){var Ru=$u.shift();if(Tu===!0){var Lu=(Cu.pop()+"+"+Ru).replace(/\\\+/g,"+");Cu.push(Lu),Tu=!1}else Cu.push(Ru);Ru.substr(-1,1)==="\\"&&(Tu=!0)}var Bu=!1,Vu=[];for(Pu=0;Cu.length>0;Pu++){if(Ru=Cu.shift(),Bu===!0){var Ou=Vu.pop();Ru.match(/"$/)?(Lu=(Ou+"+"+Ru).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Vu.push(Lu),Bu=!1):Vu.push(Ou+"+"+Ru)}else Vu.push(Ru);Ru.match(/^[^=]+="/)&&(Bu=!0)}return Vu},l$j.asn1.x509.AttributeTypeAndValue=function(_u){l$j.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var $u=l$j,Tu=$u.asn1,Cu=Tu.DERSequence,Pu=Tu.DERUTF8String,Ru=Tu.DERPrintableString,Lu=Tu.DERTeletexString,Bu=Tu.DERIA5String,Vu=Tu.DERVisibleString,Ou=Tu.DERBMPString,Du=$u.lang.String.isMail,ku=$u.lang.String.isPrintable;this.setByParam=function(Fu){if(Fu.rule!==void 0&&(this.sRule=Fu.rule),Fu.ds!==void 0&&(this.dsType=Fu.ds),Fu.value===void 0&&Fu.str!==void 0){var Nu=Fu.str.match(/^([^=]+)=(.+)$/);if(!Nu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Nu[1],this.sValue=Nu[2]}else this.sType=Fu.type,this.sValue=Fu.value},this.setByString=function(Fu,Nu){Nu!==void 0&&(this.sRule=Nu);var Gu=Fu.match(/^([^=]+)=(.+)$/);if(!Gu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Gu[1],Gu[2])},this._getDsType=function(){var Fu=this.sType,Nu=this.sValue,Gu=this.sRule;return Gu==="prn"?Fu=="CN"&&Du(Nu)?"ia5":ku(Nu)?"prn":"utf8":Gu==="utf8"?Fu=="CN"&&Du(Nu)?"ia5":Fu=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(Fu,Nu,Gu){Gu!==void 0&&(this.sRule=Gu),this.sType=Fu,this.sValue=Nu},this.getValueObj=function(Fu,Nu){if(Fu=="utf8")return new Pu({str:Nu});if(Fu=="prn")return new Ru({str:Nu});if(Fu=="tel")return new Lu({str:Nu});if(Fu=="ia5")return new Bu({str:Nu});if(Fu=="vis")return new Vu({str:Nu});if(Fu=="bmp")return new Ou({str:Nu});throw new Error("unsupported directory string type: type="+Fu+" value="+Nu)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var Fu=l$j.asn1.x509.OID.atype2obj(this.sType),Nu=this.getValueObj(this.dsType,this.sValue),Gu=new Cu({array:[Fu,Nu]});return this.TLV=Gu.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$3(l$j.asn1.x509.AttributeTypeAndValue,l$j.asn1.ASN1Object),l$j.asn1.x509.SubjectPublicKeyInfo=function(_u){l$j.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var $u=l$j,Tu=$u.asn1,Cu=Tu.DERInteger,Pu=Tu.DERBitString,Ru=Tu.DERObjectIdentifier,Lu=Tu.DERSequence,Bu=Tu.ASN1Util.newObject,Vu=Tu.x509.AlgorithmIdentifier,Ou=$u.crypto;Ou.ECDSA,Ou.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Lu({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Du=this.getASN1Object();return this.hTLV=Du.getEncodedHex(),this.hTLV},this.setPubKey=function(Du){try{if(Du instanceof X$5){var ku=Bu({seq:[{int:{bigint:Du.n}},{int:{int:Du.e}}]}).getEncodedHex();this.asn1AlgId=new Vu({name:"rsaEncryption"}),this.asn1SubjPKey=new Pu({hex:"00"+ku})}}catch{}try{if(Du instanceof l$j.crypto.ECDSA){var Fu=new Ru({name:Du.curveName});this.asn1AlgId=new Vu({name:"ecPublicKey",asn1params:Fu}),this.asn1SubjPKey=new Pu({hex:"00"+Du.pubKeyHex})}}catch{}try{if(Du instanceof l$j.crypto.DSA){Fu=new Bu({seq:[{int:{bigint:Du.p}},{int:{bigint:Du.q}},{int:{bigint:Du.g}}]}),this.asn1AlgId=new Vu({name:"dsa",asn1params:Fu});var Nu=new Cu({bigint:Du.y});this.asn1SubjPKey=new Pu({hex:"00"+Nu.getEncodedHex()})}}catch{}},_u!==void 0&&this.setPubKey(_u)},fe$3(l$j.asn1.x509.SubjectPublicKeyInfo,l$j.asn1.ASN1Object),l$j.asn1.x509.Time=function(_u){l$j.asn1.x509.Time.superclass.constructor.call(this);var $u=l$j.asn1,Tu=$u.DERUTCTime,Cu=$u.DERGeneralizedTime;this.setTimeParams=function(Pu){this.timeParams=Pu},this.getEncodedHex=function(){var Pu=null;return Pu=this.timeParams!=null?this.type=="utc"?new Tu(this.timeParams):new Cu(this.timeParams):this.type=="utc"?new Tu:new Cu,this.TLV=Pu.getEncodedHex(),this.TLV},this.type="utc",_u!==void 0&&(_u.type!==void 0?this.type=_u.type:_u.str!==void 0&&(_u.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),_u.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=_u)},fe$3(l$j.asn1.x509.Time,l$j.asn1.ASN1Object),l$j.asn1.x509.AlgorithmIdentifier=function(_u){l$j.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var $u=l$j.asn1,Tu=$u.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Pu=null;for(var Ru in Tu)Ru===this.nameAlg&&(Pu=Tu[Ru]);if(Pu!==null)return this.hTLV=Pu,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=$u.x509.OID.name2obj(this.nameAlg));var Lu=[this.asn1Alg];this.asn1Params!==null&&Lu.push(this.asn1Params);var Bu=new $u.DERSequence({array:Lu});return this.hTLV=Bu.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.name!==void 0&&(this.nameAlg=_u.name),_u.asn1params!==void 0&&(this.asn1Params=_u.asn1params),_u.paramempty!==void 0&&(this.paramEmpty=_u.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Cu=this.nameAlg.toLowerCase();Cu.substr(-7,7)!=="withdsa"&&Cu.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new $u.DERNull)}},fe$3(l$j.asn1.x509.AlgorithmIdentifier,l$j.asn1.ASN1Object),l$j.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},l$j.asn1.x509.GeneralName=function(_u){l$j.asn1.x509.GeneralName.superclass.constructor.call(this);var $u={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},Tu=l$j.asn1;Tu.DERSequence;var Cu=Tu.DEROctetString,Pu=Tu.DERIA5String,Ru=Tu.DERTaggedObject,Lu=Tu.ASN1Object,Bu=Tu.x509.X500Name,Vu=le$2;this.explicit=!1,this.setByParam=function(Ou){var Du=null;if(Ou!==void 0){if(Ou.rfc822!==void 0&&(this.type="rfc822",Du=new Pu({str:Ou[this.type]})),Ou.dns!==void 0&&(this.type="dns",Du=new Pu({str:Ou[this.type]})),Ou.uri!==void 0&&(this.type="uri",Du=new Pu({str:Ou[this.type]})),Ou.dn!==void 0&&(this.type="dn",this.explicit=!0,Du=typeof Ou.dn=="string"?new Bu({str:Ou.dn}):Ou.dn instanceof l$j.asn1.x509.X500Name?Ou.dn:new Bu(Ou.dn)),Ou.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Du=new Bu({ldapstr:Ou.ldapdn})),Ou.certissuer!==void 0){this.type="dn",this.explicit=!0;var ku=null;if((Nu=Ou.certissuer).match(/^[0-9A-Fa-f]+$/),Nu.indexOf("-----BEGIN ")!=-1&&(ku=Vu(Nu)),ku==null)throw"certissuer param not cert";(Gu=new Be).hex=ku;var Fu=Gu.getIssuerHex();(Du=new Lu).hTLV=Fu}if(Ou.certsubj!==void 0){this.type="dn",this.explicit=!0;var Nu,Gu;if(ku=null,(Nu=Ou.certsubj).match(/^[0-9A-Fa-f]+$/),Nu.indexOf("-----BEGIN ")!=-1&&(ku=Vu(Nu)),ku==null)throw"certsubj param not cert";(Gu=new Be).hex=ku,Fu=Gu.getSubjectHex(),(Du=new Lu).hTLV=Fu}if(Ou.ip!==void 0){this.type="ip",this.explicit=!1;var zu,Hu=Ou.ip,Uu="malformed IP address";if(Hu.match(/^[0-9.]+[.][0-9.]+$/)){if((zu=function(ju){ju=(ju=(ju=ju.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return ju.split(/,/).map(function(Wu,Qu,qu){var Yu=parseInt(Wu);if(Yu<0||255<Yu)throw"integer not in range 0-255";return("00"+Yu.toString(16)).slice(-2)}).join("")}catch(Wu){throw"malformed integer array string: "+Wu}}("["+Hu.split(".").join(",")+"]")).length!==8)throw Uu}else if(Hu.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))zu=function(ju){var Wu="malformed IPv6 address";if(!ju.match(/^[0-9A-Fa-f:]+$/))throw Wu;var Qu=(ju=ju.toLowerCase()).split(":").length-1;if(Qu<2)throw Wu;var qu=":".repeat(7-Qu+2),Yu=(ju=ju.replace("::",qu)).split(":");if(Yu.length!=8)throw Wu;for(var Ju=0;Ju<8;Ju++)Yu[Ju]=("0000"+Yu[Ju]).slice(-4);return Yu.join("")}(Hu);else{if(!Hu.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Uu;zu=Hu}Du=new Cu({hex:zu})}if(this.type==null)throw"unsupported type in params="+Ou;this.asn1Obj=new Ru({explicit:this.explicit,tag:$u[this.type],obj:Du})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$3(l$j.asn1.x509.GeneralName,l$j.asn1.ASN1Object),l$j.asn1.x509.GeneralNames=function(_u){l$j.asn1.x509.GeneralNames.superclass.constructor.call(this);var $u=l$j.asn1;this.setByParamArray=function(Tu){for(var Cu=0;Cu<Tu.length;Cu++){var Pu=new $u.x509.GeneralName(Tu[Cu]);this.asn1Array.push(Pu)}},this.getEncodedHex=function(){return new $u.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,_u!==void 0&&this.setByParamArray(_u)},fe$3(l$j.asn1.x509.GeneralNames,l$j.asn1.ASN1Object),l$j.asn1.x509.OID=new function(_u){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];if(this.name2oidList[$u]===void 0)throw"Name of ObjectIdentifier not defined: "+$u;var Tu=this.name2oidList[$u],Cu=new l$j.asn1.DERObjectIdentifier({oid:Tu});return this.objCache[$u]=Cu,Cu},this.atype2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];var Tu;if($u.match(/^\d+\.\d+\.[0-9.]+$/))Tu=$u;else if(this.atype2oidList[$u]!==void 0)Tu=this.atype2oidList[$u];else{if(this.name2oidList[$u]===void 0)throw"AttributeType name undefined: "+$u;Tu=this.name2oidList[$u]}var Cu=new l$j.asn1.DERObjectIdentifier({oid:Tu});return this.objCache[$u]=Cu,Cu}},l$j.asn1.x509.OID.oid2name=function(_u){var $u=l$j.asn1.x509.OID.name2oidList;for(var Tu in $u)if($u[Tu]==_u)return Tu;return""},l$j.asn1.x509.OID.oid2atype=function(_u){var $u=l$j.asn1.x509.OID.atype2oidList;for(var Tu in $u)if($u[Tu]==_u)return Tu;return _u},l$j.asn1.x509.OID.name2oid=function(_u){if(_u.match(/^[0-9.]+$/))return _u;var $u=l$j.asn1.x509.OID.name2oidList;return $u[_u]===void 0?"":$u[_u]},l$j.asn1.x509.X509Util={},l$j.asn1.x509.X509Util.newCertPEM=function(_u){var $u=l$j.asn1.x509;return $u.TBSCertificate,new $u.Certificate(_u).getPEM()},X$5.getPosArrayOfChildrenFromHex=function(_u){return Me$1.getChildIdx(_u,0)},X$5.getHexValueArrayOfChildrenFromHex=function(_u){var $u,Tu=Me$1.getV,Cu=Tu(_u,($u=X$5.getPosArrayOfChildrenFromHex(_u))[0]),Pu=Tu(_u,$u[1]),Ru=Tu(_u,$u[2]),Lu=Tu(_u,$u[3]),Bu=Tu(_u,$u[4]),Vu=Tu(_u,$u[5]),Ou=Tu(_u,$u[6]),Du=Tu(_u,$u[7]),ku=Tu(_u,$u[8]);return($u=new Array).push(Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku),$u},X$5.prototype.readPrivateKeyFromPEMString=function(_u){var $u=le$2(_u),Tu=X$5.getHexValueArrayOfChildrenFromHex($u);this.setPrivateEx(Tu[1],Tu[2],Tu[3],Tu[4],Tu[5],Tu[6],Tu[7],Tu[8])},X$5.prototype.readPKCS5PrvKeyHex=function(_u){var $u=X$5.getHexValueArrayOfChildrenFromHex(_u);this.setPrivateEx($u[1],$u[2],$u[3],$u[4],$u[5],$u[6],$u[7],$u[8])},X$5.prototype.readPKCS8PrvKeyHex=function(_u){var $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou=Me$1,Du=Ou.getVbyListEx;if(Ou.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");try{$u=Du(_u,0,[2,0,1],"02"),Tu=Du(_u,0,[2,0,2],"02"),Cu=Du(_u,0,[2,0,3],"02"),Pu=Du(_u,0,[2,0,4],"02"),Ru=Du(_u,0,[2,0,5],"02"),Lu=Du(_u,0,[2,0,6],"02"),Bu=Du(_u,0,[2,0,7],"02"),Vu=Du(_u,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx($u,Tu,Cu,Pu,Ru,Lu,Bu,Vu)},X$5.prototype.readPKCS5PubKeyHex=function(_u){var $u=Me$1,Tu=$u.getV;if($u.isASN1HEX(_u)===!1)throw new Error("keyHex is not ASN.1 hex string");var Cu=$u.getChildIdx(_u,0);if(Cu.length!==2||_u.substr(Cu[0],2)!=="02"||_u.substr(Cu[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Pu=Tu(_u,Cu[0]),Ru=Tu(_u,Cu[1]);this.setPublic(Pu,Ru)},X$5.prototype.readPKCS8PubKeyHex=function(_u){var $u=Me$1;if($u.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");if($u.getTLVbyListEx(_u,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var Tu=$u.getTLVbyListEx(_u,0,[1,0]);this.readPKCS5PubKeyHex(Tu)},X$5.prototype.readCertPubKeyHex=function(_u,$u){var Tu,Cu;(Tu=new Be).readCertHex(_u),Cu=Tu.getPublicKeyHex(),this.readPKCS8PubKeyHex(Cu)},X$5.prototype.sign=function(_u,$u){var Tu,Cu=(Tu=_u,l$j.crypto.Util.hashString(Tu,$u));return this.signWithMessageHash(Cu,$u)},X$5.prototype.signWithMessageHash=function(_u,$u){var Tu=G$a(l$j.crypto.Util.getPaddedDigestInfoHex(_u,$u,this.n.bitLength()),16);return Ie$1(this.doPrivate(Tu).toString(16),this.n.bitLength())},X$5.prototype.signPSS=function(_u,$u,Tu){var Cu,Pu=(Cu=oe$1(_u),l$j.crypto.Util.hashHex(Cu,$u));return Tu===void 0&&(Tu=-1),this.signWithMessageHashPSS(Pu,$u,Tu)},X$5.prototype.signWithMessageHashPSS=function(_u,$u,Tu){var Cu,Pu=re$3(_u),Ru=Pu.length,Lu=this.n.bitLength()-1,Bu=Math.ceil(Lu/8),Vu=function(Hu){return l$j.crypto.Util.hashHex(Hu,$u)};if(Tu===-1||Tu===void 0)Tu=Ru;else if(Tu===-2)Tu=Bu-Ru-2;else if(Tu<-2)throw new Error("invalid salt length");if(Bu<Ru+Tu+2)throw new Error("data too long");var Ou="";Tu>0&&(Ou=new Array(Tu),new j$8().nextBytes(Ou),Ou=String.fromCharCode.apply(String,Ou));var Du=re$3(Vu(oe$1("\0\0\0\0\0\0\0\0"+Pu+Ou))),ku=[];for(Cu=0;Cu<Bu-Tu-Ru-2;Cu+=1)ku[Cu]=0;var Fu=String.fromCharCode.apply(String,ku)+""+Ou,Nu=Se(Du,Fu.length,Vu),Gu=[];for(Cu=0;Cu<Fu.length;Cu+=1)Gu[Cu]=Fu.charCodeAt(Cu)^Nu.charCodeAt(Cu);var zu=65280>>8*Bu-Lu&255;for(Gu[0]&=~zu,Cu=0;Cu<Ru;Cu++)Gu.push(Du.charCodeAt(Cu));return Gu.push(188),Ie$1(this.doPrivate(new c$s(Gu)).toString(16),this.n.bitLength())},X$5.prototype.verify=function(_u,$u){if(($u=$u.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var Tu=G$a($u,16),Cu=this.n.bitLength();if(Tu.bitLength()>Cu)return!1;var Pu=this.doPublic(Tu).toString(16);if(Pu.length+3!=Cu/4)return!1;var Ru=Ce$1(Pu.replace(/^1f+00/,""));if(Ru.length==0)return!1;var Lu,Bu=Ru[0];return Ru[1]==(Lu=_u,l$j.crypto.Util.hashString(Lu,Bu))},X$5.prototype.verifyWithMessageHash=function(_u,$u){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Tu=G$a($u,16);if(Tu.bitLength()>this.n.bitLength())return 0;var Cu=Ce$1(this.doPublic(Tu).toString(16).replace(/^1f+00/,""));return Cu.length!=0&&(Cu[0],Cu[1]==_u)},X$5.prototype.verifyPSS=function(_u,$u,Tu,Cu){var Pu=function(Ru){return l$j.crypto.Util.hashHex(Ru,Tu)}(oe$1(_u));return Cu===void 0&&(Cu=-1),this.verifyWithMessageHashPSS(Pu,$u,Tu,Cu)},X$5.prototype.verifyWithMessageHashPSS=function(_u,$u,Tu,Cu){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Pu,Ru=new c$s($u,16),Lu=function(ju){return l$j.crypto.Util.hashHex(ju,Tu)},Bu=re$3(_u),Vu=Bu.length,Ou=this.n.bitLength()-1,Du=Math.ceil(Ou/8);if(Cu===-1||Cu===void 0)Cu=Vu;else if(Cu===-2)Cu=Du-Vu-2;else if(Cu<-2)throw new Error("invalid salt length");if(Du<Vu+Cu+2)throw new Error("data too long");var ku=this.doPublic(Ru).toByteArray();for(Pu=0;Pu<ku.length;Pu+=1)ku[Pu]&=255;for(;ku.length<Du;)ku.unshift(0);if(ku[Du-1]!==188)throw new Error("encoded message does not end in 0xbc");var Fu=(ku=String.fromCharCode.apply(String,ku)).substr(0,Du-Vu-1),Nu=ku.substr(Fu.length,Vu),Gu=65280>>8*Du-Ou&255;if((Fu.charCodeAt(0)&Gu)!=0)throw new Error("bits beyond keysize not zero");var zu=Se(Nu,Fu.length,Lu),Hu=[];for(Pu=0;Pu<Fu.length;Pu+=1)Hu[Pu]=Fu.charCodeAt(Pu)^zu.charCodeAt(Pu);Hu[0]&=~Gu;var Uu=Du-Vu-Cu-2;for(Pu=0;Pu<Uu;Pu+=1)if(Hu[Pu]!==0)throw new Error("leftmost octets not zero");if(Hu[Uu]!==1)throw new Error("0x01 marker not found");return Nu===re$3(Lu(oe$1("\0\0\0\0\0\0\0\0"+Bu+String.fromCharCode.apply(String,Hu.slice(-Cu)))))},X$5.SALT_LEN_HLEN=-1,X$5.SALT_LEN_MAX=-2,X$5.SALT_LEN_RECOVER=-2,Be.hex2dn=function(_u,$u){$u===void 0&&($u=0);var Tu=new Be;return Me$1.getTLV(_u,$u),Tu.getX500Name(_u).str},Be.hex2rdn=function(_u,$u){if($u===void 0&&($u=0),_u.substr($u,2)!=="31")throw new Error("malformed RDN");for(var Tu=new Array,Cu=Me$1.getChildIdx(_u,$u),Pu=0;Pu<Cu.length;Pu++)Tu.push(Be.hex2attrTypeValue(_u,Cu[Pu]));return(Tu=Tu.map(function(Ru){return Ru.replace("+","\\+")})).join("+")},Be.hex2attrTypeValue=function(_u,$u){var Tu=Me$1,Cu=Tu.getV;if($u===void 0&&($u=0),_u.substr($u,2)!=="30")throw new Error("malformed attribute type and value");var Pu=Tu.getChildIdx(_u,$u);Pu.length!==2||_u.substr(Pu[0],2);var Ru=Cu(_u,Pu[0]),Lu=l$j.asn1.ASN1Util.oidHexToInt(Ru);return l$j.asn1.x509.OID.oid2atype(Lu)+"="+re$3(Cu(_u,Pu[1]))},Be.getPublicKeyFromCertHex=function(_u){var $u=new Be;return $u.readCertHex(_u),$u.getPublicKey()},Be.getPublicKeyFromCertPEM=function(_u){var $u=new Be;return $u.readCertPEM(_u),$u.getPublicKey()},Be.getPublicKeyInfoPropOfCertPEM=function(_u){var $u,Tu,Cu=Me$1.getVbyList,Pu={};return Pu.algparam=null,($u=new Be).readCertPEM(_u),Tu=$u.getPublicKeyHex(),Pu.keyhex=Cu(Tu,0,[1],"03").substr(2),Pu.algoid=Cu(Tu,0,[0,0],"06"),Pu.algoid==="2a8648ce3d0201"&&(Pu.algparam=Cu(Tu,0,[0,1],"06")),Pu},Be.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Pe,Re$1=[(Pe=new Be,Pe.readCertPEM(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Ru="";return arguments[Pu].split(Ru).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Ru)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Pe)];function ke$3(_u,$u){var Tu=_u.getIssuerHex();if(Tu===_u.getSubjectHex())return _u.verifySignature(_u.getPublicKey());var Cu=function(Pu,Ru){for(var Lu=0,Bu=Ru;Lu<Bu.length;Lu++){var Vu=Bu[Lu];if(Vu.getSubjectHex()===Pu)return Vu}}(Tu,$u);return!!Cu&&_u.verifySignature(Cu.getPublicKey())!==!1&&ke$3(Cu,$u)}function De$1(_u){return _u.getIssuerHex()!==_u.getSubjectHex()&&ke$3(_u,Re$1)}(function(_u){var $u=new Be;typeof _u=="string"?$u.readCertPEM(_u):$u.readCertHex(_u.hex),De$1($u),Re$1.push($u)})(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Ru="";return arguments[Pu].split(Ru).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Ru)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var Le,Oe$1=(Le="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(Le,">$"):Symbol(Le));function Ne$1(_u){return _u[Oe$1]||(_u[Oe$1]={}),_u[Oe$1]}var Fe=function(){function _u(){}return _u.prototype.hasListener=function($u){var Tu=Ne$1(this);return Tu&&Tu[$u]&&Tu[$u].length>0},_u.prototype.on=function($u,Tu,Cu){var Pu=this,Ru=Ne$1(this);return Ru[$u]||(Ru[$u]=[]),Ru[$u].push([Tu,Cu||!1]),function(){return Pu.off($u,Tu)}},_u.prototype.once=function($u,Tu){return this.on($u,Tu,!0)},_u.prototype.off=function($u,Tu){if($u!==void 0){var Cu,Pu=Ne$1(this);if(Pu[$u]||(Pu[$u]=[]),Tu!==void 0){for(var Ru=0;Ru<Pu[$u].length&&Pu[$u][Ru][0]!==Tu;Ru++);Ru<Pu[$u].length&&Pu[$u].splice(Ru,1)}else Pu[$u].length=0}else(Cu=this)[Oe$1]||delete Cu[Oe$1]},_u.prototype.emit=function($u){for(var Tu=[],Cu=1;Cu<arguments.length;Cu++)Tu[Cu-1]=arguments[Cu];for(var Pu=!1,Ru=Ne$1(this),Lu=Ru[$u]||[],Bu=0,Vu=Lu.slice();Bu<Vu.length;Bu++){var Ou=Vu[Bu],Du=Ou[0],ku=Ou[1],Fu=ku!==void 0&&ku,Nu=Du.apply(void 0,Tu);Fu&&this.off($u,Du),Nu===!1&&(Pu=!0)}return Pu},_u}();function Qe$1(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u]}var Ve=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),_e$3=typeof performance!="undefined"?function(){return Ve+performance.now()}:function(){return Date.now()};function He(_u){Object.freeze(_u);var $u=typeof _u=="function",Tu=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(_u).forEach(function(Cu){!Tu.call(_u,Cu)||$u&&(Cu==="caller"||Cu==="callee"||Cu==="arguments")||_u[Cu]===null||typeof _u[Cu]!="object"&&typeof _u[Cu]!="function"||Object.isFrozen(_u[Cu])||He(_u[Cu])}),_u}var qe$1=/^([^.]+)(\.([^.]+))*$/;function ze(_u){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(_u)}function Ke(_u,$u){return qe$1.test(_u)&&qe$1.test($u)&&function(Tu,Cu){if(Tu==="*")return!0;var Pu=Tu.split(".").reverse(),Ru=Cu.split(".").reverse();if(Pu.length<=1)return Tu===Cu;for(var Lu=0;Lu<Pu.length;Lu++)if(Pu[Lu]!==Ru[Lu])return!1;return!0}(_u,$u)}var Ue$1=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],je$1=He(JSON.parse(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Ru="";return arguments[Pu].split(Ru).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Ru)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/pnyp{|qr;vr/j"))),Ge=function(_u){function $u(Tu,Cu,Pu){return _u.call(this,"[NETWORK]: request proxy error(type: ".concat(Cu,", reason: ").concat(Pu,"): ").concat(Tu))||this}return t$h.__extends($u,_u),$u}(Error),We$1=function(_u){function $u(Tu,Cu,Pu){var Ru=_u.call(this,"[NETWORK]: response error(type: ".concat(Cu,", status: ").concat(Pu,"): ").concat(Tu))||this;return Ru.httpStatus=Pu,Ru}return t$h.__extends($u,_u),$u}(Error);(function(_u){function $u(Tu,Cu){return _u.call(this,"[NETWORK]: request abort(type: ".concat(Cu,"): ").concat(Tu))||this}t$h.__extends($u,_u)})(Error);var Xe=function(_u){function $u(Tu,Cu,Pu){return _u.call(this,"[NETWORK]: request timeout(type: ".concat(Cu,", timeout: ").concat(Pu,"ms): ").concat(Tu))||this}return t$h.__extends($u,_u),$u}(Error),Ye=function(_u){function $u(Tu,Cu,Pu){return _u.call(this,"[NETWORK]: request forbidden(type: ".concat(Cu,", reason: ").concat(Pu,"): ").concat(Tu))||this}return t$h.__extends($u,_u),$u}(Error);function Ze(_u){for(var $u=0,Tu=Ue$1;$u<Tu.length;$u++){var Cu=Tu[$u],Pu=_u.match(Cu);if(Pu)return"jsonp_"+Pu[1]}return null}function Je(_u){return Ze(_u)!==null}function $e(_u){return Ue$1.reduce(function($u,Tu){return $u.replace(Tu,"")},_u)}function et$2(_u){if(/^blob\:/i.test(_u))return"blob:";if(/^data\:/i.test(_u))return"data:";var $u=_u.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/i);return $u?$u[2]:location.hostname}var tt$4=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$h.__extends($u,_u),$u}(Fe);function it$4(_u,$u,Tu,Cu,Pu){$u===void 0&&($u={}),Tu===void 0&&(Tu=Qe$1),Cu===void 0&&(Cu=Qe$1),Pu===void 0&&(Pu=Qe$1);var Ru=_e$3(),Lu=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Bu){return/^https\:/.test(location.href)&&/^http\:/.test(Bu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Bu,"'. This request was automatically upgraded to HTTPS")),Bu.replace(/^http\:/,"https:")):Bu}).catch(function(Bu){var Vu,Ou=Ze(_u)?"Script":"XMLHttpRequest",Du=new Ge(Lu,Ou,Bu&&Bu.message?String(Bu.message):String(Bu));return(Vu=$u.networkSubscribe)===null||Vu===void 0||Vu.emit("network",_u,Ou,"proxy-error",Du.message),Promise.reject(Du)}).then(function(Bu){return new Promise(function(Vu,Ou){var Du,ku=$u.allowHosts?je$1.concat($u.allowHosts):je$1.slice(),Fu=et$2(Bu),Nu=Ze(Bu);if(location.hostname.length!==0&&!ze(location.hostname)&&je$1.filter(function(Xu){return Ke(Xu,location.hostname)}).length===0&&!ze(Fu)&&ku.filter(function(Xu){return Ke(Xu,Fu)}).length===0){var Gu=Nu?"Script":"XMLHttpRequest",zu=new Ye(Bu,Gu,"request host(".concat(Fu,") is not allowed"));return Cu(zu),Ou(zu),void((Du=$u.networkSubscribe)===null||Du===void 0||Du.emit("network",Bu,Gu,"forbidden",zu.message))}if(Nu){var Hu=window,Uu=null,ju=!1,Wu=document.createElement("script");Hu[Nu]=function(Xu){var Zu,_c,Xc=_e$3(),_h=Xc-Ru;if(delete Hu[Nu],Wu.parentNode&&Wu.parentNode.removeChild(Wu),Uu!==null&&(window.clearTimeout(Uu),Uu=null),ju!==!0){if(Xu.indexOf("data:")!==0){var ip=new We$1(Bu,"Script",500);return Cu(ip),Ou(ip),void((Zu=$u.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Bu,"Script","error",ip.message))}var ap=Xu.split(","),hp=(ap[0].match(/:(.*?);/)||[])[1],Ap=ap[1];if($u.responseType==="arraybuffer"||$u.responseType==="blob"){for(var gp=atob(ap[1]),Rp=gp.length,Sp=new Uint8Array(Rp),Dp=0;Dp<Rp;Dp++)Sp[Dp]=gp.charCodeAt(Dp);Ap=$u.responseType==="arraybuffer"?Sp.buffer:new Blob([Sp],{type:hp})}var Ep={body:Ap,meta:{origin:Lu,source:Bu,requestTime:Ru,responseTime:Xc,costs:_h,headers:{}}};Tu(Ep),Vu(Ep),(_c=$u.networkSubscribe)===null||_c===void 0||_c.emit("network",Bu,"Script","ok",JSON.stringify(Ep.meta)),ju=!0}},Wu.src=Bu,document.body.appendChild(Wu),typeof $u.timeout=="number"&&(Uu=window.setTimeout(function(){var Xu;if(Uu=null,ju!==!0){ju=!0;var Zu=new Xe(Bu,"Script",$u.timeout||NaN);Cu(Zu),Ou(Zu),(Xu=$u.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Bu,"Script","timeout",Zu.message)}},$u.timeout))}else{var Qu=!1,qu=new XMLHttpRequest,Yu=function(){qu&&(qu.removeEventListener("timeout",Ju,!1),qu.removeEventListener("progress",_d,!1),qu.removeEventListener("load",tp,!1),qu.removeEventListener("error",Ku,!1)),qu=null,Yu=Qe$1},Ju=function(){var Xu;if(Qu!==!0){Qu=!0,Yu();var Zu=new Xe(Bu,"XMLHttpRequest",$u.timeout||NaN);Cu(Zu),Ou(Zu),(Xu=$u.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Bu,"XMLHttpRequest","timeout",Zu.message)}},_d=function(Xu){Qu!==!0&&Xu.lengthComputable&&(Xu.total<=0||Pu(Xu.loaded/Xu.total))},tp=function(Xu){var Zu;if(Qu!==!0){var _c=this.status;if(_c===0||_c>=200&&_c<400){Qu=!0,Yu();var Xc=_e$3(),_h=Xc-Ru,ip=function(Ap){if(!Ap)return{};for(var gp={},Rp=Ap.trim().split(`
`),Sp=0;Sp<Rp.length;Sp++){var Dp=Rp[Sp],Ep=Dp.indexOf(":"),Bp=Dp.slice(0,Ep).trim().toLowerCase(),Ip=Dp.slice(Ep+1).trim();Ip&&(gp[Bp]?gp[Bp]+=", "+Ip:gp[Bp]=Ip)}return gp}(this.getAllResponseHeaders()),ap=Xu.total,hp={body:this.response,meta:{origin:Lu,source:Bu,requestTime:Ru,responseTime:Xc,costs:_h,headers:ip,size:ap}};Tu(hp),Vu(hp),(Zu=$u.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Bu,"XMLHttpRequest","ok",JSON.stringify(hp.meta))}else Ku.call(this)}},Ku=function(){var Xu;if(Qu!==!0){Qu=!0,Yu();var Zu=new We$1(Bu,"XMLHttpRequest",this.status);Cu(Zu),Ou(Zu),(Xu=$u.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Bu,"XMLHttpRequest","error",Zu.message)}};qu.addEventListener("timeout",Ju,!1),qu.addEventListener("progress",_d,!1),qu.addEventListener("load",tp,!1),qu.addEventListener("error",Ku,!1),$u.responseType&&(qu.responseType=$u.responseType),typeof $u.timeout=="number"&&(qu.timeout=$u.timeout),qu.open("GET",Bu,!0),qu.send(null)}})})}var nt$4={};function rt$5(_u,$u,Tu,Cu,Pu,Ru){$u===void 0&&($u={}),Tu===void 0&&(Tu=Qe$1),Cu===void 0&&(Cu=Qe$1),Pu===void 0&&(Pu=Qe$1);var Lu=_e$3(),Bu=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Vu){return/^https\:/.test(location.href)&&/^http\:/.test(Vu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Vu,"'. This request was automatically upgraded to HTTPS")),Vu.replace(/^http\:/,"https:")):Vu}).catch(function(Vu){var Ou,Du=new Ge(Bu,"Image",Vu&&Vu.message?String(Vu.message):String(Vu));return(Ou=$u.networkSubscribe)===null||Ou===void 0||Ou.emit("network",_u,"Image","proxy-error",Du.message),Promise.reject(Du)}).then(function(Vu){return new Promise(function(Ou,Du){var ku,Fu=$u.allowHosts?je$1.concat($u.allowHosts):je$1.slice(),Nu=et$2(Vu);if(location.hostname.length!==0&&!ze(location.hostname)&&je$1.filter(function(ju){return Ke(ju,location.hostname)}).length===0&&!ze(Nu)&&Fu.filter(function(ju){return Ke(ju,Nu)}).length===0){var Gu=new Ye(Vu,"Image","request host(".concat(Nu,") is not allowed"));return Cu(Gu),Du(Gu),void((ku=$u.networkSubscribe)===null||ku===void 0||ku.emit("network",Vu,"Image","forbidden",Gu.message))}var zu=Ru!=null?Ru:new Image,Hu=!1,Uu=null;typeof $u.timeout=="number"&&(Uu=window.setTimeout(function(){var ju;if(zu.onload=Qe$1,zu.onerror=Qe$1,Uu=null,Hu!==!0){Hu=!0;var Wu=new Xe(Vu,"Image",$u.timeout);Cu(Wu),Du(Wu),(ju=$u.networkSubscribe)===null||ju===void 0||ju.emit("network",Vu,"Image","timeout",Wu.message)}},$u.timeout)),zu.onload=function(){var ju;if(zu.onload=Qe$1,zu.onerror=Qe$1,Uu!==null&&(clearTimeout(Uu),Uu=null),Hu!==!0){var Wu=_e$3();Hu=!0;var Qu={body:zu,meta:{headers:{},origin:Bu,source:Vu,requestTime:Lu,responseTime:Wu,costs:Wu-Lu}};Pu(1),Tu(Qu),Ou(Qu),(ju=$u.networkSubscribe)===null||ju===void 0||ju.emit("network",Vu,"Image","ok",JSON.stringify(Qu.meta))}},zu.onerror=function(){var ju;if(zu.onload=Qe$1,zu.onerror=Qe$1,Uu!==null&&(clearTimeout(Uu),Uu=null),Hu!==!0){Hu=!0;var Wu=new We$1(Vu,"Image",0);Cu(Wu),Du(Wu),(ju=$u.networkSubscribe)===null||ju===void 0||ju.emit("network",Vu,"Image","ok",Wu.message)}},Pu(0),zu.src=Vu})})}var ot$6=function(){if(typeof window!="undefined"){var _u=window;return _u.requestAnimationFrame||_u.mozRequestAnimationFrame||_u.webkitRequestAnimationFrame||_u.msRequestAnimationFrame||function($u){return setTimeout($u,16)}}return function($u){return setTimeout($u,16)}}(),st$3=16,at$4=function(){function _u(){this.frames=[],this.stoped=!1,this.time=_e$3(),this.context=null,this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(_u,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new _u),this.sharedInstance},enumerable:!1,configurable:!0}),_u.getFrameTime=function(){return st$3},_u.prototype.loop=function(){for(var $u=[],Tu=0;Tu<arguments.length;Tu++)$u[Tu]=arguments[Tu];if(!this.stoped){var Cu=_e$3(),Pu=Cu-this.time;this.time=Cu;var Ru=[];st$3=Pu;for(var Lu=0,Bu=this.frames;Lu<Bu.length;Lu++){var Vu=Bu[Lu];if(Vu.delay>0)Vu.delay=Vu.delay-1;else{try{Vu.callback.apply(Vu,t$h.__spreadArray([Cu,Pu],$u,!1))}catch(Ou){console.error(Ou)}Vu.once&&Ru.push(Vu)}}Ru.length>0&&(this.frames=this.frames.filter(function(Ou){return Ru.indexOf(Ou)===-1})),this.requestAnimationFrame(this.loop)}},_u.prototype.setContext=function($u){this.cancelAnimationFrame(this.requestId),this.context=$u,this.requestId=this.requestAnimationFrame(this.loop)},_u.prototype.getContext=function(){return this.context},_u.prototype.requestAnimationFrame=function($u){return this.context?this.context.requestAnimationFrame($u):ot$6($u)},_u.prototype.cancelAnimationFrame=function($u){this.context?this.context.cancelAnimationFrame($u):function(Tu){var Cu;if(typeof window!="undefined"){var Pu=window;Cu=Pu.cancelAnimationFrame||Pu.mozCancelAnimationFrame||Pu.webkitCancelAnimationFrame||Pu.msCancelAnimationFrame||function(Ru){return window.clearTimeout(Ru)}}else Cu=function(Ru){return window.clearTimeout(Ru)};Cu(Tu)}(this.loop),this.requestId=null},_u.prototype.remove=function($u){var Tu=this.frames.indexOf($u);Tu>=0&&this.frames.splice(Tu,1)},_u.prototype.add=function($u,Tu,Cu,Pu){var Ru=this;Tu===void 0&&(Tu=!1),Cu===void 0&&(Cu=0),Pu===void 0&&(Pu=5);var Lu={callback:$u,once:Tu,delay:Cu,order:Pu};return this.frames.push(Lu),this.frames.sort(function(Bu,Vu){return Bu.order-Vu.order}),function(){return Ru.remove(Lu)}},_u.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},_u}(),lt$4=/^https?\:\/\/?([^\/]+)/;function ut$3(_u,$u){return _u.replace(lt$4,function(Tu,Cu){return Tu.slice(0,Tu.length-Cu.length)+$u})}var ht$2={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]},"test-vr-public.realsee-cdn.cn":{pano:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],texture:["test-vr-image.realsee-cdn.cn"],tile:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],default:["test-vr-image.realsee-cdn.cn"]}};function ct$3(_u,$u){var Tu=t$h.__assign(t$h.__assign({},ht$2),$u.mappings),Cu=function(Ru){var Lu=Ru.match(lt$4);return Lu===null?null:Lu[1]}(_u);if(Cu===null)return _u;var Pu=Tu[Cu];return Pu?(/\.basis(\?|$)/.test(_u)&&$u.basisLoaderInitialized!==!0&&(_u=_u.replace(/\.basis(\?|$)/,".jpg$1")),function(Ru,Lu){var Bu,Vu=Ru.split("?")[0],Ou=Vu.split(".").pop();if(Ou==="jpeg"&&(Ou="jpg"),Ou!=="png"&&Ou!=="jpg")return Ru;var Du="";if(Lu.format!==void 0&&Lu.format!==Ou&&(Du+="/format/".concat(Lu.format)),Lu.cut!==void 0&&(Du+="/cut/".concat(Lu.cut[2],"x").concat(Lu.cut[3],"x").concat(Lu.cut[0],"x").concat(Lu.cut[1])),Lu.quality!==void 0){var ku=(Bu=Lu.format)!==null&&Bu!==void 0?Bu:Ou;ku&&["jpg","webp","tpg","heif","avif"].indexOf(ku)>=0&&(Du+="/quality/".concat(Lu.quality))}if(Lu.size!==void 0){var Fu=Ru.match(/\/cube_(\d+)\//);(Fu?Number(Fu[1]):NaN)!==Number(Lu.size)&&(Du+="/thumbnail/".concat(Lu.size,"x"))}return Lu.sharpen!==void 0&&(Du+="/sharpen/".concat(Lu.sharpen)),Du.length&&(Du="?imageMogr2"+Du),Vu+Du}(function(Ru,Lu,Bu){var Vu=Lu.split("."),Ou=Vu[0],Du=Vu.slice(1);if(Ou==="texture")return ut$3(Ru,Bu.texture[0]);if(Ou==="pano"||Ou==="pano_luminance")switch(Du[0],Du[1]){case"front":case"left":case"up":return ut$3(Ru,Bu.pano[0]);case"down":case"right":case"back":return ut$3(Ru,Bu.pano[1])}else if(Ou==="pano_tile"||Ou==="pano_tile_luminance"){Du[0],Du[1];var ku=Du[2],Fu=Du[3],Nu=Du[4],Gu=Math.pow(2,Number(ku))*Number(Fu)+Number(Nu);if(!isNaN(Gu))return ut$3(Ru,Bu.tile[Gu%2])}return ut$3(Ru,Bu.default[0])}(_u,$u.key,Pu),$u)):_u}function dt$2(_u){return new Promise(function($u){var Tu=new Image,Cu=setTimeout(function(){Tu.onload=Tu.onerror=function(){},clearTimeout(Cu),$u(!1)});Tu.onload=Tu.onerror=function(){Tu.onload=Tu.onerror=function(){},clearTimeout(Cu),$u(Tu.height===2)},Tu.src=_u})}var pt$3=null,ft$2=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.floorIndex=0,Tu.needsRender=!0,Tu}return t$h.__extends($u,_u),$u}(r$n.Mesh),At$1=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.needsRender=!0,Tu.enableTransparent=!0,Tu}return t$h.__extends($u,_u),$u.prototype.getTransparent=function(){return this.enableTransparent},$u.prototype.setTransparent=function(Tu){this.enableTransparent=Tu,this.traverse(function(Cu){Cu instanceof ft$2&&Cu.material.forEach(function(Pu){Pu.transparent=Tu})})},$u.prototype.getMaterial=function(){var Tu=null;return this.traverse(function(Cu){if(Tu===null&&Cu instanceof ft$2){var Pu=Cu.material[0];Tu={pano0:Pu.pano0,pano1:Pu.pano1,modelAlpha:Pu.modelAlpha,progress:Pu.progress,useBlackTransition:Pu.useBlackTransition,useXRBlackTransition:Pu.useXRBlackTransition,perspToOrtho:Pu.perspToOrtho,opacity:Pu.opacity,floorInfo:Pu.floorInfo}}}),Tu},$u.prototype.setMaterial=function(Tu){this.traverse(function(Cu){Cu instanceof ft$2&&Cu.material.forEach(function(Pu){Tu.pano0!==void 0&&(Pu.pano0=Tu.pano0),Tu.pano1!==void 0&&(Pu.pano1=Tu.pano1),Tu.modelAlpha!==void 0&&(Pu.modelAlpha=Tu.modelAlpha),Tu.progress!==void 0&&(Pu.progress=Tu.progress),Tu.useBlackTransition!==void 0&&(Pu.useBlackTransition=Tu.useBlackTransition),Tu.useXRBlackTransition!==void 0&&(Pu.useXRBlackTransition=Tu.useXRBlackTransition),Tu.perspToOrtho!==void 0&&(Pu.perspToOrtho=Tu.perspToOrtho),Tu.opacity!==void 0&&(Pu.opacity=Tu.opacity),Tu.floorInfo!==void 0&&(Pu.floorInfo=Tu.floorInfo)})})},$u.prototype.disposeMaterial=function(){this.traverse(function(Tu){if(Tu instanceof ft$2){var Cu=[];Tu.material.forEach(function(Pu){var Ru=Pu.uniforms;Object.keys(Ru).map(function(Lu){if(/^pano\d\_/.test(Lu))Ru[Lu].value=null;else{var Bu=Ru[Lu].value;Bu&&typeof Bu.dispose=="function"&&Cu.indexOf(Bu)===-1&&(Ru[Lu].value=null,Cu.push(Bu))}}),Pu.dispose()}),Cu.forEach(function(Pu){return Pu.dispose()})}})},$u.prototype.disposeGeometry=function(){this.traverse(function(Tu){Tu instanceof ft$2&&Tu.geometry.dispose()})},$u}(r$n.Group),gt$3=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.floorIndex=0,Tu}return t$h.__extends($u,_u),$u}(At$1),mt$2=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Ru="";return arguments[Pu].split(Ru).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Ru)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;===>9-no5q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{666H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),vt$2=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Ru="";return arguments[Pu].split(Ru).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Ru)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-e_lOYNPXlP\\Y\\_-rpA5=;=9=;=9=;=9>;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvs0vs-qrsv{rq5b`RlPYV]SY\\\\_6{vs|z-rp@-sy||V{s|H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--vs-5q|5cvr]|vv|{9-[|zny6-I-=;=6-\n----qvpnqH--\f--0vs-qrsv{rq5b`RlPYV]SY\\\\_6----vs-5|yq]|vv|{;\b-I-sy||V{s|;-\v\v-|yq]|vv|{;\b-K-sy||V{s|;t6-\n------qvpnqH----\f--0r{qvs--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryvs-qrsv{rq5b`Rle_lOYNPXla_N[`VaV\\[6}n{|P|y|-J-zv\x075}n{|=P|y|9e_lOYNPXlP\\Y\\_9zv{5>;=9-}|tr66H0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function yt$2(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var bt$2=yt$2();bt$2.width=bt$2.height=8;var xt$2=new r$n.Texture(bt$2);xt$2.name="EMPTY_TEXTURE";var wt$2=new r$n.CubeTexture([bt$2,bt$2,bt$2,bt$2,bt$2,bt$2]);wt$2.name="EMPTY_CUBE_TEXTURE",xt$2.dispose=wt$2.dispose=function(){};var Et$1=Object.assign({modelAlpha:new r$n.Uniform(0),progress:new r$n.Uniform(0),pano0_map:new r$n.Uniform(wt$2),pano0_luminanceMap:new r$n.Uniform(null),pano0_matrix:new r$n.Uniform(new r$n.Matrix4),pano1_map:new r$n.Uniform(wt$2),pano1_luminanceMap:new r$n.Uniform(null),pano1_matrix:new r$n.Uniform(new r$n.Matrix4),modelCenter:new r$n.Uniform(new r$n.Vector3),perspToOrtho:new r$n.Uniform(0),floorInfo:new r$n.Vector3(0,0,0)},{exposure:new r$n.Uniform(1),emissive:new r$n.Uniform(new r$n.Color(0)),emissiveMap:new r$n.Uniform(null),specular:new r$n.Uniform(new r$n.Color(1118481)),specularMap:new r$n.Uniform(null),normalMap:new r$n.Uniform(null),bumpMap:new r$n.Uniform(null),shininess:new r$n.Uniform(30)},r$n.UniformsUtils.clone(r$n.UniformsLib.common),r$n.UniformsUtils.clone(r$n.UniformsLib.lights)),Mt$1=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu=this;return Fu=_u.call(this,{vertexShader:mt$2,fragmentShader:vt$2,uniforms:r$n.UniformsUtils.clone(Et$1),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_XR_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1,USE_CLIPFLOOR:!1},blending:r$n.NoBlending,lights:!0})||this,Object.defineProperties(Fu,{pano0:{get:function(){return this.uniforms.pano0_map.value===wt$2?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Nu){Nu===null?(this.uniforms.pano0_map.value=wt$2,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Nu.map,this.uniforms.pano0_luminanceMap.value=Nu.luminanceMap,this.uniforms.pano0_matrix.value.copy(Nu.matrix));var Gu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Gu&&(this.defines.USE_LUMINANCE=Gu,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===wt$2?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Nu){Nu===null?(this.uniforms.pano1_map.value=wt$2,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Nu.map,this.uniforms.pano1_luminanceMap.value=Nu.luminanceMap,this.uniforms.pano1_matrix.value.copy(Nu.matrix));var Gu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Gu&&(this.defines.USE_LUMINANCE=Gu,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Nu){this.uniforms.modelAlpha.value=Nu}},progress:{get:function(){return this.uniforms.progress.value},set:function(Nu){this.uniforms.progress.value=Nu}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Nu){this.defines.USE_BLACK_TRANSITION!==Nu&&(this.defines.USE_BLACK_TRANSITION=Nu,this.needsUpdate=!0)}},useXRBlackTransition:{get:function(){return this.defines.USE_XR_BLACK_TRANSITION},set:function(Nu){this.defines.USE_XR_BLACK_TRANSITION!==Nu&&(this.defines.USE_XR_BLACK_TRANSITION=Nu,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Nu){this.uniforms.opacity.value=Nu;var Gu=Nu<1?r$n.NormalBlending:r$n.NoBlending;Gu!==this.blending&&(this.blending=Gu,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Nu){this.uniforms.perspToOrtho.value=Nu}},floorInfo:{get:function(){return this.uniforms.floorInfo.value},set:function(Nu){Nu&&Nu.equals(new r$n.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!1,this.needsUpdate=!0),Nu&&!Nu.equals(new r$n.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!0,this.uniforms.floorInfo.value=Nu,this.needsUpdate=!0)}}}),Fu.pano0=(Cu=Tu.pano0)!==null&&Cu!==void 0?Cu:null,Fu.pano1=(Pu=Tu.pano1)!==null&&Pu!==void 0?Pu:null,Fu.modelAlpha=(Ru=Tu.modelAlpha)!==null&&Ru!==void 0?Ru:1,Fu.progress=(Lu=Tu.progress)!==null&&Lu!==void 0?Lu:0,Fu.useBlackTransition=(Bu=Tu.useBlackTransition)!==null&&Bu!==void 0&&Bu,Fu.useXRBlackTransition=(Vu=Tu.useXRBlackTransition)!==null&&Vu!==void 0&&Vu,Fu.perspToOrtho=(Ou=Tu.perspToOrtho)!==null&&Ou!==void 0?Ou:0,Fu.opacity=(Du=Tu.opacity)!==null&&Du!==void 0?Du:1,Fu.originOpacity=1,Fu.floorInfo=(ku=Tu.floorInfo)!==null&&ku!==void 0?ku:null,Fu}return t$h.__extends($u,_u),$u}(r$n.ShaderMaterial),It$1=function(_u){function $u(Tu){var Cu=Tu.preserveDrawingBuffer,Pu=Cu===void 0||Cu,Ru=Tu.backgroundColor,Lu=Ru===void 0?1579548:Ru,Bu=Tu.backgroundAlpha,Vu=Bu===void 0?1:Bu,Ou=Tu.pixelRatio,Du=Ou===void 0?1:Ou,ku=Tu.antialias,Fu=ku!==void 0&&ku,Nu=Tu.webgl2,Gu=this;if(Nu!==void 0&&Nu){var zu=document.createElement("canvas"),Hu=zu.getContext("webgl2");if(Hu===null)throw new Error("error occurred when getting webgl2 canvas context");Gu=_u.call(this,{antialias:Fu,preserveDrawingBuffer:Pu,alpha:Vu<1,canvas:zu,context:Hu})||this}else Gu=_u.call(this,{antialias:Fu,preserveDrawingBuffer:Pu,alpha:Vu<1})||this;return Gu.setPixelRatio(Du),Gu.setClearColor(Lu,Vu),Gu.outputEncoding=r$n.sRGBEncoding,Gu.autoClear=!0,Gu}return t$h.__extends($u,_u),$u}(r$n.WebGLRenderer),St$2=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$h.__extends($u,_u),$u.prototype.add=function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.prototype.add.apply(this,Tu)},$u.prototype.remove=function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.prototype.remove.apply(this,Tu)},$u}(r$n.Scene),Ct$2=2*Math.PI,Bt$1=Math.PI/2;function Tt$2(_u){return _u>0&&_u<=Ct$2?_u:(_u%Ct$2+Ct$2)%Ct$2}var Pt$1,Rt$1,kt$2,Dt$1,Lt$1=function(_u){function $u(Tu){var Cu=_u.call(this,Tu,1,.1,1e3)||this;return Cu.pose={longitude:0,latitude:0,fov:Tu,distance:0,offset:new r$n.Vector3},Cu.computePose(),Cu}return t$h.__extends($u,_u),$u.prototype.computePose=function(){var Tu=this.getWorldDirection(new r$n.Vector3);return this.pose.longitude=Tt$2(-Math.atan2(Tu.x,-Tu.z)),this.pose.latitude=-Math.asin(Tu.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},$u.prototype.setFromPose=function(Tu){var Cu,Pu,Ru,Lu,Bu,Vu=Tt$2((Cu=Tu.longitude)!==null&&Cu!==void 0?Cu:this.pose.longitude),Ou=Math.max(1e-4-Bt$1,Math.min(Bt$1-1e-4,(Pu=Tu.latitude)!==null&&Pu!==void 0?Pu:this.pose.latitude)),Du=(Ru=Tu.fov)!==null&&Ru!==void 0?Ru:this.pose.fov,ku=(Lu=Tu.distance)!==null&&Lu!==void 0?Lu:this.pose.distance,Fu=(Bu=Tu.offset)!==null&&Bu!==void 0?Bu:this.pose.offset,Nu=function(Gu){var zu=Math.abs(Math.cos(Gu.latitude));return new r$n.Vector3(-Math.sin(Gu.longitude)*zu,-Math.sin(Gu.latitude),-Math.cos(Gu.longitude)*zu)}({longitude:Vu,latitude:Ou}).normalize();return this.position.set(0,0,0),this.lookAt(Nu),this.position.add(Fu).sub(Nu.clone().setLength(ku)),this.fov!==Du&&(this.fov=Du,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Vu,this.pose.latitude=Ou,this.pose.fov=Du,this.pose.distance=ku,this.pose.offset.copy(Fu),this},$u.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},$u}(r$n.PerspectiveCamera),Ot$2=function(){function _u($u,Tu,Cu){this.x=$u,this.y=Tu,this.z=Cu}return _u.prototype.copy=function($u){return this.x=$u.x,this.y=$u.y,this.z=$u.z,this},_u.prototype.set=function($u,Tu,Cu){return this.x=$u,this.y=Tu,this.z=Cu,this},_u.prototype.fromArray=function($u,Tu){return Tu===void 0&&(Tu=0),this.x=$u[Tu],this.y=$u[Tu+1],this.z=$u[Tu+2],this},_u.prototype.add=function($u){return this.x+=$u.x,this.y+=$u.y,this.z+=$u.z,this},_u.prototype.multiplyScalar=function($u){return this.x*=$u,this.y*=$u,this.z*=$u,this},_u.prototype.subVectors=function($u,Tu){return this.x=$u.x-Tu.x,this.y=$u.y-Tu.y,this.z=$u.z-Tu.z,this},_u.prototype.dot=function($u){return this.x*$u.x+this.y*$u.y+this.z*$u.z},_u.prototype.cross=function($u){var Tu=this.x,Cu=this.y,Pu=this.z;return this.x=Cu*$u.z-Pu*$u.y,this.y=Pu*$u.x-Tu*$u.z,this.z=Tu*$u.y-Cu*$u.x,this},_u.prototype.crossVectors=function($u,Tu){var Cu=$u.x,Pu=$u.y,Ru=$u.z,Lu=Tu.x,Bu=Tu.y,Vu=Tu.z;return this.x=Pu*Vu-Ru*Bu,this.y=Ru*Lu-Cu*Vu,this.z=Cu*Bu-Pu*Lu,this},_u.prototype.clone=function(){return new _u(this.x,this.y,this.z)},_u}(),Nt$1=function(_u,$u,Tu){this.extents=_u,this.startIndex=$u,this.endIndex=Tu},Ft$1=function(_u,$u){this.triangle=_u,this.intersectionPoint=$u},Qt$1=(Pt$1=new Ot$2(0,0,0),Rt$1=new Ot$2(0,0,0),kt$2=new Ot$2(0,0,0),Dt$1=new Ot$2(0,0,0),function(_u,$u,Tu,Cu,Pu,Ru){Rt$1.subVectors($u,_u),kt$2.subVectors(Tu,_u),Dt$1.crossVectors(Rt$1,kt$2);var Lu,Bu=Pu.dot(Dt$1);if(Bu>0){if(Ru)return null;Lu=1}else{if(!(Bu<0))return null;Lu=-1,Bu=-Bu}Pt$1.subVectors(Cu,_u);var Vu=Lu*Pu.dot(kt$2.crossVectors(Pt$1,kt$2));if(Vu<0)return null;var Ou=Lu*Pu.dot(Rt$1.cross(Pt$1));if(Ou<0||Vu+Ou>Bu)return null;var Du=-Lu*Pt$1.dot(Dt$1);if(Du<0)return null;var ku=Du/Bu;return new Ot$2(0,0,0).copy(Pu).multiplyScalar(ku).add(Cu)}),Vt$1=function(_u,$u){this.min=_u,this.max=$u};function _t$2(_u,$u,Tu){var Cu=new Vt$1(0,0);$u.x>=0?(Cu.min=(Tu.extents[0]-_u.x)*$u.x,Cu.max=(Tu.extents[3]-_u.x)*$u.x):(Cu.min=(Tu.extents[3]-_u.x)*$u.x,Cu.max=(Tu.extents[0]-_u.x)*$u.x);var Pu=new Vt$1(0,0);if($u.y>=0?(Pu.min=(Tu.extents[1]-_u.y)*$u.y,Pu.max=(Tu.extents[4]-_u.y)*$u.y):(Pu.min=(Tu.extents[4]-_u.y)*$u.y,Pu.max=(Tu.extents[1]-_u.y)*$u.y),Cu.min>Pu.max||Pu.min>Cu.max)return!1;Pu.min>Cu.min&&(Cu.min=Pu.min),Pu.max<Cu.max&&(Cu.max=Pu.max);var Ru=new Vt$1(0,0);return $u.z>=0?(Ru.min=(Tu.extents[2]-_u.z)*$u.z,Ru.max=(Tu.extents[5]-_u.z)*$u.z):(Ru.min=(Tu.extents[5]-_u.z)*$u.z,Ru.max=(Tu.extents[2]-_u.z)*$u.z),!(Cu.min>Ru.max||Ru.min>Cu.max)&&(Ru.min>Cu.min&&(Cu.min=Ru.min),Ru.max<Cu.max&&(Cu.max=Ru.max),!(Cu.max<0))}function Ht$1(_u,$u,Tu,Cu,Pu){if(Tu>=Cu)return[0,0,0,0,0,0];for(var Ru=1/0,Lu=1/0,Bu=1/0,Vu=-1/0,Ou=-1/0,Du=-1/0,ku=Tu,Fu=void 0,Nu=void 0;ku<Cu;ku++)(Nu=$u[Fu=6*_u[ku]])<Ru&&(Ru=Nu),(Nu=$u[Fu+1])<Lu&&(Lu=Nu),(Nu=$u[Fu+2])<Bu&&(Bu=Nu),(Nu=$u[Fu+3])>Vu&&(Vu=Nu),(Nu=$u[Fu+4])>Ou&&(Ou=Nu),(Nu=$u[Fu+5])>Du&&(Du=Nu);return[Ru-Pu,Lu-Pu,Bu-Pu,Vu+Pu,Ou+Pu,Du+Pu]}var qt$1=function(){function _u(){}return _u.prototype.create=function($u){return this.trianglesArray=$u,this},_u.prototype.splitNode=function($u){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var Tu=this.trianglesArray,Cu=Tu.length/9,Pu=new Uint32Array(Cu),Ru=new Float32Array(6*Cu),Lu=[],Bu=1/0,Vu=1/0,Ou=1/0,Du=-1/0,ku=-1/0,Fu=-1/0,Nu=0,Gu=0,zu=0,Hu=void 0,Uu=void 0,ju=void 0,Wu=void 0,Qu=void 0,qu=void 0,Yu=void 0;Nu<Cu;Nu++,Gu+=6,zu+=9)Pu[Nu]=Nu,Hu=Wu=Tu[zu],(Yu=Tu[zu+3])<Hu&&(Hu=Yu),Yu>Wu&&(Wu=Yu),(Yu=Tu[zu+6])<Hu&&(Hu=Yu),Yu>Wu&&(Wu=Yu),Uu=Qu=Tu[zu+1],(Yu=Tu[zu+4])<Uu&&(Uu=Yu),Yu>Qu&&(Qu=Yu),(Yu=Tu[zu+7])<Uu&&(Uu=Yu),Yu>Qu&&(Qu=Yu),ju=qu=Tu[zu+2],(Yu=Tu[zu+5])<ju&&(ju=Yu),Yu>qu&&(qu=Yu),(Yu=Tu[zu+8])<ju&&(ju=Yu),Yu>qu&&(qu=Yu),Hu<Bu&&(Bu=Hu),Wu>Du&&(Du=Wu),Uu<Vu&&(Vu=Uu),Qu>ku&&(ku=Qu),ju<Ou&&(Ou=ju),qu>Fu&&(Fu=qu),Ru[Gu]=Hu,Ru[Gu+1]=Uu,Ru[Gu+2]=ju,Ru[Gu+3]=Wu,Ru[Gu+4]=Qu,Ru[Gu+5]=qu;var Ju,_d=new Nt$1([Bu,Vu,Ou,Du,ku,Fu],0,Cu);function tp(Ku){for(var Xu=Ku.startIndex,Zu=Ku.endIndex,_c=Ku.extents,Xc=[_c[3]-_c[0],_c[4]-_c[1],_c[5]-_c[2]],_h=[0,1,2].sort(function(Bp,Ip){return Xc[Ip]-Xc[Bp]}),ip=0;ip<3;ip++){for(var ap=_h[ip],hp=_c[ap]+_c[ap+3],Ap=Xu,gp=Zu-1,Rp=-1,Sp=void 0;Ap<=gp;)Rp===-1?(Sp=Pu[Ap],Ru[6*Sp+ap]+Ru[6*Sp+ap+3]<hp?Ap++:Rp=Sp):(Sp=Pu[gp],Ru[6*Sp+ap]+Ru[6*Sp+ap+3]>=hp||(Pu[Ap]=Sp,Pu[gp]=Rp,Rp=-1,Ap++),gp--);if(Ap>Xu&&Ap<Zu){var Dp=new Nt$1(Ht$1(Pu,Ru,Xu,Ap,1e-6),Xu,Ap);Dp.endIndex-Dp.startIndex>$u&&Lu.push(Dp);var Ep=new Nt$1(Ht$1(Pu,Ru,Ap,Zu,1e-6),Ap,Zu);Ep.endIndex-Ep.startIndex>$u&&Lu.push(Ep),Ku.node0=Dp,Ku.node1=Ep,Ku.startIndex=0,Ku.endIndex=0;break}}}for(Lu.push(_d);Ju=Lu.pop();)tp(Ju);return this.offsetArray=Pu,this.rootNode=_d,this},_u.prototype.intersectRay=function($u,Tu,Cu){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Pu,Ru=this.trianglesArray,Lu=this.offsetArray,Bu=this.rootNode,Vu=[],Ou=[],Du=new Ot$2(1/Tu.x,1/Tu.y,1/Tu.z),ku=[Bu];Pu=ku.pop();)if(_t$2($u,Du,Pu)){Pu.node0&&ku.push(Pu.node0),Pu.node1&&ku.push(Pu.node1);for(var Fu=Pu.startIndex;Fu<Pu.endIndex;Fu++)Vu.push(Lu[Fu])}for(var Nu=new Ot$2(0,0,0),Gu=new Ot$2(0,0,0),zu=new Ot$2(0,0,0),Hu=new Ot$2($u.x,$u.y,$u.z),Uu=new Ot$2(Tu.x,Tu.y,Tu.z),ju=(Fu=0,void 0),Wu=Vu.length;Fu<Wu;Fu++){ju=9*Vu[Fu],Nu.x=Ru[ju],Nu.y=Ru[ju+1],Nu.z=Ru[ju+2],Gu.x=Ru[ju+3],Gu.y=Ru[ju+3+1],Gu.z=Ru[ju+3+2],zu.x=Ru[ju+6],zu.y=Ru[ju+6+1],zu.z=Ru[ju+6+2];var Qu=Qt$1(Nu,Gu,zu,Hu,Uu,Cu);Qu&&Ou.push(new Ft$1([Nu.clone(),Gu.clone(),zu.clone()],Qu))}return Ou},_u.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},_u}(),zt$1=!1,Kt$1=[];function Ut$1(_u){if(_u===void 0&&(_u=!1),_u||!zt$1){zt$1=!0;var $u=Kt$1.shift();if($u){try{$u()}catch{}at$4.shared.add(function(){return Ut$1(!0)},!0,2)}else zt$1=!1}}function jt$2(_u){return new Promise(function($u,Tu){Kt$1.push(function(){try{$u(_u())}catch(Cu){Tu(Cu)}}),Ut$1()})}function Gt$1(){var _u={OutWindow:function(){this._windowSize=0}};return _u.OutWindow.prototype.create=function($u){this._buffer&&this._windowSize===$u||(this._buffer=[]),this._windowSize=$u,this._pos=0,this._streamPos=0},_u.OutWindow.prototype.flush=function(){var $u=this._pos-this._streamPos;if($u!==0){for(;$u--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},_u.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},_u.OutWindow.prototype.setStream=function($u){this.releaseStream(),this._stream=$u},_u.OutWindow.prototype.init=function($u){$u||(this._streamPos=0,this._pos=0)},_u.OutWindow.prototype.copyBlock=function($u,Tu){var Cu=this._pos-$u-1;for(Cu<0&&(Cu+=this._windowSize);Tu--;)Cu>=this._windowSize&&(Cu=0),this._buffer[this._pos++]=this._buffer[Cu++],this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.putByte=function($u){this._buffer[this._pos++]=$u,this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.getByte=function($u){var Tu=this._pos-$u-1;return Tu<0&&(Tu+=this._windowSize),this._buffer[Tu]},_u.RangeDecoder=function(){},_u.RangeDecoder.prototype.setStream=function($u){this._stream=$u},_u.RangeDecoder.prototype.releaseStream=function(){this._stream=null},_u.RangeDecoder.prototype.init=function(){var $u=5;for(this._code=0,this._range=-1;$u--;)this._code=this._code<<8|this._stream.readByte()},_u.RangeDecoder.prototype.decodeDirectBits=function($u){for(var Tu,Cu=0,Pu=$u;Pu--;)this._range>>>=1,Tu=this._code-this._range>>>31,this._code-=this._range&Tu-1,Cu=Cu<<1|1-Tu,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Cu},_u.RangeDecoder.prototype.decodeBit=function($u,Tu){var Cu=$u[Tu],Pu=(this._range>>>11)*Cu;return(2147483648^this._code)<(2147483648^Pu)?(this._range=Pu,$u[Tu]+=2048-Cu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Pu,this._code-=Pu,$u[Tu]-=Cu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},_u.initBitModels=function($u,Tu){for(;Tu--;)$u[Tu]=1024},_u.BitTreeDecoder=function($u){this._models=[],this._numBitLevels=$u},_u.BitTreeDecoder.prototype.init=function(){_u.initBitModels(this._models,1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.decode=function($u){for(var Tu=1,Cu=this._numBitLevels;Cu--;)Tu=Tu<<1|$u.decodeBit(this._models,Tu);return Tu-(1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.reverseDecode=function($u){for(var Tu,Cu=1,Pu=0,Ru=0;Ru<this._numBitLevels;++Ru)Cu=Cu<<1|(Tu=$u.decodeBit(this._models,Cu)),Pu|=Tu<<Ru;return Pu},_u.reverseDecode2=function($u,Tu,Cu,Pu){for(var Ru,Lu=1,Bu=0,Vu=0;Vu<Pu;++Vu)Lu=Lu<<1|(Ru=Cu.decodeBit($u,Tu+Lu)),Bu|=Ru<<Vu;return Bu},_u.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new _u.BitTreeDecoder(8),this._numPosStates=0},_u.LenDecoder.prototype.create=function($u){for(;this._numPosStates<$u;++this._numPosStates)this._lowCoder[this._numPosStates]=new _u.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new _u.BitTreeDecoder(3)},_u.LenDecoder.prototype.init=function(){var $u=this._numPosStates;for(_u.initBitModels(this._choice,2);$u--;)this._lowCoder[$u].init(),this._midCoder[$u].init();this._highCoder.init()},_u.LenDecoder.prototype.decode=function($u,Tu){return $u.decodeBit(this._choice,0)===0?this._lowCoder[Tu].decode($u):$u.decodeBit(this._choice,1)===0?8+this._midCoder[Tu].decode($u):16+this._highCoder.decode($u)},_u.Decoder2=function(){this._decoders=[]},_u.Decoder2.prototype.init=function(){_u.initBitModels(this._decoders,768)},_u.Decoder2.prototype.decodeNormal=function($u){var Tu=1;do Tu=Tu<<1|$u.decodeBit(this._decoders,Tu);while(Tu<256);return 255&Tu},_u.Decoder2.prototype.decodeWithMatchByte=function($u,Tu){var Cu,Pu,Ru=1;do if(Cu=Tu>>7&1,Tu<<=1,Ru=Ru<<1|(Pu=$u.decodeBit(this._decoders,(1+Cu<<8)+Ru)),Cu!==Pu){for(;Ru<256;)Ru=Ru<<1|$u.decodeBit(this._decoders,Ru);break}while(Ru<256);return 255&Ru},_u.LiteralDecoder=function(){},_u.LiteralDecoder.prototype.create=function($u,Tu){var Cu;if(!this._coders||this._numPrevBits!==Tu||this._numPosBits!==$u)for(this._numPosBits=$u,this._posMask=(1<<$u)-1,this._numPrevBits=Tu,this._coders=[],Cu=1<<this._numPrevBits+this._numPosBits;Cu--;)this._coders[Cu]=new _u.Decoder2},_u.LiteralDecoder.prototype.init=function(){for(var $u=1<<this._numPrevBits+this._numPosBits;$u--;)this._coders[$u].init()},_u.LiteralDecoder.prototype.getDecoder=function($u,Tu){return this._coders[(($u&this._posMask)<<this._numPrevBits)+((255&Tu)>>>8-this._numPrevBits)]},_u.Decoder=function(){this._outWindow=new _u.OutWindow,this._rangeDecoder=new _u.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new _u.BitTreeDecoder(4),this._lenDecoder=new _u.LenDecoder,this._repLenDecoder=new _u.LenDecoder,this._literalDecoder=new _u.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new _u.BitTreeDecoder(6),this._posSlotDecoder[1]=new _u.BitTreeDecoder(6),this._posSlotDecoder[2]=new _u.BitTreeDecoder(6),this._posSlotDecoder[3]=new _u.BitTreeDecoder(6)},_u.Decoder.prototype.setDictionarySize=function($u){return!($u<0)&&(this._dictionarySize!==$u&&(this._dictionarySize=$u,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},_u.Decoder.prototype.setLcLpPb=function($u,Tu,Cu){var Pu=1<<Cu;return!($u>8||Tu>4||Cu>4)&&(this._literalDecoder.create(Tu,$u),this._lenDecoder.create(Pu),this._repLenDecoder.create(Pu),this._posStateMask=Pu-1,!0)},_u.Decoder.prototype.init=function(){var $u=4;for(this._outWindow.init(!1),_u.initBitModels(this._isMatchDecoders,192),_u.initBitModels(this._isRep0LongDecoders,192),_u.initBitModels(this._isRepDecoders,12),_u.initBitModels(this._isRepG0Decoders,12),_u.initBitModels(this._isRepG1Decoders,12),_u.initBitModels(this._isRepG2Decoders,12),_u.initBitModels(this._posDecoders,114),this._literalDecoder.init();$u--;)this._posSlotDecoder[$u].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},_u.Decoder.prototype.decode=function($u,Tu,Cu){var Pu,Ru,Lu,Bu,Vu,Ou,Du=0,ku=0,Fu=0,Nu=0,Gu=0,zu=0,Hu=0;for(this._rangeDecoder.setStream($u),this._outWindow.setStream(Tu),this.init();Cu<0||zu<Cu;)if(Pu=zu&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Du<<4)+Pu)===0)Ru=this._literalDecoder.getDecoder(zu++,Hu),Hu=Du>=7?Ru.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(ku)):Ru.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Hu),Du=Du<4?0:Du-(Du<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Du)===1)Lu=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Du)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Du<<4)+Pu)===0&&(Du=Du<7?9:11,Lu=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Du)===0?Bu=Fu:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Du)===0?Bu=Nu:(Bu=Gu,Gu=Nu),Nu=Fu),Fu=ku,ku=Bu),Lu===0&&(Lu=2+this._repLenDecoder.decode(this._rangeDecoder,Pu),Du=Du<7?8:11);else if(Gu=Nu,Nu=Fu,Fu=ku,Lu=2+this._lenDecoder.decode(this._rangeDecoder,Pu),Du=Du<7?7:10,(Vu=this._posSlotDecoder[Lu<=5?Lu-2:3].decode(this._rangeDecoder))>=4){if(ku=(2|1&Vu)<<(Ou=(Vu>>1)-1),Vu<14)ku+=_u.reverseDecode2(this._posDecoders,ku-Vu-1,this._rangeDecoder,Ou);else if(ku+=this._rangeDecoder.decodeDirectBits(Ou-4)<<4,(ku+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(ku===-1)break;return!1}}else ku=Vu;if(ku>=zu||ku>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(ku,Lu),zu+=Lu,Hu=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},_u.Decoder.prototype.setDecoderProperties=function($u){var Tu,Cu,Pu,Ru,Lu;return!($u.size<5)&&(Cu=(Tu=$u.readByte())%9,Pu=(Tu=~~(Tu/9))%5,Ru=~~(Tu/5),!!this.setLcLpPb(Cu,Pu,Ru)&&(Lu=$u.readByte(),Lu|=$u.readByte()<<8,Lu|=$u.readByte()<<16,Lu+=16777216*$u.readByte(),this.setDictionarySize(Lu)))},_u.decompress=function($u,Tu,Cu,Pu){var Ru=new _u.Decoder;if(!Ru.setDecoderProperties($u))throw"Incorrect stream properties";if(!Ru.decode(Tu,Cu,Pu))throw"Error in data stream";return!0},_u.decompressFile=function($u,Tu){var Cu,Pu=new _u.Decoder;if(!Pu.setDecoderProperties($u))throw"Incorrect stream properties";if(Cu=$u.readByte(),Cu|=$u.readByte()<<8,Cu|=$u.readByte()<<16,Cu+=16777216*$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),!Pu.decode($u,Tu,Cu))throw"Error in data stream";return!0},_u}var Wt$1=Gt$1(),Xt$1=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Gt$1.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Tu){try{var Cu={data:$u,offset:0,readByte:function(){return this.data[this.offset++]}},Pu=Cu.data.length,Ru={data:[],offset:0,writeByte:function(Vu){var Ou=Math.floor(this.offset/Pu);this.data[Ou]||(this.data[Ou]=new Uint8Array(Pu)),this.data[Ou][this.offset%Pu]=Vu,this.offset++}};_u.decompressFile(Cu,Ru);for(var Lu=new Uint8Array(Ru.offset),Bu=0;Bu<Ru.offset;Bu++)Lu[Bu]=Ru.data[Math.floor(Bu/Pu)][Bu%Pu];Tu(null,Lu)}catch(Vu){Tu(Vu)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(_u){for(var $u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tu=new Uint8Array(256),Cu=0;Cu<$u.length;Cu++)Tu[$u.charCodeAt(Cu)]=Cu;var Pu,Ru,Lu,Bu,Vu,Ou=.75*_u.length,Du=_u.length,ku=0;_u[_u.length-1]==="="&&(Ou--,_u[_u.length-2]==="="&&Ou--);var Fu=new ArrayBuffer(Ou),Nu=new Uint8Array(Fu);for(Pu=0;Pu<Du;Pu+=4)Ru=Tu[_u.charCodeAt(Pu)],Lu=Tu[_u.charCodeAt(Pu+1)],Bu=Tu[_u.charCodeAt(Pu+2)],Vu=Tu[_u.charCodeAt(Pu+3)],Nu[ku++]=Ru<<2|Lu>>4,Nu[ku++]=(15&Lu)<<4|Bu>>2,Nu[ku++]=(3&Bu)<<6|63&Vu;return Fu}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Tu){try{var Cu=new WebAssembly.Memory({initial:16}),Pu=new WebAssembly.Module(_u),Ru=new WebAssembly.Instance(Pu,{env:{memory:Cu,abort:function(){Tu(new Error("webAssembly abort"))}}}).exports,Lu=Ru.newU8Array($u.length);new Uint8Array(Cu.buffer,Lu+24,$u.length).set($u);var Bu=Ru.decode(Lu),Vu=new Uint32Array(Cu.buffer,Bu,4),Ou=Vu[0],Du=Vu[2],ku=Vu[3];Ou?Tu(null,new Uint8Array(Cu.buffer,ku+24,Du).slice(0,Du)):Tu(new Error("lzma deocder error"))}catch(Fu){Tu(Fu)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Yt$1=typeof Worker!="undefined"&&typeof Blob!="undefined",Zt$1="";if(Yt$1)try{var Jt$1=new Blob([Xt$1],{type:"text/javascript"});Zt$1=URL.createObjectURL(Jt$1)}catch(_u){}var $t$1=function(){function _u(){var $u=this;if(!Yt$1)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var Tu=this.worker=new Worker(Zt$1);Tu.onmessage=function(Cu){var Pu=Cu.data,Ru=Pu.id,Lu=Pu.result,Bu=Pu.error,Vu=$u.getKey(Ru);$u.requests[Vu]&&(Bu?$u.requests[Vu](new Error(Bu)):$u.requests[Vu](null,Lu),delete $u.requests[Vu])},Tu.onerror=function(Cu){return console.error(Cu)}}return _u.prototype.getKey=function($u){return"key_"+String($u)},_u.prototype.decompress=function($u,Tu){var Cu=++this.callCounter;this.requests[this.getKey(Cu)]=Tu,this.worker.postMessage({type:"decompress",id:Cu,data:$u},[$u.buffer])},_u.prototype.terminate=function(){this.worker.terminate()},_u.support=Yt$1,_u}();function ei(_u){return Array.prototype.reduce.call(_u,function($u,Tu,Cu){return $u|Tu<<8*Cu},0)}function ti$1(_u){var $u=new Uint8Array(_u),Tu=ei($u.slice(0,4));if(Tu>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Cu=[],Pu=[],Ru=4+4*Tu,Lu=0;Lu<Tu;Lu++)Pu[Lu]=ei($u.slice(4+4*Lu,8+4*Lu)),Cu[Lu]=Lu===Tu-1?$u.subarray(Ru,Ru+Pu[Lu]):$u.slice(Ru,Ru+Pu[Lu]),Ru+=Pu[Lu];return $t$1.support?function(Bu){for(var Vu=[],Ou=Bu.length,Du=function(Fu){Vu.push(new Promise(function(Nu,Gu){var zu=new $t$1;zu.decompress(Bu[Fu],function(Hu,Uu){if(zu.terminate(),Hu)return Gu(Hu);Nu(Uu)})}))},ku=0;ku<Ou;ku++)Du(ku);return Promise.all(Vu)}(Cu):Promise.resolve(function(Bu){for(var Vu,Ou=[],Du=Bu.length,ku=function(Nu){var Gu={data:Bu[Nu],offset:0,readByte:function(){return this.data[this.offset++]}},zu=Gu.data.length,Hu={data:[],offset:0,writeByte:function(ju){var Wu=Math.floor(this.offset/zu);this.data[Wu]||(this.data[Wu]=new Uint8Array(zu)),this.data[Wu][this.offset%zu]=ju,this.offset++}};Wt$1.decompressFile(Gu,Hu),Vu=new Uint8Array(Hu.offset);for(var Uu=0;Uu<Hu.offset;Uu++)Vu[Uu]=Hu.data[Math.floor(Uu/zu)][Uu%zu];Ou.push(Vu)},Fu=0;Fu<Du;Fu++)ku(Fu);return Ou}(Cu))}function ii(_u,$u){for(var Tu={},Cu=0,Pu=$u;Cu<Pu.length;Cu++){var Ru=Pu[Cu];Ru in _u&&(Tu[Ru]=_u[Ru])}return Tu}var ni=!1;try{ni=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(_u){}var ri=[];function oi(){var _u=this.src;this.onerror=this.onload=Qe$1,this.removeAttribute("src"),/^blob\:/.test(_u)&&URL.revokeObjectURL(_u),this.close=Qe$1}function si(){ri.push(this)}function ai(){return Object.assign(new Image,{crossOrigin:"",close:oi})}function li(_u){return new Promise(function($u,Tu){var Cu=ai();Cu.onload=function(){Cu.onload=Cu.onerror=Qe$1,setTimeout(function(){return $u(Cu)},30)},Cu.onerror=function(){var Pu=Cu.src;Cu.onload=Cu.onerror=Qe$1,Cu.close(),Tu(new Error("image load error: ".concat(Pu)))},Cu.src=URL.createObjectURL(_u)})}function ui(_u,$u){if($u&&(_u.width>$u.width||_u.height>$u.height)){var Tu=function(Vu,Ou){var Du=ri.shift();if(Du)return Du.width=Vu,Du.height=Ou,Du;if(ni){var ku=new OffscreenCanvas(Vu,Ou);return Object.assign(ku,{close:si})}return ku=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(ku,{close:si})}(Math.min(_u.width,$u.width),Math.min(_u.height,$u.height)),Cu=Tu.getContext("2d");Cu.clearRect(0,0,Tu.width,Tu.height),Cu.drawImage(_u,0,0,Tu.width,Tu.height),_u.close();var Pu=new r$n.Texture(Tu);Pu.needsUpdate=!0,Pu.flipY=!0;var Ru=Pu.dispose;return Pu.dispose=function(){Tu.close(),Ru.call(Pu),delete Pu.dispose},Pu}var Lu=new r$n.Texture(_u);Lu.needsUpdate=!0,Lu.minFilter=r$n.LinearFilter,Lu.magFilter=r$n.LinearFilter,Lu.flipY=!0;var Bu=Lu.dispose;return Lu.dispose=function(){_u.close(),Bu.call(Lu),delete Lu.dispose},Lu}var hi=new r$n.WebGLRenderTarget(1,1),ci$1=new r$n.OrthographicCamera(-1,1,1,-1,0,1),di=new r$n.BufferGeometry;di.setAttribute("position",new r$n.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$n.Float32BufferAttribute([0,2,0,0,2,0],2));var pi=new r$n.Mesh(di),fi=new r$n.Scene;fi.add(pi);var Ai,gi=new r$n.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$n.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi$1(_u,$u,Tu){return $u.flipY!==void 0&&(_u.flipY=$u.flipY),$u.format!==void 0&&(_u.format=$u.format),$u.encoding!==void 0&&(_u.encoding=$u.encoding),$u.minFilter!==void 0&&(_u.minFilter=$u.minFilter),$u.magFilter!==void 0&&(_u.magFilter=$u.magFilter),Tu?new Promise(function(Cu){at$4.shared.add(function(){try{var Pu=Tu.getRenderTarget();Tu.setRenderTarget(hi),_u instanceof r$n.CubeTexture?(pi.material=mi,mi.uniforms.map.value=_u,Tu.render(fi,ci$1),mi.uniforms.map.value=null):(pi.material=gi,gi.uniforms.map.value=_u,Tu.render(fi,ci$1),mi.uniforms.map.value=null),Tu.setRenderTarget(Pu),Cu(_u)}catch{Cu(_u)}},!0,1)}):Promise.resolve(_u)}var yi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,bi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},wi=((Ai={})[bi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai[bi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai),Ei=function(){function _u(){}return _u.setTranscoderPath=function($u){return this.transcoderPath=$u,this},_u.setWorkerLimit=function($u){return this.workerLimit=$u,this},_u.isInitialized=function(){return this.workerPool.filter(function($u){return $u._initialized}).length!==0},_u.detectSupport=function($u){var Tu=this.workerConfig;if(Tu.astcSupported=!!$u.extensions.get("WEBGL_compressed_texture_astc"),Tu.bptcSupported=!!$u.extensions.get("EXT_texture_compression_bptc"),Tu.etcSupported=!!$u.extensions.get("WEBGL_compressed_texture_etc1"),Tu.dxtSupported=!!$u.extensions.get("WEBGL_compressed_texture_s3tc"),Tu.pvrtcSupported=!!$u.extensions.get("WEBGL_compressed_texture_pvrtc")||!!$u.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),Tu.astcSupported)Tu.format=_u.BASIS_FORMAT.cTFASTC_4x4;else if(Tu.bptcSupported)Tu.format=_u.BASIS_FORMAT.cTFBC7_M5;else if(Tu.dxtSupported)Tu.format=_u.BASIS_FORMAT.cTFBC3;else if(Tu.pvrtcSupported)Tu.format=_u.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!Tu.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");Tu.format=_u.BASIS_FORMAT.cTFETC1}return this},_u.createTexture=function($u){var Tu,Cu,Pu=this,Ru=$u.byteLength,Lu=this._allocateWorker(Ru).then(function(Bu){return Tu=Bu,Cu=Pu.workerNextTaskID++,new Promise(function(Vu,Ou){Tu._callbacks[Cu]={resolve:Vu,reject:Ou},Tu.postMessage({type:"transcode",id:Cu,buffer:$u},[$u])})}).then(function(Bu){var Vu,Ou=Pu.workerConfig,Du=Bu.width,ku=Bu.height,Fu=Bu.mipmaps;switch(Bu.format){case bi.cTFASTC_4x4:Vu=new r$n.CompressedTexture(Fu,Du,ku,r$n.RGBA_ASTC_4x4_Format);break;case bi.cTFBC1:case bi.cTFBC3:Vu=new r$n.CompressedTexture(Fu,Du,ku,wi[Ou.format],r$n.UnsignedByteType);break;case bi.cTFETC1:Vu=new r$n.CompressedTexture(Fu,Du,ku,r$n.RGB_ETC1_Format);break;case bi.cTFPVRTC1_4_RGB:Vu=new r$n.CompressedTexture(Fu,Du,ku,r$n.RGB_PVRTC_4BPPV1_Format);break;case bi.cTFPVRTC1_4_RGBA:Vu=new r$n.CompressedTexture(Fu,Du,ku,r$n.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Vu.minFilter=Fu.length===1?r$n.LinearFilter:r$n.LinearMipmapLinearFilter,Vu.magFilter=r$n.LinearFilter,Vu.generateMipmaps=!1,Vu.needsUpdate=!0,Vu});return Lu.catch(function(){return!0}).then(function(){Tu&&Cu&&(Tu._taskLoad-=Ru,delete Tu._callbacks[Cu])}),Lu},_u._initTranscoder=function(){var $u=this;if(!this.transcoderPending){var Tu=new r$n.FileLoader;Tu.setPath(this.transcoderPath);var Cu=new Promise(function(Lu,Bu){Tu.load("basis_transcoder.js",Lu,void 0,Bu)}),Pu=new r$n.FileLoader;Pu.setPath(this.transcoderPath),Pu.setResponseType("arraybuffer");var Ru=new Promise(function(Lu,Bu){Pu.load("basis_transcoder.wasm",Lu,void 0,Bu)});this.transcoderPending=Promise.all([Cu,Ru]).then(function(Lu){var Bu=Lu[0],Vu=Lu[1],Ou=["/* basis_transcoder.js */",Bu,"/* worker */",yi].join(`
`);$u.workerSourceURL=URL.createObjectURL(new Blob([Ou])),$u.transcoderBinary=Vu})}return this.transcoderPending},_u._allocateWorker=function($u){var Tu=this;return this._initTranscoder().then(function(){if(Tu.workerPool.length<Tu.workerLimit){var Cu=function(Ru){var Lu=new Worker(Ru);return Object.assign(Lu,{_callbacks:{},_initialized:!1,_taskLoad:0})}(Tu.workerSourceURL);Cu._callbacks={},Cu._initialized=!1,Cu._taskLoad=0,Cu.postMessage({type:"init",config:Tu.workerConfig,transcoderBinary:Tu.transcoderBinary}),Cu.onmessage=function(Ru){var Lu=Ru.data;switch(Lu.type){case"initialized":Cu._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Cu._callbacks[Lu.id].resolve(Lu);break;case"error":Cu._callbacks[Lu.id].reject(Lu);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Lu.type,'"'))}},Tu.workerPool.push(Cu)}else Tu.workerPool.sort(function(Ru,Lu){return Ru._taskLoad>Lu._taskLoad?-1:1});var Pu=Tu.workerPool[Tu.workerPool.length-1];return Pu._taskLoad+=$u,Pu})},_u.prototype.dispose=function(){for(var $u=0;$u<_u.workerPool.length;$u++)_u.workerPool[$u].terminate();return _u.workerPool.length=0,this},_u.BASIS_FORMAT=bi,_u.DXT_FORMAT=xi,_u.DXT_FORMAT_MAP=wi,_u.transcoderPath="https://vr-public.realsee-cdn.cn/release/static/image/release/five/basis/",_u.transcoderBinary=null,_u.transcoderPending=null,_u.workerLimit=1,_u.workerPool=[],_u.workerNextTaskID=1,_u.workerSourceURL="",_u.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},_u}();function Mi(_u){var $u=_u.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return $u?$u[1]:location.protocol}var Ii=function(){function _u($u){this.timeout=$u.timeout,this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u},_u.prototype.load=function($u,Tu,Cu,Pu,Ru,Lu){var Bu;Tu===void 0&&(Tu={}),Cu===void 0&&(Cu=Qe$1),Pu===void 0&&(Pu=Qe$1),Ru===void 0&&(Ru=Qe$1);var Vu=Mi($u),Ou={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Du=(Bu=Tu.viaAjax)!==null&&Bu!==void 0&&Bu,ku=Je($u),Fu=/^https?:$/.test(Vu),Nu=/\.basis$/.test($e($u).split("?")[0]);if(ku?Du=!0:Fu||(Du=!1),Du){if(Nu){var Gu=null,zu="arraybuffer";return Tu.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):it$4($u,t$h.__assign(t$h.__assign({},Ou),{responseType:zu}),void 0,void 0,Ru).then(function(Wu){return Gu=Wu.meta,Ei.createTexture(Wu.body)}).then(function(Wu){return Tu.preInit!==!1?vi$1(Wu,t$h.__assign({flipY:!1,encoding:r$n.sRGBEncoding},ii(Tu,["wrapS","wrapT"])),Lu):Wu}).then(function(Wu){var Qu={meta:Gu,body:Wu};return Cu(Qu),Qu}).catch(function(Wu){return Pu(Wu),Promise.reject(Wu)})}return zu="blob",it$4($u,t$h.__assign(t$h.__assign({},Ou),{responseType:zu}),void 0,void 0,Ru).then(function(Wu){return li(Wu.body)}).then(function(Wu){return ui(Wu,Tu.maxSize)}).then(function(Wu){return Tu.preInit!==!1?vi$1(Wu,t$h.__assign({flipY:!0,encoding:r$n.sRGBEncoding},Tu),Lu):Wu}).then(function(Wu){var Qu={meta:null,body:Wu};return Cu(Qu),Qu}).catch(function(Wu){return Pu(Wu),Promise.reject(Wu)})}if(Nu){var Hu=new Error("cannot load basis texture via image");return Pu(Hu),Promise.reject(Hu)}var Uu=null,ju=ai();return rt$5($u,Ou,void 0,void 0,Ru,ju).then(function(Wu){return Uu=Wu.meta,ui(Wu.body,Tu.maxSize)}).then(function(Wu){return Tu.preInit!==!1?vi$1(Wu,t$h.__assign({flipY:!0,encoding:r$n.sRGBEncoding},Tu),Lu):Wu}).then(function(Wu){var Qu={meta:Uu,body:Wu};return Cu(Qu),Qu}).catch(function(Wu){return ju.close(),Pu(Wu),Promise.reject(Wu)})},_u.prototype.loadCube=function($u,Tu,Cu,Pu,Ru,Lu){var Bu;Tu===void 0&&(Tu={}),Cu===void 0&&(Cu=Qe$1),Pu===void 0&&(Pu=Qe$1),Ru===void 0&&(Ru=Qe$1),performance.now(),Array.isArray($u)||($u=[$u.right,$u.left,$u.up,$u.down,$u.front,$u.back]);for(var Vu={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Ou=[],Du=[0,0,0,0,0,0],ku=[],Fu=function(zu){var Hu=$u[zu],Uu=Mi(Hu),ju=function(Xu){Du[zu]=Xu,Ru(Du.reduce(function(Zu,_c){return Zu+_c},0)/6)},Wu=(Bu=Tu.viaAjax)!==null&&Bu!==void 0&&Bu,Qu=/^https?:$/.test(Uu),qu=Je(Hu),Yu=/\.basis$/.test($e(Hu).split("?")[0]);if(qu?Wu=!0:Qu||(Wu=!1),Wu)if(Yu){var Ju="arraybuffer",_d=it$4(Hu,t$h.__assign(t$h.__assign({},Vu),{responseType:Ju}),void 0,void 0,ju).then(function(Xu){return ku[zu]=Xu.meta,Ei.createTexture(Xu.body)});Ou.push(_d)}else Ju="blob",_d=it$4(Hu,t$h.__assign(t$h.__assign({},Vu),{responseType:Ju}),void 0,void 0,ju).then(function(Xu){return ku[zu]=Xu.meta,li(Xu.body)}),Ou.push(_d);else{if(Yu){var tp=new Error("cannot load basis texture via image");return Pu(tp),{value:Promise.reject(tp)}}var Ku=ai();_d=rt$5(Hu,Vu,void 0,void 0,ju,Ku).then(function(Xu){return ku[zu]=Xu.meta,Xu.body}).catch(function(Xu){return Ku.close(),Promise.reject(Xu)}),Ou.push(_d)}},Nu=0;Nu<6;Nu++){var Gu=Fu(Nu);if(typeof Gu=="object")return Gu.value}return Promise.all(Ou).then(function(zu){return performance.now(),zu[0]instanceof r$n.CompressedTexture?function(Hu){var Uu=new r$n.CubeTexture(Hu);Uu.needsUpdate=!0;var ju=Uu.dispose;return Uu.dispose=function(){for(var Wu=0,Qu=Hu;Wu<Qu.length;Wu++)Qu[Wu].dispose();ju.call(Uu),delete Uu.dispose},Uu.isCompressedTexture=!0,Uu.format=Hu[0].format,Uu.minFilter=Hu[0].minFilter,Uu.magFilter=Hu[0].magFilter,Uu}(zu):function(Hu){var Uu=new r$n.CubeTexture(Hu);Uu.needsUpdate=!0,Uu.minFilter=r$n.LinearFilter,Uu.magFilter=r$n.LinearFilter,Uu.flipY=!1;var ju=Uu.dispose;return Uu.dispose=function(){for(var Wu=0,Qu=Hu;Wu<Qu.length;Wu++)Qu[Wu].close();ju.call(Uu),delete Uu.dispose},Uu}(zu)}).then(function(zu){return Tu.preInit!==!1?zu.isCompressedTexture?vi$1(zu,t$h.__assign({flipY:!1,encoding:r$n.sRGBEncoding},ii(Tu,["wrapS","wrapT"])),Lu):vi$1(zu,t$h.__assign({flipY:!1,encoding:r$n.sRGBEncoding},Tu),Lu):zu}).then(function(zu){var Hu={body:zu,meta:ku};return Cu(Hu),Hu}).catch(function(zu){for(var Hu=0,Uu=Ou;Hu<Uu.length;Hu++)Uu[Hu].then(function(ju){ju instanceof r$n.Texture?ju.dispose():ju.close()}).catch(Qe$1);return Pu(zu),Promise.reject(zu)})},_u}();const Si=o$i.Reader,Ci=o$i.util,Bi=o$i.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$i.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Bi.Model=(()=>{function _u($u){if(this.chunks=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.chunks=Ci.emptyArray,_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Model;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:Pu.chunks&&Pu.chunks.length||(Pu.chunks=[]),Pu.chunks.push(Bi.Chunk.decode($u,$u.uint32()));break;default:$u.skipType(7&Ru)}}return Pu},_u})();Bi.Chunk=(()=>{function _u($u){if($u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.vertices=null,_u.prototype.faces=null,_u.prototype.name="",_u.prototype.texture="",_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Chunk;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:Pu.vertices=Bi.Vertices.decode($u,$u.uint32());break;case 2:Pu.faces=Bi.Faces.decode($u,$u.uint32());break;case 3:Pu.name=$u.string();break;case 4:Pu.texture=$u.string();break;default:$u.skipType(7&Ru)}}if(!Pu.hasOwnProperty("vertices"))throw Ci.ProtocolError("missing required 'vertices'",{instance:Pu});if(!Pu.hasOwnProperty("faces"))throw Ci.ProtocolError("missing required 'faces'",{instance:Pu});if(!Pu.hasOwnProperty("name"))throw Ci.ProtocolError("missing required 'name'",{instance:Pu});return Pu},_u})(),Bi.Vertices=(()=>{function _u($u){if(this.xyz=[],this.uvs=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.xyz=Ci.emptyArray,_u.prototype.uvs=Ci.emptyArray,_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Vertices;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:if(Pu.xyz&&Pu.xyz.length||(Pu.xyz=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.xyz.push($u.float())}else Pu.xyz.push($u.float());break;case 2:if(Pu.uvs&&Pu.uvs.length||(Pu.uvs=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.uvs.push($u.float())}else Pu.uvs.push($u.float());break;default:$u.skipType(7&Ru)}}return Pu},_u})(),Bi.Faces=(()=>{function _u($u){if(this.indices=[],this.normals=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.indices=Ci.emptyArray,_u.prototype.normals=Ci.emptyArray,_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Faces;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:if(Pu.indices&&Pu.indices.length||(Pu.indices=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.indices.push($u.uint32())}else Pu.indices.push($u.uint32());break;case 2:if(Pu.normals&&Pu.normals.length||(Pu.normals=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.normals.push($u.float())}else Pu.normals.push($u.float());break;default:$u.skipType(7&Ru)}}return Pu},_u})();var Pi=new r$n.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1).elements;function Ri(_u){var $u=_u.match(/(group|floor)-?(\d+)/);return $u?parseInt($u[2],10):0}function ki(_u){var $u=_u.match(/(chunk)-?(\d+)/);return $u?parseInt($u[2],10):0}function Di(_u){return 1e6*Ri(_u.name)+1e3*ki(_u.name)+function($u){var Tu=$u.match(/(sub)-?(\d+)/);return Tu?parseInt(Tu[2],10):0}(_u.name)}function Li(_u,$u,Tu,Cu,Pu){var Ru=t$h.__assign({key:"texture.pbm",basisLoaderInitialized:Ei.isInitialized()},ii($u,["format","quality","size","sharpen","mappings"]));return _u=$u.transform?$u.transform(_u,Ru):ct$3(_u,Ru),new Ii({allowHosts:Tu,requestProxy:Cu,networkSubscribe:Pu}).load(_u,{wrapS:r$n.ClampToEdgeWrapping,wrapT:r$n.ClampToEdgeWrapping,minFilter:r$n.LinearFilter,maxSize:typeof Ru.size=="number"?new r$n.Vector2(Ru.size,Ru.size):void 0,preInit:!0}).then(function(Lu){var Bu=Lu.body;return Bu.needsUpdate=!0,Bu})}function Oi(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){Pu===void 0&&(Pu={});for(var Vu=function(Xc){for(var _h,ip,ap=[],hp=!0,Ap=0,gp=Xc.chunks;Ap<gp.length;Ap++)if(!(Ev=gp[Ap]).faces.normals||Ev.faces.normals.length===0){hp=!1;break}for(var Rp=[],Sp=0,Dp=Xc.chunks.sort(function(pv,Lv){return Di(pv)-Di(Lv)});Sp<Dp.length;Sp++){var Ep=Ri((Ev=Dp[Sp]).name);Rp[Ep]||(Rp[Ep]=[]),Rp[Ep].push(Ev)}for(var Bp=0;Bp<Rp.length;Bp++){var Ip=Rp[Bp];if(Ip)if(hp){for(var ep=0,_f=0;_f<Ip.length;_f++)ep+=(Ev=Ip[_f]).faces.indices.length;for(var op=3*ep,rp=2*ep,up=3*ep,cp=new ArrayBuffer(4*op+4*rp+4*up),fp=new Float32Array(cp,0,op),vp=new Float32Array(cp,4*op,rp),xp=new Float32Array(cp,4*op+4*rp,up),mp=[],sp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],lp=0,$p=0;$p<Ip.length;$p++){var Mp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],kp=(Ev=Ip[$p]).vertices.xyz,Vp=Ev.vertices.uvs,Gp=Ev.faces.indices,qp=Ev.faces.normals,Wp=Gp.length;for(_f=0;_f<Wp;_f++){var Yp=Gp[_f],Kp=kp[3*Yp],ev=kp[3*Yp+1],Xp=kp[3*Yp+2],Zp=1/(Pi[3]*Kp+Pi[7]*ev+Pi[11]*Xp+Pi[15]),Tp=(Pi[0]*Kp+Pi[4]*ev+Pi[8]*Xp+Pi[12])*Zp,Jp=(Pi[1]*Kp+Pi[5]*ev+Pi[9]*Xp+Pi[13])*Zp,nv=(Pi[2]*Kp+Pi[6]*ev+Pi[10]*Xp+Pi[14])*Zp;fp[3*lp+3*_f]=Tp,fp[3*lp+3*_f+1]=Jp,fp[3*lp+3*_f+2]=nv,vp[2*lp+2*_f]=Vp[2*Yp],vp[2*lp+2*_f+1]=Vp[2*Yp+1];var ov=3*Math.floor(_f/3),rv=qp[ov],hv=qp[ov+1],Av=qp[ov+2],xv=1/(Pi[3]*rv+Pi[7]*hv+Pi[11]*Av+Pi[15]),wv=(Pi[0]*rv+Pi[4]*hv+Pi[8]*Av+Pi[12])*xv,fv=(Pi[1]*rv+Pi[5]*hv+Pi[9]*Av+Pi[13])*xv,$v=(Pi[2]*rv+Pi[6]*hv+Pi[10]*Av+Pi[14])*xv;xp[3*lp+3*_f]=wv,xp[3*lp+3*_f+1]=fv,xp[3*lp+3*_f+2]=$v,Tp<Mp[0]&&(Mp[0]=Tp),Jp<Mp[1]&&(Mp[1]=Jp),nv<Mp[2]&&(Mp[2]=nv),Tp>Mp[3]&&(Mp[3]=Tp),Jp>Mp[4]&&(Mp[4]=Jp),nv>Mp[5]&&(Mp[5]=nv)}Mp[0]<sp[0]&&(sp[0]=Mp[0]),Mp[1]<sp[1]&&(sp[1]=Mp[1]),Mp[2]<sp[2]&&(sp[2]=Mp[2]),Mp[3]>sp[3]&&(sp[3]=Mp[3]),Mp[4]>sp[4]&&(sp[4]=Mp[4]),Mp[5]>sp[5]&&(sp[5]=Mp[5]),mp.push({materialIndex:$p,name:Ev.name,chunkName:ki(Ev.name),start:lp,count:Ev.faces.indices.length,texture:(_h=Ev.texture)!==null&&_h!==void 0?_h:void 0}),lp+=Wp}ap.push({floorIndex:Bp,vertices:fp,uvs:vp,indices:null,normals:xp,groups:mp,extents:sp})}else{ep=0;var Tv=0;for(_f=0;_f<Ip.length;_f++)Tv+=(Ev=Ip[_f]).vertices.xyz.length/3,ep+=Ev.faces.indices.length;op=3*Tv,rp=2*Tv,up=3*Tv;var yv=ep,Cv=(cp=new ArrayBuffer(4*op+4*rp+4*up+4*yv),fp=new Float32Array(cp,0,op),vp=new Float32Array(cp,4*op,rp),xp=new Float32Array(cp,4*op+4*rp,up),new Uint32Array(cp,4*op+4*rp+4*up,yv)),Dv=(mp=[],sp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],0);for(lp=0,$p=0;$p<Ip.length;$p++){Mp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],kp=(Ev=Ip[$p]).vertices.xyz,Vp=Ev.vertices.uvs,Gp=Ev.faces.indices;var Ev,wp=kp.length/3;for(Wp=Gp.length,_f=0;_f<wp;_f++)Kp=kp[3*_f],ev=kp[3*_f+1],Xp=kp[3*_f+2],Zp=1/(Pi[3]*Kp+Pi[7]*ev+Pi[11]*Xp+Pi[15]),Tp=(Pi[0]*Kp+Pi[4]*ev+Pi[8]*Xp+Pi[12])*Zp,Jp=(Pi[1]*Kp+Pi[5]*ev+Pi[9]*Xp+Pi[13])*Zp,nv=(Pi[2]*Kp+Pi[6]*ev+Pi[10]*Xp+Pi[14])*Zp,fp[3*lp+3*_f]=Tp,fp[3*lp+3*_f+1]=Jp,fp[3*lp+3*_f+2]=nv,vp[2*lp+2*_f]=Vp[2*_f],vp[2*lp+2*_f+1]=Vp[2*_f+1],Tp<Mp[0]&&(Mp[0]=Tp),Jp<Mp[1]&&(Mp[1]=Jp),nv<Mp[2]&&(Mp[2]=nv),Tp>Mp[3]&&(Mp[3]=Tp),Jp>Mp[4]&&(Mp[4]=Jp),nv>Mp[5]&&(Mp[5]=nv);for(Mp[0]<sp[0]&&(sp[0]=Mp[0]),Mp[1]<sp[1]&&(sp[1]=Mp[1]),Mp[2]<sp[2]&&(sp[2]=Mp[2]),Mp[3]>sp[3]&&(sp[3]=Mp[3]),Mp[4]>sp[4]&&(sp[4]=Mp[4]),Mp[5]>sp[5]&&(sp[5]=Mp[5]),_f=0;_f<Wp;_f++)Cv[Dv+_f]=lp+Gp[_f];mp.push({materialIndex:$p,name:Ev.name,chunkName:ki(Ev.name),start:Dv,count:Ev.faces.indices.length,texture:(ip=Ev.texture)!==null&&ip!==void 0?ip:void 0}),lp+=wp,Dv+=Wp}for(_f=0;_f<ep;_f+=3){var jp,Up,zp,iv,gv,vv,lv,dv,cv,Pv,dp,_p,Cp,Fp,Hp,uv;rv=void 0,hv=void 0,Av=void 0,jp=3*Cv[_f],Up=3*Cv[_f+1],zp=3*Cv[_f+2],iv=fp[jp],gv=fp[jp+1],vv=fp[jp+2],lv=fp[Up],dv=fp[Up+1],cv=fp[Up+2],Pv=fp[zp],rv=(_p=fp[zp+1]-dv)*(uv=vv-cv)-(Cp=fp[zp+2]-cv)*(Hp=gv-dv),hv=Cp*(Fp=iv-lv)-(dp=Pv-lv)*uv,Av=dp*Hp-_p*Fp,xp[jp]+=rv,xp[jp+1]+=hv,xp[jp+2]+=Av,xp[Up]+=rv,xp[Up+1]+=hv,xp[Up+2]+=Av,xp[zp]+=rv,xp[zp+1]+=hv,xp[zp+2]+=Av}ap.push({floorIndex:Bp,vertices:fp,uvs:vp,indices:Cv,normals:xp,groups:mp,extents:sp})}}return ap}(_u),Ou=[],Du=0,ku=Vu;Du<ku.length;Du++){var Fu=ku[Du],Nu=Fu.floorIndex,Gu=Fu.vertices,zu=Fu.uvs,Hu=Fu.indices,Uu=Fu.normals,ju=Fu.groups,Wu=Fu.extents,Qu=new r$n.Box3;Qu.min.x=Wu[0],Qu.min.y=Wu[1],Qu.min.z=Wu[2],Qu.max.x=Wu[3],Qu.max.y=Wu[4],Qu.max.z=Wu[5];var qu=new r$n.BufferGeometry;qu.setAttribute("position",new r$n.BufferAttribute(Gu,3)),qu.setAttribute("uv",new r$n.BufferAttribute(zu,2)),qu.setAttribute("normal",new r$n.BufferAttribute(Uu,3)),Hu&&qu.setIndex(new r$n.BufferAttribute(Hu,1)),qu.boundingBox=Qu,qu.boundingSphere=Qu.getBoundingSphere(new r$n.Sphere);for(var Yu=0,Ju=ju;Yu<Ju.length;Yu++){var _d=Ju[Yu];qu.addGroup(_d.start,_d.count,_d.materialIndex)}for(var tp=[],Ku=function(Xc){var _h=Tu[Xc.chunkName]||(Xc.texture?$u+Xc.texture:void 0),ip=new Mt$1;if(tp.push(ip),_h){var ap=void 0;_h in Pu?ap=Pu[_h]:(ap=Li(_h,Cu,Ru,Lu,Bu),Pu[_h]=ap),ap.then(function(hp){ip.uniforms.map.value=hp,ip.uniforms.exposure.value=3.3},function(){ip.defines.USE_MAP=!1,ip.uniforms.diffuse.value=new r$n.Color(16777215)})}else ip.defines.USE_MAP=!1,ip.uniforms.diffuse.value=new r$n.Color(16777215)},Xu=0,Zu=ju;Xu<Zu.length;Xu++)Ku(_d=Zu[Xu]);var _c=new ft$2(qu,tp);_c.name="model_floor_"+Nu,_c.floorIndex=Nu,Ou.push(_c)}return{objects:Ou,texturePromise:Promise.all(Object.keys(Pu).map(function(Xc){return Pu[Xc].catch(Qe$1)})).then(Qe$1)}}function Ni(_u,$u){return(_u=Object.assign({},_u)).autoResize!==!1&&($u>96?_u.size=Math.min(_u.size||1/0,100):$u>48?_u.size=Math.min(_u.size||1/0,200):$u>24?_u.size=Math.min(_u.size||1/0,400):$u>12?_u.size=Math.min(_u.size||1/0,800):$u>4&&(_u.size=Math.min(_u.size||1/0,1024))),_u}function Fi(_u){return _u.indexOf("//")===0||/^[0-9a-z]+\:/i.test(_u)}const Qi=o$i.Reader,Vi=o$i.util,_i=o$i.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$i.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Hi=_i.Model=(()=>{function _u($u){if(this.meshes=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.meshes=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Model;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:Pu.meshes&&Pu.meshes.length||(Pu.meshes=[]),Pu.meshes.push(_i.Mesh.decode($u,$u.uint32()));break;default:$u.skipType(7&Ru)}}return Pu},_u})();function qi(_u){for(var $u=[0,0,0],Tu=0;Tu<_u.attributes.normal.array.length/9;Tu++)$u[0]=_u.attributes.normal.array[9*Tu],$u[1]=_u.attributes.normal.array[9*Tu+1],$u[2]=_u.attributes.normal.array[9*Tu+2],_u.attributes.normal.array[9*Tu]=_u.attributes.normal.array[9*Tu+6],_u.attributes.normal.array[9*Tu+1]=_u.attributes.normal.array[9*Tu+7],_u.attributes.normal.array[9*Tu+2]=_u.attributes.normal.array[9*Tu+8],_u.attributes.normal.array[9*Tu+6]=$u[0],_u.attributes.normal.array[9*Tu+7]=$u[1],_u.attributes.normal.array[9*Tu+8]=$u[2];for(Tu=0;Tu<_u.attributes.position.array.length/9;Tu++)$u[0]=_u.attributes.position.array[9*Tu],$u[1]=_u.attributes.position.array[9*Tu+1],$u[2]=_u.attributes.position.array[9*Tu+2],_u.attributes.position.array[9*Tu]=_u.attributes.position.array[9*Tu+6],_u.attributes.position.array[9*Tu+1]=_u.attributes.position.array[9*Tu+7],_u.attributes.position.array[9*Tu+2]=_u.attributes.position.array[9*Tu+8],_u.attributes.position.array[9*Tu+6]=$u[0],_u.attributes.position.array[9*Tu+7]=$u[1],_u.attributes.position.array[9*Tu+8]=$u[2];for(Tu=0;Tu<_u.attributes.uv.array.length/6;Tu++)$u[0]=_u.attributes.uv.array[6*Tu],$u[1]=_u.attributes.uv.array[6*Tu+1],_u.attributes.uv.array[6*Tu]=_u.attributes.uv.array[6*Tu+4],_u.attributes.uv.array[6*Tu+1]=_u.attributes.uv.array[6*Tu+5],_u.attributes.uv.array[6*Tu+4]=$u[0],_u.attributes.uv.array[6*Tu+5]=$u[1];_u.attributes.normal.needsUpdate=!0,_u.attributes.position.needsUpdate=!0,_u.attributes.uv.needsUpdate=!0}function zi(_u){var $u=_u.position,Tu=_u.normal,Cu=_u.uv,Pu=_u.uv2,Ru=_u.groups,Lu=new r$n.BufferGeometry;Lu.setAttribute("position",new r$n.BufferAttribute(new Float32Array($u.array),3)),Tu&&Lu.setAttribute("normal",new r$n.BufferAttribute(new Float32Array(Tu.array),3)),Cu&&Lu.setAttribute("uv",new r$n.BufferAttribute(new Float32Array(Cu.array),2)),Pu&&Lu.setAttribute("uv2",new r$n.BufferAttribute(new Float32Array(Pu.array),2));for(var Bu=0,Vu=Ru;Bu<Vu.length;Bu++){var Ou=Vu[Bu];Lu.addGroup(Ou.start,Ou.count,Ou.materialIndex)}return Lu}function Ki(_u,$u,Tu,Cu,Pu,Ru){if(Ru.hasOwnProperty(_u))return Ru[_u];Fi(_u=_u.split("?")[0])||(_u=$u+_u),(_u=_u.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(_u="https:"+_u);var Lu=t$h.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ei.isInitialized()},ii(Tu,["quality","format","sharpen","mappings"]));return Ru[_u=Tu.transform?Tu.transform(_u,Lu):ct$3(_u,Lu)]=Pu.load(_u,{wrapS:r$n.RepeatWrapping,wrapT:r$n.RepeatWrapping}).then(function(Bu){var Vu=Bu.body;return Cu&&Vu.repeat.copy(Cu),Vu.needsUpdate=!0,Vu.updateMatrix(),Vu})}function Ui(_u,$u,Tu,Cu,Pu){var Ru=[],Lu=new Mt$1,Bu=Lu.uniforms;Bu.exposure.value=4.3;var Vu=Lu.defines;if(Vu.USE_MAP=!1,Vu.USE_UV=!1,_u.kd&&(Bu.diffuse.value=new r$n.Color().fromArray(_u.kd.rgb)),_u.mapkd){var Ou=null;if(_u.mapkdrepeat){var Du=_u.mapkdrepeat.split(/\s+/).map(function(Gu){return Number(Gu)}),ku=Du[0],Fu=Du[1];Ou=new r$n.Vector2(ku,Fu)}Ru.push(Ki(_u.mapkd,$u,Tu,Ou,Cu,Pu).then(function(Gu){Vu.USE_MAP=!0,Vu.USE_UV=!0,Bu.map.value=Gu,Bu.uvTransform.value=Gu.matrix,Lu.needsUpdate=!0}).catch(Qe$1))}if(_u.ks&&(Bu.specular.value=new r$n.Color().fromArray(_u.ks.rgb)),_u.mapks&&Ru.push(Ki(_u.mapks,$u,Tu,null,Cu,Pu).then(function(Gu){Bu.specularMap.value=Gu}).catch(Qe$1)),_u.ke&&(Bu.emissive.value=new r$n.Color().fromArray(_u.ke.rgb)),_u.mapke&&Ru.push(Ki(_u.mapke,$u,Tu,null,Cu,Pu).then(function(Gu){Bu.emissiveMap.value=Gu}).catch(Qe$1)),_u.norm&&Ru.push(Ki(_u.norm,$u,Tu,null,Cu,Pu).then(function(Gu){Bu.normalMap.value=Gu}).catch(Qe$1)),_u.mapbump&&Ru.push(Ki(_u.mapbump,$u,Tu,null,Cu,Pu).then(function(Gu){Bu.bumpMap.value=Gu}).catch(Qe$1)),_u.bump&&Ru.push(Ki(_u.bump,$u,Tu,null,Cu,Pu).then(function(Gu){Bu.bumpMap.value=Gu}).catch(Qe$1)),typeof _u.ns=="number"&&(Bu.shininess.value=_u.ns),typeof _u.d=="number"){var Nu=_u.d;Nu>0&&Nu<1&&(Lu.originOpacity=Nu,Lu.opacity=Nu)}return{material:Lu,textureReady:Promise.all(Ru).then(Qe$1)}}function ji(_u,$u,Tu,Cu,Pu,Ru){for(var Lu,Bu=[],Vu=[],Ou=(Lu=_u,Hi.decode(Lu).meshes),Du=new Ii({allowHosts:Cu,requestProxy:Pu,networkSubscribe:Ru}),ku=new r$n.Matrix4,Fu=new r$n.Vector3,Nu=new r$n.Quaternion,Gu=new r$n.Vector3,zu={},Hu=0,Uu=Ou;Hu<Uu.length;Hu++){var ju=Uu[Hu],Wu=ju.name,Qu=ju.chunks,qu=ju.matrix;if(Wu!=="Ceiling"&&Wu!=="CeilingDrop")for(var Yu=0,Ju=qu;Yu<Ju.length;Yu++){var _d=Ju[Yu];ku.elements=_d.elements;var tp=new gt$3;tp.renderOrder=-3;for(var Ku=0;Ku<Qu.length;Ku++){var Xu=zi(Qu[Ku].geometry);Xu.applyMatrix4(ku),ku.decompose(Fu,Nu,Gu),Gu.x*Gu.y*Gu.z<0&&Xu.attributes.normal&&Xu.attributes.position&&Xu.attributes.uv&&qi(Xu);for(var Zu=[],_c=0,Xc=Qu[Ku].material;_c<Xc.length;_c++){var _h=Ui(Xc[_c],$u,Tu,Du,zu),ip=_h.material,ap=_h.textureReady;Vu.push(ap),Zu.push(ip)}var hp=new ft$2(Xu,Zu);hp.name="chunk_"+Ku,tp.add(hp)}tp.floorIndex=0,tp.name=Wu,Bu.push(tp)}}return{objects:Bu,texturePromise:Promise.all(Vu).catch(Qe$1)}}function Gi(_u,$u){if(!_u)throw new Error("math.gl assertion ".concat($u))}_i.Mesh=(()=>{function _u($u){if(this.chunks=[],this.matrix=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.name="",_u.prototype.chunks=Vi.emptyArray,_u.prototype.matrix=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Mesh;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:Pu.name=$u.string();break;case 2:Pu.chunks&&Pu.chunks.length||(Pu.chunks=[]),Pu.chunks.push(_i.Chunk.decode($u,$u.uint32()));break;case 3:Pu.matrix&&Pu.matrix.length||(Pu.matrix=[]),Pu.matrix.push(_i.Matrix.decode($u,$u.uint32()));break;default:$u.skipType(7&Ru)}}if(!Pu.hasOwnProperty("name"))throw Vi.ProtocolError("missing required 'name'",{instance:Pu});return Pu},_u})(),_i.Matrix=(()=>{function _u($u){if(this.elements=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.elements=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Matrix;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:if(Pu.elements&&Pu.elements.length||(Pu.elements=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.elements.push($u.float())}else Pu.elements.push($u.float());break;default:$u.skipType(7&Ru)}}return Pu},_u})(),_i.Chunk=(()=>{function _u($u){if(this.material=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.geometry=null,_u.prototype.material=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Chunk;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 2:Pu.geometry=_i.Geometry.decode($u,$u.uint32());break;case 3:Pu.material&&Pu.material.length||(Pu.material=[]),Pu.material.push(_i.Material.decode($u,$u.uint32()));break;default:$u.skipType(7&Ru)}}if(!Pu.hasOwnProperty("geometry"))throw Vi.ProtocolError("missing required 'geometry'",{instance:Pu});return Pu},_u})(),_i.Geometry=(()=>{function _u($u){if(this.groups=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.position=null,_u.prototype.uv=null,_u.prototype.uv2=null,_u.prototype.normal=null,_u.prototype.groups=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Geometry;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:Pu.position=_i.Position.decode($u,$u.uint32());break;case 2:Pu.uv=_i.UV.decode($u,$u.uint32());break;case 3:Pu.uv2=_i.UV.decode($u,$u.uint32());break;case 4:Pu.normal=_i.Normal.decode($u,$u.uint32());break;case 5:Pu.groups&&Pu.groups.length||(Pu.groups=[]),Pu.groups.push(_i.Group.decode($u,$u.uint32()));break;default:$u.skipType(7&Ru)}}if(!Pu.hasOwnProperty("position"))throw Vi.ProtocolError("missing required 'position'",{instance:Pu});if(!Pu.hasOwnProperty("normal"))throw Vi.ProtocolError("missing required 'normal'",{instance:Pu});return Pu},_u})(),_i.Position=(()=>{function _u($u){if(this.array=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Position;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:if(Pu.array&&Pu.array.length||(Pu.array=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.array.push($u.float())}else Pu.array.push($u.float());break;default:$u.skipType(7&Ru)}}return Pu},_u})(),_i.UV=(()=>{function _u($u){if(this.array=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.UV;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:if(Pu.array&&Pu.array.length||(Pu.array=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.array.push($u.float())}else Pu.array.push($u.float());break;default:$u.skipType(7&Ru)}}return Pu},_u})(),_i.Normal=(()=>{function _u($u){if(this.array=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Normal;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:if(Pu.array&&Pu.array.length||(Pu.array=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.array.push($u.float())}else Pu.array.push($u.float());break;default:$u.skipType(7&Ru)}}return Pu},_u})(),_i.Group=(()=>{function _u($u){if($u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.start=0,_u.prototype.count=0,_u.prototype.materialIndex=0,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Group;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:Pu.start=$u.uint32();break;case 2:Pu.count=$u.uint32();break;case 3:Pu.materialIndex=$u.uint32();break;default:$u.skipType(7&Ru)}}if(!Pu.hasOwnProperty("start"))throw Vi.ProtocolError("missing required 'start'",{instance:Pu});if(!Pu.hasOwnProperty("count"))throw Vi.ProtocolError("missing required 'count'",{instance:Pu});if(!Pu.hasOwnProperty("materialIndex"))throw Vi.ProtocolError("missing required 'materialIndex'",{instance:Pu});return Pu},_u})(),_i.Material=(()=>{function _u($u){if($u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.kd=null,_u.prototype.ks=null,_u.prototype.ke=null,_u.prototype.mapkd="",_u.prototype.mapks="",_u.prototype.mapke="",_u.prototype.norm="",_u.prototype.mapbump="",_u.prototype.bump="",_u.prototype.mapd="",_u.prototype.ns=0,_u.prototype.d=0,_u.prototype.tr=0,_u.prototype.mapkdrepeat="",_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Material;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:Pu.kd=_i.Color.decode($u,$u.uint32());break;case 2:Pu.ks=_i.Color.decode($u,$u.uint32());break;case 3:Pu.ke=_i.Color.decode($u,$u.uint32());break;case 4:Pu.mapkd=$u.string();break;case 5:Pu.mapks=$u.string();break;case 6:Pu.mapke=$u.string();break;case 7:Pu.norm=$u.string();break;case 8:Pu.mapbump=$u.string();break;case 9:Pu.bump=$u.string();break;case 10:Pu.mapd=$u.string();break;case 11:Pu.ns=$u.float();break;case 12:Pu.d=$u.float();break;case 13:Pu.tr=$u.float();break;case 14:Pu.mapkdrepeat=$u.string();break;default:$u.skipType(7&Ru)}}return Pu},_u})(),_i.Color=(()=>{function _u($u){if(this.rgb=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.rgb=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Color;for(;$u.pos<Cu;){let Ru=$u.uint32();switch(Ru>>>3){case 1:if(Pu.rgb&&Pu.rgb.length||(Pu.rgb=[]),(7&Ru)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.rgb.push($u.float())}else Pu.rgb.push($u.float());break;default:$u.skipType(7&Ru)}}return Pu},_u})();const Wi={};function Xi(_u,{precision:$u=Wi.precision||4}={}){return _u=function(Tu){return Math.round(Tu/Wi.EPSILON)*Wi.EPSILON}(_u),"".concat(parseFloat(_u.toPrecision($u)))}function Yi(_u){return Array.isArray(_u)||ArrayBuffer.isView(_u)&&!(_u instanceof DataView)}function Zi(_u,$u,Tu){const Cu=Wi.EPSILON;Tu&&(Wi.EPSILON=Tu);try{if(_u===$u)return!0;if(Yi(_u)&&Yi($u)){if(_u.length!==$u.length)return!1;for(let Pu=0;Pu<_u.length;++Pu)if(!Zi(_u[Pu],$u[Pu]))return!1;return!0}return _u&&_u.equals?_u.equals($u):$u&&$u.equals?$u.equals(_u):!(!Number.isFinite(_u)||!Number.isFinite($u))&&Math.abs(_u-$u)<=Wi.EPSILON*Math.max(1,Math.abs(_u),Math.abs($u))}finally{Wi.EPSILON=Cu}}Wi.EPSILON=1e-12,Wi.debug=!1,Wi.precision=4,Wi.printTypes=!1,Wi.printDegrees=!1,Wi.printRowMajor=!0;class Ji extends function($u){function Tu(){var Cu=Reflect.construct($u,Array.from(arguments));return Object.setPrototypeOf(Cu,Object.getPrototypeOf(this)),Cu}return Tu.prototype=Object.create($u.prototype,{constructor:{value:$u,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Tu,$u):Tu.__proto__=$u,Tu}(Array){get ELEMENTS(){return Gi(!1),0}clone(){return new this.constructor().copy(this)}from($u){return Array.isArray($u)?this.copy($u):this.fromObject($u)}fromArray($u,Tu=0){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=$u[Cu+Tu];return this.check()}to($u){return $u===this?this:Yi($u)?this.toArray($u):this.toObject($u)}toTarget($u){return $u?this.to($u):this}toArray($u=[],Tu=0){for(let Cu=0;Cu<this.ELEMENTS;++Cu)$u[Tu+Cu]=this[Cu];return $u}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wi)}formatString($u){let Tu="";for(let Cu=0;Cu<this.ELEMENTS;++Cu)Tu+=(Cu>0?", ":"")+Xi(this[Cu],$u);return"".concat($u.printTypes?this.constructor.name:"","[").concat(Tu,"]")}equals($u){if(!$u||this.length!==$u.length)return!1;for(let Tu=0;Tu<this.ELEMENTS;++Tu)if(!Zi(this[Tu],$u[Tu]))return!1;return!0}exactEquals($u){if(!$u||this.length!==$u.length)return!1;for(let Tu=0;Tu<this.ELEMENTS;++Tu)if(this[Tu]!==$u[Tu])return!1;return!0}negate(){for(let $u=0;$u<this.ELEMENTS;++$u)this[$u]=-this[$u];return this.check()}lerp($u,Tu,Cu){Cu===void 0&&(Cu=Tu,Tu=$u,$u=this);for(let Pu=0;Pu<this.ELEMENTS;++Pu){const Ru=$u[Pu];this[Pu]=Ru+Cu*(Tu[Pu]-Ru)}return this.check()}min($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=Math.min($u[Tu],this[Tu]);return this.check()}max($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=Math.max($u[Tu],this[Tu]);return this.check()}clamp($u,Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=Math.min(Math.max(this[Cu],$u[Cu]),Tu[Cu]);return this.check()}add(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]+=Tu[Cu];return this.check()}subtract(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]-=Tu[Cu];return this.check()}scale($u){if(Array.isArray($u))return this.multiply($u);for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]*=$u;return this.check()}sub($u){return this.subtract($u)}setScalar($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=$u;return this.check()}addScalar($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]+=$u;return this.check()}subScalar($u){return this.addScalar(-$u)}multiplyScalar($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]*=$u;return this.check()}divideScalar($u){return this.scale(1/$u)}clampScalar($u,Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=Math.min(Math.max(this[Cu],$u),Tu);return this.check()}multiplyByScalar($u){return this.scale($u)}get elements(){return this}check(){if(Wi.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let $u=this.length===this.ELEMENTS;for(let Tu=0;Tu<this.ELEMENTS;++Tu)$u=$u&&Number.isFinite(this[Tu]);return $u}}function $i(_u){if(!Number.isFinite(_u))throw new Error("Invalid number ".concat(_u));return _u}function en(_u,$u,Tu=""){if(Wi.debug&&!function(Cu,Pu){if(Cu.length!==Pu)return!1;for(let Ru=0;Ru<Cu.length;++Ru)if(!Number.isFinite(Cu[Ru]))return!1;return!0}(_u,$u))throw new Error("math.gl: ".concat(Tu," some fields set to invalid numbers'"));return _u}const tn={};function nn(_u,$u){tn[_u]||(tn[_u]=!0,console.warn("".concat(_u," has been removed in version ").concat($u,", see upgrade guide for more information")))}class rn extends Ji{get ELEMENTS(){return Gi(!1),0}copy($u){return Gi(!1),this}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let $u=0;for(let Tu=0;Tu<this.ELEMENTS;++Tu)$u+=this[Tu]*this[Tu];return $u}magnitudeSquared(){return this.lengthSquared()}distance($u){return Math.sqrt(this.distanceSquared($u))}distanceSquared($u){let Tu=0;for(let Cu=0;Cu<this.ELEMENTS;++Cu){const Pu=this[Cu]-$u[Cu];Tu+=Pu*Pu}return $i(Tu)}dot($u){let Tu=0;for(let Cu=0;Cu<this.ELEMENTS;++Cu)Tu+=this[Cu]*$u[Cu];return $i(Tu)}normalize(){const $u=this.magnitude();if($u!==0)for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]/=$u;return this.check()}multiply(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]*=Tu[Cu];return this.check()}divide(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]/=Tu[Cu];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo($u){return this.distance($u)}distanceToSquared($u){return this.distanceSquared($u)}getComponent($u){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),$i(this[$u])}setComponent($u,Tu){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),this[$u]=Tu,this.check()}addVectors($u,Tu){return this.copy($u).add(Tu)}subVectors($u,Tu){return this.copy($u).subtract(Tu)}multiplyVectors($u,Tu){return this.copy($u).multiply(Tu)}addScaledVector($u,Tu){return this.add(new this.constructor($u).multiplyScalar(Tu))}}var on=typeof Float32Array!="undefined"?Float32Array:Array;function sn(){var _u=new on(3);return on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u}function an(_u,$u,Tu){var Cu=new on(3);return Cu[0]=_u,Cu[1]=$u,Cu[2]=Tu,Cu}function ln(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]}function un(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Ru=$u[2],Lu=Tu[0],Bu=Tu[1],Vu=Tu[2];return _u[0]=Pu*Vu-Ru*Bu,_u[1]=Ru*Lu-Cu*Vu,_u[2]=Cu*Bu-Pu*Lu,_u}function hn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Ru=$u[2],Lu=Tu[3]*Cu+Tu[7]*Pu+Tu[11]*Ru+Tu[15];return Lu=Lu||1,_u[0]=(Tu[0]*Cu+Tu[4]*Pu+Tu[8]*Ru+Tu[12])/Lu,_u[1]=(Tu[1]*Cu+Tu[5]*Pu+Tu[9]*Ru+Tu[13])/Lu,_u[2]=(Tu[2]*Cu+Tu[6]*Pu+Tu[10]*Ru+Tu[14])/Lu,_u}function cn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Ru=$u[2];return _u[0]=Cu*Tu[0]+Pu*Tu[3]+Ru*Tu[6],_u[1]=Cu*Tu[1]+Pu*Tu[4]+Ru*Tu[7],_u[2]=Cu*Tu[2]+Pu*Tu[5]+Ru*Tu[8],_u}Math.hypot||(Math.hypot=function(){for(var _u=0,$u=arguments.length;$u--;)_u+=arguments[$u]*arguments[$u];return Math.sqrt(_u)});var dn=function(_u){var $u=_u[0],Tu=_u[1],Cu=_u[2];return Math.hypot($u,Tu,Cu)};function pn(_u,$u,Tu){const Cu=$u[0],Pu=$u[1],Ru=$u[2],Lu=Tu[3]*Cu+Tu[7]*Pu+Tu[11]*Ru||1;return _u[0]=(Tu[0]*Cu+Tu[4]*Pu+Tu[8]*Ru)/Lu,_u[1]=(Tu[1]*Cu+Tu[5]*Pu+Tu[9]*Ru)/Lu,_u[2]=(Tu[2]*Cu+Tu[6]*Pu+Tu[10]*Ru)/Lu,_u}sn();const fn=[0,0,0],An={};class gn extends rn{static get ZERO(){return An.ZERO=An.ZERO||Object.freeze(new gn(0,0,0,0))}constructor($u=0,Tu=0,Cu=0){super(-0,-0,-0),arguments.length===1&&Yi($u)?this.copy($u):(Wi.debug&&($i($u),$i(Tu),$i(Cu)),this[0]=$u,this[1]=Tu,this[2]=Cu)}set($u,Tu,Cu){return this[0]=$u,this[1]=Tu,this[2]=Cu,this.check()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this.check()}fromObject($u){return Wi.debug&&($i($u.x),$i($u.y),$i($u.z)),this[0]=$u.x,this[1]=$u.y,this[2]=$u.z,this.check()}toObject($u){return $u.x=this[0],$u.y=this[1],$u.z=this[2],$u}get ELEMENTS(){return 3}get z(){return this[2]}set z($u){this[2]=$i($u)}angle($u){return function(Tu,Cu){var Pu=Tu[0],Ru=Tu[1],Lu=Tu[2],Bu=Cu[0],Vu=Cu[1],Ou=Cu[2],Du=Math.sqrt(Pu*Pu+Ru*Ru+Lu*Lu)*Math.sqrt(Bu*Bu+Vu*Vu+Ou*Ou),ku=Du&&ln(Tu,Cu)/Du;return Math.acos(Math.min(Math.max(ku,-1),1))}(this,$u)}cross($u){return un(this,this,$u),this.check()}rotateX({radians:$u,origin:Tu=fn}){return function(Cu,Pu,Ru,Lu){var Bu=[],Vu=[];Bu[0]=Pu[0]-Ru[0],Bu[1]=Pu[1]-Ru[1],Bu[2]=Pu[2]-Ru[2],Vu[0]=Bu[0],Vu[1]=Bu[1]*Math.cos(Lu)-Bu[2]*Math.sin(Lu),Vu[2]=Bu[1]*Math.sin(Lu)+Bu[2]*Math.cos(Lu),Cu[0]=Vu[0]+Ru[0],Cu[1]=Vu[1]+Ru[1],Cu[2]=Vu[2]+Ru[2]}(this,this,Tu,$u),this.check()}rotateY({radians:$u,origin:Tu=fn}){return function(Cu,Pu,Ru,Lu){var Bu=[],Vu=[];Bu[0]=Pu[0]-Ru[0],Bu[1]=Pu[1]-Ru[1],Bu[2]=Pu[2]-Ru[2],Vu[0]=Bu[2]*Math.sin(Lu)+Bu[0]*Math.cos(Lu),Vu[1]=Bu[1],Vu[2]=Bu[2]*Math.cos(Lu)-Bu[0]*Math.sin(Lu),Cu[0]=Vu[0]+Ru[0],Cu[1]=Vu[1]+Ru[1],Cu[2]=Vu[2]+Ru[2]}(this,this,Tu,$u),this.check()}rotateZ({radians:$u,origin:Tu=fn}){return function(Cu,Pu,Ru,Lu){var Bu=[],Vu=[];Bu[0]=Pu[0]-Ru[0],Bu[1]=Pu[1]-Ru[1],Bu[2]=Pu[2]-Ru[2],Vu[0]=Bu[0]*Math.cos(Lu)-Bu[1]*Math.sin(Lu),Vu[1]=Bu[0]*Math.sin(Lu)+Bu[1]*Math.cos(Lu),Vu[2]=Bu[2],Cu[0]=Vu[0]+Ru[0],Cu[1]=Vu[1]+Ru[1],Cu[2]=Vu[2]+Ru[2]}(this,this,Tu,$u),this.check()}transform($u){return this.transformAsPoint($u)}transformAsPoint($u){return hn(this,this,$u),this.check()}transformAsVector($u){return pn(this,this,$u),this.check()}transformByMatrix3($u){return cn(this,this,$u),this.check()}transformByMatrix2($u){return function(Tu,Cu,Pu){const Ru=Cu[0],Lu=Cu[1];Tu[0]=Pu[0]*Ru+Pu[2]*Lu,Tu[1]=Pu[1]*Ru+Pu[3]*Lu,Tu[2]=Cu[2]}(this,this,$u),this.check()}transformByQuaternion($u){return function(Tu,Cu,Pu){var Ru=Pu[0],Lu=Pu[1],Bu=Pu[2],Vu=Pu[3],Ou=Cu[0],Du=Cu[1],ku=Cu[2],Fu=Lu*ku-Bu*Du,Nu=Bu*Ou-Ru*ku,Gu=Ru*Du-Lu*Ou,zu=Lu*Gu-Bu*Nu,Hu=Bu*Fu-Ru*Gu,Uu=Ru*Nu-Lu*Fu,ju=2*Vu;Fu*=ju,Nu*=ju,Gu*=ju,zu*=2,Hu*=2,Uu*=2,Tu[0]=Ou+Fu+zu,Tu[1]=Du+Nu+Hu,Tu[2]=ku+Gu+Uu}(this,this,$u),this.check()}}var mn={throttleRequests:!0,maxRequests:5},vn=function(){function _u($u){$u===void 0&&($u={}),this.props=t$h.__assign(t$h.__assign({},mn),$u),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferred=null}return _u.prototype.scheduleRequest=function($u,Tu){if(Tu===void 0&&(Tu=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has($u))return this.requestMap.get($u);var Cu={identiy:$u,priority:0,getPriority:Tu,resolve:function(){}},Pu=new Promise(function(Ru){return Cu.resolve=Ru});return this.requestQueue.push(Cu),this.requestMap.set($u,Pu),this.issueNewRequests(),Pu},_u.prototype.issueRequest=function($u){var Tu=this,Cu=$u.identiy,Pu=$u.resolve,Ru=!1;this.activeRequestCount++,Pu({done:function(){Ru||(Ru=!0,Tu.requestMap.delete(Cu),Tu.activeRequestCount--,Tu.issueNewRequests())}})},_u.prototype.issueNewRequests=function(){var $u=this;this.deferred||(this.deferred=setTimeout(function(){return $u.issueNewRequestsAsync()},0))},_u.prototype.issueNewRequestsAsync=function(){this.deferred=null;var $u=Math.max(this.props.maxRequests-this.activeRequestCount,0);if($u!==0){this.updateAllRequests();for(var Tu=0;Tu<$u;Tu++){var Cu=this.requestQueue.shift();Cu&&this.issueRequest(Cu)}}},_u.prototype.updateAllRequests=function(){for(var $u=this.requestQueue,Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu];this.updateRequest(Cu)||($u.splice(Tu,1),this.requestMap.delete(Cu.identiy),Tu--)}$u.sort(function(Pu,Ru){return Pu.priority-Ru.priority})},_u.prototype.updateRequest=function($u){return $u.priority=$u.getPriority($u.identiy),!($u.priority<0)||($u.resolve(null),!1)},_u}(),yn=function(_u,$u,Tu){this.item=_u,this.previous=$u,this.next=Tu},bn$1=function(){function _u(){this.head=null,this.tail=null,this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.add=function($u){var Tu=new yn($u,this.tail,null);return this.tail?(this.tail.next=Tu,this.tail=Tu):(this.head=Tu,this.tail=Tu),this._length++,Tu},_u.prototype.remove=function($u){$u.previous&&$u.next?($u.previous.next=$u.next,$u.next.previous=$u.previous):$u.previous?($u.previous.next=null,this.tail=$u.previous):$u.next?($u.next.previous=null,this.head=$u.next):(this.head=null,this.tail=null),$u.next=null,$u.previous=null,this._length--},_u.prototype.splice=function($u,Tu){$u!==Tu&&(this.remove(Tu),this.insert($u,Tu))},_u.prototype.insert=function($u,Tu){var Cu=$u.next;$u.next=Tu,this.tail===$u?this.tail=Tu:Cu.previous=Tu,Tu.next=Cu,Tu.previous=$u,this._length++},_u}(),xn=function(){function _u(){this.list=new bn$1,this.sentinel=this.list.add("sentinel")}return _u.prototype.reset=function(){this.list.splice(this.list.tail,this.sentinel)},_u.prototype.touch=function($u){var Tu=$u.cacheNode;Tu&&this.list.splice(this.sentinel,Tu)},_u.prototype.add=function($u,Tu){$u.cacheNode||($u.cacheNode=this.list.add($u),Tu&&Tu($u))},_u.prototype.unloadTile=function($u,Tu){var Cu=$u.cacheNode;Cu&&(this.list.remove(Cu),$u.cacheNode=void 0,Tu&&Tu($u))},_u.prototype.unloadTiles=function($u,Tu){for(var Cu=this.list.head;Cu!==this.sentinel&&$u();){var Pu=Cu.item;Cu=Cu.next,this.unloadTile(Pu,Tu)}},_u}();class wn$1 extends Ji{get ELEMENTS(){return Gi(!1),0}get RANK(){return Gi(!1),0}toString(){let $u="[";if(Wi.printRowMajor){$u+="row-major:";for(let Tu=0;Tu<this.RANK;++Tu)for(let Cu=0;Cu<this.RANK;++Cu)$u+=" ".concat(this[Cu*this.RANK+Tu])}else{$u+="column-major:";for(let Tu=0;Tu<this.ELEMENTS;++Tu)$u+=" ".concat(this[Tu])}return $u+="]",$u}getElementIndex($u,Tu){return Tu*this.RANK+$u}getElement($u,Tu){return this[Tu*this.RANK+$u]}setElement($u,Tu,Cu){return this[Tu*this.RANK+$u]=$i(Cu),this}getColumn($u,Tu=new Array(this.RANK).fill(-0)){const Cu=$u*this.RANK;for(let Pu=0;Pu<this.RANK;++Pu)Tu[Pu]=this[Cu+Pu];return Tu}setColumn($u,Tu){const Cu=$u*this.RANK;for(let Pu=0;Pu<this.RANK;++Pu)this[Cu+Pu]=Tu[Pu];return this}}function En(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Ru=$u[2],Lu=$u[3],Bu=$u[4],Vu=$u[5],Ou=$u[6],Du=$u[7],ku=$u[8],Fu=$u[9],Nu=$u[10],Gu=$u[11],zu=$u[12],Hu=$u[13],Uu=$u[14],ju=$u[15],Wu=Tu[0],Qu=Tu[1],qu=Tu[2],Yu=Tu[3];return _u[0]=Wu*Cu+Qu*Bu+qu*ku+Yu*zu,_u[1]=Wu*Pu+Qu*Vu+qu*Fu+Yu*Hu,_u[2]=Wu*Ru+Qu*Ou+qu*Nu+Yu*Uu,_u[3]=Wu*Lu+Qu*Du+qu*Gu+Yu*ju,Wu=Tu[4],Qu=Tu[5],qu=Tu[6],Yu=Tu[7],_u[4]=Wu*Cu+Qu*Bu+qu*ku+Yu*zu,_u[5]=Wu*Pu+Qu*Vu+qu*Fu+Yu*Hu,_u[6]=Wu*Ru+Qu*Ou+qu*Nu+Yu*Uu,_u[7]=Wu*Lu+Qu*Du+qu*Gu+Yu*ju,Wu=Tu[8],Qu=Tu[9],qu=Tu[10],Yu=Tu[11],_u[8]=Wu*Cu+Qu*Bu+qu*ku+Yu*zu,_u[9]=Wu*Pu+Qu*Vu+qu*Fu+Yu*Hu,_u[10]=Wu*Ru+Qu*Ou+qu*Nu+Yu*Uu,_u[11]=Wu*Lu+Qu*Du+qu*Gu+Yu*ju,Wu=Tu[12],Qu=Tu[13],qu=Tu[14],Yu=Tu[15],_u[12]=Wu*Cu+Qu*Bu+qu*ku+Yu*zu,_u[13]=Wu*Pu+Qu*Vu+qu*Fu+Yu*Hu,_u[14]=Wu*Ru+Qu*Ou+qu*Nu+Yu*Uu,_u[15]=Wu*Lu+Qu*Du+qu*Gu+Yu*ju,_u}function Mn(_u,$u,Tu){var Cu=Tu[0],Pu=Tu[1],Ru=Tu[2];return _u[0]=$u[0]*Cu,_u[1]=$u[1]*Cu,_u[2]=$u[2]*Cu,_u[3]=$u[3]*Cu,_u[4]=$u[4]*Pu,_u[5]=$u[5]*Pu,_u[6]=$u[6]*Pu,_u[7]=$u[7]*Pu,_u[8]=$u[8]*Ru,_u[9]=$u[9]*Ru,_u[10]=$u[10]*Ru,_u[11]=$u[11]*Ru,_u[12]=$u[12],_u[13]=$u[13],_u[14]=$u[14],_u[15]=$u[15],_u}(function(){var _u;_u=new on(2),on!=Float32Array&&(_u[0]=0,_u[1]=0)})(),function(){var _u;_u=new on(4),on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=0)}();const In=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Sn=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Cn=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Bn={};class Tn extends wn$1{static get IDENTITY(){return Bn.IDENTITY=Bn.IDENTITY||Object.freeze(new Tn(In)),Bn.IDENTITY}static get ZERO(){return Bn.ZERO=Bn.ZERO||Object.freeze(new Tn(Sn)),Bn.ZERO}get INDICES(){return Cn}get ELEMENTS(){return 16}get RANK(){return 4}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this[9]=$u[9],this[10]=$u[10],this[11]=$u[11],this[12]=$u[12],this[13]=$u[13],this[14]=$u[14],this[15]=$u[15],this.check()}set($u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu){return this[0]=$u,this[1]=Tu,this[2]=Cu,this[3]=Pu,this[4]=Ru,this[5]=Lu,this[6]=Bu,this[7]=Vu,this[8]=Ou,this[9]=Du,this[10]=ku,this[11]=Fu,this[12]=Nu,this[13]=Gu,this[14]=zu,this[15]=Hu,this.check()}setRowMajor($u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu){return this[0]=$u,this[1]=Ru,this[2]=Ou,this[3]=Nu,this[4]=Tu,this[5]=Lu,this[6]=Du,this[7]=Gu,this[8]=Cu,this[9]=Bu,this[10]=ku,this[11]=zu,this[12]=Pu,this[13]=Vu,this[14]=Fu,this[15]=Hu,this.check()}toRowMajor($u){return $u[0]=this[0],$u[1]=this[4],$u[2]=this[8],$u[3]=this[12],$u[4]=this[1],$u[5]=this[5],$u[6]=this[9],$u[7]=this[13],$u[8]=this[2],$u[9]=this[6],$u[10]=this[10],$u[11]=this[14],$u[12]=this[3],$u[13]=this[7],$u[14]=this[11],$u[15]=this[15],$u}identity(){return this.copy(In)}fromQuaternion($u){return function(Tu,Cu){var Pu=Cu[0],Ru=Cu[1],Lu=Cu[2],Bu=Cu[3],Vu=Pu+Pu,Ou=Ru+Ru,Du=Lu+Lu,ku=Pu*Vu,Fu=Ru*Vu,Nu=Ru*Ou,Gu=Lu*Vu,zu=Lu*Ou,Hu=Lu*Du,Uu=Bu*Vu,ju=Bu*Ou,Wu=Bu*Du;Tu[0]=1-Nu-Hu,Tu[1]=Fu+Wu,Tu[2]=Gu-ju,Tu[3]=0,Tu[4]=Fu-Wu,Tu[5]=1-ku-Hu,Tu[6]=zu+Uu,Tu[7]=0,Tu[8]=Gu+ju,Tu[9]=zu-Uu,Tu[10]=1-ku-Nu,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1}(this,$u),this.check()}frustum({left:$u,right:Tu,bottom:Cu,top:Pu,near:Ru,far:Lu}){return Lu===1/0?Tn._computeInfinitePerspectiveOffCenter(this,$u,Tu,Cu,Pu,Ru):function(Bu,Vu,Ou,Du,ku,Fu,Nu){var Gu=1/(Ou-Vu),zu=1/(ku-Du),Hu=1/(Fu-Nu);Bu[0]=2*Fu*Gu,Bu[1]=0,Bu[2]=0,Bu[3]=0,Bu[4]=0,Bu[5]=2*Fu*zu,Bu[6]=0,Bu[7]=0,Bu[8]=(Ou+Vu)*Gu,Bu[9]=(ku+Du)*zu,Bu[10]=(Nu+Fu)*Hu,Bu[11]=-1,Bu[12]=0,Bu[13]=0,Bu[14]=Nu*Fu*2*Hu,Bu[15]=0}(this,$u,Tu,Cu,Pu,Ru,Lu),this.check()}static _computeInfinitePerspectiveOffCenter($u,Tu,Cu,Pu,Ru,Lu){const Bu=2*Lu/(Cu-Tu),Vu=2*Lu/(Ru-Pu),Ou=(Cu+Tu)/(Cu-Tu),Du=(Ru+Pu)/(Ru-Pu),ku=-2*Lu;return $u[0]=Bu,$u[1]=0,$u[2]=0,$u[3]=0,$u[4]=0,$u[5]=Vu,$u[6]=0,$u[7]=0,$u[8]=Ou,$u[9]=Du,$u[10]=-1,$u[11]=-1,$u[12]=0,$u[13]=0,$u[14]=ku,$u[15]=0,$u}lookAt($u,Tu,Cu){return arguments.length===1&&({eye:$u,center:Tu,up:Cu}=$u),function(Pu,Ru,Lu,Bu){var Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Uu,ju=Ru[0],Wu=Ru[1],Qu=Ru[2],qu=Bu[0],Yu=Bu[1],Ju=Bu[2],_d=Lu[0],tp=Lu[1],Ku=Lu[2];Math.abs(ju-_d)<1e-6&&Math.abs(Wu-tp)<1e-6&&Math.abs(Qu-Ku)<1e-6?function(Xu){Xu[0]=1,Xu[1]=0,Xu[2]=0,Xu[3]=0,Xu[4]=0,Xu[5]=1,Xu[6]=0,Xu[7]=0,Xu[8]=0,Xu[9]=0,Xu[10]=1,Xu[11]=0,Xu[12]=0,Xu[13]=0,Xu[14]=0,Xu[15]=1}(Pu):(Gu=ju-_d,zu=Wu-tp,Hu=Qu-Ku,Vu=Yu*(Hu*=Uu=1/Math.hypot(Gu,zu,Hu))-Ju*(zu*=Uu),Ou=Ju*(Gu*=Uu)-qu*Hu,Du=qu*zu-Yu*Gu,(Uu=Math.hypot(Vu,Ou,Du))?(Vu*=Uu=1/Uu,Ou*=Uu,Du*=Uu):(Vu=0,Ou=0,Du=0),ku=zu*Du-Hu*Ou,Fu=Hu*Vu-Gu*Du,Nu=Gu*Ou-zu*Vu,(Uu=Math.hypot(ku,Fu,Nu))?(ku*=Uu=1/Uu,Fu*=Uu,Nu*=Uu):(ku=0,Fu=0,Nu=0),Pu[0]=Vu,Pu[1]=ku,Pu[2]=Gu,Pu[3]=0,Pu[4]=Ou,Pu[5]=Fu,Pu[6]=zu,Pu[7]=0,Pu[8]=Du,Pu[9]=Nu,Pu[10]=Hu,Pu[11]=0,Pu[12]=-(Vu*ju+Ou*Wu+Du*Qu),Pu[13]=-(ku*ju+Fu*Wu+Nu*Qu),Pu[14]=-(Gu*ju+zu*Wu+Hu*Qu),Pu[15]=1)}(this,$u,Tu=Tu||[0,0,0],Cu=Cu||[0,1,0]),this.check()}ortho({left:$u,right:Tu,bottom:Cu,top:Pu,near:Ru=.1,far:Lu=500}){return function(Bu,Vu,Ou,Du,ku,Fu,Nu){var Gu=1/(Vu-Ou),zu=1/(Du-ku),Hu=1/(Fu-Nu);Bu[0]=-2*Gu,Bu[1]=0,Bu[2]=0,Bu[3]=0,Bu[4]=0,Bu[5]=-2*zu,Bu[6]=0,Bu[7]=0,Bu[8]=0,Bu[9]=0,Bu[10]=2*Hu,Bu[11]=0,Bu[12]=(Vu+Ou)*Gu,Bu[13]=(ku+Du)*zu,Bu[14]=(Nu+Fu)*Hu,Bu[15]=1}(this,$u,Tu,Cu,Pu,Ru,Lu),this.check()}orthographic({fovy:$u=45*Math.PI/180,aspect:Tu=1,focalDistance:Cu=1,near:Pu=.1,far:Ru=500}){if($u>2*Math.PI)throw Error("radians");const Lu=$u/2,Bu=Cu*Math.tan(Lu),Vu=Bu*Tu;return new Tn().ortho({left:-Vu,right:Vu,bottom:-Bu,top:Bu,near:Pu,far:Ru})}perspective({fovy:$u,fov:Tu=45*Math.PI/180,aspect:Cu=1,near:Pu=.1,far:Ru=500}={}){if(($u=$u||Tu)>2*Math.PI)throw Error("radians");return function(Lu,Bu,Vu,Ou,Du){var ku,Fu=1/Math.tan(Bu/2);Lu[0]=Fu/Vu,Lu[1]=0,Lu[2]=0,Lu[3]=0,Lu[4]=0,Lu[5]=Fu,Lu[6]=0,Lu[7]=0,Lu[8]=0,Lu[9]=0,Lu[11]=-1,Lu[12]=0,Lu[13]=0,Lu[15]=0,Du!=null&&Du!==1/0?(ku=1/(Ou-Du),Lu[10]=(Du+Ou)*ku,Lu[14]=2*Du*Ou*ku):(Lu[10]=-1,Lu[14]=-2*Ou)}(this,$u,Cu,Pu,Ru),this.check()}determinant(){return Tu=($u=this)[0],Cu=$u[1],Pu=$u[2],Ru=$u[3],Lu=$u[4],Bu=$u[5],Vu=$u[6],Ou=$u[7],Du=$u[8],ku=$u[9],Fu=$u[10],Nu=$u[11],Gu=$u[12],zu=$u[13],Hu=$u[14],Uu=$u[15],(Tu*Bu-Cu*Lu)*(Fu*Uu-Nu*Hu)-(Tu*Vu-Pu*Lu)*(ku*Uu-Nu*zu)+(Tu*Ou-Ru*Lu)*(ku*Hu-Fu*zu)+(Cu*Vu-Pu*Bu)*(Du*Uu-Nu*Gu)-(Cu*Ou-Ru*Bu)*(Du*Hu-Fu*Gu)+(Pu*Ou-Ru*Vu)*(Du*zu-ku*Gu);var $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Uu}getScale($u=[-0,-0,-0]){return $u[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),$u[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),$u[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),$u}getTranslation($u=[-0,-0,-0]){return $u[0]=this[12],$u[1]=this[13],$u[2]=this[14],$u}getRotation($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Tu=null){const Cu=this.getScale(Tu||[-0,-0,-0]),Pu=1/Cu[0],Ru=1/Cu[1],Lu=1/Cu[2];return $u[0]=this[0]*Pu,$u[1]=this[1]*Ru,$u[2]=this[2]*Lu,$u[3]=0,$u[4]=this[4]*Pu,$u[5]=this[5]*Ru,$u[6]=this[6]*Lu,$u[7]=0,$u[8]=this[8]*Pu,$u[9]=this[9]*Ru,$u[10]=this[10]*Lu,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,$u}getRotationMatrix3($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0],Tu=null){const Cu=this.getScale(Tu||[-0,-0,-0]),Pu=1/Cu[0],Ru=1/Cu[1],Lu=1/Cu[2];return $u[0]=this[0]*Pu,$u[1]=this[1]*Ru,$u[2]=this[2]*Lu,$u[3]=this[4]*Pu,$u[4]=this[5]*Ru,$u[5]=this[6]*Lu,$u[6]=this[8]*Pu,$u[7]=this[9]*Ru,$u[8]=this[10]*Lu,$u}transpose(){return function($u,Tu){if($u===Tu){var Cu=Tu[1],Pu=Tu[2],Ru=Tu[3],Lu=Tu[6],Bu=Tu[7],Vu=Tu[11];$u[1]=Tu[4],$u[2]=Tu[8],$u[3]=Tu[12],$u[4]=Cu,$u[6]=Tu[9],$u[7]=Tu[13],$u[8]=Pu,$u[9]=Lu,$u[11]=Tu[14],$u[12]=Ru,$u[13]=Bu,$u[14]=Vu}else $u[0]=Tu[0],$u[1]=Tu[4],$u[2]=Tu[8],$u[3]=Tu[12],$u[4]=Tu[1],$u[5]=Tu[5],$u[6]=Tu[9],$u[7]=Tu[13],$u[8]=Tu[2],$u[9]=Tu[6],$u[10]=Tu[10],$u[11]=Tu[14],$u[12]=Tu[3],$u[13]=Tu[7],$u[14]=Tu[11],$u[15]=Tu[15]}(this,this),this.check()}invert(){var $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Uu,ju,Wu,Qu,qu,Yu,Ju,_d,tp,Ku,Xu,Zu,_c,Xc,_h;return $u=this,Cu=(Tu=this)[0],Pu=Tu[1],Ru=Tu[2],Lu=Tu[3],Bu=Tu[4],Vu=Tu[5],Ou=Tu[6],Du=Tu[7],ku=Tu[8],Fu=Tu[9],Nu=Tu[10],Gu=Tu[11],zu=Tu[12],Hu=Tu[13],Uu=Tu[14],ju=Tu[15],(_h=(Wu=Cu*Vu-Pu*Bu)*(Xc=Nu*ju-Gu*Uu)-(Qu=Cu*Ou-Ru*Bu)*(_c=Fu*ju-Gu*Hu)+(qu=Cu*Du-Lu*Bu)*(Zu=Fu*Uu-Nu*Hu)+(Yu=Pu*Ou-Ru*Vu)*(Xu=ku*ju-Gu*zu)-(Ju=Pu*Du-Lu*Vu)*(Ku=ku*Uu-Nu*zu)+(_d=Ru*Du-Lu*Ou)*(tp=ku*Hu-Fu*zu))&&(_h=1/_h,$u[0]=(Vu*Xc-Ou*_c+Du*Zu)*_h,$u[1]=(Ru*_c-Pu*Xc-Lu*Zu)*_h,$u[2]=(Hu*_d-Uu*Ju+ju*Yu)*_h,$u[3]=(Nu*Ju-Fu*_d-Gu*Yu)*_h,$u[4]=(Ou*Xu-Bu*Xc-Du*Ku)*_h,$u[5]=(Cu*Xc-Ru*Xu+Lu*Ku)*_h,$u[6]=(Uu*qu-zu*_d-ju*Qu)*_h,$u[7]=(ku*_d-Nu*qu+Gu*Qu)*_h,$u[8]=(Bu*_c-Vu*Xu+Du*tp)*_h,$u[9]=(Pu*Xu-Cu*_c-Lu*tp)*_h,$u[10]=(zu*Ju-Hu*qu+ju*Wu)*_h,$u[11]=(Fu*qu-ku*Ju-Gu*Wu)*_h,$u[12]=(Vu*Ku-Bu*Zu-Ou*tp)*_h,$u[13]=(Cu*Zu-Pu*Ku+Ru*tp)*_h,$u[14]=(Hu*Qu-zu*Yu-Uu*Wu)*_h,$u[15]=(ku*Yu-Fu*Qu+Nu*Wu)*_h),this.check()}multiplyLeft($u){return En(this,$u,this),this.check()}multiplyRight($u){return En(this,this,$u),this.check()}rotateX($u){var Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu;return Tu=this,Cu=this,Pu=$u,Ru=Math.sin(Pu),Lu=Math.cos(Pu),Bu=Cu[4],Vu=Cu[5],Ou=Cu[6],Du=Cu[7],ku=Cu[8],Fu=Cu[9],Nu=Cu[10],Gu=Cu[11],Cu!==Tu&&(Tu[0]=Cu[0],Tu[1]=Cu[1],Tu[2]=Cu[2],Tu[3]=Cu[3],Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],Tu[15]=Cu[15]),Tu[4]=Bu*Lu+ku*Ru,Tu[5]=Vu*Lu+Fu*Ru,Tu[6]=Ou*Lu+Nu*Ru,Tu[7]=Du*Lu+Gu*Ru,Tu[8]=ku*Lu-Bu*Ru,Tu[9]=Fu*Lu-Vu*Ru,Tu[10]=Nu*Lu-Ou*Ru,Tu[11]=Gu*Lu-Du*Ru,this.check()}rotateY($u){var Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu;return Tu=this,Cu=this,Pu=$u,Ru=Math.sin(Pu),Lu=Math.cos(Pu),Bu=Cu[0],Vu=Cu[1],Ou=Cu[2],Du=Cu[3],ku=Cu[8],Fu=Cu[9],Nu=Cu[10],Gu=Cu[11],Cu!==Tu&&(Tu[4]=Cu[4],Tu[5]=Cu[5],Tu[6]=Cu[6],Tu[7]=Cu[7],Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],Tu[15]=Cu[15]),Tu[0]=Bu*Lu-ku*Ru,Tu[1]=Vu*Lu-Fu*Ru,Tu[2]=Ou*Lu-Nu*Ru,Tu[3]=Du*Lu-Gu*Ru,Tu[8]=Bu*Ru+ku*Lu,Tu[9]=Vu*Ru+Fu*Lu,Tu[10]=Ou*Ru+Nu*Lu,Tu[11]=Du*Ru+Gu*Lu,this.check()}rotateZ($u){var Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu;return Tu=this,Cu=this,Pu=$u,Ru=Math.sin(Pu),Lu=Math.cos(Pu),Bu=Cu[0],Vu=Cu[1],Ou=Cu[2],Du=Cu[3],ku=Cu[4],Fu=Cu[5],Nu=Cu[6],Gu=Cu[7],Cu!==Tu&&(Tu[8]=Cu[8],Tu[9]=Cu[9],Tu[10]=Cu[10],Tu[11]=Cu[11],Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],Tu[15]=Cu[15]),Tu[0]=Bu*Lu+ku*Ru,Tu[1]=Vu*Lu+Fu*Ru,Tu[2]=Ou*Lu+Nu*Ru,Tu[3]=Du*Lu+Gu*Ru,Tu[4]=ku*Lu-Bu*Ru,Tu[5]=Fu*Lu-Vu*Ru,Tu[6]=Nu*Lu-Ou*Ru,Tu[7]=Gu*Lu-Du*Ru,this.check()}rotateXYZ([$u,Tu,Cu]){return this.rotateX($u).rotateY(Tu).rotateZ(Cu)}rotateAxis($u,Tu){return function(Cu,Pu,Ru,Lu){var Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Uu,ju,Wu,Qu,qu,Yu,Ju,_d,tp,Ku,Xu,Zu,_c,Xc,_h=Lu[0],ip=Lu[1],ap=Lu[2],hp=Math.hypot(_h,ip,ap);hp<1e-6||(_h*=hp=1/hp,ip*=hp,ap*=hp,Bu=Math.sin(Ru),Ou=1-(Vu=Math.cos(Ru)),Du=Pu[0],ku=Pu[1],Fu=Pu[2],Nu=Pu[3],Gu=Pu[4],zu=Pu[5],Hu=Pu[6],Uu=Pu[7],ju=Pu[8],Wu=Pu[9],Qu=Pu[10],qu=Pu[11],Yu=_h*_h*Ou+Vu,Ju=ip*_h*Ou+ap*Bu,_d=ap*_h*Ou-ip*Bu,tp=_h*ip*Ou-ap*Bu,Ku=ip*ip*Ou+Vu,Xu=ap*ip*Ou+_h*Bu,Zu=_h*ap*Ou+ip*Bu,_c=ip*ap*Ou-_h*Bu,Xc=ap*ap*Ou+Vu,Cu[0]=Du*Yu+Gu*Ju+ju*_d,Cu[1]=ku*Yu+zu*Ju+Wu*_d,Cu[2]=Fu*Yu+Hu*Ju+Qu*_d,Cu[3]=Nu*Yu+Uu*Ju+qu*_d,Cu[4]=Du*tp+Gu*Ku+ju*Xu,Cu[5]=ku*tp+zu*Ku+Wu*Xu,Cu[6]=Fu*tp+Hu*Ku+Qu*Xu,Cu[7]=Nu*tp+Uu*Ku+qu*Xu,Cu[8]=Du*Zu+Gu*_c+ju*Xc,Cu[9]=ku*Zu+zu*_c+Wu*Xc,Cu[10]=Fu*Zu+Hu*_c+Qu*Xc,Cu[11]=Nu*Zu+Uu*_c+qu*Xc,Pu!==Cu&&(Cu[12]=Pu[12],Cu[13]=Pu[13],Cu[14]=Pu[14],Cu[15]=Pu[15]))}(this,this,$u,Tu),this.check()}scale($u){return Array.isArray($u)?Mn(this,this,$u):Mn(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Tu,Cu,Pu){var Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Uu=Pu[0],ju=Pu[1],Wu=Pu[2];Cu===Tu?(Tu[12]=Cu[0]*Uu+Cu[4]*ju+Cu[8]*Wu+Cu[12],Tu[13]=Cu[1]*Uu+Cu[5]*ju+Cu[9]*Wu+Cu[13],Tu[14]=Cu[2]*Uu+Cu[6]*ju+Cu[10]*Wu+Cu[14],Tu[15]=Cu[3]*Uu+Cu[7]*ju+Cu[11]*Wu+Cu[15]):(Ru=Cu[0],Lu=Cu[1],Bu=Cu[2],Vu=Cu[3],Ou=Cu[4],Du=Cu[5],ku=Cu[6],Fu=Cu[7],Nu=Cu[8],Gu=Cu[9],zu=Cu[10],Hu=Cu[11],Tu[0]=Ru,Tu[1]=Lu,Tu[2]=Bu,Tu[3]=Vu,Tu[4]=Ou,Tu[5]=Du,Tu[6]=ku,Tu[7]=Fu,Tu[8]=Nu,Tu[9]=Gu,Tu[10]=zu,Tu[11]=Hu,Tu[12]=Ru*Uu+Ou*ju+Nu*Wu+Cu[12],Tu[13]=Lu*Uu+Du*ju+Gu*Wu+Cu[13],Tu[14]=Bu*Uu+ku*ju+zu*Wu+Cu[14],Tu[15]=Vu*Uu+Fu*ju+Hu*Wu+Cu[15])}(this,this,$u),this.check()}transform($u,Tu){return $u.length===4?(en(Tu=function(Cu,Pu,Ru){var Lu=Pu[0],Bu=Pu[1],Vu=Pu[2],Ou=Pu[3];return Cu[0]=Ru[0]*Lu+Ru[4]*Bu+Ru[8]*Vu+Ru[12]*Ou,Cu[1]=Ru[1]*Lu+Ru[5]*Bu+Ru[9]*Vu+Ru[13]*Ou,Cu[2]=Ru[2]*Lu+Ru[6]*Bu+Ru[10]*Vu+Ru[14]*Ou,Cu[3]=Ru[3]*Lu+Ru[7]*Bu+Ru[11]*Vu+Ru[15]*Ou,Cu}(Tu||[-0,-0,-0,-0],$u,this),4),Tu):this.transformAsPoint($u,Tu)}transformAsPoint($u,Tu){const{length:Cu}=$u;switch(Cu){case 2:Pu=Tu||[-0,-0],Lu=this,Bu=(Ru=$u)[0],Vu=Ru[1],Pu[0]=Lu[0]*Bu+Lu[4]*Vu+Lu[12],Pu[1]=Lu[1]*Bu+Lu[5]*Vu+Lu[13],Tu=Pu;break;case 3:Tu=hn(Tu||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}var Pu,Ru,Lu,Bu,Vu;return en(Tu,$u.length),Tu}transformAsVector($u,Tu){switch($u.length){case 2:Tu=function(Cu,Pu,Ru){const Lu=Pu[0],Bu=Pu[1],Vu=Ru[3]*Lu+Ru[7]*Bu||1;return Cu[0]=(Ru[0]*Lu+Ru[4]*Bu)/Vu,Cu[1]=(Ru[1]*Lu+Ru[5]*Bu)/Vu,Cu}(Tu||[-0,-0],$u,this);break;case 3:Tu=pn(Tu||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en(Tu,$u.length),Tu}makeRotationX($u){return this.identity().rotateX($u)}makeTranslation($u,Tu,Cu){return this.identity().translate([$u,Tu,Cu])}transformPoint($u,Tu){return nn("Matrix4.transformPoint","3.0"),this.transformAsPoint($u,Tu)}transformVector($u,Tu){return nn("Matrix4.transformVector","3.0"),this.transformAsPoint($u,Tu)}transformDirection($u,Tu){return nn("Matrix4.transformDirection","3.0"),this.transformAsVector($u,Tu)}}var Pn=new gn,Rn=new gn,kn=function(){function _u($u,Tu){$u===void 0&&($u=[0,0,1]),Tu===void 0&&(Tu=0),this.normal=new gn,this.distance=-0,this.fromNormalDistance($u,Tu)}return _u.prototype.fromNormalDistance=function($u,Tu){return this.normal.from($u).normalize(),this.distance=Tu,this},_u.prototype.fromPointNormal=function($u,Tu){$u=Pn.from($u),this.normal.from(Tu).normalize();var Cu=-this.normal.dot($u);return this.distance=Cu,this},_u.prototype.fromCoefficients=function($u,Tu,Cu,Pu){return this.normal.set($u,Tu,Cu),this.distance=Pu,this},_u.prototype.clone=function(){return new _u(this.normal,this.distance)},_u.prototype.equals=function($u){return this.distance===$u.distance&&this.normal.equals($u.normal)},_u.prototype.getPointDistance=function($u){return this.normal.dot($u)+this.distance},_u.prototype.transform=function($u){var Tu=Rn.copy(this.normal).transformAsVector($u).normalize(),Cu=this.normal.scale(-this.distance).transform($u);return this.fromPointNormal(Cu,Tu)},_u.prototype.projectPointOntoPlane=function($u,Tu){Tu===void 0&&(Tu=[0,0,0]),$u=Pn.from($u);var Cu=this.getPointDistance($u),Pu=Rn.copy(this.normal).scale(Cu);return $u.subtract(Pu).to(Tu)},_u}(),Dn=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ln=[new gn([1,0,0]),new gn([0,1,0]),new gn([0,0,1])],On=new gn,Nn=new gn,Fn=function(){function _u($u){$u===void 0&&($u=[]),this.planes=$u}return Object.defineProperty(_u,"MASK_OUTSIDE",{get:function(){return 4294967295},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INSIDE",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INDETERMINATE",{get:function(){return 2147483647},enumerable:!1,configurable:!0}),_u.prototype.fromBoundingSphere=function($u){this.planes.length=2*Ln.length;for(var Tu=$u.center,Cu=$u.radius,Pu=0,Ru=0,Lu=Ln;Ru<Lu.length;Ru++){var Bu=Lu[Ru],Vu=this.planes[Pu],Ou=this.planes[Pu+1];Vu||(Vu=this.planes[Pu]=new kn),Ou||(Ou=this.planes[Pu+1]=new kn);var Du=On.copy(Bu).scale(-Cu).add(Tu);Vu.fromPointNormal(Du,Bu);var ku=On.copy(Bu).scale(Cu).add(Tu),Fu=Nn.copy(Bu).negate();Ou.fromPointNormal(ku,Fu),Pu+=2}return this},_u.prototype.computeVisibilityWithPlaneMask=function($u,Tu){if(Tu===_u.MASK_OUTSIDE||Tu===_u.MASK_INSIDE)return Tu;for(var Cu=_u.MASK_INSIDE,Pu=this.planes,Ru=0;Ru<this.planes.length;++Ru){var Lu=Ru<31?1<<Ru:0;if(!(Ru<31&&(Tu&Lu)==0)){var Bu=Pu[Ru],Vu=$u.intersectPlane(Bu);if(Vu===Dn.OUTSIDE)return _u.MASK_OUTSIDE;Vu===Dn.INTERSECTING&&(Cu|=Lu)}}return Cu},_u}();function Qn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Ru=$u[2],Lu=$u[3],Bu=$u[4],Vu=$u[5],Ou=$u[6],Du=$u[7],ku=$u[8],Fu=Tu[0],Nu=Tu[1],Gu=Tu[2],zu=Tu[3],Hu=Tu[4],Uu=Tu[5],ju=Tu[6],Wu=Tu[7],Qu=Tu[8];return _u[0]=Fu*Cu+Nu*Lu+Gu*Ou,_u[1]=Fu*Pu+Nu*Bu+Gu*Du,_u[2]=Fu*Ru+Nu*Vu+Gu*ku,_u[3]=zu*Cu+Hu*Lu+Uu*Ou,_u[4]=zu*Pu+Hu*Bu+Uu*Du,_u[5]=zu*Ru+Hu*Vu+Uu*ku,_u[6]=ju*Cu+Wu*Lu+Qu*Ou,_u[7]=ju*Pu+Wu*Bu+Qu*Du,_u[8]=ju*Ru+Wu*Vu+Qu*ku,_u}function Vn(_u,$u,Tu){var Cu=Tu[0],Pu=Tu[1];return _u[0]=Cu*$u[0],_u[1]=Cu*$u[1],_u[2]=Cu*$u[2],_u[3]=Pu*$u[3],_u[4]=Pu*$u[4],_u[5]=Pu*$u[5],_u[6]=$u[6],_u[7]=$u[7],_u[8]=$u[8],_u}function _n(){var _u=new on(4);return on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u[3]=1,_u}function Hn(_u,$u,Tu){Tu*=.5;var Cu=Math.sin(Tu);return _u[0]=Cu*$u[0],_u[1]=Cu*$u[1],_u[2]=Cu*$u[2],_u[3]=Math.cos(Tu),_u}function qn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Ru=$u[2],Lu=$u[3],Bu=Tu[0],Vu=Tu[1],Ou=Tu[2],Du=Tu[3];return _u[0]=Cu*Du+Lu*Bu+Pu*Ou-Ru*Vu,_u[1]=Pu*Du+Lu*Vu+Ru*Bu-Cu*Ou,_u[2]=Ru*Du+Lu*Ou+Cu*Vu-Pu*Bu,_u[3]=Lu*Du-Cu*Bu-Pu*Vu-Ru*Ou,_u}function zn(_u,$u,Tu,Cu){var Pu,Ru,Lu,Bu,Vu,Ou=$u[0],Du=$u[1],ku=$u[2],Fu=$u[3],Nu=Tu[0],Gu=Tu[1],zu=Tu[2],Hu=Tu[3];return(Ru=Ou*Nu+Du*Gu+ku*zu+Fu*Hu)<0&&(Ru=-Ru,Nu=-Nu,Gu=-Gu,zu=-zu,Hu=-Hu),1-Ru>1e-6?(Pu=Math.acos(Ru),Lu=Math.sin(Pu),Bu=Math.sin((1-Cu)*Pu)/Lu,Vu=Math.sin(Cu*Pu)/Lu):(Bu=1-Cu,Vu=Cu),_u[0]=Bu*Ou+Vu*Nu,_u[1]=Bu*Du+Vu*Gu,_u[2]=Bu*ku+Vu*zu,_u[3]=Bu*Fu+Vu*Hu,_u}function Kn(_u,$u){var Tu,Cu=$u[0]+$u[4]+$u[8];if(Cu>0)Tu=Math.sqrt(Cu+1),_u[3]=.5*Tu,Tu=.5/Tu,_u[0]=($u[5]-$u[7])*Tu,_u[1]=($u[6]-$u[2])*Tu,_u[2]=($u[1]-$u[3])*Tu;else{var Pu=0;$u[4]>$u[0]&&(Pu=1),$u[8]>$u[3*Pu+Pu]&&(Pu=2);var Ru=(Pu+1)%3,Lu=(Pu+2)%3;Tu=Math.sqrt($u[3*Pu+Pu]-$u[3*Ru+Ru]-$u[3*Lu+Lu]+1),_u[Pu]=.5*Tu,Tu=.5/Tu,_u[3]=($u[3*Ru+Lu]-$u[3*Lu+Ru])*Tu,_u[Ru]=($u[3*Ru+Pu]+$u[3*Pu+Ru])*Tu,_u[Lu]=($u[3*Lu+Pu]+$u[3*Pu+Lu])*Tu}return _u}var Un,jn,Gn,Wn,Xn=function(_u,$u,Tu){return _u[0]=$u[0]+Tu[0],_u[1]=$u[1]+Tu[1],_u[2]=$u[2]+Tu[2],_u[3]=$u[3]+Tu[3],_u},Yn=function(_u,$u,Tu){return _u[0]=$u[0]*Tu,_u[1]=$u[1]*Tu,_u[2]=$u[2]*Tu,_u[3]=$u[3]*Tu,_u},Zn=function(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]+_u[3]*$u[3]},Jn=function(_u,$u,Tu,Cu){var Pu=$u[0],Ru=$u[1],Lu=$u[2],Bu=$u[3];return _u[0]=Pu+Cu*(Tu[0]-Pu),_u[1]=Ru+Cu*(Tu[1]-Ru),_u[2]=Lu+Cu*(Tu[2]-Lu),_u[3]=Bu+Cu*(Tu[3]-Bu),_u},$n=function(_u){var $u=_u[0],Tu=_u[1],Cu=_u[2],Pu=_u[3];return Math.hypot($u,Tu,Cu,Pu)},er=function(_u){var $u=_u[0],Tu=_u[1],Cu=_u[2],Pu=_u[3];return $u*$u+Tu*Tu+Cu*Cu+Pu*Pu},tr=function(_u,$u){var Tu=$u[0],Cu=$u[1],Pu=$u[2],Ru=$u[3],Lu=Tu*Tu+Cu*Cu+Pu*Pu+Ru*Ru;return Lu>0&&(Lu=1/Math.sqrt(Lu)),_u[0]=Tu*Lu,_u[1]=Cu*Lu,_u[2]=Pu*Lu,_u[3]=Ru*Lu,_u},ir=(Un=sn(),jn=an(1,0,0),Gn=an(0,1,0),function(_u,$u,Tu){var Cu=ln($u,Tu);return Cu<-.999999?(un(Un,jn,$u),dn(Un)<1e-6&&un(Un,Gn,$u),function(Pu,Ru){var Lu=Ru[0],Bu=Ru[1],Vu=Ru[2],Ou=Lu*Lu+Bu*Bu+Vu*Vu;Ou>0&&(Ou=1/Math.sqrt(Ou)),Pu[0]=Ru[0]*Ou,Pu[1]=Ru[1]*Ou,Pu[2]=Ru[2]*Ou}(Un,Un),Hn(_u,Un,Math.PI),_u):Cu>.999999?(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=1,_u):(un(Un,$u,Tu),_u[0]=Un[0],_u[1]=Un[1],_u[2]=Un[2],_u[3]=1+Cu,tr(_u,_u))});_n(),_n(),Wn=new on(9),on!=Float32Array&&(Wn[1]=0,Wn[2]=0,Wn[3]=0,Wn[5]=0,Wn[6]=0,Wn[7]=0),Wn[0]=1,Wn[4]=1,Wn[8]=1;const nr=[0,0,0,1];class rr extends Ji{constructor($u=0,Tu=0,Cu=0,Pu=1){super(-0,-0,-0,-0),Array.isArray($u)&&arguments.length===1?this.copy($u):this.set($u,Tu,Cu,Pu)}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this.check()}set($u,Tu,Cu,Pu){return this[0]=$u,this[1]=Tu,this[2]=Cu,this[3]=Pu,this.check()}fromMatrix3($u){return Kn(this,$u),this.check()}identity(){return function($u){$u[0]=0,$u[1]=0,$u[2]=0,$u[3]=1}(this),this.check()}fromAxisRotation($u,Tu){return Hn(this,$u,Tu),this.check()}setAxisAngle($u,Tu){return this.fromAxisRotation($u,Tu)}get ELEMENTS(){return 4}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}get z(){return this[2]}set z($u){this[2]=$i($u)}get w(){return this[3]}set w($u){this[3]=$i($u)}len(){return $n(this)}lengthSquared(){return er(this)}dot($u,Tu){if(Tu!==void 0)throw new Error("Quaternion.dot only takes one argument");return Zn(this,$u)}rotationTo($u,Tu){return ir(this,$u,Tu),this.check()}add($u,Tu){if(Tu!==void 0)throw new Error("Quaternion.add only takes one argument");return Xn(this,this,$u),this.check()}calculateW(){return function($u,Tu){var Cu=Tu[0],Pu=Tu[1],Ru=Tu[2];$u[0]=Cu,$u[1]=Pu,$u[2]=Ru,$u[3]=Math.sqrt(Math.abs(1-Cu*Cu-Pu*Pu-Ru*Ru))}(this,this),this.check()}conjugate(){return function($u,Tu){$u[0]=-Tu[0],$u[1]=-Tu[1],$u[2]=-Tu[2],$u[3]=Tu[3]}(this,this),this.check()}invert(){return function($u,Tu){var Cu=Tu[0],Pu=Tu[1],Ru=Tu[2],Lu=Tu[3],Bu=Cu*Cu+Pu*Pu+Ru*Ru+Lu*Lu,Vu=Bu?1/Bu:0;$u[0]=-Cu*Vu,$u[1]=-Pu*Vu,$u[2]=-Ru*Vu,$u[3]=Lu*Vu}(this,this),this.check()}lerp($u,Tu,Cu){return Jn(this,$u,Tu,Cu),this.check()}multiplyRight($u,Tu){return Gi(!Tu),qn(this,this,$u),this.check()}multiplyLeft($u,Tu){return Gi(!Tu),qn(this,$u,this),this.check()}normalize(){const $u=this.len(),Tu=$u>0?1/$u:0;return this[0]=this[0]*Tu,this[1]=this[1]*Tu,this[2]=this[2]*Tu,this[3]=this[3]*Tu,$u===0&&(this[3]=1),this.check()}rotateX($u){return function(Tu,Cu,Pu){Pu*=.5;var Ru=Cu[0],Lu=Cu[1],Bu=Cu[2],Vu=Cu[3],Ou=Math.sin(Pu),Du=Math.cos(Pu);Tu[0]=Ru*Du+Vu*Ou,Tu[1]=Lu*Du+Bu*Ou,Tu[2]=Bu*Du-Lu*Ou,Tu[3]=Vu*Du-Ru*Ou}(this,this,$u),this.check()}rotateY($u){return function(Tu,Cu,Pu){Pu*=.5;var Ru=Cu[0],Lu=Cu[1],Bu=Cu[2],Vu=Cu[3],Ou=Math.sin(Pu),Du=Math.cos(Pu);Tu[0]=Ru*Du-Bu*Ou,Tu[1]=Lu*Du+Vu*Ou,Tu[2]=Bu*Du+Ru*Ou,Tu[3]=Vu*Du-Lu*Ou}(this,this,$u),this.check()}rotateZ($u){return function(Tu,Cu,Pu){Pu*=.5;var Ru=Cu[0],Lu=Cu[1],Bu=Cu[2],Vu=Cu[3],Ou=Math.sin(Pu),Du=Math.cos(Pu);Tu[0]=Ru*Du+Lu*Ou,Tu[1]=Lu*Du-Ru*Ou,Tu[2]=Bu*Du+Vu*Ou,Tu[3]=Vu*Du-Bu*Ou}(this,this,$u),this.check()}scale($u){return Yn(this,this,$u),this.check()}slerp($u,Tu,Cu){switch(arguments.length){case 1:({start:$u=nr,target:Tu,ratio:Cu}=arguments[0]);break;case 2:[Tu,Cu]=arguments,$u=this}return zn(this,$u,Tu,Cu),this.check()}transformVector4($u,Tu=$u){return function(Cu,Pu,Ru){var Lu=Pu[0],Bu=Pu[1],Vu=Pu[2],Ou=Ru[0],Du=Ru[1],ku=Ru[2],Fu=Ru[3],Nu=Fu*Lu+Du*Vu-ku*Bu,Gu=Fu*Bu+ku*Lu-Ou*Vu,zu=Fu*Vu+Ou*Bu-Du*Lu,Hu=-Ou*Lu-Du*Bu-ku*Vu;Cu[0]=Nu*Fu+Hu*-Ou+Gu*-ku-zu*-Du,Cu[1]=Gu*Fu+Hu*-Du+zu*-Ou-Nu*-ku,Cu[2]=zu*Fu+Hu*-ku+Nu*-Du-Gu*-Ou,Cu[3]=Pu[3]}(Tu,$u,this),en(Tu,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle($u,Tu){return this.setAxisAngle($u,Tu)}premultiply($u,Tu){return this.multiplyLeft($u,Tu)}multiply($u,Tu){return this.multiplyRight($u,Tu)}}const or=Object.freeze([1,0,0,0,1,0,0,0,1]),sr=Object.freeze([0,0,0,0,0,0,0,0,0]),ar=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),lr={};class ur extends wn$1{static get IDENTITY(){return lr.IDENTITY=lr.IDENTITY||Object.freeze(new ur(or)),lr.IDENTITY}static get ZERO(){return lr.ZERO=lr.ZERO||Object.freeze(new ur(sr)),lr.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ar}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this.check()}set($u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou){return this[0]=$u,this[1]=Tu,this[2]=Cu,this[3]=Pu,this[4]=Ru,this[5]=Lu,this[6]=Bu,this[7]=Vu,this[8]=Ou,this.check()}setRowMajor($u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou){return this[0]=$u,this[1]=Pu,this[2]=Bu,this[3]=Tu,this[4]=Ru,this[5]=Vu,this[6]=Cu,this[7]=Lu,this[8]=Ou,this.check()}determinant(){return Tu=($u=this)[0],Cu=$u[1],Pu=$u[2],Ru=$u[3],Lu=$u[4],Bu=$u[5],Vu=$u[6],Ou=$u[7],Du=$u[8],Tu*(Du*Lu-Bu*Ou)+Cu*(-Du*Ru+Bu*Vu)+Pu*(Ou*Ru-Lu*Vu);var $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du}identity(){return this.copy(or)}fromQuaternion($u){return function(Tu,Cu){var Pu=Cu[0],Ru=Cu[1],Lu=Cu[2],Bu=Cu[3],Vu=Pu+Pu,Ou=Ru+Ru,Du=Lu+Lu,ku=Pu*Vu,Fu=Ru*Vu,Nu=Ru*Ou,Gu=Lu*Vu,zu=Lu*Ou,Hu=Lu*Du,Uu=Bu*Vu,ju=Bu*Ou,Wu=Bu*Du;Tu[0]=1-Nu-Hu,Tu[3]=Fu-Wu,Tu[6]=Gu+ju,Tu[1]=Fu+Wu,Tu[4]=1-ku-Hu,Tu[7]=zu-Uu,Tu[2]=Gu-ju,Tu[5]=zu+Uu,Tu[8]=1-ku-Nu}(this,$u),this.check()}transpose(){return function($u,Tu){if($u===Tu){var Cu=Tu[1],Pu=Tu[2],Ru=Tu[5];$u[1]=Tu[3],$u[2]=Tu[6],$u[3]=Cu,$u[5]=Tu[7],$u[6]=Pu,$u[7]=Ru}else $u[0]=Tu[0],$u[1]=Tu[3],$u[2]=Tu[6],$u[3]=Tu[1],$u[4]=Tu[4],$u[5]=Tu[7],$u[6]=Tu[2],$u[7]=Tu[5],$u[8]=Tu[8]}(this,this),this.check()}invert(){return function($u,Tu){var Cu=Tu[0],Pu=Tu[1],Ru=Tu[2],Lu=Tu[3],Bu=Tu[4],Vu=Tu[5],Ou=Tu[6],Du=Tu[7],ku=Tu[8],Fu=ku*Bu-Vu*Du,Nu=-ku*Lu+Vu*Ou,Gu=Du*Lu-Bu*Ou,zu=Cu*Fu+Pu*Nu+Ru*Gu;zu&&(zu=1/zu,$u[0]=Fu*zu,$u[1]=(-ku*Pu+Ru*Du)*zu,$u[2]=(Vu*Pu-Ru*Bu)*zu,$u[3]=Nu*zu,$u[4]=(ku*Cu-Ru*Ou)*zu,$u[5]=(-Vu*Cu+Ru*Lu)*zu,$u[6]=Gu*zu,$u[7]=(-Du*Cu+Pu*Ou)*zu,$u[8]=(Bu*Cu-Pu*Lu)*zu)}(this,this),this.check()}multiplyLeft($u){return Qn(this,$u,this),this.check()}multiplyRight($u){return Qn(this,this,$u),this.check()}rotate($u){return function(Tu,Cu,Pu){var Ru=Cu[0],Lu=Cu[1],Bu=Cu[2],Vu=Cu[3],Ou=Cu[4],Du=Cu[5],ku=Cu[6],Fu=Cu[7],Nu=Cu[8],Gu=Math.sin(Pu),zu=Math.cos(Pu);Tu[0]=zu*Ru+Gu*Vu,Tu[1]=zu*Lu+Gu*Ou,Tu[2]=zu*Bu+Gu*Du,Tu[3]=zu*Vu-Gu*Ru,Tu[4]=zu*Ou-Gu*Lu,Tu[5]=zu*Du-Gu*Bu,Tu[6]=ku,Tu[7]=Fu,Tu[8]=Nu}(this,this,$u),this.check()}scale($u){return Array.isArray($u)?Vn(this,this,$u):Vn(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Tu,Cu,Pu){var Ru=Cu[0],Lu=Cu[1],Bu=Cu[2],Vu=Cu[3],Ou=Cu[4],Du=Cu[5],ku=Cu[6],Fu=Cu[7],Nu=Cu[8],Gu=Pu[0],zu=Pu[1];Tu[0]=Ru,Tu[1]=Lu,Tu[2]=Bu,Tu[3]=Vu,Tu[4]=Ou,Tu[5]=Du,Tu[6]=Gu*Ru+zu*Vu+ku,Tu[7]=Gu*Lu+zu*Ou+Fu,Tu[8]=Gu*Bu+zu*Du+Nu}(this,this,$u),this.check()}transform($u,Tu){switch($u.length){case 2:Tu=function(Cu,Pu,Ru){var Lu=Pu[0],Bu=Pu[1];return Cu[0]=Ru[0]*Lu+Ru[3]*Bu+Ru[6],Cu[1]=Ru[1]*Lu+Ru[4]*Bu+Ru[7],Cu}(Tu||[-0,-0],$u,this);break;case 3:Tu=cn(Tu||[-0,-0,-0],$u,this);break;case 4:Tu=function(Cu,Pu,Ru){const Lu=Pu[0],Bu=Pu[1],Vu=Pu[2];return Cu[0]=Ru[0]*Lu+Ru[3]*Bu+Ru[6]*Vu,Cu[1]=Ru[1]*Lu+Ru[4]*Bu+Ru[7]*Vu,Cu[2]=Ru[2]*Lu+Ru[5]*Bu+Ru[8]*Vu,Cu[3]=Pu[3],Cu}(Tu||[-0,-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en(Tu,$u.length),Tu}transformVector($u,Tu){return nn("Matrix3.transformVector"),this.transform($u,Tu)}transformVector2($u,Tu){return nn("Matrix3.transformVector"),this.transform($u,Tu)}transformVector3($u,Tu){return nn("Matrix3.transformVector"),this.transform($u,Tu)}}var hr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),cr=new gn,dr=new gn,pr=function(){function _u($u,Tu){$u===void 0&&($u=[0,0,0]),Tu===void 0&&(Tu=0),this.radius=-0,this.center=new gn,this.fromCenterRadius($u,Tu)}return _u.prototype.fromCenterRadius=function($u,Tu){return this.center.from($u),this.radius=Tu,this},_u.prototype.fromCornerPoints=function($u,Tu){return Tu=cr.from(Tu),this.center=new gn().from($u).add(Tu).scale(.5),this.radius=this.center.distance(Tu),this},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.radius===$u.radius},_u.prototype.clone=function(){return new _u(this.center,this.radius)},_u.prototype.union=function($u){var Tu=this.center,Cu=this.radius,Pu=$u.center,Ru=$u.radius,Lu=cr.copy(Pu).subtract(Tu),Bu=Lu.magnitude();if(Cu>=Bu+Ru)return this.clone();if(Ru>=Bu+Cu)return $u.clone();var Vu=.5*(Cu+Bu+Ru);return dr.copy(Lu).scale((-Cu+Vu)/Bu).add(Tu),this.center.copy(dr),this.radius=Vu,this},_u.prototype.expand=function($u){var Tu=($u=cr.from($u)).subtract(this.center).magnitude();return Tu>this.radius&&(this.radius=Tu),this},_u.prototype.transform=function($u){this.center.transform($u);var Tu=function(Cu,Pu){var Ru=Pu[0],Lu=Pu[1],Bu=Pu[2],Vu=Pu[4],Ou=Pu[5],Du=Pu[6],ku=Pu[8],Fu=Pu[9],Nu=Pu[10];return Cu[0]=Math.hypot(Ru,Lu,Bu),Cu[1]=Math.hypot(Vu,Ou,Du),Cu[2]=Math.hypot(ku,Fu,Nu),Cu}(cr,$u);return this.radius=Math.max(Tu[0],Math.max(Tu[1],Tu[2]))*this.radius,this},_u.prototype.distanceSquaredTo=function($u){var Tu=this.distanceTo($u);return Tu*Tu},_u.prototype.distanceTo=function($u){var Tu=($u=cr.from($u)).subtract(this.center);return Math.max(0,Tu.len()-this.radius)},_u.prototype.intersectPlane=function($u){var Tu=this.center,Cu=this.radius,Pu=$u.normal.dot(Tu)+$u.distance;return Pu<-Cu?hr.OUTSIDE:Pu<Cu?hr.INTERSECTING:hr.INSIDE},_u}(),fr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ar=new gn,gr=new gn,mr=new gn,vr=new gn,yr=new gn,br=new gn,xr=new gn,wr=0,Er=1,Mr=2,Ir=3,Sr=4,Cr=5,Br=6,Tr=7,Pr=8,Rr=function(){function _u($u,Tu){$u===void 0&&($u=[0,0,0]),Tu===void 0&&(Tu=[0,0,0,0,0,0,0,0,0]),this.center=new gn().from($u),this.halfAxes=new ur(Tu)}return Object.defineProperty(_u.prototype,"halfSize",{get:function(){var $u=this.halfAxes.getColumn(0),Tu=this.halfAxes.getColumn(1),Cu=this.halfAxes.getColumn(2);return[new gn($u).len(),new gn(Tu).len(),new gn(Cu).len()]},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"quaternion",{get:function(){var $u=this.halfAxes.getColumn(0),Tu=this.halfAxes.getColumn(1),Cu=this.halfAxes.getColumn(2),Pu=new gn($u).normalize(),Ru=new gn(Tu).normalize(),Lu=new gn(Cu).normalize();return new rr().fromMatrix3(new ur(t$h.__spreadArray(t$h.__spreadArray(t$h.__spreadArray([],Pu,!0),Ru,!0),Lu,!0)))},enumerable:!1,configurable:!0}),_u.prototype.fromCenterHalfSizeQuaternion=function($u,Tu,Cu){var Pu=new rr(Cu),Ru=new ur().fromQuaternion(Pu);return Ru[0]=Ru[0]*Tu[0],Ru[1]=Ru[1]*Tu[0],Ru[2]=Ru[2]*Tu[0],Ru[3]=Ru[3]*Tu[1],Ru[4]=Ru[4]*Tu[1],Ru[5]=Ru[5]*Tu[1],Ru[6]=Ru[6]*Tu[2],Ru[7]=Ru[7]*Tu[2],Ru[8]=Ru[8]*Tu[2],this.center=new gn().from($u),this.halfAxes=Ru,this},_u.prototype.clone=function(){return new _u(this.center,this.halfAxes)},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.halfAxes.equals($u.halfAxes)},_u.prototype.getBoundingSphere=function($u){$u===void 0&&($u=new pr);var Tu=this.halfAxes,Cu=Tu.getColumn(0,mr),Pu=Tu.getColumn(1,vr),Ru=Tu.getColumn(2,yr),Lu=Ar.copy(Cu).add(Pu).add(Ru);return $u.center.copy(this.center),$u.radius=Lu.magnitude(),$u},_u.prototype.intersectPlane=function($u){var Tu=this.center,Cu=$u.normal,Pu=this.halfAxes,Ru=Cu.x,Lu=Cu.y,Bu=Cu.z,Vu=Math.abs(Ru*Pu[wr]+Lu*Pu[Er]+Bu*Pu[Mr])+Math.abs(Ru*Pu[Ir]+Lu*Pu[Sr]+Bu*Pu[Cr])+Math.abs(Ru*Pu[Br]+Lu*Pu[Tr]+Bu*Pu[Pr]),Ou=Cu.dot(Tu)+$u.distance;return Ou<=-Vu?fr.OUTSIDE:Ou>=Vu?fr.INSIDE:fr.INTERSECTING},_u.prototype.distanceTo=function($u){return Math.sqrt(this.distanceSquaredTo($u))},_u.prototype.distanceSquaredTo=function($u){var Tu=gr.from($u).subtract(this.center),Cu=this.halfAxes,Pu=Cu.getColumn(0,mr),Ru=Cu.getColumn(1,vr),Lu=Cu.getColumn(2,yr),Bu=Pu.magnitude(),Vu=Ru.magnitude(),Ou=Lu.magnitude();Pu.normalize(),Ru.normalize(),Lu.normalize();var Du,ku=0;return(Du=Math.abs(Tu.dot(Pu))-Bu)>0&&(ku+=Du*Du),(Du=Math.abs(Tu.dot(Ru))-Vu)>0&&(ku+=Du*Du),(Du=Math.abs(Tu.dot(Lu))-Ou)>0&&(ku+=Du*Du),ku},_u.prototype.computePlaneDistances=function($u,Tu,Cu){Cu===void 0&&(Cu=[-0,-0]);var Pu=Number.POSITIVE_INFINITY,Ru=Number.NEGATIVE_INFINITY,Lu=this.center,Bu=this.halfAxes,Vu=Bu.getColumn(0,mr),Ou=Bu.getColumn(1,vr),Du=Bu.getColumn(2,yr),ku=br.copy(Vu).add(Ou).add(Du).add(Lu),Fu=xr.copy(ku).subtract($u),Nu=Tu.dot(Fu);return Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),ku.copy(Lu).add(Vu).add(Ou).subtract(Du),Fu.copy(ku).subtract($u),Nu=Tu.dot(Fu),Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),ku.copy(Lu).add(Vu).subtract(Ou).add(Du),Fu.copy(ku).subtract($u),Nu=Tu.dot(Fu),Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),ku.copy(Lu).add(Vu).subtract(Ou).subtract(Du),Fu.copy(ku).subtract($u),Nu=Tu.dot(Fu),Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),Lu.copy(ku).subtract(Vu).add(Ou).add(Du),Fu.copy(ku).subtract($u),Nu=Tu.dot(Fu),Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),Lu.copy(ku).subtract(Vu).add(Ou).subtract(Du),Fu.copy(ku).subtract($u),Nu=Tu.dot(Fu),Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),Lu.copy(ku).subtract(Vu).subtract(Ou).add(Du),Fu.copy(ku).subtract($u),Nu=Tu.dot(Fu),Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),Lu.copy(ku).subtract(Vu).subtract(Ou).subtract(Du),Fu.copy(ku).subtract($u),Nu=Tu.dot(Fu),Pu=Math.min(Nu,Pu),Ru=Math.max(Nu,Ru),Cu[0]=Pu,Cu[1]=Ru,Cu},_u.prototype.transform=function($u){this.center.transformAsPoint($u);var Tu=this.halfAxes.getColumn(0,mr);Tu.transformAsPoint($u);var Cu=this.halfAxes.getColumn(1,vr);Cu.transformAsPoint($u);var Pu=this.halfAxes.getColumn(2,yr);return Pu.transformAsPoint($u),this.halfAxes=new ur(t$h.__spreadArray(t$h.__spreadArray(t$h.__spreadArray([],Tu,!0),Cu,!0),Pu,!0)),this},_u}();function kr(_u,$u){if(_u.box)return function(Tu,Cu){var Pu=new gn(Tu[0],Tu[1],Tu[2]);Cu.transform(Pu,Pu);var Ru=[];if(Tu.length===10){var Lu=Tu.slice(3,6),Bu=new rr;Bu.fromArray(Tu,6);var Vu=new gn([1,0,0]),Ou=new gn([0,1,0]),Du=new gn([0,0,1]);Vu.transformByQuaternion(Bu),Vu.scale(Lu[0]),Ou.transformByQuaternion(Bu),Ou.scale(Lu[1]),Du.transformByQuaternion(Bu),Du.scale(Lu[2]),Ru=t$h.__spreadArray(t$h.__spreadArray(t$h.__spreadArray([],Vu.toArray(),!0),Ou.toArray(),!0),Du.toArray(),!0)}else Ru=t$h.__spreadArray(t$h.__spreadArray(t$h.__spreadArray([],Tu.slice(3,6),!0),Tu.slice(6,9),!0),Tu.slice(9,12),!0);var ku=Cu.transformAsVector(Ru.slice(0,3),[0,0,0]),Fu=Cu.transformAsVector(Ru.slice(3,6),[0,0,0]),Nu=Cu.transformAsVector(Ru.slice(6,9),[0,0,0]),Gu=new ur([ku[0],ku[1],ku[2],Fu[0],Fu[1],Fu[2],Nu[0],Nu[1],Nu[2]]);return new Rr(Pu,Gu)}(_u.box,$u);throw new Error("3D Tile: boundingVolume must only can be box")}function Dr(_u,$u){if(_u.dynamicScreenSpaceError&&_u.dynamicScreenSpaceErrorComputedDensity){var Tu=_u.dynamicScreenSpaceErrorComputedDensity,Cu=_u.dynamicScreenSpaceErrorFactor;return function(Pu,Ru){var Lu=Pu*Ru;return 1-Math.exp(-Lu*Lu)}($u,Tu)*Cu}return 0}function Lr(_u,$u,Tu){var Cu=new TextDecoder("utf8"),Pu=new Uint8Array(_u,$u,Tu);return Cu.decode(Pu)}function Or(_u,$u,Tu){return Tu===void 0&&(Tu=0),Tu=function(Cu,Pu,Ru){Ru===void 0&&(Ru=0);var Lu=Cu.header,Bu=Lu.featureTableJsonByteLength,Vu=Lu.featureTableBinaryByteLength,Ou=Lu.batchLength;if(Cu.featureTableJson={BATCH_LENGTH:Ou||0},Bu>0){var Du=Lr(Pu,Ru,Bu);Cu.featureTableJson=JSON.parse(Du)}return Ru+=Bu,Cu.featureTableBinary=new Uint8Array(Pu,Ru,Vu),Ru+=Vu}(_u,$u,Tu),Tu=function(Cu,Pu,Ru){Ru===void 0&&(Ru=0);var Lu=Cu.header,Bu=Lu.batchTableJsonByteLength,Vu=Lu.batchTableBinaryByteLength;if(Bu>0){var Ou=Lr(Pu,Ru,Bu);Cu.batchTableJson=JSON.parse(Ou),Ru+=Bu,Vu>0&&(Cu.batchTableBinary=new Uint8Array(Pu,Ru,Vu),Cu.batchTableBinary=new Uint8Array(Cu.batchTableBinary),Ru+=Vu)}return Ru}(_u,$u,Tu)}function Nr(_u,$u,Tu){Tu===void 0&&(Tu=0);var Cu=_u.byteOffset+_u.byteLength-Tu;if(Cu===0)throw new Error("glTF byte length must be greater than 0.");return _u.rotateYtoZ=!0,_u.gltfUpAxis="Y",_u.gltfArrayBuffer=function(Pu,Ru,Lu){var Bu=Lu!==void 0?new Uint8Array(Pu).subarray(Ru,Ru+Lu):new Uint8Array(Pu).subarray(Ru);return new Uint8Array(Bu).buffer}($u,Tu,Cu),_u.gltfByteOffset=0,_u.gltfByteLength=Cu,Tu%4==0||console.warn("".concat(_u.type,": embedded glb is not aligned to a 4-byte boundary.")),_u.byteOffset+_u.byteLength}function Fr(_u,$u,Tu){Tu=function(Pu,Ru,Lu){Lu===void 0&&(Lu=0);var Bu=new DataView(Ru);if(Pu.magic=Bu.getUint32(Lu,!0),Lu+=4,Pu.version=Bu.getUint32(Lu,!0),Lu+=4,Pu.byteLength=Bu.getUint32(Lu,!0),Lu+=4,Pu.version!==1)throw new Error("3D Tile Version ".concat(Pu.version," not supported"));return Lu}(_u,$u,Tu),Tu=function(Pu,Ru,Lu){Lu===void 0&&(Lu=0);var Bu,Vu=new DataView(Ru);Pu.header=Pu.header||{};var Ou=Vu.getUint32(Lu,!0);Lu+=4;var Du=Vu.getUint32(Lu,!0);Lu+=4;var ku=Vu.getUint32(Lu,!0);Lu+=4;var Fu=Vu.getUint32(Lu,!0);return Lu+=4,ku>=570425344?(Lu-=8,Bu=Ou,ku=Du,Fu=0,Ou=0,Du=0,console.warn("b3dm tile in legacy format.")):Fu>=570425344&&(Lu-=4,Bu=ku,ku=Ou,Fu=Du,Ou=0,Du=0,console.warn("b3dm tile in legacy format.")),Pu.header.featureTableJsonByteLength=Ou,Pu.header.featureTableBinaryByteLength=Du,Pu.header.batchTableJsonByteLength=ku,Pu.header.batchTableBinaryByteLength=Fu,Pu.header.batchLength=Bu,Lu}(_u,$u,Tu),Tu=Nr(_u,$u,Tu=Or(_u,$u,Tu));var Cu=_u.featureTableJson.RTC_CENTER;return Cu&&Number.isFinite(Cu.byteOffset)&&(_u.rtcCenter=new Float32Array(_u.featureTableBinary.buffer,_u.featureTableBinary.buffer.byteOffset+Cu.byteOffset,3)),Tu}var Qr=function(){function _u($u,Tu,Cu){this.header=Tu,this.tileset=$u,this.parent=Cu,this.children=[],this.contentState="UNLOADED",this.transform=this.header.transform?new Tn(this.header.transform.slice()):new Tn;var Pu=this.parent&&this.parent.computedTransform?this.parent.computedTransform.clone():$u.modelMatrix.clone();this.computedTransform=new Tn(Pu).multiplyRight(this.transform),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform),this.depth=this.parent?this.parent.depth+1:0,this.distanceToCamera=0,this.centerZDepth=0,this.screenSpaceError=0,this.shouldRefine=!1,this.visibilityPlaneMask=Fn.MASK_INDETERMINATE,this.visible=!1,this.selectionDepth=0,this.frameNumber=0,this.touchedFrameNumber=0,this.selectedFrameNumber=0,this.requestedFrameNumber=0}return Object.defineProperty(_u.prototype,"id",{get:function(){return this.header.id},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.header.refine||this.parent&&this.parent.refine||"REPLACE"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.header.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUrl",{get:function(){if(this.header.content.uri){var $u=this.tileset.b3dmMapping.b3dm_base_url;$u=/\/$/.test($u)?$u:$u+"/";var Tu=this.tileset.b3dmMapping.b3dm_url[this.header.content.uri];Tu=/^\//.test(Tu)?Tu.slice(1):Tu;var Cu=/^https?:/.test(Tu)?Tu:$u+Tu;if(Cu.indexOf("http")!==-1&&Cu.indexOf("https")===-1){var Pu=Cu.slice(4);Cu="https"+Pu}return Cu}return this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.header.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.header.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasEmptyContent",{get:function(){return!this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"selected",{get:function(){return this.selectedFrameNumber===this.tileset.frameNumber},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasRenderContent",{get:function(){return!this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasChildren",{get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentReady",{get:function(){return this.contentState==="READY"||this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentAvailable",{get:function(){return Boolean(this.contentReady&&this.hasRenderContent||!1)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasUnloadedContent",{get:function(){return this.hasRenderContent&&this.contentUnloaded},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUnloaded",{get:function(){return this.contentState==="UNLOADED"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentFailed",{get:function(){return this.contentState==="FAILED"},enumerable:!1,configurable:!0}),_u.prototype.getScreenSpaceError=function($u,Tu){if(this.tileset.type==="TILES3D")return function(Cu,Pu,Ru){var Lu=Cu.tileset,Bu=Cu.parent&&Cu.parent.lodMetricValue||Cu.lodMetricValue,Vu=Ru?Bu:Cu.lodMetricValue;if(Vu===0)return 0;var Ou=Math.max(Cu.distanceToCamera,1e-7),Du=Lu.options.viewDistanceScale,ku=Vu*Pu.height*Du/(Ou*Pu.sseDenominator);return ku-Dr(Lu,Ou)}(this,$u,Tu);throw new Error("Unsupported tileset type")},_u.prototype.getPriority=function(){var $u=this.tileset.traverser,Tu=$u.options.skipLevelOfDetail,Cu=this.refine==="ADD"||Tu;if(Cu&&!this.visible||this.tileset.frameNumber-this.touchedFrameNumber>=1||this.contentState==="UNLOADED")return-1;var Pu=this.parent,Ru=Pu&&(!Cu||this.screenSpaceError===0)?Pu.screenSpaceError:this.screenSpaceError,Lu=$u.root?$u.root.screenSpaceError:0;return Math.max(Lu-Ru,0)},_u.prototype.loadContent=function(){var $u=this;return this.hasEmptyContent||!this.contentUrl?Promise.resolve(!1):this.content?Promise.resolve(!0):(this.contentState="LOADING",this.tileset.requestScheduler.scheduleRequest(this.id,function(){return $u.getPriority()}).then(function(Tu){return Tu?it$4($u.contentUrl,{responseType:"arraybuffer",allowHosts:$u.tileset.options.allowHosts,networkSubscribe:$u.tileset.options.networkSubscribe,requestProxy:$u.tileset.options.requestProxy}).then(function(Cu){return Cu.body}).then(function(Cu){return Fr(Pu={byteOffset:0,type:"b3dm"},Cu,Pu.byteOffset),Pu;var Pu}).then(function(Cu){return $u.content=Cu,$u.tileset.options.contentLoader($u).then(function(){return $u.contentState="READY",Tu.done(),!0})}).catch(function(Cu){return $u.contentState="FAILED",Tu.done(),Promise.reject(Cu)}):($u.contentState="UNLOADED",Promise.resolve(!1))}))},_u.prototype.unloadContent=function(){this.content=void 0,this.contentState="UNLOADED"},_u.prototype.updateVisibility=function($u){if(this.frameNumber!==$u.frameNumber){var Tu=this.parent,Cu=Tu?Tu.visibilityPlaneMask:Fn.MASK_INDETERMINATE,Pu=Tu?Tu.computedTransform:this.tileset.modelMatrix;this.updateTransform(Pu),this.distanceToCamera=this.distanceToTile($u),this.screenSpaceError=this.getScreenSpaceError($u,!1),this.visibilityPlaneMask=this.visibility($u,Cu),this.visible=this.visibilityPlaneMask!==Fn.MASK_OUTSIDE,this.frameNumber=$u.frameNumber}},_u.prototype.visibility=function($u,Tu){return $u.cullingVolume.computeVisibilityWithPlaneMask(this.boundingVolume,Tu)},_u.prototype.distanceToTile=function($u){return Math.sqrt(Math.max(this.boundingVolume.distanceSquaredTo($u.camera.position),0))},_u.prototype.updateTransform=function($u){$u===void 0&&($u=new Tn);var Tu=$u.clone().multiplyRight(this.transform);!Tu.equals(this.computedTransform)&&(this.computedTransform.copy(Tu),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform))},_u}(),Vr=function(){function _u(){this.map=new Map,this.array=[],this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.get=function($u){return this.array[$u]},_u.prototype.set=function($u,Tu){$u>=this.length&&(this._length=$u+1),this.map.has(this.array[$u])&&this.map.delete(this.array[$u]),this.array[$u]=Tu,this.map.set(Tu,$u)},_u.prototype.delete=function($u){var Tu=this.map.get($u);Tu!==void 0&&Tu>=0&&(this.array.splice(Tu,1),this.map.delete($u),this._length--)},_u.prototype.push=function($u){if(!this.map.has($u)){var Tu=this._length++;this.array[Tu]=$u,this.map.set($u,Tu)}},_u.prototype.pop=function(){var $u=this.array[--this._length];return this.map.delete($u),$u},_u.prototype.reset=function(){this.array=[],this.map=new Map,this._length=0},_u.prototype.find=function($u){return this.map.has($u)},_u}(),_r=function(){function _u($u){this.options=$u,this._traversalStack=new Vr,this._emptyTraversalStack=new Vr,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return _u.prototype.traverse=function($u,Tu){this.root=$u,this.reset(),this.updateTile($u,Tu),this._frameNumber=Tu.frameNumber,this.executeTraversal($u,Tu)},_u.prototype.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},_u.prototype.executeTraversal=function($u,Tu){var Cu=this._traversalStack;for($u.selectionDepth=1,Cu.push($u);Cu.length>0;){var Pu=Cu.pop(),Ru=!1;if(this.canTraverse(Pu,Tu)){this.updateChildTiles(Pu,Tu);var Lu=Pu.hasRenderContent?Pu.selectionDepth+1:Pu.selectionDepth;Ru=this.updateAndPushChildren(Pu,Tu,Cu,Lu)}var Bu=Pu.parent,Vu=Boolean(!Bu||Bu.shouldRefine),Ou=!Ru;Pu.hasRenderContent?Pu.refine==="ADD"?(this.loadTile(Pu,Tu),this.selectTile(Pu,Tu)):Pu.refine==="REPLACE"&&(this.loadTile(Pu,Tu),Ou&&this.selectTile(Pu,Tu)):(this.emptyTiles[Pu.id]=Pu,this.loadTile(Pu,Tu),Ou&&this.selectTile(Pu,Tu)),this.touchTile(Pu,Tu),Pu.shouldRefine=Ru&&Vu}this.options.onTraversalEnd(Tu)},_u.prototype.updateChildTiles=function($u,Tu){for(var Cu=0,Pu=$u.children;Cu<Pu.length;Cu++){var Ru=Pu[Cu];this.updateTile(Ru,Tu)}return!0},_u.prototype.updateAndPushChildren=function($u,Tu,Cu,Pu){var Ru=this.options,Lu=Ru.loadSiblings,Bu=Ru.skipLevelOfDetail,Vu=$u.children;Vu.sort(this.compareDistanceToCamera.bind(this));for(var Ou=$u.refine==="REPLACE"&&$u.hasRenderContent&&!Bu,Du=!1,ku=!0,Fu=0,Nu=Vu;Fu<Nu.length;Fu++){var Gu=Nu[Fu];if(Gu.selectionDepth=Pu,Gu.visible?(Cu.find(Gu)&&Cu.delete(Gu),Cu.push(Gu),Du=!0):(Ou||Lu)&&(this.loadTile(Gu,Tu),this.touchTile(Gu,Tu)),Ou){var zu=void 0;if(zu=Gu.hasRenderContent?Gu.contentAvailable:this.executeEmptyTraversal(Gu,Tu),!(ku=ku&&zu))return!1}}return Du||(ku=!1),ku},_u.prototype.updateTile=function($u,Tu){this.updateTileVisibility($u,Tu)},_u.prototype.selectTile=function($u,Tu){this.shouldSelectTile($u)&&($u.selectedFrameNumber=Tu.frameNumber,this.selectedTiles[$u.id]=$u)},_u.prototype.loadTile=function($u,Tu){this.shouldLoadTile($u)&&($u.requestedFrameNumber=Tu.frameNumber,this.requestedTiles[$u.id]=$u)},_u.prototype.touchTile=function($u,Tu){$u.tileset.cache.touch($u),$u.touchedFrameNumber=Tu.frameNumber},_u.prototype.canTraverse=function($u,Tu,Cu,Pu){return Cu===void 0&&(Cu=!1),Pu===void 0&&(Pu=!1),!!$u.hasChildren&&!(!Pu&&!$u.visible)&&this.shouldRefine($u,Tu,Cu)},_u.prototype.shouldLoadTile=function($u){var Tu=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.hasUnloadedContent&&Tu},_u.prototype.shouldSelectTile=function($u){var Tu=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.contentAvailable&&!this.options.skipLevelOfDetail&&Tu},_u.prototype.shouldRefine=function($u,Tu,Cu){var Pu=$u.screenSpaceError;return Cu&&(Pu=$u.getScreenSpaceError(Tu,!0)),Pu>this.options.maxScreenSpaceError},_u.prototype.updateTileVisibility=function($u,Tu){if($u.updateVisibility(Tu),$u.visible){var Cu=$u.children.length>0;this.meetsScreenSpaceErrorEarly($u,Tu)?$u.visible=!1:$u.refine!=="REPLACE"||!Cu||this.anyChildrenVisible($u,Tu)||($u.visible=!1)}},_u.prototype.meetsScreenSpaceErrorEarly=function($u,Tu){var Cu=$u.parent;return!(!Cu||Cu.refine!=="ADD")&&!this.shouldRefine($u,Tu,!0)},_u.prototype.compareDistanceToCamera=function($u,Tu){return Tu.distanceToCamera===0&&$u.distanceToCamera===0?Tu.centerZDepth-$u.centerZDepth:Tu.distanceToCamera-$u.distanceToCamera},_u.prototype.anyChildrenVisible=function($u,Tu){for(var Cu=!1,Pu=0,Ru=$u.children;Pu<Ru.length;Pu++){var Lu=Ru[Pu];Lu.updateVisibility(Tu),Cu=Cu||Lu.visible}return Cu},_u.prototype.everyChildrenVisibleIsLoaded=function($u){for(var Tu=!0,Cu=0,Pu=$u.children;Cu<Pu.length;Cu++){var Ru=Pu[Cu];Ru.visible&&Ru.contentState!=="READY"&&(Tu=!1)}return Tu},_u.prototype.executeEmptyTraversal=function($u,Tu){var Cu=!0,Pu=this._emptyTraversalStack;for(Pu.push($u);Pu.length>0&&Cu;){var Ru=Pu.pop();if(this.updateTile(Ru,Tu),Ru.visible||this.loadTile(Ru,Tu),this.touchTile(Ru,Tu),!Ru.hasRenderContent&&this.canTraverse(Ru,Tu,!1,!0))for(var Lu=0,Bu=Ru.children;Lu<Bu.length;Lu++){var Vu=Bu[Lu];Pu.find(Vu)&&Pu.delete(Vu),Pu.push(Vu)}else Ru.contentAvailable||(Cu=!1)}return Cu},_u}();function Hr(_u){for(var $u=[],Tu=0,Cu=Object.keys(_u);Tu<Cu.length;Tu++){var Pu=Cu[Tu];$u.push(_u[Pu])}return $u}var qr$1=function(){function _u($u,Tu){var Cu=this;this.rawJson=$u,this.b3dmMapping=$u.b3dmMapping,this.options=Tu,this.traverser=new _r({loadSiblings:!1,maxScreenSpaceError:this.options.maxScreenSpaceError,skipLevelOfDetail:!1,maxDepth:this.options.maxDepth,onTraversalEnd:function(Du){return Cu.onTraversalEnd(Du)}}),this.cache=new xn,this.requestScheduler=new vn({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.frameNumber=0,this.pendingCount=0,this._tiles={},this.selectedTiles=[],this.requestedTiles=[],this.memoryUsageInBytes=0,this.root=new Qr(this,$u.root);for(var Pu=[this.root];Pu.length>0;)for(var Ru=Pu.pop(),Lu=0,Bu=Ru.header.children||[];Lu<Bu.length;Lu++){var Vu=Bu[Lu],Ou=new Qr(this,Vu,Ru);Ou.depth=Ru.depth+1,Ru.children.push(Ou),Pu.push(Ou)}}return Object.defineProperty(_u.prototype,"maxMemoryUsage",{get:function(){return this.options.maxMemoryUsage},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"asset",{get:function(){return this.rawJson.asset},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.rawJson.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"basePath",{get:function(){return this.rawJson.basePath},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"modelMatrix",{get:function(){return this.options.modelMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"geometricError",{get:function(){return this.rawJson.geometricError},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.rawJson.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.rawJson.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.rawJson.root.refine},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"tiles",{get:function(){return Hr(this._tiles)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"floorInfo",{get:function(){return this.rawJson.floorInfo||this.rawJson.floor_info||[]},enumerable:!1,configurable:!0}),_u.prototype.reset=function(){for(var $u=[this.root];$u.length>0;){for(var Tu=$u.pop(),Cu=0,Pu=Tu.children;Cu<Pu.length;Cu++){var Ru=Pu[Cu];$u.push(Ru)}this.cache.unloadTile(Tu),this.unloadTile(Tu)}this.cache.reset(),this.traverser.reset(),this.selectedTiles=[],this.requestedTiles=[]},_u.prototype.isLoaded=function(){return this.pendingCount===0&&this.frameNumber!==0},_u.prototype.onTraversalEnd=function($u){var Tu=this,Cu=new gn($u.camera.position);this.selectedTiles=this.options.onTraversalComplete(Hr(this.traverser.selectedTiles)),this.requestedTiles=Hr(this.traverser.requestedTiles).slice().sort(function(Ou,Du){return Ou.boundingVolume.center.distanceTo(Cu)-Du.boundingVolume.center.distanceTo(Cu)});for(var Pu=0,Ru=this.selectedTiles;Pu<Ru.length;Pu++){var Lu=Ru[Pu];this._tiles[Lu.id]=Lu}for(var Bu=0,Vu=this.requestedTiles;Bu<Vu.length;Bu++)(Lu=Vu[Bu]).contentUnloaded&&this.loadTile(Lu);this.cache.unloadTiles(function(){return Tu.memoryUsageInBytes>1024*Tu.maxMemoryUsage*1024},function(Ou){return Tu.unloadTile(Ou)})},_u.prototype.loadTile=function($u){var Tu=this;this.pendingCount++,$u.loadContent().catch(function(Cu){var Pu=Cu.message||Cu.toString();return console.error("A 3D tile failed to load: ".concat($u.id," ").concat(Pu)),Tu.options.onTileError($u,Pu),!1}).then(function(Cu){Tu.pendingCount--,Cu&&(Tu.cache.add($u,function(){$u.content&&(Tu.memoryUsageInBytes+=$u.content.byteLength||0)}),Tu.options.onTileLoad($u))})},_u.prototype.unloadTile=function($u){this.memoryUsageInBytes-=$u.content&&$u.content.byteLength||0,this.options.onTileUnload($u),$u.unloadContent()},_u}();function zr(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Kr(){return(zr()+zr()+"-"+zr()+"-4"+zr().substr(0,3)+"-"+zr()+"-"+zr()+zr()+zr()).toLowerCase()}function Ur(_u,$u){var Tu;return _u.content&&(_u.contentUrl="".concat($u,"/").concat(_u.content.uri||_u.content.url)),_u.id=(Tu=_u.contentUrl)!==null&&Tu!==void 0?Tu:"empty:"+Kr(),_u.lodMetricType="geometricError",_u.lodMetricValue=_u.geometricError,_u.transformMatrix=_u.transform,_u.type=_u.contentUrl?"SCENEGRAPH":"EMPTY",_u.refine=function(Cu){switch(Cu){case"REPLACE":case"replace":return"REPLACE";case"ADD":case"add":return"ADD";default:throw new Error("refine ".concat(Cu," is not supported."))}}(_u.refine),_u}function jr(_u,$u){var Tu,Cu=JSON.parse(JSON.stringify(_u));return Cu.basePath=$u,Cu.root=function(Pu,Ru){Pu=Ur(Pu,Ru);var Lu=[];for(Lu.push(Pu);Lu.length>0;)for(var Bu=0,Vu=(Lu.pop()||{}).children||[];Bu<Vu.length;Bu++){var Ou=Vu[Bu];Ur(Ou,Ru),Lu.push(Ou)}return Pu}(Cu.root,$u),Cu.type="TILES3D",Cu.lodMetricType="geometricError",Cu.lodMetricValue=((Tu=Cu.root)===null||Tu===void 0?void 0:Tu.lodMetricValue)||0,Cu}var Gr=new(function(){function _u(ep){e$g.Loader.call(this,ep),this.dracoLoader=null,this.ddsLoader=null}function $u(){var ep={};return{get:function(_f){return ep[_f]},add:function(_f,op){ep[_f]=op},remove:function(_f){delete ep[_f]},removeAll:function(){ep={}}}}_u.prototype=Object.assign(Object.create(e$g.Loader.prototype),{constructor:_u,load:function(ep,_f,op,rp){var up,cp=this;up=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:e$g.LoaderUtils.extractUrlBase(ep),cp.manager.itemStart(ep);var fp=function(xp){rp?rp(xp):console.error(xp),cp.manager.itemError(ep),cp.manager.itemEnd(ep)},vp=new e$g.FileLoader(cp.manager);vp.setPath(this.path),vp.setResponseType("arraybuffer"),vp.setRequestHeader(this.requestHeader),cp.crossOrigin==="use-credentials"&&vp.setWithCredentials(!0),vp.load(ep,function(xp){try{cp.parse(xp,up,function(mp){_f(mp),cp.manager.itemEnd(ep)},fp)}catch(mp){fp(mp)}},op,fp)},setDRACOLoader:function(ep){return this.dracoLoader=ep,this},setDDSLoader:function(ep){return this.ddsLoader=ep,this},parse:function(ep,_f,op,rp){var up,cp={};if(typeof ep=="string")up=ep;else if(e$g.LoaderUtils.decodeText(new Uint8Array(ep,0,4))===Bu){try{cp[Tu.KHR_BINARY_GLTF]=new Du(ep)}catch(lp){return void(rp&&rp(lp))}up=cp[Tu.KHR_BINARY_GLTF].content}else up=e$g.LoaderUtils.decodeText(new Uint8Array(ep));var fp=JSON.parse(up);if(fp.asset===void 0||fp.asset.version[0]<2)rp&&rp(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(fp.extensionsUsed)for(var vp=0;vp<fp.extensionsUsed.length;++vp){var xp=fp.extensionsUsed[vp],mp=fp.extensionsRequired||[];switch(xp){case Tu.KHR_LIGHTS_PUNCTUAL:cp[xp]=new Pu(fp);break;case Tu.KHR_MATERIALS_CLEARCOAT:cp[xp]=new Lu;break;case Tu.KHR_MATERIALS_UNLIT:cp[xp]=new Ru;break;case Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:cp[xp]=new Gu;break;case Tu.KHR_DRACO_MESH_COMPRESSION:cp[xp]=new ku(fp,this.dracoLoader);break;case Tu.MSFT_TEXTURE_DDS:cp[xp]=new Cu(this.ddsLoader);break;case Tu.KHR_TEXTURE_TRANSFORM:cp[xp]=new Fu;break;case Tu.KHR_MESH_QUANTIZATION:cp[xp]=new zu;break;default:mp.indexOf(xp)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+xp+'".')}}var sp=new Ep(fp,cp,{path:_f||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});sp.fileLoader.setRequestHeader(this.requestHeader),sp.parse(op,rp)}}});var Tu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function Cu(ep){if(!ep)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Tu.MSFT_TEXTURE_DDS,this.ddsLoader=ep}function Pu(ep){this.name=Tu.KHR_LIGHTS_PUNCTUAL;var _f=ep.extensions&&ep.extensions[Tu.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=_f.lights||[]}function Ru(){this.name=Tu.KHR_MATERIALS_UNLIT}function Lu(){this.name=Tu.KHR_MATERIALS_CLEARCOAT}Pu.prototype.loadLight=function(ep){var _f,op=this.lightDefs[ep],rp=new e$g.Color(16777215);op.color!==void 0&&rp.fromArray(op.color);var up=op.range!==void 0?op.range:0;switch(op.type){case"directional":(_f=new e$g.DirectionalLight(rp)).target.position.set(0,0,-1),_f.add(_f.target);break;case"point":(_f=new e$g.PointLight(rp)).distance=up;break;case"spot":(_f=new e$g.SpotLight(rp)).distance=up,op.spot=op.spot||{},op.spot.innerConeAngle=op.spot.innerConeAngle!==void 0?op.spot.innerConeAngle:0,op.spot.outerConeAngle=op.spot.outerConeAngle!==void 0?op.spot.outerConeAngle:Math.PI/4,_f.angle=op.spot.outerConeAngle,_f.penumbra=1-op.spot.innerConeAngle/op.spot.outerConeAngle,_f.target.position.set(0,0,-1),_f.add(_f.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+op.type+'".')}return _f.position.set(0,0,0),_f.decay=2,op.intensity!==void 0&&(_f.intensity=op.intensity),_f.name=op.name||"light_"+ep,Promise.resolve(_f)},Ru.prototype.getMaterialType=function(){return e$g.MeshBasicMaterial},Ru.prototype.extendParams=function(ep,_f,op){var rp=[];ep.color=new e$g.Color(1,1,1),ep.opacity=1;var up=_f.pbrMetallicRoughness;if(up){if(Array.isArray(up.baseColorFactor)){var cp=up.baseColorFactor;ep.color.fromArray(cp),ep.opacity=cp[3]}up.baseColorTexture!==void 0&&rp.push(op.assignTexture(ep,"map",up.baseColorTexture))}return Promise.all(rp)},Lu.prototype.getMaterialType=function(){return e$g.MeshPhysicalMaterial},Lu.prototype.extendParams=function(ep,_f,op){var rp=[],up=_f.extensions[this.name];if(up.clearcoatFactor!==void 0&&(ep.clearcoat=up.clearcoatFactor),up.clearcoatTexture!==void 0&&rp.push(op.assignTexture(ep,"clearcoatMap",up.clearcoatTexture)),up.clearcoatRoughnessFactor!==void 0&&(ep.clearcoatRoughness=up.clearcoatRoughnessFactor),up.clearcoatRoughnessTexture!==void 0&&rp.push(op.assignTexture(ep,"clearcoatRoughnessMap",up.clearcoatRoughnessTexture)),up.clearcoatNormalTexture!==void 0&&(rp.push(op.assignTexture(ep,"clearcoatNormalMap",up.clearcoatNormalTexture)),up.clearcoatNormalTexture.scale!==void 0)){var cp=up.clearcoatNormalTexture.scale;ep.clearcoatNormalScale=new e$g.Vector2(cp,cp)}return Promise.all(rp)};var Bu="glTF",Vu=1313821514,Ou=5130562;function Du(ep){this.name=Tu.KHR_BINARY_GLTF,this.content=null,this.body=null;var _f=new DataView(ep,0,12);if(this.header={magic:e$g.LoaderUtils.decodeText(new Uint8Array(ep.slice(0,4))),version:_f.getUint32(4,!0),length:_f.getUint32(8,!0)},this.header.magic!==Bu)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var op=new DataView(ep,12),rp=0;rp<op.byteLength;){var up=op.getUint32(rp,!0);rp+=4;var cp=op.getUint32(rp,!0);if(rp+=4,cp===Vu){var fp=new Uint8Array(ep,12+rp,up);this.content=e$g.LoaderUtils.decodeText(fp)}else if(cp===Ou){var vp=12+rp;this.body=ep.slice(vp,vp+up)}rp+=up}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function ku(ep,_f){if(!_f)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Tu.KHR_DRACO_MESH_COMPRESSION,this.json=ep,this.dracoLoader=_f,this.dracoLoader.preload()}function Fu(){this.name=Tu.KHR_TEXTURE_TRANSFORM}function Nu(ep){e$g.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var _f=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),op=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),rp=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),up=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),cp=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),fp={specular:{value:new e$g.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=fp,this.onBeforeCompile=function(vp){for(var xp in fp)vp.uniforms[xp]=fp[xp];vp.fragmentShader=vp.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),vp.fragmentShader=vp.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),vp.fragmentShader=vp.fragmentShader.replace("#include <roughnessmap_pars_fragment>",_f),vp.fragmentShader=vp.fragmentShader.replace("#include <metalnessmap_pars_fragment>",op),vp.fragmentShader=vp.fragmentShader.replace("#include <roughnessmap_fragment>",rp),vp.fragmentShader=vp.fragmentShader.replace("#include <metalnessmap_fragment>",up),vp.fragmentShader=vp.fragmentShader.replace("#include <lights_physical_fragment>",cp)},Object.defineProperties(this,{specular:{get:function(){return fp.specular.value},set:function(vp){fp.specular.value=vp}},specularMap:{get:function(){return fp.specularMap.value},set:function(vp){fp.specularMap.value=vp}},glossiness:{get:function(){return fp.glossiness.value},set:function(vp){fp.glossiness.value=vp}},glossinessMap:{get:function(){return fp.glossinessMap.value},set:function(vp){fp.glossinessMap.value=vp,vp?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(ep)}function Gu(){return{name:Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Nu},extendParams:function(ep,_f,op){var rp=_f.extensions[this.name];ep.color=new e$g.Color(1,1,1),ep.opacity=1;var up=[];if(Array.isArray(rp.diffuseFactor)){var cp=rp.diffuseFactor;ep.color.fromArray(cp),ep.opacity=cp[3]}if(rp.diffuseTexture!==void 0&&up.push(op.assignTexture(ep,"map",rp.diffuseTexture)),ep.emissive=new e$g.Color(0,0,0),ep.glossiness=rp.glossinessFactor!==void 0?rp.glossinessFactor:1,ep.specular=new e$g.Color(1,1,1),Array.isArray(rp.specularFactor)&&ep.specular.fromArray(rp.specularFactor),rp.specularGlossinessTexture!==void 0){var fp=rp.specularGlossinessTexture;up.push(op.assignTexture(ep,"glossinessMap",fp)),up.push(op.assignTexture(ep,"specularMap",fp))}return Promise.all(up)},createMaterial:function(ep){var _f=new Nu(ep);return _f.fog=!0,_f.color=ep.color,_f.map=ep.map===void 0?null:ep.map,_f.lightMap=null,_f.lightMapIntensity=1,_f.aoMap=ep.aoMap===void 0?null:ep.aoMap,_f.aoMapIntensity=1,_f.emissive=ep.emissive,_f.emissiveIntensity=1,_f.emissiveMap=ep.emissiveMap===void 0?null:ep.emissiveMap,_f.bumpMap=ep.bumpMap===void 0?null:ep.bumpMap,_f.bumpScale=1,_f.normalMap=ep.normalMap===void 0?null:ep.normalMap,_f.normalMapType=e$g.TangentSpaceNormalMap,ep.normalScale&&(_f.normalScale=ep.normalScale),_f.displacementMap=null,_f.displacementScale=1,_f.displacementBias=0,_f.specularMap=ep.specularMap===void 0?null:ep.specularMap,_f.specular=ep.specular,_f.glossinessMap=ep.glossinessMap===void 0?null:ep.glossinessMap,_f.glossiness=ep.glossiness,_f.alphaMap=null,_f.envMap=ep.envMap===void 0?null:ep.envMap,_f.envMapIntensity=1,_f.refractionRatio=.98,_f}}}function zu(){this.name=Tu.KHR_MESH_QUANTIZATION}function Hu(ep,_f,op,rp){e$g.Interpolant.call(this,ep,_f,op,rp)}ku.prototype.decodePrimitive=function(ep,_f){var op=this.json,rp=this.dracoLoader,up=ep.extensions[this.name].bufferView,cp=ep.extensions[this.name].attributes,fp={},vp={},xp={};for(var mp in cp){var sp=Zu[mp]||mp.toLowerCase();fp[sp]=cp[mp]}for(mp in ep.attributes)if(sp=Zu[mp]||mp.toLowerCase(),cp[mp]!==void 0){var lp=op.accessors[ep.attributes[mp]],$p=_d[lp.componentType];xp[sp]=$p,vp[sp]=lp.normalized===!0}return _f.getDependency("bufferView",up).then(function(Mp){return new Promise(function(kp){rp.decodeDracoFile(Mp,function(Vp){for(var Gp in Vp.attributes){var qp=Vp.attributes[Gp],Wp=vp[Gp];Wp!==void 0&&(qp.normalized=Wp)}kp(Vp)},fp,xp)})})},Fu.prototype.extendTexture=function(ep,_f){return ep=ep.clone(),_f.offset!==void 0&&ep.offset.fromArray(_f.offset),_f.rotation!==void 0&&(ep.rotation=_f.rotation),_f.scale!==void 0&&ep.repeat.fromArray(_f.scale),_f.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),ep.needsUpdate=!0,ep},Nu.prototype=Object.create(e$g.MeshStandardMaterial.prototype),Nu.prototype.constructor=Nu,Nu.prototype.copy=function(ep){return e$g.MeshStandardMaterial.prototype.copy.call(this,ep),this.specularMap=ep.specularMap,this.specular.copy(ep.specular),this.glossinessMap=ep.glossinessMap,this.glossiness=ep.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},Hu.prototype=Object.create(e$g.Interpolant.prototype),Hu.prototype.constructor=Hu,Hu.prototype.copySampleValue_=function(ep){for(var _f=this.resultBuffer,op=this.sampleValues,rp=this.valueSize,up=ep*rp*3+rp,cp=0;cp!==rp;cp++)_f[cp]=op[up+cp];return _f},Hu.prototype.beforeStart_=Hu.prototype.copySampleValue_,Hu.prototype.afterEnd_=Hu.prototype.copySampleValue_,Hu.prototype.interpolate_=function(ep,_f,op,rp){for(var up=this.resultBuffer,cp=this.sampleValues,fp=this.valueSize,vp=2*fp,xp=3*fp,mp=rp-_f,sp=(op-_f)/mp,lp=sp*sp,$p=lp*sp,Mp=ep*xp,kp=Mp-xp,Vp=-2*$p+3*lp,Gp=$p-lp,qp=1-Vp,Wp=Gp-lp+sp,Yp=0;Yp!==fp;Yp++){var Kp=cp[kp+Yp+fp],ev=cp[kp+Yp+vp]*mp,Xp=cp[Mp+Yp+fp],Zp=cp[Mp+Yp]*mp;up[Yp]=qp*Kp+Wp*ev+Vp*Xp+Gp*Zp}return up};var Uu=0,ju=1,Wu=2,Qu=3,qu=4,Yu=5,Ju=6,_d={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tp={9728:e$g.NearestFilter,9729:e$g.LinearFilter,9984:e$g.NearestMipmapNearestFilter,9985:e$g.LinearMipmapNearestFilter,9986:e$g.NearestMipmapLinearFilter,9987:e$g.LinearMipmapLinearFilter},Ku={33071:e$g.ClampToEdgeWrapping,33648:e$g.MirroredRepeatWrapping,10497:e$g.RepeatWrapping},Xu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Zu={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_c={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Xc={CUBICSPLINE:void 0,LINEAR:e$g.InterpolateLinear,STEP:e$g.InterpolateDiscrete},_h="OPAQUE",ip="MASK",ap="BLEND",hp={"image/png":e$g.RGBAFormat,"image/jpeg":e$g.RGBFormat};function Ap(ep,_f){return typeof ep!="string"||ep===""?"":(/^https?:\/\//i.test(_f)&&/^\//.test(ep)&&(_f=_f.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(ep)||/^data:.*,.*$/i.test(ep)||/^blob:.*$/i.test(ep)?ep:_f+ep)}function gp(ep,_f,op){for(var rp in op.extensions)ep[rp]===void 0&&(_f.userData.gltfExtensions=_f.userData.gltfExtensions||{},_f.userData.gltfExtensions[rp]=op.extensions[rp])}function Rp(ep,_f){_f.extras!==void 0&&(typeof _f.extras=="object"?Object.assign(ep.userData,_f.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_f.extras))}function Sp(ep,_f){if(ep.updateMorphTargets(),_f.weights!==void 0)for(var op=0,rp=_f.weights.length;op<rp;op++)ep.morphTargetInfluences[op]=_f.weights[op];if(_f.extras&&Array.isArray(_f.extras.targetNames)){var up=_f.extras.targetNames;if(ep.morphTargetInfluences.length===up.length)for(ep.morphTargetDictionary={},op=0,rp=up.length;op<rp;op++)ep.morphTargetDictionary[up[op]]=op;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Dp(ep){for(var _f="",op=Object.keys(ep).sort(),rp=0,up=op.length;rp<up;rp++)_f+=op[rp]+":"+ep[op[rp]]+";";return _f}function Ep(ep,_f,op){this.json=ep||{},this.extensions=_f||{},this.options=op||{},this.cache=new $u,this.associations=new Map,this.primitiveCache={},this.textureLoader=new e$g.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e$g.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function Bp(ep,_f,op){var rp=_f.attributes,up=[];function cp(mp,sp){return op.getDependency("accessor",mp).then(function(lp){ep.setAttribute(sp,lp)})}for(var fp in rp){var vp=Zu[fp]||fp.toLowerCase();vp in ep.attributes||up.push(cp(rp[fp],vp))}if(_f.indices!==void 0&&!ep.index){var xp=op.getDependency("accessor",_f.indices).then(function(mp){ep.setIndex(mp)});up.push(xp)}return Rp(ep,_f),function(mp,sp,lp){var $p=sp.attributes,Mp=new e$g.Box3;if($p.POSITION!==void 0){var kp=(ev=lp.json.accessors[$p.POSITION]).min,Vp=ev.max;if(kp!==void 0&&Vp!==void 0){Mp.set(new e$g.Vector3(kp[0],kp[1],kp[2]),new e$g.Vector3(Vp[0],Vp[1],Vp[2]));var Gp=sp.targets;if(Gp!==void 0){for(var qp=new e$g.Vector3,Wp=new e$g.Vector3,Yp=0,Kp=Gp.length;Yp<Kp;Yp++){var ev,Xp=Gp[Yp];Xp.POSITION!==void 0&&(kp=(ev=lp.json.accessors[Xp.POSITION]).min,Vp=ev.max,kp!==void 0&&Vp!==void 0?(Wp.setX(Math.max(Math.abs(kp[0]),Math.abs(Vp[0]))),Wp.setY(Math.max(Math.abs(kp[1]),Math.abs(Vp[1]))),Wp.setZ(Math.max(Math.abs(kp[2]),Math.abs(Vp[2]))),qp.max(Wp)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}Mp.expandByVector(qp)}mp.boundingBox=Mp;var Zp=new e$g.Sphere;Mp.getCenter(Zp.center),Zp.radius=Mp.min.distanceTo(Mp.max)/2,mp.boundingSphere=Zp}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(ep,_f,op),Promise.all(up).then(function(){return _f.targets!==void 0?function(mp,sp,lp){for(var $p=!1,Mp=!1,kp=0,Vp=sp.length;kp<Vp&&((Wp=sp[kp]).POSITION!==void 0&&($p=!0),Wp.NORMAL!==void 0&&(Mp=!0),!$p||!Mp);kp++);if(!$p&&!Mp)return Promise.resolve(mp);var Gp=[],qp=[];for(kp=0,Vp=sp.length;kp<Vp;kp++){var Wp=sp[kp];if($p){var Yp=Wp.POSITION!==void 0?lp.getDependency("accessor",Wp.POSITION):mp.attributes.position;Gp.push(Yp)}Mp&&(Yp=Wp.NORMAL!==void 0?lp.getDependency("accessor",Wp.NORMAL):mp.attributes.normal,qp.push(Yp))}return Promise.all([Promise.all(Gp),Promise.all(qp)]).then(function(Kp){var ev=Kp[0],Xp=Kp[1];return $p&&(mp.morphAttributes.position=ev),Mp&&(mp.morphAttributes.normal=Xp),mp.morphTargetsRelative=!0,mp})}(ep,_f.targets,op):ep})}function Ip(ep,_f){var op=ep.getIndex();if(op===null){var rp=[],up=ep.getAttribute("position");if(up===void 0)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ep;for(var cp=0;cp<up.count;cp++)rp.push(cp);ep.setIndex(rp),op=ep.getIndex()}var fp=op.count-2,vp=[];if(_f===e$g.TriangleFanDrawMode)for(cp=1;cp<=fp;cp++)vp.push(op.getX(0)),vp.push(op.getX(cp)),vp.push(op.getX(cp+1));else for(cp=0;cp<fp;cp++)cp%2==0?(vp.push(op.getX(cp)),vp.push(op.getX(cp+1)),vp.push(op.getX(cp+2))):(vp.push(op.getX(cp+2)),vp.push(op.getX(cp+1)),vp.push(op.getX(cp)));vp.length/3!==fp&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var xp=ep.clone();return xp.setIndex(vp),xp}return Ep.prototype.parse=function(ep,_f){var op=this,rp=this.json,up=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(cp){var fp={scene:cp[0][rp.scene||0],scenes:cp[0],animations:cp[1],cameras:cp[2],asset:rp.asset,parser:op,userData:{}};gp(up,fp,rp),Rp(fp,rp),ep(fp)}).catch(_f)},Ep.prototype.markDefs=function(){for(var ep=this.json.nodes||[],_f=this.json.skins||[],op=this.json.meshes||[],rp={},up={},cp=0,fp=_f.length;cp<fp;cp++)for(var vp=_f[cp].joints,xp=0,mp=vp.length;xp<mp;xp++)ep[vp[xp]].isBone=!0;for(var sp=0,lp=ep.length;sp<lp;sp++){var $p=ep[sp];$p.mesh!==void 0&&(rp[$p.mesh]===void 0&&(rp[$p.mesh]=up[$p.mesh]=0),rp[$p.mesh]++,$p.skin!==void 0&&(op[$p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=rp,this.json.meshUses=up},Ep.prototype.getDependency=function(ep,_f){var op=ep+":"+_f,rp=this.cache.get(op);if(!rp){switch(ep){case"scene":rp=this.loadScene(_f);break;case"node":rp=this.loadNode(_f);break;case"mesh":rp=this.loadMesh(_f);break;case"accessor":rp=this.loadAccessor(_f);break;case"bufferView":rp=this.loadBufferView(_f);break;case"buffer":rp=this.loadBuffer(_f);break;case"material":rp=this.loadMaterial(_f);break;case"texture":rp=this.loadTexture(_f);break;case"skin":rp=this.loadSkin(_f);break;case"animation":rp=this.loadAnimation(_f);break;case"camera":rp=this.loadCamera(_f);break;case"light":rp=this.extensions[Tu.KHR_LIGHTS_PUNCTUAL].loadLight(_f);break;default:throw new Error("Unknown type: "+ep)}this.cache.add(op,rp)}return rp},Ep.prototype.getDependencies=function(ep){var _f=this.cache.get(ep);if(!_f){var op=this,rp=this.json[ep+(ep==="mesh"?"es":"s")]||[];_f=Promise.all(rp.map(function(up,cp){return op.getDependency(ep,cp)})),this.cache.add(ep,_f)}return _f},Ep.prototype.loadBuffer=function(ep){var _f=this.json.buffers[ep],op=this.fileLoader;if(_f.type&&_f.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+_f.type+" buffer type is not supported.");if(_f.uri===void 0&&ep===0)return Promise.resolve(this.extensions[Tu.KHR_BINARY_GLTF].body);var rp=this.options;return new Promise(function(up,cp){op.load(Ap(_f.uri,rp.path),up,void 0,function(){cp(new Error('THREE.GLTFLoader: Failed to load buffer "'+_f.uri+'".'))})})},Ep.prototype.loadBufferView=function(ep){var _f=this.json.bufferViews[ep];return this.getDependency("buffer",_f.buffer).then(function(op){var rp=_f.byteLength||0,up=_f.byteOffset||0;return op.slice(up,up+rp)})},Ep.prototype.loadAccessor=function(ep){var _f=this,op=this.json,rp=this.json.accessors[ep];if(rp.bufferView===void 0&&rp.sparse===void 0)return Promise.resolve(null);var up=[];return rp.bufferView!==void 0?up.push(this.getDependency("bufferView",rp.bufferView)):up.push(null),rp.sparse!==void 0&&(up.push(this.getDependency("bufferView",rp.sparse.indices.bufferView)),up.push(this.getDependency("bufferView",rp.sparse.values.bufferView))),Promise.all(up).then(function(cp){var fp,vp,xp=cp[0],mp=Xu[rp.type],sp=_d[rp.componentType],lp=sp.BYTES_PER_ELEMENT,$p=lp*mp,Mp=rp.byteOffset||0,kp=rp.bufferView!==void 0?op.bufferViews[rp.bufferView].byteStride:void 0,Vp=rp.normalized===!0;if(kp&&kp!==$p){var Gp=Math.floor(Mp/kp),qp="InterleavedBuffer:"+rp.bufferView+":"+rp.componentType+":"+Gp+":"+rp.count,Wp=_f.cache.get(qp);Wp||(fp=new sp(xp,Gp*kp,rp.count*kp/lp),Wp=new e$g.InterleavedBuffer(fp,kp/lp),_f.cache.add(qp,Wp)),vp=new e$g.InterleavedBufferAttribute(Wp,mp,Mp%kp/lp,Vp)}else fp=xp===null?new sp(rp.count*mp):new sp(xp,Mp,rp.count*mp),vp=new e$g.BufferAttribute(fp,mp,Vp);if(rp.sparse!==void 0){var Yp=Xu.SCALAR,Kp=_d[rp.sparse.indices.componentType],ev=rp.sparse.indices.byteOffset||0,Xp=rp.sparse.values.byteOffset||0,Zp=new Kp(cp[1],ev,rp.sparse.count*Yp),Tp=new sp(cp[2],Xp,rp.sparse.count*mp);xp!==null&&(vp=new e$g.BufferAttribute(vp.array.slice(),vp.itemSize,vp.normalized));for(var Jp=0,nv=Zp.length;Jp<nv;Jp++){var ov=Zp[Jp];if(vp.setX(ov,Tp[Jp*mp]),mp>=2&&vp.setY(ov,Tp[Jp*mp+1]),mp>=3&&vp.setZ(ov,Tp[Jp*mp+2]),mp>=4&&vp.setW(ov,Tp[Jp*mp+3]),mp>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return vp})},Ep.prototype.loadTexture=function(ep){var _f,op=this,rp=this.json,up=this.options,cp=this.textureLoader,fp=self.URL||self.webkitURL,vp=rp.textures[ep],xp=vp.extensions||{},mp=(_f=xp[Tu.MSFT_TEXTURE_DDS]?rp.images[xp[Tu.MSFT_TEXTURE_DDS].source]:rp.images[vp.source]).uri,sp=!1;return _f.bufferView!==void 0&&(mp=op.getDependency("bufferView",_f.bufferView).then(function(lp){sp=!0;var $p=new Blob([lp],{type:_f.mimeType});return mp=fp.createObjectURL($p)})),Promise.resolve(mp).then(function(lp){var $p=up.manager.getHandler(lp);return $p||($p=xp[Tu.MSFT_TEXTURE_DDS]?op.extensions[Tu.MSFT_TEXTURE_DDS].ddsLoader:cp),new Promise(function(Mp,kp){$p.load(Ap(lp,up.path),Mp,void 0,kp)})}).then(function(lp){sp===!0&&fp.revokeObjectURL(mp),lp.flipY=!1,vp.name&&(lp.name=vp.name),_f.mimeType in hp&&(lp.format=hp[_f.mimeType]);var $p=(rp.samplers||{})[vp.sampler]||{};return lp.magFilter=tp[$p.magFilter]||e$g.LinearFilter,lp.minFilter=tp[$p.minFilter]||e$g.LinearMipmapLinearFilter,lp.wrapS=Ku[$p.wrapS]||e$g.RepeatWrapping,lp.wrapT=Ku[$p.wrapT]||e$g.RepeatWrapping,op.associations.set(lp,{type:"textures",index:ep}),lp})},Ep.prototype.assignTexture=function(ep,_f,op){var rp=this;return this.getDependency("texture",op.index).then(function(up){if(!up.isCompressedTexture)switch(_f){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":up.format=e$g.RGBFormat}if(op.texCoord===void 0||op.texCoord==0||_f==="aoMap"&&op.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+op.texCoord+" for texture "+_f+" not yet supported."),rp.extensions[Tu.KHR_TEXTURE_TRANSFORM]){var cp=op.extensions!==void 0?op.extensions[Tu.KHR_TEXTURE_TRANSFORM]:void 0;if(cp){var fp=this.associations.get(up);up=rp.extensions[Tu.KHR_TEXTURE_TRANSFORM].extendTexture(up,cp),this.associations.set(up,fp)}}ep[_f]=up})},Ep.prototype.assignFinalMaterial=function(ep){var _f=ep.geometry,op=ep.material,rp=_f.attributes.tangent!==void 0,up=_f.attributes.color!==void 0,cp=_f.attributes.normal===void 0,fp=ep.isSkinnedMesh===!0,vp=Object.keys(_f.morphAttributes).length>0,xp=vp&&_f.morphAttributes.normal!==void 0;if(ep.isPoints){var mp="PointsMaterial:"+op.uuid,sp=this.cache.get(mp);sp||(sp=new e$g.PointsMaterial,e$g.Material.prototype.copy.call(sp,op),sp.color.copy(op.color),sp.map=op.map,sp.sizeAttenuation=!1,this.cache.add(mp,sp)),op=sp}else if(ep.isLine){mp="LineBasicMaterial:"+op.uuid;var lp=this.cache.get(mp);lp||(lp=new e$g.LineBasicMaterial,e$g.Material.prototype.copy.call(lp,op),lp.color.copy(op.color),this.cache.add(mp,lp)),op=lp}if(rp||up||cp||fp||vp){mp="ClonedMaterial:"+op.uuid+":",op.isGLTFSpecularGlossinessMaterial&&(mp+="specular-glossiness:"),fp&&(mp+="skinning:"),rp&&(mp+="vertex-tangents:"),up&&(mp+="vertex-colors:"),cp&&(mp+="flat-shading:"),vp&&(mp+="morph-targets:"),xp&&(mp+="morph-normals:");var $p=this.cache.get(mp);$p||($p=op.clone(),fp&&($p.skinning=!0),rp&&($p.vertexTangents=!0),up&&($p.vertexColors=!0),cp&&($p.flatShading=!0),vp&&($p.morphTargets=!0),xp&&($p.morphNormals=!0),this.cache.add(mp,$p),this.associations.set($p,this.associations.get(op))),op=$p}op.aoMap&&_f.attributes.uv2===void 0&&_f.attributes.uv!==void 0&&_f.setAttribute("uv2",_f.attributes.uv),op.normalScale&&!rp&&(op.normalScale.y=-op.normalScale.y),op.clearcoatNormalScale&&!rp&&(op.clearcoatNormalScale.y=-op.clearcoatNormalScale.y),ep.material=op},Ep.prototype.loadMaterial=function(ep){var _f,op=this,rp=this.json,up=this.extensions,cp=rp.materials[ep],fp={},vp=cp.extensions||{},xp=[];if(vp[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var mp=up[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];_f=mp.getMaterialType(),xp.push(mp.extendParams(fp,cp,op))}else if(vp[Tu.KHR_MATERIALS_UNLIT]){var sp=up[Tu.KHR_MATERIALS_UNLIT];_f=sp.getMaterialType(),xp.push(sp.extendParams(fp,cp,op))}else{_f=e$g.MeshStandardMaterial;var lp=cp.pbrMetallicRoughness||{};if(fp.color=new e$g.Color(1,1,1),fp.opacity=1,Array.isArray(lp.baseColorFactor)){var $p=lp.baseColorFactor;fp.color.fromArray($p),fp.opacity=$p[3]}lp.baseColorTexture!==void 0&&xp.push(op.assignTexture(fp,"map",lp.baseColorTexture)),fp.metalness=lp.metallicFactor!==void 0?lp.metallicFactor:1,fp.roughness=lp.roughnessFactor!==void 0?lp.roughnessFactor:1,lp.metallicRoughnessTexture!==void 0&&(xp.push(op.assignTexture(fp,"metalnessMap",lp.metallicRoughnessTexture)),xp.push(op.assignTexture(fp,"roughnessMap",lp.metallicRoughnessTexture)))}cp.doubleSided===!0&&(fp.side=e$g.DoubleSide);var Mp=cp.alphaMode||_h;if(Mp===ap?(fp.transparent=!0,fp.depthWrite=!1):(fp.transparent=!1,Mp===ip&&(fp.alphaTest=cp.alphaCutoff!==void 0?cp.alphaCutoff:.5)),cp.normalTexture!==void 0&&_f!==e$g.MeshBasicMaterial&&(xp.push(op.assignTexture(fp,"normalMap",cp.normalTexture)),fp.normalScale=new e$g.Vector2(1,1),cp.normalTexture.scale!==void 0&&fp.normalScale.set(cp.normalTexture.scale,cp.normalTexture.scale)),cp.occlusionTexture!==void 0&&_f!==e$g.MeshBasicMaterial&&(xp.push(op.assignTexture(fp,"aoMap",cp.occlusionTexture)),cp.occlusionTexture.strength!==void 0&&(fp.aoMapIntensity=cp.occlusionTexture.strength)),cp.emissiveFactor!==void 0&&_f!==e$g.MeshBasicMaterial&&(fp.emissive=new e$g.Color().fromArray(cp.emissiveFactor)),cp.emissiveTexture!==void 0&&_f!==e$g.MeshBasicMaterial&&xp.push(op.assignTexture(fp,"emissiveMap",cp.emissiveTexture)),vp[Tu.KHR_MATERIALS_CLEARCOAT]){var kp=up[Tu.KHR_MATERIALS_CLEARCOAT];_f=kp.getMaterialType(),xp.push(kp.extendParams(fp,{extensions:vp},op))}return Promise.all(xp).then(function(){var Vp;return Vp=_f===Nu?up[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(fp):new _f(fp),cp.name&&(Vp.name=cp.name),Vp.map&&(Vp.map.encoding=e$g.sRGBEncoding),Vp.emissiveMap&&(Vp.emissiveMap.encoding=e$g.sRGBEncoding),Rp(Vp,cp),op.associations.set(Vp,{type:"materials",index:ep}),cp.extensions&&gp(up,Vp,cp),Vp})},Ep.prototype.loadGeometries=function(ep){var _f=this,op=this.extensions,rp=this.primitiveCache;function up(kp){return op[Tu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(kp,_f).then(function(Vp){return Bp(Vp,kp,_f)})}for(var cp,fp,vp=[],xp=0,mp=ep.length;xp<mp;xp++){var sp,lp=ep[xp],$p=(fp=void 0,(fp=(cp=lp).extensions&&cp.extensions[Tu.KHR_DRACO_MESH_COMPRESSION])?"draco:"+fp.bufferView+":"+fp.indices+":"+Dp(fp.attributes):cp.indices+":"+Dp(cp.attributes)+":"+cp.mode),Mp=rp[$p];Mp?vp.push(Mp.promise):(sp=lp.extensions&&lp.extensions[Tu.KHR_DRACO_MESH_COMPRESSION]?up(lp):Bp(new e$g.BufferGeometry,lp,_f),rp[$p]={primitive:lp,promise:sp},vp.push(sp))}return Promise.all(vp)},Ep.prototype.loadMesh=function(ep){for(var _f,op=this,rp=this.json.meshes[ep],up=rp.primitives,cp=[],fp=0,vp=up.length;fp<vp;fp++){var xp=up[fp].material===void 0?((_f=this.cache).DefaultMaterial===void 0&&(_f.DefaultMaterial=new e$g.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e$g.FrontSide})),_f.DefaultMaterial):this.getDependency("material",up[fp].material);cp.push(xp)}return cp.push(op.loadGeometries(up)),Promise.all(cp).then(function(mp){for(var sp=mp.slice(0,mp.length-1),lp=mp[mp.length-1],$p=[],Mp=0,kp=lp.length;Mp<kp;Mp++){var Vp,Gp=lp[Mp],qp=up[Mp],Wp=sp[Mp];if(qp.mode===qu||qp.mode===Yu||qp.mode===Ju||qp.mode===void 0)(Vp=rp.isSkinnedMesh===!0?new e$g.SkinnedMesh(Gp,Wp):new e$g.Mesh(Gp,Wp)).isSkinnedMesh!==!0||Vp.geometry.attributes.skinWeight.normalized||Vp.normalizeSkinWeights(),qp.mode===Yu?Vp.geometry=Ip(Vp.geometry,e$g.TriangleStripDrawMode):qp.mode===Ju&&(Vp.geometry=Ip(Vp.geometry,e$g.TriangleFanDrawMode));else if(qp.mode===ju)Vp=new e$g.LineSegments(Gp,Wp);else if(qp.mode===Qu)Vp=new e$g.Line(Gp,Wp);else if(qp.mode===Wu)Vp=new e$g.LineLoop(Gp,Wp);else{if(qp.mode!==Uu)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+qp.mode);Vp=new e$g.Points(Gp,Wp)}Object.keys(Vp.geometry.morphAttributes).length>0&&Sp(Vp,rp),Vp.name=rp.name||"mesh_"+ep,lp.length>1&&(Vp.name+="_"+Mp),Rp(Vp,rp),op.assignFinalMaterial(Vp),$p.push(Vp)}if($p.length===1)return $p[0];var Yp=new e$g.Group;for(Mp=0,kp=$p.length;Mp<kp;Mp++)Yp.add($p[Mp]);return Yp})},Ep.prototype.loadCamera=function(ep){var _f,op=this.json.cameras[ep],rp=op[op.type];if(rp)return op.type==="perspective"?_f=new e$g.PerspectiveCamera(e$g.MathUtils.radToDeg(rp.yfov),rp.aspectRatio||1,rp.znear||1,rp.zfar||2e6):op.type==="orthographic"&&(_f=new e$g.OrthographicCamera(-rp.xmag,rp.xmag,rp.ymag,-rp.ymag,rp.znear,rp.zfar)),op.name&&(_f.name=op.name),Rp(_f,op),Promise.resolve(_f);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Ep.prototype.loadSkin=function(ep){var _f=this.json.skins[ep],op={joints:_f.joints};return _f.inverseBindMatrices===void 0?Promise.resolve(op):this.getDependency("accessor",_f.inverseBindMatrices).then(function(rp){return op.inverseBindMatrices=rp,op})},Ep.prototype.loadAnimation=function(ep){for(var _f=this.json.animations[ep],op=[],rp=[],up=[],cp=[],fp=[],vp=0,xp=_f.channels.length;vp<xp;vp++){var mp=_f.channels[vp],sp=_f.samplers[mp.sampler],lp=mp.target,$p=lp.node!==void 0?lp.node:lp.id,Mp=_f.parameters!==void 0?_f.parameters[sp.input]:sp.input,kp=_f.parameters!==void 0?_f.parameters[sp.output]:sp.output;op.push(this.getDependency("node",$p)),rp.push(this.getDependency("accessor",Mp)),up.push(this.getDependency("accessor",kp)),cp.push(sp),fp.push(lp)}return Promise.all([Promise.all(op),Promise.all(rp),Promise.all(up),Promise.all(cp),Promise.all(fp)]).then(function(Vp){for(var Gp=Vp[0],qp=Vp[1],Wp=Vp[2],Yp=Vp[3],Kp=Vp[4],ev=[],Xp=0,Zp=Gp.length;Xp<Zp;Xp++){var Tp=Gp[Xp],Jp=qp[Xp],nv=Wp[Xp],ov=Yp[Xp],rv=Kp[Xp];if(Tp!==void 0){var hv;switch(Tp.updateMatrix(),Tp.matrixAutoUpdate=!0,_c[rv.path]){case _c.weights:hv=e$g.NumberKeyframeTrack;break;case _c.rotation:hv=e$g.QuaternionKeyframeTrack;break;case _c.position:case _c.scale:default:hv=e$g.VectorKeyframeTrack}var Av=Tp.name?Tp.name:Tp.uuid,xv=ov.interpolation!==void 0?Xc[ov.interpolation]:e$g.InterpolateLinear,wv=[];_c[rv.path]===_c.weights?Tp.traverse(function(wp){wp.isMesh===!0&&wp.morphTargetInfluences&&wv.push(wp.name?wp.name:wp.uuid)}):wv.push(Av);var fv=nv.array;if(nv.normalized){var $v;if(fv.constructor===Int8Array)$v=1/127;else if(fv.constructor===Uint8Array)$v=1/255;else if(fv.constructor==Int16Array)$v=1/32767;else{if(fv.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");$v=1/65535}for(var Tv=new Float32Array(fv.length),yv=0,Cv=fv.length;yv<Cv;yv++)Tv[yv]=fv[yv]*$v;fv=Tv}for(yv=0,Cv=wv.length;yv<Cv;yv++){var Dv=new hv(wv[yv]+"."+_c[rv.path],Jp.array,fv,xv);ov.interpolation==="CUBICSPLINE"&&(Dv.createInterpolant=function(wp){return new Hu(this.times,this.values,this.getValueSize()/3,wp)},Dv.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),ev.push(Dv)}}}var Ev=_f.name?_f.name:"animation_"+ep;return new e$g.AnimationClip(Ev,void 0,ev)})},Ep.prototype.loadNode=function(ep){var _f,op=this.json,rp=this.extensions,up=this,cp=op.meshReferences,fp=op.meshUses,vp=op.nodes[ep];return(_f=[],vp.mesh!==void 0&&_f.push(up.getDependency("mesh",vp.mesh).then(function(xp){var mp;if(cp[vp.mesh]>1){var sp=fp[vp.mesh]++;(mp=xp.clone()).name+="_instance_"+sp}else mp=xp;return vp.weights!==void 0&&mp.traverse(function(lp){if(lp.isMesh)for(var $p=0,Mp=vp.weights.length;$p<Mp;$p++)lp.morphTargetInfluences[$p]=vp.weights[$p]}),mp})),vp.camera!==void 0&&_f.push(up.getDependency("camera",vp.camera)),vp.extensions&&vp.extensions[Tu.KHR_LIGHTS_PUNCTUAL]&&vp.extensions[Tu.KHR_LIGHTS_PUNCTUAL].light!==void 0&&_f.push(up.getDependency("light",vp.extensions[Tu.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(_f)).then(function(xp){var mp;if((mp=vp.isBone===!0?new e$g.Bone:xp.length>1?new e$g.Group:xp.length===1?xp[0]:new e$g.Object3D)!==xp[0])for(var sp=0,lp=xp.length;sp<lp;sp++)mp.add(xp[sp]);if(vp.name&&(mp.userData.name=vp.name,mp.name=e$g.PropertyBinding.sanitizeNodeName(vp.name)),Rp(mp,vp),vp.extensions&&gp(rp,mp,vp),vp.matrix!==void 0){var $p=new e$g.Matrix4;$p.fromArray(vp.matrix),mp.applyMatrix4($p)}else vp.translation!==void 0&&mp.position.fromArray(vp.translation),vp.rotation!==void 0&&mp.quaternion.fromArray(vp.rotation),vp.scale!==void 0&&mp.scale.fromArray(vp.scale);return up.associations.set(mp,{type:"nodes",index:ep}),mp})},Ep.prototype.loadScene=function(){function ep(_f,op,rp,up){var cp=rp.nodes[_f];return up.getDependency("node",_f).then(function(fp){return cp.skin===void 0?fp:up.getDependency("skin",cp.skin).then(function(xp){for(var mp=[],sp=0,lp=(vp=xp).joints.length;sp<lp;sp++)mp.push(up.getDependency("node",vp.joints[sp]));return Promise.all(mp)}).then(function(xp){return fp.traverse(function(mp){if(mp.isMesh){for(var sp=[],lp=[],$p=0,Mp=xp.length;$p<Mp;$p++){var kp=xp[$p];if(kp){sp.push(kp);var Vp=new e$g.Matrix4;vp.inverseBindMatrices!==void 0&&Vp.fromArray(vp.inverseBindMatrices.array,16*$p),lp.push(Vp)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',vp.joints[$p])}mp.bind(new e$g.Skeleton(sp,lp),mp.matrixWorld)}}),fp});var vp}).then(function(fp){op.add(fp);var vp=[];if(cp.children)for(var xp=cp.children,mp=0,sp=xp.length;mp<sp;mp++){var lp=xp[mp];vp.push(ep(lp,fp,rp,up))}return Promise.all(vp)})}return function(_f){var op=this.json,rp=this.extensions,up=this.json.scenes[_f],cp=new e$g.Group;up.name&&(cp.name=up.name),Rp(cp,up),up.extensions&&gp(rp,cp,up);for(var fp=up.nodes||[],vp=[],xp=0,mp=fp.length;xp<mp;xp++)vp.push(ep(fp[xp],cp,op,this));return Promise.all(vp).then(function(){return cp})}}(),_u}()),Wr$1=new r$n.Matrix4().makeRotationAxis(new r$n.Vector3(1,0,0),Math.PI/2);function Xr(_u){function $u(Tu){if(Tu.isMesh)return function(Lu){var Bu=new ft$2;Bu.geometry=Lu.geometry,Bu.geometry.computeVertexNormals(),Bu.geometry.computeBoundingBox(),Bu.geometry.computeBoundingSphere(),Bu.geometry.addGroup(0,Lu.geometry.index.count,0);var Vu=new Mt$1;return Vu.uniforms.map.value=Lu.material.map,Vu.uniforms.exposure.value=3.3,Vu.opacity=1,Lu.material.dispose(),Bu.material=[Vu],Bu.position.copy(Lu.position),Bu.quaternion.copy(Lu.quaternion),Bu.scale.copy(Lu.scale),Bu.matrix.compose(Bu.position,Bu.quaternion,Bu.scale),Bu}(Tu);if(Tu.isGroup){for(var Cu=function(Lu){var Bu=new gt$3;return Bu.position.copy(Lu.position),Bu.quaternion.copy(Lu.quaternion),Bu.scale.copy(Lu.scale),Bu.matrix.compose(Bu.position,Bu.quaternion,Bu.scale),Bu}(Tu),Pu=0;Pu<Tu.children.length;Pu++){var Ru=$u(Tu.children[Pu]);Cu.add(Ru)}return Cu}return new gt$3}return new Promise(function(Tu,Cu){var Pu,Ru=new r$n.Matrix4().fromArray(_u.computedTransform);if(((Pu=_u.tileset.asset)===null||Pu===void 0?void 0:Pu.gltfUpAxis)!=="Z"&&Ru.multiply(Wr$1),_u.content){var Lu=_u.content.gltfArrayBuffer,Bu=_u.contentUrl?_u.contentUrl.slice(0,_u.contentUrl.lastIndexOf("/")+1):"";Gr.parse(Lu,Bu,function(Vu){var Ou=Vu.scene,Du=new gt$3,ku=$u(Ou);ku.applyMatrix4(Ru),Du.add(ku),Tu(Du)},function(Vu){Cu(new Error("error parsing gltf in tile ".concat(_u.id,": ").concat(Vu.message)))})}else Tu(new gt$3)})}function Yr(_u){_u.traverse(function($u){if($u instanceof ft$2){$u.geometry.dispose();for(var Tu=0,Cu=$u.material;Tu<Cu.length;Tu++){var Pu=Cu[Tu];Pu.uniforms.map&&Pu.uniforms.map.value&&(Pu.uniforms.map.value.dispose(),Pu.uniforms.map.value=null)}}})}function Zr(_u){return new r$n.Matrix4().fromArray([2*_u[0],2*_u[1],2*_u[2],0,2*_u[3],2*_u[4],2*_u[5],0,2*_u[6],2*_u[7],2*_u[8],0,0,0,0,1])}function Jr(_u){return new Tn(_u.toArray())}function $r(_u){var $u=_u.planes.map(function(Tu){return new kn(Tu.normal.toArray(),Tu.constant)});return new Fn($u)}var eo=new r$n.EdgesGeometry(new r$n.BoxBufferGeometry(1,1,1)),to=new r$n.LineBasicMaterial({color:new r$n.Color(1,1,0),transparent:!0});function io(_u){_u.updateMatrix(),_u.updateMatrixWorld(),_u.matrixWorld.getInverse(_u.matrixWorldInverse);var $u=new r$n.Matrix4().multiplyMatrices(_u.projectionMatrix,_u.matrixWorldInverse);return new r$n.Frustum().setFromProjectionMatrix($u)}var no={throttleRequests:!0,maxRequests:64,updateInterval:.1,maxScreenSpaceError:8,maxMemoryUsage:32,viewDistanceScale:.2,onNodeCreated:function(){}},ro=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu=_u.call(this)||this;return Cu.options=t$h.__assign(t$h.__assign({},no),Tu),Cu.clock=new r$n.Clock,Cu.timer=0,Cu.unloadTileQueue=[],Cu.nodes={},Cu.boundings={},Cu.nodeGroup=new r$n.Group,Cu.boundingGroup=new r$n.Group,Cu.add(Cu.nodeGroup),Cu.sseDenominator=null,Cu.lastCameraTransform=new r$n.Matrix4,Cu.lastCameraAspect=1,Cu.lastCameraFov=null,Cu.lastCamera=null,Cu.lastRenderer=null,Cu.enabled=!1,Cu}return t$h.__extends($u,_u),Object.defineProperty($u.prototype,"enable",{get:function(){return this.enabled},set:function(Tu){this.enabled!==Tu&&(this.enabled=Tu,this.enabled===!1?this.reset():(this.timer=0,this.clock.getDelta()))},enumerable:!1,configurable:!0}),$u.prototype.load=function(Tu){var Cu=this,Pu=Tu.tileset_url;Tu.tileset_url_md5;var Ru=Tu.b3md_mappings_url;Tu.b3md_mappings_url_md5;var Lu={modelMatrix:Jr(new r$n.Matrix4().fromArray([1,0,0,0,0,-1,0,1e9,0,0,-1,0,0,0,0,1])),maxMemoryUsage:this.options.maxMemoryUsage,maxScreenSpaceError:this.options.maxScreenSpaceError,viewDistanceScale:this.options.viewDistanceScale,throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests,contentLoader:function(Du){var ku=function(Fu){var Nu=Fu.boundingVolume,Gu=new r$n.LineSegments(eo,to);return Gu.applyMatrix4(Zr(Nu.halfAxes)),Gu.position.set(Nu.center[0],Nu.center[1],Nu.center[2]),Gu}(Du);return ku.visible=!1,Cu.boundings[Du.id]=ku,Cu.boundingGroup.add(ku),ku.updateMatrixWorld(!0),Du.type==="SCENEGRAPH"||Du.type==="MESH"?Xr(Du).then(function(Fu){Cu.tileset===void 0?Yr(Fu):(Fu.visible=!1,Cu.nodes[Du.id]=Fu,Cu.nodeGroup.add(Fu),Cu.options.onNodeCreated(Fu),Fu.updateMatrixWorld(!0))}):Promise.resolve()},onTileLoad:function(){Cu.enabled&&Cu.tileset&&Cu.lastRenderer&&Cu.lastCamera&&(Cu.tileset.frameNumber++,Cu.tilesetUpdate(Cu.tileset,Cu.lastRenderer,Cu.lastCamera)),Cu.enabled||Cu.reset()},onTileUnload:function(Du){Cu.unloadTileQueue.push(Du)},onTileError:function(Du,ku){console.error("Tile error",Du.id,ku)},onTraversalComplete:function(Du){return Du},allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy,maxDepth:this.options.maxDepth},Bu=Pu.split("/").slice(0,-1).join("/"),Vu=it$4(Pu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Du){return JSON.parse(Du.body)}).then(function(Du){return jr(Du,Bu)}),Ou=it$4(Ru,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Du){return JSON.parse(Du.body)});Promise.all([Vu,Ou]).then(function(Du){var ku=Du[0],Fu=Du[1];ku.b3dmMapping=Fu;var Nu=Cu.tileset=new qr$1(ku,Lu),Gu=new r$n.Matrix4;if(Nu.root&&Nu.root.boundingVolume){var zu=Nu.root.boundingVolume,Hu=zu.halfAxes,Uu=zu.center;Gu.extractRotation(Zr(Hu)),Gu.setPosition(Uu[0],Uu[1],Uu[2])}Nu.modelMatrix.copy(Jr(new r$n.Matrix4().getInverse(Gu)))})},$u.prototype.update=function(Tu,Cu){this.lastCamera=Cu,this.lastRenderer=Tu,this.enabled!==!1&&(this.timer+=this.clock.getDelta(),this.tileset&&this.timer>=this.options.updateInterval&&(Cu.matrixWorld.equals(this.lastCameraTransform)&&Cu.aspect===this.lastCameraAspect&&Cu.fov===this.lastCameraFov||(this.timer=0,this.tileset.frameNumber++,this.lastCameraTransform.copy(Cu.matrixWorld),this.tilesetUpdate(this.tileset,Tu,Cu))))},$u.prototype.tilesetUpdate=function(Tu,Cu,Pu){this.sseDenominator&&Pu.aspect===this.lastCameraAspect&&Pu.fov===this.lastCameraFov||(this.sseDenominator=function(Nu){var Gu=Nu.aspect,zu=Nu.fov/180*Math.PI,Hu=Nu.aspect<=1?zu:2*Math.atan(Math.tan(.5*zu)/Gu);return 2*Math.tan(.5*Hu)}(Pu),this.lastCameraAspect=Pu.aspect,this.lastCameraFov=Pu.fov);var Ru,Lu={camera:{position:Pu.getWorldPosition(new r$n.Vector3).toArray(),direction:Pu.getWorldDirection(new r$n.Vector3).toArray(),up:Pu.up.toArray()},height:Cu.getSize(new r$n.Vector2).height,frameNumber:Tu.frameNumber,sseDenominator:this.sseDenominator,cullingVolume:$r(io(Pu))};Tu.cache.reset(),Tu.traverser.traverse(Tu.root,Lu);for(var Bu=0,Vu=Tu.tiles;Bu<Vu.length;Bu++){var Ou=Vu[Bu],Du=Ou.selected,ku=Ou.id;this.nodes[ku]&&this.nodes[ku].visible!==Du&&(this.nodes[ku].visible=Du,Du&&(this.nodes[ku].needsRender=!0)),this.boundings[ku]&&this.boundings[ku].visible!==Du&&(this.boundings[ku].visible=Du)}for(;Ru=this.unloadTileQueue.pop();){if(ku=Ru.id,this.nodes[ku]){var Fu=this.nodes[ku];this.nodeGroup.remove(Fu),Yr(Fu),delete this.nodes[ku]}this.boundings[ku]&&(Fu=this.boundings[ku],this.boundingGroup.remove(Fu),delete this.boundings[ku])}},$u.prototype.reset=function(){if(this.tileset){this.tileset.reset();for(var Tu=void 0;Tu=this.unloadTileQueue.pop();)if(Tu.contentState!=="UNLOADED"){var Cu=Tu.id;if(this.nodes[Cu]){var Pu=this.nodes[Cu];this.nodeGroup.remove(Pu),Yr(Pu),delete this.nodes[Cu]}this.boundings[Cu]&&(Pu=this.boundings[Cu],this.boundingGroup.remove(Pu),delete this.boundings[Cu])}for(var Ru=0,Lu=Object.keys(this.nodes);Ru<Lu.length;Ru++){Cu=Lu[Ru];var Bu=this.nodes[Cu];this.nodeGroup.remove(Bu),Yr(Bu),delete this.nodes[Cu]}for(var Vu=0,Ou=Object.keys(this.boundings);Vu<Ou.length;Vu++)Cu=Ou[Vu],Bu=this.boundings[Cu],this.boundingGroup.remove(Bu),delete this.boundings[Cu]}},$u}(At$1);function oo(_u){return _u==null}var so=function(_u,$u){$u===void 0&&($u=1e-4),$u=Math.max($u,Number.EPSILON);for(var Tu={},Cu=_u.getIndex(),Pu=_u.getAttribute("position"),Ru=Cu?Cu.count:Pu.count,Lu=0,Bu=Object.keys(_u.attributes),Vu={},Ou={},Du=[],ku=["getX","getY","getZ","getW"],Fu=0,Nu=Bu.length;Fu<Nu;Fu++)Vu[Wu=Bu[Fu]]=[],(Ju=_u.morphAttributes[Wu])&&(Ou[Wu]=new Array(Ju.length).fill().map(function(){return[]}));var Gu=Math.log10(1/$u),zu=Math.pow(10,Gu);for(Fu=0;Fu<Ru;Fu++){var Hu=Cu?Cu.getX(Fu):Fu,Uu="",ju=0;for(Nu=Bu.length;ju<Nu;ju++)for(var Wu=Bu[ju],Qu=(Yu=_u.getAttribute(Wu)).itemSize,qu=0;qu<Qu;qu++)Uu+="".concat(~~(Yu[ku[qu]](Hu)*zu),",");if(Uu in Tu)Du.push(Tu[Uu]);else{for(ju=0,Nu=Bu.length;ju<Nu;ju++){Wu=Bu[ju];var Yu=_u.getAttribute(Wu),Ju=_u.morphAttributes[Wu],_d=(Qu=Yu.itemSize,Vu[Wu]),tp=Ou[Wu];for(qu=0;qu<Qu;qu++){var Ku=ku[qu];if(_d.push(Yu[Ku](Hu)),Ju)for(var Xu=0,Zu=Ju.length;Xu<Zu;Xu++)tp[Xu].push(Ju[Xu][Ku](Hu))}}Tu[Uu]=Lu,Du.push(Lu),Lu++}}var _c=_u.clone();for(Fu=0,Nu=Bu.length;Fu<Nu;Fu++){Wu=Bu[Fu];var Xc=_u.getAttribute(Wu),_h=new Xc.array.constructor(Vu[Wu]);if(Yu=new r$n.BufferAttribute(_h,Xc.itemSize,Xc.normalized),_c.setAttribute(Wu,Yu),Wu in Ou)for(ju=0;ju<Ou[Wu].length;ju++){var ip=_u.morphAttributes[Wu][ju],ap=(_h=new ip.array.constructor(Ou[Wu][ju]),new r$n.BufferAttribute(_h,ip.itemSize,ip.normalized));_c.morphAttributes[Wu][ju]=ap}}return _c.setIndex(Du),_c};function ao(_u){var $u;return new(($u=r$n.Triangle).bind.apply($u,t$h.__spreadArray([void 0],_u.map(function(Tu){return new r$n.Vector3(Tu.x,Tu.y,Tu.z)}),!1)))}var lo={at3d:function(_u,$u){for(var Tu=Ni($u.textureOptions,_u.textures.length),Cu={},Pu=0,Ru=_u.textures;Pu<Ru.length;Pu++){var Lu=Ru[Pu];Cu[Lu]=Li(Lu,Tu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$4(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Bu){return ti$1(Bu.body)}).then(function(Bu){return jt$2(function(){for(var Vu,Ou={chunks:[]},Du=0,ku=Bu;Du<ku.length;Du++){var Fu=ku[Du],Nu=Ti.decode(Fu);Nu.chunks.length&&(Vu=Ou.chunks).push.apply(Vu,Nu.chunks)}return Ou})}).then(function(Bu){return jt$2(function(){return Oi(Bu,_u.textureBase,_u.textures.slice(),Tu,Cu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},pbm:function(_u,$u){for(var Tu=Ni($u.textureOptions,_u.textures.length),Cu={},Pu=0,Ru=_u.textures;Pu<Ru.length;Pu++){var Lu=Ru[Pu];Cu[Lu]=Li(Lu,Tu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$4(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Bu){return jt$2(function(){var Vu=new Uint8Array(Bu.body);return Ti.decode(Vu)})}).then(function(Bu){return jt$2(function(){return Oi(Bu,_u.textureBase,_u.textures.slice(),Tu,Cu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},dome:function(_u,$u){return Promise.resolve().then(function(){return it$4(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Tu){return ji(new Uint8Array(Tu.body),_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})},domez:function(_u,$u){return Promise.resolve().then(function(){return it$4(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Tu){return ti$1(Tu.body)}).then(function(Tu){var Cu=Tu.reduce(function(Lu,Bu){return Lu+Bu.length},0),Pu=new Uint8Array(Cu),Ru=0;return Tu.forEach(function(Lu){Pu.set(Lu,Ru),Ru+=Lu.length}),Pu}).then(function(Tu){return ji(Tu,_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})}},uo=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu=_u.call(this)||this;return Cu.empty=!0,Cu.name="model",Cu.loaded=!1,Cu.bvhs=Object.assign([],{loaded:!1}),Cu.bounding=new r$n.Box3,Cu.shownFloor=null,Cu.floorLength=0,Cu.requestProxy=Tu.requestProxy,Cu.networkSubscribe=Tu.networkSubscribe,Cu.allowHosts=Tu.allowHosts,Cu.renderOrder=-3,Cu}return t$h.__extends($u,_u),Object.defineProperty($u.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"hasTiles",{get:function(){return this.tiledModel!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableTiles",{get:function(){return!!this.tiledModel&&this.tiledModel.enable},set:function(Tu){this.tiledModel&&(this.tiledModel.enable=Tu)},enumerable:!1,configurable:!0}),$u.prototype.getEdges=function(Tu){var Cu;if(Tu===void 0&&(Tu=30/180*Math.PI),!this.originModel)return[];for(var Pu=Math.cos(Tu),Ru=[],Lu=0,Bu=this.originModel.children;Lu<Bu.length;Lu++){var Vu=Bu[Lu];if(Vu instanceof ft$2){for(var Ou={},Du=["a","b","c"],ku=so(Vu.geometry),Fu=ku.getAttribute("position").array,Nu=((Cu=ku.getIndex())===null||Cu===void 0?void 0:Cu.array)||[],Gu=[],zu=[],Hu=0,Uu=Fu.length;Hu<Uu;Hu+=3)Gu.push(new r$n.Vector3(Fu[Hu],Fu[Hu+1],Fu[Hu+2]));for(Hu=0,Uu=Nu.length;Hu<Uu;Hu+=3){var ju=Nu[Hu],Wu=Nu[Hu+1],Qu=Nu[Hu+2],qu=new r$n.Vector3().crossVectors(Gu[Wu].clone().sub(Gu[ju]),Gu[Qu].clone().sub(Gu[ju])).normalize();zu.push({a:ju,b:Wu,c:Qu,normal:qu})}for(Hu=0,Uu=zu.length;Hu<Uu;Hu++)for(var Yu=zu[Hu],Ju=0;Ju<3;Ju++){var _d=Yu[Du[Ju]],tp=Yu[Du[(Ju+1)%3]],Ku=[Math.min(_d,tp),Math.max(_d,tp)];Ou[Xu=Ku[0]+"-"+Ku[1]]===void 0?Ou[Xu]={index1:Ku[0],index2:Ku[1],face1:Hu}:Ou[Xu].face2=Hu}for(var Xu in Ou){var Zu=Ou[Xu];if(Zu.face2===void 0||zu[Zu.face1].normal.dot(zu[Zu.face2].normal)<=Pu){var _c=Gu[Zu.index1],Xc=Gu[Zu.index2];Ru.push(new r$n.Line3(_c,Xc))}}ku.dispose(),Gu.length=0,zu.length=0}}return Ru},$u.prototype.hasFloors=function(){return this.hasFloors_()},$u.prototype.hasFloors_=function(){var Tu=[];return this.traverse(function(Cu){Cu instanceof ft$2&&(Tu[Cu.floorIndex]=!0)}),Tu.length},$u.prototype.show=function(){for(var Tu,Cu,Pu=[],Ru=0;Ru<arguments.length;Ru++)Pu[Ru]=arguments[Ru];var Lu=this.shownFloor,Bu=null,Vu=(Tu=Pu[1])!==null&&Tu!==void 0?Tu:.1,Ou=Pu.length!==0;this.shownFloor=Bu=Ou?Pu[0]:null,this.setMaterial({opacity:1,floorInfo:new r$n.Vector3(0,0,0)}),!((Cu=this.tiledModel)===null||Cu===void 0)&&Cu.enable?this.b3dmShow(Lu,Bu):this.at3dShow(Lu,Bu,Vu)},$u.prototype.at3dShow=function(Tu,Cu,Pu){this.traverse(function(Ru){Ru instanceof ft$2&&Ru.material.forEach(function(Lu){Cu===null||Cu===Ru.floorIndex?Lu.opacity=1*Lu.originOpacity:Lu.opacity=Lu.originOpacity*Pu})}),Tu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},$u.prototype.b3dmShow=function(Tu,Cu){var Pu,Ru;if(!((Ru=(Pu=this.tiledModel)===null||Pu===void 0?void 0:Pu.tileset)===null||Ru===void 0)&&Ru.floorInfo){if(typeof Cu=="number"&&Cu>=0&&Cu<this.tiledModel.tileset.floorInfo.length){var Lu=this.tiledModel.tileset.floorInfo,Bu=-Lu[Cu].ground,Vu=Lu[Cu].height+Bu;this.setMaterial({opacity:1,floorInfo:new r$n.Vector3(Bu,Vu,0)})}else this.setMaterial({opacity:1,floorInfo:new r$n.Vector3(0,0,0)});Tu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0}},$u.prototype.intersectRaycaster=function(Tu,Cu){var Pu=Tu.ray,Ru=Pu.origin,Lu=Pu.direction;if(oo(Cu))if(oo(this.shownFloor)){var Bu=this.floorLength;Cu=[];for(var Vu=-1;Vu<Bu;Vu++)Cu.push(Vu)}else Cu=[this.shownFloor];var Ou=[],Du=[];Array.isArray(Cu)?Du.push.apply(Du,Cu):Du.push(Cu);for(var ku=function(zu){var Hu=Fu.bvhs&&Fu.bvhs[zu];if(Hu){var Uu=new Ot$2(Ru.x,Ru.y,Ru.z),ju=new Ot$2(Lu.x,Lu.y,Lu.z);(Wu=Hu.intersectRay(Uu,ju,!0).map(function(qu){var Yu=qu.intersectionPoint,Ju=qu.triangle,_d=new r$n.Vector3(Yu.x,Yu.y,Yu.z);return{point:_d,face:{normal:ao(Ju).getNormal(new r$n.Vector3)},distance:Ru.distanceTo(_d)}})).length&&Ou.push.apply(Ou,Wu)}else if(Fu.originModel){var Wu,Qu=[];Fu.originModel.traverse(function(qu){qu instanceof ft$2&&qu.floorIndex===zu&&Qu.push(qu)}),(Wu=Tu.intersectObjects(Qu).map(function(qu){return{face:qu.face?{normal:qu.face.normal}:void 0,point:qu.point,distance:qu.distance}})).length&&Ou.push.apply(Ou,Wu)}},Fu=this,Nu=0,Gu=Du;Nu<Gu.length;Nu++)ku(Gu[Nu]);return Ou.filter(function(zu){var Hu=zu.distance;return Hu<=Tu.far&&Hu>=Tu.near}).sort(function(zu,Hu){return zu.distance-Hu.distance})},$u.prototype.buildBVH=function(){if(!this.bvhs.loaded&&this.originModel){var Tu=[];this.originModel.traverse(function(Yu){Yu instanceof ft$2&&(Tu[Yu.floorIndex]=Tu[Yu.floorIndex]||[],Tu[Yu.floorIndex].push(Yu.geometry))}),this.bvhs.length=0;for(var Cu=0,Pu=Tu;Cu<Pu.length;Cu++){var Ru=Pu[Cu],Lu=0;if(Ru){for(var Bu=0,Vu=Ru;Bu<Vu.length;Bu++){var Ou=0;Ou=(Gu=Vu[Bu]).index?Gu.index.array.length:Gu.attributes.position.array.length/3,Lu+=3*Math.floor(Ou/3)}for(var Du=new Float32Array(3*Lu),ku=0,Fu=0,Nu=Ru;Fu<Nu.length;Fu++){var Gu,zu=(Gu=Nu[Fu]).attributes.position.array,Hu=Gu.index?Gu.index.array:null;if(Hu){for(var Uu=3*Math.floor(Hu.length/3),ju=0,Wu=void 0,Qu=void 0;ju<Uu;ju++)Wu=3*(ku+ju),Qu=3*Hu[ju],Du[Wu]=zu[Qu],Du[Wu+1]=zu[Qu+1],Du[Wu+2]=zu[Qu+2];ku+=Uu}else{for(Uu=3*Math.floor(zu.length/3/3),ju=0,Wu=void 0,Qu=void 0;ju<Uu;ju++)Qu=3*ju,Du[Wu=3*(ku+ju)]=zu[Qu],Du[Wu+1]=zu[Qu+1],Du[Wu+2]=zu[Qu+2];ku+=Uu}}var qu=new qt$1().create(Du).splitNode(50);this.bvhs.push(qu)}}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},$u.prototype.load=function(Tu,Cu){var Pu=this;if(Cu===void 0&&(Cu={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Ru=function(Bu,Vu){if(Vu===void 0&&(Vu=[]),/^blob\:/.test(Bu))return"at3d";var Ou=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Bu);if(!Ou)return"";for(var Du=0,ku=String(Ou[1]).trim().split(".").slice(1).reverse();Du<ku.length;Du++){var Fu=ku[Du],Nu=Vu.indexOf(Fu);if(Nu>=0)return Vu[Nu]}return""}(Tu.file,Object.keys(lo)),Lu=lo[Ru];if(!Lu)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Ru,") does not support."));return this.name=Tu.file,Lu(Tu,{textureOptions:Cu,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}).then(function(Bu){var Vu=Bu.objects,Ou=Bu.texturePromise;Pu.bounding.makeEmpty();var Du=Pu.originModel=new At$1;Du.renderOrder=-3;for(var ku=0,Fu=Vu;ku<Fu.length;ku++)(Hu=Fu[ku]).traverse(function(ju){if(ju instanceof ft$2){var Wu=ju.geometry;Wu.boundingBox||Wu.computeBoundingBox(),Wu.boundingSphere||Wu.computeBoundingSphere(),Pu.bounding.union(Wu.boundingBox)}}),Du.add(Hu);for(var Nu=Pu.bounding.getCenter(new r$n.Vector3),Gu=0,zu=Vu;Gu<zu.length;Gu++){var Hu;(Hu=zu[Gu]).traverse(function(ju){if(ju instanceof ft$2)for(var Wu=0,Qu=ju.material;Wu<Qu.length;Wu++)Qu[Wu].uniforms.modelCenter.value=Nu})}if(Pu.add(Du),Pu.floorLength=Pu.hasFloors_(),Pu.empty=!1,Pu.loaded=!0,Tu.tiles&&Tu.tiles.tileset_url&&Tu.tiles.b3md_mappings_url){var Uu=Pu.tiledModel=new ro({onNodeCreated:function(ju){var Wu=Du.getMaterial();Wu&&(ju.setMaterial(Wu),ju.renderOrder=-3),ju.traverse(function(Qu){if(Qu instanceof ft$2)for(var qu=0,Yu=Qu.material;qu<Yu.length;qu++)Yu[qu].uniforms.modelCenter.value=Nu})},allowHosts:Pu.allowHosts,networkSubscribe:Pu.networkSubscribe,requestProxy:Pu.requestProxy});Uu.renderOrder=-3,Pu.add(Uu),Uu.load(Tu.tiles)}Tu.bvh&&Pu.buildBVH(),jt$2(function(){Pu.emit("geometryLoaded"),Ou.then(function(){Pu.emit("materialLoaded"),Pu.emit("loaded")})})}).catch(function(Bu){return Pu.name="",Pu.emit("error",Bu),Promise.reject(Bu)})},$u.prototype.update=function(Tu,Cu){if(this.originModel){var Pu=this.originModel.visible;if(this.tiledModel&&this.tiledModel.enable&&this.tiledModel.tileset){this.tiledModel.update(Tu,Cu);var Ru=this.tiledModel.tileset.root;Ru.content&&Ru.contentState==="READY"&&Pu!==!1&&(this.setTransparent(!1),this.shownFloor&&this.show(this.shownFloor),this.originModel.visible=!1,this.originModel.needsRender=!0)}else Pu!==!0&&(this.originModel.visible=!0,this.originModel.needsRender=!0)}},$u.prototype.dispose=function(){this.off();var Tu=this.originModel,Cu=this.tiledModel;if(Cu&&(Cu.enable=!1,Cu.reset()),Tu)for(Tu.disposeGeometry(),Tu.disposeMaterial();Tu.children.length;)Tu.remove(Tu.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},$u}(At$1);Object.assign(uo.prototype,{on:Fe.prototype.on,once:Fe.prototype.once,off:Fe.prototype.off,emit:Fe.prototype.emit,hasListener:Fe.prototype.hasListener});function ho(_u,$u,Tu){return _u<$u?$u:_u>Tu?Tu:_u}function co(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=[];_u=_u.map(function(Bu){return(Bu!=null?Bu:"").trim()}).filter(function(Bu){return Bu.length>0&&!/^\/+$/.test(Bu)});for(var Cu=0;Cu<_u.length;Cu++){var Pu=Cu===0,Ru=Cu===_u.length-1,Lu=_u[Cu];Pu||(Lu=Lu.replace(/^\/+/,"")),Ru||(Lu=Lu.replace(/\/+$/,"")),Tu.push(Lu)}return Tu.join("/")}function po(_u,$u){if(_u===$u)return!0;if(_u&&$u&&typeof _u=="object"&&typeof $u=="object"){if(_u.constructor!==$u.constructor)return!1;var Tu,Cu,Pu;if(Array.isArray(_u)){if((Tu=_u.length)!=$u.length)return!1;for(Cu=Tu;Cu--!=0;)if(!po(_u[Cu],$u[Cu]))return!1;return!0}if(_u.constructor===RegExp)return _u.source===$u.source&&_u.flags===$u.flags;if(_u.valueOf!==Object.prototype.valueOf)return _u.valueOf()===$u.valueOf();if(_u.toString!==Object.prototype.toString)return _u.toString()===$u.toString();if((Tu=(Pu=Object.keys(_u)).length)!==Object.keys($u).length)return!1;for(Cu=Tu;Cu--!=0;)if(!Object.prototype.hasOwnProperty.call($u,Pu[Cu]))return!1;for(Cu=Tu;Cu--!=0;){var Ru=Pu[Cu];if(!po(_u[Ru],$u[Ru]))return!1}return!0}return _u!=_u&&$u!=$u}function fo(_u){return typeof _u=="number"}function Ao(_u){return(_u&_u-1)==0&&_u!==0}var go=function(){return new Error("Invalid input.")},mo=function(){return new Error("Invalid certificate.")},vo=function(){return new Error("Invalid signature.")};function yo(_u,$u){$u===void 0&&($u=!1);var Tu=typeof _u;if(Tu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Cu="[",Pu=_u.length-1,Ru=0;Ru<Pu;Ru++)Cu+=yo(_u[Ru],!1)+",";return Pu>-1&&(Cu+=yo(_u[Ru],!1)),Cu+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return yo(_u.toJSON(),$u);var Lu=Object.keys(_u).sort(),Bu=Lu.length;for(Cu="",Ru=0;Ru<Bu;){var Vu=Lu[Ru],Ou=yo(_u[Vu],!0);Ou!==void 0&&(Ru&&Cu!==""&&(Cu+=","),Cu+=JSON.stringify(Vu)+":"+Ou),Ru++}return"{"+Cu+"}"}switch(Tu){case"function":case"undefined":return $u?void 0:null;case"number":return 0;default:return isFinite(_u)?_u:null}}function bo(_u){return String(yo(_u,!1))}function xo(_u){var $u,Tu,Cu;if(Array.isArray(_u)){var Pu,Ru,Lu=void 0;if(_u.length<=0)return go();for(var Bu=function(Qu){var qu=xo(_u[Qu]);if(qu instanceof Error)return{value:qu};if(Lu){if(Lu!==qu.issuer)return{value:mo()}}else Lu=qu.issuer;Pu?qu.expire.getTime()<Pu.getTime()&&(Pu=qu.expire):Pu=qu.expire,Ru=Ru?Ru.filter(function(Yu){return qu.allowHosts.indexOf(Yu)!==-1}):qu.allowHosts},Vu=0;Vu<_u.length;Vu++){var Ou=Bu(Vu);if(typeof Ou=="object")return Ou.value}return He({issuer:Lu,expire:Pu,allowHosts:Ru})}var Du=JSON.parse(_u),ku=typeof location!="undefined"?location.hostname:"",Fu=Date.now();if(typeof Du!="object")return go();var Nu=new Date(typeof Du.expire_at=="string"&&/^\d+$/.test(Du.expire_at)?Number(Du.expire_at):Du.expire_at),Gu=Array.isArray(Du.allow_hosts)?Du.allow_hosts:[];if(ku.length===0||ze(ku)||je$1.filter(function(Qu){return Ke(Qu,ku)}).length>0){var zu=String(($u=Du.certificate)!==null&&$u!==void 0?$u:"");if(zu){var Hu=new Be;return Hu.readCertPEM(zu),He({issuer:Hu.getSubjectString(),expire:Nu,allowHosts:Gu})}return He({issuer:"none",expire:Nu,allowHosts:Gu})}var Uu=String((Tu=Du.certificate)!==null&&Tu!==void 0?Tu:"");if(!Uu)return mo();var ju=new Be;ju.readCertPEM(Uu);var Wu=String((Cu=Du._signature)!==null&&Cu!==void 0?Cu:"");return Wu?function(Qu,qu,Yu){var Ju=new Be;if(typeof Yu=="string"?Ju.readCertPEM(Yu):Ju.readCertHex(Yu.hex),De$1(Ju)===!1)return!1;var _d=new X$5;return _d.readCertPubKeyHex(Ju.hex,6),!!_d.verify(Qu,O$e(qu))}(bo(function(Qu,qu){for(var Yu={},Ju=0,_d=Object.keys(Qu);Ju<_d.length;Ju++){var tp=_d[Ju];qu.indexOf(tp)===-1&&(Yu[tp]=Qu[tp])}return Yu}(Du,["_signature"])),Wu,ju)===!1?vo():Fu<Nu.getTime()?Gu.filter(function(Qu){return Ke(Qu,ku)}).length===0?function(Qu){return new Error("host(".concat(JSON.stringify(Qu),") is not allowed."))}(ku):He({issuer:ju.getSubjectString(),expire:Nu,allowHosts:Gu}):function(Qu){return new Error("date(".concat(Qu.toString(),") expired."))}(Nu):vo()}var wo=new WeakMap,Eo=function(){function _u(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return _u.prototype.toJSON=function(){return this.raw.works},_u.parse=Co,_u}();function Mo(_u){return _u==null?"null":Array.isArray(_u)?"array":typeof _u=="object"?"dict":"value"}function Io(_u,$u){var Tu=Mo(_u),Cu=Mo($u);if(Cu==="null")return _u;if(Cu==="value")return $u;if(Cu!==Tu)return JSON.parse(JSON.stringify($u));if(Cu==="array")for(var Pu=0;Pu<$u.length;Pu++)_u[Pu]=Io(_u[Pu],$u[Pu]);else if(Cu==="dict")for(var Ru in $u)_u[Ru]=Io(_u[Ru],$u[Ru]);return _u}function So(_u,$u,Tu){for(var Cu,Pu=JSON.stringify($u),Ru=[],Lu=0,Bu=[].concat(_u);Lu<Bu.length;Lu++){var Vu=Bu[Lu];Vu instanceof Eo?Ru.push.apply(Ru,Vu.raw.works):typeof Vu=="string"?Ru.push(Vu):Ru.push(JSON.stringify(Vu))}var Ou=xo(Ru);if(Ou instanceof Error)return Ou;$u=JSON.parse(Pu),_u=Ru.map(function(mp){return JSON.parse(mp)}).reduce(function(mp,sp){return Io(mp,sp)});var Du=new Eo;if(Ou instanceof Error)return Ou;Du.issuer=Ou.issuer,Du.expire=Ou.expire,Du.allowHosts=Ou.allowHosts,Du.raw={works:Ru,options:Pu};var ku=(Cu=_u.base_url)!==null&&Cu!==void 0?Cu:"";ku&&ku[ku.length-1]!=="/"&&(ku+="/");var Fu=function(mp,sp){return mp.indexOf(sp)===0},Nu=function(mp,sp){var lp,$p=mp;if($u.jsonp===!0){$p=mp.replace(/([\?\#].*)?$/i,"");var Mp=Te$1("".concat($p)).slice(0,7);$p="".concat($p,".").concat(Mp,".jsonp")}if($u.shortPath===!0){var kp=$p.replace(ku,"").split("."),Vp=(lp=kp.shift())!==null&&lp!==void 0?lp:"",Gp=kp.join(".");$p=co(ku,Te$1(Vp))+(Gp?"."+Gp:"")}var qp=$p.replace(ku,"");return $u.baseURL&&($p=co($u.baseURL,qp)),Tu&&Tu(mp,$p,qp,sp),$p},Gu=function(mp,sp){var lp,$p,Mp,kp,Vp,Gp,qp=mp;if(!Fi(mp)){var Wp=(Gp=(kp=($p=(lp=_u.panorama)===null||lp===void 0?void 0:lp.pano_high_cube_base_url)!==null&&$p!==void 0?$p:(Mp=_u.panorama)===null||Mp===void 0?void 0:Mp.pano_cube_base_url)!==null&&kp!==void 0?kp:(Vp=_u.panorama)===null||Vp===void 0?void 0:Vp.base_url)!==null&&Gp!==void 0?Gp:"";Wp&&(Wp=co(Wp,String(sp))),qp=co(Wp,qp)}return Fi(qp)||(qp=co(ku,qp)),Fu(qp,ku)||console.warn("".concat(qp," is not start with base_url(").concat(ku,").")),Nu(qp,"panorama")},zu=function(mp){var sp=mp;return Fi(sp)||(sp=co(ku,mp)),Fu(sp,ku)||console.warn("".concat(sp," is not start with base_url(").concat(ku,").")),Nu(sp,"model")},Hu=function(mp,sp){sp===void 0&&(sp="");var lp=mp;return Fi(lp)||(lp=co(sp,lp)),Fi(lp)||(lp=co(ku,lp)),Fu(lp,ku)||console.warn("".concat(lp," is not start with base_url(").concat(ku,").")),Nu(lp,"texture")};if(Ou instanceof Error||(Du.workCode=String(_u.work_code||_u.code||_u.vr_code||_u.workCode),Du.name=String(_u.name),Ou instanceof Error))return Ou;if(_u.model){var Uu={bvh:!0,async:!1,textureBase:"",textures:[]};typeof $u.modelBvh=="boolean"?Uu.bvh=$u.modelBvh:typeof _u.model.bvh=="boolean"?Uu.bvh=_u.model.bvh:typeof _u.bvh=="boolean"&&(Uu.bvh=_u.bvh),_u.model.file?Uu.file=zu(_u.model.file):_u.model.file_url&&(Uu.file=zu(_u.model.file_url)),_u.model.textureBase?Uu.textureBase=_u.model.textureBase:_u.model.material_base_url&&(Uu.textureBase=_u.model.material_base_url),Array.isArray(_u.model.textures)?Uu.textures=_u.model.textures.map(function(mp){return Hu(mp,Uu.textureBase)}):Array.isArray(_u.model.material_textures)&&(Uu.textures=_u.model.material_textures.map(function(mp){return Hu(mp,Uu.textureBase)})),_u.model.tiles&&(Uu.tiles=_u.model.tiles),Uu.file&&(Du.model=Uu)}if(Ou instanceof Error)return Ou;if(_u.observers&&Array.isArray(_u.observers)){var ju=[];_u.panorama&&(Array.isArray(_u.panorama)?ju=_u.panorama:Array.isArray(_u.panorama.list)?ju=_u.panorama.list:Array.isArray(_u.panorama.info)&&(ju=_u.panorama.info));for(var Wu=0;Wu<_u.observers.length;Wu++){var Qu={},qu=_u.observers[Wu];if(!qu)break;var Yu=ju[Wu];if(!Yu)break;qu=Object.assign({},qu,Yu,{active:qu.active!==!1&&Yu.active!==!1}),Qu.panoIndex=Wu,Qu.active=qu.active!==!1,Qu.loadable=qu.loadable===!0,Qu.images={up:Gu(qu.images?qu.images.up:qu.up,Wu),down:Gu(qu.images?qu.images.down:qu.down,Wu),right:Gu(qu.images?qu.images.right:qu.right,Wu),left:Gu(qu.images?qu.images.left:qu.left,Wu),front:Gu(qu.images?qu.images.front:qu.front,Wu),back:Gu(qu.images?qu.images.back:qu.back,Wu)};var Ju=qu.images?qu.images.depth:qu.depth;Ju&&(Qu.images.depth=Gu(Ju,Wu));var _d=qu.images?qu.images.luminance:qu.luminance;_d&&(Qu.images.luminance={up:Gu(_d.up,Wu),down:Gu(_d.down,Wu),right:Gu(_d.right,Wu),left:Gu(_d.left,Wu),front:Gu(_d.front,Wu),back:Gu(_d.back,Wu)});var tp=qu.images?qu.images.tiles:qu.tiles;if(tp){for(var Ku=[],Xu=function(mp){var sp=mp.match(/\/cube_(\d+)\//);if(sp){var lp=Number(sp[1]);if(Ao(lp))return lp}return!1},Zu=function(mp,sp){return mp.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(sp,"/")})},_c=0,Xc=tp;_c<Xc.length;_c++){var _h=Xc[_c];if(typeof _h=="number"){var ip=_h,ap=Xu(Qu.images.front);if(ap===!1)continue;if((Ep=Math.max(ap,512*Math.pow(2,ip)))>2048){var hp=Zu(Qu.images.up,Ep),Ap=Zu(Qu.images.down,Ep),gp=Zu(Qu.images.right,Ep),Rp=Zu(Qu.images.left,Ep),Sp=Zu(Qu.images.front,Ep),Dp=Zu(Qu.images.back,Ep);Ku.push({level:ip,size:Ep,up:hp,down:Ap,right:gp,left:Rp,front:Sp,back:Dp})}else hp=Qu.images.up,Ap=Qu.images.down,gp=Qu.images.right,Rp=Qu.images.left,Sp=Qu.images.front,Dp=Qu.images.back,Ku.push({level:ip,size:Ep,up:hp,down:Ap,right:gp,left:Rp,front:Sp,back:Dp})}else{var Ep;if(typeof(ip=_h.level)!="number"||typeof(Ep=_h.size)!="number")continue;hp=Gu(_h.up,Wu),Ap=Gu(_h.down,Wu),gp=Gu(_h.right,Wu),Rp=Gu(_h.left,Wu),Sp=Gu(_h.front,Wu),Dp=Gu(_h.back,Wu),Ku.push({level:ip,size:Ep,up:hp,down:Ap,right:gp,left:Rp,front:Sp,back:Dp})}}Ku.sort(function(mp,sp){return mp.level-sp.level}),Qu.images.tiles=Ku}if(qu.position instanceof r$n.Vector3)Qu.position=qu.position.clone();else{if(!Array.isArray(qu.position))break;Qu.position=new r$n.Vector3().fromArray(qu.position)}if(qu.standingPosition instanceof r$n.Vector3)Qu.standingPosition=qu.standingPosition.clone();else if(Array.isArray(qu.standingPosition))Qu.standingPosition=new r$n.Vector3().fromArray(qu.standingPosition);else if(qu.standing_position instanceof r$n.Vector3)Qu.standingPosition=qu.standing_position.clone();else{if(!Array.isArray(qu.standing_position))break;Qu.standingPosition=new r$n.Vector3().fromArray(qu.standing_position)}if(qu.quaternion instanceof r$n.Quaternion)Qu.quaternion=qu.quaternion.clone();else if(Array.isArray(qu.quaternion))Qu.quaternion=new r$n.Quaternion().fromArray(qu.quaternion);else{if(!qu.quaternion)break;var Bp=qu.quaternion,Ip=Bp.x,ep=Bp.y,_f=Bp.z,op=Bp.w;Qu.quaternion=new r$n.Quaternion(Ip,ep,_f,op)}if(Array.isArray(qu.accessibleNodes)?Qu.accessibleNodes=qu.accessibleNodes.slice():Array.isArray(qu.accessible_nodes)&&(Qu.accessibleNodes=qu.accessible_nodes.slice()),Array.isArray(qu.visibleNodes)?Qu.visibleNodes=qu.visibleNodes.slice():Array.isArray(qu.visible_nodes)&&(Qu.visibleNodes=qu.visible_nodes.slice()),fo(qu.floorIndex)?Qu.floorIndex=qu.floorIndex:fo(qu.floor_index)?Qu.floorIndex=qu.floor_index:Qu.floorIndex=0,qu.video){var rp={};typeof qu.video.source=="string"&&(rp.source=qu.video.source),qu.video.matrix instanceof r$n.Matrix4?rp.matrix=qu.video.matrix.clone():Array.isArray(qu.video.matrix)&&(rp.matrix=new r$n.Matrix4().fromArray(qu.video.matrix)),qu.video.size instanceof r$n.Vector2?rp.size=qu.video.size.clone():Array.isArray(qu.video.size)&&(rp.size=new r$n.Vector2().fromArray(qu.video.size)),rp.source&&rp.matrix&&rp.size&&(Qu.video=rp)}Du.observers[Wu]=Qu}}if(Ou instanceof Error)return Ou;for(var up=0,cp=Du.observers;up<cp.length;up++){if((Qu=cp[up]).accessibleNodes)Qu.accessibleNodes=Qu.accessibleNodes.filter(function(mp){return mp<Du.observers.length});else{Qu.accessibleNodes=[];for(var fp=0;fp<Du.observers.length;fp++)Du.observers[fp]!==Qu&&Qu.accessibleNodes.push(fp)}if(Qu.visibleNodes)Qu.visibleNodes=Qu.visibleNodes.filter(function(mp){return mp<Du.observers.length});else for(Qu.visibleNodes=[],fp=0;fp<Du.observers.length;fp++)Du.observers[fp]!==Qu&&Qu.visibleNodes.push(fp)}if(Ou instanceof Error)return Ou;if(_u.initial)if(_u.initial.mode!=="Floorplan"&&_u.initial.mode!=="Topview"&&_u.initial.mode!=="Panorama"&&_u.initial.mode!=="VRPanorama"&&_u.initial.mode!=="Model"&&_u.initial.mode!=="DepthPanorama"||(Du.initial.mode=_u.initial.mode),fo(_u.initial.latitude)&&(Du.initial.latitude=_u.initial.latitude),fo(_u.initial.longitude)?Du.initial.longitude=_u.initial.longitude:fo(_u.initial.heading)&&(Du.initial.longitude=-(360*(_u.initial.heading-.25)+90)/180*Math.PI),fo(_u.initial.fov)&&(Du.initial.fov=_u.initial.fov),fo(_u.initial.panoIndex)){var vp=Du.observers.length>0?Du.observers.length-1:0;Du.initial.panoIndex=ho(_u.initial.panoIndex,0,vp)}else fo(_u.initial.pano_index)?(vp=Du.observers.length>0?Du.observers.length-1:0,Du.initial.panoIndex=ho(_u.initial.pano_index,0,vp)):fo(_u.initial.pano)&&(vp=Du.observers.length>0?Du.observers.length-1:0,Du.initial.panoIndex=ho(_u.initial.pano,0,vp));if(Ou instanceof Error)return Ou;var xp=He(Du);return wo.set(xp,{works:Ru,options:Pu}),xp}function Co(_u,$u,Tu){typeof _u=="string"&&_u.trim()[0]==="{"&&(_u=JSON.parse(_u));var Cu=wo.get(_u);if(Cu){if($u&&!po(JSON.parse(Cu.options),$u))throw new Error("[PARSE FAILED]: work is parsed with different options.");return _u}var Pu=So(_u,$u!=null?$u:{},Tu);if(Pu instanceof Error)throw new Error("[PARSE FAILED]: "+Pu.message);return Pu}function Bo(_u,$u,Tu){return _u+($u-_u)*Tu}function To(_u,$u){var Tu=$u[1]-$u[0];return _u<$u[0]?To(_u+Tu,$u):_u>=$u[1]?To(_u-Tu,$u):_u}function Po(_u,$u,Tu,Cu){return Cu?function(Pu,Ru,Lu,Bu){var Vu=Bu[1]-Bu[0];return Pu=To(Pu,Bu),Bo((Ru=To(Ru,Bu))-Pu>Vu/2?Pu+Vu:Pu-Ru>Vu/2?Pu-Vu:Pu,Ru,Lu)}(_u,$u,Tu,Cu):Bo(_u,$u,Tu)}var Ro=function(){function _u($u){for(var Tu in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=_e$3(),this.startVelocity=0,this.duration=0,this.keyframes=[],$u){var Cu=$u[Tu];typeof Cu=="number"?(this.value[Tu]=Cu,this.config[Tu]={circle:!1}):(this.value[Tu]=Cu.value,this.config[Tu]={circle:Cu.circle})}this.keyframes=[{progress:0,value:t$h.__assign({},this.value)},{progress:1,value:t$h.__assign({},this.value)}]}return _u.prototype.getProgress=function($u){var Tu=$u-this.startTime;return Tu<0?0:Tu>=this.duration?1:1-function(Cu,Pu,Ru,Lu){var Bu=(Pu*Ru+2*Cu)/Math.pow(Ru,3),Vu=-(2*Pu*Ru+3*Cu)/Math.pow(Ru,2),Ou=Pu,Du=Cu;return Bu*Math.pow(Lu,3)+Vu*Math.pow(Lu,2)+Ou*Lu+Du}(1,this.startVelocity,this.duration,Tu)},_u.prototype.getValue=function($u){for(var Tu=1;Tu<this.keyframes.length;Tu++)if(this.keyframes[Tu].progress>$u){var Cu=this.keyframes[Tu-1],Pu=this.keyframes[Tu],Ru={};for(var Lu in this.config){var Bu=($u-Cu.progress)/(Pu.progress-Cu.progress);Ru[Lu]=Po(Cu.value[Lu],Pu.value[Lu],Bu,this.config[Lu].circle)}return Ru}return t$h.__assign({},this.keyframes[this.keyframes.length-1].value)},_u.prototype.getProgressVelocity=function($u){var Tu=$u-this.startTime;return Tu>=this.duration?0:function(Cu,Pu,Ru,Lu){var Bu=(Pu*Ru+2*Cu)/Math.pow(Ru,3),Vu=-(2*Pu*Ru+3*Cu)/Math.pow(Ru,2),Ou=Pu;return 3*Bu*Math.pow(Lu,2)+2*Vu*Lu+Ou}(1,this.startVelocity,this.duration,Tu)},_u.prototype.update=function($u){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress($u))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},_u.prototype.getKeyFrameSegment=function($u){for(var Tu=this.getProgress($u),Cu=1;Cu<this.keyframes.length;Cu++)if(this.keyframes[Cu].progress>Tu)return[this.keyframes[Cu-1],this.keyframes[Cu]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},_u.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},_u.prototype.set=function($u,Tu,Cu,Pu){var Ru;Cu===void 0&&(Cu=0),isNaN(Tu)&&(Tu=0),isNaN(Cu)&&(Cu=0),Pu=Pu!=null?Pu:_e$3();var Lu=this.getProgress(Pu),Bu=this.getValue(Lu),Vu={};for(var Ou in this.config)Vu[Ou]=(Ru=$u[Ou])!==null&&Ru!==void 0?Ru:Bu[Ou];var Du=[{progress:0,value:Bu},{progress:1,value:Vu}];return this.setKeyframes(Du,Tu,Cu,Pu)},_u.prototype.setKeyframes=function($u,Tu,Cu,Pu){var Ru=this;if(Cu===void 0&&(Cu=0),$u.length<2)throw new Error("keyframes invalid.");return isNaN(Tu)&&(Tu=0),isNaN(Cu)&&(Cu=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Lu,Bu){Pu=Pu!=null?Pu:_e$3(),Ru.progress=0,Ru.ended=!1,Ru.startTime=Pu,Ru.startVelocity=Cu,Ru.keyframes=$u,Ru.duration=Tu,Tu===0?(Ru.progress=1,Ru.value=t$h.__assign({},$u[$u.length-1].value)):Ru.value=t$h.__assign({},$u[0].value),Ru.callbacks=[Lu,Bu]})},_u.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},_u}(),ko=yt$2(),Do=new r$n.Texture(ko);ko.onload=function(){return Do.needsUpdate=!0},ko.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var Lo=new r$n.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),Oo=new r$n.MeshBasicMaterial({map:Do,transparent:!0}),No=new r$n.SphereBufferGeometry(.12,16,16),Fo=new r$n.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function Qo(){if(typeof document=="undefined"){var _u=new r$n.Texture;return Object.assign(_u,{draw:function(Du){},retain:!1,pool:!1})}var $u=document.createElement("canvas"),Tu=512,Cu=256,Pu=190;$u.setAttribute("width",String(Tu)),$u.setAttribute("height",String(Tu));var Ru=new r$n.Texture($u),Lu=$u.getContext("2d");if(!Lu)throw Error("cannot create canvas context");var Bu=Lu.createRadialGradient(Cu,Cu,150,Cu,Cu,0);function Vu(){var Du=Math.PI/12,ku=2*Math.PI/3;Lu&&(Lu.beginPath(),Lu.arc(Cu,Cu,Pu,0*ku,1*ku-Du),Lu.stroke(),Lu.beginPath(),Lu.arc(Cu,Cu,Pu,1*ku,2*ku-Du),Lu.stroke(),Lu.beginPath(),Lu.arc(Cu,Cu,Pu,2*ku,3*ku-Du),Lu.stroke())}function Ou(Du){Lu&&(Lu.clearRect(0,0,Tu,Tu),Lu.lineWidth=20,Du!==-1&&(Lu.globalCompositeOperation="source-over",Lu.strokeStyle="rgba(255, 255, 255, 1)",Vu(),Lu.globalCompositeOperation="source-in",Lu.beginPath(),Lu.arc(Cu,Cu,Pu,0,2*Math.PI*Du),Lu.strokeStyle="rgba(255, 255, 255, 1)",Lu.stroke(),Lu.globalCompositeOperation="source-over",Lu.strokeStyle="rgba(255, 255, 255, "+(Du?.5:1)+")",Vu()),Lu.beginPath(),Lu.arc(Cu,Cu,150,0,2*Math.PI),Lu.closePath(),Lu.fillStyle=Bu,Lu.fill(),Lu.fillStyle="rgba(255, 255, 255, 0.01)",Lu.fillRect(0,0,Tu,Tu),Ru.needsUpdate=!0)}return Bu.addColorStop(0,"rgba(255, 255, 255, 1)"),Bu.addColorStop(.15,"rgba(255, 255, 255, 1)"),Bu.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Bu.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Ou(0),Object.assign(Ru,{draw:Ou,retain:!1,pool:!1})}var Vo=[],_o=Qo();_o.draw(0);var Ho=Qo();Ho.draw(1);var qo=Qo();qo.draw(-1);var zo=new r$n.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Ko(){return new r$n.Mesh(zo,new r$n.MeshBasicMaterial({map:_o,transparent:!0}))}function Uo(_u,$u){var Tu=_u.map;$u===0||$u===1?(Tu.pool===!0&&(Tu.retain=!1),$u===0&&(_u.map=_o),$u===1&&(_u.map=Ho)):(Tu.pool!==!0&&(_u.map=function(){for(var Cu=0,Pu=Vo;Cu<Pu.length;Cu++){var Ru=Pu[Cu];if(Ru.retain===!1)return Ru}var Lu=Qo();return Lu.pool=!0,Lu.retain=!0,Vo.push(Lu),Lu}()),_u.map.draw($u))}var jo=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.loading=!1,Tu.disabled=!1,Tu.current=!1,Tu.progress=0,Tu.opacity=0,Tu.hitTestMesh=new r$n.Mesh(No,Fo),Tu.add(Tu.hitTestMesh),Tu.centerMesh=Ko(),Tu.centerMesh.position.y+=.01,Tu.add(Tu.centerMesh),Tu.loadingMesh=new r$n.Mesh(Lo,Oo),Tu.loadingMesh.position.y+=.011,Tu.progressMotion=new Ro({progress:Tu.progress}),Tu.opacityMotion=new Ro({opacity:Tu.opacity}),Tu.needsRender=!0,Tu.renderOrder=-2,Tu}return t$h.__extends($u,_u),$u.prototype.setLoading=function(Tu){var Cu=this;this.loading=Tu,this.stopInterval&&this.stopInterval(),Tu?(this.add(this.loadingMesh),this.stopInterval=at$4.shared.add(function(){Cu.loadingMesh.rotateOnAxis(new r$n.Vector3(0,1,0),.1),Cu.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},$u.prototype.setDisabled=function(Tu){this.disabled=Tu,function(Cu,Pu){var Ru=Cu.map;Ru.pool===!0&&(Ru.retain=!1),Cu.map=Pu?qo:_o}(this.centerMesh.material,Tu),this.needsRender=!0},$u.prototype.setProgress=function(Tu){this.setLoading(!1),this.setDisabled(!1),this.progress=Tu=ho(Tu,0,1),Tu!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:Tu},120).catch(Qe$1)},$u.prototype.setOpacity=function(Tu){this.opacity=Tu=ho(Tu,0,1),this.current&&(Tu=1),Tu!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:Tu},500).catch(Qe$1)},$u.prototype.setCurrent=function(Tu){this.current!==Tu&&(this.current=Tu,this.setOpacity(this.opacity))},$u.prototype.updateTime=function(Tu,Cu){this.opacityMotion.ended||(this.opacityMotion.update(Tu),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(Tu),Uo(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},$u.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},$u}(r$n.Object3D),Go=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Wo=new Float32Array([0,1,1,1,0,0,1,0]),Xo=new Uint8Array([0,2,1,2,3,1]),Yo=new r$n.BufferGeometry;Yo.setAttribute("position",new r$n.BufferAttribute(Go,3)),Yo.setAttribute("uv",new r$n.BufferAttribute(Wo,2)),Yo.setIndex(new r$n.BufferAttribute(Xo,1));var Zo,Jo,$o=(Zo=yt$2(),Jo=new r$n.Texture,Zo.onload=function(){if(typeof document!="undefined"){var _u=256,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){Tu.drawImage(Zo,0,0,_u,_u),Tu.globalCompositeOperation="source-out";var Cu=128;Tu.beginPath(),Tu.lineWidth=29.952,Tu.arc(Cu,Cu,84.48,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.closePath(),Tu.stroke(),Jo.image=$u,Jo.needsUpdate=!0}}},Zo.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Jo),es=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68;return $u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),ts=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=138.24,Pu=$u.createLinearGradient(Tu-Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu+Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 1)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Pu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),is$2=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68,Pu=$u.createLinearGradient(Tu+Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu-Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Pu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),ns=function(_u,$u){var Tu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Tu,Tu,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},rs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ns($u,2*Math.PI);var Tu=new r$n.CanvasTexture(_u);return Object.assign(Tu,{setProgress:function(Cu){$u&&(ns($u,Cu),Tu.needsUpdate=!0)}})}return null},os=[],ss=rs(),as=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.ringRotateMotion=new Ro({angle:0}),Tu.tapMotion=new Ro({scale:1,opacity:1}),Tu.progressMotion=new Ro({progress:0}),Tu.progressOpacityMotion=new Ro({opacity:0}),Tu.opacityMotion=new Ro({opacity:0});var Cu={blending:r$n.CustomBlending,blendSrc:r$n.SrcAlphaFactor,blendDst:r$n.OneMinusSrcAlphaFactor,blendSrcAlpha:r$n.OneFactor,blendDstAlpha:r$n.OneMinusSrcAlphaFactor,depthWrite:!1};return Tu.centerMesh=new r$n.Mesh(Yo,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:ts,opacity:0}))),Tu.ringMesh=new r$n.Mesh(Yo,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:is$2,opacity:0}))),Tu.loadingMesh=new r$n.Mesh(Yo,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:$o,opacity:.5}))),Tu.disableMesh=new r$n.Mesh(Yo,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:es,opacity:0}))),Tu.progressMesh=new r$n.Mesh(Yo,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:ss,opacity:0}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.ringMesh.position.y=.003,Tu.disableMesh.position.y=.002,Tu.centerMesh.position.y=.002,Tu.loadingMesh.position.y=.005,Tu.progressMesh.position.y=.004,Tu.centerMesh.frustumCulled=!1,Tu.ringMesh.frustumCulled=!1,Tu.progressMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.renderOrder=-2,Tu.add(Tu.centerMesh),Tu.add(Tu.ringMesh),Tu.add(Tu.progressMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.needsRender=!0,Tu}return t$h.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Tu&&(Tu=ho(Tu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Tu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho(1.2*Tu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho(1.2*Tu,0,1)},100).catch(Qe$1)),this.progress=Tu)},$u.prototype.setOpacity=function(Tu){this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},500).catch(Qe$1))},$u.prototype.setCurrent=function(Tu){if(this.current!==Tu){if(Tu===!0&&this.ringRotateMotion.ended){var Cu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Cu,5e3).catch(Qe$1)}this.current=Tu}},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Tu,this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.ringMesh.visible=!Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){var Tu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Tu.progressOpacityMotion.set({opacity:Tu.progress>0?1:0},300).catch(Qe$1),Tu.progressMotion.set({progress:Tu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Tu,Cu){var Pu=ho(Math.max(Tu,Cu)/1e3,1,1.8);this.scale.set(Pu,0,Pu)},$u.prototype.updateTime=function(Tu,Cu){var Pu;if(!this.progressMotion.ended){this.progressMotion.update(Tu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else if(Ru===1)this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else{if(this.progressMesh.material.map===ss){var Lu=os.pop()||rs();this.progressMesh.material.map=Lu}(Pu=this.progressMesh.material.map)===null||Pu===void 0||Pu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Tu);var Bu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Bu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Tu),Bu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bu,this.ringMesh.material.opacity=Bu,this.disableMesh.material.opacity=Bu,this.loadingMesh.material.opacity=Bu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Cu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Tu);var Vu=this.tapMotion.value.scale;this.centerMesh.scale.set(Vu,Vu,Vu),this.ringMesh.scale.set(Vu,Vu,Vu),this.progressMesh.scale.set(Vu,Vu,Vu),Bu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bu,this.ringMesh.material.opacity=Bu,this.disableMesh.material.opacity=Bu,this.loadingMesh.material.opacity=Bu,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Tu),this.ringMesh.quaternion.setFromEuler(new r$n.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$n.Object3D),ls=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),us=new Float32Array([0,1,1,1,0,0,1,0]),hs=new Uint8Array([0,2,1,2,3,1]),cs=new r$n.BufferGeometry;cs.setAttribute("position",new r$n.BufferAttribute(ls,3)),cs.setAttribute("uv",new r$n.BufferAttribute(us,2)),cs.setIndex(new r$n.BufferAttribute(hs,1));var ds=function(){var _u=yt$2(),$u=new r$n.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Tu=256,Cu=document.createElement("canvas");Cu.setAttribute("width",String(Tu)),Cu.setAttribute("height",String(Tu));var Pu=Cu.getContext("2d");if(Pu){Pu.drawImage(_u,0,0,Tu,Tu),Pu.globalCompositeOperation="source-out";var Ru=128;Pu.beginPath(),Pu.lineWidth=29.952,Pu.arc(Ru,Ru,84.48,0,2*Math.PI),Pu.strokeStyle="rgba(255, 255, 255, 0.5)",Pu.closePath(),Pu.stroke(),$u.image=Cu,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68;return $u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),fs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u)return $u.beginPath(),$u.arc(256,256,199.68,0,2*Math.PI),$u.fillStyle="rgba(0, 0, 0, 0.2)",$u.closePath(),$u.fill(),new r$n.CanvasTexture(_u)}return null}(),As=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=138.24,Pu=$u.createLinearGradient(Tu-Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu+Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 1)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Pu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),gs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68,Pu=$u.createLinearGradient(Tu+Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu-Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Pu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),ms=function(_u,$u){var Tu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Tu,Tu,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},vs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ms($u,2*Math.PI);var Tu=new r$n.CanvasTexture(_u);return Object.assign(Tu,{setProgress:function(Cu){$u&&(ms($u,Cu),Tu.needsUpdate=!0)}})}return null},ys=[],bs=vs(),xs=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.ringRotateMotion=new Ro({angle:0}),Tu.tapMotion=new Ro({scale:1,opacity:1}),Tu.progressMotion=new Ro({progress:0}),Tu.progressOpacityMotion=new Ro({opacity:0}),Tu.opacityMotion=new Ro({opacity:0});var Cu={blending:r$n.CustomBlending,blendSrc:r$n.SrcAlphaFactor,blendDst:r$n.OneMinusSrcAlphaFactor,blendSrcAlpha:r$n.OneFactor,blendDstAlpha:r$n.OneMinusSrcAlphaFactor,depthWrite:!1};return Tu.backgroundMesh=new r$n.Mesh(cs,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:fs,opacity:1}))),Tu.centerMesh=new r$n.Mesh(cs,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:As,opacity:0}))),Tu.ringMesh=new r$n.Mesh(cs,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:gs,opacity:0}))),Tu.loadingMesh=new r$n.Mesh(cs,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:ds,opacity:.5}))),Tu.disableMesh=new r$n.Mesh(cs,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:ps,opacity:0}))),Tu.progressMesh=new r$n.Mesh(cs,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:bs,opacity:0}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.backgroundMesh.position.y=.0018,Tu.ringMesh.position.y=.003,Tu.disableMesh.position.y=.002,Tu.centerMesh.position.y=.002,Tu.loadingMesh.position.y=.005,Tu.progressMesh.position.y=.004,Tu.centerMesh.frustumCulled=!1,Tu.ringMesh.frustumCulled=!1,Tu.progressMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.renderOrder=-2,Tu.add(Tu.backgroundMesh),Tu.add(Tu.centerMesh),Tu.add(Tu.ringMesh),Tu.add(Tu.progressMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.needsRender=!0,Tu}return t$h.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Tu&&(Tu=ho(Tu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Tu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho(1.2*Tu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho(1.2*Tu,0,1)},100).catch(Qe$1)),this.progress=Tu)},$u.prototype.setOpacity=function(Tu){this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},500).catch(Qe$1))},$u.prototype.setCurrent=function(Tu){if(this.current!==Tu){if(Tu===!0&&this.ringRotateMotion.ended){var Cu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Cu,5e3).catch(Qe$1)}this.current=Tu}},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Tu,this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.ringMesh.visible=!Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){var Tu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Tu.progressOpacityMotion.set({opacity:Tu.progress>0?1:0},300).catch(Qe$1),Tu.progressMotion.set({progress:Tu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Tu,Cu){var Pu=ho(Math.max(Tu,Cu)/1e3,1,1.8);this.scale.set(Pu,0,Pu)},$u.prototype.updateTime=function(Tu,Cu){var Pu;if(!this.progressMotion.ended){this.progressMotion.update(Tu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs);else if(Ru===1)this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs);else{if(this.progressMesh.material.map===bs){var Lu=ys.pop()||vs();this.progressMesh.material.map=Lu}(Pu=this.progressMesh.material.map)===null||Pu===void 0||Pu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Tu);var Bu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Bu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Tu),Bu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.backgroundMesh.material.opacity=Bu,this.centerMesh.material.opacity=Bu,this.ringMesh.material.opacity=Bu,this.disableMesh.material.opacity=Bu,this.loadingMesh.material.opacity=Bu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Cu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Tu);var Vu=this.tapMotion.value.scale;this.backgroundMesh.scale.set(Vu,Vu,Vu),this.centerMesh.scale.set(Vu,Vu,Vu),this.ringMesh.scale.set(Vu,Vu,Vu),this.progressMesh.scale.set(Vu,Vu,Vu),Bu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bu,this.ringMesh.material.opacity=Bu,this.disableMesh.material.opacity=Bu,this.loadingMesh.material.opacity=Bu,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Tu),this.ringMesh.quaternion.setFromEuler(new r$n.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$n.Object3D),ws=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Es=new Float32Array([0,1,1,1,0,0,1,0]),Ms=new Uint8Array([0,2,1,2,3,1]),Is=new r$n.BufferGeometry;Is.setAttribute("position",new r$n.BufferAttribute(ws,3)),Is.setAttribute("uv",new r$n.BufferAttribute(Es,2)),Is.setIndex(new r$n.BufferAttribute(Ms,1));var Ss=function(){var _u=yt$2(),$u=new r$n.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Tu=256,Cu=document.createElement("canvas");Cu.setAttribute("width",String(Tu)),Cu.setAttribute("height",String(Tu));var Pu=Cu.getContext("2d");if(Pu){Pu.drawImage(_u,0,0,Tu,Tu),Pu.globalCompositeOperation="source-out";var Ru=128;Pu.beginPath(),Pu.lineWidth=29.44,Pu.arc(Ru,Ru,55.04,0,2*Math.PI),Pu.strokeStyle="rgba(255, 255, 255, 0.7)",Pu.closePath(),Pu.stroke(),$u.image=Cu,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68;return $u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),Bs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");if($u){var Tu=128;return $u.beginPath(),$u.lineWidth=29.44,$u.arc(Tu,Tu,84.48,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 1)",$u.shadowBlur=19.2,$u.shadowColor="rgba(200, 200, 200, 0.2)",$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),Ts=function(_u,$u){var Tu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Tu,Tu,57.6,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.6)",_u.stroke()},Ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&Ts($u,2*Math.PI);var Tu=new r$n.CanvasTexture(_u);return Object.assign(Tu,{setProgress:function(Cu){$u&&(Ts($u,Cu),Tu.needsUpdate=!0)}})}return null},Rs=[],ks=Ps(),Ds=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.tapMotion=new Ro({scale:1,opacity:1}),Tu.progressMotion=new Ro({progress:0}),Tu.progressOpacityMotion=new Ro({opacity:0}),Tu.opacityMotion=new Ro({opacity:0});var Cu={blending:r$n.CustomBlending,blendSrc:r$n.SrcAlphaFactor,blendDst:r$n.OneMinusSrcAlphaFactor,blendSrcAlpha:r$n.OneFactor,blendDstAlpha:r$n.OneMinusSrcAlphaFactor,depthWrite:!1};return Tu.centerMesh=new r$n.Mesh(Is,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Bs,opacity:0}))),Tu.loadingMesh=new r$n.Mesh(Is,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Ss,opacity:.5}))),Tu.disableMesh=new r$n.Mesh(Is,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Cs,opacity:0}))),Tu.progressMesh=new r$n.Mesh(Is,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:ks,opacity:0}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.disableMesh.position.y=.002,Tu.centerMesh.position.y=.002,Tu.loadingMesh.position.y=.005,Tu.progressMesh.position.y=.004,Tu.centerMesh.frustumCulled=!1,Tu.progressMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.renderOrder=-2,Tu.add(Tu.centerMesh),Tu.add(Tu.progressMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.needsRender=!0,Tu}return t$h.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Tu&&(Tu=ho(Tu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Tu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho(1.2*Tu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho(1.2*Tu,0,1)},100).catch(Qe$1)),this.progress=Tu)},$u.prototype.setOpacity=function(Tu){Tu>0&&(Tu=1),this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},500).catch(Qe$1))},$u.prototype.setCurrent=function(Tu){this.current!==Tu&&(this.current=Tu)},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Tu,this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){var Tu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Tu.progressOpacityMotion.set({opacity:Tu.progress>0?1:0},300).catch(Qe$1),Tu.progressMotion.set({progress:Tu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Tu,Cu){var Pu=ho(Math.max(Tu,Cu)/1e3,1.2,1.8);this.scale.set(Pu,0,Pu)},$u.prototype.updateTime=function(Tu,Cu){var Pu;if(!this.progressMotion.ended){this.progressMotion.update(Tu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else if(Ru===1)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else{if(this.progressMesh.material.map===ks){var Lu=Rs.pop()||Ps();this.progressMesh.material.map=Lu}(Pu=this.progressMesh.material.map)===null||Pu===void 0||Pu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Tu);var Bu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Bu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Tu),Bu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bu,this.disableMesh.material.opacity=Bu,this.loadingMesh.material.opacity=Bu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Cu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Tu);var Vu=this.tapMotion.value.scale;this.centerMesh.scale.set(Vu,Vu,Vu),this.progressMesh.scale.set(Vu,Vu,Vu),Bu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bu,this.disableMesh.material.opacity=Bu,this.loadingMesh.material.opacity=Bu,this.needsRender=!0}},$u.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$n.Object3D),Ls=new r$n.CircleBufferGeometry(.1,16),Os=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256,Pu=192,Ru=76.8;Tu.lineWidth=Ru,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle="rgba(147, 162, 255, 0.3)",Tu.shadowBlur=12.8,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.stroke(),Tu.lineWidth=Ru,Tu.arc(Cu,Cu,Pu,0,2*Math.PI);var Lu=Tu.createRadialGradient(Cu,Cu,153.6,Cu,Cu,230.4);Lu.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Lu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.3)"),Tu.strokeStyle=Lu,Tu.stroke(),Tu.beginPath(),Tu.lineWidth=4.8,Tu.arc(Cu,Cu,228,0,2*Math.PI);var Bu=Tu.createLinearGradient(0,0,_u,0);return Bu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Bu.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Bu,Tu.stroke(),new r$n.CanvasTexture($u)}}return null}(),Ns=new r$n.MeshBasicMaterial({map:Os,transparent:!0}),Fs=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.ringMesh=new r$n.Mesh(Ls,Ns),Tu.ringMesh.renderOrder=-3,Tu.add(Tu.ringMesh),Tu}return t$h.__extends($u,_u),$u.prototype.dispose=function(){this.remove(this.ringMesh)},$u}(r$n.Object3D);function Qs(_u,$u,Tu){var Cu=Math.abs(_u-$u);return Cu<.001||Tu!==void 0&&Math.abs(Tu-Cu)<.001}function Vs(_u,$u,Tu){return!Qs(_u,$u,Tu)}function _s(_u,$u){return _u.distanceTo($u)<.001}function Hs(_u,$u){return!_s(_u,$u)}var qs=new r$n.Vector3(0,0,0),zs=function(_u){function $u(Tu,Cu){Cu===void 0&&(Cu=qs);var Pu=_u.call(this)||this,Ru=new r$n.BoxBufferGeometry(Tu.max.x-Tu.min.x+2*Cu.x,Tu.max.y-Tu.min.y+2*Cu.y,Tu.max.z-Tu.min.z+2*Cu.z,1,1);Ru.groups.length=0,Ru.groups.push({start:0,count:36,materialIndex:0}),Ru.applyMatrix4(new r$n.Matrix4().makeScale(-1,1,1)),Ru.computeVertexNormals();var Lu=new Mt$1;Lu.defines.USE_MAP=!1,Lu.defines.USE_UV=!1,Lu.uniforms.diffuse.value=new r$n.Color(16777215);var Bu=new ft$2(Ru,[Lu]);return Bu.floorIndex=-1,Bu.position.copy(Tu.getCenter(new r$n.Vector3)),Bu.frustumCulled=!1,Pu.renderOrder=-3,Pu.add(Bu),Pu.boundingBox=new r$n.Box3,Pu.computeBoundingBox(),Pu}return t$h.__extends($u,_u),$u.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},$u.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},$u}(gt$3);function Ks(_u,$u){return $u===void 0&&($u=qs),new zs(_u,$u)}function Us(_u){var $u=_u.getError();if($u===_u.NO_ERROR)return null;switch($u){case _u.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case _u.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case _u.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case _u.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case _u.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case _u.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}var js=2*Math.PI;function Gs(_u){return _u>=0&&_u<js?_u:(_u%js+js)%js}var Ws=Math.PI,Xs=2*Ws;function Ys(_u,$u,Tu){if(_u===$u)return $u;var Cu=$u-_u;return Math.abs(Cu)<=Tu?$u:_u+(Cu>0?1:-1)*Tu}(function(){try{var _u=document.createElement("canvas");!window.WebGLRenderingContext||!_u.getContext("webgl")&&_u.getContext("experimental-webgl")}catch{return!1}})();var Zs=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(_u)||/webos/i.test(_u)||/ipad|iphone|ipod/i.test(_u)||/iemobile/i.test(_u)||/opera mini/i.test(_u)||/blackberry/i.test(_u)||/windows phone/i.test(_u)};function Js(_u,$u){_u.mode=$u.mode,_u.panoIndex=$u.panoIndex,_u.longitude=$u.longitude,_u.latitude=$u.latitude,_u.fov=$u.fov,_u.offset.copy($u.offset)}function $s(_u,$u){return _u.panoIndex===$u.panoIndex&&_u.mode===$u.mode&&Qs(_u.longitude,$u.longitude,2*Math.PI)&&Qs(_u.latitude,$u.latitude)&&Qs(_u.fov,$u.fov)&&_s(_u.offset,$u.offset)}var ea$1=function(_u){return Number(_u)};function ta(_u,$u,Tu){var Cu;$u===void 0&&($u=ea$1),Tu===void 0&&(Tu=!1);for(var Pu,Ru=1/0,Lu=0,Bu=_u;Lu<Bu.length;Lu++){var Vu=Bu[Lu],Ou=$u(Vu);Ou<=Ru&&(Pu=(Cu=[Vu,Ou])[0],Ru=Cu[1])}return Tu?[Pu,Ru]:Pu}function ia$1(_u){for(var $u in _u)return!1;return!0}function na(_u){return{longitude:_u.longitude,latitude:_u.latitude,fov:_u.fov,offset:_u.offset.clone(),distance:_u.distance}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var ra=function(_u,$u,Tu,Cu){var Pu,Ru=["","webkit","Moz","MS","ms","o"],Lu=$u.createElement?$u.createElement("div"):Cu,Bu=Math.round,Vu=Math.abs,Ou=Date.now;function Du(dp,_p,Cp){return setTimeout(Uu(dp,Cp),_p)}function ku(dp,_p,Cp){return!!Array.isArray(dp)&&(Fu(dp,Cp[_p],Cp),!0)}function Fu(dp,_p,Cp){var Fp;if(dp)if(dp.forEach)dp.forEach(_p,Cp);else if(dp.length!==Cu)for(Fp=0;Fp<dp.length;)_p.call(Cp,dp[Fp],Fp,dp),Fp++;else for(Fp in dp)dp.hasOwnProperty(Fp)&&_p.call(Cp,dp[Fp],Fp,dp)}function Nu(dp,_p,Cp){var Fp="DEPRECATED METHOD: "+_p+`
`+Cp+` AT 
`;return function(){var Hp=new Error("get-stack-trace"),uv=Hp&&Hp.stack?Hp.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",pv=_u.console&&(_u.console.warn||_u.console.log);return pv&&pv.call(_u.console,Fp,uv),dp.apply(this,arguments)}}Pu=typeof Object.assign!="function"?function(dp){if(dp===Cu||dp===null)throw new TypeError("Cannot convert undefined or null to object");for(var _p=Object(dp),Cp=1;Cp<arguments.length;Cp++){var Fp=arguments[Cp];if(Fp!==Cu&&Fp!==null)for(var Hp in Fp)Fp.hasOwnProperty(Hp)&&(_p[Hp]=Fp[Hp])}return _p}:Object.assign;var Gu=Nu(function(dp,_p,Cp){for(var Fp=Object.keys(_p),Hp=0;Hp<Fp.length;)(!Cp||Cp&&dp[Fp[Hp]]===Cu)&&(dp[Fp[Hp]]=_p[Fp[Hp]]),Hp++;return dp},"extend","Use `assign`."),zu=Nu(function(dp,_p){return Gu(dp,_p,!0)},"merge","Use `assign`.");function Hu(dp,_p,Cp){var Fp,Hp=_p.prototype;(Fp=dp.prototype=Object.create(Hp)).constructor=dp,Fp._super=Hp,Cp&&Pu(Fp,Cp)}function Uu(dp,_p){return function(){return dp.apply(_p,arguments)}}function ju(dp,_p){return typeof dp=="function"?dp.apply(_p&&_p[0]||Cu,_p):dp}function Wu(dp,_p){return dp===Cu?_p:dp}function Qu(dp,_p,Cp){Fu(_d(_p),function(Fp){dp.addEventListener(Fp,Cp,!1)})}function qu(dp,_p,Cp){Fu(_d(_p),function(Fp){dp.removeEventListener(Fp,Cp,!1)})}function Yu(dp,_p){for(;dp;){if(dp==_p)return!0;dp=dp.parentNode}return!1}function Ju(dp,_p){return dp.indexOf(_p)>-1}function _d(dp){return dp.trim().split(/\s+/g)}function tp(dp,_p,Cp){if(dp.indexOf&&!Cp)return dp.indexOf(_p);for(var Fp=0;Fp<dp.length;){if(Cp&&dp[Fp][Cp]==_p||!Cp&&dp[Fp]===_p)return Fp;Fp++}return-1}function Ku(dp){return Array.prototype.slice.call(dp,0)}function Xu(dp,_p,Cp){for(var Fp=[],Hp=[],uv=0;uv<dp.length;){var pv=_p?dp[uv][_p]:dp[uv];tp(Hp,pv)<0&&Fp.push(dp[uv]),Hp[uv]=pv,uv++}return Cp&&(Fp=_p?Fp.sort(function(Lv,sv){return Lv[_p]>sv[_p]}):Fp.sort()),Fp}function Zu(dp,_p){for(var Cp,Fp,Hp=_p[0].toUpperCase()+_p.slice(1),uv=0;uv<Ru.length;){if((Fp=(Cp=Ru[uv])?Cp+Hp:_p)in dp)return Fp;uv++}return Cu}var _c=1;function Xc(dp){var _p=dp.ownerDocument||dp;return _p.defaultView||_p.parentWindow||_u}var _h="ontouchstart"in _u,ip=Zu(_u,"PointerEvent")!==Cu,ap=_h&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),hp="touch",Ap="mouse",gp=24,Rp=["x","y"],Sp=["clientX","clientY"];function Dp(dp,_p){var Cp=this;this.manager=dp,this.callback=_p,this.element=dp.element,this.target=dp.options.inputTarget,this.domHandler=function(Fp){ju(dp.options.enable,[dp])&&Cp.handler(Fp)},this.init()}function Ep(dp,_p,Cp){var Fp=Cp.pointers.length,Hp=Cp.changedPointers.length,uv=1&_p&&Fp-Hp==0,pv=12&_p&&Fp-Hp==0;Cp.isFirst=!!uv,Cp.isFinal=!!pv,uv&&(dp.session={}),Cp.eventType=_p,function(Lv,sv){var Bv=Lv.session,Vv=sv.pointers,um=Vv.length;Bv.firstInput||(Bv.firstInput=Bp(sv)),um>1&&!Bv.firstMultiple?Bv.firstMultiple=Bp(sv):um===1&&(Bv.firstMultiple=!1);var dm=Bv.firstInput,em=Bv.firstMultiple,Hv=em?em.center:dm.center,am=sv.center=Ip(Vv);sv.timeStamp=Ou(),sv.deltaTime=sv.timeStamp-dm.timeStamp,sv.angle=rp(Hv,am),sv.distance=op(Hv,am),function(kv,Mv){var Fv=Mv.center,rm=kv.offsetDelta||{},im=kv.prevDelta||{},Yv=kv.prevInput||{};Mv.eventType!==1&&Yv.eventType!==4||(im=kv.prevDelta={x:Yv.deltaX||0,y:Yv.deltaY||0},rm=kv.offsetDelta={x:Fv.x,y:Fv.y}),Mv.deltaX=im.x+(Fv.x-rm.x),Mv.deltaY=im.y+(Fv.y-rm.y)}(Bv,sv),sv.offsetDirection=_f(sv.deltaX,sv.deltaY);var Uv=ep(sv.deltaTime,sv.deltaX,sv.deltaY);sv.overallVelocityX=Uv.x,sv.overallVelocityY=Uv.y,sv.overallVelocity=Vu(Uv.x)>Vu(Uv.y)?Uv.x:Uv.y,sv.scale=em?function(kv,Mv){return op(Mv[0],Mv[1],Sp)/op(kv[0],kv[1],Sp)}(em.pointers,Vv):1,sv.rotation=em?function(kv,Mv){return rp(Mv[1],Mv[0],Sp)+rp(kv[1],kv[0],Sp)}(em.pointers,Vv):0,sv.maxPointers=Bv.prevInput?sv.pointers.length>Bv.prevInput.maxPointers?sv.pointers.length:Bv.prevInput.maxPointers:sv.pointers.length,function(kv,Mv){var Fv,rm,im,Yv,Nv=kv.lastInterval||Mv,hm=Mv.timeStamp-Nv.timeStamp;if(Mv.eventType!=8&&(hm>25||Nv.velocity===Cu)){var sm=Mv.deltaX-Nv.deltaX,cm=Mv.deltaY-Nv.deltaY,Kv=ep(hm,sm,cm);rm=Kv.x,im=Kv.y,Fv=Vu(Kv.x)>Vu(Kv.y)?Kv.x:Kv.y,Yv=_f(sm,cm),kv.lastInterval=Mv}else Fv=Nv.velocity,rm=Nv.velocityX,im=Nv.velocityY,Yv=Nv.direction;Mv.velocity=Fv,Mv.velocityX=rm,Mv.velocityY=im,Mv.direction=Yv}(Bv,sv);var qv=Lv.element;Yu(sv.srcEvent.target,qv)&&(qv=sv.srcEvent.target),sv.target=qv}(dp,Cp),dp.emit("hammer.input",Cp),dp.recognize(Cp),dp.session.prevInput=Cp}function Bp(dp){for(var _p=[],Cp=0;Cp<dp.pointers.length;)_p[Cp]={clientX:Bu(dp.pointers[Cp].clientX),clientY:Bu(dp.pointers[Cp].clientY)},Cp++;return{timeStamp:Ou(),pointers:_p,center:Ip(_p),deltaX:dp.deltaX,deltaY:dp.deltaY}}function Ip(dp){var _p=dp.length;if(_p===1)return{x:Bu(dp[0].clientX),y:Bu(dp[0].clientY)};for(var Cp=0,Fp=0,Hp=0;Hp<_p;)Cp+=dp[Hp].clientX,Fp+=dp[Hp].clientY,Hp++;return{x:Bu(Cp/_p),y:Bu(Fp/_p)}}function ep(dp,_p,Cp){return{x:_p/dp||0,y:Cp/dp||0}}function _f(dp,_p){return dp===_p?1:Vu(dp)>=Vu(_p)?dp<0?2:4:_p<0?8:16}function op(dp,_p,Cp){Cp||(Cp=Rp);var Fp=_p[Cp[0]]-dp[Cp[0]],Hp=_p[Cp[1]]-dp[Cp[1]];return Math.sqrt(Fp*Fp+Hp*Hp)}function rp(dp,_p,Cp){Cp||(Cp=Rp);var Fp=_p[Cp[0]]-dp[Cp[0]],Hp=_p[Cp[1]]-dp[Cp[1]];return 180*Math.atan2(Hp,Fp)/Math.PI}Dp.prototype={handler:function(){},init:function(){this.evEl&&Qu(this.element,this.evEl,this.domHandler),this.evTarget&&Qu(this.target,this.evTarget,this.domHandler),this.evWin&&Qu(Xc(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&qu(this.element,this.evEl,this.domHandler),this.evTarget&&qu(this.target,this.evTarget,this.domHandler),this.evWin&&qu(Xc(this.element),this.evWin,this.domHandler)}};var up={mousedown:1,mousemove:2,mouseup:4},cp="mousedown",fp="mousemove mouseup";function vp(){this.evEl=cp,this.evWin=fp,this.pressed=!1,Dp.apply(this,arguments)}Hu(vp,Dp,{handler:function(dp){var _p=up[dp.type];1&_p&&(dp.button===0||dp.button===2)&&(this.pressed=!0),2&_p&&dp.which!==1&&(_p=4),this.pressed&&(4&_p&&(this.pressed=!1),this.callback(this.manager,_p,{pointers:[dp],changedPointers:[dp],pointerType:Ap,srcEvent:dp}))}});var xp={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},mp={2:hp,3:"pen",4:Ap,5:"kinect"},sp="pointerdown",lp="pointermove pointerup pointercancel";function $p(){this.evEl=sp,this.evWin=lp,Dp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_u.MSPointerEvent&&!_u.PointerEvent&&(sp="MSPointerDown",lp="MSPointerMove MSPointerUp MSPointerCancel"),Hu($p,Dp,{handler:function(dp){var _p=this.store,Cp=!1,Fp=!1,Hp=dp.type.toLowerCase().replace("ms",""),uv=xp[Hp],pv=mp[dp.pointerType]||dp.pointerType,Lv=pv==hp,sv=tp(_p,dp.pointerId,"pointerId");1&uv&&(dp.button===0||dp.button===2||Lv)?sv<0&&(_p.push(dp),sv=_p.length-1):12&uv?Cp=!0:Lv||dp.buttons!==0||(Cp=!0,Fp=!0,uv=xp.pointerup),sv<0||(Fp||(_p[sv]=dp),this.callback(this.manager,uv,{pointers:_p,changedPointers:[dp],pointerType:pv,srcEvent:_p[sv]}),Cp&&_p.splice(sv,1))}});var Mp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},kp="touchstart",Vp="touchstart touchmove touchend touchcancel";function Gp(){this.evTarget=kp,this.evWin=Vp,this.started=!1,Dp.apply(this,arguments)}function qp(dp,_p){var Cp=Ku(dp.touches),Fp=Ku(dp.changedTouches);return 12&_p&&(Cp=Xu(Cp.concat(Fp),"identifier",!0)),[Cp,Fp]}Hu(Gp,Dp,{handler:function(dp){var _p=Mp[dp.type];if(_p===1&&(this.started=!0),this.started){var Cp=qp.call(this,dp,_p);12&_p&&Cp[0].length-Cp[1].length==0&&(this.started=!1),this.callback(this.manager,_p,{pointers:Cp[0],changedPointers:Cp[1],pointerType:hp,srcEvent:dp})}}});var Wp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Yp="touchstart touchmove touchend touchcancel";function Kp(){this.evTarget=Yp,this.targetIds={},Dp.apply(this,arguments)}function ev(dp,_p){var Cp=Ku(dp.touches),Fp=this.targetIds;if(3&_p&&Cp.length===1)return Fp[Cp[0].identifier]=!0,[Cp,Cp];var Hp,uv,pv=Ku(dp.changedTouches),Lv=[],sv=this.target;if(uv=Cp.filter(function(Bv){return Yu(Bv.target,sv)}),_p===1)for(Hp=0;Hp<uv.length;)Fp[uv[Hp].identifier]=!0,Hp++;for(Hp=0;Hp<pv.length;)Fp[pv[Hp].identifier]&&Lv.push(pv[Hp]),12&_p&&delete Fp[pv[Hp].identifier],Hp++;return Lv.length?[Xu(uv.concat(Lv),"identifier",!0),Lv]:void 0}Hu(Kp,Dp,{handler:function(dp){var _p=Wp[dp.type],Cp=ev.call(this,dp,_p);Cp&&this.callback(this.manager,_p,{pointers:Cp[0],changedPointers:Cp[1],pointerType:hp,srcEvent:dp})}});function Xp(){Dp.apply(this,arguments);var dp=Uu(this.handler,this);this.touch=new Kp(this.manager,dp),this.mouse=new vp(this.manager,dp),this.primaryTouch=null,this.lastTouches=[]}function Zp(dp,_p){1&dp?(this.primaryTouch=_p.changedPointers[0].identifier,Tp.call(this,_p)):12&dp&&Tp.call(this,_p)}function Tp(dp){var _p=dp.changedPointers[0];if(_p.identifier===this.primaryTouch){var Cp={x:_p.clientX,y:_p.clientY};this.lastTouches.push(Cp);var Fp=this.lastTouches;setTimeout(function(){var Hp=Fp.indexOf(Cp);Hp>-1&&Fp.splice(Hp,1)},2500)}}function Jp(dp){for(var _p=dp.srcEvent.clientX,Cp=dp.srcEvent.clientY,Fp=0;Fp<this.lastTouches.length;Fp++){var Hp=this.lastTouches[Fp],uv=Math.abs(_p-Hp.x),pv=Math.abs(Cp-Hp.y);if(uv<=25&&pv<=25)return!0}return!1}Hu(Xp,Dp,{handler:function(dp,_p,Cp){var Fp=Cp.pointerType==hp,Hp=Cp.pointerType==Ap;if(!(Hp&&Cp.sourceCapabilities&&Cp.sourceCapabilities.firesTouchEvents)){if(Fp)Zp.call(this,_p,Cp);else if(Hp&&Jp.call(this,Cp))return;this.callback(dp,_p,Cp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var nv=Lu?Zu(Lu.style,"touchAction"):Cu,ov=nv!==Cu,rv="compute",hv="auto",Av="manipulation",xv="none",wv="pan-x",fv="pan-y",$v=function(){if(!ov)return!1;var dp={},_p=_u.CSS&&_u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Cp){dp[Cp]=!_p||_u.CSS.supports("touch-action",Cp)}),dp}();function Tv(dp,_p){this.manager=dp,this.set(_p)}Tv.prototype={set:function(dp){dp==rv&&(dp=this.compute()),ov&&this.manager.element.style&&$v[dp]&&(this.manager.element.style[nv]=dp),this.actions=dp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var dp=[];return Fu(this.manager.recognizers,function(_p){ju(_p.options.enable,[_p])&&(dp=dp.concat(_p.getTouchAction()))}),function(_p){if(Ju(_p,xv))return xv;var Cp=Ju(_p,wv),Fp=Ju(_p,fv);return Cp&&Fp?xv:Cp||Fp?Cp?wv:fv:Ju(_p,Av)?Av:hv}(dp.join(" "))},preventDefaults:function(dp){var _p=dp.srcEvent,Cp=dp.offsetDirection;if(this.manager.session.prevented)_p.preventDefault();else{var Fp=this.actions,Hp=Ju(Fp,xv)&&!$v.none,uv=Ju(Fp,fv)&&!$v["pan-y"],pv=Ju(Fp,wv)&&!$v["pan-x"];if(Hp){var Lv=dp.pointers.length===1,sv=dp.distance<2,Bv=dp.deltaTime<250;if(Lv&&sv&&Bv)return}if(!pv||!uv)return Hp||uv&&6&Cp||pv&&Cp&gp?this.preventSrc(_p):void 0}},preventSrc:function(dp){this.manager.session.prevented=!0,dp.preventDefault()}};var yv=32;function Cv(dp){this.options=Pu({},this.defaults,dp||{}),this.id=_c++,this.manager=null,this.options.enable=Wu(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Dv(dp){return 16&dp?"cancel":8&dp?"end":4&dp?"move":2&dp?"start":""}function Ev(dp){return dp==16?"down":dp==8?"up":dp==2?"left":dp==4?"right":""}function wp(dp,_p){var Cp=_p.manager;return Cp?Cp.get(dp):dp}function jp(){Cv.apply(this,arguments)}function Up(){jp.apply(this,arguments),this.pX=null,this.pY=null}function zp(){jp.apply(this,arguments)}function iv(){Cv.apply(this,arguments),this._timer=null,this._input=null}function gv(){jp.apply(this,arguments)}function vv(){jp.apply(this,arguments)}function lv(){Cv.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function dv(dp,_p){return(_p=_p||{}).recognizers=Wu(_p.recognizers,dv.defaults.preset),new cv(dp,_p)}Cv.prototype={defaults:{},set:function(dp){return Pu(this.options,dp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(dp){if(ku(dp,"recognizeWith",this))return this;var _p=this.simultaneous;return _p[(dp=wp(dp,this)).id]||(_p[dp.id]=dp,dp.recognizeWith(this)),this},dropRecognizeWith:function(dp){return ku(dp,"dropRecognizeWith",this)||(dp=wp(dp,this),delete this.simultaneous[dp.id]),this},requireFailure:function(dp){if(ku(dp,"requireFailure",this))return this;var _p=this.requireFail;return tp(_p,dp=wp(dp,this))===-1&&(_p.push(dp),dp.requireFailure(this)),this},dropRequireFailure:function(dp){if(ku(dp,"dropRequireFailure",this))return this;dp=wp(dp,this);var _p=tp(this.requireFail,dp);return _p>-1&&this.requireFail.splice(_p,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(dp){return!!this.simultaneous[dp.id]},emit:function(dp){var _p=this,Cp=this.state;function Fp(Hp){_p.manager.emit(Hp,dp)}Cp<8&&Fp(_p.options.event+Dv(Cp)),Fp(_p.options.event),dp.additionalEvent&&Fp(dp.additionalEvent),Cp>=8&&Fp(_p.options.event+Dv(Cp))},tryEmit:function(dp){if(this.canEmit())return this.emit(dp);this.state=yv},canEmit:function(){for(var dp=0;dp<this.requireFail.length;){if(!(33&this.requireFail[dp].state))return!1;dp++}return!0},recognize:function(dp){var _p=Pu({},dp);if(!ju(this.options.enable,[this,_p]))return this.reset(),void(this.state=yv);56&this.state&&(this.state=1),this.state=this.process(_p),30&this.state&&this.tryEmit(_p)},process:function(dp){},getTouchAction:function(){},reset:function(){}},Hu(jp,Cv,{defaults:{pointers:1},attrTest:function(dp){var _p=this.options.pointers;return _p===0||dp.pointers.length===_p},process:function(dp){var _p=this.state,Cp=dp.eventType,Fp=6&_p,Hp=this.attrTest(dp);return Fp&&(8&Cp||!Hp)?16|_p:Fp||Hp?4&Cp?8|_p:2&_p?4|_p:2:yv}}),Hu(Up,jp,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var dp=this.options.direction,_p=[];return 6&dp&&_p.push(fv),dp&gp&&_p.push(wv),_p},directionTest:function(dp){var _p=this.options,Cp=!0,Fp=dp.distance,Hp=dp.direction,uv=dp.deltaX,pv=dp.deltaY;return Hp&_p.direction||(6&_p.direction?(Hp=uv===0?1:uv<0?2:4,Cp=uv!=this.pX,Fp=Math.abs(dp.deltaX)):(Hp=pv===0?1:pv<0?8:16,Cp=pv!=this.pY,Fp=Math.abs(dp.deltaY))),dp.direction=Hp,Cp&&Fp>_p.threshold&&Hp&_p.direction},attrTest:function(dp){return jp.prototype.attrTest.call(this,dp)&&(2&this.state||!(2&this.state)&&this.directionTest(dp))},emit:function(dp){this.pX=dp.deltaX,this.pY=dp.deltaY;var _p=Ev(dp.direction);_p&&(dp.additionalEvent=this.options.event+_p),this._super.emit.call(this,dp)}}),Hu(zp,jp,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xv]},attrTest:function(dp){return this._super.attrTest.call(this,dp)&&(Math.abs(dp.scale-1)>this.options.threshold||2&this.state)},emit:function(dp){if(dp.scale!==1){var _p=dp.scale<1?"in":"out";dp.additionalEvent=this.options.event+_p}this._super.emit.call(this,dp)}}),Hu(iv,Cv,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hv]},process:function(dp){var _p=this.options,Cp=dp.pointers.length===_p.pointers,Fp=dp.distance<_p.threshold,Hp=dp.deltaTime>_p.time;if(this._input=dp,!Fp||!Cp||12&dp.eventType&&!Hp)this.reset();else if(1&dp.eventType)this.reset(),this._timer=Du(function(){this.state=8,this.tryEmit()},_p.time,this);else if(4&dp.eventType)return 8;return yv},reset:function(){clearTimeout(this._timer)},emit:function(dp){this.state===8&&(dp&&4&dp.eventType?this.manager.emit(this.options.event+"up",dp):(this._input.timeStamp=Ou(),this.manager.emit(this.options.event,this._input)))}}),Hu(gv,jp,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xv]},attrTest:function(dp){return this._super.attrTest.call(this,dp)&&(Math.abs(dp.rotation)>this.options.threshold||2&this.state)}}),Hu(vv,jp,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Up.prototype.getTouchAction.call(this)},attrTest:function(dp){var _p,Cp=this.options.direction;return 30&Cp?_p=dp.overallVelocity:6&Cp?_p=dp.overallVelocityX:Cp&gp&&(_p=dp.overallVelocityY),this._super.attrTest.call(this,dp)&&Cp&dp.offsetDirection&&dp.distance>this.options.threshold&&dp.maxPointers==this.options.pointers&&Vu(_p)>this.options.velocity&&4&dp.eventType},emit:function(dp){var _p=Ev(dp.offsetDirection);_p&&this.manager.emit(this.options.event+_p,dp),this.manager.emit(this.options.event,dp)}}),Hu(lv,Cv,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Av]},process:function(dp){var _p=this.options,Cp=dp.pointers.length===_p.pointers,Fp=dp.distance<_p.threshold,Hp=dp.deltaTime<_p.time;if(this.reset(),1&dp.eventType&&this.count===0)return this.failTimeout();if(Fp&&Hp&&Cp){if(dp.eventType!=4)return this.failTimeout();var uv=!this.pTime||dp.timeStamp-this.pTime<_p.interval,pv=!this.pCenter||op(this.pCenter,dp.center)<_p.posThreshold;if(this.pTime=dp.timeStamp,this.pCenter=dp.center,pv&&uv?this.count+=1:this.count=1,this._input=dp,this.count%_p.taps===0)return this.hasRequireFailures()?(this._timer=Du(function(){this.state=8,this.tryEmit()},_p.interval,this),2):8}return yv},failTimeout:function(){return this._timer=Du(function(){this.state=yv},this.options.interval,this),yv},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),dv.VERSION="2.0.7",dv.defaults={domEvents:!1,touchAction:rv,enable:!0,inputTarget:null,inputClass:null,preset:[[gv,{enable:!1}],[zp,{enable:!1},["rotate"]],[vv,{direction:6}],[Up,{direction:6},["swipe"]],[lv],[lv,{event:"doubletap",taps:2},["tap"]],[iv]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function cv(dp,_p){var Cp;this.options=Pu({},dv.defaults,_p||{}),this.options.inputTarget=this.options.inputTarget||dp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=dp,this.input=new((Cp=this).options.inputClass||(ip?$p:ap?Kp:_h?Xp:vp))(Cp,Ep),this.touchAction=new Tv(this,this.options.touchAction),Pv(this,!0),Fu(this.options.recognizers,function(Fp){var Hp=this.add(new Fp[0](Fp[1]));Fp[2]&&Hp.recognizeWith(Fp[2]),Fp[3]&&Hp.requireFailure(Fp[3])},this)}function Pv(dp,_p){var Cp,Fp=dp.element;Fp.style&&(Fu(dp.options.cssProps,function(Hp,uv){Cp=Zu(Fp.style,uv),_p?(dp.oldCssProps[Cp]=Fp.style[Cp],Fp.style[Cp]=Hp):Fp.style[Cp]=dp.oldCssProps[Cp]||""}),_p||(dp.oldCssProps={}))}return cv.prototype={set:function(dp){return Pu(this.options,dp),dp.touchAction&&this.touchAction.update(),dp.inputTarget&&(this.input.destroy(),this.input.target=dp.inputTarget,this.input.init()),this},stop:function(dp){this.session.stopped=dp?2:1},recognize:function(dp){var _p=this.session;if(!_p.stopped){var Cp;this.touchAction.preventDefaults(dp);var Fp=this.recognizers,Hp=_p.curRecognizer;(!Hp||Hp&&8&Hp.state)&&(Hp=_p.curRecognizer=null);for(var uv=0;uv<Fp.length;)Cp=Fp[uv],_p.stopped===2||Hp&&Cp!=Hp&&!Cp.canRecognizeWith(Hp)?Cp.reset():Cp.recognize(dp),!Hp&&14&Cp.state&&(Hp=_p.curRecognizer=Cp),uv++}},get:function(dp){if(dp instanceof Cv)return dp;for(var _p=this.recognizers,Cp=0;Cp<_p.length;Cp++)if(_p[Cp].options.event==dp)return _p[Cp];return null},add:function(dp){if(ku(dp,"add",this))return this;var _p=this.get(dp.options.event);return _p&&this.remove(_p),this.recognizers.push(dp),dp.manager=this,this.touchAction.update(),dp},remove:function(dp){if(ku(dp,"remove",this))return this;if(dp=this.get(dp)){var _p=this.recognizers,Cp=tp(_p,dp);Cp!==-1&&(_p.splice(Cp,1),this.touchAction.update())}return this},on:function(dp,_p){if(dp!==Cu&&_p!==Cu){var Cp=this.handlers;return Fu(_d(dp),function(Fp){Cp[Fp]=Cp[Fp]||[],Cp[Fp].push(_p)}),this}},off:function(dp,_p){if(dp!==Cu){var Cp=this.handlers;return Fu(_d(dp),function(Fp){_p?Cp[Fp]&&Cp[Fp].splice(tp(Cp[Fp],_p),1):delete Cp[Fp]}),this}},emit:function(dp,_p){this.options.domEvents&&function(Hp,uv){var pv=$u.createEvent("Event");pv.initEvent(Hp,!0,!0),pv.gesture=uv,uv.target.dispatchEvent(pv)}(dp,_p);var Cp=this.handlers[dp]&&this.handlers[dp].slice();if(Cp&&Cp.length){_p.type=dp,_p.preventDefault=function(){_p.srcEvent.preventDefault()};for(var Fp=0;Fp<Cp.length;)Cp[Fp](_p),Fp++}},destroy:function(){this.element&&Pv(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Pu(dv,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:yv,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:gp,DIRECTION_ALL:30,Manager:cv,Input:Dp,TouchAction:Tv,TouchInput:Kp,MouseInput:vp,PointerEventInput:$p,TouchMouseInput:Xp,SingleTouchInput:Gp,Recognizer:Cv,AttrRecognizer:jp,Tap:lv,Pan:Up,Swipe:vv,Pinch:zp,Rotate:gv,Press:iv,on:Qu,off:qu,each:Fu,merge:zu,extend:Gu,assign:Pu,inherit:Hu,bindFn:Uu,prefixed:Zu}),dv}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function oa(_u,$u,Tu){var Cu=$u.offsetWidth,Pu=$u.offsetHeight,Ru=$u.getBoundingClientRect(),Lu=Ru.top,Bu=Ru.left;return Tu&&(Bu+=Cu*Tu.left,Lu+=Pu*(1-Tu.bottom-Tu.height),Cu*=Tu.width,Pu*=Tu.height),new r$n.Vector2((_u.x-Bu)/Cu*2-1,-(_u.y-Lu)/Pu*2+1)}var sa=new r$n.OrthographicCamera(-1,1,1,-1,0,1),aa$1=new r$n.BufferGeometry;aa$1.setAttribute("position",new r$n.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),aa$1.setAttribute("uv",new r$n.Float32BufferAttribute([0,2,0,0,2,0],2));var la=new r$n.Mesh(aa$1),ua=new r$n.Scene;ua.add(la);var ha$1=function(){function _u($u,Tu){var Cu;this.renderer=$u,this.material=new r$n.ShaderMaterial({vertexShader:(Cu=Tu.vertex)!==null&&Cu!==void 0?Cu:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:Tu.fragment,uniforms:Object.assign({inputBuffer:new r$n.Uniform(null)},Tu.uniforms),defines:Object.assign({},Tu.defines),blending:r$n.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Tu){var Cu=this.renderer.getRenderTarget(),Pu=la.material;this.material.uniforms.inputBuffer.value=$u.texture,la.material=this.material,this.renderer.setRenderTarget(Tu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Cu),la.material=Pu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),ca$1=function(){function _u($u){this.renderer=$u,this.material=new r$n.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$n.Uniform(new r$n.Vector3)}),blending:r$n.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Tu){var Cu=this.renderer.getRenderTarget(),Pu=la.material;this.material.uniforms.inputValue.value.copy($u),la.material=this.material,this.renderer.setRenderTarget(Tu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Cu),la.material=Pu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),da$1=function(_u){function $u(Tu){return _u.call(this,Tu,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$h.__extends($u,_u),$u}(ha$1),pa=function(){function _u($u){this.enable=!0,this.renderer=$u,this.copyPass=new da$1(this.renderer)}return _u.prototype.render=function($u,Tu){this.copyPass.render($u,Tu)},_u.prototype.dispose=function(){this.copyPass.dispose()},_u}(),fa$1=function(_u){function $u(Tu){var Cu,Pu=this;Pu=_u.call(this)||this;var Ru=$u.parseArgs(Tu);return Pu.pending=!0,Pu.userAction=Ru.initial[3],Pu.destroyed=!1,Pu.ident=Ru.ident,Pu.scene=Ru.scene,Pu.helper=Ru.helper,Pu.camera=Ru.camera,Pu.renderer=Ru.renderer,Pu.scissor=Ru.scissor,Pu.element=Ru.element,Pu.model=Ru.model,Pu.enableIOSEDR=(Cu=Ru.enableIOSEDR)!==null&&Cu!==void 0&&Cu,Pu.work=Ru.work,Pu.imageOptions=Ru.imageOptions,Pu.videoTexture=Ru.videoTexture,Pu.networkSubscribe=Ru.networkSubscribe,Pu.requestProxy=Ru.requestProxy,Pu.needsRender=!0,Pu.maxFov=120,Pu.minFov=40,Pu.maxLatitude=+Math.PI/2,Pu.minLatitude=-Math.PI/2,Pu.cameraMotion=new Ro({longitude:{value:Pu.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Pu.camera.pose.latitude,fov:Pu.camera.pose.fov}),Pu.eventUnbinds=[Ru.element].concat(Ru.extraElements||[]).map(function(Lu){return Pu.bindEvents(Lu)}),at$4.shared.add(function(){return Pu.initAnimation.apply(Pu,Ru.initial)},!0),Pu}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){return t$h.__assign({},Tu)},$u.initAnimationEndState=function(Tu){var Cu=this.parseArgs(Tu);return{longitude:Cu.camera.pose.longitude,latitude:Cu.camera.pose.latitude,fov:Cu.camera.pose.fov,offset:Cu.camera.pose.offset.clone(),distance:Cu.camera.pose.distance}},$u.prototype.destroy=function(){var Tu;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Cu=0,Pu=this.eventUnbinds;Cu<Pu.length;Cu++)(0,Pu[Cu])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(Tu=this.pressState)===null||Tu===void 0||Tu.stop(),delete this.pressState},$u.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},$u.prototype.bindExtraElement=function(Tu){for(var Cu=0,Pu=this.eventUnbinds;Cu<Pu.length;Cu++)if(Pu[Cu].element===Tu)return;this.eventUnbinds.push(this.bindEvents(Tu))},$u.prototype.unbindExtraElement=function(Tu){for(var Cu=[],Pu=0,Ru=this.eventUnbinds;Pu<Ru.length;Pu++){var Lu=Ru[Pu];Lu.element===Tu?Lu():Cu.push(Lu)}this.eventUnbinds=Cu},$u.prototype.updateRenderSize=function(){this.needsRender=!0},$u.prototype.updateModel=function(Tu){this.model=Tu,this.needsRender=!0},$u.prototype.updateWork=function(Tu,Cu,Pu,Ru,Lu){return this.work=Tu,this.userAction=Lu,!1},$u.prototype.updateTime=function(Tu,Cu){for(var Pu=[],Ru=2;Ru<arguments.length;Ru++)Pu[Ru-2]=arguments[Ru];if(!this.destroyed){var Lu={};this.cameraMotion.ended&&(this.cameraMotion.update(Tu),Lu.longitude=this.cameraMotion.value.longitude,Lu.latitude=this.cameraMotion.value.latitude,Lu.fov=this.cameraMotion.value.fov),ia$1(Lu)&&this.setCamera(Lu)}},$u.prototype.render=function(){this.renderer.render(this.scene,this.camera)},$u.prototype.postProcessing=function(Tu,Cu){this.destroyed||(this.effect||(this.effect=new pa(this.renderer)),this.effect.render(Tu,Cu))},$u.prototype.updateCamera=function(Tu,Cu,Pu){return this.userAction=Pu,this.cameraMotion.set(Tu,Cu)},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$3())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}},$u.prototype.moveToPano=function(Tu,Cu,Pu){Cu===void 0&&(Cu={}),this.userAction=Pu;var Ru={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};Cu.moveStartCallback&&Cu.moveStartCallback(Tu,Ru),this.emit("moveToPano",Tu,this.userAction),this.emit("panoWillArrive",Tu,Ru,this.userAction),this.emit("panoArrived",Tu,Ru,this.userAction),Cu.moveEndCallback&&Cu.moveEndCallback(Tu,Ru)},$u.prototype.initAnimation=function(Tu,Cu,Pu,Ru){this.pending=!1,this.userAction=Ru},$u.prototype.setCamera=function(Tu){var Cu,Pu,Ru,Lu,Bu;Tu===void 0&&(Tu={});var Vu=(Cu=Tu.longitude)!==null&&Cu!==void 0?Cu:this.camera.pose.longitude,Ou=(Pu=Tu.latitude)!==null&&Pu!==void 0?Pu:this.camera.pose.latitude,Du=(Ru=Tu.fov)!==null&&Ru!==void 0?Ru:this.camera.pose.fov,ku=(Lu=Tu.distance)!==null&&Lu!==void 0?Lu:this.camera.pose.distance,Fu=(Bu=Tu.offset)!==null&&Bu!==void 0?Bu:this.camera.pose.offset,Nu=this.camera.position.clone(),Gu=Vs(Vu,this.camera.pose.longitude,2*Math.PI)||Vs(Ou,this.camera.pose.latitude),zu=Vs(Du,this.camera.pose.fov),Hu=Vs(ku,this.camera.pose.distance),Uu=Hs(Fu,this.camera.pose.offset);this.camera.setFromPose({longitude:Vu,latitude:Ou,fov:Du,distance:ku,offset:Fu});var ju=Hs(Nu,this.camera.position);zu&&this.emit("cameraFovUpdate",Du,this.userAction),Gu&&this.emit("cameraDirectionUpdate",{longitude:Vu,latitude:Ou},this.userAction),ju&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(zu||Gu||Uu||Hu)&&this.emit("cameraUpdate",{longitude:Vu,latitude:Ou,fov:Du,offset:Fu,distance:ku},this.userAction),this.needsRender=!0},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Ru=Tu.pointers.map(function(Lu){return ii(Lu,["x","y"])});this.emit("wantsGesture","pan",Ru,Tu.isFinal)||this.emit("gesture","pan",Ru,Tu.isFinal)}},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Pu){return ii(Pu,["x","y"])});this.emit("wantsGesture","tap",Cu,!0)||this.emit("gesture","tap",Cu,!0)},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Ru=[Tu];if(this.emit("wantsGesture","press",Ru,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;this.emit("gesture","press",Ru,Cu)},$u.prototype.onPinchGesture=function(Tu){var Cu=Tu.pointers.map(function(Pu){return ii(Pu,["x","y"])});this.emit("wantsGesture","pinch",Cu,Tu.isFinal)||this.emit("gesture","pinch",Cu,Tu.isFinal)},$u.prototype.onMouseWheel=function(Tu){var Cu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Pu=[{x:Tu.clientX,y:Tu.clientY,delta:Cu}];this.emit("wantsGesture","mouseWheel",Pu,!1)||this.emit("gesture","mouseWheel",Pu,!1)},$u.prototype.onMouseMove=function(Tu){},$u.prototype.onMouseOut=function(){},$u.prototype.relativeClientPosition=function(Tu){return oa(Tu,this.element,this.scissor)},$u.prototype.bindEvents=function(Tu){var Cu=this,Pu=function(Ju){var _d=oa(Ju,Cu.element,Cu.scissor);return!(Math.abs(_d.x)>1||Math.abs(_d.y)>1)},Ru=new ra.Manager(Tu),Lu=function(Ju){return Ju.session.firstInput||null};Ru.add(new ra.Pan({threshold:10,pointers:0})),Ru.add(new ra.Tap({interval:410})),Ru.add(new ra.Pinch({threshold:0,pointers:2})),Ru.on("panstart pan",function(Ju){var _d=Lu(Ru);_d&&!Pu(_d.center)||(Cu.onPanGesture(Ju),Hu())}),Ru.on("tap",function(Ju){if(Ju.pointerType!=="mouse"||Ju.srcEvent.button===0){var _d=Lu(Ru);_d&&!Pu(_d.center)||(Cu.onTapGesture(Ju),Hu())}}),Ru.on("pinchstart pinch pinchend",function(Ju){var _d=Lu(Ru);_d&&!Pu(_d.center)||(Cu.onPinchGesture(Ju),Hu())});var Bu=null,Vu=null,Ou=function(Ju,_d,tp){var Ku=Ju==="pinchend"?_d:_d-tp.deltaY/280;return{type:Ju,target:tp.target,pointerType:"mouse",srcEvent:tp,pointers:[{x:tp.clientX,y:tp.clientY}],isFirst:Ju==="pinchstart",isFinal:Ju==="pinchend",scale:ho(Ku,.1,10),center:{x:tp.clientX,y:tp.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Du=function(Ju){var _d,tp={x:Ju.clientX,y:Ju.clientY};if(Pu(tp)){if(Ju.preventDefault(),Ju.ctrlKey){var Ku=(_d=Bu==null?void 0:Bu.prevInput.scale)!==null&&_d!==void 0?_d:1,Xu=Ou(Bu?"pinch":"pinchstart",Ku,Ju);Bu===null?Bu={firstInput:Xu,prevInput:Xu}:Bu.prevInput=Xu,Cu.onPinchGesture(Xu),Vu!==null&&window.clearTimeout(Vu),Vu=window.setTimeout(function(){var Zu;Vu=null;var _c=(Zu=Bu==null?void 0:Bu.prevInput.scale)!==null&&Zu!==void 0?Zu:1,Xc=Ou("pinchend",_c,Ju);Bu=null,Cu.onPinchGesture(Xc)},200)}else Cu.onMouseWheel(Ju);Hu()}},ku=function(Ju){if(!Zs()){var _d={x:Ju.clientX,y:Ju.clientY};Pu(_d)?(Cu.onMouseMove(Ju),Cu.pressState&&Math.abs(Ju.clientX-Cu.pressState.x)>10&&Math.abs(Ju.clientY-Cu.pressState.y)>10&&Hu()):Cu.onMouseOut()}},Fu=function(){Cu.onMouseOut(),Hu()},Nu=function(Ju,_d){if(Pu(Ju)){Cu.pressState={x:Ju.x,y:Ju.y,time:Cu.pressState?Cu.pressState.time:_d,stop:Qe$1};var tp=_d-Cu.pressState.time;Cu.onPressGesture({x:Ju.x,y:Ju.y,delta:tp},!1),Cu.pressState&&(Cu.pressState.stop=at$4.shared.add(function(Ku){return Nu({x:Ju.x,y:Ju.y},Ku)},!0,1))}else Hu()},Gu=function(Ju){Hu(),Ju.touches.length>1||Ju.changedTouches.length<=0||Nu({x:Ju.changedTouches[0].clientX,y:Ju.changedTouches[0].clientY},_e$3())},zu=function(Ju){Hu(),Nu({x:Ju.clientX,y:Ju.clientY},_e$3())},Hu=function(){var Ju;if(Cu.pressState){var _d=_e$3()-Cu.pressState.time;Cu.onPressGesture({x:Cu.pressState.x,y:Cu.pressState.y,delta:_d},!0),(Ju=Cu.pressState)===null||Ju===void 0||Ju.stop(),delete Cu.pressState}},Uu=null,ju=function(Ju){var _d,tp="pinch",Ku=!1,Xu=!1;switch(Ju.type){case"gesturestart":tp="pinchstart",Ku=!0;break;case"gestureend":tp="pinchend",Xu=!0}return{type:tp,target:Ju.target,pointerType:"mouse",srcEvent:Ju,pointers:[{x:Ju.clientX,y:Ju.clientY}],isFirst:Ku,isFinal:Xu,scale:(_d=Ju.scale)!==null&&_d!==void 0?_d:1,center:{x:Ju.clientX,y:Ju.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Wu=function(Ju){if(Ju.preventDefault(),!Zs()){var _d=ju(Ju),tp=(Uu={firstInput:_d}).firstInput;tp&&!Pu(tp.center)||Cu.onPinchGesture(_d)}},Qu=function(Ju){if(Ju.preventDefault(),!Zs()&&Uu){var _d=ju(Ju),tp=Uu.firstInput;tp&&!Pu(tp.center)||Cu.onPinchGesture(_d)}},qu=function(Ju){if(Ju.preventDefault(),!Zs()&&Uu){var _d=ju(Ju),tp=Uu.firstInput;Uu=null,tp&&!Pu(tp.center)||Cu.onPinchGesture(_d)}},Yu=function(Ju){if(Ju&&typeof Ju.preventDefault=="function"&&Ju.currentTarget===Tu&&Ju.preventDefault(),typeof getSelection=="function"){var _d=getSelection();_d&&_d.focusNode&&(_d.removeAllRanges&&_d.removeAllRanges(),_d.empty&&_d.empty())}};return Tu.addEventListener("wheel",Du,{passive:!1}),Tu.addEventListener("mousemove",ku,!1),Tu.addEventListener("mouseout",Fu,!1),Tu.addEventListener("touchstart",Gu,!1),Tu.addEventListener("touchend",Hu,!1),Tu.addEventListener("touchcancel",Hu,!1),Tu.addEventListener("mousedown",zu,!1),Tu.addEventListener("mouseup",Hu,!1),Tu.addEventListener("gesturestart",Wu,{passive:!1}),Tu.addEventListener("gesturechange",Qu,{passive:!1}),Tu.addEventListener("gestureend",qu,{passive:!1}),Tu.addEventListener("touchstart",Yu,!1),Tu.addEventListener("contextmenu",Yu,!1),Object.assign(function(){Ru.destroy(),Tu.removeEventListener("wheel",Du,!1),Tu.removeEventListener("mousemove",ku,!1),Tu.removeEventListener("mouseout",Fu,!1),Tu.removeEventListener("touchstart",Gu,!1),Tu.removeEventListener("touchend",Hu,!1),Tu.removeEventListener("touchcancel",Hu,!1),Tu.removeEventListener("mousedown",zu,!1),Tu.removeEventListener("mouseup",Hu,!1),Tu.removeEventListener("gesturestart",Wu,!1),Tu.removeEventListener("gesturechange",Qu,!1),Tu.removeEventListener("gestureend",qu,!1),Tu.removeEventListener("touchstart",Yu,!1),Tu.removeEventListener("contextmenu",Yu,!1)},{element:Tu})},$u}(Fe),Aa=function(_u){function $u(Tu){var Cu,Pu,Ru,Lu,Bu=this,Vu=$u.parseArgs(Tu);return(Bu=_u.call(this,Vu)||this).defaultLongitude=Vu.defaultLongitude,Bu.defaultLatitude=Vu.defaultLatitude,Bu.defaultFov=Vu.defaultFov,Bu.maxFov=Vu.maxFov,Bu.minFov=Vu.minFov,Bu.maxLatitude=Vu.maxLatitude,Bu.minLatitude=Vu.minLatitude,Bu.locationMotion=new Ro({x:Bu.camera.pose.offset.x,y:Bu.camera.pose.offset.y,z:Bu.camera.pose.offset.z,distance:Bu.camera.pose.distance,modelAlpha:(Pu=(Cu=Bu.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Ru=Bu.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Bu}return t$h.__extends($u,_u),$u.distanceFromModel=function(Tu,Cu,Pu){var Ru=Tu.bounding,Lu=Math.pow(Math.pow(Ru.max.x-Ru.min.x+1,2)+Math.pow(Ru.max.y-Ru.min.y+1,2)+Math.pow(Ru.max.z-Ru.min.z+1,2),.5),Bu=Lu/2/Math.tan(Math.PI*Cu/360);return Pu<1&&(Bu/=Pu),isNaN(Bu)?Lu:Bu},$u.parseArgs=function(Tu){var Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du=_u.parseArgs.call(this,Tu);return t$h.__assign(t$h.__assign({},Du),{defaultLongitude:(Cu=Tu.defaultLongitude)!==null&&Cu!==void 0?Cu:Math.PI/4,defaultLatitude:(Pu=Tu.defaultLatitude)!==null&&Pu!==void 0?Pu:Math.PI/4,defaultFov:(Ru=Tu.defaultFov)!==null&&Ru!==void 0?Ru:80,maxFov:(Lu=Tu.maxFov)!==null&&Lu!==void 0?Lu:120,minFov:(Bu=Tu.minFov)!==null&&Bu!==void 0?Bu:40,maxLatitude:(Vu=Tu.maxLatitude)!==null&&Vu!==void 0?Vu:+Math.PI/2,minLatitude:(Ou=Tu.minLatitude)!==null&&Ou!==void 0?Ou:-Math.PI/2})},$u.initAnimationEndPose=function(Tu){var Cu,Pu,Ru,Lu=this.parseArgs(Tu),Bu=Tu.initial[1];return{longitude:(Cu=Bu.longitude)!==null&&Cu!==void 0?Cu:Lu.defaultLongitude,latitude:ho((Pu=Bu.latitude)!==null&&Pu!==void 0?Pu:Lu.defaultLatitude,Lu.minLatitude,Lu.maxLatitude),fov:(Ru=Bu.fov)!==null&&Ru!==void 0?Ru:Lu.defaultFov,offset:Tu.model.bounding.getCenter(new r$n.Vector3),distance:$u.distanceFromModel(Lu.model,Lu.defaultFov,Lu.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Ru,Lu){return this.work=Tu,this.updateCamera(Pu,Ru!=null?Ru:0,Lu),!0},$u.prototype.updateModel=function(Tu){_u.prototype.updateModel.call(this,Tu);var Cu=Tu.bounding.getCenter(new r$n.Vector3),Pu=$u.distanceFromModel(Tu,this.defaultFov,this.camera.aspect);this.locationMotion.set({x:Cu.x,y:Cu.y,z:Cu.z,distance:Pu},0).catch(Qe$1)},$u.prototype.updateTime=function(Tu,Cu){for(var Pu=[],Ru=2;Ru<arguments.length;Ru++)Pu[Ru-2]=arguments[Ru];if(!this.destroyed){var Lu={},Bu={};this.locationMotion.ended||(this.locationMotion.update(Tu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Bu.distance=this.locationMotion.value.distance,Bu.offset=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Tu),Bu.longitude=this.cameraMotion.value.longitude,Bu.latitude=this.cameraMotion.value.latitude,Bu.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Bu)||this.setCamera(Bu)}},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$3())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$3())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:new r$n.Vector3(Cu.value.x,Cu.value.y,Cu.value.z),distance:Cu.value.distance}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var Du={longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Bu=Cu.latitude)!==null&&Bu!==void 0?Bu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Vu=Cu.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$n.Vector3),distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},ku=ii(Du,["longitude","latitude","fov"]),Fu={x:Du.offset.x,y:Du.offset.y,z:Du.offset.z,distance:Du.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Tu,Du,this.userAction),this.cameraMotion.set(ku,Pu).catch(Qe$1),this.locationMotion.set(Fu,Pu).then(function(){Ou.emit("initAnimationEnded",Tu,Du,Ou.userAction)},function(Nu){var Gu=na(Ou.camera.pose);Ou.emit("initAnimationEnded",Tu,Gu,Ou.userAction)}).catch(Qe$1)}},$u.prototype.updateRenderSize=function(){this.locationMotion.set({distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this.work.observers.filter(function(Bu){return Bu.active}),Pu=this.model.intersectRaycaster(Tu)[0];if(!Pu)return null;var Ru=ta(Cu,function(Bu){return Bu.standingPosition.distanceTo(Pu.point)},!0),Lu=Ru[0];return Ru[1]<5?this.work.observers.indexOf(Lu):null},$u.prototype.coordinatesForOffset=function(Tu){var Cu=this.renderer.getSize(new r$n.Vector2);return{longitude:2*Tu.x/(Cu.x*this.scissor.width),latitude:2*Tu.y/(Cu.y*this.scissor.height)}},$u.prototype.requestInteriaMovement=function(Tu,Cu){var Pu=this;if(this.interiaMovement!==!1){for(var Ru=t$h.__assign({},Tu),Lu={longitude:0,latitude:0},Bu=0;Bu<Cu;Bu++)Ru.longitude*=.996,Ru.latitude*=.994008,Lu.longitude+=Ru.longitude,Lu.latitude+=Ru.latitude;var Vu=Gs(this.cameraMotion.value.longitude+Lu.longitude),Ou=ho(this.cameraMotion.value.latitude+Lu.latitude,this.minLatitude,this.maxLatitude),Du={longitude:Vu,latitude:Ou,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Vu,latitude:Ou},0).catch(Qe$1);var ku=Ru.longitude>1e-4||Ru.longitude<-1e-4||Ru.latitude>1e-4||Ru.latitude<-1e-4;this.emit("interiaPan",Du,!ku),ku?at$4.shared.add(function(Fu,Nu){Pu.requestInteriaMovement(Ru,0|Nu)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Ru=Tu.pointers.map(function(zu){return ii(zu,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Tu.isFinal)){var Lu={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y},Bu=this.relativeClientPosition(Tu.center),Vu=this.camera.pose.latitude<Math.PI/6||Bu.y<0?-1:1;Lu.x*=Vu;var Ou=this.coordinatesForOffset(Lu),Du=Gs(this.cameraMotion.value.longitude+Ou.longitude),ku=ho(this.cameraMotion.value.latitude+Ou.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Tu.overallVelocityX)>.2&&Math.atan2(Math.abs(Tu.overallVelocityY),Math.abs(Tu.overallVelocityX))<Math.PI/6.923&&(ku=this.cameraMotion.value.latitude);var Fu={longitude:Du,latitude:ku,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Fu,Tu.isFinal)&&(this.emit("gesture","pan",Ru,Tu.isFinal),this.emit("panGesture",Fu,Tu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:Fu.longitude,latitude:Fu.latitude},0).catch(Qe$1),Tu.isFinal&&!this.emit("wantsInteriaPan",Fu))){this.interiaMovement=!0;var Nu=Tu.velocityX*Vu,Gu=Tu.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Nu,y:Gu}),0)}}}},$u.prototype.onPinchGesture=function(Tu){var Cu,Pu=(Cu=this.pinchState)===null||Cu===void 0?void 0:Cu.fov,Ru=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Ru=!0,delete this.panState,delete this.pinchState),Pu!==void 0){var Lu=Tu.pointers.map(function(Vu){return ii(Vu,["x","y"])});if(!this.emit("wantsGesture","pinch",Lu,Ru)){var Bu=ho(Pu/Tu.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Tu.scale,Bu,Ru)||this.emit("wantsChangeCameraFov",Bu)||(this.emit("gesture","pinch",Lu,Ru),this.emit("pinchGesture",Tu.scale,Bu,Ru),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Bu},0).catch(Qe$1),this.onPanGesture(Tu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Ru=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=this.minFov,Bu=this.maxFov,Vu=ho(this.camera.fov-Pu,Lu,Bu);this.emit("wantsMouseWheel",Pu,Vu,!1)||this.emit("wantsChangeCameraFov",Vu)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Pu,Vu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Vu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Ru,!0)||Cu.emit("wantsMouseWheel",Pu,Vu,!0)||(Cu.emit("gesture","mouseWheel",Ru,!0),Cu.emit("mouseWheel",0,Vu,!0))},200)})}},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Vu){return ii(Vu,["x","y"])});if(!this.emit("wantsGesture","tap",Cu,!0)){var Pu=this.relativeClientPosition(Tu.center),Ru=new r$n.Raycaster;if(Ru.setFromCamera(Pu,this.camera),!this.emit("wantsTapGesture",Ru,Pu,!0)){this.emit("gesture","tap",Cu,!0),this.emit("tapGesture",Ru,Pu,!0),this.interiaMovement=!1;var Lu=this.getForwardPanoIndexOrNot(Ru);if(!oo(Lu)){this.emit("panoSelected",Lu);var Bu={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Lu,Bu,!0)}}}},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Ru,Lu=[Tu];if(this.emit("wantsGesture","press",Lu,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;var Bu=this.relativeClientPosition(Tu),Vu=new r$n.Raycaster;if(Vu.setFromCamera(Bu,this.camera),this.emit("wantsPressGesture",Vu,Bu,Tu.delta,Cu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Cu),this.emit("pressGesture",Vu,Bu,Tu.delta,Cu)},$u}(fa$1),ga$1=function(_u){function $u(Tu){var Cu=$u.parseArgs(Tu);return _u.call(this,Cu)||this}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){var Cu=[Tu.initial[0],t$h.__assign(t$h.__assign({},Tu.initial[1]),{longitude:0,latitude:Math.PI/2}),Tu.initial[2],Tu.initial[3]],Pu=t$h.__assign(t$h.__assign({},Tu),{initial:Cu,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return _u.parseArgs.call(this,Pu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.updateModel=function(Tu){this.model=Tu,this.needsRender=!0;var Cu=Tu.bounding.getCenter(new r$n.Vector3);this.locationMotion.set({x:Cu.x,y:Cu.y,z:Cu.z,distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},$u.prototype.initAnimation=function(Tu,Cu,Pu,Ru){var Lu,Bu=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var Vu={longitude:0,latitude:Math.PI/2,fov:ho((Lu=Cu.fov)!==null&&Lu!==void 0?Lu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$n.Vector3),distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Ou=ii(Vu,["longitude","latitude","fov"]),Du={x:Vu.offset.x,y:Vu.offset.y,z:Vu.offset.z,distance:Vu.distance,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Ou,Pu).catch(Qe$1),this.locationMotion.set(Du,Pu).then(function(){Bu.emit("initAnimationEnded",Tu,Vu,Bu.userAction)},function(ku){var Fu=na(Bu.camera.pose);Bu.emit("initAnimationEnded",Tu,Fu,Bu.userAction)})}},$u.prototype.getZoomOffsetFromFov=function(Tu,Cu,Pu){var Ru=new r$n.Vector3(0,-1,0),Lu=Math.tan(Pu/2*Math.PI/180),Bu=Math.tan(Cu.fov/2*Math.PI/180),Vu=(Bu-Lu)/Bu,Ou=new r$n.Raycaster;Ou.setFromCamera(Tu,Cu);var Du=Ou.ray.direction,ku=Du.angleTo(Ru),Fu=Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect),Nu=Fu*Math.tan(ku),Gu=Du.clone().setLength(Fu*Math.cos(ku)).projectOnPlane(Ru),zu=Gu.length(),Hu=Vu/zu*Gu.x*Nu,Uu=Vu/zu*Gu.z*Nu;return new r$n.Vector3(Hu,0,Uu)},$u.prototype.requestInteriaMovement=function(Tu,Cu){},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Ru=Tu.pointers.map(function(Hu){return ii(Hu,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Tu.isFinal)){var Lu=Tu.center.x-Cu.x,Bu=Tu.center.y-Cu.y,Vu=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Ou=this.model.bounding,Du=Ou.getCenter(new r$n.Vector3),ku=(Ou.max.x-Ou.min.x)/this.defaultFov*this.cameraMotion.value.fov,Fu=(Ou.max.y,Ou.min.y,this.defaultFov,this.cameraMotion.value.fov,(Ou.max.z-Ou.min.z)/this.defaultFov*this.cameraMotion.value.fov),Nu=(this.camera.position.y-Ou.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Gu=this.renderer.getSize(new r$n.Vector2);Vu.add(function(Hu,Uu){var ju=new r$n.Vector3;return ju.setFromMatrixColumn(Uu,0),ju.multiplyScalar(-Hu),ju}(2*Lu*Nu/Gu.y,this.camera.matrix)),Vu.add(function(Hu,Uu,ju){var Wu=new r$n.Vector3;return Wu.setFromMatrixColumn(ju,0),Wu.crossVectors(Uu,Wu),Wu.multiplyScalar(Hu),Wu}(2*Bu*Nu/Gu.y,this.camera.up,this.camera.matrix)),Vu.x=ho(Vu.x,Du.x-ku,Du.x+ku),Vu.z=ho(Vu.z,Du.z-Fu,Du.z+Fu),Vu.y=Du.y;var zu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Vu,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",zu,Tu.isFinal)||(this.emit("gesture","pan",Ru,Tu.isFinal),this.emit("panGesture",zu,Tu.isFinal),this.userAction=!0,this.locationMotion.set({x:Vu.x,y:Vu.y,z:Vu.z},0).catch(Qe$1))}}},$u.prototype.onPinchGesture=function(Tu){var Cu,Pu=(Cu=this.pinchState)===null||Cu===void 0?void 0:Cu.fov,Ru=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Ru=!0,delete this.pinchState),Pu!==void 0){var Lu=Tu.pointers.map(function(ku){return ii(ku,["x","y"])});if(!this.emit("wantsGesture","pinch",Lu,Ru)){var Bu=ho(Pu/Tu.scale,this.minFov,this.maxFov),Vu=this.relativeClientPosition({x:Tu.center.x,y:Tu.center.y}),Ou=this.getZoomOffsetFromFov(Vu,this.camera,Bu),Du=this.camera.pose.offset.clone().add(Ou);this.emit("wantsPinchGesture",Tu.scale,Bu,Ru)||this.emit("wantsChangeCameraFov",Bu)||(this.emit("gesture","pinch",Lu,Ru),this.emit("pinchGesture",Tu.scale,Bu,Ru),this.userAction=!0,this.locationMotion.set({x:Du.x,y:Du.y,z:Du.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Bu},0).catch(Qe$1),this.onPanGesture(Tu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Ru=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=ho(this.cameraMotion.value.fov-Pu,this.minFov,this.maxFov),Bu=this.relativeClientPosition({x:Tu.clientX,y:Tu.clientY}),Vu=this.getZoomOffsetFromFov(Bu,this.camera,Lu),Ou=this.camera.pose.offset.clone().add(Vu);this.emit("wantsMouseWheel",Pu,Lu,!1)||this.emit("wantsChangeCameraFov",Lu)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Pu,Lu,!1),this.userAction=!0,this.locationMotion.set({x:Ou.x,y:Ou.y,z:Ou.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Lu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Ru,!0)||Cu.emit("wantsMouseWheel",Pu,Lu,!0)||Cu.emit("wantsChangeCameraFov",Lu)||(Cu.emit("gesture","mouseWheel",Ru,!0),Cu.emit("mouseWheel",0,Lu,!0))},200)})}},$u}(Aa);function ma(_u,$u){$u===void 0&&($u=!1);var Tu=typeof _u;if(Tu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Cu="[",Pu=_u.length-1,Ru=0;Ru<Pu;Ru++)Cu+=ma(_u[Ru],!1)+",";return Pu>-1&&(Cu+=ma(_u[Ru],!1)),Cu+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return ma(_u.toJSON(),$u);var Lu=Object.keys(_u).sort(),Bu=Lu.length;for(Cu="",Ru=0;Ru<Bu;){var Vu=Lu[Ru],Ou=ma(_u[Vu],!0);Ou!==void 0&&(Ru&&Cu!==""&&(Cu+=","),Cu+=JSON.stringify(Vu)+":"+Ou),Ru++}return"{"+Cu+"}"}switch(Tu){case"function":case"undefined":return $u?void 0:null;case"number":return _u;default:return isFinite(_u)?_u:null}}function va(_u){return Te$1(String(ma(_u,!1)))}var ya,ba$1=function(_u){function $u(Tu){var Cu=this,Pu=$u.parseArgs(Tu);return(Cu=_u.call(this,Pu)||this).defaultLongitude=Pu.defaultLongitude,Cu.defaultLatitude=Pu.defaultLongitude,Cu.defaultFov=Pu.defaultFov,Cu.maxFov=Pu.maxFov,Cu.minFov=Pu.minFov,Cu.maxLatitude=Pu.maxLatitude,Cu.minLatitude=Pu.minLatitude,Cu.moveSpeed=Pu.moveSpeed,Cu.intersectMeshCreator=Pu.intersectMeshCreator,Cu.interiaMovement=!1,Cu.intersectMesh=Cu.intersectMeshCreator(),Cu.intersectMesh.name="intersect",Cu.intersectMesh.visible=!1,Cu.helper.add(Cu.intersectMesh),Cu}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu=_u.parseArgs.call(this,Tu);return t$h.__assign(t$h.__assign({},Fu),{defaultLongitude:(Cu=Tu.defaultLongitude)!==null&&Cu!==void 0?Cu:0,defaultLatitude:(Pu=Tu.defaultLatitude)!==null&&Pu!==void 0?Pu:0,defaultFov:(Ru=Tu.defaultFov)!==null&&Ru!==void 0?Ru:90,maxFov:(Lu=Tu.maxFov)!==null&&Lu!==void 0?Lu:120,minFov:(Bu=Tu.minFov)!==null&&Bu!==void 0?Bu:40,maxLatitude:(Vu=Tu.maxLatitude)!==null&&Vu!==void 0?Vu:+Math.PI/2,minLatitude:(Ou=Tu.minLatitude)!==null&&Ou!==void 0?Ou:-Math.PI/2,moveSpeed:(Du=Tu.moveSpeed)!==null&&Du!==void 0?Du:3.2,intersectMeshCreator:(ku=Tu.intersectMeshCreator)!==null&&ku!==void 0?ku:function(){return new Fs}})},$u.initAnimationEndPose=function(Tu){var Cu,Pu,Ru,Lu=this.parseArgs(Tu),Bu=Tu.initial,Vu=Bu[0],Ou=Bu[1];return{longitude:(Cu=Ou.longitude)!==null&&Cu!==void 0?Cu:Lu.defaultLongitude,latitude:ho((Pu=Ou.latitude)!==null&&Pu!==void 0?Pu:Lu.defaultLatitude,Lu.minLatitude,Lu.maxLatitude),fov:ho((Ru=Ou.fov)!==null&&Ru!==void 0?Ru:Lu.defaultFov,Lu.minFov,Lu.maxFov),offset:Lu.work.observers[Vu].position.clone(),distance:0}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},$u.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&_u.prototype.isReady.call(this)},$u.prototype.calculateMovingDuration=function(Tu,Cu){switch(typeof Tu){case"function":return Tu(Cu,this.moveSpeed);case"number":return Tu;case"string":return Number(Tu);default:return ho(Cu,1,3)/this.moveSpeed*1e3}},$u.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},$u.prototype.coordinatesForOffset=function(Tu){var Cu=this.cameraMotion.value.fov,Pu=this.camera.aspect,Ru=this.renderer.getSize(new r$n.Vector2);return{longitude:2*Tu.x/(Ru.x*this.scissor.width)*Cu/95*Pu,latitude:-2*Tu.y/(Ru.y*this.scissor.height)*Cu/95}},$u.prototype.cameraBounce=function(){var Tu=this.cameraMotion.value,Cu=Tu.longitude,Pu=Tu.latitude,Ru=Tu.fov,Lu=[{progress:0,value:{longitude:Cu,latitude:Pu,fov:Ru}},{progress:.5,value:{longitude:Cu,latitude:Pu,fov:.98*Ru}},{progress:1,value:{longitude:Cu,latitude:Pu,fov:Ru}}];this.cameraMotion.setKeyframes(Lu,500).catch(Qe$1)},$u.prototype.requestInteriaMovement=function(Tu,Cu){var Pu=this;if(this.interiaMovement!==!1){for(var Ru=t$h.__assign({},Tu),Lu={longitude:0,latitude:0},Bu=0;Bu<Cu;Bu++)Ru.longitude*=.996,Ru.latitude*=.98604,Lu.longitude+=Ru.longitude,Lu.latitude+=Ru.latitude;var Vu=Gs(this.cameraMotion.value.longitude+Lu.longitude),Ou=ho(this.cameraMotion.value.latitude+Lu.latitude,this.minLatitude,this.maxLatitude),Du={longitude:Vu,latitude:Ou,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Vu,latitude:Ou},0).catch(Qe$1);var ku=Ru.longitude>1e-4||Ru.longitude<-1e-4||Ru.latitude>1e-4||Ru.latitude<-1e-4;this.emit("interiaPan",Du,!ku),ku?at$4.shared.add(function(Fu,Nu){Pu.requestInteriaMovement(Ru,0|Nu)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Ru=Tu.pointers.map(function(Gu){return ii(Gu,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Tu.isFinal)){var Lu={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y},Bu=this.coordinatesForOffset(Lu),Vu=Gs(this.cameraMotion.value.longitude+Bu.longitude),Ou=ho(this.cameraMotion.value.latitude+Bu.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Tu.overallVelocityX)>.2&&Math.atan2(Math.abs(Tu.overallVelocityY),Math.abs(Tu.overallVelocityX))<Math.PI/6.923&&(Ou=this.cameraMotion.value.latitude);var Du={longitude:Vu,latitude:Ou,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Du,Tu.isFinal)){this.emit("gesture","pan",Ru,Tu.isFinal),this.emit("panGesture",Du,Tu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var ku={longitude:Du.longitude,latitude:Du.latitude,fov:Du.fov};if(this.cameraMotion.set(ku,0).catch(Qe$1),Tu.isFinal&&!this.emit("wantsInteriaPan",Du)){this.interiaMovement=!0;var Fu=Tu.velocityX,Nu=.6*Tu.velocityY;Math.abs(Nu)>.5&&Math.abs(Fu)<.5&&(Fu=0),this.requestInteriaMovement(this.coordinatesForOffset({x:Fu,y:Nu}),0)}}}}},$u.prototype.onPinchGesture=function(Tu){var Cu,Pu=(Cu=this.pinchState)===null||Cu===void 0?void 0:Cu.fov,Ru=Tu.scale,Lu=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Lu=!0,delete this.pinchState),Pu!==void 0){var Bu=Tu.pointers.map(function(Ou){return ii(Ou,["x","y"])});if(!this.emit("wantsGesture","pinch",Bu,Lu)){var Vu=ho(Pu/Ru,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Ru,Vu,Lu)||this.emit("wantsChangeCameraFov",Vu)||(this.emit("gesture","pinch",Bu,Lu),this.emit("pinchGesture",Ru,Vu,Lu),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Vu},0).catch(Qe$1),this.onPanGesture(Tu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Ru=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=ho(this.cameraMotion.value.fov-Pu,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Pu,Lu,!1)||this.emit("wantsChangeCameraFov",Lu)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Pu,Lu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Lu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Ru,!0)||Cu.emit("wantsMouseWheel",Pu,Lu,!0)||Cu.emit("wantsChangeCameraFov",Lu)||(Cu.emit("gesture","mouseWheel",Ru,!0),Cu.emit("mouseWheel",0,Lu,!0))},200)})}},$u.prototype.onMouseMove=function(Tu){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Cu=this.relativeClientPosition({x:Tu.clientX,y:Tu.clientY}),Pu=new r$n.Raycaster;if(Pu.setFromCamera(Cu,this.camera),this.emit("wantsShowIntersectionOnModel",Pu))this.hideIntersectMesh();else{var Ru=this.model.intersectRaycaster(Pu)[0];if(Ru&&Ru.face){var Lu=Ru.face.normal,Bu=Lu.clone().multiplyScalar(.05),Vu=Ru.point.clone().add(Bu);this.intersectMesh.position.copy(Vu);var Ou=Vu.clone().add(Bu);if(this.intersectMesh.lookAt(Ou),Math.abs(Lu.y)>.99){var Du=this.camera.position.clone().sub(Vu);this.intersectMesh.rotation.z=-Math.atan2(Du.z,Du.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Ru,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:Tu.clientX,clientY:Tu.clientY}}}},$u.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Ru,Lu=[Tu];if(this.emit("wantsGesture","press",Lu,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;var Bu=this.relativeClientPosition(Tu),Vu=new r$n.Raycaster;if(Vu.setFromCamera(Bu,this.camera),this.emit("wantsPressGesture",Vu,Bu,Tu.delta,Cu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Cu),this.emit("pressGesture",Vu,Bu,Tu.delta,Cu)},$u}(fa$1);function xa(){return ya||(ya=new Promise(function(_u){var $u,Tu=document.createElement("video");Tu.muted=!0,Tu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Tu.addEventListener("timeupdate",function Cu(){Tu.removeEventListener("timeupdate",Cu,!1),clearTimeout($u);var Pu=document.createElement("canvas");Pu.width=Pu.height=1;var Ru=Pu.getContext("2d");Ru?(Ru.drawImage(Tu,0,0,1,1),Ru.getImageData(0,0,1,1).data[3]>10?_u(!0):_u(!1)):_u(!1)},!1),Tu.addEventListener("canplay",function Cu(){Tu.removeEventListener("canplay",Cu,!1),Tu.play()},!1),$u=window.setTimeout(function(){return _u(!1)},1e3)}))}var wa,Ea=function(_u){function $u(Tu,Cu){return Cu===void 0&&(Cu=.5),_u.call(this,Tu,{uniforms:{inputBuffer:new r$n.Uniform(null),scale:new r$n.Uniform(Cu)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$h.__extends($u,_u),$u}(ha$1),Ma=function(_u){function $u(Tu,Cu){Cu===void 0&&(Cu=.002);var Pu=_u.call(this,Tu,{uniforms:{targetBuffer:new r$n.Uniform(null),inputBuffer:new r$n.Uniform(null),step:new r$n.Uniform(Cu)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Pu.material.extensions.shaderTextureLOD=!0,Pu}return t$h.__extends($u,_u),Object.defineProperty($u.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(Tu){this.material.uniforms.targetBuffer.value=Tu},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(Tu){this.material.uniforms.step.value=Tu},enumerable:!1,configurable:!0}),$u}(ha$1),Ia=function(_u){function $u(Tu){var Cu=_u.call(this,Tu,{uniforms:{inputBuffer:new r$n.Uniform(null),luminanceAdaptiveBuffer:new r$n.Uniform(null),progress:new r$n.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Cu.material.transparent=!0,Cu}return t$h.__extends($u,_u),Object.defineProperty($u.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(Tu){this.material.uniforms.luminanceAdaptiveBuffer.value=Tu},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(Tu){this.material.uniforms.progress.value=Tu},enumerable:!1,configurable:!0}),$u}(ha$1),Sa=function(_u){function $u(Tu){var Cu=_u.call(this,Tu)||this;return Cu.enableTime=_e$3(),Cu.renderer=Tu,Cu.valuePass=new ca$1(Cu.renderer),Cu.luminancePass=new Ea(Cu.renderer,Math.sqrt(1/3)),Cu.nextStepPass=new Ma(Cu.renderer,.01),Cu.luminanceAdaptivePass=new Ia(Cu.renderer),Cu}return t$h.__extends($u,_u),$u.prototype.render=function(Tu,Cu){if(!this.enable)return this.enableTime=null,void this.copyPass.render(Tu);this.enableTime===null&&(this.enableTime=_e$3()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$n.WebGLRenderTarget(128,128,{minFilter:r$n.LinearMipmapLinearFilter,magFilter:r$n.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$n.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(Tu,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$n.WebGLRenderTarget(1,1,{minFilter:r$n.NearestFilter,magFilter:r$n.NearestFilter,type:r$n.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$n.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$n.WebGLRenderTarget(1,1,{minFilter:r$n.NearestFilter,magFilter:r$n.NearestFilter,type:r$n.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$n.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((_e$3()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(Tu,Cu)},$u.prototype.dispose=function(){var Tu,Cu,Pu;(Tu=this.luminanceTargetBuffer)===null||Tu===void 0||Tu.dispose(),(Cu=this.luminancePrevBuffer)===null||Cu===void 0||Cu.dispose(),(Pu=this.luminanceNextBuffer)===null||Pu===void 0||Pu.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},$u}(pa),Ca=["up","down","left","right","front","back"],Ba=(wa=Math.SQRT1_2)!==null&&wa!==void 0?wa:Math.sqrt(2),Ta={up:new r$n.Quaternion(Ba,0,0,Ba),down:new r$n.Quaternion(-Ba,0,0,Ba),left:new r$n.Quaternion(0,Ba,0,Ba),right:new r$n.Quaternion(0,-Ba,0,Ba),front:new r$n.Quaternion(0,0,0,1),back:new r$n.Quaternion(0,1,0,0)},Pa=new r$n.Quaternion().setFromAxisAngle(new r$n.Vector3(0,1,0),Math.PI),Ra=new r$n.PerspectiveCamera,ka=new r$n.Frustum,Da=new r$n.Matrix4,La=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Oa=new Float32Array([0,0,1,0,0,1,1,1]),Na=new Uint8Array([0,1,2,1,3,2]),Fa=new r$n.BufferGeometry;Fa.setAttribute("position",new r$n.BufferAttribute(La,3)),Fa.setAttribute("uv",new r$n.BufferAttribute(Oa,2)),Fa.setIndex(new r$n.BufferAttribute(Na,1));var Qa=function(_u){function $u(){var Tu=_u.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return Tu.depthTest=!1,Tu.depthWrite=!1,Tu.blending=r$n.NoBlending,Tu.map=Tu.uniforms.map.value,Tu.luminanceMap=Tu.uniforms.luminanceMap.value,Object.defineProperties(Tu,{map:{get:function(){return this.uniforms.map.value},set:function(Cu){this.uniforms.map.value=Cu}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Cu){this.uniforms.luminanceMap.value=Cu,this.defines.USE_LUMINANCE=Cu!==null,this.needsUpdate=!0}}}),Tu}return t$h.__extends($u,_u),$u}(r$n.ShaderMaterial),Va=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.level=0,Tu.sideCount=0,Tu.col=0,Tu.row=0,Tu.index=0,Tu.type="up",Tu}return t$h.__extends($u,_u),$u}(r$n.Box3),_a$1=function(_u){function $u(Tu,Cu){var Pu=this,Ru=new Qa;return Ru.visible=!1,(Pu=_u.call(this,Fa,Ru)||this).position.copy(Tu.getCenter(new r$n.Vector3)),Pu.quaternion.copy(Ta[Tu.type]),Pu.scale.setScalar(1/Math.pow(2,Tu.level)),Pu.name="tile-box",Pu.level=Tu.level,Pu.activeTime=-1,Pu.disposed=!1,Pu.needsRender=!1,Pu.frustumCulled=!1,Cu.then(function(Lu){var Bu=Lu[0],Vu=Lu[1];Pu.disposed?(Bu.dispose(),Vu==null||Vu.dispose()):(Pu.material.map=Bu,Pu.material.luminanceMap=Vu,Pu.material.needsUpdate=!0,Pu.material.visible=!0,Pu.needsRender=!0)}).catch(Qe$1),Pu}return t$h.__extends($u,_u),$u.getBox=function(Tu,Cu,Pu){var Ru=new Va,Lu=Math.pow(2,Tu),Bu=1/Lu,Vu=Pu%Lu,Ou=Math.floor(Pu/Lu);switch(Ru.level=Tu,Ru.index=Pu,Ru.sideCount=Lu,Ru.row=Ou,Ru.col=Vu,Ru.type=Cu,Cu){case"up":Ru.min.y=.5,Ru.max.y=.5,Ru.min.x=+Vu*Bu-.5,Ru.max.x=+Vu*Bu-.5+Bu,Ru.min.z=-Ou*Bu+.5-Bu,Ru.max.z=-Ou*Bu+.5;break;case"down":Ru.min.y=-.5,Ru.max.y=-.5,Ru.min.x=+Vu*Bu-.5,Ru.max.x=+Vu*Bu-.5+Bu,Ru.min.z=+Ou*Bu-.5,Ru.max.z=+Ou*Bu-.5+Bu;break;case"left":Ru.min.x=-.5,Ru.max.x=-.5,Ru.min.z=-Vu*Bu+.5-Bu,Ru.max.z=-Vu*Bu+.5,Ru.min.y=-Ou*Bu+.5-Bu,Ru.max.y=-Ou*Bu+.5;break;case"right":Ru.min.x=.5,Ru.max.x=.5,Ru.min.z=+Vu*Bu-.5,Ru.max.z=+Vu*Bu-.5+Bu,Ru.min.y=-Ou*Bu+.5-Bu,Ru.max.y=-Ou*Bu+.5;break;case"front":Ru.min.z=-.5,Ru.max.z=-.5,Ru.min.x=+Vu*Bu-.5,Ru.max.x=+Vu*Bu-.5+Bu,Ru.min.y=-Ou*Bu+.5-Bu,Ru.max.y=-Ou*Bu+.5;break;case"back":Ru.min.z=.5,Ru.max.z=.5,Ru.min.x=-Vu*Bu+.5-Bu,Ru.max.x=-Vu*Bu+.5,Ru.min.y=-Ou*Bu+.5-Bu,Ru.max.y=-Ou*Bu+.5}return Ru},$u.prototype.updateTime=function(Tu){},$u.prototype.dispose=function(){var Tu;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(Tu=this.material.luminanceMap)===null||Tu===void 0||Tu.dispose()),this.material.dispose()},$u}(r$n.Mesh),Ha=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.needsRender=!1,Tu.name="tiling",Tu}return t$h.__extends($u,_u),$u}(r$n.Group),qa=function(){function _u($u,Tu){this.disposed=!1,this.textureLoader=new Ii($u),this.level=0,this.panoIndex=0,this.pedding=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=Tu,this.object=new Ha}return _u.prototype.setAllowHosts=function($u){this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.textureLoader.setNetworkSubscribe($u)},_u.prototype.cleanup=function(){for(var $u=0;$u<this.tiles.length;$u++)if(this.tiles[$u]){var Tu=this.tiles[$u],Cu="level-group:"+$u,Pu=this.object.getObjectByName(Cu);for(var Ru in Tu){var Lu=Tu[Ru];Lu.dispose(),Pu.remove(Lu),delete Tu[Ru],this.object.needsRender=!0}}},_u.prototype.setRotation=function($u){if(!this.disposed){var Tu=new r$n.Quaternion().multiplyQuaternions($u,Pa);this.object.quaternion.equals(Tu)||(this.object.quaternion.copy(Tu),this.object.needsRender=!0)}},_u.prototype.setPosition=function($u){this.disposed||this.object.position.equals($u)||(this.object.position.copy($u),this.object.needsRender=!0)},_u.prototype.setResource=function($u){if(!this.disposed&&this.resource!==$u){this.cleanup(),this.resource=$u;for(var Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu].level;this.tiles[Cu]={};var Pu="level-group:"+Cu,Ru=this.object.getObjectByName(Pu);Ru||((Ru=new r$n.Group).name=Pu,Ru.renderOrder=-2),this.object.add(Ru)}this.object.needsRender=!0}},_u.prototype.setLuminance=function($u){this.luminance=$u},_u.prototype.getTileResources=function($u){for(var Tu,Cu=(Tu=this.imageOptions.size)!==null&&Tu!==void 0?Tu:2048,Pu=[],Ru=this.resource.length-1;Ru>=0;Ru--)this.resource[Ru].level<=$u&&512*Math.pow(2,this.resource[Ru].level)>Cu&&Pu.unshift(this.resource[Ru]);return Pu},_u.prototype.update=function($u,Tu,Cu){var Pu=this;if(!this.disposed){this.level=Tu;var Ru=Ra.copy($u);Ru.position.set(0,0,0),Ru.quaternion.premultiply(this.object.quaternion.clone().inverse()),Ru.updateMatrixWorld(!0),Ru.updateProjectionMatrix();for(var Lu=Ru.getWorldDirection(new r$n.Vector3),Bu=ka.setFromProjectionMatrix(Da.multiplyMatrices(Ru.projectionMatrix,Ru.matrixWorldInverse)),Vu=this.getTileResources(Tu),Ou=function(Hu){if(Hu){for(var Uu=[],ju=Hu.level,Wu=Math.pow(2,ju),Qu=Wu*Wu,qu=Du.object.getObjectByName("level-group:"+ju),Yu=0,Ju=Ca;Yu<Ju.length;Yu++)for(var _d=Ju[Yu],tp=0;tp<Qu;tp++){var Ku=_a$1.getBox(ju,_d,tp);Bu.intersectsBox(Ku)&&Uu.push(Ku)}var Xu=new r$n.Vector3;Uu.sort(function(sp,lp){return sp.getCenter(Xu).angleTo(Lu)-lp.getCenter(Xu).angleTo(Lu)});for(var Zu=[],_c=0,Xc=Uu;_c<Xc.length;_c++){var _h=(Ku=Xc[_c]).sideCount,ip=Ku.row,ap=Ku.col,hp=(_d=Ku.type,"tile-level:".concat(ju,"-face:").concat(_d,"-row:").concat(ip,"-col:").concat(ap));if(!Du.tiles[ju][hp]){var Ap=Hu[_d],gp=Hu.size,Rp=gp/_h,Sp=[Rp*ap,Rp*ip,Rp,Rp],Dp=t$h.__assign({key:"pano_tile.".concat(Du.panoIndex,".").concat(_d,".").concat(ju,".").concat(ip,".").concat(ap),basisLoaderInitialized:Ei.isInitialized(),cut:Sp},ii(Du.imageOptions,["format","mappings"]));ju<=1&&(Dp.format==="jpg"||/\.jpg$/.test(Ap))?(Rp!==1024&&(Dp.size=1024),Dp.quality=70):Rp!==512&&(Dp.size=512);var Ep=Du.imageOptions.transform?Du.imageOptions.transform(Ap,Dp):ct$3(Ap,Dp),Bp=Du.textureLoader.load(Ep,{preInit:!0}).then(function(sp){return sp.body}),Ip=null;if(Du.luminance){var ep=Du.luminance[_d],_f=ep.match(/\/cube_(\d+)\//),op=!!_f&&Number(_f[1]);if(op!==!1){var rp=gp/op,up=t$h.__assign(t$h.__assign({},Dp),{size:256,cut:[Sp[0]/rp,Sp[1]/rp,Sp[2]/rp,Sp[3]/rp],key:"pano_tile_luminance.".concat(Du.panoIndex,".").concat(_d,".").concat(ju,".").concat(ip,".").concat(ap)}),cp=Du.imageOptions.transform?Du.imageOptions.transform(ep,up):ct$3(ep,up);Ip=Du.textureLoader.load(cp,{format:r$n.LuminanceFormat,preInit:!0}).then(function(sp){return sp.body}).catch(function(){return null})}}Du.pedding++;var fp=Promise.all([Bp,Ip]).then(function(sp){return Pu.pedding--,sp},function(sp){return Pu.pedding--,Promise.reject(sp)});(mp=Du.tiles[ju][hp]=new _a$1(Ku,fp)).name=hp,mp.renderOrder=ju,qu.add(mp)}Du.tiles[ju][hp].activeTime=Cu,Zu.push(hp)}for(var vp=0,xp=Object.keys(Du.tiles[ju]).sort(function(sp,lp){return Pu.tiles[ju][lp].activeTime-Pu.tiles[ju][sp].activeTime}).slice(Math.max(24,Zu.length));vp<xp.length;vp++){hp=xp[vp];var mp=Du.tiles[ju][hp];qu.remove(mp),mp.dispose(),delete Du.tiles[ju][hp],Du.object.needsRender=!0}}},Du=this,ku=0,Fu=Vu;ku<Fu.length;ku++)Ou(Fu[ku]);for(var Nu=0;Nu<this.tiles.length;Nu++)if(this.tiles[Nu]){var Gu=Vu.length>0&&Nu<=Vu[Vu.length-1].level;for(var zu in this.tiles[Nu])this.tiles[Nu][zu].visible!==Gu&&(this.tiles[Nu][zu].visible=Gu,this.tiles[Nu][zu].needsRender=!0),this.tiles[Nu][zu].updateTime(Cu)}}},_u.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},_u}(),za=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Ka=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),Ua=new r$n.BufferGeometry;Ua.setAttribute("position",new r$n.BufferAttribute(za,3)),Ua.setIndex(new r$n.BufferAttribute(Ka,1));var ja=function(){function _u(){this.material=new r$n.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$n.Uniform(null),matrix:new r$n.Uniform(null),alpha:new r$n.Uniform(null),map:new r$n.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$n.CustomBlending,blendSrc:r$n.SrcAlphaFactor,blendDst:r$n.OneMinusSrcAlphaFactor,blendSrcAlpha:r$n.OneFactor,blendDstAlpha:r$n.OneMinusSrcAlphaFactor}),this.object=new r$n.Mesh(Ua,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new Ro({alpha:0})}return _u.prototype.setMaterial=function($u){$u?(this.material.uniforms.size.value=$u.size,this.material.uniforms.matrix.value=$u.matrix,this.material.uniforms.map.value=$u.map,this.alphaMotion.set({alpha:$u.alpha},500).catch(Qe$1),this.material.uniforms.alpha.value=$u.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Qe$1));var Tu=$u!==null;Tu!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=Tu,this.material.needsUpdate=!0,this.object.visible=$u!==null)},_u.prototype.updateTime=function($u){this.alphaMotion.ended||(this.alphaMotion.update($u),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},_u.prototype.dispose=function(){this.material.dispose()},_u}(),Ga=new r$n.Matrix4().makeRotationAxis(new r$n.Vector3(0,1,0),Math.PI),Wa=new r$n.Vector3(-1,1,1),Xa=function(_u){function $u(Tu){var Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du=this,ku=$u.parseArgs(Tu);(Du=_u.call(this,ku)||this).initAnimationed=!1,Du.currentPanoIndex=ku.initial[0],Du.maxAccessibleDistance=ku.maxAccessibleDistance,Du.panoTapTriggerRadius=ku.panoTapTriggerRadius,Du.panoCircleMeshCreator=ku.panoCircleMeshCreator,Du.tileLevelForFov=ku.tileLevelForFov;var Fu=Du.model.getMaterial()||{},Nu=Fu.pano0,Gu=Fu.pano1;Nu&&(Gu==null?void 0:Gu.map)!==Nu.map&&(Du.model.setMaterial({pano0:Gu}),Nu.map.dispose(),(Cu=Nu.luminanceMap)===null||Cu===void 0||Cu.dispose()),Du.boundingMesh=Du.generateBoundingMesh(),Du.boundingMesh.setMaterial(Du.model.getMaterial()||{}),Du.boundingMesh.visible=!1,Du.scene.add(Du.boundingMesh),Du.panoMeshes=[],Du.updatePanoMeshes(),Du.locationMotion=new Ro({count:0,distance:Du.camera.pose.distance,modelAlpha:(Ru=(Pu=Du.model.getMaterial())===null||Pu===void 0?void 0:Pu.modelAlpha)!==null&&Ru!==void 0?Ru:0,perspToOrtho:(Bu=(Lu=Du.model.getMaterial())===null||Lu===void 0?void 0:Lu.perspToOrtho)!==null&&Bu!==void 0?Bu:0}),Du.panoResources={},Du.panoResources[Du.locationMotion.keyframes[0].key=Du.locationMotion.keyframes[1].key=Kr()]={panoIndex:Du.currentPanoIndex,workCode:Du.work.workCode,panoPicture:(Ou=(Vu=Du.model.getMaterial())===null||Vu===void 0?void 0:Vu.pano1)!==null&&Ou!==void 0?Ou:null,position:Du.camera.pose.offset.clone(),effect:"fly"};var zu={allowHosts:Du.work.allowHosts,requestProxy:Du.requestProxy,networkSubscribe:Du.networkSubscribe};return Du.textureLoader=new Ii(zu),Du.tiling=new qa(zu,Du.imageOptions),Du.scene.add(Du.tiling.object),Du.panoVideo=new ja,Du.scene.add(Du.panoVideo.object),Du}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Ru,Lu,Bu=_u.parseArgs.call(this,Tu);return t$h.__assign(t$h.__assign({},Bu),{maxAccessibleDistance:(Cu=Tu.maxAccessibleDistance)!==null&&Cu!==void 0?Cu:5,panoTapTriggerRadius:(Pu=Tu.panoTapTriggerRadius)!==null&&Pu!==void 0?Pu:.5,panoCircleMeshCreator:(Ru=Tu.panoCircleMeshCreator)!==null&&Ru!==void 0?Ru:function(){return new as},tileLevelForFov:(Lu=Tu.tileLevelForFov)!==null&&Lu!==void 0?Lu:function(Vu,Ou){var Du=2*Math.atan(Math.tan(Vu/180*Math.PI/2)*(Ou.width/Ou.height))/Math.PI*180,ku=Math.max(Ou.width/Du,Ou.height/Vu);return ku>80?4:ku>48?3:ku>24?2:ku>12?1:0}})},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){var Tu,Cu,Pu=this;_u.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gu){Pu.helper.remove(Gu),Gu.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Ru=this.videoTexture.image;Ru.pause(),Ru.oncanplay=function(){},Ru.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Lu=(Tu=this.model.getMaterial())!==null&&Tu!==void 0?Tu:{},Bu=Lu.pano0,Vu=Lu.pano1,Ou=0,Du=Object.keys(this.panoResources);Ou<Du.length;Ou++){var ku=Du[Ou],Fu=this.panoResources[ku];if(Fu.panoPicture){var Nu=Fu.panoPicture.map;Nu&&Nu!==(Bu==null?void 0:Bu.map)&&Nu!==(Vu==null?void 0:Vu.map)&&(Nu.dispose(),(Cu=Fu.panoPicture.luminanceMap)===null||Cu===void 0||Cu.dispose(),Fu.panoPicture=null)}delete this.panoResources[ku]}},$u.prototype.isReady=function(){return this.locationMotion.ended===!0&&_u.prototype.isReady.call(this)},$u.prototype.isTileReady=function(){return this.initAnimationed&&this.tiling.pedding<=0},$u.prototype.updateWork=function(Tu,Cu,Pu,Ru,Lu){var Bu=this;this.userAction=Lu,this.work=Tu,this.currentPanoIndex=Cu,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Vu={},Ou=!0;this.boundingMesh&&(Vu=this.boundingMesh.getMaterial()||{},Ou=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ou,this.boundingMesh.setMaterial(Vu),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Du=0,ku=this.panoMeshes;Du<ku.length;Du++)ku[Du].visible=!1;return this.moveToPano(Cu,{effect:"fade",duration:Ru,longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov,moveEndCallback:function(){Bu.initAnimationed=!0},moveCancelCallback:function(){Bu.initAnimationed=!0}},Lu),!0},$u.prototype.updateModel=function(Tu){this.model=Tu;var Cu={},Pu=!0;this.boundingMesh&&(Cu=this.boundingMesh.getMaterial()||{},Pu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Pu,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Cu),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Ru,Lu,Bu,Vu,Ou,Du,ku=[],Fu=2;Fu<arguments.length;Fu++)ku[Fu-2]=arguments[Fu];if(!this.destroyed){var Nu={},Gu={},zu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Uu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var ju=this.locationMotion.getKeyFrameSegment(Tu),Wu=ju[0],Qu=ju[1],qu=this.panoResourceFromLocationMotionKeyframe(Wu),Yu=this.panoResourceFromLocationMotionKeyframe(Qu),Ju=new r$n.Vector3().copy(qu.position),_d=new r$n.Vector3().copy(Yu.position),tp=this.locationMotion.value.count-Qu.value.count+1;Nu.progress=tp,Nu.modelAlpha=this.locationMotion.value.modelAlpha,Nu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Yu.panoPicture&&(tp<1?qu.panoPicture&&(Nu.pano0=qu.panoPicture):Nu.pano0=Yu.panoPicture,Nu.pano1=Yu.panoPicture),Uu=Nu.useBlackTransition=Yu.effect==="instant"||Yu.effect==="montage",Yu.effect!=="fade"&&Yu.effect!=="montage"||(Nu.pano0&&qu.panoPicture&&(Nu.pano0={map:Nu.pano0.map,luminanceMap:Nu.pano0.luminanceMap,matrix:qu.panoPicture.matrix.clone().setPosition(Yu.position)}),Ju.copy(_d)),Gu.distance=this.locationMotion.value.distance,Gu.offset=new r$n.Vector3(Ju.x+(_d.x-Ju.x)*tp,Ju.y+(_d.y-Ju.y)*tp,Ju.z+(_d.z-Ju.z)*tp);for(var Ku=[],Xu=[],Zu=0,_c=this.locationMotion.keyframes;Zu<_c.length;Zu++){var Xc=_c[Zu],_h=Xc.key,ip=Xc.progress;_h!==void 0&&(Ku.push(_h),ip>=this.locationMotion.progress&&Xu.push(_h))}for(var ap=0,hp=Object.keys(this.panoResources);ap<hp.length;ap++){var Ap=hp[ap];if(!(Xu.indexOf(Ap)>=0)){var gp=this.panoResources[Ap];if(gp.panoPicture){var Rp=gp.panoPicture.map;if(Rp){if(Rp===((Pu=Nu.pano0)===null||Pu===void 0?void 0:Pu.map)||Rp===((Ru=Nu.pano1)===null||Ru===void 0?void 0:Ru.map))continue;Rp.dispose(),(Lu=gp.panoPicture.luminanceMap)===null||Lu===void 0||Lu.dispose(),gp.panoPicture=null}}Ku.indexOf(Ap)>=0||delete this.panoResources[Ap]}}qu.workCode===Yu.workCode?this.currentPanoIndex=tp<.5?qu.panoIndex:Yu.panoIndex:this.currentPanoIndex=Yu.panoIndex,this.emit("movingToPano",Hu.panoIndex,zu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Tu),Gu.longitude=this.cameraMotion.value.longitude,Gu.latitude=this.cameraMotion.value.latitude,Gu.fov=this.cameraMotion.value.fov),ia$1(Nu)===!1&&(this.model.setMaterial(Nu),this.boundingMesh.setMaterial(Nu)),ia$1(Gu)===!1&&this.setCamera(Gu),this.camera.pose.distance>.1)for(var Sp=0;Sp<this.work.observers.length;Sp++)(Ip=this.panoMeshes[Sp])&&(Ip.visible=!1);else{var Dp=this.work.observers[this.currentPanoIndex];if(Dp){var Ep=Dp.visibleNodes.concat(this.currentPanoIndex),Bp=this.getForwardPanoIndexOrNot();for(Sp=0;Sp<this.work.observers.length;Sp++){var Ip,ep=this.work.observers[Sp];if(Ip=this.panoMeshes[Sp])if(ep.loadable||ep.active)if(Ep.indexOf(Sp)!==-1)if(Uu)Ip.visible=!1,Ip.setOpacity(0);else{Ip.visible=!0;var _f=Ip.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Ip.setCurrent(Bp===Sp),Ip.setOpacity(_f<.01?0:ho(1.4/_f,.5,.7)),Ip.updateTime&&Ip.updateTime(Tu,Cu)}else Ip.visible=!1,Ip.setOpacity(0);else Ip.visible=!1,Ip.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Bu=this.boundingMesh.getMaterial())===null||Bu===void 0?void 0:Bu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var op=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var rp=Hu.panoIndex,up=this.work.observers[rp];if(up)if(_s(this.camera.position,up.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Vu=up.images.luminance)!==null&&Vu!==void 0?Vu:null),this.tiling.panoIndex!==rp&&this.tiling.cleanup(),this.tiling.panoIndex=rp,this.tiling.setResource((Du=(Ou=up.images)===null||Ou===void 0?void 0:Ou.tiles)!==null&&Du!==void 0?Du:[]),this.tiling.setRotation(up.quaternion),this.tiling.setPosition(up.position);var cp=this.renderer.getDrawingBufferSize(new r$n.Vector2);cp.width*=this.scissor.width,cp.height*=this.scissor.height;var fp=this.imageOptions.size;if(fp===void 0&&up){var vp=up.images.up.match(/\/cube_(\d+)\//);vp&&(fp=Number(vp[1]))}fp===void 0&&(fp=2048);var xp=0;fp>=1024&&(xp=1),fp>=2048&&(xp=2),fp>=4096&&(xp=3),fp>=8192&&(xp=4);var mp=this.tileLevelForFov(this.camera.fov,cp),sp=mp>xp?mp:0;this.tiling.update(this.camera,sp,Tu)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;op!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(Tu)}},$u.prototype.render=function(){var Tu=this.work.observers[this.currentPanoIndex];Tu&&Tu.video&&(this.needsRender=!0),_u.prototype.render.call(this)},$u.prototype.postProcessing=function(Tu,Cu){if(!this.destroyed)return this.effect||(this.effect=new Sa(this.renderer)),this.effect.render(Tu,Cu)},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$3())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$3())[1],Pu=this.panoResourceFromLocationMotionKeyframe(Cu),Ru=this.work.observers[Pu.panoIndex];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:Ru?Ru.position.clone():this.camera.position.clone(),distance:this.locationMotion.value.distance}},$u.prototype.moveToPano=function(Tu,Cu,Pu){var Ru,Lu,Bu,Vu=this,Ou=this.work.observers[Tu],Du=t$h.__assign({key:"pano.".concat(Tu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),ku=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct$3,Fu={right:ku(Ou.images.right,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".right")})),left:ku(Ou.images.left,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".left")})),up:ku(Ou.images.up,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".up")})),down:ku(Ou.images.down,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".down")})),front:ku(Ou.images.front,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".front")})),back:ku(Ou.images.back,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".back")}))},Nu={key:"pano_luminance.".concat(Tu),basisLoaderInitialized:Ei.isInitialized(),size:Du.size?Du.size/2:1024},Gu=this.enableIOSEDR&&Ou.images.luminance?{right:ku(Ou.images.luminance.right,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".right")})),left:ku(Ou.images.luminance.left,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".left")})),up:ku(Ou.images.luminance.up,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".up")})),down:ku(Ou.images.luminance.down,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".down")})),front:ku(Ou.images.luminance.front,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".front")})),back:ku(Ou.images.luminance.back,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".back")}))}:null,zu="pano:"+va(Fu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===zu)return;var Hu=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[Hu])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",Hu,Ou),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Uu,ju=this.model.getMaterial()||{},Wu=ju.pano0,Qu=ju.pano1;if(Wu&&Wu.map.name===zu&&Wu.luminanceMap!==null===this.enableIOSEDR?Uu=Wu:(Qu==null?void 0:Qu.map.name)===zu&&Qu.luminanceMap!==null===this.enableIOSEDR&&(Uu=Qu),Uu){var qu={panoIndex:Tu,workCode:this.work.workCode,effect:(Bu=Cu.effect)!==null&&Bu!==void 0?Bu:"fly",panoPicture:{map:Uu.map,luminanceMap:Uu.luminanceMap,matrix:new r$n.Matrix4().compose(Ou.position,Ou.quaternion,Wa)},position:Ou.position.clone()};at$4.shared.add(function(){Vu.pending=!1,Vu.emit("panoLoaded",Tu),Vu.doMoveToPano(Tu,qu,Cu,Pu)},!0,1)}else{this.pendingTextureTask={panoIndex:Tu,hash:zu,onLoad:function(Ju,_d){var tp,Ku;if(Vu.pending=!1,Vu.destroyed)Ju.body.dispose();else{Ju.body.name=zu,Vu.emit("panoLoaded",Tu);var Xu={panoIndex:Tu,workCode:Vu.work.workCode,effect:(tp=Cu.effect)!==null&&tp!==void 0?tp:"fly",panoPicture:{map:Ju.body,luminanceMap:(Ku=_d==null?void 0:_d.body)!==null&&Ku!==void 0?Ku:null,matrix:new r$n.Matrix4().compose(Ou.position,Ou.quaternion,Wa)},position:Ou.position.clone()};Vu.doMoveToPano(Tu,Xu,Cu,Pu)}},onError:function(Ju){Vu.pending=!1,Cu.moveCancelCallback&&Cu.moveCancelCallback(),Vu.emit("panoLoadError",Ju,Tu),Vu.emit("moveToPanoCanceled",Tu)}};var Yu=this.panoMeshes[Tu];Yu&&Yu.tap&&Yu.tap(),Promise.all([this.textureLoader.loadCube(Fu,{format:r$n.RGBFormat,viaAjax:!0},void 0,void 0,function(Ju){var _d,tp;Vu.emit("textureLoading",Ju,Tu,Ou),((_d=Vu.pendingTextureTask)===null||_d===void 0?void 0:_d.hash)===zu&&((tp=Vu.panoMeshes[Tu])===null||tp===void 0||tp.setProgress(Ju))},this.renderer),Gu?this.textureLoader.loadCube(Gu,{format:r$n.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Ju){var _d,tp,Ku=Ju[0],Xu=Ju[1];((_d=Vu.pendingTextureTask)===null||_d===void 0?void 0:_d.hash)===zu?(Vu.pendingTextureTask.onLoad(Ku,Xu),(tp=Vu.panoMeshes[Tu])===null||tp===void 0||tp.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureLoaded",Tu,Ou,Ku.meta)):(Ku.body.dispose(),Xu==null||Xu.body.dispose())}).catch(function(Ju){var _d,tp;((_d=Vu.pendingTextureTask)===null||_d===void 0?void 0:_d.hash)===zu&&(Vu.pendingTextureTask.onError(Ju),(tp=Vu.panoMeshes[Tu])===null||tp===void 0||tp.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureError",Ju,Tu,Ou),Vu.emit("error",Ju))}),this.emit("textureStartLoad",Tu,Ou)}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou=this;if(!this.destroyed){var Du=!1;this.pending=!1,this.userAction=Ru,this.moveToPano(Tu,{longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Bu=Cu.latitude)!==null&&Bu!==void 0?Bu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Vu=Cu.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),duration:Pu,moveStartCallback:function(ku,Fu){Du=!0,Ou.emit("initAnimationWillStart",ku,Fu,Ou.userAction)},moveEndCallback:function(ku,Fu){Ou.emit("initAnimationEnded",ku,Fu,Ou.userAction),Ou.initAnimationed=!0},moveCancelCallback:function(){var ku={longitude:Ou.camera.pose.longitude,latitude:Ou.camera.pose.latitude,fov:Ou.camera.pose.fov,offset:Ou.camera.pose.offset.clone(),distance:Ou.camera.pose.distance};Du===!1&&Ou.emit("initAnimationWillStart",Ou.currentPanoIndex,ku,Ou.userAction),Ou.emit("initAnimationEnded",Ou.currentPanoIndex,ku,Ou.userAction),Ou.initAnimationed=!0}},Ru)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Tu){return this.panoResources[Tu.key]},$u.prototype.locationMotionKeyframesLength=function(Tu){for(var Cu=0,Pu=1;Pu<Tu.length;Pu++){var Ru=this.panoResourceFromLocationMotionKeyframe(Tu[Pu-1]).position,Lu=this.panoResourceFromLocationMotionKeyframe(Tu[Pu]).position;Cu+=Ru.distanceTo(Lu)*(Tu[Pu].value.count-Tu[Pu-1].value.count)}return Cu},$u.prototype.updatePanoMeshes=function(Tu){Tu===void 0&&(Tu=!0);for(var Cu={},Pu=0,Ru=this.panoMeshes;Pu<Ru.length;Pu++)Cu[(Ou=Ru[Pu]).name]=Ou;this.panoMeshes.length=0;for(var Lu=0;Lu<this.work.observers.length;Lu++){var Bu="panoCircle_".concat(this.work.workCode,"_").concat(Lu),Vu=this.work.observers[Lu],Ou=void 0;if(Cu[Bu]?((Ou=Cu[Bu]).loading===!0&&Vu.loadable===!1&&Ou.setLoading(!1),delete Cu[Bu]):((Ou=this.panoCircleMeshCreator()).name=Bu,this.helper.add(Ou)),Ou.position.copy(Vu.standingPosition),Tu&&this.model.loaded&&this.model.bvhs.loaded){var Du=new r$n.Vector3(0,-1,0),ku=new r$n.Vector3(0,.1,0).add(Ou.position),Fu=new r$n.Raycaster(ku,Du,0,.2),Nu=this.model.intersectRaycaster(Fu)[0];Nu&&Nu.point.distanceTo(ku)<.1&&Ou.position.copy(Nu.point)}this.panoMeshes[Lu]=Ou}for(var Gu=0,zu=Object.keys(Cu);Gu<zu.length;Gu++){var Hu=zu[Gu];this.helper.remove(Cu[Hu]),Cu[Hu].dispose(),delete Cu[Hu]}},$u.prototype.generateBoundingMesh=function(Tu){Tu===void 0&&(Tu=!1);for(var Cu=this.model.bounding.clone(),Pu=0,Ru=this.work.observers;Pu<Ru.length;Pu++){var Lu=Ru[Pu];Cu.expandByPoint(Lu.standingPosition),Cu.expandByPoint(new r$n.Vector3().fromArray([Lu.position.x,2*Lu.position.y-Lu.standingPosition.y,Lu.position.z]))}Tu&&Cu.expandByPoint(this.camera.position);var Bu=Ks(Cu,new r$n.Vector3(1,0,1));return Bu.name="panorama_bounding",Bu},$u.prototype.doMoveToPano=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou=this;Pu===void 0&&(Pu={}),this.userAction=Ru;var Du=_e$3(),ku=Kr();this.tiling.cleanup(),this.panoResources[ku]=Cu;var Fu,Nu,Gu;if(this.locationMotion.ended){var zu=this.locationMotion.getKeyFrameSegment(Du);zu[0];var Hu=zu[1],Uu=this.locationMotion.value,ju=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position;Fu=Math.max(ju.distanceTo(Wu),1),Nu=[{key:Hu.key,progress:0,value:t$h.__assign(t$h.__assign({},Uu),{count:0})},{key:ku,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gu=0}else{var Qu=this.locationMotion.getKeyFrameSegment(Du),qu=Qu[0],Yu=(Hu=Qu[1],Uu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(qu).position),Ju=(ju=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position,Hu.value.count-Uu.count),_d=Math.max(Yu.distanceTo(ju),1)*Ju;Fu=_d+Math.max(ju.distanceTo(Wu),1),Nu=[{key:qu.key,progress:0,value:t$h.__assign({},Uu)},{key:Hu.key,progress:_d/Fu,value:Hu.value},{key:ku,progress:1,value:{count:Hu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var tp=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ku=this.locationMotionKeyframesLength(Nu);Gu=tp===0||tp===0?0:this.locationMotion.getProgressVelocity(Du)*tp/Ku}var Xu=this.calculateMovingDuration(Pu.duration,Pu.effect==="fade"||Pu.effect==="montage"?0:Fu),Zu={longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},_c={longitude:(Lu=Zu.longitude)!==null&&Lu!==void 0?Lu:this.camera.pose.longitude,latitude:(Bu=Zu.latitude)!==null&&Bu!==void 0?Bu:this.camera.pose.latitude,fov:(Vu=Zu.fov)!==null&&Vu!==void 0?Vu:this.camera.pose.fov,offset:Cu.position.clone(),distance:this.camera.pose.distance};Pu.moveStartCallback&&Pu.moveStartCallback(Tu,_c),this.emit("panoWillArrive",Tu,_c,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Zu,Xu).catch(Qe$1),this.locationMotion.setKeyframes(Nu,Xu,Gu).then(function(){var Xc,_h,ip,ap={longitude:Ou.camera.pose.longitude,latitude:Ou.camera.pose.latitude,fov:Ou.camera.pose.fov,offset:Ou.camera.pose.offset.clone(),distance:Ou.camera.pose.distance};Pu.moveEndCallback&&Pu.moveEndCallback(Tu,ap),Ou.emit("panoArrived",Tu,ap,Ru);var hp=Ou.work.observers[Ou.currentPanoIndex];if(hp&&hp.video&&Ou.videoTexture&&Ou.videoTexture.image instanceof HTMLVideoElement){var Ap=Ga.clone().multiply((ip=(_h=(Xc=Ou.model.getMaterial())===null||Xc===void 0?void 0:Xc.pano1)===null||_h===void 0?void 0:_h.matrix)!==null&&ip!==void 0?ip:new r$n.Matrix4).multiply(hp.video.matrix),gp={map:Ou.videoTexture,size:hp.video.size,matrix:Ap,alpha:1},Rp=Kr(),Sp=Ou.videoTexture.image;Sp.setAttribute("uuid",Rp),xa().then(function(Dp){Dp&&hp.video&&Sp.getAttribute("uuid")===Rp&&(Sp.oncanplay=function(){Sp.oncanplay=Qe$1,Sp.play()},Sp.ontimeupdate=function(){Sp.currentTime>.5&&(Sp.ontimeupdate=Qe$1,Ou.panoVideo.setMaterial(gp))},Sp.src=hp.video.source)}).catch(function(){Sp.removeAttribute("uuid")})}},function(){Pu.moveCancelCallback&&Pu.moveCancelCallback(),Ou.emit("moveToPanoCanceled",Tu)})},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this,Pu=this.work.observers[this.currentPanoIndex];if(!Pu)return null;var Ru=Tu!=null?Tu:new r$n.Raycaster(this.camera.position.clone(),this.camera.getWorldDirection(new r$n.Vector3)),Lu=Ru.ray.origin.clone(),Bu=new r$n.Vector3,Vu=this.model.intersectRaycaster(new r$n.Raycaster(Ru.ray.origin,new r$n.Vector3(0,-1,0)))[0];Vu&&Vu.distance<=2?Bu.copy(Vu.point):Bu.copy(Ru.ray.origin).add(new r$n.Vector3(0,-1.5,0));var Ou=this.model.intersectRaycaster(Ru)[0],Du=(Ou?Ou.point:Ru.ray.origin.clone().add(Ru.ray.direction.clone().normalize().multiplyScalar(3))).clone().sub(Bu).normalize();if(Du.length()===0)return null;for(var ku=Pu.accessibleNodes.filter(function(Wu){if(Wu===Cu.currentPanoIndex)return!1;var Qu=Cu.work.observers[Wu],qu=Qu.standingPosition.clone().sub(Lu);return qu.length()!==0&&!(qu.angleTo(new r$n.Vector3(0,-1,0))<Math.PI/12)&&(Qu.loadable||Qu.active)}).slice().sort(function(Wu,Qu){return Cu.work.observers[Wu].standingPosition.clone().distanceTo(Bu)-Cu.work.observers[Qu].standingPosition.clone().distanceTo(Bu)}),Fu=0,Nu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Fu<Nu.length;Fu++)for(var Gu=Nu[Fu],zu=0,Hu=ku;zu<Hu.length;zu++){var Uu=Hu[zu],ju=this.work.observers[Uu].standingPosition.clone().sub(Bu);if(ju.length()!==0&&Du.angleTo(ju)<Gu)return Uu}return null},$u.prototype.onTapGesture=function(Tu){var Cu=this,Pu=Tu.pointers.map(function(Zu){return ii(Zu,["x","y"])});if(!this.emit("wantsGesture","tap",Pu,!0)){var Ru=this.relativeClientPosition(Tu.center),Lu=new r$n.Raycaster;if(Lu.setFromCamera(Ru,this.camera),!this.emit("wantsTapGesture",Lu,Ru,!0)){this.emit("gesture","tap",Pu,!0),this.emit("tapGesture",Lu,Ru,!0),this.interiaMovement=!1;var Bu=this.camera.getWorldDirection(new r$n.Vector3).setY(0),Vu=null,Ou=this.work.observers[this.currentPanoIndex];if(Ou){var Du=Ou.accessibleNodes.filter(function(Zu){if(Zu===Cu.currentPanoIndex)return!1;var _c=Cu.work.observers[Zu];return!(_c.position.distanceTo(Cu.camera.position)>Cu.maxAccessibleDistance)&&(_c.loadable||_c.active)}),ku=this.model.intersectRaycaster(Lu)[0];if(ku){var Fu=ta(Du,function(Zu){var _c=Cu.work.observers[Zu].standingPosition.clone();return _c.clone().sub(Cu.camera.position).setY(0).angleTo(Bu)>Math.PI/2?1/0:_c.distanceTo(ku.point)},!0),Nu=Fu[0];Fu[1]<this.panoTapTriggerRadius&&(Vu=Nu)}oo(Vu)&&(Vu=this.getForwardPanoIndexOrNot(Lu));for(var Gu=0,zu=this.locationMotion.keyframes;Gu<zu.length;Gu++){var Hu=zu[Gu],Uu=this.panoResourceFromLocationMotionKeyframe(Hu);if(!(Hu.progress<this.locationMotion.progress)&&Uu.panoIndex===Vu){Vu=null;break}}if(this.emit("panoSelected",Vu),oo(Vu))this.locationMotion.ended===!0&&this.cameraBounce();else{var ju=this.work.observers[Vu];if(ju.active){for(var Wu={},Qu=Math.PI/6,qu=Math.PI/12,Yu=ju.position.clone().setY(0).sub(Ou.position.clone().setY(0)).normalize(),Ju=[],_d=0,tp=ju.accessibleNodes;_d<tp.length;_d++)if((Nu=tp[_d])!==this.currentPanoIndex&&Nu!==Vu){var Ku=this.work.observers[Nu].position.clone().sub(ju.position).setY(0);Yu.angleTo(Ku)<Qu&&Ju.push(Ku)}var Xu=(Ju.length>0?Ju:t$h.__spreadArray(t$h.__spreadArray([],[],!0),[],!0)).slice().sort(function(Zu,_c){return Zu.angleTo(Yu)-_c.angleTo(Yu)})[0];Xu&&Xu.angleTo(Bu)>qu&&(Wu.longitude=Math.atan2(-Xu.x,-Xu.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Wu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Wu.fov=this.defaultFov),this.emit("wantsMoveToPano",Vu,Wu,!0)}else this.panoMeshes[Vu]&&(this.panoMeshes[Vu].setDisabled(!1),this.panoMeshes[Vu].setLoading(!0))}}}}},$u}(ba$1),Ya=Math.PI/180,Za=180/Math.PI,Ja=function(){var _u=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return _u}}(),$a=function(){var _u=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return _u}}(),el=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return _u}}(),tl=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,$u=_u?parseInt(_u[1],10):null;return function(){return $u}}(),il=function(){var _u=!1;if(tl()===65){var $u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if($u){var Tu=$u[1].split(".");Tu[0],Tu[1];var Cu=Tu[2],Pu=Tu[3];_u=parseInt(Cu,10)===3325&&parseInt(Pu,10)<148}}return function(){return _u}}(),nl=function(){var _u=Ja()&&$a()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return _u}}(),rl=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return _u}}();function ol(){var _u=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return rl()?!_u:_u}var sl,al=(sl={},function(_u,$u){sl[_u]===void 0&&(console.warn("cardboard: "+$u),sl[_u]=!0)});function ll(_u){var $u,Tu=_u.indexOf("://");$u=Tu!==-1?Tu+3:0;var Cu=_u.indexOf("/",$u);return Cu===-1&&(Cu=_u.length),_u.substring(0,Cu)}var ul,hl=function(_u,$u,Tu){(function(Cu,Pu,Ru){var Lu=Pu?Pu[0]:0,Bu=Pu?Pu[1]:0,Vu=Pu?Pu[2]:0,Ou=Pu?Pu[3]:1,Du=Lu+Lu,ku=Bu+Bu,Fu=Vu+Vu,Nu=Lu*Du,Gu=Lu*ku,zu=Lu*Fu,Hu=Bu*ku,Uu=Bu*Fu,ju=Vu*Fu,Wu=Ou*Du,Qu=Ou*ku,qu=Ou*Fu;Cu[0]=1-(Hu+ju),Cu[1]=Gu+qu,Cu[2]=zu-Qu,Cu[3]=0,Cu[4]=Gu-qu,Cu[5]=1-(Nu+ju),Cu[6]=Uu+Wu,Cu[7]=0,Cu[8]=zu+Qu,Cu[9]=Uu-Wu,Cu[10]=1-(Nu+Hu),Cu[11]=0,Cu[12]=Ru?Ru[0]:0,Cu[13]=Ru?Ru[1]:0,Cu[14]=Ru?Ru[2]:0,Cu[15]=1})(_u,$u),Tu&&function(Cu,Pu,Ru){var Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Uu,ju=Ru[0],Wu=Ru[1],Qu=Ru[2];Pu===Cu?(Cu[12]=Pu[0]*ju+Pu[4]*Wu+Pu[8]*Qu+Pu[12],Cu[13]=Pu[1]*ju+Pu[5]*Wu+Pu[9]*Qu+Pu[13],Cu[14]=Pu[2]*ju+Pu[6]*Wu+Pu[10]*Qu+Pu[14],Cu[15]=Pu[3]*ju+Pu[7]*Wu+Pu[11]*Qu+Pu[15]):(Lu=Pu[0],Bu=Pu[1],Vu=Pu[2],Ou=Pu[3],Du=Pu[4],ku=Pu[5],Fu=Pu[6],Nu=Pu[7],Gu=Pu[8],zu=Pu[9],Hu=Pu[10],Uu=Pu[11],Cu[0]=Lu,Cu[1]=Bu,Cu[2]=Vu,Cu[3]=Ou,Cu[4]=Du,Cu[5]=ku,Cu[6]=Fu,Cu[7]=Nu,Cu[8]=Gu,Cu[9]=zu,Cu[10]=Hu,Cu[11]=Uu,Cu[12]=Lu*ju+Du*Wu+Gu*Qu+Pu[12],Cu[13]=Bu*ju+ku*Wu+zu*Qu+Pu[13],Cu[14]=Vu*ju+Fu*Wu+Hu*Qu+Pu[14],Cu[15]=Ou*ju+Nu*Wu+Uu*Qu+Pu[15])}(_u,_u,Tu),function(Cu,Pu){var Ru=Pu[0],Lu=Pu[1],Bu=Pu[2],Vu=Pu[3],Ou=Pu[4],Du=Pu[5],ku=Pu[6],Fu=Pu[7],Nu=Pu[8],Gu=Pu[9],zu=Pu[10],Hu=Pu[11],Uu=Pu[12],ju=Pu[13],Wu=Pu[14],Qu=Pu[15],qu=Ru*Du-Lu*Ou,Yu=Ru*ku-Bu*Ou,Ju=Ru*Fu-Vu*Ou,_d=Lu*ku-Bu*Du,tp=Lu*Fu-Vu*Du,Ku=Bu*Fu-Vu*ku,Xu=Nu*ju-Gu*Uu,Zu=Nu*Wu-zu*Uu,_c=Nu*Qu-Hu*Uu,Xc=Gu*Wu-zu*ju,_h=Gu*Qu-Hu*ju,ip=zu*Qu-Hu*Wu,ap=qu*ip-Yu*_h+Ju*Xc+_d*_c-tp*Zu+Ku*Xu;ap&&(ap=1/ap,Cu[0]=(Du*ip-ku*_h+Fu*Xc)*ap,Cu[1]=(Bu*_h-Lu*ip-Vu*Xc)*ap,Cu[2]=(ju*Ku-Wu*tp+Qu*_d)*ap,Cu[3]=(zu*tp-Gu*Ku-Hu*_d)*ap,Cu[4]=(ku*_c-Ou*ip-Fu*Zu)*ap,Cu[5]=(Ru*ip-Bu*_c+Vu*Zu)*ap,Cu[6]=(Wu*Ju-Uu*Ku-Qu*Yu)*ap,Cu[7]=(Nu*Ku-zu*Ju+Hu*Yu)*ap,Cu[8]=(Ou*_h-Du*_c+Fu*Xu)*ap,Cu[9]=(Lu*_c-Ru*_h-Vu*Xu)*ap,Cu[10]=(Uu*tp-ju*Ju+Qu*qu)*ap,Cu[11]=(Gu*Ju-Nu*tp-Hu*qu)*ap,Cu[12]=(Du*Zu-Ou*Xc-ku*Xu)*ap,Cu[13]=(Ru*Xc-Lu*Zu+Bu*Xu)*ap,Cu[14]=(ju*Yu-Uu*_d-Wu*qu)*ap,Cu[15]=(Nu*_d-Gu*Yu+zu*qu)*ap)}(_u,_u)},cl=function(){function _u($u,Tu){$u===void 0&&($u=new r$n.Vector3),Tu===void 0&&(Tu=0),this.sample=$u,this.timestampS=Tu}return _u.prototype.set=function($u,Tu){this.sample=$u,this.timestampS=Tu},_u.prototype.copy=function($u){this.set($u.sample,$u.timestampS)},_u}(),dl=function(){function _u($u,Tu){this.kFilter=$u,this.isDebug=Tu,this.currentAccelMeasurement=new cl,this.currentGyroMeasurement=new cl,this.previousGyroMeasurement=new cl,Ja()?this.filterQ=new r$n.Quaternion(-1,0,0,1):this.filterQ=new r$n.Quaternion(1,0,0,1),this.previousFilterQ=new r$n.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$n.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$n.Vector3,this.measuredGravity=new r$n.Vector3,this.gyroIntegralQ=new r$n.Quaternion}return _u.prototype.addAccelMeasurement=function($u,Tu){this.currentAccelMeasurement.set($u,Tu)},_u.prototype.addGyroMeasurement=function($u,Tu){this.currentGyroMeasurement.set($u,Tu);var Cu,Pu=Tu-this.previousGyroMeasurement.timestampS;Cu=Pu,isNaN(Cu)||Cu<=.001||Cu>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},_u.prototype.getOrientation=function(){return this.filterQ},_u.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var $u=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,Tu=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,$u);this.gyroIntegralQ.multiply(Tu),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(Tu);var Cu=new r$n.Quaternion;Cu.copy(this.filterQ),Cu.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Cu),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Pu,Ru=new r$n.Quaternion;Ru.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Ru.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Za*((Pu=Ru).w>1?0:2*Math.acos(Pu.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Lu=new r$n.Quaternion;Lu.copy(this.filterQ),Lu.multiply(Ru),this.filterQ.slerp(Lu,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},_u.prototype.accelToQuaternion_=function($u){var Tu=new r$n.Vector3;Tu.copy($u),Tu.normalize();var Cu=new r$n.Quaternion;return Cu.setFromUnitVectors(new r$n.Vector3(0,0,-1),Tu),Cu.inverse(),Cu},_u.prototype.gyroToQuaternionDelta_=function($u,Tu){var Cu=new r$n.Quaternion,Pu=new r$n.Vector3;return Pu.copy($u),Pu.normalize(),Cu.setFromAxisAngle(Pu,$u.length()*Tu),Cu},_u}(),pl=function(){function _u($u,Tu){this.predictionTimeS=$u,this.isDebug=Tu,this.previousQ=new r$n.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$n.Quaternion,this.outQ=new r$n.Quaternion}return _u.prototype.getPrediction=function($u,Tu,Cu){if(!this.previousTimestampS)return this.previousQ.copy($u),this.previousTimestampS=Cu,$u;var Pu=new r$n.Vector3;Pu.copy(Tu),Pu.normalize();var Ru=Tu.length();if(Ru<20*Ya)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Za*Ru).toFixed(1)),this.outQ.copy($u),this.previousQ.copy($u),this.outQ;var Lu=Ru*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Pu,Lu),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy($u),this.previousTimestampS=Cu,this.outQ},_u}(),fl=function(){function _u($u){this.coefficients=$u}return _u.prototype.distortInverse=function($u){for(var Tu=0,Cu=1,Pu=$u-this.distort(Tu);Math.abs(Cu-Tu)>1e-4;){var Ru=$u-this.distort(Cu),Lu=Cu-Ru*((Cu-Tu)/(Ru-Pu));Tu=Cu,Cu=Lu,Pu=Ru}return Cu},_u.prototype.distort=function($u){for(var Tu=$u*$u,Cu=0,Pu=0;Pu<this.coefficients.length;Pu++)Cu=Tu*(Cu+this.coefficients[Pu]);return(Cu+1)*$u},_u}(),Al=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},gl=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},ml=function(){function _u($u,Tu,Cu,Pu){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Cu,this.accelerometer=new r$n.Vector3,this.gyroscope=new r$n.Vector3,this.filter=new dl($u,Pu),this.posePredictor=new pl(Tu,Pu),this.isFirefoxAndroid=el(),this.isIOS=Ja();var Ru=tl();this.isDeviceMotionInRadians=!this.isIOS&&Ru!==null&&Ru<66,this.isWithoutDeviceMotion=il()||nl(),this.filterToWorldQ=new r$n.Quaternion,Ja()?this.filterToWorldQ.setFromAxisAngle(new r$n.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$n.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$n.Quaternion,this.worldToScreenQ=new r$n.Quaternion,this.originalPoseAdjustQ=new r$n.Quaternion;var Lu=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$n.Vector3(0,0,1),Lu),this.setScreenTransform_(),ol()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$n.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return _u.prototype.getPosition=function(){return null},_u.prototype.getOrientation=function(){var $u;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Lu=new r$n.Quaternion().setFromAxisAngle(new r$n.Vector3(0,0,-1),0),Bu=new r$n.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Bu.setFromAxisAngle(new r$n.Vector3(0,1,0),Math.PI/-2):Bu.setFromAxisAngle(new r$n.Vector3(0,1,0),Math.PI/2),Lu.multiply(Bu)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Cu=new r$n.Quaternion).setFromAxisAngle(new r$n.Vector3(1,0,0),-Math.PI/2),Cu),$u=this._deviceOrientationQ;var Tu=new r$n.Quaternion;return Tu.copy($u),Tu.multiply(this.deviceOrientationFilterToWorldQ),Tu.multiply(this.resetQ),Tu.multiply(this.worldToScreenQ),Tu.multiplyQuaternions(this.deviceOrientationFixQ,Tu),this.yawOnly&&(Tu.x=0,Tu.z=0,Tu.normalize()),this.orientationOut_[0]=Tu.x,this.orientationOut_[1]=Tu.y,this.orientationOut_[2]=Tu.z,this.orientationOut_[3]=Tu.w,this.orientationOut_}var Cu,Pu=this.filter.getOrientation();$u=this.posePredictor.getPrediction(Pu,this.gyroscope,this.previousTimestampS);var Ru=new r$n.Quaternion;return Ru.copy(this.filterToWorldQ),Ru.multiply(this.resetQ),Ru.multiply($u),Ru.multiply(this.worldToScreenQ),this.yawOnly&&(Ru.x=0,Ru.z=0,Ru.normalize()),this.orientationOut_[0]=Ru.x,this.orientationOut_[1]=Ru.y,this.orientationOut_[2]=Ru.z,this.orientationOut_[3]=Ru.w,this.orientationOut_},_u.prototype.getPose=function(){var $u=new Al;return $u.orientation=this.getOrientation(),$u},_u.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ol()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},_u.prototype.getFrameData=function($u){var Tu=this.getOrientation(),Cu=this.getEyeOffset(),Pu=this.getEyeProjectionMatrix();return $u.pose.angularAcceleration=null,$u.pose.angularVelocity=null,$u.pose.linearAcceleration=null,$u.pose.linearVelocity=null,$u.pose.orientation=Tu,$u.pose.position=null,$u.timestamp=this.previousTimestampS,$u.leftProjectionMatrix.set(Pu.left),$u.rightProjectionMatrix.set(Pu.right),hl($u.leftViewMatrix,Tu,Cu.left),hl($u.rightViewMatrix,Tu,Cu.right),$u},_u.prototype.start=function(){if(typeof window=="undefined")return function(){};var $u=this.onDeviceMotion_.bind(this),Tu=this.onOrientationChange_.bind(this),Cu=this.onMessage_.bind(this),Pu=this.onDeviceOrientation_.bind(this);return Ja()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Ru=window.self!==window.top,Lu=ll(document.referrer),Bu=ll(window.location.href);return Ru&&Lu!==Bu}()&&window.addEventListener("message",Cu),window.addEventListener("orientationchange",Tu),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Pu):window.addEventListener("devicemotion",$u),function(){window.removeEventListener("devicemotion",$u),window.removeEventListener("deviceorientation",Tu),window.removeEventListener("orientationchange",Tu),window.removeEventListener("message",Cu)}},_u.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},_u.prototype.getEyeProjectionMatrix=function(){var $u=this.getEyeFieldOfView(),Tu=this.depthNear,Cu=this.depthFar,Pu={left:[],right:[]},Ru=$u.left.upDegrees*Ya,Lu=$u.left.downDegrees*Ya,Bu=2/((Ou=$u.left.leftDegrees*Ya)+(Du=$u.left.rightDegrees*Ya)),Vu=2/(Ru+Lu);Pu.left[0]=Bu,Pu.left[1]=0,Pu.left[2]=0,Pu.left[3]=0,Pu.left[4]=0,Pu.left[5]=Vu,Pu.left[6]=0,Pu.left[7]=0,Pu.left[8]=-(Ou-Du)*Bu*.5,Pu.left[9]=(Ru-Lu)*Vu*.5,Pu.left[10]=Cu/(Tu-Cu),Pu.left[11]=-1,Pu.left[12]=0,Pu.left[13]=0,Pu.left[14]=Cu*Tu/(Tu-Cu),Pu.left[15]=0;var Ou,Du;return Ru=$u.right.upDegrees*Ya,Lu=$u.right.downDegrees*Ya,Bu=2/((Ou=$u.right.leftDegrees*Ya)+(Du=$u.right.rightDegrees*Ya)),Vu=2/(Ru+Lu),Pu.right[0]=Bu,Pu.right[1]=0,Pu.right[2]=0,Pu.right[3]=0,Pu.right[4]=0,Pu.right[5]=Vu,Pu.right[6]=0,Pu.right[7]=0,Pu.right[8]=-(Ou-Du)*Bu*.5,Pu.right[9]=(Ru-Lu)*Vu*.5,Pu.right[10]=Cu/(Tu-Cu),Pu.right[11]=-1,Pu.right[12]=0,Pu.right[13]=0,Pu.right[14]=Cu*Tu/(Tu-Cu),Pu.right[15]=0,Pu},_u.prototype.getEyeFieldOfView=function(){var $u=this.viewer,Tu=this.device,Cu=new fl($u.distortionCoefficients),Pu=$u.screenLensDistance,Ru=(Tu.widthMeters-$u.interLensDistance)/2,Lu=$u.interLensDistance/2,Bu=$u.baselineLensDistance-Tu.bevelMeters,Vu=Tu.heightMeters-Bu,Ou=Za*Math.atan(Cu.distort(Ru/Pu)),Du=Za*Math.atan(Cu.distort(Lu/Pu)),ku=Za*Math.atan(Cu.distort(Bu/Pu)),Fu=Za*Math.atan(Cu.distort(Vu/Pu)),Nu=new gl,Gu=new gl;return Nu.leftDegrees=Math.min(Ou,$u.fov),Nu.rightDegrees=Math.min(Du,$u.fov),Nu.downDegrees=Math.min(ku,$u.fov),Nu.upDegrees=Math.min(Fu,$u.fov),Gu.leftDegrees=Nu.rightDegrees,Gu.rightDegrees=Nu.leftDegrees,Gu.upDegrees=Nu.upDegrees,Gu.downDegrees=Nu.downDegrees,{left:Nu,right:Gu}},_u.prototype.onDeviceOrientation_=function($u){this._deviceOrientationQ=this._deviceOrientationQ||new r$n.Quaternion;var Tu=$u.alpha,Cu=$u.beta,Pu=$u.gamma;Tu=(Tu||0)*Math.PI/180,Cu=(Cu||0)*Math.PI/180,Pu=(Pu||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$n.Euler(Tu,Cu,-Pu,"YXZ"))},_u.prototype.onDeviceMotion_=function($u){this.updateDeviceMotion_($u)},_u.prototype.updateDeviceMotion_=function($u){var Tu=$u.accelerationIncludingGravity,Cu=$u.rotationRate,Pu=$u.timeStamp/1e3,Ru=Pu-this.previousTimestampS;return Ru<0?(al("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Pu)):Ru<=.001||Ru>1?(al("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Pu)):(Tu&&(this.accelerometer.set(-Tu.x,-Tu.y,-Tu.z),Cu&&(rl()?this.gyroscope.set(-Cu.beta,Cu.alpha,Cu.gamma):this.gyroscope.set(Cu.alpha,Cu.beta,Cu.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Pu)),this.filter.addAccelMeasurement(this.accelerometer,Pu)),void(this.previousTimestampS=Pu))},_u.prototype.onOrientationChange_=function(){this.setScreenTransform_()},_u.prototype.onMessage_=function($u){var Tu=$u.data;Tu&&Tu.type&&Tu.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(Tu.deviceMotionEvent)},_u.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$n.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$n.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},_u}(),vl=[0,0,.5,1],yl=[.5,0,.5,1],bl=function(){function _u($u){var Tu=this;this.renderer=$u,this.sensor=new ml(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$n.PerspectiveCamera,this.cameraR=new r$n.PerspectiveCamera;var Cu=this.sensor.start();this.dispose=function(){var Pu=Tu.renderer.getSize(new r$n.Vector2);Tu.renderer.setScissor(0,0,Pu.width,Pu.height),Tu.renderer.setViewport(0,0,Pu.width,Pu.height),Tu.renderer.setScissorTest(!1),Cu()}}return _u.prototype.render=function($u,Tu){var Cu=this.renderer.getSize(new r$n.Vector2);if(Cu.width>Cu.height){var Pu=$u.autoUpdate;Pu&&($u.updateMatrixWorld(),$u.autoUpdate=!1);var Ru={x:Math.round(Cu.width*vl[0]),y:Math.round(Cu.height*vl[1]),width:Math.round(Cu.width*vl[2]),height:Math.round(Cu.height*vl[3])},Lu={x:Math.round(Cu.width*yl[0]),y:Math.round(Cu.height*yl[1]),width:Math.round(Cu.width*yl[2]),height:Math.round(Cu.height*yl[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),Tu.parent===null&&Tu.updateMatrixWorld(),Tu.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),Tu.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Bu=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$n.Vector3().fromArray(Bu.left),this.scale),this.cameraR.translateOnAxis(new r$n.Vector3().fromArray(Bu.right),this.scale);var Vu=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Vu.left.slice(),this.cameraR.projectionMatrix.elements=Vu.right.slice(),this.renderer.setViewport(Ru.x,Ru.y,Ru.width,Ru.height),this.renderer.setScissor(Ru.x,Ru.y,Ru.width,Ru.height),this.renderer.render($u,this.cameraL),this.renderer.setViewport(Lu.x,Lu.y,Lu.width,Lu.height),this.renderer.setScissor(Lu.x,Lu.y,Lu.width,Lu.height),this.renderer.render($u,this.cameraR),this.renderer.setViewport(0,0,Cu.width,Cu.height),this.renderer.setScissor(0,0,Cu.width,Cu.height),this.renderer.setScissorTest(!1),Pu&&($u.autoUpdate=!0)}else this.renderer.render($u,Tu)},_u.prototype.dispose=function(){},_u}(),xl={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},wl=typeof navigator!="undefined"&&(ul=xl[navigator.language.split("-")[0]])!==null&&ul!==void 0?ul:xl.zh,El=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(wl.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(wl.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function Ml(_u){for(var $u=1,Tu=document.getElementsByTagName("meta"),Cu=0;Cu<Tu.length;Cu++){var Pu=Tu[Cu];if(Pu.getAttribute("name")==="viewport"){var Ru=(Pu.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Ru&&($u=Number(Ru[1])),isNaN($u)&&($u=1)}}return El.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,_u).replace(/(\d+)px/g,function(Lu,Bu){return function(Vu){return Math.floor(Vu*$u)+"px"}(Number(Bu))})}var Il=new r$n.CircleBufferGeometry(.12,16),Sl=function(){var _u=yt$2(),$u=new r$n.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Tu=256,Cu=document.createElement("canvas");Cu.setAttribute("width",String(Tu)),Cu.setAttribute("height",String(Tu));var Pu=Cu.getContext("2d");if(Pu){Pu.drawImage(_u,0,0,Tu,Tu),Pu.globalCompositeOperation="source-out";var Ru=128;Pu.beginPath(),Pu.lineWidth=6.4,Pu.arc(Ru,Ru,83.2,0,2*Math.PI),Pu.strokeStyle="rgba(255, 255, 255, 1.0)",Pu.closePath(),Pu.stroke(),$u.image=Cu,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cl=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256;return $u.beginPath(),$u.arc(Tu,Tu,192,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,192,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$n.CanvasTexture(_u)}}return null}(),Bl=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256;Tu.arc(Cu,Cu,192,0,2*Math.PI),Tu.fillStyle="rgba(85, 90, 255, 0.6)",Tu.shadowBlur=25.6,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.fill(),Tu.arc(Cu,Cu,192,0,2*Math.PI);var Pu=Tu.createRadialGradient(Cu,Cu,0,Cu,Cu,Cu);Pu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Pu.addColorStop(1,"rgba(255, 255, 255, 0.2)"),Tu.fillStyle=Pu,Tu.fill(),Tu.lineWidth=4.8,Tu.arc(Cu,Cu,187.2,0,2*Math.PI);var Ru=Tu.createLinearGradient(0,0,0,_u);return Ru.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ru.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Ru,Tu.stroke(),new r$n.CanvasTexture($u)}}return null}(),Tl=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256,Pu=179.2;Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.4)",Tu.shadowBlur=25.6,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.fill(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI);var Ru=Tu.createRadialGradient(Cu,Cu,0,Cu,Cu,Cu);Ru.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.fillStyle=Ru,Tu.fill(),Tu.lineWidth=4.8,Tu.arc(Cu,Cu,Pu-4.8,0,2*Math.PI);var Lu=Tu.createLinearGradient(0,0,0,_u);return Lu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Lu.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Lu,Tu.stroke(),new r$n.CanvasTexture($u)}}return null}(),Pl=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256,Pu=217.6,Ru=64;Tu.lineWidth=Ru,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle="rgba(147, 162, 255, 0.3)",Tu.shadowBlur=25.6,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.stroke(),Tu.lineWidth=Ru,Tu.arc(Cu,Cu,Pu,0,2*Math.PI);var Lu=Tu.createRadialGradient(Cu,Cu,185.6,Cu,Cu,249.6);Lu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Lu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.strokeStyle=Lu,Tu.stroke(),Tu.beginPath(),Tu.lineWidth=4,Tu.arc(Cu,Cu,245.6,0,2*Math.PI);var Bu=Tu.createLinearGradient(0,0,_u,0);return Bu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Bu.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Bu,Tu.stroke(),new r$n.CanvasTexture($u)}}return null}(),Rl=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.opacityMotion=new Ro({opacity:0}),Tu.loadingMotion=new Ro({opacity:0}),Tu.currentMotion=new Ro({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Cu={blending:r$n.CustomBlending,blendSrc:r$n.SrcAlphaFactor,blendDst:r$n.OneMinusSrcAlphaFactor,blendSrcAlpha:r$n.OneFactor,blendDstAlpha:r$n.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return Tu.hitTestMesh=new r$n.Mesh(Il,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{color:0,opacity:0}))),Tu.hitTestMesh.scale.set(1.5,1.5,1.5),Tu.centerMesh=new r$n.Mesh(Il,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Bl,opacity:0}))),Tu.centerMesh2=new r$n.Mesh(Il,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Tl,opacity:0}))),Tu.ringMesh=new r$n.Mesh(Il,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Pl,opacity:0}))),Tu.loadingMesh=new r$n.Mesh(Il,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Sl,opacity:.8}))),Tu.disableMesh=new r$n.Mesh(Il,new r$n.MeshBasicMaterial(t$h.__assign(t$h.__assign({},Cu),{map:Cl}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.hitTestMesh.position.z=0,Tu.ringMesh.position.z=.003,Tu.disableMesh.position.z=.002,Tu.centerMesh.position.z=.002,Tu.centerMesh2.position.z=.002,Tu.loadingMesh.position.z=.005,Tu.hitTestMesh.frustumCulled=!1,Tu.centerMesh.frustumCulled=!1,Tu.centerMesh2.frustumCulled=!1,Tu.ringMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.add(Tu.hitTestMesh),Tu.add(Tu.centerMesh),Tu.add(Tu.centerMesh2),Tu.add(Tu.ringMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.renderOrder=1e4,Tu.needsRender=!0,Tu}return t$h.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.progress=Tu,this.setLoading(Tu>0)},$u.prototype.setOpacity=function(Tu){this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},30).catch(Qe$1))},$u.prototype.setCurrent=function(Tu){if(this.current!==Tu){if(Tu){var Cu=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Cu,1500).catch(Qe$1)}else Cu=[{progress:0,value:t$h.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Cu,200).catch(Qe$1);this.current=Tu}},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(Tu?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){return Promise.resolve()},$u.prototype.updateTime=function(Tu,Cu){this.opacityMotion.update(Tu),this.currentMotion.update(Tu),this.loadingMotion.update(Tu);var Pu=this.opacityMotion.value.opacity,Ru=this.currentMotion.value,Lu=Ru.ringScale,Bu=Ru.ringOpacity,Vu=Ru.circleFade,Ou=Ru.circleOpacity,Du=Ru.circleScale;if(this.ringMesh.scale.set(Lu,Lu,Lu),this.centerMesh.scale.set(Du,Du,Du),this.centerMesh2.scale.set(Du,Du,Du),this.ringMesh.material.opacity=Bu*Pu,this.centerMesh.material.opacity=(1-Vu)*Pu,this.centerMesh2.material.opacity=Vu*Ou*Pu,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Cu/200);var ku=this.opacityMotion.value.opacity,Fu=1.1;this.centerMesh.scale.set(Fu,Fu,Fu),this.centerMesh2.scale.set(Fu,Fu,Fu),this.centerMesh.material.opacity=0*ku,this.centerMesh2.material.opacity=.2*ku}else this.loadingMesh.visible=!1;this.needsRender=!0},$u.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},$u}(r$n.Object3D),kl=function(_u){function $u(Tu){var Cu=this,Pu=$u.parseArgs(Tu);(Cu=_u.call(this,Pu)||this).cardboard=new bl(Cu.renderer);var Ru,Lu,Bu,Vu=(Ru="five_vr_helper_"+Kr(),Lu=Ml(Ru),(Bu=document.createElement("div")).className=Ru,Bu.innerHTML=Lu,Bu);Cu.helperElement=Vu;var Ou=new ra(Vu);return Cu.element.parentNode&&(Cu.element.parentNode.insertBefore(Vu,Cu.element),Cu.setHelperElementSize(),Ou.on("tap",function(){return Cu.emit("vrWantsToExit")})),Cu.destroyHelper=function(){Ou.destroy(),Vu.parentNode&&Vu.parentNode.removeChild(Vu),delete Cu.helperElement},Cu.boundingMesh.visible=!0,Cu}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){var Cu=t$h.__assign(t$h.__assign({},Tu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Cu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var Tu=0,Cu=this.panoMeshes;Tu<Cu.length;Tu++){var Pu=Cu[Tu];this.helper.remove(Pu),Pu.dispose()}this.panoMeshes.length=0},$u.prototype.isReady=function(){return!1},$u.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},$u.prototype.updatePanoMeshes=function(){var Tu=this;this.panoMeshes.forEach(function(Lu){Tu.helper.remove(Lu),Lu.dispose()}),this.panoMeshes.length=0;for(var Cu=0;Cu<this.work.observers.length;Cu++){var Pu=this.work.observers[Cu],Ru=new Rl;Ru.name="panoSphere_".concat(this.work.workCode,"_").concat(Cu),Ru.position.copy(Pu.position),Ru.needsRender=!0,this.helper.add(Ru),this.panoMeshes[Cu]=Ru}},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Ru,Lu=[],Bu=2;Bu<arguments.length;Bu++)Lu[Bu-2]=arguments[Bu];if(!this.destroyed){this.needsRender=!0;var Vu={},Ou={};if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var Du=this.locationMotion.getKeyFrameSegment(Tu),ku=Du[0],Fu=Du[1],Nu=this.panoResourceFromLocationMotionKeyframe(ku),Gu=this.panoResourceFromLocationMotionKeyframe(Fu),zu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Uu=Nu.position,ju=Gu.position,Wu=this.locationMotion.value.count-Fu.value.count+1;Vu.modelAlpha=this.locationMotion.value.modelAlpha,Vu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Vu.useBlackTransition=Gu.effect==="instant",Gu.panoPicture&&(Wu<1?Nu.panoPicture&&(Vu.pano0=Nu.panoPicture):Vu.pano0=Gu.panoPicture,Vu.pano1=Gu.panoPicture),Gu.effect==="fade"&&(Vu.pano0&&Nu.panoPicture&&(Vu.pano0={map:Vu.pano0.map,luminanceMap:Vu.pano0.luminanceMap,matrix:Nu.panoPicture.matrix.clone().setPosition(Gu.position)}),Uu.copy(ju)),Vu.progress=Wu,Ou.distance=this.locationMotion.value.distance,Ou.offset=new r$n.Vector3(Uu.x+(ju.x-Uu.x)*Wu,Uu.y+(ju.y-Uu.y)*Wu,Uu.z+(ju.z-Uu.z)*Wu);for(var Qu=[],qu=[],Yu=0,Ju=this.locationMotion.keyframes;Yu<Ju.length;Yu++){var _d=Ju[Yu],tp=_d.key,Ku=_d.progress;tp!==void 0&&(Qu.push(tp),Ku>=this.locationMotion.progress&&qu.push(tp))}for(var Xu=0,Zu=Object.keys(this.panoResources);Xu<Zu.length;Xu++){var _c=Zu[Xu];if(!(qu.indexOf(_c)>=0)){var Xc=this.panoResources[_c];if(Xc.panoPicture){var _h=Xc.panoPicture.map;if(_h){if(_h===((Pu=Vu.pano0)===null||Pu===void 0?void 0:Pu.map)||_h===((Ru=Vu.pano1)===null||Ru===void 0?void 0:Ru.map))continue;_h.dispose(),Xc.panoPicture=null}}Qu.indexOf(_c)>=0||delete this.panoResources[_c]}}this.currentPanoIndex=Wu<.5?Nu.panoIndex:Gu.panoIndex,this.emit("movingToPano",Hu.panoIndex,zu.panoIndex,this.locationMotion.progress)}ia$1(Vu)===!1&&(this.model.setMaterial(Vu),this.boundingMesh.setMaterial(Vu)),Ou.offset&&this.camera.position.copy(Ou.offset);var ip=this.camera.pose.longitude,ap=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var hp=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),Ap=0;Ap<this.work.observers.length;Ap++){var gp=this.work.observers[Ap];if((Dp=this.panoMeshes[Ap]).visible=!0,gp.loadable||gp.active){if(hp.indexOf(Ap)===-1)Dp.visible=!1;else{Dp.visible=!0;var Rp=Dp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Rp<.05?Dp.setOpacity(0):Dp.setOpacity(ho(1.5/Rp,0,1)),this.currentPanoIndex===Ap&&Dp.setOpacity(0)}Dp.lookAt(this.camera.position)}else Dp.visible=!0}var Sp=this.intersect(Tu);for(Ap=0;Ap<this.work.observers.length;Ap++)(Dp=this.panoMeshes[Ap])==null||Dp.setCurrent(Dp===Sp);for(Ap=0;Ap<this.work.observers.length;Ap++){var Dp;(Dp=this.panoMeshes[Ap])&&Dp.updateTime&&Dp.updateTime(Tu,Cu)}ip===this.camera.pose.longitude&&ap===this.camera.pose.latitude||(this.cameraMotion.set(ii(this.camera.pose,["longitude","latitude"]),0).catch(Qe$1),this.emit("cameraDirectionUpdate",ii(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",na(ii(this.camera.pose,["longitude","latitude","fov","offset","distance"])),!0))}},$u.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},$u.prototype.setCamera=function(Tu){},$u.prototype.destroyHelper=function(){},$u.prototype.setHelperElementSize=function(){if(this.helperElement){var Tu=new r$n.Vector2(this.element.offsetWidth,this.element.offsetHeight),Cu=Tu.x*this.scissor.left,Pu=Tu.y*(1-this.scissor.bottom-this.scissor.height),Ru=Tu.x*this.scissor.width,Lu=Tu.y*this.scissor.height;this.helperElement.style.marginLeft=Cu+"px",this.helperElement.style.marginTop=Pu+"px",this.helperElement.style.width=Ru+"px",this.helperElement.style.height=Lu+"px"}},$u.prototype.intersect=function(Tu){var Cu;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&Tu-this.activeTime>1500){var Pu=this.activePanoMesh;return(Du=this.panoMeshes.indexOf(Pu))>=0&&this.moveToPano(Du,{},!0),delete this.activePanoMesh,delete this.activeTime,Pu}for(var Ru=this.camera.getWorldDirection(new r$n.Vector3),Lu=new r$n.Raycaster(this.camera.position,Ru),Bu=void 0,Vu=[],Ou=this.work.observers[this.currentPanoIndex].visibleNodes,Du=0;Du<this.work.observers.length;Du++){var ku=this.panoMeshes[Du];if(Ou.indexOf(Du)!==-1){var Fu=Lu.intersectObject((Cu=ku.hitTestMesh)!==null&&Cu!==void 0?Cu:ku,!0)[0];Fu&&Vu.push({panoMesh:ku,intersection:Fu})}}var Nu=Vu.sort(function(ju,Wu){return ju.intersection.distance-Wu.intersection.distance})[0];if(Nu?(Bu=Nu.intersection,this.activePanoMesh!==Nu.panoMesh&&(this.activePanoMesh=Nu.panoMesh,this.activeTime=Tu),this.intersectMesh.position.copy(Nu.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Bu)if((Bu=this.model.intersectRaycaster(Lu)[0])&&Bu.face){var Gu=Bu.face.normal,zu=new r$n.Quaternion;zu.setFromUnitVectors(new r$n.Vector3(0,0,1),Gu),this.intersectMesh.quaternion.copy(zu);var Hu=Gu.clone().multiplyScalar(.05),Uu=Bu.point.clone().add(Hu);this.intersectMesh.position.copy(Uu),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Bu,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Nu==null?void 0:Nu.panoMesh},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u}(Xa),Dl=function(_u){function $u(Tu){var Cu,Pu,Ru,Lu,Bu=this,Vu=$u.parseArgs(Tu);return(Bu=_u.call(this,Vu)||this).currentPanoIndex=Vu.initial[0],Bu.locationMotion=new Ro({x:Bu.camera.pose.offset.x,y:Bu.camera.pose.offset.y,z:Bu.camera.pose.offset.z,distance:Bu.camera.pose.distance,modelAlpha:(Pu=(Cu=Bu.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Ru=Bu.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Bu}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){return _u.parseArgs.call(this,Tu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose()},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Ru,Lu){this.work=Tu,this.currentPanoIndex=Cu,this.hideIntersectMesh();var Bu={duration:0,longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov};return this.moveToPano(Cu,Bu,Lu),!0},$u.prototype.updateTime=function(Tu,Cu){for(var Pu=[],Ru=2;Ru<arguments.length;Ru++)Pu[Ru-2]=arguments[Ru];if(!this.destroyed){var Lu={},Bu={};if(!this.locationMotion.ended){this.locationMotion.update(Tu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Bu.distance=this.locationMotion.value.distance,Bu.offset=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Vu=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Ou=ta(this.work.observers,function(Du){return Du.position.distanceTo(Vu)});this.currentPanoIndex=this.work.observers.indexOf(Ou)}this.cameraMotion.ended||(this.cameraMotion.update(Tu),Bu.longitude=this.cameraMotion.value.longitude,Bu.latitude=this.cameraMotion.value.latitude,Bu.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Bu)||this.setCamera(Bu)}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou=this;this.destroyed||(this.pending=!1,this.userAction=Ru,this.moveToPano(Tu,{longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Bu=Cu.latitude)!==null&&Bu!==void 0?Bu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Vu=Cu.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),duration:Pu,moveStartCallback:function(Du,ku){Ou.emit("initAnimationWillStart",Du,ku,Ou.userAction)},moveEndCallback:function(Du,ku){Ou.emit("initAnimationEnded",Du,ku,Ou.userAction)},moveCancelCallback:function(){var Du=Ou.currentPanoIndex,ku={longitude:Ou.camera.pose.longitude,latitude:Ou.camera.pose.latitude,fov:Ou.camera.pose.fov,offset:Ou.camera.pose.offset.clone(),distance:Ou.camera.pose.distance};Ou.emit("initAnimationEnded",Du,ku,Ou.userAction)}},Ru))},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$3())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$3())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:new r$n.Vector3(Cu.value.x,Cu.value.y,Cu.value.z),distance:Cu.value.distance}},$u.prototype.moveToPano=function(Tu,Cu,Pu){Cu===void 0&&(Cu={});var Ru=this.work.observers[Tu];Ru&&this.moveToPosition(Ru.position,Cu,Pu)},$u.prototype.moveToPosition=function(Tu,Cu,Pu){var Ru,Lu,Bu,Vu=this;Cu===void 0&&(Cu={}),this.userAction=Pu;for(var Ou=_e$3(),Du=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(Tu),ku=this.locationMotion.getProgressVelocity(Ou),Fu=0,Nu=1;Nu<this.locationMotion.keyframes.length;Nu++){var Gu=this.locationMotion.keyframes[Nu-1].value,zu=Gu.x,Hu=Gu.y,Uu=Gu.z,ju=this.locationMotion.keyframes[Nu].value,Wu=ju.x,Qu=ju.y,qu=ju.z;Fu+=Math.sqrt(Math.pow(Wu-zu,2)+Math.pow(Qu-Hu,2)+Math.pow(qu-Uu,2))}var Yu=Du===0?0:ku*Fu/Du,Ju=this.calculateMovingDuration(Cu.duration,Du),_d={x:Tu.x,y:Tu.y,z:Tu.z,distance:0,modelAlpha:1,perspToOrtho:0},tp={longitude:Cu.longitude,latitude:Cu.latitude,fov:Cu.fov},Ku={longitude:(Ru=tp.longitude)!==null&&Ru!==void 0?Ru:this.camera.pose.longitude,latitude:(Lu=tp.latitude)!==null&&Lu!==void 0?Lu:this.camera.pose.latitude,fov:(Bu=tp.fov)!==null&&Bu!==void 0?Bu:this.camera.pose.fov,offset:Tu.clone(),distance:0},Xu=ta(this.work.observers,function(_c){return _c.position.distanceTo(Tu)}),Zu=this.work.observers.indexOf(Xu);this.emit("moveToPano",Zu,this.userAction),Cu.moveStartCallback&&Cu.moveStartCallback(Zu,Ku),this.emit("panoWillArrive",Zu,Ku,this.userAction),this.cameraMotion.set(tp,Ju).catch(Qe$1),this.locationMotion.set(_d,Ju,Yu).then(function(){var _c=na(Vu.camera.pose);Cu.moveEndCallback&&Cu.moveEndCallback(Zu,_c),Vu.emit("panoArrived",Zu,_c,Vu.userAction)},function(){Cu.moveCancelCallback&&Cu.moveCancelCallback(),Vu.emit("moveToPanoCanceled",Zu)})},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Gu){return ii(Gu,["x","y"])});if(!this.emit("wantsGesture","tap",Cu,!0)){var Pu=this.relativeClientPosition(Tu.center),Ru=new r$n.Raycaster;if(Ru.setFromCamera(Pu,this.camera),!this.emit("wantsTapGesture",Ru,Pu,!0)){this.emit("gesture","tap",Cu,!0),this.emit("tapGesture",Ru,Pu,!0),this.interiaMovement=!1;var Lu=this.model.intersectRaycaster(Ru)[0];if(Lu&&Lu.face){var Bu=Lu.face.normal,Vu=Lu.point;if(new r$n.Vector3(0,1,0).angleTo(Bu)>Math.PI/3){var Ou=this.camera.position.clone().setY(Vu.y),Du=Vu.clone().sub(Ou).setLength(.3),ku=Vu.clone().sub(Du);Ru.set(ku,new r$n.Vector3(0,-1,0)),Lu=this.model.intersectRaycaster(Ru)[0]}}if(Lu){var Fu=Lu.point.clone(),Nu=ta(this.work.observers.filter(function(Gu){return Math.abs(Gu.standingPosition.y-Fu.y)<1}),function(Gu){return Gu.standingPosition.distanceTo(Fu)});if(Nu)return Fu.y=Nu.position.y,void this.moveToPosition(Fu,{},!0)}this.cameraBounce()}}},$u}(ba$1),Ll=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Ru="";return arguments[Pu].split(Ru).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Ru)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Ol=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Ru="";return arguments[Pu].split(Ru).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Ru)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Nl=Object.assign({opacity:new r$n.Uniform(1),scale:new r$n.Uniform(13.1),panoMap:new r$n.Uniform(null),panoDisplacementMap:new r$n.Uniform(null),panoPosition:new r$n.Uniform(new r$n.Vector3),panoMatrix:new r$n.Uniform(new r$n.Matrix4)},{emissive:new r$n.Uniform(new r$n.Color(0)),emissiveMap:new r$n.Uniform(null),specular:new r$n.Uniform(new r$n.Color(1118481)),specularMap:new r$n.Uniform(null),normalMap:new r$n.Uniform(null),bumpMap:new r$n.Uniform(null),shininess:new r$n.Uniform(30)},r$n.UniformsLib.common,r$n.UniformsLib.lights),Fl=new r$n.SphereBufferGeometry(.01,128,128),Ql=function(){function _u($u){$u===void 0&&($u={}),this.textureLoader=new Ii({allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}),this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u,this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u,this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u,this.textureLoader.setNetworkSubscribe($u)},_u.prototype.load=function($u,Tu,Cu,Pu,Ru,Lu,Bu,Vu){var Ou=[0,0],Du=function(Fu,Nu){Ou[Nu]=Fu,Bu(.8*Ou[0]+.2*Ou[1])},ku=[this.textureLoader.load($u,{viaAjax:!0},void 0,void 0,function(Fu){return Du(Fu,1)},Vu),this.textureLoader.loadCube(Tu,{viaAjax:!0},void 0,void 0,function(Fu){return Du(Fu,0)},Vu)];return Promise.all(ku).then(function(Fu){var Nu=Fu[0],Gu=Fu[1],zu={body:function(Hu,Uu,ju,Wu){var Qu=new r$n.ShaderMaterial({side:r$n.BackSide,vertexShader:Ll,fragmentShader:Ol,transparent:!0,uniforms:r$n.UniformsUtils.clone(Nl)}),qu=Uu;return qu.needsUpdate=!0,qu.minFilter=r$n.LinearFilter,qu.magFilter=r$n.LinearFilter,Hu.needsUpdate=!0,Hu.minFilter=r$n.LinearFilter,Hu.magFilter=r$n.LinearFilter,Qu.uniforms.opacity.value=0,Qu.uniforms.panoMap.value=qu,Qu.uniforms.panoDisplacementMap.value=Hu,Qu.uniforms.panoPosition.value=ju,Qu.uniforms.panoMatrix.value=Wu,Object.assign(new r$n.Mesh(Fl,Qu),{frustumCulled:!1,dispose:function(){this.material instanceof r$n.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Nu.body,Gu.body,Cu,Pu),meta:t$h.__spreadArray([Nu.meta],Gu.meta,!0)};return Ru(zu),zu}).catch(function(Fu){for(var Nu=0,Gu=ku;Nu<Gu.length;Nu++)Gu[Nu].then(function(zu){return zu.body.dispose()}).catch(Qe$1);return Lu(Fu),Promise.reject(Fu)})},_u}(),Vl=new r$n.Vector3(-1,1,1),_l=function(_u){function $u(Tu){var Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du=this,ku=$u.parseArgs(Tu);return(Du=_u.call(this,ku)||this).currentPanoIndex=ku.initial[0],Du.maxAccessibleDistance=ku.maxAccessibleDistance,Du.panoTapTriggerRadius=ku.panoTapTriggerRadius,Du.panoCircleMeshCreator=ku.panoCircleMeshCreator,Du.boundingMesh=Du.generateBoundingMesh(),Du.boundingMesh.setMaterial(Du.model.getMaterial()||{}),Du.boundingMesh.visible=!1,Du.scene.add(Du.boundingMesh),Du.panoModelGroup=new r$n.Group,Du.panoModelGroup.name="panoModels",Du.scene.add(Du.panoModelGroup),Du.panoMeshes=[],Du.updatePanoMeshes(),Du.helper.remove(Du.intersectMesh),Du.locationMotion=new Ro({count:0,distance:Du.camera.pose.distance,modelAlpha:(Pu=(Cu=Du.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Ru=Du.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Du.panoResources={},Du.panoResources[Du.locationMotion.keyframes[0].key=Du.locationMotion.keyframes[1].key=Kr()]={panoIndex:Du.currentPanoIndex,workCode:Du.work.workCode,matrix:(Ou=(Vu=(Bu=Du.model.getMaterial())===null||Bu===void 0?void 0:Bu.pano1)===null||Vu===void 0?void 0:Vu.matrix)!==null&&Ou!==void 0?Ou:new r$n.Matrix4,position:Du.camera.pose.offset.clone(),effect:"fly"},Du.depthTextureLoader=new Ql({allowHosts:Du.work.allowHosts,requestProxy:Du.requestProxy,networkSubscribe:Du.networkSubscribe}),Du}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Ru,Lu=_u.parseArgs.call(this,Tu);return t$h.__assign(t$h.__assign({},Lu),{maxAccessibleDistance:(Cu=Tu.maxAccessibleDistance)!==null&&Cu!==void 0?Cu:5,panoTapTriggerRadius:(Pu=Tu.panoTapTriggerRadius)!==null&&Pu!==void 0?Pu:1,panoCircleMeshCreator:(Ru=Tu.panoCircleMeshCreator)!==null&&Ru!==void 0?Ru:function(){return new as}})},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){var Tu,Cu=this;if(_u.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Pu=0,Ru=this.panoModelGroup.children;Pu<Ru.length;Pu++){var Lu=Ru[Pu];typeof Lu.dispose=="function"&&Lu.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gu){Cu.helper.remove(Gu),Gu.dispose()}),this.panoMeshes.length=0);for(var Bu=(Tu=this.model.getMaterial())!==null&&Tu!==void 0?Tu:{},Vu=Bu.pano0,Ou=Bu.pano1,Du=0,ku=Object.keys(this.panoResources);Du<ku.length;Du++){var Fu=ku[Du],Nu=this.panoResources[Fu];Nu.panoModel&&Nu.panoModel.material.uniforms.panoMap.value!==(Vu==null?void 0:Vu.map)&&Nu.panoModel.material.uniforms.panoMap.value!==(Ou==null?void 0:Ou.map)&&(this.panoModelGroup.remove(Nu.panoModel),Nu.panoModel.material.uniforms.panoMap.value.dispose(),Nu.panoModel.dispose(),delete Nu.panoModel),delete this.panoResources[Fu]}this.interiaMovement=!1},$u.prototype.isReady=function(){return this.locationMotion.ended===!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Ru,Lu){this.userAction=Lu,this.work=Tu,this.currentPanoIndex=Cu,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Bu={},Vu=!0;this.boundingMesh&&(Bu=this.boundingMesh.getMaterial()||{},Vu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Vu,this.boundingMesh.setMaterial(Bu),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Ou=0,Du=this.panoMeshes;Ou<Du.length;Ou++)Du[Ou].visible=!1;return this.moveToPano(Cu,{effect:"fade",duration:Ru,longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},Lu),!0},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Ru,Lu,Bu=[],Vu=2;Vu<arguments.length;Vu++)Bu[Vu-2]=arguments[Vu];if(!this.destroyed){var Ou={},Du={},ku=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Fu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Nu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var Gu=this.locationMotion.getKeyFrameSegment(Tu),zu=Gu[0],Hu=Gu[1],Uu=this.panoResourceFromLocationMotionKeyframe(zu),ju=this.panoResourceFromLocationMotionKeyframe(Hu),Wu=new r$n.Vector3().copy(Uu.position),Qu=new r$n.Vector3().copy(ju.position),qu=this.locationMotion.value.count-Hu.value.count+1;Ou.progress=qu,Ou.modelAlpha=this.locationMotion.value.modelAlpha,Ou.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var Yu=0,Ju=this.panoModelGroup.children;Yu<Ju.length;Yu++){var _d=Ju[Yu];_d.visible=_d===Uu.panoModel||_d===ju.panoModel}Uu.panoModel&&(Uu.panoModel.material.uniforms.opacity.value=1-qu,Uu.panoModel.material.depthTest=qu!==0),ju.panoModel&&(ju.panoModel.material.uniforms.opacity.value=qu,ju.panoModel.material.depthTest=qu!==1),ju.panoModel&&(qu<1?Uu.panoModel&&(Ou.pano0={map:Uu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Uu.matrix}):Ou.pano0={map:ju.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:ju.matrix},Ou.pano1={map:ju.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:ju.matrix}),Nu=Ou.useBlackTransition=ju.effect==="instant"||ju.effect==="montage",ju.effect!=="fade"&&ju.effect!=="montage"||(Ou.pano0&&(Ou.pano0={map:Ou.pano0.map,luminanceMap:null,matrix:Uu.matrix.clone().setPosition(ju.position)}),Wu.copy(Qu)),Du.distance=this.locationMotion.value.distance,Du.offset=new r$n.Vector3(Wu.x+(Qu.x-Wu.x)*qu,Wu.y+(Qu.y-Wu.y)*qu,Wu.z+(Qu.z-Wu.z)*qu);for(var tp=[],Ku=[],Xu=0,Zu=this.locationMotion.keyframes;Xu<Zu.length;Xu++){var _c=Zu[Xu],Xc=_c.key,_h=_c.progress;Xc!==void 0&&(tp.push(Xc),_h>=this.locationMotion.progress&&Ku.push(Xc))}for(var ip=0,ap=Object.keys(this.panoResources);ip<ap.length;ip++){var hp=ap[ip];if(!(Ku.indexOf(hp)>=0)){var Ap=this.panoResources[hp];if(Ap.panoModel){if(Ap.panoModel.material.uniforms.panoMap.value===((Pu=Ou.pano0)===null||Pu===void 0?void 0:Pu.map)||Ap.panoModel.material.uniforms.panoMap.value===((Ru=Ou.pano1)===null||Ru===void 0?void 0:Ru.map))continue;this.panoModelGroup.remove(Ap.panoModel),Ap.panoModel.material.uniforms.panoMap.value.dispose(),Ap.panoModel.dispose(),delete Ap.panoModel}tp.indexOf(hp)>=0||delete this.panoResources[hp]}}Uu.workCode===ju.workCode?this.currentPanoIndex=qu<.5?Uu.panoIndex:ju.panoIndex:this.currentPanoIndex=ju.panoIndex,this.emit("movingToPano",Fu.panoIndex,ku.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Tu),Du.longitude=this.cameraMotion.value.longitude,Du.latitude=this.cameraMotion.value.latitude,Du.fov=this.cameraMotion.value.fov),ia$1(Ou)===!1&&(this.model.setMaterial(Ou),this.boundingMesh.setMaterial(Ou)),ia$1(Du)===!1&&this.setCamera(Du),this.camera.pose.distance>.1)for(var gp=0;gp<this.work.observers.length;gp++)(Ep=this.panoMeshes[gp])&&(Ep.visible=!1);else{var Rp=this.work.observers[this.currentPanoIndex];if(Rp){var Sp=Rp.visibleNodes.concat(this.currentPanoIndex),Dp=this.getForwardPanoIndexOrNot();for(gp=0;gp<this.work.observers.length;gp++){var Ep,Bp=this.work.observers[gp];if(Ep=this.panoMeshes[gp])if(Bp.loadable||Bp.active)if(Sp.indexOf(gp)!==-1)if(Nu)Ep.visible=!1,Ep.setOpacity(0);else{Ep.visible=!0;var Ip=Ep.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Ep.setCurrent(Dp===gp),Ep.setOpacity(Ip<.01?0:ho(1.4/Ip,.5,.7)),Ep.updateTime&&Ep.updateTime(Tu,Cu)}else Ep.visible=!1,Ep.setOpacity(0);else Ep.visible=!1,Ep.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Lu=this.boundingMesh.getMaterial())===null||Lu===void 0?void 0:Lu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$3())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$3())[1],Pu=this.panoResourceFromLocationMotionKeyframe(Cu),Ru=this.work.observers[Pu.panoIndex];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:Ru?Ru.position.clone():this.camera.position.clone(),distance:0}},$u.prototype.moveToPano=function(Tu,Cu,Pu){var Ru,Lu,Bu=this;Cu===void 0&&(Cu={});var Vu=this.work.observers[Tu].images.depth,Ou=t$h.__assign({key:"pano.".concat(Tu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),Du=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct$3,ku={right:Du(this.work.observers[Tu].images.right,t$h.__assign(t$h.__assign({},Ou),{key:"pano.".concat(Tu,".right")})),left:Du(this.work.observers[Tu].images.left,t$h.__assign(t$h.__assign({},Ou),{key:"pano.".concat(Tu,".left")})),up:Du(this.work.observers[Tu].images.up,t$h.__assign(t$h.__assign({},Ou),{key:"pano.".concat(Tu,".up")})),down:Du(this.work.observers[Tu].images.down,t$h.__assign(t$h.__assign({},Ou),{key:"pano.".concat(Tu,".down")})),front:Du(this.work.observers[Tu].images.front,t$h.__assign(t$h.__assign({},Ou),{key:"pano.".concat(Tu,".front")})),back:Du(this.work.observers[Tu].images.back,t$h.__assign(t$h.__assign({},Ou),{key:"pano.".concat(Tu,".back")}))},Fu=this.work.observers[Tu],Nu=Fu.position,Gu=Fu.quaternion,zu=new r$n.Matrix4().compose(Nu,Gu,new r$n.Vector3(-1,1,1)),Hu="pano:"+va(ku);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Hu)return;var Uu=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[Uu])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",Uu,this.work.observers[Uu]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:Tu,hash:Hu,onLoad:function(Wu){Bu.pending=!1,Bu.destroyed?Wu.body.dispose():(Wu.body.name=Hu,Bu.emit("panoLoaded",Tu),Bu.doMoveToPano(Tu,Wu.body,Cu,Pu))},onError:function(Wu){Bu.pending=!1,Cu.moveCancelCallback&&Cu.moveCancelCallback(),Bu.emit("panoLoadError",Wu,Tu),Bu.emit("moveToPanoCanceled",Tu)}};var ju=this.panoMeshes[Tu];ju&&ju.tap&&ju.tap(),this.depthTextureLoader.load(Vu,ku,Nu,zu,function(Wu){var Qu,qu;((Qu=Bu.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===Hu?(Bu.pendingTextureTask.onLoad(Wu),(qu=Bu.panoMeshes[Tu])===null||qu===void 0||qu.setProgress(0),delete Bu.pendingTextureTask,Bu.emit("textureLoaded",Tu,Bu.work.observers[Tu],Wu.meta)):Wu.body.dispose()},function(Wu){var Qu,qu;((Qu=Bu.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===Hu&&(Bu.pendingTextureTask.onError(Wu),(qu=Bu.panoMeshes[Tu])===null||qu===void 0||qu.setProgress(0),delete Bu.pendingTextureTask,Bu.emit("textureError",Wu,Tu,Bu.work.observers[Tu]),Bu.emit("error",Wu))},function(Wu){var Qu,qu;Bu.emit("textureLoading",Wu,Tu,Bu.work.observers[Tu]),((Qu=Bu.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===Hu&&((qu=Bu.panoMeshes[Tu])===null||qu===void 0||qu.setProgress(Wu))},this.renderer),this.emit("textureStartLoad",Tu,this.work.observers[Tu])},$u.prototype.initAnimation=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou=this;if(!this.destroyed){var Du=!1;this.pending=!1,this.userAction=Ru,this.moveToPano(Tu,{longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Bu=Cu.latitude)!==null&&Bu!==void 0?Bu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Vu=Cu.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),duration:Pu,moveStartCallback:function(ku,Fu){Du=!0,Ou.emit("initAnimationWillStart",ku,Fu,Ou.userAction)},moveEndCallback:function(ku,Fu){Ou.emit("initAnimationEnded",ku,Fu,Ou.userAction)},moveCancelCallback:function(){var ku=na(Ou.camera.pose);Du===!1&&Ou.emit("initAnimationWillStart",Ou.currentPanoIndex,ku,Ou.userAction),Ou.emit("initAnimationEnded",Ou.currentPanoIndex,ku,Ou.userAction)}},Ru)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Tu){return this.panoResources[Tu.key]},$u.prototype.locationMotionKeyframesLength=function(Tu){for(var Cu=0,Pu=1;Pu<Tu.length;Pu++){var Ru=this.panoResourceFromLocationMotionKeyframe(Tu[Pu-1]).position,Lu=this.panoResourceFromLocationMotionKeyframe(Tu[Pu]).position;Cu+=Ru.distanceTo(Lu)*(Tu[Pu].value.count-Tu[Pu-1].value.count)}return Cu},$u.prototype.updatePanoMeshes=function(){for(var Tu={},Cu=0,Pu=this.panoMeshes;Cu<Pu.length;Cu++)Tu[(Vu=Pu[Cu]).name]=Vu;this.panoMeshes.length=0;for(var Ru=0;Ru<this.work.observers.length;Ru++){var Lu="panoCircle_".concat(this.work.workCode,"_").concat(Ru),Bu=this.work.observers[Ru],Vu=void 0;Tu[Lu]?(Vu=Tu[Lu],delete Tu[Lu]):((Vu=this.panoCircleMeshCreator()).name=Lu,this.helper.add(Vu)),Vu.position.copy(Bu.standingPosition),this.panoMeshes[Ru]=Vu}for(var Ou=0,Du=Object.keys(Tu);Ou<Du.length;Ou++){var ku=Du[Ou];this.helper.remove(Tu[ku]),Tu[ku].dispose(),delete Tu[ku]}},$u.prototype.generateBoundingMesh=function(Tu){Tu===void 0&&(Tu=!1);for(var Cu=this.model.bounding.clone(),Pu=0,Ru=this.work.observers;Pu<Ru.length;Pu++){var Lu=Ru[Pu];Cu.expandByPoint(Lu.standingPosition),Cu.expandByPoint(new r$n.Vector3().fromArray([Lu.position.x,2*Lu.position.y-Lu.standingPosition.y,Lu.position.z]))}Tu&&Cu.expandByPoint(this.camera.position);var Bu=Ks(Cu,new r$n.Vector3(1,0,1));return Bu.name="panorama_bounding",Bu.frustumCulled=!1,Bu},$u.prototype.doMoveToPano=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou,Du=this;Pu===void 0&&(Pu={}),this.userAction=Ru;var ku=_e$3(),Fu=Kr(),Nu=this.work.observers[Tu],Gu=this.panoResources[Fu]={panoIndex:Tu,workCode:this.work.workCode,effect:(Lu=Pu.effect)!==null&&Lu!==void 0?Lu:"fly",panoModel:Cu,matrix:new r$n.Matrix4().compose(Nu.position,Nu.quaternion,Vl),position:Nu.position.clone()};Cu.visible=!1,Cu.renderOrder=-1,this.panoModelGroup.add(Cu);var zu,Hu,Uu;if(this.locationMotion.ended){var ju=this.locationMotion.getKeyFrameSegment(ku);ju[0];var Wu=ju[1],Qu=this.locationMotion.value,qu=this.panoResourceFromLocationMotionKeyframe(Wu).position,Yu=Gu.position;zu=Math.max(qu.distanceTo(Yu),1),Hu=[{key:Wu.key,progress:0,value:t$h.__assign(t$h.__assign({},Qu),{count:0})},{key:Fu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Uu=0}else{var Ju=this.locationMotion.getKeyFrameSegment(ku),_d=Ju[0],tp=(Wu=Ju[1],Qu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(_d).position),Ku=(qu=this.panoResourceFromLocationMotionKeyframe(Wu).position,Yu=Gu.position,Wu.value.count-Qu.count),Xu=Math.max(tp.distanceTo(qu),1)*Ku;zu=Xu+Math.max(qu.distanceTo(Yu),1),Hu=[{key:_d.key,progress:0,value:t$h.__assign({},Qu)},{key:Wu.key,progress:Xu/zu,value:Wu.value},{key:Fu,progress:1,value:{count:Wu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Zu=this.locationMotionKeyframesLength(this.locationMotion.keyframes),_c=this.locationMotionKeyframesLength(Hu);Uu=Zu===0||Zu===0?0:this.locationMotion.getProgressVelocity(ku)*Zu/_c}var Xc=this.calculateMovingDuration(Pu.duration,Pu.effect==="fade"||Pu.effect==="montage"?0:zu),_h={longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},ip={longitude:(Bu=_h.longitude)!==null&&Bu!==void 0?Bu:this.camera.pose.longitude,latitude:(Vu=_h.latitude)!==null&&Vu!==void 0?Vu:this.camera.pose.latitude,fov:(Ou=_h.fov)!==null&&Ou!==void 0?Ou:this.camera.pose.fov,offset:Nu.position.clone(),distance:this.camera.pose.distance};Pu.moveStartCallback&&Pu.moveStartCallback(Tu,ip),this.emit("panoWillArrive",Tu,ip,this.userAction),this.cameraMotion.set(_h,Xc).catch(Qe$1),this.locationMotion.setKeyframes(Hu,Xc,Uu).then(function(){var ap={longitude:Du.camera.pose.longitude,latitude:Du.camera.pose.latitude,fov:Du.camera.pose.fov,offset:Du.camera.pose.offset.clone(),distance:Du.camera.pose.distance};Pu.moveEndCallback&&Pu.moveEndCallback(Tu,ap),Du.emit("panoArrived",Tu,ap,Ru)},function(){Pu.moveCancelCallback&&Pu.moveCancelCallback(),Du.emit("moveToPanoCanceled",Tu)})},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this,Pu=this.camera.getWorldDirection(new r$n.Vector3),Ru=this.camera.position.clone(),Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return null;var Bu=Lu.accessibleNodes.filter(function(Uu){if(Uu===Cu.currentPanoIndex)return!1;var ju=Cu.work.observers[Uu],Wu=ju.standingPosition.clone().sub(Ru);return Wu.length()!==0&&!(Wu.angleTo(new r$n.Vector3(0,-1,0))<Math.PI/12)&&(ju.loadable||ju.active)}),Vu=(Tu?Tu.ray.direction.clone():Pu.clone()).setY(0);if(Vu.length()===0)return null;for(var Ou=Bu.slice().sort(function(Uu,ju){var Wu=Cu.work.observers[Uu].position.clone().setY(Ru.y),Qu=Cu.work.observers[ju].position.clone().setY(Ru.y);return Wu.distanceTo(Ru)-Qu.distanceTo(Ru)}),Du=0,ku=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Du<ku.length;Du++)for(var Fu=ku[Du],Nu=0,Gu=Ou;Nu<Gu.length;Nu++){var zu=Gu[Nu],Hu=this.work.observers[zu].position.clone().setY(Ru.y).sub(Ru);if(Hu.length()!==0&&Vu.angleTo(Hu)<Fu)return zu}return null},$u.prototype.onTapGesture=function(Tu){var Cu=this,Pu=Tu.pointers.map(function(ap){return ii(ap,["x","y"])});if(!this.emit("wantsGesture","tap",Pu,!0)){var Ru=this.relativeClientPosition(Tu.center),Lu=new r$n.Raycaster;if(Lu.setFromCamera(Ru,this.camera),!this.emit("wantsTapGesture",Lu,Ru,!0)){this.emit("gesture","tap",Pu,!0),this.emit("tapGesture",Lu,Ru,!0),this.interiaMovement=!1;var Bu=this.camera.getWorldDirection(new r$n.Vector3).setY(0),Vu=null,Ou=this.work.observers[this.currentPanoIndex];if(Ou){var Du=Ou.accessibleNodes.filter(function(ap){if(ap===Cu.currentPanoIndex)return!1;var hp=Cu.work.observers[ap];return!(hp.position.distanceTo(Cu.camera.position)>Cu.maxAccessibleDistance)&&(hp.loadable||hp.active)}),ku=Lu.intersectObject(this.boundingMesh,!0)[0];if(ku){var Fu=ta(Du,function(ap){var hp=Cu.work.observers[ap].standingPosition.clone();return hp.clone().sub(Cu.camera.position).setY(0).angleTo(Bu)>Math.PI/2?1/0:hp.distanceTo(ku.point)},!0),Nu=Fu[0];Fu[1]<this.panoTapTriggerRadius&&(Vu=Nu)}oo(Vu)&&(Vu=this.getForwardPanoIndexOrNot(Lu));for(var Gu=0,zu=this.locationMotion.keyframes;Gu<zu.length;Gu++){var Hu=zu[Gu],Uu=this.panoResourceFromLocationMotionKeyframe(Hu);if(!(Hu.progress<this.locationMotion.progress)&&Uu.panoIndex===Vu){Vu=null;break}}if(this.emit("panoSelected",Vu),oo(Vu))this.locationMotion.ended===!0&&this.cameraBounce();else{var ju=this.work.observers[Vu];if(ju.active){for(var Wu={},Qu=Math.PI/6,qu=Math.PI/12,Yu=new r$n.Vector3(0,1,0),Ju=ju.position.clone().setY(0).sub(Ou.position.clone().setY(0)).normalize(),_d=Ju.clone().applyAxisAngle(Yu,Qu),tp=Ju.clone().applyAxisAngle(Yu,-Qu),Ku=[],Xu=[],Zu=[],_c=0,Xc=ju.accessibleNodes;_c<Xc.length;_c++)if((Nu=Xc[_c])!==this.currentPanoIndex&&Nu!==Vu){var _h=this.work.observers[Nu].position.clone().sub(ju.position).setY(0);Ju.angleTo(_h)<Qu?Zu.push(_h):_d.angleTo(_h)<Qu?Ku.push(_h):tp.angleTo(_h)<Qu&&Xu.push(_h)}var ip=(Zu.length>0?Zu:t$h.__spreadArray(t$h.__spreadArray([],Ku,!0),Xu,!0)).slice().sort(function(ap,hp){return ap.angleTo(Ju)-hp.angleTo(Ju)})[0];ip&&ip.angleTo(Bu)>qu&&(Wu.longitude=Math.atan2(-ip.x,-ip.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Wu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Vu,Wu,!0)}else this.panoMeshes[Vu]&&(this.panoMeshes[Vu].setDisabled(!1),this.panoMeshes[Vu].setLoading(!0))}}}}},$u}(ba$1);function Hl(_u,$u){var Tu=new r$n.Vector3;return Tu.setFromMatrixColumn($u,0),Tu.multiplyScalar(-_u),Tu}function ql(_u,$u,Tu){var Cu=new r$n.Vector3;return Cu.setFromMatrixColumn(Tu,0),Cu.crossVectors($u,Cu),Cu.multiplyScalar(_u),Cu}var zl=function(_u){function $u(Tu){var Cu,Pu,Ru,Lu,Bu=this,Vu=$u.parseArgs(Tu);return(Bu=_u.call(this,Vu)||this).currentPanoIndex=Vu.initial[0],Bu.defaultLongitude=Vu.defaultLongitude,Bu.defaultLatitude=Vu.defaultLatitude,Bu.defaultDistance=Vu.defaultDistance,Bu.maxLatitude=Vu.maxLatitude,Bu.minLatitude=Vu.minLatitude,Bu.maxDistance=Vu.maxDistance,Bu.minDistance=Vu.minDistance,Bu.locationMotion=new Ro({x:Bu.camera.pose.offset.x,y:Bu.camera.pose.offset.y,z:Bu.camera.pose.offset.z,distance:Bu.camera.pose.distance,modelAlpha:(Pu=(Cu=Bu.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Ru=Bu.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Bu}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du=_u.parseArgs.call(this,Tu);return t$h.__assign(t$h.__assign({},Du),{defaultLongitude:(Cu=Tu.defaultLongitude)!==null&&Cu!==void 0?Cu:Math.PI/4,defaultLatitude:(Pu=Tu.defaultLatitude)!==null&&Pu!==void 0?Pu:Math.PI/4,defaultDistance:(Ru=Tu.defaultDistance)!==null&&Ru!==void 0?Ru:100,maxLatitude:(Lu=Tu.maxLatitude)!==null&&Lu!==void 0?Lu:+Math.PI/2,minLatitude:(Bu=Tu.minLatitude)!==null&&Bu!==void 0?Bu:0,maxDistance:(Vu=Tu.maxDistance)!==null&&Vu!==void 0?Vu:100,minDistance:(Ou=Tu.minDistance)!==null&&Ou!==void 0?Ou:2})},$u.distanceFromModel=function(Tu,Cu,Pu){var Ru=Tu.bounding,Lu=Math.pow(Math.pow(Ru.max.x-Ru.min.x+1,2)+Math.pow(Ru.max.y-Ru.min.y+1,2)+Math.pow(Ru.max.z-Ru.min.z+1,2),.5),Bu=Lu/2/Math.tan(Math.PI*Cu/360);return Pu<1&&(Bu/=Pu),isNaN(Bu)?Lu:Bu},$u.initAnimationEndPose=function(Tu){var Cu,Pu,Ru=this.parseArgs(Tu),Lu=Tu.initial[0],Bu=Tu.initial[1];return{longitude:(Cu=Bu.longitude)!==null&&Cu!==void 0?Cu:Ru.defaultLongitude,latitude:ho((Pu=Bu.latitude)!==null&&Pu!==void 0?Pu:Ru.defaultLatitude,Ru.minLatitude,Ru.maxLatitude),fov:90,offset:Ru.work.observers[Lu].position.clone(),distance:$u.distanceFromModel(Ru.model,90,Ru.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.model.enableTiles=!1,this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Ru,Lu){return this.work=Tu,this.updateCamera(Pu,Ru,Lu),!0},$u.prototype.updateModel=function(Tu){_u.prototype.updateModel.call(this,Tu);var Cu=Tu.bounding.getCenter(new r$n.Vector3);this.locationMotion.set({x:Cu.x,y:Cu.y,z:Cu.z},0).catch(Qe$1),this.model.enableTiles=!0},$u.prototype.updateTime=function(Tu,Cu){if(!this.destroyed){var Pu={},Ru={};this.locationMotion.ended||(this.locationMotion.update(Tu),Pu.modelAlpha=this.locationMotion.value.modelAlpha,Pu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ru.distance=this.locationMotion.value.distance,Ru.offset=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Tu),Ru.longitude=this.cameraMotion.value.longitude,Ru.latitude=this.cameraMotion.value.latitude,Ru.fov=this.cameraMotion.value.fov),ia$1(Pu)||this.model.setMaterial(Pu),ia$1(Ru)||this.setCamera(Ru)}},$u.prototype.setCamera=function(Tu){_u.prototype.setCamera.call(this,Tu);var Cu=this.camera.pose.offset.clone();if(this.model.bvhs.loaded){var Pu=new r$n.Raycaster(this.camera.getWorldPosition(new r$n.Vector3),this.camera.getWorldDirection(new r$n.Vector3)),Ru=this.model.intersectRaycaster(Pu)[0];Ru&&Cu.copy(Ru.point)}var Lu=ta(this.work.observers,function(Vu){return Vu.position.distanceTo(Cu)}),Bu=this.work.observers.indexOf(Lu);Bu!==this.currentPanoIndex&&(this.emit("moveToPano",Bu,this.userAction),this.emit("panoWillArrive",Bu,na(this.camera.pose),this.userAction),this.currentPanoIndex=Bu,this.emit("panoArrived",Bu,na(this.camera.pose),this.userAction))},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$3())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$3())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,distance:Cu.value.distance,offset:new r$n.Vector3(Cu.value.x,Cu.value.y,Cu.value.z)}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var Ou={longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Bu=Cu.latitude)!==null&&Bu!==void 0?Bu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:90,offset:this.model.bounding.getCenter(new r$n.Vector3),distance:$u.distanceFromModel(this.model,90,this.camera.aspect)},Du=ii(Ou,["longitude","latitude","fov"]),ku={x:Ou.offset.x,y:Ou.offset.y,z:Ou.offset.z,distance:Ou.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Tu,Ou,this.userAction),this.cameraMotion.set(Du,Pu).catch(Qe$1),this.locationMotion.set(ku,Pu).then(function(){Vu.emit("initAnimationEnded",Tu,Ou,Vu.userAction)},function(Fu){var Nu=na(Vu.camera.pose);Vu.emit("initAnimationEnded",Tu,Nu,Vu.userAction)}).then(function(){Vu.model.enableTiles=!0})}},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this.work.observers.filter(function(Bu){return Bu.active}),Pu=this.model.intersectRaycaster(Tu)[0];if(!Pu)return null;var Ru=ta(Cu,function(Bu){return Bu.standingPosition.distanceTo(Pu.point)},!0),Lu=Ru[0];return Ru[1]<5?this.work.observers.indexOf(Lu):null},$u.prototype.coordinatesForOffset=function(Tu){var Cu=this.cameraMotion.value.fov,Pu=this.camera.aspect,Ru=this.renderer.getSize(new r$n.Vector2);return{longitude:2*Tu.x/(Ru.x*this.scissor.width)*Cu/95*Pu,latitude:-2*Tu.y/(Ru.y*this.scissor.height)*Cu/95}},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Ru=Tu.pointers.map(function(ju){return ii(ju,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Tu.isFinal))if(Tu.pointerType==="mouse"&&Tu.srcEvent.buttons===2){var Lu={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y},Bu=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Vu=this.model.bounding,Ou=Vu.getCenter(new r$n.Vector3),Du={x:(Vu.max.x-Vu.min.x)/90*this.cameraMotion.value.fov,y:(Vu.max.y-Vu.min.y)/90*this.cameraMotion.value.fov,z:(Vu.max.z-Vu.min.z)/90*this.cameraMotion.value.fov},ku=(this.camera.position.y-Vu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Fu=this.renderer.getSize(new r$n.Vector2);Bu.add(Hl(2*Lu.x*ku/Fu.y,this.camera.matrix)),Bu.add(ql(2*Lu.y*ku/Fu.y,this.camera.up,this.camera.matrix)),Bu.x=ho(Bu.x,Ou.x-Du.x,Ou.x+Du.x),Bu.z=ho(Bu.z,Ou.z-Du.z,Ou.z+Du.z);var Nu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Bu,distance:this.locationMotion.value.distance};if(this.emit("wantsPanGesture",Nu,Tu.isFinal))return;this.emit("gesture","pan",Ru,Tu.isFinal),this.emit("panGesture",Nu,Tu.isFinal),this.userAction=!0,this.locationMotion.set({x:Bu.x,y:Bu.y,z:Bu.z},0).catch(Qe$1)}else{Bu={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y};var Gu=this.coordinatesForOffset(Bu),zu=Gs(this.cameraMotion.value.longitude+-1*Gu.longitude),Hu=ho(this.cameraMotion.value.latitude+-1*Gu.latitude,this.minLatitude,this.maxLatitude);if(this.camera.aspect<1&&Math.abs(Tu.overallVelocityX)>.2&&Math.atan2(Math.abs(Tu.overallVelocityY),Math.abs(Tu.overallVelocityX))<Math.PI/6.923&&(Hu=this.cameraMotion.value.latitude),Nu={longitude:zu,latitude:Hu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance},this.emit("wantsPanGesture",Nu,Tu.isFinal))return;this.emit("gesture","pan",Ru,Tu.isFinal),this.emit("panGesture",Nu,Tu.isFinal),this.userAction=!0,this.interiaMovement=!1;var Uu={longitude:Nu.longitude,latitude:Nu.latitude,fov:Nu.fov};this.cameraMotion.set(Uu,0).catch(Qe$1),Tu.isFinal&&(this.emit("wantsInteriaPan",Nu)||(this.interiaMovement=!0,Tu.velocityX,Tu.velocityY))}}},$u.prototype.onPinchGesture=function(Tu){var Cu=this.pinchState||{},Pu=Cu.distance;Cu.offsetY;var Ru=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Ru=!0,delete this.pinchState),Pu!==void 0){this.pinchState={distance:Pu};var Lu=Tu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(this.emit("wantsGesture","pinch",Lu,Ru))return;var Bu=ho(Pu/Tu.scale,this.minDistance,this.maxDistance);if(this.emit("wantsPinchGesture",Tu.scale,this.camera.pose.fov,Ru))return;this.emit("gesture","pinch",Lu,Ru),this.emit("pinchGesture",Tu.scale,this.camera.pose.fov,Ru),this.userAction=!0,this.locationMotion.set({distance:Bu},0).catch(Qe$1)}var Vu=this.panState,Ou=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Ou,x:Tu.center.x,y:Tu.center.y},Vu!==void 0&&Vu.pointerLength===Ou){var Du=Tu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","pinch",Du,Ru)){var ku=Tu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","pinch",ku,Ru)){var Fu={x:Tu.center.x-Vu.x,y:Tu.center.y-Vu.y},Nu=new r$n.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Gu=this.model.bounding,zu=Gu.getCenter(new r$n.Vector3),Hu={x:(Gu.max.x-Gu.min.x)/90*this.cameraMotion.value.fov,y:(Gu.max.y-Gu.min.y)/90*this.cameraMotion.value.fov,z:(Gu.max.z-Gu.min.z)/90*this.cameraMotion.value.fov},Uu=(this.camera.position.y-Gu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),ju=this.renderer.getSize(new r$n.Vector2);Nu.add(Hl(2*Fu.x*Uu/ju.y,this.camera.matrix)),Nu.add(ql(2*Fu.y*Uu/ju.y,this.camera.up,this.camera.matrix)),Nu.x=ho(Nu.x,zu.x-Hu.x,zu.x+Hu.x),Nu.z=ho(Nu.z,zu.z-Hu.z,zu.z+Hu.z);var Wu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Nu,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",Wu,Tu.isFinal)||(this.emit("gesture","pan",ku,Tu.isFinal),this.emit("panGesture",Wu,Tu.isFinal),this.userAction=!0,this.locationMotion.set({x:Nu.x,y:Nu.y,z:Nu.z},0).catch(Qe$1))}}}}else this.pinchState={distance:this.locationMotion.value.distance}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Ru=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Lu=ho(this.locationMotion.value.distance-Pu/2,this.minDistance,this.maxDistance);this.emit("wantsMouseWheel",Pu,this.camera.pose.fov,!1)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Pu,this.camera.pose.fov,!1),this.userAction=!0,this.locationMotion.set({distance:Lu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Ru,!0)||Cu.emit("wantsMouseWheel",Pu,Cu.camera.pose.fov,!0)||(Cu.emit("gesture","mouseWheel",Ru,!0),Cu.emit("mouseWheel",0,Cu.camera.pose.fov,!0))},200)})}},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Vu){return ii(Vu,["x","y"])});if(!this.emit("wantsGesture","tap",Cu,!0)){var Pu=this.relativeClientPosition(Tu.center),Ru=new r$n.Raycaster;if(Ru.setFromCamera(Pu,this.camera),!this.emit("wantsTapGesture",Ru,Pu,!0)){this.emit("gesture","tap",Cu,!0),this.emit("tapGesture",Ru,Pu,!0),this.interiaMovement=!1;var Lu=this.getForwardPanoIndexOrNot(Ru);if(!oo(Lu)){this.emit("panoSelected",Lu);var Bu={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Lu,Bu,!0)}}}},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Ru,Lu=[Tu];if(this.emit("wantsGesture","press",Lu,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;var Bu=this.relativeClientPosition(Tu),Vu=new r$n.Raycaster;if(Vu.setFromCamera(Bu,this.camera),this.emit("wantsPressGesture",Vu,Bu,Tu.delta,Cu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Cu),this.emit("pressGesture",Vu,Bu,Tu.delta,Cu)},$u}(fa$1),Kl={type:"move"},Ul=function(){function _u(){this._targetRay=null,this._grip=null,this._hand=null,this._axes=[0,0]}return _u.prototype.getHandSpace=function(){return this._hand===null&&(this._hand=new r$n.Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},_u.prototype.getTargetRaySpace=function(){return this._targetRay===null&&(this._targetRay=new r$n.Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r$n.Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r$n.Vector3),this._targetRay},_u.prototype.getGripSpace=function(){return this._grip===null&&(this._grip=new r$n.Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r$n.Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r$n.Vector3),this._grip},_u.prototype.dispatchEvent=function($u){return this._targetRay!==null&&this._targetRay.dispatchEvent($u),this._grip!==null&&this._grip.dispatchEvent($u),this._hand!==null&&this._hand.dispatchEvent($u),this},_u.prototype.disconnect=function($u){return this.dispatchEvent({type:"disconnected",data:$u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},_u.prototype.getAxes=function(){return this._axes},_u.prototype.update=function($u,Tu,Cu){var Pu=null,Ru=null,Lu=null,Bu=this._targetRay,Vu=this._grip,Ou=this._hand;if($u&&$u.gamepad&&$u.gamepad.axes&&(this._axes=[$u.gamepad.axes[2],$u.gamepad.axes[3]]),$u&&Tu.session.visibilityState!=="visible-blurred")if(Bu!==null&&(Pu=Tu.getPose($u.targetRaySpace,Cu))!==null&&(Bu.matrix.fromArray(Pu.transform.matrix),Bu.matrix.decompose(Bu.position,Bu.rotation,Bu.scale),Pu.linearVelocity?(Bu.hasLinearVelocity=!0,Bu.linearVelocity.copy(Pu.linearVelocity)):Bu.hasLinearVelocity=!1,Pu.angularVelocity?(Bu.hasAngularVelocity=!0,Bu.angularVelocity.copy(Pu.angularVelocity)):Bu.hasAngularVelocity=!1,this.dispatchEvent(Kl)),Ou&&$u.hand){Lu=!0;for(var Du=0,ku=$u.hand.values();Du<ku.length;Du++){var Fu=ku[Du],Nu=Tu.getJointPose(Fu,Cu);if(Ou.joints[Fu.jointName]===void 0){var Gu=new r$n.Group;Gu.matrixAutoUpdate=!1,Gu.visible=!1,Ou.joints[Fu.jointName]=Gu,Ou.add(Gu)}var zu=Ou.joints[Fu.jointName];Nu!==null&&(zu.matrix.fromArray(Nu.transform.matrix),zu.matrix.decompose(zu.position,zu.rotation,zu.scale),zu.jointRadius=Nu.radius),zu.visible=Nu!==null}var Hu=Ou.joints["index-finger-tip"],Uu=Ou.joints["thumb-tip"],ju=Hu.position.distanceTo(Uu.position);Ou.inputState.pinching&&ju>.025?(Ou.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:$u.handedness,target:this})):!Ou.inputState.pinching&&ju<=.015&&(Ou.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:$u.handedness,target:this}))}else Vu!==null&&$u.gripSpace&&(Ru=Tu.getPose($u.gripSpace,Cu))!==null&&(Vu.matrix.fromArray(Ru.transform.matrix),Vu.matrix.decompose(Vu.position,Vu.rotation,Vu.scale),Ru.linearVelocity?(Vu.hasLinearVelocity=!0,Vu.linearVelocity.copy(Ru.linearVelocity)):Vu.hasLinearVelocity=!1,Ru.angularVelocity?(Vu.hasAngularVelocity=!0,Vu.angularVelocity.copy(Ru.angularVelocity)):Vu.hasAngularVelocity=!1);return Bu!==null&&(Bu.visible=Pu!==null),Vu!==null&&(Vu.visible=Ru!==null),Ou!==null&&(Ou.visible=Lu!==null),this},_u}(),jl=function(_u){function $u(Tu,Cu,Pu){var Ru,Lu,Bu,Vu=this;return(Vu=_u.call(this)||this).isPanorama=(Ru=Pu==null?void 0:Pu.isPanorama)===null||Ru===void 0||Ru,Vu.machineType=(Lu=Pu==null?void 0:Pu.machineType)!==null&&Lu!==void 0?Lu:"Pico",Vu.renderer=Tu,Vu.gl=Cu,Vu.enabled=!1,Vu.session=null,Vu.referenceSpaceType=(Bu=Pu==null?void 0:Pu.referenceSpaceType)!==null&&Bu!==void 0?Bu:"local-floor",Vu.referenceSpace=null,Vu.controllers=[new Ul,new Ul],Vu.inputSourcesMap=new Map,Vu.cameraVR=new r$n.ArrayCamera,Vu.cameraL=new r$n.PerspectiveCamera,Vu.cameraR=new r$n.PerspectiveCamera,Vu.cameraL.viewport=new r$n.Vector4,Vu.cameraR.viewport=new r$n.Vector4,Vu.cameraL.layers.enable(1),Vu.cameraR.layers.enable(2),Vu.cameraVR.layers.enable(1),Vu.cameraVR.layers.enable(2),Vu.isPresenting=!1,Vu.currentDepthNear=null,Vu.currentDepthFar=null,Vu.cameraLPos=new r$n.Vector3,Vu.cameraRPos=new r$n.Vector3,Vu}return t$h.__extends($u,_u),$u.prototype.getController=function(Tu){var Cu=this.controllers[Tu];return Cu||console.warn("no controller find"),Cu.getTargetRaySpace()},$u.prototype.getCameras=function(){return{cameraL:this.cameraL,cameraR:this.cameraR,cameraVR:this.cameraVR}},$u.prototype.updateCamera=function(Tu,Cu){Cu===null?Tu.matrixWorld.copy(Tu.matrix):Tu.matrixWorld.multiplyMatrices(Cu.matrixWorld,Tu.matrix),Tu.matrixWorldInverse.getInverse(Tu.matrixWorld)},$u.prototype.setProjectionFromUnion=function(Tu,Cu,Pu){this.cameraLPos.setFromMatrixPosition(Cu.matrixWorld),this.cameraRPos.setFromMatrixPosition(Pu.matrixWorld);var Ru=this.cameraLPos.distanceTo(this.cameraRPos),Lu=Cu.projectionMatrix.elements,Bu=Pu.projectionMatrix.elements,Vu=Lu[14]/(Lu[10]-1),Ou=Lu[14]/(Lu[10]+1),Du=(Lu[9]+1)/Lu[5],ku=(Lu[9]-1)/Lu[5],Fu=(Lu[8]-1)/Lu[0],Nu=(Bu[8]+1)/Bu[0],Gu=Vu*Fu,zu=Vu*Nu,Hu=Ru/(-Fu+Nu),Uu=Hu*-Fu;Cu.matrixWorld.decompose(Tu.position,Tu.quaternion,Tu.scale),Tu.translateX(Uu),Tu.translateZ(Hu),Tu.matrixWorld.compose(Tu.position,Tu.quaternion,Tu.scale),Tu.matrixWorldInverse.getInverse(Tu.matrixWorld);var ju=Vu+Hu,Wu=Ou+Hu,Qu=Gu-Uu,qu=zu+(Ru-Uu),Yu=Du*Ou/Wu*ju,Ju=ku*Ou/Wu*ju;Tu.projectionMatrix.makePerspective(Qu,qu,Yu,Ju,ju,Wu)},$u.prototype.getCamera=function(Tu){this.cameraVR.near=this.cameraR.near=this.cameraL.near=Tu.near,this.cameraVR.far=this.cameraR.far=this.cameraL.far=Tu.far,!this.session||this.currentDepthNear===this.cameraVR.near&&this.currentDepthFar===this.cameraVR.far||(this.session.updateRenderState({depthNear:this.cameraVR.near,depthFar:this.cameraVR.far}),this.currentDepthNear=this.cameraVR.near,this.currentDepthFar=this.cameraVR.far);var Cu=Tu.parent,Pu=this.cameraVR.cameras;this.updateCamera(this.cameraVR,Cu);for(var Ru=0;Ru<Pu.length;Ru++)this.updateCamera(Pu[Ru],Cu);Tu.matrixWorld.copy(this.cameraVR.matrixWorld);for(var Lu=Tu.children,Bu=(Ru=0,Lu.length);Ru<Bu;Ru++)Lu[Ru].updateMatrixWorld(!0);return Pu.length===2?this.setProjectionFromUnion(this.cameraVR,this.cameraL,this.cameraR):this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix),this.cameraVR},$u.prototype.updateInputSources=function(Tu){if(this.session){for(var Cu=this.session.inputSources,Pu=0;Pu<this.controllers.length;Pu++)this.inputSourcesMap.set(Cu[Pu],this.controllers[Pu]);for(Pu=0;Pu<Tu.removed.length;Pu++){var Ru=Tu.removed[Pu];(Lu=this.inputSourcesMap.get(Ru))&&(Lu.dispatchEvent({type:"disconnected",data:Ru}),this.inputSourcesMap.delete(Ru))}for(Pu=0;Pu<Tu.added.length;Pu++){var Lu;Ru=Tu.added[Pu],(Lu=this.inputSourcesMap.get(Ru))&&Lu.dispatchEvent({type:"connected",data:Ru})}}else console.warn("session is lose!")},$u.prototype.onSessionEvent=function(Tu){var Cu=this.inputSourcesMap.get(Tu.inputSource);Cu&&Cu.dispatchEvent({type:Tu.type})},$u.prototype.onSessionEnd=function(){this.inputSourcesMap.forEach(function(Tu,Cu){Tu.disconnect(Cu)}),this.inputSourcesMap.clear(),this.renderer.setFramebuffer(null),this.renderer.setRenderTarget(this.renderer.getRenderTarget()),this.isPresenting=!1,this.session=null,at$4.shared.setContext(null),this.emit("webXRSessionEnd")},$u.prototype.onRequestReferenceSpace=function(Tu){this.referenceSpace=Tu,this.isPresenting=!0,this.emit("webXRSessionStart")},$u.prototype.setSession=function(Tu){var Cu=this;if(this.session=Tu,this.session){this.session.addEventListener("select",function(Ru){Cu.onSessionEvent(Ru)}),this.session.addEventListener("selectstart",function(Ru){Cu.onSessionEvent(Ru)}),this.session.addEventListener("selectend",function(Ru){Cu.onSessionEvent(Ru)}),this.session.addEventListener("squeeze",function(Ru){Cu.onSessionEvent(Ru)}),this.session.addEventListener("squeezestart",function(Ru){Cu.onSessionEvent(Ru)}),this.session.addEventListener("squeezeend",function(Ru){Cu.onSessionEvent(Ru)}),this.session.addEventListener("end",function(Ru){Cu.onSessionEnd()});var Pu=this.gl.getContextAttributes();this.gl.makeXRCompatible().then(function(){var Ru={antialias:Pu==null?void 0:Pu.antialias,alpha:Pu==null?void 0:Pu.alpha,depth:Pu==null?void 0:Pu.depth,stencil:Pu==null?void 0:Pu.stencil,framebufferScaleFactor:1};if(Cu.session){switch(Cu.machineType){case"Pico":Cu.session.updateRenderState({baseLayer:new XRWebGLLayer(Cu.session,Cu.gl,Ru)});break;case"Oculus":Cu.session.updateRenderState({layers:[new XRWebGLLayer(Cu.session,Cu.gl,Ru)]});break;default:Cu.machineType}Cu.session.requestReferenceSpace(Cu.referenceSpaceType).then(function(Lu){Cu.onRequestReferenceSpace(Lu)}),Cu.session.addEventListener("inputsourceschange",function(Lu){Cu.updateInputSources(Lu)})}else console.error("session is lose while set session!")})}},$u}(Fe),Gl=["webXRSessionStart","webXRSessionEnd"];function Wl(_u,$u){if(!$u)return _u;var Tu=_u.match(/\d+_[a-z].png/);return _u.substring(0,Tu.index)+$u+"/"+_u.substring(Tu.index)}var Xl=new r$n.Matrix4().makeRotationAxis(new r$n.Vector3(0,1,0),Math.PI),Yl=new r$n.Vector3(-1,1,1),Zl=function(_u){function $u(Tu){var Cu=_u.call(this,Tu)||this;Cu.xrManager=new jl(Cu.renderer,Cu.renderer.getContext()),Cu.xrControllerRay=new r$n.Raycaster,Cu.boundingMesh.visible=!0,Cu.panoResources={},Cu.panoResources[Cu.locationMotion.keyframes[0].key=Cu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Cu.currentPanoIndex,workCode:Cu.work.workCode,leftPanoPicture:null,position:Cu.camera.pose.offset.clone(),effect:"fade"};var Pu=at$4.shared.getContext();if(!Pu)return console.error("\u83B7\u53D6session\u5931\u8D25\uFF0C\u8BF7\u9000\u51FA\u91CD\u8BD5"),Cu;Pu.addEventListener("select",function(Ou){Cu.emit("webXRSelected","Select"),Cu.checkSelectedPano()}),Pu.addEventListener("squeeze",function(Ou){Cu.emit("webXRSelected","Squeeze")}),Cu.xrManager.setSession(Pu);for(var Ru=function(Ou){Lu.xrManager.on(Ou,function(){for(var Du=[],ku=0;ku<arguments.length;ku++)Du[ku]=arguments[ku];Cu.emit.apply(Cu,t$h.__spreadArray([Ou],Du,!1))})},Lu=this,Bu=0,Vu=Gl;Bu<Vu.length;Bu++)Ru(Vu[Bu]);return Cu}return t$h.__extends($u,_u),$u.parseArgs=function(Tu){var Cu=t$h.__assign(t$h.__assign({},Tu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Cu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.moveToPano=function(Tu,Cu,Pu){var Ru,Lu,Bu,Vu=this,Ou=this.work.observers[Tu],Du=t$h.__assign({key:"pano.".concat(Tu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality"])),ku=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct$3,Fu={right:Wl(ku(Ou.images.right,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".right")}))),left:Wl(ku(Ou.images.left,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".left")}))),up:Wl(ku(Ou.images.up,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".up")}))),down:Wl(ku(Ou.images.down,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".down")}))),front:Wl(ku(Ou.images.front,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".front")}))),back:Wl(ku(Ou.images.back,t$h.__assign(t$h.__assign({},Du),{key:"".concat(Du.key,".back")})))},Nu={key:"pano_luminance.".concat(Tu),basisLoaderInitialized:Ei.isInitialized(),size:Du.size?Du.size/2:1024},Gu=this.enableIOSEDR&&Ou.images.luminance?{right:ku(Ou.images.luminance.right,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".right")})),left:ku(Ou.images.luminance.left,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".left")})),up:ku(Ou.images.luminance.up,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".up")})),down:ku(Ou.images.luminance.down,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".down")})),front:ku(Ou.images.luminance.front,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".front")})),back:ku(Ou.images.luminance.back,t$h.__assign(t$h.__assign({},Nu),{key:"".concat(Nu.key,".back")}))}:null,zu="pano:"+va(Fu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===zu)return;var Hu=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[Hu])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",Hu,Ou),this.pendingTextureTask.onError(new Error("texture aborted"))}var Uu,ju=this.model.getMaterial()||{},Wu=ju.pano0,Qu=ju.pano1;if((Wu==null?void 0:Wu.map.name)===zu?Uu=Wu:(Qu==null?void 0:Qu.map.name)===zu&&(Uu=Qu),Uu){var qu={panoIndex:Tu,workCode:this.work.workCode,effect:(Bu=Cu.effect)!==null&&Bu!==void 0?Bu:"fade",leftPanoPicture:{map:Uu.map,luminanceMap:Uu.luminanceMap,matrix:new r$n.Matrix4().compose(Ou.position,Ou.quaternion,Yl)},position:Ou.position.clone()};this.doMoveToPano(Tu,qu,Cu,Pu)}else this.pending=!0,this.pendingTextureTask={panoIndex:Tu,hash:zu,onLoad:function(Yu,Ju){var _d,tp;if(Vu.pending=!1,Vu.destroyed)Yu.body.dispose();else{Yu.body.name=zu;var Ku={panoIndex:Tu,workCode:Vu.work.workCode,effect:(_d=Cu.effect)!==null&&_d!==void 0?_d:"fade",leftPanoPicture:{map:Yu.body,luminanceMap:(tp=Ju==null?void 0:Ju.body)!==null&&tp!==void 0?tp:null,matrix:new r$n.Matrix4().compose(Ou.position,Ou.quaternion,Yl)},position:Ou.position.clone()};Vu.doMoveToPano(Tu,Ku,Cu,Pu)}},onError:function(Yu){Vu.pending=!1,Cu.moveCancelCallback&&Cu.moveCancelCallback(),Vu.emit("panoLoadError",Yu,Tu),Vu.emit("moveToPanoCanceled",Tu)}},Promise.all([this.textureLoader.loadCube(Fu,{format:r$n.RGBFormat},void 0,void 0,function(Yu){var Ju,_d;((Ju=Vu.pendingTextureTask)===null||Ju===void 0?void 0:Ju.hash)===zu&&((_d=Vu.panoMeshes[Tu])===null||_d===void 0||_d.setProgress(Yu)),Vu.emit("textureLoading",Yu,Tu,Ou)}),Gu?this.textureLoader.loadCube(Gu,{format:r$n.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Yu){var Ju,_d,tp=Yu[0],Ku=Yu[1];((Ju=Vu.pendingTextureTask)===null||Ju===void 0?void 0:Ju.hash)===zu?(Vu.pendingTextureTask.onLoad(tp,Ku),(_d=Vu.panoMeshes[Tu])===null||_d===void 0||_d.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureLoaded",Tu,Ou,tp.meta)):(tp.body.dispose(),Ku==null||Ku.body.dispose())}).catch(function(Yu){var Ju,_d;((Ju=Vu.pendingTextureTask)===null||Ju===void 0?void 0:Ju.hash)===zu&&(Vu.pendingTextureTask.onError(Yu),(_d=Vu.panoMeshes[Tu])===null||_d===void 0||_d.setProgress(0),delete Vu.pendingTextureTask,Vu.emit("textureError",Yu,Tu,Ou),Vu.emit("error",Yu))}),this.emit("textureStartLoad",Tu,Ou)},$u.prototype.doMoveToPano=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou=this;Pu===void 0&&(Pu={}),this.userAction=Ru;var Du=_e$3(),ku=Kr();this.panoResources[ku]=Cu;var Fu,Nu,Gu;if(this.locationMotion.ended){var zu=this.locationMotion.getKeyFrameSegment(Du);zu[0];var Hu=zu[1],Uu=this.locationMotion.value,ju=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position;Fu=Math.max(ju.distanceTo(Wu),1),Nu=[{key:Hu.key,progress:0,value:t$h.__assign(t$h.__assign({},Uu),{count:0})},{key:ku,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gu=0}else{var Qu=this.locationMotion.getKeyFrameSegment(Du),qu=Qu[0],Yu=(Hu=Qu[1],Uu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(qu).position),Ju=(ju=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position,Hu.value.count-Uu.count),_d=Math.max(Yu.distanceTo(ju),1)*Ju;Fu=_d+Math.max(ju.distanceTo(Wu),1),Nu=[{key:qu.key,progress:0,value:t$h.__assign({},Uu)},{key:Hu.key,progress:_d/Fu,value:Hu.value},{key:ku,progress:1,value:{count:Hu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var tp=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ku=this.locationMotionKeyframesLength(Nu);Gu=this.locationMotion.getProgressVelocity(Du)*tp/Ku}var Xu=this.calculateMovingDuration(Pu.duration,Fu),Zu={longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},_c={longitude:(Lu=Zu.longitude)!==null&&Lu!==void 0?Lu:this.camera.pose.longitude,latitude:(Bu=Zu.latitude)!==null&&Bu!==void 0?Bu:this.camera.pose.latitude,fov:(Vu=Zu.fov)!==null&&Vu!==void 0?Vu:this.camera.pose.fov,offset:Cu.position.clone(),distance:0};Pu.moveStartCallback&&Pu.moveStartCallback(Tu,_c),this.emit("panoWillArrive",Tu,_c,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Zu,Xu).catch(Qe$1),this.locationMotion.setKeyframes(Nu,Xu,Gu).then(function(){var Xc,_h,ip,ap={longitude:Ou.camera.pose.longitude,latitude:Ou.camera.pose.latitude,fov:Ou.camera.pose.fov,offset:Ou.camera.pose.offset.clone(),distance:0};Pu.moveEndCallback&&Pu.moveEndCallback(Tu,ap),Ou.emit("panoArrived",Tu,ap,Ru);var hp=Ou.work.observers[Ou.currentPanoIndex];if(hp&&hp.video&&Ou.videoTexture&&Ou.videoTexture.image instanceof HTMLVideoElement){var Ap=Xl.clone().multiply((ip=(_h=(Xc=Ou.model.getMaterial())===null||Xc===void 0?void 0:Xc.pano1)===null||_h===void 0?void 0:_h.matrix)!==null&&ip!==void 0?ip:new r$n.Matrix4).multiply(hp.video.matrix),gp={map:Ou.videoTexture,size:hp.video.size,matrix:Ap,alpha:1},Rp=Kr(),Sp=Ou.videoTexture.image;Sp.setAttribute("uuid",Rp),xa().then(function(Dp){Dp&&hp.video&&Sp.getAttribute("uuid")===Rp&&(Sp.oncanplay=function(){Sp.oncanplay=Qe$1,Sp.play()},Sp.ontimeupdate=function(){Sp.currentTime>.5&&(Sp.ontimeupdate=Qe$1,Ou.panoVideo.setMaterial(gp))},Sp.src=hp.video.source)}).catch(function(){Sp.removeAttribute("uuid")})}},function(){Pu.moveCancelCallback&&Pu.moveCancelCallback(),Ou.emit("moveToPanoCanceled",Tu)})},$u.prototype.checkSelectedPano=function(){var Tu=this,Cu=this.xrControllerRay;this.interiaMovement=!1;var Pu=this.camera.getWorldDirection(new r$n.Vector3).setY(0),Ru=null,Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return Ru;var Bu=Lu.accessibleNodes.filter(function(Xc){if(Xc===Tu.currentPanoIndex)return!1;var _h=Tu.work.observers[Xc];return!(_h.position.distanceTo(Tu.camera.position)>Tu.maxAccessibleDistance)&&(_h.loadable||_h.active)}),Vu=this.model.intersectRaycaster(Cu)[0];if(Vu){var Ou=ta(Bu,function(Xc){var _h=Tu.work.observers[Xc].standingPosition.clone();return _h.clone().sub(Tu.camera.position).setY(0).angleTo(Pu)>Math.PI/2?1/0:_h.distanceTo(Vu.point)},!0),Du=Ou[0];Ou[1]<this.panoTapTriggerRadius&&(Ru=Du)}oo(Ru)&&(Ru=this.getForwardPanoIndexOrNot(Cu));for(var ku=0,Fu=this.locationMotion.keyframes;ku<Fu.length;ku++){var Nu=Fu[ku],Gu=this.panoResourceFromLocationMotionKeyframe(Nu);if(!(Nu.progress<this.locationMotion.progress)&&Gu.panoIndex===Ru){Ru=null;break}}if(this.emit("panoSelected",Ru),oo(Ru))return this.locationMotion.ended===!0&&this.cameraBounce(),Ru;var zu=this.work.observers[Ru];if(!zu.active)return this.panoMeshes[Ru]&&(this.panoMeshes[Ru].setDisabled(!1),this.panoMeshes[Ru].setLoading(!0)),Ru;for(var Hu={effect:"fade"},Uu=Math.PI/6,ju=Math.PI/12,Wu=new r$n.Vector3(0,1,0),Qu=zu.position.clone().setY(0).sub(Lu.position.clone().setY(0)).normalize(),qu=Qu.clone().applyAxisAngle(Wu,Uu),Yu=Qu.clone().applyAxisAngle(Wu,-Uu),Ju=[],_d=[],tp=[],Ku=0,Xu=zu.accessibleNodes;Ku<Xu.length;Ku++)if((Du=Xu[Ku])!==this.currentPanoIndex&&Du!==Ru){var Zu=this.work.observers[Du].position.clone().sub(zu.position).setY(0);Qu.angleTo(Zu)<Uu?tp.push(Zu):qu.angleTo(Zu)<Uu?Ju.push(Zu):Yu.angleTo(Zu)<Uu&&_d.push(Zu)}var _c=(tp.length>0?tp:t$h.__spreadArray(t$h.__spreadArray([],Ju,!0),_d,!0)).slice().sort(function(Xc,_h){return Xc.angleTo(Qu)-_h.angleTo(Qu)})[0];return _c&&_c.angleTo(Pu)>ju&&(Hu.longitude=Math.atan2(-_c.x,-_c.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Hu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Hu.fov=this.defaultFov),this.emit("wantsMoveToPano",Ru,Hu,!0),Ru},$u.prototype.destroy=function(){_u.prototype.destroy.call(this)},$u.prototype.isReady=function(){return!1},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Ru,Lu,Bu=[],Vu=2;Vu<arguments.length;Vu++)Bu[Vu-2]=arguments[Vu];var Ou={},Du={};if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var ku=this.locationMotion.getKeyFrameSegment(Tu),Fu=ku[0],Nu=ku[1],Gu=this.panoResourceFromLocationMotionKeyframe(Fu),zu=this.panoResourceFromLocationMotionKeyframe(Nu),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Uu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ju=new r$n.Vector3().copy(Gu.position),Wu=new r$n.Vector3().copy(zu.position),Qu=this.locationMotion.value.count-Nu.value.count+1;Ou.modelAlpha=this.locationMotion.value.modelAlpha,Ou.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ou.useBlackTransition=zu.effect==="instant",zu.leftPanoPicture&&(Qu<1?Gu.leftPanoPicture&&(Ou.pano0=Gu.leftPanoPicture):Ou.pano0=zu.leftPanoPicture,Ou.pano1=zu.leftPanoPicture),zu.effect==="fade"&&(Ou.pano0&&Gu.leftPanoPicture&&(Ou.pano0={map:Ou.pano0.map,luminanceMap:Ou.pano0.luminanceMap,matrix:Gu.leftPanoPicture.matrix.clone().setPosition(zu.position)}),ju.copy(Wu)),Ou.progress=Qu,Du.distance=this.locationMotion.value.distance,Du.offset=new r$n.Vector3(ju.x+(Wu.x-ju.x)*Qu,ju.y+(Wu.y-ju.y)*Qu,ju.z+(Wu.z-ju.z)*Qu);for(var qu=[],Yu=[],Ju=0,_d=this.locationMotion.keyframes;Ju<_d.length;Ju++){var tp=_d[Ju],Ku=tp.key,Xu=tp.progress;Ku!==void 0&&(qu.push(Ku),Xu>=this.locationMotion.progress&&Yu.push(Ku))}for(var Zu=0,_c=Object.keys(this.panoResources);Zu<_c.length;Zu++){var Xc=_c[Zu];if(!(Yu.indexOf(Xc)>=0)){var _h=this.panoResources[Xc];if(_h.leftPanoPicture){var ip=_h.leftPanoPicture.map;if(ip){if(ip===((Pu=Ou.pano0)===null||Pu===void 0?void 0:Pu.map)||ip===((Ru=Ou.pano1)===null||Ru===void 0?void 0:Ru.map))continue;ip.dispose(),(Lu=_h.leftPanoPicture.luminanceMap)===null||Lu===void 0||Lu.dispose(),_h.leftPanoPicture=null}}qu.indexOf(Xc)>=0||delete this.panoResources[Xc]}}Gu.workCode===zu.workCode?this.currentPanoIndex=Qu<.5?Gu.panoIndex:zu.panoIndex:this.currentPanoIndex=zu.panoIndex,this.emit("movingToPano",Uu.panoIndex,Hu.panoIndex,this.locationMotion.progress),this.tiling.object.visible=!1}else this.tiling.object.visible=this.tileLevelForFov!==!1;this.cameraMotion.ended===!1&&(this.cameraMotion.update(Tu),Du.longitude=this.cameraMotion.value.longitude,Du.latitude=this.cameraMotion.value.latitude,Du.fov=this.cameraMotion.value.fov),ia$1(Ou)===!1&&(this.model.setMaterial(Ou),this.boundingMesh.setMaterial(Ou)),ia$1(Du)===!1&&this.setCamera(Du),Bu[0];var ap=Bu[1];if(ap)if(this.xrManager.session){var hp=this.xrManager.referenceSpace;if(hp){var Ap=this.xrManager.cameraVR,gp=this.xrManager.cameraL,Rp=this.xrManager.cameraR,Sp=[gp,Rp],Dp=ap.getViewerPose(hp),Ep=new r$n.Vector3(0,0,0);if(Dp){var Bp=void 0;switch(this.xrManager.machineType){case"Pico":Bp=this.xrManager.session.renderState.baseLayer;break;case"Oculus":var Ip=this.xrManager.session.renderState.layers;Ip&&(Bp=Ip[0]);break;default:this.xrManager.machineType}var ep=Dp.views;if(!Bp)return void console.error("no layer found");this.renderer.setFramebuffer(Bp.framebuffer);var _f=!1;ep.length!==Ap.cameras.length&&(Ap.cameras.length=0,_f=!0);for(var op=0;op<ep.length;op++){var rp=ep[op],up=Bp.getViewport(rp),cp=Sp[op];cp.matrix.fromArray(rp.transform.matrix);var fp=new r$n.Vector3,vp=new r$n.Quaternion,xp=new r$n.Vector3;cp.matrix.decompose(fp,vp,xp);var mp=new r$n.Vector3,sp=new r$n.Quaternion,lp=new r$n.Vector3;this.camera.matrix.decompose(mp,sp,lp),Ep.copy(mp),cp.matrix.compose(mp,vp,xp),cp.projectionMatrix.fromArray(rp.projectionMatrix),cp.viewport.set(up.x,up.y,up.width,up.height),op===0&&Ap.matrix.copy(cp.matrix),_f===!0&&Ap.cameras.push(cp)}}var $p=this.xrManager.session.inputSources;for(op=0;op<this.xrManager.controllers.length;op++){var Mp=this.xrManager.controllers[op],kp=$p[op];Mp.update(kp,ap,hp)}var Vp=this.xrManager.getController(0),Gp=Vp.position.add(Ep);this.xrControllerRay.set(Gp,new r$n.Vector3(0,0,-1).applyEuler(Vp.rotation));var qp=this.model.intersectRaycaster(this.xrControllerRay);if(qp.length>=1&&qp[0].face){var Wp=qp[0].face.normal,Yp=Wp.clone().multiplyScalar(.05),Kp=qp[0].point.clone().add(Yp);this.intersectMesh.position.copy(Kp);var ev=Kp.clone().add(Yp);if(this.intersectMesh.lookAt(ev),Math.abs(Wp.y)>.99){var Xp=this.camera.position.clone().sub(Kp);this.intersectMesh.rotation.z=-Math.atan2(Xp.z,Xp.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",qp[0],this.intersectMesh)}if(this.camera.pose.distance>.1)for(var Zp=0;Zp<this.work.observers.length;Zp++)(ov=this.panoMeshes[Zp])&&(ov.visible=!1);else{var Tp=this.work.observers[this.currentPanoIndex];if(Tp){var Jp=Tp.visibleNodes.concat(this.currentPanoIndex),nv=this.getForwardPanoIndexOrNot();for(Zp=0;Zp<this.work.observers.length;Zp++){var ov,rv=this.work.observers[Zp];if(ov=this.panoMeshes[Zp])if(rv.loadable||rv.active)if(Jp.indexOf(Zp)!==-1){ov.visible=!0;var hv=ov.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);ov.setCurrent(nv===Zp),ov.setOpacity(hv<.01?0:ho(1.4/hv,.5,.7)),ov.updateTime&&ov.updateTime(Tu,Cu)}else ov.visible=!1,ov.setOpacity(0);else ov.visible=!1,ov.setOpacity(0)}}}this.needsRender=!0}}else console.error("session\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");else console.error("xrFrame\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5")},$u.prototype.render=function(){var Tu=this.xrManager.getCamera(this.camera);this.renderer.render(this.scene,Tu)},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Tu){return this.panoResources[Tu.key]},$u.prototype.prepareForMoveToPano=function(Tu){var Cu=this,Pu={useXRBlackTransition:!0},Ru=_e$3(),Lu=0;return new Promise(function(Bu,Vu){var Ou=setInterval(function(){if((Lu=Math.min(1,(_e$3()-Ru)/1e3))>=1)return Pu.useXRBlackTransition=!1,Pu.progress=0,Cu.model.setMaterial(Pu),clearInterval(Ou),void Bu(!0);Pu.progress=Lu,Cu.model.setMaterial(Pu)},50)})},$u}(Xa),Jl=["Panorama","DepthPanorama","Model"],$l={Floorplan:Aa,Topview:ga$1,Panorama:Xa,VRPanorama:kl,Model:Dl,DepthPanorama:_l,Mapview:zl,XRPanorama:Zl};function eu(_u){for(var $u=0,Tu=Jl;$u<Tu.length;$u++){var Cu=Tu[$u];if(typeof _u=="string"){if(Cu===_u)return!0}else if(_u instanceof fa$1&&_u instanceof $l[Cu])return!0}return!1}var tu=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError","webXRSessionStart","webXRSessionEnd","webXRSelected"];function iu(_u){for(var $u,Tu,Cu={},Pu=0,Ru=_u.split(/(\;|\,)/);Pu<Ru.length;Pu++){var Lu=Ru[Pu].split("="),Bu=($u=Lu[0])===null||$u===void 0?void 0:$u.trim(),Vu=(Tu=Lu[1])===null||Tu===void 0?void 0:Tu.trim();Bu&&Vu&&(Cu[Bu]=Vu)}return Cu}function nu(){for(var _u,$u=document.getElementsByTagName("meta"),Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu];if(Cu.getAttribute("name")==="viewport"){var Pu=iu((_u=Cu.getAttribute("content"))!==null&&_u!==void 0?_u:""),Ru=Number(Pu["initial-scale"]);if(!isNaN(Ru))return Ru}}return 1}var ru=[351,63],ou=[20,20],su=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),au=new Float32Array([0,0,1,0,0,1,1,1]),lu=new Uint8Array([0,1,2,1,3,2]),uu=new r$n.BufferGeometry;uu.setAttribute("position",new r$n.BufferAttribute(su,3)),uu.setAttribute("uv",new r$n.BufferAttribute(au,2)),uu.setIndex(new r$n.BufferAttribute(lu,1));var hu=new r$n.MeshBasicMaterial({transparent:!0,depthTest:!1}),cu=new r$n.Mesh(uu,hu),du=new r$n.Scene;du.add(cu);var pu=new r$n.OrthographicCamera(-.5,.5,.5,-.5,.1,1);pu.position.set(0,0,.5),pu.lookAt(0,0,0);var fu=new r$n.Vector4,Au=new r$n.Vector4;function gu(_u){if(hu.map){var $u=_u.getViewport(fu),Tu=_u.getScissor(Au),Cu=_u.getScissorTest(),Pu=_u.autoClear;_u.setViewport(Tu.x+ou[0]/3,Tu.y+ou[1]/3,ru[0]/3,ru[1]/3),_u.setScissor(Tu.x+ou[0]/3,Tu.y+ou[1]/3,ru[0]/3,ru[1]/3),_u.setScissorTest(!0),_u.autoClear=!1,_u.render(du,pu),_u.setViewport($u),_u.setScissor(Tu),_u.setScissorTest(Cu),_u.autoClear=Pu}else{var Ru=new r$n.Texture,Lu=new Image;Lu.onload=function(){Ru.image=Lu,Ru.wrapS=r$n.ClampToEdgeWrapping,Ru.wrapT=r$n.ClampToEdgeWrapping,Ru.minFilter=r$n.LinearFilter,Ru.needsUpdate=!0,hu.needsUpdate=!0,Lu.onload=function(){}},Lu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",hu.map=Ru}}var mu=new r$n.Box3(new r$n.Vector3(-50,-50,-50),new r$n.Vector3(50,50,50)),vu=function(_u){return _u.replace("//vrlab-public.ljcdn.com/","//vr-public.realsee-cdn.cn/").replace("//vrlab-image4.ljcdn.com/","//vr-image-4.realsee-cdn.cn/").replace("//vrlab-image3.ljcdn.com/","//vr-image-3.realsee-cdn.cn/").replace("//vrlab-image2.ljcdn.com/","//vr-image-2.realsee-cdn.cn/").replace("//vrlab-image1.ljcdn.com/","//vr-image-1.realsee-cdn.cn/")},yu=new r$n.Vector2,bu=new r$n.Frustum,xu=new r$n.Matrix4,wu=new WeakMap,Eu=new WeakMap,Mu=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu=this;if((Gu=_u.call(this)||this).ident=Kr(),Iu.instances[Gu.ident]=Gu,Gu.renderSwitch01=0,Gu.panoIndex=0,Gu.needsRender=!1,Gu.onlyRenderIfNeeds=(Cu=Tu.onlyRenderIfNeeds)===null||Cu===void 0||Cu,Gu.imageOptions=t$h.__assign({},(Pu=Tu.imageOptions)!==null&&Pu!==void 0?Pu:{}),Gu.textureOptions=t$h.__assign({},(Ru=Tu.textureOptions)!==null&&Ru!==void 0?Ru:{}),Gu.poweredByRealsee=(Lu=Tu.poweredByRealsee)===null||Lu===void 0||Lu,Gu.extraElements=[],Gu.controllerInits={Panorama:Object.assign({},Tu.panorama),Model:Object.assign({},Tu.model),Floorplan:Object.assign({},Tu.floorplan),Topview:Object.assign({},Tu.topview),Mapview:Object.assign({},Tu.mapview),DepthPanorama:Object.assign({},Tu.depthPanorama),VRPanorama:Object.assign({},Tu.vrPanorama),XRPanorama:Object.assign({},Tu.xrPanorama)},Gu.fps={testCount:0,testTime:_e$3()},Gu.modeChangeDuration=(Bu=Tu.modeChangeDuration)!==null&&Bu!==void 0?Bu:800,Gu.panoramaLikeSavedPose={},typeof window!="undefined")if(Tu.renderer)Tu.renderer instanceof It$1&&Gu.throwError(new Error("cannot render a internal renderer")),Gu.renderer=Tu.renderer;else try{Gu.renderer=new It$1({preserveDrawingBuffer:Tu.preserveDrawingBuffer,backgroundColor:Tu.backgroundColor,backgroundAlpha:Tu.backgroundAlpha,antialias:Tu.antialias,webgl2:Tu==null?void 0:Tu.webgl2});var zu=nu();Gu.renderer.setPixelRatio(zu===1?window.devicePixelRatio:1),Gu.renderer.setSize(512,512)}catch(tp){tp instanceof Error&&Gu.throwError(tp)}Gu.getPixelsRenderTarget=new r$n.WebGLRenderTarget(1,1,{encoding:(Ou=(Vu=Gu.renderer)===null||Vu===void 0?void 0:Vu.outputEncoding)!==null&&Ou!==void 0?Ou:r$n.sRGBEncoding}),Gu.scissor=Object.assign({left:0,bottom:0,width:1,height:1},Tu.scissor),Gu.camera=new Lt$1(80),Gu.scene=new St$2,Gu.lastLoadWorkTask=Promise.resolve(),Gu.requestProxy=(Du=Tu.requestProxy)!==null&&Du!==void 0?Du:vu,Gu.networkSubscribe=new tt$4,Gu.networkSubscribe.on("network",function(tp,Ku,Xu,Zu){var _c;Gu.emit("network",tp,Ku,Xu,Zu),(_c=Gu.analysis)===null||_c===void 0||_c.network(Gu.work,tp,Ku,Xu,Zu)}),Gu.model=new uo({allowHosts:[],requestProxy:Gu.requestProxy,networkSubscribe:Gu.networkSubscribe});var Hu=Ks(mu);Hu.name="model_empty",Gu.model.add(Hu),Gu.model.visible=!1,Gu.readyCallbacks=[],Gu.modelPending=!1,Gu.syncingState=!1,Gu.scene.add(Gu.model),Gu.helperGroup=new r$n.Group,Gu.helperGroup.name="helper",Gu.scene.add(Gu.helperGroup),Gu.videoTexture=new r$n.VideoTexture(Tu.videoInstance||function(){var tp=document.createElement("video");tp.loop=!0,tp.autoplay=!0,tp.playsInline=!0,tp.muted=!0,tp.crossOrigin="";var Ku=function(){document.removeEventListener("touchstart",Ku,!1),document.removeEventListener("mousedown",Ku,!1),tp.muted=!1};return document.addEventListener("touchstart",Ku,!1),document.addEventListener("mousedown",Ku,!1),tp}()),function(tp){(Ku=new r$n.DirectionalLight(16777215,.5)).position.copy(new r$n.Vector3(1,1,1)),tp.add(Ku);var Ku=new r$n.DirectionalLight(16777215,.3);tp.add(Ku),Ku=new r$n.AmbientLight(16777215,.3),tp.add(Ku)}(Gu.scene),Gu.state={mode:(ku=Gu.currentMode)!==null&&ku!==void 0?ku:"Panorama",panoIndex:(Fu=Gu.panoIndex)!==null&&Fu!==void 0?Fu:0,longitude:Gu.camera.pose.longitude,latitude:Gu.camera.pose.latitude,fov:Gu.camera.pose.fov,offset:Gu.camera.pose.offset.clone(),distance:Gu.camera.pose.distance},Gu.stateSynced=!1,Gu._enableIOSEDR=!1,Gu.destroyed=!1,Gu.paused=!0,typeof window!="undefined"&&(Tu.play!==!1&&Gu.play(),((Nu=Tu.initialBasisLoader)!==null&&Nu!==void 0&&Nu)!==!1&&(typeof Tu.initialBasisLoader=="string"?Gu.initBasisLoader(Tu.initialBasisLoader):Gu.initBasisLoader()),Gu.stopAnimationLoop=at$4.shared.add(function(tp,Ku){for(var Xu=[],Zu=2;Zu<arguments.length;Zu++)Xu[Zu-2]=arguments[Zu];Gu.updateTime.apply(Gu,t$h.__spreadArray([tp,Ku],Xu,!1))},!1,0,10));var Uu=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Gu.currentMode==="VRPanorama"&&Gu.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",Uu,!1),Gu.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",Uu,!1)},Gu.plugins={},Tu.plugins&&Tu.plugins.length)for(var ju=0,Wu=Tu.plugins;ju<Wu.length;ju++){var Qu=Wu[ju];if(typeof Qu=="function")Qu(Gu);else if(Array.isArray(Qu)){var qu=Qu[0],Yu=Qu[1],Ju=Qu[2];if(typeof qu=="function"){var _d=qu(Gu,Ju);typeof Yu=="string"&&(Gu.plugins[Yu]?Gu.throwError(new Error("plugin name ".concat(Yu," is exists."))):Gu.plugins[Yu]=_d)}}}return Gu}return t$h.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.dispose=function(){var Tu,Cu;if(this.destroyed!==!0){delete Iu.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),(Tu=this.renderer)===null||Tu===void 0||Tu.setAnimationLoop(null),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Pu=this.getElement();Pu&&Pu.parentNode&&Pu.parentNode.removeChild(Pu),this.scene.remove(this.model);var Ru=this.model.getMaterial();Ru&&(Ru.pano0&&Ru.pano0.map.dispose(),Ru.pano1&&Ru.pano1.map!==((Cu=Ru.pano0)===null||Cu===void 0?void 0:Cu.map)&&Ru.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof It$1&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},$u.prototype.setScissor=function(Tu){Object.assign(this.scissor,Tu),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty($u.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(Tu){this.helperGroup.visible!==Tu&&(this.helperGroup.visible=Tu,this.emit("helpersVisibleChange",Tu),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(Tu){this._enableIOSEDR!==Tu&&(this._enableIOSEDR=Tu,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(Tu){var Cu,Pu;if(Tu){if(!this.screenBuffer){var Ru=this.getDrawingBufferSize(yu);this.screenBuffer=new r$n.WebGLRenderTarget(Ru.x,Ru.y,{encoding:(Pu=(Cu=this.renderer)===null||Cu===void 0?void 0:Cu.outputEncoding)!==null&&Pu!==void 0?Pu:r$n.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),$u.prototype.updateConfiguration=function(Tu){var Cu=!1;Tu.panorama&&(Object.assign(this.controllerInits.Panorama,Tu.panorama),this.currentMode==="Panorama"&&(Cu=!0)),Tu.model&&(Object.assign(this.controllerInits.Model,Tu.model),this.currentMode==="Model"&&(Cu=!0)),Tu.floorplan&&(Object.assign(this.controllerInits.Floorplan,Tu.floorplan),this.currentMode==="Floorplan"&&(Cu=!0)),Tu.topview&&(Object.assign(this.controllerInits.Topview,Tu.topview),this.currentMode==="Topview"&&(Cu=!0)),Tu.mapview&&(Object.assign(this.controllerInits.Mapview,Tu.topview),this.currentMode==="Mapview"&&(Cu=!0)),Tu.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,Tu.depthPanorama),this.currentMode==="DepthPanorama"&&(Cu=!0)),Tu.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,Tu.vrPanorama),this.currentMode==="VRPanorama"&&(Cu=!0)),Tu.imageOptions&&(Object.assign(this.imageOptions,Tu.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Cu=!0)),Cu&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},$u.prototype.appendTo=function(Tu,Cu){if(Cu===void 0&&(Cu={}),this.renderer)if(this.renderer instanceof It$1){var Pu=this.getElement();if(Pu){Tu.appendChild(Pu),this.refresh(Cu);var Ru=window.getComputedStyle(Tu).position;Ru!=="relative"&&Ru!=="absolute"&&Ru!=="fixed"&&Ru!=="sticky"&&(Tu.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},$u.prototype.refresh=function(Tu,Cu){if(Tu===void 0&&(Tu={}),this.renderer){var Pu=this.getElement();if(Pu){var Ru=Pu.parentNode;if(Ru&&Ru.nodeName){var Lu=Tu.width,Bu=Lu===void 0?Ru.offsetWidth:Lu,Vu=Tu.height,Ou=Vu===void 0?Ru.offsetHeight:Vu;this.renderer instanceof It$1&&(Cu&&this.renderer.setPixelRatio(Cu),this.renderer.setSize(Bu,Ou))}var Du=this.renderer.getSize(new r$n.Vector2);this.camera.aspect=Du.x*this.scissor.width/(Du.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},$u.prototype.addExtraElement=function(Tu){var Cu=this;return this.extraElements.indexOf(Tu)===-1&&(this.extraElements.push(Tu),this.controller&&this.controller.bindExtraElement(Tu)),function(){return Cu.removeExtraElement(Tu)}},$u.prototype.removeExtraElement=function(Tu){var Cu=this.extraElements.indexOf(Tu);Cu!==-1&&(this.extraElements.splice(Cu,1),this.controller&&this.controller.unbindExtraElement(Tu))},$u.prototype.getPose=function(){var Tu=this.camera.copyPose(),Cu=Tu.longitude,Pu=Tu.latitude,Ru=Tu.fov,Lu=Tu.offset,Bu=Tu.distance;return{longitude:Cu,latitude:Pu,fov:Ru,offset:Lu.clone(),distance:Bu}},$u.prototype.getSize=function(Tu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(Tu),Tu.x*=this.scissor.width,Tu.y*=this.scissor.height,Tu},$u.prototype.getDrawingBufferSize=function(Tu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(Tu),Tu.x*=this.scissor.width,Tu.y*=this.scissor.height,Tu},$u.prototype.updateCamera=function(Tu,Cu,Pu){return Pu===void 0&&(Pu=!0),this.controller?this.controller.updateCamera(Tu,Cu,Pu):Promise.reject(new Error("controller is not initialized."))},$u.prototype.getLongitudeAndLatitude=function(){var Tu=this.getPose();return{longitude:Tu.longitude,latitude:Tu.latitude}},$u.prototype.getOffset=function(){return this.getPose().offset},$u.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var Tu=this.work.observers[this.panoIndex],Cu=new r$n.Object3D;return Cu.position.copy(Tu.position),Cu.quaternion.copy(Tu.quaternion),Cu.scale.set(1,1,1),Cu.updateMatrixWorld(!0),function(Pu,Ru){var Lu=new r$n.Vector3(0,0,-1);Lu.applyQuaternion(Pu.quaternion);var Bu=Ru.quaternion.clone().inverse();return Lu.applyQuaternion(Bu),{theta:Math.atan2(Lu.x,-Lu.z),phi:-Math.asin(Lu.y),lookAtVector:Lu}}(this.camera,Cu)}},$u.prototype.initBasisLoader=function(Tu){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof Tu=="string"&&Ei.setTranscoderPath(Tu),Ei.workerConfig.format||Ei.detectSupport(this.renderer),Ei._allocateWorker(0)}catch(Cu){Cu instanceof Error&&this.throwError(Cu)}},Object.defineProperty($u.prototype,"work",{get:function(){var Tu=Eu.get(this);if(Tu&&wo.get(Tu))return Tu},enumerable:!1,configurable:!0}),$u.prototype.load=function(Tu,Cu,Pu,Ru){var Lu=this;if(Ru===void 0&&(Ru=!0),!this.renderer)throw new Error("renderer is not initialized");var Bu=this.lastLoadWorkTask.then(function(){return!(Vu=Tu)||typeof Vu!="object"&&typeof Vu!="function"||typeof Vu.then!="function"?Lu.load_(Tu,Cu,Pu,Ru):Tu.then(function(Ou){return Lu.load_(Ou,Cu,Pu,Ru)});var Vu});return this.lastLoadWorkTask=Bu.catch(function(Vu){Lu.throwError(Vu)}),Bu},$u.prototype.load_=function(Tu,Cu,Pu,Ru){var Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu=this;Ru===void 0&&(Ru=!0);var Hu,Uu,ju,Wu=Co(Tu),Qu=this.work;Cu===void 0&&(Cu=Qu?"inherit":"initial"),Cu==="inherit"?(Hu=typeof this.panoIndex=="number"&&Wu.observers[this.panoIndex]?this.panoIndex:Wu.initial.panoIndex,Uu=(Lu=this.currentMode)!==null&&Lu!==void 0?Lu:Wu.initial.mode,ju={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Cu==="initial"?(Uu=(Bu=this.currentMode)!==null&&Bu!==void 0?Bu:Wu.initial.mode,Hu=Wu.initial.panoIndex,ju=Uu===$u.Mode.Panorama||Uu===$u.Mode.DepthPanorama||Uu===$u.Mode.Model||Uu===$u.Mode.VRPanorama||Uu===$u.Mode.XRPanorama?{longitude:Wu.initial.longitude,latitude:Wu.initial.latitude,fov:Wu.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Hu=(Vu=Cu.panoIndex)!==null&&Vu!==void 0?Vu:Wu.initial.panoIndex,Uu=(Du=(Ou=Cu.mode)!==null&&Ou!==void 0?Ou:this.currentMode)!==null&&Du!==void 0?Du:"Panorama",ju={longitude:(ku=Cu.longitude)!==null&&ku!==void 0?ku:Wu.initial.longitude,latitude:(Fu=Cu.latitude)!==null&&Fu!==void 0?Fu:Wu.initial.latitude,fov:(Nu=Cu.fov)!==null&&Nu!==void 0?Nu:Wu.initial.fov}),this.emit("willLoad",Tu,Wu,{panoIndex:Hu,mode:Uu,longitude:ju.longitude,latitude:ju.latitude,fov:ju.fov});var qu=function(){var Ju;zu.panoIndex=Hu,zu.panoramaLikeSavedPose.longitude=Wu.initial.longitude,zu.panoramaLikeSavedPose.latitude=Wu.initial.latitude,zu.panoramaLikeSavedPose.fov=Wu.initial.fov;var _d=zu.controller?Pu!=null?Pu:zu.modeChangeDuration:0,tp=t$h.__assign(t$h.__assign({initial:[Hu,ju,_d,Ru]},zu.commonParams()),zu.controllerInits[Uu]);zu.controller?zu.controller.updateWork(Wu,Hu,ju,_d,Ru)===!1&&(zu.controller.destroy(),zu.controller=zu.applyController(Uu,tp)):zu.controller=zu.applyController(Uu,tp),zu.emit("load",Tu,Wu,{panoIndex:Hu,mode:Uu,longitude:ju.longitude,latitude:ju.latitude,fov:ju.fov}),(Ju=zu.analysis)===null||Ju===void 0||Ju.work(Wu)},Yu=function(Ju){var _d;Ju===void 0&&(Ju=Qe$1),Wu.model&&(zu.model.name!==((_d=Wu.model)===null||_d===void 0?void 0:_d.file)?(zu.emit("modelWillLoad",Wu.model),zu.loadModel(Wu.model,Wu.allowHosts,Ju,!0)):Ju&&Ju())};return Eu.set(this,Wu),Uu===$u.Mode.Floorplan||Uu===$u.Mode.Topview||Uu===$u.Mode.Mapview||Uu===$u.Mode.Model?Yu(function(){qu(),zu.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Wu.initial.fov,longitude:Wu.initial.longitude,latitude:Wu.initial.latitude,offset:Wu.observers[Wu.initial.panoIndex].position}),this.needsRender=!0),qu(),(Gu=this.controller)===null||Gu===void 0||Gu.once("panoLoaded",function(){zu.needsRender=!0,zu.emit("cameraUpdate",zu.camera.copyPose(),Ru),Yu()})),this.ready().then(function(){zu.emit("loaded",Tu,zu.work)})},$u.prototype.changeMode=function(Tu,Cu,Pu,Ru,Lu){var Bu=this;if(Cu===void 0&&(Cu={}),Pu===void 0&&(Pu=this.modeChangeDuration),Ru===void 0&&(Ru=!0),Lu===void 0&&(Lu=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Vu,Ou){if(!$u.Mode.hasOwnProperty(Tu)){var Du=new Error('mode "'.concat(Tu,'" is not existed'));return Bu.throwError(Du),void Ou(Du)}if((Tu===$u.Mode.Floorplan||Tu===$u.Mode.Topview||Tu===$u.Mode.Mapview||Tu===$u.Mode.Model)&&(oo(Bu.model)||Bu.model.loaded!==!0))return Du=new Error("model is not ready."),Bu.throwError(Du),void Ou(Du);if(oo(Bu.controller))return Du=new Error("controller is not ready."),Bu.throwError(Du),void Ou(Du);var ku=Bu.controller,Fu=Bu.currentMode,Nu=function(){var zu,Hu,Uu,ju;if(Bu.emit("wantsChangeMode",Tu,Fu))Ou(new Error("change mode canceled."));else{if(Bu.controller&&Lu===!1&&Fu===Tu)Tu===$u.Mode.Panorama||Tu===$u.Mode.DepthPanorama||Tu===$u.Mode.Model||Tu===$u.Mode.VRPanorama||Tu===$u.Mode.XRPanorama?typeof Cu.panoIndex=="number"&&Cu.panoIndex!==Bu.panoIndex?Bu.controller.moveToPano((Hu=(zu=Cu.panoIndex)!==null&&zu!==void 0?zu:Bu.panoIndex)!==null&&Hu!==void 0?Hu:0,t$h.__assign({duration:Pu},Cu),Ru):Bu.controller.updateCamera(Cu,Pu,Ru).catch(Qe$1):(typeof Cu.panoIndex=="number"&&Cu.panoIndex!==Bu.panoIndex&&(Bu.panoIndex=Cu.panoIndex),Bu.controller.updateCamera(Cu,Pu,Ru).catch(Qe$1));else{ku.destroy();var Wu=(ju=(Uu=Cu.panoIndex)!==null&&Uu!==void 0?Uu:Bu.panoIndex)!==null&&ju!==void 0?ju:0,Qu=eu(Tu)?Bu.panoramaLikeSavedPose:{};Tu===$u.Mode.Mapview&&(Qu.longitude=Bu.panoramaLikeSavedPose.longitude),typeof Cu.longitude!="number"&&typeof Cu.latitude!="number"||(Qu.longitude=Cu.longitude,Qu.latitude=Cu.latitude),typeof Cu.fov=="number"&&(Qu.fov=Cu.fov);var qu=t$h.__assign(t$h.__assign({initial:[Wu,Qu,Pu,Ru]},Bu.commonParams()),Bu.controllerInits[Tu]);Bu.saveControllerPose(ku),Bu.controller=Bu.applyController(Tu,qu);var Yu=$l[Tu].initAnimationEndPose(qu);Bu.emit("modeChange",Tu,Fu,Wu,Yu,Ru)}Vu()}};if(Tu===$u.Mode.VRPanorama)Bu.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(zu){if(zu=="granted")return Promise.resolve();var Hu=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(Hu)}):Promise.resolve()).then(function(){return Nu()}).catch(function(zu){zu instanceof Error&&(Bu.exitFullscreen(),Bu.throwError(zu),Ou(zu))});else if(Tu===$u.Mode.XRPanorama){var Gu=at$4.shared.getContext();Gu?Gu.end():function(){if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then(function(Hu){return Hu?Promise.resolve():Promise.reject()}).then(function(){return navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(function(Hu){return Promise.resolve(Hu)})});var zu=new Error("Request XR Permission denied.");return Promise.reject(zu)}().then(function(zu){at$4.shared.setContext(zu),Nu()}).catch(function(zu){zu instanceof Error&&(Bu.throwError(zu),Ou(zu))}),Bu.on("webXRSessionEnd",function(){Bu.changeMode("Panorama")})}else Nu()})},$u.prototype.getPixels=function(Tu,Cu,Pu,Ru,Lu){if(Lu===void 0&&(Lu=1),!this.renderer)throw new Error("renderer is not initialized.");var Bu=this.getPixelsRenderTarget,Vu=this.renderer.getSize(new r$n.Vector2);Tu=ho(Tu,Math.floor(Pu/2),Math.floor(Vu.x-Pu)),Cu=ho(Cu,Math.floor(Ru/2),Math.floor(Vu.y-Ru)),Bu.setSize(Pu*Lu,Ru*Lu),this.renderer.setRenderTarget(Bu),this.camera.setViewOffset(Vu.width,Vu.height,Tu,Vu.height-Cu-Ru,Pu,Ru),this.controller?this.controller.render():this.renderer.render(this.scene,this.camera);var Ou=new Uint8Array(Pu*Lu*Ru*Lu*4);return this.renderer.readRenderTargetPixels(Bu,0,0,Pu*Lu,Ru*Lu,Ou),this.renderer.setRenderTarget(null),this.camera.clearViewOffset(),Ou},$u.prototype.getElement=function(){var Tu;return(Tu=this.renderer)===null||Tu===void 0?void 0:Tu.domElement},$u.prototype.render=function(Tu,Cu){var Pu=this;if(Cu===void 0&&(Cu=!1),!this.renderer)return null;if(Cu){var Ru=this.renderer.getSize(yu);this.scene.traverseVisible(function(Bu){Bu.setResolution&&Bu.setResolution(Ru.x,Ru.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Lu=this.getDrawingBufferSize(yu);return this.screenBuffer.setSize(Lu.x,Lu.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.currentMode!=="XRPanorama"&&this.poweredByRealsee&&gu(this.renderer),this.renderer.setRenderTarget(null),Tu&&at$4.shared.add(Tu,!0),this.screenBuffer}return this.aroundScissor(function(){Pu.renderer&&(Pu.controller?Pu.controller.render():Pu.renderer.render(Pu.scene,Pu.camera),Pu.poweredByRealsee&&Pu.currentMode!=="VRPanorama"&&Pu.currentMode!=="XRPanorama"&&gu(Pu.renderer)),Tu&&at$4.shared.add(Tu,!0)}),null},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Ru=this,Lu=[],Bu=2;Bu<arguments.length;Bu++)Lu[Bu-2]=arguments[Bu];if(!this.destroyed){this.syncingState=this.syncState(Tu,Cu),this.controller&&(Pu=this.controller).updateTime.apply(Pu,t$h.__spreadArray([Tu,Cu],Lu,!1)),this.syncingState=!1;var Vu=new r$n.Vector2(512,512),Ou=new r$n.Vector2(512,512);this.renderer&&(this.renderer.getSize(Vu),Vu.x*=this.scissor.width,Vu.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Ou),Ou.x*=this.scissor.width,Ou.y*=this.scissor.height);var Du=[];if(xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.renderer&&this.model.update(this.renderer,this.camera),bu.setFromProjectionMatrix(xu),this.scene.traverse(function(ju){if(ju.setResolution&&ju.setResolution(Vu.x,Vu.y),ju.mixer instanceof r$n.AnimationMixer){var Wu=wu.get(ju.mixer);Wu||(Wu=new r$n.Clock,wu.set(ju.mixer,Wu)),ju.mixer.update(Wu.getDelta())}(ju instanceof r$n.Mesh||ju instanceof r$n.Line||ju instanceof r$n.Points)&&(ju instanceof r$n.ImmediateRenderObject||!ju.frustumCulled||bu.intersectsObject(ju))&&Du.push(ju)}),Ou.width*Ou.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var ku=void 0;if(this.onlyRenderIfNeeds!==!0)ku=this.render();else{for(var Fu=0,Nu=Du;Fu<Nu.length;Fu++){var Gu=Nu[Fu],zu=function(ju){ju.needsRender===!0?(ju.needsRender=!1,Ru.needsRender=!0):ju.mixer&&ju.mixer.stats.actions.inUse>0&&(Ru.needsRender=!0)};zu(Gu),Gu.traverseAncestors(zu)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(ku=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Ru.controller.postProcessing(Ru.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",ku!==void 0)}if(this.fps.testTime&&Tu-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=Tu,this.fps.testCount=0,this.renderer){var Hu=this.renderer.getContext(),Uu=Us(Hu);Uu&&this.throwError(Uu)}}},$u.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof It$1&&this.renderer.clear(!0,!0,!0)},$u.prototype.play=function(){this.needsRender=!0,this.paused=!1},$u.prototype.moveToPano=function(Tu,Cu,Pu){Cu===void 0&&(Cu={}),Pu===void 0&&(Pu=!0);var Ru=this,Lu=Ru.controller,Bu=Ru.currentMode,Vu=Ru.renderer;return Lu?Vu?(Bu===$u.Mode.Floorplan||Bu===$u.Mode.Topview||Bu===$u.Mode.Mapview?oo(Tu)||(this.panoIndex=Tu,this.changeMode($u.Mode.Panorama,Cu,void 0,Pu)):Lu.moveToPano(Tu,Cu,Pu),this.ready()):(this.throwError(new Error("renderer is not initialized.")),Promise.resolve()):(this.throwError(new Error("controller is not initialized.")),Promise.resolve())},$u.prototype.preloadPano=function(Tu,Cu){var Pu=this;if(Cu===void 0&&(Cu=Qe$1),!this.work)return Promise.reject(new Error("work never loaded"));var Ru=this.work.observers[Tu],Lu=this.work.allowHosts,Bu=_e$3();return Promise.all(["right","left","up","down","front","back"].map(function(Vu){var Ou=t$h.__assign({key:"pano.".concat(Tu,".").concat(Vu),basisLoaderInitialized:Ei.isInitialized()},ii(Pu.imageOptions,["size","format","quality","mappings"])),Du=Ru.images[Vu];return function(ku,Fu){Fu===void 0&&(Fu={});var Nu=_e$3(),Gu=ku;return Promise.resolve().then(function(){return Fu.requestProxy?Fu.requestProxy(ku):ku}).then(function(zu){return/^https\:/.test(location.href)&&/^http\:/.test(zu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(zu,"'. This request was automatically upgraded to HTTPS")),zu.replace(/^http\:/,"https:")):zu}).catch(function(zu){var Hu,Uu=new Ge(Gu,"Link",zu&&zu.message?String(zu.message):String(zu));return(Hu=Fu.networkSubscribe)===null||Hu===void 0||Hu.emit("network",ku,"Link","proxy-error",Uu.message),Promise.reject(Uu)}).then(function(zu){return zu in nt$4?nt$4[zu]:nt$4[zu]=new Promise(function(Hu,Uu){var ju,Wu=Fu.allowHosts?je$1.concat(Fu.allowHosts):je$1.slice(),Qu=et$2(zu);if(location.hostname.length!==0&&!ze(location.hostname)&&je$1.filter(function(tp){return Ke(tp,location.hostname)}).length===0&&!ze(Qu)&&Wu.filter(function(tp){return Ke(tp,Qu)}).length===0){var qu=new Ye(zu,"Link","request host(".concat(Qu,") is not allowed"));return Uu(qu),void((ju=Fu.networkSubscribe)===null||ju===void 0||ju.emit("network",zu,"Link","forbidden",qu.message))}var Yu=document.createElement("link");Yu.href=zu,Yu.rel=Yu.relList&&Yu.relList.supports("prefetch")?"prefetch":"preload",Yu.as="fetch",Yu.crossOrigin="";var Ju=document.head||document.getElementsByTagName("head")[0];Ju&&Ju.appendChild(Yu);var _d=!1;Yu.onload=function(){var tp;if(_d!==!0){_d=!0,Hu();var Ku=_e$3(),Xu={origin:Gu,source:zu,requestTime:Nu,responseTime:Ku,costs:Ku-Nu,headers:{}};(tp=Fu.networkSubscribe)===null||tp===void 0||tp.emit("network",zu,"Link","preload",JSON.stringify(Xu))}},Yu.onerror=function(tp){var Ku;if(_d!==!0){_d=!0;var Xu=new We$1(zu,"Link",0);Uu(Xu),(Ku=Fu.networkSubscribe)===null||Ku===void 0||Ku.emit("network",zu,"Link","error",Xu.message)}}})})}(Pu.imageOptions.transform?Pu.imageOptions.transform(Du,Ou):ct$3(Du,Ou),{allowHosts:Lu,requestProxy:Pu.requestProxy,networkSubscribe:Pu.networkSubscribe})})).then(function(){var Vu=_e$3()-Bu;return Cu(Vu),Vu})},$u.prototype.project2d=function(Tu,Cu){if(Cu===void 0&&(Cu=!1),!this.renderer)return null;if(this.model.empty===!1&&Cu){var Pu=this.camera.position,Ru=Tu.clone().sub(Pu),Lu=new r$n.Raycaster(Pu,Ru.clone().normalize()),Bu=this.model.intersectRaycaster(Lu)[0];if(Bu&&Bu.distance+.01<Ru.length())return null}var Vu=Tu.clone().project(this.camera);if(Math.abs(Vu.z)>1)return null;var Ou=this.renderer.getSize(new r$n.Vector2),Du=Ou.x*this.scissor.width,ku=Ou.y*this.scissor.height,Fu=Ou.x*this.scissor.left+(Vu.x+1)/2*Du,Nu=Ou.y*(1-this.scissor.bottom-this.scissor.height)+(1-Vu.y)/2*ku;return new r$n.Vector2(Fu,Nu)},$u.prototype.getRenderObjects=function(Tu){xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bu.setFromProjectionMatrix(xu),Tu||(Tu=this.scene);var Cu=[];return Tu.traverseVisible(function(Pu){(Pu instanceof r$n.Mesh||Pu instanceof r$n.Line||Pu instanceof r$n.Points)&&(Pu instanceof r$n.ImmediateRenderObject||!Pu.frustumCulled||bu.intersectsObject(Pu))&&Cu.push(Pu)}),Cu},$u.prototype.getCurrentState=function(){return t$h.__assign(t$h.__assign({},this.getPose()),{mode:this.currentMode||$u.Mode.Panorama,panoIndex:this.panoIndex||0})},$u.prototype.setState=function(Tu,Cu,Pu){var Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu;Cu===void 0&&(Cu=!1),Pu===void 0&&(Pu=!0),!(Tu=Object.assign({},Tu)).offset||Tu instanceof r$n.Vector3||(Tu.offset=new r$n.Vector3(Tu.offset.x,Tu.offset.y,Tu.offset.z));var Gu,zu,Hu,Uu,ju,Wu=(Ru=Tu.panoIndex)!==null&&Ru!==void 0?Ru:this.state.panoIndex,Qu=(Lu=Tu.mode)!==null&&Lu!==void 0?Lu:this.state.mode;if(this.work)if(this.work.observers[Wu])if(Tu.mode!==$u.Mode.Floorplan&&Tu.mode!==$u.Mode.Topview&&Tu.mode!==$u.Mode.Mapview&&Tu.mode!==$u.Mode.Model||!oo(this.model)&&this.model.loaded===!0){if(this.state.mode!==Qu){if(Qu==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var qu=void 0;qu=eu(this.state.mode)&&eu(Qu)?t$h.__assign({},this.state):eu(Qu)?t$h.__assign({},this.panoramaLikeSavedPose):Qu===$u.Mode.Mapview?{longitude:this.panoramaLikeSavedPose.latitude}:t$h.__assign({},Tu),typeof Tu.longitude=="number"&&(qu.longitude=Tu.longitude),typeof Tu.latitude=="number"&&(qu.latitude=Tu.latitude),typeof Tu.fov=="number"&&(qu.fov=Tu.fov);var Yu=t$h.__assign(t$h.__assign({initial:[Wu,qu,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[Qu]),Ju=$l[Qu].initAnimationEndPose(Yu);Gu=Ju.longitude,zu=Ju.latitude,Hu=Ju.fov,Uu=Ju.offset,ju=Ju.distance}else Gu=(Bu=Tu.longitude)!==null&&Bu!==void 0?Bu:this.state.longitude,zu=(Vu=Tu.latitude)!==null&&Vu!==void 0?Vu:this.state.latitude,Hu=(Ou=Tu.fov)!==null&&Ou!==void 0?Ou:this.state.fov,Uu=(Du=Tu.offset)!==null&&Du!==void 0?Du:this.state.offset,ju=(ku=Tu.distance)!==null&&ku!==void 0?ku:this.state.distance;var _d={panoIndex:Wu,mode:Qu,longitude:Gu,latitude:zu,fov:Hu,offset:Uu,distance:ju};this.emit("setState",_d),$s(this.state,_d)||(this.controller&&_d.mode==="VRPanorama"&&_d.mode!==this.state.mode?(Js(this.state,_d),this.changeMode("VRPanorama")):this.controller&&_d.mode==="XRPanorama"&&_d.mode!==this.state.mode?(Js(this.state,_d),this.changeMode("XRPanorama")):(Js(this.state,_d),this.controller&&(this.controller.userAction=Pu),Cu&&this.state.mode===_d.mode&&(this.syncingState=this.syncState(_e$3(),0,Cu),this.syncingState&&((Fu=this.controller)===null||Fu===void 0||Fu.updateTime(_e$3(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Pu),(Nu=this.analysis)===null||Nu===void 0||Nu.state(this.work,this.state)))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},$u.prototype.aroundScissor=function(Tu){if(this.renderer)if(this.state.mode!=="XRPanorama"){var Cu=new r$n.Vector2,Pu=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Pu){this.renderer.getSize(Cu);var Ru=Math.floor(Cu.x*this.scissor.left),Lu=Math.floor(Cu.y*this.scissor.bottom),Bu=Math.floor(Cu.x*this.scissor.width),Vu=Math.floor(Cu.y*this.scissor.height);this.renderer.setViewport(Ru,Lu,Bu,Vu),this.renderer.setScissor(Ru,Lu,Bu,Vu),this.renderer.setScissorTest(!0)}Tu(),Pu&&(this.renderer.setViewport(0,0,Cu.x,Cu.y),this.renderer.setScissor(0,0,Cu.x,Cu.y),this.renderer.setScissorTest(!1))}else Tu()},$u.prototype.syncState=function(Tu,Cu,Pu){Pu===void 0&&(Pu=!1);var Ru=this.stateSynced;if(this.stateSynced=!1,!this.work||!this.controller)return!1;if(this.state.mode!==this.currentMode){var Lu={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Lu,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Bu=this.currentMode;if(!(Bu===$u.Mode.Floorplan||Bu===$u.Mode.Topview||Bu===$u.Mode.Mapview||Bu===$u.Mode.Model)||!this.modelPending){var Vu=this.readyCallbacks.slice();this.readyCallbacks.length=0;for(var Ou=0,Du=Vu;Ou<Du.length;Ou++){var ku=Du[Ou];this.controller instanceof $l.Panorama?ku.tile!==!0||this.controller.isTileReady()?ku():this.readyCallbacks.push(ku):ku()}}}if(this.controller instanceof $l.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Fu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Fu,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Fu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance},this.controller.moveToPano(this.state.panoIndex,Fu,!1),!0;if(this.controller instanceof $l.Topview||this.controller instanceof $l.Mapview){var Nu=1,Gu=Pu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,Nu),zu=Pu?new r$n.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$n.Vector3(Ys(this.camera.pose.offset.x,this.state.offset.x,.2),Ys(this.camera.pose.offset.y,this.state.offset.y,.2),Ys(this.camera.pose.offset.z,this.state.offset.z,.2));if(Vs(Gu,this.camera.pose.fov)||Hs(zu,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Gu},0).catch(Qe$1),this.controller.locationMotion.set({x:zu.x,y:zu.y,z:zu.z},0).catch(Qe$1),!0}else{Nu=1;var Hu=Math.PI/45,Uu=(Gu=Pu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,Nu),Pu?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Qu,qu,Yu){if(Qu.longitude===qu.longitude&&Qu.latitude===qu.latitude)return{longitude:qu.longitude,latitude:qu.latitude};var Ju=Gs(Qu.longitude),_d=Qu.latitude,tp=Gs(qu.longitude),Ku=qu.latitude;tp-Ju>Ws?Ju+=Xs:Ju-tp>Ws&&(Ju-=Xs);var Xu=Yu/Math.sqrt(Math.pow(tp-Ju,2)+Math.pow(Ku-_d,2));return Xu>=1?{longitude:qu.longitude,latitude:qu.latitude}:{longitude:Ju+(tp-Ju)*Xu,latitude:_d+(Ku-_d)*Xu}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Hu)),ju=Uu.longitude,Wu=Uu.latitude;if(Vs(ju,this.camera.pose.longitude,2*Math.PI)||Vs(Wu,this.camera.pose.latitude)||Vs(Gu,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:ju,latitude:Wu,fov:Gu},0).catch(Qe$1),!0}return this.stateSynced=!0,Ru===!1&&this.emit("stateSynced",this.state),!1},$u.prototype.ready=function(Tu){var Cu=this;return Tu===void 0&&(Tu={}),new Promise(function(Pu){var Ru;Cu.readyCallbacks.push(Object.assign(Pu,{tile:(Ru=Tu.tile)!==null&&Ru!==void 0&&Ru}))})},$u.prototype.requestFullscreen=function(){var Tu;if(Zs()){var Cu=(Tu=this.getElement())===null||Tu===void 0?void 0:Tu.parentNode;Cu&&"requestFullscreen"in Cu&&typeof document!="undefined"&&document.fullscreenElement===null&&Cu.requestFullscreen()}},$u.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},$u.prototype.throwError=function(Tu){this.hasListener("error")?this.emit("error",Tu):console.error(Tu)},$u.prototype.loadModel=function(Tu,Cu,Pu,Ru){var Lu=this,Bu=Tu.file;this.emit("modelWillLoad",Tu);var Vu=new uo({allowHosts:Cu,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe});Vu.once("bvhLoaded",function(){var Ou,Du;Lu.destroyed||Bu===((Du=(Ou=Lu.work)===null||Ou===void 0?void 0:Ou.model)===null||Du===void 0?void 0:Du.file)&&Lu.emit("modelBvhLoaded",Vu)}),Vu.once("materialLoaded",function(){var Ou,Du;Lu.destroyed||Bu===((Du=(Ou=Lu.work)===null||Ou===void 0?void 0:Ou.model)===null||Du===void 0?void 0:Du.file)&&Lu.emit("modelMaterialLoaded",Vu)}),Vu.once("geometryLoaded",function(){var Ou,Du;Lu.destroyed||Bu===((Du=(Ou=Lu.work)===null||Ou===void 0?void 0:Ou.model)===null||Du===void 0?void 0:Du.file)&&(Vu.bounding.max.y-Vu.bounding.min.y<1.5&&(Vu.bounding.max.y=Vu.bounding.min.y+10),Lu.emit("modelGeometryLoaded",Vu))}),Vu.once("loaded",function(){var Ou,Du,ku,Fu;if(!Lu.destroyed&&Bu===((Du=(Ou=Lu.work)===null||Ou===void 0?void 0:Ou.model)===null||Du===void 0?void 0:Du.file)){var Nu,Gu=Lu.model;Gu&&(Gu.show(),Nu=Gu.getMaterial()||{},Lu.scene.remove(Gu),Gu.dispose(),Vu.setTransparent(Gu.getTransparent())),Nu&&Vu.setMaterial(Nu),Lu.model=Vu,Lu.scene.add(Vu),(ku=Lu.controller)===null||ku===void 0||ku.updateModel(Vu),(Fu=Lu.renderer)===null||Fu===void 0||Fu.compile(Lu.scene,Lu.camera),Lu.needsRender=!0,Lu.modelPending=!1,Pu(),Lu.emit("modelLoaded",Vu)}}),Vu.on("shownFloorChange",function(Ou,Du){var ku,Fu;Lu.destroyed||Bu===((Fu=(ku=Lu.work)===null||ku===void 0?void 0:ku.model)===null||Fu===void 0?void 0:Fu.file)&&Lu.emit("modelShownFloorChange",Ou,Du)}),Vu.on("error",function(Ou){var Du,ku,Fu,Nu;if(!Lu.destroyed&&Bu===((ku=(Du=Lu.work)===null||Du===void 0?void 0:Du.model)===null||ku===void 0?void 0:ku.file)){Vu.bounding.makeEmpty();for(var Gu=0,zu=Lu.work.observers;Gu<zu.length;Gu++){var Hu=zu[Gu];Vu.bounding.expandByPoint(Hu.standingPosition),Vu.bounding.expandByPoint(new r$n.Vector3().fromArray([Hu.position.x,2*Hu.position.y-Hu.standingPosition.y,Hu.position.z]))}var Uu=Ks(Vu.bounding,new r$n.Vector3(1,0,1));Uu.visible=!0,Uu.name="model_empty",Vu.add(Uu);var ju,Wu=Lu.model;Wu&&(Wu.show(),ju=Wu.getMaterial()||{},Lu.scene.remove(Wu),Wu.dispose(),Vu.setTransparent(Wu.getTransparent())),ju&&Vu.setMaterial(ju),Lu.model=Vu,Lu.scene.add(Vu),(Fu=Lu.controller)===null||Fu===void 0||Fu.updateModel(Vu),(Nu=Lu.renderer)===null||Nu===void 0||Nu.compile(Lu.scene,Lu.camera),Lu.emit("modelLoadError",Ou,Vu),Lu.throwError(Ou),Lu.modelPending=!1,Pu()}}),this.modelPending=!0,Vu.load(Tu,this.textureOptions).catch(Qe$1)},$u.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe,requestProxy:this.requestProxy}},$u.prototype.saveControllerPose=function(Tu){Tu===void 0&&(Tu=this.controller),Tu&&eu(Tu)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},$u.prototype.applyController=function(Tu,Cu){var Pu=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Ru=$l[Tu];Tu===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(Tu===$u.Mode.Floorplan||Tu===$u.Mode.Topview||Tu===$u.Mode.Model||Tu===$u.Mode.Mapview),this.currentMode=Tu;for(var Lu=new Ru(Cu),Bu=function(Nu){Lu.on(Nu,function(){for(var Gu=[],zu=0;zu<arguments.length;zu++)Gu[zu]=arguments[zu];var Hu=Pu.emit.apply(Pu,t$h.__spreadArray([Nu],Gu,!1));if(Hu)return!1})},Vu=0,Ou=tu;Vu<Ou.length;Vu++)Bu(Ou[Vu]);var Du=$l[Tu].initAnimationEndPose(Cu),ku=Cu.initial[3],Fu={panoIndex:Cu.initial[0],mode:Tu,longitude:Du.longitude,latitude:Du.latitude,fov:Du.fov,offset:Du.offset,distance:Du.distance};return $s(this.state,Fu)||(Js(this.state,Fu),this.emit("stateChange",this.state,ku)),this.emit("currentStateChange",this.getCurrentState(),ku),Lu.on("cameraUpdate",function(Nu,Gu){var zu;if(Pu.controller){var Hu=t$h.__assign(t$h.__assign({},Pu.controller.getTargetPose()),{panoIndex:Pu.panoIndex,mode:Tu});Gu&&Pu.syncingState===!1&&Pu.state.mode===Hu.mode&&!$s(Pu.state,Hu)&&(Js(Pu.state,Hu),Pu.emit("stateChange",Pu.state,Gu),(zu=Pu.analysis)===null||zu===void 0||zu.state(Pu.work,Pu.state))}Pu.emit("currentStateChange",Pu.getCurrentState(),Gu)}),Lu.on("initAnimationWillStart",function(Nu,Gu,zu){var Hu,Uu=t$h.__assign(t$h.__assign({},Gu),{panoIndex:Nu,mode:Tu});zu&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,zu),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("initAnimationEnded",function(Nu,Gu,zu){var Hu,Uu=t$h.__assign(t$h.__assign({},Gu),{panoIndex:Nu,mode:Tu});zu&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,zu),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("panoWillArrive",function(Nu,Gu,zu){var Hu;Pu.panoIndex=Nu;var Uu=t$h.__assign(t$h.__assign({},Gu),{panoIndex:Nu,mode:Tu});zu&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,zu),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("panoArrived",function(Nu,Gu,zu){var Hu,Uu=t$h.__assign(t$h.__assign({},Gu),{panoIndex:Nu,mode:Tu});zu&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,zu),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("moveToPano",function(Nu,Gu){Pu.emit("currentStateChange",Pu.getCurrentState(),Gu)}),Lu.on("wantsMoveToPano",function(Nu,Gu,zu){var Hu=Pu.emit("wantsMoveToPano",Nu,Gu,zu);Hu||(Hu=Pu.emit("wantsToMoveToPano",Nu,Gu,zu)),Hu||Pu.moveToPano(Nu,Gu,zu)}),Lu.on("vrWantsToExit",function(){Pu.currentMode===$u.Mode.VRPanorama&&(Pu.exitFullscreen(),Pu.changeMode($u.Mode.Panorama))}),Lu.on("error",function(Nu){return Pu.throwError(Nu)}),Lu},$u.prototype.removeEventListeners=function(){},$u.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",Mapview:"Mapview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama",XRPanorama:"XRPanorama"},$u.Line=null,$u}(Fe),Iu={instances:{},constructor:Mu};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:Iu});var Su=function(){function _u(){}return _u.createButton=function($u){var Tu=document.createElement("button");function Cu(){Tu.style.display="",Tu.style.cursor="auto",Tu.style.left="calc(50% - 75px)",Tu.style.width="150px",Tu.onmouseenter=null,Tu.onmouseleave=null,Tu.onclick=null,Tu.textContent="VR NOT SUPPORTED"}function Pu(Lu){Lu.style.position="absolute",Lu.style.bottom="20px",Lu.style.padding="12px 6px",Lu.style.border="1px solid #fff",Lu.style.borderRadius="4px",Lu.style.background="rgba(0,0,0,0.1)",Lu.style.color="#fff",Lu.style.font="normal 13px sans-serif",Lu.style.textAlign="center",Lu.style.opacity="0.5",Lu.style.outline="none",Lu.style.zIndex="999"}if("xr"in navigator)return Tu.id="VRButton",Tu.style.display="none",Pu(Tu),navigator.xr.isSessionSupported("immersive-vr").then(function(Lu){Lu?(Tu.style.display="",Tu.style.cursor="pointer",Tu.style.left="calc(50% - 50px)",Tu.style.width="100px",Tu.textContent="ENTER VR",Tu.onmouseenter=function(){Tu.style.opacity="1.0"},Tu.onmouseleave=function(){Tu.style.opacity="0.5"},Tu.onclick=function(){$u&&$u()}):Cu()}),Tu;var Ru=document.createElement("a");return window.isSecureContext===!1?(Ru.href=document.location.href.replace(/^http:/,"https:"),Ru.innerHTML="WEBXR NEEDS HTTPS"):(Ru.href="https://immersiveweb.dev/",Ru.innerHTML="WEBXR NOT AVAILABLE"),Ru.style.left="calc(50% - 90px)",Ru.style.width="180px",Ru.style.textDecoration="none",Pu(Ru),Ru},_u}();five.AnimationFrameLoop=at$4,five.BVH=qt$1,five.BVHIntersect=Ft$1,five.BVHNode=Nt$1,five.BVHVector3=Ot$2,five.Camera=Lt$1,Five=five.Five=Mu,five.InternalWebGLRenderer=It$1,five.IntersectMesh=Fs,five.LegacyPanoCircleMesh=jo,five.Model=uo,five.NetworkSubscribe=tt$4,five.PBMContainer=At$1,five.PBMGroup=gt$3,five.PBMMaterial=Mt$1,five.PBMMesh=ft$2,five.PROXY_CONTROLLER_EVENT_NAMES=tu,five.PanoCircleMesh=as,five.PanoCircleMeshDark=xs,five.PanoCircleMeshSolid=Ds,five.Scene=St$2,Subscribe=five.Subscribe=Fe,five.Tile3D=Qr,five.Tile3DModel=ro,five.TileBoundingSphere=pr,five.TileCacheNode=yn,five.TileCullingVolume=Fn,five.TileOrientedBoundingBox=Rr,five.TilePlane=kn,five.TileRequestScheduler=vn,five.Tileset3D=qr$1,five.Tileset3DTraverser=_r,five.TilesetCache=xn,five.Work=Eo,five.XRButton=Su,five.defaultImageURLTransform=ct$3,five.getViewportScale=nu,five.imageSupport=function(){return pt$3||(pt$3=Promise.all([dt$2("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),dt$2("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA")]).then(function(_u){var $u=_u[0];return{webp:_u[1],avif:$u}}).catch(function(){return{webp:!1,avif:!1}}))},parseWork=five.parseWork=Co;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$f=tslib.exports,t$g=react$1.exports,n$l=require$$1,r$m=five;function o$h(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Tu){if(Tu!=="default"){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}}),$u.default=_u,Object.freeze($u)}var u$j=o$h(t$g),i$l=o$h(n$l),a$j=[],f$f=[],c$r=u$j.createContext(null);function s$j(){var _u=u$j.useContext(c$r);if(!_u)throw new Error("FiveProvider never found.");return _u.five}function l$i(){var _u=u$j.useContext(c$r);if(!_u)throw new Error("FiveProvider never found.");return _u.loadWork}var d$m={display:"inline-block",overflow:"hidden"};function v$d(_u,$u){var Tu=s$j(),Cu=[Tu];$u!==void 0&&(Cu=Cu.concat($u)),u$j.useLayoutEffect(function(){return _u(Tu.scene)},Cu)}var p$g=v$d;function h$i(_u){return e$f.__assign({},_u.state)}function m$h(_u){var $u=_u.camera.getWorldDirection(new i$l.Vector3);return new i$l.Raycaster(_u.camera.position,$u)}function y$k(_u){return _u.camera.getWorldDirection(new i$l.Vector3)}function g$m(_u){return _u.model.empty?"Empty":"Loaded"}function S$b(_u,$u){return $u.indexOf(_u)>=0}function b$d(_u,$u){for(var Tu=0,Cu=Object.keys($u);Tu<Cu.length;Tu++){var Pu=Cu[Tu];$u[Pu]!==void 0&&(_u[Pu]=$u[Pu])}}function C$j(_u,$u){if(S$b("loadWork",$u))return _u}function w$f(_u,$u){if(S$b("setState",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.setState.apply(_u,Tu)}}function k$e(_u,$u){if(S$b("on",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.on.apply(_u,Tu)}}function x$f(_u,$u){if(S$b("on",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.once.apply(_u,Tu)}}function E$h(_u,$u){if(S$b("off",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.off.apply(_u,Tu)}}function L$e(_u,$u){if(S$b("intersectRaycaster",$u))return function(){for(var Tu,Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return(Tu=_u.model).intersectRaycaster.apply(Tu,Cu)}}function F$c(_u,$u){if(S$b("project2d",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.project2d.apply(_u,Tu)}}function _$8(_u,$u){if(S$b("updateCamera",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.updateCamera.apply(_u,Tu)}}function P$d(_u,$u){if(S$b("initBasisLoader",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.initBasisLoader.apply(_u,Tu)}}function R$c(_u,$u){if(S$b("getPixels",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.getPixels.apply(_u,Tu)}}function V$a(_u,$u){if(S$b("render",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.render.apply(_u,Tu)}}function W$7(_u,$u){if(S$b("needsRender",$u))return function(){_u.needsRender=!0}}function M$l(_u,$u){if(S$b("preloadPano",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.preloadPano.apply(_u,Tu)}}function O$d(_u,$u){if(S$b("showFloor",$u))return function(Tu){typeof Tu=="number"?_u.model.show(Tu):_u.model.show()}}function j$7(_u,$u){if(S$b("toggleHelperVisible",$u))return function(Tu){_u.helperVisible=Tu}}function A$i(_u,$u){for(var Tu={},Cu=$u.length,Pu=-1;++Pu<Cu;){var Ru=$u[Pu];Ru in _u&&(Tu[Ru]=_u[Ru])}return Tu}function N$9(_u,$u){for(var Tu=0;Tu<_u.length;Tu++)for(var Cu=0;Cu<$u.length;Cu++)if(_u[Tu]===$u[Cu])return!0;return!1}var U$b=function(){function _u($u,Tu){this.values=$u,this.listeners=[],this.onValuesChange=Tu}return _u.prototype.on=function($u,Tu){var Cu=this,Pu=[$u,Tu];return this.listeners.push(Pu),function(){var Ru=Cu.listeners.indexOf(Pu);Ru>=0&&Cu.listeners.splice(Ru,1)}},_u.prototype.getValues=function($u){return A$i(this.values,$u)},_u.prototype.setValues=function($u,Tu){var Cu,Pu,Ru=[];for(var Lu in Tu)$u.indexOf(Lu)>=0&&(Cu=Tu[Lu],Pu=this.values[Lu],!(typeof Cu=="number"&&typeof Pu=="number"&&isNaN(Cu)&&isNaN(Pu)||Cu===Pu))&&Ru.push(Lu);if(Ru.length!==0){for(var Bu=e$f.__assign({},this.values),Vu=0,Ou=Ru;Vu<Ou.length;Vu++){var Du=Ou[Vu];this.values[Du]=Tu[Du]}this.onValuesChange&&this.onValuesChange(this.values,Bu);for(var ku=0,Fu=this.listeners;ku<Fu.length;ku++){var Nu=Fu[ku],Gu=Nu[0],zu=Nu[1];if(N$9(Gu,Ru)){var Hu=A$i(Bu,Gu);zu(A$i(this.values,Gu),Hu)}}}},_u}();FiveCanvas=react.FiveCanvas=function(_u){var $u=_u.width,Tu=_u.height,Cu=s$j(),Pu=u$j.createRef(),Ru=e$f.__assign({width:$u,height:Tu},d$m);return u$j.useLayoutEffect(function(){if(Pu.current&&Cu.renderer){if(Cu.renderer.domElement.parentNode!==null&&Cu.renderer.domElement.parentNode!==Pu.current)throw new Error("There are more than 2 fiveCanvas in this context.");Cu.renderer.domElement.parentNode!==Pu.current&&Pu.current.appendChild(Cu.renderer.domElement),Cu.camera.aspect=$u/Tu,Cu.camera.updateProjectionMatrix(),Cu.renderer.setSize($u,Tu),Cu.needsRender=!0}},[$u,Tu,Pu.current]),u$j.createElement("div",{ref:Pu,style:Ru})},react.INJECTION_PROPNAME="$five",react.Store=U$b,react.createFiveFeature=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];return _u},createFiveProvider=react.createFiveProvider=function(_u){return _u===void 0&&(_u={}),function($u){function Tu(Cu){var Pu,Ru=this;Ru=$u.call(this,Cu)||this;var Lu=function(Bu){var Vu=Bu===void 0?{}:Bu,Ou=Vu.backgroundColor,Du=Ou===void 0?1579548:Ou,ku=Vu.backgroundAlpha,Fu=ku===void 0?1:ku,Nu=Vu.pixelRatio,Gu=Nu===void 0?1:Nu,zu=Vu.webgl2,Hu=zu!==void 0&&zu;if(typeof window!="undefined"){var Uu=null;if(!(Uu=Hu?a$j.shift():f$f.shift())){if(Hu){var ju=document.createElement("canvas"),Wu=ju.getContext("webgl2");if(Wu===null)throw new Error("error occurred when getting webgl2 canvas context");Uu=new i$l.WebGLRenderer({antialias:!1,alpha:!0,canvas:ju,context:Wu})}else Uu=new i$l.WebGLRenderer({antialias:!1,alpha:!0});Uu.outputEncoding=i$l.sRGBEncoding}return Uu.setPixelRatio(Gu),Uu.setClearColor(Du,Fu),Uu.autoClear=!0,Uu}}({pixelRatio:r$m.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:_u.backgroundAlpha,backgroundColor:_u.backgroundColor,webgl2:_u==null?void 0:_u.webgl2});return Ru.five=new r$m.Five(e$f.__assign({renderer:Lu},_u)),(Cu.work||Cu.initialWork)&&Ru.five.load(Cu.work||Cu.initialWork,Cu.initialState,void 0,(Pu=Cu.initialUserAction)===null||Pu===void 0||Pu),Ru.five.on("load",function(){var Bu;Ru.props.onWorkChange&&Ru.props.onWorkChange((Bu=Ru.five)===null||Bu===void 0?void 0:Bu.work)}),Ru.five.on("stateChange",function(Bu,Vu){Ru.props.onStateChange&&Ru.props.onStateChange(Bu,Vu)}),Ru.five.on("currentStateChange",function(Bu,Vu){Ru.props.onCurrentStateChange&&Ru.props.onCurrentStateChange(Bu,Vu)}),Ru.five.on("error",function(Bu){Ru.props.onError?Ru.props.onError(Bu):console.warn(Bu.message)}),Ru}return e$f.__extends(Tu,$u),Tu.prototype.loadWork=function(Cu,Pu,Ru,Lu){if(Lu===void 0&&(Lu=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Cu,Pu,Ru,Lu)},Tu.prototype.shouldComponentUpdate=function(Cu){var Pu,Ru;return Cu.work&&Cu.work!==((Pu=this.five)===null||Pu===void 0?void 0:Pu.work)&&((Ru=this.five)===null||Ru===void 0||Ru.load(Cu.work,Cu.initialState)),!0},Tu.prototype.componentWillUnmount=function(){var Cu;this.five&&(this.five.dispose(),(Cu=this.five.renderer)&&(Cu.capabilities.isWebGL2?f$f.indexOf(Cu)===-1&&f$f.push(Cu):a$j.indexOf(Cu)===-1&&a$j.push(Cu)),delete this.five)},Tu.prototype.render=function(){var Cu=this;return u$j.createElement(c$r.Provider,{value:{five:this.five,loadWork:function(){for(var Pu=[],Ru=0;Ru<arguments.length;Ru++)Pu[Ru]=arguments[Ru];return Cu.loadWork.apply(Cu,Pu)}}},this.props.children)},Tu}(u$j.Component)},react.createStore=function(_u){var $u=u$j.createContext(null);return{useStore:function(Tu){var Cu=u$j.useContext($u);if(Cu===null)throw new Error("StoreProvider never found.");var Pu=u$j.useRef(!0),Ru=u$j.useState(Cu.getValues(Tu)),Lu=Ru[0],Bu=Ru[1],Vu=e$f.__spreadArray([Cu],Tu,!0);return u$j.useLayoutEffect(function(){return Pu.current?Pu.current=!1:Bu(Cu.getValues(Tu)),Cu.on(Tu,function(Ou){return Bu(Ou)})},Vu),[Lu,u$j.useCallback(function(Ou){return Cu.setValues(Tu,Ou)},Vu)]},useStoreSetter:function(Tu){var Cu=u$j.useContext($u);if(Cu===null)throw new Error("StoreProvider never found.");return u$j.useCallback(function(Pu){return Cu.setValues(Tu,Pu)},e$f.__spreadArray([Cu],Tu,!0))},watchStore:function(Tu,Cu,Pu){var Ru=u$j.useContext($u);if(Ru===null)throw new Error("StoreProvider never found.");var Lu=e$f.__spreadArray([Ru],Tu,!0);Pu!==void 0&&(Lu=Lu.concat(Pu)),u$j.useLayoutEffect(function(){return Ru.on(Tu,Cu)},Lu)},useStoreAction:function(Tu){var Cu=u$j.useContext($u);if(Cu===null)throw new Error("StoreProvider never found.");return u$j.useCallback(function(){for(var Pu=[],Ru=0;Ru<arguments.length;Ru++)Pu[Ru]=arguments[Ru];var Lu=_u[Tu],Bu=Lu[0],Vu=Lu.slice(1),Ou=function(){return Cu.getValues(Vu)},Du=function(ku){return Cu.setValues(Vu,ku)};return Bu.apply(void 0,e$f.__spreadArray([Ou,Du],Pu,!1))},[])},StoreProvider:function(Tu){function Cu(Pu){var Ru=Tu.call(this,Pu)||this;return Ru.store=new U$b(Pu.initialValue,function(){for(var Lu,Bu=[],Vu=0;Vu<arguments.length;Vu++)Bu[Vu]=arguments[Vu];Ru.props.onValuesChange&&(Lu=Ru.props).onValuesChange.apply(Lu,Bu)}),Ru}return e$f.__extends(Cu,Tu),Cu.prototype.shouldComponentUpdate=function(Pu){return Pu.children!==this.props.children},Cu.prototype.render=function(){return u$j.createElement($u.Provider,{value:this.store},this.props.children)},Cu}(u$j.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$j()},react.useFiveAction=function(){var _u=s$j();return{updateCamera:u$j.useCallback(function($u,Tu){return _u.updateCamera($u,Tu)},[_u]),initBasisLoader:u$j.useCallback(function($u){return _u.initBasisLoader($u)},[_u]),getPixels:u$j.useCallback(function($u,Tu,Cu,Pu,Ru){return _u.getPixels($u,Tu,Cu,Pu,Ru)},[_u]),render:u$j.useCallback(function($u){return _u.render($u)},[_u]),needsRender:u$j.useCallback(function(){return _u.needsRender=!0},[_u]),preloadPano:u$j.useCallback(function($u,Tu){return _u.preloadPano($u,Tu)},[_u])}},react.useFiveCameraDirection=function(){var _u=s$j(),$u=u$j.useState(function(){return y$k(_u)}),Tu=$u[0],Cu=$u[1];return u$j.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Cu(y$k(_u))})},[_u]),Tu},react.useFiveCameraRaycaster=function(){var _u=s$j(),$u=u$j.useState(function(){return m$h(_u)}),Tu=$u[0],Cu=$u[1];return u$j.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Cu(m$h(_u))})},[_u]),Tu},react.useFiveCurrentObserver=function(){var _u=s$j(),$u=u$j.useState(function(){return _u.getCurrentState()}),Tu=$u[0],Cu=$u[1];return u$j.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Cu(_u.getCurrentState())})},[_u]),_u.work?_u.work.observers[Tu.panoIndex]:null},react.useFiveCurrentState=function(){var _u=s$j(),$u=u$j.useState(function(){return _u.getCurrentState()}),Tu=$u[0],Cu=$u[1],Pu=u$j.useCallback(function(Ru,Lu,Bu){Lu===void 0&&(Lu=!1),Bu===void 0&&(Bu=!0);var Vu=typeof Ru=="function"?Ru(_u.getCurrentState()):Ru;_u.setState(Vu,Lu,Bu)},[_u]);return u$j.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Cu(_u.getCurrentState())})},[_u]),[Tu,Pu]},react.useFiveEventCallback=function(_u,$u,Tu){var Cu=s$j(),Pu=[Cu,_u];Tu!==void 0&&(Pu=Pu.concat(Tu)),u$j.useLayoutEffect(function(){return Cu.on(_u,$u)},Pu)},react.useFiveFloor=function(){var _u=s$j(),$u=u$j.useState(_u.model.shownFloor),Tu=$u[0],Cu=$u[1],Pu=u$j.useState(_u.model.floorLength),Ru=Pu[0],Lu=Pu[1],Bu=u$j.useCallback(function(Vu){typeof Vu=="number"?_u.model.show(Vu):_u.model.show()},[_u]);return u$j.useLayoutEffect(function(){var Vu=[];return Vu.push(_u.on("modelShownFloorChange",function(){return Cu(_u.model.shownFloor)})),Vu.push(_u.on("modelLoaded",function(){return Lu(_u.model.floorLength)})),function(){for(var Ou;Ou=Vu.shift();)Ou()}},[_u]),[Tu,Ru,Bu]},react.useFiveHelper=function(){var _u=s$j(),$u=u$j.useState(_u.helperVisible),Tu=$u[0],Cu=$u[1],Pu=u$j.useCallback(function(Ru){_u.helperVisible=Ru},[_u]);return u$j.useLayoutEffect(function(){return _u.on("helpersVisibleChange",function(Ru){return Cu(Ru)})},[_u]),[Tu,Pu]},react.useFiveModelIntersectRaycaster=function(){var _u=s$j();return u$j.useCallback(function($u){return _u.model.intersectRaycaster($u)},[_u])},react.useFiveModelReadyState=function(){var _u=s$j(),$u=u$j.useState(function(){return g$m(_u)}),Tu=$u[0],Cu=$u[1];return u$j.useLayoutEffect(function(){return _u.on("modelLoaded",function(){return Cu(g$m(_u))})},[_u]),Tu},react.useFiveProject2d=function(){var _u=s$j(),$u=u$j.useState(function(){return Symbol()});$u[0];var Tu=$u[1];return u$j.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Tu(Symbol())})},[_u]),u$j.useCallback(function(Cu,Pu){return _u.project2d(Cu,Pu)},[_u])},react.useFiveScene=p$g,react.useFiveSceneEffect=v$d,react.useFiveState=function(){var _u=s$j(),$u=u$j.useState(function(){return h$i(_u)}),Tu=$u[0],Cu=$u[1],Pu=u$j.useCallback(function(Ru,Lu,Bu){Lu===void 0&&(Lu=!1),Bu===void 0&&(Bu=!0);var Vu=typeof Ru=="function"?Ru(_u.getCurrentState()):Ru;_u.setState(Vu,Lu,Bu)},[_u]);return u$j.useLayoutEffect(function(){return _u.on("stateChange",function(){return Cu(h$i(_u))})},[_u]),[Tu,Pu]},react.useFiveWork=function(){var _u=s$j(),$u=l$i(),Tu=u$j.useState(function(){return _u.work}),Cu=Tu[0],Pu=Tu[1];return u$j.useLayoutEffect(function(){return _u.on("load",function(){return Pu(_u.work)})},[_u]),[Cu,$u]},react.withFive=function(_u){return function($u){return u$j.forwardRef(function(Tu,Cu){var Pu=s$j(),Ru=l$i(),Lu=function(ep,_f){return[S$b("unsafe__fiveInstance",_f)?ep:void 0]}(Pu,_u)[0],Bu=function(ep,_f){var op=S$b("state",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return e$f.__assign({},ep.state)},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("stateChange",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),Vu=Bu[0],Ou=Bu[1],Du=function(ep,_f){var op=S$b("currentState",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.getCurrentState()},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("currentStateChange",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),ku=Du[0],Fu=Du[1],Nu=function(ep,_f){var op=S$b("currentObserver",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.getCurrentState()},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("currentStateChange",function(){return cp(Symbol())})},[ep]),[fp?ep.work?ep.work.observers[fp.panoIndex]:null:void 0,up]}(Pu,_u),Gu=Nu[0],zu=Nu[1],Hu=function(ep,_f){var op=S$b("work",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.work},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("load",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),Uu=Hu[0],ju=Hu[1],Wu=function(ep,_f){var op=S$b("model",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.model},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("modelLoaded",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),Qu=Wu[0],qu=Wu[1],Yu=function(ep,_f){return[S$b("scene",_f)?ep.scene:void 0]}(Pu,_u)[0],Ju=function(ep,_f){var op=S$b("cameraDirection",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.camera.getWorldDirection(new i$l.Vector3)},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("cameraUpdate",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),_d=Ju[0],tp=Ju[1],Ku=function(ep,_f){var op=S$b("cameraRaycaster",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op){var vp=ep.camera.getWorldDirection(new i$l.Vector3);return new i$l.Raycaster(ep.camera.position,vp)}},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("cameraUpdate",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),Xu=Ku[0],Zu=Ku[1],_c=function(ep,_f){var op=S$b("modelReadyState",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.model.empty?"Empty":"Loaded"},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("modelLoaded",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),Xc=_c[0],_h=_c[1],ip=function(ep,_f){var op=S$b("shownFloor",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.model.shownFloor},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("modelShownFloorChange",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),ap=ip[0],hp=ip[1],Ap=function(ep,_f){var op=S$b("totalFloorLength",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.model.hasFloors()},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("modelLoaded",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),gp=Ap[0],Rp=Ap[1],Sp=function(ep,_f){var op=S$b("helperVisible",_f),rp=u$j.useState(Symbol()),up=rp[0],cp=rp[1],fp=u$j.useMemo(function(){if(op)return ep.helperVisible},[ep,up]);return u$j.useLayoutEffect(function(){if(op)return ep.on("helpersVisibleChange",function(){return cp(Symbol())})},[ep]),[fp,up]}(Pu,_u),Dp=Sp[0],Ep=Sp[1],Bp=u$j.useMemo(function(){var ep={};return b$d(ep,{setState:w$f(Pu,_u),loadWork:C$j(Ru,_u),on:k$e(Pu,_u),once:x$f(Pu,_u),off:E$h(Pu,_u),intersectRaycaster:L$e(Pu,_u),project2d:F$c(Pu,_u),updateCamera:_$8(Pu,_u),initBasisLoader:P$d(Pu,_u),getPixels:R$c(Pu,_u),render:V$a(Pu,_u),needsRender:W$7(Pu,_u),preloadPano:M$l(Pu,_u),showFloor:O$d(Pu,_u),toggleHelperVisible:j$7(Pu,_u)}),ep},[Pu,Ru]),Ip=u$j.useMemo(function(){var ep=e$f.__assign({},Bp);return b$d(ep,{unsafe__fiveInstance:Lu,state:Vu,currentState:ku,currentObserver:Gu,work:Uu,model:Qu,scene:Yu,cameraDirection:_d,cameraRaycaster:Xu,modelReadyState:Xc,shownFloor:ap,totalFloorLength:gp,helperVisible:Dp}),ep},[Pu,Bp,Ou,Fu,zu,ju,qu,tp,Zu,_h,hp,Rp,Ep]);return u$j.createElement($u,e$f.__assign({ref:Cu,$five:Ip},Tu))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$e=react$1.exports,g$l=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h$h=Symbol.for;g$l=h$h("react.element"),reactJsxRuntime_production_min.Fragment=h$h("react.fragment")}var m$g=f$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$k=Object.prototype.hasOwnProperty,p$f={key:!0,ref:!0,__self:!0,__source:!0};function q$8(_u,$u,Tu){var Cu,Pu={},Ru=null,Lu=null;Tu!==void 0&&(Ru=""+Tu),$u.key!==void 0&&(Ru=""+$u.key),$u.ref!==void 0&&(Lu=$u.ref);for(Cu in $u)n$k.call($u,Cu)&&!p$f.hasOwnProperty(Cu)&&(Pu[Cu]=$u[Cu]);if(_u&&_u.defaultProps)for(Cu in $u=_u.defaultProps,$u)Pu[Cu]===void 0&&(Pu[Cu]=$u[Cu]);return{$$typeof:g$l,type:_u,key:Ru,ref:Lu,props:Pu,_owner:m$g.current}}reactJsxRuntime_production_min.jsx=q$8;reactJsxRuntime_production_min.jsxs=q$8;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(_u){(function(){var $u={}.hasOwnProperty;function Tu(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++){var Ru=arguments[Pu];if(!!Ru){var Lu=typeof Ru;if(Lu==="string"||Lu==="number")Cu.push(Ru);else if(Array.isArray(Ru)){if(Ru.length){var Bu=Tu.apply(null,Ru);Bu&&Cu.push(Bu)}}else if(Lu==="object"){if(Ru.toString!==Object.prototype.toString&&!Ru.toString.toString().includes("[native code]")){Cu.push(Ru.toString());continue}for(var Vu in Ru)$u.call(Ru,Vu)&&Ru[Vu]&&Cu.push(Vu)}}}return Cu.join(" ")}_u.exports?(Tu.default=Tu,_u.exports=Tu):window.classNames=Tu})()})(classnames);var classNames=classnames.exports;function die(_u){for(var $u=arguments.length,Tu=new Array($u>1?$u-1:0),Cu=1;Cu<$u;Cu++)Tu[Cu-1]=arguments[Cu];throw new Error(typeof _u=="number"?"[MobX] minified error nr: "+_u+(Tu.length?" "+Tu.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+_u)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(_u){var $u=!1;return function(){if(!$u)return $u=!0,_u.apply(this,arguments)}}var noop=function _u(){};function isFunction(_u){return typeof _u=="function"}function isStringish(_u){var $u=typeof _u;switch($u){case"string":case"symbol":case"number":return!0}return!1}function isObject(_u){return _u!==null&&typeof _u=="object"}function isPlainObject(_u){if(!isObject(_u))return!1;var $u=Object.getPrototypeOf(_u);if($u==null)return!0;var Tu=Object.hasOwnProperty.call($u,"constructor")&&$u.constructor;return typeof Tu=="function"&&Tu.toString()===plainObjectString}function isGenerator(_u){var $u=_u==null?void 0:_u.constructor;return $u?$u.name==="GeneratorFunction"||$u.displayName==="GeneratorFunction":!1}function addHiddenProp(_u,$u,Tu){defineProperty(_u,$u,{enumerable:!1,writable:!0,configurable:!0,value:Tu})}function addHiddenFinalProp(_u,$u,Tu){defineProperty(_u,$u,{enumerable:!1,writable:!1,configurable:!0,value:Tu})}function createInstanceofPredicate(_u,$u){var Tu="isMobX"+_u;return $u.prototype[Tu]=!0,function(Cu){return isObject(Cu)&&Cu[Tu]===!0}}function isES6Map(_u){return _u instanceof Map}function isES6Set(_u){return _u instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(_u){var $u=Object.keys(_u);if(!hasGetOwnPropertySymbols)return $u;var Tu=Object.getOwnPropertySymbols(_u);return Tu.length?[].concat($u,Tu.filter(function(Cu){return objectPrototype.propertyIsEnumerable.call(_u,Cu)})):$u}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(_u){return Object.getOwnPropertyNames(_u).concat(Object.getOwnPropertySymbols(_u))}:Object.getOwnPropertyNames;function toPrimitive(_u){return _u===null?null:typeof _u=="object"?""+_u:_u}function hasProp(_u,$u){return objectPrototype.hasOwnProperty.call(_u,$u)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function _u($u){var Tu={};return ownKeys($u).forEach(function(Cu){Tu[Cu]=getDescriptor($u,Cu)}),Tu};function _defineProperties(_u,$u){for(var Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu];Cu.enumerable=Cu.enumerable||!1,Cu.configurable=!0,"value"in Cu&&(Cu.writable=!0),Object.defineProperty(_u,Cu.key,Cu)}}function _createClass(_u,$u,Tu){return $u&&_defineProperties(_u.prototype,$u),Tu&&_defineProperties(_u,Tu),Object.defineProperty(_u,"prototype",{writable:!1}),_u}function _extends(){return _extends=Object.assign||function(_u){for(var $u=1;$u<arguments.length;$u++){var Tu=arguments[$u];for(var Cu in Tu)Object.prototype.hasOwnProperty.call(Tu,Cu)&&(_u[Cu]=Tu[Cu])}return _u},_extends.apply(this,arguments)}function _inheritsLoose(_u,$u){_u.prototype=Object.create($u.prototype),_u.prototype.constructor=_u,_setPrototypeOf(_u,$u)}function _setPrototypeOf(_u,$u){return _setPrototypeOf=Object.setPrototypeOf||function(Cu,Pu){return Cu.__proto__=Pu,Cu},_setPrototypeOf(_u,$u)}function _assertThisInitialized(_u){if(_u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _u}function _unsupportedIterableToArray(_u,$u){if(!!_u){if(typeof _u=="string")return _arrayLikeToArray(_u,$u);var Tu=Object.prototype.toString.call(_u).slice(8,-1);if(Tu==="Object"&&_u.constructor&&(Tu=_u.constructor.name),Tu==="Map"||Tu==="Set")return Array.from(_u);if(Tu==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Tu))return _arrayLikeToArray(_u,$u)}}function _arrayLikeToArray(_u,$u){($u==null||$u>_u.length)&&($u=_u.length);for(var Tu=0,Cu=new Array($u);Tu<$u;Tu++)Cu[Tu]=_u[Tu];return Cu}function _createForOfIteratorHelperLoose(_u,$u){var Tu=typeof Symbol!="undefined"&&_u[Symbol.iterator]||_u["@@iterator"];if(Tu)return(Tu=Tu.call(_u)).next.bind(Tu);if(Array.isArray(_u)||(Tu=_unsupportedIterableToArray(_u))||$u&&_u&&typeof _u.length=="number"){Tu&&(_u=Tu);var Cu=0;return function(){return Cu>=_u.length?{done:!0}:{done:!1,value:_u[Cu++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(_u){function $u(Tu,Cu){storeAnnotation(Tu,Cu,_u)}return Object.assign($u,_u)}function storeAnnotation(_u,$u,Tu){hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),isOverride(Tu)||(_u[storedAnnotationsSymbol][$u]=Tu)}function collectStoredAnnotations(_u){return hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),_u[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function _u(Tu){Tu===void 0&&(Tu="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=Tu}var $u=_u.prototype;return $u.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Cu){return Cu()})},$u.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Cu){return Cu()})},$u.reportObserved=function(){return reportObserved(this)},$u.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},$u.toString=function(){return this.name_},_u}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(_u,$u,Tu){$u===void 0&&($u=noop),Tu===void 0&&(Tu=noop);var Cu=new Atom(_u);return $u!==noop&&onBecomeObserved(Cu,$u),Tu!==noop&&onBecomeUnobserved(Cu,Tu),Cu}function identityComparer(_u,$u){return _u===$u}function structuralComparer(_u,$u){return deepEqual(_u,$u)}function shallowComparer(_u,$u){return deepEqual(_u,$u,1)}function defaultComparer(_u,$u){return Object.is?Object.is(_u,$u):_u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(_u,$u,Tu){return isObservable(_u)?_u:Array.isArray(_u)?observable.array(_u,{name:Tu}):isPlainObject(_u)?observable.object(_u,void 0,{name:Tu}):isES6Map(_u)?observable.map(_u,{name:Tu}):isES6Set(_u)?observable.set(_u,{name:Tu}):typeof _u=="function"&&!isAction(_u)&&!isFlow(_u)?isGenerator(_u)?flow(_u):autoAction(Tu,_u):_u}function shallowEnhancer(_u,$u,Tu){if(_u==null||isObservableObject(_u)||isObservableArray(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(Array.isArray(_u))return observable.array(_u,{name:Tu,deep:!1});if(isPlainObject(_u))return observable.object(_u,void 0,{name:Tu,deep:!1});if(isES6Map(_u))return observable.map(_u,{name:Tu,deep:!1});if(isES6Set(_u))return observable.set(_u,{name:Tu,deep:!1})}function referenceEnhancer(_u){return _u}function refStructEnhancer(_u,$u){return deepEqual(_u,$u)?$u:_u}var OVERRIDE="override";function isOverride(_u){return _u.annotationType_===OVERRIDE}function createActionAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$1,extend_:extend_$1}}function make_$1(_u,$u,Tu,Cu){var Pu;if((Pu=this.options_)!=null&&Pu.bound)return this.extend_(_u,$u,Tu,!1)===null?0:1;if(Cu===_u.target_)return this.extend_(_u,$u,Tu,!1)===null?0:2;if(isAction(Tu.value))return 1;var Ru=createActionDescriptor(_u,this,$u,Tu,!1);return defineProperty(Cu,$u,Ru),2}function extend_$1(_u,$u,Tu,Cu){var Pu=createActionDescriptor(_u,this,$u,Tu);return _u.defineProperty_($u,Pu,Cu)}function assertActionDescriptor(_u,$u,Tu,Cu){$u.annotationType_,Cu.value}function createActionDescriptor(_u,$u,Tu,Cu,Pu){var Ru,Lu,Bu,Vu,Ou,Du,ku;Pu===void 0&&(Pu=globalState.safeDescriptors),assertActionDescriptor(_u,$u,Tu,Cu);var Fu=Cu.value;if((Ru=$u.options_)!=null&&Ru.bound){var Nu;Fu=Fu.bind((Nu=_u.proxy_)!=null?Nu:_u.target_)}return{value:createAction((Lu=(Bu=$u.options_)==null?void 0:Bu.name)!=null?Lu:Tu.toString(),Fu,(Vu=(Ou=$u.options_)==null?void 0:Ou.autoAction)!=null?Vu:!1,(Du=$u.options_)!=null&&Du.bound?(ku=_u.proxy_)!=null?ku:_u.target_:void 0),configurable:Pu?_u.isPlainObject_:!0,enumerable:!1,writable:!Pu}}function createFlowAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$2,extend_:extend_$2}}function make_$2(_u,$u,Tu,Cu){var Pu;if(Cu===_u.target_)return this.extend_(_u,$u,Tu,!1)===null?0:2;if((Pu=this.options_)!=null&&Pu.bound&&(!hasProp(_u.target_,$u)||!isFlow(_u.target_[$u]))&&this.extend_(_u,$u,Tu,!1)===null)return 0;if(isFlow(Tu.value))return 1;var Ru=createFlowDescriptor(_u,this,$u,Tu,!1,!1);return defineProperty(Cu,$u,Ru),2}function extend_$2(_u,$u,Tu,Cu){var Pu,Ru=createFlowDescriptor(_u,this,$u,Tu,(Pu=this.options_)==null?void 0:Pu.bound);return _u.defineProperty_($u,Ru,Cu)}function assertFlowDescriptor(_u,$u,Tu,Cu){$u.annotationType_,Cu.value}function createFlowDescriptor(_u,$u,Tu,Cu,Pu,Ru){Ru===void 0&&(Ru=globalState.safeDescriptors),assertFlowDescriptor(_u,$u,Tu,Cu);var Lu=Cu.value;if(isFlow(Lu)||(Lu=flow(Lu)),Pu){var Bu;Lu=Lu.bind((Bu=_u.proxy_)!=null?Bu:_u.target_),Lu.isMobXFlow=!0}return{value:Lu,configurable:Ru?_u.isPlainObject_:!0,enumerable:!1,writable:!Ru}}function createComputedAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$3,extend_:extend_$3}}function make_$3(_u,$u,Tu){return this.extend_(_u,$u,Tu,!1)===null?0:1}function extend_$3(_u,$u,Tu,Cu){return assertComputedDescriptor(_u,this,$u,Tu),_u.defineComputedProperty_($u,_extends({},this.options_,{get:Tu.get,set:Tu.set}),Cu)}function assertComputedDescriptor(_u,$u,Tu,Cu){$u.annotationType_,Cu.get}function createObservableAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$4,extend_:extend_$4}}function make_$4(_u,$u,Tu){return this.extend_(_u,$u,Tu,!1)===null?0:1}function extend_$4(_u,$u,Tu,Cu){var Pu,Ru;return assertObservableDescriptor(_u,this),_u.defineObservableProperty_($u,Tu.value,(Pu=(Ru=this.options_)==null?void 0:Ru.enhancer)!=null?Pu:deepEnhancer,Cu)}function assertObservableDescriptor(_u,$u,Tu,Cu){$u.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(_u){return{annotationType_:AUTO,options_:_u,make_:make_$5,extend_:extend_$5}}function make_$5(_u,$u,Tu,Cu){var Pu,Ru;if(Tu.get)return computed.make_(_u,$u,Tu,Cu);if(Tu.set){var Lu=createAction($u.toString(),Tu.set);return Cu===_u.target_?_u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:Lu})===null?0:2:(defineProperty(Cu,$u,{configurable:!0,set:Lu}),2)}if(Cu!==_u.target_&&typeof Tu.value=="function"){var Bu;if(isGenerator(Tu.value)){var Vu,Ou=(Vu=this.options_)!=null&&Vu.autoBind?flow.bound:flow;return Ou.make_(_u,$u,Tu,Cu)}var Du=(Bu=this.options_)!=null&&Bu.autoBind?autoAction.bound:autoAction;return Du.make_(_u,$u,Tu,Cu)}var ku=((Pu=this.options_)==null?void 0:Pu.deep)===!1?observable.ref:observable;if(typeof Tu.value=="function"&&(Ru=this.options_)!=null&&Ru.autoBind){var Fu;Tu.value=Tu.value.bind((Fu=_u.proxy_)!=null?Fu:_u.target_)}return ku.make_(_u,$u,Tu,Cu)}function extend_$5(_u,$u,Tu,Cu){var Pu,Ru;if(Tu.get)return computed.extend_(_u,$u,Tu,Cu);if(Tu.set)return _u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:createAction($u.toString(),Tu.set)},Cu);if(typeof Tu.value=="function"&&(Pu=this.options_)!=null&&Pu.autoBind){var Lu;Tu.value=Tu.value.bind((Lu=_u.proxy_)!=null?Lu:_u.target_)}var Bu=((Ru=this.options_)==null?void 0:Ru.deep)===!1?observable.ref:observable;return Bu.extend_(_u,$u,Tu,Cu)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(_u){return _u||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(_u){return _u.deep===!0?deepEnhancer:_u.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(_u.defaultDecorator)}function getAnnotationFromOptions(_u){var $u;return _u?($u=_u.defaultDecorator)!=null?$u:createAutoAnnotation(_u):void 0}function getEnhancerFromAnnotation(_u){var $u,Tu;return _u&&($u=(Tu=_u.options_)==null?void 0:Tu.enhancer)!=null?$u:deepEnhancer}function createObservable(_u,$u,Tu){if(isStringish($u)){storeAnnotation(_u,$u,observableAnnotation);return}return isObservable(_u)?_u:isPlainObject(_u)?observable.object(_u,$u,Tu):Array.isArray(_u)?observable.array(_u,$u):isES6Map(_u)?observable.map(_u,$u):isES6Set(_u)?observable.set(_u,$u):typeof _u=="object"&&_u!==null?_u:observable.box(_u,$u)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return new ObservableValue($u,getEnhancerFromOptions(Cu),Cu.name,!0,Cu.equals)},array:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return(globalState.useProxies===!1||Cu.proxy===!1?createLegacyArray:createObservableArray)($u,getEnhancerFromOptions(Cu),Cu.name)},map:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return new ObservableMap($u,getEnhancerFromOptions(Cu),Cu.name)},set:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return new ObservableSet($u,getEnhancerFromOptions(Cu),Cu.name)},object:function _u($u,Tu,Cu){return extendObservable(globalState.useProxies===!1||(Cu==null?void 0:Cu.proxy)===!1?asObservableObject({},Cu):asDynamicObservableObject({},Cu),$u,Tu)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function _u($u,Tu){if(isStringish(Tu))return storeAnnotation($u,Tu,computedAnnotation);if(isPlainObject($u))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,$u));var Cu=isPlainObject(Tu)?Tu:{};return Cu.get=$u,Cu.name||(Cu.name=$u.name||""),new ComputedValue(Cu)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(_u,$u,Tu,Cu){Tu===void 0&&(Tu=!1);function Pu(){return executeAction(_u,Tu,$u,Cu||this,arguments)}return Pu.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=_u,Object.defineProperty(Pu,"name",tmpNameDescriptor)),Pu}function executeAction(_u,$u,Tu,Cu,Pu){var Ru=_startAction(_u,$u);try{return Tu.apply(Cu,Pu)}catch(Lu){throw Ru.error_=Lu,Lu}finally{_endAction(Ru)}}function _startAction(_u,$u,Tu,Cu){var Pu=!1,Ru=0,Lu=globalState.trackingDerivation,Bu=!$u||!Lu;startBatch();var Vu=globalState.allowStateChanges;Bu&&(untrackedStart(),Vu=allowStateChangesStart(!0));var Ou=allowStateReadsStart(!0),Du={runAsAction_:Bu,prevDerivation_:Lu,prevAllowStateChanges_:Vu,prevAllowStateReads_:Ou,notifySpy_:Pu,startTime_:Ru,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Du.actionId_,Du}function _endAction(_u){currentActionId!==_u.actionId_&&die(30),currentActionId=_u.parentActionId_,_u.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(_u.prevAllowStateChanges_),allowStateReadsEnd(_u.prevAllowStateReads_),endBatch(),_u.runAsAction_&&untrackedEnd(_u.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(_u,$u){var Tu=allowStateChangesStart(_u);try{return $u()}finally{allowStateChangesEnd(Tu)}}function allowStateChangesStart(_u){var $u=globalState.allowStateChanges;return globalState.allowStateChanges=_u,$u}function allowStateChangesEnd(_u){globalState.allowStateChanges=_u}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(_u){_inheritsLoose($u,_u);function $u(Cu,Pu,Ru,Lu,Bu){var Vu;return Ru===void 0&&(Ru="ObservableValue"),Bu===void 0&&(Bu=comparer.default),Vu=_u.call(this,Ru)||this,Vu.enhancer=void 0,Vu.name_=void 0,Vu.equals=void 0,Vu.hasUnreportedChange_=!1,Vu.interceptors_=void 0,Vu.changeListeners_=void 0,Vu.value_=void 0,Vu.dehancer=void 0,Vu.enhancer=Pu,Vu.name_=Ru,Vu.equals=Bu,Vu.value_=Pu(Cu,void 0,Ru),Vu}var Tu=$u.prototype;return Tu.dehanceValue=function(Pu){return this.dehancer!==void 0?this.dehancer(Pu):Pu},Tu.set=function(Pu){this.value_,Pu=this.prepareNewValue_(Pu),Pu!==globalState.UNCHANGED&&this.setNewValue_(Pu)},Tu.prepareNewValue_=function(Pu){if(hasInterceptors(this)){var Ru=interceptChange(this,{object:this,type:UPDATE,newValue:Pu});if(!Ru)return globalState.UNCHANGED;Pu=Ru.newValue}return Pu=this.enhancer(Pu,this.value_,this.name_),this.equals(this.value_,Pu)?globalState.UNCHANGED:Pu},Tu.setNewValue_=function(Pu){var Ru=this.value_;this.value_=Pu,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Pu,oldValue:Ru})},Tu.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},Tu.intercept_=function(Pu){return registerInterceptor(this,Pu)},Tu.observe_=function(Pu,Ru){return Ru&&Pu({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Pu)},Tu.raw=function(){return this.value_},Tu.toJSON=function(){return this.get()},Tu.toString=function(){return this.name_+"["+this.value_+"]"},Tu.valueOf=function(){return toPrimitive(this.get())},Tu[_Symbol$toPrimitive]=function(){return this.valueOf()},$u}(Atom),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(){function _u(Tu){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,Tu.get||die(31),this.derivation=Tu.get,this.name_=Tu.name||"ComputedValue",Tu.set&&(this.setter_=createAction("ComputedValue-setter",Tu.set)),this.equals_=Tu.equals||(Tu.compareStructural||Tu.struct?comparer.structural:comparer.default),this.scope_=Tu.context,this.requiresReaction_=Tu.requiresReaction,this.keepAlive_=!!Tu.keepAlive}var $u=_u.prototype;return $u.onBecomeStale_=function(){propagateMaybeChanged(this)},$u.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Cu){return Cu()})},$u.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Cu){return Cu()})},$u.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Cu=globalState.trackingContext;this.keepAlive_&&!Cu&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Cu}var Pu=this.value_;if(isCaughtException(Pu))throw Pu.cause;return Pu},$u.set=function(Cu){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Cu)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},$u.trackAndCompute=function(){var Cu=this.value_,Pu=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Ru=this.computeValue_(!0),Lu=Pu||isCaughtException(Cu)||isCaughtException(Ru)||!this.equals_(Cu,Ru);return Lu&&(this.value_=Ru),Lu},$u.computeValue_=function(Cu){this.isComputing_=!0;var Pu=allowStateChangesStart(!1),Ru;if(Cu)Ru=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Ru=this.derivation.call(this.scope_);else try{Ru=this.derivation.call(this.scope_)}catch(Lu){Ru=new CaughtException(Lu)}return allowStateChangesEnd(Pu),this.isComputing_=!1,Ru},$u.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},$u.observe_=function(Cu,Pu){var Ru=this,Lu=!0,Bu=void 0;return autorun(function(){var Vu=Ru.get();if(!Lu||Pu){var Ou=untrackedStart();Cu({observableKind:"computed",debugObjectName:Ru.name_,type:UPDATE,object:Ru,newValue:Vu,oldValue:Bu}),untrackedEnd(Ou)}Lu=!1,Bu=Vu})},$u.warnAboutUntrackedRead_=function(){},$u.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},$u.valueOf=function(){return toPrimitive(this.get())},$u[_Symbol$toPrimitive$1]=function(){return this.valueOf()},_u}(),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(_u){_u[_u.NOT_TRACKING_=-1]="NOT_TRACKING_",_u[_u.UP_TO_DATE_=0]="UP_TO_DATE_",_u[_u.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",_u[_u.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(_u){_u[_u.NONE=0]="NONE",_u[_u.LOG=1]="LOG",_u[_u.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function _u($u){this.cause=void 0,this.cause=$u};function isCaughtException(_u){return _u instanceof CaughtException}function shouldCompute(_u){switch(_u.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var $u=allowStateReadsStart(!0),Tu=untrackedStart(),Cu=_u.observing_,Pu=Cu.length,Ru=0;Ru<Pu;Ru++){var Lu=Cu[Ru];if(isComputedValue(Lu)){if(globalState.disableErrorBoundaries)Lu.get();else try{Lu.get()}catch{return untrackedEnd(Tu),allowStateReadsEnd($u),!0}if(_u.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(Tu),allowStateReadsEnd($u),!0}}return changeDependenciesStateTo0(_u),untrackedEnd(Tu),allowStateReadsEnd($u),!1}}}function checkIfStateModificationsAreAllowed(_u){}function trackDerivedFunction(_u,$u,Tu){var Cu=allowStateReadsStart(!0);changeDependenciesStateTo0(_u),_u.newObserving_=new Array(_u.observing_.length+100),_u.unboundDepsCount_=0,_u.runId_=++globalState.runId;var Pu=globalState.trackingDerivation;globalState.trackingDerivation=_u,globalState.inBatch++;var Ru;if(globalState.disableErrorBoundaries===!0)Ru=$u.call(Tu);else try{Ru=$u.call(Tu)}catch(Lu){Ru=new CaughtException(Lu)}return globalState.inBatch--,globalState.trackingDerivation=Pu,bindDependencies(_u),allowStateReadsEnd(Cu),Ru}function bindDependencies(_u){for(var $u=_u.observing_,Tu=_u.observing_=_u.newObserving_,Cu=IDerivationState_.UP_TO_DATE_,Pu=0,Ru=_u.unboundDepsCount_,Lu=0;Lu<Ru;Lu++){var Bu=Tu[Lu];Bu.diffValue_===0&&(Bu.diffValue_=1,Pu!==Lu&&(Tu[Pu]=Bu),Pu++),Bu.dependenciesState_>Cu&&(Cu=Bu.dependenciesState_)}for(Tu.length=Pu,_u.newObserving_=null,Ru=$u.length;Ru--;){var Vu=$u[Ru];Vu.diffValue_===0&&removeObserver(Vu,_u),Vu.diffValue_=0}for(;Pu--;){var Ou=Tu[Pu];Ou.diffValue_===1&&(Ou.diffValue_=0,addObserver(Ou,_u))}Cu!==IDerivationState_.UP_TO_DATE_&&(_u.dependenciesState_=Cu,_u.onBecomeStale_())}function clearObserving(_u){var $u=_u.observing_;_u.observing_=[];for(var Tu=$u.length;Tu--;)removeObserver($u[Tu],_u);_u.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(_u){var $u=untrackedStart();try{return _u()}finally{untrackedEnd($u)}}function untrackedStart(){var _u=globalState.trackingDerivation;return globalState.trackingDerivation=null,_u}function untrackedEnd(_u){globalState.trackingDerivation=_u}function allowStateReadsStart(_u){var $u=globalState.allowStateReads;return globalState.allowStateReads=_u,$u}function allowStateReadsEnd(_u){globalState.allowStateReads=_u}function changeDependenciesStateTo0(_u){if(_u.dependenciesState_!==IDerivationState_.UP_TO_DATE_){_u.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var $u=_u.observing_,Tu=$u.length;Tu--;)$u[Tu].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function _u(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var _u=getGlobal();return _u.__mobxInstanceCount>0&&!_u.__mobxGlobals&&(canMergeGlobalState=!1),_u.__mobxGlobals&&_u.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?_u.__mobxGlobals?(_u.__mobxInstanceCount+=1,_u.__mobxGlobals.UNCHANGED||(_u.__mobxGlobals.UNCHANGED={}),_u.__mobxGlobals):(_u.__mobxInstanceCount=1,_u.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var _u=getGlobal();--_u.__mobxInstanceCount===0&&(_u.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(_u,$u){_u.observers_.add($u),_u.lowestObserverState_>$u.dependenciesState_&&(_u.lowestObserverState_=$u.dependenciesState_)}function removeObserver(_u,$u){_u.observers_.delete($u),_u.observers_.size===0&&queueForUnobservation(_u)}function queueForUnobservation(_u){_u.isPendingUnobservation_===!1&&(_u.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(_u))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var _u=globalState.pendingUnobservations,$u=0;$u<_u.length;$u++){var Tu=_u[$u];Tu.isPendingUnobservation_=!1,Tu.observers_.size===0&&(Tu.isBeingObserved_&&(Tu.isBeingObserved_=!1,Tu.onBUO()),Tu instanceof ComputedValue&&Tu.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(_u){var $u=globalState.trackingDerivation;return $u!==null?($u.runId_!==_u.lastAccessedBy_&&(_u.lastAccessedBy_=$u.runId_,$u.newObserving_[$u.unboundDepsCount_++]=_u,!_u.isBeingObserved_&&globalState.trackingContext&&(_u.isBeingObserved_=!0,_u.onBO())),!0):(_u.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(_u),!1)}function propagateChanged(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&$u.onBecomeStale_(),$u.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?$u.dependenciesState_=IDerivationState_.STALE_:$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(_u){_u.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&($u.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,$u.onBecomeStale_())}))}var Reaction=function(){function _u(Tu,Cu,Pu,Ru){Tu===void 0&&(Tu="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=Tu,this.onInvalidate_=Cu,this.errorHandler_=Pu,this.requiresObservable_=Ru}var $u=_u.prototype;return $u.onBecomeStale_=function(){this.schedule_()},$u.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},$u.isScheduled=function(){return this.isScheduled_},$u.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Cu=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Pu){this.reportExceptionInDerivation_(Pu)}}globalState.trackingContext=Cu,endBatch()}},$u.track=function(Cu){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Pu=globalState.trackingContext;globalState.trackingContext=this;var Ru=trackDerivedFunction(this,Cu,void 0);globalState.trackingContext=Pu,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Ru)&&this.reportExceptionInDerivation_(Ru.cause),endBatch()}},$u.reportExceptionInDerivation_=function(Cu){var Pu=this;if(this.errorHandler_){this.errorHandler_(Cu,this);return}if(globalState.disableErrorBoundaries)throw Cu;var Ru="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Ru,Cu),globalState.globalReactionErrorHandlers.forEach(function(Lu){return Lu(Cu,Pu)})},$u.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},$u.getDisposer_=function(){var Cu=this.dispose.bind(this);return Cu[$mobx]=this,Cu},$u.toString=function(){return"Reaction["+this.name_+"]"},$u.trace=function(Cu){Cu===void 0&&(Cu=!1),trace(this,Cu)},_u}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function _u($u){return $u()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var _u=globalState.pendingReactions,$u=0;_u.length>0;){++$u===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+_u[0]),_u.splice(0));for(var Tu=_u.splice(0),Cu=0,Pu=Tu.length;Cu<Pu;Cu++)Tu[Cu].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(_u){var $u=reactionScheduler;reactionScheduler=function(Cu){return _u(function(){return $u(Cu)})}}function isSpyEnabled(){return!1}function spyReport(_u){}function spyReportStart(_u){}function spyReportEnd(_u){}function spy(_u){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(_u){var $u=function(Cu,Pu){if(isFunction(Cu))return createAction(Cu.name||DEFAULT_ACTION_NAME,Cu,_u);if(isFunction(Pu))return createAction(Cu,Pu,_u);if(isStringish(Pu))return storeAnnotation(Cu,Pu,_u?autoActionAnnotation:actionAnnotation);if(isStringish(Cu))return createDecoratorAnnotation(createActionAnnotation(_u?AUTOACTION:ACTION,{name:Cu,autoAction:_u}))};return $u}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(_u){return executeAction(_u.name||DEFAULT_ACTION_NAME,!1,_u,this,void 0)}function isAction(_u){return isFunction(_u)&&_u.isMobxAction===!0}function autorun(_u,$u){var Tu,Cu;$u===void 0&&($u=EMPTY_OBJECT);var Pu=(Tu=(Cu=$u)==null?void 0:Cu.name)!=null?Tu:"Autorun",Ru=!$u.scheduler&&!$u.delay,Lu;if(Ru)Lu=new Reaction(Pu,function(){this.track(Ou)},$u.onError,$u.requiresObservable);else{var Bu=createSchedulerFromOptions($u),Vu=!1;Lu=new Reaction(Pu,function(){Vu||(Vu=!0,Bu(function(){Vu=!1,Lu.isDisposed_||Lu.track(Ou)}))},$u.onError,$u.requiresObservable)}function Ou(){_u(Lu)}return Lu.schedule_(),Lu.getDisposer_()}var run=function _u($u){return $u()};function createSchedulerFromOptions(_u){return _u.scheduler?_u.scheduler:_u.delay?function($u){return setTimeout($u,_u.delay)}:run}function reaction(_u,$u,Tu){var Cu;Tu===void 0&&(Tu=EMPTY_OBJECT);var Pu=(Cu=Tu.name)!=null?Cu:"Reaction",Ru=action(Pu,Tu.onError?wrapErrorHandler(Tu.onError,$u):$u),Lu=!Tu.scheduler&&!Tu.delay,Bu=createSchedulerFromOptions(Tu),Vu=!0,Ou=!1,Du,ku,Fu=Tu.compareStructural?comparer.structural:Tu.equals||comparer.default,Nu=new Reaction(Pu,function(){Vu||Lu?Gu():Ou||(Ou=!0,Bu(Gu))},Tu.onError,Tu.requiresObservable);function Gu(){if(Ou=!1,!Nu.isDisposed_){var zu=!1;Nu.track(function(){var Hu=allowStateChanges(!1,function(){return _u(Nu)});zu=Vu||!Fu(Du,Hu),ku=Du,Du=Hu}),(Vu&&Tu.fireImmediately||!Vu&&zu)&&Ru(Du,ku,Nu),Vu=!1}}return Nu.schedule_(),Nu.getDisposer_()}function wrapErrorHandler(_u,$u){return function(){try{return $u.apply(this,arguments)}catch(Tu){_u.call(this,Tu)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(_u,$u,Tu){return interceptHook(ON_BECOME_OBSERVED,_u,$u,Tu)}function onBecomeUnobserved(_u,$u,Tu){return interceptHook(ON_BECOME_UNOBSERVED,_u,$u,Tu)}function interceptHook(_u,$u,Tu,Cu){var Pu=typeof Cu=="function"?getAtom($u,Tu):getAtom($u),Ru=isFunction(Cu)?Cu:Tu,Lu=_u+"L";return Pu[Lu]?Pu[Lu].add(Ru):Pu[Lu]=new Set([Ru]),function(){var Bu=Pu[Lu];Bu&&(Bu.delete(Ru),Bu.size===0&&delete Pu[Lu])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(_u){_u.isolateGlobalState===!0&&isolateGlobalState();var $u=_u.useProxies,Tu=_u.enforceActions;if($u!==void 0&&(globalState.useProxies=$u===ALWAYS?!0:$u===NEVER?!1:typeof Proxy!="undefined"),$u==="ifavailable"&&(globalState.verifyProxies=!0),Tu!==void 0){var Cu=Tu===ALWAYS?ALWAYS:Tu===OBSERVED;globalState.enforceActions=Cu,globalState.allowStateChanges=!(Cu===!0||Cu===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Pu){Pu in _u&&(globalState[Pu]=!!_u[Pu])}),globalState.allowStateReads=!globalState.observableRequiresReaction,_u.reactionScheduler&&setReactionScheduler(_u.reactionScheduler)}function extendObservable(_u,$u,Tu,Cu){var Pu=getOwnPropertyDescriptors($u),Ru=asObservableObject(_u,Cu)[$mobx];startBatch();try{ownKeys(Pu).forEach(function(Lu){Ru.extend_(Lu,Pu[Lu],Tu&&Lu in Tu?Tu[Lu]:!0)})}finally{endBatch()}return _u}function getDependencyTree(_u,$u){return nodeToDependencyTree(getAtom(_u,$u))}function nodeToDependencyTree(_u){var $u={name:_u.name_};return _u.observing_&&_u.observing_.length>0&&($u.dependencies=unique(_u.observing_).map(nodeToDependencyTree)),$u}function unique(_u){return Array.from(new Set(_u))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function _u($u,Tu){if(isStringish(Tu))return storeAnnotation($u,Tu,flowAnnotation);var Cu=$u,Pu=Cu.name||"<unnamed flow>",Ru=function(){var Bu=this,Vu=arguments,Ou=++generatorId,Du=action(Pu+" - runid: "+Ou+" - init",Cu).apply(Bu,Vu),ku,Fu=void 0,Nu=new Promise(function(Gu,zu){var Hu=0;ku=zu;function Uu(Qu){Fu=void 0;var qu;try{qu=action(Pu+" - runid: "+Ou+" - yield "+Hu++,Du.next).call(Du,Qu)}catch(Yu){return zu(Yu)}Wu(qu)}function ju(Qu){Fu=void 0;var qu;try{qu=action(Pu+" - runid: "+Ou+" - yield "+Hu++,Du.throw).call(Du,Qu)}catch(Yu){return zu(Yu)}Wu(qu)}function Wu(Qu){if(isFunction(Qu==null?void 0:Qu.then)){Qu.then(Wu,zu);return}return Qu.done?Gu(Qu.value):(Fu=Promise.resolve(Qu.value),Fu.then(Uu,ju))}Uu(void 0)});return Nu.cancel=action(Pu+" - runid: "+Ou+" - cancel",function(){try{Fu&&cancelPromise(Fu);var Gu=Du.return(void 0),zu=Promise.resolve(Gu.value);zu.then(noop,noop),cancelPromise(zu),ku(new FlowCancellationError)}catch(Hu){ku(Hu)}}),Nu};return Ru.isMobXFlow=!0,Ru},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(_u){isFunction(_u.cancel)&&_u.cancel()}function isFlow(_u){return(_u==null?void 0:_u.isMobXFlow)===!0}function _isObservable(_u,$u){return _u?$u!==void 0?isObservableObject(_u)?_u[$mobx].values_.has($u):!1:isObservableObject(_u)||!!_u[$mobx]||isAtom(_u)||isReaction(_u)||isComputedValue(_u):!1}function isObservable(_u){return _isObservable(_u)}function trace(){die("trace() is not available in production builds");for(var _u=!1,$u=arguments.length,Tu=new Array($u),Cu=0;Cu<$u;Cu++)Tu[Cu]=arguments[Cu];typeof Tu[Tu.length-1]=="boolean"&&(_u=Tu.pop());var Pu=getAtomFromArgs(Tu);if(!Pu)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Pu.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Pu.name_+"' tracing enabled"),Pu.isTracing_=_u?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(_u){switch(_u.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(_u[0]);case 2:return getAtom(_u[0],_u[1])}}function transaction(_u,$u){$u===void 0&&($u=void 0),startBatch();try{return _u.apply($u)}finally{endBatch()}}function getAdm(_u){return _u[$mobx]}var objectProxyTraps={has:function _u($u,Tu){return getAdm($u).has_(Tu)},get:function _u($u,Tu){return getAdm($u).get_(Tu)},set:function _u($u,Tu,Cu){var Pu;return isStringish(Tu)?(Pu=getAdm($u).set_(Tu,Cu,!0))!=null?Pu:!0:!1},deleteProperty:function _u($u,Tu){var Cu;return isStringish(Tu)?(Cu=getAdm($u).delete_(Tu,!0))!=null?Cu:!0:!1},defineProperty:function _u($u,Tu,Cu){var Pu;return(Pu=getAdm($u).defineProperty_(Tu,Cu))!=null?Pu:!0},ownKeys:function _u($u){return getAdm($u).ownKeys_()},preventExtensions:function _u($u){die(13)}};function asDynamicObservableObject(_u,$u){var Tu,Cu;return assertProxies(),_u=asObservableObject(_u,$u),(Cu=(Tu=_u[$mobx]).proxy_)!=null?Cu:Tu.proxy_=new Proxy(_u,objectProxyTraps)}function hasInterceptors(_u){return _u.interceptors_!==void 0&&_u.interceptors_.length>0}function registerInterceptor(_u,$u){var Tu=_u.interceptors_||(_u.interceptors_=[]);return Tu.push($u),once(function(){var Cu=Tu.indexOf($u);Cu!==-1&&Tu.splice(Cu,1)})}function interceptChange(_u,$u){var Tu=untrackedStart();try{for(var Cu=[].concat(_u.interceptors_||[]),Pu=0,Ru=Cu.length;Pu<Ru&&($u=Cu[Pu]($u),$u&&!$u.type&&die(14),!!$u);Pu++);return $u}finally{untrackedEnd(Tu)}}function hasListeners(_u){return _u.changeListeners_!==void 0&&_u.changeListeners_.length>0}function registerListener(_u,$u){var Tu=_u.changeListeners_||(_u.changeListeners_=[]);return Tu.push($u),once(function(){var Cu=Tu.indexOf($u);Cu!==-1&&Tu.splice(Cu,1)})}function notifyListeners(_u,$u){var Tu=untrackedStart(),Cu=_u.changeListeners_;if(!!Cu){Cu=Cu.slice();for(var Pu=0,Ru=Cu.length;Pu<Ru;Pu++)Cu[Pu]($u);untrackedEnd(Tu)}}function makeObservable(_u,$u,Tu){var Cu=asObservableObject(_u,Tu)[$mobx];startBatch();try{var Pu;(Pu=$u)!=null||($u=collectStoredAnnotations(_u)),ownKeys($u).forEach(function(Ru){return Cu.make_(Ru,$u[Ru])})}finally{endBatch()}return _u}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function _u($u,Tu){var Cu=$u[$mobx];return Tu===$mobx?Cu:Tu==="length"?Cu.getArrayLength_():typeof Tu=="string"&&!isNaN(Tu)?Cu.get_(parseInt(Tu)):hasProp(arrayExtensions,Tu)?arrayExtensions[Tu]:$u[Tu]},set:function _u($u,Tu,Cu){var Pu=$u[$mobx];return Tu==="length"&&Pu.setArrayLength_(Cu),typeof Tu=="symbol"||isNaN(Tu)?$u[Tu]=Cu:Pu.set_(parseInt(Tu),Cu),!0},preventExtensions:function _u(){die(15)}},ObservableArrayAdministration=function(){function _u(Tu,Cu,Pu,Ru){Tu===void 0&&(Tu="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Pu,this.legacyMode_=Ru,this.atom_=new Atom(Tu),this.enhancer_=function(Lu,Bu){return Cu(Lu,Bu,"ObservableArray[..]")}}var $u=_u.prototype;return $u.dehanceValue_=function(Cu){return this.dehancer!==void 0?this.dehancer(Cu):Cu},$u.dehanceValues_=function(Cu){return this.dehancer!==void 0&&Cu.length>0?Cu.map(this.dehancer):Cu},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},$u.observe_=function(Cu,Pu){return Pu===void 0&&(Pu=!1),Pu&&Cu({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Cu)},$u.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},$u.setArrayLength_=function(Cu){(typeof Cu!="number"||isNaN(Cu)||Cu<0)&&die("Out of range: "+Cu);var Pu=this.values_.length;if(Cu!==Pu)if(Cu>Pu){for(var Ru=new Array(Cu-Pu),Lu=0;Lu<Cu-Pu;Lu++)Ru[Lu]=void 0;this.spliceWithArray_(Pu,0,Ru)}else this.spliceWithArray_(Cu,Pu-Cu)},$u.updateArrayLength_=function(Cu,Pu){Cu!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Pu,this.legacyMode_&&Pu>0&&reserveArrayBuffer(Cu+Pu+1)},$u.spliceWithArray_=function(Cu,Pu,Ru){var Lu=this;this.atom_;var Bu=this.values_.length;if(Cu===void 0?Cu=0:Cu>Bu?Cu=Bu:Cu<0&&(Cu=Math.max(0,Bu+Cu)),arguments.length===1?Pu=Bu-Cu:Pu==null?Pu=0:Pu=Math.max(0,Math.min(Pu,Bu-Cu)),Ru===void 0&&(Ru=EMPTY_ARRAY),hasInterceptors(this)){var Vu=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Cu,removedCount:Pu,added:Ru});if(!Vu)return EMPTY_ARRAY;Pu=Vu.removedCount,Ru=Vu.added}if(Ru=Ru.length===0?Ru:Ru.map(function(ku){return Lu.enhancer_(ku,void 0)}),this.legacyMode_){var Ou=Ru.length-Pu;this.updateArrayLength_(Bu,Ou)}var Du=this.spliceItemsIntoValues_(Cu,Pu,Ru);return(Pu!==0||Ru.length!==0)&&this.notifyArraySplice_(Cu,Ru,Du),this.dehanceValues_(Du)},$u.spliceItemsIntoValues_=function(Cu,Pu,Ru){if(Ru.length<MAX_SPLICE_SIZE){var Lu;return(Lu=this.values_).splice.apply(Lu,[Cu,Pu].concat(Ru))}else{var Bu=this.values_.slice(Cu,Cu+Pu),Vu=this.values_.slice(Cu+Pu);this.values_.length+=Ru.length-Pu;for(var Ou=0;Ou<Ru.length;Ou++)this.values_[Cu+Ou]=Ru[Ou];for(var Du=0;Du<Vu.length;Du++)this.values_[Cu+Ru.length+Du]=Vu[Du];return Bu}},$u.notifyArrayChildUpdate_=function(Cu,Pu,Ru){var Lu=!this.owned_&&isSpyEnabled(),Bu=hasListeners(this),Vu=Bu||Lu?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Cu,newValue:Pu,oldValue:Ru}:null;this.atom_.reportChanged(),Bu&&notifyListeners(this,Vu)},$u.notifyArraySplice_=function(Cu,Pu,Ru){var Lu=!this.owned_&&isSpyEnabled(),Bu=hasListeners(this),Vu=Bu||Lu?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Cu,removed:Ru,added:Pu,removedCount:Ru.length,addedCount:Pu.length}:null;this.atom_.reportChanged(),Bu&&notifyListeners(this,Vu)},$u.get_=function(Cu){if(Cu<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Cu]);console.warn("[mobx.array] Attempt to read an array index ("+Cu+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},$u.set_=function(Cu,Pu){var Ru=this.values_;if(Cu<Ru.length){this.atom_;var Lu=Ru[Cu];if(hasInterceptors(this)){var Bu=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Cu,newValue:Pu});if(!Bu)return;Pu=Bu.newValue}Pu=this.enhancer_(Pu,Lu);var Vu=Pu!==Lu;Vu&&(Ru[Cu]=Pu,this.notifyArrayChildUpdate_(Cu,Pu,Lu))}else Cu===Ru.length?this.spliceWithArray_(Cu,0,[Pu]):die(17,Cu,Ru.length)},_u}();function createObservableArray(_u,$u,Tu,Cu){Tu===void 0&&(Tu="ObservableArray"),Cu===void 0&&(Cu=!1),assertProxies();var Pu=new ObservableArrayAdministration(Tu,$u,Cu,!1);addHiddenFinalProp(Pu.values_,$mobx,Pu);var Ru=new Proxy(Pu.values_,arrayTraps);if(Pu.proxy_=Ru,_u&&_u.length){var Lu=allowStateChangesStart(!0);Pu.spliceWithArray_(0,0,_u),allowStateChangesEnd(Lu)}return Ru}var arrayExtensions={clear:function _u(){return this.splice(0)},replace:function _u($u){var Tu=this[$mobx];return Tu.spliceWithArray_(0,Tu.values_.length,$u)},toJSON:function _u(){return this.slice()},splice:function _u($u,Tu){for(var Cu=arguments.length,Pu=new Array(Cu>2?Cu-2:0),Ru=2;Ru<Cu;Ru++)Pu[Ru-2]=arguments[Ru];var Lu=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Lu.spliceWithArray_($u);case 2:return Lu.spliceWithArray_($u,Tu)}return Lu.spliceWithArray_($u,Tu,Pu)},spliceWithArray:function _u($u,Tu,Cu){return this[$mobx].spliceWithArray_($u,Tu,Cu)},push:function _u(){for(var $u=this[$mobx],Tu=arguments.length,Cu=new Array(Tu),Pu=0;Pu<Tu;Pu++)Cu[Pu]=arguments[Pu];return $u.spliceWithArray_($u.values_.length,0,Cu),$u.values_.length},pop:function _u(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function _u(){return this.splice(0,1)[0]},unshift:function _u(){for(var $u=this[$mobx],Tu=arguments.length,Cu=new Array(Tu),Pu=0;Pu<Tu;Pu++)Cu[Pu]=arguments[Pu];return $u.spliceWithArray_(0,0,Cu),$u.values_.length},reverse:function _u(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function _u(){globalState.trackingDerivation&&die(37,"sort");var $u=this.slice();return $u.sort.apply($u,arguments),this.replace($u),this},remove:function _u($u){var Tu=this[$mobx],Cu=Tu.dehanceValues_(Tu.values_).indexOf($u);return Cu>-1?(this.splice(Cu,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(_u,$u){typeof Array.prototype[_u]=="function"&&(arrayExtensions[_u]=$u(_u))}function simpleFunc(_u){return function(){var $u=this[$mobx];$u.atom_.reportObserved();var Tu=$u.dehanceValues_($u.values_);return Tu[_u].apply(Tu,arguments)}}function mapLikeFunc(_u){return function($u,Tu){var Cu=this,Pu=this[$mobx];Pu.atom_.reportObserved();var Ru=Pu.dehanceValues_(Pu.values_);return Ru[_u](function(Lu,Bu){return $u.call(Tu,Lu,Bu,Cu)})}}function reduceLikeFunc(_u){return function(){var $u=this,Tu=this[$mobx];Tu.atom_.reportObserved();var Cu=Tu.dehanceValues_(Tu.values_),Pu=arguments[0];return arguments[0]=function(Ru,Lu,Bu){return Pu(Ru,Lu,Bu,$u)},Cu[_u].apply(Cu,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(_u){return isObject(_u)&&isObservableArrayAdministration(_u[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(){function _u(Tu,Cu,Pu){var Ru=this;Cu===void 0&&(Cu=deepEnhancer),Pu===void 0&&(Pu="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Cu,this.name_=Pu,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,allowStateChanges(!0,function(){Ru.merge(Tu)})}var $u=_u.prototype;return $u.has_=function(Cu){return this.data_.has(Cu)},$u.has=function(Cu){var Pu=this;if(!globalState.trackingDerivation)return this.has_(Cu);var Ru=this.hasMap_.get(Cu);if(!Ru){var Lu=Ru=new ObservableValue(this.has_(Cu),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Cu,Lu),onBecomeUnobserved(Lu,function(){return Pu.hasMap_.delete(Cu)})}return Ru.get()},$u.set=function(Cu,Pu){var Ru=this.has_(Cu);if(hasInterceptors(this)){var Lu=interceptChange(this,{type:Ru?UPDATE:ADD,object:this,newValue:Pu,name:Cu});if(!Lu)return this;Pu=Lu.newValue}return Ru?this.updateValue_(Cu,Pu):this.addValue_(Cu,Pu),this},$u.delete=function(Cu){var Pu=this;if(this.keysAtom_,hasInterceptors(this)){var Ru=interceptChange(this,{type:DELETE,object:this,name:Cu});if(!Ru)return!1}if(this.has_(Cu)){var Lu=isSpyEnabled(),Bu=hasListeners(this),Vu=Bu||Lu?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Cu).value_,name:Cu}:null;return transaction(function(){var Ou;Pu.keysAtom_.reportChanged(),(Ou=Pu.hasMap_.get(Cu))==null||Ou.setNewValue_(!1);var Du=Pu.data_.get(Cu);Du.setNewValue_(void 0),Pu.data_.delete(Cu)}),Bu&&notifyListeners(this,Vu),!0}return!1},$u.updateValue_=function(Cu,Pu){var Ru=this.data_.get(Cu);if(Pu=Ru.prepareNewValue_(Pu),Pu!==globalState.UNCHANGED){var Lu=isSpyEnabled(),Bu=hasListeners(this),Vu=Bu||Lu?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Ru.value_,name:Cu,newValue:Pu}:null;Ru.setNewValue_(Pu),Bu&&notifyListeners(this,Vu)}},$u.addValue_=function(Cu,Pu){var Ru=this;this.keysAtom_,transaction(function(){var Ou,Du=new ObservableValue(Pu,Ru.enhancer_,"ObservableMap.key",!1);Ru.data_.set(Cu,Du),Pu=Du.value_,(Ou=Ru.hasMap_.get(Cu))==null||Ou.setNewValue_(!0),Ru.keysAtom_.reportChanged()});var Lu=isSpyEnabled(),Bu=hasListeners(this),Vu=Bu||Lu?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Cu,newValue:Pu}:null;Bu&&notifyListeners(this,Vu)},$u.get=function(Cu){return this.has(Cu)?this.dehanceValue_(this.data_.get(Cu).get()):this.dehanceValue_(void 0)},$u.dehanceValue_=function(Cu){return this.dehancer!==void 0?this.dehancer(Cu):Cu},$u.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},$u.values=function(){var Cu=this,Pu=this.keys();return makeIterable({next:function(){var Lu=Pu.next(),Bu=Lu.done,Vu=Lu.value;return{done:Bu,value:Bu?void 0:Cu.get(Vu)}}})},$u.entries=function(){var Cu=this,Pu=this.keys();return makeIterable({next:function(){var Lu=Pu.next(),Bu=Lu.done,Vu=Lu.value;return{done:Bu,value:Bu?void 0:[Vu,Cu.get(Vu)]}}})},$u[_Symbol$iterator]=function(){return this.entries()},$u.forEach=function(Cu,Pu){for(var Ru=_createForOfIteratorHelperLoose(this),Lu;!(Lu=Ru()).done;){var Bu=Lu.value,Vu=Bu[0],Ou=Bu[1];Cu.call(Pu,Ou,Vu,this)}},$u.merge=function(Cu){var Pu=this;return isObservableMap(Cu)&&(Cu=new Map(Cu)),transaction(function(){isPlainObject(Cu)?getPlainObjectKeys(Cu).forEach(function(Ru){return Pu.set(Ru,Cu[Ru])}):Array.isArray(Cu)?Cu.forEach(function(Ru){var Lu=Ru[0],Bu=Ru[1];return Pu.set(Lu,Bu)}):isES6Map(Cu)?(Cu.constructor!==Map&&die(19,Cu),Cu.forEach(function(Ru,Lu){return Pu.set(Lu,Ru)})):Cu!=null&&die(20,Cu)}),this},$u.clear=function(){var Cu=this;transaction(function(){untracked(function(){for(var Pu=_createForOfIteratorHelperLoose(Cu.keys()),Ru;!(Ru=Pu()).done;){var Lu=Ru.value;Cu.delete(Lu)}})})},$u.replace=function(Cu){var Pu=this;return transaction(function(){for(var Ru=convertToMap(Cu),Lu=new Map,Bu=!1,Vu=_createForOfIteratorHelperLoose(Pu.data_.keys()),Ou;!(Ou=Vu()).done;){var Du=Ou.value;if(!Ru.has(Du)){var ku=Pu.delete(Du);if(ku)Bu=!0;else{var Fu=Pu.data_.get(Du);Lu.set(Du,Fu)}}}for(var Nu=_createForOfIteratorHelperLoose(Ru.entries()),Gu;!(Gu=Nu()).done;){var zu=Gu.value,Hu=zu[0],Uu=zu[1],ju=Pu.data_.has(Hu);if(Pu.set(Hu,Uu),Pu.data_.has(Hu)){var Wu=Pu.data_.get(Hu);Lu.set(Hu,Wu),ju||(Bu=!0)}}if(!Bu)if(Pu.data_.size!==Lu.size)Pu.keysAtom_.reportChanged();else for(var Qu=Pu.data_.keys(),qu=Lu.keys(),Yu=Qu.next(),Ju=qu.next();!Yu.done;){if(Yu.value!==Ju.value){Pu.keysAtom_.reportChanged();break}Yu=Qu.next(),Ju=qu.next()}Pu.data_=Lu}),this},$u.toString=function(){return"[object ObservableMap]"},$u.toJSON=function(){return Array.from(this)},$u.observe_=function(Cu,Pu){return registerListener(this,Cu)},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},_createClass(_u,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag,get:function(){return"Map"}}]),_u}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(_u){if(isES6Map(_u)||isObservableMap(_u))return _u;if(Array.isArray(_u))return new Map(_u);if(isPlainObject(_u)){var $u=new Map;for(var Tu in _u)$u.set(Tu,_u[Tu]);return $u}else return die(21,_u)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(){function _u(Tu,Cu,Pu){Cu===void 0&&(Cu=deepEnhancer),Pu===void 0&&(Pu="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Pu,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Ru,Lu){return Cu(Ru,Lu,Pu)},Tu&&this.replace(Tu)}var $u=_u.prototype;return $u.dehanceValue_=function(Cu){return this.dehancer!==void 0?this.dehancer(Cu):Cu},$u.clear=function(){var Cu=this;transaction(function(){untracked(function(){for(var Pu=_createForOfIteratorHelperLoose(Cu.data_.values()),Ru;!(Ru=Pu()).done;){var Lu=Ru.value;Cu.delete(Lu)}})})},$u.forEach=function(Cu,Pu){for(var Ru=_createForOfIteratorHelperLoose(this),Lu;!(Lu=Ru()).done;){var Bu=Lu.value;Cu.call(Pu,Bu,Bu,this)}},$u.add=function(Cu){var Pu=this;if(this.atom_,hasInterceptors(this)){var Ru=interceptChange(this,{type:ADD,object:this,newValue:Cu});if(!Ru)return this}if(!this.has(Cu)){transaction(function(){Pu.data_.add(Pu.enhancer_(Cu,void 0)),Pu.atom_.reportChanged()});var Lu=!1,Bu=hasListeners(this),Vu=Bu||Lu?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Cu}:null;Bu&&notifyListeners(this,Vu)}return this},$u.delete=function(Cu){var Pu=this;if(hasInterceptors(this)){var Ru=interceptChange(this,{type:DELETE,object:this,oldValue:Cu});if(!Ru)return!1}if(this.has(Cu)){var Lu=!1,Bu=hasListeners(this),Vu=Bu||Lu?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Cu}:null;return transaction(function(){Pu.atom_.reportChanged(),Pu.data_.delete(Cu)}),Bu&&notifyListeners(this,Vu),!0}return!1},$u.has=function(Cu){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Cu))},$u.entries=function(){var Cu=0,Pu=Array.from(this.keys()),Ru=Array.from(this.values());return makeIterable({next:function(){var Bu=Cu;return Cu+=1,Bu<Ru.length?{value:[Pu[Bu],Ru[Bu]],done:!1}:{done:!0}}})},$u.keys=function(){return this.values()},$u.values=function(){this.atom_.reportObserved();var Cu=this,Pu=0,Ru=Array.from(this.data_.values());return makeIterable({next:function(){return Pu<Ru.length?{value:Cu.dehanceValue_(Ru[Pu++]),done:!1}:{done:!0}}})},$u.replace=function(Cu){var Pu=this;return isObservableSet(Cu)&&(Cu=new Set(Cu)),transaction(function(){Array.isArray(Cu)?(Pu.clear(),Cu.forEach(function(Ru){return Pu.add(Ru)})):isES6Set(Cu)?(Pu.clear(),Cu.forEach(function(Ru){return Pu.add(Ru)})):Cu!=null&&die("Cannot initialize set from "+Cu)}),this},$u.observe_=function(Cu,Pu){return registerListener(this,Cu)},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},$u.toJSON=function(){return Array.from(this)},$u.toString=function(){return"[object ObservableSet]"},$u[_Symbol$iterator$1]=function(){return this.values()},_createClass(_u,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag$1,get:function(){return"Set"}}]),_u}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function _u(Tu,Cu,Pu,Ru){Cu===void 0&&(Cu=new Map),Ru===void 0&&(Ru=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=Tu,this.values_=Cu,this.name_=Pu,this.defaultAnnotation_=Ru,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var $u=_u.prototype;return $u.getObservablePropValue_=function(Cu){return this.values_.get(Cu).get()},$u.setObservablePropValue_=function(Cu,Pu){var Ru=this.values_.get(Cu);if(Ru instanceof ComputedValue)return Ru.set(Pu),!0;if(hasInterceptors(this)){var Lu=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Cu,newValue:Pu});if(!Lu)return null;Pu=Lu.newValue}if(Pu=Ru.prepareNewValue_(Pu),Pu!==globalState.UNCHANGED){var Bu=hasListeners(this),Vu=!1,Ou=Bu||Vu?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Ru.value_,name:Cu,newValue:Pu}:null;Ru.setNewValue_(Pu),Bu&&notifyListeners(this,Ou)}return!0},$u.get_=function(Cu){return globalState.trackingDerivation&&!hasProp(this.target_,Cu)&&this.has_(Cu),this.target_[Cu]},$u.set_=function(Cu,Pu,Ru){return Ru===void 0&&(Ru=!1),hasProp(this.target_,Cu)?this.values_.has(Cu)?this.setObservablePropValue_(Cu,Pu):Ru?Reflect.set(this.target_,Cu,Pu):(this.target_[Cu]=Pu,!0):this.extend_(Cu,{value:Pu,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Ru)},$u.has_=function(Cu){if(!globalState.trackingDerivation)return Cu in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Pu=this.pendingKeys_.get(Cu);return Pu||(Pu=new ObservableValue(Cu in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Cu,Pu)),Pu.get()},$u.make_=function(Cu,Pu){if(Pu===!0&&(Pu=this.defaultAnnotation_),Pu!==!1){if(!(Cu in this.target_)){var Ru;if((Ru=this.target_[storedAnnotationsSymbol])!=null&&Ru[Cu])return;die(1,Pu.annotationType_,this.name_+"."+Cu.toString())}for(var Lu=this.target_;Lu&&Lu!==objectPrototype;){var Bu=getDescriptor(Lu,Cu);if(Bu){var Vu=Pu.make_(this,Cu,Bu,Lu);if(Vu===0)return;if(Vu===1)break}Lu=Object.getPrototypeOf(Lu)}recordAnnotationApplied(this,Pu,Cu)}},$u.extend_=function(Cu,Pu,Ru,Lu){if(Lu===void 0&&(Lu=!1),Ru===!0&&(Ru=this.defaultAnnotation_),Ru===!1)return this.defineProperty_(Cu,Pu,Lu);var Bu=Ru.extend_(this,Cu,Pu,Lu);return Bu&&recordAnnotationApplied(this,Ru,Cu),Bu},$u.defineProperty_=function(Cu,Pu,Ru){Ru===void 0&&(Ru=!1);try{startBatch();var Lu=this.delete_(Cu);if(!Lu)return Lu;if(hasInterceptors(this)){var Bu=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:ADD,newValue:Pu.value});if(!Bu)return null;var Vu=Bu.newValue;Pu.value!==Vu&&(Pu=_extends({},Pu,{value:Vu}))}if(Ru){if(!Reflect.defineProperty(this.target_,Cu,Pu))return!1}else defineProperty(this.target_,Cu,Pu);this.notifyPropertyAddition_(Cu,Pu.value)}finally{endBatch()}return!0},$u.defineObservableProperty_=function(Cu,Pu,Ru,Lu){Lu===void 0&&(Lu=!1);try{startBatch();var Bu=this.delete_(Cu);if(!Bu)return Bu;if(hasInterceptors(this)){var Vu=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:ADD,newValue:Pu});if(!Vu)return null;Pu=Vu.newValue}var Ou=getCachedObservablePropDescriptor(Cu),Du={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Ou.get,set:Ou.set};if(Lu){if(!Reflect.defineProperty(this.target_,Cu,Du))return!1}else defineProperty(this.target_,Cu,Du);var ku=new ObservableValue(Pu,Ru,"ObservableObject.key",!1);this.values_.set(Cu,ku),this.notifyPropertyAddition_(Cu,ku.value_)}finally{endBatch()}return!0},$u.defineComputedProperty_=function(Cu,Pu,Ru){Ru===void 0&&(Ru=!1);try{startBatch();var Lu=this.delete_(Cu);if(!Lu)return Lu;if(hasInterceptors(this)){var Bu=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:ADD,newValue:void 0});if(!Bu)return null}Pu.name||(Pu.name="ObservableObject.key"),Pu.context=this.proxy_||this.target_;var Vu=getCachedObservablePropDescriptor(Cu),Ou={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Vu.get,set:Vu.set};if(Ru){if(!Reflect.defineProperty(this.target_,Cu,Ou))return!1}else defineProperty(this.target_,Cu,Ou);this.values_.set(Cu,new ComputedValue(Pu)),this.notifyPropertyAddition_(Cu,void 0)}finally{endBatch()}return!0},$u.delete_=function(Cu,Pu){if(Pu===void 0&&(Pu=!1),!hasProp(this.target_,Cu))return!0;if(hasInterceptors(this)){var Ru=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:REMOVE});if(!Ru)return null}try{var Lu,Bu;startBatch();var Vu=hasListeners(this),Ou=!1,Du=this.values_.get(Cu),ku=void 0;if(!Du&&(Vu||Ou)){var Fu;ku=(Fu=getDescriptor(this.target_,Cu))==null?void 0:Fu.value}if(Pu){if(!Reflect.deleteProperty(this.target_,Cu))return!1}else delete this.target_[Cu];if(Du&&(this.values_.delete(Cu),Du instanceof ObservableValue&&(ku=Du.value_),propagateChanged(Du)),this.keysAtom_.reportChanged(),(Lu=this.pendingKeys_)==null||(Bu=Lu.get(Cu))==null||Bu.set(Cu in this.target_),Vu||Ou){var Nu={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:ku,name:Cu};Vu&&notifyListeners(this,Nu)}}finally{endBatch()}return!0},$u.observe_=function(Cu,Pu){return registerListener(this,Cu)},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},$u.notifyPropertyAddition_=function(Cu,Pu){var Ru,Lu,Bu=hasListeners(this),Vu=!1;if(Bu||Vu){var Ou=Bu||Vu?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Cu,newValue:Pu}:null;Bu&&notifyListeners(this,Ou)}(Ru=this.pendingKeys_)==null||(Lu=Ru.get(Cu))==null||Lu.set(!0),this.keysAtom_.reportChanged()},$u.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},$u.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},_u}();function asObservableObject(_u,$u){var Tu;if(hasProp(_u,$mobx))return _u;var Cu=(Tu=$u==null?void 0:$u.name)!=null?Tu:"ObservableObject",Pu=new ObservableObjectAdministration(_u,new Map,String(Cu),getAnnotationFromOptions($u));return addHiddenProp(_u,$mobx,Pu),_u}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(_u){return descriptorCache[_u]||(descriptorCache[_u]={get:function(){return this[$mobx].getObservablePropValue_(_u)},set:function(Tu){return this[$mobx].setObservablePropValue_(_u,Tu)}})}function isObservableObject(_u){return isObject(_u)?isObservableObjectAdministration(_u[$mobx]):!1}function recordAnnotationApplied(_u,$u,Tu){var Cu;(Cu=_u.target_[storedAnnotationsSymbol])==null||delete Cu[Tu]}var ENTRY_0=createArrayEntryDescriptor(0),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function _u(){};function inherit(_u,$u){Object.setPrototypeOf?Object.setPrototypeOf(_u.prototype,$u):_u.prototype.__proto__!==void 0?_u.prototype.__proto__=$u:_u.prototype=$u}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(_u,$u,Tu){_inheritsLoose(Cu,_u);function Cu(Ru,Lu,Bu,Vu){var Ou;Bu===void 0&&(Bu="ObservableArray"),Vu===void 0&&(Vu=!1),Ou=_u.call(this)||this;var Du=new ObservableArrayAdministration(Bu,Lu,Vu,!0);if(Du.proxy_=_assertThisInitialized(Ou),addHiddenFinalProp(_assertThisInitialized(Ou),$mobx,Du),Ru&&Ru.length){var ku=allowStateChangesStart(!0);Ou.spliceWithArray(0,0,Ru),allowStateChangesEnd(ku)}return Object.defineProperty(_assertThisInitialized(Ou),"0",ENTRY_0),Ou}var Pu=Cu.prototype;return Pu.concat=function(){this[$mobx].atom_.reportObserved();for(var Lu=arguments.length,Bu=new Array(Lu),Vu=0;Vu<Lu;Vu++)Bu[Vu]=arguments[Vu];return Array.prototype.concat.apply(this.slice(),Bu.map(function(Ou){return isObservableArray(Ou)?Ou.slice():Ou}))},Pu[Tu]=function(){var Ru=this,Lu=0;return makeIterable({next:function(){return Lu<Ru.length?{value:Ru[Lu++],done:!1}:{done:!0,value:void 0}}})},_createClass(Cu,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Lu){this[$mobx].setArrayLength_(Lu)}},{key:$u,get:function(){return"Array"}}]),Cu}(StubArray,Symbol.toStringTag,Symbol.iterator);Object.entries(arrayExtensions).forEach(function(_u){var $u=_u[0],Tu=_u[1];$u!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,$u,Tu)});function createArrayEntryDescriptor(_u){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(_u)},set:function(Tu){this[$mobx].set_(_u,Tu)}}}function createArrayBufferItem(_u){defineProperty(LegacyObservableArray.prototype,""+_u,createArrayEntryDescriptor(_u))}function reserveArrayBuffer(_u){if(_u>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var $u=OBSERVABLE_ARRAY_BUFFER_SIZE;$u<_u+100;$u++)createArrayBufferItem($u);OBSERVABLE_ARRAY_BUFFER_SIZE=_u}}reserveArrayBuffer(1e3);function createLegacyArray(_u,$u,Tu){return new LegacyObservableArray(_u,$u,Tu)}function getAtom(_u,$u){if(typeof _u=="object"&&_u!==null){if(isObservableArray(_u))return $u!==void 0&&die(23),_u[$mobx].atom_;if(isObservableSet(_u))return _u[$mobx];if(isObservableMap(_u)){if($u===void 0)return _u.keysAtom_;var Tu=_u.data_.get($u)||_u.hasMap_.get($u);return Tu||die(25,$u,getDebugName(_u)),Tu}if(isObservableObject(_u)){if(!$u)return die(26);var Cu=_u[$mobx].values_.get($u);return Cu||die(27,$u,getDebugName(_u)),Cu}if(isAtom(_u)||isComputedValue(_u)||isReaction(_u))return _u}else if(isFunction(_u)&&isReaction(_u[$mobx]))return _u[$mobx];die(28)}function getAdministration(_u,$u){if(_u||die(29),$u!==void 0)return getAdministration(getAtom(_u,$u));if(isAtom(_u)||isComputedValue(_u)||isReaction(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(_u[$mobx])return _u[$mobx];die(24,_u)}function getDebugName(_u,$u){var Tu;if($u!==void 0)Tu=getAtom(_u,$u);else{if(isAction(_u))return _u.name;isObservableObject(_u)||isObservableMap(_u)||isObservableSet(_u)?Tu=getAdministration(_u):Tu=getAtom(_u)}return Tu.name_}var toString=objectPrototype.toString;function deepEqual(_u,$u,Tu){return Tu===void 0&&(Tu=-1),eq(_u,$u,Tu)}function eq(_u,$u,Tu,Cu,Pu){if(_u===$u)return _u!==0||1/_u===1/$u;if(_u==null||$u==null)return!1;if(_u!==_u)return $u!==$u;var Ru=typeof _u;if(Ru!=="function"&&Ru!=="object"&&typeof $u!="object")return!1;var Lu=toString.call(_u);if(Lu!==toString.call($u))return!1;switch(Lu){case"[object RegExp]":case"[object String]":return""+_u==""+$u;case"[object Number]":return+_u!=+_u?+$u!=+$u:+_u==0?1/+_u===1/$u:+_u==+$u;case"[object Date]":case"[object Boolean]":return+_u==+$u;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(_u)===Symbol.valueOf.call($u);case"[object Map]":case"[object Set]":Tu>=0&&Tu++;break}_u=unwrap(_u),$u=unwrap($u);var Bu=Lu==="[object Array]";if(!Bu){if(typeof _u!="object"||typeof $u!="object")return!1;var Vu=_u.constructor,Ou=$u.constructor;if(Vu!==Ou&&!(isFunction(Vu)&&Vu instanceof Vu&&isFunction(Ou)&&Ou instanceof Ou)&&"constructor"in _u&&"constructor"in $u)return!1}if(Tu===0)return!1;Tu<0&&(Tu=-1),Cu=Cu||[],Pu=Pu||[];for(var Du=Cu.length;Du--;)if(Cu[Du]===_u)return Pu[Du]===$u;if(Cu.push(_u),Pu.push($u),Bu){if(Du=_u.length,Du!==$u.length)return!1;for(;Du--;)if(!eq(_u[Du],$u[Du],Tu-1,Cu,Pu))return!1}else{var ku=Object.keys(_u),Fu;if(Du=ku.length,Object.keys($u).length!==Du)return!1;for(;Du--;)if(Fu=ku[Du],!(hasProp($u,Fu)&&eq(_u[Fu],$u[Fu],Tu-1,Cu,Pu)))return!1}return Cu.pop(),Pu.pop(),!0}function unwrap(_u){return isObservableArray(_u)?_u.slice():isES6Map(_u)||isObservableMap(_u)||isES6Set(_u)||isObservableSet(_u)?Array.from(_u.entries()):_u}function makeIterable(_u){return _u[Symbol.iterator]=getSelf,_u}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(_u){var $u=getGlobal();typeof $u[_u]=="undefined"&&die("MobX requires global '"+_u+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(_u){_u()}function observerBatching(_u){_u||(_u=defaultNoopBatch),configure({reactionScheduler:_u})}function printDebugValue(_u){return getDependencyTree(_u)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(_u){var $u={reaction:_u,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return $u}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(_u){var $u=new Map,Tu=1,Cu=new _u(function(Ru){var Lu=$u.get(Ru);Lu&&(Lu.reaction.dispose(),$u.delete(Ru))});return{addReactionToTrack:function(Pu,Ru,Lu){var Bu=Tu++;return Cu.register(Lu,Bu,Pu),Pu.current=createTrackingData(Ru),Pu.current.finalizationRegistryCleanupToken=Bu,$u.set(Bu,Pu.current),Pu.current},recordReactionAsCommitted:function(Pu){Cu.unregister(Pu),Pu.current&&Pu.current.finalizationRegistryCleanupToken&&$u.delete(Pu.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(_u){var $u=typeof Symbol=="function"&&Symbol.iterator,Tu=$u&&_u[$u],Cu=0;if(Tu)return Tu.call(_u);if(_u&&typeof _u.length=="number")return{next:function(){return _u&&Cu>=_u.length&&(_u=void 0),{value:_u&&_u[Cu++],done:!_u}}};throw new TypeError($u?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var _u=new Set,$u;function Tu(){$u&&(clearTimeout($u),Bu())}function Cu(){var Vu,Ou;if(_u.size>0){try{for(var Du=__values(_u),ku=Du.next();!ku.done;ku=Du.next()){var Fu=ku.value,Nu=Fu.current;Nu&&(Nu.reaction.dispose(),Fu.current=null)}}catch(Gu){Vu={error:Gu}}finally{try{ku&&!ku.done&&(Ou=Du.return)&&Ou.call(Du)}finally{if(Vu)throw Vu.error}}_u.clear()}$u&&(clearTimeout($u),$u=void 0)}function Pu(){$u===void 0&&($u=setTimeout(Bu,CLEANUP_TIMER_LOOP_MILLIS))}function Ru(Vu){_u.add(Vu),Pu()}function Lu(Vu){_u.delete(Vu)}function Bu(){$u=void 0;var Vu=Date.now();_u.forEach(function(Ou){var Du=Ou.current;Du&&Vu>=Du.cleanAt&&(Du.reaction.dispose(),Ou.current=null,_u.delete(Ou))}),_u.size>0&&Pu()}return{addReactionToTrack:function(Vu,Ou,Du){return Vu.current=createTrackingData(Ou),Ru(Vu),Vu.current},recordReactionAsCommitted:Lu,forceCleanupTimerToRunNowForTests:Tu,resetCleanupScheduleForTests:Cu}}var _a=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a.addReactionToTrack,recordReactionAsCommitted=_a.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(_u,$u){var Tu=typeof Symbol=="function"&&_u[Symbol.iterator];if(!Tu)return _u;var Cu=Tu.call(_u),Pu,Ru=[],Lu;try{for(;($u===void 0||$u-- >0)&&!(Pu=Cu.next()).done;)Ru.push(Pu.value)}catch(Bu){Lu={error:Bu}}finally{try{Pu&&!Pu.done&&(Tu=Cu.return)&&Tu.call(Cu)}finally{if(Lu)throw Lu.error}}return Ru};function observerComponentNameFor(_u){return"observer".concat(_u)}var ObjectToBeRetainedByReact=function(){function _u(){}return _u}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(_u,$u){$u===void 0&&($u="observed");var Tu=__read(React.useState(objectToBeRetainedByReactFactory),1),Cu=Tu[0],Pu=__read(React.useState(),2),Ru=Pu[1],Lu=function(){return Ru([])},Bu=React.useRef(null);if(!Bu.current)var Vu=new Reaction(observerComponentNameFor($u),function(){Ou.mounted?Lu():Ou.changedBeforeMount=!0}),Ou=addReactionToTrack(Bu,Vu,Cu);var Du=Bu.current.reaction;React.useDebugValue(Du,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Bu),Bu.current?(Bu.current.mounted=!0,Bu.current.changedBeforeMount&&(Bu.current.changedBeforeMount=!1,Lu())):(Bu.current={reaction:new Reaction(observerComponentNameFor($u),function(){Lu()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Lu()),function(){Bu.current.reaction.dispose(),Bu.current=null}},[]);var ku,Fu;if(Du.track(function(){try{ku=_u()}catch(Nu){Fu=Nu}}),Fu)throw Fu;return ku}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(_u){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(_u){return null}).$$typeof;function observer$1(_u,$u){var Tu;if(ReactMemoSymbol&&_u.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Cu=(Tu=$u==null?void 0:$u.forwardRef)!==null&&Tu!==void 0?Tu:!1,Pu=_u,Ru=_u.displayName||_u.name;if(ReactForwardRefSymbol&&_u.$$typeof===ReactForwardRefSymbol&&(Cu=!0,Pu=_u.render,typeof Pu!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Lu=function(Bu,Vu){return useObserver(function(){return Pu(Bu,Vu)},Ru)};return Ru!==""&&(Lu.displayName=Ru),_u.contextTypes&&(Lu.contextTypes=_u.contextTypes),Cu&&(Lu=react$1.exports.forwardRef(Lu)),Lu=react$1.exports.memo(Lu),copyStaticProperties(_u,Lu),Lu}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(_u,$u){Object.keys(_u).forEach(function(Tu){hoistBlackList[Tu]||Object.defineProperty($u,Tu,Object.getOwnPropertyDescriptor(_u,Tu))})}globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol(_u){if(typeof Symbol=="function")return Symbol(_u);var $u="__$mobx-react "+_u+" ("+symbolId+")";return symbolId++,$u}var createdSymbols={};function newSymbol(_u){return createdSymbols[_u]||(createdSymbols[_u]=createSymbol(_u)),createdSymbols[_u]}function shallowEqual(_u,$u){if(is$1(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Tu=Object.keys(_u),Cu=Object.keys($u);if(Tu.length!==Cu.length)return!1;for(var Pu=0;Pu<Tu.length;Pu++)if(!Object.hasOwnProperty.call($u,Tu[Pu])||!is$1(_u[Tu[Pu]],$u[Tu[Pu]]))return!1;return!0}function is$1(_u,$u){return _u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}function setHiddenProp(_u,$u,Tu){Object.hasOwnProperty.call(_u,$u)?_u[$u]=Tu:Object.defineProperty(_u,$u,{enumerable:!1,configurable:!0,writable:!0,value:Tu})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(_u,$u){var Tu=_u[mobxMixins]=_u[mobxMixins]||{},Cu=Tu[$u]=Tu[$u]||{};return Cu.locks=Cu.locks||0,Cu.methods=Cu.methods||[],Cu}function wrapper(_u,$u){for(var Tu=this,Cu=arguments.length,Pu=new Array(Cu>2?Cu-2:0),Ru=2;Ru<Cu;Ru++)Pu[Ru-2]=arguments[Ru];$u.locks++;try{var Lu;return _u!=null&&(Lu=_u.apply(this,Pu)),Lu}finally{$u.locks--,$u.locks===0&&$u.methods.forEach(function(Bu){Bu.apply(Tu,Pu)})}}function wrapFunction(_u,$u){var Tu=function(){for(var Pu=arguments.length,Ru=new Array(Pu),Lu=0;Lu<Pu;Lu++)Ru[Lu]=arguments[Lu];wrapper.call.apply(wrapper,[this,_u,$u].concat(Ru))};return Tu}function patch(_u,$u,Tu){var Cu=getMixins(_u,$u);Cu.methods.indexOf(Tu)<0&&Cu.methods.push(Tu);var Pu=Object.getOwnPropertyDescriptor(_u,$u);if(!(Pu&&Pu[mobxPatchedDefinition])){var Ru=_u[$u],Lu=createDefinition(_u,$u,Pu?Pu.enumerable:void 0,Cu,Ru);Object.defineProperty(_u,$u,Lu)}}function createDefinition(_u,$u,Tu,Cu,Pu){var Ru,Lu=wrapFunction(Pu,Cu);return Ru={},Ru[mobxPatchedDefinition]=!0,Ru.get=function(){return Lu},Ru.set=function(Vu){if(this===_u)Lu=wrapFunction(Vu,Cu);else{var Ou=createDefinition(this,$u,Tu,Cu,Vu);Object.defineProperty(this,$u,Ou)}},Ru.configurable=!0,Ru.enumerable=Tu,Ru}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(_u){var $u=_u.prototype;if(_u[mobxObserverProperty]){var Tu=getDisplayName($u);console.warn("The provided component class ("+Tu+`)
                has already been declared as an observer component.`)}else _u[mobxObserverProperty]=!0;if($u.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(_u.__proto__!==react$1.exports.PureComponent){if(!$u.shouldComponentUpdate)$u.shouldComponentUpdate=observerSCU;else if($u.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp($u,"props"),makeObservableProp($u,"state"),_u.contextType&&makeObservableProp($u,"context");var Cu=$u.render;if(typeof Cu!="function"){var Pu=getDisplayName($u);throw new Error("[mobx-react] class component ("+Pu+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return $u.render=function(){return this.render=createReactiveRender.call(this,Cu),this.render()},patch($u,"componentDidMount",function(){this[mobxIsUnmounted]=!1,this.render[mobxAdminProperty]||react$1.exports.Component.prototype.forceUpdate.call(this)}),patch($u,"componentWillUnmount",function(){var Ru=this.render[mobxAdminProperty];if(Ru)Ru.dispose(),this.render[mobxAdminProperty]=null;else{var Lu=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Lu+`)
                was overridden after MobX attached. This may result in a memory leak if the
                overridden reactive render was not properly disposed.`)}this[mobxIsUnmounted]=!0}),_u}function getDisplayName(_u){return _u.displayName||_u.name||_u.constructor&&(_u.constructor.displayName||_u.constructor.name)||"<component>"}function createReactiveRender(_u){var $u=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var Tu=getDisplayName(this),Cu=_u.bind(this),Pu=!1,Ru=function(){var Vu=new Reaction(Tu+".render()",function(){if(!Pu&&(Pu=!0,$u[mobxIsUnmounted]!==!0)){var Ou=!0;try{setHiddenProp($u,isForcingUpdateKey,!0),$u[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call($u),Ou=!1}finally{setHiddenProp($u,isForcingUpdateKey,!1),Ou&&(Vu.dispose(),$u.render[mobxAdminProperty]=null)}}});return Vu.reactComponent=$u,Vu};function Lu(){var Bu;Pu=!1;var Vu=(Bu=Lu[mobxAdminProperty])!=null?Bu:Lu[mobxAdminProperty]=Ru(),Ou=void 0,Du=void 0;if(Vu.track(function(){try{Du=allowStateChanges(!1,Cu)}catch(ku){Ou=ku}}),Ou)throw Ou;return Du}return Lu}function observerSCU(_u,$u){return this.state!==$u?!0:!shallowEqual(this.props,_u)}function makeObservableProp(_u,$u){var Tu=newSymbol("reactProp_"+$u+"_valueHolder"),Cu=newSymbol("reactProp_"+$u+"_atomHolder");function Pu(){return this[Cu]||setHiddenProp(this,Cu,createAtom("reactive "+$u)),this[Cu]}Object.defineProperty(_u,$u,{configurable:!0,enumerable:!0,get:function(){var Lu=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Lu=allowStateReadsStart(!0)),Pu.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Lu),this[Tu]},set:function(Lu){!this[isForcingUpdateKey]&&!shallowEqual(this[Tu],Lu)?(setHiddenProp(this,Tu,Lu),setHiddenProp(this,skipRenderKey,!0),Pu.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,Tu,Lu)}})}function observer(_u){return _u.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react$1.exports.Component,_u)||Object.prototype.isPrototypeOf.call(react$1.exports.PureComponent,_u)?makeClassComponentObserver(_u):observer$1(_u)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame=window.requestAnimationFrame||(_u=>setTimeout(()=>_u(performance.now()),16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function requestAnimationFrameInterval(_u,$u=60){let Tu=-1,Cu=0,Pu=-1;const Ru=1e3/$u;function Lu(Bu){Pu===-1&&(Pu=Bu),Tu=_requestAnimationFrame(Lu),!(Bu-Cu<Ru)&&(Cu=Bu,_u&&_u(Bu-Pu))}return Tu=_requestAnimationFrame(Lu),function(){_cancelAnimationFrame(Tu)}}var VreoKeyframeEnum=(_u=>(_u.CameraMovement="CameraMovement",_u.PanoTag="PanoTag",_u.PanoTextLabel="PanoTextLabel",_u.Prompter="Prompter",_u.UpdateVRPanorama="UpdateVRPanorama",_u.ModelVideo="ModelVideo",_u.PanoEffect="PanoEffect",_u.InfoPanel="InfoPanel",_u.VideoEffect="VideoEffect",_u.BgMusic="BgMusic",_u.Exit="Exit",_u.Custom="Custom",_u))(VreoKeyframeEnum||{}),InfoPanelTypeEnum=(_u=>(_u.Image="Image",_u.Video="Video",_u))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(_u=>(_u.Drawer="Drawer",_u.PopUp="PopUp",_u))(InfoPanelStyleEnum||{});function setElementDataset(_u,$u){_u&&Object.keys($u).forEach(Tu=>{const Cu=$u[Tu].toString();_u instanceof Element?_u.setAttribute(`data-${Tu}`,Cu):_u instanceof Document?_u.documentElement.setAttribute(`data-${Tu}`,Cu):_u instanceof HTMLElement?_u.dataset[Tu]=Cu:_u.setAttribute(`data-${Tu}`,Cu)})}function getFileExpandedName(_u){if(!_u)return"";const $u=_u.lastIndexOf(".");return _u.substring($u+1).toLowerCase()}function getMediaType(_u){const $u=getFileExpandedName(_u);return getMediaTypeByExpandedName($u)}function getMediaTypeByExpandedName(_u){return _u?/jpg|jpeg|png$/.test(_u)?"image":/mp3|wav$/.test(_u)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(_u)?"video":"unknown":"unknown"}class Controller extends Subscribe{constructor({five:Tu,container:Cu,configs:Pu}){super();bv(this,"five");bv(this,"configs");bv(this,"videoAgentScene");bv(this,"vreoUnit");bv(this,"stopInterval");bv(this,"playing",!1);bv(this,"ended",!1);bv(this,"loading",!1);bv(this,"containerSize",{width:0,height:0});bv(this,"appSize");bv(this,"container");bv(this,"waveAppearance",null);bv(this,"appearance",{waveStyle:"wave"});bv(this,"avatar",{});bv(this,"visible",!1);bv(this,"popUp",null);bv(this,"drawerConfig",null);this.configs=Pu,this.container=Cu,this.five=Tu,this.appSize=Pu.appSize,this.appearance={...this.appearance,...Pu.appearance},makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,loading:observable,setLoading:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,waveAppearance:observable,avatar:observable,containerSize:observable,setContainerSize:action,appearance:observable,setAppearance:action,configs:observable.ref,setEnded:action,setAvatar:action}),reaction(()=>[this.appearance.waveStyle,this.loading],([Ru,Lu])=>{if(Lu===null){this.waveAppearance=null;return}if(Ru==="wave")switch(Lu){case!0:this.waveAppearance="double";break;case!1:this.waveAppearance="solid";break}else if(Ru==="solid")switch(Lu){case!0:this.waveAppearance="swap";break;case!1:this.waveAppearance="expand";break}},{fireImmediately:!0}),this.appSize?setElementDataset(this.container,{size:this.appSize}):reaction(()=>this.containerSize,Ru=>{if(!(Ru!=null&&Ru.width))return;const Lu=Ru.width,Bu=Ru.height,Vu=(()=>Lu<=500?"S":Lu<=1024?"M":Lu<=2048?"L":"XL")(),Ou=(()=>Bu>Lu?"portrait":"landscape")();setElementDataset(this.container,{size:Vu}),setElementDataset(this.container,{orientation:Ou})},{fireImmediately:!0}),reaction(()=>this.ended,Ru=>{Ru&&this.emit("paused",!0)}),reaction(()=>this.playing,Ru=>{this.ended||this.emit(Ru?"playing":"paused")})}get agentType(){var Cu,Pu;const Tu=getMediaType((Cu=this.videoAgentScene)==null?void 0:Cu.videoAgentMesh.videoUrl);return(Pu=this.avatar)!=null&&Pu.force?"avatar":Tu==="video"?"video":"none"}openPopUp(Tu){if(!Tu){this.popUp=null;return}this.popUp=Tu}setLoading(Tu){this.loading=Tu}setAvatar(Tu){this.avatar=Tu}setContainerSize(Tu,Cu){this.containerSize={width:Tu,height:Cu}}setVisible(Tu){this.visible=Tu}setPlaying(Tu){this.playing=Tu}setEnded(Tu){this.ended=Tu}setAppearance(Tu){this.appearance={...this.appearance,...Tu}}openDrawer(Tu){var Cu;if(!Tu){this.drawerConfig={content:"",height:(Cu=this.drawerConfig)==null?void 0:Cu.height};return}this.drawerConfig=Tu}get ready(){return!!this.videoAgentScene}get currentTime(){var Tu;return((Tu=this.videoAgentScene)==null?void 0:Tu.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Cu=>{if(Cu.parsed||Cu.end<this.currentTime||Cu.start>this.currentTime)return!1;if(Cu.type===VreoKeyframeEnum.BgMusic)return!0;const Pu=this.currentTime-Cu.start;return Pu<=100&&Pu>=0}):[]}get mediaInstance(){var Tu;return(Tu=this.videoAgentScene)==null?void 0:Tu.videoAgentMesh.mediaInstance}requestAnimationFrameLoop(Tu){var Pu,Ru,Lu,Bu,Vu;if(((Pu=this.mediaInstance)==null?void 0:Pu.ended)&&this.mediaInstance.currentTime!==0){if(this.ended)return;(Ru=this.vreoUnit)==null||Ru.keyframes.forEach(Ou=>Ou.parsed=!1),this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause(),this.mediaInstance.currentTime=0;return}if(!this.playing){(Lu=this.mediaInstance)!=null&&Lu.paused||(Bu=this.mediaInstance)==null||Bu.pause();return}((Vu=this.mediaInstance)==null?void 0:Vu.paused)&&this.playing&&this.mediaInstance.play(),this.currentKeyframes.forEach(Ou=>{Ou.parsed||(Ou.parsed=!0,this.emit(Ou.type,Ou,this.currentTime),Tu&&Tu(Ou.type,Ou,this.currentTime))})}run(Tu){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop(Tu)))}clear(){var Tu,Cu;this.setPlaying(!1),(Tu=this.vreoUnit)==null||Tu.keyframes.forEach(Pu=>Pu.parsed=!1),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.pause(),this.mediaInstance.currentTime=0),(Cu=this.stopInterval)==null||Cu.call(this),this.stopInterval=void 0}dispose(){this.clear()}}const ControllerContext=react$1.exports.createContext(null);function useController(){const _u=React.useContext(ControllerContext);if(!_u)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return _u}function useFiveInstance(){const _u=useController();if(!_u.five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return _u.five}function useFiveProject2d(){const _u=useFiveInstance();return $u=>_u.project2d($u,!1)}var CameraMovementEffect=(_u=>(_u.Move="Move",_u.Rotate="Rotate",_u))(CameraMovementEffect||{}),Rotation=(_u=>(_u.Clockwise="Clockwise",_u.Anticlockwise="Anticlockwise",_u.Loop="Loop",_u))(Rotation||{});const PI$1=Math.PI,PI_2$1=PI$1*2;function progressNumber(_u,$u,Tu){return _u===$u?_u:_u+($u-_u)*Tu}function progressLongitude(_u,$u,Tu,Cu){const Pu=Tu===Rotation.Clockwise,Lu=(Pu?_u-$u:$u-_u)%PI_2$1,Bu=Lu<0?Lu+PI_2$1:Lu,Vu=Pu?-Bu:Bu;return(_u+Vu*Cu)%PI_2$1}const CameraMovementPlugin=_u=>({move:(Cu,Pu,Ru={preload:!0})=>new Promise(async(Lu,Bu)=>{var Ou;if(Ru.asyncStartCallback&&Ru.asyncStartCallback(),_u.panoIndex===void 0)return Bu(!1);if(Cu.mode&&Cu.mode!==_u.currentMode)return await _u.changeMode(Cu.mode,Cu,Pu),Lu(!0);if(Cu.mode===Five.Mode.Floorplan||(Ru.preload&&Cu.panoIndex!==void 0&&Cu.panoIndex!==_u.panoIndex&&await _u.preloadPano(Cu.panoIndex),(Ou=Ru.asyncEndCallback)==null||Ou.call(Ru),Cu.panoIndex===void 0&&Cu.fov===void 0&&Cu.latitude===void 0&&Cu.longitude===void 0))return Lu(!0);const Vu=Cu.panoIndex!==void 0?Cu.panoIndex:_u.panoIndex;if(Vu!==void 0){const Du=performance.now();await _u.ready();const ku=Object.assign(Cu,{duration:Pu-(performance.now()-Du),moveEndCallback:()=>Lu(!0),moveCancelCallback:()=>{Lu(!0)}});await _u.moveToPano(Vu,ku)}else Bu(!1)}),rotate:async(Cu,Pu,Ru={})=>{var Fu,Nu;(Fu=Ru.asyncStartCallback)==null||Fu.call(Ru),Cu.mode&&_u.currentMode!==Cu.mode&&await _u.changeMode(Cu.mode,Cu.mode===Five.Mode.Panorama?{latitude:0}:void 0),Cu.mode===Five.Mode.Panorama&&_u.currentMode===Five.Mode.Panorama&&Cu.panoIndex!==void 0&&Cu.panoIndex!==_u.panoIndex&&(Ru.preload&&await _u.preloadPano(Cu.panoIndex),await new Promise((Gu,zu)=>{_u.moveToPano(Cu.panoIndex,{moveEndCallback:()=>Gu(!0),moveCancelCallback:()=>zu(!1),effect:"fade"})})),await _u.ready(),(Nu=Ru.asyncEndCallback)==null||Nu.call(Ru);const Lu=_u.getCurrentState(),Bu=(()=>Cu)();let Vu=!1;const Ou=performance.now();let Du=Pu;Cu.rotation===Rotation.Loop&&(Du=Cu.rotateSpeed?Math.ceil(Math.abs(Bu.longitude-Lu.longitude)/Cu.rotateSpeed*1e3):Pu,Du=Math.min(Pu,Du));const ku=()=>{if(Vu){_u.off("renderFrame",ku);return}let Gu={};if(Cu.rotation!==Rotation.Loop){const zu=(performance.now()-Ou)/Pu;Gu={fov:progressNumber(Lu.fov,Bu.fov,zu),latitude:progressNumber(Lu.latitude,Bu.latitude,zu),longitude:progressLongitude(Lu.longitude,Bu.longitude,Cu.rotation,zu)}}else{const zu=(performance.now()-Ou)/Du,Hu=Math.floor(zu),Uu=zu-Hu,Wu=Hu%2===1?1-Uu:Uu;Gu={fov:progressNumber(Lu.fov,Bu.fov,Wu),latitude:progressNumber(Lu.latitude,Bu.latitude,Wu),longitude:progressNumber(Lu.longitude,Bu.longitude,Wu)}}_u.setState(Gu,!0)};return _u.on("renderFrame",ku),await new Promise(Gu=>{setTimeout(()=>{Vu=!0,_u.off("renderFrame",ku),Gu(!0)},Pu)})}});function CameraMovement(){const _u=useController(),$u=useFiveInstance(),Tu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Cu=async Pu=>{Tu.current||(Tu.current=CameraMovementPlugin($u));const{start:Ru,end:Lu,data:Bu}=Pu,Vu=Bu,Ou=Vu.effect;Ou===CameraMovementEffect.Rotate?await Tu.current.rotate(Bu,Lu-Ru):Ou===CameraMovementEffect.Move?await Tu.current.move(Bu,Lu-Ru):Vu.panoIndex!==void 0&&Vu.panoIndex!==$u.panoIndex?await Tu.current.move(Bu,Lu-Ru):await Tu.current.rotate(Bu,Lu-Ru)};return _u.on(VreoKeyframeEnum.CameraMovement,Cu),()=>{_u.off(VreoKeyframeEnum.CameraMovement,Cu)}},[_u]),jsx(Fragment,{})}const resizeObserverCache=new Map;function addResizeListener(_u,$u,Tu=!0){if(!_u)return()=>{};if(Tu&&$u(_u.clientWidth,_u.clientHeight),typeof ResizeObserver!="undefined"&&ResizeObserver){const Cu=new ResizeObserver(()=>$u(_u.clientWidth,_u.clientHeight));return Cu.observe(_u),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u&&Cu.unobserve(_u),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}}else{const Cu=document.createElement("iframe");return Cu.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",Cu.classList.add("resize-sensor-iframe"),_u.appendChild(Cu),Cu.contentWindow?(Cu.contentWindow.addEventListener("resize",()=>{$u(Cu.clientWidth,Cu.clientHeight)}),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u.removeChild(Cu),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}):()=>{}}}function hasResizeListener(_u){return _u?resizeObserverCache.get(_u)||0>0:!1}function ResizeObserver$1(){const _u=React.useRef(null),$u=useController();return React.useEffect(()=>{if(!_u.current)return;const Tu=$u.container.parentElement;if(hasResizeListener(Tu))return;const Cu=addResizeListener(Tu,(Pu,Ru)=>{$u.setContainerSize(Pu,Ru)});return()=>{Cu()}},[]),jsx("div",{className:"resizeObserver-element",ref:_u})}const isWX=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,videoElement=document.createElement("video");isWX&&(videoElement.playsInline=!0,videoElement.classList.add("vreo-infoPanelVideo"),document.body.addEventListener("click",()=>videoElement.play(),{once:!0}));function InfoPanelImg({url:_u,children:$u}){return jsx("div",{className:"vreo-infoPanel-container",children:jsxs("div",{className:"vreo-infoPanel",children:[$u,jsx("img",{src:_u})]})})}function InfoPanelVideo({url:_u,children:$u}){const Tu=react$1.exports.useRef(null);return react$1.exports.useEffect(()=>{!isWX||!Tu.current||(videoElement.src=_u,Tu.current.contains(videoElement)||Tu.current.appendChild(videoElement),videoElement.play())},[Tu.current]),jsx("div",{className:"vreo-infoPanel-container",children:jsxs("div",{className:"vreo-infoPanel",children:[$u,jsx("div",{className:"vreo-infoPanel-inner",ref:Tu,children:!isWX&&jsx("video",{playsInline:!0,autoPlay:!0,src:_u})})]})})}const Title=_u=>!_u.title&&!_u.subTitle?null:jsx(Fragment,{children:jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:_u.title}),jsx("div",{className:"vreo-infoPanel-t2",children:_u.subTitle})]})});function InfoPanel(){const _u=react$1.exports.useRef(),$u=useController();return react$1.exports.useEffect(()=>{var Cu;if(((Cu=$u.configs)==null?void 0:Cu.keyframeMap.InfoPanel)===!1)return;const Tu=Pu=>{const{start:Ru,end:Lu,data:Bu}=Pu,Vu=Bu,{title:Ou,subTitle:Du,style:ku}=Vu;do{if(ku===InfoPanelStyleEnum.PopUp){Vu.type===InfoPanelTypeEnum.Image?$u.openPopUp(jsx(InfoPanelImg,{url:Vu.url,children:jsx(Title,{title:Ou,subTitle:Du})})):Vu.type===InfoPanelTypeEnum.Video&&$u.openPopUp(jsx(InfoPanelVideo,{url:Vu.url,children:jsx(Title,{title:Ou,subTitle:Du})}));break}Vu.type===InfoPanelTypeEnum.Image?$u.openDrawer({content:jsx(InfoPanelImg,{url:Vu.url,children:jsx(Title,{title:Ou,subTitle:Du})}),height:"60vh"}):Vu.type===InfoPanelTypeEnum.Video&&$u.openDrawer({content:jsx(InfoPanelVideo,{url:Vu.url,children:jsx(Title,{title:Ou,subTitle:Du})}),height:"60vh"})}while(!1);_u.current=setTimeout(()=>{$u.openDrawer(!1),$u.openPopUp(!1)},Lu-Ru)};return $u.on(VreoKeyframeEnum.InfoPanel,Tu),()=>{$u.off(VreoKeyframeEnum.InfoPanel,Tu),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}const ModelTVVideoPlugin=(_u,{videoElement:$u})=>{const Tu={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:$u},Cu=ku=>{Tu.videoTexture&&(Tu.videoTexture.image.muted=ku,Tu.videoTexture.image.play())},Pu=()=>Tu.videoTexture?Tu.videoTexture.image.muted:!0,Ru=()=>{if(Tu.enabled||!Tu.videoTexture)return;Tu.enabled=!0,Tu.videoMeshes=Bu(),Tu.videoMeshes.forEach(Fu=>_u.scene.add(Fu));const ku=()=>{if(!Tu.videoTexture)return;const Fu=()=>{var Nu;!Tu.videoTexture||((Nu=Tu.videoTexture)==null||Nu.image.removeEventListener("timeupdate",Fu),Tu.videoTextureEnabled=!0,Tu.videoMeshes.forEach(Gu=>{Gu.material.map!==Tu.videoTexture&&(Gu.material.map=Tu.videoTexture)}),_u.needsRender=!0)};Tu.videoTexture.image.addEventListener("timeupdate",Fu),Tu.videoTexture&&Tu.videoMeshes.length&&Tu.videoTexture.image.play()};if(_u.model.loaded)ku();else return _u.once("modelLoaded",()=>ku())},Lu=()=>{!Tu.enabled||(Tu.enabled=!1,Tu.videoMeshes.forEach(ku=>{ku.geometry.dispose(),ku.material.dispose(),_u.scene.remove(ku),Tu.videoTexture&&Tu.videoTexture.image.pause()}),Tu.videoMeshes=[],_u.needsRender=!0)},Bu=()=>Tu.rectPoints.map((ku,Fu)=>{const Nu=new BufferGeometry,Gu=128,zu=[];zu.push(ku[0].x,ku[0].y,ku[0].z);for(let Qu=1;Qu<Gu;Qu++)zu.push(ku[0].x+(ku[1].x-ku[0].x)*Qu/Gu,ku[0].y+(ku[1].y-ku[0].y)*Qu/Gu,ku[0].z+(ku[1].z-ku[0].z)*Qu/Gu);zu.push(ku[1].x,ku[1].y,ku[1].z),zu.push(ku[2].x,ku[2].y,ku[2].z);for(let Qu=1;Qu<Gu;Qu++)zu.push(ku[2].x+(ku[3].x-ku[2].x)*Qu/Gu,ku[2].y+(ku[3].y-ku[2].y)*Qu/Gu,ku[2].z+(ku[3].z-ku[2].z)*Qu/Gu);zu.push(ku[3].x,ku[3].y,ku[3].z);const Hu=[];Hu.push(0,1);for(let Qu=1;Qu<Gu;Qu++)Hu.push(0,1-Qu/Gu);Hu.push(0,0),Hu.push(1,0);for(let Qu=1;Qu<Gu;Qu++)Hu.push(1,Qu/Gu);Hu.push(1,1);const Uu=[];for(let Qu=0;Qu<Gu;Qu++)Uu.push(Qu,Qu+1,Gu*2-Qu,Qu,Gu*2-Qu,Gu*2+1-Qu);Nu.setAttribute("position",new BufferAttribute(new Float32Array(zu),3)),Nu.setAttribute("uv",new BufferAttribute(new Float32Array(Hu),2)),Nu.setIndex(new BufferAttribute(new Uint32Array(Uu),1));const ju=new MeshBasicMaterial({map:Tu.videoTextureEnabled?Tu.videoTexture:Tu.imageTexture,side:DoubleSide}),Wu=new Mesh(Nu,ju);return Wu.renderOrder=1,Wu.name=`video-${Fu}-${performance.now()}`,Wu}),Vu=ku=>{const Fu=new TextureLoader().load(ku);return Fu.minFilter=LinearFilter,Fu.magFilter=LinearFilter,Fu.format=RGBFormat,Fu},Ou=(ku,Fu)=>new Promise((Nu,Gu)=>{const zu=new XMLHttpRequest;zu.onreadystatechange=()=>{if(zu.readyState==4)if(zu.status==200){const Hu=window.URL||window.webkitURL;Fu=Fu||document.createElement("video"),Fu.crossOrigin="anonymous",Fu.autoplay=!0,Fu.muted=!0,Fu.loop=!0,Fu.playsInline=!0,Fu.src=Hu.createObjectURL(zu.response);const Uu=new VideoTexture(Fu);Uu.minFilter=LinearFilter,Uu.magFilter=LinearFilter,Uu.format=RGBFormat,Nu(Object.assign(Uu,{videoSource:ku}))}else Gu(new Error("Video download Error: "+zu.status))},zu.onerror=Hu=>Gu(Hu),zu.open("GET",ku),zu.responseType="blob",zu.send()}),Du=async(ku,Fu)=>{const{video_src:Nu,video_poster_src:Gu,points:zu}=ku;Tu.videoSource=Nu,Tu.rectPoints=zu.map(Hu=>Hu.map(({x:Uu,y:ju,z:Wu})=>new Vector3(Uu,ju,Wu))),Tu.imageTexture=Vu(Gu),Fu&&(Tu.videoElement=Fu),Tu.videoTexture=await Ou(Tu.videoSource,Tu.videoElement),Tu.enabled=!!ku.enable,Tu.enabled&&Ru()};return _u.on("modeChange",()=>Cu(!0)),_u.on("wantsTapGesture",ku=>{if(!Tu.enabled)return;const[Fu]=ku.intersectObjects(_u.scene.children,!0);if(!!Fu&&/^video/.test(Fu.object.name))return Tu.videoTexture&&Cu(!Tu.videoTexture.image.muted),!1}),_u.on("panoArrived",()=>{if(!Tu.enabled||Pu())return;const ku=_u.camera.position;Tu.rectPoints.find(Nu=>{const Gu=Nu.reduce((zu,Hu)=>new Vector3(zu.x+Hu.x/Nu.length,zu.y+Hu.y/Nu.length,zu.z+Hu.z/Nu.length),new Vector3);return Nu.map(zu=>new Vector3((zu.x+Gu.x)/2,(zu.y+Gu.y)/2,(zu.z+Gu.z)/2)).filter(zu=>{zu=zu.clone().sub(ku).normalize();const Hu=new Raycaster(ku,zu),[Uu]=Hu.intersectObjects(_u.scene.children,!0);return!!Uu&&/^video/.test(Uu.object.name)}).length>=2})||Cu(!0)}),_u.on("renderFrame",()=>{Tu.videoMeshes.forEach(ku=>{ku&&(ku.needsRender=!0)})}),_u.on("load",ku=>{ku.modelTVVideoData&&Du(ku.modelTVVideoData)}),{enable:Ru,disable:Lu,load:Du}};function createTransMatrix(_u){const $u=new Matrix4;return $u.fromArray(_u),Tu=>{const Cu=new Vector3(...Tu);return Cu.applyMatrix4($u),Cu.toArray()}}function ModelVideo(){const _u=useController(),$u=useFiveInstance(),Tu=react$1.exports.useRef(),Cu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Pu=async Ru=>{var Gu,zu;Tu.current||(Tu.current=ModelTVVideoPlugin($u,{}));const{start:Lu,end:Bu}=Ru,{videoSrc:Vu,videoPosterSrc:Ou,vertexs:Du,matrixWorld:ku}=Ru.data,Fu=(()=>{if(Du.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(Du.length===4)return Du;const Hu=new Box3;return Du.forEach(Uu=>Hu.expandByPoint(new Vector3(Uu.x,Uu.y,Uu.z))),[new Vector3(Hu.min.x,Hu.max.y,Hu.max.z),new Vector3(Hu.min.x,Hu.min.y,Hu.max.z),new Vector3(Hu.max.x,Hu.min.y,Hu.max.z),new Vector3(Hu.max.x,Hu.max.y,Hu.max.z)]})(),Nu=(()=>{if(ku){const Hu=createTransMatrix(ku);return[Fu.map(Uu=>{const ju=Hu([Uu.x,Uu.y,Uu.z]);return{x:ju[0],y:ju[1],z:ju[2]}})]}return[Fu]})();Tu.current.disable(),await Tu.current.load({video_src:Vu,video_poster_src:Ou,points:Nu},(zu=(Gu=_u.configs)==null?void 0:Gu.videos)==null?void 0:zu.modelTVVideo),Tu.current.enable(),Cu.current=setTimeout(()=>{var Hu;return(Hu=Tu.current)==null?void 0:Hu.disable()},Bu-Lu)};return _u.on(VreoKeyframeEnum.ModelVideo,Pu),()=>{_u.off(VreoKeyframeEnum.ModelVideo,Pu),Cu.current&&clearTimeout(Cu.current)}},[_u]),jsx(Fragment,{})}var line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t$f=tslib.exports;function e$e(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Tu){if(Tu!=="default"){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}}),$u.default=_u,Object.freeze($u)}var n$j=e$e(require$$1),i$k=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.type="LineSegmentsGeometry",Tu.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),Tu.setAttribute("position",new n$j.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),Tu.setAttribute("uv",new n$j.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),Tu}return t$f.__extends($u,_u),$u.prototype.applyMatrix4=function(Tu){var Cu=this.attributes.instanceStart,Pu=this.attributes.instanceEnd;return Cu!==void 0&&(Cu.applyMatrix4(Tu),Pu.applyMatrix4(Tu),Cu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},$u.prototype.setPositions=function(Tu){var Cu;Cu=Tu instanceof Float32Array?Tu:Array.isArray(Tu)?new Float32Array(Tu):new Float32Array;var Pu=new n$j.InstancedInterleavedBuffer(Cu,6,1);return this.setAttribute("instanceStart",new n$j.InterleavedBufferAttribute(Pu,3,0)),this.setAttribute("instanceEnd",new n$j.InterleavedBufferAttribute(Pu,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},$u.prototype.setColors=function(Tu){var Cu;Cu=Tu instanceof Float32Array?Tu:Array.isArray(Tu)?new Float32Array(Tu):new Float32Array;var Pu=new n$j.InstancedInterleavedBuffer(Cu,6,1);return this.setAttribute("instanceColorStart",new n$j.InterleavedBufferAttribute(Pu,3,0)),this.setAttribute("instanceColorEnd",new n$j.InterleavedBufferAttribute(Pu,3,3)),this},$u.prototype.fromWireframeGeometry=function(Tu){return this.setPositions(Tu.attributes.position.array),this},$u.prototype.fromEdgesGeometry=function(Tu){return this.setPositions(Tu.attributes.position.array),this},$u.prototype.fromMesh=function(Tu){return this.fromWireframeGeometry(new n$j.WireframeGeometry(Tu.geometry)),this},$u.prototype.fromLineSegments=function(Tu){var Cu=Tu.geometry;if(Cu instanceof n$j.Geometry){var Pu=new n$j.BufferGeometry().fromGeometry(Cu);this.setPositions(Pu.attributes.position.array)}else Cu instanceof n$j.BufferGeometry&&this.setPositions(Cu.attributes.position.array);return this},$u.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n$j.Box3);var Tu=this.attributes.instanceStart,Cu=this.attributes.instanceEnd;if(Tu!==void 0&&Cu!==void 0){var Pu=new n$j.Box3;this.boundingBox.setFromBufferAttribute(Tu),Pu.setFromBufferAttribute(Cu),this.boundingBox.union(Pu)}},$u.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n$j.Sphere),this.boundingBox===null&&this.computeBoundingBox();var Tu=this.attributes.instanceStart,Cu=this.attributes.instanceEnd;if(Tu!==void 0&&Cu!==void 0){var Pu=this.boundingSphere.center;this.boundingBox.getCenter(Pu);for(var Ru=0,Lu=new n$j.Vector3,Bu=0,Vu=Tu.count;Bu<Vu;Bu++)Lu.fromBufferAttribute(Tu,Bu),Ru=Math.max(Ru,Pu.distanceToSquared(Lu)),Lu.fromBufferAttribute(Cu,Bu),Ru=Math.max(Ru,Pu.distanceToSquared(Lu));this.boundingSphere.radius=Math.sqrt(Ru),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},$u.prototype.toJSON=function(){},$u}(n$j.InstancedBufferGeometry);Object.assign(i$k.prototype,{isLineSegmentsGeometry:!0});var r$l={uniforms:n$j.UniformsUtils.merge([n$j.UniformsLib.common,n$j.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n$j.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o$g=function(_u){function $u(Tu){var Cu=_u.call(this,{uniforms:n$j.UniformsUtils.clone(r$l.uniforms),vertexShader:r$l.vertexShader,fragmentShader:r$l.fragmentShader,clipping:!0})||this;return Cu.type="LineMaterial",Cu.dashed=!1,Object.defineProperties(Cu,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Pu){this.uniforms.diffuse.value=Pu}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Pu){this.uniforms.linewidth.value=Pu}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Pu){this.uniforms.dashScale.value=Pu}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Pu){this.uniforms.dashSize.value=Pu}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Pu){this.uniforms.gapSize.value=Pu}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Pu){this.uniforms.opacity.value=Pu}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Pu){this.uniforms.resolution.value.copy(Pu)}}}),Cu.setValues(Tu),Cu}return t$f.__extends($u,_u),$u}(n$j.ShaderMaterial);Object.assign(o$g.prototype,{isLineMaterial:!0});var a$i=function(_u){function $u(Tu,Cu){var Pu=_u.call(this)||this;return Pu.type="LineSegments2",Pu.geometry=Tu!==void 0?Tu:new i$k,Pu.material=Cu!==void 0?Cu:new o$g({color:16777215*Math.random()}),Pu}return t$f.__extends($u,_u),$u.prototype.computeLineDistances=function(){for(var Tu=this.geometry,Cu=Tu.attributes.instanceStart,Pu=Tu.attributes.instanceEnd,Ru=new Float32Array(2*Cu.count),Lu=new n$j.Vector3,Bu=new n$j.Vector3,Vu=0,Ou=0,Du=Cu.count;Vu<Du;Vu++,Ou+=2)Lu.fromBufferAttribute(Cu,Vu),Bu.fromBufferAttribute(Pu,Vu),Ru[Ou]=Ou===0?0:Ru[Ou-1],Ru[Ou+1]=Ru[Ou]+Lu.distanceTo(Bu);var ku=new n$j.InstancedInterleavedBuffer(Ru,2,1);return Tu.setAttribute("instanceDistanceStart",new n$j.InterleavedBufferAttribute(ku,1,0)),Tu.setAttribute("instanceDistanceEnd",new n$j.InterleavedBufferAttribute(ku,1,1)),this},$u.prototype.raycast=function(Tu,Cu){Tu.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Pu=Tu.ray,Ru=Tu.camera,Lu=Ru.projectionMatrix,Bu=this.geometry,Vu=this.material,Ou=Vu.resolution,Du=Vu.linewidth,ku=Bu.attributes.instanceStart,Fu=Bu.attributes.instanceEnd,Nu=new n$j.Vector4,Gu=new n$j.Vector4,zu=new n$j.Vector4,Hu=new n$j.Vector3,Uu=new n$j.Matrix4,ju=new n$j.Line3,Wu=new n$j.Vector3;Pu.at(1,zu),zu.w=1,zu.applyMatrix4(Ru.matrixWorldInverse),zu.applyMatrix4(Lu),zu.multiplyScalar(1/zu.w),zu.x*=Ou.x/2,zu.y*=Ou.y/2,zu.z=0,Hu.copy(zu);var Qu=this.matrixWorld;Uu.multiplyMatrices(Ru.matrixWorldInverse,Qu);for(var qu=0,Yu=ku.count;qu<Yu;qu++){Nu.fromBufferAttribute(ku,qu),Gu.fromBufferAttribute(Fu,qu),Nu.w=1,Gu.w=1,Nu.applyMatrix4(Uu),Gu.applyMatrix4(Uu),Nu.applyMatrix4(Lu),Gu.applyMatrix4(Lu),Nu.multiplyScalar(1/Nu.w),Gu.multiplyScalar(1/Gu.w);var Ju=Nu.z<-1&&Gu.z<-1,_d=Nu.z>1&&Gu.z>1;if(!Ju&&!_d){Nu.x*=Ou.x/2,Nu.y*=Ou.y/2,Gu.x*=Ou.x/2,Gu.y*=Ou.y/2,ju.start.copy(Nu),ju.start.z=0,ju.end.copy(Gu),ju.end.z=0;var tp=ju.closestPointToPointParameter(Hu,!0);ju.at(tp,Wu);var Ku=n$j.MathUtils.lerp(Nu.z,Gu.z,tp),Xu=Ku>=-1&&Ku<=1,Zu=Hu.distanceTo(Wu)<.5*Du;if(Xu&&Zu){ju.start.fromBufferAttribute(ku,qu),ju.end.fromBufferAttribute(Fu,qu),ju.start.applyMatrix4(Qu),ju.end.applyMatrix4(Qu);var _c=new n$j.Vector3,Xc=new n$j.Vector3;Pu.distanceSqToSegment(ju.start,ju.end,Xc,_c),Cu.push({point:Xc,pointOnLine:_c,distance:Pu.origin.distanceTo(Xc),object:this,faceIndex:qu})}}}},$u}(n$j.Mesh);Object.assign(a$i.prototype,{isLineSegments2:!0});var s$i=function(_u){function $u(Tu,Cu){var Pu=_u.call(this,Tu,Cu)||this;return Pu.type="Line2",Pu}return t$f.__extends($u,_u),$u}(a$i);Object.assign(s$i.prototype,{isLine2:!0});var u$i=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.type="LineGeometry",Tu}return t$f.__extends($u,_u),$u.prototype.setPositions=function(Tu){for(var Cu=Tu.length-3,Pu=new Float32Array(2*Cu),Ru=0;Ru<Cu;Ru+=3)Pu[2*Ru]=Tu[Ru],Pu[2*Ru+1]=Tu[Ru+1],Pu[2*Ru+2]=Tu[Ru+2],Pu[2*Ru+3]=Tu[Ru+3],Pu[2*Ru+4]=Tu[Ru+4],Pu[2*Ru+5]=Tu[Ru+5];return _u.prototype.setPositions.call(this,Pu),this},$u.prototype.setColors=function(Tu){for(var Cu=Tu.length-3,Pu=new Float32Array(2*Cu),Ru=0;Ru<Cu;Ru+=3)Pu[2*Ru]=Tu[Ru],Pu[2*Ru+1]=Tu[Ru+1],Pu[2*Ru+2]=Tu[Ru+2],Pu[2*Ru+3]=Tu[Ru+3],Pu[2*Ru+4]=Tu[Ru+4],Pu[2*Ru+5]=Tu[Ru+5];return _u.prototype.setColors.call(this,Pu),this},$u.prototype.fromLine=function(Tu){var Cu=Tu.geometry;if(Cu instanceof n$j.Geometry){var Pu=new n$j.BufferGeometry().fromGeometry(Cu);this.setPositions(Pu.attributes.position.array)}else Cu instanceof n$j.BufferGeometry&&this.setPositions(Cu.attributes.position.array);return this},$u.prototype.copy=function(){return this},$u}(i$k);Object.assign(u$i.prototype,{isLineGeometry:!0});var c$q=null,l$h=function(_u){function $u(Tu,Cu){Tu===void 0&&(Tu=new n$j.Vector3),Cu===void 0&&(Cu=new n$j.Vector3);var Pu=_u.call(this)||this;Pu.type="FiveLine",Pu.needsRender=!0;var Ru=new u$i,Lu=new o$g({color:14467195,linewidth:2,dashScale:20,dashed:!1});Pu.line=new s$i(Ru,Lu);var Bu=new n$j.BufferGeometry,Vu=new n$j.PointsMaterial({color:14467195,size:8,map:c$q||(c$q=new n$j.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Pu.points=new n$j.Points(Bu,Vu),Pu.points.renderOrder=11,Pu.points.frustumCulled=!1,Pu.setPoints(Tu,Cu),Pu.add(Pu.line,Pu.points),Pu}return t$f.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.setPoints=function(Tu,Cu){var Pu=[].concat(Tu.toArray(),Cu.toArray());this.points.geometry.setAttribute("position",new n$j.BufferAttribute(new Float32Array(Pu),3)),this.line.geometry.setPositions(Pu),this.line.computeLineDistances(),this.needsRender=!0},$u.prototype.getPoints=function(){var Tu=this.points.geometry.attributes.position.array;return[new n$j.Vector3(Tu[0],Tu[1],Tu[2]),new n$j.Vector3(Tu[3],Tu[4],Tu[5])]},$u.prototype.setMaterial=function(Tu){var Cu=this.line.material;for(var Pu in Tu)if(Tu.hasOwnProperty(Pu)){var Ru=Tu[Pu];Pu==="dashed"?(Cu.dashed=Ru,Ru?Cu.defines.USE_DASH="":delete Cu.defines.USE_DASH,Cu.needsUpdate=!0):Cu[Pu]=Tu[Pu]}this.needsRender=!0},$u.prototype.setResolution=function(Tu,Cu){var Pu=this.line.material.resolution;Pu.x===Tu&&Pu.y===Cu||(Pu.set(Tu,Cu),this.needsRender=!0)},$u}(n$j.Object3D);Object.assign(l$h.prototype,{isFiveLine:!0}),Line=line.Line=l$h,line.LineGeometry=u$i,line.LineMaterial=o$g,line.LineSegmentsGeometry=i$k,line.THREE_Line2=s$i,line.THREE_LineSegments2=a$i;var Easing={Linear:{None:function(_u){return _u}},Quadratic:{In:function(_u){return _u*_u},Out:function(_u){return _u*(2-_u)},InOut:function(_u){return(_u*=2)<1?.5*_u*_u:-.5*(--_u*(_u-2)-1)}},Cubic:{In:function(_u){return _u*_u*_u},Out:function(_u){return--_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u:.5*((_u-=2)*_u*_u+2)}},Quartic:{In:function(_u){return _u*_u*_u*_u},Out:function(_u){return 1- --_u*_u*_u*_u},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u:-.5*((_u-=2)*_u*_u*_u-2)}},Quintic:{In:function(_u){return _u*_u*_u*_u*_u},Out:function(_u){return--_u*_u*_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u*_u:.5*((_u-=2)*_u*_u*_u*_u+2)}},Sinusoidal:{In:function(_u){return 1-Math.cos(_u*Math.PI/2)},Out:function(_u){return Math.sin(_u*Math.PI/2)},InOut:function(_u){return .5*(1-Math.cos(Math.PI*_u))}},Exponential:{In:function(_u){return _u===0?0:Math.pow(1024,_u-1)},Out:function(_u){return _u===1?1:1-Math.pow(2,-10*_u)},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2)<1?.5*Math.pow(1024,_u-1):.5*(-Math.pow(2,-10*(_u-1))+2)}},Circular:{In:function(_u){return 1-Math.sqrt(1-_u*_u)},Out:function(_u){return Math.sqrt(1- --_u*_u)},InOut:function(_u){return(_u*=2)<1?-.5*(Math.sqrt(1-_u*_u)-1):.5*(Math.sqrt(1-(_u-=2)*_u)+1)}},Elastic:{In:function(_u){return _u===0?0:_u===1?1:-Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)},Out:function(_u){return _u===0?0:_u===1?1:Math.pow(2,-10*_u)*Math.sin((_u-.1)*5*Math.PI)+1},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2,_u<1?-.5*Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI):.5*Math.pow(2,-10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)+1)}},Back:{In:function(_u){var $u=1.70158;return _u*_u*(($u+1)*_u-$u)},Out:function(_u){var $u=1.70158;return--_u*_u*(($u+1)*_u+$u)+1},InOut:function(_u){var $u=2.5949095;return(_u*=2)<1?.5*(_u*_u*(($u+1)*_u-$u)):.5*((_u-=2)*_u*(($u+1)*_u+$u)+2)}},Bounce:{In:function(_u){return 1-Easing.Bounce.Out(1-_u)},Out:function(_u){return _u<1/2.75?7.5625*_u*_u:_u<2/2.75?7.5625*(_u-=1.5/2.75)*_u+.75:_u<2.5/2.75?7.5625*(_u-=2.25/2.75)*_u+.9375:7.5625*(_u-=2.625/2.75)*_u+.984375},InOut:function(_u){return _u<.5?Easing.Bounce.In(_u*2)*.5:Easing.Bounce.Out(_u*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var _u=process.hrtime();return _u[0]*1e3+_u[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var $u=this;return Object.keys(this._tweens).map(function(Tu){return $u._tweens[Tu]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function($u){this._tweens[$u.getId()]=$u,this._tweensAddedDuringUpdate[$u.getId()]=$u},_u.prototype.remove=function($u){delete this._tweens[$u.getId()],delete this._tweensAddedDuringUpdate[$u.getId()]},_u.prototype.update=function($u,Tu){$u===void 0&&($u=now$1()),Tu===void 0&&(Tu=!1);var Cu=Object.keys(this._tweens);if(Cu.length===0)return!1;for(;Cu.length>0;){this._tweensAddedDuringUpdate={};for(var Pu=0;Pu<Cu.length;Pu++){var Ru=this._tweens[Cu[Pu]],Lu=!Tu;Ru&&Ru.update($u,Lu)===!1&&!Tu&&delete this._tweens[Cu[Pu]]}Cu=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),Interpolation={Linear:function(_u,$u){var Tu=_u.length-1,Cu=Tu*$u,Pu=Math.floor(Cu),Ru=Interpolation.Utils.Linear;return $u<0?Ru(_u[0],_u[1],Cu):$u>1?Ru(_u[Tu],_u[Tu-1],Tu-Cu):Ru(_u[Pu],_u[Pu+1>Tu?Tu:Pu+1],Cu-Pu)},Bezier:function(_u,$u){for(var Tu=0,Cu=_u.length-1,Pu=Math.pow,Ru=Interpolation.Utils.Bernstein,Lu=0;Lu<=Cu;Lu++)Tu+=Pu(1-$u,Cu-Lu)*Pu($u,Lu)*_u[Lu]*Ru(Cu,Lu);return Tu},CatmullRom:function(_u,$u){var Tu=_u.length-1,Cu=Tu*$u,Pu=Math.floor(Cu),Ru=Interpolation.Utils.CatmullRom;return _u[0]===_u[Tu]?($u<0&&(Pu=Math.floor(Cu=Tu*(1+$u))),Ru(_u[(Pu-1+Tu)%Tu],_u[Pu],_u[(Pu+1)%Tu],_u[(Pu+2)%Tu],Cu-Pu)):$u<0?_u[0]-(Ru(_u[0],_u[0],_u[1],_u[1],-Cu)-_u[0]):$u>1?_u[Tu]-(Ru(_u[Tu],_u[Tu],_u[Tu-1],_u[Tu-1],Cu-Tu)-_u[Tu]):Ru(_u[Pu?Pu-1:0],_u[Pu],_u[Tu<Pu+1?Tu:Pu+1],_u[Tu<Pu+2?Tu:Pu+2],Cu-Pu)},Utils:{Linear:function(_u,$u,Tu){return($u-_u)*Tu+_u},Bernstein:function(_u,$u){var Tu=Interpolation.Utils.Factorial;return Tu(_u)/Tu($u)/Tu(_u-$u)},Factorial:function(){var _u=[1];return function($u){var Tu=1;if(_u[$u])return _u[$u];for(var Cu=$u;Cu>1;Cu--)Tu*=Cu;return _u[$u]=Tu,Tu}}(),CatmullRom:function(_u,$u,Tu,Cu,Pu){var Ru=(Tu-_u)*.5,Lu=(Cu-$u)*.5,Bu=Pu*Pu,Vu=Pu*Bu;return(2*$u-2*Tu+Ru+Lu)*Vu+(-3*$u+3*Tu-2*Ru-Lu)*Bu+Ru*Pu+$u}}},Sequence=function(){function _u(){}return _u.nextId=function(){return _u._nextId++},_u._nextId=0,_u}(),mainGroup=new Group,Tween=function(){function _u($u,Tu){Tu===void 0&&(Tu=mainGroup),this._object=$u,this._group=Tu,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return _u.prototype.getId=function(){return this._id},_u.prototype.isPlaying=function(){return this._isPlaying},_u.prototype.isPaused=function(){return this._isPaused},_u.prototype.to=function($u,Tu){return this._valuesEnd=Object.create($u),Tu!==void 0&&(this._duration=Tu),this},_u.prototype.duration=function($u){return this._duration=$u,this},_u.prototype.start=function($u){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Tu in this._valuesStartRepeat)this._swapEndStartRepeatValues(Tu),this._valuesStart[Tu]=this._valuesStartRepeat[Tu]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=$u!==void 0?typeof $u=="string"?now$1()+parseFloat($u):$u:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},_u.prototype._setupProperties=function($u,Tu,Cu,Pu){for(var Ru in Cu){var Lu=$u[Ru],Bu=Array.isArray(Lu),Vu=Bu?"array":typeof Lu,Ou=!Bu&&Array.isArray(Cu[Ru]);if(!(Vu==="undefined"||Vu==="function")){if(Ou){var Du=Cu[Ru];if(Du.length===0)continue;Du=Du.map(this._handleRelativeValue.bind(this,Lu)),Cu[Ru]=[Lu].concat(Du)}if((Vu==="object"||Bu)&&Lu&&!Ou){Tu[Ru]=Bu?[]:{};for(var ku in Lu)Tu[Ru][ku]=Lu[ku];Pu[Ru]=Bu?[]:{},this._setupProperties(Lu,Tu[Ru],Cu[Ru],Pu[Ru])}else typeof Tu[Ru]=="undefined"&&(Tu[Ru]=Lu),Bu||(Tu[Ru]*=1),Ou?Pu[Ru]=Cu[Ru].slice().reverse():Pu[Ru]=Tu[Ru]||0}}},_u.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},_u.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},_u.prototype.pause=function($u){return $u===void 0&&($u=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=$u,this._group&&this._group.remove(this),this)},_u.prototype.resume=function($u){return $u===void 0&&($u=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=$u-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},_u.prototype.stopChainedTweens=function(){for(var $u=0,Tu=this._chainedTweens.length;$u<Tu;$u++)this._chainedTweens[$u].stop();return this},_u.prototype.group=function($u){return this._group=$u,this},_u.prototype.delay=function($u){return this._delayTime=$u,this},_u.prototype.repeat=function($u){return this._initialRepeat=$u,this._repeat=$u,this},_u.prototype.repeatDelay=function($u){return this._repeatDelayTime=$u,this},_u.prototype.yoyo=function($u){return this._yoyo=$u,this},_u.prototype.easing=function($u){return this._easingFunction=$u,this},_u.prototype.interpolation=function($u){return this._interpolationFunction=$u,this},_u.prototype.chain=function(){for(var $u=[],Tu=0;Tu<arguments.length;Tu++)$u[Tu]=arguments[Tu];return this._chainedTweens=$u,this},_u.prototype.onStart=function($u){return this._onStartCallback=$u,this},_u.prototype.onUpdate=function($u){return this._onUpdateCallback=$u,this},_u.prototype.onRepeat=function($u){return this._onRepeatCallback=$u,this},_u.prototype.onComplete=function($u){return this._onCompleteCallback=$u,this},_u.prototype.onStop=function($u){return this._onStopCallback=$u,this},_u.prototype.update=function($u,Tu){if($u===void 0&&($u=now$1()),Tu===void 0&&(Tu=!0),this._isPaused)return!0;var Cu,Pu,Ru=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if($u>Ru)return!1;Tu&&this.start($u)}if(this._goToEnd=!1,$u<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Pu=($u-this._startTime)/this._duration,Pu=this._duration===0||Pu>1?1:Pu;var Lu=this._easingFunction(Pu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Lu),this._onUpdateCallback&&this._onUpdateCallback(this._object,Pu),Pu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Cu in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Cu]=="string"&&(this._valuesStartRepeat[Cu]=this._valuesStartRepeat[Cu]+parseFloat(this._valuesEnd[Cu])),this._yoyo&&this._swapEndStartRepeatValues(Cu),this._valuesStart[Cu]=this._valuesStartRepeat[Cu];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=$u+this._repeatDelayTime:this._startTime=$u+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Bu=0,Vu=this._chainedTweens.length;Bu<Vu;Bu++)this._chainedTweens[Bu].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},_u.prototype._updateProperties=function($u,Tu,Cu,Pu){for(var Ru in Cu)if(Tu[Ru]!==void 0){var Lu=Tu[Ru]||0,Bu=Cu[Ru],Vu=Array.isArray($u[Ru]),Ou=Array.isArray(Bu),Du=!Vu&&Ou;Du?$u[Ru]=this._interpolationFunction(Bu,Pu):typeof Bu=="object"&&Bu?this._updateProperties($u[Ru],Lu,Bu,Pu):(Bu=this._handleRelativeValue(Lu,Bu),typeof Bu=="number"&&($u[Ru]=Lu+(Bu-Lu)*Pu))}},_u.prototype._handleRelativeValue=function($u,Tu){return typeof Tu!="string"?Tu:Tu.charAt(0)==="+"||Tu.charAt(0)==="-"?$u+parseFloat(Tu):parseFloat(Tu)},_u.prototype._swapEndStartRepeatValues=function($u){var Tu=this._valuesStartRepeat[$u],Cu=this._valuesEnd[$u];typeof Cu=="string"?this._valuesStartRepeat[$u]=this._valuesStartRepeat[$u]+parseFloat(Cu):this._valuesStartRepeat[$u]=this._valuesEnd[$u],this._valuesEnd[$u]=Tu},_u}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update};class BetterTween extends exports.Tween{constructor(){super(...arguments);bv(this,"disposeMethods",[]);bv(this,"animationFrameDisposer");bv(this,"onDispose",Tu=>(this.disposeMethods.push(Tu),this));bv(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval(()=>this.update()),this));bv(this,"dispose",()=>{var Tu;this.stop(),(Tu=this.animationFrameDisposer)==null||Tu.call(this),this.disposeMethods.forEach(Cu=>Cu()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(_u,$u=exports.Easing.Linear.None){const Tu=new BetterTween({progress:0}).to({progress:1});return _u!==void 0&&Tu.duration(_u),$u!==void 0&&Tu.easing($u),Tu}function lineAnime(_u,$u,Tu){const Cu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Pu=new TextureLoader().load(Cu),Ru=new Color(16777215),Lu=new Line;Lu.setMaterial({linewidth:2,color:Ru});const Bu=Lu.points.material;return Bu.map=Pu,Bu.color.set(Ru),Lu.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:Vu})=>{const Ou=.5-Vu/2,Du=.5+Vu/2,ku=$u.clone().lerp(Tu,Ou),Fu=$u.clone().lerp(Tu,Du);Lu.setPoints(ku,Fu)}).onStart(()=>_u.scene.add(Lu)).onDispose(()=>{_u.scene.remove(Lu),_u.needsRender=!0})}function PanoEffect(){const[_u,$u]=react$1.exports.useState(null),Tu=useFiveInstance(),Cu=react$1.exports.useRef(null),[Pu,Ru]=react$1.exports.useState(null),Lu=react$1.exports.useRef(),Bu=useController(),Vu=useFiveProject2d(),Ou=()=>{Cu.current&&Cu.current.dispose()};return react$1.exports.useEffect(()=>{const Du=ku=>{const{start:Fu,end:Nu,data:Gu}=ku,zu=Gu,[Hu,Uu]=zu.twoVertexs,ju=new Vector3(Hu.x,Hu.y,Hu.z),Wu=new Vector3(Uu.x,Uu.y,Uu.z);Cu.current=lineAnime(Tu,ju.clone(),Wu.clone()),Cu.current.play();const Qu=ju.lerp(Wu,.5),qu=ju.distanceTo(Wu),Yu=Vu(Qu);if(!Yu)return;const{x:Ju,y:_d}=Yu;$u({center:Qu,distance:qu}),Ru({left:Ju,top:_d}),Lu.current=setTimeout(()=>{$u(null),Ru(null),Ou()},Nu-Fu)};return Bu.on(VreoKeyframeEnum.PanoEffect,Du),()=>{Bu.off(VreoKeyframeEnum.PanoEffect,Du),Lu.current&&clearTimeout(Lu.current),Ou()}},[Bu]),react$1.exports.useEffect(()=>{const Du=()=>{if(!(_u!=null&&_u.center))return;const{x:ku,y:Fu,z:Nu}=_u.center,Gu=Vu(new Vector3(ku,Fu,Nu));if(!Gu)return;const{x:zu,y:Hu}=Gu;Ru({left:zu,top:Hu})};return Tu.on("currentStateChange",Du),()=>{Tu.off("currentStateChange",Du)}},[_u==null?void 0:_u.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":_u}),style:{left:((Pu==null?void 0:Pu.left)||0)+"px",top:((Pu==null?void 0:Pu.top)||0)+"px"},children:(_u==null?void 0:_u.distance.toFixed(4))+"m"})})}function A$h(){console.info("%c %c@realsee/dnalogel %cv2.19.3",["background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAMAAACHgmeRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABLFBMVEUAAAAapPoap/oaqvkbrfkbr/gZnfwZoPsaqfnD4v/E4/8Ylv0clPm93/+/4P/B4f8Yj/683/8Wif+33P8Uhv+x2f8ShP+s1v8Pgf+n0/8Nf/+h0f8Lff8Lff8Nf/9dl/+czv8KfP8KfP+Lxf+Uyv+Xy/+Hwv+Jw/+Mxf+Oxv+RyP8aovsapfoap/oZmfwZm/wZnvsYnPsYkf4YlP0NePsDYfgYcfi43f+63v8Xiv8Xjf4EWfwCV/sWZ/qz2v+02/8Vh/8WiP8EUf8CTf4WXv2u1/+v2P8Thf8Thv8ETf8CR/8VV/+o1f+q1f8Qgv8Rg/8DSv8BRf8UVP+j0v+k0v8OgP8Pgf8DR/8DQv9Nhf+dzv+fz/+Kv/+Vyv+Xy/+azf+Oxv+Qx/+SyP////8MUhLdAAAAK3RSTlMACEWQ2bd98uQECPXxqO7c+Pb49vj2+Pb49vj23Oul8fMHA+TwerXXjEIG2P+bHgAAAAFiS0dEY1y+LaoAAAB+SURBVAjXY2BgZGJmYWVgYGBgY9fW0eVg4ORi4NbTNzDk4eXjZxAwMjYxNTO3EGQQsrSytrG1sxdmEHFwdHJ2cXUTZRBz9/D08vbxFWeQ8PMPCAwKDpFkkAoNC4+IjIqWZpCRlZOPiY2LV2BQVGJQTkhMUlEFWaOmrqGpxQAAyg0S9Dq+VPYAAAAASUVORK5CYII=')","background-repeat: no-repeat","background-position: 0 center","padding-left: 8px"].join(";"),"","background-color: #12ce9b;color:black;padding:0 6px;border-radius: 3px")}function c$p(){const _u=typeof OffscreenCanvas!="undefined",$u=_u&&new OffscreenCanvas(1,1).getContext("webgl")!==null;_u&&!$u&&Object.assign(window,{OffscreenCanvas:function(Tu,Cu){const Pu=document.createElement("canvas");return Pu.width=Tu,Pu.height=Cu,Pu}})}Promise.resolve();var d$l=Object.freeze({Linear:Object.freeze({None:function(_u){return _u},In:function(_u){return this.None(_u)},Out:function(_u){return this.None(_u)},InOut:function(_u){return this.None(_u)}}),Quadratic:Object.freeze({In:function(_u){return _u*_u},Out:function(_u){return _u*(2-_u)},InOut:function(_u){return(_u*=2)<1?.5*_u*_u:-.5*(--_u*(_u-2)-1)}}),Cubic:Object.freeze({In:function(_u){return _u*_u*_u},Out:function(_u){return--_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u:.5*((_u-=2)*_u*_u+2)}}),Quartic:Object.freeze({In:function(_u){return _u*_u*_u*_u},Out:function(_u){return 1- --_u*_u*_u*_u},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u:-.5*((_u-=2)*_u*_u*_u-2)}}),Quintic:Object.freeze({In:function(_u){return _u*_u*_u*_u*_u},Out:function(_u){return--_u*_u*_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u*_u:.5*((_u-=2)*_u*_u*_u*_u+2)}}),Sinusoidal:Object.freeze({In:function(_u){return 1-Math.sin((1-_u)*Math.PI/2)},Out:function(_u){return Math.sin(_u*Math.PI/2)},InOut:function(_u){return .5*(1-Math.sin(Math.PI*(.5-_u)))}}),Exponential:Object.freeze({In:function(_u){return _u===0?0:Math.pow(1024,_u-1)},Out:function(_u){return _u===1?1:1-Math.pow(2,-10*_u)},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2)<1?.5*Math.pow(1024,_u-1):.5*(-Math.pow(2,-10*(_u-1))+2)}}),Circular:Object.freeze({In:function(_u){return 1-Math.sqrt(1-_u*_u)},Out:function(_u){return Math.sqrt(1- --_u*_u)},InOut:function(_u){return(_u*=2)<1?-.5*(Math.sqrt(1-_u*_u)-1):.5*(Math.sqrt(1-(_u-=2)*_u)+1)}}),Elastic:Object.freeze({In:function(_u){return _u===0?0:_u===1?1:-Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)},Out:function(_u){return _u===0?0:_u===1?1:Math.pow(2,-10*_u)*Math.sin((_u-.1)*5*Math.PI)+1},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2,_u<1?-.5*Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI):.5*Math.pow(2,-10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(_u){var $u=1.70158;return _u===1?1:_u*_u*(($u+1)*_u-$u)},Out:function(_u){var $u=1.70158;return _u===0?0:--_u*_u*(($u+1)*_u+$u)+1},InOut:function(_u){var $u=2.5949095;return(_u*=2)<1?.5*(_u*_u*(($u+1)*_u-$u)):.5*((_u-=2)*_u*(($u+1)*_u+$u)+2)}}),Bounce:Object.freeze({In:function(_u){return 1-d$l.Bounce.Out(1-_u)},Out:function(_u){return _u<.36363636363636365?7.5625*_u*_u:_u<.7272727272727273?7.5625*(_u-=.5454545454545454)*_u+.75:_u<.9090909090909091?7.5625*(_u-=.8181818181818182)*_u+.9375:7.5625*(_u-=.9545454545454546)*_u+.984375},InOut:function(_u){return _u<.5?d$l.Bounce.In(_u*2)*.5:d$l.Bounce.Out(_u*2-1)*.5+.5}}),generatePow:function(_u){return _u===void 0&&(_u=4),_u=_u<Number.EPSILON?Number.EPSILON:_u,_u=_u>1e4?1e4:_u,{In:function($u){return Math.pow($u,_u)},Out:function($u){return 1-Math.pow(1-$u,_u)},InOut:function($u){return $u<.5?Math.pow($u*2,_u)/2:(1-Math.pow(2-$u*2,_u))/2+.5}}}}),_$7=function(){return performance.now()},w$e=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var $u=this;return Object.keys(this._tweens).map(function(Tu){return $u._tweens[Tu]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function($u){this._tweens[$u.getId()]=$u,this._tweensAddedDuringUpdate[$u.getId()]=$u},_u.prototype.remove=function($u){delete this._tweens[$u.getId()],delete this._tweensAddedDuringUpdate[$u.getId()]},_u.prototype.update=function($u,Tu){$u===void 0&&($u=_$7()),Tu===void 0&&(Tu=!1);var Cu=Object.keys(this._tweens);if(Cu.length===0)return!1;for(;Cu.length>0;){this._tweensAddedDuringUpdate={};for(var Pu=0;Pu<Cu.length;Pu++){var Ru=this._tweens[Cu[Pu]],Lu=!Tu;Ru&&Ru.update($u,Lu)===!1&&!Tu&&delete this._tweens[Cu[Pu]]}Cu=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),c$o={Linear:function(_u,$u){var Tu=_u.length-1,Cu=Tu*$u,Pu=Math.floor(Cu),Ru=c$o.Utils.Linear;return $u<0?Ru(_u[0],_u[1],Cu):$u>1?Ru(_u[Tu],_u[Tu-1],Tu-Cu):Ru(_u[Pu],_u[Pu+1>Tu?Tu:Pu+1],Cu-Pu)},Bezier:function(_u,$u){for(var Tu=0,Cu=_u.length-1,Pu=Math.pow,Ru=c$o.Utils.Bernstein,Lu=0;Lu<=Cu;Lu++)Tu+=Pu(1-$u,Cu-Lu)*Pu($u,Lu)*_u[Lu]*Ru(Cu,Lu);return Tu},CatmullRom:function(_u,$u){var Tu=_u.length-1,Cu=Tu*$u,Pu=Math.floor(Cu),Ru=c$o.Utils.CatmullRom;return _u[0]===_u[Tu]?($u<0&&(Pu=Math.floor(Cu=Tu*(1+$u))),Ru(_u[(Pu-1+Tu)%Tu],_u[Pu],_u[(Pu+1)%Tu],_u[(Pu+2)%Tu],Cu-Pu)):$u<0?_u[0]-(Ru(_u[0],_u[0],_u[1],_u[1],-Cu)-_u[0]):$u>1?_u[Tu]-(Ru(_u[Tu],_u[Tu],_u[Tu-1],_u[Tu-1],Cu-Tu)-_u[Tu]):Ru(_u[Pu?Pu-1:0],_u[Pu],_u[Tu<Pu+1?Tu:Pu+1],_u[Tu<Pu+2?Tu:Pu+2],Cu-Pu)},Utils:{Linear:function(_u,$u,Tu){return($u-_u)*Tu+_u},Bernstein:function(_u,$u){var Tu=c$o.Utils.Factorial;return Tu(_u)/Tu($u)/Tu(_u-$u)},Factorial:function(){var _u=[1];return function($u){var Tu=1;if(_u[$u])return _u[$u];for(var Cu=$u;Cu>1;Cu--)Tu*=Cu;return _u[$u]=Tu,Tu}}(),CatmullRom:function(_u,$u,Tu,Cu,Pu){var Ru=(Tu-_u)*.5,Lu=(Cu-$u)*.5,Bu=Pu*Pu,Vu=Pu*Bu;return(2*$u-2*Tu+Ru+Lu)*Vu+(-3*$u+3*Tu-2*Ru-Lu)*Bu+Ru*Pu+$u}}},S$a=function(){function _u(){}return _u.nextId=function(){return _u._nextId++},_u._nextId=0,_u}(),g$k=new w$e,T$b=function(){function _u($u,Tu){Tu===void 0&&(Tu=g$k),this._object=$u,this._group=Tu,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=d$l.Linear.None,this._interpolationFunction=c$o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=S$a.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return _u.prototype.getId=function(){return this._id},_u.prototype.isPlaying=function(){return this._isPlaying},_u.prototype.isPaused=function(){return this._isPaused},_u.prototype.to=function($u,Tu){if(Tu===void 0&&(Tu=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=$u,this._propertiesAreSetUp=!1,this._duration=Tu,this},_u.prototype.duration=function($u){return $u===void 0&&($u=1e3),this._duration=$u,this},_u.prototype.dynamic=function($u){return $u===void 0&&($u=!1),this._isDynamic=$u,this},_u.prototype.start=function($u,Tu){if($u===void 0&&($u=_$7()),Tu===void 0&&(Tu=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Cu in this._valuesStartRepeat)this._swapEndStartRepeatValues(Cu),this._valuesStart[Cu]=this._valuesStartRepeat[Cu]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=$u,this._startTime+=this._delayTime,!this._propertiesAreSetUp||Tu){if(this._propertiesAreSetUp=!0,!this._isDynamic){var Pu={};for(var Ru in this._valuesEnd)Pu[Ru]=this._valuesEnd[Ru];this._valuesEnd=Pu}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,Tu)}return this},_u.prototype.startFromCurrentValues=function($u){return this.start($u,!0)},_u.prototype._setupProperties=function($u,Tu,Cu,Pu,Ru){for(var Lu in Cu){var Bu=$u[Lu],Vu=Array.isArray(Bu),Ou=Vu?"array":typeof Bu,Du=!Vu&&Array.isArray(Cu[Lu]);if(!(Ou==="undefined"||Ou==="function")){if(Du){var ku=Cu[Lu];if(ku.length===0)continue;for(var Fu=[Bu],Nu=0,Gu=ku.length;Nu<Gu;Nu+=1){var zu=this._handleRelativeValue(Bu,ku[Nu]);if(isNaN(zu)){Du=!1,console.warn("Found invalid interpolation list. Skipping.");break}Fu.push(zu)}Du&&(Cu[Lu]=Fu)}if((Ou==="object"||Vu)&&Bu&&!Du){Tu[Lu]=Vu?[]:{};var Hu=Bu;for(var Uu in Hu)Tu[Lu][Uu]=Hu[Uu];Pu[Lu]=Vu?[]:{};var ku=Cu[Lu];if(!this._isDynamic){var ju={};for(var Uu in ku)ju[Uu]=ku[Uu];Cu[Lu]=ku=ju}this._setupProperties(Hu,Tu[Lu],ku,Pu[Lu],Ru)}else(typeof Tu[Lu]=="undefined"||Ru)&&(Tu[Lu]=Bu),Vu||(Tu[Lu]*=1),Du?Pu[Lu]=Cu[Lu].slice().reverse():Pu[Lu]=Tu[Lu]||0}}},_u.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},_u.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},_u.prototype.pause=function($u){return $u===void 0&&($u=_$7()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=$u,this._group&&this._group.remove(this),this)},_u.prototype.resume=function($u){return $u===void 0&&($u=_$7()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=$u-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},_u.prototype.stopChainedTweens=function(){for(var $u=0,Tu=this._chainedTweens.length;$u<Tu;$u++)this._chainedTweens[$u].stop();return this},_u.prototype.group=function($u){return $u===void 0&&($u=g$k),this._group=$u,this},_u.prototype.delay=function($u){return $u===void 0&&($u=0),this._delayTime=$u,this},_u.prototype.repeat=function($u){return $u===void 0&&($u=0),this._initialRepeat=$u,this._repeat=$u,this},_u.prototype.repeatDelay=function($u){return this._repeatDelayTime=$u,this},_u.prototype.yoyo=function($u){return $u===void 0&&($u=!1),this._yoyo=$u,this},_u.prototype.easing=function($u){return $u===void 0&&($u=d$l.Linear.None),this._easingFunction=$u,this},_u.prototype.interpolation=function($u){return $u===void 0&&($u=c$o.Linear),this._interpolationFunction=$u,this},_u.prototype.chain=function(){for(var $u=[],Tu=0;Tu<arguments.length;Tu++)$u[Tu]=arguments[Tu];return this._chainedTweens=$u,this},_u.prototype.onStart=function($u){return this._onStartCallback=$u,this},_u.prototype.onEveryStart=function($u){return this._onEveryStartCallback=$u,this},_u.prototype.onUpdate=function($u){return this._onUpdateCallback=$u,this},_u.prototype.onRepeat=function($u){return this._onRepeatCallback=$u,this},_u.prototype.onComplete=function($u){return this._onCompleteCallback=$u,this},_u.prototype.onStop=function($u){return this._onStopCallback=$u,this},_u.prototype.update=function($u,Tu){if($u===void 0&&($u=_$7()),Tu===void 0&&(Tu=!0),this._isPaused)return!0;var Cu,Pu,Ru=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if($u>Ru)return!1;Tu&&this.start($u,!0)}if(this._goToEnd=!1,$u<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),Pu=($u-this._startTime)/this._duration,Pu=this._duration===0||Pu>1?1:Pu;var Lu=this._easingFunction(Pu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Lu),this._onUpdateCallback&&this._onUpdateCallback(this._object,Pu),Pu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Cu in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Cu]=="string"&&(this._valuesStartRepeat[Cu]=this._valuesStartRepeat[Cu]+parseFloat(this._valuesEnd[Cu])),this._yoyo&&this._swapEndStartRepeatValues(Cu),this._valuesStart[Cu]=this._valuesStartRepeat[Cu];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=$u+this._repeatDelayTime:this._startTime=$u+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Bu=0,Vu=this._chainedTweens.length;Bu<Vu;Bu++)this._chainedTweens[Bu].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},_u.prototype._updateProperties=function($u,Tu,Cu,Pu){for(var Ru in Cu)if(Tu[Ru]!==void 0){var Lu=Tu[Ru]||0,Bu=Cu[Ru],Vu=Array.isArray($u[Ru]),Ou=Array.isArray(Bu),Du=!Vu&&Ou;Du?$u[Ru]=this._interpolationFunction(Bu,Pu):typeof Bu=="object"&&Bu?this._updateProperties($u[Ru],Lu,Bu,Pu):(Bu=this._handleRelativeValue(Lu,Bu),typeof Bu=="number"&&($u[Ru]=Lu+(Bu-Lu)*Pu))}},_u.prototype._handleRelativeValue=function($u,Tu){return typeof Tu!="string"?Tu:Tu.charAt(0)==="+"||Tu.charAt(0)==="-"?$u+parseFloat(Tu):parseFloat(Tu)},_u.prototype._swapEndStartRepeatValues=function($u){var Tu=this._valuesStartRepeat[$u],Cu=this._valuesEnd[$u];typeof Cu=="string"?this._valuesStartRepeat[$u]=this._valuesStartRepeat[$u]+parseFloat(Cu):this._valuesStartRepeat[$u]=this._valuesEnd[$u],this._valuesEnd[$u]=Tu},_u}();S$a.nextId;var u$h=g$k;u$h.getAll.bind(u$h);u$h.removeAll.bind(u$h);u$h.add.bind(u$h);var j$6=u$h.remove.bind(u$h);u$h.update.bind(u$h);function t$e(){return((1+Math.random())*65536|0).toString(16).substring(1)}function r$k(){return(t$e()+t$e()+"-"+t$e()+"-4"+t$e().substr(0,3)+"-"+t$e()+"-"+t$e()+t$e()+t$e()).toLowerCase()}var CSS3DObject=function(_u){Object3D.call(this),this.element=_u,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function($u){$u.element instanceof Element&&$u.element.parentNode!==null&&$u.element.parentNode.removeChild($u.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(_u){CSS3DObject.call(this,_u)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var _u=this,$u,Tu,Cu,Pu,Ru=new Matrix4,Lu={camera:{fov:0,style:""},objects:new WeakMap},Bu=document.createElement("div");Bu.style.overflow="hidden",this.domElement=Bu;var Vu=document.createElement("div");Vu.style.WebkitTransformStyle="preserve-3d",Vu.style.transformStyle="preserve-3d",Vu.style.pointerEvents="none",Bu.appendChild(Vu);var Ou=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:$u,height:Tu}},this.setSize=function(Uu,ju){$u=Uu,Tu=ju,Cu=$u/2,Pu=Tu/2,Bu.style.width=Uu+"px",Bu.style.height=ju+"px",Vu.style.width=Uu+"px",Vu.style.height=ju+"px"};function Du(Uu){return Math.abs(Uu)<1e-10?0:Uu}function ku(Uu){var ju=Uu.elements;return"matrix3d("+Du(ju[0])+","+Du(-ju[1])+","+Du(ju[2])+","+Du(ju[3])+","+Du(ju[4])+","+Du(-ju[5])+","+Du(ju[6])+","+Du(ju[7])+","+Du(ju[8])+","+Du(-ju[9])+","+Du(ju[10])+","+Du(ju[11])+","+Du(ju[12])+","+Du(-ju[13])+","+Du(ju[14])+","+Du(ju[15])+")"}function Fu(Uu,ju){var Wu=Uu.elements,Qu="matrix3d("+Du(Wu[0])+","+Du(Wu[1])+","+Du(Wu[2])+","+Du(Wu[3])+","+Du(-Wu[4])+","+Du(-Wu[5])+","+Du(-Wu[6])+","+Du(-Wu[7])+","+Du(Wu[8])+","+Du(Wu[9])+","+Du(Wu[10])+","+Du(Wu[11])+","+Du(Wu[12])+","+Du(Wu[13])+","+Du(Wu[14])+","+Du(Wu[15])+")";return Ou?"translate(-50%,-50%)translate("+Cu+"px,"+Pu+"px)"+ju+Qu:"translate(-50%,-50%)"+Qu}function Nu(Uu,ju,Wu,Qu){if(Uu instanceof CSS3DObject){Uu.onBeforeRender(_u,ju,Wu);var qu;Uu instanceof CSS3DSprite?(Ru.copy(Wu.matrixWorldInverse),Ru.transpose(),Ru.copyPosition(Uu.matrixWorld),Ru.scale(Uu.scale),Ru.elements[3]=0,Ru.elements[7]=0,Ru.elements[11]=0,Ru.elements[15]=1,qu=Fu(Ru,Qu)):qu=Fu(Uu.matrixWorld,Qu);var Yu=Uu.element,Ju=Lu.objects.get(Uu);if(Ju===void 0||Ju.style!==qu){Yu.style.WebkitTransform=qu,Yu.style.transform=qu;var _d={style:qu};Ou&&(_d.distanceToCameraSquared=Gu(Wu,Uu)),Lu.objects.set(Uu,_d)}Yu.style.display=Uu.visible?"":"none",Yu.parentNode!==Vu&&Vu.appendChild(Yu),Uu.onAfterRender(_u,ju,Wu)}for(var tp=0,Ku=Uu.children.length;tp<Ku;tp++)Nu(Uu.children[tp],ju,Wu,Qu)}var Gu=function(){var Uu=new Vector3,ju=new Vector3;return function(Wu,Qu){return Uu.setFromMatrixPosition(Wu.matrixWorld),ju.setFromMatrixPosition(Qu.matrixWorld),Uu.distanceToSquared(ju)}}();function zu(Uu){var ju=[];return Uu.traverse(function(Wu){Wu instanceof CSS3DObject&&ju.push(Wu)}),ju}function Hu(Uu){for(var ju=zu(Uu).sort(function(Yu,Ju){var _d=Lu.objects.get(Yu).distanceToCameraSquared,tp=Lu.objects.get(Ju).distanceToCameraSquared;return _d-tp}),Wu=ju.length,Qu=0,qu=ju.length;Qu<qu;Qu++)ju[Qu].element.style.zIndex=Wu-Qu}this.render=function(Uu,ju){var Wu=ju.projectionMatrix.elements[5]*Pu;if(Lu.camera.fov!==Wu&&(ju.isPerspectiveCamera?(Bu.style.WebkitPerspective=Wu+"px",Bu.style.perspective=Wu+"px"):(Bu.style.WebkitPerspective="",Bu.style.perspective=""),Lu.camera.fov=Wu),Uu.autoUpdate===!0&&Uu.updateMatrixWorld(),ju.parent===null&&ju.updateMatrixWorld(),ju.isOrthographicCamera)var Qu=-(ju.right+ju.left)/2,qu=(ju.top+ju.bottom)/2;var Yu=ju.isOrthographicCamera?"scale("+Wu+")translate("+Du(Qu)+"px,"+Du(qu)+"px)"+ku(ju.matrixWorldInverse):"translateZ("+Wu+"px)"+ku(ju.matrixWorldInverse),Ju=Yu+"translate("+Cu+"px,"+Pu+"px)";Lu.camera.style!==Ju&&!Ou&&(Vu.style.WebkitTransform=Ju,Vu.style.transform=Ju,Lu.camera.style=Ju),Nu(Uu,Uu,ju,Yu),Ou&&Hu(Uu)}};function t$d(..._u){const $u=[];return _u.forEach(Tu=>{Tu.isCSS3DObjectPlus?$u.push(Tu):$u.push(...t$d(...Tu.children))}),$u}function t$c(_u,$u){const Tu=Math.round(_u);return Tu%2===0?Tu:Tu+($u!=null&&$u.floor?-1:1)}function u$g(_u,$u,Tu=!0){if(!_u)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const Cu=()=>{const Ru=t$c(_u.clientWidth,{floor:!0}),Lu=t$c(_u.clientHeight,{floor:!0});$u(Ru,Lu)};if(typeof ResizeObserver=="undefined"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>Cu(),unobserve:()=>{}};const Pu=new ResizeObserver(Cu);return Tu&&Cu(),{observe:()=>Pu.observe(_u),unobserve:()=>Pu.unobserve(_u)}}var d$k=Object.defineProperty,l$g=(_u,$u,Tu)=>$u in _u?d$k(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,n$i=(_u,$u,Tu)=>(l$g(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class A$g extends CSS3DRenderer{constructor(){super(),n$i(this,"wrapper"),n$i(this,"requestAnimationFrameId"),n$i(this,"resizeDisoper"),this.domElement.style.position="absolute",this.domElement.style.top="0",this.domElement.style.left="0",this.domElement.style.userSelect="none",this.domElement.style.pointerEvents="none"}setWrapper($u){if(!$u)throw new Error("CSS3DRenderer: wrapper is required");if($u.contains(this.domElement))return;const Tu=this.wrapper;return Tu&&Tu.contains(this.domElement)&&this.domElement.remove(),this.appendToElement($u),this.wrapper=$u,this}appendToElement($u){$u.appendChild(this.domElement);const Tu=(Ru,Lu)=>this.setSize(Ru,Lu),{observe:Cu,unobserve:Pu}=u$g($u,Tu,!0);Cu(),this.resizeDisoper=Pu,this.wrapper=$u}renderEveryFrame($u,Tu){if(this.wrapper||console.warn("wrapper is not find, creating a html element and call setWrapper(wrapper)",this,$u),this.requestAnimationFrameId)return;const Cu=()=>{this.requestAnimationFrameId=requestAnimationFrame(Cu),$u.visible&&t$d($u).length!==0&&this.render($u,Tu)};Cu()}stopRender(){this.requestAnimationFrameId&&cancelAnimationFrame(this.requestAnimationFrameId)}dispose(){var $u;this.stopRender(),($u=this.resizeDisoper)==null||$u.call(this),this.domElement.remove()}}function v$c(_u){return typeof Symbol=="undefined"?`$Symbol<${_u}>$`:Symbol(_u)}const i$j=v$c("$$EVENT$$");function r$j(_u){return _u[i$j]||(_u[i$j]={}),_u[i$j]}function d$j(_u){_u[i$j]||delete _u[i$j]}class E$g{hasListener($u){const Tu=r$j(this);return!!(Tu!=null&&Tu[$u]&&Tu[$u].length>0)}on($u,Tu,Cu){const Pu=r$j(this);return Pu[$u]||(Pu[$u]=[]),Pu[$u].push([Tu,Cu||!1]),()=>this.off($u,Tu)}once($u,Tu){return this.on($u,Tu,!0)}off($u,Tu){if($u===void 0){d$j(this);return}const Cu=r$j(this);if(Cu[$u]||(Cu[$u]=[]),Tu===void 0){Cu[$u].length=0;return}let Pu=0;for(;Pu<Cu[$u].length&&Cu[$u][Pu][0]!==Tu;Pu++);Pu<Cu[$u].length&&Cu[$u].splice(Pu,1)}emit($u,...Tu){let Cu=!1;const Pu=r$j(this)[$u]||[];for(let Ru of Pu.slice()){const[Lu,Bu=!1]=Ru,Vu=Lu(...Tu);Bu&&this.off($u,Lu),Vu===!1&&(Cu=!0)}return Cu}}const n$h=({x:_u,y:$u,z:Tu})=>new Vector3(_u,$u,Tu),c$n=_u=>new Vector3().fromArray(_u),s$h=_u=>_u instanceof Vector3?_u:Array.isArray(_u)?c$n(_u):n$h(_u);var c$m=Object.defineProperty,l$f=(_u,$u,Tu)=>$u in _u?c$m(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,a$h=(_u,$u,Tu)=>(l$f(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class p$e extends Mesh{constructor($u,Tu){const Cu=new MeshBasicMaterial({opacity:0,color:0,transparent:!1,side:DoubleSide}),Pu=new PlaneGeometry($u,Tu);super(Pu,Cu),a$h(this,"name","opacity-mesh")}removeFromParent(){const $u=this.parent;return $u!==null&&$u.remove(this),this}}function c$l(..._u){const $u=new Vector3;return _u.forEach(Tu=>{$u.add(Tu)}),$u.divideScalar(_u.length),$u}var $$6=Object.defineProperty,D$c=(_u,$u,Tu)=>$u in _u?$$6(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,i$i=(_u,$u,Tu)=>(D$c(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const w$d=1,A$f=`CSS3DObjectPlus@${w$d}`,Q$d=.00216,R$b=.003;class U$a extends CSS3DObject{constructor($u){var Tu,Cu,Pu;const Ru=$u.container,Lu=$u.cornerPoints,Bu=(Tu=$u.ratio)!=null?Tu:R$b,Vu=(Cu=$u.dpr)!=null?Cu:1,Ou=(Pu=$u.pointerEvents)!=null?Pu:"auto",Du=Math.max(Q$d,Bu),ku=Lu[0].distanceTo(Lu[1]),Fu=Lu[1].distanceTo(Lu[2]),Nu=t$c(ku/Bu*Vu),Gu=t$c(Fu/Bu*Vu),zu=c$l(...Lu);let Hu;if(Du===Bu)Ru.style.width=`${Nu}px`,Ru.style.height=`${Gu}px`,Hu=Ru;else{const Ju=document.createElement("div");Ju.style.width=`${Nu}px`,Ju.style.height=`${Gu}px`,Ju.style.pointerEvents="none";const _d=Bu/Du;Ru.style.position="absolute",Ru.style.left="0",Ru.style.top="0",Ru.style.width=`${_d*Nu}px`,Ru.style.height=`${_d*Gu}px`,Ju.appendChild(Ru),Hu=Ju}if(super(Hu),i$i(this,"version",w$d),i$i(this,"isCSS3DObjectPlus",!0),i$i(this,"container"),i$i(this,"width"),i$i(this,"height"),i$i(this,"domWidthPx"),i$i(this,"domHeightPx"),i$i(this,"cornerPoints"),i$i(this,"centerPosition"),i$i(this,"ratio"),i$i(this,"mode","front"),i$i(this,"hooks",new E$g),i$i(this,"opacityMesh"),i$i(this,"selfVisible",!0),i$i(this,"parentVisibleListenerDisposer"),i$i(this,"createOpacityMesh",Ju=>{const{domWidthPx:_d,domHeightPx:tp}=Ju,Ku=new p$e(_d,tp);return Ku.position.copy(Ju.position),Ku.rotation.copy(Ju.rotation),Ku.scale.copy(Ju.scale),Ku}),i$i(this,"addParentVisibleListener",()=>{var Ju;if((Ju=this.parent)!=null&&Ju.isCSS3DGroup){const _d=this.parent,tp=Ku=>{this.setVisible(Ku&&this.selfVisible,{setSelfVisible:!1})};_d.hooks.on("visibleChange",tp),this.parentVisibleListenerDisposer=()=>_d.hooks.off("visibleChange",tp)}}),i$i(this,"removeParentVisibleListener",()=>{var Ju;(Ju=this.parentVisibleListenerDisposer)==null||Ju.call(this)}),Ru.style.pointerEvents=Ou,this.scale.set(Du,Du,Du),this.cornerPoints=Lu,this.ratio=Bu,this.container=Ru,$u.mode&&(this.mode=$u.mode),Du===Bu)this.width=ku,this.height=Fu,this.domWidthPx=Nu,this.domHeightPx=Gu,this.centerPosition=zu;else{const Ju=Bu/Du;this.width=Ju*ku,this.height=Ju*Fu,this.domWidthPx=Ju*Nu,this.domHeightPx=Ju*Gu,this.centerPosition=new Vector3().subVectors(zu,Lu[0]).multiplyScalar(Ju).add(Lu[0])}Ru.classList.add(`${A$f}__container`);const Uu=new Vector3().subVectors(Lu[1],Lu[0]),ju=new Vector3().subVectors(Lu[3],Lu[0]),Wu=new Vector3().crossVectors(Uu,ju).normalize();this.lookAt(Wu);const Qu=this.up.clone().applyQuaternion(this.quaternion),qu=ju.clone(),Yu=new Vector3().crossVectors(Qu,qu).normalize();this.rotateOnWorldAxis(Yu,Qu.angleTo(qu)),this.position.copy(zu),this.addEventListener("added",()=>{var Ju;this.mode==="front"&&((Ju=this.opacityMesh)==null||Ju.removeFromParent()),this.addParentVisibleListener()}),this.addEventListener("removed",()=>{var Ju;(Ju=this.opacityMesh)==null||Ju.removeFromParent(),this.removeParentVisibleListener()})}setVisible($u,Tu={setSelfVisible:!0}){Tu.setSelfVisible&&(this.selfVisible=$u),this.visible=$u,this.opacityMesh&&(this.opacityMesh.visible=$u)}removeFromParent(){var $u;const Tu=this.parent;return Tu!==null&&Tu.remove(this),($u=this.opacityMesh)==null||$u.removeFromParent(),this}removeOpacityMesh(){var $u;return($u=this.opacityMesh)==null||$u.removeFromParent(),this.opacityMesh=void 0,this}dispose(){var $u;this.container.remove(),this.removeFromParent(),($u=this.opacityMesh)==null||$u.removeFromParent()}getOpacityMesh(){if(this.opacityMesh)return this.opacityMesh;{const $u=this.createOpacityMesh(this);return this.opacityMesh=$u,$u}}applyMatrix4($u){var Tu;super.applyMatrix4($u),(Tu=this.opacityMesh)==null||Tu.applyMatrix4($u)}applyQuaternion($u){var Tu;return super.applyQuaternion($u),(Tu=this.opacityMesh)==null||Tu.applyQuaternion($u),this}applyScaleMatrix4($u){var Tu;this.scale.applyMatrix4($u),(Tu=this.opacityMesh)==null||Tu.scale.applyMatrix4($u)}}var a$g=Object.defineProperty,h$g=(_u,$u,Tu)=>$u in _u?a$g(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,s$g=(_u,$u,Tu)=>(h$g(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class p$d extends Scene{constructor(){super()}add(...$u){return super.add(...$u),t$d(...$u).forEach(Tu=>{Tu.mode="front"}),this}}class m$f extends Scene{constructor($u){if(super(),s$g(this,"scene"),!$u)throw new Error("CSS3DBehindScene: scene is required");this.scene=$u}add(...$u){return super.add(...$u),t$d(...$u).forEach(Tu=>{Tu.mode="behind",this.scene.add(Tu.getOpacityMesh())}),this}remove(...$u){return t$d(...$u).forEach(Tu=>{var Cu;(Cu=Tu.opacityMesh)==null||Cu.removeFromParent(),Tu.opacityMesh=null}),super.remove(...$u),this}}var n$g=Object.defineProperty,d$i=(_u,$u,Tu)=>$u in _u?n$g(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,s$f=(_u,$u,Tu)=>(d$i(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class h$f extends Group$1{constructor($u){super(),s$f(this,"isCSS3DGroup",!0),s$f(this,"mode"),s$f(this,"CSS3DObjectLength",0),s$f(this,"hooks",new E$g),this.mode=$u}add(...$u){return t$d(...$u).forEach(Tu=>{Tu.mode=this.mode}),super.add(...$u),this.updateLength(),this}setVisible($u){this.visible=$u,this.hooks.emit("visibleChange",$u)}remove(...$u){return super.remove(...$u),this.updateLength(),this}updateLength(){this.CSS3DObjectLength=t$d(this).length}}class m$e extends h$f{constructor(){super("front")}}class g$j extends h$f{constructor($u){if(super("behind"),s$f(this,"scene"),!$u)throw new Error("CSS3DBehindScene: scene is required");this.scene=$u}add(...$u){return t$d(...$u).forEach(Tu=>{this.scene.add(Tu.getOpacityMesh())}),super.add(...$u),this}}var x$e=Object.defineProperty,R$a=Object.getOwnPropertySymbols,V$9=Object.prototype.hasOwnProperty,$$5=Object.prototype.propertyIsEnumerable,C$i=(_u,$u,Tu)=>$u in _u?x$e(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,g$i=(_u,$u)=>{for(var Tu in $u||($u={}))V$9.call($u,Tu)&&C$i(_u,Tu,$u[Tu]);if(R$a)for(var Tu of R$a($u))$$5.call($u,Tu)&&C$i(_u,Tu,$u[Tu]);return _u},i$h=(_u,$u,Tu)=>(C$i(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),p$c=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const H$a=3,G$9="CSS3DRenderer",b$c=`${G$9}@${H$a}`,u$f=()=>{console.error(`${b$c} is disposed`)},n$f={css3DObjects:[],frontModeStore:{css3DRenderer:new A$g},behindModeStore:{css3DRenderer:new A$g}};function j$5(_u){return n$f.css3DObjects.find($u=>$u.id===_u)}function T$a(_u){n$f.frontModeStore.css3DRenderer.setWrapper(_u)}function U$9(_u){n$f.behindModeStore.css3DRenderer.setWrapper(_u)}class w$c{constructor($u){i$h(this,"hooks",new E$g),i$h(this,"state",{enabled:!0,visible:!0,disposed:!1}),i$h(this,"_scene"),i$h(this,"store",{frontModeGroup:new m$e}),i$h(this,"create3DElement",(Tu,Cu,Pu)=>{if(this.state.disposed)return u$f();const Ru=(()=>{const qu={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none"};return Object.assign(qu,Pu)})(),Lu=Cu.map(s$h);if((Lu==null?void 0:Lu.length)<4)return console.error(`${b$c}: requires 4 point but params may have fewer`);const{ratio:Bu,devicePixelRatio:Vu,mode:Ou,autoRender:Du,container:ku,pointerEvents:Fu}=Ru;let Nu=!1;const Gu=this.createObject(Lu,{ratio:Bu,dpr:Vu,container:ku,mode:Ou,pointerEvents:Fu});n$f.css3DObjects.push(Gu),Ru.scene&&this.setScene(Ru.scene);const zu=()=>{if(Nu)return;const qu=Gu.mode==="front"?this.getFrontCSS3DObjectGroup():this.getBehindCSS3DObjectGroup();qu&&qu.add(Gu)},Hu=()=>{Nu||(zu(),this.render(Tu),this.hooks.emit("render"))},Uu=qu=>this.setVisibleById(Gu.id,qu),ju=qu=>this.setEnabledById(Gu.id,qu),Wu=()=>(Nu=!0,Gu.removeFromParent(),!0),Qu=Ou==="front"?n$f.frontModeStore.css3DRenderer:n$f.behindModeStore.css3DRenderer;return Du&&Hu(),{id:Gu.uuid,container:ku,css3DObject:Gu,render:Du?void 0:Hu,show:()=>Uu(!0),hide:()=>Uu(!1),setVisible:Uu,enable:()=>ju(!0),disable:()=>ju(!1),setEnabled:ju,dispose:Wu,appendToElement:qu=>Qu.setWrapper(qu)}}),i$h(this,"setVisibleById",(Tu,Cu)=>{var Pu;(Pu=j$5(Tu))==null||Pu.setVisible(Cu)}),i$h(this,"setEnabledById",(Tu,Cu)=>{const Pu=j$5(Tu);if(!Pu)return;const Ru=Pu.mode==="front"?this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}):this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1});Ru&&(Cu?Ru.add(Pu):Ru.remove(Pu))}),i$h(this,"createObject",(Tu,Cu)=>{const Pu=new U$a(g$i({cornerPoints:Tu},Cu));return Pu.element.classList.add(`${G$9}__container`),Pu.element.id=`${G$9}__container--${Pu.uuid}`,Pu}),$u&&this.setScene($u)}get scene(){return this._scene||console.error("scene doesn't exist!, please call setScene(scene) first"),this._scene}static get frontModeCSS3DRenderer(){return n$f.frontModeStore.css3DRenderer}static get behindModeCSS3DRenderer(){return n$f.behindModeStore.css3DRenderer}get frontModeCSS3DRenderer(){return n$f.frontModeStore.css3DRenderer}get behindModeCSS3DRenderer(){return n$f.behindModeStore.css3DRenderer}setScene($u){this._scene=$u}getCurrentState(){return this.state}setState($u,Tu={userAction:!0}){if(this.state.disposed)return u$f();const Cu=g$i({},this.state);this.state=Object.assign(this.state,$u),Cu.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Cu.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),Cu.disposed!==this.state.disposed&&this.handleDispose(),this.hooks.emit("stateChange",{state:this.state,prevState:Cu,userAction:Tu.userAction})}dispose(){this.setState({disposed:!0}),this.hooks.emit("dispose")}show(){return p$c(this,arguments,function*({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$f();this.setState({visible:!0},{userAction:$u}),this.hooks.emit("show",{userAction:$u})})}hide(){return p$c(this,arguments,function*({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$f();this.setState({visible:!1},{userAction:$u}),this.hooks.emit("hide",{userAction:$u})})}enable({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$f();this.setState({enabled:!0},{userAction:$u}),this.hooks.emit("enable",{userAction:$u})}disable({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$f();this.setState({enabled:!1},{userAction:$u}),this.hooks.emit("disable",{userAction:$u})}getFrontCSS3DScene({createSceneIfNotExists:$u=!1}={}){var Tu;const Cu=(Tu=n$f.frontModeStore)==null?void 0:Tu.css3DScene;if(Cu)return Cu;if($u){const Pu=new p$d;n$f.frontModeStore.css3DScene=Pu}return n$f.frontModeStore.css3DScene}getBehindCSS3DScene({createSceneIfNotExists:$u=!1}={}){var Tu,Cu;const Pu=(Tu=n$f.behindModeStore)==null?void 0:Tu.css3DScene;if(Pu)return Pu;if($u){const Ru=(Cu=n$f.behindModeStore.scene)!=null?Cu:this.scene;if(!Ru){console.error(`${b$c}: scene is required when mode is behind`);return}const Lu=new m$f(Ru);n$f.behindModeStore.css3DScene=Lu,n$f.behindModeStore.scene=Ru}return n$f.behindModeStore.css3DScene}getFrontCSS3DObjectGroup({addGroupIfNotExists:$u=!0}={}){const Tu=this.getFrontCSS3DScene({createSceneIfNotExists:$u});return $u&&Tu&&(Tu.getObjectById(this.store.frontModeGroup.id)||Tu.add(this.store.frontModeGroup)),this.store.frontModeGroup}getBehindCSS3DObjectGroup({addGroupIfNotExists:$u=!0}={}){var Tu;const Cu=this.getBehindCSS3DScene({createSceneIfNotExists:$u});if($u&&Cu&&this.scene){const Pu=(Tu=this.store.behindModeGroup)!=null?Tu:new g$j(this.scene);this.store.behindModeGroup=Pu,Cu.getObjectById(Pu.id)||Cu.add(Pu)}return this.store.behindModeGroup}render($u){var Tu,Cu;if(this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}).CSS3DObjectLength>0){const Pu=this.getFrontCSS3DScene({createSceneIfNotExists:!0});if(!Pu)return console.error(`${b$c}: css3DScene is required when mode is front`);n$f.frontModeStore.css3DRenderer.renderEveryFrame(Pu,$u)}if(((Cu=(Tu=this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1}))==null?void 0:Tu.CSS3DObjectLength)!=null?Cu:0)>0){const Pu=this.getBehindCSS3DScene({createSceneIfNotExists:!0});if(!Pu)return console.error(`${b$c}: css3DScene is required when mode is behind`);n$f.behindModeStore.css3DRenderer.renderEveryFrame(Pu,$u)}}handleShow(){return p$c(this,null,function*(){var $u;this.store.frontModeGroup.setVisible(!0),($u=this.store.behindModeGroup)==null||$u.setVisible(!0)})}handleHide(){return p$c(this,null,function*(){var $u;this.store.frontModeGroup.setVisible(!1),($u=this.store.behindModeGroup)==null||$u.setVisible(!1)})}handleEnable(){var $u,Tu;($u=this.getFrontCSS3DScene())==null||$u.add(this.store.frontModeGroup),this.store.behindModeGroup&&((Tu=this.getBehindCSS3DScene())==null||Tu.add(this.store.behindModeGroup))}handleDisable(){var $u,Tu,Cu;this.store.frontModeGroup.children.forEach(Pu=>{Pu instanceof CSS3DObject&&Pu.element instanceof Element&&Pu.element.parentNode!==null&&Pu.element.remove()}),($u=this.store.behindModeGroup)==null||$u.children.forEach(Pu=>{Pu instanceof CSS3DObject&&Pu.element instanceof Element&&Pu.element.parentNode!==null&&Pu.element.remove()}),(Tu=this.getFrontCSS3DScene())==null||Tu.remove(this.store.frontModeGroup),this.store.behindModeGroup&&((Cu=this.getBehindCSS3DScene())==null||Cu.remove(this.store.behindModeGroup))}handleDispose(){this.handleDisable()}}i$h(w$c,"setFrontModeContainer",T$a),i$h(w$c,"setBehindModeContainer",U$9);var t$b=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});function m$d(_u){return t$b(this,null,function*(){return new Promise($u=>{var Tu;if((Tu=_u.model)!=null&&Tu.loaded){$u();return}else _u.once("modelLoaded",()=>$u())})})}const e$d=document.createElement("div");e$d.classList.add("behindFiveElement");e$d.style.position="absolute";e$d.style.top="0";e$d.style.left="0";e$d.style.width="100%";e$d.style.height="100%";e$d.style.pointerEvents="none";function d$h(_u){var $u,Tu,Cu,Pu,Ru;const Lu=(Ru=(Tu=c$k(_u.getElement()))!=null?Tu:c$k(($u=_u.getElement())==null?void 0:$u.parentElement))!=null?Ru:c$k((Pu=(Cu=_u.getElement())==null?void 0:Cu.parentElement)==null?void 0:Pu.parentElement),Bu=Lu==null?void 0:Lu.parentElement;if(Bu)return Bu.contains(e$d)||Lu.parentElement.insertBefore(e$d,Lu),e$d;console.error("Can not find a valid element to insert behindFiveElement. How to fix it: https://github.com/realsee-developer/dnalogel/tree/main/plugins/src/CSS3DRenderPlugin/README.md")}function c$k(_u){var $u;if(!_u)return;const Tu=($u=_u.style.position)!=null?$u:getComputedStyle(_u).position;if(Tu!=="fixed"&&Tu!=="absolute"&&Tu!=="relative")return;const Cu=getComputedStyle(_u),Pu=Cu.backgroundColor,Ru=Cu.backgroundImage;if(!(Pu!=="transparent"&&Pu!=="rgba(0, 0, 0, 0)"&&Pu!==""||Ru!=="none"&&Ru!==""))return _u}var hammer={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(_u){(function($u,Tu,Cu,Pu){var Ru=["","webkit","Moz","MS","ms","o"],Lu=Tu.createElement("div"),Bu="function",Vu=Math.round,Ou=Math.abs,Du=Date.now;function ku(pp,bp,Pp){return setTimeout(Wu(pp,Pp),bp)}function Fu(pp,bp,Pp){return Array.isArray(pp)?(Nu(pp,Pp[bp],Pp),!0):!1}function Nu(pp,bp,Pp){var Np;if(!!pp)if(pp.forEach)pp.forEach(bp,Pp);else if(pp.length!==Pu)for(Np=0;Np<pp.length;)bp.call(Pp,pp[Np],Np,pp),Np++;else for(Np in pp)pp.hasOwnProperty(Np)&&bp.call(Pp,pp[Np],Np,pp)}function Gu(pp,bp,Pp){var Np="DEPRECATED METHOD: "+bp+`
`+Pp+` AT 
`;return function(){var tv=new Error("get-stack-trace"),av=tv&&tv.stack?tv.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Sv=$u.console&&($u.console.warn||$u.console.log);return Sv&&Sv.call($u.console,Np,av),pp.apply(this,arguments)}}var zu;typeof Object.assign!="function"?zu=function(bp){if(bp===Pu||bp===null)throw new TypeError("Cannot convert undefined or null to object");for(var Pp=Object(bp),Np=1;Np<arguments.length;Np++){var tv=arguments[Np];if(tv!==Pu&&tv!==null)for(var av in tv)tv.hasOwnProperty(av)&&(Pp[av]=tv[av])}return Pp}:zu=Object.assign;var Hu=Gu(function(bp,Pp,Np){for(var tv=Object.keys(Pp),av=0;av<tv.length;)(!Np||Np&&bp[tv[av]]===Pu)&&(bp[tv[av]]=Pp[tv[av]]),av++;return bp},"extend","Use `assign`."),Uu=Gu(function(bp,Pp){return Hu(bp,Pp,!0)},"merge","Use `assign`.");function ju(pp,bp,Pp){var Np=bp.prototype,tv;tv=pp.prototype=Object.create(Np),tv.constructor=pp,tv._super=Np,Pp&&zu(tv,Pp)}function Wu(pp,bp){return function(){return pp.apply(bp,arguments)}}function Qu(pp,bp){return typeof pp==Bu?pp.apply(bp&&bp[0]||Pu,bp):pp}function qu(pp,bp){return pp===Pu?bp:pp}function Yu(pp,bp,Pp){Nu(Ku(bp),function(Np){pp.addEventListener(Np,Pp,!1)})}function Ju(pp,bp,Pp){Nu(Ku(bp),function(Np){pp.removeEventListener(Np,Pp,!1)})}function _d(pp,bp){for(;pp;){if(pp==bp)return!0;pp=pp.parentNode}return!1}function tp(pp,bp){return pp.indexOf(bp)>-1}function Ku(pp){return pp.trim().split(/\s+/g)}function Xu(pp,bp,Pp){if(pp.indexOf&&!Pp)return pp.indexOf(bp);for(var Np=0;Np<pp.length;){if(Pp&&pp[Np][Pp]==bp||!Pp&&pp[Np]===bp)return Np;Np++}return-1}function Zu(pp){return Array.prototype.slice.call(pp,0)}function _c(pp,bp,Pp){for(var Np=[],tv=[],av=0;av<pp.length;){var Sv=bp?pp[av][bp]:pp[av];Xu(tv,Sv)<0&&Np.push(pp[av]),tv[av]=Sv,av++}return Pp&&(bp?Np=Np.sort(function(Gv,Wv){return Gv[bp]>Wv[bp]}):Np=Np.sort()),Np}function Xc(pp,bp){for(var Pp,Np,tv=bp[0].toUpperCase()+bp.slice(1),av=0;av<Ru.length;){if(Pp=Ru[av],Np=Pp?Pp+tv:bp,Np in pp)return Np;av++}return Pu}var _h=1;function ip(){return _h++}function ap(pp){var bp=pp.ownerDocument||pp;return bp.defaultView||bp.parentWindow||$u}var hp=/mobile|tablet|ip(ad|hone|od)|android/i,Ap="ontouchstart"in $u,gp=Xc($u,"PointerEvent")!==Pu,Rp=Ap&&hp.test(navigator.userAgent),Sp="touch",Dp="pen",Ep="mouse",Bp="kinect",Ip=25,ep=1,_f=2,op=4,rp=8,up=1,cp=2,fp=4,vp=8,xp=16,mp=cp|fp,sp=vp|xp,lp=mp|sp,$p=["x","y"],Mp=["clientX","clientY"];function kp(pp,bp){var Pp=this;this.manager=pp,this.callback=bp,this.element=pp.element,this.target=pp.options.inputTarget,this.domHandler=function(Np){Qu(pp.options.enable,[pp])&&Pp.handler(Np)},this.init()}kp.prototype={handler:function(){},init:function(){this.evEl&&Yu(this.element,this.evEl,this.domHandler),this.evTarget&&Yu(this.target,this.evTarget,this.domHandler),this.evWin&&Yu(ap(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ju(this.element,this.evEl,this.domHandler),this.evTarget&&Ju(this.target,this.evTarget,this.domHandler),this.evWin&&Ju(ap(this.element),this.evWin,this.domHandler)}};function Vp(pp){var bp,Pp=pp.options.inputClass;return Pp?bp=Pp:gp?bp=yv:Rp?bp=iv:Ap?bp=dv:bp=xv,new bp(pp,Gp)}function Gp(pp,bp,Pp){var Np=Pp.pointers.length,tv=Pp.changedPointers.length,av=bp&ep&&Np-tv===0,Sv=bp&(op|rp)&&Np-tv===0;Pp.isFirst=!!av,Pp.isFinal=!!Sv,av&&(pp.session={}),Pp.eventType=bp,qp(pp,Pp),pp.emit("hammer.input",Pp),pp.recognize(Pp),pp.session.prevInput=Pp}function qp(pp,bp){var Pp=pp.session,Np=bp.pointers,tv=Np.length;Pp.firstInput||(Pp.firstInput=Kp(bp)),tv>1&&!Pp.firstMultiple?Pp.firstMultiple=Kp(bp):tv===1&&(Pp.firstMultiple=!1);var av=Pp.firstInput,Sv=Pp.firstMultiple,jv=Sv?Sv.center:av.center,Gv=bp.center=ev(Np);bp.timeStamp=Du(),bp.deltaTime=bp.timeStamp-av.timeStamp,bp.angle=Jp(jv,Gv),bp.distance=Tp(jv,Gv),Wp(Pp,bp),bp.offsetDirection=Zp(bp.deltaX,bp.deltaY);var Wv=Xp(bp.deltaTime,bp.deltaX,bp.deltaY);bp.overallVelocityX=Wv.x,bp.overallVelocityY=Wv.y,bp.overallVelocity=Ou(Wv.x)>Ou(Wv.y)?Wv.x:Wv.y,bp.scale=Sv?ov(Sv.pointers,Np):1,bp.rotation=Sv?nv(Sv.pointers,Np):0,bp.maxPointers=Pp.prevInput?bp.pointers.length>Pp.prevInput.maxPointers?bp.pointers.length:Pp.prevInput.maxPointers:bp.pointers.length,Yp(Pp,bp);var tm=pp.element;_d(bp.srcEvent.target,tm)&&(tm=bp.srcEvent.target),bp.target=tm}function Wp(pp,bp){var Pp=bp.center,Np=pp.offsetDelta||{},tv=pp.prevDelta||{},av=pp.prevInput||{};(bp.eventType===ep||av.eventType===op)&&(tv=pp.prevDelta={x:av.deltaX||0,y:av.deltaY||0},Np=pp.offsetDelta={x:Pp.x,y:Pp.y}),bp.deltaX=tv.x+(Pp.x-Np.x),bp.deltaY=tv.y+(Pp.y-Np.y)}function Yp(pp,bp){var Pp=pp.lastInterval||bp,Np=bp.timeStamp-Pp.timeStamp,tv,av,Sv,jv;if(bp.eventType!=rp&&(Np>Ip||Pp.velocity===Pu)){var Gv=bp.deltaX-Pp.deltaX,Wv=bp.deltaY-Pp.deltaY,tm=Xp(Np,Gv,Wv);av=tm.x,Sv=tm.y,tv=Ou(tm.x)>Ou(tm.y)?tm.x:tm.y,jv=Zp(Gv,Wv),pp.lastInterval=bp}else tv=Pp.velocity,av=Pp.velocityX,Sv=Pp.velocityY,jv=Pp.direction;bp.velocity=tv,bp.velocityX=av,bp.velocityY=Sv,bp.direction=jv}function Kp(pp){for(var bp=[],Pp=0;Pp<pp.pointers.length;)bp[Pp]={clientX:Vu(pp.pointers[Pp].clientX),clientY:Vu(pp.pointers[Pp].clientY)},Pp++;return{timeStamp:Du(),pointers:bp,center:ev(bp),deltaX:pp.deltaX,deltaY:pp.deltaY}}function ev(pp){var bp=pp.length;if(bp===1)return{x:Vu(pp[0].clientX),y:Vu(pp[0].clientY)};for(var Pp=0,Np=0,tv=0;tv<bp;)Pp+=pp[tv].clientX,Np+=pp[tv].clientY,tv++;return{x:Vu(Pp/bp),y:Vu(Np/bp)}}function Xp(pp,bp,Pp){return{x:bp/pp||0,y:Pp/pp||0}}function Zp(pp,bp){return pp===bp?up:Ou(pp)>=Ou(bp)?pp<0?cp:fp:bp<0?vp:xp}function Tp(pp,bp,Pp){Pp||(Pp=$p);var Np=bp[Pp[0]]-pp[Pp[0]],tv=bp[Pp[1]]-pp[Pp[1]];return Math.sqrt(Np*Np+tv*tv)}function Jp(pp,bp,Pp){Pp||(Pp=$p);var Np=bp[Pp[0]]-pp[Pp[0]],tv=bp[Pp[1]]-pp[Pp[1]];return Math.atan2(tv,Np)*180/Math.PI}function nv(pp,bp){return Jp(bp[1],bp[0],Mp)+Jp(pp[1],pp[0],Mp)}function ov(pp,bp){return Tp(bp[0],bp[1],Mp)/Tp(pp[0],pp[1],Mp)}var rv={mousedown:ep,mousemove:_f,mouseup:op},hv="mousedown",Av="mousemove mouseup";function xv(){this.evEl=hv,this.evWin=Av,this.pressed=!1,kp.apply(this,arguments)}ju(xv,kp,{handler:function(bp){var Pp=rv[bp.type];Pp&ep&&bp.button===0&&(this.pressed=!0),Pp&_f&&bp.which!==1&&(Pp=op),this.pressed&&(Pp&op&&(this.pressed=!1),this.callback(this.manager,Pp,{pointers:[bp],changedPointers:[bp],pointerType:Ep,srcEvent:bp}))}});var wv={pointerdown:ep,pointermove:_f,pointerup:op,pointercancel:rp,pointerout:rp},fv={2:Sp,3:Dp,4:Ep,5:Bp},$v="pointerdown",Tv="pointermove pointerup pointercancel";$u.MSPointerEvent&&!$u.PointerEvent&&($v="MSPointerDown",Tv="MSPointerMove MSPointerUp MSPointerCancel");function yv(){this.evEl=$v,this.evWin=Tv,kp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ju(yv,kp,{handler:function(bp){var Pp=this.store,Np=!1,tv=bp.type.toLowerCase().replace("ms",""),av=wv[tv],Sv=fv[bp.pointerType]||bp.pointerType,jv=Sv==Sp,Gv=Xu(Pp,bp.pointerId,"pointerId");av&ep&&(bp.button===0||jv)?Gv<0&&(Pp.push(bp),Gv=Pp.length-1):av&(op|rp)&&(Np=!0),!(Gv<0)&&(Pp[Gv]=bp,this.callback(this.manager,av,{pointers:Pp,changedPointers:[bp],pointerType:Sv,srcEvent:bp}),Np&&Pp.splice(Gv,1))}});var Cv={touchstart:ep,touchmove:_f,touchend:op,touchcancel:rp},Dv="touchstart",Ev="touchstart touchmove touchend touchcancel";function wp(){this.evTarget=Dv,this.evWin=Ev,this.started=!1,kp.apply(this,arguments)}ju(wp,kp,{handler:function(bp){var Pp=Cv[bp.type];if(Pp===ep&&(this.started=!0),!!this.started){var Np=jp.call(this,bp,Pp);Pp&(op|rp)&&Np[0].length-Np[1].length===0&&(this.started=!1),this.callback(this.manager,Pp,{pointers:Np[0],changedPointers:Np[1],pointerType:Sp,srcEvent:bp})}}});function jp(pp,bp){var Pp=Zu(pp.touches),Np=Zu(pp.changedTouches);return bp&(op|rp)&&(Pp=_c(Pp.concat(Np),"identifier",!0)),[Pp,Np]}var Up={touchstart:ep,touchmove:_f,touchend:op,touchcancel:rp},zp="touchstart touchmove touchend touchcancel";function iv(){this.evTarget=zp,this.targetIds={},kp.apply(this,arguments)}ju(iv,kp,{handler:function(bp){var Pp=Up[bp.type],Np=gv.call(this,bp,Pp);!Np||this.callback(this.manager,Pp,{pointers:Np[0],changedPointers:Np[1],pointerType:Sp,srcEvent:bp})}});function gv(pp,bp){var Pp=Zu(pp.touches),Np=this.targetIds;if(bp&(ep|_f)&&Pp.length===1)return Np[Pp[0].identifier]=!0,[Pp,Pp];var tv,av,Sv=Zu(pp.changedTouches),jv=[],Gv=this.target;if(av=Pp.filter(function(Wv){return _d(Wv.target,Gv)}),bp===ep)for(tv=0;tv<av.length;)Np[av[tv].identifier]=!0,tv++;for(tv=0;tv<Sv.length;)Np[Sv[tv].identifier]&&jv.push(Sv[tv]),bp&(op|rp)&&delete Np[Sv[tv].identifier],tv++;if(!!jv.length)return[_c(av.concat(jv),"identifier",!0),jv]}var vv=2500,lv=25;function dv(){kp.apply(this,arguments);var pp=Wu(this.handler,this);this.touch=new iv(this.manager,pp),this.mouse=new xv(this.manager,pp),this.primaryTouch=null,this.lastTouches=[]}ju(dv,kp,{handler:function(bp,Pp,Np){var tv=Np.pointerType==Sp,av=Np.pointerType==Ep;if(!(av&&Np.sourceCapabilities&&Np.sourceCapabilities.firesTouchEvents)){if(tv)cv.call(this,Pp,Np);else if(av&&dp.call(this,Np))return;this.callback(bp,Pp,Np)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function cv(pp,bp){pp&ep?(this.primaryTouch=bp.changedPointers[0].identifier,Pv.call(this,bp)):pp&(op|rp)&&Pv.call(this,bp)}function Pv(pp){var bp=pp.changedPointers[0];if(bp.identifier===this.primaryTouch){var Pp={x:bp.clientX,y:bp.clientY};this.lastTouches.push(Pp);var Np=this.lastTouches,tv=function(){var av=Np.indexOf(Pp);av>-1&&Np.splice(av,1)};setTimeout(tv,vv)}}function dp(pp){for(var bp=pp.srcEvent.clientX,Pp=pp.srcEvent.clientY,Np=0;Np<this.lastTouches.length;Np++){var tv=this.lastTouches[Np],av=Math.abs(bp-tv.x),Sv=Math.abs(Pp-tv.y);if(av<=lv&&Sv<=lv)return!0}return!1}var _p=Xc(Lu.style,"touchAction"),Cp=_p!==Pu,Fp="compute",Hp="auto",uv="manipulation",pv="none",Lv="pan-x",sv="pan-y",Bv=dm();function Vv(pp,bp){this.manager=pp,this.set(bp)}Vv.prototype={set:function(pp){pp==Fp&&(pp=this.compute()),Cp&&this.manager.element.style&&Bv[pp]&&(this.manager.element.style[_p]=pp),this.actions=pp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var pp=[];return Nu(this.manager.recognizers,function(bp){Qu(bp.options.enable,[bp])&&(pp=pp.concat(bp.getTouchAction()))}),um(pp.join(" "))},preventDefaults:function(pp){var bp=pp.srcEvent,Pp=pp.offsetDirection;if(this.manager.session.prevented){bp.preventDefault();return}var Np=this.actions,tv=tp(Np,pv)&&!Bv[pv],av=tp(Np,sv)&&!Bv[sv],Sv=tp(Np,Lv)&&!Bv[Lv];if(tv){var jv=pp.pointers.length===1,Gv=pp.distance<2,Wv=pp.deltaTime<250;if(jv&&Gv&&Wv)return}if(!(Sv&&av)&&(tv||av&&Pp&mp||Sv&&Pp&sp))return this.preventSrc(bp)},preventSrc:function(pp){this.manager.session.prevented=!0,pp.preventDefault()}};function um(pp){if(tp(pp,pv))return pv;var bp=tp(pp,Lv),Pp=tp(pp,sv);return bp&&Pp?pv:bp||Pp?bp?Lv:sv:tp(pp,uv)?uv:Hp}function dm(){if(!Cp)return!1;var pp={},bp=$u.CSS&&$u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Pp){pp[Pp]=bp?$u.CSS.supports("touch-action",Pp):!0}),pp}var em=1,Hv=2,am=4,Uv=8,qv=Uv,kv=16,Mv=32;function Fv(pp){this.options=zu({},this.defaults,pp||{}),this.id=ip(),this.manager=null,this.options.enable=qu(this.options.enable,!0),this.state=em,this.simultaneous={},this.requireFail=[]}Fv.prototype={defaults:{},set:function(pp){return zu(this.options,pp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(pp){if(Fu(pp,"recognizeWith",this))return this;var bp=this.simultaneous;return pp=Yv(pp,this),bp[pp.id]||(bp[pp.id]=pp,pp.recognizeWith(this)),this},dropRecognizeWith:function(pp){return Fu(pp,"dropRecognizeWith",this)?this:(pp=Yv(pp,this),delete this.simultaneous[pp.id],this)},requireFailure:function(pp){if(Fu(pp,"requireFailure",this))return this;var bp=this.requireFail;return pp=Yv(pp,this),Xu(bp,pp)===-1&&(bp.push(pp),pp.requireFailure(this)),this},dropRequireFailure:function(pp){if(Fu(pp,"dropRequireFailure",this))return this;pp=Yv(pp,this);var bp=Xu(this.requireFail,pp);return bp>-1&&this.requireFail.splice(bp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(pp){return!!this.simultaneous[pp.id]},emit:function(pp){var bp=this,Pp=this.state;function Np(tv){bp.manager.emit(tv,pp)}Pp<Uv&&Np(bp.options.event+rm(Pp)),Np(bp.options.event),pp.additionalEvent&&Np(pp.additionalEvent),Pp>=Uv&&Np(bp.options.event+rm(Pp))},tryEmit:function(pp){if(this.canEmit())return this.emit(pp);this.state=Mv},canEmit:function(){for(var pp=0;pp<this.requireFail.length;){if(!(this.requireFail[pp].state&(Mv|em)))return!1;pp++}return!0},recognize:function(pp){var bp=zu({},pp);if(!Qu(this.options.enable,[this,bp])){this.reset(),this.state=Mv;return}this.state&(qv|kv|Mv)&&(this.state=em),this.state=this.process(bp),this.state&(Hv|am|Uv|kv)&&this.tryEmit(bp)},process:function(pp){},getTouchAction:function(){},reset:function(){}};function rm(pp){return pp&kv?"cancel":pp&Uv?"end":pp&am?"move":pp&Hv?"start":""}function im(pp){return pp==xp?"down":pp==vp?"up":pp==cp?"left":pp==fp?"right":""}function Yv(pp,bp){var Pp=bp.manager;return Pp?Pp.get(pp):pp}function Nv(){Fv.apply(this,arguments)}ju(Nv,Fv,{defaults:{pointers:1},attrTest:function(pp){var bp=this.options.pointers;return bp===0||pp.pointers.length===bp},process:function(pp){var bp=this.state,Pp=pp.eventType,Np=bp&(Hv|am),tv=this.attrTest(pp);return Np&&(Pp&rp||!tv)?bp|kv:Np||tv?Pp&op?bp|Uv:bp&Hv?bp|am:Hv:Mv}});function hm(){Nv.apply(this,arguments),this.pX=null,this.pY=null}ju(hm,Nv,{defaults:{event:"pan",threshold:10,pointers:1,direction:lp},getTouchAction:function(){var pp=this.options.direction,bp=[];return pp&mp&&bp.push(sv),pp&sp&&bp.push(Lv),bp},directionTest:function(pp){var bp=this.options,Pp=!0,Np=pp.distance,tv=pp.direction,av=pp.deltaX,Sv=pp.deltaY;return tv&bp.direction||(bp.direction&mp?(tv=av===0?up:av<0?cp:fp,Pp=av!=this.pX,Np=Math.abs(pp.deltaX)):(tv=Sv===0?up:Sv<0?vp:xp,Pp=Sv!=this.pY,Np=Math.abs(pp.deltaY))),pp.direction=tv,Pp&&Np>bp.threshold&&tv&bp.direction},attrTest:function(pp){return Nv.prototype.attrTest.call(this,pp)&&(this.state&Hv||!(this.state&Hv)&&this.directionTest(pp))},emit:function(pp){this.pX=pp.deltaX,this.pY=pp.deltaY;var bp=im(pp.direction);bp&&(pp.additionalEvent=this.options.event+bp),this._super.emit.call(this,pp)}});function sm(){Nv.apply(this,arguments)}ju(sm,Nv,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[pv]},attrTest:function(pp){return this._super.attrTest.call(this,pp)&&(Math.abs(pp.scale-1)>this.options.threshold||this.state&Hv)},emit:function(pp){if(pp.scale!==1){var bp=pp.scale<1?"in":"out";pp.additionalEvent=this.options.event+bp}this._super.emit.call(this,pp)}});function cm(){Fv.apply(this,arguments),this._timer=null,this._input=null}ju(cm,Fv,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Hp]},process:function(pp){var bp=this.options,Pp=pp.pointers.length===bp.pointers,Np=pp.distance<bp.threshold,tv=pp.deltaTime>bp.time;if(this._input=pp,!Np||!Pp||pp.eventType&(op|rp)&&!tv)this.reset();else if(pp.eventType&ep)this.reset(),this._timer=ku(function(){this.state=qv,this.tryEmit()},bp.time,this);else if(pp.eventType&op)return qv;return Mv},reset:function(){clearTimeout(this._timer)},emit:function(pp){this.state===qv&&(pp&&pp.eventType&op?this.manager.emit(this.options.event+"up",pp):(this._input.timeStamp=Du(),this.manager.emit(this.options.event,this._input)))}});function Kv(){Nv.apply(this,arguments)}ju(Kv,Nv,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[pv]},attrTest:function(pp){return this._super.attrTest.call(this,pp)&&(Math.abs(pp.rotation)>this.options.threshold||this.state&Hv)}});function mm(){Nv.apply(this,arguments)}ju(mm,Nv,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:mp|sp,pointers:1},getTouchAction:function(){return hm.prototype.getTouchAction.call(this)},attrTest:function(pp){var bp=this.options.direction,Pp;return bp&(mp|sp)?Pp=pp.overallVelocity:bp&mp?Pp=pp.overallVelocityX:bp&sp&&(Pp=pp.overallVelocityY),this._super.attrTest.call(this,pp)&&bp&pp.offsetDirection&&pp.distance>this.options.threshold&&pp.maxPointers==this.options.pointers&&Ou(Pp)>this.options.velocity&&pp.eventType&op},emit:function(pp){var bp=im(pp.offsetDirection);bp&&this.manager.emit(this.options.event+bp,pp),this.manager.emit(this.options.event,pp)}});function pm(){Fv.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}ju(pm,Fv,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[uv]},process:function(pp){var bp=this.options,Pp=pp.pointers.length===bp.pointers,Np=pp.distance<bp.threshold,tv=pp.deltaTime<bp.time;if(this.reset(),pp.eventType&ep&&this.count===0)return this.failTimeout();if(Np&&tv&&Pp){if(pp.eventType!=op)return this.failTimeout();var av=this.pTime?pp.timeStamp-this.pTime<bp.interval:!0,Sv=!this.pCenter||Tp(this.pCenter,pp.center)<bp.posThreshold;this.pTime=pp.timeStamp,this.pCenter=pp.center,!Sv||!av?this.count=1:this.count+=1,this._input=pp;var jv=this.count%bp.taps;if(jv===0)return this.hasRequireFailures()?(this._timer=ku(function(){this.state=qv,this.tryEmit()},bp.interval,this),Hv):qv}return Mv},failTimeout:function(){return this._timer=ku(function(){this.state=Mv},this.options.interval,this),Mv},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==qv&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function lm(pp,bp){return bp=bp||{},bp.recognizers=qu(bp.recognizers,lm.defaults.preset),new Am(pp,bp)}lm.VERSION="2.0.7",lm.defaults={domEvents:!1,touchAction:Fp,enable:!0,inputTarget:null,inputClass:null,preset:[[Kv,{enable:!1}],[sm,{enable:!1},["rotate"]],[mm,{direction:mp}],[hm,{direction:mp},["swipe"]],[pm],[pm,{event:"doubletap",taps:2},["tap"]],[cm]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var $m=1,xm=2;function Am(pp,bp){this.options=zu({},lm.defaults,bp||{}),this.options.inputTarget=this.options.inputTarget||pp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=pp,this.input=Vp(this),this.touchAction=new Vv(this,this.options.touchAction),gm(this,!0),Nu(this.options.recognizers,function(Pp){var Np=this.add(new Pp[0](Pp[1]));Pp[2]&&Np.recognizeWith(Pp[2]),Pp[3]&&Np.requireFailure(Pp[3])},this)}Am.prototype={set:function(pp){return zu(this.options,pp),pp.touchAction&&this.touchAction.update(),pp.inputTarget&&(this.input.destroy(),this.input.target=pp.inputTarget,this.input.init()),this},stop:function(pp){this.session.stopped=pp?xm:$m},recognize:function(pp){var bp=this.session;if(!bp.stopped){this.touchAction.preventDefaults(pp);var Pp,Np=this.recognizers,tv=bp.curRecognizer;(!tv||tv&&tv.state&qv)&&(tv=bp.curRecognizer=null);for(var av=0;av<Np.length;)Pp=Np[av],bp.stopped!==xm&&(!tv||Pp==tv||Pp.canRecognizeWith(tv))?Pp.recognize(pp):Pp.reset(),!tv&&Pp.state&(Hv|am|Uv)&&(tv=bp.curRecognizer=Pp),av++}},get:function(pp){if(pp instanceof Fv)return pp;for(var bp=this.recognizers,Pp=0;Pp<bp.length;Pp++)if(bp[Pp].options.event==pp)return bp[Pp];return null},add:function(pp){if(Fu(pp,"add",this))return this;var bp=this.get(pp.options.event);return bp&&this.remove(bp),this.recognizers.push(pp),pp.manager=this,this.touchAction.update(),pp},remove:function(pp){if(Fu(pp,"remove",this))return this;if(pp=this.get(pp),pp){var bp=this.recognizers,Pp=Xu(bp,pp);Pp!==-1&&(bp.splice(Pp,1),this.touchAction.update())}return this},on:function(pp,bp){if(pp!==Pu&&bp!==Pu){var Pp=this.handlers;return Nu(Ku(pp),function(Np){Pp[Np]=Pp[Np]||[],Pp[Np].push(bp)}),this}},off:function(pp,bp){if(pp!==Pu){var Pp=this.handlers;return Nu(Ku(pp),function(Np){bp?Pp[Np]&&Pp[Np].splice(Xu(Pp[Np],bp),1):delete Pp[Np]}),this}},emit:function(pp,bp){this.options.domEvents&&Mm(pp,bp);var Pp=this.handlers[pp]&&this.handlers[pp].slice();if(!(!Pp||!Pp.length)){bp.type=pp,bp.preventDefault=function(){bp.srcEvent.preventDefault()};for(var Np=0;Np<Pp.length;)Pp[Np](bp),Np++}},destroy:function(){this.element&&gm(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function gm(pp,bp){var Pp=pp.element;if(!!Pp.style){var Np;Nu(pp.options.cssProps,function(tv,av){Np=Xc(Pp.style,av),bp?(pp.oldCssProps[Np]=Pp.style[Np],Pp.style[Np]=tv):Pp.style[Np]=pp.oldCssProps[Np]||""}),bp||(pp.oldCssProps={})}}function Mm(pp,bp){var Pp=Tu.createEvent("Event");Pp.initEvent(pp,!0,!0),Pp.gesture=bp,bp.target.dispatchEvent(Pp)}zu(lm,{INPUT_START:ep,INPUT_MOVE:_f,INPUT_END:op,INPUT_CANCEL:rp,STATE_POSSIBLE:em,STATE_BEGAN:Hv,STATE_CHANGED:am,STATE_ENDED:Uv,STATE_RECOGNIZED:qv,STATE_CANCELLED:kv,STATE_FAILED:Mv,DIRECTION_NONE:up,DIRECTION_LEFT:cp,DIRECTION_RIGHT:fp,DIRECTION_UP:vp,DIRECTION_DOWN:xp,DIRECTION_HORIZONTAL:mp,DIRECTION_VERTICAL:sp,DIRECTION_ALL:lp,Manager:Am,Input:kp,TouchAction:Vv,TouchInput:iv,MouseInput:xv,PointerEventInput:yv,TouchMouseInput:dv,SingleTouchInput:wp,Recognizer:Fv,AttrRecognizer:Nv,Tap:pm,Pan:hm,Swipe:mm,Pinch:sm,Rotate:Kv,Press:cm,on:Yu,off:Ju,each:Nu,merge:Uu,extend:Hu,assign:zu,inherit:ju,bindFn:Wu,prefixed:Xc});var Em=typeof $u!="undefined"?$u:typeof self!="undefined"?self:{};Em.Hammer=lm,typeof Pu=="function"&&Pu.amd?Pu(function(){return lm}):_u.exports?_u.exports=lm:$u[Cu]=lm})(window,document,"Hammer")})(hammer);function e$c(_u){return _u.indexOf("//")===0||/^[0-9a-z]+\:\/\//i.test(_u)}var E$f=Object.defineProperty,C$h=Object.defineProperties,F$b=Object.getOwnPropertyDescriptors,b$b=Object.getOwnPropertySymbols,D$b=Object.prototype.hasOwnProperty,S$9=Object.prototype.propertyIsEnumerable,m$c=(_u,$u,Tu)=>$u in _u?E$f(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,p$b=(_u,$u)=>{for(var Tu in $u||($u={}))D$b.call($u,Tu)&&m$c(_u,Tu,$u[Tu]);if(b$b)for(var Tu of b$b($u))S$9.call($u,Tu)&&m$c(_u,Tu,$u[Tu]);return _u},l$e=(_u,$u)=>C$h(_u,F$b($u)),o$f=(_u,$u,Tu)=>(m$c(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const R$9="v2.0.1",h$e=`CSS3DRenderPlugin@${R$9}`;class W$6 extends w$c{constructor($u){super(),o$f(this,"five"),o$f(this,"behindFiveContainer"),o$f(this,"VERSION",R$9),o$f(this,"staticPrefix","//vrlab-static.ljcdn.com"),o$f(this,"create3DDomContainer",(Tu,Cu)=>{if(this.state.disposed)return;const Pu=(()=>{var Du;(Cu==null?void 0:Cu.dpr)!==void 0&&console.warn(`${h$e}: please use "config.devicePixelRatio" replace "config.dpr"`);const ku={ratio:.00216,devicePixelRatio:(Du=Cu==null?void 0:Cu.dpr)!=null?Du:1,mode:"front",autoRender:!0};return Object.assign(ku,Cu,(Cu==null?void 0:Cu.mode)==="behind"?{scene:this.five.scene}:void 0)})(),Ru=this.five.getElement();if(!Ru){console.error(`${h$e}: five.getElement() is ${Ru}`);return}const{autoRender:Lu}=Pu;Pu.mode==="behind"&&Pu.behindFiveContainer&&(this.behindFiveContainer=Pu.behindFiveContainer);const Bu=this.create3DElement(this.five.camera,Tu,l$e(p$b({},Pu),{autoRender:!1}));if(!Bu)return;const Vu=()=>{const Du=Bu.css3DObject.mode==="front"?Ru.parentElement:this.getBehindFiveElement();if(!Du)return console.error(`${h$e}: wrapper is ${Du}`);Bu.appendToElement(Du),Bu.render()},Ou=()=>{Bu.css3DObject.mode==="front"&&Vu(),Bu.css3DObject.mode==="behind"&&m$d(this.five).then(()=>Vu())};return Lu&&Ou(),l$e(p$b({},Bu),{render:Lu?void 0:Ou})}),this.five=$u}disposeAll(){return this.dispose()}setState(...$u){const Tu=super.setState(...$u);return this.five.needsRender=!0,Tu}getBehindFiveElement(){return this.behindFiveContainer?this.behindFiveContainer:(this.behindFiveContainer=d$h(this.five),this.behindFiveContainer)}isAbsoluteURL($u){return e$c($u)?$u:`${this.staticPrefix}${$u}`}}const P$c=_u=>new W$6(_u);function E$e(){}const it$3=_u=>_u;function kt$1(_u,$u){for(const Tu in $u)_u[Tu]=$u[Tu];return _u}function xt$1(_u){return!!_u&&(typeof _u=="object"||typeof _u=="function")&&typeof _u.then=="function"}function ot$5(_u){return _u()}function nt$3(){return Object.create(null)}function v$b(_u){_u.forEach(ot$5)}function O$c(_u){return typeof _u=="function"}function Ft(_u,$u){return _u!=_u?$u==$u:_u!==$u||_u&&typeof _u=="object"||typeof _u=="function"}let R$8;function Wt(_u,$u){return R$8||(R$8=document.createElement("a")),R$8.href=$u,_u===R$8.href}function Et(_u){return Object.keys(_u).length===0}function Bt(_u,$u,Tu,Cu){if(_u){const Pu=ct$2(_u,$u,Tu,Cu);return _u[0](Pu)}}function ct$2(_u,$u,Tu,Cu){return _u[1]&&Cu?kt$1(Tu.ctx.slice(),_u[1](Cu($u))):Tu.ctx}function Ht(_u,$u,Tu,Cu){if(_u[2]&&Cu){const Pu=_u[2](Cu(Tu));if($u.dirty===void 0)return Pu;if(typeof Pu=="object"){const Ru=[],Lu=Math.max($u.dirty.length,Pu.length);for(let Bu=0;Bu<Lu;Bu+=1)Ru[Bu]=$u.dirty[Bu]|Pu[Bu];return Ru}return $u.dirty|Pu}return $u.dirty}function It(_u,$u,Tu,Cu,Pu,Ru){if(Pu){const Lu=ct$2($u,Tu,Cu,Ru);_u.p(Lu,Pu)}}function Ut(_u){if(_u.ctx.length>32){const $u=[],Tu=_u.ctx.length/32;for(let Cu=0;Cu<Tu;Cu++)$u[Cu]=-1;return $u}return-1}function Gt(_u){return _u==null?"":_u}function Jt(_u){return _u&&O$c(_u.destroy)?_u.destroy:E$e}function Kt(_u){const $u=typeof _u=="string"&&_u.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return $u?[parseFloat($u[1]),$u[2]||"px"]:[_u,"px"]}const ut$2=typeof window!="undefined";let lt$3=ut$2?()=>window.performance.now():()=>Date.now(),X$4=ut$2?_u=>requestAnimationFrame(_u):E$e;const T$9=new Set;function ft$1(_u){T$9.forEach($u=>{$u.c(_u)||(T$9.delete($u),$u.f())}),T$9.size!==0&&X$4(ft$1)}function at$3(_u){let $u;return T$9.size===0&&X$4(ft$1),{promise:new Promise(Tu=>{T$9.add($u={c:_u,f:Tu})}),abort(){T$9.delete($u)}}}function dt$1(_u,$u){_u.appendChild($u)}function Qt(_u,$u,Tu){const Cu=Y$9(_u);if(!Cu.getElementById($u)){const Pu=U$8("style");Pu.id=$u,Pu.textContent=Tu,ht$1(Cu,Pu)}}function Y$9(_u){if(!_u)return document;const $u=_u.getRootNode?_u.getRootNode():_u.ownerDocument;return $u&&$u.host?$u:_u.ownerDocument}function vt$1(_u){const $u=U$8("style");return ht$1(Y$9(_u),$u),$u.sheet}function ht$1(_u,$u){return dt$1(_u.head||_u,$u),$u.sheet}function Nt(_u,$u,Tu){_u.insertBefore($u,Tu||null)}function I$g(_u){_u.parentNode&&_u.parentNode.removeChild(_u)}function Vt(_u,$u){for(let Tu=0;Tu<_u.length;Tu+=1)_u[Tu]&&_u[Tu].d($u)}function U$8(_u){return document.createElement(_u)}function At(_u){return document.createElementNS("http://www.w3.org/2000/svg",_u)}function _t$1(_u){return document.createTextNode(_u)}function Xt(){return _t$1(" ")}function Yt(){return _t$1("")}function st$2(_u,$u,Tu,Cu){return _u.addEventListener($u,Tu,Cu),()=>_u.removeEventListener($u,Tu,Cu)}function Zt(_u){return function($u){return $u.stopPropagation(),_u.call(this,$u)}}function te$1(_u,$u,Tu){Tu==null?_u.removeAttribute($u):_u.getAttribute($u)!==Tu&&_u.setAttribute($u,Tu)}function Mt(_u){return Array.from(_u.childNodes)}function ee$2(_u,$u){$u=""+$u,_u.data!==$u&&(_u.data=$u)}function ne(_u,$u,Tu,Cu){Tu===null?_u.style.removeProperty($u):_u.style.setProperty($u,Tu,Cu?"important":"")}let q$7;function Tt$1(){if(q$7===void 0){q$7=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{q$7=!0}}return q$7}function se$1(_u,$u){getComputedStyle(_u).position==="static"&&(_u.style.position="relative");const Tu=U$8("iframe");Tu.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),Tu.setAttribute("aria-hidden","true"),Tu.tabIndex=-1;const Cu=Tt$1();let Pu;return Cu?(Tu.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",Pu=st$2(window,"message",Ru=>{Ru.source===Tu.contentWindow&&$u()})):(Tu.src="about:blank",Tu.onload=()=>{Pu=st$2(Tu.contentWindow,"resize",$u),$u()}),dt$1(_u,Tu),()=>{(Cu||Pu&&Tu.contentWindow)&&Pu(),I$g(Tu)}}function re$2(_u,$u,Tu){_u.classList[Tu?"add":"remove"]($u)}function pt$2(_u,$u,{bubbles:Tu=!1,cancelable:Cu=!1}={}){const Pu=document.createEvent("CustomEvent");return Pu.initCustomEvent(_u,Tu,Cu,$u),Pu}class ie$3{constructor($u=!1){this.is_svg=!1,this.is_svg=$u,this.e=this.n=null}c($u){this.h($u)}m($u,Tu,Cu=null){this.e||(this.is_svg?this.e=At(Tu.nodeName):this.e=U$8(Tu.nodeType===11?"TEMPLATE":Tu.nodeName),this.t=Tu.tagName!=="TEMPLATE"?Tu:Tu.content,this.c($u)),this.i(Cu)}h($u){this.e.innerHTML=$u,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i($u){for(let Tu=0;Tu<this.n.length;Tu+=1)Nt(this.t,this.n[Tu],$u)}p($u){this.d(),this.h($u),this.i(this.a)}d(){this.n.forEach(I$g)}}const W$5=new Map;let B$a=0;function Ct$1(_u){let $u=5381,Tu=_u.length;for(;Tu--;)$u=($u<<5)-$u^_u.charCodeAt(Tu);return $u>>>0}function Pt(_u,$u){const Tu={stylesheet:vt$1($u),rules:{}};return W$5.set(_u,Tu),Tu}function mt$1(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu=0){const Vu=16.666/Cu;let Ou=`{
`;for(let Hu=0;Hu<=1;Hu+=Vu){const Uu=$u+(Tu-$u)*Ru(Hu);Ou+=Hu*100+`%{${Lu(Uu,1-Uu)}}
`}const Du=Ou+`100% {${Lu(Tu,1-Tu)}}
}`,ku=`__svelte_${Ct$1(Du)}_${Bu}`,Fu=Y$9(_u),{stylesheet:Nu,rules:Gu}=W$5.get(Fu)||Pt(Fu,_u);Gu[ku]||(Gu[ku]=!0,Nu.insertRule(`@keyframes ${ku} ${Du}`,Nu.cssRules.length));const zu=_u.style.animation||"";return _u.style.animation=`${zu?`${zu}, `:""}${ku} ${Cu}ms linear ${Pu}ms 1 both`,B$a+=1,ku}function K$d(_u,$u){const Tu=(_u.style.animation||"").split(", "),Cu=Tu.filter($u?Ru=>Ru.indexOf($u)<0:Ru=>Ru.indexOf("__svelte")===-1),Pu=Tu.length-Cu.length;Pu&&(_u.style.animation=Cu.join(", "),B$a-=Pu,B$a||jt$1())}function jt$1(){X$4(()=>{B$a||(W$5.forEach(_u=>{const{ownerNode:$u}=_u.stylesheet;$u&&I$g($u)}),W$5.clear())})}let z$b;function b$a(_u){z$b=_u}function x$d(){if(!z$b)throw new Error("Function called outside component initialization");return z$b}function ce$1(_u){x$d().$$.on_mount.push(_u)}function le$1(_u){x$d().$$.on_destroy.push(_u)}function fe$2(){const _u=x$d();return($u,Tu,{cancelable:Cu=!1}={})=>{const Pu=_u.$$.callbacks[$u];if(Pu){const Ru=pt$2($u,Tu,{cancelable:Cu});return Pu.slice().forEach(Lu=>{Lu.call(_u,Ru)}),!Ru.defaultPrevented}return!0}}function ae$1(_u,$u){return x$d().$$.context.set(_u,$u),$u}function de$3(_u){return x$d().$$.context.get(_u)}function he$3(_u,$u){const Tu=_u.$$.callbacks[$u.type];Tu&&Tu.slice().forEach(Cu=>Cu.call(this,$u))}const M$k=[],rt$4=[];let C$g=[];const Q$c=[],yt$1=Promise.resolve();let V$8=!1;function gt$2(){V$8||(V$8=!0,yt$1.then(Z$6))}function _e$2(){return gt$2(),yt$1}function L$d(_u){C$g.push(_u)}function pe$4(_u){Q$c.push(_u)}const J$9=new Set;let A$e=0;function Z$6(){if(A$e!==0)return;const _u=z$b;do{try{for(;A$e<M$k.length;){const $u=M$k[A$e];A$e++,b$a($u),St$1($u.$$)}}catch($u){throw M$k.length=0,A$e=0,$u}for(b$a(null),M$k.length=0,A$e=0;rt$4.length;)rt$4.pop()();for(let $u=0;$u<C$g.length;$u+=1){const Tu=C$g[$u];J$9.has(Tu)||(J$9.add(Tu),Tu())}C$g.length=0}while(M$k.length);for(;Q$c.length;)Q$c.pop()();V$8=!1,J$9.clear(),b$a(_u)}function St$1(_u){if(_u.fragment!==null){_u.update(),v$b(_u.before_update);const $u=_u.dirty;_u.dirty=[-1],_u.fragment&&_u.fragment.p(_u.ctx,$u),_u.after_update.forEach(L$d)}}function zt(_u){const $u=[],Tu=[];C$g.forEach(Cu=>_u.indexOf(Cu)===-1?$u.push(Cu):Tu.push(Cu)),Tu.forEach(Cu=>Cu()),C$g=$u}let S$8;function wt$1(){return S$8||(S$8=Promise.resolve(),S$8.then(()=>{S$8=null})),S$8}function H$9(_u,$u,Tu){_u.dispatchEvent(pt$2(`${$u?"intro":"outro"}${Tu}`))}const F$a=new Set;let k$d;function Lt(){k$d={r:0,c:[],p:k$d}}function Ot$1(){k$d.r||v$b(k$d.c),k$d=k$d.p}function tt$3(_u,$u){_u&&_u.i&&(F$a.delete(_u),_u.i($u))}function $t(_u,$u,Tu,Cu){if(_u&&_u.o){if(F$a.has(_u))return;F$a.add(_u),k$d.c.push(()=>{F$a.delete(_u),Cu&&(Tu&&_u.d(1),Cu())}),_u.o($u)}else Cu&&Cu()}const bt$1={duration:0};function me$2(_u,$u,Tu){const Cu={direction:"in"};let Pu=$u(_u,Tu,Cu),Ru=!1,Lu,Bu,Vu=0;function Ou(){Lu&&K$d(_u,Lu)}function Du(){const{delay:Fu=0,duration:Nu=300,easing:Gu=it$3,tick:zu=E$e,css:Hu}=Pu||bt$1;Hu&&(Lu=mt$1(_u,0,1,Nu,Fu,Gu,Hu,Vu++)),zu(0,1);const Uu=lt$3()+Fu,ju=Uu+Nu;Bu&&Bu.abort(),Ru=!0,L$d(()=>H$9(_u,!0,"start")),Bu=at$3(Wu=>{if(Ru){if(Wu>=ju)return zu(1,0),H$9(_u,!0,"end"),Ou(),Ru=!1;if(Wu>=Uu){const Qu=Gu((Wu-Uu)/Nu);zu(Qu,1-Qu)}}return Ru})}let ku=!1;return{start(){ku||(ku=!0,K$d(_u),O$c(Pu)?(Pu=Pu(Cu),wt$1().then(Du)):Du())},invalidate(){ku=!1},end(){Ru&&(Ou(),Ru=!1)}}}function ye$2(_u,$u,Tu){const Cu={direction:"out"};let Pu=$u(_u,Tu,Cu),Ru=!0,Lu;const Bu=k$d;Bu.r+=1;function Vu(){const{delay:Ou=0,duration:Du=300,easing:ku=it$3,tick:Fu=E$e,css:Nu}=Pu||bt$1;Nu&&(Lu=mt$1(_u,1,0,Du,Ou,ku,Nu));const Gu=lt$3()+Ou,zu=Gu+Du;L$d(()=>H$9(_u,!1,"start")),at$3(Hu=>{if(Ru){if(Hu>=zu)return Fu(0,1),H$9(_u,!1,"end"),--Bu.r||v$b(Bu.c),!1;if(Hu>=Gu){const Uu=ku((Hu-Gu)/Du);Fu(1-Uu,Uu)}}return Ru})}return O$c(Pu)?wt$1().then(()=>{Pu=Pu(Cu),Vu()}):Vu(),{end(Ou){Ou&&Pu.tick&&Pu.tick(1,0),Ru&&(Lu&&K$d(_u,Lu),Ru=!1)}}}function ge$3(_u,$u){const Tu=$u.token={};function Cu(Pu,Ru,Lu,Bu){if($u.token!==Tu)return;$u.resolved=Bu;let Vu=$u.ctx;Lu!==void 0&&(Vu=Vu.slice(),Vu[Lu]=Bu);const Ou=Pu&&($u.current=Pu)(Vu);let Du=!1;$u.block&&($u.blocks?$u.blocks.forEach((ku,Fu)=>{Fu!==Ru&&ku&&(Lt(),$t(ku,1,1,()=>{$u.blocks[Fu]===ku&&($u.blocks[Fu]=null)}),Ot$1())}):$u.block.d(1),Ou.c(),tt$3(Ou,1),Ou.m($u.mount(),$u.anchor),Du=!0),$u.block=Ou,$u.blocks&&($u.blocks[Ru]=Ou),Du&&Z$6()}if(xt$1(_u)){const Pu=x$d();if(_u.then(Ru=>{b$a(Pu),Cu($u.then,1,$u.value,Ru),b$a(null)},Ru=>{if(b$a(Pu),Cu($u.catch,2,$u.error,Ru),b$a(null),!$u.hasCatch)throw Ru}),$u.current!==$u.pending)return Cu($u.pending,0),!0}else{if($u.current!==$u.then)return Cu($u.then,1,$u.value,_u),!0;$u.resolved=_u}}function we$1(_u,$u,Tu){const Cu=$u.slice(),{resolved:Pu}=_u;_u.current===_u.then&&(Cu[_u.value]=Pu),_u.current===_u.catch&&(Cu[_u.error]=Pu),_u.block.p(Cu,Tu)}function be$2(_u,$u){_u.d(1),$u.delete(_u.key)}function ke$2(_u,$u){$t(_u,1,1,()=>{$u.delete(_u.key)})}function xe(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku){let Fu=_u.length,Nu=Ru.length,Gu=Fu;const zu={};for(;Gu--;)zu[_u[Gu].key]=Gu;const Hu=[],Uu=new Map,ju=new Map,Wu=[];for(Gu=Nu;Gu--;){const Ju=ku(Pu,Ru,Gu),_d=Tu(Ju);let tp=Lu.get(_d);tp?Cu&&Wu.push(()=>tp.p(Ju,$u)):(tp=Ou(_d,Ju),tp.c()),Uu.set(_d,Hu[Gu]=tp),_d in zu&&ju.set(_d,Math.abs(Gu-zu[_d]))}const Qu=new Set,qu=new Set;function Yu(Ju){tt$3(Ju,1),Ju.m(Bu,Du),Lu.set(Ju.key,Ju),Du=Ju.first,Nu--}for(;Fu&&Nu;){const Ju=Hu[Nu-1],_d=_u[Fu-1],tp=Ju.key,Ku=_d.key;Ju===_d?(Du=Ju.first,Fu--,Nu--):Uu.has(Ku)?!Lu.has(tp)||Qu.has(tp)?Yu(Ju):qu.has(Ku)?Fu--:ju.get(tp)>ju.get(Ku)?(qu.add(tp),Yu(Ju)):(Qu.add(Ku),Fu--):(Vu(_d,Lu),Fu--)}for(;Fu--;){const Ju=_u[Fu];Uu.has(Ju.key)||Vu(Ju,Lu)}for(;Nu;)Yu(Hu[Nu-1]);return v$b(Wu),Hu}function Ee(_u,$u){const Tu={},Cu={},Pu={$$scope:1};let Ru=_u.length;for(;Ru--;){const Lu=_u[Ru],Bu=$u[Ru];if(Bu){for(const Vu in Lu)Vu in Bu||(Cu[Vu]=1);for(const Vu in Bu)Pu[Vu]||(Tu[Vu]=Bu[Vu],Pu[Vu]=1);_u[Ru]=Bu}else for(const Vu in Lu)Pu[Vu]=1}for(const Lu in Cu)Lu in Tu||(Tu[Lu]=void 0);return Tu}function ve$1(_u){return typeof _u=="object"&&_u!==null?_u:{}}function Ne(_u,$u,Tu){const Cu=_u.$$.props[$u];Cu!==void 0&&(_u.$$.bound[Cu]=Tu,Tu(_u.$$.ctx[Cu]))}function Ae(_u){_u&&_u.c()}function Dt(_u,$u,Tu,Cu){const{fragment:Pu,after_update:Ru}=_u.$$;Pu&&Pu.m($u,Tu),Cu||L$d(()=>{const Lu=_u.$$.on_mount.map(ot$5).filter(O$c);_u.$$.on_destroy?_u.$$.on_destroy.push(...Lu):v$b(Lu),_u.$$.on_mount=[]}),Ru.forEach(L$d)}function Rt(_u,$u){const Tu=_u.$$;Tu.fragment!==null&&(zt(Tu.after_update),v$b(Tu.on_destroy),Tu.fragment&&Tu.fragment.d($u),Tu.on_destroy=Tu.fragment=null,Tu.ctx=[])}function qt(_u,$u){_u.$$.dirty[0]===-1&&(M$k.push(_u),gt$2(),_u.$$.dirty.fill(0)),_u.$$.dirty[$u/31|0]|=1<<$u%31}function Me(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu=[-1]){const Vu=z$b;b$a(_u);const Ou=_u.$$={fragment:null,ctx:[],props:Ru,update:E$e,not_equal:Pu,bound:nt$3(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map($u.context||(Vu?Vu.$$.context:[])),callbacks:nt$3(),dirty:Bu,skip_bound:!1,root:$u.target||Vu.$$.root};Lu&&Lu(Ou.root);let Du=!1;if(Ou.ctx=Tu?Tu(_u,$u.props||{},(ku,Fu,...Nu)=>{const Gu=Nu.length?Nu[0]:Fu;return Ou.ctx&&Pu(Ou.ctx[ku],Ou.ctx[ku]=Gu)&&(!Ou.skip_bound&&Ou.bound[ku]&&Ou.bound[ku](Gu),Du&&qt(_u,ku)),Fu}):[],Ou.update(),Du=!0,v$b(Ou.before_update),Ou.fragment=Cu?Cu(Ou.ctx):!1,$u.target){if($u.hydrate){const ku=Mt($u.target);Ou.fragment&&Ou.fragment.l(ku),ku.forEach(I$g)}else Ou.fragment&&Ou.fragment.c();$u.intro&&tt$3(_u.$$.fragment),Dt(_u,$u.target,$u.anchor,$u.customElement),Z$6()}b$a(Vu)}class Te{$destroy(){Rt(this,1),this.$destroy=E$e}$on($u,Tu){if(!O$c(Tu))return E$e;const Cu=this.$$.callbacks[$u]||(this.$$.callbacks[$u]=[]);return Cu.push(Tu),()=>{const Pu=Cu.indexOf(Tu);Pu!==-1&&Cu.splice(Pu,1)}}$set($u){this.$$set&&!Et($u)&&(this.$$.skip_bound=!0,this.$$set($u),this.$$.skip_bound=!1)}}var _$6=function(){if(typeof Map!="undefined")return Map;function _u($u,Tu){var Cu=-1;return $u.some(function(Pu,Ru){return Pu[0]===Tu?(Cu=Ru,!0):!1}),Cu}return function(){function $u(){this.__entries__=[]}return Object.defineProperty($u.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),$u.prototype.get=function(Tu){var Cu=_u(this.__entries__,Tu),Pu=this.__entries__[Cu];return Pu&&Pu[1]},$u.prototype.set=function(Tu,Cu){var Pu=_u(this.__entries__,Tu);~Pu?this.__entries__[Pu][1]=Cu:this.__entries__.push([Tu,Cu])},$u.prototype.delete=function(Tu){var Cu=this.__entries__,Pu=_u(Cu,Tu);~Pu&&Cu.splice(Pu,1)},$u.prototype.has=function(Tu){return!!~_u(this.__entries__,Tu)},$u.prototype.clear=function(){this.__entries__.splice(0)},$u.prototype.forEach=function(Tu,Cu){Cu===void 0&&(Cu=null);for(var Pu=0,Ru=this.__entries__;Pu<Ru.length;Pu++){var Lu=Ru[Pu];Tu.call(Cu,Lu[1],Lu[0])}},$u}()}(),v$a=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,f$d=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),O$b=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(f$d):function(_u){return setTimeout(function(){return _u(Date.now())},1e3/60)}}(),E$d=2;function R$7(_u,$u){var Tu=!1,Cu=!1,Pu=0;function Ru(){Tu&&(Tu=!1,_u()),Cu&&Bu()}function Lu(){O$b(Ru)}function Bu(){var Vu=Date.now();if(Tu){if(Vu-Pu<E$d)return;Cu=!0}else Tu=!0,Cu=!1,setTimeout(Lu,$u);Pu=Vu}return Bu}var M$j=20,x$c=["top","right","bottom","left","width","height","size","weight"],A$d=typeof MutationObserver!="undefined",z$a=function(){function _u(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=R$7(this.refresh.bind(this),M$j)}return _u.prototype.addObserver=function($u){~this.observers_.indexOf($u)||this.observers_.push($u),this.connected_||this.connect_()},_u.prototype.removeObserver=function($u){var Tu=this.observers_,Cu=Tu.indexOf($u);~Cu&&Tu.splice(Cu,1),!Tu.length&&this.connected_&&this.disconnect_()},_u.prototype.refresh=function(){var $u=this.updateObservers_();$u&&this.refresh()},_u.prototype.updateObservers_=function(){var $u=this.observers_.filter(function(Tu){return Tu.gatherActive(),Tu.hasActive()});return $u.forEach(function(Tu){return Tu.broadcastActive()}),$u.length>0},_u.prototype.connect_=function(){!v$a||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),A$d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},_u.prototype.disconnect_=function(){!v$a||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},_u.prototype.onTransitionEnd_=function($u){var Tu=$u.propertyName,Cu=Tu===void 0?"":Tu,Pu=x$c.some(function(Ru){return!!~Cu.indexOf(Ru)});Pu&&this.refresh()},_u.getInstance=function(){return this.instance_||(this.instance_=new _u),this.instance_},_u.instance_=null,_u}(),m$b=function(_u,$u){for(var Tu=0,Cu=Object.keys($u);Tu<Cu.length;Tu++){var Pu=Cu[Tu];Object.defineProperty(_u,Pu,{value:$u[Pu],enumerable:!1,writable:!1,configurable:!0})}return _u},c$j=function(_u){var $u=_u&&_u.ownerDocument&&_u.ownerDocument.defaultView;return $u||f$d},y$j=d$g(0,0,0,0);function h$d(_u){return parseFloat(_u)||0}function b$9(_u){for(var $u=[],Tu=1;Tu<arguments.length;Tu++)$u[Tu-1]=arguments[Tu];return $u.reduce(function(Cu,Pu){var Ru=_u["border-"+Pu+"-width"];return Cu+h$d(Ru)},0)}function T$8(_u){for(var $u=["top","right","bottom","left"],Tu={},Cu=0,Pu=$u;Cu<Pu.length;Cu++){var Ru=Pu[Cu],Lu=_u["padding-"+Ru];Tu[Ru]=h$d(Lu)}return Tu}function C$f(_u){var $u=_u.getBBox();return d$g(0,0,$u.width,$u.height)}function S$7(_u){var $u=_u.clientWidth,Tu=_u.clientHeight;if(!$u&&!Tu)return y$j;var Cu=c$j(_u).getComputedStyle(_u),Pu=T$8(Cu),Ru=Pu.left+Pu.right,Lu=Pu.top+Pu.bottom,Bu=h$d(Cu.width),Vu=h$d(Cu.height);if(Cu.boxSizing==="border-box"&&(Math.round(Bu+Ru)!==$u&&(Bu-=b$9(Cu,"left","right")+Ru),Math.round(Vu+Lu)!==Tu&&(Vu-=b$9(Cu,"top","bottom")+Lu)),!G$8(_u)){var Ou=Math.round(Bu+Ru)-$u,Du=Math.round(Vu+Lu)-Tu;Math.abs(Ou)!==1&&(Bu-=Ou),Math.abs(Du)!==1&&(Vu-=Du)}return d$g(Pu.left,Pu.top,Bu,Vu)}var D$a=function(){return typeof SVGGraphicsElement!="undefined"?function(_u){return _u instanceof c$j(_u).SVGGraphicsElement}:function(_u){return _u instanceof c$j(_u).SVGElement&&typeof _u.getBBox=="function"}}();function G$8(_u){return _u===c$j(_u).document.documentElement}function L$c(_u){return v$a?D$a(_u)?C$f(_u):S$7(_u):y$j}function P$b(_u){var $u=_u.x,Tu=_u.y,Cu=_u.width,Pu=_u.height,Ru=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,Lu=Object.create(Ru.prototype);return m$b(Lu,{x:$u,y:Tu,width:Cu,height:Pu,top:Tu,right:$u+Cu,bottom:Pu+Tu,left:$u}),Lu}function d$g(_u,$u,Tu,Cu){return{x:_u,y:$u,width:Tu,height:Cu}}var W$4=function(){function _u($u){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=d$g(0,0,0,0),this.target=$u}return _u.prototype.isActive=function(){var $u=L$c(this.target);return this.contentRect_=$u,$u.width!==this.broadcastWidth||$u.height!==this.broadcastHeight},_u.prototype.broadcastRect=function(){var $u=this.contentRect_;return this.broadcastWidth=$u.width,this.broadcastHeight=$u.height,$u},_u}(),j$4=function(){function _u($u,Tu){var Cu=P$b(Tu);m$b(this,{target:$u,contentRect:Cu})}return _u}(),F$9=function(){function _u($u,Tu,Cu){if(this.activeObservations_=[],this.observations_=new _$6,typeof $u!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=$u,this.controller_=Tu,this.callbackCtx_=Cu}return _u.prototype.observe=function($u){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!($u instanceof c$j($u).Element))throw new TypeError('parameter 1 is not of type "Element".');var Tu=this.observations_;Tu.has($u)||(Tu.set($u,new W$4($u)),this.controller_.addObserver(this),this.controller_.refresh())}},_u.prototype.unobserve=function($u){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!($u instanceof c$j($u).Element))throw new TypeError('parameter 1 is not of type "Element".');var Tu=this.observations_;Tu.has($u)&&(Tu.delete($u),Tu.size||this.controller_.removeObserver(this))}},_u.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},_u.prototype.gatherActive=function(){var $u=this;this.clearActive(),this.observations_.forEach(function(Tu){Tu.isActive()&&$u.activeObservations_.push(Tu)})},_u.prototype.broadcastActive=function(){if(this.hasActive()){var $u=this.callbackCtx_,Tu=this.activeObservations_.map(function(Cu){return new j$4(Cu.target,Cu.broadcastRect())});this.callback_.call($u,Tu,$u),this.clearActive()}},_u.prototype.clearActive=function(){this.activeObservations_.splice(0)},_u.prototype.hasActive=function(){return this.activeObservations_.length>0},_u}(),g$h=typeof WeakMap!="undefined"?new WeakMap:new _$6,w$b=function(){function _u($u){if(!(this instanceof _u))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var Tu=z$a.getInstance(),Cu=new F$9($u,Tu,this);g$h.set(this,Cu)}return _u}();["observe","unobserve","disconnect"].forEach(function(_u){w$b.prototype[_u]=function(){var $u;return($u=g$h.get(this))[_u].apply($u,arguments)}});var H$8=function(){return typeof f$d.ResizeObserver!="undefined"?f$d.ResizeObserver:w$b}();function E$c(_u){new H$8(($u,Tu)=>{var Cu,Pu,Ru,Lu,Bu,Vu;for(const Ou of $u){const{borderBoxSize:Du,contentRect:ku}=Ou,Fu=(Ru=(Pu=(Cu=Du==null?void 0:Du[0])==null?void 0:Cu.inlineSize)!=null?Pu:ku.width)!=null?Ru:_u.clientWidth,Nu=(Vu=(Bu=(Lu=Du==null?void 0:Du[0])==null?void 0:Lu.blockSize)!=null?Bu:ku.height)!=null?Vu:_u.clientHeight;_u.dispatchEvent(new CustomEvent("clientWidth",{detail:Fu})),_u.dispatchEvent(new CustomEvent("clientHeight",{detail:Nu}))}}).observe(_u)}var c$i=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});function d$f(_u){return c$i(this,null,function*(){try{return[null,yield _u]}catch($u){return $u instanceof Error?[$u,null]:[new Error(""),null]}})}function e$b(_u){return Object.prototype.toString.call(_u)==="[object Object]"}function u$e(_u,$u){return _u===$u?!0:typeof _u!=typeof $u?!1:!!(Number.isNaN(_u)&&Number.isNaN($u))}function o$e(_u,$u){const Tu=Object.getOwnPropertyNames(_u),Cu=Object.getOwnPropertyNames($u);if(Tu.length!==Cu.length)return!1;for(let Pu=0,Ru=Tu.length;Pu<Ru;Pu++){const Lu=Tu[Pu];if(!u$e(_u[Lu],$u[Lu]))return!1}return!0}function p$a(_u,$u){if(_u.length!==$u.length)return!1;for(let Tu=0,Cu=_u.length;Tu<Cu;Tu++)if(!u$e(_u[Tu],$u[Tu]))return!1;return!0}function c$h(_u,$u){return u$e(_u,$u)?!0:e$b(_u)&&e$b($u)?o$e(_u,$u):Array.isArray(_u)&&Array.isArray($u)?p$a(_u,$u):!1}function a$f(_u,$u){return u$e(_u,$u)?!0:e$b(_u)&&e$b($u)?g$g(_u,$u):Array.isArray(_u)&&Array.isArray($u)?y$i(_u,$u):!1}function y$i(_u,$u){if(_u.length!==$u.length)return!1;for(let Tu=0,Cu=_u.length;Tu<Cu;Tu++)if(!a$f(_u[Tu],$u[Tu]))return!1;return!0}function g$g(_u,$u){const Tu=Object.getOwnPropertyNames(_u),Cu=Object.getOwnPropertyNames($u);if(Tu.length!==Cu.length)return!1;for(let Pu=0,Ru=Tu.length;Pu<Ru;Pu++){const Lu=Tu[Pu];if(!a$f(_u[Lu],$u[Lu]))return!1}return!0}function b$8(_u,$u,Tu={deep:!1}){return Tu.deep?a$f(_u,$u):c$h(_u,$u)}function c$g(_u){return _u<.5?4*_u*_u*_u:.5*Math.pow(2*_u-2,3)+1}function o$d(_u){const $u=_u-1;return $u*$u*$u+1}function C$e(_u,{delay:$u=0,duration:Tu=400,easing:Cu=it$3}={}){const Pu=+getComputedStyle(_u).opacity;return{delay:$u,duration:Tu,easing:Cu,css:Ru=>`opacity: ${Ru*Pu}`}}function S$6(_u,{delay:$u=0,duration:Tu=400,easing:Cu=o$d,x:Pu=0,y:Ru=0,opacity:Lu=0}={}){const Bu=getComputedStyle(_u),Vu=+Bu.opacity,Ou=Bu.transform==="none"?"":Bu.transform,Du=Vu*(1-Lu),[ku,Fu]=Kt(Pu),[Nu,Gu]=Kt(Ru);return{delay:$u,duration:Tu,easing:Cu,css:(zu,Hu)=>`
			transform: ${Ou} translate(${(1-zu)*ku}${Fu}, ${(1-zu)*Nu}${Gu});
			opacity: ${Vu-Du*Hu}`}}function I$f(_u,{delay:$u=0,speed:Tu,duration:Cu,easing:Pu=c$g}={}){let Ru=_u.getTotalLength();const Lu=getComputedStyle(_u);return Lu.strokeLinecap!=="butt"&&(Ru+=parseInt(Lu.strokeWidth)),Cu===void 0?Tu===void 0?Cu=800:Cu=Ru/Tu:typeof Cu=="function"&&(Cu=Cu(Ru)),{delay:$u,duration:Cu,easing:Pu,css:(Bu,Vu)=>`
			stroke-dasharray: ${Ru};
			stroke-dashoffset: ${Vu*Ru};
		`}}const s$e=[];function h$c(_u,$u=E$e){let Tu;const Cu=new Set;function Pu(Bu){if(Ft(_u,Bu)&&(_u=Bu,Tu)){const Vu=!s$e.length;for(const Ou of Cu)Ou[1](),s$e.push(Ou,_u);if(Vu){for(let Ou=0;Ou<s$e.length;Ou+=2)s$e[Ou][0](s$e[Ou+1]);s$e.length=0}}}function Ru(Bu){Pu(Bu(_u))}function Lu(Bu,Vu=E$e){const Ou=[Bu,Vu];return Cu.add(Ou),Cu.size===1&&(Tu=$u(Pu)||E$e),Bu(_u),()=>{Cu.delete(Ou),Cu.size===0&&Tu&&(Tu(),Tu=null)}}return{set:Pu,update:Ru,subscribe:Lu}}var s$d=Object.defineProperty,o$c=(_u,$u,Tu)=>$u in _u?s$d(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,e$a=(_u,$u,Tu)=>(o$c(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);let n$e=class{constructor(_u,$u){e$a(this,"VERSION","2.19.3"),e$a(this,"five"),e$a(this,"hooks",new E$g),e$a(this,"staticPrefix","//vrlab-static.ljcdn.com"),this.five=_u,$u!=null&&$u.staticPrefix&&(this.staticPrefix=$u.staticPrefix)}getCurrentState(){return this.state}isAbsoluteURL(_u){return e$c(_u)?_u:`${this.staticPrefix}${_u}`}},e$9=class extends n$e{};function a$e(_u,$u,Tu=4){return Math.floor(_u*Math.pow(10,Tu))===Math.floor($u*Math.pow(10,Tu))}var m$a=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});function y$h(_u,$u){return m$a(this,null,function*(){const[Tu]=yield d$f(_u.changeMode(...$u));if(Tu)throw new Error("change mode canceled");yield new Promise(Ru=>{_u.once("initAnimationWillStart",()=>{_u.once("initAnimationEnded",()=>Ru())})});const Cu=$u[1];if(!Cu)return!0;const Pu=_u.getCurrentState();if(!w$a(Cu,Pu))throw new Error("pose \u4E0E\u9884\u671F\u4E0D\u7B26")})}function w$a(_u,$u){return Object.keys(_u).every(Tu=>{const Cu=$u[Tu];if(Cu===void 0)return!0;const Pu=_u[Tu];return typeof Cu=="number"&&typeof Pu=="number"?a$e(Cu,Pu,2):Cu===Pu})}/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l$d=void 0,aa=mod;function r$i(_u,$u){var Tu=_u.split("."),Cu=aa;!(Tu[0]in Cu)&&Cu.execScript&&Cu.execScript("var "+Tu[0]);for(var Pu;Tu.length&&(Pu=Tu.shift());)!Tu.length&&$u!==l$d?Cu[Pu]=$u:Cu=Cu[Pu]?Cu[Pu]:Cu[Pu]={}}var t$a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function v$9(_u){var $u=_u.length,Tu=0,Cu=Number.POSITIVE_INFINITY,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu;for(ku=0;ku<$u;++ku)_u[ku]>Tu&&(Tu=_u[ku]),_u[ku]<Cu&&(Cu=_u[ku]);for(Pu=1<<Tu,Ru=new(t$a?Uint32Array:Array)(Pu),Lu=1,Bu=0,Vu=2;Lu<=Tu;){for(ku=0;ku<$u;++ku)if(_u[ku]===Lu){for(Ou=0,Du=Bu,Fu=0;Fu<Lu;++Fu)Ou=Ou<<1|Du&1,Du>>=1;for(Nu=Lu<<16|ku,Fu=Ou;Fu<Pu;Fu+=Vu)Ru[Fu]=Nu;++Bu}++Lu,Bu<<=1,Vu<<=1}return[Ru,Tu,Cu]}function w$9(_u,$u){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t$a?new Uint8Array(_u):_u,this.m=!1,this.i=y$g,this.r=!1,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.bufferSize&&(this.h=$u.bufferSize),$u.bufferType&&(this.i=$u.bufferType),$u.resize&&(this.r=$u.resize)),this.i){case A$c:this.b=32768,this.c=new(t$a?Uint8Array:Array)(32768+this.h+258);break;case y$g:this.b=0,this.c=new(t$a?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A$c=0,y$g=1,B$9={t:A$c,s:y$g};w$9.prototype.k=function(){for(;!this.m;){var _u=C$d(this,3);switch(_u&1&&(this.m=!0),_u>>>=1,_u){case 0:var $u=this.input,Tu=this.a,Cu=this.c,Pu=this.b,Ru=$u.length,Lu=l$d,Bu=l$d,Vu=Cu.length,Ou=l$d;if(this.d=this.f=0,Tu+1>=Ru)throw Error("invalid uncompressed block header: LEN");if(Lu=$u[Tu++]|$u[Tu++]<<8,Tu+1>=Ru)throw Error("invalid uncompressed block header: NLEN");if(Bu=$u[Tu++]|$u[Tu++]<<8,Lu===~Bu)throw Error("invalid uncompressed block header: length verify");if(Tu+Lu>$u.length)throw Error("input buffer is broken");switch(this.i){case A$c:for(;Pu+Lu>Cu.length;){if(Ou=Vu-Pu,Lu-=Ou,t$a)Cu.set($u.subarray(Tu,Tu+Ou),Pu),Pu+=Ou,Tu+=Ou;else for(;Ou--;)Cu[Pu++]=$u[Tu++];this.b=Pu,Cu=this.e(),Pu=this.b}break;case y$g:for(;Pu+Lu>Cu.length;)Cu=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t$a)Cu.set($u.subarray(Tu,Tu+Lu),Pu),Pu+=Lu,Tu+=Lu;else for(;Lu--;)Cu[Pu++]=$u[Tu++];this.a=Tu,this.b=Pu,this.c=Cu;break;case 1:this.j(ba,ca);break;case 2:for(var Du=C$d(this,5)+257,ku=C$d(this,5)+1,Fu=C$d(this,4)+4,Nu=new(t$a?Uint8Array:Array)(D$9.length),Gu=l$d,zu=l$d,Hu=l$d,Uu=l$d,ju=l$d,Wu=l$d,Qu=l$d,Yu=l$d,qu=l$d,Yu=0;Yu<Fu;++Yu)Nu[D$9[Yu]]=C$d(this,3);if(!t$a)for(Yu=Fu,Fu=Nu.length;Yu<Fu;++Yu)Nu[D$9[Yu]]=0;for(Gu=v$9(Nu),Uu=new(t$a?Uint8Array:Array)(Du+ku),Yu=0,qu=Du+ku;Yu<qu;)switch(ju=E$b(this,Gu),ju){case 16:for(Qu=3+C$d(this,2);Qu--;)Uu[Yu++]=Wu;break;case 17:for(Qu=3+C$d(this,3);Qu--;)Uu[Yu++]=0;Wu=0;break;case 18:for(Qu=11+C$d(this,7);Qu--;)Uu[Yu++]=0;Wu=0;break;default:Wu=Uu[Yu++]=ju}zu=v$9(t$a?Uu.subarray(0,Du):Uu.slice(0,Du)),Hu=v$9(t$a?Uu.subarray(Du):Uu.slice(Du)),this.j(zu,Hu);break;default:throw Error("unknown BTYPE: "+_u)}}return this.n()};var G$7=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D$9=t$a?new Uint16Array(G$7):G$7,H$7=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I$e=t$a?new Uint16Array(H$7):H$7,J$8=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K$c=t$a?new Uint8Array(J$8):J$8,L$b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t$a?new Uint16Array(L$b):L$b,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N$8=t$a?new Uint8Array(ea):ea,O$a=new(t$a?Uint8Array:Array)(288),P$a,fa;P$a=0;for(fa=O$a.length;P$a<fa;++P$a)O$a[P$a]=143>=P$a?8:255>=P$a?9:279>=P$a?7:8;var ba=v$9(O$a),Q$b=new(t$a?Uint8Array:Array)(30),R$6,ga;R$6=0;for(ga=Q$b.length;R$6<ga;++R$6)Q$b[R$6]=5;var ca=v$9(Q$b);function C$d(_u,$u){for(var Tu=_u.f,Cu=_u.d,Pu=_u.input,Ru=_u.a,Lu=Pu.length,Bu;Cu<$u;){if(Ru>=Lu)throw Error("input buffer is broken");Tu|=Pu[Ru++]<<Cu,Cu+=8}return Bu=Tu&(1<<$u)-1,_u.f=Tu>>>$u,_u.d=Cu-$u,_u.a=Ru,Bu}function E$b(_u,$u){for(var Tu=_u.f,Cu=_u.d,Pu=_u.input,Ru=_u.a,Lu=Pu.length,Bu=$u[0],Vu=$u[1],Ou,Du;Cu<Vu&&!(Ru>=Lu);)Tu|=Pu[Ru++]<<Cu,Cu+=8;if(Ou=Bu[Tu&(1<<Vu)-1],Du=Ou>>>16,Du>Cu)throw Error("invalid code length: "+Du);return _u.f=Tu>>Du,_u.d=Cu-Du,_u.a=Ru,Ou&65535}w$9.prototype.j=function(_u,$u){var Tu=this.c,Cu=this.b;this.o=_u;for(var Pu=Tu.length-258,Ru,Lu,Bu,Vu;(Ru=E$b(this,_u))!==256;)if(256>Ru)Cu>=Pu&&(this.b=Cu,Tu=this.e(),Cu=this.b),Tu[Cu++]=Ru;else for(Lu=Ru-257,Vu=I$e[Lu],0<K$c[Lu]&&(Vu+=C$d(this,K$c[Lu])),Ru=E$b(this,$u),Bu=da[Ru],0<N$8[Ru]&&(Bu+=C$d(this,N$8[Ru])),Cu>=Pu&&(this.b=Cu,Tu=this.e(),Cu=this.b);Vu--;)Tu[Cu]=Tu[Cu++-Bu];for(;8<=this.d;)this.d-=8,this.a--;this.b=Cu};w$9.prototype.w=function(_u,$u){var Tu=this.c,Cu=this.b;this.o=_u;for(var Pu=Tu.length,Ru,Lu,Bu,Vu;(Ru=E$b(this,_u))!==256;)if(256>Ru)Cu>=Pu&&(Tu=this.e(),Pu=Tu.length),Tu[Cu++]=Ru;else for(Lu=Ru-257,Vu=I$e[Lu],0<K$c[Lu]&&(Vu+=C$d(this,K$c[Lu])),Ru=E$b(this,$u),Bu=da[Ru],0<N$8[Ru]&&(Bu+=C$d(this,N$8[Ru])),Cu+Vu>Pu&&(Tu=this.e(),Pu=Tu.length);Vu--;)Tu[Cu]=Tu[Cu++-Bu];for(;8<=this.d;)this.d-=8,this.a--;this.b=Cu};w$9.prototype.e=function(){var _u=new(t$a?Uint8Array:Array)(this.b-32768),$u=this.b-32768,Tu,Cu,Pu=this.c;if(t$a)_u.set(Pu.subarray(32768,_u.length));else for(Tu=0,Cu=_u.length;Tu<Cu;++Tu)_u[Tu]=Pu[Tu+32768];if(this.g.push(_u),this.l+=_u.length,t$a)Pu.set(Pu.subarray($u,$u+32768));else for(Tu=0;32768>Tu;++Tu)Pu[Tu]=Pu[$u+Tu];return this.b=32768,Pu};w$9.prototype.z=function(_u){var $u,Tu=this.input.length/this.a+1|0,Cu,Pu,Ru,Lu=this.input,Bu=this.c;return _u&&(typeof _u.p=="number"&&(Tu=_u.p),typeof _u.u=="number"&&(Tu+=_u.u)),2>Tu?(Cu=(Lu.length-this.a)/this.o[2],Ru=258*(Cu/2)|0,Pu=Ru<Bu.length?Bu.length+Ru:Bu.length<<1):Pu=Bu.length*Tu,t$a?($u=new Uint8Array(Pu),$u.set(Bu)):$u=Bu,this.c=$u};w$9.prototype.n=function(){var _u=0,$u=this.c,Tu=this.g,Cu,Pu=new(t$a?Uint8Array:Array)(this.l+(this.b-32768)),Ru,Lu,Bu,Vu;if(Tu.length===0)return t$a?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Ru=0,Lu=Tu.length;Ru<Lu;++Ru)for(Cu=Tu[Ru],Bu=0,Vu=Cu.length;Bu<Vu;++Bu)Pu[_u++]=Cu[Bu];for(Ru=32768,Lu=this.b;Ru<Lu;++Ru)Pu[_u++]=$u[Ru];return this.g=[],this.buffer=Pu};w$9.prototype.v=function(){var _u,$u=this.b;return t$a?this.r?(_u=new Uint8Array($u),_u.set(this.c.subarray(0,$u))):_u=this.c.subarray(0,$u):(this.c.length>$u&&(this.c.length=$u),_u=this.c),this.buffer=_u};function W$3(_u,$u){var Tu,Cu;switch(this.input=_u,this.a=0,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.verify&&(this.A=$u.verify)),Tu=_u[this.a++],Cu=_u[this.a++],Tu&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((Tu<<8)+Cu)%31!==0)throw Error("invalid fcheck flag:"+((Tu<<8)+Cu)%31);if(Cu&32)throw Error("fdict flag is not supported");this.q=new w$9(_u,{index:this.a,bufferSize:$u.bufferSize,bufferType:$u.bufferType,resize:$u.resize})}W$3.prototype.k=function(){var _u=this.input,$u,Tu;if($u=this.q.k(),this.a=this.q.a,this.A){Tu=(_u[this.a++]<<24|_u[this.a++]<<16|_u[this.a++]<<8|_u[this.a++])>>>0;var Cu=$u;if(typeof Cu=="string"){var Pu=Cu.split(""),Ru,Lu;for(Ru=0,Lu=Pu.length;Ru<Lu;Ru++)Pu[Ru]=(Pu[Ru].charCodeAt(0)&255)>>>0;Cu=Pu}for(var Bu=1,Vu=0,Ou=Cu.length,Du,ku=0;0<Ou;){Du=1024<Ou?1024:Ou,Ou-=Du;do Bu+=Cu[ku++],Vu+=Bu;while(--Du);Bu%=65521,Vu%=65521}if(Tu!==(Vu<<16|Bu)>>>0)throw Error("invalid adler-32 checksum")}return $u};var ha=8;r$i("Zlib.Inflate",W$3);r$i("Zlib.Inflate.prototype.decompress",W$3.prototype.k);var X$3={ADAPTIVE:B$9.s,BLOCK:B$9.t},Y$8,Z$5,$$4,ia;if(Object.keys)Y$8=Object.keys(X$3);else for(Z$5 in Y$8=[],$$4=0,X$3)Y$8[$$4++]=Z$5;$$4=0;for(ia=Y$8.length;$$4<ia;++$$4)Z$5=Y$8[$$4],r$i("Zlib.Inflate.BufferType."+Z$5,X$3[Z$5]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(_u,$u,Tu){var Cu=Tu.length-_u-1;if($u>=Tu[Cu])return Cu-1;if($u<=Tu[_u])return _u;for(var Pu=_u,Ru=Cu,Lu=Math.floor((Pu+Ru)/2);$u<Tu[Lu]||$u>=Tu[Lu+1];)$u<Tu[Lu]?Ru=Lu:Pu=Lu,Lu=Math.floor((Pu+Ru)/2);return Lu},calcBasisFunctions:function(_u,$u,Tu,Cu){var Pu=[],Ru=[],Lu=[];Pu[0]=1;for(var Bu=1;Bu<=Tu;++Bu){Ru[Bu]=$u-Cu[_u+1-Bu],Lu[Bu]=Cu[_u+Bu]-$u;for(var Vu=0,Ou=0;Ou<Bu;++Ou){var Du=Lu[Ou+1],ku=Ru[Bu-Ou],Fu=Pu[Ou]/(Du+ku);Pu[Ou]=Vu+Du*Fu,Vu=ku*Fu}Pu[Bu]=Vu}return Pu},calcBSplinePoint:function(_u,$u,Tu,Cu){for(var Pu=this.findSpan(_u,Cu,$u),Ru=this.calcBasisFunctions(Pu,Cu,_u,$u),Lu=new Vector4(0,0,0,0),Bu=0;Bu<=_u;++Bu){var Vu=Tu[Pu-_u+Bu],Ou=Ru[Bu],Du=Vu.w*Ou;Lu.x+=Vu.x*Du,Lu.y+=Vu.y*Du,Lu.z+=Vu.z*Du,Lu.w+=Vu.w*Ou}return Lu},calcBasisFunctionDerivatives:function(_u,$u,Tu,Cu,Pu){for(var Ru=[],Lu=0;Lu<=Tu;++Lu)Ru[Lu]=0;for(var Bu=[],Lu=0;Lu<=Cu;++Lu)Bu[Lu]=Ru.slice(0);for(var Vu=[],Lu=0;Lu<=Tu;++Lu)Vu[Lu]=Ru.slice(0);Vu[0][0]=1;for(var Ou=Ru.slice(0),Du=Ru.slice(0),ku=1;ku<=Tu;++ku){Ou[ku]=$u-Pu[_u+1-ku],Du[ku]=Pu[_u+ku]-$u;for(var Fu=0,tp=0;tp<ku;++tp){var Nu=Du[tp+1],Gu=Ou[ku-tp];Vu[ku][tp]=Nu+Gu;var zu=Vu[tp][ku-1]/Vu[ku][tp];Vu[tp][ku]=Fu+Nu*zu,Fu=Gu*zu}Vu[ku][ku]=Fu}for(var ku=0;ku<=Tu;++ku)Bu[0][ku]=Vu[ku][Tu];for(var tp=0;tp<=Tu;++tp){for(var Hu=0,Uu=1,ju=[],Lu=0;Lu<=Tu;++Lu)ju[Lu]=Ru.slice(0);ju[0][0]=1;for(var Wu=1;Wu<=Cu;++Wu){var Qu=0,qu=tp-Wu,Yu=Tu-Wu;tp>=Wu&&(ju[Uu][0]=ju[Hu][0]/Vu[Yu+1][qu],Qu=ju[Uu][0]*Vu[qu][Yu]);for(var Ju=qu>=-1?1:-qu,_d=tp-1<=Yu?Wu-1:Tu-tp,ku=Ju;ku<=_d;++ku)ju[Uu][ku]=(ju[Hu][ku]-ju[Hu][ku-1])/Vu[Yu+1][qu+ku],Qu+=ju[Uu][ku]*Vu[qu+ku][Yu];tp<=Yu&&(ju[Uu][Wu]=-ju[Hu][Wu-1]/Vu[Yu+1][tp],Qu+=ju[Uu][Wu]*Vu[tp][Yu]),Bu[Wu][tp]=Qu;var ku=Hu;Hu=Uu,Uu=ku}}for(var tp=Tu,Wu=1;Wu<=Cu;++Wu){for(var ku=0;ku<=Tu;++ku)Bu[Wu][ku]*=tp;tp*=Tu-Wu}return Bu},calcBSplineDerivatives:function(_u,$u,Tu,Cu,Pu){for(var Ru=Pu<_u?Pu:_u,Lu=[],Bu=this.findSpan(_u,Cu,$u),Vu=this.calcBasisFunctionDerivatives(Bu,Cu,_u,Ru,$u),Ou=[],Du=0;Du<Tu.length;++Du){var ku=Tu[Du].clone(),Fu=ku.w;ku.x*=Fu,ku.y*=Fu,ku.z*=Fu,Ou[Du]=ku}for(var Nu=0;Nu<=Ru;++Nu){for(var ku=Ou[Bu-_u].clone().multiplyScalar(Vu[Nu][0]),Gu=1;Gu<=_u;++Gu)ku.add(Ou[Bu-_u+Gu].clone().multiplyScalar(Vu[Nu][Gu]));Lu[Nu]=ku}for(var Nu=Ru+1;Nu<=Pu+1;++Nu)Lu[Nu]=new Vector4(0,0,0);return Lu},calcKoverI:function(_u,$u){for(var Tu=1,Cu=2;Cu<=_u;++Cu)Tu*=Cu;for(var Pu=1,Cu=2;Cu<=$u;++Cu)Pu*=Cu;for(var Cu=2;Cu<=_u-$u;++Cu)Pu*=Cu;return Tu/Pu},calcRationalCurveDerivatives:function(_u){for(var $u=_u.length,Tu=[],Cu=[],Pu=0;Pu<$u;++Pu){var Ru=_u[Pu];Tu[Pu]=new Vector3(Ru.x,Ru.y,Ru.z),Cu[Pu]=Ru.w}for(var Lu=[],Bu=0;Bu<$u;++Bu){for(var Vu=Tu[Bu].clone(),Pu=1;Pu<=Bu;++Pu)Vu.sub(Lu[Bu-Pu].clone().multiplyScalar(this.calcKoverI(Bu,Pu)*Cu[Pu]));Lu[Bu]=Vu.divideScalar(Cu[0])}return Lu},calcNURBSDerivatives:function(_u,$u,Tu,Cu,Pu){var Ru=this.calcBSplineDerivatives(_u,$u,Tu,Cu,Pu);return this.calcRationalCurveDerivatives(Ru)},calcSurfacePoint:function(_u,$u,Tu,Cu,Pu,Ru,Lu,Bu){for(var Vu=this.findSpan(_u,Ru,Tu),Ou=this.findSpan($u,Lu,Cu),Du=this.calcBasisFunctions(Vu,Ru,_u,Tu),ku=this.calcBasisFunctions(Ou,Lu,$u,Cu),Fu=[],Nu=0;Nu<=$u;++Nu){Fu[Nu]=new Vector4(0,0,0,0);for(var Gu=0;Gu<=_u;++Gu){var zu=Pu[Vu-_u+Gu][Ou-$u+Nu].clone(),Hu=zu.w;zu.x*=Hu,zu.y*=Hu,zu.z*=Hu,Fu[Nu].add(zu.multiplyScalar(Du[Gu]))}}for(var Uu=new Vector4(0,0,0,0),Nu=0;Nu<=$u;++Nu)Uu.add(Fu[Nu].multiplyScalar(ku[Nu]));Uu.divideScalar(Uu.w),Bu.set(Uu.x,Uu.y,Uu.z)}},NURBSCurve=function(_u,$u,Tu,Cu,Pu){Curve.call(this),this.degree=_u,this.knots=$u,this.controlPoints=[],this.startKnot=Cu||0,this.endKnot=Pu||this.knots.length-1;for(var Ru=0;Ru<Tu.length;++Ru){var Lu=Tu[Ru];this.controlPoints[Ru]=new Vector4(Lu.x,Lu.y,Lu.z,Lu.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.knots[this.startKnot]+_u*(this.knots[this.endKnot]-this.knots[this.startKnot]),Pu=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Cu);return Pu.w!=1&&Pu.divideScalar(Pu.w),Tu.set(Pu.x,Pu.y,Pu.z)};NURBSCurve.prototype.getTangent=function(_u,$u){var Tu=$u||new Vector3,Cu=this.knots[0]+_u*(this.knots[this.knots.length-1]-this.knots[0]),Pu=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Cu,1);return Tu.copy(Pu[1]).normalize(),Tu};(function(){var _u,$u,Tu;function Cu(Ku){Loader.call(this,Ku)}Cu.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Cu,load:function(Ku,Xu,Zu,_c){var Xc=this,_h=Xc.path===""?LoaderUtils.extractUrlBase(Ku):Xc.path,ip=new FileLoader(this.manager);ip.setPath(Xc.path),ip.setResponseType("arraybuffer"),ip.load(Ku,function(ap){try{Xu(Xc.parse(ap,_h))}catch(hp){_c?_c(hp):console.error(hp),Xc.manager.itemError(Ku)}},Zu,_c)},parse:function(Ku,Xu){if(ku(Ku))_u=new Vu().parse(Ku);else{var Zu=Yu(Ku);if(!Fu(Zu))throw new Error("THREE.FBXLoader: Unknown format.");if(Nu(Zu)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Nu(Zu));_u=new Bu().parse(Zu)}var _c=new TextureLoader(this.manager).setPath(this.resourcePath||Xu).setCrossOrigin(this.crossOrigin);return new Pu(_c,this.manager).parse(_u)}});function Pu(Ku,Xu){this.textureLoader=Ku,this.manager=Xu}Pu.prototype={constructor:Pu,parse:function(){$u=this.parseConnections();var Ku=this.parseImages(),Xu=this.parseTextures(Ku),Zu=this.parseMaterials(Xu),_c=this.parseDeformers(),Xc=new Ru().parse(_c);return this.parseScene(_c,Xc,Zu),Tu},parseConnections:function(){var Ku=new Map;if("Connections"in _u){var Xu=_u.Connections.connections;Xu.forEach(function(Zu){var _c=Zu[0],Xc=Zu[1],_h=Zu[2];Ku.has(_c)||Ku.set(_c,{parents:[],children:[]});var ip={ID:Xc,relationship:_h};Ku.get(_c).parents.push(ip),Ku.has(Xc)||Ku.set(Xc,{parents:[],children:[]});var ap={ID:_c,relationship:_h};Ku.get(Xc).children.push(ap)})}return Ku},parseImages:function(){var Ku={},Xu={};if("Video"in _u.Objects){var Zu=_u.Objects.Video;for(var _c in Zu){var Xc=Zu[_c],_h=parseInt(_c);if(Ku[_h]=Xc.RelativeFilename||Xc.Filename,"Content"in Xc){var ip=Xc.Content instanceof ArrayBuffer&&Xc.Content.byteLength>0,ap=typeof Xc.Content=="string"&&Xc.Content!=="";if(ip||ap){var hp=this.parseImage(Zu[_c]);Xu[Xc.RelativeFilename||Xc.Filename]=hp}}}}for(var _h in Ku){var Ap=Ku[_h];Xu[Ap]!==void 0?Ku[_h]=Xu[Ap]:Ku[_h]=Ku[_h].split("\\").pop()}return Ku},parseImage:function(Ku){var Xu=Ku.Content,Zu=Ku.RelativeFilename||Ku.Filename,_c=Zu.slice(Zu.lastIndexOf(".")+1).toLowerCase(),Xc;switch(_c){case"bmp":Xc="image/bmp";break;case"jpg":case"jpeg":Xc="image/jpeg";break;case"png":Xc="image/png";break;case"tif":Xc="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",Zu),Xc="image/tga";break;default:console.warn('FBXLoader: Image type "'+_c+'" is not supported.');return}if(typeof Xu=="string")return"data:"+Xc+";base64,"+Xu;var _h=new Uint8Array(Xu);return window.URL.createObjectURL(new Blob([_h],{type:Xc}))},parseTextures:function(Ku){var Xu=new Map;if("Texture"in _u.Objects){var Zu=_u.Objects.Texture;for(var _c in Zu){var Xc=this.parseTexture(Zu[_c],Ku);Xu.set(parseInt(_c),Xc)}}return Xu},parseTexture:function(Ku,Xu){var Zu=this.loadTexture(Ku,Xu);Zu.ID=Ku.id,Zu.name=Ku.attrName;var _c=Ku.WrapModeU,Xc=Ku.WrapModeV,_h=_c!==void 0?_c.value:0,ip=Xc!==void 0?Xc.value:0;if(Zu.wrapS=_h===0?RepeatWrapping:ClampToEdgeWrapping,Zu.wrapT=ip===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in Ku){var ap=Ku.Scaling.value;Zu.repeat.x=ap[0],Zu.repeat.y=ap[1]}return Zu},loadTexture:function(Ku,Xu){var Zu,_c=this.textureLoader.path,Xc=$u.get(Ku.id).children;Xc!==void 0&&Xc.length>0&&Xu[Xc[0].ID]!==void 0&&(Zu=Xu[Xc[0].ID],(Zu.indexOf("blob:")===0||Zu.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var _h,ip=Ku.FileName.slice(-3).toLowerCase();if(ip==="tga"){var ap=this.manager.getHandler(".tga");ap===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",Ku.RelativeFilename),_h=new Texture):_h=ap.load(Zu)}else ip==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",Ku.RelativeFilename),_h=new Texture):_h=this.textureLoader.load(Zu);return this.textureLoader.setPath(_c),_h},parseMaterials:function(Ku){var Xu=new Map;if("Material"in _u.Objects){var Zu=_u.Objects.Material;for(var _c in Zu){var Xc=this.parseMaterial(Zu[_c],Ku);Xc!==null&&Xu.set(parseInt(_c),Xc)}}return Xu},parseMaterial:function(Ku,Xu){var Zu=Ku.id,_c=Ku.attrName,Xc=Ku.ShadingModel;if(typeof Xc=="object"&&(Xc=Xc.value),!$u.has(Zu))return null;var _h=this.parseParameters(Ku,Xu,Zu),ip;switch(Xc.toLowerCase()){case"phong":ip=new MeshPhongMaterial;break;case"lambert":ip=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',Xc),ip=new MeshPhongMaterial;break}return ip.setValues(_h),ip.name=_c,ip},parseParameters:function(Ku,Xu,Zu){var _c={};Ku.BumpFactor&&(_c.bumpScale=Ku.BumpFactor.value),Ku.Diffuse?_c.color=new Color().fromArray(Ku.Diffuse.value):Ku.DiffuseColor&&Ku.DiffuseColor.type==="Color"&&(_c.color=new Color().fromArray(Ku.DiffuseColor.value)),Ku.DisplacementFactor&&(_c.displacementScale=Ku.DisplacementFactor.value),Ku.Emissive?_c.emissive=new Color().fromArray(Ku.Emissive.value):Ku.EmissiveColor&&Ku.EmissiveColor.type==="Color"&&(_c.emissive=new Color().fromArray(Ku.EmissiveColor.value)),Ku.EmissiveFactor&&(_c.emissiveIntensity=parseFloat(Ku.EmissiveFactor.value)),Ku.Opacity&&(_c.opacity=parseFloat(Ku.Opacity.value)),_c.opacity<1&&(_c.transparent=!0),Ku.ReflectionFactor&&(_c.reflectivity=Ku.ReflectionFactor.value),Ku.Shininess&&(_c.shininess=Ku.Shininess.value),Ku.Specular?_c.specular=new Color().fromArray(Ku.Specular.value):Ku.SpecularColor&&Ku.SpecularColor.type==="Color"&&(_c.specular=new Color().fromArray(Ku.SpecularColor.value));var Xc=this;return $u.get(Zu).children.forEach(function(_h){var ip=_h.relationship;switch(ip){case"Bump":_c.bumpMap=Xc.getTexture(Xu,_h.ID);break;case"Maya|TEX_ao_map":_c.aoMap=Xc.getTexture(Xu,_h.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":_c.map=Xc.getTexture(Xu,_h.ID),_c.map.encoding=sRGBEncoding;break;case"DisplacementColor":_c.displacementMap=Xc.getTexture(Xu,_h.ID);break;case"EmissiveColor":_c.emissiveMap=Xc.getTexture(Xu,_h.ID),_c.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":_c.normalMap=Xc.getTexture(Xu,_h.ID);break;case"ReflectionColor":_c.envMap=Xc.getTexture(Xu,_h.ID),_c.envMap.mapping=EquirectangularReflectionMapping,_c.envMap.encoding=sRGBEncoding;break;case"SpecularColor":_c.specularMap=Xc.getTexture(Xu,_h.ID),_c.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":_c.alphaMap=Xc.getTexture(Xu,_h.ID),_c.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",ip);break}}),_c},getTexture:function(Ku,Xu){return"LayeredTexture"in _u.Objects&&Xu in _u.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),Xu=$u.get(Xu).children[0].ID),Ku.get(Xu)},parseDeformers:function(){var Ku={},Xu={};if("Deformer"in _u.Objects){var Zu=_u.Objects.Deformer;for(var _c in Zu){var Xc=Zu[_c],_h=$u.get(parseInt(_c));if(Xc.attrType==="Skin"){var ip=this.parseSkeleton(_h,Zu);ip.ID=_c,_h.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),ip.geometryID=_h.parents[0].ID,Ku[_c]=ip}else if(Xc.attrType==="BlendShape"){var ap={id:_c};ap.rawTargets=this.parseMorphTargets(_h,Zu),ap.id=_c,_h.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),Xu[_c]=ap}}}return{skeletons:Ku,morphTargets:Xu}},parseSkeleton:function(Ku,Xu){var Zu=[];return Ku.children.forEach(function(_c){var Xc=Xu[_c.ID];if(Xc.attrType==="Cluster"){var _h={ID:_c.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(Xc.TransformLink.a)};"Indexes"in Xc&&(_h.indices=Xc.Indexes.a,_h.weights=Xc.Weights.a),Zu.push(_h)}}),{rawBones:Zu,bones:[]}},parseMorphTargets:function(Ku,Xu){for(var Zu=[],_c=0;_c<Ku.children.length;_c++){var Xc=Ku.children[_c],_h=Xu[Xc.ID],ip={name:_h.attrName,initialWeight:_h.DeformPercent,id:_h.id,fullWeights:_h.FullWeights.a};if(_h.attrType!=="BlendShapeChannel")return;ip.geoID=$u.get(parseInt(Xc.ID)).children.filter(function(ap){return ap.relationship===void 0})[0].ID,Zu.push(ip)}return Zu},parseScene:function(Ku,Xu,Zu){Tu=new Group$1;var _c=this.parseModels(Ku.skeletons,Xu,Zu),Xc=_u.Objects.Model,_h=this;_c.forEach(function(ap){var hp=Xc[ap.ID];_h.setLookAtProperties(ap,hp);var Ap=$u.get(ap.ID).parents;Ap.forEach(function(gp){var Rp=_c.get(gp.ID);Rp!==void 0&&Rp.add(ap)}),ap.parent===null&&Tu.add(ap)}),this.bindSkeleton(Ku.skeletons,Xu,_c),this.createAmbientLight(),this.setupMorphMaterials(),Tu.traverse(function(ap){if(ap.userData.transformData){ap.parent&&(ap.userData.transformData.parentMatrixWorld=ap.parent.matrix);var hp=Wu(ap.userData.transformData);ap.applyMatrix4(hp)}});var ip=new Lu().parse();Tu.children.length===1&&Tu.children[0].isGroup&&(Tu.children[0].animations=ip,Tu=Tu.children[0]),Tu.animations=ip},parseModels:function(Ku,Xu,Zu){var _c=new Map,Xc=_u.Objects.Model;for(var _h in Xc){var ip=parseInt(_h),ap=Xc[_h],hp=$u.get(ip),Ap=this.buildSkeleton(hp,Ku,ip,ap.attrName);if(!Ap){switch(ap.attrType){case"Camera":Ap=this.createCamera(hp);break;case"Light":Ap=this.createLight(hp);break;case"Mesh":Ap=this.createMesh(hp,Xu,Zu);break;case"NurbsCurve":Ap=this.createCurve(hp,Xu);break;case"LimbNode":case"Root":Ap=new Bone;break;case"Null":default:Ap=new Group$1;break}Ap.name=ap.attrName?PropertyBinding.sanitizeNodeName(ap.attrName):"",Ap.ID=ip}this.getTransformData(Ap,ap),_c.set(ip,Ap)}return _c},buildSkeleton:function(Ku,Xu,Zu,_c){var Xc=null;return Ku.parents.forEach(function(_h){for(var ip in Xu){var ap=Xu[ip];ap.rawBones.forEach(function(hp,Ap){if(hp.ID===_h.ID){var gp=Xc;Xc=new Bone,Xc.matrixWorld.copy(hp.transformLink),Xc.name=_c?PropertyBinding.sanitizeNodeName(_c):"",Xc.ID=Zu,ap.bones[Ap]=Xc,gp!==null&&Xc.add(gp)}})}}),Xc},createCamera:function(Ku){var Xu,Zu;if(Ku.children.forEach(function(Rp){var Sp=_u.Objects.NodeAttribute[Rp.ID];Sp!==void 0&&(Zu=Sp)}),Zu===void 0)Xu=new Object3D;else{var _c=0;Zu.CameraProjectionType!==void 0&&Zu.CameraProjectionType.value===1&&(_c=1);var Xc=1;Zu.NearPlane!==void 0&&(Xc=Zu.NearPlane.value/1e3);var _h=1e3;Zu.FarPlane!==void 0&&(_h=Zu.FarPlane.value/1e3);var ip=window.innerWidth,ap=window.innerHeight;Zu.AspectWidth!==void 0&&Zu.AspectHeight!==void 0&&(ip=Zu.AspectWidth.value,ap=Zu.AspectHeight.value);var hp=ip/ap,Ap=45;Zu.FieldOfView!==void 0&&(Ap=Zu.FieldOfView.value);var gp=Zu.FocalLength?Zu.FocalLength.value:null;switch(_c){case 0:Xu=new PerspectiveCamera(Ap,hp,Xc,_h),gp!==null&&Xu.setFocalLength(gp);break;case 1:Xu=new OrthographicCamera(-ip/2,ip/2,ap/2,-ap/2,Xc,_h);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+_c+"."),Xu=new Object3D;break}}return Xu},createLight:function(Ku){var Xu,Zu;if(Ku.children.forEach(function(gp){var Rp=_u.Objects.NodeAttribute[gp.ID];Rp!==void 0&&(Zu=Rp)}),Zu===void 0)Xu=new Object3D;else{var _c;Zu.LightType===void 0?_c=0:_c=Zu.LightType.value;var Xc=16777215;Zu.Color!==void 0&&(Xc=new Color().fromArray(Zu.Color.value));var _h=Zu.Intensity===void 0?1:Zu.Intensity.value/100;Zu.CastLightOnObject!==void 0&&Zu.CastLightOnObject.value===0&&(_h=0);var ip=0;Zu.FarAttenuationEnd!==void 0&&(Zu.EnableFarAttenuation!==void 0&&Zu.EnableFarAttenuation.value===0?ip=0:ip=Zu.FarAttenuationEnd.value);var ap=1;switch(_c){case 0:Xu=new PointLight(Xc,_h,ip,ap);break;case 1:Xu=new DirectionalLight(Xc,_h);break;case 2:var hp=Math.PI/3;Zu.InnerAngle!==void 0&&(hp=MathUtils.degToRad(Zu.InnerAngle.value));var Ap=0;Zu.OuterAngle!==void 0&&(Ap=MathUtils.degToRad(Zu.OuterAngle.value),Ap=Math.max(Ap,1)),Xu=new SpotLight(Xc,_h,ip,hp,Ap,ap);break;default:console.warn("THREE.FBXLoader: Unknown light type "+Zu.LightType.value+", defaulting to a PointLight."),Xu=new PointLight(Xc,_h);break}Zu.CastShadows!==void 0&&Zu.CastShadows.value===1&&(Xu.castShadow=!0)}return Xu},createMesh:function(Ku,Xu,Zu){var _c,Xc=null,_h=null,ip=[];return Ku.children.forEach(function(ap){Xu.has(ap.ID)&&(Xc=Xu.get(ap.ID)),Zu.has(ap.ID)&&ip.push(Zu.get(ap.ID))}),ip.length>1?_h=ip:ip.length>0?_h=ip[0]:(_h=new MeshPhongMaterial({color:13421772}),ip.push(_h)),"color"in Xc.attributes&&ip.forEach(function(ap){ap.vertexColors=!0}),Xc.FBX_Deformer?(ip.forEach(function(ap){ap.skinning=!0}),_c=new SkinnedMesh(Xc,_h),_c.normalizeSkinWeights()):_c=new Mesh(Xc,_h),_c},createCurve:function(Ku,Xu){var Zu=Ku.children.reduce(function(Xc,_h){return Xu.has(_h.ID)&&(Xc=Xu.get(_h.ID)),Xc},null),_c=new LineBasicMaterial({color:3342591,linewidth:1});return new Line$1(Zu,_c)},getTransformData:function(Ku,Xu){var Zu={};"InheritType"in Xu&&(Zu.inheritType=parseInt(Xu.InheritType.value)),"RotationOrder"in Xu?Zu.eulerOrder=Qu(Xu.RotationOrder.value):Zu.eulerOrder="ZYX","Lcl_Translation"in Xu&&(Zu.translation=Xu.Lcl_Translation.value),"PreRotation"in Xu&&(Zu.preRotation=Xu.PreRotation.value),"Lcl_Rotation"in Xu&&(Zu.rotation=Xu.Lcl_Rotation.value),"PostRotation"in Xu&&(Zu.postRotation=Xu.PostRotation.value),"Lcl_Scaling"in Xu&&(Zu.scale=Xu.Lcl_Scaling.value),"ScalingOffset"in Xu&&(Zu.scalingOffset=Xu.ScalingOffset.value),"ScalingPivot"in Xu&&(Zu.scalingPivot=Xu.ScalingPivot.value),"RotationOffset"in Xu&&(Zu.rotationOffset=Xu.RotationOffset.value),"RotationPivot"in Xu&&(Zu.rotationPivot=Xu.RotationPivot.value),Ku.userData.transformData=Zu},setLookAtProperties:function(Ku,Xu){if("LookAtProperty"in Xu){var Zu=$u.get(Ku.ID).children;Zu.forEach(function(_c){if(_c.relationship==="LookAtProperty"){var Xc=_u.Objects.Model[_c.ID];if("Lcl_Translation"in Xc){var _h=Xc.Lcl_Translation.value;Ku.target!==void 0?(Ku.target.position.fromArray(_h),Tu.add(Ku.target)):Ku.lookAt(new Vector3().fromArray(_h))}}})}},bindSkeleton:function(Ku,Xu,Zu){var _c=this.parsePoseNodes();for(var Xc in Ku){var _h=Ku[Xc],ip=$u.get(parseInt(_h.ID)).parents;ip.forEach(function(ap){if(Xu.has(ap.ID)){var hp=ap.ID,Ap=$u.get(hp);Ap.parents.forEach(function(gp){if(Zu.has(gp.ID)){var Rp=Zu.get(gp.ID);Rp.bind(new Skeleton(_h.bones),_c[gp.ID])}})}})}},parsePoseNodes:function(){var Ku={};if("Pose"in _u.Objects){var Xu=_u.Objects.Pose;for(var Zu in Xu)if(Xu[Zu].attrType==="BindPose"){var _c=Xu[Zu].PoseNode;Array.isArray(_c)?_c.forEach(function(Xc){Ku[Xc.Node]=new Matrix4().fromArray(Xc.Matrix.a)}):Ku[_c.Node]=new Matrix4().fromArray(_c.Matrix.a)}}return Ku},createAmbientLight:function(){if("GlobalSettings"in _u&&"AmbientColor"in _u.GlobalSettings){var Ku=_u.GlobalSettings.AmbientColor.value,Xu=Ku[0],Zu=Ku[1],_c=Ku[2];if(Xu!==0||Zu!==0||_c!==0){var Xc=new Color(Xu,Zu,_c);Tu.add(new AmbientLight(Xc,1))}}},setupMorphMaterials:function(){var Ku=this;Tu.traverse(function(Xu){Xu.isMesh&&Xu.geometry.morphAttributes.position&&Xu.geometry.morphAttributes.position.length&&(Array.isArray(Xu.material)?Xu.material.forEach(function(Zu,_c){Ku.setupMorphMaterial(Xu,Zu,_c)}):Ku.setupMorphMaterial(Xu,Xu.material))})},setupMorphMaterial:function(Ku,Xu,Zu){var _c=Ku.uuid,Xc=Xu.uuid,_h=!1;if(Tu.traverse(function(ap){ap.isMesh&&(Array.isArray(ap.material)?ap.material.forEach(function(hp){hp.uuid===Xc&&ap.uuid!==_c&&(_h=!0)}):ap.material.uuid===Xc&&ap.uuid!==_c&&(_h=!0))}),_h===!0){var ip=Xu.clone();ip.morphTargets=!0,Zu===void 0?Ku.material=ip:Ku.material[Zu]=ip}else Xu.morphTargets=!0}};function Ru(){}Ru.prototype={constructor:Ru,parse:function(Ku){var Xu=new Map;if("Geometry"in _u.Objects){var Zu=_u.Objects.Geometry;for(var _c in Zu){var Xc=$u.get(parseInt(_c)),_h=this.parseGeometry(Xc,Zu[_c],Ku);Xu.set(parseInt(_c),_h)}}return Xu},parseGeometry:function(Ku,Xu,Zu){switch(Xu.attrType){case"Mesh":return this.parseMeshGeometry(Ku,Xu,Zu);case"NurbsCurve":return this.parseNurbsGeometry(Xu)}},parseMeshGeometry:function(Ku,Xu,Zu){var _c=Zu.skeletons,Xc=[],_h=Ku.parents.map(function(gp){return _u.Objects.Model[gp.ID]});if(_h.length!==0){var ip=Ku.children.reduce(function(gp,Rp){return _c[Rp.ID]!==void 0&&(gp=_c[Rp.ID]),gp},null);Ku.children.forEach(function(gp){Zu.morphTargets[gp.ID]!==void 0&&Xc.push(Zu.morphTargets[gp.ID])});var ap=_h[0],hp={};"RotationOrder"in ap&&(hp.eulerOrder=Qu(ap.RotationOrder.value)),"InheritType"in ap&&(hp.inheritType=parseInt(ap.InheritType.value)),"GeometricTranslation"in ap&&(hp.translation=ap.GeometricTranslation.value),"GeometricRotation"in ap&&(hp.rotation=ap.GeometricRotation.value),"GeometricScaling"in ap&&(hp.scale=ap.GeometricScaling.value);var Ap=Wu(hp);return this.genGeometry(Xu,ip,Xc,Ap)}},genGeometry:function(Ku,Xu,Zu,_c){var Xc=new BufferGeometry;Ku.attrName&&(Xc.name=Ku.attrName);var _h=this.parseGeoNode(Ku,Xu),ip=this.genBuffers(_h),ap=new Float32BufferAttribute(ip.vertex,3);if(ap.applyMatrix4(_c),Xc.setAttribute("position",ap),ip.colors.length>0&&Xc.setAttribute("color",new Float32BufferAttribute(ip.colors,3)),Xu&&(Xc.setAttribute("skinIndex",new Uint16BufferAttribute(ip.weightsIndices,4)),Xc.setAttribute("skinWeight",new Float32BufferAttribute(ip.vertexWeights,4)),Xc.FBX_Deformer=Xu),ip.normal.length>0){var hp=new Matrix3().getNormalMatrix(_c),Ap=new Float32BufferAttribute(ip.normal,3);Ap.applyNormalMatrix(hp),Xc.setAttribute("normal",Ap)}if(ip.uvs.forEach(function(Ep,Bp){var Ip="uv"+(Bp+1).toString();Bp===0&&(Ip="uv"),Xc.setAttribute(Ip,new Float32BufferAttribute(ip.uvs[Bp],2))}),_h.material&&_h.material.mappingType!=="AllSame"){var gp=ip.materialIndex[0],Rp=0;if(ip.materialIndex.forEach(function(Ep,Bp){Ep!==gp&&(Xc.addGroup(Rp,Bp-Rp,gp),gp=Ep,Rp=Bp)}),Xc.groups.length>0){var Sp=Xc.groups[Xc.groups.length-1],Dp=Sp.start+Sp.count;Dp!==ip.materialIndex.length&&Xc.addGroup(Dp,ip.materialIndex.length-Dp,gp)}Xc.groups.length===0&&Xc.addGroup(0,ip.materialIndex.length,ip.materialIndex[0])}return this.addMorphTargets(Xc,Ku,Zu,_c),Xc},parseGeoNode:function(Ku,Xu){var Zu={};if(Zu.vertexPositions=Ku.Vertices!==void 0?Ku.Vertices.a:[],Zu.vertexIndices=Ku.PolygonVertexIndex!==void 0?Ku.PolygonVertexIndex.a:[],Ku.LayerElementColor&&(Zu.color=this.parseVertexColors(Ku.LayerElementColor[0])),Ku.LayerElementMaterial&&(Zu.material=this.parseMaterialIndices(Ku.LayerElementMaterial[0])),Ku.LayerElementNormal&&(Zu.normal=this.parseNormals(Ku.LayerElementNormal[0])),Ku.LayerElementUV){Zu.uv=[];for(var _c=0;Ku.LayerElementUV[_c];)Zu.uv.push(this.parseUVs(Ku.LayerElementUV[_c])),_c++}return Zu.weightTable={},Xu!==null&&(Zu.skeleton=Xu,Xu.rawBones.forEach(function(Xc,_h){Xc.indices.forEach(function(ip,ap){Zu.weightTable[ip]===void 0&&(Zu.weightTable[ip]=[]),Zu.weightTable[ip].push({id:_h,weight:Xc.weights[ap]})})})),Zu},genBuffers:function(Ku){var Xu={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},Zu=0,_c=0,Xc=!1,_h=[],ip=[],ap=[],hp=[],Ap=[],gp=[],Rp=this;return Ku.vertexIndices.forEach(function(Sp,Dp){var Ep=!1;Sp<0&&(Sp=Sp^-1,Ep=!0);var Bp=[],Ip=[];if(_h.push(Sp*3,Sp*3+1,Sp*3+2),Ku.color){var ep=Hu(Dp,Zu,Sp,Ku.color);ap.push(ep[0],ep[1],ep[2])}if(Ku.skeleton){if(Ku.weightTable[Sp]!==void 0&&Ku.weightTable[Sp].forEach(function(cp){Ip.push(cp.weight),Bp.push(cp.id)}),Ip.length>4){Xc||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),Xc=!0);var _f=[0,0,0,0],op=[0,0,0,0];Ip.forEach(function(cp,fp){var vp=cp,xp=Bp[fp];op.forEach(function(mp,sp,lp){if(vp>mp){lp[sp]=vp,vp=mp;var $p=_f[sp];_f[sp]=xp,xp=$p}})}),Bp=_f,Ip=op}for(;Ip.length<4;)Ip.push(0),Bp.push(0);for(var rp=0;rp<4;++rp)Ap.push(Ip[rp]),gp.push(Bp[rp])}if(Ku.normal){var ep=Hu(Dp,Zu,Sp,Ku.normal);ip.push(ep[0],ep[1],ep[2])}if(Ku.material&&Ku.material.mappingType!=="AllSame")var up=Hu(Dp,Zu,Sp,Ku.material)[0];Ku.uv&&Ku.uv.forEach(function(cp,fp){var vp=Hu(Dp,Zu,Sp,cp);hp[fp]===void 0&&(hp[fp]=[]),hp[fp].push(vp[0]),hp[fp].push(vp[1])}),_c++,Ep&&(Rp.genFace(Xu,Ku,_h,up,ip,ap,hp,Ap,gp,_c),Zu++,_c=0,_h=[],ip=[],ap=[],hp=[],Ap=[],gp=[])}),Xu},genFace:function(Ku,Xu,Zu,_c,Xc,_h,ip,ap,hp,Ap){for(var gp=2;gp<Ap;gp++)Ku.vertex.push(Xu.vertexPositions[Zu[0]]),Ku.vertex.push(Xu.vertexPositions[Zu[1]]),Ku.vertex.push(Xu.vertexPositions[Zu[2]]),Ku.vertex.push(Xu.vertexPositions[Zu[(gp-1)*3]]),Ku.vertex.push(Xu.vertexPositions[Zu[(gp-1)*3+1]]),Ku.vertex.push(Xu.vertexPositions[Zu[(gp-1)*3+2]]),Ku.vertex.push(Xu.vertexPositions[Zu[gp*3]]),Ku.vertex.push(Xu.vertexPositions[Zu[gp*3+1]]),Ku.vertex.push(Xu.vertexPositions[Zu[gp*3+2]]),Xu.skeleton&&(Ku.vertexWeights.push(ap[0]),Ku.vertexWeights.push(ap[1]),Ku.vertexWeights.push(ap[2]),Ku.vertexWeights.push(ap[3]),Ku.vertexWeights.push(ap[(gp-1)*4]),Ku.vertexWeights.push(ap[(gp-1)*4+1]),Ku.vertexWeights.push(ap[(gp-1)*4+2]),Ku.vertexWeights.push(ap[(gp-1)*4+3]),Ku.vertexWeights.push(ap[gp*4]),Ku.vertexWeights.push(ap[gp*4+1]),Ku.vertexWeights.push(ap[gp*4+2]),Ku.vertexWeights.push(ap[gp*4+3]),Ku.weightsIndices.push(hp[0]),Ku.weightsIndices.push(hp[1]),Ku.weightsIndices.push(hp[2]),Ku.weightsIndices.push(hp[3]),Ku.weightsIndices.push(hp[(gp-1)*4]),Ku.weightsIndices.push(hp[(gp-1)*4+1]),Ku.weightsIndices.push(hp[(gp-1)*4+2]),Ku.weightsIndices.push(hp[(gp-1)*4+3]),Ku.weightsIndices.push(hp[gp*4]),Ku.weightsIndices.push(hp[gp*4+1]),Ku.weightsIndices.push(hp[gp*4+2]),Ku.weightsIndices.push(hp[gp*4+3])),Xu.color&&(Ku.colors.push(_h[0]),Ku.colors.push(_h[1]),Ku.colors.push(_h[2]),Ku.colors.push(_h[(gp-1)*3]),Ku.colors.push(_h[(gp-1)*3+1]),Ku.colors.push(_h[(gp-1)*3+2]),Ku.colors.push(_h[gp*3]),Ku.colors.push(_h[gp*3+1]),Ku.colors.push(_h[gp*3+2])),Xu.material&&Xu.material.mappingType!=="AllSame"&&(Ku.materialIndex.push(_c),Ku.materialIndex.push(_c),Ku.materialIndex.push(_c)),Xu.normal&&(Ku.normal.push(Xc[0]),Ku.normal.push(Xc[1]),Ku.normal.push(Xc[2]),Ku.normal.push(Xc[(gp-1)*3]),Ku.normal.push(Xc[(gp-1)*3+1]),Ku.normal.push(Xc[(gp-1)*3+2]),Ku.normal.push(Xc[gp*3]),Ku.normal.push(Xc[gp*3+1]),Ku.normal.push(Xc[gp*3+2])),Xu.uv&&Xu.uv.forEach(function(Rp,Sp){Ku.uvs[Sp]===void 0&&(Ku.uvs[Sp]=[]),Ku.uvs[Sp].push(ip[Sp][0]),Ku.uvs[Sp].push(ip[Sp][1]),Ku.uvs[Sp].push(ip[Sp][(gp-1)*2]),Ku.uvs[Sp].push(ip[Sp][(gp-1)*2+1]),Ku.uvs[Sp].push(ip[Sp][gp*2]),Ku.uvs[Sp].push(ip[Sp][gp*2+1])})},addMorphTargets:function(Ku,Xu,Zu,_c){if(Zu.length!==0){Ku.morphTargetsRelative=!0,Ku.morphAttributes.position=[];var Xc=this;Zu.forEach(function(_h){_h.rawTargets.forEach(function(ip){var ap=_u.Objects.Geometry[ip.geoID];ap!==void 0&&Xc.genMorphGeometry(Ku,Xu,ap,_c,ip.name)})})}},genMorphGeometry:function(Ku,Xu,Zu,_c,Xc){for(var _h=Xu.PolygonVertexIndex!==void 0?Xu.PolygonVertexIndex.a:[],ip=Zu.Vertices!==void 0?Zu.Vertices.a:[],ap=Zu.Indexes!==void 0?Zu.Indexes.a:[],hp=Ku.attributes.position.count*3,Ap=new Float32Array(hp),gp=0;gp<ap.length;gp++){var Rp=ap[gp]*3;Ap[Rp]=ip[gp*3],Ap[Rp+1]=ip[gp*3+1],Ap[Rp+2]=ip[gp*3+2]}var Sp={vertexIndices:_h,vertexPositions:Ap},Dp=this.genBuffers(Sp),Ep=new Float32BufferAttribute(Dp.vertex,3);Ep.name=Xc||Zu.attrName,Ep.applyMatrix4(_c),Ku.morphAttributes.position.push(Ep)},parseNormals:function(Ku){var Xu=Ku.MappingInformationType,Zu=Ku.ReferenceInformationType,_c=Ku.Normals.a,Xc=[];return Zu==="IndexToDirect"&&("NormalIndex"in Ku?Xc=Ku.NormalIndex.a:"NormalsIndex"in Ku&&(Xc=Ku.NormalsIndex.a)),{dataSize:3,buffer:_c,indices:Xc,mappingType:Xu,referenceType:Zu}},parseUVs:function(Ku){var Xu=Ku.MappingInformationType,Zu=Ku.ReferenceInformationType,_c=Ku.UV.a,Xc=[];return Zu==="IndexToDirect"&&(Xc=Ku.UVIndex.a),{dataSize:2,buffer:_c,indices:Xc,mappingType:Xu,referenceType:Zu}},parseVertexColors:function(Ku){var Xu=Ku.MappingInformationType,Zu=Ku.ReferenceInformationType,_c=Ku.Colors.a,Xc=[];return Zu==="IndexToDirect"&&(Xc=Ku.ColorIndex.a),{dataSize:4,buffer:_c,indices:Xc,mappingType:Xu,referenceType:Zu}},parseMaterialIndices:function(Ku){var Xu=Ku.MappingInformationType,Zu=Ku.ReferenceInformationType;if(Xu==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:Zu};for(var _c=Ku.Materials.a,Xc=[],_h=0;_h<_c.length;++_h)Xc.push(_h);return{dataSize:1,buffer:_c,indices:Xc,mappingType:Xu,referenceType:Zu}},parseNurbsGeometry:function(Ku){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var Xu=parseInt(Ku.Order);if(isNaN(Xu))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",Ku.Order,Ku.id),new BufferGeometry;for(var Zu=Xu-1,_c=Ku.KnotVector.a,Xc=[],_h=Ku.Points.a,ip=0,ap=_h.length;ip<ap;ip+=4)Xc.push(new Vector4().fromArray(_h,ip));var hp,Ap;if(Ku.Form==="Closed")Xc.push(Xc[0]);else if(Ku.Form==="Periodic"){hp=Zu,Ap=_c.length-1-hp;for(var ip=0;ip<Zu;++ip)Xc.push(Xc[ip])}var gp=new NURBSCurve(Zu,_c,Xc,hp,Ap),Rp=gp.getPoints(Xc.length*7),Sp=new Float32Array(Rp.length*3);Rp.forEach(function(Ep,Bp){Ep.toArray(Sp,Bp*3)});var Dp=new BufferGeometry;return Dp.setAttribute("position",new BufferAttribute(Sp,3)),Dp}};function Lu(){}Lu.prototype={constructor:Lu,parse:function(){var Ku=[],Xu=this.parseClips();if(Xu!==void 0)for(var Zu in Xu){var _c=Xu[Zu],Xc=this.addClip(_c);Ku.push(Xc)}return Ku},parseClips:function(){if(_u.Objects.AnimationCurve!==void 0){var Ku=this.parseAnimationCurveNodes();this.parseAnimationCurves(Ku);var Xu=this.parseAnimationLayers(Ku),Zu=this.parseAnimStacks(Xu);return Zu}},parseAnimationCurveNodes:function(){var Ku=_u.Objects.AnimationCurveNode,Xu=new Map;for(var Zu in Ku){var _c=Ku[Zu];if(_c.attrName.match(/S|R|T|DeformPercent/)!==null){var Xc={id:_c.id,attr:_c.attrName,curves:{}};Xu.set(Xc.id,Xc)}}return Xu},parseAnimationCurves:function(Ku){var Xu=_u.Objects.AnimationCurve;for(var Zu in Xu){var _c={id:Xu[Zu].id,times:Xu[Zu].KeyTime.a.map(Gu),values:Xu[Zu].KeyValueFloat.a},Xc=$u.get(_c.id);if(Xc!==void 0){var _h=Xc.parents[0].ID,ip=Xc.parents[0].relationship;ip.match(/X/)?Ku.get(_h).curves.x=_c:ip.match(/Y/)?Ku.get(_h).curves.y=_c:ip.match(/Z/)?Ku.get(_h).curves.z=_c:ip.match(/d|DeformPercent/)&&Ku.has(_h)&&(Ku.get(_h).curves.morph=_c)}}},parseAnimationLayers:function(Ku){var Xu=_u.Objects.AnimationLayer,Zu=new Map;for(var _c in Xu){var Xc=[],_h=$u.get(parseInt(_c));if(_h!==void 0){var ip=_h.children;ip.forEach(function(ap,hp){if(Ku.has(ap.ID)){var Ap=Ku.get(ap.ID);if(Ap.curves.x!==void 0||Ap.curves.y!==void 0||Ap.curves.z!==void 0){if(Xc[hp]===void 0){var gp=$u.get(ap.ID).parents.filter(function(Ip){return Ip.relationship!==void 0})[0].ID;if(gp!==void 0){var Rp=_u.Objects.Model[gp.toString()];if(Rp===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",ap);return}var Sp={modelName:Rp.attrName?PropertyBinding.sanitizeNodeName(Rp.attrName):"",ID:Rp.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Tu.traverse(function(Ip){Ip.ID===Rp.id&&(Sp.transform=Ip.matrix,Ip.userData.transformData&&(Sp.eulerOrder=Ip.userData.transformData.eulerOrder))}),Sp.transform||(Sp.transform=new Matrix4),"PreRotation"in Rp&&(Sp.preRotation=Rp.PreRotation.value),"PostRotation"in Rp&&(Sp.postRotation=Rp.PostRotation.value),Xc[hp]=Sp}}Xc[hp]&&(Xc[hp][Ap.attr]=Ap)}else if(Ap.curves.morph!==void 0){if(Xc[hp]===void 0){var Dp=$u.get(ap.ID).parents.filter(function(op){return op.relationship!==void 0})[0].ID,Ep=$u.get(Dp).parents[0].ID,Bp=$u.get(Ep).parents[0].ID,gp=$u.get(Bp).parents[0].ID,Rp=_u.Objects.Model[gp],Sp={modelName:Rp.attrName?PropertyBinding.sanitizeNodeName(Rp.attrName):"",morphName:_u.Objects.Deformer[Dp].attrName};Xc[hp]=Sp}Xc[hp][Ap.attr]=Ap}}}),Zu.set(parseInt(_c),Xc)}}return Zu},parseAnimStacks:function(Ku){var Xu=_u.Objects.AnimationStack,Zu={};for(var _c in Xu){var Xc=$u.get(parseInt(_c)).children;Xc.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var _h=Ku.get(Xc[0].ID);Zu[_c]={name:Xu[_c].attrName,layer:_h}}return Zu},addClip:function(Ku){var Xu=[],Zu=this;return Ku.layer.forEach(function(_c){Xu=Xu.concat(Zu.generateTracks(_c))}),new AnimationClip(Ku.name,-1,Xu)},generateTracks:function(Ku){var Xu=[],Zu=new Vector3,_c=new Quaternion,Xc=new Vector3;if(Ku.transform&&Ku.transform.decompose(Zu,_c,Xc),Zu=Zu.toArray(),_c=new Euler().setFromQuaternion(_c,Ku.eulerOrder).toArray(),Xc=Xc.toArray(),Ku.T!==void 0&&Object.keys(Ku.T.curves).length>0){var _h=this.generateVectorTrack(Ku.modelName,Ku.T.curves,Zu,"position");_h!==void 0&&Xu.push(_h)}if(Ku.R!==void 0&&Object.keys(Ku.R.curves).length>0){var ip=this.generateRotationTrack(Ku.modelName,Ku.R.curves,_c,Ku.preRotation,Ku.postRotation,Ku.eulerOrder);ip!==void 0&&Xu.push(ip)}if(Ku.S!==void 0&&Object.keys(Ku.S.curves).length>0){var ap=this.generateVectorTrack(Ku.modelName,Ku.S.curves,Xc,"scale");ap!==void 0&&Xu.push(ap)}if(Ku.DeformPercent!==void 0){var hp=this.generateMorphTrack(Ku);hp!==void 0&&Xu.push(hp)}return Xu},generateVectorTrack:function(Ku,Xu,Zu,_c){var Xc=this.getTimesForAllAxes(Xu),_h=this.getKeyframeTrackValues(Xc,Xu,Zu);return new VectorKeyframeTrack(Ku+"."+_c,Xc,_h)},generateRotationTrack:function(Ku,Xu,Zu,_c,Xc,_h){Xu.x!==void 0&&(this.interpolateRotations(Xu.x),Xu.x.values=Xu.x.values.map(MathUtils.degToRad)),Xu.y!==void 0&&(this.interpolateRotations(Xu.y),Xu.y.values=Xu.y.values.map(MathUtils.degToRad)),Xu.z!==void 0&&(this.interpolateRotations(Xu.z),Xu.z.values=Xu.z.values.map(MathUtils.degToRad));var ip=this.getTimesForAllAxes(Xu),ap=this.getKeyframeTrackValues(ip,Xu,Zu);_c!==void 0&&(_c=_c.map(MathUtils.degToRad),_c.push(_h),_c=new Euler().fromArray(_c),_c=new Quaternion().setFromEuler(_c)),Xc!==void 0&&(Xc=Xc.map(MathUtils.degToRad),Xc.push(_h),Xc=new Euler().fromArray(Xc),Xc=new Quaternion().setFromEuler(Xc).inverse());for(var hp=new Quaternion,Ap=new Euler,gp=[],Rp=0;Rp<ap.length;Rp+=3)Ap.set(ap[Rp],ap[Rp+1],ap[Rp+2],_h),hp.setFromEuler(Ap),_c!==void 0&&hp.premultiply(_c),Xc!==void 0&&hp.multiply(Xc),hp.toArray(gp,Rp/3*4);return new QuaternionKeyframeTrack(Ku+".quaternion",ip,gp)},generateMorphTrack:function(Ku){var Xu=Ku.DeformPercent.curves.morph,Zu=Xu.values.map(function(Xc){return Xc/100}),_c=Tu.getObjectByName(Ku.modelName).morphTargetDictionary[Ku.morphName];return new NumberKeyframeTrack(Ku.modelName+".morphTargetInfluences["+_c+"]",Xu.times,Zu)},getTimesForAllAxes:function(Ku){var Xu=[];return Ku.x!==void 0&&(Xu=Xu.concat(Ku.x.times)),Ku.y!==void 0&&(Xu=Xu.concat(Ku.y.times)),Ku.z!==void 0&&(Xu=Xu.concat(Ku.z.times)),Xu=Xu.sort(function(Zu,_c){return Zu-_c}).filter(function(Zu,_c,Xc){return Xc.indexOf(Zu)==_c}),Xu},getKeyframeTrackValues:function(Ku,Xu,Zu){var _c=Zu,Xc=[],_h=-1,ip=-1,ap=-1;return Ku.forEach(function(hp){if(Xu.x&&(_h=Xu.x.times.indexOf(hp)),Xu.y&&(ip=Xu.y.times.indexOf(hp)),Xu.z&&(ap=Xu.z.times.indexOf(hp)),_h!==-1){var Ap=Xu.x.values[_h];Xc.push(Ap),_c[0]=Ap}else Xc.push(_c[0]);if(ip!==-1){var gp=Xu.y.values[ip];Xc.push(gp),_c[1]=gp}else Xc.push(_c[1]);if(ap!==-1){var Rp=Xu.z.values[ap];Xc.push(Rp),_c[2]=Rp}else Xc.push(_c[2])}),Xc},interpolateRotations:function(Ku){for(var Xu=1;Xu<Ku.values.length;Xu++){var Zu=Ku.values[Xu-1],_c=Ku.values[Xu]-Zu,Xc=Math.abs(_c);if(Xc>=180){for(var _h=Xc/180,ip=_c/_h,ap=Zu+ip,hp=Ku.times[Xu-1],Ap=Ku.times[Xu]-hp,gp=Ap/_h,Rp=hp+gp,Sp=[],Dp=[];Rp<Ku.times[Xu];)Sp.push(Rp),Rp+=gp,Dp.push(ap),ap+=ip;Ku.times=tp(Ku.times,Xu,Sp),Ku.values=tp(Ku.values,Xu,Dp)}}}};function Bu(){}Bu.prototype={constructor:Bu,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(Ku){this.nodeStack.push(Ku),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(Ku,Xu){this.currentProp=Ku,this.currentPropName=Xu},parse:function(Ku){this.currentIndent=0,this.allNodes=new Du,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var Xu=this,Zu=Ku.split(/[\r\n]+/);return Zu.forEach(function(_c,Xc){var _h=_c.match(/^[\s\t]*;/),ip=_c.match(/^[\s\t]*$/);if(!(_h||ip)){var ap=_c.match("^\\t{"+Xu.currentIndent+"}(\\w+):(.*){",""),hp=_c.match("^\\t{"+Xu.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),Ap=_c.match("^\\t{"+(Xu.currentIndent-1)+"}}");ap?Xu.parseNodeBegin(_c,ap):hp?Xu.parseNodeProperty(_c,hp,Zu[++Xc]):Ap?Xu.popStack():_c.match(/^[^\s\t}]/)&&Xu.parseNodePropertyContinued(_c)}}),this.allNodes},parseNodeBegin:function(Ku,Xu){var Zu=Xu[1].trim().replace(/^"/,"").replace(/"$/,""),_c=Xu[2].split(",").map(function(ap){return ap.trim().replace(/^"/,"").replace(/"$/,"")}),Xc={name:Zu},_h=this.parseNodeAttr(_c),ip=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(Zu,Xc):Zu in ip?(Zu==="PoseNode"?ip.PoseNode.push(Xc):ip[Zu].id!==void 0&&(ip[Zu]={},ip[Zu][ip[Zu].id]=ip[Zu]),_h.id!==""&&(ip[Zu][_h.id]=Xc)):typeof _h.id=="number"?(ip[Zu]={},ip[Zu][_h.id]=Xc):Zu!=="Properties70"&&(Zu==="PoseNode"?ip[Zu]=[Xc]:ip[Zu]=Xc),typeof _h.id=="number"&&(Xc.id=_h.id),_h.name!==""&&(Xc.attrName=_h.name),_h.type!==""&&(Xc.attrType=_h.type),this.pushStack(Xc)},parseNodeAttr:function(Ku){var Xu=Ku[0];Ku[0]!==""&&(Xu=parseInt(Ku[0]),isNaN(Xu)&&(Xu=Ku[0]));var Zu="",_c="";return Ku.length>1&&(Zu=Ku[1].replace(/^(\w+)::/,""),_c=Ku[2]),{id:Xu,name:Zu,type:_c}},parseNodeProperty:function(Ku,Xu,Zu){var _c=Xu[1].replace(/^"/,"").replace(/"$/,"").trim(),Xc=Xu[2].replace(/^"/,"").replace(/"$/,"").trim();_c==="Content"&&Xc===","&&(Xc=Zu.replace(/"/g,"").replace(/,$/,"").trim());var _h=this.getCurrentNode(),ip=_h.name;if(ip==="Properties70"){this.parseNodeSpecialProperty(Ku,_c,Xc);return}if(_c==="C"){var ap=Xc.split(",").slice(1),hp=parseInt(ap[0]),Ap=parseInt(ap[1]),gp=Xc.split(",").slice(3);gp=gp.map(function(Rp){return Rp.trim().replace(/^"/,"")}),_c="connections",Xc=[hp,Ap],Ju(Xc,gp),_h[_c]===void 0&&(_h[_c]=[])}_c==="Node"&&(_h.id=Xc),_c in _h&&Array.isArray(_h[_c])?_h[_c].push(Xc):_c!=="a"?_h[_c]=Xc:_h.a=Xc,this.setCurrentProp(_h,_c),_c==="a"&&Xc.slice(-1)!==","&&(_h.a=qu(Xc))},parseNodePropertyContinued:function(Ku){var Xu=this.getCurrentNode();Xu.a+=Ku,Ku.slice(-1)!==","&&(Xu.a=qu(Xu.a))},parseNodeSpecialProperty:function(Ku,Xu,Zu){var _c=Zu.split('",').map(function(Ap){return Ap.trim().replace(/^\"/,"").replace(/\s/,"_")}),Xc=_c[0],_h=_c[1],ip=_c[2],ap=_c[3],hp=_c[4];switch(_h){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":hp=parseFloat(hp);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":hp=qu(hp);break}this.getPrevNode()[Xc]={type:_h,type2:ip,flag:ap,value:hp},this.setCurrentProp(this.getPrevNode(),Xc)}};function Vu(){}Vu.prototype={constructor:Vu,parse:function(Ku){var Xu=new Ou(Ku);Xu.skip(23);var Zu=Xu.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+Zu);for(var _c=new Du;!this.endOfContent(Xu);){var Xc=this.parseNode(Xu,Zu);Xc!==null&&_c.add(Xc.name,Xc)}return _c},endOfContent:function(Ku){return Ku.size()%16===0?(Ku.getOffset()+160+16&-16)>=Ku.size():Ku.getOffset()+160+16>=Ku.size()},parseNode:function(Ku,Xu){var Zu={},_c=Xu>=7500?Ku.getUint64():Ku.getUint32(),Xc=Xu>=7500?Ku.getUint64():Ku.getUint32();Xu>=7500?Ku.getUint64():Ku.getUint32();var _h=Ku.getUint8(),ip=Ku.getString(_h);if(_c===0)return null;for(var ap=[],hp=0;hp<Xc;hp++)ap.push(this.parseProperty(Ku));var Ap=ap.length>0?ap[0]:"",gp=ap.length>1?ap[1]:"",Rp=ap.length>2?ap[2]:"";for(Zu.singleProperty=Xc===1&&Ku.getOffset()===_c;_c>Ku.getOffset();){var Sp=this.parseNode(Ku,Xu);Sp!==null&&this.parseSubNode(ip,Zu,Sp)}return Zu.propertyList=ap,typeof Ap=="number"&&(Zu.id=Ap),gp!==""&&(Zu.attrName=gp),Rp!==""&&(Zu.attrType=Rp),ip!==""&&(Zu.name=ip),Zu},parseSubNode:function(Ku,Xu,Zu){if(Zu.singleProperty===!0){var _c=Zu.propertyList[0];Array.isArray(_c)?(Xu[Zu.name]=Zu,Zu.a=_c):Xu[Zu.name]=_c}else if(Ku==="Connections"&&Zu.name==="C"){var Xc=[];Zu.propertyList.forEach(function(Rp,Sp){Sp!==0&&Xc.push(Rp)}),Xu.connections===void 0&&(Xu.connections=[]),Xu.connections.push(Xc)}else if(Zu.name==="Properties70"){var _h=Object.keys(Zu);_h.forEach(function(Rp){Xu[Rp]=Zu[Rp]})}else if(Ku==="Properties70"&&Zu.name==="P"){var ip=Zu.propertyList[0],ap=Zu.propertyList[1],hp=Zu.propertyList[2],Ap=Zu.propertyList[3],gp;ip.indexOf("Lcl ")===0&&(ip=ip.replace("Lcl ","Lcl_")),ap.indexOf("Lcl ")===0&&(ap=ap.replace("Lcl ","Lcl_")),ap==="Color"||ap==="ColorRGB"||ap==="Vector"||ap==="Vector3D"||ap.indexOf("Lcl_")===0?gp=[Zu.propertyList[4],Zu.propertyList[5],Zu.propertyList[6]]:gp=Zu.propertyList[4],Xu[ip]={type:ap,type2:hp,flag:Ap,value:gp}}else Xu[Zu.name]===void 0?typeof Zu.id=="number"?(Xu[Zu.name]={},Xu[Zu.name][Zu.id]=Zu):Xu[Zu.name]=Zu:Zu.name==="PoseNode"?(Array.isArray(Xu[Zu.name])||(Xu[Zu.name]=[Xu[Zu.name]]),Xu[Zu.name].push(Zu)):Xu[Zu.name][Zu.id]===void 0&&(Xu[Zu.name][Zu.id]=Zu)},parseProperty:function(Ku){var Xu=Ku.getString(1);switch(Xu){case"C":return Ku.getBoolean();case"D":return Ku.getFloat64();case"F":return Ku.getFloat32();case"I":return Ku.getInt32();case"L":return Ku.getInt64();case"R":var Zu=Ku.getUint32();return Ku.getArrayBuffer(Zu);case"S":var Zu=Ku.getUint32();return Ku.getString(Zu);case"Y":return Ku.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var _c=Ku.getUint32(),Xc=Ku.getUint32(),_h=Ku.getUint32();if(Xc===0)switch(Xu){case"b":case"c":return Ku.getBooleanArray(_c);case"d":return Ku.getFloat64Array(_c);case"f":return Ku.getFloat32Array(_c);case"i":return Ku.getInt32Array(_c);case"l":return Ku.getInt64Array(_c)}typeof Zlib=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var ip=new Zlib.Inflate(new Uint8Array(Ku.getArrayBuffer(_h))),ap=new Ou(ip.decompress().buffer);switch(Xu){case"b":case"c":return ap.getBooleanArray(_c);case"d":return ap.getFloat64Array(_c);case"f":return ap.getFloat32Array(_c);case"i":return ap.getInt32Array(_c);case"l":return ap.getInt64Array(_c)}default:throw new Error("THREE.FBXLoader: Unknown property type "+Xu)}}};function Ou(Ku,Xu){this.dv=new DataView(Ku),this.offset=0,this.littleEndian=Xu!==void 0?Xu:!0}Ou.prototype={constructor:Ou,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(Ku){this.offset+=Ku},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(Ku){for(var Xu=[],Zu=0;Zu<Ku;Zu++)Xu.push(this.getBoolean());return Xu},getUint8:function(){var Ku=this.dv.getUint8(this.offset);return this.offset+=1,Ku},getInt16:function(){var Ku=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,Ku},getInt32:function(){var Ku=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,Ku},getInt32Array:function(Ku){for(var Xu=[],Zu=0;Zu<Ku;Zu++)Xu.push(this.getInt32());return Xu},getUint32:function(){var Ku=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,Ku},getInt64:function(){var Ku,Xu;return this.littleEndian?(Ku=this.getUint32(),Xu=this.getUint32()):(Xu=this.getUint32(),Ku=this.getUint32()),Xu&2147483648?(Xu=~Xu&4294967295,Ku=~Ku&4294967295,Ku===4294967295&&(Xu=Xu+1&4294967295),Ku=Ku+1&4294967295,-(Xu*4294967296+Ku)):Xu*4294967296+Ku},getInt64Array:function(Ku){for(var Xu=[],Zu=0;Zu<Ku;Zu++)Xu.push(this.getInt64());return Xu},getUint64:function(){var Ku,Xu;return this.littleEndian?(Ku=this.getUint32(),Xu=this.getUint32()):(Xu=this.getUint32(),Ku=this.getUint32()),Xu*4294967296+Ku},getFloat32:function(){var Ku=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,Ku},getFloat32Array:function(Ku){for(var Xu=[],Zu=0;Zu<Ku;Zu++)Xu.push(this.getFloat32());return Xu},getFloat64:function(){var Ku=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,Ku},getFloat64Array:function(Ku){for(var Xu=[],Zu=0;Zu<Ku;Zu++)Xu.push(this.getFloat64());return Xu},getArrayBuffer:function(Ku){var Xu=this.dv.buffer.slice(this.offset,this.offset+Ku);return this.offset+=Ku,Xu},getString:function(Ku){for(var Xu=[],Zu=0;Zu<Ku;Zu++)Xu[Zu]=this.getUint8();var _c=Xu.indexOf(0);return _c>=0&&(Xu=Xu.slice(0,_c)),LoaderUtils.decodeText(new Uint8Array(Xu))}};function Du(){}Du.prototype={constructor:Du,add:function(Ku,Xu){this[Ku]=Xu}};function ku(Ku){var Xu="Kaydara FBX Binary  \0";return Ku.byteLength>=Xu.length&&Xu===Yu(Ku,0,Xu.length)}function Fu(Ku){var Xu=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],Zu=0;function _c(ip){var ap=Ku[ip-1];return Ku=Ku.slice(Zu+ip),Zu++,ap}for(var Xc=0;Xc<Xu.length;++Xc){var _h=_c(1);if(_h===Xu[Xc])return!1}return!0}function Nu(Ku){var Xu=/FBXVersion: (\d+)/,Zu=Ku.match(Xu);if(Zu){var _c=parseInt(Zu[1]);return _c}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Gu(Ku){return Ku/46186158e3}var zu=[];function Hu(Ku,Xu,Zu,_c){var Xc;switch(_c.mappingType){case"ByPolygonVertex":Xc=Ku;break;case"ByPolygon":Xc=Xu;break;case"ByVertice":Xc=Zu;break;case"AllSame":Xc=_c.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+_c.mappingType)}_c.referenceType==="IndexToDirect"&&(Xc=_c.indices[Xc]);var _h=Xc*_c.dataSize,ip=_h+_c.dataSize;return _d(zu,_c.buffer,_h,ip)}var Uu=new Euler,ju=new Vector3;function Wu(Ku){var Xu=new Matrix4,Zu=new Matrix4,_c=new Matrix4,Xc=new Matrix4,_h=new Matrix4,ip=new Matrix4,ap=new Matrix4,hp=new Matrix4,Ap=new Matrix4,gp=new Matrix4,Rp=new Matrix4,Sp=Ku.inheritType?Ku.inheritType:0;if(Ku.translation&&Xu.setPosition(ju.fromArray(Ku.translation)),Ku.preRotation){var Dp=Ku.preRotation.map(MathUtils.degToRad);Dp.push(Ku.eulerOrder),Zu.makeRotationFromEuler(Uu.fromArray(Dp))}if(Ku.rotation){var Dp=Ku.rotation.map(MathUtils.degToRad);Dp.push(Ku.eulerOrder),_c.makeRotationFromEuler(Uu.fromArray(Dp))}if(Ku.postRotation){var Dp=Ku.postRotation.map(MathUtils.degToRad);Dp.push(Ku.eulerOrder),Xc.makeRotationFromEuler(Uu.fromArray(Dp))}Ku.scale&&_h.scale(ju.fromArray(Ku.scale)),Ku.scalingOffset&&ap.setPosition(ju.fromArray(Ku.scalingOffset)),Ku.scalingPivot&&ip.setPosition(ju.fromArray(Ku.scalingPivot)),Ku.rotationOffset&&hp.setPosition(ju.fromArray(Ku.rotationOffset)),Ku.rotationPivot&&Ap.setPosition(ju.fromArray(Ku.rotationPivot)),Ku.parentMatrixWorld&&(gp=Ku.parentMatrixWorld);var Ep=Zu.multiply(_c).multiply(Xc),Bp=new Matrix4;gp.extractRotation(Bp);var Ip=new Matrix4;Ip.copyPosition(gp);var ep=new Matrix4;ep.getInverse(Bp).multiply(gp);var _f=new Matrix4;if(Sp===0)_f.copy(Bp).multiply(Ep).multiply(ep).multiply(_h);else if(Sp===1)_f.copy(Bp).multiply(ep).multiply(Ep).multiply(_h);else{var op=new Matrix4().getInverse(_h),rp=new Matrix4().multiply(ep).multiply(op);_f.copy(Bp).multiply(Ep).multiply(rp).multiply(_h)}var up=new Matrix4().getInverse(Ap),cp=new Matrix4().getInverse(ip),fp=new Matrix4;fp.copy(Xu).multiply(hp).multiply(Ap).multiply(Zu).multiply(_c).multiply(Xc).multiply(up).multiply(ap).multiply(ip).multiply(_h).multiply(cp);var vp=new Matrix4().copyPosition(fp),xp=new Matrix4().copy(gp).multiply(vp);return Rp.copyPosition(xp),fp=new Matrix4().multiply(Rp).multiply(_f),fp}function Qu(Ku){Ku=Ku||0;var Xu=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return Ku===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),Xu[0]):Xu[Ku]}function qu(Ku){var Xu=Ku.split(",").map(function(Zu){return parseFloat(Zu)});return Xu}function Yu(Ku,Xu,Zu){return Xu===void 0&&(Xu=0),Zu===void 0&&(Zu=Ku.byteLength),LoaderUtils.decodeText(new Uint8Array(Ku,Xu,Zu))}function Ju(Ku,Xu){for(var Zu=0,_c=Ku.length,Xc=Xu.length;Zu<Xc;Zu++,_c++)Ku[_c]=Xu[Zu]}function _d(Ku,Xu,Zu,_c){for(var Xc=Zu,_h=0;Xc<_c;Xc++,_h++)Ku[_h]=Xu[Xc];return Ku}function tp(Ku,Xu,Zu){return Ku.slice(0,Xu).concat(Zu).concat(Ku.slice(Xu))}return Cu})();const i$g=window.requestAnimationFrame||(_u=>setTimeout(_u,16)),u$d=window.cancelAnimationFrame||clearTimeout;function F$8(_u,$u=60){let Tu=-1,Cu=0,Pu=-1;const Ru=1e3/$u;function Lu(Bu){Pu===-1&&(Pu=Bu),Tu=i$g(Lu),!(Bu-Cu<Ru)&&(Cu=Bu,_u==null||_u(Bu-Pu))}return Tu=i$g(Lu),function(){u$d(Tu)}}var i$f=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const x$b=new TextureLoader;function T$7(_u){return i$f(this,null,function*(){return new Promise(($u,Tu)=>{x$b.load(_u,$u,void 0,Tu)}).then($u=>($u.encoding=sRGBEncoding,$u))})}var r$h=Object.defineProperty,n$d=(_u,$u,Tu)=>$u in _u?r$h(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,i$e=(_u,$u,Tu)=>(n$d(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class d$e extends T$b{constructor(){super(...arguments),i$e(this,"disposeMethods",[]),i$e(this,"animationFrameDisposer"),i$e(this,"onDispose",$u=>(this.disposeMethods.push($u),this)),i$e(this,"play",()=>{var $u;return this.start(0),($u=this.animationFrameDisposer)==null||$u.call(this),this.animationFrameDisposer=F$8(Tu=>this.update(Tu)),this}),i$e(this,"stop",()=>{var $u;return super.stop(),($u=this.animationFrameDisposer)==null||$u.call(this),this}),i$e(this,"dispose",()=>{var $u;this.stop(),($u=this.animationFrameDisposer)==null||$u.call(this),this.disposeMethods.forEach(Tu=>Tu()),this.disposeMethods=[],j$6(this)})}}function F$7(_u,$u=d$l.Linear.None){const Tu=new d$e({progress:0}).to({progress:1});return _u!==void 0&&Tu.duration(_u),$u!==void 0&&Tu.easing($u),Tu}var C$c=Object.defineProperty,g$f=Object.defineProperties,d$d=Object.getOwnPropertyDescriptors,t$9=Object.getOwnPropertySymbols,p$9=Object.prototype.hasOwnProperty,a$d=Object.prototype.propertyIsEnumerable,i$d=(_u,$u,Tu)=>$u in _u?C$c(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,r$g=(_u,$u)=>{for(var Tu in $u||($u={}))p$9.call($u,Tu)&&i$d(_u,Tu,$u[Tu]);if(t$9)for(var Tu of t$9($u))a$d.call($u,Tu)&&i$d(_u,Tu,$u[Tu]);return _u},l$c=(_u,$u)=>g$f(_u,d$d($u));const c$f=1,L$a=new Color(16777215);new Color(6522623);const R$5=new Color(16777215);new Color(6522623);const E$a=6,O$9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",s$c=new TextureLoader().load(O$9),U$7={pointTexture:s$c,pointSize:E$a,lineWidth:c$f,lineColor:L$a,pointColor:R$5,lineRenderOrder:20,pointsRenderOrder:20};l$c(r$g({},U$7),{dashed:!0});var a$c={},f$c={get exports(){return a$c},set exports(_u){a$c=_u}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(_u){(function(){var $u={}.hasOwnProperty;function Tu(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++){var Ru=arguments[Pu];if(Ru){var Lu=typeof Ru;if(Lu==="string"||Lu==="number")Cu.push(Ru);else if(Array.isArray(Ru)){if(Ru.length){var Bu=Tu.apply(null,Ru);Bu&&Cu.push(Bu)}}else if(Lu==="object"){if(Ru.toString!==Object.prototype.toString&&!Ru.toString.toString().includes("[native code]")){Cu.push(Ru.toString());continue}for(var Vu in Ru)$u.call(Ru,Vu)&&Ru[Vu]&&Cu.push(Vu)}}}return Cu.join(" ")}_u.exports?(Tu.default=Tu,_u.exports=Tu):window.classNames=Tu})()})(f$c);const u$c=a$c;function r$f(_u,$u){console.warn(`\u26D4 ==> [${_u}]: ${$u}`)}function c$e(_u,$u){console.warn(`\u{1F6AB} ==> [${_u}]: ${$u}`)}var e$8=a$b;function a$b(_u,$u,Tu){return _u[0]=$u[0]+Tu[0],_u[1]=$u[1]+Tu[1],_u}var s$b=t$8;function t$8(_u,$u,Tu){return _u[0]=$u,_u[1]=Tu,_u}var t$7=l$b;function l$b(_u,$u){var Tu=$u[0],Cu=$u[1],Pu=Tu*Tu+Cu*Cu;return Pu>0&&(Pu=1/Math.sqrt(Pu),_u[0]=$u[0]*Pu,_u[1]=$u[1]*Pu),_u}var a$a=n$c;function n$c(_u,$u,Tu){return _u[0]=$u[0]-Tu[0],_u[1]=$u[1]-Tu[1],_u}var n$b=r$e;function r$e(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]}var i$c={},_$5=e$8,t$6=s$b,c$d=t$7,s$a=a$a,M$i=n$b,p$8=[0,0];i$c.computeMiter=function(_u,$u,Tu,Cu,Pu){return _$5(_u,Tu,Cu),c$d(_u,_u),t$6($u,-_u[1],_u[0]),t$6(p$8,-Tu[1],Tu[0]),Pu/M$i($u,p$8)};i$c.normal=function(_u,$u){return t$6(_u,-$u[1],$u[0]),_u};i$c.direction=function(_u,$u,Tu){return s$a(_u,$u,Tu),c$d(_u,_u),_u};var e$7=i$c,t$5=[0,0],f$b=[0,0],g$e=[0,0],u$b=[0,0],U$6=function(_u,$u){var Tu=null,Cu=[];$u&&(_u=_u.slice(),_u.push(_u[0]));for(var Pu=_u.length,Ru=1;Ru<Pu;Ru++){var Lu=_u[Ru-1],Bu=_u[Ru],Vu=Ru<_u.length-1?_u[Ru+1]:null;if(e$7.direction(t$5,Bu,Lu),Tu||(Tu=[0,0],e$7.normal(Tu,t$5)),Ru===1&&m$9(Cu,Tu,1),!Vu)e$7.normal(Tu,t$5),m$9(Cu,Tu,1);else{e$7.direction(f$b,Vu,Bu);var Ou=e$7.computeMiter(g$e,u$b,t$5,f$b,1);m$9(Cu,u$b,Ou)}}if(_u.length>2&&$u){var Du=_u[Pu-2],ku=_u[0],Fu=_u[1];e$7.direction(t$5,ku,Du),e$7.direction(f$b,Fu,ku),e$7.normal(Tu,t$5);var Nu=e$7.computeMiter(g$e,u$b,t$5,f$b,1);Cu[0][0]=u$b.slice(),Cu[Pu-1][0]=u$b.slice(),Cu[0][1]=Nu,Cu[Pu-1][1]=Nu,Cu.pop()}return Cu};function m$9(_u,$u,Tu){_u.push([[$u[0],$u[1]],Tu])}const z$9=2,M$h=3,X$2=3,k$c=2;function Q$a(_u){const $u=_u.width,Tu=_u.unitLength/$u,Cu=$u/2,Pu=_u.path;if(Pu.length===0)return{geometry:new BufferGeometry,maxU:0};const Ru=new CurvePath;Pu.forEach(Qu=>{const qu=I$d(Qu);qu&&Ru.add(qu)});const Lu=Math.ceil(Ru.getLength()*100),Bu=Ru.getPoints(Lu),Vu=Bu.length,Ou=U$6(Bu.map(Qu=>[Qu.x,Qu.z])),Du=(Vu-1)*z$9*M$h,ku=2*Vu,Fu=ku*X$2,Nu=ku*k$c,Gu=new Uint32Array(Du),zu=new Float32Array(Fu),Hu=new Float32Array(Nu);let Uu=0,ju=0;for(let Qu=0;Qu<Bu.length;Qu++){const[qu,Yu]=Ou[Qu][0],Ju=Bu[Qu],{x:_d,y:tp,z:Ku}=Ju,Xu=new Vector3(_d+qu*Cu,tp+.05,Ku+Yu*Cu);zu[Qu*6+0]=Xu.x,zu[Qu*6+1]=Xu.y,zu[Qu*6+2]=Xu.z;const Zu=new Vector3(_d-qu*Cu,tp+.05,Ku-Yu*Cu);zu[Qu*6+3]=Zu.x,zu[Qu*6+4]=Zu.y,zu[Qu*6+5]=Zu.z,Uu+=Qu>0?Bu[Qu-1].clone().sub(Bu[Qu]).length():0;const _c=Uu/$u/Tu;if(ju=_c,Hu[Qu*4+0]=0,Hu[Qu*4+1]=_c,Hu[Qu*4+2]=1,Hu[Qu*4+3]=_c,_u.skipPositions){const Xc=new Vector3().lerpVectors(Xu,Zu,.5);if(_u.skipPositions.some(_h=>_h.distanceTo(Xc)<.26))continue}Qu!==Bu.length-1&&(Gu[Qu*6+0]=Qu*2+0,Gu[Qu*6+1]=Qu*2+2,Gu[Qu*6+2]=Qu*2+1,Gu[Qu*6+3]=Qu*2+2,Gu[Qu*6+4]=Qu*2+3,Gu[Qu*6+5]=Qu*2+1)}const Wu=new BufferGeometry;return Wu.setAttribute("position",new BufferAttribute(zu,3)),Wu.setAttribute("uv",new BufferAttribute(Hu,2)),Wu.setIndex(new BufferAttribute(Gu,1)),{geometry:Wu,maxU:ju}}function I$d(_u){if(O$8(_u)){const $u=[_u.closed,_u.curve_type,_u.tension],Tu=_u.points.map(Cu=>new Vector3().fromArray(Cu));return new CatmullRomCurve3(Tu,...$u)}}function O$8(_u){return _u.type==="CatmullRomCurve3"}function n$a(_u){return _u==="Panorama"||_u==="DepthPanorama"||_u==="VRPanorama"||_u==="XRPanorama"}function r$d(_u){return!n$a(_u)}var a$9={},k$b={get exports(){return a$9},set exports(_u){a$9=_u}};function f$a(_u){return _u===null?"null":typeof _u=="undefined"?"undefined":typeof _u=="object"?Array.isArray(_u)?"array":"object":typeof _u}function h$b(_u){return f$a(_u)==="object"?j$3(_u):f$a(_u)==="array"?b$7(_u):_u}function b$7(_u){return _u.map(h$b)}function j$3(_u){const $u={};for(const Tu in _u)_u.hasOwnProperty(Tu)&&($u[Tu]=h$b(_u[Tu]));return $u}function y$f(_u,$u=[],Tu={}){const Cu={arrayBehaviour:Tu.arrayBehaviour||"replace"},Pu=$u.map(Lu=>Lu||{}),Ru=_u||{};for(let Lu=0;Lu<Pu.length;Lu++){const Bu=Pu[Lu],Vu=Object.keys(Bu);for(let Ou=0;Ou<Vu.length;Ou++){const Du=Vu[Ou],ku=Bu[Du],Fu=f$a(ku),Nu=f$a(Ru[Du]);if(Fu==="object")if(Nu!=="undefined"){const Gu=Nu==="object"?Ru[Du]:{};Ru[Du]=y$f({},[Gu,j$3(ku)],Cu)}else Ru[Du]=j$3(ku);else if(Fu==="array")if(Nu==="array"){const Gu=b$7(ku);Ru[Du]=Cu.arrayBehaviour==="merge"?Ru[Du].concat(Gu):Gu}else Ru[Du]=b$7(ku);else Ru[Du]=ku}}return Ru}k$b.exports=function(_u,...$u){return y$f(_u,$u)};a$9.noMutate=function(..._u){return y$f({},_u)};a$9.withOptions=function(_u,$u,Tu){return y$f(_u,$u,Tu)};function M$g(_u,$u){$u.forEach(Tu=>{const Cu=new SphereGeometry(.02,16,16),Pu=[],Ru=[new MeshBasicMaterial({color:16776960}),new MeshBasicMaterial({color:16711935}),new MeshBasicMaterial({color:16711680}),new MeshBasicMaterial({color:65535})];if(Tu.position.length===4)Tu.position.forEach((Lu,Bu)=>{const Vu=Ru[Bu],Ou=new Mesh(Cu,Vu);Ou.position.copy(c$n(Lu)),Pu.push(Ou)});else{const Lu=Ru[0],Bu=new Mesh(Cu,Lu);Bu.position.copy(c$n(Tu.position)),Pu.push(Bu)}Pu.forEach(Lu=>{Lu.material.depthTest=!1,_u.scene.add(Lu)})})}function i$b(_u){return _u.stickType==="Plane"}function T$6(_u){return _u.stickType==="3DPoint"||_u.stickType==="Plane"}function s$9(_u){return _u.stickType==="Model"&&_u.contentType==="MediaModel"}function r$c(_u){return _u.stickType==="Model"&&_u.contentType==="Model"}function u$a(_u){return _u.stickType==="Model"}function p$7(_u){return _u.stickType==="Plane"&&_u.contentType==="MediaPlane"}function l$a(_u){return new Promise($u=>{_u.model.loaded?$u():_u.once("modelLoaded",()=>$u())})}const r$b=(_u,$u=16.666666666666668)=>{let Tu=null;const Cu=_u;return(...Pu)=>{Tu&&clearTimeout(Tu),Tu=setTimeout(()=>{Cu==null||Cu(...Pu),Tu&&clearTimeout(Tu),Tu=null},$u)}};function i$a(_u,$u=200){let Tu;return function(...Cu){Tu||(_u.apply(this,Cu),Tu=setTimeout(function(){Tu=null},$u))}}function o$b(_u,$u){if(!$u||typeof ResizeObserver=="undefined"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Tu=new ResizeObserver(_u);return{observe:()=>Tu.observe($u),unobserve:()=>Tu.unobserve($u)}}}function r$a(_u){var $u,Tu,Cu,Pu;if(!_u.stickType){const Ru=(()=>_u.pointType==="PointTag"&&_u.dimensionType==="3D"?"3DPoint":_u.pointType==="PlaneTag"?"Plane":"2DPoint")();_u.stickType=Ru}if(_u.contentType==="VRLink"||_u.contentType==="PanoLink"||_u.contentType==="Link"){const Ru=_u;!((Tu=($u=Ru.data)==null?void 0:$u.icon)!=null&&Tu.url)&&!((Pu=(Cu=Ru.style)==null?void 0:Cu.point)!=null&&Pu.url)&&(Ru.data.icon={url:"//vrlab-static.ljcdn.com/release/web/test.09dee741.png",steps:28})}return _u}var q$6=Object.defineProperty,c$c=(_u,$u,Tu)=>$u in _u?q$6(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,i$9=(_u,$u,Tu)=>(c$c(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const r$9="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",s$8={};var d$c=(_u=>(_u.Default="default",_u.GetAudioDuration="getAudioDuration",_u.PlayAudio="playAudio",_u))(d$c||{});function L$9(_u,$u){const Tu=($u==null?void 0:$u.namespace)||"default",Cu=s$8[Tu]||(s$8[Tu]=[]);let Pu=Cu.find(Ru=>!Ru.realSrc||Ru.realSrc===r$9);return Pu||(console.warn("\u672A\u627E\u5230\u7F13\u5B58\u97F3\u9891\uFF0C\u5DF2\u65B0\u5EFA",s$8),Pu=new u$9(r$9),Cu.push(Pu)),_u&&(Pu.src=_u),Pu}function m$8(_u,$u){const Tu=($u==null?void 0:$u.namespace)||"default",Cu=s$8[Tu]||(s$8[Tu]=[]),Pu=_u-Cu.length;if(!(Pu<=0))for(let Ru=0;Ru<Pu;Ru++)Cu.push(new u$9(r$9))}class u$9 extends Audio{constructor($u){super($u),i$9(this,"preload","auto"),i$9(this,"crossOrigin","anonymous"),i$9(this,"realSrc",""),i$9(this,"inited",!1),i$9(this,"removeDocumentEventListener"),this.realSrc=$u!=null?$u:"",this.muted=!0,super.autoplay=!0,super.addEventListener("ended",()=>{this.src=""});const Tu=()=>h$a(this);document.addEventListener("click",Tu),document.addEventListener("touchend",Tu),this.removeDocumentEventListener=()=>{document.removeEventListener("click",Tu),document.removeEventListener("touchend",Tu)}}get isBlankAudio(){return this.realSrc===r$9||!this.realSrc}get src(){return super.src}set src($u){super.src=$u,this.realSrc=$u,this.removeDocumentEventListener()}get muted(){return super.muted}set muted($u){super.muted=$u}clear(){this.currentTime=0,this.src=r$9}}function h$a(_u){_u&&(_u.inited||(_u.src&&(_u.inited=!0,_u.removeDocumentEventListener()),_u.src===r$9&&_u.play()))}function c$b(_u){if(_u)if(Array.isArray(_u)&&_u.length===4){const $u=_u.map(s$h);return c$l($u[0],$u[2])}else return s$h(_u)}function y$e(_u){if(s$9(_u)&&_u.matrix){const $u=new Matrix4().fromArray(_u.matrix),Tu=_u.data.mediaPosition.map(Cu=>new Vector3().fromArray(Cu).applyMatrix4($u));return c$l(Tu[0],Tu[2])}else return c$b(_u.position)}function i$8(_u,$u){if(_u===void 0)return;const{min:Tu,max:Cu}=$u!=null?$u:{};if(!(Tu===void 0&&Cu===void 0))return!(typeof Cu=="number"&&Cu<_u||typeof Tu=="number"&&Tu>_u)}function i$7(_u){return _u!=null}const e$6={globalConfig:{visibleConfig:{followModelVisibility:!0},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance",distance:{max:5}}},tag3DConfig:{ratio:.0035}},contentTypeConfig:{"Any-Audio-plane":{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},Link:{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},VRLink:{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},PanoLink:{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},MediaPlane:{unfoldedConfig:{keep:"unfolded"},visibleConfig:{alwaysShowWhenMovePano:!0},initialData:{autoplayConfig:{autoplayCarousel:!0,autoplayVideo:!1,autoplayVideoInCarousel:!1}}},MediaModel:{unfoldedConfig:{keep:"unfolded"},visibleConfig:{keep:"visible",visibleFiveMode:["Panorama","Floorplan","Model","Mapview"],alwaysShowWhenMovePano:!0}}}};function i$6(_u){if(_u.length<3)return;const $u=_u.map(s$h),Tu=$u[1].clone().sub($u[0]),Cu=$u[2].clone().sub($u[1]);return Tu.cross(Cu)}function d$b(_u,$u,Tu){const Cu=new Plane().setFromNormalAndCoplanarPoint(Tu,$u),Pu=$u.clone().sub(_u).cross(new Vector3(0,1,0)).setLength(.01),Ru=new Vector3(0,.01,0);return[$u.clone().sub(Pu).sub(Ru),$u.clone().add(Pu).sub(Ru),$u.clone().add(Pu).add(Ru),$u.clone().sub(Pu).add(Ru)].map(Lu=>Cu.projectPoint(Lu,new Vector3))}var l$9=Object.defineProperty,f$9=(_u,$u,Tu)=>$u in _u?l$9(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,g$d=(_u,$u,Tu)=>(f$9(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class F$6 extends n$e{constructor($u){super($u),g$d(this,"tagCacheByPanoIndex",{})}getCache({panoIndex:$u,id:Tu,key:Cu}){var Pu,Ru,Lu;const{five:Bu}=this,Vu=$u!=null?$u:Bu.getCurrentState().panoIndex;if(Vu===void 0)throw new Error(`TagCacheController getCache(): fivePanoIndex is ${Vu}`);const Ou=`${(Ru=(Pu=Bu.work)==null?void 0:Pu.workCode)!=null?Ru:Bu.model.uuid}-${Vu}`;let Du=this.tagCacheByPanoIndex[Ou];return Du||(Du=new Map,this.tagCacheByPanoIndex[Ou]=Du),Tu===void 0?Du:Cu===void 0?Du.get(Tu)||(Du.set(Tu,{}),Du.get(Tu)):(Lu=Du.get(Tu))==null?void 0:Lu[Cu]}clearCache(){this.tagCacheByPanoIndex={}}removeCache(){}}const e$5=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1;navigator.userAgent.toLowerCase().indexOf("android");const o$a=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,n$9=e$5&&o$a;function r$8(_u){if(_u.length!==4)return!1;const[$u,Tu,Cu,Pu]=_u,Ru=$u.distanceTo(Tu),Lu=Tu.distanceTo(Cu),Bu=Cu.distanceTo(Pu),Vu=Pu.distanceTo($u),Ou=$u.distanceTo(Cu),Du=Tu.distanceTo(Pu);return Ru===Bu&&Lu===Vu&&Ou===Du}var b$6=Object.defineProperty,m$7=(_u,$u,Tu)=>$u in _u?b$6(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,x$a=(_u,$u,Tu)=>(m$7(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class M$f extends Mesh{constructor($u,Tu,Cu){if($u.length!==4)throw new Error("QuadrangleMesh: Invalid number of points, it's not a quadrangle");const[Pu,Ru,Lu,Bu]=$u,Vu=c$l(...$u),Ou=[Pu.clone().sub(Vu),Ru.clone().sub(Vu),Lu.clone().sub(Vu),Bu.clone().sub(Vu)],Du=new z$8(Ou,Cu);super(Du,Tu),x$a(this,"name","QuadrangleMesh"),this.position.copy(Vu)}removeFromParent(){const $u=this.parent;return $u!==null&&$u.remove(this),this}}class z$8 extends BufferGeometry{constructor($u,Tu){super(),x$a(this,"name","QuadrangleGeometry"),x$a(this,"points"),this.points=$u;const Cu=Tu!=null?Tu:r$8($u)?64:1;if($u.length!==4){console.error("Invalid number of points, it's not a quadrangle");return}const[Pu,Ru,Lu,Bu]=$u,[Vu,Ou,Du,ku]=[new Vector2(0,0),new Vector2(1,0),new Vector2(1,1),new Vector2(0,1)],Fu=[],Nu=[];Fu.push(...Pu.toArray()),Nu.push(...Vu.toArray());for(let zu=1;zu<Cu;zu++)Fu.push(Pu.x+(Ru.x-Pu.x)*zu/Cu,Pu.y+(Ru.y-Pu.y)*zu/Cu,Pu.z+(Ru.z-Pu.z)*zu/Cu),Nu.push(Vu.x+(Ou.x-Vu.x)*zu/Cu,Vu.y+(Ou.y-Vu.y)*zu/Cu);Fu.push(...Ru.toArray()),Nu.push(...Ou.toArray()),Fu.push(...Lu.toArray()),Nu.push(...Du.toArray());for(let zu=1;zu<Cu;zu++)Fu.push(Lu.x+(Bu.x-Lu.x)*zu/Cu,Lu.y+(Bu.y-Lu.y)*zu/Cu,Lu.z+(Bu.z-Lu.z)*zu/Cu),Nu.push(Du.x+(ku.x-Du.x)*zu/Cu,Du.y+(ku.y-Du.y)*zu/Cu);Fu.push(...Bu.toArray()),Nu.push(...ku.toArray());const Gu=[];for(let zu=0;zu<Cu;zu++)Gu.push(zu,zu+1,Cu*2-zu,zu,Cu*2-zu,Cu*2+1-zu);this.setAttribute("position",new BufferAttribute(new Float32Array(Fu),3)),this.setAttribute("uv",new BufferAttribute(new Float32Array(Nu),2)),this.setIndex(new BufferAttribute(new Uint32Array(Gu),1))}}function m$6(_u,$u){let Tu=!o$a;const Cu=$u!=null?$u:document.createElement("video");Cu.preload="metadata",Cu.crossOrigin="anonymous",Cu.muted=!0,Cu.loop=!0,Cu.playsInline=!0,Cu.autoplay=!0;const Pu=new VideoTexture(Cu);Pu.minFilter=LinearFilter,Pu.magFilter=LinearFilter,Pu.encoding=sRGBEncoding,Pu.metadataLoaded=!1,Cu.src=_u;const Ru=()=>{Pu.metadataLoaded||(Pu.dispatchEvent({type:"videoLoaded"}),Pu.metadataLoaded=!0)};if(o$a||(Cu.onloadedmetadata=()=>{Ru()}),o$a){const Lu=()=>{if(!Tu){if(!Cu.paused){Ru();return}Tu=!0,Cu.muted=!0,Cu.play().then(()=>{Cu.pause(),Cu.currentTime=0,Ru()})}};document.addEventListener("click",Lu,{once:!0}),e$5&&document.addEventListener("touchstart",Lu,{once:!0})}return Pu}const A$b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",a$8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAACoCAMAAAD6pITnAAABQVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvr68AAAAAAAAAAAB5eXkAAAA8PDzr6+sLCwuenp4UFBT////8/PyLi4umpqZycnKxsbHMzMykpKTy8vKoqKhcXFwpKSmwsLD+/v7k5OSCgoLw8PDo6Oi0tLRkZGSrq6syMjL6+vrn5+eYmJj29vbd3d3Q0NCwsLDDw8Pz8/PT09P09PSwsLB/f39OTk739/fh4eHY2NiFhYX4+PjGxsZkZGSkpKS3t7eRkZG/v78eHh6CgoKKiorr6+uysrL+/v77+/vb29v9/f2wsLCysrKxsbFdXV39/f3u7u7t7e3j4+OoqKj5+fmrq6vp6elqamqVlZWtra0+Pj7w8PDW1tbJycnNzc27u7v29vba2tqXl5cjIyNsbGzf399ubm7d3d3///8pT4ZyAAAAanRSTlMzAAYIDA8KFRIccB8XIlIZPr80ZDb88FppT2iLaNJrRzpW+LNWzrp0Sm086rdg26WST4LVltltU0Pfq51X44UoJHdcfjcuHMFF++6i82RiWxX2x8SvSOc7vEs1LiHKmYiOe92gLCMfqE2kqsY2dQAAEBhJREFUeNrs2MFqq0AUxvHT28xdnEWQGNBKMHGnARdutIsspARxU+NOiu//HrdUZFozYTxMbltn5v8IPw7fxMCD7Vuy0OIs9FKz0OIs9FKz0OIs9FKz0OKWCf3nl/fw37sz9O8n/Tl+dWj9hO/nrQ5tCLICtiq0HPlRi1Sw7w+tIfA0ZWt1aLHxX2165NGt6dByZqHwasEJvRWoVaAnyjrwivqKTaVWh/6iPCFm2sS5OTaBWh16osyRq7Krs+jSBDkuvDxoLlFWd2XFsbm1gJoMTWcezrjqswbf8930xTsV64VXnLyX1PXxvSbrq+G41ag5NJGZK7d9/Yroe+u9swWt2jr7tecjvtZ9y63p1HRoAXOZ5Rh68QG07RB7IeZZOaHm0lRoOjOr6gD9wgHtcwofg7piCtRAdebMZYaJ9wyG9OwlmJWcmioN5HMemSMMnzQbZclkP4UYjdTkowai8zgaF/TfNmBYmzcfL+OACKTVoSfMbY1+bBzzB3XsY91OqAnQFGe26gMsjBqNz20LDPoVI0sDZTaGc44wPYLBHVOMhqOmzAfMdB7PmZVBEoPhxUlQsuGoZ0sDbTZYh67R5zx0dLFjkvkgQl/NxsnIR3Da5nQ1HwRoiTNjVZPswfbRPmkqxuZLA8U5CA343J6bEwYUaZjvXOY7jf87onfY5aVEmgLNndE9g+1TZxe5NAFa5pwa+5Fyq206XxpmOle5a52vpd28mikNsoEe38Gd3Q1B5934IspmGmY5t01o30Fhh7BpJ9JkaO7MosT+rruRk0SMS0ugZc4d2u+Um+2xmyMNsoeQMVbiP/bMhSdtKIrjJ3sEcrMsFagFpqC4ifIaviY4MAONPHQ6xDgX49vodr7/B9i5lnpb0setddFFfonaXhDw58n/nNvWYIQjNfaNJImG6Fe0COhkdHR9w4VINPnDu6RBJqBH1+tcycnENHh6PmYv/vqzF3Ps2GLav+i3PDiKMMKDIg+Pt+6iPQo63Gaj4PAkx9phc0nLi6YGqnveYqswwpNVtqWbJnGSoq3BEd6Ljy5xSBCL74XN4SEpWgTHt1EnlO2H30R4SIm2FvR0fDRCSxGJT7uXNHgU9C8YIcUvj5IGl4IOhxdSo4KWJJJaCIddShrcCnqLJWCEJAm25VbS4FbQ7fkY+GF9vzUPL5XYfNutpMGloMNJDfxQRuLgxe5vtGTYpaTBpaCvWQX8cIicahNeJhV2bSlpGdF6QS/EwReooy5HgvdwTdMUuSaUIBzfMJ3NZjVwYKr52/LcjULUErrrRQX8EF/QS1pOtCjoH19WfYo2+BR4KCwgIgMZFCQchWQRccam+LTs+UxJxSUQnCLiEZg4p4Vt8MHqlx+ipF1FWwv6mCkPFI07F89MdCQ+zxoXG+vlq4Ojk1IPDRbhnvcqopoGwSwiboAPFHZsKWkv0UYrbKfAH2iioDwr0VBCWy5NY9UYnZ8OtZwE+CHVNtqht2iRHKHvWgDReBgNKrqwbOV9ENHLOIR6eHLVsGR0kVbzQnyaTrvgC+17yDE7wDE5bthcENGofo0FEz0MCyI6gZ3eeL5eXVnKkM7Fid82H+4EERtgcEFnY36vLN04Zgc4JscxmwoimlhK/BvRxc8m1pBYM68kHJthDogq4goQMyfrFcPphzsKSA/dHfEWc0RnrUWBRBZOsWPH7ADH5KDhLqBo7C3+E9Fn6ErUXnSMjfUqQnS6gzgJOis4RAkgl0ErCakBT2SHt+g3uuhdLahoYqzycNHlqJWKT9EH/X6fK8z3+wd0GqXDZSGaT3MTLqIb+ADR2q4u+o276FcW0ex9YNFEPvXIU4e86LpYqgPRQjyMGKI3u4h9cBE99hDR75lJNOEm2kiOG5YOIlrwefOxRacnTDAkmHlFcRDNB2VmiN6gVe0+YCiC6dmZRYMsJFS+xS1z+jx+ymUFvEmzGyM7PESLiL5mSiDRglLtKeZoq+hKniB3vbvvaj7f49+JbRgwSQ+CYE3sE//QYVF2y3ItQlpS9E8WCyZakPkAUjABn7S+MhOaf9EKwQu3QD8r6MCBveh0R2RQiw5/gxQx9lNStIjodhz8go7sS8WQis7MBtsZeotesoi+Ne1WqnQsO+nG207dEOyn6FBoIRpctKCbfVrRue07jhC74/TFO6G+0jA1xB0wKKpI1PQq7SCOgyTRhVDIfpIGh14Ymi4GFW3lIPd0og3i46hO8GbY3BF5JhJ9J6UzMVVFzhVwEsi7pyTF6ZBDNwSHiA7tNR9XNFabEqI7H2yYMYs+H7PSR6I/tFi2FV1WEcv61DHRGc6zLt4zvm2aVWBevIQ3zT0h+rWc6F3tkUVjp+wtOgM2NMyiCyjBmFV0hP8ttRYfJIzxrqGS0GUF7smYRPPfWjJmjQ90sA6SaLu+RSdrjyyaWH8a0azUgmYLiVbOEA3ZHaSw2DaqOoKCLpxiq0Lmb4HYp5UmSFJLyokWQ8e7L6uPL3rpSUR3yOy+HroR00WlxAoSna8i6i/PiC4XDX8UmKXSzgHM8U8Vk7/J8m4wdvz3ouc+WikiURxanDP/KpFHInMBFqZmkDgbvKyRxHUu2sjmc/3Wfh/+oejnGh0+po7E+YmKnN5ZgdueHCaDeLg56GJ8hzQQndfDJE9Hm3Dp64ZWLekl2npJKRR691ybobTojUvjfW/TUKnX0YbCacN0mf/MIhqueGnwf0BGAflm+C4UuhdNeIt+mvFO/WRDdVj0Gi1u2oqmB2bETWwdfWEWbViz3ANngzuFh/pSOoNYv+UtFKRp7vkW/Zw3LJN8U2wrmo5LRnEhkbGILnNK9JQycWoRXTBmizzZBZ3PtMY/0zxIU5z2Lfo5b8GlREfGM4VUwyxaBc7RYChRLKL52FwZbFyqIEpatHDJLbhv0X/ZOaPetGEgAEd7K0LLYBAadQXagcogndAQEiorFQsoCs0eKAG1qHSsPKzL//8By9mxEzMy26jNHpp7gCgoEf7sO/vOd/4PQSXtH+JKg1YO/btnoqCnxDRr4RsgQCo1oCGoJA062TApX6RBg7CgPR1k5vc7fJeioHVqiqeRIXwnOaAhTCoNOvnAf20Q17X59ad9QQtOhj9gQ5G44scEG/ImHfT3hQP/0qCT38qyvMVghM+kxPZubdziHuh4k8rLggbPsUxc8Zuge4NHWsT9EdrK2gLNd1jUpDdnzz3s87a7RU8nAXe4KFxC458D9CkILCLRRQR00yZzYTN04F2aNyas228zqrRnqCadblAPtHdDXMg2UedDeFN7f9D8yRCF62gimEEXd97iAT7rVWF/RR509jkSaMTCizS04ACwMlnMNYpAjbTZ/vaCoA0U1wD5Gtyt5JA+Pil9NF6qohnSWQJaOEyaXSaaEvbukuRyVn2dnlDDWUO3HkGBRwzoZh4LBp0PRBZ0mLHrYUts4r9haogzNOAjcmuF1LuaWWal49HZZJMcDTygQVaE7xcS6FFKNjIjIeh4YUFvGBvdAfERavDdDUHDb/WwvweNGfay0CxVWMG1vRZLctwDtJpk2u5PeOSIugn4skG3k5ACn+pyoC/quRsYqhveqqOEI4vW8Wxlo8spbkEtULauqNNV+q4Kgn4TBT1PLhH9zoExlVeo9lp0ox+b5uoCmioH+iG4YfJAX0OHFpQL8oLCZxSLoi1oGuQ9HCnPKWj+LjhdSKvL5EorCv2iN9VJTBdekCfZFb/DUKkxioC2cruEccGDqGGBgu5H5ZqCHvkgh3STYPEE+ZDakFE4B/qe764sATQ33WB72XGfZLHQh9YRpW57jy7q44w3uSXjaKUNd646WImCbjqOo3V/9ZRwMgyFXXX0YW3Xc636zDWhN91tO6F3tIrA9sp93KIDQMcb6T3L3+y9yt964UPviSZV9UhTIw09Gwxi3HX/h2FMXM00Wd0f+TfOKfWt5cPfOlcSWdyFlkMKtGxBZ+vVF3QKg2ZnQzUtUZYrUVYBtFDaLmuk1bls0f3KKiuvVfyie5Ux0b5wSivokL5Kj5EQFz1zBQOaU1qx20gfnKQHo4gfjHJywJpofvlbaDvG6VE/4kf9jMFyCJe/sbbjID28SvjwKjygOQWdcbZDHafHsf1h74xxGISBIJjWdhOFF6RLeAOSm7ikpEH+/zviQ4LTWTbrB+w9YbRaBBI7Y/cpgW40B/rpXiPNgcHRgUENNPjpvt0dkZOZY5OZ0TQHAl13RyG9cQQW3+y3wrnZHAoaRDpz1nhk1jjXgcag60jvfB7iJ+FuAo1Ba3dopB2n5/H0vNNAd+fYYKQzZQpIppBRoAU0jnSiHuReD5JgoAU0jrSj8OZeeONgoAU0jHQhTYVT955HQYNAg6FuLY+8UkrWk5KtWYsDDHWDSAvpSM1eT7MXtTjA9DyOtJCmOLItjhTOONBYD3KRTlShtlSo6eLc0INg0LY8jpp2iXLf6n6TcJaCNsXRB43LQ0iHRF11ratOQTjD4sCgLelIAbsVsEfLGYBGpLWmQ1y/fHM531O+awymoLFmD9f0STq//cLvHuVei39n4QwLelyFakiHzU/8lveYJ78Fw3lAhQojbUn/27Gf1kaBOIzju2kWktH8oQ1oPaTrzSzk4CX2UBAKHiUnKfXu+38Lu78Js08rA89h2sOMfl+B82F4RJvsNPn/08Upa+BsGWgKzaX1fJwnfan/nPVsMGfEoe3SUZ+parIfL4dKZX1kdybQiErHN+mhU2kxyZfifZGqbrg5x9yZQ2M8xtJ6qKP6qtL3yVHfv6fqWkd6nsfOGA4GzaVXRlqom1wdHyc1IIfHo8obYTbOK+rMobl0VOfqlDz/mEjPyUnldUScHaBH0p+pu0yl1QQ+y/dVqrLuE/PY2QGaSGvqoSkv6pgUAf9t+l0kR3Upm0EzU2cOzaWt1Juh71ql0mT7tA9ssg/7p22SKtV2/bCxMFudOTSXXkIa1GK9qfuyVf9KH86vyUu19bzqJXk9P6Ryorbs640ogxnOS4szg+bSmA9QG2vBHurmrSvza5tdlOddsvaal91bUw+CbJTBjNmAM4Xm0pKWxnwYalgLdnBFH5UNM2ZDOy/gTKC5NObDSm2sA/KO0NrCjNkgzgSazIdIG2pYi3ZgrddQBrM409ng0Fwa1P+tDXYY4msJyFAGM3Em0ETaQg1rwRbugNrpYijbmeHsDg3pMbVYA1u0db6q75AYA1mUR8zMmUPzS22oYW200c7T4lswhjKY+XXm0Fwa1LDW2Cj2OpxDkKEMZpszh3aghrXhDqiVCcqE2Rka0iNqWEPbZ3U8O4yhDGbi7A4Naqu1cAfTLwRlwuwAzanFWmsH2VISZcLsAE2pYS3YwXHLaYAMZc7sDg1qWBtszR1Y5lx3UCbMDtCMWqyBHQI5TgFkKBNmB2hGDWvtHUx3aOHA7AgNa2gH2QI5KLtBwzpA8AVyVHaHBnbwOeA4Qk8I2wHla6GD9f4yFA7tnh/8P789gZ6zNUP72gxtb4b2tRna3gztazO0vRna1/4CjIBfFd68JpIAAAAASUVORK5CYII=",g$c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAAC3aM1AAAAKo0lEQVR4Ae2cW2wU1xmAxxcutqFxRJ04jWW5NBelIJUKcX1ARaWoAp4QEiAFaFBAPIBElDcQEkg0Sh6IokjNQ1NxKw9IjaUg1X1IXQl4AIGEQh4IFQHkGhsMhnKLL1Bj9//G+4/Pzs7OztpzW9u/9O+5zJlzznz7n/+cMzO7ZVY6ZLp0o1qUsCqjlRJWGCpR64WhAxLvy2i/hL2ihIlKWUKtT5V2a0VfyijpMOS5VPI4o48kJB2rxAkUa5slWicKyDgEuN2iD0Sx7sglDqAM4ddFfypaHvkVeTcwKNn3RTtFcRORSZRAa6TXDaJYZZoEa+0Q7YmiU1EAxR82iWKRaRYstk00VD8bJlDqqhdtFMVfloLgV9tFu0SHwuhwWEBZ7rwlOiOMTiVQx4/S5jXRMS+7wrAkfOQvRYFaqoKbekUUoGOatMYCFOv+uWiTaFKztzQdmnAN+H02FCy3RiWjBUrjb4vyrY43mSkXxArlv6JF+9XRAOUbfEeUnc54FdbOPxEFKmvYwFIsUGDOFS3VyScwGCk4TfRlUZZXgaEWA5RhjmVOBJhymbZMkU9cAFADDf+gQJmA8JnjeZjL5XkKlsqdMHZYBSUoUGbz8TgBFQSUKYBPxd1xB8tXggBlndnkW8vEOMjQ556r7zq10PqRxfobE4NXoKuEhe8Gxg8ofpPtZBArDtSbcVAIFjCBjaf4wXpNznjV86yJnck2lccv7P9zJJ+FchJ3jSbFmwBsYJQj+YA2SUk/682paIJlwKbJ65q9gLKPTfvNYa9riTsPRrDKEi+gPLaIXLZs2fJae3v7oVu3bn129OjRJZE3GE0DOazcsxUL2F9H0/ZIrYsWLao5e/Zsy9SpU6cMDQ1ZZWVlQ/fu3bu2devWD1taWh6OlCyJ2LfSS2dt6gbKOivyHdGZM2c2LVu2bMf9+/etvr4+q7a21poxY4b1QuTSpUt/Xbx48ZclgXK4k/ckuK79NYc8jjYW3ykAeTZvPX/+3MJCHz58aN29e9caHBysEOv9w5MnT77ev38/671SEJg5E7gJlC2mmY71YoALVODW1NTU7du37/CNGzcOzpw5M7E+BQRA/5xH5WZnbasJWEkkxbDWp0+fWnfu3LGePXtWNnv27OXd3d3fNDc3/zaSBsOr1GGnQFmkxvV6TMHLEFdq4V8fPHhgVVZWVq1du/aAgD28evVqbvimUWBnL/QVaOruc8rMb/X391sy+1s9PT1ls2bNevvUqVNfX7x48f00EpU+2QwVaGqsE1jAVCWNG8C3yqRVOX/+/Pdk0mo+cODAmxxLkdgMUwMUgIiCNNPl5eXWwMCA9fjxY6u3t9eqrq6u37t37+GbN2/uS9Gk5QDl/p7nRt++wpg+Mgt8ByjNKlwzLpOVbbHiZ8sbGxt/L7717ydPnlwWUzf9moHhdCyU5yWpEgWpIZ1Ti8VaETYEwK2oqHhp3bp1H8mS6/OVK1cm7bqq6Z3vHWi79xF/KDhCBebOM9MaZzUAVAmZtObLtrX5/PnzGyPurl/1toWyf09UGO4IoBCgKjTSmq+h5mkZ/CsqUrVw4cKdMmkd37NnTxMZMUsVFpoIUIXIBSsYDRWCpglNyGY+ZdWqZRVgb2Vlp/WLgwcPHpWd1gcxT1o20Eq9gBjDQS+g2r4CJE1cQzdIrzT1ZuqeIjutdTJpfXXs2LEFdiXRf1Rioc7GPvr2hluQC0bshGl5xDXNQS9g5Gk5LUOo52lIOWTatGmvbt68+VPZzv5x6dKlUb/1UpEIUBmaDlAvaIBQcPmOU8YNjzxEYQ6n7M/y+vr637S2th5paGjg9ZqoJBmgStO8cBOcguKq3flKwjzXXc59TM+pqqr62ZEjR36n6QjCiiT8Jz7OZqqwAIiYIPSY5usxhU1azzPztJxdofdHoJe+vE8tnMuVxPKDKFdXsoByzA1FgZqh1mFCU6jkaVzLuUPZDLRt27btX+78ENMvEgEqNO33LSV0hjQXpaBMMJrHcYXuFSfPRwY7Ojq+Wb58+fa2trZQf0bjavMFQz4xCwUQa0egKTiFSVoB6vF8IRel57kukC3qrRMnTny8ffv2y+5jEaRtoPYWI4LK/ap0/Fg+SOQjZmiWNSvXMmaefFHPrl69enLBggVfClSnPbNMBPEBhrzzCDSCBjyrZNnEAUCYlqXA3MfUUjVfy5FvHuM4IvdOv9u1a9e7c+fO/XOMMGm6jyEfO1BmJBEbKKFCUUtTYPTQL85xU2Q//0geUX+xYsWKFjM/xrgNdMy/HhtFhx0LNc9VeCZgjVPODVzLyyEmndb169cfOnfu3I9mnTHH+7FQ3sqNVcQq7VleGzXA5FikllGwlCWOEGfSOX78+Mc7duyIY9LR7uQLewGKhbKUiPOuvT3k6ZUbFJAQhWyGmp8J+69cucKk85eY/STNewkM+4e/6jH8FM+r5kJ55qRkAtTzyFMrJE/LKHx5tnR5586dm2TSiXMG1+7lC+2fM2KhCAnnYb2dE+1Hlg9VUApSARKaefJFPDp9+vQX8qgjqUnHj0oW0Ed+JcM+ZloodZsAtS2FKc+MOD54+/btf27YsOHThCcd7Z5XaDNUC2X8QziWh1wCyFloK0zTSskjjcozo3bZ6XySkknHCyR5sLO3tAqUzG7RWIDqLA8wRKESV5CSZ086S5YsScukQ/fyCexs0UmJBD+9y1rO2CUi+NAhb1YNVHmPyQYqD9ku7969e9O8efPSNOmY3TXjMHN+tmhaKDdJ+JFo5C/cdnV1ddIjrJGdkoKUx8HsdP60atWqf3C8RARmzg2m4UXfSM9jeSW8rq6u8vr163+TV8JfyQx3e9LZuHHjoQsXLvSMdKckYt9KL53tu/sBHXeeeJMk0rdJ5P2kQXkvqXXOnDnlEr8pTyUPrVmz5qvOzs7/lQTCkU4y1LtGkjIfmIlMnJ+K/MojfzIrl8B3kpU1osxJSYtTAL8wKf4EYJQFk+JeQMlvE3UcLRmTkkUANm1ZOZmE24dqGU5gOfCyZkyGWQT+IykW8zmSz0IpiLNN8t5iTmdTkgGTrInI7JcfULaH10Qnh/4IMVjAxNk6jxwajuUb8lqOZRT3S/lx06RY1g8C4akfiEJAOZdFKzsq/nNjIssdufjbhQAEAUodOGDWp4m8S0oHEhb+YexGkD4EBUpdVMrfl/E/RhNJnsjF/ls0r980YRQDlAqBylIqylcCzf4lHecB5veigSfmYoBycaxN2SHgT8e7pWKZwCzqzZpigUr9DlRuoIxXn8pIZJgHtkwpa8togHIiw587LeNx9mc2ZwIK5DOlXJaMFqhWwoMp/Ax+1W+ToOXTHGKNrDMLLo38LmKsQKmbdSrWil+N82UJaS40YTuJv/RdtAdpzet+aJDzvMpQV71oo2gYX5RXG2HnYZXtouzNRzXE3R0KE6jWjZU2iaZ9u8pqpU3UfvwrYSgSBVDtGDurBlHn/zj0QMIh7qlDNOfmcBj9ihKo9o+l1euiWGxSE5eun3na6jxQk3joEgdQ7TR+FWutE43lhQpph3sQvISAVRa9ppRzipY4gZqdw8/WigIWDWt1gD8EIsqSLlT/KPUVlKSAujs2XTLYeRHiIlA2DVi1qkRtK8PSULaEDF+Ue7ashwkTlf8DQc/cITdx9+UAAAAASUVORK5CYII=",U$5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==";function H$6(_u,$u,Tu){if(_u==="fill")return $u;if(_u==="contain"){const[Cu,Pu,Ru,Lu]=$u,Bu=Cu.distanceTo(Pu),Vu=Ru.distanceTo(Lu),Ou=Cu.distanceTo(Lu),Du=Pu.distanceTo(Ru),ku=Bu,Fu=Ou,Nu=ku/Fu;if(Nu>Tu){const Gu=Fu*Tu,zu=new Vector3().subVectors(Pu,Cu).multiplyScalar((Bu-Gu)/2/Bu),Hu=new Vector3().subVectors(Ru,Lu).multiplyScalar((Vu-Gu)/2/Vu);return[Cu.clone().add(zu),Pu.clone().sub(zu),Ru.clone().sub(Hu),Lu.clone().add(Hu)]}else if(Nu<Tu){const Gu=ku/Tu,zu=new Vector3().subVectors(Lu,Cu).multiplyScalar((Ou-Gu)/2/Ou),Hu=new Vector3().subVectors(Ru,Pu).multiplyScalar((Du-Gu)/2/Du);return[Cu.clone().add(zu),Pu.clone().add(Hu),Ru.clone().sub(Hu),Lu.clone().sub(zu)]}else return $u}else return console.warn(`objectFit: ${_u} is not supported yet`),$u}var i$5=Object.defineProperty,o$9=(_u,$u,Tu)=>$u in _u?i$5(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,r$7=(_u,$u,Tu)=>(o$9(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class s$7 extends ShaderMaterial{constructor($u){super(),r$7(this,"transparent",!1),r$7(this,"blending",CustomBlending),r$7(this,"blendSrc",SrcAlphaFactor),r$7(this,"blendDst",OneMinusSrcAlphaFactor),r$7(this,"blendSrcAlpha",OneFactor),r$7(this,"blendDstAlpha",OneMinusSrcAlphaFactor),r$7(this,"vertexShader",`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `),r$7(this,"fragmentShader",`
    uniform sampler2D map;
    // \u7EB9\u7406\u5750\u6807
    varying vec2 vUv;
    void main() {
      gl_FragColor = texture2D(map, vUv);
    }
  `),this.uniforms={map:{value:$u}}}}var b$5=Object.defineProperty,x$9=(_u,$u,Tu)=>$u in _u?b$5(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,o$8=(_u,$u,Tu)=>(x$9(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),u$8=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});class P$9 extends Mesh{constructor(){super(...arguments),o$8(this,"name","MediaPlane"),o$8(this,"src")}removeFromParent(){const $u=this.parent;return $u!==null&&$u.remove(this),this}}class z$7 extends P$9{constructor($u,Tu,Cu){super(),o$8(this,"name","PanoTagPluginImagePlane"),this.src=$u,T$7($u).then(Pu=>{var Ru;const Lu=new URL($u,location.href).pathname.endsWith(".png"),Bu=new MeshBasicMaterial({map:Pu,transparent:Lu}),Vu=H$6((Ru=Cu==null?void 0:Cu.objectFit)!=null?Ru:"contain",Tu,Pu.image.width/Pu.image.height),Ou=c$l(...Vu),Du=Vu.map(Fu=>Fu.clone().sub(Ou)),ku=new z$8(Du);this.position.copy(Ou),this.geometry=ku,this.material=Bu}).catch(Pu=>{console.error(`Imageplane error ${Pu}`)})}}class G$6 extends P$9{constructor($u,Tu,Cu){const{videoCoverSrc:Pu,objectFit:Ru="contain",playButton:Lu="withText",paused:Bu=!0,videoTextureMap:Vu,ImageTextureMap:Ou}=Cu!=null?Cu:{};super(),o$8(this,"isVideoPlane",!0),o$8(this,"name","PanoTagPluginImagePlane"),o$8(this,"videoInstance"),o$8(this,"onVideoReady"),o$8(this,"objectFit"),o$8(this,"buttonSrc"),o$8(this,"videoCoverSrc"),o$8(this,"domEvents"),o$8(this,"disposers",[]),o$8(this,"domEventsListenerTemporaryList",[]),o$8(this,"cornerPoints"),o$8(this,"videoMesh"),o$8(this,"coverMesh"),o$8(this,"buttonMesh"),o$8(this,"videoTextureMap"),o$8(this,"ImageTextureMap"),this.cornerPoints=Tu,this.src=$u,this.buttonSrc=(()=>Lu==="withText"?a$8:Lu==="withoutText"?g$c:typeof Lu=="string"?Lu:g$c)(),this.videoCoverSrc=Pu,this.objectFit=Ru,this.videoTextureMap=Vu,this.ImageTextureMap=Ou,this.position.copy(c$l(...Tu)),this.videoCoverSrc&&Bu?this.addCoverMesh().then(()=>this.addButtonMesh()):this.addVideoMesh().then(()=>{Bu?this.addButtonMesh():this.play(!0)}),this.addEventListener("removed",()=>{this.remove(...this.children)}),this.addEventListener("dispose",()=>{var Du;this.domEventsListenerTemporaryList=[],(Du=this.disposers)==null||Du.forEach(ku=>ku==null?void 0:ku())})}play($u=!1){return u$8(this,null,function*(){this.videoMesh||(yield this.addVideoMesh()),this.showPlayUI(),this.videoInstance.paused&&this.videoInstance.play().then(()=>this.showPlayUI()).catch(Tu=>{this.pause(),console.error("play error",Tu)}),this.videoInstance.muted=$u,this.render()})}pause(){this.videoInstance&&(this.videoInstance.pause(),this.showPauseUI().then(()=>this.render()))}initialDomEvents($u){this.domEvents||(this.domEvents=$u,this.domEventsListenerTemporaryList.forEach(Tu=>this.addDomEventListener(...Tu)),this.domEventsListenerTemporaryList=[])}initialRenderHooks($u){const Tu=$u(()=>{var Cu;this.videoMesh&&((Cu=this.videoInstance)==null?void 0:Cu.paused)===!1&&(this.videoMesh.needsRender=!0)});this.disposers.push(()=>Tu)}showPlayUI(){this.coverMesh&&(this.coverMesh.visible=!1),this.remove(this.buttonMesh),this.videoMesh.visible=!0}showPauseUI(){return u$8(this,null,function*(){this.coverMesh?(this.coverMesh.visible=!0,this.videoMesh&&(this.videoMesh.visible=!1)):(yield this.addCoverMesh(),this.coverMesh&&(this.videoMesh.visible=!1)),this.addButtonMesh().then(()=>this.render())})}render(){var $u;this.videoMesh&&(this.videoMesh.needsRender=!0),this.coverMesh&&(this.coverMesh.needsRender=!0),this.buttonMesh&&(this.buttonMesh.needsRender=!0),this.videoMesh&&(($u=this.videoInstance)==null?void 0:$u.paused)===!1&&(this.videoMesh.needsRender=!0)}addAutoBindEventListener(...$u){const Tu=$u[0];Tu.addEventListener("added",()=>{this.addDomEventListener(...$u)}),Tu.addEventListener("removed",()=>{this.removeDomEventListener(...$u)}),Tu.addEventListener("dispose",()=>{this.removeDomEventListener(...$u)})}addDomEventListener(...$u){this.domEvents?(this.domEvents.addEventListener(...$u),this.disposers.push(()=>{var Tu;return(Tu=this.domEvents)==null?void 0:Tu.removeEventListener(...$u)})):this.domEventsListenerTemporaryList.push($u)}removeDomEventListener(...$u){this.domEvents?this.domEvents.removeEventListener(...$u):this.domEventsListenerTemporaryList=this.domEventsListenerTemporaryList.filter(Tu=>Tu!==$u)}addCoverMesh(){return u$8(this,null,function*(){if(this.children.includes(this.coverMesh))return;const $u=yield(()=>u$8(this,null,function*(){if(this.coverMesh)return this.coverMesh;if(!this.videoCoverSrc)return;const Tu=yield this.getImageTexture(this.videoCoverSrc);if(!Tu)return;const Cu=new MeshBasicMaterial({transparent:!1,map:Tu}),Pu=H$6(this.objectFit,this.cornerPoints,Tu.image.width/Tu.image.height),Ru=new M$f(Pu,Cu);return Ru.position.copy(new Vector3(0,0,0)),Ru.name="videoCoverMesh",Ru}))();return $u&&(this.children.includes(this.coverMesh)||(this.add($u),this.coverMesh=$u)),$u})}addVideoMesh(){return u$8(this,null,function*(){if(this.children.includes(this.videoMesh))return;const $u=yield(()=>u$8(this,null,function*(){if(this.videoMesh)return this.videoMesh;if(!this.src)return;const Cu=this.getVideoTexture(this.src),Pu=new MeshBasicMaterial({transparent:!1,map:Cu}),Ru=yield new Promise(Bu=>{Cu.metadataLoaded?Bu(H$6(this.objectFit,this.cornerPoints,Cu.image.videoWidth/Cu.image.videoHeight)):Cu.addEventListener("videoLoaded",()=>Bu(H$6(this.objectFit,this.cornerPoints,Cu.image.videoWidth/Cu.image.videoHeight)))}),Lu=new M$f(Ru,Pu);return Lu.name="videoMesh",Lu.position.copy(new Vector3(0,0,0)),Lu}))();if(!$u)return;this.addAutoBindEventListener($u,"click",()=>{!this.videoInstance.paused&&this.videoInstance.muted?this.videoInstance.muted=!1:this.pause()});const Tu=$u.material.map.image;return Tu.addEventListener("playing",()=>{this.coverMesh||this.remove(this.buttonMesh),this.render()}),Tu.addEventListener("pause",()=>{this.showPauseUI(),this.render()}),this.children.includes(this.videoMesh)||(this.add($u),this.videoMesh=$u,this.videoInstance=Tu),$u})}addButtonMesh(){return u$8(this,null,function*(){if(this.children.includes(this.buttonMesh))return;const $u=yield(()=>u$8(this,null,function*(){var Tu,Cu,Pu,Ru;if(this.buttonMesh)return this.buttonMesh;const Lu=(Cu=(Tu=this.videoMesh)==null?void 0:Tu.geometry.points[0].distanceTo(this.videoMesh.geometry.points[3]))!=null?Cu:1/0,Bu=(Ru=(Pu=this.coverMesh)==null?void 0:Pu.geometry.points[0].distanceTo(this.coverMesh.geometry.points[3]))!=null?Ru:1/0,Vu=this.cornerPoints[0].distanceTo(this.cornerPoints[3]),Ou=Math.min(Lu,Bu,Vu)/Vu*.3,Du=yield this.getImageTexture(this.buttonSrc),ku=H$6("contain",this.cornerPoints,Du.image.width/Du.image.height),Fu=new M$f(ku,new s$7(Du));Fu.position.copy(new Vector3(0,0,0)),Fu.name="buttonMesh",Fu.scale.set(Ou,Ou,Ou),this.addAutoBindEventListener(Fu,"click",()=>this.play());const Nu=new Vector3().crossVectors(new Vector3().subVectors(ku[0],ku[1]),new Vector3().subVectors(ku[0],ku[3])).normalize().multiplyScalar(1e-4);return Fu.position.add(Nu),Fu}))();return this.children.includes(this.buttonMesh)||(this.add($u),this.buttonMesh=$u),$u})}getImageTexture($u){return u$8(this,null,function*(){var Tu,Cu;if((Tu=this.ImageTextureMap)!=null&&Tu.has($u))return this.ImageTextureMap.get($u);const Pu=yield T$7($u);return(Cu=this.ImageTextureMap)==null||Cu.set($u,Pu),Pu})}getVideoTexture($u){var Tu,Cu;if((Tu=this.videoTextureMap)!=null&&Tu.has($u))return this.videoTextureMap.get($u);const Pu=m$6($u);return(Cu=this.videoTextureMap)==null||Cu.set($u,Pu),Pu}}function n$8(_u,$u){this._camera=_u||null,this._domElement=$u||document,this._raycaster=new Raycaster,this._selected=null,this._boundObjs={};var Tu=this;this._$onClick=function(){Tu._onClick.apply(Tu,arguments)},this._$onDblClick=function(){Tu._onDblClick.apply(Tu,arguments)},this._$onMouseMove=function(){Tu._onMouseMove.apply(Tu,arguments)},this._$onMouseDown=function(){Tu._onMouseDown.apply(Tu,arguments)},this._$onMouseUp=function(){Tu._onMouseUp.apply(Tu,arguments)},this._$onTouchMove=function(){Tu._onTouchMove.apply(Tu,arguments)},this._$onTouchStart=function(){Tu._onTouchStart.apply(Tu,arguments)},this._$onTouchEnd=function(){Tu._onTouchEnd.apply(Tu,arguments)},this._$onContextmenu=function(){Tu._onContextmenu.apply(Tu,arguments)},this._domElement.addEventListener("click",this._$onClick,!1),this._domElement.addEventListener("dblclick",this._$onDblClick,!1),this._domElement.addEventListener("mousemove",this._$onMouseMove,!1),this._domElement.addEventListener("mousedown",this._$onMouseDown,!1),this._domElement.addEventListener("mouseup",this._$onMouseUp,!1),this._domElement.addEventListener("touchmove",this._$onTouchMove,!1),this._domElement.addEventListener("touchstart",this._$onTouchStart,!1),this._domElement.addEventListener("touchend",this._$onTouchEnd,!1),this._domElement.addEventListener("contextmenu",this._$onContextmenu,!1)}n$8.prototype.destroy=function(){this._domElement.removeEventListener("click",this._$onClick,!1),this._domElement.removeEventListener("dblclick",this._$onDblClick,!1),this._domElement.removeEventListener("mousemove",this._$onMouseMove,!1),this._domElement.removeEventListener("mousedown",this._$onMouseDown,!1),this._domElement.removeEventListener("mouseup",this._$onMouseUp,!1),this._domElement.removeEventListener("touchmove",this._$onTouchMove,!1),this._domElement.removeEventListener("touchstart",this._$onTouchStart,!1),this._domElement.removeEventListener("touchend",this._$onTouchEnd,!1),this._domElement.removeEventListener("contextmenu",this._$onContextmenu,!1)};n$8.eventNames=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu","touchstart","touchend"];n$8.prototype._getRelativeMouseXY=function(_u){var $u=_u.target||_u.srcElement;$u.nodeType===3&&($u=$u.parentNode);var Tu={x:0,y:0},Cu=$u,Pu=getComputedStyle(Cu,null);Tu.y+=parseInt(Pu.getPropertyValue("padding-top"),10),Tu.x+=parseInt(Pu.getPropertyValue("padding-left"),10);do Tu.x+=Cu.offsetLeft,Tu.y+=Cu.offsetTop,Pu=getComputedStyle(Cu,null),Tu.x+=parseInt(Pu.getPropertyValue("border-left-width"),10),Tu.y+=parseInt(Pu.getPropertyValue("border-top-width"),10);while(Cu=Cu.offsetParent);var Ru={width:$u===window?window.innerWidth:$u.offsetWidth,height:$u===window?window.innerHeight:$u.offsetHeight};return{x:Number((_u.pageX-Tu.x)/Ru.width)*2-1,y:-((_u.pageY-Tu.y)/Ru.height)*2+1}};n$8.prototype._objectCtxInit=function(_u){_u._3xDomEvent={}};n$8.prototype._objectCtxDeinit=function(_u){delete _u._3xDomEvent};n$8.prototype._objectCtxIsInit=function(_u){return!!_u._3xDomEvent};n$8.prototype._objectCtxGet=function(_u){return _u._3xDomEvent};n$8.prototype.camera=function(_u){return _u&&(this._camera=_u),this._camera};n$8.prototype.bind=function(_u,$u,Tu,Cu){console.assert(n$8.eventNames.indexOf($u)!==-1,"not available events:"+$u),this._objectCtxIsInit(_u)||this._objectCtxInit(_u);var Pu=this._objectCtxGet(_u);Pu[$u+"Handlers"]||(Pu[$u+"Handlers"]=[]),Pu[$u+"Handlers"].push({callback:Tu,useCapture:Cu}),this._boundObjs[$u]===void 0&&(this._boundObjs[$u]=[]),this._boundObjs[$u].push(_u)};n$8.prototype.addEventListener=n$8.prototype.bind;n$8.prototype.unbind=function(_u,$u,Tu,Cu){console.assert(n$8.eventNames.indexOf($u)!==-1,"not available events:"+$u),this._objectCtxIsInit(_u)||this._objectCtxInit(_u);var Pu=this._objectCtxGet(_u);Pu[$u+"Handlers"]||(Pu[$u+"Handlers"]=[]);for(var Ru=Pu[$u+"Handlers"],Lu=0;Lu<Ru.length;Lu++){var Bu=Ru[Lu];if(Tu==Bu.callback&&Cu==Bu.useCapture){Ru.splice(Lu,1);break}}var Vu=this._boundObjs[$u].indexOf(_u);this._boundObjs[$u].splice(Vu,1)};n$8.prototype.removeEventListener=n$8.prototype.unbind;n$8.prototype._bound=function(_u,$u){var Tu=this._objectCtxGet($u);return Tu?!!Tu[_u+"Handlers"]:!1};n$8.prototype._onMove=function(_u,$u,Tu,Cu){var Pu=this._boundObjs[_u];if(!(Pu===void 0||Pu.length===0)){var Ru=new Vector2;Ru.set($u,Tu),this._raycaster.setFromCamera(Ru,this._camera);var Lu=this._raycaster.intersectObjects(Pu),Bu=this._selected;if(Lu.length>0){var Vu,Ou,Du,ku=Lu[0],Fu=ku.object;this._selected=Fu,Du=this._bound("mousemove",Fu),Bu!=Fu&&(Vu=this._bound("mouseover",Fu),Ou=Bu&&this._bound("mouseout",Bu))}else Ou=Bu&&this._bound("mouseout",Bu),this._selected=null;Du&&this._notify("mousemove",Fu,Cu,ku),Vu&&this._notify("mouseover",Fu,Cu,ku),Ou&&this._notify("mouseout",Bu,Cu,ku)}};n$8.prototype._onEvent=function(_u,$u,Tu,Cu){var Pu=this._boundObjs[_u];if(!(Pu===void 0||Pu.length===0)){var Ru=new Vector2;Ru.set($u,Tu),this._raycaster.setFromCamera(Ru,this._camera);var Lu=this._raycaster.intersectObjects(Pu,!0);if(Lu.length!==0){for(var Bu=Lu[0],Vu=Bu.object,Ou=this._objectCtxGet(Vu),Du=Vu.parent;typeof Ou=="undefined"&&Du;)Ou=this._objectCtxGet(Du),Du=Du.parent;Ou&&this._notify(_u,Vu,Cu,Bu)}}};n$8.prototype._notify=function(_u,$u,Tu,Cu){var Pu=this._objectCtxGet($u),Ru=Pu?Pu[_u+"Handlers"]:null;if(!Pu||!Ru||Ru.length===0){$u.parent&&this._notify(_u,$u.parent,Tu,Cu);return}for(var Ru=Pu[_u+"Handlers"],Lu=0;Lu<Ru.length;Lu++){var Bu=Ru[Lu],Vu=!0;Bu.callback({type:_u,target:$u,origDomEvent:Tu,intersect:Cu,stopPropagation:function(){Vu=!1}}),Vu&&Bu.useCapture===!1&&$u.parent&&this._notify(_u,$u.parent,Tu,Cu)}};n$8.prototype._onMouseDown=function(_u){return this._onMouseEvent("mousedown",_u)};n$8.prototype._onMouseUp=function(_u){return this._onMouseEvent("mouseup",_u)};n$8.prototype._onMouseEvent=function(_u,$u){var Tu=this._getRelativeMouseXY($u);this._onEvent(_u,Tu.x,Tu.y,$u)};n$8.prototype._onMouseMove=function(_u){var $u=this._getRelativeMouseXY(_u);this._onMove("mousemove",$u.x,$u.y,_u),this._onMove("mouseover",$u.x,$u.y,_u),this._onMove("mouseout",$u.x,$u.y,_u)};n$8.prototype._onClick=function(_u){this._onMouseEvent("click",_u)};n$8.prototype._onDblClick=function(_u){this._onMouseEvent("dblclick",_u)};n$8.prototype._onContextmenu=function(_u){this._onMouseEvent("contextmenu",_u)};n$8.prototype._onTouchStart=function(_u){return this._onTouchEvent("touchstart",_u)};n$8.prototype._onTouchEnd=function(_u){return this._onTouchEvent("touchend",_u)};n$8.prototype._onTouchMove=function(_u){if(_u.touches.length==1){var $u=Number(_u.touches[0].pageX/window.innerWidth)*2-1,Tu=-(_u.touches[0].pageY/window.innerHeight)*2+1;this._onMove("mousemove",$u,Tu,_u),this._onMove("mouseover",$u,Tu,_u),this._onMove("mouseout",$u,Tu,_u)}};n$8.prototype._onTouchEvent=function(_u,$u){var Tu=$u.touches;if(Tu.length==0&&(Tu=$u.changedTouches),Tu.length==1){var Cu=Number(Tu[0].pageX/window.innerWidth)*2-1,Pu=-(Tu[0].pageY/window.innerHeight)*2+1;this._onEvent(_u,Cu,Pu,$u)}};var l$8=Object.defineProperty,c$a=(_u,$u,Tu)=>$u in _u?l$8(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,h$9=(_u,$u,Tu)=>(c$a(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class p$6 extends n$8{constructor($u){super($u.camera,$u.getElement()),h$9(this,"mouseInfo"),h$9(this,"clickHandlerMap",new Map);const Tu=()=>this.preventWhenMouseDown();$u.on("wantsMoveToPano",Tu),$u.on("wantsTapGesture",Tu)}addAutoBindEventListener(...$u){const Tu=$u[0];Tu.addEventListener("added",()=>{this.addEventListener(...$u)}),Tu.addEventListener("removed",()=>{this.removeEventListener(...$u)}),Tu.addEventListener("dispose",()=>{this.removeEventListener(...$u)})}addEventListener($u,Tu,Cu,Pu){const Ru=Ou=>{if(d$a($u)===!1){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo={x:Du.clientX,y:Du.clientY,isDown:!0,mouseDownTimestamp:Date.now()}},Lu=Ou=>{if(d$a($u)===!1){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo&&(this.mouseInfo.isDown&&this.mouseInfo.x===Du.clientX&&this.mouseInfo.y===Du.clientY&&Date.now()-this.mouseInfo.mouseDownTimestamp<400&&Cu(Du),this.mouseInfo=void 0)},Bu=Ou=>{if(d$a($u)===!1){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo={x:Math.floor(Du.touches[0].clientX),y:Math.floor(Du.touches[0].clientY),isDown:!0,mouseDownTimestamp:Date.now()}},Vu=Ou=>{if(d$a($u)===!1){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo&&(this.mouseInfo.isDown&&this.mouseInfo.x===Math.floor(Du.changedTouches[Du.changedTouches.length-1].clientX)&&this.mouseInfo.y===Math.floor(Du.changedTouches[Du.changedTouches.length-1].clientY)&&Date.now()-this.mouseInfo.mouseDownTimestamp<400&&Cu(Du),this.mouseInfo=void 0)};Tu==="click"?(super.addEventListener($u,"mousedown",Ru,Pu),super.addEventListener($u,"mouseup",Lu,Pu),super.addEventListener($u,"touchstart",Bu,Pu),super.addEventListener($u,"touchend",Vu,Pu),this.clickHandlerMap.set(Cu,{mousedown:Ru,mouseup:Lu,touchstart:Bu,touchend:Vu})):super.addEventListener($u,Tu,Cu,Pu)}removeEventListener($u,Tu,Cu,Pu){if(Tu==="click"){const Ru=this.clickHandlerMap.get(Cu);Ru&&(super.removeEventListener($u,"mousedown",Ru.mousedown,Pu),super.removeEventListener($u,"mouseup",Ru.mouseup,Pu),super.removeEventListener($u,"touchstart",Ru.touchstart,Pu),super.removeEventListener($u,"touchend",Ru.touchend,Pu),this.clickHandlerMap.delete(Cu))}else super.removeEventListener($u,Tu,Cu,Pu)}preventWhenMouseDown(){var $u;if(($u=this.mouseInfo)!=null&&$u.isDown)return!1}}function d$a(_u){return _u?_u.visible===!1?!1:d$a(_u.parent):!0}var y$d=Object.defineProperty,D$8=(_u,$u,Tu)=>$u in _u?y$d(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,l$7=(_u,$u,Tu)=>(D$8(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class De extends F$6{constructor($u){super($u),l$7(this,"tags",[]),l$7(this,"config",e$6),l$7(this,"mediaStore",h$c({currentMediaElement:null})),l$7(this,"css3DRenderPlugin"),l$7(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),l$7(this,"domEvents",new p$6(this.five)),l$7(this,"mouseInfo"),l$7(this,"preventWhenMouseDown",()=>{var Tu;if((Tu=this.mouseInfo)!=null&&Tu.isDown)return!1}),this.five.on("wantsMoveToPano",this.preventWhenMouseDown),this.five.on("wantsTapGesture",this.preventWhenMouseDown),this.mediaStore.subscribe(({currentMediaElement:Tu})=>{this.tags.forEach(Cu=>{var Pu;if(Cu.mediaPlane instanceof G$6&&Tu!==Cu.mediaPlane.videoInstance){if(!((Pu=Cu.mediaPlane.videoInstance)!=null&&Pu.src)||Tu===Cu.mediaPlane.videoInstance)return;Cu.mediaPlane.pause()}})}),this.store.disposers.push(()=>{this.five.off("wantsMoveToPano",this.preventWhenMouseDown),this.five.off("wantsTapGesture",this.preventWhenMouseDown)})}get isPanorama(){return this.five.currentMode==="Panorama"}getTagById($u){const Tu=this.tags.find(Cu=>Cu.id===$u);if(!Tu){console.warn(`error: can not find tag id ${$u} by getTagById()`);return}return Tu}pauseCurrentMedia(){this.mediaStore.set({currentMediaElement:null})}getTagConfig($u){var Tu,Cu;if(!$u)return(Tu=this.config.globalConfig)!=null?Tu:{};const Pu={};this.config.contentTypeConfig&&Object.keys(this.config.contentTypeConfig).forEach(Lu=>{const Bu=Lu;if(Pu[Bu])return;const Vu=Bu.split("-");if(Vu.length===1){const[Ou]=Vu;$u.contentType===Ou&&(Pu[Bu]=this.config.contentTypeConfig[Bu])}if(Vu.length===2){const[Ou="Any",Du="Any"]=Vu;($u.stickType===Ou||Ou==="Any")&&($u.contentType===Du||Du==="Any")&&(Pu[Bu]=this.config.contentTypeConfig[Bu])}if(Vu.length===3){const[Ou="Any",Du,ku]=Vu;if(Du==="Audio"&&$u.contentType==="Audio"){const Fu=$u;(Fu.stickType===Ou||Ou==="Any")&&Fu.data.appearance===ku&&(Pu[Bu]=this.config.contentTypeConfig[Bu])}}});const Ru=a$9({},this.config.globalConfig,...Object.values(Pu),$u.config);return typeof Ru.unfoldedConfig=="object"&&(Ru.unfoldedConfig.disableFold&&(Ru.unfoldedConfig={keep:"unfolded"}),Ru.unfoldedConfig.disableUnfold&&(Ru.unfoldedConfig={keep:"folded"}),Ru.unfoldedConfig.keep&&(Ru.unfoldedConfig={keep:Ru.unfoldedConfig.keep})),typeof Ru.visibleConfig=="object"&&Ru.visibleConfig.keep&&(Ru.visibleConfig={keep:Ru.visibleConfig.keep,visibleFiveMode:(Cu=Ru.visibleConfig)==null?void 0:Cu.visibleFiveMode}),Ru}loadVideoFirstFrame(){n$9&&this.hooks.emit("loadVideoFirstFrame")}updateTagConfig($u){$u!=null&&$u.force&&this.clearCache(),this.tags.forEach(Tu=>{const Cu=this.getTagConfig(Tu);Tu.mergedConfig=Cu,Tu.data=a$9({},Tu.data,Cu.initialData)})}can($u,Tu){const Cu=Tu,Pu=this.getTagConfig(Cu);if(!Pu||typeof Pu!="object")return!0;if($u==="show"||$u==="hide"){if(!Pu.visibleConfig||typeof Pu.visibleConfig!="object")return!0;if($u==="show"&&Pu.visibleConfig.keep==="hidden"||$u==="hide"&&(Pu.visibleConfig.keep==="visible"||Pu.visibleConfig.alwaysShowWhenMovePano))return!1}if($u==="fold"||$u==="unfold"){if(!Pu.unfoldedConfig||typeof Pu.unfoldedConfig!="object")return!0;if($u==="fold"&&Pu.unfoldedConfig.keep==="unfolded"||$u==="unfold"&&Pu.unfoldedConfig.keep==="folded")return!1}return!0}getRenderType($u){const Tu=(()=>{if($u.stickType==="3DPoint")return"Dom";const Cu=this.getTagConfig($u);if(!Cu||typeof Cu!="object"||!Cu.renderType)return;const Pu=$u.data.mediaData;if(!(!Pu||Pu.length===0)&&Cu.renderType==="Mesh"){if(p$7($u)){if(Pu.length===1&&(Pu[0].type==="Image"||Pu[0].type==="Video"))return"Mesh"}else if(s$9($u))return Pu.length===1&&Pu[0].type==="Image"?"Mesh":"BehindDom"}})();return Tu!=null?Tu:"Dom"}getAngle($u,Tu){var Cu,Pu;const Ru=Tu!=null?Tu:this.five.getCurrentState().panoIndex;if(Ru===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Ru}`);const Lu=this.getCache({panoIndex:Tu,id:$u.id});if(Lu.angle!==void 0)return Lu.angle;{const Bu=(Pu=(Cu=this.five.work)==null?void 0:Cu.observers[Ru])==null?void 0:Pu.position;if(Bu===void 0)throw new Error(`getAngleRange(): observerPosition is ${Bu}`);const Vu=(()=>$u.stickType==="3DPoint"?s$h($u.normal):i$6($u.position))();if(!Vu)return;const Ou=c$b($u.position);if(!Ou)return;const Du=new Vector3().copy(Bu).sub(Ou),ku=Vu.angleTo(Du)*180/Math.PI;return Lu.angle=ku,Lu.angle}}getDistance($u,Tu){var Cu,Pu;const Ru=Tu!=null?Tu:this.five.getCurrentState().panoIndex;if(Ru===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Ru}`);const Lu=this.getCache({panoIndex:Tu,id:$u.id});if(Lu.distance!==void 0)return Lu.distance;{const Bu=(Pu=(Cu=this.five.work)==null?void 0:Cu.observers[Ru])==null?void 0:Pu.position;if(Bu===void 0)throw new Error(`getDistance(): observerPosition is ${Bu}`);const Vu=y$e($u);if(!Vu)return-1;const Ou=Bu.distanceTo(Vu);return Lu.distance=Ou,Ou}}getPositions($u){if(i$b($u))return $u.position;if(s$9($u))return $u.data.mediaPosition;const Tu=$u;return d$b(this.five.camera.position,c$n(Tu.position),c$n(Tu.normal))}addObjectClickHandler($u,Tu,Cu){if(!Tu||!this.domEvents)return()=>{};const Pu=()=>!(!$u.state.visible||!this.state.visible||s$9($u)&&!$u.mediaVisible),Ru=Ou=>{if(!Pu()){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo={x:Du.clientX,y:Du.clientY,isDown:!0,mouseDownTimestamp:Date.now()}},Lu=Ou=>{if(!Pu()){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo&&(this.mouseInfo.isDown&&this.mouseInfo.x===Du.clientX&&this.mouseInfo.y===Du.clientY&&Date.now()-this.mouseInfo.mouseDownTimestamp<400&&Cu(Du),this.mouseInfo=void 0)},Bu=Ou=>{if(!Pu()){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo={x:Math.floor(Du.touches[0].clientX),y:Math.floor(Du.touches[0].clientY),isDown:!0,mouseDownTimestamp:Date.now()}},Vu=Ou=>{if(!Pu()){this.mouseInfo=void 0;return}const Du=Ou.origDomEvent;this.mouseInfo&&(this.mouseInfo.isDown&&this.mouseInfo.x===Math.floor(Du.changedTouches[Du.changedTouches.length-1].clientX)&&this.mouseInfo.y===Math.floor(Du.changedTouches[Du.changedTouches.length-1].clientY)&&Date.now()-this.mouseInfo.mouseDownTimestamp<400&&Cu(Du),this.mouseInfo=void 0)};return this.domEvents.addEventListener(Tu,"mousedown",Ru,!1),this.domEvents.addEventListener(Tu,"mouseup",Lu,!1),this.domEvents.addEventListener(Tu,"touchstart",Bu,!1),this.domEvents.addEventListener(Tu,"touchend",Vu,!1),()=>{this.domEvents&&(this.mouseInfo=void 0,this.domEvents.removeEventListener(Tu,"mousedown",Ru),this.domEvents.removeEventListener(Tu,"mouseup",Lu),this.domEvents.removeEventListener(Tu,"touchstart",Bu),this.domEvents.removeEventListener(Tu,"touchend",Vu))}}getTagNormal($u){if($u.normal)return c$n($u.normal);if($u.stickType==="Plane")return i$6($u.position);if($u.stickType==="Model")return i$6(this.getPositions($u))}get filterPointTag(){return this.tags.filter($u=>$u.stickType==="2DPoint"||$u.stickType==="3DPoint").filter($u=>$u.position)}get filter2DPointTag(){return this.tags.filter($u=>$u.stickType==="2DPoint").filter($u=>$u.position)}get filter3DPointTag(){return this.tags.filter($u=>$u.stickType==="3DPoint").filter($u=>$u.position)}get filterImagePlane(){return this.tags.filter($u=>$u.contentType==="MediaPlane"&&$u.stickType==="Plane"&&this.getRenderType($u)==="Mesh")}get filterMediaModel(){return this.tags.filter($u=>$u.stickType==="Model"&&$u.contentType==="MediaModel")}get filterModelTag(){return this.tags.filter($u=>$u.stickType==="Model")}get filterCSS3DTag(){return this.tags.filter($u=>$u.stickType==="3DPoint"||$u.stickType==="Plane"||$u.stickType==="Model"&&$u.contentType==="MediaModel").filter($u=>{const Tu=this.getRenderType($u);return Tu==="BehindDom"||Tu==="Dom"})}checkDisposed(){return this.store.disposed?(console.error("PanoTagPluginController has been disposed"),!0):!1}}function c$9(_u,$u){if(!$u||!_u)return console.error("getFloorIndex: invalid arguments: ",{point:$u,observer:_u}),0;const Tu=[];_u.forEach(Pu=>{var Ru,Lu;const Bu=(Lu=(Ru=Pu.floorIndex)!=null?Ru:Pu.floor_index)!=null?Lu:0;Tu[Bu]||(Tu[Bu]=[]),Tu[Bu].push(Pu.position.y)});const Cu=Tu.map(Pu=>Pu.reduce((Ru,Lu)=>Ru+Lu,0)/Pu.length);for(let Pu=Cu.length-1;Pu>0;Pu--)if($u.y>=Cu[Pu])return Pu;return 0}var M$e=Object.defineProperty,U$4=Object.defineProperties,D$7=Object.getOwnPropertyDescriptors,P$8=Object.getOwnPropertySymbols,R$4=Object.prototype.hasOwnProperty,B$8=Object.prototype.propertyIsEnumerable,g$b=(_u,$u,Tu)=>$u in _u?M$e(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,x$8=(_u,$u)=>{for(var Tu in $u||($u={}))R$4.call($u,Tu)&&g$b(_u,Tu,$u[Tu]);if(P$8)for(var Tu of P$8($u))B$8.call($u,Tu)&&g$b(_u,Tu,$u[Tu]);return _u},I$c=(_u,$u)=>U$4(_u,D$7($u)),T$5=(_u,$u,Tu)=>(g$b(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class Ue extends De{constructor($u){super($u),T$5(this,"raycaster",new Raycaster)}getVisibleByPanoIndex($u,Tu){const Cu=this.getCache({panoIndex:Tu,id:$u.id}),Pu=Tu!=null?Tu:this.five.getCurrentState().panoIndex;if($u.stickType==="Model")return!0;if(Cu.visible!==void 0)return Cu.visible;{const Ru=(()=>{var Lu,Bu,Vu;const Ou=(Lu=this.getTagConfig($u).visibleConfig)!=null?Lu:{},Du=this.getDistance($u);if(typeof Ou=="function")return{value:Ou(this.five,{tag:$u,distance:Du}),reason:"config function result"};if(Ou.keep==="hidden")return{value:!1,reason:"config.keep is hidden"};if(Ou.keep==="visible")return{value:!0,reason:"config.keep is visible"};if(Ou.visiblePanoIndex!==void 0&&Ou.visiblePanoIndex!=="all"&&Pu!==void 0){if(Array.isArray(Ou.visiblePanoIndex)&&!Ou.visiblePanoIndex.includes(Pu))return{value:!1,reason:`current panoIndex is not included in visiblePano. currentPanoIndex: ${Pu}, visiblePanoIndex: ${Ou.visiblePanoIndex}`};if(Ou.visiblePanoIndex==="current"&&Pu!==((Bu=$u.fiveState)==null?void 0:Bu.panoIndex))return{value:!1,reason:`current panoIndex is not equal to tag.panoIndex. currentPanoIndex: ${Pu}, tag.panoIndex: ${(Vu=$u.fiveState)==null?void 0:Vu.panoIndex}`}}if(Ou.visibleDistance!==void 0&&Ou.visibleDistance!=="unLimited"&&i$8(Du,Ou.visibleDistance)===!1)return{value:!1,reason:`distance is not in visibleDistance. distance: ${Du}, visibleDistance: ${Ou.visibleDistance}`};if(Ou.intersectRaycaster!==!1&&(typeof Ou.intersectRaycaster!="object"||Ou.intersectRaycaster.enabled!==!1)){if(Pu===void 0)return{value:!1,reason:`intersectRaycaster check failed: fivePanoIndex is ${Pu}`};const ku=this.getRaycasterFromPanoIndex($u,Pu);if(!ku)return{value:!1,reason:`intersectRaycaster check failed: raycaster is ${ku}`};const Fu=this.getTagEnableByIntersect($u,ku);if(Fu.value===!1)return Fu}if(Ou.angleRange&&T$6($u)){const ku=this.getAngle($u);if(i$8(ku,Ou.angleRange)===!1)return{value:!1,reason:`angle is not in angleRange. angle: ${ku}, angleRange: ${Ou.angleRange}`}}return{value:!0,reason:"all check passed"}})();return Cu.visible=Ru.value,Cu.__debug_visible_reason__=Ru,Cu.visible}}getVisibleByFiveMode($u,Tu){const Cu=Tu!=null?Tu:this.five.getCurrentState().mode,Pu=this.getTagConfig($u).visibleConfig;if(Pu){if(typeof Pu=="object"){const Ru=Pu==null?void 0:Pu.visibleFiveMode;return Ru?Ru!=null&&Ru.includes(Cu)?Pu.followModelVisibility===!0&&(Cu==="Floorplan"||Cu==="Mapview")?this.getVisibleByFloorIndex($u):!0:!1:Cu==="Panorama"}else if(typeof Pu=="function")return Tu==="Panorama"}else return Cu==="Panorama"}getCurrentVisibleState($u){var Tu;return(Tu=this.state.visible&&$u.state.visible)!=null?Tu:!0}getVisible($u){const Tu=this.five.getCurrentState(),Cu=this.getVisibleByFiveMode($u),Pu=Tu.mode==="Panorama"?this.getVisibleByPanoIndex($u,Tu.panoIndex):!0;return Cu&&Pu}getModelMedialVisibleByPanoIndex($u){if(!this.getCurrentVisibleState($u))return!1;const Tu=this.five.getCurrentState().panoIndex,Cu=this.getCache({panoIndex:Tu,id:$u.id});if(Cu.modelMedialVisible!==void 0)return Cu.modelMedialVisible;const Pu=this.getRaycasterFromPanoIndex($u,Tu);if(!Pu)return!1;const Ru=this.getTagEnableByIntersect($u,Pu);return Cu.modelMedialVisible=Ru.value,Cu.__debug_visible_reason__=Ru,Ru.value!==!1}getUnfoldedByPanoIndex($u,Tu){if(!this.getVisibleByPanoIndex($u))return;const Cu=this.getCache({panoIndex:Tu,id:$u.id});if(Cu.unfolded!==void 0)return Cu.unfolded;{const Pu=this.getTagConfig($u).unfoldedConfig;if(!Pu)return;const Ru=(()=>{const Bu=this.getDistance($u);if(typeof Pu=="function")return Pu(this.five,{tag:$u,distance:Bu});if(Pu.keep==="folded")return!1;if(Pu.keep==="unfolded")return!0;if(Pu.unfoldDistance&&i$8(Bu,Pu.unfoldDistance)===!1)return!1})();Cu.unfolded=Ru;const Lu=this.getUnfoldedByCamera($u);return Lu!==void 0?Lu:Cu.unfolded}}getUnfoldedByCamera($u){return this.getVisible($u)?(()=>{var Tu;const Cu=this.getDistance($u),Pu=this.getTagConfig($u).unfoldedConfig;if(Pu){if(typeof Pu=="function")return Pu(this.five,{tag:$u,distance:Cu});if(Pu.keep==="folded")return!1;if(Pu.keep==="unfolded")return!0;if(Pu.autoUnfold===void 0||Pu.autoUnfold===!1||Pu.autoUnfold.enable===!1||!Pu.autoUnfold.strategy)return;if(Pu.autoUnfold.strategy==="ScreenPostion"){const Ru=this.getTagProject($u);if(Ru&&i$8(Ru.x,Pu.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(Pu.autoUnfold.strategy==="MinimumDistance"){const Ru=this.filterPointTag.filter(Lu=>this.getVisible(Lu)).filter(Lu=>{const Bu=this.getTagProject(Lu);if(!Bu)return!1;const{x:Vu,y:Ou,z:Du}=Bu;return!(Math.abs(Du)>1||Math.abs(Vu)>1||Math.abs(Ou)>1)}).map(Lu=>({tag:Lu,id:Lu.id,tagConfig:this.getTagConfig(Lu).unfoldedConfig})).filter(({tag:Lu,tagConfig:Bu})=>{var Vu,Ou;return!(typeof Bu!="object"||Bu.keep||Bu.autoUnfold===!1||((Vu=Bu.autoUnfold)==null?void 0:Vu.enable)===!1||((Ou=Bu.autoUnfold)==null?void 0:Ou.strategy)!=="MinimumDistance")}).map(Lu=>I$c(x$8({},Lu),{distance:this.getDistance(Lu.tag)})).filter(({distance:Lu,tagConfig:Bu})=>{var Vu,Ou;return!(Lu===void 0||typeof Bu!="object"||Bu.autoUnfold===!1||((Vu=Bu.autoUnfold)==null?void 0:Vu.enable)===!1||((Ou=Bu.autoUnfold)==null?void 0:Ou.strategy)!=="MinimumDistance"||Bu.autoUnfold.distance&&i$8(Lu,Bu.autoUnfold.distance)===!1)}).sort((Lu,Bu)=>Lu.distance-Bu.distance).findIndex(Lu=>Lu.id===$u.id);if(Ru===-1||!(Ru<=((Tu=Pu.autoUnfold.maxNumber)!=null?Tu:1)-1))return!1}return!0}})():void 0}sort($u){return $u.sort((Tu,Cu)=>{const Pu=this.getDistance(Tu),Ru=this.getDistance(Cu);return Pu===void 0||Ru===void 0?0:Ru-Pu})}setTagZIndex($u){return $u.forEach(Tu=>{const Cu=this.getDistance(Tu);Tu.zIndex=Math.round((Cu!=null?Cu:0)*100)})}setPointTagPosition(){const $u=this.filterPointTag;$u.length!==0&&$u.forEach(Tu=>{var Cu;if(!((Cu=Tu.state)!=null&&Cu.visible)){Tu.pointTagStyle=null;return}const Pu=this.getTagProject(Tu);if(!Pu){Tu.pointTagStyle=null;return}Tu.pointTagStyle={leftPercent:(Pu.x+1)/2*100,topPercent:(-Pu.y+1)/2*100}})}setVisible(){this.tags.forEach($u=>{const Tu=this.getVisible($u);$u.state&&($u.state.visible=Tu)})}setVisibleByPanoIndex(){this.tags.forEach($u=>{const Tu=this.getVisibleByPanoIndex($u);$u.state&&($u.state.visible=Tu)})}setModelMedialVisible(){const $u=this.five.getCurrentState().mode;this.tags.forEach(Tu=>{var Cu;if(!s$9(Tu))return;if(!((Cu=Tu.model)!=null&&Cu.object)){Tu.mediaVisible=!1;return}const Pu=$u==="Panorama"?this.getModelMedialVisibleByPanoIndex(Tu):!0;Tu.mediaVisible=Pu})}setUnfoldedByPanoIndex(){this.tags.forEach($u=>{const Tu=this.getUnfoldedByPanoIndex($u);if($u.state&&(Tu!==void 0&&($u.state.unfolded=Tu),Tu&&!$u.state.visible)){const Cu=this.getTagConfig($u);typeof Cu.unfoldedConfig=="object"&&Cu.unfoldedConfig.autoFoldWhenHide!==!1&&($u.state.unfolded=!1)}})}getTagProject($u){if(!this.getVisible($u))return;const Tu=c$b($u.position);if(!Tu)return;const{x:Cu,y:Pu,z:Ru}=Tu.project(this.five.camera);if(!(Ru>1))return{x:Cu,y:Pu,z:Ru}}getTagEnableByIntersect($u,Tu){var Cu,Pu,Ru;const Lu=(Cu=this.getTagConfig($u).visibleConfig)!=null?Cu:{},Bu=this.getDistance($u),[Vu]=this.five.model.intersectRaycaster(Tu),Ou=(()=>{if(!s$9($u))return;const Fu=this.tags.filter(s$9).map(Nu=>{var Gu;return(Gu=Nu.model)==null?void 0:Gu.object}).filter(i$7);return Tu.intersectObjects(Fu,!0)[0]})(),Du=(()=>{var Fu;return typeof Lu=="object"&&typeof Lu.intersectRaycaster=="object"&&(Fu=Lu.intersectRaycaster.distanceAccuracy)!=null?Fu:.01})(),ku=Math.min((Pu=Vu==null?void 0:Vu.distance)!=null?Pu:1/0,(Ru=Ou==null?void 0:Ou.distance)!=null?Ru:1/0);return ku+Du<Bu?{value:!1,reason:`intersectRaycaster check failed: distance is ${Bu}, intersection.distance is ${Vu==null?void 0:Vu.distance}, intersection.point is ${Vu==null?void 0:Vu.point.toArray()},
        customModelIntersection.point is ${Ou==null?void 0:Ou.point.toArray()}, minIntersectionDistance is ${ku}`}:{value:!0,reason:""}}getRaycasterFromPanoIndex($u,Tu){var Cu;const Pu=(Cu=this.five.work.observers[Tu])==null?void 0:Cu.position;if(Pu===void 0)throw new Error(`getVisible(): observerPosition is ${Pu}`);const Ru=c$b($u.position);if(!Ru)return;const Lu=Ru.sub(Pu).normalize();return this.raycaster.set(Pu,Lu),this.raycaster}getVisibleByFloorIndex($u){var Tu,Cu,Pu,Ru,Lu,Bu,Vu;let Ou=0;const Du=(Tu=$u.fiveState)==null?void 0:Tu.panoIndex;Du!==void 0?Ou=(Cu=this.five.work.observers[Du])==null?void 0:Cu.floorIndex:Ou=c$9(this.five.work.observers,(Vu=(Bu=(Ru=(Pu=$u.model)==null?void 0:Pu.object)==null?void 0:Ru.position)!=null?Bu:(Lu=$u.mediaPlane)==null?void 0:Lu.position)!=null?Vu:y$e($u));const ku=this.five.model.shownFloor;return ku===null||ku===Ou}}function J$7(_u){Qt(_u,"svelte-xuejcm",".line.svelte-xuejcm{position:absolute;pointer-events:none}.line.vertical.svelte-xuejcm{transform:rotate(-90deg) translate3d(0.03125rem, 0, 0.625rem);transform-origin:0 0}.line.horizontal.svelte-xuejcm{transform:translate3d(0, -0.03125rem, 0.625rem)}.straight-line.svelte-xuejcm{display:block;width:100%;height:100%;overflow:visible}")}function L$8(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu=_u[3]&&B$7(_u);return{c(){$u=U$8("div"),Tu=At("svg"),Cu=At("defs"),Pu=At("linearGradient"),Ru=At("stop"),Lu=At("stop"),Vu&&Vu.c(),te$1(Ru,"offset","25%"),te$1(Ru,"stop-color",_u[5]),te$1(Ru,"stop-opacity","1"),te$1(Lu,"offset","100%"),te$1(Lu,"stop-color",_u[5]),te$1(Lu,"stop-opacity","0.5"),te$1(Pu,"x1",.5),te$1(Pu,"y1",.5),te$1(Pu,"x2",_u[8]),te$1(Pu,"y2",.5),te$1(Pu,"id",_u[10]),te$1(Pu,"gradientUnits","userSpaceOnUse"),te$1(Tu,"class","straight-line svelte-xuejcm"),te$1(Tu,"viewBox",Bu="0 0 "+_u[8]+" "+_u[7]),te$1(Tu,"preserveAspectRatio","none"),te$1($u,"class","line svelte-xuejcm"),re$2($u,"vertical",_u[9]),re$2($u,"horizontal",!_u[9]),ne($u,"width",_u[8]+"px"),ne($u,"height",_u[7]+"px")},m(Ou,Du){Nt(Ou,$u,Du),dt$1($u,Tu),dt$1(Tu,Cu),dt$1(Cu,Pu),dt$1(Pu,Ru),dt$1(Pu,Lu),Vu&&Vu.m(Tu,null)},p(Ou,Du){Du&32&&te$1(Ru,"stop-color",Ou[5]),Du&32&&te$1(Lu,"stop-color",Ou[5]),Du&256&&te$1(Pu,"x2",Ou[8]),Ou[3]?Vu?(Vu.p(Ou,Du),Du&8&&tt$3(Vu,1)):(Vu=B$7(Ou),Vu.c(),tt$3(Vu,1),Vu.m(Tu,null)):Vu&&(Lt(),$t(Vu,1,1,()=>{Vu=null}),Ot$1()),Du&384&&Bu!==(Bu="0 0 "+Ou[8]+" "+Ou[7])&&te$1(Tu,"viewBox",Bu),Du&512&&re$2($u,"vertical",Ou[9]),Du&512&&re$2($u,"horizontal",!Ou[9]),Du&256&&ne($u,"width",Ou[8]+"px"),Du&128&&ne($u,"height",Ou[7]+"px")},d(Ou){Ou&&I$g($u),Vu&&Vu.d()}}}function B$7(_u){let $u,Tu,Cu,Pu,Ru;return{c(){$u=At("path"),te$1($u,"fill","none"),te$1($u,"stroke",Tu=_u[4]?`url(#${_u[10]})`:_u[5]),te$1($u,"stroke-width",1),te$1($u,"d",_u[6])},m(Lu,Bu){Nt(Lu,$u,Bu),Ru=!0},p(Lu,Bu){_u=Lu,(!Ru||Bu&48&&Tu!==(Tu=_u[4]?`url(#${_u[10]})`:_u[5]))&&te$1($u,"stroke",Tu),(!Ru||Bu&64)&&te$1($u,"d",_u[6])},i(Lu){Ru||(Lu&&L$d(()=>{Ru&&(Pu&&Pu.end(1),Cu=me$2($u,I$f,{duration:_u[2],delay:_u[0],easing:it$3}),Cu.start())}),Ru=!0)},o(Lu){Cu&&Cu.invalidate(),Lu&&(Pu=ye$2($u,I$f,{duration:_u[2],delay:_u[1],easing:it$3})),Ru=!1},d(Lu){Lu&&I$g($u),Lu&&Pu&&Pu.end()}}}function K$b(_u){let $u,Tu=_u[8]&&L$8(_u);return{c(){Tu&&Tu.c(),$u=Yt()},m(Cu,Pu){Tu&&Tu.m(Cu,Pu),Nt(Cu,$u,Pu)},p(Cu,[Pu]){Cu[8]?Tu?Tu.p(Cu,Pu):(Tu=L$8(Cu),Tu.c(),Tu.m($u.parentNode,$u)):Tu&&(Tu.d(1),Tu=null)},i:E$e,o:E$e,d(Cu){Tu&&Tu.d(Cu),Cu&&I$g($u)}}}function P$7(_u,$u,Tu){let Cu,Pu,Ru,Lu,{inDelay:Bu=0}=$u,{outDelay:Vu=0}=$u,{duration:Ou=1e3}=$u,{unfolded:Du}=$u,{length:ku}=$u,{direction:Fu="horizontal"}=$u,{useLinearColor:Nu=!1}=$u,{color:Gu="white"}=$u;const zu=r$k();return _u.$$set=Hu=>{"inDelay"in Hu&&Tu(0,Bu=Hu.inDelay),"outDelay"in Hu&&Tu(1,Vu=Hu.outDelay),"duration"in Hu&&Tu(2,Ou=Hu.duration),"unfolded"in Hu&&Tu(3,Du=Hu.unfolded),"length"in Hu&&Tu(11,ku=Hu.length),"direction"in Hu&&Tu(12,Fu=Hu.direction),"useLinearColor"in Hu&&Tu(4,Nu=Hu.useLinearColor),"color"in Hu&&Tu(5,Gu=Hu.color)},_u.$$.update=()=>{_u.$$.dirty&4096&&Tu(9,Cu=Fu==="vertical"),_u.$$.dirty&2048&&Tu(8,Pu=ku),_u.$$.dirty&2048&&Tu(6,Lu=`M0.5 0.5 H ${ku}`)},Tu(7,Ru=1),[Bu,Vu,Ou,Du,Nu,Gu,Lu,Ru,Pu,Cu,zu,ku,Fu]}class Y$7 extends Te{constructor($u){super(),Me(this,$u,P$7,K$b,Ft,{inDelay:0,outDelay:1,duration:2,unfolded:3,length:11,direction:12,useLinearColor:4,color:5},J$7)}}function J$6(_u){Qt(_u,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function k$a(_u){let $u,Tu,Cu,Pu,Ru;return{c(){$u=U$8("div"),te$1($u,"class","shadow svelte-faoauy"),te$1($u,"style",Tu=`
      left:${o$7(_u[5])};
      bottom:${o$7(_u[6])};
      box-shadow: 0 0 ${o$7(_u[10])} ${o$7(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),ne($u,"width",o$7(_u[3])),ne($u,"height",o$7(_u[4])),ne($u,"z-index",_u[13])},m(Lu,Bu){Nt(Lu,$u,Bu),Ru=!0},p(Lu,Bu){_u=Lu,(!Ru||Bu&8160&&Tu!==(Tu=`
      left:${o$7(_u[5])};
      bottom:${o$7(_u[6])};
      box-shadow: 0 0 ${o$7(_u[10])} ${o$7(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&te$1($u,"style",Tu);const Vu=Bu&8160;(Vu||Bu&8168)&&ne($u,"width",o$7(_u[3])),(Vu||Bu&8176)&&ne($u,"height",o$7(_u[4])),(Vu||Bu&16352)&&ne($u,"z-index",_u[13])},i(Lu){Ru||(Lu&&L$d(()=>{Ru&&(Pu&&Pu.end(1),Cu=me$2($u,C$e,{duration:_u[0]}),Cu.start())}),Ru=!0)},o(Lu){Cu&&Cu.invalidate(),Lu&&(Pu=ye$2($u,C$e,{duration:_u[1]})),Ru=!1},d(Lu){Lu&&I$g($u),Lu&&Pu&&Pu.end()}}}function K$a(_u){let $u,Tu=_u[2]&&k$a(_u);return{c(){Tu&&Tu.c(),$u=Yt()},m(Cu,Pu){Tu&&Tu.m(Cu,Pu),Nt(Cu,$u,Pu)},p(Cu,[Pu]){Cu[2]?Tu?(Tu.p(Cu,Pu),Pu&4&&tt$3(Tu,1)):(Tu=k$a(Cu),Tu.c(),tt$3(Tu,1),Tu.m($u.parentNode,$u)):Tu&&(Lt(),$t(Tu,1,1,()=>{Tu=null}),Ot$1())},i(Cu){tt$3(Tu)},o(Cu){$t(Tu)},d(Cu){Tu&&Tu.d(Cu),Cu&&I$g($u)}}}function o$7(_u){return typeof _u=="number"?_u/16+"rem":_u}function L$7(_u,$u,Tu){let{inDelay:Cu=1e3}=$u,{outDelay:Pu=1e3}=$u,{visible:Ru=!0}=$u,{width:Lu=0}=$u,{height:Bu=0}=$u,{left:Vu=0}=$u,{bottom:Ou=0}=$u,{center:Du=!1}=$u,{horizontalCenter:ku=!1}=$u,{verticalCenter:Fu=!1}=$u,{blurRadius:Nu}=$u,{spreadRadius:Gu}=$u,{opacity:zu=.15}=$u,{zIndex:Hu=-1}=$u;return _u.$$set=Uu=>{"inDelay"in Uu&&Tu(0,Cu=Uu.inDelay),"outDelay"in Uu&&Tu(1,Pu=Uu.outDelay),"visible"in Uu&&Tu(2,Ru=Uu.visible),"width"in Uu&&Tu(3,Lu=Uu.width),"height"in Uu&&Tu(4,Bu=Uu.height),"left"in Uu&&Tu(5,Vu=Uu.left),"bottom"in Uu&&Tu(6,Ou=Uu.bottom),"center"in Uu&&Tu(7,Du=Uu.center),"horizontalCenter"in Uu&&Tu(8,ku=Uu.horizontalCenter),"verticalCenter"in Uu&&Tu(9,Fu=Uu.verticalCenter),"blurRadius"in Uu&&Tu(10,Nu=Uu.blurRadius),"spreadRadius"in Uu&&Tu(11,Gu=Uu.spreadRadius),"opacity"in Uu&&Tu(12,zu=Uu.opacity),"zIndex"in Uu&&Tu(13,Hu=Uu.zIndex)},[Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu]}class Q$9 extends Te{constructor($u){super(),Me(this,$u,L$7,K$a,Ft,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,blurRadius:10,spreadRadius:11,opacity:12,zIndex:13},J$6)}}var defaultInstanceSettings={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},defaultTweenSettings={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},validTransforms=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],cache={CSS:{},springs:{}};function minMax(_u,$u,Tu){return Math.min(Math.max(_u,$u),Tu)}function stringContains(_u,$u){return _u.indexOf($u)>-1}function applyArguments(_u,$u){return _u.apply(null,$u)}var is={arr:function(_u){return Array.isArray(_u)},obj:function(_u){return stringContains(Object.prototype.toString.call(_u),"Object")},pth:function(_u){return is.obj(_u)&&_u.hasOwnProperty("totalLength")},svg:function(_u){return _u instanceof SVGElement},inp:function(_u){return _u instanceof HTMLInputElement},dom:function(_u){return _u.nodeType||is.svg(_u)},str:function(_u){return typeof _u=="string"},fnc:function(_u){return typeof _u=="function"},und:function(_u){return typeof _u=="undefined"},nil:function(_u){return is.und(_u)||_u===null},hex:function(_u){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(_u)},rgb:function(_u){return/^rgb/.test(_u)},hsl:function(_u){return/^hsl/.test(_u)},col:function(_u){return is.hex(_u)||is.rgb(_u)||is.hsl(_u)},key:function(_u){return!defaultInstanceSettings.hasOwnProperty(_u)&&!defaultTweenSettings.hasOwnProperty(_u)&&_u!=="targets"&&_u!=="keyframes"}};function parseEasingParameters(_u){var $u=/\(([^)]+)\)/.exec(_u);return $u?$u[1].split(",").map(function(Tu){return parseFloat(Tu)}):[]}function spring(_u,$u){var Tu=parseEasingParameters(_u),Cu=minMax(is.und(Tu[0])?1:Tu[0],.1,100),Pu=minMax(is.und(Tu[1])?100:Tu[1],.1,100),Ru=minMax(is.und(Tu[2])?10:Tu[2],.1,100),Lu=minMax(is.und(Tu[3])?0:Tu[3],.1,100),Bu=Math.sqrt(Pu/Cu),Vu=Ru/(2*Math.sqrt(Pu*Cu)),Ou=Vu<1?Bu*Math.sqrt(1-Vu*Vu):0,Du=1,ku=Vu<1?(Vu*Bu+-Lu)/Ou:-Lu+Bu;function Fu(Gu){var zu=$u?$u*Gu/1e3:Gu;return Vu<1?zu=Math.exp(-zu*Vu*Bu)*(Du*Math.cos(Ou*zu)+ku*Math.sin(Ou*zu)):zu=(Du+ku*zu)*Math.exp(-zu*Bu),Gu===0||Gu===1?Gu:1-zu}function Nu(){var Gu=cache.springs[_u];if(Gu)return Gu;for(var zu=1/6,Hu=0,Uu=0;;)if(Hu+=zu,Fu(Hu)===1){if(Uu++,Uu>=16)break}else Uu=0;var ju=Hu*zu*1e3;return cache.springs[_u]=ju,ju}return $u?Fu:Nu}function steps(_u){return _u===void 0&&(_u=10),function($u){return Math.ceil(minMax($u,1e-6,1)*_u)*(1/_u)}}var bezier=function(){var _u=11,$u=1/(_u-1);function Tu(Du,ku){return 1-3*ku+3*Du}function Cu(Du,ku){return 3*ku-6*Du}function Pu(Du){return 3*Du}function Ru(Du,ku,Fu){return((Tu(ku,Fu)*Du+Cu(ku,Fu))*Du+Pu(ku))*Du}function Lu(Du,ku,Fu){return 3*Tu(ku,Fu)*Du*Du+2*Cu(ku,Fu)*Du+Pu(ku)}function Bu(Du,ku,Fu,Nu,Gu){var zu,Hu,Uu=0;do Hu=ku+(Fu-ku)/2,zu=Ru(Hu,Nu,Gu)-Du,zu>0?Fu=Hu:ku=Hu;while(Math.abs(zu)>1e-7&&++Uu<10);return Hu}function Vu(Du,ku,Fu,Nu){for(var Gu=0;Gu<4;++Gu){var zu=Lu(ku,Fu,Nu);if(zu===0)return ku;var Hu=Ru(ku,Fu,Nu)-Du;ku-=Hu/zu}return ku}function Ou(Du,ku,Fu,Nu){if(!(0<=Du&&Du<=1&&0<=Fu&&Fu<=1))return;var Gu=new Float32Array(_u);if(Du!==ku||Fu!==Nu)for(var zu=0;zu<_u;++zu)Gu[zu]=Ru(zu*$u,Du,Fu);function Hu(Uu){for(var ju=0,Wu=1,Qu=_u-1;Wu!==Qu&&Gu[Wu]<=Uu;++Wu)ju+=$u;--Wu;var qu=(Uu-Gu[Wu])/(Gu[Wu+1]-Gu[Wu]),Yu=ju+qu*$u,Ju=Lu(Yu,Du,Fu);return Ju>=.001?Vu(Uu,Yu,Du,Fu):Ju===0?Yu:Bu(Uu,ju,ju+$u,Du,Fu)}return function(Uu){return Du===ku&&Fu===Nu||Uu===0||Uu===1?Uu:Ru(Hu(Uu),ku,Nu)}}return Ou}(),penner=function(){var _u={linear:function(){return function(Cu){return Cu}}},$u={Sine:function(){return function(Cu){return 1-Math.cos(Cu*Math.PI/2)}},Circ:function(){return function(Cu){return 1-Math.sqrt(1-Cu*Cu)}},Back:function(){return function(Cu){return Cu*Cu*(3*Cu-2)}},Bounce:function(){return function(Cu){for(var Pu,Ru=4;Cu<((Pu=Math.pow(2,--Ru))-1)/11;);return 1/Math.pow(4,3-Ru)-7.5625*Math.pow((Pu*3-2)/22-Cu,2)}},Elastic:function(Cu,Pu){Cu===void 0&&(Cu=1),Pu===void 0&&(Pu=.5);var Ru=minMax(Cu,1,10),Lu=minMax(Pu,.1,2);return function(Bu){return Bu===0||Bu===1?Bu:-Ru*Math.pow(2,10*(Bu-1))*Math.sin((Bu-1-Lu/(Math.PI*2)*Math.asin(1/Ru))*(Math.PI*2)/Lu)}}},Tu=["Quad","Cubic","Quart","Quint","Expo"];return Tu.forEach(function(Cu,Pu){$u[Cu]=function(){return function(Ru){return Math.pow(Ru,Pu+2)}}}),Object.keys($u).forEach(function(Cu){var Pu=$u[Cu];_u["easeIn"+Cu]=Pu,_u["easeOut"+Cu]=function(Ru,Lu){return function(Bu){return 1-Pu(Ru,Lu)(1-Bu)}},_u["easeInOut"+Cu]=function(Ru,Lu){return function(Bu){return Bu<.5?Pu(Ru,Lu)(Bu*2)/2:1-Pu(Ru,Lu)(Bu*-2+2)/2}},_u["easeOutIn"+Cu]=function(Ru,Lu){return function(Bu){return Bu<.5?(1-Pu(Ru,Lu)(1-Bu*2))/2:(Pu(Ru,Lu)(Bu*2-1)+1)/2}}}),_u}();function parseEasings(_u,$u){if(is.fnc(_u))return _u;var Tu=_u.split("(")[0],Cu=penner[Tu],Pu=parseEasingParameters(_u);switch(Tu){case"spring":return spring(_u,$u);case"cubicBezier":return applyArguments(bezier,Pu);case"steps":return applyArguments(steps,Pu);default:return applyArguments(Cu,Pu)}}function selectString(_u){try{var $u=document.querySelectorAll(_u);return $u}catch{return}}function filterArray(_u,$u){for(var Tu=_u.length,Cu=arguments.length>=2?arguments[1]:void 0,Pu=[],Ru=0;Ru<Tu;Ru++)if(Ru in _u){var Lu=_u[Ru];$u.call(Cu,Lu,Ru,_u)&&Pu.push(Lu)}return Pu}function flattenArray(_u){return _u.reduce(function($u,Tu){return $u.concat(is.arr(Tu)?flattenArray(Tu):Tu)},[])}function toArray(_u){return is.arr(_u)?_u:(is.str(_u)&&(_u=selectString(_u)||_u),_u instanceof NodeList||_u instanceof HTMLCollection?[].slice.call(_u):[_u])}function arrayContains(_u,$u){return _u.some(function(Tu){return Tu===$u})}function cloneObject(_u){var $u={};for(var Tu in _u)$u[Tu]=_u[Tu];return $u}function replaceObjectProps(_u,$u){var Tu=cloneObject(_u);for(var Cu in _u)Tu[Cu]=$u.hasOwnProperty(Cu)?$u[Cu]:_u[Cu];return Tu}function mergeObjects(_u,$u){var Tu=cloneObject(_u);for(var Cu in $u)Tu[Cu]=is.und(_u[Cu])?$u[Cu]:_u[Cu];return Tu}function rgbToRgba(_u){var $u=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(_u);return $u?"rgba("+$u[1]+",1)":_u}function hexToRgba(_u){var $u=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Tu=_u.replace($u,function(Bu,Vu,Ou,Du){return Vu+Vu+Ou+Ou+Du+Du}),Cu=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Tu),Pu=parseInt(Cu[1],16),Ru=parseInt(Cu[2],16),Lu=parseInt(Cu[3],16);return"rgba("+Pu+","+Ru+","+Lu+",1)"}function hslToRgba(_u){var $u=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_u)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(_u),Tu=parseInt($u[1],10)/360,Cu=parseInt($u[2],10)/100,Pu=parseInt($u[3],10)/100,Ru=$u[4]||1;function Lu(Fu,Nu,Gu){return Gu<0&&(Gu+=1),Gu>1&&(Gu-=1),Gu<1/6?Fu+(Nu-Fu)*6*Gu:Gu<1/2?Nu:Gu<2/3?Fu+(Nu-Fu)*(2/3-Gu)*6:Fu}var Bu,Vu,Ou;if(Cu==0)Bu=Vu=Ou=Pu;else{var Du=Pu<.5?Pu*(1+Cu):Pu+Cu-Pu*Cu,ku=2*Pu-Du;Bu=Lu(ku,Du,Tu+1/3),Vu=Lu(ku,Du,Tu),Ou=Lu(ku,Du,Tu-1/3)}return"rgba("+Bu*255+","+Vu*255+","+Ou*255+","+Ru+")"}function colorToRgb(_u){if(is.rgb(_u))return rgbToRgba(_u);if(is.hex(_u))return hexToRgba(_u);if(is.hsl(_u))return hslToRgba(_u)}function getUnit(_u){var $u=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(_u);if($u)return $u[1]}function getTransformUnit(_u){if(stringContains(_u,"translate")||_u==="perspective")return"px";if(stringContains(_u,"rotate")||stringContains(_u,"skew"))return"deg"}function getFunctionValue(_u,$u){return is.fnc(_u)?_u($u.target,$u.id,$u.total):_u}function getAttribute(_u,$u){return _u.getAttribute($u)}function convertPxToUnit(_u,$u,Tu){var Cu=getUnit($u);if(arrayContains([Tu,"deg","rad","turn"],Cu))return $u;var Pu=cache.CSS[$u+Tu];if(!is.und(Pu))return Pu;var Ru=100,Lu=document.createElement(_u.tagName),Bu=_u.parentNode&&_u.parentNode!==document?_u.parentNode:document.body;Bu.appendChild(Lu),Lu.style.position="absolute",Lu.style.width=Ru+Tu;var Vu=Ru/Lu.offsetWidth;Bu.removeChild(Lu);var Ou=Vu*parseFloat($u);return cache.CSS[$u+Tu]=Ou,Ou}function getCSSValue(_u,$u,Tu){if($u in _u.style){var Cu=$u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Pu=_u.style[$u]||getComputedStyle(_u).getPropertyValue(Cu)||"0";return Tu?convertPxToUnit(_u,Pu,Tu):Pu}}function getAnimationType(_u,$u){if(is.dom(_u)&&!is.inp(_u)&&(!is.nil(getAttribute(_u,$u))||is.svg(_u)&&_u[$u]))return"attribute";if(is.dom(_u)&&arrayContains(validTransforms,$u))return"transform";if(is.dom(_u)&&$u!=="transform"&&getCSSValue(_u,$u))return"css";if(_u[$u]!=null)return"object"}function getElementTransforms(_u){if(!!is.dom(_u)){for(var $u=_u.style.transform||"",Tu=/(\w+)\(([^)]*)\)/g,Cu=new Map,Pu;Pu=Tu.exec($u);)Cu.set(Pu[1],Pu[2]);return Cu}}function getTransformValue(_u,$u,Tu,Cu){var Pu=stringContains($u,"scale")?1:0+getTransformUnit($u),Ru=getElementTransforms(_u).get($u)||Pu;return Tu&&(Tu.transforms.list.set($u,Ru),Tu.transforms.last=$u),Cu?convertPxToUnit(_u,Ru,Cu):Ru}function getOriginalTargetValue(_u,$u,Tu,Cu){switch(getAnimationType(_u,$u)){case"transform":return getTransformValue(_u,$u,Cu,Tu);case"css":return getCSSValue(_u,$u,Tu);case"attribute":return getAttribute(_u,$u);default:return _u[$u]||0}}function getRelativeValue(_u,$u){var Tu=/^(\*=|\+=|-=)/.exec(_u);if(!Tu)return _u;var Cu=getUnit(_u)||0,Pu=parseFloat($u),Ru=parseFloat(_u.replace(Tu[0],""));switch(Tu[0][0]){case"+":return Pu+Ru+Cu;case"-":return Pu-Ru+Cu;case"*":return Pu*Ru+Cu}}function validateValue(_u,$u){if(is.col(_u))return colorToRgb(_u);if(/\s/g.test(_u))return _u;var Tu=getUnit(_u),Cu=Tu?_u.substr(0,_u.length-Tu.length):_u;return $u?Cu+$u:Cu}function getDistance(_u,$u){return Math.sqrt(Math.pow($u.x-_u.x,2)+Math.pow($u.y-_u.y,2))}function getCircleLength(_u){return Math.PI*2*getAttribute(_u,"r")}function getRectLength(_u){return getAttribute(_u,"width")*2+getAttribute(_u,"height")*2}function getLineLength(_u){return getDistance({x:getAttribute(_u,"x1"),y:getAttribute(_u,"y1")},{x:getAttribute(_u,"x2"),y:getAttribute(_u,"y2")})}function getPolylineLength(_u){for(var $u=_u.points,Tu=0,Cu,Pu=0;Pu<$u.numberOfItems;Pu++){var Ru=$u.getItem(Pu);Pu>0&&(Tu+=getDistance(Cu,Ru)),Cu=Ru}return Tu}function getPolygonLength(_u){var $u=_u.points;return getPolylineLength(_u)+getDistance($u.getItem($u.numberOfItems-1),$u.getItem(0))}function getTotalLength(_u){if(_u.getTotalLength)return _u.getTotalLength();switch(_u.tagName.toLowerCase()){case"circle":return getCircleLength(_u);case"rect":return getRectLength(_u);case"line":return getLineLength(_u);case"polyline":return getPolylineLength(_u);case"polygon":return getPolygonLength(_u)}}function setDashoffset(_u){var $u=getTotalLength(_u);return _u.setAttribute("stroke-dasharray",$u),$u}function getParentSvgEl(_u){for(var $u=_u.parentNode;is.svg($u)&&is.svg($u.parentNode);)$u=$u.parentNode;return $u}function getParentSvg(_u,$u){var Tu=$u||{},Cu=Tu.el||getParentSvgEl(_u),Pu=Cu.getBoundingClientRect(),Ru=getAttribute(Cu,"viewBox"),Lu=Pu.width,Bu=Pu.height,Vu=Tu.viewBox||(Ru?Ru.split(" "):[0,0,Lu,Bu]);return{el:Cu,viewBox:Vu,x:Vu[0]/1,y:Vu[1]/1,w:Lu,h:Bu,vW:Vu[2],vH:Vu[3]}}function getPath(_u,$u){var Tu=is.str(_u)?selectString(_u)[0]:_u,Cu=$u||100;return function(Pu){return{property:Pu,el:Tu,svg:getParentSvg(Tu),totalLength:getTotalLength(Tu)*(Cu/100)}}}function getPathProgress(_u,$u,Tu){function Cu(Du){Du===void 0&&(Du=0);var ku=$u+Du>=1?$u+Du:0;return _u.el.getPointAtLength(ku)}var Pu=getParentSvg(_u.el,_u.svg),Ru=Cu(),Lu=Cu(-1),Bu=Cu(1),Vu=Tu?1:Pu.w/Pu.vW,Ou=Tu?1:Pu.h/Pu.vH;switch(_u.property){case"x":return(Ru.x-Pu.x)*Vu;case"y":return(Ru.y-Pu.y)*Ou;case"angle":return Math.atan2(Bu.y-Lu.y,Bu.x-Lu.x)*180/Math.PI}}function decomposeValue(_u,$u){var Tu=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Cu=validateValue(is.pth(_u)?_u.totalLength:_u,$u)+"";return{original:Cu,numbers:Cu.match(Tu)?Cu.match(Tu).map(Number):[0],strings:is.str(_u)||$u?Cu.split(Tu):[]}}function parseTargets(_u){var $u=_u?flattenArray(is.arr(_u)?_u.map(toArray):toArray(_u)):[];return filterArray($u,function(Tu,Cu,Pu){return Pu.indexOf(Tu)===Cu})}function getAnimatables(_u){var $u=parseTargets(_u);return $u.map(function(Tu,Cu){return{target:Tu,id:Cu,total:$u.length,transforms:{list:getElementTransforms(Tu)}}})}function normalizePropertyTweens(_u,$u){var Tu=cloneObject($u);if(/^spring/.test(Tu.easing)&&(Tu.duration=spring(Tu.easing)),is.arr(_u)){var Cu=_u.length,Pu=Cu===2&&!is.obj(_u[0]);Pu?_u={value:_u}:is.fnc($u.duration)||(Tu.duration=$u.duration/Cu)}var Ru=is.arr(_u)?_u:[_u];return Ru.map(function(Lu,Bu){var Vu=is.obj(Lu)&&!is.pth(Lu)?Lu:{value:Lu};return is.und(Vu.delay)&&(Vu.delay=Bu?0:$u.delay),is.und(Vu.endDelay)&&(Vu.endDelay=Bu===Ru.length-1?$u.endDelay:0),Vu}).map(function(Lu){return mergeObjects(Lu,Tu)})}function flattenKeyframes(_u){for(var $u=filterArray(flattenArray(_u.map(function(Ru){return Object.keys(Ru)})),function(Ru){return is.key(Ru)}).reduce(function(Ru,Lu){return Ru.indexOf(Lu)<0&&Ru.push(Lu),Ru},[]),Tu={},Cu=function(Ru){var Lu=$u[Ru];Tu[Lu]=_u.map(function(Bu){var Vu={};for(var Ou in Bu)is.key(Ou)?Ou==Lu&&(Vu.value=Bu[Ou]):Vu[Ou]=Bu[Ou];return Vu})},Pu=0;Pu<$u.length;Pu++)Cu(Pu);return Tu}function getProperties(_u,$u){var Tu=[],Cu=$u.keyframes;Cu&&($u=mergeObjects(flattenKeyframes(Cu),$u));for(var Pu in $u)is.key(Pu)&&Tu.push({name:Pu,tweens:normalizePropertyTweens($u[Pu],_u)});return Tu}function normalizeTweenValues(_u,$u){var Tu={};for(var Cu in _u){var Pu=getFunctionValue(_u[Cu],$u);is.arr(Pu)&&(Pu=Pu.map(function(Ru){return getFunctionValue(Ru,$u)}),Pu.length===1&&(Pu=Pu[0])),Tu[Cu]=Pu}return Tu.duration=parseFloat(Tu.duration),Tu.delay=parseFloat(Tu.delay),Tu}function normalizeTweens(_u,$u){var Tu;return _u.tweens.map(function(Cu){var Pu=normalizeTweenValues(Cu,$u),Ru=Pu.value,Lu=is.arr(Ru)?Ru[1]:Ru,Bu=getUnit(Lu),Vu=getOriginalTargetValue($u.target,_u.name,Bu,$u),Ou=Tu?Tu.to.original:Vu,Du=is.arr(Ru)?Ru[0]:Ou,ku=getUnit(Du)||getUnit(Vu),Fu=Bu||ku;return is.und(Lu)&&(Lu=Ou),Pu.from=decomposeValue(Du,Fu),Pu.to=decomposeValue(getRelativeValue(Lu,Du),Fu),Pu.start=Tu?Tu.end:0,Pu.end=Pu.start+Pu.delay+Pu.duration+Pu.endDelay,Pu.easing=parseEasings(Pu.easing,Pu.duration),Pu.isPath=is.pth(Ru),Pu.isPathTargetInsideSVG=Pu.isPath&&is.svg($u.target),Pu.isColor=is.col(Pu.from.original),Pu.isColor&&(Pu.round=1),Tu=Pu,Pu})}var setProgressValue={css:function(_u,$u,Tu){return _u.style[$u]=Tu},attribute:function(_u,$u,Tu){return _u.setAttribute($u,Tu)},object:function(_u,$u,Tu){return _u[$u]=Tu},transform:function(_u,$u,Tu,Cu,Pu){if(Cu.list.set($u,Tu),$u===Cu.last||Pu){var Ru="";Cu.list.forEach(function(Lu,Bu){Ru+=Bu+"("+Lu+") "}),_u.style.transform=Ru}}};function setTargetsValue(_u,$u){var Tu=getAnimatables(_u);Tu.forEach(function(Cu){for(var Pu in $u){var Ru=getFunctionValue($u[Pu],Cu),Lu=Cu.target,Bu=getUnit(Ru),Vu=getOriginalTargetValue(Lu,Pu,Bu,Cu),Ou=Bu||getUnit(Vu),Du=getRelativeValue(validateValue(Ru,Ou),Vu),ku=getAnimationType(Lu,Pu);setProgressValue[ku](Lu,Pu,Du,Cu.transforms,!0)}})}function createAnimation(_u,$u){var Tu=getAnimationType(_u.target,$u.name);if(Tu){var Cu=normalizeTweens($u,_u),Pu=Cu[Cu.length-1];return{type:Tu,property:$u.name,animatable:_u,tweens:Cu,duration:Pu.end,delay:Cu[0].delay,endDelay:Pu.endDelay}}}function getAnimations(_u,$u){return filterArray(flattenArray(_u.map(function(Tu){return $u.map(function(Cu){return createAnimation(Tu,Cu)})})),function(Tu){return!is.und(Tu)})}function getInstanceTimings(_u,$u){var Tu=_u.length,Cu=function(Ru){return Ru.timelineOffset?Ru.timelineOffset:0},Pu={};return Pu.duration=Tu?Math.max.apply(Math,_u.map(function(Ru){return Cu(Ru)+Ru.duration})):$u.duration,Pu.delay=Tu?Math.min.apply(Math,_u.map(function(Ru){return Cu(Ru)+Ru.delay})):$u.delay,Pu.endDelay=Tu?Pu.duration-Math.max.apply(Math,_u.map(function(Ru){return Cu(Ru)+Ru.duration-Ru.endDelay})):$u.endDelay,Pu}var instanceID=0;function createNewInstance(_u){var $u=replaceObjectProps(defaultInstanceSettings,_u),Tu=replaceObjectProps(defaultTweenSettings,_u),Cu=getProperties(Tu,_u),Pu=getAnimatables(_u.targets),Ru=getAnimations(Pu,Cu),Lu=getInstanceTimings(Ru,Tu),Bu=instanceID;return instanceID++,mergeObjects($u,{id:Bu,children:[],animatables:Pu,animations:Ru,duration:Lu.duration,delay:Lu.delay,endDelay:Lu.endDelay})}var activeInstances=[],engine=function(){var _u;function $u(){!_u&&(!isDocumentHidden()||!anime.suspendWhenDocumentHidden)&&activeInstances.length>0&&(_u=requestAnimationFrame(Tu))}function Tu(Pu){for(var Ru=activeInstances.length,Lu=0;Lu<Ru;){var Bu=activeInstances[Lu];Bu.paused?(activeInstances.splice(Lu,1),Ru--):(Bu.tick(Pu),Lu++)}_u=Lu>0?requestAnimationFrame(Tu):void 0}function Cu(){!anime.suspendWhenDocumentHidden||(isDocumentHidden()?_u=cancelAnimationFrame(_u):(activeInstances.forEach(function(Pu){return Pu._onDocumentVisibility()}),engine()))}return typeof document!="undefined"&&document.addEventListener("visibilitychange",Cu),$u}();function isDocumentHidden(){return!!document&&document.hidden}function anime(_u){_u===void 0&&(_u={});var $u=0,Tu=0,Cu=0,Pu,Ru=0,Lu=null;function Bu(ju){var Wu=window.Promise&&new Promise(function(Qu){return Lu=Qu});return ju.finished=Wu,Wu}var Vu=createNewInstance(_u);Bu(Vu);function Ou(){var ju=Vu.direction;ju!=="alternate"&&(Vu.direction=ju!=="normal"?"normal":"reverse"),Vu.reversed=!Vu.reversed,Pu.forEach(function(Wu){return Wu.reversed=Vu.reversed})}function Du(ju){return Vu.reversed?Vu.duration-ju:ju}function ku(){$u=0,Tu=Du(Vu.currentTime)*(1/anime.speed)}function Fu(ju,Wu){Wu&&Wu.seek(ju-Wu.timelineOffset)}function Nu(ju){if(Vu.reversePlayback)for(var Qu=Ru;Qu--;)Fu(ju,Pu[Qu]);else for(var Wu=0;Wu<Ru;Wu++)Fu(ju,Pu[Wu])}function Gu(ju){for(var Wu=0,Qu=Vu.animations,qu=Qu.length;Wu<qu;){var Yu=Qu[Wu],Ju=Yu.animatable,_d=Yu.tweens,tp=_d.length-1,Ku=_d[tp];tp&&(Ku=filterArray(_d,function(Ip){return ju<Ip.end})[0]||Ku);for(var Xu=minMax(ju-Ku.start-Ku.delay,0,Ku.duration)/Ku.duration,Zu=isNaN(Xu)?1:Ku.easing(Xu),_c=Ku.to.strings,Xc=Ku.round,_h=[],ip=Ku.to.numbers.length,ap=void 0,hp=0;hp<ip;hp++){var Ap=void 0,gp=Ku.to.numbers[hp],Rp=Ku.from.numbers[hp]||0;Ku.isPath?Ap=getPathProgress(Ku.value,Zu*gp,Ku.isPathTargetInsideSVG):Ap=Rp+Zu*(gp-Rp),Xc&&(Ku.isColor&&hp>2||(Ap=Math.round(Ap*Xc)/Xc)),_h.push(Ap)}var Sp=_c.length;if(!Sp)ap=_h[0];else{ap=_c[0];for(var Dp=0;Dp<Sp;Dp++){_c[Dp];var Ep=_c[Dp+1],Bp=_h[Dp];isNaN(Bp)||(Ep?ap+=Bp+Ep:ap+=Bp+" ")}}setProgressValue[Yu.type](Ju.target,Yu.property,ap,Ju.transforms),Yu.currentValue=ap,Wu++}}function zu(ju){Vu[ju]&&!Vu.passThrough&&Vu[ju](Vu)}function Hu(){Vu.remaining&&Vu.remaining!==!0&&Vu.remaining--}function Uu(ju){var Wu=Vu.duration,Qu=Vu.delay,qu=Wu-Vu.endDelay,Yu=Du(ju);Vu.progress=minMax(Yu/Wu*100,0,100),Vu.reversePlayback=Yu<Vu.currentTime,Pu&&Nu(Yu),!Vu.began&&Vu.currentTime>0&&(Vu.began=!0,zu("begin")),!Vu.loopBegan&&Vu.currentTime>0&&(Vu.loopBegan=!0,zu("loopBegin")),Yu<=Qu&&Vu.currentTime!==0&&Gu(0),(Yu>=qu&&Vu.currentTime!==Wu||!Wu)&&Gu(Wu),Yu>Qu&&Yu<qu?(Vu.changeBegan||(Vu.changeBegan=!0,Vu.changeCompleted=!1,zu("changeBegin")),zu("change"),Gu(Yu)):Vu.changeBegan&&(Vu.changeCompleted=!0,Vu.changeBegan=!1,zu("changeComplete")),Vu.currentTime=minMax(Yu,0,Wu),Vu.began&&zu("update"),ju>=Wu&&(Tu=0,Hu(),Vu.remaining?($u=Cu,zu("loopComplete"),Vu.loopBegan=!1,Vu.direction==="alternate"&&Ou()):(Vu.paused=!0,Vu.completed||(Vu.completed=!0,zu("loopComplete"),zu("complete"),!Vu.passThrough&&"Promise"in window&&(Lu(),Bu(Vu)))))}return Vu.reset=function(){var ju=Vu.direction;Vu.passThrough=!1,Vu.currentTime=0,Vu.progress=0,Vu.paused=!0,Vu.began=!1,Vu.loopBegan=!1,Vu.changeBegan=!1,Vu.completed=!1,Vu.changeCompleted=!1,Vu.reversePlayback=!1,Vu.reversed=ju==="reverse",Vu.remaining=Vu.loop,Pu=Vu.children,Ru=Pu.length;for(var Wu=Ru;Wu--;)Vu.children[Wu].reset();(Vu.reversed&&Vu.loop!==!0||ju==="alternate"&&Vu.loop===1)&&Vu.remaining++,Gu(Vu.reversed?Vu.duration:0)},Vu._onDocumentVisibility=ku,Vu.set=function(ju,Wu){return setTargetsValue(ju,Wu),Vu},Vu.tick=function(ju){Cu=ju,$u||($u=Cu),Uu((Cu+(Tu-$u))*anime.speed)},Vu.seek=function(ju){Uu(Du(ju))},Vu.pause=function(){Vu.paused=!0,ku()},Vu.play=function(){!Vu.paused||(Vu.completed&&Vu.reset(),Vu.paused=!1,activeInstances.push(Vu),ku(),engine())},Vu.reverse=function(){Ou(),Vu.completed=!Vu.reversed,ku()},Vu.restart=function(){Vu.reset(),Vu.play()},Vu.remove=function(ju){var Wu=parseTargets(ju);removeTargetsFromInstance(Wu,Vu)},Vu.reset(),Vu.autoplay&&Vu.play(),Vu}function removeTargetsFromAnimations(_u,$u){for(var Tu=$u.length;Tu--;)arrayContains(_u,$u[Tu].animatable.target)&&$u.splice(Tu,1)}function removeTargetsFromInstance(_u,$u){var Tu=$u.animations,Cu=$u.children;removeTargetsFromAnimations(_u,Tu);for(var Pu=Cu.length;Pu--;){var Ru=Cu[Pu],Lu=Ru.animations;removeTargetsFromAnimations(_u,Lu),!Lu.length&&!Ru.children.length&&Cu.splice(Pu,1)}!Tu.length&&!Cu.length&&$u.pause()}function removeTargetsFromActiveInstances(_u){for(var $u=parseTargets(_u),Tu=activeInstances.length;Tu--;){var Cu=activeInstances[Tu];removeTargetsFromInstance($u,Cu)}}function stagger(_u,$u){$u===void 0&&($u={});var Tu=$u.direction||"normal",Cu=$u.easing?parseEasings($u.easing):null,Pu=$u.grid,Ru=$u.axis,Lu=$u.from||0,Bu=Lu==="first",Vu=Lu==="center",Ou=Lu==="last",Du=is.arr(_u),ku=parseFloat(Du?_u[0]:_u),Fu=Du?parseFloat(_u[1]):0,Nu=getUnit(Du?_u[1]:_u)||0,Gu=$u.start||0+(Du?ku:0),zu=[],Hu=0;return function(Uu,ju,Wu){if(Bu&&(Lu=0),Vu&&(Lu=(Wu-1)/2),Ou&&(Lu=Wu-1),!zu.length){for(var Qu=0;Qu<Wu;Qu++){if(!Pu)zu.push(Math.abs(Lu-Qu));else{var qu=Vu?(Pu[0]-1)/2:Lu%Pu[0],Yu=Vu?(Pu[1]-1)/2:Math.floor(Lu/Pu[0]),Ju=Qu%Pu[0],_d=Math.floor(Qu/Pu[0]),tp=qu-Ju,Ku=Yu-_d,Xu=Math.sqrt(tp*tp+Ku*Ku);Ru==="x"&&(Xu=-tp),Ru==="y"&&(Xu=-Ku),zu.push(Xu)}Hu=Math.max.apply(Math,zu)}Cu&&(zu=zu.map(function(_c){return Cu(_c/Hu)*Hu})),Tu==="reverse"&&(zu=zu.map(function(_c){return Ru?_c<0?_c*-1:-_c:Math.abs(Hu-_c)}))}var Zu=Du?(Fu-ku)/Hu:ku;return Gu+Zu*(Math.round(zu[ju]*100)/100)+Nu}}function timeline(_u){_u===void 0&&(_u={});var $u=anime(_u);return $u.duration=0,$u.add=function(Tu,Cu){var Pu=activeInstances.indexOf($u),Ru=$u.children;Pu>-1&&activeInstances.splice(Pu,1);function Lu(Fu){Fu.passThrough=!0}for(var Bu=0;Bu<Ru.length;Bu++)Lu(Ru[Bu]);var Vu=mergeObjects(Tu,replaceObjectProps(defaultTweenSettings,_u));Vu.targets=Vu.targets||_u.targets;var Ou=$u.duration;Vu.autoplay=!1,Vu.direction=$u.direction,Vu.timelineOffset=is.und(Cu)?Ou:getRelativeValue(Cu,Ou),Lu($u),$u.seek(Vu.timelineOffset);var Du=anime(Vu);Lu(Du),Ru.push(Du);var ku=getInstanceTimings(Ru,_u);return $u.delay=ku.delay,$u.endDelay=ku.endDelay,$u.duration=ku.duration,$u.seek(0),$u.reset(),$u.autoplay&&$u.play(),$u},$u}anime.version="3.2.1";anime.speed=1;anime.suspendWhenDocumentHidden=!0;anime.running=activeInstances;anime.remove=removeTargetsFromActiveInstances;anime.get=getOriginalTargetValue;anime.set=setTargetsValue;anime.convertPx=convertPxToUnit;anime.path=getPath;anime.setDashoffset=setDashoffset;anime.stagger=stagger;anime.timeline=timeline;anime.easing=parseEasings;anime.penner=penner;anime.random=function(_u,$u){return Math.floor(Math.random()*($u-_u+1))+_u};function f$8(_u,$u){const[Tu,Cu]=$u;if(Tu>=Cu||Cu<=1||Tu<=1)return-1;const Pu={},Ru=Lu=>(Pu[Lu]||(Pu[Lu]=_u(Lu)),Pu[Lu]);for(let Lu=Tu;Lu<Cu;Lu++){const Bu=Ru(Lu),Vu=Ru(Lu-1);if(Bu<Vu)return Lu}return-1}function n$7(){return Math.random().toString(36).slice(-6)}const t$4=n$7();function K$9(_u){Qt(_u,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function R$3(_u,$u,Tu){const Cu=_u.slice();return Cu[18]=$u[Tu].id,Cu[0]=$u[Tu].content,Cu[19]=$u,Cu[20]=Tu,Cu}function Q$8(_u){let $u,Tu=_u[0]+"",Cu,Pu=_u[20];const Ru=()=>_u[9]($u,Pu),Lu=()=>_u[9](null,Pu);return{c(){$u=U$8("span"),Cu=_t$1(Tu),te$1($u,"class","text-char svelte-1b2n9wi")},m(Bu,Vu){Nt(Bu,$u,Vu),dt$1($u,Cu),Ru()},p(Bu,Vu){_u=Bu,Vu&4&&Tu!==(Tu=_u[0]+"")&&ee$2(Cu,Tu),Pu!==_u[20]&&(Lu(),Pu=_u[20],Ru())},d(Bu){Bu&&I$g($u),Lu()}}}function Z$4(_u){let $u,Tu=_u[20];const Cu=()=>_u[8]($u,Tu),Pu=()=>_u[8](null,Tu);return{c(){$u=U$8("span"),$u.textContent="\xA0",te$1($u,"class","text-char svelte-1b2n9wi")},m(Ru,Lu){Nt(Ru,$u,Lu),Cu()},p(Ru,Lu){_u=Ru,Tu!==_u[20]&&(Pu(),Tu=_u[20],Cu())},d(Ru){Ru&&I$g($u),Pu()}}}function w$8(_u,$u){let Tu,Cu;function Pu(Bu,Vu){return Bu[0]===Bu[3]?Z$4:Q$8}let Ru=Pu($u),Lu=Ru($u);return{key:_u,first:null,c(){Tu=Yt(),Lu.c(),Cu=Yt(),this.first=Tu},m(Bu,Vu){Nt(Bu,Tu,Vu),Lu.m(Bu,Vu),Nt(Bu,Cu,Vu)},p(Bu,Vu){$u=Bu,Ru===(Ru=Pu($u))&&Lu?Lu.p($u,Vu):(Lu.d(1),Lu=Ru($u),Lu&&(Lu.c(),Lu.m(Cu.parentNode,Cu)))},d(Bu){Bu&&I$g(Tu),Lu.d(Bu),Bu&&I$g(Cu)}}}function x$7(_u){let $u=[],Tu=new Map,Cu,Pu=_u[2];const Ru=Lu=>Lu[18];for(let Lu=0;Lu<Pu.length;Lu+=1){let Bu=R$3(_u,Pu,Lu),Vu=Ru(Bu);Tu.set(Vu,$u[Lu]=w$8(Vu,Bu))}return{c(){for(let Lu=0;Lu<$u.length;Lu+=1)$u[Lu].c();Cu=Yt()},m(Lu,Bu){for(let Vu=0;Vu<$u.length;Vu+=1)$u[Vu]&&$u[Vu].m(Lu,Bu);Nt(Lu,Cu,Bu)},p(Lu,[Bu]){Bu&14&&(Pu=Lu[2],$u=xe($u,Bu,Ru,1,Lu,Pu,Tu,Cu.parentNode,be$2,w$8,Cu,R$3))},i:E$e,o:E$e,d(Lu){for(let Bu=0;Bu<$u.length;Bu+=1)$u[Bu].d(Lu);Lu&&I$g(Cu)}}}function $$3(_u,$u,Tu){let Cu,{inDelay:Pu=0}=$u,{outDelay:Ru=0}=$u,{content:Lu}=$u,{unfolded:Bu}=$u,{isFistUnfoldedUpdate:Vu=!0}=$u;const Ou=`__EMOJI_SPLIT_${t$4}__`,Du=`__EMOJI_${t$4}__`,ku=`__SPACE_${t$4}__`;let Fu,Nu,Gu=[];function zu(qu){const Yu=[],Ju=new RegExp(new RegExp("\\p{Regional_Indicator}\\p{Regional_Indicator}|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?(\\u200D\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?)+|\\p{Emoji_Presentation}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)","gu"));return qu.slice().replace(Ju,_d=>`${Ou}${Du}${_d}${Ou}`).split(Ou).forEach(_d=>_d.startsWith(Du)?Yu.push({id:r$k(),content:_d.slice(Du.length)}):Yu.push(..._d.split("").map(tp=>tp===" "?ku:tp).map(tp=>({id:r$k(),content:tp})))),Yu}function Hu(){if(!Nu)return;const qu=!Bu;Nu.reversed!==qu&&Nu.reverse(),Nu.play()}function Uu(qu){if(Vu){Tu(4,Vu=!1);return}clearTimeout(Fu),Fu=setTimeout(Hu,qu?Pu:Ru)}function ju(qu){const Yu=function(){const Ju=f$8(_d=>qu[_d].getBoundingClientRect().x,[Math.min(qu.length-1,10),Math.min(qu.length-1,30)]);if(Ju>0)return Ju}();Nu=anime({targets:qu.slice(0,Yu).filter(i$7),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:anime.stagger(50),easing:"easeInOutCubic"}),Bu&&Nu.seek(Nu.duration)}function Wu(qu,Yu){rt$4[qu?"unshift":"push"](()=>{Gu[Yu]=qu,Tu(1,Gu)})}function Qu(qu,Yu){rt$4[qu?"unshift":"push"](()=>{Gu[Yu]=qu,Tu(1,Gu)})}return _u.$$set=qu=>{"inDelay"in qu&&Tu(5,Pu=qu.inDelay),"outDelay"in qu&&Tu(6,Ru=qu.outDelay),"content"in qu&&Tu(0,Lu=qu.content),"unfolded"in qu&&Tu(7,Bu=qu.unfolded),"isFistUnfoldedUpdate"in qu&&Tu(4,Vu=qu.isFistUnfoldedUpdate)},_u.$$.update=()=>{_u.$$.dirty&1&&Tu(2,Cu=zu(Lu)),_u.$$.dirty&128&&Uu(Bu),_u.$$.dirty&2&&ju(Gu.filter(qu=>!!qu))},[Lu,Gu,Cu,ku,Vu,Pu,Ru,Bu,Wu,Qu]}class re$1 extends Te{constructor($u){super(),Me(this,$u,$$3,x$7,Ft,{inDelay:5,outDelay:6,content:0,unfolded:7,isFistUnfoldedUpdate:4},K$9)}}function M$d(_u){Qt(_u,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function h$8(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du;return Tu=new Q$9({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),Cu=Xt(),Pu=U$8("div"),te$1(Pu,"class",Ru="arrow "+_u[0]+" svelte-1ogmlqq"),ne(Pu,"background-image","url("+A$b+")"),te$1($u,"class","arrow-wrapper svelte-1ogmlqq")},m(ku,Fu){Nt(ku,$u,Fu),Dt(Tu,$u,null),dt$1($u,Cu),dt$1($u,Pu),Vu=!0,Ou||(Du=st$2(Pu,"click",_u[5]),Ou=!0)},p(ku,Fu){_u=ku,(!Vu||Fu&1&&Ru!==(Ru="arrow "+_u[0]+" svelte-1ogmlqq"))&&te$1(Pu,"class",Ru)},i(ku){Vu||(tt$3(Tu.$$.fragment,ku),ku&&L$d(()=>{Vu&&(Bu&&Bu.end(1),Lu=me$2(Pu,C$e,{duration:_u[2],delay:_u[3],easing:c$g}),Lu.start())}),Vu=!0)},o(ku){$t(Tu.$$.fragment,ku),Lu&&Lu.invalidate(),ku&&(Bu=ye$2(Pu,C$e,{duration:_u[2],delay:_u[4],easing:c$g})),Vu=!1},d(ku){ku&&I$g($u),Rt(Tu),ku&&Bu&&Bu.end(),Ou=!1,Du()}}}function P$6(_u){let $u,Tu,Cu=_u[1]&&h$8(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[1]?Cu?(Cu.p(Pu,Ru),Ru&2&&tt$3(Cu,1)):(Cu=h$8(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function Q$7(_u,$u,Tu){let{direction:Cu="right"}=$u,{visible:Pu=!0}=$u,{duration:Ru=0}=$u,{inDelay:Lu=0}=$u,{outDelay:Bu=0}=$u;function Vu(Ou){he$3.call(this,_u,Ou)}return _u.$$set=Ou=>{"direction"in Ou&&Tu(0,Cu=Ou.direction),"visible"in Ou&&Tu(1,Pu=Ou.visible),"duration"in Ou&&Tu(2,Ru=Ou.duration),"inDelay"in Ou&&Tu(3,Lu=Ou.inDelay),"outDelay"in Ou&&Tu(4,Bu=Ou.outDelay)},[Cu,Pu,Ru,Lu,Bu,Vu]}class Y$6 extends Te{constructor($u){super(),Me(this,$u,Q$7,P$6,Ft,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},M$d)}}function s$6(_u,$u,Tu=20,Cu=5){return new Promise((Pu,Ru)=>{let Lu=0;const Bu=setInterval(()=>{const Vu=_u();$u(Vu)?(clearInterval(Bu),Pu(Vu)):Lu>=Cu&&(clearInterval(Bu),Ru(Vu)),Lu++},Tu)})}function I$b(_u){Qt(_u,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function w$7(_u){let $u,Tu,Cu;return Tu=new re$1({props:{unfolded:_u[0],content:_u[1],inDelay:500,outDelay:_u[5]}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","text svelte-1fuzm7v"),ne($u,"transform",_u[7])},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),_u[10]($u),Cu=!0},p(Pu,Ru){const Lu={};Ru&1&&(Lu.unfolded=Pu[0]),Ru&2&&(Lu.content=Pu[1]),Ru&32&&(Lu.outDelay=Pu[5]),Tu.$set(Lu),Ru&128&&ne($u,"transform",Pu[7])},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu),_u[10](null)}}}function k$9(_u){let $u,Tu,Cu;return Tu=new Y$6({props:{direction:_u[6],visible:_u[0],inDelay:600,duration:1e3}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","arrow svelte-1fuzm7v")},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),Cu=!0},p(Pu,Ru){const Lu={};Ru&64&&(Lu.direction=Pu[6]),Ru&1&&(Lu.visible=Pu[0]),Tu.$set(Lu)},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu)}}}function J$5(_u){let $u,Tu,Cu,Pu=_u[1]&&w$7(_u),Ru=_u[3]<_u[4]&&k$9(_u);return{c(){Pu&&Pu.c(),$u=Xt(),Ru&&Ru.c(),Tu=Yt()},m(Lu,Bu){Pu&&Pu.m(Lu,Bu),Nt(Lu,$u,Bu),Ru&&Ru.m(Lu,Bu),Nt(Lu,Tu,Bu),Cu=!0},p(Lu,[Bu]){Lu[1]?Pu?(Pu.p(Lu,Bu),Bu&2&&tt$3(Pu,1)):(Pu=w$7(Lu),Pu.c(),tt$3(Pu,1),Pu.m($u.parentNode,$u)):Pu&&(Lt(),$t(Pu,1,1,()=>{Pu=null}),Ot$1()),Lu[3]<Lu[4]?Ru?(Ru.p(Lu,Bu),Bu&24&&tt$3(Ru,1)):(Ru=k$9(Lu),Ru.c(),tt$3(Ru,1),Ru.m(Tu.parentNode,Tu)):Ru&&(Lt(),$t(Ru,1,1,()=>{Ru=null}),Ot$1())},i(Lu){Cu||(tt$3(Pu),tt$3(Ru),Cu=!0)},o(Lu){$t(Pu),$t(Ru),Cu=!1},d(Lu){Pu&&Pu.d(Lu),Lu&&I$g($u),Ru&&Ru.d(Lu),Lu&&I$g(Tu)}}}function K$8(_u,$u,Tu){let Cu,Pu,Ru,{visible:Lu=!1}=$u,{textUnfolded:Bu=!1}=$u,{content:Vu}=$u,Ou,Du=0,ku=0,Fu=0;function Nu(Gu){rt$4[Gu?"unshift":"push"](()=>{Ou=Gu,Tu(2,Ou)})}return _u.$$set=Gu=>{"visible"in Gu&&Tu(0,Lu=Gu.visible),"textUnfolded"in Gu&&Tu(8,Bu=Gu.textUnfolded),"content"in Gu&&Tu(1,Vu=Gu.content)},_u.$$.update=()=>{if(_u.$$.dirty&7&&Ou&&Lu&&Vu){const{lineHeight:Gu}=getComputedStyle(Ou);Tu(4,Fu=Ou.offsetHeight),s$6(()=>Ou==null?void 0:Ou.offsetHeight,Boolean).then(()=>{Tu(4,Fu=Ou.offsetHeight)}),Tu(3,ku=Number(Gu.replace("px","")))}_u.$$.dirty&280&&Tu(9,Du=Bu?ku-Fu:0),_u.$$.dirty&512&&Tu(7,Cu=`translateY(${Du}px)`),_u.$$.dirty&256&&Tu(6,Pu=Bu?"left":"right"),_u.$$.dirty&256&&Tu(5,Ru=Bu?450:0)},[Lu,Vu,Ou,ku,Fu,Ru,Pu,Cu,Bu,Du,Nu]}class ie$2 extends Te{constructor($u){super(),Me(this,$u,K$8,J$5,Ft,{visible:0,textUnfolded:8,content:1},I$b)}}function G$5(_u){Qt(_u,"svelte-nlvd3x",".content.svelte-nlvd3x{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function M$c(_u){var $u,Tu;let Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku;return Cu=new Q$9({props:{visible:_u[2],left:_u[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Ru=new Y$7({props:{unfolded:_u[2],length:_u[3],outDelay:_u[4]+40*Math.min((Tu=($u=_u[6][0])==null?void 0:$u.content.length)!=null?Tu:10,15),useLinearColor:!0}}),Vu=new ie$2({props:{visible:_u[2],textUnfolded:_u[1],content:_u[5]}}),{c(){Ae(Cu.$$.fragment),Pu=Xt(),Ae(Ru.$$.fragment),Lu=Xt(),Bu=U$8("div"),Ae(Vu.$$.fragment),te$1(Bu,"class","content svelte-nlvd3x")},m(Fu,Nu){Dt(Cu,Fu,Nu),Nt(Fu,Pu,Nu),Dt(Ru,Fu,Nu),Nt(Fu,Lu,Nu),Nt(Fu,Bu,Nu),Dt(Vu,Bu,null),Ou=!0,Du||(ku=[Jt(E$c.call(null,Bu)),st$2(Bu,"clientWidth",_u[8]),st$2(Bu,"click",_u[7])],Du=!0)},p(Fu,Nu){var Gu,zu;const Hu={};Nu&4&&(Hu.visible=Fu[2]),Nu&8&&(Hu.left=Fu[3]/2+"px"),Cu.$set(Hu);const Uu={};Nu&4&&(Uu.unfolded=Fu[2]),Nu&8&&(Uu.length=Fu[3]),Nu&16&&(Uu.outDelay=Fu[4]+40*Math.min((zu=(Gu=Fu[6][0])==null?void 0:Gu.content.length)!=null?zu:10,15)),Ru.$set(Uu);const ju={};Nu&4&&(ju.visible=Fu[2]),Nu&2&&(ju.textUnfolded=Fu[1]),Nu&32&&(ju.content=Fu[5]),Vu.$set(ju)},i(Fu){Ou||(tt$3(Cu.$$.fragment,Fu),tt$3(Ru.$$.fragment,Fu),tt$3(Vu.$$.fragment,Fu),Ou=!0)},o(Fu){$t(Cu.$$.fragment,Fu),$t(Ru.$$.fragment,Fu),$t(Vu.$$.fragment,Fu),Ou=!1},d(Fu){Rt(Cu,Fu),Fu&&I$g(Pu),Rt(Ru,Fu),Fu&&I$g(Lu),Fu&&I$g(Bu),Rt(Vu),Du=!1,v$b(ku)}}}function H$5(_u){let $u,Tu,Cu=_u[0].state&&M$c(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[0].state?Cu?(Cu.p(Pu,Ru),Ru&1&&tt$3(Cu,1)):(Cu=M$c(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function J$4(_u,$u,Tu){let Cu,Pu,Ru,{tag:Lu}=$u,Bu,Vu=!1,Ou=[];function Du(){Tu(1,Vu=!Vu)}const ku=Fu=>{Tu(3,Bu=Fu.detail)};return _u.$$set=Fu=>{"tag"in Fu&&Tu(0,Lu=Fu.tag)},_u.$$.update=()=>{var Fu,Nu,Gu;_u.$$.dirty&1&&Tu(2,Cu=!!((Fu=Lu.state)!=null&&Fu.unfolded)),_u.$$.dirty&1&&Tu(5,Pu=(Gu=(Nu=Lu.data.title)!=null?Nu:Lu.data.text)!=null?Gu:""),_u.$$.dirty&4&&(Cu||setTimeout(()=>{Tu(1,Vu=!1)},20)),_u.$$.dirty&2&&Tu(4,Ru=Vu?450:0)},[Lu,Vu,Cu,Bu,Ru,Pu,Ou,Du,ku]}class ae extends Te{constructor($u){super(),Me(this,$u,J$4,H$5,Ft,{tag:0},G$5)}}function e$4(_u){return typeof _u=="number"?_u/16+"rem":_u}function D$6(_u){Qt(_u,"svelte-i9wdo4",".text.svelte-i9wdo4{display:-webkit-box;display:-ms-box;display:-moz-box;position:relative;width:-moz-max-content;width:max-content;max-width:100%;-webkit-box-orient:vertical;-ms-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@keyframes svelte-i9wdo4-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.caret.svelte-i9wdo4{position:absolute;width:0.0625rem;height:100%;background-color:#fff;animation:svelte-i9wdo4-blink 1.2s infinite}.placeholder.svelte-i9wdo4{opacity:0.5}")}function F$5(_u){let $u;const Tu=_u[6].default,Cu=Bt(Tu,_u,_u[5],null);return{c(){Cu&&Cu.c()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),$u=!0},p(Pu,Ru){Cu&&Cu.p&&(!$u||Ru&32)&&It(Cu,Tu,Pu,Pu[5],$u?Ht(Tu,Pu[5],Ru,null):Ut(Pu[5]),null)},i(Pu){$u||(tt$3(Cu,Pu),$u=!0)},o(Pu){$t(Cu,Pu),$u=!1},d(Pu){Cu&&Cu.d(Pu)}}}function G$4(_u){var $u,Tu;let Cu,Pu,Ru=(($u=_u[3])==null?void 0:$u.inputting)&&v$8(),Lu=((Tu=_u[3])==null?void 0:Tu.placeholder)&&y$c(_u);return{c(){Ru&&Ru.c(),Cu=Xt(),Lu&&Lu.c(),Pu=Yt()},m(Bu,Vu){Ru&&Ru.m(Bu,Vu),Nt(Bu,Cu,Vu),Lu&&Lu.m(Bu,Vu),Nt(Bu,Pu,Vu)},p(Bu,Vu){var Ou,Du;(Ou=Bu[3])!=null&&Ou.inputting?Ru||(Ru=v$8(),Ru.c(),Ru.m(Cu.parentNode,Cu)):Ru&&(Ru.d(1),Ru=null),(Du=Bu[3])!=null&&Du.placeholder?Lu?Lu.p(Bu,Vu):(Lu=y$c(Bu),Lu.c(),Lu.m(Pu.parentNode,Pu)):Lu&&(Lu.d(1),Lu=null)},i:E$e,o:E$e,d(Bu){Ru&&Ru.d(Bu),Bu&&I$g(Cu),Lu&&Lu.d(Bu),Bu&&I$g(Pu)}}}function H$4(_u){let $u;return{c(){$u=_t$1(_u[2])},m(Tu,Cu){Nt(Tu,$u,Cu)},p(Tu,Cu){Cu&4&&ee$2($u,Tu[2])},i:E$e,o:E$e,d(Tu){Tu&&I$g($u)}}}function v$8(_u){let $u;return{c(){$u=U$8("div"),te$1($u,"class","caret svelte-i9wdo4")},m(Tu,Cu){Nt(Tu,$u,Cu)},d(Tu){Tu&&I$g($u)}}}function y$c(_u){let $u,Tu=_u[3].placeholder+"",Cu;return{c(){$u=U$8("span"),Cu=_t$1(Tu),te$1($u,"class","placeholder svelte-i9wdo4")},m(Pu,Ru){Nt(Pu,$u,Ru),dt$1($u,Cu)},p(Pu,Ru){Ru&8&&Tu!==(Tu=Pu[3].placeholder+"")&&ee$2(Cu,Tu)},d(Pu){Pu&&I$g($u)}}}function I$a(_u){let $u,Tu,Cu,Pu;const Ru=[H$4,G$4,F$5],Lu=[];function Bu(Vu,Ou){return Vu[2]?0:Vu[4]?1:2}return Tu=Bu(_u),Cu=Lu[Tu]=Ru[Tu](_u),{c(){$u=U$8("div"),Cu.c(),te$1($u,"class","text svelte-i9wdo4"),ne($u,"max-width",typeof _u[1]=="number"?e$4(_u[1]):_u[1]),ne($u,"-webkit-line-clamp",_u[0])},m(Vu,Ou){Nt(Vu,$u,Ou),Lu[Tu].m($u,null),Pu=!0},p(Vu,[Ou]){let Du=Tu;Tu=Bu(Vu),Tu===Du?Lu[Tu].p(Vu,Ou):(Lt(),$t(Lu[Du],1,1,()=>{Lu[Du]=null}),Ot$1(),Cu=Lu[Tu],Cu?Cu.p(Vu,Ou):(Cu=Lu[Tu]=Ru[Tu](Vu),Cu.c()),tt$3(Cu,1),Cu.m($u,null)),Ou&2&&ne($u,"max-width",typeof Vu[1]=="number"?e$4(Vu[1]):Vu[1]),Ou&1&&ne($u,"-webkit-line-clamp",Vu[0])},i(Vu){Pu||(tt$3(Cu),Pu=!0)},o(Vu){$t(Cu),Pu=!1},d(Vu){Vu&&I$g($u),Lu[Tu].d()}}}function J$3(_u,$u,Tu){let Cu,{$$slots:Pu={},$$scope:Ru}=$u,{maxLine:Lu=1}=$u,{maxWidth:Bu=null}=$u,{text:Vu=null}=$u,{edit:Ou=null}=$u;return _u.$$set=Du=>{"maxLine"in Du&&Tu(0,Lu=Du.maxLine),"maxWidth"in Du&&Tu(1,Bu=Du.maxWidth),"text"in Du&&Tu(2,Vu=Du.text),"edit"in Du&&Tu(3,Ou=Du.edit),"$$scope"in Du&&Tu(5,Ru=Du.$$scope)},_u.$$.update=()=>{_u.$$.dirty&8&&Tu(4,Cu=(Ou==null?void 0:Ou.placeholder)||(Ou==null?void 0:Ou.inputting))},[Lu,Bu,Vu,Ou,Cu,Ru,Pu]}class P$5 extends Te{constructor($u){super(),Me(this,$u,J$3,I$a,Ft,{maxLine:0,maxWidth:1,text:2,edit:3},D$6)}}function I$9(_u){Qt(_u,"svelte-1oxrkr1",".plane__container.svelte-1oxrkr1.svelte-1oxrkr1{position:absolute;left:50%;transform:translate(-50%, -100%);width:-moz-max-content;width:max-content}.plane__wrapper.svelte-1oxrkr1.svelte-1oxrkr1{transition:transform 500ms linear, opacity 200ms linear;padding:0.625rem;background-color:rgba(0, 0, 0, 0.5);border:0.03125rem solid rgba(255, 255, 255, 0.3);border-radius:0.25rem}.unfolded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{transition-delay:200ms, 500ms;opacity:1}.folded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{opacity:0}.plane.svelte-1oxrkr1.svelte-1oxrkr1{max-width:11.75rem}.title.svelte-1oxrkr1.svelte-1oxrkr1{white-space:pre-wrap;font-weight:bold;font-size:0.75rem;line-height:1.125rem}.description.svelte-1oxrkr1.svelte-1oxrkr1{margin-top:0.25rem;white-space:pre-wrap;font-size:0.6875rem;line-height:1rem}")}function D$5(_u){var $u,Tu;let Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku;Cu=new Y$7({props:{unfolded:_u[1],direction:"vertical",length:15,duration:500,inDelay:200,useLinearColor:!0}}),Ou=new P$5({props:{text:_u[2],edit:($u=_u[0].data.edit)==null?void 0:$u.title}});let Fu=(_u[0].data.description||((Tu=_u[0].data.edit)==null?void 0:Tu.description))&&M$b(_u);return{c(){Ae(Cu.$$.fragment),Pu=Xt(),Ru=U$8("div"),Lu=U$8("div"),Bu=U$8("div"),Vu=U$8("div"),Ae(Ou.$$.fragment),Du=Xt(),Fu&&Fu.c(),te$1(Vu,"class","title svelte-1oxrkr1"),te$1(Bu,"class","plane svelte-1oxrkr1"),te$1(Lu,"class","plane__wrapper svelte-1oxrkr1"),ne(Lu,"transform",_u[1]?"translateY(-15px)":"translateY(0)"),te$1(Ru,"class","plane__container svelte-1oxrkr1"),re$2(Ru,"unfolded",_u[1]),re$2(Ru,"folded",_u[3])},m(Nu,Gu){Dt(Cu,Nu,Gu),Nt(Nu,Pu,Gu),Nt(Nu,Ru,Gu),dt$1(Ru,Lu),dt$1(Lu,Bu),dt$1(Bu,Vu),Dt(Ou,Vu,null),dt$1(Bu,Du),Fu&&Fu.m(Bu,null),ku=!0},p(Nu,Gu){var zu,Hu;const Uu={};Gu&2&&(Uu.unfolded=Nu[1]),Cu.$set(Uu);const ju={};Gu&4&&(ju.text=Nu[2]),Gu&1&&(ju.edit=(zu=Nu[0].data.edit)==null?void 0:zu.title),Ou.$set(ju),Nu[0].data.description||(Hu=Nu[0].data.edit)!=null&&Hu.description?Fu?(Fu.p(Nu,Gu),Gu&1&&tt$3(Fu,1)):(Fu=M$b(Nu),Fu.c(),tt$3(Fu,1),Fu.m(Bu,null)):Fu&&(Lt(),$t(Fu,1,1,()=>{Fu=null}),Ot$1()),Gu&2&&ne(Lu,"transform",Nu[1]?"translateY(-15px)":"translateY(0)"),(!ku||Gu&2)&&re$2(Ru,"unfolded",Nu[1]),(!ku||Gu&8)&&re$2(Ru,"folded",Nu[3])},i(Nu){ku||(tt$3(Cu.$$.fragment,Nu),tt$3(Ou.$$.fragment,Nu),tt$3(Fu),ku=!0)},o(Nu){$t(Cu.$$.fragment,Nu),$t(Ou.$$.fragment,Nu),$t(Fu),ku=!1},d(Nu){Rt(Cu,Nu),Nu&&I$g(Pu),Nu&&I$g(Ru),Rt(Ou),Fu&&Fu.d()}}}function M$b(_u){var $u;let Tu,Cu,Pu;return Cu=new P$5({props:{text:_u[0].data.description,edit:($u=_u[0].data.edit)==null?void 0:$u.description,maxLine:3}}),{c(){Tu=U$8("div"),Ae(Cu.$$.fragment),te$1(Tu,"class","description svelte-1oxrkr1")},m(Ru,Lu){Nt(Ru,Tu,Lu),Dt(Cu,Tu,null),Pu=!0},p(Ru,Lu){var Bu;const Vu={};Lu&1&&(Vu.text=Ru[0].data.description),Lu&1&&(Vu.edit=(Bu=Ru[0].data.edit)==null?void 0:Bu.description),Cu.$set(Vu)},i(Ru){Pu||(tt$3(Cu.$$.fragment,Ru),Pu=!0)},o(Ru){$t(Cu.$$.fragment,Ru),Pu=!1},d(Ru){Ru&&I$g(Tu),Rt(Cu)}}}function J$2(_u){let $u,Tu,Cu=_u[0].state&&D$5(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[0].state?Cu?(Cu.p(Pu,Ru),Ru&1&&tt$3(Cu,1)):(Cu=D$5(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function K$7(_u,$u,Tu){let Cu,Pu,Ru,{tag:Lu}=$u;return _u.$$set=Bu=>{"tag"in Bu&&Tu(0,Lu=Bu.tag)},_u.$$.update=()=>{var Bu,Vu,Ou;_u.$$.dirty&1&&Tu(1,Cu=!!((Bu=Lu.state)!=null&&Bu.unfolded)),_u.$$.dirty&2&&Tu(3,Pu=!Cu),_u.$$.dirty&1&&Tu(2,Ru=(Ou=(Vu=Lu.data.title)!=null?Vu:Lu.data.text)!=null?Ou:"")},[Lu,Cu,Ru,Pu]}class Z$3 extends Te{constructor($u){super(),Me(this,$u,K$7,J$2,Ft,{tag:0},I$9)}}function v$7(_u){let $u,Tu;return $u=new Z$3({props:{tag:_u[0]}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&1&&(Ru.tag=Cu[0]),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function C$b(_u){let $u,Tu;return $u=new ae({props:{tag:_u[0]}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&1&&(Ru.tag=Cu[0]),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function N$7(_u){let $u,Tu,Cu,Pu;const Ru=[C$b,v$7],Lu=[];function Bu(Vu,Ou){return Vu[1]==="line"?0:Vu[1]==="plane"?1:-1}return~($u=Bu(_u))&&(Tu=Lu[$u]=Ru[$u](_u)),{c(){Tu&&Tu.c(),Cu=Yt()},m(Vu,Ou){~$u&&Lu[$u].m(Vu,Ou),Nt(Vu,Cu,Ou),Pu=!0},p(Vu,[Ou]){let Du=$u;$u=Bu(Vu),$u===Du?~$u&&Lu[$u].p(Vu,Ou):(Tu&&(Lt(),$t(Lu[Du],1,1,()=>{Lu[Du]=null}),Ot$1()),~$u?(Tu=Lu[$u],Tu?Tu.p(Vu,Ou):(Tu=Lu[$u]=Ru[$u](Vu),Tu.c()),tt$3(Tu,1),Tu.m(Cu.parentNode,Cu)):Tu=null)},i(Vu){Pu||(tt$3(Tu),Pu=!0)},o(Vu){$t(Tu),Pu=!1},d(Vu){~$u&&Lu[$u].d(Vu),Vu&&I$g(Cu)}}}function P$4(_u,$u,Tu){let Cu,{tag:Pu}=$u;return _u.$$set=Ru=>{"tag"in Ru&&Tu(0,Pu=Ru.tag)},_u.$$.update=()=>{var Ru;_u.$$.dirty&1&&Tu(1,Cu=(Ru=Pu.data.appearance)!=null?Ru:"line")},[Pu,Cu]}class Y$5 extends Te{constructor($u){super(),Me(this,$u,P$4,N$7,Ft,{tag:0})}}function q$5(_u){Qt(_u,"svelte-blgtit",".line.svelte-blgtit{width:100%;height:100%;overflow:visible;pointer-events:none}")}function y$b(_u){let $u,Tu,Cu,Pu;return{c(){$u=At("path"),te$1($u,"fill","none"),te$1($u,"stroke","url(#"+_u[4]+")"),te$1($u,"stroke-width","1"),te$1($u,"d","M0 21 L14 0.5 L105 0.5")},m(Ru,Lu){Nt(Ru,$u,Lu),Pu=!0},p(Ru,Lu){_u=Ru},i(Ru){Pu||(Ru&&L$d(()=>{Pu&&(Cu&&Cu.end(1),Tu=me$2($u,I$f,{duration:_u[1],delay:_u[0],easing:o$d}),Tu.start())}),Pu=!0)},o(Ru){Tu&&Tu.invalidate(),Ru&&(Cu=ye$2($u,I$f,{duration:_u[1],delay:_u[2],easing:c$g})),Pu=!1},d(Ru){Ru&&I$g($u),Ru&&Cu&&Cu.end()}}}function B$6(_u){let $u,Tu,Cu,Pu,Ru,Lu=_u[3]&&y$b(_u);return{c(){$u=At("svg"),Tu=At("defs"),Cu=At("linearGradient"),Pu=At("stop"),Ru=At("stop"),Lu&&Lu.c(),te$1(Pu,"offset","25%"),te$1(Pu,"stop-color","white"),te$1(Pu,"stop-opacity","1"),te$1(Ru,"offset","100%"),te$1(Ru,"stop-color","white"),te$1(Ru,"stop-opacity","0.5"),te$1(Cu,"id",_u[4]),te$1(Cu,"gradientUnits","userSpaceOnUse"),te$1($u,"class","line svelte-blgtit"),te$1($u,"viewBox","0 0 105 21")},m(Bu,Vu){Nt(Bu,$u,Vu),dt$1($u,Tu),dt$1(Tu,Cu),dt$1(Cu,Pu),dt$1(Cu,Ru),Lu&&Lu.m($u,null)},p(Bu,[Vu]){Bu[3]?Lu?(Lu.p(Bu,Vu),Vu&8&&tt$3(Lu,1)):(Lu=y$b(Bu),Lu.c(),tt$3(Lu,1),Lu.m($u,null)):Lu&&(Lt(),$t(Lu,1,1,()=>{Lu=null}),Ot$1())},i(Bu){tt$3(Lu)},o(Bu){$t(Lu)},d(Bu){Bu&&I$g($u),Lu&&Lu.d()}}}function C$a(_u,$u,Tu){let{inDelay:Cu=0}=$u,{duration:Pu=1e3}=$u,{outDelay:Ru=0}=$u,{unfolded:Lu}=$u;const Bu=r$k();return _u.$$set=Vu=>{"inDelay"in Vu&&Tu(0,Cu=Vu.inDelay),"duration"in Vu&&Tu(1,Pu=Vu.duration),"outDelay"in Vu&&Tu(2,Ru=Vu.outDelay),"unfolded"in Vu&&Tu(3,Lu=Vu.unfolded)},[Cu,Pu,Ru,Lu,Bu]}class A$a extends Te{constructor($u){super(),Me(this,$u,C$a,B$6,Ft,{inDelay:0,duration:1,outDelay:2,unfolded:3},q$5)}}function f$7(_u){Qt(_u,"svelte-1mgyhhn",`:root{--sc-dot-size:6px;--sc-active-dot-size:8px;--sc-dot-size-animation-time:250ms}.sc-carousel-dot__dot.svelte-1mgyhhn{background-color:var(--sc-color-rgb-light);border-radius:50%;display:inline-block;opacity:0.5;transition:opacity 100ms ease,\r
      height var(--sc-dot-size-animation-time) ease,\r
      width var(--sc-dot-size-animation-time) ease;cursor:pointer;-webkit-tap-highlight-color:transparent;height:var(--sc-dot-size);width:var(--sc-dot-size)}.sc-carousel-dot__dot.svelte-1mgyhhn:hover{opacity:0.9}.sc-carousel-dot__dot_active.svelte-1mgyhhn{opacity:0.7;height:var(--sc-active-dot-size);width:var(--sc-active-dot-size)}`)}function b$4(_u){let $u,Tu,Cu;return{c(){$u=U$8("button"),te$1($u,"class","sc-carousel-button sc-carousel-dot__dot svelte-1mgyhhn"),re$2($u,"sc-carousel-dot__dot_active",_u[0])},m(Pu,Ru){Nt(Pu,$u,Ru),Tu||(Cu=st$2($u,"click",_u[1]),Tu=!0)},p(Pu,[Ru]){Ru&1&&re$2($u,"sc-carousel-dot__dot_active",Pu[0])},i:E$e,o:E$e,d(Pu){Pu&&I$g($u),Tu=!1,Cu()}}}function y$a(_u,$u,Tu){let{active:Cu=!1}=$u;function Pu(Ru){he$3.call(this,_u,Ru)}return _u.$$set=Ru=>{"active"in Ru&&Tu(0,Cu=Ru.active)},[Cu,Pu]}class k$8 extends Te{constructor($u){super(),Me(this,$u,y$a,b$4,Ft,{active:0},f$7)}}function M$a(_u){Qt(_u,"svelte-670fde",".sc-carousel-dots__container.svelte-670fde{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0 30px}.sc-carousel-dots__dot-container.svelte-670fde{height:calc(var(--sc-dot-size) + 14px);width:calc(var(--sc-dot-size) + 10px);display:flex;align-items:center;justify-content:center}")}function u$7(_u,$u,Tu){const Cu=_u.slice();return Cu[5]=$u[Tu],Cu[7]=Tu,Cu}function d$9(_u,$u){let Tu,Cu,Pu,Ru;function Lu(){return $u[3]($u[7])}return Cu=new k$8({props:{active:$u[1]===$u[7]}}),Cu.$on("click",Lu),{key:_u,first:null,c(){Tu=U$8("div"),Ae(Cu.$$.fragment),Pu=Xt(),te$1(Tu,"class","sc-carousel-dots__dot-container svelte-670fde"),this.first=Tu},m(Bu,Vu){Nt(Bu,Tu,Vu),Dt(Cu,Tu,null),dt$1(Tu,Pu),Ru=!0},p(Bu,Vu){$u=Bu;const Ou={};Vu&3&&(Ou.active=$u[1]===$u[7]),Cu.$set(Ou)},i(Bu){Ru||(tt$3(Cu.$$.fragment,Bu),Ru=!0)},o(Bu){$t(Cu.$$.fragment,Bu),Ru=!1},d(Bu){Bu&&I$g(Tu),Rt(Cu)}}}function S$5(_u){let $u,Tu=[],Cu=new Map,Pu,Ru=Array(_u[0]);const Lu=Bu=>Bu[7];for(let Bu=0;Bu<Ru.length;Bu+=1){let Vu=u$7(_u,Ru,Bu),Ou=Lu(Vu);Cu.set(Ou,Tu[Bu]=d$9(Ou,Vu))}return{c(){$u=U$8("div");for(let Bu=0;Bu<Tu.length;Bu+=1)Tu[Bu].c();te$1($u,"class","sc-carousel-dots__container svelte-670fde")},m(Bu,Vu){Nt(Bu,$u,Vu);for(let Ou=0;Ou<Tu.length;Ou+=1)Tu[Ou]&&Tu[Ou].m($u,null);Pu=!0},p(Bu,[Vu]){Vu&7&&(Ru=Array(Bu[0]),Lt(),Tu=xe(Tu,Vu,Lu,1,Bu,Ru,Cu,$u,ke$2,d$9,null,u$7),Ot$1())},i(Bu){if(!Pu){for(let Vu=0;Vu<Ru.length;Vu+=1)tt$3(Tu[Vu]);Pu=!0}},o(Bu){for(let Vu=0;Vu<Tu.length;Vu+=1)$t(Tu[Vu]);Pu=!1},d(Bu){Bu&&I$g($u);for(let Vu=0;Vu<Tu.length;Vu+=1)Tu[Vu].d()}}}function B$5(_u,$u,Tu){const Cu=fe$2();let{pagesCount:Pu=1}=$u,{currentPageIndex:Ru=0}=$u;function Lu(Vu){Cu("pageChange",Vu)}const Bu=Vu=>Lu(Vu);return _u.$$set=Vu=>{"pagesCount"in Vu&&Tu(0,Pu=Vu.pagesCount),"currentPageIndex"in Vu&&Tu(1,Ru=Vu.currentPageIndex)},[Pu,Ru,Lu,Bu]}class H$3 extends Te{constructor($u){super(),Me(this,$u,B$5,S$5,Ft,{pagesCount:0,currentPageIndex:1},M$a)}}const t$3="prev",e$3="next";function z$6(_u){Qt(_u,"svelte-1bftafx",":root{--sc-arrow-size:2px}.sc-carousel-arrow__circle.svelte-1bftafx{width:20px;height:20px;border-radius:50%;background-color:var(--sc-color-rgb-light-50p);display:flex;align-items:center;justify-content:center;transition:opacity 100ms ease;cursor:pointer;-webkit-tap-highlight-color:transparent}.sc-carousel-arrow__circle.svelte-1bftafx:hover{opacity:0.9}.sc-carousel-arrow__arrow.svelte-1bftafx{border:solid var(--sc-color-hex-dark);border-width:0 var(--sc-arrow-size) var(--sc-arrow-size) 0;padding:var(--sc-arrow-size);position:relative}.sc-carousel-arrow__arrow-next.svelte-1bftafx{transform:rotate(-45deg);left:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__arrow-prev.svelte-1bftafx{transform:rotate(135deg);right:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__circle_disabled.svelte-1bftafx,.sc-carousel-arrow__circle_disabled.svelte-1bftafx:hover{opacity:0.5}")}function k$7(_u){let $u,Tu,Cu,Pu;return{c(){$u=U$8("button"),Tu=U$8("i"),te$1(Tu,"class","sc-carousel-arrow__arrow svelte-1bftafx"),re$2(Tu,"sc-carousel-arrow__arrow-next",_u[0]===e$3),re$2(Tu,"sc-carousel-arrow__arrow-prev",_u[0]===t$3),te$1($u,"class","sc-carousel-button sc-carousel-arrow__circle svelte-1bftafx"),re$2($u,"sc-carousel-arrow__circle_disabled",_u[1])},m(Ru,Lu){Nt(Ru,$u,Lu),dt$1($u,Tu),Cu||(Pu=st$2($u,"click",_u[2]),Cu=!0)},p(Ru,[Lu]){Lu&1&&re$2(Tu,"sc-carousel-arrow__arrow-next",Ru[0]===e$3),Lu&1&&re$2(Tu,"sc-carousel-arrow__arrow-prev",Ru[0]===t$3),Lu&2&&re$2($u,"sc-carousel-arrow__circle_disabled",Ru[1])},i:E$e,o:E$e,d(Ru){Ru&&I$g($u),Cu=!1,Pu()}}}function y$9(_u,$u,Tu){let{direction:Cu=e$3}=$u,{disabled:Pu=!1}=$u;function Ru(Lu){he$3.call(this,_u,Lu)}return _u.$$set=Lu=>{"direction"in Lu&&Tu(0,Cu=Lu.direction),"disabled"in Lu&&Tu(1,Pu=Lu.disabled)},[Cu,Pu,Ru]}class q$4 extends Te{constructor($u){super(),Me(this,$u,y$9,k$7,Ft,{direction:0,disabled:1},z$6)}}function m$5(_u){Qt(_u,"svelte-i7yfid",".sc-carousel-progress__indicator.svelte-i7yfid{height:100%;background-color:var(--sc-color-hex-dark-50p)}")}function g$a(_u){let $u;return{c(){$u=U$8("div"),te$1($u,"class","sc-carousel-progress__indicator svelte-i7yfid"),ne($u,"width",_u[0]+"%")},m(Tu,Cu){Nt(Tu,$u,Cu)},p(Tu,[Cu]){Cu&1&&ne($u,"width",Tu[0]+"%")},i:E$e,o:E$e,d(Tu){Tu&&I$g($u)}}}const c$8=100;function y$8(_u,$u,Tu){let Cu,{value:Pu=0}=$u;return _u.$$set=Ru=>{"value"in Ru&&Tu(1,Pu=Ru.value)},_u.$$.update=()=>{_u.$$.dirty&2&&Tu(0,Cu=Math.min(Math.max(Pu*c$8,0),c$8))},[Cu,Pu]}class w$6 extends Te{constructor($u){super(),Me(this,$u,y$8,g$a,Ft,{value:1},m$5)}}function n$6(_u,$u){_u.addEventListener("mousedown",$u),_u.addEventListener("touchstart",$u,{passive:!0})}function v$6(_u,$u){_u.removeEventListener("mousedown",$u),_u.removeEventListener("touchstart",$u)}function o$6(_u,$u){_u.addEventListener("mouseup",$u),_u.addEventListener("touchend",$u)}function r$6(_u,$u){_u.removeEventListener("mouseup",$u),_u.removeEventListener("touchend",$u)}function i$4(_u,$u){_u.addEventListener("mousemove",$u),_u.addEventListener("touchmove",$u)}function d$8(_u,$u){_u.removeEventListener("mousemove",$u),_u.removeEventListener("touchmove",$u)}function c$7(_u){return function($u,Tu){_u.dispatchEvent(new CustomEvent($u,{detail:Tu}))}}const _$4=110,I$8=9,M$9=111,N$6=20;function f$6(_u){if("TouchEvent"in window&&_u instanceof TouchEvent){const $u=_u.touches[0];return{x:$u?$u.clientX:0,y:$u?$u.clientY:0}}return{x:_u.clientX,y:_u.clientY}}function b$3(_u,{thresholdProvider:$u}){const Tu=c$7(_u);let Cu,Pu,Ru=0,Lu,Bu=!1;function Vu(){return Date.now()-Lu>=M$9&&Math.abs(Ru)>=N$6}function Ou(Fu){Lu=Date.now(),Ru=0,Bu=!0;const Nu=f$6(Fu);Cu=Nu.x,Pu=Nu.y,Tu("swipeStart",{x:Cu,y:Pu}),i$4(window,Du),o$6(window,ku)}function Du(Fu){if(!Bu)return;const Nu=f$6(Fu),Gu=Nu.x-Cu,zu=Nu.y-Pu;Cu=Nu.x,Pu=Nu.y,Tu("swipeMove",{x:Cu,y:Pu,dx:Gu,dy:zu}),Gu!==0&&Math.sign(Gu)!==Math.sign(Ru)&&(Ru=0),Ru+=Gu,Math.abs(Ru)>$u()&&(Tu("swipeThresholdReached",{direction:Ru>0?t$3:e$3}),r$6(window,ku),d$8(window,Du))}function ku(Fu){if(r$6(window,ku),d$8(window,Du),Bu=!1,!Vu()){Tu("swipeFailed");return}const Nu=f$6(Fu);Tu("swipeEnd",{x:Nu.x,y:Nu.y})}return n$6(_u,Ou),{destroy(){v$6(_u,Ou)}}}function t$2(_u,$u){_u.addEventListener("mouseenter",$u)}function r$5(_u,$u){_u.removeEventListener("mouseenter",$u)}function v$5(_u,$u){_u.addEventListener("mouseleave",$u)}function o$5(_u,$u){_u.removeEventListener("mouseleave",$u)}function h$7(_u){const $u=c$7(_u);function Tu(){v$5(_u,Cu),$u("hovered",{value:!0})}function Cu(){$u("hovered",{value:!1}),o$5(_u,Cu)}return t$2(_u,Tu),{destroy(){r$5(_u,Tu),o$5(_u,Cu)}}}const s$5=(_u,$u)=>{const Tu=$u.x-_u.x,Cu=$u.y-_u.y;return Math.sqrt(Tu*Tu+Cu*Cu)};function r$4(_u,$u,Tu){return Math.max(_u,Math.min($u,Tu))}function n$5(_u,$u){_u.addEventListener("touchstart",$u,{passive:!0})}function o$4(_u,$u){_u.removeEventListener("touchstart",$u)}function r$3(_u,$u){_u.addEventListener("touchend",$u)}function s$4(_u,$u){_u.removeEventListener("touchend",$u)}function y$7(_u){const $u=c$7(_u);let Tu=0,Cu={x:0,y:0};function Pu({tapEndedAt:Bu,tapEndedPos:Vu}){const Ou=Bu-Tu,Du=s$5(Cu,Vu);return Ou<=_$4&&Du<=I$8}function Ru(Bu){Tu=Date.now();const Vu=Bu.touches[0];Cu={x:Vu.clientX,y:Vu.clientY},r$3(_u,Lu)}function Lu(Bu){s$4(_u,Lu);const Vu=Bu.changedTouches[0];Pu({tapEndedAt:Date.now(),tapEndedPos:{x:Vu.clientX,y:Vu.clientY}})&&$u("tapped")}return n$5(_u,Ru),{destroy(){o$4(_u,Ru),s$4(_u,Lu)}}}function a$7({currentParticleIndex:_u,particlesCount:$u,clonesCountHead:Tu,clonesCountTotal:Cu,particlesToScroll:Pu}){return _u===$u-Tu?0:_u===0?g$9({particlesCountWithoutClones:$u-Cu,particlesToScroll:Pu})-1:Math.floor((_u-Tu)/Pu)}function x$6({currentParticleIndex:_u,particlesToScroll:$u}){return Math.ceil(_u/$u)}function M$8({currentParticleIndex:_u,particlesCount:$u,clonesCountHead:Tu,clonesCountTotal:Cu,infinite:Pu,particlesToScroll:Ru}){return Pu?a$7({currentParticleIndex:_u,particlesCount:$u,clonesCountHead:Tu,clonesCountTotal:Cu,particlesToScroll:Ru}):x$6({currentParticleIndex:_u,particlesToScroll:Ru})}function g$9({particlesCountWithoutClones:_u,particlesToScroll:$u}){return Math.ceil(_u/$u)}function d$7({particlesCountWithoutClones:_u,particlesToScroll:$u,particlesToShow:Tu}){const Cu=m$4({particlesCountWithoutClones:_u,particlesToScroll:$u,particlesToShow:Tu});return Math.ceil(_u/$u)-Cu}function h$6({infinite:_u,particlesCountWithoutClones:$u,particlesToScroll:Tu,particlesToShow:Cu}){return _u?g$9({particlesCountWithoutClones:$u,particlesToScroll:Tu}):d$7({particlesCountWithoutClones:$u,particlesToScroll:Tu,particlesToShow:Cu})}function I$7({pageIndex:_u,clonesCountHead:$u,clonesCountTail:Tu,particlesToScroll:Cu,particlesCount:Pu}){return r$4(0,Math.min($u+_u*Cu,Pu-Tu),Pu-1)}function y$6({pageIndex:_u,particlesToScroll:$u,particlesCount:Tu,particlesToShow:Cu}){return r$4(0,Math.min(_u*$u,Tu-Cu),Tu-1)}function _$3({infinite:_u,pageIndex:$u,clonesCountHead:Tu,clonesCountTail:Cu,particlesToScroll:Pu,particlesCount:Ru,particlesToShow:Lu}){return _u?I$7({pageIndex:$u,clonesCountHead:Tu,clonesCountTail:Cu,particlesToScroll:Pu,particlesCount:Ru}):y$6({pageIndex:$u,particlesToScroll:Pu,particlesCount:Ru,particlesToShow:Lu})}function c$6({particlesContainerChildren:_u,particleWidth:$u}){for(let Tu=0;Tu<_u.length;Tu++)_u[Tu].style.minWidth=`${$u}px`,_u[Tu].style.maxWidth=`${$u}px`}function m$4({particlesToScroll:_u,particlesToShow:$u,particlesCountWithoutClones:Tu}){const Cu=_u-$u;let Pu=$u;for(;;){const Ru=Tu-Pu-Cu;if(Ru<$u)return Math.max(Ru,0);Pu+=$u+Cu}}function z$5(_u){return new ResizeObserver($u=>{_u({width:$u[0].contentRect.width})})}var g$8=Object.defineProperty,p$5=Object.defineProperties,a$6=Object.getOwnPropertyDescriptors,f$5=Object.getOwnPropertySymbols,i$3=Object.prototype.hasOwnProperty,r$2=Object.prototype.propertyIsEnumerable,h$5=(_u,$u,Tu)=>$u in _u?g$8(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,s$3=(_u,$u)=>{for(var Tu in $u||($u={}))i$3.call($u,Tu)&&h$5(_u,Tu,$u[Tu]);if(f$5)for(var Tu of f$5($u))r$2.call($u,Tu)&&h$5(_u,Tu,$u[Tu]);return _u},d$6=(_u,$u)=>p$5(_u,a$6($u));function N$5({clonesCountHead:_u,clonesCountTail:$u,particlesContainerChildren:Tu}){const Cu=[];for(let Lu=0;Lu<$u;Lu++)Cu.push(Tu[Lu].cloneNode(!0));const Pu=[],Ru=Tu.length;for(let Lu=Ru-1;Lu>Ru-1-_u;Lu--)Pu.push(Tu[Lu].cloneNode(!0));return{clonesToAppend:Cu,clonesToPrepend:Pu}}function x$5({particlesContainer:_u,clonesToAppend:$u,clonesToPrepend:Tu}){for(let Cu=0;Cu<$u.length;Cu++)_u.append($u[Cu]);for(let Cu=0;Cu<Tu.length;Cu++)_u.prepend(Tu[Cu])}function y$5({infinite:_u,particlesToShow:$u,partialPageSize:Tu}){const Cu=_u?{head:Math.ceil(Tu||$u),tail:Math.ceil($u)}:{head:0,tail:0};return d$6(s$3({},Cu),{total:Cu.head+Cu.tail})}const o$3=(_u,$u,Tu)=>{if(_u&&_u.hasOwnProperty($u))return _u[$u];if(Tu===void 0)throw new Error(`Required arg "${$u}" was not provided`);return Tu},w$5=_u=>$u=>{_u[$u]&&_u[$u]()};var e$2=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},$$2="Expected a function",O$7="__lodash_hash_undefined__",j$2=1/0,D$4="[object Function]",N$4="[object GeneratorFunction]",F$4="[object Symbol]",H$2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G$3=/^\w*$/,R$2=/^\./,A$9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M$7=/[\\^$.*+?()[\]{}|]/g,K$6=/\\(\\)?/g,L$6=/^\[object .+?Constructor\]$/,z$4=typeof e$2=="object"&&e$2&&e$2.Object===Object&&e$2,U$3=typeof self=="object"&&self&&self.Object===Object&&self,d$5=z$4||U$3||Function("return this")();function q$3(_u,$u){return _u==null?void 0:_u[$u]}function J$1(_u){var $u=!1;if(_u!=null&&typeof _u.toString!="function")try{$u=!!(_u+"")}catch{}return $u}var V$7=Array.prototype,X$1=Function.prototype,w$4=Object.prototype,l$6=d$5["__core-js_shared__"],m$3=function(){var _u=/[^.]+$/.exec(l$6&&l$6.keys&&l$6.keys.IE_PROTO||"");return _u?"Symbol(src)_1."+_u:""}(),x$4=X$1.toString,_$2=w$4.hasOwnProperty,P$3=w$4.toString,Y$4=RegExp("^"+x$4.call(_$2).replace(M$7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v$4=d$5.Symbol,B$4=V$7.splice,Q$6=T$4(d$5,"Map"),u$6=T$4(Object,"create"),C$9=v$4?v$4.prototype:void 0,S$4=C$9?C$9.toString:void 0;function a$5(_u){var $u=-1,Tu=_u?_u.length:0;for(this.clear();++$u<Tu;){var Cu=_u[$u];this.set(Cu[0],Cu[1])}}function W$2(){this.__data__=u$6?u$6(null):{}}function Z$2(_u){return this.has(_u)&&delete this.__data__[_u]}function k$6(_u){var $u=this.__data__;if(u$6){var Tu=$u[_u];return Tu===O$7?void 0:Tu}return _$2.call($u,_u)?$u[_u]:void 0}function tt$2(_u){var $u=this.__data__;return u$6?$u[_u]!==void 0:_$2.call($u,_u)}function et$1(_u,$u){var Tu=this.__data__;return Tu[_u]=u$6&&$u===void 0?O$7:$u,this}a$5.prototype.clear=W$2;a$5.prototype.delete=Z$2;a$5.prototype.get=k$6;a$5.prototype.has=tt$2;a$5.prototype.set=et$1;function i$2(_u){var $u=-1,Tu=_u?_u.length:0;for(this.clear();++$u<Tu;){var Cu=_u[$u];this.set(Cu[0],Cu[1])}}function rt$3(){this.__data__=[]}function nt$2(_u){var $u=this.__data__,Tu=h$4($u,_u);if(Tu<0)return!1;var Cu=$u.length-1;return Tu==Cu?$u.pop():B$4.call($u,Tu,1),!0}function at$2(_u){var $u=this.__data__,Tu=h$4($u,_u);return Tu<0?void 0:$u[Tu][1]}function ot$4(_u){return h$4(this.__data__,_u)>-1}function it$2(_u,$u){var Tu=this.__data__,Cu=h$4(Tu,_u);return Cu<0?Tu.push([_u,$u]):Tu[Cu][1]=$u,this}i$2.prototype.clear=rt$3;i$2.prototype.delete=nt$2;i$2.prototype.get=at$2;i$2.prototype.has=ot$4;i$2.prototype.set=it$2;function o$2(_u){var $u=-1,Tu=_u?_u.length:0;for(this.clear();++$u<Tu;){var Cu=_u[$u];this.set(Cu[0],Cu[1])}}function ct$1(){this.__data__={hash:new a$5,map:new(Q$6||i$2),string:new a$5}}function st$1(_u){return p$4(this,_u).delete(_u)}function ut$1(_u){return p$4(this,_u).get(_u)}function ft(_u){return p$4(this,_u).has(_u)}function ht(_u,$u){return p$4(this,_u).set(_u,$u),this}o$2.prototype.clear=ct$1;o$2.prototype.delete=st$1;o$2.prototype.get=ut$1;o$2.prototype.has=ft;o$2.prototype.set=ht;function h$4(_u,$u){for(var Tu=_u.length;Tu--;)if(St(_u[Tu][0],$u))return Tu;return-1}function pt$1(_u,$u){$u=yt($u,_u)?[$u]:_t($u);for(var Tu=0,Cu=$u.length;_u!=null&&Tu<Cu;)_u=_u[vt($u[Tu++])];return Tu&&Tu==Cu?_u:void 0}function lt$2(_u){if(!E$9(_u)||bt(_u))return!1;var $u=Ot(_u)||J$1(_u)?Y$4:L$6;return $u.test(Ct(_u))}function dt(_u){if(typeof _u=="string")return _u;if(g$7(_u))return S$4?S$4.call(_u):"";var $u=_u+"";return $u=="0"&&1/_u==-j$2?"-0":$u}function _t(_u){return I$6(_u)?_u:mt(_u)}function p$4(_u,$u){var Tu=_u.__data__;return gt$1($u)?Tu[typeof $u=="string"?"string":"hash"]:Tu.map}function T$4(_u,$u){var Tu=q$3(_u,$u);return lt$2(Tu)?Tu:void 0}function yt(_u,$u){if(I$6(_u))return!1;var Tu=typeof _u;return Tu=="number"||Tu=="symbol"||Tu=="boolean"||_u==null||g$7(_u)?!0:G$3.test(_u)||!H$2.test(_u)||$u!=null&&_u in Object($u)}function gt$1(_u){var $u=typeof _u;return $u=="string"||$u=="number"||$u=="symbol"||$u=="boolean"?_u!=="__proto__":_u===null}function bt(_u){return!!m$3&&m$3 in _u}var mt=y$4(function(_u){_u=wt(_u);var $u=[];return R$2.test(_u)&&$u.push(""),_u.replace(A$9,function(Tu,Cu,Pu,Ru){$u.push(Pu?Ru.replace(K$6,"$1"):Cu||Tu)}),$u});function vt(_u){if(typeof _u=="string"||g$7(_u))return _u;var $u=_u+"";return $u=="0"&&1/_u==-j$2?"-0":$u}function Ct(_u){if(_u!=null){try{return x$4.call(_u)}catch{}try{return _u+""}catch{}}return""}function y$4(_u,$u){if(typeof _u!="function"||$u&&typeof $u!="function")throw new TypeError($$2);var Tu=function(){var Cu=arguments,Pu=$u?$u.apply(this,Cu):Cu[0],Ru=Tu.cache;if(Ru.has(Pu))return Ru.get(Pu);var Lu=_u.apply(this,Cu);return Tu.cache=Ru.set(Pu,Lu),Lu};return Tu.cache=new(y$4.Cache||o$2),Tu}y$4.Cache=o$2;function St(_u,$u){return _u===$u||_u!==_u&&$u!==$u}var I$6=Array.isArray;function Ot(_u){var $u=E$9(_u)?P$3.call(_u):"";return $u==D$4||$u==N$4}function E$9(_u){var $u=typeof _u;return!!_u&&($u=="object"||$u=="function")}function jt(_u){return!!_u&&typeof _u=="object"}function g$7(_u){return typeof _u=="symbol"||jt(_u)&&P$3.call(_u)==F$4}function wt(_u){return _u==null?"":dt(_u)}function xt(_u,$u,Tu){var Cu=_u==null?void 0:pt$1(_u,$u);return Cu===void 0?Tu:Cu}var Tt=xt,M$6={},pe$3={get exports(){return M$6},set exports(_u){M$6=_u}};(function(_u,$u){var Tu=200,Cu="__lodash_hash_undefined__",Pu=9007199254740991,Ru="[object Arguments]",Lu="[object Array]",Bu="[object Boolean]",Vu="[object Date]",Ou="[object Error]",Du="[object Function]",ku="[object GeneratorFunction]",Fu="[object Map]",Nu="[object Number]",Gu="[object Object]",zu="[object Promise]",Hu="[object RegExp]",Uu="[object Set]",ju="[object String]",Wu="[object Symbol]",Qu="[object WeakMap]",qu="[object ArrayBuffer]",Yu="[object DataView]",Ju="[object Float32Array]",_d="[object Float64Array]",tp="[object Int8Array]",Ku="[object Int16Array]",Xu="[object Int32Array]",Zu="[object Uint8Array]",_c="[object Uint8ClampedArray]",Xc="[object Uint16Array]",_h="[object Uint32Array]",ip=/[\\^$.*+?()[\]{}|]/g,ap=/\w*$/,hp=/^\[object .+?Constructor\]$/,Ap=/^(?:0|[1-9]\d*)$/,gp={};gp[Ru]=gp[Lu]=gp[qu]=gp[Yu]=gp[Bu]=gp[Vu]=gp[Ju]=gp[_d]=gp[tp]=gp[Ku]=gp[Xu]=gp[Fu]=gp[Nu]=gp[Gu]=gp[Hu]=gp[Uu]=gp[ju]=gp[Wu]=gp[Zu]=gp[_c]=gp[Xc]=gp[_h]=!0,gp[Ou]=gp[Du]=gp[Qu]=!1;var Rp=typeof e$2=="object"&&e$2&&e$2.Object===Object&&e$2,Sp=typeof self=="object"&&self&&self.Object===Object&&self,Dp=Rp||Sp||Function("return this")(),Ep=$u&&!$u.nodeType&&$u,Bp=Ep&&!0&&_u&&!_u.nodeType&&_u,Ip=Bp&&Bp.exports===Ep;function ep(np,yp){return np.set(yp[0],yp[1]),np}function _f(np,yp){return np.add(yp),np}function op(np,yp){for(var Lp=-1,Qp=np?np.length:0;++Lp<Qp&&yp(np[Lp],Lp,np)!==!1;);return np}function rp(np,yp){for(var Lp=-1,Qp=yp.length,_v=np.length;++Lp<Qp;)np[_v+Lp]=yp[Lp];return np}function up(np,yp,Lp,Qp){var _v=-1,mv=np?np.length:0;for(Qp&&mv&&(Lp=np[++_v]);++_v<mv;)Lp=yp(Lp,np[_v],_v,np);return Lp}function cp(np,yp){for(var Lp=-1,Qp=Array(np);++Lp<np;)Qp[Lp]=yp(Lp);return Qp}function fp(np,yp){return np==null?void 0:np[yp]}function vp(np){var yp=!1;if(np!=null&&typeof np.toString!="function")try{yp=!!(np+"")}catch{}return yp}function xp(np){var yp=-1,Lp=Array(np.size);return np.forEach(function(Qp,_v){Lp[++yp]=[_v,Qp]}),Lp}function mp(np,yp){return function(Lp){return np(yp(Lp))}}function sp(np){var yp=-1,Lp=Array(np.size);return np.forEach(function(Qp){Lp[++yp]=Qp}),Lp}var lp=Array.prototype,$p=Function.prototype,Mp=Object.prototype,kp=Dp["__core-js_shared__"],Vp=function(){var np=/[^.]+$/.exec(kp&&kp.keys&&kp.keys.IE_PROTO||"");return np?"Symbol(src)_1."+np:""}(),Gp=$p.toString,qp=Mp.hasOwnProperty,Wp=Mp.toString,Yp=RegExp("^"+Gp.call(qp).replace(ip,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kp=Ip?Dp.Buffer:void 0,ev=Dp.Symbol,Xp=Dp.Uint8Array,Zp=mp(Object.getPrototypeOf,Object),Tp=Object.create,Jp=Mp.propertyIsEnumerable,nv=lp.splice,ov=Object.getOwnPropertySymbols,rv=Kp?Kp.isBuffer:void 0,hv=mp(Object.keys,Object),Av=bp(Dp,"DataView"),xv=bp(Dp,"Map"),wv=bp(Dp,"Promise"),fv=bp(Dp,"Set"),$v=bp(Dp,"WeakMap"),Tv=bp(Object,"create"),yv=nm(Av),Cv=nm(xv),Dv=nm(wv),Ev=nm(fv),wp=nm($v),jp=ev?ev.prototype:void 0,Up=jp?jp.valueOf:void 0;function zp(np){var yp=-1,Lp=np?np.length:0;for(this.clear();++yp<Lp;){var Qp=np[yp];this.set(Qp[0],Qp[1])}}function iv(){this.__data__=Tv?Tv(null):{}}function gv(np){return this.has(np)&&delete this.__data__[np]}function vv(np){var yp=this.__data__;if(Tv){var Lp=yp[np];return Lp===Cu?void 0:Lp}return qp.call(yp,np)?yp[np]:void 0}function lv(np){var yp=this.__data__;return Tv?yp[np]!==void 0:qp.call(yp,np)}function dv(np,yp){var Lp=this.__data__;return Lp[np]=Tv&&yp===void 0?Cu:yp,this}zp.prototype.clear=iv,zp.prototype.delete=gv,zp.prototype.get=vv,zp.prototype.has=lv,zp.prototype.set=dv;function cv(np){var yp=-1,Lp=np?np.length:0;for(this.clear();++yp<Lp;){var Qp=np[yp];this.set(Qp[0],Qp[1])}}function Pv(){this.__data__=[]}function dp(np){var yp=this.__data__,Lp=kv(yp,np);if(Lp<0)return!1;var Qp=yp.length-1;return Lp==Qp?yp.pop():nv.call(yp,Lp,1),!0}function _p(np){var yp=this.__data__,Lp=kv(yp,np);return Lp<0?void 0:yp[Lp][1]}function Cp(np){return kv(this.__data__,np)>-1}function Fp(np,yp){var Lp=this.__data__,Qp=kv(Lp,np);return Qp<0?Lp.push([np,yp]):Lp[Qp][1]=yp,this}cv.prototype.clear=Pv,cv.prototype.delete=dp,cv.prototype.get=_p,cv.prototype.has=Cp,cv.prototype.set=Fp;function Hp(np){var yp=-1,Lp=np?np.length:0;for(this.clear();++yp<Lp;){var Qp=np[yp];this.set(Qp[0],Qp[1])}}function uv(){this.__data__={hash:new zp,map:new(xv||cv),string:new zp}}function pv(np){return pp(this,np).delete(np)}function Lv(np){return pp(this,np).get(np)}function sv(np){return pp(this,np).has(np)}function Bv(np,yp){return pp(this,np).set(np,yp),this}Hp.prototype.clear=uv,Hp.prototype.delete=pv,Hp.prototype.get=Lv,Hp.prototype.has=sv,Hp.prototype.set=Bv;function Vv(np){this.__data__=new cv(np)}function um(){this.__data__=new cv}function dm(np){return this.__data__.delete(np)}function em(np){return this.__data__.get(np)}function Hv(np){return this.__data__.has(np)}function am(np,yp){var Lp=this.__data__;if(Lp instanceof cv){var Qp=Lp.__data__;if(!xv||Qp.length<Tu-1)return Qp.push([np,yp]),this;Lp=this.__data__=new Hp(Qp)}return Lp.set(np,yp),this}Vv.prototype.clear=um,Vv.prototype.delete=dm,Vv.prototype.get=em,Vv.prototype.has=Hv,Vv.prototype.set=am;function Uv(np,yp){var Lp=Sm(np)||wm(np)?cp(np.length,String):[],Qp=Lp.length,_v=!!Qp;for(var mv in np)(yp||qp.call(np,mv))&&!(_v&&(mv=="length"||jv(mv,Qp)))&&Lp.push(mv);return Lp}function qv(np,yp,Lp){var Qp=np[yp];(!(qp.call(np,yp)&&Im(Qp,Lp))||Lp===void 0&&!(yp in np))&&(np[yp]=Lp)}function kv(np,yp){for(var Lp=np.length;Lp--;)if(Im(np[Lp][0],yp))return Lp;return-1}function Mv(np,yp){return np&&gm(yp,Cm(yp),np)}function Fv(np,yp,Lp,Qp,_v,mv,Iv){var Rv;if(Qp&&(Rv=mv?Qp(np,_v,mv,Iv):Qp(np)),Rv!==void 0)return Rv;if(!fm(np))return np;var zv=Sm(np);if(zv){if(Rv=tv(np),!yp)return Am(np,Rv)}else{var Ov=Np(np),Zv=Ov==Du||Ov==ku;if(Rm(np))return sm(np,yp);if(Ov==Gu||Ov==Ru||Zv&&!mv){if(vp(np))return mv?np:{};if(Rv=av(Zv?{}:np),!yp)return Mm(np,Mv(Rv,np))}else{if(!gp[Ov])return mv?np:{};Rv=Sv(np,Ov,Fv,yp)}}Iv||(Iv=new Vv);var om=Iv.get(np);if(om)return om;if(Iv.set(np,Rv),!zv)var Qv=Lp?Em(np):Cm(np);return op(Qv||np,function(Jv,Xv){Qv&&(Xv=Jv,Jv=np[Xv]),qv(Rv,Xv,Fv(Jv,yp,Lp,Qp,Xv,np,Iv))}),Rv}function rm(np){return fm(np)?Tp(np):{}}function im(np,yp,Lp){var Qp=yp(np);return Sm(np)?Qp:rp(Qp,Lp(np))}function Yv(np){return Wp.call(np)}function Nv(np){if(!fm(np)||Wv(np))return!1;var yp=Tm(np)||vp(np)?Yp:hp;return yp.test(nm(np))}function hm(np){if(!tm(np))return hv(np);var yp=[];for(var Lp in Object(np))qp.call(np,Lp)&&Lp!="constructor"&&yp.push(Lp);return yp}function sm(np,yp){if(yp)return np.slice();var Lp=new np.constructor(np.length);return np.copy(Lp),Lp}function cm(np){var yp=new np.constructor(np.byteLength);return new Xp(yp).set(new Xp(np)),yp}function Kv(np,yp){var Lp=yp?cm(np.buffer):np.buffer;return new np.constructor(Lp,np.byteOffset,np.byteLength)}function mm(np,yp,Lp){var Qp=yp?Lp(xp(np),!0):xp(np);return up(Qp,ep,new np.constructor)}function pm(np){var yp=new np.constructor(np.source,ap.exec(np));return yp.lastIndex=np.lastIndex,yp}function lm(np,yp,Lp){var Qp=yp?Lp(sp(np),!0):sp(np);return up(Qp,_f,new np.constructor)}function $m(np){return Up?Object(Up.call(np)):{}}function xm(np,yp){var Lp=yp?cm(np.buffer):np.buffer;return new np.constructor(Lp,np.byteOffset,np.length)}function Am(np,yp){var Lp=-1,Qp=np.length;for(yp||(yp=Array(Qp));++Lp<Qp;)yp[Lp]=np[Lp];return yp}function gm(np,yp,Lp,Qp){Lp||(Lp={});for(var _v=-1,mv=yp.length;++_v<mv;){var Iv=yp[_v],Rv=Qp?Qp(Lp[Iv],np[Iv],Iv,Lp,np):void 0;qv(Lp,Iv,Rv===void 0?np[Iv]:Rv)}return Lp}function Mm(np,yp){return gm(np,Pp(np),yp)}function Em(np){return im(np,Cm,Pp)}function pp(np,yp){var Lp=np.__data__;return Gv(yp)?Lp[typeof yp=="string"?"string":"hash"]:Lp.map}function bp(np,yp){var Lp=fp(np,yp);return Nv(Lp)?Lp:void 0}var Pp=ov?mp(ov,Object):km,Np=Yv;(Av&&Np(new Av(new ArrayBuffer(1)))!=Yu||xv&&Np(new xv)!=Fu||wv&&Np(wv.resolve())!=zu||fv&&Np(new fv)!=Uu||$v&&Np(new $v)!=Qu)&&(Np=function(np){var yp=Wp.call(np),Lp=yp==Gu?np.constructor:void 0,Qp=Lp?nm(Lp):void 0;if(Qp)switch(Qp){case yv:return Yu;case Cv:return Fu;case Dv:return zu;case Ev:return Uu;case wp:return Qu}return yp});function tv(np){var yp=np.length,Lp=np.constructor(yp);return yp&&typeof np[0]=="string"&&qp.call(np,"index")&&(Lp.index=np.index,Lp.input=np.input),Lp}function av(np){return typeof np.constructor=="function"&&!tm(np)?rm(Zp(np)):{}}function Sv(np,yp,Lp,Qp){var _v=np.constructor;switch(yp){case qu:return cm(np);case Bu:case Vu:return new _v(+np);case Yu:return Kv(np,Qp);case Ju:case _d:case tp:case Ku:case Xu:case Zu:case _c:case Xc:case _h:return xm(np,Qp);case Fu:return mm(np,Qp,Lp);case Nu:case ju:return new _v(np);case Hu:return pm(np);case Uu:return lm(np,Qp,Lp);case Wu:return $m(np)}}function jv(np,yp){return yp=yp==null?Pu:yp,!!yp&&(typeof np=="number"||Ap.test(np))&&np>-1&&np%1==0&&np<yp}function Gv(np){var yp=typeof np;return yp=="string"||yp=="number"||yp=="symbol"||yp=="boolean"?np!=="__proto__":np===null}function Wv(np){return!!Vp&&Vp in np}function tm(np){var yp=np&&np.constructor,Lp=typeof yp=="function"&&yp.prototype||Mp;return np===Lp}function nm(np){if(np!=null){try{return Gp.call(np)}catch{}try{return np+""}catch{}}return""}function Pm(np){return Fv(np,!0,!0)}function Im(np,yp){return np===yp||np!==np&&yp!==yp}function wm(np){return Dm(np)&&qp.call(np,"callee")&&(!Jp.call(np,"callee")||Wp.call(np)==Ru)}var Sm=Array.isArray;function _m(np){return np!=null&&Lm(np.length)&&!Tm(np)}function Dm(np){return Bm(np)&&_m(np)}var Rm=rv||Fm;function Tm(np){var yp=fm(np)?Wp.call(np):"";return yp==Du||yp==ku}function Lm(np){return typeof np=="number"&&np>-1&&np%1==0&&np<=Pu}function fm(np){var yp=typeof np;return!!np&&(yp=="object"||yp=="function")}function Bm(np){return!!np&&typeof np=="object"}function Cm(np){return _m(np)?Uv(np):hm(np)}function km(){return[]}function Fm(){return!1}_u.exports=Pm})(pe$3,M$6);const ge$2=M$6;var Y$3={},bn={get exports(){return Y$3},set exports(_u){Y$3=_u}};(function(_u,$u){var Tu=200,Cu="__lodash_hash_undefined__",Pu=1,Ru=2,Lu=9007199254740991,Bu="[object Arguments]",Vu="[object Array]",Ou="[object AsyncFunction]",Du="[object Boolean]",ku="[object Date]",Fu="[object Error]",Nu="[object Function]",Gu="[object GeneratorFunction]",zu="[object Map]",Hu="[object Number]",Uu="[object Null]",ju="[object Object]",Wu="[object Promise]",Qu="[object Proxy]",qu="[object RegExp]",Yu="[object Set]",Ju="[object String]",_d="[object Symbol]",tp="[object Undefined]",Ku="[object WeakMap]",Xu="[object ArrayBuffer]",Zu="[object DataView]",_c="[object Float32Array]",Xc="[object Float64Array]",_h="[object Int8Array]",ip="[object Int16Array]",ap="[object Int32Array]",hp="[object Uint8Array]",Ap="[object Uint8ClampedArray]",gp="[object Uint16Array]",Rp="[object Uint32Array]",Sp=/[\\^$.*+?()[\]{}|]/g,Dp=/^\[object .+?Constructor\]$/,Ep=/^(?:0|[1-9]\d*)$/,Bp={};Bp[_c]=Bp[Xc]=Bp[_h]=Bp[ip]=Bp[ap]=Bp[hp]=Bp[Ap]=Bp[gp]=Bp[Rp]=!0,Bp[Bu]=Bp[Vu]=Bp[Xu]=Bp[Du]=Bp[Zu]=Bp[ku]=Bp[Fu]=Bp[Nu]=Bp[zu]=Bp[Hu]=Bp[ju]=Bp[qu]=Bp[Yu]=Bp[Ju]=Bp[Ku]=!1;var Ip=typeof e$2=="object"&&e$2&&e$2.Object===Object&&e$2,ep=typeof self=="object"&&self&&self.Object===Object&&self,_f=Ip||ep||Function("return this")(),op=$u&&!$u.nodeType&&$u,rp=op&&!0&&_u&&!_u.nodeType&&_u,up=rp&&rp.exports===op,cp=up&&Ip.process,fp=function(){try{return cp&&cp.binding&&cp.binding("util")}catch{}}(),vp=fp&&fp.isTypedArray;function xp(np,yp){for(var Lp=-1,Qp=np==null?0:np.length,_v=0,mv=[];++Lp<Qp;){var Iv=np[Lp];yp(Iv,Lp,np)&&(mv[_v++]=Iv)}return mv}function mp(np,yp){for(var Lp=-1,Qp=yp.length,_v=np.length;++Lp<Qp;)np[_v+Lp]=yp[Lp];return np}function sp(np,yp){for(var Lp=-1,Qp=np==null?0:np.length;++Lp<Qp;)if(yp(np[Lp],Lp,np))return!0;return!1}function lp(np,yp){for(var Lp=-1,Qp=Array(np);++Lp<np;)Qp[Lp]=yp(Lp);return Qp}function $p(np){return function(yp){return np(yp)}}function Mp(np,yp){return np.has(yp)}function kp(np,yp){return np==null?void 0:np[yp]}function Vp(np){var yp=-1,Lp=Array(np.size);return np.forEach(function(Qp,_v){Lp[++yp]=[_v,Qp]}),Lp}function Gp(np,yp){return function(Lp){return np(yp(Lp))}}function qp(np){var yp=-1,Lp=Array(np.size);return np.forEach(function(Qp){Lp[++yp]=Qp}),Lp}var Wp=Array.prototype,Yp=Function.prototype,Kp=Object.prototype,ev=_f["__core-js_shared__"],Xp=Yp.toString,Zp=Kp.hasOwnProperty,Tp=function(){var np=/[^.]+$/.exec(ev&&ev.keys&&ev.keys.IE_PROTO||"");return np?"Symbol(src)_1."+np:""}(),Jp=Kp.toString,nv=RegExp("^"+Xp.call(Zp).replace(Sp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ov=up?_f.Buffer:void 0,rv=_f.Symbol,hv=_f.Uint8Array,Av=Kp.propertyIsEnumerable,xv=Wp.splice,wv=rv?rv.toStringTag:void 0,fv=Object.getOwnPropertySymbols,$v=ov?ov.isBuffer:void 0,Tv=Gp(Object.keys,Object),yv=Pp(_f,"DataView"),Cv=Pp(_f,"Map"),Dv=Pp(_f,"Promise"),Ev=Pp(_f,"Set"),wp=Pp(_f,"WeakMap"),jp=Pp(Object,"create"),Up=nm(yv),zp=nm(Cv),iv=nm(Dv),gv=nm(Ev),vv=nm(wp),lv=rv?rv.prototype:void 0,dv=lv?lv.valueOf:void 0;function cv(np){var yp=-1,Lp=np==null?0:np.length;for(this.clear();++yp<Lp;){var Qp=np[yp];this.set(Qp[0],Qp[1])}}function Pv(){this.__data__=jp?jp(null):{},this.size=0}function dp(np){var yp=this.has(np)&&delete this.__data__[np];return this.size-=yp?1:0,yp}function _p(np){var yp=this.__data__;if(jp){var Lp=yp[np];return Lp===Cu?void 0:Lp}return Zp.call(yp,np)?yp[np]:void 0}function Cp(np){var yp=this.__data__;return jp?yp[np]!==void 0:Zp.call(yp,np)}function Fp(np,yp){var Lp=this.__data__;return this.size+=this.has(np)?0:1,Lp[np]=jp&&yp===void 0?Cu:yp,this}cv.prototype.clear=Pv,cv.prototype.delete=dp,cv.prototype.get=_p,cv.prototype.has=Cp,cv.prototype.set=Fp;function Hp(np){var yp=-1,Lp=np==null?0:np.length;for(this.clear();++yp<Lp;){var Qp=np[yp];this.set(Qp[0],Qp[1])}}function uv(){this.__data__=[],this.size=0}function pv(np){var yp=this.__data__,Lp=sm(yp,np);if(Lp<0)return!1;var Qp=yp.length-1;return Lp==Qp?yp.pop():xv.call(yp,Lp,1),--this.size,!0}function Lv(np){var yp=this.__data__,Lp=sm(yp,np);return Lp<0?void 0:yp[Lp][1]}function sv(np){return sm(this.__data__,np)>-1}function Bv(np,yp){var Lp=this.__data__,Qp=sm(Lp,np);return Qp<0?(++this.size,Lp.push([np,yp])):Lp[Qp][1]=yp,this}Hp.prototype.clear=uv,Hp.prototype.delete=pv,Hp.prototype.get=Lv,Hp.prototype.has=sv,Hp.prototype.set=Bv;function Vv(np){var yp=-1,Lp=np==null?0:np.length;for(this.clear();++yp<Lp;){var Qp=np[yp];this.set(Qp[0],Qp[1])}}function um(){this.size=0,this.__data__={hash:new cv,map:new(Cv||Hp),string:new cv}}function dm(np){var yp=bp(this,np).delete(np);return this.size-=yp?1:0,yp}function em(np){return bp(this,np).get(np)}function Hv(np){return bp(this,np).has(np)}function am(np,yp){var Lp=bp(this,np),Qp=Lp.size;return Lp.set(np,yp),this.size+=Lp.size==Qp?0:1,this}Vv.prototype.clear=um,Vv.prototype.delete=dm,Vv.prototype.get=em,Vv.prototype.has=Hv,Vv.prototype.set=am;function Uv(np){var yp=-1,Lp=np==null?0:np.length;for(this.__data__=new Vv;++yp<Lp;)this.add(np[yp])}function qv(np){return this.__data__.set(np,Cu),this}function kv(np){return this.__data__.has(np)}Uv.prototype.add=Uv.prototype.push=qv,Uv.prototype.has=kv;function Mv(np){var yp=this.__data__=new Hp(np);this.size=yp.size}function Fv(){this.__data__=new Hp,this.size=0}function rm(np){var yp=this.__data__,Lp=yp.delete(np);return this.size=yp.size,Lp}function im(np){return this.__data__.get(np)}function Yv(np){return this.__data__.has(np)}function Nv(np,yp){var Lp=this.__data__;if(Lp instanceof Hp){var Qp=Lp.__data__;if(!Cv||Qp.length<Tu-1)return Qp.push([np,yp]),this.size=++Lp.size,this;Lp=this.__data__=new Vv(Qp)}return Lp.set(np,yp),this.size=Lp.size,this}Mv.prototype.clear=Fv,Mv.prototype.delete=rm,Mv.prototype.get=im,Mv.prototype.has=Yv,Mv.prototype.set=Nv;function hm(np,yp){var Lp=wm(np),Qp=!Lp&&Im(np),_v=!Lp&&!Qp&&_m(np),mv=!Lp&&!Qp&&!_v&&Bm(np),Iv=Lp||Qp||_v||mv,Rv=Iv?lp(np.length,String):[],zv=Rv.length;for(var Ov in np)(yp||Zp.call(np,Ov))&&!(Iv&&(Ov=="length"||_v&&(Ov=="offset"||Ov=="parent")||mv&&(Ov=="buffer"||Ov=="byteLength"||Ov=="byteOffset")||Sv(Ov,zv)))&&Rv.push(Ov);return Rv}function sm(np,yp){for(var Lp=np.length;Lp--;)if(Pm(np[Lp][0],yp))return Lp;return-1}function cm(np,yp,Lp){var Qp=yp(np);return wm(np)?Qp:mp(Qp,Lp(np))}function Kv(np){return np==null?np===void 0?tp:Uu:wv&&wv in Object(np)?Np(np):tm(np)}function mm(np){return fm(np)&&Kv(np)==Bu}function pm(np,yp,Lp,Qp,_v){return np===yp?!0:np==null||yp==null||!fm(np)&&!fm(yp)?np!==np&&yp!==yp:lm(np,yp,Lp,Qp,pm,_v)}function lm(np,yp,Lp,Qp,_v,mv){var Iv=wm(np),Rv=wm(yp),zv=Iv?Vu:av(np),Ov=Rv?Vu:av(yp);zv=zv==Bu?ju:zv,Ov=Ov==Bu?ju:Ov;var Zv=zv==ju,om=Ov==ju,Qv=zv==Ov;if(Qv&&_m(np)){if(!_m(yp))return!1;Iv=!0,Zv=!1}if(Qv&&!Zv)return mv||(mv=new Mv),Iv||Bm(np)?gm(np,yp,Lp,Qp,_v,mv):Mm(np,yp,zv,Lp,Qp,_v,mv);if(!(Lp&Pu)){var Jv=Zv&&Zp.call(np,"__wrapped__"),Xv=om&&Zp.call(yp,"__wrapped__");if(Jv||Xv){var ym=Jv?np.value():np,vm=Xv?yp.value():yp;return mv||(mv=new Mv),_v(ym,vm,Lp,Qp,mv)}}return Qv?(mv||(mv=new Mv),Em(np,yp,Lp,Qp,_v,mv)):!1}function $m(np){if(!Lm(np)||Gv(np))return!1;var yp=Rm(np)?nv:Dp;return yp.test(nm(np))}function xm(np){return fm(np)&&Tm(np.length)&&!!Bp[Kv(np)]}function Am(np){if(!Wv(np))return Tv(np);var yp=[];for(var Lp in Object(np))Zp.call(np,Lp)&&Lp!="constructor"&&yp.push(Lp);return yp}function gm(np,yp,Lp,Qp,_v,mv){var Iv=Lp&Pu,Rv=np.length,zv=yp.length;if(Rv!=zv&&!(Iv&&zv>Rv))return!1;var Ov=mv.get(np);if(Ov&&mv.get(yp))return Ov==yp;var Zv=-1,om=!0,Qv=Lp&Ru?new Uv:void 0;for(mv.set(np,yp),mv.set(yp,np);++Zv<Rv;){var Jv=np[Zv],Xv=yp[Zv];if(Qp)var ym=Iv?Qp(Xv,Jv,Zv,yp,np,mv):Qp(Jv,Xv,Zv,np,yp,mv);if(ym!==void 0){if(ym)continue;om=!1;break}if(Qv){if(!sp(yp,function(vm,bm){if(!Mp(Qv,bm)&&(Jv===vm||_v(Jv,vm,Lp,Qp,mv)))return Qv.push(bm)})){om=!1;break}}else if(!(Jv===Xv||_v(Jv,Xv,Lp,Qp,mv))){om=!1;break}}return mv.delete(np),mv.delete(yp),om}function Mm(np,yp,Lp,Qp,_v,mv,Iv){switch(Lp){case Zu:if(np.byteLength!=yp.byteLength||np.byteOffset!=yp.byteOffset)return!1;np=np.buffer,yp=yp.buffer;case Xu:return!(np.byteLength!=yp.byteLength||!mv(new hv(np),new hv(yp)));case Du:case ku:case Hu:return Pm(+np,+yp);case Fu:return np.name==yp.name&&np.message==yp.message;case qu:case Ju:return np==yp+"";case zu:var Rv=Vp;case Yu:var zv=Qp&Pu;if(Rv||(Rv=qp),np.size!=yp.size&&!zv)return!1;var Ov=Iv.get(np);if(Ov)return Ov==yp;Qp|=Ru,Iv.set(np,yp);var Zv=gm(Rv(np),Rv(yp),Qp,_v,mv,Iv);return Iv.delete(np),Zv;case _d:if(dv)return dv.call(np)==dv.call(yp)}return!1}function Em(np,yp,Lp,Qp,_v,mv){var Iv=Lp&Pu,Rv=pp(np),zv=Rv.length,Ov=pp(yp),Zv=Ov.length;if(zv!=Zv&&!Iv)return!1;for(var om=zv;om--;){var Qv=Rv[om];if(!(Iv?Qv in yp:Zp.call(yp,Qv)))return!1}var Jv=mv.get(np);if(Jv&&mv.get(yp))return Jv==yp;var Xv=!0;mv.set(np,yp),mv.set(yp,np);for(var ym=Iv;++om<zv;){Qv=Rv[om];var vm=np[Qv],bm=yp[Qv];if(Qp)var Nm=Iv?Qp(bm,vm,Qv,yp,np,mv):Qp(vm,bm,Qv,np,yp,mv);if(!(Nm===void 0?vm===bm||_v(vm,bm,Lp,Qp,mv):Nm)){Xv=!1;break}ym||(ym=Qv=="constructor")}if(Xv&&!ym){var Vm=np.constructor,Om=yp.constructor;Vm!=Om&&"constructor"in np&&"constructor"in yp&&!(typeof Vm=="function"&&Vm instanceof Vm&&typeof Om=="function"&&Om instanceof Om)&&(Xv=!1)}return mv.delete(np),mv.delete(yp),Xv}function pp(np){return cm(np,Cm,tv)}function bp(np,yp){var Lp=np.__data__;return jv(yp)?Lp[typeof yp=="string"?"string":"hash"]:Lp.map}function Pp(np,yp){var Lp=kp(np,yp);return $m(Lp)?Lp:void 0}function Np(np){var yp=Zp.call(np,wv),Lp=np[wv];try{np[wv]=void 0;var Qp=!0}catch{}var _v=Jp.call(np);return Qp&&(yp?np[wv]=Lp:delete np[wv]),_v}var tv=fv?function(np){return np==null?[]:(np=Object(np),xp(fv(np),function(yp){return Av.call(np,yp)}))}:km,av=Kv;(yv&&av(new yv(new ArrayBuffer(1)))!=Zu||Cv&&av(new Cv)!=zu||Dv&&av(Dv.resolve())!=Wu||Ev&&av(new Ev)!=Yu||wp&&av(new wp)!=Ku)&&(av=function(np){var yp=Kv(np),Lp=yp==ju?np.constructor:void 0,Qp=Lp?nm(Lp):"";if(Qp)switch(Qp){case Up:return Zu;case zp:return zu;case iv:return Wu;case gv:return Yu;case vv:return Ku}return yp});function Sv(np,yp){return yp=yp==null?Lu:yp,!!yp&&(typeof np=="number"||Ep.test(np))&&np>-1&&np%1==0&&np<yp}function jv(np){var yp=typeof np;return yp=="string"||yp=="number"||yp=="symbol"||yp=="boolean"?np!=="__proto__":np===null}function Gv(np){return!!Tp&&Tp in np}function Wv(np){var yp=np&&np.constructor,Lp=typeof yp=="function"&&yp.prototype||Kp;return np===Lp}function tm(np){return Jp.call(np)}function nm(np){if(np!=null){try{return Xp.call(np)}catch{}try{return np+""}catch{}}return""}function Pm(np,yp){return np===yp||np!==np&&yp!==yp}var Im=mm(function(){return arguments}())?mm:function(np){return fm(np)&&Zp.call(np,"callee")&&!Av.call(np,"callee")},wm=Array.isArray;function Sm(np){return np!=null&&Tm(np.length)&&!Rm(np)}var _m=$v||Fm;function Dm(np,yp){return pm(np,yp)}function Rm(np){if(!Lm(np))return!1;var yp=Kv(np);return yp==Nu||yp==Gu||yp==Ou||yp==Qu}function Tm(np){return typeof np=="number"&&np>-1&&np%1==0&&np<=Lu}function Lm(np){var yp=typeof np;return np!=null&&(yp=="object"||yp=="function")}function fm(np){return np!=null&&typeof np=="object"}var Bm=vp?$p(vp):xm;function Cm(np){return Sm(np)?hm(np):Am(np)}function km(){return[]}function Fm(){return!1}_u.exports=Dm})(bn,Y$3);const wn=Y$3,p$3=(_u,$u)=>wn(_u,$u),c$5=_u=>Object.keys(_u||{}),u$5=(_u,$u)=>{const Tu={};return _u.forEach(Cu=>{Tu[Cu]=$u[Cu]}),Tu},m$2=()=>{const _u={},$u=(Tu,Cu)=>{const{watcherName:Pu,fn:Ru}=Tu,{prop:Lu,value:Bu}=Cu;_u[Pu]||(_u[Pu]={deps:{},fn:Ru}),_u[Pu].deps[Lu]=Bu};return{subscribers:_u,subscribe(Tu,Cu){Tu&&$u(Tu,Cu)},notify(Tu,Cu){Object.entries(_u).forEach(([Pu,{deps:Ru,fn:Lu}])=>{const Bu=c$5(Ru);if(Bu.includes(Cu)){const Vu=u$5(Bu,Tu);p$3(Ru,Vu)||(_u[Pu].deps=Vu,Lu())}})}}},a$4=()=>{let _u=null;return{targetWatcher($u,Tu){_u={watcherName:$u,fn:Tu},_u.fn(),_u=null},getTarget(){return _u}}};function E$8(_u,$u){const Tu=Tt(_u,"data",{}),Cu=Tt(_u,"watch",{}),Pu=Tt(_u,"methods",{}),Ru=Tt($u,"onChange",()=>{}),{subscribe:Lu,notify:Bu,subscribers:Vu}=m$2(),{targetWatcher:Ou,getTarget:Du}=a$4();let ku;const Fu={},Nu=()=>({data:ku,methods:Fu});let Gu=!1;const zu=Uu=>(...ju)=>{Gu=!0;const Wu=Uu(...ju);return Gu=!1,Wu};Object.entries(Pu).forEach(([Uu,ju])=>{Fu[Uu]=zu((...Wu)=>ju(Nu(),...Wu)),Object.defineProperty(Fu[Uu],"name",{value:Uu})}),ku=new Proxy(ge$2(Tu),{get(Uu,ju){return Du()&&!Gu&&Lu(Du(),{prop:ju,value:Uu[ju]}),Reflect.get(...arguments)},set(Uu,ju,Wu){return Uu[ju]===Wu||(Reflect.set(...arguments),Du()||(Ru&&Ru(ju,Wu),Bu(ku,ju))),!0}}),Object.entries(Cu).forEach(([Uu,ju])=>{Ou(Uu,()=>{ju(Nu())})});const Hu=[ku,Fu];return Hu._internal={_getSubscribers(){return Vu}},Hu}function l$5({pageIndex:_u,particlesToShow:$u,particlesToScroll:Tu,particlesCount:Cu}){const Pu=_u===0?0:$u-Tu,Ru=_u*$u-_u*Pu,Lu=Ru+Math.max($u,Tu)-1,Bu=[];for(let Vu=Ru;Vu<=Math.min(Cu-1,Lu);Vu++)Bu.push(Vu);return Bu}function h$3({infinite:_u,pageIndex:$u,pagesCount:Tu,particlesCount:Cu,particlesToShow:Pu,particlesToScroll:Ru}){const Lu=r$4(0,$u,Tu-1);let Bu=Lu-1,Vu=Lu+1;Bu=_u?Bu<0?Tu-1:Bu:Math.max(0,Bu),Vu=_u?Vu>Tu-1?0:Vu:Math.min(Tu-1,Vu);const Ou=[...new Set([Bu,Lu,Vu,0,Tu-1])].sort((ku,Fu)=>ku-Fu),Du=Ou.flatMap(ku=>l$5({pageIndex:ku,particlesToShow:Pu,particlesToScroll:Ru,particlesCount:Cu}));return{pageIndexes:Ou,particleIndexes:[...new Set(Du)].sort((ku,Fu)=>ku-Fu)}}const r$1=(_u,$u)=>(_u(),setInterval(_u,$u));var h$2=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const g$6=35,l$4=1;class P$2{constructor({onProgressValueChange:$u}){this._onProgressValueChange=$u,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration($u){this._autoplayDuration=$u}start($u){return new Promise(Tu=>{this.reset();const Cu=Math.min(g$6,Math.max(this._autoplayDuration,1));let Pu=-Cu;this._interval=r$1(()=>h$2(this,null,function*(){if(this._paused)return;Pu+=Cu;const Ru=Pu/this._autoplayDuration;this._onProgressValueChange(Ru),Ru>l$4&&(this.reset(),yield $u(),Tu())}),Cu)})}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(l$4)}}var i$1=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});function A$8(_u){const $u=new P$2({onProgressValueChange:Ru=>{_u("progressValue",1-Ru)}}),Tu=E$8({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:Ru}){Ru.loaded=h$3({infinite:Ru.infinite,pageIndex:Ru.currentPageIndex,pagesCount:Ru.pagesCount,particlesCount:Ru.particlesCountWithoutClones,particlesToShow:Ru.particlesToShow,particlesToScroll:Ru.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:Ru}){Ru.currentPageIndex=M$8({currentParticleIndex:Ru.currentParticleIndex,particlesCount:Ru.particlesCount,clonesCountHead:Ru.clonesCountHead,clonesCountTotal:Ru.clonesCountTotal,infinite:Ru.infinite,particlesToScroll:Ru.particlesToScroll})},setPartialPageSize({data:Ru}){Ru.partialPageSize=m$4({particlesToScroll:Ru.particlesToScroll,particlesToShow:Ru.particlesToShow,particlesCountWithoutClones:Ru.particlesCountWithoutClones})},setClonesCount({data:Ru}){const{head:Lu,tail:Bu}=y$5({infinite:Ru.infinite,particlesToShow:Ru.particlesToShow,partialPageSize:Ru.partialPageSize});Ru.clonesCountHead=Lu,Ru.clonesCountTail=Bu,Ru.clonesCountTotal=Lu+Bu},setProgressManagerAutoplayDuration({data:Ru}){$u.setAutoplayDuration(Ru.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:Ru,focused:Lu}}){Ru&&(Lu?$u.pause():$u.resume())},initDuration({data:Ru}){Ru.durationMs=Ru.durationMsInit},applyAutoplay({data:Ru,methods:{_applyAutoplayIfNeeded:Lu}}){Ru.autoplay&&Lu(Ru.autoplay)},setPagesCount({data:Ru}){Ru.pagesCount=h$6({infinite:Ru.infinite,particlesCountWithoutClones:Ru.particlesCountWithoutClones,particlesToScroll:Ru.particlesToScroll,particlesToShow:Ru.particlesToShow})},setParticlesToShow({data:Ru}){Ru.particlesToShow=r$4(1,Ru.particlesToShowInit,Ru.particlesCountWithoutClones)},setParticlesToScroll({data:Ru}){Ru.particlesToScroll=r$4(1,Ru.particlesToScrollInit,Ru.particlesCountWithoutClones)}},methods:{_prev({data:Ru}){Ru.currentParticleIndex=_$3({infinite:Ru.infinite,pageIndex:Ru.currentPageIndex-1,clonesCountHead:Ru.clonesCountHead,clonesCountTail:Ru.clonesCountTail,particlesToScroll:Ru.particlesToScroll,particlesCount:Ru.particlesCount,particlesToShow:Ru.particlesToShow})},_next({data:Ru}){Ru.currentParticleIndex=_$3({infinite:Ru.infinite,pageIndex:Ru.currentPageIndex+1,clonesCountHead:Ru.clonesCountHead,clonesCountTail:Ru.clonesCountTail,particlesToScroll:Ru.particlesToScroll,particlesCount:Ru.particlesCount,particlesToShow:Ru.particlesToShow})},_moveToParticle({data:Ru},Lu){Ru.currentParticleIndex=r$4(0,Lu,Ru.particlesCount-1)},toggleFocused({data:Ru}){Ru.focused=!Ru.focused},_applyAutoplayIfNeeded(Ru){return i$1(this,arguments,function*({data:Lu,methods:Bu}){if(!Lu.infinite&&(Lu.autoplayDirection===e$3&&Lu.currentParticleIndex===Lu.particlesCount-1||Lu.autoplayDirection===t$3&&Lu.currentParticleIndex===0)){$u.reset();return}if(Lu.autoplay){const Vu=()=>w$5({[e$3]:()=>i$1(this,null,function*(){return Bu.showNextPage()}),[t$3]:()=>i$1(this,null,function*(){return Bu.showPrevPage()})})(Lu.autoplayDirection);yield $u.start(Vu)}})},_jumpIfNeeded(Ru){return i$1(this,arguments,function*({data:Lu,methods:Bu}){let Vu=!1;return Lu.infinite&&(Lu.currentParticleIndex===0?(yield Bu.showParticle(Lu.particlesCount-Lu.clonesCountTotal,{animated:!1}),Vu=!0):Lu.currentParticleIndex===Lu.particlesCount-Lu.clonesCountTail&&(yield Bu.showParticle(Lu.clonesCountHead,{animated:!1}),Vu=!0)),Vu})},changePage(Ru,Lu,Bu){return i$1(this,arguments,function*({data:Vu,methods:Ou},Du,ku){$u.reset(),!Vu.disabled&&(Vu.disabled=!0,Du(),yield Ou.offsetPage({animated:o$3(ku,"animated",!0)}),Vu.disabled=!1,!(yield Ou._jumpIfNeeded())&&Ou._applyAutoplayIfNeeded())})},showNextPage(Ru,Lu){return i$1(this,arguments,function*({data:Bu,methods:Vu},Ou){Bu.disabled||(yield Vu.changePage(Vu._next,Ou))})},showPrevPage(Ru,Lu){return i$1(this,arguments,function*({data:Bu,methods:Vu},Ou){Bu.disabled||(yield Vu.changePage(Vu._prev,Ou))})},showParticle(Ru,Lu,Bu){return i$1(this,arguments,function*({methods:Vu},Ou,Du){yield Vu.changePage(()=>Vu._moveToParticle(Ou),Du)})},_getParticleIndexByPageIndex({data:Ru},Lu){return _$3({infinite:Ru.infinite,pageIndex:Lu,clonesCountHead:Ru.clonesCountHead,clonesCountTail:Ru.clonesCountTail,particlesToScroll:Ru.particlesToScroll,particlesCount:Ru.particlesCount,particlesToShow:Ru.particlesToShow})},showPage(Ru,Lu,Bu){return i$1(this,arguments,function*({methods:Vu},Ou,Du){const ku=Vu._getParticleIndexByPageIndex(Ou);yield Vu.showParticle(ku,Du)})},offsetPage({data:Ru},Lu){const Bu=o$3(Lu,"animated",!0);return new Promise(Vu=>{Ru.durationMs=Bu?Ru.durationMsInit:0,Ru.offset=-Ru.currentParticleIndex*Ru.particleWidth,setTimeout(()=>{Vu()},Ru.durationMs)})}}},{onChange:_u}),[Cu,Pu]=Tu;return[{data:Cu,progressManager:$u},Pu,Tu._internal]}var k$5=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});function tt$1(_u){Qt(_u,"svelte-sme1z4",":root{--sc-color-rgb-light-50p:rgba(93, 93, 93, 0.5);--sc-color-rgb-light:#5d5d5d;--sc-color-hex-dark-50p:rgba(30, 30, 30, 0.5);--sc-color-hex-dark:#1e1e1e}.sc-carousel__carousel-container.svelte-sme1z4{display:flex;width:100%;flex-direction:column;align-items:center}.sc-carousel__content-container.svelte-sme1z4{position:relative;display:flex;width:100%}.sc-carousel__pages-window.svelte-sme1z4{flex:1;display:flex;overflow:hidden;box-sizing:border-box;position:relative}.sc-carousel__pages-container.svelte-sme1z4{width:100%;display:flex;transition-property:transform}.sc-carousel__arrow-container.svelte-sme1z4{padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.sc-carousel-progress__container.svelte-sme1z4{width:100%;height:5px;background-color:var(--sc-color-rgb-light-50p);position:absolute;bottom:0}.sc-carousel-button{all:unset;cursor:pointer}.sc-carousel-button:focus{outline:5px auto}")}const nt$1=_u=>({currentPageIndex:_u[0]&32,pagesCount:_u[0]&1024,loaded:_u[0]&64}),ue$1=_u=>({currentPageIndex:_u[5],pagesCount:_u[10],showPage:_u[15],loaded:_u[6]}),ot$3=_u=>({loaded:_u[0]&64,currentPageIndex:_u[0]&32}),ce=_u=>({showNextPage:_u[14].showNextPage,loaded:_u[6],currentPageIndex:_u[5]}),it$1=_u=>({loaded:_u[0]&64,currentPageIndex:_u[0]&32}),fe$1=_u=>({loaded:_u[6],currentPageIndex:_u[5]}),at$1=_u=>({loaded:_u[0]&64,currentPageIndex:_u[0]&32}),de$2=_u=>({showPrevPage:_u[14].showPrevPage,loaded:_u[6],currentPageIndex:_u[5]});function ge$1(_u){let $u;const Tu=_u[37].prev,Cu=Bt(Tu,_u,_u[36],de$2),Pu=Cu||lt$1(_u);return{c(){Pu&&Pu.c()},m(Ru,Lu){Pu&&Pu.m(Ru,Lu),$u=!0},p(Ru,Lu){Cu?Cu.p&&(!$u||Lu[0]&96|Lu[1]&32)&&It(Cu,Tu,Ru,Ru[36],$u?Ht(Tu,Ru[36],Lu,at$1):Ut(Ru[36]),de$2):Pu&&Pu.p&&(!$u||Lu[0]&36)&&Pu.p(Ru,$u?Lu:[-1,-1])},i(Ru){$u||(tt$3(Pu,Ru),$u=!0)},o(Ru){$t(Pu,Ru),$u=!1},d(Ru){Pu&&Pu.d(Ru)}}}function lt$1(_u){let $u,Tu,Cu;return Tu=new q$4({props:{direction:"prev",disabled:!_u[2]&&_u[5]===0}}),Tu.$on("click",_u[23]),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","sc-carousel__arrow-container svelte-sme1z4")},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),Cu=!0},p(Pu,Ru){const Lu={};Ru[0]&36&&(Lu.disabled=!Pu[2]&&Pu[5]===0),Tu.$set(Lu)},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu)}}}function _e$1(_u){let $u,Tu,Cu;return Tu=new w$6({props:{value:_u[7]}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","sc-carousel-progress__container svelte-sme1z4")},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),Cu=!0},p(Pu,Ru){const Lu={};Ru[0]&128&&(Lu.value=Pu[7]),Tu.$set(Lu)},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu)}}}function me$1(_u){let $u;const Tu=_u[37].next,Cu=Bt(Tu,_u,_u[36],ce),Pu=Cu||st(_u);return{c(){Pu&&Pu.c()},m(Ru,Lu){Pu&&Pu.m(Ru,Lu),$u=!0},p(Ru,Lu){Cu?Cu.p&&(!$u||Lu[0]&96|Lu[1]&32)&&It(Cu,Tu,Ru,Ru[36],$u?Ht(Tu,Ru[36],Lu,ot$3):Ut(Ru[36]),ce):Pu&&Pu.p&&(!$u||Lu[0]&1060)&&Pu.p(Ru,$u?Lu:[-1,-1])},i(Ru){$u||(tt$3(Pu,Ru),$u=!0)},o(Ru){$t(Pu,Ru),$u=!1},d(Ru){Pu&&Pu.d(Ru)}}}function st(_u){let $u,Tu,Cu;return Tu=new q$4({props:{direction:"next",disabled:!_u[2]&&_u[5]===_u[10]-1}}),Tu.$on("click",_u[14].showNextPage),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","sc-carousel__arrow-container svelte-sme1z4")},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),Cu=!0},p(Pu,Ru){const Lu={};Ru[0]&1060&&(Lu.disabled=!Pu[2]&&Pu[5]===Pu[10]-1),Tu.$set(Lu)},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu)}}}function pe$2(_u){let $u;const Tu=_u[37].dots,Cu=Bt(Tu,_u,_u[36],ue$1),Pu=Cu||rt$2(_u);return{c(){Pu&&Pu.c()},m(Ru,Lu){Pu&&Pu.m(Ru,Lu),$u=!0},p(Ru,Lu){Cu?Cu.p&&(!$u||Lu[0]&1120|Lu[1]&32)&&It(Cu,Tu,Ru,Ru[36],$u?Ht(Tu,Ru[36],Lu,nt$1):Ut(Ru[36]),ue$1):Pu&&Pu.p&&(!$u||Lu[0]&1056)&&Pu.p(Ru,$u?Lu:[-1,-1])},i(Ru){$u||(tt$3(Pu,Ru),$u=!0)},o(Ru){$t(Pu,Ru),$u=!1},d(Ru){Pu&&Pu.d(Ru)}}}function rt$2(_u){let $u,Tu;return $u=new H$3({props:{pagesCount:_u[10],currentPageIndex:_u[5]}}),$u.$on("pageChange",_u[41]),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu[0]&1024&&(Ru.pagesCount=Cu[10]),Pu[0]&32&&(Ru.currentPageIndex=Cu[5]),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function ut(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu=_u[1]&&ge$1(_u);const Gu=_u[37].default,zu=Bt(Gu,_u,_u[36],fe$1);let Hu=_u[3]&&_e$1(_u),Uu=_u[1]&&me$1(_u),ju=_u[4]&&pe$2(_u);return{c(){$u=U$8("div"),Tu=U$8("div"),Nu&&Nu.c(),Cu=Xt(),Pu=U$8("div"),Ru=U$8("div"),zu&&zu.c(),Bu=Xt(),Hu&&Hu.c(),Vu=Xt(),Uu&&Uu.c(),Ou=Xt(),ju&&ju.c(),te$1(Ru,"class","sc-carousel__pages-container svelte-sme1z4"),ne(Ru,"transform","translateX("+_u[8]+"px)"),ne(Ru,"transition-duration",_u[9]+"ms"),ne(Ru,"transition-timing-function",_u[0]),te$1(Pu,"class","sc-carousel__pages-window svelte-sme1z4"),te$1(Tu,"class","sc-carousel__content-container svelte-sme1z4"),te$1($u,"class","sc-carousel__carousel-container svelte-sme1z4")},m(Wu,Qu){Nt(Wu,$u,Qu),dt$1($u,Tu),Nu&&Nu.m(Tu,null),dt$1(Tu,Cu),dt$1(Tu,Pu),dt$1(Pu,Ru),zu&&zu.m(Ru,null),_u[39](Ru),dt$1(Pu,Bu),Hu&&Hu.m(Pu,null),_u[40](Pu),dt$1(Tu,Vu),Uu&&Uu.m(Tu,null),dt$1($u,Ou),ju&&ju.m($u,null),Du=!0,ku||(Fu=[Jt(Lu=b$3.call(null,Ru,{thresholdProvider:_u[38]})),st$2(Ru,"swipeStart",_u[16]),st$2(Ru,"swipeMove",_u[18]),st$2(Ru,"swipeEnd",_u[19]),st$2(Ru,"swipeFailed",_u[20]),st$2(Ru,"swipeThresholdReached",_u[17]),Jt(h$7.call(null,Pu)),st$2(Pu,"hovered",_u[21]),Jt(y$7.call(null,Pu)),st$2(Pu,"tapped",_u[22])],ku=!0)},p(Wu,Qu){Wu[1]?Nu?(Nu.p(Wu,Qu),Qu[0]&2&&tt$3(Nu,1)):(Nu=ge$1(Wu),Nu.c(),tt$3(Nu,1),Nu.m(Tu,Cu)):Nu&&(Lt(),$t(Nu,1,1,()=>{Nu=null}),Ot$1()),zu&&zu.p&&(!Du||Qu[0]&96|Qu[1]&32)&&It(zu,Gu,Wu,Wu[36],Du?Ht(Gu,Wu[36],Qu,it$1):Ut(Wu[36]),fe$1),(!Du||Qu[0]&256)&&ne(Ru,"transform","translateX("+Wu[8]+"px)"),(!Du||Qu[0]&512)&&ne(Ru,"transition-duration",Wu[9]+"ms"),(!Du||Qu[0]&1)&&ne(Ru,"transition-timing-function",Wu[0]),Lu&&O$c(Lu.update)&&Qu[0]&2048&&Lu.update.call(null,{thresholdProvider:Wu[38]}),Wu[3]?Hu?(Hu.p(Wu,Qu),Qu[0]&8&&tt$3(Hu,1)):(Hu=_e$1(Wu),Hu.c(),tt$3(Hu,1),Hu.m(Pu,null)):Hu&&(Lt(),$t(Hu,1,1,()=>{Hu=null}),Ot$1()),Wu[1]?Uu?(Uu.p(Wu,Qu),Qu[0]&2&&tt$3(Uu,1)):(Uu=me$1(Wu),Uu.c(),tt$3(Uu,1),Uu.m(Tu,null)):Uu&&(Lt(),$t(Uu,1,1,()=>{Uu=null}),Ot$1()),Wu[4]?ju?(ju.p(Wu,Qu),Qu[0]&16&&tt$3(ju,1)):(ju=pe$2(Wu),ju.c(),tt$3(ju,1),ju.m($u,null)):ju&&(Lt(),$t(ju,1,1,()=>{ju=null}),Ot$1())},i(Wu){Du||(tt$3(Nu),tt$3(zu,Wu),tt$3(Hu),tt$3(Uu),tt$3(ju),Du=!0)},o(Wu){$t(Nu),$t(zu,Wu),$t(Hu),$t(Uu),$t(ju),Du=!1},d(Wu){Wu&&I$g($u),Nu&&Nu.d(),zu&&zu.d(Wu),_u[39](null),Hu&&Hu.d(),_u[40](null),Uu&&Uu.d(),ju&&ju.d(),ku=!1,v$b(Fu)}}}function ct(_u,$u,Tu){let{$$slots:Cu={},$$scope:Pu}=$u,Ru=[],Lu,Bu,Vu=0,Ou=0,Du=1;const[{data:ku,progressManager:Fu},Nu,Gu]=A$8((xp,mp)=>{w$5({currentPageIndex:()=>Tu(5,Lu=mp),progressValue:()=>Tu(7,Bu=mp),offset:()=>Tu(8,Vu=mp),durationMs:()=>Tu(9,Ou=mp),pagesCount:()=>Tu(10,Du=mp),loaded:()=>Tu(6,Ru=mp)})(xp)}),zu=fe$2();let{timingFunction:Hu="ease-in-out"}=$u,{arrows:Uu=!0}=$u,{infinite:ju=!0}=$u,{initialPageIndex:Wu=0}=$u,{duration:Qu=500}=$u,{autoplay:qu=!1}=$u,{autoplayDuration:Yu=3e3}=$u,{autoplayDirection:Ju=e$3}=$u,{pauseOnFocus:_d=!1}=$u,{autoplayProgressVisible:tp=!1}=$u,{dots:Ku=!0}=$u,{swiping:Xu=!0}=$u,{particlesToShow:Zu=1}=$u,{particlesToScroll:_c=1}=$u;function Xc(xp,mp){return k$5(this,null,function*(){const sp=o$3(mp,"animated",!0);if(typeof xp!="number")throw new Error("pageIndex should be a number");yield Nu.showPage(xp,{animated:sp})})}function _h(xp){return k$5(this,null,function*(){const mp=o$3(xp,"animated",!0);yield Nu.showPrevPage({animated:mp})})}function ip(xp){return k$5(this,null,function*(){const mp=o$3(xp,"animated",!0);yield Nu.showNextPage({animated:mp})})}let ap=0,hp,Ap;const gp=z$5(({width:xp})=>{Tu(11,ap=xp),ku.particleWidth=ap/ku.particlesToShow,c$6({particlesContainerChildren:Ap.children,particleWidth:ku.particleWidth}),Nu.offsetPage({animated:!1})});function Rp(){const{clonesToAppend:xp,clonesToPrepend:mp}=N$5({clonesCountHead:ku.clonesCountHead,clonesCountTail:ku.clonesCountTail,particlesContainerChildren:Ap.children});x$5({particlesContainer:Ap,clonesToAppend:xp,clonesToPrepend:mp})}ce$1(()=>{k$5(this,null,function*(){yield _e$2(),Ap&&hp&&(ku.particlesCountWithoutClones=Ap.children.length,yield _e$2(),ku.infinite&&Rp(),ku.particlesCount=Ap.children.length,Nu.showPage(Wu,{animated:!1}),gp.observe(hp))})}),le$1(()=>{gp.disconnect(),Fu.reset()});function Sp(xp){return k$5(this,null,function*(){yield Nu.showPage(xp,{animated:!0})})}function Dp(){Xu&&(ku.durationMs=0)}function Ep(xp){return k$5(this,null,function*(){Xu&&(yield w$5({[e$3]:Nu.showNextPage,[t$3]:Nu.showPrevPage})(xp.detail.direction))})}function Bp(xp){Xu&&(ku.offset+=xp.detail.dx)}function Ip(){Xu&&Nu.showParticle(ku.currentParticleIndex)}function ep(){return k$5(this,null,function*(){Xu&&(yield Nu.offsetPage({animated:!0}))})}function _f(xp){ku.focused=xp.detail.value}function op(){Nu.toggleFocused()}function rp(){Nu.showPrevPage()}const up=()=>ap/3;function cp(xp){rt$4[xp?"unshift":"push"](()=>{Ap=xp,Tu(13,Ap)})}function fp(xp){rt$4[xp?"unshift":"push"](()=>{hp=xp,Tu(12,hp)})}const vp=xp=>Sp(xp.detail);return _u.$$set=xp=>{"timingFunction"in xp&&Tu(0,Hu=xp.timingFunction),"arrows"in xp&&Tu(1,Uu=xp.arrows),"infinite"in xp&&Tu(2,ju=xp.infinite),"initialPageIndex"in xp&&Tu(24,Wu=xp.initialPageIndex),"duration"in xp&&Tu(25,Qu=xp.duration),"autoplay"in xp&&Tu(26,qu=xp.autoplay),"autoplayDuration"in xp&&Tu(27,Yu=xp.autoplayDuration),"autoplayDirection"in xp&&Tu(28,Ju=xp.autoplayDirection),"pauseOnFocus"in xp&&Tu(29,_d=xp.pauseOnFocus),"autoplayProgressVisible"in xp&&Tu(3,tp=xp.autoplayProgressVisible),"dots"in xp&&Tu(4,Ku=xp.dots),"swiping"in xp&&Tu(30,Xu=xp.swiping),"particlesToShow"in xp&&Tu(31,Zu=xp.particlesToShow),"particlesToScroll"in xp&&Tu(32,_c=xp.particlesToScroll),"$$scope"in xp&&Tu(36,Pu=xp.$$scope)},_u.$$.update=()=>{_u.$$.dirty[0]&32&&zu("pageChange",Lu),_u.$$.dirty[0]&4&&(ku.infinite=ju),_u.$$.dirty[0]&33554432&&(ku.durationMsInit=Qu),_u.$$.dirty[0]&67108864&&(ku.autoplay=qu),_u.$$.dirty[0]&134217728&&(ku.autoplayDuration=Yu),_u.$$.dirty[0]&268435456&&(ku.autoplayDirection=Ju),_u.$$.dirty[0]&536870912&&(ku.pauseOnFocus=_d),_u.$$.dirty[1]&1&&(ku.particlesToShowInit=Zu),_u.$$.dirty[1]&2&&(ku.particlesToScrollInit=_c)},[Hu,Uu,ju,tp,Ku,Lu,Ru,Bu,Vu,Ou,Du,ap,hp,Ap,Nu,Sp,Dp,Ep,Bp,Ip,ep,_f,op,rp,Wu,Qu,qu,Yu,Ju,_d,Xu,Zu,_c,Xc,_h,ip,Pu,Cu,up,cp,fp,vp]}class kt extends Te{constructor($u){super(),Me(this,$u,ct,ut,Ft,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},tt$1,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}}function x$3(_u){Qt(_u,"svelte-159ski6",".media-item.svelte-159ski6.svelte-159ski6{position:relative;height:100%}.media-content.svelte-159ski6.svelte-159ski6{position:relative;pointer-events:auto;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.media-content.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none}.video-icon.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-159ski6.svelte-159ski6{display:none;position:absolute;width:100%;height:100%;top:0;left:0;transform:translate3d(0, 0, 0)}.video-play-button-container.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none;display:block}.video-icon.svelte-159ski6.svelte-159ski6{pointer-events:auto}.video-icon.large.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem}.video-icon.small.svelte-159ski6.svelte-159ski6{width:1.75rem;height:1.75rem}.video-icon.svelte-159ski6 .video-icon-img.svelte-159ski6{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-159ski6 .video-icon-img.canPlay.svelte-159ski6{cursor:pointer}")}function L$5(_u){let $u;function Tu(Ru,Lu){if(Ru[2].type==="Image")return ee$1;if(Ru[2].type==="Video")return $$1}let Cu=Tu(_u),Pu=Cu&&Cu(_u);return{c(){$u=U$8("div"),Pu&&Pu.c(),te$1($u,"class","media-item svelte-159ski6"),te$1($u,"draggable","false")},m(Ru,Lu){Nt(Ru,$u,Lu),Pu&&Pu.m($u,null)},p(Ru,Lu){Cu===(Cu=Tu(Ru))&&Pu?Pu.p(Ru,Lu):(Pu&&Pu.d(1),Pu=Cu&&Cu(Ru),Pu&&(Pu.c(),Pu.m($u,null)))},d(Ru){Ru&&I$g($u),Pu&&Pu.d()}}}function $$1(_u){let $u,Tu,Cu,Pu,Ru,Lu;function Bu(Du,ku){return Du[7]&&Du[2].videoCoverUrl?ie$1:te}let Vu=Bu(_u),Ou=Vu(_u);return{c(){Ou.c(),$u=Xt(),Tu=U$8("div"),Cu=U$8("div"),Pu=U$8("div"),te$1(Pu,"class","video-icon-img svelte-159ski6"),ne(Pu,"background-image","url("+_u[20]()+")"),re$2(Pu,"canPlay",_u[5]),te$1(Cu,"class","video-icon svelte-159ski6"),re$2(Cu,"large",_u[4]==="large"),re$2(Cu,"small",_u[4]==="small"),te$1(Tu,"class","video-play-button-container svelte-159ski6"),re$2(Tu,"showPlayButton",_u[10])},m(Du,ku){Ou.m(Du,ku),Nt(Du,$u,ku),Nt(Du,Tu,ku),dt$1(Tu,Cu),dt$1(Cu,Pu),Ru||(Lu=st$2(Pu,"click",_u[21]),Ru=!0)},p(Du,ku){Vu===(Vu=Bu(Du))&&Ou?Ou.p(Du,ku):(Ou.d(1),Ou=Vu(Du),Ou&&(Ou.c(),Ou.m($u.parentNode,$u))),ku&8&&ne(Pu,"background-image","url("+Du[20]()+")"),ku&32&&re$2(Pu,"canPlay",Du[5]),ku&16&&re$2(Cu,"large",Du[4]==="large"),ku&16&&re$2(Cu,"small",Du[4]==="small"),ku&1024&&re$2(Tu,"showPlayButton",Du[10])},d(Du){Ou.d(Du),Du&&I$g($u),Du&&I$g(Tu),Ru=!1,Lu()}}}function ee$1(_u){let $u,Tu,Cu,Pu;return{c(){$u=U$8("img"),te$1($u,"class","media-content svelte-159ski6"),te$1($u,"style",Tu=`object-fit: ${_u[6]};`),Wt($u.src,Cu=_u[2].url)||te$1($u,"src",Cu),te$1($u,"alt",Pu=_u[2].name),te$1($u,"draggable",!1)},m(Ru,Lu){Nt(Ru,$u,Lu)},p(Ru,Lu){Lu&64&&Tu!==(Tu=`object-fit: ${Ru[6]};`)&&te$1($u,"style",Tu),Lu&4&&!Wt($u.src,Cu=Ru[2].url)&&te$1($u,"src",Cu),Lu&4&&Pu!==(Pu=Ru[2].name)&&te$1($u,"alt",Pu)},d(Ru){Ru&&I$g($u)}}}function te(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu;return{c(){$u=U$8("video"),te$1($u,"class","media-content svelte-159ski6"),te$1($u,"style",Tu=`object-fit: ${_u[6]};`),Wt($u.src,Cu=_u[2].videoCoverUrl?_u[2].url:_u[2].url+"#t=0.1")||te$1($u,"src",Cu),te$1($u,"poster",Pu=_u[2].videoCoverUrl),te$1($u,"preload",Ru=_u[2].videoCoverUrl?"none":"auto"),te$1($u,"disablepictureinpicture",""),$u.playsInline=!0,te$1($u,"paused",""),$u.muted=!0,te$1($u,"draggable",!1),$u.loop=!1,te$1($u,"crossorigin",""),$u.controls=!1,re$2($u,"showPlayButton",_u[10])},m(Vu,Ou){Nt(Vu,$u,Ou),_u[19]($u),Lu||(Bu=[st$2($u,"play",_u[14]),st$2($u,"pause",_u[15]),st$2($u,"error",_u[16]),st$2($u,"ended",_u[17]),st$2($u,"click",_u[18])],Lu=!0)},p(Vu,Ou){Ou&64&&Tu!==(Tu=`object-fit: ${Vu[6]};`)&&te$1($u,"style",Tu),Ou&4&&!Wt($u.src,Cu=Vu[2].videoCoverUrl?Vu[2].url:Vu[2].url+"#t=0.1")&&te$1($u,"src",Cu),Ou&4&&Pu!==(Pu=Vu[2].videoCoverUrl)&&te$1($u,"poster",Pu),Ou&4&&Ru!==(Ru=Vu[2].videoCoverUrl?"none":"auto")&&te$1($u,"preload",Ru),Ou&1024&&re$2($u,"showPlayButton",Vu[10])},d(Vu){Vu&&I$g($u),_u[19](null),Lu=!1,v$b(Bu)}}}function ie$1(_u){let $u,Tu,Cu,Pu;return{c(){$u=U$8("img"),te$1($u,"class","media-content svelte-159ski6"),te$1($u,"style",Tu=`object-fit: ${_u[6]};`),Wt($u.src,Cu=_u[2].videoCoverUrl)||te$1($u,"src",Cu),te$1($u,"alt",Pu=_u[2].name),te$1($u,"draggable",!1)},m(Ru,Lu){Nt(Ru,$u,Lu)},p(Ru,Lu){Lu&64&&Tu!==(Tu=`object-fit: ${Ru[6]};`)&&te$1($u,"style",Tu),Lu&4&&!Wt($u.src,Cu=Ru[2].videoCoverUrl)&&te$1($u,"src",Cu),Lu&4&&Pu!==(Pu=Ru[2].name)&&te$1($u,"alt",Pu)},d(Ru){Ru&&I$g($u)}}}function le(_u){let $u,Tu=_u[2]&&L$5(_u);return{c(){Tu&&Tu.c(),$u=Yt()},m(Cu,Pu){Tu&&Tu.m(Cu,Pu),Nt(Cu,$u,Pu)},p(Cu,[Pu]){Cu[2]?Tu?Tu.p(Cu,Pu):(Tu=L$5(Cu),Tu.c(),Tu.m($u.parentNode,$u)):Tu&&(Tu.d(1),Tu=null)},i:E$e,o:E$e,d(Cu){Tu&&Tu.d(Cu),Cu&&I$g($u)}}}function oe(_u,$u,Tu){let Cu,Pu,{mediaInstance:Ru={videoInstance:void 0,paused:!0}}=$u,{tag:Lu}=$u,{media:Bu}=$u,{playButtonIfNeed:Vu="withoutText"}=$u,{playButtonSizeIfNeed:Ou="small"}=$u,{canPlay:Du=!0}=$u,{objectFit:ku="fill"}=$u,{disableVideoIfHavePoster:Fu=!1}=$u,Nu=!0,Gu=!1;function zu(){Tu(8,Gu=(Bu==null?void 0:Bu.type)==="Video"&&!!Bu.videoCoverUrl)}const Hu=de$3("mediaStore"),Uu=de$3("hooks"),ju=()=>{Gu||Cu&&(Tu(9,Cu.muted=!0,Cu),Cu.play(),Cu.pause(),Tu(9,Cu.muted=!1,Cu),Tu(8,Gu=!0))};Uu.on("loadVideoFirstFrame",ju),ce$1(()=>{Hu.subscribe(({currentMediaElement:Xu})=>{Xu!==Cu&&(Cu==null||Cu.pause())})});const Wu=Xu=>{Tu(10,Nu=!1),Tu(0,Ru.paused=!1,Ru),Tu(8,Gu=!0),Cu&&Hu.set({currentMediaElement:Cu}),Uu.emit("playStateChange",{event:Xu,state:"playing",tag:Lu,mediaInstance:Cu})},Qu=Xu=>{Tu(10,Nu=!0),Tu(0,Ru.paused=!0,Ru),Uu.emit("playStateChange",{event:Xu,state:"paused",tag:Lu,mediaInstance:Cu})},qu=Xu=>{Tu(10,Nu=!0),Tu(0,Ru.paused=!0,Ru),Uu.emit("playStateChange",{event:Xu,state:"paused",tag:Lu,mediaInstance:Cu})},Yu=Xu=>{Tu(10,Nu=!0),Tu(0,Ru.paused=!0,Ru),Uu.emit("playStateChange",{event:Xu,state:"paused",tag:Lu,mediaInstance:Cu})},Ju=Xu=>{Cu&&Cu.pause()};function _d(Xu){rt$4[Xu?"unshift":"push"](()=>{Ru.videoInstance=Xu,Tu(0,Ru)})}const tp=()=>Vu==="withText"?a$8:Vu==="withoutText"?g$c:Vu,Ku=Xu=>{Du&&Cu&&(Tu(9,Cu.muted=!1,Cu),Cu.play())};return _u.$$set=Xu=>{"mediaInstance"in Xu&&Tu(0,Ru=Xu.mediaInstance),"tag"in Xu&&Tu(1,Lu=Xu.tag),"media"in Xu&&Tu(2,Bu=Xu.media),"playButtonIfNeed"in Xu&&Tu(3,Vu=Xu.playButtonIfNeed),"playButtonSizeIfNeed"in Xu&&Tu(4,Ou=Xu.playButtonSizeIfNeed),"canPlay"in Xu&&Tu(5,Du=Xu.canPlay),"objectFit"in Xu&&Tu(6,ku=Xu.objectFit),"disableVideoIfHavePoster"in Xu&&Tu(7,Fu=Xu.disableVideoIfHavePoster)},_u.$$.update=()=>{if(_u.$$.dirty&1&&Tu(9,Cu=Ru.videoInstance),_u.$$.dirty&4&&Tu(13,Pu=Bu==null?void 0:Bu.url),_u.$$.dirty&8192&&Pu&&zu(),_u.$$.dirty&512&&Cu&&Tu(10,Nu=Cu.paused),_u.$$.dirty&772&&(Bu==null?void 0:Bu.type)==="Video"&&!Gu){const Xu=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,Zu=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1&&Xu;Cu&&Zu&&Cu.paused&&(document.removeEventListener("WeixinJSBridgeReady",ju),document.removeEventListener("touchstart",ju),document.removeEventListener("click",ju),document.addEventListener("WeixinJSBridgeReady",ju),document.addEventListener("touchstart",ju),document.addEventListener("click",ju))}},[Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Gu,Cu,Nu,Hu,Uu,Pu,Wu,Qu,qu,Yu,Ju,_d,tp,Ku]}class re extends Te{constructor($u){super(),Me(this,$u,oe,le,Ft,{mediaInstance:0,tag:1,media:2,playButtonIfNeed:3,playButtonSizeIfNeed:4,canPlay:5,objectFit:6,disableVideoIfHavePoster:7},x$3)}}function be$1(_u){Qt(_u,"svelte-1mrbqlg",".media-list-wrapper.svelte-1mrbqlg.svelte-1mrbqlg{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg{position:relative;pointer-events:auto;height:100%;left:50%;top:50%;transform:translate(-50%, -50%)}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__carousel-container,.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__content-container{height:100%}")}function P$1(_u,$u,Tu){const Cu=_u.slice();return Cu[28]=$u[Tu],Cu[29]=$u,Cu[30]=Tu,Cu}function Q$5(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu;const Vu=[Ie,he$2],Ou=[];function Du(ku,Fu){return ku[13]&&ku[10].length>1?0:1}return Cu=Du(_u),Pu=Ou[Cu]=Vu[Cu](_u),{c(){$u=U$8("div"),Tu=U$8("div"),Pu.c(),te$1(Tu,"class","media-list svelte-1mrbqlg"),re$2(Tu,"carouselEnabled",_u[13]),te$1($u,"class","media-list-wrapper svelte-1mrbqlg"),re$2($u,"unfolded",_u[5])},m(ku,Fu){Nt(ku,$u,Fu),dt$1($u,Tu),Ou[Cu].m(Tu,null),Bu=!0},p(ku,Fu){_u=ku;let Nu=Cu;Cu=Du(_u),Cu===Nu?Ou[Cu].p(_u,Fu):(Lt(),$t(Ou[Nu],1,1,()=>{Ou[Nu]=null}),Ot$1(),Pu=Ou[Cu],Pu?Pu.p(_u,Fu):(Pu=Ou[Cu]=Vu[Cu](_u),Pu.c()),tt$3(Pu,1),Pu.m(Tu,null)),(!Bu||Fu[0]&8192)&&re$2(Tu,"carouselEnabled",_u[13]),(!Bu||Fu[0]&32)&&re$2($u,"unfolded",_u[5])},i(ku){Bu||(tt$3(Pu),ku&&L$d(()=>{Bu&&(Lu&&Lu.end(1),Ru=me$2($u,S$6,_u[6]?{y:4,duration:_u[4],delay:_u[2],easing:it$3}:void 0),Ru.start())}),Bu=!0)},o(ku){$t(Pu),Ru&&Ru.invalidate(),ku&&(Lu=ye$2($u,S$6,_u[6]?{y:4,duration:_u[4],delay:_u[3],easing:it$3}:void 0)),Bu=!1},d(ku){ku&&I$g($u),Ou[Cu].d(),ku&&Lu&&Lu.end()}}}function he$2(_u){let $u,Tu,Cu;const Pu=[{media:_u[1][0]},_u[7],{tag:_u[0]}];function Ru(Bu){_u[20](Bu)}let Lu={};for(let Bu=0;Bu<Pu.length;Bu+=1)Lu=kt$1(Lu,Pu[Bu]);return _u[8][0]!==void 0&&(Lu.mediaInstance=_u[8][0]),$u=new re({props:Lu}),rt$4.push(()=>Ne($u,"mediaInstance",Ru)),{c(){Ae($u.$$.fragment)},m(Bu,Vu){Dt($u,Bu,Vu),Cu=!0},p(Bu,Vu){const Ou=Vu[0]&131?Ee(Pu,[Vu[0]&2&&{media:Bu[1][0]},Vu[0]&128&&ve$1(Bu[7]),Vu[0]&1&&{tag:Bu[0]}]):{};!Tu&&Vu[0]&256&&(Tu=!0,Ou.mediaInstance=Bu[8][0],pe$4(()=>Tu=!1)),$u.$set(Ou)},i(Bu){Cu||(tt$3($u.$$.fragment,Bu),Cu=!0)},o(Bu){$t($u.$$.fragment,Bu),Cu=!1},d(Bu){Rt($u,Bu)}}}function Ie(_u){let $u,Tu,Cu={dots:!1,arrows:!1,$$slots:{default:[ke$1]},$$scope:{ctx:_u}};return $u=new kt({props:Cu}),_u[18]($u),$u.$on("pageChange",_u[19]),{c(){Ae($u.$$.fragment)},m(Pu,Ru){Dt($u,Pu,Ru),Tu=!0},p(Pu,Ru){const Lu={};Ru[0]&1409|Ru[1]&1&&(Lu.$$scope={dirty:Ru,ctx:Pu}),$u.$set(Lu)},i(Pu){Tu||(tt$3($u.$$.fragment,Pu),Tu=!0)},o(Pu){$t($u.$$.fragment,Pu),Tu=!1},d(Pu){_u[18](null),Rt($u,Pu)}}}function R$1(_u){let $u,Tu,Cu;const Pu=[_u[7],{media:_u[28]},{tag:_u[0]}];function Ru(Bu){_u[17](Bu,_u[30])}let Lu={};for(let Bu=0;Bu<Pu.length;Bu+=1)Lu=kt$1(Lu,Pu[Bu]);return _u[8][_u[30]]!==void 0&&(Lu.mediaInstance=_u[8][_u[30]]),$u=new re({props:Lu}),rt$4.push(()=>Ne($u,"mediaInstance",Ru)),{c(){Ae($u.$$.fragment)},m(Bu,Vu){Dt($u,Bu,Vu),Cu=!0},p(Bu,Vu){_u=Bu;const Ou=Vu[0]&1153?Ee(Pu,[Vu[0]&128&&ve$1(_u[7]),Vu[0]&1024&&{media:_u[28]},Vu[0]&1&&{tag:_u[0]}]):{};!Tu&&Vu[0]&256&&(Tu=!0,Ou.mediaInstance=_u[8][_u[30]],pe$4(()=>Tu=!1)),$u.$set(Ou)},i(Bu){Cu||(tt$3($u.$$.fragment,Bu),Cu=!0)},o(Bu){$t($u.$$.fragment,Bu),Cu=!1},d(Bu){Rt($u,Bu)}}}function ke$1(_u){let $u,Tu,Cu=_u[10],Pu=[];for(let Lu=0;Lu<Cu.length;Lu+=1)Pu[Lu]=R$1(P$1(_u,Cu,Lu));const Ru=Lu=>$t(Pu[Lu],1,1,()=>{Pu[Lu]=null});return{c(){for(let Lu=0;Lu<Pu.length;Lu+=1)Pu[Lu].c();$u=Yt()},m(Lu,Bu){for(let Vu=0;Vu<Pu.length;Vu+=1)Pu[Vu]&&Pu[Vu].m(Lu,Bu);Nt(Lu,$u,Bu),Tu=!0},p(Lu,Bu){if(Bu[0]&1409){Cu=Lu[10];let Vu;for(Vu=0;Vu<Cu.length;Vu+=1){const Ou=P$1(Lu,Cu,Vu);Pu[Vu]?(Pu[Vu].p(Ou,Bu),tt$3(Pu[Vu],1)):(Pu[Vu]=R$1(Ou),Pu[Vu].c(),tt$3(Pu[Vu],1),Pu[Vu].m($u.parentNode,$u))}for(Lt(),Vu=Cu.length;Vu<Pu.length;Vu+=1)Ru(Vu);Ot$1()}},i(Lu){if(!Tu){for(let Bu=0;Bu<Cu.length;Bu+=1)tt$3(Pu[Bu]);Tu=!0}},o(Lu){Pu=Pu.filter(Boolean);for(let Bu=0;Bu<Pu.length;Bu+=1)$t(Pu[Bu]);Tu=!1},d(Lu){Vt(Pu,Lu),Lu&&I$g($u)}}}function ye$1(_u){let $u,Tu,Cu=_u[5]&&Q$5(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,Ru){Pu[5]?Cu?(Cu.p(Pu,Ru),Ru[0]&32&&tt$3(Cu,1)):(Cu=Q$5(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function Ce(_u,$u,Tu){let Cu,Pu,Ru,Lu,{tag:Bu}=$u,{mediaData:Vu}=$u,{inDelay:Ou=0}=$u,{outDelay:Du=0}=$u,{duration:ku=0}=$u,{unfolded:Fu=!0}=$u,{animation:Nu=!0}=$u,{mediaItemConfig:Gu}=$u,{enableCarousel:zu=!0}=$u,{autoplayConfig:Hu={}}=$u;const{autoplayVideo:Uu=!1,autoplayCarousel:ju=!0,autoplayVideoInCarousel:Wu=!1}=Hu;let Qu=[],qu=0,Yu,Ju=null;const _d=de$3("hooks"),tp=de$3("mediaStore");function Ku(){const _h=Qu[qu],ip=_h==null?void 0:_h.videoInstance;ip&&(ip.paused?(ip.muted=!1,ip.play()):ip.pause())}ce$1(()=>{_d.on("click",_h=>{var ip,ap,hp;(hp=(ap=(ip=Bu.tag3DContentSvelte)==null?void 0:ip.css3DInstance)==null?void 0:ap.css3DObject)!=null&&hp.opacityMesh&&_h.tag.id===Bu.id&&Ku()}),Ju=setInterval(()=>{Lu&&(Yu==null||Yu.goToNext())},3e3)}),le$1(()=>{clearInterval(Ju),_d.off("click",Ku)});function Xu(_h,ip){_u.$$.not_equal(Qu[ip],_h)&&(Qu[ip]=_h,Tu(8,Qu))}function Zu(_h){rt$4[_h?"unshift":"push"](()=>{Yu=_h,Tu(12,Yu)})}const _c=_h=>{Cu||tp.set({currentMediaElement:null}),Tu(11,qu=_h.detail)};function Xc(_h){_u.$$.not_equal(Qu[0],_h)&&(Qu[0]=_h,Tu(8,Qu))}return _u.$$set=_h=>{"tag"in _h&&Tu(0,Bu=_h.tag),"mediaData"in _h&&Tu(1,Vu=_h.mediaData),"inDelay"in _h&&Tu(2,Ou=_h.inDelay),"outDelay"in _h&&Tu(3,Du=_h.outDelay),"duration"in _h&&Tu(4,ku=_h.duration),"unfolded"in _h&&Tu(5,Fu=_h.unfolded),"animation"in _h&&Tu(6,Nu=_h.animation),"mediaItemConfig"in _h&&Tu(7,Gu=_h.mediaItemConfig),"enableCarousel"in _h&&Tu(15,zu=_h.enableCarousel),"autoplayConfig"in _h&&Tu(16,Hu=_h.autoplayConfig)},_u.$$.update=()=>{_u.$$.dirty[0]&256&&Tu(9,Cu=Qu.every(_h=>_h.paused)),_u.$$.dirty[0]&32770&&Tu(13,Pu=zu&&(Vu==null?void 0:Vu.length)>1),_u.$$.dirty[0]&2&&Tu(10,Ru=Vu),_u.$$.dirty[0]&1536&&(Lu=Ru.length>1&&ju&&Cu)},[Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,Qu,Cu,Ru,qu,Yu,Pu,tp,zu,Hu,Xu,Zu,_c,Xc]}class ot$2 extends Te{constructor($u){super(),Me(this,$u,Ce,ye$1,Ft,{tag:0,mediaData:1,inDelay:2,outDelay:3,duration:4,unfolded:5,animation:6,mediaItemConfig:7,enableCarousel:15,autoplayConfig:16},be$1,[-1,-1])}}function V$6(_u){Qt(_u,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function I$5(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu;$u=new Q$9({props:{visible:_u[3],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),Pu=new A$a({props:{unfolded:_u[3],outDelay:400}});let Ou=_u[2]&&N$3(_u),Du=_u[1]&&P(_u);return{c(){Ae($u.$$.fragment),Tu=Xt(),Cu=U$8("div"),Ae(Pu.$$.fragment),Ru=Xt(),Ou&&Ou.c(),Lu=Xt(),Du&&Du.c(),Bu=Yt(),te$1(Cu,"class","line svelte-1f7m1lj")},m(ku,Fu){Dt($u,ku,Fu),Nt(ku,Tu,Fu),Nt(ku,Cu,Fu),Dt(Pu,Cu,null),Nt(ku,Ru,Fu),Ou&&Ou.m(ku,Fu),Nt(ku,Lu,Fu),Du&&Du.m(ku,Fu),Nt(ku,Bu,Fu),Vu=!0},p(ku,Fu){const Nu={};Fu&8&&(Nu.visible=ku[3]),$u.$set(Nu);const Gu={};Fu&8&&(Gu.unfolded=ku[3]),Pu.$set(Gu),ku[2]?Ou?(Ou.p(ku,Fu),Fu&4&&tt$3(Ou,1)):(Ou=N$3(ku),Ou.c(),tt$3(Ou,1),Ou.m(Lu.parentNode,Lu)):Ou&&(Lt(),$t(Ou,1,1,()=>{Ou=null}),Ot$1()),ku[1]?Du?(Du.p(ku,Fu),Fu&2&&tt$3(Du,1)):(Du=P(ku),Du.c(),tt$3(Du,1),Du.m(Bu.parentNode,Bu)):Du&&(Lt(),$t(Du,1,1,()=>{Du=null}),Ot$1())},i(ku){Vu||(tt$3($u.$$.fragment,ku),tt$3(Pu.$$.fragment,ku),tt$3(Ou),tt$3(Du),Vu=!0)},o(ku){$t($u.$$.fragment,ku),$t(Pu.$$.fragment,ku),$t(Ou),$t(Du),Vu=!1},d(ku){Rt($u,ku),ku&&I$g(Tu),ku&&I$g(Cu),Rt(Pu),ku&&I$g(Ru),Ou&&Ou.d(ku),ku&&I$g(Lu),Du&&Du.d(ku),ku&&I$g(Bu)}}}function N$3(_u){let $u,Tu,Cu;return Tu=new re$1({props:{unfolded:_u[3],content:_u[2],inDelay:500}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","text svelte-1f7m1lj")},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),Cu=!0},p(Pu,Ru){const Lu={};Ru&8&&(Lu.unfolded=Pu[3]),Ru&4&&(Lu.content=Pu[2]),Tu.$set(Lu)},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu)}}}function P(_u){let $u,Tu,Cu;return Tu=new ot$2({props:{autoplayConfig:{autoplayCarousel:!1},unfolded:_u[3],mediaData:_u[1],tag:_u[0],enableCarousel:!1,mediaItemConfig:{canPlay:!1,playButtonSizeIfNeed:"small",disableVideoIfHavePoster:!0},inDelay:500,duration:500}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","media-wrapper svelte-1f7m1lj")},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),Cu=!0},p(Pu,Ru){const Lu={};Ru&8&&(Lu.unfolded=Pu[3]),Ru&2&&(Lu.mediaData=Pu[1]),Ru&1&&(Lu.tag=Pu[0]),Tu.$set(Lu)},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu)}}}function Y$2(_u){let $u,Tu,Cu=_u[0].state&&I$5(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[0].state?Cu?(Cu.p(Pu,Ru),Ru&1&&tt$3(Cu,1)):(Cu=I$5(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function A$7(_u,$u,Tu){let Cu,Pu,Ru,Lu,{tag:Bu}=$u;return _u.$$set=Vu=>{"tag"in Vu&&Tu(0,Bu=Vu.tag)},_u.$$.update=()=>{var Vu,Ou,Du;_u.$$.dirty&1&&Tu(3,Cu=Bu.state?Bu.state.unfolded:!1),_u.$$.dirty&1&&Tu(4,Pu=(Ou=(Vu=Bu.data.title)!=null?Vu:Bu.data.text)!=null?Ou:""),_u.$$.dirty&16&&Tu(2,Ru=((Du=Pu.length)!=null?Du:0)>7?Pu.substring(0,6)+"...":Pu),_u.$$.dirty&1&&Tu(1,Lu=Bu.data.mediaData)},[Bu,Lu,Ru,Cu,Pu]}class qe extends Te{constructor($u){super(),Me(this,$u,A$7,Y$2,Ft,{tag:0},V$6)}}function pe$1(_u){Qt(_u,"svelte-sezqcq",'@charset "UTF-8";.svelte-sezqcq.svelte-sezqcq{box-sizing:border-box}.marketing.svelte-sezqcq.svelte-sezqcq{transform:translateY(-100%)}.marketing.svelte-sezqcq .line.svelte-sezqcq{position:absolute;height:1.875rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.marketing.svelte-sezqcq .content.svelte-sezqcq{position:relative;min-width:7.5rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition-property:opacity, transform;transition-duration:500ms}.marketing.svelte-sezqcq .content .headerImage.svelte-sezqcq{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.title-wrapper.svelte-sezqcq.svelte-sezqcq{position:relative;width:100%;height:1.125rem}.title-wrapper.svelte-sezqcq .title.svelte-sezqcq{border-radius:0.25rem;width:100%;padding-left:0.625rem;padding-right:0.625rem}.title-wrapper.svelte-sezqcq .title .text.svelte-sezqcq{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem}.footer.svelte-sezqcq.svelte-sezqcq{position:relative;padding:0.5rem 0.625rem 0 0;width:100%;display:flex;align-items:center}.footer.svelte-sezqcq .goto-button.svelte-sezqcq{display:flex;align-self:flex-end;flex-wrap:wrap;align-items:center;overflow:hidden;height:0.875rem}.footer.svelte-sezqcq .goto-button .gap.svelte-sezqcq{height:100%;width:0.625rem}.footer.svelte-sezqcq .goto-button .text.svelte-sezqcq{display:block;height:100%;font-size:0.625rem}.footer.svelte-sezqcq .arrow-wrapper.svelte-sezqcq{height:0.875rem;display:flex;align-self:flex-end;flex-grow:0;flex-shrink:0;align-items:center;margin-left:0.25rem}.footer.svelte-sezqcq .arrow-wrapper svg.arrow.svelte-sezqcq{width:0.375rem;height:0.625rem}.footer.svelte-sezqcq .price.svelte-sezqcq{flex-shrink:0;margin-right:auto;white-space:nowrap;display:flex;align-items:baseline;margin-left:0.625rem}.footer.svelte-sezqcq .price .value.svelte-sezqcq{position:relative;font-size:0.875rem;line-height:1rem;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0rem}.footer.svelte-sezqcq .price .unit.svelte-sezqcq{padding-left:0.125rem;font-size:0.625rem}.tags-wrapper.svelte-sezqcq.svelte-sezqcq{position:relative;overflow:hidden;height:1rem;margin-top:0.25rem}.tags-wrapper.svelte-sezqcq .tags.svelte-sezqcq{position:relative;display:inline-flex;max-width:100%;flex-wrap:wrap;padding-left:0.625rem;padding-right:0.375rem}.tags-wrapper.svelte-sezqcq .tags .tag.svelte-sezqcq{display:flex;align-items:center;justify-content:center;flex-shrink:0;flex-grow:0;font-size:0.625rem;height:1rem;margin-right:0.25rem;margin-bottom:0.625rem;padding:0 0.25rem;border-radius:0.125rem;max-width:100%;text-overflow:ellipsis;overflow:hidden}.marketing.light.svelte-sezqcq .content.svelte-sezqcq{background-color:white}.marketing.light.svelte-sezqcq .content .title-wrapper .title .text.svelte-sezqcq{color:rgba(0, 0, 0, 0.8)}.marketing.light.svelte-sezqcq .content .tags-wrapper .tags .primary-tag.svelte-sezqcq{background:rgba(234, 208, 154, 0.5);color:#946700}.marketing.light.svelte-sezqcq .content .tags-wrapper .tags .secondary-tag.svelte-sezqcq{background:rgba(0, 0, 0, 0.06);color:rgba(0, 0, 0, 0.5)}.marketing.light.svelte-sezqcq .content .footer.svelte-sezqcq{color:#946700;fill:#946700}.marketing.dark.svelte-sezqcq .content.svelte-sezqcq{background-color:rgba(0, 0, 0, 0.5)}.marketing.dark.svelte-sezqcq .content .title-wrapper .title .text.svelte-sezqcq{color:white}.marketing.dark.svelte-sezqcq .content .tags-wrapper .tags .primary-tag.svelte-sezqcq{background:rgba(234, 208, 154, 0.5);color:white}.marketing.dark.svelte-sezqcq .content .tags-wrapper .tags .secondary-tag.svelte-sezqcq{background:rgba(255, 255, 255, 0.15);color:rgba(255, 255, 255, 0.85)}.marketing.dark.svelte-sezqcq .content .footer.svelte-sezqcq{color:#ead09a;fill:#ead09a}.marketing.unfolded.svelte-sezqcq .line.svelte-sezqcq{transform:translateX(-50%) scale(1, 1)}.marketing.folded.svelte-sezqcq .line.svelte-sezqcq{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.marketing.unfolded.svelte-sezqcq .content.svelte-sezqcq{opacity:1}.marketing.folded.svelte-sezqcq .content.svelte-sezqcq{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}')}function E$7(_u,$u,Tu){const Cu=_u.slice();return Cu[0]=$u[Tu],Cu}function N$2(_u,$u,Tu){const Cu=_u.slice();return Cu[0]=$u[Tu],Cu}function O$6(_u){let $u,Tu;return{c(){$u=U$8("img"),te$1($u,"class","headerImage svelte-sezqcq"),Wt($u.src,Tu=_u[3].headerPictureUrl)||te$1($u,"src",Tu),te$1($u,"alt","")},m(Cu,Pu){Nt(Cu,$u,Pu)},p(Cu,Pu){Pu&8&&!Wt($u.src,Tu=Cu[3].headerPictureUrl)&&te$1($u,"src",Tu)},d(Cu){Cu&&I$g($u)}}}function Z$1(_u){let $u,Tu,Cu,Pu,Ru=_u[2]||[],Lu=[];for(let Ou=0;Ou<Ru.length;Ou+=1)Lu[Ou]=A$6(N$2(_u,Ru,Ou));let Bu=_u[5]||[],Vu=[];for(let Ou=0;Ou<Bu.length;Ou+=1)Vu[Ou]=J(E$7(_u,Bu,Ou));return{c(){$u=U$8("div"),Tu=U$8("div");for(let Ou=0;Ou<Lu.length;Ou+=1)Lu[Ou].c();Cu=Xt();for(let Ou=0;Ou<Vu.length;Ou+=1)Vu[Ou].c();te$1(Tu,"class","tags svelte-sezqcq"),L$d(()=>_u[11].call(Tu)),te$1($u,"class","tags-wrapper svelte-sezqcq")},m(Ou,Du){Nt(Ou,$u,Du),dt$1($u,Tu);for(let ku=0;ku<Lu.length;ku+=1)Lu[ku]&&Lu[ku].m(Tu,null);dt$1(Tu,Cu);for(let ku=0;ku<Vu.length;ku+=1)Vu[ku]&&Vu[ku].m(Tu,null);Pu=se$1(Tu,_u[11].bind(Tu))},p(Ou,Du){if(Du&4){Ru=Ou[2]||[];let ku;for(ku=0;ku<Ru.length;ku+=1){const Fu=N$2(Ou,Ru,ku);Lu[ku]?Lu[ku].p(Fu,Du):(Lu[ku]=A$6(Fu),Lu[ku].c(),Lu[ku].m(Tu,Cu))}for(;ku<Lu.length;ku+=1)Lu[ku].d(1);Lu.length=Ru.length}if(Du&32){Bu=Ou[5]||[];let ku;for(ku=0;ku<Bu.length;ku+=1){const Fu=E$7(Ou,Bu,ku);Vu[ku]?Vu[ku].p(Fu,Du):(Vu[ku]=J(Fu),Vu[ku].c(),Vu[ku].m(Tu,null))}for(;ku<Vu.length;ku+=1)Vu[ku].d(1);Vu.length=Bu.length}},d(Ou){Ou&&I$g($u),Vt(Lu,Ou),Vt(Vu,Ou),Pu()}}}function A$6(_u){let $u,Tu=_u[0]+"",Cu;return{c(){$u=U$8("div"),Cu=_t$1(Tu),te$1($u,"class","tag primary-tag svelte-sezqcq"),ne($u,"min-width",H$1)},m(Pu,Ru){Nt(Pu,$u,Ru),dt$1($u,Cu)},p(Pu,Ru){Ru&4&&Tu!==(Tu=Pu[0]+"")&&ee$2(Cu,Tu)},d(Pu){Pu&&I$g($u)}}}function J(_u){let $u,Tu=_u[0]+"",Cu;return{c(){$u=U$8("div"),Cu=_t$1(Tu),te$1($u,"class","tag secondary-tag svelte-sezqcq"),ne($u,"min-width",H$1)},m(Pu,Ru){Nt(Pu,$u,Ru),dt$1($u,Cu)},p(Pu,Ru){Ru&32&&Tu!==(Tu=Pu[0]+"")&&ee$2(Cu,Tu)},d(Pu){Pu&&I$g($u)}}}function K$5(_u){let $u,Tu,Cu=_u[7]&&Q$4(_u),Pu=_u[3].highlightText&&x$2(_u);return{c(){$u=U$8("div"),Cu&&Cu.c(),Tu=Xt(),Pu&&Pu.c(),te$1($u,"class","footer svelte-sezqcq")},m(Ru,Lu){Nt(Ru,$u,Lu),Cu&&Cu.m($u,null),dt$1($u,Tu),Pu&&Pu.m($u,null)},p(Ru,Lu){Ru[7]?Cu?Cu.p(Ru,Lu):(Cu=Q$4(Ru),Cu.c(),Cu.m($u,Tu)):Cu&&(Cu.d(1),Cu=null),Ru[3].highlightText?Pu?Pu.p(Ru,Lu):(Pu=x$2(Ru),Pu.c(),Pu.m($u,null)):Pu&&(Pu.d(1),Pu=null)},d(Ru){Ru&&I$g($u),Cu&&Cu.d(),Pu&&Pu.d()}}}function Q$4(_u){let $u,Tu,Cu=_u[3].price.value+"",Pu,Ru,Lu=_u[3].price.unit&&V$5(_u);return{c(){$u=U$8("div"),Tu=U$8("span"),Pu=_t$1(Cu),Ru=Xt(),Lu&&Lu.c(),te$1(Tu,"class","value svelte-sezqcq"),te$1($u,"class","price svelte-sezqcq")},m(Bu,Vu){Nt(Bu,$u,Vu),dt$1($u,Tu),dt$1(Tu,Pu),dt$1($u,Ru),Lu&&Lu.m($u,null)},p(Bu,Vu){Vu&8&&Cu!==(Cu=Bu[3].price.value+"")&&ee$2(Pu,Cu),Bu[3].price.unit?Lu?Lu.p(Bu,Vu):(Lu=V$5(Bu),Lu.c(),Lu.m($u,null)):Lu&&(Lu.d(1),Lu=null)},d(Bu){Bu&&I$g($u),Lu&&Lu.d()}}}function V$5(_u){let $u,Tu=_u[3].price.unit+"",Cu;return{c(){$u=U$8("span"),Cu=_t$1(Tu),te$1($u,"class","unit svelte-sezqcq")},m(Pu,Ru){Nt(Pu,$u,Ru),dt$1($u,Cu)},p(Pu,Ru){Ru&8&&Tu!==(Tu=Pu[3].price.unit+"")&&ee$2(Cu,Tu)},d(Pu){Pu&&I$g($u)}}}function x$2(_u){let $u,Tu,Cu,Pu,Ru=_u[3].highlightText+"",Lu,Bu,Vu;return{c(){$u=U$8("div"),Tu=U$8("div"),Cu=Xt(),Pu=U$8("span"),Lu=_t$1(Ru),Bu=Xt(),Vu=U$8("div"),Vu.innerHTML='<svg class="arrow svelte-sezqcq" viewBox="0 0 6 9"><g transform="translate(-3, -2)" fill-rule="nonzero" class="svelte-sezqcq"><path d="M4.43868724,2.12056563 C4.28121824,1.95989074 4.02582143,1.95979988 3.86824251,2.1203627 C3.72498894,2.26632889 3.71189225,2.49481723 3.82900374,2.65587166 L6.57092402,5.92894326 C6.72651763,6.11470411 6.72651763,6.38529589 6.57092402,6.57105674 L3.86804348,9.79798499 C3.72488984,9.94405307 3.71194952,10.1725507 3.8291712,10.3335217 L3.86824251,10.3796373 C4.01149607,10.5256035 4.23559087,10.5387981 4.39346025,10.4192733 L4.43868724,10.3794344 L8.1144599,6.5985342 C8.30312347,6.40447482 8.30312347,6.09552518 8.1144599,5.9014658 L4.43868724,2.12056563 Z" class="svelte-sezqcq"></path></g></svg>',te$1(Tu,"class","gap svelte-sezqcq"),te$1(Pu,"class","text svelte-sezqcq"),te$1($u,"class","goto-button goto-icon svelte-sezqcq"),te$1(Vu,"class","arrow-wrapper svelte-sezqcq")},m(Ou,Du){Nt(Ou,$u,Du),dt$1($u,Tu),dt$1($u,Cu),dt$1($u,Pu),dt$1(Pu,Lu),Nt(Ou,Bu,Du),Nt(Ou,Vu,Du)},p(Ou,Du){Du&8&&Ru!==(Ru=Ou[3].highlightText+"")&&ee$2(Lu,Ru)},d(Ou){Ou&&I$g($u),Ou&&I$g(Bu),Ou&&I$g(Vu)}}}function ve(_u){var $u,Tu;let Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu=_u[3].title+"",Gu,zu,Hu,Uu,ju;Pu=new Q$9({props:{visible:_u[4],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let Wu=_u[3].headerPictureUrl&&O$6(_u),Qu=(($u=_u[2].length)!=null?$u:0)+((Tu=_u[5].length)!=null?Tu:0)>0&&Z$1(_u),qu=(_u[7]||_u[3].highlightText)&&K$5(_u);return{c(){Cu=U$8("div"),Ae(Pu.$$.fragment),Ru=Xt(),Lu=U$8("div"),Bu=Xt(),Vu=U$8("div"),Wu&&Wu.c(),Ou=Xt(),Du=U$8("div"),ku=U$8("div"),Fu=U$8("div"),Gu=_t$1(Nu),zu=Xt(),Qu&&Qu.c(),Hu=Xt(),qu&&qu.c(),te$1(Lu,"class","line svelte-sezqcq"),ne(Lu,"transition-delay",_u[4]?B$3+"ms":G$2+ee-$-40+"ms"),te$1(Fu,"class","text svelte-sezqcq"),te$1(ku,"class","title svelte-sezqcq"),te$1(Du,"class","title-wrapper svelte-sezqcq"),te$1(Vu,"class","content svelte-sezqcq"),ne(Vu,"max-width",e$4(_u[9])),ne(Vu,"transition-delay",_u[4]?B$3+G$2+"ms":"0ms"),te$1(Cu,"class",Uu=Gt(`marketing ${_u[6]}`)+" svelte-sezqcq"),re$2(Cu,"unfolded",_u[4]),re$2(Cu,"folded",_u[8])},m(Yu,Ju){Nt(Yu,Cu,Ju),Dt(Pu,Cu,null),dt$1(Cu,Ru),dt$1(Cu,Lu),dt$1(Cu,Bu),dt$1(Cu,Vu),Wu&&Wu.m(Vu,null),dt$1(Vu,Ou),dt$1(Vu,Du),dt$1(Du,ku),dt$1(ku,Fu),dt$1(Fu,Gu),dt$1(Vu,zu),Qu&&Qu.m(Vu,null),dt$1(Vu,Hu),qu&&qu.m(Vu,null),ju=!0},p(Yu,[Ju]){var _d,tp;const Ku={};Ju&16&&(Ku.visible=Yu[4]),Pu.$set(Ku),Ju&16&&ne(Lu,"transition-delay",Yu[4]?B$3+"ms":G$2+ee-$-40+"ms"),Yu[3].headerPictureUrl?Wu?Wu.p(Yu,Ju):(Wu=O$6(Yu),Wu.c(),Wu.m(Vu,Ou)):Wu&&(Wu.d(1),Wu=null),(!ju||Ju&8)&&Nu!==(Nu=Yu[3].title+"")&&ee$2(Gu,Nu),((_d=Yu[2].length)!=null?_d:0)+((tp=Yu[5].length)!=null?tp:0)>0?Qu?Qu.p(Yu,Ju):(Qu=Z$1(Yu),Qu.c(),Qu.m(Vu,Hu)):Qu&&(Qu.d(1),Qu=null),Yu[7]||Yu[3].highlightText?qu?qu.p(Yu,Ju):(qu=K$5(Yu),qu.c(),qu.m(Vu,null)):qu&&(qu.d(1),qu=null),Ju&16&&ne(Vu,"transition-delay",Yu[4]?B$3+G$2+"ms":"0ms"),(!ju||Ju&64&&Uu!==(Uu=Gt(`marketing ${Yu[6]}`)+" svelte-sezqcq"))&&te$1(Cu,"class",Uu),(!ju||Ju&80)&&re$2(Cu,"unfolded",Yu[4]),(!ju||Ju&320)&&re$2(Cu,"folded",Yu[8])},i(Yu){ju||(tt$3(Pu.$$.fragment,Yu),ju=!0)},o(Yu){$t(Pu.$$.fragment,Yu),ju=!1},d(Yu){Yu&&I$g(Cu),Rt(Pu),Wu&&Wu.d(),Qu&&Qu.d(),qu&&qu.d()}}}const H$1=40,B$3=400,$=500,G$2=180,ee=500;function he$1(_u,$u,Tu){let Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,{tag:ku}=$u,Fu,Nu=(()=>{var zu;const Hu=(zu=ku.data.limitWidth)!=null?zu:!0;if(typeof Hu=="number")return Hu;if(Hu===!0)return 172})();function Gu(){Fu=this.offsetHeight,Tu(1,Fu)}return _u.$$set=zu=>{"tag"in zu&&Tu(0,ku=zu.tag)},_u.$$.update=()=>{var zu,Hu,Uu,ju,Wu,Qu;_u.$$.dirty&1&&Tu(4,Cu=(Hu=(zu=ku.state)==null?void 0:zu.unfolded)!=null?Hu:!1),_u.$$.dirty&16&&Tu(8,Pu=!Cu),_u.$$.dirty&1&&Tu(3,Ru=ku.data),_u.$$.dirty&8&&Tu(7,Lu=i$7((Uu=Ru.price)==null?void 0:Uu.value)&&((ju=Ru.price)==null?void 0:ju.value)!==""),_u.$$.dirty&1&&Tu(6,Bu=ku.data.theme||"light"),_u.$$.dirty&1026&&Fu>40&&Tu(10,Vu=Vu-1),_u.$$.dirty&1032&&Tu(2,Ou=((Wu=Ru.brandTags)==null?void 0:Wu.slice(0,Vu).filter(Boolean))||[]),_u.$$.dirty&1036&&Tu(5,Du=((Qu=Ru.tags)==null?void 0:Qu.slice(0,Vu-Ou.length).filter(Boolean))||[])},Tu(10,Vu=(Nu-20)/H$1),[ku,Fu,Ou,Ru,Cu,Du,Bu,Lu,Pu,Nu,Vu,Gu]}class je extends Te{constructor($u){super(),Me(this,$u,he$1,ve,Ft,{tag:0},pe$1)}}const e$1=_u=>_u;var y$3=Object.defineProperty,L$4=(_u,$u,Tu)=>$u in _u?y$3(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,c$4=(_u,$u,Tu)=>(L$4(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),m$1=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});class T$3 extends Audio{constructor($u){super(),c$4(this,"sharedAudioSrc"),c$4(this,"sharedAudioPaused",!0),c$4(this,"sharedAudioCurrentTime",0),c$4(this,"tryplaying",!1),c$4(this,"audioInstance"),c$4(this,"eventListenerDisposer"),this.sharedAudioSrc=$u}get paused(){var $u;return($u=this.sharedAudioPaused)!=null?$u:!0}get currentTime(){return this.sharedAudioCurrentTime}play(){return m$1(this,null,function*(){var $u,Tu,Cu;if(this.tryplaying)return;this.tryplaying=!0,(!this.audioInstance||(($u=this.audioInstance)==null?void 0:$u.realSrc)!==this.sharedAudioSrc)&&(this.audioInstance=L$9(this.sharedAudioSrc,{namespace:d$c.PlayAudio})),(Tu=this.eventListenerDisposer)==null||Tu.call(this),this.eventListenerDisposer=this.addEventListeners(),this.audioInstance.currentTime=(Cu=this.currentTime)!=null?Cu:0;const Pu=this.audioInstance.currentTime!==this.currentTime;this.audioInstance.play().then(()=>{var Ru;this.audioInstance.muted=!1,Pu&&(this.audioInstance.currentTime=(Ru=this.currentTime)!=null?Ru:0),this.sharedAudioPaused=!1}).catch(Ru=>{var Lu;Ru.message==="The operation is not supported."?console.error("Error: \u97F3\u9891\u6587\u4EF6\u53EF\u80FD\u635F\u574F\u6216\u4FEE\u6539\u8FC7\u6587\u4EF6\u540E\u7F00",Ru):console.error("Error: error playing media in Safari",Ru),this.endedHandler(),(Lu=this.onerror)==null||Lu.call(this,Ru)}).finally(()=>{this.tryplaying=!1})})}pause($u){var Tu;if(this.audioInstance&&!this.paused){if(this.sharedAudioPaused=!0,(Tu=this.eventListenerDisposer)==null||Tu.call(this),this.audioInstance.ended){this.endedHandler();return}this.audioInstance.paused||this.audioInstance.pause(),this.onpause($u!=null?$u:new Event("pause")),this.clear()}}dispose(){var $u;($u=this.eventListenerDisposer)==null||$u.call(this),this.clear(),this.audioInstance=void 0}clear(){var $u;($u=this.audioInstance)==null||$u.clear()}endedHandler($u){var Tu,Cu;(Tu=this.onended)==null||Tu.call(this,$u!=null?$u:new Event("ended")),(Cu=this.eventListenerDisposer)==null||Cu.call(this),this.sharedAudioPaused=!0,this.sharedAudioCurrentTime=0,this.clear()}addEventListeners(){const $u=this.audioInstance;if(!$u)return;const Tu=ku=>{var Fu;this.sharedAudioCurrentTime=$u.currentTime,(Fu=this.ontimeupdate)==null||Fu.call(this,ku)},Cu=ku=>{var Fu;$u.isBlankAudio||(this.sharedAudioPaused=!1,(Fu=this.onplay)==null||Fu.call(this,ku))},Pu=ku=>{this.pause(ku)},Ru=ku=>{this.endedHandler(ku)},Lu=ku=>{var Fu;this.sharedAudioPaused=!0,(Fu=this.onerror)==null||Fu.call(this,ku)},Bu=ku=>{var Fu;return(Fu=this.oncanplay)==null?void 0:Fu.call(this,ku)},Vu=ku=>{var Fu;return(Fu=this.oncanplaythrough)==null?void 0:Fu.call(this,ku)},Ou=ku=>{var Fu;return(Fu=this.onloadeddata)==null?void 0:Fu.call(this,ku)},Du=ku=>{var Fu;return(Fu=this.onloadedmetadata)==null?void 0:Fu.call(this,ku)};return $u.addEventListener("timeupdate",Tu),$u.addEventListener("play",Cu),$u.addEventListener("pause",Pu),$u.addEventListener("ended",Ru),$u.addEventListener("error",Lu),$u.addEventListener("canplay",Bu),$u.addEventListener("canplaythrough",Vu),$u.addEventListener("loadeddata",Ou),$u.addEventListener("loadedmetadata",Du),()=>{$u.removeEventListener("timeupdate",Tu),$u.removeEventListener("play",Cu),$u.removeEventListener("pause",Pu),$u.removeEventListener("ended",Ru),$u.removeEventListener("error",Lu),$u.removeEventListener("canplay",Bu),$u.removeEventListener("canplaythrough",Vu),$u.removeEventListener("loadeddata",Ou),$u.removeEventListener("loadedmetadata",Du)}}}var S$3=Object.defineProperty,_$1=Object.getOwnPropertySymbols,C$8=Object.prototype.hasOwnProperty,A$5=Object.prototype.propertyIsEnumerable,g$5=(_u,$u,Tu)=>$u in _u?S$3(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,d$4=(_u,$u)=>{for(var Tu in $u||($u={}))C$8.call($u,Tu)&&g$5(_u,Tu,$u[Tu]);if(_$1)for(var Tu of _$1($u))A$5.call($u,Tu)&&g$5(_u,Tu,$u[Tu]);return _u};function K$4(_u){Qt(_u,"svelte-13e7hxv",".audio.svelte-13e7hxv{pointer-events:auto;cursor:pointer;width:100%;height:100%}")}function O$5(_u){let $u,Tu,Cu,Pu;const Ru=_u[8].default,Lu=Bt(Ru,_u,_u[7],null);return{c(){$u=U$8("div"),Lu&&Lu.c(),te$1($u,"class","audio svelte-13e7hxv"),te$1($u,"style",_u[0])},m(Bu,Vu){Nt(Bu,$u,Vu),Lu&&Lu.m($u,null),Tu=!0,Cu||(Pu=st$2($u,"click",Zt(_u[1])),Cu=!0)},p(Bu,[Vu]){Lu&&Lu.p&&(!Tu||Vu&128)&&It(Lu,Ru,Bu,Bu[7],Tu?Ht(Ru,Bu[7],Vu,null):Ut(Bu[7]),null),(!Tu||Vu&1)&&te$1($u,"style",Bu[0])},i(Bu){Tu||(tt$3(Lu,Bu),Tu=!0)},o(Bu){$t(Lu,Bu),Tu=!1},d(Bu){Bu&&I$g($u),Lu&&Lu.d(Bu),Cu=!1,Pu()}}}function Q$3(_u,$u,Tu){let{$$slots:Cu={},$$scope:Pu}=$u,{url:Ru}=$u,{enable:Lu=!0}=$u,{style:Bu=""}=$u,{hooksInfo:Vu}=$u;const Ou=fe$2(),Du=de$3("hooks"),ku=de$3("mediaStore");let Fu,Nu=!0;function Gu(){Tu(5,Fu.onplay=Hu=>{Du.emit("playStateChange",d$4({event:Hu,state:"playing",mediaInstance:Fu},Vu)),Ou("play"),Tu(6,Nu=!1)},Fu),Tu(5,Fu.onpause=Hu=>{Du.emit("playStateChange",d$4({event:Hu,state:"paused",mediaInstance:Fu},Vu)),Ou("pause"),Tu(6,Nu=!0)},Fu),Tu(5,Fu.onended=Hu=>{Du.emit("playStateChange",d$4({event:Hu,state:"paused",mediaInstance:Fu},Vu)),Ou("pause"),Tu(6,Nu=!0)},Fu),Tu(5,Fu.onloadedmetadata=Hu=>{typeof Fu.duration=="number"&&!Number.isNaN(Fu.duration)&&Ou("duration",Fu.duration)},Fu),Tu(5,Fu.onerror=Hu=>{Ou("pause"),Tu(6,Nu=!0)},Fu),Tu(5,Fu.ontimeupdate=Hu=>{Ou("timeupdate",Fu.currentTime)},Fu)}ku.subscribe(({currentMediaElement:Hu})=>{Hu!==Fu&&(Nu||Fu==null||Fu.pause())});function zu(Hu){Fu&&(Du.emit("click",d$4({event:Hu,target:"AudioTagPlayIcon",audioInstance:Fu},Vu)),ku.set({currentMediaElement:Fu}),Du.emit("playStateChange",d$4({event:Hu,state:Fu.paused?"playing":"paused",mediaInstance:Fu},Vu)),Fu.paused?Fu.play():Fu.pause())}return _u.$$set=Hu=>{"url"in Hu&&Tu(2,Ru=Hu.url),"enable"in Hu&&Tu(3,Lu=Hu.enable),"style"in Hu&&Tu(0,Bu=Hu.style),"hooksInfo"in Hu&&Tu(4,Vu=Hu.hooksInfo),"$$scope"in Hu&&Tu(7,Pu=Hu.$$scope)},_u.$$.update=()=>{_u.$$.dirty&4&&(Ru||Ou("duration",0)),_u.$$.dirty&36&&(Fu==null||Fu.dispose(),Tu(5,Fu=new T$3(Ru)),Ou("audioRef",Fu),setTimeout(()=>Ou("audioRef",Fu),200),Gu()),_u.$$.dirty&40&&(Lu||Fu==null||Fu.pause()),_u.$$.dirty&72&&Ou(Lu&&!Nu?"play":"pause")},[Bu,zu,Ru,Lu,Vu,Fu,Nu,Pu,Cu]}class Y$1 extends Te{constructor($u){super(),Me(this,$u,Q$3,O$5,Ft,{url:2,enable:3,style:0,hooksInfo:4},K$4)}}function z$3(_u){Qt(_u,"svelte-srt2pi",".audio-icon__wrapper.svelte-srt2pi.svelte-srt2pi{display:inline-block}.audio-icon.svelte-srt2pi.svelte-srt2pi{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:100%;border-radius:50%;background-color:rgba(255, 255, 255, 0.8)}.audio-icon.svelte-srt2pi .sound-wave__container.svelte-srt2pi{position:absolute;pointer-events:none;width:60%;height:60%}.sound-wave.svelte-srt2pi.svelte-srt2pi{animation-duration:2s;animation-iteration-count:infinite;animation-play-state:paused;transition:opacity 0}.playing.svelte-srt2pi .sound-wave.svelte-srt2pi{animation-play-state:running}.playing.svelte-srt2pi .sound-wave-1.svelte-srt2pi{animation-name:svelte-srt2pi-sound_wave_1_animation}.playing.svelte-srt2pi .sound-wave-2.svelte-srt2pi{animation-name:svelte-srt2pi-sound_wave_2_animation}.playing.svelte-srt2pi .sound-wave-3.svelte-srt2pi{animation-name:svelte-srt2pi-sound_wave_3_animation}@keyframes svelte-srt2pi-sound_wave_1_animation{0%,10%{opacity:0}25%,100%{opacity:1}}@keyframes svelte-srt2pi-sound_wave_2_animation{0%,35%{opacity:0}50%,100%{opacity:1}}@keyframes svelte-srt2pi-sound_wave_3_animation{0%,60%{opacity:0}75%,100%{opacity:1}}")}function y$2(_u){let $u,Tu;return $u=new Q$9({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function D$3(_u){let $u,Tu,Cu,Pu,Ru,Lu=_u[1]&&y$2();return{c(){$u=U$8("div"),Lu&&Lu.c(),Tu=Xt(),Cu=U$8("div"),Pu=U$8("div"),Pu.innerHTML='<svg width="100%" height="100%" viewBox="0 0 128 128"><g transform="rotate(-45 12 64) translate(12 64)" fill="black" stroke="black" fill-opacity="0.6" stroke-opacity="0.6"><path stroke="none" class="sound-wave sound-wave-1 svelte-srt2pi" d="M0,23 A23,23 0 0,0 23,0 L0,0"></path><path fill="none" stroke-width="15" class="sound-wave sound-wave-2 svelte-srt2pi" d="M0,46 A46,46 0 0,0 46,0"></path><path fill="none" stroke-width="15" class="sound-wave sound-wave-3 svelte-srt2pi" d="M0,80 A80,80 0 0,0 80,0"></path></g></svg>',te$1(Pu,"class","sound-wave__container svelte-srt2pi"),te$1(Cu,"class","audio-icon svelte-srt2pi"),re$2(Cu,"playing",_u[0]),te$1($u,"class","audio-icon__wrapper svelte-srt2pi"),te$1($u,"style",_u[2]),ne($u,"width",_u[5]),ne($u,"height",_u[5])},m(Bu,Vu){Nt(Bu,$u,Vu),Lu&&Lu.m($u,null),dt$1($u,Tu),dt$1($u,Cu),dt$1(Cu,Pu),_u[7](Pu),_u[8]($u),Ru=!0},p(Bu,[Vu]){Bu[1]?Lu?Vu&2&&tt$3(Lu,1):(Lu=y$2(),Lu.c(),tt$3(Lu,1),Lu.m($u,Tu)):Lu&&(Lt(),$t(Lu,1,1,()=>{Lu=null}),Ot$1()),(!Ru||Vu&1)&&re$2(Cu,"playing",Bu[0]),(!Ru||Vu&4)&&te$1($u,"style",Bu[2]);const Ou=Vu&4;(Ou||Vu&36)&&ne($u,"width",Bu[5]),(Ou||Vu&36)&&ne($u,"height",Bu[5])},i(Bu){Ru||(tt$3(Lu),Ru=!0)},o(Bu){$t(Lu),Ru=!1},d(Bu){Bu&&I$g($u),Lu&&Lu.d(),_u[7](null),_u[8](null)}}}function E$6(_u,$u,Tu){let Cu,{playing:Pu}=$u,{shadow:Ru=!1}=$u,{style:Lu=null}=$u,{width:Bu="100%"}=$u,Vu,Ou;function Du(Fu){rt$4[Fu?"unshift":"push"](()=>{Ou=Fu,Tu(4,Ou)})}function ku(Fu){rt$4[Fu?"unshift":"push"](()=>{Vu=Fu,Tu(3,Vu)})}return _u.$$set=Fu=>{"playing"in Fu&&Tu(0,Pu=Fu.playing),"shadow"in Fu&&Tu(1,Ru=Fu.shadow),"style"in Fu&&Tu(2,Lu=Fu.style),"width"in Fu&&Tu(6,Bu=Fu.width)},_u.$$.update=()=>{_u.$$.dirty&64&&Tu(5,Cu=typeof Bu=="number"?e$4(Bu):Bu)},[Pu,Ru,Lu,Vu,Ou,Cu,Bu,Du,ku]}class O$4 extends Te{constructor($u){super(),Me(this,$u,E$6,D$3,Ft,{playing:0,shadow:1,style:2,width:6},z$3)}}function se(_u){Qt(_u,"svelte-1s6gk4a",".audio-tag.svelte-1s6gk4a{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.audio-icon__wrapper.svelte-1s6gk4a{position:relative;vertical-align:top;width:100%;height:100%}.content.svelte-1s6gk4a{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-1s6gk4a{position:relative;width:100%;height:100%}.audio-icon.svelte-1s6gk4a{pointer-events:none;vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.audio.svelte-1s6gk4a{position:relative;width:100%;height:100%}")}function j$1(_u){var $u,Tu;let Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu,Nu,Gu,zu,Hu;Pu=new Q$9({props:{visible:_u[6],left:_u[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}});let Uu=_u[6]&&B$2(_u);return ku=new ie$2({props:{visible:_u[6],textUnfolded:_u[1],content:_u[5]}}),Nu=new Y$7({props:{unfolded:_u[6],length:_u[3],outDelay:_u[4]+20*Math.min((Tu=($u=_u[5])==null?void 0:$u.length)!=null?Tu:10,15),useLinearColor:!0}}),{c(){Cu=U$8("div"),Ae(Pu.$$.fragment),Ru=Xt(),Lu=U$8("div"),Bu=U$8("div"),Vu=U$8("div"),Uu&&Uu.c(),Ou=Xt(),Du=U$8("div"),Ae(ku.$$.fragment),Fu=Xt(),Ae(Nu.$$.fragment),te$1(Vu,"class","audio-icon svelte-1s6gk4a"),ne(Du,"display","inline-block"),te$1(Bu,"class","wrapper svelte-1s6gk4a"),te$1(Lu,"class","content svelte-1s6gk4a"),te$1(Cu,"class","audio-tag svelte-1s6gk4a"),re$2(Cu,"unfolded",_u[6])},m(ju,Wu){Nt(ju,Cu,Wu),Dt(Pu,Cu,null),dt$1(Cu,Ru),dt$1(Cu,Lu),dt$1(Lu,Bu),dt$1(Bu,Vu),Uu&&Uu.m(Vu,null),dt$1(Bu,Ou),dt$1(Bu,Du),Dt(ku,Du,null),dt$1(Cu,Fu),Dt(Nu,Cu,null),Gu=!0,zu||(Hu=[st$2(Du,"click",_u[7]),Jt(E$c.call(null,Du)),st$2(Du,"clientWidth",_u[12])],zu=!0)},p(ju,Wu){var Qu,qu;const Yu={};Wu&64&&(Yu.visible=ju[6]),Wu&8&&(Yu.left=ju[3]/2+"px"),Pu.$set(Yu),ju[6]?Uu?(Uu.p(ju,Wu),Wu&64&&tt$3(Uu,1)):(Uu=B$2(ju),Uu.c(),tt$3(Uu,1),Uu.m(Vu,null)):Uu&&(Lt(),$t(Uu,1,1,()=>{Uu=null}),Ot$1());const Ju={};Wu&64&&(Ju.visible=ju[6]),Wu&2&&(Ju.textUnfolded=ju[1]),Wu&32&&(Ju.content=ju[5]),ku.$set(Ju);const _d={};Wu&64&&(_d.unfolded=ju[6]),Wu&8&&(_d.length=ju[3]),Wu&48&&(_d.outDelay=ju[4]+20*Math.min((qu=(Qu=ju[5])==null?void 0:Qu.length)!=null?qu:10,15)),Nu.$set(_d),(!Gu||Wu&64)&&re$2(Cu,"unfolded",ju[6])},i(ju){Gu||(tt$3(Pu.$$.fragment,ju),tt$3(Uu),tt$3(ku.$$.fragment,ju),tt$3(Nu.$$.fragment,ju),Gu=!0)},o(ju){$t(Pu.$$.fragment,ju),$t(Uu),$t(ku.$$.fragment,ju),$t(Nu.$$.fragment,ju),Gu=!1},d(ju){ju&&I$g(Cu),Rt(Pu),Uu&&Uu.d(),Rt(ku),Rt(Nu),zu=!1,v$b(Hu)}}}function B$2(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu;return Tu=new Q$9({props:{center:!0,blurRadius:15,spreadRadius:6}}),Pu=new Y$1({props:{enable:_u[6],url:_u[0].data.audioUrl,hooksInfo:{tag:_u[0]},$$slots:{default:[fe]},$$scope:{ctx:_u}}}),Pu.$on("play",_u[8]),Pu.$on("pause",_u[9]),Pu.$on("error",_u[10]),Pu.$on("audioRef",_u[11]),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),Cu=Xt(),Ae(Pu.$$.fragment),te$1($u,"class","audio svelte-1s6gk4a")},m(Vu,Ou){Nt(Vu,$u,Ou),Dt(Tu,$u,null),dt$1($u,Cu),Dt(Pu,$u,null),Bu=!0},p(Vu,Ou){_u=Vu;const Du={};Ou&64&&(Du.enable=_u[6]),Ou&1&&(Du.url=_u[0].data.audioUrl),Ou&1&&(Du.hooksInfo={tag:_u[0]}),Ou&8196&&(Du.$$scope={dirty:Ou,ctx:_u}),Pu.$set(Du)},i(Vu){Bu||(tt$3(Tu.$$.fragment,Vu),tt$3(Pu.$$.fragment,Vu),Vu&&L$d(()=>{Bu&&(Lu&&Lu.end(1),Ru=me$2($u,C$e,{duration:1e3,delay:0,easing:c$g}),Ru.start())}),Bu=!0)},o(Vu){var Ou,Du;$t(Tu.$$.fragment,Vu),$t(Pu.$$.fragment,Vu),Ru&&Ru.invalidate(),Vu&&(Lu=ye$2($u,C$e,{duration:1e3,delay:20*Math.min((Du=(Ou=_u[5])==null?void 0:Ou.length)!=null?Du:10,15),easing:c$g})),Bu=!1},d(Vu){Vu&&I$g($u),Rt(Tu),Rt(Pu),Vu&&Lu&&Lu.end()}}}function fe(_u){let $u,Tu,Cu;return Tu=new O$4({props:{playing:_u[2]}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class","audio-icon__wrapper svelte-1s6gk4a")},m(Pu,Ru){Nt(Pu,$u,Ru),Dt(Tu,$u,null),Cu=!0},p(Pu,Ru){const Lu={};Ru&4&&(Lu.playing=Pu[2]),Tu.$set(Lu)},i(Pu){Cu||(tt$3(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){$t(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&I$g($u),Rt(Tu)}}}function ue(_u){let $u,Tu,Cu=_u[0].state&&j$1(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[0].state?Cu?(Cu.p(Pu,Ru),Ru&1&&tt$3(Cu,1)):(Cu=j$1(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function de$1(_u,$u,Tu){let Cu,Pu,Ru,{tag:Lu}=$u,Bu=!1,Vu=!1,Ou;function Du(){Tu(1,Bu=!Bu)}const ku=()=>{Tu(2,Vu=!0)},Fu=()=>{Tu(2,Vu=!1)},Nu=()=>{Tu(2,Vu=!1)};function Gu(Hu){he$3.call(this,_u,Hu)}const zu=Hu=>{Tu(3,Ou=Hu.detail)};return _u.$$set=Hu=>{"tag"in Hu&&Tu(0,Lu=Hu.tag)},_u.$$.update=()=>{var Hu,Uu,ju;_u.$$.dirty&1&&Tu(6,Cu=!!((Hu=Lu.state)!=null&&Hu.unfolded)),_u.$$.dirty&1&&Tu(5,Pu=(ju=(Uu=Lu.data.title)!=null?Uu:Lu.data.text)!=null?ju:""),_u.$$.dirty&2&&Tu(4,Ru=Bu?450:0)},[Lu,Bu,Vu,Ou,Ru,Pu,Cu,Du,ku,Fu,Nu,Gu,zu]}class Oe extends Te{constructor($u){super(),Me(this,$u,de$1,ue,Ft,{tag:0},se)}}function K$3(_u){Qt(_u,"svelte-58hfjf",".audio-tag__wrapper.svelte-58hfjf{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.audio-tag.svelte-58hfjf{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.1875rem;padding-right:0.625rem;border-radius:624999.9375rem;border:0.03125rem solid rgba(255, 255, 255, 0.2)}.audio__inner.svelte-58hfjf{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.text.svelte-58hfjf{font-weight:bold;font-size:0.75rem;margin-left:0.25rem}.audio-icon__wrapper.svelte-58hfjf{position:relative;vertical-align:top;pointer-events:none;width:1.375rem;height:1.375rem}")}function z$2(_u){let $u,Tu,Cu,Pu;return Cu=new Y$1({props:{style:"width: max-content; height: max-content;",enable:_u[0].state.visible,url:_u[0].data.audioUrl,hooksInfo:{tag:_u[0]},$$slots:{default:[O$3]},$$scope:{ctx:_u}}}),Cu.$on("play",_u[6]),Cu.$on("pause",_u[7]),Cu.$on("error",_u[8]),Cu.$on("timeupdate",_u[9]),Cu.$on("duration",_u[10]),Cu.$on("audioRef",_u[11]),{c(){$u=U$8("div"),Tu=U$8("div"),Ae(Cu.$$.fragment),te$1(Tu,"class","audio-tag svelte-58hfjf"),ne(Tu,"background-color",_u[4].bgColor),ne(Tu,"color",_u[4].fontColor),te$1($u,"class","audio-tag__wrapper svelte-58hfjf")},m(Ru,Lu){Nt(Ru,$u,Lu),dt$1($u,Tu),Dt(Cu,Tu,null),Pu=!0},p(Ru,Lu){const Bu={};Lu&1&&(Bu.enable=Ru[0].state.visible),Lu&1&&(Bu.url=Ru[0].data.audioUrl),Lu&1&&(Bu.hooksInfo={tag:Ru[0]}),Lu&8232&&(Bu.$$scope={dirty:Lu,ctx:Ru}),Cu.$set(Bu),Lu&16&&ne(Tu,"background-color",Ru[4].bgColor),Lu&16&&ne(Tu,"color",Ru[4].fontColor)},i(Ru){Pu||(tt$3(Cu.$$.fragment,Ru),Pu=!0)},o(Ru){$t(Cu.$$.fragment,Ru),Pu=!1},d(Ru){Ru&&I$g($u),Rt(Cu)}}}function L$3(_u){let $u;return{c(){$u=_t$1(_u[5])},m(Tu,Cu){Nt(Tu,$u,Cu)},p(Tu,Cu){Cu&32&&ee$2($u,Tu[5])},d(Tu){Tu&&I$g($u)}}}function O$3(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu;return Cu=new O$4({props:{playing:_u[3]}}),Lu=new P$5({props:{maxWidth:72,$$slots:{default:[L$3]},$$scope:{ctx:_u}}}),{c(){$u=U$8("div"),Tu=U$8("div"),Ae(Cu.$$.fragment),Pu=Xt(),Ru=U$8("div"),Ae(Lu.$$.fragment),te$1(Tu,"class","audio-icon__wrapper svelte-58hfjf"),te$1(Ru,"class","text svelte-58hfjf"),te$1($u,"class","audio__inner svelte-58hfjf")},m(Vu,Ou){Nt(Vu,$u,Ou),dt$1($u,Tu),Dt(Cu,Tu,null),dt$1($u,Pu),dt$1($u,Ru),Dt(Lu,Ru,null),Bu=!0},p(Vu,Ou){const Du={};Ou&8&&(Du.playing=Vu[3]),Cu.$set(Du);const ku={};Ou&8224&&(ku.$$scope={dirty:Ou,ctx:Vu}),Lu.$set(ku)},i(Vu){Bu||(tt$3(Cu.$$.fragment,Vu),tt$3(Lu.$$.fragment,Vu),Bu=!0)},o(Vu){$t(Cu.$$.fragment,Vu),$t(Lu.$$.fragment,Vu),Bu=!1},d(Vu){Vu&&I$g($u),Rt(Cu),Rt(Lu)}}}function Q$2(_u){let $u,Tu,Cu=_u[0].state&&z$2(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[0].state?Cu?(Cu.p(Pu,Ru),Ru&1&&tt$3(Cu,1)):(Cu=z$2(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function V$4(_u,$u,Tu){let Cu,Pu,{tag:Ru}=$u;const Lu={light:{bgColor:"rgba(255, 255, 255, 0.3)",fontColor:"rgba(0, 0, 0, 0.6)"},dark:{bgColor:"rgba(0, 0, 0, 0.3)",fontColor:"white"}};let Bu=0,Vu=0,Ou=!1;const Du=()=>{Tu(3,Ou=!0)},ku=()=>{Tu(3,Ou=!1)},Fu=()=>{Tu(3,Ou=!1)},Nu=Hu=>{Tu(1,Bu=Hu.detail)},Gu=Hu=>{Tu(2,Vu=Hu.detail)};function zu(Hu){he$3.call(this,_u,Hu)}return _u.$$set=Hu=>{"tag"in Hu&&Tu(0,Ru=Hu.tag)},_u.$$.update=()=>{var Hu,Uu,ju;_u.$$.dirty&1&&Tu(5,Cu=(Uu=(Hu=Ru.data.title)!=null?Hu:Ru.data.text)!=null?Uu:""),_u.$$.dirty&1&&Tu(4,Pu=(ju=Lu[Ru.data.theme||"light"])!=null?ju:Lu.light)},[Ru,Bu,Vu,Ou,Pu,Cu,Du,ku,Fu,Nu,Gu,zu]}class ie extends Te{constructor($u){super(),Me(this,$u,V$4,Q$2,Ft,{tag:0},K$3)}}function q$2(_u){let $u,Tu;return $u=new ie({props:{tag:_u[0]}}),$u.$on("audioRef",_u[2]),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&1&&(Ru.tag=Cu[0]),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function v$3(_u){let $u,Tu;return $u=new Oe({props:{tag:_u[0]}}),$u.$on("audioRef",_u[2]),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&1&&(Ru.tag=Cu[0]),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function C$7(_u){let $u,Tu,Cu,Pu;const Ru=[v$3,q$2],Lu=[];function Bu(Vu,Ou){return Vu[1]==="line"?0:Vu[1]==="plane"?1:-1}return~($u=Bu(_u))&&(Tu=Lu[$u]=Ru[$u](_u)),{c(){Tu&&Tu.c(),Cu=Yt()},m(Vu,Ou){~$u&&Lu[$u].m(Vu,Ou),Nt(Vu,Cu,Ou),Pu=!0},p(Vu,[Ou]){let Du=$u;$u=Bu(Vu),$u===Du?~$u&&Lu[$u].p(Vu,Ou):(Tu&&(Lt(),$t(Lu[Du],1,1,()=>{Lu[Du]=null}),Ot$1()),~$u?(Tu=Lu[$u],Tu?Tu.p(Vu,Ou):(Tu=Lu[$u]=Ru[$u](Vu),Tu.c()),tt$3(Tu,1),Tu.m(Cu.parentNode,Cu)):Tu=null)},i(Vu){Pu||(tt$3(Tu),Pu=!0)},o(Vu){$t(Tu),Pu=!1},d(Vu){~$u&&Lu[$u].d(Vu),Vu&&I$g(Cu)}}}function N$1(_u,$u,Tu){let Cu,{tag:Pu}=$u,Ru;function Lu(Bu){Ru=Bu.detail}return Pu.play=()=>Ru.play(),Pu.pause=()=>Ru.pause(),_u.$$set=Bu=>{"tag"in Bu&&Tu(0,Pu=Bu.tag)},_u.$$.update=()=>{var Bu;_u.$$.dirty&1&&Tu(1,Cu=(Bu=Pu.data.appearance)!=null?Bu:"line")},[Pu,Cu,Lu]}class ot$1 extends Te{constructor($u){super(),Me(this,$u,N$1,C$7,Ft,{tag:0})}}function M$5(_u){Qt(_u,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function c$3(_u){var $u;let Tu,Cu,Pu;return Cu=new ot$2({props:{mediaItemConfig:{canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:($u=_u[4])!=null?$u:"withText",disableVideoIfHavePoster:!1,objectFit:_u[2]},unfolded:_u[6],mediaData:_u[5],enableCarousel:_u[1],autoplayConfig:_u[3],tag:_u[0],inDelay:500,duration:500}}),{c(){Tu=U$8("div"),Ae(Cu.$$.fragment),te$1(Tu,"class","media-wrapper svelte-10cw0el")},m(Ru,Lu){Nt(Ru,Tu,Lu),Dt(Cu,Tu,null),Pu=!0},p(Ru,Lu){var Bu;const Vu={};Lu&20&&(Vu.mediaItemConfig={canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(Bu=Ru[4])!=null?Bu:"withText",disableVideoIfHavePoster:!1,objectFit:Ru[2]}),Lu&64&&(Vu.unfolded=Ru[6]),Lu&32&&(Vu.mediaData=Ru[5]),Lu&2&&(Vu.enableCarousel=Ru[1]),Lu&8&&(Vu.autoplayConfig=Ru[3]),Lu&1&&(Vu.tag=Ru[0]),Cu.$set(Vu)},i(Ru){Pu||(tt$3(Cu.$$.fragment,Ru),Pu=!0)},o(Ru){$t(Cu.$$.fragment,Ru),Pu=!1},d(Ru){Ru&&I$g(Tu),Rt(Cu)}}}function S$2(_u){let $u,Tu,Cu=_u[0].state&&_u[5]&&c$3(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[0].state&&Pu[5]?Cu?(Cu.p(Pu,Ru),Ru&33&&tt$3(Cu,1)):(Cu=c$3(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function V$3(_u,$u,Tu){let Cu,Pu,Ru,Lu,Bu,Vu,{tag:Ou}=$u;return _u.$$set=Du=>{"tag"in Du&&Tu(0,Ou=Du.tag)},_u.$$.update=()=>{var Du,ku;_u.$$.dirty&1&&Tu(6,Cu=Ou.state?Ou.state.unfolded:!1),_u.$$.dirty&1&&Tu(5,Pu=Ou.data.mediaData),_u.$$.dirty&1&&Tu(1,Ru=Ou.data.enableCarousel),_u.$$.dirty&1&&Tu(4,Lu=Ou.data.playIcon),_u.$$.dirty&3&&Tu(3,Bu=(Du=Ou.data.autoplayConfig)!=null?Du:{autoplay:Ru!=null?Ru:!0,autoplayVideo:!0}),_u.$$.dirty&1&&Tu(2,Vu=(ku=Ou.data.objectFit)!=null?ku:(()=>Ou.data.adaptationMode==="stretch"?"fill":Ou.data.adaptationMode==="proportional"?"contain":void 0)())},[Ou,Ru,Vu,Bu,Lu,Pu,Cu]}class gt extends Te{constructor($u){super(),Me(this,$u,V$3,S$2,Ft,{tag:0},M$5)}}var I$4=Object.defineProperty,k$4=Object.defineProperties,p$2=Object.getOwnPropertyDescriptors,w$3=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,W$1=Object.prototype.propertyIsEnumerable,u$4=(_u,$u,Tu)=>$u in _u?I$4(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,f$4=(_u,$u)=>{for(var Tu in $u||($u={}))H.call($u,Tu)&&u$4(_u,Tu,$u[Tu]);if(w$3)for(var Tu of w$3($u))W$1.call($u,Tu)&&u$4(_u,Tu,$u[Tu]);return _u},d$3=(_u,$u)=>k$4(_u,p$2($u)),a$3=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});function y$1(_u){return a$3(this,null,function*(){return new Promise(($u,Tu)=>{if(!_u){Tu(Error("url is empty"));return}const Cu=new Image;Cu.src=_u,Cu.onload=()=>$u({width:Cu.width,height:Cu.height}),Cu.onerror=Tu})})}function K$2(_u){return a$3(this,null,function*(){const{url:$u,ratio:Tu=3}=_u;_u.ratio||console.warn("Tag icon ratio is not set, default is 3");const{width:Cu,height:Pu}=yield y$1($u);return d$3(f$4({},_u),{width:Cu/Tu,height:Pu/Tu})})}function R(_u){return a$3(this,null,function*(){const{steps:$u,url:Tu,ratio:Cu=3,fps:Pu=24}=_u;if(!$u)throw new Error("KeyframeIcon requires steps");const{width:Ru,height:Lu}=yield y$1(Tu),Bu=Ru/Cu,Vu=Lu/Cu,Ou=Bu/$u,Du=Vu,ku=1/Pu*$u+"s";return d$3(f$4({},_u),{width:Ou,height:Du,duration:ku})})}var Q$1=Object.defineProperty,V$2=Object.defineProperties,X=Object.getOwnPropertyDescriptors,D$2=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,E$5=(_u,$u,Tu)=>$u in _u?Q$1(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,C$6=(_u,$u)=>{for(var Tu in $u||($u={}))Y.call($u,Tu)&&E$5(_u,Tu,$u[Tu]);if(D$2)for(var Tu of D$2($u))Z.call($u,Tu)&&E$5(_u,Tu,$u[Tu]);return _u},L$2=(_u,$u)=>V$2(_u,X($u)),K$1=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});function de(_u){Qt(_u,"svelte-316sq3","@keyframes svelte-316sq3-sprites-animation{0%{background-position:0 0}100%{background-position:100% 0}}.icon-image.svelte-316sq3{display:block;width:auto}.icon-keyframe.svelte-316sq3{background-repeat:no-repeat;background-size:auto 100%;animation-direction:normal;animation-iteration-count:infinite;animation-name:svelte-316sq3-sprites-animation;animation-delay:0}")}function M$4(_u){_u[1]=_u[19].width}function T$2(_u){_u[1]=_u[19].width,_u[16]=_u[19].height,_u[17]=_u[19].steps,_u[18]=_u[19].duration}function U$2(_u){let $u,Tu,Cu,Pu=_u[0]&&A$4();function Ru(Vu,Ou){return Vu[8]?he:me}let Lu=Ru(_u),Bu=Lu(_u);return{c(){$u=U$8("div"),Pu&&Pu.c(),Tu=Xt(),Bu.c(),te$1($u,"class","icon"),ne($u,"width",_u[1])},m(Vu,Ou){Nt(Vu,$u,Ou),Pu&&Pu.m($u,null),dt$1($u,Tu),Bu.m($u,null),Cu=!0},p(Vu,Ou){Vu[0]?Pu?Ou&1&&tt$3(Pu,1):(Pu=A$4(),Pu.c(),tt$3(Pu,1),Pu.m($u,Tu)):Pu&&(Lt(),$t(Pu,1,1,()=>{Pu=null}),Ot$1()),Lu===(Lu=Ru(Vu))&&Bu?Bu.p(Vu,Ou):(Bu.d(1),Bu=Lu(Vu),Bu&&(Bu.c(),Bu.m($u,null))),Ou&2&&ne($u,"width",Vu[1])},i(Vu){Cu||(tt$3(Pu),Cu=!0)},o(Vu){$t(Pu),Cu=!1},d(Vu){Vu&&I$g($u),Pu&&Pu.d(),Bu.d()}}}function A$4(_u){let $u,Tu;return $u=new Q$9({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function me(_u){let $u,Tu,Cu={ctx:_u,current:null,token:null,hasCatch:!1,pending:ge,then:pe,catch:_e,value:19};return ge$3(Tu=_u[11](e$1({url:_u[7],ratio:_u[5]})),Cu),{c(){$u=Yt(),Cu.block.c()},m(Pu,Ru){Nt(Pu,$u,Ru),Cu.block.m(Pu,Cu.anchor=Ru),Cu.mount=()=>$u.parentNode,Cu.anchor=$u},p(Pu,Ru){_u=Pu,Cu.ctx=_u,Ru&160&&Tu!==(Tu=_u[11](e$1({url:_u[7],ratio:_u[5]})))&&ge$3(Tu,Cu)||we$1(Cu,_u,Ru)},d(Pu){Pu&&I$g($u),Cu.block.d(Pu),Cu.token=null,Cu=null}}}function he(_u){let $u,Tu,Cu={ctx:_u,current:null,token:null,hasCatch:!1,pending:be,then:we,catch:ke,value:19};return ge$3(Tu=_u[10](e$1({url:_u[7],steps:_u[2],fps:_u[6],ratio:_u[5]})),Cu),{c(){$u=Yt(),Cu.block.c()},m(Pu,Ru){Nt(Pu,$u,Ru),Cu.block.m(Pu,Cu.anchor=Ru),Cu.mount=()=>$u.parentNode,Cu.anchor=$u},p(Pu,Ru){_u=Pu,Cu.ctx=_u,Ru&228&&Tu!==(Tu=_u[10](e$1({url:_u[7],steps:_u[2],fps:_u[6],ratio:_u[5]})))&&ge$3(Tu,Cu)||we$1(Cu,_u,Ru)},d(Pu){Pu&&I$g($u),Cu.block.d(Pu),Cu.token=null,Cu=null}}}function _e(_u){return{c:E$e,m:E$e,p:E$e,d:E$e}}function pe(_u){M$4(_u);let $u,Tu;return{c(){$u=U$8("img"),te$1($u,"alt","tag-icon"),te$1($u,"class","icon-image svelte-316sq3"),Wt($u.src,Tu=_u[7])||te$1($u,"src",Tu),ne($u,"width",e$4(k$3({originWidth:_u[1],scale:_u[4],wantedWidth:_u[3]}).width))},m(Cu,Pu){Nt(Cu,$u,Pu)},p(Cu,Pu){M$4(Cu),Pu&128&&!Wt($u.src,Tu=Cu[7])&&te$1($u,"src",Tu),Pu&184&&ne($u,"width",e$4(k$3({originWidth:Cu[1],scale:Cu[4],wantedWidth:Cu[3]}).width))},d(Cu){Cu&&I$g($u)}}}function ge(_u){return{c:E$e,m:E$e,p:E$e,d:E$e}}function ke(_u){return{c:E$e,m:E$e,p:E$e,d:E$e}}function we(_u){T$2(_u);let $u,Tu=`url(${_u[7]})`,Cu=`steps(${_u[17]}, jump-none)`;return{c(){$u=U$8("div"),te$1($u,"class","icon-keyframe svelte-316sq3"),ne($u,"width",e$4(k$3({originWidth:_u[1],originHeight:_u[16],scale:_u[4],wantedWidth:_u[3]}).width)),ne($u,"height",e$4(k$3({originWidth:_u[1],originHeight:_u[16],scale:_u[4],wantedWidth:_u[3]}).height)),ne($u,"background-image",Tu),ne($u,"animation-duration",_u[18]),ne($u,"animation-timing-function",Cu)},m(Pu,Ru){Nt(Pu,$u,Ru)},p(Pu,Ru){T$2(Pu),Ru&252&&ne($u,"width",e$4(k$3({originWidth:Pu[1],originHeight:Pu[16],scale:Pu[4],wantedWidth:Pu[3]}).width)),Ru&252&&ne($u,"height",e$4(k$3({originWidth:Pu[1],originHeight:Pu[16],scale:Pu[4],wantedWidth:Pu[3]}).height)),Ru&128&&Tu!==(Tu=`url(${Pu[7]})`)&&ne($u,"background-image",Tu),Ru&228&&ne($u,"animation-duration",Pu[18]),Ru&228&&Cu!==(Cu=`steps(${Pu[17]}, jump-none)`)&&ne($u,"animation-timing-function",Cu)},d(Pu){Pu&&I$g($u)}}}function be(_u){return{c:E$e,m:E$e,p:E$e,d:E$e}}function ye(_u){let $u,Tu,Cu=_u[9]&&U$2(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[9]?Cu?(Cu.p(Pu,Ru),Ru&512&&tt$3(Cu,1)):(Cu=U$2(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function k$3(_u){const{originWidth:$u,originHeight:Tu,scale:Cu=1,wantedWidth:Pu}=_u,Ru=(Pu!=null?Pu:$u)*Cu,Lu=typeof Tu=="number"?Ru*(Tu/$u):void 0;return L$2(C$6({},_u),{width:Ru,height:Lu})}function We(_u,$u,Tu){let Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,{width:Fu=null}=$u,{icon:Nu=null}=$u,{shadow:Gu=!1}=$u;const zu=fe$2();function Hu(Wu){return K$1(this,null,function*(){const Qu=yield R(Wu);return zu("iconLoaded",Qu),Qu})}function Uu(Wu){return K$1(this,null,function*(){if(typeof ku=="number")return L$2(C$6({},Wu),{width:ku});const Qu=yield K$2(Wu);return zu("iconLoaded",Qu),Qu})}function ju(){Du||zu("iconLoaded")}return ce$1(()=>{ju()}),_u.$$set=Wu=>{"width"in Wu&&Tu(1,Fu=Wu.width),"icon"in Wu&&Tu(12,Nu=Wu.icon),"shadow"in Wu&&Tu(0,Gu=Wu.shadow)},_u.$$.update=()=>{var Wu,Qu;_u.$$.dirty&4096&&Tu(7,Cu=Nu==null?void 0:Nu.url),_u.$$.dirty&4096&&Tu(2,Pu=(Wu=Nu==null?void 0:Nu.steps)!=null?Wu:1),_u.$$.dirty&4096&&Tu(6,Ru=Nu==null?void 0:Nu.fps),_u.$$.dirty&4096&&Tu(5,Lu=Nu==null?void 0:Nu.ratio),_u.$$.dirty&4096&&Tu(4,Bu=(Qu=Nu==null?void 0:Nu.scale)!=null?Qu:1),_u.$$.dirty&4096&&Tu(3,Vu=Nu==null?void 0:Nu.width),_u.$$.dirty&252&&Tu(9,Ou=e$1({url:Cu,steps:Pu,fps:Ru,ratio:Lu,scale:Bu,width:Vu})),_u.$$.dirty&4&&Tu(8,Du=Pu>1),_u.$$.dirty&2&&(ku=Fu)},ju(),[Gu,Fu,Pu,Vu,Bu,Lu,Ru,Cu,Du,Ou,Hu,Uu,Nu]}class Re extends Te{constructor($u){super(),Me(this,$u,We,ye,Ft,{width:1,icon:12,shadow:0},de)}}function I$3(_u){Qt(_u,"svelte-e58ijk",".wrapper.svelte-e58ijk{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-e58ijk{position:relative;display:flex;align-items:center;justify-content:center}.text.svelte-e58ijk{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function h$1(_u){let $u,Tu,Cu,Pu,Ru,Lu;return Tu=new Q$9({props:{outDelay:0,inDelay:0,center:!0,width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),Cu=Xt(),Pu=U$8("div"),Ru=_t$1(_u[1]),te$1(Pu,"class","text svelte-e58ijk"),te$1($u,"class","text-wrapper svelte-e58ijk")},m(Bu,Vu){Nt(Bu,$u,Vu),Dt(Tu,$u,null),dt$1($u,Cu),dt$1($u,Pu),dt$1(Pu,Ru),Lu=!0},p(Bu,Vu){(!Lu||Vu&2)&&ee$2(Ru,Bu[1])},i(Bu){Lu||(tt$3(Tu.$$.fragment,Bu),Lu=!0)},o(Bu){$t(Tu.$$.fragment,Bu),Lu=!1},d(Bu){Bu&&I$g($u),Rt(Tu)}}}function T$1(_u){let $u,Tu,Cu,Pu;Tu=new Re({props:{icon:_u[0],shadow:!0}}),Tu.$on("iconLoaded",_u[4]);let Ru=_u[1]&&_u[2]&&h$1(_u);return{c(){$u=U$8("div"),Ae(Tu.$$.fragment),Cu=Xt(),Ru&&Ru.c(),te$1($u,"class","wrapper svelte-e58ijk")},m(Lu,Bu){Nt(Lu,$u,Bu),Dt(Tu,$u,null),dt$1($u,Cu),Ru&&Ru.m($u,null),Pu=!0},p(Lu,[Bu]){const Vu={};Bu&1&&(Vu.icon=Lu[0]),Tu.$set(Vu),Lu[1]&&Lu[2]?Ru?(Ru.p(Lu,Bu),Bu&6&&tt$3(Ru,1)):(Ru=h$1(Lu),Ru.c(),tt$3(Ru,1),Ru.m($u,null)):Ru&&(Lt(),$t(Ru,1,1,()=>{Ru=null}),Ot$1())},i(Lu){Pu||(tt$3(Tu.$$.fragment,Lu),tt$3(Ru),Pu=!0)},o(Lu){$t(Tu.$$.fragment,Lu),$t(Ru),Pu=!1},d(Lu){Lu&&I$g($u),Rt(Tu),Ru&&Ru.d()}}}function A$3(_u,$u,Tu){let Cu,Pu,Ru,{tag:Lu}=$u;const Bu=()=>{Tu(2,Cu=!0)};return _u.$$set=Vu=>{"tag"in Vu&&Tu(3,Lu=Vu.tag)},_u.$$.update=()=>{var Vu,Ou,Du;_u.$$.dirty&8&&Tu(1,Pu=(Vu=Lu.data.title)!=null?Vu:Lu.data.text),_u.$$.dirty&8&&Tu(0,Ru=(Du=Lu.data.icon)!=null?Du:(Ou=Lu.style)==null?void 0:Ou.point)},Tu(2,Cu=!1),[Ru,Pu,Cu,Lu,Bu]}class O$2 extends Te{constructor($u){super(),Me(this,$u,A$3,T$1,Ft,{tag:3},I$3)}}function z$1(_u){Qt(_u,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function a$2(_u){let $u,Tu=_u[0].element+"",Cu;return{c(){$u=new ie$3(!1),Cu=Yt(),$u.a=Cu},m(Pu,Ru){$u.m(Tu,Pu,Ru),Nt(Pu,Cu,Ru)},p(Pu,Ru){Ru&1&&Tu!==(Tu=Pu[0].element+"")&&$u.p(Tu)},d(Pu){Pu&&I$g(Cu),Pu&&$u.d()}}}function C$5(_u){let $u,Tu=typeof _u[0].element=="string"&&a$2(_u);return{c(){$u=U$8("div"),Tu&&Tu.c(),te$1($u,"class","customElement__container svelte-kzl2aj")},m(Cu,Pu){Nt(Cu,$u,Pu),Tu&&Tu.m($u,null),_u[2]($u)},p(Cu,[Pu]){typeof Cu[0].element=="string"?Tu?Tu.p(Cu,Pu):(Tu=a$2(Cu),Tu.c(),Tu.m($u,null)):Tu&&(Tu.d(1),Tu=null)},i:E$e,o:E$e,d(Cu){Cu&&I$g($u),Tu&&Tu.d(),_u[2](null)}}}function E$4(_u,$u,Tu){let{tag:Cu}=$u,Pu,Ru;ce$1(()=>{if(Pu){if(Cu.element instanceof Element){const Bu=Cu.element;Pu.appendChild(Bu),Ru=()=>Bu.remove()}else if(typeof Cu.element=="function"){const Bu=Cu.element;Ru=Bu(Pu)}}}),le$1(()=>{Ru==null||Ru()});function Lu(Bu){rt$4[Bu?"unshift":"push"](()=>{Pu=Bu,Tu(1,Pu)})}return _u.$$set=Bu=>{"tag"in Bu&&Tu(0,Cu=Bu.tag)},[Cu,Pu,Lu]}class q$1 extends Te{constructor($u){super(),Me(this,$u,E$4,C$5,Ft,{tag:0},z$1)}}function mA(_u){Qt(_u,"svelte-1r4fqvg",'@font-face{font-family:"TG-TYPE";font-style:normal;font-weight:400;src:local("TG-TYPE-Bold"), url(data:application/font-woff2;charset=utf-8;base64,T1RUTwAKAIAAAwAgQ0ZGINFD4CEAAAaQAAAHC0dTVUIAAQAAAAANnAAAAApPUy8yaB5pEwAAAjQAAABgY21hcEItjGUAAAT0AAABfGhlYWQS1WWOAAAAtAAAADZoaGVhBfMBxwAAAhAAAAAkaG10eJ9gBO8AAADsAAABJG1heHAASVAAAAAArAAAAAZuYW1lqczkZQAAApQAAAJecG9zdP+4ADIAAAZwAAAAIAAAUAAASQAAAAEAAAABAADkeHeyXw889QADA+gAAAAA2NoRKwAAAADY2hErACn/OAHgAyAAAQADAAIAAAAAAAAB9ABdAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACCAA7AcwAdwIIADMCCAA0AhwAMwISADkCCAAuAfQANAH+ACsB/gApAggANAEeAFABHgBQAR4AUAIIADQCCAAuAR4AUAEeAFABfAAxAAEAAAPo/zgAAAIcACkAKQHgAAEAAAAAAAAAAAAAAAAAAABJAAMCLgGQAAUACAKKAlgAAABLAooCWAAAAV4AMgEsAAAAAAgAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFVLV04AIAAg/xsDIP84AMgD6ADIAAAAAQAAAAAB9AK8AAAAIAAAAAAAEADGAAEAAAAAAAEADAAAAAEAAAAAAAIABAAMAAEAAAAAAAMAGwAQAAEAAAAAAAQAEQArAAEAAAAAAAUAPAA8AAEAAAAAAAYAEAB4AAEAAAAAAAgADAAAAAEAAAAAAAkADAAAAAMAAQQJAAEAGACIAAMAAQQJAAIACACgAAMAAQQJAAMANgCoAAMAAQQJAAQAIgDeAAMAAQQJAAUAeAEAAAMAAQQJAAYAIAF4AAMAAQQJAAgAGACIAAMAAQQJAAkAGACIQUxJQkFCQSBGb250Qm9sZDEuMDAwO1VLV047QUxJQkFCQUZvbnQtQm9sZEFMSUJBQkEgRm9udCBCb2xkVmVyc2lvbiAxLjAwMDtQUyAwMDEuMDAwO2hvdGNvbnYgMS4wLjg4O21ha2VvdGYubGliMi41LjY0Nzc1QUxJQkFCQUZvbnQtQm9sZABBAEwASQBCAEEAQgBBACAARgBvAG4AdABCAG8AbABkADEALgAwADAAMAA7AFUASwBXAE4AOwBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAEEATABJAEIAQQBCAEEAIABGAG8AbgB0ACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMAAwADEALgAwADAAMAA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANAA3ADcANQBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAAAAAAADAAAAAwAAASIAAQAAAAAAHAADAAEAAAEiAAABBgAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABCSEMANjc4OTo7PD0+PwAAAAAAAAACAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGwAAAAAAABwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFoAAAAQABAAAwAAACAALgA5AFoAegCl/xv//wAAACAALAAwAEEAYQCl/xr////hAAAABv/B/7v/nwAAAAEAAAAOAAAAAAAAAAAACgAAAEIASABDAEYARwADAAAAAAAA/7UAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAgABAQERQUxJQkFCQUZvbnQtQm9sZAABAQEg+A8A+CAB+CEC+BgEtPtc+HT5tAX3KA/3UBGcHAZWEgAHAQENExoiKTpLbmluZS4wMDEuMDAxbW9uZXkudW5pRkYxQm5pbmUuMDAxdW5pRkYxQWNvcHlyaWdodCBtaXNzaW5nQUxJQkFCQSBGb250IEJvbGQAAAEAAQAAIhkAQhkAEQkBhwABigAADQAADwAAZAABiAABiwABiQAADgAASQIAAQCtAK4ArwCwALEAsgCzALQAtQC2ALcAuAC5ALoAuwC8AL0AvgC/AMAAwQDCAMMAxADFAMYAxwDIAMkAygDLAMwAzQDOAM8A0ADRANIA0wDUANUA1gDXANgA2QDaANsA3ADdAN4A3wDgAOEA4gFDAVoBqwIsAloCuAMcAzkDzwQ4BDoEPARRBFMEVQTNBOIE8QUEmPtc0Ky6rKKsuqzHrKPDoa2irLCspq2vraWssKzOAejVrKytrKzYA/gu+bQV+9H+fPfRBj76ORVqSWbNavs6rM2wSqwH7vsVFUXNafs68wfNaRVqZ6wG704VaklFJ6zNsEmsB/c6TxUn+zqt9xnNB6z7DhX7Bfs69wWsO++6anRpwwfv+0EV+wX7OvcFB/cZahUnXO8GrFMVamsHRVwF8Wr7OqwG0boFRawGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OrIr5UQH3OPdUA/ebihVmaZSdbB9Mr2TL0xr3vgewlK2eqh7Kr86y1BuvrIJ5qh/HZrJIQhr7vgdngmp5bR5OZ0tkQxv46ARUX2FSH/u+B1a5YMDAs7TCHve+B8RjtVYeDnD4utkB93HzA/cL+QgVPfH8vPP5UgcOrIn5UgG++DYD+GmJFfw28wb3svfUBZ2glKSnGsNduFBWXF1UiB4ijgaMsJWsnqoIyLHMstYbsa6Ceawfy2ezSUAaVndXZ2Me+2/7jQX3pwYOrIvy92Tz90ryEr/zM/L3SvMu8hPy+B/3/xUT7LCwpMDDGq6CrHqoHsZnTK5DG2lrg3puH09pZk5EGobykAe4tba6vrViXFZiYlcedyOfBhPyxLpdUlJcW1JSXLvEH5ojfAdllGiebB5LsM5j1xuwrpSeqx/KsLPO1xrKcMNerx4OwPL1Affi8gP4dPdlFWD4fPshBvuJ/HkF+wH3ryPy87YH+8z1Ffc69+QF++QHDrb3ZNf3ZfAB9zX3YwP3nRZlaJSebB9LsGPO1xrzBlK6XMTEubrEHtcHxF26UlJcXFIeI/g0+BYh+677JAaorK2ZsBuwroJ4qx/LZrNHPxo/B2aCaHhrHktmR2NAGw6si/X3b/IBufX3b/ID95n4QBWAg4uKhh/3EfelBfsHBvtK/CMFfnCFbm0aZJVnnmoeSrLPYdobsq6Vnqwfy7K10dgasoGueKwey2RHtT4b+9YETlu7yMe8vcfHvVlPT1laTx8OmIr5UQG/+B8D93iKFfsIBvdo+OYF+6T2+B8oBg6iifL3bPX3QPEStvNB8vc/8jXxE/L4EvgHFRPss7Cnu78arYOreqgexWpNr0YbaWyDem4fUmlmTUcaXqBftGAeE/JWYmROSxpklWieax5Ksc9i2BuxrpWerB/LsbTP2BrHaMVath4T7PsN93QVu7FjXFtlZltcZbC7urGzuh8T8oX8ghVPW7zHx7q6yMa9W1BPWVpQHw6i96Tz92/0AbTz93DzA/hp+HkVsIGveKwezmNFtUAbZGeBeGofSmNiRT8aZJVnnmseSrHPYtoboAb7EvukBfcHBvdL+CEFmaySqaQa+9gWxry+yJ6dhoGcHq12oWZmGk5YW1BMXLnKHg4gCiEK+11L91IlCvdiyhWtb6hpJgoeJAoOIQogCqz3pe/3b/UBufX3bfQD+G74dxWyga94rB7NZEW0PhtlaIF4ah9KY2FFPxo7tkTPZh6MjIqKjB+TiJCIjYoIjgaCoKGHoRuanY6QoB+IgfsB+6QF9wcG9y/4IgWYppGnqhr7a/sCFVBbvMjHu7zGyLxbTk5aWk4fDvtd+AojCoz7jBUmCh8kCq1vqGkeDvtdi/cS94wjCvwKBCIKDiD3ru8BvPeuA7z4EhUn967vBw4eoDf/DAmLDAv47BT4exWcEwAHAQFBXW97ipCarPcv8+7yAfdl8gP4aPf6FfIjB+r3gwUiBi77gwWHBjH3gwUkBuP7gwUnJPcxKPsxI/cx+y/y9y/3MPP7MO4GDvtdi/cSJQr3JBZkcqOzsKSksrCkcWdlcnFmHw6up6eurm+naGhvb2hop2+uHwv3EiUK9yP4ChUiCgt3SgWxBrnmBZGVj5eZGgsB2/cSAwtobm5paqBzqoYLAAABAAAAAAAAAAAAAA==) format("woff2")}*{-webkit-tap-highlight-color:transparent}.content__container.svelte-1r4fqvg{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif}.content__container.withAnimation.svelte-1r4fqvg{transition:opacity 0.3s linear}.content__container.unClickable.svelte-1r4fqvg{pointer-events:none !important}.content__container.unClickable.svelte-1r4fqvg *{pointer-events:none !important}.content__wrapper.svelte-1r4fqvg{pointer-events:none;width:100%;height:100%}.content__container.hide.svelte-1r4fqvg{opacity:0;pointer-events:none}.content__container.hide.svelte-1r4fqvg *{pointer-events:none !important}.content__container.disable.svelte-1r4fqvg{display:none}.content.svelte-1r4fqvg{position:relative;width:100%;height:100%;font-size:0.75rem;color:#fff}.content.svelte-1r4fqvg:not(.unfolded){pointer-events:none}.content.svelte-1r4fqvg:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-1r4fqvg{pointer-events:auto}')}function cA(_u){let $u,Tu;return{c(){$u=U$8("div"),te$1($u,"data-info","tag content is keep folded"),te$1($u,"data-id",Tu=_u[1].id)},m(Cu,Pu){Nt(Cu,$u,Pu)},p(Cu,Pu){Pu&2&&Tu!==(Tu=Cu[1].id)&&te$1($u,"data-id",Tu)},i:E$e,o:E$e,d(Cu){Cu&&I$g($u)}}}function pA(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du;const ku=[wA,CA,vA,QA,BA,dA],Fu=[];function Nu(Gu,zu){return Gu[1].contentType==="Text"?0:Gu[1].contentType==="ImageText"||Gu[1].contentType==="Image"||Gu[1].contentType==="Video"?1:Gu[1].contentType==="Audio"?2:Gu[1].contentType==="Marketing"?3:Gu[1].contentType==="Link"||Gu[1].contentType==="VRLink"||Gu[1].contentType==="PanoLink"||Gu[1].contentType==="Sticker"?4:Gu[1].contentType==="MediaPlane"||Gu[1].contentType==="MediaModel"?5:-1}return~(Pu=Nu(_u))&&(Ru=Fu[Pu]=ku[Pu](_u)),{c(){var Gu;$u=U$8("div"),Tu=U$8("div"),Cu=U$8("div"),Ru&&Ru.c(),te$1(Cu,"class","content svelte-1r4fqvg"),re$2(Cu,"unfolded",(Gu=_u[1].state)==null?void 0:Gu.unfolded),te$1(Tu,"class","content__wrapper svelte-1r4fqvg"),te$1($u,"class",Lu=Gt(u$c("content__container",_u[1].className))+" svelte-1r4fqvg"),te$1($u,"data-id",Bu=_u[1].id),re$2($u,"disable",_u[1].enabled===!1),re$2($u,"hide",_u[4]),re$2($u,"withAnimation",_u[0]),re$2($u,"unClickable",_u[1].mergedConfig.clickable===!1),ne($u,"width",_u[1].stickType==="Plane"||_u[1].contentType==="MediaModel"?"100%":0),ne($u,"height",_u[1].stickType==="Plane"||_u[1].contentType==="MediaModel"?"100%":0)},m(Gu,zu){Nt(Gu,$u,zu),dt$1($u,Tu),dt$1(Tu,Cu),~Pu&&Fu[Pu].m(Cu,null),Vu=!0,Ou||(Du=st$2($u,"click",Zt(_u[14])),Ou=!0)},p(Gu,zu){var Hu;let Uu=Pu;Pu=Nu(Gu),Pu===Uu?~Pu&&Fu[Pu].p(Gu,zu):(Ru&&(Lt(),$t(Fu[Uu],1,1,()=>{Fu[Uu]=null}),Ot$1()),~Pu?(Ru=Fu[Pu],Ru?Ru.p(Gu,zu):(Ru=Fu[Pu]=ku[Pu](Gu),Ru.c()),tt$3(Ru,1),Ru.m(Cu,null)):Ru=null),(!Vu||zu&2)&&re$2(Cu,"unfolded",(Hu=Gu[1].state)==null?void 0:Hu.unfolded),(!Vu||zu&2&&Lu!==(Lu=Gt(u$c("content__container",Gu[1].className))+" svelte-1r4fqvg"))&&te$1($u,"class",Lu),(!Vu||zu&2&&Bu!==(Bu=Gu[1].id))&&te$1($u,"data-id",Bu),(!Vu||zu&2)&&re$2($u,"disable",Gu[1].enabled===!1),(!Vu||zu&18)&&re$2($u,"hide",Gu[4]),(!Vu||zu&3)&&re$2($u,"withAnimation",Gu[0]),(!Vu||zu&2)&&re$2($u,"unClickable",Gu[1].mergedConfig.clickable===!1),zu&2&&ne($u,"width",Gu[1].stickType==="Plane"||Gu[1].contentType==="MediaModel"?"100%":0),zu&2&&ne($u,"height",Gu[1].stickType==="Plane"||Gu[1].contentType==="MediaModel"?"100%":0)},i(Gu){Vu||(tt$3(Ru),Vu=!0)},o(Gu){$t(Ru),Vu=!1},d(Gu){Gu&&I$g($u),~Pu&&Fu[Pu].d(),Ou=!1,Du()}}}function uA(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu;return Tu=new q$1({props:{tag:e$1(_u[1])}}),{c(){$u=U$8("div"),Ae(Tu.$$.fragment),te$1($u,"class",Cu=Gt(u$c("content__container",_u[1].className))+" svelte-1r4fqvg"),te$1($u,"data-id",Pu=_u[1].id),re$2($u,"custom-tag-disable",_u[1].enabled===!1),re$2($u,"custom-tag-hide",_u[4])},m(Vu,Ou){Nt(Vu,$u,Ou),Dt(Tu,$u,null),Ru=!0,Lu||(Bu=st$2($u,"click",_u[13]),Lu=!0)},p(Vu,Ou){const Du={};Ou&2&&(Du.tag=e$1(Vu[1])),Tu.$set(Du),(!Ru||Ou&2&&Cu!==(Cu=Gt(u$c("content__container",Vu[1].className))+" svelte-1r4fqvg"))&&te$1($u,"class",Cu),(!Ru||Ou&2&&Pu!==(Pu=Vu[1].id))&&te$1($u,"data-id",Pu),(!Ru||Ou&2)&&re$2($u,"custom-tag-disable",Vu[1].enabled===!1),(!Ru||Ou&18)&&re$2($u,"custom-tag-hide",Vu[4])},i(Vu){Ru||(tt$3(Tu.$$.fragment,Vu),Ru=!0)},o(Vu){$t(Tu.$$.fragment,Vu),Ru=!1},d(Vu){Vu&&I$g($u),Rt(Tu),Lu=!1,Bu()}}}function dA(_u){let $u,Tu;return $u=new gt({props:{tag:e$1(_u[1])}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&2&&(Ru.tag=e$1(Cu[1])),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function BA(_u){let $u,Tu;return $u=new O$2({props:{tag:e$1(_u[1])}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&2&&(Ru.tag=e$1(Cu[1])),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function QA(_u){let $u,Tu;return $u=new je({props:{tag:e$1(_u[1])}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&2&&(Ru.tag=e$1(Cu[1])),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function vA(_u){let $u,Tu;return $u=new ot$1({props:{tag:e$1(_u[1])}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&2&&(Ru.tag=e$1(Cu[1])),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function CA(_u){let $u,Tu;return $u=new qe({props:{tag:e$1(_u[1])}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&2&&(Ru.tag=e$1(Cu[1])),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function wA(_u){let $u,Tu;return $u=new Y$5({props:{tag:e$1(_u[1])}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&2&&(Ru.tag=e$1(Cu[1])),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function _A(_u){let $u,Tu,Cu,Pu;const Ru=[uA,pA,cA],Lu=[];function Bu(Vu,Ou){return Vu[1].element?0:Vu[3]?1:2}return $u=Bu(_u),Tu=Lu[$u]=Ru[$u](_u),{c(){Tu.c(),Cu=Yt()},m(Vu,Ou){Lu[$u].m(Vu,Ou),Nt(Vu,Cu,Ou),Pu=!0},p(Vu,[Ou]){let Du=$u;$u=Bu(Vu),$u===Du?Lu[$u].p(Vu,Ou):(Lt(),$t(Lu[Du],1,1,()=>{Lu[Du]=null}),Ot$1(),Tu=Lu[$u],Tu?Tu.p(Vu,Ou):(Tu=Lu[$u]=Ru[$u](Vu),Tu.c()),tt$3(Tu,1),Tu.m(Cu.parentNode,Cu))},i(Vu){Pu||(tt$3(Tu),Pu=!0)},o(Vu){$t(Tu),Pu=!1},d(Vu){Lu[$u].d(Vu),Vu&&I$g(Cu)}}}function kA(_u,$u,Tu){let Cu,Pu,Ru,Lu,Bu,Vu,{withAnimation:Ou=!1}=$u,{tag:Du}=$u,{hooks:ku}=$u,{state:Fu}=$u,{mediaStore:Nu}=$u,{temporaryState:Gu}=$u;ae$1("hooks",ku),ae$1("mediaStore",Nu);let zu,Hu;function Uu(qu){qu?ku.emit("exposure",{id:Lu,type:"start"}):ku.emit("exposure",{id:Lu,type:"end"})}function ju(qu,Yu,Ju){var _d,tp;return!(!Yu.visible||!Yu.enabled||!Ju.visible||!((_d=qu.state)!=null&&_d.visible)||((tp=qu.temporaryState)==null?void 0:tp.visible)===!1||s$9(qu)&&!qu.mediaVisible)}const Wu=qu=>ku.emit("click",{event:qu,target:"TagContent",tag:Du}),Qu=qu=>ku.emit("click",{event:qu,target:"TagContent",tag:Du});return _u.$$set=qu=>{"withAnimation"in qu&&Tu(0,Ou=qu.withAnimation),"tag"in qu&&Tu(1,Du=qu.tag),"hooks"in qu&&Tu(2,ku=qu.hooks),"state"in qu&&Tu(5,Fu=qu.state),"mediaStore"in qu&&Tu(6,Nu=qu.mediaStore),"temporaryState"in qu&&Tu(7,Gu=qu.temporaryState)},_u.$$.update=()=>{var qu,Yu,Ju,_d,tp,Ku,Xu,Zu,_c,Xc,_h;_u.$$.dirty&2&&Tu(11,Cu=(qu=Du.state)==null?void 0:qu.unfolded),_u.$$.dirty&2&&Tu(10,Pu=(Yu=Du.state)==null?void 0:Yu.visible),_u.$$.dirty&162&&Tu(12,Ru=Fu.visible&&Gu.visible&&((Ju=Du.state)==null?void 0:Ju.visible)),_u.$$.dirty&2&&(Lu=Du.id),_u.$$.dirty&162&&Tu(4,Bu=!ju(Du,Fu,Gu)),_u.$$.dirty&4096&&Uu(Ru),_u.$$.dirty&3842&&Du.hooks&&(Cu!==void 0&&Cu!==Hu&&(Tu(9,Hu=Cu),Cu?(tp=(_d=Du.hooks).emit)==null||tp.call(_d,"unfolded"):(Xu=Du==null?void 0:(Ku=Du.hooks).emit)==null||Xu.call(Ku,"folded")),Pu!==void 0&&Pu!==zu&&(Tu(8,zu=Pu),Pu?(_c=(Zu=Du.hooks).emit)==null||_c.call(Zu,"show"):(_h=(Xc=Du.hooks).emit)==null||_h.call(Xc,"hide"))),_u.$$.dirty&2&&Tu(3,Vu=(()=>!(typeof Du.mergedConfig.unfoldedConfig=="object"&&Du.mergedConfig.unfoldedConfig.keep==="folded"))())},[Ou,Du,ku,Vu,Bu,Fu,Nu,Gu,zu,Hu,Pu,Cu,Ru,Wu,Qu]}class rt$1 extends Te{constructor($u){super(),Me(this,$u,kA,_A,Ft,{withAnimation:0,tag:1,hooks:2,state:5,mediaStore:6,temporaryState:7},mA)}}function O$1(_u){Qt(_u,"svelte-1jkrwn7",'@charset "UTF-8";.tag-point-click-helper.svelte-1jkrwn7.svelte-1jkrwn7{position:absolute;pointer-events:auto;cursor:pointer;width:calc(100% + 0.75rem);height:calc(100% + 0.75rem);left:50%;top:50%;transform:translate(-50%, -50%)}.tag-point-wrapper.svelte-1jkrwn7.svelte-1jkrwn7{pointer-events:none;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);z-index:-1}.tag-folded-point.svelte-1jkrwn7.svelte-1jkrwn7,.tag-unfolded-point.svelte-1jkrwn7.svelte-1jkrwn7{transition:all 0.5s}.tag-point-wrapper.svelte-1jkrwn7 .tag-unfolded-point.svelte-1jkrwn7{display:flex;justify-content:center;align-items:center;position:absolute;width:100%;height:100%;border-radius:50%}.tag-point-wrapper.svelte-1jkrwn7 .tag-unfolded-point.svelte-1jkrwn7:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:0.3125rem;height:0.3125rem;border-radius:50%;background-color:white}.tag-point-wrapper.svelte-1jkrwn7 .tag-unfolded-point.svelte-1jkrwn7:before{content:"";position:absolute;width:0.875rem;height:0.875rem;border-radius:50%;background-color:rgba(0, 0, 0, 0.2)}.tag-point-wrapper.folded.svelte-1jkrwn7 .tag-folded-point.svelte-1jkrwn7{opacity:1;scale:1}.tag-point-wrapper.folded.svelte-1jkrwn7 .tag-unfolded-point.svelte-1jkrwn7{opacity:0;scale:1}.tag-point-wrapper.unfolded.svelte-1jkrwn7 .tag-folded-point.svelte-1jkrwn7{opacity:0;scale:0.2}.tag-point-wrapper.unfolded.svelte-1jkrwn7 .tag-unfolded-point.svelte-1jkrwn7{opacity:1;scale:1}')}function Q(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,Fu;return Pu=new Q$9({props:{center:!0,blurRadius:15,spreadRadius:5,opacity:.3}}),Ou=new Re({props:{icon:_u[2],width:_u[1]}}),Ou.$on("iconLoaded",_u[7]),{c(){$u=U$8("div"),Tu=U$8("div"),Cu=Xt(),Ae(Pu.$$.fragment),Ru=Xt(),Lu=U$8("div"),Bu=Xt(),Vu=U$8("div"),Ae(Ou.$$.fragment),te$1(Tu,"class","tag-point-click-helper svelte-1jkrwn7"),te$1(Lu,"class","tag-unfolded-point svelte-1jkrwn7"),ne(Lu,"transition-delay",(_u[3]?_u[5]:0)+"ms"),te$1(Vu,"class","tag-folded-point svelte-1jkrwn7"),ne(Vu,"transition-delay",(_u[3]?_u[5]:0)+"ms"),te$1($u,"class","tag-point-wrapper svelte-1jkrwn7"),re$2($u,"unfolded",_u[0]),re$2($u,"folded",_u[3])},m(Nu,Gu){Nt(Nu,$u,Gu),dt$1($u,Tu),dt$1($u,Cu),Dt(Pu,$u,null),dt$1($u,Ru),dt$1($u,Lu),dt$1($u,Bu),dt$1($u,Vu),Dt(Ou,Vu,null),Du=!0,ku||(Fu=st$2(Tu,"click",_u[4]),ku=!0)},p(Nu,[Gu]){Gu&8&&ne(Lu,"transition-delay",(Nu[3]?Nu[5]:0)+"ms");const zu={};Gu&4&&(zu.icon=Nu[2]),Gu&2&&(zu.width=Nu[1]),Ou.$set(zu),Gu&8&&ne(Vu,"transition-delay",(Nu[3]?Nu[5]:0)+"ms"),(!Du||Gu&1)&&re$2($u,"unfolded",Nu[0]),(!Du||Gu&8)&&re$2($u,"folded",Nu[3])},i(Nu){Du||(tt$3(Pu.$$.fragment,Nu),tt$3(Ou.$$.fragment,Nu),Du=!0)},o(Nu){$t(Pu.$$.fragment,Nu),$t(Ou.$$.fragment,Nu),Du=!1},d(Nu){Nu&&I$g($u),Rt(Pu),Rt(Ou),ku=!1,Fu()}}}function V$1(_u,$u,Tu){let Cu,Pu,Ru,Lu;const Bu=de$3("hooks");let{tag:Vu}=$u,Ou,Du=!1;const ku=()=>{Ou!==void 0&&clearTimeout(Ou),Du=!0,Ou=setTimeout(()=>{Du=!1},800)},Fu=zu=>{Du||Bu.emit("click",{event:zu,target:"TagPoint",tag:Vu})},Nu=(()=>Vu.contentType==="Text"&&Vu.data.appearance==="plane"?500:800)();function Gu(zu){he$3.call(this,_u,zu)}return _u.$$set=zu=>{"tag"in zu&&Tu(6,Vu=zu.tag)},_u.$$.update=()=>{var zu,Hu,Uu,ju;_u.$$.dirty&64&&Tu(0,Cu=(zu=Vu.state)==null?void 0:zu.unfolded),_u.$$.dirty&1&&Tu(3,Pu=!Cu),_u.$$.dirty&64&&Tu(2,Ru=(Uu=(Hu=Vu.style)==null?void 0:Hu.point)!=null&&Uu.url?(ju=Vu.style)==null?void 0:ju.point:{url:U$5}),_u.$$.dirty&64&&Tu(1,Lu=(()=>{var Wu,Qu,qu,Yu;const Ju=(Qu=(Wu=Vu.style)==null?void 0:Wu.point)==null?void 0:Qu.width;if(typeof Ju=="number")return Ju;const _d=(Yu=(qu=Vu.style)==null?void 0:qu.point)==null?void 0:Yu.size;if(typeof _d=="number")return _d;if(_d==="S")return 18;if(_d==="M")return 20;if(_d==="L")return 24;if(_d==="XL")return 28})())},ku(),[Cu,Lu,Ru,Pu,Fu,Nu,Vu,Gu]}class lt extends Te{constructor($u){super(),Me(this,$u,V$1,Q,Ft,{tag:6},O$1)}}function et(_u){Qt(_u,"svelte-pzwdws",".tag.withAnimation.svelte-pzwdws{transition:opacity 0.3s linear}.tag.hide.svelte-pzwdws{opacity:0;pointer-events:none}.tag.hide.svelte-pzwdws *{pointer-events:none !important}.tag.unClickable.svelte-pzwdws{pointer-events:none !important}.tag.unClickable.svelte-pzwdws *{pointer-events:none !important}.tag.disable.svelte-pzwdws{display:none}.wrapper.svelte-pzwdws{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto}")}function it(_u){let $u;return{c(){$u=U$8("div"),te$1($u,"data-info","tag content is disable")},m(Tu,Cu){Nt(Tu,$u,Cu)},p:E$e,i:E$e,o:E$e,d(Tu){Tu&&I$g($u)}}}function ot(_u){let $u,Tu;return $u=new rt$1({props:{mediaStore:_u[2],withAnimation:_u[0],tag:e$1(_u[1]),hooks:_u[14],state:_u[3],temporaryState:_u[4]}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&4&&(Ru.mediaStore=Cu[2]),Pu&1&&(Ru.withAnimation=Cu[0]),Pu&2&&(Ru.tag=e$1(Cu[1])),Pu&8&&(Ru.state=Cu[3]),Pu&16&&(Ru.temporaryState=Cu[4]),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function rt(_u){let $u;return{c(){$u=U$8("div"),te$1($u,"data-info","tag point is disable")},m(Tu,Cu){Nt(Tu,$u,Cu)},p:E$e,i:E$e,o:E$e,d(Tu){Tu&&I$g($u)}}}function nt(_u){let $u,Tu;return $u=new lt({props:{tag:_u[1]}}),{c(){Ae($u.$$.fragment)},m(Cu,Pu){Dt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Ru={};Pu&2&&(Ru.tag=Cu[1]),$u.$set(Ru)},i(Cu){Tu||(tt$3($u.$$.fragment,Cu),Tu=!0)},o(Cu){$t($u.$$.fragment,Cu),Tu=!1},d(Cu){Rt($u,Cu)}}}function at(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du;const ku=[ot,it],Fu=[];function Nu(Uu,ju){return Uu[12]?0:1}Cu=Nu(_u),Pu=Fu[Cu]=ku[Cu](_u);const Gu=[nt,rt],zu=[];function Hu(Uu,ju){return Uu[13]?0:1}return Lu=Hu(_u),Bu=zu[Lu]=Gu[Lu](_u),{c(){$u=U$8("div"),Tu=U$8("div"),Pu.c(),Ru=Xt(),Bu.c(),te$1(Tu,"class",Vu=Gt(u$c("wrapper",_u[1].className?`${_u[1].className}__wrapper`:void 0))+" svelte-pzwdws"),te$1(Tu,"data-tag-unfolded",_u[8]),te$1(Tu,"data-tag-id",_u[11]),te$1(Tu,"data-content-type",Ou=_u[1].contentType),ne(Tu,"left",_u[7]),ne(Tu,"top",_u[6]),te$1($u,"class","tag svelte-pzwdws"),te$1($u,"data-tag-id",_u[11]),re$2($u,"unClickable",_u[1].mergedConfig.clickable===!1),re$2($u,"disable",_u[10]),re$2($u,"hide",_u[9]),re$2($u,"withAnimation",_u[0]),ne($u,"z-index",_u[5])},m(Uu,ju){Nt(Uu,$u,ju),dt$1($u,Tu),Fu[Cu].m(Tu,null),dt$1(Tu,Ru),zu[Lu].m(Tu,null),Du=!0},p(Uu,[ju]){let Wu=Cu;Cu=Nu(Uu),Cu===Wu?Fu[Cu].p(Uu,ju):(Lt(),$t(Fu[Wu],1,1,()=>{Fu[Wu]=null}),Ot$1(),Pu=Fu[Cu],Pu?Pu.p(Uu,ju):(Pu=Fu[Cu]=ku[Cu](Uu),Pu.c()),tt$3(Pu,1),Pu.m(Tu,Ru));let Qu=Lu;Lu=Hu(Uu),Lu===Qu?zu[Lu].p(Uu,ju):(Lt(),$t(zu[Qu],1,1,()=>{zu[Qu]=null}),Ot$1(),Bu=zu[Lu],Bu?Bu.p(Uu,ju):(Bu=zu[Lu]=Gu[Lu](Uu),Bu.c()),tt$3(Bu,1),Bu.m(Tu,null)),(!Du||ju&2&&Vu!==(Vu=Gt(u$c("wrapper",Uu[1].className?`${Uu[1].className}__wrapper`:void 0))+" svelte-pzwdws"))&&te$1(Tu,"class",Vu),(!Du||ju&256)&&te$1(Tu,"data-tag-unfolded",Uu[8]),(!Du||ju&2048)&&te$1(Tu,"data-tag-id",Uu[11]),(!Du||ju&2&&Ou!==(Ou=Uu[1].contentType))&&te$1(Tu,"data-content-type",Ou),ju&128&&ne(Tu,"left",Uu[7]),ju&64&&ne(Tu,"top",Uu[6]),(!Du||ju&2048)&&te$1($u,"data-tag-id",Uu[11]),(!Du||ju&2)&&re$2($u,"unClickable",Uu[1].mergedConfig.clickable===!1),(!Du||ju&1024)&&re$2($u,"disable",Uu[10]),(!Du||ju&512)&&re$2($u,"hide",Uu[9]),(!Du||ju&1)&&re$2($u,"withAnimation",Uu[0]),ju&32&&ne($u,"z-index",Uu[5])},i(Uu){Du||(tt$3(Pu),tt$3(Bu),Du=!0)},o(Uu){$t(Pu),$t(Bu),Du=!1},d(Uu){Uu&&I$g($u),Fu[Cu].d(),zu[Lu].d()}}}function pt(_u,$u,Tu){let Cu,Pu,Ru,Lu,Bu,Vu,Ou,Du,ku,{withAnimation:Fu=!1}=$u,{tag:Nu}=$u,{mediaStore:Gu}=$u,{state:zu}=$u,{temporaryState:Hu}=$u;const Uu=de$3("hooks");return _u.$$set=ju=>{"withAnimation"in ju&&Tu(0,Fu=ju.withAnimation),"tag"in ju&&Tu(1,Nu=ju.tag),"mediaStore"in ju&&Tu(2,Gu=ju.mediaStore),"state"in ju&&Tu(3,zu=ju.state),"temporaryState"in ju&&Tu(4,Hu=ju.temporaryState)},_u.$$.update=()=>{var ju,Wu,Qu,qu,Yu,Ju,_d,tp,Ku;_u.$$.dirty&2&&Tu(13,Cu=(()=>{var Xu,Zu;return!(((Zu=(Xu=Nu.style)==null?void 0:Xu.point)==null?void 0:Zu.enabled)===!1||Nu.contentType==="Sticker"||Nu.contentType==="Link"||Nu.contentType==="VRLink"||Nu.contentType==="PanoLink"||Nu.contentType==="Audio"&&Nu.data.appearance==="plane")})()),_u.$$.dirty&2&&Tu(12,Pu=(()=>Nu.stickType==="2DPoint")()),_u.$$.dirty&2&&Tu(11,Ru=Nu.id),_u.$$.dirty&2&&Tu(10,Lu=!((ju=Nu.pointTagStyle)!=null&&ju.leftPercent)||!((Wu=Nu.pointTagStyle)!=null&&Wu.topPercent)||Nu.enabled===!1||!Nu.state),_u.$$.dirty&2&&Tu(9,Bu=!((Qu=Nu.state)!=null&&Qu.visible)||((qu=Nu.temporaryState)==null?void 0:qu.visible)===!1),_u.$$.dirty&2&&Tu(8,Vu=(Yu=Nu.state)==null?void 0:Yu.unfolded),_u.$$.dirty&2&&Tu(7,Ou=((Ju=Nu.pointTagStyle)==null?void 0:Ju.leftPercent)+"%"),_u.$$.dirty&2&&Tu(6,Du=((_d=Nu.pointTagStyle)==null?void 0:_d.topPercent)+"%"),_u.$$.dirty&2&&Tu(5,ku=(tp=Nu.state)!=null&&tp.unfolded?99999:(Ku=Nu.zIndex)!=null?Ku:0)},[Fu,Nu,Gu,zu,Hu,ku,Du,Ou,Vu,Bu,Lu,Ru,Pu,Cu,Uu]}class Qe extends Te{constructor($u){super(),Me(this,$u,pt,at,Ft,{withAnimation:0,tag:1,mediaStore:2,state:3,temporaryState:4},et)}}function D$1(_u){Qt(_u,"svelte-uq11d5",".tag--container.svelte-uq11d5{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none;transform:translate3d(0, 0, 0)}.withAnimation.svelte-uq11d5{transition:opacity 0.3s linear}.tag--container.hide.svelte-uq11d5{opacity:0;pointer-events:none}.tag--container.hide.svelte-uq11d5 *{pointer-events:none !important}")}function _(_u,$u,Tu){const Cu=_u.slice();return Cu[6]=$u[Tu],Cu}function d$2(_u){let $u,Tu=[],Cu=new Map,Pu,Ru=_u[1];const Lu=Bu=>Bu[6].id;for(let Bu=0;Bu<Ru.length;Bu+=1){let Vu=_(_u,Ru,Bu),Ou=Lu(Vu);Cu.set(Ou,Tu[Bu]=g$4(Ou,Vu))}return{c(){$u=U$8("div");for(let Bu=0;Bu<Tu.length;Bu+=1)Tu[Bu].c();te$1($u,"class","tag--container svelte-uq11d5"),re$2($u,"hide",!_u[3].visible||!_u[4].visible),re$2($u,"withAnimation",_u[0])},m(Bu,Vu){Nt(Bu,$u,Vu);for(let Ou=0;Ou<Tu.length;Ou+=1)Tu[Ou]&&Tu[Ou].m($u,null);Pu=!0},p(Bu,Vu){Vu&31&&(Ru=Bu[1],Lt(),Tu=xe(Tu,Vu,Lu,1,Bu,Ru,Cu,$u,ke$2,g$4,null,_),Ot$1()),(!Pu||Vu&24)&&re$2($u,"hide",!Bu[3].visible||!Bu[4].visible),(!Pu||Vu&1)&&re$2($u,"withAnimation",Bu[0])},i(Bu){if(!Pu){for(let Vu=0;Vu<Ru.length;Vu+=1)tt$3(Tu[Vu]);Pu=!0}},o(Bu){for(let Vu=0;Vu<Tu.length;Vu+=1)$t(Tu[Vu]);Pu=!1},d(Bu){Bu&&I$g($u);for(let Vu=0;Vu<Tu.length;Vu+=1)Tu[Vu].d()}}}function g$4(_u,$u){let Tu,Cu,Pu;return Cu=new Qe({props:{state:$u[3],temporaryState:$u[4],withAnimation:$u[0],tag:$u[6],mediaStore:$u[2]}}),{key:_u,first:null,c(){Tu=Yt(),Ae(Cu.$$.fragment),this.first=Tu},m(Ru,Lu){Nt(Ru,Tu,Lu),Dt(Cu,Ru,Lu),Pu=!0},p(Ru,Lu){$u=Ru;const Bu={};Lu&8&&(Bu.state=$u[3]),Lu&16&&(Bu.temporaryState=$u[4]),Lu&1&&(Bu.withAnimation=$u[0]),Lu&2&&(Bu.tag=$u[6]),Lu&4&&(Bu.mediaStore=$u[2]),Cu.$set(Bu)},i(Ru){Pu||(tt$3(Cu.$$.fragment,Ru),Pu=!0)},o(Ru){$t(Cu.$$.fragment,Ru),Pu=!1},d(Ru){Ru&&I$g(Tu),Rt(Cu,Ru)}}}function E$3(_u){let $u,Tu,Cu=_u[3].enabled&&d$2(_u);return{c(){Cu&&Cu.c(),$u=Yt()},m(Pu,Ru){Cu&&Cu.m(Pu,Ru),Nt(Pu,$u,Ru),Tu=!0},p(Pu,[Ru]){Pu[3].enabled?Cu?(Cu.p(Pu,Ru),Ru&8&&tt$3(Cu,1)):(Cu=d$2(Pu),Cu.c(),tt$3(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(Lt(),$t(Cu,1,1,()=>{Cu=null}),Ot$1())},i(Pu){Tu||(tt$3(Cu),Tu=!0)},o(Pu){$t(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&I$g($u)}}}function F$3(_u,$u,Tu){let{withAnimation:Cu=!1}=$u,{tags:Pu=[]}=$u,{hooks:Ru}=$u,{mediaStore:Lu}=$u,{state:Bu}=$u,{temporaryState:Vu}=$u;return ae$1("hooks",Ru),_u.$$set=Ou=>{"withAnimation"in Ou&&Tu(0,Cu=Ou.withAnimation),"tags"in Ou&&Tu(1,Pu=Ou.tags),"hooks"in Ou&&Tu(5,Ru=Ou.hooks),"mediaStore"in Ou&&Tu(2,Lu=Ou.mediaStore),"state"in Ou&&Tu(3,Bu=Ou.state),"temporaryState"in Ou&&Tu(4,Vu=Ou.temporaryState)},[Cu,Pu,Lu,Bu,Vu,Ru]}class vi extends Te{constructor($u){super(),Me(this,$u,F$3,E$3,Ft,{withAnimation:0,tags:1,hooks:5,mediaStore:2,state:3,temporaryState:4},D$1)}}var gltfLoader={},GLTFLoader;Object.defineProperty(gltfLoader,"__esModule",{value:!0});var e=tslib.exports,t$1=require$$1;function r(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Tu){if(Tu!=="default"){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}}),$u.default=_u,Object.freeze($u)}var a$1=r(t$1),s$2=function(){function _u(ep){t$1.Loader.call(this,ep),this.dracoLoader=null,this.ddsLoader=null}function $u(){var ep={};return{get:function(_f){return ep[_f]},add:function(_f,op){ep[_f]=op},remove:function(_f){delete ep[_f]},removeAll:function(){ep={}}}}_u.prototype=Object.assign(Object.create(t$1.Loader.prototype),{constructor:_u,load:function(ep,_f,op,rp){var up,cp=this;up=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:t$1.LoaderUtils.extractUrlBase(ep),cp.manager.itemStart(ep);var fp=function(xp){rp?rp(xp):console.error(xp),cp.manager.itemError(ep),cp.manager.itemEnd(ep)},vp=new t$1.FileLoader(cp.manager);vp.setPath(this.path),vp.setResponseType("arraybuffer"),vp.setRequestHeader(this.requestHeader),cp.crossOrigin==="use-credentials"&&vp.setWithCredentials(!0),vp.load(ep,function(xp){try{cp.parse(xp,up,function(mp){_f(mp),cp.manager.itemEnd(ep)},fp)}catch(mp){fp(mp)}},op,fp)},setDRACOLoader:function(ep){return this.dracoLoader=ep,this},setDDSLoader:function(ep){return this.ddsLoader=ep,this},parse:function(ep,_f,op,rp){var up,cp={};if(typeof ep=="string")up=ep;else if(t$1.LoaderUtils.decodeText(new Uint8Array(ep,0,4))===Bu){try{cp[Tu.KHR_BINARY_GLTF]=new Du(ep)}catch(lp){return void(rp&&rp(lp))}up=cp[Tu.KHR_BINARY_GLTF].content}else up=t$1.LoaderUtils.decodeText(new Uint8Array(ep));var fp=JSON.parse(up);if(fp.asset===void 0||fp.asset.version[0]<2)rp&&rp(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(fp.extensionsUsed)for(var vp=0;vp<fp.extensionsUsed.length;++vp){var xp=fp.extensionsUsed[vp],mp=fp.extensionsRequired||[];switch(xp){case Tu.KHR_LIGHTS_PUNCTUAL:cp[xp]=new Pu(fp);break;case Tu.KHR_MATERIALS_CLEARCOAT:cp[xp]=new Lu;break;case Tu.KHR_MATERIALS_UNLIT:cp[xp]=new Ru;break;case Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:cp[xp]=new Gu;break;case Tu.KHR_DRACO_MESH_COMPRESSION:cp[xp]=new ku(fp,this.dracoLoader);break;case Tu.MSFT_TEXTURE_DDS:cp[xp]=new Cu(this.ddsLoader);break;case Tu.KHR_TEXTURE_TRANSFORM:cp[xp]=new Fu;break;case Tu.KHR_MESH_QUANTIZATION:cp[xp]=new zu;break;default:mp.indexOf(xp)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+xp+'".')}}var sp=new Ep(fp,cp,{path:_f||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});sp.fileLoader.setRequestHeader(this.requestHeader),sp.parse(op,rp)}}});var Tu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function Cu(ep){if(!ep)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Tu.MSFT_TEXTURE_DDS,this.ddsLoader=ep}function Pu(ep){this.name=Tu.KHR_LIGHTS_PUNCTUAL;var _f=ep.extensions&&ep.extensions[Tu.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=_f.lights||[]}function Ru(){this.name=Tu.KHR_MATERIALS_UNLIT}function Lu(){this.name=Tu.KHR_MATERIALS_CLEARCOAT}Pu.prototype.loadLight=function(ep){var _f,op=this.lightDefs[ep],rp=new t$1.Color(16777215);op.color!==void 0&&rp.fromArray(op.color);var up=op.range!==void 0?op.range:0;switch(op.type){case"directional":(_f=new t$1.DirectionalLight(rp)).target.position.set(0,0,-1),_f.add(_f.target);break;case"point":(_f=new t$1.PointLight(rp)).distance=up;break;case"spot":(_f=new t$1.SpotLight(rp)).distance=up,op.spot=op.spot||{},op.spot.innerConeAngle=op.spot.innerConeAngle!==void 0?op.spot.innerConeAngle:0,op.spot.outerConeAngle=op.spot.outerConeAngle!==void 0?op.spot.outerConeAngle:Math.PI/4,_f.angle=op.spot.outerConeAngle,_f.penumbra=1-op.spot.innerConeAngle/op.spot.outerConeAngle,_f.target.position.set(0,0,-1),_f.add(_f.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+op.type+'".')}return _f.position.set(0,0,0),_f.decay=2,op.intensity!==void 0&&(_f.intensity=op.intensity),_f.name=op.name||"light_"+ep,Promise.resolve(_f)},Ru.prototype.getMaterialType=function(){return t$1.MeshBasicMaterial},Ru.prototype.extendParams=function(ep,_f,op){var rp=[];ep.color=new t$1.Color(1,1,1),ep.opacity=1;var up=_f.pbrMetallicRoughness;if(up){if(Array.isArray(up.baseColorFactor)){var cp=up.baseColorFactor;ep.color.fromArray(cp),ep.opacity=cp[3]}up.baseColorTexture!==void 0&&rp.push(op.assignTexture(ep,"map",up.baseColorTexture))}return Promise.all(rp)},Lu.prototype.getMaterialType=function(){return t$1.MeshPhysicalMaterial},Lu.prototype.extendParams=function(ep,_f,op){var rp=[],up=_f.extensions[this.name];if(up.clearcoatFactor!==void 0&&(ep.clearcoat=up.clearcoatFactor),up.clearcoatTexture!==void 0&&rp.push(op.assignTexture(ep,"clearcoatMap",up.clearcoatTexture)),up.clearcoatRoughnessFactor!==void 0&&(ep.clearcoatRoughness=up.clearcoatRoughnessFactor),up.clearcoatRoughnessTexture!==void 0&&rp.push(op.assignTexture(ep,"clearcoatRoughnessMap",up.clearcoatRoughnessTexture)),up.clearcoatNormalTexture!==void 0&&(rp.push(op.assignTexture(ep,"clearcoatNormalMap",up.clearcoatNormalTexture)),up.clearcoatNormalTexture.scale!==void 0)){var cp=up.clearcoatNormalTexture.scale;ep.clearcoatNormalScale=new t$1.Vector2(cp,cp)}return Promise.all(rp)};var Bu="glTF",Vu=1313821514,Ou=5130562;function Du(ep){this.name=Tu.KHR_BINARY_GLTF,this.content=null,this.body=null;var _f=new DataView(ep,0,12);if(this.header={magic:t$1.LoaderUtils.decodeText(new Uint8Array(ep.slice(0,4))),version:_f.getUint32(4,!0),length:_f.getUint32(8,!0)},this.header.magic!==Bu)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var op=new DataView(ep,12),rp=0;rp<op.byteLength;){var up=op.getUint32(rp,!0);rp+=4;var cp=op.getUint32(rp,!0);if(rp+=4,cp===Vu){var fp=new Uint8Array(ep,12+rp,up);this.content=t$1.LoaderUtils.decodeText(fp)}else if(cp===Ou){var vp=12+rp;this.body=ep.slice(vp,vp+up)}rp+=up}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function ku(ep,_f){if(!_f)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Tu.KHR_DRACO_MESH_COMPRESSION,this.json=ep,this.dracoLoader=_f,this.dracoLoader.preload()}function Fu(){this.name=Tu.KHR_TEXTURE_TRANSFORM}function Nu(ep){t$1.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var _f=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),op=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),rp=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),up=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),cp=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),fp={specular:{value:new t$1.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=fp,this.onBeforeCompile=function(vp){for(var xp in fp)vp.uniforms[xp]=fp[xp];vp.fragmentShader=vp.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),vp.fragmentShader=vp.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),vp.fragmentShader=vp.fragmentShader.replace("#include <roughnessmap_pars_fragment>",_f),vp.fragmentShader=vp.fragmentShader.replace("#include <metalnessmap_pars_fragment>",op),vp.fragmentShader=vp.fragmentShader.replace("#include <roughnessmap_fragment>",rp),vp.fragmentShader=vp.fragmentShader.replace("#include <metalnessmap_fragment>",up),vp.fragmentShader=vp.fragmentShader.replace("#include <lights_physical_fragment>",cp)},Object.defineProperties(this,{specular:{get:function(){return fp.specular.value},set:function(vp){fp.specular.value=vp}},specularMap:{get:function(){return fp.specularMap.value},set:function(vp){fp.specularMap.value=vp}},glossiness:{get:function(){return fp.glossiness.value},set:function(vp){fp.glossiness.value=vp}},glossinessMap:{get:function(){return fp.glossinessMap.value},set:function(vp){fp.glossinessMap.value=vp,vp?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(ep)}function Gu(){return{name:Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Nu},extendParams:function(ep,_f,op){var rp=_f.extensions[this.name];ep.color=new t$1.Color(1,1,1),ep.opacity=1;var up=[];if(Array.isArray(rp.diffuseFactor)){var cp=rp.diffuseFactor;ep.color.fromArray(cp),ep.opacity=cp[3]}if(rp.diffuseTexture!==void 0&&up.push(op.assignTexture(ep,"map",rp.diffuseTexture)),ep.emissive=new t$1.Color(0,0,0),ep.glossiness=rp.glossinessFactor!==void 0?rp.glossinessFactor:1,ep.specular=new t$1.Color(1,1,1),Array.isArray(rp.specularFactor)&&ep.specular.fromArray(rp.specularFactor),rp.specularGlossinessTexture!==void 0){var fp=rp.specularGlossinessTexture;up.push(op.assignTexture(ep,"glossinessMap",fp)),up.push(op.assignTexture(ep,"specularMap",fp))}return Promise.all(up)},createMaterial:function(ep){var _f=new Nu(ep);return _f.fog=!0,_f.color=ep.color,_f.map=ep.map===void 0?null:ep.map,_f.lightMap=null,_f.lightMapIntensity=1,_f.aoMap=ep.aoMap===void 0?null:ep.aoMap,_f.aoMapIntensity=1,_f.emissive=ep.emissive,_f.emissiveIntensity=1,_f.emissiveMap=ep.emissiveMap===void 0?null:ep.emissiveMap,_f.bumpMap=ep.bumpMap===void 0?null:ep.bumpMap,_f.bumpScale=1,_f.normalMap=ep.normalMap===void 0?null:ep.normalMap,_f.normalMapType=t$1.TangentSpaceNormalMap,ep.normalScale&&(_f.normalScale=ep.normalScale),_f.displacementMap=null,_f.displacementScale=1,_f.displacementBias=0,_f.specularMap=ep.specularMap===void 0?null:ep.specularMap,_f.specular=ep.specular,_f.glossinessMap=ep.glossinessMap===void 0?null:ep.glossinessMap,_f.glossiness=ep.glossiness,_f.alphaMap=null,_f.envMap=ep.envMap===void 0?null:ep.envMap,_f.envMapIntensity=1,_f.refractionRatio=.98,_f}}}function zu(){this.name=Tu.KHR_MESH_QUANTIZATION}function Hu(ep,_f,op,rp){t$1.Interpolant.call(this,ep,_f,op,rp)}ku.prototype.decodePrimitive=function(ep,_f){var op=this.json,rp=this.dracoLoader,up=ep.extensions[this.name].bufferView,cp=ep.extensions[this.name].attributes,fp={},vp={},xp={};for(var mp in cp){var sp=Zu[mp]||mp.toLowerCase();fp[sp]=cp[mp]}for(mp in ep.attributes)if(sp=Zu[mp]||mp.toLowerCase(),cp[mp]!==void 0){var lp=op.accessors[ep.attributes[mp]],$p=_d[lp.componentType];xp[sp]=$p,vp[sp]=lp.normalized===!0}return _f.getDependency("bufferView",up).then(function(Mp){return new Promise(function(kp){rp.decodeDracoFile(Mp,function(Vp){for(var Gp in Vp.attributes){var qp=Vp.attributes[Gp],Wp=vp[Gp];Wp!==void 0&&(qp.normalized=Wp)}kp(Vp)},fp,xp)})})},Fu.prototype.extendTexture=function(ep,_f){return ep=ep.clone(),_f.offset!==void 0&&ep.offset.fromArray(_f.offset),_f.rotation!==void 0&&(ep.rotation=_f.rotation),_f.scale!==void 0&&ep.repeat.fromArray(_f.scale),_f.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),ep.needsUpdate=!0,ep},Nu.prototype=Object.create(t$1.MeshStandardMaterial.prototype),Nu.prototype.constructor=Nu,Nu.prototype.copy=function(ep){return t$1.MeshStandardMaterial.prototype.copy.call(this,ep),this.specularMap=ep.specularMap,this.specular.copy(ep.specular),this.glossinessMap=ep.glossinessMap,this.glossiness=ep.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},Hu.prototype=Object.create(t$1.Interpolant.prototype),Hu.prototype.constructor=Hu,Hu.prototype.copySampleValue_=function(ep){for(var _f=this.resultBuffer,op=this.sampleValues,rp=this.valueSize,up=ep*rp*3+rp,cp=0;cp!==rp;cp++)_f[cp]=op[up+cp];return _f},Hu.prototype.beforeStart_=Hu.prototype.copySampleValue_,Hu.prototype.afterEnd_=Hu.prototype.copySampleValue_,Hu.prototype.interpolate_=function(ep,_f,op,rp){for(var up=this.resultBuffer,cp=this.sampleValues,fp=this.valueSize,vp=2*fp,xp=3*fp,mp=rp-_f,sp=(op-_f)/mp,lp=sp*sp,$p=lp*sp,Mp=ep*xp,kp=Mp-xp,Vp=-2*$p+3*lp,Gp=$p-lp,qp=1-Vp,Wp=Gp-lp+sp,Yp=0;Yp!==fp;Yp++){var Kp=cp[kp+Yp+fp],ev=cp[kp+Yp+vp]*mp,Xp=cp[Mp+Yp+fp],Zp=cp[Mp+Yp]*mp;up[Yp]=qp*Kp+Wp*ev+Vp*Xp+Gp*Zp}return up};var Uu=0,ju=1,Wu=2,Qu=3,qu=4,Yu=5,Ju=6,_d={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tp={9728:t$1.NearestFilter,9729:t$1.LinearFilter,9984:t$1.NearestMipmapNearestFilter,9985:t$1.LinearMipmapNearestFilter,9986:t$1.NearestMipmapLinearFilter,9987:t$1.LinearMipmapLinearFilter},Ku={33071:t$1.ClampToEdgeWrapping,33648:t$1.MirroredRepeatWrapping,10497:t$1.RepeatWrapping},Xu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Zu={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_c={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Xc={CUBICSPLINE:void 0,LINEAR:t$1.InterpolateLinear,STEP:t$1.InterpolateDiscrete},_h="OPAQUE",ip="MASK",ap="BLEND",hp={"image/png":t$1.RGBAFormat,"image/jpeg":t$1.RGBFormat};function Ap(ep,_f){return typeof ep!="string"||ep===""?"":(/^https?:\/\//i.test(_f)&&/^\//.test(ep)&&(_f=_f.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(ep)||/^data:.*,.*$/i.test(ep)||/^blob:.*$/i.test(ep)?ep:_f+ep)}function gp(ep,_f,op){for(var rp in op.extensions)ep[rp]===void 0&&(_f.userData.gltfExtensions=_f.userData.gltfExtensions||{},_f.userData.gltfExtensions[rp]=op.extensions[rp])}function Rp(ep,_f){_f.extras!==void 0&&(typeof _f.extras=="object"?Object.assign(ep.userData,_f.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_f.extras))}function Sp(ep,_f){if(ep.updateMorphTargets(),_f.weights!==void 0)for(var op=0,rp=_f.weights.length;op<rp;op++)ep.morphTargetInfluences[op]=_f.weights[op];if(_f.extras&&Array.isArray(_f.extras.targetNames)){var up=_f.extras.targetNames;if(ep.morphTargetInfluences.length===up.length)for(ep.morphTargetDictionary={},op=0,rp=up.length;op<rp;op++)ep.morphTargetDictionary[up[op]]=op;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Dp(ep){for(var _f="",op=Object.keys(ep).sort(),rp=0,up=op.length;rp<up;rp++)_f+=op[rp]+":"+ep[op[rp]]+";";return _f}function Ep(ep,_f,op){this.json=ep||{},this.extensions=_f||{},this.options=op||{},this.cache=new $u,this.associations=new Map,this.primitiveCache={},this.textureLoader=new t$1.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new t$1.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function Bp(ep,_f,op){var rp=_f.attributes,up=[];function cp(mp,sp){return op.getDependency("accessor",mp).then(function(lp){ep.setAttribute(sp,lp)})}for(var fp in rp){var vp=Zu[fp]||fp.toLowerCase();vp in ep.attributes||up.push(cp(rp[fp],vp))}if(_f.indices!==void 0&&!ep.index){var xp=op.getDependency("accessor",_f.indices).then(function(mp){ep.setIndex(mp)});up.push(xp)}return Rp(ep,_f),function(mp,sp,lp){var $p=sp.attributes,Mp=new t$1.Box3;if($p.POSITION!==void 0){var kp=(ev=lp.json.accessors[$p.POSITION]).min,Vp=ev.max;if(kp!==void 0&&Vp!==void 0){Mp.set(new t$1.Vector3(kp[0],kp[1],kp[2]),new t$1.Vector3(Vp[0],Vp[1],Vp[2]));var Gp=sp.targets;if(Gp!==void 0){for(var qp=new t$1.Vector3,Wp=new t$1.Vector3,Yp=0,Kp=Gp.length;Yp<Kp;Yp++){var ev,Xp=Gp[Yp];Xp.POSITION!==void 0&&(kp=(ev=lp.json.accessors[Xp.POSITION]).min,Vp=ev.max,kp!==void 0&&Vp!==void 0?(Wp.setX(Math.max(Math.abs(kp[0]),Math.abs(Vp[0]))),Wp.setY(Math.max(Math.abs(kp[1]),Math.abs(Vp[1]))),Wp.setZ(Math.max(Math.abs(kp[2]),Math.abs(Vp[2]))),qp.max(Wp)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}Mp.expandByVector(qp)}mp.boundingBox=Mp;var Zp=new t$1.Sphere;Mp.getCenter(Zp.center),Zp.radius=Mp.min.distanceTo(Mp.max)/2,mp.boundingSphere=Zp}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(ep,_f,op),Promise.all(up).then(function(){return _f.targets!==void 0?function(mp,sp,lp){for(var $p=!1,Mp=!1,kp=0,Vp=sp.length;kp<Vp&&((Wp=sp[kp]).POSITION!==void 0&&($p=!0),Wp.NORMAL!==void 0&&(Mp=!0),!$p||!Mp);kp++);if(!$p&&!Mp)return Promise.resolve(mp);var Gp=[],qp=[];for(kp=0,Vp=sp.length;kp<Vp;kp++){var Wp=sp[kp];if($p){var Yp=Wp.POSITION!==void 0?lp.getDependency("accessor",Wp.POSITION):mp.attributes.position;Gp.push(Yp)}Mp&&(Yp=Wp.NORMAL!==void 0?lp.getDependency("accessor",Wp.NORMAL):mp.attributes.normal,qp.push(Yp))}return Promise.all([Promise.all(Gp),Promise.all(qp)]).then(function(Kp){var ev=Kp[0],Xp=Kp[1];return $p&&(mp.morphAttributes.position=ev),Mp&&(mp.morphAttributes.normal=Xp),mp.morphTargetsRelative=!0,mp})}(ep,_f.targets,op):ep})}function Ip(ep,_f){var op=ep.getIndex();if(op===null){var rp=[],up=ep.getAttribute("position");if(up===void 0)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ep;for(var cp=0;cp<up.count;cp++)rp.push(cp);ep.setIndex(rp),op=ep.getIndex()}var fp=op.count-2,vp=[];if(_f===t$1.TriangleFanDrawMode)for(cp=1;cp<=fp;cp++)vp.push(op.getX(0)),vp.push(op.getX(cp)),vp.push(op.getX(cp+1));else for(cp=0;cp<fp;cp++)cp%2==0?(vp.push(op.getX(cp)),vp.push(op.getX(cp+1)),vp.push(op.getX(cp+2))):(vp.push(op.getX(cp+2)),vp.push(op.getX(cp+1)),vp.push(op.getX(cp)));vp.length/3!==fp&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var xp=ep.clone();return xp.setIndex(vp),xp}return Ep.prototype.parse=function(ep,_f){var op=this,rp=this.json,up=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(cp){var fp={scene:cp[0][rp.scene||0],scenes:cp[0],animations:cp[1],cameras:cp[2],asset:rp.asset,parser:op,userData:{}};gp(up,fp,rp),Rp(fp,rp),ep(fp)}).catch(_f)},Ep.prototype.markDefs=function(){for(var ep=this.json.nodes||[],_f=this.json.skins||[],op=this.json.meshes||[],rp={},up={},cp=0,fp=_f.length;cp<fp;cp++)for(var vp=_f[cp].joints,xp=0,mp=vp.length;xp<mp;xp++)ep[vp[xp]].isBone=!0;for(var sp=0,lp=ep.length;sp<lp;sp++){var $p=ep[sp];$p.mesh!==void 0&&(rp[$p.mesh]===void 0&&(rp[$p.mesh]=up[$p.mesh]=0),rp[$p.mesh]++,$p.skin!==void 0&&(op[$p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=rp,this.json.meshUses=up},Ep.prototype.getDependency=function(ep,_f){var op=ep+":"+_f,rp=this.cache.get(op);if(!rp){switch(ep){case"scene":rp=this.loadScene(_f);break;case"node":rp=this.loadNode(_f);break;case"mesh":rp=this.loadMesh(_f);break;case"accessor":rp=this.loadAccessor(_f);break;case"bufferView":rp=this.loadBufferView(_f);break;case"buffer":rp=this.loadBuffer(_f);break;case"material":rp=this.loadMaterial(_f);break;case"texture":rp=this.loadTexture(_f);break;case"skin":rp=this.loadSkin(_f);break;case"animation":rp=this.loadAnimation(_f);break;case"camera":rp=this.loadCamera(_f);break;case"light":rp=this.extensions[Tu.KHR_LIGHTS_PUNCTUAL].loadLight(_f);break;default:throw new Error("Unknown type: "+ep)}this.cache.add(op,rp)}return rp},Ep.prototype.getDependencies=function(ep){var _f=this.cache.get(ep);if(!_f){var op=this,rp=this.json[ep+(ep==="mesh"?"es":"s")]||[];_f=Promise.all(rp.map(function(up,cp){return op.getDependency(ep,cp)})),this.cache.add(ep,_f)}return _f},Ep.prototype.loadBuffer=function(ep){var _f=this.json.buffers[ep],op=this.fileLoader;if(_f.type&&_f.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+_f.type+" buffer type is not supported.");if(_f.uri===void 0&&ep===0)return Promise.resolve(this.extensions[Tu.KHR_BINARY_GLTF].body);var rp=this.options;return new Promise(function(up,cp){op.load(Ap(_f.uri,rp.path),up,void 0,function(){cp(new Error('THREE.GLTFLoader: Failed to load buffer "'+_f.uri+'".'))})})},Ep.prototype.loadBufferView=function(ep){var _f=this.json.bufferViews[ep];return this.getDependency("buffer",_f.buffer).then(function(op){var rp=_f.byteLength||0,up=_f.byteOffset||0;return op.slice(up,up+rp)})},Ep.prototype.loadAccessor=function(ep){var _f=this,op=this.json,rp=this.json.accessors[ep];if(rp.bufferView===void 0&&rp.sparse===void 0)return Promise.resolve(null);var up=[];return rp.bufferView!==void 0?up.push(this.getDependency("bufferView",rp.bufferView)):up.push(null),rp.sparse!==void 0&&(up.push(this.getDependency("bufferView",rp.sparse.indices.bufferView)),up.push(this.getDependency("bufferView",rp.sparse.values.bufferView))),Promise.all(up).then(function(cp){var fp,vp,xp=cp[0],mp=Xu[rp.type],sp=_d[rp.componentType],lp=sp.BYTES_PER_ELEMENT,$p=lp*mp,Mp=rp.byteOffset||0,kp=rp.bufferView!==void 0?op.bufferViews[rp.bufferView].byteStride:void 0,Vp=rp.normalized===!0;if(kp&&kp!==$p){var Gp=Math.floor(Mp/kp),qp="InterleavedBuffer:"+rp.bufferView+":"+rp.componentType+":"+Gp+":"+rp.count,Wp=_f.cache.get(qp);Wp||(fp=new sp(xp,Gp*kp,rp.count*kp/lp),Wp=new t$1.InterleavedBuffer(fp,kp/lp),_f.cache.add(qp,Wp)),vp=new t$1.InterleavedBufferAttribute(Wp,mp,Mp%kp/lp,Vp)}else fp=xp===null?new sp(rp.count*mp):new sp(xp,Mp,rp.count*mp),vp=new t$1.BufferAttribute(fp,mp,Vp);if(rp.sparse!==void 0){var Yp=Xu.SCALAR,Kp=_d[rp.sparse.indices.componentType],ev=rp.sparse.indices.byteOffset||0,Xp=rp.sparse.values.byteOffset||0,Zp=new Kp(cp[1],ev,rp.sparse.count*Yp),Tp=new sp(cp[2],Xp,rp.sparse.count*mp);xp!==null&&(vp=new t$1.BufferAttribute(vp.array.slice(),vp.itemSize,vp.normalized));for(var Jp=0,nv=Zp.length;Jp<nv;Jp++){var ov=Zp[Jp];if(vp.setX(ov,Tp[Jp*mp]),mp>=2&&vp.setY(ov,Tp[Jp*mp+1]),mp>=3&&vp.setZ(ov,Tp[Jp*mp+2]),mp>=4&&vp.setW(ov,Tp[Jp*mp+3]),mp>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return vp})},Ep.prototype.loadTexture=function(ep){var _f,op=this,rp=this.json,up=this.options,cp=this.textureLoader,fp=self.URL||self.webkitURL,vp=rp.textures[ep],xp=vp.extensions||{},mp=(_f=xp[Tu.MSFT_TEXTURE_DDS]?rp.images[xp[Tu.MSFT_TEXTURE_DDS].source]:rp.images[vp.source]).uri,sp=!1;return _f.bufferView!==void 0&&(mp=op.getDependency("bufferView",_f.bufferView).then(function(lp){sp=!0;var $p=new Blob([lp],{type:_f.mimeType});return mp=fp.createObjectURL($p)})),Promise.resolve(mp).then(function(lp){var $p=up.manager.getHandler(lp);return $p||($p=xp[Tu.MSFT_TEXTURE_DDS]?op.extensions[Tu.MSFT_TEXTURE_DDS].ddsLoader:cp),new Promise(function(Mp,kp){$p.load(Ap(lp,up.path),Mp,void 0,kp)})}).then(function(lp){sp===!0&&fp.revokeObjectURL(mp),lp.flipY=!1,vp.name&&(lp.name=vp.name),_f.mimeType in hp&&(lp.format=hp[_f.mimeType]);var $p=(rp.samplers||{})[vp.sampler]||{};return lp.magFilter=tp[$p.magFilter]||t$1.LinearFilter,lp.minFilter=tp[$p.minFilter]||t$1.LinearMipmapLinearFilter,lp.wrapS=Ku[$p.wrapS]||t$1.RepeatWrapping,lp.wrapT=Ku[$p.wrapT]||t$1.RepeatWrapping,op.associations.set(lp,{type:"textures",index:ep}),lp})},Ep.prototype.assignTexture=function(ep,_f,op){var rp=this;return this.getDependency("texture",op.index).then(function(up){if(!up.isCompressedTexture)switch(_f){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":up.format=t$1.RGBFormat}if(op.texCoord===void 0||op.texCoord==0||_f==="aoMap"&&op.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+op.texCoord+" for texture "+_f+" not yet supported."),rp.extensions[Tu.KHR_TEXTURE_TRANSFORM]){var cp=op.extensions!==void 0?op.extensions[Tu.KHR_TEXTURE_TRANSFORM]:void 0;if(cp){var fp=this.associations.get(up);up=rp.extensions[Tu.KHR_TEXTURE_TRANSFORM].extendTexture(up,cp),this.associations.set(up,fp)}}ep[_f]=up})},Ep.prototype.assignFinalMaterial=function(ep){var _f=ep.geometry,op=ep.material,rp=_f.attributes.tangent!==void 0,up=_f.attributes.color!==void 0,cp=_f.attributes.normal===void 0,fp=ep.isSkinnedMesh===!0,vp=Object.keys(_f.morphAttributes).length>0,xp=vp&&_f.morphAttributes.normal!==void 0;if(ep.isPoints){var mp="PointsMaterial:"+op.uuid,sp=this.cache.get(mp);sp||(sp=new t$1.PointsMaterial,t$1.Material.prototype.copy.call(sp,op),sp.color.copy(op.color),sp.map=op.map,sp.sizeAttenuation=!1,this.cache.add(mp,sp)),op=sp}else if(ep.isLine){mp="LineBasicMaterial:"+op.uuid;var lp=this.cache.get(mp);lp||(lp=new t$1.LineBasicMaterial,t$1.Material.prototype.copy.call(lp,op),lp.color.copy(op.color),this.cache.add(mp,lp)),op=lp}if(rp||up||cp||fp||vp){mp="ClonedMaterial:"+op.uuid+":",op.isGLTFSpecularGlossinessMaterial&&(mp+="specular-glossiness:"),fp&&(mp+="skinning:"),rp&&(mp+="vertex-tangents:"),up&&(mp+="vertex-colors:"),cp&&(mp+="flat-shading:"),vp&&(mp+="morph-targets:"),xp&&(mp+="morph-normals:");var $p=this.cache.get(mp);$p||($p=op.clone(),fp&&($p.skinning=!0),rp&&($p.vertexTangents=!0),up&&($p.vertexColors=!0),cp&&($p.flatShading=!0),vp&&($p.morphTargets=!0),xp&&($p.morphNormals=!0),this.cache.add(mp,$p),this.associations.set($p,this.associations.get(op))),op=$p}op.aoMap&&_f.attributes.uv2===void 0&&_f.attributes.uv!==void 0&&_f.setAttribute("uv2",_f.attributes.uv),op.normalScale&&!rp&&(op.normalScale.y=-op.normalScale.y),op.clearcoatNormalScale&&!rp&&(op.clearcoatNormalScale.y=-op.clearcoatNormalScale.y),ep.material=op},Ep.prototype.loadMaterial=function(ep){var _f,op=this,rp=this.json,up=this.extensions,cp=rp.materials[ep],fp={},vp=cp.extensions||{},xp=[];if(vp[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var mp=up[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];_f=mp.getMaterialType(),xp.push(mp.extendParams(fp,cp,op))}else if(vp[Tu.KHR_MATERIALS_UNLIT]){var sp=up[Tu.KHR_MATERIALS_UNLIT];_f=sp.getMaterialType(),xp.push(sp.extendParams(fp,cp,op))}else{_f=t$1.MeshStandardMaterial;var lp=cp.pbrMetallicRoughness||{};if(fp.color=new t$1.Color(1,1,1),fp.opacity=1,Array.isArray(lp.baseColorFactor)){var $p=lp.baseColorFactor;fp.color.fromArray($p),fp.opacity=$p[3]}lp.baseColorTexture!==void 0&&xp.push(op.assignTexture(fp,"map",lp.baseColorTexture)),fp.metalness=lp.metallicFactor!==void 0?lp.metallicFactor:1,fp.roughness=lp.roughnessFactor!==void 0?lp.roughnessFactor:1,lp.metallicRoughnessTexture!==void 0&&(xp.push(op.assignTexture(fp,"metalnessMap",lp.metallicRoughnessTexture)),xp.push(op.assignTexture(fp,"roughnessMap",lp.metallicRoughnessTexture)))}cp.doubleSided===!0&&(fp.side=t$1.DoubleSide);var Mp=cp.alphaMode||_h;if(Mp===ap?(fp.transparent=!0,fp.depthWrite=!1):(fp.transparent=!1,Mp===ip&&(fp.alphaTest=cp.alphaCutoff!==void 0?cp.alphaCutoff:.5)),cp.normalTexture!==void 0&&_f!==t$1.MeshBasicMaterial&&(xp.push(op.assignTexture(fp,"normalMap",cp.normalTexture)),fp.normalScale=new t$1.Vector2(1,1),cp.normalTexture.scale!==void 0&&fp.normalScale.set(cp.normalTexture.scale,cp.normalTexture.scale)),cp.occlusionTexture!==void 0&&_f!==t$1.MeshBasicMaterial&&(xp.push(op.assignTexture(fp,"aoMap",cp.occlusionTexture)),cp.occlusionTexture.strength!==void 0&&(fp.aoMapIntensity=cp.occlusionTexture.strength)),cp.emissiveFactor!==void 0&&_f!==t$1.MeshBasicMaterial&&(fp.emissive=new t$1.Color().fromArray(cp.emissiveFactor)),cp.emissiveTexture!==void 0&&_f!==t$1.MeshBasicMaterial&&xp.push(op.assignTexture(fp,"emissiveMap",cp.emissiveTexture)),vp[Tu.KHR_MATERIALS_CLEARCOAT]){var kp=up[Tu.KHR_MATERIALS_CLEARCOAT];_f=kp.getMaterialType(),xp.push(kp.extendParams(fp,{extensions:vp},op))}return Promise.all(xp).then(function(){var Vp;return Vp=_f===Nu?up[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(fp):new _f(fp),cp.name&&(Vp.name=cp.name),Vp.map&&(Vp.map.encoding=t$1.sRGBEncoding),Vp.emissiveMap&&(Vp.emissiveMap.encoding=t$1.sRGBEncoding),Rp(Vp,cp),op.associations.set(Vp,{type:"materials",index:ep}),cp.extensions&&gp(up,Vp,cp),Vp})},Ep.prototype.loadGeometries=function(ep){var _f=this,op=this.extensions,rp=this.primitiveCache;function up(kp){return op[Tu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(kp,_f).then(function(Vp){return Bp(Vp,kp,_f)})}for(var cp,fp,vp=[],xp=0,mp=ep.length;xp<mp;xp++){var sp,lp=ep[xp],$p=(fp=void 0,(fp=(cp=lp).extensions&&cp.extensions[Tu.KHR_DRACO_MESH_COMPRESSION])?"draco:"+fp.bufferView+":"+fp.indices+":"+Dp(fp.attributes):cp.indices+":"+Dp(cp.attributes)+":"+cp.mode),Mp=rp[$p];Mp?vp.push(Mp.promise):(sp=lp.extensions&&lp.extensions[Tu.KHR_DRACO_MESH_COMPRESSION]?up(lp):Bp(new t$1.BufferGeometry,lp,_f),rp[$p]={primitive:lp,promise:sp},vp.push(sp))}return Promise.all(vp)},Ep.prototype.loadMesh=function(ep){for(var _f,op=this,rp=this.json.meshes[ep],up=rp.primitives,cp=[],fp=0,vp=up.length;fp<vp;fp++){var xp=up[fp].material===void 0?((_f=this.cache).DefaultMaterial===void 0&&(_f.DefaultMaterial=new t$1.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:t$1.FrontSide})),_f.DefaultMaterial):this.getDependency("material",up[fp].material);cp.push(xp)}return cp.push(op.loadGeometries(up)),Promise.all(cp).then(function(mp){for(var sp=mp.slice(0,mp.length-1),lp=mp[mp.length-1],$p=[],Mp=0,kp=lp.length;Mp<kp;Mp++){var Vp,Gp=lp[Mp],qp=up[Mp],Wp=sp[Mp];if(qp.mode===qu||qp.mode===Yu||qp.mode===Ju||qp.mode===void 0)(Vp=rp.isSkinnedMesh===!0?new t$1.SkinnedMesh(Gp,Wp):new t$1.Mesh(Gp,Wp)).isSkinnedMesh!==!0||Vp.geometry.attributes.skinWeight.normalized||Vp.normalizeSkinWeights(),qp.mode===Yu?Vp.geometry=Ip(Vp.geometry,t$1.TriangleStripDrawMode):qp.mode===Ju&&(Vp.geometry=Ip(Vp.geometry,t$1.TriangleFanDrawMode));else if(qp.mode===ju)Vp=new t$1.LineSegments(Gp,Wp);else if(qp.mode===Qu)Vp=new t$1.Line(Gp,Wp);else if(qp.mode===Wu)Vp=new t$1.LineLoop(Gp,Wp);else{if(qp.mode!==Uu)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+qp.mode);Vp=new t$1.Points(Gp,Wp)}Object.keys(Vp.geometry.morphAttributes).length>0&&Sp(Vp,rp),Vp.name=rp.name||"mesh_"+ep,lp.length>1&&(Vp.name+="_"+Mp),Rp(Vp,rp),op.assignFinalMaterial(Vp),$p.push(Vp)}if($p.length===1)return $p[0];var Yp=new t$1.Group;for(Mp=0,kp=$p.length;Mp<kp;Mp++)Yp.add($p[Mp]);return Yp})},Ep.prototype.loadCamera=function(ep){var _f,op=this.json.cameras[ep],rp=op[op.type];if(rp)return op.type==="perspective"?_f=new t$1.PerspectiveCamera(t$1.MathUtils.radToDeg(rp.yfov),rp.aspectRatio||1,rp.znear||1,rp.zfar||2e6):op.type==="orthographic"&&(_f=new t$1.OrthographicCamera(-rp.xmag,rp.xmag,rp.ymag,-rp.ymag,rp.znear,rp.zfar)),op.name&&(_f.name=op.name),Rp(_f,op),Promise.resolve(_f);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Ep.prototype.loadSkin=function(ep){var _f=this.json.skins[ep],op={joints:_f.joints};return _f.inverseBindMatrices===void 0?Promise.resolve(op):this.getDependency("accessor",_f.inverseBindMatrices).then(function(rp){return op.inverseBindMatrices=rp,op})},Ep.prototype.loadAnimation=function(ep){for(var _f=this.json.animations[ep],op=[],rp=[],up=[],cp=[],fp=[],vp=0,xp=_f.channels.length;vp<xp;vp++){var mp=_f.channels[vp],sp=_f.samplers[mp.sampler],lp=mp.target,$p=lp.node!==void 0?lp.node:lp.id,Mp=_f.parameters!==void 0?_f.parameters[sp.input]:sp.input,kp=_f.parameters!==void 0?_f.parameters[sp.output]:sp.output;op.push(this.getDependency("node",$p)),rp.push(this.getDependency("accessor",Mp)),up.push(this.getDependency("accessor",kp)),cp.push(sp),fp.push(lp)}return Promise.all([Promise.all(op),Promise.all(rp),Promise.all(up),Promise.all(cp),Promise.all(fp)]).then(function(Vp){for(var Gp=Vp[0],qp=Vp[1],Wp=Vp[2],Yp=Vp[3],Kp=Vp[4],ev=[],Xp=0,Zp=Gp.length;Xp<Zp;Xp++){var Tp=Gp[Xp],Jp=qp[Xp],nv=Wp[Xp],ov=Yp[Xp],rv=Kp[Xp];if(Tp!==void 0){var hv;switch(Tp.updateMatrix(),Tp.matrixAutoUpdate=!0,_c[rv.path]){case _c.weights:hv=t$1.NumberKeyframeTrack;break;case _c.rotation:hv=t$1.QuaternionKeyframeTrack;break;case _c.position:case _c.scale:default:hv=t$1.VectorKeyframeTrack}var Av=Tp.name?Tp.name:Tp.uuid,xv=ov.interpolation!==void 0?Xc[ov.interpolation]:t$1.InterpolateLinear,wv=[];_c[rv.path]===_c.weights?Tp.traverse(function(wp){wp.isMesh===!0&&wp.morphTargetInfluences&&wv.push(wp.name?wp.name:wp.uuid)}):wv.push(Av);var fv=nv.array;if(nv.normalized){var $v;if(fv.constructor===Int8Array)$v=1/127;else if(fv.constructor===Uint8Array)$v=1/255;else if(fv.constructor==Int16Array)$v=1/32767;else{if(fv.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");$v=1/65535}for(var Tv=new Float32Array(fv.length),yv=0,Cv=fv.length;yv<Cv;yv++)Tv[yv]=fv[yv]*$v;fv=Tv}for(yv=0,Cv=wv.length;yv<Cv;yv++){var Dv=new hv(wv[yv]+"."+_c[rv.path],Jp.array,fv,xv);ov.interpolation==="CUBICSPLINE"&&(Dv.createInterpolant=function(wp){return new Hu(this.times,this.values,this.getValueSize()/3,wp)},Dv.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),ev.push(Dv)}}}var Ev=_f.name?_f.name:"animation_"+ep;return new t$1.AnimationClip(Ev,void 0,ev)})},Ep.prototype.loadNode=function(ep){var _f,op=this.json,rp=this.extensions,up=this,cp=op.meshReferences,fp=op.meshUses,vp=op.nodes[ep];return(_f=[],vp.mesh!==void 0&&_f.push(up.getDependency("mesh",vp.mesh).then(function(xp){var mp;if(cp[vp.mesh]>1){var sp=fp[vp.mesh]++;(mp=xp.clone()).name+="_instance_"+sp}else mp=xp;return vp.weights!==void 0&&mp.traverse(function(lp){if(lp.isMesh)for(var $p=0,Mp=vp.weights.length;$p<Mp;$p++)lp.morphTargetInfluences[$p]=vp.weights[$p]}),mp})),vp.camera!==void 0&&_f.push(up.getDependency("camera",vp.camera)),vp.extensions&&vp.extensions[Tu.KHR_LIGHTS_PUNCTUAL]&&vp.extensions[Tu.KHR_LIGHTS_PUNCTUAL].light!==void 0&&_f.push(up.getDependency("light",vp.extensions[Tu.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(_f)).then(function(xp){var mp;if((mp=vp.isBone===!0?new t$1.Bone:xp.length>1?new t$1.Group:xp.length===1?xp[0]:new t$1.Object3D)!==xp[0])for(var sp=0,lp=xp.length;sp<lp;sp++)mp.add(xp[sp]);if(vp.name&&(mp.userData.name=vp.name,mp.name=t$1.PropertyBinding.sanitizeNodeName(vp.name)),Rp(mp,vp),vp.extensions&&gp(rp,mp,vp),vp.matrix!==void 0){var $p=new t$1.Matrix4;$p.fromArray(vp.matrix),mp.applyMatrix4($p)}else vp.translation!==void 0&&mp.position.fromArray(vp.translation),vp.rotation!==void 0&&mp.quaternion.fromArray(vp.rotation),vp.scale!==void 0&&mp.scale.fromArray(vp.scale);return up.associations.set(mp,{type:"nodes",index:ep}),mp})},Ep.prototype.loadScene=function(){function ep(_f,op,rp,up){var cp=rp.nodes[_f];return up.getDependency("node",_f).then(function(fp){return cp.skin===void 0?fp:up.getDependency("skin",cp.skin).then(function(xp){for(var mp=[],sp=0,lp=(vp=xp).joints.length;sp<lp;sp++)mp.push(up.getDependency("node",vp.joints[sp]));return Promise.all(mp)}).then(function(xp){return fp.traverse(function(mp){if(mp.isMesh){for(var sp=[],lp=[],$p=0,Mp=xp.length;$p<Mp;$p++){var kp=xp[$p];if(kp){sp.push(kp);var Vp=new t$1.Matrix4;vp.inverseBindMatrices!==void 0&&Vp.fromArray(vp.inverseBindMatrices.array,16*$p),lp.push(Vp)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',vp.joints[$p])}mp.bind(new t$1.Skeleton(sp,lp),mp.matrixWorld)}}),fp});var vp}).then(function(fp){op.add(fp);var vp=[];if(cp.children)for(var xp=cp.children,mp=0,sp=xp.length;mp<sp;mp++){var lp=xp[mp];vp.push(ep(lp,fp,rp,up))}return Promise.all(vp)})}return function(_f){var op=this.json,rp=this.extensions,up=this.json.scenes[_f],cp=new t$1.Group;up.name&&(cp.name=up.name),Rp(cp,up),up.extensions&&gp(rp,cp,up);for(var fp=up.nodes||[],vp=[],xp=0,mp=fp.length;xp<mp;xp++)vp.push(ep(fp[xp],cp,op,this));return Promise.all(vp).then(function(){return cp})}}(),_u}(),n$4=function(_u){t$1.Loader.call(this,_u),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};n$4.prototype=Object.assign(Object.create(t$1.Loader.prototype),{constructor:n$4,setDecoderPath:function(_u){return this.decoderPath=_u,this},setDecoderConfig:function(_u){return this.decoderConfig=_u,this},setWorkerLimit:function(_u){return this.workerLimit=_u,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(_u,$u,Tu,Cu){var Pu=new t$1.FileLoader(this.manager);Pu.setPath(this.path),Pu.setResponseType("arraybuffer"),this.crossOrigin==="use-credentials"&&Pu.setWithCredentials(!0),Pu.load(_u,Ru=>{var Lu={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(Ru,Lu).then($u).catch(Cu)},Tu,Cu)},decodeDracoFile:function(_u,$u,Tu,Cu){var Pu={attributeIDs:Tu||this.defaultAttributeIDs,attributeTypes:Cu||this.defaultAttributeTypes,useUniqueIDs:!!Tu};this.decodeGeometry(_u,Pu).then($u)},decodeGeometry:function(_u,$u){for(var Tu in $u.attributeTypes){var Cu=$u.attributeTypes[Tu];Cu.BYTES_PER_ELEMENT!==void 0&&($u.attributeTypes[Tu]=Cu.name)}var Pu,Ru=JSON.stringify($u);if(n$4.taskCache.has(_u)){var Lu=n$4.taskCache.get(_u);if(Lu.key===Ru)return Lu.promise;if(_u.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var Bu=this.workerNextTaskID++,Vu=_u.byteLength,Ou=this._getWorker(Bu,Vu).then(Du=>(Pu=Du,new Promise((ku,Fu)=>{Pu._callbacks[Bu]={resolve:ku,reject:Fu},Pu.postMessage({type:"decode",id:Bu,taskConfig:$u,buffer:_u},[_u])}))).then(Du=>this._createGeometry(Du.geometry));return Ou.catch(()=>!0).then(()=>{Pu&&Bu&&this._releaseTask(Pu,Bu)}),n$4.taskCache.set(_u,{key:Ru,promise:Ou}),Ou},_createGeometry:function(_u){var $u=new t$1.BufferGeometry;_u.index&&$u.setIndex(new t$1.BufferAttribute(_u.index.array,1));for(var Tu=0;Tu<_u.attributes.length;Tu++){var Cu=_u.attributes[Tu],Pu=Cu.name,Ru=Cu.array,Lu=Cu.itemSize;$u.setAttribute(Pu,new t$1.BufferAttribute(Ru,Lu))}return $u},_loadLibrary:function(_u,$u){var Tu=new t$1.FileLoader(this.manager);return Tu.setPath(this.decoderPath),Tu.setResponseType($u),new Promise((Cu,Pu)=>{Tu.load(_u,Cu,void 0,Pu)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var _u=typeof WebAssembly!="object"||this.decoderConfig.type==="js",$u=[];return _u?$u.push(this._loadLibrary("draco_decoder.js","text")):($u.push(this._loadLibrary("draco_wasm_wrapper.js","text")),$u.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all($u).then(Tu=>{var Cu=Tu[0];_u||(this.decoderConfig.wasmBinary=Tu[1]);var Pu=n$4.DRACOWorker.toString(),Ru=["/* draco decoder */",Cu,"","/* worker */",Pu.substring(Pu.indexOf("{")+1,Pu.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ru]))}),this.decoderPending},_getWorker:function(_u,$u){return this._initDecoder().then(()=>{var Tu;return this.workerPool.length<this.workerLimit?((Tu=new Worker(this.workerSourceURL))._callbacks={},Tu._taskCosts={},Tu._taskLoad=0,Tu.postMessage({type:"init",decoderConfig:this.decoderConfig}),Tu.onmessage=function(Cu){var Pu=Cu.data;switch(Pu.type){case"decode":Tu._callbacks[Pu.id].resolve(Pu);break;case"error":Tu._callbacks[Pu.id].reject(Pu);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+Pu.type+'"')}},this.workerPool.push(Tu)):this.workerPool.sort(function(Cu,Pu){return Cu._taskLoad>Pu._taskLoad?-1:1}),(Tu=this.workerPool[this.workerPool.length-1])._taskCosts[_u]=$u,Tu._taskLoad+=$u,Tu})},_releaseTask:function(_u,$u){_u._taskLoad-=_u._taskCosts[$u],delete _u._callbacks[$u],delete _u._taskCosts[$u]},debug:function(){console.log("Task load: ",this.workerPool.map(_u=>_u._taskLoad))},dispose:function(){for(var _u=0;_u<this.workerPool.length;++_u)this.workerPool[_u].terminate();return this.workerPool.length=0,this}}),n$4.DRACOWorker=function(){var _u,$u;function Tu(Cu,Pu,Ru,Lu,Bu,Vu){var Ou,Du,ku=Vu.num_components(),Fu=Ru.num_points()*ku;switch(Bu){case Float32Array:Ou=new Cu.DracoFloat32Array,Pu.GetAttributeFloatForAllPoints(Ru,Vu,Ou),Du=new Float32Array(Fu);break;case Int8Array:Ou=new Cu.DracoInt8Array,Pu.GetAttributeInt8ForAllPoints(Ru,Vu,Ou),Du=new Int8Array(Fu);break;case Int16Array:Ou=new Cu.DracoInt16Array,Pu.GetAttributeInt16ForAllPoints(Ru,Vu,Ou),Du=new Int16Array(Fu);break;case Int32Array:Ou=new Cu.DracoInt32Array,Pu.GetAttributeInt32ForAllPoints(Ru,Vu,Ou),Du=new Int32Array(Fu);break;case Uint8Array:Ou=new Cu.DracoUInt8Array,Pu.GetAttributeUInt8ForAllPoints(Ru,Vu,Ou),Du=new Uint8Array(Fu);break;case Uint16Array:Ou=new Cu.DracoUInt16Array,Pu.GetAttributeUInt16ForAllPoints(Ru,Vu,Ou),Du=new Uint16Array(Fu);break;case Uint32Array:Ou=new Cu.DracoUInt32Array,Pu.GetAttributeUInt32ForAllPoints(Ru,Vu,Ou),Du=new Uint32Array(Fu);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var Nu=0;Nu<Fu;Nu++)Du[Nu]=Ou.GetValue(Nu);return Cu.destroy(Ou),{name:Lu,array:Du,itemSize:ku}}onmessage=function(Cu){var Pu=Cu.data;switch(Pu.type){case"init":_u=Pu.decoderConfig,$u=new Promise(function(Bu){_u.onModuleLoaded=function(Vu){Bu({draco:Vu})},DracoDecoderModule(_u)});break;case"decode":var Ru=Pu.buffer,Lu=Pu.taskConfig;$u.then(Bu=>{var Vu=Bu.draco,Ou=new Vu.Decoder,Du=new Vu.DecoderBuffer;Du.Init(new Int8Array(Ru),Ru.byteLength);try{var ku=function(Nu,Gu,zu,Hu){var Uu,ju,Wu=Hu.attributeIDs,Qu=Hu.attributeTypes,qu=Gu.GetEncodedGeometryType(zu);if(qu===Nu.TRIANGULAR_MESH)Uu=new Nu.Mesh,ju=Gu.DecodeBufferToMesh(zu,Uu);else{if(qu!==Nu.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");Uu=new Nu.PointCloud,ju=Gu.DecodeBufferToPointCloud(zu,Uu)}if(!ju.ok()||Uu.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ju.error_msg());var Yu={index:null,attributes:[]};for(var Ju in Wu){var _d,tp,Ku=self[Qu[Ju]];if(Hu.useUniqueIDs)tp=Wu[Ju],_d=Gu.GetAttributeByUniqueId(Uu,tp);else{if((tp=Gu.GetAttributeId(Uu,Nu[Wu[Ju]]))===-1)continue;_d=Gu.GetAttribute(Uu,tp)}Yu.attributes.push(Tu(Nu,Gu,Uu,Ju,Ku,_d))}if(qu===Nu.TRIANGULAR_MESH){for(var Xu=Uu.num_faces(),Zu=new Uint32Array(3*Xu),_c=new Nu.DracoInt32Array,Xc=0;Xc<Xu;++Xc){Gu.GetFaceFromMesh(Uu,Xc,_c);for(var _h=0;_h<3;++_h)Zu[3*Xc+_h]=_c.GetValue(_h)}Yu.index={array:Zu,itemSize:1},Nu.destroy(_c)}return Nu.destroy(Uu),Yu}(Vu,Ou,Du,Lu),Fu=ku.attributes.map(Nu=>Nu.array.buffer);ku.index&&Fu.push(ku.index.array.buffer),self.postMessage({type:"decode",id:Pu.id,geometry:ku},Fu)}catch(Nu){console.error(Nu),self.postMessage({type:"error",id:Pu.id,error:Nu.message})}finally{Vu.destroy(Du),Vu.destroy(Ou)}})}}},n$4.taskCache=new WeakMap,n$4.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},n$4.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},n$4.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},n$4.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var o$1=function(_u){t$1.CompressedTextureLoader.call(this,_u)};o$1.prototype=Object.assign(Object.create(t$1.CompressedTextureLoader.prototype),{constructor:o$1,parse:function(_u,$u){var Tu={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function Cu(_d){return _d.charCodeAt(0)+(_d.charCodeAt(1)<<8)+(_d.charCodeAt(2)<<16)+(_d.charCodeAt(3)<<24)}function Pu(_d,tp,Ku,Xu){for(var Zu=Ku*Xu*4,_c=new Uint8Array(_d,tp,Zu),Xc=new Uint8Array(Zu),_h=0,ip=0,ap=0;ap<Xu;ap++)for(var hp=0;hp<Ku;hp++){var Ap=_c[ip],gp=_c[++ip],Rp=_c[++ip],Sp=_c[++ip];ip++,Xc[_h]=Rp,Xc[++_h]=gp,Xc[++_h]=Ap,Xc[++_h]=Sp,_h++}return Xc}var Ru,Lu=Cu("DXT1"),Bu=Cu("DXT3"),Vu=Cu("DXT5"),Ou=Cu("ETC1"),Du=new Int32Array(_u,0,31);if(Du[0]!==542327876)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),Tu;if(4&!Du[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),Tu;var ku,Fu=Du[21],Nu=!1;switch(Fu){case Lu:Ru=8,Tu.format=t$1.RGB_S3TC_DXT1_Format;break;case Bu:Ru=16,Tu.format=t$1.RGBA_S3TC_DXT3_Format;break;case Vu:Ru=16,Tu.format=t$1.RGBA_S3TC_DXT5_Format;break;case Ou:Ru=8,Tu.format=t$1.RGB_ETC1_Format;break;default:if(!(Du[22]===32&&16711680&Du[23]&&65280&Du[24]&&255&Du[25]&&4278190080&Du[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(ku=Fu,String.fromCharCode(255&ku,ku>>8&255,ku>>16&255,ku>>24&255))),Tu;Nu=!0,Ru=64,Tu.format=t$1.RGBAFormat}Tu.mipmapCount=1,131072&Du[2]&&$u!==!1&&(Tu.mipmapCount=Math.max(1,Du[7]));var Gu=Du[28];if(Tu.isCubemap=!!(512&Gu),Tu.isCubemap&&(!(1024&Gu)||!(2048&Gu)||!(4096&Gu)||!(8192&Gu)||!(16384&Gu)||!(32768&Gu)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),Tu;Tu.width=Du[4],Tu.height=Du[3];for(var zu=Du[1]+4,Hu=Tu.isCubemap?6:1,Uu=0;Uu<Hu;Uu++)for(var ju=Tu.width,Wu=Tu.height,Qu=0;Qu<Tu.mipmapCount;Qu++){if(Nu)var qu=(Yu=Pu(_u,zu,ju,Wu)).length;else{qu=Math.max(4,ju)/4*Math.max(4,Wu)/4*Ru;var Yu=new Uint8Array(_u,zu,qu)}var Ju={data:Yu,width:ju,height:Wu};Tu.mipmaps.push(Ju),zu+=qu,ju=Math.max(ju>>1,1),Wu=Math.max(Wu>>1,1)}return Tu}});var i=function(_u){function $u(Tu){var Cu=_u.call(this)||this;return Cu.needsRender=!0,Tu&&Tu.children.length&&Cu.add.apply(Cu,Tu.children),Cu.mixer=new a$1.AnimationMixer(Cu),Cu}return e.__extends($u,_u),$u.prototype.clone=function(){var Tu=_u.prototype.clone.call(this,!0),Cu=new a$1.AnimationMixer(Tu);return Tu.mixer=Cu,Tu.needsRender=!0,Tu},$u}(a$1.Group),l$3=function(_u){function $u(Tu){var Cu=_u.call(this,Tu)||this;return Cu.ddsLoader=new o$1(Tu),Cu.dracoLoader=new n$4(Tu),Cu.dracoLoader.setDecoderPath("https://vr-public.realsee-cdn.cn/release/static/image/release/five/gltf/"),Cu}return e.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.load=function(Tu,Cu,Pu,Ru){return _u.prototype.load.call(this,Tu,Cu,Pu,Ru)},$u.prototype.parse=function(Tu,Cu,Pu,Ru){return _u.prototype.parse.call(this,Tu,Cu,function(Lu){var Bu=new i(Lu.scene),Vu=Lu.scenes.map(function(Ou){return Ou===Lu.scene?Bu:new i(Ou)});Pu(Object.assign(Lu,{scene:Bu,scenes:Vu}))},Ru)},$u}(s$2);gltfLoader.DDSLoader=o$1,gltfLoader.DRACOLoader=n$4,GLTFLoader=gltfLoader.GLTFLoader=l$3,gltfLoader.GLTFObject=i,gltfLoader.THREEGLTFLoader=s$2;const a=new GLTFLoader;function f$3(_u){return new Promise(($u,Tu)=>{function Cu(Ru){$u(Ru)}function Pu(Ru){Tu(Ru)}a.load(_u,Cu,void 0,Pu)})}var k$2=Object.defineProperty,E$2=(_u,$u,Tu)=>$u in _u?k$2(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,b$2=(_u,$u,Tu)=>(E$2(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),C$4=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const L$1=new Map,B$1=new Map;class ti extends Ue{constructor($u){super($u),b$2(this,"group",new Group$1),b$2(this,"imagePlaneGroup",new Group$1),b$2(this,"gltfObjectGroup",new Group$1),b$2(this,"enabledModelTagSet",new Set),b$2(this,"temporaryState",{visible:!0}),b$2(this,"TagContainerSvelte"),b$2(this,"loadModel",Tu=>C$4(this,null,function*(){var Cu;const Pu=Tu.data.modelUrl;if(!Pu)return;const Ru=f$3(Pu).then(Vu=>{var Ou,Du,ku,Fu,Nu;const Gu=Object.assign(Vu.scene,{customID:Tu.id,isTagModel:!0,removeEventListener:this.addObjectClickHandler(Tu,Vu.scene,zu=>{console.log("\u{1F436} ==> tag:",Tu),this.hooks.emit("click",{target:"TagModel",tag:Tu,event:zu})})});return Gu.visible=this.getCurrentVisibleState(Tu),new Matrix4().fromArray(Tu.matrix).decompose(Gu.position,Gu.quaternion,Gu.scale),Gu.updateWorldMatrix(!0,!0),Gu.visible=this.getVisibleByFiveMode(Tu),(ku=(Du=(Ou=this.config)==null?void 0:Ou.globalConfig)==null?void 0:Du.modelConfig)!=null&&ku.autoLookAtEnabled&&(Nu=(Fu=Tu.config)==null?void 0:Fu.modelConfig)!=null&&Nu.autoLookAtEnabled&&Gu.lookAt(this.five.camera.position.clone().setY(Gu.position.y)),Gu});Tu.model={promise:Ru};const Lu=yield Ru;if(((Cu=Tu.model)==null?void 0:Cu.promise)!==Ru||!this.tags.includes(Tu))return;Tu.model.object=Lu;const Bu=this.gltfObjectGroup.children.find(Vu=>Vu.customID===Tu.id);if(Bu&&(this.gltfObjectGroup.remove(Bu),Bu.removeEventListener()),this.updateRender3DDomTag(),s$9(Tu)){if(this.getRenderType(Tu)==="Mesh"&&!Tu.mediaPlane){const Vu=Tu.data.mediaPosition.map(c$n);Tu.mediaPlane=new z$7(Tu.data.mediaData[0].url,Tu.data.mediaPosition.map(c$n),{objectFit:Tu.data.objectFit});const Ou=new Vector3().addVectors(Vu[0],Vu[2]).divideScalar(2);Tu.mediaPlane.position.copy(Ou),Lu.add(Tu.mediaPlane)}this.getRenderType(Tu)!=="Mesh"&&(Lu.updateTagCss3DObjectMatrix=()=>this.updateTagCss3DObjectMatrix(Tu,Lu),Lu.updateTagCss3DObjectMatrix())}return this.gltfObjectGroup.add(Lu),Lu})),this.group.name="PanoTagPluginModelGroup",this.gltfObjectGroup.name="PanoTagPluginGLTFObjectGroup",this.imagePlaneGroup.name="ImagePlaneGroup",this.group.add(this.gltfObjectGroup),this.group.add(this.imagePlaneGroup)}clearTags(){this.tags.forEach($u=>{var Tu,Cu;(Cu=(Tu=$u.mediaPlane)==null?void 0:Tu.parent)==null||Cu.remove($u.mediaPlane)}),this.tags=[],this.enabledModelTagSet.clear(),this.clearCache(),this.disposeAllCSS3DContainer(),this.updateRenderAllTags()}updateRenderAllTags(){this.enabledModelTagSet.clear(),this.tags.forEach($u=>$u.stickType==="Model"&&this.enabledModelTagSet.add($u.id)),this.updateRenderPointTag(),this.updateRender3DDomTag(),this.updateRenderModelTag(),this.updateRenderImagePlane()}updateRenderImagePlane(){this.sort(this.filterImagePlane).forEach($u=>{var Tu,Cu,Pu,Ru,Lu;const Bu=$u.data.mediaData[0];if(!Bu)return;const{url:Vu,type:Ou}=Bu;if(!Vu||($u.mediaPlane&&($u.mediaPlane.visible=(Cu=(Tu=$u.state)==null?void 0:Tu.visible)!=null?Cu:!0,$u.mediaPlane.visible||$u.mediaPlane instanceof G$6&&((Pu=$u.data.autoplayConfig)!=null&&Pu.autoplayVideo||$u.mediaPlane.pause())),((Ru=$u.mediaPlane)==null?void 0:Ru.src)===Vu))return;const Du=$u.position.map(c$n);if($u.mediaPlane&&$u.mediaPlane.removeFromParent(),Ou==="Image")$u.mediaPlane=new z$7(Vu,Du,{objectFit:$u.data.objectFit}),this.domEvents.addAutoBindEventListener($u.mediaPlane,"click",ku=>{this.hooks.emit("click",{tag:$u,target:"TagContent",event:ku.origDomEvent})});else if(Ou==="Video"){const ku=new G$6(Vu,Du,{videoCoverSrc:Bu.videoCoverUrl,playButton:$u.data.playIcon,paused:!((Lu=$u.data.autoplayConfig)!=null&&Lu.autoplayVideo),objectFit:$u.data.objectFit,videoTextureMap:L$1,ImageTextureMap:B$1});ku.onVideoReady=Nu=>{Nu.addEventListener("play",()=>this.mediaStore.set({currentMediaElement:ku.videoInstance}))},ku.initialDomEvents(this.domEvents);const Fu=Nu=>(this.five.on("renderFrame",Nu),()=>this.five.off("renderFrame",Nu));ku.initialRenderHooks(Fu),$u.mediaPlane=ku}this.imagePlaneGroup.add($u.mediaPlane)})}updateRender3DDomTag(){this.sort([...this.filterCSS3DTag]).forEach($u=>{var Tu,Cu,Pu,Ru;if($u.tag3DContentSvelte){const{svelteApp:Lu,css3DInstance:Bu,initialNormal:Vu,currentNormal:Ou}=$u.tag3DContentSvelte;if(Lu.$set({tag:$u,hooks:this.hooks,state:this.state,temporaryState:this.temporaryState}),!Vu.equals(Ou)){const Du=new Quaternion().setFromUnitVectors(Vu,Ou);Bu.css3DObject.setRotationFromQuaternion(Du)}return}else{if(s$9($u)&&!((Tu=$u.model)!=null&&Tu.object)||((Cu=$u.state)==null?void 0:Cu.visible)===!1||!this.state.visible||!this.state.enabled)return;if(this.css3DRenderPlugin||(this.css3DRenderPlugin=P$c(this.five)),$u.stickType==="3DPoint"&&!$u.normal)return console.error("updateRenderPlaneTag: \u4E09\u7EF4\u70B9\u6807\u7B7E\u7F3A\u5C11\u6CD5\u5411\u91CF\uFF01");const Lu=this.getPositions($u);if(!Lu)return;const Bu=this.getTagNormal($u);if(!Bu)return;const Vu=(Pu=this.getTagConfig($u).tag3DConfig)!=null?Pu:{};if(this.getRenderType($u)==="BehindDom"){Vu.mode="behind",Vu.container=document.createElement("div");const ku="black";Vu.container.style.backgroundColor=ku,Vu.container.style.border=`3px solid ${ku}`,this.css3DRenderPlugin.hooks.on("render",()=>{var Fu;if(Ou.css3DObject.opacityMesh){const Nu=this.addObjectClickHandler($u,Ou.css3DObject.opacityMesh,Gu=>{this.hooks.emit("click",{event:Gu,target:"TagContent",tag:$u})});(Fu=this.store.css3DRenderDisposer.get($u.id))==null||Fu.push(Nu)}})}const Ou=this.css3DRenderPlugin.create3DDomContainer(Lu,Vu);if(!Ou)return;this.store.css3DRenderDisposer.set($u.id,[Ou.dispose]);const Du=new rt$1({target:Ou.container,props:{tag:$u,hooks:this.hooks,state:this.state,mediaStore:this.mediaStore,temporaryState:this.temporaryState}});$u.tag3DContentSvelte={svelteApp:Du,domContainer:Ou,css3DInstance:Ou,initialNormal:Bu,currentNormal:Bu,dispose:()=>{Du.$destroy(),Ou.dispose()}},s$9($u)&&(Ru=$u.model)!=null&&Ru.object&&this.updateTagCss3DObjectMatrix($u,$u.model.object)}}),this.clearUnusedPanelTag()}updateRenderModelTag(){const $u=Cu=>!this.enabledModelTagSet.has(Cu.customID),Tu=this.gltfObjectGroup.children.filter($u);Tu.forEach(Cu=>Cu.removeEventListener()),this.gltfObjectGroup.remove(...Tu),this.tags.filter(Cu=>Cu.stickType==="Model").forEach(Cu=>{var Pu;(Pu=Cu.model)==null||Pu.promise.then(Ru=>{Ru.visible=this.getCurrentVisibleState(Cu)})}),this.five.needsRender=!0}updateTagModelVisible(){this.tags.forEach($u=>{var Tu;$u.mediaPlane&&($u.mediaPlane.visible=this.getCurrentVisibleState($u)),(Tu=$u.model)!=null&&Tu.object&&($u.model.object.visible=this.getCurrentVisibleState($u))})}updateTagCss3DObjectMatrix($u,Tu){var Cu,Pu,Ru,Lu;const Bu=(Ru=(Pu=(Cu=$u.mergedConfig)==null?void 0:Cu.tag3DConfig)==null?void 0:Pu.ratio)!=null?Ru:.00216,Vu=(Lu=$u.tag3DContentSvelte)==null?void 0:Lu.css3DInstance.css3DObject;if(!Vu)return;const Ou=s$9($u)?$u.data.mediaPosition:$u.position;Tu.updateWorldMatrix(!1,!1);const Du=Tu.matrixWorld,ku=new Vector3().fromArray(Ou[0]),Fu=new Vector3().fromArray(Ou[2]),Nu=c$l(ku,Fu).add(new Vector3(0,0,5e-4)),Gu=new Matrix4().setPosition(Nu),zu=new Matrix4().makeScale(Bu,Bu,Bu),Hu=new Matrix4().multiply(Du).multiply(Gu).multiply(zu);Hu.decompose(Vu.position,Vu.quaternion,Vu.scale);const Uu=Vu.opacityMesh;Uu&&Hu.decompose(Uu.position,Uu.quaternion,Uu.scale)}addMediaModelTag($u){return C$4(this,null,function*(){const Tu=$u.filter(u$a).map(Cu=>this.loadModel(Cu));yield Promise.all(Tu),this.setModelMedialVisible(),this.updateRenderAllTags()})}updateRenderPointTag(){var $u;const Tu=this.filterPointTag;if(this.setTagZIndex(Tu),this.setPointTagPosition(),this.TagContainerSvelte)this.TagContainerSvelte.$set({tags:Tu,state:this.state,temporaryState:this.temporaryState});else{const Cu=($u=this.five.getElement())==null?void 0:$u.parentElement;if(!Cu)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new vi({target:Cu,props:{hooks:this.hooks,tags:Tu,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore}})}}updateTagContainerVisible(){var $u;($u=this.TagContainerSvelte)==null||$u.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation}),this.filterCSS3DTag.forEach(Tu=>{var Cu,Pu,Ru,Lu,Bu;(Lu=(Pu=(Cu=Tu.tag3DContentSvelte)==null?void 0:Cu.css3DInstance)==null?void 0:Pu.css3DObject)==null||Lu.setVisible((this.state.visible&&((Ru=Tu.state)==null?void 0:Ru.visible))!==!1),(Bu=Tu.tag3DContentSvelte)==null||Bu.svelteApp.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation})})}disposeAllCSS3DContainer(){for(const[$u,Tu]of this.store.css3DRenderDisposer)Tu==null||Tu.forEach(Cu=>Cu==null?void 0:Cu());this.store.css3DRenderDisposer=new Map}clearUnusedPanelTag(){this.filter2DPointTag.forEach($u=>{var Tu;(Tu=$u.tag3DContentSvelte)==null||Tu.css3DInstance.dispose(),$u.tag3DContentSvelte=void 0});for(const[$u,Tu]of this.store.css3DRenderDisposer){const Cu=this.getTagById($u);(!Cu||Cu.stickType==="2DPoint")&&(Tu==null||Tu.forEach(Pu=>Pu==null?void 0:Pu()),this.store.css3DRenderDisposer.delete($u))}}}var E$1=Object.defineProperty,F$2=Object.defineProperties,w$2=Object.getOwnPropertyDescriptors,C$3=Object.getOwnPropertySymbols,U$1=Object.prototype.hasOwnProperty,I$2=Object.prototype.propertyIsEnumerable,v$2=(_u,$u,Tu)=>$u in _u?E$1(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,l$2=(_u,$u)=>{for(var Tu in $u||($u={}))U$1.call($u,Tu)&&v$2(_u,Tu,$u[Tu]);if(C$3)for(var Tu of C$3($u))I$2.call($u,Tu)&&v$2(_u,Tu,$u[Tu]);return _u},u$3=(_u,$u)=>F$2(_u,w$2($u)),g$3=(_u,$u,Tu)=>(v$2(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),f$2=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const M$3="Dnalogel-PanoTagPlugin";class ci extends ti{constructor($u,Tu){super($u),g$3(this,"state",{enabled:!0,visible:!0}),g$3(this,"params"),g$3(this,"debug"),g$3(this,"changeTagModel",(Cu,Pu)=>f$2(this,null,function*(){Cu.data=a$9({},Cu.data,Pu),yield this.loadModel(Cu),this.updateRenderAllTags()})),g$3(this,"handleFiveInitAnimationEnded",()=>{const Cu=this.five.getCurrentState().mode;this.tags.forEach(Pu=>{s$9(Pu)&&Cu==="Panorama"&&this.changeTagMode(Pu,"front"),Pu.state.visible=this.getVisible(Pu)}),this.updateRenderAllTags()}),g$3(this,"handleFiveModelShownFloorChange",()=>{this.tags.forEach(Cu=>{var Pu,Ru;const Lu=this.getTagConfig(Cu).visibleConfig;typeof Lu=="object"&&((Pu=Lu.visibleFiveMode)!=null&&Pu.includes("Floorplan")||(Ru=Lu.visibleFiveMode)!=null&&Ru.includes("Mapview"))&&(Cu.state.visible=this.getVisibleByFiveMode(Cu))}),this.updateRenderAllTags()}),this.params=a$9({},{debug:!1,config:this.config},l$2({},Tu)),this.debug=this.params.debug,this.config=this.params.config,m$8(1,{namespace:d$c.PlayAudio});try{const Cu=window;Array.isArray(Cu.__PANOTAGPLUGIN_DEBUG_LIST__)||(Cu.__PANOTAGPLUGIN_DEBUG_LIST__=[]),Cu.__PANOTAGPLUGIN_DEBUG_LIST__.push(this),Cu.__PANOTAGPLUGIN_DEBUG__=this}catch{}}load($u,Tu){return f$2(this,null,function*(){var Cu,Pu;this.clearTags(),console.debug(M$3," load:",{data:JSON.parse(JSON.stringify($u))}),this.config=a$9({},this.config,{globalConfig:(Cu=$u.globalConfig)!=null?Cu:{},contentTypeConfig:(Pu=$u.contentTypeConfig)!=null?Pu:{}});const Ru=yield this.addTag($u.tagList,Tu);if(this.debug)try{M$g(this.five,this.tags)}catch(Lu){console.error(Lu)}return Ru})}addTag($u,Tu){return f$2(this,null,function*(){const Cu=(Array.isArray($u)?$u:[$u]).map(Pu=>{var Ru;const Lu=this.getTagConfig(Pu);return u$3(l$2({},Pu),{id:(Ru=Pu.id)!=null?Ru:r$k(),data:a$9({},Lu.initialData,Pu.data),state:l$2({visible:void 0,unfolded:!this.can("fold",Pu)},Lu.initialState),hooks:new Subscribe,mergedConfig:Lu,unfold:()=>this.changeUnfoldedById(Pu.id,!0),fold:()=>this.changeUnfoldedById(Pu.id,!1),enable:()=>this.changeEnabledById(Pu.id,!0),disable:()=>this.changeEnabledById(Pu.id,!1),destroy:()=>this.destroyTagById(Pu.id)})}).filter(Pu=>Pu.position);return Cu.forEach(r$a),this.tags.push(...Cu),l$a(this.five).then(()=>f$2(this,null,function*(){var Pu,Ru,Lu;this.store.eventListenerDisposer&&((Ru=(Pu=this.store).eventListenerDisposer)==null||Ru.call(Pu)),this.state.enabled&&this.handleEnable(),this.addResizeListener(),this.clearUnusedPanelTag(),this.setVisibleAndUnfolded({withAnimation:(Lu=Tu==null?void 0:Tu.withAnimation)!=null?Lu:!0}).then(()=>this.updateRenderAllTags()),this.updateRenderAllTags(),yield this.addMediaModelTag(Cu)}))})}changeConfig($u,Tu=!0){Tu?this.config=a$9({},this.config,$u):this.config=$u,this.updateTagConfig({force:!0}),this.updateRenderAllTags()}changeGlobalConfig($u,Tu=!0){Tu?this.config.globalConfig=a$9({},this.config.globalConfig,$u):this.config.globalConfig=$u,this.updateTagConfig({force:!0}),this.updateRenderAllTags()}changeContentTypeConfig($u,Tu,Cu=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),Cu?this.config.contentTypeConfig[$u]=a$9({},this.config.contentTypeConfig[$u],Tu):this.config.contentTypeConfig[$u]=Tu,this.updateTagConfig({force:!0}),this.updateRenderAllTags()}show($u){return f$2(this,null,function*(){if(this.checkDisposed())return;const{userAction:Tu=!0,withAnimation:Cu=!1}=$u!=null?$u:{};this.setState({visible:!0},{userAction:Tu,visibleWithAnimation:Cu}),this.hooks.emit("show",{userAction:Tu,withAnimation:Cu})})}hide($u){return f$2(this,null,function*(){if(this.checkDisposed())return;const{userAction:Tu=!0,withAnimation:Cu=!1}=$u!=null?$u:{};this.setState({visible:!1},{userAction:Tu,visibleWithAnimation:Cu}),this.hooks.emit("hide",{userAction:Tu,withAnimation:Cu})})}enable($u){if(this.checkDisposed())return;const{userAction:Tu=!0}=$u!=null?$u:{};this.setState({enabled:!0},{userAction:Tu}),this.hooks.emit("enable",{userAction:Tu})}disable($u){if(this.checkDisposed())return;const{userAction:Tu=!0}=$u!=null?$u:{};this.setState({enabled:!1},{userAction:Tu}),this.hooks.emit("disable",{userAction:Tu})}setState($u,Tu){if(this.checkDisposed())return;const{userAction:Cu=!0,visibleWithAnimation:Pu=!1}=Tu,Ru=l$2({},this.state);this.state=Object.assign(this.state,$u),this.store.visibleWithAnimation=Pu,Ru.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Ru.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Ru,userAction:Cu})}dispose(){var $u,Tu,Cu,Pu,Ru,Lu;this.pauseCurrentMedia(),this.disposeAllCSS3DContainer(),($u=this.TagContainerSvelte)==null||$u.$destroy(),this.filterCSS3DTag.forEach(Bu=>{var Vu;return(Vu=Bu.tag3DContentSvelte)==null?void 0:Vu.svelteApp.$destroy()}),this.tags=[],(Tu=this.store.disposers)==null||Tu.forEach(Bu=>Bu==null?void 0:Bu()),this.store.disposers=[],(Pu=(Cu=this.store).eventListenerDisposer)==null||Pu.call(Cu),this.store.eventListenerDisposer=void 0,(Lu=(Ru=this.store).resizeObserverDisposer)==null||Lu.call(Ru),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.five.scene.remove(this.group),this.group.remove(...this.group.children),this.gltfObjectGroup.remove(...this.gltfObjectGroup.children),this.imagePlaneGroup.remove(...this.imagePlaneGroup.children),this.clearCache(),this.five.needsRender=!0,this.store.disposed=!0,this.hooks.emit("dispose")}changeUnfoldedById($u,Tu){var Cu;const Pu=this.getTagById($u);if(!Pu)return;const Ru=this.can("fold",Pu),Lu=this.can("unfold",Pu);if(Ru&&Lu){Pu.state.unfolded=Tu;const Bu=this.filterPointTag;(Cu=this.TagContainerSvelte)==null||Cu.$set({tags:Bu})}else console.warn(`tag ${$u} cannot be ${Tu?"unfolded":"folded"}`)}changeEnabledById($u,Tu){const Cu=this.getTagById($u);Cu&&(Cu.enabled=Tu,this.updateRenderAllTags())}changeTagNormalById($u,Tu){const Cu=this.getTagById($u);Cu&&Cu.tag3DContentSvelte&&(Cu.tag3DContentSvelte.currentNormal=c$n(Tu))}changeDataById($u,Tu,Cu=!0){const Pu=this.getTagById($u);Pu&&(Cu?Pu.data=a$9({},Pu.data,Tu):Pu.data=l$2(l$2({},Pu.data),Tu),this.clearUnusedPanelTag(),this.updateRenderAllTags())}changeStickTypeById($u,Tu,Cu=!0){this.changeTagById($u,Tu,Cu)}changeTagById($u,Tu,Cu=!0){const Pu=this.getTagById($u);Tu&&(Cu?a$9(Pu,Tu):Object.assign(Pu,Tu),Pu!=null&&Pu.tag3DContentSvelte&&Tu!=null&&Tu.normal&&(Pu.tag3DContentSvelte.currentNormal=c$n(Tu.normal)),this.updateRenderAllTags(),this.clearUnusedPanelTag())}destroyTagById($u){(Array.isArray($u)?$u:[$u]).forEach(Tu=>{const Cu=this.tags.findIndex(Pu=>Pu.id===Tu);Cu!==-1&&this.tags.splice(Cu,1)}),this.updateRenderAllTags()}setVisibleAndUnfolded(){return f$2(this,arguments,function*({withAnimation:$u}={withAnimation:!1}){if(this.isPanorama)return this.setVisible(),$u?new Promise(Tu=>{setTimeout(()=>{this.setUnfoldedByPanoIndex(),Tu()},10)}):(this.setUnfoldedByPanoIndex(),Promise.resolve())})}handleShow(){this.state.visible=!0,this.group.visible=!0,this.updateTagContainerVisible(),this.updateTagModelVisible(),this.five.needsRender=!0}handleHide(){this.pauseCurrentMedia(),this.state.visible=!1,this.group.visible=!1,this.updateTagContainerVisible(),this.updateTagModelVisible(),this.five.needsRender=!0}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.five.scene.children.includes(this.group)||this.five.scene.add(this.group),this.group.traverse($u=>{var Tu;(Tu=$u==null?void 0:$u.updateTagCss3DObjectMatrix)==null||Tu.call($u)}),this.updateRenderAllTags(),this.five.needsRender=!0}handleDisable(){var $u,Tu,Cu;this.pauseCurrentMedia(),this.state.enabled=!1,(Tu=($u=this.store).eventListenerDisposer)==null||Tu.call($u),this.five.scene.remove(this.group),(Cu=this.TagContainerSvelte)==null||Cu.$set({tags:[]}),this.filterCSS3DTag.forEach(Pu=>{var Ru;(Ru=Pu.tag3DContentSvelte)==null||Ru.dispose(),Pu.tag3DContentSvelte=void 0}),this.five.needsRender=!0}addEventListener(){const{five:$u,hooks:Tu}=this,Cu=this.handleFiveWantsMoveToPano.bind(this),Pu=this.handleFiveModeChange.bind(this),Ru=this.handleFiveCameraUpdate.bind(this),Lu=this.handleFiveCameraUpdateDebounce(),Bu=this.handleFivePanoArrived.bind(this),Vu=this.loadVideoFirstFrame.bind(this),Ou=this.clickhandler.bind(this),Du=this.five.currentMode;return Du&&this.handleFiveModeChange(Du),this.handleFivePanoArrived(),$u.on("wantsMoveToPano",Cu),$u.on("modeChange",Pu),$u.on("initAnimationEnded",this.handleFiveInitAnimationEnded),$u.on("modelShownFloorChange",this.handleFiveModelShownFloorChange),$u.on("cameraUpdate",Ru),$u.on("cameraUpdate",Lu),$u.on("panoArrived",Bu),$u.on("panoArrived",Vu),Tu.on("click",Ou),()=>{$u.off("wantsMoveToPano",Cu),$u.off("modeChange",Pu),$u.off("initAnimationEnded",this.handleFiveInitAnimationEnded),$u.off("modelShownFloorChange",this.handleFiveModelShownFloorChange),$u.off("cameraUpdate",Ru),$u.off("cameraUpdate",Lu),$u.off("panoArrived",Bu),$u.off("panoArrived",Vu),Tu.off("click",Ou),this.store.eventListenerDisposer=void 0}}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const $u=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=$u,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(!this.store.disposed)return;const $u=this.five.getElement(),Tu=()=>{this.state.enabled&&(this.show(),this.updateRenderAllTags())},Cu=()=>{this.state.enabled&&this.hide()},{observe:Pu,unobserve:Ru}=o$b(i$a(()=>{this.store.resizeObserverDisposer&&Cu()},500),$u),{observe:Lu,unobserve:Bu}=o$b(r$b(()=>Tu(),400),$u);return Pu(),Lu(),()=>{Ru(),Bu()}}handleFiveModeChange($u){this.setModelMedialVisible(),this.tags.forEach(Tu=>{s$9(Tu)&&$u!=="Panorama"&&this.changeTagMode(Tu,"behind"),Tu.state.visible=this.getVisible(Tu)}),this.updateRenderAllTags()}handleFiveWantsMoveToPano(){this.tags.forEach($u=>{const Tu=this.getTagConfig($u);typeof Tu.visibleConfig=="object"&&(Tu.visibleConfig.keep?$u.temporaryState=u$3(l$2({},$u.temporaryState),{visible:Tu.visibleConfig.keep==="visible"}):$u.temporaryState=u$3(l$2({},$u.temporaryState),{visible:!!Tu.visibleConfig.alwaysShowWhenMovePano}))}),this.updateTagContainerVisible()}clickhandler($u){if($u.target!=="TagPoint")return;if(!$u.tag.state)return console.warn("Clickhandler: params.tag.state is undefined");const Tu=this.can("fold",$u.tag),Cu=this.can("unfold",$u.tag);Tu&&Cu&&($u.tag.state.unfolded=!$u.tag.state.unfolded,$u.tag.state.unfolded&&this.tags.forEach(Pu=>{Pu.id!==$u.tag.id&&Pu.state&&this.can("fold",Pu)&&(Pu.state.unfolded=!1)}),this.updateRenderAllTags())}handleFiveCameraUpdateDebounce(){return r$b(()=>{this.setUnfoldedByCamera(),this.updateRenderAllTags()},100)}handleFiveCameraUpdate(){this.updateRenderPointTag()}handleFivePanoArrived(){return f$2(this,null,function*(){var $u,Tu,Cu;this.setModelMedialVisible(),yield this.setVisibleAndUnfolded(),this.tags.forEach(Pu=>{Pu.temporaryState=u$3(l$2({},Pu.temporaryState),{visible:!0})}),(Cu=(Tu=($u=this.config)==null?void 0:$u.globalConfig)==null?void 0:Tu.modelConfig)!=null&&Cu.autoLookAtEnabled&&this.tags.filter(r$c).filter(Pu=>{var Ru,Lu;return(Lu=(Ru=Pu.config)==null?void 0:Ru.modelConfig)==null?void 0:Lu.autoLookAtEnabled}).forEach(Pu=>{var Ru;const Lu=new Mesh(new BoxGeometry,new MeshBasicMaterial),Bu=(Ru=Pu.model)==null?void 0:Ru.object;if(!Bu)return;Lu.position.copy(Bu.position),Lu.quaternion.copy(Bu.quaternion);const Vu=this.five.camera.position;Lu.lookAt(Vu.clone().setY(Lu.position.y));const Ou=Bu.quaternion.clone(),Du=Lu.quaternion.clone(),ku=F$7();ku.onUpdate(({progress:Fu})=>{Bu.quaternion.copy(Ou.clone().slerp(Du,Fu))}),ku.play()}),this.store.visibleWithAnimation=!0,this.updateTagContainerVisible(),this.updateRenderAllTags()})}setUnfoldedByCamera(){let $u=!1;this.tags.forEach(Tu=>{const Cu=this.getUnfoldedByCamera(Tu);Tu.state&&Cu!==void 0&&(Cu===!0&&($u=!0),Tu.state.unfolded=Cu)}),$u&&this.tags.forEach(Tu=>{const Cu=this.getTagConfig(Tu).unfoldedConfig;typeof Cu=="object"&&(Cu.autoUnfold||Cu.keep)||Tu.state&&(Tu.state.unfolded=!1)})}changeTagMode($u,Tu){var Cu,Pu,Ru,Lu,Bu,Vu;((Cu=this.getTagConfig($u))==null?void 0:Cu.renderType)!=="Mesh"&&((Lu=(Ru=(Pu=$u.tag3DContentSvelte)==null?void 0:Pu.css3DInstance)==null?void 0:Ru.css3DObject)==null?void 0:Lu.mode)!==Tu&&((Bu=$u.config)!=null&&Bu.tag3DConfig?$u.config.tag3DConfig.mode=Tu:$u.config?$u.config.tag3DConfig={mode:Tu}:$u.config={tag3DConfig:{mode:Tu}},(Vu=this.store.css3DRenderDisposer.get($u.id))==null||Vu.forEach(Ou=>Ou==null?void 0:Ou()),$u.tag3DContentSvelte=void 0)}}function I$1(_u){Qt(_u,"svelte-m8w0ju",".guide-line__tag.svelte-m8w0ju{position:relative}.guide-line__tag-point.svelte-m8w0ju{position:absolute;left:50%;bottom:0.0625rem;width:0.4375rem;height:0.125rem;transform:translateX(-50%);background:#fff;border-radius:50%;opacity:0.5}.guide-line__tag-line.svelte-m8w0ju{position:absolute;left:50%;bottom:0.0625rem;width:0.0625rem;height:1.875rem;transform:translateX(-50%);background:linear-gradient(to top, #fff, rgba(255, 255, 255, 0))}.guide-line__tag-content.svelte-m8w0ju{position:absolute;left:-0.9375rem;bottom:1.9375rem;display:flex}.guide-line__tag-icon.svelte-m8w0ju{width:1.875rem;height:1.875rem;background-size:100%}.guide-line__tag-text.svelte-m8w0ju{box-sizing:content-box;height:0.875rem;width:-moz-max-content;width:max-content;margin-top:0.3125rem;transform:translateX(-0.1875rem);white-space:nowrap;font-size:0.625rem;line-height:0.875rem;border:solid transparent;border-width:0.125rem 0.5rem 0.125rem 0.375rem;border-image-source:url('https://vrlab-static.ljcdn.com/release/web/jsl/test2.2ea9ddee.png');border-image-slice:6 25 6 18 fill;color:#fff}")}function p$1(_u){let $u,Tu;return{c(){$u=U$8("div"),Tu=_t$1(_u[0]),te$1($u,"class","guide-line__tag-text svelte-m8w0ju"),ne($u,"border-image-source",`url(${_u[3]})`)},m(Cu,Pu){Nt(Cu,$u,Pu),dt$1($u,Tu)},p(Cu,Pu){Pu&1&&ee$2(Tu,Cu[0])},d(Cu){Cu&&I$g($u)}}}function j(_u){let $u,Tu,Cu,Pu,Ru,Lu,Bu,Vu,Ou=_u[0]&&p$1(_u);return{c(){$u=U$8("div"),Tu=U$8("div"),Cu=Xt(),Pu=U$8("div"),Ru=Xt(),Lu=U$8("div"),Bu=U$8("div"),Vu=Xt(),Ou&&Ou.c(),te$1(Tu,"class","guide-line__tag-point svelte-m8w0ju"),te$1(Pu,"class","guide-line__tag-line svelte-m8w0ju"),te$1(Bu,"class","guide-line__tag-icon svelte-m8w0ju"),ne(Bu,"background-image",`url(${_u[1]})`),te$1(Lu,"class","guide-line__tag-content svelte-m8w0ju"),te$1($u,"class","guide-line__tag svelte-m8w0ju"),ne($u,"opacity",_u[2])},m(Du,ku){Nt(Du,$u,ku),dt$1($u,Tu),dt$1($u,Cu),dt$1($u,Pu),dt$1($u,Ru),dt$1($u,Lu),dt$1(Lu,Bu),dt$1(Lu,Vu),Ou&&Ou.m(Lu,null)},p(Du,[ku]){ku&2&&ne(Bu,"background-image",`url(${Du[1]})`),Du[0]?Ou?Ou.p(Du,ku):(Ou=p$1(Du),Ou.c(),Ou.m(Lu,null)):Ou&&(Ou.d(1),Ou=null),ku&4&&ne($u,"opacity",Du[2])},i:E$e,o:E$e,d(Du){Du&&I$g($u),Ou&&Ou.d()}}}function k$1(_u,$u,Tu){let{text:Cu=""}=$u,{icon_url:Pu=""}=$u,{opacity:Ru=1}=$u;const Lu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHUAAAA2CAMAAADOFiZMAAACEFBMVEUAAACIiIheXl5oaGh6enpsbGxiYmJ9fX1wcHBXV1eBgYFzc3NSUlKNjY2Dg4NOTk51dXVXV1dmZmZTU1N3d3dcXFyMjIyEhIRNTU2QkJC0tLS5ubnHx8fOzs6np6exsbHKysqoqKi9vb3U1NTPz8/Nzc2vr6/Dw8OysrK/v7/X19fS0tKurq62traqqqrJycmurq64uLifn5/Dw8O6urqQkJC6urro6Ojt7e3o6OjU1NS3t7fBwcGjo6Ozs7Orq6u1tbXAwMCurq6rq6vy8vLx8fHr6+vp6enZ2dnd3d3a2trX19fV1dW/v7/IyMihoaGampqVlZWLi4uCgoK+vr6urq7m5ubw8PDk5OTu7u7i4uLg4ODe3t7q6urS0tLi4uLOzs7e3t7Hx8fa2tqrq6vExMTAwMCnp6efn5+WlpaHh4ezs7OoqKiJiYm6urqZmZmurq59fX29vb23t7e4uLipqanp6enc3Nza2trW1tbT09Pm5ubj4+PQ0NDg4ODExMTCwsK7u7vBwcG8vLy5ubm8vLy+vr64uLiysrKdnZ3CwsJoaGisrKzHx8ekpKTExMTv7+/i4uLa2trm5ubk5OTLy8vKysrExMTQ0NDX19ecnJzT09N/f3+dnZ12dnaQkJCXl5etra3Pz8+4uLiXl5fGxsaqqqrr6+vQ0NDKysrNzc3W1takpKShoaGsrKysrKyduRZkAAAAsHRSTlMATE1NTExMTUxNTExMTExNTExMTU1MTU1MTICFc313fnl0iIWAe3h3aYqIgXx7eXZzcnFwaGggxLiog4J0dG9mZF82FMfEtK2pkYqKh3x4cm1rZmEmH8G/vry6trOxoZ2clpKOe3ptbWZjYmFgXFpaVlFPSDYlx7CspaSjoJ6akY6HfXt4bGpmY1xUU0g2LSzCuK6lopiWhoF3YmFaVlZUUU5KPyEJCcl/fXNdXFxZUIUrIQsAAAV6SURBVFjDvZj3VxNBEMePBBIOQgmEQGghISSASSBBUQFBVIpUEaR3aVJExN4F6fbee6//opPN2507E3P7fD4+b54z+935zt7lvPsBYbZ5lyXT7R5xms2ppaVpV615eVeuXL48PPzw4YPBwYsX+/vPnT1bW1t75u7p0729PT13urs7O9vbt2/ffurUp1OQ2ts7O7u77/T09PaevnvmTG3t2XPn+vsvDg4+GH5UVjl/SAjGe29La2vr5EFgm4+WlpYDgNfrbW7etQuuKDPTPTIy4nSa4bJ8lKYBV69arXmA1WpN81FamgqYzU6n0+12ZwI+qzPtyvDlR0dPCoGsecW4FEZcShwEyUDIGvtD+DcOZlrzFvcE3qylFXZ1cTqIgGk0K1xRSL84abaWtwl/8KM5kTiok04B2BpAPUWXAoGnQK3gn0xNW90ryDhpafXvJsYlJuoSdRCyTJHqBOxR9IvbUl1/PN5pL9tFR4gTJJmi7N+wl8qf7k33S+YQE0VRJwZz42RogDZcAxx+sTn1jSDho6VFBKAbp9K1XqfXi3oRgmSqQ2AGePziNpfs2GN2lV5Pp+IJkkwIrDFz+Y+Y90h/Yvtz+f0o1YGnc/lVXvshASk8IHUm6ZMIYhI6YAEyqyHkE/n8Kkuh5AX6ZVdBlypJpRJVIgTJ0IluEGCb1BDYCzWFx79h/yl5ZV3PVUSVAQIDFhCyLO/h9E9KfuOPriOqzUFjmRYYueOqTWLGfhPfHZcGrkOlgcAGskZdAV7/eIVA2eN6qZGA3Yhcxxozn3+mkD3ZQ64Z3EnQJEBouMB+Xr+68LpAuTZBOokDoPXfNIK85vZP5AqUreNqdYI6AUINkBrAtUatgaA67mEft38GvxRThWopOAFrBbj9kYXsa3z0mnrTsLAHe3yRzxGhjoBQ0BT848foqfONkT6FAAWrce3PeEpA5vZPsDf23aIhgpfIiEiIiH/mKftPfKJxTjaNv8bM6zlSzk5dmIsMDk7EGrMEbj+e+q5xLjoyOrQbGiCCaZh5/PgLzy8YiIrgNPmaZtQovP6J3ezNafTvxEfHQ2An8v/2K47hV4J0ExVBDbNCD4e/nH0lKj1+1RBvMEQboiEMUJI1BOmmGq0pVOP1z3nYF3G53EAIN4SHx4djNyxAkutQA1QnGeD2z3rY199RIZ+EtVxDPaDm9VdspYcWj65pteFaonIDBghpzeXyzNNTbyy8CpgCyCehjnvYx+uf9RTTU9cbo7SbRPmKQBnzaKMI2igthD8jVAvIuM/rXytjfyz4MFqBDgLWPGuA05/sqRQobaOzsBMbFQsRhaAWco/A6Z92FAuU446wWL+aHJWcHJtMOzEDwWrU+PyvHEcFRlkutELInT4NFiCRGqA6yQDWfH5jWdFegXLL8V3qDIsNIySHoRsWIGMN/wBY8/mXRosFxrrDCE20EwJzCGQ9XP7crBN46AdHbthmkPvluICccLzgchnDjBD/eqaxKOOtIKGyiEzDqSFOCt7D4X/dlHFDkNCWPu3fjTHGQBgpbI06TkeIpuQ37bbltAlSKstM/g6EdYcEr0jJv2rLfrZXkFKcPhVjMsWY0GGSrTn00H7TakbD11sChd7qa+gCSKdJVitpyvWLlab6uifsieKtLk1N7QZWtvpYXl4aGxsrAtIJBQVNWVlZOTkZGRm2z7bHW0q2lJRkZ2c3NOTn19fV19fn5zfAsmQL8Nhmg66cHOhvKigoSC/Iysk+vH9//jd2n8g6TG7yjbXZYCAMq6s7fBiah4aGLl0aGLhw4f758zuBmpq+vurq6h07dnR1dXTcrqqq2uejqup2R0dXF8jV1X19NTU1O3feu3f+/oWBgUtD++uePHtbLAThNzRClbi+VnseAAAAAElFTkSuQmCC";return _u.$$set=Bu=>{"text"in Bu&&Tu(0,Cu=Bu.text),"icon_url"in Bu&&Tu(1,Pu=Bu.icon_url),"opacity"in Bu&&Tu(2,Ru=Bu.opacity)},[Cu,Pu,Ru,Lu]}class G$1 extends Te{constructor($u){super(),Me(this,$u,k$1,j,Ft,{text:0,icon_url:1,opacity:2},I$1)}}function l$1(_u){return _u.length===0?[]:_u.filter(($u,Tu)=>$u!==_u[Tu-1])}var C$2=Object.defineProperty,y=Object.defineProperties,k=Object.getOwnPropertyDescriptors,c$2=Object.getOwnPropertySymbols,w$1=Object.prototype.hasOwnProperty,F$1=Object.prototype.propertyIsEnumerable,m=(_u,$u,Tu)=>$u in _u?C$2(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,u$2=(_u,$u)=>{for(var Tu in $u||($u={}))w$1.call($u,Tu)&&m(_u,Tu,$u[Tu]);if(c$2)for(var Tu of c$2($u))F$1.call($u,Tu)&&m(_u,Tu,$u[Tu]);return _u},g$2=(_u,$u)=>y(_u,k($u)),t=(_u,$u,Tu)=>(m(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const S$1=`
  varying vec2 vUv;

  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,A$2=`
  // \u662F\u5426\u4F7F\u7528\u989C\u8272
  uniform int useMapColor;
  // \u8D34\u56FE
  uniform sampler2D map;
  // \u8D34\u56FE\u989C\u8272
  uniform vec3 mapColor;
  // \u8D34\u56FE\u900F\u660E\u5EA6
  uniform float mapOpacity;
  // \u80CC\u666F\u989C\u8272
  uniform vec3 backgroundColor;
  // \u8FB9\u6846\u989C\u8272
  uniform vec3 borderColor;
  // \u8FB9\u6846\u900F\u660E\u5EA6
  uniform float borderOpacity;
  // \u80CC\u666F\u900F\u660E\u5EA6
  uniform float backgroundOpacity;
  // \u6574\u4F53\u900F\u660E\u5EA6
  uniform float opacity;
  // \u6700\u5927 U \u503C
  uniform float maxU;
  // v offset
  uniform float vOffset;
  // \u95EA\u70C1\u52A8\u753B\u503C
  uniform float flicker;
  // \u7EB9\u7406\u5750\u6807
  varying vec2 vUv;

  // \u83B7\u53D6\u7EB9\u7406\u989C\u8272
  vec4 getImage() {
    vec2 uv = vUv;
    uv.y = uv.y - vOffset;
    // \u539F\u59CB\u8D34\u56FE\u989C\u8272
    vec4 image = texture2D(map, uv);
    // \u5982\u679C\u4F7F\u7528\u989C\u8272
    if (useMapColor == 1) {
      // \u6DF7\u5408\u989C\u8272
      image = mix(image, vec4(mapColor, image.a), image.a);
    }
    image.a = image.a * mapOpacity;
    return image;
  }

  // \u83B7\u53D6\u7EBF\u6027\u6E10\u53D8\u7684\u900F\u660E\u5EA6
  float linearGradientOpacity() {
    // \u5F53\u524D\u7684 v \u503C
    float v = vUv.y;
    float gradientLength = 1.0;
    if (v <= gradientLength) {
      return v / gradientLength; // \u5728 [0, gradientLength] \u8303\u56F4\u5185\uFF0C\u900F\u660E\u5EA6\u4E3A [0, 1]
    } else if (v <= maxU - gradientLength) {
      return 1.0; // \u5728 (gradientLength, maxU - gradientLength) \u8303\u56F4\u5185\uFF0C\u900F\u660E\u5EA6\u4E3A 1
    } else {
      return (maxU - v) / gradientLength; // \u5728 [maxU - gradientLength, maxU] \u8303\u56F4\u5185\uFF0C\u900F\u660E\u5EA6\u4E3A [1, 0]
    }
  }

  vec4 getBorder() {
    float u = vUv.x;
    float borderSize = 0.05;
    if (u <= borderSize || u >= 1.0 - borderSize) {
      return vec4(borderColor, borderOpacity);
    }
    return vec4(0.0, 0.0, 0.0, 0.0);
  }

  void main() {
    vec4 image = getImage();
    vec4 border = getBorder();
    // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272
    gl_FragColor = vec4(backgroundColor, backgroundOpacity);
    // \u6DF7\u5408\u989C\u8272\u548C\u80CC\u666F
    gl_FragColor = mix(gl_FragColor, image, image.a);
    // \u6DF7\u5408\u8FB9\u6846
    gl_FragColor = mix(gl_FragColor, border, border.a);
    // \u8BBE\u7F6E\u6574\u4F53\u900F\u660E\u5EA6
    gl_FragColor.a = gl_FragColor.a * opacity;
    gl_FragColor.a = gl_FragColor.a * linearGradientOpacity();
    gl_FragColor.a = gl_FragColor.a * flicker;
  }
`;class B{constructor($u,Tu){t(this,"startTagContainer"),t(this,"endTagContainer"),t(this,"mesh"),t(this,"five"),t(this,"mode"),t(this,"path",[]),t(this,"_panoGroup",null),t(this,"skippedPositions",null),t(this,"textureUrl",""),t(this,"scale",1),t(this,"width",.5),t(this,"unitLength",.5),t(this,"_visibleFloorIndexes",null),t(this,"visible",null),t(this,"modeVisible",!1),t(this,"floorVisible",!0),t(this,"defaultVisible",!1),t(this,"inWalkAnimation",!1),t(this,"customVisible",null),t(this,"parent"),t(this,"plugin"),t(this,"textureHasLoaded",!1),t(this,"disposed",!1),t(this,"flowAnime",new d$e({progress:0}).to({progress:1}).duration(1500).repeat(1/0)),t(this,"flickerAnime",F$7(300).yoyo(!0).repeat(5)),t(this,"dispose",()=>{var Bu,Vu;this.disposed||(this.disposed=!0,this.parent.hooks.off("show",this.updateVisible),this.parent.hooks.off("hide",this.updateVisible),this.plugin.hooks.off("show",this.updateVisible),this.plugin.hooks.off("hide",this.updateVisible),this.plugin.hooks.off("enable",this.updateVisible),this.plugin.hooks.off("disable",this.updateVisible),this.five.off("modeChange",this.onFiveModeChange),this.five.off("modelShownFloorChange",this.onFiveModelShownFloorChange),this.doHide(),(Bu=this.startTagContainer)==null||Bu.plugin.dispose(),(Vu=this.endTagContainer)==null||Vu.plugin.dispose())}),t(this,"onWalkAnimationStart",()=>{this.inWalkAnimation=!0,this.updateVisible()}),t(this,"onWalkAnimationEnd",()=>{this.inWalkAnimation=!1,this.updateVisible()}),t(this,"onFiveModeChange",Bu=>{this.modeVisible=this.mode==="panorama"?n$a(Bu):r$d(Bu),this.updateVisible()}),t(this,"onFiveModelShownFloorChange",Bu=>{this.floorVisible=Bu===null||this.visibleFloorIndexes===null||this.visibleFloorIndexes.includes(Bu),this.updateVisible()}),t(this,"updateVisible",()=>{const Bu=(()=>!this.parent.visible||!this.plugin.state.enabled||!this.plugin.state.visible?!1:this.customVisible!==null?this.customVisible:this.inWalkAnimation?!0:this.modeVisible&&this.textureHasLoaded&&this.defaultVisible&&this.floorVisible)();this.visible!==Bu&&(this.visible=Bu,Bu?this.doShow():this.doHide())}),t(this,"onFlowAnimeUpdate",Bu=>{const{progress:Vu}=Bu;this.mesh.material.uniforms.vOffset.value=Vu,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}),t(this,"onFlickerAnimeUpdate",Bu=>{var Vu,Ou;const{progress:Du}=Bu,ku=1-Du;this.mesh.material.uniforms.flicker.value=ku,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0,this.startTagContainer.tag&&f$1(this.startTagContainer.tag)&&((Vu=this.startTagContainer.app)==null||Vu.$set(g$2(u$2({},this.startTagContainer.tag.data),{opacity:ku}))),this.endTagContainer.tag&&f$1(this.endTagContainer.tag)&&((Ou=this.endTagContainer.app)==null||Ou.$set(g$2(u$2({},this.endTagContainer.tag.data),{opacity:ku})))}),t(this,"logWarning",Bu=>r$f("GuideLineModeItem: ",Bu)),t(this,"logError",Bu=>c$e("GuideLineModeItem: ",Bu));var Cu,Pu;this.five=$u,this.mode=Tu.mode,this.plugin=Tu.plugin,this.parent=Tu.parent,this.startTagContainer={tag:null,plugin:new ci(this.five)},this.endTagContainer={tag:null,plugin:new ci(this.five)};const Ru=new BufferGeometry,Lu=new ShaderMaterial({vertexShader:S$1,fragmentShader:A$2,transparent:!0,uniforms:{map:{value:null},useMapColor:{value:0},mapColor:{value:new Color},mapOpacity:{value:1},backgroundColor:{value:new Color},backgroundOpacity:{value:0},borderColor:{value:new Color},borderOpacity:{value:0},opacity:{value:1},flicker:{value:1},maxU:{value:0},vOffset:{value:0}}});this.mesh=new Mesh(Ru,Lu),this.mesh.name="GuideLineModeItem",this.mode==="panorama"&&(this.parent.hooks.on("walkStart",this.onWalkAnimationStart),this.parent.hooks.on("walkEnded",this.onWalkAnimationEnd)),this.updateVisible(),this.onFiveModeChange(this.five.getCurrentState().mode),this.onFiveModelShownFloorChange((Pu=(Cu=this.five.model)==null?void 0:Cu.shownFloor)!=null?Pu:null),this.flowAnime.onUpdate(this.onFlowAnimeUpdate),this.flickerAnime.onUpdate(this.onFlickerAnimeUpdate),this.parent.hooks.on("show",this.updateVisible),this.parent.hooks.on("hide",this.updateVisible),this.plugin.hooks.on("show",this.updateVisible),this.plugin.hooks.on("hide",this.updateVisible),this.plugin.hooks.on("enable",this.updateVisible),this.plugin.hooks.on("disable",this.updateVisible),this.plugin.hooks.on("dispose",this.dispose),this.five.on("modeChange",this.onFiveModeChange),this.five.on("modelShownFloorChange",this.onFiveModelShownFloorChange)}get panoGroup(){return this._panoGroup}get visibleFloorIndexes(){return this._visibleFloorIndexes}setCustomVisible($u){if(this.disposed)return this.logError("disposed");this.customVisible!==$u&&(this.customVisible=$u,this.updateVisible())}setDefaultVisible($u){if(this.disposed)return this.logError("disposed");this.defaultVisible!==$u&&(this.defaultVisible=$u,this.updateVisible())}setUnitSize($u,Tu){if(this.disposed)return this.logError("disposed");this.width=$u,this.unitLength=Tu,this.setGeometryByPath(this.path,{width:$u,unit_length:Tu})}setScale($u){if(this.disposed)return this.logError("disposed");this.scale=$u,this.setGeometryByPath(this.path,{scale:$u})}setGeometryByPanoGroup($u,Tu){if(this.disposed)return this.logError("disposed");if(!this.five.work)return this.logError("setPathByPanoGroup: work is not ready");const Cu=l$1($u);if(this._panoGroup=Cu,(Tu==null?void 0:Tu.skipPanoGroup)!==void 0){const Ru=Tu.skipPanoGroup?Cu.map(Lu=>this.five.work.observers[Lu]).map(Lu=>Lu.standingPosition.clone()):null;this.skippedPositions=Ru}const Pu=this.getPathFromPanoGroup(Cu,this.five.work,Tu);this.path=Pu,this.setGeometryByPath(Pu,Tu)}setGeometryByPath($u,Tu){var Cu,Pu,Ru;if(this.disposed)return this.logError("disposed");const Lu=(Cu=Tu==null?void 0:Tu.scale)!=null?Cu:this.scale,Bu=(Pu=Tu==null?void 0:Tu.width)!=null?Pu:this.width,Vu=(Ru=Tu==null?void 0:Tu.unit_length)!=null?Ru:this.unitLength;this.path=$u,this.scale=Lu,this.width=Bu,this.unitLength=Vu;const{geometry:Ou,maxU:Du}=Q$a({path:$u,width:Bu*Lu,unitLength:Vu*Lu,skipPositions:this.skippedPositions});this.mesh.geometry=Ou,this.mesh.material.needsUpdate=!0,this.mesh.material.uniforms.maxU.value=Du,this.five.needsRender=!0}setMartial($u){var Tu;if(this.disposed)return this.logError("disposed");($u==null?void 0:$u.visible)!==void 0&&this.setDefaultVisible($u.visible),($u==null?void 0:$u.color)!==void 0&&this.setColor($u.color),($u==null?void 0:$u.opacity)!==void 0&&this.setOpacity($u.opacity),((Tu=$u==null?void 0:$u.texture)==null?void 0:Tu.url)!==void 0&&this.setTextureUrl($u.texture.url),($u==null?void 0:$u.background_color)!==void 0&&this.setBackgroundColor($u.background_color),($u==null?void 0:$u.background_opacity)!==void 0&&this.setBackgroundOpacity($u.background_opacity),($u==null?void 0:$u.border_color)!==void 0&&this.setBorderColor($u.border_color),($u==null?void 0:$u.border_opacity)!==void 0&&this.setBorderOpacity($u.border_opacity)}setColor($u){if(this.disposed)return this.logError("disposed");$u&&(this.mesh.material.uniforms.mapColor.value=new Color().set($u)),this.mesh.material.uniforms.useMapColor.value=$u?1:0,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBorderColor($u){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderColor.value=new Color().set($u),this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBorderOpacity($u){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderOpacity.value=$u,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundColor($u){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundColor.value=new Color().set($u),this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundOpacity($u){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundOpacity.value=$u,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setOpacity($u){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.opacity.value=$u,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setMapOpacity($u){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.mapOpacity.value=$u,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setTextureUrl($u){if(this.disposed)return this.logError("disposed");this.textureUrl=$u,T$7($u).then(Tu=>{this.disposed||this.textureUrl===$u&&(Tu.wrapT=RepeatWrapping,this.textureHasLoaded=!0,this.mesh.material.uniforms.map.value=Tu,this.mesh.material.uniformsNeedUpdate=!0,this.mesh.material.needsUpdate=!0,this.five.needsRender=!0,this.updateVisible())})}setVisibleFloorIndexes($u){var Tu,Cu;if(this.disposed)return this.logError("disposed");this._visibleFloorIndexes=$u,this.onFiveModelShownFloorChange((Cu=(Tu=this.five.model)==null?void 0:Tu.shownFloor)!=null?Cu:null)}setStartTag($u){this.setTag("start",$u)}setEndTag($u){this.setTag("end",$u)}flicker(){if(this.disposed)return this.logError("disposed");this.flickerAnime.play()}setTag($u,Tu){const Cu=$u==="start"?this.startTagContainer:this.endTagContainer;Tu||Cu.plugin.clearTags();const Pu=a$9({},{contentType:"Custom",stickType:"2DPoint",config:{visibleConfig:{visibleFiveMode:["Floorplan","Mapview"],followModelVisibility:!1}},style:{point:{enabled:!1}},data:{}},Tu);Cu.tag=Pu,f$1(Pu)&&(Cu.tag.element=Ru=>{var Lu;(Lu=Cu.app)==null||Lu.$destroy();const Bu=new G$1({target:Ru,intro:!0,props:Pu.data});return Cu.app=Bu,()=>Bu.$destroy()}),Cu.plugin.load({tagList:[Cu.tag]})}doShow(){this.mode==="model"&&this.flowAnime.play(),this.five.scene.add(this.mesh),this.startTagContainer.plugin.show(),this.endTagContainer.plugin.show(),this.five.needsRender=!0}doHide(){this.mode==="model"&&this.flowAnime.stop(),this.five.scene.remove(this.mesh),this.startTagContainer.plugin.hide(),this.endTagContainer.plugin.hide(),this.five.needsRender=!0}getPathFromPanoGroup($u,Tu,Cu){if($u.length<2)return[];const Pu=$u.map(Ru=>Tu.observers[Ru]).map(Ru=>Ru.standingPosition.toArray());return[u$2({type:"CatmullRomCurve3",points:Pu},Cu)]}}function f$1(_u){return _u.contentType==="Custom"}function n$3(_u){const $u=Math.abs(Math.cos(_u.latitude));return new Vector3(-Math.sin(_u.longitude)*$u,-Math.sin(_u.latitude),-Math.cos(_u.longitude)*$u)}function s$1(_u,$u){const Tu=n$3(_u),Cu=n$3($u);return Tu.angleTo(Cu)}var l=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const p=_u=>l(void 0,null,function*(){try{_u().then(()=>{},()=>{}).catch(()=>{})}catch{}}),n$2=Math.PI*2;function o(_u){return _u>=0&&_u<n$2?_u:(_u%n$2+n$2)%n$2}function n$1(_u){return{longitude:o(-Math.atan2(_u.x,-_u.z)),latitude:-Math.asin(_u.y/1)}}function u$1(_u,$u,Tu,Cu){const Pu=-_u/Tu,Ru=_u;return Pu*Cu+Ru}function n(_u){return new Promise($u=>{setTimeout(()=>{$u()},_u)})}var T=Object.defineProperty,K=Object.defineProperties,O=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,A$1=Object.prototype.propertyIsEnumerable,L=(_u,$u,Tu)=>$u in _u?T(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,g$1=(_u,$u)=>{for(var Tu in $u||($u={}))U.call($u,Tu)&&L(_u,Tu,$u[Tu]);if(F)for(var Tu of F($u))A$1.call($u,Tu)&&L(_u,Tu,$u[Tu]);return _u},C$1=(_u,$u)=>K(_u,O($u)),I=(_u,$u,Tu)=>(L(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),v$1=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const M$2="v1.0.6",G="CruisePlugin",x$1=`${G}@${M$2}`,D=()=>{console.error(`${x$1} is disposed`)},W=()=>{console.warn(`${x$1} is disabled`)},q=()=>{console.error(`${x$1} is disabled`)},E=new Map;class z extends e$9{constructor($u,Tu){super($u,Tu),I(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1,config:{speedConfig:{rotateSpeed:.001,rotateSpeedUnit:"rad/ms",moveSpeed:.002,moveSpeedUnit:"m/ms"}}}),I(this,"data"),I(this,"config"),I(this,"privateState",{playing:!1,currentPlayQueue:[],currentPlayKeyframe:null,broke:!1,disposers:[],modeChanging:!1}),I(this,"GuideLine"),this.config=Tu,Object.assign(window,{[`__${G}_DEBUG__`]:this});const Cu=this.setFiveLinearUpdateCamera.bind(this),Pu=this.setFiveOriginUpdateCamera.bind(this);this.hooks.on("play",Cu),this.hooks.on("broke",Pu),this.hooks.on("end",Pu),this.hooks.on("pause",Pu),this.privateState.disposers.push(()=>{this.hooks.off("play",Cu),this.hooks.off("broke",Pu),this.hooks.off("end",Pu),this.hooks.off("pause",Pu)})}load($u,Tu,Cu){return v$1(this,null,function*(){var Pu,Ru,Lu,Bu,Vu,Ou;if(this.state.disposed)return D();this.privateState.fiveOriginGetProgress||(Ru=(Pu=this.five.controller)==null?void 0:Pu.cameraMotion)!=null&&Ru.getProgress||(yield this.waitFiveLoaded(),this.privateState.fiveOriginGetProgress=(Bu=(Lu=this.five.controller)==null?void 0:Lu.cameraMotion)==null?void 0:Bu.getProgress),this.clear();const Du=this.data?JSON.parse(JSON.stringify(this.data)):void 0,ku=yield this.formatData($u);this.data=ku,this.hooks.emit("dataChange",ku,Du);let Fu=[],Nu;const Gu=this.data.keyframes.filter(zu=>zu.data.panoIndex!==void 0);Gu.filter((zu,Hu)=>{var Uu;return zu.data.panoIndex!==((Uu=Gu[Hu-1])==null?void 0:Uu.data.panoIndex)}).map(zu=>zu.data.panoIndex).forEach(zu=>{var Hu,Uu;const ju=(Hu=this.five.work.observers[zu])==null?void 0:Hu.floorIndex;if(ju!==void 0)if(Nu===ju){const Wu=Fu.length-1;Fu[Wu]=[...(Uu=Fu[Wu])!=null?Uu:[],zu]}else{Nu=ju;const Wu=Fu.length;Fu[Wu]=[zu]}}),!this.GuideLine&&((Vu=this.config)==null?void 0:Vu.useGuideLine)!==!1&&ku.useGuildLine!==!1&&(this.GuideLine=tt(this.five,this.config)),(Ou=this.GuideLine)==null||Ou.load({routes:Fu.map(zu=>({panoIndexList:zu})),config:ku.guildPluginOptions}),this.setState({playing:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing),this.changeSpeed(this.state.speed),Tu&&this.setState(Tu,{userAction:Cu}),console.info(`${x$1} loaded`,ku),this.hooks.emit("dataLoaded",ku)})}play($u){this.setState({playing:!0},$u)}playFrom($u){const{index:Tu,id:Cu,userAction:Pu}=$u;this.state.playing&&this.setState({playing:!1},{userAction:Pu}),this.setState({playing:!0},{userAction:Pu,playFromIndex:Tu,playFromId:Cu})}playFromStart($u){return this.playFrom(C$1(g$1({},$u),{index:0}))}pause($u){this.setState({playing:!1},$u)}show($u){return v$1(this,null,function*(){this.setState({visible:!0},$u)})}hide($u){return v$1(this,null,function*(){this.setState({visible:!1},$u)})}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.setState({disposed:!0})}setState($u,Tu){var Cu;if(this.state.disposed)return D();if(!this.state.enabled&&$u.enabled!==!0&&$u.disposed!==!0)return q();const Pu=g$1({},this.state);this.state=g$1(g$1({},this.state),$u),$u.disposed!==void 0&&$u.disposed!==Pu.disposed&&$u.disposed&&this.handleDispose(),$u.visible!==void 0&&$u.visible!==Pu.visible&&this.handleVisible($u.visible,Tu==null?void 0:Tu.userAction),$u.enabled!==void 0&&$u.enabled!==Pu.enabled&&this.handleEnable($u.enabled,Tu==null?void 0:Tu.userAction),$u.playing!==void 0&&$u.playing!==Pu.playing&&this.changePlayState($u.playing,Tu),$u.speed!==void 0&&$u.speed!==Pu.speed&&this.changeSpeed($u.speed,Tu==null?void 0:Tu.userAction),b$8(Pu,this.state,{deep:!0})||this.hooks.emit("stateChange",{state:this.state,prevState:Pu,userAction:(Cu=Tu==null?void 0:Tu.userAction)!=null?Cu:!0})}formatData($u){return v$1(this,null,function*(){this.five.work||(yield this.waitFiveLoaded());const Tu=this.five.work.observers,Cu=(()=>{const Pu=$u;return typeof Pu=="object"&&Pu!==null&&Pu.version&&Pu.data?Pu.data:Pu})();if(Cu.keyframes)return{keyframesId:r$k(),keyframes:Cu.keyframes.map((Pu,Ru)=>{var Lu;const Bu=Cu.keyframes[Ru+1],Vu=(()=>!Bu||Bu.start===void 0||Pu.end===void 0?0:Bu.start-Pu.end)();return C$1(g$1({id:(Lu=Pu.uuid)!=null?Lu:r$k(),moveIndex:Ru,stay:Vu,index:Ru},Pu),{guildPluginOptions:Cu.guildPluginOptions})})};if(Cu.panoIndexList){let Pu=[];const{moveEffect:Ru,moveToFirstPanoEffect:Lu,moveToFirstPanoDuration:Bu}=Cu;return this.privateState.moveToFirstPanoEffect=Lu,this.privateState.moveToFirstPanoDuration=Bu,Cu.panoIndexList.forEach((Vu,Ou)=>{const Du=(()=>{var ku,Fu,Nu,Gu;const zu=Cu.panoIndexList.slice(Ou).find(Wu=>Wu!==Vu);if(zu===void 0)return;const Hu=(ku=Tu[Vu])==null?void 0:ku.position,Uu=(Fu=Tu[zu])==null?void 0:Fu.position;if(!Uu||!Hu||((Nu=Tu[Vu])==null?void 0:Nu.floorIndex)!==((Gu=Tu[zu])==null?void 0:Gu.floorIndex))return;const ju=new Vector3().subVectors(Uu,Hu);return n$1(ju.normalize())})();Cu.moveType===void 0||Cu.moveType==="justMove"?Pu.push({moveIndex:Ou,stay:Cu.stay,data:g$1({effect:"Move",panoIndex:Vu,moveEffect:Ru},Du!=null?Du:{})}):Cu.moveType==="moveAndRotate"&&(Pu.push({moveIndex:Ou,stay:Cu.stay,data:{effect:"Move",panoIndex:Vu,moveEffect:Ru}}),Du&&Pu.push({moveIndex:Ou,stay:Cu.stay,data:g$1({effect:"Rotate",panoIndex:Vu},Du)}))}),{keyframesId:r$k(),keyframes:Pu.map((Vu,Ou)=>g$1({id:r$k(),index:Ou},Vu)),guildPluginOptions:Cu.guildPluginOptions,useGuildLine:Cu.useGuildLine}}else throw new Error("format error: data no keyframes or no panoIndexList")})}handleEnable($u,Tu=!0){var Cu,Pu;$u?((Cu=this.GuideLine)==null||Cu.enable(),this.hooks.emit("enable",{userAction:Tu})):((Pu=this.GuideLine)==null||Pu.disable(),this.changePlayState(!1,{userAction:Tu}),this.hooks.emit("disable",{userAction:Tu})),this.state.enabled=$u}handleVisible($u,Tu=!0){var Cu,Pu;$u?((Cu=this.GuideLine)==null||Cu.show(),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:Tu}))):((Pu=this.GuideLine)==null||Pu.hide(),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:Tu}))),this.state.visible=$u}changePlayState($u,Tu){this.actionIfStateIsEnabled(()=>{var Cu;return this.hooks.emit("playStateChange",$u?"playing":"pause",{userAction:(Cu=Tu==null?void 0:Tu.userAction)!=null?Cu:!0})}),$u?this.handlePlay(Tu):this.handlePause(Tu),this.state.playing=$u}handlePlay($u){return v$1(this,null,function*(){var Tu;const{data:Cu,state:Pu,privateState:Ru,hooks:Lu}=this;if(Ru.playing||!(Cu!=null&&Cu.keyframes)||(Cu==null?void 0:Cu.keyframes.length)===0)return;const Bu=r$k();Ru.playId=Bu,Ru.playing=!0,Ru.broke=!1;const Vu=Cu.keyframes,Ou=this.getPauseData();($u==null?void 0:$u.notEmitEvent)!==!0&&Lu.emit("play",{userAction:(Tu=$u==null?void 0:$u.userAction)!=null?Tu:!0});let Du=!1;const ku=yield(()=>v$1(this,null,function*(){var Fu,Nu;if(($u==null?void 0:$u.playFromIndex)!==void 0)return $u.playFromIndex;if(($u==null?void 0:$u.playFromId)!==void 0)return(Fu=this.data)==null?void 0:Fu.keyframes.findIndex(Gu=>Gu.id===$u.playFromId);if(Ou!=null&&Ou.keyframeId){const Gu=(Nu=this.data)==null?void 0:Nu.keyframes.find(zu=>zu.id===Ou.keyframeId);if(Ou!=null&&Ou.fiveState&&(yield this.move(Ou.fiveState,{moveEffect:Ru.moveToFirstPanoEffect,duration:Ru.moveToFirstPanoDuration})),Gu){if(Gu.data.effect==="Move")return Gu.index;if(Gu.data.effect==="Rotate"){const zu=Ou.duration!==void 0?Ou.duration*(1-Ou.playedProgress):void 0;return yield this.playKeyframe(Gu,{duration:zu}),Du=!0,Gu.index+1}}}}))();this.clearPauseData();for(const Fu of Vu){if(Ru.broke||!Pu.playing||!Ru.playing||Bu!==Ru.playId)return;if(!(ku!==void 0&&Fu.index<ku))try{Lu.emit("playIndexChange",Fu.index,Fu),yield this.playKeyframe(Fu,{moveEffect:Du===!1?Ru.moveToFirstPanoEffect:void 0,duration:Du===!1&&typeof Ru.moveToFirstPanoDuration=="number"?Ru.moveToFirstPanoDuration:void 0}),Fu.stay&&(yield n(Fu.stay)),Du===!1&&(Du=!0)}catch{return Promise.resolve("broke")}}Pu.playing&&Bu===Ru.playId&&(this.setState({playing:!1},{userAction:!1}),Lu.emit("end"),this.clearPauseData())})}handlePause($u){var Tu;const{state:Cu,privateState:Pu,hooks:Ru}=this;Cu.playing=!1,Pu.playing!==!1&&(Pu.playing=!1,this.setPauseData(),Pu.broke||this.forceInteruptUpdateCamera(),($u==null?void 0:$u.notEmitEvent)!==!0&&Ru.emit("pause",{userAction:(Tu=$u==null?void 0:$u.userAction)!=null?Tu:!0}))}playKeyframe($u,Tu){return v$1(this,null,function*(){var Cu;const{privateState:Pu}=this;return((Cu=this.privateState.currentPlayKeyframe)==null?void 0:Cu.keyframe.id)!==$u.id&&(this.privateState.currentPlayKeyframe={keyframe:$u}),Pu.currentPlayQueue.push(this.getPlayPromise($u,Tu)),this.actionPromiseQueue()})}addInterruptListener($u){const Tu=()=>{this.privateState.modeChanging||$u()},Cu=$u;return this.five.once("gesture",Cu),this.five.once("wantsChangeMode",Tu),()=>{this.five.off("gesture",Cu),this.five.once("wantsChangeMode",Tu)}}getPlayPromise($u){return v$1(this,arguments,function*(Tu,Cu={}){var Pu;const Ru=Tu.data;if(Cu.duration=(Pu=Cu.duration)!=null?Pu:Tu.start!==void 0&&Tu.end!==void 0?Tu.end-Tu.start:void 0,!!Ru)return new Promise((Lu,Bu)=>{let Vu=!1;this.addInterruptListener(()=>{if(!Vu)return this.hooks.emit("broke"),this.privateState.broke=!0,this.setState({playing:!1}),Vu=!0,Bu(new Error("play is interupted"))});try{if(Vu)return;const Ou=()=>{Lu(),Vu=!0};switch(Ru.effect){case"Move":this.move(Ru,Cu).then(Ou);break;case"Rotate":this.rotate(Ru,Cu).then(Ou);break;default:this.rotate(Ru,Cu).then(Ou)}}catch{}})})}actionPromiseQueue(){return v$1(this,null,function*(){const{privateState:$u}=this;return new Promise((Tu,Cu)=>{if($u.currentPlayQueue.length===0){Tu();return}const Pu=$u.currentPlayQueue.shift();if(!Pu){Tu();return}Pu.then(Tu,Cu)}).then(()=>$u.currentPlayQueue.length===0?Promise.resolve():this.actionPromiseQueue())})}move($u,Tu){return v$1(this,null,function*(){if($u.mode&&$u.mode!==this.five.currentMode)yield this.changeMode($u);else if($u.panoIndex!==this.five.panoIndex)yield this.changePano($u,Tu);else return Promise.resolve()})}rotate($u,Tu){return v$1(this,null,function*(){if($u.mode&&$u.mode!==this.five.currentMode)yield this.changeMode({mode:$u.mode,panoIndex:$u.panoIndex});else if($u.panoIndex&&$u.panoIndex!==this.five.panoIndex)return yield this.changePano($u,Tu);yield this.updateCamera($u,Tu)})}updateCamera($u){return v$1(this,arguments,function*(Tu,Cu={}){const{five:Pu,privateState:Ru,state:Lu}=this,Bu=(()=>{var Du,ku;const Fu=(Du=Lu.config)==null?void 0:Du.speedConfig,Nu=(ku=Tu.rotateSpeed)!=null?ku:Fu==null?void 0:Fu.rotateSpeed;if((Fu==null?void 0:Fu.rotateSpeedUnit)===void 0)return Nu;if(Nu!==void 0)return Fu.rotateSpeedUnit==="rad/ms"?Nu:Nu/1e3})(),Vu=(()=>{if(Cu.duration)return Cu.duration;if(Bu){const Du=this.five.getCurrentState();return s$1(Du,Tu)/Bu}return 800})();Ru.currentPlayKeyframe&&(Ru.currentPlayKeyframe.originDuration=Vu);const Ou=this.getSpeededDuration(Vu);return new Promise(Du=>{p(()=>Pu.updateCamera(Tu,Ou)),setTimeout(()=>Du(),Ou)})})}changePano($u,Tu){return v$1(this,null,function*(){const{five:Cu,privateState:Pu,state:Ru}=this;if(typeof $u.panoIndex!="number"||$u.panoIndex===Cu.panoIndex)return;const Lu=Cu.getCurrentState().mode!=="Panorama";Lu&&(this.privateState.modeChanging=!0);const Bu=(()=>{var Ou,Du;const ku=(Ou=Ru.config)==null?void 0:Ou.speedConfig,Fu=(Du=$u.moveSpeed)!=null?Du:ku==null?void 0:ku.moveSpeed;if((ku==null?void 0:ku.moveSpeedUnit)===void 0)return Fu;if(Fu!==void 0)return ku.moveSpeedUnit==="m/ms"?Fu:Fu/1e3})(),Vu=(()=>{if(Tu!=null&&Tu.duration)return Tu.duration;if(Bu&&typeof Cu.panoIndex=="number"&&typeof $u.panoIndex=="number"){const Ou=Cu.work.observers[Cu.panoIndex].position,Du=Cu.work.observers[$u.panoIndex].position;return Ou.distanceTo(Du)/Bu}return 800})();Pu.currentPlayKeyframe&&(Pu.currentPlayKeyframe.originDuration=Vu),yield new Promise(Ou=>{var Du,ku,Fu;Cu.moveToPano($u.panoIndex,{latitude:$u.latitude,longitude:$u.longitude,fov:$u.fov,duration:this.getSpeededDuration(Vu),effect:(Fu=(ku=Tu==null?void 0:Tu.moveEffect)!=null?ku:(Du=this.state.config)==null?void 0:Du.moveEffect)!=null?Fu:$u.moveEffect,moveCancelCallback:()=>Ou(),moveEndCallback:()=>Ou()}),Lu&&Cu.once("panoArrived",()=>Ou())}),Lu&&(this.privateState.modeChanging=!1)})}changeSpeed($u,Tu=!0){const{state:Cu,privateState:Pu,hooks:Ru}=this,{currentPlayKeyframe:Lu}=Pu;if(Ru.emit("speedChange",$u,{userAction:Tu}),Cu.playing&&Lu)try{const Bu=Lu.originDuration!==void 0?Lu.originDuration*(1-this.getProgress()):void 0,Vu=this.playKeyframe(Lu.keyframe,{duration:Bu});Pu.currentPlayQueue.push(Vu)}catch{}}getSpeededDuration($u){return $u/this.state.speed}getProgress(){return this.five.controller.cameraMotion.progress}changeMode($u,Tu){return v$1(this,null,function*(){$u.mode&&$u.mode!==this.five.currentMode&&(this.privateState.modeChanging=!0,yield this.five.changeMode($u.mode,$u,Tu),this.privateState.modeChanging=!1)})}forceInteruptUpdateCamera(){this.five.updateCamera({},0)}getPauseData(){var $u,Tu;if(($u=this.data)!=null&&$u.keyframesId)return E.get((Tu=this.data)==null?void 0:Tu.keyframesId)}setPauseData(){var $u,Tu,Cu,Pu;if(($u=this.data)!=null&&$u.keyframesId)return E.set((Tu=this.data)==null?void 0:Tu.keyframesId,{keyframeId:(Cu=this.privateState.currentPlayKeyframe)==null?void 0:Cu.keyframe.id,fiveState:this.five.getCurrentState(),duration:(Pu=this.privateState.currentPlayKeyframe)==null?void 0:Pu.originDuration,playedProgress:this.getProgress()})}clearPauseData(){var $u,Tu;if(($u=this.data)!=null&&$u.keyframesId)return E.delete((Tu=this.data)==null?void 0:Tu.keyframesId)}clear(){this.clearPauseData(),this.privateState.currentPlayKeyframe=null}handleDispose(){var $u,Tu;this.setState({playing:!1}),this.clearPauseData(),this.clear(),($u=this.GuideLine)==null||$u.dispose(),this.GuideLine=void 0,(Tu=this.privateState.disposers)==null||Tu.forEach(Cu=>Cu==null?void 0:Cu())}actionIfStateIsEnabled($u,Tu){if(this.state.enabled)return $u();Tu!=null&&Tu.warnLog&&W()}waitFiveLoaded(){return v$1(this,null,function*(){return new Promise($u=>{if(this.five.work){$u();return}this.five.once("loaded",()=>{$u()})})})}setFiveLinearUpdateCamera(){this.privateState.fiveOriginGetProgress&&(this.five.controller.cameraMotion.getProgress=$u=>{const Tu=this.five.controller.cameraMotion,Cu=$u-Tu.startTime;return Cu<0?0:Cu>=Tu.duration?1:1-u$1(1,Tu.startVelocity,Tu.duration,Cu)})}setFiveOriginUpdateCamera(){this.privateState.fiveOriginGetProgress&&(this.five.controller.cameraMotion.getProgress=this.privateState.fiveOriginGetProgress)}}I(z,"PluginVersion",M$2);var v=Object.defineProperty,w=Object.getOwnPropertySymbols,b$1=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,h=(_u,$u,Tu)=>$u in _u?v(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,d$1=(_u,$u)=>{for(var Tu in $u||($u={}))b$1.call($u,Tu)&&h(_u,Tu,$u[Tu]);if(w)for(var Tu of w($u))x.call($u,Tu)&&h(_u,Tu,$u[Tu]);return _u},s=(_u,$u,Tu)=>(h(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),c$1=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});class C{constructor($u){s(this,"id"),s(this,"renderID"),s(this,"isGuideLine",!0),s(this,"panoramaItem"),s(this,"modelItem"),s(this,"hooks",new Subscribe),s(this,"_visible",!0),s(this,"plugin"),s(this,"five"),s(this,"logError",Tu=>c$e("GuideLineItem: ",Tu)),this.id=$u.id,this.five=$u.five,this.plugin=$u.plugin,this.panoramaItem=new B(this.five,{mode:"panorama",plugin:this.plugin,parent:this}),this.modelItem=new B(this.five,{mode:"model",plugin:this.plugin,parent:this})}get visible(){return this._visible}setData($u){this.setDataByMode("panorama",$u),this.setDataByMode("model",$u)}setHeightOffset($u){this.modelItem.mesh.position.y=$u,this.panoramaItem.mesh.position.y=$u}setDataByMode($u,Tu){var Cu;const Pu=$u==="panorama"?this.panoramaItem:this.modelItem,Ru=$u==="panorama"?Tu.panorama_style:Tu.model_style,Lu=Tu.path,Bu=Ru,Vu=Ru;if(Tu.pano_group){const Ou=$u==="panorama";Pu.setGeometryByPanoGroup(Tu.pano_group,d$1({skipPanoGroup:Ou},Bu))}else Tu.path&&Pu.setGeometryByPath(Lu,Bu);Pu.setMartial(Vu),Pu.setVisibleFloorIndexes((Cu=Tu.visible_floor_indexes)!=null?Cu:null),Pu.setStartTag(Ru==null?void 0:Ru.start_tag),Pu.setEndTag(Ru==null?void 0:Ru.end_tag)}show(){this._visible=!0,this.hooks.emit("show",{userAction:!0})}hide(){this._visible=!1,this.hooks.emit("hide",{userAction:!0})}dispose(){this.panoramaItem.dispose(),this.modelItem.dispose()}walk($u){return c$1(this,null,function*(){if(!this.panoramaItem.panoGroup)return;const Tu=d$1({panoIndexList:this.panoramaItem.panoGroup},$u);this.hooks.emit("walkStart",{userAction:!0});const[Cu]=yield d$f(M$1(this.five,Tu));if(this.hooks.emit("walkEnded",{userAction:!0}),Cu)return this.logError(Cu.message)})}}function M$1(_u,$u){return c$1(this,null,function*(){if($u.panoIndexList.length===0)return;const Tu=_u.getCurrentState();Tu.mode!=="Panorama"&&(yield y$h(_u,["Panorama",{longitude:Tu.longitude,latitude:0,panoIndex:$u.panoIndexList[0]}]));const Cu=new z(_u,{useGuideLine:!1});yield Cu.load($u),yield new Promise((Pu,Ru)=>{const Lu=_u.getCurrentState();let Bu=$u.panoIndexList.slice();Lu.panoIndex===Bu[0]&&Ou(Lu.panoIndex),Cu.playFromStart();function Vu(Nu){if(Nu!=="Panorama")return ku(new Error("mode not match"))}function Ou(Nu){const Gu=Bu[0];if(Bu=Bu.slice(1),Nu!==Gu)return ku(new Error("panoIndex not match, wanted: "+Gu+", got: "+Nu));if(Bu.length===0)return Fu()}function Du(){_u.off("modeChange",Vu),_u.off("panoArrived",Ou)}function ku(Nu){Du(),Ru(Nu)}function Fu(){Du(),Pu()}_u.on("modeChange",Vu),_u.on("panoArrived",Ou)})})}var V=Object.defineProperty,S=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,c=(_u,$u,Tu)=>$u in _u?V(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,f=(_u,$u)=>{for(var Tu in $u||($u={}))M.call($u,Tu)&&c(_u,Tu,$u[Tu]);if(S)for(var Tu of S($u))N.call($u,Tu)&&c(_u,Tu,$u[Tu]);return _u},d=(_u,$u,Tu)=>(c(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),u=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Ru=Vu=>{try{Bu(Tu.next(Vu))}catch(Ou){Pu(Ou)}},Lu=Vu=>{try{Bu(Tu.throw(Vu))}catch(Ou){Pu(Ou)}},Bu=Vu=>Vu.done?Cu(Vu.value):Promise.resolve(Vu.value).then(Ru,Lu);Bu((Tu=Tu.apply(_u,$u)).next())});const A="v1.1.0",b="GuideLinePlugin",g=`${b}@${A}`;class Wr extends e$9{constructor($u,Tu){super($u,Tu),d(this,"version",A),d(this,"name",b),d(this,"cruisePlugin"),d(this,"itemMap",new Map),d(this,"heightOffset",0),d(this,"state",{visible:!1,enabled:!0}),d(this,"data"),d(this,"_disposed",!1),d(this,"disposedErrorLog",()=>{console.error(`${g} is disposed`)}),this.cruisePlugin=new z($u,{useGuideLine:!1}),Object.assign(window,{[`__${b}_DEBUG__`]:this})}get disposed(){return this._disposed}load($u,Tu,Cu=!0){return u(this,null,function*(){var Pu,Ru,Lu,Bu,Vu,Ou,Du;if(this.disposed)return;const ku=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Fu=yield this.formatData($u);this.hooks.emit("dataChange",Fu,ku),this.data=Fu;const Nu=Fu.config,Gu={panorama_style:{visible:!1,unit_length:(Pu=Nu==null?void 0:Nu.unitHeight)!=null?Pu:.4,width:(Ru=Nu==null?void 0:Nu.unitWidth)!=null?Ru:.6,texture:{url:(Lu=Nu==null?void 0:Nu.arrowTextureUrl)!=null?Lu:this.staticPrefix+"/release/web/arrow6.b6ce0c62.png"}}},zu=(Vu=(Bu=Fu.routes)==null?void 0:Bu.map(ju=>{var Wu;return a$9({},Gu,{id:(Wu=ju.id)!=null?Wu:Date.now(),pano_group:ju.panoIndexList})}))!=null?Vu:[],Hu=(Du=(Ou=Fu.lines)==null?void 0:Ou.map(ju=>a$9({},Gu,ju)))!=null?Du:[],Uu=[...zu,...Hu];yield this.waitFiveLoaded(),this.clear(),Uu.forEach(ju=>{this.addGuideLineItem(ju)}),this.updateTagsEnable(),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),Tu&&this.setState(Tu,{userAction:Cu}),this.hooks.emit("dataLoaded",Fu),console.info(`${g} loaded`,Fu)})}formatData($u){return u(this,null,function*(){return this.getDataWithoutVersion($u)})}show($u){return u(this,null,function*(){this.setState({visible:!0},$u)})}hide($u){return u(this,null,function*(){this.setState({visible:!1},$u)})}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.disposed||(this.clear(),this.hooks.emit("dispose"))}setState($u,Tu){var Cu;if(this.disposed)return this.disposedErrorLog();const Pu=f({},this.state);this.state=f(f({},this.state),$u),$u.visible!==void 0&&$u.visible!==Pu.visible&&this.handleVisible($u.visible,Tu==null?void 0:Tu.userAction),$u.enabled!==void 0&&$u.enabled!==Pu.enabled&&this.handleEnable($u.enabled,Tu==null?void 0:Tu.userAction),b$8(Pu,this.state,{deep:!0})||(this.hooks.emit("stateChange",{state:this.state,prevState:Pu,userAction:(Cu=Tu==null?void 0:Tu.userAction)!=null?Cu:!0}),this.five.needsRender=!0)}addGuideLineItem($u){const Tu=$u.render_id||$u.id,Cu=this.itemMap.get(Tu);Cu&&this.removeGuideLineItem(Cu);const Pu=new C({five:this.five,id:Tu,plugin:this});return this.itemMap.set(Tu,Pu),$u&&Pu.setData($u),this.heightOffset+=1e-4,Pu.setHeightOffset(this.heightOffset),Pu}getGuideLineItemByID($u){return this.itemMap.get($u)}removeGuideLineItem($u){this.itemMap.delete($u.id),$u.panoramaItem.dispose(),$u.modelItem.dispose()}updateTagsEnable(){const $u=[];function Tu(Ru){return Array.isArray(Ru)&&Ru.every(Lu=>typeof Lu=="number")}function Cu(Ru,Lu){return new Vector3().fromArray(Ru).distanceTo(new Vector3().fromArray(Lu))<.01}function Pu(Ru){var Lu;const Bu=(Lu=Ru.tag)==null?void 0:Lu.position;return Tu(Bu)?$u.every(Vu=>{var Ou;return Tu((Ou=Vu.tag)==null?void 0:Ou.position)?!Cu(Bu,Vu.tag.position):!0}):!1}this.itemMap.forEach(Ru=>{const Lu=Ru.modelItem.startTagContainer,Bu=Ru.modelItem.endTagContainer,Vu=Pu(Lu);Vu&&$u.push(Lu),Lu.plugin.setState({enabled:Vu},{});const Ou=Pu(Bu);Ou&&$u.push(Bu),Bu.plugin.setState({enabled:Ou},{})})}clear(){this.itemMap.forEach($u=>{this.removeGuideLineItem($u)})}handleEnable($u,Tu=!0){this.hooks.emit($u?"enable":"disable",{userAction:Tu})}handleVisible($u,Tu=!0){this.state.enabled&&this.hooks.emit($u?"show":"hide",{userAction:Tu})}waitFiveLoaded(){return u(this,null,function*(){return new Promise($u=>{if(this.five.work){$u();return}this.five.once("loaded",()=>{$u()})})})}getDataWithoutVersion($u){return typeof $u=="object"&&$u!==null&&$u.version&&$u.data?$u.data:$u}}const tt=(_u,$u)=>new Wr(_u,$u),qr=(_u,$u)=>new ci(_u,$u);c$p();A$h();function PanoTag(){const _u=react$1.exports.useRef(),$u=useController(),Tu=useFiveInstance(),Cu=react$1.exports.useRef(qr(Tu,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:!1,unfoldDistance:{max:100}}}}}));return react$1.exports.useEffect(()=>{var Ru;if(((Ru=$u.configs)==null?void 0:Ru.keyframeMap.PanoTag)===!1)return;const Pu=Lu=>{if(!Cu.current)return;const{start:Bu,end:Vu,data:Ou}=Lu,Du=Ou,ku=Date.now().toString(),Fu="PointTag",Nu="2D",Gu=[Du.vertex.x,Du.vertex.y,Du.vertex.z],zu=(()=>Du.imgUrl?{id:ku,pointType:Fu,position:Gu,dimensionType:Nu,contentType:"ImageText",stickType:"2DPoint",data:{text:Du.text,mediaData:[{type:"Image",url:Du.imgUrl}]}}:{id:ku,pointType:Fu,position:Gu,dimensionType:Nu,contentType:"Text",stickType:"2DPoint",data:{text:Du.text}})();Cu.current.load({tagList:[zu]});const Hu=Cu.current.getTagById(ku);Hu&&(Hu.state.unfolded=!0,Cu.current.updateRenderAllTags()),_u.current=setTimeout(()=>{var ju;const Uu=Cu.current.getTagById(ku);!Uu||(Uu.state&&(Uu.state.unfolded=!1,Cu.current.updateRenderAllTags()),(ju=Uu.hooks)==null||ju.on("folded",()=>{setTimeout(()=>{Uu.state&&(Uu.state.visible=!1,Cu.current.destroyTagById(ku))},1500)}))},Vu-Bu)};return $u.on(VreoKeyframeEnum.PanoTag,Pu),()=>{$u.off(VreoKeyframeEnum.PanoTag,Pu),_u.current&&clearTimeout(_u.current)}},[$u]),null}function evenNumber(_u,$u){const Tu=Math.round(_u);return Tu%2===0?Tu:Tu+Number($u!=null&&$u.smaller?-1:1)}function centerPoint(_u,$u){return new Vector3((_u.x+$u.x)/2,(_u.y+$u.y)/2,(_u.z+$u.z)/2)}const transformPositionToVector3=({x:_u,y:$u,z:Tu})=>new Vector3(_u,$u,Tu);function createResizeObserver(_u,$u){if(!$u||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Tu=new ResizeObserver(_u);return{observe:()=>Tu.observe($u),unobserve:()=>Tu.unobserve($u)}}}const CSS3DRenderPlugin=_u=>{const $u={disposeCallbacks:[]},Tu=(...Pu)=>{var Zu,_c,Xc;const Ru=Pu[0].map(_h=>_h instanceof Vector3?_h:transformPositionToVector3(_h)),Lu=Pu[1];if((Ru==null?void 0:Ru.length)<4)return console.error("points must be equal or greater than than 4");if(!((Zu=_u==null?void 0:_u.model)!=null&&Zu.loaded))return console.error("five.model.loaded is: ",(_c=_u==null?void 0:_u.model)==null?void 0:_c.loaded);const Bu=_u.getElement();if(!Bu)return console.error("five.getElement() is "+Bu);const Vu=[],Ou=(Lu==null?void 0:Lu.ratio)||.00216;Ou<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const Du=(Lu==null?void 0:Lu.dpr)||1,ku=(Lu==null?void 0:Lu.mode)||"front",Fu=(Xc=Lu==null?void 0:Lu.autoRender)!=null?Xc:!0,Nu=(Lu==null?void 0:Lu.behindFiveContainer)||Bu.parentElement||document.body,Gu=(Lu==null?void 0:Lu.container)||document.createElement("div");Gu.classList.add("__Vreo-plugin--CSS3DRenderPlugin");const{css3DObject:zu,mesh:Hu}=Cu(Ru,{ratio:Ou,dpr:Du,container:Gu,mode:ku});let Uu;const ju=ku==="front"&&!$u.frontMode,Wu=ku==="behind"&&!$u.behindMode,Qu=!(ju||Wu);let qu=!1,Yu=null;Wu&&($u.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),ju&&($u.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:Ju,css3DRenderer:_d}=ku==="behind"?$u.behindMode:$u.frontMode,tp=(()=>{if(Qu)return()=>{Ju.add(zu)};{const _h=()=>{const ap=evenNumber(Bu.clientWidth,{smaller:!0}),hp=evenNumber(Bu.clientHeight,{smaller:!0});_d.setSize(ap,hp)};_h(),Uu=createResizeObserver(_h,Bu),_d.domElement.style.position="absolute",_d.domElement.style.top="0",_d.domElement.style.userSelect="none",_d.domElement.style.pointerEvents="none";const ip=()=>{qu||(Yu=requestAnimationFrame(ip),_d.render(Ju,_u.camera))};return()=>{var ap;Ju.add(zu),(ap=Uu==null?void 0:Uu.observe)==null||ap.call(Uu),ip(),ku==="behind"&&Hu&&(_u.scene.add(Hu),Vu.push(()=>Hu&&_u.scene.remove(Hu)))}}})();ju&&(Bu.parentElement||document.body).appendChild(_d.domElement),Wu&&Nu.appendChild(_d.domElement);const Ku=()=>{var _h;return qu=!0,Vu.forEach(ip=>ip==null?void 0:ip()),Ju.remove(zu),typeof Yu=="number"&&cancelAnimationFrame(Yu),Ju.children.length===0&&(_d.domElement.remove(),ku==="front"&&($u.frontMode=void 0),ku==="behind"&&($u.behindMode=void 0),!$u.behindMode&&!$u.frontMode&&((_h=Uu==null?void 0:Uu.unobserve)==null||_h.call(Uu))),!0},Xu=$u.disposeCallbacks.findIndex(_h=>_h===Ku);return Xu!==-1?$u.disposeCallbacks.splice(Xu,1):$u.disposeCallbacks.push(Ku),Fu&&tp(),{container:Gu,dispose:Ku,css3DObject:zu,render:Fu?void 0:tp}},Cu=(Pu,Ru)=>{const{ratio:Lu,dpr:Bu,container:Vu,mode:Ou}=Ru,Du=Pu[0].distanceTo(Pu[1]),ku=Pu[1].distanceTo(Pu[2]),Fu=evenNumber(Du/Lu*Bu),Nu=evenNumber(ku/Lu*Bu),Gu=new CSS3DObject(Vu);Gu.scale.set(Lu,Lu,Lu),Vu.style.width=Fu+"px",Vu.style.height=Nu+"px",Vu.style.pointerEvents="none";const zu=centerPoint(Pu[0],Pu[2]),Hu=Pu[1].clone().sub(Pu[0]),Uu=Pu[2].clone().sub(Pu[1]),ju=new Vector3(0,1,0).angleTo(new Vector3(0,Uu.y,Uu.z)),Wu=new Vector3(1,0,0).angleTo(new Vector3(Hu.x,0,Hu.z)),Qu=Hu.angleTo(new Vector3(Hu.x,0,Hu.z)),qu=(Uu.z>0?-1:1)*ju,Yu=(Hu.z<0?1:-1)*Wu,Ju=(Hu.x>0&&Hu.y<0||Hu.x<0&&Hu.y>0?-1:1)*Qu;Gu.rotateOnWorldAxis(new Vector3(1,0,0),qu),Gu.rotateOnWorldAxis(new Vector3(0,1,0),Yu),Gu.rotateOnWorldAxis(new Vector3(0,0,1),Ju),Gu.position.set(zu.x,zu.y,zu.z);let _d;if(Ou==="behind"){const tp=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),Ku=new PlaneGeometry(Fu,Nu);_d=new Mesh(Ku,tp),_d.name="CSS3DRenderPlugin-mesh",_d.position.copy(Gu.position),_d.rotation.copy(Gu.rotation),_d.scale.copy(Gu.scale)}return{css3DObject:Gu,mesh:_d}};return{create3DDomContainer:Tu,disposeAll:()=>{$u.disposeCallbacks.forEach(Pu=>Pu==null?void 0:Pu()),$u.disposeCallbacks=[]}}},calcPoints=(_u,$u,Tu,Cu)=>{const Pu=Tu/375,Ru=Cu/375,Lu=new PlaneGeometry(Pu,Ru);if($u){const ju=new Vector3($u.x+_u.x,$u.y+_u.y,$u.z+_u.z);Lu.lookAt(ju)}const Bu=new MeshBasicMaterial({color:16776960,side:DoubleSide}),Vu=new Mesh(Lu,Bu),Ou=_u.clone();Vu.position.copy(Ou);const[Du,ku,Fu,Nu]=Vu.geometry.vertices,Gu=Ou.clone().add(Nu),zu=Ou.clone().add(Fu),Hu=Ou.clone().add(ku),Uu=Ou.clone().add(Du);return[Gu,zu,Uu,Hu]};function PanoTextLabel(){const _u=react$1.exports.useRef(),$u=useController(),Tu=useFiveInstance(),Cu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{var Ru;if(((Ru=$u.configs)==null?void 0:Ru.keyframeMap.PanoTextLabel)===!1)return;const Pu=Lu=>{var qu,Yu,Ju;const{start:Bu,end:Vu,data:Ou}=Lu,Du=Ou;if(Ou.text==="")return;const{x:ku,y:Fu,z:Nu}=Du.vertex,Gu=new Vector3(ku,Fu,Nu),zu=new Vector3((qu=Du.normal)==null?void 0:qu.x,(Yu=Du.normal)==null?void 0:Yu.y,(Ju=Du.normal)==null?void 0:Ju.z),Hu=200,Uu=30,ju=calcPoints(Gu,Du.normal&&zu,Hu,Uu);Cu.current||(Cu.current=CSS3DRenderPlugin(Tu));const Wu=Cu.current.create3DDomContainer(ju),Qu=Wu==null?void 0:Wu.css3DObject;if(Ou.quaternion){const _d=new Quaternion(Ou.quaternion.x,Ou.quaternion.y,Ou.quaternion.z,Ou.quaternion.w);Qu==null||Qu.quaternion.copy(_d)}Wu!=null&&Wu.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${Ou.fontSize||16}px`},className:"PanoText-innerText",children:Ou.text||""})})}),Wu==null?void 0:Wu.container),_u.current=setTimeout(()=>{var _d;(_d=Cu.current)==null||_d.disposeAll()},Vu-Bu)};return $u.on(VreoKeyframeEnum.PanoTextLabel,Pu),()=>{$u.off(VreoKeyframeEnum.PanoTextLabel,Pu),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}function Prompter(){const[_u,$u]=react$1.exports.useState(""),[Tu,Cu]=react$1.exports.useState(!0),Pu=react$1.exports.useRef(null),Ru=useController();return react$1.exports.useEffect(()=>{var Bu;if(((Bu=Ru.configs)==null?void 0:Bu.keyframeMap.Prompter)===!1)return;const Lu=Vu=>{const{start:Ou,end:Du,data:ku}=Vu;$u(ku.text),Cu(!1),Pu.current&&(clearTimeout(Pu.current),Pu.current=null),Pu.current=setTimeout(()=>{Cu(!0),$u(""),Pu.current&&clearTimeout(Pu.current),Pu.current=null},Du-Ou)};return Ru.on(VreoKeyframeEnum.Prompter,Lu),()=>{Ru.off(VreoKeyframeEnum.Prompter,Lu)}},[Ru]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":Tu,[`vreo-prompter-left--${Ru.agentType}`]:!0}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:_u})})})}function UpdateVRPanorama(){const _u=useController(),$u=useFiveInstance(),Tu=react$1.exports.useRef(null),Cu=react$1.exports.useRef(null),Pu=react$1.exports.useCallback(()=>{if(Cu.current=null,Tu.current){const Bu=parseWork(Tu.current);$u.load(Bu)}},[]),Ru=react$1.exports.useCallback(()=>{if(Tu.current){const Bu=parseWork(Tu.current);Object.assign(window,{$rawWork:Bu}),$u.load(Bu)}},[]),Lu=react$1.exports.useCallback(()=>{!Cu.current||$u.load(Cu.current)},[]);return react$1.exports.useEffect(()=>{const Bu=Vu=>{var ku;Tu.current||(Tu.current=$u.work.raw.works);const Ou=Vu.data;if(Ou.work){Cu.current=parseWork(Ou.work),$u.load(Cu.current);return}const Du=(ku=$u.work)==null?void 0:ku.raw.works[0];if(Ou.dynamic_scene&&!Ou.panorama){const Nu=JSON.parse(Du).panorama,Gu=Ou.dynamic_scene.images.index;Nu.list[Gu]=Ou.dynamic_scene.images,Ou.panorama=Nu,delete Ou.dynamic_scene}Object.assign(window,{$work1:JSON.parse(Du),$work2:Ou,parseWork}),Cu.current=parseWork([Du,Ou]),$u.load(Cu.current)};return _u.on(VreoKeyframeEnum.UpdateVRPanorama,Bu),_u.on(VreoKeyframeEnum.Exit,Pu),_u.on("loaded",Pu),_u.on("paused",Ru),_u.on("playing",Lu),()=>{_u.off(VreoKeyframeEnum.UpdateVRPanorama,Bu),_u.off(VreoKeyframeEnum.Exit,Pu),_u.off("loaded",Pu),_u.off("paused",Ru),_u.off("playing",Lu)}},[]),jsx(Fragment,{})}const inlinePlay=_u=>{if(!_u)return;const $u=()=>{_u.removeEventListener("canplaythrough",$u);try{_u.play()}catch{}};_u.addEventListener("canplaythrough",$u),_u.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const _u=react$1.exports.useRef(null),$u=react$1.exports.useRef(),Tu=useController(),Cu=react$1.exports.useRef(),[Pu,Ru]=react$1.exports.useState(!1),Lu=useFiveInstance(),Bu=Vu=>{!$u.current||($u.current.src=Vu)};return react$1.exports.useEffect(()=>{const Vu=async Ou=>{const{start:Du,end:ku}=Ou,{videoSrc:Fu,fov:Nu,direction:Gu,panoIndex:zu,vector:Hu}=Ou.data,[Uu,ju]=(()=>{if(Hu)return[Hu.longitude,Hu.latitude];if(!Gu)return[0,0];let Wu=-Math.atan2(Gu.x,-Gu.z);Wu=(Wu%PI_2+PI_2)%PI_2;const Qu=-Math.asin(Gu.y/1);return[Wu,Qu]})();Lu.setState({fov:Nu,panoIndex:zu,longitude:Uu,latitude:ju},!0),Bu(Fu),inlinePlay($u.current),Ru(!0),Cu.current=setTimeout(()=>{var Wu,Qu;(Wu=$u.current)!=null&&Wu.paused||(Qu=$u.current)==null||Qu.pause(),Ru(!1),Bu("")},ku-Du)};return Tu.on(VreoKeyframeEnum.VideoEffect,Vu),()=>{Tu.off(VreoKeyframeEnum.VideoEffect,Vu),Cu.current&&clearTimeout(Cu.current)}},[Tu]),react$1.exports.useEffect(()=>{var Ou,Du;if(!_u.current)return;const Vu=((Du=(Ou=Tu.configs)==null?void 0:Ou.videos)==null?void 0:Du.videoEffect)||document.createElement("video");Vu.setAttribute("playsinline","true"),Vu.setAttribute("webkit-playsinline","true"),Vu.setAttribute("autoplay","true"),Vu.setAttribute("key","VideoEffect-video"),Vu.setAttribute("class","VideoEffect-video"),$u.current=Vu,_u.current.append($u.current),document.addEventListener("WeixinJSBridgeReady",function(){var ku;(ku=$u.current)==null||ku.play()},!1),_u.current},[]),jsx("div",{ref:_u,className:classNames("VideoEffect",{"VideoEffect--visible":Pu})})}const Preloader={blob:_u=>{const $u=()=>null;return new Promise((Tu,Cu)=>{const Pu=new XMLHttpRequest,Ru=()=>{Pu.ontimeout=$u,Pu.onreadystatechange=$u,Pu.onprogress=$u,Pu.onabort=$u};Pu.ontimeout=()=>{Cu(new Error("timeout")),Ru()},Pu.onreadystatechange=()=>{Pu.readyState===4&&(Pu.status===0&&!Pu.response||(Pu.status===200||Pu.status===0?(Tu(Pu.response),Ru()):(Cu(new Error("status:"+Pu.status)),Ru())))},Pu.open("GET",_u,!0),Pu.responseType="blob",Pu.send(null)})}};class AudioLike extends Subscribe{constructor({duration:Tu}={}){super();bv(this,"$timestamp",null);bv(this,"$currentTime",0);bv(this,"$duration",0);bv(this,"stopInterval");bv(this,"muted",!1);bv(this,"src","");Tu&&(this.$duration=Tu)}setAttribute(Tu,Cu){}play(){this.$currentTime===this.$duration&&(this.$currentTime=0),this.$timestamp===null&&(this.$timestamp=performance.now()),this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=null}requestAnimationFrameLoop(){if(this.$timestamp===null)return;const Tu=performance.now();this.$currentTime+=Tu-this.$timestamp,this.$timestamp=Tu,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(Tu){this.$currentTime=Tu*1e3}get duration(){return this.$duration}set duration(Tu){this.$duration=Tu}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(Tu,Cu,Pu=!1){this.on(Tu,Cu)}removeEventListener(Tu,Cu,Pu=!1){this.off(Tu,Cu)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(Tu,Cu,Pu,Ru,Lu={preload:!0}){var Nu,Gu;if(!Lu.videoInstance)if(cacheInstance.videoInstance)Lu.videoInstance=cacheInstance.videoInstance;else{const zu=document.createElement("video");zu.style.opacity="0",zu.style.pointerEvents="none",zu.style.display="none",document.body.append(zu),Lu.videoInstance=zu,cacheInstance.videoInstance=zu,zu.playsInline=!0,zu.controls=!1}const Bu=new PlaneGeometry(Tu,Cu,Pu,Ru),Vu=new VideoTexture(Lu.videoInstance),Ou=new ShaderMaterial({uniforms:{map:{value:Vu},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(Bu,Ou);bv(this,"options");bv(this,"videoUrl");bv(this,"freeze");bv(this,"paused");bv(this,"audioInstance");bv(this,"audioLikeInstance");bv(this,"$removeEventListener");if(this.options=Lu,this.freeze=!1,this.paused=!0,Lu.audioInstance)this.audioInstance=Lu.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const zu=document.createElement("audio");zu.crossOrigin="",zu.muted=!1,zu.autoplay=!1,zu.style.display="none",document.body.appendChild(zu),this.audioInstance=zu,cacheInstance.audioInstance=zu}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const Du=zu=>runInAction(()=>this.paused=zu),ku=()=>Du(!0),Fu=()=>Du(!1);this.audioInstance.addEventListener("pause",ku),this.audioInstance.addEventListener("play",Fu),(Nu=this.options.videoInstance)==null||Nu.addEventListener("pause",ku),(Gu=this.options.videoInstance)==null||Gu.addEventListener("play",Fu),this.audioLikeInstance.addEventListener("pause",ku),this.audioLikeInstance.addEventListener("play",Fu),this.$removeEventListener=()=>{var zu,Hu;this.audioInstance.removeEventListener("pause",ku),this.audioInstance.removeEventListener("play",Fu),(zu=this.options.videoInstance)==null||zu.removeEventListener("pause",ku),(Hu=this.options.videoInstance)==null||Hu.removeEventListener("play",Fu),this.audioLikeInstance.removeEventListener("pause",ku),this.audioLikeInstance.removeEventListener("play",Fu)}}get mediaInstance(){return this.videoUrl?getMediaType(this.videoUrl)==="audio"?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(Tu){if(this.videoUrl===Tu)return;this.videoUrl=Tu,this.freeze=!0,await this.mediaInstance.pause();const Cu=this.material.uniforms;this.mediaInstance.muted=!0,this.mediaInstance.src=this.options.preload||this.options.preload===void 0||getMediaType(this.videoUrl)==="video"?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.mediaInstance.setAttribute("data-src",this.videoUrl);const Pu=()=>{this.mediaInstance.currentTime!==0&&(this.freeze=!1,this.mediaInstance.muted=!1,Cu.enable.value=getMediaType(this.videoUrl)?1:0,this.mediaInstance.removeEventListener("timeupdate",Pu,!1))};this.mediaInstance.addEventListener("timeupdate",Pu,!1)}async play(Tu="",Cu=0,Pu){return Tu=Tu||"",Pu&&!Tu?(this.currentTime&&(this.mediaInstance.currentTime=Cu),this.mediaInstance.duration=Pu,this.videoUrl="",this.mediaInstance.play(),!0):Tu?Tu===this.videoUrl?(this.mediaInstance.currentTime=Cu,await this.mediaInstance.play(),!0):(await this.update(Tu),this.mediaInstance.pause(),await new Promise(Ru=>setTimeout(async()=>{this.mediaInstance.currentTime=Cu,await this.mediaInstance.play(),Ru(!0)},20))):(this.videoUrl?await this.mediaInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.mediaInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor($u,Tu){bv(this,"videoAgentMesh");bv(this,"scene",new Scene);bv(this,"camera",new OrthographicCamera(-240,240,135,-135));bv(this,"renderer",new WebGLRenderer({alpha:!0}));bv(this,"disposers",[]);bv(this,"run",()=>{!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.run)});bv(this,"dispose",()=>{var $u;($u=this.videoAgentMesh)==null||$u.dispose(),this.disposers.forEach(Tu=>Tu==null?void 0:Tu())});if(this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,Tu),$u){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Cu=this.renderer.domElement;Cu.classList.add("VideoAgent-canvas");const Pu=addResizeListener($u,(Ru,Lu)=>{this.renderer.setSize(Ru*window.devicePixelRatio,Lu*window.devicePixelRatio),Cu.style.width=`${Ru}px`,Cu.style.height=`${Lu}px`});this.disposers.push(Pu),$u.append(Cu),this.scene.add(this.videoAgentMesh),this.run()}}}function VideoAgent(_u){var Ru;const $u=react$1.exports.useRef(null),Tu=useController(),Cu=react$1.exports.useMemo(()=>{var Lu;return((Lu=Tu.avatar)==null?void 0:Lu.url)&&Tu.avatar.force===!0},[Tu.avatar]),Pu=react$1.exports.useMemo(()=>{var Lu;return Cu?!1:((Lu=Tu.videoAgentScene)==null?void 0:Lu.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[Tu.videoAgentScene,Cu]);return react$1.exports.useEffect(()=>{if(!$u.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(Tu.videoAgentScene){console.warn('VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4');return}const Lu=new VideoAgentScene($u.current,_u.options);return Tu.videoAgentScene=Lu,()=>{var Bu;Tu.dispose(),(Bu=Tu.videoAgentScene)==null||Bu.dispose()}},[]),jsxs(Fragment,{children:[jsx("div",{className:"Avatar",style:{display:Cu?"block":"none"},children:jsx("div",{className:"Avatar-wrapper ratio-1-1",children:jsx("img",{className:"Avatar-img",src:(Ru=Tu.avatar)==null?void 0:Ru.url,onClick:()=>{var Lu;return(Lu=_u.onClick)==null?void 0:Lu.call(_u)}})})}),jsx("div",{className:classNames("VideoAgent",{hide:!Pu}),children:jsx("div",{className:"VideoAgent-container",children:jsx("div",{className:"VideoAgent-wrapper ratio-16-9",children:jsx("div",{className:"VideoAgent-inner",ref:$u,children:jsx("div",{className:"VideoAgent-play",onClick:()=>{var Lu;return(Lu=_u.onClick)==null?void 0:Lu.call(_u)}})})})})})]})}const blankAudioSrc="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",audioList=[];function getAudio(_u){let $u=audioList.find(Tu=>!Tu.realSrc||Tu.realSrc===blankAudioSrc);return $u||($u=new IAudio(blankAudioSrc),audioList.push($u)),_u&&($u.src=_u),$u}async function waitForBlankAudioGenerated(_u=100,$u=2e3){console.log("waitForBlankAudioGenerated, needGenerate: ",audioList.some(Pu=>!Pu.ended&&Pu.src===blankAudioSrc));const Tu=Date.now();let Cu=!1;for(;audioList.some(Pu=>!Pu.ended&&Pu.src===blankAudioSrc)&&!Cu;){if(Date.now()-Tu>$u)return Cu=!0,Promise.resolve();await new Promise(Pu=>setTimeout(Pu,_u))}}function generateBlankAudio(_u){const $u=_u-audioList.length;if(!($u<=0))for(let Tu=0;Tu<$u;Tu++)audioList.push(new IAudio(blankAudioSrc))}function initAudio(_u){_u.inited||(_u.src&&(_u.inited=!0,_u.removeDocumentEventListener()),_u.src===blankAudioSrc&&_u.play())}class IAudio extends Audio{constructor(Tu){super(Tu);bv(this,"preload","auto");bv(this,"realSrc","");bv(this,"inited",!1);bv(this,"removeDocumentEventListener");this.realSrc=Tu!=null?Tu:"",super.addEventListener("ended",()=>{this.src=""});const Cu=()=>initAudio(this);document.addEventListener("click",Cu),document.addEventListener("touchend",Cu),this.removeDocumentEventListener=()=>{document.removeEventListener("click",Cu),document.removeEventListener("touchend",Cu)}}get src(){return super.src}set src(Tu){super.src=Tu,this.realSrc=Tu}}function BgMusic(){const _u=useController();return react$1.exports.useEffect(()=>{const $u=async(Tu,Cu)=>{const{start:Pu,end:Ru}=Tu,Lu=(Cu-Pu)/1e3;if(Lu<0||Lu>=Tu.end-Tu.start)return;const Bu=getAudio(Tu.data.url);Bu.currentTime=Math.max(0,Lu),Bu.play();const Vu=()=>{Bu.pause(),Bu.src=""};Bu.addEventListener("ended",()=>{Vu()}),_u.once("paused",()=>{Vu()})};return _u.on(VreoKeyframeEnum.BgMusic,$u),()=>{_u.off(VreoKeyframeEnum.BgMusic,$u)}}),jsx(Fragment,{})}const prefix="https://vr-public.realsee-cdn.cn/release/static/image/release/",WAVES={single:{width:766,height:60,frames:20,hevc:"vapor/static/wave-single.140d197f4838c130b69e87dfd0705479.mov",vp9:"vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm",png:"vapor/static/wave-single.f51aade2a6e1c59211698a1a24e6135f.png"},double:{width:766,height:60,frames:16,hevc:"vapor/static/wave-double.3e6d73050ee6958cc3060b107ebe5f39.mov",vp9:"/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm",png:"/vapor/static/wave-double.ab4fe7d8a70395109ca4f759af7bd53f.png"},solid:{width:1126,height:90,frames:48,hevc:"vapor/static/wave-solid.cf68912a93275d07aa6b5097ea11fdda.mov",vp9:"vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm",png:"vapor/static/wave-solid.6969d7f3f2f44f7ac1ade30e65660cb1.png"},swap:{width:2250,height:180,frames:41,hevc:"vapor/static/wave-swap.b38f22e2cf84ee21e9be35f7f56c9cfc.mov",vp9:"vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm",png:"vapor/static/wave-swap.772ba526a7210dcc01567062c6319545.png"},expand:{width:2250,height:180,frames:45,hevc:"vapor/static/wave-expand.9529956c5954740cd4c9d07d51e32822.mov",vp9:"vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm",png:"vapor/static/wave-expand.62fcf27b445533e6eb1b17bab5eafa0d.png"}},userAgent=typeof navigator!="undefined"?navigator.userAgent:"",isAppleDevice=/(iPhone|iPad|iPod)/i.test(userAgent),isSafari=/safari/i.test(userAgent)&&!/chrome/i.test(userAgent)&&/version/i.test(userAgent),isMicroMessenger=/microMessenger/i.test(userAgent),canPlayHevc=isAppleDevice||isSafari,canPlayVp9=typeof MediaSource!="undefined"&&MediaSource.isTypeSupported("video/webm; codecs=vp9");function Wave(_u){const $u=React.useMemo(()=>{var Ru;const Pu=(Ru=_u==null?void 0:_u.appearance)!=null?Ru:"solid";return WAVES[Pu]},[_u==null?void 0:_u.appearance]),Tu=React.useMemo(()=>$u.height/$u.width,[$u]);let Cu=null;return isMicroMessenger?Cu=jsx(KeyframeWaveContent,{wave:$u}):canPlayHevc?Cu=jsx(VideoWaveContent,{format:"hevc",wave:$u}):canPlayVp9?Cu=jsx(VideoWaveContent,{format:"vp9",wave:$u}):Cu=jsx(KeyframeWaveContent,{wave:$u}),jsx("div",{className:"vreo-wave",onClick:_u==null?void 0:_u.onClick,children:jsx("div",{style:{position:"relative",width:"100%",paddingTop:`${Tu*100}%`},children:jsx("div",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0},children:Cu})})})}const VideoWaveContent=({wave:_u,format:$u})=>{const Tu=react$1.exports.useRef(null),[Cu,Pu]=react$1.exports.useState(!1),[Ru,Lu]=react$1.exports.useState(!1),Bu=prefix+_u[$u];react$1.exports.useEffect(()=>{Pu(!1)},[Bu]);const Vu=react$1.exports.useCallback(()=>{Tu.current&&Tu.current.play(),Pu(!0)},[]),Ou=react$1.exports.useCallback(()=>{Lu(!0)},[]);return Ru?jsx(KeyframeWaveContent,{wave:_u}):jsx("video",{style:{opacity:Cu?1:0},preload:"auto",ref:Tu,width:"100%",height:"100%",playsInline:!0,autoPlay:!0,onCanPlay:Vu,onError:Ou,muted:!0,loop:!0,src:Bu})},KeyframeWaveContent=({wave:_u})=>{const $u=prefix+_u.png;return jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(${$u})`,backgroundSize:"100%",animationName:"vreo-wave-keyframes",animationTimingFunction:`steps(${_u.frames-1})`,animationDuration:`${_u.frames/25}s`,animationIterationCount:"infinite"}})},AppView=observer(({controller:_u})=>{var $u,Tu,Cu,Pu;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!_u.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[jsx(Wave,{onClick:($u=_u.configs)==null?void 0:$u.onWaveClick,appearance:(Tu=_u.waveAppearance)!=null?Tu:"single"}),jsx(VideoAgent,{onClick:()=>{var Ru;if((Ru=_u.configs)!=null&&Ru.onAvatarClick){_u.configs.onAvatarClick();return}_u.playing?_u.setPlaying(!1):_u.setPlaying(!0)},options:((Cu=_u.configs)==null?void 0:Cu.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(Pu=_u.configs)==null?void 0:Pu.customPanelChildren]})})});function App(){const _u=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(ResizeObserver$1,{}),jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:_u})]})}const DrawerView=observer(({controller:_u})=>{var Cu;const $u="400px",Tu=(()=>{var Ru;const Pu=(Ru=_u.drawerConfig)==null?void 0:Ru.height;return Pu?typeof Pu=="number"?Pu+"px":Pu:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":_u.drawerConfig&&_u.drawerConfig.content}),onClick:()=>_u.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:Tu,maxHeight:$u},children:((Cu=_u.drawerConfig)==null?void 0:Cu.content)||""})})});function Drawer(){const _u=useController();return jsx(DrawerView,{controller:_u})}const PopUpView=observer(({controller:_u})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":_u.popUp}),onClick:()=>_u.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:_u.popUp||""})}));function PopUp(){const _u=useController();return jsx(PopUpView,{controller:_u})}const DefaultAudioCacheLength=3;var Um,jm;const audioCacheLength=Number((jm=(Um=location.search.match(/audio_cache=(\d+)/))==null?void 0:Um[1])!=null?jm:DefaultAudioCacheLength);class Player extends Subscribe{constructor(Tu,Cu={}){var Pu;super();bv(this,"$five");bv(this,"controller");bv(this,"configs");if(this.$five=Tu,generateBlankAudio(audioCacheLength),Cu.container||(Cu.container=Cu.containter),!Cu.container){const Ru=document.getElementById("vreo-app")||document.createElement("div");reactDom.exports.unmountComponentAtNode(Ru),Ru.setAttribute("id","vreo-app"),Cu.container=Ru;const Lu=(Pu=Tu.getElement())==null?void 0:Pu.parentNode;Lu?Lu.append(Ru):document.body.append(Ru)}Cu.container.classList.contains("vreo-app")||Cu.container.classList.add("vreo-app"),this.configs=Object.freeze(Object.assign({keyframeMap:{}},Cu)),this.controller=new Controller({five:Tu,container:Cu.container,configs:this.configs}),reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Ru,Lu)=>jsx(Ru,{subscribe:{on:(Bu,Vu)=>this.on(Bu,Vu),once:(Bu,Vu)=>this.once(Bu,Vu),off:(Bu,Vu)=>this.off(Bu,Vu)},five:Tu},Lu))]}),Cu.container),reaction(()=>this.controller.ended,Ru=>{Ru&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Ru=>{this.controller.ended||this.emit(Ru?"playing":"paused")})}async load(Tu,Cu=0,Pu=!1,Ru=!1){var Lu,Bu,Vu,Ou;if(this.controller.clear(),this.controller.setLoading(!0),Ru&&(Tu=JSON.parse(JSON.stringify(Tu))),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=Tu,(Lu=this.controller.mediaInstance)==null||Lu.pause(),this.$five.imageOptions.size&&((Bu=this.configs.imageOptions)==null?void 0:Bu.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Pu||Pu===void 0&&this.configs.autoPreload){const Du=Tu.keyframes.filter(Fu=>!(Fu.type!==VreoKeyframeEnum.CameraMovement||Fu.data.panoIndex===void 0)).reduce((Fu,Nu)=>{const Gu=Nu.data.panoIndex;return Fu[Gu]||(Fu[Gu]=!0),Fu},{}),ku=Object.keys(Du);for(let Fu=0;Fu<ku.length;Fu++)await this.$five.preloadPano(Number(ku[Fu]))}return this.emit("loaded",Tu),this.controller.emit("loaded",Tu),(Vu=this.controller.videoAgentScene)!=null&&Vu.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=Cu/1e3),this.controller.setAvatar(Tu.video.avatar),await waitForBlankAudioGenerated(),await((Ou=this.controller.videoAgentScene)==null?void 0:Ou.videoAgentMesh.play(Tu.video.url,Cu/1e3,Tu.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((Du,ku)=>this.emit(Du,ku,this.controller.currentTime)),this.controller.setLoading(!1),!0}get paused(){return!this.controller.playing}play(Tu){var Cu;return this.controller.playing||(Tu&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=Tu/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setEnded(!1),this.controller.setPlaying(!0),(Cu=this.controller.vreoUnit)==null||Cu.keyframes.forEach(Pu=>{Pu.type===VreoKeyframeEnum.BgMusic&&(Pu.parsed=!1)})),!0}setAppearance(Tu){this.controller.setAppearance(Tu)}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.controller.dispose(),this.configs.container&&reactDom.exports.unmountComponentAtNode(this.configs.container)}}console.log(`
    \u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
    \u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
    \u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
    \u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
    \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`);var _default="";export{CSS3DRenderPlugin as C,FiveCanvas as F,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,createFiveProvider as c,Raycaster as d,Fragment as e,reactDom as f,jsx as j,parseWork as p,react$1 as r,tweenProgress as t,unsafe__useFiveInstance as u};
