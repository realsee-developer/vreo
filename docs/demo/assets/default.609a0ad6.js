var Nl=Object.defineProperty;var kl=(ca,ga,_s)=>ga in ca?Nl(ca,ga,{enumerable:!0,configurable:!0,writable:!0,value:_s}):ca[ga]=_s;var il=(ca,ga,_s)=>(kl(ca,typeof ga!="symbol"?ga+"":ga,_s),_s);const p$4=function(){const ga=document.createElement("link").relList;if(ga&&ga.supports&&ga.supports("modulepreload"))return;for(const Ms of document.querySelectorAll('link[rel="modulepreload"]'))Ss(Ms);new MutationObserver(Ms=>{for(const Cs of Ms)if(Cs.type==="childList")for(const Ts of Cs.addedNodes)Ts.tagName==="LINK"&&Ts.rel==="modulepreload"&&Ss(Ts)}).observe(document,{childList:!0,subtree:!0});function _s(Ms){const Cs={};return Ms.integrity&&(Cs.integrity=Ms.integrity),Ms.referrerpolicy&&(Cs.referrerPolicy=Ms.referrerpolicy),Ms.crossorigin==="use-credentials"?Cs.credentials="include":Ms.crossorigin==="anonymous"?Cs.credentials="omit":Cs.credentials="same-origin",Cs}function Ss(Ms){if(Ms.ep)return;Ms.ep=!0;const Cs=_s(Ms);fetch(Ms.href,Cs)}};p$4();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(ca){if(ca.__esModule)return ca;var ga=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(ca).forEach(function(_s){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}),ga}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(ca){if(ca==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(ca)}function shouldUseNative(){try{if(!Object.assign)return!1;var ca=new String("abc");if(ca[5]="de",Object.getOwnPropertyNames(ca)[0]==="5")return!1;for(var ga={},_s=0;_s<10;_s++)ga["_"+String.fromCharCode(_s)]=_s;var Ss=Object.getOwnPropertyNames(ga).map(function(Cs){return ga[Cs]});if(Ss.join("")!=="0123456789")return!1;var Ms={};return"abcdefghijklmnopqrst".split("").forEach(function(Cs){Ms[Cs]=Cs}),Object.keys(Object.assign({},Ms)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(ca,ga){for(var _s,Ss=toObject(ca),Ms,Cs=1;Cs<arguments.length;Cs++){_s=Object(arguments[Cs]);for(var Ts in _s)hasOwnProperty.call(_s,Ts)&&(Ss[Ts]=_s[Ts]);if(getOwnPropertySymbols){Ms=getOwnPropertySymbols(_s);for(var Is=0;Is<Ms.length;Is++)propIsEnumerable.call(_s,Ms[Is])&&(Ss[Ms[Is]]=_s[Ms[Is]])}}return Ss};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=objectAssign,n$5=typeof Symbol=="function"&&Symbol.for,p$3=n$5?Symbol.for("react.element"):60103,q$2=n$5?Symbol.for("react.portal"):60106,r$4=n$5?Symbol.for("react.fragment"):60107,t$3=n$5?Symbol.for("react.strict_mode"):60108,u$4=n$5?Symbol.for("react.profiler"):60114,v$3=n$5?Symbol.for("react.provider"):60109,w$2=n$5?Symbol.for("react.context"):60110,x$2=n$5?Symbol.for("react.forward_ref"):60112,y$2=n$5?Symbol.for("react.suspense"):60113,z$1=n$5?Symbol.for("react.memo"):60115,A$2=n$5?Symbol.for("react.lazy"):60116,B$1=typeof Symbol=="function"&&Symbol.iterator;function C$3(ca){for(var ga="https://reactjs.org/docs/error-decoder.html?invariant="+ca,_s=1;_s<arguments.length;_s++)ga+="&args[]="+encodeURIComponent(arguments[_s]);return"Minified React error #"+ca+"; visit "+ga+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$3={};function F$3(ca,ga,_s){this.props=ca,this.context=ga,this.refs=E$3,this.updater=_s||D$1}F$3.prototype.isReactComponent={};F$3.prototype.setState=function(ca,ga){if(typeof ca!="object"&&typeof ca!="function"&&ca!=null)throw Error(C$3(85));this.updater.enqueueSetState(this,ca,ga,"setState")};F$3.prototype.forceUpdate=function(ca){this.updater.enqueueForceUpdate(this,ca,"forceUpdate")};function G$2(){}G$2.prototype=F$3.prototype;function H$2(ca,ga,_s){this.props=ca,this.context=ga,this.refs=E$3,this.updater=_s||D$1}var I$2=H$2.prototype=new G$2;I$2.constructor=H$2;l$3(I$2,F$3.prototype);I$2.isPureReactComponent=!0;var J$2={current:null},K$2=Object.prototype.hasOwnProperty,L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(ca,ga,_s){var Ss,Ms={},Cs=null,Ts=null;if(ga!=null)for(Ss in ga.ref!==void 0&&(Ts=ga.ref),ga.key!==void 0&&(Cs=""+ga.key),ga)K$2.call(ga,Ss)&&!L$3.hasOwnProperty(Ss)&&(Ms[Ss]=ga[Ss]);var Is=arguments.length-2;if(Is===1)Ms.children=_s;else if(1<Is){for(var Bs=Array(Is),Ps=0;Ps<Is;Ps++)Bs[Ps]=arguments[Ps+2];Ms.children=Bs}if(ca&&ca.defaultProps)for(Ss in Is=ca.defaultProps,Is)Ms[Ss]===void 0&&(Ms[Ss]=Is[Ss]);return{$$typeof:p$3,type:ca,key:Cs,ref:Ts,props:Ms,_owner:J$2.current}}function N$3(ca,ga){return{$$typeof:p$3,type:ca.type,key:ga,ref:ca.ref,props:ca.props,_owner:ca._owner}}function O$3(ca){return typeof ca=="object"&&ca!==null&&ca.$$typeof===p$3}function escape$1(ca){var ga={"=":"=0",":":"=2"};return"$"+(""+ca).replace(/[=:]/g,function(_s){return ga[_s]})}var P$3=/\/+/g,Q$2=[];function R$3(ca,ga,_s,Ss){if(Q$2.length){var Ms=Q$2.pop();return Ms.result=ca,Ms.keyPrefix=ga,Ms.func=_s,Ms.context=Ss,Ms.count=0,Ms}return{result:ca,keyPrefix:ga,func:_s,context:Ss,count:0}}function S$3(ca){ca.result=null,ca.keyPrefix=null,ca.func=null,ca.context=null,ca.count=0,10>Q$2.length&&Q$2.push(ca)}function T$2(ca,ga,_s,Ss){var Ms=typeof ca;(Ms==="undefined"||Ms==="boolean")&&(ca=null);var Cs=!1;if(ca===null)Cs=!0;else switch(Ms){case"string":case"number":Cs=!0;break;case"object":switch(ca.$$typeof){case p$3:case q$2:Cs=!0}}if(Cs)return _s(Ss,ca,ga===""?"."+U$3(ca,0):ga),1;if(Cs=0,ga=ga===""?".":ga+":",Array.isArray(ca))for(var Ts=0;Ts<ca.length;Ts++){Ms=ca[Ts];var Is=ga+U$3(Ms,Ts);Cs+=T$2(Ms,Is,_s,Ss)}else if(ca===null||typeof ca!="object"?Is=null:(Is=B$1&&ca[B$1]||ca["@@iterator"],Is=typeof Is=="function"?Is:null),typeof Is=="function")for(ca=Is.call(ca),Ts=0;!(Ms=ca.next()).done;)Ms=Ms.value,Is=ga+U$3(Ms,Ts++),Cs+=T$2(Ms,Is,_s,Ss);else if(Ms==="object")throw _s=""+ca,Error(C$3(31,_s==="[object Object]"?"object with keys {"+Object.keys(ca).join(", ")+"}":_s,""));return Cs}function V$3(ca,ga,_s){return ca==null?0:T$2(ca,"",ga,_s)}function U$3(ca,ga){return typeof ca=="object"&&ca!==null&&ca.key!=null?escape$1(ca.key):ga.toString(36)}function W$3(ca,ga){ca.func.call(ca.context,ga,ca.count++)}function aa$1(ca,ga,_s){var Ss=ca.result,Ms=ca.keyPrefix;ca=ca.func.call(ca.context,ga,ca.count++),Array.isArray(ca)?X$2(ca,Ss,_s,function(Cs){return Cs}):ca!=null&&(O$3(ca)&&(ca=N$3(ca,Ms+(!ca.key||ga&&ga.key===ca.key?"":(""+ca.key).replace(P$3,"$&/")+"/")+_s)),Ss.push(ca))}function X$2(ca,ga,_s,Ss,Ms){var Cs="";_s!=null&&(Cs=(""+_s).replace(P$3,"$&/")+"/"),ga=R$3(ga,Cs,Ss,Ms),V$3(ca,aa$1,ga),S$3(ga)}var Y$2={current:null};function Z$2(){var ca=Y$2.current;if(ca===null)throw Error(C$3(321));return ca}var ba$1={ReactCurrentDispatcher:Y$2,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$2,IsSomeRendererActing:{current:!1},assign:l$3};react_production_min.Children={map:function(ca,ga,_s){if(ca==null)return ca;var Ss=[];return X$2(ca,Ss,null,ga,_s),Ss},forEach:function(ca,ga,_s){if(ca==null)return ca;ga=R$3(null,null,ga,_s),V$3(ca,W$3,ga),S$3(ga)},count:function(ca){return V$3(ca,function(){return null},null)},toArray:function(ca){var ga=[];return X$2(ca,ga,null,function(_s){return _s}),ga},only:function(ca){if(!O$3(ca))throw Error(C$3(143));return ca}};react_production_min.Component=F$3;react_production_min.Fragment=r$4;react_production_min.Profiler=u$4;react_production_min.PureComponent=H$2;react_production_min.StrictMode=t$3;react_production_min.Suspense=y$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$1;react_production_min.cloneElement=function(ca,ga,_s){if(ca==null)throw Error(C$3(267,ca));var Ss=l$3({},ca.props),Ms=ca.key,Cs=ca.ref,Ts=ca._owner;if(ga!=null){if(ga.ref!==void 0&&(Cs=ga.ref,Ts=J$2.current),ga.key!==void 0&&(Ms=""+ga.key),ca.type&&ca.type.defaultProps)var Is=ca.type.defaultProps;for(Bs in ga)K$2.call(ga,Bs)&&!L$3.hasOwnProperty(Bs)&&(Ss[Bs]=ga[Bs]===void 0&&Is!==void 0?Is[Bs]:ga[Bs])}var Bs=arguments.length-2;if(Bs===1)Ss.children=_s;else if(1<Bs){Is=Array(Bs);for(var Ps=0;Ps<Bs;Ps++)Is[Ps]=arguments[Ps+2];Ss.children=Is}return{$$typeof:p$3,type:ca.type,key:Ms,ref:Cs,props:Ss,_owner:Ts}};react_production_min.createContext=function(ca,ga){return ga===void 0&&(ga=null),ca={$$typeof:w$2,_calculateChangedBits:ga,_currentValue:ca,_currentValue2:ca,_threadCount:0,Provider:null,Consumer:null},ca.Provider={$$typeof:v$3,_context:ca},ca.Consumer=ca};react_production_min.createElement=M$3;react_production_min.createFactory=function(ca){var ga=M$3.bind(null,ca);return ga.type=ca,ga};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(ca){return{$$typeof:x$2,render:ca}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(ca){return{$$typeof:A$2,_ctor:ca,_status:-1,_result:null}};react_production_min.memo=function(ca,ga){return{$$typeof:z$1,type:ca,compare:ga===void 0?null:ga}};react_production_min.useCallback=function(ca,ga){return Z$2().useCallback(ca,ga)};react_production_min.useContext=function(ca,ga){return Z$2().useContext(ca,ga)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(ca,ga){return Z$2().useEffect(ca,ga)};react_production_min.useImperativeHandle=function(ca,ga,_s){return Z$2().useImperativeHandle(ca,ga,_s)};react_production_min.useLayoutEffect=function(ca,ga){return Z$2().useLayoutEffect(ca,ga)};react_production_min.useMemo=function(ca,ga){return Z$2().useMemo(ca,ga)};react_production_min.useReducer=function(ca,ga,_s){return Z$2().useReducer(ca,ga,_s)};react_production_min.useRef=function(ca){return Z$2().useRef(ca)};react_production_min.useState=function(ca){return Z$2().useState(ca)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ca){var ga,_s,Ss,Ms,Cs;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Ts=null,Is=null,Bs=function(){if(Ts!==null)try{var hu=ca.unstable_now();Ts(!0,hu),Ts=null}catch(pu){throw setTimeout(Bs,0),pu}},Ps=Date.now();ca.unstable_now=function(){return Date.now()-Ps},ga=function(hu){Ts!==null?setTimeout(ga,0,hu):(Ts=hu,setTimeout(Bs,0))},_s=function(hu,pu){Is=setTimeout(hu,pu)},Ss=function(){clearTimeout(Is)},Ms=function(){return!1},Cs=ca.unstable_forceFrameRate=function(){}}else{var Ls=window.performance,Rs=window.Date,Os=window.setTimeout,Fs=window.clearTimeout;if(typeof console!="undefined"){var Vs=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Vs!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof Ls=="object"&&typeof Ls.now=="function")ca.unstable_now=function(){return Ls.now()};else{var ks=Rs.now();ca.unstable_now=function(){return Rs.now()-ks}}var Ns=!1,Ds=null,$s=-1,Gs=5,Us=0;Ms=function(){return ca.unstable_now()>=Us},Cs=function(){},ca.unstable_forceFrameRate=function(hu){0>hu||125<hu?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Gs=0<hu?Math.floor(1e3/hu):5};var Hs=new MessageChannel,zs=Hs.port2;Hs.port1.onmessage=function(){if(Ds!==null){var hu=ca.unstable_now();Us=hu+Gs;try{Ds(!0,hu)?zs.postMessage(null):(Ns=!1,Ds=null)}catch(pu){throw zs.postMessage(null),pu}}else Ns=!1},ga=function(hu){Ds=hu,Ns||(Ns=!0,zs.postMessage(null))},_s=function(hu,pu){$s=Os(function(){hu(ca.unstable_now())},pu)},Ss=function(){Fs($s),$s=-1}}function js(hu,pu){var du=hu.length;hu.push(pu);e:for(;;){var yu=du-1>>>1,Su=hu[yu];if(Su!==void 0&&0<Zs(Su,pu))hu[yu]=pu,hu[du]=Su,du=yu;else break e}}function Ws(hu){return hu=hu[0],hu===void 0?null:hu}function Qs(hu){var pu=hu[0];if(pu!==void 0){var du=hu.pop();if(du!==pu){hu[0]=du;e:for(var yu=0,Su=hu.length;yu<Su;){var Cu=2*(yu+1)-1,bu=hu[Cu],Au=Cu+1,Tu=hu[Au];if(bu!==void 0&&0>Zs(bu,du))Tu!==void 0&&0>Zs(Tu,bu)?(hu[yu]=Tu,hu[Au]=du,yu=Au):(hu[yu]=bu,hu[Cu]=du,yu=Cu);else if(Tu!==void 0&&0>Zs(Tu,du))hu[yu]=Tu,hu[Au]=du,yu=Au;else break e}}return pu}return null}function Zs(hu,pu){var du=hu.sortIndex-pu.sortIndex;return du!==0?du:hu.id-pu.id}var Xs=[],eu=[],Ys=1,Js=null,qs=3,ru=!1,tu=!1,nu=!1;function uu(hu){for(var pu=Ws(eu);pu!==null;){if(pu.callback===null)Qs(eu);else if(pu.startTime<=hu)Qs(eu),pu.sortIndex=pu.expirationTime,js(Xs,pu);else break;pu=Ws(eu)}}function fu(hu){if(nu=!1,uu(hu),!tu)if(Ws(Xs)!==null)tu=!0,ga(mu);else{var pu=Ws(eu);pu!==null&&_s(fu,pu.startTime-hu)}}function mu(hu,pu){tu=!1,nu&&(nu=!1,Ss()),ru=!0;var du=qs;try{for(uu(pu),Js=Ws(Xs);Js!==null&&(!(Js.expirationTime>pu)||hu&&!Ms());){var yu=Js.callback;if(yu!==null){Js.callback=null,qs=Js.priorityLevel;var Su=yu(Js.expirationTime<=pu);pu=ca.unstable_now(),typeof Su=="function"?Js.callback=Su:Js===Ws(Xs)&&Qs(Xs),uu(pu)}else Qs(Xs);Js=Ws(Xs)}if(Js!==null)var Cu=!0;else{var bu=Ws(eu);bu!==null&&_s(fu,bu.startTime-pu),Cu=!1}return Cu}finally{Js=null,qs=du,ru=!1}}function vu(hu){switch(hu){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Eu=Cs;ca.unstable_IdlePriority=5,ca.unstable_ImmediatePriority=1,ca.unstable_LowPriority=4,ca.unstable_NormalPriority=3,ca.unstable_Profiling=null,ca.unstable_UserBlockingPriority=2,ca.unstable_cancelCallback=function(hu){hu.callback=null},ca.unstable_continueExecution=function(){tu||ru||(tu=!0,ga(mu))},ca.unstable_getCurrentPriorityLevel=function(){return qs},ca.unstable_getFirstCallbackNode=function(){return Ws(Xs)},ca.unstable_next=function(hu){switch(qs){case 1:case 2:case 3:var pu=3;break;default:pu=qs}var du=qs;qs=pu;try{return hu()}finally{qs=du}},ca.unstable_pauseExecution=function(){},ca.unstable_requestPaint=Eu,ca.unstable_runWithPriority=function(hu,pu){switch(hu){case 1:case 2:case 3:case 4:case 5:break;default:hu=3}var du=qs;qs=hu;try{return pu()}finally{qs=du}},ca.unstable_scheduleCallback=function(hu,pu,du){var yu=ca.unstable_now();if(typeof du=="object"&&du!==null){var Su=du.delay;Su=typeof Su=="number"&&0<Su?yu+Su:yu,du=typeof du.timeout=="number"?du.timeout:vu(hu)}else du=vu(hu),Su=yu;return du=Su+du,hu={id:Ys++,callback:pu,priorityLevel:hu,startTime:Su,expirationTime:du,sortIndex:-1},Su>yu?(hu.sortIndex=Su,js(eu,hu),Ws(Xs)===null&&hu===Ws(eu)&&(nu?Ss():nu=!0,_s(fu,Su-yu))):(hu.sortIndex=du,js(Xs,hu),tu||ru||(tu=!0,ga(mu))),hu},ca.unstable_shouldYield=function(){var hu=ca.unstable_now();uu(hu);var pu=Ws(Xs);return pu!==Js&&Js!==null&&pu!==null&&pu.callback!==null&&pu.startTime<=hu&&pu.expirationTime<Js.expirationTime||Ms()},ca.unstable_wrapCallback=function(hu){var pu=qs;return function(){var du=qs;qs=pu;try{return hu.apply(this,arguments)}finally{qs=du}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react$1.exports,n$4=objectAssign,r$3=scheduler.exports;function u$3(ca){for(var ga="https://reactjs.org/docs/error-decoder.html?invariant="+ca,_s=1;_s<arguments.length;_s++)ga+="&args[]="+encodeURIComponent(arguments[_s]);return"Minified React error #"+ca+"; visit "+ga+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(u$3(227));function ba(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs){var Ps=Array.prototype.slice.call(arguments,3);try{ga.apply(_s,Ps)}catch(Ls){this.onError(Ls)}}var da=!1,ea=null,fa=!1,ha=null,ia={onError:function(ca){da=!0,ea=ca}};function ja(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs){da=!1,ea=null,ba.apply(ia,arguments)}function ka(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs){if(ja.apply(this,arguments),da){if(da){var Ps=ea;da=!1,ea=null}else throw Error(u$3(198));fa||(fa=!0,ha=Ps)}}var la=null,ma=null,na=null;function oa(ca,ga,_s){var Ss=ca.type||"unknown-event";ca.currentTarget=na(_s),ka(Ss,ga,void 0,ca),ca.currentTarget=null}var pa=null,qa={};function ra(){if(pa)for(var ca in qa){var ga=qa[ca],_s=pa.indexOf(ca);if(!(-1<_s))throw Error(u$3(96,ca));if(!sa[_s]){if(!ga.extractEvents)throw Error(u$3(97,ca));sa[_s]=ga,_s=ga.eventTypes;for(var Ss in _s){var Ms=void 0,Cs=_s[Ss],Ts=ga,Is=Ss;if(ta.hasOwnProperty(Is))throw Error(u$3(99,Is));ta[Is]=Cs;var Bs=Cs.phasedRegistrationNames;if(Bs){for(Ms in Bs)Bs.hasOwnProperty(Ms)&&ua(Bs[Ms],Ts,Is);Ms=!0}else Cs.registrationName?(ua(Cs.registrationName,Ts,Is),Ms=!0):Ms=!1;if(!Ms)throw Error(u$3(98,Ss,ca))}}}}function ua(ca,ga,_s){if(va[ca])throw Error(u$3(100,ca));va[ca]=ga,wa[ca]=ga.eventTypes[_s].dependencies}var sa=[],ta={},va={},wa={};function xa(ca){var ga=!1,_s;for(_s in ca)if(ca.hasOwnProperty(_s)){var Ss=ca[_s];if(!qa.hasOwnProperty(_s)||qa[_s]!==Ss){if(qa[_s])throw Error(u$3(102,_s));qa[_s]=Ss,ga=!0}}ga&&ra()}var ya=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za=null,Aa=null,Ba=null;function Ca(ca){if(ca=ma(ca)){if(typeof za!="function")throw Error(u$3(280));var ga=ca.stateNode;ga&&(ga=la(ga),za(ca.stateNode,ca.type,ga))}}function Da(ca){Aa?Ba?Ba.push(ca):Ba=[ca]:Aa=ca}function Ea(){if(Aa){var ca=Aa,ga=Ba;if(Ba=Aa=null,Ca(ca),ga)for(ca=0;ca<ga.length;ca++)Ca(ga[ca])}}function Fa(ca,ga){return ca(ga)}function Ga(ca,ga,_s,Ss,Ms){return ca(ga,_s,Ss,Ms)}function Ha(){}var Ia=Fa,Ja=!1,Ka=!1;function La(){(Aa!==null||Ba!==null)&&(Ha(),Ea())}function Ma(ca,ga,_s){if(Ka)return ca(ga,_s);Ka=!0;try{return Ia(ca,ga,_s)}finally{Ka=!1,La()}}var Na=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa=Object.prototype.hasOwnProperty,Pa={},Qa={};function Ra(ca){return Oa.call(Qa,ca)?!0:Oa.call(Pa,ca)?!1:Na.test(ca)?Qa[ca]=!0:(Pa[ca]=!0,!1)}function Sa(ca,ga,_s,Ss){if(_s!==null&&_s.type===0)return!1;switch(typeof ga){case"function":case"symbol":return!0;case"boolean":return Ss?!1:_s!==null?!_s.acceptsBooleans:(ca=ca.toLowerCase().slice(0,5),ca!=="data-"&&ca!=="aria-");default:return!1}}function Ta(ca,ga,_s,Ss){if(ga===null||typeof ga=="undefined"||Sa(ca,ga,_s,Ss))return!0;if(Ss)return!1;if(_s!==null)switch(_s.type){case 3:return!ga;case 4:return ga===!1;case 5:return isNaN(ga);case 6:return isNaN(ga)||1>ga}return!1}function v$2(ca,ga,_s,Ss,Ms,Cs){this.acceptsBooleans=ga===2||ga===3||ga===4,this.attributeName=Ss,this.attributeNamespace=Ms,this.mustUseProperty=_s,this.propertyName=ca,this.type=ga,this.sanitizeURL=Cs}var C$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ca){C$2[ca]=new v$2(ca,0,!1,ca,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ca){var ga=ca[0];C$2[ga]=new v$2(ga,1,!1,ca[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(ca){C$2[ca]=new v$2(ca,2,!1,ca.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ca){C$2[ca]=new v$2(ca,2,!1,ca,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ca){C$2[ca]=new v$2(ca,3,!1,ca.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(ca){C$2[ca]=new v$2(ca,3,!0,ca,null,!1)});["capture","download"].forEach(function(ca){C$2[ca]=new v$2(ca,4,!1,ca,null,!1)});["cols","rows","size","span"].forEach(function(ca){C$2[ca]=new v$2(ca,6,!1,ca,null,!1)});["rowSpan","start"].forEach(function(ca){C$2[ca]=new v$2(ca,5,!1,ca.toLowerCase(),null,!1)});var Ua=/[\-:]([a-z])/g;function Va(ca){return ca[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ca){var ga=ca.replace(Ua,Va);C$2[ga]=new v$2(ga,1,!1,ca,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ca){var ga=ca.replace(Ua,Va);C$2[ga]=new v$2(ga,1,!1,ca,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(ca){var ga=ca.replace(Ua,Va);C$2[ga]=new v$2(ga,1,!1,ca,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(ca){C$2[ca]=new v$2(ca,1,!1,ca.toLowerCase(),null,!1)});C$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(ca){C$2[ca]=new v$2(ca,1,!1,ca.toLowerCase(),null,!0)});var Wa=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa.hasOwnProperty("ReactCurrentDispatcher")||(Wa.ReactCurrentDispatcher={current:null});Wa.hasOwnProperty("ReactCurrentBatchConfig")||(Wa.ReactCurrentBatchConfig={suspense:null});function Xa(ca,ga,_s,Ss){var Ms=C$2.hasOwnProperty(ga)?C$2[ga]:null,Cs=Ms!==null?Ms.type===0:Ss?!1:!(!(2<ga.length)||ga[0]!=="o"&&ga[0]!=="O"||ga[1]!=="n"&&ga[1]!=="N");Cs||(Ta(ga,_s,Ms,Ss)&&(_s=null),Ss||Ms===null?Ra(ga)&&(_s===null?ca.removeAttribute(ga):ca.setAttribute(ga,""+_s)):Ms.mustUseProperty?ca[Ms.propertyName]=_s===null?Ms.type===3?!1:"":_s:(ga=Ms.attributeName,Ss=Ms.attributeNamespace,_s===null?ca.removeAttribute(ga):(Ms=Ms.type,_s=Ms===3||Ms===4&&_s===!0?"":""+_s,Ss?ca.setAttributeNS(Ss,ga,_s):ca.setAttribute(ga,_s))))}var Ya=/^(.*)[\\\/]/,E$2=typeof Symbol=="function"&&Symbol.for,Za=E$2?Symbol.for("react.element"):60103,$a=E$2?Symbol.for("react.portal"):60106,ab=E$2?Symbol.for("react.fragment"):60107,bb=E$2?Symbol.for("react.strict_mode"):60108,cb=E$2?Symbol.for("react.profiler"):60114,db=E$2?Symbol.for("react.provider"):60109,eb=E$2?Symbol.for("react.context"):60110,fb=E$2?Symbol.for("react.concurrent_mode"):60111,gb=E$2?Symbol.for("react.forward_ref"):60112,hb=E$2?Symbol.for("react.suspense"):60113,ib=E$2?Symbol.for("react.suspense_list"):60120,jb=E$2?Symbol.for("react.memo"):60115,kb=E$2?Symbol.for("react.lazy"):60116,lb=E$2?Symbol.for("react.block"):60121,mb=typeof Symbol=="function"&&Symbol.iterator;function nb(ca){return ca===null||typeof ca!="object"?null:(ca=mb&&ca[mb]||ca["@@iterator"],typeof ca=="function"?ca:null)}function ob(ca){if(ca._status===-1){ca._status=0;var ga=ca._ctor;ga=ga(),ca._result=ga,ga.then(function(_s){ca._status===0&&(_s=_s.default,ca._status=1,ca._result=_s)},function(_s){ca._status===0&&(ca._status=2,ca._result=_s)})}}function pb(ca){if(ca==null)return null;if(typeof ca=="function")return ca.displayName||ca.name||null;if(typeof ca=="string")return ca;switch(ca){case ab:return"Fragment";case $a:return"Portal";case cb:return"Profiler";case bb:return"StrictMode";case hb:return"Suspense";case ib:return"SuspenseList"}if(typeof ca=="object")switch(ca.$$typeof){case eb:return"Context.Consumer";case db:return"Context.Provider";case gb:var ga=ca.render;return ga=ga.displayName||ga.name||"",ca.displayName||(ga!==""?"ForwardRef("+ga+")":"ForwardRef");case jb:return pb(ca.type);case lb:return pb(ca.render);case kb:if(ca=ca._status===1?ca._result:null)return pb(ca)}return null}function qb(ca){var ga="";do{e:switch(ca.tag){case 3:case 4:case 6:case 7:case 10:case 9:var _s="";break e;default:var Ss=ca._debugOwner,Ms=ca._debugSource,Cs=pb(ca.type);_s=null,Ss&&(_s=pb(Ss.type)),Ss=Cs,Cs="",Ms?Cs=" (at "+Ms.fileName.replace(Ya,"")+":"+Ms.lineNumber+")":_s&&(Cs=" (created by "+_s+")"),_s=`
    in `+(Ss||"Unknown")+Cs}ga+=_s,ca=ca.return}while(ca);return ga}function rb(ca){switch(typeof ca){case"boolean":case"number":case"object":case"string":case"undefined":return ca;default:return""}}function sb(ca){var ga=ca.type;return(ca=ca.nodeName)&&ca.toLowerCase()==="input"&&(ga==="checkbox"||ga==="radio")}function tb(ca){var ga=sb(ca)?"checked":"value",_s=Object.getOwnPropertyDescriptor(ca.constructor.prototype,ga),Ss=""+ca[ga];if(!ca.hasOwnProperty(ga)&&typeof _s!="undefined"&&typeof _s.get=="function"&&typeof _s.set=="function"){var Ms=_s.get,Cs=_s.set;return Object.defineProperty(ca,ga,{configurable:!0,get:function(){return Ms.call(this)},set:function(Ts){Ss=""+Ts,Cs.call(this,Ts)}}),Object.defineProperty(ca,ga,{enumerable:_s.enumerable}),{getValue:function(){return Ss},setValue:function(Ts){Ss=""+Ts},stopTracking:function(){ca._valueTracker=null,delete ca[ga]}}}}function xb(ca){ca._valueTracker||(ca._valueTracker=tb(ca))}function yb(ca){if(!ca)return!1;var ga=ca._valueTracker;if(!ga)return!0;var _s=ga.getValue(),Ss="";return ca&&(Ss=sb(ca)?ca.checked?"true":"false":ca.value),ca=Ss,ca!==_s?(ga.setValue(ca),!0):!1}function zb(ca,ga){var _s=ga.checked;return n$4({},ga,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_s!=null?_s:ca._wrapperState.initialChecked})}function Ab(ca,ga){var _s=ga.defaultValue==null?"":ga.defaultValue,Ss=ga.checked!=null?ga.checked:ga.defaultChecked;_s=rb(ga.value!=null?ga.value:_s),ca._wrapperState={initialChecked:Ss,initialValue:_s,controlled:ga.type==="checkbox"||ga.type==="radio"?ga.checked!=null:ga.value!=null}}function Bb(ca,ga){ga=ga.checked,ga!=null&&Xa(ca,"checked",ga,!1)}function Cb(ca,ga){Bb(ca,ga);var _s=rb(ga.value),Ss=ga.type;if(_s!=null)Ss==="number"?(_s===0&&ca.value===""||ca.value!=_s)&&(ca.value=""+_s):ca.value!==""+_s&&(ca.value=""+_s);else if(Ss==="submit"||Ss==="reset"){ca.removeAttribute("value");return}ga.hasOwnProperty("value")?Db(ca,ga.type,_s):ga.hasOwnProperty("defaultValue")&&Db(ca,ga.type,rb(ga.defaultValue)),ga.checked==null&&ga.defaultChecked!=null&&(ca.defaultChecked=!!ga.defaultChecked)}function Eb(ca,ga,_s){if(ga.hasOwnProperty("value")||ga.hasOwnProperty("defaultValue")){var Ss=ga.type;if(!(Ss!=="submit"&&Ss!=="reset"||ga.value!==void 0&&ga.value!==null))return;ga=""+ca._wrapperState.initialValue,_s||ga===ca.value||(ca.value=ga),ca.defaultValue=ga}_s=ca.name,_s!==""&&(ca.name=""),ca.defaultChecked=!!ca._wrapperState.initialChecked,_s!==""&&(ca.name=_s)}function Db(ca,ga,_s){(ga!=="number"||ca.ownerDocument.activeElement!==ca)&&(_s==null?ca.defaultValue=""+ca._wrapperState.initialValue:ca.defaultValue!==""+_s&&(ca.defaultValue=""+_s))}function Fb(ca){var ga="";return aa.Children.forEach(ca,function(_s){_s!=null&&(ga+=_s)}),ga}function Gb(ca,ga){return ca=n$4({children:void 0},ga),(ga=Fb(ga.children))&&(ca.children=ga),ca}function Hb(ca,ga,_s,Ss){if(ca=ca.options,ga){ga={};for(var Ms=0;Ms<_s.length;Ms++)ga["$"+_s[Ms]]=!0;for(_s=0;_s<ca.length;_s++)Ms=ga.hasOwnProperty("$"+ca[_s].value),ca[_s].selected!==Ms&&(ca[_s].selected=Ms),Ms&&Ss&&(ca[_s].defaultSelected=!0)}else{for(_s=""+rb(_s),ga=null,Ms=0;Ms<ca.length;Ms++){if(ca[Ms].value===_s){ca[Ms].selected=!0,Ss&&(ca[Ms].defaultSelected=!0);return}ga!==null||ca[Ms].disabled||(ga=ca[Ms])}ga!==null&&(ga.selected=!0)}}function Ib(ca,ga){if(ga.dangerouslySetInnerHTML!=null)throw Error(u$3(91));return n$4({},ga,{value:void 0,defaultValue:void 0,children:""+ca._wrapperState.initialValue})}function Jb(ca,ga){var _s=ga.value;if(_s==null){if(_s=ga.children,ga=ga.defaultValue,_s!=null){if(ga!=null)throw Error(u$3(92));if(Array.isArray(_s)){if(!(1>=_s.length))throw Error(u$3(93));_s=_s[0]}ga=_s}ga==null&&(ga=""),_s=ga}ca._wrapperState={initialValue:rb(_s)}}function Kb(ca,ga){var _s=rb(ga.value),Ss=rb(ga.defaultValue);_s!=null&&(_s=""+_s,_s!==ca.value&&(ca.value=_s),ga.defaultValue==null&&ca.defaultValue!==_s&&(ca.defaultValue=_s)),Ss!=null&&(ca.defaultValue=""+Ss)}function Lb(ca){var ga=ca.textContent;ga===ca._wrapperState.initialValue&&ga!==""&&ga!==null&&(ca.value=ga)}var Mb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb(ca){switch(ca){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(ca,ga){return ca==null||ca==="http://www.w3.org/1999/xhtml"?Nb(ga):ca==="http://www.w3.org/2000/svg"&&ga==="foreignObject"?"http://www.w3.org/1999/xhtml":ca}var Pb,Qb=function(ca){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(ga,_s,Ss,Ms){MSApp.execUnsafeLocalFunction(function(){return ca(ga,_s,Ss,Ms)})}:ca}(function(ca,ga){if(ca.namespaceURI!==Mb.svg||"innerHTML"in ca)ca.innerHTML=ga;else{for(Pb=Pb||document.createElement("div"),Pb.innerHTML="<svg>"+ga.valueOf().toString()+"</svg>",ga=Pb.firstChild;ca.firstChild;)ca.removeChild(ca.firstChild);for(;ga.firstChild;)ca.appendChild(ga.firstChild)}});function Rb(ca,ga){if(ga){var _s=ca.firstChild;if(_s&&_s===ca.lastChild&&_s.nodeType===3){_s.nodeValue=ga;return}}ca.textContent=ga}function Sb(ca,ga){var _s={};return _s[ca.toLowerCase()]=ga.toLowerCase(),_s["Webkit"+ca]="webkit"+ga,_s["Moz"+ca]="moz"+ga,_s}var Tb={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},Ub={},Vb={};ya&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),"TransitionEvent"in window||delete Tb.transitionend.transition);function Wb(ca){if(Ub[ca])return Ub[ca];if(!Tb[ca])return ca;var ga=Tb[ca],_s;for(_s in ga)if(ga.hasOwnProperty(_s)&&_s in Vb)return Ub[ca]=ga[_s];return ca}var Xb=Wb("animationend"),Yb=Wb("animationiteration"),Zb=Wb("animationstart"),$b=Wb("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new(typeof WeakMap=="function"?WeakMap:Map);function cc(ca){var ga=bc.get(ca);return ga===void 0&&(ga=new Map,bc.set(ca,ga)),ga}function dc(ca){var ga=ca,_s=ca;if(ca.alternate)for(;ga.return;)ga=ga.return;else{ca=ga;do ga=ca,(ga.effectTag&1026)!==0&&(_s=ga.return),ca=ga.return;while(ca)}return ga.tag===3?_s:null}function ec(ca){if(ca.tag===13){var ga=ca.memoizedState;if(ga===null&&(ca=ca.alternate,ca!==null&&(ga=ca.memoizedState)),ga!==null)return ga.dehydrated}return null}function fc(ca){if(dc(ca)!==ca)throw Error(u$3(188))}function gc(ca){var ga=ca.alternate;if(!ga){if(ga=dc(ca),ga===null)throw Error(u$3(188));return ga!==ca?null:ca}for(var _s=ca,Ss=ga;;){var Ms=_s.return;if(Ms===null)break;var Cs=Ms.alternate;if(Cs===null){if(Ss=Ms.return,Ss!==null){_s=Ss;continue}break}if(Ms.child===Cs.child){for(Cs=Ms.child;Cs;){if(Cs===_s)return fc(Ms),ca;if(Cs===Ss)return fc(Ms),ga;Cs=Cs.sibling}throw Error(u$3(188))}if(_s.return!==Ss.return)_s=Ms,Ss=Cs;else{for(var Ts=!1,Is=Ms.child;Is;){if(Is===_s){Ts=!0,_s=Ms,Ss=Cs;break}if(Is===Ss){Ts=!0,Ss=Ms,_s=Cs;break}Is=Is.sibling}if(!Ts){for(Is=Cs.child;Is;){if(Is===_s){Ts=!0,_s=Cs,Ss=Ms;break}if(Is===Ss){Ts=!0,Ss=Cs,_s=Ms;break}Is=Is.sibling}if(!Ts)throw Error(u$3(189))}}if(_s.alternate!==Ss)throw Error(u$3(190))}if(_s.tag!==3)throw Error(u$3(188));return _s.stateNode.current===_s?ca:ga}function hc(ca){if(ca=gc(ca),!ca)return null;for(var ga=ca;;){if(ga.tag===5||ga.tag===6)return ga;if(ga.child)ga.child.return=ga,ga=ga.child;else{if(ga===ca)break;for(;!ga.sibling;){if(!ga.return||ga.return===ca)return null;ga=ga.return}ga.sibling.return=ga.return,ga=ga.sibling}}return null}function ic(ca,ga){if(ga==null)throw Error(u$3(30));return ca==null?ga:Array.isArray(ca)?Array.isArray(ga)?(ca.push.apply(ca,ga),ca):(ca.push(ga),ca):Array.isArray(ga)?[ca].concat(ga):[ca,ga]}function jc(ca,ga,_s){Array.isArray(ca)?ca.forEach(ga,_s):ca&&ga.call(_s,ca)}var kc=null;function lc(ca){if(ca){var ga=ca._dispatchListeners,_s=ca._dispatchInstances;if(Array.isArray(ga))for(var Ss=0;Ss<ga.length&&!ca.isPropagationStopped();Ss++)oa(ca,ga[Ss],_s[Ss]);else ga&&oa(ca,ga,_s);ca._dispatchListeners=null,ca._dispatchInstances=null,ca.isPersistent()||ca.constructor.release(ca)}}function mc(ca){if(ca!==null&&(kc=ic(kc,ca)),ca=kc,kc=null,ca){if(jc(ca,lc),kc)throw Error(u$3(95));if(fa)throw ca=ha,fa=!1,ha=null,ca}}function nc(ca){return ca=ca.target||ca.srcElement||window,ca.correspondingUseElement&&(ca=ca.correspondingUseElement),ca.nodeType===3?ca.parentNode:ca}function oc(ca){if(!ya)return!1;ca="on"+ca;var ga=ca in document;return ga||(ga=document.createElement("div"),ga.setAttribute(ca,"return;"),ga=typeof ga[ca]=="function"),ga}var pc=[];function qc(ca){ca.topLevelType=null,ca.nativeEvent=null,ca.targetInst=null,ca.ancestors.length=0,10>pc.length&&pc.push(ca)}function rc(ca,ga,_s,Ss){if(pc.length){var Ms=pc.pop();return Ms.topLevelType=ca,Ms.eventSystemFlags=Ss,Ms.nativeEvent=ga,Ms.targetInst=_s,Ms}return{topLevelType:ca,eventSystemFlags:Ss,nativeEvent:ga,targetInst:_s,ancestors:[]}}function sc(ca){var ga=ca.targetInst,_s=ga;do{if(!_s){ca.ancestors.push(_s);break}var Ss=_s;if(Ss.tag===3)Ss=Ss.stateNode.containerInfo;else{for(;Ss.return;)Ss=Ss.return;Ss=Ss.tag!==3?null:Ss.stateNode.containerInfo}if(!Ss)break;ga=_s.tag,ga!==5&&ga!==6||ca.ancestors.push(_s),_s=tc(Ss)}while(_s);for(_s=0;_s<ca.ancestors.length;_s++){ga=ca.ancestors[_s];var Ms=nc(ca.nativeEvent);Ss=ca.topLevelType;var Cs=ca.nativeEvent,Ts=ca.eventSystemFlags;_s===0&&(Ts|=64);for(var Is=null,Bs=0;Bs<sa.length;Bs++){var Ps=sa[Bs];Ps&&(Ps=Ps.extractEvents(Ss,ga,Cs,Ms,Ts))&&(Is=ic(Is,Ps))}mc(Is)}}function uc(ca,ga,_s){if(!_s.has(ca)){switch(ca){case"scroll":vc(ga,"scroll",!0);break;case"focus":case"blur":vc(ga,"focus",!0),vc(ga,"blur",!0),_s.set("blur",null),_s.set("focus",null);break;case"cancel":case"close":oc(ca)&&vc(ga,ca,!0);break;case"invalid":case"submit":case"reset":break;default:ac.indexOf(ca)===-1&&F$2(ca,ga)}_s.set(ca,null)}}var wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc(ca,ga){var _s=cc(ga);Hc.forEach(function(Ss){uc(Ss,ga,_s)}),Ic.forEach(function(Ss){uc(Ss,ga,_s)})}function Kc(ca,ga,_s,Ss,Ms){return{blockedOn:ca,topLevelType:ga,eventSystemFlags:_s|32,nativeEvent:Ms,container:Ss}}function Lc(ca,ga){switch(ca){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec.delete(ga.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(ga.pointerId)}}function Mc(ca,ga,_s,Ss,Ms,Cs){return ca===null||ca.nativeEvent!==Cs?(ca=Kc(ga,_s,Ss,Ms,Cs),ga!==null&&(ga=Nc(ga),ga!==null&&xc(ga)),ca):(ca.eventSystemFlags|=Ss,ca)}function Oc(ca,ga,_s,Ss,Ms){switch(ga){case"focus":return Bc=Mc(Bc,ca,ga,_s,Ss,Ms),!0;case"dragenter":return Cc=Mc(Cc,ca,ga,_s,Ss,Ms),!0;case"mouseover":return Dc=Mc(Dc,ca,ga,_s,Ss,Ms),!0;case"pointerover":var Cs=Ms.pointerId;return Ec.set(Cs,Mc(Ec.get(Cs)||null,ca,ga,_s,Ss,Ms)),!0;case"gotpointercapture":return Cs=Ms.pointerId,Fc.set(Cs,Mc(Fc.get(Cs)||null,ca,ga,_s,Ss,Ms)),!0}return!1}function Pc(ca){var ga=tc(ca.target);if(ga!==null){var _s=dc(ga);if(_s!==null){if(ga=_s.tag,ga===13){if(ga=ec(_s),ga!==null){ca.blockedOn=ga,r$3.unstable_runWithPriority(ca.priority,function(){yc(_s)});return}}else if(ga===3&&_s.stateNode.hydrate){ca.blockedOn=_s.tag===3?_s.stateNode.containerInfo:null;return}}}ca.blockedOn=null}function Qc(ca){if(ca.blockedOn!==null)return!1;var ga=Rc(ca.topLevelType,ca.eventSystemFlags,ca.container,ca.nativeEvent);if(ga!==null){var _s=Nc(ga);return _s!==null&&xc(_s),ca.blockedOn=ga,!1}return!0}function Sc(ca,ga,_s){Qc(ca)&&_s.delete(ga)}function Tc(){for(zc=!1;0<Ac.length;){var ca=Ac[0];if(ca.blockedOn!==null){ca=Nc(ca.blockedOn),ca!==null&&wc(ca);break}var ga=Rc(ca.topLevelType,ca.eventSystemFlags,ca.container,ca.nativeEvent);ga!==null?ca.blockedOn=ga:Ac.shift()}Bc!==null&&Qc(Bc)&&(Bc=null),Cc!==null&&Qc(Cc)&&(Cc=null),Dc!==null&&Qc(Dc)&&(Dc=null),Ec.forEach(Sc),Fc.forEach(Sc)}function Uc(ca,ga){ca.blockedOn===ga&&(ca.blockedOn=null,zc||(zc=!0,r$3.unstable_scheduleCallback(r$3.unstable_NormalPriority,Tc)))}function Vc(ca){function ga(Ms){return Uc(Ms,ca)}if(0<Ac.length){Uc(Ac[0],ca);for(var _s=1;_s<Ac.length;_s++){var Ss=Ac[_s];Ss.blockedOn===ca&&(Ss.blockedOn=null)}}for(Bc!==null&&Uc(Bc,ca),Cc!==null&&Uc(Cc,ca),Dc!==null&&Uc(Dc,ca),Ec.forEach(ga),Fc.forEach(ga),_s=0;_s<Gc.length;_s++)Ss=Gc[_s],Ss.blockedOn===ca&&(Ss.blockedOn=null);for(;0<Gc.length&&(_s=Gc[0],_s.blockedOn===null);)Pc(_s),_s.blockedOn===null&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb,"animationEnd",Yb,"animationIteration",Zb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b,"transitionEnd","waiting","waiting"];function ad(ca,ga){for(var _s=0;_s<ca.length;_s+=2){var Ss=ca[_s],Ms=ca[_s+1],Cs="on"+(Ms[0].toUpperCase()+Ms.slice(1));Cs={phasedRegistrationNames:{bubbled:Cs,captured:Cs+"Capture"},dependencies:[Ss],eventPriority:ga},Zc.set(Ss,ga),Yc.set(Ss,Cs),Wc[Ms]=Cs}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad($c,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);var dd=r$3.unstable_UserBlockingPriority,ed=r$3.unstable_runWithPriority,fd=!0;function F$2(ca,ga){vc(ga,ca,!1)}function vc(ca,ga,_s){var Ss=Zc.get(ga);switch(Ss===void 0?2:Ss){case 0:Ss=gd.bind(null,ga,1,ca);break;case 1:Ss=hd.bind(null,ga,1,ca);break;default:Ss=id.bind(null,ga,1,ca)}_s?ca.addEventListener(ga,Ss,!0):ca.addEventListener(ga,Ss,!1)}function gd(ca,ga,_s,Ss){Ja||Ha();var Ms=id,Cs=Ja;Ja=!0;try{Ga(Ms,ca,ga,_s,Ss)}finally{(Ja=Cs)||La()}}function hd(ca,ga,_s,Ss){ed(dd,id.bind(null,ca,ga,_s,Ss))}function id(ca,ga,_s,Ss){if(fd)if(0<Ac.length&&-1<Hc.indexOf(ca))ca=Kc(null,ca,ga,_s,Ss),Ac.push(ca);else{var Ms=Rc(ca,ga,_s,Ss);if(Ms===null)Lc(ca,Ss);else if(-1<Hc.indexOf(ca))ca=Kc(Ms,ca,ga,_s,Ss),Ac.push(ca);else if(!Oc(Ms,ca,ga,_s,Ss)){Lc(ca,Ss),ca=rc(ca,Ss,null,ga);try{Ma(sc,ca)}finally{qc(ca)}}}}function Rc(ca,ga,_s,Ss){if(_s=nc(Ss),_s=tc(_s),_s!==null){var Ms=dc(_s);if(Ms===null)_s=null;else{var Cs=Ms.tag;if(Cs===13){if(_s=ec(Ms),_s!==null)return _s;_s=null}else if(Cs===3){if(Ms.stateNode.hydrate)return Ms.tag===3?Ms.stateNode.containerInfo:null;_s=null}else Ms!==_s&&(_s=null)}}ca=rc(ca,Ss,_s,ga);try{Ma(sc,ca)}finally{qc(ca)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(ca){kd.forEach(function(ga){ga=ga+ca.charAt(0).toUpperCase()+ca.substring(1),jd[ga]=jd[ca]})});function ld(ca,ga,_s){return ga==null||typeof ga=="boolean"||ga===""?"":_s||typeof ga!="number"||ga===0||jd.hasOwnProperty(ca)&&jd[ca]?(""+ga).trim():ga+"px"}function md(ca,ga){ca=ca.style;for(var _s in ga)if(ga.hasOwnProperty(_s)){var Ss=_s.indexOf("--")===0,Ms=ld(_s,ga[_s],Ss);_s==="float"&&(_s="cssFloat"),Ss?ca.setProperty(_s,Ms):ca[_s]=Ms}}var nd=n$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(ca,ga){if(ga){if(nd[ca]&&(ga.children!=null||ga.dangerouslySetInnerHTML!=null))throw Error(u$3(137,ca,""));if(ga.dangerouslySetInnerHTML!=null){if(ga.children!=null)throw Error(u$3(60));if(!(typeof ga.dangerouslySetInnerHTML=="object"&&"__html"in ga.dangerouslySetInnerHTML))throw Error(u$3(61))}if(ga.style!=null&&typeof ga.style!="object")throw Error(u$3(62,""))}}function pd(ca,ga){if(ca.indexOf("-")===-1)return typeof ga.is=="string";switch(ca){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb.html;function rd(ca,ga){ca=ca.nodeType===9||ca.nodeType===11?ca:ca.ownerDocument;var _s=cc(ca);ga=wa[ga];for(var Ss=0;Ss<ga.length;Ss++)uc(ga[Ss],ca,_s)}function sd(){}function td(ca){if(ca=ca||(typeof document!="undefined"?document:void 0),typeof ca=="undefined")return null;try{return ca.activeElement||ca.body}catch{return ca.body}}function ud(ca){for(;ca&&ca.firstChild;)ca=ca.firstChild;return ca}function vd(ca,ga){var _s=ud(ca);ca=0;for(var Ss;_s;){if(_s.nodeType===3){if(Ss=ca+_s.textContent.length,ca<=ga&&Ss>=ga)return{node:_s,offset:ga-ca};ca=Ss}e:{for(;_s;){if(_s.nextSibling){_s=_s.nextSibling;break e}_s=_s.parentNode}_s=void 0}_s=ud(_s)}}function wd(ca,ga){return ca&&ga?ca===ga?!0:ca&&ca.nodeType===3?!1:ga&&ga.nodeType===3?wd(ca,ga.parentNode):"contains"in ca?ca.contains(ga):ca.compareDocumentPosition?!!(ca.compareDocumentPosition(ga)&16):!1:!1}function xd(){for(var ca=window,ga=td();ga instanceof ca.HTMLIFrameElement;){try{var _s=typeof ga.contentWindow.location.href=="string"}catch{_s=!1}if(_s)ca=ga.contentWindow;else break;ga=td(ca.document)}return ga}function yd(ca){var ga=ca&&ca.nodeName&&ca.nodeName.toLowerCase();return ga&&(ga==="input"&&(ca.type==="text"||ca.type==="search"||ca.type==="tel"||ca.type==="url"||ca.type==="password")||ga==="textarea"||ca.contentEditable==="true")}var zd="$",Ad="/$",Bd="$?",Cd="$!",Dd=null,Ed=null;function Fd(ca,ga){switch(ca){case"button":case"input":case"select":case"textarea":return!!ga.autoFocus}return!1}function Gd(ca,ga){return ca==="textarea"||ca==="option"||ca==="noscript"||typeof ga.children=="string"||typeof ga.children=="number"||typeof ga.dangerouslySetInnerHTML=="object"&&ga.dangerouslySetInnerHTML!==null&&ga.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd(ca){for(;ca!=null;ca=ca.nextSibling){var ga=ca.nodeType;if(ga===1||ga===3)break}return ca}function Kd(ca){ca=ca.previousSibling;for(var ga=0;ca;){if(ca.nodeType===8){var _s=ca.data;if(_s===zd||_s===Cd||_s===Bd){if(ga===0)return ca;ga--}else _s===Ad&&ga++}ca=ca.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(ca){var ga=ca[Md];if(ga)return ga;for(var _s=ca.parentNode;_s;){if(ga=_s[Od]||_s[Md]){if(_s=ga.alternate,ga.child!==null||_s!==null&&_s.child!==null)for(ca=Kd(ca);ca!==null;){if(_s=ca[Md])return _s;ca=Kd(ca)}return ga}ca=_s,_s=ca.parentNode}return null}function Nc(ca){return ca=ca[Md]||ca[Od],!ca||ca.tag!==5&&ca.tag!==6&&ca.tag!==13&&ca.tag!==3?null:ca}function Pd(ca){if(ca.tag===5||ca.tag===6)return ca.stateNode;throw Error(u$3(33))}function Qd(ca){return ca[Nd]||null}function Rd(ca){do ca=ca.return;while(ca&&ca.tag!==5);return ca||null}function Sd(ca,ga){var _s=ca.stateNode;if(!_s)return null;var Ss=la(_s);if(!Ss)return null;_s=Ss[ga];e:switch(ga){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ss=!Ss.disabled)||(ca=ca.type,Ss=!(ca==="button"||ca==="input"||ca==="select"||ca==="textarea")),ca=!Ss;break e;default:ca=!1}if(ca)return null;if(_s&&typeof _s!="function")throw Error(u$3(231,ga,typeof _s));return _s}function Td(ca,ga,_s){(ga=Sd(ca,_s.dispatchConfig.phasedRegistrationNames[ga]))&&(_s._dispatchListeners=ic(_s._dispatchListeners,ga),_s._dispatchInstances=ic(_s._dispatchInstances,ca))}function Ud(ca){if(ca&&ca.dispatchConfig.phasedRegistrationNames){for(var ga=ca._targetInst,_s=[];ga;)_s.push(ga),ga=Rd(ga);for(ga=_s.length;0<ga--;)Td(_s[ga],"captured",ca);for(ga=0;ga<_s.length;ga++)Td(_s[ga],"bubbled",ca)}}function Vd(ca,ga,_s){ca&&_s&&_s.dispatchConfig.registrationName&&(ga=Sd(ca,_s.dispatchConfig.registrationName))&&(_s._dispatchListeners=ic(_s._dispatchListeners,ga),_s._dispatchInstances=ic(_s._dispatchInstances,ca))}function Wd(ca){ca&&ca.dispatchConfig.registrationName&&Vd(ca._targetInst,null,ca)}function Xd(ca){jc(ca,Ud)}var Yd=null,Zd=null,$d=null;function ae$1(){if($d)return $d;var ca,ga=Zd,_s=ga.length,Ss,Ms="value"in Yd?Yd.value:Yd.textContent,Cs=Ms.length;for(ca=0;ca<_s&&ga[ca]===Ms[ca];ca++);var Ts=_s-ca;for(Ss=1;Ss<=Ts&&ga[_s-Ss]===Ms[Cs-Ss];Ss++);return $d=Ms.slice(ca,1<Ss?1-Ss:void 0)}function be$1(){return!0}function ce$1(){return!1}function G$1(ca,ga,_s,Ss){this.dispatchConfig=ca,this._targetInst=ga,this.nativeEvent=_s,ca=this.constructor.Interface;for(var Ms in ca)ca.hasOwnProperty(Ms)&&((ga=ca[Ms])?this[Ms]=ga(_s):Ms==="target"?this.target=Ss:this[Ms]=_s[Ms]);return this.isDefaultPrevented=(_s.defaultPrevented!=null?_s.defaultPrevented:_s.returnValue===!1)?be$1:ce$1,this.isPropagationStopped=ce$1,this}n$4(G$1.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ca=this.nativeEvent;ca&&(ca.preventDefault?ca.preventDefault():typeof ca.returnValue!="unknown"&&(ca.returnValue=!1),this.isDefaultPrevented=be$1)},stopPropagation:function(){var ca=this.nativeEvent;ca&&(ca.stopPropagation?ca.stopPropagation():typeof ca.cancelBubble!="unknown"&&(ca.cancelBubble=!0),this.isPropagationStopped=be$1)},persist:function(){this.isPersistent=be$1},isPersistent:ce$1,destructor:function(){var ca=this.constructor.Interface,ga;for(ga in ca)this[ga]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$1,this._dispatchInstances=this._dispatchListeners=null}});G$1.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(ca){return ca.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$1.extend=function(ca){function ga(){}function _s(){return Ss.apply(this,arguments)}var Ss=this;ga.prototype=Ss.prototype;var Ms=new ga;return n$4(Ms,_s.prototype),_s.prototype=Ms,_s.prototype.constructor=_s,_s.Interface=n$4({},Ss.Interface,ca),_s.extend=Ss.extend,de$1(_s),_s};de$1(G$1);function ee$1(ca,ga,_s,Ss){if(this.eventPool.length){var Ms=this.eventPool.pop();return this.call(Ms,ca,ga,_s,Ss),Ms}return new this(ca,ga,_s,Ss)}function fe$1(ca){if(!(ca instanceof this))throw Error(u$3(279));ca.destructor(),10>this.eventPool.length&&this.eventPool.push(ca)}function de$1(ca){ca.eventPool=[],ca.getPooled=ee$1,ca.release=fe$1}var ge$1=G$1.extend({data:null}),he$1=G$1.extend({data:null}),ie$1=[9,13,27,32],je$1=ya&&"CompositionEvent"in window,ke$1=null;ya&&"documentMode"in document&&(ke$1=document.documentMode);var le$1=ya&&"TextEvent"in window&&!ke$1,me$1=ya&&(!je$1||ke$1&&8<ke$1&&11>=ke$1),ne$1=String.fromCharCode(32),oe$1={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$1=!1;function qe$1(ca,ga){switch(ca){case"keyup":return ie$1.indexOf(ga.keyCode)!==-1;case"keydown":return ga.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$1(ca){return ca=ca.detail,typeof ca=="object"&&"data"in ca?ca.data:null}var se$1=!1;function te$1(ca,ga){switch(ca){case"compositionend":return re$1(ga);case"keypress":return ga.which!==32?null:(pe$1=!0,ne$1);case"textInput":return ca=ga.data,ca===ne$1&&pe$1?null:ca;default:return null}}function ue$1(ca,ga){if(se$1)return ca==="compositionend"||!je$1&&qe$1(ca,ga)?(ca=ae$1(),$d=Zd=Yd=null,se$1=!1,ca):null;switch(ca){case"paste":return null;case"keypress":if(!(ga.ctrlKey||ga.altKey||ga.metaKey)||ga.ctrlKey&&ga.altKey){if(ga.char&&1<ga.char.length)return ga.char;if(ga.which)return String.fromCharCode(ga.which)}return null;case"compositionend":return me$1&&ga.locale!=="ko"?null:ga.data;default:return null}}var ve$1={eventTypes:oe$1,extractEvents:function(ca,ga,_s,Ss){var Ms;if(je$1)e:{switch(ca){case"compositionstart":var Cs=oe$1.compositionStart;break e;case"compositionend":Cs=oe$1.compositionEnd;break e;case"compositionupdate":Cs=oe$1.compositionUpdate;break e}Cs=void 0}else se$1?qe$1(ca,_s)&&(Cs=oe$1.compositionEnd):ca==="keydown"&&_s.keyCode===229&&(Cs=oe$1.compositionStart);return Cs?(me$1&&_s.locale!=="ko"&&(se$1||Cs!==oe$1.compositionStart?Cs===oe$1.compositionEnd&&se$1&&(Ms=ae$1()):(Yd=Ss,Zd="value"in Yd?Yd.value:Yd.textContent,se$1=!0)),Cs=ge$1.getPooled(Cs,ga,_s,Ss),Ms?Cs.data=Ms:(Ms=re$1(_s),Ms!==null&&(Cs.data=Ms)),Xd(Cs),Ms=Cs):Ms=null,(ca=le$1?te$1(ca,_s):ue$1(ca,_s))?(ga=he$1.getPooled(oe$1.beforeInput,ga,_s,Ss),ga.data=ca,Xd(ga)):ga=null,Ms===null?ga:ga===null?Ms:[Ms,ga]}},we$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$1(ca){var ga=ca&&ca.nodeName&&ca.nodeName.toLowerCase();return ga==="input"?!!we$1[ca.type]:ga==="textarea"}var ye$1={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$1(ca,ga,_s){return ca=G$1.getPooled(ye$1.change,ca,ga,_s),ca.type="change",Da(_s),Xd(ca),ca}var Ae$1=null,Be$1=null;function Ce$1(ca){mc(ca)}function De$1(ca){var ga=Pd(ca);if(yb(ga))return ca}function Ee$1(ca,ga){if(ca==="change")return ga}var Fe$1=!1;ya&&(Fe$1=oc("input")&&(!document.documentMode||9<document.documentMode));function Ge$1(){Ae$1&&(Ae$1.detachEvent("onpropertychange",He$1),Be$1=Ae$1=null)}function He$1(ca){if(ca.propertyName==="value"&&De$1(Be$1))if(ca=ze$1(Be$1,ca,nc(ca)),Ja)mc(ca);else{Ja=!0;try{Fa(Ce$1,ca)}finally{Ja=!1,La()}}}function Ie$1(ca,ga,_s){ca==="focus"?(Ge$1(),Ae$1=ga,Be$1=_s,Ae$1.attachEvent("onpropertychange",He$1)):ca==="blur"&&Ge$1()}function Je$1(ca){if(ca==="selectionchange"||ca==="keyup"||ca==="keydown")return De$1(Be$1)}function Ke$1(ca,ga){if(ca==="click")return De$1(ga)}function Le$1(ca,ga){if(ca==="input"||ca==="change")return De$1(ga)}var Me$1={eventTypes:ye$1,_isInputEventSupported:Fe$1,extractEvents:function(ca,ga,_s,Ss){var Ms=ga?Pd(ga):window,Cs=Ms.nodeName&&Ms.nodeName.toLowerCase();if(Cs==="select"||Cs==="input"&&Ms.type==="file")var Ts=Ee$1;else if(xe$1(Ms))if(Fe$1)Ts=Le$1;else{Ts=Je$1;var Is=Ie$1}else(Cs=Ms.nodeName)&&Cs.toLowerCase()==="input"&&(Ms.type==="checkbox"||Ms.type==="radio")&&(Ts=Ke$1);if(Ts&&(Ts=Ts(ca,ga)))return ze$1(Ts,_s,Ss);Is&&Is(ca,Ms,ga),ca==="blur"&&(ca=Ms._wrapperState)&&ca.controlled&&Ms.type==="number"&&Db(Ms,"number",Ms.value)}},Ne$1=G$1.extend({view:null,detail:null}),Oe$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$1(ca){var ga=this.nativeEvent;return ga.getModifierState?ga.getModifierState(ca):(ca=Oe$1[ca])?!!ga[ca]:!1}function Qe$1(){return Pe$1}var Re$1=0,Se$1=0,Te$1=!1,Ue$1=!1,Ve$1=Ne$1.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$1,button:null,buttons:null,relatedTarget:function(ca){return ca.relatedTarget||(ca.fromElement===ca.srcElement?ca.toElement:ca.fromElement)},movementX:function(ca){if("movementX"in ca)return ca.movementX;var ga=Re$1;return Re$1=ca.screenX,Te$1?ca.type==="mousemove"?ca.screenX-ga:0:(Te$1=!0,0)},movementY:function(ca){if("movementY"in ca)return ca.movementY;var ga=Se$1;return Se$1=ca.screenY,Ue$1?ca.type==="mousemove"?ca.screenY-ga:0:(Ue$1=!0,0)}}),We$1=Ve$1.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$1={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$1={eventTypes:Xe$1,extractEvents:function(ca,ga,_s,Ss,Ms){var Cs=ca==="mouseover"||ca==="pointerover",Ts=ca==="mouseout"||ca==="pointerout";if(Cs&&(Ms&32)===0&&(_s.relatedTarget||_s.fromElement)||!Ts&&!Cs)return null;if(Cs=Ss.window===Ss?Ss:(Cs=Ss.ownerDocument)?Cs.defaultView||Cs.parentWindow:window,Ts){if(Ts=ga,ga=(ga=_s.relatedTarget||_s.toElement)?tc(ga):null,ga!==null){var Is=dc(ga);(ga!==Is||ga.tag!==5&&ga.tag!==6)&&(ga=null)}}else Ts=null;if(Ts===ga)return null;if(ca==="mouseout"||ca==="mouseover")var Bs=Ve$1,Ps=Xe$1.mouseLeave,Ls=Xe$1.mouseEnter,Rs="mouse";else(ca==="pointerout"||ca==="pointerover")&&(Bs=We$1,Ps=Xe$1.pointerLeave,Ls=Xe$1.pointerEnter,Rs="pointer");if(ca=Ts==null?Cs:Pd(Ts),Cs=ga==null?Cs:Pd(ga),Ps=Bs.getPooled(Ps,Ts,_s,Ss),Ps.type=Rs+"leave",Ps.target=ca,Ps.relatedTarget=Cs,_s=Bs.getPooled(Ls,ga,_s,Ss),_s.type=Rs+"enter",_s.target=Cs,_s.relatedTarget=ca,Ss=Ts,Rs=ga,Ss&&Rs)e:{for(Bs=Ss,Ls=Rs,Ts=0,ca=Bs;ca;ca=Rd(ca))Ts++;for(ca=0,ga=Ls;ga;ga=Rd(ga))ca++;for(;0<Ts-ca;)Bs=Rd(Bs),Ts--;for(;0<ca-Ts;)Ls=Rd(Ls),ca--;for(;Ts--;){if(Bs===Ls||Bs===Ls.alternate)break e;Bs=Rd(Bs),Ls=Rd(Ls)}Bs=null}else Bs=null;for(Ls=Bs,Bs=[];Ss&&Ss!==Ls&&(Ts=Ss.alternate,!(Ts!==null&&Ts===Ls));)Bs.push(Ss),Ss=Rd(Ss);for(Ss=[];Rs&&Rs!==Ls&&(Ts=Rs.alternate,!(Ts!==null&&Ts===Ls));)Ss.push(Rs),Rs=Rd(Rs);for(Rs=0;Rs<Bs.length;Rs++)Vd(Bs[Rs],"bubbled",Ps);for(Rs=Ss.length;0<Rs--;)Vd(Ss[Rs],"captured",_s);return(Ms&64)===0?[Ps]:[Ps,_s]}};function Ze$1(ca,ga){return ca===ga&&(ca!==0||1/ca===1/ga)||ca!==ca&&ga!==ga}var $e$1=typeof Object.is=="function"?Object.is:Ze$1,af=Object.prototype.hasOwnProperty;function bf(ca,ga){if($e$1(ca,ga))return!0;if(typeof ca!="object"||ca===null||typeof ga!="object"||ga===null)return!1;var _s=Object.keys(ca),Ss=Object.keys(ga);if(_s.length!==Ss.length)return!1;for(Ss=0;Ss<_s.length;Ss++)if(!af.call(ga,_s[Ss])||!$e$1(ca[_s[Ss]],ga[_s[Ss]]))return!1;return!0}var cf=ya&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff=null,gf=null,hf=!1;function jf(ca,ga){var _s=ga.window===ga?ga.document:ga.nodeType===9?ga:ga.ownerDocument;return hf||ef==null||ef!==td(_s)?null:(_s=ef,"selectionStart"in _s&&yd(_s)?_s={start:_s.selectionStart,end:_s.selectionEnd}:(_s=(_s.ownerDocument&&_s.ownerDocument.defaultView||window).getSelection(),_s={anchorNode:_s.anchorNode,anchorOffset:_s.anchorOffset,focusNode:_s.focusNode,focusOffset:_s.focusOffset}),gf&&bf(gf,_s)?null:(gf=_s,ca=G$1.getPooled(df.select,ff,ca,ga),ca.type="select",ca.target=ef,Xd(ca),ca))}var kf={eventTypes:df,extractEvents:function(ca,ga,_s,Ss,Ms,Cs){if(Ms=Cs||(Ss.window===Ss?Ss.document:Ss.nodeType===9?Ss:Ss.ownerDocument),!(Cs=!Ms)){e:{Ms=cc(Ms),Cs=wa.onSelect;for(var Ts=0;Ts<Cs.length;Ts++)if(!Ms.has(Cs[Ts])){Ms=!1;break e}Ms=!0}Cs=!Ms}if(Cs)return null;switch(Ms=ga?Pd(ga):window,ca){case"focus":(xe$1(Ms)||Ms.contentEditable==="true")&&(ef=Ms,ff=ga,gf=null);break;case"blur":gf=ff=ef=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(_s,Ss);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(_s,Ss)}return null}},lf=G$1.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$1.extend({clipboardData:function(ca){return"clipboardData"in ca?ca.clipboardData:window.clipboardData}}),nf=Ne$1.extend({relatedTarget:null});function of(ca){var ga=ca.keyCode;return"charCode"in ca?(ca=ca.charCode,ca===0&&ga===13&&(ca=13)):ca=ga,ca===10&&(ca=13),32<=ca||ca===13?ca:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne$1.extend({key:function(ca){if(ca.key){var ga=pf[ca.key]||ca.key;if(ga!=="Unidentified")return ga}return ca.type==="keypress"?(ca=of(ca),ca===13?"Enter":String.fromCharCode(ca)):ca.type==="keydown"||ca.type==="keyup"?qf[ca.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$1,charCode:function(ca){return ca.type==="keypress"?of(ca):0},keyCode:function(ca){return ca.type==="keydown"||ca.type==="keyup"?ca.keyCode:0},which:function(ca){return ca.type==="keypress"?of(ca):ca.type==="keydown"||ca.type==="keyup"?ca.keyCode:0}}),sf=Ve$1.extend({dataTransfer:null}),tf=Ne$1.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$1}),uf=G$1.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$1.extend({deltaX:function(ca){return"deltaX"in ca?ca.deltaX:"wheelDeltaX"in ca?-ca.wheelDeltaX:0},deltaY:function(ca){return"deltaY"in ca?ca.deltaY:"wheelDeltaY"in ca?-ca.wheelDeltaY:"wheelDelta"in ca?-ca.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(ca,ga,_s,Ss){var Ms=Yc.get(ca);if(!Ms)return null;switch(ca){case"keypress":if(of(_s)===0)return null;case"keydown":case"keyup":ca=rf;break;case"blur":case"focus":ca=nf;break;case"click":if(_s.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ca=Ve$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ca=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ca=tf;break;case Xb:case Yb:case Zb:ca=lf;break;case $b:ca=uf;break;case"scroll":ca=Ne$1;break;case"wheel":ca=vf;break;case"copy":case"cut":case"paste":ca=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ca=We$1;break;default:ca=G$1}return ga=ca.getPooled(Ms,ga,_s,Ss),Xd(ga),ga}};if(pa)throw Error(u$3(101));pa=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra();var xf=Nc;la=Qd;ma=xf;na=Pd;xa({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye$1,ChangeEventPlugin:Me$1,SelectEventPlugin:kf,BeforeInputEventPlugin:ve$1});var yf=[],zf=-1;function H$1(ca){0>zf||(ca.current=yf[zf],yf[zf]=null,zf--)}function I$1(ca,ga){zf++,yf[zf]=ca.current,ca.current=ga}var Af={},J$1={current:Af},K$1={current:!1},Bf=Af;function Cf(ca,ga){var _s=ca.type.contextTypes;if(!_s)return Af;var Ss=ca.stateNode;if(Ss&&Ss.__reactInternalMemoizedUnmaskedChildContext===ga)return Ss.__reactInternalMemoizedMaskedChildContext;var Ms={},Cs;for(Cs in _s)Ms[Cs]=ga[Cs];return Ss&&(ca=ca.stateNode,ca.__reactInternalMemoizedUnmaskedChildContext=ga,ca.__reactInternalMemoizedMaskedChildContext=Ms),Ms}function L$2(ca){return ca=ca.childContextTypes,ca!=null}function Df(){H$1(K$1),H$1(J$1)}function Ef(ca,ga,_s){if(J$1.current!==Af)throw Error(u$3(168));I$1(J$1,ga),I$1(K$1,_s)}function Ff(ca,ga,_s){var Ss=ca.stateNode;if(ca=ga.childContextTypes,typeof Ss.getChildContext!="function")return _s;Ss=Ss.getChildContext();for(var Ms in Ss)if(!(Ms in ca))throw Error(u$3(108,pb(ga)||"Unknown",Ms));return n$4({},_s,{},Ss)}function Gf(ca){return ca=(ca=ca.stateNode)&&ca.__reactInternalMemoizedMergedChildContext||Af,Bf=J$1.current,I$1(J$1,ca),I$1(K$1,K$1.current),!0}function Hf(ca,ga,_s){var Ss=ca.stateNode;if(!Ss)throw Error(u$3(169));_s?(ca=Ff(ca,ga,Bf),Ss.__reactInternalMemoizedMergedChildContext=ca,H$1(K$1),H$1(J$1),I$1(J$1,ca)):H$1(K$1),I$1(K$1,_s)}var If=r$3.unstable_runWithPriority,Jf=r$3.unstable_scheduleCallback,Kf=r$3.unstable_cancelCallback,Lf=r$3.unstable_requestPaint,Mf=r$3.unstable_now,Nf=r$3.unstable_getCurrentPriorityLevel,Of=r$3.unstable_ImmediatePriority,Pf=r$3.unstable_UserBlockingPriority,Qf=r$3.unstable_NormalPriority,Rf=r$3.unstable_LowPriority,Sf=r$3.unstable_IdlePriority,Tf={},Uf=r$3.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u$3(332))}}function bg(ca){switch(ca){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u$3(332))}}function cg(ca,ga){return ca=bg(ca),If(ca,ga)}function dg(ca,ga,_s){return ca=bg(ca),Jf(ca,ga,_s)}function eg(ca){return Wf===null?(Wf=[ca],Xf=Jf(Of,fg)):Wf.push(ca),Tf}function gg(){if(Xf!==null){var ca=Xf;Xf=null,Kf(ca)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var ca=0;try{var ga=Wf;cg(99,function(){for(;ca<ga.length;ca++){var _s=ga[ca];do _s=_s(!0);while(_s!==null)}}),Wf=null}catch(_s){throw Wf!==null&&(Wf=Wf.slice(ca+1)),Jf(Of,gg),_s}finally{Yf=!1}}}function hg(ca,ga,_s){return _s/=10,1073741821-(((1073741821-ca+ga/10)/_s|0)+1)*_s}function ig(ca,ga){if(ca&&ca.defaultProps){ga=n$4({},ga),ca=ca.defaultProps;for(var _s in ca)ga[_s]===void 0&&(ga[_s]=ca[_s])}return ga}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(ca){var ga=jg.current;H$1(jg),ca.type._context._currentValue=ga}function pg(ca,ga){for(;ca!==null;){var _s=ca.alternate;if(ca.childExpirationTime<ga)ca.childExpirationTime=ga,_s!==null&&_s.childExpirationTime<ga&&(_s.childExpirationTime=ga);else if(_s!==null&&_s.childExpirationTime<ga)_s.childExpirationTime=ga;else break;ca=ca.return}}function qg(ca,ga){kg=ca,mg=lg=null,ca=ca.dependencies,ca!==null&&ca.firstContext!==null&&(ca.expirationTime>=ga&&(rg=!0),ca.firstContext=null)}function sg(ca,ga){if(mg!==ca&&ga!==!1&&ga!==0)if((typeof ga!="number"||ga===1073741823)&&(mg=ca,ga=1073741823),ga={context:ca,observedBits:ga,next:null},lg===null){if(kg===null)throw Error(u$3(308));lg=ga,kg.dependencies={expirationTime:0,firstContext:ga,responders:null}}else lg=lg.next=ga;return ca._currentValue}var tg=!1;function ug(ca){ca.updateQueue={baseState:ca.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(ca,ga){ca=ca.updateQueue,ga.updateQueue===ca&&(ga.updateQueue={baseState:ca.baseState,baseQueue:ca.baseQueue,shared:ca.shared,effects:ca.effects})}function wg(ca,ga){return ca={expirationTime:ca,suspenseConfig:ga,tag:0,payload:null,callback:null,next:null},ca.next=ca}function xg(ca,ga){if(ca=ca.updateQueue,ca!==null){ca=ca.shared;var _s=ca.pending;_s===null?ga.next=ga:(ga.next=_s.next,_s.next=ga),ca.pending=ga}}function yg(ca,ga){var _s=ca.alternate;_s!==null&&vg(_s,ca),ca=ca.updateQueue,_s=ca.baseQueue,_s===null?(ca.baseQueue=ga.next=ga,ga.next=ga):(ga.next=_s.next,_s.next=ga)}function zg(ca,ga,_s,Ss){var Ms=ca.updateQueue;tg=!1;var Cs=Ms.baseQueue,Ts=Ms.shared.pending;if(Ts!==null){if(Cs!==null){var Is=Cs.next;Cs.next=Ts.next,Ts.next=Is}Cs=Ts,Ms.shared.pending=null,Is=ca.alternate,Is!==null&&(Is=Is.updateQueue,Is!==null&&(Is.baseQueue=Ts))}if(Cs!==null){Is=Cs.next;var Bs=Ms.baseState,Ps=0,Ls=null,Rs=null,Os=null;if(Is!==null){var Fs=Is;do{if(Ts=Fs.expirationTime,Ts<Ss){var Vs={expirationTime:Fs.expirationTime,suspenseConfig:Fs.suspenseConfig,tag:Fs.tag,payload:Fs.payload,callback:Fs.callback,next:null};Os===null?(Rs=Os=Vs,Ls=Bs):Os=Os.next=Vs,Ts>Ps&&(Ps=Ts)}else{Os!==null&&(Os=Os.next={expirationTime:1073741823,suspenseConfig:Fs.suspenseConfig,tag:Fs.tag,payload:Fs.payload,callback:Fs.callback,next:null}),Ag(Ts,Fs.suspenseConfig);e:{var ks=ca,Ns=Fs;switch(Ts=ga,Vs=_s,Ns.tag){case 1:if(ks=Ns.payload,typeof ks=="function"){Bs=ks.call(Vs,Bs,Ts);break e}Bs=ks;break e;case 3:ks.effectTag=ks.effectTag&-4097|64;case 0:if(ks=Ns.payload,Ts=typeof ks=="function"?ks.call(Vs,Bs,Ts):ks,Ts==null)break e;Bs=n$4({},Bs,Ts);break e;case 2:tg=!0}}Fs.callback!==null&&(ca.effectTag|=32,Ts=Ms.effects,Ts===null?Ms.effects=[Fs]:Ts.push(Fs))}if(Fs=Fs.next,Fs===null||Fs===Is){if(Ts=Ms.shared.pending,Ts===null)break;Fs=Cs.next=Ts.next,Ts.next=Is,Ms.baseQueue=Cs=Ts,Ms.shared.pending=null}}while(1)}Os===null?Ls=Bs:Os.next=Rs,Ms.baseState=Ls,Ms.baseQueue=Os,Bg(Ps),ca.expirationTime=Ps,ca.memoizedState=Bs}}function Cg(ca,ga,_s){if(ca=ga.effects,ga.effects=null,ca!==null)for(ga=0;ga<ca.length;ga++){var Ss=ca[ga],Ms=Ss.callback;if(Ms!==null){if(Ss.callback=null,Ss=Ms,Ms=_s,typeof Ss!="function")throw Error(u$3(191,Ss));Ss.call(Ms)}}}var Dg=Wa.ReactCurrentBatchConfig,Eg=new aa.Component().refs;function Fg(ca,ga,_s,Ss){ga=ca.memoizedState,_s=_s(Ss,ga),_s=_s==null?ga:n$4({},ga,_s),ca.memoizedState=_s,ca.expirationTime===0&&(ca.updateQueue.baseState=_s)}var Jg={isMounted:function(ca){return(ca=ca._reactInternalFiber)?dc(ca)===ca:!1},enqueueSetState:function(ca,ga,_s){ca=ca._reactInternalFiber;var Ss=Gg(),Ms=Dg.suspense;Ss=Hg(Ss,ca,Ms),Ms=wg(Ss,Ms),Ms.payload=ga,_s!=null&&(Ms.callback=_s),xg(ca,Ms),Ig(ca,Ss)},enqueueReplaceState:function(ca,ga,_s){ca=ca._reactInternalFiber;var Ss=Gg(),Ms=Dg.suspense;Ss=Hg(Ss,ca,Ms),Ms=wg(Ss,Ms),Ms.tag=1,Ms.payload=ga,_s!=null&&(Ms.callback=_s),xg(ca,Ms),Ig(ca,Ss)},enqueueForceUpdate:function(ca,ga){ca=ca._reactInternalFiber;var _s=Gg(),Ss=Dg.suspense;_s=Hg(_s,ca,Ss),Ss=wg(_s,Ss),Ss.tag=2,ga!=null&&(Ss.callback=ga),xg(ca,Ss),Ig(ca,_s)}};function Kg(ca,ga,_s,Ss,Ms,Cs,Ts){return ca=ca.stateNode,typeof ca.shouldComponentUpdate=="function"?ca.shouldComponentUpdate(Ss,Cs,Ts):ga.prototype&&ga.prototype.isPureReactComponent?!bf(_s,Ss)||!bf(Ms,Cs):!0}function Lg(ca,ga,_s){var Ss=!1,Ms=Af,Cs=ga.contextType;return typeof Cs=="object"&&Cs!==null?Cs=sg(Cs):(Ms=L$2(ga)?Bf:J$1.current,Ss=ga.contextTypes,Cs=(Ss=Ss!=null)?Cf(ca,Ms):Af),ga=new ga(_s,Cs),ca.memoizedState=ga.state!==null&&ga.state!==void 0?ga.state:null,ga.updater=Jg,ca.stateNode=ga,ga._reactInternalFiber=ca,Ss&&(ca=ca.stateNode,ca.__reactInternalMemoizedUnmaskedChildContext=Ms,ca.__reactInternalMemoizedMaskedChildContext=Cs),ga}function Mg(ca,ga,_s,Ss){ca=ga.state,typeof ga.componentWillReceiveProps=="function"&&ga.componentWillReceiveProps(_s,Ss),typeof ga.UNSAFE_componentWillReceiveProps=="function"&&ga.UNSAFE_componentWillReceiveProps(_s,Ss),ga.state!==ca&&Jg.enqueueReplaceState(ga,ga.state,null)}function Ng(ca,ga,_s,Ss){var Ms=ca.stateNode;Ms.props=_s,Ms.state=ca.memoizedState,Ms.refs=Eg,ug(ca);var Cs=ga.contextType;typeof Cs=="object"&&Cs!==null?Ms.context=sg(Cs):(Cs=L$2(ga)?Bf:J$1.current,Ms.context=Cf(ca,Cs)),zg(ca,_s,Ms,Ss),Ms.state=ca.memoizedState,Cs=ga.getDerivedStateFromProps,typeof Cs=="function"&&(Fg(ca,ga,Cs,_s),Ms.state=ca.memoizedState),typeof ga.getDerivedStateFromProps=="function"||typeof Ms.getSnapshotBeforeUpdate=="function"||typeof Ms.UNSAFE_componentWillMount!="function"&&typeof Ms.componentWillMount!="function"||(ga=Ms.state,typeof Ms.componentWillMount=="function"&&Ms.componentWillMount(),typeof Ms.UNSAFE_componentWillMount=="function"&&Ms.UNSAFE_componentWillMount(),ga!==Ms.state&&Jg.enqueueReplaceState(Ms,Ms.state,null),zg(ca,_s,Ms,Ss),Ms.state=ca.memoizedState),typeof Ms.componentDidMount=="function"&&(ca.effectTag|=4)}var Og=Array.isArray;function Pg(ca,ga,_s){if(ca=_s.ref,ca!==null&&typeof ca!="function"&&typeof ca!="object"){if(_s._owner){if(_s=_s._owner,_s){if(_s.tag!==1)throw Error(u$3(309));var Ss=_s.stateNode}if(!Ss)throw Error(u$3(147,ca));var Ms=""+ca;return ga!==null&&ga.ref!==null&&typeof ga.ref=="function"&&ga.ref._stringRef===Ms?ga.ref:(ga=function(Cs){var Ts=Ss.refs;Ts===Eg&&(Ts=Ss.refs={}),Cs===null?delete Ts[Ms]:Ts[Ms]=Cs},ga._stringRef=Ms,ga)}if(typeof ca!="string")throw Error(u$3(284));if(!_s._owner)throw Error(u$3(290,ca))}return ca}function Qg(ca,ga){if(ca.type!=="textarea")throw Error(u$3(31,Object.prototype.toString.call(ga)==="[object Object]"?"object with keys {"+Object.keys(ga).join(", ")+"}":ga,""))}function Rg(ca){function ga(Ns,Ds){if(ca){var $s=Ns.lastEffect;$s!==null?($s.nextEffect=Ds,Ns.lastEffect=Ds):Ns.firstEffect=Ns.lastEffect=Ds,Ds.nextEffect=null,Ds.effectTag=8}}function _s(Ns,Ds){if(!ca)return null;for(;Ds!==null;)ga(Ns,Ds),Ds=Ds.sibling;return null}function Ss(Ns,Ds){for(Ns=new Map;Ds!==null;)Ds.key!==null?Ns.set(Ds.key,Ds):Ns.set(Ds.index,Ds),Ds=Ds.sibling;return Ns}function Ms(Ns,Ds){return Ns=Sg(Ns,Ds),Ns.index=0,Ns.sibling=null,Ns}function Cs(Ns,Ds,$s){return Ns.index=$s,ca?($s=Ns.alternate,$s!==null?($s=$s.index,$s<Ds?(Ns.effectTag=2,Ds):$s):(Ns.effectTag=2,Ds)):Ds}function Ts(Ns){return ca&&Ns.alternate===null&&(Ns.effectTag=2),Ns}function Is(Ns,Ds,$s,Gs){return Ds===null||Ds.tag!==6?(Ds=Tg($s,Ns.mode,Gs),Ds.return=Ns,Ds):(Ds=Ms(Ds,$s),Ds.return=Ns,Ds)}function Bs(Ns,Ds,$s,Gs){return Ds!==null&&Ds.elementType===$s.type?(Gs=Ms(Ds,$s.props),Gs.ref=Pg(Ns,Ds,$s),Gs.return=Ns,Gs):(Gs=Ug($s.type,$s.key,$s.props,null,Ns.mode,Gs),Gs.ref=Pg(Ns,Ds,$s),Gs.return=Ns,Gs)}function Ps(Ns,Ds,$s,Gs){return Ds===null||Ds.tag!==4||Ds.stateNode.containerInfo!==$s.containerInfo||Ds.stateNode.implementation!==$s.implementation?(Ds=Vg($s,Ns.mode,Gs),Ds.return=Ns,Ds):(Ds=Ms(Ds,$s.children||[]),Ds.return=Ns,Ds)}function Ls(Ns,Ds,$s,Gs,Us){return Ds===null||Ds.tag!==7?(Ds=Wg($s,Ns.mode,Gs,Us),Ds.return=Ns,Ds):(Ds=Ms(Ds,$s),Ds.return=Ns,Ds)}function Rs(Ns,Ds,$s){if(typeof Ds=="string"||typeof Ds=="number")return Ds=Tg(""+Ds,Ns.mode,$s),Ds.return=Ns,Ds;if(typeof Ds=="object"&&Ds!==null){switch(Ds.$$typeof){case Za:return $s=Ug(Ds.type,Ds.key,Ds.props,null,Ns.mode,$s),$s.ref=Pg(Ns,null,Ds),$s.return=Ns,$s;case $a:return Ds=Vg(Ds,Ns.mode,$s),Ds.return=Ns,Ds}if(Og(Ds)||nb(Ds))return Ds=Wg(Ds,Ns.mode,$s,null),Ds.return=Ns,Ds;Qg(Ns,Ds)}return null}function Os(Ns,Ds,$s,Gs){var Us=Ds!==null?Ds.key:null;if(typeof $s=="string"||typeof $s=="number")return Us!==null?null:Is(Ns,Ds,""+$s,Gs);if(typeof $s=="object"&&$s!==null){switch($s.$$typeof){case Za:return $s.key===Us?$s.type===ab?Ls(Ns,Ds,$s.props.children,Gs,Us):Bs(Ns,Ds,$s,Gs):null;case $a:return $s.key===Us?Ps(Ns,Ds,$s,Gs):null}if(Og($s)||nb($s))return Us!==null?null:Ls(Ns,Ds,$s,Gs,null);Qg(Ns,$s)}return null}function Fs(Ns,Ds,$s,Gs,Us){if(typeof Gs=="string"||typeof Gs=="number")return Ns=Ns.get($s)||null,Is(Ds,Ns,""+Gs,Us);if(typeof Gs=="object"&&Gs!==null){switch(Gs.$$typeof){case Za:return Ns=Ns.get(Gs.key===null?$s:Gs.key)||null,Gs.type===ab?Ls(Ds,Ns,Gs.props.children,Us,Gs.key):Bs(Ds,Ns,Gs,Us);case $a:return Ns=Ns.get(Gs.key===null?$s:Gs.key)||null,Ps(Ds,Ns,Gs,Us)}if(Og(Gs)||nb(Gs))return Ns=Ns.get($s)||null,Ls(Ds,Ns,Gs,Us,null);Qg(Ds,Gs)}return null}function Vs(Ns,Ds,$s,Gs){for(var Us=null,Hs=null,zs=Ds,js=Ds=0,Ws=null;zs!==null&&js<$s.length;js++){zs.index>js?(Ws=zs,zs=null):Ws=zs.sibling;var Qs=Os(Ns,zs,$s[js],Gs);if(Qs===null){zs===null&&(zs=Ws);break}ca&&zs&&Qs.alternate===null&&ga(Ns,zs),Ds=Cs(Qs,Ds,js),Hs===null?Us=Qs:Hs.sibling=Qs,Hs=Qs,zs=Ws}if(js===$s.length)return _s(Ns,zs),Us;if(zs===null){for(;js<$s.length;js++)zs=Rs(Ns,$s[js],Gs),zs!==null&&(Ds=Cs(zs,Ds,js),Hs===null?Us=zs:Hs.sibling=zs,Hs=zs);return Us}for(zs=Ss(Ns,zs);js<$s.length;js++)Ws=Fs(zs,Ns,js,$s[js],Gs),Ws!==null&&(ca&&Ws.alternate!==null&&zs.delete(Ws.key===null?js:Ws.key),Ds=Cs(Ws,Ds,js),Hs===null?Us=Ws:Hs.sibling=Ws,Hs=Ws);return ca&&zs.forEach(function(Zs){return ga(Ns,Zs)}),Us}function ks(Ns,Ds,$s,Gs){var Us=nb($s);if(typeof Us!="function")throw Error(u$3(150));if($s=Us.call($s),$s==null)throw Error(u$3(151));for(var Hs=Us=null,zs=Ds,js=Ds=0,Ws=null,Qs=$s.next();zs!==null&&!Qs.done;js++,Qs=$s.next()){zs.index>js?(Ws=zs,zs=null):Ws=zs.sibling;var Zs=Os(Ns,zs,Qs.value,Gs);if(Zs===null){zs===null&&(zs=Ws);break}ca&&zs&&Zs.alternate===null&&ga(Ns,zs),Ds=Cs(Zs,Ds,js),Hs===null?Us=Zs:Hs.sibling=Zs,Hs=Zs,zs=Ws}if(Qs.done)return _s(Ns,zs),Us;if(zs===null){for(;!Qs.done;js++,Qs=$s.next())Qs=Rs(Ns,Qs.value,Gs),Qs!==null&&(Ds=Cs(Qs,Ds,js),Hs===null?Us=Qs:Hs.sibling=Qs,Hs=Qs);return Us}for(zs=Ss(Ns,zs);!Qs.done;js++,Qs=$s.next())Qs=Fs(zs,Ns,js,Qs.value,Gs),Qs!==null&&(ca&&Qs.alternate!==null&&zs.delete(Qs.key===null?js:Qs.key),Ds=Cs(Qs,Ds,js),Hs===null?Us=Qs:Hs.sibling=Qs,Hs=Qs);return ca&&zs.forEach(function(Xs){return ga(Ns,Xs)}),Us}return function(Ns,Ds,$s,Gs){var Us=typeof $s=="object"&&$s!==null&&$s.type===ab&&$s.key===null;Us&&($s=$s.props.children);var Hs=typeof $s=="object"&&$s!==null;if(Hs)switch($s.$$typeof){case Za:e:{for(Hs=$s.key,Us=Ds;Us!==null;){if(Us.key===Hs){switch(Us.tag){case 7:if($s.type===ab){_s(Ns,Us.sibling),Ds=Ms(Us,$s.props.children),Ds.return=Ns,Ns=Ds;break e}break;default:if(Us.elementType===$s.type){_s(Ns,Us.sibling),Ds=Ms(Us,$s.props),Ds.ref=Pg(Ns,Us,$s),Ds.return=Ns,Ns=Ds;break e}}_s(Ns,Us);break}else ga(Ns,Us);Us=Us.sibling}$s.type===ab?(Ds=Wg($s.props.children,Ns.mode,Gs,$s.key),Ds.return=Ns,Ns=Ds):(Gs=Ug($s.type,$s.key,$s.props,null,Ns.mode,Gs),Gs.ref=Pg(Ns,Ds,$s),Gs.return=Ns,Ns=Gs)}return Ts(Ns);case $a:e:{for(Us=$s.key;Ds!==null;){if(Ds.key===Us)if(Ds.tag===4&&Ds.stateNode.containerInfo===$s.containerInfo&&Ds.stateNode.implementation===$s.implementation){_s(Ns,Ds.sibling),Ds=Ms(Ds,$s.children||[]),Ds.return=Ns,Ns=Ds;break e}else{_s(Ns,Ds);break}else ga(Ns,Ds);Ds=Ds.sibling}Ds=Vg($s,Ns.mode,Gs),Ds.return=Ns,Ns=Ds}return Ts(Ns)}if(typeof $s=="string"||typeof $s=="number")return $s=""+$s,Ds!==null&&Ds.tag===6?(_s(Ns,Ds.sibling),Ds=Ms(Ds,$s),Ds.return=Ns,Ns=Ds):(_s(Ns,Ds),Ds=Tg($s,Ns.mode,Gs),Ds.return=Ns,Ns=Ds),Ts(Ns);if(Og($s))return Vs(Ns,Ds,$s,Gs);if(nb($s))return ks(Ns,Ds,$s,Gs);if(Hs&&Qg(Ns,$s),typeof $s=="undefined"&&!Us)switch(Ns.tag){case 1:case 0:throw Ns=Ns.type,Error(u$3(152,Ns.displayName||Ns.name||"Component"))}return _s(Ns,Ds)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(ca){if(ca===Zg)throw Error(u$3(174));return ca}function dh(ca,ga){switch(I$1(bh,ga),I$1(ah,ca),I$1($g,Zg),ca=ga.nodeType,ca){case 9:case 11:ga=(ga=ga.documentElement)?ga.namespaceURI:Ob(null,"");break;default:ca=ca===8?ga.parentNode:ga,ga=ca.namespaceURI||null,ca=ca.tagName,ga=Ob(ga,ca)}H$1($g),I$1($g,ga)}function eh(){H$1($g),H$1(ah),H$1(bh)}function fh(ca){ch(bh.current);var ga=ch($g.current),_s=Ob(ga,ca.type);ga!==_s&&(I$1(ah,ca),I$1($g,_s))}function gh(ca){ah.current===ca&&(H$1($g),H$1(ah))}var M$2={current:0};function hh(ca){for(var ga=ca;ga!==null;){if(ga.tag===13){var _s=ga.memoizedState;if(_s!==null&&(_s=_s.dehydrated,_s===null||_s.data===Bd||_s.data===Cd))return ga}else if(ga.tag===19&&ga.memoizedProps.revealOrder!==void 0){if((ga.effectTag&64)!==0)return ga}else if(ga.child!==null){ga.child.return=ga,ga=ga.child;continue}if(ga===ca)break;for(;ga.sibling===null;){if(ga.return===null||ga.return===ca)return null;ga=ga.return}ga.sibling.return=ga.return,ga=ga.sibling}return null}function ih(ca,ga){return{responder:ca,props:ga}}var jh=Wa.ReactCurrentDispatcher,kh=Wa.ReactCurrentBatchConfig,lh=0,N$2=null,O$2=null,P$2=null,mh=!1;function Q$1(){throw Error(u$3(321))}function nh(ca,ga){if(ga===null)return!1;for(var _s=0;_s<ga.length&&_s<ca.length;_s++)if(!$e$1(ca[_s],ga[_s]))return!1;return!0}function oh(ca,ga,_s,Ss,Ms,Cs){if(lh=Cs,N$2=ga,ga.memoizedState=null,ga.updateQueue=null,ga.expirationTime=0,jh.current=ca===null||ca.memoizedState===null?ph:qh,ca=_s(Ss,Ms),ga.expirationTime===lh){Cs=0;do{if(ga.expirationTime=0,!(25>Cs))throw Error(u$3(301));Cs+=1,P$2=O$2=null,ga.updateQueue=null,jh.current=rh,ca=_s(Ss,Ms)}while(ga.expirationTime===lh)}if(jh.current=sh,ga=O$2!==null&&O$2.next!==null,lh=0,P$2=O$2=N$2=null,mh=!1,ga)throw Error(u$3(300));return ca}function th(){var ca={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$2.memoizedState=P$2=ca:P$2=P$2.next=ca,P$2}function uh(){if(O$2===null){var ca=N$2.alternate;ca=ca!==null?ca.memoizedState:null}else ca=O$2.next;var ga=P$2===null?N$2.memoizedState:P$2.next;if(ga!==null)P$2=ga,O$2=ca;else{if(ca===null)throw Error(u$3(310));O$2=ca,ca={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$2===null?N$2.memoizedState=P$2=ca:P$2=P$2.next=ca}return P$2}function vh(ca,ga){return typeof ga=="function"?ga(ca):ga}function wh(ca){var ga=uh(),_s=ga.queue;if(_s===null)throw Error(u$3(311));_s.lastRenderedReducer=ca;var Ss=O$2,Ms=Ss.baseQueue,Cs=_s.pending;if(Cs!==null){if(Ms!==null){var Ts=Ms.next;Ms.next=Cs.next,Cs.next=Ts}Ss.baseQueue=Ms=Cs,_s.pending=null}if(Ms!==null){Ms=Ms.next,Ss=Ss.baseState;var Is=Ts=Cs=null,Bs=Ms;do{var Ps=Bs.expirationTime;if(Ps<lh){var Ls={expirationTime:Bs.expirationTime,suspenseConfig:Bs.suspenseConfig,action:Bs.action,eagerReducer:Bs.eagerReducer,eagerState:Bs.eagerState,next:null};Is===null?(Ts=Is=Ls,Cs=Ss):Is=Is.next=Ls,Ps>N$2.expirationTime&&(N$2.expirationTime=Ps,Bg(Ps))}else Is!==null&&(Is=Is.next={expirationTime:1073741823,suspenseConfig:Bs.suspenseConfig,action:Bs.action,eagerReducer:Bs.eagerReducer,eagerState:Bs.eagerState,next:null}),Ag(Ps,Bs.suspenseConfig),Ss=Bs.eagerReducer===ca?Bs.eagerState:ca(Ss,Bs.action);Bs=Bs.next}while(Bs!==null&&Bs!==Ms);Is===null?Cs=Ss:Is.next=Ts,$e$1(Ss,ga.memoizedState)||(rg=!0),ga.memoizedState=Ss,ga.baseState=Cs,ga.baseQueue=Is,_s.lastRenderedState=Ss}return[ga.memoizedState,_s.dispatch]}function xh(ca){var ga=uh(),_s=ga.queue;if(_s===null)throw Error(u$3(311));_s.lastRenderedReducer=ca;var Ss=_s.dispatch,Ms=_s.pending,Cs=ga.memoizedState;if(Ms!==null){_s.pending=null;var Ts=Ms=Ms.next;do Cs=ca(Cs,Ts.action),Ts=Ts.next;while(Ts!==Ms);$e$1(Cs,ga.memoizedState)||(rg=!0),ga.memoizedState=Cs,ga.baseQueue===null&&(ga.baseState=Cs),_s.lastRenderedState=Cs}return[Cs,Ss]}function yh(ca){var ga=th();return typeof ca=="function"&&(ca=ca()),ga.memoizedState=ga.baseState=ca,ca=ga.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:ca},ca=ca.dispatch=zh.bind(null,N$2,ca),[ga.memoizedState,ca]}function Ah(ca,ga,_s,Ss){return ca={tag:ca,create:ga,destroy:_s,deps:Ss,next:null},ga=N$2.updateQueue,ga===null?(ga={lastEffect:null},N$2.updateQueue=ga,ga.lastEffect=ca.next=ca):(_s=ga.lastEffect,_s===null?ga.lastEffect=ca.next=ca:(Ss=_s.next,_s.next=ca,ca.next=Ss,ga.lastEffect=ca)),ca}function Bh(){return uh().memoizedState}function Ch(ca,ga,_s,Ss){var Ms=th();N$2.effectTag|=ca,Ms.memoizedState=Ah(1|ga,_s,void 0,Ss===void 0?null:Ss)}function Dh(ca,ga,_s,Ss){var Ms=uh();Ss=Ss===void 0?null:Ss;var Cs=void 0;if(O$2!==null){var Ts=O$2.memoizedState;if(Cs=Ts.destroy,Ss!==null&&nh(Ss,Ts.deps)){Ah(ga,_s,Cs,Ss);return}}N$2.effectTag|=ca,Ms.memoizedState=Ah(1|ga,_s,Cs,Ss)}function Eh(ca,ga){return Ch(516,4,ca,ga)}function Fh(ca,ga){return Dh(516,4,ca,ga)}function Gh(ca,ga){return Dh(4,2,ca,ga)}function Hh(ca,ga){if(typeof ga=="function")return ca=ca(),ga(ca),function(){ga(null)};if(ga!=null)return ca=ca(),ga.current=ca,function(){ga.current=null}}function Ih(ca,ga,_s){return _s=_s!=null?_s.concat([ca]):null,Dh(4,2,Hh.bind(null,ga,ca),_s)}function Jh(){}function Kh(ca,ga){return th().memoizedState=[ca,ga===void 0?null:ga],ca}function Lh(ca,ga){var _s=uh();ga=ga===void 0?null:ga;var Ss=_s.memoizedState;return Ss!==null&&ga!==null&&nh(ga,Ss[1])?Ss[0]:(_s.memoizedState=[ca,ga],ca)}function Mh(ca,ga){var _s=uh();ga=ga===void 0?null:ga;var Ss=_s.memoizedState;return Ss!==null&&ga!==null&&nh(ga,Ss[1])?Ss[0]:(ca=ca(),_s.memoizedState=[ca,ga],ca)}function Nh(ca,ga,_s){var Ss=ag();cg(98>Ss?98:Ss,function(){ca(!0)}),cg(97<Ss?97:Ss,function(){var Ms=kh.suspense;kh.suspense=ga===void 0?null:ga;try{ca(!1),_s()}finally{kh.suspense=Ms}})}function zh(ca,ga,_s){var Ss=Gg(),Ms=Dg.suspense;Ss=Hg(Ss,ca,Ms),Ms={expirationTime:Ss,suspenseConfig:Ms,action:_s,eagerReducer:null,eagerState:null,next:null};var Cs=ga.pending;if(Cs===null?Ms.next=Ms:(Ms.next=Cs.next,Cs.next=Ms),ga.pending=Ms,Cs=ca.alternate,ca===N$2||Cs!==null&&Cs===N$2)mh=!0,Ms.expirationTime=lh,N$2.expirationTime=lh;else{if(ca.expirationTime===0&&(Cs===null||Cs.expirationTime===0)&&(Cs=ga.lastRenderedReducer,Cs!==null))try{var Ts=ga.lastRenderedState,Is=Cs(Ts,_s);if(Ms.eagerReducer=Cs,Ms.eagerState=Is,$e$1(Is,Ts))return}catch{}finally{}Ig(ca,Ss)}}var sh={readContext:sg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useResponder:Q$1,useDeferredValue:Q$1,useTransition:Q$1},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(ca,ga,_s){return _s=_s!=null?_s.concat([ca]):null,Ch(4,2,Hh.bind(null,ga,ca),_s)},useLayoutEffect:function(ca,ga){return Ch(4,2,ca,ga)},useMemo:function(ca,ga){var _s=th();return ga=ga===void 0?null:ga,ca=ca(),_s.memoizedState=[ca,ga],ca},useReducer:function(ca,ga,_s){var Ss=th();return ga=_s!==void 0?_s(ga):ga,Ss.memoizedState=Ss.baseState=ga,ca=Ss.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:ga},ca=ca.dispatch=zh.bind(null,N$2,ca),[Ss.memoizedState,ca]},useRef:function(ca){var ga=th();return ca={current:ca},ga.memoizedState=ca},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(ca,ga){var _s=yh(ca),Ss=_s[0],Ms=_s[1];return Eh(function(){var Cs=kh.suspense;kh.suspense=ga===void 0?null:ga;try{Ms(ca)}finally{kh.suspense=Cs}},[ca,ga]),Ss},useTransition:function(ca){var ga=yh(!1),_s=ga[0];return ga=ga[1],[Kh(Nh.bind(null,ga,ca),[ga,ca]),_s]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(ca,ga){var _s=wh(vh),Ss=_s[0],Ms=_s[1];return Fh(function(){var Cs=kh.suspense;kh.suspense=ga===void 0?null:ga;try{Ms(ca)}finally{kh.suspense=Cs}},[ca,ga]),Ss},useTransition:function(ca){var ga=wh(vh),_s=ga[0];return ga=ga[1],[Lh(Nh.bind(null,ga,ca),[ga,ca]),_s]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(ca,ga){var _s=xh(vh),Ss=_s[0],Ms=_s[1];return Fh(function(){var Cs=kh.suspense;kh.suspense=ga===void 0?null:ga;try{Ms(ca)}finally{kh.suspense=Cs}},[ca,ga]),Ss},useTransition:function(ca){var ga=xh(vh),_s=ga[0];return ga=ga[1],[Lh(Nh.bind(null,ga,ca),[ga,ca]),_s]}},Oh=null,Ph=null,Qh=!1;function Rh(ca,ga){var _s=Sh(5,null,null,0);_s.elementType="DELETED",_s.type="DELETED",_s.stateNode=ga,_s.return=ca,_s.effectTag=8,ca.lastEffect!==null?(ca.lastEffect.nextEffect=_s,ca.lastEffect=_s):ca.firstEffect=ca.lastEffect=_s}function Th(ca,ga){switch(ca.tag){case 5:var _s=ca.type;return ga=ga.nodeType!==1||_s.toLowerCase()!==ga.nodeName.toLowerCase()?null:ga,ga!==null?(ca.stateNode=ga,!0):!1;case 6:return ga=ca.pendingProps===""||ga.nodeType!==3?null:ga,ga!==null?(ca.stateNode=ga,!0):!1;case 13:return!1;default:return!1}}function Uh(ca){if(Qh){var ga=Ph;if(ga){var _s=ga;if(!Th(ca,ga)){if(ga=Jd(_s.nextSibling),!ga||!Th(ca,ga)){ca.effectTag=ca.effectTag&-1025|2,Qh=!1,Oh=ca;return}Rh(Oh,_s)}Oh=ca,Ph=Jd(ga.firstChild)}else ca.effectTag=ca.effectTag&-1025|2,Qh=!1,Oh=ca}}function Vh(ca){for(ca=ca.return;ca!==null&&ca.tag!==5&&ca.tag!==3&&ca.tag!==13;)ca=ca.return;Oh=ca}function Wh(ca){if(ca!==Oh)return!1;if(!Qh)return Vh(ca),Qh=!0,!1;var ga=ca.type;if(ca.tag!==5||ga!=="head"&&ga!=="body"&&!Gd(ga,ca.memoizedProps))for(ga=Ph;ga;)Rh(ca,ga),ga=Jd(ga.nextSibling);if(Vh(ca),ca.tag===13){if(ca=ca.memoizedState,ca=ca!==null?ca.dehydrated:null,!ca)throw Error(u$3(317));e:{for(ca=ca.nextSibling,ga=0;ca;){if(ca.nodeType===8){var _s=ca.data;if(_s===Ad){if(ga===0){Ph=Jd(ca.nextSibling);break e}ga--}else _s!==zd&&_s!==Cd&&_s!==Bd||ga++}ca=ca.nextSibling}Ph=null}}else Ph=Oh?Jd(ca.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa.ReactCurrentOwner,rg=!1;function R$2(ca,ga,_s,Ss){ga.child=ca===null?Yg(ga,null,_s,Ss):Xg(ga,ca.child,_s,Ss)}function Zh(ca,ga,_s,Ss,Ms){_s=_s.render;var Cs=ga.ref;return qg(ga,Ms),Ss=oh(ca,ga,_s,Ss,Cs,Ms),ca!==null&&!rg?(ga.updateQueue=ca.updateQueue,ga.effectTag&=-517,ca.expirationTime<=Ms&&(ca.expirationTime=0),$h(ca,ga,Ms)):(ga.effectTag|=1,R$2(ca,ga,Ss,Ms),ga.child)}function ai$1(ca,ga,_s,Ss,Ms,Cs){if(ca===null){var Ts=_s.type;return typeof Ts=="function"&&!bi$1(Ts)&&Ts.defaultProps===void 0&&_s.compare===null&&_s.defaultProps===void 0?(ga.tag=15,ga.type=Ts,ci$1(ca,ga,Ts,Ss,Ms,Cs)):(ca=Ug(_s.type,null,Ss,null,ga.mode,Cs),ca.ref=ga.ref,ca.return=ga,ga.child=ca)}return Ts=ca.child,Ms<Cs&&(Ms=Ts.memoizedProps,_s=_s.compare,_s=_s!==null?_s:bf,_s(Ms,Ss)&&ca.ref===ga.ref)?$h(ca,ga,Cs):(ga.effectTag|=1,ca=Sg(Ts,Ss),ca.ref=ga.ref,ca.return=ga,ga.child=ca)}function ci$1(ca,ga,_s,Ss,Ms,Cs){return ca!==null&&bf(ca.memoizedProps,Ss)&&ca.ref===ga.ref&&(rg=!1,Ms<Cs)?(ga.expirationTime=ca.expirationTime,$h(ca,ga,Cs)):di$1(ca,ga,_s,Ss,Cs)}function ei$1(ca,ga){var _s=ga.ref;(ca===null&&_s!==null||ca!==null&&ca.ref!==_s)&&(ga.effectTag|=128)}function di$1(ca,ga,_s,Ss,Ms){var Cs=L$2(_s)?Bf:J$1.current;return Cs=Cf(ga,Cs),qg(ga,Ms),_s=oh(ca,ga,_s,Ss,Cs,Ms),ca!==null&&!rg?(ga.updateQueue=ca.updateQueue,ga.effectTag&=-517,ca.expirationTime<=Ms&&(ca.expirationTime=0),$h(ca,ga,Ms)):(ga.effectTag|=1,R$2(ca,ga,_s,Ms),ga.child)}function fi$1(ca,ga,_s,Ss,Ms){if(L$2(_s)){var Cs=!0;Gf(ga)}else Cs=!1;if(qg(ga,Ms),ga.stateNode===null)ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),Lg(ga,_s,Ss),Ng(ga,_s,Ss,Ms),Ss=!0;else if(ca===null){var Ts=ga.stateNode,Is=ga.memoizedProps;Ts.props=Is;var Bs=Ts.context,Ps=_s.contextType;typeof Ps=="object"&&Ps!==null?Ps=sg(Ps):(Ps=L$2(_s)?Bf:J$1.current,Ps=Cf(ga,Ps));var Ls=_s.getDerivedStateFromProps,Rs=typeof Ls=="function"||typeof Ts.getSnapshotBeforeUpdate=="function";Rs||typeof Ts.UNSAFE_componentWillReceiveProps!="function"&&typeof Ts.componentWillReceiveProps!="function"||(Is!==Ss||Bs!==Ps)&&Mg(ga,Ts,Ss,Ps),tg=!1;var Os=ga.memoizedState;Ts.state=Os,zg(ga,Ss,Ts,Ms),Bs=ga.memoizedState,Is!==Ss||Os!==Bs||K$1.current||tg?(typeof Ls=="function"&&(Fg(ga,_s,Ls,Ss),Bs=ga.memoizedState),(Is=tg||Kg(ga,_s,Is,Ss,Os,Bs,Ps))?(Rs||typeof Ts.UNSAFE_componentWillMount!="function"&&typeof Ts.componentWillMount!="function"||(typeof Ts.componentWillMount=="function"&&Ts.componentWillMount(),typeof Ts.UNSAFE_componentWillMount=="function"&&Ts.UNSAFE_componentWillMount()),typeof Ts.componentDidMount=="function"&&(ga.effectTag|=4)):(typeof Ts.componentDidMount=="function"&&(ga.effectTag|=4),ga.memoizedProps=Ss,ga.memoizedState=Bs),Ts.props=Ss,Ts.state=Bs,Ts.context=Ps,Ss=Is):(typeof Ts.componentDidMount=="function"&&(ga.effectTag|=4),Ss=!1)}else Ts=ga.stateNode,vg(ca,ga),Is=ga.memoizedProps,Ts.props=ga.type===ga.elementType?Is:ig(ga.type,Is),Bs=Ts.context,Ps=_s.contextType,typeof Ps=="object"&&Ps!==null?Ps=sg(Ps):(Ps=L$2(_s)?Bf:J$1.current,Ps=Cf(ga,Ps)),Ls=_s.getDerivedStateFromProps,(Rs=typeof Ls=="function"||typeof Ts.getSnapshotBeforeUpdate=="function")||typeof Ts.UNSAFE_componentWillReceiveProps!="function"&&typeof Ts.componentWillReceiveProps!="function"||(Is!==Ss||Bs!==Ps)&&Mg(ga,Ts,Ss,Ps),tg=!1,Bs=ga.memoizedState,Ts.state=Bs,zg(ga,Ss,Ts,Ms),Os=ga.memoizedState,Is!==Ss||Bs!==Os||K$1.current||tg?(typeof Ls=="function"&&(Fg(ga,_s,Ls,Ss),Os=ga.memoizedState),(Ls=tg||Kg(ga,_s,Is,Ss,Bs,Os,Ps))?(Rs||typeof Ts.UNSAFE_componentWillUpdate!="function"&&typeof Ts.componentWillUpdate!="function"||(typeof Ts.componentWillUpdate=="function"&&Ts.componentWillUpdate(Ss,Os,Ps),typeof Ts.UNSAFE_componentWillUpdate=="function"&&Ts.UNSAFE_componentWillUpdate(Ss,Os,Ps)),typeof Ts.componentDidUpdate=="function"&&(ga.effectTag|=4),typeof Ts.getSnapshotBeforeUpdate=="function"&&(ga.effectTag|=256)):(typeof Ts.componentDidUpdate!="function"||Is===ca.memoizedProps&&Bs===ca.memoizedState||(ga.effectTag|=4),typeof Ts.getSnapshotBeforeUpdate!="function"||Is===ca.memoizedProps&&Bs===ca.memoizedState||(ga.effectTag|=256),ga.memoizedProps=Ss,ga.memoizedState=Os),Ts.props=Ss,Ts.state=Os,Ts.context=Ps,Ss=Ls):(typeof Ts.componentDidUpdate!="function"||Is===ca.memoizedProps&&Bs===ca.memoizedState||(ga.effectTag|=4),typeof Ts.getSnapshotBeforeUpdate!="function"||Is===ca.memoizedProps&&Bs===ca.memoizedState||(ga.effectTag|=256),Ss=!1);return gi$1(ca,ga,_s,Ss,Cs,Ms)}function gi$1(ca,ga,_s,Ss,Ms,Cs){ei$1(ca,ga);var Ts=(ga.effectTag&64)!==0;if(!Ss&&!Ts)return Ms&&Hf(ga,_s,!1),$h(ca,ga,Cs);Ss=ga.stateNode,Yh.current=ga;var Is=Ts&&typeof _s.getDerivedStateFromError!="function"?null:Ss.render();return ga.effectTag|=1,ca!==null&&Ts?(ga.child=Xg(ga,ca.child,null,Cs),ga.child=Xg(ga,null,Is,Cs)):R$2(ca,ga,Is,Cs),ga.memoizedState=Ss.state,Ms&&Hf(ga,_s,!0),ga.child}function hi$1(ca){var ga=ca.stateNode;ga.pendingContext?Ef(ca,ga.pendingContext,ga.pendingContext!==ga.context):ga.context&&Ef(ca,ga.context,!1),dh(ca,ga.containerInfo)}var ii$1={dehydrated:null,retryTime:0};function ji$1(ca,ga,_s){var Ss=ga.mode,Ms=ga.pendingProps,Cs=M$2.current,Ts=!1,Is;if((Is=(ga.effectTag&64)!==0)||(Is=(Cs&2)!==0&&(ca===null||ca.memoizedState!==null)),Is?(Ts=!0,ga.effectTag&=-65):ca!==null&&ca.memoizedState===null||Ms.fallback===void 0||Ms.unstable_avoidThisFallback===!0||(Cs|=1),I$1(M$2,Cs&1),ca===null){if(Ms.fallback!==void 0&&Uh(ga),Ts){if(Ts=Ms.fallback,Ms=Wg(null,Ss,0,null),Ms.return=ga,(ga.mode&2)===0)for(ca=ga.memoizedState!==null?ga.child.child:ga.child,Ms.child=ca;ca!==null;)ca.return=Ms,ca=ca.sibling;return _s=Wg(Ts,Ss,_s,null),_s.return=ga,Ms.sibling=_s,ga.memoizedState=ii$1,ga.child=Ms,_s}return Ss=Ms.children,ga.memoizedState=null,ga.child=Yg(ga,null,Ss,_s)}if(ca.memoizedState!==null){if(ca=ca.child,Ss=ca.sibling,Ts){if(Ms=Ms.fallback,_s=Sg(ca,ca.pendingProps),_s.return=ga,(ga.mode&2)===0&&(Ts=ga.memoizedState!==null?ga.child.child:ga.child,Ts!==ca.child))for(_s.child=Ts;Ts!==null;)Ts.return=_s,Ts=Ts.sibling;return Ss=Sg(Ss,Ms),Ss.return=ga,_s.sibling=Ss,_s.childExpirationTime=0,ga.memoizedState=ii$1,ga.child=_s,Ss}return _s=Xg(ga,ca.child,Ms.children,_s),ga.memoizedState=null,ga.child=_s}if(ca=ca.child,Ts){if(Ts=Ms.fallback,Ms=Wg(null,Ss,0,null),Ms.return=ga,Ms.child=ca,ca!==null&&(ca.return=Ms),(ga.mode&2)===0)for(ca=ga.memoizedState!==null?ga.child.child:ga.child,Ms.child=ca;ca!==null;)ca.return=Ms,ca=ca.sibling;return _s=Wg(Ts,Ss,_s,null),_s.return=ga,Ms.sibling=_s,_s.effectTag|=2,Ms.childExpirationTime=0,ga.memoizedState=ii$1,ga.child=Ms,_s}return ga.memoizedState=null,ga.child=Xg(ga,ca,Ms.children,_s)}function ki$1(ca,ga){ca.expirationTime<ga&&(ca.expirationTime=ga);var _s=ca.alternate;_s!==null&&_s.expirationTime<ga&&(_s.expirationTime=ga),pg(ca.return,ga)}function li$1(ca,ga,_s,Ss,Ms,Cs){var Ts=ca.memoizedState;Ts===null?ca.memoizedState={isBackwards:ga,rendering:null,renderingStartTime:0,last:Ss,tail:_s,tailExpiration:0,tailMode:Ms,lastEffect:Cs}:(Ts.isBackwards=ga,Ts.rendering=null,Ts.renderingStartTime=0,Ts.last=Ss,Ts.tail=_s,Ts.tailExpiration=0,Ts.tailMode=Ms,Ts.lastEffect=Cs)}function mi$1(ca,ga,_s){var Ss=ga.pendingProps,Ms=Ss.revealOrder,Cs=Ss.tail;if(R$2(ca,ga,Ss.children,_s),Ss=M$2.current,(Ss&2)!==0)Ss=Ss&1|2,ga.effectTag|=64;else{if(ca!==null&&(ca.effectTag&64)!==0)e:for(ca=ga.child;ca!==null;){if(ca.tag===13)ca.memoizedState!==null&&ki$1(ca,_s);else if(ca.tag===19)ki$1(ca,_s);else if(ca.child!==null){ca.child.return=ca,ca=ca.child;continue}if(ca===ga)break e;for(;ca.sibling===null;){if(ca.return===null||ca.return===ga)break e;ca=ca.return}ca.sibling.return=ca.return,ca=ca.sibling}Ss&=1}if(I$1(M$2,Ss),(ga.mode&2)===0)ga.memoizedState=null;else switch(Ms){case"forwards":for(_s=ga.child,Ms=null;_s!==null;)ca=_s.alternate,ca!==null&&hh(ca)===null&&(Ms=_s),_s=_s.sibling;_s=Ms,_s===null?(Ms=ga.child,ga.child=null):(Ms=_s.sibling,_s.sibling=null),li$1(ga,!1,Ms,_s,Cs,ga.lastEffect);break;case"backwards":for(_s=null,Ms=ga.child,ga.child=null;Ms!==null;){if(ca=Ms.alternate,ca!==null&&hh(ca)===null){ga.child=Ms;break}ca=Ms.sibling,Ms.sibling=_s,_s=Ms,Ms=ca}li$1(ga,!0,_s,null,Cs,ga.lastEffect);break;case"together":li$1(ga,!1,null,null,void 0,ga.lastEffect);break;default:ga.memoizedState=null}return ga.child}function $h(ca,ga,_s){ca!==null&&(ga.dependencies=ca.dependencies);var Ss=ga.expirationTime;if(Ss!==0&&Bg(Ss),ga.childExpirationTime<_s)return null;if(ca!==null&&ga.child!==ca.child)throw Error(u$3(153));if(ga.child!==null){for(ca=ga.child,_s=Sg(ca,ca.pendingProps),ga.child=_s,_s.return=ga;ca.sibling!==null;)ca=ca.sibling,_s=_s.sibling=Sg(ca,ca.pendingProps),_s.return=ga;_s.sibling=null}return ga.child}var ni$1,oi$1,pi$1,qi$1;ni$1=function(ca,ga){for(var _s=ga.child;_s!==null;){if(_s.tag===5||_s.tag===6)ca.appendChild(_s.stateNode);else if(_s.tag!==4&&_s.child!==null){_s.child.return=_s,_s=_s.child;continue}if(_s===ga)break;for(;_s.sibling===null;){if(_s.return===null||_s.return===ga)return;_s=_s.return}_s.sibling.return=_s.return,_s=_s.sibling}};oi$1=function(){};pi$1=function(ca,ga,_s,Ss,Ms){var Cs=ca.memoizedProps;if(Cs!==Ss){var Ts=ga.stateNode;switch(ch($g.current),ca=null,_s){case"input":Cs=zb(Ts,Cs),Ss=zb(Ts,Ss),ca=[];break;case"option":Cs=Gb(Ts,Cs),Ss=Gb(Ts,Ss),ca=[];break;case"select":Cs=n$4({},Cs,{value:void 0}),Ss=n$4({},Ss,{value:void 0}),ca=[];break;case"textarea":Cs=Ib(Ts,Cs),Ss=Ib(Ts,Ss),ca=[];break;default:typeof Cs.onClick!="function"&&typeof Ss.onClick=="function"&&(Ts.onclick=sd)}od(_s,Ss);var Is,Bs;_s=null;for(Is in Cs)if(!Ss.hasOwnProperty(Is)&&Cs.hasOwnProperty(Is)&&Cs[Is]!=null)if(Is==="style")for(Bs in Ts=Cs[Is],Ts)Ts.hasOwnProperty(Bs)&&(_s||(_s={}),_s[Bs]="");else Is!=="dangerouslySetInnerHTML"&&Is!=="children"&&Is!=="suppressContentEditableWarning"&&Is!=="suppressHydrationWarning"&&Is!=="autoFocus"&&(va.hasOwnProperty(Is)?ca||(ca=[]):(ca=ca||[]).push(Is,null));for(Is in Ss){var Ps=Ss[Is];if(Ts=Cs!=null?Cs[Is]:void 0,Ss.hasOwnProperty(Is)&&Ps!==Ts&&(Ps!=null||Ts!=null))if(Is==="style")if(Ts){for(Bs in Ts)!Ts.hasOwnProperty(Bs)||Ps&&Ps.hasOwnProperty(Bs)||(_s||(_s={}),_s[Bs]="");for(Bs in Ps)Ps.hasOwnProperty(Bs)&&Ts[Bs]!==Ps[Bs]&&(_s||(_s={}),_s[Bs]=Ps[Bs])}else _s||(ca||(ca=[]),ca.push(Is,_s)),_s=Ps;else Is==="dangerouslySetInnerHTML"?(Ps=Ps?Ps.__html:void 0,Ts=Ts?Ts.__html:void 0,Ps!=null&&Ts!==Ps&&(ca=ca||[]).push(Is,Ps)):Is==="children"?Ts===Ps||typeof Ps!="string"&&typeof Ps!="number"||(ca=ca||[]).push(Is,""+Ps):Is!=="suppressContentEditableWarning"&&Is!=="suppressHydrationWarning"&&(va.hasOwnProperty(Is)?(Ps!=null&&rd(Ms,Is),ca||Ts===Ps||(ca=[])):(ca=ca||[]).push(Is,Ps))}_s&&(ca=ca||[]).push("style",_s),Ms=ca,(ga.updateQueue=Ms)&&(ga.effectTag|=4)}};qi$1=function(ca,ga,_s,Ss){_s!==Ss&&(ga.effectTag|=4)};function ri$1(ca,ga){switch(ca.tailMode){case"hidden":ga=ca.tail;for(var _s=null;ga!==null;)ga.alternate!==null&&(_s=ga),ga=ga.sibling;_s===null?ca.tail=null:_s.sibling=null;break;case"collapsed":_s=ca.tail;for(var Ss=null;_s!==null;)_s.alternate!==null&&(Ss=_s),_s=_s.sibling;Ss===null?ga||ca.tail===null?ca.tail=null:ca.tail.sibling=null:Ss.sibling=null}}function si$1(ca,ga,_s){var Ss=ga.pendingProps;switch(ga.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$2(ga.type)&&Df(),null;case 3:return eh(),H$1(K$1),H$1(J$1),_s=ga.stateNode,_s.pendingContext&&(_s.context=_s.pendingContext,_s.pendingContext=null),ca!==null&&ca.child!==null||!Wh(ga)||(ga.effectTag|=4),oi$1(ga),null;case 5:gh(ga),_s=ch(bh.current);var Ms=ga.type;if(ca!==null&&ga.stateNode!=null)pi$1(ca,ga,Ms,Ss,_s),ca.ref!==ga.ref&&(ga.effectTag|=128);else{if(!Ss){if(ga.stateNode===null)throw Error(u$3(166));return null}if(ca=ch($g.current),Wh(ga)){Ss=ga.stateNode,Ms=ga.type;var Cs=ga.memoizedProps;switch(Ss[Md]=ga,Ss[Nd]=Cs,Ms){case"iframe":case"object":case"embed":F$2("load",Ss);break;case"video":case"audio":for(ca=0;ca<ac.length;ca++)F$2(ac[ca],Ss);break;case"source":F$2("error",Ss);break;case"img":case"image":case"link":F$2("error",Ss),F$2("load",Ss);break;case"form":F$2("reset",Ss),F$2("submit",Ss);break;case"details":F$2("toggle",Ss);break;case"input":Ab(Ss,Cs),F$2("invalid",Ss),rd(_s,"onChange");break;case"select":Ss._wrapperState={wasMultiple:!!Cs.multiple},F$2("invalid",Ss),rd(_s,"onChange");break;case"textarea":Jb(Ss,Cs),F$2("invalid",Ss),rd(_s,"onChange")}od(Ms,Cs),ca=null;for(var Ts in Cs)if(Cs.hasOwnProperty(Ts)){var Is=Cs[Ts];Ts==="children"?typeof Is=="string"?Ss.textContent!==Is&&(ca=["children",Is]):typeof Is=="number"&&Ss.textContent!==""+Is&&(ca=["children",""+Is]):va.hasOwnProperty(Ts)&&Is!=null&&rd(_s,Ts)}switch(Ms){case"input":xb(Ss),Eb(Ss,Cs,!0);break;case"textarea":xb(Ss),Lb(Ss);break;case"select":case"option":break;default:typeof Cs.onClick=="function"&&(Ss.onclick=sd)}_s=ca,ga.updateQueue=_s,_s!==null&&(ga.effectTag|=4)}else{switch(Ts=_s.nodeType===9?_s:_s.ownerDocument,ca===qd&&(ca=Nb(Ms)),ca===qd?Ms==="script"?(ca=Ts.createElement("div"),ca.innerHTML="<script><\/script>",ca=ca.removeChild(ca.firstChild)):typeof Ss.is=="string"?ca=Ts.createElement(Ms,{is:Ss.is}):(ca=Ts.createElement(Ms),Ms==="select"&&(Ts=ca,Ss.multiple?Ts.multiple=!0:Ss.size&&(Ts.size=Ss.size))):ca=Ts.createElementNS(ca,Ms),ca[Md]=ga,ca[Nd]=Ss,ni$1(ca,ga,!1,!1),ga.stateNode=ca,Ts=pd(Ms,Ss),Ms){case"iframe":case"object":case"embed":F$2("load",ca),Is=Ss;break;case"video":case"audio":for(Is=0;Is<ac.length;Is++)F$2(ac[Is],ca);Is=Ss;break;case"source":F$2("error",ca),Is=Ss;break;case"img":case"image":case"link":F$2("error",ca),F$2("load",ca),Is=Ss;break;case"form":F$2("reset",ca),F$2("submit",ca),Is=Ss;break;case"details":F$2("toggle",ca),Is=Ss;break;case"input":Ab(ca,Ss),Is=zb(ca,Ss),F$2("invalid",ca),rd(_s,"onChange");break;case"option":Is=Gb(ca,Ss);break;case"select":ca._wrapperState={wasMultiple:!!Ss.multiple},Is=n$4({},Ss,{value:void 0}),F$2("invalid",ca),rd(_s,"onChange");break;case"textarea":Jb(ca,Ss),Is=Ib(ca,Ss),F$2("invalid",ca),rd(_s,"onChange");break;default:Is=Ss}od(Ms,Is);var Bs=Is;for(Cs in Bs)if(Bs.hasOwnProperty(Cs)){var Ps=Bs[Cs];Cs==="style"?md(ca,Ps):Cs==="dangerouslySetInnerHTML"?(Ps=Ps?Ps.__html:void 0,Ps!=null&&Qb(ca,Ps)):Cs==="children"?typeof Ps=="string"?(Ms!=="textarea"||Ps!=="")&&Rb(ca,Ps):typeof Ps=="number"&&Rb(ca,""+Ps):Cs!=="suppressContentEditableWarning"&&Cs!=="suppressHydrationWarning"&&Cs!=="autoFocus"&&(va.hasOwnProperty(Cs)?Ps!=null&&rd(_s,Cs):Ps!=null&&Xa(ca,Cs,Ps,Ts))}switch(Ms){case"input":xb(ca),Eb(ca,Ss,!1);break;case"textarea":xb(ca),Lb(ca);break;case"option":Ss.value!=null&&ca.setAttribute("value",""+rb(Ss.value));break;case"select":ca.multiple=!!Ss.multiple,_s=Ss.value,_s!=null?Hb(ca,!!Ss.multiple,_s,!1):Ss.defaultValue!=null&&Hb(ca,!!Ss.multiple,Ss.defaultValue,!0);break;default:typeof Is.onClick=="function"&&(ca.onclick=sd)}Fd(Ms,Ss)&&(ga.effectTag|=4)}ga.ref!==null&&(ga.effectTag|=128)}return null;case 6:if(ca&&ga.stateNode!=null)qi$1(ca,ga,ca.memoizedProps,Ss);else{if(typeof Ss!="string"&&ga.stateNode===null)throw Error(u$3(166));_s=ch(bh.current),ch($g.current),Wh(ga)?(_s=ga.stateNode,Ss=ga.memoizedProps,_s[Md]=ga,_s.nodeValue!==Ss&&(ga.effectTag|=4)):(_s=(_s.nodeType===9?_s:_s.ownerDocument).createTextNode(Ss),_s[Md]=ga,ga.stateNode=_s)}return null;case 13:return H$1(M$2),Ss=ga.memoizedState,(ga.effectTag&64)!==0?(ga.expirationTime=_s,ga):(_s=Ss!==null,Ss=!1,ca===null?ga.memoizedProps.fallback!==void 0&&Wh(ga):(Ms=ca.memoizedState,Ss=Ms!==null,_s||Ms===null||(Ms=ca.child.sibling,Ms!==null&&(Cs=ga.firstEffect,Cs!==null?(ga.firstEffect=Ms,Ms.nextEffect=Cs):(ga.firstEffect=ga.lastEffect=Ms,Ms.nextEffect=null),Ms.effectTag=8))),_s&&!Ss&&(ga.mode&2)!==0&&(ca===null&&ga.memoizedProps.unstable_avoidThisFallback!==!0||(M$2.current&1)!==0?S$2===ti$1&&(S$2=ui$1):((S$2===ti$1||S$2===ui$1)&&(S$2=vi$1),wi$1!==0&&T$1!==null&&(xi$1(T$1,U$2),yi$1(T$1,wi$1)))),(_s||Ss)&&(ga.effectTag|=4),null);case 4:return eh(),oi$1(ga),null;case 10:return og(ga),null;case 17:return L$2(ga.type)&&Df(),null;case 19:if(H$1(M$2),Ss=ga.memoizedState,Ss===null)return null;if(Ms=(ga.effectTag&64)!==0,Cs=Ss.rendering,Cs===null){if(Ms)ri$1(Ss,!1);else if(S$2!==ti$1||ca!==null&&(ca.effectTag&64)!==0)for(Cs=ga.child;Cs!==null;){if(ca=hh(Cs),ca!==null){for(ga.effectTag|=64,ri$1(Ss,!1),Ms=ca.updateQueue,Ms!==null&&(ga.updateQueue=Ms,ga.effectTag|=4),Ss.lastEffect===null&&(ga.firstEffect=null),ga.lastEffect=Ss.lastEffect,Ss=ga.child;Ss!==null;)Ms=Ss,Cs=_s,Ms.effectTag&=2,Ms.nextEffect=null,Ms.firstEffect=null,Ms.lastEffect=null,ca=Ms.alternate,ca===null?(Ms.childExpirationTime=0,Ms.expirationTime=Cs,Ms.child=null,Ms.memoizedProps=null,Ms.memoizedState=null,Ms.updateQueue=null,Ms.dependencies=null):(Ms.childExpirationTime=ca.childExpirationTime,Ms.expirationTime=ca.expirationTime,Ms.child=ca.child,Ms.memoizedProps=ca.memoizedProps,Ms.memoizedState=ca.memoizedState,Ms.updateQueue=ca.updateQueue,Cs=ca.dependencies,Ms.dependencies=Cs===null?null:{expirationTime:Cs.expirationTime,firstContext:Cs.firstContext,responders:Cs.responders}),Ss=Ss.sibling;return I$1(M$2,M$2.current&1|2),ga.child}Cs=Cs.sibling}}else{if(!Ms)if(ca=hh(Cs),ca!==null){if(ga.effectTag|=64,Ms=!0,_s=ca.updateQueue,_s!==null&&(ga.updateQueue=_s,ga.effectTag|=4),ri$1(Ss,!0),Ss.tail===null&&Ss.tailMode==="hidden"&&!Cs.alternate)return ga=ga.lastEffect=Ss.lastEffect,ga!==null&&(ga.nextEffect=null),null}else 2*$f()-Ss.renderingStartTime>Ss.tailExpiration&&1<_s&&(ga.effectTag|=64,Ms=!0,ri$1(Ss,!1),ga.expirationTime=ga.childExpirationTime=_s-1);Ss.isBackwards?(Cs.sibling=ga.child,ga.child=Cs):(_s=Ss.last,_s!==null?_s.sibling=Cs:ga.child=Cs,Ss.last=Cs)}return Ss.tail!==null?(Ss.tailExpiration===0&&(Ss.tailExpiration=$f()+500),_s=Ss.tail,Ss.rendering=_s,Ss.tail=_s.sibling,Ss.lastEffect=ga.lastEffect,Ss.renderingStartTime=$f(),_s.sibling=null,ga=M$2.current,I$1(M$2,Ms?ga&1|2:ga&1),_s):null}throw Error(u$3(156,ga.tag))}function zi$1(ca){switch(ca.tag){case 1:L$2(ca.type)&&Df();var ga=ca.effectTag;return ga&4096?(ca.effectTag=ga&-4097|64,ca):null;case 3:if(eh(),H$1(K$1),H$1(J$1),ga=ca.effectTag,(ga&64)!==0)throw Error(u$3(285));return ca.effectTag=ga&-4097|64,ca;case 5:return gh(ca),null;case 13:return H$1(M$2),ga=ca.effectTag,ga&4096?(ca.effectTag=ga&-4097|64,ca):null;case 19:return H$1(M$2),null;case 4:return eh(),null;case 10:return og(ca),null;default:return null}}function Ai$1(ca,ga){return{value:ca,source:ga,stack:qb(ga)}}var Bi$1=typeof WeakSet=="function"?WeakSet:Set;function Ci$1(ca,ga){var _s=ga.source,Ss=ga.stack;Ss===null&&_s!==null&&(Ss=qb(_s)),_s!==null&&pb(_s.type),ga=ga.value,ca!==null&&ca.tag===1&&pb(ca.type);try{console.error(ga)}catch(Ms){setTimeout(function(){throw Ms})}}function Di$1(ca,ga){try{ga.props=ca.memoizedProps,ga.state=ca.memoizedState,ga.componentWillUnmount()}catch(_s){Ei$1(ca,_s)}}function Fi$1(ca){var ga=ca.ref;if(ga!==null)if(typeof ga=="function")try{ga(null)}catch(_s){Ei$1(ca,_s)}else ga.current=null}function Gi$1(ca,ga){switch(ga.tag){case 0:case 11:case 15:case 22:return;case 1:if(ga.effectTag&256&&ca!==null){var _s=ca.memoizedProps,Ss=ca.memoizedState;ca=ga.stateNode,ga=ca.getSnapshotBeforeUpdate(ga.elementType===ga.type?_s:ig(ga.type,_s),Ss),ca.__reactInternalSnapshotBeforeUpdate=ga}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$3(163))}function Hi$1(ca,ga){if(ga=ga.updateQueue,ga=ga!==null?ga.lastEffect:null,ga!==null){var _s=ga=ga.next;do{if((_s.tag&ca)===ca){var Ss=_s.destroy;_s.destroy=void 0,Ss!==void 0&&Ss()}_s=_s.next}while(_s!==ga)}}function Ii$1(ca,ga){if(ga=ga.updateQueue,ga=ga!==null?ga.lastEffect:null,ga!==null){var _s=ga=ga.next;do{if((_s.tag&ca)===ca){var Ss=_s.create;_s.destroy=Ss()}_s=_s.next}while(_s!==ga)}}function Ji$1(ca,ga,_s){switch(_s.tag){case 0:case 11:case 15:case 22:Ii$1(3,_s);return;case 1:if(ca=_s.stateNode,_s.effectTag&4)if(ga===null)ca.componentDidMount();else{var Ss=_s.elementType===_s.type?ga.memoizedProps:ig(_s.type,ga.memoizedProps);ca.componentDidUpdate(Ss,ga.memoizedState,ca.__reactInternalSnapshotBeforeUpdate)}ga=_s.updateQueue,ga!==null&&Cg(_s,ga,ca);return;case 3:if(ga=_s.updateQueue,ga!==null){if(ca=null,_s.child!==null)switch(_s.child.tag){case 5:ca=_s.child.stateNode;break;case 1:ca=_s.child.stateNode}Cg(_s,ga,ca)}return;case 5:ca=_s.stateNode,ga===null&&_s.effectTag&4&&Fd(_s.type,_s.memoizedProps)&&ca.focus();return;case 6:return;case 4:return;case 12:return;case 13:_s.memoizedState===null&&(_s=_s.alternate,_s!==null&&(_s=_s.memoizedState,_s!==null&&(_s=_s.dehydrated,_s!==null&&Vc(_s))));return;case 19:case 17:case 20:case 21:return}throw Error(u$3(163))}function Ki$1(ca,ga,_s){switch(typeof Li$1=="function"&&Li$1(ga),ga.tag){case 0:case 11:case 14:case 15:case 22:if(ca=ga.updateQueue,ca!==null&&(ca=ca.lastEffect,ca!==null)){var Ss=ca.next;cg(97<_s?97:_s,function(){var Ms=Ss;do{var Cs=Ms.destroy;if(Cs!==void 0){var Ts=ga;try{Cs()}catch(Is){Ei$1(Ts,Is)}}Ms=Ms.next}while(Ms!==Ss)})}break;case 1:Fi$1(ga),_s=ga.stateNode,typeof _s.componentWillUnmount=="function"&&Di$1(ga,_s);break;case 5:Fi$1(ga);break;case 4:Mi$1(ca,ga,_s)}}function Ni$1(ca){var ga=ca.alternate;ca.return=null,ca.child=null,ca.memoizedState=null,ca.updateQueue=null,ca.dependencies=null,ca.alternate=null,ca.firstEffect=null,ca.lastEffect=null,ca.pendingProps=null,ca.memoizedProps=null,ca.stateNode=null,ga!==null&&Ni$1(ga)}function Oi$1(ca){return ca.tag===5||ca.tag===3||ca.tag===4}function Pi$1(ca){e:{for(var ga=ca.return;ga!==null;){if(Oi$1(ga)){var _s=ga;break e}ga=ga.return}throw Error(u$3(160))}switch(ga=_s.stateNode,_s.tag){case 5:var Ss=!1;break;case 3:ga=ga.containerInfo,Ss=!0;break;case 4:ga=ga.containerInfo,Ss=!0;break;default:throw Error(u$3(161))}_s.effectTag&16&&(Rb(ga,""),_s.effectTag&=-17);e:t:for(_s=ca;;){for(;_s.sibling===null;){if(_s.return===null||Oi$1(_s.return)){_s=null;break e}_s=_s.return}for(_s.sibling.return=_s.return,_s=_s.sibling;_s.tag!==5&&_s.tag!==6&&_s.tag!==18;){if(_s.effectTag&2||_s.child===null||_s.tag===4)continue t;_s.child.return=_s,_s=_s.child}if(!(_s.effectTag&2)){_s=_s.stateNode;break e}}Ss?Qi$1(ca,_s,ga):Ri$1(ca,_s,ga)}function Qi$1(ca,ga,_s){var Ss=ca.tag,Ms=Ss===5||Ss===6;if(Ms)ca=Ms?ca.stateNode:ca.stateNode.instance,ga?_s.nodeType===8?_s.parentNode.insertBefore(ca,ga):_s.insertBefore(ca,ga):(_s.nodeType===8?(ga=_s.parentNode,ga.insertBefore(ca,_s)):(ga=_s,ga.appendChild(ca)),_s=_s._reactRootContainer,_s!=null||ga.onclick!==null||(ga.onclick=sd));else if(Ss!==4&&(ca=ca.child,ca!==null))for(Qi$1(ca,ga,_s),ca=ca.sibling;ca!==null;)Qi$1(ca,ga,_s),ca=ca.sibling}function Ri$1(ca,ga,_s){var Ss=ca.tag,Ms=Ss===5||Ss===6;if(Ms)ca=Ms?ca.stateNode:ca.stateNode.instance,ga?_s.insertBefore(ca,ga):_s.appendChild(ca);else if(Ss!==4&&(ca=ca.child,ca!==null))for(Ri$1(ca,ga,_s),ca=ca.sibling;ca!==null;)Ri$1(ca,ga,_s),ca=ca.sibling}function Mi$1(ca,ga,_s){for(var Ss=ga,Ms=!1,Cs,Ts;;){if(!Ms){Ms=Ss.return;e:for(;;){if(Ms===null)throw Error(u$3(160));switch(Cs=Ms.stateNode,Ms.tag){case 5:Ts=!1;break e;case 3:Cs=Cs.containerInfo,Ts=!0;break e;case 4:Cs=Cs.containerInfo,Ts=!0;break e}Ms=Ms.return}Ms=!0}if(Ss.tag===5||Ss.tag===6){e:for(var Is=ca,Bs=Ss,Ps=_s,Ls=Bs;;)if(Ki$1(Is,Ls,Ps),Ls.child!==null&&Ls.tag!==4)Ls.child.return=Ls,Ls=Ls.child;else{if(Ls===Bs)break e;for(;Ls.sibling===null;){if(Ls.return===null||Ls.return===Bs)break e;Ls=Ls.return}Ls.sibling.return=Ls.return,Ls=Ls.sibling}Ts?(Is=Cs,Bs=Ss.stateNode,Is.nodeType===8?Is.parentNode.removeChild(Bs):Is.removeChild(Bs)):Cs.removeChild(Ss.stateNode)}else if(Ss.tag===4){if(Ss.child!==null){Cs=Ss.stateNode.containerInfo,Ts=!0,Ss.child.return=Ss,Ss=Ss.child;continue}}else if(Ki$1(ca,Ss,_s),Ss.child!==null){Ss.child.return=Ss,Ss=Ss.child;continue}if(Ss===ga)break;for(;Ss.sibling===null;){if(Ss.return===null||Ss.return===ga)return;Ss=Ss.return,Ss.tag===4&&(Ms=!1)}Ss.sibling.return=Ss.return,Ss=Ss.sibling}}function Si$1(ca,ga){switch(ga.tag){case 0:case 11:case 14:case 15:case 22:Hi$1(3,ga);return;case 1:return;case 5:var _s=ga.stateNode;if(_s!=null){var Ss=ga.memoizedProps,Ms=ca!==null?ca.memoizedProps:Ss;ca=ga.type;var Cs=ga.updateQueue;if(ga.updateQueue=null,Cs!==null){for(_s[Nd]=Ss,ca==="input"&&Ss.type==="radio"&&Ss.name!=null&&Bb(_s,Ss),pd(ca,Ms),ga=pd(ca,Ss),Ms=0;Ms<Cs.length;Ms+=2){var Ts=Cs[Ms],Is=Cs[Ms+1];Ts==="style"?md(_s,Is):Ts==="dangerouslySetInnerHTML"?Qb(_s,Is):Ts==="children"?Rb(_s,Is):Xa(_s,Ts,Is,ga)}switch(ca){case"input":Cb(_s,Ss);break;case"textarea":Kb(_s,Ss);break;case"select":ga=_s._wrapperState.wasMultiple,_s._wrapperState.wasMultiple=!!Ss.multiple,ca=Ss.value,ca!=null?Hb(_s,!!Ss.multiple,ca,!1):ga!==!!Ss.multiple&&(Ss.defaultValue!=null?Hb(_s,!!Ss.multiple,Ss.defaultValue,!0):Hb(_s,!!Ss.multiple,Ss.multiple?[]:"",!1))}}}return;case 6:if(ga.stateNode===null)throw Error(u$3(162));ga.stateNode.nodeValue=ga.memoizedProps;return;case 3:ga=ga.stateNode,ga.hydrate&&(ga.hydrate=!1,Vc(ga.containerInfo));return;case 12:return;case 13:if(_s=ga,ga.memoizedState===null?Ss=!1:(Ss=!0,_s=ga.child,Ti$1=$f()),_s!==null)e:for(ca=_s;;){if(ca.tag===5)Cs=ca.stateNode,Ss?(Cs=Cs.style,typeof Cs.setProperty=="function"?Cs.setProperty("display","none","important"):Cs.display="none"):(Cs=ca.stateNode,Ms=ca.memoizedProps.style,Ms=Ms!=null&&Ms.hasOwnProperty("display")?Ms.display:null,Cs.style.display=ld("display",Ms));else if(ca.tag===6)ca.stateNode.nodeValue=Ss?"":ca.memoizedProps;else if(ca.tag===13&&ca.memoizedState!==null&&ca.memoizedState.dehydrated===null){Cs=ca.child.sibling,Cs.return=ca,ca=Cs;continue}else if(ca.child!==null){ca.child.return=ca,ca=ca.child;continue}if(ca===_s)break;for(;ca.sibling===null;){if(ca.return===null||ca.return===_s)break e;ca=ca.return}ca.sibling.return=ca.return,ca=ca.sibling}Ui$1(ga);return;case 19:Ui$1(ga);return;case 17:return}throw Error(u$3(163))}function Ui$1(ca){var ga=ca.updateQueue;if(ga!==null){ca.updateQueue=null;var _s=ca.stateNode;_s===null&&(_s=ca.stateNode=new Bi$1),ga.forEach(function(Ss){var Ms=Vi$1.bind(null,ca,Ss);_s.has(Ss)||(_s.add(Ss),Ss.then(Ms,Ms))})}}var Wi$1=typeof WeakMap=="function"?WeakMap:Map;function Xi$1(ca,ga,_s){_s=wg(_s,null),_s.tag=3,_s.payload={element:null};var Ss=ga.value;return _s.callback=function(){Yi$1||(Yi$1=!0,Zi$1=Ss),Ci$1(ca,ga)},_s}function $i$1(ca,ga,_s){_s=wg(_s,null),_s.tag=3;var Ss=ca.type.getDerivedStateFromError;if(typeof Ss=="function"){var Ms=ga.value;_s.payload=function(){return Ci$1(ca,ga),Ss(Ms)}}var Cs=ca.stateNode;return Cs!==null&&typeof Cs.componentDidCatch=="function"&&(_s.callback=function(){typeof Ss!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$1(ca,ga));var Ts=ga.stack;this.componentDidCatch(ga.value,{componentStack:Ts!==null?Ts:""})}),_s}var bj=Math.ceil,cj=Wa.ReactCurrentDispatcher,dj=Wa.ReactCurrentOwner,V$2=0,ej=8,fj=16,gj=32,ti$1=0,hj=1,ij=2,ui$1=3,vi$1=4,jj=5,W$2=V$2,T$1=null,X$1=null,U$2=0,S$2=ti$1,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$1=0,oj=!1,Ti$1=0,pj=500,Y$1=null,Yi$1=!1,Zi$1=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W$2&(fj|gj))!==V$2?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(ca,ga,_s){if(ga=ga.mode,(ga&2)===0)return 1073741823;var Ss=ag();if((ga&4)===0)return Ss===99?1073741823:1073741822;if((W$2&fj)!==V$2)return U$2;if(_s!==null)ca=hg(ca,_s.timeoutMs|0||5e3,250);else switch(Ss){case 99:ca=1073741823;break;case 98:ca=hg(ca,150,100);break;case 97:case 96:ca=hg(ca,5e3,250);break;case 95:ca=2;break;default:throw Error(u$3(326))}return T$1!==null&&ca===U$2&&--ca,ca}function Ig(ca,ga){if(50<uj)throw uj=0,vj=null,Error(u$3(185));if(ca=xj(ca,ga),ca!==null){var _s=ag();ga===1073741823?(W$2&ej)!==V$2&&(W$2&(fj|gj))===V$2?yj(ca):(Z$1(ca),W$2===V$2&&gg()):Z$1(ca),(W$2&4)===V$2||_s!==98&&_s!==99||(tj===null?tj=new Map([[ca,ga]]):(_s=tj.get(ca),(_s===void 0||_s>ga)&&tj.set(ca,ga)))}}function xj(ca,ga){ca.expirationTime<ga&&(ca.expirationTime=ga);var _s=ca.alternate;_s!==null&&_s.expirationTime<ga&&(_s.expirationTime=ga);var Ss=ca.return,Ms=null;if(Ss===null&&ca.tag===3)Ms=ca.stateNode;else for(;Ss!==null;){if(_s=Ss.alternate,Ss.childExpirationTime<ga&&(Ss.childExpirationTime=ga),_s!==null&&_s.childExpirationTime<ga&&(_s.childExpirationTime=ga),Ss.return===null&&Ss.tag===3){Ms=Ss.stateNode;break}Ss=Ss.return}return Ms!==null&&(T$1===Ms&&(Bg(ga),S$2===vi$1&&xi$1(Ms,U$2)),yi$1(Ms,ga)),Ms}function zj(ca){var ga=ca.lastExpiredTime;if(ga!==0||(ga=ca.firstPendingTime,!Aj(ca,ga)))return ga;var _s=ca.lastPingedTime;return ca=ca.nextKnownPendingLevel,ca=_s>ca?_s:ca,2>=ca&&ga!==ca?0:ca}function Z$1(ca){if(ca.lastExpiredTime!==0)ca.callbackExpirationTime=1073741823,ca.callbackPriority=99,ca.callbackNode=eg(yj.bind(null,ca));else{var ga=zj(ca),_s=ca.callbackNode;if(ga===0)_s!==null&&(ca.callbackNode=null,ca.callbackExpirationTime=0,ca.callbackPriority=90);else{var Ss=Gg();if(ga===1073741823?Ss=99:ga===1||ga===2?Ss=95:(Ss=10*(1073741821-ga)-10*(1073741821-Ss),Ss=0>=Ss?99:250>=Ss?98:5250>=Ss?97:95),_s!==null){var Ms=ca.callbackPriority;if(ca.callbackExpirationTime===ga&&Ms>=Ss)return;_s!==Tf&&Kf(_s)}ca.callbackExpirationTime=ga,ca.callbackPriority=Ss,ga=ga===1073741823?eg(yj.bind(null,ca)):dg(Ss,Bj.bind(null,ca),{timeout:10*(1073741821-ga)-$f()}),ca.callbackNode=ga}}}function Bj(ca,ga){if(wj=0,ga)return ga=Gg(),Cj(ca,ga),Z$1(ca),null;var _s=zj(ca);if(_s!==0){if(ga=ca.callbackNode,(W$2&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),ca===T$1&&_s===U$2||Ej(ca,_s),X$1!==null){var Ss=W$2;W$2|=fj;var Ms=Fj();do try{Gj();break}catch(Is){Hj(ca,Is)}while(1);if(ng(),W$2=Ss,cj.current=Ms,S$2===hj)throw ga=kj,Ej(ca,_s),xi$1(ca,_s),Z$1(ca),ga;if(X$1===null)switch(Ms=ca.finishedWork=ca.current.alternate,ca.finishedExpirationTime=_s,Ss=S$2,T$1=null,Ss){case ti$1:case hj:throw Error(u$3(345));case ij:Cj(ca,2<_s?2:_s);break;case ui$1:if(xi$1(ca,_s),Ss=ca.lastSuspendedTime,_s===Ss&&(ca.nextKnownPendingLevel=Ij(Ms)),lj===1073741823&&(Ms=Ti$1+pj-$f(),10<Ms)){if(oj){var Cs=ca.lastPingedTime;if(Cs===0||Cs>=_s){ca.lastPingedTime=_s,Ej(ca,_s);break}}if(Cs=zj(ca),Cs!==0&&Cs!==_s)break;if(Ss!==0&&Ss!==_s){ca.lastPingedTime=Ss;break}ca.timeoutHandle=Hd(Jj.bind(null,ca),Ms);break}Jj(ca);break;case vi$1:if(xi$1(ca,_s),Ss=ca.lastSuspendedTime,_s===Ss&&(ca.nextKnownPendingLevel=Ij(Ms)),oj&&(Ms=ca.lastPingedTime,Ms===0||Ms>=_s)){ca.lastPingedTime=_s,Ej(ca,_s);break}if(Ms=zj(ca),Ms!==0&&Ms!==_s)break;if(Ss!==0&&Ss!==_s){ca.lastPingedTime=Ss;break}if(mj!==1073741823?Ss=10*(1073741821-mj)-$f():lj===1073741823?Ss=0:(Ss=10*(1073741821-lj)-5e3,Ms=$f(),_s=10*(1073741821-_s)-Ms,Ss=Ms-Ss,0>Ss&&(Ss=0),Ss=(120>Ss?120:480>Ss?480:1080>Ss?1080:1920>Ss?1920:3e3>Ss?3e3:4320>Ss?4320:1960*bj(Ss/1960))-Ss,_s<Ss&&(Ss=_s)),10<Ss){ca.timeoutHandle=Hd(Jj.bind(null,ca),Ss);break}Jj(ca);break;case jj:if(lj!==1073741823&&nj!==null){Cs=lj;var Ts=nj;if(Ss=Ts.busyMinDurationMs|0,0>=Ss?Ss=0:(Ms=Ts.busyDelayMs|0,Cs=$f()-(10*(1073741821-Cs)-(Ts.timeoutMs|0||5e3)),Ss=Cs<=Ms?0:Ms+Ss-Cs),10<Ss){xi$1(ca,_s),ca.timeoutHandle=Hd(Jj.bind(null,ca),Ss);break}}Jj(ca);break;default:throw Error(u$3(329))}if(Z$1(ca),ca.callbackNode===ga)return Bj.bind(null,ca)}}return null}function yj(ca){var ga=ca.lastExpiredTime;if(ga=ga!==0?ga:1073741823,(W$2&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),ca===T$1&&ga===U$2||Ej(ca,ga),X$1!==null){var _s=W$2;W$2|=fj;var Ss=Fj();do try{Kj();break}catch(Ms){Hj(ca,Ms)}while(1);if(ng(),W$2=_s,cj.current=Ss,S$2===hj)throw _s=kj,Ej(ca,ga),xi$1(ca,ga),Z$1(ca),_s;if(X$1!==null)throw Error(u$3(261));ca.finishedWork=ca.current.alternate,ca.finishedExpirationTime=ga,T$1=null,Jj(ca),Z$1(ca)}return null}function Lj(){if(tj!==null){var ca=tj;tj=null,ca.forEach(function(ga,_s){Cj(_s,ga),Z$1(_s)}),gg()}}function Mj(ca,ga){var _s=W$2;W$2|=1;try{return ca(ga)}finally{W$2=_s,W$2===V$2&&gg()}}function Nj(ca,ga){var _s=W$2;W$2&=-2,W$2|=ej;try{return ca(ga)}finally{W$2=_s,W$2===V$2&&gg()}}function Ej(ca,ga){ca.finishedWork=null,ca.finishedExpirationTime=0;var _s=ca.timeoutHandle;if(_s!==-1&&(ca.timeoutHandle=-1,Id(_s)),X$1!==null)for(_s=X$1.return;_s!==null;){var Ss=_s;switch(Ss.tag){case 1:Ss=Ss.type.childContextTypes,Ss!=null&&Df();break;case 3:eh(),H$1(K$1),H$1(J$1);break;case 5:gh(Ss);break;case 4:eh();break;case 13:H$1(M$2);break;case 19:H$1(M$2);break;case 10:og(Ss)}_s=_s.return}T$1=ca,X$1=Sg(ca.current,null),U$2=ga,S$2=ti$1,kj=null,mj=lj=1073741823,nj=null,wi$1=0,oj=!1}function Hj(ca,ga){do{try{if(ng(),jh.current=sh,mh)for(var _s=N$2.memoizedState;_s!==null;){var Ss=_s.queue;Ss!==null&&(Ss.pending=null),_s=_s.next}if(lh=0,P$2=O$2=N$2=null,mh=!1,X$1===null||X$1.return===null)return S$2=hj,kj=ga,X$1=null;e:{var Ms=ca,Cs=X$1.return,Ts=X$1,Is=ga;if(ga=U$2,Ts.effectTag|=2048,Ts.firstEffect=Ts.lastEffect=null,Is!==null&&typeof Is=="object"&&typeof Is.then=="function"){var Bs=Is;if((Ts.mode&2)===0){var Ps=Ts.alternate;Ps?(Ts.updateQueue=Ps.updateQueue,Ts.memoizedState=Ps.memoizedState,Ts.expirationTime=Ps.expirationTime):(Ts.updateQueue=null,Ts.memoizedState=null)}var Ls=(M$2.current&1)!==0,Rs=Cs;do{var Os;if(Os=Rs.tag===13){var Fs=Rs.memoizedState;if(Fs!==null)Os=Fs.dehydrated!==null;else{var Vs=Rs.memoizedProps;Os=Vs.fallback===void 0?!1:Vs.unstable_avoidThisFallback!==!0?!0:!Ls}}if(Os){var ks=Rs.updateQueue;if(ks===null){var Ns=new Set;Ns.add(Bs),Rs.updateQueue=Ns}else ks.add(Bs);if((Rs.mode&2)===0){if(Rs.effectTag|=64,Ts.effectTag&=-2981,Ts.tag===1)if(Ts.alternate===null)Ts.tag=17;else{var Ds=wg(1073741823,null);Ds.tag=2,xg(Ts,Ds)}Ts.expirationTime=1073741823;break e}Is=void 0,Ts=ga;var $s=Ms.pingCache;if($s===null?($s=Ms.pingCache=new Wi$1,Is=new Set,$s.set(Bs,Is)):(Is=$s.get(Bs),Is===void 0&&(Is=new Set,$s.set(Bs,Is))),!Is.has(Ts)){Is.add(Ts);var Gs=Oj.bind(null,Ms,Bs,Ts);Bs.then(Gs,Gs)}Rs.effectTag|=4096,Rs.expirationTime=ga;break e}Rs=Rs.return}while(Rs!==null);Is=Error((pb(Ts.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb(Ts))}S$2!==jj&&(S$2=ij),Is=Ai$1(Is,Ts),Rs=Cs;do{switch(Rs.tag){case 3:Bs=Is,Rs.effectTag|=4096,Rs.expirationTime=ga;var Us=Xi$1(Rs,Bs,ga);yg(Rs,Us);break e;case 1:Bs=Is;var Hs=Rs.type,zs=Rs.stateNode;if((Rs.effectTag&64)===0&&(typeof Hs.getDerivedStateFromError=="function"||zs!==null&&typeof zs.componentDidCatch=="function"&&(aj===null||!aj.has(zs)))){Rs.effectTag|=4096,Rs.expirationTime=ga;var js=$i$1(Rs,Bs,ga);yg(Rs,js);break e}}Rs=Rs.return}while(Rs!==null)}X$1=Pj(X$1)}catch(Ws){ga=Ws;continue}break}while(1)}function Fj(){var ca=cj.current;return cj.current=sh,ca===null?sh:ca}function Ag(ca,ga){ca<lj&&2<ca&&(lj=ca),ga!==null&&ca<mj&&2<ca&&(mj=ca,nj=ga)}function Bg(ca){ca>wi$1&&(wi$1=ca)}function Kj(){for(;X$1!==null;)X$1=Qj(X$1)}function Gj(){for(;X$1!==null&&!Uf();)X$1=Qj(X$1)}function Qj(ca){var ga=Rj(ca.alternate,ca,U$2);return ca.memoizedProps=ca.pendingProps,ga===null&&(ga=Pj(ca)),dj.current=null,ga}function Pj(ca){X$1=ca;do{var ga=X$1.alternate;if(ca=X$1.return,(X$1.effectTag&2048)===0){if(ga=si$1(ga,X$1,U$2),U$2===1||X$1.childExpirationTime!==1){for(var _s=0,Ss=X$1.child;Ss!==null;){var Ms=Ss.expirationTime,Cs=Ss.childExpirationTime;Ms>_s&&(_s=Ms),Cs>_s&&(_s=Cs),Ss=Ss.sibling}X$1.childExpirationTime=_s}if(ga!==null)return ga;ca!==null&&(ca.effectTag&2048)===0&&(ca.firstEffect===null&&(ca.firstEffect=X$1.firstEffect),X$1.lastEffect!==null&&(ca.lastEffect!==null&&(ca.lastEffect.nextEffect=X$1.firstEffect),ca.lastEffect=X$1.lastEffect),1<X$1.effectTag&&(ca.lastEffect!==null?ca.lastEffect.nextEffect=X$1:ca.firstEffect=X$1,ca.lastEffect=X$1))}else{if(ga=zi$1(X$1),ga!==null)return ga.effectTag&=2047,ga;ca!==null&&(ca.firstEffect=ca.lastEffect=null,ca.effectTag|=2048)}if(ga=X$1.sibling,ga!==null)return ga;X$1=ca}while(X$1!==null);return S$2===ti$1&&(S$2=jj),null}function Ij(ca){var ga=ca.expirationTime;return ca=ca.childExpirationTime,ga>ca?ga:ca}function Jj(ca){var ga=ag();return cg(99,Sj.bind(null,ca,ga)),null}function Sj(ca,ga){do Dj();while(rj!==null);if((W$2&(fj|gj))!==V$2)throw Error(u$3(327));var _s=ca.finishedWork,Ss=ca.finishedExpirationTime;if(_s===null)return null;if(ca.finishedWork=null,ca.finishedExpirationTime=0,_s===ca.current)throw Error(u$3(177));ca.callbackNode=null,ca.callbackExpirationTime=0,ca.callbackPriority=90,ca.nextKnownPendingLevel=0;var Ms=Ij(_s);if(ca.firstPendingTime=Ms,Ss<=ca.lastSuspendedTime?ca.firstSuspendedTime=ca.lastSuspendedTime=ca.nextKnownPendingLevel=0:Ss<=ca.firstSuspendedTime&&(ca.firstSuspendedTime=Ss-1),Ss<=ca.lastPingedTime&&(ca.lastPingedTime=0),Ss<=ca.lastExpiredTime&&(ca.lastExpiredTime=0),ca===T$1&&(X$1=T$1=null,U$2=0),1<_s.effectTag?_s.lastEffect!==null?(_s.lastEffect.nextEffect=_s,Ms=_s.firstEffect):Ms=_s:Ms=_s.firstEffect,Ms!==null){var Cs=W$2;W$2|=gj,dj.current=null,Dd=fd;var Ts=xd();if(yd(Ts)){if("selectionStart"in Ts)var Is={start:Ts.selectionStart,end:Ts.selectionEnd};else e:{Is=(Is=Ts.ownerDocument)&&Is.defaultView||window;var Bs=Is.getSelection&&Is.getSelection();if(Bs&&Bs.rangeCount!==0){Is=Bs.anchorNode;var Ps=Bs.anchorOffset,Ls=Bs.focusNode;Bs=Bs.focusOffset;try{Is.nodeType,Ls.nodeType}catch{Is=null;break e}var Rs=0,Os=-1,Fs=-1,Vs=0,ks=0,Ns=Ts,Ds=null;t:for(;;){for(var $s;Ns!==Is||Ps!==0&&Ns.nodeType!==3||(Os=Rs+Ps),Ns!==Ls||Bs!==0&&Ns.nodeType!==3||(Fs=Rs+Bs),Ns.nodeType===3&&(Rs+=Ns.nodeValue.length),($s=Ns.firstChild)!==null;)Ds=Ns,Ns=$s;for(;;){if(Ns===Ts)break t;if(Ds===Is&&++Vs===Ps&&(Os=Rs),Ds===Ls&&++ks===Bs&&(Fs=Rs),($s=Ns.nextSibling)!==null)break;Ns=Ds,Ds=Ns.parentNode}Ns=$s}Is=Os===-1||Fs===-1?null:{start:Os,end:Fs}}else Is=null}Is=Is||{start:0,end:0}}else Is=null;Ed={activeElementDetached:null,focusedElem:Ts,selectionRange:Is},fd=!1,Y$1=Ms;do try{Tj()}catch(Qs){if(Y$1===null)throw Error(u$3(330));Ei$1(Y$1,Qs),Y$1=Y$1.nextEffect}while(Y$1!==null);Y$1=Ms;do try{for(Ts=ca,Is=ga;Y$1!==null;){var Gs=Y$1.effectTag;if(Gs&16&&Rb(Y$1.stateNode,""),Gs&128){var Us=Y$1.alternate;if(Us!==null){var Hs=Us.ref;Hs!==null&&(typeof Hs=="function"?Hs(null):Hs.current=null)}}switch(Gs&1038){case 2:Pi$1(Y$1),Y$1.effectTag&=-3;break;case 6:Pi$1(Y$1),Y$1.effectTag&=-3,Si$1(Y$1.alternate,Y$1);break;case 1024:Y$1.effectTag&=-1025;break;case 1028:Y$1.effectTag&=-1025,Si$1(Y$1.alternate,Y$1);break;case 4:Si$1(Y$1.alternate,Y$1);break;case 8:Ps=Y$1,Mi$1(Ts,Ps,Is),Ni$1(Ps)}Y$1=Y$1.nextEffect}}catch(Qs){if(Y$1===null)throw Error(u$3(330));Ei$1(Y$1,Qs),Y$1=Y$1.nextEffect}while(Y$1!==null);if(Hs=Ed,Us=xd(),Gs=Hs.focusedElem,Is=Hs.selectionRange,Us!==Gs&&Gs&&Gs.ownerDocument&&wd(Gs.ownerDocument.documentElement,Gs)){for(Is!==null&&yd(Gs)&&(Us=Is.start,Hs=Is.end,Hs===void 0&&(Hs=Us),"selectionStart"in Gs?(Gs.selectionStart=Us,Gs.selectionEnd=Math.min(Hs,Gs.value.length)):(Hs=(Us=Gs.ownerDocument||document)&&Us.defaultView||window,Hs.getSelection&&(Hs=Hs.getSelection(),Ps=Gs.textContent.length,Ts=Math.min(Is.start,Ps),Is=Is.end===void 0?Ts:Math.min(Is.end,Ps),!Hs.extend&&Ts>Is&&(Ps=Is,Is=Ts,Ts=Ps),Ps=vd(Gs,Ts),Ls=vd(Gs,Is),Ps&&Ls&&(Hs.rangeCount!==1||Hs.anchorNode!==Ps.node||Hs.anchorOffset!==Ps.offset||Hs.focusNode!==Ls.node||Hs.focusOffset!==Ls.offset)&&(Us=Us.createRange(),Us.setStart(Ps.node,Ps.offset),Hs.removeAllRanges(),Ts>Is?(Hs.addRange(Us),Hs.extend(Ls.node,Ls.offset)):(Us.setEnd(Ls.node,Ls.offset),Hs.addRange(Us)))))),Us=[],Hs=Gs;Hs=Hs.parentNode;)Hs.nodeType===1&&Us.push({element:Hs,left:Hs.scrollLeft,top:Hs.scrollTop});for(typeof Gs.focus=="function"&&Gs.focus(),Gs=0;Gs<Us.length;Gs++)Hs=Us[Gs],Hs.element.scrollLeft=Hs.left,Hs.element.scrollTop=Hs.top}fd=!!Dd,Ed=Dd=null,ca.current=_s,Y$1=Ms;do try{for(Gs=ca;Y$1!==null;){var zs=Y$1.effectTag;if(zs&36&&Ji$1(Gs,Y$1.alternate,Y$1),zs&128){Us=void 0;var js=Y$1.ref;if(js!==null){var Ws=Y$1.stateNode;switch(Y$1.tag){case 5:Us=Ws;break;default:Us=Ws}typeof js=="function"?js(Us):js.current=Us}}Y$1=Y$1.nextEffect}}catch(Qs){if(Y$1===null)throw Error(u$3(330));Ei$1(Y$1,Qs),Y$1=Y$1.nextEffect}while(Y$1!==null);Y$1=null,Vf(),W$2=Cs}else ca.current=_s;if(qj)qj=!1,rj=ca,sj=ga;else for(Y$1=Ms;Y$1!==null;)ga=Y$1.nextEffect,Y$1.nextEffect=null,Y$1=ga;if(ga=ca.firstPendingTime,ga===0&&(aj=null),ga===1073741823?ca===vj?uj++:(uj=0,vj=ca):uj=0,typeof Uj=="function"&&Uj(_s.stateNode,Ss),Z$1(ca),Yi$1)throw Yi$1=!1,ca=Zi$1,Zi$1=null,ca;return(W$2&ej)!==V$2||gg(),null}function Tj(){for(;Y$1!==null;){var ca=Y$1.effectTag;(ca&256)!==0&&Gi$1(Y$1.alternate,Y$1),(ca&512)===0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$1=Y$1.nextEffect}}function Dj(){if(sj!==90){var ca=97<sj?97:sj;return sj=90,cg(ca,Vj)}}function Vj(){if(rj===null)return!1;var ca=rj;if(rj=null,(W$2&(fj|gj))!==V$2)throw Error(u$3(331));var ga=W$2;for(W$2|=gj,ca=ca.current.firstEffect;ca!==null;){try{var _s=ca;if((_s.effectTag&512)!==0)switch(_s.tag){case 0:case 11:case 15:case 22:Hi$1(5,_s),Ii$1(5,_s)}}catch(Ss){if(ca===null)throw Error(u$3(330));Ei$1(ca,Ss)}_s=ca.nextEffect,ca.nextEffect=null,ca=_s}return W$2=ga,gg(),!0}function Wj(ca,ga,_s){ga=Ai$1(_s,ga),ga=Xi$1(ca,ga,1073741823),xg(ca,ga),ca=xj(ca,1073741823),ca!==null&&Z$1(ca)}function Ei$1(ca,ga){if(ca.tag===3)Wj(ca,ca,ga);else for(var _s=ca.return;_s!==null;){if(_s.tag===3){Wj(_s,ca,ga);break}else if(_s.tag===1){var Ss=_s.stateNode;if(typeof _s.type.getDerivedStateFromError=="function"||typeof Ss.componentDidCatch=="function"&&(aj===null||!aj.has(Ss))){ca=Ai$1(ga,ca),ca=$i$1(_s,ca,1073741823),xg(_s,ca),_s=xj(_s,1073741823),_s!==null&&Z$1(_s);break}}_s=_s.return}}function Oj(ca,ga,_s){var Ss=ca.pingCache;Ss!==null&&Ss.delete(ga),T$1===ca&&U$2===_s?S$2===vi$1||S$2===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(ca,U$2):oj=!0:Aj(ca,_s)&&(ga=ca.lastPingedTime,ga!==0&&ga<_s||(ca.lastPingedTime=_s,Z$1(ca)))}function Vi$1(ca,ga){var _s=ca.stateNode;_s!==null&&_s.delete(ga),ga=0,ga===0&&(ga=Gg(),ga=Hg(ga,ca,null)),ca=xj(ca,ga),ca!==null&&Z$1(ca)}var Rj;Rj=function(ca,ga,_s){var Ss=ga.expirationTime;if(ca!==null){var Ms=ga.pendingProps;if(ca.memoizedProps!==Ms||K$1.current)rg=!0;else{if(Ss<_s){switch(rg=!1,ga.tag){case 3:hi$1(ga),Xh();break;case 5:if(fh(ga),ga.mode&4&&_s!==1&&Ms.hidden)return ga.expirationTime=ga.childExpirationTime=1,null;break;case 1:L$2(ga.type)&&Gf(ga);break;case 4:dh(ga,ga.stateNode.containerInfo);break;case 10:Ss=ga.memoizedProps.value,Ms=ga.type._context,I$1(jg,Ms._currentValue),Ms._currentValue=Ss;break;case 13:if(ga.memoizedState!==null)return Ss=ga.child.childExpirationTime,Ss!==0&&Ss>=_s?ji$1(ca,ga,_s):(I$1(M$2,M$2.current&1),ga=$h(ca,ga,_s),ga!==null?ga.sibling:null);I$1(M$2,M$2.current&1);break;case 19:if(Ss=ga.childExpirationTime>=_s,(ca.effectTag&64)!==0){if(Ss)return mi$1(ca,ga,_s);ga.effectTag|=64}if(Ms=ga.memoizedState,Ms!==null&&(Ms.rendering=null,Ms.tail=null),I$1(M$2,M$2.current),!Ss)return null}return $h(ca,ga,_s)}rg=!1}}else rg=!1;switch(ga.expirationTime=0,ga.tag){case 2:if(Ss=ga.type,ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),ca=ga.pendingProps,Ms=Cf(ga,J$1.current),qg(ga,_s),Ms=oh(null,ga,Ss,ca,Ms,_s),ga.effectTag|=1,typeof Ms=="object"&&Ms!==null&&typeof Ms.render=="function"&&Ms.$$typeof===void 0){if(ga.tag=1,ga.memoizedState=null,ga.updateQueue=null,L$2(Ss)){var Cs=!0;Gf(ga)}else Cs=!1;ga.memoizedState=Ms.state!==null&&Ms.state!==void 0?Ms.state:null,ug(ga);var Ts=Ss.getDerivedStateFromProps;typeof Ts=="function"&&Fg(ga,Ss,Ts,ca),Ms.updater=Jg,ga.stateNode=Ms,Ms._reactInternalFiber=ga,Ng(ga,Ss,ca,_s),ga=gi$1(null,ga,Ss,!0,Cs,_s)}else ga.tag=0,R$2(null,ga,Ms,_s),ga=ga.child;return ga;case 16:e:{if(Ms=ga.elementType,ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),ca=ga.pendingProps,ob(Ms),Ms._status!==1)throw Ms._result;switch(Ms=Ms._result,ga.type=Ms,Cs=ga.tag=Xj(Ms),ca=ig(Ms,ca),Cs){case 0:ga=di$1(null,ga,Ms,ca,_s);break e;case 1:ga=fi$1(null,ga,Ms,ca,_s);break e;case 11:ga=Zh(null,ga,Ms,ca,_s);break e;case 14:ga=ai$1(null,ga,Ms,ig(Ms.type,ca),Ss,_s);break e}throw Error(u$3(306,Ms,""))}return ga;case 0:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),di$1(ca,ga,Ss,Ms,_s);case 1:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),fi$1(ca,ga,Ss,Ms,_s);case 3:if(hi$1(ga),Ss=ga.updateQueue,ca===null||Ss===null)throw Error(u$3(282));if(Ss=ga.pendingProps,Ms=ga.memoizedState,Ms=Ms!==null?Ms.element:null,vg(ca,ga),zg(ga,Ss,null,_s),Ss=ga.memoizedState.element,Ss===Ms)Xh(),ga=$h(ca,ga,_s);else{if((Ms=ga.stateNode.hydrate)&&(Ph=Jd(ga.stateNode.containerInfo.firstChild),Oh=ga,Ms=Qh=!0),Ms)for(_s=Yg(ga,null,Ss,_s),ga.child=_s;_s;)_s.effectTag=_s.effectTag&-3|1024,_s=_s.sibling;else R$2(ca,ga,Ss,_s),Xh();ga=ga.child}return ga;case 5:return fh(ga),ca===null&&Uh(ga),Ss=ga.type,Ms=ga.pendingProps,Cs=ca!==null?ca.memoizedProps:null,Ts=Ms.children,Gd(Ss,Ms)?Ts=null:Cs!==null&&Gd(Ss,Cs)&&(ga.effectTag|=16),ei$1(ca,ga),ga.mode&4&&_s!==1&&Ms.hidden?(ga.expirationTime=ga.childExpirationTime=1,ga=null):(R$2(ca,ga,Ts,_s),ga=ga.child),ga;case 6:return ca===null&&Uh(ga),null;case 13:return ji$1(ca,ga,_s);case 4:return dh(ga,ga.stateNode.containerInfo),Ss=ga.pendingProps,ca===null?ga.child=Xg(ga,null,Ss,_s):R$2(ca,ga,Ss,_s),ga.child;case 11:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),Zh(ca,ga,Ss,Ms,_s);case 7:return R$2(ca,ga,ga.pendingProps,_s),ga.child;case 8:return R$2(ca,ga,ga.pendingProps.children,_s),ga.child;case 12:return R$2(ca,ga,ga.pendingProps.children,_s),ga.child;case 10:e:{Ss=ga.type._context,Ms=ga.pendingProps,Ts=ga.memoizedProps,Cs=Ms.value;var Is=ga.type._context;if(I$1(jg,Is._currentValue),Is._currentValue=Cs,Ts!==null)if(Is=Ts.value,Cs=$e$1(Is,Cs)?0:(typeof Ss._calculateChangedBits=="function"?Ss._calculateChangedBits(Is,Cs):1073741823)|0,Cs===0){if(Ts.children===Ms.children&&!K$1.current){ga=$h(ca,ga,_s);break e}}else for(Is=ga.child,Is!==null&&(Is.return=ga);Is!==null;){var Bs=Is.dependencies;if(Bs!==null){Ts=Is.child;for(var Ps=Bs.firstContext;Ps!==null;){if(Ps.context===Ss&&(Ps.observedBits&Cs)!==0){Is.tag===1&&(Ps=wg(_s,null),Ps.tag=2,xg(Is,Ps)),Is.expirationTime<_s&&(Is.expirationTime=_s),Ps=Is.alternate,Ps!==null&&Ps.expirationTime<_s&&(Ps.expirationTime=_s),pg(Is.return,_s),Bs.expirationTime<_s&&(Bs.expirationTime=_s);break}Ps=Ps.next}}else Ts=Is.tag===10&&Is.type===ga.type?null:Is.child;if(Ts!==null)Ts.return=Is;else for(Ts=Is;Ts!==null;){if(Ts===ga){Ts=null;break}if(Is=Ts.sibling,Is!==null){Is.return=Ts.return,Ts=Is;break}Ts=Ts.return}Is=Ts}R$2(ca,ga,Ms.children,_s),ga=ga.child}return ga;case 9:return Ms=ga.type,Cs=ga.pendingProps,Ss=Cs.children,qg(ga,_s),Ms=sg(Ms,Cs.unstable_observedBits),Ss=Ss(Ms),ga.effectTag|=1,R$2(ca,ga,Ss,_s),ga.child;case 14:return Ms=ga.type,Cs=ig(Ms,ga.pendingProps),Cs=ig(Ms.type,Cs),ai$1(ca,ga,Ms,Cs,Ss,_s);case 15:return ci$1(ca,ga,ga.type,ga.pendingProps,Ss,_s);case 17:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),ga.tag=1,L$2(Ss)?(ca=!0,Gf(ga)):ca=!1,qg(ga,_s),Lg(ga,Ss,Ms),Ng(ga,Ss,Ms,_s),gi$1(null,ga,Ss,!0,ca,_s);case 19:return mi$1(ca,ga,_s)}throw Error(u$3(156,ga.tag))};var Uj=null,Li$1=null;function Yj(ca){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(ga.isDisabled||!ga.supportsFiber)return!0;try{var _s=ga.inject(ca);Uj=function(Ss){try{ga.onCommitFiberRoot(_s,Ss,void 0,(Ss.current.effectTag&64)===64)}catch{}},Li$1=function(Ss){try{ga.onCommitFiberUnmount(_s,Ss)}catch{}}}catch{}return!0}function Zj(ca,ga,_s,Ss){this.tag=ca,this.key=_s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ga,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ss,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(ca,ga,_s,Ss){return new Zj(ca,ga,_s,Ss)}function bi$1(ca){return ca=ca.prototype,!(!ca||!ca.isReactComponent)}function Xj(ca){if(typeof ca=="function")return bi$1(ca)?1:0;if(ca!=null){if(ca=ca.$$typeof,ca===gb)return 11;if(ca===jb)return 14}return 2}function Sg(ca,ga){var _s=ca.alternate;return _s===null?(_s=Sh(ca.tag,ga,ca.key,ca.mode),_s.elementType=ca.elementType,_s.type=ca.type,_s.stateNode=ca.stateNode,_s.alternate=ca,ca.alternate=_s):(_s.pendingProps=ga,_s.effectTag=0,_s.nextEffect=null,_s.firstEffect=null,_s.lastEffect=null),_s.childExpirationTime=ca.childExpirationTime,_s.expirationTime=ca.expirationTime,_s.child=ca.child,_s.memoizedProps=ca.memoizedProps,_s.memoizedState=ca.memoizedState,_s.updateQueue=ca.updateQueue,ga=ca.dependencies,_s.dependencies=ga===null?null:{expirationTime:ga.expirationTime,firstContext:ga.firstContext,responders:ga.responders},_s.sibling=ca.sibling,_s.index=ca.index,_s.ref=ca.ref,_s}function Ug(ca,ga,_s,Ss,Ms,Cs){var Ts=2;if(Ss=ca,typeof ca=="function")bi$1(ca)&&(Ts=1);else if(typeof ca=="string")Ts=5;else e:switch(ca){case ab:return Wg(_s.children,Ms,Cs,ga);case fb:Ts=8,Ms|=7;break;case bb:Ts=8,Ms|=1;break;case cb:return ca=Sh(12,_s,ga,Ms|8),ca.elementType=cb,ca.type=cb,ca.expirationTime=Cs,ca;case hb:return ca=Sh(13,_s,ga,Ms),ca.type=hb,ca.elementType=hb,ca.expirationTime=Cs,ca;case ib:return ca=Sh(19,_s,ga,Ms),ca.elementType=ib,ca.expirationTime=Cs,ca;default:if(typeof ca=="object"&&ca!==null)switch(ca.$$typeof){case db:Ts=10;break e;case eb:Ts=9;break e;case gb:Ts=11;break e;case jb:Ts=14;break e;case kb:Ts=16,Ss=null;break e;case lb:Ts=22;break e}throw Error(u$3(130,ca==null?ca:typeof ca,""))}return ga=Sh(Ts,_s,ga,Ms),ga.elementType=ca,ga.type=Ss,ga.expirationTime=Cs,ga}function Wg(ca,ga,_s,Ss){return ca=Sh(7,ca,Ss,ga),ca.expirationTime=_s,ca}function Tg(ca,ga,_s){return ca=Sh(6,ca,null,ga),ca.expirationTime=_s,ca}function Vg(ca,ga,_s){return ga=Sh(4,ca.children!==null?ca.children:[],ca.key,ga),ga.expirationTime=_s,ga.stateNode={containerInfo:ca.containerInfo,pendingChildren:null,implementation:ca.implementation},ga}function ak(ca,ga,_s){this.tag=ga,this.current=null,this.containerInfo=ca,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=_s,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(ca,ga){var _s=ca.firstSuspendedTime;return ca=ca.lastSuspendedTime,_s!==0&&_s>=ga&&ca<=ga}function xi$1(ca,ga){var _s=ca.firstSuspendedTime,Ss=ca.lastSuspendedTime;_s<ga&&(ca.firstSuspendedTime=ga),(Ss>ga||_s===0)&&(ca.lastSuspendedTime=ga),ga<=ca.lastPingedTime&&(ca.lastPingedTime=0),ga<=ca.lastExpiredTime&&(ca.lastExpiredTime=0)}function yi$1(ca,ga){ga>ca.firstPendingTime&&(ca.firstPendingTime=ga);var _s=ca.firstSuspendedTime;_s!==0&&(ga>=_s?ca.firstSuspendedTime=ca.lastSuspendedTime=ca.nextKnownPendingLevel=0:ga>=ca.lastSuspendedTime&&(ca.lastSuspendedTime=ga+1),ga>ca.nextKnownPendingLevel&&(ca.nextKnownPendingLevel=ga))}function Cj(ca,ga){var _s=ca.lastExpiredTime;(_s===0||_s>ga)&&(ca.lastExpiredTime=ga)}function bk(ca,ga,_s,Ss){var Ms=ga.current,Cs=Gg(),Ts=Dg.suspense;Cs=Hg(Cs,Ms,Ts);e:if(_s){_s=_s._reactInternalFiber;t:{if(dc(_s)!==_s||_s.tag!==1)throw Error(u$3(170));var Is=_s;do{switch(Is.tag){case 3:Is=Is.stateNode.context;break t;case 1:if(L$2(Is.type)){Is=Is.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Is=Is.return}while(Is!==null);throw Error(u$3(171))}if(_s.tag===1){var Bs=_s.type;if(L$2(Bs)){_s=Ff(_s,Bs,Is);break e}}_s=Is}else _s=Af;return ga.context===null?ga.context=_s:ga.pendingContext=_s,ga=wg(Cs,Ts),ga.payload={element:ca},Ss=Ss===void 0?null:Ss,Ss!==null&&(ga.callback=Ss),xg(Ms,ga),Ig(Ms,Cs),Cs}function ck(ca){if(ca=ca.current,!ca.child)return null;switch(ca.child.tag){case 5:return ca.child.stateNode;default:return ca.child.stateNode}}function dk(ca,ga){ca=ca.memoizedState,ca!==null&&ca.dehydrated!==null&&ca.retryTime<ga&&(ca.retryTime=ga)}function ek(ca,ga){dk(ca,ga),(ca=ca.alternate)&&dk(ca,ga)}function fk(ca,ga,_s){_s=_s!=null&&_s.hydrate===!0;var Ss=new ak(ca,ga,_s),Ms=Sh(3,null,null,ga===2?7:ga===1?3:0);Ss.current=Ms,Ms.stateNode=Ss,ug(Ms),ca[Od]=Ss.current,_s&&ga!==0&&Jc(ca,ca.nodeType===9?ca:ca.ownerDocument),this._internalRoot=Ss}fk.prototype.render=function(ca){bk(ca,this._internalRoot,null,null)};fk.prototype.unmount=function(){var ca=this._internalRoot,ga=ca.containerInfo;bk(null,ca,null,function(){ga[Od]=null})};function gk(ca){return!(!ca||ca.nodeType!==1&&ca.nodeType!==9&&ca.nodeType!==11&&(ca.nodeType!==8||ca.nodeValue!==" react-mount-point-unstable "))}function hk(ca,ga){if(ga||(ga=ca?ca.nodeType===9?ca.documentElement:ca.firstChild:null,ga=!(!ga||ga.nodeType!==1||!ga.hasAttribute("data-reactroot"))),!ga)for(var _s;_s=ca.lastChild;)ca.removeChild(_s);return new fk(ca,0,ga?{hydrate:!0}:void 0)}function ik(ca,ga,_s,Ss,Ms){var Cs=_s._reactRootContainer;if(Cs){var Ts=Cs._internalRoot;if(typeof Ms=="function"){var Is=Ms;Ms=function(){var Ps=ck(Ts);Is.call(Ps)}}bk(ga,Ts,ca,Ms)}else{if(Cs=_s._reactRootContainer=hk(_s,Ss),Ts=Cs._internalRoot,typeof Ms=="function"){var Bs=Ms;Ms=function(){var Ps=ck(Ts);Bs.call(Ps)}}Nj(function(){bk(ga,Ts,ca,Ms)})}return ck(Ts)}function jk(ca,ga,_s){var Ss=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a,key:Ss==null?null:""+Ss,children:ca,containerInfo:ga,implementation:_s}}wc=function(ca){if(ca.tag===13){var ga=hg(Gg(),150,100);Ig(ca,ga),ek(ca,ga)}};xc=function(ca){ca.tag===13&&(Ig(ca,3),ek(ca,3))};yc=function(ca){if(ca.tag===13){var ga=Gg();ga=Hg(ga,ca,null),Ig(ca,ga),ek(ca,ga)}};za=function(ca,ga,_s){switch(ga){case"input":if(Cb(ca,_s),ga=_s.name,_s.type==="radio"&&ga!=null){for(_s=ca;_s.parentNode;)_s=_s.parentNode;for(_s=_s.querySelectorAll("input[name="+JSON.stringify(""+ga)+'][type="radio"]'),ga=0;ga<_s.length;ga++){var Ss=_s[ga];if(Ss!==ca&&Ss.form===ca.form){var Ms=Qd(Ss);if(!Ms)throw Error(u$3(90));yb(Ss),Cb(Ss,Ms)}}}break;case"textarea":Kb(ca,_s);break;case"select":ga=_s.value,ga!=null&&Hb(ca,!!_s.multiple,ga,!1)}};Fa=Mj;Ga=function(ca,ga,_s,Ss,Ms){var Cs=W$2;W$2|=4;try{return cg(98,ca.bind(null,ga,_s,Ss,Ms))}finally{W$2=Cs,W$2===V$2&&gg()}};Ha=function(){(W$2&(1|fj|gj))===V$2&&(Lj(),Dj())};Ia=function(ca,ga){var _s=W$2;W$2|=2;try{return ca(ga)}finally{W$2=_s,W$2===V$2&&gg()}};function kk(ca,ga){var _s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk(ga))throw Error(u$3(200));return jk(ca,ga,null,_s)}var lk={Events:[Nc,Pd,Qd,xa,ta,Xd,function(ca){jc(ca,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};(function(ca){var ga=ca.findFiberByHostInstance;return Yj(n$4({},ca,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(_s){return _s=hc(_s),_s===null?null:_s.stateNode},findFiberByHostInstance:function(_s){return ga?ga(_s):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(ca){if(ca==null)return null;if(ca.nodeType===1)return ca;var ga=ca._reactInternalFiber;if(ga===void 0)throw typeof ca.render=="function"?Error(u$3(188)):Error(u$3(268,Object.keys(ca)));return ca=hc(ga),ca=ca===null?null:ca.stateNode,ca};reactDom_production_min.flushSync=function(ca,ga){if((W$2&(fj|gj))!==V$2)throw Error(u$3(187));var _s=W$2;W$2|=1;try{return cg(99,ca.bind(null,ga))}finally{W$2=_s,gg()}};reactDom_production_min.hydrate=function(ca,ga,_s){if(!gk(ga))throw Error(u$3(200));return ik(null,ca,ga,!0,_s)};reactDom_production_min.render=function(ca,ga,_s){if(!gk(ga))throw Error(u$3(200));return ik(null,ca,ga,!1,_s)};reactDom_production_min.unmountComponentAtNode=function(ca){if(!gk(ca))throw Error(u$3(40));return ca._reactRootContainer?(Nj(function(){ik(null,null,ca,!1,function(){ca._reactRootContainer=null,ca[Od]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(ca,ga){return kk(ca,ga,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ca,ga,_s,Ss){if(!gk(_s))throw Error(u$3(200));if(ca==null||ca._reactInternalFiber===void 0)throw Error(u$3(38));return ik(ca,ga,_s,!1,Ss)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ca){console.error(ca)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(ca){return typeof ca=="number"&&isFinite(ca)&&Math.floor(ca)===ca});Math.sign===void 0&&(Math.sign=function(ca){return ca<0?-1:ca>0?1:+ca});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(ca){if(ca==null)throw new TypeError("Cannot convert undefined or null to object");const ga=Object(ca);for(let _s=1;_s<arguments.length;_s++){const Ss=arguments[_s];if(Ss!=null)for(const Ms in Ss)Object.prototype.hasOwnProperty.call(Ss,Ms)&&(ga[Ms]=Ss[Ms])}return ga});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(ca,ga){this._listeners===void 0&&(this._listeners={});var _s=this._listeners;_s[ca]===void 0&&(_s[ca]=[]),_s[ca].indexOf(ga)===-1&&_s[ca].push(ga)},hasEventListener:function(ca,ga){if(this._listeners===void 0)return!1;var _s=this._listeners;return _s[ca]!==void 0&&_s[ca].indexOf(ga)!==-1},removeEventListener:function(ca,ga){if(this._listeners!==void 0){var _s=this._listeners,Ss=_s[ca];if(Ss!==void 0){var Ms=Ss.indexOf(ga);Ms!==-1&&Ss.splice(Ms,1)}}},dispatchEvent:function(ca){if(this._listeners!==void 0){var ga=this._listeners,_s=ga[ca.type];if(_s!==void 0){ca.target=this;for(var Ss=_s.slice(0),Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms].call(this,ca)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var ca=Math.random()*4294967295|0,ga=Math.random()*4294967295|0,_s=Math.random()*4294967295|0,Ss=Math.random()*4294967295|0,Ms=_lut[ca&255]+_lut[ca>>8&255]+_lut[ca>>16&255]+_lut[ca>>24&255]+"-"+_lut[ga&255]+_lut[ga>>8&255]+"-"+_lut[ga>>16&15|64]+_lut[ga>>24&255]+"-"+_lut[_s&63|128]+_lut[_s>>8&255]+"-"+_lut[_s>>16&255]+_lut[_s>>24&255]+_lut[Ss&255]+_lut[Ss>>8&255]+_lut[Ss>>16&255]+_lut[Ss>>24&255];return Ms.toUpperCase()},clamp:function(ca,ga,_s){return Math.max(ga,Math.min(_s,ca))},euclideanModulo:function(ca,ga){return(ca%ga+ga)%ga},mapLinear:function(ca,ga,_s,Ss,Ms){return Ss+(ca-ga)*(Ms-Ss)/(_s-ga)},lerp:function(ca,ga,_s){return(1-_s)*ca+_s*ga},smoothstep:function(ca,ga,_s){return ca<=ga?0:ca>=_s?1:(ca=(ca-ga)/(_s-ga),ca*ca*(3-2*ca))},smootherstep:function(ca,ga,_s){return ca<=ga?0:ca>=_s?1:(ca=(ca-ga)/(_s-ga),ca*ca*ca*(ca*(ca*6-15)+10))},randInt:function(ca,ga){return ca+Math.floor(Math.random()*(ga-ca+1))},randFloat:function(ca,ga){return ca+Math.random()*(ga-ca)},randFloatSpread:function(ca){return ca*(.5-Math.random())},degToRad:function(ca){return ca*MathUtils.DEG2RAD},radToDeg:function(ca){return ca*MathUtils.RAD2DEG},isPowerOfTwo:function(ca){return(ca&ca-1)===0&&ca!==0},ceilPowerOfTwo:function(ca){return Math.pow(2,Math.ceil(Math.log(ca)/Math.LN2))},floorPowerOfTwo:function(ca){return Math.pow(2,Math.floor(Math.log(ca)/Math.LN2))},setQuaternionFromProperEuler:function(ca,ga,_s,Ss,Ms){var Cs=Math.cos,Ts=Math.sin,Is=Cs(_s/2),Bs=Ts(_s/2),Ps=Cs((ga+Ss)/2),Ls=Ts((ga+Ss)/2),Rs=Cs((ga-Ss)/2),Os=Ts((ga-Ss)/2),Fs=Cs((Ss-ga)/2),Vs=Ts((Ss-ga)/2);switch(Ms){case"XYX":ca.set(Is*Ls,Bs*Rs,Bs*Os,Is*Ps);break;case"YZY":ca.set(Bs*Os,Is*Ls,Bs*Rs,Is*Ps);break;case"ZXZ":ca.set(Bs*Rs,Bs*Os,Is*Ls,Is*Ps);break;case"XZX":ca.set(Is*Ls,Bs*Vs,Bs*Fs,Is*Ps);break;case"YXY":ca.set(Bs*Fs,Is*Ls,Bs*Vs,Is*Ps);break;case"ZYZ":ca.set(Bs*Vs,Bs*Fs,Is*Ls,Is*Ps);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Ms)}}};function Vector2(ca,ga){this.x=ca||0,this.y=ga||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(ca){this.x=ca}},height:{get:function(){return this.y},set:function(ca){this.y=ca}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(ca,ga){return this.x=ca,this.y=ga,this},setScalar:function(ca){return this.x=ca,this.y=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this},multiply:function(ca){return this.x*=ca.x,this.y*=ca.y,this},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this},divide:function(ca){return this.x/=ca.x,this.y/=ca.y,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},applyMatrix3:function(ca){var ga=this.x,_s=this.y,Ss=ca.elements;return this.x=Ss[0]*ga+Ss[3]*_s+Ss[6],this.y=Ss[1]*ga+Ss[4]*_s+Ss[7],this},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this},clampLength:function(ca,ga){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(ca,Math.min(ga,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(ca){return this.x*ca.x+this.y*ca.y},cross:function(ca){return this.x*ca.y-this.y*ca.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var ca=Math.atan2(-this.y,-this.x)+Math.PI;return ca},distanceTo:function(ca){return Math.sqrt(this.distanceToSquared(ca))},distanceToSquared:function(ca){var ga=this.x-ca.x,_s=this.y-ca.y;return ga*ga+_s*_s},manhattanDistanceTo:function(ca){return Math.abs(this.x-ca.x)+Math.abs(this.y-ca.y)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this},lerpVectors:function(ca,ga,_s){return this.x=ca.x+(ga.x-ca.x)*_s,this.y=ca.y+(ga.y-ca.y)*_s,this},equals:function(ca){return ca.x===this.x&&ca.y===this.y},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca},fromBufferAttribute:function(ca,ga,_s){return _s!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this},rotateAround:function(ca,ga){var _s=Math.cos(ga),Ss=Math.sin(ga),Ms=this.x-ca.x,Cs=this.y-ca.y;return this.x=Ms*_s-Cs*Ss+ca.x,this.y=Ms*Ss+Cs*_s+ca.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs){var Ps=this.elements;return Ps[0]=ca,Ps[1]=Ss,Ps[2]=Ts,Ps[3]=ga,Ps[4]=Ms,Ps[5]=Is,Ps[6]=_s,Ps[7]=Cs,Ps[8]=Bs,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(ca){var ga=this.elements,_s=ca.elements;return ga[0]=_s[0],ga[1]=_s[1],ga[2]=_s[2],ga[3]=_s[3],ga[4]=_s[4],ga[5]=_s[5],ga[6]=_s[6],ga[7]=_s[7],ga[8]=_s[8],this},extractBasis:function(ca,ga,_s){return ca.setFromMatrix3Column(this,0),ga.setFromMatrix3Column(this,1),_s.setFromMatrix3Column(this,2),this},setFromMatrix4:function(ca){var ga=ca.elements;return this.set(ga[0],ga[4],ga[8],ga[1],ga[5],ga[9],ga[2],ga[6],ga[10]),this},multiply:function(ca){return this.multiplyMatrices(this,ca)},premultiply:function(ca){return this.multiplyMatrices(ca,this)},multiplyMatrices:function(ca,ga){var _s=ca.elements,Ss=ga.elements,Ms=this.elements,Cs=_s[0],Ts=_s[3],Is=_s[6],Bs=_s[1],Ps=_s[4],Ls=_s[7],Rs=_s[2],Os=_s[5],Fs=_s[8],Vs=Ss[0],ks=Ss[3],Ns=Ss[6],Ds=Ss[1],$s=Ss[4],Gs=Ss[7],Us=Ss[2],Hs=Ss[5],zs=Ss[8];return Ms[0]=Cs*Vs+Ts*Ds+Is*Us,Ms[3]=Cs*ks+Ts*$s+Is*Hs,Ms[6]=Cs*Ns+Ts*Gs+Is*zs,Ms[1]=Bs*Vs+Ps*Ds+Ls*Us,Ms[4]=Bs*ks+Ps*$s+Ls*Hs,Ms[7]=Bs*Ns+Ps*Gs+Ls*zs,Ms[2]=Rs*Vs+Os*Ds+Fs*Us,Ms[5]=Rs*ks+Os*$s+Fs*Hs,Ms[8]=Rs*Ns+Os*Gs+Fs*zs,this},multiplyScalar:function(ca){var ga=this.elements;return ga[0]*=ca,ga[3]*=ca,ga[6]*=ca,ga[1]*=ca,ga[4]*=ca,ga[7]*=ca,ga[2]*=ca,ga[5]*=ca,ga[8]*=ca,this},determinant:function(){var ca=this.elements,ga=ca[0],_s=ca[1],Ss=ca[2],Ms=ca[3],Cs=ca[4],Ts=ca[5],Is=ca[6],Bs=ca[7],Ps=ca[8];return ga*Cs*Ps-ga*Ts*Bs-_s*Ms*Ps+_s*Ts*Is+Ss*Ms*Bs-Ss*Cs*Is},getInverse:function(ca,ga){ga!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var _s=ca.elements,Ss=this.elements,Ms=_s[0],Cs=_s[1],Ts=_s[2],Is=_s[3],Bs=_s[4],Ps=_s[5],Ls=_s[6],Rs=_s[7],Os=_s[8],Fs=Os*Bs-Ps*Rs,Vs=Ps*Ls-Os*Is,ks=Rs*Is-Bs*Ls,Ns=Ms*Fs+Cs*Vs+Ts*ks;if(Ns===0)return this.set(0,0,0,0,0,0,0,0,0);var Ds=1/Ns;return Ss[0]=Fs*Ds,Ss[1]=(Ts*Rs-Os*Cs)*Ds,Ss[2]=(Ps*Cs-Ts*Bs)*Ds,Ss[3]=Vs*Ds,Ss[4]=(Os*Ms-Ts*Ls)*Ds,Ss[5]=(Ts*Is-Ps*Ms)*Ds,Ss[6]=ks*Ds,Ss[7]=(Cs*Ls-Rs*Ms)*Ds,Ss[8]=(Bs*Ms-Cs*Is)*Ds,this},transpose:function(){var ca,ga=this.elements;return ca=ga[1],ga[1]=ga[3],ga[3]=ca,ca=ga[2],ga[2]=ga[6],ga[6]=ca,ca=ga[5],ga[5]=ga[7],ga[7]=ca,this},getNormalMatrix:function(ca){return this.setFromMatrix4(ca).getInverse(this).transpose()},transposeIntoArray:function(ca){var ga=this.elements;return ca[0]=ga[0],ca[1]=ga[3],ca[2]=ga[6],ca[3]=ga[1],ca[4]=ga[4],ca[5]=ga[7],ca[6]=ga[2],ca[7]=ga[5],ca[8]=ga[8],this},setUvTransform:function(ca,ga,_s,Ss,Ms,Cs,Ts){var Is=Math.cos(Ms),Bs=Math.sin(Ms);this.set(_s*Is,_s*Bs,-_s*(Is*Cs+Bs*Ts)+Cs+ca,-Ss*Bs,Ss*Is,-Ss*(-Bs*Cs+Is*Ts)+Ts+ga,0,0,1)},scale:function(ca,ga){var _s=this.elements;return _s[0]*=ca,_s[3]*=ca,_s[6]*=ca,_s[1]*=ga,_s[4]*=ga,_s[7]*=ga,this},rotate:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca),Ss=this.elements,Ms=Ss[0],Cs=Ss[3],Ts=Ss[6],Is=Ss[1],Bs=Ss[4],Ps=Ss[7];return Ss[0]=ga*Ms+_s*Is,Ss[3]=ga*Cs+_s*Bs,Ss[6]=ga*Ts+_s*Ps,Ss[1]=-_s*Ms+ga*Is,Ss[4]=-_s*Cs+ga*Bs,Ss[7]=-_s*Ts+ga*Ps,this},translate:function(ca,ga){var _s=this.elements;return _s[0]+=ca*_s[2],_s[3]+=ca*_s[5],_s[6]+=ca*_s[8],_s[1]+=ga*_s[2],_s[4]+=ga*_s[5],_s[7]+=ga*_s[8],this},equals:function(ca){for(var ga=this.elements,_s=ca.elements,Ss=0;Ss<9;Ss++)if(ga[Ss]!==_s[Ss])return!1;return!0},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var _s=0;_s<9;_s++)this.elements[_s]=ca[_s+ga];return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);var _s=this.elements;return ca[ga]=_s[0],ca[ga+1]=_s[1],ca[ga+2]=_s[2],ca[ga+3]=_s[3],ca[ga+4]=_s[4],ca[ga+5]=_s[5],ca[ga+6]=_s[6],ca[ga+7]=_s[7],ca[ga+8]=_s[8],ca}});var _canvas,ImageUtils={getDataURL:function(ca){var ga;if(typeof HTMLCanvasElement=="undefined")return ca.src;if(ca instanceof HTMLCanvasElement)ga=ca;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=ca.width,_canvas.height=ca.height;var _s=_canvas.getContext("2d");ca instanceof ImageData?_s.putImageData(ca,0,0):_s.drawImage(ca,0,0,ca.width,ca.height),ga=_canvas}return ga.width>2048||ga.height>2048?ga.toDataURL("image/jpeg",.6):ga.toDataURL("image/png")}},textureId=0;function Texture(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=ca!==void 0?ca:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=ga!==void 0?ga:Texture.DEFAULT_MAPPING,this.wrapS=_s!==void 0?_s:ClampToEdgeWrapping,this.wrapT=Ss!==void 0?Ss:ClampToEdgeWrapping,this.magFilter=Ms!==void 0?Ms:LinearFilter,this.minFilter=Cs!==void 0?Cs:LinearMipmapLinearFilter,this.anisotropy=Bs!==void 0?Bs:1,this.format=Ts!==void 0?Ts:RGBAFormat,this.internalFormat=null,this.type=Is!==void 0?Is:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Ps!==void 0?Ps:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.name=ca.name,this.image=ca.image,this.mipmaps=ca.mipmaps.slice(0),this.mapping=ca.mapping,this.wrapS=ca.wrapS,this.wrapT=ca.wrapT,this.magFilter=ca.magFilter,this.minFilter=ca.minFilter,this.anisotropy=ca.anisotropy,this.format=ca.format,this.internalFormat=ca.internalFormat,this.type=ca.type,this.offset.copy(ca.offset),this.repeat.copy(ca.repeat),this.center.copy(ca.center),this.rotation=ca.rotation,this.matrixAutoUpdate=ca.matrixAutoUpdate,this.matrix.copy(ca.matrix),this.generateMipmaps=ca.generateMipmaps,this.premultiplyAlpha=ca.premultiplyAlpha,this.flipY=ca.flipY,this.unpackAlignment=ca.unpackAlignment,this.encoding=ca.encoding,this},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string";if(!ga&&ca.textures[this.uuid]!==void 0)return ca.textures[this.uuid];var _s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Ss=this.image;if(Ss.uuid===void 0&&(Ss.uuid=MathUtils.generateUUID()),!ga&&ca.images[Ss.uuid]===void 0){var Ms;if(Array.isArray(Ss)){Ms=[];for(var Cs=0,Ts=Ss.length;Cs<Ts;Cs++)Ms.push(ImageUtils.getDataURL(Ss[Cs]))}else Ms=ImageUtils.getDataURL(Ss);ca.images[Ss.uuid]={uuid:Ss.uuid,url:Ms}}_s.image=Ss.uuid}return ga||(ca.textures[this.uuid]=_s),_s},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(ca){if(this.mapping!==UVMapping)return ca;if(ca.applyMatrix3(this.matrix),ca.x<0||ca.x>1)switch(this.wrapS){case RepeatWrapping:ca.x=ca.x-Math.floor(ca.x);break;case ClampToEdgeWrapping:ca.x=ca.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ca.x)%2)===1?ca.x=Math.ceil(ca.x)-ca.x:ca.x=ca.x-Math.floor(ca.x);break}if(ca.y<0||ca.y>1)switch(this.wrapT){case RepeatWrapping:ca.y=ca.y-Math.floor(ca.y);break;case ClampToEdgeWrapping:ca.y=ca.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ca.y)%2)===1?ca.y=Math.ceil(ca.y)-ca.y:ca.y=ca.y-Math.floor(ca.y);break}return this.flipY&&(ca.y=1-ca.y),ca}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});function Vector4(ca,ga,_s,Ss){this.x=ca||0,this.y=ga||0,this.z=_s||0,this.w=Ss!==void 0?Ss:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(ca){this.z=ca}},height:{get:function(){return this.w},set:function(ca){this.w=ca}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(ca,ga,_s,Ss){return this.x=ca,this.y=ga,this.z=_s,this.w=Ss,this},setScalar:function(ca){return this.x=ca,this.y=ca,this.z=ca,this.w=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setZ:function(ca){return this.z=ca,this},setW:function(ca){return this.w=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;case 2:this.z=ga;break;case 3:this.w=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this.z=ca.z,this.w=ca.w!==void 0?ca.w:1,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this.z+=ca.z,this.w+=ca.w,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this.z+=ca,this.w+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this.z=ca.z+ga.z,this.w=ca.w+ga.w,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this.z+=ca.z*ga,this.w+=ca.w*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this.z-=ca.z,this.w-=ca.w,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this.z-=ca,this.w-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this.z=ca.z-ga.z,this.w=ca.w-ga.w,this},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this.z*=ca,this.w*=ca,this},applyMatrix4:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=this.w,Cs=ca.elements;return this.x=Cs[0]*ga+Cs[4]*_s+Cs[8]*Ss+Cs[12]*Ms,this.y=Cs[1]*ga+Cs[5]*_s+Cs[9]*Ss+Cs[13]*Ms,this.z=Cs[2]*ga+Cs[6]*_s+Cs[10]*Ss+Cs[14]*Ms,this.w=Cs[3]*ga+Cs[7]*_s+Cs[11]*Ss+Cs[15]*Ms,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},setAxisAngleFromQuaternion:function(ca){this.w=2*Math.acos(ca.w);var ga=Math.sqrt(1-ca.w*ca.w);return ga<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=ca.x/ga,this.y=ca.y/ga,this.z=ca.z/ga),this},setAxisAngleFromRotationMatrix:function(ca){var ga,_s,Ss,Ms,Cs=.01,Ts=.1,Is=ca.elements,Bs=Is[0],Ps=Is[4],Ls=Is[8],Rs=Is[1],Os=Is[5],Fs=Is[9],Vs=Is[2],ks=Is[6],Ns=Is[10];if(Math.abs(Ps-Rs)<Cs&&Math.abs(Ls-Vs)<Cs&&Math.abs(Fs-ks)<Cs){if(Math.abs(Ps+Rs)<Ts&&Math.abs(Ls+Vs)<Ts&&Math.abs(Fs+ks)<Ts&&Math.abs(Bs+Os+Ns-3)<Ts)return this.set(1,0,0,0),this;ga=Math.PI;var Ds=(Bs+1)/2,$s=(Os+1)/2,Gs=(Ns+1)/2,Us=(Ps+Rs)/4,Hs=(Ls+Vs)/4,zs=(Fs+ks)/4;return Ds>$s&&Ds>Gs?Ds<Cs?(_s=0,Ss=.707106781,Ms=.707106781):(_s=Math.sqrt(Ds),Ss=Us/_s,Ms=Hs/_s):$s>Gs?$s<Cs?(_s=.707106781,Ss=0,Ms=.707106781):(Ss=Math.sqrt($s),_s=Us/Ss,Ms=zs/Ss):Gs<Cs?(_s=.707106781,Ss=.707106781,Ms=0):(Ms=Math.sqrt(Gs),_s=Hs/Ms,Ss=zs/Ms),this.set(_s,Ss,Ms,ga),this}var js=Math.sqrt((ks-Fs)*(ks-Fs)+(Ls-Vs)*(Ls-Vs)+(Rs-Ps)*(Rs-Ps));return Math.abs(js)<.001&&(js=1),this.x=(ks-Fs)/js,this.y=(Ls-Vs)/js,this.z=(Rs-Ps)/js,this.w=Math.acos((Bs+Os+Ns-1)/2),this},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this.z=Math.min(this.z,ca.z),this.w=Math.min(this.w,ca.w),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this.z=Math.max(this.z,ca.z),this.w=Math.max(this.w,ca.w),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this.z=Math.max(ca.z,Math.min(ga.z,this.z)),this.w=Math.max(ca.w,Math.min(ga.w,this.w)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this.z=Math.max(ca,Math.min(ga,this.z)),this.w=Math.max(ca,Math.min(ga,this.w)),this},clampLength:function(ca,ga){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(ca,Math.min(ga,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(ca){return this.x*ca.x+this.y*ca.y+this.z*ca.z+this.w*ca.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this.z+=(ca.z-this.z)*ga,this.w+=(ca.w-this.w)*ga,this},lerpVectors:function(ca,ga,_s){return this.x=ca.x+(ga.x-ca.x)*_s,this.y=ca.y+(ga.y-ca.y)*_s,this.z=ca.z+(ga.z-ca.z)*_s,this.w=ca.w+(ga.w-ca.w)*_s,this},equals:function(ca){return ca.x===this.x&&ca.y===this.y&&ca.z===this.z&&ca.w===this.w},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this.z=ca[ga+2],this.w=ca[ga+3],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca[ga+2]=this.z,ca[ga+3]=this.w,ca},fromBufferAttribute:function(ca,ga,_s){return _s!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this.z=ca.getZ(ga),this.w=ca.getW(ga),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(ca,ga,_s){this.width=ca,this.height=ga,this.scissor=new Vector4(0,0,ca,ga),this.scissorTest=!1,this.viewport=new Vector4(0,0,ca,ga),_s=_s||{},this.texture=new Texture(void 0,_s.mapping,_s.wrapS,_s.wrapT,_s.magFilter,_s.minFilter,_s.format,_s.type,_s.anisotropy,_s.encoding),this.texture.image={},this.texture.image.width=ca,this.texture.image.height=ga,this.texture.generateMipmaps=_s.generateMipmaps!==void 0?_s.generateMipmaps:!1,this.texture.minFilter=_s.minFilter!==void 0?_s.minFilter:LinearFilter,this.depthBuffer=_s.depthBuffer!==void 0?_s.depthBuffer:!0,this.stencilBuffer=_s.stencilBuffer!==void 0?_s.stencilBuffer:!0,this.depthTexture=_s.depthTexture!==void 0?_s.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(ca,ga){(this.width!==ca||this.height!==ga)&&(this.width=ca,this.height=ga,this.texture.image.width=ca,this.texture.image.height=ga,this.dispose()),this.viewport.set(0,0,ca,ga),this.scissor.set(0,0,ca,ga)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.width=ca.width,this.height=ca.height,this.viewport.copy(ca.viewport),this.texture=ca.texture.clone(),this.depthBuffer=ca.depthBuffer,this.stencilBuffer=ca.stencilBuffer,this.depthTexture=ca.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(ca,ga,_s){WebGLRenderTarget.call(this,ca,ga,_s),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(ca){return WebGLRenderTarget.prototype.copy.call(this,ca),this.samples=ca.samples,this}});function Quaternion(ca,ga,_s,Ss){this._x=ca||0,this._y=ga||0,this._z=_s||0,this._w=Ss!==void 0?Ss:1}Object.assign(Quaternion,{slerp:function(ca,ga,_s,Ss){return _s.copy(ca).slerp(ga,Ss)},slerpFlat:function(ca,ga,_s,Ss,Ms,Cs,Ts){var Is=_s[Ss+0],Bs=_s[Ss+1],Ps=_s[Ss+2],Ls=_s[Ss+3],Rs=Ms[Cs+0],Os=Ms[Cs+1],Fs=Ms[Cs+2],Vs=Ms[Cs+3];if(Ls!==Vs||Is!==Rs||Bs!==Os||Ps!==Fs){var ks=1-Ts,Ns=Is*Rs+Bs*Os+Ps*Fs+Ls*Vs,Ds=Ns>=0?1:-1,$s=1-Ns*Ns;if($s>Number.EPSILON){var Gs=Math.sqrt($s),Us=Math.atan2(Gs,Ns*Ds);ks=Math.sin(ks*Us)/Gs,Ts=Math.sin(Ts*Us)/Gs}var Hs=Ts*Ds;if(Is=Is*ks+Rs*Hs,Bs=Bs*ks+Os*Hs,Ps=Ps*ks+Fs*Hs,Ls=Ls*ks+Vs*Hs,ks===1-Ts){var zs=1/Math.sqrt(Is*Is+Bs*Bs+Ps*Ps+Ls*Ls);Is*=zs,Bs*=zs,Ps*=zs,Ls*=zs}}ca[ga]=Is,ca[ga+1]=Bs,ca[ga+2]=Ps,ca[ga+3]=Ls},multiplyQuaternionsFlat:function(ca,ga,_s,Ss,Ms,Cs){var Ts=_s[Ss],Is=_s[Ss+1],Bs=_s[Ss+2],Ps=_s[Ss+3],Ls=Ms[Cs],Rs=Ms[Cs+1],Os=Ms[Cs+2],Fs=Ms[Cs+3];return ca[ga]=Ts*Fs+Ps*Ls+Is*Os-Bs*Rs,ca[ga+1]=Is*Fs+Ps*Rs+Bs*Ls-Ts*Os,ca[ga+2]=Bs*Fs+Ps*Os+Ts*Rs-Is*Ls,ca[ga+3]=Ps*Fs-Ts*Ls-Is*Rs-Bs*Os,ca}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(ca){this._x=ca,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(ca){this._y=ca,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(ca){this._z=ca,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(ca){this._w=ca,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(ca,ga,_s,Ss){return this._x=ca,this._y=ga,this._z=_s,this._w=Ss,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(ca){return this._x=ca.x,this._y=ca.y,this._z=ca.z,this._w=ca.w,this._onChangeCallback(),this},setFromEuler:function(ca,ga){if(!(ca&&ca.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var _s=ca._x,Ss=ca._y,Ms=ca._z,Cs=ca.order,Ts=Math.cos,Is=Math.sin,Bs=Ts(_s/2),Ps=Ts(Ss/2),Ls=Ts(Ms/2),Rs=Is(_s/2),Os=Is(Ss/2),Fs=Is(Ms/2);switch(Cs){case"XYZ":this._x=Rs*Ps*Ls+Bs*Os*Fs,this._y=Bs*Os*Ls-Rs*Ps*Fs,this._z=Bs*Ps*Fs+Rs*Os*Ls,this._w=Bs*Ps*Ls-Rs*Os*Fs;break;case"YXZ":this._x=Rs*Ps*Ls+Bs*Os*Fs,this._y=Bs*Os*Ls-Rs*Ps*Fs,this._z=Bs*Ps*Fs-Rs*Os*Ls,this._w=Bs*Ps*Ls+Rs*Os*Fs;break;case"ZXY":this._x=Rs*Ps*Ls-Bs*Os*Fs,this._y=Bs*Os*Ls+Rs*Ps*Fs,this._z=Bs*Ps*Fs+Rs*Os*Ls,this._w=Bs*Ps*Ls-Rs*Os*Fs;break;case"ZYX":this._x=Rs*Ps*Ls-Bs*Os*Fs,this._y=Bs*Os*Ls+Rs*Ps*Fs,this._z=Bs*Ps*Fs-Rs*Os*Ls,this._w=Bs*Ps*Ls+Rs*Os*Fs;break;case"YZX":this._x=Rs*Ps*Ls+Bs*Os*Fs,this._y=Bs*Os*Ls+Rs*Ps*Fs,this._z=Bs*Ps*Fs-Rs*Os*Ls,this._w=Bs*Ps*Ls-Rs*Os*Fs;break;case"XZY":this._x=Rs*Ps*Ls-Bs*Os*Fs,this._y=Bs*Os*Ls-Rs*Ps*Fs,this._z=Bs*Ps*Fs+Rs*Os*Ls,this._w=Bs*Ps*Ls+Rs*Os*Fs;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Cs)}return ga!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(ca,ga){var _s=ga/2,Ss=Math.sin(_s);return this._x=ca.x*Ss,this._y=ca.y*Ss,this._z=ca.z*Ss,this._w=Math.cos(_s),this._onChangeCallback(),this},setFromRotationMatrix:function(ca){var ga=ca.elements,_s=ga[0],Ss=ga[4],Ms=ga[8],Cs=ga[1],Ts=ga[5],Is=ga[9],Bs=ga[2],Ps=ga[6],Ls=ga[10],Rs=_s+Ts+Ls,Os;return Rs>0?(Os=.5/Math.sqrt(Rs+1),this._w=.25/Os,this._x=(Ps-Is)*Os,this._y=(Ms-Bs)*Os,this._z=(Cs-Ss)*Os):_s>Ts&&_s>Ls?(Os=2*Math.sqrt(1+_s-Ts-Ls),this._w=(Ps-Is)/Os,this._x=.25*Os,this._y=(Ss+Cs)/Os,this._z=(Ms+Bs)/Os):Ts>Ls?(Os=2*Math.sqrt(1+Ts-_s-Ls),this._w=(Ms-Bs)/Os,this._x=(Ss+Cs)/Os,this._y=.25*Os,this._z=(Is+Ps)/Os):(Os=2*Math.sqrt(1+Ls-_s-Ts),this._w=(Cs-Ss)/Os,this._x=(Ms+Bs)/Os,this._y=(Is+Ps)/Os,this._z=.25*Os),this._onChangeCallback(),this},setFromUnitVectors:function(ca,ga){var _s=1e-6,Ss=ca.dot(ga)+1;return Ss<_s?(Ss=0,Math.abs(ca.x)>Math.abs(ca.z)?(this._x=-ca.y,this._y=ca.x,this._z=0,this._w=Ss):(this._x=0,this._y=-ca.z,this._z=ca.y,this._w=Ss)):(this._x=ca.y*ga.z-ca.z*ga.y,this._y=ca.z*ga.x-ca.x*ga.z,this._z=ca.x*ga.y-ca.y*ga.x,this._w=Ss),this.normalize()},angleTo:function(ca){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(ca),-1,1)))},rotateTowards:function(ca,ga){var _s=this.angleTo(ca);if(_s===0)return this;var Ss=Math.min(1,ga/_s);return this.slerp(ca,Ss),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(ca){return this._x*ca._x+this._y*ca._y+this._z*ca._z+this._w*ca._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var ca=this.length();return ca===0?(this._x=0,this._y=0,this._z=0,this._w=1):(ca=1/ca,this._x=this._x*ca,this._y=this._y*ca,this._z=this._z*ca,this._w=this._w*ca),this._onChangeCallback(),this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(ca,ga)):this.multiplyQuaternions(this,ca)},premultiply:function(ca){return this.multiplyQuaternions(ca,this)},multiplyQuaternions:function(ca,ga){var _s=ca._x,Ss=ca._y,Ms=ca._z,Cs=ca._w,Ts=ga._x,Is=ga._y,Bs=ga._z,Ps=ga._w;return this._x=_s*Ps+Cs*Ts+Ss*Bs-Ms*Is,this._y=Ss*Ps+Cs*Is+Ms*Ts-_s*Bs,this._z=Ms*Ps+Cs*Bs+_s*Is-Ss*Ts,this._w=Cs*Ps-_s*Ts-Ss*Is-Ms*Bs,this._onChangeCallback(),this},slerp:function(ca,ga){if(ga===0)return this;if(ga===1)return this.copy(ca);var _s=this._x,Ss=this._y,Ms=this._z,Cs=this._w,Ts=Cs*ca._w+_s*ca._x+Ss*ca._y+Ms*ca._z;if(Ts<0?(this._w=-ca._w,this._x=-ca._x,this._y=-ca._y,this._z=-ca._z,Ts=-Ts):this.copy(ca),Ts>=1)return this._w=Cs,this._x=_s,this._y=Ss,this._z=Ms,this;var Is=1-Ts*Ts;if(Is<=Number.EPSILON){var Bs=1-ga;return this._w=Bs*Cs+ga*this._w,this._x=Bs*_s+ga*this._x,this._y=Bs*Ss+ga*this._y,this._z=Bs*Ms+ga*this._z,this.normalize(),this._onChangeCallback(),this}var Ps=Math.sqrt(Is),Ls=Math.atan2(Ps,Ts),Rs=Math.sin((1-ga)*Ls)/Ps,Os=Math.sin(ga*Ls)/Ps;return this._w=Cs*Rs+this._w*Os,this._x=_s*Rs+this._x*Os,this._y=Ss*Rs+this._y*Os,this._z=Ms*Rs+this._z*Os,this._onChangeCallback(),this},equals:function(ca){return ca._x===this._x&&ca._y===this._y&&ca._z===this._z&&ca._w===this._w},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this._x=ca[ga],this._y=ca[ga+1],this._z=ca[ga+2],this._w=ca[ga+3],this._onChangeCallback(),this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this._x,ca[ga+1]=this._y,ca[ga+2]=this._z,ca[ga+3]=this._w,ca},fromBufferAttribute:function(ca,ga){return this._x=ca.getX(ga),this._y=ca.getY(ga),this._z=ca.getZ(ga),this._w=ca.getW(ga),this},_onChange:function(ca){return this._onChangeCallback=ca,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(ca,ga,_s){this.x=ca||0,this.y=ga||0,this.z=_s||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(ca,ga,_s){return this.x=ca,this.y=ga,this.z=_s,this},setScalar:function(ca){return this.x=ca,this.y=ca,this.z=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setZ:function(ca){return this.z=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;case 2:this.z=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this.z=ca.z,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this.z+=ca.z,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this.z+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this.z=ca.z+ga.z,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this.z+=ca.z*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this.z-=ca.z,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this.z-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this.z=ca.z-ga.z,this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(ca,ga)):(this.x*=ca.x,this.y*=ca.y,this.z*=ca.z,this)},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this.z*=ca,this},multiplyVectors:function(ca,ga){return this.x=ca.x*ga.x,this.y=ca.y*ga.y,this.z=ca.z*ga.z,this},applyEuler:function(ca){return ca&&ca.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(ca))},applyAxisAngle:function(ca,ga){return this.applyQuaternion(_quaternion.setFromAxisAngle(ca,ga))},applyMatrix3:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.elements;return this.x=Ms[0]*ga+Ms[3]*_s+Ms[6]*Ss,this.y=Ms[1]*ga+Ms[4]*_s+Ms[7]*Ss,this.z=Ms[2]*ga+Ms[5]*_s+Ms[8]*Ss,this},applyNormalMatrix:function(ca){return this.applyMatrix3(ca).normalize()},applyMatrix4:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.elements,Cs=1/(Ms[3]*ga+Ms[7]*_s+Ms[11]*Ss+Ms[15]);return this.x=(Ms[0]*ga+Ms[4]*_s+Ms[8]*Ss+Ms[12])*Cs,this.y=(Ms[1]*ga+Ms[5]*_s+Ms[9]*Ss+Ms[13])*Cs,this.z=(Ms[2]*ga+Ms[6]*_s+Ms[10]*Ss+Ms[14])*Cs,this},applyQuaternion:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.x,Cs=ca.y,Ts=ca.z,Is=ca.w,Bs=Is*ga+Cs*Ss-Ts*_s,Ps=Is*_s+Ts*ga-Ms*Ss,Ls=Is*Ss+Ms*_s-Cs*ga,Rs=-Ms*ga-Cs*_s-Ts*Ss;return this.x=Bs*Is+Rs*-Ms+Ps*-Ts-Ls*-Cs,this.y=Ps*Is+Rs*-Cs+Ls*-Ms-Bs*-Ts,this.z=Ls*Is+Rs*-Ts+Bs*-Cs-Ps*-Ms,this},project:function(ca){return this.applyMatrix4(ca.matrixWorldInverse).applyMatrix4(ca.projectionMatrix)},unproject:function(ca){return this.applyMatrix4(ca.projectionMatrixInverse).applyMatrix4(ca.matrixWorld)},transformDirection:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.elements;return this.x=Ms[0]*ga+Ms[4]*_s+Ms[8]*Ss,this.y=Ms[1]*ga+Ms[5]*_s+Ms[9]*Ss,this.z=Ms[2]*ga+Ms[6]*_s+Ms[10]*Ss,this.normalize()},divide:function(ca){return this.x/=ca.x,this.y/=ca.y,this.z/=ca.z,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this.z=Math.min(this.z,ca.z),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this.z=Math.max(this.z,ca.z),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this.z=Math.max(ca.z,Math.min(ga.z,this.z)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this.z=Math.max(ca,Math.min(ga,this.z)),this},clampLength:function(ca,ga){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(ca,Math.min(ga,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(ca){return this.x*ca.x+this.y*ca.y+this.z*ca.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this.z+=(ca.z-this.z)*ga,this},lerpVectors:function(ca,ga,_s){return this.x=ca.x+(ga.x-ca.x)*_s,this.y=ca.y+(ga.y-ca.y)*_s,this.z=ca.z+(ga.z-ca.z)*_s,this},cross:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(ca,ga)):this.crossVectors(this,ca)},crossVectors:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z,Cs=ga.x,Ts=ga.y,Is=ga.z;return this.x=Ss*Is-Ms*Ts,this.y=Ms*Cs-_s*Is,this.z=_s*Ts-Ss*Cs,this},projectOnVector:function(ca){var ga=ca.lengthSq();if(ga===0)return this.set(0,0,0);var _s=ca.dot(this)/ga;return this.copy(ca).multiplyScalar(_s)},projectOnPlane:function(ca){return _vector.copy(this).projectOnVector(ca),this.sub(_vector)},reflect:function(ca){return this.sub(_vector.copy(ca).multiplyScalar(2*this.dot(ca)))},angleTo:function(ca){var ga=Math.sqrt(this.lengthSq()*ca.lengthSq());if(ga===0)return Math.PI/2;var _s=this.dot(ca)/ga;return Math.acos(MathUtils.clamp(_s,-1,1))},distanceTo:function(ca){return Math.sqrt(this.distanceToSquared(ca))},distanceToSquared:function(ca){var ga=this.x-ca.x,_s=this.y-ca.y,Ss=this.z-ca.z;return ga*ga+_s*_s+Ss*Ss},manhattanDistanceTo:function(ca){return Math.abs(this.x-ca.x)+Math.abs(this.y-ca.y)+Math.abs(this.z-ca.z)},setFromSpherical:function(ca){return this.setFromSphericalCoords(ca.radius,ca.phi,ca.theta)},setFromSphericalCoords:function(ca,ga,_s){var Ss=Math.sin(ga)*ca;return this.x=Ss*Math.sin(_s),this.y=Math.cos(ga)*ca,this.z=Ss*Math.cos(_s),this},setFromCylindrical:function(ca){return this.setFromCylindricalCoords(ca.radius,ca.theta,ca.y)},setFromCylindricalCoords:function(ca,ga,_s){return this.x=ca*Math.sin(ga),this.y=_s,this.z=ca*Math.cos(ga),this},setFromMatrixPosition:function(ca){var ga=ca.elements;return this.x=ga[12],this.y=ga[13],this.z=ga[14],this},setFromMatrixScale:function(ca){var ga=this.setFromMatrixColumn(ca,0).length(),_s=this.setFromMatrixColumn(ca,1).length(),Ss=this.setFromMatrixColumn(ca,2).length();return this.x=ga,this.y=_s,this.z=Ss,this},setFromMatrixColumn:function(ca,ga){return this.fromArray(ca.elements,ga*4)},setFromMatrix3Column:function(ca,ga){return this.fromArray(ca.elements,ga*3)},equals:function(ca){return ca.x===this.x&&ca.y===this.y&&ca.z===this.z},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this.z=ca[ga+2],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca[ga+2]=this.z,ca},fromBufferAttribute:function(ca,ga,_s){return _s!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this.z=ca.getZ(ga),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs,Os,Fs,Vs,ks){var Ns=this.elements;return Ns[0]=ca,Ns[4]=ga,Ns[8]=_s,Ns[12]=Ss,Ns[1]=Ms,Ns[5]=Cs,Ns[9]=Ts,Ns[13]=Is,Ns[2]=Bs,Ns[6]=Ps,Ns[10]=Ls,Ns[14]=Rs,Ns[3]=Os,Ns[7]=Fs,Ns[11]=Vs,Ns[15]=ks,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(ca){var ga=this.elements,_s=ca.elements;return ga[0]=_s[0],ga[1]=_s[1],ga[2]=_s[2],ga[3]=_s[3],ga[4]=_s[4],ga[5]=_s[5],ga[6]=_s[6],ga[7]=_s[7],ga[8]=_s[8],ga[9]=_s[9],ga[10]=_s[10],ga[11]=_s[11],ga[12]=_s[12],ga[13]=_s[13],ga[14]=_s[14],ga[15]=_s[15],this},copyPosition:function(ca){var ga=this.elements,_s=ca.elements;return ga[12]=_s[12],ga[13]=_s[13],ga[14]=_s[14],this},extractBasis:function(ca,ga,_s){return ca.setFromMatrixColumn(this,0),ga.setFromMatrixColumn(this,1),_s.setFromMatrixColumn(this,2),this},makeBasis:function(ca,ga,_s){return this.set(ca.x,ga.x,_s.x,0,ca.y,ga.y,_s.y,0,ca.z,ga.z,_s.z,0,0,0,0,1),this},extractRotation:function(ca){var ga=this.elements,_s=ca.elements,Ss=1/_v1.setFromMatrixColumn(ca,0).length(),Ms=1/_v1.setFromMatrixColumn(ca,1).length(),Cs=1/_v1.setFromMatrixColumn(ca,2).length();return ga[0]=_s[0]*Ss,ga[1]=_s[1]*Ss,ga[2]=_s[2]*Ss,ga[3]=0,ga[4]=_s[4]*Ms,ga[5]=_s[5]*Ms,ga[6]=_s[6]*Ms,ga[7]=0,ga[8]=_s[8]*Cs,ga[9]=_s[9]*Cs,ga[10]=_s[10]*Cs,ga[11]=0,ga[12]=0,ga[13]=0,ga[14]=0,ga[15]=1,this},makeRotationFromEuler:function(ca){ca&&ca.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var ga=this.elements,_s=ca.x,Ss=ca.y,Ms=ca.z,Cs=Math.cos(_s),Ts=Math.sin(_s),Is=Math.cos(Ss),Bs=Math.sin(Ss),Ps=Math.cos(Ms),Ls=Math.sin(Ms);if(ca.order==="XYZ"){var Rs=Cs*Ps,Os=Cs*Ls,Fs=Ts*Ps,Vs=Ts*Ls;ga[0]=Is*Ps,ga[4]=-Is*Ls,ga[8]=Bs,ga[1]=Os+Fs*Bs,ga[5]=Rs-Vs*Bs,ga[9]=-Ts*Is,ga[2]=Vs-Rs*Bs,ga[6]=Fs+Os*Bs,ga[10]=Cs*Is}else if(ca.order==="YXZ"){var ks=Is*Ps,Ns=Is*Ls,Ds=Bs*Ps,$s=Bs*Ls;ga[0]=ks+$s*Ts,ga[4]=Ds*Ts-Ns,ga[8]=Cs*Bs,ga[1]=Cs*Ls,ga[5]=Cs*Ps,ga[9]=-Ts,ga[2]=Ns*Ts-Ds,ga[6]=$s+ks*Ts,ga[10]=Cs*Is}else if(ca.order==="ZXY"){var ks=Is*Ps,Ns=Is*Ls,Ds=Bs*Ps,$s=Bs*Ls;ga[0]=ks-$s*Ts,ga[4]=-Cs*Ls,ga[8]=Ds+Ns*Ts,ga[1]=Ns+Ds*Ts,ga[5]=Cs*Ps,ga[9]=$s-ks*Ts,ga[2]=-Cs*Bs,ga[6]=Ts,ga[10]=Cs*Is}else if(ca.order==="ZYX"){var Rs=Cs*Ps,Os=Cs*Ls,Fs=Ts*Ps,Vs=Ts*Ls;ga[0]=Is*Ps,ga[4]=Fs*Bs-Os,ga[8]=Rs*Bs+Vs,ga[1]=Is*Ls,ga[5]=Vs*Bs+Rs,ga[9]=Os*Bs-Fs,ga[2]=-Bs,ga[6]=Ts*Is,ga[10]=Cs*Is}else if(ca.order==="YZX"){var Gs=Cs*Is,Us=Cs*Bs,Hs=Ts*Is,zs=Ts*Bs;ga[0]=Is*Ps,ga[4]=zs-Gs*Ls,ga[8]=Hs*Ls+Us,ga[1]=Ls,ga[5]=Cs*Ps,ga[9]=-Ts*Ps,ga[2]=-Bs*Ps,ga[6]=Us*Ls+Hs,ga[10]=Gs-zs*Ls}else if(ca.order==="XZY"){var Gs=Cs*Is,Us=Cs*Bs,Hs=Ts*Is,zs=Ts*Bs;ga[0]=Is*Ps,ga[4]=-Ls,ga[8]=Bs*Ps,ga[1]=Gs*Ls+zs,ga[5]=Cs*Ps,ga[9]=Us*Ls-Hs,ga[2]=Hs*Ls-Us,ga[6]=Ts*Ps,ga[10]=zs*Ls+Gs}return ga[3]=0,ga[7]=0,ga[11]=0,ga[12]=0,ga[13]=0,ga[14]=0,ga[15]=1,this},makeRotationFromQuaternion:function(ca){return this.compose(_zero,ca,_one)},lookAt:function(ca,ga,_s){var Ss=this.elements;return _z.subVectors(ca,ga),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(_s,_z),_x.lengthSq()===0&&(Math.abs(_s.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(_s,_z)),_x.normalize(),_y.crossVectors(_z,_x),Ss[0]=_x.x,Ss[4]=_y.x,Ss[8]=_z.x,Ss[1]=_x.y,Ss[5]=_y.y,Ss[9]=_z.y,Ss[2]=_x.z,Ss[6]=_y.z,Ss[10]=_z.z,this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(ca,ga)):this.multiplyMatrices(this,ca)},premultiply:function(ca){return this.multiplyMatrices(ca,this)},multiplyMatrices:function(ca,ga){var _s=ca.elements,Ss=ga.elements,Ms=this.elements,Cs=_s[0],Ts=_s[4],Is=_s[8],Bs=_s[12],Ps=_s[1],Ls=_s[5],Rs=_s[9],Os=_s[13],Fs=_s[2],Vs=_s[6],ks=_s[10],Ns=_s[14],Ds=_s[3],$s=_s[7],Gs=_s[11],Us=_s[15],Hs=Ss[0],zs=Ss[4],js=Ss[8],Ws=Ss[12],Qs=Ss[1],Zs=Ss[5],Xs=Ss[9],eu=Ss[13],Ys=Ss[2],Js=Ss[6],qs=Ss[10],ru=Ss[14],tu=Ss[3],nu=Ss[7],uu=Ss[11],fu=Ss[15];return Ms[0]=Cs*Hs+Ts*Qs+Is*Ys+Bs*tu,Ms[4]=Cs*zs+Ts*Zs+Is*Js+Bs*nu,Ms[8]=Cs*js+Ts*Xs+Is*qs+Bs*uu,Ms[12]=Cs*Ws+Ts*eu+Is*ru+Bs*fu,Ms[1]=Ps*Hs+Ls*Qs+Rs*Ys+Os*tu,Ms[5]=Ps*zs+Ls*Zs+Rs*Js+Os*nu,Ms[9]=Ps*js+Ls*Xs+Rs*qs+Os*uu,Ms[13]=Ps*Ws+Ls*eu+Rs*ru+Os*fu,Ms[2]=Fs*Hs+Vs*Qs+ks*Ys+Ns*tu,Ms[6]=Fs*zs+Vs*Zs+ks*Js+Ns*nu,Ms[10]=Fs*js+Vs*Xs+ks*qs+Ns*uu,Ms[14]=Fs*Ws+Vs*eu+ks*ru+Ns*fu,Ms[3]=Ds*Hs+$s*Qs+Gs*Ys+Us*tu,Ms[7]=Ds*zs+$s*Zs+Gs*Js+Us*nu,Ms[11]=Ds*js+$s*Xs+Gs*qs+Us*uu,Ms[15]=Ds*Ws+$s*eu+Gs*ru+Us*fu,this},multiplyScalar:function(ca){var ga=this.elements;return ga[0]*=ca,ga[4]*=ca,ga[8]*=ca,ga[12]*=ca,ga[1]*=ca,ga[5]*=ca,ga[9]*=ca,ga[13]*=ca,ga[2]*=ca,ga[6]*=ca,ga[10]*=ca,ga[14]*=ca,ga[3]*=ca,ga[7]*=ca,ga[11]*=ca,ga[15]*=ca,this},determinant:function(){var ca=this.elements,ga=ca[0],_s=ca[4],Ss=ca[8],Ms=ca[12],Cs=ca[1],Ts=ca[5],Is=ca[9],Bs=ca[13],Ps=ca[2],Ls=ca[6],Rs=ca[10],Os=ca[14],Fs=ca[3],Vs=ca[7],ks=ca[11],Ns=ca[15];return Fs*(+Ms*Is*Ls-Ss*Bs*Ls-Ms*Ts*Rs+_s*Bs*Rs+Ss*Ts*Os-_s*Is*Os)+Vs*(+ga*Is*Os-ga*Bs*Rs+Ms*Cs*Rs-Ss*Cs*Os+Ss*Bs*Ps-Ms*Is*Ps)+ks*(+ga*Bs*Ls-ga*Ts*Os-Ms*Cs*Ls+_s*Cs*Os+Ms*Ts*Ps-_s*Bs*Ps)+Ns*(-Ss*Ts*Ps-ga*Is*Ls+ga*Ts*Rs+Ss*Cs*Ls-_s*Cs*Rs+_s*Is*Ps)},transpose:function(){var ca=this.elements,ga;return ga=ca[1],ca[1]=ca[4],ca[4]=ga,ga=ca[2],ca[2]=ca[8],ca[8]=ga,ga=ca[6],ca[6]=ca[9],ca[9]=ga,ga=ca[3],ca[3]=ca[12],ca[12]=ga,ga=ca[7],ca[7]=ca[13],ca[13]=ga,ga=ca[11],ca[11]=ca[14],ca[14]=ga,this},setPosition:function(ca,ga,_s){var Ss=this.elements;return ca.isVector3?(Ss[12]=ca.x,Ss[13]=ca.y,Ss[14]=ca.z):(Ss[12]=ca,Ss[13]=ga,Ss[14]=_s),this},getInverse:function(ca,ga){ga!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var _s=this.elements,Ss=ca.elements,Ms=Ss[0],Cs=Ss[1],Ts=Ss[2],Is=Ss[3],Bs=Ss[4],Ps=Ss[5],Ls=Ss[6],Rs=Ss[7],Os=Ss[8],Fs=Ss[9],Vs=Ss[10],ks=Ss[11],Ns=Ss[12],Ds=Ss[13],$s=Ss[14],Gs=Ss[15],Us=Fs*$s*Rs-Ds*Vs*Rs+Ds*Ls*ks-Ps*$s*ks-Fs*Ls*Gs+Ps*Vs*Gs,Hs=Ns*Vs*Rs-Os*$s*Rs-Ns*Ls*ks+Bs*$s*ks+Os*Ls*Gs-Bs*Vs*Gs,zs=Os*Ds*Rs-Ns*Fs*Rs+Ns*Ps*ks-Bs*Ds*ks-Os*Ps*Gs+Bs*Fs*Gs,js=Ns*Fs*Ls-Os*Ds*Ls-Ns*Ps*Vs+Bs*Ds*Vs+Os*Ps*$s-Bs*Fs*$s,Ws=Ms*Us+Cs*Hs+Ts*zs+Is*js;if(Ws===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var Qs=1/Ws;return _s[0]=Us*Qs,_s[1]=(Ds*Vs*Is-Fs*$s*Is-Ds*Ts*ks+Cs*$s*ks+Fs*Ts*Gs-Cs*Vs*Gs)*Qs,_s[2]=(Ps*$s*Is-Ds*Ls*Is+Ds*Ts*Rs-Cs*$s*Rs-Ps*Ts*Gs+Cs*Ls*Gs)*Qs,_s[3]=(Fs*Ls*Is-Ps*Vs*Is-Fs*Ts*Rs+Cs*Vs*Rs+Ps*Ts*ks-Cs*Ls*ks)*Qs,_s[4]=Hs*Qs,_s[5]=(Os*$s*Is-Ns*Vs*Is+Ns*Ts*ks-Ms*$s*ks-Os*Ts*Gs+Ms*Vs*Gs)*Qs,_s[6]=(Ns*Ls*Is-Bs*$s*Is-Ns*Ts*Rs+Ms*$s*Rs+Bs*Ts*Gs-Ms*Ls*Gs)*Qs,_s[7]=(Bs*Vs*Is-Os*Ls*Is+Os*Ts*Rs-Ms*Vs*Rs-Bs*Ts*ks+Ms*Ls*ks)*Qs,_s[8]=zs*Qs,_s[9]=(Ns*Fs*Is-Os*Ds*Is-Ns*Cs*ks+Ms*Ds*ks+Os*Cs*Gs-Ms*Fs*Gs)*Qs,_s[10]=(Bs*Ds*Is-Ns*Ps*Is+Ns*Cs*Rs-Ms*Ds*Rs-Bs*Cs*Gs+Ms*Ps*Gs)*Qs,_s[11]=(Os*Ps*Is-Bs*Fs*Is-Os*Cs*Rs+Ms*Fs*Rs+Bs*Cs*ks-Ms*Ps*ks)*Qs,_s[12]=js*Qs,_s[13]=(Os*Ds*Ts-Ns*Fs*Ts+Ns*Cs*Vs-Ms*Ds*Vs-Os*Cs*$s+Ms*Fs*$s)*Qs,_s[14]=(Ns*Ps*Ts-Bs*Ds*Ts-Ns*Cs*Ls+Ms*Ds*Ls+Bs*Cs*$s-Ms*Ps*$s)*Qs,_s[15]=(Bs*Fs*Ts-Os*Ps*Ts+Os*Cs*Ls-Ms*Fs*Ls-Bs*Cs*Vs+Ms*Ps*Vs)*Qs,this},scale:function(ca){var ga=this.elements,_s=ca.x,Ss=ca.y,Ms=ca.z;return ga[0]*=_s,ga[4]*=Ss,ga[8]*=Ms,ga[1]*=_s,ga[5]*=Ss,ga[9]*=Ms,ga[2]*=_s,ga[6]*=Ss,ga[10]*=Ms,ga[3]*=_s,ga[7]*=Ss,ga[11]*=Ms,this},getMaxScaleOnAxis:function(){var ca=this.elements,ga=ca[0]*ca[0]+ca[1]*ca[1]+ca[2]*ca[2],_s=ca[4]*ca[4]+ca[5]*ca[5]+ca[6]*ca[6],Ss=ca[8]*ca[8]+ca[9]*ca[9]+ca[10]*ca[10];return Math.sqrt(Math.max(ga,_s,Ss))},makeTranslation:function(ca,ga,_s){return this.set(1,0,0,ca,0,1,0,ga,0,0,1,_s,0,0,0,1),this},makeRotationX:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca);return this.set(1,0,0,0,0,ga,-_s,0,0,_s,ga,0,0,0,0,1),this},makeRotationY:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca);return this.set(ga,0,_s,0,0,1,0,0,-_s,0,ga,0,0,0,0,1),this},makeRotationZ:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca);return this.set(ga,-_s,0,0,_s,ga,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(ca,ga){var _s=Math.cos(ga),Ss=Math.sin(ga),Ms=1-_s,Cs=ca.x,Ts=ca.y,Is=ca.z,Bs=Ms*Cs,Ps=Ms*Ts;return this.set(Bs*Cs+_s,Bs*Ts-Ss*Is,Bs*Is+Ss*Ts,0,Bs*Ts+Ss*Is,Ps*Ts+_s,Ps*Is-Ss*Cs,0,Bs*Is-Ss*Ts,Ps*Is+Ss*Cs,Ms*Is*Is+_s,0,0,0,0,1),this},makeScale:function(ca,ga,_s){return this.set(ca,0,0,0,0,ga,0,0,0,0,_s,0,0,0,0,1),this},makeShear:function(ca,ga,_s){return this.set(1,ga,_s,0,ca,1,_s,0,ca,ga,1,0,0,0,0,1),this},compose:function(ca,ga,_s){var Ss=this.elements,Ms=ga._x,Cs=ga._y,Ts=ga._z,Is=ga._w,Bs=Ms+Ms,Ps=Cs+Cs,Ls=Ts+Ts,Rs=Ms*Bs,Os=Ms*Ps,Fs=Ms*Ls,Vs=Cs*Ps,ks=Cs*Ls,Ns=Ts*Ls,Ds=Is*Bs,$s=Is*Ps,Gs=Is*Ls,Us=_s.x,Hs=_s.y,zs=_s.z;return Ss[0]=(1-(Vs+Ns))*Us,Ss[1]=(Os+Gs)*Us,Ss[2]=(Fs-$s)*Us,Ss[3]=0,Ss[4]=(Os-Gs)*Hs,Ss[5]=(1-(Rs+Ns))*Hs,Ss[6]=(ks+Ds)*Hs,Ss[7]=0,Ss[8]=(Fs+$s)*zs,Ss[9]=(ks-Ds)*zs,Ss[10]=(1-(Rs+Vs))*zs,Ss[11]=0,Ss[12]=ca.x,Ss[13]=ca.y,Ss[14]=ca.z,Ss[15]=1,this},decompose:function(ca,ga,_s){var Ss=this.elements,Ms=_v1.set(Ss[0],Ss[1],Ss[2]).length(),Cs=_v1.set(Ss[4],Ss[5],Ss[6]).length(),Ts=_v1.set(Ss[8],Ss[9],Ss[10]).length(),Is=this.determinant();Is<0&&(Ms=-Ms),ca.x=Ss[12],ca.y=Ss[13],ca.z=Ss[14],_m1.copy(this);var Bs=1/Ms,Ps=1/Cs,Ls=1/Ts;return _m1.elements[0]*=Bs,_m1.elements[1]*=Bs,_m1.elements[2]*=Bs,_m1.elements[4]*=Ps,_m1.elements[5]*=Ps,_m1.elements[6]*=Ps,_m1.elements[8]*=Ls,_m1.elements[9]*=Ls,_m1.elements[10]*=Ls,ga.setFromRotationMatrix(_m1),_s.x=Ms,_s.y=Cs,_s.z=Ts,this},makePerspective:function(ca,ga,_s,Ss,Ms,Cs){Cs===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Ts=this.elements,Is=2*Ms/(ga-ca),Bs=2*Ms/(_s-Ss),Ps=(ga+ca)/(ga-ca),Ls=(_s+Ss)/(_s-Ss),Rs=-(Cs+Ms)/(Cs-Ms),Os=-2*Cs*Ms/(Cs-Ms);return Ts[0]=Is,Ts[4]=0,Ts[8]=Ps,Ts[12]=0,Ts[1]=0,Ts[5]=Bs,Ts[9]=Ls,Ts[13]=0,Ts[2]=0,Ts[6]=0,Ts[10]=Rs,Ts[14]=Os,Ts[3]=0,Ts[7]=0,Ts[11]=-1,Ts[15]=0,this},makeOrthographic:function(ca,ga,_s,Ss,Ms,Cs){var Ts=this.elements,Is=1/(ga-ca),Bs=1/(_s-Ss),Ps=1/(Cs-Ms),Ls=(ga+ca)*Is,Rs=(_s+Ss)*Bs,Os=(Cs+Ms)*Ps;return Ts[0]=2*Is,Ts[4]=0,Ts[8]=0,Ts[12]=-Ls,Ts[1]=0,Ts[5]=2*Bs,Ts[9]=0,Ts[13]=-Rs,Ts[2]=0,Ts[6]=0,Ts[10]=-2*Ps,Ts[14]=-Os,Ts[3]=0,Ts[7]=0,Ts[11]=0,Ts[15]=1,this},equals:function(ca){for(var ga=this.elements,_s=ca.elements,Ss=0;Ss<16;Ss++)if(ga[Ss]!==_s[Ss])return!1;return!0},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var _s=0;_s<16;_s++)this.elements[_s]=ca[_s+ga];return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);var _s=this.elements;return ca[ga]=_s[0],ca[ga+1]=_s[1],ca[ga+2]=_s[2],ca[ga+3]=_s[3],ca[ga+4]=_s[4],ca[ga+5]=_s[5],ca[ga+6]=_s[6],ca[ga+7]=_s[7],ca[ga+8]=_s[8],ca[ga+9]=_s[9],ca[ga+10]=_s[10],ca[ga+11]=_s[11],ca[ga+12]=_s[12],ca[ga+13]=_s[13],ca[ga+14]=_s[14],ca[ga+15]=_s[15],ca}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(ca,ga,_s,Ss){this._x=ca||0,this._y=ga||0,this._z=_s||0,this._order=Ss||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(ca){this._x=ca,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(ca){this._y=ca,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(ca){this._z=ca,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(ca){this._order=ca,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(ca,ga,_s,Ss){return this._x=ca,this._y=ga,this._z=_s,this._order=Ss||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(ca){return this._x=ca._x,this._y=ca._y,this._z=ca._z,this._order=ca._order,this._onChangeCallback(),this},setFromRotationMatrix:function(ca,ga,_s){var Ss=MathUtils.clamp,Ms=ca.elements,Cs=Ms[0],Ts=Ms[4],Is=Ms[8],Bs=Ms[1],Ps=Ms[5],Ls=Ms[9],Rs=Ms[2],Os=Ms[6],Fs=Ms[10];switch(ga=ga||this._order,ga){case"XYZ":this._y=Math.asin(Ss(Is,-1,1)),Math.abs(Is)<.9999999?(this._x=Math.atan2(-Ls,Fs),this._z=Math.atan2(-Ts,Cs)):(this._x=Math.atan2(Os,Ps),this._z=0);break;case"YXZ":this._x=Math.asin(-Ss(Ls,-1,1)),Math.abs(Ls)<.9999999?(this._y=Math.atan2(Is,Fs),this._z=Math.atan2(Bs,Ps)):(this._y=Math.atan2(-Rs,Cs),this._z=0);break;case"ZXY":this._x=Math.asin(Ss(Os,-1,1)),Math.abs(Os)<.9999999?(this._y=Math.atan2(-Rs,Fs),this._z=Math.atan2(-Ts,Ps)):(this._y=0,this._z=Math.atan2(Bs,Cs));break;case"ZYX":this._y=Math.asin(-Ss(Rs,-1,1)),Math.abs(Rs)<.9999999?(this._x=Math.atan2(Os,Fs),this._z=Math.atan2(Bs,Cs)):(this._x=0,this._z=Math.atan2(-Ts,Ps));break;case"YZX":this._z=Math.asin(Ss(Bs,-1,1)),Math.abs(Bs)<.9999999?(this._x=Math.atan2(-Ls,Ps),this._y=Math.atan2(-Rs,Cs)):(this._x=0,this._y=Math.atan2(Is,Fs));break;case"XZY":this._z=Math.asin(-Ss(Ts,-1,1)),Math.abs(Ts)<.9999999?(this._x=Math.atan2(Os,Ps),this._y=Math.atan2(Is,Cs)):(this._x=Math.atan2(-Ls,Fs),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+ga)}return this._order=ga,_s!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(ca,ga,_s){return _matrix.makeRotationFromQuaternion(ca),this.setFromRotationMatrix(_matrix,ga,_s)},setFromVector3:function(ca,ga){return this.set(ca.x,ca.y,ca.z,ga||this._order)},reorder:function(ca){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,ca)},equals:function(ca){return ca._x===this._x&&ca._y===this._y&&ca._z===this._z&&ca._order===this._order},fromArray:function(ca){return this._x=ca[0],this._y=ca[1],this._z=ca[2],ca[3]!==void 0&&(this._order=ca[3]),this._onChangeCallback(),this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this._x,ca[ga+1]=this._y,ca[ga+2]=this._z,ca[ga+3]=this._order,ca},toVector3:function(ca){return ca?ca.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(ca){return this._onChangeCallback=ca,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(ca){this.mask=1<<ca|0},enable:function(ca){this.mask|=1<<ca|0},enableAll:function(){this.mask=-1},toggle:function(ca){this.mask^=1<<ca|0},disable:function(ca){this.mask&=~(1<<ca|0)},disableAll:function(){this.mask=0},test:function(ca){return(this.mask&ca.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var ca=new Vector3,ga=new Euler,_s=new Quaternion,Ss=new Vector3(1,1,1);function Ms(){_s.setFromEuler(ga,!1)}function Cs(){ga.setFromQuaternion(_s,void 0,!1)}ga._onChange(Ms),_s._onChange(Cs),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:ca},rotation:{configurable:!0,enumerable:!0,value:ga},quaternion:{configurable:!0,enumerable:!0,value:_s},scale:{configurable:!0,enumerable:!0,value:Ss},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(ca){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(ca),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(ca){return this.quaternion.premultiply(ca),this},setRotationFromAxisAngle:function(ca,ga){this.quaternion.setFromAxisAngle(ca,ga)},setRotationFromEuler:function(ca){this.quaternion.setFromEuler(ca,!0)},setRotationFromMatrix:function(ca){this.quaternion.setFromRotationMatrix(ca)},setRotationFromQuaternion:function(ca){this.quaternion.copy(ca)},rotateOnAxis:function(ca,ga){return _q1.setFromAxisAngle(ca,ga),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(ca,ga){return _q1.setFromAxisAngle(ca,ga),this.quaternion.premultiply(_q1),this},rotateX:function(ca){return this.rotateOnAxis(_xAxis,ca)},rotateY:function(ca){return this.rotateOnAxis(_yAxis,ca)},rotateZ:function(ca){return this.rotateOnAxis(_zAxis,ca)},translateOnAxis:function(ca,ga){return _v1$1.copy(ca).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(ga)),this},translateX:function(ca){return this.translateOnAxis(_xAxis,ca)},translateY:function(ca){return this.translateOnAxis(_yAxis,ca)},translateZ:function(ca){return this.translateOnAxis(_zAxis,ca)},localToWorld:function(ca){return ca.applyMatrix4(this.matrixWorld)},worldToLocal:function(ca){return ca.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(ca,ga,_s){ca.isVector3?_target.copy(ca):_target.set(ca,ga,_s);var Ss=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Ss&&(_m1$1.extractRotation(Ss.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(ca){if(arguments.length>1){for(var ga=0;ga<arguments.length;ga++)this.add(arguments[ga]);return this}return ca===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",ca),this):(ca&&ca.isObject3D?(ca.parent!==null&&ca.parent.remove(ca),ca.parent=this,this.children.push(ca),ca.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",ca),this)},remove:function(ca){if(arguments.length>1){for(var ga=0;ga<arguments.length;ga++)this.remove(arguments[ga]);return this}var _s=this.children.indexOf(ca);return _s!==-1&&(ca.parent=null,this.children.splice(_s,1),ca.dispatchEvent(_removedEvent)),this},attach:function(ca){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),ca.parent!==null&&(ca.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(ca.parent.matrixWorld)),ca.applyMatrix4(_m1$1),ca.updateWorldMatrix(!1,!1),this.add(ca),this},getObjectById:function(ca){return this.getObjectByProperty("id",ca)},getObjectByName:function(ca){return this.getObjectByProperty("name",ca)},getObjectByProperty:function(ca,ga){if(this[ca]===ga)return this;for(var _s=0,Ss=this.children.length;_s<Ss;_s++){var Ms=this.children[_s],Cs=Ms.getObjectByProperty(ca,ga);if(Cs!==void 0)return Cs}},getWorldPosition:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0),ca.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),ca=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,ca,_scale),ca},getWorldScale:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,ca),ca},getWorldDirection:function(ca){ca===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0);var ga=this.matrixWorld.elements;return ca.set(ga[8],ga[9],ga[10]).normalize()},raycast:function(){},traverse:function(ca){ca(this);for(var ga=this.children,_s=0,Ss=ga.length;_s<Ss;_s++)ga[_s].traverse(ca)},traverseVisible:function(ca){if(this.visible!==!1){ca(this);for(var ga=this.children,_s=0,Ss=ga.length;_s<Ss;_s++)ga[_s].traverseVisible(ca)}},traverseAncestors:function(ca){var ga=this.parent;ga!==null&&(ca(ga),ga.traverseAncestors(ca))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(ca){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||ca)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,ca=!0);for(var ga=this.children,_s=0,Ss=ga.length;_s<Ss;_s++)ga[_s].updateMatrixWorld(ca)},updateWorldMatrix:function(ca,ga){var _s=this.parent;if(ca===!0&&_s!==null&&_s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),ga===!0)for(var Ss=this.children,Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms].updateWorldMatrix(!1,!0)},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string",_s={};ga&&(ca={geometries:{},materials:{},textures:{},images:{},shapes:{}},_s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Ss={};Ss.uuid=this.uuid,Ss.type=this.type,this.name!==""&&(Ss.name=this.name),this.castShadow===!0&&(Ss.castShadow=!0),this.receiveShadow===!0&&(Ss.receiveShadow=!0),this.visible===!1&&(Ss.visible=!1),this.frustumCulled===!1&&(Ss.frustumCulled=!1),this.renderOrder!==0&&(Ss.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Ss.userData=this.userData),Ss.layers=this.layers.mask,Ss.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Ss.matrixAutoUpdate=!1),this.isInstancedMesh&&(Ss.type="InstancedMesh",Ss.count=this.count,Ss.instanceMatrix=this.instanceMatrix.toJSON());function Ms(Ns,Ds){return Ns[Ds.uuid]===void 0&&(Ns[Ds.uuid]=Ds.toJSON(ca)),Ds.uuid}if(this.isMesh||this.isLine||this.isPoints){Ss.geometry=Ms(ca.geometries,this.geometry);var Cs=this.geometry.parameters;if(Cs!==void 0&&Cs.shapes!==void 0){var Ts=Cs.shapes;if(Array.isArray(Ts))for(var Is=0,Bs=Ts.length;Is<Bs;Is++){var Ps=Ts[Is];Ms(ca.shapes,Ps)}else Ms(ca.shapes,Ts)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Ls=[],Is=0,Bs=this.material.length;Is<Bs;Is++)Ls.push(Ms(ca.materials,this.material[Is]));Ss.material=Ls}else Ss.material=Ms(ca.materials,this.material);if(this.children.length>0){Ss.children=[];for(var Is=0;Is<this.children.length;Is++)Ss.children.push(this.children[Is].toJSON(ca).object)}if(ga){var Rs=ks(ca.geometries),Os=ks(ca.materials),Fs=ks(ca.textures),Vs=ks(ca.images),Ts=ks(ca.shapes);Rs.length>0&&(_s.geometries=Rs),Os.length>0&&(_s.materials=Os),Fs.length>0&&(_s.textures=Fs),Vs.length>0&&(_s.images=Vs),Ts.length>0&&(_s.shapes=Ts)}return _s.object=Ss,_s;function ks(Ns){var Ds=[];for(var $s in Ns){var Gs=Ns[$s];delete Gs.metadata,Ds.push(Gs)}return Ds}},clone:function(ca){return new this.constructor().copy(this,ca)},copy:function(ca,ga){if(ga===void 0&&(ga=!0),this.name=ca.name,this.up.copy(ca.up),this.position.copy(ca.position),this.quaternion.copy(ca.quaternion),this.scale.copy(ca.scale),this.matrix.copy(ca.matrix),this.matrixWorld.copy(ca.matrixWorld),this.matrixAutoUpdate=ca.matrixAutoUpdate,this.matrixWorldNeedsUpdate=ca.matrixWorldNeedsUpdate,this.layers.mask=ca.layers.mask,this.visible=ca.visible,this.castShadow=ca.castShadow,this.receiveShadow=ca.receiveShadow,this.frustumCulled=ca.frustumCulled,this.renderOrder=ca.renderOrder,this.userData=JSON.parse(JSON.stringify(ca.userData)),ga===!0)for(var _s=0;_s<ca.children.length;_s++){var Ss=ca.children[_s];this.add(Ss.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(ca,ga){return Object3D.prototype.copy.call(this,ca,ga),ca.background!==null&&(this.background=ca.background.clone()),ca.environment!==null&&(this.environment=ca.environment.clone()),ca.fog!==null&&(this.fog=ca.fog.clone()),ca.overrideMaterial!==null&&(this.overrideMaterial=ca.overrideMaterial.clone()),this.autoUpdate=ca.autoUpdate,this.matrixAutoUpdate=ca.matrixAutoUpdate,this},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return this.background!==null&&(ga.object.background=this.background.toJSON(ca)),this.environment!==null&&(ga.object.environment=this.environment.toJSON(ca)),this.fog!==null&&(ga.object.fog=this.fog.toJSON()),ga},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(ca,ga){this.min=ca!==void 0?ca:new Vector3(1/0,1/0,1/0),this.max=ga!==void 0?ga:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(ca,ga){return this.min.copy(ca),this.max.copy(ga),this},setFromArray:function(ca){for(var ga=1/0,_s=1/0,Ss=1/0,Ms=-1/0,Cs=-1/0,Ts=-1/0,Is=0,Bs=ca.length;Is<Bs;Is+=3){var Ps=ca[Is],Ls=ca[Is+1],Rs=ca[Is+2];Ps<ga&&(ga=Ps),Ls<_s&&(_s=Ls),Rs<Ss&&(Ss=Rs),Ps>Ms&&(Ms=Ps),Ls>Cs&&(Cs=Ls),Rs>Ts&&(Ts=Rs)}return this.min.set(ga,_s,Ss),this.max.set(Ms,Cs,Ts),this},setFromBufferAttribute:function(ca){for(var ga=1/0,_s=1/0,Ss=1/0,Ms=-1/0,Cs=-1/0,Ts=-1/0,Is=0,Bs=ca.count;Is<Bs;Is++){var Ps=ca.getX(Is),Ls=ca.getY(Is),Rs=ca.getZ(Is);Ps<ga&&(ga=Ps),Ls<_s&&(_s=Ls),Rs<Ss&&(Ss=Rs),Ps>Ms&&(Ms=Ps),Ls>Cs&&(Cs=Ls),Rs>Ts&&(Ts=Rs)}return this.min.set(ga,_s,Ss),this.max.set(Ms,Cs,Ts),this},setFromPoints:function(ca){this.makeEmpty();for(var ga=0,_s=ca.length;ga<_s;ga++)this.expandByPoint(ca[ga]);return this},setFromCenterAndSize:function(ca,ga){var _s=_vector$1.copy(ga).multiplyScalar(.5);return this.min.copy(ca).sub(_s),this.max.copy(ca).add(_s),this},setFromObject:function(ca){return this.makeEmpty(),this.expandByObject(ca)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.min.copy(ca.min),this.max.copy(ca.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),ca=new Vector3),this.isEmpty()?ca.set(0,0,0):ca.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(ca){return ca===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),ca=new Vector3),this.isEmpty()?ca.set(0,0,0):ca.subVectors(this.max,this.min)},expandByPoint:function(ca){return this.min.min(ca),this.max.max(ca),this},expandByVector:function(ca){return this.min.sub(ca),this.max.add(ca),this},expandByScalar:function(ca){return this.min.addScalar(-ca),this.max.addScalar(ca),this},expandByObject:function(ca){ca.updateWorldMatrix(!1,!1);var ga=ca.geometry;ga!==void 0&&(ga.boundingBox===null&&ga.computeBoundingBox(),_box.copy(ga.boundingBox),_box.applyMatrix4(ca.matrixWorld),this.union(_box));for(var _s=ca.children,Ss=0,Ms=_s.length;Ss<Ms;Ss++)this.expandByObject(_s[Ss]);return this},containsPoint:function(ca){return!(ca.x<this.min.x||ca.x>this.max.x||ca.y<this.min.y||ca.y>this.max.y||ca.z<this.min.z||ca.z>this.max.z)},containsBox:function(ca){return this.min.x<=ca.min.x&&ca.max.x<=this.max.x&&this.min.y<=ca.min.y&&ca.max.y<=this.max.y&&this.min.z<=ca.min.z&&ca.max.z<=this.max.z},getParameter:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),ga=new Vector3),ga.set((ca.x-this.min.x)/(this.max.x-this.min.x),(ca.y-this.min.y)/(this.max.y-this.min.y),(ca.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(ca){return!(ca.max.x<this.min.x||ca.min.x>this.max.x||ca.max.y<this.min.y||ca.min.y>this.max.y||ca.max.z<this.min.z||ca.min.z>this.max.z)},intersectsSphere:function(ca){return this.clampPoint(ca.center,_vector$1),_vector$1.distanceToSquared(ca.center)<=ca.radius*ca.radius},intersectsPlane:function(ca){var ga,_s;return ca.normal.x>0?(ga=ca.normal.x*this.min.x,_s=ca.normal.x*this.max.x):(ga=ca.normal.x*this.max.x,_s=ca.normal.x*this.min.x),ca.normal.y>0?(ga+=ca.normal.y*this.min.y,_s+=ca.normal.y*this.max.y):(ga+=ca.normal.y*this.max.y,_s+=ca.normal.y*this.min.y),ca.normal.z>0?(ga+=ca.normal.z*this.min.z,_s+=ca.normal.z*this.max.z):(ga+=ca.normal.z*this.max.z,_s+=ca.normal.z*this.min.z),ga<=-ca.constant&&_s>=-ca.constant},intersectsTriangle:function(ca){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(ca.a,_center),_v1$2.subVectors(ca.b,_center),_v2.subVectors(ca.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var ga=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(ga,_v0,_v1$2,_v2,_extents)||(ga=[1,0,0,0,1,0,0,0,1],!satForAxes(ga,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),ga=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(ga,_v0,_v1$2,_v2,_extents))},clampPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),ga=new Vector3),ga.copy(ca).clamp(this.min,this.max)},distanceToPoint:function(ca){var ga=_vector$1.copy(ca).clamp(this.min,this.max);return ga.sub(ca).length()},getBoundingSphere:function(ca){return ca===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(ca.center),ca.radius=this.getSize(_vector$1).length()*.5,ca},intersect:function(ca){return this.min.max(ca.min),this.max.min(ca.max),this.isEmpty()&&this.makeEmpty(),this},union:function(ca){return this.min.min(ca.min),this.max.max(ca.max),this},applyMatrix4:function(ca){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(ca),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(ca),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(ca),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(ca),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(ca),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(ca),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(ca),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(ca),this.setFromPoints(_points),this)},translate:function(ca){return this.min.add(ca),this.max.add(ca),this},equals:function(ca){return ca.min.equals(this.min)&&ca.max.equals(this.max)}});function satForAxes(ca,ga,_s,Ss,Ms){var Cs,Ts;for(Cs=0,Ts=ca.length-3;Cs<=Ts;Cs+=3){_testAxis.fromArray(ca,Cs);var Is=Ms.x*Math.abs(_testAxis.x)+Ms.y*Math.abs(_testAxis.y)+Ms.z*Math.abs(_testAxis.z),Bs=ga.dot(_testAxis),Ps=_s.dot(_testAxis),Ls=Ss.dot(_testAxis);if(Math.max(-Math.max(Bs,Ps,Ls),Math.min(Bs,Ps,Ls))>Is)return!1}return!0}var _box$1=new Box3;function Sphere(ca,ga){this.center=ca!==void 0?ca:new Vector3,this.radius=ga!==void 0?ga:-1}Object.assign(Sphere.prototype,{set:function(ca,ga){return this.center.copy(ca),this.radius=ga,this},setFromPoints:function(ca,ga){var _s=this.center;ga!==void 0?_s.copy(ga):_box$1.setFromPoints(ca).getCenter(_s);for(var Ss=0,Ms=0,Cs=ca.length;Ms<Cs;Ms++)Ss=Math.max(Ss,_s.distanceToSquared(ca[Ms]));return this.radius=Math.sqrt(Ss),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.center.copy(ca.center),this.radius=ca.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(ca){return ca.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(ca){return ca.distanceTo(this.center)-this.radius},intersectsSphere:function(ca){var ga=this.radius+ca.radius;return ca.center.distanceToSquared(this.center)<=ga*ga},intersectsBox:function(ca){return ca.intersectsSphere(this)},intersectsPlane:function(ca){return Math.abs(ca.distanceToPoint(this.center))<=this.radius},clampPoint:function(ca,ga){var _s=this.center.distanceToSquared(ca);return ga===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),ga=new Vector3),ga.copy(ca),_s>this.radius*this.radius&&(ga.sub(this.center).normalize(),ga.multiplyScalar(this.radius).add(this.center)),ga},getBoundingBox:function(ca){return ca===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),ca=new Box3),this.isEmpty()?(ca.makeEmpty(),ca):(ca.set(this.center,this.center),ca.expandByScalar(this.radius),ca)},applyMatrix4:function(ca){return this.center.applyMatrix4(ca),this.radius=this.radius*ca.getMaxScaleOnAxis(),this},translate:function(ca){return this.center.add(ca),this},equals:function(ca){return ca.center.equals(this.center)&&ca.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(ca,ga){this.origin=ca!==void 0?ca:new Vector3,this.direction=ga!==void 0?ga:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(ca,ga){return this.origin.copy(ca),this.direction.copy(ga),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.origin.copy(ca.origin),this.direction.copy(ca.direction),this},at:function(ca,ga){return ga===void 0&&(console.warn("THREE.Ray: .at() target is now required"),ga=new Vector3),ga.copy(this.direction).multiplyScalar(ca).add(this.origin)},lookAt:function(ca){return this.direction.copy(ca).sub(this.origin).normalize(),this},recast:function(ca){return this.origin.copy(this.at(ca,_vector$2)),this},closestPointToPoint:function(ca,ga){ga===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),ga=new Vector3),ga.subVectors(ca,this.origin);var _s=ga.dot(this.direction);return _s<0?ga.copy(this.origin):ga.copy(this.direction).multiplyScalar(_s).add(this.origin)},distanceToPoint:function(ca){return Math.sqrt(this.distanceSqToPoint(ca))},distanceSqToPoint:function(ca){var ga=_vector$2.subVectors(ca,this.origin).dot(this.direction);return ga<0?this.origin.distanceToSquared(ca):(_vector$2.copy(this.direction).multiplyScalar(ga).add(this.origin),_vector$2.distanceToSquared(ca))},distanceSqToSegment:function(ca,ga,_s,Ss){_segCenter.copy(ca).add(ga).multiplyScalar(.5),_segDir.copy(ga).sub(ca).normalize(),_diff.copy(this.origin).sub(_segCenter);var Ms=ca.distanceTo(ga)*.5,Cs=-this.direction.dot(_segDir),Ts=_diff.dot(this.direction),Is=-_diff.dot(_segDir),Bs=_diff.lengthSq(),Ps=Math.abs(1-Cs*Cs),Ls,Rs,Os,Fs;if(Ps>0)if(Ls=Cs*Is-Ts,Rs=Cs*Ts-Is,Fs=Ms*Ps,Ls>=0)if(Rs>=-Fs)if(Rs<=Fs){var Vs=1/Ps;Ls*=Vs,Rs*=Vs,Os=Ls*(Ls+Cs*Rs+2*Ts)+Rs*(Cs*Ls+Rs+2*Is)+Bs}else Rs=Ms,Ls=Math.max(0,-(Cs*Rs+Ts)),Os=-Ls*Ls+Rs*(Rs+2*Is)+Bs;else Rs=-Ms,Ls=Math.max(0,-(Cs*Rs+Ts)),Os=-Ls*Ls+Rs*(Rs+2*Is)+Bs;else Rs<=-Fs?(Ls=Math.max(0,-(-Cs*Ms+Ts)),Rs=Ls>0?-Ms:Math.min(Math.max(-Ms,-Is),Ms),Os=-Ls*Ls+Rs*(Rs+2*Is)+Bs):Rs<=Fs?(Ls=0,Rs=Math.min(Math.max(-Ms,-Is),Ms),Os=Rs*(Rs+2*Is)+Bs):(Ls=Math.max(0,-(Cs*Ms+Ts)),Rs=Ls>0?Ms:Math.min(Math.max(-Ms,-Is),Ms),Os=-Ls*Ls+Rs*(Rs+2*Is)+Bs);else Rs=Cs>0?-Ms:Ms,Ls=Math.max(0,-(Cs*Rs+Ts)),Os=-Ls*Ls+Rs*(Rs+2*Is)+Bs;return _s&&_s.copy(this.direction).multiplyScalar(Ls).add(this.origin),Ss&&Ss.copy(_segDir).multiplyScalar(Rs).add(_segCenter),Os},intersectSphere:function(ca,ga){_vector$2.subVectors(ca.center,this.origin);var _s=_vector$2.dot(this.direction),Ss=_vector$2.dot(_vector$2)-_s*_s,Ms=ca.radius*ca.radius;if(Ss>Ms)return null;var Cs=Math.sqrt(Ms-Ss),Ts=_s-Cs,Is=_s+Cs;return Ts<0&&Is<0?null:Ts<0?this.at(Is,ga):this.at(Ts,ga)},intersectsSphere:function(ca){return this.distanceSqToPoint(ca.center)<=ca.radius*ca.radius},distanceToPlane:function(ca){var ga=ca.normal.dot(this.direction);if(ga===0)return ca.distanceToPoint(this.origin)===0?0:null;var _s=-(this.origin.dot(ca.normal)+ca.constant)/ga;return _s>=0?_s:null},intersectPlane:function(ca,ga){var _s=this.distanceToPlane(ca);return _s===null?null:this.at(_s,ga)},intersectsPlane:function(ca){var ga=ca.distanceToPoint(this.origin);if(ga===0)return!0;var _s=ca.normal.dot(this.direction);return _s*ga<0},intersectBox:function(ca,ga){var _s,Ss,Ms,Cs,Ts,Is,Bs=1/this.direction.x,Ps=1/this.direction.y,Ls=1/this.direction.z,Rs=this.origin;return Bs>=0?(_s=(ca.min.x-Rs.x)*Bs,Ss=(ca.max.x-Rs.x)*Bs):(_s=(ca.max.x-Rs.x)*Bs,Ss=(ca.min.x-Rs.x)*Bs),Ps>=0?(Ms=(ca.min.y-Rs.y)*Ps,Cs=(ca.max.y-Rs.y)*Ps):(Ms=(ca.max.y-Rs.y)*Ps,Cs=(ca.min.y-Rs.y)*Ps),_s>Cs||Ms>Ss||((Ms>_s||_s!==_s)&&(_s=Ms),(Cs<Ss||Ss!==Ss)&&(Ss=Cs),Ls>=0?(Ts=(ca.min.z-Rs.z)*Ls,Is=(ca.max.z-Rs.z)*Ls):(Ts=(ca.max.z-Rs.z)*Ls,Is=(ca.min.z-Rs.z)*Ls),_s>Is||Ts>Ss)||((Ts>_s||_s!==_s)&&(_s=Ts),(Is<Ss||Ss!==Ss)&&(Ss=Is),Ss<0)?null:this.at(_s>=0?_s:Ss,ga)},intersectsBox:function(ca){return this.intersectBox(ca,_vector$2)!==null},intersectTriangle:function(ca,ga,_s,Ss,Ms){_edge1.subVectors(ga,ca),_edge2.subVectors(_s,ca),_normal.crossVectors(_edge1,_edge2);var Cs=this.direction.dot(_normal),Ts;if(Cs>0){if(Ss)return null;Ts=1}else if(Cs<0)Ts=-1,Cs=-Cs;else return null;_diff.subVectors(this.origin,ca);var Is=Ts*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Is<0)return null;var Bs=Ts*this.direction.dot(_edge1.cross(_diff));if(Bs<0||Is+Bs>Cs)return null;var Ps=-Ts*_diff.dot(_normal);return Ps<0?null:this.at(Ps/Cs,Ms)},applyMatrix4:function(ca){return this.origin.applyMatrix4(ca),this.direction.transformDirection(ca),this},equals:function(ca){return ca.origin.equals(this.origin)&&ca.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(ca,ga){this.normal=ca!==void 0?ca:new Vector3(1,0,0),this.constant=ga!==void 0?ga:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(ca,ga){return this.normal.copy(ca),this.constant=ga,this},setComponents:function(ca,ga,_s,Ss){return this.normal.set(ca,ga,_s),this.constant=Ss,this},setFromNormalAndCoplanarPoint:function(ca,ga){return this.normal.copy(ca),this.constant=-ga.dot(this.normal),this},setFromCoplanarPoints:function(ca,ga,_s){var Ss=_vector1.subVectors(_s,ga).cross(_vector2.subVectors(ca,ga)).normalize();return this.setFromNormalAndCoplanarPoint(Ss,ca),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.normal.copy(ca.normal),this.constant=ca.constant,this},normalize:function(){var ca=1/this.normal.length();return this.normal.multiplyScalar(ca),this.constant*=ca,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(ca){return this.normal.dot(ca)+this.constant},distanceToSphere:function(ca){return this.distanceToPoint(ca.center)-ca.radius},projectPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),ga=new Vector3),ga.copy(this.normal).multiplyScalar(-this.distanceToPoint(ca)).add(ca)},intersectLine:function(ca,ga){ga===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),ga=new Vector3);var _s=ca.delta(_vector1),Ss=this.normal.dot(_s);if(Ss===0)return this.distanceToPoint(ca.start)===0?ga.copy(ca.start):void 0;var Ms=-(ca.start.dot(this.normal)+this.constant)/Ss;if(!(Ms<0||Ms>1))return ga.copy(_s).multiplyScalar(Ms).add(ca.start)},intersectsLine:function(ca){var ga=this.distanceToPoint(ca.start),_s=this.distanceToPoint(ca.end);return ga<0&&_s>0||_s<0&&ga>0},intersectsBox:function(ca){return ca.intersectsPlane(this)},intersectsSphere:function(ca){return ca.intersectsPlane(this)},coplanarPoint:function(ca){return ca===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),ca=new Vector3),ca.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(ca,ga){var _s=ga||_normalMatrix.getNormalMatrix(ca),Ss=this.coplanarPoint(_vector1).applyMatrix4(ca),Ms=this.normal.applyMatrix3(_s).normalize();return this.constant=-Ss.dot(Ms),this},translate:function(ca){return this.constant-=ca.dot(this.normal),this},equals:function(ca){return ca.normal.equals(this.normal)&&ca.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(ca,ga,_s){this.a=ca!==void 0?ca:new Vector3,this.b=ga!==void 0?ga:new Vector3,this.c=_s!==void 0?_s:new Vector3}Object.assign(Triangle,{getNormal:function(ca,ga,_s,Ss){Ss===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Ss=new Vector3),Ss.subVectors(_s,ga),_v0$1.subVectors(ca,ga),Ss.cross(_v0$1);var Ms=Ss.lengthSq();return Ms>0?Ss.multiplyScalar(1/Math.sqrt(Ms)):Ss.set(0,0,0)},getBarycoord:function(ca,ga,_s,Ss,Ms){_v0$1.subVectors(Ss,ga),_v1$3.subVectors(_s,ga),_v2$1.subVectors(ca,ga);var Cs=_v0$1.dot(_v0$1),Ts=_v0$1.dot(_v1$3),Is=_v0$1.dot(_v2$1),Bs=_v1$3.dot(_v1$3),Ps=_v1$3.dot(_v2$1),Ls=Cs*Bs-Ts*Ts;if(Ms===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Ms=new Vector3),Ls===0)return Ms.set(-2,-1,-1);var Rs=1/Ls,Os=(Bs*Is-Ts*Ps)*Rs,Fs=(Cs*Ps-Ts*Is)*Rs;return Ms.set(1-Os-Fs,Fs,Os)},containsPoint:function(ca,ga,_s,Ss){return Triangle.getBarycoord(ca,ga,_s,Ss,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(ca,ga,_s,Ss,Ms,Cs,Ts,Is){return this.getBarycoord(ca,ga,_s,Ss,_v3),Is.set(0,0),Is.addScaledVector(Ms,_v3.x),Is.addScaledVector(Cs,_v3.y),Is.addScaledVector(Ts,_v3.z),Is},isFrontFacing:function(ca,ga,_s,Ss){return _v0$1.subVectors(_s,ga),_v1$3.subVectors(ca,ga),_v0$1.cross(_v1$3).dot(Ss)<0}});Object.assign(Triangle.prototype,{set:function(ca,ga,_s){return this.a.copy(ca),this.b.copy(ga),this.c.copy(_s),this},setFromPointsAndIndices:function(ca,ga,_s,Ss){return this.a.copy(ca[ga]),this.b.copy(ca[_s]),this.c.copy(ca[Ss]),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.a.copy(ca.a),this.b.copy(ca.b),this.c.copy(ca.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(ca){return ca===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),ca=new Vector3),ca.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(ca){return Triangle.getNormal(this.a,this.b,this.c,ca)},getPlane:function(ca){return ca===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),ca=new Plane),ca.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(ca,ga){return Triangle.getBarycoord(ca,this.a,this.b,this.c,ga)},getUV:function(ca,ga,_s,Ss,Ms){return Triangle.getUV(ca,this.a,this.b,this.c,ga,_s,Ss,Ms)},containsPoint:function(ca){return Triangle.containsPoint(ca,this.a,this.b,this.c)},isFrontFacing:function(ca){return Triangle.isFrontFacing(this.a,this.b,this.c,ca)},intersectsBox:function(ca){return ca.intersectsTriangle(this)},closestPointToPoint:function(ca,ga){ga===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),ga=new Vector3);var _s=this.a,Ss=this.b,Ms=this.c,Cs,Ts;_vab.subVectors(Ss,_s),_vac.subVectors(Ms,_s),_vap.subVectors(ca,_s);var Is=_vab.dot(_vap),Bs=_vac.dot(_vap);if(Is<=0&&Bs<=0)return ga.copy(_s);_vbp.subVectors(ca,Ss);var Ps=_vab.dot(_vbp),Ls=_vac.dot(_vbp);if(Ps>=0&&Ls<=Ps)return ga.copy(Ss);var Rs=Is*Ls-Ps*Bs;if(Rs<=0&&Is>=0&&Ps<=0)return Cs=Is/(Is-Ps),ga.copy(_s).addScaledVector(_vab,Cs);_vcp.subVectors(ca,Ms);var Os=_vab.dot(_vcp),Fs=_vac.dot(_vcp);if(Fs>=0&&Os<=Fs)return ga.copy(Ms);var Vs=Os*Bs-Is*Fs;if(Vs<=0&&Bs>=0&&Fs<=0)return Ts=Bs/(Bs-Fs),ga.copy(_s).addScaledVector(_vac,Ts);var ks=Ps*Fs-Os*Ls;if(ks<=0&&Ls-Ps>=0&&Os-Fs>=0)return _vbc.subVectors(Ms,Ss),Ts=(Ls-Ps)/(Ls-Ps+(Os-Fs)),ga.copy(Ss).addScaledVector(_vbc,Ts);var Ns=1/(ks+Vs+Rs);return Cs=Vs*Ns,Ts=Rs*Ns,ga.copy(_s).addScaledVector(_vab,Cs).addScaledVector(_vac,Ts)},equals:function(ca){return ca.a.equals(this.a)&&ca.b.equals(this.b)&&ca.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(ca,ga,_s){return ga===void 0&&_s===void 0?this.set(ca):this.setRGB(ca,ga,_s)}function hue2rgb(ca,ga,_s){return _s<0&&(_s+=1),_s>1&&(_s-=1),_s<1/6?ca+(ga-ca)*6*_s:_s<1/2?ga:_s<2/3?ca+(ga-ca)*6*(2/3-_s):ca}function SRGBToLinear(ca){return ca<.04045?ca*.0773993808:Math.pow(ca*.9478672986+.0521327014,2.4)}function LinearToSRGB(ca){return ca<.0031308?ca*12.92:1.055*Math.pow(ca,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(ca){return ca&&ca.isColor?this.copy(ca):typeof ca=="number"?this.setHex(ca):typeof ca=="string"&&this.setStyle(ca),this},setScalar:function(ca){return this.r=ca,this.g=ca,this.b=ca,this},setHex:function(ca){return ca=Math.floor(ca),this.r=(ca>>16&255)/255,this.g=(ca>>8&255)/255,this.b=(ca&255)/255,this},setRGB:function(ca,ga,_s){return this.r=ca,this.g=ga,this.b=_s,this},setHSL:function(ca,ga,_s){if(ca=MathUtils.euclideanModulo(ca,1),ga=MathUtils.clamp(ga,0,1),_s=MathUtils.clamp(_s,0,1),ga===0)this.r=this.g=this.b=_s;else{var Ss=_s<=.5?_s*(1+ga):_s+ga-_s*ga,Ms=2*_s-Ss;this.r=hue2rgb(Ms,Ss,ca+1/3),this.g=hue2rgb(Ms,Ss,ca),this.b=hue2rgb(Ms,Ss,ca-1/3)}return this},setStyle:function(ca){function ga(Rs){Rs!==void 0&&parseFloat(Rs)<1&&console.warn("THREE.Color: Alpha component of "+ca+" will be ignored.")}var _s;if(_s=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(ca)){var Ss,Ms=_s[1],Cs=_s[2];switch(Ms){case"rgb":case"rgba":if(Ss=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs))return this.r=Math.min(255,parseInt(Ss[1],10))/255,this.g=Math.min(255,parseInt(Ss[2],10))/255,this.b=Math.min(255,parseInt(Ss[3],10))/255,ga(Ss[5]),this;if(Ss=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs))return this.r=Math.min(100,parseInt(Ss[1],10))/100,this.g=Math.min(100,parseInt(Ss[2],10))/100,this.b=Math.min(100,parseInt(Ss[3],10))/100,ga(Ss[5]),this;break;case"hsl":case"hsla":if(Ss=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs)){var Ts=parseFloat(Ss[1])/360,Is=parseInt(Ss[2],10)/100,Bs=parseInt(Ss[3],10)/100;return ga(Ss[5]),this.setHSL(Ts,Is,Bs)}break}}else if(_s=/^\#([A-Fa-f0-9]+)$/.exec(ca)){var Ps=_s[1],Ls=Ps.length;if(Ls===3)return this.r=parseInt(Ps.charAt(0)+Ps.charAt(0),16)/255,this.g=parseInt(Ps.charAt(1)+Ps.charAt(1),16)/255,this.b=parseInt(Ps.charAt(2)+Ps.charAt(2),16)/255,this;if(Ls===6)return this.r=parseInt(Ps.charAt(0)+Ps.charAt(1),16)/255,this.g=parseInt(Ps.charAt(2)+Ps.charAt(3),16)/255,this.b=parseInt(Ps.charAt(4)+Ps.charAt(5),16)/255,this}return ca&&ca.length>0?this.setColorName(ca):this},setColorName:function(ca){var ga=_colorKeywords[ca];return ga!==void 0?this.setHex(ga):console.warn("THREE.Color: Unknown color "+ca),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(ca){return this.r=ca.r,this.g=ca.g,this.b=ca.b,this},copyGammaToLinear:function(ca,ga){return ga===void 0&&(ga=2),this.r=Math.pow(ca.r,ga),this.g=Math.pow(ca.g,ga),this.b=Math.pow(ca.b,ga),this},copyLinearToGamma:function(ca,ga){ga===void 0&&(ga=2);var _s=ga>0?1/ga:1;return this.r=Math.pow(ca.r,_s),this.g=Math.pow(ca.g,_s),this.b=Math.pow(ca.b,_s),this},convertGammaToLinear:function(ca){return this.copyGammaToLinear(this,ca),this},convertLinearToGamma:function(ca){return this.copyLinearToGamma(this,ca),this},copySRGBToLinear:function(ca){return this.r=SRGBToLinear(ca.r),this.g=SRGBToLinear(ca.g),this.b=SRGBToLinear(ca.b),this},copyLinearToSRGB:function(ca){return this.r=LinearToSRGB(ca.r),this.g=LinearToSRGB(ca.g),this.b=LinearToSRGB(ca.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(ca){ca===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),ca={h:0,s:0,l:0});var ga=this.r,_s=this.g,Ss=this.b,Ms=Math.max(ga,_s,Ss),Cs=Math.min(ga,_s,Ss),Ts,Is,Bs=(Cs+Ms)/2;if(Cs===Ms)Ts=0,Is=0;else{var Ps=Ms-Cs;switch(Is=Bs<=.5?Ps/(Ms+Cs):Ps/(2-Ms-Cs),Ms){case ga:Ts=(_s-Ss)/Ps+(_s<Ss?6:0);break;case _s:Ts=(Ss-ga)/Ps+2;break;case Ss:Ts=(ga-_s)/Ps+4;break}Ts/=6}return ca.h=Ts,ca.s=Is,ca.l=Bs,ca},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(ca,ga,_s){return this.getHSL(_hslA),_hslA.h+=ca,_hslA.s+=ga,_hslA.l+=_s,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(ca){return this.r+=ca.r,this.g+=ca.g,this.b+=ca.b,this},addColors:function(ca,ga){return this.r=ca.r+ga.r,this.g=ca.g+ga.g,this.b=ca.b+ga.b,this},addScalar:function(ca){return this.r+=ca,this.g+=ca,this.b+=ca,this},sub:function(ca){return this.r=Math.max(0,this.r-ca.r),this.g=Math.max(0,this.g-ca.g),this.b=Math.max(0,this.b-ca.b),this},multiply:function(ca){return this.r*=ca.r,this.g*=ca.g,this.b*=ca.b,this},multiplyScalar:function(ca){return this.r*=ca,this.g*=ca,this.b*=ca,this},lerp:function(ca,ga){return this.r+=(ca.r-this.r)*ga,this.g+=(ca.g-this.g)*ga,this.b+=(ca.b-this.b)*ga,this},lerpHSL:function(ca,ga){this.getHSL(_hslA),ca.getHSL(_hslB);var _s=MathUtils.lerp(_hslA.h,_hslB.h,ga),Ss=MathUtils.lerp(_hslA.s,_hslB.s,ga),Ms=MathUtils.lerp(_hslA.l,_hslB.l,ga);return this.setHSL(_s,Ss,Ms),this},equals:function(ca){return ca.r===this.r&&ca.g===this.g&&ca.b===this.b},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.r=ca[ga],this.g=ca[ga+1],this.b=ca[ga+2],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.r,ca[ga+1]=this.g,ca[ga+2]=this.b,ca},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(ca,ga,_s,Ss,Ms,Cs){this.a=ca,this.b=ga,this.c=_s,this.normal=Ss&&Ss.isVector3?Ss:new Vector3,this.vertexNormals=Array.isArray(Ss)?Ss:[],this.color=Ms&&Ms.isColor?Ms:new Color,this.vertexColors=Array.isArray(Ms)?Ms:[],this.materialIndex=Cs!==void 0?Cs:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(ca){this.a=ca.a,this.b=ca.b,this.c=ca.c,this.normal.copy(ca.normal),this.color.copy(ca.color),this.materialIndex=ca.materialIndex;for(var ga=0,_s=ca.vertexNormals.length;ga<_s;ga++)this.vertexNormals[ga]=ca.vertexNormals[ga].clone();for(var ga=0,_s=ca.vertexColors.length;ga<_s;ga++)this.vertexColors[ga]=ca.vertexColors[ga].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(ca){if(ca!==void 0)for(var ga in ca){var _s=ca[ga];if(_s===void 0){console.warn("THREE.Material: '"+ga+"' parameter is undefined.");continue}if(ga==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_s===FlatShading;continue}var Ss=this[ga];if(Ss===void 0){console.warn("THREE."+this.type+": '"+ga+"' is not a property of this material.");continue}Ss&&Ss.isColor?Ss.set(_s):Ss&&Ss.isVector3&&_s&&_s.isVector3?Ss.copy(_s):this[ga]=_s}},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string";ga&&(ca={textures:{},images:{}});var _s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};_s.uuid=this.uuid,_s.type=this.type,this.name!==""&&(_s.name=this.name),this.color&&this.color.isColor&&(_s.color=this.color.getHex()),this.roughness!==void 0&&(_s.roughness=this.roughness),this.metalness!==void 0&&(_s.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(_s.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(_s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(_s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(_s.specular=this.specular.getHex()),this.shininess!==void 0&&(_s.shininess=this.shininess),this.clearcoat!==void 0&&(_s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(_s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(_s.clearcoatMap=this.clearcoatMap.toJSON(ca).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(_s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(ca).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(_s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(ca).uuid,_s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(_s.map=this.map.toJSON(ca).uuid),this.matcap&&this.matcap.isTexture&&(_s.matcap=this.matcap.toJSON(ca).uuid),this.alphaMap&&this.alphaMap.isTexture&&(_s.alphaMap=this.alphaMap.toJSON(ca).uuid),this.lightMap&&this.lightMap.isTexture&&(_s.lightMap=this.lightMap.toJSON(ca).uuid),this.aoMap&&this.aoMap.isTexture&&(_s.aoMap=this.aoMap.toJSON(ca).uuid,_s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(_s.bumpMap=this.bumpMap.toJSON(ca).uuid,_s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(_s.normalMap=this.normalMap.toJSON(ca).uuid,_s.normalMapType=this.normalMapType,_s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(_s.displacementMap=this.displacementMap.toJSON(ca).uuid,_s.displacementScale=this.displacementScale,_s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(_s.roughnessMap=this.roughnessMap.toJSON(ca).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(_s.metalnessMap=this.metalnessMap.toJSON(ca).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(_s.emissiveMap=this.emissiveMap.toJSON(ca).uuid),this.specularMap&&this.specularMap.isTexture&&(_s.specularMap=this.specularMap.toJSON(ca).uuid),this.envMap&&this.envMap.isTexture&&(_s.envMap=this.envMap.toJSON(ca).uuid,_s.reflectivity=this.reflectivity,_s.refractionRatio=this.refractionRatio,this.combine!==void 0&&(_s.combine=this.combine),this.envMapIntensity!==void 0&&(_s.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(_s.gradientMap=this.gradientMap.toJSON(ca).uuid),this.size!==void 0&&(_s.size=this.size),this.sizeAttenuation!==void 0&&(_s.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(_s.blending=this.blending),this.flatShading===!0&&(_s.flatShading=this.flatShading),this.side!==FrontSide&&(_s.side=this.side),this.vertexColors&&(_s.vertexColors=!0),this.opacity<1&&(_s.opacity=this.opacity),this.transparent===!0&&(_s.transparent=this.transparent),_s.depthFunc=this.depthFunc,_s.depthTest=this.depthTest,_s.depthWrite=this.depthWrite,_s.stencilWrite=this.stencilWrite,_s.stencilWriteMask=this.stencilWriteMask,_s.stencilFunc=this.stencilFunc,_s.stencilRef=this.stencilRef,_s.stencilFuncMask=this.stencilFuncMask,_s.stencilFail=this.stencilFail,_s.stencilZFail=this.stencilZFail,_s.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(_s.rotation=this.rotation),this.polygonOffset===!0&&(_s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(_s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(_s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(_s.linewidth=this.linewidth),this.dashSize!==void 0&&(_s.dashSize=this.dashSize),this.gapSize!==void 0&&(_s.gapSize=this.gapSize),this.scale!==void 0&&(_s.scale=this.scale),this.dithering===!0&&(_s.dithering=!0),this.alphaTest>0&&(_s.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(_s.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(_s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(_s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(_s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(_s.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(_s.morphTargets=!0),this.morphNormals===!0&&(_s.morphNormals=!0),this.skinning===!0&&(_s.skinning=!0),this.visible===!1&&(_s.visible=!1),this.toneMapped===!1&&(_s.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(_s.userData=this.userData);function Ss(Ts){var Is=[];for(var Bs in Ts){var Ps=Ts[Bs];delete Ps.metadata,Is.push(Ps)}return Is}if(ga){var Ms=Ss(ca.textures),Cs=Ss(ca.images);Ms.length>0&&(_s.textures=Ms),Cs.length>0&&(_s.images=Cs)}return _s},clone:function(){return new this.constructor().copy(this)},copy:function(ca){this.name=ca.name,this.fog=ca.fog,this.blending=ca.blending,this.side=ca.side,this.flatShading=ca.flatShading,this.vertexColors=ca.vertexColors,this.opacity=ca.opacity,this.transparent=ca.transparent,this.blendSrc=ca.blendSrc,this.blendDst=ca.blendDst,this.blendEquation=ca.blendEquation,this.blendSrcAlpha=ca.blendSrcAlpha,this.blendDstAlpha=ca.blendDstAlpha,this.blendEquationAlpha=ca.blendEquationAlpha,this.depthFunc=ca.depthFunc,this.depthTest=ca.depthTest,this.depthWrite=ca.depthWrite,this.stencilWriteMask=ca.stencilWriteMask,this.stencilFunc=ca.stencilFunc,this.stencilRef=ca.stencilRef,this.stencilFuncMask=ca.stencilFuncMask,this.stencilFail=ca.stencilFail,this.stencilZFail=ca.stencilZFail,this.stencilZPass=ca.stencilZPass,this.stencilWrite=ca.stencilWrite;var ga=ca.clippingPlanes,_s=null;if(ga!==null){var Ss=ga.length;_s=new Array(Ss);for(var Ms=0;Ms!==Ss;++Ms)_s[Ms]=ga[Ms].clone()}return this.clippingPlanes=_s,this.clipIntersection=ca.clipIntersection,this.clipShadows=ca.clipShadows,this.shadowSide=ca.shadowSide,this.colorWrite=ca.colorWrite,this.precision=ca.precision,this.polygonOffset=ca.polygonOffset,this.polygonOffsetFactor=ca.polygonOffsetFactor,this.polygonOffsetUnits=ca.polygonOffsetUnits,this.dithering=ca.dithering,this.alphaTest=ca.alphaTest,this.premultipliedAlpha=ca.premultipliedAlpha,this.visible=ca.visible,this.toneMapped=ca.toneMapped,this.userData=JSON.parse(JSON.stringify(ca.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});function MeshBasicMaterial(ca){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(ca)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(ca,ga,_s){if(Array.isArray(ca))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=ca,this.itemSize=ga,this.count=ca!==void 0?ca.length/ga:0,this.normalized=_s===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(ca){return this.usage=ca,this},copy:function(ca){return this.name=ca.name,this.array=new ca.array.constructor(ca.array),this.itemSize=ca.itemSize,this.count=ca.count,this.normalized=ca.normalized,this.usage=ca.usage,this},copyAt:function(ca,ga,_s){ca*=this.itemSize,_s*=ga.itemSize;for(var Ss=0,Ms=this.itemSize;Ss<Ms;Ss++)this.array[ca+Ss]=ga.array[_s+Ss];return this},copyArray:function(ca){return this.array.set(ca),this},copyColorsArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Ss),Cs=new Color),ga[_s++]=Cs.r,ga[_s++]=Cs.g,ga[_s++]=Cs.b}return this},copyVector2sArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Ss),Cs=new Vector2),ga[_s++]=Cs.x,ga[_s++]=Cs.y}return this},copyVector3sArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Ss),Cs=new Vector3),ga[_s++]=Cs.x,ga[_s++]=Cs.y,ga[_s++]=Cs.z}return this},copyVector4sArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Ss),Cs=new Vector4),ga[_s++]=Cs.x,ga[_s++]=Cs.y,ga[_s++]=Cs.z,ga[_s++]=Cs.w}return this},applyMatrix3:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyMatrix3(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyMatrix4(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyNormalMatrix(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.transformDirection(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(ca,ga){return ga===void 0&&(ga=0),this.array.set(ca,ga),this},getX:function(ca){return this.array[ca*this.itemSize]},setX:function(ca,ga){return this.array[ca*this.itemSize]=ga,this},getY:function(ca){return this.array[ca*this.itemSize+1]},setY:function(ca,ga){return this.array[ca*this.itemSize+1]=ga,this},getZ:function(ca){return this.array[ca*this.itemSize+2]},setZ:function(ca,ga){return this.array[ca*this.itemSize+2]=ga,this},getW:function(ca){return this.array[ca*this.itemSize+3]},setW:function(ca,ga){return this.array[ca*this.itemSize+3]=ga,this},setXY:function(ca,ga,_s){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=_s,this},setXYZ:function(ca,ga,_s,Ss){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=_s,this.array[ca+2]=Ss,this},setXYZW:function(ca,ga,_s,Ss,Ms){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=_s,this.array[ca+2]=Ss,this.array[ca+3]=Ms,this},onUpload:function(ca){return this.onUploadCallback=ca,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Int8Array(ca),ga,_s)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint8Array(ca),ga,_s)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint8ClampedArray(ca),ga,_s)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Int16Array(ca),ga,_s)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint16Array(ca),ga,_s)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Int32Array(ca),ga,_s)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint32Array(ca),ga,_s)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Float32Array(ca),ga,_s)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Float64Array(ca),ga,_s)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(ca){for(var ga,_s=[],Ss=void 0,Ms=ca.faces,Cs=0;Cs<Ms.length;Cs++){var Ts=Ms[Cs];Ts.materialIndex!==Ss&&(Ss=Ts.materialIndex,ga!==void 0&&(ga.count=Cs*3-ga.start,_s.push(ga)),ga={start:Cs*3,materialIndex:Ss})}ga!==void 0&&(ga.count=Cs*3-ga.start,_s.push(ga)),this.groups=_s},fromGeometry:function(ca){var ga=ca.faces,_s=ca.vertices,Ss=ca.faceVertexUvs,Ms=Ss[0]&&Ss[0].length>0,Cs=Ss[1]&&Ss[1].length>0,Ts=ca.morphTargets,Is=Ts.length,Bs;if(Is>0){Bs=[];for(var Ps=0;Ps<Is;Ps++)Bs[Ps]={name:Ts[Ps].name,data:[]};this.morphTargets.position=Bs}var Ls=ca.morphNormals,Rs=Ls.length,Os;if(Rs>0){Os=[];for(var Ps=0;Ps<Rs;Ps++)Os[Ps]={name:Ls[Ps].name,data:[]};this.morphTargets.normal=Os}var Fs=ca.skinIndices,Vs=ca.skinWeights,ks=Fs.length===_s.length,Ns=Vs.length===_s.length;_s.length>0&&ga.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Ps=0;Ps<ga.length;Ps++){var Ds=ga[Ps];this.vertices.push(_s[Ds.a],_s[Ds.b],_s[Ds.c]);var $s=Ds.vertexNormals;if($s.length===3)this.normals.push($s[0],$s[1],$s[2]);else{var Gs=Ds.normal;this.normals.push(Gs,Gs,Gs)}var Us=Ds.vertexColors;if(Us.length===3)this.colors.push(Us[0],Us[1],Us[2]);else{var Hs=Ds.color;this.colors.push(Hs,Hs,Hs)}if(Ms===!0){var zs=Ss[0][Ps];zs!==void 0?this.uvs.push(zs[0],zs[1],zs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Ps),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Cs===!0){var zs=Ss[1][Ps];zs!==void 0?this.uvs2.push(zs[0],zs[1],zs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Ps),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var js=0;js<Is;js++){var Ws=Ts[js].vertices;Bs[js].data.push(Ws[Ds.a],Ws[Ds.b],Ws[Ds.c])}for(var js=0;js<Rs;js++){var Qs=Ls[js].vertexNormals[Ps];Os[js].data.push(Qs.a,Qs.b,Qs.c)}ks&&this.skinIndices.push(Fs[Ds.a],Fs[Ds.b],Fs[Ds.c]),Ns&&this.skinWeights.push(Vs[Ds.a],Vs[Ds.b],Vs[Ds.c])}return this.computeGroups(ca),this.verticesNeedUpdate=ca.verticesNeedUpdate,this.normalsNeedUpdate=ca.normalsNeedUpdate,this.colorsNeedUpdate=ca.colorsNeedUpdate,this.uvsNeedUpdate=ca.uvsNeedUpdate,this.groupsNeedUpdate=ca.groupsNeedUpdate,ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),this}});function arrayMax(ca){if(ca.length===0)return-1/0;let ga=ca[0];for(let _s=1,Ss=ca.length;_s<Ss;++_s)ca[_s]>ga&&(ga=ca[_s]);return ga}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(ca){Array.isArray(ca)?this.index=new(arrayMax(ca)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(ca,1):this.index=ca},getAttribute:function(ca){return this.attributes[ca]},setAttribute:function(ca,ga){return this.attributes[ca]=ga,this},deleteAttribute:function(ca){return delete this.attributes[ca],this},addGroup:function(ca,ga,_s){this.groups.push({start:ca,count:ga,materialIndex:_s!==void 0?_s:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(ca,ga){this.drawRange.start=ca,this.drawRange.count=ga},applyMatrix4:function(ca){var ga=this.attributes.position;ga!==void 0&&(ga.applyMatrix4(ca),ga.needsUpdate=!0);var _s=this.attributes.normal;if(_s!==void 0){var Ss=new Matrix3().getNormalMatrix(ca);_s.applyNormalMatrix(Ss),_s.needsUpdate=!0}var Ms=this.attributes.tangent;return Ms!==void 0&&(Ms.transformDirection(ca),Ms.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(ca){return _m1$2.makeRotationX(ca),this.applyMatrix4(_m1$2),this},rotateY:function(ca){return _m1$2.makeRotationY(ca),this.applyMatrix4(_m1$2),this},rotateZ:function(ca){return _m1$2.makeRotationZ(ca),this.applyMatrix4(_m1$2),this},translate:function(ca,ga,_s){return _m1$2.makeTranslation(ca,ga,_s),this.applyMatrix4(_m1$2),this},scale:function(ca,ga,_s){return _m1$2.makeScale(ca,ga,_s),this.applyMatrix4(_m1$2),this},lookAt:function(ca){return _obj.lookAt(ca),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(ca){var ga=ca.geometry;if(ca.isPoints||ca.isLine){var _s=new Float32BufferAttribute(ga.vertices.length*3,3),Ss=new Float32BufferAttribute(ga.colors.length*3,3);if(this.setAttribute("position",_s.copyVector3sArray(ga.vertices)),this.setAttribute("color",Ss.copyColorsArray(ga.colors)),ga.lineDistances&&ga.lineDistances.length===ga.vertices.length){var Ms=new Float32BufferAttribute(ga.lineDistances.length,1);this.setAttribute("lineDistance",Ms.copyArray(ga.lineDistances))}ga.boundingSphere!==null&&(this.boundingSphere=ga.boundingSphere.clone()),ga.boundingBox!==null&&(this.boundingBox=ga.boundingBox.clone())}else ca.isMesh&&ga&&ga.isGeometry&&this.fromGeometry(ga);return this},setFromPoints:function(ca){for(var ga=[],_s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s];ga.push(Ms.x,Ms.y,Ms.z||0)}return this.setAttribute("position",new Float32BufferAttribute(ga,3)),this},updateFromObject:function(ca){var ga=ca.geometry;if(ca.isMesh){var _s=ga.__directGeometry;if(ga.elementsNeedUpdate===!0&&(_s=void 0,ga.elementsNeedUpdate=!1),_s===void 0)return this.fromGeometry(ga);_s.verticesNeedUpdate=ga.verticesNeedUpdate,_s.normalsNeedUpdate=ga.normalsNeedUpdate,_s.colorsNeedUpdate=ga.colorsNeedUpdate,_s.uvsNeedUpdate=ga.uvsNeedUpdate,_s.groupsNeedUpdate=ga.groupsNeedUpdate,ga.verticesNeedUpdate=!1,ga.normalsNeedUpdate=!1,ga.colorsNeedUpdate=!1,ga.uvsNeedUpdate=!1,ga.groupsNeedUpdate=!1,ga=_s}var Ss;return ga.verticesNeedUpdate===!0&&(Ss=this.attributes.position,Ss!==void 0&&(Ss.copyVector3sArray(ga.vertices),Ss.needsUpdate=!0),ga.verticesNeedUpdate=!1),ga.normalsNeedUpdate===!0&&(Ss=this.attributes.normal,Ss!==void 0&&(Ss.copyVector3sArray(ga.normals),Ss.needsUpdate=!0),ga.normalsNeedUpdate=!1),ga.colorsNeedUpdate===!0&&(Ss=this.attributes.color,Ss!==void 0&&(Ss.copyColorsArray(ga.colors),Ss.needsUpdate=!0),ga.colorsNeedUpdate=!1),ga.uvsNeedUpdate&&(Ss=this.attributes.uv,Ss!==void 0&&(Ss.copyVector2sArray(ga.uvs),Ss.needsUpdate=!0),ga.uvsNeedUpdate=!1),ga.lineDistancesNeedUpdate&&(Ss=this.attributes.lineDistance,Ss!==void 0&&(Ss.copyArray(ga.lineDistances),Ss.needsUpdate=!0),ga.lineDistancesNeedUpdate=!1),ga.groupsNeedUpdate&&(ga.computeGroups(ca.geometry),this.groups=ga.groups,ga.groupsNeedUpdate=!1),this},fromGeometry:function(ca){return ca.__directGeometry=new DirectGeometry().fromGeometry(ca),this.fromDirectGeometry(ca.__directGeometry)},fromDirectGeometry:function(ca){var ga=new Float32Array(ca.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(ga,3).copyVector3sArray(ca.vertices)),ca.normals.length>0){var _s=new Float32Array(ca.normals.length*3);this.setAttribute("normal",new BufferAttribute(_s,3).copyVector3sArray(ca.normals))}if(ca.colors.length>0){var Ss=new Float32Array(ca.colors.length*3);this.setAttribute("color",new BufferAttribute(Ss,3).copyColorsArray(ca.colors))}if(ca.uvs.length>0){var Ms=new Float32Array(ca.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Ms,2).copyVector2sArray(ca.uvs))}if(ca.uvs2.length>0){var Cs=new Float32Array(ca.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Cs,2).copyVector2sArray(ca.uvs2))}this.groups=ca.groups;for(var Ts in ca.morphTargets){for(var Is=[],Bs=ca.morphTargets[Ts],Ps=0,Ls=Bs.length;Ps<Ls;Ps++){var Rs=Bs[Ps],Os=new Float32BufferAttribute(Rs.data.length*3,3);Os.name=Rs.name,Is.push(Os.copyVector3sArray(Rs.data))}this.morphAttributes[Ts]=Is}if(ca.skinIndices.length>0){var Fs=new Float32BufferAttribute(ca.skinIndices.length*4,4);this.setAttribute("skinIndex",Fs.copyVector4sArray(ca.skinIndices))}if(ca.skinWeights.length>0){var Vs=new Float32BufferAttribute(ca.skinWeights.length*4,4);this.setAttribute("skinWeight",Vs.copyVector4sArray(ca.skinWeights))}return ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var ca=this.attributes.position,ga=this.morphAttributes.position;if(ca!==void 0){if(this.boundingBox.setFromBufferAttribute(ca),ga)for(var _s=0,Ss=ga.length;_s<Ss;_s++){var Ms=ga[_s];_box$2.setFromBufferAttribute(Ms),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var ca=this.attributes.position,ga=this.morphAttributes.position;if(ca){var _s=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(ca),ga)for(var Ss=0,Ms=ga.length;Ss<Ms;Ss++){var Cs=ga[Ss];_boxMorphTargets.setFromBufferAttribute(Cs),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(_s);for(var Ts=0,Ss=0,Ms=ca.count;Ss<Ms;Ss++)_vector$4.fromBufferAttribute(ca,Ss),Ts=Math.max(Ts,_s.distanceToSquared(_vector$4));if(ga)for(var Ss=0,Ms=ga.length;Ss<Ms;Ss++)for(var Cs=ga[Ss],Is=this.morphTargetsRelative,Bs=0,Ps=Cs.count;Bs<Ps;Bs++)_vector$4.fromBufferAttribute(Cs,Bs),Is&&(_offset.fromBufferAttribute(ca,Bs),_vector$4.add(_offset)),Ts=Math.max(Ts,_s.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Ts),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var ca=this.index,ga=this.attributes;if(ga.position){var _s=ga.position.array;if(ga.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(_s.length),3));else for(var Ss=ga.normal.array,Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms]=0;var Ts=ga.normal.array,Is,Bs,Ps,Ls=new Vector3,Rs=new Vector3,Os=new Vector3,Fs=new Vector3,Vs=new Vector3;if(ca)for(var ks=ca.array,Ms=0,Cs=ca.count;Ms<Cs;Ms+=3)Is=ks[Ms+0]*3,Bs=ks[Ms+1]*3,Ps=ks[Ms+2]*3,Ls.fromArray(_s,Is),Rs.fromArray(_s,Bs),Os.fromArray(_s,Ps),Fs.subVectors(Os,Rs),Vs.subVectors(Ls,Rs),Fs.cross(Vs),Ts[Is]+=Fs.x,Ts[Is+1]+=Fs.y,Ts[Is+2]+=Fs.z,Ts[Bs]+=Fs.x,Ts[Bs+1]+=Fs.y,Ts[Bs+2]+=Fs.z,Ts[Ps]+=Fs.x,Ts[Ps+1]+=Fs.y,Ts[Ps+2]+=Fs.z;else for(var Ms=0,Cs=_s.length;Ms<Cs;Ms+=9)Ls.fromArray(_s,Ms),Rs.fromArray(_s,Ms+3),Os.fromArray(_s,Ms+6),Fs.subVectors(Os,Rs),Vs.subVectors(Ls,Rs),Fs.cross(Vs),Ts[Ms]=Fs.x,Ts[Ms+1]=Fs.y,Ts[Ms+2]=Fs.z,Ts[Ms+3]=Fs.x,Ts[Ms+4]=Fs.y,Ts[Ms+5]=Fs.z,Ts[Ms+6]=Fs.x,Ts[Ms+7]=Fs.y,Ts[Ms+8]=Fs.z;this.normalizeNormals(),ga.normal.needsUpdate=!0}},merge:function(ca,ga){if(!(ca&&ca.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",ca);return}ga===void 0&&(ga=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var _s=this.attributes;for(var Ss in _s)if(ca.attributes[Ss]!==void 0)for(var Ms=_s[Ss],Cs=Ms.array,Ts=ca.attributes[Ss],Is=Ts.array,Bs=Ts.itemSize*ga,Ps=Math.min(Is.length,Cs.length-Bs),Ls=0,Rs=Bs;Ls<Ps;Ls++,Rs++)Cs[Rs]=Is[Ls];return this},normalizeNormals:function(){for(var ca=this.attributes.normal,ga=0,_s=ca.count;ga<_s;ga++)_vector$4.x=ca.getX(ga),_vector$4.y=ca.getY(ga),_vector$4.z=ca.getZ(ga),_vector$4.normalize(),ca.setXYZ(ga,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function ca(ks,Ns){for(var Ds=ks.array,$s=ks.itemSize,Gs=ks.normalized,Us=new Ds.constructor(Ns.length*$s),Hs=0,zs=0,js=0,Ws=Ns.length;js<Ws;js++){Hs=Ns[js]*$s;for(var Qs=0;Qs<$s;Qs++)Us[zs++]=Ds[Hs++]}return new BufferAttribute(Us,$s,Gs)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var ga=new BufferGeometry,_s=this.index.array,Ss=this.attributes;for(var Ms in Ss){var Cs=Ss[Ms],Ts=ca(Cs,_s);ga.setAttribute(Ms,Ts)}var Is=this.morphAttributes;for(Ms in Is){for(var Bs=[],Ps=Is[Ms],Ls=0,Rs=Ps.length;Ls<Rs;Ls++){var Cs=Ps[Ls],Ts=ca(Cs,_s);Bs.push(Ts)}ga.morphAttributes[Ms]=Bs}ga.morphTargetsRelative=this.morphTargetsRelative;for(var Os=this.groups,Ls=0,Fs=Os.length;Ls<Fs;Ls++){var Vs=Os[Ls];ga.addGroup(Vs.start,Vs.count,Vs.materialIndex)}return ga},toJSON:function(){var ca={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(ca.uuid=this.uuid,ca.type=this.type,this.name!==""&&(ca.name=this.name),Object.keys(this.userData).length>0&&(ca.userData=this.userData),this.parameters!==void 0){var ga=this.parameters;for(var _s in ga)ga[_s]!==void 0&&(ca[_s]=ga[_s]);return ca}ca.data={attributes:{}};var Ss=this.index;Ss!==null&&(ca.data.index={type:Ss.array.constructor.name,array:Array.prototype.slice.call(Ss.array)});var Ms=this.attributes;for(var _s in Ms){var Cs=Ms[_s],Ts=Cs.toJSON();Cs.name!==""&&(Ts.name=Cs.name),ca.data.attributes[_s]=Ts}var Is={},Bs=!1;for(var _s in this.morphAttributes){for(var Ps=this.morphAttributes[_s],Ls=[],Rs=0,Os=Ps.length;Rs<Os;Rs++){var Cs=Ps[Rs],Ts=Cs.toJSON();Cs.name!==""&&(Ts.name=Cs.name),Ls.push(Ts)}Ls.length>0&&(Is[_s]=Ls,Bs=!0)}Bs&&(ca.data.morphAttributes=Is,ca.data.morphTargetsRelative=this.morphTargetsRelative);var Fs=this.groups;Fs.length>0&&(ca.data.groups=JSON.parse(JSON.stringify(Fs)));var Vs=this.boundingSphere;return Vs!==null&&(ca.data.boundingSphere={center:Vs.center.toArray(),radius:Vs.radius}),ca},clone:function(){return new BufferGeometry().copy(this)},copy:function(ca){var ga,_s,Ss;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=ca.name;var Ms=ca.index;Ms!==null&&this.setIndex(Ms.clone());var Cs=ca.attributes;for(ga in Cs){var Ts=Cs[ga];this.setAttribute(ga,Ts.clone())}var Is=ca.morphAttributes;for(ga in Is){var Bs=[],Ps=Is[ga];for(_s=0,Ss=Ps.length;_s<Ss;_s++)Bs.push(Ps[_s].clone());this.morphAttributes[ga]=Bs}this.morphTargetsRelative=ca.morphTargetsRelative;var Ls=ca.groups;for(_s=0,Ss=Ls.length;_s<Ss;_s++){var Rs=Ls[_s];this.addGroup(Rs.start,Rs.count,Rs.materialIndex)}var Os=ca.boundingBox;Os!==null&&(this.boundingBox=Os.clone());var Fs=ca.boundingSphere;return Fs!==null&&(this.boundingSphere=Fs.clone()),this.drawRange.start=ca.drawRange.start,this.drawRange.count=ca.drawRange.count,this.userData=ca.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(ca,ga){Object3D.call(this),this.type="Mesh",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(ca){return Object3D.prototype.copy.call(this,ca),ca.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=ca.morphTargetInfluences.slice()),ca.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},ca.morphTargetDictionary)),this},updateMorphTargets:function(){var ca=this.geometry,ga,_s,Ss;if(ca.isBufferGeometry){var Ms=ca.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,_s=Ts.length;ga<_s;ga++)Ss=Ts[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=ga}}else{var Is=ca.morphTargets;Is!==void 0&&Is.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(ca,ga){var _s=this.geometry,Ss=this.material,Ms=this.matrixWorld;if(Ss!==void 0&&(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere.copy(_s.boundingSphere),_sphere.applyMatrix4(Ms),ca.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Ms),_ray.copy(ca.ray).applyMatrix4(_inverseMatrix),!(_s.boundingBox!==null&&_ray.intersectsBox(_s.boundingBox)===!1)))){var Cs;if(_s.isBufferGeometry){var Ts,Is,Bs,Ps=_s.index,Ls=_s.attributes.position,Rs=_s.morphAttributes.position,Os=_s.morphTargetsRelative,Fs=_s.attributes.uv,Vs=_s.attributes.uv2,ks=_s.groups,Ns=_s.drawRange,Ds,$s,Gs,Us,Hs,zs,js,Ws;if(Ps!==null)if(Array.isArray(Ss))for(Ds=0,Gs=ks.length;Ds<Gs;Ds++)for(Hs=ks[Ds],zs=Ss[Hs.materialIndex],js=Math.max(Hs.start,Ns.start),Ws=Math.min(Hs.start+Hs.count,Ns.start+Ns.count),$s=js,Us=Ws;$s<Us;$s+=3)Ts=Ps.getX($s),Is=Ps.getX($s+1),Bs=Ps.getX($s+2),Cs=checkBufferGeometryIntersection(this,zs,ca,_ray,Ls,Rs,Os,Fs,Vs,Ts,Is,Bs),Cs&&(Cs.faceIndex=Math.floor($s/3),Cs.face.materialIndex=Hs.materialIndex,ga.push(Cs));else for(js=Math.max(0,Ns.start),Ws=Math.min(Ps.count,Ns.start+Ns.count),Ds=js,Gs=Ws;Ds<Gs;Ds+=3)Ts=Ps.getX(Ds),Is=Ps.getX(Ds+1),Bs=Ps.getX(Ds+2),Cs=checkBufferGeometryIntersection(this,Ss,ca,_ray,Ls,Rs,Os,Fs,Vs,Ts,Is,Bs),Cs&&(Cs.faceIndex=Math.floor(Ds/3),ga.push(Cs));else if(Ls!==void 0)if(Array.isArray(Ss))for(Ds=0,Gs=ks.length;Ds<Gs;Ds++)for(Hs=ks[Ds],zs=Ss[Hs.materialIndex],js=Math.max(Hs.start,Ns.start),Ws=Math.min(Hs.start+Hs.count,Ns.start+Ns.count),$s=js,Us=Ws;$s<Us;$s+=3)Ts=$s,Is=$s+1,Bs=$s+2,Cs=checkBufferGeometryIntersection(this,zs,ca,_ray,Ls,Rs,Os,Fs,Vs,Ts,Is,Bs),Cs&&(Cs.faceIndex=Math.floor($s/3),Cs.face.materialIndex=Hs.materialIndex,ga.push(Cs));else for(js=Math.max(0,Ns.start),Ws=Math.min(Ls.count,Ns.start+Ns.count),Ds=js,Gs=Ws;Ds<Gs;Ds+=3)Ts=Ds,Is=Ds+1,Bs=Ds+2,Cs=checkBufferGeometryIntersection(this,Ss,ca,_ray,Ls,Rs,Os,Fs,Vs,Ts,Is,Bs),Cs&&(Cs.faceIndex=Math.floor(Ds/3),ga.push(Cs))}else if(_s.isGeometry){var Qs,Zs,Xs,eu=Array.isArray(Ss),Ys=_s.vertices,Js=_s.faces,qs,ru=_s.faceVertexUvs[0];ru.length>0&&(qs=ru);for(var tu=0,nu=Js.length;tu<nu;tu++){var uu=Js[tu],fu=eu?Ss[uu.materialIndex]:Ss;if(fu!==void 0&&(Qs=Ys[uu.a],Zs=Ys[uu.b],Xs=Ys[uu.c],Cs=checkIntersection(this,fu,ca,_ray,Qs,Zs,Xs,_intersectionPoint),Cs)){if(qs&&qs[tu]){var mu=qs[tu];_uvA.copy(mu[0]),_uvB.copy(mu[1]),_uvC.copy(mu[2]),Cs.uv=Triangle.getUV(_intersectionPoint,Qs,Zs,Xs,_uvA,_uvB,_uvC,new Vector2)}Cs.face=uu,Cs.faceIndex=tu,ga.push(Cs)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(ca,ga,_s,Ss,Ms,Cs,Ts,Is){var Bs;if(ga.side===BackSide?Bs=Ss.intersectTriangle(Ts,Cs,Ms,!0,Is):Bs=Ss.intersectTriangle(Ms,Cs,Ts,ga.side!==DoubleSide,Is),Bs===null)return null;_intersectionPointWorld.copy(Is),_intersectionPointWorld.applyMatrix4(ca.matrixWorld);var Ps=_s.ray.origin.distanceTo(_intersectionPointWorld);return Ps<_s.near||Ps>_s.far?null:{distance:Ps,point:_intersectionPointWorld.clone(),object:ca}}function checkBufferGeometryIntersection(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs){_vA.fromBufferAttribute(Ms,Ps),_vB.fromBufferAttribute(Ms,Ls),_vC.fromBufferAttribute(Ms,Rs);var Os=ca.morphTargetInfluences;if(ga.morphTargets&&Cs&&Os){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Fs=0,Vs=Cs.length;Fs<Vs;Fs++){var ks=Os[Fs],Ns=Cs[Fs];ks!==0&&(_tempA.fromBufferAttribute(Ns,Ps),_tempB.fromBufferAttribute(Ns,Ls),_tempC.fromBufferAttribute(Ns,Rs),Ts?(_morphA.addScaledVector(_tempA,ks),_morphB.addScaledVector(_tempB,ks),_morphC.addScaledVector(_tempC,ks)):(_morphA.addScaledVector(_tempA.sub(_vA),ks),_morphB.addScaledVector(_tempB.sub(_vB),ks),_morphC.addScaledVector(_tempC.sub(_vC),ks)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}ca.isSkinnedMesh&&(ca.boneTransform(Ps,_vA),ca.boneTransform(Ls,_vB),ca.boneTransform(Rs,_vC));var Ds=checkIntersection(ca,ga,_s,Ss,_vA,_vB,_vC,_intersectionPoint);if(Ds){Is&&(_uvA.fromBufferAttribute(Is,Ps),_uvB.fromBufferAttribute(Is,Ls),_uvC.fromBufferAttribute(Is,Rs),Ds.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Bs&&(_uvA.fromBufferAttribute(Bs,Ps),_uvB.fromBufferAttribute(Bs,Ls),_uvC.fromBufferAttribute(Bs,Rs),Ds.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var $s=new Face3(Ps,Ls,Rs);Triangle.getNormal(_vA,_vB,_vC,$s.normal),Ds.face=$s}return Ds}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(ca){for(var ga=new Matrix3().getNormalMatrix(ca),_s=0,Ss=this.vertices.length;_s<Ss;_s++){var Ms=this.vertices[_s];Ms.applyMatrix4(ca)}for(var _s=0,Ss=this.faces.length;_s<Ss;_s++){var Cs=this.faces[_s];Cs.normal.applyMatrix3(ga).normalize();for(var Ts=0,Is=Cs.vertexNormals.length;Ts<Is;Ts++)Cs.vertexNormals[Ts].applyMatrix3(ga).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(ca){return _m1$3.makeRotationX(ca),this.applyMatrix4(_m1$3),this},rotateY:function(ca){return _m1$3.makeRotationY(ca),this.applyMatrix4(_m1$3),this},rotateZ:function(ca){return _m1$3.makeRotationZ(ca),this.applyMatrix4(_m1$3),this},translate:function(ca,ga,_s){return _m1$3.makeTranslation(ca,ga,_s),this.applyMatrix4(_m1$3),this},scale:function(ca,ga,_s){return _m1$3.makeScale(ca,ga,_s),this.applyMatrix4(_m1$3),this},lookAt:function(ca){return _obj$1.lookAt(ca),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(ca){var ga=this,_s=ca.index!==null?ca.index.array:void 0,Ss=ca.attributes;if(Ss.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Ms=Ss.position.array,Cs=Ss.normal!==void 0?Ss.normal.array:void 0,Ts=Ss.color!==void 0?Ss.color.array:void 0,Is=Ss.uv!==void 0?Ss.uv.array:void 0,Bs=Ss.uv2!==void 0?Ss.uv2.array:void 0;Bs!==void 0&&(this.faceVertexUvs[1]=[]);for(var Ps=0;Ps<Ms.length;Ps+=3)ga.vertices.push(new Vector3().fromArray(Ms,Ps)),Ts!==void 0&&ga.colors.push(new Color().fromArray(Ts,Ps));function Ls(Ds,$s,Gs,Us){var Hs=Ts===void 0?[]:[ga.colors[Ds].clone(),ga.colors[$s].clone(),ga.colors[Gs].clone()],zs=Cs===void 0?[]:[new Vector3().fromArray(Cs,Ds*3),new Vector3().fromArray(Cs,$s*3),new Vector3().fromArray(Cs,Gs*3)],js=new Face3(Ds,$s,Gs,zs,Hs,Us);ga.faces.push(js),Is!==void 0&&ga.faceVertexUvs[0].push([new Vector2().fromArray(Is,Ds*2),new Vector2().fromArray(Is,$s*2),new Vector2().fromArray(Is,Gs*2)]),Bs!==void 0&&ga.faceVertexUvs[1].push([new Vector2().fromArray(Bs,Ds*2),new Vector2().fromArray(Bs,$s*2),new Vector2().fromArray(Bs,Gs*2)])}var Rs=ca.groups;if(Rs.length>0)for(var Ps=0;Ps<Rs.length;Ps++)for(var Os=Rs[Ps],Fs=Os.start,Vs=Os.count,ks=Fs,Ns=Fs+Vs;ks<Ns;ks+=3)_s!==void 0?Ls(_s[ks],_s[ks+1],_s[ks+2],Os.materialIndex):Ls(ks,ks+1,ks+2,Os.materialIndex);else if(_s!==void 0)for(var Ps=0;Ps<_s.length;Ps+=3)Ls(_s[Ps],_s[Ps+1],_s[Ps+2]);else for(var Ps=0;Ps<Ms.length/3;Ps+=3)Ls(Ps,Ps+1,Ps+2);return this.computeFaceNormals(),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var ca=this.boundingSphere.center,ga=this.boundingSphere.radius,_s=ga===0?1:1/ga,Ss=new Matrix4;return Ss.set(_s,0,0,-_s*ca.x,0,_s,0,-_s*ca.y,0,0,_s,-_s*ca.z,0,0,0,1),this.applyMatrix4(Ss),this},computeFaceNormals:function(){for(var ca=new Vector3,ga=new Vector3,_s=0,Ss=this.faces.length;_s<Ss;_s++){var Ms=this.faces[_s],Cs=this.vertices[Ms.a],Ts=this.vertices[Ms.b],Is=this.vertices[Ms.c];ca.subVectors(Is,Ts),ga.subVectors(Cs,Ts),ca.cross(ga),ca.normalize(),Ms.normal.copy(ca)}},computeVertexNormals:function(ca){ca===void 0&&(ca=!0);var ga,_s,Ss,Ms,Cs,Ts;for(Ts=new Array(this.vertices.length),ga=0,_s=this.vertices.length;ga<_s;ga++)Ts[ga]=new Vector3;if(ca){var Is,Bs,Ps,Ls=new Vector3,Rs=new Vector3;for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)Cs=this.faces[Ss],Is=this.vertices[Cs.a],Bs=this.vertices[Cs.b],Ps=this.vertices[Cs.c],Ls.subVectors(Ps,Bs),Rs.subVectors(Is,Bs),Ls.cross(Rs),Ts[Cs.a].add(Ls),Ts[Cs.b].add(Ls),Ts[Cs.c].add(Ls)}else for(this.computeFaceNormals(),Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)Cs=this.faces[Ss],Ts[Cs.a].add(Cs.normal),Ts[Cs.b].add(Cs.normal),Ts[Cs.c].add(Cs.normal);for(ga=0,_s=this.vertices.length;ga<_s;ga++)Ts[ga].normalize();for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++){Cs=this.faces[Ss];var Os=Cs.vertexNormals;Os.length===3?(Os[0].copy(Ts[Cs.a]),Os[1].copy(Ts[Cs.b]),Os[2].copy(Ts[Cs.c])):(Os[0]=Ts[Cs.a].clone(),Os[1]=Ts[Cs.b].clone(),Os[2]=Ts[Cs.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var ca,ga,_s;for(this.computeFaceNormals(),ca=0,ga=this.faces.length;ca<ga;ca++){_s=this.faces[ca];var Ss=_s.vertexNormals;Ss.length===3?(Ss[0].copy(_s.normal),Ss[1].copy(_s.normal),Ss[2].copy(_s.normal)):(Ss[0]=_s.normal.clone(),Ss[1]=_s.normal.clone(),Ss[2]=_s.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var ca,ga,_s,Ss,Ms;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)for(Ms=this.faces[_s],Ms.__originalFaceNormal?Ms.__originalFaceNormal.copy(Ms.normal):Ms.__originalFaceNormal=Ms.normal.clone(),Ms.__originalVertexNormals||(Ms.__originalVertexNormals=[]),ca=0,ga=Ms.vertexNormals.length;ca<ga;ca++)Ms.__originalVertexNormals[ca]?Ms.__originalVertexNormals[ca].copy(Ms.vertexNormals[ca]):Ms.__originalVertexNormals[ca]=Ms.vertexNormals[ca].clone();var Cs=new Geometry;for(Cs.faces=this.faces,ca=0,ga=this.morphTargets.length;ca<ga;ca++){if(!this.morphNormals[ca]){this.morphNormals[ca]={},this.morphNormals[ca].faceNormals=[],this.morphNormals[ca].vertexNormals=[];var Ts=this.morphNormals[ca].faceNormals,Is=this.morphNormals[ca].vertexNormals,Ps,Ls;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ps=new Vector3,Ls={a:new Vector3,b:new Vector3,c:new Vector3},Ts.push(Ps),Is.push(Ls)}var Bs=this.morphNormals[ca];Cs.vertices=this.morphTargets[ca].vertices,Cs.computeFaceNormals(),Cs.computeVertexNormals();var Ps,Ls;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ms=this.faces[_s],Ps=Bs.faceNormals[_s],Ls=Bs.vertexNormals[_s],Ps.copy(Ms.normal),Ls.a.copy(Ms.vertexNormals[0]),Ls.b.copy(Ms.vertexNormals[1]),Ls.c.copy(Ms.vertexNormals[2])}for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ms=this.faces[_s],Ms.normal=Ms.__originalFaceNormal,Ms.vertexNormals=Ms.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(ca,ga,_s){if(!(ca&&ca.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",ca);return}var Ss,Ms=this.vertices.length,Cs=this.vertices,Ts=ca.vertices,Is=this.faces,Bs=ca.faces,Ps=this.colors,Ls=ca.colors;_s===void 0&&(_s=0),ga!==void 0&&(Ss=new Matrix3().getNormalMatrix(ga));for(var Rs=0,Os=Ts.length;Rs<Os;Rs++){var Fs=Ts[Rs],Vs=Fs.clone();ga!==void 0&&Vs.applyMatrix4(ga),Cs.push(Vs)}for(var Rs=0,Os=Ls.length;Rs<Os;Rs++)Ps.push(Ls[Rs].clone());for(Rs=0,Os=Bs.length;Rs<Os;Rs++){var ks=Bs[Rs],Ns,Ds,$s,Gs=ks.vertexNormals,Us=ks.vertexColors;Ns=new Face3(ks.a+Ms,ks.b+Ms,ks.c+Ms),Ns.normal.copy(ks.normal),Ss!==void 0&&Ns.normal.applyMatrix3(Ss).normalize();for(var Hs=0,zs=Gs.length;Hs<zs;Hs++)Ds=Gs[Hs].clone(),Ss!==void 0&&Ds.applyMatrix3(Ss).normalize(),Ns.vertexNormals.push(Ds);Ns.color.copy(ks.color);for(var Hs=0,zs=Us.length;Hs<zs;Hs++)$s=Us[Hs],Ns.vertexColors.push($s.clone());Ns.materialIndex=ks.materialIndex+_s,Is.push(Ns)}for(var Rs=0,Os=ca.faceVertexUvs.length;Rs<Os;Rs++){var js=ca.faceVertexUvs[Rs];this.faceVertexUvs[Rs]===void 0&&(this.faceVertexUvs[Rs]=[]);for(var Hs=0,zs=js.length;Hs<zs;Hs++){for(var Ws=js[Hs],Qs=[],Zs=0,Xs=Ws.length;Zs<Xs;Zs++)Qs.push(Ws[Zs].clone());this.faceVertexUvs[Rs].push(Qs)}}},mergeMesh:function(ca){if(!(ca&&ca.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",ca);return}ca.matrixAutoUpdate&&ca.updateMatrix(),this.merge(ca.geometry,ca.matrix)},mergeVertices:function(){var ca={},ga=[],_s=[],Ss,Ms,Cs=4,Ts=Math.pow(10,Cs),Is,Bs,Ps,Ls,Rs,Os;for(Is=0,Bs=this.vertices.length;Is<Bs;Is++)Ss=this.vertices[Is],Ms=Math.round(Ss.x*Ts)+"_"+Math.round(Ss.y*Ts)+"_"+Math.round(Ss.z*Ts),ca[Ms]===void 0?(ca[Ms]=Is,ga.push(this.vertices[Is]),_s[Is]=ga.length-1):_s[Is]=_s[ca[Ms]];var Fs=[];for(Is=0,Bs=this.faces.length;Is<Bs;Is++){Ps=this.faces[Is],Ps.a=_s[Ps.a],Ps.b=_s[Ps.b],Ps.c=_s[Ps.c],Ls=[Ps.a,Ps.b,Ps.c];for(var Vs=0;Vs<3;Vs++)if(Ls[Vs]===Ls[(Vs+1)%3]){Fs.push(Is);break}}for(Is=Fs.length-1;Is>=0;Is--){var ks=Fs[Is];for(this.faces.splice(ks,1),Rs=0,Os=this.faceVertexUvs.length;Rs<Os;Rs++)this.faceVertexUvs[Rs].splice(ks,1)}var Ns=this.vertices.length-ga.length;return this.vertices=ga,Ns},setFromPoints:function(ca){this.vertices=[];for(var ga=0,_s=ca.length;ga<_s;ga++){var Ss=ca[ga];this.vertices.push(new Vector3(Ss.x,Ss.y,Ss.z||0))}return this},sortFacesByMaterialIndex:function(){for(var ca=this.faces,ga=ca.length,_s=0;_s<ga;_s++)ca[_s]._id=_s;function Ss(Ps,Ls){return Ps.materialIndex-Ls.materialIndex}ca.sort(Ss);var Ms=this.faceVertexUvs[0],Cs=this.faceVertexUvs[1],Ts,Is;Ms&&Ms.length===ga&&(Ts=[]),Cs&&Cs.length===ga&&(Is=[]);for(var _s=0;_s<ga;_s++){var Bs=ca[_s]._id;Ts&&Ts.push(Ms[Bs]),Is&&Is.push(Cs[Bs])}Ts&&(this.faceVertexUvs[0]=Ts),Is&&(this.faceVertexUvs[1]=Is)},toJSON:function(){var ca={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(ca.uuid=this.uuid,ca.type=this.type,this.name!==""&&(ca.name=this.name),this.parameters!==void 0){var ga=this.parameters;for(var _s in ga)ga[_s]!==void 0&&(ca[_s]=ga[_s]);return ca}for(var Ss=[],Ms=0;Ms<this.vertices.length;Ms++){var Cs=this.vertices[Ms];Ss.push(Cs.x,Cs.y,Cs.z)}for(var Ts=[],Is=[],Bs={},Ps=[],Ls={},Rs=[],Os={},Ms=0;Ms<this.faces.length;Ms++){var Fs=this.faces[Ms],Vs=!0,ks=!1,Ns=this.faceVertexUvs[0][Ms]!==void 0,Ds=Fs.normal.length()>0,$s=Fs.vertexNormals.length>0,Gs=Fs.color.r!==1||Fs.color.g!==1||Fs.color.b!==1,Us=Fs.vertexColors.length>0,Hs=0;if(Hs=Qs(Hs,0,0),Hs=Qs(Hs,1,Vs),Hs=Qs(Hs,2,ks),Hs=Qs(Hs,3,Ns),Hs=Qs(Hs,4,Ds),Hs=Qs(Hs,5,$s),Hs=Qs(Hs,6,Gs),Hs=Qs(Hs,7,Us),Ts.push(Hs),Ts.push(Fs.a,Fs.b,Fs.c),Ts.push(Fs.materialIndex),Ns){var zs=this.faceVertexUvs[0][Ms];Ts.push(eu(zs[0]),eu(zs[1]),eu(zs[2]))}if(Ds&&Ts.push(Zs(Fs.normal)),$s){var js=Fs.vertexNormals;Ts.push(Zs(js[0]),Zs(js[1]),Zs(js[2]))}if(Gs&&Ts.push(Xs(Fs.color)),Us){var Ws=Fs.vertexColors;Ts.push(Xs(Ws[0]),Xs(Ws[1]),Xs(Ws[2]))}}function Qs(Ys,Js,qs){return qs?Ys|1<<Js:Ys&~(1<<Js)}function Zs(Ys){var Js=Ys.x.toString()+Ys.y.toString()+Ys.z.toString();return Bs[Js]!==void 0||(Bs[Js]=Is.length/3,Is.push(Ys.x,Ys.y,Ys.z)),Bs[Js]}function Xs(Ys){var Js=Ys.r.toString()+Ys.g.toString()+Ys.b.toString();return Ls[Js]!==void 0||(Ls[Js]=Ps.length,Ps.push(Ys.getHex())),Ls[Js]}function eu(Ys){var Js=Ys.x.toString()+Ys.y.toString();return Os[Js]!==void 0||(Os[Js]=Rs.length/2,Rs.push(Ys.x,Ys.y)),Os[Js]}return ca.data={},ca.data.vertices=Ss,ca.data.normals=Is,Ps.length>0&&(ca.data.colors=Ps),Rs.length>0&&(ca.data.uvs=[Rs]),ca.data.faces=Ts,ca},clone:function(){return new Geometry().copy(this)},copy:function(ca){var ga,_s,Ss,Ms,Cs,Ts;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=ca.name;var Is=ca.vertices;for(ga=0,_s=Is.length;ga<_s;ga++)this.vertices.push(Is[ga].clone());var Bs=ca.colors;for(ga=0,_s=Bs.length;ga<_s;ga++)this.colors.push(Bs[ga].clone());var Ps=ca.faces;for(ga=0,_s=Ps.length;ga<_s;ga++)this.faces.push(Ps[ga].clone());for(ga=0,_s=ca.faceVertexUvs.length;ga<_s;ga++){var Ls=ca.faceVertexUvs[ga];for(this.faceVertexUvs[ga]===void 0&&(this.faceVertexUvs[ga]=[]),Ss=0,Ms=Ls.length;Ss<Ms;Ss++){var Rs=Ls[Ss],Os=[];for(Cs=0,Ts=Rs.length;Cs<Ts;Cs++){var Fs=Rs[Cs];Os.push(Fs.clone())}this.faceVertexUvs[ga].push(Os)}}var Vs=ca.morphTargets;for(ga=0,_s=Vs.length;ga<_s;ga++){var ks={};if(ks.name=Vs[ga].name,Vs[ga].vertices!==void 0)for(ks.vertices=[],Ss=0,Ms=Vs[ga].vertices.length;Ss<Ms;Ss++)ks.vertices.push(Vs[ga].vertices[Ss].clone());if(Vs[ga].normals!==void 0)for(ks.normals=[],Ss=0,Ms=Vs[ga].normals.length;Ss<Ms;Ss++)ks.normals.push(Vs[ga].normals[Ss].clone());this.morphTargets.push(ks)}var Ns=ca.morphNormals;for(ga=0,_s=Ns.length;ga<_s;ga++){var Ds={};if(Ns[ga].vertexNormals!==void 0)for(Ds.vertexNormals=[],Ss=0,Ms=Ns[ga].vertexNormals.length;Ss<Ms;Ss++){var $s=Ns[ga].vertexNormals[Ss],Gs={};Gs.a=$s.a.clone(),Gs.b=$s.b.clone(),Gs.c=$s.c.clone(),Ds.vertexNormals.push(Gs)}if(Ns[ga].faceNormals!==void 0)for(Ds.faceNormals=[],Ss=0,Ms=Ns[ga].faceNormals.length;Ss<Ms;Ss++)Ds.faceNormals.push(Ns[ga].faceNormals[Ss].clone());this.morphNormals.push(Ds)}var Us=ca.skinWeights;for(ga=0,_s=Us.length;ga<_s;ga++)this.skinWeights.push(Us[ga].clone());var Hs=ca.skinIndices;for(ga=0,_s=Hs.length;ga<_s;ga++)this.skinIndices.push(Hs[ga].clone());var zs=ca.lineDistances;for(ga=0,_s=zs.length;ga<_s;ga++)this.lineDistances.push(zs[ga]);var js=ca.boundingBox;js!==null&&(this.boundingBox=js.clone());var Ws=ca.boundingSphere;return Ws!==null&&(this.boundingSphere=Ws.clone()),this.elementsNeedUpdate=ca.elementsNeedUpdate,this.verticesNeedUpdate=ca.verticesNeedUpdate,this.uvsNeedUpdate=ca.uvsNeedUpdate,this.normalsNeedUpdate=ca.normalsNeedUpdate,this.colorsNeedUpdate=ca.colorsNeedUpdate,this.lineDistancesNeedUpdate=ca.lineDistancesNeedUpdate,this.groupsNeedUpdate=ca.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(ga,_s,Ss,Ms,Cs,Ts){super(),this.type="BoxGeometry",this.parameters={width:ga,height:_s,depth:Ss,widthSegments:Ms,heightSegments:Cs,depthSegments:Ts},this.fromBufferGeometry(new BoxBufferGeometry(ga,_s,Ss,Ms,Cs,Ts)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(ga,_s,Ss,Ms,Cs,Ts){super(),this.type="BoxBufferGeometry",this.parameters={width:ga,height:_s,depth:Ss,widthSegments:Ms,heightSegments:Cs,depthSegments:Ts};const Is=this;ga=ga||1,_s=_s||1,Ss=Ss||1,Ms=Math.floor(Ms)||1,Cs=Math.floor(Cs)||1,Ts=Math.floor(Ts)||1;const Bs=[],Ps=[],Ls=[],Rs=[];let Os=0,Fs=0;Vs("z","y","x",-1,-1,Ss,_s,ga,Ts,Cs,0),Vs("z","y","x",1,-1,Ss,_s,-ga,Ts,Cs,1),Vs("x","z","y",1,1,ga,Ss,_s,Ms,Ts,2),Vs("x","z","y",1,-1,ga,Ss,-_s,Ms,Ts,3),Vs("x","y","z",1,-1,ga,_s,Ss,Ms,Cs,4),Vs("x","y","z",-1,-1,ga,_s,-Ss,Ms,Cs,5),this.setIndex(Bs),this.setAttribute("position",new Float32BufferAttribute(Ps,3)),this.setAttribute("normal",new Float32BufferAttribute(Ls,3)),this.setAttribute("uv",new Float32BufferAttribute(Rs,2));function Vs(ks,Ns,Ds,$s,Gs,Us,Hs,zs,js,Ws,Qs){const Zs=Us/js,Xs=Hs/Ws,eu=Us/2,Ys=Hs/2,Js=zs/2,qs=js+1,ru=Ws+1;let tu=0,nu=0;const uu=new Vector3;for(let fu=0;fu<ru;fu++){const mu=fu*Xs-Ys;for(let vu=0;vu<qs;vu++){const Eu=vu*Zs-eu;uu[ks]=Eu*$s,uu[Ns]=mu*Gs,uu[Ds]=Js,Ps.push(uu.x,uu.y,uu.z),uu[ks]=0,uu[Ns]=0,uu[Ds]=zs>0?1:-1,Ls.push(uu.x,uu.y,uu.z),Rs.push(vu/js),Rs.push(1-fu/Ws),tu+=1}}for(let fu=0;fu<Ws;fu++)for(let mu=0;mu<js;mu++){const vu=Os+mu+qs*fu,Eu=Os+mu+qs*(fu+1),hu=Os+(mu+1)+qs*(fu+1),pu=Os+(mu+1)+qs*fu;Bs.push(vu,Eu,pu),Bs.push(Eu,hu,pu),nu+=6}Is.addGroup(Fs,nu,Qs),Fs+=nu,Os+=tu}}}function cloneUniforms(ca){var ga={};for(var _s in ca){ga[_s]={};for(var Ss in ca[_s]){var Ms=ca[_s][Ss];Ms&&(Ms.isColor||Ms.isMatrix3||Ms.isMatrix4||Ms.isVector2||Ms.isVector3||Ms.isVector4||Ms.isTexture)?ga[_s][Ss]=Ms.clone():Array.isArray(Ms)?ga[_s][Ss]=Ms.slice():ga[_s][Ss]=Ms}}return ga}function mergeUniforms(ca){for(var ga={},_s=0;_s<ca.length;_s++){var Ss=cloneUniforms(ca[_s]);for(var Ms in Ss)ga[Ms]=Ss[Ms]}return ga}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(ca){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,ca!==void 0&&(ca.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(ca))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.fragmentShader=ca.fragmentShader,this.vertexShader=ca.vertexShader,this.uniforms=cloneUniforms(ca.uniforms),this.defines=Object.assign({},ca.defines),this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.lights=ca.lights,this.clipping=ca.clipping,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this.extensions=Object.assign({},ca.extensions),this};ShaderMaterial.prototype.toJSON=function(ca){var ga=Material.prototype.toJSON.call(this,ca);ga.uniforms={};for(var _s in this.uniforms){var Ss=this.uniforms[_s],Ms=Ss.value;Ms&&Ms.isTexture?ga.uniforms[_s]={type:"t",value:Ms.toJSON(ca).uuid}:Ms&&Ms.isColor?ga.uniforms[_s]={type:"c",value:Ms.getHex()}:Ms&&Ms.isVector2?ga.uniforms[_s]={type:"v2",value:Ms.toArray()}:Ms&&Ms.isVector3?ga.uniforms[_s]={type:"v3",value:Ms.toArray()}:Ms&&Ms.isVector4?ga.uniforms[_s]={type:"v4",value:Ms.toArray()}:Ms&&Ms.isMatrix3?ga.uniforms[_s]={type:"m3",value:Ms.toArray()}:Ms&&Ms.isMatrix4?ga.uniforms[_s]={type:"m4",value:Ms.toArray()}:ga.uniforms[_s]={value:Ms}}Object.keys(this.defines).length>0&&(ga.defines=this.defines),ga.vertexShader=this.vertexShader,ga.fragmentShader=this.fragmentShader;var Cs={};for(var Ts in this.extensions)this.extensions[Ts]===!0&&(Cs[Ts]=!0);return Object.keys(Cs).length>0&&(ga.extensions=Cs),ga};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(ca,ga){return Object3D.prototype.copy.call(this,ca,ga),this.matrixWorldInverse.copy(ca.matrixWorldInverse),this.projectionMatrix.copy(ca.projectionMatrix),this.projectionMatrixInverse.copy(ca.projectionMatrixInverse),this},getWorldDirection:function(ca){ca===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0);var ga=this.matrixWorld.elements;return ca.set(-ga[8],-ga[9],-ga[10]).normalize()},updateMatrixWorld:function(ca){Object3D.prototype.updateMatrixWorld.call(this,ca),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(ca,ga){Object3D.prototype.updateWorldMatrix.call(this,ca,ga),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(ca,ga,_s,Ss){Camera.call(this),this.type="PerspectiveCamera",this.fov=ca!==void 0?ca:50,this.zoom=1,this.near=_s!==void 0?_s:.1,this.far=Ss!==void 0?Ss:2e3,this.focus=10,this.aspect=ga!==void 0?ga:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(ca,ga){return Camera.prototype.copy.call(this,ca,ga),this.fov=ca.fov,this.zoom=ca.zoom,this.near=ca.near,this.far=ca.far,this.focus=ca.focus,this.aspect=ca.aspect,this.view=ca.view===null?null:Object.assign({},ca.view),this.filmGauge=ca.filmGauge,this.filmOffset=ca.filmOffset,this},setFocalLength:function(ca){var ga=.5*this.getFilmHeight()/ca;this.fov=MathUtils.RAD2DEG*2*Math.atan(ga),this.updateProjectionMatrix()},getFocalLength:function(){var ca=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/ca},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(ca,ga,_s,Ss,Ms,Cs){this.aspect=ca/ga,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ca,this.view.fullHeight=ga,this.view.offsetX=_s,this.view.offsetY=Ss,this.view.width=Ms,this.view.height=Cs,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var ca=this.near,ga=ca*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,_s=2*ga,Ss=this.aspect*_s,Ms=-.5*Ss,Cs=this.view;if(this.view!==null&&this.view.enabled){var Ts=Cs.fullWidth,Is=Cs.fullHeight;Ms+=Cs.offsetX*Ss/Ts,ga-=Cs.offsetY*_s/Is,Ss*=Cs.width/Ts,_s*=Cs.height/Is}var Bs=this.filmOffset;Bs!==0&&(Ms+=ca*Bs/this.getFilmWidth()),this.projectionMatrix.makePerspective(Ms,Ms+Ss,ga,ga-_s,ca,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.fov=this.fov,ga.object.zoom=this.zoom,ga.object.near=this.near,ga.object.far=this.far,ga.object.focus=this.focus,ga.object.aspect=this.aspect,this.view!==null&&(ga.object.view=Object.assign({},this.view)),ga.object.filmGauge=this.filmGauge,ga.object.filmOffset=this.filmOffset,ga}});var fov=90,aspect=1;function CubeCamera(ca,ga,_s){if(Object3D.call(this),this.type="CubeCamera",_s.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=_s;var Ss=new PerspectiveCamera(fov,aspect,ca,ga);Ss.layers=this.layers,Ss.up.set(0,-1,0),Ss.lookAt(new Vector3(1,0,0)),this.add(Ss);var Ms=new PerspectiveCamera(fov,aspect,ca,ga);Ms.layers=this.layers,Ms.up.set(0,-1,0),Ms.lookAt(new Vector3(-1,0,0)),this.add(Ms);var Cs=new PerspectiveCamera(fov,aspect,ca,ga);Cs.layers=this.layers,Cs.up.set(0,0,1),Cs.lookAt(new Vector3(0,1,0)),this.add(Cs);var Ts=new PerspectiveCamera(fov,aspect,ca,ga);Ts.layers=this.layers,Ts.up.set(0,0,-1),Ts.lookAt(new Vector3(0,-1,0)),this.add(Ts);var Is=new PerspectiveCamera(fov,aspect,ca,ga);Is.layers=this.layers,Is.up.set(0,-1,0),Is.lookAt(new Vector3(0,0,1)),this.add(Is);var Bs=new PerspectiveCamera(fov,aspect,ca,ga);Bs.layers=this.layers,Bs.up.set(0,-1,0),Bs.lookAt(new Vector3(0,0,-1)),this.add(Bs),this.update=function(Ps,Ls){this.parent===null&&this.updateMatrixWorld();var Rs=Ps.xr.enabled,Os=Ps.getRenderTarget();Ps.xr.enabled=!1;var Fs=_s.texture.generateMipmaps;_s.texture.generateMipmaps=!1,Ps.setRenderTarget(_s,0),Ps.render(Ls,Ss),Ps.setRenderTarget(_s,1),Ps.render(Ls,Ms),Ps.setRenderTarget(_s,2),Ps.render(Ls,Cs),Ps.setRenderTarget(_s,3),Ps.render(Ls,Ts),Ps.setRenderTarget(_s,4),Ps.render(Ls,Is),_s.texture.generateMipmaps=Fs,Ps.setRenderTarget(_s,5),Ps.render(Ls,Bs),Ps.setRenderTarget(Os),Ps.xr.enabled=Rs},this.clear=function(Ps,Ls,Rs,Os){for(var Fs=Ps.getRenderTarget(),Vs=0;Vs<6;Vs++)Ps.setRenderTarget(_s,Vs),Ps.clear(Ls,Rs,Os);Ps.setRenderTarget(Fs)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(ca,ga,_s){Number.isInteger(ga)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),ga=_s),WebGLRenderTarget.call(this,ca,ca,ga)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(ca,ga){this.texture.type=ga.type,this.texture.format=ga.format,this.texture.encoding=ga.encoding;var _s=new Scene,Ss={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Ms=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Ss.uniforms),vertexShader:Ss.vertexShader,fragmentShader:Ss.fragmentShader,side:BackSide,blending:NoBlending});Ms.uniforms.tEquirect.value=ga;var Cs=new Mesh(new BoxBufferGeometry(5,5,5),Ms);_s.add(Cs);var Ts=new CubeCamera(1,10,this);return Ts.update(ca,_s),Cs.geometry.dispose(),Cs.material.dispose(),this};function DataTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs){Texture.call(this,null,Cs,Ts,Is,Bs,Ps,Ss,Ms,Ls,Rs),this.image={data:ca||null,width:ga||1,height:_s||1},this.magFilter=Bs!==void 0?Bs:NearestFilter,this.minFilter=Ps!==void 0?Ps:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(ca,ga,_s,Ss,Ms,Cs){this.planes=[ca!==void 0?ca:new Plane,ga!==void 0?ga:new Plane,_s!==void 0?_s:new Plane,Ss!==void 0?Ss:new Plane,Ms!==void 0?Ms:new Plane,Cs!==void 0?Cs:new Plane]}Object.assign(Frustum.prototype,{set:function(ca,ga,_s,Ss,Ms,Cs){var Ts=this.planes;return Ts[0].copy(ca),Ts[1].copy(ga),Ts[2].copy(_s),Ts[3].copy(Ss),Ts[4].copy(Ms),Ts[5].copy(Cs),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){for(var ga=this.planes,_s=0;_s<6;_s++)ga[_s].copy(ca.planes[_s]);return this},setFromProjectionMatrix:function(ca){var ga=this.planes,_s=ca.elements,Ss=_s[0],Ms=_s[1],Cs=_s[2],Ts=_s[3],Is=_s[4],Bs=_s[5],Ps=_s[6],Ls=_s[7],Rs=_s[8],Os=_s[9],Fs=_s[10],Vs=_s[11],ks=_s[12],Ns=_s[13],Ds=_s[14],$s=_s[15];return ga[0].setComponents(Ts-Ss,Ls-Is,Vs-Rs,$s-ks).normalize(),ga[1].setComponents(Ts+Ss,Ls+Is,Vs+Rs,$s+ks).normalize(),ga[2].setComponents(Ts+Ms,Ls+Bs,Vs+Os,$s+Ns).normalize(),ga[3].setComponents(Ts-Ms,Ls-Bs,Vs-Os,$s-Ns).normalize(),ga[4].setComponents(Ts-Cs,Ls-Ps,Vs-Fs,$s-Ds).normalize(),ga[5].setComponents(Ts+Cs,Ls+Ps,Vs+Fs,$s+Ds).normalize(),this},intersectsObject:function(ca){var ga=ca.geometry;return ga.boundingSphere===null&&ga.computeBoundingSphere(),_sphere$1.copy(ga.boundingSphere).applyMatrix4(ca.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(ca){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(ca.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(ca){for(var ga=this.planes,_s=ca.center,Ss=-ca.radius,Ms=0;Ms<6;Ms++){var Cs=ga[Ms].distanceToPoint(_s);if(Cs<Ss)return!1}return!0},intersectsBox:function(ca){for(var ga=this.planes,_s=0;_s<6;_s++){var Ss=ga[_s];if(_vector$5.x=Ss.normal.x>0?ca.max.x:ca.min.x,_vector$5.y=Ss.normal.y>0?ca.max.y:ca.min.y,_vector$5.z=Ss.normal.z>0?ca.max.z:ca.min.z,Ss.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(ca){for(var ga=this.planes,_s=0;_s<6;_s++)if(ga[_s].distanceToPoint(ca)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var ca=null,ga=!1,_s=null;function Ss(Ms,Cs){ga!==!1&&(_s(Ms,Cs),ca.requestAnimationFrame(Ss))}return{start:function(){ga!==!0&&_s!==null&&(ca.requestAnimationFrame(Ss),ga=!0)},stop:function(){ga=!1},setAnimationLoop:function(Ms){_s=Ms},setContext:function(Ms){ca=Ms}}}function WebGLAttributes(ca,ga){var _s=ga.isWebGL2,Ss=new WeakMap;function Ms(Ps,Ls){var Rs=Ps.array,Os=Ps.usage,Fs=ca.createBuffer();ca.bindBuffer(Ls,Fs),ca.bufferData(Ls,Rs,Os),Ps.onUploadCallback();var Vs=5126;return Rs instanceof Float32Array?Vs=5126:Rs instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Rs instanceof Uint16Array?Vs=5123:Rs instanceof Int16Array?Vs=5122:Rs instanceof Uint32Array?Vs=5125:Rs instanceof Int32Array?Vs=5124:Rs instanceof Int8Array?Vs=5120:Rs instanceof Uint8Array&&(Vs=5121),{buffer:Fs,type:Vs,bytesPerElement:Rs.BYTES_PER_ELEMENT,version:Ps.version}}function Cs(Ps,Ls,Rs){var Os=Ls.array,Fs=Ls.updateRange;ca.bindBuffer(Rs,Ps),Fs.count===-1?ca.bufferSubData(Rs,0,Os):(_s?ca.bufferSubData(Rs,Fs.offset*Os.BYTES_PER_ELEMENT,Os,Fs.offset,Fs.count):ca.bufferSubData(Rs,Fs.offset*Os.BYTES_PER_ELEMENT,Os.subarray(Fs.offset,Fs.offset+Fs.count)),Fs.count=-1)}function Ts(Ps){return Ps.isInterleavedBufferAttribute&&(Ps=Ps.data),Ss.get(Ps)}function Is(Ps){Ps.isInterleavedBufferAttribute&&(Ps=Ps.data);var Ls=Ss.get(Ps);Ls&&(ca.deleteBuffer(Ls.buffer),Ss.delete(Ps))}function Bs(Ps,Ls){Ps.isInterleavedBufferAttribute&&(Ps=Ps.data);var Rs=Ss.get(Ps);Rs===void 0?Ss.set(Ps,Ms(Ps,Ls)):Rs.version<Ps.version&&(Cs(Rs.buffer,Ps,Ls),Rs.version=Ps.version)}return{get:Ts,remove:Is,update:Bs}}function PlaneGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:ca,height:ga,widthSegments:_s,heightSegments:Ss},this.fromBufferGeometry(new PlaneBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:ca,height:ga,widthSegments:_s,heightSegments:Ss},ca=ca||1,ga=ga||1;var Ms=ca/2,Cs=ga/2,Ts=Math.floor(_s)||1,Is=Math.floor(Ss)||1,Bs=Ts+1,Ps=Is+1,Ls=ca/Ts,Rs=ga/Is,Os,Fs,Vs=[],ks=[],Ns=[],Ds=[];for(Fs=0;Fs<Ps;Fs++){var $s=Fs*Rs-Cs;for(Os=0;Os<Bs;Os++){var Gs=Os*Ls-Ms;ks.push(Gs,-$s,0),Ns.push(0,0,1),Ds.push(Os/Ts),Ds.push(1-Fs/Is)}}for(Fs=0;Fs<Is;Fs++)for(Os=0;Os<Ts;Os++){var Us=Os+Bs*Fs,Hs=Os+Bs*(Fs+1),zs=Os+1+Bs*(Fs+1),js=Os+1+Bs*Fs;Vs.push(Us,Hs,js),Vs.push(Hs,zs,js)}this.setIndex(Vs),this.setAttribute("position",new Float32BufferAttribute(ks,3)),this.setAttribute("normal",new Float32BufferAttribute(Ns,3)),this.setAttribute("uv",new Float32BufferAttribute(Ds,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(ca,ga,_s,Ss){var Ms=new Color(0),Cs=0,Ts,Is,Bs=null,Ps=0,Ls=null;function Rs(Fs,Vs,ks,Ns){var Ds=Vs.background,$s=ca.xr,Gs=$s.getSession&&$s.getSession();if(Gs&&Gs.environmentBlendMode==="additive"&&(Ds=null),Ds===null?Os(Ms,Cs):Ds&&Ds.isColor&&(Os(Ds,1),Ns=!0),(ca.autoClear||Ns)&&ca.clear(ca.autoClearColor,ca.autoClearDepth,ca.autoClearStencil),Ds&&(Ds.isCubeTexture||Ds.isWebGLCubeRenderTarget||Ds.mapping===CubeUVReflectionMapping)){Is===void 0&&(Is=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Is.geometry.deleteAttribute("normal"),Is.geometry.deleteAttribute("uv"),Is.onBeforeRender=function(Hs,zs,js){this.matrixWorld.copyPosition(js.matrixWorld)},Object.defineProperty(Is.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),_s.update(Is));var Us=Ds.isWebGLCubeRenderTarget?Ds.texture:Ds;Is.material.uniforms.envMap.value=Us,Is.material.uniforms.flipEnvMap.value=Us.isCubeTexture?-1:1,(Bs!==Ds||Ps!==Us.version||Ls!==ca.toneMapping)&&(Is.material.needsUpdate=!0,Bs=Ds,Ps=Us.version,Ls=ca.toneMapping),Fs.unshift(Is,Is.geometry,Is.material,0,0,null)}else Ds&&Ds.isTexture&&(Ts===void 0&&(Ts=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Ts.geometry.deleteAttribute("normal"),Object.defineProperty(Ts.material,"map",{get:function(){return this.uniforms.t2D.value}}),_s.update(Ts)),Ts.material.uniforms.t2D.value=Ds,Ds.matrixAutoUpdate===!0&&Ds.updateMatrix(),Ts.material.uniforms.uvTransform.value.copy(Ds.matrix),(Bs!==Ds||Ps!==Ds.version||Ls!==ca.toneMapping)&&(Ts.material.needsUpdate=!0,Bs=Ds,Ps=Ds.version,Ls=ca.toneMapping),Fs.unshift(Ts,Ts.geometry,Ts.material,0,0,null))}function Os(Fs,Vs){ga.buffers.color.setClear(Fs.r,Fs.g,Fs.b,Vs,Ss)}return{getClearColor:function(){return Ms},setClearColor:function(Fs,Vs){Ms.set(Fs),Cs=Vs!==void 0?Vs:1,Os(Ms,Cs)},getClearAlpha:function(){return Cs},setClearAlpha:function(Fs){Cs=Fs,Os(Ms,Cs)},render:Rs}}function WebGLBufferRenderer(ca,ga,_s,Ss){var Ms=Ss.isWebGL2,Cs;function Ts(Ps){Cs=Ps}function Is(Ps,Ls){ca.drawArrays(Cs,Ps,Ls),_s.update(Ls,Cs)}function Bs(Ps,Ls,Rs,Os){if(Os!==0){var Fs,Vs;if(Ms)Fs=ca,Vs="drawArraysInstanced";else if(Fs=ga.get("ANGLE_instanced_arrays"),Vs="drawArraysInstancedANGLE",Fs===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Fs[Vs](Cs,Ls,Rs,Os),_s.update(Rs,Cs,Os)}}this.setMode=Ts,this.render=Is,this.renderInstances=Bs}function WebGLCapabilities(ca,ga,_s){var Ss;function Ms(){if(Ss!==void 0)return Ss;var zs=ga.get("EXT_texture_filter_anisotropic");return zs!==null?Ss=ca.getParameter(zs.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Ss=0,Ss}function Cs(zs){if(zs==="highp"){if(ca.getShaderPrecisionFormat(35633,36338).precision>0&&ca.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";zs="mediump"}return zs==="mediump"&&ca.getShaderPrecisionFormat(35633,36337).precision>0&&ca.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Ts=typeof WebGL2RenderingContext!="undefined"&&ca instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&ca instanceof WebGL2ComputeRenderingContext,Is=_s.precision!==void 0?_s.precision:"highp",Bs=Cs(Is);Bs!==Is&&(console.warn("THREE.WebGLRenderer:",Is,"not supported, using",Bs,"instead."),Is=Bs);var Ps=_s.logarithmicDepthBuffer===!0,Ls=ca.getParameter(34930),Rs=ca.getParameter(35660),Os=ca.getParameter(3379),Fs=ca.getParameter(34076),Vs=ca.getParameter(34921),ks=ca.getParameter(36347),Ns=ca.getParameter(36348),Ds=ca.getParameter(36349),$s=Rs>0,Gs=Ts||!!ga.get("OES_texture_float"),Us=$s&&Gs,Hs=Ts?ca.getParameter(36183):0;return{isWebGL2:Ts,getMaxAnisotropy:Ms,getMaxPrecision:Cs,precision:Is,logarithmicDepthBuffer:Ps,maxTextures:Ls,maxVertexTextures:Rs,maxTextureSize:Os,maxCubemapSize:Fs,maxAttributes:Vs,maxVertexUniforms:ks,maxVaryings:Ns,maxFragmentUniforms:Ds,vertexTextures:$s,floatFragmentTextures:Gs,floatVertexTextures:Us,maxSamples:Hs}}function WebGLClipping(){var ca=this,ga=null,_s=0,Ss=!1,Ms=!1,Cs=new Plane,Ts=new Matrix3,Is={value:null,needsUpdate:!1};this.uniform=Is,this.numPlanes=0,this.numIntersection=0,this.init=function(Ls,Rs,Os){var Fs=Ls.length!==0||Rs||_s!==0||Ss;return Ss=Rs,ga=Ps(Ls,Os,0),_s=Ls.length,Fs},this.beginShadows=function(){Ms=!0,Ps(null)},this.endShadows=function(){Ms=!1,Bs()},this.setState=function(Ls,Rs,Os,Fs,Vs,ks){if(!Ss||Ls===null||Ls.length===0||Ms&&!Os)Ms?Ps(null):Bs();else{var Ns=Ms?0:_s,Ds=Ns*4,$s=Vs.clippingState||null;Is.value=$s,$s=Ps(Ls,Fs,Ds,ks);for(var Gs=0;Gs!==Ds;++Gs)$s[Gs]=ga[Gs];Vs.clippingState=$s,this.numIntersection=Rs?this.numPlanes:0,this.numPlanes+=Ns}};function Bs(){Is.value!==ga&&(Is.value=ga,Is.needsUpdate=_s>0),ca.numPlanes=_s,ca.numIntersection=0}function Ps(Ls,Rs,Os,Fs){var Vs=Ls!==null?Ls.length:0,ks=null;if(Vs!==0){if(ks=Is.value,Fs!==!0||ks===null){var Ns=Os+Vs*4,Ds=Rs.matrixWorldInverse;Ts.getNormalMatrix(Ds),(ks===null||ks.length<Ns)&&(ks=new Float32Array(Ns));for(var $s=0,Gs=Os;$s!==Vs;++$s,Gs+=4)Cs.copy(Ls[$s]).applyMatrix4(Ds,Ts),Cs.normal.toArray(ks,Gs),ks[Gs+3]=Cs.constant}Is.value=ks,Is.needsUpdate=!0}return ca.numPlanes=Vs,ca.numIntersection=0,ks}}function WebGLExtensions(ca){var ga={};return{get:function(_s){if(ga[_s]!==void 0)return ga[_s];var Ss;switch(_s){case"WEBGL_depth_texture":Ss=ca.getExtension("WEBGL_depth_texture")||ca.getExtension("MOZ_WEBGL_depth_texture")||ca.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Ss=ca.getExtension("EXT_texture_filter_anisotropic")||ca.getExtension("MOZ_EXT_texture_filter_anisotropic")||ca.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Ss=ca.getExtension("WEBGL_compressed_texture_s3tc")||ca.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ca.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Ss=ca.getExtension("WEBGL_compressed_texture_pvrtc")||ca.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Ss=ca.getExtension(_s)}return Ss===null&&console.warn("THREE.WebGLRenderer: "+_s+" extension not supported."),ga[_s]=Ss,Ss}}}function WebGLGeometries(ca,ga,_s){var Ss=new WeakMap,Ms=new WeakMap;function Cs(Ls){var Rs=Ls.target,Os=Ss.get(Rs);Os.index!==null&&ga.remove(Os.index);for(var Fs in Os.attributes)ga.remove(Os.attributes[Fs]);Rs.removeEventListener("dispose",Cs),Ss.delete(Rs);var Vs=Ms.get(Os);Vs&&(ga.remove(Vs),Ms.delete(Os)),_s.memory.geometries--}function Ts(Ls,Rs){var Os=Ss.get(Rs);return Os||(Rs.addEventListener("dispose",Cs),Rs.isBufferGeometry?Os=Rs:Rs.isGeometry&&(Rs._bufferGeometry===void 0&&(Rs._bufferGeometry=new BufferGeometry().setFromObject(Ls)),Os=Rs._bufferGeometry),Ss.set(Rs,Os),_s.memory.geometries++,Os)}function Is(Ls){var Rs=Ls.index,Os=Ls.attributes;Rs!==null&&ga.update(Rs,34963);for(var Fs in Os)ga.update(Os[Fs],34962);var Vs=Ls.morphAttributes;for(var Fs in Vs)for(var ks=Vs[Fs],Ns=0,Ds=ks.length;Ns<Ds;Ns++)ga.update(ks[Ns],34962)}function Bs(Ls){var Rs=[],Os=Ls.index,Fs=Ls.attributes.position,Vs=0;if(Os!==null){var ks=Os.array;Vs=Os.version;for(var Ns=0,Ds=ks.length;Ns<Ds;Ns+=3){var $s=ks[Ns+0],Gs=ks[Ns+1],Us=ks[Ns+2];Rs.push($s,Gs,Gs,Us,Us,$s)}}else{var ks=Fs.array;Vs=Fs.version;for(var Ns=0,Ds=ks.length/3-1;Ns<Ds;Ns+=3){var $s=Ns+0,Gs=Ns+1,Us=Ns+2;Rs.push($s,Gs,Gs,Us,Us,$s)}}var Hs=new(arrayMax(Rs)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Rs,1);Hs.version=Vs,ga.update(Hs,34963);var zs=Ms.get(Ls);zs&&ga.remove(zs),Ms.set(Ls,Hs)}function Ps(Ls){var Rs=Ms.get(Ls);if(Rs){var Os=Ls.index;Os!==null&&Rs.version<Os.version&&Bs(Ls)}else Bs(Ls);return Ms.get(Ls)}return{get:Ts,update:Is,getWireframeAttribute:Ps}}function WebGLIndexedBufferRenderer(ca,ga,_s,Ss){var Ms=Ss.isWebGL2,Cs;function Ts(Os){Cs=Os}var Is,Bs;function Ps(Os){Is=Os.type,Bs=Os.bytesPerElement}function Ls(Os,Fs){ca.drawElements(Cs,Fs,Is,Os*Bs),_s.update(Fs,Cs)}function Rs(Os,Fs,Vs,ks){if(ks!==0){var Ns,Ds;if(Ms)Ns=ca,Ds="drawElementsInstanced";else if(Ns=ga.get("ANGLE_instanced_arrays"),Ds="drawElementsInstancedANGLE",Ns===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ns[Ds](Cs,Vs,Is,Fs*Bs,ks),_s.update(Vs,Cs,ks)}}this.setMode=Ts,this.setIndex=Ps,this.render=Ls,this.renderInstances=Rs}function WebGLInfo(ca){var ga={geometries:0,textures:0},_s={frame:0,calls:0,triangles:0,points:0,lines:0};function Ss(Cs,Ts,Is){switch(Is=Is||1,_s.calls++,Ts){case 4:_s.triangles+=Is*(Cs/3);break;case 1:_s.lines+=Is*(Cs/2);break;case 3:_s.lines+=Is*(Cs-1);break;case 2:_s.lines+=Is*Cs;break;case 0:_s.points+=Is*Cs;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ts);break}}function Ms(){_s.frame++,_s.calls=0,_s.triangles=0,_s.points=0,_s.lines=0}return{memory:ga,render:_s,programs:null,autoReset:!0,reset:Ms,update:Ss}}function absNumericalSort(ca,ga){return Math.abs(ga[1])-Math.abs(ca[1])}function WebGLMorphtargets(ca){var ga={},_s=new Float32Array(8);function Ss(Ms,Cs,Ts,Is){var Bs=Ms.morphTargetInfluences,Ps=Bs===void 0?0:Bs.length,Ls=ga[Cs.id];if(Ls===void 0){Ls=[];for(var Rs=0;Rs<Ps;Rs++)Ls[Rs]=[Rs,0];ga[Cs.id]=Ls}for(var Os=Ts.morphTargets&&Cs.morphAttributes.position,Fs=Ts.morphNormals&&Cs.morphAttributes.normal,Rs=0;Rs<Ps;Rs++){var Vs=Ls[Rs];Vs[1]!==0&&(Os&&Cs.deleteAttribute("morphTarget"+Rs),Fs&&Cs.deleteAttribute("morphNormal"+Rs))}for(var Rs=0;Rs<Ps;Rs++){var Vs=Ls[Rs];Vs[0]=Rs,Vs[1]=Bs[Rs]}Ls.sort(absNumericalSort);for(var ks=0,Rs=0;Rs<8;Rs++){var Vs=Ls[Rs];if(Vs){var Ns=Vs[0],Ds=Vs[1];if(Ds){Os&&Cs.setAttribute("morphTarget"+Rs,Os[Ns]),Fs&&Cs.setAttribute("morphNormal"+Rs,Fs[Ns]),_s[Rs]=Ds,ks+=Ds;continue}}_s[Rs]=0}var $s=Cs.morphTargetsRelative?1:1-ks;Is.getUniforms().setValue(ca,"morphTargetBaseInfluence",$s),Is.getUniforms().setValue(ca,"morphTargetInfluences",_s)}return{update:Ss}}function WebGLObjects(ca,ga,_s,Ss){var Ms=new WeakMap;function Cs(Is){var Bs=Ss.render.frame,Ps=Is.geometry,Ls=ga.get(Is,Ps);return Ms.get(Ls)!==Bs&&(Ps.isGeometry&&Ls.updateFromObject(Is),ga.update(Ls),Ms.set(Ls,Bs)),Is.isInstancedMesh&&_s.update(Is.instanceMatrix,34962),Ls}function Ts(){Ms=new WeakMap}return{update:Cs,dispose:Ts}}function CubeTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps){ca=ca!==void 0?ca:[],ga=ga!==void 0?ga:CubeReflectionMapping,Ts=Ts!==void 0?Ts:RGBFormat,Texture.call(this,ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(ca){this.image=ca}});function DataTexture2DArray(ca,ga,_s,Ss){Texture.call(this,null),this.image={data:ca||null,width:ga||1,height:_s||1,depth:Ss||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(ca,ga,_s,Ss){Texture.call(this,null),this.image={data:ca||null,width:ga||1,height:_s||1,depth:Ss||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(ca,ga,_s){var Ss=ca[0];if(Ss<=0||Ss>0)return ca;var Ms=ga*_s,Cs=arrayCacheF32[Ms];if(Cs===void 0&&(Cs=new Float32Array(Ms),arrayCacheF32[Ms]=Cs),ga!==0){Ss.toArray(Cs,0);for(var Ts=1,Is=0;Ts!==ga;++Ts)Is+=_s,ca[Ts].toArray(Cs,Is)}return Cs}function arraysEqual(ca,ga){if(ca.length!==ga.length)return!1;for(var _s=0,Ss=ca.length;_s<Ss;_s++)if(ca[_s]!==ga[_s])return!1;return!0}function copyArray(ca,ga){for(var _s=0,Ss=ga.length;_s<Ss;_s++)ca[_s]=ga[_s]}function allocTexUnits(ca,ga){var _s=arrayCacheI32[ga];_s===void 0&&(_s=new Int32Array(ga),arrayCacheI32[ga]=_s);for(var Ss=0;Ss!==ga;++Ss)_s[Ss]=ca.allocateTextureUnit();return _s}function setValueV1f(ca,ga){var _s=this.cache;_s[0]!==ga&&(ca.uniform1f(this.addr,ga),_s[0]=ga)}function setValueV2f(ca,ga){var _s=this.cache;if(ga.x!==void 0)(_s[0]!==ga.x||_s[1]!==ga.y)&&(ca.uniform2f(this.addr,ga.x,ga.y),_s[0]=ga.x,_s[1]=ga.y);else{if(arraysEqual(_s,ga))return;ca.uniform2fv(this.addr,ga),copyArray(_s,ga)}}function setValueV3f(ca,ga){var _s=this.cache;if(ga.x!==void 0)(_s[0]!==ga.x||_s[1]!==ga.y||_s[2]!==ga.z)&&(ca.uniform3f(this.addr,ga.x,ga.y,ga.z),_s[0]=ga.x,_s[1]=ga.y,_s[2]=ga.z);else if(ga.r!==void 0)(_s[0]!==ga.r||_s[1]!==ga.g||_s[2]!==ga.b)&&(ca.uniform3f(this.addr,ga.r,ga.g,ga.b),_s[0]=ga.r,_s[1]=ga.g,_s[2]=ga.b);else{if(arraysEqual(_s,ga))return;ca.uniform3fv(this.addr,ga),copyArray(_s,ga)}}function setValueV4f(ca,ga){var _s=this.cache;if(ga.x!==void 0)(_s[0]!==ga.x||_s[1]!==ga.y||_s[2]!==ga.z||_s[3]!==ga.w)&&(ca.uniform4f(this.addr,ga.x,ga.y,ga.z,ga.w),_s[0]=ga.x,_s[1]=ga.y,_s[2]=ga.z,_s[3]=ga.w);else{if(arraysEqual(_s,ga))return;ca.uniform4fv(this.addr,ga),copyArray(_s,ga)}}function setValueM2(ca,ga){var _s=this.cache,Ss=ga.elements;if(Ss===void 0){if(arraysEqual(_s,ga))return;ca.uniformMatrix2fv(this.addr,!1,ga),copyArray(_s,ga)}else{if(arraysEqual(_s,Ss))return;mat2array.set(Ss),ca.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(_s,Ss)}}function setValueM3(ca,ga){var _s=this.cache,Ss=ga.elements;if(Ss===void 0){if(arraysEqual(_s,ga))return;ca.uniformMatrix3fv(this.addr,!1,ga),copyArray(_s,ga)}else{if(arraysEqual(_s,Ss))return;mat3array.set(Ss),ca.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(_s,Ss)}}function setValueM4(ca,ga){var _s=this.cache,Ss=ga.elements;if(Ss===void 0){if(arraysEqual(_s,ga))return;ca.uniformMatrix4fv(this.addr,!1,ga),copyArray(_s,ga)}else{if(arraysEqual(_s,Ss))return;mat4array.set(Ss),ca.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(_s,Ss)}}function setValueT1(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.safeSetTexture2D(ga||emptyTexture,Ms)}function setValueT2DArray1(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.setTexture2DArray(ga||emptyTexture2dArray,Ms)}function setValueT3D1(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.setTexture3D(ga||emptyTexture3d,Ms)}function setValueT6(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.safeSetTextureCube(ga||emptyCubeTexture,Ms)}function setValueV1i(ca,ga){var _s=this.cache;_s[0]!==ga&&(ca.uniform1i(this.addr,ga),_s[0]=ga)}function setValueV2i(ca,ga){var _s=this.cache;arraysEqual(_s,ga)||(ca.uniform2iv(this.addr,ga),copyArray(_s,ga))}function setValueV3i(ca,ga){var _s=this.cache;arraysEqual(_s,ga)||(ca.uniform3iv(this.addr,ga),copyArray(_s,ga))}function setValueV4i(ca,ga){var _s=this.cache;arraysEqual(_s,ga)||(ca.uniform4iv(this.addr,ga),copyArray(_s,ga))}function setValueV1ui(ca,ga){var _s=this.cache;_s[0]!==ga&&(ca.uniform1ui(this.addr,ga),_s[0]=ga)}function getSingularSetter(ca){switch(ca){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ca,ga){ca.uniform1fv(this.addr,ga)}function setValueV1iArray(ca,ga){ca.uniform1iv(this.addr,ga)}function setValueV2iArray(ca,ga){ca.uniform2iv(this.addr,ga)}function setValueV3iArray(ca,ga){ca.uniform3iv(this.addr,ga)}function setValueV4iArray(ca,ga){ca.uniform4iv(this.addr,ga)}function setValueV2fArray(ca,ga){var _s=flatten(ga,this.size,2);ca.uniform2fv(this.addr,_s)}function setValueV3fArray(ca,ga){var _s=flatten(ga,this.size,3);ca.uniform3fv(this.addr,_s)}function setValueV4fArray(ca,ga){var _s=flatten(ga,this.size,4);ca.uniform4fv(this.addr,_s)}function setValueM2Array(ca,ga){var _s=flatten(ga,this.size,4);ca.uniformMatrix2fv(this.addr,!1,_s)}function setValueM3Array(ca,ga){var _s=flatten(ga,this.size,9);ca.uniformMatrix3fv(this.addr,!1,_s)}function setValueM4Array(ca,ga){var _s=flatten(ga,this.size,16);ca.uniformMatrix4fv(this.addr,!1,_s)}function setValueT1Array(ca,ga,_s){var Ss=ga.length,Ms=allocTexUnits(_s,Ss);ca.uniform1iv(this.addr,Ms);for(var Cs=0;Cs!==Ss;++Cs)_s.safeSetTexture2D(ga[Cs]||emptyTexture,Ms[Cs])}function setValueT6Array(ca,ga,_s){var Ss=ga.length,Ms=allocTexUnits(_s,Ss);ca.uniform1iv(this.addr,Ms);for(var Cs=0;Cs!==Ss;++Cs)_s.safeSetTextureCube(ga[Cs]||emptyCubeTexture,Ms[Cs])}function getPureArraySetter(ca){switch(ca){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(ca,ga,_s){this.id=ca,this.addr=_s,this.cache=[],this.setValue=getSingularSetter(ga.type)}function PureArrayUniform(ca,ga,_s){this.id=ca,this.addr=_s,this.cache=[],this.size=ga.size,this.setValue=getPureArraySetter(ga.type)}PureArrayUniform.prototype.updateCache=function(ca){var ga=this.cache;ca instanceof Float32Array&&ga.length!==ca.length&&(this.cache=new Float32Array(ca.length)),copyArray(ga,ca)};function StructuredUniform(ca){this.id=ca,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(ca,ga,_s){for(var Ss=this.seq,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms){var Ts=Ss[Ms];Ts.setValue(ca,ga[Ts.id],_s)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(ca,ga){ca.seq.push(ga),ca.map[ga.id]=ga}function parseUniform(ca,ga,_s){var Ss=ca.name,Ms=Ss.length;for(RePathPart.lastIndex=0;;){var Cs=RePathPart.exec(Ss),Ts=RePathPart.lastIndex,Is=Cs[1],Bs=Cs[2]==="]",Ps=Cs[3];if(Bs&&(Is=Is|0),Ps===void 0||Ps==="["&&Ts+2===Ms){addUniform(_s,Ps===void 0?new SingleUniform(Is,ca,ga):new PureArrayUniform(Is,ca,ga));break}else{var Ls=_s.map,Rs=Ls[Is];Rs===void 0&&(Rs=new StructuredUniform(Is),addUniform(_s,Rs)),_s=Rs}}}function WebGLUniforms(ca,ga){this.seq=[],this.map={};for(var _s=ca.getProgramParameter(ga,35718),Ss=0;Ss<_s;++Ss){var Ms=ca.getActiveUniform(ga,Ss),Cs=ca.getUniformLocation(ga,Ms.name);parseUniform(Ms,Cs,this)}}WebGLUniforms.prototype.setValue=function(ca,ga,_s,Ss){var Ms=this.map[ga];Ms!==void 0&&Ms.setValue(ca,_s,Ss)};WebGLUniforms.prototype.setOptional=function(ca,ga,_s){var Ss=ga[_s];Ss!==void 0&&this.setValue(ca,_s,Ss)};WebGLUniforms.upload=function(ca,ga,_s,Ss){for(var Ms=0,Cs=ga.length;Ms!==Cs;++Ms){var Ts=ga[Ms],Is=_s[Ts.id];Is.needsUpdate!==!1&&Ts.setValue(ca,Is.value,Ss)}};WebGLUniforms.seqWithValue=function(ca,ga){for(var _s=[],Ss=0,Ms=ca.length;Ss!==Ms;++Ss){var Cs=ca[Ss];Cs.id in ga&&_s.push(Cs)}return _s};function WebGLShader(ca,ga,_s){var Ss=ca.createShader(ga);return ca.shaderSource(Ss,_s),ca.compileShader(Ss),Ss}var programIdCount=0;function addLineNumbers(ca){for(var ga=ca.split(`
`),_s=0;_s<ga.length;_s++)ga[_s]=_s+1+": "+ga[_s];return ga.join(`
`)}function getEncodingComponents(ca){switch(ca){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+ca)}}function getShaderErrors(ca,ga,_s){var Ss=ca.getShaderParameter(ga,35713),Ms=ca.getShaderInfoLog(ga).trim();if(Ss&&Ms==="")return"";var Cs=ca.getShaderSource(ga);return"THREE.WebGLShader: gl.getShaderInfoLog() "+_s+`
`+Ms+addLineNumbers(Cs)}function getTexelDecodingFunction(ca,ga){var _s=getEncodingComponents(ga);return"vec4 "+ca+"( vec4 value ) { return "+_s[0]+"ToLinear"+_s[1]+"; }"}function getTexelEncodingFunction(ca,ga){var _s=getEncodingComponents(ga);return"vec4 "+ca+"( vec4 value ) { return LinearTo"+_s[0]+_s[1]+"; }"}function getToneMappingFunction(ca,ga){var _s;switch(ga){case LinearToneMapping:_s="Linear";break;case ReinhardToneMapping:_s="Reinhard";break;case Uncharted2ToneMapping:_s="Uncharted2";break;case CineonToneMapping:_s="OptimizedCineon";break;case ACESFilmicToneMapping:_s="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+ga)}return"vec3 "+ca+"( vec3 color ) { return "+_s+"ToneMapping( color ); }"}function generateExtensions(ca){var ga=[ca.extensionDerivatives||ca.envMapCubeUV||ca.bumpMap||ca.tangentSpaceNormalMap||ca.clearcoatNormalMap||ca.flatShading||ca.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(ca.extensionFragDepth||ca.logarithmicDepthBuffer)&&ca.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",ca.extensionDrawBuffers&&ca.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(ca.extensionShaderTextureLOD||ca.envMap)&&ca.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return ga.filter(filterEmptyLine).join(`
`)}function generateDefines(ca){var ga=[];for(var _s in ca){var Ss=ca[_s];Ss!==!1&&ga.push("#define "+_s+" "+Ss)}return ga.join(`
`)}function fetchAttributeLocations(ca,ga){for(var _s={},Ss=ca.getProgramParameter(ga,35721),Ms=0;Ms<Ss;Ms++){var Cs=ca.getActiveAttrib(ga,Ms),Ts=Cs.name;_s[Ts]=ca.getAttribLocation(ga,Ts)}return _s}function filterEmptyLine(ca){return ca!==""}function replaceLightNums(ca,ga){return ca.replace(/NUM_DIR_LIGHTS/g,ga.numDirLights).replace(/NUM_SPOT_LIGHTS/g,ga.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,ga.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,ga.numPointLights).replace(/NUM_HEMI_LIGHTS/g,ga.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,ga.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,ga.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,ga.numPointLightShadows)}function replaceClippingPlaneNums(ca,ga){return ca.replace(/NUM_CLIPPING_PLANES/g,ga.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,ga.numClippingPlanes-ga.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ca){return ca.replace(includePattern,includeReplacer)}function includeReplacer(ca,ga){var _s=ShaderChunk[ga];if(_s===void 0)throw new Error("Can not resolve #include <"+ga+">");return resolveIncludes(_s)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(ca){return ca.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(ca,ga,_s,Ss){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(ca,ga,_s,Ss)}function loopReplacer(ca,ga,_s,Ss){for(var Ms="",Cs=parseInt(ga);Cs<parseInt(_s);Cs++)Ms+=Ss.replace(/\[ i \]/g,"[ "+Cs+" ]").replace(/UNROLLED_LOOP_INDEX/g,Cs);return Ms}function generatePrecision(ca){var ga="precision "+ca.precision+` float;
precision `+ca.precision+" int;";return ca.precision==="highp"?ga+=`
#define HIGH_PRECISION`:ca.precision==="mediump"?ga+=`
#define MEDIUM_PRECISION`:ca.precision==="lowp"&&(ga+=`
#define LOW_PRECISION`),ga}function generateShadowMapTypeDefine(ca){var ga="SHADOWMAP_TYPE_BASIC";return ca.shadowMapType===PCFShadowMap?ga="SHADOWMAP_TYPE_PCF":ca.shadowMapType===PCFSoftShadowMap?ga="SHADOWMAP_TYPE_PCF_SOFT":ca.shadowMapType===VSMShadowMap&&(ga="SHADOWMAP_TYPE_VSM"),ga}function generateEnvMapTypeDefine(ca){var ga="ENVMAP_TYPE_CUBE";if(ca.envMap)switch(ca.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:ga="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:ga="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:ga="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:ga="ENVMAP_TYPE_SPHERE";break}return ga}function generateEnvMapModeDefine(ca){var ga="ENVMAP_MODE_REFLECTION";if(ca.envMap)switch(ca.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:ga="ENVMAP_MODE_REFRACTION";break}return ga}function generateEnvMapBlendingDefine(ca){var ga="ENVMAP_BLENDING_NONE";if(ca.envMap)switch(ca.combine){case MultiplyOperation:ga="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:ga="ENVMAP_BLENDING_MIX";break;case AddOperation:ga="ENVMAP_BLENDING_ADD";break}return ga}function WebGLProgram(ca,ga,_s){var Ss=ca.getContext(),Ms=_s.defines,Cs=_s.vertexShader,Ts=_s.fragmentShader,Is=generateShadowMapTypeDefine(_s),Bs=generateEnvMapTypeDefine(_s),Ps=generateEnvMapModeDefine(_s),Ls=generateEnvMapBlendingDefine(_s),Rs=ca.gammaFactor>0?ca.gammaFactor:1,Os=_s.isWebGL2?"":generateExtensions(_s),Fs=generateDefines(Ms),Vs=Ss.createProgram(),ks,Ns;if(_s.isRawShaderMaterial?(ks=[Fs].filter(filterEmptyLine).join(`
`),ks.length>0&&(ks+=`
`),Ns=[Os,Fs].filter(filterEmptyLine).join(`
`),Ns.length>0&&(Ns+=`
`)):(ks=[generatePrecision(_s),"#define SHADER_NAME "+_s.shaderName,Fs,_s.instancing?"#define USE_INSTANCING":"",_s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Rs,"#define MAX_BONES "+_s.maxBones,_s.useFog&&_s.fog?"#define USE_FOG":"",_s.useFog&&_s.fogExp2?"#define FOG_EXP2":"",_s.map?"#define USE_MAP":"",_s.envMap?"#define USE_ENVMAP":"",_s.envMap?"#define "+Ps:"",_s.lightMap?"#define USE_LIGHTMAP":"",_s.aoMap?"#define USE_AOMAP":"",_s.emissiveMap?"#define USE_EMISSIVEMAP":"",_s.bumpMap?"#define USE_BUMPMAP":"",_s.normalMap?"#define USE_NORMALMAP":"",_s.normalMap&&_s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_s.normalMap&&_s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_s.clearcoatMap?"#define USE_CLEARCOATMAP":"",_s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_s.displacementMap&&_s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",_s.specularMap?"#define USE_SPECULARMAP":"",_s.roughnessMap?"#define USE_ROUGHNESSMAP":"",_s.metalnessMap?"#define USE_METALNESSMAP":"",_s.alphaMap?"#define USE_ALPHAMAP":"",_s.vertexTangents?"#define USE_TANGENT":"",_s.vertexColors?"#define USE_COLOR":"",_s.vertexUvs?"#define USE_UV":"",_s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_s.flatShading?"#define FLAT_SHADED":"",_s.skinning?"#define USE_SKINNING":"",_s.useVertexTexture?"#define BONE_TEXTURE":"",_s.morphTargets?"#define USE_MORPHTARGETS":"",_s.morphNormals&&_s.flatShading===!1?"#define USE_MORPHNORMALS":"",_s.doubleSided?"#define DOUBLE_SIDED":"",_s.flipSided?"#define FLIP_SIDED":"",_s.shadowMapEnabled?"#define USE_SHADOWMAP":"",_s.shadowMapEnabled?"#define "+Is:"",_s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_s.logarithmicDepthBuffer&&_s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Ns=[Os,generatePrecision(_s),"#define SHADER_NAME "+_s.shaderName,Fs,_s.alphaTest?"#define ALPHATEST "+_s.alphaTest+(_s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Rs,_s.useFog&&_s.fog?"#define USE_FOG":"",_s.useFog&&_s.fogExp2?"#define FOG_EXP2":"",_s.map?"#define USE_MAP":"",_s.matcap?"#define USE_MATCAP":"",_s.envMap?"#define USE_ENVMAP":"",_s.envMap?"#define "+Bs:"",_s.envMap?"#define "+Ps:"",_s.envMap?"#define "+Ls:"",_s.lightMap?"#define USE_LIGHTMAP":"",_s.aoMap?"#define USE_AOMAP":"",_s.emissiveMap?"#define USE_EMISSIVEMAP":"",_s.bumpMap?"#define USE_BUMPMAP":"",_s.normalMap?"#define USE_NORMALMAP":"",_s.normalMap&&_s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_s.normalMap&&_s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_s.clearcoatMap?"#define USE_CLEARCOATMAP":"",_s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_s.specularMap?"#define USE_SPECULARMAP":"",_s.roughnessMap?"#define USE_ROUGHNESSMAP":"",_s.metalnessMap?"#define USE_METALNESSMAP":"",_s.alphaMap?"#define USE_ALPHAMAP":"",_s.sheen?"#define USE_SHEEN":"",_s.vertexTangents?"#define USE_TANGENT":"",_s.vertexColors?"#define USE_COLOR":"",_s.vertexUvs?"#define USE_UV":"",_s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_s.gradientMap?"#define USE_GRADIENTMAP":"",_s.flatShading?"#define FLAT_SHADED":"",_s.doubleSided?"#define DOUBLE_SIDED":"",_s.flipSided?"#define FLIP_SIDED":"",_s.shadowMapEnabled?"#define USE_SHADOWMAP":"",_s.shadowMapEnabled?"#define "+Is:"",_s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",_s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_s.logarithmicDepthBuffer&&_s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(_s.extensionShaderTextureLOD||_s.envMap)&&_s.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",_s.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",_s.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",_s.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",_s.toneMapping):"",_s.dithering?"#define DITHERING":"",_s.outputEncoding||_s.mapEncoding||_s.matcapEncoding||_s.envMapEncoding||_s.emissiveMapEncoding||_s.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",_s.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",_s.mapEncoding):"",_s.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",_s.matcapEncoding):"",_s.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",_s.envMapEncoding):"",_s.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",_s.emissiveMapEncoding):"",_s.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",_s.lightMapEncoding):"",_s.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",_s.outputEncoding):"",_s.depthPacking?"#define DEPTH_PACKING "+_s.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Cs=resolveIncludes(Cs),Cs=replaceLightNums(Cs,_s),Cs=replaceClippingPlaneNums(Cs,_s),Ts=resolveIncludes(Ts),Ts=replaceLightNums(Ts,_s),Ts=replaceClippingPlaneNums(Ts,_s),Cs=unrollLoops(Cs),Ts=unrollLoops(Ts),_s.isWebGL2&&!_s.isRawShaderMaterial){var Ds=!1,$s=/^\s*#version\s+300\s+es\s*\n/;_s.isShaderMaterial&&Cs.match($s)!==null&&Ts.match($s)!==null&&(Ds=!0,Cs=Cs.replace($s,""),Ts=Ts.replace($s,"")),ks=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+ks,Ns=[`#version 300 es
`,"#define varying in",Ds?"":"out highp vec4 pc_fragColor;",Ds?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ns}var Gs=ks+Cs,Us=Ns+Ts,Hs=WebGLShader(Ss,35633,Gs),zs=WebGLShader(Ss,35632,Us);if(Ss.attachShader(Vs,Hs),Ss.attachShader(Vs,zs),_s.index0AttributeName!==void 0?Ss.bindAttribLocation(Vs,0,_s.index0AttributeName):_s.morphTargets===!0&&Ss.bindAttribLocation(Vs,0,"position"),Ss.linkProgram(Vs),ca.debug.checkShaderErrors){var js=Ss.getProgramInfoLog(Vs).trim(),Ws=Ss.getShaderInfoLog(Hs).trim(),Qs=Ss.getShaderInfoLog(zs).trim(),Zs=!0,Xs=!0;if(Ss.getProgramParameter(Vs,35714)===!1){Zs=!1;var eu=getShaderErrors(Ss,Hs,"vertex"),Ys=getShaderErrors(Ss,zs,"fragment");console.error("THREE.WebGLProgram: shader error: ",Ss.getError(),"35715",Ss.getProgramParameter(Vs,35715),"gl.getProgramInfoLog",js,eu,Ys)}else js!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",js):(Ws===""||Qs==="")&&(Xs=!1);Xs&&(this.diagnostics={runnable:Zs,programLog:js,vertexShader:{log:Ws,prefix:ks},fragmentShader:{log:Qs,prefix:Ns}})}Ss.deleteShader(Hs),Ss.deleteShader(zs);var Js;this.getUniforms=function(){return Js===void 0&&(Js=new WebGLUniforms(Ss,Vs)),Js};var qs;return this.getAttributes=function(){return qs===void 0&&(qs=fetchAttributeLocations(Ss,Vs)),qs},this.destroy=function(){Ss.deleteProgram(Vs),this.program=void 0},this.name=_s.shaderName,this.id=programIdCount++,this.cacheKey=ga,this.usedTimes=1,this.program=Vs,this.vertexShader=Hs,this.fragmentShader=zs,this}function WebGLPrograms(ca,ga,_s){var Ss=[],Ms=_s.isWebGL2,Cs=_s.logarithmicDepthBuffer,Ts=_s.floatVertexTextures,Is=_s.precision,Bs=_s.maxVertexUniforms,Ps=_s.vertexTextures,Ls={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Rs=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Os(ks,Ns){var Ds;if(Ns){var $s=ShaderLib[Ns];Ds={name:ks.type,uniforms:UniformsUtils.clone($s.uniforms),vertexShader:$s.vertexShader,fragmentShader:$s.fragmentShader}}else Ds={name:ks.type,uniforms:ks.uniforms,vertexShader:ks.vertexShader,fragmentShader:ks.fragmentShader};return Ds}function Fs(ks){var Ns=ks.skeleton,Ds=Ns.bones;if(Ts)return 1024;var $s=Bs,Gs=Math.floor(($s-20)/4),Us=Math.min(Gs,Ds.length);return Us<Ds.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ds.length+" bones. This GPU supports "+Us+"."),0):Us}function Vs(ks){var Ns;return ks?ks.isTexture?Ns=ks.encoding:ks.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Ns=ks.texture.encoding):Ns=LinearEncoding,Ns}this.getParameters=function(ks,Ns,Ds,$s,Gs,Us,Hs){var zs=$s.fog,js=ks.isMeshStandardMaterial?$s.environment:null,Ws=ks.envMap||js,Qs=Ls[ks.type],Zs=Hs.isSkinnedMesh?Fs(Hs):0;ks.precision!==null&&(Is=_s.getMaxPrecision(ks.precision),Is!==ks.precision&&console.warn("THREE.WebGLProgram.getParameters:",ks.precision,"not supported, using",Is,"instead."));var Xs=Os(ks,Qs);ks.onBeforeCompile(Xs,ca);var eu=ca.getRenderTarget(),Ys={isWebGL2:Ms,shaderID:Qs,shaderName:Xs.name,uniforms:Xs.uniforms,vertexShader:Xs.vertexShader,fragmentShader:Xs.fragmentShader,defines:ks.defines,isRawShaderMaterial:ks.isRawShaderMaterial,isShaderMaterial:ks.isShaderMaterial,precision:Is,instancing:Hs.isInstancedMesh===!0,supportsVertexTextures:Ps,outputEncoding:eu!==null?Vs(eu.texture):ca.outputEncoding,map:!!ks.map,mapEncoding:Vs(ks.map),matcap:!!ks.matcap,matcapEncoding:Vs(ks.matcap),envMap:!!Ws,envMapMode:Ws&&Ws.mapping,envMapEncoding:Vs(Ws),envMapCubeUV:!!Ws&&(Ws.mapping===CubeUVReflectionMapping||Ws.mapping===CubeUVRefractionMapping),lightMap:!!ks.lightMap,lightMapEncoding:Vs(ks.lightMap),aoMap:!!ks.aoMap,emissiveMap:!!ks.emissiveMap,emissiveMapEncoding:Vs(ks.emissiveMap),bumpMap:!!ks.bumpMap,normalMap:!!ks.normalMap,objectSpaceNormalMap:ks.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:ks.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!ks.clearcoatMap,clearcoatRoughnessMap:!!ks.clearcoatRoughnessMap,clearcoatNormalMap:!!ks.clearcoatNormalMap,displacementMap:!!ks.displacementMap,roughnessMap:!!ks.roughnessMap,metalnessMap:!!ks.metalnessMap,specularMap:!!ks.specularMap,alphaMap:!!ks.alphaMap,gradientMap:!!ks.gradientMap,sheen:!!ks.sheen,combine:ks.combine,vertexTangents:ks.normalMap&&ks.vertexTangents,vertexColors:ks.vertexColors,vertexUvs:!!ks.map||!!ks.bumpMap||!!ks.normalMap||!!ks.specularMap||!!ks.alphaMap||!!ks.emissiveMap||!!ks.roughnessMap||!!ks.metalnessMap||!!ks.clearcoatMap||!!ks.clearcoatRoughnessMap||!!ks.clearcoatNormalMap||!!ks.displacementMap,uvsVertexOnly:!(!!ks.map||!!ks.bumpMap||!!ks.normalMap||!!ks.specularMap||!!ks.alphaMap||!!ks.emissiveMap||!!ks.roughnessMap||!!ks.metalnessMap||!!ks.clearcoatNormalMap)&&!!ks.displacementMap,fog:!!zs,useFog:ks.fog,fogExp2:zs&&zs.isFogExp2,flatShading:ks.flatShading,sizeAttenuation:ks.sizeAttenuation,logarithmicDepthBuffer:Cs,skinning:ks.skinning&&Zs>0,maxBones:Zs,useVertexTexture:Ts,morphTargets:ks.morphTargets,morphNormals:ks.morphNormals,maxMorphTargets:ca.maxMorphTargets,maxMorphNormals:ca.maxMorphNormals,numDirLights:Ns.directional.length,numPointLights:Ns.point.length,numSpotLights:Ns.spot.length,numRectAreaLights:Ns.rectArea.length,numHemiLights:Ns.hemi.length,numDirLightShadows:Ns.directionalShadowMap.length,numPointLightShadows:Ns.pointShadowMap.length,numSpotLightShadows:Ns.spotShadowMap.length,numClippingPlanes:Gs,numClipIntersection:Us,dithering:ks.dithering,shadowMapEnabled:ca.shadowMap.enabled&&Ds.length>0,shadowMapType:ca.shadowMap.type,toneMapping:ks.toneMapped?ca.toneMapping:NoToneMapping,physicallyCorrectLights:ca.physicallyCorrectLights,premultipliedAlpha:ks.premultipliedAlpha,alphaTest:ks.alphaTest,doubleSided:ks.side===DoubleSide,flipSided:ks.side===BackSide,depthPacking:ks.depthPacking!==void 0?ks.depthPacking:!1,index0AttributeName:ks.index0AttributeName,extensionDerivatives:ks.extensions&&ks.extensions.derivatives,extensionFragDepth:ks.extensions&&ks.extensions.fragDepth,extensionDrawBuffers:ks.extensions&&ks.extensions.drawBuffers,extensionShaderTextureLOD:ks.extensions&&ks.extensions.shaderTextureLOD,rendererExtensionFragDepth:Ms||ga.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Ms||ga.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Ms||ga.get("EXT_shader_texture_lod")!==null,onBeforeCompile:ks.onBeforeCompile};return Ys},this.getProgramCacheKey=function(ks){var Ns=[];if(ks.shaderID?Ns.push(ks.shaderID):(Ns.push(ks.fragmentShader),Ns.push(ks.vertexShader)),ks.defines!==void 0)for(var Ds in ks.defines)Ns.push(Ds),Ns.push(ks.defines[Ds]);if(ks.isRawShaderMaterial===void 0){for(var $s=0;$s<Rs.length;$s++)Ns.push(ks[Rs[$s]]);Ns.push(ca.outputEncoding),Ns.push(ca.gammaFactor)}return Ns.push(ks.onBeforeCompile.toString()),Ns.join()},this.acquireProgram=function(ks,Ns){for(var Ds,$s=0,Gs=Ss.length;$s<Gs;$s++){var Us=Ss[$s];if(Us.cacheKey===Ns){Ds=Us,++Ds.usedTimes;break}}return Ds===void 0&&(Ds=new WebGLProgram(ca,Ns,ks),Ss.push(Ds)),Ds},this.releaseProgram=function(ks){if(--ks.usedTimes===0){var Ns=Ss.indexOf(ks);Ss[Ns]=Ss[Ss.length-1],Ss.pop(),ks.destroy()}},this.programs=Ss}function WebGLProperties(){var ca=new WeakMap;function ga(Cs){var Ts=ca.get(Cs);return Ts===void 0&&(Ts={},ca.set(Cs,Ts)),Ts}function _s(Cs){ca.delete(Cs)}function Ss(Cs,Ts,Is){ca.get(Cs)[Ts]=Is}function Ms(){ca=new WeakMap}return{get:ga,remove:_s,update:Ss,dispose:Ms}}function painterSortStable(ca,ga){return ca.groupOrder!==ga.groupOrder?ca.groupOrder-ga.groupOrder:ca.renderOrder!==ga.renderOrder?ca.renderOrder-ga.renderOrder:ca.program!==ga.program?ca.program.id-ga.program.id:ca.material.id!==ga.material.id?ca.material.id-ga.material.id:ca.z!==ga.z?ca.z-ga.z:ca.id-ga.id}function reversePainterSortStable(ca,ga){return ca.groupOrder!==ga.groupOrder?ca.groupOrder-ga.groupOrder:ca.renderOrder!==ga.renderOrder?ca.renderOrder-ga.renderOrder:ca.z!==ga.z?ga.z-ca.z:ca.id-ga.id}function WebGLRenderList(){var ca=[],ga=0,_s=[],Ss=[],Ms={id:-1};function Cs(){ga=0,_s.length=0,Ss.length=0}function Ts(Rs,Os,Fs,Vs,ks,Ns){var Ds=ca[ga];return Ds===void 0?(Ds={id:Rs.id,object:Rs,geometry:Os,material:Fs,program:Fs.program||Ms,groupOrder:Vs,renderOrder:Rs.renderOrder,z:ks,group:Ns},ca[ga]=Ds):(Ds.id=Rs.id,Ds.object=Rs,Ds.geometry=Os,Ds.material=Fs,Ds.program=Fs.program||Ms,Ds.groupOrder=Vs,Ds.renderOrder=Rs.renderOrder,Ds.z=ks,Ds.group=Ns),ga++,Ds}function Is(Rs,Os,Fs,Vs,ks,Ns){var Ds=Ts(Rs,Os,Fs,Vs,ks,Ns);(Fs.transparent===!0?Ss:_s).push(Ds)}function Bs(Rs,Os,Fs,Vs,ks,Ns){var Ds=Ts(Rs,Os,Fs,Vs,ks,Ns);(Fs.transparent===!0?Ss:_s).unshift(Ds)}function Ps(Rs,Os){_s.length>1&&_s.sort(Rs||painterSortStable),Ss.length>1&&Ss.sort(Os||reversePainterSortStable)}function Ls(){for(var Rs=ga,Os=ca.length;Rs<Os;Rs++){var Fs=ca[Rs];if(Fs.id===null)break;Fs.id=null,Fs.object=null,Fs.geometry=null,Fs.material=null,Fs.program=null,Fs.group=null}}return{opaque:_s,transparent:Ss,init:Cs,push:Is,unshift:Bs,finish:Ls,sort:Ps}}function WebGLRenderLists(){var ca=new WeakMap;function ga(Ms){var Cs=Ms.target;Cs.removeEventListener("dispose",ga),ca.delete(Cs)}function _s(Ms,Cs){var Ts=ca.get(Ms),Is;return Ts===void 0?(Is=new WebGLRenderList,ca.set(Ms,new WeakMap),ca.get(Ms).set(Cs,Is),Ms.addEventListener("dispose",ga)):(Is=Ts.get(Cs),Is===void 0&&(Is=new WebGLRenderList,Ts.set(Cs,Is))),Is}function Ss(){ca=new WeakMap}return{get:_s,dispose:Ss}}function UniformsCache(){var ca={};return{get:function(ga){if(ca[ga.id]!==void 0)return ca[ga.id];var _s;switch(ga.type){case"DirectionalLight":_s={direction:new Vector3,color:new Color};break;case"SpotLight":_s={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_s={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":_s={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":_s={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ca[ga.id]=_s,_s}}}function ShadowUniformsCache(){var ca={};return{get:function(ga){if(ca[ga.id]!==void 0)return ca[ga.id];var _s;switch(ga.type){case"DirectionalLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ca[ga.id]=_s,_s}}}var nextVersion=0;function shadowCastingLightsFirst(ca,ga){return(ga.castShadow?1:0)-(ca.castShadow?1:0)}function WebGLLights(){for(var ca=new UniformsCache,ga=ShadowUniformsCache(),_s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Ss=0;Ss<9;Ss++)_s.probe.push(new Vector3);var Ms=new Vector3,Cs=new Matrix4,Ts=new Matrix4;function Is(Bs,Ps,Ls){for(var Rs=0,Os=0,Fs=0,Vs=0;Vs<9;Vs++)_s.probe[Vs].set(0,0,0);var ks=0,Ns=0,Ds=0,$s=0,Gs=0,Us=0,Hs=0,zs=0,js=Ls.matrixWorldInverse;Bs.sort(shadowCastingLightsFirst);for(var Vs=0,Ws=Bs.length;Vs<Ws;Vs++){var Qs=Bs[Vs],Zs=Qs.color,Xs=Qs.intensity,eu=Qs.distance,Ys=Qs.shadow&&Qs.shadow.map?Qs.shadow.map.texture:null;if(Qs.isAmbientLight)Rs+=Zs.r*Xs,Os+=Zs.g*Xs,Fs+=Zs.b*Xs;else if(Qs.isLightProbe)for(var Js=0;Js<9;Js++)_s.probe[Js].addScaledVector(Qs.sh.coefficients[Js],Xs);else if(Qs.isDirectionalLight){var qs=ca.get(Qs);if(qs.color.copy(Qs.color).multiplyScalar(Qs.intensity),qs.direction.setFromMatrixPosition(Qs.matrixWorld),Ms.setFromMatrixPosition(Qs.target.matrixWorld),qs.direction.sub(Ms),qs.direction.transformDirection(js),Qs.castShadow){var ru=Qs.shadow,tu=ga.get(Qs);tu.shadowBias=ru.bias,tu.shadowRadius=ru.radius,tu.shadowMapSize=ru.mapSize,_s.directionalShadow[ks]=tu,_s.directionalShadowMap[ks]=Ys,_s.directionalShadowMatrix[ks]=Qs.shadow.matrix,Us++}_s.directional[ks]=qs,ks++}else if(Qs.isSpotLight){var qs=ca.get(Qs);if(qs.position.setFromMatrixPosition(Qs.matrixWorld),qs.position.applyMatrix4(js),qs.color.copy(Zs).multiplyScalar(Xs),qs.distance=eu,qs.direction.setFromMatrixPosition(Qs.matrixWorld),Ms.setFromMatrixPosition(Qs.target.matrixWorld),qs.direction.sub(Ms),qs.direction.transformDirection(js),qs.coneCos=Math.cos(Qs.angle),qs.penumbraCos=Math.cos(Qs.angle*(1-Qs.penumbra)),qs.decay=Qs.decay,Qs.castShadow){var ru=Qs.shadow,tu=ga.get(Qs);tu.shadowBias=ru.bias,tu.shadowRadius=ru.radius,tu.shadowMapSize=ru.mapSize,_s.spotShadow[Ds]=tu,_s.spotShadowMap[Ds]=Ys,_s.spotShadowMatrix[Ds]=Qs.shadow.matrix,zs++}_s.spot[Ds]=qs,Ds++}else if(Qs.isRectAreaLight){var qs=ca.get(Qs);qs.color.copy(Zs).multiplyScalar(Xs),qs.position.setFromMatrixPosition(Qs.matrixWorld),qs.position.applyMatrix4(js),Ts.identity(),Cs.copy(Qs.matrixWorld),Cs.premultiply(js),Ts.extractRotation(Cs),qs.halfWidth.set(Qs.width*.5,0,0),qs.halfHeight.set(0,Qs.height*.5,0),qs.halfWidth.applyMatrix4(Ts),qs.halfHeight.applyMatrix4(Ts),_s.rectArea[$s]=qs,$s++}else if(Qs.isPointLight){var qs=ca.get(Qs);if(qs.position.setFromMatrixPosition(Qs.matrixWorld),qs.position.applyMatrix4(js),qs.color.copy(Qs.color).multiplyScalar(Qs.intensity),qs.distance=Qs.distance,qs.decay=Qs.decay,Qs.castShadow){var ru=Qs.shadow,tu=ga.get(Qs);tu.shadowBias=ru.bias,tu.shadowRadius=ru.radius,tu.shadowMapSize=ru.mapSize,tu.shadowCameraNear=ru.camera.near,tu.shadowCameraFar=ru.camera.far,_s.pointShadow[Ns]=tu,_s.pointShadowMap[Ns]=Ys,_s.pointShadowMatrix[Ns]=Qs.shadow.matrix,Hs++}_s.point[Ns]=qs,Ns++}else if(Qs.isHemisphereLight){var qs=ca.get(Qs);qs.direction.setFromMatrixPosition(Qs.matrixWorld),qs.direction.transformDirection(js),qs.direction.normalize(),qs.skyColor.copy(Qs.color).multiplyScalar(Xs),qs.groundColor.copy(Qs.groundColor).multiplyScalar(Xs),_s.hemi[Gs]=qs,Gs++}}_s.ambient[0]=Rs,_s.ambient[1]=Os,_s.ambient[2]=Fs;var nu=_s.hash;(nu.directionalLength!==ks||nu.pointLength!==Ns||nu.spotLength!==Ds||nu.rectAreaLength!==$s||nu.hemiLength!==Gs||nu.numDirectionalShadows!==Us||nu.numPointShadows!==Hs||nu.numSpotShadows!==zs)&&(_s.directional.length=ks,_s.spot.length=Ds,_s.rectArea.length=$s,_s.point.length=Ns,_s.hemi.length=Gs,_s.directionalShadow.length=Us,_s.directionalShadowMap.length=Us,_s.pointShadow.length=Hs,_s.pointShadowMap.length=Hs,_s.spotShadow.length=zs,_s.spotShadowMap.length=zs,_s.directionalShadowMatrix.length=Us,_s.pointShadowMatrix.length=Hs,_s.spotShadowMatrix.length=zs,nu.directionalLength=ks,nu.pointLength=Ns,nu.spotLength=Ds,nu.rectAreaLength=$s,nu.hemiLength=Gs,nu.numDirectionalShadows=Us,nu.numPointShadows=Hs,nu.numSpotShadows=zs,_s.version=nextVersion++)}return{setup:Is,state:_s}}function WebGLRenderState(){var ca=new WebGLLights,ga=[],_s=[];function Ss(){ga.length=0,_s.length=0}function Ms(Bs){ga.push(Bs)}function Cs(Bs){_s.push(Bs)}function Ts(Bs){ca.setup(ga,_s,Bs)}var Is={lightsArray:ga,shadowsArray:_s,lights:ca};return{init:Ss,state:Is,setupLights:Ts,pushLight:Ms,pushShadow:Cs}}function WebGLRenderStates(){var ca=new WeakMap;function ga(Ms){var Cs=Ms.target;Cs.removeEventListener("dispose",ga),ca.delete(Cs)}function _s(Ms,Cs){var Ts;return ca.has(Ms)===!1?(Ts=new WebGLRenderState,ca.set(Ms,new WeakMap),ca.get(Ms).set(Cs,Ts),Ms.addEventListener("dispose",ga)):ca.get(Ms).has(Cs)===!1?(Ts=new WebGLRenderState,ca.get(Ms).set(Cs,Ts)):Ts=ca.get(Ms).get(Cs),Ts}function Ss(){ca=new WeakMap}return{get:_s,dispose:Ss}}function MeshDepthMaterial(ca){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(ca)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.depthPacking=ca.depthPacking,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.map=ca.map,this.alphaMap=ca.alphaMap,this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this};function MeshDistanceMaterial(ca){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(ca)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.referencePosition.copy(ca.referencePosition),this.nearDistance=ca.nearDistance,this.farDistance=ca.farDistance,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.map=ca.map,this.alphaMap=ca.alphaMap,this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(ca,ga,_s){var Ss=new Frustum,Ms=new Vector2,Cs=new Vector2,Ts=new Vector4,Is=[],Bs=[],Ps={},Ls={0:BackSide,1:FrontSide,2:DoubleSide},Rs=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Os=Rs.clone();Os.defines.HORIZONAL_PASS=1;var Fs=new BufferGeometry;Fs.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Vs=new Mesh(Fs,Rs),ks=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(Hs,zs,js){if(ks.enabled!==!1&&!(ks.autoUpdate===!1&&ks.needsUpdate===!1)&&Hs.length!==0){var Ws=ca.getRenderTarget(),Qs=ca.getActiveCubeFace(),Zs=ca.getActiveMipmapLevel(),Xs=ca.state;Xs.setBlending(NoBlending),Xs.buffers.color.setClear(1,1,1,1),Xs.buffers.depth.setTest(!0),Xs.setScissorTest(!1);for(var eu=0,Ys=Hs.length;eu<Ys;eu++){var Js=Hs[eu],qs=Js.shadow;if(qs===void 0){console.warn("THREE.WebGLShadowMap:",Js,"has no shadow.");continue}Ms.copy(qs.mapSize);var ru=qs.getFrameExtents();if(Ms.multiply(ru),Cs.copy(qs.mapSize),(Ms.x>_s||Ms.y>_s)&&(Ms.x>_s&&(Cs.x=Math.floor(_s/ru.x),Ms.x=Cs.x*ru.x,qs.mapSize.x=Cs.x),Ms.y>_s&&(Cs.y=Math.floor(_s/ru.y),Ms.y=Cs.y*ru.y,qs.mapSize.y=Cs.y)),qs.map===null&&!qs.isPointLightShadow&&this.type===VSMShadowMap){var tu={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};qs.map=new WebGLRenderTarget(Ms.x,Ms.y,tu),qs.map.texture.name=Js.name+".shadowMap",qs.mapPass=new WebGLRenderTarget(Ms.x,Ms.y,tu),qs.camera.updateProjectionMatrix()}if(qs.map===null){var tu={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};qs.map=new WebGLRenderTarget(Ms.x,Ms.y,tu),qs.map.texture.name=Js.name+".shadowMap",qs.camera.updateProjectionMatrix()}ca.setRenderTarget(qs.map),ca.clear();for(var nu=qs.getViewportCount(),uu=0;uu<nu;uu++){var fu=qs.getViewport(uu);Ts.set(Cs.x*fu.x,Cs.y*fu.y,Cs.x*fu.z,Cs.y*fu.w),Xs.viewport(Ts),qs.updateMatrices(Js,uu),Ss=qs.getFrustum(),Us(zs,js,qs.camera,Js,this.type)}!qs.isPointLightShadow&&this.type===VSMShadowMap&&Ns(qs,js)}ks.needsUpdate=!1,ca.setRenderTarget(Ws,Qs,Zs)}};function Ns(Hs,zs){var js=ga.update(Vs);Rs.uniforms.shadow_pass.value=Hs.map.texture,Rs.uniforms.resolution.value=Hs.mapSize,Rs.uniforms.radius.value=Hs.radius,ca.setRenderTarget(Hs.mapPass),ca.clear(),ca.renderBufferDirect(zs,null,js,Rs,Vs,null),Os.uniforms.shadow_pass.value=Hs.mapPass.texture,Os.uniforms.resolution.value=Hs.mapSize,Os.uniforms.radius.value=Hs.radius,ca.setRenderTarget(Hs.map),ca.clear(),ca.renderBufferDirect(zs,null,js,Os,Vs,null)}function Ds(Hs,zs,js){var Ws=Hs<<0|zs<<1|js<<2,Qs=Is[Ws];return Qs===void 0&&(Qs=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:Hs,skinning:zs}),Is[Ws]=Qs),Qs}function $s(Hs,zs,js){var Ws=Hs<<0|zs<<1|js<<2,Qs=Bs[Ws];return Qs===void 0&&(Qs=new MeshDistanceMaterial({morphTargets:Hs,skinning:zs}),Bs[Ws]=Qs),Qs}function Gs(Hs,zs,js,Ws,Qs,Zs,Xs){var eu=null,Ys=Ds,Js=Hs.customDepthMaterial;if(Ws.isPointLight===!0&&(Ys=$s,Js=Hs.customDistanceMaterial),Js===void 0){var qs=!1;js.morphTargets===!0&&(qs=zs.morphAttributes&&zs.morphAttributes.position&&zs.morphAttributes.position.length>0);var ru=!1;Hs.isSkinnedMesh===!0&&(js.skinning===!0?ru=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Hs));var tu=Hs.isInstancedMesh===!0;eu=Ys(qs,ru,tu)}else eu=Js;if(ca.localClippingEnabled&&js.clipShadows===!0&&js.clippingPlanes.length!==0){var nu=eu.uuid,uu=js.uuid,fu=Ps[nu];fu===void 0&&(fu={},Ps[nu]=fu);var mu=fu[uu];mu===void 0&&(mu=eu.clone(),fu[uu]=mu),eu=mu}return eu.visible=js.visible,eu.wireframe=js.wireframe,Xs===VSMShadowMap?eu.side=js.shadowSide!==null?js.shadowSide:js.side:eu.side=js.shadowSide!==null?js.shadowSide:Ls[js.side],eu.clipShadows=js.clipShadows,eu.clippingPlanes=js.clippingPlanes,eu.clipIntersection=js.clipIntersection,eu.wireframeLinewidth=js.wireframeLinewidth,eu.linewidth=js.linewidth,Ws.isPointLight===!0&&eu.isMeshDistanceMaterial===!0&&(eu.referencePosition.setFromMatrixPosition(Ws.matrixWorld),eu.nearDistance=Qs,eu.farDistance=Zs),eu}function Us(Hs,zs,js,Ws,Qs){if(Hs.visible!==!1){var Zs=Hs.layers.test(zs.layers);if(Zs&&(Hs.isMesh||Hs.isLine||Hs.isPoints)&&(Hs.castShadow||Hs.receiveShadow&&Qs===VSMShadowMap)&&(!Hs.frustumCulled||Ss.intersectsObject(Hs))){Hs.modelViewMatrix.multiplyMatrices(js.matrixWorldInverse,Hs.matrixWorld);var Xs=ga.update(Hs),eu=Hs.material;if(Array.isArray(eu))for(var Ys=Xs.groups,Js=0,qs=Ys.length;Js<qs;Js++){var ru=Ys[Js],tu=eu[ru.materialIndex];if(tu&&tu.visible){var nu=Gs(Hs,Xs,tu,Ws,js.near,js.far,Qs);ca.renderBufferDirect(js,null,Xs,nu,Hs,ru)}}else if(eu.visible){var nu=Gs(Hs,Xs,eu,Ws,js.near,js.far,Qs);ca.renderBufferDirect(js,null,Xs,nu,Hs,null)}}for(var uu=Hs.children,fu=0,mu=uu.length;fu<mu;fu++)Us(uu[fu],zs,js,Ws,Qs)}}}function WebGLState(ca,ga,_s){var Ss=_s.isWebGL2;function Ms(){var cu=!1,Nu=new Vector4,ku=null,rl=new Vector4(0,0,0,0);return{setMask:function(Vu){ku!==Vu&&!cu&&(ca.colorMask(Vu,Vu,Vu,Vu),ku=Vu)},setLocked:function(Vu){cu=Vu},setClear:function(Vu,ol,sl,ul,ml){ml===!0&&(Vu*=ul,ol*=ul,sl*=ul),Nu.set(Vu,ol,sl,ul),rl.equals(Nu)===!1&&(ca.clearColor(Vu,ol,sl,ul),rl.copy(Nu))},reset:function(){cu=!1,ku=null,rl.set(-1,0,0,0)}}}function Cs(){var cu=!1,Nu=null,ku=null,rl=null;return{setTest:function(Vu){Vu?Cu(2929):bu(2929)},setMask:function(Vu){Nu!==Vu&&!cu&&(ca.depthMask(Vu),Nu=Vu)},setFunc:function(Vu){if(ku!==Vu){if(Vu)switch(Vu){case NeverDepth:ca.depthFunc(512);break;case AlwaysDepth:ca.depthFunc(519);break;case LessDepth:ca.depthFunc(513);break;case LessEqualDepth:ca.depthFunc(515);break;case EqualDepth:ca.depthFunc(514);break;case GreaterEqualDepth:ca.depthFunc(518);break;case GreaterDepth:ca.depthFunc(516);break;case NotEqualDepth:ca.depthFunc(517);break;default:ca.depthFunc(515)}else ca.depthFunc(515);ku=Vu}},setLocked:function(Vu){cu=Vu},setClear:function(Vu){rl!==Vu&&(ca.clearDepth(Vu),rl=Vu)},reset:function(){cu=!1,Nu=null,ku=null,rl=null}}}function Ts(){var cu=!1,Nu=null,ku=null,rl=null,Vu=null,ol=null,sl=null,ul=null,ml=null;return{setTest:function(al){cu||(al?Cu(2960):bu(2960))},setMask:function(al){Nu!==al&&!cu&&(ca.stencilMask(al),Nu=al)},setFunc:function(al,dl,vl){(ku!==al||rl!==dl||Vu!==vl)&&(ca.stencilFunc(al,dl,vl),ku=al,rl=dl,Vu=vl)},setOp:function(al,dl,vl){(ol!==al||sl!==dl||ul!==vl)&&(ca.stencilOp(al,dl,vl),ol=al,sl=dl,ul=vl)},setLocked:function(al){cu=al},setClear:function(al){ml!==al&&(ca.clearStencil(al),ml=al)},reset:function(){cu=!1,Nu=null,ku=null,rl=null,Vu=null,ol=null,sl=null,ul=null,ml=null}}}var Is=new Ms,Bs=new Cs,Ps=new Ts,Ls=ca.getParameter(34921),Rs=new Uint8Array(Ls),Os=new Uint8Array(Ls),Fs=new Uint8Array(Ls),Vs={},ks=null,Ns=null,Ds=null,$s=null,Gs=null,Us=null,Hs=null,zs=null,js=null,Ws=!1,Qs=null,Zs=null,Xs=null,eu=null,Ys=null,Js=ca.getParameter(35661),qs=!1,ru=0,tu=ca.getParameter(7938);tu.indexOf("WebGL")!==-1?(ru=parseFloat(/^WebGL\ ([0-9])/.exec(tu)[1]),qs=ru>=1):tu.indexOf("OpenGL ES")!==-1&&(ru=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(tu)[1]),qs=ru>=2);var nu=null,uu={},fu=new Vector4,mu=new Vector4;function vu(cu,Nu,ku){var rl=new Uint8Array(4),Vu=ca.createTexture();ca.bindTexture(cu,Vu),ca.texParameteri(cu,10241,9728),ca.texParameteri(cu,10240,9728);for(var ol=0;ol<ku;ol++)ca.texImage2D(Nu+ol,0,6408,1,1,0,6408,5121,rl);return Vu}var Eu={};Eu[3553]=vu(3553,3553,1),Eu[34067]=vu(34067,34069,6),Is.setClear(0,0,0,1),Bs.setClear(1),Ps.setClear(0),Cu(2929),Bs.setFunc(LessEqualDepth),iu(!1),su(CullFaceBack),Cu(2884),nl(NoBlending);function hu(){for(var cu=0,Nu=Rs.length;cu<Nu;cu++)Rs[cu]=0}function pu(cu){du(cu,0)}function du(cu,Nu){if(Rs[cu]=1,Os[cu]===0&&(ca.enableVertexAttribArray(cu),Os[cu]=1),Fs[cu]!==Nu){var ku=Ss?ca:ga.get("ANGLE_instanced_arrays");ku[Ss?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](cu,Nu),Fs[cu]=Nu}}function yu(){for(var cu=0,Nu=Os.length;cu!==Nu;++cu)Os[cu]!==Rs[cu]&&(ca.disableVertexAttribArray(cu),Os[cu]=0)}function Su(cu,Nu,ku,rl,Vu,ol){Ss===!0&&(ku===5124||ku===5125)?ca.vertexAttribIPointer(cu,Nu,ku,rl,Vu,ol):ca.vertexAttribPointer(cu,Nu,ku,rl,Vu,ol)}function Cu(cu){Vs[cu]!==!0&&(ca.enable(cu),Vs[cu]=!0)}function bu(cu){Vs[cu]!==!1&&(ca.disable(cu),Vs[cu]=!1)}function Au(cu){return ks!==cu?(ca.useProgram(cu),ks=cu,!0):!1}var Tu={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Ss)Tu[MinEquation]=32775,Tu[MaxEquation]=32776;else{var Pu=ga.get("EXT_blend_minmax");Pu!==null&&(Tu[MinEquation]=Pu.MIN_EXT,Tu[MaxEquation]=Pu.MAX_EXT)}var zu={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function nl(cu,Nu,ku,rl,Vu,ol,sl,ul){if(cu===NoBlending){Ns&&(bu(3042),Ns=!1);return}if(Ns||(Cu(3042),Ns=!0),cu!==CustomBlending){if(cu!==Ds||ul!==Ws){if(($s!==AddEquation||Hs!==AddEquation)&&(ca.blendEquation(32774),$s=AddEquation,Hs=AddEquation),ul)switch(cu){case NormalBlending:ca.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:ca.blendFunc(1,1);break;case SubtractiveBlending:ca.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:ca.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",cu);break}else switch(cu){case NormalBlending:ca.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:ca.blendFunc(770,1);break;case SubtractiveBlending:ca.blendFunc(0,769);break;case MultiplyBlending:ca.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",cu);break}Gs=null,Us=null,zs=null,js=null,Ds=cu,Ws=ul}return}Vu=Vu||Nu,ol=ol||ku,sl=sl||rl,(Nu!==$s||Vu!==Hs)&&(ca.blendEquationSeparate(Tu[Nu],Tu[Vu]),$s=Nu,Hs=Vu),(ku!==Gs||rl!==Us||ol!==zs||sl!==js)&&(ca.blendFuncSeparate(zu[ku],zu[rl],zu[ol],zu[sl]),Gs=ku,Us=rl,zs=ol,js=sl),Ds=cu,Ws=null}function $u(cu,Nu){cu.side===DoubleSide?bu(2884):Cu(2884);var ku=cu.side===BackSide;Nu&&(ku=!ku),iu(ku),cu.blending===NormalBlending&&cu.transparent===!1?nl(NoBlending):nl(cu.blending,cu.blendEquation,cu.blendSrc,cu.blendDst,cu.blendEquationAlpha,cu.blendSrcAlpha,cu.blendDstAlpha,cu.premultipliedAlpha),Bs.setFunc(cu.depthFunc),Bs.setTest(cu.depthTest),Bs.setMask(cu.depthWrite),Is.setMask(cu.colorWrite);var rl=cu.stencilWrite;Ps.setTest(rl),rl&&(Ps.setMask(cu.stencilWriteMask),Ps.setFunc(cu.stencilFunc,cu.stencilRef,cu.stencilFuncMask),Ps.setOp(cu.stencilFail,cu.stencilZFail,cu.stencilZPass)),Iu(cu.polygonOffset,cu.polygonOffsetFactor,cu.polygonOffsetUnits)}function iu(cu){Qs!==cu&&(cu?ca.frontFace(2304):ca.frontFace(2305),Qs=cu)}function su(cu){cu!==CullFaceNone?(Cu(2884),cu!==Zs&&(cu===CullFaceBack?ca.cullFace(1029):cu===CullFaceFront?ca.cullFace(1028):ca.cullFace(1032))):bu(2884),Zs=cu}function Bu(cu){cu!==Xs&&(qs&&ca.lineWidth(cu),Xs=cu)}function Iu(cu,Nu,ku){cu?(Cu(32823),(eu!==Nu||Ys!==ku)&&(ca.polygonOffset(Nu,ku),eu=Nu,Ys=ku)):bu(32823)}function Qu(cu){cu?Cu(3089):bu(3089)}function Ou(cu){cu===void 0&&(cu=33984+Js-1),nu!==cu&&(ca.activeTexture(cu),nu=cu)}function Du(cu,Nu){nu===null&&Ou();var ku=uu[nu];ku===void 0&&(ku={type:void 0,texture:void 0},uu[nu]=ku),(ku.type!==cu||ku.texture!==Nu)&&(ca.bindTexture(cu,Nu||Eu[cu]),ku.type=cu,ku.texture=Nu)}function Zu(){var cu=uu[nu];cu!==void 0&&cu.type!==void 0&&(ca.bindTexture(cu.type,null),cu.type=void 0,cu.texture=void 0)}function qu(){try{ca.compressedTexImage2D.apply(ca,arguments)}catch(cu){console.error("THREE.WebGLState:",cu)}}function Ku(){try{ca.texImage2D.apply(ca,arguments)}catch(cu){console.error("THREE.WebGLState:",cu)}}function Ru(){try{ca.texImage3D.apply(ca,arguments)}catch(cu){console.error("THREE.WebGLState:",cu)}}function Gu(cu){fu.equals(cu)===!1&&(ca.scissor(cu.x,cu.y,cu.z,cu.w),fu.copy(cu))}function Fu(cu){mu.equals(cu)===!1&&(ca.viewport(cu.x,cu.y,cu.z,cu.w),mu.copy(cu))}function Uu(){for(var cu=0;cu<Os.length;cu++)Os[cu]===1&&(ca.disableVertexAttribArray(cu),Os[cu]=0);Vs={},nu=null,uu={},ks=null,Ds=null,Qs=null,Zs=null,Is.reset(),Bs.reset(),Ps.reset()}return{buffers:{color:Is,depth:Bs,stencil:Ps},initAttributes:hu,enableAttribute:pu,enableAttributeAndDivisor:du,disableUnusedAttributes:yu,vertexAttribPointer:Su,enable:Cu,disable:bu,useProgram:Au,setBlending:nl,setMaterial:$u,setFlipSided:iu,setCullFace:su,setLineWidth:Bu,setPolygonOffset:Iu,setScissorTest:Qu,activeTexture:Ou,bindTexture:Du,unbindTexture:Zu,compressedTexImage2D:qu,texImage2D:Ku,texImage3D:Ru,scissor:Gu,viewport:Fu,reset:Uu}}function WebGLTextures(ca,ga,_s,Ss,Ms,Cs,Ts){var Is=Ms.isWebGL2,Bs=Ms.maxTextures,Ps=Ms.maxCubemapSize,Ls=Ms.maxTextureSize,Rs=Ms.maxSamples,Os=new WeakMap,Fs,Vs=!1;try{Vs=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ks(iu,su){return Vs?new OffscreenCanvas(iu,su):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Ns(iu,su,Bu,Iu){var Qu=1;if((iu.width>Iu||iu.height>Iu)&&(Qu=Iu/Math.max(iu.width,iu.height)),Qu<1||su===!0)if(typeof HTMLImageElement!="undefined"&&iu instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&iu instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&iu instanceof ImageBitmap){var Ou=su?MathUtils.floorPowerOfTwo:Math.floor,Du=Ou(Qu*iu.width),Zu=Ou(Qu*iu.height);Fs===void 0&&(Fs=ks(Du,Zu));var qu=Bu?ks(Du,Zu):Fs;qu.width=Du,qu.height=Zu;var Ku=qu.getContext("2d");return Ku.drawImage(iu,0,0,Du,Zu),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+iu.width+"x"+iu.height+") to ("+Du+"x"+Zu+")."),qu}else return"data"in iu&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+iu.width+"x"+iu.height+")."),iu;return iu}function Ds(iu){return MathUtils.isPowerOfTwo(iu.width)&&MathUtils.isPowerOfTwo(iu.height)}function $s(iu){return Is?!1:iu.wrapS!==ClampToEdgeWrapping||iu.wrapT!==ClampToEdgeWrapping||iu.minFilter!==NearestFilter&&iu.minFilter!==LinearFilter}function Gs(iu,su){return iu.generateMipmaps&&su&&iu.minFilter!==NearestFilter&&iu.minFilter!==LinearFilter}function Us(iu,su,Bu,Iu){ca.generateMipmap(iu);var Qu=Ss.get(su);Qu.__maxMipLevel=Math.log(Math.max(Bu,Iu))*Math.LOG2E}function Hs(iu,su,Bu){if(Is===!1)return su;if(iu!==null){if(ca[iu]!==void 0)return ca[iu];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+iu+"'")}var Iu=su;return su===6403&&(Bu===5126&&(Iu=33326),Bu===5131&&(Iu=33325),Bu===5121&&(Iu=33321)),su===6407&&(Bu===5126&&(Iu=34837),Bu===5131&&(Iu=34843),Bu===5121&&(Iu=32849)),su===6408&&(Bu===5126&&(Iu=34836),Bu===5131&&(Iu=34842),Bu===5121&&(Iu=32856)),(Iu===33325||Iu===33326||Iu===34842||Iu===34836)&&ga.get("EXT_color_buffer_float"),Iu}function zs(iu){return iu===NearestFilter||iu===NearestMipmapNearestFilter||iu===NearestMipmapLinearFilter?9728:9729}function js(iu){var su=iu.target;su.removeEventListener("dispose",js),Qs(su),su.isVideoTexture&&Os.delete(su),Ts.memory.textures--}function Ws(iu){var su=iu.target;su.removeEventListener("dispose",Ws),Zs(su),Ts.memory.textures--}function Qs(iu){var su=Ss.get(iu);su.__webglInit!==void 0&&(ca.deleteTexture(su.__webglTexture),Ss.remove(iu))}function Zs(iu){var su=Ss.get(iu),Bu=Ss.get(iu.texture);if(!!iu){if(Bu.__webglTexture!==void 0&&ca.deleteTexture(Bu.__webglTexture),iu.depthTexture&&iu.depthTexture.dispose(),iu.isWebGLCubeRenderTarget)for(var Iu=0;Iu<6;Iu++)ca.deleteFramebuffer(su.__webglFramebuffer[Iu]),su.__webglDepthbuffer&&ca.deleteRenderbuffer(su.__webglDepthbuffer[Iu]);else ca.deleteFramebuffer(su.__webglFramebuffer),su.__webglDepthbuffer&&ca.deleteRenderbuffer(su.__webglDepthbuffer),su.__webglMultisampledFramebuffer&&ca.deleteFramebuffer(su.__webglMultisampledFramebuffer),su.__webglColorRenderbuffer&&ca.deleteRenderbuffer(su.__webglColorRenderbuffer),su.__webglDepthRenderbuffer&&ca.deleteRenderbuffer(su.__webglDepthRenderbuffer);Ss.remove(iu.texture),Ss.remove(iu)}}var Xs=0;function eu(){Xs=0}function Ys(){var iu=Xs;return iu>=Bs&&console.warn("THREE.WebGLTextures: Trying to use "+iu+" texture units while this GPU supports only "+Bs),Xs+=1,iu}function Js(iu,su){var Bu=Ss.get(iu);if(iu.isVideoTexture&&Tu(iu),iu.version>0&&Bu.__version!==iu.version){var Iu=iu.image;if(Iu===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Iu.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Eu(Bu,iu,su);return}}_s.activeTexture(33984+su),_s.bindTexture(3553,Bu.__webglTexture)}function qs(iu,su){var Bu=Ss.get(iu);if(iu.version>0&&Bu.__version!==iu.version){Eu(Bu,iu,su);return}_s.activeTexture(33984+su),_s.bindTexture(35866,Bu.__webglTexture)}function ru(iu,su){var Bu=Ss.get(iu);if(iu.version>0&&Bu.__version!==iu.version){Eu(Bu,iu,su);return}_s.activeTexture(33984+su),_s.bindTexture(32879,Bu.__webglTexture)}function tu(iu,su){if(iu.image.length===6){var Bu=Ss.get(iu);if(iu.version>0&&Bu.__version!==iu.version){vu(Bu,iu),_s.activeTexture(33984+su),_s.bindTexture(34067,Bu.__webglTexture),ca.pixelStorei(37440,iu.flipY);for(var Iu=iu&&(iu.isCompressedTexture||iu.image[0].isCompressedTexture),Qu=iu.image[0]&&iu.image[0].isDataTexture,Ou=[],Du=0;Du<6;Du++)!Iu&&!Qu?Ou[Du]=Ns(iu.image[Du],!1,!0,Ps):Ou[Du]=Qu?iu.image[Du].image:iu.image[Du];var Zu=Ou[0],qu=Ds(Zu)||Is,Ku=Cs.convert(iu.format),Ru=Cs.convert(iu.type),Gu=Hs(iu.internalFormat,Ku,Ru);mu(34067,iu,qu);var Fu;if(Iu){for(var Du=0;Du<6;Du++){Fu=Ou[Du].mipmaps;for(var Uu=0;Uu<Fu.length;Uu++){var cu=Fu[Uu];iu.format!==RGBAFormat&&iu.format!==RGBFormat?Ku!==null?_s.compressedTexImage2D(34069+Du,Uu,Gu,cu.width,cu.height,0,cu.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_s.texImage2D(34069+Du,Uu,Gu,cu.width,cu.height,0,Ku,Ru,cu.data)}}Bu.__maxMipLevel=Fu.length-1}else{Fu=iu.mipmaps;for(var Du=0;Du<6;Du++)if(Qu){_s.texImage2D(34069+Du,0,Gu,Ou[Du].width,Ou[Du].height,0,Ku,Ru,Ou[Du].data);for(var Uu=0;Uu<Fu.length;Uu++){var cu=Fu[Uu],Nu=cu.image[Du].image;_s.texImage2D(34069+Du,Uu+1,Gu,Nu.width,Nu.height,0,Ku,Ru,Nu.data)}}else{_s.texImage2D(34069+Du,0,Gu,Ku,Ru,Ou[Du]);for(var Uu=0;Uu<Fu.length;Uu++){var cu=Fu[Uu];_s.texImage2D(34069+Du,Uu+1,Gu,Ku,Ru,cu.image[Du])}}Bu.__maxMipLevel=Fu.length}Gs(iu,qu)&&Us(34067,iu,Zu.width,Zu.height),Bu.__version=iu.version,iu.onUpdate&&iu.onUpdate(iu)}else _s.activeTexture(33984+su),_s.bindTexture(34067,Bu.__webglTexture)}}function nu(iu,su){_s.activeTexture(33984+su),_s.bindTexture(34067,Ss.get(iu).__webglTexture)}var uu={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},fu={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function mu(iu,su,Bu){Bu?(ca.texParameteri(iu,10242,uu[su.wrapS]),ca.texParameteri(iu,10243,uu[su.wrapT]),(iu===32879||iu===35866)&&ca.texParameteri(iu,32882,uu[su.wrapR]),ca.texParameteri(iu,10240,fu[su.magFilter]),ca.texParameteri(iu,10241,fu[su.minFilter])):(ca.texParameteri(iu,10242,33071),ca.texParameteri(iu,10243,33071),(iu===32879||iu===35866)&&ca.texParameteri(iu,32882,33071),(su.wrapS!==ClampToEdgeWrapping||su.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),ca.texParameteri(iu,10240,zs(su.magFilter)),ca.texParameteri(iu,10241,zs(su.minFilter)),su.minFilter!==NearestFilter&&su.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Iu=ga.get("EXT_texture_filter_anisotropic");if(Iu){if(su.type===FloatType&&ga.get("OES_texture_float_linear")===null||su.type===HalfFloatType&&(Is||ga.get("OES_texture_half_float_linear"))===null)return;(su.anisotropy>1||Ss.get(su).__currentAnisotropy)&&(ca.texParameterf(iu,Iu.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(su.anisotropy,Ms.getMaxAnisotropy())),Ss.get(su).__currentAnisotropy=su.anisotropy)}}function vu(iu,su){iu.__webglInit===void 0&&(iu.__webglInit=!0,su.addEventListener("dispose",js),iu.__webglTexture=ca.createTexture(),Ts.memory.textures++)}function Eu(iu,su,Bu){var Iu=3553;su.isDataTexture2DArray&&(Iu=35866),su.isDataTexture3D&&(Iu=32879),vu(iu,su),_s.activeTexture(33984+Bu),_s.bindTexture(Iu,iu.__webglTexture),ca.pixelStorei(37440,su.flipY),ca.pixelStorei(37441,su.premultiplyAlpha),ca.pixelStorei(3317,su.unpackAlignment);var Qu=$s(su)&&Ds(su.image)===!1,Ou=Ns(su.image,Qu,!1,Ls),Du=Ds(Ou)||Is,Zu=Cs.convert(su.format),qu=Cs.convert(su.type),Ku=Hs(su.internalFormat,Zu,qu);mu(Iu,su,Du);var Ru,Gu=su.mipmaps;if(su.isDepthTexture)Ku=6402,Is?su.type===FloatType?Ku=36012:su.type===UnsignedIntType?Ku=33190:su.type===UnsignedInt248Type?Ku=35056:Ku=33189:su.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),su.format===DepthFormat&&Ku===6402&&su.type!==UnsignedShortType&&su.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),su.type=UnsignedShortType,qu=Cs.convert(su.type)),su.format===DepthStencilFormat&&Ku===6402&&(Ku=34041,su.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),su.type=UnsignedInt248Type,qu=Cs.convert(su.type))),_s.texImage2D(3553,0,Ku,Ou.width,Ou.height,0,Zu,qu,null);else if(su.isDataTexture)if(Gu.length>0&&Du){for(var Fu=0,Uu=Gu.length;Fu<Uu;Fu++)Ru=Gu[Fu],_s.texImage2D(3553,Fu,Ku,Ru.width,Ru.height,0,Zu,qu,Ru.data);su.generateMipmaps=!1,iu.__maxMipLevel=Gu.length-1}else _s.texImage2D(3553,0,Ku,Ou.width,Ou.height,0,Zu,qu,Ou.data),iu.__maxMipLevel=0;else if(su.isCompressedTexture){for(var Fu=0,Uu=Gu.length;Fu<Uu;Fu++)Ru=Gu[Fu],su.format!==RGBAFormat&&su.format!==RGBFormat?Zu!==null?_s.compressedTexImage2D(3553,Fu,Ku,Ru.width,Ru.height,0,Ru.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_s.texImage2D(3553,Fu,Ku,Ru.width,Ru.height,0,Zu,qu,Ru.data);iu.__maxMipLevel=Gu.length-1}else if(su.isDataTexture2DArray)_s.texImage3D(35866,0,Ku,Ou.width,Ou.height,Ou.depth,0,Zu,qu,Ou.data),iu.__maxMipLevel=0;else if(su.isDataTexture3D)_s.texImage3D(32879,0,Ku,Ou.width,Ou.height,Ou.depth,0,Zu,qu,Ou.data),iu.__maxMipLevel=0;else if(Gu.length>0&&Du){for(var Fu=0,Uu=Gu.length;Fu<Uu;Fu++)Ru=Gu[Fu],_s.texImage2D(3553,Fu,Ku,Zu,qu,Ru);su.generateMipmaps=!1,iu.__maxMipLevel=Gu.length-1}else _s.texImage2D(3553,0,Ku,Zu,qu,Ou),iu.__maxMipLevel=0;Gs(su,Du)&&Us(Iu,su,Ou.width,Ou.height),iu.__version=su.version,su.onUpdate&&su.onUpdate(su)}function hu(iu,su,Bu,Iu){var Qu=Cs.convert(su.texture.format),Ou=Cs.convert(su.texture.type),Du=Hs(su.texture.internalFormat,Qu,Ou);_s.texImage2D(Iu,0,Du,su.width,su.height,0,Qu,Ou,null),ca.bindFramebuffer(36160,iu),ca.framebufferTexture2D(36160,Bu,Iu,Ss.get(su.texture).__webglTexture,0),ca.bindFramebuffer(36160,null)}function pu(iu,su,Bu){if(ca.bindRenderbuffer(36161,iu),su.depthBuffer&&!su.stencilBuffer){var Iu=33189;if(Bu){var Qu=su.depthTexture;Qu&&Qu.isDepthTexture&&(Qu.type===FloatType?Iu=36012:Qu.type===UnsignedIntType&&(Iu=33190));var Ou=Au(su);ca.renderbufferStorageMultisample(36161,Ou,Iu,su.width,su.height)}else ca.renderbufferStorage(36161,Iu,su.width,su.height);ca.framebufferRenderbuffer(36160,36096,36161,iu)}else if(su.depthBuffer&&su.stencilBuffer){if(Bu){var Ou=Au(su);ca.renderbufferStorageMultisample(36161,Ou,35056,su.width,su.height)}else ca.renderbufferStorage(36161,34041,su.width,su.height);ca.framebufferRenderbuffer(36160,33306,36161,iu)}else{var Du=Cs.convert(su.texture.format),Zu=Cs.convert(su.texture.type),Iu=Hs(su.texture.internalFormat,Du,Zu);if(Bu){var Ou=Au(su);ca.renderbufferStorageMultisample(36161,Ou,Iu,su.width,su.height)}else ca.renderbufferStorage(36161,Iu,su.width,su.height)}ca.bindRenderbuffer(36161,null)}function du(iu,su){var Bu=su&&su.isWebGLCubeRenderTarget;if(Bu)throw new Error("Depth Texture with cube render targets is not supported");if(ca.bindFramebuffer(36160,iu),!(su.depthTexture&&su.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Ss.get(su.depthTexture).__webglTexture||su.depthTexture.image.width!==su.width||su.depthTexture.image.height!==su.height)&&(su.depthTexture.image.width=su.width,su.depthTexture.image.height=su.height,su.depthTexture.needsUpdate=!0),Js(su.depthTexture,0);var Iu=Ss.get(su.depthTexture).__webglTexture;if(su.depthTexture.format===DepthFormat)ca.framebufferTexture2D(36160,36096,3553,Iu,0);else if(su.depthTexture.format===DepthStencilFormat)ca.framebufferTexture2D(36160,33306,3553,Iu,0);else throw new Error("Unknown depthTexture format")}function yu(iu){var su=Ss.get(iu),Bu=iu.isWebGLCubeRenderTarget===!0;if(iu.depthTexture){if(Bu)throw new Error("target.depthTexture not supported in Cube render targets");du(su.__webglFramebuffer,iu)}else if(Bu){su.__webglDepthbuffer=[];for(var Iu=0;Iu<6;Iu++)ca.bindFramebuffer(36160,su.__webglFramebuffer[Iu]),su.__webglDepthbuffer[Iu]=ca.createRenderbuffer(),pu(su.__webglDepthbuffer[Iu],iu,!1)}else ca.bindFramebuffer(36160,su.__webglFramebuffer),su.__webglDepthbuffer=ca.createRenderbuffer(),pu(su.__webglDepthbuffer,iu,!1);ca.bindFramebuffer(36160,null)}function Su(iu){var su=Ss.get(iu),Bu=Ss.get(iu.texture);iu.addEventListener("dispose",Ws),Bu.__webglTexture=ca.createTexture(),Ts.memory.textures++;var Iu=iu.isWebGLCubeRenderTarget===!0,Qu=iu.isWebGLMultisampleRenderTarget===!0,Ou=Ds(iu)||Is;if(Is&&iu.texture.format===RGBFormat&&(iu.texture.type===FloatType||iu.texture.type===HalfFloatType)&&(iu.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Iu){su.__webglFramebuffer=[];for(var Du=0;Du<6;Du++)su.__webglFramebuffer[Du]=ca.createFramebuffer()}else if(su.__webglFramebuffer=ca.createFramebuffer(),Qu)if(Is){su.__webglMultisampledFramebuffer=ca.createFramebuffer(),su.__webglColorRenderbuffer=ca.createRenderbuffer(),ca.bindRenderbuffer(36161,su.__webglColorRenderbuffer);var Zu=Cs.convert(iu.texture.format),qu=Cs.convert(iu.texture.type),Ku=Hs(iu.texture.internalFormat,Zu,qu),Ru=Au(iu);ca.renderbufferStorageMultisample(36161,Ru,Ku,iu.width,iu.height),ca.bindFramebuffer(36160,su.__webglMultisampledFramebuffer),ca.framebufferRenderbuffer(36160,36064,36161,su.__webglColorRenderbuffer),ca.bindRenderbuffer(36161,null),iu.depthBuffer&&(su.__webglDepthRenderbuffer=ca.createRenderbuffer(),pu(su.__webglDepthRenderbuffer,iu,!0)),ca.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Iu){_s.bindTexture(34067,Bu.__webglTexture),mu(34067,iu.texture,Ou);for(var Du=0;Du<6;Du++)hu(su.__webglFramebuffer[Du],iu,36064,34069+Du);Gs(iu.texture,Ou)&&Us(34067,iu.texture,iu.width,iu.height),_s.bindTexture(34067,null)}else _s.bindTexture(3553,Bu.__webglTexture),mu(3553,iu.texture,Ou),hu(su.__webglFramebuffer,iu,36064,3553),Gs(iu.texture,Ou)&&Us(3553,iu.texture,iu.width,iu.height),_s.bindTexture(3553,null);iu.depthBuffer&&yu(iu)}function Cu(iu){var su=iu.texture,Bu=Ds(iu)||Is;if(Gs(su,Bu)){var Iu=iu.isWebGLCubeRenderTarget?34067:3553,Qu=Ss.get(su).__webglTexture;_s.bindTexture(Iu,Qu),Us(Iu,su,iu.width,iu.height),_s.bindTexture(Iu,null)}}function bu(iu){if(iu.isWebGLMultisampleRenderTarget)if(Is){var su=Ss.get(iu);ca.bindFramebuffer(36008,su.__webglMultisampledFramebuffer),ca.bindFramebuffer(36009,su.__webglFramebuffer);var Bu=iu.width,Iu=iu.height,Qu=16384;iu.depthBuffer&&(Qu|=256),iu.stencilBuffer&&(Qu|=1024),ca.blitFramebuffer(0,0,Bu,Iu,0,0,Bu,Iu,Qu,9728),ca.bindFramebuffer(36160,su.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Au(iu){return Is&&iu.isWebGLMultisampleRenderTarget?Math.min(Rs,iu.samples):0}function Tu(iu){var su=Ts.render.frame;Os.get(iu)!==su&&(Os.set(iu,su),iu.update())}var Pu=!1,zu=!1;function nl(iu,su){iu&&iu.isWebGLRenderTarget&&(Pu===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Pu=!0),iu=iu.texture),Js(iu,su)}function $u(iu,su){iu&&iu.isWebGLCubeRenderTarget&&(zu===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),zu=!0),iu=iu.texture),iu&&iu.isCubeTexture||Array.isArray(iu.image)&&iu.image.length===6?tu(iu,su):nu(iu,su)}this.allocateTextureUnit=Ys,this.resetTextureUnits=eu,this.setTexture2D=Js,this.setTexture2DArray=qs,this.setTexture3D=ru,this.setTextureCube=tu,this.setTextureCubeDynamic=nu,this.setupRenderTarget=Su,this.updateRenderTargetMipmap=Cu,this.updateMultisampleRenderTarget=bu,this.safeSetTexture2D=nl,this.safeSetTextureCube=$u}function WebGLUtils(ca,ga,_s){var Ss=_s.isWebGL2;function Ms(Cs){var Ts;if(Cs===UnsignedByteType)return 5121;if(Cs===UnsignedShort4444Type)return 32819;if(Cs===UnsignedShort5551Type)return 32820;if(Cs===UnsignedShort565Type)return 33635;if(Cs===ByteType)return 5120;if(Cs===ShortType)return 5122;if(Cs===UnsignedShortType)return 5123;if(Cs===IntType)return 5124;if(Cs===UnsignedIntType)return 5125;if(Cs===FloatType)return 5126;if(Cs===HalfFloatType)return Ss?5131:(Ts=ga.get("OES_texture_half_float"),Ts!==null?Ts.HALF_FLOAT_OES:null);if(Cs===AlphaFormat)return 6406;if(Cs===RGBFormat)return 6407;if(Cs===RGBAFormat)return 6408;if(Cs===LuminanceFormat)return 6409;if(Cs===LuminanceAlphaFormat)return 6410;if(Cs===DepthFormat)return 6402;if(Cs===DepthStencilFormat)return 34041;if(Cs===RedFormat)return 6403;if(Cs===RedIntegerFormat)return 36244;if(Cs===RGFormat)return 33319;if(Cs===RGIntegerFormat)return 33320;if(Cs===RGBIntegerFormat)return 36248;if(Cs===RGBAIntegerFormat)return 36249;if(Cs===RGB_S3TC_DXT1_Format||Cs===RGBA_S3TC_DXT1_Format||Cs===RGBA_S3TC_DXT3_Format||Cs===RGBA_S3TC_DXT5_Format)if(Ts=ga.get("WEBGL_compressed_texture_s3tc"),Ts!==null){if(Cs===RGB_S3TC_DXT1_Format)return Ts.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Cs===RGBA_S3TC_DXT1_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Cs===RGBA_S3TC_DXT3_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Cs===RGBA_S3TC_DXT5_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Cs===RGB_PVRTC_4BPPV1_Format||Cs===RGB_PVRTC_2BPPV1_Format||Cs===RGBA_PVRTC_4BPPV1_Format||Cs===RGBA_PVRTC_2BPPV1_Format)if(Ts=ga.get("WEBGL_compressed_texture_pvrtc"),Ts!==null){if(Cs===RGB_PVRTC_4BPPV1_Format)return Ts.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Cs===RGB_PVRTC_2BPPV1_Format)return Ts.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Cs===RGBA_PVRTC_4BPPV1_Format)return Ts.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Cs===RGBA_PVRTC_2BPPV1_Format)return Ts.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Cs===RGB_ETC1_Format)return Ts=ga.get("WEBGL_compressed_texture_etc1"),Ts!==null?Ts.COMPRESSED_RGB_ETC1_WEBGL:null;if((Cs===RGB_ETC2_Format||Cs===RGBA_ETC2_EAC_Format)&&(Ts=ga.get("WEBGL_compressed_texture_etc"),Ts!==null)){if(Cs===RGB_ETC2_Format)return Ts.COMPRESSED_RGB8_ETC2;if(Cs===RGBA_ETC2_EAC_Format)return Ts.COMPRESSED_RGBA8_ETC2_EAC}if(Cs===RGBA_ASTC_4x4_Format||Cs===RGBA_ASTC_5x4_Format||Cs===RGBA_ASTC_5x5_Format||Cs===RGBA_ASTC_6x5_Format||Cs===RGBA_ASTC_6x6_Format||Cs===RGBA_ASTC_8x5_Format||Cs===RGBA_ASTC_8x6_Format||Cs===RGBA_ASTC_8x8_Format||Cs===RGBA_ASTC_10x5_Format||Cs===RGBA_ASTC_10x6_Format||Cs===RGBA_ASTC_10x8_Format||Cs===RGBA_ASTC_10x10_Format||Cs===RGBA_ASTC_12x10_Format||Cs===RGBA_ASTC_12x12_Format||Cs===SRGB8_ALPHA8_ASTC_4x4_Format||Cs===SRGB8_ALPHA8_ASTC_5x4_Format||Cs===SRGB8_ALPHA8_ASTC_5x5_Format||Cs===SRGB8_ALPHA8_ASTC_6x5_Format||Cs===SRGB8_ALPHA8_ASTC_6x6_Format||Cs===SRGB8_ALPHA8_ASTC_8x5_Format||Cs===SRGB8_ALPHA8_ASTC_8x6_Format||Cs===SRGB8_ALPHA8_ASTC_8x8_Format||Cs===SRGB8_ALPHA8_ASTC_10x5_Format||Cs===SRGB8_ALPHA8_ASTC_10x6_Format||Cs===SRGB8_ALPHA8_ASTC_10x8_Format||Cs===SRGB8_ALPHA8_ASTC_10x10_Format||Cs===SRGB8_ALPHA8_ASTC_12x10_Format||Cs===SRGB8_ALPHA8_ASTC_12x12_Format)return Ts=ga.get("WEBGL_compressed_texture_astc"),Ts!==null?Cs:null;if(Cs===RGBA_BPTC_Format)return Ts=ga.get("EXT_texture_compression_bptc"),Ts!==null?Cs:null;if(Cs===UnsignedInt248Type)return Ss?34042:(Ts=ga.get("WEBGL_depth_texture"),Ts!==null?Ts.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Ms}}function ArrayCamera(ca){PerspectiveCamera.call(this),this.cameras=ca||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(ca){return this._targetRay!==null&&this._targetRay.dispatchEvent(ca),this._grip!==null&&this._grip.dispatchEvent(ca),this},disconnect:function(ca){return this.dispatchEvent({type:"disconnected",data:ca}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(ca,ga,_s){var Ss=null,Ms=null,Cs=this._targetRay,Ts=this._grip;return ca&&(Cs!==null&&(Ss=ga.getPose(ca.targetRaySpace,_s),Ss!==null&&(Cs.matrix.fromArray(Ss.transform.matrix),Cs.matrix.decompose(Cs.position,Cs.rotation,Cs.scale))),Ts!==null&&ca.gripSpace&&(Ms=ga.getPose(ca.gripSpace,_s),Ms!==null&&(Ts.matrix.fromArray(Ms.transform.matrix),Ts.matrix.decompose(Ts.position,Ts.rotation,Ts.scale)))),Cs!==null&&(Cs.visible=Ss!==null),Ts!==null&&(Ts.visible=Ms!==null),this}});function WebXRManager(ca,ga){var _s=this,Ss=null,Ms=1,Cs=null,Ts="local-floor",Is=null,Bs=[],Ps=new Map,Ls=new PerspectiveCamera;Ls.layers.enable(1),Ls.viewport=new Vector4;var Rs=new PerspectiveCamera;Rs.layers.enable(2),Rs.viewport=new Vector4;var Os=[Ls,Rs],Fs=new ArrayCamera;Fs.layers.enable(1),Fs.layers.enable(2);var Vs=null,ks=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Xs){var eu=Bs[Xs];return eu===void 0&&(eu=new WebXRController,Bs[Xs]=eu),eu.getTargetRaySpace()},this.getControllerGrip=function(Xs){var eu=Bs[Xs];return eu===void 0&&(eu=new WebXRController,Bs[Xs]=eu),eu.getGripSpace()};function Ns(Xs){var eu=Ps.get(Xs.inputSource);eu&&eu.dispatchEvent({type:Xs.type})}function Ds(){Ps.forEach(function(Xs,eu){Xs.disconnect(eu)}),Ps.clear(),ca.setFramebuffer(null),ca.setRenderTarget(ca.getRenderTarget()),Zs.stop(),_s.isPresenting=!1,_s.dispatchEvent({type:"sessionend"})}function $s(Xs){Cs=Xs,Zs.setContext(Ss),Zs.start(),_s.isPresenting=!0,_s.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Xs){Ms=Xs,_s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Xs){Ts=Xs,_s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Cs},this.getSession=function(){return Ss},this.setSession=function(Xs){if(Ss=Xs,Ss!==null){Ss.addEventListener("select",Ns),Ss.addEventListener("selectstart",Ns),Ss.addEventListener("selectend",Ns),Ss.addEventListener("squeeze",Ns),Ss.addEventListener("squeezestart",Ns),Ss.addEventListener("squeezeend",Ns),Ss.addEventListener("end",Ds);var eu=ga.getContextAttributes();eu.xrCompatible!==!0&&ga.makeXRCompatible();var Ys={antialias:eu.antialias,alpha:eu.alpha,depth:eu.depth,stencil:eu.stencil,framebufferScaleFactor:Ms},Js=new XRWebGLLayer(Ss,ga,Ys);Ss.updateRenderState({baseLayer:Js}),Ss.requestReferenceSpace(Ts).then($s),Ss.addEventListener("inputsourceschange",Gs)}};function Gs(Xs){for(var eu=Ss.inputSources,Ys=0;Ys<Bs.length;Ys++)Ps.set(eu[Ys],Bs[Ys]);for(var Ys=0;Ys<Xs.removed.length;Ys++){var Js=Xs.removed[Ys],qs=Ps.get(Js);qs&&(qs.dispatchEvent({type:"disconnected",data:Js}),Ps.delete(Js))}for(var Ys=0;Ys<Xs.added.length;Ys++){var Js=Xs.added[Ys],qs=Ps.get(Js);qs&&qs.dispatchEvent({type:"connected",data:Js})}}var Us=new Vector3,Hs=new Vector3;function zs(Xs,eu,Ys){Us.setFromMatrixPosition(eu.matrixWorld),Hs.setFromMatrixPosition(Ys.matrixWorld);var Js=Us.distanceTo(Hs),qs=eu.projectionMatrix.elements,ru=Ys.projectionMatrix.elements,tu=qs[14]/(qs[10]-1),nu=qs[14]/(qs[10]+1),uu=(qs[9]+1)/qs[5],fu=(qs[9]-1)/qs[5],mu=(qs[8]-1)/qs[0],vu=(ru[8]+1)/ru[0],Eu=tu*mu,hu=tu*vu,pu=Js/(-mu+vu),du=pu*-mu;eu.matrixWorld.decompose(Xs.position,Xs.quaternion,Xs.scale),Xs.translateX(du),Xs.translateZ(pu),Xs.matrixWorld.compose(Xs.position,Xs.quaternion,Xs.scale),Xs.matrixWorldInverse.getInverse(Xs.matrixWorld);var yu=tu+pu,Su=nu+pu,Cu=Eu-du,bu=hu+(Js-du),Au=uu*nu/Su*yu,Tu=fu*nu/Su*yu;Xs.projectionMatrix.makePerspective(Cu,bu,Au,Tu,yu,Su)}function js(Xs,eu){eu===null?Xs.matrixWorld.copy(Xs.matrix):Xs.matrixWorld.multiplyMatrices(eu.matrixWorld,Xs.matrix),Xs.matrixWorldInverse.getInverse(Xs.matrixWorld)}this.getCamera=function(Xs){Fs.near=Rs.near=Ls.near=Xs.near,Fs.far=Rs.far=Ls.far=Xs.far,(Vs!==Fs.near||ks!==Fs.far)&&(Ss.updateRenderState({depthNear:Fs.near,depthFar:Fs.far}),Vs=Fs.near,ks=Fs.far);var eu=Xs.parent,Ys=Fs.cameras;js(Fs,eu);for(var Js=0;Js<Ys.length;Js++)js(Ys[Js],eu);Xs.matrixWorld.copy(Fs.matrixWorld);for(var qs=Xs.children,Js=0,ru=qs.length;Js<ru;Js++)qs[Js].updateMatrixWorld(!0);return Ys.length===2?zs(Fs,Ls,Rs):Fs.projectionMatrix.copy(Ls.projectionMatrix),Fs};var Ws=null;function Qs(Xs,eu){if(Is=eu.getViewerPose(Cs),Is!==null){var Ys=Is.views,Js=Ss.renderState.baseLayer;ca.setFramebuffer(Js.framebuffer);var qs=!1;Ys.length!==Fs.cameras.length&&(Fs.cameras.length=0,qs=!0);for(var ru=0;ru<Ys.length;ru++){var tu=Ys[ru],nu=Js.getViewport(tu),uu=Os[ru];uu.matrix.fromArray(tu.transform.matrix),uu.projectionMatrix.fromArray(tu.projectionMatrix),uu.viewport.set(nu.x,nu.y,nu.width,nu.height),ru===0&&Fs.matrix.copy(uu.matrix),qs===!0&&Fs.cameras.push(uu)}}for(var fu=Ss.inputSources,ru=0;ru<Bs.length;ru++){var mu=Bs[ru],vu=fu[ru];mu.update(vu,eu,Cs)}Ws&&Ws(Xs,eu)}var Zs=new WebGLAnimation;Zs.setAnimationLoop(Qs),this.setAnimationLoop=function(Xs){Ws=Xs},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(ca){function ga(Ds,$s){Ds.fogColor.value.copy($s.color),$s.isFog?(Ds.fogNear.value=$s.near,Ds.fogFar.value=$s.far):$s.isFogExp2&&(Ds.fogDensity.value=$s.density)}function _s(Ds,$s,Gs,Us,Hs){$s.isMeshBasicMaterial?Ss(Ds,$s):$s.isMeshLambertMaterial?(Ss(Ds,$s),Bs(Ds,$s)):$s.isMeshToonMaterial?(Ss(Ds,$s),Ls(Ds,$s)):$s.isMeshPhongMaterial?(Ss(Ds,$s),Ps(Ds,$s)):$s.isMeshStandardMaterial?(Ss(Ds,$s,Gs),$s.isMeshPhysicalMaterial?Os(Ds,$s,Gs):Rs(Ds,$s,Gs)):$s.isMeshMatcapMaterial?(Ss(Ds,$s),Fs(Ds,$s)):$s.isMeshDepthMaterial?(Ss(Ds,$s),Vs(Ds,$s)):$s.isMeshDistanceMaterial?(Ss(Ds,$s),ks(Ds,$s)):$s.isMeshNormalMaterial?(Ss(Ds,$s),Ns(Ds,$s)):$s.isLineBasicMaterial?(Ms(Ds,$s),$s.isLineDashedMaterial&&Cs(Ds,$s)):$s.isPointsMaterial?Ts(Ds,$s,Us,Hs):$s.isSpriteMaterial?Is(Ds,$s):$s.isShadowMaterial?(Ds.color.value.copy($s.color),Ds.opacity.value=$s.opacity):$s.isShaderMaterial&&($s.uniformsNeedUpdate=!1)}function Ss(Ds,$s,Gs){Ds.opacity.value=$s.opacity,$s.color&&Ds.diffuse.value.copy($s.color),$s.emissive&&Ds.emissive.value.copy($s.emissive).multiplyScalar($s.emissiveIntensity),$s.map&&(Ds.map.value=$s.map),$s.alphaMap&&(Ds.alphaMap.value=$s.alphaMap),$s.specularMap&&(Ds.specularMap.value=$s.specularMap);var Us=$s.envMap||Gs;Us&&(Ds.envMap.value=Us,Ds.flipEnvMap.value=Us.isCubeTexture?-1:1,Ds.reflectivity.value=$s.reflectivity,Ds.refractionRatio.value=$s.refractionRatio,Ds.maxMipLevel.value=ca.get(Us).__maxMipLevel),$s.lightMap&&(Ds.lightMap.value=$s.lightMap,Ds.lightMapIntensity.value=$s.lightMapIntensity),$s.aoMap&&(Ds.aoMap.value=$s.aoMap,Ds.aoMapIntensity.value=$s.aoMapIntensity);var Hs;$s.map?Hs=$s.map:$s.specularMap?Hs=$s.specularMap:$s.displacementMap?Hs=$s.displacementMap:$s.normalMap?Hs=$s.normalMap:$s.bumpMap?Hs=$s.bumpMap:$s.roughnessMap?Hs=$s.roughnessMap:$s.metalnessMap?Hs=$s.metalnessMap:$s.alphaMap?Hs=$s.alphaMap:$s.emissiveMap&&(Hs=$s.emissiveMap),Hs!==void 0&&(Hs.isWebGLRenderTarget&&(Hs=Hs.texture),Hs.matrixAutoUpdate===!0&&Hs.updateMatrix(),Ds.uvTransform.value.copy(Hs.matrix));var zs;$s.aoMap?zs=$s.aoMap:$s.lightMap&&(zs=$s.lightMap),zs!==void 0&&(zs.isWebGLRenderTarget&&(zs=zs.texture),zs.matrixAutoUpdate===!0&&zs.updateMatrix(),Ds.uv2Transform.value.copy(zs.matrix))}function Ms(Ds,$s){Ds.diffuse.value.copy($s.color),Ds.opacity.value=$s.opacity}function Cs(Ds,$s){Ds.dashSize.value=$s.dashSize,Ds.totalSize.value=$s.dashSize+$s.gapSize,Ds.scale.value=$s.scale}function Ts(Ds,$s,Gs,Us){Ds.diffuse.value.copy($s.color),Ds.opacity.value=$s.opacity,Ds.size.value=$s.size*Gs,Ds.scale.value=Us*.5,$s.map&&(Ds.map.value=$s.map),$s.alphaMap&&(Ds.alphaMap.value=$s.alphaMap);var Hs;$s.map?Hs=$s.map:$s.alphaMap&&(Hs=$s.alphaMap),Hs!==void 0&&(Hs.matrixAutoUpdate===!0&&Hs.updateMatrix(),Ds.uvTransform.value.copy(Hs.matrix))}function Is(Ds,$s){Ds.diffuse.value.copy($s.color),Ds.opacity.value=$s.opacity,Ds.rotation.value=$s.rotation,$s.map&&(Ds.map.value=$s.map),$s.alphaMap&&(Ds.alphaMap.value=$s.alphaMap);var Gs;$s.map?Gs=$s.map:$s.alphaMap&&(Gs=$s.alphaMap),Gs!==void 0&&(Gs.matrixAutoUpdate===!0&&Gs.updateMatrix(),Ds.uvTransform.value.copy(Gs.matrix))}function Bs(Ds,$s){$s.emissiveMap&&(Ds.emissiveMap.value=$s.emissiveMap)}function Ps(Ds,$s){Ds.specular.value.copy($s.specular),Ds.shininess.value=Math.max($s.shininess,1e-4),$s.emissiveMap&&(Ds.emissiveMap.value=$s.emissiveMap),$s.bumpMap&&(Ds.bumpMap.value=$s.bumpMap,Ds.bumpScale.value=$s.bumpScale,$s.side===BackSide&&(Ds.bumpScale.value*=-1)),$s.normalMap&&(Ds.normalMap.value=$s.normalMap,Ds.normalScale.value.copy($s.normalScale),$s.side===BackSide&&Ds.normalScale.value.negate()),$s.displacementMap&&(Ds.displacementMap.value=$s.displacementMap,Ds.displacementScale.value=$s.displacementScale,Ds.displacementBias.value=$s.displacementBias)}function Ls(Ds,$s){Ds.specular.value.copy($s.specular),Ds.shininess.value=Math.max($s.shininess,1e-4),$s.gradientMap&&(Ds.gradientMap.value=$s.gradientMap),$s.emissiveMap&&(Ds.emissiveMap.value=$s.emissiveMap),$s.bumpMap&&(Ds.bumpMap.value=$s.bumpMap,Ds.bumpScale.value=$s.bumpScale,$s.side===BackSide&&(Ds.bumpScale.value*=-1)),$s.normalMap&&(Ds.normalMap.value=$s.normalMap,Ds.normalScale.value.copy($s.normalScale),$s.side===BackSide&&Ds.normalScale.value.negate()),$s.displacementMap&&(Ds.displacementMap.value=$s.displacementMap,Ds.displacementScale.value=$s.displacementScale,Ds.displacementBias.value=$s.displacementBias)}function Rs(Ds,$s,Gs){Ds.roughness.value=$s.roughness,Ds.metalness.value=$s.metalness,$s.roughnessMap&&(Ds.roughnessMap.value=$s.roughnessMap),$s.metalnessMap&&(Ds.metalnessMap.value=$s.metalnessMap),$s.emissiveMap&&(Ds.emissiveMap.value=$s.emissiveMap),$s.bumpMap&&(Ds.bumpMap.value=$s.bumpMap,Ds.bumpScale.value=$s.bumpScale,$s.side===BackSide&&(Ds.bumpScale.value*=-1)),$s.normalMap&&(Ds.normalMap.value=$s.normalMap,Ds.normalScale.value.copy($s.normalScale),$s.side===BackSide&&Ds.normalScale.value.negate()),$s.displacementMap&&(Ds.displacementMap.value=$s.displacementMap,Ds.displacementScale.value=$s.displacementScale,Ds.displacementBias.value=$s.displacementBias),($s.envMap||Gs)&&(Ds.envMapIntensity.value=$s.envMapIntensity)}function Os(Ds,$s,Gs){Rs(Ds,$s,Gs),Ds.reflectivity.value=$s.reflectivity,Ds.clearcoat.value=$s.clearcoat,Ds.clearcoatRoughness.value=$s.clearcoatRoughness,$s.sheen&&Ds.sheen.value.copy($s.sheen),$s.clearcoatMap&&(Ds.clearcoatMap.value=$s.clearcoatMap),$s.clearcoatRoughnessMap&&(Ds.clearcoatRoughnessMap.value=$s.clearcoatRoughnessMap),$s.clearcoatNormalMap&&(Ds.clearcoatNormalScale.value.copy($s.clearcoatNormalScale),Ds.clearcoatNormalMap.value=$s.clearcoatNormalMap,$s.side===BackSide&&Ds.clearcoatNormalScale.value.negate()),Ds.transparency.value=$s.transparency}function Fs(Ds,$s){$s.matcap&&(Ds.matcap.value=$s.matcap),$s.bumpMap&&(Ds.bumpMap.value=$s.bumpMap,Ds.bumpScale.value=$s.bumpScale,$s.side===BackSide&&(Ds.bumpScale.value*=-1)),$s.normalMap&&(Ds.normalMap.value=$s.normalMap,Ds.normalScale.value.copy($s.normalScale),$s.side===BackSide&&Ds.normalScale.value.negate()),$s.displacementMap&&(Ds.displacementMap.value=$s.displacementMap,Ds.displacementScale.value=$s.displacementScale,Ds.displacementBias.value=$s.displacementBias)}function Vs(Ds,$s){$s.displacementMap&&(Ds.displacementMap.value=$s.displacementMap,Ds.displacementScale.value=$s.displacementScale,Ds.displacementBias.value=$s.displacementBias)}function ks(Ds,$s){$s.displacementMap&&(Ds.displacementMap.value=$s.displacementMap,Ds.displacementScale.value=$s.displacementScale,Ds.displacementBias.value=$s.displacementBias),Ds.referencePosition.value.copy($s.referencePosition),Ds.nearDistance.value=$s.nearDistance,Ds.farDistance.value=$s.farDistance}function Ns(Ds,$s){$s.bumpMap&&(Ds.bumpMap.value=$s.bumpMap,Ds.bumpScale.value=$s.bumpScale,$s.side===BackSide&&(Ds.bumpScale.value*=-1)),$s.normalMap&&(Ds.normalMap.value=$s.normalMap,Ds.normalScale.value.copy($s.normalScale),$s.side===BackSide&&Ds.normalScale.value.negate()),$s.displacementMap&&(Ds.displacementMap.value=$s.displacementMap,Ds.displacementScale.value=$s.displacementScale,Ds.displacementBias.value=$s.displacementBias)}return{refreshFogUniforms:ga,refreshMaterialUniforms:_s}}function WebGLRenderer(ca){ca=ca||{};var ga=ca.canvas!==void 0?ca.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),_s=ca.context!==void 0?ca.context:null,Ss=ca.alpha!==void 0?ca.alpha:!1,Ms=ca.depth!==void 0?ca.depth:!0,Cs=ca.stencil!==void 0?ca.stencil:!0,Ts=ca.antialias!==void 0?ca.antialias:!1,Is=ca.premultipliedAlpha!==void 0?ca.premultipliedAlpha:!0,Bs=ca.preserveDrawingBuffer!==void 0?ca.preserveDrawingBuffer:!1,Ps=ca.powerPreference!==void 0?ca.powerPreference:"default",Ls=ca.failIfMajorPerformanceCaveat!==void 0?ca.failIfMajorPerformanceCaveat:!1,Rs=null,Os=null;this.domElement=ga,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Fs=this,Vs=!1,ks=null,Ns=0,Ds=0,$s=null,Gs=null,Us=-1,Hs={geometry:null,program:null,wireframe:!1},zs=null,js=null,Ws=new Vector4,Qs=new Vector4,Zs=null,Xs=ga.width,eu=ga.height,Ys=1,Js=null,qs=null,ru=new Vector4(0,0,Xs,eu),tu=new Vector4(0,0,Xs,eu),nu=!1,uu=new Frustum,fu=new WebGLClipping,mu=!1,vu=!1,Eu=new Matrix4,hu=new Vector3;function pu(){return $s===null?Ys:1}var du;try{var yu={alpha:Ss,depth:Ms,stencil:Cs,antialias:Ts,premultipliedAlpha:Is,preserveDrawingBuffer:Bs,powerPreference:Ps,failIfMajorPerformanceCaveat:Ls};if(ga.addEventListener("webglcontextlost",Fu,!1),ga.addEventListener("webglcontextrestored",Uu,!1),du=_s||ga.getContext("webgl",yu)||ga.getContext("experimental-webgl",yu),du===null)throw ga.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");du.getShaderPrecisionFormat===void 0&&(du.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ou){throw console.error("THREE.WebGLRenderer: "+ou.message),ou}var Su,Cu,bu,Au,Tu,Pu,zu,nl,$u,iu,su,Bu,Iu,Qu,Ou,Du,Zu,qu;function Ku(){Su=new WebGLExtensions(du),Cu=new WebGLCapabilities(du,Su,ca),Cu.isWebGL2===!1&&(Su.get("WEBGL_depth_texture"),Su.get("OES_texture_float"),Su.get("OES_texture_half_float"),Su.get("OES_texture_half_float_linear"),Su.get("OES_standard_derivatives"),Su.get("OES_element_index_uint"),Su.get("ANGLE_instanced_arrays")),Su.get("OES_texture_float_linear"),qu=new WebGLUtils(du,Su,Cu),bu=new WebGLState(du,Su,Cu),bu.scissor(Qs.copy(tu).multiplyScalar(Ys).floor()),bu.viewport(Ws.copy(ru).multiplyScalar(Ys).floor()),Au=new WebGLInfo(du),Tu=new WebGLProperties,Pu=new WebGLTextures(du,Su,bu,Tu,Cu,qu,Au),zu=new WebGLAttributes(du,Cu),nl=new WebGLGeometries(du,zu,Au),$u=new WebGLObjects(du,nl,zu,Au),Ou=new WebGLMorphtargets(du),iu=new WebGLPrograms(Fs,Su,Cu),su=new WebGLMaterials(Tu),Bu=new WebGLRenderLists,Iu=new WebGLRenderStates,Qu=new WebGLBackground(Fs,bu,$u,Is),Du=new WebGLBufferRenderer(du,Su,Au,Cu),Zu=new WebGLIndexedBufferRenderer(du,Su,Au,Cu),Au.programs=iu.programs,Fs.capabilities=Cu,Fs.extensions=Su,Fs.properties=Tu,Fs.renderLists=Bu,Fs.state=bu,Fs.info=Au}Ku();var Ru=new WebXRManager(Fs,du);this.xr=Ru;var Gu=new WebGLShadowMap(Fs,$u,Cu.maxTextureSize);this.shadowMap=Gu,this.getContext=function(){return du},this.getContextAttributes=function(){return du.getContextAttributes()},this.forceContextLoss=function(){var ou=Su.get("WEBGL_lose_context");ou&&ou.loseContext()},this.forceContextRestore=function(){var ou=Su.get("WEBGL_lose_context");ou&&ou.restoreContext()},this.getPixelRatio=function(){return Ys},this.setPixelRatio=function(ou){ou!==void 0&&(Ys=ou,this.setSize(Xs,eu,!1))},this.getSize=function(ou){return ou===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ou=new Vector2),ou.set(Xs,eu)},this.setSize=function(ou,_u,xu){if(Ru.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Xs=ou,eu=_u,ga.width=Math.floor(ou*Ys),ga.height=Math.floor(_u*Ys),xu!==!1&&(ga.style.width=ou+"px",ga.style.height=_u+"px"),this.setViewport(0,0,ou,_u)},this.getDrawingBufferSize=function(ou){return ou===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ou=new Vector2),ou.set(Xs*Ys,eu*Ys).floor()},this.setDrawingBufferSize=function(ou,_u,xu){Xs=ou,eu=_u,Ys=xu,ga.width=Math.floor(ou*xu),ga.height=Math.floor(_u*xu),this.setViewport(0,0,ou,_u)},this.getCurrentViewport=function(ou){return ou===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ou=new Vector4),ou.copy(Ws)},this.getViewport=function(ou){return ou.copy(ru)},this.setViewport=function(ou,_u,xu,wu){ou.isVector4?ru.set(ou.x,ou.y,ou.z,ou.w):ru.set(ou,_u,xu,wu),bu.viewport(Ws.copy(ru).multiplyScalar(Ys).floor())},this.getScissor=function(ou){return ou.copy(tu)},this.setScissor=function(ou,_u,xu,wu){ou.isVector4?tu.set(ou.x,ou.y,ou.z,ou.w):tu.set(ou,_u,xu,wu),bu.scissor(Qs.copy(tu).multiplyScalar(Ys).floor())},this.getScissorTest=function(){return nu},this.setScissorTest=function(ou){bu.setScissorTest(nu=ou)},this.setOpaqueSort=function(ou){Js=ou},this.setTransparentSort=function(ou){qs=ou},this.getClearColor=function(){return Qu.getClearColor()},this.setClearColor=function(){Qu.setClearColor.apply(Qu,arguments)},this.getClearAlpha=function(){return Qu.getClearAlpha()},this.setClearAlpha=function(){Qu.setClearAlpha.apply(Qu,arguments)},this.clear=function(ou,_u,xu){var wu=0;(ou===void 0||ou)&&(wu|=16384),(_u===void 0||_u)&&(wu|=256),(xu===void 0||xu)&&(wu|=1024),du.clear(wu)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ga.removeEventListener("webglcontextlost",Fu,!1),ga.removeEventListener("webglcontextrestored",Uu,!1),Bu.dispose(),Iu.dispose(),Tu.dispose(),$u.dispose(),Ru.dispose(),ml.stop()};function Fu(ou){ou.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Vs=!0}function Uu(){console.log("THREE.WebGLRenderer: Context Restored."),Vs=!1,Ku()}function cu(ou){var _u=ou.target;_u.removeEventListener("dispose",cu),Nu(_u)}function Nu(ou){ku(ou),Tu.remove(ou)}function ku(ou){var _u=Tu.get(ou).program;ou.program=void 0,_u!==void 0&&iu.releaseProgram(_u)}function rl(ou,_u){ou.render(function(xu){Fs.renderBufferImmediate(xu,_u)})}this.renderBufferImmediate=function(ou,_u){bu.initAttributes();var xu=Tu.get(ou);ou.hasPositions&&!xu.position&&(xu.position=du.createBuffer()),ou.hasNormals&&!xu.normal&&(xu.normal=du.createBuffer()),ou.hasUvs&&!xu.uv&&(xu.uv=du.createBuffer()),ou.hasColors&&!xu.color&&(xu.color=du.createBuffer());var wu=_u.getAttributes();ou.hasPositions&&(du.bindBuffer(34962,xu.position),du.bufferData(34962,ou.positionArray,35048),bu.enableAttribute(wu.position),du.vertexAttribPointer(wu.position,3,5126,!1,0,0)),ou.hasNormals&&(du.bindBuffer(34962,xu.normal),du.bufferData(34962,ou.normalArray,35048),bu.enableAttribute(wu.normal),du.vertexAttribPointer(wu.normal,3,5126,!1,0,0)),ou.hasUvs&&(du.bindBuffer(34962,xu.uv),du.bufferData(34962,ou.uvArray,35048),bu.enableAttribute(wu.uv),du.vertexAttribPointer(wu.uv,2,5126,!1,0,0)),ou.hasColors&&(du.bindBuffer(34962,xu.color),du.bufferData(34962,ou.colorArray,35048),bu.enableAttribute(wu.color),du.vertexAttribPointer(wu.color,3,5126,!1,0,0)),bu.disableUnusedAttributes(),du.drawArrays(4,0,ou.count),ou.count=0};var Vu=new Scene;this.renderBufferDirect=function(ou,_u,xu,wu,Lu,Ju){_u===null&&(_u=Vu);var Yu=Lu.isMesh&&Lu.matrixWorld.determinant()<0,Hu=gl(ou,_u,wu,Lu);bu.setMaterial(wu,Yu);var Xu=!1;(Hs.geometry!==xu.id||Hs.program!==Hu.id||Hs.wireframe!==(wu.wireframe===!0))&&(Hs.geometry=xu.id,Hs.program=Hu.id,Hs.wireframe=wu.wireframe===!0,Xu=!0),(wu.morphTargets||wu.morphNormals)&&(Ou.update(Lu,xu,wu,Hu),Xu=!0),Lu.isInstancedMesh===!0&&(Xu=!0);var tl=xu.index,ll=xu.attributes.position;if(tl===null){if(ll===void 0||ll.count===0)return}else if(tl.count===0)return;var Ks=1;wu.wireframe===!0&&(tl=nl.getWireframeAttribute(xu),Ks=2);var au,lu=Du;tl!==null&&(au=zu.get(tl),lu=Zu,lu.setIndex(au)),Xu&&(ol(Lu,xu,wu,Hu),tl!==null&&du.bindBuffer(34963,au.buffer));var gu=tl!==null?tl.count:ll.count,Mu=xu.drawRange.start*Ks,Wu=xu.drawRange.count*Ks,el=Ju!==null?Ju.start*Ks:0,cl=Ju!==null?Ju.count*Ks:1/0,ju=Math.max(Mu,el),hl=Math.min(gu,Mu+Wu,el+cl)-1,Al=Math.max(0,hl-ju+1);if(Al!==0){if(Lu.isMesh)wu.wireframe===!0?(bu.setLineWidth(wu.wireframeLinewidth*pu()),lu.setMode(1)):lu.setMode(4);else if(Lu.isLine){var Cl=wu.linewidth;Cl===void 0&&(Cl=1),bu.setLineWidth(Cl*pu()),Lu.isLineSegments?lu.setMode(1):Lu.isLineLoop?lu.setMode(2):lu.setMode(3)}else Lu.isPoints?lu.setMode(0):Lu.isSprite&&lu.setMode(4);if(Lu.isInstancedMesh)lu.renderInstances(xu,ju,Al,Lu.count);else if(xu.isInstancedBufferGeometry){var Pl=Math.min(xu.instanceCount,xu._maxInstanceCount);lu.renderInstances(xu,ju,Al,Pl)}else lu.render(ju,Al)}};function ol(ou,_u,xu,wu){if(!(Cu.isWebGL2===!1&&(ou.isInstancedMesh||_u.isInstancedBufferGeometry)&&Su.get("ANGLE_instanced_arrays")===null)){bu.initAttributes();var Lu=_u.attributes,Ju=wu.getAttributes(),Yu=xu.defaultAttributeValues;for(var Hu in Ju){var Xu=Ju[Hu];if(Xu>=0){var tl=Lu[Hu];if(tl!==void 0){var ll=tl.normalized,Ks=tl.itemSize,au=zu.get(tl);if(au===void 0)continue;var lu=au.buffer,gu=au.type,Mu=au.bytesPerElement;if(tl.isInterleavedBufferAttribute){var Wu=tl.data,el=Wu.stride,cl=tl.offset;Wu&&Wu.isInstancedInterleavedBuffer?(bu.enableAttributeAndDivisor(Xu,Wu.meshPerAttribute),_u._maxInstanceCount===void 0&&(_u._maxInstanceCount=Wu.meshPerAttribute*Wu.count)):bu.enableAttribute(Xu),du.bindBuffer(34962,lu),bu.vertexAttribPointer(Xu,Ks,gu,ll,el*Mu,cl*Mu)}else tl.isInstancedBufferAttribute?(bu.enableAttributeAndDivisor(Xu,tl.meshPerAttribute),_u._maxInstanceCount===void 0&&(_u._maxInstanceCount=tl.meshPerAttribute*tl.count)):bu.enableAttribute(Xu),du.bindBuffer(34962,lu),bu.vertexAttribPointer(Xu,Ks,gu,ll,0,0)}else if(Hu==="instanceMatrix"){var au=zu.get(ou.instanceMatrix);if(au===void 0)continue;var lu=au.buffer,gu=au.type;bu.enableAttributeAndDivisor(Xu+0,1),bu.enableAttributeAndDivisor(Xu+1,1),bu.enableAttributeAndDivisor(Xu+2,1),bu.enableAttributeAndDivisor(Xu+3,1),du.bindBuffer(34962,lu),du.vertexAttribPointer(Xu+0,4,gu,!1,64,0),du.vertexAttribPointer(Xu+1,4,gu,!1,64,16),du.vertexAttribPointer(Xu+2,4,gu,!1,64,32),du.vertexAttribPointer(Xu+3,4,gu,!1,64,48)}else if(Yu!==void 0){var ju=Yu[Hu];if(ju!==void 0)switch(ju.length){case 2:du.vertexAttrib2fv(Xu,ju);break;case 3:du.vertexAttrib3fv(Xu,ju);break;case 4:du.vertexAttrib4fv(Xu,ju);break;default:du.vertexAttrib1fv(Xu,ju)}}}}bu.disableUnusedAttributes()}}this.compile=function(ou,_u){Os=Iu.get(ou,_u),Os.init(),ou.traverse(function(wu){wu.isLight&&(Os.pushLight(wu),wu.castShadow&&Os.pushShadow(wu))}),Os.setupLights(_u);const xu={};ou.traverse(function(wu){let Lu=wu.material;if(Lu)if(Array.isArray(Lu))for(let Ju=0;Ju<Lu.length;Ju++){let Yu=Lu[Ju];Yu.uuid in xu||(pl(Yu,ou,wu),xu[Yu.uuid]=!0)}else Lu.uuid in xu||(pl(Lu,ou,wu),xu[Lu.uuid]=!0)})};var sl=null;function ul(ou){Ru.isPresenting||sl&&sl(ou)}var ml=new WebGLAnimation;ml.setAnimationLoop(ul),typeof window!="undefined"&&ml.setContext(window),this.setAnimationLoop=function(ou){sl=ou,Ru.setAnimationLoop(ou),ml.start()},this.render=function(ou,_u){var xu,wu;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),xu=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),wu=arguments[3]),!(_u&&_u.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Vs){Hs.geometry=null,Hs.program=null,Hs.wireframe=!1,Us=-1,zs=null,ou.autoUpdate===!0&&ou.updateMatrixWorld(),_u.parent===null&&_u.updateMatrixWorld(),Ru.enabled&&Ru.isPresenting&&(_u=Ru.getCamera(_u)),ou.onBeforeRender(Fs,ou,_u,xu||$s),Os=Iu.get(ou,_u),Os.init(),Eu.multiplyMatrices(_u.projectionMatrix,_u.matrixWorldInverse),uu.setFromProjectionMatrix(Eu),vu=this.localClippingEnabled,mu=fu.init(this.clippingPlanes,vu,_u),Rs=Bu.get(ou,_u),Rs.init(),al(ou,_u,0,Fs.sortObjects),Rs.finish(),Fs.sortObjects===!0&&Rs.sort(Js,qs),mu&&fu.beginShadows();var Lu=Os.state.shadowsArray;Gu.render(Lu,ou,_u),Os.setupLights(_u),mu&&fu.endShadows(),this.info.autoReset&&this.info.reset(),xu!==void 0&&this.setRenderTarget(xu),Qu.render(Rs,ou,_u,wu);var Ju=Rs.opaque,Yu=Rs.transparent;if(ou.overrideMaterial){var Hu=ou.overrideMaterial;Ju.length&&dl(Ju,ou,_u,Hu),Yu.length&&dl(Yu,ou,_u,Hu)}else Ju.length&&dl(Ju,ou,_u),Yu.length&&dl(Yu,ou,_u);ou.onAfterRender(Fs,ou,_u),$s!==null&&(Pu.updateRenderTargetMipmap($s),Pu.updateMultisampleRenderTarget($s)),bu.buffers.depth.setTest(!0),bu.buffers.depth.setMask(!0),bu.buffers.color.setMask(!0),bu.setPolygonOffset(!1),Rs=null,Os=null}};function al(ou,_u,xu,wu){if(ou.visible!==!1){var Lu=ou.layers.test(_u.layers);if(Lu){if(ou.isGroup)xu=ou.renderOrder;else if(ou.isLOD)ou.autoUpdate===!0&&ou.update(_u);else if(ou.isLight)Os.pushLight(ou),ou.castShadow&&Os.pushShadow(ou);else if(ou.isSprite){if(!ou.frustumCulled||uu.intersectsSprite(ou)){wu&&hu.setFromMatrixPosition(ou.matrixWorld).applyMatrix4(Eu);var Ju=$u.update(ou),Yu=ou.material;Yu.visible&&Rs.push(ou,Ju,Yu,xu,hu.z,null)}}else if(ou.isImmediateRenderObject)wu&&hu.setFromMatrixPosition(ou.matrixWorld).applyMatrix4(Eu),Rs.push(ou,null,ou.material,xu,hu.z,null);else if((ou.isMesh||ou.isLine||ou.isPoints)&&(ou.isSkinnedMesh&&ou.skeleton.frame!==Au.render.frame&&(ou.skeleton.update(),ou.skeleton.frame=Au.render.frame),!ou.frustumCulled||uu.intersectsObject(ou))){wu&&hu.setFromMatrixPosition(ou.matrixWorld).applyMatrix4(Eu);var Ju=$u.update(ou),Yu=ou.material;if(Array.isArray(Yu))for(var Hu=Ju.groups,Xu=0,tl=Hu.length;Xu<tl;Xu++){var ll=Hu[Xu],Ks=Yu[ll.materialIndex];Ks&&Ks.visible&&Rs.push(ou,Ju,Ks,xu,hu.z,ll)}else Yu.visible&&Rs.push(ou,Ju,Yu,xu,hu.z,null)}}for(var au=ou.children,Xu=0,tl=au.length;Xu<tl;Xu++)al(au[Xu],_u,xu,wu)}}function dl(ou,_u,xu,wu){for(var Lu=0,Ju=ou.length;Lu<Ju;Lu++){var Yu=ou[Lu],Hu=Yu.object,Xu=Yu.geometry,tl=wu===void 0?Yu.material:wu,ll=Yu.group;if(xu.isArrayCamera){js=xu;for(var Ks=xu.cameras,au=0,lu=Ks.length;au<lu;au++){var gu=Ks[au];Hu.layers.test(gu.layers)&&(bu.viewport(Ws.copy(gu.viewport)),Os.setupLights(gu),vl(Hu,_u,gu,Xu,tl,ll))}}else js=null,vl(Hu,_u,xu,Xu,tl,ll)}}function vl(ou,_u,xu,wu,Lu,Ju){if(ou.onBeforeRender(Fs,_u,xu,wu,Lu,Ju),Os=Iu.get(_u,js||xu),ou.modelViewMatrix.multiplyMatrices(xu.matrixWorldInverse,ou.matrixWorld),ou.normalMatrix.getNormalMatrix(ou.modelViewMatrix),ou.isImmediateRenderObject){var Yu=gl(xu,_u,Lu,ou);bu.setMaterial(Lu),Hs.geometry=null,Hs.program=null,Hs.wireframe=!1,rl(ou,Yu)}else Fs.renderBufferDirect(xu,_u,wu,Lu,ou,Ju);ou.onAfterRender(Fs,_u,xu,wu,Lu,Ju),Os=Iu.get(_u,js||xu)}function pl(ou,_u,xu){var wu=Tu.get(ou),Lu=Os.state.lights,Ju=Os.state.shadowsArray,Yu=Lu.state.version,Hu=iu.getParameters(ou,Lu.state,Ju,_u,fu.numPlanes,fu.numIntersection,xu),Xu=iu.getProgramCacheKey(Hu),tl=wu.program,ll=!0;if(tl===void 0)ou.addEventListener("dispose",cu);else if(tl.cacheKey!==Xu)ku(ou);else if(wu.lightsStateVersion!==Yu)wu.lightsStateVersion=Yu,ll=!1;else{if(Hu.shaderID!==void 0)return;ll=!1}ll&&(tl=iu.acquireProgram(Hu,Xu),wu.program=tl,wu.uniforms=Hu.uniforms,wu.outputEncoding=Hu.outputEncoding,ou.program=tl);var Ks=tl.getAttributes();if(ou.morphTargets){ou.numSupportedMorphTargets=0;for(var au=0;au<Fs.maxMorphTargets;au++)Ks["morphTarget"+au]>=0&&ou.numSupportedMorphTargets++}if(ou.morphNormals){ou.numSupportedMorphNormals=0;for(var au=0;au<Fs.maxMorphNormals;au++)Ks["morphNormal"+au]>=0&&ou.numSupportedMorphNormals++}var lu=wu.uniforms;(!ou.isShaderMaterial&&!ou.isRawShaderMaterial||ou.clipping===!0)&&(wu.numClippingPlanes=fu.numPlanes,wu.numIntersection=fu.numIntersection,lu.clippingPlanes=fu.uniform),wu.environment=ou.isMeshStandardMaterial?_u.environment:null,wu.fog=_u.fog,wu.needsLights=wl(ou),wu.lightsStateVersion=Yu,wu.needsLights&&(lu.ambientLightColor.value=Lu.state.ambient,lu.lightProbe.value=Lu.state.probe,lu.directionalLights.value=Lu.state.directional,lu.directionalLightShadows.value=Lu.state.directionalShadow,lu.spotLights.value=Lu.state.spot,lu.spotLightShadows.value=Lu.state.spotShadow,lu.rectAreaLights.value=Lu.state.rectArea,lu.pointLights.value=Lu.state.point,lu.pointLightShadows.value=Lu.state.pointShadow,lu.hemisphereLights.value=Lu.state.hemi,lu.directionalShadowMap.value=Lu.state.directionalShadowMap,lu.directionalShadowMatrix.value=Lu.state.directionalShadowMatrix,lu.spotShadowMap.value=Lu.state.spotShadowMap,lu.spotShadowMatrix.value=Lu.state.spotShadowMatrix,lu.pointShadowMap.value=Lu.state.pointShadowMap,lu.pointShadowMatrix.value=Lu.state.pointShadowMatrix);var gu=wu.program.getUniforms(),Mu=WebGLUniforms.seqWithValue(gu.seq,lu);wu.uniformsList=Mu}function gl(ou,_u,xu,wu){Pu.resetTextureUnits();var Lu=_u.fog,Ju=xu.isMeshStandardMaterial?_u.environment:null,Yu=$s===null?Fs.outputEncoding:$s.texture.encoding,Hu=Tu.get(xu),Xu=Os.state.lights;if(mu&&(vu||ou!==zs)){var tl=ou===zs&&xu.id===Us;fu.setState(xu.clippingPlanes,xu.clipIntersection,xu.clipShadows,ou,Hu,tl)}xu.version===Hu.__version?(Hu.program===void 0||xu.fog&&Hu.fog!==Lu||Hu.environment!==Ju||Hu.needsLights&&Hu.lightsStateVersion!==Xu.state.version||Hu.numClippingPlanes!==void 0&&(Hu.numClippingPlanes!==fu.numPlanes||Hu.numIntersection!==fu.numIntersection)||Hu.outputEncoding!==Yu)&&pl(xu,_u,wu):(pl(xu,_u,wu),Hu.__version=xu.version);var ll=!1,Ks=!1,au=!1,lu=Hu.program,gu=lu.getUniforms(),Mu=Hu.uniforms;if(bu.useProgram(lu.program)&&(ll=!0,Ks=!0,au=!0),xu.id!==Us&&(Us=xu.id,Ks=!0),ll||zs!==ou){if(gu.setValue(du,"projectionMatrix",ou.projectionMatrix),Cu.logarithmicDepthBuffer&&gu.setValue(du,"logDepthBufFC",2/(Math.log(ou.far+1)/Math.LN2)),zs!==ou&&(zs=ou,Ks=!0,au=!0),xu.isShaderMaterial||xu.isMeshPhongMaterial||xu.isMeshToonMaterial||xu.isMeshStandardMaterial||xu.envMap){var Wu=gu.map.cameraPosition;Wu!==void 0&&Wu.setValue(du,hu.setFromMatrixPosition(ou.matrixWorld))}(xu.isMeshPhongMaterial||xu.isMeshToonMaterial||xu.isMeshLambertMaterial||xu.isMeshBasicMaterial||xu.isMeshStandardMaterial||xu.isShaderMaterial)&&gu.setValue(du,"isOrthographic",ou.isOrthographicCamera===!0),(xu.isMeshPhongMaterial||xu.isMeshToonMaterial||xu.isMeshLambertMaterial||xu.isMeshBasicMaterial||xu.isMeshStandardMaterial||xu.isShaderMaterial||xu.skinning)&&gu.setValue(du,"viewMatrix",ou.matrixWorldInverse)}if(xu.skinning){gu.setOptional(du,wu,"bindMatrix"),gu.setOptional(du,wu,"bindMatrixInverse");var el=wu.skeleton;if(el){var cl=el.bones;if(Cu.floatVertexTextures){if(el.boneTexture===void 0){var ju=Math.sqrt(cl.length*4);ju=MathUtils.ceilPowerOfTwo(ju),ju=Math.max(ju,4);var hl=new Float32Array(ju*ju*4);hl.set(el.boneMatrices);var Al=new DataTexture(hl,ju,ju,RGBAFormat,FloatType);el.boneMatrices=hl,el.boneTexture=Al,el.boneTextureSize=ju}gu.setValue(du,"boneTexture",el.boneTexture,Pu),gu.setValue(du,"boneTextureSize",el.boneTextureSize)}else gu.setOptional(du,el,"boneMatrices")}}return(Ks||Hu.receiveShadow!==wu.receiveShadow)&&(Hu.receiveShadow=wu.receiveShadow,gu.setValue(du,"receiveShadow",wu.receiveShadow)),Ks&&(gu.setValue(du,"toneMappingExposure",Fs.toneMappingExposure),gu.setValue(du,"toneMappingWhitePoint",Fs.toneMappingWhitePoint),Hu.needsLights&&_l(Mu,au),Lu&&xu.fog&&su.refreshFogUniforms(Mu,Lu),su.refreshMaterialUniforms(Mu,xu,Ju,Ys,eu),Mu.ltc_1!==void 0&&(Mu.ltc_1.value=UniformsLib.LTC_1),Mu.ltc_2!==void 0&&(Mu.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(du,Hu.uniformsList,Mu,Pu)),xu.isShaderMaterial&&xu.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(du,Hu.uniformsList,Mu,Pu),xu.uniformsNeedUpdate=!1),xu.isSpriteMaterial&&gu.setValue(du,"center",wu.center),gu.setValue(du,"modelViewMatrix",wu.modelViewMatrix),gu.setValue(du,"normalMatrix",wu.normalMatrix),gu.setValue(du,"modelMatrix",wu.matrixWorld),lu}function _l(ou,_u){ou.ambientLightColor.needsUpdate=_u,ou.lightProbe.needsUpdate=_u,ou.directionalLights.needsUpdate=_u,ou.directionalLightShadows.needsUpdate=_u,ou.pointLights.needsUpdate=_u,ou.pointLightShadows.needsUpdate=_u,ou.spotLights.needsUpdate=_u,ou.spotLightShadows.needsUpdate=_u,ou.rectAreaLights.needsUpdate=_u,ou.hemisphereLights.needsUpdate=_u}function wl(ou){return ou.isMeshLambertMaterial||ou.isMeshToonMaterial||ou.isMeshPhongMaterial||ou.isMeshStandardMaterial||ou.isShadowMaterial||ou.isShaderMaterial&&ou.lights===!0}this.setFramebuffer=function(ou){ks!==ou&&$s===null&&du.bindFramebuffer(36160,ou),ks=ou},this.getActiveCubeFace=function(){return Ns},this.getActiveMipmapLevel=function(){return Ds},this.getRenderTarget=function(){return $s},this.setRenderTarget=function(ou,_u,xu){$s=ou,Ns=_u,Ds=xu,ou&&Tu.get(ou).__webglFramebuffer===void 0&&Pu.setupRenderTarget(ou);var wu=ks,Lu=!1;if(ou){var Ju=Tu.get(ou).__webglFramebuffer;ou.isWebGLCubeRenderTarget?(wu=Ju[_u||0],Lu=!0):ou.isWebGLMultisampleRenderTarget?wu=Tu.get(ou).__webglMultisampledFramebuffer:wu=Ju,Ws.copy(ou.viewport),Qs.copy(ou.scissor),Zs=ou.scissorTest}else Ws.copy(ru).multiplyScalar(Ys).floor(),Qs.copy(tu).multiplyScalar(Ys).floor(),Zs=nu;if(Gs!==wu&&(du.bindFramebuffer(36160,wu),Gs=wu),bu.viewport(Ws),bu.scissor(Qs),bu.setScissorTest(Zs),Lu){var Yu=Tu.get(ou.texture);du.framebufferTexture2D(36160,36064,34069+(_u||0),Yu.__webglTexture,xu||0)}},this.readRenderTargetPixels=function(ou,_u,xu,wu,Lu,Ju,Yu){if(!(ou&&ou.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var Hu=Tu.get(ou).__webglFramebuffer;if(ou.isWebGLCubeRenderTarget&&Yu!==void 0&&(Hu=Hu[Yu]),Hu){var Xu=!1;Hu!==Gs&&(du.bindFramebuffer(36160,Hu),Xu=!0);try{var tl=ou.texture,ll=tl.format,Ks=tl.type;if(ll!==RGBAFormat&&qu.convert(ll)!==du.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Ks!==UnsignedByteType&&qu.convert(Ks)!==du.getParameter(35738)&&!(Ks===FloatType&&(Cu.isWebGL2||Su.get("OES_texture_float")||Su.get("WEBGL_color_buffer_float")))&&!(Ks===HalfFloatType&&(Cu.isWebGL2?Su.get("EXT_color_buffer_float"):Su.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}du.checkFramebufferStatus(36160)===36053?_u>=0&&_u<=ou.width-wu&&xu>=0&&xu<=ou.height-Lu&&du.readPixels(_u,xu,wu,Lu,qu.convert(ll),qu.convert(Ks),Ju):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Xu&&du.bindFramebuffer(36160,Gs)}}},this.copyFramebufferToTexture=function(ou,_u,xu){xu===void 0&&(xu=0);var wu=Math.pow(2,-xu),Lu=Math.floor(_u.image.width*wu),Ju=Math.floor(_u.image.height*wu),Yu=qu.convert(_u.format);Pu.setTexture2D(_u,0),du.copyTexImage2D(3553,xu,Yu,ou.x,ou.y,Lu,Ju,0),bu.unbindTexture()},this.copyTextureToTexture=function(ou,_u,xu,wu){wu===void 0&&(wu=0);var Lu=_u.image.width,Ju=_u.image.height,Yu=qu.convert(xu.format),Hu=qu.convert(xu.type);Pu.setTexture2D(xu,0),_u.isDataTexture?du.texSubImage2D(3553,wu,ou.x,ou.y,Lu,Ju,Yu,Hu,_u.image.data):_u.isCompressedTexture?du.compressedTexSubImage2D(3553,wu,ou.x,ou.y,_u.mipmaps[0].width,_u.mipmaps[0].height,Yu,_u.mipmaps[0].data):du.texSubImage2D(3553,wu,ou.x,ou.y,Yu,Hu,_u.image),wu===0&&xu.generateMipmaps&&du.generateMipmap(3553),bu.unbindTexture()},this.initTexture=function(ou){Pu.setTexture2D(ou,0),bu.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(ca,ga){this.name="",this.color=new Color(ca),this.density=ga!==void 0?ga:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(ca,ga,_s){this.name="",this.color=new Color(ca),this.near=ga!==void 0?ga:1,this.far=_s!==void 0?_s:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(ca,ga){this.array=ca,this.stride=ga,this.count=ca!==void 0?ca.length/ga:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(ca){return this.usage=ca,this},copy:function(ca){return this.array=new ca.array.constructor(ca.array),this.count=ca.count,this.stride=ca.stride,this.usage=ca.usage,this},copyAt:function(ca,ga,_s){ca*=this.stride,_s*=ga.stride;for(var Ss=0,Ms=this.stride;Ss<Ms;Ss++)this.array[ca+Ss]=ga.array[_s+Ss];return this},set:function(ca,ga){return ga===void 0&&(ga=0),this.array.set(ca,ga),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(ca){return this.onUploadCallback=ca,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(ca,ga,_s,Ss){this.name="",this.data=ca,this.itemSize=ga,this.offset=_s,this.normalized=Ss===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(ca){for(var ga=0,_s=this.data.count;ga<_s;ga++)_vector$6.x=this.getX(ga),_vector$6.y=this.getY(ga),_vector$6.z=this.getZ(ga),_vector$6.applyMatrix4(ca),this.setXYZ(ga,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset]=ga,this},setY:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+1]=ga,this},setZ:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+2]=ga,this},setW:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+3]=ga,this},getX:function(ca){return this.data.array[ca*this.data.stride+this.offset]},getY:function(ca){return this.data.array[ca*this.data.stride+this.offset+1]},getZ:function(ca){return this.data.array[ca*this.data.stride+this.offset+2]},getW:function(ca){return this.data.array[ca*this.data.stride+this.offset+3]},setXY:function(ca,ga,_s){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=_s,this},setXYZ:function(ca,ga,_s,Ss){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=_s,this.data.array[ca+2]=Ss,this},setXYZW:function(ca,ga,_s,Ss,Ms){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=_s,this.data.array[ca+2]=Ss,this.data.array[ca+3]=Ms,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var ca=[],ga=0;ga<this.count;ga++)for(var _s=ga*this.data.stride+this.offset,Ss=0;Ss<this.itemSize;Ss++)ca.push(this.data.array[_s+Ss]);return new BufferAttribute(new this.array.constructor(ca),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var ca=[],ga=0;ga<this.count;ga++)for(var _s=ga*this.data.stride+this.offset,Ss=0;Ss<this.itemSize;Ss++)ca.push(this.data.array[_s+Ss]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:ca,normalized:this.normalized}}});function SpriteMaterial(ca){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(ca)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.alphaMap=ca.alphaMap,this.rotation=ca.rotation,this.sizeAttenuation=ca.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(ca){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var ga=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),_s=new InterleavedBuffer(ga,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(_s,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(_s,2,3,!1))}this.geometry=_geometry,this.material=ca!==void 0?ca:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(ca,ga){ca.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(ca.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(ca.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),ca.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var _s=this.material.rotation,Ss,Ms;_s!==0&&(Ms=Math.cos(_s),Ss=Math.sin(_s));var Cs=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Ts=ca.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Ts===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),_uvB$1.set(0,1),Ts=ca.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Ts===null))){var Is=ca.ray.origin.distanceTo(_intersectPoint);Is<ca.near||Is>ca.far||ga.push({distance:Is,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(ca){return Object3D.prototype.copy.call(this,ca),ca.center!==void 0&&this.center.copy(ca.center),this}});function transformVertex(ca,ga,_s,Ss,Ms,Cs){_alignedPosition.subVectors(ca,_s).addScalar(.5).multiply(Ss),Ms!==void 0?(_rotatedPosition.x=Cs*_alignedPosition.x-Ms*_alignedPosition.y,_rotatedPosition.y=Ms*_alignedPosition.x+Cs*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),ca.copy(ga),ca.x+=_rotatedPosition.x,ca.y+=_rotatedPosition.y,ca.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(ca){Object3D.prototype.copy.call(this,ca,!1);for(var ga=ca.levels,_s=0,Ss=ga.length;_s<Ss;_s++){var Ms=ga[_s];this.addLevel(Ms.object.clone(),Ms.distance)}return this.autoUpdate=ca.autoUpdate,this},addLevel:function(ca,ga){ga===void 0&&(ga=0),ga=Math.abs(ga);for(var _s=this.levels,Ss=0;Ss<_s.length&&!(ga<_s[Ss].distance);Ss++);return _s.splice(Ss,0,{distance:ga,object:ca}),this.add(ca),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(ca){var ga=this.levels;if(ga.length>0){for(var _s=1,Ss=ga.length;_s<Ss&&!(ca<ga[_s].distance);_s++);return ga[_s-1].object}return null},raycast:function(ca,ga){var _s=this.levels;if(_s.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Ss=ca.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Ss).raycast(ca,ga)}},update:function(ca){var ga=this.levels;if(ga.length>1){_v1$4.setFromMatrixPosition(ca.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var _s=_v1$4.distanceTo(_v2$2)/ca.zoom;ga[0].object.visible=!0;for(var Ss=1,Ms=ga.length;Ss<Ms&&_s>=ga[Ss].distance;Ss++)ga[Ss-1].object.visible=!1,ga[Ss].object.visible=!0;for(this._currentLevel=Ss-1;Ss<Ms;Ss++)ga[Ss].object.visible=!1}},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);this.autoUpdate===!1&&(ga.object.autoUpdate=!1),ga.object.levels=[];for(var _s=this.levels,Ss=0,Ms=_s.length;Ss<Ms;Ss++){var Cs=_s[Ss];ga.object.levels.push({object:Cs.object.uuid,distance:Cs.distance})}return ga}});function SkinnedMesh(ca,ga){ca&&ca.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,ca,ga),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(ca,ga){this.skeleton=ca,ga===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),ga=this.matrixWorld),this.bindMatrix.copy(ga),this.bindMatrixInverse.getInverse(ga)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var ca=new Vector4,ga=this.geometry.attributes.skinWeight,_s=0,Ss=ga.count;_s<Ss;_s++){ca.x=ga.getX(_s),ca.y=ga.getY(_s),ca.z=ga.getZ(_s),ca.w=ga.getW(_s);var Ms=1/ca.manhattanLength();Ms!==1/0?ca.multiplyScalar(Ms):ca.set(1,0,0,0),ga.setXYZW(_s,ca.x,ca.y,ca.z,ca.w)}},updateMatrixWorld:function(ca){Mesh.prototype.updateMatrixWorld.call(this,ca),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var ca=new Vector3,ga=new Vector4,_s=new Vector4,Ss=new Vector3,Ms=new Matrix4;return function(Cs,Ts){var Is=this.skeleton,Bs=this.geometry;ga.fromBufferAttribute(Bs.attributes.skinIndex,Cs),_s.fromBufferAttribute(Bs.attributes.skinWeight,Cs),ca.fromBufferAttribute(Bs.attributes.position,Cs).applyMatrix4(this.bindMatrix),Ts.set(0,0,0);for(var Ps=0;Ps<4;Ps++){var Ls=_s.getComponent(Ps);if(Ls!==0){var Rs=ga.getComponent(Ps);Ms.multiplyMatrices(Is.bones[Rs].matrixWorld,Is.boneInverses[Rs]),Ts.addScaledVector(Ss.copy(ca).applyMatrix4(Ms),Ls)}}return Ts.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(ca,ga){if(ca=ca||[],this.bones=ca.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,ga===void 0)this.calculateInverses();else if(this.bones.length===ga.length)this.boneInverses=ga.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var _s=0,Ss=this.bones.length;_s<Ss;_s++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var ca=0,ga=this.bones.length;ca<ga;ca++){var _s=new Matrix4;this.bones[ca]&&_s.getInverse(this.bones[ca].matrixWorld),this.boneInverses.push(_s)}},pose:function(){var ca,ga,_s;for(ga=0,_s=this.bones.length;ga<_s;ga++)ca=this.bones[ga],ca&&ca.matrixWorld.getInverse(this.boneInverses[ga]);for(ga=0,_s=this.bones.length;ga<_s;ga++)ca=this.bones[ga],ca&&(ca.parent&&ca.parent.isBone?(ca.matrix.getInverse(ca.parent.matrixWorld),ca.matrix.multiply(ca.matrixWorld)):ca.matrix.copy(ca.matrixWorld),ca.matrix.decompose(ca.position,ca.quaternion,ca.scale))},update:function(){for(var ca=this.bones,ga=this.boneInverses,_s=this.boneMatrices,Ss=this.boneTexture,Ms=0,Cs=ca.length;Ms<Cs;Ms++){var Ts=ca[Ms]?ca[Ms].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Ts,ga[Ms]),_offsetMatrix.toArray(_s,Ms*16)}Ss!==void 0&&(Ss.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(ca){for(var ga=0,_s=this.bones.length;ga<_s;ga++){var Ss=this.bones[ga];if(Ss.name===ca)return Ss}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(ca,ga,_s){Mesh.call(this,ca,ga),this.instanceMatrix=new BufferAttribute(new Float32Array(_s*16),16),this.count=_s,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(ca,ga){ga.fromArray(this.instanceMatrix.array,ca*16)},raycast:function(ca,ga){var _s=this.matrixWorld,Ss=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Ms=0;Ms<Ss;Ms++){this.getMatrixAt(Ms,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(_s,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(ca,_instanceIntersects);for(var Cs=0,Ts=_instanceIntersects.length;Cs<Ts;Cs++){var Is=_instanceIntersects[Cs];Is.instanceId=Ms,Is.object=this,ga.push(Is)}_instanceIntersects.length=0}},setMatrixAt:function(ca,ga){ga.toArray(this.instanceMatrix.array,ca*16)},updateMorphTargets:function(){}});function LineBasicMaterial(ca){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(ca)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.linewidth=ca.linewidth,this.linecap=ca.linecap,this.linejoin=ca.linejoin,this.morphTargets=ca.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(ca,ga,_s){_s===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var ca=this.geometry;if(ca.isBufferGeometry)if(ca.index===null){for(var ga=ca.attributes.position,_s=[0],Ss=1,Ms=ga.count;Ss<Ms;Ss++)_start.fromBufferAttribute(ga,Ss-1),_end.fromBufferAttribute(ga,Ss),_s[Ss]=_s[Ss-1],_s[Ss]+=_start.distanceTo(_end);ca.setAttribute("lineDistance",new Float32BufferAttribute(_s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(ca.isGeometry){var Cs=ca.vertices,_s=ca.lineDistances;_s[0]=0;for(var Ss=1,Ms=Cs.length;Ss<Ms;Ss++)_s[Ss]=_s[Ss-1],_s[Ss]+=Cs[Ss-1].distanceTo(Cs[Ss])}return this},raycast:function(ca,ga){var _s=this.geometry,Ss=this.matrixWorld,Ms=ca.params.Line.threshold;if(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere$2.copy(_s.boundingSphere),_sphere$2.applyMatrix4(Ss),_sphere$2.radius+=Ms,ca.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Ss),_ray$1.copy(ca.ray).applyMatrix4(_inverseMatrix$1);var Cs=Ms/((this.scale.x+this.scale.y+this.scale.z)/3),Ts=Cs*Cs,Is=new Vector3,Bs=new Vector3,Ps=new Vector3,Ls=new Vector3,Rs=this&&this.isLineSegments?2:1;if(_s.isBufferGeometry){var Os=_s.index,Fs=_s.attributes,Vs=Fs.position.array;if(Os!==null)for(var ks=Os.array,Ns=0,Ds=ks.length-1;Ns<Ds;Ns+=Rs){var $s=ks[Ns],Gs=ks[Ns+1];Is.fromArray(Vs,$s*3),Bs.fromArray(Vs,Gs*3);var Us=_ray$1.distanceSqToSegment(Is,Bs,Ls,Ps);if(!(Us>Ts)){Ls.applyMatrix4(this.matrixWorld);var Hs=ca.ray.origin.distanceTo(Ls);Hs<ca.near||Hs>ca.far||ga.push({distance:Hs,point:Ps.clone().applyMatrix4(this.matrixWorld),index:Ns,face:null,faceIndex:null,object:this})}}else for(var Ns=0,Ds=Vs.length/3-1;Ns<Ds;Ns+=Rs){Is.fromArray(Vs,3*Ns),Bs.fromArray(Vs,3*Ns+3);var Us=_ray$1.distanceSqToSegment(Is,Bs,Ls,Ps);if(!(Us>Ts)){Ls.applyMatrix4(this.matrixWorld);var Hs=ca.ray.origin.distanceTo(Ls);Hs<ca.near||Hs>ca.far||ga.push({distance:Hs,point:Ps.clone().applyMatrix4(this.matrixWorld),index:Ns,face:null,faceIndex:null,object:this})}}}else if(_s.isGeometry)for(var zs=_s.vertices,js=zs.length,Ns=0;Ns<js-1;Ns+=Rs){var Us=_ray$1.distanceSqToSegment(zs[Ns],zs[Ns+1],Ls,Ps);if(!(Us>Ts)){Ls.applyMatrix4(this.matrixWorld);var Hs=ca.ray.origin.distanceTo(Ls);Hs<ca.near||Hs>ca.far||ga.push({distance:Hs,point:Ps.clone().applyMatrix4(this.matrixWorld),index:Ns,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var ca=this.geometry,ga,_s,Ss;if(ca.isBufferGeometry){var Ms=ca.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,_s=Ts.length;ga<_s;ga++)Ss=Ts[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=ga}}else{var Is=ca.morphTargets;Is!==void 0&&Is.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(ca,ga){Line$1.call(this,ca,ga),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var ca=this.geometry;if(ca.isBufferGeometry)if(ca.index===null){for(var ga=ca.attributes.position,_s=[],Ss=0,Ms=ga.count;Ss<Ms;Ss+=2)_start$1.fromBufferAttribute(ga,Ss),_end$1.fromBufferAttribute(ga,Ss+1),_s[Ss]=Ss===0?0:_s[Ss-1],_s[Ss+1]=_s[Ss]+_start$1.distanceTo(_end$1);ca.setAttribute("lineDistance",new Float32BufferAttribute(_s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(ca.isGeometry)for(var Cs=ca.vertices,_s=ca.lineDistances,Ss=0,Ms=Cs.length;Ss<Ms;Ss+=2)_start$1.copy(Cs[Ss]),_end$1.copy(Cs[Ss+1]),_s[Ss]=Ss===0?0:_s[Ss-1],_s[Ss+1]=_s[Ss]+_start$1.distanceTo(_end$1);return this}});function LineLoop(ca,ga){Line$1.call(this,ca,ga),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(ca){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(ca)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.alphaMap=ca.alphaMap,this.size=ca.size,this.sizeAttenuation=ca.sizeAttenuation,this.morphTargets=ca.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(ca,ga){Object3D.call(this),this.type="Points",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(ca,ga){var _s=this.geometry,Ss=this.matrixWorld,Ms=ca.params.Points.threshold;if(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere$3.copy(_s.boundingSphere),_sphere$3.applyMatrix4(Ss),_sphere$3.radius+=Ms,ca.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Ss),_ray$2.copy(ca.ray).applyMatrix4(_inverseMatrix$2);var Cs=Ms/((this.scale.x+this.scale.y+this.scale.z)/3),Ts=Cs*Cs;if(_s.isBufferGeometry){var Is=_s.index,Bs=_s.attributes,Ps=Bs.position.array;if(Is!==null)for(var Ls=Is.array,Rs=0,Os=Ls.length;Rs<Os;Rs++){var Fs=Ls[Rs];_position$1.fromArray(Ps,Fs*3),testPoint(_position$1,Fs,Ts,Ss,ca,ga,this)}else for(var Rs=0,Vs=Ps.length/3;Rs<Vs;Rs++)_position$1.fromArray(Ps,Rs*3),testPoint(_position$1,Rs,Ts,Ss,ca,ga,this)}else for(var ks=_s.vertices,Rs=0,Vs=ks.length;Rs<Vs;Rs++)testPoint(ks[Rs],Rs,Ts,Ss,ca,ga,this)}},updateMorphTargets:function(){var ca=this.geometry,ga,_s,Ss;if(ca.isBufferGeometry){var Ms=ca.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,_s=Ts.length;ga<_s;ga++)Ss=Ts[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=ga}}else{var Is=ca.morphTargets;Is!==void 0&&Is.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(ca,ga,_s,Ss,Ms,Cs,Ts){var Is=_ray$2.distanceSqToPoint(ca);if(Is<_s){var Bs=new Vector3;_ray$2.closestPointToPoint(ca,Bs),Bs.applyMatrix4(Ss);var Ps=Ms.ray.origin.distanceTo(Bs);if(Ps<Ms.near||Ps>Ms.far)return;Cs.push({distance:Ps,distanceToRay:Math.sqrt(Is),point:Bs,index:ga,face:null,object:Ts})}}function VideoTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs){Texture.call(this,ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs),this.format=Ts!==void 0?Ts:RGBFormat,this.minFilter=Cs!==void 0?Cs:LinearFilter,this.magFilter=Ms!==void 0?Ms:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var ca=this.image;ca.readyState>=ca.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs){Texture.call(this,null,Cs,Ts,Is,Bs,Ps,Ss,Ms,Ls,Rs),this.image={width:ga,height:_s},this.mipmaps=ca,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs){Texture.call(this,ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps){if(Ps=Ps!==void 0?Ps:DepthFormat,Ps!==DepthFormat&&Ps!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");_s===void 0&&Ps===DepthFormat&&(_s=UnsignedShortType),_s===void 0&&Ps===DepthStencilFormat&&(_s=UnsignedInt248Type),Texture.call(this,null,Ss,Ms,Cs,Ts,Is,Ps,_s,Bs),this.image={width:ca,height:ga},this.magFilter=Ts!==void 0?Ts:NearestFilter,this.minFilter=Is!==void 0?Is:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(ca){BufferGeometry.call(this),this.type="WireframeGeometry";var ga=[],_s,Ss,Ms,Cs,Ts,Is=[0,0],Bs={},Ps,Ls,Rs,Os,Fs=["a","b","c"],Vs;if(ca&&ca.isGeometry){var ks=ca.faces;for(_s=0,Ms=ks.length;_s<Ms;_s++){var Ns=ks[_s];for(Ss=0;Ss<3;Ss++)Ls=Ns[Fs[Ss]],Rs=Ns[Fs[(Ss+1)%3]],Is[0]=Math.min(Ls,Rs),Is[1]=Math.max(Ls,Rs),Os=Is[0]+","+Is[1],Bs[Os]===void 0&&(Bs[Os]={index1:Is[0],index2:Is[1]})}for(Os in Bs)Ps=Bs[Os],Vs=ca.vertices[Ps.index1],ga.push(Vs.x,Vs.y,Vs.z),Vs=ca.vertices[Ps.index2],ga.push(Vs.x,Vs.y,Vs.z)}else if(ca&&ca.isBufferGeometry){var Ds,$s,Gs,Us,Hs,zs,js,Ws;if(Vs=new Vector3,ca.index!==null){for(Ds=ca.attributes.position,$s=ca.index,Gs=ca.groups,Gs.length===0&&(Gs=[{start:0,count:$s.count,materialIndex:0}]),Cs=0,Ts=Gs.length;Cs<Ts;++Cs)for(Us=Gs[Cs],Hs=Us.start,zs=Us.count,_s=Hs,Ms=Hs+zs;_s<Ms;_s+=3)for(Ss=0;Ss<3;Ss++)Ls=$s.getX(_s+Ss),Rs=$s.getX(_s+(Ss+1)%3),Is[0]=Math.min(Ls,Rs),Is[1]=Math.max(Ls,Rs),Os=Is[0]+","+Is[1],Bs[Os]===void 0&&(Bs[Os]={index1:Is[0],index2:Is[1]});for(Os in Bs)Ps=Bs[Os],Vs.fromBufferAttribute(Ds,Ps.index1),ga.push(Vs.x,Vs.y,Vs.z),Vs.fromBufferAttribute(Ds,Ps.index2),ga.push(Vs.x,Vs.y,Vs.z)}else for(Ds=ca.attributes.position,_s=0,Ms=Ds.count/3;_s<Ms;_s++)for(Ss=0;Ss<3;Ss++)js=3*_s+Ss,Vs.fromBufferAttribute(Ds,js),ga.push(Vs.x,Vs.y,Vs.z),Ws=3*_s+(Ss+1)%3,Vs.fromBufferAttribute(Ds,Ws),ga.push(Vs.x,Vs.y,Vs.z)}this.setAttribute("position",new Float32BufferAttribute(ga,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(ca,ga,_s){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:ca,slices:ga,stacks:_s},this.fromBufferGeometry(new ParametricBufferGeometry(ca,ga,_s)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(ca,ga,_s){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:ca,slices:ga,stacks:_s};var Ss=[],Ms=[],Cs=[],Ts=[],Is=1e-5,Bs=new Vector3,Ps=new Vector3,Ls=new Vector3,Rs=new Vector3,Os=new Vector3,Fs,Vs;ca.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var ks=ga+1;for(Fs=0;Fs<=_s;Fs++){var Ns=Fs/_s;for(Vs=0;Vs<=ga;Vs++){var Ds=Vs/ga;ca(Ds,Ns,Ps),Ms.push(Ps.x,Ps.y,Ps.z),Ds-Is>=0?(ca(Ds-Is,Ns,Ls),Rs.subVectors(Ps,Ls)):(ca(Ds+Is,Ns,Ls),Rs.subVectors(Ls,Ps)),Ns-Is>=0?(ca(Ds,Ns-Is,Ls),Os.subVectors(Ps,Ls)):(ca(Ds,Ns+Is,Ls),Os.subVectors(Ls,Ps)),Bs.crossVectors(Rs,Os).normalize(),Cs.push(Bs.x,Bs.y,Bs.z),Ts.push(Ds,Ns)}}for(Fs=0;Fs<_s;Fs++)for(Vs=0;Vs<ga;Vs++){var $s=Fs*ks+Vs,Gs=Fs*ks+Vs+1,Us=(Fs+1)*ks+Vs+1,Hs=(Fs+1)*ks+Vs;Ss.push($s,Gs,Hs),Ss.push(Gs,Us,Hs)}this.setIndex(Ss),this.setAttribute("position",new Float32BufferAttribute(Ms,3)),this.setAttribute("normal",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:ca,indices:ga,radius:_s,detail:Ss},this.fromBufferGeometry(new PolyhedronBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:ca,indices:ga,radius:_s,detail:Ss},_s=_s||1,Ss=Ss||0;var Ms=[],Cs=[];Ts(Ss),Bs(_s),Ps(),this.setAttribute("position",new Float32BufferAttribute(Ms,3)),this.setAttribute("normal",new Float32BufferAttribute(Ms.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Cs,2)),Ss===0?this.computeVertexNormals():this.normalizeNormals();function Ts(Ds){for(var $s=new Vector3,Gs=new Vector3,Us=new Vector3,Hs=0;Hs<ga.length;Hs+=3)Os(ga[Hs+0],$s),Os(ga[Hs+1],Gs),Os(ga[Hs+2],Us),Is($s,Gs,Us,Ds)}function Is(Ds,$s,Gs,Us){var Hs=Math.pow(2,Us),zs=[],js,Ws;for(js=0;js<=Hs;js++){zs[js]=[];var Qs=Ds.clone().lerp(Gs,js/Hs),Zs=$s.clone().lerp(Gs,js/Hs),Xs=Hs-js;for(Ws=0;Ws<=Xs;Ws++)Ws===0&&js===Hs?zs[js][Ws]=Qs:zs[js][Ws]=Qs.clone().lerp(Zs,Ws/Xs)}for(js=0;js<Hs;js++)for(Ws=0;Ws<2*(Hs-js)-1;Ws++){var eu=Math.floor(Ws/2);Ws%2===0?(Rs(zs[js][eu+1]),Rs(zs[js+1][eu]),Rs(zs[js][eu])):(Rs(zs[js][eu+1]),Rs(zs[js+1][eu+1]),Rs(zs[js+1][eu]))}}function Bs(Ds){for(var $s=new Vector3,Gs=0;Gs<Ms.length;Gs+=3)$s.x=Ms[Gs+0],$s.y=Ms[Gs+1],$s.z=Ms[Gs+2],$s.normalize().multiplyScalar(Ds),Ms[Gs+0]=$s.x,Ms[Gs+1]=$s.y,Ms[Gs+2]=$s.z}function Ps(){for(var Ds=new Vector3,$s=0;$s<Ms.length;$s+=3){Ds.x=Ms[$s+0],Ds.y=Ms[$s+1],Ds.z=Ms[$s+2];var Gs=ks(Ds)/2/Math.PI+.5,Us=Ns(Ds)/Math.PI+.5;Cs.push(Gs,1-Us)}Fs(),Ls()}function Ls(){for(var Ds=0;Ds<Cs.length;Ds+=6){var $s=Cs[Ds+0],Gs=Cs[Ds+2],Us=Cs[Ds+4],Hs=Math.max($s,Gs,Us),zs=Math.min($s,Gs,Us);Hs>.9&&zs<.1&&($s<.2&&(Cs[Ds+0]+=1),Gs<.2&&(Cs[Ds+2]+=1),Us<.2&&(Cs[Ds+4]+=1))}}function Rs(Ds){Ms.push(Ds.x,Ds.y,Ds.z)}function Os(Ds,$s){var Gs=Ds*3;$s.x=ca[Gs+0],$s.y=ca[Gs+1],$s.z=ca[Gs+2]}function Fs(){for(var Ds=new Vector3,$s=new Vector3,Gs=new Vector3,Us=new Vector3,Hs=new Vector2,zs=new Vector2,js=new Vector2,Ws=0,Qs=0;Ws<Ms.length;Ws+=9,Qs+=6){Ds.set(Ms[Ws+0],Ms[Ws+1],Ms[Ws+2]),$s.set(Ms[Ws+3],Ms[Ws+4],Ms[Ws+5]),Gs.set(Ms[Ws+6],Ms[Ws+7],Ms[Ws+8]),Hs.set(Cs[Qs+0],Cs[Qs+1]),zs.set(Cs[Qs+2],Cs[Qs+3]),js.set(Cs[Qs+4],Cs[Qs+5]),Us.copy(Ds).add($s).add(Gs).divideScalar(3);var Zs=ks(Us);Vs(Hs,Qs+0,Ds,Zs),Vs(zs,Qs+2,$s,Zs),Vs(js,Qs+4,Gs,Zs)}}function Vs(Ds,$s,Gs,Us){Us<0&&Ds.x===1&&(Cs[$s]=Ds.x-1),Gs.x===0&&Gs.z===0&&(Cs[$s]=Us/2/Math.PI+.5)}function ks(Ds){return Math.atan2(Ds.z,-Ds.x)}function Ns(Ds){return Math.atan2(-Ds.y,Math.sqrt(Ds.x*Ds.x+Ds.z*Ds.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(ca,ga){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new TetrahedronBufferGeometry(ca,ga)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(ca,ga){var _s=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Ss=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,_s,Ss,ca,ga),this.type="TetrahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(ca,ga){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new OctahedronBufferGeometry(ca,ga)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(ca,ga){var _s=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Ss=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,_s,Ss,ca,ga),this.type="OctahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(ca,ga){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new IcosahedronBufferGeometry(ca,ga)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(ca,ga){var _s=(1+Math.sqrt(5))/2,Ss=[-1,_s,0,1,_s,0,-1,-_s,0,1,-_s,0,0,-1,_s,0,1,_s,0,-1,-_s,0,1,-_s,_s,0,-1,_s,0,1,-_s,0,-1,-_s,0,1],Ms=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Ss,Ms,ca,ga),this.type="IcosahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(ca,ga){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new DodecahedronBufferGeometry(ca,ga)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(ca,ga){var _s=(1+Math.sqrt(5))/2,Ss=1/_s,Ms=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Ss,-_s,0,-Ss,_s,0,Ss,-_s,0,Ss,_s,-Ss,-_s,0,-Ss,_s,0,Ss,-_s,0,Ss,_s,0,-_s,0,-Ss,_s,0,-Ss,-_s,0,Ss,_s,0,Ss],Cs=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Ms,Cs,ca,ga),this.type="DodecahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(ca,ga,_s,Ss,Ms,Cs){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:ca,tubularSegments:ga,radius:_s,radialSegments:Ss,closed:Ms},Cs!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Ts=new TubeBufferGeometry(ca,ga,_s,Ss,Ms);this.tangents=Ts.tangents,this.normals=Ts.normals,this.binormals=Ts.binormals,this.fromBufferGeometry(Ts),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(ca,ga,_s,Ss,Ms){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:ca,tubularSegments:ga,radius:_s,radialSegments:Ss,closed:Ms},ga=ga||64,_s=_s||1,Ss=Ss||8,Ms=Ms||!1;var Cs=ca.computeFrenetFrames(ga,Ms);this.tangents=Cs.tangents,this.normals=Cs.normals,this.binormals=Cs.binormals;var Ts=new Vector3,Is=new Vector3,Bs=new Vector2,Ps=new Vector3,Ls,Rs,Os=[],Fs=[],Vs=[],ks=[];Ns(),this.setIndex(ks),this.setAttribute("position",new Float32BufferAttribute(Os,3)),this.setAttribute("normal",new Float32BufferAttribute(Fs,3)),this.setAttribute("uv",new Float32BufferAttribute(Vs,2));function Ns(){for(Ls=0;Ls<ga;Ls++)Ds(Ls);Ds(Ms===!1?ga:0),Gs(),$s()}function Ds(Us){Ps=ca.getPointAt(Us/ga,Ps);var Hs=Cs.normals[Us],zs=Cs.binormals[Us];for(Rs=0;Rs<=Ss;Rs++){var js=Rs/Ss*Math.PI*2,Ws=Math.sin(js),Qs=-Math.cos(js);Is.x=Qs*Hs.x+Ws*zs.x,Is.y=Qs*Hs.y+Ws*zs.y,Is.z=Qs*Hs.z+Ws*zs.z,Is.normalize(),Fs.push(Is.x,Is.y,Is.z),Ts.x=Ps.x+_s*Is.x,Ts.y=Ps.y+_s*Is.y,Ts.z=Ps.z+_s*Is.z,Os.push(Ts.x,Ts.y,Ts.z)}}function $s(){for(Rs=1;Rs<=ga;Rs++)for(Ls=1;Ls<=Ss;Ls++){var Us=(Ss+1)*(Rs-1)+(Ls-1),Hs=(Ss+1)*Rs+(Ls-1),zs=(Ss+1)*Rs+Ls,js=(Ss+1)*(Rs-1)+Ls;ks.push(Us,Hs,js),ks.push(Hs,zs,js)}}function Gs(){for(Ls=0;Ls<=ga;Ls++)for(Rs=0;Rs<=Ss;Rs++)Bs.x=Ls/ga,Bs.y=Rs/Ss,Vs.push(Bs.x,Bs.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this);return ca.path=this.parameters.path.toJSON(),ca};function TorusKnotGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:ca,tube:ga,tubularSegments:_s,radialSegments:Ss,p:Ms,q:Cs},Ts!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(ca,ga,_s,Ss,Ms,Cs)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(ca,ga,_s,Ss,Ms,Cs){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:ca,tube:ga,tubularSegments:_s,radialSegments:Ss,p:Ms,q:Cs},ca=ca||1,ga=ga||.4,_s=Math.floor(_s)||64,Ss=Math.floor(Ss)||8,Ms=Ms||2,Cs=Cs||3;var Ts=[],Is=[],Bs=[],Ps=[],Ls,Rs,Os=new Vector3,Fs=new Vector3,Vs=new Vector3,ks=new Vector3,Ns=new Vector3,Ds=new Vector3,$s=new Vector3;for(Ls=0;Ls<=_s;++Ls){var Gs=Ls/_s*Ms*Math.PI*2;for(Xs(Gs,Ms,Cs,ca,Vs),Xs(Gs+.01,Ms,Cs,ca,ks),Ds.subVectors(ks,Vs),$s.addVectors(ks,Vs),Ns.crossVectors(Ds,$s),$s.crossVectors(Ns,Ds),Ns.normalize(),$s.normalize(),Rs=0;Rs<=Ss;++Rs){var Us=Rs/Ss*Math.PI*2,Hs=-ga*Math.cos(Us),zs=ga*Math.sin(Us);Os.x=Vs.x+(Hs*$s.x+zs*Ns.x),Os.y=Vs.y+(Hs*$s.y+zs*Ns.y),Os.z=Vs.z+(Hs*$s.z+zs*Ns.z),Is.push(Os.x,Os.y,Os.z),Fs.subVectors(Os,Vs).normalize(),Bs.push(Fs.x,Fs.y,Fs.z),Ps.push(Ls/_s),Ps.push(Rs/Ss)}}for(Rs=1;Rs<=_s;Rs++)for(Ls=1;Ls<=Ss;Ls++){var js=(Ss+1)*(Rs-1)+(Ls-1),Ws=(Ss+1)*Rs+(Ls-1),Qs=(Ss+1)*Rs+Ls,Zs=(Ss+1)*(Rs-1)+Ls;Ts.push(js,Ws,Zs),Ts.push(Ws,Qs,Zs)}this.setIndex(Ts),this.setAttribute("position",new Float32BufferAttribute(Is,3)),this.setAttribute("normal",new Float32BufferAttribute(Bs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ps,2));function Xs(eu,Ys,Js,qs,ru){var tu=Math.cos(eu),nu=Math.sin(eu),uu=Js/Ys*eu,fu=Math.cos(uu);ru.x=qs*(2+fu)*.5*tu,ru.y=qs*(2+fu)*nu*.5,ru.z=qs*Math.sin(uu)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(ca,ga,_s,Ss,Ms){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:ca,tube:ga,radialSegments:_s,tubularSegments:Ss,arc:Ms},this.fromBufferGeometry(new TorusBufferGeometry(ca,ga,_s,Ss,Ms)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(ca,ga,_s,Ss,Ms){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:ca,tube:ga,radialSegments:_s,tubularSegments:Ss,arc:Ms},ca=ca||1,ga=ga||.4,_s=Math.floor(_s)||8,Ss=Math.floor(Ss)||6,Ms=Ms||Math.PI*2;var Cs=[],Ts=[],Is=[],Bs=[],Ps=new Vector3,Ls=new Vector3,Rs=new Vector3,Os,Fs;for(Os=0;Os<=_s;Os++)for(Fs=0;Fs<=Ss;Fs++){var Vs=Fs/Ss*Ms,ks=Os/_s*Math.PI*2;Ls.x=(ca+ga*Math.cos(ks))*Math.cos(Vs),Ls.y=(ca+ga*Math.cos(ks))*Math.sin(Vs),Ls.z=ga*Math.sin(ks),Ts.push(Ls.x,Ls.y,Ls.z),Ps.x=ca*Math.cos(Vs),Ps.y=ca*Math.sin(Vs),Rs.subVectors(Ls,Ps).normalize(),Is.push(Rs.x,Rs.y,Rs.z),Bs.push(Fs/Ss),Bs.push(Os/_s)}for(Os=1;Os<=_s;Os++)for(Fs=1;Fs<=Ss;Fs++){var Ns=(Ss+1)*Os+Fs-1,Ds=(Ss+1)*(Os-1)+Fs-1,$s=(Ss+1)*(Os-1)+Fs,Gs=(Ss+1)*Os+Fs;Cs.push(Ns,Ds,Gs),Cs.push(Ds,$s,Gs)}this.setIndex(Cs),this.setAttribute("position",new Float32BufferAttribute(Ts,3)),this.setAttribute("normal",new Float32BufferAttribute(Is,3)),this.setAttribute("uv",new Float32BufferAttribute(Bs,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(ca,ga,_s){_s=_s||2;var Ss=ga&&ga.length,Ms=Ss?ga[0]*_s:ca.length,Cs=linkedList(ca,0,Ms,_s,!0),Ts=[];if(!Cs||Cs.next===Cs.prev)return Ts;var Is,Bs,Ps,Ls,Rs,Os,Fs;if(Ss&&(Cs=eliminateHoles(ca,ga,Cs,_s)),ca.length>80*_s){Is=Ps=ca[0],Bs=Ls=ca[1];for(var Vs=_s;Vs<Ms;Vs+=_s)Rs=ca[Vs],Os=ca[Vs+1],Rs<Is&&(Is=Rs),Os<Bs&&(Bs=Os),Rs>Ps&&(Ps=Rs),Os>Ls&&(Ls=Os);Fs=Math.max(Ps-Is,Ls-Bs),Fs=Fs!==0?1/Fs:0}return earcutLinked(Cs,Ts,_s,Is,Bs,Fs),Ts}};function linkedList(ca,ga,_s,Ss,Ms){var Cs,Ts;if(Ms===signedArea(ca,ga,_s,Ss)>0)for(Cs=ga;Cs<_s;Cs+=Ss)Ts=insertNode(Cs,ca[Cs],ca[Cs+1],Ts);else for(Cs=_s-Ss;Cs>=ga;Cs-=Ss)Ts=insertNode(Cs,ca[Cs],ca[Cs+1],Ts);return Ts&&equals(Ts,Ts.next)&&(removeNode(Ts),Ts=Ts.next),Ts}function filterPoints(ca,ga){if(!ca)return ca;ga||(ga=ca);var _s=ca,Ss;do if(Ss=!1,!_s.steiner&&(equals(_s,_s.next)||area(_s.prev,_s,_s.next)===0)){if(removeNode(_s),_s=ga=_s.prev,_s===_s.next)break;Ss=!0}else _s=_s.next;while(Ss||_s!==ga);return ga}function earcutLinked(ca,ga,_s,Ss,Ms,Cs,Ts){if(!!ca){!Ts&&Cs&&indexCurve(ca,Ss,Ms,Cs);for(var Is=ca,Bs,Ps;ca.prev!==ca.next;){if(Bs=ca.prev,Ps=ca.next,Cs?isEarHashed(ca,Ss,Ms,Cs):isEar(ca)){ga.push(Bs.i/_s),ga.push(ca.i/_s),ga.push(Ps.i/_s),removeNode(ca),ca=Ps.next,Is=Ps.next;continue}if(ca=Ps,ca===Is){Ts?Ts===1?(ca=cureLocalIntersections(filterPoints(ca),ga,_s),earcutLinked(ca,ga,_s,Ss,Ms,Cs,2)):Ts===2&&splitEarcut(ca,ga,_s,Ss,Ms,Cs):earcutLinked(filterPoints(ca),ga,_s,Ss,Ms,Cs,1);break}}}}function isEar(ca){var ga=ca.prev,_s=ca,Ss=ca.next;if(area(ga,_s,Ss)>=0)return!1;for(var Ms=ca.next.next;Ms!==ca.prev;){if(pointInTriangle(ga.x,ga.y,_s.x,_s.y,Ss.x,Ss.y,Ms.x,Ms.y)&&area(Ms.prev,Ms,Ms.next)>=0)return!1;Ms=Ms.next}return!0}function isEarHashed(ca,ga,_s,Ss){var Ms=ca.prev,Cs=ca,Ts=ca.next;if(area(Ms,Cs,Ts)>=0)return!1;for(var Is=Ms.x<Cs.x?Ms.x<Ts.x?Ms.x:Ts.x:Cs.x<Ts.x?Cs.x:Ts.x,Bs=Ms.y<Cs.y?Ms.y<Ts.y?Ms.y:Ts.y:Cs.y<Ts.y?Cs.y:Ts.y,Ps=Ms.x>Cs.x?Ms.x>Ts.x?Ms.x:Ts.x:Cs.x>Ts.x?Cs.x:Ts.x,Ls=Ms.y>Cs.y?Ms.y>Ts.y?Ms.y:Ts.y:Cs.y>Ts.y?Cs.y:Ts.y,Rs=zOrder(Is,Bs,ga,_s,Ss),Os=zOrder(Ps,Ls,ga,_s,Ss),Fs=ca.prevZ,Vs=ca.nextZ;Fs&&Fs.z>=Rs&&Vs&&Vs.z<=Os;){if(Fs!==ca.prev&&Fs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Fs.x,Fs.y)&&area(Fs.prev,Fs,Fs.next)>=0||(Fs=Fs.prevZ,Vs!==ca.prev&&Vs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Vs.x,Vs.y)&&area(Vs.prev,Vs,Vs.next)>=0))return!1;Vs=Vs.nextZ}for(;Fs&&Fs.z>=Rs;){if(Fs!==ca.prev&&Fs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Fs.x,Fs.y)&&area(Fs.prev,Fs,Fs.next)>=0)return!1;Fs=Fs.prevZ}for(;Vs&&Vs.z<=Os;){if(Vs!==ca.prev&&Vs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Vs.x,Vs.y)&&area(Vs.prev,Vs,Vs.next)>=0)return!1;Vs=Vs.nextZ}return!0}function cureLocalIntersections(ca,ga,_s){var Ss=ca;do{var Ms=Ss.prev,Cs=Ss.next.next;!equals(Ms,Cs)&&intersects(Ms,Ss,Ss.next,Cs)&&locallyInside(Ms,Cs)&&locallyInside(Cs,Ms)&&(ga.push(Ms.i/_s),ga.push(Ss.i/_s),ga.push(Cs.i/_s),removeNode(Ss),removeNode(Ss.next),Ss=ca=Cs),Ss=Ss.next}while(Ss!==ca);return filterPoints(Ss)}function splitEarcut(ca,ga,_s,Ss,Ms,Cs){var Ts=ca;do{for(var Is=Ts.next.next;Is!==Ts.prev;){if(Ts.i!==Is.i&&isValidDiagonal(Ts,Is)){var Bs=splitPolygon(Ts,Is);Ts=filterPoints(Ts,Ts.next),Bs=filterPoints(Bs,Bs.next),earcutLinked(Ts,ga,_s,Ss,Ms,Cs),earcutLinked(Bs,ga,_s,Ss,Ms,Cs);return}Is=Is.next}Ts=Ts.next}while(Ts!==ca)}function eliminateHoles(ca,ga,_s,Ss){var Ms=[],Cs,Ts,Is,Bs,Ps;for(Cs=0,Ts=ga.length;Cs<Ts;Cs++)Is=ga[Cs]*Ss,Bs=Cs<Ts-1?ga[Cs+1]*Ss:ca.length,Ps=linkedList(ca,Is,Bs,Ss,!1),Ps===Ps.next&&(Ps.steiner=!0),Ms.push(getLeftmost(Ps));for(Ms.sort(compareX),Cs=0;Cs<Ms.length;Cs++)eliminateHole(Ms[Cs],_s),_s=filterPoints(_s,_s.next);return _s}function compareX(ca,ga){return ca.x-ga.x}function eliminateHole(ca,ga){if(ga=findHoleBridge(ca,ga),ga){var _s=splitPolygon(ga,ca);filterPoints(ga,ga.next),filterPoints(_s,_s.next)}}function findHoleBridge(ca,ga){var _s=ga,Ss=ca.x,Ms=ca.y,Cs=-1/0,Ts;do{if(Ms<=_s.y&&Ms>=_s.next.y&&_s.next.y!==_s.y){var Is=_s.x+(Ms-_s.y)*(_s.next.x-_s.x)/(_s.next.y-_s.y);if(Is<=Ss&&Is>Cs){if(Cs=Is,Is===Ss){if(Ms===_s.y)return _s;if(Ms===_s.next.y)return _s.next}Ts=_s.x<_s.next.x?_s:_s.next}}_s=_s.next}while(_s!==ga);if(!Ts)return null;if(Ss===Cs)return Ts;var Bs=Ts,Ps=Ts.x,Ls=Ts.y,Rs=1/0,Os;_s=Ts;do Ss>=_s.x&&_s.x>=Ps&&Ss!==_s.x&&pointInTriangle(Ms<Ls?Ss:Cs,Ms,Ps,Ls,Ms<Ls?Cs:Ss,Ms,_s.x,_s.y)&&(Os=Math.abs(Ms-_s.y)/(Ss-_s.x),locallyInside(_s,ca)&&(Os<Rs||Os===Rs&&(_s.x>Ts.x||_s.x===Ts.x&&sectorContainsSector(Ts,_s)))&&(Ts=_s,Rs=Os)),_s=_s.next;while(_s!==Bs);return Ts}function sectorContainsSector(ca,ga){return area(ca.prev,ca,ga.prev)<0&&area(ga.next,ca,ca.next)<0}function indexCurve(ca,ga,_s,Ss){var Ms=ca;do Ms.z===null&&(Ms.z=zOrder(Ms.x,Ms.y,ga,_s,Ss)),Ms.prevZ=Ms.prev,Ms.nextZ=Ms.next,Ms=Ms.next;while(Ms!==ca);Ms.prevZ.nextZ=null,Ms.prevZ=null,sortLinked(Ms)}function sortLinked(ca){var ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps=1;do{for(_s=ca,ca=null,Cs=null,Ts=0;_s;){for(Ts++,Ss=_s,Is=0,ga=0;ga<Ps&&(Is++,Ss=Ss.nextZ,!!Ss);ga++);for(Bs=Ps;Is>0||Bs>0&&Ss;)Is!==0&&(Bs===0||!Ss||_s.z<=Ss.z)?(Ms=_s,_s=_s.nextZ,Is--):(Ms=Ss,Ss=Ss.nextZ,Bs--),Cs?Cs.nextZ=Ms:ca=Ms,Ms.prevZ=Cs,Cs=Ms;_s=Ss}Cs.nextZ=null,Ps*=2}while(Ts>1);return ca}function zOrder(ca,ga,_s,Ss,Ms){return ca=32767*(ca-_s)*Ms,ga=32767*(ga-Ss)*Ms,ca=(ca|ca<<8)&16711935,ca=(ca|ca<<4)&252645135,ca=(ca|ca<<2)&858993459,ca=(ca|ca<<1)&1431655765,ga=(ga|ga<<8)&16711935,ga=(ga|ga<<4)&252645135,ga=(ga|ga<<2)&858993459,ga=(ga|ga<<1)&1431655765,ca|ga<<1}function getLeftmost(ca){var ga=ca,_s=ca;do(ga.x<_s.x||ga.x===_s.x&&ga.y<_s.y)&&(_s=ga),ga=ga.next;while(ga!==ca);return _s}function pointInTriangle(ca,ga,_s,Ss,Ms,Cs,Ts,Is){return(Ms-Ts)*(ga-Is)-(ca-Ts)*(Cs-Is)>=0&&(ca-Ts)*(Ss-Is)-(_s-Ts)*(ga-Is)>=0&&(_s-Ts)*(Cs-Is)-(Ms-Ts)*(Ss-Is)>=0}function isValidDiagonal(ca,ga){return ca.next.i!==ga.i&&ca.prev.i!==ga.i&&!intersectsPolygon(ca,ga)&&(locallyInside(ca,ga)&&locallyInside(ga,ca)&&middleInside(ca,ga)&&(area(ca.prev,ca,ga.prev)||area(ca,ga.prev,ga))||equals(ca,ga)&&area(ca.prev,ca,ca.next)>0&&area(ga.prev,ga,ga.next)>0)}function area(ca,ga,_s){return(ga.y-ca.y)*(_s.x-ga.x)-(ga.x-ca.x)*(_s.y-ga.y)}function equals(ca,ga){return ca.x===ga.x&&ca.y===ga.y}function intersects(ca,ga,_s,Ss){var Ms=sign(area(ca,ga,_s)),Cs=sign(area(ca,ga,Ss)),Ts=sign(area(_s,Ss,ca)),Is=sign(area(_s,Ss,ga));return!!(Ms!==Cs&&Ts!==Is||Ms===0&&onSegment(ca,_s,ga)||Cs===0&&onSegment(ca,Ss,ga)||Ts===0&&onSegment(_s,ca,Ss)||Is===0&&onSegment(_s,ga,Ss))}function onSegment(ca,ga,_s){return ga.x<=Math.max(ca.x,_s.x)&&ga.x>=Math.min(ca.x,_s.x)&&ga.y<=Math.max(ca.y,_s.y)&&ga.y>=Math.min(ca.y,_s.y)}function sign(ca){return ca>0?1:ca<0?-1:0}function intersectsPolygon(ca,ga){var _s=ca;do{if(_s.i!==ca.i&&_s.next.i!==ca.i&&_s.i!==ga.i&&_s.next.i!==ga.i&&intersects(_s,_s.next,ca,ga))return!0;_s=_s.next}while(_s!==ca);return!1}function locallyInside(ca,ga){return area(ca.prev,ca,ca.next)<0?area(ca,ga,ca.next)>=0&&area(ca,ca.prev,ga)>=0:area(ca,ga,ca.prev)<0||area(ca,ca.next,ga)<0}function middleInside(ca,ga){var _s=ca,Ss=!1,Ms=(ca.x+ga.x)/2,Cs=(ca.y+ga.y)/2;do _s.y>Cs!=_s.next.y>Cs&&_s.next.y!==_s.y&&Ms<(_s.next.x-_s.x)*(Cs-_s.y)/(_s.next.y-_s.y)+_s.x&&(Ss=!Ss),_s=_s.next;while(_s!==ca);return Ss}function splitPolygon(ca,ga){var _s=new Node(ca.i,ca.x,ca.y),Ss=new Node(ga.i,ga.x,ga.y),Ms=ca.next,Cs=ga.prev;return ca.next=ga,ga.prev=ca,_s.next=Ms,Ms.prev=_s,Ss.next=_s,_s.prev=Ss,Cs.next=Ss,Ss.prev=Cs,Ss}function insertNode(ca,ga,_s,Ss){var Ms=new Node(ca,ga,_s);return Ss?(Ms.next=Ss.next,Ms.prev=Ss,Ss.next.prev=Ms,Ss.next=Ms):(Ms.prev=Ms,Ms.next=Ms),Ms}function removeNode(ca){ca.next.prev=ca.prev,ca.prev.next=ca.next,ca.prevZ&&(ca.prevZ.nextZ=ca.nextZ),ca.nextZ&&(ca.nextZ.prevZ=ca.prevZ)}function Node(ca,ga,_s){this.i=ca,this.x=ga,this.y=_s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(ca,ga,_s,Ss){for(var Ms=0,Cs=ga,Ts=_s-Ss;Cs<_s;Cs+=Ss)Ms+=(ca[Ts]-ca[Cs])*(ca[Cs+1]+ca[Ts+1]),Ts=Cs;return Ms}var ShapeUtils={area:function(ca){for(var ga=ca.length,_s=0,Ss=ga-1,Ms=0;Ms<ga;Ss=Ms++)_s+=ca[Ss].x*ca[Ms].y-ca[Ms].x*ca[Ss].y;return _s*.5},isClockWise:function(ca){return ShapeUtils.area(ca)<0},triangulateShape:function(ca,ga){var _s=[],Ss=[],Ms=[];removeDupEndPts(ca),addContour(_s,ca);var Cs=ca.length;ga.forEach(removeDupEndPts);for(var Ts=0;Ts<ga.length;Ts++)Ss.push(Cs),Cs+=ga[Ts].length,addContour(_s,ga[Ts]);for(var Is=Earcut.triangulate(_s,Ss),Ts=0;Ts<Is.length;Ts+=3)Ms.push(Is.slice(Ts,Ts+3));return Ms}};function removeDupEndPts(ca){var ga=ca.length;ga>2&&ca[ga-1].equals(ca[0])&&ca.pop()}function addContour(ca,ga){for(var _s=0;_s<ga.length;_s++)ca.push(ga[_s].x),ca.push(ga[_s].y)}function ExtrudeGeometry(ca,ga){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:ca,options:ga},this.fromBufferGeometry(new ExtrudeBufferGeometry(ca,ga)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var ca=Geometry.prototype.toJSON.call(this),ga=this.parameters.shapes,_s=this.parameters.options;return toJSON(ga,_s,ca)};function ExtrudeBufferGeometry(ca,ga){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:ca,options:ga},ca=Array.isArray(ca)?ca:[ca];for(var _s=this,Ss=[],Ms=[],Cs=0,Ts=ca.length;Cs<Ts;Cs++){var Is=ca[Cs];Bs(Is)}this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("uv",new Float32BufferAttribute(Ms,2)),this.computeVertexNormals();function Bs(Ps){var Ls=[],Rs=ga.curveSegments!==void 0?ga.curveSegments:12,Os=ga.steps!==void 0?ga.steps:1,Fs=ga.depth!==void 0?ga.depth:100,Vs=ga.bevelEnabled!==void 0?ga.bevelEnabled:!0,ks=ga.bevelThickness!==void 0?ga.bevelThickness:6,Ns=ga.bevelSize!==void 0?ga.bevelSize:ks-2,Ds=ga.bevelOffset!==void 0?ga.bevelOffset:0,$s=ga.bevelSegments!==void 0?ga.bevelSegments:3,Gs=ga.extrudePath,Us=ga.UVGenerator!==void 0?ga.UVGenerator:WorldUVGenerator;ga.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Fs=ga.amount);var Hs,zs=!1,js,Ws,Qs,Zs;Gs&&(Hs=Gs.getSpacedPoints(Os),zs=!0,Vs=!1,js=Gs.computeFrenetFrames(Os,!1),Ws=new Vector3,Qs=new Vector3,Zs=new Vector3),Vs||($s=0,ks=0,Ns=0,Ds=0);var Xs,eu,Ys,Js=Ps.extractPoints(Rs),qs=Js.shape,ru=Js.holes,tu=!ShapeUtils.isClockWise(qs);if(tu)for(qs=qs.reverse(),eu=0,Ys=ru.length;eu<Ys;eu++)Xs=ru[eu],ShapeUtils.isClockWise(Xs)&&(ru[eu]=Xs.reverse());var nu=ShapeUtils.triangulateShape(qs,ru),uu=qs;for(eu=0,Ys=ru.length;eu<Ys;eu++)Xs=ru[eu],qs=qs.concat(Xs);function fu(Ru,Gu,Fu){return Gu||console.error("THREE.ExtrudeGeometry: vec does not exist"),Gu.clone().multiplyScalar(Fu).add(Ru)}var mu,vu,Eu,hu,pu,du=qs.length,yu,Su=nu.length;function Cu(Ru,Gu,Fu){var Uu,cu,Nu,ku=Ru.x-Gu.x,rl=Ru.y-Gu.y,Vu=Fu.x-Ru.x,ol=Fu.y-Ru.y,sl=ku*ku+rl*rl,ul=ku*ol-rl*Vu;if(Math.abs(ul)>Number.EPSILON){var ml=Math.sqrt(sl),al=Math.sqrt(Vu*Vu+ol*ol),dl=Gu.x-rl/ml,vl=Gu.y+ku/ml,pl=Fu.x-ol/al,gl=Fu.y+Vu/al,_l=((pl-dl)*ol-(gl-vl)*Vu)/(ku*ol-rl*Vu);Uu=dl+ku*_l-Ru.x,cu=vl+rl*_l-Ru.y;var wl=Uu*Uu+cu*cu;if(wl<=2)return new Vector2(Uu,cu);Nu=Math.sqrt(wl/2)}else{var ou=!1;ku>Number.EPSILON?Vu>Number.EPSILON&&(ou=!0):ku<-Number.EPSILON?Vu<-Number.EPSILON&&(ou=!0):Math.sign(rl)===Math.sign(ol)&&(ou=!0),ou?(Uu=-rl,cu=ku,Nu=Math.sqrt(sl)):(Uu=ku,cu=rl,Nu=Math.sqrt(sl/2))}return new Vector2(Uu/Nu,cu/Nu)}for(var bu=[],Au=0,Tu=uu.length,Pu=Tu-1,zu=Au+1;Au<Tu;Au++,Pu++,zu++)Pu===Tu&&(Pu=0),zu===Tu&&(zu=0),bu[Au]=Cu(uu[Au],uu[Pu],uu[zu]);var nl=[],$u,iu=bu.concat();for(eu=0,Ys=ru.length;eu<Ys;eu++){for(Xs=ru[eu],$u=[],Au=0,Tu=Xs.length,Pu=Tu-1,zu=Au+1;Au<Tu;Au++,Pu++,zu++)Pu===Tu&&(Pu=0),zu===Tu&&(zu=0),$u[Au]=Cu(Xs[Au],Xs[Pu],Xs[zu]);nl.push($u),iu=iu.concat($u)}for(mu=0;mu<$s;mu++){for(Eu=mu/$s,hu=ks*Math.cos(Eu*Math.PI/2),vu=Ns*Math.sin(Eu*Math.PI/2)+Ds,Au=0,Tu=uu.length;Au<Tu;Au++)pu=fu(uu[Au],bu[Au],vu),Ou(pu.x,pu.y,-hu);for(eu=0,Ys=ru.length;eu<Ys;eu++)for(Xs=ru[eu],$u=nl[eu],Au=0,Tu=Xs.length;Au<Tu;Au++)pu=fu(Xs[Au],$u[Au],vu),Ou(pu.x,pu.y,-hu)}for(vu=Ns+Ds,Au=0;Au<du;Au++)pu=Vs?fu(qs[Au],iu[Au],vu):qs[Au],zs?(Qs.copy(js.normals[0]).multiplyScalar(pu.x),Ws.copy(js.binormals[0]).multiplyScalar(pu.y),Zs.copy(Hs[0]).add(Qs).add(Ws),Ou(Zs.x,Zs.y,Zs.z)):Ou(pu.x,pu.y,0);var su;for(su=1;su<=Os;su++)for(Au=0;Au<du;Au++)pu=Vs?fu(qs[Au],iu[Au],vu):qs[Au],zs?(Qs.copy(js.normals[su]).multiplyScalar(pu.x),Ws.copy(js.binormals[su]).multiplyScalar(pu.y),Zs.copy(Hs[su]).add(Qs).add(Ws),Ou(Zs.x,Zs.y,Zs.z)):Ou(pu.x,pu.y,Fs/Os*su);for(mu=$s-1;mu>=0;mu--){for(Eu=mu/$s,hu=ks*Math.cos(Eu*Math.PI/2),vu=Ns*Math.sin(Eu*Math.PI/2)+Ds,Au=0,Tu=uu.length;Au<Tu;Au++)pu=fu(uu[Au],bu[Au],vu),Ou(pu.x,pu.y,Fs+hu);for(eu=0,Ys=ru.length;eu<Ys;eu++)for(Xs=ru[eu],$u=nl[eu],Au=0,Tu=Xs.length;Au<Tu;Au++)pu=fu(Xs[Au],$u[Au],vu),zs?Ou(pu.x,pu.y+Hs[Os-1].y,Hs[Os-1].x+hu):Ou(pu.x,pu.y,Fs+hu)}Bu(),Iu();function Bu(){var Ru=Ss.length/3;if(Vs){var Gu=0,Fu=du*Gu;for(Au=0;Au<Su;Au++)yu=nu[Au],Du(yu[2]+Fu,yu[1]+Fu,yu[0]+Fu);for(Gu=Os+$s*2,Fu=du*Gu,Au=0;Au<Su;Au++)yu=nu[Au],Du(yu[0]+Fu,yu[1]+Fu,yu[2]+Fu)}else{for(Au=0;Au<Su;Au++)yu=nu[Au],Du(yu[2],yu[1],yu[0]);for(Au=0;Au<Su;Au++)yu=nu[Au],Du(yu[0]+du*Os,yu[1]+du*Os,yu[2]+du*Os)}_s.addGroup(Ru,Ss.length/3-Ru,0)}function Iu(){var Ru=Ss.length/3,Gu=0;for(Qu(uu,Gu),Gu+=uu.length,eu=0,Ys=ru.length;eu<Ys;eu++)Xs=ru[eu],Qu(Xs,Gu),Gu+=Xs.length;_s.addGroup(Ru,Ss.length/3-Ru,1)}function Qu(Ru,Gu){var Fu,Uu;for(Au=Ru.length;--Au>=0;){Fu=Au,Uu=Au-1,Uu<0&&(Uu=Ru.length-1);var cu=0,Nu=Os+$s*2;for(cu=0;cu<Nu;cu++){var ku=du*cu,rl=du*(cu+1),Vu=Gu+Fu+ku,ol=Gu+Uu+ku,sl=Gu+Uu+rl,ul=Gu+Fu+rl;Zu(Vu,ol,sl,ul)}}}function Ou(Ru,Gu,Fu){Ls.push(Ru),Ls.push(Gu),Ls.push(Fu)}function Du(Ru,Gu,Fu){qu(Ru),qu(Gu),qu(Fu);var Uu=Ss.length/3,cu=Us.generateTopUV(_s,Ss,Uu-3,Uu-2,Uu-1);Ku(cu[0]),Ku(cu[1]),Ku(cu[2])}function Zu(Ru,Gu,Fu,Uu){qu(Ru),qu(Gu),qu(Uu),qu(Gu),qu(Fu),qu(Uu);var cu=Ss.length/3,Nu=Us.generateSideWallUV(_s,Ss,cu-6,cu-3,cu-2,cu-1);Ku(Nu[0]),Ku(Nu[1]),Ku(Nu[3]),Ku(Nu[1]),Ku(Nu[2]),Ku(Nu[3])}function qu(Ru){Ss.push(Ls[Ru*3+0]),Ss.push(Ls[Ru*3+1]),Ss.push(Ls[Ru*3+2])}function Ku(Ru){Ms.push(Ru.x),Ms.push(Ru.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this),ga=this.parameters.shapes,_s=this.parameters.options;return toJSON(ga,_s,ca)};var WorldUVGenerator={generateTopUV:function(ca,ga,_s,Ss,Ms){var Cs=ga[_s*3],Ts=ga[_s*3+1],Is=ga[Ss*3],Bs=ga[Ss*3+1],Ps=ga[Ms*3],Ls=ga[Ms*3+1];return[new Vector2(Cs,Ts),new Vector2(Is,Bs),new Vector2(Ps,Ls)]},generateSideWallUV:function(ca,ga,_s,Ss,Ms,Cs){var Ts=ga[_s*3],Is=ga[_s*3+1],Bs=ga[_s*3+2],Ps=ga[Ss*3],Ls=ga[Ss*3+1],Rs=ga[Ss*3+2],Os=ga[Ms*3],Fs=ga[Ms*3+1],Vs=ga[Ms*3+2],ks=ga[Cs*3],Ns=ga[Cs*3+1],Ds=ga[Cs*3+2];return Math.abs(Is-Ls)<.01?[new Vector2(Ts,1-Bs),new Vector2(Ps,1-Rs),new Vector2(Os,1-Vs),new Vector2(ks,1-Ds)]:[new Vector2(Is,1-Bs),new Vector2(Ls,1-Rs),new Vector2(Fs,1-Vs),new Vector2(Ns,1-Ds)]}};function toJSON(ca,ga,_s){if(_s.shapes=[],Array.isArray(ca))for(var Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];_s.shapes.push(Cs.uuid)}else _s.shapes.push(ca.uuid);return ga.extrudePath!==void 0&&(_s.options.extrudePath=ga.extrudePath.toJSON()),_s}function TextGeometry(ca,ga){Geometry.call(this),this.type="TextGeometry",this.parameters={text:ca,parameters:ga},this.fromBufferGeometry(new TextBufferGeometry(ca,ga)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(ca,ga){ga=ga||{};var _s=ga.font;if(!(_s&&_s.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Ss=_s.generateShapes(ca,ga.size);ga.depth=ga.height!==void 0?ga.height:50,ga.bevelThickness===void 0&&(ga.bevelThickness=10),ga.bevelSize===void 0&&(ga.bevelSize=8),ga.bevelEnabled===void 0&&(ga.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Ss,ga),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:ca,widthSegments:ga,heightSegments:_s,phiStart:Ss,phiLength:Ms,thetaStart:Cs,thetaLength:Ts},this.fromBufferGeometry(new SphereBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:ca,widthSegments:ga,heightSegments:_s,phiStart:Ss,phiLength:Ms,thetaStart:Cs,thetaLength:Ts},ca=ca||1,ga=Math.max(3,Math.floor(ga)||8),_s=Math.max(2,Math.floor(_s)||6),Ss=Ss!==void 0?Ss:0,Ms=Ms!==void 0?Ms:Math.PI*2,Cs=Cs!==void 0?Cs:0,Ts=Ts!==void 0?Ts:Math.PI;var Is=Math.min(Cs+Ts,Math.PI),Bs,Ps,Ls=0,Rs=[],Os=new Vector3,Fs=new Vector3,Vs=[],ks=[],Ns=[],Ds=[];for(Ps=0;Ps<=_s;Ps++){var $s=[],Gs=Ps/_s,Us=0;for(Ps==0&&Cs==0?Us=.5/ga:Ps==_s&&Is==Math.PI&&(Us=-.5/ga),Bs=0;Bs<=ga;Bs++){var Hs=Bs/ga;Os.x=-ca*Math.cos(Ss+Hs*Ms)*Math.sin(Cs+Gs*Ts),Os.y=ca*Math.cos(Cs+Gs*Ts),Os.z=ca*Math.sin(Ss+Hs*Ms)*Math.sin(Cs+Gs*Ts),ks.push(Os.x,Os.y,Os.z),Fs.copy(Os).normalize(),Ns.push(Fs.x,Fs.y,Fs.z),Ds.push(Hs+Us,1-Gs),$s.push(Ls++)}Rs.push($s)}for(Ps=0;Ps<_s;Ps++)for(Bs=0;Bs<ga;Bs++){var zs=Rs[Ps][Bs+1],js=Rs[Ps][Bs],Ws=Rs[Ps+1][Bs],Qs=Rs[Ps+1][Bs+1];(Ps!==0||Cs>0)&&Vs.push(zs,js,Qs),(Ps!==_s-1||Is<Math.PI)&&Vs.push(js,Ws,Qs)}this.setIndex(Vs),this.setAttribute("position",new Float32BufferAttribute(ks,3)),this.setAttribute("normal",new Float32BufferAttribute(Ns,3)),this.setAttribute("uv",new Float32BufferAttribute(Ds,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(ca,ga,_s,Ss,Ms,Cs){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:ca,outerRadius:ga,thetaSegments:_s,phiSegments:Ss,thetaStart:Ms,thetaLength:Cs},this.fromBufferGeometry(new RingBufferGeometry(ca,ga,_s,Ss,Ms,Cs)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(ca,ga,_s,Ss,Ms,Cs){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:ca,outerRadius:ga,thetaSegments:_s,phiSegments:Ss,thetaStart:Ms,thetaLength:Cs},ca=ca||.5,ga=ga||1,Ms=Ms!==void 0?Ms:0,Cs=Cs!==void 0?Cs:Math.PI*2,_s=_s!==void 0?Math.max(3,_s):8,Ss=Ss!==void 0?Math.max(1,Ss):1;var Ts=[],Is=[],Bs=[],Ps=[],Ls,Rs=ca,Os=(ga-ca)/Ss,Fs=new Vector3,Vs=new Vector2,ks,Ns;for(ks=0;ks<=Ss;ks++){for(Ns=0;Ns<=_s;Ns++)Ls=Ms+Ns/_s*Cs,Fs.x=Rs*Math.cos(Ls),Fs.y=Rs*Math.sin(Ls),Is.push(Fs.x,Fs.y,Fs.z),Bs.push(0,0,1),Vs.x=(Fs.x/ga+1)/2,Vs.y=(Fs.y/ga+1)/2,Ps.push(Vs.x,Vs.y);Rs+=Os}for(ks=0;ks<Ss;ks++){var Ds=ks*(_s+1);for(Ns=0;Ns<_s;Ns++){Ls=Ns+Ds;var $s=Ls,Gs=Ls+_s+1,Us=Ls+_s+2,Hs=Ls+1;Ts.push($s,Gs,Hs),Ts.push(Gs,Us,Hs)}}this.setIndex(Ts),this.setAttribute("position",new Float32BufferAttribute(Is,3)),this.setAttribute("normal",new Float32BufferAttribute(Bs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ps,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:ca,segments:ga,phiStart:_s,phiLength:Ss},this.fromBufferGeometry(new LatheBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:ca,segments:ga,phiStart:_s,phiLength:Ss},ga=Math.floor(ga)||12,_s=_s||0,Ss=Ss||Math.PI*2,Ss=MathUtils.clamp(Ss,0,Math.PI*2);var Ms=[],Cs=[],Ts=[],Is,Bs=1/ga,Ps=new Vector3,Ls=new Vector2,Rs,Os;for(Rs=0;Rs<=ga;Rs++){var Fs=_s+Rs*Bs*Ss,Vs=Math.sin(Fs),ks=Math.cos(Fs);for(Os=0;Os<=ca.length-1;Os++)Ps.x=ca[Os].x*Vs,Ps.y=ca[Os].y,Ps.z=ca[Os].x*ks,Cs.push(Ps.x,Ps.y,Ps.z),Ls.x=Rs/ga,Ls.y=Os/(ca.length-1),Ts.push(Ls.x,Ls.y)}for(Rs=0;Rs<ga;Rs++)for(Os=0;Os<ca.length-1;Os++){Is=Os+Rs*ca.length;var Ns=Is,Ds=Is+ca.length,$s=Is+ca.length+1,Gs=Is+1;Ms.push(Ns,Ds,Gs),Ms.push(Ds,$s,Gs)}if(this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2)),this.computeVertexNormals(),Ss===Math.PI*2){var Us=this.attributes.normal.array,Hs=new Vector3,zs=new Vector3,js=new Vector3;for(Is=ga*ca.length*3,Rs=0,Os=0;Rs<ca.length;Rs++,Os+=3)Hs.x=Us[Os+0],Hs.y=Us[Os+1],Hs.z=Us[Os+2],zs.x=Us[Is+Os+0],zs.y=Us[Is+Os+1],zs.z=Us[Is+Os+2],js.addVectors(Hs,zs).normalize(),Us[Os+0]=Us[Is+Os+0]=js.x,Us[Os+1]=Us[Is+Os+1]=js.y,Us[Os+2]=Us[Is+Os+2]=js.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(ca,ga){Geometry.call(this),this.type="ShapeGeometry",typeof ga=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),ga=ga.curveSegments),this.parameters={shapes:ca,curveSegments:ga},this.fromBufferGeometry(new ShapeBufferGeometry(ca,ga)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var ca=Geometry.prototype.toJSON.call(this),ga=this.parameters.shapes;return toJSON$1(ga,ca)};function ShapeBufferGeometry(ca,ga){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:ca,curveSegments:ga},ga=ga||12;var _s=[],Ss=[],Ms=[],Cs=[],Ts=0,Is=0;if(Array.isArray(ca)===!1)Ps(ca);else for(var Bs=0;Bs<ca.length;Bs++)Ps(ca[Bs]),this.addGroup(Ts,Is,Bs),Ts+=Is,Is=0;this.setIndex(_s),this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("normal",new Float32BufferAttribute(Ms,3)),this.setAttribute("uv",new Float32BufferAttribute(Cs,2));function Ps(Ls){var Rs,Os,Fs,Vs=Ss.length/3,ks=Ls.extractPoints(ga),Ns=ks.shape,Ds=ks.holes;for(ShapeUtils.isClockWise(Ns)===!1&&(Ns=Ns.reverse()),Rs=0,Os=Ds.length;Rs<Os;Rs++)Fs=Ds[Rs],ShapeUtils.isClockWise(Fs)===!0&&(Ds[Rs]=Fs.reverse());var $s=ShapeUtils.triangulateShape(Ns,Ds);for(Rs=0,Os=Ds.length;Rs<Os;Rs++)Fs=Ds[Rs],Ns=Ns.concat(Fs);for(Rs=0,Os=Ns.length;Rs<Os;Rs++){var Gs=Ns[Rs];Ss.push(Gs.x,Gs.y,0),Ms.push(0,0,1),Cs.push(Gs.x,Gs.y)}for(Rs=0,Os=$s.length;Rs<Os;Rs++){var Us=$s[Rs],Hs=Us[0]+Vs,zs=Us[1]+Vs,js=Us[2]+Vs;_s.push(Hs,zs,js),Is+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this),ga=this.parameters.shapes;return toJSON$1(ga,ca)};function toJSON$1(ca,ga){if(ga.shapes=[],Array.isArray(ca))for(var _s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s];ga.shapes.push(Ms.uuid)}else ga.shapes.push(ca.uuid);return ga}function EdgesGeometry(ca,ga){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:ga},ga=ga!==void 0?ga:1;var _s=[],Ss=Math.cos(MathUtils.DEG2RAD*ga),Ms=[0,0],Cs={},Ts,Is,Bs,Ps=["a","b","c"],Ls;ca.isBufferGeometry?(Ls=new Geometry,Ls.fromBufferGeometry(ca)):Ls=ca.clone(),Ls.mergeVertices(),Ls.computeFaceNormals();for(var Rs=Ls.vertices,Os=Ls.faces,Fs=0,Vs=Os.length;Fs<Vs;Fs++)for(var ks=Os[Fs],Ns=0;Ns<3;Ns++)Ts=ks[Ps[Ns]],Is=ks[Ps[(Ns+1)%3]],Ms[0]=Math.min(Ts,Is),Ms[1]=Math.max(Ts,Is),Bs=Ms[0]+","+Ms[1],Cs[Bs]===void 0?Cs[Bs]={index1:Ms[0],index2:Ms[1],face1:Fs,face2:void 0}:Cs[Bs].face2=Fs;for(Bs in Cs){var Ds=Cs[Bs];if(Ds.face2===void 0||Os[Ds.face1].normal.dot(Os[Ds.face2].normal)<=Ss){var $s=Rs[Ds.index1];_s.push($s.x,$s.y,$s.z),$s=Rs[Ds.index2],_s.push($s.x,$s.y,$s.z)}}this.setAttribute("position",new Float32BufferAttribute(_s,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(ca,ga,_s,Ss,Ms,Cs,Ts,Is){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:ca,radiusBottom:ga,height:_s,radialSegments:Ss,heightSegments:Ms,openEnded:Cs,thetaStart:Ts,thetaLength:Is},this.fromBufferGeometry(new CylinderBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts,Is)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts,Is){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:ca,radiusBottom:ga,height:_s,radialSegments:Ss,heightSegments:Ms,openEnded:Cs,thetaStart:Ts,thetaLength:Is};var Bs=this;ca=ca!==void 0?ca:1,ga=ga!==void 0?ga:1,_s=_s||1,Ss=Math.floor(Ss)||8,Ms=Math.floor(Ms)||1,Cs=Cs!==void 0?Cs:!1,Ts=Ts!==void 0?Ts:0,Is=Is!==void 0?Is:Math.PI*2;var Ps=[],Ls=[],Rs=[],Os=[],Fs=0,Vs=[],ks=_s/2,Ns=0;Ds(),Cs===!1&&(ca>0&&$s(!0),ga>0&&$s(!1)),this.setIndex(Ps),this.setAttribute("position",new Float32BufferAttribute(Ls,3)),this.setAttribute("normal",new Float32BufferAttribute(Rs,3)),this.setAttribute("uv",new Float32BufferAttribute(Os,2));function Ds(){var Gs,Us,Hs=new Vector3,zs=new Vector3,js=0,Ws=(ga-ca)/_s;for(Us=0;Us<=Ms;Us++){var Qs=[],Zs=Us/Ms,Xs=Zs*(ga-ca)+ca;for(Gs=0;Gs<=Ss;Gs++){var eu=Gs/Ss,Ys=eu*Is+Ts,Js=Math.sin(Ys),qs=Math.cos(Ys);zs.x=Xs*Js,zs.y=-Zs*_s+ks,zs.z=Xs*qs,Ls.push(zs.x,zs.y,zs.z),Hs.set(Js,Ws,qs).normalize(),Rs.push(Hs.x,Hs.y,Hs.z),Os.push(eu,1-Zs),Qs.push(Fs++)}Vs.push(Qs)}for(Gs=0;Gs<Ss;Gs++)for(Us=0;Us<Ms;Us++){var ru=Vs[Us][Gs],tu=Vs[Us+1][Gs],nu=Vs[Us+1][Gs+1],uu=Vs[Us][Gs+1];Ps.push(ru,tu,uu),Ps.push(tu,nu,uu),js+=6}Bs.addGroup(Ns,js,0),Ns+=js}function $s(Gs){var Us,Hs,zs,js=new Vector2,Ws=new Vector3,Qs=0,Zs=Gs===!0?ca:ga,Xs=Gs===!0?1:-1;for(Hs=Fs,Us=1;Us<=Ss;Us++)Ls.push(0,ks*Xs,0),Rs.push(0,Xs,0),Os.push(.5,.5),Fs++;for(zs=Fs,Us=0;Us<=Ss;Us++){var eu=Us/Ss,Ys=eu*Is+Ts,Js=Math.cos(Ys),qs=Math.sin(Ys);Ws.x=Zs*qs,Ws.y=ks*Xs,Ws.z=Zs*Js,Ls.push(Ws.x,Ws.y,Ws.z),Rs.push(0,Xs,0),js.x=Js*.5+.5,js.y=qs*.5*Xs+.5,Os.push(js.x,js.y),Fs++}for(Us=0;Us<Ss;Us++){var ru=Hs+Us,tu=zs+Us;Gs===!0?Ps.push(tu,tu+1,ru):Ps.push(tu+1,tu,ru),Qs+=3}Bs.addGroup(Ns,Qs,Gs===!0?1:2),Ns+=Qs}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){CylinderGeometry.call(this,0,ca,ga,_s,Ss,Ms,Cs,Ts),this.type="ConeGeometry",this.parameters={radius:ca,height:ga,radialSegments:_s,heightSegments:Ss,openEnded:Ms,thetaStart:Cs,thetaLength:Ts}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){CylinderBufferGeometry.call(this,0,ca,ga,_s,Ss,Ms,Cs,Ts),this.type="ConeBufferGeometry",this.parameters={radius:ca,height:ga,radialSegments:_s,heightSegments:Ss,openEnded:Ms,thetaStart:Cs,thetaLength:Ts}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:ca,segments:ga,thetaStart:_s,thetaLength:Ss},this.fromBufferGeometry(new CircleBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:ca,segments:ga,thetaStart:_s,thetaLength:Ss},ca=ca||1,ga=ga!==void 0?Math.max(3,ga):8,_s=_s!==void 0?_s:0,Ss=Ss!==void 0?Ss:Math.PI*2;var Ms=[],Cs=[],Ts=[],Is=[],Bs,Ps,Ls=new Vector3,Rs=new Vector2;for(Cs.push(0,0,0),Ts.push(0,0,1),Is.push(.5,.5),Ps=0,Bs=3;Ps<=ga;Ps++,Bs+=3){var Os=_s+Ps/ga*Ss;Ls.x=ca*Math.cos(Os),Ls.y=ca*Math.sin(Os),Cs.push(Ls.x,Ls.y,Ls.z),Ts.push(0,0,1),Rs.x=(Cs[Bs]/ca+1)/2,Rs.y=(Cs[Bs+1]/ca+1)/2,Is.push(Rs.x,Rs.y)}for(Bs=1;Bs<=ga;Bs++)Ms.push(Bs,Bs+1,0);this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Cs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ts,3)),this.setAttribute("uv",new Float32BufferAttribute(Is,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(ca){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(ca)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this};function RawShaderMaterial(ca){ShaderMaterial.call(this,ca),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(ca){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(ca)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.defines={STANDARD:""},this.color.copy(ca.color),this.roughness=ca.roughness,this.metalness=ca.metalness,this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.roughnessMap=ca.roughnessMap,this.metalnessMap=ca.metalnessMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.envMapIntensity=ca.envMapIntensity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this.vertexTangents=ca.vertexTangents,this};function MeshPhysicalMaterial(ca){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(ca)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(ca){return MeshStandardMaterial.prototype.copy.call(this,ca),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=ca.clearcoat,this.clearcoatMap=ca.clearcoatMap,this.clearcoatRoughness=ca.clearcoatRoughness,this.clearcoatRoughnessMap=ca.clearcoatRoughnessMap,this.clearcoatNormalMap=ca.clearcoatNormalMap,this.clearcoatNormalScale.copy(ca.clearcoatNormalScale),this.reflectivity=ca.reflectivity,ca.sheen?this.sheen=(this.sheen||new Color).copy(ca.sheen):this.sheen=null,this.transparency=ca.transparency,this};function MeshPhongMaterial(ca){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.specular.copy(ca.specular),this.shininess=ca.shininess,this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshToonMaterial(ca){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.specular.copy(ca.specular),this.shininess=ca.shininess,this.map=ca.map,this.gradientMap=ca.gradientMap,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshNormalMaterial(ca){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshLambertMaterial(ca){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshMatcapMaterial(ca){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.defines={MATCAP:""},this.color.copy(ca.color),this.matcap=ca.matcap,this.map=ca.map,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.alphaMap=ca.alphaMap,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function LineDashedMaterial(ca){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(ca)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(ca){return LineBasicMaterial.prototype.copy.call(this,ca),this.scale=ca.scale,this.dashSize=ca.dashSize,this.gapSize=ca.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(ca,ga,_s){return AnimationUtils.isTypedArray(ca)?new ca.constructor(ca.subarray(ga,_s!==void 0?_s:ca.length)):ca.slice(ga,_s)},convertArray:function(ca,ga,_s){return!ca||!_s&&ca.constructor===ga?ca:typeof ga.BYTES_PER_ELEMENT=="number"?new ga(ca):Array.prototype.slice.call(ca)},isTypedArray:function(ca){return ArrayBuffer.isView(ca)&&!(ca instanceof DataView)},getKeyframeOrder:function(ca){function ga(Cs,Ts){return ca[Cs]-ca[Ts]}for(var _s=ca.length,Ss=new Array(_s),Ms=0;Ms!==_s;++Ms)Ss[Ms]=Ms;return Ss.sort(ga),Ss},sortedArray:function(ca,ga,_s){for(var Ss=ca.length,Ms=new ca.constructor(Ss),Cs=0,Ts=0;Ts!==Ss;++Cs)for(var Is=_s[Cs]*ga,Bs=0;Bs!==ga;++Bs)Ms[Ts++]=ca[Is+Bs];return Ms},flattenJSON:function(ca,ga,_s,Ss){for(var Ms=1,Cs=ca[0];Cs!==void 0&&Cs[Ss]===void 0;)Cs=ca[Ms++];if(Cs!==void 0){var Ts=Cs[Ss];if(Ts!==void 0)if(Array.isArray(Ts))do Ts=Cs[Ss],Ts!==void 0&&(ga.push(Cs.time),_s.push.apply(_s,Ts)),Cs=ca[Ms++];while(Cs!==void 0);else if(Ts.toArray!==void 0)do Ts=Cs[Ss],Ts!==void 0&&(ga.push(Cs.time),Ts.toArray(_s,_s.length)),Cs=ca[Ms++];while(Cs!==void 0);else do Ts=Cs[Ss],Ts!==void 0&&(ga.push(Cs.time),_s.push(Ts)),Cs=ca[Ms++];while(Cs!==void 0)}},subclip:function(ca,ga,_s,Ss,Ms){Ms=Ms||30;var Cs=ca.clone();Cs.name=ga;for(var Ts=[],Is=0;Is<Cs.tracks.length;++Is){for(var Bs=Cs.tracks[Is],Ps=Bs.getValueSize(),Ls=[],Rs=[],Os=0;Os<Bs.times.length;++Os){var Fs=Bs.times[Os]*Ms;if(!(Fs<_s||Fs>=Ss)){Ls.push(Bs.times[Os]);for(var Vs=0;Vs<Ps;++Vs)Rs.push(Bs.values[Os*Ps+Vs])}}Ls.length!==0&&(Bs.times=AnimationUtils.convertArray(Ls,Bs.times.constructor),Bs.values=AnimationUtils.convertArray(Rs,Bs.values.constructor),Ts.push(Bs))}Cs.tracks=Ts;for(var ks=1/0,Is=0;Is<Cs.tracks.length;++Is)ks>Cs.tracks[Is].times[0]&&(ks=Cs.tracks[Is].times[0]);for(var Is=0;Is<Cs.tracks.length;++Is)Cs.tracks[Is].shift(-1*ks);return Cs.resetDuration(),Cs},makeClipAdditive:function(ca,ga,_s,Ss){ga===void 0&&(ga=0),_s===void 0&&(_s=ca),(Ss===void 0||Ss<=0)&&(Ss=30);for(var Ms=ca.tracks.length,Cs=ga/Ss,Ts=0;Ts<Ms;++Ts){var Is=_s.tracks[Ts],Bs=Is.ValueTypeName;if(!(Bs==="bool"||Bs==="string")){var Ps=ca.tracks.find(function(Us){return Us.name===Is.name&&Us.ValueTypeName===Bs});if(Ps!==void 0){var Ls=Is.getValueSize(),Rs=Is.times.length-1,Os;if(Cs<=Is.times[0])Os=AnimationUtils.arraySlice(Is.values,0,Is.valueSize);else if(Cs>=Is.times[Rs]){var Fs=Rs*Ls;Os=AnimationUtils.arraySlice(Is.values,Fs)}else{var Vs=Is.createInterpolant();Vs.evaluate(Cs),Os=Vs.resultBuffer}if(Bs==="quaternion"){var ks=new Quaternion(Os[0],Os[1],Os[2],Os[3]).normalize().conjugate();ks.toArray(Os)}for(var Ns=Ps.times.length,Ds=0;Ds<Ns;++Ds){var $s=Ds*Ls;if(Bs==="quaternion")Quaternion.multiplyQuaternionsFlat(Ps.values,$s,Os,0,Ps.values,$s);else for(var Gs=0;Gs<Ls;++Gs)Ps.values[$s+Gs]-=Os[Gs]}}}}return ca.blendMode=AdditiveAnimationBlendMode,ca}};function Interpolant(ca,ga,_s,Ss){this.parameterPositions=ca,this._cachedIndex=0,this.resultBuffer=Ss!==void 0?Ss:new ga.constructor(_s),this.sampleValues=ga,this.valueSize=_s}Object.assign(Interpolant.prototype,{evaluate:function(ca){var ga=this.parameterPositions,_s=this._cachedIndex,Ss=ga[_s],Ms=ga[_s-1];e:{t:{var Cs;n:{r:if(!(ca<Ss)){for(var Ts=_s+2;;){if(Ss===void 0){if(ca<Ms)break r;return _s=ga.length,this._cachedIndex=_s,this.afterEnd_(_s-1,ca,Ms)}if(_s===Ts)break;if(Ms=Ss,Ss=ga[++_s],ca<Ss)break t}Cs=ga.length;break n}if(!(ca>=Ms)){var Is=ga[1];ca<Is&&(_s=2,Ms=Is);for(var Ts=_s-2;;){if(Ms===void 0)return this._cachedIndex=0,this.beforeStart_(0,ca,Ss);if(_s===Ts)break;if(Ss=Ms,Ms=ga[--_s-1],ca>=Ms)break t}Cs=_s,_s=0;break n}break e}for(;_s<Cs;){var Bs=_s+Cs>>>1;ca<ga[Bs]?Cs=Bs:_s=Bs+1}if(Ss=ga[_s],Ms=ga[_s-1],Ms===void 0)return this._cachedIndex=0,this.beforeStart_(0,ca,Ss);if(Ss===void 0)return _s=ga.length,this._cachedIndex=_s,this.afterEnd_(_s-1,Ms,ca)}this._cachedIndex=_s,this.intervalChanged_(_s,Ms,Ss)}return this.interpolate_(_s,Ms,ca,Ss)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(ca){for(var ga=this.resultBuffer,_s=this.sampleValues,Ss=this.valueSize,Ms=ca*Ss,Cs=0;Cs!==Ss;++Cs)ga[Cs]=_s[Ms+Cs];return ga},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(ca,ga,_s){var Ss=this.parameterPositions,Ms=ca-2,Cs=ca+1,Ts=Ss[Ms],Is=Ss[Cs];if(Ts===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Ms=ca,Ts=2*ga-_s;break;case WrapAroundEnding:Ms=Ss.length-2,Ts=ga+Ss[Ms]-Ss[Ms+1];break;default:Ms=ca,Ts=_s}if(Is===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Cs=ca,Is=2*_s-ga;break;case WrapAroundEnding:Cs=1,Is=_s+Ss[1]-Ss[0];break;default:Cs=ca-1,Is=ga}var Bs=(_s-ga)*.5,Ps=this.valueSize;this._weightPrev=Bs/(ga-Ts),this._weightNext=Bs/(Is-_s),this._offsetPrev=Ms*Ps,this._offsetNext=Cs*Ps},interpolate_:function(ca,ga,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Is=ca*Ts,Bs=Is-Ts,Ps=this._offsetPrev,Ls=this._offsetNext,Rs=this._weightPrev,Os=this._weightNext,Fs=(_s-ga)/(Ss-ga),Vs=Fs*Fs,ks=Vs*Fs,Ns=-Rs*ks+2*Rs*Vs-Rs*Fs,Ds=(1+Rs)*ks+(-1.5-2*Rs)*Vs+(-.5+Rs)*Fs+1,$s=(-1-Os)*ks+(1.5+Os)*Vs+.5*Fs,Gs=Os*ks-Os*Vs,Us=0;Us!==Ts;++Us)Ms[Us]=Ns*Cs[Ps+Us]+Ds*Cs[Bs+Us]+$s*Cs[Is+Us]+Gs*Cs[Ls+Us];return Ms}});function LinearInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(ca,ga,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Is=ca*Ts,Bs=Is-Ts,Ps=(_s-ga)/(Ss-ga),Ls=1-Ps,Rs=0;Rs!==Ts;++Rs)Ms[Rs]=Cs[Bs+Rs]*Ls+Cs[Is+Rs]*Ps;return Ms}});function DiscreteInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(ca){return this.copySampleValue_(ca-1)}});function KeyframeTrack(ca,ga,_s,Ss){if(ca===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(ga===void 0||ga.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+ca);this.name=ca,this.times=AnimationUtils.convertArray(ga,this.TimeBufferType),this.values=AnimationUtils.convertArray(_s,this.ValueBufferType),this.setInterpolation(Ss||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(ca){var ga=ca.constructor,_s;if(ga.toJSON!==void 0)_s=ga.toJSON(ca);else{_s={name:ca.name,times:AnimationUtils.convertArray(ca.times,Array),values:AnimationUtils.convertArray(ca.values,Array)};var Ss=ca.getInterpolation();Ss!==ca.DefaultInterpolation&&(_s.interpolation=Ss)}return _s.type=ca.ValueTypeName,_s}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(ca){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodLinear:function(ca){return new LinearInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodSmooth:function(ca){return new CubicInterpolant(this.times,this.values,this.getValueSize(),ca)},setInterpolation:function(ca){var ga;switch(ca){case InterpolateDiscrete:ga=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:ga=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:ga=this.InterpolantFactoryMethodSmooth;break}if(ga===void 0){var _s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(ca!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(_s);return console.warn("THREE.KeyframeTrack:",_s),this}return this.createInterpolant=ga,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(ca){if(ca!==0)for(var ga=this.times,_s=0,Ss=ga.length;_s!==Ss;++_s)ga[_s]+=ca;return this},scale:function(ca){if(ca!==1)for(var ga=this.times,_s=0,Ss=ga.length;_s!==Ss;++_s)ga[_s]*=ca;return this},trim:function(ca,ga){for(var _s=this.times,Ss=_s.length,Ms=0,Cs=Ss-1;Ms!==Ss&&_s[Ms]<ca;)++Ms;for(;Cs!==-1&&_s[Cs]>ga;)--Cs;if(++Cs,Ms!==0||Cs!==Ss){Ms>=Cs&&(Cs=Math.max(Cs,1),Ms=Cs-1);var Ts=this.getValueSize();this.times=AnimationUtils.arraySlice(_s,Ms,Cs),this.values=AnimationUtils.arraySlice(this.values,Ms*Ts,Cs*Ts)}return this},validate:function(){var ca=!0,ga=this.getValueSize();ga-Math.floor(ga)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),ca=!1);var _s=this.times,Ss=this.values,Ms=_s.length;Ms===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),ca=!1);for(var Cs=null,Ts=0;Ts!==Ms;Ts++){var Is=_s[Ts];if(typeof Is=="number"&&isNaN(Is)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Ts,Is),ca=!1;break}if(Cs!==null&&Cs>Is){console.error("THREE.KeyframeTrack: Out of order keys.",this,Ts,Is,Cs),ca=!1;break}Cs=Is}if(Ss!==void 0&&AnimationUtils.isTypedArray(Ss))for(var Ts=0,Bs=Ss.length;Ts!==Bs;++Ts){var Ps=Ss[Ts];if(isNaN(Ps)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Ts,Ps),ca=!1;break}}return ca},optimize:function(){for(var ca=AnimationUtils.arraySlice(this.times),ga=AnimationUtils.arraySlice(this.values),_s=this.getValueSize(),Ss=this.getInterpolation()===InterpolateSmooth,Ms=1,Cs=ca.length-1,Ts=1;Ts<Cs;++Ts){var Is=!1,Bs=ca[Ts],Ps=ca[Ts+1];if(Bs!==Ps&&(Ts!==1||Bs!==Bs[0]))if(Ss)Is=!0;else for(var Ls=Ts*_s,Rs=Ls-_s,Os=Ls+_s,Fs=0;Fs!==_s;++Fs){var Vs=ga[Ls+Fs];if(Vs!==ga[Rs+Fs]||Vs!==ga[Os+Fs]){Is=!0;break}}if(Is){if(Ts!==Ms){ca[Ms]=ca[Ts];for(var ks=Ts*_s,Ns=Ms*_s,Fs=0;Fs!==_s;++Fs)ga[Ns+Fs]=ga[ks+Fs]}++Ms}}if(Cs>0){ca[Ms]=ca[Cs];for(var ks=Cs*_s,Ns=Ms*_s,Fs=0;Fs!==_s;++Fs)ga[Ns+Fs]=ga[ks+Fs];++Ms}return Ms!==ca.length?(this.times=AnimationUtils.arraySlice(ca,0,Ms),this.values=AnimationUtils.arraySlice(ga,0,Ms*_s)):(this.times=ca,this.values=ga),this},clone:function(){var ca=AnimationUtils.arraySlice(this.times,0),ga=AnimationUtils.arraySlice(this.values,0),_s=this.constructor,Ss=new _s(this.name,ca,ga);return Ss.createInterpolant=this.createInterpolant,Ss}});function BooleanKeyframeTrack(ca,ga,_s){KeyframeTrack.call(this,ca,ga,_s)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(ca,ga,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Is=ca*Ts,Bs=(_s-ga)/(Ss-ga),Ps=Is+Ts;Is!==Ps;Is+=4)Quaternion.slerpFlat(Ms,0,Cs,Is-Ts,Cs,Is,Bs);return Ms}});function QuaternionKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(ca){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(ca,ga,_s,Ss){this.name=ca,this.tracks=_s,this.duration=ga!==void 0?ga:-1,this.blendMode=Ss!==void 0?Ss:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(ca){switch(ca.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ca)}function parseKeyframeTrack(ca){if(ca.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var ga=getTrackTypeForValueTypeName(ca.type);if(ca.times===void 0){var _s=[],Ss=[];AnimationUtils.flattenJSON(ca.keys,_s,Ss,"value"),ca.times=_s,ca.values=Ss}return ga.parse!==void 0?ga.parse(ca):new ga(ca.name,ca.times,ca.values,ca.interpolation)}Object.assign(AnimationClip,{parse:function(ca){for(var ga=[],_s=ca.tracks,Ss=1/(ca.fps||1),Ms=0,Cs=_s.length;Ms!==Cs;++Ms)ga.push(parseKeyframeTrack(_s[Ms]).scale(Ss));return new AnimationClip(ca.name,ca.duration,ga,ca.blendMode)},toJSON:function(ca){for(var ga=[],_s=ca.tracks,Ss={name:ca.name,duration:ca.duration,tracks:ga,uuid:ca.uuid,blendMode:ca.blendMode},Ms=0,Cs=_s.length;Ms!==Cs;++Ms)ga.push(KeyframeTrack.toJSON(_s[Ms]));return Ss},CreateFromMorphTargetSequence:function(ca,ga,_s,Ss){for(var Ms=ga.length,Cs=[],Ts=0;Ts<Ms;Ts++){var Is=[],Bs=[];Is.push((Ts+Ms-1)%Ms,Ts,(Ts+1)%Ms),Bs.push(0,1,0);var Ps=AnimationUtils.getKeyframeOrder(Is);Is=AnimationUtils.sortedArray(Is,1,Ps),Bs=AnimationUtils.sortedArray(Bs,1,Ps),!Ss&&Is[0]===0&&(Is.push(Ms),Bs.push(Bs[0])),Cs.push(new NumberKeyframeTrack(".morphTargetInfluences["+ga[Ts].name+"]",Is,Bs).scale(1/_s))}return new AnimationClip(ca,-1,Cs)},findByName:function(ca,ga){var _s=ca;if(!Array.isArray(ca)){var Ss=ca;_s=Ss.geometry&&Ss.geometry.animations||Ss.animations}for(var Ms=0;Ms<_s.length;Ms++)if(_s[Ms].name===ga)return _s[Ms];return null},CreateClipsFromMorphTargetSequences:function(ca,ga,_s){for(var Ss={},Ms=/^([\w-]*?)([\d]+)$/,Cs=0,Ts=ca.length;Cs<Ts;Cs++){var Is=ca[Cs],Bs=Is.name.match(Ms);if(Bs&&Bs.length>1){var Ps=Bs[1],Ls=Ss[Ps];Ls||(Ss[Ps]=Ls=[]),Ls.push(Is)}}var Rs=[];for(var Ps in Ss)Rs.push(AnimationClip.CreateFromMorphTargetSequence(Ps,Ss[Ps],ga,_s));return Rs},parseAnimation:function(ca,ga){if(!ca)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var _s=function(Us,Hs,zs,js,Ws){if(zs.length!==0){var Qs=[],Zs=[];AnimationUtils.flattenJSON(zs,Qs,Zs,js),Qs.length!==0&&Ws.push(new Us(Hs,Qs,Zs))}},Ss=[],Ms=ca.name||"default",Cs=ca.length||-1,Ts=ca.fps||30,Is=ca.blendMode,Bs=ca.hierarchy||[],Ps=0;Ps<Bs.length;Ps++){var Ls=Bs[Ps].keys;if(!(!Ls||Ls.length===0))if(Ls[0].morphTargets){for(var Rs={},Os=0;Os<Ls.length;Os++)if(Ls[Os].morphTargets)for(var Fs=0;Fs<Ls[Os].morphTargets.length;Fs++)Rs[Ls[Os].morphTargets[Fs]]=-1;for(var Vs in Rs){for(var ks=[],Ns=[],Fs=0;Fs!==Ls[Os].morphTargets.length;++Fs){var Ds=Ls[Os];ks.push(Ds.time),Ns.push(Ds.morphTarget===Vs?1:0)}Ss.push(new NumberKeyframeTrack(".morphTargetInfluence["+Vs+"]",ks,Ns))}Cs=Rs.length*(Ts||1)}else{var $s=".bones["+ga[Ps].name+"]";_s(VectorKeyframeTrack,$s+".position",Ls,"pos",Ss),_s(QuaternionKeyframeTrack,$s+".quaternion",Ls,"rot",Ss),_s(VectorKeyframeTrack,$s+".scale",Ls,"scl",Ss)}}if(Ss.length===0)return null;var Gs=new AnimationClip(Ms,Cs,Ss,Is);return Gs}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var ca=this.tracks,ga=0,_s=0,Ss=ca.length;_s!==Ss;++_s){var Ms=this.tracks[_s];ga=Math.max(ga,Ms.times[Ms.times.length-1])}return this.duration=ga,this},trim:function(){for(var ca=0;ca<this.tracks.length;ca++)this.tracks[ca].trim(0,this.duration);return this},validate:function(){for(var ca=!0,ga=0;ga<this.tracks.length;ga++)ca=ca&&this.tracks[ga].validate();return ca},optimize:function(){for(var ca=0;ca<this.tracks.length;ca++)this.tracks[ca].optimize();return this},clone:function(){for(var ca=[],ga=0;ga<this.tracks.length;ga++)ca.push(this.tracks[ga].clone());return new AnimationClip(this.name,this.duration,ca,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(ca,ga){this.enabled!==!1&&(this.files[ca]=ga)},get:function(ca){if(this.enabled!==!1)return this.files[ca]},remove:function(ca){delete this.files[ca]},clear:function(){this.files={}}};function LoadingManager(ca,ga,_s){var Ss=this,Ms=!1,Cs=0,Ts=0,Is=void 0,Bs=[];this.onStart=void 0,this.onLoad=ca,this.onProgress=ga,this.onError=_s,this.itemStart=function(Ps){Ts++,Ms===!1&&Ss.onStart!==void 0&&Ss.onStart(Ps,Cs,Ts),Ms=!0},this.itemEnd=function(Ps){Cs++,Ss.onProgress!==void 0&&Ss.onProgress(Ps,Cs,Ts),Cs===Ts&&(Ms=!1,Ss.onLoad!==void 0&&Ss.onLoad())},this.itemError=function(Ps){Ss.onError!==void 0&&Ss.onError(Ps)},this.resolveURL=function(Ps){return Is?Is(Ps):Ps},this.setURLModifier=function(Ps){return Is=Ps,this},this.addHandler=function(Ps,Ls){return Bs.push(Ps,Ls),this},this.removeHandler=function(Ps){var Ls=Bs.indexOf(Ps);return Ls!==-1&&Bs.splice(Ls,2),this},this.getHandler=function(Ps){for(var Ls=0,Rs=Bs.length;Ls<Rs;Ls+=2){var Os=Bs[Ls],Fs=Bs[Ls+1];if(Os.global&&(Os.lastIndex=0),Os.test(Ps))return Fs}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(ca){this.manager=ca!==void 0?ca:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(ca,ga){var _s=this;return new Promise(function(Ss,Ms){_s.load(ca,Ss,ga,Ms)})},parse:function(){},setCrossOrigin:function(ca){return this.crossOrigin=ca,this},setPath:function(ca){return this.path=ca,this},setResourcePath:function(ca){return this.resourcePath=ca,this},setRequestHeader:function(ca){return this.requestHeader=ca,this}});var loading={};function FileLoader(ca){Loader.call(this,ca)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(ca,ga,_s,Ss){ca===void 0&&(ca=""),this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var Ms=this,Cs=Cache.get(ca);if(Cs!==void 0)return Ms.manager.itemStart(ca),setTimeout(function(){ga&&ga(Cs),Ms.manager.itemEnd(ca)},0),Cs;if(loading[ca]!==void 0){loading[ca].push({onLoad:ga,onProgress:_s,onError:Ss});return}var Ts=/^data:(.*?)(;base64)?,(.*)$/,Is=ca.match(Ts);if(Is){var Bs=Is[1],Ps=!!Is[2],Ls=Is[3];Ls=decodeURIComponent(Ls),Ps&&(Ls=atob(Ls));try{var Rs,Os=(this.responseType||"").toLowerCase();switch(Os){case"arraybuffer":case"blob":for(var Fs=new Uint8Array(Ls.length),Vs=0;Vs<Ls.length;Vs++)Fs[Vs]=Ls.charCodeAt(Vs);Os==="blob"?Rs=new Blob([Fs.buffer],{type:Bs}):Rs=Fs.buffer;break;case"document":var ks=new DOMParser;Rs=ks.parseFromString(Ls,Bs);break;case"json":Rs=JSON.parse(Ls);break;default:Rs=Ls;break}setTimeout(function(){ga&&ga(Rs),Ms.manager.itemEnd(ca)},0)}catch($s){setTimeout(function(){Ss&&Ss($s),Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)},0)}}else{loading[ca]=[],loading[ca].push({onLoad:ga,onProgress:_s,onError:Ss});var Ns=new XMLHttpRequest;Ns.open("GET",ca,!0),Ns.addEventListener("load",function($s){var Gs=this.response,Us=loading[ca];if(delete loading[ca],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(ca,Gs);for(var Hs=0,zs=Us.length;Hs<zs;Hs++){var js=Us[Hs];js.onLoad&&js.onLoad(Gs)}Ms.manager.itemEnd(ca)}else{for(var Hs=0,zs=Us.length;Hs<zs;Hs++){var js=Us[Hs];js.onError&&js.onError($s)}Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)}},!1),Ns.addEventListener("progress",function($s){for(var Gs=loading[ca],Us=0,Hs=Gs.length;Us<Hs;Us++){var zs=Gs[Us];zs.onProgress&&zs.onProgress($s)}},!1),Ns.addEventListener("error",function($s){var Gs=loading[ca];delete loading[ca];for(var Us=0,Hs=Gs.length;Us<Hs;Us++){var zs=Gs[Us];zs.onError&&zs.onError($s)}Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)},!1),Ns.addEventListener("abort",function($s){var Gs=loading[ca];delete loading[ca];for(var Us=0,Hs=Gs.length;Us<Hs;Us++){var zs=Gs[Us];zs.onError&&zs.onError($s)}Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)},!1),this.responseType!==void 0&&(Ns.responseType=this.responseType),this.withCredentials!==void 0&&(Ns.withCredentials=this.withCredentials),Ns.overrideMimeType&&Ns.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Ds in this.requestHeader)Ns.setRequestHeader(Ds,this.requestHeader[Ds]);Ns.send(null)}return Ms.manager.itemStart(ca),Ns},setResponseType:function(ca){return this.responseType=ca,this},setWithCredentials:function(ca){return this.withCredentials=ca,this},setMimeType:function(ca){return this.mimeType=ca,this}});function AnimationLoader(ca){Loader.call(this,ca)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{ga(Ms.parse(JSON.parse(Ts)))}catch(Is){Ss?Ss(Is):console.error(Is),Ms.manager.itemError(ca)}},_s,Ss)},parse:function(ca){for(var ga=[],_s=0;_s<ca.length;_s++){var Ss=AnimationClip.parse(ca[_s]);ga.push(Ss)}return ga}});function CompressedTextureLoader(ca){Loader.call(this,ca)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=[],Ts=new CompressedTexture;Ts.image=Cs;var Is=new FileLoader(this.manager);Is.setPath(this.path),Is.setResponseType("arraybuffer");function Bs(Os){Is.load(ca[Os],function(Fs){var Vs=Ms.parse(Fs,!0);Cs[Os]={width:Vs.width,height:Vs.height,format:Vs.format,mipmaps:Vs.mipmaps},Ps+=1,Ps===6&&(Vs.mipmapCount===1&&(Ts.minFilter=LinearFilter),Ts.format=Vs.format,Ts.needsUpdate=!0,ga&&ga(Ts))},_s,Ss)}if(Array.isArray(ca))for(var Ps=0,Ls=0,Rs=ca.length;Ls<Rs;++Ls)Bs(Ls);else Is.load(ca,function(Os){var Fs=Ms.parse(Os,!0);if(Fs.isCubemap)for(var Vs=Fs.mipmaps.length/Fs.mipmapCount,ks=0;ks<Vs;ks++){Cs[ks]={mipmaps:[]};for(var Ns=0;Ns<Fs.mipmapCount;Ns++)Cs[ks].mipmaps.push(Fs.mipmaps[ks*Fs.mipmapCount+Ns]),Cs[ks].format=Fs.format,Cs[ks].width=Fs.width,Cs[ks].height=Fs.height}else Ts.image.width=Fs.width,Ts.image.height=Fs.height,Ts.mipmaps=Fs.mipmaps;Fs.mipmapCount===1&&(Ts.minFilter=LinearFilter),Ts.format=Fs.format,Ts.needsUpdate=!0,ga&&ga(Ts)},_s,Ss);return Ts}});function DataTextureLoader(ca){Loader.call(this,ca)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new DataTexture,Ts=new FileLoader(this.manager);return Ts.setResponseType("arraybuffer"),Ts.setPath(this.path),Ts.load(ca,function(Is){var Bs=Ms.parse(Is);!Bs||(Bs.image!==void 0?Cs.image=Bs.image:Bs.data!==void 0&&(Cs.image.width=Bs.width,Cs.image.height=Bs.height,Cs.image.data=Bs.data),Cs.wrapS=Bs.wrapS!==void 0?Bs.wrapS:ClampToEdgeWrapping,Cs.wrapT=Bs.wrapT!==void 0?Bs.wrapT:ClampToEdgeWrapping,Cs.magFilter=Bs.magFilter!==void 0?Bs.magFilter:LinearFilter,Cs.minFilter=Bs.minFilter!==void 0?Bs.minFilter:LinearFilter,Cs.anisotropy=Bs.anisotropy!==void 0?Bs.anisotropy:1,Bs.format!==void 0&&(Cs.format=Bs.format),Bs.type!==void 0&&(Cs.type=Bs.type),Bs.mipmaps!==void 0&&(Cs.mipmaps=Bs.mipmaps,Cs.minFilter=LinearMipmapLinearFilter),Bs.mipmapCount===1&&(Cs.minFilter=LinearFilter),Cs.needsUpdate=!0,ga&&ga(Cs,Bs))},_s,Ss),Cs}});function ImageLoader(ca){Loader.call(this,ca)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(ca,ga,_s,Ss){this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var Ms=this,Cs=Cache.get(ca);if(Cs!==void 0)return Ms.manager.itemStart(ca),setTimeout(function(){ga&&ga(Cs),Ms.manager.itemEnd(ca)},0),Cs;var Ts=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Is(){Ts.removeEventListener("load",Is,!1),Ts.removeEventListener("error",Bs,!1),Cache.add(ca,this),ga&&ga(this),Ms.manager.itemEnd(ca)}function Bs(Ps){Ts.removeEventListener("load",Is,!1),Ts.removeEventListener("error",Bs,!1),Ss&&Ss(Ps),Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)}return Ts.addEventListener("load",Is,!1),Ts.addEventListener("error",Bs,!1),ca.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Ts.crossOrigin=this.crossOrigin),Ms.manager.itemStart(ca),Ts.src=ca,Ts}});function CubeTextureLoader(ca){Loader.call(this,ca)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(ca,ga,_s,Ss){var Ms=new CubeTexture,Cs=new ImageLoader(this.manager);Cs.setCrossOrigin(this.crossOrigin),Cs.setPath(this.path);var Ts=0;function Is(Ps){Cs.load(ca[Ps],function(Ls){Ms.images[Ps]=Ls,Ts++,Ts===6&&(Ms.needsUpdate=!0,ga&&ga(Ms))},void 0,Ss)}for(var Bs=0;Bs<ca.length;++Bs)Is(Bs);return Ms}});function TextureLoader(ca){Loader.call(this,ca)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(ca,ga,_s,Ss){var Ms=new Texture,Cs=new ImageLoader(this.manager);return Cs.setCrossOrigin(this.crossOrigin),Cs.setPath(this.path),Cs.load(ca,function(Ts){Ms.image=Ts;var Is=ca.search(/\.jpe?g($|\?)/i)>0||ca.search(/^data\:image\/jpeg/)===0;Ms.format=Is?RGBFormat:RGBAFormat,Ms.needsUpdate=!0,ga!==void 0&&ga(Ms)},_s,Ss),Ms}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(ca,ga){var _s=this.getUtoTmapping(ca);return this.getPoint(_s,ga)},getPoints:function(ca){ca===void 0&&(ca=5);for(var ga=[],_s=0;_s<=ca;_s++)ga.push(this.getPoint(_s/ca));return ga},getSpacedPoints:function(ca){ca===void 0&&(ca=5);for(var ga=[],_s=0;_s<=ca;_s++)ga.push(this.getPointAt(_s/ca));return ga},getLength:function(){var ca=this.getLengths();return ca[ca.length-1]},getLengths:function(ca){if(ca===void 0&&(ca=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===ca+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var ga=[],_s,Ss=this.getPoint(0),Ms,Cs=0;for(ga.push(0),Ms=1;Ms<=ca;Ms++)_s=this.getPoint(Ms/ca),Cs+=_s.distanceTo(Ss),ga.push(Cs),Ss=_s;return this.cacheArcLengths=ga,ga},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(ca,ga){var _s=this.getLengths(),Ss=0,Ms=_s.length,Cs;ga?Cs=ga:Cs=ca*_s[Ms-1];for(var Ts=0,Is=Ms-1,Bs;Ts<=Is;)if(Ss=Math.floor(Ts+(Is-Ts)/2),Bs=_s[Ss]-Cs,Bs<0)Ts=Ss+1;else if(Bs>0)Is=Ss-1;else{Is=Ss;break}if(Ss=Is,_s[Ss]===Cs)return Ss/(Ms-1);var Ps=_s[Ss],Ls=_s[Ss+1],Rs=Ls-Ps,Os=(Cs-Ps)/Rs,Fs=(Ss+Os)/(Ms-1);return Fs},getTangent:function(ca,ga){var _s=1e-4,Ss=ca-_s,Ms=ca+_s;Ss<0&&(Ss=0),Ms>1&&(Ms=1);var Cs=this.getPoint(Ss),Ts=this.getPoint(Ms),Is=ga||(Cs.isVector2?new Vector2:new Vector3);return Is.copy(Ts).sub(Cs).normalize(),Is},getTangentAt:function(ca,ga){var _s=this.getUtoTmapping(ca);return this.getTangent(_s,ga)},computeFrenetFrames:function(ca,ga){var _s=new Vector3,Ss=[],Ms=[],Cs=[],Ts=new Vector3,Is=new Matrix4,Bs,Ps,Ls;for(Bs=0;Bs<=ca;Bs++)Ps=Bs/ca,Ss[Bs]=this.getTangentAt(Ps,new Vector3),Ss[Bs].normalize();Ms[0]=new Vector3,Cs[0]=new Vector3;var Rs=Number.MAX_VALUE,Os=Math.abs(Ss[0].x),Fs=Math.abs(Ss[0].y),Vs=Math.abs(Ss[0].z);for(Os<=Rs&&(Rs=Os,_s.set(1,0,0)),Fs<=Rs&&(Rs=Fs,_s.set(0,1,0)),Vs<=Rs&&_s.set(0,0,1),Ts.crossVectors(Ss[0],_s).normalize(),Ms[0].crossVectors(Ss[0],Ts),Cs[0].crossVectors(Ss[0],Ms[0]),Bs=1;Bs<=ca;Bs++)Ms[Bs]=Ms[Bs-1].clone(),Cs[Bs]=Cs[Bs-1].clone(),Ts.crossVectors(Ss[Bs-1],Ss[Bs]),Ts.length()>Number.EPSILON&&(Ts.normalize(),Ls=Math.acos(MathUtils.clamp(Ss[Bs-1].dot(Ss[Bs]),-1,1)),Ms[Bs].applyMatrix4(Is.makeRotationAxis(Ts,Ls))),Cs[Bs].crossVectors(Ss[Bs],Ms[Bs]);if(ga===!0)for(Ls=Math.acos(MathUtils.clamp(Ms[0].dot(Ms[ca]),-1,1)),Ls/=ca,Ss[0].dot(Ts.crossVectors(Ms[0],Ms[ca]))>0&&(Ls=-Ls),Bs=1;Bs<=ca;Bs++)Ms[Bs].applyMatrix4(Is.makeRotationAxis(Ss[Bs],Ls*Bs)),Cs[Bs].crossVectors(Ss[Bs],Ms[Bs]);return{tangents:Ss,normals:Ms,binormals:Cs}},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.arcLengthDivisions=ca.arcLengthDivisions,this},toJSON:function(){var ca={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return ca.arcLengthDivisions=this.arcLengthDivisions,ca.type=this.type,ca},fromJSON:function(ca){return this.arcLengthDivisions=ca.arcLengthDivisions,this}});function EllipseCurve(ca,ga,_s,Ss,Ms,Cs,Ts,Is){Curve.call(this),this.type="EllipseCurve",this.aX=ca||0,this.aY=ga||0,this.xRadius=_s||1,this.yRadius=Ss||1,this.aStartAngle=Ms||0,this.aEndAngle=Cs||2*Math.PI,this.aClockwise=Ts||!1,this.aRotation=Is||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(ca,ga){for(var _s=ga||new Vector2,Ss=Math.PI*2,Ms=this.aEndAngle-this.aStartAngle,Cs=Math.abs(Ms)<Number.EPSILON;Ms<0;)Ms+=Ss;for(;Ms>Ss;)Ms-=Ss;Ms<Number.EPSILON&&(Cs?Ms=0:Ms=Ss),this.aClockwise===!0&&!Cs&&(Ms===Ss?Ms=-Ss:Ms=Ms-Ss);var Ts=this.aStartAngle+ca*Ms,Is=this.aX+this.xRadius*Math.cos(Ts),Bs=this.aY+this.yRadius*Math.sin(Ts);if(this.aRotation!==0){var Ps=Math.cos(this.aRotation),Ls=Math.sin(this.aRotation),Rs=Is-this.aX,Os=Bs-this.aY;Is=Rs*Ps-Os*Ls+this.aX,Bs=Rs*Ls+Os*Ps+this.aY}return _s.set(Is,Bs)};EllipseCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.aX=ca.aX,this.aY=ca.aY,this.xRadius=ca.xRadius,this.yRadius=ca.yRadius,this.aStartAngle=ca.aStartAngle,this.aEndAngle=ca.aEndAngle,this.aClockwise=ca.aClockwise,this.aRotation=ca.aRotation,this};EllipseCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.aX=this.aX,ca.aY=this.aY,ca.xRadius=this.xRadius,ca.yRadius=this.yRadius,ca.aStartAngle=this.aStartAngle,ca.aEndAngle=this.aEndAngle,ca.aClockwise=this.aClockwise,ca.aRotation=this.aRotation,ca};EllipseCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.aX=ca.aX,this.aY=ca.aY,this.xRadius=ca.xRadius,this.yRadius=ca.yRadius,this.aStartAngle=ca.aStartAngle,this.aEndAngle=ca.aEndAngle,this.aClockwise=ca.aClockwise,this.aRotation=ca.aRotation,this};function ArcCurve(ca,ga,_s,Ss,Ms,Cs){EllipseCurve.call(this,ca,ga,_s,_s,Ss,Ms,Cs),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var ca=0,ga=0,_s=0,Ss=0;function Ms(Cs,Ts,Is,Bs){ca=Cs,ga=Is,_s=-3*Cs+3*Ts-2*Is-Bs,Ss=2*Cs-2*Ts+Is+Bs}return{initCatmullRom:function(Cs,Ts,Is,Bs,Ps){Ms(Ts,Is,Ps*(Is-Cs),Ps*(Bs-Ts))},initNonuniformCatmullRom:function(Cs,Ts,Is,Bs,Ps,Ls,Rs){var Os=(Ts-Cs)/Ps-(Is-Cs)/(Ps+Ls)+(Is-Ts)/Ls,Fs=(Is-Ts)/Ls-(Bs-Ts)/(Ls+Rs)+(Bs-Is)/Rs;Os*=Ls,Fs*=Ls,Ms(Ts,Is,Os,Fs)},calc:function(Cs){var Ts=Cs*Cs,Is=Ts*Cs;return ca+ga*Cs+_s*Ts+Ss*Is}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(ca,ga,_s,Ss){Curve.call(this),this.type="CatmullRomCurve3",this.points=ca||[],this.closed=ga||!1,this.curveType=_s||"centripetal",this.tension=Ss||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3,Ss=this.points,Ms=Ss.length,Cs=(Ms-(this.closed?0:1))*ca,Ts=Math.floor(Cs),Is=Cs-Ts;this.closed?Ts+=Ts>0?0:(Math.floor(Math.abs(Ts)/Ms)+1)*Ms:Is===0&&Ts===Ms-1&&(Ts=Ms-2,Is=1);var Bs,Ps,Ls,Rs;if(this.closed||Ts>0?Bs=Ss[(Ts-1)%Ms]:(tmp.subVectors(Ss[0],Ss[1]).add(Ss[0]),Bs=tmp),Ps=Ss[Ts%Ms],Ls=Ss[(Ts+1)%Ms],this.closed||Ts+2<Ms?Rs=Ss[(Ts+2)%Ms]:(tmp.subVectors(Ss[Ms-1],Ss[Ms-2]).add(Ss[Ms-1]),Rs=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Os=this.curveType==="chordal"?.5:.25,Fs=Math.pow(Bs.distanceToSquared(Ps),Os),Vs=Math.pow(Ps.distanceToSquared(Ls),Os),ks=Math.pow(Ls.distanceToSquared(Rs),Os);Vs<1e-4&&(Vs=1),Fs<1e-4&&(Fs=Vs),ks<1e-4&&(ks=Vs),px.initNonuniformCatmullRom(Bs.x,Ps.x,Ls.x,Rs.x,Fs,Vs,ks),py.initNonuniformCatmullRom(Bs.y,Ps.y,Ls.y,Rs.y,Fs,Vs,ks),pz.initNonuniformCatmullRom(Bs.z,Ps.z,Ls.z,Rs.z,Fs,Vs,ks)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Bs.x,Ps.x,Ls.x,Rs.x,this.tension),py.initCatmullRom(Bs.y,Ps.y,Ls.y,Rs.y,this.tension),pz.initCatmullRom(Bs.z,Ps.z,Ls.z,Rs.z,this.tension));return _s.set(px.calc(Is),py.calc(Is),pz.calc(Is)),_s};CatmullRomCurve3.prototype.copy=function(ca){Curve.prototype.copy.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(Ss.clone())}return this.closed=ca.closed,this.curveType=ca.curveType,this.tension=ca.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);ca.points=[];for(var ga=0,_s=this.points.length;ga<_s;ga++){var Ss=this.points[ga];ca.points.push(Ss.toArray())}return ca.closed=this.closed,ca.curveType=this.curveType,ca.tension=this.tension,ca};CatmullRomCurve3.prototype.fromJSON=function(ca){Curve.prototype.fromJSON.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(new Vector3().fromArray(Ss))}return this.closed=ca.closed,this.curveType=ca.curveType,this.tension=ca.tension,this};function CatmullRom(ca,ga,_s,Ss,Ms){var Cs=(Ss-ga)*.5,Ts=(Ms-_s)*.5,Is=ca*ca,Bs=ca*Is;return(2*_s-2*Ss+Cs+Ts)*Bs+(-3*_s+3*Ss-2*Cs-Ts)*Is+Cs*ca+_s}function QuadraticBezierP0(ca,ga){var _s=1-ca;return _s*_s*ga}function QuadraticBezierP1(ca,ga){return 2*(1-ca)*ca*ga}function QuadraticBezierP2(ca,ga){return ca*ca*ga}function QuadraticBezier(ca,ga,_s,Ss){return QuadraticBezierP0(ca,ga)+QuadraticBezierP1(ca,_s)+QuadraticBezierP2(ca,Ss)}function CubicBezierP0(ca,ga){var _s=1-ca;return _s*_s*_s*ga}function CubicBezierP1(ca,ga){var _s=1-ca;return 3*_s*_s*ca*ga}function CubicBezierP2(ca,ga){return 3*(1-ca)*ca*ca*ga}function CubicBezierP3(ca,ga){return ca*ca*ca*ga}function CubicBezier(ca,ga,_s,Ss,Ms){return CubicBezierP0(ca,ga)+CubicBezierP1(ca,_s)+CubicBezierP2(ca,Ss)+CubicBezierP3(ca,Ms)}function CubicBezierCurve(ca,ga,_s,Ss){Curve.call(this),this.type="CubicBezierCurve",this.v0=ca||new Vector2,this.v1=ga||new Vector2,this.v2=_s||new Vector2,this.v3=Ss||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2,Ss=this.v0,Ms=this.v1,Cs=this.v2,Ts=this.v3;return _s.set(CubicBezier(ca,Ss.x,Ms.x,Cs.x,Ts.x),CubicBezier(ca,Ss.y,Ms.y,Cs.y,Ts.y)),_s};CubicBezierCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this.v3.copy(ca.v3),this};CubicBezierCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca.v3=this.v3.toArray(),ca};CubicBezierCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this.v3.fromArray(ca.v3),this};function CubicBezierCurve3(ca,ga,_s,Ss){Curve.call(this),this.type="CubicBezierCurve3",this.v0=ca||new Vector3,this.v1=ga||new Vector3,this.v2=_s||new Vector3,this.v3=Ss||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3,Ss=this.v0,Ms=this.v1,Cs=this.v2,Ts=this.v3;return _s.set(CubicBezier(ca,Ss.x,Ms.x,Cs.x,Ts.x),CubicBezier(ca,Ss.y,Ms.y,Cs.y,Ts.y),CubicBezier(ca,Ss.z,Ms.z,Cs.z,Ts.z)),_s};CubicBezierCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this.v3.copy(ca.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca.v3=this.v3.toArray(),ca};CubicBezierCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this.v3.fromArray(ca.v3),this};function LineCurve(ca,ga){Curve.call(this),this.type="LineCurve",this.v1=ca||new Vector2,this.v2=ga||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2;return ca===1?_s.copy(this.v2):(_s.copy(this.v2).sub(this.v1),_s.multiplyScalar(ca).add(this.v1)),_s};LineCurve.prototype.getPointAt=function(ca,ga){return this.getPoint(ca,ga)};LineCurve.prototype.getTangent=function(ca,ga){var _s=ga||new Vector2,_s=_s.copy(this.v2).sub(this.v1).normalize();return _s};LineCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};LineCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};LineCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function LineCurve3(ca,ga){Curve.call(this),this.type="LineCurve3",this.v1=ca||new Vector3,this.v2=ga||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3;return ca===1?_s.copy(this.v2):(_s.copy(this.v2).sub(this.v1),_s.multiplyScalar(ca).add(this.v1)),_s};LineCurve3.prototype.getPointAt=function(ca,ga){return this.getPoint(ca,ga)};LineCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};LineCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};LineCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function QuadraticBezierCurve(ca,ga,_s){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=ca||new Vector2,this.v1=ga||new Vector2,this.v2=_s||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2,Ss=this.v0,Ms=this.v1,Cs=this.v2;return _s.set(QuadraticBezier(ca,Ss.x,Ms.x,Cs.x),QuadraticBezier(ca,Ss.y,Ms.y,Cs.y)),_s};QuadraticBezierCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};QuadraticBezierCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function QuadraticBezierCurve3(ca,ga,_s){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=ca||new Vector3,this.v1=ga||new Vector3,this.v2=_s||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3,Ss=this.v0,Ms=this.v1,Cs=this.v2;return _s.set(QuadraticBezier(ca,Ss.x,Ms.x,Cs.x),QuadraticBezier(ca,Ss.y,Ms.y,Cs.y),QuadraticBezier(ca,Ss.z,Ms.z,Cs.z)),_s};QuadraticBezierCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};QuadraticBezierCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function SplineCurve(ca){Curve.call(this),this.type="SplineCurve",this.points=ca||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2,Ss=this.points,Ms=(Ss.length-1)*ca,Cs=Math.floor(Ms),Ts=Ms-Cs,Is=Ss[Cs===0?Cs:Cs-1],Bs=Ss[Cs],Ps=Ss[Cs>Ss.length-2?Ss.length-1:Cs+1],Ls=Ss[Cs>Ss.length-3?Ss.length-1:Cs+2];return _s.set(CatmullRom(Ts,Is.x,Bs.x,Ps.x,Ls.x),CatmullRom(Ts,Is.y,Bs.y,Ps.y,Ls.y)),_s};SplineCurve.prototype.copy=function(ca){Curve.prototype.copy.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(Ss.clone())}return this};SplineCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);ca.points=[];for(var ga=0,_s=this.points.length;ga<_s;ga++){var Ss=this.points[ga];ca.points.push(Ss.toArray())}return ca};SplineCurve.prototype.fromJSON=function(ca){Curve.prototype.fromJSON.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(new Vector2().fromArray(Ss))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(ca){this.curves.push(ca)},closePath:function(){var ca=this.curves[0].getPoint(0),ga=this.curves[this.curves.length-1].getPoint(1);ca.equals(ga)||this.curves.push(new LineCurve(ga,ca))},getPoint:function(ca){for(var ga=ca*this.getLength(),_s=this.getCurveLengths(),Ss=0;Ss<_s.length;){if(_s[Ss]>=ga){var Ms=_s[Ss]-ga,Cs=this.curves[Ss],Ts=Cs.getLength(),Is=Ts===0?0:1-Ms/Ts;return Cs.getPointAt(Is)}Ss++}return null},getLength:function(){var ca=this.getCurveLengths();return ca[ca.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var ca=[],ga=0,_s=0,Ss=this.curves.length;_s<Ss;_s++)ga+=this.curves[_s].getLength(),ca.push(ga);return this.cacheLengths=ca,ca},getSpacedPoints:function(ca){ca===void 0&&(ca=40);for(var ga=[],_s=0;_s<=ca;_s++)ga.push(this.getPoint(_s/ca));return this.autoClose&&ga.push(ga[0]),ga},getPoints:function(ca){ca=ca||12;for(var ga=[],_s,Ss=0,Ms=this.curves;Ss<Ms.length;Ss++)for(var Cs=Ms[Ss],Ts=Cs&&Cs.isEllipseCurve?ca*2:Cs&&(Cs.isLineCurve||Cs.isLineCurve3)?1:Cs&&Cs.isSplineCurve?ca*Cs.points.length:ca,Is=Cs.getPoints(Ts),Bs=0;Bs<Is.length;Bs++){var Ps=Is[Bs];_s&&_s.equals(Ps)||(ga.push(Ps),_s=Ps)}return this.autoClose&&ga.length>1&&!ga[ga.length-1].equals(ga[0])&&ga.push(ga[0]),ga},copy:function(ca){Curve.prototype.copy.call(this,ca),this.curves=[];for(var ga=0,_s=ca.curves.length;ga<_s;ga++){var Ss=ca.curves[ga];this.curves.push(Ss.clone())}return this.autoClose=ca.autoClose,this},toJSON:function(){var ca=Curve.prototype.toJSON.call(this);ca.autoClose=this.autoClose,ca.curves=[];for(var ga=0,_s=this.curves.length;ga<_s;ga++){var Ss=this.curves[ga];ca.curves.push(Ss.toJSON())}return ca},fromJSON:function(ca){Curve.prototype.fromJSON.call(this,ca),this.autoClose=ca.autoClose,this.curves=[];for(var ga=0,_s=ca.curves.length;ga<_s;ga++){var Ss=ca.curves[ga];this.curves.push(new Curves[Ss.type]().fromJSON(Ss))}return this}});function Path(ca){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,ca&&this.setFromPoints(ca)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(ca){this.moveTo(ca[0].x,ca[0].y);for(var ga=1,_s=ca.length;ga<_s;ga++)this.lineTo(ca[ga].x,ca[ga].y);return this},moveTo:function(ca,ga){return this.currentPoint.set(ca,ga),this},lineTo:function(ca,ga){var _s=new LineCurve(this.currentPoint.clone(),new Vector2(ca,ga));return this.curves.push(_s),this.currentPoint.set(ca,ga),this},quadraticCurveTo:function(ca,ga,_s,Ss){var Ms=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(ca,ga),new Vector2(_s,Ss));return this.curves.push(Ms),this.currentPoint.set(_s,Ss),this},bezierCurveTo:function(ca,ga,_s,Ss,Ms,Cs){var Ts=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(ca,ga),new Vector2(_s,Ss),new Vector2(Ms,Cs));return this.curves.push(Ts),this.currentPoint.set(Ms,Cs),this},splineThru:function(ca){var ga=[this.currentPoint.clone()].concat(ca),_s=new SplineCurve(ga);return this.curves.push(_s),this.currentPoint.copy(ca[ca.length-1]),this},arc:function(ca,ga,_s,Ss,Ms,Cs){var Ts=this.currentPoint.x,Is=this.currentPoint.y;return this.absarc(ca+Ts,ga+Is,_s,Ss,Ms,Cs),this},absarc:function(ca,ga,_s,Ss,Ms,Cs){return this.absellipse(ca,ga,_s,_s,Ss,Ms,Cs),this},ellipse:function(ca,ga,_s,Ss,Ms,Cs,Ts,Is){var Bs=this.currentPoint.x,Ps=this.currentPoint.y;return this.absellipse(ca+Bs,ga+Ps,_s,Ss,Ms,Cs,Ts,Is),this},absellipse:function(ca,ga,_s,Ss,Ms,Cs,Ts,Is){var Bs=new EllipseCurve(ca,ga,_s,Ss,Ms,Cs,Ts,Is);if(this.curves.length>0){var Ps=Bs.getPoint(0);Ps.equals(this.currentPoint)||this.lineTo(Ps.x,Ps.y)}this.curves.push(Bs);var Ls=Bs.getPoint(1);return this.currentPoint.copy(Ls),this},copy:function(ca){return CurvePath.prototype.copy.call(this,ca),this.currentPoint.copy(ca.currentPoint),this},toJSON:function(){var ca=CurvePath.prototype.toJSON.call(this);return ca.currentPoint=this.currentPoint.toArray(),ca},fromJSON:function(ca){return CurvePath.prototype.fromJSON.call(this,ca),this.currentPoint.fromArray(ca.currentPoint),this}});function Shape(ca){Path.call(this,ca),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(ca){for(var ga=[],_s=0,Ss=this.holes.length;_s<Ss;_s++)ga[_s]=this.holes[_s].getPoints(ca);return ga},extractPoints:function(ca){return{shape:this.getPoints(ca),holes:this.getPointsHoles(ca)}},copy:function(ca){Path.prototype.copy.call(this,ca),this.holes=[];for(var ga=0,_s=ca.holes.length;ga<_s;ga++){var Ss=ca.holes[ga];this.holes.push(Ss.clone())}return this},toJSON:function(){var ca=Path.prototype.toJSON.call(this);ca.uuid=this.uuid,ca.holes=[];for(var ga=0,_s=this.holes.length;ga<_s;ga++){var Ss=this.holes[ga];ca.holes.push(Ss.toJSON())}return ca},fromJSON:function(ca){Path.prototype.fromJSON.call(this,ca),this.uuid=ca.uuid,this.holes=[];for(var ga=0,_s=ca.holes.length;ga<_s;ga++){var Ss=ca.holes[ga];this.holes.push(new Path().fromJSON(Ss))}return this}});function Light(ca,ga){Object3D.call(this),this.type="Light",this.color=new Color(ca),this.intensity=ga!==void 0?ga:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(ca){return Object3D.prototype.copy.call(this,ca),this.color.copy(ca.color),this.intensity=ca.intensity,this},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.color=this.color.getHex(),ga.object.intensity=this.intensity,this.groundColor!==void 0&&(ga.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(ga.object.distance=this.distance),this.angle!==void 0&&(ga.object.angle=this.angle),this.decay!==void 0&&(ga.object.decay=this.decay),this.penumbra!==void 0&&(ga.object.penumbra=this.penumbra),this.shadow!==void 0&&(ga.object.shadow=this.shadow.toJSON()),ga}});function HemisphereLight(ca,ga,_s){Light.call(this,ca,_s),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(ga)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.groundColor.copy(ca.groundColor),this}});function LightShadow(ca){this.camera=ca,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(ca){var ga=this.camera,_s=this.matrix,Ss=this._projScreenMatrix,Ms=this._lookTarget,Cs=this._lightPositionWorld;Cs.setFromMatrixPosition(ca.matrixWorld),ga.position.copy(Cs),Ms.setFromMatrixPosition(ca.target.matrixWorld),ga.lookAt(Ms),ga.updateMatrixWorld(),Ss.multiplyMatrices(ga.projectionMatrix,ga.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ss),_s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_s.multiply(ga.projectionMatrix),_s.multiply(ga.matrixWorldInverse)},getViewport:function(ca){return this._viewports[ca]},getFrameExtents:function(){return this._frameExtents},copy:function(ca){return this.camera=ca.camera.clone(),this.bias=ca.bias,this.radius=ca.radius,this.mapSize.copy(ca.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var ca={};return this.bias!==0&&(ca.bias=this.bias),this.radius!==1&&(ca.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(ca.mapSize=this.mapSize.toArray()),ca.camera=this.camera.toJSON(!1).object,delete ca.camera.matrix,ca}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(ca){var ga=this.camera,_s=MathUtils.RAD2DEG*2*ca.angle,Ss=this.mapSize.width/this.mapSize.height,Ms=ca.distance||ga.far;(_s!==ga.fov||Ss!==ga.aspect||Ms!==ga.far)&&(ga.fov=_s,ga.aspect=Ss,ga.far=Ms,ga.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,ca)}});function SpotLight(ca,ga,_s,Ss,Ms,Cs){Light.call(this,ca,ga),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Ts){this.intensity=Ts/Math.PI}}),this.distance=_s!==void 0?_s:0,this.angle=Ss!==void 0?Ss:Math.PI/3,this.penumbra=Ms!==void 0?Ms:0,this.decay=Cs!==void 0?Cs:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.distance=ca.distance,this.angle=ca.angle,this.penumbra=ca.penumbra,this.decay=ca.decay,this.target=ca.target.clone(),this.shadow=ca.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(ca,ga){ga===void 0&&(ga=0);var _s=this.camera,Ss=this.matrix,Ms=this._lightPositionWorld,Cs=this._lookTarget,Ts=this._projScreenMatrix;Ms.setFromMatrixPosition(ca.matrixWorld),_s.position.copy(Ms),Cs.copy(_s.position),Cs.add(this._cubeDirections[ga]),_s.up.copy(this._cubeUps[ga]),_s.lookAt(Cs),_s.updateMatrixWorld(),Ss.makeTranslation(-Ms.x,-Ms.y,-Ms.z),Ts.multiplyMatrices(_s.projectionMatrix,_s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ts)}});function PointLight(ca,ga,_s,Ss){Light.call(this,ca,ga),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Ms){this.intensity=Ms/(4*Math.PI)}}),this.distance=_s!==void 0?_s:0,this.decay=Ss!==void 0?Ss:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.distance=ca.distance,this.decay=ca.decay,this.shadow=ca.shadow.clone(),this}});function OrthographicCamera(ca,ga,_s,Ss,Ms,Cs){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=ca!==void 0?ca:-1,this.right=ga!==void 0?ga:1,this.top=_s!==void 0?_s:1,this.bottom=Ss!==void 0?Ss:-1,this.near=Ms!==void 0?Ms:.1,this.far=Cs!==void 0?Cs:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(ca,ga){return Camera.prototype.copy.call(this,ca,ga),this.left=ca.left,this.right=ca.right,this.top=ca.top,this.bottom=ca.bottom,this.near=ca.near,this.far=ca.far,this.zoom=ca.zoom,this.view=ca.view===null?null:Object.assign({},ca.view),this},setViewOffset:function(ca,ga,_s,Ss,Ms,Cs){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ca,this.view.fullHeight=ga,this.view.offsetX=_s,this.view.offsetY=Ss,this.view.width=Ms,this.view.height=Cs,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var ca=(this.right-this.left)/(2*this.zoom),ga=(this.top-this.bottom)/(2*this.zoom),_s=(this.right+this.left)/2,Ss=(this.top+this.bottom)/2,Ms=_s-ca,Cs=_s+ca,Ts=Ss+ga,Is=Ss-ga;if(this.view!==null&&this.view.enabled){var Bs=(this.right-this.left)/this.view.fullWidth/this.zoom,Ps=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Ms+=Bs*this.view.offsetX,Cs=Ms+Bs*this.view.width,Ts-=Ps*this.view.offsetY,Is=Ts-Ps*this.view.height}this.projectionMatrix.makeOrthographic(Ms,Cs,Ts,Is,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.zoom=this.zoom,ga.object.left=this.left,ga.object.right=this.right,ga.object.top=this.top,ga.object.bottom=this.bottom,ga.object.near=this.near,ga.object.far=this.far,this.view!==null&&(ga.object.view=Object.assign({},this.view)),ga}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(ca){LightShadow.prototype.updateMatrices.call(this,ca)}});function DirectionalLight(ca,ga){Light.call(this,ca,ga),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.target=ca.target.clone(),this.shadow=ca.shadow.clone(),this}});function AmbientLight(ca,ga){Light.call(this,ca,ga),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(ca,ga,_s,Ss){Light.call(this,ca,ga),this.type="RectAreaLight",this.width=_s!==void 0?_s:10,this.height=Ss!==void 0?Ss:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.width=ca.width,this.height=ca.height,this},toJSON:function(ca){var ga=Light.prototype.toJSON.call(this,ca);return ga.object.width=this.width,ga.object.height=this.height,ga}});function SphericalHarmonics3(){this.coefficients=[];for(var ca=0;ca<9;ca++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].copy(ca[ga]);return this},zero:function(){for(var ca=0;ca<9;ca++)this.coefficients[ca].set(0,0,0);return this},getAt:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z,Cs=this.coefficients;return ga.copy(Cs[0]).multiplyScalar(.282095),ga.addScaledVector(Cs[1],.488603*Ss),ga.addScaledVector(Cs[2],.488603*Ms),ga.addScaledVector(Cs[3],.488603*_s),ga.addScaledVector(Cs[4],1.092548*(_s*Ss)),ga.addScaledVector(Cs[5],1.092548*(Ss*Ms)),ga.addScaledVector(Cs[6],.315392*(3*Ms*Ms-1)),ga.addScaledVector(Cs[7],1.092548*(_s*Ms)),ga.addScaledVector(Cs[8],.546274*(_s*_s-Ss*Ss)),ga},getIrradianceAt:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z,Cs=this.coefficients;return ga.copy(Cs[0]).multiplyScalar(.886227),ga.addScaledVector(Cs[1],2*.511664*Ss),ga.addScaledVector(Cs[2],2*.511664*Ms),ga.addScaledVector(Cs[3],2*.511664*_s),ga.addScaledVector(Cs[4],2*.429043*_s*Ss),ga.addScaledVector(Cs[5],2*.429043*Ss*Ms),ga.addScaledVector(Cs[6],.743125*Ms*Ms-.247708),ga.addScaledVector(Cs[7],2*.429043*_s*Ms),ga.addScaledVector(Cs[8],.429043*(_s*_s-Ss*Ss)),ga},add:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].add(ca.coefficients[ga]);return this},addScaledSH:function(ca,ga){for(var _s=0;_s<9;_s++)this.coefficients[_s].addScaledVector(ca.coefficients[_s],ga);return this},scale:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].multiplyScalar(ca);return this},lerp:function(ca,ga){for(var _s=0;_s<9;_s++)this.coefficients[_s].lerp(ca.coefficients[_s],ga);return this},equals:function(ca){for(var ga=0;ga<9;ga++)if(!this.coefficients[ga].equals(ca.coefficients[ga]))return!1;return!0},copy:function(ca){return this.set(ca.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var _s=this.coefficients,Ss=0;Ss<9;Ss++)_s[Ss].fromArray(ca,ga+Ss*3);return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);for(var _s=this.coefficients,Ss=0;Ss<9;Ss++)_s[Ss].toArray(ca,ga+Ss*3);return ca}});Object.assign(SphericalHarmonics3,{getBasisAt:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z;ga[0]=.282095,ga[1]=.488603*Ss,ga[2]=.488603*Ms,ga[3]=.488603*_s,ga[4]=1.092548*_s*Ss,ga[5]=1.092548*Ss*Ms,ga[6]=.315392*(3*Ms*Ms-1),ga[7]=1.092548*_s*Ms,ga[8]=.546274*(_s*_s-Ss*Ss)}});function LightProbe(ca,ga){Light.call(this,void 0,ga),this.type="LightProbe",this.sh=ca!==void 0?ca:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.sh.copy(ca.sh),this},fromJSON:function(ca){return this.intensity=ca.intensity,this.sh.fromArray(ca.sh),this},toJSON:function(ca){var ga=Light.prototype.toJSON.call(this,ca);return ga.object.sh=this.sh.toArray(),ga}});function MaterialLoader(ca){Loader.call(this,ca),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{ga(Ms.parse(JSON.parse(Ts)))}catch(Is){Ss?Ss(Is):console.error(Is),Ms.manager.itemError(ca)}},_s,Ss)},parse:function(ca){var ga=this.textures;function _s(Bs){return ga[Bs]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Bs),ga[Bs]}var Ss=new Materials[ca.type];if(ca.uuid!==void 0&&(Ss.uuid=ca.uuid),ca.name!==void 0&&(Ss.name=ca.name),ca.color!==void 0&&Ss.color.setHex(ca.color),ca.roughness!==void 0&&(Ss.roughness=ca.roughness),ca.metalness!==void 0&&(Ss.metalness=ca.metalness),ca.sheen!==void 0&&(Ss.sheen=new Color().setHex(ca.sheen)),ca.emissive!==void 0&&Ss.emissive.setHex(ca.emissive),ca.specular!==void 0&&Ss.specular.setHex(ca.specular),ca.shininess!==void 0&&(Ss.shininess=ca.shininess),ca.clearcoat!==void 0&&(Ss.clearcoat=ca.clearcoat),ca.clearcoatRoughness!==void 0&&(Ss.clearcoatRoughness=ca.clearcoatRoughness),ca.fog!==void 0&&(Ss.fog=ca.fog),ca.flatShading!==void 0&&(Ss.flatShading=ca.flatShading),ca.blending!==void 0&&(Ss.blending=ca.blending),ca.combine!==void 0&&(Ss.combine=ca.combine),ca.side!==void 0&&(Ss.side=ca.side),ca.opacity!==void 0&&(Ss.opacity=ca.opacity),ca.transparent!==void 0&&(Ss.transparent=ca.transparent),ca.alphaTest!==void 0&&(Ss.alphaTest=ca.alphaTest),ca.depthTest!==void 0&&(Ss.depthTest=ca.depthTest),ca.depthWrite!==void 0&&(Ss.depthWrite=ca.depthWrite),ca.colorWrite!==void 0&&(Ss.colorWrite=ca.colorWrite),ca.stencilWrite!==void 0&&(Ss.stencilWrite=ca.stencilWrite),ca.stencilWriteMask!==void 0&&(Ss.stencilWriteMask=ca.stencilWriteMask),ca.stencilFunc!==void 0&&(Ss.stencilFunc=ca.stencilFunc),ca.stencilRef!==void 0&&(Ss.stencilRef=ca.stencilRef),ca.stencilFuncMask!==void 0&&(Ss.stencilFuncMask=ca.stencilFuncMask),ca.stencilFail!==void 0&&(Ss.stencilFail=ca.stencilFail),ca.stencilZFail!==void 0&&(Ss.stencilZFail=ca.stencilZFail),ca.stencilZPass!==void 0&&(Ss.stencilZPass=ca.stencilZPass),ca.wireframe!==void 0&&(Ss.wireframe=ca.wireframe),ca.wireframeLinewidth!==void 0&&(Ss.wireframeLinewidth=ca.wireframeLinewidth),ca.wireframeLinecap!==void 0&&(Ss.wireframeLinecap=ca.wireframeLinecap),ca.wireframeLinejoin!==void 0&&(Ss.wireframeLinejoin=ca.wireframeLinejoin),ca.rotation!==void 0&&(Ss.rotation=ca.rotation),ca.linewidth!==1&&(Ss.linewidth=ca.linewidth),ca.dashSize!==void 0&&(Ss.dashSize=ca.dashSize),ca.gapSize!==void 0&&(Ss.gapSize=ca.gapSize),ca.scale!==void 0&&(Ss.scale=ca.scale),ca.polygonOffset!==void 0&&(Ss.polygonOffset=ca.polygonOffset),ca.polygonOffsetFactor!==void 0&&(Ss.polygonOffsetFactor=ca.polygonOffsetFactor),ca.polygonOffsetUnits!==void 0&&(Ss.polygonOffsetUnits=ca.polygonOffsetUnits),ca.skinning!==void 0&&(Ss.skinning=ca.skinning),ca.morphTargets!==void 0&&(Ss.morphTargets=ca.morphTargets),ca.morphNormals!==void 0&&(Ss.morphNormals=ca.morphNormals),ca.dithering!==void 0&&(Ss.dithering=ca.dithering),ca.vertexTangents!==void 0&&(Ss.vertexTangents=ca.vertexTangents),ca.visible!==void 0&&(Ss.visible=ca.visible),ca.toneMapped!==void 0&&(Ss.toneMapped=ca.toneMapped),ca.userData!==void 0&&(Ss.userData=ca.userData),ca.vertexColors!==void 0&&(typeof ca.vertexColors=="number"?Ss.vertexColors=ca.vertexColors>0:Ss.vertexColors=ca.vertexColors),ca.uniforms!==void 0)for(var Ms in ca.uniforms){var Cs=ca.uniforms[Ms];switch(Ss.uniforms[Ms]={},Cs.type){case"t":Ss.uniforms[Ms].value=_s(Cs.value);break;case"c":Ss.uniforms[Ms].value=new Color().setHex(Cs.value);break;case"v2":Ss.uniforms[Ms].value=new Vector2().fromArray(Cs.value);break;case"v3":Ss.uniforms[Ms].value=new Vector3().fromArray(Cs.value);break;case"v4":Ss.uniforms[Ms].value=new Vector4().fromArray(Cs.value);break;case"m3":Ss.uniforms[Ms].value=new Matrix3().fromArray(Cs.value);case"m4":Ss.uniforms[Ms].value=new Matrix4().fromArray(Cs.value);break;default:Ss.uniforms[Ms].value=Cs.value}}if(ca.defines!==void 0&&(Ss.defines=ca.defines),ca.vertexShader!==void 0&&(Ss.vertexShader=ca.vertexShader),ca.fragmentShader!==void 0&&(Ss.fragmentShader=ca.fragmentShader),ca.extensions!==void 0)for(var Ts in ca.extensions)Ss.extensions[Ts]=ca.extensions[Ts];if(ca.shading!==void 0&&(Ss.flatShading=ca.shading===1),ca.size!==void 0&&(Ss.size=ca.size),ca.sizeAttenuation!==void 0&&(Ss.sizeAttenuation=ca.sizeAttenuation),ca.map!==void 0&&(Ss.map=_s(ca.map)),ca.matcap!==void 0&&(Ss.matcap=_s(ca.matcap)),ca.alphaMap!==void 0&&(Ss.alphaMap=_s(ca.alphaMap)),ca.bumpMap!==void 0&&(Ss.bumpMap=_s(ca.bumpMap)),ca.bumpScale!==void 0&&(Ss.bumpScale=ca.bumpScale),ca.normalMap!==void 0&&(Ss.normalMap=_s(ca.normalMap)),ca.normalMapType!==void 0&&(Ss.normalMapType=ca.normalMapType),ca.normalScale!==void 0){var Is=ca.normalScale;Array.isArray(Is)===!1&&(Is=[Is,Is]),Ss.normalScale=new Vector2().fromArray(Is)}return ca.displacementMap!==void 0&&(Ss.displacementMap=_s(ca.displacementMap)),ca.displacementScale!==void 0&&(Ss.displacementScale=ca.displacementScale),ca.displacementBias!==void 0&&(Ss.displacementBias=ca.displacementBias),ca.roughnessMap!==void 0&&(Ss.roughnessMap=_s(ca.roughnessMap)),ca.metalnessMap!==void 0&&(Ss.metalnessMap=_s(ca.metalnessMap)),ca.emissiveMap!==void 0&&(Ss.emissiveMap=_s(ca.emissiveMap)),ca.emissiveIntensity!==void 0&&(Ss.emissiveIntensity=ca.emissiveIntensity),ca.specularMap!==void 0&&(Ss.specularMap=_s(ca.specularMap)),ca.envMap!==void 0&&(Ss.envMap=_s(ca.envMap)),ca.envMapIntensity!==void 0&&(Ss.envMapIntensity=ca.envMapIntensity),ca.reflectivity!==void 0&&(Ss.reflectivity=ca.reflectivity),ca.refractionRatio!==void 0&&(Ss.refractionRatio=ca.refractionRatio),ca.lightMap!==void 0&&(Ss.lightMap=_s(ca.lightMap)),ca.lightMapIntensity!==void 0&&(Ss.lightMapIntensity=ca.lightMapIntensity),ca.aoMap!==void 0&&(Ss.aoMap=_s(ca.aoMap)),ca.aoMapIntensity!==void 0&&(Ss.aoMapIntensity=ca.aoMapIntensity),ca.gradientMap!==void 0&&(Ss.gradientMap=_s(ca.gradientMap)),ca.clearcoatMap!==void 0&&(Ss.clearcoatMap=_s(ca.clearcoatMap)),ca.clearcoatRoughnessMap!==void 0&&(Ss.clearcoatRoughnessMap=_s(ca.clearcoatRoughnessMap)),ca.clearcoatNormalMap!==void 0&&(Ss.clearcoatNormalMap=_s(ca.clearcoatNormalMap)),ca.clearcoatNormalScale!==void 0&&(Ss.clearcoatNormalScale=new Vector2().fromArray(ca.clearcoatNormalScale)),Ss},setTextures:function(ca){return this.textures=ca,this}});var LoaderUtils={decodeText:function(ca){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(ca);for(var ga="",_s=0,Ss=ca.length;_s<Ss;_s++)ga+=String.fromCharCode(ca[_s]);try{return decodeURIComponent(escape(ga))}catch{return ga}},extractUrlBase:function(ca){var ga=ca.lastIndexOf("/");return ga===-1?"./":ca.substr(0,ga+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(ca){return BufferGeometry.prototype.copy.call(this,ca),this.instanceCount=ca.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var ca=BufferGeometry.prototype.toJSON.call(this);return ca.instanceCount=this.instanceCount,ca.isInstancedBufferGeometry=!0,ca}});function InstancedBufferAttribute(ca,ga,_s,Ss){typeof _s=="number"&&(Ss=_s,_s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,ca,ga,_s),this.meshPerAttribute=Ss||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(ca){return BufferAttribute.prototype.copy.call(this,ca),this.meshPerAttribute=ca.meshPerAttribute,this},toJSON:function(){var ca=BufferAttribute.prototype.toJSON.call(this);return ca.meshPerAttribute=this.meshPerAttribute,ca.isInstancedBufferAttribute=!0,ca}});function BufferGeometryLoader(ca){Loader.call(this,ca)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{ga(Ms.parse(JSON.parse(Ts)))}catch(Is){Ss?Ss(Is):console.error(Is),Ms.manager.itemError(ca)}},_s,Ss)},parse:function(ca){var ga=ca.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,_s=ca.data.index;if(_s!==void 0){var Ss=new TYPED_ARRAYS[_s.type](_s.array);ga.setIndex(new BufferAttribute(Ss,1))}var Ms=ca.data.attributes;for(var Cs in Ms){var Ts=Ms[Cs],Ss=new TYPED_ARRAYS[Ts.type](Ts.array),Is=Ts.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Bs=new Is(Ss,Ts.itemSize,Ts.normalized);Ts.name!==void 0&&(Bs.name=Ts.name),ga.setAttribute(Cs,Bs)}var Ps=ca.data.morphAttributes;if(Ps)for(var Cs in Ps){for(var Ls=Ps[Cs],Rs=[],Os=0,Fs=Ls.length;Os<Fs;Os++){var Ts=Ls[Os],Ss=new TYPED_ARRAYS[Ts.type](Ts.array),Bs=new BufferAttribute(Ss,Ts.itemSize,Ts.normalized);Ts.name!==void 0&&(Bs.name=Ts.name),Rs.push(Bs)}ga.morphAttributes[Cs]=Rs}var Vs=ca.data.morphTargetsRelative;Vs&&(ga.morphTargetsRelative=!0);var ks=ca.data.groups||ca.data.drawcalls||ca.data.offsets;if(ks!==void 0)for(var Os=0,Ns=ks.length;Os!==Ns;++Os){var Ds=ks[Os];ga.addGroup(Ds.start,Ds.count,Ds.materialIndex)}var $s=ca.data.boundingSphere;if($s!==void 0){var Gs=new Vector3;$s.center!==void 0&&Gs.fromArray($s.center),ga.boundingSphere=new Sphere(Gs,$s.radius)}return ca.name&&(ga.name=ca.name),ca.userData&&(ga.userData=ca.userData),ga}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(ca){Loader.call(this,ca)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=this.path===""?LoaderUtils.extractUrlBase(ca):this.path;this.resourcePath=this.resourcePath||Cs;var Ts=new FileLoader(Ms.manager);Ts.setPath(this.path),Ts.load(ca,function(Is){var Bs=null;try{Bs=JSON.parse(Is)}catch(Ls){Ss!==void 0&&Ss(Ls),console.error("THREE:ObjectLoader: Can't parse "+ca+".",Ls.message);return}var Ps=Bs.metadata;if(Ps===void 0||Ps.type===void 0||Ps.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+ca);return}Ms.parse(Bs,ga)},_s,Ss)},parse:function(ca,ga){var _s=this.parseShape(ca.shapes),Ss=this.parseGeometries(ca.geometries,_s),Ms=this.parseImages(ca.images,function(){ga!==void 0&&ga(Is)}),Cs=this.parseTextures(ca.textures,Ms),Ts=this.parseMaterials(ca.materials,Cs),Is=this.parseObject(ca.object,Ss,Ts);return ca.animations&&(Is.animations=this.parseAnimations(ca.animations)),(ca.images===void 0||ca.images.length===0)&&ga!==void 0&&ga(Is),Is},parseShape:function(ca){var ga={};if(ca!==void 0)for(var _s=0,Ss=ca.length;_s<Ss;_s++){var Ms=new Shape().fromJSON(ca[_s]);ga[Ms.uuid]=Ms}return ga},parseGeometries:function(ca,ga){var _s={};if(ca!==void 0)for(var Ss=new BufferGeometryLoader,Ms=0,Cs=ca.length;Ms<Cs;Ms++){var Ts,Is=ca[Ms];switch(Is.type){case"PlaneGeometry":case"PlaneBufferGeometry":Ts=new Geometries[Is.type](Is.width,Is.height,Is.widthSegments,Is.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Ts=new Geometries[Is.type](Is.width,Is.height,Is.depth,Is.widthSegments,Is.heightSegments,Is.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Ts=new Geometries[Is.type](Is.radius,Is.segments,Is.thetaStart,Is.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Ts=new Geometries[Is.type](Is.radiusTop,Is.radiusBottom,Is.height,Is.radialSegments,Is.heightSegments,Is.openEnded,Is.thetaStart,Is.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Ts=new Geometries[Is.type](Is.radius,Is.height,Is.radialSegments,Is.heightSegments,Is.openEnded,Is.thetaStart,Is.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Ts=new Geometries[Is.type](Is.radius,Is.widthSegments,Is.heightSegments,Is.phiStart,Is.phiLength,Is.thetaStart,Is.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Ts=new Geometries[Is.type](Is.radius,Is.detail);break;case"RingGeometry":case"RingBufferGeometry":Ts=new Geometries[Is.type](Is.innerRadius,Is.outerRadius,Is.thetaSegments,Is.phiSegments,Is.thetaStart,Is.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Ts=new Geometries[Is.type](Is.radius,Is.tube,Is.radialSegments,Is.tubularSegments,Is.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Ts=new Geometries[Is.type](Is.radius,Is.tube,Is.tubularSegments,Is.radialSegments,Is.p,Is.q);break;case"TubeGeometry":case"TubeBufferGeometry":Ts=new Geometries[Is.type](new Curves[Is.path.type]().fromJSON(Is.path),Is.tubularSegments,Is.radius,Is.radialSegments,Is.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Ts=new Geometries[Is.type](Is.points,Is.segments,Is.phiStart,Is.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Ts=new Geometries[Is.type](Is.vertices,Is.indices,Is.radius,Is.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Rs=[],Bs=0,Ps=Is.shapes.length;Bs<Ps;Bs++){var Ls=ga[Is.shapes[Bs]];Rs.push(Ls)}Ts=new Geometries[Is.type](Rs,Is.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Rs=[],Bs=0,Ps=Is.shapes.length;Bs<Ps;Bs++){var Ls=ga[Is.shapes[Bs]];Rs.push(Ls)}var Os=Is.options.extrudePath;Os!==void 0&&(Is.options.extrudePath=new Curves[Os.type]().fromJSON(Os)),Ts=new Geometries[Is.type](Rs,Is.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Ts=Ss.parse(Is);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Is.type+'"');continue}Ts.uuid=Is.uuid,Is.name!==void 0&&(Ts.name=Is.name),Ts.isBufferGeometry===!0&&Is.userData!==void 0&&(Ts.userData=Is.userData),_s[Is.uuid]=Ts}return _s},parseMaterials:function(ca,ga){var _s={},Ss={};if(ca!==void 0){var Ms=new MaterialLoader;Ms.setTextures(ga);for(var Cs=0,Ts=ca.length;Cs<Ts;Cs++){var Is=ca[Cs];if(Is.type==="MultiMaterial"){for(var Bs=[],Ps=0;Ps<Is.materials.length;Ps++){var Ls=Is.materials[Ps];_s[Ls.uuid]===void 0&&(_s[Ls.uuid]=Ms.parse(Ls)),Bs.push(_s[Ls.uuid])}Ss[Is.uuid]=Bs}else _s[Is.uuid]===void 0&&(_s[Is.uuid]=Ms.parse(Is)),Ss[Is.uuid]=_s[Is.uuid]}}return Ss},parseAnimations:function(ca){for(var ga=[],_s=0;_s<ca.length;_s++){var Ss=ca[_s],Ms=AnimationClip.parse(Ss);Ss.uuid!==void 0&&(Ms.uuid=Ss.uuid),ga.push(Ms)}return ga},parseImages:function(ca,ga){var _s=this,Ss={};function Ms(ks){return _s.manager.itemStart(ks),Ts.load(ks,function(){_s.manager.itemEnd(ks)},void 0,function(){_s.manager.itemError(ks),_s.manager.itemEnd(ks)})}if(ca!==void 0&&ca.length>0){var Cs=new LoadingManager(ga),Ts=new ImageLoader(Cs);Ts.setCrossOrigin(this.crossOrigin);for(var Is=0,Bs=ca.length;Is<Bs;Is++){var Ps=ca[Is],Ls=Ps.url;if(Array.isArray(Ls)){Ss[Ps.uuid]=[];for(var Rs=0,Os=Ls.length;Rs<Os;Rs++){var Fs=Ls[Rs],Vs=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Fs)?Fs:_s.resourcePath+Fs;Ss[Ps.uuid].push(Ms(Vs))}}else{var Vs=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ps.url)?Ps.url:_s.resourcePath+Ps.url;Ss[Ps.uuid]=Ms(Vs)}}}return Ss},parseTextures:function(ca,ga){function _s(Bs,Ps){return typeof Bs=="number"?Bs:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Bs),Ps[Bs])}var Ss={};if(ca!==void 0)for(var Ms=0,Cs=ca.length;Ms<Cs;Ms++){var Ts=ca[Ms];Ts.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Ts.uuid),ga[Ts.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Ts.image);var Is;Array.isArray(ga[Ts.image])?Is=new CubeTexture(ga[Ts.image]):Is=new Texture(ga[Ts.image]),Is.needsUpdate=!0,Is.uuid=Ts.uuid,Ts.name!==void 0&&(Is.name=Ts.name),Ts.mapping!==void 0&&(Is.mapping=_s(Ts.mapping,TEXTURE_MAPPING)),Ts.offset!==void 0&&Is.offset.fromArray(Ts.offset),Ts.repeat!==void 0&&Is.repeat.fromArray(Ts.repeat),Ts.center!==void 0&&Is.center.fromArray(Ts.center),Ts.rotation!==void 0&&(Is.rotation=Ts.rotation),Ts.wrap!==void 0&&(Is.wrapS=_s(Ts.wrap[0],TEXTURE_WRAPPING),Is.wrapT=_s(Ts.wrap[1],TEXTURE_WRAPPING)),Ts.format!==void 0&&(Is.format=Ts.format),Ts.type!==void 0&&(Is.type=Ts.type),Ts.encoding!==void 0&&(Is.encoding=Ts.encoding),Ts.minFilter!==void 0&&(Is.minFilter=_s(Ts.minFilter,TEXTURE_FILTER)),Ts.magFilter!==void 0&&(Is.magFilter=_s(Ts.magFilter,TEXTURE_FILTER)),Ts.anisotropy!==void 0&&(Is.anisotropy=Ts.anisotropy),Ts.flipY!==void 0&&(Is.flipY=Ts.flipY),Ts.premultiplyAlpha!==void 0&&(Is.premultiplyAlpha=Ts.premultiplyAlpha),Ts.unpackAlignment!==void 0&&(Is.unpackAlignment=Ts.unpackAlignment),Ss[Ts.uuid]=Is}return Ss},parseObject:function(ca,ga,_s){var Ss;function Ms(Ns){return ga[Ns]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ns),ga[Ns]}function Cs(Ns){if(Ns!==void 0){if(Array.isArray(Ns)){for(var Ds=[],$s=0,Gs=Ns.length;$s<Gs;$s++){var Us=Ns[$s];_s[Us]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Us),Ds.push(_s[Us])}return Ds}return _s[Ns]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ns),_s[Ns]}}switch(ca.type){case"Scene":Ss=new Scene,ca.background!==void 0&&Number.isInteger(ca.background)&&(Ss.background=new Color(ca.background)),ca.fog!==void 0&&(ca.fog.type==="Fog"?Ss.fog=new Fog(ca.fog.color,ca.fog.near,ca.fog.far):ca.fog.type==="FogExp2"&&(Ss.fog=new FogExp2(ca.fog.color,ca.fog.density)));break;case"PerspectiveCamera":Ss=new PerspectiveCamera(ca.fov,ca.aspect,ca.near,ca.far),ca.focus!==void 0&&(Ss.focus=ca.focus),ca.zoom!==void 0&&(Ss.zoom=ca.zoom),ca.filmGauge!==void 0&&(Ss.filmGauge=ca.filmGauge),ca.filmOffset!==void 0&&(Ss.filmOffset=ca.filmOffset),ca.view!==void 0&&(Ss.view=Object.assign({},ca.view));break;case"OrthographicCamera":Ss=new OrthographicCamera(ca.left,ca.right,ca.top,ca.bottom,ca.near,ca.far),ca.zoom!==void 0&&(Ss.zoom=ca.zoom),ca.view!==void 0&&(Ss.view=Object.assign({},ca.view));break;case"AmbientLight":Ss=new AmbientLight(ca.color,ca.intensity);break;case"DirectionalLight":Ss=new DirectionalLight(ca.color,ca.intensity);break;case"PointLight":Ss=new PointLight(ca.color,ca.intensity,ca.distance,ca.decay);break;case"RectAreaLight":Ss=new RectAreaLight(ca.color,ca.intensity,ca.width,ca.height);break;case"SpotLight":Ss=new SpotLight(ca.color,ca.intensity,ca.distance,ca.angle,ca.penumbra,ca.decay);break;case"HemisphereLight":Ss=new HemisphereLight(ca.color,ca.groundColor,ca.intensity);break;case"LightProbe":Ss=new LightProbe().fromJSON(ca);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Ts=Ms(ca.geometry),Is=Cs(ca.material);Ss=new Mesh(Ts,Is);break;case"InstancedMesh":var Ts=Ms(ca.geometry),Is=Cs(ca.material),Bs=ca.count,Ps=ca.instanceMatrix;Ss=new InstancedMesh(Ts,Is,Bs),Ss.instanceMatrix=new BufferAttribute(new Float32Array(Ps.array),16);break;case"LOD":Ss=new LOD;break;case"Line":Ss=new Line$1(Ms(ca.geometry),Cs(ca.material),ca.mode);break;case"LineLoop":Ss=new LineLoop(Ms(ca.geometry),Cs(ca.material));break;case"LineSegments":Ss=new LineSegments(Ms(ca.geometry),Cs(ca.material));break;case"PointCloud":case"Points":Ss=new Points(Ms(ca.geometry),Cs(ca.material));break;case"Sprite":Ss=new Sprite(Cs(ca.material));break;case"Group":Ss=new Group$1;break;default:Ss=new Object3D}if(Ss.uuid=ca.uuid,ca.name!==void 0&&(Ss.name=ca.name),ca.matrix!==void 0?(Ss.matrix.fromArray(ca.matrix),ca.matrixAutoUpdate!==void 0&&(Ss.matrixAutoUpdate=ca.matrixAutoUpdate),Ss.matrixAutoUpdate&&Ss.matrix.decompose(Ss.position,Ss.quaternion,Ss.scale)):(ca.position!==void 0&&Ss.position.fromArray(ca.position),ca.rotation!==void 0&&Ss.rotation.fromArray(ca.rotation),ca.quaternion!==void 0&&Ss.quaternion.fromArray(ca.quaternion),ca.scale!==void 0&&Ss.scale.fromArray(ca.scale)),ca.castShadow!==void 0&&(Ss.castShadow=ca.castShadow),ca.receiveShadow!==void 0&&(Ss.receiveShadow=ca.receiveShadow),ca.shadow&&(ca.shadow.bias!==void 0&&(Ss.shadow.bias=ca.shadow.bias),ca.shadow.radius!==void 0&&(Ss.shadow.radius=ca.shadow.radius),ca.shadow.mapSize!==void 0&&Ss.shadow.mapSize.fromArray(ca.shadow.mapSize),ca.shadow.camera!==void 0&&(Ss.shadow.camera=this.parseObject(ca.shadow.camera))),ca.visible!==void 0&&(Ss.visible=ca.visible),ca.frustumCulled!==void 0&&(Ss.frustumCulled=ca.frustumCulled),ca.renderOrder!==void 0&&(Ss.renderOrder=ca.renderOrder),ca.userData!==void 0&&(Ss.userData=ca.userData),ca.layers!==void 0&&(Ss.layers.mask=ca.layers),ca.children!==void 0)for(var Ls=ca.children,Rs=0;Rs<Ls.length;Rs++)Ss.add(this.parseObject(Ls[Rs],ga,_s));if(ca.type==="LOD"){ca.autoUpdate!==void 0&&(Ss.autoUpdate=ca.autoUpdate);for(var Os=ca.levels,Fs=0;Fs<Os.length;Fs++){var Vs=Os[Fs],ks=Ss.getObjectByProperty("uuid",Vs.object);ks!==void 0&&Ss.addLevel(ks,Vs.distance)}}return Ss}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(ca){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,ca),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(ga){return this.options=ga,this},load:function(ca,ga,_s,Ss){ca===void 0&&(ca=""),this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var Ms=this,Cs=Cache.get(ca);if(Cs!==void 0)return Ms.manager.itemStart(ca),setTimeout(function(){ga&&ga(Cs),Ms.manager.itemEnd(ca)},0),Cs;fetch(ca).then(function(Ts){return Ts.blob()}).then(function(Ts){return Ms.options===void 0?createImageBitmap(Ts):createImageBitmap(Ts,Ms.options)}).then(function(Ts){Cache.add(ca,Ts),ga&&ga(Ts),Ms.manager.itemEnd(ca)}).catch(function(Ts){Ss&&Ss(Ts),Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)}),Ms.manager.itemStart(ca)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(ca,ga){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(ca,ga),this},lineTo:function(ca,ga){return this.currentPath.lineTo(ca,ga),this},quadraticCurveTo:function(ca,ga,_s,Ss){return this.currentPath.quadraticCurveTo(ca,ga,_s,Ss),this},bezierCurveTo:function(ca,ga,_s,Ss,Ms,Cs){return this.currentPath.bezierCurveTo(ca,ga,_s,Ss,Ms,Cs),this},splineThru:function(ca){return this.currentPath.splineThru(ca),this},toShapes:function(ca,ga){function _s(qs){for(var ru=[],tu=0,nu=qs.length;tu<nu;tu++){var uu=qs[tu],fu=new Shape;fu.curves=uu.curves,ru.push(fu)}return ru}function Ss(qs,ru){for(var tu=ru.length,nu=!1,uu=tu-1,fu=0;fu<tu;uu=fu++){var mu=ru[uu],vu=ru[fu],Eu=vu.x-mu.x,hu=vu.y-mu.y;if(Math.abs(hu)>Number.EPSILON){if(hu<0&&(mu=ru[fu],Eu=-Eu,vu=ru[uu],hu=-hu),qs.y<mu.y||qs.y>vu.y)continue;if(qs.y===mu.y){if(qs.x===mu.x)return!0}else{var pu=hu*(qs.x-mu.x)-Eu*(qs.y-mu.y);if(pu===0)return!0;if(pu<0)continue;nu=!nu}}else{if(qs.y!==mu.y)continue;if(vu.x<=qs.x&&qs.x<=mu.x||mu.x<=qs.x&&qs.x<=vu.x)return!0}}return nu}var Ms=ShapeUtils.isClockWise,Cs=this.subPaths;if(Cs.length===0)return[];if(ga===!0)return _s(Cs);var Ts,Is,Bs,Ps=[];if(Cs.length===1)return Is=Cs[0],Bs=new Shape,Bs.curves=Is.curves,Ps.push(Bs),Ps;var Ls=!Ms(Cs[0].getPoints());Ls=ca?!Ls:Ls;var Rs=[],Os=[],Fs=[],Vs=0,ks;Os[Vs]=void 0,Fs[Vs]=[];for(var Ns=0,Ds=Cs.length;Ns<Ds;Ns++)Is=Cs[Ns],ks=Is.getPoints(),Ts=Ms(ks),Ts=ca?!Ts:Ts,Ts?(!Ls&&Os[Vs]&&Vs++,Os[Vs]={s:new Shape,p:ks},Os[Vs].s.curves=Is.curves,Ls&&Vs++,Fs[Vs]=[]):Fs[Vs].push({h:Is,p:ks[0]});if(!Os[0])return _s(Cs);if(Os.length>1){for(var $s=!1,Gs=[],Us=0,Hs=Os.length;Us<Hs;Us++)Rs[Us]=[];for(var Us=0,Hs=Os.length;Us<Hs;Us++)for(var zs=Fs[Us],js=0;js<zs.length;js++){for(var Ws=zs[js],Qs=!0,Zs=0;Zs<Os.length;Zs++)Ss(Ws.p,Os[Zs].p)&&(Us!==Zs&&Gs.push({froms:Us,tos:Zs,hole:js}),Qs?(Qs=!1,Rs[Zs].push(Ws)):$s=!0);Qs&&Rs[Us].push(Ws)}Gs.length>0&&($s||(Fs=Rs))}for(var Xs,Ns=0,eu=Os.length;Ns<eu;Ns++){Bs=Os[Ns].s,Ps.push(Bs),Xs=Fs[Ns];for(var Ys=0,Js=Xs.length;Ys<Js;Ys++)Bs.holes.push(Xs[Ys].h)}return Ps}});function Font(ca){this.type="Font",this.data=ca}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(ca,ga){ga===void 0&&(ga=100);for(var _s=[],Ss=createPaths(ca,ga,this.data),Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Array.prototype.push.apply(_s,Ss[Ms].toShapes());return _s}});function createPaths(ca,ga,_s){for(var Ss=Array.from?Array.from(ca):String(ca).split(""),Ms=ga/_s.resolution,Cs=(_s.boundingBox.yMax-_s.boundingBox.yMin+_s.underlineThickness)*Ms,Ts=[],Is=0,Bs=0,Ps=0;Ps<Ss.length;Ps++){var Ls=Ss[Ps];if(Ls===`
`)Is=0,Bs-=Cs;else{var Rs=createPath(Ls,Ms,Is,Bs,_s);Is+=Rs.offsetX,Ts.push(Rs.path)}}return Ts}function createPath(ca,ga,_s,Ss,Ms){var Cs=Ms.glyphs[ca]||Ms.glyphs["?"];if(!Cs){console.error('THREE.Font: character "'+ca+'" does not exists in font family '+Ms.familyName+".");return}var Ts=new ShapePath,Is,Bs,Ps,Ls,Rs,Os,Fs,Vs;if(Cs.o)for(var ks=Cs._cachedOutline||(Cs._cachedOutline=Cs.o.split(" ")),Ns=0,Ds=ks.length;Ns<Ds;){var $s=ks[Ns++];switch($s){case"m":Is=ks[Ns++]*ga+_s,Bs=ks[Ns++]*ga+Ss,Ts.moveTo(Is,Bs);break;case"l":Is=ks[Ns++]*ga+_s,Bs=ks[Ns++]*ga+Ss,Ts.lineTo(Is,Bs);break;case"q":Ps=ks[Ns++]*ga+_s,Ls=ks[Ns++]*ga+Ss,Rs=ks[Ns++]*ga+_s,Os=ks[Ns++]*ga+Ss,Ts.quadraticCurveTo(Rs,Os,Ps,Ls);break;case"b":Ps=ks[Ns++]*ga+_s,Ls=ks[Ns++]*ga+Ss,Rs=ks[Ns++]*ga+_s,Os=ks[Ns++]*ga+Ss,Fs=ks[Ns++]*ga+_s,Vs=ks[Ns++]*ga+Ss,Ts.bezierCurveTo(Rs,Os,Fs,Vs,Ps,Ls);break}}return{offsetX:Cs.ha*ga,path:Ts}}function FontLoader(ca){Loader.call(this,ca)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(this.manager);Cs.setPath(this.path),Cs.load(ca,function(Ts){var Is;try{Is=JSON.parse(Ts)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Is=JSON.parse(Ts.substring(65,Ts.length-2))}var Bs=Ms.parse(Is);ga&&ga(Bs)},_s,Ss)},parse:function(ca){return new Font(ca)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(ca){_context=ca}};function AudioLoader(ca){Loader.call(this,ca)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setResponseType("arraybuffer"),Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{var Is=Ts.slice(0),Bs=AudioContext.getContext();Bs.decodeAudioData(Is,function(Ps){ga(Ps)})}catch(Ps){Ss?Ss(Ps):console.error(Ps),Ms.manager.itemError(ca)}},_s,Ss)}});function HemisphereLightProbe(ca,ga,_s){LightProbe.call(this,void 0,_s);var Ss=new Color().set(ca),Ms=new Color().set(ga),Cs=new Vector3(Ss.r,Ss.g,Ss.b),Ts=new Vector3(Ms.r,Ms.g,Ms.b),Is=Math.sqrt(Math.PI),Bs=Is*Math.sqrt(.75);this.sh.coefficients[0].copy(Cs).add(Ts).multiplyScalar(Is),this.sh.coefficients[1].copy(Cs).sub(Ts).multiplyScalar(Bs)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(ca){return LightProbe.prototype.copy.call(this,ca),this},toJSON:function(ca){var ga=LightProbe.prototype.toJSON.call(this,ca);return ga}});function AmbientLightProbe(ca,ga){LightProbe.call(this,void 0,ga);var _s=new Color().set(ca);this.sh.coefficients[0].set(_s.r,_s.g,_s.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(ca){return LightProbe.prototype.copy.call(this,ca),this},toJSON:function(ca){var ga=LightProbe.prototype.toJSON.call(this,ca);return ga}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(ca){var ga=this._cache,_s=ga.focus!==ca.focus||ga.fov!==ca.fov||ga.aspect!==ca.aspect*this.aspect||ga.near!==ca.near||ga.far!==ca.far||ga.zoom!==ca.zoom||ga.eyeSep!==this.eyeSep;if(_s){ga.focus=ca.focus,ga.fov=ca.fov,ga.aspect=ca.aspect*this.aspect,ga.near=ca.near,ga.far=ca.far,ga.zoom=ca.zoom,ga.eyeSep=this.eyeSep;var Ss=ca.projectionMatrix.clone(),Ms=ga.eyeSep/2,Cs=Ms*ga.near/ga.focus,Ts=ga.near*Math.tan(MathUtils.DEG2RAD*ga.fov*.5)/ga.zoom,Is,Bs;_eyeLeft.elements[12]=-Ms,_eyeRight.elements[12]=Ms,Is=-Ts*ga.aspect+Cs,Bs=Ts*ga.aspect+Cs,Ss.elements[0]=2*ga.near/(Bs-Is),Ss.elements[8]=(Bs+Is)/(Bs-Is),this.cameraL.projectionMatrix.copy(Ss),Is=-Ts*ga.aspect-Cs,Bs=Ts*ga.aspect-Cs,Ss.elements[0]=2*ga.near/(Bs-Is),Ss.elements[8]=(Bs+Is)/(Bs-Is),this.cameraR.projectionMatrix.copy(Ss)}this.cameraL.matrixWorld.copy(ca.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(ca.matrixWorld).multiply(_eyeRight)}});function Clock(ca){this.autoStart=ca!==void 0?ca:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var ca=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var ga=(typeof performance=="undefined"?Date:performance).now();ca=(ga-this.oldTime)/1e3,this.oldTime=ga,this.elapsedTime+=ca}return ca}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(ca){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=ca,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(ca){return this.gain.gain.setTargetAtTime(ca,this.context.currentTime,.01),this},updateMatrixWorld:function(ca){Object3D.prototype.updateMatrixWorld.call(this,ca);var ga=this.context.listener,_s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),ga.positionX){var Ss=this.context.currentTime+this.timeDelta;ga.positionX.linearRampToValueAtTime(_position$2.x,Ss),ga.positionY.linearRampToValueAtTime(_position$2.y,Ss),ga.positionZ.linearRampToValueAtTime(_position$2.z,Ss),ga.forwardX.linearRampToValueAtTime(_orientation.x,Ss),ga.forwardY.linearRampToValueAtTime(_orientation.y,Ss),ga.forwardZ.linearRampToValueAtTime(_orientation.z,Ss),ga.upX.linearRampToValueAtTime(_s.x,Ss),ga.upY.linearRampToValueAtTime(_s.y,Ss),ga.upZ.linearRampToValueAtTime(_s.z,Ss)}else ga.setPosition(_position$2.x,_position$2.y,_position$2.z),ga.setOrientation(_orientation.x,_orientation.y,_orientation.z,_s.x,_s.y,_s.z)}});function Audio$1(ca){Object3D.call(this),this.type="Audio",this.listener=ca,this.context=ca.context,this.gain=this.context.createGain(),this.gain.connect(ca.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$1,getOutput:function(){return this.gain},setNodeSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=ca,this.connect(),this},setMediaElementSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(ca),this.connect(),this},setMediaStreamSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(ca),this.connect(),this},setBuffer:function(ca){return this.buffer=ca,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(ca){if(ca===void 0&&(ca=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+ca;var ga=this.context.createBufferSource();return ga.buffer=this.buffer,ga.loop=this.loop,ga.loopStart=this.loopStart,ga.loopEnd=this.loopEnd,ga.onended=this.onEnded.bind(this),ga.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=ga,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var ca=1,ga=this.filters.length;ca<ga;ca++)this.filters[ca-1].connect(this.filters[ca]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var ca=1,ga=this.filters.length;ca<ga;ca++)this.filters[ca-1].disconnect(this.filters[ca]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(ca){return ca||(ca=[]),this.isPlaying===!0?(this.disconnect(),this.filters=ca,this.connect()):this.filters=ca,this},setDetune:function(ca){if(this.detune=ca,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(ca){return this.setFilters(ca?[ca]:[])},setPlaybackRate:function(ca){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=ca,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(ca){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=ca,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(ca){return this.loopStart=ca,this},setLoopEnd:function(ca){return this.loopEnd=ca,this},getVolume:function(){return this.gain.gain.value},setVolume:function(ca){return this.gain.gain.setTargetAtTime(ca,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(ca){Audio$1.call(this,ca),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$1.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(ca){return this.panner.refDistance=ca,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(ca){return this.panner.rolloffFactor=ca,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(ca){return this.panner.distanceModel=ca,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(ca){return this.panner.maxDistance=ca,this},setDirectionalCone:function(ca,ga,_s){return this.panner.coneInnerAngle=ca,this.panner.coneOuterAngle=ga,this.panner.coneOuterGain=_s,this},updateMatrixWorld:function(ca){if(Object3D.prototype.updateMatrixWorld.call(this,ca),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var ga=this.panner;if(ga.positionX){var _s=this.context.currentTime+this.listener.timeDelta;ga.positionX.linearRampToValueAtTime(_position$3.x,_s),ga.positionY.linearRampToValueAtTime(_position$3.y,_s),ga.positionZ.linearRampToValueAtTime(_position$3.z,_s),ga.orientationX.linearRampToValueAtTime(_orientation$1.x,_s),ga.orientationY.linearRampToValueAtTime(_orientation$1.y,_s),ga.orientationZ.linearRampToValueAtTime(_orientation$1.z,_s)}else ga.setPosition(_position$3.x,_position$3.y,_position$3.z),ga.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(ca,ga){this.analyser=ca.context.createAnalyser(),this.analyser.fftSize=ga!==void 0?ga:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),ca.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var ca=0,ga=this.getFrequencyData(),_s=0;_s<ga.length;_s++)ca+=ga[_s];return ca/ga.length}});function PropertyMixer(ca,ga,_s){this.binding=ca,this.valueSize=_s;var Ss,Ms,Cs;switch(ga){case"quaternion":Ss=this._slerp,Ms=this._slerpAdditive,Cs=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(_s*6),this._workIndex=5;break;case"string":case"bool":Ss=this._select,Ms=this._select,Cs=this._setAdditiveIdentityOther,this.buffer=new Array(_s*5);break;default:Ss=this._lerp,Ms=this._lerpAdditive,Cs=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(_s*5)}this._mixBufferRegion=Ss,this._mixBufferRegionAdditive=Ms,this._setIdentity=Cs,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(ca,ga){var _s=this.buffer,Ss=this.valueSize,Ms=ca*Ss+Ss,Cs=this.cumulativeWeight;if(Cs===0){for(var Ts=0;Ts!==Ss;++Ts)_s[Ms+Ts]=_s[Ts];Cs=ga}else{Cs+=ga;var Is=ga/Cs;this._mixBufferRegion(_s,Ms,0,Is,Ss)}this.cumulativeWeight=Cs},accumulateAdditive:function(ca){var ga=this.buffer,_s=this.valueSize,Ss=_s*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(ga,Ss,0,ca,_s),this.cumulativeWeightAdditive+=ca},apply:function(ca){var ga=this.valueSize,_s=this.buffer,Ss=ca*ga+ga,Ms=this.cumulativeWeight,Cs=this.cumulativeWeightAdditive,Ts=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Ms<1){var Is=ga*this._origIndex;this._mixBufferRegion(_s,Ss,Is,1-Ms,ga)}Cs>0&&this._mixBufferRegionAdditive(_s,Ss,this._addIndex*ga,1,ga);for(var Bs=ga,Ps=ga+ga;Bs!==Ps;++Bs)if(_s[Bs]!==_s[Bs+ga]){Ts.setValue(_s,Ss);break}},saveOriginalState:function(){var ca=this.binding,ga=this.buffer,_s=this.valueSize,Ss=_s*this._origIndex;ca.getValue(ga,Ss);for(var Ms=_s,Cs=Ss;Ms!==Cs;++Ms)ga[Ms]=ga[Ss+Ms%_s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var ca=this.valueSize*3;this.binding.setValue(this.buffer,ca)},_setAdditiveIdentityNumeric:function(){for(var ca=this._addIndex*this.valueSize,ga=ca+this.valueSize,_s=ca;_s<ga;_s++)this.buffer[_s]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var ca=this._origIndex*this.valueSize,ga=this._addIndex*this.valueSize,_s=0;_s<this.valueSize;_s++)this.buffer[ga+_s]=this.buffer[ca+_s]},_select:function(ca,ga,_s,Ss,Ms){if(Ss>=.5)for(var Cs=0;Cs!==Ms;++Cs)ca[ga+Cs]=ca[_s+Cs]},_slerp:function(ca,ga,_s,Ss){Quaternion.slerpFlat(ca,ga,ca,ga,ca,_s,Ss)},_slerpAdditive:function(ca,ga,_s,Ss,Ms){var Cs=this._workIndex*Ms;Quaternion.multiplyQuaternionsFlat(ca,Cs,ca,ga,ca,_s),Quaternion.slerpFlat(ca,ga,ca,ga,ca,Cs,Ss)},_lerp:function(ca,ga,_s,Ss,Ms){for(var Cs=1-Ss,Ts=0;Ts!==Ms;++Ts){var Is=ga+Ts;ca[Is]=ca[Is]*Cs+ca[_s+Ts]*Ss}},_lerpAdditive:function(ca,ga,_s,Ss,Ms){for(var Cs=0;Cs!==Ms;++Cs){var Ts=ga+Cs;ca[Ts]=ca[Ts]+ca[_s+Cs]*Ss}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(ca,ga,_s){var Ss=_s||PropertyBinding.parseTrackName(ga);this._targetGroup=ca,this._bindings=ca.subscribe_(ga,Ss)}Object.assign(Composite.prototype,{getValue:function(ca,ga){this.bind();var _s=this._targetGroup.nCachedObjects_,Ss=this._bindings[_s];Ss!==void 0&&Ss.getValue(ca,ga)},setValue:function(ca,ga){for(var _s=this._bindings,Ss=this._targetGroup.nCachedObjects_,Ms=_s.length;Ss!==Ms;++Ss)_s[Ss].setValue(ca,ga)},bind:function(){for(var ca=this._bindings,ga=this._targetGroup.nCachedObjects_,_s=ca.length;ga!==_s;++ga)ca[ga].bind()},unbind:function(){for(var ca=this._bindings,ga=this._targetGroup.nCachedObjects_,_s=ca.length;ga!==_s;++ga)ca[ga].unbind()}});function PropertyBinding(ca,ga,_s){this.path=ga,this.parsedPath=_s||PropertyBinding.parseTrackName(ga),this.node=PropertyBinding.findNode(ca,this.parsedPath.nodeName)||ca,this.rootNode=ca}Object.assign(PropertyBinding,{Composite,create:function(ca,ga,_s){return ca&&ca.isAnimationObjectGroup?new PropertyBinding.Composite(ca,ga,_s):new PropertyBinding(ca,ga,_s)},sanitizeNodeName:function(ca){return ca.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(ca){var ga=_trackRe.exec(ca);if(!ga)throw new Error("PropertyBinding: Cannot parse trackName: "+ca);var _s={nodeName:ga[2],objectName:ga[3],objectIndex:ga[4],propertyName:ga[5],propertyIndex:ga[6]},Ss=_s.nodeName&&_s.nodeName.lastIndexOf(".");if(Ss!==void 0&&Ss!==-1){var Ms=_s.nodeName.substring(Ss+1);_supportedObjectNames.indexOf(Ms)!==-1&&(_s.nodeName=_s.nodeName.substring(0,Ss),_s.objectName=Ms)}if(_s.propertyName===null||_s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+ca);return _s},findNode:function(ca,ga){if(!ga||ga===""||ga==="."||ga===-1||ga===ca.name||ga===ca.uuid)return ca;if(ca.skeleton){var _s=ca.skeleton.getBoneByName(ga);if(_s!==void 0)return _s}if(ca.children){var Ss=function(Cs){for(var Ts=0;Ts<Cs.length;Ts++){var Is=Cs[Ts];if(Is.name===ga||Is.uuid===ga)return Is;var Bs=Ss(Is.children);if(Bs)return Bs}return null},Ms=Ss(ca.children);if(Ms)return Ms}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(ga,_s){ga[_s]=this.node[this.propertyName]},function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)ga[_s++]=Ss[Ms]},function(ga,_s){ga[_s]=this.resolvedProperty[this.propertyIndex]},function(ga,_s){this.resolvedProperty.toArray(ga,_s)}],SetterByBindingTypeAndVersioning:[[function(ga,_s){this.targetObject[this.propertyName]=ga[_s]},function(ga,_s){this.targetObject[this.propertyName]=ga[_s],this.targetObject.needsUpdate=!0},function(ga,_s){this.targetObject[this.propertyName]=ga[_s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=ga[_s++]},function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=ga[_s++];this.targetObject.needsUpdate=!0},function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=ga[_s++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,_s){this.resolvedProperty[this.propertyIndex]=ga[_s]},function(ga,_s){this.resolvedProperty[this.propertyIndex]=ga[_s],this.targetObject.needsUpdate=!0},function(ga,_s){this.resolvedProperty[this.propertyIndex]=ga[_s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,_s){this.resolvedProperty.fromArray(ga,_s)},function(ga,_s){this.resolvedProperty.fromArray(ga,_s),this.targetObject.needsUpdate=!0},function(ga,_s){this.resolvedProperty.fromArray(ga,_s),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(ga,_s){this.bind(),this.getValue(ga,_s)},setValue:function(ga,_s){this.bind(),this.setValue(ga,_s)},bind:function(){var ca=this.node,ga=this.parsedPath,_s=ga.objectName,Ss=ga.propertyName,Ms=ga.propertyIndex;if(ca||(ca=PropertyBinding.findNode(this.rootNode,ga.nodeName)||this.rootNode,this.node=ca),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!ca){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(_s){var Cs=ga.objectIndex;switch(_s){case"materials":if(!ca.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!ca.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}ca=ca.material.materials;break;case"bones":if(!ca.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}ca=ca.skeleton.bones;for(var Ts=0;Ts<ca.length;Ts++)if(ca[Ts].name===Cs){Cs=Ts;break}break;default:if(ca[_s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}ca=ca[_s]}if(Cs!==void 0){if(ca[Cs]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,ca);return}ca=ca[Cs]}}var Is=ca[Ss];if(Is===void 0){var Bs=ga.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Bs+"."+Ss+" but it wasn't found.",ca);return}var Ps=this.Versioning.None;this.targetObject=ca,ca.needsUpdate!==void 0?Ps=this.Versioning.NeedsUpdate:ca.matrixWorldNeedsUpdate!==void 0&&(Ps=this.Versioning.MatrixWorldNeedsUpdate);var Ls=this.BindingType.Direct;if(Ms!==void 0){if(Ss==="morphTargetInfluences"){if(!ca.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(ca.geometry.isBufferGeometry){if(!ca.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}ca.morphTargetDictionary[Ms]!==void 0&&(Ms=ca.morphTargetDictionary[Ms])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Ls=this.BindingType.ArrayElement,this.resolvedProperty=Is,this.propertyIndex=Ms}else Is.fromArray!==void 0&&Is.toArray!==void 0?(Ls=this.BindingType.HasFromToArray,this.resolvedProperty=Is):Array.isArray(Is)?(Ls=this.BindingType.EntireArray,this.resolvedProperty=Is):this.propertyName=Ss;this.getValue=this.GetterByBindingType[Ls],this.setValue=this.SetterByBindingTypeAndVersioning[Ls][Ps]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var ca={};this._indicesByUUID=ca;for(var ga=0,_s=arguments.length;ga!==_s;++ga)ca[arguments[ga].uuid]=ga;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Ss=this;this.stats={objects:{get total(){return Ss._objects.length},get inUse(){return this.total-Ss.nCachedObjects_}},get bindingsPerObject(){return Ss._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var ca=this._objects,ga=ca.length,_s=this.nCachedObjects_,Ss=this._indicesByUUID,Ms=this._paths,Cs=this._parsedPaths,Ts=this._bindings,Is=Ts.length,Bs=void 0,Ps=0,Ls=arguments.length;Ps!==Ls;++Ps){var Rs=arguments[Ps],Os=Rs.uuid,Fs=Ss[Os];if(Fs===void 0){Fs=ga++,Ss[Os]=Fs,ca.push(Rs);for(var Vs=0,ks=Is;Vs!==ks;++Vs)Ts[Vs].push(new PropertyBinding(Rs,Ms[Vs],Cs[Vs]))}else if(Fs<_s){Bs=ca[Fs];var Ns=--_s,Ds=ca[Ns];Ss[Ds.uuid]=Fs,ca[Fs]=Ds,Ss[Os]=Ns,ca[Ns]=Rs;for(var Vs=0,ks=Is;Vs!==ks;++Vs){var $s=Ts[Vs],Gs=$s[Ns],Us=$s[Fs];$s[Fs]=Gs,Us===void 0&&(Us=new PropertyBinding(Rs,Ms[Vs],Cs[Vs])),$s[Ns]=Us}}else ca[Fs]!==Bs&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=_s},remove:function(){for(var ca=this._objects,ga=this.nCachedObjects_,_s=this._indicesByUUID,Ss=this._bindings,Ms=Ss.length,Cs=0,Ts=arguments.length;Cs!==Ts;++Cs){var Is=arguments[Cs],Bs=Is.uuid,Ps=_s[Bs];if(Ps!==void 0&&Ps>=ga){var Ls=ga++,Rs=ca[Ls];_s[Rs.uuid]=Ps,ca[Ps]=Rs,_s[Bs]=Ls,ca[Ls]=Is;for(var Os=0,Fs=Ms;Os!==Fs;++Os){var Vs=Ss[Os],ks=Vs[Ls],Ns=Vs[Ps];Vs[Ps]=ks,Vs[Ls]=Ns}}}this.nCachedObjects_=ga},uncache:function(){for(var ca=this._objects,ga=ca.length,_s=this.nCachedObjects_,Ss=this._indicesByUUID,Ms=this._bindings,Cs=Ms.length,Ts=0,Is=arguments.length;Ts!==Is;++Ts){var Bs=arguments[Ts],Ps=Bs.uuid,Ls=Ss[Ps];if(Ls!==void 0)if(delete Ss[Ps],Ls<_s){var Rs=--_s,Os=ca[Rs],Fs=--ga,Vs=ca[Fs];Ss[Os.uuid]=Ls,ca[Ls]=Os,Ss[Vs.uuid]=Rs,ca[Rs]=Vs,ca.pop();for(var ks=0,Ns=Cs;ks!==Ns;++ks){var Ds=Ms[ks],$s=Ds[Rs],Gs=Ds[Fs];Ds[Ls]=$s,Ds[Rs]=Gs,Ds.pop()}}else{var Fs=--ga,Vs=ca[Fs];Ss[Vs.uuid]=Ls,ca[Ls]=Vs,ca.pop();for(var ks=0,Ns=Cs;ks!==Ns;++ks){var Ds=Ms[ks];Ds[Ls]=Ds[Fs],Ds.pop()}}}this.nCachedObjects_=_s},subscribe_:function(ca,ga){var _s=this._bindingsIndicesByPath,Ss=_s[ca],Ms=this._bindings;if(Ss!==void 0)return Ms[Ss];var Cs=this._paths,Ts=this._parsedPaths,Is=this._objects,Bs=Is.length,Ps=this.nCachedObjects_,Ls=new Array(Bs);Ss=Ms.length,_s[ca]=Ss,Cs.push(ca),Ts.push(ga),Ms.push(Ls);for(var Rs=Ps,Os=Is.length;Rs!==Os;++Rs){var Fs=Is[Rs];Ls[Rs]=new PropertyBinding(Fs,ca,ga)}return Ls},unsubscribe_:function(ca){var ga=this._bindingsIndicesByPath,_s=ga[ca];if(_s!==void 0){var Ss=this._paths,Ms=this._parsedPaths,Cs=this._bindings,Ts=Cs.length-1,Is=Cs[Ts],Bs=ca[Ts];ga[Bs]=_s,Cs[_s]=Is,Cs.pop(),Ms[_s]=Ms[Ts],Ms.pop(),Ss[_s]=Ss[Ts],Ss.pop()}}});function AnimationAction(ca,ga,_s,Ss){this._mixer=ca,this._clip=ga,this._localRoot=_s||null,this.blendMode=Ss||ga.blendMode;for(var Ms=ga.tracks,Cs=Ms.length,Ts=new Array(Cs),Is={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Bs=0;Bs!==Cs;++Bs){var Ps=Ms[Bs].createInterpolant(null);Ts[Bs]=Ps,Ps.settings=Is}this._interpolantSettings=Is,this._interpolants=Ts,this._propertyBindings=new Array(Cs),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(ca){return this._startTime=ca,this},setLoop:function(ca,ga){return this.loop=ca,this.repetitions=ga,this},setEffectiveWeight:function(ca){return this.weight=ca,this._effectiveWeight=this.enabled?ca:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(ca){return this._scheduleFading(ca,0,1)},fadeOut:function(ca){return this._scheduleFading(ca,1,0)},crossFadeFrom:function(ca,ga,_s){if(ca.fadeOut(ga),this.fadeIn(ga),_s){var Ss=this._clip.duration,Ms=ca._clip.duration,Cs=Ms/Ss,Ts=Ss/Ms;ca.warp(1,Cs,ga),this.warp(Ts,1,ga)}return this},crossFadeTo:function(ca,ga,_s){return ca.crossFadeFrom(this,ga,_s)},stopFading:function(){var ca=this._weightInterpolant;return ca!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(ca)),this},setEffectiveTimeScale:function(ca){return this.timeScale=ca,this._effectiveTimeScale=this.paused?0:ca,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(ca){return this.timeScale=this._clip.duration/ca,this.stopWarping()},syncWith:function(ca){return this.time=ca.time,this.timeScale=ca.timeScale,this.stopWarping()},halt:function(ca){return this.warp(this._effectiveTimeScale,0,ca)},warp:function(ca,ga,_s){var Ss=this._mixer,Ms=Ss.time,Cs=this._timeScaleInterpolant,Ts=this.timeScale;Cs===null&&(Cs=Ss._lendControlInterpolant(),this._timeScaleInterpolant=Cs);var Is=Cs.parameterPositions,Bs=Cs.sampleValues;return Is[0]=Ms,Is[1]=Ms+_s,Bs[0]=ca/Ts,Bs[1]=ga/Ts,this},stopWarping:function(){var ca=this._timeScaleInterpolant;return ca!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(ca)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(ca,ga,_s,Ss){if(!this.enabled){this._updateWeight(ca);return}var Ms=this._startTime;if(Ms!==null){var Cs=(ca-Ms)*_s;if(Cs<0||_s===0)return;this._startTime=null,ga=_s*Cs}ga*=this._updateTimeScale(ca);var Ts=this._updateTime(ga),Is=this._updateWeight(ca);if(Is>0){var Bs=this._interpolants,Ps=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Ls=0,Rs=Bs.length;Ls!==Rs;++Ls)Bs[Ls].evaluate(Ts),Ps[Ls].accumulateAdditive(Is);break;case NormalAnimationBlendMode:default:for(var Ls=0,Rs=Bs.length;Ls!==Rs;++Ls)Bs[Ls].evaluate(Ts),Ps[Ls].accumulate(Ss,Is)}}},_updateWeight:function(ca){var ga=0;if(this.enabled){ga=this.weight;var _s=this._weightInterpolant;if(_s!==null){var Ss=_s.evaluate(ca)[0];ga*=Ss,ca>_s.parameterPositions[1]&&(this.stopFading(),Ss===0&&(this.enabled=!1))}}return this._effectiveWeight=ga,ga},_updateTimeScale:function(ca){var ga=0;if(!this.paused){ga=this.timeScale;var _s=this._timeScaleInterpolant;if(_s!==null){var Ss=_s.evaluate(ca)[0];ga*=Ss,ca>_s.parameterPositions[1]&&(this.stopWarping(),ga===0?this.paused=!0:this.timeScale=ga)}}return this._effectiveTimeScale=ga,ga},_updateTime:function(ca){var ga=this.time+ca,_s=this._clip.duration,Ss=this.loop,Ms=this._loopCount,Cs=Ss===LoopPingPong;if(ca===0)return Ms===-1?ga:Cs&&(Ms&1)===1?_s-ga:ga;if(Ss===LoopOnce){Ms===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(ga>=_s)ga=_s;else if(ga<0)ga=0;else{this.time=ga;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=ga,this._mixer.dispatchEvent({type:"finished",action:this,direction:ca<0?-1:1})}}else{if(Ms===-1&&(ca>=0?(Ms=0,this._setEndings(!0,this.repetitions===0,Cs)):this._setEndings(this.repetitions===0,!0,Cs)),ga>=_s||ga<0){var Ts=Math.floor(ga/_s);ga-=_s*Ts,Ms+=Math.abs(Ts);var Is=this.repetitions-Ms;if(Is<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,ga=ca>0?_s:0,this.time=ga,this._mixer.dispatchEvent({type:"finished",action:this,direction:ca>0?1:-1});else{if(Is===1){var Bs=ca<0;this._setEndings(Bs,!Bs,Cs)}else this._setEndings(!1,!1,Cs);this._loopCount=Ms,this.time=ga,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Ts})}}else this.time=ga;if(Cs&&(Ms&1)===1)return _s-ga}return ga},_setEndings:function(ca,ga,_s){var Ss=this._interpolantSettings;_s?(Ss.endingStart=ZeroSlopeEnding,Ss.endingEnd=ZeroSlopeEnding):(ca?Ss.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Ss.endingStart=WrapAroundEnding,ga?Ss.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Ss.endingEnd=WrapAroundEnding)},_scheduleFading:function(ca,ga,_s){var Ss=this._mixer,Ms=Ss.time,Cs=this._weightInterpolant;Cs===null&&(Cs=Ss._lendControlInterpolant(),this._weightInterpolant=Cs);var Ts=Cs.parameterPositions,Is=Cs.sampleValues;return Ts[0]=Ms,Is[0]=ga,Ts[1]=Ms+ca,Is[1]=_s,this}});function AnimationMixer(ca){this._root=ca,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(ca,ga){var _s=ca._localRoot||this._root,Ss=ca._clip.tracks,Ms=Ss.length,Cs=ca._propertyBindings,Ts=ca._interpolants,Is=_s.uuid,Bs=this._bindingsByRootAndName,Ps=Bs[Is];Ps===void 0&&(Ps={},Bs[Is]=Ps);for(var Ls=0;Ls!==Ms;++Ls){var Rs=Ss[Ls],Os=Rs.name,Fs=Ps[Os];if(Fs!==void 0)Cs[Ls]=Fs;else{if(Fs=Cs[Ls],Fs!==void 0){Fs._cacheIndex===null&&(++Fs.referenceCount,this._addInactiveBinding(Fs,Is,Os));continue}var Vs=ga&&ga._propertyBindings[Ls].binding.parsedPath;Fs=new PropertyMixer(PropertyBinding.create(_s,Os,Vs),Rs.ValueTypeName,Rs.getValueSize()),++Fs.referenceCount,this._addInactiveBinding(Fs,Is,Os),Cs[Ls]=Fs}Ts[Ls].resultBuffer=Fs.buffer}},_activateAction:function(ca){if(!this._isActiveAction(ca)){if(ca._cacheIndex===null){var ga=(ca._localRoot||this._root).uuid,_s=ca._clip.uuid,Ss=this._actionsByClip[_s];this._bindAction(ca,Ss&&Ss.knownActions[0]),this._addInactiveAction(ca,_s,ga)}for(var Ms=ca._propertyBindings,Cs=0,Ts=Ms.length;Cs!==Ts;++Cs){var Is=Ms[Cs];Is.useCount++===0&&(this._lendBinding(Is),Is.saveOriginalState())}this._lendAction(ca)}},_deactivateAction:function(ca){if(this._isActiveAction(ca)){for(var ga=ca._propertyBindings,_s=0,Ss=ga.length;_s!==Ss;++_s){var Ms=ga[_s];--Ms.useCount===0&&(Ms.restoreOriginalState(),this._takeBackBinding(Ms))}this._takeBackAction(ca)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var ca=this;this.stats={actions:{get total(){return ca._actions.length},get inUse(){return ca._nActiveActions}},bindings:{get total(){return ca._bindings.length},get inUse(){return ca._nActiveBindings}},controlInterpolants:{get total(){return ca._controlInterpolants.length},get inUse(){return ca._nActiveControlInterpolants}}}},_isActiveAction:function(ca){var ga=ca._cacheIndex;return ga!==null&&ga<this._nActiveActions},_addInactiveAction:function(ca,ga,_s){var Ss=this._actions,Ms=this._actionsByClip,Cs=Ms[ga];if(Cs===void 0)Cs={knownActions:[ca],actionByRoot:{}},ca._byClipCacheIndex=0,Ms[ga]=Cs;else{var Ts=Cs.knownActions;ca._byClipCacheIndex=Ts.length,Ts.push(ca)}ca._cacheIndex=Ss.length,Ss.push(ca),Cs.actionByRoot[_s]=ca},_removeInactiveAction:function(ca){var ga=this._actions,_s=ga[ga.length-1],Ss=ca._cacheIndex;_s._cacheIndex=Ss,ga[Ss]=_s,ga.pop(),ca._cacheIndex=null;var Ms=ca._clip.uuid,Cs=this._actionsByClip,Ts=Cs[Ms],Is=Ts.knownActions,Bs=Is[Is.length-1],Ps=ca._byClipCacheIndex;Bs._byClipCacheIndex=Ps,Is[Ps]=Bs,Is.pop(),ca._byClipCacheIndex=null;var Ls=Ts.actionByRoot,Rs=(ca._localRoot||this._root).uuid;delete Ls[Rs],Is.length===0&&delete Cs[Ms],this._removeInactiveBindingsForAction(ca)},_removeInactiveBindingsForAction:function(ca){for(var ga=ca._propertyBindings,_s=0,Ss=ga.length;_s!==Ss;++_s){var Ms=ga[_s];--Ms.referenceCount===0&&this._removeInactiveBinding(Ms)}},_lendAction:function(ca){var ga=this._actions,_s=ca._cacheIndex,Ss=this._nActiveActions++,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_takeBackAction:function(ca){var ga=this._actions,_s=ca._cacheIndex,Ss=--this._nActiveActions,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_addInactiveBinding:function(ca,ga,_s){var Ss=this._bindingsByRootAndName,Ms=Ss[ga],Cs=this._bindings;Ms===void 0&&(Ms={},Ss[ga]=Ms),Ms[_s]=ca,ca._cacheIndex=Cs.length,Cs.push(ca)},_removeInactiveBinding:function(ca){var ga=this._bindings,_s=ca.binding,Ss=_s.rootNode.uuid,Ms=_s.path,Cs=this._bindingsByRootAndName,Ts=Cs[Ss],Is=ga[ga.length-1],Bs=ca._cacheIndex;Is._cacheIndex=Bs,ga[Bs]=Is,ga.pop(),delete Ts[Ms],Object.keys(Ts).length===0&&delete Cs[Ss]},_lendBinding:function(ca){var ga=this._bindings,_s=ca._cacheIndex,Ss=this._nActiveBindings++,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_takeBackBinding:function(ca){var ga=this._bindings,_s=ca._cacheIndex,Ss=--this._nActiveBindings,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_lendControlInterpolant:function(){var ca=this._controlInterpolants,ga=this._nActiveControlInterpolants++,_s=ca[ga];return _s===void 0&&(_s=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),_s.__cacheIndex=ga,ca[ga]=_s),_s},_takeBackControlInterpolant:function(ca){var ga=this._controlInterpolants,_s=ca.__cacheIndex,Ss=--this._nActiveControlInterpolants,Ms=ga[Ss];ca.__cacheIndex=Ss,ga[Ss]=ca,Ms.__cacheIndex=_s,ga[_s]=Ms},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(ca,ga,_s){var Ss=ga||this._root,Ms=Ss.uuid,Cs=typeof ca=="string"?AnimationClip.findByName(Ss,ca):ca,Ts=Cs!==null?Cs.uuid:ca,Is=this._actionsByClip[Ts],Bs=null;if(_s===void 0&&(Cs!==null?_s=Cs.blendMode:_s=NormalAnimationBlendMode),Is!==void 0){var Ps=Is.actionByRoot[Ms];if(Ps!==void 0&&Ps.blendMode===_s)return Ps;Bs=Is.knownActions[0],Cs===null&&(Cs=Bs._clip)}if(Cs===null)return null;var Ls=new AnimationAction(this,Cs,ga,_s);return this._bindAction(Ls,Bs),this._addInactiveAction(Ls,Ts,Ms),Ls},existingAction:function(ca,ga){var _s=ga||this._root,Ss=_s.uuid,Ms=typeof ca=="string"?AnimationClip.findByName(_s,ca):ca,Cs=Ms?Ms.uuid:ca,Ts=this._actionsByClip[Cs];return Ts!==void 0&&Ts.actionByRoot[Ss]||null},stopAllAction:function(){for(var ca=this._actions,ga=this._nActiveActions,_s=ga-1;_s>=0;--_s)ca[_s].stop();return this},update:function(ca){ca*=this.timeScale;for(var ga=this._actions,_s=this._nActiveActions,Ss=this.time+=ca,Ms=Math.sign(ca),Cs=this._accuIndex^=1,Ts=0;Ts!==_s;++Ts){var Is=ga[Ts];Is._update(Ss,ca,Ms,Cs)}for(var Bs=this._bindings,Ps=this._nActiveBindings,Ts=0;Ts!==Ps;++Ts)Bs[Ts].apply(Cs);return this},setTime:function(ca){this.time=0;for(var ga=0;ga<this._actions.length;ga++)this._actions[ga].time=0;return this.update(ca)},getRoot:function(){return this._root},uncacheClip:function(ca){var ga=this._actions,_s=ca.uuid,Ss=this._actionsByClip,Ms=Ss[_s];if(Ms!==void 0){for(var Cs=Ms.knownActions,Ts=0,Is=Cs.length;Ts!==Is;++Ts){var Bs=Cs[Ts];this._deactivateAction(Bs);var Ps=Bs._cacheIndex,Ls=ga[ga.length-1];Bs._cacheIndex=null,Bs._byClipCacheIndex=null,Ls._cacheIndex=Ps,ga[Ps]=Ls,ga.pop(),this._removeInactiveBindingsForAction(Bs)}delete Ss[_s]}},uncacheRoot:function(ca){var ga=ca.uuid,_s=this._actionsByClip;for(var Ss in _s){var Ms=_s[Ss].actionByRoot,Cs=Ms[ga];Cs!==void 0&&(this._deactivateAction(Cs),this._removeInactiveAction(Cs))}var Ts=this._bindingsByRootAndName,Is=Ts[ga];if(Is!==void 0)for(var Bs in Is){var Ps=Is[Bs];Ps.restoreOriginalState(),this._removeInactiveBinding(Ps)}},uncacheAction:function(ca,ga){var _s=this.existingAction(ca,ga);_s!==null&&(this._deactivateAction(_s),this._removeInactiveAction(_s))}});function Uniform(ca){typeof ca=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),ca=arguments[1]),this.value=ca}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(ca,ga,_s){InterleavedBuffer.call(this,ca,ga),this.meshPerAttribute=_s||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(ca){return InterleavedBuffer.prototype.copy.call(this,ca),this.meshPerAttribute=ca.meshPerAttribute,this}});function Raycaster(ca,ga,_s,Ss){this.ray=new Ray(ca,ga),this.near=_s||0,this.far=Ss||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(ca,ga){return ca.distance-ga.distance}function intersectObject(ca,ga,_s,Ss){if(ca.layers.test(ga.layers)&&ca.raycast(ga,_s),Ss===!0)for(var Ms=ca.children,Cs=0,Ts=Ms.length;Cs<Ts;Cs++)intersectObject(Ms[Cs],ga,_s,!0)}Object.assign(Raycaster.prototype,{set:function(ca,ga){this.ray.set(ca,ga)},setFromCamera:function(ca,ga){ga&&ga.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(ga.matrixWorld),this.ray.direction.set(ca.x,ca.y,.5).unproject(ga).sub(this.ray.origin).normalize(),this.camera=ga):ga&&ga.isOrthographicCamera?(this.ray.origin.set(ca.x,ca.y,(ga.near+ga.far)/(ga.near-ga.far)).unproject(ga),this.ray.direction.set(0,0,-1).transformDirection(ga.matrixWorld),this.camera=ga):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(ca,ga,_s){var Ss=_s||[];return intersectObject(ca,this,Ss,ga),Ss.sort(ascSort),Ss},intersectObjects:function(ca,ga,_s){var Ss=_s||[];if(Array.isArray(ca)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Ss;for(var Ms=0,Cs=ca.length;Ms<Cs;Ms++)intersectObject(ca[Ms],this,Ss,ga);return Ss.sort(ascSort),Ss}});function Spherical(ca,ga,_s){return this.radius=ca!==void 0?ca:1,this.phi=ga!==void 0?ga:0,this.theta=_s!==void 0?_s:0,this}Object.assign(Spherical.prototype,{set:function(ca,ga,_s){return this.radius=ca,this.phi=ga,this.theta=_s,this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.radius=ca.radius,this.phi=ca.phi,this.theta=ca.theta,this},makeSafe:function(){var ca=1e-6;return this.phi=Math.max(ca,Math.min(Math.PI-ca,this.phi)),this},setFromVector3:function(ca){return this.setFromCartesianCoords(ca.x,ca.y,ca.z)},setFromCartesianCoords:function(ca,ga,_s){return this.radius=Math.sqrt(ca*ca+ga*ga+_s*_s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(ca,_s),this.phi=Math.acos(MathUtils.clamp(ga/this.radius,-1,1))),this}});function Cylindrical(ca,ga,_s){return this.radius=ca!==void 0?ca:1,this.theta=ga!==void 0?ga:0,this.y=_s!==void 0?_s:0,this}Object.assign(Cylindrical.prototype,{set:function(ca,ga,_s){return this.radius=ca,this.theta=ga,this.y=_s,this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.radius=ca.radius,this.theta=ca.theta,this.y=ca.y,this},setFromVector3:function(ca){return this.setFromCartesianCoords(ca.x,ca.y,ca.z)},setFromCartesianCoords:function(ca,ga,_s){return this.radius=Math.sqrt(ca*ca+_s*_s),this.theta=Math.atan2(ca,_s),this.y=ga,this}});var _vector$7=new Vector2;function Box2(ca,ga){this.min=ca!==void 0?ca:new Vector2(1/0,1/0),this.max=ga!==void 0?ga:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(ca,ga){return this.min.copy(ca),this.max.copy(ga),this},setFromPoints:function(ca){this.makeEmpty();for(var ga=0,_s=ca.length;ga<_s;ga++)this.expandByPoint(ca[ga]);return this},setFromCenterAndSize:function(ca,ga){var _s=_vector$7.copy(ga).multiplyScalar(.5);return this.min.copy(ca).sub(_s),this.max.copy(ca).add(_s),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.min.copy(ca.min),this.max.copy(ca.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),ca=new Vector2),this.isEmpty()?ca.set(0,0):ca.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(ca){return ca===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),ca=new Vector2),this.isEmpty()?ca.set(0,0):ca.subVectors(this.max,this.min)},expandByPoint:function(ca){return this.min.min(ca),this.max.max(ca),this},expandByVector:function(ca){return this.min.sub(ca),this.max.add(ca),this},expandByScalar:function(ca){return this.min.addScalar(-ca),this.max.addScalar(ca),this},containsPoint:function(ca){return!(ca.x<this.min.x||ca.x>this.max.x||ca.y<this.min.y||ca.y>this.max.y)},containsBox:function(ca){return this.min.x<=ca.min.x&&ca.max.x<=this.max.x&&this.min.y<=ca.min.y&&ca.max.y<=this.max.y},getParameter:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),ga=new Vector2),ga.set((ca.x-this.min.x)/(this.max.x-this.min.x),(ca.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(ca){return!(ca.max.x<this.min.x||ca.min.x>this.max.x||ca.max.y<this.min.y||ca.min.y>this.max.y)},clampPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),ga=new Vector2),ga.copy(ca).clamp(this.min,this.max)},distanceToPoint:function(ca){var ga=_vector$7.copy(ca).clamp(this.min,this.max);return ga.sub(ca).length()},intersect:function(ca){return this.min.max(ca.min),this.max.min(ca.max),this},union:function(ca){return this.min.min(ca.min),this.max.max(ca.max),this},translate:function(ca){return this.min.add(ca),this.max.add(ca),this},equals:function(ca){return ca.min.equals(this.min)&&ca.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(ca,ga){this.start=ca!==void 0?ca:new Vector3,this.end=ga!==void 0?ga:new Vector3}Object.assign(Line3.prototype,{set:function(ca,ga){return this.start.copy(ca),this.end.copy(ga),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.start.copy(ca.start),this.end.copy(ca.end),this},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),ca=new Vector3),ca.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(ca){return ca===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),ca=new Vector3),ca.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(ca,ga){return ga===void 0&&(console.warn("THREE.Line3: .at() target is now required"),ga=new Vector3),this.delta(ga).multiplyScalar(ca).add(this.start)},closestPointToPointParameter:function(ca,ga){_startP.subVectors(ca,this.start),_startEnd.subVectors(this.end,this.start);var _s=_startEnd.dot(_startEnd),Ss=_startEnd.dot(_startP),Ms=Ss/_s;return ga&&(Ms=MathUtils.clamp(Ms,0,1)),Ms},closestPointToPoint:function(ca,ga,_s){var Ss=this.closestPointToPointParameter(ca,ga);return _s===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),_s=new Vector3),this.delta(_s).multiplyScalar(Ss).add(this.start)},applyMatrix4:function(ca){return this.start.applyMatrix4(ca),this.end.applyMatrix4(ca),this},equals:function(ca){return ca.start.equals(this.start)&&ca.end.equals(this.end)}});function ImmediateRenderObject(ca){Object3D.call(this),this.material=ca,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(ca,ga){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=ga;for(var _s=new BufferGeometry,Ss=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Ms=0,Cs=1,Ts=32;Ms<Ts;Ms++,Cs++){var Is=Ms/Ts*Math.PI*2,Bs=Cs/Ts*Math.PI*2;Ss.push(Math.cos(Is),Math.sin(Is),1,Math.cos(Bs),Math.sin(Bs),1)}_s.setAttribute("position",new Float32BufferAttribute(Ss,3));var Ps=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(_s,Ps),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var ca=this.light.distance?this.light.distance:1e3,ga=ca*Math.tan(this.light.angle);this.cone.scale.set(ga,ga,ca),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(ca){var ga=[];ca&&ca.isBone&&ga.push(ca);for(var _s=0;_s<ca.children.length;_s++)ga.push.apply(ga,getBoneList(ca.children[_s]));return ga}function SkeletonHelper(ca){for(var ga=getBoneList(ca),_s=new BufferGeometry,Ss=[],Ms=[],Cs=new Color(0,0,1),Ts=new Color(0,1,0),Is=0;Is<ga.length;Is++){var Bs=ga[Is];Bs.parent&&Bs.parent.isBone&&(Ss.push(0,0,0),Ss.push(0,0,0),Ms.push(Cs.r,Cs.g,Cs.b),Ms.push(Ts.r,Ts.g,Ts.b))}_s.setAttribute("position",new Float32BufferAttribute(Ss,3)),_s.setAttribute("color",new Float32BufferAttribute(Ms,3));var Ps=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,_s,Ps),this.type="SkeletonHelper",this.root=ca,this.bones=ga,this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(ca){var ga=this.bones,_s=this.geometry,Ss=_s.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Ms=0,Cs=0;Ms<ga.length;Ms++){var Ts=ga[Ms];Ts.parent&&Ts.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Ts.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ss.setXYZ(Cs,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Ts.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ss.setXYZ(Cs+1,_vector$9.x,_vector$9.y,_vector$9.z),Cs+=2)}_s.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,ca)};function PointLightHelper(ca,ga,_s){this.light=ca,this.light.updateMatrixWorld(),this.color=_s;var Ss=new SphereBufferGeometry(ga,4,2),Ms=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Ss,Ms),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(ca,ga,_s){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=_s;var Ss=new OctahedronBufferGeometry(ga);Ss.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Ms=Ss.getAttribute("position"),Cs=new Float32Array(Ms.count*3);Ss.setAttribute("color",new BufferAttribute(Cs,3)),this.add(new Mesh(Ss,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var ca=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var ga=ca.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var _s=0,Ss=ga.count;_s<Ss;_s++){var Ms=_s<Ss/2?_color1:_color2;ga.setXYZ(_s,Ms.r,Ms.g,Ms.b)}ga.needsUpdate=!0}ca.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(ca,ga,_s,Ss){ca=ca||10,ga=ga||10,_s=new Color(_s!==void 0?_s:4473924),Ss=new Color(Ss!==void 0?Ss:8947848);for(var Ms=ga/2,Cs=ca/ga,Ts=ca/2,Is=[],Bs=[],Ps=0,Ls=0,Rs=-Ts;Ps<=ga;Ps++,Rs+=Cs){Is.push(-Ts,0,Rs,Ts,0,Rs),Is.push(Rs,0,-Ts,Rs,0,Ts);var Os=Ps===Ms?_s:Ss;Os.toArray(Bs,Ls),Ls+=3,Os.toArray(Bs,Ls),Ls+=3,Os.toArray(Bs,Ls),Ls+=3,Os.toArray(Bs,Ls),Ls+=3}var Fs=new BufferGeometry;Fs.setAttribute("position",new Float32BufferAttribute(Is,3)),Fs.setAttribute("color",new Float32BufferAttribute(Bs,3));var Vs=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Fs,Vs),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(ca){return LineSegments.prototype.copy.call(this,ca),this.geometry.copy(ca.geometry),this.material.copy(ca.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(ca,ga,_s,Ss,Ms,Cs){ca=ca||10,ga=ga||16,_s=_s||8,Ss=Ss||64,Ms=new Color(Ms!==void 0?Ms:4473924),Cs=new Color(Cs!==void 0?Cs:8947848);var Ts=[],Is=[],Bs,Ps,Ls,Rs,Os,Fs,Vs;for(Rs=0;Rs<=ga;Rs++)Ls=Rs/ga*(Math.PI*2),Bs=Math.sin(Ls)*ca,Ps=Math.cos(Ls)*ca,Ts.push(0,0,0),Ts.push(Bs,0,Ps),Vs=Rs&1?Ms:Cs,Is.push(Vs.r,Vs.g,Vs.b),Is.push(Vs.r,Vs.g,Vs.b);for(Rs=0;Rs<=_s;Rs++)for(Vs=Rs&1?Ms:Cs,Fs=ca-ca/_s*Rs,Os=0;Os<Ss;Os++)Ls=Os/Ss*(Math.PI*2),Bs=Math.sin(Ls)*Fs,Ps=Math.cos(Ls)*Fs,Ts.push(Bs,0,Ps),Is.push(Vs.r,Vs.g,Vs.b),Ls=(Os+1)/Ss*(Math.PI*2),Bs=Math.sin(Ls)*Fs,Ps=Math.cos(Ls)*Fs,Ts.push(Bs,0,Ps),Is.push(Vs.r,Vs.g,Vs.b);var ks=new BufferGeometry;ks.setAttribute("position",new Float32BufferAttribute(Ts,3)),ks.setAttribute("color",new Float32BufferAttribute(Is,3));var Ns=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,ks,Ns),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(ca,ga,_s){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=_s,ga===void 0&&(ga=1);var Ss=new BufferGeometry;Ss.setAttribute("position",new Float32BufferAttribute([-ga,ga,0,ga,ga,0,ga,-ga,0,-ga,-ga,0,-ga,ga,0],3));var Ms=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Ss,Ms),this.add(this.lightPlane),Ss=new BufferGeometry,Ss.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Ss,Ms),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(ca){var ga=new BufferGeometry,_s=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Ss=[],Ms=[],Cs={},Ts=new Color(16755200),Is=new Color(16711680),Bs=new Color(43775),Ps=new Color(16777215),Ls=new Color(3355443);Rs("n1","n2",Ts),Rs("n2","n4",Ts),Rs("n4","n3",Ts),Rs("n3","n1",Ts),Rs("f1","f2",Ts),Rs("f2","f4",Ts),Rs("f4","f3",Ts),Rs("f3","f1",Ts),Rs("n1","f1",Ts),Rs("n2","f2",Ts),Rs("n3","f3",Ts),Rs("n4","f4",Ts),Rs("p","n1",Is),Rs("p","n2",Is),Rs("p","n3",Is),Rs("p","n4",Is),Rs("u1","u2",Bs),Rs("u2","u3",Bs),Rs("u3","u1",Bs),Rs("c","t",Ps),Rs("p","c",Ls),Rs("cn1","cn2",Ls),Rs("cn3","cn4",Ls),Rs("cf1","cf2",Ls),Rs("cf3","cf4",Ls);function Rs(Fs,Vs,ks){Os(Fs,ks),Os(Vs,ks)}function Os(Fs,Vs){Ss.push(0,0,0),Ms.push(Vs.r,Vs.g,Vs.b),Cs[Fs]===void 0&&(Cs[Fs]=[]),Cs[Fs].push(Ss.length/3-1)}ga.setAttribute("position",new Float32BufferAttribute(Ss,3)),ga.setAttribute("color",new Float32BufferAttribute(Ms,3)),LineSegments.call(this,ga,_s),this.type="CameraHelper",this.camera=ca,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Cs,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var ca=this.geometry,ga=this.pointMap,_s=1,Ss=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",ga,ca,_camera,0,0,-1),setPoint("t",ga,ca,_camera,0,0,1),setPoint("n1",ga,ca,_camera,-_s,-Ss,-1),setPoint("n2",ga,ca,_camera,_s,-Ss,-1),setPoint("n3",ga,ca,_camera,-_s,Ss,-1),setPoint("n4",ga,ca,_camera,_s,Ss,-1),setPoint("f1",ga,ca,_camera,-_s,-Ss,1),setPoint("f2",ga,ca,_camera,_s,-Ss,1),setPoint("f3",ga,ca,_camera,-_s,Ss,1),setPoint("f4",ga,ca,_camera,_s,Ss,1),setPoint("u1",ga,ca,_camera,_s*.7,Ss*1.1,-1),setPoint("u2",ga,ca,_camera,-_s*.7,Ss*1.1,-1),setPoint("u3",ga,ca,_camera,0,Ss*2,-1),setPoint("cf1",ga,ca,_camera,-_s,0,1),setPoint("cf2",ga,ca,_camera,_s,0,1),setPoint("cf3",ga,ca,_camera,0,-Ss,1),setPoint("cf4",ga,ca,_camera,0,Ss,1),setPoint("cn1",ga,ca,_camera,-_s,0,-1),setPoint("cn2",ga,ca,_camera,_s,0,-1),setPoint("cn3",ga,ca,_camera,0,-Ss,-1),setPoint("cn4",ga,ca,_camera,0,Ss,-1),ca.getAttribute("position").needsUpdate=!0};function setPoint(ca,ga,_s,Ss,Ms,Cs,Ts){_vector$b.set(Ms,Cs,Ts).unproject(Ss);var Is=ga[ca];if(Is!==void 0)for(var Bs=_s.getAttribute("position"),Ps=0,Ls=Is.length;Ps<Ls;Ps++)Bs.setXYZ(Is[Ps],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(ca,ga){this.object=ca,ga===void 0&&(ga=16776960);var _s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ss=new Float32Array(8*3),Ms=new BufferGeometry;Ms.setIndex(new BufferAttribute(_s,1)),Ms.setAttribute("position",new BufferAttribute(Ss,3)),LineSegments.call(this,Ms,new LineBasicMaterial({color:ga,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(ca){if(ca!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var ga=_box$3.min,_s=_box$3.max,Ss=this.geometry.attributes.position,Ms=Ss.array;Ms[0]=_s.x,Ms[1]=_s.y,Ms[2]=_s.z,Ms[3]=ga.x,Ms[4]=_s.y,Ms[5]=_s.z,Ms[6]=ga.x,Ms[7]=ga.y,Ms[8]=_s.z,Ms[9]=_s.x,Ms[10]=ga.y,Ms[11]=_s.z,Ms[12]=_s.x,Ms[13]=_s.y,Ms[14]=ga.z,Ms[15]=ga.x,Ms[16]=_s.y,Ms[17]=ga.z,Ms[18]=ga.x,Ms[19]=ga.y,Ms[20]=ga.z,Ms[21]=_s.x,Ms[22]=ga.y,Ms[23]=ga.z,Ss.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(ca){return this.object=ca,this.update(),this};BoxHelper.prototype.copy=function(ca){return LineSegments.prototype.copy.call(this,ca),this.object=ca.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(ca,ga){this.type="Box3Helper",this.box=ca,ga=ga||16776960;var _s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ss=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Ms=new BufferGeometry;Ms.setIndex(new BufferAttribute(_s,1)),Ms.setAttribute("position",new Float32BufferAttribute(Ss,3)),LineSegments.call(this,Ms,new LineBasicMaterial({color:ga,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(ca){var ga=this.box;ga.isEmpty()||(ga.getCenter(this.position),ga.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,ca))};function PlaneHelper(ca,ga,_s){this.plane=ca,this.size=ga===void 0?1:ga;var Ss=_s!==void 0?_s:16776960,Ms=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Cs=new BufferGeometry;Cs.setAttribute("position",new Float32BufferAttribute(Ms,3)),Cs.computeBoundingSphere(),Line$1.call(this,Cs,new LineBasicMaterial({color:Ss,toneMapped:!1})),this.type="PlaneHelper";var Ts=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Is=new BufferGeometry;Is.setAttribute("position",new Float32BufferAttribute(Ts,3)),Is.computeBoundingSphere(),this.add(new Mesh(Is,new MeshBasicMaterial({color:Ss,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(ca){var ga=-this.plane.constant;Math.abs(ga)<1e-8&&(ga=1e-8),this.scale.set(.5*this.size,.5*this.size,ga),this.children[0].material.side=ga<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,ca)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(ca,ga,_s,Ss,Ms,Cs){Object3D.call(this),this.type="ArrowHelper",ca===void 0&&(ca=new Vector3(0,0,1)),ga===void 0&&(ga=new Vector3(0,0,0)),_s===void 0&&(_s=1),Ss===void 0&&(Ss=16776960),Ms===void 0&&(Ms=.2*_s),Cs===void 0&&(Cs=.2*Ms),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(ga),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Ss,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Ss,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(ca),this.setLength(_s,Ms,Cs)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(ca){if(ca.y>.99999)this.quaternion.set(0,0,0,1);else if(ca.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(ca.z,0,-ca.x).normalize();var ga=Math.acos(ca.y);this.quaternion.setFromAxisAngle(_axis,ga)}};ArrowHelper.prototype.setLength=function(ca,ga,_s){ga===void 0&&(ga=.2*ca),_s===void 0&&(_s=.2*ga),this.line.scale.set(1,Math.max(1e-4,ca-ga),1),this.line.updateMatrix(),this.cone.scale.set(_s,ga,_s),this.cone.position.y=ca,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(ca){this.line.material.color.set(ca),this.cone.material.color.set(ca)};ArrowHelper.prototype.copy=function(ca){return Object3D.prototype.copy.call(this,ca,!1),this.line.copy(ca.line),this.cone.copy(ca.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(ca){ca=ca||1;var ga=[0,0,0,ca,0,0,0,0,0,0,ca,0,0,0,0,0,0,ca],_s=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Ss=new BufferGeometry;Ss.setAttribute("position",new Float32BufferAttribute(ga,3)),Ss.setAttribute("color",new Float32BufferAttribute(_s,3));var Ms=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Ss,Ms),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(ca){this._renderer=ca,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(ca,ga=0,_s=.1,Ss=100){_oldTarget=this._renderer.getRenderTarget();var Ms=this._allocateTargets();return this._sceneToCubeUV(ca,_s,Ss,Ms),ga>0&&this._blur(Ms,0,0,ga),this._applyPMREM(Ms),this._cleanup(Ms),Ms},fromEquirectangular:function(ca){return ca.magFilter=NearestFilter,ca.minFilter=NearestFilter,ca.generateMipmaps=!1,this.fromCubemap(ca)},fromCubemap:function(ca){_oldTarget=this._renderer.getRenderTarget();var ga=this._allocateTargets(ca);return this._textureToCubeUV(ca,ga),this._applyPMREM(ga),this._cleanup(ga),ga},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var ca=0;ca<_lodPlanes.length;ca++)_lodPlanes[ca].dispose()},_cleanup:function(ca){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),ca.scissorTest=!1,ca.setSize(ca.width,ca.height)},_allocateTargets:function(ca){var ga={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(ca)?ca.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},_s=_createRenderTarget(ga);return _s.depthBuffer=!ca,this._pingPongRenderTarget=_createRenderTarget(ga),_s},_compileMaterial:function(ca){var ga=new Mesh(_lodPlanes[0],ca);this._renderer.compile(ga,_flatCamera)},_sceneToCubeUV:function(ca,ga,_s,Ss){var Ms=90,Cs=1,Ts=new PerspectiveCamera(Ms,Cs,ga,_s),Is=[1,-1,1,1,1,1],Bs=[1,1,1,-1,-1,-1],Ps=this._renderer,Ls=Ps.outputEncoding,Rs=Ps.toneMapping,Os=Ps.toneMappingExposure,Fs=Ps.getClearColor(),Vs=Ps.getClearAlpha();Ps.toneMapping=LinearToneMapping,Ps.toneMappingExposure=1,Ps.outputEncoding=LinearEncoding;var ks=ca.background;if(ks&&ks.isColor){ks.convertSRGBToLinear();var Ns=Math.max(ks.r,ks.g,ks.b),Ds=Math.min(Math.max(Math.ceil(Math.log2(Ns)),-128),127);ks=ks.multiplyScalar(Math.pow(2,-Ds));var $s=(Ds+128)/255;Ps.setClearColor(ks,$s),ca.background=null}for(var Gs=0;Gs<6;Gs++){var Us=Gs%3;Us==0?(Ts.up.set(0,Is[Gs],0),Ts.lookAt(Bs[Gs],0,0)):Us==1?(Ts.up.set(0,0,Is[Gs]),Ts.lookAt(0,Bs[Gs],0)):(Ts.up.set(0,Is[Gs],0),Ts.lookAt(0,0,Bs[Gs])),_setViewport(Ss,Us*SIZE_MAX,Gs>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Ps.setRenderTarget(Ss),Ps.render(ca,Ts)}Ps.toneMapping=Rs,Ps.toneMappingExposure=Os,Ps.outputEncoding=Ls,Ps.setClearColor(Fs,Vs)},_textureToCubeUV:function(ca,ga){var _s=this._renderer;ca.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Ss=ca.isCubeTexture?this._cubemapShader:this._equirectShader,Ms=new Mesh(_lodPlanes[0],Ss),Cs=Ss.uniforms;Cs.envMap.value=ca,ca.isCubeTexture||Cs.texelSize.value.set(1/ca.image.width,1/ca.image.height),Cs.inputEncoding.value=ENCODINGS[ca.encoding],Cs.outputEncoding.value=ENCODINGS[ga.texture.encoding],_setViewport(ga,0,0,3*SIZE_MAX,2*SIZE_MAX),_s.setRenderTarget(ga),_s.render(Ms,_flatCamera)},_applyPMREM:function(ca){var ga=this._renderer,_s=ga.autoClear;ga.autoClear=!1;for(var Ss=1;Ss<TOTAL_LODS;Ss++){var Ms=Math.sqrt(_sigmas[Ss]*_sigmas[Ss]-_sigmas[Ss-1]*_sigmas[Ss-1]),Cs=_axisDirections[(Ss-1)%_axisDirections.length];this._blur(ca,Ss-1,Ss,Ms,Cs)}ga.autoClear=_s},_blur:function(ca,ga,_s,Ss,Ms){var Cs=this._pingPongRenderTarget;this._halfBlur(ca,Cs,ga,_s,Ss,"latitudinal",Ms),this._halfBlur(Cs,ca,_s,_s,Ss,"longitudinal",Ms)},_halfBlur:function(ca,ga,_s,Ss,Ms,Cs,Ts){var Is=this._renderer,Bs=this._blurMaterial;Cs!=="latitudinal"&&Cs!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Ps=3,Ls=new Mesh(_lodPlanes[Ss],Bs),Rs=Bs.uniforms,Os=_sizeLods[_s]-1,Fs=isFinite(Ms)?Math.PI/(2*Os):2*Math.PI/(2*MAX_SAMPLES-1),Vs=Ms/Fs,ks=isFinite(Ms)?1+Math.floor(Ps*Vs):MAX_SAMPLES;ks>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Ms}, is too large and will clip, as it requested ${ks} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Ns=[],Ds=0,$s=0;$s<MAX_SAMPLES;++$s){var Hs=$s/Vs,Gs=Math.exp(-Hs*Hs/2);Ns.push(Gs),$s==0?Ds+=Gs:$s<ks&&(Ds+=2*Gs)}for(var $s=0;$s<Ns.length;$s++)Ns[$s]=Ns[$s]/Ds;Rs.envMap.value=ca.texture,Rs.samples.value=ks,Rs.weights.value=Ns,Rs.latitudinal.value=Cs==="latitudinal",Ts&&(Rs.poleAxis.value=Ts),Rs.dTheta.value=Fs,Rs.mipInt.value=LOD_MAX-_s,Rs.inputEncoding.value=ENCODINGS[ca.texture.encoding],Rs.outputEncoding.value=ENCODINGS[ca.texture.encoding];var Us=_sizeLods[Ss],Hs=3*Math.max(0,SIZE_MAX-2*Us),zs=(Ss===0?0:2*SIZE_MAX)+2*Us*(Ss>LOD_MAX-LOD_MIN?Ss-LOD_MAX+LOD_MIN:0);_setViewport(ga,Hs,zs,3*Us,2*Us),Is.setRenderTarget(ga),Is.render(Ls,_flatCamera)}};function _isLDR(ca){return ca===void 0||ca.type!==UnsignedByteType?!1:ca.encoding===LinearEncoding||ca.encoding===sRGBEncoding||ca.encoding===GammaEncoding}function _createPlanes(){for(var ca=[],ga=[],_s=[],Ss=LOD_MAX,Ms=0;Ms<TOTAL_LODS;Ms++){var Cs=Math.pow(2,Ss);ga.push(Cs);var Ts=1/Cs;Ms>LOD_MAX-LOD_MIN?Ts=EXTRA_LOD_SIGMA[Ms-LOD_MAX+LOD_MIN-1]:Ms==0&&(Ts=0),_s.push(Ts);for(var Is=1/(Cs-1),Bs=-Is/2,Ps=1+Is/2,Ls=[Bs,Bs,Ps,Bs,Ps,Ps,Bs,Bs,Ps,Ps,Bs,Ps],Rs=6,Os=6,Fs=3,Vs=2,ks=1,Ns=new Float32Array(Fs*Os*Rs),Ds=new Float32Array(Vs*Os*Rs),$s=new Float32Array(ks*Os*Rs),Gs=0;Gs<Rs;Gs++){var Us=Gs%3*2/3-1,Hs=Gs>2?0:-1,zs=[Us,Hs,0,Us+2/3,Hs,0,Us+2/3,Hs+1,0,Us,Hs,0,Us+2/3,Hs+1,0,Us,Hs+1,0];Ns.set(zs,Fs*Os*Gs),Ds.set(Ls,Vs*Os*Gs);var js=[Gs,Gs,Gs,Gs,Gs,Gs];$s.set(js,ks*Os*Gs)}var Ws=new BufferGeometry;Ws.setAttribute("position",new BufferAttribute(Ns,Fs)),Ws.setAttribute("uv",new BufferAttribute(Ds,Vs)),Ws.setAttribute("faceIndex",new BufferAttribute($s,ks)),ca.push(Ws),Ss>LOD_MIN&&Ss--}return{_lodPlanes:ca,_sizeLods:ga,_sigmas:_s}}function _createRenderTarget(ca){var ga=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,ca);return ga.texture.mapping=CubeUVReflectionMapping,ga.texture.name="PMREM.cubeUv",ga.scissorTest=!0,ga}function _setViewport(ca,ga,_s,Ss,Ms){ca.viewport.set(ga,_s,Ss,Ms),ca.scissor.set(ga,_s,Ss,Ms)}function _getBlurShader(ca){var ga=new Float32Array(ca),_s=new Vector3(0,1,0),Ss=new RawShaderMaterial({defines:{n:ca},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ga},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:_s},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Ss.type="SphericalGaussianBlur",Ss}function _getEquirectShader(){var ca=new Vector2(1,1),ga=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:ca},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return ga.type="EquirectangularToCubeUV",ga}function _getCubemapShader(){var ca=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return ca.type="CubemapToCubeUV",ca}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(ca,ga,_s,Ss,Ms,Cs,Ts){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(ca,ga,_s,Ms,Cs,Ts)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(ca){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),ca}function MultiMaterial(ca){return ca===void 0&&(ca=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),ca.isMultiMaterial=!0,ca.materials=ca,ca.clone=function(){return ca.slice()},ca}function PointCloud(ca,ga){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(ca,ga)}function Particle(ca){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(ca)}function ParticleSystem(ca,ga){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(ca,ga)}function PointCloudMaterial(ca){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function ParticleBasicMaterial(ca){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function ParticleSystemMaterial(ca){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function Vertex(ca,ga,_s){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(ca,ga,_s)}function DynamicBufferAttribute(ca,ga){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(ca,ga).setUsage(DynamicDrawUsage)}function Int8Attribute(ca,ga){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(ca,ga)}function Uint8Attribute(ca,ga){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(ca,ga)}function Uint8ClampedAttribute(ca,ga){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(ca,ga)}function Int16Attribute(ca,ga){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(ca,ga)}function Uint16Attribute(ca,ga){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(ca,ga)}function Int32Attribute(ca,ga){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(ca,ga)}function Uint32Attribute(ca,ga){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(ca,ga)}function Float32Attribute(ca,ga){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(ca,ga)}function Float64Attribute(ca,ga){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(ca,ga)}Curve.create=function(ca,ga){return console.log("THREE.Curve.create() has been deprecated"),ca.prototype=Object.create(Curve.prototype),ca.prototype.constructor=ca,ca.prototype.getPoint=ga,ca};Object.assign(CurvePath.prototype,{createPointsGeometry:function(ca){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var ga=this.getPoints(ca);return this.createGeometry(ga)},createSpacedPointsGeometry:function(ca){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var ga=this.getSpacedPoints(ca);return this.createGeometry(ga)},createGeometry:function(ca){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var ga=new Geometry,_s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s];ga.vertices.push(new Vector3(Ms.x,Ms.y,Ms.z||0))}return ga}});Object.assign(Path.prototype,{fromPoints:function(ca){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(ca)}});function ClosedSplineCurve3(ca){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(ca){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(ca){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(ca){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(ca)}function BoundingBoxHelper(ca,ga){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(ca,ga)}function EdgesHelper(ca,ga){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(ca.geometry),new LineBasicMaterial({color:ga!==void 0?ga:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(ca,ga){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(ca.geometry),new LineBasicMaterial({color:ga!==void 0?ga:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(ca){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(ca)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(ca){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(ca)}function BinaryTextureLoader(ca){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(ca)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(ca){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(ca)}});Object.assign(Box2.prototype,{center:function(ca){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(ca)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(ca){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},size:function(ca){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(ca)}});Object.assign(Box3.prototype,{center:function(ca){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(ca)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(ca){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},isIntersectionSphere:function(ca){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ca)},size:function(ca){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(ca)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(ca){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(ca)};Line3.prototype.center=function(ca){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(ca)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(ca){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(ca)},nextPowerOfTwo:function(ca){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(ca)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(ca,ga){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ca,ga)},multiplyVector3:function(ca){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),ca.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(ca){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),ca.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(ca){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(ca)},flattenToArrayOffset:function(ca,ga){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ca,ga)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(ca){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(ca)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(ca){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},multiplyVector4:function(ca){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(ca){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),ca.transformDirection(this)},crossVector:function(ca){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(ca){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(ca,ga,_s,Ss,Ms,Cs){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(ca,ga,Ss,_s,Ms,Cs)}});Plane.prototype.isIntersectionLine=function(ca){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(ca)};Quaternion.prototype.multiplyVector3=function(ca){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),ca.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(ca){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},isIntersectionPlane:function(ca){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(ca)},isIntersectionSphere:function(ca){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ca)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(ca,ga){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(ca,ga)},midpoint:function(ca){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(ca)},normal:function(ca){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(ca)},plane:function(ca){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(ca)}});Object.assign(Triangle,{barycoordFromPoint:function(ca,ga,_s,Ss,Ms){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(ca,ga,_s,Ss,Ms)},normal:function(ca,ga,_s,Ss){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(ca,ga,_s,Ss)}});Object.assign(Shape.prototype,{extractAllPoints:function(ca){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(ca)},extrude:function(ca){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,ca)},makeGeometry:function(ca){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,ca)}});Object.assign(Vector2.prototype,{fromAttribute:function(ca,ga,_s){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,_s)},distanceToManhattan:function(ca){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ca)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(ca){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(ca)},getScaleFromMatrix:function(ca){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(ca)},getColumnFromMatrix:function(ca,ga){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(ga,ca)},applyProjection:function(ca){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(ca)},fromAttribute:function(ca,ga,_s){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,_s)},distanceToManhattan:function(ca){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ca)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(ca,ga,_s){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,_s)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(ca){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.assign(Object3D.prototype,{getChildByName:function(ca){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(ca)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(ca,ga){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(ga,ca)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(ca){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(ca){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=ca}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(ca){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=ca}});PerspectiveCamera.prototype.setLens=function(ca,ga){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),ga!==void 0&&(this.filmGauge=ga),this.setFocalLength(ca)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(ca){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=ca}},shadowCameraLeft:{set:function(ca){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=ca}},shadowCameraRight:{set:function(ca){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=ca}},shadowCameraTop:{set:function(ca){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=ca}},shadowCameraBottom:{set:function(ca){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=ca}},shadowCameraNear:{set:function(ca){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=ca}},shadowCameraFar:{set:function(ca){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=ca}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(ca){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=ca}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(ca){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=ca}},shadowMapHeight:{set:function(ca){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=ca}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(ca){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ca===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(ca){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(ca)},addAttribute:function(ca,ga){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(ga&&ga.isBufferAttribute)&&!(ga&&ga.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(ca,new BufferAttribute(arguments[1],arguments[2]))):ca==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(ga),this):this.setAttribute(ca,ga)},addDrawCall:function(ca,ga,_s){_s!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(ca,ga)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(ca){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(ca)},applyMatrix:function(ca){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(ca){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=ca}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(ca){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=ca}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(ca){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(ca)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(ca){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ca===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(ca){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=ca===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(ca){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=ca}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(ca){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=ca}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(ca,ga,_s,Ss){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(ca),this.clear(ga,_s,Ss)},animate:function(ca){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(ca)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(ca){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(ca)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(ca){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=ca}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(ca){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=ca}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(ca){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=ca===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(ca,ga,_s){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(ca,_s)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(ca){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=ca}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(ca){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=ca}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(ca){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=ca}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(ca){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=ca}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(ca){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=ca}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(ca){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=ca}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(ca){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=ca}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(ca){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=ca}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(ca){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=ca}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(ca){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=ca}}});Object.defineProperties(Audio$1.prototype,{load:{value:function(ca){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var ga=this,_s=new AudioLoader;return _s.load(ca,function(Ss){ga.setBuffer(Ss)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(ca,ga){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(ca,ga)};var GeometryUtils={merge:function(ca,ga,_s){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Ss;ga.isMesh&&(ga.matrixAutoUpdate&&ga.updateMatrix(),Ss=ga.matrix,ga=ga.geometry),ca.merge(ga,Ss,_s)},center:function(ca){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),ca.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(ca,ga,_s,Ss){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Ms=new TextureLoader;Ms.setCrossOrigin(this.crossOrigin);var Cs=Ms.load(ca,_s,void 0,Ss);return ga&&(Cs.mapping=ga),Cs};ImageUtils.loadTextureCube=function(ca,ga,_s,Ss){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Ms=new CubeTextureLoader;Ms.setCrossOrigin(this.crossOrigin);var Cs=Ms.load(ca,_s,void 0,Ss);return ga&&(Cs.mapping=ga),Cs};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var three_module=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(three_module),tslib={exports:{}};(function(ca){var ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs,Os,Fs,Vs,ks,Ns,Ds,$s,Gs,Us,Hs,zs,js,Ws,Qs;(function(Zs){var Xs=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Zs(eu(Xs,eu(ca.exports)));function eu(Ys,Js){return Ys!==Xs&&(typeof Object.create=="function"?Object.defineProperty(Ys,"__esModule",{value:!0}):Ys.__esModule=!0),function(qs,ru){return Ys[qs]=Js?Js(qs,ru):ru}}})(function(Zs){var Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ys,Js){Ys.__proto__=Js}||function(Ys,Js){for(var qs in Js)Object.prototype.hasOwnProperty.call(Js,qs)&&(Ys[qs]=Js[qs])};ga=function(Ys,Js){if(typeof Js!="function"&&Js!==null)throw new TypeError("Class extends value "+String(Js)+" is not a constructor or null");Xs(Ys,Js);function qs(){this.constructor=Ys}Ys.prototype=Js===null?Object.create(Js):(qs.prototype=Js.prototype,new qs)},_s=Object.assign||function(Ys){for(var Js,qs=1,ru=arguments.length;qs<ru;qs++){Js=arguments[qs];for(var tu in Js)Object.prototype.hasOwnProperty.call(Js,tu)&&(Ys[tu]=Js[tu])}return Ys},Ss=function(Ys,Js){var qs={};for(var ru in Ys)Object.prototype.hasOwnProperty.call(Ys,ru)&&Js.indexOf(ru)<0&&(qs[ru]=Ys[ru]);if(Ys!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tu=0,ru=Object.getOwnPropertySymbols(Ys);tu<ru.length;tu++)Js.indexOf(ru[tu])<0&&Object.prototype.propertyIsEnumerable.call(Ys,ru[tu])&&(qs[ru[tu]]=Ys[ru[tu]]);return qs},Ms=function(Ys,Js,qs,ru){var tu=arguments.length,nu=tu<3?Js:ru===null?ru=Object.getOwnPropertyDescriptor(Js,qs):ru,uu;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")nu=Reflect.decorate(Ys,Js,qs,ru);else for(var fu=Ys.length-1;fu>=0;fu--)(uu=Ys[fu])&&(nu=(tu<3?uu(nu):tu>3?uu(Js,qs,nu):uu(Js,qs))||nu);return tu>3&&nu&&Object.defineProperty(Js,qs,nu),nu},Cs=function(Ys,Js){return function(qs,ru){Js(qs,ru,Ys)}},Ts=function(Ys,Js){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ys,Js)},Is=function(Ys,Js,qs,ru){function tu(nu){return nu instanceof qs?nu:new qs(function(uu){uu(nu)})}return new(qs||(qs=Promise))(function(nu,uu){function fu(Eu){try{vu(ru.next(Eu))}catch(hu){uu(hu)}}function mu(Eu){try{vu(ru.throw(Eu))}catch(hu){uu(hu)}}function vu(Eu){Eu.done?nu(Eu.value):tu(Eu.value).then(fu,mu)}vu((ru=ru.apply(Ys,Js||[])).next())})},Bs=function(Ys,Js){var qs={label:0,sent:function(){if(nu[0]&1)throw nu[1];return nu[1]},trys:[],ops:[]},ru,tu,nu,uu;return uu={next:fu(0),throw:fu(1),return:fu(2)},typeof Symbol=="function"&&(uu[Symbol.iterator]=function(){return this}),uu;function fu(vu){return function(Eu){return mu([vu,Eu])}}function mu(vu){if(ru)throw new TypeError("Generator is already executing.");for(;qs;)try{if(ru=1,tu&&(nu=vu[0]&2?tu.return:vu[0]?tu.throw||((nu=tu.return)&&nu.call(tu),0):tu.next)&&!(nu=nu.call(tu,vu[1])).done)return nu;switch(tu=0,nu&&(vu=[vu[0]&2,nu.value]),vu[0]){case 0:case 1:nu=vu;break;case 4:return qs.label++,{value:vu[1],done:!1};case 5:qs.label++,tu=vu[1],vu=[0];continue;case 7:vu=qs.ops.pop(),qs.trys.pop();continue;default:if(nu=qs.trys,!(nu=nu.length>0&&nu[nu.length-1])&&(vu[0]===6||vu[0]===2)){qs=0;continue}if(vu[0]===3&&(!nu||vu[1]>nu[0]&&vu[1]<nu[3])){qs.label=vu[1];break}if(vu[0]===6&&qs.label<nu[1]){qs.label=nu[1],nu=vu;break}if(nu&&qs.label<nu[2]){qs.label=nu[2],qs.ops.push(vu);break}nu[2]&&qs.ops.pop(),qs.trys.pop();continue}vu=Js.call(Ys,qs)}catch(Eu){vu=[6,Eu],tu=0}finally{ru=nu=0}if(vu[0]&5)throw vu[1];return{value:vu[0]?vu[1]:void 0,done:!0}}},Ps=function(Ys,Js){for(var qs in Ys)qs!=="default"&&!Object.prototype.hasOwnProperty.call(Js,qs)&&Qs(Js,Ys,qs)},Qs=Object.create?function(Ys,Js,qs,ru){ru===void 0&&(ru=qs);var tu=Object.getOwnPropertyDescriptor(Js,qs);(!tu||("get"in tu?!Js.__esModule:tu.writable||tu.configurable))&&(tu={enumerable:!0,get:function(){return Js[qs]}}),Object.defineProperty(Ys,ru,tu)}:function(Ys,Js,qs,ru){ru===void 0&&(ru=qs),Ys[ru]=Js[qs]},Ls=function(Ys){var Js=typeof Symbol=="function"&&Symbol.iterator,qs=Js&&Ys[Js],ru=0;if(qs)return qs.call(Ys);if(Ys&&typeof Ys.length=="number")return{next:function(){return Ys&&ru>=Ys.length&&(Ys=void 0),{value:Ys&&Ys[ru++],done:!Ys}}};throw new TypeError(Js?"Object is not iterable.":"Symbol.iterator is not defined.")},Rs=function(Ys,Js){var qs=typeof Symbol=="function"&&Ys[Symbol.iterator];if(!qs)return Ys;var ru=qs.call(Ys),tu,nu=[],uu;try{for(;(Js===void 0||Js-- >0)&&!(tu=ru.next()).done;)nu.push(tu.value)}catch(fu){uu={error:fu}}finally{try{tu&&!tu.done&&(qs=ru.return)&&qs.call(ru)}finally{if(uu)throw uu.error}}return nu},Os=function(){for(var Ys=[],Js=0;Js<arguments.length;Js++)Ys=Ys.concat(Rs(arguments[Js]));return Ys},Fs=function(){for(var Ys=0,Js=0,qs=arguments.length;Js<qs;Js++)Ys+=arguments[Js].length;for(var ru=Array(Ys),tu=0,Js=0;Js<qs;Js++)for(var nu=arguments[Js],uu=0,fu=nu.length;uu<fu;uu++,tu++)ru[tu]=nu[uu];return ru},Vs=function(Ys,Js,qs){if(qs||arguments.length===2)for(var ru=0,tu=Js.length,nu;ru<tu;ru++)(nu||!(ru in Js))&&(nu||(nu=Array.prototype.slice.call(Js,0,ru)),nu[ru]=Js[ru]);return Ys.concat(nu||Array.prototype.slice.call(Js))},ks=function(Ys){return this instanceof ks?(this.v=Ys,this):new ks(Ys)},Ns=function(Ys,Js,qs){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ru=qs.apply(Ys,Js||[]),tu,nu=[];return tu={},uu("next"),uu("throw"),uu("return"),tu[Symbol.asyncIterator]=function(){return this},tu;function uu(pu){ru[pu]&&(tu[pu]=function(du){return new Promise(function(yu,Su){nu.push([pu,du,yu,Su])>1||fu(pu,du)})})}function fu(pu,du){try{mu(ru[pu](du))}catch(yu){hu(nu[0][3],yu)}}function mu(pu){pu.value instanceof ks?Promise.resolve(pu.value.v).then(vu,Eu):hu(nu[0][2],pu)}function vu(pu){fu("next",pu)}function Eu(pu){fu("throw",pu)}function hu(pu,du){pu(du),nu.shift(),nu.length&&fu(nu[0][0],nu[0][1])}},Ds=function(Ys){var Js,qs;return Js={},ru("next"),ru("throw",function(tu){throw tu}),ru("return"),Js[Symbol.iterator]=function(){return this},Js;function ru(tu,nu){Js[tu]=Ys[tu]?function(uu){return(qs=!qs)?{value:ks(Ys[tu](uu)),done:tu==="return"}:nu?nu(uu):uu}:nu}},$s=function(Ys){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Js=Ys[Symbol.asyncIterator],qs;return Js?Js.call(Ys):(Ys=typeof Ls=="function"?Ls(Ys):Ys[Symbol.iterator](),qs={},ru("next"),ru("throw"),ru("return"),qs[Symbol.asyncIterator]=function(){return this},qs);function ru(nu){qs[nu]=Ys[nu]&&function(uu){return new Promise(function(fu,mu){uu=Ys[nu](uu),tu(fu,mu,uu.done,uu.value)})}}function tu(nu,uu,fu,mu){Promise.resolve(mu).then(function(vu){nu({value:vu,done:fu})},uu)}},Gs=function(Ys,Js){return Object.defineProperty?Object.defineProperty(Ys,"raw",{value:Js}):Ys.raw=Js,Ys};var eu=Object.create?function(Ys,Js){Object.defineProperty(Ys,"default",{enumerable:!0,value:Js})}:function(Ys,Js){Ys.default=Js};Us=function(Ys){if(Ys&&Ys.__esModule)return Ys;var Js={};if(Ys!=null)for(var qs in Ys)qs!=="default"&&Object.prototype.hasOwnProperty.call(Ys,qs)&&Qs(Js,Ys,qs);return eu(Js,Ys),Js},Hs=function(Ys){return Ys&&Ys.__esModule?Ys:{default:Ys}},zs=function(Ys,Js,qs,ru){if(qs==="a"&&!ru)throw new TypeError("Private accessor was defined without a getter");if(typeof Js=="function"?Ys!==Js||!ru:!Js.has(Ys))throw new TypeError("Cannot read private member from an object whose class did not declare it");return qs==="m"?ru:qs==="a"?ru.call(Ys):ru?ru.value:Js.get(Ys)},js=function(Ys,Js,qs,ru,tu){if(ru==="m")throw new TypeError("Private method is not writable");if(ru==="a"&&!tu)throw new TypeError("Private accessor was defined without a setter");if(typeof Js=="function"?Ys!==Js||!tu:!Js.has(Ys))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ru==="a"?tu.call(Ys,qs):tu?tu.value=qs:Js.set(Ys,qs),qs},Ws=function(Ys,Js){if(Js===null||typeof Js!="object"&&typeof Js!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Ys=="function"?Js===Ys:Ys.has(Js)},Zs("__extends",ga),Zs("__assign",_s),Zs("__rest",Ss),Zs("__decorate",Ms),Zs("__param",Cs),Zs("__metadata",Ts),Zs("__awaiter",Is),Zs("__generator",Bs),Zs("__exportStar",Ps),Zs("__createBinding",Qs),Zs("__values",Ls),Zs("__read",Rs),Zs("__spread",Os),Zs("__spreadArrays",Fs),Zs("__spreadArray",Vs),Zs("__await",ks),Zs("__asyncGenerator",Ns),Zs("__asyncDelegator",Ds),Zs("__asyncValues",$s),Zs("__makeTemplateObject",Gs),Zs("__importStar",Us),Zs("__importDefault",Hs),Zs("__classPrivateFieldGet",zs),Zs("__classPrivateFieldSet",js),Zs("__classPrivateFieldIn",Ws)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(ca,ga){for(var _s=new Array(arguments.length-1),Ss=0,Ms=2,Cs=!0;Ms<arguments.length;)_s[Ss++]=arguments[Ms++];return new Promise(function(Is,Bs){_s[Ss]=function(Ls){if(Cs)if(Cs=!1,Ls)Bs(Ls);else{for(var Rs=new Array(arguments.length-1),Os=0;Os<Rs.length;)Rs[Os++]=arguments[Os];Is.apply(null,Rs)}};try{ca.apply(ga||null,_s)}catch(Ps){Cs&&(Cs=!1,Bs(Ps))}})}var base64$1={};(function(ca){var ga=ca;ga.length=function(Is){var Bs=Is.length;if(!Bs)return 0;for(var Ps=0;--Bs%4>1&&Is.charAt(Bs)==="=";)++Ps;return Math.ceil(Is.length*3)/4-Ps};for(var _s=new Array(64),Ss=new Array(123),Ms=0;Ms<64;)Ss[_s[Ms]=Ms<26?Ms+65:Ms<52?Ms+71:Ms<62?Ms-4:Ms-59|43]=Ms++;ga.encode=function(Is,Bs,Ps){for(var Ls=null,Rs=[],Os=0,Fs=0,Vs;Bs<Ps;){var ks=Is[Bs++];switch(Fs){case 0:Rs[Os++]=_s[ks>>2],Vs=(ks&3)<<4,Fs=1;break;case 1:Rs[Os++]=_s[Vs|ks>>4],Vs=(ks&15)<<2,Fs=2;break;case 2:Rs[Os++]=_s[Vs|ks>>6],Rs[Os++]=_s[ks&63],Fs=0;break}Os>8191&&((Ls||(Ls=[])).push(String.fromCharCode.apply(String,Rs)),Os=0)}return Fs&&(Rs[Os++]=_s[Vs],Rs[Os++]=61,Fs===1&&(Rs[Os++]=61)),Ls?(Os&&Ls.push(String.fromCharCode.apply(String,Rs.slice(0,Os))),Ls.join("")):String.fromCharCode.apply(String,Rs.slice(0,Os))};var Cs="invalid encoding";ga.decode=function(Is,Bs,Ps){for(var Ls=Ps,Rs=0,Os,Fs=0;Fs<Is.length;){var Vs=Is.charCodeAt(Fs++);if(Vs===61&&Rs>1)break;if((Vs=Ss[Vs])===void 0)throw Error(Cs);switch(Rs){case 0:Os=Vs,Rs=1;break;case 1:Bs[Ps++]=Os<<2|(Vs&48)>>4,Os=Vs,Rs=2;break;case 2:Bs[Ps++]=(Os&15)<<4|(Vs&60)>>2,Os=Vs,Rs=3;break;case 3:Bs[Ps++]=(Os&3)<<6|Vs,Rs=0;break}}if(Rs===1)throw Error(Cs);return Ps-Ls},ga.test=function(Is){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Is)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(ga,_s,Ss){return(this._listeners[ga]||(this._listeners[ga]=[])).push({fn:_s,ctx:Ss||this}),this};EventEmitter.prototype.off=function(ga,_s){if(ga===void 0)this._listeners={};else if(_s===void 0)this._listeners[ga]=[];else for(var Ss=this._listeners[ga],Ms=0;Ms<Ss.length;)Ss[Ms].fn===_s?Ss.splice(Ms,1):++Ms;return this};EventEmitter.prototype.emit=function(ga){var _s=this._listeners[ga];if(_s){for(var Ss=[],Ms=1;Ms<arguments.length;)Ss.push(arguments[Ms++]);for(Ms=0;Ms<_s.length;)_s[Ms].fn.apply(_s[Ms++].ctx,Ss)}return this};var float=factory(factory);function factory(ca){return typeof Float32Array!="undefined"?function(){var ga=new Float32Array([-0]),_s=new Uint8Array(ga.buffer),Ss=_s[3]===128;function Ms(Bs,Ps,Ls){ga[0]=Bs,Ps[Ls]=_s[0],Ps[Ls+1]=_s[1],Ps[Ls+2]=_s[2],Ps[Ls+3]=_s[3]}function Cs(Bs,Ps,Ls){ga[0]=Bs,Ps[Ls]=_s[3],Ps[Ls+1]=_s[2],Ps[Ls+2]=_s[1],Ps[Ls+3]=_s[0]}ca.writeFloatLE=Ss?Ms:Cs,ca.writeFloatBE=Ss?Cs:Ms;function Ts(Bs,Ps){return _s[0]=Bs[Ps],_s[1]=Bs[Ps+1],_s[2]=Bs[Ps+2],_s[3]=Bs[Ps+3],ga[0]}function Is(Bs,Ps){return _s[3]=Bs[Ps],_s[2]=Bs[Ps+1],_s[1]=Bs[Ps+2],_s[0]=Bs[Ps+3],ga[0]}ca.readFloatLE=Ss?Ts:Is,ca.readFloatBE=Ss?Is:Ts}():function(){function ga(Ss,Ms,Cs,Ts){var Is=Ms<0?1:0;if(Is&&(Ms=-Ms),Ms===0)Ss(1/Ms>0?0:2147483648,Cs,Ts);else if(isNaN(Ms))Ss(2143289344,Cs,Ts);else if(Ms>34028234663852886e22)Ss((Is<<31|2139095040)>>>0,Cs,Ts);else if(Ms<11754943508222875e-54)Ss((Is<<31|Math.round(Ms/1401298464324817e-60))>>>0,Cs,Ts);else{var Bs=Math.floor(Math.log(Ms)/Math.LN2),Ps=Math.round(Ms*Math.pow(2,-Bs)*8388608)&8388607;Ss((Is<<31|Bs+127<<23|Ps)>>>0,Cs,Ts)}}ca.writeFloatLE=ga.bind(null,writeUintLE),ca.writeFloatBE=ga.bind(null,writeUintBE);function _s(Ss,Ms,Cs){var Ts=Ss(Ms,Cs),Is=(Ts>>31)*2+1,Bs=Ts>>>23&255,Ps=Ts&8388607;return Bs===255?Ps?NaN:Is*(1/0):Bs===0?Is*1401298464324817e-60*Ps:Is*Math.pow(2,Bs-150)*(Ps+8388608)}ca.readFloatLE=_s.bind(null,readUintLE),ca.readFloatBE=_s.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var ga=new Float64Array([-0]),_s=new Uint8Array(ga.buffer),Ss=_s[7]===128;function Ms(Bs,Ps,Ls){ga[0]=Bs,Ps[Ls]=_s[0],Ps[Ls+1]=_s[1],Ps[Ls+2]=_s[2],Ps[Ls+3]=_s[3],Ps[Ls+4]=_s[4],Ps[Ls+5]=_s[5],Ps[Ls+6]=_s[6],Ps[Ls+7]=_s[7]}function Cs(Bs,Ps,Ls){ga[0]=Bs,Ps[Ls]=_s[7],Ps[Ls+1]=_s[6],Ps[Ls+2]=_s[5],Ps[Ls+3]=_s[4],Ps[Ls+4]=_s[3],Ps[Ls+5]=_s[2],Ps[Ls+6]=_s[1],Ps[Ls+7]=_s[0]}ca.writeDoubleLE=Ss?Ms:Cs,ca.writeDoubleBE=Ss?Cs:Ms;function Ts(Bs,Ps){return _s[0]=Bs[Ps],_s[1]=Bs[Ps+1],_s[2]=Bs[Ps+2],_s[3]=Bs[Ps+3],_s[4]=Bs[Ps+4],_s[5]=Bs[Ps+5],_s[6]=Bs[Ps+6],_s[7]=Bs[Ps+7],ga[0]}function Is(Bs,Ps){return _s[7]=Bs[Ps],_s[6]=Bs[Ps+1],_s[5]=Bs[Ps+2],_s[4]=Bs[Ps+3],_s[3]=Bs[Ps+4],_s[2]=Bs[Ps+5],_s[1]=Bs[Ps+6],_s[0]=Bs[Ps+7],ga[0]}ca.readDoubleLE=Ss?Ts:Is,ca.readDoubleBE=Ss?Is:Ts}():function(){function ga(Ss,Ms,Cs,Ts,Is,Bs){var Ps=Ts<0?1:0;if(Ps&&(Ts=-Ts),Ts===0)Ss(0,Is,Bs+Ms),Ss(1/Ts>0?0:2147483648,Is,Bs+Cs);else if(isNaN(Ts))Ss(0,Is,Bs+Ms),Ss(2146959360,Is,Bs+Cs);else if(Ts>17976931348623157e292)Ss(0,Is,Bs+Ms),Ss((Ps<<31|2146435072)>>>0,Is,Bs+Cs);else{var Ls;if(Ts<22250738585072014e-324)Ls=Ts/5e-324,Ss(Ls>>>0,Is,Bs+Ms),Ss((Ps<<31|Ls/4294967296)>>>0,Is,Bs+Cs);else{var Rs=Math.floor(Math.log(Ts)/Math.LN2);Rs===1024&&(Rs=1023),Ls=Ts*Math.pow(2,-Rs),Ss(Ls*4503599627370496>>>0,Is,Bs+Ms),Ss((Ps<<31|Rs+1023<<20|Ls*1048576&1048575)>>>0,Is,Bs+Cs)}}}ca.writeDoubleLE=ga.bind(null,writeUintLE,0,4),ca.writeDoubleBE=ga.bind(null,writeUintBE,4,0);function _s(Ss,Ms,Cs,Ts,Is){var Bs=Ss(Ts,Is+Ms),Ps=Ss(Ts,Is+Cs),Ls=(Ps>>31)*2+1,Rs=Ps>>>20&2047,Os=4294967296*(Ps&1048575)+Bs;return Rs===2047?Os?NaN:Ls*(1/0):Rs===0?Ls*5e-324*Os:Ls*Math.pow(2,Rs-1075)*(Os+4503599627370496)}ca.readDoubleLE=_s.bind(null,readUintLE,0,4),ca.readDoubleBE=_s.bind(null,readUintBE,4,0)}(),ca}function writeUintLE(ca,ga,_s){ga[_s]=ca&255,ga[_s+1]=ca>>>8&255,ga[_s+2]=ca>>>16&255,ga[_s+3]=ca>>>24}function writeUintBE(ca,ga,_s){ga[_s]=ca>>>24,ga[_s+1]=ca>>>16&255,ga[_s+2]=ca>>>8&255,ga[_s+3]=ca&255}function readUintLE(ca,ga){return(ca[ga]|ca[ga+1]<<8|ca[ga+2]<<16|ca[ga+3]<<24)>>>0}function readUintBE(ca,ga){return(ca[ga]<<24|ca[ga+1]<<16|ca[ga+2]<<8|ca[ga+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(ca){}return null}var utf8$2={};(function(ca){var ga=ca;ga.length=function(Ss){for(var Ms=0,Cs=0,Ts=0;Ts<Ss.length;++Ts)Cs=Ss.charCodeAt(Ts),Cs<128?Ms+=1:Cs<2048?Ms+=2:(Cs&64512)===55296&&(Ss.charCodeAt(Ts+1)&64512)===56320?(++Ts,Ms+=4):Ms+=3;return Ms},ga.read=function(Ss,Ms,Cs){var Ts=Cs-Ms;if(Ts<1)return"";for(var Is=null,Bs=[],Ps=0,Ls;Ms<Cs;)Ls=Ss[Ms++],Ls<128?Bs[Ps++]=Ls:Ls>191&&Ls<224?Bs[Ps++]=(Ls&31)<<6|Ss[Ms++]&63:Ls>239&&Ls<365?(Ls=((Ls&7)<<18|(Ss[Ms++]&63)<<12|(Ss[Ms++]&63)<<6|Ss[Ms++]&63)-65536,Bs[Ps++]=55296+(Ls>>10),Bs[Ps++]=56320+(Ls&1023)):Bs[Ps++]=(Ls&15)<<12|(Ss[Ms++]&63)<<6|Ss[Ms++]&63,Ps>8191&&((Is||(Is=[])).push(String.fromCharCode.apply(String,Bs)),Ps=0);return Is?(Ps&&Is.push(String.fromCharCode.apply(String,Bs.slice(0,Ps))),Is.join("")):String.fromCharCode.apply(String,Bs.slice(0,Ps))},ga.write=function(Ss,Ms,Cs){for(var Ts=Cs,Is,Bs,Ps=0;Ps<Ss.length;++Ps)Is=Ss.charCodeAt(Ps),Is<128?Ms[Cs++]=Is:Is<2048?(Ms[Cs++]=Is>>6|192,Ms[Cs++]=Is&63|128):(Is&64512)===55296&&((Bs=Ss.charCodeAt(Ps+1))&64512)===56320?(Is=65536+((Is&1023)<<10)+(Bs&1023),++Ps,Ms[Cs++]=Is>>18|240,Ms[Cs++]=Is>>12&63|128,Ms[Cs++]=Is>>6&63|128,Ms[Cs++]=Is&63|128):(Ms[Cs++]=Is>>12|224,Ms[Cs++]=Is>>6&63|128,Ms[Cs++]=Is&63|128);return Cs-Ts}})(utf8$2);var pool_1=pool;function pool(ca,ga,_s){var Ss=_s||8192,Ms=Ss>>>1,Cs=null,Ts=Ss;return function(Bs){if(Bs<1||Bs>Ms)return ca(Bs);Ts+Bs>Ss&&(Cs=ca(Ss),Ts=0);var Ps=ga.call(Cs,Ts,Ts+=Bs);return Ts&7&&(Ts=(Ts|7)+1),Ps}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(ca,ga){this.lo=ca>>>0,this.hi=ga>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function ca(ga){if(ga===0)return zero;var _s=ga<0;_s&&(ga=-ga);var Ss=ga>>>0,Ms=(ga-Ss)/4294967296>>>0;return _s&&(Ms=~Ms>>>0,Ss=~Ss>>>0,++Ss>4294967295&&(Ss=0,++Ms>4294967295&&(Ms=0))),new LongBits$2(Ss,Ms)};LongBits$2.from=function ca(ga){if(typeof ga=="number")return LongBits$2.fromNumber(ga);if(util$5.isString(ga))if(util$5.Long)ga=util$5.Long.fromString(ga);else return LongBits$2.fromNumber(parseInt(ga,10));return ga.low||ga.high?new LongBits$2(ga.low>>>0,ga.high>>>0):zero};LongBits$2.prototype.toNumber=function ca(ga){if(!ga&&this.hi>>>31){var _s=~this.lo+1>>>0,Ss=~this.hi>>>0;return _s||(Ss=Ss+1>>>0),-(_s+Ss*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function ca(ga){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(ga)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(ga)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function ca(ga){return ga===zeroHash?zero:new LongBits$2((charCodeAt.call(ga,0)|charCodeAt.call(ga,1)<<8|charCodeAt.call(ga,2)<<16|charCodeAt.call(ga,3)<<24)>>>0,(charCodeAt.call(ga,4)|charCodeAt.call(ga,5)<<8|charCodeAt.call(ga,6)<<16|charCodeAt.call(ga,7)<<24)>>>0)};LongBits$2.prototype.toHash=function ca(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function ca(){var ga=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ga)>>>0,this.lo=(this.lo<<1^ga)>>>0,this};LongBits$2.prototype.zzDecode=function ca(){var ga=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ga)>>>0,this.hi=(this.hi>>>1^ga)>>>0,this};LongBits$2.prototype.length=function ca(){var ga=this.lo,_s=(this.lo>>>28|this.hi<<4)>>>0,Ss=this.hi>>>24;return Ss===0?_s===0?ga<16384?ga<128?1:2:ga<2097152?3:4:_s<16384?_s<128?5:6:_s<2097152?7:8:Ss<128?9:10};(function(ca){var ga=ca;ga.asPromise=aspromise,ga.base64=base64$1,ga.EventEmitter=eventemitter,ga.float=float,ga.inquire=inquire_1,ga.utf8=utf8$2,ga.pool=pool_1,ga.LongBits=longbits,ga.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),ga.global=ga.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,ga.emptyArray=Object.freeze?Object.freeze([]):[],ga.emptyObject=Object.freeze?Object.freeze({}):{},ga.isInteger=Number.isInteger||function(Cs){return typeof Cs=="number"&&isFinite(Cs)&&Math.floor(Cs)===Cs},ga.isString=function(Cs){return typeof Cs=="string"||Cs instanceof String},ga.isObject=function(Cs){return Cs&&typeof Cs=="object"},ga.isset=ga.isSet=function(Cs,Ts){var Is=Cs[Ts];return Is!=null&&Cs.hasOwnProperty(Ts)?typeof Is!="object"||(Array.isArray(Is)?Is.length:Object.keys(Is).length)>0:!1},ga.Buffer=function(){try{var Ms=ga.inquire("buffer").Buffer;return Ms.prototype.utf8Write?Ms:null}catch{return null}}(),ga._Buffer_from=null,ga._Buffer_allocUnsafe=null,ga.newBuffer=function(Cs){return typeof Cs=="number"?ga.Buffer?ga._Buffer_allocUnsafe(Cs):new ga.Array(Cs):ga.Buffer?ga._Buffer_from(Cs):typeof Uint8Array=="undefined"?Cs:new Uint8Array(Cs)},ga.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,ga.Long=ga.global.dcodeIO&&ga.global.dcodeIO.Long||ga.global.Long||ga.inquire("long"),ga.key2Re=/^true|false|0|1$/,ga.key32Re=/^-?(?:0|[1-9][0-9]*)$/,ga.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,ga.longToHash=function(Cs){return Cs?ga.LongBits.from(Cs).toHash():ga.LongBits.zeroHash},ga.longFromHash=function(Cs,Ts){var Is=ga.LongBits.fromHash(Cs);return ga.Long?ga.Long.fromBits(Is.lo,Is.hi,Ts):Is.toNumber(Boolean(Ts))};function _s(Ms,Cs,Ts){for(var Is=Object.keys(Cs),Bs=0;Bs<Is.length;++Bs)(Ms[Is[Bs]]===void 0||!Ts)&&(Ms[Is[Bs]]=Cs[Is[Bs]]);return Ms}ga.merge=_s,ga.lcFirst=function(Cs){return Cs.charAt(0).toLowerCase()+Cs.substring(1)};function Ss(Ms){function Cs(Ts,Is){if(!(this instanceof Cs))return new Cs(Ts,Is);Object.defineProperty(this,"message",{get:function(){return Ts}}),Error.captureStackTrace?Error.captureStackTrace(this,Cs):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Is&&_s(this,Is)}return(Cs.prototype=Object.create(Error.prototype)).constructor=Cs,Object.defineProperty(Cs.prototype,"name",{get:function(){return Ms}}),Cs.prototype.toString=function(){return this.name+": "+this.message},Cs}ga.newError=Ss,ga.ProtocolError=Ss("ProtocolError"),ga.oneOfGetter=function(Cs){for(var Ts={},Is=0;Is<Cs.length;++Is)Ts[Cs[Is]]=1;return function(){for(var Bs=Object.keys(this),Ps=Bs.length-1;Ps>-1;--Ps)if(Ts[Bs[Ps]]===1&&this[Bs[Ps]]!==void 0&&this[Bs[Ps]]!==null)return Bs[Ps]}},ga.oneOfSetter=function(Cs){return function(Ts){for(var Is=0;Is<Cs.length;++Is)Cs[Is]!==Ts&&delete this[Cs[Is]]}},ga.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},ga._configure=function(){var Ms=ga.Buffer;if(!Ms){ga._Buffer_from=ga._Buffer_allocUnsafe=null;return}ga._Buffer_from=Ms.from!==Uint8Array.from&&Ms.from||function(Ts,Is){return new Ms(Ts,Is)},ga._Buffer_allocUnsafe=Ms.allocUnsafe||function(Ts){return new Ms(Ts)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(ca,ga,_s){this.fn=ca,this.len=ga,this.next=void 0,this.val=_s}function noop$1(){}function State(ca){this.head=ca.head,this.tail=ca.tail,this.len=ca.len,this.next=ca.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function ca(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function ca(ga){return new util$4.Array(ga)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function ca(ga,_s,Ss){return this.tail=this.tail.next=new Op(ga,_s,Ss),this.len+=_s,this};function writeByte(ca,ga,_s){ga[_s]=ca&255}function writeVarint32(ca,ga,_s){for(;ca>127;)ga[_s++]=ca&127|128,ca>>>=7;ga[_s]=ca}function VarintOp(ca,ga){this.len=ca,this.next=void 0,this.val=ga}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function ca(ga){return this.len+=(this.tail=this.tail.next=new VarintOp((ga=ga>>>0)<128?1:ga<16384?2:ga<2097152?3:ga<268435456?4:5,ga)).len,this};Writer$1.prototype.int32=function ca(ga){return ga<0?this._push(writeVarint64,10,LongBits$1.fromNumber(ga)):this.uint32(ga)};Writer$1.prototype.sint32=function ca(ga){return this.uint32((ga<<1^ga>>31)>>>0)};function writeVarint64(ca,ga,_s){for(;ca.hi;)ga[_s++]=ca.lo&127|128,ca.lo=(ca.lo>>>7|ca.hi<<25)>>>0,ca.hi>>>=7;for(;ca.lo>127;)ga[_s++]=ca.lo&127|128,ca.lo=ca.lo>>>7;ga[_s++]=ca.lo}Writer$1.prototype.uint64=function ca(ga){var _s=LongBits$1.from(ga);return this._push(writeVarint64,_s.length(),_s)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function ca(ga){var _s=LongBits$1.from(ga).zzEncode();return this._push(writeVarint64,_s.length(),_s)};Writer$1.prototype.bool=function ca(ga){return this._push(writeByte,1,ga?1:0)};function writeFixed32(ca,ga,_s){ga[_s]=ca&255,ga[_s+1]=ca>>>8&255,ga[_s+2]=ca>>>16&255,ga[_s+3]=ca>>>24}Writer$1.prototype.fixed32=function ca(ga){return this._push(writeFixed32,4,ga>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function ca(ga){var _s=LongBits$1.from(ga);return this._push(writeFixed32,4,_s.lo)._push(writeFixed32,4,_s.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function ca(ga){return this._push(util$4.float.writeFloatLE,4,ga)};Writer$1.prototype.double=function ca(ga){return this._push(util$4.float.writeDoubleLE,8,ga)};var writeBytes=util$4.Array.prototype.set?function ca(ga,_s,Ss){_s.set(ga,Ss)}:function ca(ga,_s,Ss){for(var Ms=0;Ms<ga.length;++Ms)_s[Ss+Ms]=ga[Ms]};Writer$1.prototype.bytes=function ca(ga){var _s=ga.length>>>0;if(!_s)return this._push(writeByte,1,0);if(util$4.isString(ga)){var Ss=Writer$1.alloc(_s=base64.length(ga));base64.decode(ga,Ss,0),ga=Ss}return this.uint32(_s)._push(writeBytes,_s,ga)};Writer$1.prototype.string=function ca(ga){var _s=utf8$1.length(ga);return _s?this.uint32(_s)._push(utf8$1.write,_s,ga):this._push(writeByte,1,0)};Writer$1.prototype.fork=function ca(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function ca(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function ca(){var ga=this.head,_s=this.tail,Ss=this.len;return this.reset().uint32(Ss),Ss&&(this.tail.next=ga.next,this.tail=_s,this.len+=Ss),this};Writer$1.prototype.finish=function ca(){for(var ga=this.head.next,_s=this.constructor.alloc(this.len),Ss=0;ga;)ga.fn(ga.val,_s,Ss),Ss+=ga.len,ga=ga.next;return _s};Writer$1._configure=function(ca){BufferWriter$1=ca,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(ga,_s,Ss){_s.set(ga,Ss)}:function(ga,_s,Ss){if(ga.copy)ga.copy(_s,Ss,0,ga.length);else for(var Ms=0;Ms<ga.length;)_s[Ss++]=ga[Ms++]}};BufferWriter.prototype.bytes=function ca(ga){util$3.isString(ga)&&(ga=util$3._Buffer_from(ga,"base64"));var _s=ga.length>>>0;return this.uint32(_s),_s&&this._push(BufferWriter.writeBytesBuffer,_s,ga),this};function writeStringBuffer(ca,ga,_s){ca.length<40?util$3.utf8.write(ca,ga,_s):ga.utf8Write?ga.utf8Write(ca,_s):ga.write(ca,_s)}BufferWriter.prototype.string=function ca(ga){var _s=util$3.Buffer.byteLength(ga);return this.uint32(_s),_s&&this._push(writeStringBuffer,_s,ga),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(ca,ga){return RangeError("index out of range: "+ca.pos+" + "+(ga||1)+" > "+ca.len)}function Reader$1(ca){this.buf=ca,this.pos=0,this.len=ca.length}var create_array=typeof Uint8Array!="undefined"?function ca(ga){if(ga instanceof Uint8Array||Array.isArray(ga))return new Reader$1(ga);throw Error("illegal buffer")}:function ca(ga){if(Array.isArray(ga))return new Reader$1(ga);throw Error("illegal buffer")},create=function ca(){return util$2.Buffer?function(_s){return(Reader$1.create=function(Ms){return util$2.Buffer.isBuffer(Ms)?new BufferReader$1(Ms):create_array(Ms)})(_s)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function ca(){var ga=4294967295;return function(){if(ga=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ga=(ga|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ga;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return ga}}();Reader$1.prototype.int32=function ca(){return this.uint32()|0};Reader$1.prototype.sint32=function ca(){var ga=this.uint32();return ga>>>1^-(ga&1)|0};function readLongVarint(){var ca=new LongBits(0,0),ga=0;if(this.len-this.pos>4){for(;ga<4;++ga)if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<ga*7)>>>0,this.buf[this.pos++]<128)return ca;if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<28)>>>0,ca.hi=(ca.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return ca;ga=0}else{for(;ga<3;++ga){if(this.pos>=this.len)throw indexOutOfRange(this);if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<ga*7)>>>0,this.buf[this.pos++]<128)return ca}return ca.lo=(ca.lo|(this.buf[this.pos++]&127)<<ga*7)>>>0,ca}if(this.len-this.pos>4){for(;ga<5;++ga)if(ca.hi=(ca.hi|(this.buf[this.pos]&127)<<ga*7+3)>>>0,this.buf[this.pos++]<128)return ca}else for(;ga<5;++ga){if(this.pos>=this.len)throw indexOutOfRange(this);if(ca.hi=(ca.hi|(this.buf[this.pos]&127)<<ga*7+3)>>>0,this.buf[this.pos++]<128)return ca}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function ca(){return this.uint32()!==0};function readFixed32_end(ca,ga){return(ca[ga-4]|ca[ga-3]<<8|ca[ga-2]<<16|ca[ga-1]<<24)>>>0}Reader$1.prototype.fixed32=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var ga=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ga};Reader$1.prototype.double=function ca(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var ga=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ga};Reader$1.prototype.bytes=function ca(){var ga=this.uint32(),_s=this.pos,Ss=this.pos+ga;if(Ss>this.len)throw indexOutOfRange(this,ga);return this.pos+=ga,Array.isArray(this.buf)?this.buf.slice(_s,Ss):_s===Ss?new this.buf.constructor(0):this._slice.call(this.buf,_s,Ss)};Reader$1.prototype.string=function ca(){var ga=this.bytes();return utf8.read(ga,0,ga.length)};Reader$1.prototype.skip=function ca(ga){if(typeof ga=="number"){if(this.pos+ga>this.len)throw indexOutOfRange(this,ga);this.pos+=ga}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(ca){switch(ca){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ca=this.uint32()&7)!==4;)this.skipType(ca);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ca+" at offset "+this.pos)}return this};Reader$1._configure=function(ca){BufferReader$1=ca,Reader$1.create=create(),BufferReader$1._configure();var ga=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[ga](!1)},uint64:function(){return readLongVarint.call(this)[ga](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[ga](!1)},fixed64:function(){return readFixed64.call(this)[ga](!0)},sfixed64:function(){return readFixed64.call(this)[ga](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(ca){Reader.call(this,ca)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function ca(){var ga=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ga,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ga,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(ca,ga,_s){if(typeof ca!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=ca,this.requestDelimited=Boolean(ga),this.responseDelimited=Boolean(_s)}Service.prototype.rpcCall=function ca(ga,_s,Ss,Ms,Cs){if(!Ms)throw TypeError("request must be specified");var Ts=this;if(!Cs)return util.asPromise(ca,Ts,ga,_s,Ss,Ms);if(!Ts.rpcImpl){setTimeout(function(){Cs(Error("already ended"))},0);return}try{return Ts.rpcImpl(ga,_s[Ts.requestDelimited?"encodeDelimited":"encode"](Ms).finish(),function(Bs,Ps){if(Bs)return Ts.emit("error",Bs,ga),Cs(Bs);if(Ps===null){Ts.end(!0);return}if(!(Ps instanceof Ss))try{Ps=Ss[Ts.responseDelimited?"decodeDelimited":"decode"](Ps)}catch(Ls){return Ts.emit("error",Ls,ga),Cs(Ls)}return Ts.emit("data",Ps,ga),Cs(null,Ps)})}catch(Is){Ts.emit("error",Is,ga),setTimeout(function(){Cs(Is)},0);return}};Service.prototype.end=function ca(ga){return this.rpcImpl&&(ga||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(ca){var ga=ca;ga.Service=service})(rpc);var roots={};(function(ca){var ga=ca;ga.build="minimal",ga.Writer=writer,ga.BufferWriter=writer_buffer,ga.Reader=reader,ga.BufferReader=reader_buffer,ga.util=minimal$1,ga.rpc=rpc,ga.roots=roots,ga.configure=_s;function _s(){ga.util._configure(),ga.Writer._configure(ga.BufferWriter),ga.Reader._configure(ga.BufferReader)}_s()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var t$2=require$$1,e$2=tslib.exports,i$2=minimal;function n$3(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}}),ga.default=ca,Object.freeze(ga)}var r$2=n$3(t$2),o$2=n$3(i$2),s$2=Number(r$2.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$2,u$2={},l$2={},h$2=h$2||function(ca,ga){var _s={},Ss=_s.lib={},Ms=Ss.Base=function(){function Os(){}return{extend:function(Fs){Os.prototype=this;var Vs=new Os;return Fs&&Vs.mixIn(Fs),Vs.hasOwnProperty("init")||(Vs.init=function(){Vs.$super.init.apply(this,arguments)}),Vs.init.prototype=Vs,Vs.$super=this,Vs},create:function(){var Fs=this.extend();return Fs.init.apply(Fs,arguments),Fs},init:function(){},mixIn:function(Fs){for(var Vs in Fs)Fs.hasOwnProperty(Vs)&&(this[Vs]=Fs[Vs]);Fs.hasOwnProperty("toString")&&(this.toString=Fs.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Cs=Ss.WordArray=Ms.extend({init:function(Os,Fs){Os=this.words=Os||[],this.sigBytes=Fs!=null?Fs:4*Os.length},toString:function(Os){return(Os||Is).stringify(this)},concat:function(Os){var Fs=this.words,Vs=Os.words,ks=this.sigBytes,Ns=Os.sigBytes;if(this.clamp(),ks%4)for(var Ds=0;Ds<Ns;Ds++){var $s=Vs[Ds>>>2]>>>24-Ds%4*8&255;Fs[ks+Ds>>>2]|=$s<<24-(ks+Ds)%4*8}else for(Ds=0;Ds<Ns;Ds+=4)Fs[ks+Ds>>>2]=Vs[Ds>>>2];return this.sigBytes+=Ns,this},clamp:function(){var Os=this.words,Fs=this.sigBytes;Os[Fs>>>2]&=4294967295<<32-Fs%4*8,Os.length=ca.ceil(Fs/4)},clone:function(){var Os=Ms.clone.call(this);return Os.words=this.words.slice(0),Os},random:function(Os){for(var Fs=[],Vs=0;Vs<Os;Vs+=4)Fs.push(4294967296*ca.random()|0);return new Cs.init(Fs,Os)}}),Ts=_s.enc={},Is=Ts.Hex={stringify:function(Os){for(var Fs=Os.words,Vs=Os.sigBytes,ks=[],Ns=0;Ns<Vs;Ns++){var Ds=Fs[Ns>>>2]>>>24-Ns%4*8&255;ks.push((Ds>>>4).toString(16)),ks.push((15&Ds).toString(16))}return ks.join("")},parse:function(Os){for(var Fs=Os.length,Vs=[],ks=0;ks<Fs;ks+=2)Vs[ks>>>3]|=parseInt(Os.substr(ks,2),16)<<24-ks%8*4;return new Cs.init(Vs,Fs/2)}},Bs=Ts.Latin1={stringify:function(Os){for(var Fs=Os.words,Vs=Os.sigBytes,ks=[],Ns=0;Ns<Vs;Ns++){var Ds=Fs[Ns>>>2]>>>24-Ns%4*8&255;ks.push(String.fromCharCode(Ds))}return ks.join("")},parse:function(Os){for(var Fs=Os.length,Vs=[],ks=0;ks<Fs;ks++)Vs[ks>>>2]|=(255&Os.charCodeAt(ks))<<24-ks%4*8;return new Cs.init(Vs,Fs)}},Ps=Ts.Utf8={stringify:function(Os){try{return decodeURIComponent(escape(Bs.stringify(Os)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Os){return Bs.parse(unescape(encodeURIComponent(Os)))}},Ls=Ss.BufferedBlockAlgorithm=Ms.extend({reset:function(){this._data=new Cs.init,this._nDataBytes=0},_append:function(Os){typeof Os=="string"&&(Os=Ps.parse(Os)),this._data.concat(Os),this._nDataBytes+=Os.sigBytes},_process:function(Os){var Fs=this._data,Vs=Fs.words,ks=Fs.sigBytes,Ns=this.blockSize,Ds=ks/(4*Ns),$s=(Ds=Os?ca.ceil(Ds):ca.max((0|Ds)-this._minBufferSize,0))*Ns,Gs=ca.min(4*$s,ks);if($s){for(var Us=0;Us<$s;Us+=Ns)this._doProcessBlock(Vs,Us);var Hs=Vs.splice(0,$s);Fs.sigBytes-=Gs}return new Cs.init(Hs,Gs)},clone:function(){var Os=Ms.clone.call(this);return Os._data=this._data.clone(),Os},_minBufferSize:0});Ss.Hasher=Ls.extend({cfg:Ms.extend(),init:function(Os){this.cfg=this.cfg.extend(Os),this.reset()},reset:function(){Ls.reset.call(this),this._doReset()},update:function(Os){return this._append(Os),this._process(),this},finalize:function(Os){return Os&&this._append(Os),this._doFinalize()},blockSize:16,_createHelper:function(Os){return function(Fs,Vs){return new Os.init(Vs).finalize(Fs)}},_createHmacHelper:function(Os){return function(Fs,Vs){return new Rs.HMAC.init(Os,Vs).finalize(Fs)}}});var Rs=_s.algo={};return _s}(Math);function c$2(ca,ga,_s){ca!=null&&(typeof ca=="number"?this.fromNumber(ca,ga,_s):ga==null&&typeof ca!="string"?this.fromString(ca,256):this.fromString(ca,ga))}function d$1(){return new c$2(null)}(function(ca){for(var ga=h$2,_s=(Ms=ga.lib).WordArray,Ss=Ms.Hasher,Ms=ga.algo,Cs=[],Ts=[],Is=function(Vs){return 4294967296*(Vs-(0|Vs))|0},Bs=2,Ps=0;64>Ps;){var Ls;e:{Ls=Bs;for(var Rs=ca.sqrt(Ls),Os=2;Os<=Rs;Os++)if(!(Ls%Os)){Ls=!1;break e}Ls=!0}Ls&&(8>Ps&&(Cs[Ps]=Is(ca.pow(Bs,.5))),Ts[Ps]=Is(ca.pow(Bs,1/3)),Ps++),Bs++}var Fs=[];Ms=Ms.SHA256=Ss.extend({_doReset:function(){this._hash=new _s.init(Cs.slice(0))},_doProcessBlock:function(Vs,ks){for(var Ns=this._hash.words,Ds=Ns[0],$s=Ns[1],Gs=Ns[2],Us=Ns[3],Hs=Ns[4],zs=Ns[5],js=Ns[6],Ws=Ns[7],Qs=0;64>Qs;Qs++){if(16>Qs)Fs[Qs]=0|Vs[ks+Qs];else{var Zs=Fs[Qs-15],Xs=Fs[Qs-2];Fs[Qs]=((Zs<<25|Zs>>>7)^(Zs<<14|Zs>>>18)^Zs>>>3)+Fs[Qs-7]+((Xs<<15|Xs>>>17)^(Xs<<13|Xs>>>19)^Xs>>>10)+Fs[Qs-16]}Zs=Ws+((Hs<<26|Hs>>>6)^(Hs<<21|Hs>>>11)^(Hs<<7|Hs>>>25))+(Hs&zs^~Hs&js)+Ts[Qs]+Fs[Qs],Xs=((Ds<<30|Ds>>>2)^(Ds<<19|Ds>>>13)^(Ds<<10|Ds>>>22))+(Ds&$s^Ds&Gs^$s&Gs),Ws=js,js=zs,zs=Hs,Hs=Us+Zs|0,Us=Gs,Gs=$s,$s=Ds,Ds=Zs+Xs|0}Ns[0]=Ns[0]+Ds|0,Ns[1]=Ns[1]+$s|0,Ns[2]=Ns[2]+Gs|0,Ns[3]=Ns[3]+Us|0,Ns[4]=Ns[4]+Hs|0,Ns[5]=Ns[5]+zs|0,Ns[6]=Ns[6]+js|0,Ns[7]=Ns[7]+Ws|0},_doFinalize:function(){var Vs=this._data,ks=Vs.words,Ns=8*this._nDataBytes,Ds=8*Vs.sigBytes;return ks[Ds>>>5]|=128<<24-Ds%32,ks[14+(Ds+64>>>9<<4)]=ca.floor(Ns/4294967296),ks[15+(Ds+64>>>9<<4)]=Ns,Vs.sigBytes=4*ks.length,this._process(),this._hash},clone:function(){var Vs=Ss.clone.call(this);return Vs._hash=this._hash.clone(),Vs}}),ga.SHA256=Ss._createHelper(Ms),ga.HmacSHA256=Ss._createHmacHelper(Ms)})(Math),h$2.lib.Cipher||function(ca){var ga=(Fs=h$2).lib,_s=ga.Base,Ss=ga.WordArray,Ms=ga.BufferedBlockAlgorithm,Cs=Fs.enc.Base64,Ts=Fs.algo.EvpKDF,Is=ga.Cipher=Ms.extend({cfg:_s.extend(),createEncryptor:function(ks,Ns){return this.create(this._ENC_XFORM_MODE,ks,Ns)},createDecryptor:function(ks,Ns){return this.create(this._DEC_XFORM_MODE,ks,Ns)},init:function(ks,Ns,Ds){this.cfg=this.cfg.extend(Ds),this._xformMode=ks,this._key=Ns,this.reset()},reset:function(){Ms.reset.call(this),this._doReset()},process:function(ks){return this._append(ks),this._process()},finalize:function(ks){return ks&&this._append(ks),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(ks){return{encrypt:function(Ns,Ds,$s){return(typeof Ds=="string"?Vs:Os).encrypt(ks,Ns,Ds,$s)},decrypt:function(Ns,Ds,$s){return(typeof Ds=="string"?Vs:Os).decrypt(ks,Ns,Ds,$s)}}}});ga.StreamCipher=Is.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Bs=Fs.mode={},Ps=function(ks,Ns,Ds){var $s=this._iv;$s?this._iv=void 0:$s=this._prevBlock;for(var Gs=0;Gs<Ds;Gs++)ks[Ns+Gs]^=$s[Gs]},Ls=(ga.BlockCipherMode=_s.extend({createEncryptor:function(ks,Ns){return this.Encryptor.create(ks,Ns)},createDecryptor:function(ks,Ns){return this.Decryptor.create(ks,Ns)},init:function(ks,Ns){this._cipher=ks,this._iv=Ns}})).extend();Ls.Encryptor=Ls.extend({processBlock:function(ks,Ns){var Ds=this._cipher,$s=Ds.blockSize;Ps.call(this,ks,Ns,$s),Ds.encryptBlock(ks,Ns),this._prevBlock=ks.slice(Ns,Ns+$s)}}),Ls.Decryptor=Ls.extend({processBlock:function(ks,Ns){var Ds=this._cipher,$s=Ds.blockSize,Gs=ks.slice(Ns,Ns+$s);Ds.decryptBlock(ks,Ns),Ps.call(this,ks,Ns,$s),this._prevBlock=Gs}}),Bs=Bs.CBC=Ls,Ls=(Fs.pad={}).Pkcs7={pad:function(ks,Ns){for(var Ds,$s=(Ds=(Ds=4*Ns)-ks.sigBytes%Ds)<<24|Ds<<16|Ds<<8|Ds,Gs=[],Us=0;Us<Ds;Us+=4)Gs.push($s);Ds=Ss.create(Gs,Ds),ks.concat(Ds)},unpad:function(ks){ks.sigBytes-=255&ks.words[ks.sigBytes-1>>>2]}},ga.BlockCipher=Is.extend({cfg:Is.cfg.extend({mode:Bs,padding:Ls}),reset:function(){Is.reset.call(this);var ks=(Ns=this.cfg).iv,Ns=Ns.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Ds=Ns.createEncryptor;else Ds=Ns.createDecryptor,this._minBufferSize=1;this._mode=Ds.call(Ns,this,ks&&ks.words)},_doProcessBlock:function(ks,Ns){this._mode.processBlock(ks,Ns)},_doFinalize:function(){var ks=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){ks.pad(this._data,this.blockSize);var Ns=this._process(!0)}else Ns=this._process(!0),ks.unpad(Ns);return Ns},blockSize:4});var Rs=ga.CipherParams=_s.extend({init:function(ks){this.mixIn(ks)},toString:function(ks){return(ks||this.formatter).stringify(this)}}),Os=(Bs=(Fs.format={}).OpenSSL={stringify:function(ks){var Ns=ks.ciphertext;return((ks=ks.salt)?Ss.create([1398893684,1701076831]).concat(ks).concat(Ns):Ns).toString(Cs)},parse:function(ks){var Ns=(ks=Cs.parse(ks)).words;if(Ns[0]==1398893684&&Ns[1]==1701076831){var Ds=Ss.create(Ns.slice(2,4));Ns.splice(0,4),ks.sigBytes-=16}return Rs.create({ciphertext:ks,salt:Ds})}},ga.SerializableCipher=_s.extend({cfg:_s.extend({format:Bs}),encrypt:function(ks,Ns,Ds,$s){$s=this.cfg.extend($s);var Gs=ks.createEncryptor(Ds,$s);return Ns=Gs.finalize(Ns),Gs=Gs.cfg,Rs.create({ciphertext:Ns,key:Ds,iv:Gs.iv,algorithm:ks,mode:Gs.mode,padding:Gs.padding,blockSize:ks.blockSize,formatter:$s.format})},decrypt:function(ks,Ns,Ds,$s){return $s=this.cfg.extend($s),Ns=this._parse(Ns,$s.format),ks.createDecryptor(Ds,$s).finalize(Ns.ciphertext)},_parse:function(ks,Ns){return typeof ks=="string"?Ns.parse(ks,this):ks}})),Fs=(Fs.kdf={}).OpenSSL={execute:function(ks,Ns,Ds,$s){return $s||($s=Ss.random(8)),ks=Ts.create({keySize:Ns+Ds}).compute(ks,$s),Ds=Ss.create(ks.words.slice(Ns),4*Ds),ks.sigBytes=4*Ns,Rs.create({key:ks,iv:Ds,salt:$s})}},Vs=ga.PasswordBasedCipher=Os.extend({cfg:Os.cfg.extend({kdf:Fs}),encrypt:function(ks,Ns,Ds,$s){return Ds=($s=this.cfg.extend($s)).kdf.execute(Ds,ks.keySize,ks.ivSize),$s.iv=Ds.iv,(ks=Os.encrypt.call(this,ks,Ns,Ds.key,$s)).mixIn(Ds),ks},decrypt:function(ks,Ns,Ds,$s){return $s=this.cfg.extend($s),Ns=this._parse(Ns,$s.format),Ds=$s.kdf.execute(Ds,ks.keySize,ks.ivSize,Ns.salt),$s.iv=Ds.iv,Os.decrypt.call(this,ks,Ns,Ds.key,$s)}})}(),function(){for(var ca=h$2,ga=ca.lib.BlockCipher,_s=ca.algo,Ss=[],Ms=[],Cs=[],Ts=[],Is=[],Bs=[],Ps=[],Ls=[],Rs=[],Os=[],Fs=[],Vs=0;256>Vs;Vs++)Fs[Vs]=128>Vs?Vs<<1:Vs<<1^283;var ks=0,Ns=0;for(Vs=0;256>Vs;Vs++){var Ds=(Ds=Ns^Ns<<1^Ns<<2^Ns<<3^Ns<<4)>>>8^255&Ds^99;Ss[ks]=Ds,Ms[Ds]=ks;var $s=Fs[ks],Gs=Fs[$s],Us=Fs[Gs],Hs=257*Fs[Ds]^16843008*Ds;Cs[ks]=Hs<<24|Hs>>>8,Ts[ks]=Hs<<16|Hs>>>16,Is[ks]=Hs<<8|Hs>>>24,Bs[ks]=Hs,Hs=16843009*Us^65537*Gs^257*$s^16843008*ks,Ps[Ds]=Hs<<24|Hs>>>8,Ls[Ds]=Hs<<16|Hs>>>16,Rs[Ds]=Hs<<8|Hs>>>24,Os[Ds]=Hs,ks?(ks=$s^Fs[Fs[Fs[Us^$s]]],Ns^=Fs[Fs[Ns]]):ks=Ns=1}var zs=[0,1,2,4,8,16,32,64,128,27,54];_s=_s.AES=ga.extend({_doReset:function(){for(var js=(Qs=this._key).words,Ws=Qs.sigBytes/4,Qs=4*((this._nRounds=Ws+6)+1),Zs=this._keySchedule=[],Xs=0;Xs<Qs;Xs++)if(Xs<Ws)Zs[Xs]=js[Xs];else{var eu=Zs[Xs-1];Xs%Ws?6<Ws&&Xs%Ws==4&&(eu=Ss[eu>>>24]<<24|Ss[eu>>>16&255]<<16|Ss[eu>>>8&255]<<8|Ss[255&eu]):(eu=Ss[(eu=eu<<8|eu>>>24)>>>24]<<24|Ss[eu>>>16&255]<<16|Ss[eu>>>8&255]<<8|Ss[255&eu],eu^=zs[Xs/Ws|0]<<24),Zs[Xs]=Zs[Xs-Ws]^eu}for(js=this._invKeySchedule=[],Ws=0;Ws<Qs;Ws++)Xs=Qs-Ws,eu=Ws%4?Zs[Xs]:Zs[Xs-4],js[Ws]=4>Ws||4>=Xs?eu:Ps[Ss[eu>>>24]]^Ls[Ss[eu>>>16&255]]^Rs[Ss[eu>>>8&255]]^Os[Ss[255&eu]]},encryptBlock:function(js,Ws){this._doCryptBlock(js,Ws,this._keySchedule,Cs,Ts,Is,Bs,Ss)},decryptBlock:function(js,Ws){var Qs=js[Ws+1];js[Ws+1]=js[Ws+3],js[Ws+3]=Qs,this._doCryptBlock(js,Ws,this._invKeySchedule,Ps,Ls,Rs,Os,Ms),Qs=js[Ws+1],js[Ws+1]=js[Ws+3],js[Ws+3]=Qs},_doCryptBlock:function(js,Ws,Qs,Zs,Xs,eu,Ys,Js){for(var qs=this._nRounds,ru=js[Ws]^Qs[0],tu=js[Ws+1]^Qs[1],nu=js[Ws+2]^Qs[2],uu=js[Ws+3]^Qs[3],fu=4,mu=1;mu<qs;mu++){var vu=Zs[ru>>>24]^Xs[tu>>>16&255]^eu[nu>>>8&255]^Ys[255&uu]^Qs[fu++],Eu=Zs[tu>>>24]^Xs[nu>>>16&255]^eu[uu>>>8&255]^Ys[255&ru]^Qs[fu++],hu=Zs[nu>>>24]^Xs[uu>>>16&255]^eu[ru>>>8&255]^Ys[255&tu]^Qs[fu++];uu=Zs[uu>>>24]^Xs[ru>>>16&255]^eu[tu>>>8&255]^Ys[255&nu]^Qs[fu++],ru=vu,tu=Eu,nu=hu}vu=(Js[ru>>>24]<<24|Js[tu>>>16&255]<<16|Js[nu>>>8&255]<<8|Js[255&uu])^Qs[fu++],Eu=(Js[tu>>>24]<<24|Js[nu>>>16&255]<<16|Js[uu>>>8&255]<<8|Js[255&ru])^Qs[fu++],hu=(Js[nu>>>24]<<24|Js[uu>>>16&255]<<16|Js[ru>>>8&255]<<8|Js[255&tu])^Qs[fu++],uu=(Js[uu>>>24]<<24|Js[ru>>>16&255]<<16|Js[tu>>>8&255]<<8|Js[255&nu])^Qs[fu++],js[Ws]=vu,js[Ws+1]=Eu,js[Ws+2]=hu,js[Ws+3]=uu},keySize:8}),ca.AES=ga._createHelper(_s)}(),l$2.lang={extend:function(ca,ga,_s){if(!ga||!ca)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Ss=function(){};if(Ss.prototype=ga.prototype,ca.prototype=new Ss,ca.prototype.constructor=ca,ca.superclass=ga.prototype,ga.prototype.constructor==Object.prototype.constructor&&(ga.prototype.constructor=ga),_s){var Ms;for(Ms in _s)ca.prototype[Ms]=_s[Ms];var Cs=function(){},Ts=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Cs=function(Is,Bs){for(Ms=0;Ms<Ts.length;Ms+=1){var Ps=Ts[Ms],Ls=Bs[Ps];typeof Ls=="function"&&Ls!=Object.prototype[Ps]&&(Is[Ps]=Ls)}})}catch{}Cs(ca.prototype,_s)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$2.prototype.am=function(ca,ga,_s,Ss,Ms,Cs){for(var Ts=32767&ga,Is=ga>>15;--Cs>=0;){var Bs=32767&this[ca],Ps=this[ca++]>>15,Ls=Is*Bs+Ps*Ts;Ms=((Bs=Ts*Bs+((32767&Ls)<<15)+_s[Ss]+(1073741823&Ms))>>>30)+(Ls>>>15)+Is*Ps+(Ms>>>30),_s[Ss++]=1073741823&Bs}return Ms},a$2=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$2.prototype.am=function(ca,ga,_s,Ss,Ms,Cs){for(;--Cs>=0;){var Ts=ga*this[ca++]+_s[Ss]+Ms;Ms=Math.floor(Ts/67108864),_s[Ss++]=67108863&Ts}return Ms},a$2=26):(c$2.prototype.am=function(ca,ga,_s,Ss,Ms,Cs){for(var Ts=16383&ga,Is=ga>>14;--Cs>=0;){var Bs=16383&this[ca],Ps=this[ca++]>>14,Ls=Is*Bs+Ps*Ts;Ms=((Bs=Ts*Bs+((16383&Ls)<<14)+_s[Ss]+Ms)>>28)+(Ls>>14)+Is*Ps,_s[Ss++]=268435455&Bs}return Ms},a$2=28),c$2.prototype.DB=a$2,c$2.prototype.DM=(1<<a$2)-1,c$2.prototype.DV=1<<a$2;c$2.prototype.FV=Math.pow(2,52),c$2.prototype.F1=52-a$2,c$2.prototype.F2=2*a$2-52;var p$2,A$1,f$2=new Array;for(p$2="0".charCodeAt(0),A$1=0;A$1<=9;++A$1)f$2[p$2++]=A$1;for(p$2="a".charCodeAt(0),A$1=10;A$1<36;++A$1)f$2[p$2++]=A$1;for(p$2="A".charCodeAt(0),A$1=10;A$1<36;++A$1)f$2[p$2++]=A$1;function g$2(ca){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(ca)}function v$1(ca,ga){var _s=f$2[ca.charCodeAt(ga)];return _s==null?-1:_s}function m$2(ca){var ga=d$1();return ga.fromInt(ca),ga}function y$1(ca){var ga,_s=1;return(ga=ca>>>16)!=0&&(ca=ga,_s+=16),(ga=ca>>8)!=0&&(ca=ga,_s+=8),(ga=ca>>4)!=0&&(ca=ga,_s+=4),(ga=ca>>2)!=0&&(ca=ga,_s+=2),(ga=ca>>1)!=0&&(ca=ga,_s+=1),_s}function b$1(ca){this.m=ca}function w$1(ca){this.m=ca,this.mp=ca.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<ca.DB-15)-1,this.mt2=2*ca.t}function x$1(ca,ga){return ca&ga}function E$1(ca,ga){return ca|ga}function I(ca,ga){return ca^ga}function C$1(ca,ga){return ca&~ga}function S$1(ca){if(ca==0)return-1;var ga=0;return(65535&ca)==0&&(ca>>=16,ga+=16),(255&ca)==0&&(ca>>=8,ga+=8),(15&ca)==0&&(ca>>=4,ga+=4),(3&ca)==0&&(ca>>=2,ga+=2),(1&ca)==0&&++ga,ga}function B(ca){for(var ga=0;ca!=0;)ca&=ca-1,++ga;return ga}function M$1(){}function P$1(ca){return ca}function T(ca){this.r2=d$1(),this.q3=d$1(),c$2.ONE.dlShiftTo(2*ca.t,this.r2),this.mu=this.r2.divide(ca),this.m=ca}b$1.prototype.convert=function(ca){return ca.s<0||ca.compareTo(this.m)>=0?ca.mod(this.m):ca},b$1.prototype.revert=function(ca){return ca},b$1.prototype.reduce=function(ca){ca.divRemTo(this.m,null,ca)},b$1.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s),this.reduce(_s)},b$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)},w$1.prototype.convert=function(ca){var ga=d$1();return ca.abs().dlShiftTo(this.m.t,ga),ga.divRemTo(this.m,null,ga),ca.s<0&&ga.compareTo(c$2.ZERO)>0&&this.m.subTo(ga,ga),ga},w$1.prototype.revert=function(ca){var ga=d$1();return ca.copyTo(ga),this.reduce(ga),ga},w$1.prototype.reduce=function(ca){for(;ca.t<=this.mt2;)ca[ca.t++]=0;for(var ga=0;ga<this.m.t;++ga){var _s=32767&ca[ga],Ss=_s*this.mpl+((_s*this.mph+(ca[ga]>>15)*this.mpl&this.um)<<15)&ca.DM;for(ca[_s=ga+this.m.t]+=this.m.am(0,Ss,ca,ga,0,this.m.t);ca[_s]>=ca.DV;)ca[_s]-=ca.DV,ca[++_s]++}ca.clamp(),ca.drShiftTo(this.m.t,ca),ca.compareTo(this.m)>=0&&ca.subTo(this.m,ca)},w$1.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s),this.reduce(_s)},w$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)},c$2.prototype.copyTo=function(ca){for(var ga=this.t-1;ga>=0;--ga)ca[ga]=this[ga];ca.t=this.t,ca.s=this.s},c$2.prototype.fromInt=function(ca){this.t=1,this.s=ca<0?-1:0,ca>0?this[0]=ca:ca<-1?this[0]=ca+this.DV:this.t=0},c$2.prototype.fromString=function(ca,ga){var _s;if(ga==16)_s=4;else if(ga==8)_s=3;else if(ga==256)_s=8;else if(ga==2)_s=1;else if(ga==32)_s=5;else{if(ga!=4)return void this.fromRadix(ca,ga);_s=2}this.t=0,this.s=0;for(var Ss=ca.length,Ms=!1,Cs=0;--Ss>=0;){var Ts=_s==8?255&ca[Ss]:v$1(ca,Ss);Ts<0?ca.charAt(Ss)=="-"&&(Ms=!0):(Ms=!1,Cs==0?this[this.t++]=Ts:Cs+_s>this.DB?(this[this.t-1]|=(Ts&(1<<this.DB-Cs)-1)<<Cs,this[this.t++]=Ts>>this.DB-Cs):this[this.t-1]|=Ts<<Cs,(Cs+=_s)>=this.DB&&(Cs-=this.DB))}_s==8&&(128&ca[0])!=0&&(this.s=-1,Cs>0&&(this[this.t-1]|=(1<<this.DB-Cs)-1<<Cs)),this.clamp(),Ms&&c$2.ZERO.subTo(this,this)},c$2.prototype.clamp=function(){for(var ca=this.s&this.DM;this.t>0&&this[this.t-1]==ca;)--this.t},c$2.prototype.dlShiftTo=function(ca,ga){var _s;for(_s=this.t-1;_s>=0;--_s)ga[_s+ca]=this[_s];for(_s=ca-1;_s>=0;--_s)ga[_s]=0;ga.t=this.t+ca,ga.s=this.s},c$2.prototype.drShiftTo=function(ca,ga){for(var _s=ca;_s<this.t;++_s)ga[_s-ca]=this[_s];ga.t=Math.max(this.t-ca,0),ga.s=this.s},c$2.prototype.lShiftTo=function(ca,ga){var _s,Ss=ca%this.DB,Ms=this.DB-Ss,Cs=(1<<Ms)-1,Ts=Math.floor(ca/this.DB),Is=this.s<<Ss&this.DM;for(_s=this.t-1;_s>=0;--_s)ga[_s+Ts+1]=this[_s]>>Ms|Is,Is=(this[_s]&Cs)<<Ss;for(_s=Ts-1;_s>=0;--_s)ga[_s]=0;ga[Ts]=Is,ga.t=this.t+Ts+1,ga.s=this.s,ga.clamp()},c$2.prototype.rShiftTo=function(ca,ga){ga.s=this.s;var _s=Math.floor(ca/this.DB);if(_s>=this.t)ga.t=0;else{var Ss=ca%this.DB,Ms=this.DB-Ss,Cs=(1<<Ss)-1;ga[0]=this[_s]>>Ss;for(var Ts=_s+1;Ts<this.t;++Ts)ga[Ts-_s-1]|=(this[Ts]&Cs)<<Ms,ga[Ts-_s]=this[Ts]>>Ss;Ss>0&&(ga[this.t-_s-1]|=(this.s&Cs)<<Ms),ga.t=this.t-_s,ga.clamp()}},c$2.prototype.subTo=function(ca,ga){for(var _s=0,Ss=0,Ms=Math.min(ca.t,this.t);_s<Ms;)Ss+=this[_s]-ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;if(ca.t<this.t){for(Ss-=ca.s;_s<this.t;)Ss+=this[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=this.s}else{for(Ss+=this.s;_s<ca.t;)Ss-=ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss-=ca.s}ga.s=Ss<0?-1:0,Ss<-1?ga[_s++]=this.DV+Ss:Ss>0&&(ga[_s++]=Ss),ga.t=_s,ga.clamp()},c$2.prototype.multiplyTo=function(ca,ga){var _s=this.abs(),Ss=ca.abs(),Ms=_s.t;for(ga.t=Ms+Ss.t;--Ms>=0;)ga[Ms]=0;for(Ms=0;Ms<Ss.t;++Ms)ga[Ms+_s.t]=_s.am(0,Ss[Ms],ga,Ms,0,_s.t);ga.s=0,ga.clamp(),this.s!=ca.s&&c$2.ZERO.subTo(ga,ga)},c$2.prototype.squareTo=function(ca){for(var ga=this.abs(),_s=ca.t=2*ga.t;--_s>=0;)ca[_s]=0;for(_s=0;_s<ga.t-1;++_s){var Ss=ga.am(_s,ga[_s],ca,2*_s,0,1);(ca[_s+ga.t]+=ga.am(_s+1,2*ga[_s],ca,2*_s+1,Ss,ga.t-_s-1))>=ga.DV&&(ca[_s+ga.t]-=ga.DV,ca[_s+ga.t+1]=1)}ca.t>0&&(ca[ca.t-1]+=ga.am(_s,ga[_s],ca,2*_s,0,1)),ca.s=0,ca.clamp()},c$2.prototype.divRemTo=function(ca,ga,_s){var Ss=ca.abs();if(!(Ss.t<=0)){var Ms=this.abs();if(Ms.t<Ss.t)return ga!=null&&ga.fromInt(0),void(_s!=null&&this.copyTo(_s));_s==null&&(_s=d$1());var Cs=d$1(),Ts=this.s,Is=ca.s,Bs=this.DB-y$1(Ss[Ss.t-1]);Bs>0?(Ss.lShiftTo(Bs,Cs),Ms.lShiftTo(Bs,_s)):(Ss.copyTo(Cs),Ms.copyTo(_s));var Ps=Cs.t,Ls=Cs[Ps-1];if(Ls!=0){var Rs=Ls*(1<<this.F1)+(Ps>1?Cs[Ps-2]>>this.F2:0),Os=this.FV/Rs,Fs=(1<<this.F1)/Rs,Vs=1<<this.F2,ks=_s.t,Ns=ks-Ps,Ds=ga==null?d$1():ga;for(Cs.dlShiftTo(Ns,Ds),_s.compareTo(Ds)>=0&&(_s[_s.t++]=1,_s.subTo(Ds,_s)),c$2.ONE.dlShiftTo(Ps,Ds),Ds.subTo(Cs,Cs);Cs.t<Ps;)Cs[Cs.t++]=0;for(;--Ns>=0;){var $s=_s[--ks]==Ls?this.DM:Math.floor(_s[ks]*Os+(_s[ks-1]+Vs)*Fs);if((_s[ks]+=Cs.am(0,$s,_s,Ns,0,Ps))<$s)for(Cs.dlShiftTo(Ns,Ds),_s.subTo(Ds,_s);_s[ks]<--$s;)_s.subTo(Ds,_s)}ga!=null&&(_s.drShiftTo(Ps,ga),Ts!=Is&&c$2.ZERO.subTo(ga,ga)),_s.t=Ps,_s.clamp(),Bs>0&&_s.rShiftTo(Bs,_s),Ts<0&&c$2.ZERO.subTo(_s,_s)}}},c$2.prototype.invDigit=function(){if(this.t<1)return 0;var ca=this[0];if((1&ca)==0)return 0;var ga=3&ca;return(ga=(ga=(ga=(ga=ga*(2-(15&ca)*ga)&15)*(2-(255&ca)*ga)&255)*(2-((65535&ca)*ga&65535))&65535)*(2-ca*ga%this.DV)%this.DV)>0?this.DV-ga:-ga},c$2.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$2.prototype.exp=function(ca,ga){if(ca>4294967295||ca<1)return c$2.ONE;var _s=d$1(),Ss=d$1(),Ms=ga.convert(this),Cs=y$1(ca)-1;for(Ms.copyTo(_s);--Cs>=0;)if(ga.sqrTo(_s,Ss),(ca&1<<Cs)>0)ga.mulTo(Ss,Ms,_s);else{var Ts=_s;_s=Ss,Ss=Ts}return ga.revert(_s)},c$2.prototype.toString=function(ca){if(this.s<0)return"-"+this.negate().toString(ca);var ga;if(ca==16)ga=4;else if(ca==8)ga=3;else if(ca==2)ga=1;else if(ca==32)ga=5;else{if(ca!=4)return this.toRadix(ca);ga=2}var _s,Ss=(1<<ga)-1,Ms=!1,Cs="",Ts=this.t,Is=this.DB-Ts*this.DB%ga;if(Ts-- >0)for(Is<this.DB&&(_s=this[Ts]>>Is)>0&&(Ms=!0,Cs=g$2(_s));Ts>=0;)Is<ga?(_s=(this[Ts]&(1<<Is)-1)<<ga-Is,_s|=this[--Ts]>>(Is+=this.DB-ga)):(_s=this[Ts]>>(Is-=ga)&Ss,Is<=0&&(Is+=this.DB,--Ts)),_s>0&&(Ms=!0),Ms&&(Cs+=g$2(_s));return Ms?Cs:"0"},c$2.prototype.negate=function(){var ca=d$1();return c$2.ZERO.subTo(this,ca),ca},c$2.prototype.abs=function(){return this.s<0?this.negate():this},c$2.prototype.compareTo=function(ca){var ga=this.s-ca.s;if(ga!=0)return ga;var _s=this.t;if((ga=_s-ca.t)!=0)return this.s<0?-ga:ga;for(;--_s>=0;)if((ga=this[_s]-ca[_s])!=0)return ga;return 0},c$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$1(this[this.t-1]^this.s&this.DM)},c$2.prototype.mod=function(ca){var ga=d$1();return this.abs().divRemTo(ca,null,ga),this.s<0&&ga.compareTo(c$2.ZERO)>0&&ca.subTo(ga,ga),ga},c$2.prototype.modPowInt=function(ca,ga){var _s;return _s=ca<256||ga.isEven()?new b$1(ga):new w$1(ga),this.exp(ca,_s)},c$2.ZERO=m$2(0),c$2.ONE=m$2(1),M$1.prototype.convert=P$1,M$1.prototype.revert=P$1,M$1.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s)},M$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga)},T.prototype.convert=function(ca){if(ca.s<0||ca.t>2*this.m.t)return ca.mod(this.m);if(ca.compareTo(this.m)<0)return ca;var ga=d$1();return ca.copyTo(ga),this.reduce(ga),ga},T.prototype.revert=function(ca){return ca},T.prototype.reduce=function(ca){for(ca.drShiftTo(this.m.t-1,this.r2),ca.t>this.m.t+1&&(ca.t=this.m.t+1,ca.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);ca.compareTo(this.r2)<0;)ca.dAddOffset(1,this.m.t+1);for(ca.subTo(this.r2,ca);ca.compareTo(this.m)>=0;)ca.subTo(this.m,ca)},T.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s),this.reduce(_s)},T.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)};var Q=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R$1=(1<<26)/Q[Q.length-1];c$2.prototype.chunkSize=function(ca){return Math.floor(Math.LN2*this.DB/Math.log(ca))},c$2.prototype.toRadix=function(ca){if(ca==null&&(ca=10),this.signum()==0||ca<2||ca>36)return"0";var ga=this.chunkSize(ca),_s=Math.pow(ca,ga),Ss=m$2(_s),Ms=d$1(),Cs=d$1(),Ts="";for(this.divRemTo(Ss,Ms,Cs);Ms.signum()>0;)Ts=(_s+Cs.intValue()).toString(ca).substr(1)+Ts,Ms.divRemTo(Ss,Ms,Cs);return Cs.intValue().toString(ca)+Ts},c$2.prototype.fromRadix=function(ca,ga){this.fromInt(0),ga==null&&(ga=10);for(var _s=this.chunkSize(ga),Ss=Math.pow(ga,_s),Ms=!1,Cs=0,Ts=0,Is=0;Is<ca.length;++Is){var Bs=v$1(ca,Is);Bs<0?ca.charAt(Is)=="-"&&this.signum()==0&&(Ms=!0):(Ts=ga*Ts+Bs,++Cs>=_s&&(this.dMultiply(Ss),this.dAddOffset(Ts,0),Cs=0,Ts=0))}Cs>0&&(this.dMultiply(Math.pow(ga,Cs)),this.dAddOffset(Ts,0)),Ms&&c$2.ZERO.subTo(this,this)},c$2.prototype.fromNumber=function(ca,ga,_s){if(typeof ga=="number")if(ca<2)this.fromInt(1);else for(this.fromNumber(ca,_s),this.testBit(ca-1)||this.bitwiseTo(c$2.ONE.shiftLeft(ca-1),E$1,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(ga);)this.dAddOffset(2,0),this.bitLength()>ca&&this.subTo(c$2.ONE.shiftLeft(ca-1),this);else{var Ss=new Array,Ms=7&ca;Ss.length=1+(ca>>3),ga.nextBytes(Ss),Ms>0?Ss[0]&=(1<<Ms)-1:Ss[0]=0,this.fromString(Ss,256)}},c$2.prototype.bitwiseTo=function(ca,ga,_s){var Ss,Ms,Cs=Math.min(ca.t,this.t);for(Ss=0;Ss<Cs;++Ss)_s[Ss]=ga(this[Ss],ca[Ss]);if(ca.t<this.t){for(Ms=ca.s&this.DM,Ss=Cs;Ss<this.t;++Ss)_s[Ss]=ga(this[Ss],Ms);_s.t=this.t}else{for(Ms=this.s&this.DM,Ss=Cs;Ss<ca.t;++Ss)_s[Ss]=ga(Ms,ca[Ss]);_s.t=ca.t}_s.s=ga(this.s,ca.s),_s.clamp()},c$2.prototype.changeBit=function(ca,ga){var _s=c$2.ONE.shiftLeft(ca);return this.bitwiseTo(_s,ga,_s),_s},c$2.prototype.addTo=function(ca,ga){for(var _s=0,Ss=0,Ms=Math.min(ca.t,this.t);_s<Ms;)Ss+=this[_s]+ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;if(ca.t<this.t){for(Ss+=ca.s;_s<this.t;)Ss+=this[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=this.s}else{for(Ss+=this.s;_s<ca.t;)Ss+=ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=ca.s}ga.s=Ss<0?-1:0,Ss>0?ga[_s++]=Ss:Ss<-1&&(ga[_s++]=this.DV+Ss),ga.t=_s,ga.clamp()},c$2.prototype.dMultiply=function(ca){this[this.t]=this.am(0,ca-1,this,0,0,this.t),++this.t,this.clamp()},c$2.prototype.dAddOffset=function(ca,ga){if(ca!=0){for(;this.t<=ga;)this[this.t++]=0;for(this[ga]+=ca;this[ga]>=this.DV;)this[ga]-=this.DV,++ga>=this.t&&(this[this.t++]=0),++this[ga]}},c$2.prototype.multiplyLowerTo=function(ca,ga,_s){var Ss,Ms=Math.min(this.t+ca.t,ga);for(_s.s=0,_s.t=Ms;Ms>0;)_s[--Ms]=0;for(Ss=_s.t-this.t;Ms<Ss;++Ms)_s[Ms+this.t]=this.am(0,ca[Ms],_s,Ms,0,this.t);for(Ss=Math.min(ca.t,ga);Ms<Ss;++Ms)this.am(0,ca[Ms],_s,Ms,0,ga-Ms);_s.clamp()},c$2.prototype.multiplyUpperTo=function(ca,ga,_s){--ga;var Ss=_s.t=this.t+ca.t-ga;for(_s.s=0;--Ss>=0;)_s[Ss]=0;for(Ss=Math.max(ga-this.t,0);Ss<ca.t;++Ss)_s[this.t+Ss-ga]=this.am(ga-Ss,ca[Ss],_s,0,0,this.t+Ss-ga);_s.clamp(),_s.drShiftTo(1,_s)},c$2.prototype.modInt=function(ca){if(ca<=0)return 0;var ga=this.DV%ca,_s=this.s<0?ca-1:0;if(this.t>0)if(ga==0)_s=this[0]%ca;else for(var Ss=this.t-1;Ss>=0;--Ss)_s=(ga*_s+this[Ss])%ca;return _s},c$2.prototype.millerRabin=function(ca){var ga=this.subtract(c$2.ONE),_s=ga.getLowestSetBit();if(_s<=0)return!1;var Ss=ga.shiftRight(_s);(ca=ca+1>>1)>Q.length&&(ca=Q.length);for(var Ms=d$1(),Cs=0;Cs<ca;++Cs){Ms.fromInt(Q[Math.floor(Math.random()*Q.length)]);var Ts=Ms.modPow(Ss,this);if(Ts.compareTo(c$2.ONE)!=0&&Ts.compareTo(ga)!=0){for(var Is=1;Is++<_s&&Ts.compareTo(ga)!=0;)if((Ts=Ts.modPowInt(2,this)).compareTo(c$2.ONE)==0)return!1;if(Ts.compareTo(ga)!=0)return!1}}return!0},c$2.prototype.clone=function(){var ca=d$1();return this.copyTo(ca),ca},c$2.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$2.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$2.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$2.prototype.toByteArray=function(){var ca=this.t,ga=new Array;ga[0]=this.s;var _s,Ss=this.DB-ca*this.DB%8,Ms=0;if(ca-- >0)for(Ss<this.DB&&(_s=this[ca]>>Ss)!=(this.s&this.DM)>>Ss&&(ga[Ms++]=_s|this.s<<this.DB-Ss);ca>=0;)Ss<8?(_s=(this[ca]&(1<<Ss)-1)<<8-Ss,_s|=this[--ca]>>(Ss+=this.DB-8)):(_s=this[ca]>>(Ss-=8)&255,Ss<=0&&(Ss+=this.DB,--ca)),(128&_s)!=0&&(_s|=-256),Ms==0&&(128&this.s)!=(128&_s)&&++Ms,(Ms>0||_s!=this.s)&&(ga[Ms++]=_s);return ga},c$2.prototype.equals=function(ca){return this.compareTo(ca)==0},c$2.prototype.min=function(ca){return this.compareTo(ca)<0?this:ca},c$2.prototype.max=function(ca){return this.compareTo(ca)>0?this:ca},c$2.prototype.and=function(ca){var ga=d$1();return this.bitwiseTo(ca,x$1,ga),ga},c$2.prototype.or=function(ca){var ga=d$1();return this.bitwiseTo(ca,E$1,ga),ga},c$2.prototype.xor=function(ca){var ga=d$1();return this.bitwiseTo(ca,I,ga),ga},c$2.prototype.andNot=function(ca){var ga=d$1();return this.bitwiseTo(ca,C$1,ga),ga},c$2.prototype.not=function(){for(var ca=d$1(),ga=0;ga<this.t;++ga)ca[ga]=this.DM&~this[ga];return ca.t=this.t,ca.s=~this.s,ca},c$2.prototype.shiftLeft=function(ca){var ga=d$1();return ca<0?this.rShiftTo(-ca,ga):this.lShiftTo(ca,ga),ga},c$2.prototype.shiftRight=function(ca){var ga=d$1();return ca<0?this.lShiftTo(-ca,ga):this.rShiftTo(ca,ga),ga},c$2.prototype.getLowestSetBit=function(){for(var ca=0;ca<this.t;++ca)if(this[ca]!=0)return ca*this.DB+S$1(this[ca]);return this.s<0?this.t*this.DB:-1},c$2.prototype.bitCount=function(){for(var ca=0,ga=this.s&this.DM,_s=0;_s<this.t;++_s)ca+=B(this[_s]^ga);return ca},c$2.prototype.testBit=function(ca){var ga=Math.floor(ca/this.DB);return ga>=this.t?this.s!=0:(this[ga]&1<<ca%this.DB)!=0},c$2.prototype.setBit=function(ca){return this.changeBit(ca,E$1)},c$2.prototype.clearBit=function(ca){return this.changeBit(ca,C$1)},c$2.prototype.flipBit=function(ca){return this.changeBit(ca,I)},c$2.prototype.add=function(ca){var ga=d$1();return this.addTo(ca,ga),ga},c$2.prototype.subtract=function(ca){var ga=d$1();return this.subTo(ca,ga),ga},c$2.prototype.multiply=function(ca){var ga=d$1();return this.multiplyTo(ca,ga),ga},c$2.prototype.divide=function(ca){var ga=d$1();return this.divRemTo(ca,ga,null),ga},c$2.prototype.remainder=function(ca){var ga=d$1();return this.divRemTo(ca,null,ga),ga},c$2.prototype.divideAndRemainder=function(ca){var ga=d$1(),_s=d$1();return this.divRemTo(ca,ga,_s),new Array(ga,_s)},c$2.prototype.modPow=function(ca,ga){var _s,Ss,Ms=ca.bitLength(),Cs=m$2(1);if(Ms<=0)return Cs;_s=Ms<18?1:Ms<48?3:Ms<144?4:Ms<768?5:6,Ss=Ms<8?new b$1(ga):ga.isEven()?new T(ga):new w$1(ga);var Ts=new Array,Is=3,Bs=_s-1,Ps=(1<<_s)-1;if(Ts[1]=Ss.convert(this),_s>1){var Ls=d$1();for(Ss.sqrTo(Ts[1],Ls);Is<=Ps;)Ts[Is]=d$1(),Ss.mulTo(Ls,Ts[Is-2],Ts[Is]),Is+=2}var Rs,Os,Fs=ca.t-1,Vs=!0,ks=d$1();for(Ms=y$1(ca[Fs])-1;Fs>=0;){for(Ms>=Bs?Rs=ca[Fs]>>Ms-Bs&Ps:(Rs=(ca[Fs]&(1<<Ms+1)-1)<<Bs-Ms,Fs>0&&(Rs|=ca[Fs-1]>>this.DB+Ms-Bs)),Is=_s;(1&Rs)==0;)Rs>>=1,--Is;if((Ms-=Is)<0&&(Ms+=this.DB,--Fs),Vs)Ts[Rs].copyTo(Cs),Vs=!1;else{for(;Is>1;)Ss.sqrTo(Cs,ks),Ss.sqrTo(ks,Cs),Is-=2;Is>0?Ss.sqrTo(Cs,ks):(Os=Cs,Cs=ks,ks=Os),Ss.mulTo(ks,Ts[Rs],Cs)}for(;Fs>=0&&(ca[Fs]&1<<Ms)==0;)Ss.sqrTo(Cs,ks),Os=Cs,Cs=ks,ks=Os,--Ms<0&&(Ms=this.DB-1,--Fs)}return Ss.revert(Cs)},c$2.prototype.modInverse=function(ca){var ga=ca.isEven();if(this.isEven()&&ga||ca.signum()==0)return c$2.ZERO;for(var _s=ca.clone(),Ss=this.clone(),Ms=m$2(1),Cs=m$2(0),Ts=m$2(0),Is=m$2(1);_s.signum()!=0;){for(;_s.isEven();)_s.rShiftTo(1,_s),ga?(Ms.isEven()&&Cs.isEven()||(Ms.addTo(this,Ms),Cs.subTo(ca,Cs)),Ms.rShiftTo(1,Ms)):Cs.isEven()||Cs.subTo(ca,Cs),Cs.rShiftTo(1,Cs);for(;Ss.isEven();)Ss.rShiftTo(1,Ss),ga?(Ts.isEven()&&Is.isEven()||(Ts.addTo(this,Ts),Is.subTo(ca,Is)),Ts.rShiftTo(1,Ts)):Is.isEven()||Is.subTo(ca,Is),Is.rShiftTo(1,Is);_s.compareTo(Ss)>=0?(_s.subTo(Ss,_s),ga&&Ms.subTo(Ts,Ms),Cs.subTo(Is,Cs)):(Ss.subTo(_s,Ss),ga&&Ts.subTo(Ms,Ts),Is.subTo(Cs,Is))}return Ss.compareTo(c$2.ONE)!=0?c$2.ZERO:Is.compareTo(ca)>=0?Is.subtract(ca):Is.signum()<0?(Is.addTo(ca,Is),Is.signum()<0?Is.add(ca):Is):Is},c$2.prototype.pow=function(ca){return this.exp(ca,new M$1)},c$2.prototype.gcd=function(ca){var ga=this.s<0?this.negate():this.clone(),_s=ca.s<0?ca.negate():ca.clone();if(ga.compareTo(_s)<0){var Ss=ga;ga=_s,_s=Ss}var Ms=ga.getLowestSetBit(),Cs=_s.getLowestSetBit();if(Cs<0)return ga;for(Ms<Cs&&(Cs=Ms),Cs>0&&(ga.rShiftTo(Cs,ga),_s.rShiftTo(Cs,_s));ga.signum()>0;)(Ms=ga.getLowestSetBit())>0&&ga.rShiftTo(Ms,ga),(Ms=_s.getLowestSetBit())>0&&_s.rShiftTo(Ms,_s),ga.compareTo(_s)>=0?(ga.subTo(_s,ga),ga.rShiftTo(1,ga)):(_s.subTo(ga,_s),_s.rShiftTo(1,_s));return Cs>0&&_s.lShiftTo(Cs,_s),_s},c$2.prototype.isProbablePrime=function(ca){var ga,_s=this.abs();if(_s.t==1&&_s[0]<=Q[Q.length-1]){for(ga=0;ga<Q.length;++ga)if(_s[0]==Q[ga])return!0;return!1}if(_s.isEven())return!1;for(ga=1;ga<Q.length;){for(var Ss=Q[ga],Ms=ga+1;Ms<Q.length&&Ss<R$1;)Ss*=Q[Ms++];for(Ss=_s.modInt(Ss);ga<Ms;)if(Ss%Q[ga++]==0)return!1}return _s.millerRabin(ca)},c$2.prototype.square=function(){var ca=d$1();return this.squareTo(ca),ca};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function k$1(ca){var ga,_s,Ss="";for(ga=0;ga+3<=ca.length;ga+=3)_s=parseInt(ca.substring(ga,ga+3),16),Ss+=D.charAt(_s>>6)+D.charAt(63&_s);for(ga+1==ca.length?(_s=parseInt(ca.substring(ga,ga+1),16),Ss+=D.charAt(_s<<2)):ga+2==ca.length&&(_s=parseInt(ca.substring(ga,ga+2),16),Ss+=D.charAt(_s>>2)+D.charAt((3&_s)<<4));(3&Ss.length)>0;)Ss+="=";return Ss}function N$1(ca){var ga,_s,Ss,Ms="",Cs=0;for(ga=0;ga<ca.length&&ca.charAt(ga)!="=";++ga)(Ss=D.indexOf(ca.charAt(ga)))<0||(Cs==0?(Ms+=g$2(Ss>>2),_s=3&Ss,Cs=1):Cs==1?(Ms+=g$2(_s<<2|Ss>>4),_s=15&Ss,Cs=2):Cs==2?(Ms+=g$2(_s),Ms+=g$2(Ss>>2),_s=3&Ss,Cs=3):(Ms+=g$2(_s<<2|Ss>>4),Ms+=g$2(15&Ss),Cs=0));return Cs==1&&(Ms+=g$2(_s<<2)),Ms}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function F$1(){this.i=0,this.j=0,this.S=new Array}F$1.prototype.init=function(ca){var ga,_s,Ss;for(ga=0;ga<256;++ga)this.S[ga]=ga;for(_s=0,ga=0;ga<256;++ga)_s=_s+this.S[ga]+ca[ga%ca.length]&255,Ss=this.S[ga],this.S[ga]=this.S[_s],this.S[_s]=Ss;this.i=0,this.j=0},F$1.prototype.next=function(){var ca;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,ca=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=ca,this.S[ca+this.S[this.i]&255]};var O$1,L$1,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function H(){var ca;ca=new Date().getTime(),L$1[V$1++]^=255&ca,L$1[V$1++]^=ca>>8&255,L$1[V$1++]^=ca>>16&255,L$1[V$1++]^=ca>>24&255,V$1>=256&&(V$1-=256)}if(L$1==null){var K;if(L$1=new Array,V$1=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var z=window.crypto||window.msCrypto;if(z.getRandomValues){var q$1=new Uint8Array(32);for(z.getRandomValues(q$1),K=0;K<32;++K)L$1[V$1++]=q$1[K]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var _$1=window.crypto.random(32);for(K=0;K<_$1.length;++K)L$1[V$1++]=255&_$1.charCodeAt(K)}}for(;V$1<256;)K=Math.floor(65536*Math.random()),L$1[V$1++]=K>>>8,L$1[V$1++]=255&K;V$1=0,H()}function j$1(){if(O$1==null){for(H(),(O$1=new F$1).init(L$1),V$1=0;V$1<L$1.length;++V$1)L$1[V$1]=0;V$1=0}return O$1.next()}function U$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G(ca,ga){return new c$2(ca,ga)}function W$1(ca,ga,_s){for(var Ss="",Ms=0;Ss.length<ga;)Ss+=_s(String.fromCharCode.apply(String,ca.concat([(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms]))),Ms+=1;return Ss}function X(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y(ca,ga,_s){for(var Ss="",Ms=0;Ss.length<ga;)Ss+=_s(ca+String.fromCharCode.apply(String,[(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms])),Ms+=1;return Ss}function Z(ca){for(var ga="",_s=0;_s<ca.length;_s++){var Ss=ca[_s].toString(16);Ss.length==1&&(Ss="0"+Ss),ga+=Ss}return ga}function J(ca){return Z(function(ga){for(var _s=new Array,Ss=0;Ss<ga.length;Ss++)_s[Ss]=ga.charCodeAt(Ss);return _s}(ca))}function $(ca){return ca.length%4==2?ca+="==":ca.length%4==3&&(ca+="="),ca=(ca=ca.replace(/-/g,"+")).replace(/_/g,"/")}function tt(ca){return ca.length%2==1&&(ca="0"+ca),function(ga){return(ga=(ga=ga.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(k$1(ca))}function et(ca){return N$1($(ca))}function it(ca){return function(ga){return ga.replace(/%/g,"")}(function(ga){for(var _s=encodeURIComponent(ga),Ss="",Ms=0;Ms<_s.length;Ms++)_s[Ms]=="%"?(Ss+=_s.substr(Ms,3),Ms+=2):Ss=Ss+"%"+J(_s[Ms]);return Ss}(ca))}function nt(ca){return decodeURIComponent(function(ga){return ga.replace(/(..)/g,"%$1")}(ca))}function rt(ca){for(var ga="",_s=0;_s<ca.length-1;_s+=2)ga+=String.fromCharCode(parseInt(ca.substr(_s,2),16));return ga}function ot(ca){for(var ga="",_s=0;_s<ca.length;_s++)ga+=("0"+ca.charCodeAt(_s).toString(16)).slice(-2);return ga}function st(ca){var ga=function(_s){return k$1(_s)}(ca).replace(/(.{64})/g,`$1\r
`);return ga=ga.replace(/\r\n$/,"")}function at(ca,ga){return"-----BEGIN "+ga+`-----\r
`+st(ca)+`\r
-----END `+ga+`-----\r
`}function ut(ca,ga){if(ca.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+ga;return function(_s){return N$1(_s.replace(/[^0-9A-Za-z\/+=]*/g,""))}(ca=ga!==void 0?(ca=ca.replace(new RegExp("^[^]*-----BEGIN "+ga+"-----"),"")).replace(new RegExp("-----END "+ga+"-----[^]*$"),""):(ca=ca.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function lt(ca){var ga="malformed hex value";if(!ca.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw ga;if(ca.length!=8)return ca.length==32?function(_s){if(!_s.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Ss=(_s=_s.toLowerCase()).match(/.{1,4}/g),Ms=0;Ms<8;Ms++)Ss[Ms]=Ss[Ms].replace(/^0+/,""),Ss[Ms]==""&&(Ss[Ms]="0");var Cs=(_s=":"+Ss.join(":")+":").match(/:(0:){2,}/g);if(Cs===null)return _s.slice(1,-1);var Ts="";for(Ms=0;Ms<Cs.length;Ms++)Cs[Ms].length>Ts.length&&(Ts=Cs[Ms]);return(_s=_s.replace(Ts,"::")).slice(1,-1)}(ca):ca;try{return parseInt(ca.substr(0,2),16)+"."+parseInt(ca.substr(2,2),16)+"."+parseInt(ca.substr(4,2),16)+"."+parseInt(ca.substr(6,2),16)}catch{throw ga}}function ht(ca){return ca.match(/.{4}/g).map(function(ga){var _s=parseInt(ga.substr(0,2),16),Ss=parseInt(ga.substr(2),16);if(_s==0&Ss<128)return String.fromCharCode(Ss);if(_s<8){var Ms=128|63&Ss;return nt((192|(7&_s)<<3|(192&Ss)>>6).toString(16)+Ms.toString(16))}Ms=128|(15&_s)<<2|(192&Ss)>>6;var Cs=128|63&Ss;return nt((224|(240&_s)>>4).toString(16)+Ms.toString(16)+Cs.toString(16))}).join("")}function ct(ca){return!(ca.length%2!=0||!ca.match(/^[0-9a-f]+$/)&&!ca.match(/^[0-9A-F]+$/))}function dt(ca){return ca.length%2==1?"0"+ca:ca.substr(0,1)>"7"?"00"+ca:ca}U$1.prototype.nextBytes=function(ca){var ga;for(ga=0;ga<ca.length;++ga)ca[ga]=j$1()},X.prototype.doPublic=function(ca){return ca.modPowInt(this.e,this.n)},X.prototype.setPublic=function(ca,ga){if(this.isPublic=!0,this.isPrivate=!1,typeof ca!="string")this.n=ca,this.e=ga;else{if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA public key";this.n=G(ca,16),this.e=parseInt(ga,16)}},X.prototype.encrypt=function(ca){var ga=function(Ms,Cs){if(Cs<Ms.length+11)throw"Message too long for RSA";for(var Ts=new Array,Is=Ms.length-1;Is>=0&&Cs>0;){var Bs=Ms.charCodeAt(Is--);Bs<128?Ts[--Cs]=Bs:Bs>127&&Bs<2048?(Ts[--Cs]=63&Bs|128,Ts[--Cs]=Bs>>6|192):(Ts[--Cs]=63&Bs|128,Ts[--Cs]=Bs>>6&63|128,Ts[--Cs]=Bs>>12|224)}Ts[--Cs]=0;for(var Ps=new U$1,Ls=new Array;Cs>2;){for(Ls[0]=0;Ls[0]==0;)Ps.nextBytes(Ls);Ts[--Cs]=Ls[0]}return Ts[--Cs]=2,Ts[--Cs]=0,new c$2(Ts)}(ca,this.n.bitLength()+7>>3);if(ga==null)return null;var _s=this.doPublic(ga);if(_s==null)return null;var Ss=_s.toString(16);return(1&Ss.length)==0?Ss:"0"+Ss},X.prototype.encryptOAEP=function(ca,ga,_s){var Ss=function(Ts,Is,Bs,Ps){var Ls=u$2.crypto.MessageDigest,Rs=u$2.crypto.Util,Os=null;if(Bs||(Bs="sha1"),typeof Bs=="string"&&(Os=Ls.getCanonicalAlgName(Bs),Ps=Ls.getHashLength(Os),Bs=function(Hs){return rt(Rs.hashHex(ot(Hs),Os))}),Ts.length+2*Ps+2>Is)throw"Message too long for RSA";var Fs,Vs="";for(Fs=0;Fs<Is-Ts.length-2*Ps-2;Fs+=1)Vs+="\0";var ks=Bs("")+Vs+""+Ts,Ns=new Array(Ps);new U$1().nextBytes(Ns);var Ds=W$1(Ns,ks.length,Bs),$s=[];for(Fs=0;Fs<ks.length;Fs+=1)$s[Fs]=ks.charCodeAt(Fs)^Ds.charCodeAt(Fs);var Gs=W$1($s,Ns.length,Bs),Us=[0];for(Fs=0;Fs<Ns.length;Fs+=1)Us[Fs+1]=Ns[Fs]^Gs.charCodeAt(Fs);return new c$2(Us.concat($s))}(ca,this.n.bitLength()+7>>3,ga,_s);if(Ss==null)return null;var Ms=this.doPublic(Ss);if(Ms==null)return null;var Cs=Ms.toString(16);return(1&Cs.length)==0?Cs:"0"+Cs},X.prototype.type="RSA",X.prototype.doPrivate=function(ca){if(this.p==null||this.q==null)return ca.modPow(this.d,this.n);for(var ga=ca.mod(this.p).modPow(this.dmp1,this.p),_s=ca.mod(this.q).modPow(this.dmq1,this.q);ga.compareTo(_s)<0;)ga=ga.add(this.p);return ga.subtract(_s).multiply(this.coeff).mod(this.p).multiply(this.q).add(_s)},X.prototype.setPrivate=function(ca,ga,_s){if(this.isPrivate=!0,typeof ca!="string")this.n=ca,this.e=ga,this.d=_s;else{if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA private key";this.n=G(ca,16),this.e=parseInt(ga,16),this.d=G(_s,16)}},X.prototype.setPrivateEx=function(ca,ga,_s,Ss,Ms,Cs,Ts,Is){if(this.isPrivate=!0,this.isPublic=!1,ca==null)throw"RSASetPrivateEx N == null";if(ga==null)throw"RSASetPrivateEx E == null";if(ca.length==0)throw"RSASetPrivateEx N.length == 0";if(ga.length==0)throw"RSASetPrivateEx E.length == 0";if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G(ca,16),this.e=parseInt(ga,16),this.d=G(_s,16),this.p=G(Ss,16),this.q=G(Ms,16),this.dmp1=G(Cs,16),this.dmq1=G(Ts,16),this.coeff=G(Is,16)},X.prototype.generate=function(ca,ga){var _s=new U$1,Ss=ca>>1;this.e=parseInt(ga,16);for(var Ms=new c$2(ga,16);;){for(;this.p=new c$2(ca-Ss,1,_s),this.p.subtract(c$2.ONE).gcd(Ms).compareTo(c$2.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$2(Ss,1,_s),this.q.subtract(c$2.ONE).gcd(Ms).compareTo(c$2.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Cs=this.p;this.p=this.q,this.q=Cs}var Ts=this.p.subtract(c$2.ONE),Is=this.q.subtract(c$2.ONE),Bs=Ts.multiply(Is);if(Bs.gcd(Ms).compareTo(c$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==ca)){this.d=Ms.modInverse(Bs),this.dmp1=this.d.mod(Ts),this.dmq1=this.d.mod(Is),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X.prototype.decrypt=function(ca){if(ca.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var ga=G(ca,16),_s=this.doPrivate(ga);return _s==null?null:function(Ss,Ms){for(var Cs=Ss.toByteArray(),Ts=0;Ts<Cs.length&&Cs[Ts]==0;)++Ts;if(Cs.length-Ts!=Ms-1||Cs[Ts]!=2)return null;for(++Ts;Cs[Ts]!=0;)if(++Ts>=Cs.length)return null;for(var Is="";++Ts<Cs.length;){var Bs=255&Cs[Ts];Bs<128?Is+=String.fromCharCode(Bs):Bs>191&&Bs<224?(Is+=String.fromCharCode((31&Bs)<<6|63&Cs[Ts+1]),++Ts):(Is+=String.fromCharCode((15&Bs)<<12|(63&Cs[Ts+1])<<6|63&Cs[Ts+2]),Ts+=2)}return Is}(_s,this.n.bitLength()+7>>3)},X.prototype.decryptOAEP=function(ca,ga,_s){if(ca.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Ss=G(ca,16),Ms=this.doPrivate(Ss);return Ms==null?null:function(Cs,Ts,Is,Bs){var Ps=u$2.crypto.MessageDigest,Ls=u$2.crypto.Util,Rs=null;for(Is||(Is="sha1"),typeof Is=="string"&&(Rs=Ps.getCanonicalAlgName(Is),Bs=Ps.getHashLength(Rs),Is=function(Us){return rt(Ls.hashHex(ot(Us),Rs))}),Cs=Cs.toByteArray(),Os=0;Os<Cs.length;Os+=1)Cs[Os]&=255;for(;Cs.length<Ts;)Cs.unshift(0);if((Cs=String.fromCharCode.apply(String,Cs)).length<2*Bs+2)throw"Cipher too short";var Os,Fs=Cs.substr(1,Bs),Vs=Cs.substr(Bs+1),ks=Y(Vs,Bs,Is),Ns=[];for(Os=0;Os<Fs.length;Os+=1)Ns[Os]=Fs.charCodeAt(Os)^ks.charCodeAt(Os);var Ds=Y(String.fromCharCode.apply(String,Ns),Cs.length-Bs,Is),$s=[];for(Os=0;Os<Vs.length;Os+=1)$s[Os]=Vs.charCodeAt(Os)^Ds.charCodeAt(Os);if(($s=String.fromCharCode.apply(String,$s)).substr(0,Bs)!==Is(""))throw"Hash mismatch";var Gs=($s=$s.substr(Bs)).indexOf("");if((Gs!=-1?$s.substr(0,Gs).lastIndexOf("\0"):-1)+1!=Gs)throw"Malformed data";return $s.substr(Gs+1)}(Ms,this.n.bitLength()+7>>3,ga,_s)},u$2.lang!==void 0&&u$2.lang||(u$2.lang={}),u$2.lang.String=function(){},u$2.lang.String.isInteger=function(ca){return!!ca.match(/^[0-9]+$/)||!!ca.match(/^-[0-9]+$/)},u$2.lang.String.isHex=function(ca){return ct(ca)},u$2.lang.String.isBase64=function(ca){return!(!(ca=ca.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||ca.length%4!=0)},u$2.lang.String.isBase64URL=function(ca){return!ca.match(/[+/=]/)&&(ca=$(ca),u$2.lang.String.isBase64(ca))},u$2.lang.String.isIntegerArray=function(ca){return!!(ca=ca.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},u$2.lang.String.isPrintable=function(ca){return ca.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},u$2.lang.String.isIA5=function(ca){return ca.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},u$2.lang.String.isMail=function(ca){return ca.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pt=function(ca,ga,_s){return _s==null&&(_s="0"),ca.length>=ga?ca:new Array(ga-ca.length+1).join(_s)+ca};function At(ca,ga){var _s=function(){};_s.prototype=ga.prototype,ca.prototype=new _s,ca.prototype.constructor=ca,ca.superclass=ga.prototype,ga.prototype.constructor==Object.prototype.constructor&&(ga.prototype.constructor=ga)}u$2.crypto!==void 0&&u$2.crypto||(u$2.crypto={}),u$2.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$2.algo.MD5,sha1:h$2.algo.SHA1,sha224:h$2.algo.SHA224,sha256:h$2.algo.SHA256,sha384:h$2.algo.SHA384,sha512:h$2.algo.SHA512,ripemd160:h$2.algo.RIPEMD160},this.getDigestInfoHex=function(ca,ga){if(this.DIGESTINFOHEAD[ga]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+ga;return this.DIGESTINFOHEAD[ga]+ca},this.getPaddedDigestInfoHex=function(ca,ga,_s){var Ss=this.getDigestInfoHex(ca,ga),Ms=_s/4;if(Ss.length+22>Ms)throw"key is too short for SigAlg: keylen="+_s+","+ga;for(var Cs="0001",Ts="00"+Ss,Is="",Bs=Ms-Cs.length-Ts.length,Ps=0;Ps<Bs;Ps+=2)Is+="ff";return Cs+Is+Ts},this.hashString=function(ca,ga){return new u$2.crypto.MessageDigest({alg:ga}).digestString(ca)},this.hashHex=function(ca,ga){return new u$2.crypto.MessageDigest({alg:ga}).digestHex(ca)},this.sha1=function(ca){return this.hashString(ca,"sha1")},this.sha256=function(ca){return this.hashString(ca,"sha256")},this.sha256Hex=function(ca){return this.hashHex(ca,"sha256")},this.sha512=function(ca){return this.hashString(ca,"sha512")},this.sha512Hex=function(ca){return this.hashHex(ca,"sha512")},this.isKey=function(ca){return ca instanceof X||ca instanceof u$2.crypto.DSA||ca instanceof u$2.crypto.ECDSA}},u$2.crypto.Util.md5=function(ca){return new u$2.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(ca)},u$2.crypto.Util.ripemd160=function(ca){return new u$2.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(ca)},u$2.crypto.Util.SECURERANDOMGEN=new U$1,u$2.crypto.Util.getRandomHexOfNbytes=function(ca){var ga=new Array(ca);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(ga),Z(ga)},u$2.crypto.Util.getRandomBigIntegerOfNbytes=function(ca){return new c$2(u$2.crypto.Util.getRandomHexOfNbytes(ca),16)},u$2.crypto.Util.getRandomHexOfNbits=function(ca){var ga=ca%8,_s=new Array((ca-ga)/8+1);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(_s),_s[0]=(255<<ga&255^255)&_s[0],Z(_s)},u$2.crypto.Util.getRandomBigIntegerOfNbits=function(ca){return new c$2(u$2.crypto.Util.getRandomHexOfNbits(ca),16)},u$2.crypto.Util.getRandomBigIntegerZeroToMax=function(ca){for(var ga=ca.bitLength();;){var _s=u$2.crypto.Util.getRandomBigIntegerOfNbits(ga);if(ca.compareTo(_s)!=-1)return _s}},u$2.crypto.Util.getRandomBigIntegerMinToMax=function(ca,ga){var _s=ca.compareTo(ga);if(_s==1)throw"biMin is greater than biMax";if(_s==0)return ca;var Ss=ga.subtract(ca);return u$2.crypto.Util.getRandomBigIntegerZeroToMax(Ss).add(ca)},u$2.crypto.MessageDigest=function(ca){this.setAlgAndProvider=function(ga,_s){if((ga=u$2.crypto.MessageDigest.getCanonicalAlgName(ga))!==null&&_s===void 0&&(_s=u$2.crypto.Util.DEFAULTPROVIDER[ga]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(ga)!=-1&&_s=="cryptojs"){try{this.md=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[ga].create()}catch(Ss){throw"setAlgAndProvider hash alg set fail alg="+ga+"/"+Ss}this.updateString=function(Ss){this.md.update(Ss)},this.updateHex=function(Ss){var Ms=h$2.enc.Hex.parse(Ss);this.md.update(Ms)},this.digest=function(){return this.md.finalize().toString(h$2.enc.Hex)},this.digestString=function(Ss){return this.updateString(Ss),this.digest()},this.digestHex=function(Ss){return this.updateHex(Ss),this.digest()}}if(":sha256:".indexOf(ga)!=-1&&_s=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Ss){throw"setAlgAndProvider hash alg set fail alg="+ga+"/"+Ss}this.updateString=function(Ss){this.md.update(Ss)},this.updateHex=function(Ss){var Ms=sjcl.codec.hex.toBits(Ss);this.md.update(Ms)},this.digest=function(){var Ss=this.md.finalize();return sjcl.codec.hex.fromBits(Ss)},this.digestString=function(Ss){return this.updateString(Ss),this.digest()},this.digestHex=function(Ss){return this.updateHex(Ss),this.digest()}}},this.updateString=function(ga){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(ga){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(ga){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(ga){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},ca!==void 0&&ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},u$2.crypto.MessageDigest.getCanonicalAlgName=function(ca){return typeof ca=="string"&&(ca=(ca=ca.toLowerCase()).replace(/-/,"")),ca},u$2.crypto.MessageDigest.getHashLength=function(ca){var ga=u$2.crypto.MessageDigest,_s=ga.getCanonicalAlgName(ca);if(ga.HASHLENGTH[_s]===void 0)throw"not supported algorithm: "+ca;return ga.HASHLENGTH[_s]},u$2.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},u$2.crypto.Mac=function(ca){this.setAlgAndProvider=function(ga,_s){if((ga=ga.toLowerCase())==null&&(ga="hmacsha1"),(ga=ga.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+ga;_s===void 0&&(_s=u$2.crypto.Util.DEFAULTPROVIDER[ga]),this.algProv=ga+"/"+_s;var Ss=ga.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Ss)!=-1&&_s=="cryptojs"){try{var Ms=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Ss];this.mac=h$2.algo.HMAC.create(Ms,this.pass)}catch(Cs){throw"setAlgAndProvider hash alg set fail hashAlg="+Ss+"/"+Cs}this.updateString=function(Cs){this.mac.update(Cs)},this.updateHex=function(Cs){var Ts=h$2.enc.Hex.parse(Cs);this.mac.update(Ts)},this.doFinal=function(){return this.mac.finalize().toString(h$2.enc.Hex)},this.doFinalString=function(Cs){return this.updateString(Cs),this.doFinal()},this.doFinalHex=function(Cs){return this.updateHex(Cs),this.doFinal()}}},this.updateString=function(ga){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(ga){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(ga){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(ga){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(ga){if(typeof ga=="string"){var _s=ga;return ga.length%2!=1&&ga.match(/^[0-9A-Fa-f]+$/)||(_s=ot(ga)),void(this.pass=h$2.enc.Hex.parse(_s))}if(typeof ga!="object")throw"KJUR.crypto.Mac unsupported password type: "+ga;if(_s=null,ga.hex!==void 0){if(ga.hex.length%2!=0||!ga.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+ga.hex;_s=ga.hex}if(ga.utf8!==void 0&&(_s=it(ga.utf8)),ga.rstr!==void 0&&(_s=ot(ga.rstr)),ga.b64!==void 0&&(_s=N$1(ga.b64)),ga.b64u!==void 0&&(_s=et(ga.b64u)),_s==null)throw"KJUR.crypto.Mac unsupported password type: "+ga;this.pass=h$2.enc.Hex.parse(_s)},ca!==void 0&&(ca.pass!==void 0&&this.setPassword(ca.pass),ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},u$2.crypto.Signature=function(ca){var ga=null;if(this._setAlgNames=function(){var _s=this.algName.match(/^(.+)with(.+)$/);_s&&(this.mdAlgName=_s[1].toLowerCase(),this.pubkeyAlgName=_s[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(_s,Ss){for(var Ms="",Cs=Ss/4-_s.length,Ts=0;Ts<Cs;Ts++)Ms+="0";return Ms+_s},this.setAlgAndProvider=function(_s,Ss){if(this._setAlgNames(),Ss!="cryptojs/jsrsa")throw new Error("provider not supported: "+Ss);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new u$2.crypto.MessageDigest({alg:this.mdAlgName})}catch(Ms){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Ms)}this.init=function(Ms,Cs){var Ts=null;try{Ts=Cs===void 0?Et.getKey(Ms):Et.getKey(Ms,Cs)}catch(Is){throw"init failed:"+Is}if(Ts.isPrivate===!0)this.prvKey=Ts,this.state="SIGN";else{if(Ts.isPublic!==!0)throw"init failed.:"+Ts;this.pubKey=Ts,this.state="VERIFY"}},this.updateString=function(Ms){this.md.updateString(Ms)},this.updateHex=function(Ms){this.md.updateHex(Ms)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.prvKey=new u$2.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof u$2.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof u$2.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Ms){return this.updateString(Ms),this.sign()},this.signHex=function(Ms){return this.updateHex(Ms),this.sign()},this.verify=function(Ms){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.pubKey=new u$2.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Ms,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);if(u$2.crypto.ECDSA!==void 0&&this.pubKey instanceof u$2.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);if(u$2.crypto.DSA!==void 0&&this.pubKey instanceof u$2.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(_s,Ss){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(_s){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(_s){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(_s){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(_s){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(_s){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=ca,ca!==void 0&&(ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0?this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=ca.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),ca.psssaltlen!==void 0&&(this.pssSaltLen=ca.psssaltlen),ca.prvkeypem!==void 0)){if(ca.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{ga=Et.getKey(ca.prvkeypem),this.init(ga)}catch(_s){throw"fatal error to load pem private key: "+_s}}},u$2.crypto.Cipher=function(ca){},u$2.crypto.Cipher.encrypt=function(ca,ga,_s){if(ga instanceof X&&ga.isPublic){var Ss=u$2.crypto.Cipher.getAlgByKeyAndName(ga,_s);if(Ss==="RSA")return ga.encrypt(ca);if(Ss==="RSAOAEP")return ga.encryptOAEP(ca,"sha1");var Ms=Ss.match(/^RSAOAEP(\d+)$/);if(Ms!==null)return ga.encryptOAEP(ca,"sha"+Ms[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+_s}throw"Cipher.encrypt: unsupported key or algorithm"},u$2.crypto.Cipher.decrypt=function(ca,ga,_s){if(ga instanceof X&&ga.isPrivate){var Ss=u$2.crypto.Cipher.getAlgByKeyAndName(ga,_s);if(Ss==="RSA")return ga.decrypt(ca);if(Ss==="RSAOAEP")return ga.decryptOAEP(ca,"sha1");var Ms=Ss.match(/^RSAOAEP(\d+)$/);if(Ms!==null)return ga.decryptOAEP(ca,"sha"+Ms[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+_s}throw"Cipher.decrypt: unsupported key or algorithm"},u$2.crypto.Cipher.getAlgByKeyAndName=function(ca,ga){if(ca instanceof X){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(ga)!=-1)return ga;if(ga==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+ga}throw"getAlgByKeyAndName: not supported algorithm name: "+ga},u$2.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var ft,gt,vt,mt,yt,bt,wt,xt,Et=(ft=function(ca,ga,_s){return gt(h$2.AES,ca,ga,_s)},gt=function(ca,ga,_s,Ss){var Ms=h$2.enc.Hex.parse(ga),Cs=h$2.enc.Hex.parse(_s),Ts=h$2.enc.Hex.parse(Ss),Is={};Is.key=Cs,Is.iv=Ts,Is.ciphertext=Ms;var Bs=ca.decrypt(Is,Cs,{iv:Ts});return h$2.enc.Hex.stringify(Bs)},vt=function(ca,ga,_s){return mt(h$2.AES,ca,ga,_s)},mt=function(ca,ga,_s,Ss){var Ms=h$2.enc.Hex.parse(ga),Cs=h$2.enc.Hex.parse(_s),Ts=h$2.enc.Hex.parse(Ss),Is=ca.encrypt(Ms,Cs,{iv:Ts}),Bs=h$2.enc.Hex.parse(Is.toString());return h$2.enc.Base64.stringify(Bs)},yt={"AES-256-CBC":{proc:ft,eproc:vt,keylen:32,ivlen:16},"AES-192-CBC":{proc:ft,eproc:vt,keylen:24,ivlen:16},"AES-128-CBC":{proc:ft,eproc:vt,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(ca,ga,_s){return gt(h$2.TripleDES,ca,ga,_s)},eproc:function(ca,ga,_s){return mt(h$2.TripleDES,ca,ga,_s)},keylen:24,ivlen:8},"DES-CBC":{proc:function(ca,ga,_s){return gt(h$2.DES,ca,ga,_s)},eproc:function(ca,ga,_s){return mt(h$2.DES,ca,ga,_s)},keylen:8,ivlen:8}},bt=function(ca){var ga={},_s=ca.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));_s&&(ga.cipher=_s[1],ga.ivsalt=_s[2]);var Ss=ca.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ss&&(ga.type=Ss[1]);var Ms=-1,Cs=0;ca.indexOf(`\r
\r
`)!=-1&&(Ms=ca.indexOf(`\r
\r
`),Cs=2),ca.indexOf(`

`)!=-1&&(Ms=ca.indexOf(`

`),Cs=1);var Ts=ca.indexOf("-----END");if(Ms!=-1&&Ts!=-1){var Is=ca.substring(Ms+2*Cs,Ts-Cs);Is=Is.replace(/\s+/g,""),ga.data=Is}return ga},wt=function(ca,ga,_s){for(var Ss=_s.substring(0,16),Ms=h$2.enc.Hex.parse(Ss),Cs=h$2.enc.Utf8.parse(ga),Ts=yt[ca].keylen+yt[ca].ivlen,Is="",Bs=null;;){var Ps=h$2.algo.MD5.create();if(Bs!=null&&Ps.update(Bs),Ps.update(Cs),Ps.update(Ms),Bs=Ps.finalize(),(Is+=h$2.enc.Hex.stringify(Bs)).length>=2*Ts)break}var Ls={};return Ls.keyhex=Is.substr(0,2*yt[ca].keylen),Ls.ivhex=Is.substr(2*yt[ca].keylen,2*yt[ca].ivlen),Ls},xt=function(ca,ga,_s,Ss){var Ms=h$2.enc.Base64.parse(ca),Cs=h$2.enc.Hex.stringify(Ms);return(0,yt[ga].proc)(Cs,_s,Ss)},{version:"1.0.0",parsePKCS5PEM:function(ca){return bt(ca)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ca,ga,_s){return wt(ca,ga,_s)},decryptKeyB64:function(ca,ga,_s,Ss){return xt(ca,ga,_s,Ss)},getDecryptedKeyHex:function(ca,ga){var _s=bt(ca),Ss=_s.cipher,Ms=_s.ivsalt,Cs=_s.data,Ts=wt(Ss,ga,Ms).keyhex;return xt(Cs,Ss,Ts,Ms)},getEncryptedPKCS5PEMFromPrvKeyHex:function(ca,ga,_s,Ss,Ms){var Cs="";if(Ss!==void 0&&Ss!=null||(Ss="AES-256-CBC"),yt[Ss]===void 0)throw"KEYUTIL unsupported algorithm: "+Ss;Ms!==void 0&&Ms!=null||(Ms=function(Is){var Bs=h$2.lib.WordArray.random(Is);return h$2.enc.Hex.stringify(Bs)}(yt[Ss].ivlen).toUpperCase());var Ts=function(Is,Bs,Ps,Ls){return(0,yt[Bs].eproc)(Is,Ps,Ls)}(ga,Ss,wt(Ss,_s,Ms).keyhex,Ms);return Cs="-----BEGIN "+ca+` PRIVATE KEY-----\r
`,Cs+=`Proc-Type: 4,ENCRYPTED\r
`,Cs+="DEK-Info: "+Ss+","+Ms+`\r
`,Cs+=`\r
`,Cs+=Ts.replace(/(.{64})/g,`$1\r
`),Cs+=`\r
-----END `+ca+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={},Cs=_s(ca,0);if(Cs.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Cs.length;Ms.ciphertext=Ss(ca,Cs[1]);var Ts=_s(ca,Cs[0]);if(Ts.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Ts.length;if(Ss(ca,Ts[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Is=_s(ca,Ts[1]);if(Ts.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Is.length;var Bs=_s(ca,Is[1]);if(Bs.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Bs.length;if(Ss(ca,Bs[0])!="2a864886f70d0307")throw"this only supports TripleDES";Ms.encryptionSchemeAlg="TripleDES",Ms.encryptionSchemeIV=Ss(ca,Bs[1]);var Ps=_s(ca,Is[0]);if(Ps.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Ps.length;if(Ss(ca,Ps[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Ls=_s(ca,Ps[1]);if(Ls.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Ls.length;Ms.pbkdf2Salt=Ss(ca,Ls[0]);var Rs=Ss(ca,Ls[1]);try{Ms.pbkdf2Iter=parseInt(Rs,16)}catch{throw"malformed format pbkdf2Iter: "+Rs}return Ms},getPBKDF2KeyHexFromParam:function(ca,ga){var _s=h$2.enc.Hex.parse(ca.pbkdf2Salt),Ss=ca.pbkdf2Iter,Ms=h$2.PBKDF2(ga,_s,{keySize:6,iterations:Ss});return h$2.enc.Hex.stringify(Ms)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ca,ga){var _s=ut(ca,"ENCRYPTED PRIVATE KEY"),Ss=this.parseHexOfEncryptedPKCS8(_s),Ms=Et.getPBKDF2KeyHexFromParam(Ss,ga),Cs={};Cs.ciphertext=h$2.enc.Hex.parse(Ss.ciphertext);var Ts=h$2.enc.Hex.parse(Ms),Is=h$2.enc.Hex.parse(Ss.encryptionSchemeIV),Bs=h$2.TripleDES.decrypt(Cs,Ts,{iv:Is});return h$2.enc.Hex.stringify(Bs)},getKeyFromEncryptedPKCS8PEM:function(ca,ga){var _s=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ca,ga);return this.getKeyFromPlainPrivatePKCS8Hex(_s)},parsePlainPrivatePKCS8Hex:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={algparam:null};if(ca.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Cs=_s(ca,0);if(Cs.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(ca.substr(Cs[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ts=_s(ca,Cs[1]);if(Ts.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(ca.substr(Ts[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Ms.algoid=Ss(ca,Ts[0]),ca.substr(Ts[1],2)=="06"&&(Ms.algparam=Ss(ca,Ts[1])),ca.substr(Cs[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Ms.keyidx=ga.getVidx(ca,Cs[2]),Ms},getKeyFromPlainPrivatePKCS8PEM:function(ca){var ga=ut(ca,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(ga)},getKeyFromPlainPrivatePKCS8Hex:function(ca){var ga,_s=this.parsePlainPrivatePKCS8Hex(ca);if(_s.algoid=="2a864886f70d010101")ga=new X;else if(_s.algoid=="2a8648ce380401")ga=new u$2.crypto.DSA;else{if(_s.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";ga=new u$2.crypto.ECDSA}return ga.readPKCS8PrvKeyHex(ca),ga},_getKeyFromPublicPKCS8Hex:function(ca){var ga,_s=It.getVbyList(ca,0,[0,0],"06");if(_s==="2a864886f70d010101")ga=new X;else if(_s==="2a8648ce380401")ga=new u$2.crypto.DSA;else{if(_s!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";ga=new u$2.crypto.ECDSA}return ga.readPKCS8PubKeyHex(ca),ga},parsePublicRawRSAKeyHex:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={};if(ca.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Cs=_s(ca,0);if(Cs.length!=2)throw"malformed RSA key(code:002)";if(ca.substr(Cs[0],2)!="02")throw"malformed RSA key(code:003)";if(Ms.n=Ss(ca,Cs[0]),ca.substr(Cs[1],2)!="02")throw"malformed RSA key(code:004)";return Ms.e=Ss(ca,Cs[1]),Ms},parsePublicPKCS8Hex:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={algparam:null},Cs=_s(ca,0);if(Cs.length!=2)throw"outer DERSequence shall have 2 elements: "+Cs.length;var Ts=Cs[0];if(ca.substr(Ts,2)!="30")throw"malformed PKCS8 public key(code:001)";var Is=_s(ca,Ts);if(Is.length!=2)throw"malformed PKCS8 public key(code:002)";if(ca.substr(Is[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Ms.algoid=Ss(ca,Is[0]),ca.substr(Is[1],2)=="06"?Ms.algparam=Ss(ca,Is[1]):ca.substr(Is[1],2)=="30"&&(Ms.algparam={},Ms.algparam.p=ga.getVbyList(ca,Is[1],[0],"02"),Ms.algparam.q=ga.getVbyList(ca,Is[1],[1],"02"),Ms.algparam.g=ga.getVbyList(ca,Is[1],[2],"02")),ca.substr(Cs[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Ms.key=Ss(ca,Cs[1]).substr(2),Ms}});Et.getKey=function(ca,ga,_s){var Ss=(Ns=It).getChildIdx;Ns.getV;var Ms=Ns.getVbyList,Cs=u$2.crypto,Ts=Cs.ECDSA,Is=Cs.DSA,Bs=X,Ps=ut,Ls=Et;if(Bs!==void 0&&ca instanceof Bs||Ts!==void 0&&ca instanceof Ts||Is!==void 0&&ca instanceof Is)return ca;if(ca.curve!==void 0&&ca.xy!==void 0&&ca.d===void 0)return new Ts({pub:ca.xy,curve:ca.curve});if(ca.curve!==void 0&&ca.d!==void 0)return new Ts({prv:ca.d,curve:ca.curve});if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d===void 0)return(Xs=new Bs).setPublic(ca.n,ca.e),Xs;if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p!==void 0&&ca.q!==void 0&&ca.dp!==void 0&&ca.dq!==void 0&&ca.co!==void 0&&ca.qi===void 0)return(Xs=new Bs).setPrivateEx(ca.n,ca.e,ca.d,ca.p,ca.q,ca.dp,ca.dq,ca.co),Xs;if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p===void 0)return(Xs=new Bs).setPrivate(ca.n,ca.e,ca.d),Xs;if(ca.p!==void 0&&ca.q!==void 0&&ca.g!==void 0&&ca.y!==void 0&&ca.x===void 0)return(Xs=new Is).setPublic(ca.p,ca.q,ca.g,ca.y),Xs;if(ca.p!==void 0&&ca.q!==void 0&&ca.g!==void 0&&ca.y!==void 0&&ca.x!==void 0)return(Xs=new Is).setPrivate(ca.p,ca.q,ca.g,ca.y,ca.x),Xs;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d===void 0)return(Xs=new Bs).setPublic(et(ca.n),et(ca.e)),Xs;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p!==void 0&&ca.q!==void 0&&ca.dp!==void 0&&ca.dq!==void 0&&ca.qi!==void 0)return(Xs=new Bs).setPrivateEx(et(ca.n),et(ca.e),et(ca.d),et(ca.p),et(ca.q),et(ca.dp),et(ca.dq),et(ca.qi)),Xs;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0)return(Xs=new Bs).setPrivate(et(ca.n),et(ca.e),et(ca.d)),Xs;if(ca.kty==="EC"&&ca.crv!==void 0&&ca.x!==void 0&&ca.y!==void 0&&ca.d===void 0){var Rs=(Zs=new Ts({curve:ca.crv})).ecparams.keylen/4,Os="04"+("0000000000"+et(ca.x)).slice(-Rs)+("0000000000"+et(ca.y)).slice(-Rs);return Zs.setPublicKeyHex(Os),Zs}if(ca.kty==="EC"&&ca.crv!==void 0&&ca.x!==void 0&&ca.y!==void 0&&ca.d!==void 0){Rs=(Zs=new Ts({curve:ca.crv})).ecparams.keylen/4,Os="04"+("0000000000"+et(ca.x)).slice(-Rs)+("0000000000"+et(ca.y)).slice(-Rs);var Fs=("0000000000"+et(ca.d)).slice(-Rs);return Zs.setPublicKeyHex(Os),Zs.setPrivateKeyHex(Fs),Zs}if(_s==="pkcs5prv"){var Vs,ks=ca,Ns=It;if((Vs=Ss(ks,0)).length===9)(Xs=new Bs).readPKCS5PrvKeyHex(ks);else if(Vs.length===6)(Xs=new Is).readPKCS5PrvKeyHex(ks);else{if(!(Vs.length>2&&ks.substr(Vs[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Xs=new Ts).readPKCS5PrvKeyHex(ks)}return Xs}if(_s==="pkcs8prv")return Xs=Ls.getKeyFromPlainPrivatePKCS8Hex(ca);if(_s==="pkcs8pub")return Ls._getKeyFromPublicPKCS8Hex(ca);if(_s==="x509pub")return Mt.getPublicKeyFromCertHex(ca);if(ca.indexOf("-END CERTIFICATE-",0)!=-1||ca.indexOf("-END X509 CERTIFICATE-",0)!=-1||ca.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Mt.getPublicKeyFromCertPEM(ca);if(ca.indexOf("-END PUBLIC KEY-")!=-1){var Ds=ut(ca,"PUBLIC KEY");return Ls._getKeyFromPublicPKCS8Hex(Ds)}if(ca.indexOf("-END RSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1){var $s=Ps(ca,"RSA PRIVATE KEY");return Ls.getKey($s,null,"pkcs5prv")}if(ca.indexOf("-END DSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1){var Gs=Ms(Js=Ps(ca,"DSA PRIVATE KEY"),0,[1],"02"),Us=Ms(Js,0,[2],"02"),Hs=Ms(Js,0,[3],"02"),zs=Ms(Js,0,[4],"02"),js=Ms(Js,0,[5],"02");return(Xs=new Is).setPrivate(new c$2(Gs,16),new c$2(Us,16),new c$2(Hs,16),new c$2(zs,16),new c$2(js,16)),Xs}if(ca.indexOf("-END EC PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1)return $s=Ps(ca,"EC PRIVATE KEY"),Ls.getKey($s,null,"pkcs5prv");if(ca.indexOf("-END PRIVATE KEY-")!=-1)return Ls.getKeyFromPlainPrivatePKCS8PEM(ca);if(ca.indexOf("-END RSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var Ws=Ls.getDecryptedKeyHex(ca,ga),Qs=new X;return Qs.readPKCS5PrvKeyHex(Ws),Qs}if(ca.indexOf("-END EC PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var Zs,Xs=Ms(Js=Ls.getDecryptedKeyHex(ca,ga),0,[1],"04"),eu=Ms(Js,0,[2,0],"06"),Ys=Ms(Js,0,[3,0],"03").substr(2);if(u$2.crypto.OID.oidhex2name[eu]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+eu;return(Zs=new Ts({curve:u$2.crypto.OID.oidhex2name[eu]})).setPublicKeyHex(Ys),Zs.setPrivateKeyHex(Xs),Zs.isPublic=!1,Zs}if(ca.indexOf("-END DSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var Js;return Gs=Ms(Js=Ls.getDecryptedKeyHex(ca,ga),0,[1],"02"),Us=Ms(Js,0,[2],"02"),Hs=Ms(Js,0,[3],"02"),zs=Ms(Js,0,[4],"02"),js=Ms(Js,0,[5],"02"),(Xs=new Is).setPrivate(new c$2(Gs,16),new c$2(Us,16),new c$2(Hs,16),new c$2(zs,16),new c$2(js,16)),Xs}if(ca.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Ls.getKeyFromEncryptedPKCS8PEM(ca,ga);throw new Error("not supported argument")},Et.generateKeypair=function(ca,ga){if(ca=="RSA"){var _s=ga;(Ts=new X).generate(_s,"10001"),Ts.isPrivate=!0,Ts.isPublic=!0;var Ss=new X,Ms=Ts.n.toString(16),Cs=Ts.e.toString(16);return Ss.setPublic(Ms,Cs),Ss.isPrivate=!1,Ss.isPublic=!0,(Is={}).prvKeyObj=Ts,Is.pubKeyObj=Ss,Is}if(ca=="EC"){var Ts,Is,Bs=ga,Ps=new u$2.crypto.ECDSA({curve:Bs}).generateKeyPairHex();return(Ts=new u$2.crypto.ECDSA({curve:Bs})).setPublicKeyHex(Ps.ecpubhex),Ts.setPrivateKeyHex(Ps.ecprvhex),Ts.isPrivate=!0,Ts.isPublic=!1,(Ss=new u$2.crypto.ECDSA({curve:Bs})).setPublicKeyHex(Ps.ecpubhex),Ss.isPrivate=!1,Ss.isPublic=!0,(Is={}).prvKeyObj=Ts,Is.pubKeyObj=Ss,Is}throw"unknown algorithm: "+ca},Et.getPEM=function(ca,ga,_s,Ss,Ms,Cs){var Ts=u$2,Is=Ts.asn1,Bs=Is.DERObjectIdentifier,Ps=Is.DERInteger,Ls=Is.ASN1Util.newObject,Rs=Is.x509.SubjectPublicKeyInfo,Os=Ts.crypto,Fs=Os.DSA,Vs=Os.ECDSA,ks=X;function Ns(Zs){return Ls({seq:[{int:0},{int:{bigint:Zs.n}},{int:Zs.e},{int:{bigint:Zs.d}},{int:{bigint:Zs.p}},{int:{bigint:Zs.q}},{int:{bigint:Zs.dmp1}},{int:{bigint:Zs.dmq1}},{int:{bigint:Zs.coeff}}]})}function Ds(Zs){return Ls({seq:[{int:1},{octstr:{hex:Zs.prvKeyHex}},{tag:["a0",!0,{oid:{name:Zs.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Zs.pubKeyHex}}]}]})}function $s(Zs){return Ls({seq:[{int:0},{int:{bigint:Zs.p}},{int:{bigint:Zs.q}},{int:{bigint:Zs.g}},{int:{bigint:Zs.y}},{int:{bigint:Zs.x}}]})}if((ks!==void 0&&ca instanceof ks||Fs!==void 0&&ca instanceof Fs||Vs!==void 0&&ca instanceof Vs)&&ca.isPublic==1&&(ga===void 0||ga=="PKCS8PUB"))return at(zs=new Rs(ca).getEncodedHex(),"PUBLIC KEY");if(ga=="PKCS1PRV"&&ks!==void 0&&ca instanceof ks&&(_s===void 0||_s==null)&&ca.isPrivate==1)return at(zs=Ns(ca).getEncodedHex(),"RSA PRIVATE KEY");if(ga=="PKCS1PRV"&&Vs!==void 0&&ca instanceof Vs&&(_s===void 0||_s==null)&&ca.isPrivate==1){var Gs=new Bs({name:ca.curveName}).getEncodedHex(),Us=Ds(ca).getEncodedHex(),Hs="";return Hs+=at(Gs,"EC PARAMETERS"),Hs+=at(Us,"EC PRIVATE KEY")}if(ga=="PKCS1PRV"&&Fs!==void 0&&ca instanceof Fs&&(_s===void 0||_s==null)&&ca.isPrivate==1)return at(zs=$s(ca).getEncodedHex(),"DSA PRIVATE KEY");if(ga=="PKCS5PRV"&&ks!==void 0&&ca instanceof ks&&_s!==void 0&&_s!=null&&ca.isPrivate==1){var zs=Ns(ca).getEncodedHex();return Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",zs,_s,Ss,Cs)}if(ga=="PKCS5PRV"&&Vs!==void 0&&ca instanceof Vs&&_s!==void 0&&_s!=null&&ca.isPrivate==1)return zs=Ds(ca).getEncodedHex(),Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",zs,_s,Ss,Cs);if(ga=="PKCS5PRV"&&Fs!==void 0&&ca instanceof Fs&&_s!==void 0&&_s!=null&&ca.isPrivate==1)return zs=$s(ca).getEncodedHex(),Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",zs,_s,Ss,Cs);var js=function(Zs,Xs){var eu=Ws(Zs,Xs);return new Ls({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:eu.pbkdf2Salt}},{int:eu.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:eu.encryptionSchemeIV}}]}]}]},{octstr:{hex:eu.ciphertext}}]}).getEncodedHex()},Ws=function(Zs,Xs){var eu=h$2.lib.WordArray.random(8),Ys=h$2.lib.WordArray.random(8),Js=h$2.PBKDF2(Xs,eu,{keySize:6,iterations:100}),qs=h$2.enc.Hex.parse(Zs),ru=h$2.TripleDES.encrypt(qs,Js,{iv:Ys})+"",tu={};return tu.ciphertext=ru,tu.pbkdf2Salt=h$2.enc.Hex.stringify(eu),tu.pbkdf2Iter=100,tu.encryptionSchemeAlg="DES-EDE3-CBC",tu.encryptionSchemeIV=h$2.enc.Hex.stringify(Ys),tu};if(ga=="PKCS8PRV"&&ks!=null&&ca instanceof ks&&ca.isPrivate==1){var Qs=Ns(ca).getEncodedHex();return zs=Ls({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Qs}}]}).getEncodedHex(),_s===void 0||_s==null?at(zs,"PRIVATE KEY"):at(Us=js(zs,_s),"ENCRYPTED PRIVATE KEY")}if(ga=="PKCS8PRV"&&Vs!==void 0&&ca instanceof Vs&&ca.isPrivate==1)return Qs=new Ls({seq:[{int:1},{octstr:{hex:ca.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+ca.pubKeyHex}}]}]}).getEncodedHex(),zs=Ls({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:ca.curveName}}]},{octstr:{hex:Qs}}]}).getEncodedHex(),_s===void 0||_s==null?at(zs,"PRIVATE KEY"):at(Us=js(zs,_s),"ENCRYPTED PRIVATE KEY");if(ga=="PKCS8PRV"&&Fs!==void 0&&ca instanceof Fs&&ca.isPrivate==1)return Qs=new Ps({bigint:ca.x}).getEncodedHex(),zs=Ls({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:ca.p}},{int:{bigint:ca.q}},{int:{bigint:ca.g}}]}]},{octstr:{hex:Qs}}]}).getEncodedHex(),_s===void 0||_s==null?at(zs,"PRIVATE KEY"):at(Us=js(zs,_s),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Et.getKeyFromCSRPEM=function(ca){var ga=ut(ca,"CERTIFICATE REQUEST");return Et.getKeyFromCSRHex(ga)},Et.getKeyFromCSRHex=function(ca){var ga=Et.parseCSRHex(ca);return Et.getKey(ga.p8pubkeyhex,null,"pkcs8pub")},Et.parseCSRHex=function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getTLV,Ms={},Cs=ca;if(Cs.substr(0,2)!="30")throw"malformed CSR(code:001)";var Ts=_s(Cs,0);if(Ts.length<1)throw"malformed CSR(code:002)";if(Cs.substr(Ts[0],2)!="30")throw"malformed CSR(code:003)";var Is=_s(Cs,Ts[0]);if(Is.length<3)throw"malformed CSR(code:004)";return Ms.p8pubkeyhex=Ss(Cs,Is[2]),Ms},Et.getKeyID=function(ca){var ga=Et,_s=It;typeof ca=="string"&&ca.indexOf("BEGIN ")!=-1&&(ca=ga.getKey(ca));var Ss=ut(ga.getPEM(ca)),Ms=_s.getIdxbyList(Ss,0,[1]),Cs=_s.getV(Ss,Ms).substring(2);return u$2.crypto.Util.hashHex(Cs,"sha1")},Et.getJWKFromKey=function(ca){var ga={};if(ca instanceof X&&ca.isPrivate)return ga.kty="RSA",ga.n=tt(ca.n.toString(16)),ga.e=tt(ca.e.toString(16)),ga.d=tt(ca.d.toString(16)),ga.p=tt(ca.p.toString(16)),ga.q=tt(ca.q.toString(16)),ga.dp=tt(ca.dmp1.toString(16)),ga.dq=tt(ca.dmq1.toString(16)),ga.qi=tt(ca.coeff.toString(16)),ga;if(ca instanceof X&&ca.isPublic)return ga.kty="RSA",ga.n=tt(ca.n.toString(16)),ga.e=tt(ca.e.toString(16)),ga;if(ca instanceof u$2.crypto.ECDSA&&ca.isPrivate){if((Ss=ca.getShortNISTPCurveName())!=="P-256"&&Ss!=="P-384")throw"unsupported curve name for JWT: "+Ss;var _s=ca.getPublicKeyXYHex();return ga.kty="EC",ga.crv=Ss,ga.x=tt(_s.x),ga.y=tt(_s.y),ga.d=tt(ca.prvKeyHex),ga}if(ca instanceof u$2.crypto.ECDSA&&ca.isPublic){var Ss;if((Ss=ca.getShortNISTPCurveName())!=="P-256"&&Ss!=="P-384")throw"unsupported curve name for JWT: "+Ss;return _s=ca.getPublicKeyXYHex(),ga.kty="EC",ga.crv=Ss,ga.x=tt(_s.x),ga.y=tt(_s.y),ga}throw"not supported key object"},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.ASN1Util=new function(){this.integerToByteHex=function(ca){var ga=ca.toString(16);return ga.length%2==1&&(ga="0"+ga),ga},this.bigIntToMinTwosComplementsHex=function(ca){var ga=ca.toString(16);if(ga.substr(0,1)!="-")ga.length%2==1?ga="0"+ga:ga.match(/^[0-7]/)||(ga="00"+ga);else{var _s=ga.substr(1).length;_s%2==1?_s+=1:ga.match(/^[0-7]/)||(_s+=2);for(var Ss="",Ms=0;Ms<_s;Ms++)Ss+="f";ga=new c$2(Ss,16).xor(ca).add(c$2.ONE).toString(16).replace(/^-/,"")}return ga},this.getPEMStringFromHex=function(ca,ga){return at(ca,ga)},this.newObject=function(ca){var ga=u$2.asn1,_s=ga.ASN1Object,Ss=ga.DERBoolean,Ms=ga.DERInteger,Cs=ga.DERBitString,Ts=ga.DEROctetString,Is=ga.DERNull,Bs=ga.DERObjectIdentifier,Ps=ga.DEREnumerated,Ls=ga.DERUTF8String,Rs=ga.DERNumericString,Os=ga.DERPrintableString,Fs=ga.DERTeletexString,Vs=ga.DERIA5String,ks=ga.DERUTCTime,Ns=ga.DERGeneralizedTime,Ds=ga.DERVisibleString,$s=ga.DERBMPString,Gs=ga.DERSequence,Us=ga.DERSet,Hs=ga.DERTaggedObject,zs=ga.ASN1Util.newObject;if(ca instanceof ga.ASN1Object)return ca;var js=Object.keys(ca);if(js.length!=1)throw new Error("key of param shall be only one.");var Ws=js[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Ws+":")==-1)throw new Error("undefined key: "+Ws);if(Ws=="bool")return new Ss(ca[Ws]);if(Ws=="int")return new Ms(ca[Ws]);if(Ws=="bitstr")return new Cs(ca[Ws]);if(Ws=="octstr")return new Ts(ca[Ws]);if(Ws=="null")return new Is(ca[Ws]);if(Ws=="oid")return new Bs(ca[Ws]);if(Ws=="enum")return new Ps(ca[Ws]);if(Ws=="utf8str")return new Ls(ca[Ws]);if(Ws=="numstr")return new Rs(ca[Ws]);if(Ws=="prnstr")return new Os(ca[Ws]);if(Ws=="telstr")return new Fs(ca[Ws]);if(Ws=="ia5str")return new Vs(ca[Ws]);if(Ws=="utctime")return new ks(ca[Ws]);if(Ws=="gentime")return new Ns(ca[Ws]);if(Ws=="visstr")return new Ds(ca[Ws]);if(Ws=="bmpstr")return new $s(ca[Ws]);if(Ws=="asn1")return new _s(ca[Ws]);if(Ws=="seq"){for(var Qs=ca[Ws],Zs=[],Xs=0;Xs<Qs.length;Xs++){var eu=zs(Qs[Xs]);Zs.push(eu)}return new Gs({array:Zs})}if(Ws=="set"){for(Qs=ca[Ws],Zs=[],Xs=0;Xs<Qs.length;Xs++)eu=zs(Qs[Xs]),Zs.push(eu);return new Us({array:Zs})}if(Ws=="tag"){var Ys=ca[Ws];if(Object.prototype.toString.call(Ys)==="[object Array]"&&Ys.length==3){var Js=zs(Ys[2]);return new Hs({tag:Ys[0],explicit:Ys[1],obj:Js})}return new Hs(Ys)}},this.jsonToASN1HEX=function(ca){return this.newObject(ca).getEncodedHex()}},u$2.asn1.ASN1Util.oidHexToInt=function(ca){for(var ga="",_s=parseInt(ca.substr(0,2),16),Ss=(ga=Math.floor(_s/40)+"."+_s%40,""),Ms=2;Ms<ca.length;Ms+=2){var Cs=("00000000"+parseInt(ca.substr(Ms,2),16).toString(2)).slice(-8);Ss+=Cs.substr(1,7),Cs.substr(0,1)=="0"&&(ga=ga+"."+new c$2(Ss,2).toString(10),Ss="")}return ga},u$2.asn1.ASN1Util.oidIntToHex=function(ca){var ga=function(Is){var Bs=Is.toString(16);return Bs.length==1&&(Bs="0"+Bs),Bs},_s=function(Is){var Bs="",Ps=new c$2(Is,10).toString(2),Ls=7-Ps.length%7;Ls==7&&(Ls=0);for(var Rs="",Os=0;Os<Ls;Os++)Rs+="0";for(Ps=Rs+Ps,Os=0;Os<Ps.length-1;Os+=7){var Fs=Ps.substr(Os,7);Os!=Ps.length-7&&(Fs="1"+Fs),Bs+=ga(parseInt(Fs,2))}return Bs};if(!ca.match(/^[0-9.]+$/))throw"malformed oid string: "+ca;var Ss="",Ms=ca.split("."),Cs=40*parseInt(Ms[0])+parseInt(Ms[1]);Ss+=ga(Cs),Ms.splice(0,2);for(var Ts=0;Ts<Ms.length;Ts++)Ss+=_s(Ms[Ts]);return Ss},u$2.asn1.ASN1Object=function(ca){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var ga=this.hV.length/2,_s=ga.toString(16);if(_s.length%2==1&&(_s="0"+_s),ga<128)return _s;var Ss=_s.length/2;if(Ss>15)throw"ASN.1 length too long to represent by 8x: n = "+ga.toString(16);return(128+Ss).toString(16)+_s},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(ga){this.params=ga},ca!=null&&ca.tlv!=null&&(this.hTLV=ca.tlv,this.isModified=!1)},u$2.asn1.DERAbstractString=function(ca){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(ga){this.hTLV=null,this.isModified=!0,this.s=ga,this.hV=it(this.s).toLowerCase()},this.setStringHex=function(ga){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(typeof ca=="string"?this.setString(ca):ca.str!==void 0?this.setString(ca.str):ca.hex!==void 0&&this.setStringHex(ca.hex))},l$2.lang.extend(u$2.asn1.DERAbstractString,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractTime=function(ca){u$2.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(ga){var _s=ga.getTime()+6e4*ga.getTimezoneOffset();return new Date(_s)},this.formatDate=function(ga,_s,Ss){var Ms=this.zeroPadding,Cs=this.localDateToUTC(ga),Ts=String(Cs.getFullYear());_s=="utc"&&(Ts=Ts.substr(2,2));var Is=Ts+Ms(String(Cs.getMonth()+1),2)+Ms(String(Cs.getDate()),2)+Ms(String(Cs.getHours()),2)+Ms(String(Cs.getMinutes()),2)+Ms(String(Cs.getSeconds()),2);if(Ss===!0){var Bs=Cs.getMilliseconds();if(Bs!=0){var Ps=Ms(String(Bs),3);Is=Is+"."+(Ps=Ps.replace(/[0]+$/,""))}}return Is+"Z"},this.zeroPadding=function(ga,_s){return ga.length>=_s?ga:new Array(_s-ga.length+1).join("0")+ga},this.getString=function(){return this.s},this.setString=function(ga){this.hTLV=null,this.isModified=!0,this.s=ga,this.hV=J(ga)},this.setByDateValue=function(ga,_s,Ss,Ms,Cs,Ts){var Is=new Date(Date.UTC(ga,_s-1,Ss,Ms,Cs,Ts,0));this.setByDate(Is)},this.getFreshValueHex=function(){return this.hV}},l$2.lang.extend(u$2.asn1.DERAbstractTime,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractStructured=function(ca){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(ga){this.hTLV=null,this.isModified=!0,this.asn1Array=ga},this.appendASN1Object=function(ga){this.hTLV=null,this.isModified=!0,this.asn1Array.push(ga)},this.asn1Array=new Array,ca!==void 0&&ca.array!==void 0&&(this.asn1Array=ca.array)},l$2.lang.extend(u$2.asn1.DERAbstractStructured,u$2.asn1.ASN1Object),u$2.asn1.DERBoolean=function(ca){u$2.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=ca==0?"010100":"0101ff"},l$2.lang.extend(u$2.asn1.DERBoolean,u$2.asn1.ASN1Object),u$2.asn1.DERInteger=function(ca){u$2.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(ga){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(ga)},this.setByInteger=function(ga){var _s=new c$2(String(ga),10);this.setByBigInteger(_s)},this.setValueHex=function(ga){this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(ca.bigint!==void 0?this.setByBigInteger(ca.bigint):ca.int!==void 0?this.setByInteger(ca.int):typeof ca=="number"?this.setByInteger(ca):ca.hex!==void 0&&this.setValueHex(ca.hex))},l$2.lang.extend(u$2.asn1.DERInteger,u$2.asn1.ASN1Object),u$2.asn1.DERBitString=function(ca){if(ca!==void 0&&ca.obj!==void 0){var ga=u$2.asn1.ASN1Util.newObject(ca.obj);ca.hex="00"+ga.getEncodedHex()}u$2.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(_s){this.hTLV=null,this.isModified=!0,this.hV=_s},this.setUnusedBitsAndHexValue=function(_s,Ss){if(_s<0||7<_s)throw"unused bits shall be from 0 to 7: u = "+_s;var Ms="0"+_s;this.hTLV=null,this.isModified=!0,this.hV=Ms+Ss},this.setByBinaryString=function(_s){var Ss=8-(_s=_s.replace(/0+$/,"")).length%8;Ss==8&&(Ss=0);for(var Ms=0;Ms<=Ss;Ms++)_s+="0";var Cs="";for(Ms=0;Ms<_s.length-1;Ms+=8){var Ts=_s.substr(Ms,8),Is=parseInt(Ts,2).toString(16);Is.length==1&&(Is="0"+Is),Cs+=Is}this.hTLV=null,this.isModified=!0,this.hV="0"+Ss+Cs},this.setByBooleanArray=function(_s){for(var Ss="",Ms=0;Ms<_s.length;Ms++)_s[Ms]==1?Ss+="1":Ss+="0";this.setByBinaryString(Ss)},this.newFalseArray=function(_s){for(var Ss=new Array(_s),Ms=0;Ms<_s;Ms++)Ss[Ms]=!1;return Ss},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(typeof ca=="string"&&ca.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(ca):ca.hex!==void 0?this.setHexValueIncludingUnusedBits(ca.hex):ca.bin!==void 0?this.setByBinaryString(ca.bin):ca.array!==void 0&&this.setByBooleanArray(ca.array))},l$2.lang.extend(u$2.asn1.DERBitString,u$2.asn1.ASN1Object),u$2.asn1.DEROctetString=function(ca){if(ca!==void 0&&ca.obj!==void 0){var ga=u$2.asn1.ASN1Util.newObject(ca.obj);ca.hex=ga.getEncodedHex()}u$2.asn1.DEROctetString.superclass.constructor.call(this,ca),this.hT="04"},l$2.lang.extend(u$2.asn1.DEROctetString,u$2.asn1.DERAbstractString),u$2.asn1.DERNull=function(){u$2.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},l$2.lang.extend(u$2.asn1.DERNull,u$2.asn1.ASN1Object),u$2.asn1.DERObjectIdentifier=function(ca){u$2.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(ga){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ga},this.setValueOidString=function(ga){var _s=function(Ss){var Ms=function(Ls){var Rs=Ls.toString(16);return Rs.length==1&&(Rs="0"+Rs),Rs},Cs=function(Ls){var Rs="",Os=parseInt(Ls,10).toString(2),Fs=7-Os.length%7;Fs==7&&(Fs=0);for(var Vs="",ks=0;ks<Fs;ks++)Vs+="0";for(Os=Vs+Os,ks=0;ks<Os.length-1;ks+=7){var Ns=Os.substr(ks,7);ks!=Os.length-7&&(Ns="1"+Ns),Rs+=Ms(parseInt(Ns,2))}return Rs};try{if(!Ss.match(/^[0-9.]+$/))return null;var Ts="",Is=Ss.split("."),Bs=40*parseInt(Is[0],10)+parseInt(Is[1],10);Ts+=Ms(Bs),Is.splice(0,2);for(var Ps=0;Ps<Is.length;Ps++)Ts+=Cs(Is[Ps]);return Ts}catch{return null}}(ga);if(_s==null)throw new Error("malformed oid string: "+ga);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_s},this.setValueName=function(ga){var _s=u$2.asn1.x509.OID.name2oid(ga);if(_s==="")throw new Error("DERObjectIdentifier oidName undefined: "+ga);this.setValueOidString(_s)},this.setValueNameOrOid=function(ga){ga.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(ga):this.setValueName(ga)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(ga){typeof ga=="string"?this.setValueNameOrOid(ga):ga.oid!==void 0?this.setValueNameOrOid(ga.oid):ga.name!==void 0?this.setValueNameOrOid(ga.name):ga.hex!==void 0&&this.setValueHex(ga.hex)},ca!==void 0&&this.setByParam(ca)},l$2.lang.extend(u$2.asn1.DERObjectIdentifier,u$2.asn1.ASN1Object),u$2.asn1.DEREnumerated=function(ca){u$2.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(ga){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(ga)},this.setByInteger=function(ga){var _s=new c$2(String(ga),10);this.setByBigInteger(_s)},this.setValueHex=function(ga){this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(ca.int!==void 0?this.setByInteger(ca.int):typeof ca=="number"?this.setByInteger(ca):ca.hex!==void 0&&this.setValueHex(ca.hex))},l$2.lang.extend(u$2.asn1.DEREnumerated,u$2.asn1.ASN1Object),u$2.asn1.DERUTF8String=function(ca){u$2.asn1.DERUTF8String.superclass.constructor.call(this,ca),this.hT="0c"},l$2.lang.extend(u$2.asn1.DERUTF8String,u$2.asn1.DERAbstractString),u$2.asn1.DERNumericString=function(ca){u$2.asn1.DERNumericString.superclass.constructor.call(this,ca),this.hT="12"},l$2.lang.extend(u$2.asn1.DERNumericString,u$2.asn1.DERAbstractString),u$2.asn1.DERPrintableString=function(ca){u$2.asn1.DERPrintableString.superclass.constructor.call(this,ca),this.hT="13"},l$2.lang.extend(u$2.asn1.DERPrintableString,u$2.asn1.DERAbstractString),u$2.asn1.DERTeletexString=function(ca){u$2.asn1.DERTeletexString.superclass.constructor.call(this,ca),this.hT="14"},l$2.lang.extend(u$2.asn1.DERTeletexString,u$2.asn1.DERAbstractString),u$2.asn1.DERIA5String=function(ca){u$2.asn1.DERIA5String.superclass.constructor.call(this,ca),this.hT="16"},l$2.lang.extend(u$2.asn1.DERIA5String,u$2.asn1.DERAbstractString),u$2.asn1.DERVisibleString=function(ca){u$2.asn1.DERIA5String.superclass.constructor.call(this,ca),this.hT="1a"},l$2.lang.extend(u$2.asn1.DERVisibleString,u$2.asn1.DERAbstractString),u$2.asn1.DERBMPString=function(ca){u$2.asn1.DERBMPString.superclass.constructor.call(this,ca),this.hT="1e"},l$2.lang.extend(u$2.asn1.DERBMPString,u$2.asn1.DERAbstractString),u$2.asn1.DERUTCTime=function(ca){u$2.asn1.DERUTCTime.superclass.constructor.call(this,ca),this.hT="17",this.setByDate=function(ga){this.hTLV=null,this.isModified=!0,this.date=ga,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)),this.hV},ca!==void 0&&(ca.str!==void 0?this.setString(ca.str):typeof ca=="string"&&ca.match(/^[0-9]{12}Z$/)?this.setString(ca):ca.hex!==void 0?this.setStringHex(ca.hex):ca.date!==void 0&&this.setByDate(ca.date))},l$2.lang.extend(u$2.asn1.DERUTCTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERGeneralizedTime=function(ca){u$2.asn1.DERGeneralizedTime.superclass.constructor.call(this,ca),this.hT="18",this.withMillis=!1,this.setByDate=function(ga){this.hTLV=null,this.isModified=!0,this.date=ga,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)),this.hV},ca!==void 0&&(ca.str!==void 0?this.setString(ca.str):typeof ca=="string"&&ca.match(/^[0-9]{14}Z$/)?this.setString(ca):ca.hex!==void 0?this.setStringHex(ca.hex):ca.date!==void 0&&this.setByDate(ca.date),ca.millis===!0&&(this.withMillis=!0))},l$2.lang.extend(u$2.asn1.DERGeneralizedTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERSequence=function(ca){u$2.asn1.DERSequence.superclass.constructor.call(this,ca),this.hT="30",this.getFreshValueHex=function(){for(var ga="",_s=0;_s<this.asn1Array.length;_s++)ga+=this.asn1Array[_s].getEncodedHex();return this.hV=ga,this.hV}},l$2.lang.extend(u$2.asn1.DERSequence,u$2.asn1.DERAbstractStructured),u$2.asn1.DERSet=function(ca){u$2.asn1.DERSet.superclass.constructor.call(this,ca),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var ga=new Array,_s=0;_s<this.asn1Array.length;_s++){var Ss=this.asn1Array[_s];ga.push(Ss.getEncodedHex())}return this.sortFlag==1&&ga.sort(),this.hV=ga.join(""),this.hV},ca!==void 0&&ca.sortflag!==void 0&&ca.sortflag==0&&(this.sortFlag=!1)},l$2.lang.extend(u$2.asn1.DERSet,u$2.asn1.DERAbstractStructured),u$2.asn1.DERTaggedObject=function(ca){u$2.asn1.DERTaggedObject.superclass.constructor.call(this);var ga=u$2.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(_s,Ss,Ms){this.hT=Ss,this.isExplicit=_s,this.asn1Object=Ms,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Ms.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Ss),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(_s){_s.tag!=null&&(this.hT=_s.tag),_s.explicit!=null&&(this.isExplicit=_s.explicit),_s.tage!=null&&(this.hT=_s.tage,this.isExplicit=!0),_s.tagi!=null&&(this.hT=_s.tagi,this.isExplicit=!1),_s.obj!=null&&(_s.obj instanceof ga.ASN1Object?(this.asn1Object=_s.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof _s.obj=="object"&&(this.asn1Object=ga.ASN1Util.newObject(_s.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},ca!=null&&this.setByParam(ca)},l$2.lang.extend(u$2.asn1.DERTaggedObject,u$2.asn1.ASN1Object);var It=new function(){};function Ct(ca,ga){for(var _s="",Ss=ga/4-ca.length,Ms=0;Ms<Ss;Ms++)_s+="0";return _s+ca}function St(ca,ga,_s){for(var Ss="",Ms=0;Ss.length<ga;)Ss+=rt(_s(ot(ca+String.fromCharCode.apply(String,[(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms])))),Ms+=1;return Ss}function Bt(ca){for(var ga in u$2.crypto.Util.DIGESTINFOHEAD){var _s=u$2.crypto.Util.DIGESTINFOHEAD[ga],Ss=_s.length;if(ca.substring(0,Ss)==_s)return[ga,ca.substring(Ss)]}return[]}function Mt(ca){var ga,_s=It,Ss=_s.getChildIdx,Ms=_s.getV,Cs=_s.getTLV,Ts=_s.getVbyList,Is=_s.getVbyListEx,Bs=_s.getTLVbyList,Ps=_s.getTLVbyListEx,Ls=_s.getIdxbyList,Rs=_s.getIdxbyListEx,Os=_s.getVidx,Fs=_s.getInt,Vs=_s.oidname,ks=_s.hextooidstr,Ns=ut;try{ga=u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Ds=Bs(this.hex,0,[0,0]);if(Ds.substr(0,2)=="a0"){var $s=Bs(Ds,0,[0]),Gs=Fs($s,0);if(Gs<0||2<Gs)throw new Error("malformed version field");return this.version=Gs+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Is(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Ds=Ps(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Ds)},this.getAlgorithmIdentifierName=function(Ds){for(var $s in ga)if(Ds===ga[$s])return $s;return Vs(Is(Ds,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Bs(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Bs(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Ds=Ts(this.hex,0,[0,4+this.foffset,0]);return Ds=Ds.replace(/(..)/g,"%$1"),Ds=decodeURIComponent(Ds)},this.getNotAfter=function(){var Ds=Ts(this.hex,0,[0,4+this.foffset,1]);return Ds=Ds.replace(/(..)/g,"%$1"),Ds=decodeURIComponent(Ds)},this.getPublicKeyHex=function(){return _s.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Ls(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Ds=this.getPublicKeyIdx();return Ls(this.hex,Ds,[1,0],"30")},this.getPublicKey=function(){return Et.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Ds=Bs(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Ds)},this.getSignatureValueHex=function(){return Ts(this.hex,0,[2],"03",!0)},this.verifySignature=function(Ds){var $s=this.getSignatureAlgorithmField(),Gs=this.getSignatureValueHex(),Us=Bs(this.hex,0,[0],"30"),Hs=new u$2.crypto.Signature({alg:$s});return Hs.init(Ds),Hs.updateHex(Us),Hs.verify(Gs)},this.parseExt=function(Ds){var $s,Gs,Us;if(Ds===void 0){if(Us=this.hex,this.version!==3)return-1;$s=Ls(Us,0,[0,7,0],"30"),Gs=Ss(Us,$s)}else{Us=ut(Ds);var Hs=Ls(Us,0,[0,3,0,0],"06");if(Ms(Us,Hs)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);$s=Ls(Us,0,[0,3,0,1,0],"30"),Gs=Ss(Us,$s),this.hex=Us}this.aExtInfo=new Array;for(var zs=0;zs<Gs.length;zs++){var js={critical:!1},Ws=0;Ss(Us,Gs[zs]).length===3&&(js.critical=!0,Ws=1),js.oid=_s.hextooidstr(Ts(Us,Gs[zs],[0],"06"));var Qs=Ls(Us,Gs[zs],[1+Ws]);js.vidx=Os(Us,Qs),this.aExtInfo.push(js)}},this.getExtInfo=function(Ds){var $s=this.aExtInfo,Gs=Ds;if(Ds.match(/^[0-9.]+$/)||(Gs=u$2.asn1.x509.OID.name2oid(Ds)),Gs!==""){for(var Us=0;Us<$s.length;Us++)if($s[Us].oid===Gs)return $s[Us]}},this.getExtBasicConstraints=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("basicConstraints");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"basicConstraints"};if($s&&(Us.critical=!0),Ds==="3000")return Us;if(Ds==="30030101ff")return Us.cA=!0,Us;if(Ds.substr(0,12)==="30060101ff02"){var Hs=Ms(Ds,10),zs=parseInt(Hs,16);return Us.cA=!0,Us.pathLen=zs,Us}throw new Error("hExtV parse error: "+Ds)},this.getExtKeyUsage=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("keyUsage");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"keyUsage"};return $s&&(Us.critical=!0),Us.names=this.getExtKeyUsageString(Ds).split(","),Us},this.getExtKeyUsageBin=function(Ds){if(Ds===void 0){var $s=this.getExtInfo("keyUsage");if($s===void 0)return"";Ds=Cs(this.hex,$s.vidx)}if(Ds.length!=8&&Ds.length!=10)throw new Error("malformed key usage value: "+Ds);var Gs="000000000000000"+parseInt(Ds.substr(6),16).toString(2);return Ds.length==8&&(Gs=Gs.slice(-8)),Ds.length==10&&(Gs=Gs.slice(-16)),(Gs=Gs.replace(/0+$/,""))==""&&(Gs="0"),Gs},this.getExtKeyUsageString=function(Ds){for(var $s=this.getExtKeyUsageBin(Ds),Gs=new Array,Us=0;Us<$s.length;Us++)$s.substr(Us,1)=="1"&&Gs.push(Mt.KEYUSAGE_NAME[Us]);return Gs.join(",")},this.getExtSubjectKeyIdentifier=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("subjectKeyIdentifier");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"subjectKeyIdentifier"};$s&&(Us.critical=!0);var Hs=Ms(Ds,0);return Us.kid={hex:Hs},Us},this.getExtAuthorityKeyIdentifier=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("authorityKeyIdentifier");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"authorityKeyIdentifier"};$s&&(Us.critical=!0);for(var Hs=Ss(Ds,0),zs=0;zs<Hs.length;zs++){var js=Ds.substr(Hs[zs],2);if(js==="80"&&(Us.kid={hex:Ms(Ds,Hs[zs])}),js==="a1"){var Ws=Cs(Ds,Hs[zs]),Qs=this.getGeneralNames(Ws);Us.issuer=Qs[0].dn}js==="82"&&(Us.sn={hex:Ms(Ds,Hs[zs])})}return Us},this.getExtExtKeyUsage=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("extKeyUsage");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"extKeyUsage",array:[]};$s&&(Us.critical=!0);for(var Hs=Ss(Ds,0),zs=0;zs<Hs.length;zs++)Us.array.push(Vs(Ms(Ds,Hs[zs])));return Us},this.getExtExtKeyUsageName=function(){var Ds=this.getExtInfo("extKeyUsage");if(Ds===void 0)return Ds;var $s=new Array,Gs=Cs(this.hex,Ds.vidx);if(Gs==="")return $s;for(var Us=Ss(Gs,0),Hs=0;Hs<Us.length;Hs++)$s.push(Vs(Ms(Gs,Us[Hs])));return $s},this.getExtSubjectAltName=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("subjectAltName");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"subjectAltName",array:[]};return $s&&(Us.critical=!0),Us.array=this.getGeneralNames(Ds),Us},this.getExtIssuerAltName=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("issuerAltName");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"issuerAltName",array:[]};return $s&&(Us.critical=!0),Us.array=this.getGeneralNames(Ds),Us},this.getGeneralNames=function(Ds){for(var $s=Ss(Ds,0),Gs=[],Us=0;Us<$s.length;Us++){var Hs=this.getGeneralName(Cs(Ds,$s[Us]));Hs!==void 0&&Gs.push(Hs)}return Gs},this.getGeneralName=function(Ds){var $s=Ds.substr(0,2),Gs=Ms(Ds,0),Us=rt(Gs);return $s=="81"?{rfc822:Us}:$s=="82"?{dns:Us}:$s=="86"?{uri:Us}:$s=="87"?{ip:lt(Gs)}:$s=="a4"?{dn:this.getX500Name(Gs)}:void 0},this.getExtSubjectAltName2=function(){var Ds,$s,Gs,Us=this.getExtInfo("subjectAltName");if(Us===void 0)return Us;for(var Hs=new Array,zs=Cs(this.hex,Us.vidx),js=Ss(zs,0),Ws=0;Ws<js.length;Ws++)Gs=zs.substr(js[Ws],2),Ds=Ms(zs,js[Ws]),Gs==="81"&&($s=nt(Ds),Hs.push(["MAIL",$s])),Gs==="82"&&($s=nt(Ds),Hs.push(["DNS",$s])),Gs==="84"&&($s=Mt.hex2dn(Ds,0),Hs.push(["DN",$s])),Gs==="86"&&($s=nt(Ds),Hs.push(["URI",$s])),Gs==="87"&&($s=lt(Ds),Hs.push(["IP",$s]));return Hs},this.getExtCRLDistributionPoints=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("cRLDistributionPoints");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"cRLDistributionPoints",array:[]};$s&&(Us.critical=!0);for(var Hs=Ss(Ds,0),zs=0;zs<Hs.length;zs++){var js=Cs(Ds,Hs[zs]);Us.array.push(this.getDistributionPoint(js))}return Us},this.getDistributionPoint=function(Ds){for(var $s={},Gs=Ss(Ds,0),Us=0;Us<Gs.length;Us++){var Hs=Ds.substr(Gs[Us],2),zs=Cs(Ds,Gs[Us]);Hs=="a0"&&($s.dpname=this.getDistributionPointName(zs))}return $s},this.getDistributionPointName=function(Ds){for(var $s={},Gs=Ss(Ds,0),Us=0;Us<Gs.length;Us++){var Hs=Ds.substr(Gs[Us],2),zs=Cs(Ds,Gs[Us]);Hs=="a0"&&($s.full=this.getGeneralNames(zs))}return $s},this.getExtCRLDistributionPointsURI=function(){var Ds=this.getExtInfo("cRLDistributionPoints");if(Ds===void 0)return Ds;for(var $s=new Array,Gs=Ss(this.hex,Ds.vidx),Us=0;Us<Gs.length;Us++)try{var Hs=nt(Ts(this.hex,Gs[Us],[0,0,0],"86"));$s.push(Hs)}catch{}return $s},this.getExtAIAInfo=function(){var Ds=this.getExtInfo("authorityInfoAccess");if(Ds===void 0)return Ds;for(var $s={ocsp:[],caissuer:[]},Gs=Ss(this.hex,Ds.vidx),Us=0;Us<Gs.length;Us++){var Hs=Ts(this.hex,Gs[Us],[0],"06"),zs=Ts(this.hex,Gs[Us],[1],"86");Hs==="2b06010505073001"&&$s.ocsp.push(nt(zs)),Hs==="2b06010505073002"&&$s.caissuer.push(nt(zs))}return $s},this.getExtAuthorityInfoAccess=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("authorityInfoAccess");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"authorityInfoAccess",array:[]};$s&&(Us.critical=!0);for(var Hs=Ss(Ds,0),zs=0;zs<Hs.length;zs++){var js=Is(Ds,Hs[zs],[0],"06"),Ws=nt(Ts(Ds,Hs[zs],[1],"86"));if(js=="2b06010505073001")Us.array.push({ocsp:Ws});else{if(js!="2b06010505073002")throw new Error("unknown method: "+js);Us.array.push({caissuer:Ws})}}return Us},this.getExtCertificatePolicies=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("certificatePolicies");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"certificatePolicies",array:[]};$s&&(Us.critical=!0);for(var Hs=Ss(Ds,0),zs=0;zs<Hs.length;zs++){var js=Cs(Ds,Hs[zs]),Ws=this.getPolicyInformation(js);Us.array.push(Ws)}return Us},this.getPolicyInformation=function(Ds){var $s={},Gs=Ts(Ds,0,[0],"06");$s.policyoid=Vs(Gs);var Us=Rs(Ds,0,[1],"30");if(Us!=-1){$s.array=[];for(var Hs=Ss(Ds,Us),zs=0;zs<Hs.length;zs++){var js=Cs(Ds,Hs[zs]),Ws=this.getPolicyQualifierInfo(js);$s.array.push(Ws)}}return $s},this.getPolicyQualifierInfo=function(Ds){var $s={},Gs=Ts(Ds,0,[0],"06");if(Gs==="2b06010505070201"){var Us=Is(Ds,0,[1],"16");$s.cps=rt(Us)}else if(Gs==="2b06010505070202"){var Hs=Bs(Ds,0,[1],"30");$s.unotice=this.getUserNotice(Hs)}return $s},this.getUserNotice=function(Ds){for(var $s={},Gs=Ss(Ds,0),Us=0;Us<Gs.length;Us++){var Hs=Cs(Ds,Gs[Us]);Hs.substr(0,2)!="30"&&($s.exptext=this.getDisplayText(Hs))}return $s},this.getDisplayText=function(Ds){var $s={};return $s.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Ds.substr(0,2)],$s.str=rt(Ms(Ds,0)),$s},this.getExtCRLNumber=function(Ds,$s){var Gs={extname:"cRLNumber"};if($s&&(Gs.critical=!0),Ds.substr(0,2)=="02")return Gs.num={hex:Ms(Ds,0)},Gs;throw new Error("hExtV parse error: "+Ds)},this.getExtCRLReason=function(Ds,$s){var Gs={extname:"cRLReason"};if($s&&(Gs.critical=!0),Ds.substr(0,2)=="0a")return Gs.code=parseInt(Ms(Ds,0),16),Gs;throw new Error("hExtV parse error: "+Ds)},this.getExtOcspNonce=function(Ds,$s){var Gs={extname:"ocspNonce"};$s&&(Gs.critical=!0);var Us=Ms(Ds,0);return Gs.hex=Us,Gs},this.getExtOcspNoCheck=function(Ds,$s){var Gs={extname:"ocspNoCheck"};return $s&&(Gs.critical=!0),Gs},this.getExtAdobeTimeStamp=function(Ds,$s){if(Ds===void 0&&$s===void 0){var Gs=this.getExtInfo("adobeTimeStamp");if(Gs===void 0)return;Ds=Cs(this.hex,Gs.vidx),$s=Gs.critical}var Us={extname:"adobeTimeStamp"};$s&&(Us.critical=!0);var Hs=Ss(Ds,0);if(Hs.length>1){var zs=Cs(Ds,Hs[1]),js=this.getGeneralName(zs);js.uri!=null&&(Us.uri=js.uri)}if(Hs.length>2){var Ws=Cs(Ds,Hs[2]);Ws=="0101ff"&&(Us.reqauth=!0),Ws=="010100"&&(Us.reqauth=!1)}return Us},this.getX500NameRule=function(Ds){for(var $s=null,Gs=[],Us=0;Us<Ds.length;Us++)for(var Hs=Ds[Us],zs=0;zs<Hs.length;zs++)Gs.push(Hs[zs]);for(Us=0;Us<Gs.length;Us++){var js=Gs[Us],Ws=js.ds,Qs=js.value,Zs=js.type;if(Ws!="prn"&&Ws!="utf8"&&Ws!="ia5")return"mixed";if(Ws=="ia5"){if(Zs!="CN")return"mixed";if(u$2.lang.String.isMail(Qs))continue;return"mixed"}if(Zs=="C"){if(Ws=="prn")continue;return"mixed"}if($s==null)$s=Ws;else if($s!==Ws)return"mixed"}return $s==null?"prn":$s},this.getX500Name=function(Ds){var $s=this.getX500NameArray(Ds);return{array:$s,str:this.dnarraytostr($s)}},this.getX500NameArray=function(Ds){for(var $s=[],Gs=Ss(Ds,0),Us=0;Us<Gs.length;Us++)$s.push(this.getRDN(Cs(Ds,Gs[Us])));return $s},this.getRDN=function(Ds){for(var $s=[],Gs=Ss(Ds,0),Us=0;Us<Gs.length;Us++)$s.push(this.getAttrTypeAndValue(Cs(Ds,Gs[Us])));return $s},this.getAttrTypeAndValue=function(Ds){var $s={type:null,value:null,ds:null},Gs=Ss(Ds,0),Us=Ts(Ds,Gs[0],[],"06"),Hs=Ts(Ds,Gs[1],[]),zs=u$2.asn1.ASN1Util.oidHexToInt(Us);return $s.type=u$2.asn1.x509.OID.oid2atype(zs),$s.ds=this.HEX2STAG[Ds.substr(Gs[1],2)],$s.ds!="bmp"?$s.value=nt(Hs):$s.value=ht(Hs),$s},this.readCertPEM=function(Ds){this.readCertHex(Ns(Ds))},this.readCertHex=function(Ds){this.hex=Ds,this.getVersion();try{Ls(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Ds={};return Ds.version=this.getVersion(),Ds.serial={hex:this.getSerialNumberHex()},Ds.sigalg=this.getSignatureAlgorithmField(),Ds.issuer=this.getIssuer(),Ds.notbefore=this.getNotBefore(),Ds.notafter=this.getNotAfter(),Ds.subject=this.getSubject(),Ds.sbjpubkey=at(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Ds.ext=this.getExtParamArray()),Ds.sighex=this.getSignatureValueHex(),Ds},this.getExtParamArray=function(Ds){Ds==null&&Rs(this.hex,0,[0,"[3]"])!=-1&&(Ds=Ps(this.hex,0,[0,"[3]",0],"30"));for(var $s=[],Gs=Ss(Ds,0),Us=0;Us<Gs.length;Us++){var Hs=Cs(Ds,Gs[Us]),zs=this.getExtParam(Hs);zs!=null&&$s.push(zs)}return $s},this.getExtParam=function(Ds){var $s=Ss(Ds,0).length;if($s!=2&&$s!=3)throw new Error("wrong number elements in Extension: "+$s+" "+Ds);var Gs=ks(Ts(Ds,0,[0],"06")),Us=!1;$s==3&&Bs(Ds,0,[1])=="0101ff"&&(Us=!0);var Hs=Bs(Ds,0,[$s-1,0]),zs=void 0;if(Gs=="2.5.29.14"?zs=this.getExtSubjectKeyIdentifier(Hs,Us):Gs=="2.5.29.15"?zs=this.getExtKeyUsage(Hs,Us):Gs=="2.5.29.17"?zs=this.getExtSubjectAltName(Hs,Us):Gs=="2.5.29.18"?zs=this.getExtIssuerAltName(Hs,Us):Gs=="2.5.29.19"?zs=this.getExtBasicConstraints(Hs,Us):Gs=="2.5.29.31"?zs=this.getExtCRLDistributionPoints(Hs,Us):Gs=="2.5.29.32"?zs=this.getExtCertificatePolicies(Hs,Us):Gs=="2.5.29.35"?zs=this.getExtAuthorityKeyIdentifier(Hs,Us):Gs=="2.5.29.37"?zs=this.getExtExtKeyUsage(Hs,Us):Gs=="1.3.6.1.5.5.7.1.1"?zs=this.getExtAuthorityInfoAccess(Hs,Us):Gs=="2.5.29.20"?zs=this.getExtCRLNumber(Hs,Us):Gs=="2.5.29.21"?zs=this.getExtCRLReason(Hs,Us):Gs=="1.3.6.1.5.5.7.48.1.2"?zs=this.getExtOcspNonce(Hs,Us):Gs=="1.3.6.1.5.5.7.48.1.5"?zs=this.getExtOcspNoCheck(Hs,Us):Gs=="1.2.840.113583.1.1.9.1"&&(zs=this.getExtAdobeTimeStamp(Hs,Us)),zs!=null)return zs;var js={extname:Gs,extn:Hs};return Us&&(js.critical=!0),js},this.findExt=function(Ds,$s){for(var Gs=0;Gs<Ds.length;Gs++)if(Ds[Gs].extname==$s)return Ds[Gs];return null},this.updateExtCDPFullURI=function(Ds,$s){var Gs=this.findExt(Ds,"cRLDistributionPoints");if(Gs!=null&&Gs.array!=null){for(var Us=Gs.array,Hs=0;Hs<Us.length;Hs++)if(Us[Hs].dpname!=null&&Us[Hs].dpname.full!=null)for(var zs=Us[Hs].dpname.full,js=0;js<zs.length;js++){var Ws=zs[Hs];Ws.uri!=null&&(Ws.uri=$s)}}},this.updateExtAIAOCSP=function(Ds,$s){var Gs=this.findExt(Ds,"authorityInfoAccess");if(Gs!=null&&Gs.array!=null)for(var Us=Gs.array,Hs=0;Hs<Us.length;Hs++)Us[Hs].ocsp!=null&&(Us[Hs].ocsp=$s)},this.updateExtAIACAIssuer=function(Ds,$s){var Gs=this.findExt(Ds,"authorityInfoAccess");if(Gs!=null&&Gs.array!=null)for(var Us=Gs.array,Hs=0;Hs<Us.length;Hs++)Us[Hs].caissuer!=null&&(Us[Hs].caissuer=$s)},this.dnarraytostr=function(Ds){return"/"+Ds.map(function($s){return function(Gs){return Gs.map(function(Us){return function(Hs){return Hs.type+"="+Hs.value}(Us).replace(/\+/,"\\+")}).join("+")}($s).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Ds,$s,Gs,Us,Hs=function(Js){for(var qs="",ru=Js.array,tu=0;tu<ru.length;tu++){var nu=ru[tu];if(qs+="    policy oid: "+nu.policyoid+`
`,nu.array!==void 0)for(var uu=0;uu<nu.array.length;uu++){var fu=nu.array[uu];fu.cps!==void 0&&(qs+="    cps: "+fu.cps+`
`)}}return qs},zs=function(Js){for(var qs="",ru=Js.array,tu=0;tu<ru.length;tu++){var nu=ru[tu];try{nu.dpname.full[0].uri!==void 0&&(qs+="    "+nu.dpname.full[0].uri+`
`)}catch{}try{nu.dname.full[0].dn.hex!==void 0&&(qs+="    "+Mt.hex2dn(nu.dpname.full[0].dn.hex)+`
`)}catch{}}return qs},js=function(Js){for(var qs="",ru=Js.array,tu=0;tu<ru.length;tu++){var nu=ru[tu];nu.caissuer!==void 0&&(qs+="    caissuer: "+nu.caissuer+`
`),nu.ocsp!==void 0&&(qs+="    ocsp: "+nu.ocsp+`
`)}return qs};if(Ds=`Basic Fields
`,Ds+="  serial number: "+this.getSerialNumberHex()+`
`,Ds+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Ds+="  issuer: "+this.getIssuerString()+`
`,Ds+="  notBefore: "+this.getNotBefore()+`
`,Ds+="  notAfter: "+this.getNotAfter()+`
`,Ds+="  subject: "+this.getSubjectString()+`
`,Ds+=`  subject public key info: 
`,Ds+="    key algorithm: "+($s=this.getPublicKey()).type+`
`,$s.type==="RSA"&&(Ds+="    n="+dt($s.n.toString(16)).substr(0,16)+`...
`,Ds+="    e="+dt($s.e.toString(16))+`
`),(Gs=this.aExtInfo)!=null){Ds+=`X509v3 Extensions:
`;for(var Ws=0;Ws<Gs.length;Ws++){var Qs=Gs[Ws],Zs=u$2.asn1.x509.OID.oid2name(Qs.oid);Zs===""&&(Zs=Qs.oid);var Xs="";if(Qs.critical===!0&&(Xs="CRITICAL"),Ds+="  "+Zs+" "+Xs+`:
`,Zs==="basicConstraints"){var eu=this.getExtBasicConstraints();eu.cA===void 0?Ds+=`    {}
`:(Ds+="    cA=true",eu.pathLen!==void 0&&(Ds+=", pathLen="+eu.pathLen),Ds+=`
`)}else if(Zs==="keyUsage")Ds+="    "+this.getExtKeyUsageString()+`
`;else if(Zs==="subjectKeyIdentifier")Ds+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Zs==="authorityKeyIdentifier"){var Ys=this.getExtAuthorityKeyIdentifier();Ys.kid!==void 0&&(Ds+="    kid="+Ys.kid.hex+`
`)}else Zs==="extKeyUsage"?Ds+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Zs==="subjectAltName"?Ds+="    "+(Us=this.getExtSubjectAltName(),JSON.stringify(Us.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Zs==="cRLDistributionPoints"?Ds+=zs(this.getExtCRLDistributionPoints()):Zs==="authorityInfoAccess"?Ds+=js(this.getExtAuthorityInfoAccess()):Zs==="certificatePolicies"&&(Ds+=Hs(this.getExtCertificatePolicies()))}}return Ds+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Ds+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof ca=="string"&&(ca.indexOf("-----BEGIN")!=-1?this.readCertPEM(ca):u$2.lang.String.isHex(ca)&&this.readCertHex(ca))}function Pt(ca){return h$2.SHA256(ca).toString()}It.getLblen=function(ca,ga){if(ca.substr(ga+2,1)!="8")return 1;var _s=parseInt(ca.substr(ga+3,1));return _s==0?-1:0<_s&&_s<10?_s+1:-2},It.getL=function(ca,ga){var _s=It.getLblen(ca,ga);return _s<1?"":ca.substr(ga+2,2*_s)},It.getVblen=function(ca,ga){var _s;return(_s=It.getL(ca,ga))==""?-1:(_s.substr(0,1)==="8"?new c$2(_s.substr(2),16):new c$2(_s,16)).intValue()},It.getVidx=function(ca,ga){var _s=It.getLblen(ca,ga);return _s<0?_s:ga+2*(_s+1)},It.getV=function(ca,ga){var _s=It.getVidx(ca,ga),Ss=It.getVblen(ca,ga);return ca.substr(_s,2*Ss)},It.getTLV=function(ca,ga){return ca.substr(ga,2)+It.getL(ca,ga)+It.getV(ca,ga)},It.getTLVblen=function(ca,ga){return 2+2*It.getLblen(ca,ga)+2*It.getVblen(ca,ga)},It.getNextSiblingIdx=function(ca,ga){return It.getVidx(ca,ga)+2*It.getVblen(ca,ga)},It.getChildIdx=function(ca,ga){var _s,Ss,Ms,Cs=It,Ts=[];_s=Cs.getVidx(ca,ga),Ss=2*Cs.getVblen(ca,ga),ca.substr(ga,2)=="03"&&(_s+=2,Ss-=2),Ms=0;for(var Is=_s;Ms<=Ss;){var Bs=Cs.getTLVblen(ca,Is);if((Ms+=Bs)<=Ss&&Ts.push(Is),Is+=Bs,Ms>=Ss)break}return Ts},It.getNthChildIdx=function(ca,ga,_s){return It.getChildIdx(ca,ga)[_s]},It.getIdxbyList=function(ca,ga,_s,Ss){var Ms,Cs,Ts=It;return _s.length==0?Ss!==void 0&&ca.substr(ga,2)!==Ss?-1:ga:(Ms=_s.shift())>=(Cs=Ts.getChildIdx(ca,ga)).length?-1:Ts.getIdxbyList(ca,Cs[Ms],_s,Ss)},It.getIdxbyListEx=function(ca,ga,_s,Ss){var Ms,Cs,Ts=It;if(_s.length==0)return Ss!==void 0&&ca.substr(ga,2)!==Ss?-1:ga;Ms=_s.shift(),Cs=Ts.getChildIdx(ca,ga);for(var Is=0,Bs=0;Bs<Cs.length;Bs++){var Ps=ca.substr(Cs[Bs],2);if(typeof Ms=="number"&&!Ts.isContextTag(Ps)&&Is==Ms||typeof Ms=="string"&&Ts.isContextTag(Ps,Ms))return Ts.getIdxbyListEx(ca,Cs[Bs],_s,Ss);Ts.isContextTag(Ps)||Is++}return-1},It.getTLVbyList=function(ca,ga,_s,Ss){var Ms=It,Cs=Ms.getIdxbyList(ca,ga,_s,Ss);return Cs==-1||Cs>=ca.length?null:Ms.getTLV(ca,Cs)},It.getTLVbyListEx=function(ca,ga,_s,Ss){var Ms=It,Cs=Ms.getIdxbyListEx(ca,ga,_s,Ss);return Cs==-1?null:Ms.getTLV(ca,Cs)},It.getVbyList=function(ca,ga,_s,Ss,Ms){var Cs,Ts,Is=It;return(Cs=Is.getIdxbyList(ca,ga,_s,Ss))==-1||Cs>=ca.length?null:(Ts=Is.getV(ca,Cs),Ms===!0&&(Ts=Ts.substr(2)),Ts)},It.getVbyListEx=function(ca,ga,_s,Ss,Ms){var Cs,Ts,Is=It;return(Cs=Is.getIdxbyListEx(ca,ga,_s,Ss))==-1?null:(Ts=Is.getV(ca,Cs),ca.substr(Cs,2)=="03"&&Ms!==!1&&(Ts=Ts.substr(2)),Ts)},It.getInt=function(ca,ga,_s){_s==null&&(_s=-1);try{var Ss=ca.substr(ga,2);if(Ss!="02"&&Ss!="03")return _s;var Ms=It.getV(ca,ga);return Ss=="02"?parseInt(Ms,16):function(Cs){try{var Ts=Cs.substr(0,2);if(Ts=="00")return parseInt(Cs.substr(2),16);var Is=parseInt(Ts,16),Bs=Cs.substr(2),Ps=parseInt(Bs,16).toString(2);return Ps=="0"&&(Ps="00000000"),Ps=Ps.slice(0,0-Is),parseInt(Ps,2)}catch{return-1}}(Ms)}catch{return _s}},It.getOID=function(ca,ga,_s){_s==null&&(_s=null);try{return ca.substr(ga,2)!="06"?_s:function(Ss){if(!ct(Ss))return null;try{var Ms=[],Cs=Ss.substr(0,2),Ts=parseInt(Cs,16);Ms[0]=new String(Math.floor(Ts/40)),Ms[1]=new String(Ts%40);for(var Is=Ss.substr(2),Bs=[],Ps=0;Ps<Is.length/2;Ps++)Bs.push(parseInt(Is.substr(2*Ps,2),16));var Ls=[],Rs="";for(Ps=0;Ps<Bs.length;Ps++)128&Bs[Ps]?Rs+=pt((127&Bs[Ps]).toString(2),7):(Rs+=pt((127&Bs[Ps]).toString(2),7),Ls.push(new String(parseInt(Rs,2))),Rs="");var Os=Ms.join(".");return Ls.length>0&&(Os=Os+"."+Ls.join(".")),Os}catch{return null}}(It.getV(ca,ga))}catch{return _s}},It.getOIDName=function(ca,ga,_s){_s==null&&(_s=null);try{var Ss=It.getOID(ca,ga,_s);if(Ss==_s)return _s;var Ms=u$2.asn1.x509.OID.oid2name(Ss);return Ms==""?Ss:Ms}catch{return _s}},It.getString=function(ca,ga,_s){_s==null&&(_s=null);try{return rt(It.getV(ca,ga))}catch{return _s}},It.hextooidstr=function(ca){var ga=function(Rs,Os){return Rs.length>=Os?Rs:new Array(Os-Rs.length+1).join("0")+Rs},_s=[],Ss=ca.substr(0,2),Ms=parseInt(Ss,16);_s[0]=new String(Math.floor(Ms/40)),_s[1]=new String(Ms%40);for(var Cs=ca.substr(2),Ts=[],Is=0;Is<Cs.length/2;Is++)Ts.push(parseInt(Cs.substr(2*Is,2),16));var Bs=[],Ps="";for(Is=0;Is<Ts.length;Is++)128&Ts[Is]?Ps+=ga((127&Ts[Is]).toString(2),7):(Ps+=ga((127&Ts[Is]).toString(2),7),Bs.push(new String(parseInt(Ps,2))),Ps="");var Ls=_s.join(".");return Bs.length>0&&(Ls=Ls+"."+Bs.join(".")),Ls},It.dump=function(ca,ga,_s,Ss){var Ms=It,Cs=Ms.getV,Ts=Ms.dump,Is=Ms.getChildIdx,Bs=ca;ca instanceof u$2.asn1.ASN1Object&&(Bs=ca.getEncodedHex());var Ps=function(js,Ws){return js.length<=2*Ws?js:js.substr(0,Ws)+"..(total "+js.length/2+"bytes).."+js.substr(js.length-Ws,Ws)};ga===void 0&&(ga={ommit_long_octet:32}),_s===void 0&&(_s=0),Ss===void 0&&(Ss="");var Ls,Rs=ga.ommit_long_octet;if((Ls=Bs.substr(_s,2))=="01")return(Os=Cs(Bs,_s))=="00"?Ss+`BOOLEAN FALSE
`:Ss+`BOOLEAN TRUE
`;if(Ls=="02")return Ss+"INTEGER "+Ps(Os=Cs(Bs,_s),Rs)+`
`;if(Ls=="03"){var Os=Cs(Bs,_s);if(Ms.isASN1HEX(Os.substr(2))){var Fs=Ss+`BITSTRING, encapsulates
`;return Fs+=Ts(Os.substr(2),ga,0,Ss+"  ")}return Ss+"BITSTRING "+Ps(Os,Rs)+`
`}if(Ls=="04")return Os=Cs(Bs,_s),Ms.isASN1HEX(Os)?(Fs=Ss+`OCTETSTRING, encapsulates
`,Fs+=Ts(Os,ga,0,Ss+"  ")):Ss+"OCTETSTRING "+Ps(Os,Rs)+`
`;if(Ls=="05")return Ss+`NULL
`;if(Ls=="06"){var Vs=Cs(Bs,_s),ks=u$2.asn1.ASN1Util.oidHexToInt(Vs),Ns=u$2.asn1.x509.OID.oid2name(ks),Ds=ks.replace(/\./g," ");return Ns!=""?Ss+"ObjectIdentifier "+Ns+" ("+Ds+`)
`:Ss+"ObjectIdentifier ("+Ds+`)
`}if(Ls=="0a")return Ss+"ENUMERATED "+parseInt(Cs(Bs,_s))+`
`;if(Ls=="0c")return Ss+"UTF8String '"+nt(Cs(Bs,_s))+`'
`;if(Ls=="13")return Ss+"PrintableString '"+nt(Cs(Bs,_s))+`'
`;if(Ls=="14")return Ss+"TeletexString '"+nt(Cs(Bs,_s))+`'
`;if(Ls=="16")return Ss+"IA5String '"+nt(Cs(Bs,_s))+`'
`;if(Ls=="17")return Ss+"UTCTime "+nt(Cs(Bs,_s))+`
`;if(Ls=="18")return Ss+"GeneralizedTime "+nt(Cs(Bs,_s))+`
`;if(Ls=="1a")return Ss+"VisualString '"+nt(Cs(Bs,_s))+`'
`;if(Ls=="1e")return Ss+"BMPString '"+ht(Cs(Bs,_s))+`'
`;if(Ls=="30"){if(Bs.substr(_s,4)=="3000")return Ss+`SEQUENCE {}
`;Fs=Ss+`SEQUENCE
`;var $s=ga;if(((Hs=Is(Bs,_s)).length==2||Hs.length==3)&&Bs.substr(Hs[0],2)=="06"&&Bs.substr(Hs[Hs.length-1],2)=="04"){Ns=Ms.oidname(Cs(Bs,Hs[0]));var Gs=JSON.parse(JSON.stringify(ga));Gs.x509ExtName=Ns,$s=Gs}for(var Us=0;Us<Hs.length;Us++)Fs+=Ts(Bs,$s,Hs[Us],Ss+"  ");return Fs}if(Ls=="31"){Fs=Ss+`SET
`;var Hs=Is(Bs,_s);for(Us=0;Us<Hs.length;Us++)Fs+=Ts(Bs,ga,Hs[Us],Ss+"  ");return Fs}if((128&(Ls=parseInt(Ls,16)))!=0){var zs=31&Ls;if((32&Ls)!=0){for(Fs=Ss+"["+zs+`]
`,Hs=Is(Bs,_s),Us=0;Us<Hs.length;Us++)Fs+=Ts(Bs,ga,Hs[Us],Ss+"  ");return Fs}if(Os=Cs(Bs,_s),It.isASN1HEX(Os)){var Fs=Ss+"["+zs+`]
`;return Fs+=Ts(Os,ga,0,Ss+"  ")}return(Os.substr(0,8)=="68747470"||ga.x509ExtName==="subjectAltName"&&zs==2)&&(Os=nt(Os)),Fs=Ss+"["+zs+"] "+Os+`
`}return Ss+"UNKNOWN("+Ls+") "+Cs(Bs,_s)+`
`},It.isContextTag=function(ca,ga){var _s,Ss;ca=ca.toLowerCase();try{_s=parseInt(ca,16)}catch{return-1}if(ga===void 0)return(192&_s)==128;try{return ga.match(/^\[[0-9]+\]$/)!=null&&!((Ss=parseInt(ga.substr(1,ga.length-1),10))>31)&&(192&_s)==128&&(31&_s)==Ss}catch{return!1}},It.isASN1HEX=function(ca){var ga=It;if(ca.length%2==1)return!1;var _s=ga.getVblen(ca,0),Ss=ca.substr(0,2),Ms=ga.getL(ca,0);return ca.length-Ss.length-Ms.length==2*_s},It.checkStrictDER=function(ca,ga,_s,Ss,Ms){var Cs=It;if(_s===void 0){if(typeof ca!="string")throw new Error("not hex string");if(ca=ca.toLowerCase(),!u$2.lang.String.isHex(ca))throw new Error("not hex string");_s=ca.length,Ms=(Ss=ca.length/2)<128?1:Math.ceil(Ss.toString(16))+1}if(Cs.getL(ca,ga).length>2*Ms)throw new Error("L of TLV too long: idx="+ga);var Ts=Cs.getVblen(ca,ga);if(Ts>Ss)throw new Error("value of L too long than hex: idx="+ga);var Is=Cs.getTLV(ca,ga),Bs=Is.length-2-Cs.getL(ca,ga).length;if(Bs!==2*Ts)throw new Error("V string length and L's value not the same:"+Bs+"/"+2*Ts);if(ga===0&&ca.length!=Is.length)throw new Error("total length and TLV length unmatch:"+ca.length+"!="+Is.length);var Ps=ca.substr(ga,2);if(Ps==="02"){var Ls=Cs.getVidx(ca,ga);if(ca.substr(Ls,2)=="00"&&ca.charCodeAt(Ls+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Ps,16)){for(var Rs=Cs.getVblen(ca,ga),Os=0,Fs=Cs.getChildIdx(ca,ga),Vs=0;Vs<Fs.length;Vs++)Os+=Cs.getTLV(ca,Fs[Vs]).length,Cs.checkStrictDER(ca,Fs[Vs],_s,Ss,Ms);if(2*Rs!=Os)throw new Error("sum of children's TLV length and L unmatch: "+2*Rs+"!="+Os)}},It.oidname=function(ca){var ga=u$2.asn1;u$2.lang.String.isHex(ca)&&(ca=ga.ASN1Util.oidHexToInt(ca));var _s=ga.x509.OID.oid2name(ca);return _s===""&&(_s=ca),_s},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.x509!==void 0&&u$2.asn1.x509||(u$2.asn1.x509={}),u$2.asn1.x509.Certificate=function(ca){u$2.asn1.x509.Certificate.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERBitString,Ss=ga.DERSequence,Ms=ga.x509,Cs=Ms.TBSCertificate,Ts=Ms.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Is){this.params=Is},this.sign=function(){var Is=this.params,Bs=Is.sigalg;Is.sigalg.name!=null&&(Bs=Is.sigalg.name);var Ps=Is.tbsobj.getEncodedHex(),Ls=new u$2.crypto.Signature({alg:Bs});Ls.init(Is.cakey),Ls.updateHex(Ps),Is.sighex=Ls.sign()},this.getPEM=function(){return at(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Is=this.params;if(Is.tbsobj!=null&&Is.tbsobj!=null||(Is.tbsobj=new Cs(Is)),Is.sighex==null&&Is.cakey!=null&&this.sign(),Is.sighex==null)throw new Error("sighex or cakey parameter not defined");var Bs=[];return Bs.push(Is.tbsobj),Bs.push(new Ts({name:Is.sigalg})),Bs.push(new _s({hex:"00"+Is.sighex})),new Ss({array:Bs}).getEncodedHex()},ca!=null&&(this.params=ca)},At(u$2.asn1.x509.Certificate,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertificate=function(ca){u$2.asn1.x509.TBSCertificate.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.x509,Ss=ga.DERTaggedObject,Ms=ga.DERInteger,Cs=ga.DERSequence,Ts=_s.AlgorithmIdentifier,Is=_s.Time,Bs=_s.X500Name,Ps=_s.Extensions,Ls=_s.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Rs){this.params=Rs},this.getEncodedHex=function(){var Rs=[],Os=this.params;if(Os.version!=null||Os.version!=1){var Fs=2;Os.version!=null&&(Fs=Os.version-1);var Vs=new Ss({obj:new Ms({int:Fs})});Rs.push(Vs)}return Rs.push(new Ms(Os.serial)),Rs.push(new Ts({name:Os.sigalg})),Rs.push(new Bs(Os.issuer)),Rs.push(new Cs({array:[new Is(Os.notbefore),new Is(Os.notafter)]})),Rs.push(new Bs(Os.subject)),Rs.push(new Ls(Et.getKey(Os.sbjpubkey))),Os.ext!==void 0&&Os.ext.length>0&&Rs.push(new Ss({tag:"a3",obj:new Ps(Os.ext)})),new u$2.asn1.DERSequence({array:Rs}).getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.TBSCertificate,u$2.asn1.ASN1Object),u$2.asn1.x509.Extensions=function(ca){u$2.asn1.x509.Extensions.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.x509;this.aParam=[],this.setByParam=function(Ms){this.aParam=Ms},this.getEncodedHex=function(){for(var Ms=[],Cs=0;Cs<this.aParam.length;Cs++){var Ts=this.aParam[Cs],Is=Ts.extname,Bs=null;if(Ts.extn!=null)Bs=new Ss.PrivateExtension(Ts);else if(Is=="subjectKeyIdentifier")Bs=new Ss.SubjectKeyIdentifier(Ts);else if(Is=="keyUsage")Bs=new Ss.KeyUsage(Ts);else if(Is=="subjectAltName")Bs=new Ss.SubjectAltName(Ts);else if(Is=="issuerAltName")Bs=new Ss.IssuerAltName(Ts);else if(Is=="basicConstraints")Bs=new Ss.BasicConstraints(Ts);else if(Is=="cRLDistributionPoints")Bs=new Ss.CRLDistributionPoints(Ts);else if(Is=="certificatePolicies")Bs=new Ss.CertificatePolicies(Ts);else if(Is=="authorityKeyIdentifier")Bs=new Ss.AuthorityKeyIdentifier(Ts);else if(Is=="extKeyUsage")Bs=new Ss.ExtKeyUsage(Ts);else if(Is=="authorityInfoAccess")Bs=new Ss.AuthorityInfoAccess(Ts);else if(Is=="cRLNumber")Bs=new Ss.CRLNumber(Ts);else if(Is=="cRLReason")Bs=new Ss.CRLReason(Ts);else if(Is=="ocspNonce")Bs=new Ss.OCSPNonce(Ts);else if(Is=="ocspNoCheck")Bs=new Ss.OCSPNoCheck(Ts);else if(Is=="adobeTimeStamp")Bs=new Ss.AdobeTimeStamp(Ts);else{if(Is!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Ts));Bs=new Ss.SubjectDirectoryAttributes(Ts)}Bs!=null&&Ms.push(Bs)}return new _s({array:Ms}).getEncodedHex()},ca!=null&&this.setByParam(ca)},At(u$2.asn1.x509.Extensions,u$2.asn1.ASN1Object),u$2.asn1.x509.Extension=function(ca){u$2.asn1.x509.Extension.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERObjectIdentifier,Ss=ga.DEROctetString;ga.DERBitString;var Ms=ga.DERBoolean,Cs=ga.DERSequence;this.getEncodedHex=function(){var Ts=new _s({oid:this.oid}),Is=new Ss({hex:this.getExtnValueHex()}),Bs=new Array;return Bs.push(Ts),this.critical&&Bs.push(new Ms),Bs.push(Is),new Cs({array:Bs}).getEncodedHex()},this.critical=!1,ca!==void 0&&ca.critical!==void 0&&(this.critical=ca.critical)},At(u$2.asn1.x509.Extension,u$2.asn1.ASN1Object),u$2.asn1.x509.KeyUsage=function(ca){u$2.asn1.x509.KeyUsage.superclass.constructor.call(this,ca);var ga=Mt.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",ca!==void 0&&(ca.bin!==void 0&&(this.asn1ExtnValue=new u$2.asn1.DERBitString(ca)),ca.names!==void 0&&ca.names.length!==void 0)){for(var _s=ca.names,Ss="000000000",Ms=0;Ms<_s.length;Ms++)for(var Cs=0;Cs<ga.length;Cs++)_s[Ms]===ga[Cs]&&(Ss=Ss.substring(0,Cs)+"1"+Ss.substring(Cs+1,Ss.length));this.asn1ExtnValue=new u$2.asn1.DERBitString({bin:Ss})}},At(u$2.asn1.x509.KeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.BasicConstraints=function(ca){u$2.asn1.x509.BasicConstraints.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERBoolean,Ss=ga.DERInteger,Ms=ga.DERSequence;this.getExtnValueHex=function(){var Cs=new Array;this.cA&&Cs.push(new _s),this.pathLen>-1&&Cs.push(new Ss({int:this.pathLen}));var Ts=new Ms({array:Cs});return this.asn1ExtnValue=Ts,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,ca!==void 0&&(ca.cA!==void 0&&(this.cA=ca.cA),ca.pathLen!==void 0&&(this.pathLen=ca.pathLen))},At(u$2.asn1.x509.BasicConstraints,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLDistributionPoints=function(ca){u$2.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Ss){for(var Ms=[],Cs=0;Cs<Ss.length;Cs++)if(Ss[Cs]instanceof u$2.asn1.ASN1Object)Ms.push(Ss[Cs]);else{var Ts=new _s.DistributionPoint(Ss[Cs]);Ms.push(Ts)}this.asn1ExtnValue=new ga.DERSequence({array:Ms})},this.setByOneURI=function(Ss){var Ms=new _s.DistributionPoint({fulluri:Ss});this.setByDPArray([Ms])},this.oid="2.5.29.31",ca!==void 0&&(ca.array!==void 0?this.setByDPArray(ca.array):ca.uri!==void 0&&this.setByOneURI(ca.uri))},At(u$2.asn1.x509.CRLDistributionPoints,u$2.asn1.x509.Extension),u$2.asn1.x509.DistributionPoint=function(ca){u$2.asn1.x509.DistributionPoint.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.x509.DistributionPointName;this.getEncodedHex=function(){var Ss=new ga.DERSequence;if(this.asn1DP!=null){var Ms=new ga.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Ss.appendASN1Object(Ms)}return this.hTLV=Ss.getEncodedHex(),this.hTLV},ca!==void 0&&(ca.dpobj!==void 0?this.asn1DP=ca.dpobj:ca.dpname!==void 0?this.asn1DP=new _s(ca.dpname):ca.fulluri!==void 0&&(this.asn1DP=new _s({full:[{uri:ca.fulluri}]})))},At(u$2.asn1.x509.DistributionPoint,u$2.asn1.ASN1Object),u$2.asn1.x509.DistributionPointName=function(ca){u$2.asn1.x509.DistributionPointName.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new _s({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},ca!==void 0)if(ga.x509.GeneralNames.prototype.isPrototypeOf(ca))this.type="full",this.tag="a0",this.asn1V=ca;else{if(ca.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new ga.x509.GeneralNames(ca.full)}},At(u$2.asn1.x509.DistributionPointName,u$2.asn1.ASN1Object),u$2.asn1.x509.CertificatePolicies=function(ca){u$2.asn1.x509.CertificatePolicies.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.x509,Ss=ga.DERSequence,Ms=_s.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Cs=[],Ts=0;Ts<this.params.array.length;Ts++)Cs.push(new Ms(this.params.array[Ts]));var Is=new Ss({array:Cs});return this.asn1ExtnValue=Is,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.CertificatePolicies,u$2.asn1.x509.Extension),u$2.asn1.x509.PolicyInformation=function(ca){u$2.asn1.x509.PolicyInformation.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.DERObjectIdentifier,Ms=ga.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Cs=[new Ss(this.params.policyoid)];if(this.params.array!==void 0){for(var Ts=[],Is=0;Is<this.params.array.length;Is++)Ts.push(new Ms(this.params.array[Is]));Ts.length>0&&Cs.push(new _s({array:Ts}))}return new _s({array:Cs}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.PolicyInformation,u$2.asn1.ASN1Object),u$2.asn1.x509.PolicyQualifierInfo=function(ca){u$2.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.DERIA5String,Ms=ga.DERObjectIdentifier,Cs=ga.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new _s({array:[new Ms({oid:"1.3.6.1.5.5.7.2.1"}),new Ss({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new _s({array:[new Ms({oid:"1.3.6.1.5.5.7.2.2"}),new Cs(this.params.unotice)]}).getEncodedHex():void 0},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.PolicyQualifierInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.UserNotice=function(ca){u$2.asn1.x509.UserNotice.superclass.constructor.call(this,ca);var ga=u$2.asn1.DERSequence;u$2.asn1.DERInteger;var _s=u$2.asn1.x509.DisplayText,Ss=u$2.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Ms=[];return this.params.noticeref!==void 0&&Ms.push(new Ss(this.params.noticeref)),this.params.exptext!==void 0&&Ms.push(new _s(this.params.exptext)),new ga({array:Ms}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.UserNotice,u$2.asn1.ASN1Object),u$2.asn1.x509.NoticeReference=function(ca){u$2.asn1.x509.NoticeReference.superclass.constructor.call(this,ca);var ga=u$2.asn1.DERSequence,_s=u$2.asn1.DERInteger,Ss=u$2.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Ms=[];if(this.params.org!==void 0&&Ms.push(new Ss(this.params.org)),this.params.noticenum!==void 0){for(var Cs=[],Ts=this.params.noticenum,Is=0;Is<Ts.length;Is++)Cs.push(new _s(Ts[Is]));Ms.push(new ga({array:Cs}))}if(Ms.length==0)throw new Error("parameter is empty");return new ga({array:Ms}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.NoticeReference,u$2.asn1.ASN1Object),u$2.asn1.x509.DisplayText=function(ca){u$2.asn1.x509.DisplayText.superclass.constructor.call(this,ca),this.hT="0c",ca!==void 0&&(ca.type==="ia5"?this.hT="16":ca.type==="vis"?this.hT="1a":ca.type==="bmp"&&(this.hT="1e"))},At(u$2.asn1.x509.DisplayText,u$2.asn1.DERAbstractString),u$2.asn1.x509.ExtKeyUsage=function(ca){u$2.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,ca);var ga=u$2.asn1;this.setPurposeArray=function(_s){this.asn1ExtnValue=new ga.DERSequence;for(var Ss=0;Ss<_s.length;Ss++){var Ms=new ga.DERObjectIdentifier(_s[Ss]);this.asn1ExtnValue.appendASN1Object(Ms)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",ca!==void 0&&ca.array!==void 0&&this.setPurposeArray(ca.array)},At(u$2.asn1.x509.ExtKeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityKeyIdentifier=function(ca){u$2.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,ca);var ga=u$2,_s=ga.asn1,Ss=_s.DERTaggedObject,Ms=_s.x509.GeneralNames;ga.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Cs=new Array;this.asn1KID&&Cs.push(new Ss({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Cs.push(new Ss({explicit:!1,tag:"a1",obj:new Ms([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Cs.push(new Ss({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Ts=new _s.DERSequence({array:Cs});return this.asn1ExtnValue=Ts,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Cs){if(Cs.str!==void 0||Cs.hex!==void 0)this.asn1KID=new u$2.asn1.DEROctetString(Cs);else if(typeof Cs=="object"&&u$2.crypto.Util.isKey(Cs)||typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1){var Ts=Cs;typeof Cs=="string"&&(Ts=Et.getKey(Cs));var Is=Et.getKeyID(Ts);this.asn1KID=new u$2.asn1.DEROctetString({hex:Is})}},this.setCertIssuerByParam=function(Cs){Cs.str!==void 0||Cs.ldapstr!==void 0||Cs.hex!==void 0||Cs.certsubject!==void 0||Cs.certissuer!==void 0?this.asn1CertIssuer=new u$2.asn1.x509.X500Name(Cs):typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1&&Cs.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new u$2.asn1.x509.X500Name({certissuer:Cs}))},this.setCertSNByParam=function(Cs){if(Cs.str!==void 0||Cs.bigint!==void 0||Cs.hex!==void 0)this.asn1CertSN=new u$2.asn1.DERInteger(Cs);else if(typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1&&Cs.indexOf("CERTIFICATE")){var Ts=new Mt;Ts.readCertPEM(Cs);var Is=Ts.getSerialNumberHex();this.asn1CertSN=new u$2.asn1.DERInteger({hex:Is})}},this.oid="2.5.29.35",ca!==void 0&&(ca.kid!==void 0&&this.setKIDByParam(ca.kid),ca.issuer!==void 0&&this.setCertIssuerByParam(ca.issuer),ca.sn!==void 0&&this.setCertSNByParam(ca.sn),ca.issuersn!==void 0&&typeof ca.issuersn=="string"&&ca.issuersn.indexOf("BEGIN ")!=-1&&ca.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(ca.issuersn),this.setCertIssuerByParam(ca.issuersn)))},At(u$2.asn1.x509.AuthorityKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectKeyIdentifier=function(ca){u$2.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,ca);var ga=u$2.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(_s){if(_s.str!==void 0||_s.hex!==void 0)this.asn1KID=new ga(_s);else if(typeof _s=="object"&&u$2.crypto.Util.isKey(_s)||typeof _s=="string"&&_s.indexOf("BEGIN")!=-1){var Ss=_s;typeof _s=="string"&&(Ss=Et.getKey(_s));var Ms=Et.getKeyID(Ss);this.asn1KID=new u$2.asn1.DEROctetString({hex:Ms})}},this.oid="2.5.29.14",ca!==void 0&&ca.kid!==void 0&&this.setKIDByParam(ca.kid)},At(u$2.asn1.x509.SubjectKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityInfoAccess=function(ca){u$2.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,ca),this.setAccessDescriptionArray=function(ga){for(var _s=new Array,Ss=u$2.asn1,Ms=Ss.DERSequence,Cs=Ss.DERObjectIdentifier,Ts=Ss.x509.GeneralName,Is=0;Is<ga.length;Is++){var Bs,Ps=ga[Is];if(Ps.ocsp!==void 0)Bs=new Ms({array:[new Cs({oid:"1.3.6.1.5.5.7.48.1"}),new Ts({uri:Ps.ocsp})]});else{if(Ps.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Ps));Bs=new Ms({array:[new Cs({oid:"1.3.6.1.5.5.7.48.2"}),new Ts({uri:Ps.caissuer})]})}_s.push(Bs)}this.asn1ExtnValue=new Ms({array:_s})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",ca!==void 0&&ca.array!==void 0&&this.setAccessDescriptionArray(ca.array)},At(u$2.asn1.x509.AuthorityInfoAccess,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectAltName=function(ca){u$2.asn1.x509.SubjectAltName.superclass.constructor.call(this,ca),this.setNameArray=function(ga){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(ga)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",ca!==void 0&&ca.array!==void 0&&this.setNameArray(ca.array)},At(u$2.asn1.x509.SubjectAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.IssuerAltName=function(ca){u$2.asn1.x509.IssuerAltName.superclass.constructor.call(this,ca),this.setNameArray=function(ga){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(ga)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",ca!==void 0&&ca.array!==void 0&&this.setNameArray(ca.array)},At(u$2.asn1.x509.IssuerAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectDirectoryAttributes=function(ca){u$2.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.ASN1Util.newObject,Ms=ga.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Cs=[],Ts=0;Ts<this.params.array.length;Ts++){var Is=this.params.array[Ts],Bs={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Is.attr=="dateOfBirth")Bs.seq[0].oid=Ms(Is.attr),Bs.seq[1].set[0]={gentime:Is.str};else if(Is.attr=="placeOfBirth")Bs.seq[0].oid=Ms(Is.attr),Bs.seq[1].set[0]={utf8str:Is.str};else if(Is.attr=="gender")Bs.seq[0].oid=Ms(Is.attr),Bs.seq[1].set[0]={prnstr:Is.str};else if(Is.attr=="countryOfCitizenship")Bs.seq[0].oid=Ms(Is.attr),Bs.seq[1].set[0]={prnstr:Is.str};else{if(Is.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Is.attr);Bs.seq[0].oid=Ms(Is.attr),Bs.seq[1].set[0]={prnstr:Is.str}}Cs.push(new Ss(Bs))}var Ps=new _s({array:Cs});return this.asn1ExtnValue=Ps,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.SubjectDirectoryAttributes,u$2.asn1.x509.Extension),u$2.asn1.x509.PrivateExtension=function(ca){u$2.asn1.x509.PrivateExtension.superclass.constructor.call(this,ca);var ga=u$2,_s=ga.lang.String.isHex,Ss=ga.asn1,Ms=Ss.x509.OID.name2oid,Cs=Ss.ASN1Util.newObject;this.params=null,this.setByParam=function(Ts){this.oid=Ms(Ts.extname),this.params=Ts},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Ts=this.params.extn;if(typeof Ts=="string"&&_s(Ts))return Ts;if(typeof Ts=="object")try{return Cs(Ts).getEncodedHex()}catch{}throw new Error("unsupported extn value")},ca!=null&&this.setByParam(ca)},At(u$2.asn1.x509.PrivateExtension,u$2.asn1.x509.Extension),u$2.asn1.x509.CRL=function(ca){u$2.asn1.x509.CRL.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.DERBitString,Ms=ga.x509,Cs=Ms.AlgorithmIdentifier,Ts=Ms.TBSCertList;this.params=void 0,this.setByParam=function(Is){this.params=Is},this.sign=function(){var Is=new Ts(this.params).getEncodedHex(),Bs=new u$2.crypto.Signature({alg:this.params.sigalg});Bs.init(this.params.cakey),Bs.updateHex(Is);var Ps=Bs.sign();this.params.sighex=Ps},this.getPEM=function(){return at(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Is=this.params;if(Is.tbsobj==null&&(Is.tbsobj=new Ts(Is)),Is.sighex==null&&Is.cakey!=null&&this.sign(),Is.sighex==null)throw new Error("sighex or cakey parameter not defined");var Bs=[];return Bs.push(Is.tbsobj),Bs.push(new Cs({name:Is.sigalg})),Bs.push(new Ss({hex:"00"+Is.sighex})),new _s({array:Bs}).getEncodedHex()},ca!=null&&(this.params=ca)},At(u$2.asn1.x509.CRL,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertList=function(ca){u$2.asn1.x509.TBSCertList.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERInteger,Ss=ga.DERSequence,Ms=ga.DERTaggedObject;ga.DERObjectIdentifier;var Cs=ga.x509,Ts=Cs.AlgorithmIdentifier,Is=Cs.Time,Bs=Cs.Extensions,Ps=Cs.X500Name;this.params=null,this.setByParam=function(Ls){this.params=Ls},this.getRevCertSequence=function(){for(var Ls=[],Rs=this.params.revcert,Os=0;Os<Rs.length;Os++){var Fs=[new _s(Rs[Os].sn),new Is(Rs[Os].date)];Rs[Os].ext!=null&&Fs.push(new Bs(Rs[Os].ext)),Ls.push(new Ss({array:Fs}))}return new Ss({array:Ls})},this.getEncodedHex=function(){var Ls=[],Rs=this.params;if(Rs.version!=null){var Os=Rs.version-1,Fs=new _s({int:Os});Ls.push(Fs)}if(Ls.push(new Ts({name:Rs.sigalg})),Ls.push(new Ps(Rs.issuer)),Ls.push(new Is(Rs.thisupdate)),Rs.nextupdate!=null&&Ls.push(new Is(Rs.nextupdate)),Rs.revcert!=null&&Ls.push(this.getRevCertSequence()),Rs.ext!=null){var Vs=new Bs(Rs.ext);Ls.push(new Ms({tag:"a0",explicit:!0,obj:Vs}))}return new Ss({array:Ls}).getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.TBSCertList,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLEntry=function(ca){u$2.asn1.x509.CRLEntry.superclass.constructor.call(this);var ga=u$2.asn1;this.setCertSerial=function(_s){this.sn=new ga.DERInteger(_s)},this.setRevocationDate=function(_s){this.time=new ga.x509.Time(_s)},this.getEncodedHex=function(){var _s=new ga.DERSequence({array:[this.sn,this.time]});return this.TLV=_s.getEncodedHex(),this.TLV},ca!==void 0&&(ca.time!==void 0&&this.setRevocationDate(ca.time),ca.sn!==void 0&&this.setCertSerial(ca.sn))},At(u$2.asn1.x509.CRLEntry,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLNumber=function(ca){u$2.asn1.x509.CRLNumber.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.CRLNumber,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLReason=function(ca){u$2.asn1.x509.CRLReason.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.CRLReason,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNonce=function(ca){u$2.asn1.x509.OCSPNonce.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.OCSPNonce,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNoCheck=function(ca){u$2.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.OCSPNoCheck,u$2.asn1.x509.Extension),u$2.asn1.x509.AdobeTimeStamp=function(ca){u$2.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERInteger,Ss=ga.DERBoolean,Ms=ga.DERSequence,Cs=ga.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Ts=this.params,Is=[new _s(1)];return Is.push(new Cs({uri:Ts.uri})),Ts.reqauth!=null&&Is.push(new Ss(Ts.reqauth)),this.asn1ExtnValue=new Ms({array:Is}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.AdobeTimeStamp,u$2.asn1.x509.Extension),u$2.asn1.x509.X500Name=function(ca){u$2.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var ga=u$2.asn1,_s=ga.x509,Ss=_s.RDN;this.setByString=function(Ms,Cs){Cs!==void 0&&(this.sRule=Cs);var Ts=Ms.split("/");Ts.shift();for(var Is=[],Bs=0;Bs<Ts.length;Bs++)if(Ts[Bs].match(/^[^=]+=.+$/))Is.push(Ts[Bs]);else{var Ps=Is.length-1;Is[Ps]=Is[Ps]+"/"+Ts[Bs]}for(Bs=0;Bs<Is.length;Bs++)this.asn1Array.push(new Ss({str:Is[Bs],rule:this.sRule}))},this.setByLdapString=function(Ms,Cs){Cs!==void 0&&(this.sRule=Cs);var Ts=_s.X500Name.ldapToCompat(Ms);this.setByString(Ts,Cs)},this.setByObject=function(Ms,Cs){for(var Ts in Cs!==void 0&&(this.sRule=Cs),Ms)if(Ms.hasOwnProperty(Ts)){var Is=new Ss({str:Ts+"="+Ms[Ts],rule:this.sRule});this.asn1Array?this.asn1Array.push(Is):this.asn1Array=[Is]}},this.setByParam=function(Ms){var Cs;Ms.rule!==void 0&&(this.sRule=Ms.rule),Ms.array!==void 0?this.paramArray=Ms.array:Ms.str!==void 0?this.setByString(Ms.str):Ms.ldapstr!==void 0?this.setByLdapString(Ms.ldapstr):Ms.hex!==void 0?this.hTLV=Ms.hex:Ms.certissuer!==void 0?((Cs=new Mt).readCertPEM(Ms.certissuer),this.hTLV=Cs.getIssuerHex()):Ms.certsubject!==void 0?((Cs=new Mt).readCertPEM(Ms.certsubject),this.hTLV=Cs.getSubjectHex()):typeof Ms=="object"&&Ms.certsubject===void 0&&Ms.certissuer===void 0&&this.setByObject(Ms)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Ms=0;Ms<this.paramArray.length;Ms++){var Cs={array:this.paramArray[Ms]};this.sRule!="utf8"&&(Cs.rule=this.sRule);var Ts=new Ss(Cs);this.asn1Array.push(Ts)}var Is=new ga.DERSequence({array:this.asn1Array});return this.hTLV=Is.getEncodedHex(),this.hTLV},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.X500Name,u$2.asn1.ASN1Object),u$2.asn1.x509.X500Name.compatToLDAP=function(ca){if(ca.substr(0,1)!=="/")throw"malformed input";var ga=(ca=ca.substr(1)).split("/");return ga.reverse(),(ga=ga.map(function(_s){return _s.replace(/,/,"\\,")})).join(",")},u$2.asn1.x509.X500Name.onelineToLDAP=function(ca){return u$2.asn1.x509.X500Name.compatToLDAP(ca)},u$2.asn1.x509.X500Name.ldapToCompat=function(ca){for(var ga=ca.split(","),_s=!1,Ss=[],Ms=0;ga.length>0;Ms++){var Cs=ga.shift();if(_s===!0){var Ts=(Ss.pop()+","+Cs).replace(/\\,/g,",");Ss.push(Ts),_s=!1}else Ss.push(Cs);Cs.substr(-1,1)==="\\"&&(_s=!0)}return(Ss=Ss.map(function(Is){return Is.replace("/","\\/")})).reverse(),"/"+Ss.join("/")},u$2.asn1.x509.X500Name.ldapToOneline=function(ca){return u$2.asn1.x509.X500Name.ldapToCompat(ca)},u$2.asn1.x509.RDN=function(ca){u$2.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var ga=u$2.asn1.x509.AttributeTypeAndValue;this.setByParam=function(_s){_s.rule!==void 0&&(this.sRule=_s.rule),_s.str!==void 0&&this.addByMultiValuedString(_s.str),_s.array!==void 0&&(this.paramArray=_s.array)},this.addByString=function(_s){this.asn1Array.push(new u$2.asn1.x509.AttributeTypeAndValue({str:_s,rule:this.sRule}))},this.addByMultiValuedString=function(_s){for(var Ss=u$2.asn1.x509.RDN.parseString(_s),Ms=0;Ms<Ss.length;Ms++)this.addByString(Ss[Ms])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var _s=0;_s<this.paramArray.length;_s++){var Ss=this.paramArray[_s];Ss.rule!==void 0&&this.sRule!="utf8"&&(Ss.rule=this.sRule);var Ms=new ga(Ss);this.asn1Array.push(Ms)}var Cs=new u$2.asn1.DERSet({array:this.asn1Array});return this.TLV=Cs.getEncodedHex(),this.TLV},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.RDN,u$2.asn1.ASN1Object),u$2.asn1.x509.RDN.parseString=function(ca){for(var ga=ca.split(/\+/),_s=!1,Ss=[],Ms=0;ga.length>0;Ms++){var Cs=ga.shift();if(_s===!0){var Ts=(Ss.pop()+"+"+Cs).replace(/\\\+/g,"+");Ss.push(Ts),_s=!1}else Ss.push(Cs);Cs.substr(-1,1)==="\\"&&(_s=!0)}var Is=!1,Bs=[];for(Ms=0;Ss.length>0;Ms++){if(Cs=Ss.shift(),Is===!0){var Ps=Bs.pop();Cs.match(/"$/)?(Ts=(Ps+"+"+Cs).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Bs.push(Ts),Is=!1):Bs.push(Ps+"+"+Cs)}else Bs.push(Cs);Cs.match(/^[^=]+="/)&&(Is=!0)}return Bs},u$2.asn1.x509.AttributeTypeAndValue=function(ca){u$2.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var ga=u$2,_s=ga.asn1,Ss=_s.DERSequence,Ms=_s.DERUTF8String,Cs=_s.DERPrintableString,Ts=_s.DERTeletexString,Is=_s.DERIA5String,Bs=_s.DERVisibleString,Ps=_s.DERBMPString,Ls=ga.lang.String.isMail,Rs=ga.lang.String.isPrintable;this.setByParam=function(Os){if(Os.rule!==void 0&&(this.sRule=Os.rule),Os.ds!==void 0&&(this.dsType=Os.ds),Os.value===void 0&&Os.str!==void 0){var Fs=Os.str.match(/^([^=]+)=(.+)$/);if(!Fs)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Fs[1],this.sValue=Fs[2]}else this.sType=Os.type,this.sValue=Os.value},this.setByString=function(Os,Fs){Fs!==void 0&&(this.sRule=Fs);var Vs=Os.match(/^([^=]+)=(.+)$/);if(!Vs)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Vs[1],Vs[2])},this._getDsType=function(){var Os=this.sType,Fs=this.sValue,Vs=this.sRule;return Vs==="prn"?Os=="CN"&&Ls(Fs)?"ia5":Rs(Fs)?"prn":"utf8":Vs==="utf8"?Os=="CN"&&Ls(Fs)?"ia5":Os=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(Os,Fs,Vs){Vs!==void 0&&(this.sRule=Vs),this.sType=Os,this.sValue=Fs},this.getValueObj=function(Os,Fs){if(Os=="utf8")return new Ms({str:Fs});if(Os=="prn")return new Cs({str:Fs});if(Os=="tel")return new Ts({str:Fs});if(Os=="ia5")return new Is({str:Fs});if(Os=="vis")return new Bs({str:Fs});if(Os=="bmp")return new Ps({str:Fs});throw new Error("unsupported directory string type: type="+Os+" value="+Fs)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var Os=u$2.asn1.x509.OID.atype2obj(this.sType),Fs=this.getValueObj(this.dsType,this.sValue),Vs=new Ss({array:[Os,Fs]});return this.TLV=Vs.getEncodedHex(),this.TLV},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.AttributeTypeAndValue,u$2.asn1.ASN1Object),u$2.asn1.x509.SubjectPublicKeyInfo=function(ca){u$2.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var ga=u$2,_s=ga.asn1,Ss=_s.DERInteger,Ms=_s.DERBitString,Cs=_s.DERObjectIdentifier,Ts=_s.DERSequence,Is=_s.ASN1Util.newObject,Bs=_s.x509.AlgorithmIdentifier,Ps=ga.crypto;Ps.ECDSA,Ps.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Ts({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Ls=this.getASN1Object();return this.hTLV=Ls.getEncodedHex(),this.hTLV},this.setPubKey=function(Ls){try{if(Ls instanceof X){var Rs=Is({seq:[{int:{bigint:Ls.n}},{int:{int:Ls.e}}]}).getEncodedHex();this.asn1AlgId=new Bs({name:"rsaEncryption"}),this.asn1SubjPKey=new Ms({hex:"00"+Rs})}}catch{}try{if(Ls instanceof u$2.crypto.ECDSA){var Os=new Cs({name:Ls.curveName});this.asn1AlgId=new Bs({name:"ecPublicKey",asn1params:Os}),this.asn1SubjPKey=new Ms({hex:"00"+Ls.pubKeyHex})}}catch{}try{if(Ls instanceof u$2.crypto.DSA){Os=new Is({seq:[{int:{bigint:Ls.p}},{int:{bigint:Ls.q}},{int:{bigint:Ls.g}}]}),this.asn1AlgId=new Bs({name:"dsa",asn1params:Os});var Fs=new Ss({bigint:Ls.y});this.asn1SubjPKey=new Ms({hex:"00"+Fs.getEncodedHex()})}}catch{}},ca!==void 0&&this.setPubKey(ca)},At(u$2.asn1.x509.SubjectPublicKeyInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.Time=function(ca){u$2.asn1.x509.Time.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERUTCTime,Ss=ga.DERGeneralizedTime;this.setTimeParams=function(Ms){this.timeParams=Ms},this.getEncodedHex=function(){var Ms=null;return Ms=this.timeParams!=null?this.type=="utc"?new _s(this.timeParams):new Ss(this.timeParams):this.type=="utc"?new _s:new Ss,this.TLV=Ms.getEncodedHex(),this.TLV},this.type="utc",ca!==void 0&&(ca.type!==void 0?this.type=ca.type:ca.str!==void 0&&(ca.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),ca.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=ca)},At(u$2.asn1.x509.Time,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier=function(ca){u$2.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var ga=u$2.asn1,_s=ga.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Ms=null;for(var Cs in _s)Cs===this.nameAlg&&(Ms=_s[Cs]);if(Ms!==null)return this.hTLV=Ms,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=ga.x509.OID.name2obj(this.nameAlg));var Ts=[this.asn1Alg];this.asn1Params!==null&&Ts.push(this.asn1Params);var Is=new ga.DERSequence({array:Ts});return this.hTLV=Is.getEncodedHex(),this.hTLV},ca!==void 0&&(ca.name!==void 0&&(this.nameAlg=ca.name),ca.asn1params!==void 0&&(this.asn1Params=ca.asn1params),ca.paramempty!==void 0&&(this.paramEmpty=ca.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Ss=this.nameAlg.toLowerCase();Ss.substr(-7,7)!=="withdsa"&&Ss.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new ga.DERNull)}},At(u$2.asn1.x509.AlgorithmIdentifier,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},u$2.asn1.x509.GeneralName=function(ca){u$2.asn1.x509.GeneralName.superclass.constructor.call(this);var ga={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},_s=u$2.asn1;_s.DERSequence;var Ss=_s.DEROctetString,Ms=_s.DERIA5String,Cs=_s.DERTaggedObject,Ts=_s.ASN1Object,Is=_s.x509.X500Name,Bs=ut;this.explicit=!1,this.setByParam=function(Ps){var Ls=null;if(Ps!==void 0){if(Ps.rfc822!==void 0&&(this.type="rfc822",Ls=new Ms({str:Ps[this.type]})),Ps.dns!==void 0&&(this.type="dns",Ls=new Ms({str:Ps[this.type]})),Ps.uri!==void 0&&(this.type="uri",Ls=new Ms({str:Ps[this.type]})),Ps.dn!==void 0&&(this.type="dn",this.explicit=!0,Ls=typeof Ps.dn=="string"?new Is({str:Ps.dn}):Ps.dn instanceof u$2.asn1.x509.X500Name?Ps.dn:new Is(Ps.dn)),Ps.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Ls=new Is({ldapstr:Ps.ldapdn})),Ps.certissuer!==void 0){this.type="dn",this.explicit=!0;var Rs=null;if((Fs=Ps.certissuer).match(/^[0-9A-Fa-f]+$/),Fs.indexOf("-----BEGIN ")!=-1&&(Rs=Bs(Fs)),Rs==null)throw"certissuer param not cert";(Vs=new Mt).hex=Rs;var Os=Vs.getIssuerHex();(Ls=new Ts).hTLV=Os}if(Ps.certsubj!==void 0){this.type="dn",this.explicit=!0;var Fs,Vs;if(Rs=null,(Fs=Ps.certsubj).match(/^[0-9A-Fa-f]+$/),Fs.indexOf("-----BEGIN ")!=-1&&(Rs=Bs(Fs)),Rs==null)throw"certsubj param not cert";(Vs=new Mt).hex=Rs,Os=Vs.getSubjectHex(),(Ls=new Ts).hTLV=Os}if(Ps.ip!==void 0){this.type="ip",this.explicit=!1;var ks,Ns=Ps.ip,Ds="malformed IP address";if(Ns.match(/^[0-9.]+[.][0-9.]+$/)){if((ks=function($s){$s=($s=($s=$s.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return $s.split(/,/).map(function(Gs,Us,Hs){var zs=parseInt(Gs);if(zs<0||255<zs)throw"integer not in range 0-255";return("00"+zs.toString(16)).slice(-2)}).join("")}catch(Gs){throw"malformed integer array string: "+Gs}}("["+Ns.split(".").join(",")+"]")).length!==8)throw Ds}else if(Ns.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))ks=function($s){var Gs="malformed IPv6 address";if(!$s.match(/^[0-9A-Fa-f:]+$/))throw Gs;var Us=($s=$s.toLowerCase()).split(":").length-1;if(Us<2)throw Gs;var Hs=":".repeat(7-Us+2),zs=($s=$s.replace("::",Hs)).split(":");if(zs.length!=8)throw Gs;for(var js=0;js<8;js++)zs[js]=("0000"+zs[js]).slice(-4);return zs.join("")}(Ns);else{if(!Ns.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Ds;ks=Ns}Ls=new Ss({hex:ks})}if(this.type==null)throw"unsupported type in params="+Ps;this.asn1Obj=new Cs({explicit:this.explicit,tag:ga[this.type],obj:Ls})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.GeneralName,u$2.asn1.ASN1Object),u$2.asn1.x509.GeneralNames=function(ca){u$2.asn1.x509.GeneralNames.superclass.constructor.call(this);var ga=u$2.asn1;this.setByParamArray=function(_s){for(var Ss=0;Ss<_s.length;Ss++){var Ms=new ga.x509.GeneralName(_s[Ss]);this.asn1Array.push(Ms)}},this.getEncodedHex=function(){return new ga.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,ca!==void 0&&this.setByParamArray(ca)},At(u$2.asn1.x509.GeneralNames,u$2.asn1.ASN1Object),u$2.asn1.x509.OID=new function(ca){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(ga){if(this.objCache[ga]!==void 0)return this.objCache[ga];if(this.name2oidList[ga]===void 0)throw"Name of ObjectIdentifier not defined: "+ga;var _s=this.name2oidList[ga],Ss=new u$2.asn1.DERObjectIdentifier({oid:_s});return this.objCache[ga]=Ss,Ss},this.atype2obj=function(ga){if(this.objCache[ga]!==void 0)return this.objCache[ga];var _s;if(ga.match(/^\d+\.\d+\.[0-9.]+$/))_s=ga;else if(this.atype2oidList[ga]!==void 0)_s=this.atype2oidList[ga];else{if(this.name2oidList[ga]===void 0)throw"AttributeType name undefined: "+ga;_s=this.name2oidList[ga]}var Ss=new u$2.asn1.DERObjectIdentifier({oid:_s});return this.objCache[ga]=Ss,Ss}},u$2.asn1.x509.OID.oid2name=function(ca){var ga=u$2.asn1.x509.OID.name2oidList;for(var _s in ga)if(ga[_s]==ca)return _s;return""},u$2.asn1.x509.OID.oid2atype=function(ca){var ga=u$2.asn1.x509.OID.atype2oidList;for(var _s in ga)if(ga[_s]==ca)return _s;return ca},u$2.asn1.x509.OID.name2oid=function(ca){if(ca.match(/^[0-9.]+$/))return ca;var ga=u$2.asn1.x509.OID.name2oidList;return ga[ca]===void 0?"":ga[ca]},u$2.asn1.x509.X509Util={},u$2.asn1.x509.X509Util.newCertPEM=function(ca){var ga=u$2.asn1.x509;return ga.TBSCertificate,new ga.Certificate(ca).getPEM()},X.getPosArrayOfChildrenFromHex=function(ca){return It.getChildIdx(ca,0)},X.getHexValueArrayOfChildrenFromHex=function(ca){var ga,_s=It.getV,Ss=_s(ca,(ga=X.getPosArrayOfChildrenFromHex(ca))[0]),Ms=_s(ca,ga[1]),Cs=_s(ca,ga[2]),Ts=_s(ca,ga[3]),Is=_s(ca,ga[4]),Bs=_s(ca,ga[5]),Ps=_s(ca,ga[6]),Ls=_s(ca,ga[7]),Rs=_s(ca,ga[8]);return(ga=new Array).push(Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs),ga},X.prototype.readPrivateKeyFromPEMString=function(ca){var ga=ut(ca),_s=X.getHexValueArrayOfChildrenFromHex(ga);this.setPrivateEx(_s[1],_s[2],_s[3],_s[4],_s[5],_s[6],_s[7],_s[8])},X.prototype.readPKCS5PrvKeyHex=function(ca){var ga=X.getHexValueArrayOfChildrenFromHex(ca);this.setPrivateEx(ga[1],ga[2],ga[3],ga[4],ga[5],ga[6],ga[7],ga[8])},X.prototype.readPKCS8PrvKeyHex=function(ca){var ga,_s,Ss,Ms,Cs,Ts,Is,Bs,Ps=It,Ls=Ps.getVbyListEx;if(Ps.isASN1HEX(ca)===!1)throw new Error("not ASN.1 hex string");try{ga=Ls(ca,0,[2,0,1],"02"),_s=Ls(ca,0,[2,0,2],"02"),Ss=Ls(ca,0,[2,0,3],"02"),Ms=Ls(ca,0,[2,0,4],"02"),Cs=Ls(ca,0,[2,0,5],"02"),Ts=Ls(ca,0,[2,0,6],"02"),Is=Ls(ca,0,[2,0,7],"02"),Bs=Ls(ca,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(ga,_s,Ss,Ms,Cs,Ts,Is,Bs)},X.prototype.readPKCS5PubKeyHex=function(ca){var ga=It,_s=ga.getV;if(ga.isASN1HEX(ca)===!1)throw new Error("keyHex is not ASN.1 hex string");var Ss=ga.getChildIdx(ca,0);if(Ss.length!==2||ca.substr(Ss[0],2)!=="02"||ca.substr(Ss[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Ms=_s(ca,Ss[0]),Cs=_s(ca,Ss[1]);this.setPublic(Ms,Cs)},X.prototype.readPKCS8PubKeyHex=function(ca){var ga=It;if(ga.isASN1HEX(ca)===!1)throw new Error("not ASN.1 hex string");if(ga.getTLVbyListEx(ca,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var _s=ga.getTLVbyListEx(ca,0,[1,0]);this.readPKCS5PubKeyHex(_s)},X.prototype.readCertPubKeyHex=function(ca,ga){var _s,Ss;(_s=new Mt).readCertHex(ca),Ss=_s.getPublicKeyHex(),this.readPKCS8PubKeyHex(Ss)},X.prototype.sign=function(ca,ga){var _s,Ss=(_s=ca,u$2.crypto.Util.hashString(_s,ga));return this.signWithMessageHash(Ss,ga)},X.prototype.signWithMessageHash=function(ca,ga){var _s=G(u$2.crypto.Util.getPaddedDigestInfoHex(ca,ga,this.n.bitLength()),16);return Ct(this.doPrivate(_s).toString(16),this.n.bitLength())},X.prototype.signPSS=function(ca,ga,_s){var Ss,Ms=(Ss=ot(ca),u$2.crypto.Util.hashHex(Ss,ga));return _s===void 0&&(_s=-1),this.signWithMessageHashPSS(Ms,ga,_s)},X.prototype.signWithMessageHashPSS=function(ca,ga,_s){var Ss,Ms=rt(ca),Cs=Ms.length,Ts=this.n.bitLength()-1,Is=Math.ceil(Ts/8),Bs=function(Ns){return u$2.crypto.Util.hashHex(Ns,ga)};if(_s===-1||_s===void 0)_s=Cs;else if(_s===-2)_s=Is-Cs-2;else if(_s<-2)throw new Error("invalid salt length");if(Is<Cs+_s+2)throw new Error("data too long");var Ps="";_s>0&&(Ps=new Array(_s),new U$1().nextBytes(Ps),Ps=String.fromCharCode.apply(String,Ps));var Ls=rt(Bs(ot("\0\0\0\0\0\0\0\0"+Ms+Ps))),Rs=[];for(Ss=0;Ss<Is-_s-Cs-2;Ss+=1)Rs[Ss]=0;var Os=String.fromCharCode.apply(String,Rs)+""+Ps,Fs=St(Ls,Os.length,Bs),Vs=[];for(Ss=0;Ss<Os.length;Ss+=1)Vs[Ss]=Os.charCodeAt(Ss)^Fs.charCodeAt(Ss);var ks=65280>>8*Is-Ts&255;for(Vs[0]&=~ks,Ss=0;Ss<Cs;Ss++)Vs.push(Ls.charCodeAt(Ss));return Vs.push(188),Ct(this.doPrivate(new c$2(Vs)).toString(16),this.n.bitLength())},X.prototype.verify=function(ca,ga){if((ga=ga.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var _s=G(ga,16),Ss=this.n.bitLength();if(_s.bitLength()>Ss)return!1;var Ms=this.doPublic(_s).toString(16);if(Ms.length+3!=Ss/4)return!1;var Cs=Bt(Ms.replace(/^1f+00/,""));if(Cs.length==0)return!1;var Ts,Is=Cs[0];return Cs[1]==(Ts=ca,u$2.crypto.Util.hashString(Ts,Is))},X.prototype.verifyWithMessageHash=function(ca,ga){if(ga.length!=Math.ceil(this.n.bitLength()/4))return!1;var _s=G(ga,16);if(_s.bitLength()>this.n.bitLength())return 0;var Ss=Bt(this.doPublic(_s).toString(16).replace(/^1f+00/,""));return Ss.length!=0&&(Ss[0],Ss[1]==ca)},X.prototype.verifyPSS=function(ca,ga,_s,Ss){var Ms=function(Cs){return u$2.crypto.Util.hashHex(Cs,_s)}(ot(ca));return Ss===void 0&&(Ss=-1),this.verifyWithMessageHashPSS(Ms,ga,_s,Ss)},X.prototype.verifyWithMessageHashPSS=function(ca,ga,_s,Ss){if(ga.length!=Math.ceil(this.n.bitLength()/4))return!1;var Ms,Cs=new c$2(ga,16),Ts=function($s){return u$2.crypto.Util.hashHex($s,_s)},Is=rt(ca),Bs=Is.length,Ps=this.n.bitLength()-1,Ls=Math.ceil(Ps/8);if(Ss===-1||Ss===void 0)Ss=Bs;else if(Ss===-2)Ss=Ls-Bs-2;else if(Ss<-2)throw new Error("invalid salt length");if(Ls<Bs+Ss+2)throw new Error("data too long");var Rs=this.doPublic(Cs).toByteArray();for(Ms=0;Ms<Rs.length;Ms+=1)Rs[Ms]&=255;for(;Rs.length<Ls;)Rs.unshift(0);if(Rs[Ls-1]!==188)throw new Error("encoded message does not end in 0xbc");var Os=(Rs=String.fromCharCode.apply(String,Rs)).substr(0,Ls-Bs-1),Fs=Rs.substr(Os.length,Bs),Vs=65280>>8*Ls-Ps&255;if((Os.charCodeAt(0)&Vs)!=0)throw new Error("bits beyond keysize not zero");var ks=St(Fs,Os.length,Ts),Ns=[];for(Ms=0;Ms<Os.length;Ms+=1)Ns[Ms]=Os.charCodeAt(Ms)^ks.charCodeAt(Ms);Ns[0]&=~Vs;var Ds=Ls-Bs-Ss-2;for(Ms=0;Ms<Ds;Ms+=1)if(Ns[Ms]!==0)throw new Error("leftmost octets not zero");if(Ns[Ds]!==1)throw new Error("0x01 marker not found");return Fs===rt(Ts(ot("\0\0\0\0\0\0\0\0"+Is+String.fromCharCode.apply(String,Ns.slice(-Ss)))))},X.SALT_LEN_HLEN=-1,X.SALT_LEN_MAX=-2,X.SALT_LEN_RECOVER=-2,Mt.hex2dn=function(ca,ga){ga===void 0&&(ga=0);var _s=new Mt;return It.getTLV(ca,ga),_s.getX500Name(ca).str},Mt.hex2rdn=function(ca,ga){if(ga===void 0&&(ga=0),ca.substr(ga,2)!=="31")throw new Error("malformed RDN");for(var _s=new Array,Ss=It.getChildIdx(ca,ga),Ms=0;Ms<Ss.length;Ms++)_s.push(Mt.hex2attrTypeValue(ca,Ss[Ms]));return(_s=_s.map(function(Cs){return Cs.replace("+","\\+")})).join("+")},Mt.hex2attrTypeValue=function(ca,ga){var _s=It,Ss=_s.getV;if(ga===void 0&&(ga=0),ca.substr(ga,2)!=="30")throw new Error("malformed attribute type and value");var Ms=_s.getChildIdx(ca,ga);Ms.length!==2||ca.substr(Ms[0],2);var Cs=Ss(ca,Ms[0]),Ts=u$2.asn1.ASN1Util.oidHexToInt(Cs);return u$2.asn1.x509.OID.oid2atype(Ts)+"="+rt(Ss(ca,Ms[1]))},Mt.getPublicKeyFromCertHex=function(ca){var ga=new Mt;return ga.readCertHex(ca),ga.getPublicKey()},Mt.getPublicKeyFromCertPEM=function(ca){var ga=new Mt;return ga.readCertPEM(ca),ga.getPublicKey()},Mt.getPublicKeyInfoPropOfCertPEM=function(ca){var ga,_s,Ss=It.getVbyList,Ms={};return Ms.algparam=null,(ga=new Mt).readCertPEM(ca),_s=ga.getPublicKeyHex(),Ms.keyhex=Ss(_s,0,[1],"03").substr(2),Ms.algoid=Ss(_s,0,[0,0],"06"),Ms.algoid==="2a8648ce3d0201"&&(Ms.algparam=Ss(_s,0,[0,1],"06")),Ms},Mt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Tt,Qt=[(Tt=new Mt,Tt.readCertPEM(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Tt)];function Rt(ca,ga){var _s=ca.getIssuerHex();if(_s===ca.getSubjectHex())return ca.verifySignature(ca.getPublicKey());var Ss=function(Ms,Cs){for(var Ts=0,Is=Cs;Ts<Is.length;Ts++){var Bs=Is[Ts];if(Bs.getSubjectHex()===Ms)return Bs}}(_s,ga);return!!Ss&&ca.verifySignature(Ss.getPublicKey())!==!1&&Rt(Ss,ga)}function Dt(ca){return ca.getIssuerHex()!==ca.getSubjectHex()&&Rt(ca,Qt)}(function(ca){var ga=new Mt;typeof ca=="string"?ga.readCertPEM(ca):ga.readCertHex(ca.hex),Dt(ga),Qt.push(ga)})(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var kt,Nt=(kt="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(kt,">$"):Symbol(kt));function Ft(ca){return ca[Nt]||(ca[Nt]={}),ca[Nt]}var Ot=function(){function ca(){}return ca.prototype.hasListener=function(ga){var _s=Ft(this);return _s&&_s[ga]&&_s[ga].length>0},ca.prototype.on=function(ga,_s,Ss){var Ms=this,Cs=Ft(this);return Cs[ga]||(Cs[ga]=[]),Cs[ga].push([_s,Ss||!1]),function(){return Ms.off(ga,_s)}},ca.prototype.once=function(ga,_s){return this.on(ga,_s,!0)},ca.prototype.off=function(ga,_s){if(ga!==void 0){var Ss,Ms=Ft(this);if(Ms[ga]||(Ms[ga]=[]),_s!==void 0){for(var Cs=0;Cs<Ms[ga].length&&Ms[ga][Cs][0]!==_s;Cs++);Cs<Ms[ga].length&&Ms[ga].splice(Cs,1)}else Ms[ga].length=0}else(Ss=this)[Nt]||delete Ss[Nt]},ca.prototype.emit=function(ga){for(var _s=[],Ss=1;Ss<arguments.length;Ss++)_s[Ss-1]=arguments[Ss];for(var Ms=!1,Cs=Ft(this),Ts=Cs[ga]||[],Is=0,Bs=Ts.slice();Is<Bs.length;Is++){var Ps=Bs[Is],Ls=Ps[0],Rs=Ps[1],Os=Rs!==void 0&&Rs,Fs=Ls.apply(void 0,_s);Os&&this.off(ga,Ls),Fs===!1&&(Ms=!0)}return Ms},ca}();function Lt(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga]}var Vt=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),Ht=typeof performance!="undefined"?function(){return Vt+performance.now()}:function(){return Date.now()};function Kt(ca){Object.freeze(ca);var ga=typeof ca=="function",_s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(ca).forEach(function(Ss){!_s.call(ca,Ss)||ga&&(Ss==="caller"||Ss==="callee"||Ss==="arguments")||ca[Ss]===null||typeof ca[Ss]!="object"&&typeof ca[Ss]!="function"||Object.isFrozen(ca[Ss])||Kt(ca[Ss])}),ca}var zt=/^([^.]+)(\.([^.]+))*$/;function qt(ca){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(ca)}function _t(ca,ga){return zt.test(ca)&&zt.test(ga)&&function(_s,Ss){if(_s==="*")return!0;var Ms=_s.split(".").reverse(),Cs=Ss.split(".").reverse();if(Ms.length<=1)return _s===Ss;for(var Ts=0;Ts<Ms.length;Ts++)if(Ms[Ts]!==Cs[Ts])return!1;return!0}(ca,ga)}var jt=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],Ut=Kt(JSON.parse(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/pnyp{|qr;vr/j"))),Gt=function(ca){function ga(_s,Ss,Ms){return ca.call(this,"[NETWORK]: response error(type: ".concat(Ss,", reason: ").concat(Ms,"): ").concat(_s))||this}return e$2.__extends(ga,ca),ga}(Error),Wt=function(ca){function ga(_s,Ss,Ms){var Cs=ca.call(this,"[NETWORK]: response error(type: ".concat(Ss,", status: ").concat(Ms,"): ").concat(_s))||this;return Cs.httpStatus=Ms,Cs}return e$2.__extends(ga,ca),ga}(Error);(function(ca){function ga(_s,Ss){return ca.call(this,"[NETWORK]: request abort(type: ".concat(Ss,"): ").concat(_s))||this}e$2.__extends(ga,ca)})(Error);var Xt=function(ca){function ga(_s,Ss,Ms){return ca.call(this,"[NETWORK]: request timeout(type: ".concat(Ss,", timeout: ").concat(Ms,"ms): ").concat(_s))||this}return e$2.__extends(ga,ca),ga}(Error);function Yt(ca){for(var ga=0,_s=jt;ga<_s.length;ga++){var Ss=_s[ga],Ms=ca.match(Ss);if(Ms)return"jsonp_"+Ms[1]}return null}function Zt(ca){return Yt(ca)!==null}function Jt(ca){return jt.reduce(function(ga,_s){return ga.replace(_s,"")},ca)}function $t(ca){var ga=ca.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/);return ga?ga[2]:location.hostname}(function(ca){function ga(_s,Ss,Ms){return ca.call(this,"[NETWORK]: request forbidden(type: ".concat(Ss,", reason: ").concat(Ms,"): ").concat(_s))||this}e$2.__extends(ga,ca)})(Error);var te=function(ca){function ga(){return ca!==null&&ca.apply(this,arguments)||this}return e$2.__extends(ga,ca),ga}(Ot);function ee(ca,ga,_s,Ss,Ms){return ga===void 0&&(ga={}),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),new Promise(function(Cs,Ts){var Is,Bs=ga.allowHosts?Ut.concat(ga.allowHosts):Ut.slice(),Ps=$t(ca),Ls=Yt(ca);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(Zs){return _t(Zs,location.hostname)}).length===0&&!qt(Ps)&&Bs.filter(function(Zs){return _t(Zs,Ps)}).length===0){var Rs=Ls?"Script":"XMLHttpRequest",Os=new Gt(ca,Rs,"request host(".concat(Ps,") is not allowed"));return Ss(Os),Ts(Os),void((Is=ga.networkSubscribe)===null||Is===void 0||Is.emit("network",ca,Rs,"forbidden",Os.message))}if(Ls){var Fs=window,Vs=null,ks=!1,Ns=Ht(),Ds=document.createElement("script");Fs[Ls]=function(Zs){var Xs,eu,Ys=Ht(),Js=Ys-Ns;if(delete Fs[Ls],Ds.parentNode&&Ds.parentNode.removeChild(Ds),Vs!==null&&(window.clearTimeout(Vs),Vs=null),ks!==!0){if(Zs.indexOf("data:")!==0){var qs=new Wt(ca,"Script",500);return Ss(qs),Ts(qs),void((Xs=ga.networkSubscribe)===null||Xs===void 0||Xs.emit("network",ca,"Script","error",qs.message))}var ru=Zs.split(","),tu=(ru[0].match(/:(.*?);/)||[])[1],nu=ru[1];if(ga.responseType==="arraybuffer"||ga.responseType==="blob"){for(var uu=atob(ru[1]),fu=uu.length,mu=new Uint8Array(fu),vu=0;vu<fu;vu++)mu[vu]=uu.charCodeAt(vu);nu=ga.responseType==="arraybuffer"?mu.buffer:new Blob([mu],{type:tu})}var Eu={body:nu,meta:{source:ca,requestTime:Ns,responseTime:Ys,costs:Js,headers:{}}};_s(Eu),Cs(Eu),(eu=ga.networkSubscribe)===null||eu===void 0||eu.emit("network",ca,"Script","ok",JSON.stringify(Eu.meta)),ks=!0}},Ds.src=ca,document.body.appendChild(Ds),typeof ga.timeout=="number"&&(Vs=window.setTimeout(function(){var Zs;if(Vs=null,ks!==!0){ks=!0;var Xs=new Xt(ca,"Script",ga.timeout||NaN);Ss(Xs),Ts(Xs),(Zs=ga.networkSubscribe)===null||Zs===void 0||Zs.emit("network",ca,"Script","timeout",Xs.message)}},ga.timeout))}else{var $s=Ht(),Gs=!1,Us=new XMLHttpRequest,Hs=function(){Us&&(Us.removeEventListener("timeout",zs,!1),Us.removeEventListener("progress",js,!1),Us.removeEventListener("load",Ws,!1),Us.removeEventListener("error",Qs,!1)),Us=null,Hs=Lt},zs=function(){var Zs;if(Gs!==!0){Gs=!0,Hs();var Xs=new Xt(ca,"XMLHttpRequest",ga.timeout||NaN);Ss(Xs),Ts(Xs),(Zs=ga.networkSubscribe)===null||Zs===void 0||Zs.emit("network",ca,"XMLHttpRequest","timeout",Xs.message)}},js=function(Zs){Gs!==!0&&Zs.lengthComputable&&(Zs.total<=0||Ms(Zs.loaded/Zs.total))},Ws=function(Zs){var Xs;if(Gs!==!0){var eu=this.status;if(eu===0||eu>=200&&eu<400){Gs=!0,Hs();var Ys=Ht(),Js=Ys-$s,qs=function(nu){if(!nu)return{};for(var uu={},fu=nu.trim().split(`
`),mu=0;mu<fu.length;mu++){var vu=fu[mu],Eu=vu.indexOf(":"),hu=vu.slice(0,Eu).trim().toLowerCase(),pu=vu.slice(Eu+1).trim();pu&&(uu[hu]?uu[hu]+=", "+pu:uu[hu]=pu)}return uu}(this.getAllResponseHeaders()),ru=Zs.total,tu={body:this.response,meta:{source:ca,requestTime:$s,responseTime:Ys,costs:Js,headers:qs,size:ru}};_s(tu),Cs(tu),(Xs=ga.networkSubscribe)===null||Xs===void 0||Xs.emit("network",ca,"XMLHttpRequest","ok",JSON.stringify(tu.meta))}else Qs.call(this)}},Qs=function(){var Zs;if(Gs!==!0){Gs=!0,Hs();var Xs=new Wt(ca,"XMLHttpRequest",this.status);Ss(Xs),Ts(Xs),(Zs=ga.networkSubscribe)===null||Zs===void 0||Zs.emit("network",ca,"XMLHttpRequest","error",Xs.message)}};Us.addEventListener("timeout",zs,!1),Us.addEventListener("progress",js,!1),Us.addEventListener("load",Ws,!1),Us.addEventListener("error",Qs,!1),ga.responseType&&(Us.responseType=ga.responseType),typeof ga.timeout=="number"&&(Us.timeout=ga.timeout),Us.open("GET",ca,!0),Us.send(null)}})}var ie={};function ne(ca,ga,_s,Ss,Ms,Cs){return ga===void 0&&(ga={}),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),new Promise(function(Ts,Is){var Bs,Ps=ga.allowHosts?Ut.concat(ga.allowHosts):Ut.slice(),Ls=$t(ca);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(Ns){return _t(Ns,location.hostname)}).length===0&&!qt(Ls)&&Ps.filter(function(Ns){return _t(Ns,Ls)}).length===0){var Rs=new Gt(ca,"Image","request host(".concat(Ls,") is not allowed"));return Ss(Rs),Is(Rs),void((Bs=ga.networkSubscribe)===null||Bs===void 0||Bs.emit("network",ca,"Image","forbidden",Rs.message))}var Os=Cs!=null?Cs:new Image,Fs=Ht(),Vs=!1,ks=null;typeof ga.timeout=="number"&&(ks=window.setTimeout(function(){var Ns;if(Os.onload=Lt,Os.onerror=Lt,ks=null,Vs!==!0){Vs=!0;var Ds=new Xt(ca,"Image",ga.timeout);Ss(Ds),Is(Ds),(Ns=ga.networkSubscribe)===null||Ns===void 0||Ns.emit("network",ca,"Image","timeout",Ds.message)}},ga.timeout)),Os.onload=function(){var Ns;if(Os.onload=Lt,Os.onerror=Lt,ks!==null&&(clearTimeout(ks),ks=null),Vs!==!0){var Ds=Ht();Vs=!0;var $s={body:Os,meta:{headers:{},source:ca,requestTime:Fs,responseTime:Ds,costs:Ds-Fs}};Ms(1),_s($s),Ts($s),(Ns=ga.networkSubscribe)===null||Ns===void 0||Ns.emit("network",ca,"Image","ok",JSON.stringify($s.meta))}},Os.onerror=function(){var Ns;if(Os.onload=Lt,Os.onerror=Lt,ks!==null&&(clearTimeout(ks),ks=null),Vs!==!0){Vs=!0;var Ds=new Wt(ca,"Image",0);Ss(Ds),Is(Ds),(Ns=ga.networkSubscribe)===null||Ns===void 0||Ns.emit("network",ca,"Image","ok",Ds.message)}},Ms(0),Os.src=ca})}var re=function(){if(typeof window!="undefined"){var ca=window;return ca.requestAnimationFrame||ca.mozRequestAnimationFrame||ca.webkitRequestAnimationFrame||ca.msRequestAnimationFrame||function(ga){return setTimeout(ga,16)}}return function(ga){return setTimeout(ga,16)}}(),oe=16,se=function(){function ca(){this.frames=[],this.stoped=!1,this.time=Ht(),this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(ca,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new ca),this.sharedInstance},enumerable:!1,configurable:!0}),ca.getFrameTime=function(){return oe},ca.prototype.loop=function(){if(!this.stoped){var ga=Ht(),_s=ga-this.time;this.time=ga;var Ss=[];oe=_s;for(var Ms=0,Cs=this.frames;Ms<Cs.length;Ms++){var Ts=Cs[Ms];if(Ts.delay>0)Ts.delay=Ts.delay-1;else{try{Ts.callback(ga,_s)}catch(Is){console.error(Is)}Ts.once&&Ss.push(Ts)}}Ss.length>0&&(this.frames=this.frames.filter(function(Is){return Ss.indexOf(Is)===-1})),re(this.loop)}},ca.prototype.remove=function(ga){var _s=this.frames.indexOf(ga);_s>=0&&this.frames.splice(_s,1)},ca.prototype.add=function(ga,_s,Ss,Ms){var Cs=this;_s===void 0&&(_s=!1),Ss===void 0&&(Ss=0),Ms===void 0&&(Ms=5);var Ts={callback:ga,once:_s,delay:Ss,order:Ms};return this.frames.push(Ts),this.frames.sort(function(Is,Bs){return Is.order-Bs.order}),function(){return Cs.remove(Ts)}},ca.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},ca}(),ae=/^https?\:\/\/?([^\/]+)/;function ue(ca,ga){return ca.replace(ae,function(_s,Ss){return _s.slice(0,_s.length-Ss.length)+ga})}var le={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]}};function he(ca,ga){var _s=e$2.__assign(e$2.__assign({},le),ga.mappings),Ss=function(Cs){var Ts=Cs.match(ae);return Ts===null?null:Ts[1]}(ca);if(Ss===null)return ca;var Ms=_s[Ss];return Ms?(/\.basis(\?|$)/.test(ca)&&ga.basisLoaderInitialized!==!0&&(ca=ca.replace(/\.basis(\?|$)/,".jpg$1")),function(Cs,Ts){var Is,Bs=Cs.split("?")[0],Ps=Bs.split(".").pop();if(Ps==="jpeg"&&(Ps="jpg"),Ps!=="png"&&Ps!=="jpg")return Cs;var Ls="";if(Ts.format!==void 0&&Ts.format!==Ps&&(Ls+="/format/".concat(Ts.format)),Ts.cut!==void 0&&(Ls+="/cut/".concat(Ts.cut[2],"x").concat(Ts.cut[3],"x").concat(Ts.cut[0],"x").concat(Ts.cut[1])),Ts.quality!==void 0){var Rs=(Is=Ts.format)!==null&&Is!==void 0?Is:Ps;Rs&&["jpg","webp","tpg","heif","avif"].indexOf(Rs)>=0&&(Ls+="/quality/".concat(Ts.quality))}if(Ts.size!==void 0){var Os=Cs.match(/\/cube_(\d+)\//);(Os?Number(Os[1]):NaN)!==Number(Ts.size)&&(Ls+="/thumbnail/".concat(Ts.size,"x"))}return Ts.sharpen!==void 0&&(Ls+="/sharpen/".concat(Ts.sharpen)),Ls.length&&(Ls="?imageMogr2"+Ls),Bs+Ls}(function(Cs,Ts,Is){var Bs=Ts.split("."),Ps=Bs[0],Ls=Bs.slice(1);if(Ps==="texture")return ue(Cs,Is.texture[0]);if(Ps==="pano"||Ps==="pano_luminance")switch(Ls[0],Ls[1]){case"front":case"left":case"up":return ue(Cs,Is.pano[0]);case"down":case"right":case"back":return ue(Cs,Is.pano[1])}else if(Ps==="pano_tile"||Ps==="pano_tile_luminance"){Ls[0],Ls[1];var Rs=Ls[2],Os=Ls[3],Fs=Ls[4],Vs=Math.pow(2,Number(Rs))*Number(Os)+Number(Fs);if(!isNaN(Vs))return ue(Cs,Is.tile[Vs%2])}return ue(Cs,Is.default[0])}(ca,ga.key,Ms),ga)):ca}var ce=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.floorIndex=0,_s.needsRender=!0,_s}return e$2.__extends(ga,ca),ga}(r$2.Mesh),de=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.needsRender=!0,_s.enableTransparent=!0,_s}return e$2.__extends(ga,ca),ga.prototype.getTransparent=function(){return this.enableTransparent},ga.prototype.setTransparent=function(_s){this.enableTransparent=_s,this.traverse(function(Ss){Ss instanceof ce&&Ss.material.forEach(function(Ms){Ms.transparent=_s})})},ga.prototype.getMaterial=function(){var _s=null;return this.traverse(function(Ss){if(_s===null&&Ss instanceof ce){var Ms=Ss.material[0];_s={pano0:Ms.pano0,pano1:Ms.pano1,modelAlpha:Ms.modelAlpha,progress:Ms.progress,useBlackTransition:Ms.useBlackTransition,perspToOrtho:Ms.perspToOrtho,opacity:Ms.opacity}}}),_s},ga.prototype.setMaterial=function(_s){this.traverse(function(Ss){Ss instanceof ce&&Ss.material.forEach(function(Ms){_s.pano0!==void 0&&(Ms.pano0=_s.pano0),_s.pano1!==void 0&&(Ms.pano1=_s.pano1),_s.modelAlpha!==void 0&&(Ms.modelAlpha=_s.modelAlpha),_s.progress!==void 0&&(Ms.progress=_s.progress),_s.useBlackTransition!==void 0&&(Ms.useBlackTransition=_s.useBlackTransition),_s.perspToOrtho!==void 0&&(Ms.perspToOrtho=_s.perspToOrtho),_s.opacity!==void 0&&(Ms.opacity=_s.opacity)})})},ga.prototype.disposeMaterial=function(){this.traverse(function(_s){if(_s instanceof ce){var Ss=[];_s.material.forEach(function(Ms){var Cs=Ms.uniforms;Object.keys(Cs).map(function(Ts){if(/^pano\d\_/.test(Ts))Cs[Ts].value=null;else{var Is=Cs[Ts].value;Is&&typeof Is.dispose=="function"&&Ss.indexOf(Is)===-1&&(Cs[Ts].value=null,Ss.push(Is))}}),Ms.dispose()}),Ss.forEach(function(Ms){return Ms.dispose()})}})},ga.prototype.disposeGeometry=function(){this.traverse(function(_s){_s instanceof ce&&_s.geometry.dispose()})},ga}(r$2.Group),pe=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.floorIndex=0,_s}return e$2.__extends(ga,ca),ga}(de),Ae=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;=>9-q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{66H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),fe=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6-<-aNb-7-?;=H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-pynz}5oynpx]|tr-7-@;=9-=;=9->;=66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-pynz}5oynpx]|tr-7-@;=-:-?;=9-=;=9->;=66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function ge(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var ve=ge();ve.width=ve.height=8;var me=new r$2.Texture(ve);me.name="EMPTY_TEXTURE";var ye=new r$2.CubeTexture([ve,ve,ve,ve,ve,ve]);ye.name="EMPTY_CUBE_TEXTURE",me.dispose=ye.dispose=function(){};var be=Object.assign({modelAlpha:new r$2.Uniform(0),progress:new r$2.Uniform(0),pano0_map:new r$2.Uniform(ye),pano0_luminanceMap:new r$2.Uniform(null),pano0_matrix:new r$2.Uniform(new r$2.Matrix4),pano1_map:new r$2.Uniform(ye),pano1_luminanceMap:new r$2.Uniform(null),pano1_matrix:new r$2.Uniform(new r$2.Matrix4),modelCenter:new r$2.Uniform(new r$2.Vector3),perspToOrtho:new r$2.Uniform(0)},{exposure:new r$2.Uniform(1),emissive:new r$2.Uniform(new r$2.Color(0)),emissiveMap:new r$2.Uniform(null),specular:new r$2.Uniform(new r$2.Color(1118481)),specularMap:new r$2.Uniform(null),normalMap:new r$2.Uniform(null),bumpMap:new r$2.Uniform(null),shininess:new r$2.Uniform(30)},r$2.UniformsUtils.clone(r$2.UniformsLib.common),r$2.UniformsUtils.clone(r$2.UniformsLib.lights)),we=function(ca){function ga(_s){_s===void 0&&(_s={});var Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls=this;return Ls=ca.call(this,{vertexShader:Ae,fragmentShader:fe,uniforms:r$2.UniformsUtils.clone(be),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1},blending:r$2.NoBlending,lights:!0})||this,Object.defineProperties(Ls,{pano0:{get:function(){return this.uniforms.pano0_map.value===ye?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Rs){Rs===null?(this.uniforms.pano0_map.value=ye,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Rs.map,this.uniforms.pano0_luminanceMap.value=Rs.luminanceMap,this.uniforms.pano0_matrix.value.copy(Rs.matrix));var Os=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Os&&(this.defines.USE_LUMINANCE=Os,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===ye?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Rs){Rs===null?(this.uniforms.pano1_map.value=ye,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Rs.map,this.uniforms.pano1_luminanceMap.value=Rs.luminanceMap,this.uniforms.pano1_matrix.value.copy(Rs.matrix));var Os=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Os&&(this.defines.USE_LUMINANCE=Os,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Rs){this.uniforms.modelAlpha.value=Rs}},progress:{get:function(){return this.uniforms.progress.value},set:function(Rs){this.uniforms.progress.value=Rs}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Rs){this.defines.USE_BLACK_TRANSITION!==Rs&&(this.defines.USE_BLACK_TRANSITION=Rs,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Rs){this.uniforms.opacity.value=Rs;var Os=Rs<1?r$2.NormalBlending:r$2.NoBlending;Os!==this.blending&&(this.blending=Os,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Rs){this.uniforms.perspToOrtho.value=Rs}}}),Ls.pano0=(Ss=_s.pano0)!==null&&Ss!==void 0?Ss:null,Ls.pano1=(Ms=_s.pano1)!==null&&Ms!==void 0?Ms:null,Ls.modelAlpha=(Cs=_s.modelAlpha)!==null&&Cs!==void 0?Cs:1,Ls.progress=(Ts=_s.progress)!==null&&Ts!==void 0?Ts:0,Ls.useBlackTransition=(Is=_s.useBlackTransition)!==null&&Is!==void 0&&Is,Ls.perspToOrtho=(Bs=_s.perspToOrtho)!==null&&Bs!==void 0?Bs:0,Ls.opacity=(Ps=_s.opacity)!==null&&Ps!==void 0?Ps:1,Ls.originOpacity=1,Ls}return e$2.__extends(ga,ca),ga}(r$2.ShaderMaterial),xe=function(ca){function ga(_s){var Ss=_s.preserveDrawingBuffer,Ms=Ss===void 0||Ss,Cs=_s.backgroundColor,Ts=Cs===void 0?1579548:Cs,Is=_s.backgroundAlpha,Bs=Is===void 0?1:Is,Ps=_s.pixelRatio,Ls=Ps===void 0?1:Ps,Rs=_s.antialias,Os=Rs!==void 0&&Rs,Fs=_s.webgl2,Vs=this;if(Fs!==void 0&&Fs){var ks=document.createElement("canvas"),Ns=ks.getContext("webgl2");if(Ns===null)throw new Error("error occurred when getting webgl2 canvas context");Vs=ca.call(this,{antialias:Os,preserveDrawingBuffer:Ms,alpha:Bs<1,canvas:ks,context:Ns})||this}else Vs=ca.call(this,{antialias:Os,preserveDrawingBuffer:Ms,alpha:Bs<1})||this;return Vs.setPixelRatio(Ls),Vs.setClearColor(Ts,Bs),Vs.outputEncoding=r$2.sRGBEncoding,Vs.autoClear=!0,Vs}return e$2.__extends(ga,ca),ga}(r$2.WebGLRenderer),Ee=function(ca){function ga(){return ca!==null&&ca.apply(this,arguments)||this}return e$2.__extends(ga,ca),ga.prototype.add=function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.prototype.add.apply(this,_s)},ga.prototype.remove=function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.prototype.remove.apply(this,_s)},ga}(r$2.Scene),Ie=2*Math.PI,Ce=Math.PI/2;function Se(ca){return ca>0&&ca<=Ie?ca:(ca%Ie+Ie)%Ie}var Be,Me,Pe,Te,Qe=function(ca){function ga(_s){var Ss=ca.call(this,_s,1,.1,1e3)||this;return Ss.pose={longitude:0,latitude:0,fov:_s,distance:0,offset:new r$2.Vector3},Ss.computePose(),Ss}return e$2.__extends(ga,ca),ga.prototype.computePose=function(){var _s=this.getWorldDirection(new r$2.Vector3);return this.pose.longitude=Se(-Math.atan2(_s.x,-_s.z)),this.pose.latitude=-Math.asin(_s.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},ga.prototype.setFromPose=function(_s){var Ss,Ms,Cs,Ts,Is,Bs=Se((Ss=_s.longitude)!==null&&Ss!==void 0?Ss:this.pose.longitude),Ps=Math.max(1e-4-Ce,Math.min(Ce-1e-4,(Ms=_s.latitude)!==null&&Ms!==void 0?Ms:this.pose.latitude)),Ls=(Cs=_s.fov)!==null&&Cs!==void 0?Cs:this.pose.fov,Rs=(Ts=_s.distance)!==null&&Ts!==void 0?Ts:this.pose.distance,Os=(Is=_s.offset)!==null&&Is!==void 0?Is:this.pose.offset,Fs=function(Vs){var ks=Math.abs(Math.cos(Vs.latitude));return new r$2.Vector3(-Math.sin(Vs.longitude)*ks,-Math.sin(Vs.latitude),-Math.cos(Vs.longitude)*ks)}({longitude:Bs,latitude:Ps}).normalize();return this.position.set(0,0,0),this.lookAt(Fs),this.position.add(Os).sub(Fs.clone().setLength(Rs)),this.fov!==Ls&&(this.fov=Ls,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Bs,this.pose.latitude=Ps,this.pose.fov=Ls,this.pose.distance=Rs,this.pose.offset.copy(Os),this},ga.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},ga}(r$2.PerspectiveCamera),Re=function(){function ca(ga,_s,Ss){this.x=ga,this.y=_s,this.z=Ss}return ca.prototype.copy=function(ga){return this.x=ga.x,this.y=ga.y,this.z=ga.z,this},ca.prototype.set=function(ga,_s,Ss){return this.x=ga,this.y=_s,this.z=Ss,this},ca.prototype.fromArray=function(ga,_s){return _s===void 0&&(_s=0),this.x=ga[_s],this.y=ga[_s+1],this.z=ga[_s+2],this},ca.prototype.add=function(ga){return this.x+=ga.x,this.y+=ga.y,this.z+=ga.z,this},ca.prototype.multiplyScalar=function(ga){return this.x*=ga,this.y*=ga,this.z*=ga,this},ca.prototype.subVectors=function(ga,_s){return this.x=ga.x-_s.x,this.y=ga.y-_s.y,this.z=ga.z-_s.z,this},ca.prototype.dot=function(ga){return this.x*ga.x+this.y*ga.y+this.z*ga.z},ca.prototype.cross=function(ga){var _s=this.x,Ss=this.y,Ms=this.z;return this.x=Ss*ga.z-Ms*ga.y,this.y=Ms*ga.x-_s*ga.z,this.z=_s*ga.y-Ss*ga.x,this},ca.prototype.crossVectors=function(ga,_s){var Ss=ga.x,Ms=ga.y,Cs=ga.z,Ts=_s.x,Is=_s.y,Bs=_s.z;return this.x=Ms*Bs-Cs*Is,this.y=Cs*Ts-Ss*Bs,this.z=Ss*Is-Ms*Ts,this},ca.prototype.clone=function(){return new ca(this.x,this.y,this.z)},ca}(),De=function(ca,ga,_s){this.extents=ca,this.startIndex=ga,this.endIndex=_s},ke=function(ca,ga){this.triangle=ca,this.intersectionPoint=ga},Ne=(Be=new Re(0,0,0),Me=new Re(0,0,0),Pe=new Re(0,0,0),Te=new Re(0,0,0),function(ca,ga,_s,Ss,Ms,Cs){Me.subVectors(ga,ca),Pe.subVectors(_s,ca),Te.crossVectors(Me,Pe);var Ts,Is=Ms.dot(Te);if(Is>0){if(Cs)return null;Ts=1}else{if(!(Is<0))return null;Ts=-1,Is=-Is}Be.subVectors(Ss,ca);var Bs=Ts*Ms.dot(Pe.crossVectors(Be,Pe));if(Bs<0)return null;var Ps=Ts*Ms.dot(Me.cross(Be));if(Ps<0||Bs+Ps>Is)return null;var Ls=-Ts*Be.dot(Te);if(Ls<0)return null;var Rs=Ls/Is;return new Re(0,0,0).copy(Ms).multiplyScalar(Rs).add(Ss)}),Fe=function(ca,ga){this.min=ca,this.max=ga};function Oe(ca,ga,_s){var Ss=new Fe(0,0);ga.x>=0?(Ss.min=(_s.extents[0]-ca.x)*ga.x,Ss.max=(_s.extents[3]-ca.x)*ga.x):(Ss.min=(_s.extents[3]-ca.x)*ga.x,Ss.max=(_s.extents[0]-ca.x)*ga.x);var Ms=new Fe(0,0);if(ga.y>=0?(Ms.min=(_s.extents[1]-ca.y)*ga.y,Ms.max=(_s.extents[4]-ca.y)*ga.y):(Ms.min=(_s.extents[4]-ca.y)*ga.y,Ms.max=(_s.extents[1]-ca.y)*ga.y),Ss.min>Ms.max||Ms.min>Ss.max)return!1;Ms.min>Ss.min&&(Ss.min=Ms.min),Ms.max<Ss.max&&(Ss.max=Ms.max);var Cs=new Fe(0,0);return ga.z>=0?(Cs.min=(_s.extents[2]-ca.z)*ga.z,Cs.max=(_s.extents[5]-ca.z)*ga.z):(Cs.min=(_s.extents[5]-ca.z)*ga.z,Cs.max=(_s.extents[2]-ca.z)*ga.z),!(Ss.min>Cs.max||Cs.min>Ss.max)&&(Cs.min>Ss.min&&(Ss.min=Cs.min),Cs.max<Ss.max&&(Ss.max=Cs.max),!(Ss.max<0))}function Le(ca,ga,_s,Ss,Ms){if(_s>=Ss)return[0,0,0,0,0,0];for(var Cs=1/0,Ts=1/0,Is=1/0,Bs=-1/0,Ps=-1/0,Ls=-1/0,Rs=_s,Os=void 0,Fs=void 0;Rs<Ss;Rs++)(Fs=ga[Os=6*ca[Rs]])<Cs&&(Cs=Fs),(Fs=ga[Os+1])<Ts&&(Ts=Fs),(Fs=ga[Os+2])<Is&&(Is=Fs),(Fs=ga[Os+3])>Bs&&(Bs=Fs),(Fs=ga[Os+4])>Ps&&(Ps=Fs),(Fs=ga[Os+5])>Ls&&(Ls=Fs);return[Cs-Ms,Ts-Ms,Is-Ms,Bs+Ms,Ps+Ms,Ls+Ms]}var Ve=function(){function ca(){}return ca.prototype.create=function(ga){return this.trianglesArray=ga,this},ca.prototype.splitNode=function(ga){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var _s=this.trianglesArray,Ss=_s.length/9,Ms=new Uint32Array(Ss),Cs=new Float32Array(6*Ss),Ts=[],Is=1/0,Bs=1/0,Ps=1/0,Ls=-1/0,Rs=-1/0,Os=-1/0,Fs=0,Vs=0,ks=0,Ns=void 0,Ds=void 0,$s=void 0,Gs=void 0,Us=void 0,Hs=void 0,zs=void 0;Fs<Ss;Fs++,Vs+=6,ks+=9)Ms[Fs]=Fs,Ns=Gs=_s[ks],(zs=_s[ks+3])<Ns&&(Ns=zs),zs>Gs&&(Gs=zs),(zs=_s[ks+6])<Ns&&(Ns=zs),zs>Gs&&(Gs=zs),Ds=Us=_s[ks+1],(zs=_s[ks+4])<Ds&&(Ds=zs),zs>Us&&(Us=zs),(zs=_s[ks+7])<Ds&&(Ds=zs),zs>Us&&(Us=zs),$s=Hs=_s[ks+2],(zs=_s[ks+5])<$s&&($s=zs),zs>Hs&&(Hs=zs),(zs=_s[ks+8])<$s&&($s=zs),zs>Hs&&(Hs=zs),Ns<Is&&(Is=Ns),Gs>Ls&&(Ls=Gs),Ds<Bs&&(Bs=Ds),Us>Rs&&(Rs=Us),$s<Ps&&(Ps=$s),Hs>Os&&(Os=Hs),Cs[Vs]=Ns,Cs[Vs+1]=Ds,Cs[Vs+2]=$s,Cs[Vs+3]=Gs,Cs[Vs+4]=Us,Cs[Vs+5]=Hs;var js,Ws=new De([Is,Bs,Ps,Ls,Rs,Os],0,Ss);function Qs(Zs){for(var Xs=Zs.startIndex,eu=Zs.endIndex,Ys=Zs.extents,Js=[Ys[3]-Ys[0],Ys[4]-Ys[1],Ys[5]-Ys[2]],qs=[0,1,2].sort(function(pu,du){return Js[du]-Js[pu]}),ru=0;ru<3;ru++){for(var tu=qs[ru],nu=Ys[tu]+Ys[tu+3],uu=Xs,fu=eu-1,mu=-1,vu=void 0;uu<=fu;)mu===-1?(vu=Ms[uu],Cs[6*vu+tu]+Cs[6*vu+tu+3]<nu?uu++:mu=vu):(vu=Ms[fu],Cs[6*vu+tu]+Cs[6*vu+tu+3]>=nu||(Ms[uu]=vu,Ms[fu]=mu,mu=-1,uu++),fu--);if(uu>Xs&&uu<eu){var Eu=new De(Le(Ms,Cs,Xs,uu,1e-6),Xs,uu);Eu.endIndex-Eu.startIndex>ga&&Ts.push(Eu);var hu=new De(Le(Ms,Cs,uu,eu,1e-6),uu,eu);hu.endIndex-hu.startIndex>ga&&Ts.push(hu),Zs.node0=Eu,Zs.node1=hu,Zs.startIndex=0,Zs.endIndex=0;break}}}for(Ts.push(Ws);js=Ts.pop();)Qs(js);return this.offsetArray=Ms,this.rootNode=Ws,this},ca.prototype.intersectRay=function(ga,_s,Ss){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Ms,Cs=this.trianglesArray,Ts=this.offsetArray,Is=this.rootNode,Bs=[],Ps=[],Ls=new Re(1/_s.x,1/_s.y,1/_s.z),Rs=[Is];Ms=Rs.pop();)if(Oe(ga,Ls,Ms)){Ms.node0&&Rs.push(Ms.node0),Ms.node1&&Rs.push(Ms.node1);for(var Os=Ms.startIndex;Os<Ms.endIndex;Os++)Bs.push(Ts[Os])}for(var Fs=new Re(0,0,0),Vs=new Re(0,0,0),ks=new Re(0,0,0),Ns=new Re(ga.x,ga.y,ga.z),Ds=new Re(_s.x,_s.y,_s.z),$s=(Os=0,void 0),Gs=Bs.length;Os<Gs;Os++){$s=9*Bs[Os],Fs.x=Cs[$s],Fs.y=Cs[$s+1],Fs.z=Cs[$s+2],Vs.x=Cs[$s+3],Vs.y=Cs[$s+3+1],Vs.z=Cs[$s+3+2],ks.x=Cs[$s+6],ks.y=Cs[$s+6+1],ks.z=Cs[$s+6+2];var Us=Ne(Fs,Vs,ks,Ns,Ds,Ss);Us&&Ps.push(new ke([Fs.clone(),Vs.clone(),ks.clone()],Us))}return Ps},ca.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},ca}(),He=null,Ke=!1,ze=[];function qe(ca){if(ca===void 0&&(ca=!1),ca||!Ke)if(He)Ke=!1;else{Ke=!0;var ga=ze.shift();if(ga){try{ga()}catch{}se.shared.add(function(){return qe(!0)},!0,2)}else Ke=!1}}function _e(){He=null,qe()}function je(ca){return new Promise(function(ga,_s){ze.push(function(){try{ga(ca())}catch(Ss){_s(Ss)}}),qe()})}function Ue(){var ca={OutWindow:function(){this._windowSize=0}};return ca.OutWindow.prototype.create=function(ga){this._buffer&&this._windowSize===ga||(this._buffer=[]),this._windowSize=ga,this._pos=0,this._streamPos=0},ca.OutWindow.prototype.flush=function(){var ga=this._pos-this._streamPos;if(ga!==0){for(;ga--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},ca.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},ca.OutWindow.prototype.setStream=function(ga){this.releaseStream(),this._stream=ga},ca.OutWindow.prototype.init=function(ga){ga||(this._streamPos=0,this._pos=0)},ca.OutWindow.prototype.copyBlock=function(ga,_s){var Ss=this._pos-ga-1;for(Ss<0&&(Ss+=this._windowSize);_s--;)Ss>=this._windowSize&&(Ss=0),this._buffer[this._pos++]=this._buffer[Ss++],this._pos>=this._windowSize&&this.flush()},ca.OutWindow.prototype.putByte=function(ga){this._buffer[this._pos++]=ga,this._pos>=this._windowSize&&this.flush()},ca.OutWindow.prototype.getByte=function(ga){var _s=this._pos-ga-1;return _s<0&&(_s+=this._windowSize),this._buffer[_s]},ca.RangeDecoder=function(){},ca.RangeDecoder.prototype.setStream=function(ga){this._stream=ga},ca.RangeDecoder.prototype.releaseStream=function(){this._stream=null},ca.RangeDecoder.prototype.init=function(){var ga=5;for(this._code=0,this._range=-1;ga--;)this._code=this._code<<8|this._stream.readByte()},ca.RangeDecoder.prototype.decodeDirectBits=function(ga){for(var _s,Ss=0,Ms=ga;Ms--;)this._range>>>=1,_s=this._code-this._range>>>31,this._code-=this._range&_s-1,Ss=Ss<<1|1-_s,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Ss},ca.RangeDecoder.prototype.decodeBit=function(ga,_s){var Ss=ga[_s],Ms=(this._range>>>11)*Ss;return(2147483648^this._code)<(2147483648^Ms)?(this._range=Ms,ga[_s]+=2048-Ss>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Ms,this._code-=Ms,ga[_s]-=Ss>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},ca.initBitModels=function(ga,_s){for(;_s--;)ga[_s]=1024},ca.BitTreeDecoder=function(ga){this._models=[],this._numBitLevels=ga},ca.BitTreeDecoder.prototype.init=function(){ca.initBitModels(this._models,1<<this._numBitLevels)},ca.BitTreeDecoder.prototype.decode=function(ga){for(var _s=1,Ss=this._numBitLevels;Ss--;)_s=_s<<1|ga.decodeBit(this._models,_s);return _s-(1<<this._numBitLevels)},ca.BitTreeDecoder.prototype.reverseDecode=function(ga){for(var _s,Ss=1,Ms=0,Cs=0;Cs<this._numBitLevels;++Cs)Ss=Ss<<1|(_s=ga.decodeBit(this._models,Ss)),Ms|=_s<<Cs;return Ms},ca.reverseDecode2=function(ga,_s,Ss,Ms){for(var Cs,Ts=1,Is=0,Bs=0;Bs<Ms;++Bs)Ts=Ts<<1|(Cs=Ss.decodeBit(ga,_s+Ts)),Is|=Cs<<Bs;return Is},ca.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new ca.BitTreeDecoder(8),this._numPosStates=0},ca.LenDecoder.prototype.create=function(ga){for(;this._numPosStates<ga;++this._numPosStates)this._lowCoder[this._numPosStates]=new ca.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new ca.BitTreeDecoder(3)},ca.LenDecoder.prototype.init=function(){var ga=this._numPosStates;for(ca.initBitModels(this._choice,2);ga--;)this._lowCoder[ga].init(),this._midCoder[ga].init();this._highCoder.init()},ca.LenDecoder.prototype.decode=function(ga,_s){return ga.decodeBit(this._choice,0)===0?this._lowCoder[_s].decode(ga):ga.decodeBit(this._choice,1)===0?8+this._midCoder[_s].decode(ga):16+this._highCoder.decode(ga)},ca.Decoder2=function(){this._decoders=[]},ca.Decoder2.prototype.init=function(){ca.initBitModels(this._decoders,768)},ca.Decoder2.prototype.decodeNormal=function(ga){var _s=1;do _s=_s<<1|ga.decodeBit(this._decoders,_s);while(_s<256);return 255&_s},ca.Decoder2.prototype.decodeWithMatchByte=function(ga,_s){var Ss,Ms,Cs=1;do if(Ss=_s>>7&1,_s<<=1,Cs=Cs<<1|(Ms=ga.decodeBit(this._decoders,(1+Ss<<8)+Cs)),Ss!==Ms){for(;Cs<256;)Cs=Cs<<1|ga.decodeBit(this._decoders,Cs);break}while(Cs<256);return 255&Cs},ca.LiteralDecoder=function(){},ca.LiteralDecoder.prototype.create=function(ga,_s){var Ss;if(!this._coders||this._numPrevBits!==_s||this._numPosBits!==ga)for(this._numPosBits=ga,this._posMask=(1<<ga)-1,this._numPrevBits=_s,this._coders=[],Ss=1<<this._numPrevBits+this._numPosBits;Ss--;)this._coders[Ss]=new ca.Decoder2},ca.LiteralDecoder.prototype.init=function(){for(var ga=1<<this._numPrevBits+this._numPosBits;ga--;)this._coders[ga].init()},ca.LiteralDecoder.prototype.getDecoder=function(ga,_s){return this._coders[((ga&this._posMask)<<this._numPrevBits)+((255&_s)>>>8-this._numPrevBits)]},ca.Decoder=function(){this._outWindow=new ca.OutWindow,this._rangeDecoder=new ca.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new ca.BitTreeDecoder(4),this._lenDecoder=new ca.LenDecoder,this._repLenDecoder=new ca.LenDecoder,this._literalDecoder=new ca.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new ca.BitTreeDecoder(6),this._posSlotDecoder[1]=new ca.BitTreeDecoder(6),this._posSlotDecoder[2]=new ca.BitTreeDecoder(6),this._posSlotDecoder[3]=new ca.BitTreeDecoder(6)},ca.Decoder.prototype.setDictionarySize=function(ga){return!(ga<0)&&(this._dictionarySize!==ga&&(this._dictionarySize=ga,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},ca.Decoder.prototype.setLcLpPb=function(ga,_s,Ss){var Ms=1<<Ss;return!(ga>8||_s>4||Ss>4)&&(this._literalDecoder.create(_s,ga),this._lenDecoder.create(Ms),this._repLenDecoder.create(Ms),this._posStateMask=Ms-1,!0)},ca.Decoder.prototype.init=function(){var ga=4;for(this._outWindow.init(!1),ca.initBitModels(this._isMatchDecoders,192),ca.initBitModels(this._isRep0LongDecoders,192),ca.initBitModels(this._isRepDecoders,12),ca.initBitModels(this._isRepG0Decoders,12),ca.initBitModels(this._isRepG1Decoders,12),ca.initBitModels(this._isRepG2Decoders,12),ca.initBitModels(this._posDecoders,114),this._literalDecoder.init();ga--;)this._posSlotDecoder[ga].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},ca.Decoder.prototype.decode=function(ga,_s,Ss){var Ms,Cs,Ts,Is,Bs,Ps,Ls=0,Rs=0,Os=0,Fs=0,Vs=0,ks=0,Ns=0;for(this._rangeDecoder.setStream(ga),this._outWindow.setStream(_s),this.init();Ss<0||ks<Ss;)if(Ms=ks&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Ls<<4)+Ms)===0)Cs=this._literalDecoder.getDecoder(ks++,Ns),Ns=Ls>=7?Cs.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Rs)):Cs.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Ns),Ls=Ls<4?0:Ls-(Ls<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Ls)===1)Ts=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Ls)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Ls<<4)+Ms)===0&&(Ls=Ls<7?9:11,Ts=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Ls)===0?Is=Os:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Ls)===0?Is=Fs:(Is=Vs,Vs=Fs),Fs=Os),Os=Rs,Rs=Is),Ts===0&&(Ts=2+this._repLenDecoder.decode(this._rangeDecoder,Ms),Ls=Ls<7?8:11);else if(Vs=Fs,Fs=Os,Os=Rs,Ts=2+this._lenDecoder.decode(this._rangeDecoder,Ms),Ls=Ls<7?7:10,(Bs=this._posSlotDecoder[Ts<=5?Ts-2:3].decode(this._rangeDecoder))>=4){if(Rs=(2|1&Bs)<<(Ps=(Bs>>1)-1),Bs<14)Rs+=ca.reverseDecode2(this._posDecoders,Rs-Bs-1,this._rangeDecoder,Ps);else if(Rs+=this._rangeDecoder.decodeDirectBits(Ps-4)<<4,(Rs+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(Rs===-1)break;return!1}}else Rs=Bs;if(Rs>=ks||Rs>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Rs,Ts),ks+=Ts,Ns=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},ca.Decoder.prototype.setDecoderProperties=function(ga){var _s,Ss,Ms,Cs,Ts;return!(ga.size<5)&&(Ss=(_s=ga.readByte())%9,Ms=(_s=~~(_s/9))%5,Cs=~~(_s/5),!!this.setLcLpPb(Ss,Ms,Cs)&&(Ts=ga.readByte(),Ts|=ga.readByte()<<8,Ts|=ga.readByte()<<16,Ts+=16777216*ga.readByte(),this.setDictionarySize(Ts)))},ca.decompress=function(ga,_s,Ss,Ms){var Cs=new ca.Decoder;if(!Cs.setDecoderProperties(ga))throw"Incorrect stream properties";if(!Cs.decode(_s,Ss,Ms))throw"Error in data stream";return!0},ca.decompressFile=function(ga,_s){var Ss,Ms=new ca.Decoder;if(!Ms.setDecoderProperties(ga))throw"Incorrect stream properties";if(Ss=ga.readByte(),Ss|=ga.readByte()<<8,Ss|=ga.readByte()<<16,Ss+=16777216*ga.readByte(),ga.readByte(),ga.readByte(),ga.readByte(),ga.readByte(),!Ms.decode(ga,_s,Ss))throw"Error in data stream";return!0},ca}var Ge=Ue(),We=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Ue.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(ca,ga,_s){try{var Ss={data:ga,offset:0,readByte:function(){return this.data[this.offset++]}},Ms=Ss.data.length,Cs={data:[],offset:0,writeByte:function(Bs){var Ps=Math.floor(this.offset/Ms);this.data[Ps]||(this.data[Ps]=new Uint8Array(Ms)),this.data[Ps][this.offset%Ms]=Bs,this.offset++}};ca.decompressFile(Ss,Cs);for(var Ts=new Uint8Array(Cs.offset),Is=0;Is<Cs.offset;Is++)Ts[Is]=Cs.data[Math.floor(Is/Ms)][Is%Ms];_s(null,Ts)}catch(Bs){_s(Bs)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(ca){for(var ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_s=new Uint8Array(256),Ss=0;Ss<ga.length;Ss++)_s[ga.charCodeAt(Ss)]=Ss;var Ms,Cs,Ts,Is,Bs,Ps=.75*ca.length,Ls=ca.length,Rs=0;ca[ca.length-1]==="="&&(Ps--,ca[ca.length-2]==="="&&Ps--);var Os=new ArrayBuffer(Ps),Fs=new Uint8Array(Os);for(Ms=0;Ms<Ls;Ms+=4)Cs=_s[ca.charCodeAt(Ms)],Ts=_s[ca.charCodeAt(Ms+1)],Is=_s[ca.charCodeAt(Ms+2)],Bs=_s[ca.charCodeAt(Ms+3)],Fs[Rs++]=Cs<<2|Ts>>4,Fs[Rs++]=(15&Ts)<<4|Is>>2,Fs[Rs++]=(3&Is)<<6|63&Bs;return Os}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(ca,ga,_s){try{var Ss=new WebAssembly.Memory({initial:16}),Ms=new WebAssembly.Module(ca),Cs=new WebAssembly.Instance(Ms,{env:{memory:Ss,abort:function(){_s(new Error("webAssembly abort"))}}}).exports,Ts=Cs.newU8Array(ga.length);new Uint8Array(Ss.buffer,Ts+24,ga.length).set(ga);var Is=Cs.decode(Ts),Bs=new Uint32Array(Ss.buffer,Is,4),Ps=Bs[0],Ls=Bs[2],Rs=Bs[3];Ps?_s(null,new Uint8Array(Ss.buffer,Rs+24,Ls).slice(0,Ls)):_s(new Error("lzma deocder error"))}catch(Os){_s(Os)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Xe=typeof Worker!="undefined"&&typeof Blob!="undefined",Ye="";if(Xe)try{var Ze=new Blob([We],{type:"text/javascript"});Ye=URL.createObjectURL(Ze)}catch(ca){}var Je=function(){function ca(){var ga=this;if(!Xe)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var _s=this.worker=new Worker(Ye);_s.onmessage=function(Ss){var Ms=Ss.data,Cs=Ms.id,Ts=Ms.result,Is=Ms.error,Bs=ga.getKey(Cs);ga.requests[Bs]&&(Is?ga.requests[Bs](new Error(Is)):ga.requests[Bs](null,Ts),delete ga.requests[Bs])},_s.onerror=function(Ss){return console.error(Ss)}}return ca.prototype.getKey=function(ga){return"key_"+String(ga)},ca.prototype.decompress=function(ga,_s){var Ss=++this.callCounter;this.requests[this.getKey(Ss)]=_s,this.worker.postMessage({type:"decompress",id:Ss,data:ga},[ga.buffer])},ca.prototype.terminate=function(){this.worker.terminate()},ca.support=Xe,ca}();function $e(ca){return Array.prototype.reduce.call(ca,function(ga,_s,Ss){return ga|_s<<8*Ss},0)}function ti(ca){var ga=new Uint8Array(ca),_s=$e(ga.slice(0,4));if(_s>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Ss=[],Ms=[],Cs=4+4*_s,Ts=0;Ts<_s;Ts++)Ms[Ts]=$e(ga.slice(4+4*Ts,8+4*Ts)),Ss[Ts]=Ts===_s-1?ga.subarray(Cs,Cs+Ms[Ts]):ga.slice(Cs,Cs+Ms[Ts]),Cs+=Ms[Ts];return Je.support?function(Is){for(var Bs=[],Ps=Is.length,Ls=function(Os){Bs.push(new Promise(function(Fs,Vs){var ks=new Je;ks.decompress(Is[Os],function(Ns,Ds){if(ks.terminate(),Ns)return Vs(Ns);Fs(Ds)})}))},Rs=0;Rs<Ps;Rs++)Ls(Rs);return Promise.all(Bs)}(Ss):Promise.resolve(function(Is){for(var Bs,Ps=[],Ls=Is.length,Rs=function(Fs){var Vs={data:Is[Fs],offset:0,readByte:function(){return this.data[this.offset++]}},ks=Vs.data.length,Ns={data:[],offset:0,writeByte:function($s){var Gs=Math.floor(this.offset/ks);this.data[Gs]||(this.data[Gs]=new Uint8Array(ks)),this.data[Gs][this.offset%ks]=$s,this.offset++}};Ge.decompressFile(Vs,Ns),Bs=new Uint8Array(Ns.offset);for(var Ds=0;Ds<Ns.offset;Ds++)Bs[Ds]=Ns.data[Math.floor(Ds/ks)][Ds%ks];Ps.push(Bs)},Os=0;Os<Ls;Os++)Rs(Os);return Ps}(Ss))}function ei(ca,ga){for(var _s={},Ss=0,Ms=ga;Ss<Ms.length;Ss++){var Cs=Ms[Ss];Cs in ca&&(_s[Cs]=ca[Cs])}return _s}var ii=!1;try{ii=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(ca){}var ni=[];function ri(){var ca=this.src;this.onerror=this.onload=Lt,this.removeAttribute("src"),/^blob\:/.test(ca)&&URL.revokeObjectURL(ca),this.close=Lt}function oi(){ni.push(this)}function si(){return Object.assign(new Image,{crossOrigin:"",close:ri})}function ai(ca){return new Promise(function(ga,_s){var Ss=si();Ss.onload=function(){Ss.onload=Ss.onerror=Lt,setTimeout(function(){return ga(Ss)},30)},Ss.onerror=function(){var Ms=Ss.src;Ss.onload=Ss.onerror=Lt,Ss.close(),_s(new Error("image load error: ".concat(Ms)))},Ss.src=URL.createObjectURL(ca)})}function ui(ca,ga){if(ga&&(ca.width>ga.width||ca.height>ga.height)){var _s=function(Bs,Ps){var Ls=ni.shift();if(Ls)return Ls.width=Bs,Ls.height=Ps,Ls;if(ii){var Rs=new OffscreenCanvas(Bs,Ps);return Object.assign(Rs,{close:oi})}return Rs=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(Rs,{close:oi})}(Math.min(ca.width,ga.width),Math.min(ca.height,ga.height)),Ss=_s.getContext("2d");Ss.clearRect(0,0,_s.width,_s.height),Ss.drawImage(ca,0,0,_s.width,_s.height),ca.close();var Ms=new r$2.Texture(_s);Ms.needsUpdate=!0,Ms.flipY=!0;var Cs=Ms.dispose;return Ms.dispose=function(){_s.close(),Cs.call(Ms),delete Ms.dispose},Ms}var Ts=new r$2.Texture(ca);Ts.needsUpdate=!0,Ts.minFilter=r$2.LinearFilter,Ts.magFilter=r$2.LinearFilter,Ts.flipY=!0;var Is=Ts.dispose;return Ts.dispose=function(){ca.close(),Is.call(Ts),delete Ts.dispose},Ts}var li=new r$2.WebGLRenderTarget(1,1),hi=new r$2.OrthographicCamera(-1,1,1,-1,0,1),ci=new r$2.BufferGeometry;ci.setAttribute("position",new r$2.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),ci.setAttribute("uv",new r$2.Float32BufferAttribute([0,2,0,0,2,0],2));var di=new r$2.Mesh(ci),pi=new r$2.Scene;pi.add(di);var Ai,fi=new r$2.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),gi=new r$2.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi(ca,ga,_s){return ga.flipY!==void 0&&(ca.flipY=ga.flipY),ga.format!==void 0&&(ca.format=ga.format),ga.encoding!==void 0&&(ca.encoding=ga.encoding),ga.minFilter!==void 0&&(ca.minFilter=ga.minFilter),ga.magFilter!==void 0&&(ca.magFilter=ga.magFilter),_s?new Promise(function(Ss){se.shared.add(function(){try{var Ms=_s.getRenderTarget();_s.setRenderTarget(li),ca instanceof r$2.CubeTexture?(di.material=gi,gi.uniforms.map.value=ca,_s.render(pi,hi),gi.uniforms.map.value=null):(di.material=fi,fi.uniforms.map.value=ca,_s.render(pi,hi),gi.uniforms.map.value=null),_s.setRenderTarget(Ms),Ss(ca)}catch{Ss(ca)}},!0,1)}):Promise.resolve(ca)}var mi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,yi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},bi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},wi=((Ai={})[yi.cTFBC1]=bi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai[yi.cTFBC3]=bi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai),xi=function(){function ca(){}return ca.setTranscoderPath=function(ga){return this.transcoderPath=ga,this},ca.setWorkerLimit=function(ga){return this.workerLimit=ga,this},ca.isInitialized=function(){return this.workerPool.filter(function(ga){return ga._initialized}).length!==0},ca.detectSupport=function(ga){var _s=this.workerConfig;if(_s.astcSupported=!!ga.extensions.get("WEBGL_compressed_texture_astc"),_s.bptcSupported=!!ga.extensions.get("EXT_texture_compression_bptc"),_s.etcSupported=!!ga.extensions.get("WEBGL_compressed_texture_etc1"),_s.dxtSupported=!!ga.extensions.get("WEBGL_compressed_texture_s3tc"),_s.pvrtcSupported=!!ga.extensions.get("WEBGL_compressed_texture_pvrtc")||!!ga.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),_s.astcSupported)_s.format=ca.BASIS_FORMAT.cTFASTC_4x4;else if(_s.bptcSupported)_s.format=ca.BASIS_FORMAT.cTFBC7_M5;else if(_s.dxtSupported)_s.format=ca.BASIS_FORMAT.cTFBC3;else if(_s.pvrtcSupported)_s.format=ca.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!_s.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");_s.format=ca.BASIS_FORMAT.cTFETC1}return this},ca.createTexture=function(ga){var _s,Ss,Ms=this,Cs=ga.byteLength,Ts=this._allocateWorker(Cs).then(function(Is){return _s=Is,Ss=Ms.workerNextTaskID++,new Promise(function(Bs,Ps){_s._callbacks[Ss]={resolve:Bs,reject:Ps},_s.postMessage({type:"transcode",id:Ss,buffer:ga},[ga])})}).then(function(Is){var Bs,Ps=Ms.workerConfig,Ls=Is.width,Rs=Is.height,Os=Is.mipmaps;switch(Is.format){case yi.cTFASTC_4x4:Bs=new r$2.CompressedTexture(Os,Ls,Rs,r$2.RGBA_ASTC_4x4_Format);break;case yi.cTFBC1:case yi.cTFBC3:Bs=new r$2.CompressedTexture(Os,Ls,Rs,wi[Ps.format],r$2.UnsignedByteType);break;case yi.cTFETC1:Bs=new r$2.CompressedTexture(Os,Ls,Rs,r$2.RGB_ETC1_Format);break;case yi.cTFPVRTC1_4_RGB:Bs=new r$2.CompressedTexture(Os,Ls,Rs,r$2.RGB_PVRTC_4BPPV1_Format);break;case yi.cTFPVRTC1_4_RGBA:Bs=new r$2.CompressedTexture(Os,Ls,Rs,r$2.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Bs.minFilter=Os.length===1?r$2.LinearFilter:r$2.LinearMipmapLinearFilter,Bs.magFilter=r$2.LinearFilter,Bs.generateMipmaps=!1,Bs.needsUpdate=!0,Bs});return Ts.catch(function(){return!0}).then(function(){_s&&Ss&&(_s._taskLoad-=Cs,delete _s._callbacks[Ss])}),Ts},ca._initTranscoder=function(){var ga=this;if(!this.transcoderPending){var _s=new r$2.FileLoader;_s.setPath(this.transcoderPath);var Ss=new Promise(function(Ts,Is){_s.load("basis_transcoder.js",Ts,void 0,Is)}),Ms=new r$2.FileLoader;Ms.setPath(this.transcoderPath),Ms.setResponseType("arraybuffer");var Cs=new Promise(function(Ts,Is){Ms.load("basis_transcoder.wasm",Ts,void 0,Is)});this.transcoderPending=Promise.all([Ss,Cs]).then(function(Ts){var Is=Ts[0],Bs=Ts[1],Ps=["/* basis_transcoder.js */",Is,"/* worker */",mi].join(`
`);ga.workerSourceURL=URL.createObjectURL(new Blob([Ps])),ga.transcoderBinary=Bs})}return this.transcoderPending},ca._allocateWorker=function(ga){var _s=this;return this._initTranscoder().then(function(){if(_s.workerPool.length<_s.workerLimit){var Ss=function(Cs){var Ts=new Worker(Cs);return Object.assign(Ts,{_callbacks:{},_initialized:!1,_taskLoad:0})}(_s.workerSourceURL);Ss._callbacks={},Ss._initialized=!1,Ss._taskLoad=0,Ss.postMessage({type:"init",config:_s.workerConfig,transcoderBinary:_s.transcoderBinary}),Ss.onmessage=function(Cs){var Ts=Cs.data;switch(Ts.type){case"initialized":Ss._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Ss._callbacks[Ts.id].resolve(Ts);break;case"error":Ss._callbacks[Ts.id].reject(Ts);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Ts.type,'"'))}},_s.workerPool.push(Ss)}else _s.workerPool.sort(function(Cs,Ts){return Cs._taskLoad>Ts._taskLoad?-1:1});var Ms=_s.workerPool[_s.workerPool.length-1];return Ms._taskLoad+=ga,Ms})},ca.prototype.dispose=function(){for(var ga=0;ga<ca.workerPool.length;ga++)ca.workerPool[ga].terminate();return ca.workerPool.length=0,this},ca.BASIS_FORMAT=yi,ca.DXT_FORMAT=bi,ca.DXT_FORMAT_MAP=wi,ca.transcoderPath="https://vrlab-public.ljcdn.com/release/static/image/release/five/basis/",ca.transcoderBinary=null,ca.transcoderPending=null,ca.workerLimit=1,ca.workerPool=[],ca.workerNextTaskID=1,ca.workerSourceURL="",ca.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},ca}();function Ei(ca){var ga=ca.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return ga?ga[1]:location.protocol}var Ii=function(){function ca(ga){this.timeout=ga.timeout,this.allowHosts=ga.allowHosts,this.networkSubscribe=ga.networkSubscribe}return ca.prototype.setAllowHosts=function(ga){this.allowHosts=ga},ca.prototype.setNetworkSubscribe=function(ga){this.networkSubscribe=ga},ca.prototype.load=function(ga,_s,Ss,Ms,Cs,Ts){var Is;_s===void 0&&(_s={}),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),Cs===void 0&&(Cs=Lt);var Bs=Ei(ga),Ps={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Ls=(Is=_s.viaAjax)!==null&&Is!==void 0&&Is,Rs=Zt(ga),Os=/^https?:$/.test(Bs),Fs=/\.basis$/.test(Jt(ga).split("?")[0]);if(Rs?Ls=!0:Os||(Ls=!1),Ls){if(Fs){var Vs=null,ks="arraybuffer";return _s.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):ee(ga,e$2.__assign(e$2.__assign({},Ps),{responseType:ks}),void 0,void 0,Cs).then(function(Gs){return Vs=Gs.meta,xi.createTexture(Gs.body)}).then(function(Gs){return _s.preInit!==!1?vi(Gs,e$2.__assign({flipY:!1,encoding:r$2.sRGBEncoding},ei(_s,["wrapS","wrapT"])),Ts):Gs}).then(function(Gs){var Us={meta:Vs,body:Gs};return Ss(Us),Us}).catch(function(Gs){return Ms(Gs),Promise.reject(Gs)})}return ks="blob",ee(ga,e$2.__assign(e$2.__assign({},Ps),{responseType:ks}),void 0,void 0,Cs).then(function(Gs){return ai(Gs.body)}).then(function(Gs){return ui(Gs,_s.maxSize)}).then(function(Gs){return _s.preInit!==!1?vi(Gs,e$2.__assign({flipY:!0,encoding:r$2.sRGBEncoding},_s),Ts):Gs}).then(function(Gs){var Us={meta:null,body:Gs};return Ss(Us),Us}).catch(function(Gs){return Ms(Gs),Promise.reject(Gs)})}if(Fs){var Ns=new Error("cannot load basis texture via image");return Ms(Ns),Promise.reject(Ns)}var Ds=null,$s=si();return ne(ga,Ps,void 0,void 0,Cs,$s).then(function(Gs){return Ds=Gs.meta,ui(Gs.body,_s.maxSize)}).then(function(Gs){return _s.preInit!==!1?vi(Gs,e$2.__assign({flipY:!0,encoding:r$2.sRGBEncoding},_s),Ts):Gs}).then(function(Gs){var Us={meta:Ds,body:Gs};return Ss(Us),Us}).catch(function(Gs){return $s.close(),Ms(Gs),Promise.reject(Gs)})},ca.prototype.loadCube=function(ga,_s,Ss,Ms,Cs,Ts){var Is;_s===void 0&&(_s={}),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),Cs===void 0&&(Cs=Lt),Array.isArray(ga)||(ga=[ga.right,ga.left,ga.up,ga.down,ga.front,ga.back]);for(var Bs={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Ps=[],Ls=[0,0,0,0,0,0],Rs=[],Os=function(ks){var Ns=ga[ks],Ds=Ei(Ns),$s=function(Xs){Ls[ks]=Xs,Cs(Ls.reduce(function(eu,Ys){return eu+Ys},0)/6)},Gs=(Is=_s.viaAjax)!==null&&Is!==void 0&&Is,Us=/^https?:$/.test(Ds),Hs=Zt(Ns),zs=/\.basis$/.test(Jt(Ns).split("?")[0]);if(Hs?Gs=!0:Us||(Gs=!1),Gs)if(zs){var js="arraybuffer",Ws=ee(Ns,e$2.__assign(e$2.__assign({},Bs),{responseType:js}),void 0,void 0,$s).then(function(Xs){return Rs[ks]=Xs.meta,xi.createTexture(Xs.body)});Ps.push(Ws)}else js="blob",Ws=ee(Ns,e$2.__assign(e$2.__assign({},Bs),{responseType:js}),void 0,void 0,$s).then(function(Xs){return Rs[ks]=Xs.meta,ai(Xs.body)}),Ps.push(Ws);else{if(zs){var Qs=new Error("cannot load basis texture via image");return Ms(Qs),{value:Promise.reject(Qs)}}var Zs=si();Ws=ne(Ns,Bs,void 0,void 0,$s,Zs).then(function(Xs){return Rs[ks]=Xs.meta,Xs.body}).catch(function(Xs){return Zs.close(),Promise.reject(Xs)}),Ps.push(Ws)}},Fs=0;Fs<6;Fs++){var Vs=Os(Fs);if(typeof Vs=="object")return Vs.value}return Promise.all(Ps).then(function(ks){return ks[0]instanceof r$2.CompressedTexture?function(Ns){var Ds=new r$2.CubeTexture(Ns);Ds.needsUpdate=!0;var $s=Ds.dispose;return Ds.dispose=function(){for(var Gs=0,Us=Ns;Gs<Us.length;Gs++)Us[Gs].dispose();$s.call(Ds),delete Ds.dispose},Ds.isCompressedTexture=!0,Ds.format=Ns[0].format,Ds.minFilter=Ns[0].minFilter,Ds.magFilter=Ns[0].magFilter,Ds}(ks):function(Ns){var Ds=new r$2.CubeTexture(Ns);Ds.needsUpdate=!0,Ds.minFilter=r$2.LinearFilter,Ds.magFilter=r$2.LinearFilter,Ds.flipY=!1;var $s=Ds.dispose;return Ds.dispose=function(){for(var Gs=0,Us=Ns;Gs<Us.length;Gs++)Us[Gs].close();$s.call(Ds),delete Ds.dispose},Ds}(ks)}).then(function(ks){return _s.preInit!==!1?ks.isCompressedTexture?vi(ks,e$2.__assign({flipY:!1,encoding:r$2.sRGBEncoding},ei(_s,["wrapS","wrapT"])),Ts):vi(ks,e$2.__assign({flipY:!1,encoding:r$2.sRGBEncoding},_s),Ts):ks}).then(function(ks){var Ns={body:ks,meta:Rs};return Ss(Ns),Ns}).catch(function(ks){for(var Ns=0,Ds=Ps;Ns<Ds.length;Ns++)Ds[Ns].then(function($s){$s instanceof r$2.Texture?$s.dispose():$s.close()}).catch(Lt);return Ms(ks),Promise.reject(ks)})},ca}();const Ci=o$2.Reader,Si=o$2.util,Bi=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Mi=Bi.Model=(()=>{function ca(ga){if(this.chunks=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.chunks=Si.emptyArray,ca.decode=function(ga,_s){ga instanceof Ci||(ga=Ci.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Bi.Model;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.chunks&&Ms.chunks.length||(Ms.chunks=[]),Ms.chunks.push(Bi.Chunk.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}return Ms},ca})();function Pi(ca){var ga,_s,Ss=new r$2.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);function Ms(Fu){var Uu=Fu.match(/(group|floor)-?(\d+)/);return Uu?parseInt(Uu[2],10):0}function Cs(Fu){var Uu=Fu.match(/(chunk)-?(\d+)/);return Uu?parseInt(Uu[2],10):0}function Ts(Fu){return 1e6*Ms(Fu.name)+1e3*Cs(Fu.name)+function(Uu){var cu=Uu.match(/(sub)-?(\d+)/);return cu?parseInt(cu[2],10):0}(Fu.name)}for(var Is=[],Bs=0,Ps=((ga=ca.chunks)!==null&&ga!==void 0?ga:[]).sort(function(Fu,Uu){return Ts(Fu)-Ts(Uu)});Bs<Ps.length;Bs++){var Ls=Ms((qs=Ps[Bs]).name);Is[Ls]||(Is[Ls]=[]),Is[Ls].push(qs)}for(var Rs=[],Os=0;Os<Is.length;Os++){var Fs=Is[Os];if(Fs){for(var Vs=0,ks=0,Ns=0;Ns<Fs.length;Ns++)ks+=(qs=Fs[Ns]).vertices.xyz.length/3,Vs+=qs.faces.indices.length;for(var Ds=3*ks,$s=2*ks,Gs=3*ks,Us=Vs,Hs=new ArrayBuffer(4*Ds+4*$s+4*Gs+4*Us),zs=new Float32Array(Hs,0,Ds),js=new Float32Array(Hs,4*Ds,$s),Ws=new Float32Array(Hs,4*Ds+4*$s,Gs),Qs=new Uint32Array(Hs,4*Ds+4*$s+4*Gs,Us),Zs=[],Xs=[1/0,1/0,1/0,-1/0,-1/0,-1/0],eu=0,Ys=0,Js=0;Js<Fs.length;Js++){var qs,ru=(qs=Fs[Js]).vertices.xyz,tu=qs.vertices.uvs,nu=qs.faces.indices,uu=ru.length/3,fu=nu.length,mu=[1/0,1/0,1/0,-1/0,-1/0,-1/0];for(Ns=0;Ns<uu;Ns++){var vu=ru[3*Ns],Eu=ru[3*Ns+1],hu=ru[3*Ns+2],pu=Ss.elements,du=1/(pu[3]*vu+pu[7]*Eu+pu[11]*hu+pu[15]),yu=(pu[0]*vu+pu[4]*Eu+pu[8]*hu+pu[12])*du,Su=(pu[1]*vu+pu[5]*Eu+pu[9]*hu+pu[13])*du,Cu=(pu[2]*vu+pu[6]*Eu+pu[10]*hu+pu[14])*du;zs[3*Ys+3*Ns]=yu,zs[3*Ys+3*Ns+1]=Su,zs[3*Ys+3*Ns+2]=Cu,js[2*Ys+2*Ns]=tu[2*Ns],js[2*Ys+2*Ns+1]=tu[2*Ns+1],yu<mu[0]&&(mu[0]=yu),Su<mu[1]&&(mu[1]=Su),Cu<mu[2]&&(mu[2]=Cu),yu>mu[3]&&(mu[3]=yu),Su>mu[4]&&(mu[4]=Su),Cu>mu[5]&&(mu[5]=Cu)}for(mu[0]<Xs[0]&&(Xs[0]=mu[0]),mu[1]<Xs[1]&&(Xs[1]=mu[1]),mu[2]<Xs[2]&&(Xs[2]=mu[2]),mu[3]>Xs[3]&&(Xs[3]=mu[3]),mu[4]>Xs[4]&&(Xs[4]=mu[4]),mu[5]>Xs[5]&&(Xs[5]=mu[5]),Ns=0;Ns<fu;Ns++)Qs[eu+Ns]=Ys+nu[Ns];Zs.push({materialIndex:Js,name:qs.name,chunkName:Cs(qs.name),start:eu,count:qs.faces.indices.length,texture:(_s=qs.texture)!==null&&_s!==void 0?_s:void 0}),Ys+=uu,eu+=fu}for(Ns=0;Ns<Vs;Ns+=3){var bu,Au,Tu,Pu,zu,nl,$u,iu,su,Bu,Iu,Qu,Ou,Du,Zu,qu,Ku,Ru,Gu;bu=3*Qs[Ns],Au=3*Qs[Ns+1],Tu=3*Qs[Ns+2],Pu=zs[bu],zu=zs[bu+1],nl=zs[bu+2],$u=zs[Au],iu=zs[Au+1],su=zs[Au+2],Bu=zs[Tu],Ku=(Qu=zs[Tu+1]-iu)*(qu=nl-su)-(Ou=zs[Tu+2]-su)*(Zu=zu-iu),Ru=Ou*(Du=Pu-$u)-(Iu=Bu-$u)*qu,Gu=Iu*Zu-Qu*Du,Ws[bu]+=Ku,Ws[bu+1]+=Ru,Ws[bu+2]+=Gu,Ws[Au]+=Ku,Ws[Au+1]+=Ru,Ws[Au+2]+=Gu,Ws[Tu]+=Ku,Ws[Tu+1]+=Ru,Ws[Tu+2]+=Gu}Rs.push({floorIndex:Os,vertices:zs,uvs:js,indices:Qs,normals:Ws,groups:Zs,extents:Xs})}}return Rs}function Ti(ca,ga,_s,Ss){var Ms=e$2.__assign({key:"texture.pbm",basisLoaderInitialized:xi.isInitialized()},ei(ga,["format","quality","size","sharpen","mappings"]));return ca=ga.transform?ga.transform(ca,Ms):he(ca,Ms),new Ii({allowHosts:_s,networkSubscribe:Ss}).load(ca,{wrapS:r$2.ClampToEdgeWrapping,wrapT:r$2.ClampToEdgeWrapping,minFilter:r$2.LinearFilter,maxSize:typeof Ms.size=="number"?new r$2.Vector2(Ms.size,Ms.size):void 0,preInit:!0}).then(function(Cs){var Ts=Cs.body;return Ts.needsUpdate=!0,Ts})}function Qi(ca,ga,_s,Ss,Ms,Cs,Ts){Ms===void 0&&(Ms={});for(var Is=[],Bs=0,Ps=Pi(ca);Bs<Ps.length;Bs++){var Ls=Ps[Bs],Rs=Ls.floorIndex,Os=Ls.vertices,Fs=Ls.uvs,Vs=Ls.indices,ks=Ls.normals,Ns=Ls.groups,Ds=Ls.extents,$s=new r$2.Box3;$s.min.x=Ds[0],$s.min.y=Ds[1],$s.min.z=Ds[2],$s.max.x=Ds[3],$s.max.y=Ds[4],$s.max.z=Ds[5];var Gs=new r$2.BufferGeometry;Gs.setAttribute("position",new r$2.BufferAttribute(Os,3)),Gs.setAttribute("uv",new r$2.BufferAttribute(Fs,2)),Gs.setAttribute("normal",new r$2.BufferAttribute(ks,3)),Gs.setIndex(new r$2.BufferAttribute(Vs,1)),Gs.boundingBox=$s,Gs.boundingSphere=$s.getBoundingSphere(new r$2.Sphere);for(var Us=0,Hs=Ns;Us<Hs.length;Us++){var zs=Hs[Us];Gs.addGroup(zs.start,zs.count,zs.materialIndex)}for(var js=[],Ws=function(eu){var Ys=_s[eu.chunkName]||(eu.texture?ga+eu.texture:void 0),Js=new we;if(js.push(Js),Ys){var qs=void 0;Ys in Ms?qs=Ms[Ys]:(qs=Ti(Ys,Ss,Cs,Ts),Ms[Ys]=qs),qs.then(function(ru){Js.uniforms.map.value=ru,Js.uniforms.exposure.value=3.3},function(){Js.defines.USE_MAP=!1,Js.uniforms.color.value=new r$2.Color(16777215)})}else Js.defines.USE_MAP=!1,Js.uniforms.color.value=new r$2.Color(16777215)},Qs=0,Zs=Ns;Qs<Zs.length;Qs++)Ws(zs=Zs[Qs]);var Xs=new ce(Gs,js);Xs.name="model_floor_"+Rs,Xs.floorIndex=Rs,Is.push(Xs)}return{objects:Is,texturePromise:Promise.all(Object.keys(Ms).map(function(eu){return Ms[eu].catch(Lt)})).then(Lt)}}function Ri(ca,ga){return(ca=Object.assign({},ca)).autoResize!==!1&&(ca.size=ga>96?Math.min(ca.size||1/0,100):ga>48?Math.min(ca.size||1/0,200):ga>24?Math.min(ca.size||1/0,400):ga>12?Math.min(ca.size||1/0,800):Math.min(ca.size||1/0,1024)),ca}function Di(ca){return ca.indexOf("//")===0||/^[0-9a-z]+\:\/\//i.test(ca)}Bi.Chunk=(()=>{function ca(ga){if(ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.vertices=null,ca.prototype.faces=null,ca.prototype.name="",ca.prototype.texture="",ca.decode=function(ga,_s){ga instanceof Ci||(ga=Ci.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Bi.Chunk;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.vertices=Bi.Vertices.decode(ga,ga.uint32());break;case 2:Ms.faces=Bi.Faces.decode(ga,ga.uint32());break;case 3:Ms.name=ga.string();break;case 4:Ms.texture=ga.string();break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("vertices"))throw Si.ProtocolError("missing required 'vertices'",{instance:Ms});if(!Ms.hasOwnProperty("faces"))throw Si.ProtocolError("missing required 'faces'",{instance:Ms});if(!Ms.hasOwnProperty("name"))throw Si.ProtocolError("missing required 'name'",{instance:Ms});return Ms},ca})(),Bi.Vertices=(()=>{function ca(ga){if(this.xyz=[],this.uvs=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.xyz=Si.emptyArray,ca.prototype.uvs=Si.emptyArray,ca.decode=function(ga,_s){ga instanceof Ci||(ga=Ci.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Bi.Vertices;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.xyz&&Ms.xyz.length||(Ms.xyz=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.xyz.push(ga.float())}else Ms.xyz.push(ga.float());break;case 2:if(Ms.uvs&&Ms.uvs.length||(Ms.uvs=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.uvs.push(ga.float())}else Ms.uvs.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Bi.Faces=(()=>{function ca(ga){if(this.indices=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.indices=Si.emptyArray,ca.decode=function(ga,_s){ga instanceof Ci||(ga=Ci.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Bi.Faces;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.indices&&Ms.indices.length||(Ms.indices=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.indices.push(ga.uint32())}else Ms.indices.push(ga.uint32());break;default:ga.skipType(7&Cs)}}return Ms},ca})();const ki=o$2.Reader,Ni=o$2.util,Fi=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Oi=Fi.Model=(()=>{function ca(ga){if(this.meshes=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.meshes=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Model;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.meshes&&Ms.meshes.length||(Ms.meshes=[]),Ms.meshes.push(Fi.Mesh.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}return Ms},ca})();function Li(ca){for(var ga=[0,0,0],_s=0;_s<ca.attributes.normal.array.length/9;_s++)ga[0]=ca.attributes.normal.array[9*_s],ga[1]=ca.attributes.normal.array[9*_s+1],ga[2]=ca.attributes.normal.array[9*_s+2],ca.attributes.normal.array[9*_s]=ca.attributes.normal.array[9*_s+6],ca.attributes.normal.array[9*_s+1]=ca.attributes.normal.array[9*_s+7],ca.attributes.normal.array[9*_s+2]=ca.attributes.normal.array[9*_s+8],ca.attributes.normal.array[9*_s+6]=ga[0],ca.attributes.normal.array[9*_s+7]=ga[1],ca.attributes.normal.array[9*_s+8]=ga[2];for(_s=0;_s<ca.attributes.position.array.length/9;_s++)ga[0]=ca.attributes.position.array[9*_s],ga[1]=ca.attributes.position.array[9*_s+1],ga[2]=ca.attributes.position.array[9*_s+2],ca.attributes.position.array[9*_s]=ca.attributes.position.array[9*_s+6],ca.attributes.position.array[9*_s+1]=ca.attributes.position.array[9*_s+7],ca.attributes.position.array[9*_s+2]=ca.attributes.position.array[9*_s+8],ca.attributes.position.array[9*_s+6]=ga[0],ca.attributes.position.array[9*_s+7]=ga[1],ca.attributes.position.array[9*_s+8]=ga[2];for(_s=0;_s<ca.attributes.uv.array.length/6;_s++)ga[0]=ca.attributes.uv.array[6*_s],ga[1]=ca.attributes.uv.array[6*_s+1],ca.attributes.uv.array[6*_s]=ca.attributes.uv.array[6*_s+4],ca.attributes.uv.array[6*_s+1]=ca.attributes.uv.array[6*_s+5],ca.attributes.uv.array[6*_s+4]=ga[0],ca.attributes.uv.array[6*_s+5]=ga[1];ca.attributes.normal.needsUpdate=!0,ca.attributes.position.needsUpdate=!0,ca.attributes.uv.needsUpdate=!0}function Vi(ca){var ga=ca.position,_s=ca.normal,Ss=ca.uv,Ms=ca.uv2,Cs=ca.groups,Ts=new r$2.BufferGeometry;Ts.setAttribute("position",new r$2.BufferAttribute(new Float32Array(ga.array),3)),_s&&Ts.setAttribute("normal",new r$2.BufferAttribute(new Float32Array(_s.array),3)),Ss&&Ts.setAttribute("uv",new r$2.BufferAttribute(new Float32Array(Ss.array),2)),Ms&&Ts.setAttribute("uv2",new r$2.BufferAttribute(new Float32Array(Ms.array),2));for(var Is=0,Bs=Cs;Is<Bs.length;Is++){var Ps=Bs[Is];Ts.addGroup(Ps.start,Ps.count,Ps.materialIndex)}return Ts}function Hi(ca,ga,_s,Ss,Ms,Cs){if(Cs.hasOwnProperty(ca))return Cs[ca];Di(ca=ca.split("?")[0])||(ca=ga+ca),(ca=ca.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(ca="https:"+ca);var Ts=e$2.__assign({key:"texture.dome",size:64,basisLoaderInitialized:xi.isInitialized()},ei(_s,["quality","format","sharpen","mappings"]));return Cs[ca=_s.transform?_s.transform(ca,Ts):he(ca,Ts)]=Ms.load(ca,{wrapS:r$2.RepeatWrapping,wrapT:r$2.RepeatWrapping}).then(function(Is){var Bs=Is.body;return Ss&&Bs.repeat.copy(Ss),Bs.needsUpdate=!0,Bs.updateMatrix(),Bs})}function Ki(ca,ga,_s,Ss,Ms){var Cs=[],Ts=new we,Is=Ts.uniforms;Is.exposure.value=4.3;var Bs=Ts.defines;if(Bs.USE_MAP=!1,Bs.USE_UV=!1,ca.kd&&(Is.diffuse.value=new r$2.Color().fromArray(ca.kd.rgb)),ca.mapkd){var Ps=null;if(ca.mapkdrepeat){var Ls=ca.mapkdrepeat.split(/\s+/).map(function(Vs){return Number(Vs)}),Rs=Ls[0],Os=Ls[1];Ps=new r$2.Vector2(Rs,Os)}Cs.push(Hi(ca.mapkd,ga,_s,Ps,Ss,Ms).then(function(Vs){Bs.USE_MAP=!0,Bs.USE_UV=!0,Is.map.value=Vs,Is.uvTransform.value=Vs.matrix,Ts.needsUpdate=!0}).catch(Lt))}if(ca.ks&&(Is.specular.value=new r$2.Color().fromArray(ca.ks.rgb)),ca.mapks&&Cs.push(Hi(ca.mapks,ga,_s,null,Ss,Ms).then(function(Vs){Is.specularMap.value=Vs}).catch(Lt)),ca.ke&&(Is.emissive.value=new r$2.Color().fromArray(ca.ke.rgb)),ca.mapke&&Cs.push(Hi(ca.mapke,ga,_s,null,Ss,Ms).then(function(Vs){Is.emissiveMap.value=Vs}).catch(Lt)),ca.norm&&Cs.push(Hi(ca.norm,ga,_s,null,Ss,Ms).then(function(Vs){Is.normalMap.value=Vs}).catch(Lt)),ca.mapbump&&Cs.push(Hi(ca.mapbump,ga,_s,null,Ss,Ms).then(function(Vs){Is.bumpMap.value=Vs}).catch(Lt)),ca.bump&&Cs.push(Hi(ca.bump,ga,_s,null,Ss,Ms).then(function(Vs){Is.bumpMap.value=Vs}).catch(Lt)),typeof ca.ns=="number"&&(Is.shininess.value=ca.ns),typeof ca.d=="number"){var Fs=ca.d;Fs>0&&Fs<1&&(Ts.originOpacity=Fs,Ts.opacity=Fs)}return{material:Ts,textureReady:Promise.all(Cs).then(Lt)}}function zi(ca,ga,_s,Ss,Ms){for(var Cs,Ts=[],Is=[],Bs=(Cs=ca,Oi.decode(Cs).meshes),Ps=new Ii({allowHosts:Ss,networkSubscribe:Ms}),Ls=new r$2.Matrix4,Rs=new r$2.Vector3,Os=new r$2.Quaternion,Fs=new r$2.Vector3,Vs={},ks=0,Ns=Bs;ks<Ns.length;ks++){var Ds=Ns[ks],$s=Ds.name,Gs=Ds.chunks,Us=Ds.matrix;if($s!=="Ceiling"&&$s!=="CeilingDrop")for(var Hs=0,zs=Us;Hs<zs.length;Hs++){var js=zs[Hs];Ls.elements=js.elements;var Ws=new pe;Ws.renderOrder=-3;for(var Qs=0;Qs<Gs.length;Qs++){var Zs=Vi(Gs[Qs].geometry);Zs.applyMatrix4(Ls),Ls.decompose(Rs,Os,Fs),Fs.x*Fs.y*Fs.z<0&&Zs.attributes.normal&&Zs.attributes.position&&Zs.attributes.uv&&Li(Zs);for(var Xs=[],eu=0,Ys=Gs[Qs].material;eu<Ys.length;eu++){var Js=Ki(Ys[eu],ga,_s,Ps,Vs),qs=Js.material,ru=Js.textureReady;Is.push(ru),Xs.push(qs)}var tu=new ce(Zs,Xs);tu.name="chunk_"+Qs,Ws.add(tu)}Ws.floorIndex=0,Ws.name=$s,Ts.push(Ws)}}return{objects:Ts,texturePromise:Promise.all(Is).catch(Lt)}}function qi(ca){return ca==null}Fi.Mesh=(()=>{function ca(ga){if(this.chunks=[],this.matrix=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.name="",ca.prototype.chunks=Ni.emptyArray,ca.prototype.matrix=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Mesh;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.name=ga.string();break;case 2:Ms.chunks&&Ms.chunks.length||(Ms.chunks=[]),Ms.chunks.push(Fi.Chunk.decode(ga,ga.uint32()));break;case 3:Ms.matrix&&Ms.matrix.length||(Ms.matrix=[]),Ms.matrix.push(Fi.Matrix.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("name"))throw Ni.ProtocolError("missing required 'name'",{instance:Ms});return Ms},ca})(),Fi.Matrix=(()=>{function ca(ga){if(this.elements=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.elements=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Matrix;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.elements&&Ms.elements.length||(Ms.elements=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.elements.push(ga.float())}else Ms.elements.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Fi.Chunk=(()=>{function ca(ga){if(this.material=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.geometry=null,ca.prototype.material=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Chunk;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 2:Ms.geometry=Fi.Geometry.decode(ga,ga.uint32());break;case 3:Ms.material&&Ms.material.length||(Ms.material=[]),Ms.material.push(Fi.Material.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("geometry"))throw Ni.ProtocolError("missing required 'geometry'",{instance:Ms});return Ms},ca})(),Fi.Geometry=(()=>{function ca(ga){if(this.groups=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.position=null,ca.prototype.uv=null,ca.prototype.uv2=null,ca.prototype.normal=null,ca.prototype.groups=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Geometry;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.position=Fi.Position.decode(ga,ga.uint32());break;case 2:Ms.uv=Fi.UV.decode(ga,ga.uint32());break;case 3:Ms.uv2=Fi.UV.decode(ga,ga.uint32());break;case 4:Ms.normal=Fi.Normal.decode(ga,ga.uint32());break;case 5:Ms.groups&&Ms.groups.length||(Ms.groups=[]),Ms.groups.push(Fi.Group.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("position"))throw Ni.ProtocolError("missing required 'position'",{instance:Ms});if(!Ms.hasOwnProperty("normal"))throw Ni.ProtocolError("missing required 'normal'",{instance:Ms});return Ms},ca})(),Fi.Position=(()=>{function ca(ga){if(this.array=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.array=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Position;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.array.push(ga.float())}else Ms.array.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Fi.UV=(()=>{function ca(ga){if(this.array=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.array=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.UV;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.array.push(ga.float())}else Ms.array.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Fi.Normal=(()=>{function ca(ga){if(this.array=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.array=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Normal;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.array.push(ga.float())}else Ms.array.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Fi.Group=(()=>{function ca(ga){if(ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.start=0,ca.prototype.count=0,ca.prototype.materialIndex=0,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Group;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.start=ga.uint32();break;case 2:Ms.count=ga.uint32();break;case 3:Ms.materialIndex=ga.uint32();break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("start"))throw Ni.ProtocolError("missing required 'start'",{instance:Ms});if(!Ms.hasOwnProperty("count"))throw Ni.ProtocolError("missing required 'count'",{instance:Ms});if(!Ms.hasOwnProperty("materialIndex"))throw Ni.ProtocolError("missing required 'materialIndex'",{instance:Ms});return Ms},ca})(),Fi.Material=(()=>{function ca(ga){if(ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.kd=null,ca.prototype.ks=null,ca.prototype.ke=null,ca.prototype.mapkd="",ca.prototype.mapks="",ca.prototype.mapke="",ca.prototype.norm="",ca.prototype.mapbump="",ca.prototype.bump="",ca.prototype.mapd="",ca.prototype.ns=0,ca.prototype.d=0,ca.prototype.tr=0,ca.prototype.mapkdrepeat="",ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Material;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.kd=Fi.Color.decode(ga,ga.uint32());break;case 2:Ms.ks=Fi.Color.decode(ga,ga.uint32());break;case 3:Ms.ke=Fi.Color.decode(ga,ga.uint32());break;case 4:Ms.mapkd=ga.string();break;case 5:Ms.mapks=ga.string();break;case 6:Ms.mapke=ga.string();break;case 7:Ms.norm=ga.string();break;case 8:Ms.mapbump=ga.string();break;case 9:Ms.bump=ga.string();break;case 10:Ms.mapd=ga.string();break;case 11:Ms.ns=ga.float();break;case 12:Ms.d=ga.float();break;case 13:Ms.tr=ga.float();break;case 14:Ms.mapkdrepeat=ga.string();break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Fi.Color=(()=>{function ca(ga){if(this.rgb=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.rgb=Ni.emptyArray,ca.decode=function(ga,_s){ga instanceof ki||(ga=ki.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Fi.Color;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.rgb&&Ms.rgb.length||(Ms.rgb=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.rgb.push(ga.float())}else Ms.rgb.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})();var _i=function(ca,ga){ga===void 0&&(ga=1e-4),ga=Math.max(ga,Number.EPSILON);for(var _s={},Ss=ca.getIndex(),Ms=ca.getAttribute("position"),Cs=Ss?Ss.count:Ms.count,Ts=0,Is=Object.keys(ca.attributes),Bs={},Ps={},Ls=[],Rs=["getX","getY","getZ","getW"],Os=0,Fs=Is.length;Os<Fs;Os++)Bs[Gs=Is[Os]]=[],(js=ca.morphAttributes[Gs])&&(Ps[Gs]=new Array(js.length).fill().map(function(){return[]}));var Vs=Math.log10(1/ga),ks=Math.pow(10,Vs);for(Os=0;Os<Cs;Os++){var Ns=Ss?Ss.getX(Os):Os,Ds="",$s=0;for(Fs=Is.length;$s<Fs;$s++)for(var Gs=Is[$s],Us=(zs=ca.getAttribute(Gs)).itemSize,Hs=0;Hs<Us;Hs++)Ds+="".concat(~~(zs[Rs[Hs]](Ns)*ks),",");if(Ds in _s)Ls.push(_s[Ds]);else{for($s=0,Fs=Is.length;$s<Fs;$s++){Gs=Is[$s];var zs=ca.getAttribute(Gs),js=ca.morphAttributes[Gs],Ws=(Us=zs.itemSize,Bs[Gs]),Qs=Ps[Gs];for(Hs=0;Hs<Us;Hs++){var Zs=Rs[Hs];if(Ws.push(zs[Zs](Ns)),js)for(var Xs=0,eu=js.length;Xs<eu;Xs++)Qs[Xs].push(js[Xs][Zs](Ns))}}_s[Ds]=Ts,Ls.push(Ts),Ts++}}var Ys=ca.clone();for(Os=0,Fs=Is.length;Os<Fs;Os++){Gs=Is[Os];var Js=ca.getAttribute(Gs),qs=new Js.array.constructor(Bs[Gs]);if(zs=new r$2.BufferAttribute(qs,Js.itemSize,Js.normalized),Ys.setAttribute(Gs,zs),Gs in Ps)for($s=0;$s<Ps[Gs].length;$s++){var ru=ca.morphAttributes[Gs][$s],tu=(qs=new ru.array.constructor(Ps[Gs][$s]),new r$2.BufferAttribute(qs,ru.itemSize,ru.normalized));Ys.morphAttributes[Gs][$s]=tu}}return Ys.setIndex(Ls),Ys};function ji(ca){var ga;return new((ga=r$2.Triangle).bind.apply(ga,e$2.__spreadArray([void 0],ca.map(function(_s){return new r$2.Vector3(_s.x,_s.y,_s.z)}),!1)))}var Ui={at3d:function(ca,ga){for(var _s=Ri(ga.textureOptions,ca.textures.length),Ss={},Ms=0,Cs=ca.textures;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss[Ts]=Ti(Ts,_s,ga.allowHosts,ga.networkSubscribe)}return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(Is){return ti(Is.body)}).then(function(Is){return je(function(){for(var Bs,Ps={chunks:[]},Ls=0,Rs=Is;Ls<Rs.length;Ls++){var Os=Rs[Ls],Fs=Mi.decode(Os);Fs.chunks.length&&(Bs=Ps.chunks).push.apply(Bs,Fs.chunks)}return Ps})}).then(function(Is){return je(function(){return Qi(Is,ca.textureBase,ca.textures.slice(),_s,Ss,ga.allowHosts,ga.networkSubscribe)})})},pbm:function(ca,ga){for(var _s=Ri(ga.textureOptions,ca.textures.length),Ss={},Ms=0,Cs=ca.textures;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss[Ts]=Ti(Ts,_s,ga.allowHosts,ga.networkSubscribe)}return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(Is){return je(function(){var Bs=new Uint8Array(Is.body);return Mi.decode(Bs)})}).then(function(Is){return je(function(){return Qi(Is,ca.textureBase,ca.textures.slice(),_s,Ss,ga.allowHosts,ga.networkSubscribe)})})},dome:function(ca,ga){return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(_s){return zi(new Uint8Array(_s.body),ca.textureBase,ga.textureOptions,ga.allowHosts,ga.networkSubscribe)})},domez:function(ca,ga){return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(_s){return ti(_s.body)}).then(function(_s){var Ss=_s.reduce(function(Ts,Is){return Ts+Is.length},0),Ms=new Uint8Array(Ss),Cs=0;return _s.forEach(function(Ts){Ms.set(Ts,Cs),Cs+=Ts.length}),Ms}).then(function(_s){return zi(_s,ca.textureBase,ga.textureOptions,ga.allowHosts,ga.networkSubscribe)})}},Gi=function(ca){function ga(_s){_s===void 0&&(_s={});var Ss=ca.call(this)||this;return Ss.empty=!0,Ss.name="model",Ss.loaded=!1,Ss.bvhs=Object.assign([],{loaded:!1}),Ss.bounding=new r$2.Box3,Ss.shownFloor=null,Ss.floorLength=0,Ss.networkSubscribe=_s.networkSubscribe,Ss.allowHosts=_s.allowHosts,Ss.renderOrder=-3,Ss}return e$2.__extends(ga,ca),Object.defineProperty(ga.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),ga.prototype.getEdges=function(_s){var Ss;_s===void 0&&(_s=30/180*Math.PI);for(var Ms=Math.cos(_s),Cs=[],Ts=0,Is=this.children;Ts<Is.length;Ts++){var Bs=Is[Ts];if(Bs instanceof ce){for(var Ps={},Ls=["a","b","c"],Rs=_i(Bs.geometry),Os=Rs.getAttribute("position").array,Fs=((Ss=Rs.getIndex())===null||Ss===void 0?void 0:Ss.array)||[],Vs=[],ks=[],Ns=0,Ds=Os.length;Ns<Ds;Ns+=3)Vs.push(new r$2.Vector3(Os[Ns],Os[Ns+1],Os[Ns+2]));for(Ns=0,Ds=Fs.length;Ns<Ds;Ns+=3){var $s=Fs[Ns],Gs=Fs[Ns+1],Us=Fs[Ns+2],Hs=new r$2.Vector3().crossVectors(Vs[Gs].clone().sub(Vs[$s]),Vs[Us].clone().sub(Vs[$s])).normalize();ks.push({a:$s,b:Gs,c:Us,normal:Hs})}for(Ns=0,Ds=ks.length;Ns<Ds;Ns++)for(var zs=ks[Ns],js=0;js<3;js++){var Ws=zs[Ls[js]],Qs=zs[Ls[(js+1)%3]],Zs=[Math.min(Ws,Qs),Math.max(Ws,Qs)];Ps[Xs=Zs[0]+"-"+Zs[1]]===void 0?Ps[Xs]={index1:Zs[0],index2:Zs[1],face1:Ns}:Ps[Xs].face2=Ns}for(var Xs in Ps){var eu=Ps[Xs];if(eu.face2===void 0||ks[eu.face1].normal.dot(ks[eu.face2].normal)<=Ms){var Ys=Vs[eu.index1],Js=Vs[eu.index2];Cs.push(new r$2.Line3(Ys,Js))}}Rs.dispose(),Vs.length=0,ks.length=0}}return Cs},ga.prototype.hasFloors=function(){return this.hasFloors_()},ga.prototype.hasFloors_=function(){var _s=[];return this.traverse(function(Ss){Ss instanceof ce&&(_s[Ss.floorIndex]=!0)}),_s.length},ga.prototype.show=function(){for(var _s,Ss=[],Ms=0;Ms<arguments.length;Ms++)Ss[Ms]=arguments[Ms];var Cs=this.shownFloor,Ts=null,Is=1,Bs=(_s=Ss[1])!==null&&_s!==void 0?_s:.1,Ps=Ss.length!==0;this.shownFloor=Ts=Ps?Ss[0]:null,this.traverse(function(Ls){Ls instanceof ce&&Ls.material.forEach(function(Rs){Ts===null||Ts===Ls.floorIndex?Rs.opacity=Rs.originOpacity*Is:Rs.opacity=Rs.originOpacity*Bs})}),Cs!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},ga.prototype.intersectRaycaster=function(_s,Ss){var Ms=_s.ray,Cs=Ms.origin,Ts=Ms.direction;if(qi(Ss))if(qi(this.shownFloor)){var Is=this.floorLength;Ss=[];for(var Bs=-1;Bs<Is;Bs++)Ss.push(Bs)}else Ss=[this.shownFloor];var Ps=[],Ls=[];Array.isArray(Ss)?Ls.push.apply(Ls,Ss):Ls.push(Ss);for(var Rs=function(ks){var Ns=Os.bvhs&&Os.bvhs[ks];if(Ns){var Ds=new Re(Cs.x,Cs.y,Cs.z),$s=new Re(Ts.x,Ts.y,Ts.z);(Gs=Ns.intersectRay(Ds,$s,!0).map(function(Hs){var zs=Hs.intersectionPoint,js=Hs.triangle,Ws=new r$2.Vector3(zs.x,zs.y,zs.z);return{point:Ws,face:{normal:ji(js).getNormal(new r$2.Vector3)},distance:Cs.distanceTo(Ws)}})).length&&Ps.push.apply(Ps,Gs)}else{var Gs,Us=[];Os.traverse(function(Hs){Hs instanceof ce&&Hs.floorIndex===ks&&Us.push(Hs)}),(Gs=_s.intersectObjects(Us).map(function(Hs){return{face:Hs.face?{normal:Hs.face.normal}:void 0,point:Hs.point,distance:Hs.distance}})).length&&Ps.push.apply(Ps,Gs)}},Os=this,Fs=0,Vs=Ls;Fs<Vs.length;Fs++)Rs(Vs[Fs]);return Ps.filter(function(ks){var Ns=ks.distance;return Ns<=_s.far&&Ns>=_s.near}).sort(function(ks,Ns){return ks.distance-Ns.distance})},ga.prototype.buildBVH=function(){if(!this.bvhs.loaded){var _s=[];this.traverse(function(zs){zs instanceof ce&&(_s[zs.floorIndex]=_s[zs.floorIndex]||[],_s[zs.floorIndex].push(zs.geometry))}),this.bvhs.length=0;for(var Ss=0,Ms=_s;Ss<Ms.length;Ss++){for(var Cs=Ms[Ss],Ts=0,Is=0,Bs=Cs;Is<Bs.length;Is++){var Ps=0;Ps=(Vs=Bs[Is]).index?Vs.index.array.length:Vs.attributes.position.array.length/3,Ts+=3*Math.floor(Ps/3)}for(var Ls=new Float32Array(3*Ts),Rs=0,Os=0,Fs=Cs;Os<Fs.length;Os++){var Vs,ks=(Vs=Fs[Os]).attributes.position.array,Ns=Vs.index?Vs.index.array:null;if(Ns){for(var Ds=3*Math.floor(Ns.length/3),$s=0,Gs=void 0,Us=void 0;$s<Ds;$s++)Gs=3*(Rs+$s),Us=3*Ns[$s],Ls[Gs]=ks[Us],Ls[Gs+1]=ks[Us+1],Ls[Gs+2]=ks[Us+2];Rs+=Ds}else{for(Ds=3*Math.floor(ks.length/3/3),$s=0,Gs=void 0,Us=void 0;$s<Ds;$s++)Us=3*$s,Ls[Gs=3*(Rs+$s)]=ks[Us],Ls[Gs+1]=ks[Us+1],Ls[Gs+2]=ks[Us+2];Rs+=Ds}}var Hs=new Ve().create(Ls).splitNode(50);this.bvhs.push(Hs)}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},ga.prototype.load=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Cs=function(Is,Bs){Bs===void 0&&(Bs=[]);var Ps=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Is);if(!Ps)return"";for(var Ls=0,Rs=String(Ps[1]).trim().split(".").slice(1).reverse();Ls<Rs.length;Ls++){var Os=Rs[Ls],Fs=Bs.indexOf(Os);if(Fs>=0)return Bs[Fs]}return""}(_s.file,Object.keys(Ui)),Ts=Ui[Cs];if(!Ts)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Cs,") does not support."));return this.name=_s.file,Ts(_s,{textureOptions:Ss,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}).then(function(Is){var Bs=Is.objects,Ps=Is.texturePromise;Ms.bounding.makeEmpty();for(var Ls=0,Rs=Bs;Ls<Rs.length;Ls++)(ks=Rs[Ls]).traverse(function(Ns){if(Ns instanceof ce){var Ds=Ns.geometry;Ds.boundingBox||Ds.computeBoundingBox(),Ds.boundingSphere||Ds.computeBoundingSphere(),Ms.bounding.union(Ds.boundingBox)}}),Ms.add(ks);for(var Os=Ms.bounding.getCenter(new r$2.Vector3),Fs=0,Vs=Bs;Fs<Vs.length;Fs++){var ks;(ks=Vs[Fs]).traverse(function(Ns){if(Ns instanceof ce)for(var Ds=0,$s=Ns.material;Ds<$s.length;Ds++)$s[Ds].uniforms.modelCenter.value=Os})}Ms.floorLength=Ms.hasFloors_(),Ms.empty=!1,Ms.loaded=!0,je(function(){Ms.emit("geometryLoaded"),Ps.then(function(){Ms.emit("materialLoaded"),Ms.emit("loaded")})})}).catch(function(Is){return Ms.name="",Ms.emit("error",Is),Promise.reject(Is)})},ga.prototype.dispose=function(){for(this.off(),this.disposeGeometry(),this.disposeMaterial();this.children.length;)this.remove(this.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},ga}(de);Object.assign(Gi.prototype,{on:Ot.prototype.on,once:Ot.prototype.once,off:Ot.prototype.off,emit:Ot.prototype.emit,hasListener:Ot.prototype.hasListener});function Wi(ca,ga,_s){return ca<ga?ga:ca>_s?_s:ca}function Xi(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=[];ca=ca.map(function(Is){return Is.trim()}).filter(function(Is){return Is.length>0&&!/^\/+$/.test(Is)});for(var Ss=0;Ss<ca.length;Ss++){var Ms=Ss===0,Cs=Ss===ca.length-1,Ts=ca[Ss];Ms||(Ts=Ts.replace(/^\/+/,"")),Cs||(Ts=Ts.replace(/\/+$/,"")),_s.push(Ts)}return _s.join("/")}function Yi(ca,ga){if(ca===ga)return!0;if(ca&&ga&&typeof ca=="object"&&typeof ga=="object"){if(ca.constructor!==ga.constructor)return!1;var _s,Ss,Ms;if(Array.isArray(ca)){if((_s=ca.length)!=ga.length)return!1;for(Ss=_s;Ss--!=0;)if(!Yi(ca[Ss],ga[Ss]))return!1;return!0}if(ca.constructor===RegExp)return ca.source===ga.source&&ca.flags===ga.flags;if(ca.valueOf!==Object.prototype.valueOf)return ca.valueOf()===ga.valueOf();if(ca.toString!==Object.prototype.toString)return ca.toString()===ga.toString();if((_s=(Ms=Object.keys(ca)).length)!==Object.keys(ga).length)return!1;for(Ss=_s;Ss--!=0;)if(!Object.prototype.hasOwnProperty.call(ga,Ms[Ss]))return!1;for(Ss=_s;Ss--!=0;){var Cs=Ms[Ss];if(!Yi(ca[Cs],ga[Cs]))return!1}return!0}return ca!=ca&&ga!=ga}function Zi(ca){return typeof ca=="number"}function Ji(ca){return(ca&ca-1)==0&&ca!==0}var $i=function(){return new Error("Invalid input.")},tn=function(){return new Error("Invalid certificate.")},en=function(){return new Error("Invalid signature.")};function nn(ca,ga){ga===void 0&&(ga=!1);var _s=typeof ca;if(_s==="string")return JSON.stringify(ca);if(ca===!0)return"true";if(ca===!1)return"false";if(ca===null)return"null";if(ca instanceof Array){for(var Ss="[",Ms=ca.length-1,Cs=0;Cs<Ms;Cs++)Ss+=nn(ca[Cs],!1)+",";return Ms>-1&&(Ss+=nn(ca[Cs],!1)),Ss+"]"}if(ca instanceof Object){if(typeof ca.toJSON=="function")return nn(ca.toJSON(),ga);var Ts=Object.keys(ca).sort(),Is=Ts.length;for(Ss="",Cs=0;Cs<Is;){var Bs=Ts[Cs],Ps=nn(ca[Bs],!0);Ps!==void 0&&(Cs&&Ss!==""&&(Ss+=","),Ss+=JSON.stringify(Bs)+":"+Ps),Cs++}return"{"+Ss+"}"}switch(_s){case"function":case"undefined":return ga?void 0:null;case"number":return 0;default:return isFinite(ca)?ca:null}}function rn(ca){return String(nn(ca,!1))}function on(ca){var ga,_s,Ss;if(Array.isArray(ca)){var Ms,Cs,Ts=void 0;if(ca.length<=0)return $i();for(var Is=function(Us){var Hs=on(ca[Us]);if(Hs instanceof Error)return{value:Hs};if(Ts){if(Ts!==Hs.issuer)return{value:tn()}}else Ts=Hs.issuer;Ms?Hs.expire.getTime()<Ms.getTime()&&(Ms=Hs.expire):Ms=Hs.expire,Cs=Cs?Cs.filter(function(zs){return Hs.allowHosts.indexOf(zs)!==-1}):Hs.allowHosts},Bs=0;Bs<ca.length;Bs++){var Ps=Is(Bs);if(typeof Ps=="object")return Ps.value}return Kt({issuer:Ts,expire:Ms,allowHosts:Cs})}var Ls=JSON.parse(ca),Rs=typeof location!="undefined"?location.hostname:"",Os=Date.now();if(typeof Ls!="object")return $i();var Fs=new Date(typeof Ls.expire_at=="string"&&/^\d+$/.test(Ls.expire_at)?Number(Ls.expire_at):Ls.expire_at),Vs=Array.isArray(Ls.allow_hosts)?Ls.allow_hosts:[];if(Rs.length===0||qt(Rs)||Ut.filter(function(Us){return _t(Us,Rs)}).length>0){var ks=String((ga=Ls.certificate)!==null&&ga!==void 0?ga:"");if(ks){var Ns=new Mt;return Ns.readCertPEM(ks),Kt({issuer:Ns.getSubjectString(),expire:Fs,allowHosts:Vs})}return Kt({issuer:"none",expire:Fs,allowHosts:Vs})}var Ds=String((_s=Ls.certificate)!==null&&_s!==void 0?_s:"");if(!Ds)return tn();var $s=new Mt;$s.readCertPEM(Ds);var Gs=String((Ss=Ls._signature)!==null&&Ss!==void 0?Ss:"");return Gs?function(Us,Hs,zs){var js=new Mt;if(typeof zs=="string"?js.readCertPEM(zs):js.readCertHex(zs.hex),Dt(js)===!1)return!1;var Ws=new X;return Ws.readCertPubKeyHex(js.hex,6),!!Ws.verify(Us,N$1(Hs))}(rn(function(Us,Hs){for(var zs={},js=0,Ws=Object.keys(Us);js<Ws.length;js++){var Qs=Ws[js];Hs.indexOf(Qs)===-1&&(zs[Qs]=Us[Qs])}return zs}(Ls,["_signature"])),Gs,$s)===!1?en():Os<Fs.getTime()?Vs.filter(function(Us){return _t(Us,Rs)}).length===0?function(Us){return new Error("host(".concat(JSON.stringify(Us),") is not allowed."))}(Rs):Kt({issuer:$s.getSubjectString(),expire:Fs,allowHosts:Vs}):function(Us){return new Error("date(".concat(Us.toString(),") expired."))}(Fs):en()}var sn=new WeakMap,an=function(){function ca(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return ca.prototype.toJSON=function(){return this.raw.works},ca.parse=cn,ca}();function un(ca){return ca==null?"null":Array.isArray(ca)?"array":typeof ca=="object"?"dict":"value"}function ln(ca,ga){var _s=un(ca),Ss=un(ga);if(Ss==="null")return ca;if(Ss==="value")return ga;if(Ss!==_s)return JSON.parse(JSON.stringify(ga));if(Ss==="array")for(var Ms=0;Ms<ga.length;Ms++)ca[Ms]=ln(ca[Ms],ga[Ms]);else if(Ss==="dict")for(var Cs in ga)ca[Cs]=ln(ca[Cs],ga[Cs]);return ca}function hn(ca,ga,_s){for(var Ss,Ms=JSON.stringify(ga),Cs=[],Ts=0,Is=[].concat(ca);Ts<Is.length;Ts++){var Bs=Is[Ts];Bs instanceof an?Cs.push.apply(Cs,Bs.raw.works):typeof Bs=="string"?Cs.push(Bs):Cs.push(JSON.stringify(Bs))}var Ps=on(Cs);if(Ps instanceof Error)return Ps;ga=JSON.parse(Ms),ca=Cs.map(function($u){return JSON.parse($u)}).reduce(function($u,iu){return ln($u,iu)});var Ls=new an;if(Ps instanceof Error)return Ps;Ls.issuer=Ps.issuer,Ls.expire=Ps.expire,Ls.allowHosts=Ps.allowHosts,Ls.raw={works:Cs,options:Ms};var Rs=(Ss=ca.base_url)!==null&&Ss!==void 0?Ss:"";Rs&&Rs[Rs.length-1]!=="/"&&(Rs+="/");var Os=function($u,iu){return $u.indexOf(iu)===0},Fs=function($u,iu){var su,Bu=$u;if(ga.jsonp===!0){Bu=$u.replace(/([\?\#].*)?$/i,"");var Iu=Pt("".concat(Bu)).slice(0,7);Bu="".concat(Bu,".").concat(Iu,".jsonp")}if(ga.shortPath===!0){var Qu=Bu.replace(Rs,"").split("."),Ou=(su=Qu.shift())!==null&&su!==void 0?su:"",Du=Qu.join(".");Bu=Xi(Rs,Pt(Ou))+(Du?"."+Du:"")}var Zu=Bu.replace(Rs,"");return ga.baseURL&&(Bu=Xi(ga.baseURL,Zu)),_s&&_s($u,Bu,Zu,iu),Bu},Vs=function($u,iu){var su,Bu,Iu,Qu,Ou,Du,Zu=$u;if(!Di($u)){var qu=(Du=(Qu=(Bu=(su=ca.panorama)===null||su===void 0?void 0:su.pano_high_cube_base_url)!==null&&Bu!==void 0?Bu:(Iu=ca.panorama)===null||Iu===void 0?void 0:Iu.pano_cube_base_url)!==null&&Qu!==void 0?Qu:(Ou=ca.panorama)===null||Ou===void 0?void 0:Ou.base_url)!==null&&Du!==void 0?Du:"";qu&&(qu=Xi(qu,String(iu))),Zu=Xi(qu,Zu)}return Di(Zu)||(Zu=Xi(Rs,Zu)),Os(Zu,Rs)||console.warn("".concat(Zu," is not start with base_url(").concat(Rs,").")),Fs(Zu,"panorama")},ks=function($u){var iu=$u;return Di(iu)||(iu=Xi(Rs,$u)),Os(iu,Rs)||console.warn("".concat(iu," is not start with base_url(").concat(Rs,").")),Fs(iu,"model")},Ns=function($u,iu){iu===void 0&&(iu="");var su=$u;return Di(su)||(su=Xi(iu,su)),Di(su)||(su=Xi(Rs,su)),Os(su,Rs)||console.warn("".concat(su," is not start with base_url(").concat(Rs,").")),Fs(su,"texture")};if(Ps instanceof Error||(Ls.workCode=String(ca.work_code||ca.code||ca.vr_code||ca.workCode),Ls.name=String(ca.name),Ps instanceof Error))return Ps;if(ca.model){var Ds={bvh:!0,async:!1,textureBase:"",textures:[]};typeof ga.modelBvh=="boolean"?Ds.bvh=ga.modelBvh:typeof ca.model.bvh=="boolean"?Ds.bvh=ca.model.bvh:typeof ca.bvh=="boolean"&&(Ds.bvh=ca.bvh),ca.model.file?Ds.file=ks(ca.model.file):ca.model.file_url&&(Ds.file=ks(ca.model.file_url)),ca.model.textureBase?Ds.textureBase=ca.model.textureBase:ca.model.material_base_url&&(Ds.textureBase=ca.model.material_base_url),Array.isArray(ca.model.textures)?Ds.textures=ca.model.textures.map(function($u){return Ns($u,Ds.textureBase)}):Array.isArray(ca.model.material_textures)&&(Ds.textures=ca.model.material_textures.map(function($u){return Ns($u,Ds.textureBase)})),Ds.file&&(Ls.model=Ds)}if(Ps instanceof Error)return Ps;if(ca.observers&&Array.isArray(ca.observers)){var $s=[];ca.panorama&&(Array.isArray(ca.panorama)?$s=ca.panorama:Array.isArray(ca.panorama.list)?$s=ca.panorama.list:Array.isArray(ca.panorama.info)&&($s=ca.panorama.info));for(var Gs=0;Gs<ca.observers.length;Gs++){var Us={},Hs=ca.observers[Gs];if(!Hs)break;var zs=$s[Gs];if(!zs)break;Hs=Object.assign({},Hs,zs,{active:Hs.active!==!1&&zs.active!==!1}),Us.panoIndex=Gs,Us.active=Hs.active!==!1,Us.loadable=Hs.loadable===!0,Us.images={up:Vs(Hs.images?Hs.images.up:Hs.up,Gs),down:Vs(Hs.images?Hs.images.down:Hs.down,Gs),right:Vs(Hs.images?Hs.images.right:Hs.right,Gs),left:Vs(Hs.images?Hs.images.left:Hs.left,Gs),front:Vs(Hs.images?Hs.images.front:Hs.front,Gs),back:Vs(Hs.images?Hs.images.back:Hs.back,Gs)};var js=Hs.images?Hs.images.depth:Hs.depth;js&&(Us.images.depth=Vs(js,Gs));var Ws=Hs.images?Hs.images.luminance:Hs.luminance;Ws&&(Us.images.luminance={up:Vs(Ws.up,Gs),down:Vs(Ws.down,Gs),right:Vs(Ws.right,Gs),left:Vs(Ws.left,Gs),front:Vs(Ws.front,Gs),back:Vs(Ws.back,Gs)});var Qs=Hs.images?Hs.images.tiles:Hs.tiles;if(Qs){for(var Zs=[],Xs=function($u){var iu=$u.match(/\/cube_(\d+)\//);if(iu){var su=Number(iu[1]);if(Ji(su))return su}return!1},eu=function($u,iu){return $u.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(iu,"/")})},Ys=0,Js=Qs;Ys<Js.length;Ys++){var qs=Js[Ys];if(typeof qs=="number"){var ru=qs,tu=Xs(Us.images.front);if(tu===!1)continue;if((hu=Math.max(tu,512*Math.pow(2,ru)))>2048){var nu=eu(Us.images.up,hu),uu=eu(Us.images.down,hu),fu=eu(Us.images.right,hu),mu=eu(Us.images.left,hu),vu=eu(Us.images.front,hu),Eu=eu(Us.images.back,hu);Zs.push({level:ru,size:hu,up:nu,down:uu,right:fu,left:mu,front:vu,back:Eu})}else nu=Us.images.up,uu=Us.images.down,fu=Us.images.right,mu=Us.images.left,vu=Us.images.front,Eu=Us.images.back,Zs.push({level:ru,size:hu,up:nu,down:uu,right:fu,left:mu,front:vu,back:Eu})}else{var hu;if(typeof(ru=qs.level)!="number"||typeof(hu=qs.size)!="number")continue;nu=Vs(qs.up,Gs),uu=Vs(qs.down,Gs),fu=Vs(qs.right,Gs),mu=Vs(qs.left,Gs),vu=Vs(qs.front,Gs),Eu=Vs(qs.back,Gs),Zs.push({level:ru,size:hu,up:nu,down:uu,right:fu,left:mu,front:vu,back:Eu})}}Zs.sort(function($u,iu){return $u.level-iu.level}),Us.images.tiles=Zs}if(Hs.position instanceof r$2.Vector3)Us.position=Hs.position.clone();else{if(!Array.isArray(Hs.position))break;Us.position=new r$2.Vector3().fromArray(Hs.position)}if(Hs.standingPosition instanceof r$2.Vector3)Us.standingPosition=Hs.standingPosition.clone();else if(Array.isArray(Hs.standingPosition))Us.standingPosition=new r$2.Vector3().fromArray(Hs.standingPosition);else if(Hs.standing_position instanceof r$2.Vector3)Us.standingPosition=Hs.standing_position.clone();else{if(!Array.isArray(Hs.standing_position))break;Us.standingPosition=new r$2.Vector3().fromArray(Hs.standing_position)}if(Hs.quaternion instanceof r$2.Quaternion)Us.quaternion=Hs.quaternion.clone();else if(Array.isArray(Hs.quaternion))Us.quaternion=new r$2.Quaternion().fromArray(Hs.quaternion);else{if(!Hs.quaternion)break;var pu=Hs.quaternion,du=pu.x,yu=pu.y,Su=pu.z,Cu=pu.w;Us.quaternion=new r$2.Quaternion(du,yu,Su,Cu)}if(Array.isArray(Hs.accessibleNodes)?Us.accessibleNodes=Hs.accessibleNodes.slice():Array.isArray(Hs.accessible_nodes)&&(Us.accessibleNodes=Hs.accessible_nodes.slice()),Array.isArray(Hs.visibleNodes)?Us.visibleNodes=Hs.visibleNodes.slice():Array.isArray(Hs.visible_nodes)&&(Us.visibleNodes=Hs.visible_nodes.slice()),Zi(Hs.floorIndex)?Us.floorIndex=Hs.floorIndex:Zi(Hs.floor_index)?Us.floorIndex=Hs.floor_index:Us.floorIndex=0,Hs.video){var bu={};typeof Hs.video.source=="string"&&(bu.source=Hs.video.source),Hs.video.matrix instanceof r$2.Matrix4?bu.matrix=Hs.video.matrix.clone():Array.isArray(Hs.video.matrix)&&(bu.matrix=new r$2.Matrix4().fromArray(Hs.video.matrix)),Hs.video.size instanceof r$2.Vector2?bu.size=Hs.video.size.clone():Array.isArray(Hs.video.size)&&(bu.size=new r$2.Vector2().fromArray(Hs.video.size)),bu.source&&bu.matrix&&bu.size&&(Us.video=bu)}Ls.observers[Gs]=Us}}if(Ps instanceof Error)return Ps;for(var Au=0,Tu=Ls.observers;Au<Tu.length;Au++){if((Us=Tu[Au]).accessibleNodes)Us.accessibleNodes=Us.accessibleNodes.filter(function($u){return $u<Ls.observers.length});else{Us.accessibleNodes=[];for(var Pu=0;Pu<Ls.observers.length;Pu++)Ls.observers[Pu]!==Us&&Us.accessibleNodes.push(Pu)}if(Us.visibleNodes)Us.visibleNodes=Us.visibleNodes.filter(function($u){return $u<Ls.observers.length});else for(Us.visibleNodes=[],Pu=0;Pu<Ls.observers.length;Pu++)Ls.observers[Pu]!==Us&&Us.visibleNodes.push(Pu)}if(Ps instanceof Error)return Ps;if(ca.initial)if(ca.initial.mode!=="Floorplan"&&ca.initial.mode!=="Topview"&&ca.initial.mode!=="Panorama"&&ca.initial.mode!=="VRPanorama"&&ca.initial.mode!=="Model"&&ca.initial.mode!=="DepthPanorama"||(Ls.initial.mode=ca.initial.mode),Zi(ca.initial.latitude)&&(Ls.initial.latitude=ca.initial.latitude),Zi(ca.initial.longitude)?Ls.initial.longitude=ca.initial.longitude:Zi(ca.initial.heading)&&(Ls.initial.longitude=-(360*(ca.initial.heading-.25)+90)/180*Math.PI),Zi(ca.initial.fov)&&(Ls.initial.fov=ca.initial.fov),Zi(ca.initial.panoIndex)){var zu=Ls.observers.length>0?Ls.observers.length-1:0;Ls.initial.panoIndex=Wi(ca.initial.panoIndex,0,zu)}else Zi(ca.initial.pano_index)?(zu=Ls.observers.length>0?Ls.observers.length-1:0,Ls.initial.panoIndex=Wi(ca.initial.pano_index,0,zu)):Zi(ca.initial.pano)&&(zu=Ls.observers.length>0?Ls.observers.length-1:0,Ls.initial.panoIndex=Wi(ca.initial.pano,0,zu));if(Ps instanceof Error)return Ps;var nl=Kt(Ls);return sn.set(nl,{works:Cs,options:Ms}),nl}function cn(ca,ga,_s){typeof ca=="string"&&ca.trim()[0]==="{"&&(ca=JSON.parse(ca));var Ss=sn.get(ca);if(Ss){if(ga&&!Yi(JSON.parse(Ss.options),ga))throw new Error("[PARSE FAILED]: work is parsed with different options.");return ca}var Ms=hn(ca,ga!=null?ga:{},_s);if(Ms instanceof Error)throw new Error("[PARSE FAILED]: "+Ms.message);return Ms}function dn(ca,ga,_s){return ca+(ga-ca)*_s}function pn(ca,ga){var _s=ga[1]-ga[0];return ca<ga[0]?pn(ca+_s,ga):ca>=ga[1]?pn(ca-_s,ga):ca}function An(ca,ga,_s,Ss){return Ss?function(Ms,Cs,Ts,Is){var Bs=Is[1]-Is[0];return Ms=pn(Ms,Is),dn((Cs=pn(Cs,Is))-Ms>Bs/2?Ms+Bs:Ms-Cs>Bs/2?Ms-Bs:Ms,Cs,Ts)}(ca,ga,_s,Ss):dn(ca,ga,_s)}var fn=function(){function ca(ga){for(var _s in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=Ht(),this.startVelocity=0,this.duration=0,this.keyframes=[],ga){var Ss=ga[_s];typeof Ss=="number"?(this.value[_s]=Ss,this.config[_s]={circle:!1}):(this.value[_s]=Ss.value,this.config[_s]={circle:Ss.circle})}this.keyframes=[{progress:0,value:e$2.__assign({},this.value)},{progress:1,value:e$2.__assign({},this.value)}]}return ca.prototype.getProgress=function(ga){var _s=ga-this.startTime;return _s<0?0:_s>=this.duration?1:1-function(Ss,Ms,Cs,Ts){var Is=(Ms*Cs+2*Ss)/Math.pow(Cs,3),Bs=-(2*Ms*Cs+3*Ss)/Math.pow(Cs,2),Ps=Ms,Ls=Ss;return Is*Math.pow(Ts,3)+Bs*Math.pow(Ts,2)+Ps*Ts+Ls}(1,this.startVelocity,this.duration,_s)},ca.prototype.getValue=function(ga){for(var _s=1;_s<this.keyframes.length;_s++)if(this.keyframes[_s].progress>ga){var Ss=this.keyframes[_s-1],Ms=this.keyframes[_s],Cs={};for(var Ts in this.config){var Is=(ga-Ss.progress)/(Ms.progress-Ss.progress);Cs[Ts]=An(Ss.value[Ts],Ms.value[Ts],Is,this.config[Ts].circle)}return Cs}return e$2.__assign({},this.keyframes[this.keyframes.length-1].value)},ca.prototype.getProgressVelocity=function(ga){var _s=ga-this.startTime;return _s>=this.duration?0:function(Ss,Ms,Cs,Ts){var Is=(Ms*Cs+2*Ss)/Math.pow(Cs,3),Bs=-(2*Ms*Cs+3*Ss)/Math.pow(Cs,2),Ps=Ms;return 3*Is*Math.pow(Ts,2)+2*Bs*Ts+Ps}(1,this.startVelocity,this.duration,_s)},ca.prototype.update=function(ga){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(ga))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},ca.prototype.getKeyFrameSegment=function(ga){for(var _s=this.getProgress(ga),Ss=1;Ss<this.keyframes.length;Ss++)if(this.keyframes[Ss].progress>_s)return[this.keyframes[Ss-1],this.keyframes[Ss]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},ca.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},ca.prototype.set=function(ga,_s,Ss,Ms){var Cs;Ss===void 0&&(Ss=0),isNaN(_s)&&(_s=0),isNaN(Ss)&&(Ss=0),Ms=Ms!=null?Ms:Ht();var Ts=this.getProgress(Ms),Is=this.getValue(Ts),Bs={};for(var Ps in this.config)Bs[Ps]=(Cs=ga[Ps])!==null&&Cs!==void 0?Cs:Is[Ps];var Ls=[{progress:0,value:Is},{progress:1,value:Bs}];return this.setKeyframes(Ls,_s,Ss,Ms)},ca.prototype.setKeyframes=function(ga,_s,Ss,Ms){var Cs=this;if(Ss===void 0&&(Ss=0),ga.length<2)throw new Error("keyframes invalid.");return isNaN(_s)&&(_s=0),isNaN(Ss)&&(Ss=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Ts,Is){Ms=Ms!=null?Ms:Ht(),Cs.progress=0,Cs.ended=!1,Cs.startTime=Ms,Cs.startVelocity=Ss,Cs.keyframes=ga,Cs.duration=_s,_s===0?(Cs.progress=1,Cs.value=e$2.__assign({},ga[ga.length-1].value)):Cs.value=e$2.__assign({},ga[0].value),Cs.callbacks=[Ts,Is]})},ca.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},ca}(),gn=ge(),vn=new r$2.Texture(gn);gn.onload=function(){return vn.needsUpdate=!0},gn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var mn=new r$2.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),yn=new r$2.MeshBasicMaterial({map:vn,transparent:!0}),bn=new r$2.SphereBufferGeometry(.12,16,16),wn=new r$2.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function xn(){if(typeof document=="undefined"){var ca=new r$2.Texture;return Object.assign(ca,{draw:function(Ls){},retain:!1,pool:!1})}var ga=document.createElement("canvas"),_s=512,Ss=256,Ms=190;ga.setAttribute("width",String(_s)),ga.setAttribute("height",String(_s));var Cs=new r$2.Texture(ga),Ts=ga.getContext("2d");if(!Ts)throw Error("cannot create canvas context");var Is=Ts.createRadialGradient(Ss,Ss,150,Ss,Ss,0);function Bs(){var Ls=Math.PI/12,Rs=2*Math.PI/3;Ts&&(Ts.beginPath(),Ts.arc(Ss,Ss,Ms,0*Rs,1*Rs-Ls),Ts.stroke(),Ts.beginPath(),Ts.arc(Ss,Ss,Ms,1*Rs,2*Rs-Ls),Ts.stroke(),Ts.beginPath(),Ts.arc(Ss,Ss,Ms,2*Rs,3*Rs-Ls),Ts.stroke())}function Ps(Ls){Ts&&(Ts.clearRect(0,0,_s,_s),Ts.lineWidth=20,Ls!==-1&&(Ts.globalCompositeOperation="source-over",Ts.strokeStyle="rgba(255, 255, 255, 1)",Bs(),Ts.globalCompositeOperation="source-in",Ts.beginPath(),Ts.arc(Ss,Ss,Ms,0,2*Math.PI*Ls),Ts.strokeStyle="rgba(255, 255, 255, 1)",Ts.stroke(),Ts.globalCompositeOperation="source-over",Ts.strokeStyle="rgba(255, 255, 255, "+(Ls?.5:1)+")",Bs()),Ts.beginPath(),Ts.arc(Ss,Ss,150,0,2*Math.PI),Ts.closePath(),Ts.fillStyle=Is,Ts.fill(),Ts.fillStyle="rgba(255, 255, 255, 0.01)",Ts.fillRect(0,0,_s,_s),Cs.needsUpdate=!0)}return Is.addColorStop(0,"rgba(255, 255, 255, 1)"),Is.addColorStop(.15,"rgba(255, 255, 255, 1)"),Is.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Is.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Is.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Ps(0),Object.assign(Cs,{draw:Ps,retain:!1,pool:!1})}var En=[],In=xn();In.draw(0);var Cn=xn();Cn.draw(1);var Sn=xn();Sn.draw(-1);var Bn=new r$2.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Mn(){return new r$2.Mesh(Bn,new r$2.MeshBasicMaterial({map:In,transparent:!0}))}function Pn(ca,ga){var _s=ca.map;ga===0||ga===1?(_s.pool===!0&&(_s.retain=!1),ga===0&&(ca.map=In),ga===1&&(ca.map=Cn)):(_s.pool!==!0&&(ca.map=function(){for(var Ss=0,Ms=En;Ss<Ms.length;Ss++){var Cs=Ms[Ss];if(Cs.retain===!1)return Cs}var Ts=xn();return Ts.pool=!0,Ts.retain=!0,En.push(Ts),Ts}()),ca.map.draw(ga))}var Tn=function(ca){function ga(){var _s=ca.call(this)||this;return _s.loading=!1,_s.disabled=!1,_s.current=!1,_s.progress=0,_s.opacity=0,_s.hitTestMesh=new r$2.Mesh(bn,wn),_s.add(_s.hitTestMesh),_s.centerMesh=Mn(),_s.centerMesh.position.y+=.01,_s.add(_s.centerMesh),_s.loadingMesh=new r$2.Mesh(mn,yn),_s.loadingMesh.position.y+=.011,_s.progressMotion=new fn({progress:_s.progress}),_s.opacityMotion=new fn({opacity:_s.opacity}),_s.needsRender=!0,_s.renderOrder=-2,_s}return e$2.__extends(ga,ca),ga.prototype.setLoading=function(_s){var Ss=this;this.loading=_s,this.stopInterval&&this.stopInterval(),_s?(this.add(this.loadingMesh),this.stopInterval=se.shared.add(function(){Ss.loadingMesh.rotateOnAxis(new r$2.Vector3(0,1,0),.1),Ss.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},ga.prototype.setDisabled=function(_s){this.disabled=_s,function(Ss,Ms){var Cs=Ss.map;Cs.pool===!0&&(Cs.retain=!1),Ss.map=Ms?Sn:In}(this.centerMesh.material,_s),this.needsRender=!0},ga.prototype.setProgress=function(_s){this.setLoading(!1),this.setDisabled(!1),this.progress=_s=Wi(_s,0,1),_s!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:_s},120).catch(Lt)},ga.prototype.setOpacity=function(_s){this.opacity=_s=Wi(_s,0,1),this.current&&(_s=1),_s!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:_s},500).catch(Lt)},ga.prototype.setCurrent=function(_s){this.current!==_s&&(this.current=_s,this.setOpacity(this.opacity))},ga.prototype.updateTime=function(_s,Ss){this.opacityMotion.ended||(this.opacityMotion.update(_s),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(_s),Pn(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},ga.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},ga}(r$2.Object3D),Qn=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Rn=new Float32Array([0,1,1,1,0,0,1,0]),Dn=new Uint8Array([0,2,1,2,3,1]),kn=new r$2.BufferGeometry;kn.setAttribute("position",new r$2.BufferAttribute(Qn,3)),kn.setAttribute("uv",new r$2.BufferAttribute(Rn,2)),kn.setIndex(new r$2.BufferAttribute(Dn,1));var Nn,Fn,On=(Nn=ge(),Fn=new r$2.Texture,Nn.onload=function(){if(typeof document!="undefined"){var ca=256,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){_s.drawImage(Nn,0,0,ca,ca),_s.globalCompositeOperation="source-out";var Ss=128;_s.beginPath(),_s.lineWidth=29.952,_s.arc(Ss,Ss,84.48,0,2*Math.PI),_s.strokeStyle="rgba(255, 255, 255, 0.5)",_s.closePath(),_s.stroke(),Fn.image=ga,Fn.needsUpdate=!0}}},Nn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Fn),Ln=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256,Ss=199.68;return ga.beginPath(),ga.arc(_s,_s,Ss,0,2*Math.PI),ga.fillStyle="rgba(255, 255, 255, 0.1)",ga.closePath(),ga.fill(),ga.save(),ga.beginPath(),ga.arc(_s,_s,Ss,0,2*Math.PI),ga.strokeStyle="rgba(255, 255, 255, 0.5)",ga.lineWidth=10.24,ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),Vn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256,Ss=138.24,Ms=ga.createLinearGradient(_s-Math.cos(Math.PI/4)*Ss,_s-Math.sin(Math.PI/4)*Ss,_s+Math.cos(Math.PI/4)*Ss,_s+Math.sin(Math.PI/4)*Ss);return Ms.addColorStop(0,"rgba(255, 255, 255, 1)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Ms.addColorStop(1,"rgba(255, 255, 255, 1)"),ga.beginPath(),ga.lineWidth=33.28,ga.arc(_s,_s,Ss,0,2*Math.PI),ga.strokeStyle=Ms,ga.shadowBlur=38.4,ga.shadowColor="rgba(0, 0, 0, 0.3)",ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),Hn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256,Ss=199.68,Ms=ga.createLinearGradient(_s+Math.cos(Math.PI/4)*Ss,_s-Math.sin(Math.PI/4)*Ss,_s-Math.cos(Math.PI/4)*Ss,_s+Math.sin(Math.PI/4)*Ss);return Ms.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.5)"),ga.beginPath(),ga.lineWidth=15.36,ga.arc(_s,_s,Ss,0,2*Math.PI),ga.strokeStyle=Ms,ga.shadowBlur=25.6,ga.shadowColor="rgba(0, 0, 0, 0.5)",ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),Kn=function(ca,ga){var _s=128;ca.clearRect(0,0,256,256),ca.beginPath(),ca.lineWidth=29.44,ca.arc(_s,_s,84.48,0,2*Math.PI*ga),ca.strokeStyle="rgba(255, 255, 255, 0.2)",ca.stroke()},zn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(256)),ca.setAttribute("height",String(256));var ga=ca.getContext("2d");ga&&Kn(ga,2*Math.PI);var _s=new r$2.CanvasTexture(ca);return Object.assign(_s,{setProgress:function(Ss){ga&&(Kn(ga,Ss),_s.needsUpdate=!0)}})}return null},qn=[],_n=zn(),jn=function(ca){function ga(){var _s=ca.call(this)||this;_s.progress=0,_s.opacity=0,_s.loading=!1,_s.current=!1,_s.disabled=!1,_s.ringRotateMotion=new fn({angle:0}),_s.tapMotion=new fn({scale:1,opacity:1}),_s.progressMotion=new fn({progress:0}),_s.progressOpacityMotion=new fn({opacity:0}),_s.opacityMotion=new fn({opacity:0});var Ss={blending:r$2.CustomBlending,blendSrc:r$2.SrcAlphaFactor,blendDst:r$2.OneMinusSrcAlphaFactor,blendSrcAlpha:r$2.OneFactor,blendDstAlpha:r$2.OneMinusSrcAlphaFactor,depthWrite:!1};return _s.centerMesh=new r$2.Mesh(kn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Vn,opacity:0}))),_s.ringMesh=new r$2.Mesh(kn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Hn,opacity:0}))),_s.loadingMesh=new r$2.Mesh(kn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:On,opacity:.5}))),_s.disableMesh=new r$2.Mesh(kn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Ln,opacity:0}))),_s.progressMesh=new r$2.Mesh(kn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:_n,opacity:0}))),_s.loadingMesh.visible=!1,_s.disableMesh.visible=!1,_s.ringMesh.position.y=.003,_s.disableMesh.position.y=.002,_s.centerMesh.position.y=.002,_s.loadingMesh.position.y=.005,_s.progressMesh.position.y=.004,_s.centerMesh.frustumCulled=!1,_s.ringMesh.frustumCulled=!1,_s.progressMesh.frustumCulled=!1,_s.loadingMesh.frustumCulled=!1,_s.disableMesh.frustumCulled=!1,_s.renderOrder=-2,_s.add(_s.centerMesh),_s.add(_s.ringMesh),_s.add(_s.progressMesh),_s.add(_s.loadingMesh),_s.add(_s.disableMesh),_s.needsRender=!0,_s}return e$2.__extends(ga,ca),ga.prototype.setProgress=function(_s){this.setDisabled(!1),this.setLoading(!1),this.progress!==_s&&(_s=Wi(_s,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Lt),_s===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Lt),this.progressMotion.set({progress:Wi(1.2*_s,0,1)},0).catch(Lt)):this.progressMotion.set({progress:Wi(1.2*_s,0,1)},100).catch(Lt)),this.progress=_s)},ga.prototype.setOpacity=function(_s){this.opacity!==_s&&(this.opacity=_s=Wi(_s,0,1),this.opacityMotion.set({opacity:_s},500).catch(Lt))},ga.prototype.setCurrent=function(_s){if(this.current!==_s){if(_s===!0&&this.ringRotateMotion.ended){var Ss=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Ss,5e3).catch(Lt)}this.current=_s}},ga.prototype.setLoading=function(_s){this.loading!==_s&&(this.loading=_s,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=_s,this.needsRender=!0)},ga.prototype.setDisabled=function(_s){this.disabled!==_s&&(this.disabled=_s,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=_s,this.ringMesh.visible=!_s,this.centerMesh.visible=!_s,this.needsRender=!0)},ga.prototype.tap=function(){var _s=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Lt),this.progressMotion.set({progress:0},0).catch(Lt),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){_s.progressOpacityMotion.set({opacity:_s.progress>0?1:0},300).catch(Lt),_s.progressMotion.set({progress:_s.progress},120).catch(Lt)}).catch(Lt)):Promise.resolve()},ga.prototype.updateTime=function(_s,Ss){var Ms;if(!this.progressMotion.ended){this.progressMotion.update(_s);var Cs=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Cs===0)this.progressMesh.material.map!==_n&&(qn.push(this.progressMesh.material.map),this.progressMesh.material.map=_n);else if(Cs===1)this.progressMesh.material.map!==_n&&(qn.push(this.progressMesh.material.map),this.progressMesh.material.map=_n);else{if(this.progressMesh.material.map===_n){var Ts=qn.pop()||zn();this.progressMesh.material.map=Ts}(Ms=this.progressMesh.material.map)===null||Ms===void 0||Ms.setProgress(Cs)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(_s);var Is=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Is,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(_s),Is=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Is,this.ringMesh.material.opacity=Is,this.disableMesh.material.opacity=Is,this.loadingMesh.material.opacity=Is,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ss/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(_s);var Bs=this.tapMotion.value.scale;this.centerMesh.scale.set(Bs,Bs,Bs),this.ringMesh.scale.set(Bs,Bs,Bs),this.progressMesh.scale.set(Bs,Bs,Bs),Is=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Is,this.ringMesh.material.opacity=Is,this.disableMesh.material.opacity=Is,this.loadingMesh.material.opacity=Is,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(_s),this.ringMesh.quaternion.setFromEuler(new r$2.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},ga.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==_n&&(qn.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},ga}(r$2.Object3D),Un=new r$2.CircleBufferGeometry(.1,16),Gn=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256,Ms=192,Cs=76.8;_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.strokeStyle="rgba(147, 162, 255, 0.3)",_s.shadowBlur=12.8,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.stroke(),_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Ts=_s.createRadialGradient(Ss,Ss,153.6,Ss,Ss,230.4);Ts.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Ts.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(1,"rgba(255, 255, 255, 0.3)"),_s.strokeStyle=Ts,_s.stroke(),_s.beginPath(),_s.lineWidth=4.8,_s.arc(Ss,Ss,228,0,2*Math.PI);var Is=_s.createLinearGradient(0,0,ca,0);return Is.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Is.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Is.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Is.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Is,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),Wn=new r$2.MeshBasicMaterial({map:Gn,transparent:!0}),Xn=function(ca){function ga(){var _s=ca.call(this)||this;return _s.ringMesh=new r$2.Mesh(Un,Wn),_s.ringMesh.renderOrder=-3,_s.add(_s.ringMesh),_s}return e$2.__extends(ga,ca),ga.prototype.dispose=function(){this.remove(this.ringMesh)},ga}(r$2.Object3D);function Yn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Zn(){return(Yn()+Yn()+"-"+Yn()+"-4"+Yn().substr(0,3)+"-"+Yn()+"-"+Yn()+Yn()+Yn()).toLowerCase()}function Jn(ca,ga,_s){var Ss=Math.abs(ca-ga);return Ss<.001||_s!==void 0&&Math.abs(_s-Ss)<.001}function $n(ca,ga,_s){return!Jn(ca,ga,_s)}function tr(ca,ga){return ca.distanceTo(ga)<.001}function er(ca,ga){return!tr(ca,ga)}var ir=new r$2.Vector3(0,0,0),nr=function(ca){function ga(_s,Ss){Ss===void 0&&(Ss=ir);var Ms=ca.call(this)||this,Cs=new r$2.BoxBufferGeometry(_s.max.x-_s.min.x+2*Ss.x,_s.max.y-_s.min.y+2*Ss.y,_s.max.z-_s.min.z+2*Ss.z,1,1);Cs.groups.length=0,Cs.groups.push({start:0,count:36,materialIndex:0}),Cs.applyMatrix4(new r$2.Matrix4().makeScale(-1,1,1));var Ts=new we;Ts.defines.USE_MAP=!1,Ts.defines.USE_UV=!1,Ts.uniforms.diffuse.value=new r$2.Color(16777215);var Is=new ce(Cs,[Ts]);return Is.floorIndex=-1,Is.position.copy(_s.getCenter(new r$2.Vector3)),Is.frustumCulled=!1,Ms.renderOrder=-3,Ms.add(Is),Ms.boundingBox=new r$2.Box3,Ms.computeBoundingBox(),Ms}return e$2.__extends(ga,ca),ga.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},ga.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},ga}(pe);function rr(ca,ga){return ga===void 0&&(ga=ir),new nr(ca,ga)}var or=2*Math.PI;function sr(ca){return ca>=0&&ca<or?ca:(ca%or+or)%or}var ar=Math.PI,ur=2*ar;function lr(ca,ga,_s){if(ca===ga)return ga;var Ss=ga-ca;return Math.abs(Ss)<=_s?ga:ca+(Ss>0?1:-1)*_s}(function(){try{var ca=document.createElement("canvas");!window.WebGLRenderingContext||!ca.getContext("webgl")&&ca.getContext("experimental-webgl")}catch{return!1}})();var hr=function(){var ca=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(ca)||/webos/i.test(ca)||/ipad|iphone|ipod/i.test(ca)||/iemobile/i.test(ca)||/opera mini/i.test(ca)||/blackberry/i.test(ca)||/windows phone/i.test(ca)};function cr(ca,ga){ca.mode=ga.mode,ca.panoIndex=ga.panoIndex,ca.longitude=ga.longitude,ca.latitude=ga.latitude,ca.fov=ga.fov,ca.offset.copy(ga.offset)}function dr(ca,ga){return ca.panoIndex===ga.panoIndex&&ca.mode===ga.mode&&Jn(ca.longitude,ga.longitude,2*Math.PI)&&Jn(ca.latitude,ga.latitude)&&Jn(ca.fov,ga.fov)&&tr(ca.offset,ga.offset)}var pr=function(ca){return Number(ca)};function Ar(ca,ga,_s){var Ss;ga===void 0&&(ga=pr),_s===void 0&&(_s=!1);for(var Ms,Cs=1/0,Ts=0,Is=ca;Ts<Is.length;Ts++){var Bs=Is[Ts],Ps=ga(Bs);Ps<=Cs&&(Ms=(Ss=[Bs,Ps])[0],Cs=Ss[1])}return _s?[Ms,Cs]:Ms}function fr(ca){for(var ga in ca)return!1;return!0}function gr(ca){return{longitude:ca.longitude,latitude:ca.latitude,fov:ca.fov,offset:ca.offset.clone()}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var vr=function(ca,ga,_s,Ss){var Ms,Cs=["","webkit","Moz","MS","ms","o"],Ts=ga.createElement?ga.createElement("div"):Ss,Is=Math.round,Bs=Math.abs,Ps=Date.now;function Ls(Ks,au,lu){return setTimeout(Ds(Ks,lu),au)}function Rs(Ks,au,lu){return!!Array.isArray(Ks)&&(Os(Ks,lu[au],lu),!0)}function Os(Ks,au,lu){var gu;if(Ks)if(Ks.forEach)Ks.forEach(au,lu);else if(Ks.length!==Ss)for(gu=0;gu<Ks.length;)au.call(lu,Ks[gu],gu,Ks),gu++;else for(gu in Ks)Ks.hasOwnProperty(gu)&&au.call(lu,Ks[gu],gu,Ks)}function Fs(Ks,au,lu){var gu="DEPRECATED METHOD: "+au+`
`+lu+` AT 
`;return function(){var Mu=new Error("get-stack-trace"),Wu=Mu&&Mu.stack?Mu.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",el=ca.console&&(ca.console.warn||ca.console.log);return el&&el.call(ca.console,gu,Wu),Ks.apply(this,arguments)}}Ms=typeof Object.assign!="function"?function(Ks){if(Ks===Ss||Ks===null)throw new TypeError("Cannot convert undefined or null to object");for(var au=Object(Ks),lu=1;lu<arguments.length;lu++){var gu=arguments[lu];if(gu!==Ss&&gu!==null)for(var Mu in gu)gu.hasOwnProperty(Mu)&&(au[Mu]=gu[Mu])}return au}:Object.assign;var Vs=Fs(function(Ks,au,lu){for(var gu=Object.keys(au),Mu=0;Mu<gu.length;)(!lu||lu&&Ks[gu[Mu]]===Ss)&&(Ks[gu[Mu]]=au[gu[Mu]]),Mu++;return Ks},"extend","Use `assign`."),ks=Fs(function(Ks,au){return Vs(Ks,au,!0)},"merge","Use `assign`.");function Ns(Ks,au,lu){var gu,Mu=au.prototype;(gu=Ks.prototype=Object.create(Mu)).constructor=Ks,gu._super=Mu,lu&&Ms(gu,lu)}function Ds(Ks,au){return function(){return Ks.apply(au,arguments)}}function $s(Ks,au){return typeof Ks=="function"?Ks.apply(au&&au[0]||Ss,au):Ks}function Gs(Ks,au){return Ks===Ss?au:Ks}function Us(Ks,au,lu){Os(Ws(au),function(gu){Ks.addEventListener(gu,lu,!1)})}function Hs(Ks,au,lu){Os(Ws(au),function(gu){Ks.removeEventListener(gu,lu,!1)})}function zs(Ks,au){for(;Ks;){if(Ks==au)return!0;Ks=Ks.parentNode}return!1}function js(Ks,au){return Ks.indexOf(au)>-1}function Ws(Ks){return Ks.trim().split(/\s+/g)}function Qs(Ks,au,lu){if(Ks.indexOf&&!lu)return Ks.indexOf(au);for(var gu=0;gu<Ks.length;){if(lu&&Ks[gu][lu]==au||!lu&&Ks[gu]===au)return gu;gu++}return-1}function Zs(Ks){return Array.prototype.slice.call(Ks,0)}function Xs(Ks,au,lu){for(var gu=[],Mu=[],Wu=0;Wu<Ks.length;){var el=au?Ks[Wu][au]:Ks[Wu];Qs(Mu,el)<0&&gu.push(Ks[Wu]),Mu[Wu]=el,Wu++}return lu&&(gu=au?gu.sort(function(cl,ju){return cl[au]>ju[au]}):gu.sort()),gu}function eu(Ks,au){for(var lu,gu,Mu=au[0].toUpperCase()+au.slice(1),Wu=0;Wu<Cs.length;){if((gu=(lu=Cs[Wu])?lu+Mu:au)in Ks)return gu;Wu++}return Ss}var Ys=1;function Js(Ks){var au=Ks.ownerDocument||Ks;return au.defaultView||au.parentWindow||ca}var qs="ontouchstart"in ca,ru=eu(ca,"PointerEvent")!==Ss,tu=qs&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),nu="touch",uu="mouse",fu=24,mu=["x","y"],vu=["clientX","clientY"];function Eu(Ks,au){var lu=this;this.manager=Ks,this.callback=au,this.element=Ks.element,this.target=Ks.options.inputTarget,this.domHandler=function(gu){$s(Ks.options.enable,[Ks])&&lu.handler(gu)},this.init()}function hu(Ks,au,lu){var gu=lu.pointers.length,Mu=lu.changedPointers.length,Wu=1&au&&gu-Mu==0,el=12&au&&gu-Mu==0;lu.isFirst=!!Wu,lu.isFinal=!!el,Wu&&(Ks.session={}),lu.eventType=au,function(cl,ju){var hl=cl.session,Al=ju.pointers,Cl=Al.length;hl.firstInput||(hl.firstInput=pu(ju)),Cl>1&&!hl.firstMultiple?hl.firstMultiple=pu(ju):Cl===1&&(hl.firstMultiple=!1);var Pl=hl.firstInput,Tl=hl.firstMultiple,Rl=Tl?Tl.center:Pl.center,Dl=ju.center=du(Al);ju.timeStamp=Ps(),ju.deltaTime=ju.timeStamp-Pl.timeStamp,ju.angle=bu(Rl,Dl),ju.distance=Cu(Rl,Dl),function(yl,fl){var xl=fl.center,Sl=yl.offsetDelta||{},El=yl.prevDelta||{},Ml=yl.prevInput||{};fl.eventType!==1&&Ml.eventType!==4||(El=yl.prevDelta={x:Ml.deltaX||0,y:Ml.deltaY||0},Sl=yl.offsetDelta={x:xl.x,y:xl.y}),fl.deltaX=El.x+(xl.x-Sl.x),fl.deltaY=El.y+(xl.y-Sl.y)}(hl,ju),ju.offsetDirection=Su(ju.deltaX,ju.deltaY);var Il=yu(ju.deltaTime,ju.deltaX,ju.deltaY);ju.overallVelocityX=Il.x,ju.overallVelocityY=Il.y,ju.overallVelocity=Bs(Il.x)>Bs(Il.y)?Il.x:Il.y,ju.scale=Tl?function(yl,fl){return Cu(fl[0],fl[1],vu)/Cu(yl[0],yl[1],vu)}(Tl.pointers,Al):1,ju.rotation=Tl?function(yl,fl){return bu(fl[1],fl[0],vu)+bu(yl[1],yl[0],vu)}(Tl.pointers,Al):0,ju.maxPointers=hl.prevInput?ju.pointers.length>hl.prevInput.maxPointers?ju.pointers.length:hl.prevInput.maxPointers:ju.pointers.length,function(yl,fl){var xl,Sl,El,Ml,bl=yl.lastInterval||fl,Ol=fl.timeStamp-bl.timeStamp;if(fl.eventType!=8&&(Ol>25||bl.velocity===Ss)){var Fl=fl.deltaX-bl.deltaX,$l=fl.deltaY-bl.deltaY,Bl=yu(Ol,Fl,$l);Sl=Bl.x,El=Bl.y,xl=Bs(Bl.x)>Bs(Bl.y)?Bl.x:Bl.y,Ml=Su(Fl,$l),yl.lastInterval=fl}else xl=bl.velocity,Sl=bl.velocityX,El=bl.velocityY,Ml=bl.direction;fl.velocity=xl,fl.velocityX=Sl,fl.velocityY=El,fl.direction=Ml}(hl,ju);var Ll=cl.element;zs(ju.srcEvent.target,Ll)&&(Ll=ju.srcEvent.target),ju.target=Ll}(Ks,lu),Ks.emit("hammer.input",lu),Ks.recognize(lu),Ks.session.prevInput=lu}function pu(Ks){for(var au=[],lu=0;lu<Ks.pointers.length;)au[lu]={clientX:Is(Ks.pointers[lu].clientX),clientY:Is(Ks.pointers[lu].clientY)},lu++;return{timeStamp:Ps(),pointers:au,center:du(au),deltaX:Ks.deltaX,deltaY:Ks.deltaY}}function du(Ks){var au=Ks.length;if(au===1)return{x:Is(Ks[0].clientX),y:Is(Ks[0].clientY)};for(var lu=0,gu=0,Mu=0;Mu<au;)lu+=Ks[Mu].clientX,gu+=Ks[Mu].clientY,Mu++;return{x:Is(lu/au),y:Is(gu/au)}}function yu(Ks,au,lu){return{x:au/Ks||0,y:lu/Ks||0}}function Su(Ks,au){return Ks===au?1:Bs(Ks)>=Bs(au)?Ks<0?2:4:au<0?8:16}function Cu(Ks,au,lu){lu||(lu=mu);var gu=au[lu[0]]-Ks[lu[0]],Mu=au[lu[1]]-Ks[lu[1]];return Math.sqrt(gu*gu+Mu*Mu)}function bu(Ks,au,lu){lu||(lu=mu);var gu=au[lu[0]]-Ks[lu[0]],Mu=au[lu[1]]-Ks[lu[1]];return 180*Math.atan2(Mu,gu)/Math.PI}Eu.prototype={handler:function(){},init:function(){this.evEl&&Us(this.element,this.evEl,this.domHandler),this.evTarget&&Us(this.target,this.evTarget,this.domHandler),this.evWin&&Us(Js(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Hs(this.element,this.evEl,this.domHandler),this.evTarget&&Hs(this.target,this.evTarget,this.domHandler),this.evWin&&Hs(Js(this.element),this.evWin,this.domHandler)}};var Au={mousedown:1,mousemove:2,mouseup:4},Tu="mousedown",Pu="mousemove mouseup";function zu(){this.evEl=Tu,this.evWin=Pu,this.pressed=!1,Eu.apply(this,arguments)}Ns(zu,Eu,{handler:function(Ks){var au=Au[Ks.type];1&au&&Ks.button===0&&(this.pressed=!0),2&au&&Ks.which!==1&&(au=4),this.pressed&&(4&au&&(this.pressed=!1),this.callback(this.manager,au,{pointers:[Ks],changedPointers:[Ks],pointerType:uu,srcEvent:Ks}))}});var nl={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},$u={2:nu,3:"pen",4:uu,5:"kinect"},iu="pointerdown",su="pointermove pointerup pointercancel";function Bu(){this.evEl=iu,this.evWin=su,Eu.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ca.MSPointerEvent&&!ca.PointerEvent&&(iu="MSPointerDown",su="MSPointerMove MSPointerUp MSPointerCancel"),Ns(Bu,Eu,{handler:function(Ks){var au=this.store,lu=!1,gu=Ks.type.toLowerCase().replace("ms",""),Mu=nl[gu],Wu=$u[Ks.pointerType]||Ks.pointerType,el=Wu==nu,cl=Qs(au,Ks.pointerId,"pointerId");1&Mu&&(Ks.button===0||el)?cl<0&&(au.push(Ks),cl=au.length-1):12&Mu&&(lu=!0),cl<0||(au[cl]=Ks,this.callback(this.manager,Mu,{pointers:au,changedPointers:[Ks],pointerType:Wu,srcEvent:Ks}),lu&&au.splice(cl,1))}});var Iu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Qu="touchstart",Ou="touchstart touchmove touchend touchcancel";function Du(){this.evTarget=Qu,this.evWin=Ou,this.started=!1,Eu.apply(this,arguments)}function Zu(Ks,au){var lu=Zs(Ks.touches),gu=Zs(Ks.changedTouches);return 12&au&&(lu=Xs(lu.concat(gu),"identifier",!0)),[lu,gu]}Ns(Du,Eu,{handler:function(Ks){var au=Iu[Ks.type];if(au===1&&(this.started=!0),this.started){var lu=Zu.call(this,Ks,au);12&au&&lu[0].length-lu[1].length==0&&(this.started=!1),this.callback(this.manager,au,{pointers:lu[0],changedPointers:lu[1],pointerType:nu,srcEvent:Ks})}}});var qu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ku="touchstart touchmove touchend touchcancel";function Ru(){this.evTarget=Ku,this.targetIds={},Eu.apply(this,arguments)}function Gu(Ks,au){var lu=Zs(Ks.touches),gu=this.targetIds;if(3&au&&lu.length===1)return gu[lu[0].identifier]=!0,[lu,lu];var Mu,Wu,el=Zs(Ks.changedTouches),cl=[],ju=this.target;if(Wu=lu.filter(function(hl){return zs(hl.target,ju)}),au===1)for(Mu=0;Mu<Wu.length;)gu[Wu[Mu].identifier]=!0,Mu++;for(Mu=0;Mu<el.length;)gu[el[Mu].identifier]&&cl.push(el[Mu]),12&au&&delete gu[el[Mu].identifier],Mu++;return cl.length?[Xs(Wu.concat(cl),"identifier",!0),cl]:void 0}Ns(Ru,Eu,{handler:function(Ks){var au=qu[Ks.type],lu=Gu.call(this,Ks,au);lu&&this.callback(this.manager,au,{pointers:lu[0],changedPointers:lu[1],pointerType:nu,srcEvent:Ks})}});function Fu(){Eu.apply(this,arguments);var Ks=Ds(this.handler,this);this.touch=new Ru(this.manager,Ks),this.mouse=new zu(this.manager,Ks),this.primaryTouch=null,this.lastTouches=[]}function Uu(Ks,au){1&Ks?(this.primaryTouch=au.changedPointers[0].identifier,cu.call(this,au)):12&Ks&&cu.call(this,au)}function cu(Ks){var au=Ks.changedPointers[0];if(au.identifier===this.primaryTouch){var lu={x:au.clientX,y:au.clientY};this.lastTouches.push(lu);var gu=this.lastTouches;setTimeout(function(){var Mu=gu.indexOf(lu);Mu>-1&&gu.splice(Mu,1)},2500)}}function Nu(Ks){for(var au=Ks.srcEvent.clientX,lu=Ks.srcEvent.clientY,gu=0;gu<this.lastTouches.length;gu++){var Mu=this.lastTouches[gu],Wu=Math.abs(au-Mu.x),el=Math.abs(lu-Mu.y);if(Wu<=25&&el<=25)return!0}return!1}Ns(Fu,Eu,{handler:function(Ks,au,lu){var gu=lu.pointerType==nu,Mu=lu.pointerType==uu;if(!(Mu&&lu.sourceCapabilities&&lu.sourceCapabilities.firesTouchEvents)){if(gu)Uu.call(this,au,lu);else if(Mu&&Nu.call(this,lu))return;this.callback(Ks,au,lu)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ku=Ts?eu(Ts.style,"touchAction"):Ss,rl=ku!==Ss,Vu="compute",ol="auto",sl="manipulation",ul="none",ml="pan-x",al="pan-y",dl=function(){if(!rl)return!1;var Ks={},au=ca.CSS&&ca.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(lu){Ks[lu]=!au||ca.CSS.supports("touch-action",lu)}),Ks}();function vl(Ks,au){this.manager=Ks,this.set(au)}vl.prototype={set:function(Ks){Ks==Vu&&(Ks=this.compute()),rl&&this.manager.element.style&&dl[Ks]&&(this.manager.element.style[ku]=Ks),this.actions=Ks.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ks=[];return Os(this.manager.recognizers,function(au){$s(au.options.enable,[au])&&(Ks=Ks.concat(au.getTouchAction()))}),function(au){if(js(au,ul))return ul;var lu=js(au,ml),gu=js(au,al);return lu&&gu?ul:lu||gu?lu?ml:al:js(au,sl)?sl:ol}(Ks.join(" "))},preventDefaults:function(Ks){var au=Ks.srcEvent,lu=Ks.offsetDirection;if(this.manager.session.prevented)au.preventDefault();else{var gu=this.actions,Mu=js(gu,ul)&&!dl.none,Wu=js(gu,al)&&!dl["pan-y"],el=js(gu,ml)&&!dl["pan-x"];if(Mu){var cl=Ks.pointers.length===1,ju=Ks.distance<2,hl=Ks.deltaTime<250;if(cl&&ju&&hl)return}if(!el||!Wu)return Mu||Wu&&6&lu||el&&lu&fu?this.preventSrc(au):void 0}},preventSrc:function(Ks){this.manager.session.prevented=!0,Ks.preventDefault()}};var pl=32;function gl(Ks){this.options=Ms({},this.defaults,Ks||{}),this.id=Ys++,this.manager=null,this.options.enable=Gs(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function _l(Ks){return 16&Ks?"cancel":8&Ks?"end":4&Ks?"move":2&Ks?"start":""}function wl(Ks){return Ks==16?"down":Ks==8?"up":Ks==2?"left":Ks==4?"right":""}function ou(Ks,au){var lu=au.manager;return lu?lu.get(Ks):Ks}function _u(){gl.apply(this,arguments)}function xu(){_u.apply(this,arguments),this.pX=null,this.pY=null}function wu(){_u.apply(this,arguments)}function Lu(){gl.apply(this,arguments),this._timer=null,this._input=null}function Ju(){_u.apply(this,arguments)}function Yu(){_u.apply(this,arguments)}function Hu(){gl.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Xu(Ks,au){return(au=au||{}).recognizers=Gs(au.recognizers,Xu.defaults.preset),new tl(Ks,au)}gl.prototype={defaults:{},set:function(Ks){return Ms(this.options,Ks),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ks){if(Rs(Ks,"recognizeWith",this))return this;var au=this.simultaneous;return au[(Ks=ou(Ks,this)).id]||(au[Ks.id]=Ks,Ks.recognizeWith(this)),this},dropRecognizeWith:function(Ks){return Rs(Ks,"dropRecognizeWith",this)||(Ks=ou(Ks,this),delete this.simultaneous[Ks.id]),this},requireFailure:function(Ks){if(Rs(Ks,"requireFailure",this))return this;var au=this.requireFail;return Qs(au,Ks=ou(Ks,this))===-1&&(au.push(Ks),Ks.requireFailure(this)),this},dropRequireFailure:function(Ks){if(Rs(Ks,"dropRequireFailure",this))return this;Ks=ou(Ks,this);var au=Qs(this.requireFail,Ks);return au>-1&&this.requireFail.splice(au,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ks){return!!this.simultaneous[Ks.id]},emit:function(Ks){var au=this,lu=this.state;function gu(Mu){au.manager.emit(Mu,Ks)}lu<8&&gu(au.options.event+_l(lu)),gu(au.options.event),Ks.additionalEvent&&gu(Ks.additionalEvent),lu>=8&&gu(au.options.event+_l(lu))},tryEmit:function(Ks){if(this.canEmit())return this.emit(Ks);this.state=pl},canEmit:function(){for(var Ks=0;Ks<this.requireFail.length;){if(!(33&this.requireFail[Ks].state))return!1;Ks++}return!0},recognize:function(Ks){var au=Ms({},Ks);if(!$s(this.options.enable,[this,au]))return this.reset(),void(this.state=pl);56&this.state&&(this.state=1),this.state=this.process(au),30&this.state&&this.tryEmit(au)},process:function(Ks){},getTouchAction:function(){},reset:function(){}},Ns(_u,gl,{defaults:{pointers:1},attrTest:function(Ks){var au=this.options.pointers;return au===0||Ks.pointers.length===au},process:function(Ks){var au=this.state,lu=Ks.eventType,gu=6&au,Mu=this.attrTest(Ks);return gu&&(8&lu||!Mu)?16|au:gu||Mu?4&lu?8|au:2&au?4|au:2:pl}}),Ns(xu,_u,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var Ks=this.options.direction,au=[];return 6&Ks&&au.push(al),Ks&fu&&au.push(ml),au},directionTest:function(Ks){var au=this.options,lu=!0,gu=Ks.distance,Mu=Ks.direction,Wu=Ks.deltaX,el=Ks.deltaY;return Mu&au.direction||(6&au.direction?(Mu=Wu===0?1:Wu<0?2:4,lu=Wu!=this.pX,gu=Math.abs(Ks.deltaX)):(Mu=el===0?1:el<0?8:16,lu=el!=this.pY,gu=Math.abs(Ks.deltaY))),Ks.direction=Mu,lu&&gu>au.threshold&&Mu&au.direction},attrTest:function(Ks){return _u.prototype.attrTest.call(this,Ks)&&(2&this.state||!(2&this.state)&&this.directionTest(Ks))},emit:function(Ks){this.pX=Ks.deltaX,this.pY=Ks.deltaY;var au=wl(Ks.direction);au&&(Ks.additionalEvent=this.options.event+au),this._super.emit.call(this,Ks)}}),Ns(wu,_u,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ul]},attrTest:function(Ks){return this._super.attrTest.call(this,Ks)&&(Math.abs(Ks.scale-1)>this.options.threshold||2&this.state)},emit:function(Ks){if(Ks.scale!==1){var au=Ks.scale<1?"in":"out";Ks.additionalEvent=this.options.event+au}this._super.emit.call(this,Ks)}}),Ns(Lu,gl,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ol]},process:function(Ks){var au=this.options,lu=Ks.pointers.length===au.pointers,gu=Ks.distance<au.threshold,Mu=Ks.deltaTime>au.time;if(this._input=Ks,!gu||!lu||12&Ks.eventType&&!Mu)this.reset();else if(1&Ks.eventType)this.reset(),this._timer=Ls(function(){this.state=8,this.tryEmit()},au.time,this);else if(4&Ks.eventType)return 8;return pl},reset:function(){clearTimeout(this._timer)},emit:function(Ks){this.state===8&&(Ks&&4&Ks.eventType?this.manager.emit(this.options.event+"up",Ks):(this._input.timeStamp=Ps(),this.manager.emit(this.options.event,this._input)))}}),Ns(Ju,_u,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ul]},attrTest:function(Ks){return this._super.attrTest.call(this,Ks)&&(Math.abs(Ks.rotation)>this.options.threshold||2&this.state)}}),Ns(Yu,_u,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return xu.prototype.getTouchAction.call(this)},attrTest:function(Ks){var au,lu=this.options.direction;return 30&lu?au=Ks.overallVelocity:6&lu?au=Ks.overallVelocityX:lu&fu&&(au=Ks.overallVelocityY),this._super.attrTest.call(this,Ks)&&lu&Ks.offsetDirection&&Ks.distance>this.options.threshold&&Ks.maxPointers==this.options.pointers&&Bs(au)>this.options.velocity&&4&Ks.eventType},emit:function(Ks){var au=wl(Ks.offsetDirection);au&&this.manager.emit(this.options.event+au,Ks),this.manager.emit(this.options.event,Ks)}}),Ns(Hu,gl,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[sl]},process:function(Ks){var au=this.options,lu=Ks.pointers.length===au.pointers,gu=Ks.distance<au.threshold,Mu=Ks.deltaTime<au.time;if(this.reset(),1&Ks.eventType&&this.count===0)return this.failTimeout();if(gu&&Mu&&lu){if(Ks.eventType!=4)return this.failTimeout();var Wu=!this.pTime||Ks.timeStamp-this.pTime<au.interval,el=!this.pCenter||Cu(this.pCenter,Ks.center)<au.posThreshold;if(this.pTime=Ks.timeStamp,this.pCenter=Ks.center,el&&Wu?this.count+=1:this.count=1,this._input=Ks,this.count%au.taps===0)return this.hasRequireFailures()?(this._timer=Ls(function(){this.state=8,this.tryEmit()},au.interval,this),2):8}return pl},failTimeout:function(){return this._timer=Ls(function(){this.state=pl},this.options.interval,this),pl},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Xu.VERSION="2.0.7",Xu.defaults={domEvents:!1,touchAction:Vu,enable:!0,inputTarget:null,inputClass:null,preset:[[Ju,{enable:!1}],[wu,{enable:!1},["rotate"]],[Yu,{direction:6}],[xu,{direction:6},["swipe"]],[Hu],[Hu,{event:"doubletap",taps:2},["tap"]],[Lu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function tl(Ks,au){var lu;this.options=Ms({},Xu.defaults,au||{}),this.options.inputTarget=this.options.inputTarget||Ks,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ks,this.input=new((lu=this).options.inputClass||(ru?Bu:tu?Ru:qs?Fu:zu))(lu,hu),this.touchAction=new vl(this,this.options.touchAction),ll(this,!0),Os(this.options.recognizers,function(gu){var Mu=this.add(new gu[0](gu[1]));gu[2]&&Mu.recognizeWith(gu[2]),gu[3]&&Mu.requireFailure(gu[3])},this)}function ll(Ks,au){var lu,gu=Ks.element;gu.style&&(Os(Ks.options.cssProps,function(Mu,Wu){lu=eu(gu.style,Wu),au?(Ks.oldCssProps[lu]=gu.style[lu],gu.style[lu]=Mu):gu.style[lu]=Ks.oldCssProps[lu]||""}),au||(Ks.oldCssProps={}))}return tl.prototype={set:function(Ks){return Ms(this.options,Ks),Ks.touchAction&&this.touchAction.update(),Ks.inputTarget&&(this.input.destroy(),this.input.target=Ks.inputTarget,this.input.init()),this},stop:function(Ks){this.session.stopped=Ks?2:1},recognize:function(Ks){var au=this.session;if(!au.stopped){var lu;this.touchAction.preventDefaults(Ks);var gu=this.recognizers,Mu=au.curRecognizer;(!Mu||Mu&&8&Mu.state)&&(Mu=au.curRecognizer=null);for(var Wu=0;Wu<gu.length;)lu=gu[Wu],au.stopped===2||Mu&&lu!=Mu&&!lu.canRecognizeWith(Mu)?lu.reset():lu.recognize(Ks),!Mu&&14&lu.state&&(Mu=au.curRecognizer=lu),Wu++}},get:function(Ks){if(Ks instanceof gl)return Ks;for(var au=this.recognizers,lu=0;lu<au.length;lu++)if(au[lu].options.event==Ks)return au[lu];return null},add:function(Ks){if(Rs(Ks,"add",this))return this;var au=this.get(Ks.options.event);return au&&this.remove(au),this.recognizers.push(Ks),Ks.manager=this,this.touchAction.update(),Ks},remove:function(Ks){if(Rs(Ks,"remove",this))return this;if(Ks=this.get(Ks)){var au=this.recognizers,lu=Qs(au,Ks);lu!==-1&&(au.splice(lu,1),this.touchAction.update())}return this},on:function(Ks,au){if(Ks!==Ss&&au!==Ss){var lu=this.handlers;return Os(Ws(Ks),function(gu){lu[gu]=lu[gu]||[],lu[gu].push(au)}),this}},off:function(Ks,au){if(Ks!==Ss){var lu=this.handlers;return Os(Ws(Ks),function(gu){au?lu[gu]&&lu[gu].splice(Qs(lu[gu],au),1):delete lu[gu]}),this}},emit:function(Ks,au){this.options.domEvents&&function(Mu,Wu){var el=ga.createEvent("Event");el.initEvent(Mu,!0,!0),el.gesture=Wu,Wu.target.dispatchEvent(el)}(Ks,au);var lu=this.handlers[Ks]&&this.handlers[Ks].slice();if(lu&&lu.length){au.type=Ks,au.preventDefault=function(){au.srcEvent.preventDefault()};for(var gu=0;gu<lu.length;)lu[gu](au),gu++}},destroy:function(){this.element&&ll(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ms(Xu,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:pl,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:fu,DIRECTION_ALL:30,Manager:tl,Input:Eu,TouchAction:vl,TouchInput:Ru,MouseInput:zu,PointerEventInput:Bu,TouchMouseInput:Fu,SingleTouchInput:Du,Recognizer:gl,AttrRecognizer:_u,Tap:Hu,Pan:xu,Swipe:Yu,Pinch:wu,Rotate:Ju,Press:Lu,on:Us,off:Hs,each:Os,merge:ks,extend:Vs,assign:Ms,inherit:Ns,bindFn:Ds,prefixed:eu}),Xu}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function mr(ca,ga,_s){var Ss=ga.offsetWidth,Ms=ga.offsetHeight,Cs=ga.getBoundingClientRect(),Ts=Cs.top,Is=Cs.left;return _s&&(Is+=Ss*_s.left,Ts+=Ms*(1-_s.bottom-_s.height),Ss*=_s.width,Ms*=_s.height),new r$2.Vector2((ca.x-Is)/Ss*2-1,-(ca.y-Ts)/Ms*2+1)}var yr=new r$2.OrthographicCamera(-1,1,1,-1,0,1),br=new r$2.BufferGeometry;br.setAttribute("position",new r$2.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),br.setAttribute("uv",new r$2.Float32BufferAttribute([0,2,0,0,2,0],2));var wr=new r$2.Mesh(br),xr=new r$2.Scene;xr.add(wr);var Er=function(){function ca(ga,_s){var Ss;this.renderer=ga,this.material=new r$2.ShaderMaterial({vertexShader:(Ss=_s.vertex)!==null&&Ss!==void 0?Ss:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:_s.fragment,uniforms:Object.assign({inputBuffer:new r$2.Uniform(null)},_s.uniforms),defines:Object.assign({},_s.defines),blending:r$2.NoBlending,depthWrite:!1,depthTest:!1})}return ca.prototype.render=function(ga,_s){var Ss=this.renderer.getRenderTarget(),Ms=wr.material;this.material.uniforms.inputBuffer.value=ga.texture,wr.material=this.material,this.renderer.setRenderTarget(_s||null),this.renderer.render(xr,yr),this.renderer.setRenderTarget(Ss),wr.material=Ms},ca.prototype.dispose=function(){this.material.dispose()},ca}(),Ir=function(){function ca(ga){this.renderer=ga,this.material=new r$2.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$2.Uniform(new r$2.Vector3)}),blending:r$2.NoBlending,depthWrite:!1,depthTest:!1})}return ca.prototype.render=function(ga,_s){var Ss=this.renderer.getRenderTarget(),Ms=wr.material;this.material.uniforms.inputValue.value.copy(ga),wr.material=this.material,this.renderer.setRenderTarget(_s||null),this.renderer.render(xr,yr),this.renderer.setRenderTarget(Ss),wr.material=Ms},ca.prototype.dispose=function(){this.material.dispose()},ca}(),Cr=function(ca){function ga(_s){return ca.call(this,_s,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return e$2.__extends(ga,ca),ga}(Er),Sr=function(){function ca(ga){this.enable=!0,this.renderer=ga,this.copyPass=new Cr(this.renderer)}return ca.prototype.render=function(ga,_s){this.copyPass.render(ga,_s)},ca.prototype.dispose=function(){this.copyPass.dispose()},ca}(),Br=function(ca){function ga(_s){var Ss,Ms=this;Ms=ca.call(this)||this;var Cs=ga.parseArgs(_s);return Ms.pending=!0,Ms.userAction=Cs.initial[3],Ms.destroyed=!1,Ms.ident=Cs.ident,Ms.scene=Cs.scene,Ms.helper=Cs.helper,Ms.camera=Cs.camera,Ms.renderer=Cs.renderer,Ms.scissor=Cs.scissor,Ms.element=Cs.element,Ms.model=Cs.model,Ms.enableIOSEDR=(Ss=Cs.enableIOSEDR)!==null&&Ss!==void 0&&Ss,Ms.work=Cs.work,Ms.imageOptions=Cs.imageOptions,Ms.videoTexture=Cs.videoTexture,Ms.networkSubscribe=Cs.networkSubscribe,Ms.needsRender=!0,Ms.maxFov=120,Ms.minFov=40,Ms.maxLatitude=+Math.PI/2,Ms.minLatitude=-Math.PI/2,Ms.cameraMotion=new fn({longitude:{value:Ms.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Ms.camera.pose.latitude,fov:Ms.camera.pose.fov}),Ms.eventUnbinds=[Cs.element].concat(Cs.extraElements||[]).map(function(Ts){return Ms.bindEvents(Ts)}),se.shared.add(function(){return Ms.initAnimation.apply(Ms,Cs.initial)},!0),Ms}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){return e$2.__assign({},_s)},ga.initAnimationEndState=function(_s){var Ss=this.parseArgs(_s);return{longitude:Ss.camera.pose.longitude,latitude:Ss.camera.pose.latitude,fov:Ss.camera.pose.fov,offset:Ss.camera.pose.offset.clone()}},ga.prototype.destroy=function(){var _s;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Ss=0,Ms=this.eventUnbinds;Ss<Ms.length;Ss++)(0,Ms[Ss])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(_s=this.pressState)===null||_s===void 0||_s.stop(),delete this.pressState},ga.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},ga.prototype.bindExtraElement=function(_s){for(var Ss=0,Ms=this.eventUnbinds;Ss<Ms.length;Ss++)if(Ms[Ss].element===_s)return;this.eventUnbinds.push(this.bindEvents(_s))},ga.prototype.unbindExtraElement=function(_s){for(var Ss=[],Ms=0,Cs=this.eventUnbinds;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ts.element===_s?Ts():Ss.push(Ts)}this.eventUnbinds=Ss},ga.prototype.updateRenderSize=function(){this.needsRender=!0},ga.prototype.updateModel=function(_s){this.model=_s,this.needsRender=!0},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){return this.work=_s,this.userAction=Ts,!1},ga.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={};this.cameraMotion.ended&&(this.cameraMotion.update(_s),Ms.longitude=this.cameraMotion.value.longitude,Ms.latitude=this.cameraMotion.value.latitude,Ms.fov=this.cameraMotion.value.fov),fr(Ms)&&this.setCamera(Ms)}},ga.prototype.render=function(){this.renderer.render(this.scene,this.camera)},ga.prototype.postProcessing=function(_s,Ss){this.destroyed||(this.effect||(this.effect=new Sr(this.renderer)),this.effect.render(_s,Ss))},ga.prototype.updateCamera=function(_s,Ss,Ms){return this.userAction=Ms,this.cameraMotion.set(_s,Ss)},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:this.camera.pose.offset.clone()}},ga.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={}),this.userAction=Ms;var Cs={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone()};Ss.moveStartCallback&&Ss.moveStartCallback(_s,Cs),this.emit("moveToPano",_s,this.userAction),this.emit("panoWillArrive",_s,Cs,this.userAction),this.emit("panoArrived",_s,Cs,this.userAction),Ss.moveEndCallback&&Ss.moveEndCallback(_s,Cs)},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){this.pending=!1,this.userAction=Cs},ga.prototype.setCamera=function(_s){var Ss,Ms,Cs,Ts,Is;_s===void 0&&(_s={});var Bs=(Ss=_s.longitude)!==null&&Ss!==void 0?Ss:this.camera.pose.longitude,Ps=(Ms=_s.latitude)!==null&&Ms!==void 0?Ms:this.camera.pose.latitude,Ls=(Cs=_s.fov)!==null&&Cs!==void 0?Cs:this.camera.pose.fov,Rs=(Ts=_s.distance)!==null&&Ts!==void 0?Ts:this.camera.pose.distance,Os=(Is=_s.offset)!==null&&Is!==void 0?Is:this.camera.pose.offset,Fs=this.camera.position.clone(),Vs=$n(Bs,this.camera.pose.longitude,2*Math.PI)||$n(Ps,this.camera.pose.latitude),ks=$n(Ls,this.camera.pose.fov),Ns=$n(Rs,this.camera.pose.distance),Ds=er(Os,this.camera.pose.offset);this.camera.setFromPose({longitude:Bs,latitude:Ps,fov:Ls,distance:Rs,offset:Os});var $s=er(Fs,this.camera.position);ks&&this.emit("cameraFovUpdate",Ls,this.userAction),Vs&&this.emit("cameraDirectionUpdate",{longitude:Bs,latitude:Ps},this.userAction),$s&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(ks||Vs||Ds||Ns)&&this.emit("cameraUpdate",{longitude:Bs,latitude:Ps,fov:Ls,offset:Os},this.userAction),this.needsRender=!0,(He||ze.length!==0)&&(He&&clearTimeout(He),He=window.setTimeout(_e,200))},ga.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Ts){return ei(Ts,["x","y"])});this.emit("wantsGesture","pan",Cs,_s.isFinal)||this.emit("gesture","pan",Cs,_s.isFinal)}},ga.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Ms){return ei(Ms,["x","y"])});this.emit("wantsGesture","tap",Ss,!0)||this.emit("gesture","tap",Ss,!0)},ga.prototype.onPressGesture=function(_s,Ss){var Ms,Cs=[_s];if(this.emit("wantsGesture","press",Cs,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;this.emit("gesture","press",Cs,Ss)},ga.prototype.onPinchGesture=function(_s){var Ss=_s.pointers.map(function(Ms){return ei(Ms,["x","y"])});this.emit("wantsGesture","pinch",Ss,_s.isFinal)||this.emit("gesture","pinch",Ss,_s.isFinal)},ga.prototype.onMouseWheel=function(_s){var Ss=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Ms=[{x:_s.clientX,y:_s.clientY,delta:Ss}];this.emit("wantsGesture","mouseWheel",Ms,!1)||this.emit("gesture","mouseWheel",Ms,!1)},ga.prototype.onMouseMove=function(_s){},ga.prototype.onMouseOut=function(){},ga.prototype.relativeClientPosition=function(_s){return mr(_s,this.element,this.scissor)},ga.prototype.bindEvents=function(_s){var Ss=this,Ms=function(ks){var Ns=mr(ks,Ss.element,Ss.scissor);return!(Math.abs(Ns.x)>1||Math.abs(Ns.y)>1)},Cs=new vr.Manager(_s),Ts=function(ks){return ks.session.firstInput||null};Cs.add(new vr.Pan({threshold:10,pointers:0})),Cs.add(new vr.Tap({interval:410})),Cs.add(new vr.Pinch({threshold:0,pointers:2}).recognizeWith(Cs.get("pan"))),Cs.on("panstart pan",function(ks){var Ns=Ts(Cs);Ns&&!Ms(Ns.center)||(Ss.onPanGesture(ks),Fs())}),Cs.on("tap",function(ks){var Ns=Ts(Cs);Ns&&!Ms(Ns.center)||(Ss.onTapGesture(ks),Fs())}),Cs.on("pinchstart pinch pinchend",function(ks){var Ns=Ts(Cs);Ns&&!Ms(Ns.center)||(Ss.onPinchGesture(ks),Fs())});var Is=function(ks){var Ns={x:ks.clientX,y:ks.clientY};Ms(Ns)&&(Ss.onMouseWheel(ks),Fs())},Bs=function(ks){if(!hr()){var Ns={x:ks.clientX,y:ks.clientY};Ms(Ns)?(Ss.onMouseMove(ks),Ss.pressState&&Math.abs(ks.clientX-Ss.pressState.x)>10&&Math.abs(ks.clientY-Ss.pressState.y)>10&&Fs()):Ss.onMouseOut()}},Ps=function(){Ss.onMouseOut(),Fs()},Ls=function(ks,Ns){if(Ms(ks)){Ss.pressState={x:ks.x,y:ks.y,time:Ss.pressState?Ss.pressState.time:Ns,stop:Lt};var Ds=Ns-Ss.pressState.time;Ss.onPressGesture({x:ks.x,y:ks.y,delta:Ds},!1),Ss.pressState&&(Ss.pressState.stop=se.shared.add(function($s){return Ls({x:ks.x,y:ks.y},$s)},!0,1))}else Fs()},Rs=function(ks){Fs(),ks.touches.length>1||ks.changedTouches.length<=0||Ls({x:ks.changedTouches[0].clientX,y:ks.changedTouches[0].clientY},Ht())},Os=function(ks){Fs(),Ls({x:ks.clientX,y:ks.clientY},Ht())},Fs=function(){var ks;if(Ss.pressState){var Ns=Ht()-Ss.pressState.time;Ss.onPressGesture({x:Ss.pressState.x,y:Ss.pressState.y,delta:Ns},!0),(ks=Ss.pressState)===null||ks===void 0||ks.stop(),delete Ss.pressState}},Vs=function(ks){if(ks&&typeof ks.preventDefault=="function"&&ks.currentTarget===_s&&ks.preventDefault(),typeof getSelection=="function"){var Ns=getSelection();Ns&&Ns.focusNode&&(Ns.removeAllRanges&&Ns.removeAllRanges(),Ns.empty&&Ns.empty())}};return _s.addEventListener("wheel",Is,!1),_s.addEventListener("mousemove",Bs,!1),_s.addEventListener("mouseout",Ps,!1),_s.addEventListener("touchstart",Rs,!1),_s.addEventListener("touchend",Fs,!1),_s.addEventListener("touchcancel",Fs,!1),_s.addEventListener("mousedown",Os,!1),_s.addEventListener("mouseup",Fs,!1),_s.addEventListener("touchstart",Vs,!1),Object.assign(function(){Cs.destroy(),_s.removeEventListener("wheel",Is,!1),_s.removeEventListener("mousemove",Bs,!1),_s.removeEventListener("mouseout",Ps,!1),_s.removeEventListener("touchstart",Rs,!1),_s.removeEventListener("touchend",Fs,!1),_s.removeEventListener("touchcancel",Fs,!1),_s.removeEventListener("mousedown",Os,!1),_s.removeEventListener("mouseup",Fs,!1),_s.removeEventListener("touchstart",Vs,!1)},{element:_s})},ga}(Ot),Mr=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Is=this,Bs=ga.parseArgs(_s);return(Is=ca.call(this,Bs)||this).defaultLongitude=Bs.defaultLongitude,Is.defaultLatitude=Bs.defaultLatitude,Is.defaultFov=Bs.defaultFov,Is.maxFov=Bs.maxFov,Is.minFov=Bs.minFov,Is.maxLatitude=Bs.maxLatitude,Is.minLatitude=Bs.minLatitude,Is.locationMotion=new fn({x:Is.camera.pose.offset.x,y:Is.camera.pose.offset.y,z:Is.camera.pose.offset.z,distance:Is.camera.pose.distance,modelAlpha:(Ms=(Ss=Is.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Is.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Is}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},Ls),{defaultLongitude:(Ss=_s.defaultLongitude)!==null&&Ss!==void 0?Ss:Math.PI/4,defaultLatitude:(Ms=_s.defaultLatitude)!==null&&Ms!==void 0?Ms:Math.PI/4,defaultFov:(Cs=_s.defaultFov)!==null&&Cs!==void 0?Cs:80,maxFov:(Ts=_s.maxFov)!==null&&Ts!==void 0?Ts:120,minFov:(Is=_s.minFov)!==null&&Is!==void 0?Is:40,maxLatitude:(Bs=_s.maxLatitude)!==null&&Bs!==void 0?Bs:+Math.PI/2,minLatitude:(Ps=_s.minLatitude)!==null&&Ps!==void 0?Ps:-Math.PI/2})},ga.initAnimationEndPose=function(_s){var Ss,Ms,Cs,Ts=this.parseArgs(_s),Is=_s.initial[1];return{longitude:(Ss=Is.longitude)!==null&&Ss!==void 0?Ss:Ts.defaultLongitude,latitude:Wi((Ms=Is.latitude)!==null&&Ms!==void 0?Ms:Ts.defaultLatitude,Ts.minLatitude,Ts.maxLatitude),fov:(Cs=Is.fov)!==null&&Cs!==void 0?Cs:Ts.defaultFov,offset:_s.model.bounding.getCenter(new r$2.Vector3)}},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},ga.prototype.isReady=function(){return this.locationMotion.ended!==!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){return this.work=_s,!0},ga.prototype.updateModel=function(_s){ca.prototype.updateModel.call(this,_s);var Ss=_s.bounding.getCenter(new r$2.Vector3),Ms=this.cameraDistance(_s);this.locationMotion.set({x:Ss.x,y:Ss.y,z:Ss.z,distance:Ms},0).catch(Lt)},ga.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={},Cs={};this.locationMotion.ended||(this.locationMotion.update(_s),Ms.modelAlpha=this.locationMotion.value.modelAlpha,Ms.perspToOrtho=Wi(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Cs.distance=this.locationMotion.value.distance,Cs.offset=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(_s),Cs.longitude=this.cameraMotion.value.longitude,Cs.latitude=this.cameraMotion.value.latitude,Cs.fov=this.cameraMotion.value.fov),fr(Ms)||this.model.setMaterial(Ms),fr(Cs)||this.setCamera(Cs)}},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:new r$2.Vector3(Ss.value.x,Ss.value.y,Ss.value.z)}},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Is,Bs,Ps=this;if(!this.destroyed){this.pending=!1,this.userAction=Cs;var Ls=this.model.bounding.getCenter(new r$2.Vector3),Rs={longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:Wi((Is=Ss.latitude)!==null&&Is!==void 0?Is:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:Wi((Bs=Ss.fov)!==null&&Bs!==void 0?Bs:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$2.Vector3)},Os=this.cameraDistance(this.model),Fs=ei(Rs,["longitude","latitude","fov"]),Vs={x:Ls.x,y:Ls.y,z:Ls.z,distance:Os,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",_s,Rs,this.userAction),this.cameraMotion.set(Fs,Ms).catch(Lt),this.locationMotion.set(Vs,Ms).then(function(){Ps.emit("initAnimationEnded",_s,Rs,Ps.userAction)},function(ks){var Ns=gr(Ps.camera.pose);Ps.emit("initAnimationEnded",_s,Ns,Ps.userAction)})}},ga.prototype.updateRenderSize=function(){this.locationMotion.set({distance:this.cameraDistance(this.model)},0)},ga.prototype.cameraDistance=function(_s){var Ss=_s.bounding,Ms=this.camera.aspect,Cs=Math.pow(Math.pow(Ss.max.x-Ss.min.x+1,2)+Math.pow(Ss.max.y-Ss.min.y+1,2)+Math.pow(Ss.max.z-Ss.min.z+1,2),.5),Ts=Cs/2/Math.tan(Math.PI*this.defaultFov/360);return Ms<1&&(Ts/=Ms),isNaN(Ts)?Cs:Ts},ga.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this.work.observers.filter(function(Is){return Is.active}),Ms=this.model.intersectRaycaster(_s)[0];if(!Ms)return null;var Cs=Ar(Ss,function(Is){return Is.standingPosition.distanceTo(Ms.point)},!0),Ts=Cs[0];return Cs[1]<5?this.work.observers.indexOf(Ts):null},ga.prototype.coordinatesForOffset=function(_s){var Ss=this.renderer.getSize(new r$2.Vector2);return{longitude:2*_s.x/(Ss.x*this.scissor.width),latitude:2*_s.y/(Ss.y*this.scissor.height)}},ga.prototype.requestInteriaMovement=function(_s,Ss){var Ms=this;if(this.interiaMovement!==!1){for(var Cs=e$2.__assign({},_s),Ts={longitude:0,latitude:0},Is=0;Is<Ss;Is++)Cs.longitude*=.996,Cs.latitude*=.994008,Ts.longitude+=Cs.longitude,Ts.latitude+=Cs.latitude;var Bs=sr(this.cameraMotion.value.longitude+Ts.longitude),Ps=Wi(this.cameraMotion.value.latitude+Ts.latitude,this.minLatitude,this.maxLatitude),Ls={longitude:Bs,latitude:Ps,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Bs,latitude:Ps},0).catch(Lt);var Rs=Cs.longitude>1e-4||Cs.longitude<-1e-4||Cs.latitude>1e-4||Cs.latitude<-1e-4;this.emit("interiaPan",Ls,!Rs),Rs?se.shared.add(function(Os,Fs){Ms.requestInteriaMovement(Cs,0|Fs)},!0,1):this.interiaMovement=!1}},ga.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(ks){return ei(ks,["x","y"])});if(!this.emit("wantsGesture","pan",Cs,_s.isFinal)){var Ts={x:_s.center.x-Ss.x,y:_s.center.y-Ss.y},Is=this.relativeClientPosition(_s.center),Bs=this.camera.pose.latitude<Math.PI/6||Is.y<0?-1:1;Ts.x*=Bs;var Ps=this.coordinatesForOffset(Ts),Ls=sr(this.cameraMotion.value.longitude+Ps.longitude),Rs=Wi(this.cameraMotion.value.latitude+Ps.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(_s.overallVelocityX)>.2&&Math.atan2(Math.abs(_s.overallVelocityY),Math.abs(_s.overallVelocityX))<Math.PI/6.923&&(Rs=this.cameraMotion.value.latitude);var Os={longitude:Ls,latitude:Rs,fov:this.camera.pose.fov,offset:this.camera.pose.offset};if(!this.emit("wantsPanGesture",Os,_s.isFinal)&&(this.emit("gesture","pan",Cs,_s.isFinal),this.emit("panGesture",Os,_s.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:Os.longitude,latitude:Os.latitude,fov:Os.fov},0).catch(Lt),_s.isFinal&&!this.emit("wantsInteriaPan",Os))){this.interiaMovement=!0;var Fs=_s.velocityX*Bs,Vs=_s.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Fs,y:Vs}),0)}}}},ga.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Cs=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Ts=_s.pointers.map(function(Bs){return ei(Bs,["x","y"])});if(!this.emit("wantsGesture","pinch",Ts,Cs)){var Is=Wi(Ms/_s.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",_s.scale,Is,Cs)||this.emit("wantsChangeCameraFov",Is)||(this.emit("gesture","pinch",Ts,Cs),this.emit("pinchGesture",_s.scale,Is,Cs),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Is},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=this.minFov,Is=this.maxFov,Bs=Wi(this.camera.fov-Ms,Ts,Is);this.emit("wantsMouseWheel",Ms,Bs,!1)||this.emit("wantsChangeCameraFov",Bs)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Bs,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Bs},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Bs,!0)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Bs,!0))},200)})}},ga.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Bs){return ei(Bs,["x","y"])});if(!this.emit("wantsGesture","tap",Ss,!0)){var Ms=this.relativeClientPosition(_s.center),Cs=new r$2.Raycaster;if(Cs.setFromCamera(Ms,this.camera),!this.emit("wantsTapGesture",Cs,Ms,!0)){this.emit("gesture","tap",Ss,!0),this.emit("tapGesture",Cs,Ms,!0),this.interiaMovement=!1;var Ts=this.getForwardPanoIndexOrNot(Cs);if(!qi(Ts)){this.emit("panoSelected",Ts);var Is={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Ts,Is,!0)}}}},ga.prototype.onPressGesture=function(_s,Ss){var Ms,Cs,Ts=[_s];if(this.emit("wantsGesture","press",Ts,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;var Is=this.relativeClientPosition(_s),Bs=new r$2.Raycaster;if(Bs.setFromCamera(Is,this.camera),this.emit("wantsPressGesture",Bs,Is,_s.delta,Ss))return(Cs=this.pressState)===null||Cs===void 0||Cs.stop(),void delete this.pressState;this.emit("gesture","press",Ts,Ss),this.emit("pressGesture",Bs,Is,_s.delta,Ss)},ga}(Br),Pr=function(ca){function ga(_s){var Ss=ga.parseArgs(_s);return ca.call(this,Ss)||this}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss=[_s.initial[0],e$2.__assign(e$2.__assign({},_s.initial[1]),{longitude:0,latitude:Math.PI/2}),_s.initial[2],_s.initial[3]],Ms=e$2.__assign(e$2.__assign({},_s),{initial:Ss,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return ca.parseArgs.call(this,Ms)},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.updateModel=function(_s){this.model=_s,this.needsRender=!0;var Ss=_s.bounding.getCenter(new r$2.Vector3);this.locationMotion.set({x:Ss.x,y:Ss.y,z:Ss.z,distance:this.cameraDistance(_s)},0).catch(Lt)},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Is=this;if(!this.destroyed){this.pending=!1,this.userAction=Cs;var Bs=this.model.bounding.getCenter(new r$2.Vector3),Ps={longitude:0,latitude:Math.PI/2,fov:Wi((Ts=Ss.fov)!==null&&Ts!==void 0?Ts:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$2.Vector3)},Ls=this.cameraDistance(this.model),Rs=ei(Ps,["longitude","latitude","fov"]),Os={x:Bs.x,y:Bs.y,z:Bs.z,distance:Ls,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Rs,Ms).catch(Lt),this.locationMotion.set(Os,Ms).then(function(){Is.emit("initAnimationEnded",_s,Ps,Is.userAction)},function(Fs){var Vs=gr(Is.camera.pose);Is.emit("initAnimationEnded",_s,Vs,Is.userAction)})}},ga.prototype.getZoomOffsetFromFov=function(_s,Ss,Ms){var Cs=new r$2.Vector3(0,-1,0),Ts=Math.tan(Ms/2*Math.PI/180),Is=Math.tan(Ss.fov/2*Math.PI/180),Bs=(Is-Ts)/Is,Ps=new r$2.Raycaster;Ps.setFromCamera(_s,Ss);var Ls=Ps.ray.direction,Rs=Ls.angleTo(Cs),Os=this.cameraDistance(this.model),Fs=Os*Math.tan(Rs),Vs=Ls.clone().setLength(Os*Math.cos(Rs)).projectOnPlane(Cs),ks=Vs.length(),Ns=Bs/ks*Vs.x*Fs,Ds=Bs/ks*Vs.z*Fs;return new r$2.Vector3(Ns,0,Ds)},ga.prototype.requestInteriaMovement=function(_s,Ss){},ga.prototype.onPanGesture=function(_s){var Ss=this.renderer.getSize(new r$2.Vector2),Ms=this.panState,Cs=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Cs,x:_s.center.x,y:_s.center.y},Ms!==void 0&&Ms.pointerLength===Cs){var Ts=_s.pointers.map(function(Ns){return ei(Ns,["x","y"])});if(!this.emit("wantsGesture","pan",Ts,_s.isFinal)){var Is=_s.center.x-Ms.x,Bs=_s.center.y-Ms.y,Ps=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Ls=this.camera.position.y*Math.tan(this.camera.fov/2*Math.PI/180);Ps.add(function(Ns,Ds){var $s=new r$2.Vector3;return $s.setFromMatrixColumn(Ds,0),$s.multiplyScalar(-Ns),$s}(2*Is*Ls/Ss.y,this.camera.matrix)),Ps.add(function(Ns,Ds,$s){var Gs=new r$2.Vector3;return Gs.setFromMatrixColumn($s,0),Gs.crossVectors(Ds,Gs),Gs.multiplyScalar(Ns),Gs}(2*Bs*Ls/Ss.y,this.camera.up,this.camera.matrix));var Rs=this.model.bounding,Os=Rs.getCenter(new r$2.Vector3),Fs=(Rs.max.x-Rs.min.x)/this.defaultFov*this.cameraMotion.value.fov,Vs=(Rs.max.y,Rs.min.y,this.defaultFov,this.cameraMotion.value.fov,(Rs.max.z-Rs.min.z)/this.defaultFov*this.cameraMotion.value.fov);Ps.x=Wi(Ps.x,Os.x-Fs,Os.x+Fs),Ps.z=Wi(Ps.z,Os.z-Vs,Os.z+Vs),Ps.y=Os.y;var ks={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ps};this.emit("wantsPanGesture",ks,_s.isFinal)||(this.emit("gesture","pan",Ts,_s.isFinal),this.emit("panGesture",ks,_s.isFinal),this.userAction=!0,this.locationMotion.set({x:Ps.x,y:Ps.y,z:Ps.z},0).catch(Lt))}}},ga.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Cs=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Ts=_s.pointers.map(function(Rs){return ei(Rs,["x","y"])});if(!this.emit("wantsGesture","pinch",Ts,Cs)){var Is=Wi(Ms/_s.scale,this.minFov,this.maxFov),Bs=this.relativeClientPosition({x:_s.center.x,y:_s.center.y}),Ps=this.getZoomOffsetFromFov(Bs,this.camera,Is),Ls=this.camera.pose.offset.clone().add(Ps);this.emit("wantsPinchGesture",_s.scale,Is,Cs)||this.emit("wantsChangeCameraFov",Is)||(this.emit("gesture","pinch",Ts,Cs),this.emit("pinchGesture",_s.scale,Is,Cs),this.userAction=!0,this.locationMotion.set({x:Ls.x,y:Ls.y,z:Ls.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Is},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=Wi(this.cameraMotion.value.fov-Ms,this.minFov,this.maxFov),Is=this.relativeClientPosition({x:_s.clientX,y:_s.clientY}),Bs=this.getZoomOffsetFromFov(Is,this.camera,Ts),Ps=this.camera.pose.offset.clone().add(Bs);this.emit("wantsMouseWheel",Ms,Ts,!1)||this.emit("wantsChangeCameraFov",Ts)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ts,!1),this.userAction=!0,this.locationMotion.set({x:Ps.x,y:Ps.y,z:Ps.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Ts},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ts,!0)||Ss.emit("wantsChangeCameraFov",Ts)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ts,!0))},200)})}},ga}(Mr);function Tr(ca,ga){ga===void 0&&(ga=!1);var _s=typeof ca;if(_s==="string")return JSON.stringify(ca);if(ca===!0)return"true";if(ca===!1)return"false";if(ca===null)return"null";if(ca instanceof Array){for(var Ss="[",Ms=ca.length-1,Cs=0;Cs<Ms;Cs++)Ss+=Tr(ca[Cs],!1)+",";return Ms>-1&&(Ss+=Tr(ca[Cs],!1)),Ss+"]"}if(ca instanceof Object){if(typeof ca.toJSON=="function")return Tr(ca.toJSON(),ga);var Ts=Object.keys(ca).sort(),Is=Ts.length;for(Ss="",Cs=0;Cs<Is;){var Bs=Ts[Cs],Ps=Tr(ca[Bs],!0);Ps!==void 0&&(Cs&&Ss!==""&&(Ss+=","),Ss+=JSON.stringify(Bs)+":"+Ps),Cs++}return"{"+Ss+"}"}switch(_s){case"function":case"undefined":return ga?void 0:null;case"number":return ca;default:return isFinite(ca)?ca:null}}function Qr(ca){return Pt(String(Tr(ca,!1)))}var Rr,Dr=function(ca){function ga(_s){var Ss=this,Ms=ga.parseArgs(_s);return(Ss=ca.call(this,Ms)||this).defaultLongitude=Ms.defaultLongitude,Ss.defaultLatitude=Ms.defaultLongitude,Ss.defaultFov=Ms.defaultFov,Ss.maxFov=Ms.maxFov,Ss.minFov=Ms.minFov,Ss.maxLatitude=Ms.maxLatitude,Ss.minLatitude=Ms.minLatitude,Ss.moveSpeed=Ms.moveSpeed,Ss.intersectMeshCreator=Ms.intersectMeshCreator,Ss.interiaMovement=!1,Ss.intersectMesh=Ss.intersectMeshCreator(),Ss.intersectMesh.name="intersect",Ss.intersectMesh.visible=!1,Ss.helper.add(Ss.intersectMesh),Ss}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs,Os=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},Os),{defaultLongitude:(Ss=_s.defaultLongitude)!==null&&Ss!==void 0?Ss:0,defaultLatitude:(Ms=_s.defaultLatitude)!==null&&Ms!==void 0?Ms:0,defaultFov:(Cs=_s.defaultFov)!==null&&Cs!==void 0?Cs:90,maxFov:(Ts=_s.maxFov)!==null&&Ts!==void 0?Ts:120,minFov:(Is=_s.minFov)!==null&&Is!==void 0?Is:40,maxLatitude:(Bs=_s.maxLatitude)!==null&&Bs!==void 0?Bs:+Math.PI/2,minLatitude:(Ps=_s.minLatitude)!==null&&Ps!==void 0?Ps:-Math.PI/2,moveSpeed:(Ls=_s.moveSpeed)!==null&&Ls!==void 0?Ls:3.2,intersectMeshCreator:(Rs=_s.intersectMeshCreator)!==null&&Rs!==void 0?Rs:function(){return new Xn}})},ga.initAnimationEndPose=function(_s){var Ss,Ms,Cs,Ts=this.parseArgs(_s),Is=_s.initial,Bs=Is[0],Ps=Is[1];return{longitude:(Ss=Ps.longitude)!==null&&Ss!==void 0?Ss:Ts.defaultLongitude,latitude:Wi((Ms=Ps.latitude)!==null&&Ms!==void 0?Ms:Ts.defaultLatitude,Ts.minLatitude,Ts.maxLatitude),fov:Wi((Cs=Ps.fov)!==null&&Cs!==void 0?Cs:Ts.defaultFov,Ts.minFov,Ts.maxFov),offset:Ts.work.observers[Bs].position.clone()}},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},ga.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&ca.prototype.isReady.call(this)},ga.prototype.calculateMovingDuration=function(_s,Ss){switch(typeof _s){case"function":return _s(Ss,this.moveSpeed);case"number":return _s;case"string":return Number(_s);default:return Math.floor(Math.max(Math.min(Ss/this.moveSpeed*1e3,1500),500))}},ga.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},ga.prototype.coordinatesForOffset=function(_s){var Ss=this.cameraMotion.value.fov,Ms=this.camera.aspect,Cs=this.renderer.getSize(new r$2.Vector2);return{longitude:2*_s.x/(Cs.x*this.scissor.width)*Ss/95*Ms,latitude:-2*_s.y/(Cs.y*this.scissor.height)*Ss/95}},ga.prototype.cameraBounce=function(){var _s=this.cameraMotion.value,Ss=_s.longitude,Ms=_s.latitude,Cs=_s.fov,Ts=[{progress:0,value:{longitude:Ss,latitude:Ms,fov:Cs}},{progress:.5,value:{longitude:Ss,latitude:Ms,fov:.98*Cs}},{progress:1,value:{longitude:Ss,latitude:Ms,fov:Cs}}];this.cameraMotion.setKeyframes(Ts,500).catch(Lt)},ga.prototype.requestInteriaMovement=function(_s,Ss){var Ms=this;if(this.interiaMovement!==!1){for(var Cs=e$2.__assign({},_s),Ts={longitude:0,latitude:0},Is=0;Is<Ss;Is++)Cs.longitude*=.996,Cs.latitude*=.98604,Ts.longitude+=Cs.longitude,Ts.latitude+=Cs.latitude;var Bs=sr(this.cameraMotion.value.longitude+Ts.longitude),Ps=Wi(this.cameraMotion.value.latitude+Ts.latitude,this.minLatitude,this.maxLatitude),Ls={longitude:Bs,latitude:Ps,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Bs,latitude:Ps},0).catch(Lt);var Rs=Cs.longitude>1e-4||Cs.longitude<-1e-4||Cs.latitude>1e-4||Cs.latitude<-1e-4;this.emit("interiaPan",Ls,!Rs),Rs?se.shared.add(function(Os,Fs){Ms.requestInteriaMovement(Cs,0|Fs)},!0,1):this.interiaMovement=!1}},ga.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Vs){return ei(Vs,["x","y"])});if(!this.emit("wantsGesture","pan",Cs,_s.isFinal)){var Ts={x:_s.center.x-Ss.x,y:_s.center.y-Ss.y},Is=this.coordinatesForOffset(Ts),Bs=sr(this.cameraMotion.value.longitude+Is.longitude),Ps=Wi(this.cameraMotion.value.latitude+Is.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(_s.overallVelocityX)>.2&&Math.atan2(Math.abs(_s.overallVelocityY),Math.abs(_s.overallVelocityX))<Math.PI/6.923&&(Ps=this.cameraMotion.value.latitude);var Ls={longitude:Bs,latitude:Ps,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};if(!this.emit("wantsPanGesture",Ls,_s.isFinal)){this.emit("gesture","pan",Cs,_s.isFinal),this.emit("panGesture",Ls,_s.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Rs={longitude:Ls.longitude,latitude:Ls.latitude,fov:Ls.fov};if(this.cameraMotion.set(Rs,0).catch(Lt),_s.isFinal&&!this.emit("wantsInteriaPan",Ls)){this.interiaMovement=!0;var Os=_s.velocityX,Fs=.6*_s.velocityY;Math.abs(Fs)>.5&&Math.abs(Os)<.5&&(Os=0),this.requestInteriaMovement(this.coordinatesForOffset({x:Os,y:Fs}),0)}}}}},ga.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=_s.scale,Ts=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Ts=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Is=_s.pointers.map(function(Ps){return ei(Ps,["x","y"])});if(!this.emit("wantsGesture","pinch",Is,Ts)){var Bs=Wi(Ms/Cs,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Cs,Bs,Ts)||this.emit("wantsChangeCameraFov",Bs)||(this.emit("gesture","pinch",Is,Ts),this.emit("pinchGesture",Cs,Bs,Ts),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Bs},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=Wi(this.cameraMotion.value.fov-Ms,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Ms,Ts,!1)||this.emit("wantsChangeCameraFov",Ts)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ts,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ts},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ts,!0)||Ss.emit("wantsChangeCameraFov",Ts)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ts,!0))},200)})}},ga.prototype.onMouseMove=function(_s){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Ss=this.relativeClientPosition({x:_s.clientX,y:_s.clientY}),Ms=new r$2.Raycaster;if(Ms.setFromCamera(Ss,this.camera),this.emit("wantsShowIntersectionOnModel",Ms))this.hideIntersectMesh();else{var Cs=this.model.intersectRaycaster(Ms)[0];if(Cs&&Cs.face){var Ts=Cs.face.normal,Is=Ts.clone().multiplyScalar(.05),Bs=Cs.point.clone().add(Is);this.intersectMesh.position.copy(Bs);var Ps=Bs.clone().add(Is);if(this.intersectMesh.lookAt(Ps),Math.abs(Ts.y)>.99){var Ls=this.camera.position.clone().sub(Bs);this.intersectMesh.rotation.z=-Math.atan2(Ls.z,Ls.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Cs,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:_s.clientX,clientY:_s.clientY}}}},ga.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},ga.prototype.onPressGesture=function(_s,Ss){var Ms,Cs,Ts=[_s];if(this.emit("wantsGesture","press",Ts,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;var Is=this.relativeClientPosition(_s),Bs=new r$2.Raycaster;if(Bs.setFromCamera(Is,this.camera),this.emit("wantsPressGesture",Bs,Is,_s.delta,Ss))return(Cs=this.pressState)===null||Cs===void 0||Cs.stop(),void delete this.pressState;this.emit("gesture","press",Ts,Ss),this.emit("pressGesture",Bs,Is,_s.delta,Ss)},ga}(Br),kr,Nr=function(ca){function ga(_s,Ss){return Ss===void 0&&(Ss=.5),ca.call(this,_s,{uniforms:{inputBuffer:new r$2.Uniform(null),scale:new r$2.Uniform(Ss)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return e$2.__extends(ga,ca),ga}(Er),Fr=function(ca){function ga(_s,Ss){Ss===void 0&&(Ss=.002);var Ms=ca.call(this,_s,{uniforms:{targetBuffer:new r$2.Uniform(null),inputBuffer:new r$2.Uniform(null),step:new r$2.Uniform(Ss)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Ms.material.extensions.shaderTextureLOD=!0,Ms}return e$2.__extends(ga,ca),Object.defineProperty(ga.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(_s){this.material.uniforms.targetBuffer.value=_s},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(_s){this.material.uniforms.step.value=_s},enumerable:!1,configurable:!0}),ga}(Er),Or=function(ca){function ga(_s){var Ss=ca.call(this,_s,{uniforms:{inputBuffer:new r$2.Uniform(null),luminanceAdaptiveBuffer:new r$2.Uniform(null),progress:new r$2.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Ss.material.transparent=!0,Ss}return e$2.__extends(ga,ca),Object.defineProperty(ga.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(_s){this.material.uniforms.luminanceAdaptiveBuffer.value=_s},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(_s){this.material.uniforms.progress.value=_s},enumerable:!1,configurable:!0}),ga}(Er),Lr=function(ca){function ga(_s){var Ss=ca.call(this,_s)||this;return Ss.enableTime=Ht(),Ss.renderer=_s,Ss.valuePass=new Ir(Ss.renderer),Ss.luminancePass=new Nr(Ss.renderer,Math.sqrt(1/3)),Ss.nextStepPass=new Fr(Ss.renderer,.01),Ss.luminanceAdaptivePass=new Or(Ss.renderer),Ss}return e$2.__extends(ga,ca),ga.prototype.render=function(_s,Ss){if(!this.enable)return this.enableTime=null,void this.copyPass.render(_s);this.enableTime===null&&(this.enableTime=Ht()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$2.WebGLRenderTarget(128,128,{minFilter:r$2.LinearMipmapLinearFilter,magFilter:r$2.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$2.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(_s,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$2.WebGLRenderTarget(1,1,{minFilter:r$2.NearestFilter,magFilter:r$2.NearestFilter,type:r$2.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$2.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$2.WebGLRenderTarget(1,1,{minFilter:r$2.NearestFilter,magFilter:r$2.NearestFilter,type:r$2.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$2.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((Ht()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(_s,Ss)},ga.prototype.dispose=function(){var _s,Ss,Ms;(_s=this.luminanceTargetBuffer)===null||_s===void 0||_s.dispose(),(Ss=this.luminancePrevBuffer)===null||Ss===void 0||Ss.dispose(),(Ms=this.luminanceNextBuffer)===null||Ms===void 0||Ms.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},ga}(Sr),Vr=["up","down","left","right","front","back"],Hr=(kr=Math.SQRT1_2)!==null&&kr!==void 0?kr:Math.sqrt(2),Kr={up:new r$2.Quaternion(Hr,0,0,Hr),down:new r$2.Quaternion(-Hr,0,0,Hr),left:new r$2.Quaternion(0,Hr,0,Hr),right:new r$2.Quaternion(0,-Hr,0,Hr),front:new r$2.Quaternion(0,0,0,1),back:new r$2.Quaternion(0,1,0,0)},zr=new r$2.Quaternion().setFromAxisAngle(new r$2.Vector3(0,1,0),Math.PI),qr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),_r=new Float32Array([0,0,1,0,0,1,1,1]),jr=new Uint8Array([0,1,2,1,3,2]),Ur=new r$2.BufferGeometry;Ur.setAttribute("position",new r$2.BufferAttribute(qr,3)),Ur.setAttribute("uv",new r$2.BufferAttribute(_r,2)),Ur.setIndex(new r$2.BufferAttribute(jr,1));var Gr=function(ca){function ga(){var _s=ca.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return _s.depthTest=!1,_s.depthWrite=!1,_s.blending=r$2.NoBlending,_s.map=_s.uniforms.map.value,_s.luminanceMap=_s.uniforms.luminanceMap.value,Object.defineProperties(_s,{map:{get:function(){return this.uniforms.map.value},set:function(Ss){this.uniforms.map.value=Ss}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Ss){this.uniforms.luminanceMap.value=Ss,this.defines.USE_LUMINANCE=Ss!==null,this.needsUpdate=!0}}}),_s}return e$2.__extends(ga,ca),ga}(r$2.ShaderMaterial),Wr=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.level=0,_s.sideCount=0,_s.col=0,_s.row=0,_s.index=0,_s.type="up",_s}return e$2.__extends(ga,ca),ga}(r$2.Box3),Xr=function(ca){function ga(_s,Ss){var Ms=this,Cs=new Gr;return Cs.visible=!1,(Ms=ca.call(this,Ur,Cs)||this).position.copy(_s.getCenter(new r$2.Vector3)),Ms.quaternion.copy(Kr[_s.type]),Ms.scale.setScalar(1/Math.pow(2,_s.level)),Ms.level=_s.level,Ms.activeTime=-1,Ms.disposed=!1,Ms.needsRender=!1,Ms.frustumCulled=!1,Ss.then(function(Ts){var Is=Ts[0],Bs=Ts[1];Ms.disposed?(Is.dispose(),Bs==null||Bs.dispose()):(Ms.material.map=Is,Ms.material.luminanceMap=Bs,Ms.material.needsUpdate=!0,Ms.material.visible=!0)}).catch(Lt),Ms}return e$2.__extends(ga,ca),ga.getBox=function(_s,Ss,Ms){var Cs=new Wr,Ts=Math.pow(2,_s),Is=1/Ts,Bs=Ms%Ts,Ps=Math.floor(Ms/Ts);switch(Cs.level=_s,Cs.index=Ms,Cs.sideCount=Ts,Cs.row=Ps,Cs.col=Bs,Cs.type=Ss,Ss){case"up":Cs.min.y=.5,Cs.max.y=.5,Cs.min.x=+Bs*Is-.5,Cs.max.x=+Bs*Is-.5+Is,Cs.min.z=-Ps*Is+.5-Is,Cs.max.z=-Ps*Is+.5;break;case"down":Cs.min.y=-.5,Cs.max.y=-.5,Cs.min.x=+Bs*Is-.5,Cs.max.x=+Bs*Is-.5+Is,Cs.min.z=+Ps*Is-.5,Cs.max.z=+Ps*Is-.5+Is;break;case"left":Cs.min.x=-.5,Cs.max.x=-.5,Cs.min.z=-Bs*Is+.5-Is,Cs.max.z=-Bs*Is+.5,Cs.min.y=-Ps*Is+.5-Is,Cs.max.y=-Ps*Is+.5;break;case"right":Cs.min.x=.5,Cs.max.x=.5,Cs.min.z=+Bs*Is-.5,Cs.max.z=+Bs*Is-.5+Is,Cs.min.y=-Ps*Is+.5-Is,Cs.max.y=-Ps*Is+.5;break;case"front":Cs.min.z=-.5,Cs.max.z=-.5,Cs.min.x=+Bs*Is-.5,Cs.max.x=+Bs*Is-.5+Is,Cs.min.y=-Ps*Is+.5-Is,Cs.max.y=-Ps*Is+.5;break;case"back":Cs.min.z=.5,Cs.max.z=.5,Cs.min.x=-Bs*Is+.5-Is,Cs.max.x=-Bs*Is+.5,Cs.min.y=-Ps*Is+.5-Is,Cs.max.y=-Ps*Is+.5}return Cs},ga.prototype.updateTime=function(_s){},ga.prototype.dispose=function(){var _s;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(_s=this.material.luminanceMap)===null||_s===void 0||_s.dispose()),this.material.dispose()},ga}(r$2.Mesh),Yr=function(ca){function ga(){var _s=ca.call(this)||this;return _s.needsRender=!1,_s.name="tiling",_s}return e$2.__extends(ga,ca),ga}(r$2.Group),Zr=function(){function ca(ga,_s){this.disposed=!1,this.textureLoader=new Ii(ga),this.level=0,this.panoIndex=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=_s,this.object=new Yr}return ca.prototype.setAllowHosts=function(ga){this.textureLoader.setAllowHosts(ga)},ca.prototype.setNetworkSubscribe=function(ga){this.textureLoader.setNetworkSubscribe(ga)},ca.prototype.cleanup=function(){for(var ga=0;ga<this.tiles.length;ga++)if(this.tiles[ga]){var _s=this.tiles[ga],Ss="level-group:"+ga,Ms=this.object.getObjectByName(Ss);for(var Cs in _s){var Ts=_s[Cs];Ts.dispose(),Ms.remove(Ts),delete _s[Cs],this.object.needsRender=!0}}},ca.prototype.setRotation=function(ga){if(!this.disposed){var _s=new r$2.Quaternion().multiplyQuaternions(ga,zr);this.object.quaternion.equals(_s)||(this.object.quaternion.copy(_s),this.object.needsRender=!0)}},ca.prototype.setPosition=function(ga){this.disposed||this.object.position.equals(ga)||(this.object.position.copy(ga),this.object.needsRender=!0)},ca.prototype.setResource=function(ga){if(!this.disposed&&this.resource!==ga){this.cleanup(),this.resource=ga;for(var _s=0;_s<ga.length;_s++){var Ss=ga[_s].level;this.tiles[Ss]={};var Ms="level-group:"+Ss,Cs=this.object.getObjectByName(Ms);Cs||((Cs=new r$2.Group).name=Ms,Cs.renderOrder=-2),this.object.add(Cs)}this.object.needsRender=!0}},ca.prototype.setLuminance=function(ga){this.luminance=ga},ca.prototype.getTileResources=function(ga){for(var _s,Ss=(_s=this.imageOptions.size)!==null&&_s!==void 0?_s:2048,Ms=[],Cs=this.resource.length-1;Cs>=0;Cs--)this.resource[Cs].level<=ga&&512*Math.pow(2,this.resource[Cs].level)>Ss&&Ms.unshift(this.resource[Cs]);return Ms},ca.prototype.update=function(ga,_s,Ss){var Ms=this;if(!this.disposed){this.level=_s;var Cs=new r$2.PerspectiveCamera().copy(ga);Cs.position.set(0,0,0),Cs.quaternion.premultiply(this.object.quaternion.clone().inverse()),Cs.updateMatrixWorld(!0),Cs.updateProjectionMatrix();for(var Ts=Cs.getWorldDirection(new r$2.Vector3),Is=new r$2.Frustum().setFromProjectionMatrix(new r$2.Matrix4().multiplyMatrices(Cs.projectionMatrix,Cs.matrixWorldInverse)),Bs=this.getTileResources(_s),Ps=function(Ns){if(Ns){for(var Ds=[],$s=Ns.level,Gs=Math.pow(2,$s),Us=Gs*Gs,Hs=Ls.object.getObjectByName("level-group:"+$s),zs=0,js=Vr;zs<js.length;zs++)for(var Ws=js[zs],Qs=0;Qs<Us;Qs++){var Zs=Xr.getBox($s,Ws,Qs);Is.intersectsBox(Zs)&&Ds.push(Zs)}Ds.sort(function(nl,$u){return nl.getCenter(new r$2.Vector3).angleTo(Ts)-$u.getCenter(new r$2.Vector3).angleTo(Ts)});for(var Xs=[],eu=0,Ys=Ds;eu<Ys.length;eu++){var Js=(Zs=Ys[eu]).sideCount,qs=Zs.row,ru=Zs.col,tu=(Ws=Zs.type,"tile-level:".concat($s,"-face:").concat(Ws,"-row:").concat(qs,"-col:").concat(ru));if(!Ls.tiles[$s][tu]){var nu=Ns[Ws],uu=Ns.size,fu=uu/Js,mu=[fu*ru,fu*qs,fu,fu],vu=e$2.__assign({key:"pano_tile.".concat(Ls.panoIndex,".").concat(Ws,".").concat($s,".").concat(qs,".").concat(ru),basisLoaderInitialized:xi.isInitialized(),cut:mu},ei(Ls.imageOptions,["format","mappings"]));$s<=1&&(vu.format==="jpg"||/\.jpg$/.test(nu))?(fu!==1024&&(vu.size=1024),vu.quality=70):fu!==512&&(vu.size=512);var Eu=Ls.imageOptions.transform?Ls.imageOptions.transform(nu,vu):he(nu,vu),hu=Ls.textureLoader.load(Eu,{preInit:!0}).then(function(nl){return nl.body}),pu=null;if(Ls.luminance){var du=Ls.luminance[Ws],yu=du.match(/\/cube_(\d+)\//),Su=!!yu&&Number(yu[1]);if(Su!==!1){var Cu=uu/Su,bu=e$2.__assign(e$2.__assign({},vu),{size:256,cut:[mu[0]/Cu,mu[1]/Cu,mu[2]/Cu,mu[3]/Cu],key:"pano_tile_luminance.".concat(Ls.panoIndex,".").concat(Ws,".").concat($s,".").concat(qs,".").concat(ru)}),Au=Ls.imageOptions.transform?Ls.imageOptions.transform(du,bu):he(du,bu);pu=Ls.textureLoader.load(Au,{format:r$2.LuminanceFormat,preInit:!0}).then(function(nl){return nl.body}).catch(function(){return null})}}(zu=Ls.tiles[$s][tu]=new Xr(Zs,Promise.all([hu,pu]))).name=tu,zu.renderOrder=$s,Hs.add(zu)}Ls.tiles[$s][tu].activeTime=Ss,Xs.push(tu)}for(var Tu=0,Pu=Object.keys(Ls.tiles[$s]).sort(function(nl,$u){return Ms.tiles[$s][$u].activeTime-Ms.tiles[$s][nl].activeTime}).slice(Math.max(24,Xs.length));Tu<Pu.length;Tu++){tu=Pu[Tu];var zu=Ls.tiles[$s][tu];Hs.remove(zu),zu.dispose(),delete Ls.tiles[$s][tu],Ls.object.needsRender=!0}}},Ls=this,Rs=0,Os=Bs;Rs<Os.length;Rs++)Ps(Os[Rs]);for(var Fs=0;Fs<this.tiles.length;Fs++)if(this.tiles[Fs]){var Vs=Bs.length>0&&Fs<=Bs[Bs.length-1].level;for(var ks in this.tiles[Fs])this.tiles[Fs][ks].visible!==Vs&&(this.tiles[Fs][ks].visible=Vs,this.tiles[Fs][ks].needsRender=!0),this.tiles[Fs][ks].updateTime(Ss)}}},ca.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},ca}(),Jr=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),$r=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),to=new r$2.BufferGeometry;to.setAttribute("position",new r$2.BufferAttribute(Jr,3)),to.setIndex(new r$2.BufferAttribute($r,1));var eo=function(){function ca(){this.material=new r$2.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$2.Uniform(null),matrix:new r$2.Uniform(null),alpha:new r$2.Uniform(null),map:new r$2.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$2.CustomBlending,blendSrc:r$2.SrcAlphaFactor,blendDst:r$2.OneMinusSrcAlphaFactor,blendSrcAlpha:r$2.OneFactor,blendDstAlpha:r$2.OneMinusSrcAlphaFactor}),this.object=new r$2.Mesh(to,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new fn({alpha:0})}return ca.prototype.setMaterial=function(ga){ga?(this.material.uniforms.size.value=ga.size,this.material.uniforms.matrix.value=ga.matrix,this.material.uniforms.map.value=ga.map,this.alphaMotion.set({alpha:ga.alpha},500).catch(Lt),this.material.uniforms.alpha.value=ga.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Lt));var _s=ga!==null;_s!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=_s,this.material.needsUpdate=!0,this.object.visible=ga!==null)},ca.prototype.updateTime=function(ga){this.alphaMotion.ended||(this.alphaMotion.update(ga),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},ca.prototype.dispose=function(){this.material.dispose()},ca}(),io=new r$2.Matrix4().makeRotationAxis(new r$2.Vector3(0,1,0),Math.PI),no=new r$2.Vector3(-1,1,1),ro=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls=this,Rs=ga.parseArgs(_s);(Ls=ca.call(this,Rs)||this).initAnimationed=!1,Ls.currentPanoIndex=Rs.initial[0],Ls.maxAccessibleDistance=Rs.maxAccessibleDistance,Ls.panoTapTriggerRadius=Rs.panoTapTriggerRadius,Ls.panoCircleMeshCreator=Rs.panoCircleMeshCreator,Ls.tileLevelForFov=Rs.tileLevelForFov;var Os=Ls.model.getMaterial()||{},Fs=Os.pano0,Vs=Os.pano1;Fs&&(Vs==null?void 0:Vs.map)!==Fs.map&&(Ls.model.setMaterial({pano0:Vs}),Fs.map.dispose(),(Ss=Fs.luminanceMap)===null||Ss===void 0||Ss.dispose()),Ls.boundingMesh=Ls.generateBoundingMesh(),Ls.boundingMesh.setMaterial(Ls.model.getMaterial()||{}),Ls.boundingMesh.visible=!1,Ls.scene.add(Ls.boundingMesh),Ls.panoMeshes=[],Ls.updatePanoMeshes(),Ls.locationMotion=new fn({count:0,distance:Ls.camera.pose.distance,modelAlpha:(Cs=(Ms=Ls.model.getMaterial())===null||Ms===void 0?void 0:Ms.modelAlpha)!==null&&Cs!==void 0?Cs:0,perspToOrtho:(Is=(Ts=Ls.model.getMaterial())===null||Ts===void 0?void 0:Ts.perspToOrtho)!==null&&Is!==void 0?Is:0}),Ls.panoResources={},Ls.panoResources[Ls.locationMotion.keyframes[0].key=Ls.locationMotion.keyframes[1].key=Zn()]={panoIndex:Ls.currentPanoIndex,workCode:Ls.work.workCode,panoPicture:(Ps=(Bs=Ls.model.getMaterial())===null||Bs===void 0?void 0:Bs.pano1)!==null&&Ps!==void 0?Ps:null,position:Ls.camera.pose.offset.clone(),effect:"fly"};var ks={allowHosts:Ls.work.allowHosts,networkSubscribe:Ls.networkSubscribe};return Ls.textureLoader=new Ii(ks),Ls.tiling=new Zr(ks,Ls.imageOptions),Ls.scene.add(Ls.tiling.object),Ls.panoVideo=new eo,Ls.scene.add(Ls.panoVideo.object),Ls}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Is=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},Is),{maxAccessibleDistance:(Ss=_s.maxAccessibleDistance)!==null&&Ss!==void 0?Ss:5,panoTapTriggerRadius:(Ms=_s.panoTapTriggerRadius)!==null&&Ms!==void 0?Ms:.5,panoCircleMeshCreator:(Cs=_s.panoCircleMeshCreator)!==null&&Cs!==void 0?Cs:function(){return new jn},tileLevelForFov:(Ts=_s.tileLevelForFov)!==null&&Ts!==void 0?Ts:function(Bs,Ps){var Ls=2*Math.atan(Math.tan(Bs/180*Math.PI/2)*(Ps.width/Ps.height))/Math.PI*180,Rs=Math.max(Ps.width/Ls,Ps.height/Bs),Os=Is.imageOptions.size;if(Os===void 0&&Is.work.observers[0]){var Fs=Is.work.observers[0].images.up.match(/\/cube_(\d+)\//);Fs&&(Os=Number(Fs[1]))}return Os===void 0&&(Os=2048),Os<8192&&Rs>40?4:Os<4096&&Rs>24?3:Os<2048&&Rs>10?2:Os<1024&&Rs>6?1:0}})},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){var _s,Ss,Ms=this;ca.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Vs){Ms.helper.remove(Vs),Vs.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Cs=this.videoTexture.image;Cs.pause(),Cs.oncanplay=function(){},Cs.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Ts=(_s=this.model.getMaterial())!==null&&_s!==void 0?_s:{},Is=Ts.pano0,Bs=Ts.pano1,Ps=0,Ls=Object.keys(this.panoResources);Ps<Ls.length;Ps++){var Rs=Ls[Ps],Os=this.panoResources[Rs];if(Os.panoPicture){var Fs=Os.panoPicture.map;Fs&&Fs!==(Is==null?void 0:Is.map)&&Fs!==(Bs==null?void 0:Bs.map)&&(Fs.dispose(),(Ss=Os.panoPicture.luminanceMap)===null||Ss===void 0||Ss.dispose(),Os.panoPicture=null)}delete this.panoResources[Rs]}},ga.prototype.isReady=function(){return this.locationMotion.ended===!0&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){var Is=this;this.userAction=Ts,this.work=_s,this.currentPanoIndex=Ss,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Bs={},Ps=!0;this.boundingMesh&&(Bs=this.boundingMesh.getMaterial()||{},Ps=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ps,this.boundingMesh.setMaterial(Bs),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Ls=0,Rs=this.panoMeshes;Ls<Rs.length;Ls++)Rs[Ls].visible=!1;return this.moveToPano(Ss,{effect:"fade",duration:Cs,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov,moveEndCallback:function(){Is.initAnimationed=!0},moveCancelCallback:function(){Is.initAnimationed=!0}},Ts),!0},ga.prototype.updateModel=function(_s){this.model=_s;var Ss={},Ms=!0;this.boundingMesh&&(Ss=this.boundingMesh.getMaterial()||{},Ms=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Ms,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Ss),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},ga.prototype.updateTime=function(_s,Ss){var Ms,Cs,Ts,Is,Bs,Ps,Ls;if(!this.destroyed){var Rs={},Os={},Fs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Vs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ks=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Ns=this.locationMotion.getKeyFrameSegment(_s),Ds=Ns[0],$s=Ns[1],Gs=this.panoResourceFromLocationMotionKeyframe(Ds),Us=this.panoResourceFromLocationMotionKeyframe($s),Hs=new r$2.Vector3().copy(Gs.position),zs=new r$2.Vector3().copy(Us.position),js=this.locationMotion.value.count-$s.value.count+1;Rs.progress=js,Rs.modelAlpha=this.locationMotion.value.modelAlpha,Rs.perspToOrtho=Wi(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Us.panoPicture&&(js<1?Gs.panoPicture&&(Rs.pano0=Gs.panoPicture):Rs.pano0=Us.panoPicture,Rs.pano1=Us.panoPicture),ks=Rs.useBlackTransition=Us.effect==="instant"||Us.effect==="montage",Us.effect!=="fade"&&Us.effect!=="montage"||(Rs.pano0&&Gs.panoPicture&&(Rs.pano0={map:Rs.pano0.map,luminanceMap:Rs.pano0.luminanceMap,matrix:Gs.panoPicture.matrix.clone().setPosition(Us.position)}),Hs.copy(zs)),Os.distance=this.locationMotion.value.distance,Os.offset=new r$2.Vector3(Hs.x+(zs.x-Hs.x)*js,Hs.y+(zs.y-Hs.y)*js,Hs.z+(zs.z-Hs.z)*js);for(var Ws=[],Qs=[],Zs=0,Xs=this.locationMotion.keyframes;Zs<Xs.length;Zs++){var eu=Xs[Zs],Ys=eu.key,Js=eu.progress;Ys!==void 0&&(Ws.push(Ys),Js>=this.locationMotion.progress&&Qs.push(Ys))}for(var qs=0,ru=Object.keys(this.panoResources);qs<ru.length;qs++){var tu=ru[qs];if(!(Qs.indexOf(tu)>=0)){var nu=this.panoResources[tu];if(nu.panoPicture){var uu=nu.panoPicture.map;if(uu){if(uu===((Ms=Rs.pano0)===null||Ms===void 0?void 0:Ms.map)||uu===((Cs=Rs.pano1)===null||Cs===void 0?void 0:Cs.map))continue;uu.dispose(),(Ts=nu.panoPicture.luminanceMap)===null||Ts===void 0||Ts.dispose(),nu.panoPicture=null}}Ws.indexOf(tu)>=0||delete this.panoResources[tu]}}Gs.workCode===Us.workCode?this.currentPanoIndex=js<.5?Gs.panoIndex:Us.panoIndex:this.currentPanoIndex=Us.panoIndex,this.emit("movingToPano",Vs.panoIndex,Fs.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(_s),Os.longitude=this.cameraMotion.value.longitude,Os.latitude=this.cameraMotion.value.latitude,Os.fov=this.cameraMotion.value.fov),fr(Rs)===!1&&(this.model.setMaterial(Rs),this.boundingMesh.setMaterial(Rs)),fr(Os)===!1&&this.setCamera(Os),this.camera.pose.distance>.1)for(var fu=0;fu<this.work.observers.length;fu++)(hu=this.panoMeshes[fu])&&(hu.visible=!1);else{var mu=this.work.observers[this.currentPanoIndex];if(mu){var vu=mu.visibleNodes.concat(this.currentPanoIndex),Eu=this.getForwardPanoIndexOrNot();for(fu=0;fu<this.work.observers.length;fu++){var hu,pu=this.work.observers[fu];if(hu=this.panoMeshes[fu])if(pu.loadable||pu.active)if(vu.indexOf(fu)!==-1)if(ks)hu.visible=!1,hu.setOpacity(0);else{hu.visible=!0;var du=hu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);hu.setCurrent(Eu===fu),hu.setOpacity(du<.01?0:Wi(1.4/du,.5,.7)),hu.updateTime&&hu.updateTime(_s,Ss)}else hu.visible=!1,hu.setOpacity(0);else hu.visible=!1,hu.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Is=this.boundingMesh.getMaterial())===null||Is===void 0?void 0:Is.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var yu=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var Su=Vs.panoIndex,Cu=this.work.observers[Su];if(Cu)if(tr(this.camera.position,Cu.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Bs=Cu.images.luminance)!==null&&Bs!==void 0?Bs:null),this.tiling.panoIndex!==Su&&this.tiling.cleanup(),this.tiling.panoIndex=Su,this.tiling.setResource((Ls=(Ps=Cu.images)===null||Ps===void 0?void 0:Ps.tiles)!==null&&Ls!==void 0?Ls:[]),this.tiling.setRotation(Cu.quaternion),this.tiling.setPosition(Cu.position);var bu=this.renderer.getSize(new r$2.Vector2);bu.width*=this.scissor.width,bu.height*=this.scissor.height,this.tiling.update(this.camera,this.tileLevelForFov(this.camera.fov,bu),_s)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;yu!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(_s)}},ga.prototype.render=function(){var _s=this.work.observers[this.currentPanoIndex];_s&&_s.video&&(this.needsRender=!0),ca.prototype.render.call(this)},ga.prototype.postProcessing=function(_s,Ss){if(!this.destroyed)return this.effect||(this.effect=new Lr(this.renderer)),this.effect.render(_s,Ss)},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1],Ms=this.panoResourceFromLocationMotionKeyframe(Ss),Cs=this.work.observers[Ms.panoIndex];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:Cs?Cs.position.clone():this.camera.position.clone()}},ga.prototype.moveToPano=function(_s,Ss,Ms){var Cs,Ts,Is,Bs=this,Ps=this.work.observers[_s],Ls=e$2.__assign({key:"pano.".concat(_s),basisLoaderInitialized:xi.isInitialized()},ei(this.imageOptions,["format","size","quality","sharpen","mappings"])),Rs=(Cs=this.imageOptions.transform)!==null&&Cs!==void 0?Cs:he,Os={right:Rs(Ps.images.right,e$2.__assign(e$2.__assign({},Ls),{key:"".concat(Ls.key,".right")})),left:Rs(Ps.images.left,e$2.__assign(e$2.__assign({},Ls),{key:"".concat(Ls.key,".left")})),up:Rs(Ps.images.up,e$2.__assign(e$2.__assign({},Ls),{key:"".concat(Ls.key,".up")})),down:Rs(Ps.images.down,e$2.__assign(e$2.__assign({},Ls),{key:"".concat(Ls.key,".down")})),front:Rs(Ps.images.front,e$2.__assign(e$2.__assign({},Ls),{key:"".concat(Ls.key,".front")})),back:Rs(Ps.images.back,e$2.__assign(e$2.__assign({},Ls),{key:"".concat(Ls.key,".back")}))},Fs={key:"pano_luminance.".concat(_s),basisLoaderInitialized:xi.isInitialized(),size:Ls.size?Ls.size/2:1024},Vs=this.enableIOSEDR&&Ps.images.luminance?{right:Rs(Ps.images.luminance.right,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".right")})),left:Rs(Ps.images.luminance.left,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".left")})),up:Rs(Ps.images.luminance.up,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".up")})),down:Rs(Ps.images.luminance.down,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".down")})),front:Rs(Ps.images.luminance.front,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".front")})),back:Rs(Ps.images.luminance.back,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".back")}))}:null,ks="pano:"+Qr(Os);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===ks)return;var Ns=this.pendingTextureTask.panoIndex;(Ts=this.panoMeshes[Ns])===null||Ts===void 0||Ts.setProgress(0),this.emit("textureAbort",Ns,Ps),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Ds,$s=this.model.getMaterial()||{},Gs=$s.pano0,Us=$s.pano1;if(Gs&&Gs.map.name===ks&&Gs.luminanceMap!==null===this.enableIOSEDR?Ds=Gs:(Us==null?void 0:Us.map.name)===ks&&Us.luminanceMap!==null===this.enableIOSEDR&&(Ds=Us),Ds){var Hs={panoIndex:_s,workCode:this.work.workCode,effect:(Is=Ss.effect)!==null&&Is!==void 0?Is:"fly",panoPicture:{map:Ds.map,luminanceMap:Ds.luminanceMap,matrix:new r$2.Matrix4().compose(Ps.position,Ps.quaternion,no)},position:Ps.position.clone()};se.shared.add(function(){Bs.pending=!1,Bs.emit("panoLoaded",_s),Bs.doMoveToPano(_s,Hs,Ss,Ms)},!0,1)}else{this.pendingTextureTask={panoIndex:_s,hash:ks,onLoad:function(js,Ws){var Qs,Zs;if(Bs.pending=!1,Bs.destroyed)js.body.dispose();else{js.body.name=ks,Bs.emit("panoLoaded",_s);var Xs={panoIndex:_s,workCode:Bs.work.workCode,effect:(Qs=Ss.effect)!==null&&Qs!==void 0?Qs:"fly",panoPicture:{map:js.body,luminanceMap:(Zs=Ws==null?void 0:Ws.body)!==null&&Zs!==void 0?Zs:null,matrix:new r$2.Matrix4().compose(Ps.position,Ps.quaternion,no)},position:Ps.position.clone()};Bs.doMoveToPano(_s,Xs,Ss,Ms)}},onError:function(js){Bs.pending=!1,Ss.moveCancelCallback&&Ss.moveCancelCallback(),Bs.emit("panoLoadError",js,_s),Bs.emit("moveToPanoCanceled",_s)}};var zs=this.panoMeshes[_s];zs&&zs.tap&&zs.tap(),Promise.all([this.textureLoader.loadCube(Os,{format:r$2.RGBFormat,viaAjax:!0},void 0,void 0,function(js){var Ws,Qs;Bs.emit("textureLoading",js,_s,Ps),((Ws=Bs.pendingTextureTask)===null||Ws===void 0?void 0:Ws.hash)===ks&&((Qs=Bs.panoMeshes[_s])===null||Qs===void 0||Qs.setProgress(js))},this.renderer),Vs?this.textureLoader.loadCube(Vs,{format:r$2.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(js){var Ws,Qs,Zs=js[0],Xs=js[1];((Ws=Bs.pendingTextureTask)===null||Ws===void 0?void 0:Ws.hash)===ks?(Bs.pendingTextureTask.onLoad(Zs,Xs),(Qs=Bs.panoMeshes[_s])===null||Qs===void 0||Qs.setProgress(0),delete Bs.pendingTextureTask,Bs.emit("textureLoaded",_s,Ps,Zs.meta)):(Zs.body.dispose(),Xs==null||Xs.body.dispose())}).catch(function(js){var Ws,Qs;((Ws=Bs.pendingTextureTask)===null||Ws===void 0?void 0:Ws.hash)===ks&&(Bs.pendingTextureTask.onError(js),(Qs=Bs.panoMeshes[_s])===null||Qs===void 0||Qs.setProgress(0),delete Bs.pendingTextureTask,Bs.emit("textureError",js,_s,Ps),Bs.emit("error",js))}),this.emit("textureStartLoad",_s,Ps)}},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Is,Bs,Ps=this;if(!this.destroyed){var Ls=!1;this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:Wi((Is=Ss.latitude)!==null&&Is!==void 0?Is:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:Wi((Bs=Ss.fov)!==null&&Bs!==void 0?Bs:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function(Rs,Os){Ls=!0,Ps.emit("initAnimationWillStart",Rs,Os,Ps.userAction)},moveEndCallback:function(Rs,Os){Ps.emit("initAnimationEnded",Rs,Os,Ps.userAction),Ps.initAnimationed=!0},moveCancelCallback:function(){var Rs={longitude:Ps.camera.pose.longitude,latitude:Ps.camera.pose.latitude,fov:Ps.camera.pose.fov,offset:Ps.camera.pose.offset.clone()};Ls===!1&&Ps.emit("initAnimationWillStart",Ps.currentPanoIndex,Rs,Ps.userAction),Ps.emit("initAnimationEnded",Ps.currentPanoIndex,Rs,Ps.userAction),Ps.initAnimationed=!0}},Cs)}},ga.prototype.panoResourceFromLocationMotionKeyframe=function(_s){return this.panoResources[_s.key]},ga.prototype.locationMotionKeyframesLength=function(_s){for(var Ss=0,Ms=1;Ms<_s.length;Ms++){var Cs=this.panoResourceFromLocationMotionKeyframe(_s[Ms-1]).position,Ts=this.panoResourceFromLocationMotionKeyframe(_s[Ms]).position;Ss+=Cs.distanceTo(Ts)*(_s[Ms].value.count-_s[Ms-1].value.count)}return Ss},ga.prototype.updatePanoMeshes=function(_s){_s===void 0&&(_s=!0);for(var Ss={},Ms=0,Cs=this.panoMeshes;Ms<Cs.length;Ms++)Ss[(Ps=Cs[Ms]).name]=Ps;this.panoMeshes.length=0;for(var Ts=0;Ts<this.work.observers.length;Ts++){var Is="panoCircle_".concat(this.work.workCode,"_").concat(Ts),Bs=this.work.observers[Ts],Ps=void 0;if(Ss[Is]?(Ps=Ss[Is],delete Ss[Is]):((Ps=this.panoCircleMeshCreator()).name=Is,this.helper.add(Ps)),Ps.position.copy(Bs.standingPosition),_s&&this.model.loaded&&this.model.bvhs.loaded){var Ls=new r$2.Vector3(0,-1,0),Rs=new r$2.Vector3(0,.1,0).add(Ps.position),Os=new r$2.Raycaster(Rs,Ls,0,.2),Fs=this.model.intersectRaycaster(Os)[0];Fs&&Fs.point.distanceTo(Rs)<.1&&Ps.position.copy(Fs.point)}this.panoMeshes[Ts]=Ps}for(var Vs=0,ks=Object.keys(Ss);Vs<ks.length;Vs++){var Ns=ks[Vs];this.helper.remove(Ss[Ns]),Ss[Ns].dispose(),delete Ss[Ns]}},ga.prototype.generateBoundingMesh=function(_s){_s===void 0&&(_s=!1);for(var Ss=this.model.bounding.clone(),Ms=0,Cs=this.work.observers;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss.expandByPoint(Ts.standingPosition),Ss.expandByPoint(new r$2.Vector3().fromArray([Ts.position.x,2*Ts.position.y-Ts.standingPosition.y,Ts.position.z]))}_s&&Ss.expandByPoint(this.camera.position);var Is=rr(Ss,new r$2.Vector3(1,0,1));return Is.name="panorama_bounding",Is},ga.prototype.doMoveToPano=function(_s,Ss,Ms,Cs){var Ts,Is,Bs,Ps=this;Ms===void 0&&(Ms={}),this.userAction=Cs;var Ls=Ht(),Rs=Zn();this.tiling.cleanup(),this.panoResources[Rs]=Ss;var Os,Fs,Vs;if(this.locationMotion.ended){var ks=this.locationMotion.getKeyFrameSegment(Ls);ks[0];var Ns=ks[1],Ds=this.locationMotion.value,$s=this.panoResourceFromLocationMotionKeyframe(Ns).position,Gs=Ss.position;Os=Math.max($s.distanceTo(Gs),1),Fs=[{key:Ns.key,progress:0,value:e$2.__assign(e$2.__assign({},Ds),{count:0})},{key:Rs,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Vs=0}else{var Us=this.locationMotion.getKeyFrameSegment(Ls),Hs=Us[0],zs=(Ns=Us[1],Ds=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Hs).position),js=($s=this.panoResourceFromLocationMotionKeyframe(Ns).position,Gs=Ss.position,Ns.value.count-Ds.count),Ws=Math.max(zs.distanceTo($s),1)*js;Os=Ws+Math.max($s.distanceTo(Gs),1),Fs=[{key:Hs.key,progress:0,value:e$2.__assign({},Ds)},{key:Ns.key,progress:Ws/Os,value:Ns.value},{key:Rs,progress:1,value:{count:Ns.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Qs=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Zs=this.locationMotionKeyframesLength(Fs);Vs=Qs===0||Qs===0?0:this.locationMotion.getProgressVelocity(Ls)*Qs/Zs}var Xs=this.calculateMovingDuration(Ms.duration,Ms.effect==="fade"||Ms.effect==="montage"?0:Os),eu={longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},Ys={longitude:(Ts=eu.longitude)!==null&&Ts!==void 0?Ts:this.camera.pose.longitude,latitude:(Is=eu.latitude)!==null&&Is!==void 0?Is:this.camera.pose.latitude,fov:(Bs=eu.fov)!==null&&Bs!==void 0?Bs:this.camera.pose.fov,offset:Ss.position.clone()};Ms.moveStartCallback&&Ms.moveStartCallback(_s,Ys),this.emit("panoWillArrive",_s,Ys,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Lt,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(eu,Xs).catch(Lt),this.locationMotion.setKeyframes(Fs,Xs,Vs).then(function(){var Js,qs,ru,tu={longitude:Ps.camera.pose.longitude,latitude:Ps.camera.pose.latitude,fov:Ps.camera.pose.fov,offset:Ps.camera.pose.offset.clone()};Ms.moveEndCallback&&Ms.moveEndCallback(_s,tu),Ps.emit("panoArrived",_s,tu,Cs);var nu=Ps.work.observers[Ps.currentPanoIndex];if(nu&&nu.video&&Ps.videoTexture&&Ps.videoTexture.image instanceof HTMLVideoElement){var uu=io.clone().multiply((ru=(qs=(Js=Ps.model.getMaterial())===null||Js===void 0?void 0:Js.pano1)===null||qs===void 0?void 0:qs.matrix)!==null&&ru!==void 0?ru:new r$2.Matrix4).multiply(nu.video.matrix),fu={map:Ps.videoTexture,size:nu.video.size,matrix:uu,alpha:1},mu=Zn(),vu=Ps.videoTexture.image;vu.setAttribute("uuid",mu),(Rr||(Rr=new Promise(function(Eu){var hu,pu=document.createElement("video");pu.muted=!0,pu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",pu.addEventListener("timeupdate",function du(){pu.removeEventListener("timeupdate",du,!1),clearTimeout(hu);var yu=document.createElement("canvas");yu.width=yu.height=1;var Su=yu.getContext("2d");Su?(Su.drawImage(pu,0,0,1,1),Su.getImageData(0,0,1,1).data[3]>10?Eu(!0):Eu(!1)):Eu(!1)},!1),pu.addEventListener("canplay",function du(){pu.removeEventListener("canplay",du,!1),pu.play()},!1),hu=window.setTimeout(function(){return Eu(!1)},1e3)}))).then(function(Eu){Eu&&nu.video&&vu.getAttribute("uuid")===mu&&(vu.oncanplay=function(){vu.oncanplay=Lt,vu.play()},vu.ontimeupdate=function(){vu.currentTime>.5&&(vu.ontimeupdate=Lt,Ps.panoVideo.setMaterial(fu))},vu.src=nu.video.source)}).catch(function(){vu.removeAttribute("uuid")})}},function(){Ms.moveCancelCallback&&Ms.moveCancelCallback(),Ps.emit("moveToPanoCanceled",_s)})},ga.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this,Ms=this.camera.getWorldDirection(new r$2.Vector3),Cs=this.camera.position.clone(),Ts=this.work.observers[this.currentPanoIndex];if(!Ts)return null;var Is=Ts.accessibleNodes.filter(function(Ds){if(Ds===Ss.currentPanoIndex)return!1;var $s=Ss.work.observers[Ds],Gs=$s.standingPosition.clone().sub(Cs);return Gs.length()!==0&&!(Gs.angleTo(new r$2.Vector3(0,-1,0))<Math.PI/12)&&($s.loadable||$s.active)}),Bs=(_s?_s.ray.direction.clone():Ms.clone()).setY(0);if(Bs.length()===0)return null;for(var Ps=Is.slice().sort(function(Ds,$s){var Gs=Ss.work.observers[Ds].position.clone().setY(Cs.y),Us=Ss.work.observers[$s].position.clone().setY(Cs.y);return Gs.distanceTo(Cs)-Us.distanceTo(Cs)}),Ls=0,Rs=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Ls<Rs.length;Ls++)for(var Os=Rs[Ls],Fs=0,Vs=Ps;Fs<Vs.length;Fs++){var ks=Vs[Fs],Ns=this.work.observers[ks].position.clone().setY(Cs.y).sub(Cs);if(Ns.length()!==0&&Bs.angleTo(Ns)<Os)return ks}return null},ga.prototype.onTapGesture=function(_s){var Ss=this,Ms=_s.pointers.map(function(tu){return ei(tu,["x","y"])});if(!this.emit("wantsGesture","tap",Ms,!0)){var Cs=this.relativeClientPosition(_s.center),Ts=new r$2.Raycaster;if(Ts.setFromCamera(Cs,this.camera),!this.emit("wantsTapGesture",Ts,Cs,!0)){this.emit("gesture","tap",Ms,!0),this.emit("tapGesture",Ts,Cs,!0),this.interiaMovement=!1;var Is=this.camera.getWorldDirection(new r$2.Vector3).setY(0),Bs=null,Ps=this.work.observers[this.currentPanoIndex];if(Ps){var Ls=Ps.accessibleNodes.filter(function(tu){if(tu===Ss.currentPanoIndex)return!1;var nu=Ss.work.observers[tu];return!(nu.position.distanceTo(Ss.camera.position)>Ss.maxAccessibleDistance)&&(nu.loadable||nu.active)}),Rs=this.model.intersectRaycaster(Ts)[0];if(Rs){var Os=Ar(Ls,function(tu){var nu=Ss.work.observers[tu].standingPosition.clone();return nu.clone().sub(Ss.camera.position).setY(0).angleTo(Is)>Math.PI/2?1/0:nu.distanceTo(Rs.point)},!0),Fs=Os[0];Os[1]<this.panoTapTriggerRadius&&(Bs=Fs)}qi(Bs)&&(Bs=this.getForwardPanoIndexOrNot(Ts));for(var Vs=0,ks=this.locationMotion.keyframes;Vs<ks.length;Vs++){var Ns=ks[Vs],Ds=this.panoResourceFromLocationMotionKeyframe(Ns);if(!(Ns.progress<this.locationMotion.progress)&&Ds.panoIndex===Bs){Bs=null;break}}if(this.emit("panoSelected",Bs),qi(Bs))this.locationMotion.ended===!0&&this.cameraBounce();else{var $s=this.work.observers[Bs];if($s.active){for(var Gs={},Us=Math.PI/6,Hs=Math.PI/12,zs=new r$2.Vector3(0,1,0),js=$s.position.clone().setY(0).sub(Ps.position.clone().setY(0)).normalize(),Ws=js.clone().applyAxisAngle(zs,Us),Qs=js.clone().applyAxisAngle(zs,-Us),Zs=[],Xs=[],eu=[],Ys=0,Js=$s.accessibleNodes;Ys<Js.length;Ys++)if((Fs=Js[Ys])!==this.currentPanoIndex&&Fs!==Bs){var qs=this.work.observers[Fs].position.clone().sub($s.position).setY(0);js.angleTo(qs)<Us?eu.push(qs):Ws.angleTo(qs)<Us?Zs.push(qs):Qs.angleTo(qs)<Us&&Xs.push(qs)}var ru=(eu.length>0?eu:e$2.__spreadArray(e$2.__spreadArray([],Zs,!0),Xs,!0)).slice().sort(function(tu,nu){return tu.angleTo(js)-nu.angleTo(js)})[0];ru&&ru.angleTo(Is)>Hs&&(Gs.longitude=Math.atan2(-ru.x,-ru.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Gs.latitude=Wi(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Gs.fov=this.defaultFov),this.emit("wantsMoveToPano",Bs,Gs,!0)}else this.panoMeshes[Bs]&&(this.panoMeshes[Bs].setDisabled(!1),this.panoMeshes[Bs].setLoading(!0))}}}}},ga}(Dr),oo=Math.PI/180,so=180/Math.PI,ao=function(){var ca=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return ca}}(),uo=function(){var ca=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return ca}}(),lo=function(){var ca=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return ca}}(),ho=function(){var ca=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,ga=ca?parseInt(ca[1],10):null;return function(){return ga}}(),co=function(){var ca=!1;if(ho()===65){var ga=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if(ga){var _s=ga[1].split(".");_s[0],_s[1];var Ss=_s[2],Ms=_s[3];ca=parseInt(Ss,10)===3325&&parseInt(Ms,10)<148}}return function(){return ca}}(),po=function(){var ca=ao()&&uo()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return ca}}(),Ao=function(){var ca=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return ca}}();function fo(){var ca=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return Ao()?!ca:ca}var go,vo=(go={},function(ca,ga){go[ca]===void 0&&(console.warn("cardboard: "+ga),go[ca]=!0)});function mo(ca){var ga,_s=ca.indexOf("://");ga=_s!==-1?_s+3:0;var Ss=ca.indexOf("/",ga);return Ss===-1&&(Ss=ca.length),ca.substring(0,Ss)}var yo,bo=function(ca,ga,_s){var Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs,Os,Fs,Vs,ks,Ns,Ds,$s,Gs,Us,Hs,zs,js,Ws,Qs,Zs,Xs,eu,Ys,Js,qs,ru,tu;(function(nu,uu,fu){var mu=uu?uu[0]:0,vu=uu?uu[1]:0,Eu=uu?uu[2]:0,hu=uu?uu[3]:1,pu=mu+mu,du=vu+vu,yu=Eu+Eu,Su=mu*pu,Cu=mu*du,bu=mu*yu,Au=vu*du,Tu=vu*yu,Pu=Eu*yu,zu=hu*pu,nl=hu*du,$u=hu*yu;nu[0]=1-(Au+Pu),nu[1]=Cu+$u,nu[2]=bu-nl,nu[3]=0,nu[4]=Cu-$u,nu[5]=1-(Su+Pu),nu[6]=Tu+zu,nu[7]=0,nu[8]=bu+nl,nu[9]=Tu-zu,nu[10]=1-(Su+Au),nu[11]=0,nu[12]=fu?fu[0]:0,nu[13]=fu?fu[1]:0,nu[14]=fu?fu[2]:0,nu[15]=1})(ca,ga),_s&&function(nu,uu,fu){var mu,vu,Eu,hu,pu,du,yu,Su,Cu,bu,Au,Tu,Pu=fu[0],zu=fu[1],nl=fu[2];uu===nu?(nu[12]=uu[0]*Pu+uu[4]*zu+uu[8]*nl+uu[12],nu[13]=uu[1]*Pu+uu[5]*zu+uu[9]*nl+uu[13],nu[14]=uu[2]*Pu+uu[6]*zu+uu[10]*nl+uu[14],nu[15]=uu[3]*Pu+uu[7]*zu+uu[11]*nl+uu[15]):(mu=uu[0],vu=uu[1],Eu=uu[2],hu=uu[3],pu=uu[4],du=uu[5],yu=uu[6],Su=uu[7],Cu=uu[8],bu=uu[9],Au=uu[10],Tu=uu[11],nu[0]=mu,nu[1]=vu,nu[2]=Eu,nu[3]=hu,nu[4]=pu,nu[5]=du,nu[6]=yu,nu[7]=Su,nu[8]=Cu,nu[9]=bu,nu[10]=Au,nu[11]=Tu,nu[12]=mu*Pu+pu*zu+Cu*nl+uu[12],nu[13]=vu*Pu+du*zu+bu*nl+uu[13],nu[14]=Eu*Pu+yu*zu+Au*nl+uu[14],nu[15]=hu*Pu+Su*zu+Tu*nl+uu[15])}(ca,ca,_s),Ss=ca,Cs=(Ms=ca)[0],Ts=Ms[1],Is=Ms[2],Bs=Ms[3],Ps=Ms[4],Ls=Ms[5],Rs=Ms[6],Os=Ms[7],Fs=Ms[8],Vs=Ms[9],ks=Ms[10],Ns=Ms[11],Ds=Ms[12],$s=Ms[13],Gs=Ms[14],Us=Ms[15],(tu=(Hs=Cs*Ls-Ts*Ps)*(ru=ks*Us-Ns*Gs)-(zs=Cs*Rs-Is*Ps)*(qs=Vs*Us-Ns*$s)+(js=Cs*Os-Bs*Ps)*(Js=Vs*Gs-ks*$s)+(Ws=Ts*Rs-Is*Ls)*(Ys=Fs*Us-Ns*Ds)-(Qs=Ts*Os-Bs*Ls)*(eu=Fs*Gs-ks*Ds)+(Zs=Is*Os-Bs*Rs)*(Xs=Fs*$s-Vs*Ds))&&(tu=1/tu,Ss[0]=(Ls*ru-Rs*qs+Os*Js)*tu,Ss[1]=(Is*qs-Ts*ru-Bs*Js)*tu,Ss[2]=($s*Zs-Gs*Qs+Us*Ws)*tu,Ss[3]=(ks*Qs-Vs*Zs-Ns*Ws)*tu,Ss[4]=(Rs*Ys-Ps*ru-Os*eu)*tu,Ss[5]=(Cs*ru-Is*Ys+Bs*eu)*tu,Ss[6]=(Gs*js-Ds*Zs-Us*zs)*tu,Ss[7]=(Fs*Zs-ks*js+Ns*zs)*tu,Ss[8]=(Ps*qs-Ls*Ys+Os*Xs)*tu,Ss[9]=(Ts*Ys-Cs*qs-Bs*Xs)*tu,Ss[10]=(Ds*Qs-$s*js+Us*Hs)*tu,Ss[11]=(Vs*js-Fs*Qs-Ns*Hs)*tu,Ss[12]=(Ls*eu-Ps*Js-Rs*Xs)*tu,Ss[13]=(Cs*Js-Ts*eu+Is*Xs)*tu,Ss[14]=($s*zs-Ds*Ws-Gs*Hs)*tu,Ss[15]=(Fs*Ws-Vs*zs+ks*Hs)*tu)},wo=function(){function ca(ga,_s){ga===void 0&&(ga=new r$2.Vector3),_s===void 0&&(_s=0),this.sample=ga,this.timestampS=_s}return ca.prototype.set=function(ga,_s){this.sample=ga,this.timestampS=_s},ca.prototype.copy=function(ga){this.set(ga.sample,ga.timestampS)},ca}(),xo=function(){function ca(ga,_s){this.kFilter=ga,this.isDebug=_s,this.currentAccelMeasurement=new wo,this.currentGyroMeasurement=new wo,this.previousGyroMeasurement=new wo,ao()?this.filterQ=new r$2.Quaternion(-1,0,0,1):this.filterQ=new r$2.Quaternion(1,0,0,1),this.previousFilterQ=new r$2.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$2.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$2.Vector3,this.measuredGravity=new r$2.Vector3,this.gyroIntegralQ=new r$2.Quaternion}return ca.prototype.addAccelMeasurement=function(ga,_s){this.currentAccelMeasurement.set(ga,_s)},ca.prototype.addGyroMeasurement=function(ga,_s){this.currentGyroMeasurement.set(ga,_s);var Ss,Ms=_s-this.previousGyroMeasurement.timestampS;Ss=Ms,isNaN(Ss)||Ss<=.001||Ss>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ca.prototype.getOrientation=function(){return this.filterQ},ca.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var ga=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,_s=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,ga);this.gyroIntegralQ.multiply(_s),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(_s);var Ss=new r$2.Quaternion;Ss.copy(this.filterQ),Ss.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Ss),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Ms,Cs=new r$2.Quaternion;Cs.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Cs.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",so*((Ms=Cs).w>1?0:2*Math.acos(Ms.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ts=new r$2.Quaternion;Ts.copy(this.filterQ),Ts.multiply(Cs),this.filterQ.slerp(Ts,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ca.prototype.accelToQuaternion_=function(ga){var _s=new r$2.Vector3;_s.copy(ga),_s.normalize();var Ss=new r$2.Quaternion;return Ss.setFromUnitVectors(new r$2.Vector3(0,0,-1),_s),Ss.inverse(),Ss},ca.prototype.gyroToQuaternionDelta_=function(ga,_s){var Ss=new r$2.Quaternion,Ms=new r$2.Vector3;return Ms.copy(ga),Ms.normalize(),Ss.setFromAxisAngle(Ms,ga.length()*_s),Ss},ca}(),Eo=function(){function ca(ga,_s){this.predictionTimeS=ga,this.isDebug=_s,this.previousQ=new r$2.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$2.Quaternion,this.outQ=new r$2.Quaternion}return ca.prototype.getPrediction=function(ga,_s,Ss){if(!this.previousTimestampS)return this.previousQ.copy(ga),this.previousTimestampS=Ss,ga;var Ms=new r$2.Vector3;Ms.copy(_s),Ms.normalize();var Cs=_s.length();if(Cs<20*oo)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(so*Cs).toFixed(1)),this.outQ.copy(ga),this.previousQ.copy(ga),this.outQ;var Ts=Cs*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Ms,Ts),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(ga),this.previousTimestampS=Ss,this.outQ},ca}(),Io=function(){function ca(ga){this.coefficients=ga}return ca.prototype.distortInverse=function(ga){for(var _s=0,Ss=1,Ms=ga-this.distort(_s);Math.abs(Ss-_s)>1e-4;){var Cs=ga-this.distort(Ss),Ts=Ss-Cs*((Ss-_s)/(Cs-Ms));_s=Ss,Ss=Ts,Ms=Cs}return Ss},ca.prototype.distort=function(ga){for(var _s=ga*ga,Ss=0,Ms=0;Ms<this.coefficients.length;Ms++)Ss=_s*(Ss+this.coefficients[Ms]);return(Ss+1)*ga},ca}(),Co=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},So=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},Bo=function(){function ca(ga,_s,Ss,Ms){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Ss,this.accelerometer=new r$2.Vector3,this.gyroscope=new r$2.Vector3,this.filter=new xo(ga,Ms),this.posePredictor=new Eo(_s,Ms),this.isFirefoxAndroid=lo(),this.isIOS=ao();var Cs=ho();this.isDeviceMotionInRadians=!this.isIOS&&Cs!==null&&Cs<66,this.isWithoutDeviceMotion=co()||po(),this.filterToWorldQ=new r$2.Quaternion,ao()?this.filterToWorldQ.setFromAxisAngle(new r$2.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$2.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$2.Quaternion,this.worldToScreenQ=new r$2.Quaternion,this.originalPoseAdjustQ=new r$2.Quaternion;var Ts=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$2.Vector3(0,0,1),Ts),this.setScreenTransform_(),fo()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$2.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return ca.prototype.getPosition=function(){return null},ca.prototype.getOrientation=function(){var ga;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ts=new r$2.Quaternion().setFromAxisAngle(new r$2.Vector3(0,0,-1),0),Is=new r$2.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Is.setFromAxisAngle(new r$2.Vector3(0,1,0),Math.PI/-2):Is.setFromAxisAngle(new r$2.Vector3(0,1,0),Math.PI/2),Ts.multiply(Is)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Ss=new r$2.Quaternion).setFromAxisAngle(new r$2.Vector3(1,0,0),-Math.PI/2),Ss),ga=this._deviceOrientationQ;var _s=new r$2.Quaternion;return _s.copy(ga),_s.multiply(this.deviceOrientationFilterToWorldQ),_s.multiply(this.resetQ),_s.multiply(this.worldToScreenQ),_s.multiplyQuaternions(this.deviceOrientationFixQ,_s),this.yawOnly&&(_s.x=0,_s.z=0,_s.normalize()),this.orientationOut_[0]=_s.x,this.orientationOut_[1]=_s.y,this.orientationOut_[2]=_s.z,this.orientationOut_[3]=_s.w,this.orientationOut_}var Ss,Ms=this.filter.getOrientation();ga=this.posePredictor.getPrediction(Ms,this.gyroscope,this.previousTimestampS);var Cs=new r$2.Quaternion;return Cs.copy(this.filterToWorldQ),Cs.multiply(this.resetQ),Cs.multiply(ga),Cs.multiply(this.worldToScreenQ),this.yawOnly&&(Cs.x=0,Cs.z=0,Cs.normalize()),this.orientationOut_[0]=Cs.x,this.orientationOut_[1]=Cs.y,this.orientationOut_[2]=Cs.z,this.orientationOut_[3]=Cs.w,this.orientationOut_},ca.prototype.getPose=function(){var ga=new Co;return ga.orientation=this.getOrientation(),ga},ca.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),fo()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ca.prototype.getFrameData=function(ga){var _s=this.getOrientation(),Ss=this.getEyeOffset(),Ms=this.getEyeProjectionMatrix();return ga.pose.angularAcceleration=null,ga.pose.angularVelocity=null,ga.pose.linearAcceleration=null,ga.pose.linearVelocity=null,ga.pose.orientation=_s,ga.pose.position=null,ga.timestamp=this.previousTimestampS,ga.leftProjectionMatrix.set(Ms.left),ga.rightProjectionMatrix.set(Ms.right),bo(ga.leftViewMatrix,_s,Ss.left),bo(ga.rightViewMatrix,_s,Ss.right),ga},ca.prototype.start=function(){if(typeof window=="undefined")return function(){};var ga=this.onDeviceMotion_.bind(this),_s=this.onOrientationChange_.bind(this),Ss=this.onMessage_.bind(this),Ms=this.onDeviceOrientation_.bind(this);return ao()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Cs=window.self!==window.top,Ts=mo(document.referrer),Is=mo(window.location.href);return Cs&&Ts!==Is}()&&window.addEventListener("message",Ss),window.addEventListener("orientationchange",_s),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Ms):window.addEventListener("devicemotion",ga),function(){window.removeEventListener("devicemotion",ga),window.removeEventListener("deviceorientation",_s),window.removeEventListener("orientationchange",_s),window.removeEventListener("message",Ss)}},ca.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},ca.prototype.getEyeProjectionMatrix=function(){var ga=this.getEyeFieldOfView(),_s=this.depthNear,Ss=this.depthFar,Ms={left:[],right:[]},Cs=ga.left.upDegrees*oo,Ts=ga.left.downDegrees*oo,Is=2/((Ps=ga.left.leftDegrees*oo)+(Ls=ga.left.rightDegrees*oo)),Bs=2/(Cs+Ts);Ms.left[0]=Is,Ms.left[1]=0,Ms.left[2]=0,Ms.left[3]=0,Ms.left[4]=0,Ms.left[5]=Bs,Ms.left[6]=0,Ms.left[7]=0,Ms.left[8]=-(Ps-Ls)*Is*.5,Ms.left[9]=(Cs-Ts)*Bs*.5,Ms.left[10]=Ss/(_s-Ss),Ms.left[11]=-1,Ms.left[12]=0,Ms.left[13]=0,Ms.left[14]=Ss*_s/(_s-Ss),Ms.left[15]=0;var Ps,Ls;return Cs=ga.right.upDegrees*oo,Ts=ga.right.downDegrees*oo,Is=2/((Ps=ga.right.leftDegrees*oo)+(Ls=ga.right.rightDegrees*oo)),Bs=2/(Cs+Ts),Ms.right[0]=Is,Ms.right[1]=0,Ms.right[2]=0,Ms.right[3]=0,Ms.right[4]=0,Ms.right[5]=Bs,Ms.right[6]=0,Ms.right[7]=0,Ms.right[8]=-(Ps-Ls)*Is*.5,Ms.right[9]=(Cs-Ts)*Bs*.5,Ms.right[10]=Ss/(_s-Ss),Ms.right[11]=-1,Ms.right[12]=0,Ms.right[13]=0,Ms.right[14]=Ss*_s/(_s-Ss),Ms.right[15]=0,Ms},ca.prototype.getEyeFieldOfView=function(){var ga=this.viewer,_s=this.device,Ss=new Io(ga.distortionCoefficients),Ms=ga.screenLensDistance,Cs=(_s.widthMeters-ga.interLensDistance)/2,Ts=ga.interLensDistance/2,Is=ga.baselineLensDistance-_s.bevelMeters,Bs=_s.heightMeters-Is,Ps=so*Math.atan(Ss.distort(Cs/Ms)),Ls=so*Math.atan(Ss.distort(Ts/Ms)),Rs=so*Math.atan(Ss.distort(Is/Ms)),Os=so*Math.atan(Ss.distort(Bs/Ms)),Fs=new So,Vs=new So;return Fs.leftDegrees=Math.min(Ps,ga.fov),Fs.rightDegrees=Math.min(Ls,ga.fov),Fs.downDegrees=Math.min(Rs,ga.fov),Fs.upDegrees=Math.min(Os,ga.fov),Vs.leftDegrees=Fs.rightDegrees,Vs.rightDegrees=Fs.leftDegrees,Vs.upDegrees=Fs.upDegrees,Vs.downDegrees=Fs.downDegrees,{left:Fs,right:Vs}},ca.prototype.onDeviceOrientation_=function(ga){this._deviceOrientationQ=this._deviceOrientationQ||new r$2.Quaternion;var _s=ga.alpha,Ss=ga.beta,Ms=ga.gamma;_s=(_s||0)*Math.PI/180,Ss=(Ss||0)*Math.PI/180,Ms=(Ms||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$2.Euler(_s,Ss,-Ms,"YXZ"))},ca.prototype.onDeviceMotion_=function(ga){this.updateDeviceMotion_(ga)},ca.prototype.updateDeviceMotion_=function(ga){var _s=ga.accelerationIncludingGravity,Ss=ga.rotationRate,Ms=ga.timeStamp/1e3,Cs=Ms-this.previousTimestampS;return Cs<0?(vo("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Ms)):Cs<=.001||Cs>1?(vo("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Ms)):(_s&&(this.accelerometer.set(-_s.x,-_s.y,-_s.z),Ss&&(Ao()?this.gyroscope.set(-Ss.beta,Ss.alpha,Ss.gamma):this.gyroscope.set(Ss.alpha,Ss.beta,Ss.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Ms)),this.filter.addAccelMeasurement(this.accelerometer,Ms)),void(this.previousTimestampS=Ms))},ca.prototype.onOrientationChange_=function(){this.setScreenTransform_()},ca.prototype.onMessage_=function(ga){var _s=ga.data;_s&&_s.type&&_s.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(_s.deviceMotionEvent)},ca.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$2.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$2.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ca}(),Mo=[0,0,.5,1],Po=[.5,0,.5,1],To=function(){function ca(ga){var _s=this;this.renderer=ga,this.sensor=new Bo(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$2.PerspectiveCamera,this.cameraR=new r$2.PerspectiveCamera;var Ss=this.sensor.start();this.dispose=function(){var Ms=_s.renderer.getSize(new r$2.Vector2);_s.renderer.setScissor(0,0,Ms.width,Ms.height),_s.renderer.setViewport(0,0,Ms.width,Ms.height),_s.renderer.setScissorTest(!1),Ss()}}return ca.prototype.render=function(ga,_s){var Ss=this.renderer.getSize(new r$2.Vector2);if(Ss.width>Ss.height){var Ms=ga.autoUpdate;Ms&&(ga.updateMatrixWorld(),ga.autoUpdate=!1);var Cs={x:Math.round(Ss.width*Mo[0]),y:Math.round(Ss.height*Mo[1]),width:Math.round(Ss.width*Mo[2]),height:Math.round(Ss.height*Mo[3])},Ts={x:Math.round(Ss.width*Po[0]),y:Math.round(Ss.height*Po[1]),width:Math.round(Ss.width*Po[2]),height:Math.round(Ss.height*Po[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),_s.parent===null&&_s.updateMatrixWorld(),_s.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),_s.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Is=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$2.Vector3().fromArray(Is.left),this.scale),this.cameraR.translateOnAxis(new r$2.Vector3().fromArray(Is.right),this.scale);var Bs=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Bs.left.slice(),this.cameraR.projectionMatrix.elements=Bs.right.slice(),this.renderer.setViewport(Cs.x,Cs.y,Cs.width,Cs.height),this.renderer.setScissor(Cs.x,Cs.y,Cs.width,Cs.height),this.renderer.render(ga,this.cameraL),this.renderer.setViewport(Ts.x,Ts.y,Ts.width,Ts.height),this.renderer.setScissor(Ts.x,Ts.y,Ts.width,Ts.height),this.renderer.render(ga,this.cameraR),this.renderer.setViewport(0,0,Ss.width,Ss.height),this.renderer.setScissor(0,0,Ss.width,Ss.height),this.renderer.setScissorTest(!1),Ms&&(ga.autoUpdate=!0)}else this.renderer.render(ga,_s)},ca.prototype.dispose=function(){},ca}(),Qo={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},Ro=typeof navigator!="undefined"&&(yo=Qo[navigator.language.split("-")[0]])!==null&&yo!==void 0?yo:Qo.zh,Do=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(Ro.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(Ro.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function ko(ca){for(var ga=1,_s=document.getElementsByTagName("meta"),Ss=0;Ss<_s.length;Ss++){var Ms=_s[Ss];if(Ms.getAttribute("name")==="viewport"){var Cs=(Ms.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Cs&&(ga=Number(Cs[1])),isNaN(ga)&&(ga=1)}}return Do.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,ca).replace(/(\d+)px/g,function(Ts,Is){return function(Bs){return Math.floor(Bs*ga)+"px"}(Number(Is))})}var No=new r$2.CircleBufferGeometry(.12,16),Fo=function(){var ca=ge(),ga=new r$2.Texture;return ca.onload=function(){if(typeof document!="undefined"){var _s=256,Ss=document.createElement("canvas");Ss.setAttribute("width",String(_s)),Ss.setAttribute("height",String(_s));var Ms=Ss.getContext("2d");if(Ms){Ms.drawImage(ca,0,0,_s,_s),Ms.globalCompositeOperation="source-out";var Cs=128;Ms.beginPath(),Ms.lineWidth=6.4,Ms.arc(Cs,Cs,83.2,0,2*Math.PI),Ms.strokeStyle="rgba(255, 255, 255, 1.0)",Ms.closePath(),Ms.stroke(),ga.image=Ss,ga.needsUpdate=!0}}},ca.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",ga}(),Oo=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256;return ga.beginPath(),ga.arc(_s,_s,192,0,2*Math.PI),ga.fillStyle="rgba(255, 255, 255, 0.1)",ga.closePath(),ga.fill(),ga.save(),ga.beginPath(),ga.arc(_s,_s,192,0,2*Math.PI),ga.strokeStyle="rgba(255, 255, 255, 0.5)",ga.lineWidth=10.24,ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),Lo=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256;_s.arc(Ss,Ss,192,0,2*Math.PI),_s.fillStyle="rgba(85, 90, 255, 0.6)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.fill(),_s.arc(Ss,Ss,192,0,2*Math.PI);var Ms=_s.createRadialGradient(Ss,Ss,0,Ss,Ss,Ss);Ms.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.2)"),_s.fillStyle=Ms,_s.fill(),_s.lineWidth=4.8,_s.arc(Ss,Ss,187.2,0,2*Math.PI);var Cs=_s.createLinearGradient(0,0,0,ca);return Cs.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Cs.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Cs,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),Vo=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256,Ms=179.2;_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.fillStyle="rgba(255, 255, 255, 0.4)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.fill(),_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Cs=_s.createRadialGradient(Ss,Ss,0,Ss,Ss,Ss);Cs.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(1,"rgba(255, 255, 255, 0.5)"),_s.fillStyle=Cs,_s.fill(),_s.lineWidth=4.8,_s.arc(Ss,Ss,Ms-4.8,0,2*Math.PI);var Ts=_s.createLinearGradient(0,0,0,ca);return Ts.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ts.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Ts,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),Ho=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256,Ms=217.6,Cs=64;_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.strokeStyle="rgba(147, 162, 255, 0.3)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.stroke(),_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Ts=_s.createRadialGradient(Ss,Ss,185.6,Ss,Ss,249.6);Ts.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ts.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(1,"rgba(255, 255, 255, 0.5)"),_s.strokeStyle=Ts,_s.stroke(),_s.beginPath(),_s.lineWidth=4,_s.arc(Ss,Ss,245.6,0,2*Math.PI);var Is=_s.createLinearGradient(0,0,ca,0);return Is.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Is.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Is.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Is.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Is,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),Ko=function(ca){function ga(){var _s=ca.call(this)||this;_s.progress=0,_s.opacity=0,_s.loading=!1,_s.current=!1,_s.disabled=!1,_s.opacityMotion=new fn({opacity:0}),_s.loadingMotion=new fn({opacity:0}),_s.currentMotion=new fn({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Ss={blending:r$2.CustomBlending,blendSrc:r$2.SrcAlphaFactor,blendDst:r$2.OneMinusSrcAlphaFactor,blendSrcAlpha:r$2.OneFactor,blendDstAlpha:r$2.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return _s.hitTestMesh=new r$2.Mesh(No,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{color:0,opacity:0}))),_s.hitTestMesh.scale.set(1.5,1.5,1.5),_s.centerMesh=new r$2.Mesh(No,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Lo,opacity:0}))),_s.centerMesh2=new r$2.Mesh(No,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Vo,opacity:0}))),_s.ringMesh=new r$2.Mesh(No,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Ho,opacity:0}))),_s.loadingMesh=new r$2.Mesh(No,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Fo,opacity:.8}))),_s.disableMesh=new r$2.Mesh(No,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Oo}))),_s.loadingMesh.visible=!1,_s.disableMesh.visible=!1,_s.hitTestMesh.position.z=0,_s.ringMesh.position.z=.003,_s.disableMesh.position.z=.002,_s.centerMesh.position.z=.002,_s.centerMesh2.position.z=.002,_s.loadingMesh.position.z=.005,_s.hitTestMesh.frustumCulled=!1,_s.centerMesh.frustumCulled=!1,_s.centerMesh2.frustumCulled=!1,_s.ringMesh.frustumCulled=!1,_s.loadingMesh.frustumCulled=!1,_s.disableMesh.frustumCulled=!1,_s.add(_s.hitTestMesh),_s.add(_s.centerMesh),_s.add(_s.centerMesh2),_s.add(_s.ringMesh),_s.add(_s.loadingMesh),_s.add(_s.disableMesh),_s.renderOrder=1e4,_s.needsRender=!0,_s}return e$2.__extends(ga,ca),ga.prototype.setProgress=function(_s){this.progress=_s,this.setLoading(_s>0)},ga.prototype.setOpacity=function(_s){this.opacity!==_s&&(this.opacity=_s=Wi(_s,0,1),this.opacityMotion.set({opacity:_s},30).catch(Lt))},ga.prototype.setCurrent=function(_s){if(this.current!==_s){if(_s){var Ss=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Ss,1500).catch(Lt)}else Ss=[{progress:0,value:e$2.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Ss,200).catch(Lt);this.current=_s}},ga.prototype.setLoading=function(_s){this.loading!==_s&&(_s?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=_s,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},ga.prototype.setDisabled=function(_s){this.disabled!==_s&&(this.disabled=_s,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=_s,this.centerMesh.visible=!_s,this.needsRender=!0)},ga.prototype.tap=function(){return Promise.resolve()},ga.prototype.updateTime=function(_s,Ss){this.opacityMotion.update(_s),this.currentMotion.update(_s),this.loadingMotion.update(_s);var Ms=this.opacityMotion.value.opacity,Cs=this.currentMotion.value,Ts=Cs.ringScale,Is=Cs.ringOpacity,Bs=Cs.circleFade,Ps=Cs.circleOpacity,Ls=Cs.circleScale;if(this.ringMesh.scale.set(Ts,Ts,Ts),this.centerMesh.scale.set(Ls,Ls,Ls),this.centerMesh2.scale.set(Ls,Ls,Ls),this.ringMesh.material.opacity=Is*Ms,this.centerMesh.material.opacity=(1-Bs)*Ms,this.centerMesh2.material.opacity=Bs*Ps*Ms,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Ss/200);var Rs=this.opacityMotion.value.opacity,Os=1.1;this.centerMesh.scale.set(Os,Os,Os),this.centerMesh2.scale.set(Os,Os,Os),this.centerMesh.material.opacity=0*Rs,this.centerMesh2.material.opacity=.2*Rs}else this.loadingMesh.visible=!1;this.needsRender=!0},ga.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},ga}(r$2.Object3D),zo=function(ca){function ga(_s){var Ss=this,Ms=ga.parseArgs(_s);(Ss=ca.call(this,Ms)||this).cardboard=new To(Ss.renderer);var Cs,Ts,Is,Bs=(Cs="five_vr_helper_"+Zn(),Ts=ko(Cs),(Is=document.createElement("div")).className=Cs,Is.innerHTML=Ts,Is);Ss.helperElement=Bs;var Ps=new vr(Bs);return Ss.element.parentNode&&(Ss.element.parentNode.insertBefore(Bs,Ss.element),Ss.setHelperElementSize(),Ps.on("tap",function(){return Ss.emit("vrWantsToExit")})),Ss.destroyHelper=function(){Ps.destroy(),Bs.parentNode&&Bs.parentNode.removeChild(Bs),delete Ss.helperElement},Ss.boundingMesh.visible=!0,Ss}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss=e$2.__assign(e$2.__assign({},_s),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return ca.parseArgs.call(this,Ss)},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var _s=0,Ss=this.panoMeshes;_s<Ss.length;_s++){var Ms=Ss[_s];this.helper.remove(Ms),Ms.dispose()}this.panoMeshes.length=0},ga.prototype.isReady=function(){return!1},ga.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},ga.prototype.updatePanoMeshes=function(){var _s=this;this.panoMeshes.forEach(function(Ts){_s.helper.remove(Ts),Ts.dispose()}),this.panoMeshes.length=0;for(var Ss=0;Ss<this.work.observers.length;Ss++){var Ms=this.work.observers[Ss],Cs=new Ko;Cs.name="panoSphere_".concat(this.work.workCode,"_").concat(Ss),Cs.position.copy(Ms.position),Cs.needsRender=!0,this.helper.add(Cs),this.panoMeshes[Ss]=Cs}},ga.prototype.updateTime=function(_s,Ss){var Ms,Cs;if(!this.destroyed){this.needsRender=!0;var Ts={},Is={};if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Bs=this.locationMotion.getKeyFrameSegment(_s),Ps=Bs[0],Ls=Bs[1],Rs=this.panoResourceFromLocationMotionKeyframe(Ps),Os=this.panoResourceFromLocationMotionKeyframe(Ls),Fs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Vs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ks=Rs.position,Ns=Os.position,Ds=this.locationMotion.value.count-Ls.value.count+1;Ts.modelAlpha=this.locationMotion.value.modelAlpha,Ts.perspToOrtho=Wi(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ts.useBlackTransition=Os.effect==="instant",Os.panoPicture&&(Ds<1?Rs.panoPicture&&(Ts.pano0=Rs.panoPicture):Ts.pano0=Os.panoPicture,Ts.pano1=Os.panoPicture),Os.effect==="fade"&&(Ts.pano0&&Rs.panoPicture&&(Ts.pano0={map:Ts.pano0.map,luminanceMap:Ts.pano0.luminanceMap,matrix:Rs.panoPicture.matrix.clone().setPosition(Os.position)}),ks.copy(Ns)),Ts.progress=Ds,Is.distance=this.locationMotion.value.distance,Is.offset=new r$2.Vector3(ks.x+(Ns.x-ks.x)*Ds,ks.y+(Ns.y-ks.y)*Ds,ks.z+(Ns.z-ks.z)*Ds);for(var $s=[],Gs=[],Us=0,Hs=this.locationMotion.keyframes;Us<Hs.length;Us++){var zs=Hs[Us],js=zs.key,Ws=zs.progress;js!==void 0&&($s.push(js),Ws>=this.locationMotion.progress&&Gs.push(js))}for(var Qs=0,Zs=Object.keys(this.panoResources);Qs<Zs.length;Qs++){var Xs=Zs[Qs];if(!(Gs.indexOf(Xs)>=0)){var eu=this.panoResources[Xs];if(eu.panoPicture){var Ys=eu.panoPicture.map;if(Ys){if(Ys===((Ms=Ts.pano0)===null||Ms===void 0?void 0:Ms.map)||Ys===((Cs=Ts.pano1)===null||Cs===void 0?void 0:Cs.map))continue;Ys.dispose(),eu.panoPicture=null}}$s.indexOf(Xs)>=0||delete this.panoResources[Xs]}}this.currentPanoIndex=Ds<.5?Rs.panoIndex:Os.panoIndex,this.emit("movingToPano",Vs.panoIndex,Fs.panoIndex,this.locationMotion.progress)}fr(Ts)===!1&&(this.model.setMaterial(Ts),this.boundingMesh.setMaterial(Ts)),Is.offset&&this.camera.position.copy(Is.offset);var Js=this.camera.pose.longitude,qs=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var ru=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),tu=0;tu<this.work.observers.length;tu++){var nu=this.work.observers[tu];if((mu=this.panoMeshes[tu]).visible=!0,nu.loadable||nu.active){if(ru.indexOf(tu)===-1)mu.visible=!1;else{mu.visible=!0;var uu=mu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);uu<.05?mu.setOpacity(0):mu.setOpacity(Wi(1.5/uu,0,1)),this.currentPanoIndex===tu&&mu.setOpacity(0)}mu.lookAt(this.camera.position)}else mu.visible=!0}var fu=this.intersect(_s);for(tu=0;tu<this.work.observers.length;tu++)(mu=this.panoMeshes[tu])==null||mu.setCurrent(mu===fu);for(tu=0;tu<this.work.observers.length;tu++){var mu;(mu=this.panoMeshes[tu])&&mu.updateTime&&mu.updateTime(_s,Ss)}Js===this.camera.pose.longitude&&qs===this.camera.pose.latitude||(this.cameraMotion.set(ei(this.camera.pose,["longitude","latitude"]),0).catch(Lt),this.emit("cameraDirectionUpdate",ei(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",gr(ei(this.camera.pose,["longitude","latitude","fov","offset"])),!0))}},ga.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},ga.prototype.setCamera=function(_s){},ga.prototype.destroyHelper=function(){},ga.prototype.setHelperElementSize=function(){if(this.helperElement){var _s=new r$2.Vector2(this.element.offsetWidth,this.element.offsetHeight),Ss=_s.x*this.scissor.left,Ms=_s.y*(1-this.scissor.bottom-this.scissor.height),Cs=_s.x*this.scissor.width,Ts=_s.y*this.scissor.height;this.helperElement.style.marginLeft=Ss+"px",this.helperElement.style.marginTop=Ms+"px",this.helperElement.style.width=Cs+"px",this.helperElement.style.height=Ts+"px"}},ga.prototype.intersect=function(_s){var Ss;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&_s-this.activeTime>1500){var Ms=this.activePanoMesh;return(Ls=this.panoMeshes.indexOf(Ms))>=0&&this.moveToPano(Ls,{},!0),delete this.activePanoMesh,delete this.activeTime,Ms}for(var Cs=this.camera.getWorldDirection(new r$2.Vector3),Ts=new r$2.Raycaster(this.camera.position,Cs),Is=void 0,Bs=[],Ps=this.work.observers[this.currentPanoIndex].visibleNodes,Ls=0;Ls<this.work.observers.length;Ls++){var Rs=this.panoMeshes[Ls];if(Ps.indexOf(Ls)!==-1){var Os=Ts.intersectObject((Ss=Rs.hitTestMesh)!==null&&Ss!==void 0?Ss:Rs,!0)[0];Os&&Bs.push({panoMesh:Rs,intersection:Os})}}var Fs=Bs.sort(function($s,Gs){return $s.intersection.distance-Gs.intersection.distance})[0];if(Fs?(Is=Fs.intersection,this.activePanoMesh!==Fs.panoMesh&&(this.activePanoMesh=Fs.panoMesh,this.activeTime=_s),this.intersectMesh.position.copy(Fs.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Is)if((Is=this.model.intersectRaycaster(Ts)[0])&&Is.face){var Vs=Is.face.normal,ks=new r$2.Quaternion;ks.setFromUnitVectors(new r$2.Vector3(0,0,1),Vs),this.intersectMesh.quaternion.copy(ks);var Ns=Vs.clone().multiplyScalar(.05),Ds=Is.point.clone().add(Ns);this.intersectMesh.position.copy(Ds),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Is,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Fs==null?void 0:Fs.panoMesh},ga.prototype.onPanGesture=function(){},ga.prototype.onTapGesture=function(){},ga.prototype.onPinchGesture=function(){},ga.prototype.onMouseMove=function(){},ga.prototype.onMouseOut=function(){},ga}(ro),qo=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Is=this,Bs=ga.parseArgs(_s);return(Is=ca.call(this,Bs)||this).currentPanoIndex=Bs.initial[0],Is.locationMotion=new fn({x:Is.camera.pose.offset.x,y:Is.camera.pose.offset.y,z:Is.camera.pose.offset.z,distance:Is.camera.pose.distance,modelAlpha:(Ms=(Ss=Is.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Is.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Is}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){return ca.parseArgs.call(this,_s)},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.locationMotion.dispose()},ga.prototype.isReady=function(){return this.locationMotion.ended!==!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){this.work=_s,this.currentPanoIndex=Ss,this.hideIntersectMesh();var Is={duration:0,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov};return this.moveToPano(Ss,Is,Ts),!0},ga.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={},Cs={};if(!this.locationMotion.ended){this.locationMotion.update(_s),Ms.modelAlpha=this.locationMotion.value.modelAlpha,Ms.perspToOrtho=Wi(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Cs.distance=this.locationMotion.value.distance,Cs.offset=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Ts=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Is=Ar(this.work.observers,function(Bs){return Bs.position.distanceTo(Ts)});this.currentPanoIndex=this.work.observers.indexOf(Is)}this.cameraMotion.ended||(this.cameraMotion.update(_s),Cs.longitude=this.cameraMotion.value.longitude,Cs.latitude=this.cameraMotion.value.latitude,Cs.fov=this.cameraMotion.value.fov),fr(Ms)||this.model.setMaterial(Ms),fr(Cs)||this.setCamera(Cs)}},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Is,Bs,Ps=this;this.destroyed||(this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:Wi((Is=Ss.latitude)!==null&&Is!==void 0?Is:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:Wi((Bs=Ss.fov)!==null&&Bs!==void 0?Bs:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function(Ls,Rs){Ps.emit("initAnimationWillStart",Ls,Rs,Ps.userAction)},moveEndCallback:function(Ls,Rs){Ps.emit("initAnimationEnded",Ls,Rs,Ps.userAction)},moveCancelCallback:function(){var Ls=Ps.currentPanoIndex,Rs={longitude:Ps.camera.pose.longitude,latitude:Ps.camera.pose.latitude,fov:Ps.camera.pose.fov,offset:Ps.camera.pose.offset.clone()};Ps.emit("initAnimationEnded",Ls,Rs,Ps.userAction)}},Cs))},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:new r$2.Vector3(Ss.value.x,Ss.value.y,Ss.value.z)}},ga.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={});var Cs=this.work.observers[_s];Cs&&this.moveToPosition(Cs.position,Ss,Ms)},ga.prototype.moveToPosition=function(_s,Ss,Ms){var Cs,Ts,Is,Bs=this;Ss===void 0&&(Ss={}),this.userAction=Ms;for(var Ps=Ht(),Ls=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(_s),Rs=this.locationMotion.getProgressVelocity(Ps),Os=0,Fs=1;Fs<this.locationMotion.keyframes.length;Fs++){var Vs=this.locationMotion.keyframes[Fs-1].value,ks=Vs.x,Ns=Vs.y,Ds=Vs.z,$s=this.locationMotion.keyframes[Fs].value,Gs=$s.x,Us=$s.y,Hs=$s.z;Os+=Math.sqrt(Math.pow(Gs-ks,2)+Math.pow(Us-Ns,2)+Math.pow(Hs-Ds,2))}var zs=Ls===0?0:Rs*Os/Ls,js=this.calculateMovingDuration(Ss.duration,Ls),Ws={x:_s.x,y:_s.y,z:_s.z,distance:0,modelAlpha:1,perspToOrtho:0},Qs={longitude:Ss.longitude,latitude:Ss.latitude,fov:Ss.fov},Zs={longitude:(Cs=Qs.longitude)!==null&&Cs!==void 0?Cs:this.camera.pose.longitude,latitude:(Ts=Qs.latitude)!==null&&Ts!==void 0?Ts:this.camera.pose.latitude,fov:(Is=Qs.fov)!==null&&Is!==void 0?Is:this.camera.pose.fov,offset:_s.clone()},Xs=Ar(this.work.observers,function(Ys){return Ys.position.distanceTo(_s)}),eu=this.work.observers.indexOf(Xs);this.emit("moveToPano",eu,this.userAction),Ss.moveStartCallback&&Ss.moveStartCallback(eu,Zs),this.emit("panoWillArrive",eu,Zs,this.userAction),this.cameraMotion.set(Qs,js).catch(Lt),this.locationMotion.set(Ws,js,zs).then(function(){var Ys=gr(Bs.camera.pose);Ss.moveEndCallback&&Ss.moveEndCallback(eu,Ys),Bs.emit("panoArrived",eu,Ys,Bs.userAction)},function(){Ss.moveCancelCallback&&Ss.moveCancelCallback(),Bs.emit("moveToPanoCanceled",eu)})},ga.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Vs){return ei(Vs,["x","y"])});if(!this.emit("wantsGesture","tap",Ss,!0)){var Ms=this.relativeClientPosition(_s.center),Cs=new r$2.Raycaster;if(Cs.setFromCamera(Ms,this.camera),!this.emit("wantsTapGesture",Cs,Ms,!0)){this.emit("gesture","tap",Ss,!0),this.emit("tapGesture",Cs,Ms,!0),this.interiaMovement=!1;var Ts=this.model.intersectRaycaster(Cs)[0];if(Ts&&Ts.face){var Is=Ts.face.normal,Bs=Ts.point;if(new r$2.Vector3(0,1,0).angleTo(Is)>Math.PI/3){var Ps=this.camera.position.clone().setY(Bs.y),Ls=Bs.clone().sub(Ps).setLength(.3),Rs=Bs.clone().sub(Ls);Cs.set(Rs,new r$2.Vector3(0,-1,0)),Ts=this.model.intersectRaycaster(Cs)[0]}}if(Ts){var Os=Ts.point.clone(),Fs=Ar(this.work.observers.filter(function(Vs){return Math.abs(Vs.standingPosition.y-Os.y)<1}),function(Vs){return Vs.standingPosition.distanceTo(Os)});if(Fs)return Os.y=Fs.position.y,void this.moveToPosition(Os,{},!0)}this.cameraBounce()}}},ga}(Dr),_o=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),jo=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Uo=Object.assign({opacity:new r$2.Uniform(1),scale:new r$2.Uniform(13.1),panoMap:new r$2.Uniform(null),panoDisplacementMap:new r$2.Uniform(null),panoPosition:new r$2.Uniform(new r$2.Vector3),panoMatrix:new r$2.Uniform(new r$2.Matrix4)},{emissive:new r$2.Uniform(new r$2.Color(0)),emissiveMap:new r$2.Uniform(null),specular:new r$2.Uniform(new r$2.Color(1118481)),specularMap:new r$2.Uniform(null),normalMap:new r$2.Uniform(null),bumpMap:new r$2.Uniform(null),shininess:new r$2.Uniform(30)},r$2.UniformsLib.common,r$2.UniformsLib.lights),Go=new r$2.SphereBufferGeometry(.01,128,128),Wo=function(){function ca(ga){ga===void 0&&(ga={}),this.textureLoader=new Ii({allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}),this.allowHosts=ga.allowHosts,this.networkSubscribe=ga.networkSubscribe}return ca.prototype.setAllowHosts=function(ga){this.allowHosts=ga,this.textureLoader.setAllowHosts(ga)},ca.prototype.setNetworkSubscribe=function(ga){this.networkSubscribe=ga,this.textureLoader.setNetworkSubscribe(ga)},ca.prototype.load=function(ga,_s,Ss,Ms,Cs,Ts,Is,Bs){var Ps=[0,0],Ls=function(Os,Fs){Ps[Fs]=Os,Is(.8*Ps[0]+.2*Ps[1])},Rs=[this.textureLoader.load(ga,{viaAjax:!0},void 0,void 0,function(Os){return Ls(Os,1)},Bs),this.textureLoader.loadCube(_s,{viaAjax:!0},void 0,void 0,function(Os){return Ls(Os,0)},Bs)];return Promise.all(Rs).then(function(Os){var Fs=Os[0],Vs=Os[1],ks={body:function(Ns,Ds,$s,Gs){var Us=new r$2.ShaderMaterial({side:r$2.BackSide,vertexShader:_o,fragmentShader:jo,transparent:!0,uniforms:r$2.UniformsUtils.clone(Uo)}),Hs=Ds;return Hs.needsUpdate=!0,Hs.minFilter=r$2.LinearFilter,Hs.magFilter=r$2.LinearFilter,Ns.needsUpdate=!0,Ns.minFilter=r$2.LinearFilter,Ns.magFilter=r$2.LinearFilter,Us.uniforms.opacity.value=0,Us.uniforms.panoMap.value=Hs,Us.uniforms.panoDisplacementMap.value=Ns,Us.uniforms.panoPosition.value=$s,Us.uniforms.panoMatrix.value=Gs,Object.assign(new r$2.Mesh(Go,Us),{frustumCulled:!1,dispose:function(){this.material instanceof r$2.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Fs.body,Vs.body,Ss,Ms),meta:e$2.__spreadArray([Fs.meta],Vs.meta,!0)};return Cs(ks),ks}).catch(function(Os){for(var Fs=0,Vs=Rs;Fs<Vs.length;Fs++)Vs[Fs].then(function(ks){return ks.body.dispose()}).catch(Lt);return Ts(Os),Promise.reject(Os)})},ca}(),Xo=new r$2.Vector3(-1,1,1),Yo=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls=this,Rs=ga.parseArgs(_s);return(Ls=ca.call(this,Rs)||this).currentPanoIndex=Rs.initial[0],Ls.maxAccessibleDistance=Rs.maxAccessibleDistance,Ls.panoTapTriggerRadius=Rs.panoTapTriggerRadius,Ls.panoCircleMeshCreator=Rs.panoCircleMeshCreator,Ls.boundingMesh=Ls.generateBoundingMesh(),Ls.boundingMesh.setMaterial(Ls.model.getMaterial()||{}),Ls.boundingMesh.visible=!1,Ls.scene.add(Ls.boundingMesh),Ls.panoModelGroup=new r$2.Group,Ls.panoModelGroup.name="panoModels",Ls.scene.add(Ls.panoModelGroup),Ls.panoMeshes=[],Ls.updatePanoMeshes(),Ls.helper.remove(Ls.intersectMesh),Ls.locationMotion=new fn({count:0,distance:Ls.camera.pose.distance,modelAlpha:(Ms=(Ss=Ls.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Ls.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Ls.panoResources={},Ls.panoResources[Ls.locationMotion.keyframes[0].key=Ls.locationMotion.keyframes[1].key=Zn()]={panoIndex:Ls.currentPanoIndex,workCode:Ls.work.workCode,matrix:(Ps=(Bs=(Is=Ls.model.getMaterial())===null||Is===void 0?void 0:Is.pano1)===null||Bs===void 0?void 0:Bs.matrix)!==null&&Ps!==void 0?Ps:new r$2.Matrix4,position:Ls.camera.pose.offset.clone(),effect:"fly"},Ls.depthTextureLoader=new Wo({allowHosts:Ls.work.allowHosts,networkSubscribe:Ls.networkSubscribe}),Ls}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},Ts),{maxAccessibleDistance:(Ss=_s.maxAccessibleDistance)!==null&&Ss!==void 0?Ss:5,panoTapTriggerRadius:(Ms=_s.panoTapTriggerRadius)!==null&&Ms!==void 0?Ms:1,panoCircleMeshCreator:(Cs=_s.panoCircleMeshCreator)!==null&&Cs!==void 0?Cs:function(){return new jn}})},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){var _s,Ss=this;if(ca.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Ms=0,Cs=this.panoModelGroup.children;Ms<Cs.length;Ms++){var Ts=Cs[Ms];typeof Ts.dispose=="function"&&Ts.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Vs){Ss.helper.remove(Vs),Vs.dispose()}),this.panoMeshes.length=0);for(var Is=(_s=this.model.getMaterial())!==null&&_s!==void 0?_s:{},Bs=Is.pano0,Ps=Is.pano1,Ls=0,Rs=Object.keys(this.panoResources);Ls<Rs.length;Ls++){var Os=Rs[Ls],Fs=this.panoResources[Os];Fs.panoModel&&Fs.panoModel.material.uniforms.panoMap.value!==(Bs==null?void 0:Bs.map)&&Fs.panoModel.material.uniforms.panoMap.value!==(Ps==null?void 0:Ps.map)&&(this.panoModelGroup.remove(Fs.panoModel),Fs.panoModel.material.uniforms.panoMap.value.dispose(),Fs.panoModel.dispose(),delete Fs.panoModel),delete this.panoResources[Os]}this.interiaMovement=!1},ga.prototype.isReady=function(){return this.locationMotion.ended===!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){this.userAction=Ts,this.work=_s,this.currentPanoIndex=Ss,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Is={},Bs=!0;this.boundingMesh&&(Is=this.boundingMesh.getMaterial()||{},Bs=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Bs,this.boundingMesh.setMaterial(Is),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Ps=0,Ls=this.panoMeshes;Ps<Ls.length;Ps++)Ls[Ps].visible=!1;return this.moveToPano(Ss,{effect:"fade",duration:Cs,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},Ts),!0},ga.prototype.updateTime=function(_s,Ss){var Ms,Cs,Ts;if(!this.destroyed){var Is={},Bs={},Ps=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Ls=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Rs=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Os=this.locationMotion.getKeyFrameSegment(_s),Fs=Os[0],Vs=Os[1],ks=this.panoResourceFromLocationMotionKeyframe(Fs),Ns=this.panoResourceFromLocationMotionKeyframe(Vs),Ds=new r$2.Vector3().copy(ks.position),$s=new r$2.Vector3().copy(Ns.position),Gs=this.locationMotion.value.count-Vs.value.count+1;Is.progress=Gs,Is.modelAlpha=this.locationMotion.value.modelAlpha,Is.perspToOrtho=Wi(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var Us=0,Hs=this.panoModelGroup.children;Us<Hs.length;Us++){var zs=Hs[Us];zs.visible=zs===ks.panoModel||zs===Ns.panoModel}ks.panoModel&&(ks.panoModel.material.uniforms.opacity.value=1-Gs,ks.panoModel.material.depthTest=Gs!==0),Ns.panoModel&&(Ns.panoModel.material.uniforms.opacity.value=Gs,Ns.panoModel.material.depthTest=Gs!==1),Ns.panoModel&&(Gs<1?ks.panoModel&&(Is.pano0={map:ks.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:ks.matrix}):Is.pano0={map:Ns.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Ns.matrix},Is.pano1={map:Ns.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Ns.matrix}),Rs=Is.useBlackTransition=Ns.effect==="instant"||Ns.effect==="montage",Ns.effect!=="fade"&&Ns.effect!=="montage"||(Is.pano0&&(Is.pano0={map:Is.pano0.map,luminanceMap:null,matrix:ks.matrix.clone().setPosition(Ns.position)}),Ds.copy($s)),Bs.distance=this.locationMotion.value.distance,Bs.offset=new r$2.Vector3(Ds.x+($s.x-Ds.x)*Gs,Ds.y+($s.y-Ds.y)*Gs,Ds.z+($s.z-Ds.z)*Gs);for(var js=[],Ws=[],Qs=0,Zs=this.locationMotion.keyframes;Qs<Zs.length;Qs++){var Xs=Zs[Qs],eu=Xs.key,Ys=Xs.progress;eu!==void 0&&(js.push(eu),Ys>=this.locationMotion.progress&&Ws.push(eu))}for(var Js=0,qs=Object.keys(this.panoResources);Js<qs.length;Js++){var ru=qs[Js];if(!(Ws.indexOf(ru)>=0)){var tu=this.panoResources[ru];if(tu.panoModel){if(tu.panoModel.material.uniforms.panoMap.value===((Ms=Is.pano0)===null||Ms===void 0?void 0:Ms.map)||tu.panoModel.material.uniforms.panoMap.value===((Cs=Is.pano1)===null||Cs===void 0?void 0:Cs.map))continue;this.panoModelGroup.remove(tu.panoModel),tu.panoModel.material.uniforms.panoMap.value.dispose(),tu.panoModel.dispose(),delete tu.panoModel}js.indexOf(ru)>=0||delete this.panoResources[ru]}}ks.workCode===Ns.workCode?this.currentPanoIndex=Gs<.5?ks.panoIndex:Ns.panoIndex:this.currentPanoIndex=Ns.panoIndex,this.emit("movingToPano",Ls.panoIndex,Ps.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(_s),Bs.longitude=this.cameraMotion.value.longitude,Bs.latitude=this.cameraMotion.value.latitude,Bs.fov=this.cameraMotion.value.fov),fr(Is)===!1&&(this.model.setMaterial(Is),this.boundingMesh.setMaterial(Is)),fr(Bs)===!1&&this.setCamera(Bs),this.camera.pose.distance>.1)for(var nu=0;nu<this.work.observers.length;nu++)(vu=this.panoMeshes[nu])&&(vu.visible=!1);else{var uu=this.work.observers[this.currentPanoIndex];if(uu){var fu=uu.visibleNodes.concat(this.currentPanoIndex),mu=this.getForwardPanoIndexOrNot();for(nu=0;nu<this.work.observers.length;nu++){var vu,Eu=this.work.observers[nu];if(vu=this.panoMeshes[nu])if(Eu.loadable||Eu.active)if(fu.indexOf(nu)!==-1)if(Rs)vu.visible=!1,vu.setOpacity(0);else{vu.visible=!0;var hu=vu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);vu.setCurrent(mu===nu),vu.setOpacity(hu<.01?0:Wi(1.4/hu,.5,.7)),vu.updateTime&&vu.updateTime(_s,Ss)}else vu.visible=!1,vu.setOpacity(0);else vu.visible=!1,vu.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Ts=this.boundingMesh.getMaterial())===null||Ts===void 0?void 0:Ts.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1],Ms=this.panoResourceFromLocationMotionKeyframe(Ss),Cs=this.work.observers[Ms.panoIndex];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:Cs?Cs.position.clone():this.camera.position.clone()}},ga.prototype.moveToPano=function(_s,Ss,Ms){var Cs,Ts,Is=this;Ss===void 0&&(Ss={});var Bs=this.work.observers[_s].images.depth,Ps=e$2.__assign({key:"pano.".concat(_s),basisLoaderInitialized:xi.isInitialized()},ei(this.imageOptions,["format","size","quality","sharpen","mappings"])),Ls=(Cs=this.imageOptions.transform)!==null&&Cs!==void 0?Cs:he,Rs={right:Ls(this.work.observers[_s].images.right,e$2.__assign(e$2.__assign({},Ps),{key:"pano.".concat(_s,".right")})),left:Ls(this.work.observers[_s].images.left,e$2.__assign(e$2.__assign({},Ps),{key:"pano.".concat(_s,".left")})),up:Ls(this.work.observers[_s].images.up,e$2.__assign(e$2.__assign({},Ps),{key:"pano.".concat(_s,".up")})),down:Ls(this.work.observers[_s].images.down,e$2.__assign(e$2.__assign({},Ps),{key:"pano.".concat(_s,".down")})),front:Ls(this.work.observers[_s].images.front,e$2.__assign(e$2.__assign({},Ps),{key:"pano.".concat(_s,".front")})),back:Ls(this.work.observers[_s].images.back,e$2.__assign(e$2.__assign({},Ps),{key:"pano.".concat(_s,".back")}))},Os=this.work.observers[_s],Fs=Os.position,Vs=Os.quaternion,ks=new r$2.Matrix4().compose(Fs,Vs,new r$2.Vector3(-1,1,1)),Ns="pano:"+Qr(Rs);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Ns)return;var Ds=this.pendingTextureTask.panoIndex;(Ts=this.panoMeshes[Ds])===null||Ts===void 0||Ts.setProgress(0),this.emit("textureAbort",Ds,this.work.observers[Ds]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:_s,hash:Ns,onLoad:function(Gs){Is.pending=!1,Is.destroyed?Gs.body.dispose():(Gs.body.name=Ns,Is.emit("panoLoaded",_s),Is.doMoveToPano(_s,Gs.body,Ss,Ms))},onError:function(Gs){Is.pending=!1,Ss.moveCancelCallback&&Ss.moveCancelCallback(),Is.emit("panoLoadError",Gs,_s),Is.emit("moveToPanoCanceled",_s)}};var $s=this.panoMeshes[_s];$s&&$s.tap&&$s.tap(),this.depthTextureLoader.load(Bs,Rs,Fs,ks,function(Gs){var Us,Hs;((Us=Is.pendingTextureTask)===null||Us===void 0?void 0:Us.hash)===Ns?(Is.pendingTextureTask.onLoad(Gs),(Hs=Is.panoMeshes[_s])===null||Hs===void 0||Hs.setProgress(0),delete Is.pendingTextureTask,Is.emit("textureLoaded",_s,Is.work.observers[_s],Gs.meta)):Gs.body.dispose()},function(Gs){var Us,Hs;((Us=Is.pendingTextureTask)===null||Us===void 0?void 0:Us.hash)===Ns&&(Is.pendingTextureTask.onError(Gs),(Hs=Is.panoMeshes[_s])===null||Hs===void 0||Hs.setProgress(0),delete Is.pendingTextureTask,Is.emit("textureError",Gs,_s,Is.work.observers[_s]),Is.emit("error",Gs))},function(Gs){var Us,Hs;Is.emit("textureLoading",Gs,_s,Is.work.observers[_s]),((Us=Is.pendingTextureTask)===null||Us===void 0?void 0:Us.hash)===Ns&&((Hs=Is.panoMeshes[_s])===null||Hs===void 0||Hs.setProgress(Gs))},this.renderer),this.emit("textureStartLoad",_s,this.work.observers[_s])},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Is,Bs,Ps=this;if(!this.destroyed){var Ls=!1;this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:Wi((Is=Ss.latitude)!==null&&Is!==void 0?Is:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:Wi((Bs=Ss.fov)!==null&&Bs!==void 0?Bs:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function(Rs,Os){Ls=!0,Ps.emit("initAnimationWillStart",Rs,Os,Ps.userAction)},moveEndCallback:function(Rs,Os){Ps.emit("initAnimationEnded",Rs,Os,Ps.userAction)},moveCancelCallback:function(){var Rs=gr(Ps.camera.pose);Ls===!1&&Ps.emit("initAnimationWillStart",Ps.currentPanoIndex,Rs,Ps.userAction),Ps.emit("initAnimationEnded",Ps.currentPanoIndex,Rs,Ps.userAction)}},Cs)}},ga.prototype.panoResourceFromLocationMotionKeyframe=function(_s){return this.panoResources[_s.key]},ga.prototype.locationMotionKeyframesLength=function(_s){for(var Ss=0,Ms=1;Ms<_s.length;Ms++){var Cs=this.panoResourceFromLocationMotionKeyframe(_s[Ms-1]).position,Ts=this.panoResourceFromLocationMotionKeyframe(_s[Ms]).position;Ss+=Cs.distanceTo(Ts)*(_s[Ms].value.count-_s[Ms-1].value.count)}return Ss},ga.prototype.updatePanoMeshes=function(){for(var _s={},Ss=0,Ms=this.panoMeshes;Ss<Ms.length;Ss++)_s[(Bs=Ms[Ss]).name]=Bs;this.panoMeshes.length=0;for(var Cs=0;Cs<this.work.observers.length;Cs++){var Ts="panoCircle_".concat(this.work.workCode,"_").concat(Cs),Is=this.work.observers[Cs],Bs=void 0;_s[Ts]?(Bs=_s[Ts],delete _s[Ts]):((Bs=this.panoCircleMeshCreator()).name=Ts,this.helper.add(Bs)),Bs.position.copy(Is.standingPosition),this.panoMeshes[Cs]=Bs}for(var Ps=0,Ls=Object.keys(_s);Ps<Ls.length;Ps++){var Rs=Ls[Ps];this.helper.remove(_s[Rs]),_s[Rs].dispose(),delete _s[Rs]}},ga.prototype.generateBoundingMesh=function(_s){_s===void 0&&(_s=!1);for(var Ss=this.model.bounding.clone(),Ms=0,Cs=this.work.observers;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss.expandByPoint(Ts.standingPosition),Ss.expandByPoint(new r$2.Vector3().fromArray([Ts.position.x,2*Ts.position.y-Ts.standingPosition.y,Ts.position.z]))}_s&&Ss.expandByPoint(this.camera.position);var Is=rr(Ss,new r$2.Vector3(1,0,1));return Is.name="panorama_bounding",Is.frustumCulled=!1,Is},ga.prototype.doMoveToPano=function(_s,Ss,Ms,Cs){var Ts,Is,Bs,Ps,Ls=this;Ms===void 0&&(Ms={}),this.userAction=Cs;var Rs=Ht(),Os=Zn(),Fs=this.work.observers[_s],Vs=this.panoResources[Os]={panoIndex:_s,workCode:this.work.workCode,effect:(Ts=Ms.effect)!==null&&Ts!==void 0?Ts:"fly",panoModel:Ss,matrix:new r$2.Matrix4().compose(Fs.position,Fs.quaternion,Xo),position:Fs.position.clone()};Ss.visible=!1,Ss.renderOrder=-1,this.panoModelGroup.add(Ss);var ks,Ns,Ds;if(this.locationMotion.ended){var $s=this.locationMotion.getKeyFrameSegment(Rs);$s[0];var Gs=$s[1],Us=this.locationMotion.value,Hs=this.panoResourceFromLocationMotionKeyframe(Gs).position,zs=Vs.position;ks=Math.max(Hs.distanceTo(zs),1),Ns=[{key:Gs.key,progress:0,value:e$2.__assign(e$2.__assign({},Us),{count:0})},{key:Os,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Ds=0}else{var js=this.locationMotion.getKeyFrameSegment(Rs),Ws=js[0],Qs=(Gs=js[1],Us=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Ws).position),Zs=(Hs=this.panoResourceFromLocationMotionKeyframe(Gs).position,zs=Vs.position,Gs.value.count-Us.count),Xs=Math.max(Qs.distanceTo(Hs),1)*Zs;ks=Xs+Math.max(Hs.distanceTo(zs),1),Ns=[{key:Ws.key,progress:0,value:e$2.__assign({},Us)},{key:Gs.key,progress:Xs/ks,value:Gs.value},{key:Os,progress:1,value:{count:Gs.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var eu=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ys=this.locationMotionKeyframesLength(Ns);Ds=eu===0||eu===0?0:this.locationMotion.getProgressVelocity(Rs)*eu/Ys}var Js=this.calculateMovingDuration(Ms.duration,Ms.effect==="fade"||Ms.effect==="montage"?0:ks),qs={longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},ru={longitude:(Is=qs.longitude)!==null&&Is!==void 0?Is:this.camera.pose.longitude,latitude:(Bs=qs.latitude)!==null&&Bs!==void 0?Bs:this.camera.pose.latitude,fov:(Ps=qs.fov)!==null&&Ps!==void 0?Ps:this.camera.pose.fov,offset:Fs.position.clone()};Ms.moveStartCallback&&Ms.moveStartCallback(_s,ru),this.emit("panoWillArrive",_s,ru,this.userAction),this.cameraMotion.set(qs,Js).catch(Lt),this.locationMotion.setKeyframes(Ns,Js,Ds).then(function(){var tu={longitude:Ls.camera.pose.longitude,latitude:Ls.camera.pose.latitude,fov:Ls.camera.pose.fov,offset:Ls.camera.pose.offset.clone()};Ms.moveEndCallback&&Ms.moveEndCallback(_s,tu),Ls.emit("panoArrived",_s,tu,Cs)},function(){Ms.moveCancelCallback&&Ms.moveCancelCallback(),Ls.emit("moveToPanoCanceled",_s)})},ga.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this,Ms=this.camera.getWorldDirection(new r$2.Vector3),Cs=this.camera.position.clone(),Ts=this.work.observers[this.currentPanoIndex];if(!Ts)return null;var Is=Ts.accessibleNodes.filter(function(Ds){if(Ds===Ss.currentPanoIndex)return!1;var $s=Ss.work.observers[Ds],Gs=$s.standingPosition.clone().sub(Cs);return Gs.length()!==0&&!(Gs.angleTo(new r$2.Vector3(0,-1,0))<Math.PI/12)&&($s.loadable||$s.active)}),Bs=(_s?_s.ray.direction.clone():Ms.clone()).setY(0);if(Bs.length()===0)return null;for(var Ps=Is.slice().sort(function(Ds,$s){var Gs=Ss.work.observers[Ds].position.clone().setY(Cs.y),Us=Ss.work.observers[$s].position.clone().setY(Cs.y);return Gs.distanceTo(Cs)-Us.distanceTo(Cs)}),Ls=0,Rs=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Ls<Rs.length;Ls++)for(var Os=Rs[Ls],Fs=0,Vs=Ps;Fs<Vs.length;Fs++){var ks=Vs[Fs],Ns=this.work.observers[ks].position.clone().setY(Cs.y).sub(Cs);if(Ns.length()!==0&&Bs.angleTo(Ns)<Os)return ks}return null},ga.prototype.onTapGesture=function(_s){var Ss=this,Ms=_s.pointers.map(function(tu){return ei(tu,["x","y"])});if(!this.emit("wantsGesture","tap",Ms,!0)){var Cs=this.relativeClientPosition(_s.center),Ts=new r$2.Raycaster;if(Ts.setFromCamera(Cs,this.camera),!this.emit("wantsTapGesture",Ts,Cs,!0)){this.emit("gesture","tap",Ms,!0),this.emit("tapGesture",Ts,Cs,!0),this.interiaMovement=!1;var Is=this.camera.getWorldDirection(new r$2.Vector3).setY(0),Bs=null,Ps=this.work.observers[this.currentPanoIndex];if(Ps){var Ls=Ps.accessibleNodes.filter(function(tu){if(tu===Ss.currentPanoIndex)return!1;var nu=Ss.work.observers[tu];return!(nu.position.distanceTo(Ss.camera.position)>Ss.maxAccessibleDistance)&&(nu.loadable||nu.active)}),Rs=Ts.intersectObject(this.boundingMesh,!0)[0];if(Rs){var Os=Ar(Ls,function(tu){var nu=Ss.work.observers[tu].standingPosition.clone();return nu.clone().sub(Ss.camera.position).setY(0).angleTo(Is)>Math.PI/2?1/0:nu.distanceTo(Rs.point)},!0),Fs=Os[0];Os[1]<this.panoTapTriggerRadius&&(Bs=Fs)}qi(Bs)&&(Bs=this.getForwardPanoIndexOrNot(Ts));for(var Vs=0,ks=this.locationMotion.keyframes;Vs<ks.length;Vs++){var Ns=ks[Vs],Ds=this.panoResourceFromLocationMotionKeyframe(Ns);if(!(Ns.progress<this.locationMotion.progress)&&Ds.panoIndex===Bs){Bs=null;break}}if(this.emit("panoSelected",Bs),qi(Bs))this.locationMotion.ended===!0&&this.cameraBounce();else{var $s=this.work.observers[Bs];if($s.active){for(var Gs={},Us=Math.PI/6,Hs=Math.PI/12,zs=new r$2.Vector3(0,1,0),js=$s.position.clone().setY(0).sub(Ps.position.clone().setY(0)).normalize(),Ws=js.clone().applyAxisAngle(zs,Us),Qs=js.clone().applyAxisAngle(zs,-Us),Zs=[],Xs=[],eu=[],Ys=0,Js=$s.accessibleNodes;Ys<Js.length;Ys++)if((Fs=Js[Ys])!==this.currentPanoIndex&&Fs!==Bs){var qs=this.work.observers[Fs].position.clone().sub($s.position).setY(0);js.angleTo(qs)<Us?eu.push(qs):Ws.angleTo(qs)<Us?Zs.push(qs):Qs.angleTo(qs)<Us&&Xs.push(qs)}var ru=(eu.length>0?eu:e$2.__spreadArray(e$2.__spreadArray([],Zs,!0),Xs,!0)).slice().sort(function(tu,nu){return tu.angleTo(js)-nu.angleTo(js)})[0];ru&&ru.angleTo(Is)>Hs&&(Gs.longitude=Math.atan2(-ru.x,-ru.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Gs.latitude=Wi(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Bs,Gs,!0)}else this.panoMeshes[Bs]&&(this.panoMeshes[Bs].setDisabled(!1),this.panoMeshes[Bs].setLoading(!0))}}}}},ga}(Dr),Zo=["Panorama","DepthPanorama","Model"],Jo={Floorplan:Mr,Topview:Pr,Panorama:ro,VRPanorama:zo,Model:qo,DepthPanorama:Yo};function $o(ca){for(var ga=0,_s=Zo;ga<_s.length;ga++){var Ss=_s[ga];if(typeof ca=="string"){if(Ss===ca)return!0}else if(ca instanceof Br&&ca instanceof Jo[Ss])return!0}return!1}var ts=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError"];function es(ca){for(var ga,_s,Ss={},Ms=0,Cs=ca.split(/(\;|\,)/);Ms<Cs.length;Ms++){var Ts=Cs[Ms].split("="),Is=(ga=Ts[0])===null||ga===void 0?void 0:ga.trim(),Bs=(_s=Ts[1])===null||_s===void 0?void 0:_s.trim();Is&&Bs&&(Ss[Is]=Bs)}return Ss}function is$1(){for(var ca,ga=document.getElementsByTagName("meta"),_s=0;_s<ga.length;_s++){var Ss=ga[_s];if(Ss.getAttribute("name")==="viewport"){var Ms=es((ca=Ss.getAttribute("content"))!==null&&ca!==void 0?ca:""),Cs=Number(Ms["initial-scale"]);if(!isNaN(Cs))return Cs}}return 1}var ns=[351,63],rs=[20,20],os=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),ss=new Float32Array([0,0,1,0,0,1,1,1]),as=new Uint8Array([0,1,2,1,3,2]),us=new r$2.BufferGeometry;us.setAttribute("position",new r$2.BufferAttribute(os,3)),us.setAttribute("uv",new r$2.BufferAttribute(ss,2)),us.setIndex(new r$2.BufferAttribute(as,1));var ls=new r$2.MeshBasicMaterial({transparent:!0,depthTest:!1}),hs=new r$2.Mesh(us,ls),cs=new r$2.Scene;cs.add(hs);var ds=new r$2.OrthographicCamera(-.5,.5,.5,-.5,.1,1);ds.position.set(0,0,.5),ds.lookAt(0,0,0);var ps=new r$2.Vector4,As=new r$2.Vector4;function fs(ca){if(ls.map){var ga=ca.getViewport(ps),_s=ca.getScissor(As),Ss=ca.getScissorTest(),Ms=ca.autoClear;ca.setViewport(_s.x+rs[0]/3,_s.y+rs[1]/3,ns[0]/3,ns[1]/3),ca.setScissor(_s.x+rs[0]/3,_s.y+rs[1]/3,ns[0]/3,ns[1]/3),ca.setScissorTest(!0),ca.autoClear=!1,ca.render(cs,ds),ca.setViewport(ga),ca.setScissor(_s),ca.setScissorTest(Ss),ca.autoClear=Ms}else{var Cs=new r$2.Texture,Ts=new Image;Ts.onload=function(){Cs.image=Ts,Cs.wrapS=r$2.ClampToEdgeWrapping,Cs.wrapT=r$2.ClampToEdgeWrapping,Cs.minFilter=r$2.LinearFilter,Cs.needsUpdate=!0,ls.needsUpdate=!0,Ts.onload=function(){}},Ts.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",ls.map=Cs}}var gs={instances:{}};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:gs});var vs=new r$2.Box3(new r$2.Vector3(-50,-50,-50),new r$2.Vector3(50,50,50)),ms=new r$2.Vector2,ys=new r$2.Frustum,bs=new r$2.Matrix4,ws=new WeakMap,xs=new WeakMap,Es=function(ca){function ga(_s){_s===void 0&&(_s={});var Ss,Ms,Cs,Ts,Is,Bs,Ps,Ls,Rs,Os,Fs=this;if((Fs=ca.call(this)||this).ident=Zn(),gs.instances[Fs.ident]=Fs,Fs.renderSwitch01=0,Fs.panoIndex=0,Fs.needsRender=!1,Fs.onlyRenderIfNeeds=(Ss=_s.onlyRenderIfNeeds)===null||Ss===void 0||Ss,Fs.imageOptions=e$2.__assign({},(Ms=_s.imageOptions)!==null&&Ms!==void 0?Ms:{}),Fs.textureOptions=e$2.__assign({},(Cs=_s.textureOptions)!==null&&Cs!==void 0?Cs:{}),Fs.poweredByRealsee=(Ts=_s.poweredByRealsee)===null||Ts===void 0||Ts,Fs.extraElements=[],Fs.controllerInits={Panorama:Object.assign({},_s.panorama),Model:Object.assign({},_s.model),Floorplan:Object.assign({},_s.floorplan),Topview:Object.assign({},_s.topview),DepthPanorama:Object.assign({},_s.depthPanorama),VRPanorama:Object.assign({},_s.vrPanorama)},Fs.fps={testCount:0,testTime:Ht()},Fs.modeChangeDuration=(Is=_s.modeChangeDuration)!==null&&Is!==void 0?Is:1e3,Fs.panoramaLikeSavedPose={},typeof window!="undefined")if(_s.renderer)_s.renderer instanceof xe&&Fs.throwError(new Error("cannot render a internal renderer")),Fs.renderer=_s.renderer;else try{Fs.renderer=new xe({preserveDrawingBuffer:_s.preserveDrawingBuffer,backgroundColor:_s.backgroundColor,backgroundAlpha:_s.backgroundAlpha,antialias:_s.antialias,webgl2:_s==null?void 0:_s.webgl2});var Vs=is$1();Fs.renderer.setPixelRatio(Vs===1?window.devicePixelRatio:1),Fs.renderer.setSize(512,512)}catch(Ws){Ws instanceof Error&&Fs.throwError(Ws)}Fs.getPixelsRenderTarget=new r$2.WebGLRenderTarget(1,1,{encoding:(Ps=(Bs=Fs.renderer)===null||Bs===void 0?void 0:Bs.outputEncoding)!==null&&Ps!==void 0?Ps:r$2.sRGBEncoding}),Fs.scissor=Object.assign({left:0,bottom:0,width:1,height:1},_s.scissor),Fs.camera=new Qe(80),Fs.scene=new Ee,Fs.lastLoadWorkTask=Promise.resolve(),Fs.networkSubscribe=new te,Fs.networkSubscribe.on("network",function(Ws,Qs,Zs,Xs){var eu;Fs.emit("network",Ws,Qs,Zs,Xs),(eu=Fs.analysis)===null||eu===void 0||eu.network(Fs.work,Ws,Qs,Zs,Xs)}),Fs.model=new Gi({allowHosts:[],networkSubscribe:Fs.networkSubscribe});var ks=rr(vs);ks.name="model_empty",Fs.model.add(ks),Fs.model.visible=!1,Fs.readyCallbacks=[],Fs.modelPending=!1,Fs.syncingState=!1,Fs.scene.add(Fs.model),Fs.helperGroup=new r$2.Group,Fs.helperGroup.name="helper",Fs.scene.add(Fs.helperGroup),Fs.videoTexture=new r$2.VideoTexture(_s.videoInstance||function(){var Ws=document.createElement("video");Ws.loop=!0,Ws.autoplay=!0,Ws.playsInline=!0,Ws.muted=!0,Ws.crossOrigin="";var Qs=function(){document.removeEventListener("touchstart",Qs,!1),document.removeEventListener("mousedown",Qs,!1),Ws.muted=!1};return document.addEventListener("touchstart",Qs,!1),document.addEventListener("mousedown",Qs,!1),Ws}()),function(Ws){(Qs=new r$2.DirectionalLight(16777215,.5)).position.copy(new r$2.Vector3(1,1,1)),Ws.add(Qs);var Qs=new r$2.DirectionalLight(16777215,.3);Ws.add(Qs),Qs=new r$2.AmbientLight(16777215,.3),Ws.add(Qs)}(Fs.scene),Fs.state={mode:(Ls=Fs.currentMode)!==null&&Ls!==void 0?Ls:"Panorama",panoIndex:(Rs=Fs.panoIndex)!==null&&Rs!==void 0?Rs:0,longitude:Fs.camera.pose.longitude,latitude:Fs.camera.pose.latitude,fov:Fs.camera.pose.fov,offset:Fs.camera.pose.offset.clone()},Fs.stateSynced=!1,Fs._enableIOSEDR=!1,Fs.destroyed=!1,Fs.paused=!0,typeof window!="undefined"&&(_s.play!==!1&&Fs.play(),((Os=_s.initialBasisLoader)!==null&&Os!==void 0&&Os)!==!1&&(typeof _s.initialBasisLoader=="string"?Fs.initBasisLoader(_s.initialBasisLoader):Fs.initBasisLoader()),Fs.stopAnimationLoop=se.shared.add(function(Ws,Qs){Fs.updateTime(Ws,Qs)},!1,0,10));var Ns=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Fs.currentMode==="VRPanorama"&&Fs.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",Ns,!1),Fs.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",Ns,!1)},Fs.plugins={},_s.plugins&&_s.plugins.length)for(var Ds=0,$s=_s.plugins;Ds<$s.length;Ds++){var Gs=$s[Ds];if(typeof Gs=="function")Gs(Fs);else if(Array.isArray(Gs)){var Us=Gs[0],Hs=Gs[1],zs=Gs[2];if(typeof Us=="function"){var js=Us(Fs,zs);typeof Hs=="string"&&(Fs.plugins[Hs]?Fs.throwError(new Error("plugin name ".concat(Hs," is exists."))):Fs.plugins[Hs]=js)}}}return Fs}return e$2.__extends(ga,ca),ga.prototype.dispose=function(){var _s;if(this.destroyed!==!0){delete gs.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Ss=this.getElement();Ss&&Ss.parentNode&&Ss.parentNode.removeChild(Ss),this.scene.remove(this.model);var Ms=this.model.getMaterial();Ms&&(Ms.pano0&&Ms.pano0.map.dispose(),Ms.pano1&&Ms.pano1.map!==((_s=Ms.pano0)===null||_s===void 0?void 0:_s.map)&&Ms.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof xe&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},ga.prototype.setScissor=function(_s){Object.assign(this.scissor,_s),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(ga.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(_s){this.helperGroup.visible!==_s&&(this.helperGroup.visible=_s,this.emit("helpersVisibleChange",_s),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(_s){this._enableIOSEDR!==_s&&(this._enableIOSEDR=_s,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(_s){var Ss,Ms;if(_s){if(!this.screenBuffer){var Cs=this.getDrawingBufferSize(ms);this.screenBuffer=new r$2.WebGLRenderTarget(Cs.x,Cs.y,{encoding:(Ms=(Ss=this.renderer)===null||Ss===void 0?void 0:Ss.outputEncoding)!==null&&Ms!==void 0?Ms:r$2.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),ga.prototype.updateConfiguration=function(_s){var Ss=!1;_s.panorama&&(Object.assign(this.controllerInits.Panorama,_s.panorama),this.currentMode==="Panorama"&&(Ss=!0)),_s.model&&(Object.assign(this.controllerInits.Model,_s.model),this.currentMode==="Model"&&(Ss=!0)),_s.floorplan&&(Object.assign(this.controllerInits.Floorplan,_s.floorplan),this.currentMode==="Floorplan"&&(Ss=!0)),_s.topview&&(Object.assign(this.controllerInits.Topview,_s.topview),this.currentMode==="Topview"&&(Ss=!0)),_s.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,_s.depthPanorama),this.currentMode==="DepthPanorama"&&(Ss=!0)),_s.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,_s.vrPanorama),this.currentMode==="VRPanorama"&&(Ss=!0)),_s.imageOptions&&(Object.assign(this.imageOptions,_s.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Ss=!0)),Ss&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},ga.prototype.appendTo=function(_s,Ss){if(Ss===void 0&&(Ss={}),this.renderer)if(this.renderer instanceof xe){var Ms=this.getElement();if(Ms){_s.appendChild(Ms),this.refresh(Ss);var Cs=window.getComputedStyle(_s).position;Cs!=="relative"&&Cs!=="absolute"&&Cs!=="fixed"&&Cs!=="sticky"&&(_s.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},ga.prototype.refresh=function(_s,Ss){if(_s===void 0&&(_s={}),this.renderer){var Ms=this.getElement();if(Ms){var Cs=Ms.parentNode;if(Cs&&Cs.nodeName){var Ts=_s.width,Is=Ts===void 0?Cs.offsetWidth:Ts,Bs=_s.height,Ps=Bs===void 0?Cs.offsetHeight:Bs;this.renderer instanceof xe&&(Ss&&this.renderer.setPixelRatio(Ss),this.renderer.setSize(Is,Ps))}var Ls=this.renderer.getSize(new r$2.Vector2);this.camera.aspect=Ls.x*this.scissor.width/(Ls.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},ga.prototype.addExtraElement=function(_s){var Ss=this;return this.extraElements.indexOf(_s)===-1&&(this.extraElements.push(_s),this.controller&&this.controller.bindExtraElement(_s)),function(){return Ss.removeExtraElement(_s)}},ga.prototype.removeExtraElement=function(_s){var Ss=this.extraElements.indexOf(_s);Ss!==-1&&(this.extraElements.splice(Ss,1),this.controller&&this.controller.unbindExtraElement(_s))},ga.prototype.getPose=function(){var _s=this.camera.copyPose();return{longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov,offset:_s.offset}},ga.prototype.getSize=function(_s){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(_s),_s.x*=this.scissor.width,_s.y*=this.scissor.height,_s},ga.prototype.getDrawingBufferSize=function(_s){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(_s),_s.x*=this.scissor.width,_s.y*=this.scissor.height,_s},ga.prototype.updateCamera=function(_s,Ss,Ms){return Ms===void 0&&(Ms=!0),this.controller?this.controller.updateCamera(_s,Ss,Ms):Promise.reject(new Error("controller is not initialized."))},ga.prototype.getLongitudeAndLatitude=function(){var _s=this.getPose();return{longitude:_s.longitude,latitude:_s.latitude}},ga.prototype.getOffset=function(){return this.getPose().offset},ga.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var _s=this.work.observers[this.panoIndex],Ss=new r$2.Object3D;return Ss.position.copy(_s.position),Ss.quaternion.copy(_s.quaternion),Ss.scale.set(1,1,1),Ss.updateMatrixWorld(!0),function(Ms,Cs){var Ts=new r$2.Vector3(0,0,-1);Ts.applyQuaternion(Ms.quaternion);var Is=Cs.quaternion.clone().inverse();return Ts.applyQuaternion(Is),{theta:Math.atan2(Ts.x,-Ts.z),phi:-Math.asin(Ts.y),lookAtVector:Ts}}(this.camera,Ss)}},ga.prototype.initBasisLoader=function(_s){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof _s=="string"&&xi.setTranscoderPath(_s),xi.workerConfig.format||xi.detectSupport(this.renderer),xi._allocateWorker(0)}catch(Ss){Ss instanceof Error&&this.throwError(Ss)}},Object.defineProperty(ga.prototype,"work",{get:function(){var _s=xs.get(this);if(_s&&sn.get(_s))return _s},enumerable:!1,configurable:!0}),ga.prototype.load=function(_s,Ss,Ms,Cs){var Ts=this;if(Cs===void 0&&(Cs=!0),!this.renderer)throw new Error("renderer is not initialized");var Is=this.lastLoadWorkTask.then(function(){return!(Bs=_s)||typeof Bs!="object"&&typeof Bs!="function"||typeof Bs.then!="function"?Ts.load_(_s,Ss,Ms,Cs):_s.then(function(Ps){return Ts.load_(Ps,Ss,Ms,Cs)});var Bs});return this.lastLoadWorkTask=Is.catch(function(Bs){Ts.throwError(Bs)}),Is},ga.prototype.load_=function(_s,Ss,Ms,Cs){var Ts,Is,Bs,Ps,Ls,Rs,Os,Fs,Vs,ks=this;Cs===void 0&&(Cs=!0);var Ns,Ds,$s,Gs=cn(_s),Us=this.work;Ss===void 0&&(Ss=Us?"inherit":"initial"),Ss==="inherit"?(Ns=typeof this.panoIndex=="number"&&Gs.observers[this.panoIndex]?this.panoIndex:Gs.initial.panoIndex,Ds=(Ts=this.currentMode)!==null&&Ts!==void 0?Ts:Gs.initial.mode,$s={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Ss==="initial"?(Ds=(Is=this.currentMode)!==null&&Is!==void 0?Is:Gs.initial.mode,Ns=Gs.initial.panoIndex,$s=Ds===ga.Mode.Panorama||Ds===ga.Mode.DepthPanorama||Ds===ga.Mode.Model||Ds===ga.Mode.VRPanorama?{longitude:Gs.initial.longitude,latitude:Gs.initial.latitude,fov:Gs.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Ns=(Bs=Ss.panoIndex)!==null&&Bs!==void 0?Bs:Gs.initial.panoIndex,Ds=(Ls=(Ps=Ss.mode)!==null&&Ps!==void 0?Ps:this.currentMode)!==null&&Ls!==void 0?Ls:"Panorama",$s={longitude:(Rs=Ss.longitude)!==null&&Rs!==void 0?Rs:Gs.initial.longitude,latitude:(Os=Ss.latitude)!==null&&Os!==void 0?Os:Gs.initial.latitude,fov:(Fs=Ss.fov)!==null&&Fs!==void 0?Fs:Gs.initial.fov}),this.emit("willLoad",_s,Gs,{panoIndex:Ns,mode:Ds,longitude:$s.longitude,latitude:$s.latitude,fov:$s.fov});var Hs=function(){var js;ks.panoIndex=Ns,ks.panoramaLikeSavedPose.longitude=Gs.initial.longitude,ks.panoramaLikeSavedPose.latitude=Gs.initial.latitude,ks.panoramaLikeSavedPose.fov=Gs.initial.fov;var Ws=ks.controller?Ms!=null?Ms:ks.modeChangeDuration:0,Qs=e$2.__assign(e$2.__assign({initial:[Ns,$s,Ws,Cs]},ks.commonParams()),ks.controllerInits[Ds]);ks.controller?ks.controller.updateWork(Gs,Ns,$s,Ws,Cs)===!1&&(ks.controller.destroy(),ks.controller=ks.applyController(Ds,Qs)):ks.controller=ks.applyController(Ds,Qs),ks.emit("load",_s,Gs,{panoIndex:Ns,mode:Ds,longitude:$s.longitude,latitude:$s.latitude,fov:$s.fov}),(js=ks.analysis)===null||js===void 0||js.work(Gs)},zs=function(js){var Ws;js===void 0&&(js=Lt),Gs.model&&(ks.model.name!==((Ws=Gs.model)===null||Ws===void 0?void 0:Ws.file)?(ks.emit("modelWillLoad",Gs.model),ks.loadModel(Gs.model,Gs.allowHosts,js,!0)):js&&js())};return xs.set(this,Gs),Ds===ga.Mode.Floorplan||Ds===ga.Mode.Topview||Ds===ga.Mode.Model?zs(function(){Hs(),ks.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Gs.initial.fov,longitude:Gs.initial.longitude,latitude:Gs.initial.latitude,offset:Gs.observers[Gs.initial.panoIndex].position}),this.needsRender=!0),Hs(),(Vs=this.controller)===null||Vs===void 0||Vs.once("panoLoaded",function(){ks.needsRender=!0,ks.emit("cameraUpdate",ks.camera.copyPose(),Cs),zs()})),this.ready().then(function(){ks.emit("loaded",_s,ks.work)})},ga.prototype.changeMode=function(_s,Ss,Ms,Cs,Ts){var Is=this;if(Ss===void 0&&(Ss={}),Ms===void 0&&(Ms=this.modeChangeDuration),Cs===void 0&&(Cs=!0),Ts===void 0&&(Ts=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Bs,Ps){if(!ga.Mode.hasOwnProperty(_s)){var Ls=new Error('mode "'.concat(_s,'" is not existed'));return Is.throwError(Ls),void Ps(Ls)}if((_s===ga.Mode.Floorplan||_s===ga.Mode.Topview||_s===ga.Mode.Model)&&(qi(Is.model)||Is.model.loaded!==!0))return Ls=new Error("model is not ready."),Is.throwError(Ls),void Ps(Ls);if(qi(Is.controller))return Ls=new Error("controller is not ready."),Is.throwError(Ls),void Ps(Ls);var Rs=Is.controller,Os=Is.currentMode,Fs=function(){var Vs,ks,Ns,Ds;if(Is.emit("wantsChangeMode",_s,Os))Ps(new Error("change mode canceled."));else{if(Is.controller&&Ts===!1&&Os===_s)_s===ga.Mode.Panorama||_s===ga.Mode.DepthPanorama||_s===ga.Mode.Model||_s===ga.Mode.VRPanorama?typeof Ss.panoIndex=="number"&&Ss.panoIndex!==Is.panoIndex?Is.controller.moveToPano((ks=(Vs=Ss.panoIndex)!==null&&Vs!==void 0?Vs:Is.panoIndex)!==null&&ks!==void 0?ks:0,e$2.__assign({duration:Ms},Ss),Cs):Is.controller.updateCamera(Ss,Ms,Cs).catch(Lt):(typeof Ss.panoIndex=="number"&&Ss.panoIndex!==Is.panoIndex&&(Is.panoIndex=Ss.panoIndex),Is.controller.updateCamera(Ss,Ms,Cs).catch(Lt));else{Rs.destroy();var $s=(Ds=(Ns=Ss.panoIndex)!==null&&Ns!==void 0?Ns:Is.panoIndex)!==null&&Ds!==void 0?Ds:0,Gs=$o(_s)?Is.panoramaLikeSavedPose:{};typeof Ss.longitude!="number"&&typeof Ss.latitude!="number"||(Gs.longitude=Ss.longitude,Gs.latitude=Ss.latitude),typeof Ss.fov=="number"&&(Gs.fov=Ss.fov);var Us=e$2.__assign(e$2.__assign({initial:[$s,Gs,Ms,Cs]},Is.commonParams()),Is.controllerInits[_s]);Is.saveControllerPose(Rs),Is.controller=Is.applyController(_s,Us);var Hs=Jo[_s].initAnimationEndPose(Us);Is.emit("modeChange",_s,Os,$s,Hs)}Bs()}};_s===ga.Mode.VRPanorama?(Is.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(Vs){if(Vs=="granted")return Promise.resolve();var ks=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(ks)}):Promise.resolve()).then(function(){return Fs()}).catch(function(Vs){Vs instanceof Error&&(Is.exitFullscreen(),Is.throwError(Vs),Ps(Vs))})):Fs()})},ga.prototype.getPixels=function(_s,Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=1),!this.renderer)throw new Error("renderer is not initialized.");var Is=this.getPixelsRenderTarget,Bs=this.renderer.getSize(new r$2.Vector2);_s=Wi(_s,Math.floor(Ms/2),Math.floor(Bs.x-Ms)),Ss=Wi(Ss,Math.floor(Cs/2),Math.floor(Bs.y-Cs)),_s*=Ts,Ss*=Ts,Ms*=Ts,Cs*=Ts,Is.setSize(Bs.x*Ts,Bs.y*Ts),Is.scissor.set(_s,Ss,Ms,Cs),Is.scissorTest=!0,this.renderer.setRenderTarget(Is);var Ps=new Uint8Array(Ms*Cs*4);return this.controller?this.controller.render():this.renderer.render(this.scene,this.camera),this.renderer.readRenderTargetPixels(Is,_s,Ss,Ms,Cs,Ps),this.renderer.setRenderTarget(null),Is.setSize(1,1),Is.scissor.set(0,0,0,0),Is.scissorTest=!1,Ps},ga.prototype.getElement=function(){var _s;return(_s=this.renderer)===null||_s===void 0?void 0:_s.domElement},ga.prototype.render=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss=!1),!this.renderer)return null;if(Ss){var Cs=this.renderer.getSize(ms);this.scene.traverseVisible(function(Is){Is.setResolution&&Is.setResolution(Cs.x,Cs.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Ts=this.getDrawingBufferSize(ms);return this.screenBuffer.setSize(Ts.x,Ts.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.poweredByRealsee&&fs(this.renderer),this.renderer.setRenderTarget(null),_s&&se.shared.add(_s,!0),this.screenBuffer}return this.aroundScissor(function(){Ms.renderer&&(Ms.controller?Ms.controller.render():Ms.renderer.render(Ms.scene,Ms.camera),Ms.currentMode!=="VRPanorama"&&Ms.poweredByRealsee&&fs(Ms.renderer)),_s&&se.shared.add(_s,!0)}),null},ga.prototype.updateTime=function(_s,Ss){var Ms=this;if(!this.destroyed){this.syncingState=this.syncState(_s,Ss),this.controller&&this.controller.updateTime(_s,Ss),this.syncingState=!1;var Cs=new r$2.Vector2(512,512),Ts=new r$2.Vector2(512,512);this.renderer&&(this.renderer.getSize(Cs),Cs.x*=this.scissor.width,Cs.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Ts),Ts.x*=this.scissor.width,Ts.y*=this.scissor.height);var Is=[];if(bs.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),ys.setFromProjectionMatrix(bs),this.scene.traverse(function(Vs){if(Vs.setResolution&&Vs.setResolution(Cs.x,Cs.y),Vs.mixer instanceof r$2.AnimationMixer){var ks=ws.get(Vs.mixer);ks||(ks=new r$2.Clock,ws.set(Vs.mixer,ks)),Vs.mixer.update(ks.getDelta())}(Vs instanceof r$2.Mesh||Vs instanceof r$2.Line||Vs instanceof r$2.Points)&&(Vs instanceof r$2.ImmediateRenderObject||!Vs.frustumCulled||ys.intersectsObject(Vs))&&Is.push(Vs)}),Ts.width*Ts.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Bs=void 0;if(this.onlyRenderIfNeeds!==!0)Bs=this.render();else{for(var Ps=0,Ls=Is;Ps<Ls.length;Ps++){var Rs=Ls[Ps],Os=function(Vs){Vs.needsRender===!0?(Vs.needsRender=!1,Ms.needsRender=!0):Vs.mixer&&Vs.mixer.stats.actions.inUse>0&&(Ms.needsRender=!0)};Os(Rs),Rs.traverseAncestors(Os)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Bs=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Ms.controller.postProcessing(Ms.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",Bs!==void 0)}if(this.fps.testTime&&_s-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=_s,this.fps.testCount=0,this.renderer){var Fs=function(Vs){var ks=Vs.getError();if(ks===Vs.NO_ERROR)return null;switch(ks){case Vs.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case Vs.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case Vs.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case Vs.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case Vs.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case Vs.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}(this.renderer.getContext());Fs&&this.throwError(Fs)}}},ga.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof xe&&this.renderer.clear(!0,!0,!0)},ga.prototype.play=function(){this.needsRender=!0,this.paused=!1},ga.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={}),Ms===void 0&&(Ms=!0);var Cs=this,Ts=Cs.controller,Is=Cs.currentMode,Bs=Cs.renderer;Ts?Bs?Is===ga.Mode.Floorplan||Is===ga.Mode.Topview?qi(_s)||(this.panoIndex=_s,this.changeMode(ga.Mode.Panorama,Ss,void 0,Ms)):Ts.moveToPano(_s,Ss,Ms):this.throwError(new Error("renderer is not initialized.")):this.throwError(new Error("controller is not initialized."))},ga.prototype.preloadPano=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss=Lt),!this.work)return Promise.reject(new Error("work never loaded"));var Cs=this.work.observers[_s],Ts=Ht();return Promise.all(["right","left","up","down","front","back"].map(function(Is){var Bs=e$2.__assign({key:"pano.".concat(_s,".").concat(Is),basisLoaderInitialized:xi.isInitialized()},ei(Ms.imageOptions,["size","format","quality","mappings"])),Ps=Cs.images[Is];return function(Ls,Rs){return Rs===void 0&&(Rs={}),Ls in ie?ie[Ls]:ie[Ls]=new Promise(function(Os,Fs){var Vs=document.createElement("link");Vs.href=Ls,Vs.rel=Vs.relList&&Vs.relList.supports("prefetch")?"prefetch":"preload",Vs.as="fetch",Vs.crossOrigin="";var ks=Ht(),Ns=document.head||document.getElementsByTagName("head")[0];Ns&&Ns.appendChild(Vs);var Ds=!1;Vs.onload=function(){var $s;if(Ds!==!0){Ds=!0,Os();var Gs=Ht(),Us={source:Ls,requestTime:ks,responseTime:Gs,costs:Gs-ks,headers:{}};($s=Rs.networkSubscribe)===null||$s===void 0||$s.emit("network",Ls,"Link","preload",JSON.stringify(Us))}},Vs.onerror=function($s){var Gs;if(Ds!==!0){Ds=!0;var Us=new Wt(Ls,"Link",0);Fs(Us),(Gs=Rs.networkSubscribe)===null||Gs===void 0||Gs.emit("network",Ls,"Link","error",Us.message)}}})}(Ms.imageOptions.transform?Ms.imageOptions.transform(Ps,Bs):he(Ps,Bs),{networkSubscribe:Ms.networkSubscribe})})).then(function(){var Is=Ht()-Ts;return Ss(Is),Is})},ga.prototype.project2d=function(_s,Ss){if(Ss===void 0&&(Ss=!1),!this.renderer)return null;if(this.model.empty===!1&&Ss){var Ms=this.camera.position,Cs=_s.clone().sub(Ms),Ts=new r$2.Raycaster(Ms,Cs.clone().normalize()),Is=this.model.intersectRaycaster(Ts)[0];if(Is&&Is.distance+.01<Cs.length())return null}var Bs=_s.clone().project(this.camera);if(Math.abs(Bs.z)>1)return null;var Ps=this.renderer.getSize(new r$2.Vector2),Ls=Ps.x*this.scissor.width,Rs=Ps.y*this.scissor.height,Os=Ps.x*this.scissor.left+(Bs.x+1)/2*Ls,Fs=Ps.y*(1-this.scissor.bottom-this.scissor.height)+(1-Bs.y)/2*Rs;return new r$2.Vector2(Os,Fs)},ga.prototype.getRenderObjects=function(_s){bs.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),ys.setFromProjectionMatrix(bs),_s||(_s=this.scene);var Ss=[];return _s.traverseVisible(function(Ms){(Ms instanceof r$2.Mesh||Ms instanceof r$2.Line||Ms instanceof r$2.Points)&&(Ms instanceof r$2.ImmediateRenderObject||!Ms.frustumCulled||ys.intersectsObject(Ms))&&Ss.push(Ms)}),Ss},ga.prototype.getCurrentState=function(){return e$2.__assign(e$2.__assign({},this.getPose()),{mode:this.currentMode||ga.Mode.Panorama,panoIndex:this.panoIndex||0})},ga.prototype.setState=function(_s,Ss,Ms){var Cs,Ts,Is,Bs,Ps,Ls,Rs,Os;Ss===void 0&&(Ss=!1),Ms===void 0&&(Ms=!0),!(_s=Object.assign({},_s)).offset||_s instanceof r$2.Vector3||(_s.offset=new r$2.Vector3(_s.offset.x,_s.offset.y,_s.offset.z));var Fs,Vs,ks,Ns,Ds=(Cs=_s.panoIndex)!==null&&Cs!==void 0?Cs:this.state.panoIndex,$s=(Ts=_s.mode)!==null&&Ts!==void 0?Ts:this.state.mode;if(this.work)if(this.work.observers[Ds])if(_s.mode!==ga.Mode.Floorplan&&_s.mode!==ga.Mode.Topview&&_s.mode!==ga.Mode.Model||!qi(this.model)&&this.model.loaded===!0){if(this.state.mode!==$s){if($s==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var Gs=void 0;Gs=$o(this.state.mode)&&$o($s)?e$2.__assign({},this.state):$o($s)?e$2.__assign({},this.panoramaLikeSavedPose):e$2.__assign({},_s),typeof _s.longitude=="number"&&(Gs.longitude=_s.longitude),typeof _s.latitude=="number"&&(Gs.latitude=_s.latitude),typeof _s.fov=="number"&&(Gs.fov=_s.fov);var Us=e$2.__assign(e$2.__assign({initial:[Ds,Gs,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[$s]),Hs=Jo[$s].initAnimationEndPose(Us);Fs=Hs.longitude,Vs=Hs.latitude,ks=Hs.fov,Ns=Hs.offset}else Fs=(Is=_s.longitude)!==null&&Is!==void 0?Is:this.state.longitude,Vs=(Bs=_s.latitude)!==null&&Bs!==void 0?Bs:this.state.latitude,ks=(Ps=_s.fov)!==null&&Ps!==void 0?Ps:this.state.fov,Ns=(Ls=_s.offset)!==null&&Ls!==void 0?Ls:this.state.offset;var zs={panoIndex:Ds,mode:$s,longitude:Fs,latitude:Vs,fov:ks,offset:Ns};this.emit("setState",zs),dr(this.state,zs)||(cr(this.state,zs),this.controller&&(this.controller.userAction=Ms),Ss&&this.state.mode===zs.mode&&(this.syncingState=this.syncState(Ht(),0,Ss),this.syncingState&&((Rs=this.controller)===null||Rs===void 0||Rs.updateTime(Ht(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Ms),(Os=this.analysis)===null||Os===void 0||Os.state(this.work,this.state))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},ga.prototype.aroundScissor=function(_s){if(this.renderer){var Ss=new r$2.Vector2,Ms=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Ms){this.renderer.getSize(Ss);var Cs=Math.floor(Ss.x*this.scissor.left),Ts=Math.floor(Ss.y*this.scissor.bottom),Is=Math.floor(Ss.x*this.scissor.width),Bs=Math.floor(Ss.y*this.scissor.height);this.renderer.setViewport(Cs,Ts,Is,Bs),this.renderer.setScissor(Cs,Ts,Is,Bs),this.renderer.setScissorTest(!0)}_s(),Ms&&(this.renderer.setViewport(0,0,Ss.x,Ss.y),this.renderer.setScissor(0,0,Ss.x,Ss.y),this.renderer.setScissorTest(!1))}},ga.prototype.syncState=function(_s,Ss,Ms){Ms===void 0&&(Ms=!1);var Cs=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var Ts={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Ts,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Is=this.currentMode;if(!(Is===ga.Mode.Floorplan||Is===ga.Mode.Topview||Is===ga.Mode.Model)||!this.modelPending)for(var Bs=void 0;Bs=this.readyCallbacks.shift();)Bs()}if(this.controller instanceof Jo.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Ps={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Ps,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Ps={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset},this.controller.moveToPano(this.state.panoIndex,Ps,!1),!0;if(this.controller instanceof Jo.Topview){var Ls=1,Rs=Ms?this.state.fov:lr(this.camera.pose.fov,this.state.fov,Ls),Os=Ms?new r$2.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$2.Vector3(lr(this.camera.pose.offset.x,this.state.offset.x,.2),lr(this.camera.pose.offset.y,this.state.offset.y,.2),lr(this.camera.pose.offset.z,this.state.offset.z,.2));if($n(Rs,this.camera.pose.fov)||er(Os,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Rs},0).catch(Lt),this.controller.locationMotion.set({x:Os.x,y:Os.y,z:Os.z},0).catch(Lt),!0}else{Ls=1;var Fs=Math.PI/45,Vs=(Rs=Ms?this.state.fov:lr(this.camera.pose.fov,this.state.fov,Ls),Ms?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Ds,$s,Gs){if(Ds.longitude===$s.longitude&&Ds.latitude===$s.latitude)return{longitude:$s.longitude,latitude:$s.latitude};var Us=sr(Ds.longitude),Hs=Ds.latitude,zs=sr($s.longitude),js=$s.latitude;zs-Us>ar?Us+=ur:Us-zs>ar&&(Us-=ur);var Ws=Gs/Math.sqrt(Math.pow(zs-Us,2)+Math.pow(js-Hs,2));return Ws>=1?{longitude:$s.longitude,latitude:$s.latitude}:{longitude:Us+(zs-Us)*Ws,latitude:Hs+(js-Hs)*Ws}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Fs)),ks=Vs.longitude,Ns=Vs.latitude;if($n(ks,this.camera.pose.longitude,2*Math.PI)||$n(Ns,this.camera.pose.latitude)||$n(Rs,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:ks,latitude:Ns,fov:Rs},0).catch(Lt),!0}return this.stateSynced=!0,Cs===!1&&this.emit("stateSynced",this.state),!1},ga.prototype.ready=function(){var _s=this;return new Promise(function(Ss){return _s.readyCallbacks.push(Ss)})},ga.prototype.requestFullscreen=function(){var _s;if(hr()){var Ss=(_s=this.getElement())===null||_s===void 0?void 0:_s.parentNode;Ss&&"requestFullscreen"in Ss&&typeof document!="undefined"&&document.fullscreenElement===null&&Ss.requestFullscreen()}},ga.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},ga.prototype.throwError=function(_s){this.hasListener("error")?this.emit("error",_s):console.error(_s)},ga.prototype.loadModel=function(_s,Ss,Ms,Cs){var Ts=this,Is=_s.file;this.emit("modelWillLoad",_s);var Bs=new Gi({allowHosts:Ss,networkSubscribe:this.networkSubscribe});Bs.once("bvhLoaded",function(){var Ps,Ls;Ts.destroyed||Is===((Ls=(Ps=Ts.work)===null||Ps===void 0?void 0:Ps.model)===null||Ls===void 0?void 0:Ls.file)&&Ts.emit("modelBvhLoaded",Bs)}),Bs.once("materialLoaded",function(){var Ps,Ls;Ts.destroyed||Is===((Ls=(Ps=Ts.work)===null||Ps===void 0?void 0:Ps.model)===null||Ls===void 0?void 0:Ls.file)&&Ts.emit("modelMaterialLoaded",Bs)}),Bs.once("geometryLoaded",function(){var Ps,Ls,Rs,Os;if(!Ts.destroyed&&Is===((Ls=(Ps=Ts.work)===null||Ps===void 0?void 0:Ps.model)===null||Ls===void 0?void 0:Ls.file)){Bs.bounding.max.y-Bs.bounding.min.y<1.5&&(Bs.bounding.max.y=Bs.bounding.min.y+10);var Fs,Vs=Ts.model;Vs&&(Vs.show(),Fs=Vs.getMaterial()||{},Ts.scene.remove(Vs),Vs.dispose(),Bs.setTransparent(Vs.getTransparent())),Fs&&Bs.setMaterial(Fs),_s.bvh&&Bs.buildBVH(),Ts.model=Bs,Ts.scene.add(Bs),(Rs=Ts.controller)===null||Rs===void 0||Rs.updateModel(Bs),(Os=Ts.renderer)===null||Os===void 0||Os.compile(Ts.scene,Ts.camera),Ts.needsRender=!0,Ts.modelPending=!1,Ts.emit("modelGeometryLoaded",Bs)}}),Bs.once("loaded",function(){var Ps,Ls;Ts.destroyed||Is===((Ls=(Ps=Ts.work)===null||Ps===void 0?void 0:Ps.model)===null||Ls===void 0?void 0:Ls.file)&&(Ms(),Ts.emit("modelLoaded",Bs))}),Bs.on("shownFloorChange",function(Ps,Ls){var Rs,Os;Ts.destroyed||Is===((Os=(Rs=Ts.work)===null||Rs===void 0?void 0:Rs.model)===null||Os===void 0?void 0:Os.file)&&Ts.emit("modelShownFloorChange",Ps,Ls)}),Bs.on("error",function(Ps){var Ls,Rs,Os,Fs;if(!Ts.destroyed&&Is===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)){Bs.bounding.makeEmpty();for(var Vs=0,ks=Ts.work.observers;Vs<ks.length;Vs++){var Ns=ks[Vs];Bs.bounding.expandByPoint(Ns.standingPosition),Bs.bounding.expandByPoint(new r$2.Vector3().fromArray([Ns.position.x,2*Ns.position.y-Ns.standingPosition.y,Ns.position.z]))}var Ds=rr(Bs.bounding,new r$2.Vector3(1,0,1));Ds.visible=!0,Ds.name="model_empty",Bs.add(Ds);var $s,Gs=Ts.model;Gs&&(Gs.show(),$s=Gs.getMaterial()||{},Ts.scene.remove(Gs),Gs.dispose(),Bs.setTransparent(Gs.getTransparent())),$s&&Bs.setMaterial($s),Ts.model=Bs,Ts.scene.add(Bs),(Os=Ts.controller)===null||Os===void 0||Os.updateModel(Bs),(Fs=Ts.renderer)===null||Fs===void 0||Fs.compile(Ts.scene,Ts.camera),Ts.emit("modelLoadError",Ps,Bs),Ts.throwError(Ps),Ts.modelPending=!1,Ms()}}),this.modelPending=!0,Bs.load(_s,this.textureOptions).catch(Lt)},ga.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe}},ga.prototype.saveControllerPose=function(_s){_s===void 0&&(_s=this.controller),_s&&$o(_s)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},ga.prototype.applyController=function(_s,Ss){var Ms=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Cs=Jo[_s];_s===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(_s===ga.Mode.Floorplan||_s===ga.Mode.Topview||_s===ga.Mode.Model),this.currentMode=_s;for(var Ts=new Cs(Ss),Is=function(Fs){Ts.on(Fs,function(){for(var Vs=[],ks=0;ks<arguments.length;ks++)Vs[ks]=arguments[ks];var Ns=Ms.emit.apply(Ms,e$2.__spreadArray([Fs],Vs,!1));if(Ns)return!1})},Bs=0,Ps=ts;Bs<Ps.length;Bs++)Is(Ps[Bs]);var Ls=Jo[_s].initAnimationEndPose(Ss),Rs=Ss.initial[3],Os={panoIndex:Ss.initial[0],mode:_s,longitude:Ls.longitude,latitude:Ls.latitude,fov:Ls.fov,offset:Ls.offset};return dr(this.state,Os)||(cr(this.state,Os),this.emit("stateChange",this.state,Rs)),this.emit("currentStateChange",this.getCurrentState(),Rs),Ts.on("cameraUpdate",function(Fs,Vs){var ks;if(Ms.controller){var Ns=e$2.__assign(e$2.__assign({},Ms.controller.getTargetPose()),{panoIndex:Ms.panoIndex,mode:_s});Vs&&Ms.syncingState===!1&&Ms.state.mode===Ns.mode&&!dr(Ms.state,Ns)&&(cr(Ms.state,Ns),Ms.emit("stateChange",Ms.state,Vs),(ks=Ms.analysis)===null||ks===void 0||ks.state(Ms.work,Ms.state))}Ms.emit("currentStateChange",Ms.getCurrentState(),Vs)}),Ts.on("initAnimationWillStart",function(Fs,Vs,ks){var Ns,Ds=e$2.__assign(e$2.__assign({},Vs),{panoIndex:Fs,mode:_s});ks&&Ms.state.mode===Ds.mode&&!dr(Ms.state,Ds)&&(cr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,ks),(Ns=Ms.analysis)===null||Ns===void 0||Ns.state(Ms.work,Ms.state))}),Ts.on("initAnimationEnded",function(Fs,Vs,ks){var Ns,Ds=e$2.__assign(e$2.__assign({},Vs),{panoIndex:Fs,mode:_s});ks&&Ms.state.mode===Ds.mode&&!dr(Ms.state,Ds)&&(cr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,ks),(Ns=Ms.analysis)===null||Ns===void 0||Ns.state(Ms.work,Ms.state))}),Ts.on("panoWillArrive",function(Fs,Vs,ks){var Ns;Ms.panoIndex=Fs;var Ds=e$2.__assign(e$2.__assign({},Vs),{panoIndex:Fs,mode:_s});ks&&Ms.state.mode===Ds.mode&&!dr(Ms.state,Ds)&&(cr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,ks),(Ns=Ms.analysis)===null||Ns===void 0||Ns.state(Ms.work,Ms.state))}),Ts.on("panoArrived",function(Fs,Vs,ks){var Ns,Ds=e$2.__assign(e$2.__assign({},Vs),{panoIndex:Fs,mode:_s});ks&&Ms.state.mode===Ds.mode&&!dr(Ms.state,Ds)&&(cr(Ms.state,Ds),Ms.emit("stateChange",Ms.state,ks),(Ns=Ms.analysis)===null||Ns===void 0||Ns.state(Ms.work,Ms.state))}),Ts.on("moveToPano",function(Fs,Vs){Ms.emit("currentStateChange",Ms.getCurrentState(),Vs)}),Ts.on("wantsMoveToPano",function(Fs,Vs,ks){var Ns=Ms.emit("wantsMoveToPano",Fs,Vs,ks);Ns||(Ns=Ms.emit("wantsToMoveToPano",Fs,Vs,ks)),Ns||Ms.moveToPano(Fs,Vs,ks)}),Ts.on("vrWantsToExit",function(){Ms.currentMode===ga.Mode.VRPanorama&&(Ms.exitFullscreen(),Ms.changeMode(ga.Mode.Panorama))}),Ts.on("error",function(Fs){return Ms.throwError(Fs)}),Ts},ga.prototype.removeEventListeners=function(){},ga.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama"},ga.Line=null,ga}(Ot);five.AnimationFrameLoop=se,five.BVH=Ve,five.BVHIntersect=ke,five.BVHNode=De,five.BVHVector3=Re,five.Camera=Qe,Five=five.Five=Es,five.InternalWebGLRenderer=xe,five.IntersectMesh=Xn,five.LegacyPanoCircleMesh=Tn,five.Model=Gi,five.NetworkSubscribe=te,five.PBMContainer=de,five.PBMGroup=pe,five.PBMMaterial=we,five.PBMMesh=ce,five.PROXY_CONTROLLER_EVENT_NAMES=ts,five.PanoCircleMesh=jn,five.Scene=Ee,Subscribe=five.Subscribe=Ot,five.Work=an,five.defaultImageURLTransform=he,five.getViewportScale=is$1,parseWork=five.parseWork=cn;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$1=react$1.exports,n$2=require$$1,r$1=five;function o$1(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}}),ga.default=ca,Object.freeze(ga)}var u$1=o$1(t$1),i$1=o$1(n$2),a$1=[],f$1=[],c$1=u$1.createContext(null);function s$1(){var ca=u$1.useContext(c$1);if(!ca)throw new Error("FiveProvider never found.");return ca.five}function l$1(){var ca=u$1.useContext(c$1);if(!ca)throw new Error("FiveProvider never found.");return ca.loadWork}var d={display:"inline-block",overflow:"hidden"};function v(ca,ga){var _s=s$1(),Ss=[_s];ga!==void 0&&(Ss=Ss.concat(ga)),u$1.useLayoutEffect(function(){return ca(_s.scene)},Ss)}var p$1=v;function h$1(ca){return e$1.__assign({},ca.state)}function m$1(ca){var ga=ca.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(ca.camera.position,ga)}function y(ca){return ca.camera.getWorldDirection(new i$1.Vector3)}function g$1(ca){return ca.model.empty?"Empty":"Loaded"}function S(ca,ga){return ga.indexOf(ca)>=0}function b(ca,ga){for(var _s=0,Ss=Object.keys(ga);_s<Ss.length;_s++){var Ms=Ss[_s];ga[Ms]!==void 0&&(ca[Ms]=ga[Ms])}}function C(ca,ga){if(S("loadWork",ga))return ca}function w(ca,ga){if(S("setState",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.setState.apply(ca,_s)}}function k(ca,ga){if(S("on",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.on.apply(ca,_s)}}function x(ca,ga){if(S("on",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.once.apply(ca,_s)}}function E(ca,ga){if(S("off",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.off.apply(ca,_s)}}function L(ca,ga){if(S("intersectRaycaster",ga))return function(){for(var _s,Ss=[],Ms=0;Ms<arguments.length;Ms++)Ss[Ms]=arguments[Ms];return(_s=ca.model).intersectRaycaster.apply(_s,Ss)}}function F(ca,ga){if(S("project2d",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.project2d.apply(ca,_s)}}function _(ca,ga){if(S("updateCamera",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.updateCamera.apply(ca,_s)}}function P(ca,ga){if(S("initBasisLoader",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.initBasisLoader.apply(ca,_s)}}function R(ca,ga){if(S("getPixels",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.getPixels.apply(ca,_s)}}function V(ca,ga){if(S("render",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.render.apply(ca,_s)}}function W(ca,ga){if(S("needsRender",ga))return function(){ca.needsRender=!0}}function M(ca,ga){if(S("preloadPano",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.preloadPano.apply(ca,_s)}}function O(ca,ga){if(S("showFloor",ga))return function(_s){typeof _s=="number"?ca.model.show(_s):ca.model.show()}}function j(ca,ga){if(S("toggleHelperVisible",ga))return function(_s){ca.helperVisible=_s}}function A(ca,ga){for(var _s={},Ss=ga.length,Ms=-1;++Ms<Ss;){var Cs=ga[Ms];Cs in ca&&(_s[Cs]=ca[Cs])}return _s}function N(ca,ga){for(var _s=0;_s<ca.length;_s++)for(var Ss=0;Ss<ga.length;Ss++)if(ca[_s]===ga[Ss])return!0;return!1}var U=function(){function ca(ga,_s){this.values=ga,this.listeners=[],this.onValuesChange=_s}return ca.prototype.on=function(ga,_s){var Ss=this,Ms=[ga,_s];return this.listeners.push(Ms),function(){var Cs=Ss.listeners.indexOf(Ms);Cs>=0&&Ss.listeners.splice(Cs,1)}},ca.prototype.getValues=function(ga){return A(this.values,ga)},ca.prototype.setValues=function(ga,_s){var Ss,Ms,Cs=[];for(var Ts in _s)ga.indexOf(Ts)>=0&&(Ss=_s[Ts],Ms=this.values[Ts],!(typeof Ss=="number"&&typeof Ms=="number"&&isNaN(Ss)&&isNaN(Ms)||Ss===Ms))&&Cs.push(Ts);if(Cs.length!==0){for(var Is=e$1.__assign({},this.values),Bs=0,Ps=Cs;Bs<Ps.length;Bs++){var Ls=Ps[Bs];this.values[Ls]=_s[Ls]}this.onValuesChange&&this.onValuesChange(this.values,Is);for(var Rs=0,Os=this.listeners;Rs<Os.length;Rs++){var Fs=Os[Rs],Vs=Fs[0],ks=Fs[1];if(N(Vs,Cs)){var Ns=A(Is,Vs);ks(A(this.values,Vs),Ns)}}}},ca}();FiveCanvas=react.FiveCanvas=function(ca){var ga=ca.width,_s=ca.height,Ss=s$1(),Ms=u$1.createRef(),Cs=e$1.__assign({width:ga,height:_s},d);return u$1.useLayoutEffect(function(){if(Ms.current&&Ss.renderer){if(Ss.renderer.domElement.parentNode!==null&&Ss.renderer.domElement.parentNode!==Ms.current)throw new Error("There are more than 2 fiveCanvas in this context.");Ss.renderer.domElement.parentNode!==Ms.current&&Ms.current.appendChild(Ss.renderer.domElement),Ss.camera.aspect=ga/_s,Ss.camera.updateProjectionMatrix(),Ss.renderer.setSize(ga,_s),Ss.needsRender=!0}},[ga,_s,Ms.current]),u$1.createElement("div",{ref:Ms,style:Cs})},react.INJECTION_PROPNAME="$five",react.Store=U,react.createFiveFeature=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];return ca},createFiveProvider=react.createFiveProvider=function(ca){return ca===void 0&&(ca={}),function(ga){function _s(Ss){var Ms,Cs=this;Cs=ga.call(this,Ss)||this;var Ts=function(Is){var Bs=Is===void 0?{}:Is,Ps=Bs.backgroundColor,Ls=Ps===void 0?1579548:Ps,Rs=Bs.backgroundAlpha,Os=Rs===void 0?1:Rs,Fs=Bs.pixelRatio,Vs=Fs===void 0?1:Fs,ks=Bs.webgl2,Ns=ks!==void 0&&ks;if(typeof window!="undefined"){var Ds=null;if(!(Ds=Ns?a$1.shift():f$1.shift())){if(Ns){var $s=document.createElement("canvas"),Gs=$s.getContext("webgl2");if(Gs===null)throw new Error("error occurred when getting webgl2 canvas context");Ds=new i$1.WebGLRenderer({antialias:!1,alpha:!0,canvas:$s,context:Gs})}else Ds=new i$1.WebGLRenderer({antialias:!1,alpha:!0});Ds.outputEncoding=i$1.sRGBEncoding}return Ds.setPixelRatio(Vs),Ds.setClearColor(Ls,Os),Ds.autoClear=!0,Ds}}({pixelRatio:r$1.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:ca.backgroundAlpha,backgroundColor:ca.backgroundColor,webgl2:ca==null?void 0:ca.webgl2});return Cs.five=new r$1.Five(e$1.__assign({renderer:Ts},ca)),(Ss.work||Ss.initialWork)&&Cs.five.load(Ss.work||Ss.initialWork,Ss.initialState,void 0,(Ms=Ss.initialUserAction)===null||Ms===void 0||Ms),Cs.five.on("load",function(){var Is;Cs.props.onWorkChange&&Cs.props.onWorkChange((Is=Cs.five)===null||Is===void 0?void 0:Is.work)}),Cs.five.on("stateChange",function(Is,Bs){Cs.props.onStateChange&&Cs.props.onStateChange(Is,Bs)}),Cs.five.on("currentStateChange",function(Is,Bs){Cs.props.onCurrentStateChange&&Cs.props.onCurrentStateChange(Is,Bs)}),Cs.five.on("error",function(Is){Cs.props.onError?Cs.props.onError(Is):console.warn(Is.message)}),Cs}return e$1.__extends(_s,ga),_s.prototype.loadWork=function(Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Ss,Ms,Cs,Ts)},_s.prototype.shouldComponentUpdate=function(Ss){var Ms,Cs;return Ss.work&&Ss.work!==((Ms=this.five)===null||Ms===void 0?void 0:Ms.work)&&((Cs=this.five)===null||Cs===void 0||Cs.load(Ss.work,Ss.initialState)),!0},_s.prototype.componentWillUnmount=function(){var Ss;this.five&&(this.five.dispose(),(Ss=this.five.renderer)&&(Ss.capabilities.isWebGL2?f$1.indexOf(Ss)===-1&&f$1.push(Ss):a$1.indexOf(Ss)===-1&&a$1.push(Ss)),delete this.five)},_s.prototype.render=function(){var Ss=this;return u$1.createElement(c$1.Provider,{value:{five:this.five,loadWork:function(){for(var Ms=[],Cs=0;Cs<arguments.length;Cs++)Ms[Cs]=arguments[Cs];return Ss.loadWork.apply(Ss,Ms)}}},this.props.children)},_s}(u$1.Component)},react.createStore=function(ca){var ga=u$1.createContext(null);return{useStore:function(_s){var Ss=u$1.useContext(ga);if(Ss===null)throw new Error("StoreProvider never found.");var Ms=u$1.useRef(!0),Cs=u$1.useState(Ss.getValues(_s)),Ts=Cs[0],Is=Cs[1],Bs=e$1.__spreadArray([Ss],_s,!0);return u$1.useLayoutEffect(function(){return Ms.current?Ms.current=!1:Is(Ss.getValues(_s)),Ss.on(_s,function(Ps){return Is(Ps)})},Bs),[Ts,u$1.useCallback(function(Ps){return Ss.setValues(_s,Ps)},Bs)]},useStoreSetter:function(_s){var Ss=u$1.useContext(ga);if(Ss===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(Ms){return Ss.setValues(_s,Ms)},e$1.__spreadArray([Ss],_s,!0))},watchStore:function(_s,Ss,Ms){var Cs=u$1.useContext(ga);if(Cs===null)throw new Error("StoreProvider never found.");var Ts=e$1.__spreadArray([Cs],_s,!0);Ms!==void 0&&(Ts=Ts.concat(Ms)),u$1.useLayoutEffect(function(){return Cs.on(_s,Ss)},Ts)},useStoreAction:function(_s){var Ss=u$1.useContext(ga);if(Ss===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var Ms=[],Cs=0;Cs<arguments.length;Cs++)Ms[Cs]=arguments[Cs];var Ts=ca[_s],Is=Ts[0],Bs=Ts.slice(1),Ps=function(){return Ss.getValues(Bs)},Ls=function(Rs){return Ss.setValues(Bs,Rs)};return Is.apply(void 0,e$1.__spreadArray([Ps,Ls],Ms,!1))},[])},StoreProvider:function(_s){function Ss(Ms){var Cs=_s.call(this,Ms)||this;return Cs.store=new U(Ms.initialValue,function(){for(var Ts,Is=[],Bs=0;Bs<arguments.length;Bs++)Is[Bs]=arguments[Bs];Cs.props.onValuesChange&&(Ts=Cs.props).onValuesChange.apply(Ts,Is)}),Cs}return e$1.__extends(Ss,_s),Ss.prototype.shouldComponentUpdate=function(Ms){return Ms.children!==this.props.children},Ss.prototype.render=function(){return u$1.createElement(ga.Provider,{value:this.store},this.props.children)},Ss}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var ca=s$1();return{updateCamera:u$1.useCallback(function(ga,_s){return ca.updateCamera(ga,_s)},[ca]),initBasisLoader:u$1.useCallback(function(ga){return ca.initBasisLoader(ga)},[ca]),getPixels:u$1.useCallback(function(ga,_s,Ss,Ms,Cs){return ca.getPixels(ga,_s,Ss,Ms,Cs)},[ca]),render:u$1.useCallback(function(ga){return ca.render(ga)},[ca]),needsRender:u$1.useCallback(function(){return ca.needsRender=!0},[ca]),preloadPano:u$1.useCallback(function(ga,_s){return ca.preloadPano(ga,_s)},[ca])}},react.useFiveCameraDirection=function(){var ca=s$1(),ga=u$1.useState(function(){return y(ca)}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return Ss(y(ca))})},[ca]),_s},react.useFiveCameraRaycaster=function(){var ca=s$1(),ga=u$1.useState(function(){return m$1(ca)}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return Ss(m$1(ca))})},[ca]),_s},react.useFiveCurrentObserver=function(){var ca=s$1(),ga=u$1.useState(function(){return ca.getCurrentState()}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("currentStateChange",function(){return Ss(ca.getCurrentState())})},[ca]),ca.work?ca.work.observers[_s.panoIndex]:null},react.useFiveCurrentState=function(){var ca=s$1(),ga=u$1.useState(function(){return ca.getCurrentState()}),_s=ga[0],Ss=ga[1],Ms=u$1.useCallback(function(Cs,Ts,Is){Ts===void 0&&(Ts=!1),Is===void 0&&(Is=!0);var Bs=typeof Cs=="function"?Cs(ca.getCurrentState()):Cs;ca.setState(Bs,Ts,Is)},[ca]);return u$1.useLayoutEffect(function(){return ca.on("currentStateChange",function(){return Ss(ca.getCurrentState())})},[ca]),[_s,Ms]},react.useFiveEventCallback=function(ca,ga,_s){var Ss=s$1(),Ms=[Ss,ca];_s!==void 0&&(Ms=Ms.concat(_s)),u$1.useLayoutEffect(function(){return Ss.on(ca,ga)},Ms)},react.useFiveFloor=function(){var ca=s$1(),ga=u$1.useState(ca.model.shownFloor),_s=ga[0],Ss=ga[1],Ms=u$1.useState(ca.model.floorLength),Cs=Ms[0],Ts=Ms[1],Is=u$1.useCallback(function(Bs){typeof Bs=="number"?ca.model.show(Bs):ca.model.show()},[ca]);return u$1.useLayoutEffect(function(){var Bs=[];return Bs.push(ca.on("modelShownFloorChange",function(){return Ss(ca.model.shownFloor)})),Bs.push(ca.on("modelLoaded",function(){return Ts(ca.model.floorLength)})),function(){for(var Ps;Ps=Bs.shift();)Ps()}},[ca]),[_s,Cs,Is]},react.useFiveHelper=function(){var ca=s$1(),ga=u$1.useState(ca.helperVisible),_s=ga[0],Ss=ga[1],Ms=u$1.useCallback(function(Cs){ca.helperVisible=Cs},[ca]);return u$1.useLayoutEffect(function(){return ca.on("helpersVisibleChange",function(Cs){return Ss(Cs)})},[ca]),[_s,Ms]},react.useFiveModelIntersectRaycaster=function(){var ca=s$1();return u$1.useCallback(function(ga){return ca.model.intersectRaycaster(ga)},[ca])},react.useFiveModelReadyState=function(){var ca=s$1(),ga=u$1.useState(function(){return g$1(ca)}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("modelLoaded",function(){return Ss(g$1(ca))})},[ca]),_s},react.useFiveProject2d=function(){var ca=s$1(),ga=u$1.useState(function(){return Symbol()});ga[0];var _s=ga[1];return u$1.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return _s(Symbol())})},[ca]),u$1.useCallback(function(Ss,Ms){return ca.project2d(Ss,Ms)},[ca])},react.useFiveScene=p$1,react.useFiveSceneEffect=v,react.useFiveState=function(){var ca=s$1(),ga=u$1.useState(function(){return h$1(ca)}),_s=ga[0],Ss=ga[1],Ms=u$1.useCallback(function(Cs,Ts,Is){Ts===void 0&&(Ts=!1),Is===void 0&&(Is=!0);var Bs=typeof Cs=="function"?Cs(ca.getCurrentState()):Cs;ca.setState(Bs,Ts,Is)},[ca]);return u$1.useLayoutEffect(function(){return ca.on("stateChange",function(){return Ss(h$1(ca))})},[ca]),[_s,Ms]},react.useFiveWork=function(){var ca=s$1(),ga=l$1(),_s=u$1.useState(function(){return ca.work}),Ss=_s[0],Ms=_s[1];return u$1.useLayoutEffect(function(){return ca.on("load",function(){return Ms(ca.work)})},[ca]),[Ss,ga]},react.withFive=function(ca){return function(ga){return u$1.forwardRef(function(_s,Ss){var Ms=s$1(),Cs=l$1(),Ts=function(yu,Su){return[S("unsafe__fiveInstance",Su)?yu:void 0]}(Ms,ca)[0],Is=function(yu,Su){var Cu=S("state",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return e$1.__assign({},yu.state)},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("stateChange",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Bs=Is[0],Ps=Is[1],Ls=function(yu,Su){var Cu=S("currentState",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.getCurrentState()},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("currentStateChange",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Rs=Ls[0],Os=Ls[1],Fs=function(yu,Su){var Cu=S("currentObserver",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.getCurrentState()},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("currentStateChange",function(){return Tu(Symbol())})},[yu]),[Pu?yu.work?yu.work.observers[Pu.panoIndex]:null:void 0,Au]}(Ms,ca),Vs=Fs[0],ks=Fs[1],Ns=function(yu,Su){var Cu=S("work",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.work},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("load",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Ds=Ns[0],$s=Ns[1],Gs=function(yu,Su){var Cu=S("model",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.model},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("modelLoaded",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Us=Gs[0],Hs=Gs[1],zs=function(yu,Su){return[S("scene",Su)?yu.scene:void 0]}(Ms,ca)[0],js=function(yu,Su){var Cu=S("cameraDirection",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.camera.getWorldDirection(new i$1.Vector3)},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("cameraUpdate",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Ws=js[0],Qs=js[1],Zs=function(yu,Su){var Cu=S("cameraRaycaster",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu){var zu=yu.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(yu.camera.position,zu)}},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("cameraUpdate",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Xs=Zs[0],eu=Zs[1],Ys=function(yu,Su){var Cu=S("modelReadyState",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.model.empty?"Empty":"Loaded"},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("modelLoaded",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Js=Ys[0],qs=Ys[1],ru=function(yu,Su){var Cu=S("shownFloor",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.model.shownFloor},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("modelShownFloorChange",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),tu=ru[0],nu=ru[1],uu=function(yu,Su){var Cu=S("totalFloorLength",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.model.hasFloors()},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("modelLoaded",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),fu=uu[0],mu=uu[1],vu=function(yu,Su){var Cu=S("helperVisible",Su),bu=u$1.useState(Symbol()),Au=bu[0],Tu=bu[1],Pu=u$1.useMemo(function(){if(Cu)return yu.helperVisible},[yu,Au]);return u$1.useLayoutEffect(function(){if(Cu)return yu.on("helpersVisibleChange",function(){return Tu(Symbol())})},[yu]),[Pu,Au]}(Ms,ca),Eu=vu[0],hu=vu[1],pu=u$1.useMemo(function(){var yu={};return b(yu,{setState:w(Ms,ca),loadWork:C(Cs,ca),on:k(Ms,ca),once:x(Ms,ca),off:E(Ms,ca),intersectRaycaster:L(Ms,ca),project2d:F(Ms,ca),updateCamera:_(Ms,ca),initBasisLoader:P(Ms,ca),getPixels:R(Ms,ca),render:V(Ms,ca),needsRender:W(Ms,ca),preloadPano:M(Ms,ca),showFloor:O(Ms,ca),toggleHelperVisible:j(Ms,ca)}),yu},[Ms,Cs]),du=u$1.useMemo(function(){var yu=e$1.__assign({},pu);return b(yu,{unsafe__fiveInstance:Ts,state:Bs,currentState:Rs,currentObserver:Vs,work:Ds,model:Us,scene:zs,cameraDirection:Ws,cameraRaycaster:Xs,modelReadyState:Js,shownFloor:tu,totalFloorLength:fu,helperVisible:Eu}),yu},[Ms,pu,Ps,Os,ks,$s,Hs,Qs,eu,qs,nu,mu,hu]);return u$1.createElement(ga,e$1.__assign({ref:Ss,$five:du},_s))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$1.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(ca,ga,_s){var Ss,Ms={},Cs=null,Ts=null;_s!==void 0&&(Cs=""+_s),ga.key!==void 0&&(Cs=""+ga.key),ga.ref!==void 0&&(Ts=ga.ref);for(Ss in ga)n$1.call(ga,Ss)&&!p.hasOwnProperty(Ss)&&(Ms[Ss]=ga[Ss]);if(ca&&ca.defaultProps)for(Ss in ga=ca.defaultProps,ga)Ms[Ss]===void 0&&(Ms[Ss]=ga[Ss]);return{$$typeof:g,type:ca,key:Cs,ref:Ts,props:Ms,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(ca){(function(){var ga={}.hasOwnProperty;function _s(){for(var Ss=[],Ms=0;Ms<arguments.length;Ms++){var Cs=arguments[Ms];if(!!Cs){var Ts=typeof Cs;if(Ts==="string"||Ts==="number")Ss.push(Cs);else if(Array.isArray(Cs)){if(Cs.length){var Is=_s.apply(null,Cs);Is&&Ss.push(Is)}}else if(Ts==="object")if(Cs.toString===Object.prototype.toString)for(var Bs in Cs)ga.call(Cs,Bs)&&Cs[Bs]&&Ss.push(Bs);else Ss.push(Cs.toString())}}return Ss.join(" ")}ca.exports?(_s.default=_s,ca.exports=_s):window.classNames=_s})()})(classnames);var classNames=classnames.exports;function die(ca){for(var ga=arguments.length,_s=new Array(ga>1?ga-1:0),Ss=1;Ss<ga;Ss++)_s[Ss-1]=arguments[Ss];throw new Error(typeof ca=="number"?"[MobX] minified error nr: "+ca+(_s.length?" "+_s.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+ca)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(ca){var ga=!1;return function(){if(!ga)return ga=!0,ca.apply(this,arguments)}}var noop=function ca(){};function isFunction(ca){return typeof ca=="function"}function isStringish(ca){var ga=typeof ca;switch(ga){case"string":case"symbol":case"number":return!0}return!1}function isObject(ca){return ca!==null&&typeof ca=="object"}function isPlainObject(ca){if(!isObject(ca))return!1;var ga=Object.getPrototypeOf(ca);if(ga==null)return!0;var _s=Object.hasOwnProperty.call(ga,"constructor")&&ga.constructor;return typeof _s=="function"&&_s.toString()===plainObjectString}function isGenerator(ca){var ga=ca==null?void 0:ca.constructor;return ga?ga.name==="GeneratorFunction"||ga.displayName==="GeneratorFunction":!1}function addHiddenProp(ca,ga,_s){defineProperty(ca,ga,{enumerable:!1,writable:!0,configurable:!0,value:_s})}function addHiddenFinalProp(ca,ga,_s){defineProperty(ca,ga,{enumerable:!1,writable:!1,configurable:!0,value:_s})}function createInstanceofPredicate(ca,ga){var _s="isMobX"+ca;return ga.prototype[_s]=!0,function(Ss){return isObject(Ss)&&Ss[_s]===!0}}function isES6Map(ca){return ca instanceof Map}function isES6Set(ca){return ca instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(ca){var ga=Object.keys(ca);if(!hasGetOwnPropertySymbols)return ga;var _s=Object.getOwnPropertySymbols(ca);return _s.length?[].concat(ga,_s.filter(function(Ss){return objectPrototype.propertyIsEnumerable.call(ca,Ss)})):ga}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(ca){return Object.getOwnPropertyNames(ca).concat(Object.getOwnPropertySymbols(ca))}:Object.getOwnPropertyNames;function toPrimitive(ca){return ca===null?null:typeof ca=="object"?""+ca:ca}function hasProp(ca,ga){return objectPrototype.hasOwnProperty.call(ca,ga)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function ca(ga){var _s={};return ownKeys(ga).forEach(function(Ss){_s[Ss]=getDescriptor(ga,Ss)}),_s};function _defineProperties(ca,ga){for(var _s=0;_s<ga.length;_s++){var Ss=ga[_s];Ss.enumerable=Ss.enumerable||!1,Ss.configurable=!0,"value"in Ss&&(Ss.writable=!0),Object.defineProperty(ca,Ss.key,Ss)}}function _createClass(ca,ga,_s){return ga&&_defineProperties(ca.prototype,ga),_s&&_defineProperties(ca,_s),Object.defineProperty(ca,"prototype",{writable:!1}),ca}function _extends(){return _extends=Object.assign||function(ca){for(var ga=1;ga<arguments.length;ga++){var _s=arguments[ga];for(var Ss in _s)Object.prototype.hasOwnProperty.call(_s,Ss)&&(ca[Ss]=_s[Ss])}return ca},_extends.apply(this,arguments)}function _inheritsLoose(ca,ga){ca.prototype=Object.create(ga.prototype),ca.prototype.constructor=ca,_setPrototypeOf(ca,ga)}function _setPrototypeOf(ca,ga){return _setPrototypeOf=Object.setPrototypeOf||function(Ss,Ms){return Ss.__proto__=Ms,Ss},_setPrototypeOf(ca,ga)}function _assertThisInitialized(ca){if(ca===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ca}function _unsupportedIterableToArray(ca,ga){if(!!ca){if(typeof ca=="string")return _arrayLikeToArray(ca,ga);var _s=Object.prototype.toString.call(ca).slice(8,-1);if(_s==="Object"&&ca.constructor&&(_s=ca.constructor.name),_s==="Map"||_s==="Set")return Array.from(ca);if(_s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_s))return _arrayLikeToArray(ca,ga)}}function _arrayLikeToArray(ca,ga){(ga==null||ga>ca.length)&&(ga=ca.length);for(var _s=0,Ss=new Array(ga);_s<ga;_s++)Ss[_s]=ca[_s];return Ss}function _createForOfIteratorHelperLoose(ca,ga){var _s=typeof Symbol!="undefined"&&ca[Symbol.iterator]||ca["@@iterator"];if(_s)return(_s=_s.call(ca)).next.bind(_s);if(Array.isArray(ca)||(_s=_unsupportedIterableToArray(ca))||ga&&ca&&typeof ca.length=="number"){_s&&(ca=_s);var Ss=0;return function(){return Ss>=ca.length?{done:!0}:{done:!1,value:ca[Ss++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(ca){function ga(_s,Ss){storeAnnotation(_s,Ss,ca)}return Object.assign(ga,ca)}function storeAnnotation(ca,ga,_s){hasProp(ca,storedAnnotationsSymbol)||addHiddenProp(ca,storedAnnotationsSymbol,_extends({},ca[storedAnnotationsSymbol])),isOverride(_s)||(ca[storedAnnotationsSymbol][ga]=_s)}function collectStoredAnnotations(ca){return hasProp(ca,storedAnnotationsSymbol)||addHiddenProp(ca,storedAnnotationsSymbol,_extends({},ca[storedAnnotationsSymbol])),ca[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function ca(_s){_s===void 0&&(_s="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=_s}var ga=ca.prototype;return ga.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Ss){return Ss()})},ga.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Ss){return Ss()})},ga.reportObserved=function(){return reportObserved(this)},ga.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},ga.toString=function(){return this.name_},ca}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(ca,ga,_s){ga===void 0&&(ga=noop),_s===void 0&&(_s=noop);var Ss=new Atom(ca);return ga!==noop&&onBecomeObserved(Ss,ga),_s!==noop&&onBecomeUnobserved(Ss,_s),Ss}function identityComparer(ca,ga){return ca===ga}function structuralComparer(ca,ga){return deepEqual(ca,ga)}function shallowComparer(ca,ga){return deepEqual(ca,ga,1)}function defaultComparer(ca,ga){return Object.is?Object.is(ca,ga):ca===ga?ca!==0||1/ca===1/ga:ca!==ca&&ga!==ga}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(ca,ga,_s){return isObservable(ca)?ca:Array.isArray(ca)?observable.array(ca,{name:_s}):isPlainObject(ca)?observable.object(ca,void 0,{name:_s}):isES6Map(ca)?observable.map(ca,{name:_s}):isES6Set(ca)?observable.set(ca,{name:_s}):typeof ca=="function"&&!isAction(ca)&&!isFlow(ca)?isGenerator(ca)?flow(ca):autoAction(_s,ca):ca}function shallowEnhancer(ca,ga,_s){if(ca==null||isObservableObject(ca)||isObservableArray(ca)||isObservableMap(ca)||isObservableSet(ca))return ca;if(Array.isArray(ca))return observable.array(ca,{name:_s,deep:!1});if(isPlainObject(ca))return observable.object(ca,void 0,{name:_s,deep:!1});if(isES6Map(ca))return observable.map(ca,{name:_s,deep:!1});if(isES6Set(ca))return observable.set(ca,{name:_s,deep:!1})}function referenceEnhancer(ca){return ca}function refStructEnhancer(ca,ga){return deepEqual(ca,ga)?ga:ca}var OVERRIDE="override";function isOverride(ca){return ca.annotationType_===OVERRIDE}function createActionAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$1,extend_:extend_$1}}function make_$1(ca,ga,_s,Ss){var Ms;if((Ms=this.options_)!=null&&Ms.bound)return this.extend_(ca,ga,_s,!1)===null?0:1;if(Ss===ca.target_)return this.extend_(ca,ga,_s,!1)===null?0:2;if(isAction(_s.value))return 1;var Cs=createActionDescriptor(ca,this,ga,_s,!1);return defineProperty(Ss,ga,Cs),2}function extend_$1(ca,ga,_s,Ss){var Ms=createActionDescriptor(ca,this,ga,_s);return ca.defineProperty_(ga,Ms,Ss)}function assertActionDescriptor(ca,ga,_s,Ss){ga.annotationType_,Ss.value}function createActionDescriptor(ca,ga,_s,Ss,Ms){var Cs,Ts,Is,Bs,Ps,Ls,Rs;Ms===void 0&&(Ms=globalState.safeDescriptors),assertActionDescriptor(ca,ga,_s,Ss);var Os=Ss.value;if((Cs=ga.options_)!=null&&Cs.bound){var Fs;Os=Os.bind((Fs=ca.proxy_)!=null?Fs:ca.target_)}return{value:createAction((Ts=(Is=ga.options_)==null?void 0:Is.name)!=null?Ts:_s.toString(),Os,(Bs=(Ps=ga.options_)==null?void 0:Ps.autoAction)!=null?Bs:!1,(Ls=ga.options_)!=null&&Ls.bound?(Rs=ca.proxy_)!=null?Rs:ca.target_:void 0),configurable:Ms?ca.isPlainObject_:!0,enumerable:!1,writable:!Ms}}function createFlowAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$2,extend_:extend_$2}}function make_$2(ca,ga,_s,Ss){var Ms;if(Ss===ca.target_)return this.extend_(ca,ga,_s,!1)===null?0:2;if((Ms=this.options_)!=null&&Ms.bound&&(!hasProp(ca.target_,ga)||!isFlow(ca.target_[ga]))&&this.extend_(ca,ga,_s,!1)===null)return 0;if(isFlow(_s.value))return 1;var Cs=createFlowDescriptor(ca,this,ga,_s,!1,!1);return defineProperty(Ss,ga,Cs),2}function extend_$2(ca,ga,_s,Ss){var Ms,Cs=createFlowDescriptor(ca,this,ga,_s,(Ms=this.options_)==null?void 0:Ms.bound);return ca.defineProperty_(ga,Cs,Ss)}function assertFlowDescriptor(ca,ga,_s,Ss){ga.annotationType_,Ss.value}function createFlowDescriptor(ca,ga,_s,Ss,Ms,Cs){Cs===void 0&&(Cs=globalState.safeDescriptors),assertFlowDescriptor(ca,ga,_s,Ss);var Ts=Ss.value;if(isFlow(Ts)||(Ts=flow(Ts)),Ms){var Is;Ts=Ts.bind((Is=ca.proxy_)!=null?Is:ca.target_),Ts.isMobXFlow=!0}return{value:Ts,configurable:Cs?ca.isPlainObject_:!0,enumerable:!1,writable:!Cs}}function createComputedAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$3,extend_:extend_$3}}function make_$3(ca,ga,_s){return this.extend_(ca,ga,_s,!1)===null?0:1}function extend_$3(ca,ga,_s,Ss){return assertComputedDescriptor(ca,this,ga,_s),ca.defineComputedProperty_(ga,_extends({},this.options_,{get:_s.get,set:_s.set}),Ss)}function assertComputedDescriptor(ca,ga,_s,Ss){ga.annotationType_,Ss.get}function createObservableAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$4,extend_:extend_$4}}function make_$4(ca,ga,_s){return this.extend_(ca,ga,_s,!1)===null?0:1}function extend_$4(ca,ga,_s,Ss){var Ms,Cs;return assertObservableDescriptor(ca,this),ca.defineObservableProperty_(ga,_s.value,(Ms=(Cs=this.options_)==null?void 0:Cs.enhancer)!=null?Ms:deepEnhancer,Ss)}function assertObservableDescriptor(ca,ga,_s,Ss){ga.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(ca){return{annotationType_:AUTO,options_:ca,make_:make_$5,extend_:extend_$5}}function make_$5(ca,ga,_s,Ss){var Ms,Cs;if(_s.get)return computed.make_(ca,ga,_s,Ss);if(_s.set){var Ts=createAction(ga.toString(),_s.set);return Ss===ca.target_?ca.defineProperty_(ga,{configurable:globalState.safeDescriptors?ca.isPlainObject_:!0,set:Ts})===null?0:2:(defineProperty(Ss,ga,{configurable:!0,set:Ts}),2)}if(Ss!==ca.target_&&typeof _s.value=="function"){var Is;if(isGenerator(_s.value)){var Bs,Ps=(Bs=this.options_)!=null&&Bs.autoBind?flow.bound:flow;return Ps.make_(ca,ga,_s,Ss)}var Ls=(Is=this.options_)!=null&&Is.autoBind?autoAction.bound:autoAction;return Ls.make_(ca,ga,_s,Ss)}var Rs=((Ms=this.options_)==null?void 0:Ms.deep)===!1?observable.ref:observable;if(typeof _s.value=="function"&&(Cs=this.options_)!=null&&Cs.autoBind){var Os;_s.value=_s.value.bind((Os=ca.proxy_)!=null?Os:ca.target_)}return Rs.make_(ca,ga,_s,Ss)}function extend_$5(ca,ga,_s,Ss){var Ms,Cs;if(_s.get)return computed.extend_(ca,ga,_s,Ss);if(_s.set)return ca.defineProperty_(ga,{configurable:globalState.safeDescriptors?ca.isPlainObject_:!0,set:createAction(ga.toString(),_s.set)},Ss);if(typeof _s.value=="function"&&(Ms=this.options_)!=null&&Ms.autoBind){var Ts;_s.value=_s.value.bind((Ts=ca.proxy_)!=null?Ts:ca.target_)}var Is=((Cs=this.options_)==null?void 0:Cs.deep)===!1?observable.ref:observable;return Is.extend_(ca,ga,_s,Ss)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(ca){return ca||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(ca){return ca.deep===!0?deepEnhancer:ca.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(ca.defaultDecorator)}function getAnnotationFromOptions(ca){var ga;return ca?(ga=ca.defaultDecorator)!=null?ga:createAutoAnnotation(ca):void 0}function getEnhancerFromAnnotation(ca){var ga,_s;return ca&&(ga=(_s=ca.options_)==null?void 0:_s.enhancer)!=null?ga:deepEnhancer}function createObservable(ca,ga,_s){if(isStringish(ga)){storeAnnotation(ca,ga,observableAnnotation);return}return isObservable(ca)?ca:isPlainObject(ca)?observable.object(ca,ga,_s):Array.isArray(ca)?observable.array(ca,ga):isES6Map(ca)?observable.map(ca,ga):isES6Set(ca)?observable.set(ca,ga):typeof ca=="object"&&ca!==null?ca:observable.box(ca,ga)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return new ObservableValue(ga,getEnhancerFromOptions(Ss),Ss.name,!0,Ss.equals)},array:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return(globalState.useProxies===!1||Ss.proxy===!1?createLegacyArray:createObservableArray)(ga,getEnhancerFromOptions(Ss),Ss.name)},map:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return new ObservableMap(ga,getEnhancerFromOptions(Ss),Ss.name)},set:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return new ObservableSet(ga,getEnhancerFromOptions(Ss),Ss.name)},object:function ca(ga,_s,Ss){return extendObservable(globalState.useProxies===!1||(Ss==null?void 0:Ss.proxy)===!1?asObservableObject({},Ss):asDynamicObservableObject({},Ss),ga,_s)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function ca(ga,_s){if(isStringish(_s))return storeAnnotation(ga,_s,computedAnnotation);if(isPlainObject(ga))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,ga));var Ss=isPlainObject(_s)?_s:{};return Ss.get=ga,Ss.name||(Ss.name=ga.name||""),new ComputedValue(Ss)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(ca,ga,_s,Ss){_s===void 0&&(_s=!1);function Ms(){return executeAction(ca,_s,ga,Ss||this,arguments)}return Ms.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=ca,Object.defineProperty(Ms,"name",tmpNameDescriptor)),Ms}function executeAction(ca,ga,_s,Ss,Ms){var Cs=_startAction(ca,ga);try{return _s.apply(Ss,Ms)}catch(Ts){throw Cs.error_=Ts,Ts}finally{_endAction(Cs)}}function _startAction(ca,ga,_s,Ss){var Ms=!1,Cs=0,Ts=globalState.trackingDerivation,Is=!ga||!Ts;startBatch();var Bs=globalState.allowStateChanges;Is&&(untrackedStart(),Bs=allowStateChangesStart(!0));var Ps=allowStateReadsStart(!0),Ls={runAsAction_:Is,prevDerivation_:Ts,prevAllowStateChanges_:Bs,prevAllowStateReads_:Ps,notifySpy_:Ms,startTime_:Cs,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Ls.actionId_,Ls}function _endAction(ca){currentActionId!==ca.actionId_&&die(30),currentActionId=ca.parentActionId_,ca.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(ca.prevAllowStateChanges_),allowStateReadsEnd(ca.prevAllowStateReads_),endBatch(),ca.runAsAction_&&untrackedEnd(ca.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(ca,ga){var _s=allowStateChangesStart(ca);try{return ga()}finally{allowStateChangesEnd(_s)}}function allowStateChangesStart(ca){var ga=globalState.allowStateChanges;return globalState.allowStateChanges=ca,ga}function allowStateChangesEnd(ca){globalState.allowStateChanges=ca}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(ca,ga){_inheritsLoose(_s,ca);function _s(Ms,Cs,Ts,Is,Bs){var Ps;return Ts===void 0&&(Ts="ObservableValue"),Bs===void 0&&(Bs=comparer.default),Ps=ca.call(this,Ts)||this,Ps.enhancer=void 0,Ps.name_=void 0,Ps.equals=void 0,Ps.hasUnreportedChange_=!1,Ps.interceptors_=void 0,Ps.changeListeners_=void 0,Ps.value_=void 0,Ps.dehancer=void 0,Ps.enhancer=Cs,Ps.name_=Ts,Ps.equals=Bs,Ps.value_=Cs(Ms,void 0,Ts),Ps}var Ss=_s.prototype;return Ss.dehanceValue=function(Cs){return this.dehancer!==void 0?this.dehancer(Cs):Cs},Ss.set=function(Cs){this.value_,Cs=this.prepareNewValue_(Cs),Cs!==globalState.UNCHANGED&&this.setNewValue_(Cs)},Ss.prepareNewValue_=function(Cs){if(hasInterceptors(this)){var Ts=interceptChange(this,{object:this,type:UPDATE,newValue:Cs});if(!Ts)return globalState.UNCHANGED;Cs=Ts.newValue}return Cs=this.enhancer(Cs,this.value_,this.name_),this.equals(this.value_,Cs)?globalState.UNCHANGED:Cs},Ss.setNewValue_=function(Cs){var Ts=this.value_;this.value_=Cs,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Cs,oldValue:Ts})},Ss.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},Ss.intercept_=function(Cs){return registerInterceptor(this,Cs)},Ss.observe_=function(Cs,Ts){return Ts&&Cs({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Cs)},Ss.raw=function(){return this.value_},Ss.toJSON=function(){return this.get()},Ss.toString=function(){return this.name_+"["+this.value_+"]"},Ss.valueOf=function(){return toPrimitive(this.get())},Ss[ga]=function(){return this.valueOf()},_s}(Atom,_Symbol$toPrimitive),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(ca){function ga(Ss){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,Ss.get||die(31),this.derivation=Ss.get,this.name_=Ss.name||"ComputedValue",Ss.set&&(this.setter_=createAction("ComputedValue-setter",Ss.set)),this.equals_=Ss.equals||(Ss.compareStructural||Ss.struct?comparer.structural:comparer.default),this.scope_=Ss.context,this.requiresReaction_=Ss.requiresReaction,this.keepAlive_=!!Ss.keepAlive}var _s=ga.prototype;return _s.onBecomeStale_=function(){propagateMaybeChanged(this)},_s.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Ms){return Ms()})},_s.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Ms){return Ms()})},_s.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Ms=globalState.trackingContext;this.keepAlive_&&!Ms&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Ms}var Cs=this.value_;if(isCaughtException(Cs))throw Cs.cause;return Cs},_s.set=function(Ms){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Ms)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},_s.trackAndCompute=function(){var Ms=this.value_,Cs=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Ts=this.computeValue_(!0),Is=Cs||isCaughtException(Ms)||isCaughtException(Ts)||!this.equals_(Ms,Ts);return Is&&(this.value_=Ts),Is},_s.computeValue_=function(Ms){this.isComputing_=!0;var Cs=allowStateChangesStart(!1),Ts;if(Ms)Ts=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Ts=this.derivation.call(this.scope_);else try{Ts=this.derivation.call(this.scope_)}catch(Is){Ts=new CaughtException(Is)}return allowStateChangesEnd(Cs),this.isComputing_=!1,Ts},_s.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},_s.observe_=function(Ms,Cs){var Ts=this,Is=!0,Bs=void 0;return autorun(function(){var Ps=Ts.get();if(!Is||Cs){var Ls=untrackedStart();Ms({observableKind:"computed",debugObjectName:Ts.name_,type:UPDATE,object:Ts,newValue:Ps,oldValue:Bs}),untrackedEnd(Ls)}Is=!1,Bs=Ps})},_s.warnAboutUntrackedRead_=function(){},_s.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},_s.valueOf=function(){return toPrimitive(this.get())},_s[ca]=function(){return this.valueOf()},ga}(_Symbol$toPrimitive$1),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(ca){ca[ca.NOT_TRACKING_=-1]="NOT_TRACKING_",ca[ca.UP_TO_DATE_=0]="UP_TO_DATE_",ca[ca.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",ca[ca.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(ca){ca[ca.NONE=0]="NONE",ca[ca.LOG=1]="LOG",ca[ca.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function ca(ga){this.cause=void 0,this.cause=ga};function isCaughtException(ca){return ca instanceof CaughtException}function shouldCompute(ca){switch(ca.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var ga=allowStateReadsStart(!0),_s=untrackedStart(),Ss=ca.observing_,Ms=Ss.length,Cs=0;Cs<Ms;Cs++){var Ts=Ss[Cs];if(isComputedValue(Ts)){if(globalState.disableErrorBoundaries)Ts.get();else try{Ts.get()}catch{return untrackedEnd(_s),allowStateReadsEnd(ga),!0}if(ca.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(_s),allowStateReadsEnd(ga),!0}}return changeDependenciesStateTo0(ca),untrackedEnd(_s),allowStateReadsEnd(ga),!1}}}function checkIfStateModificationsAreAllowed(ca){}function trackDerivedFunction(ca,ga,_s){var Ss=allowStateReadsStart(!0);changeDependenciesStateTo0(ca),ca.newObserving_=new Array(ca.observing_.length+100),ca.unboundDepsCount_=0,ca.runId_=++globalState.runId;var Ms=globalState.trackingDerivation;globalState.trackingDerivation=ca,globalState.inBatch++;var Cs;if(globalState.disableErrorBoundaries===!0)Cs=ga.call(_s);else try{Cs=ga.call(_s)}catch(Ts){Cs=new CaughtException(Ts)}return globalState.inBatch--,globalState.trackingDerivation=Ms,bindDependencies(ca),allowStateReadsEnd(Ss),Cs}function bindDependencies(ca){for(var ga=ca.observing_,_s=ca.observing_=ca.newObserving_,Ss=IDerivationState_.UP_TO_DATE_,Ms=0,Cs=ca.unboundDepsCount_,Ts=0;Ts<Cs;Ts++){var Is=_s[Ts];Is.diffValue_===0&&(Is.diffValue_=1,Ms!==Ts&&(_s[Ms]=Is),Ms++),Is.dependenciesState_>Ss&&(Ss=Is.dependenciesState_)}for(_s.length=Ms,ca.newObserving_=null,Cs=ga.length;Cs--;){var Bs=ga[Cs];Bs.diffValue_===0&&removeObserver(Bs,ca),Bs.diffValue_=0}for(;Ms--;){var Ps=_s[Ms];Ps.diffValue_===1&&(Ps.diffValue_=0,addObserver(Ps,ca))}Ss!==IDerivationState_.UP_TO_DATE_&&(ca.dependenciesState_=Ss,ca.onBecomeStale_())}function clearObserving(ca){var ga=ca.observing_;ca.observing_=[];for(var _s=ga.length;_s--;)removeObserver(ga[_s],ca);ca.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(ca){var ga=untrackedStart();try{return ca()}finally{untrackedEnd(ga)}}function untrackedStart(){var ca=globalState.trackingDerivation;return globalState.trackingDerivation=null,ca}function untrackedEnd(ca){globalState.trackingDerivation=ca}function allowStateReadsStart(ca){var ga=globalState.allowStateReads;return globalState.allowStateReads=ca,ga}function allowStateReadsEnd(ca){globalState.allowStateReads=ca}function changeDependenciesStateTo0(ca){if(ca.dependenciesState_!==IDerivationState_.UP_TO_DATE_){ca.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var ga=ca.observing_,_s=ga.length;_s--;)ga[_s].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function ca(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var ca=getGlobal();return ca.__mobxInstanceCount>0&&!ca.__mobxGlobals&&(canMergeGlobalState=!1),ca.__mobxGlobals&&ca.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?ca.__mobxGlobals?(ca.__mobxInstanceCount+=1,ca.__mobxGlobals.UNCHANGED||(ca.__mobxGlobals.UNCHANGED={}),ca.__mobxGlobals):(ca.__mobxInstanceCount=1,ca.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var ca=getGlobal();--ca.__mobxInstanceCount===0&&(ca.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(ca,ga){ca.observers_.add(ga),ca.lowestObserverState_>ga.dependenciesState_&&(ca.lowestObserverState_=ga.dependenciesState_)}function removeObserver(ca,ga){ca.observers_.delete(ga),ca.observers_.size===0&&queueForUnobservation(ca)}function queueForUnobservation(ca){ca.isPendingUnobservation_===!1&&(ca.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(ca))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var ca=globalState.pendingUnobservations,ga=0;ga<ca.length;ga++){var _s=ca[ga];_s.isPendingUnobservation_=!1,_s.observers_.size===0&&(_s.isBeingObserved_&&(_s.isBeingObserved_=!1,_s.onBUO()),_s instanceof ComputedValue&&_s.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(ca){var ga=globalState.trackingDerivation;return ga!==null?(ga.runId_!==ca.lastAccessedBy_&&(ca.lastAccessedBy_=ga.runId_,ga.newObserving_[ga.unboundDepsCount_++]=ca,!ca.isBeingObserved_&&globalState.trackingContext&&(ca.isBeingObserved_=!0,ca.onBO())),!0):(ca.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(ca),!1)}function propagateChanged(ca){ca.lowestObserverState_!==IDerivationState_.STALE_&&(ca.lowestObserverState_=IDerivationState_.STALE_,ca.observers_.forEach(function(ga){ga.dependenciesState_===IDerivationState_.UP_TO_DATE_&&ga.onBecomeStale_(),ga.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(ca){ca.lowestObserverState_!==IDerivationState_.STALE_&&(ca.lowestObserverState_=IDerivationState_.STALE_,ca.observers_.forEach(function(ga){ga.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?ga.dependenciesState_=IDerivationState_.STALE_:ga.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(ca.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(ca){ca.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(ca.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,ca.observers_.forEach(function(ga){ga.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(ga.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,ga.onBecomeStale_())}))}var Reaction=function(){function ca(_s,Ss,Ms,Cs){_s===void 0&&(_s="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=_s,this.onInvalidate_=Ss,this.errorHandler_=Ms,this.requiresObservable_=Cs}var ga=ca.prototype;return ga.onBecomeStale_=function(){this.schedule_()},ga.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},ga.isScheduled=function(){return this.isScheduled_},ga.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Ss=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Ms){this.reportExceptionInDerivation_(Ms)}}globalState.trackingContext=Ss,endBatch()}},ga.track=function(Ss){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Ms=globalState.trackingContext;globalState.trackingContext=this;var Cs=trackDerivedFunction(this,Ss,void 0);globalState.trackingContext=Ms,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Cs)&&this.reportExceptionInDerivation_(Cs.cause),endBatch()}},ga.reportExceptionInDerivation_=function(Ss){var Ms=this;if(this.errorHandler_){this.errorHandler_(Ss,this);return}if(globalState.disableErrorBoundaries)throw Ss;var Cs="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Cs,Ss),globalState.globalReactionErrorHandlers.forEach(function(Ts){return Ts(Ss,Ms)})},ga.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},ga.getDisposer_=function(){var Ss=this.dispose.bind(this);return Ss[$mobx]=this,Ss},ga.toString=function(){return"Reaction["+this.name_+"]"},ga.trace=function(Ss){Ss===void 0&&(Ss=!1),trace(this,Ss)},ca}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function ca(ga){return ga()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var ca=globalState.pendingReactions,ga=0;ca.length>0;){++ga===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+ca[0]),ca.splice(0));for(var _s=ca.splice(0),Ss=0,Ms=_s.length;Ss<Ms;Ss++)_s[Ss].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(ca){var ga=reactionScheduler;reactionScheduler=function(Ss){return ca(function(){return ga(Ss)})}}function isSpyEnabled(){return!1}function spyReport(ca){}function spyReportStart(ca){}function spyReportEnd(ca){}function spy(ca){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(ca){var ga=function(Ss,Ms){if(isFunction(Ss))return createAction(Ss.name||DEFAULT_ACTION_NAME,Ss,ca);if(isFunction(Ms))return createAction(Ss,Ms,ca);if(isStringish(Ms))return storeAnnotation(Ss,Ms,ca?autoActionAnnotation:actionAnnotation);if(isStringish(Ss))return createDecoratorAnnotation(createActionAnnotation(ca?AUTOACTION:ACTION,{name:Ss,autoAction:ca}))};return ga}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(ca){return executeAction(ca.name||DEFAULT_ACTION_NAME,!1,ca,this,void 0)}function isAction(ca){return isFunction(ca)&&ca.isMobxAction===!0}function autorun(ca,ga){var _s,Ss;ga===void 0&&(ga=EMPTY_OBJECT);var Ms=(_s=(Ss=ga)==null?void 0:Ss.name)!=null?_s:"Autorun",Cs=!ga.scheduler&&!ga.delay,Ts;if(Cs)Ts=new Reaction(Ms,function(){this.track(Ps)},ga.onError,ga.requiresObservable);else{var Is=createSchedulerFromOptions(ga),Bs=!1;Ts=new Reaction(Ms,function(){Bs||(Bs=!0,Is(function(){Bs=!1,Ts.isDisposed_||Ts.track(Ps)}))},ga.onError,ga.requiresObservable)}function Ps(){ca(Ts)}return Ts.schedule_(),Ts.getDisposer_()}var run=function ca(ga){return ga()};function createSchedulerFromOptions(ca){return ca.scheduler?ca.scheduler:ca.delay?function(ga){return setTimeout(ga,ca.delay)}:run}function reaction(ca,ga,_s){var Ss;_s===void 0&&(_s=EMPTY_OBJECT);var Ms=(Ss=_s.name)!=null?Ss:"Reaction",Cs=action(Ms,_s.onError?wrapErrorHandler(_s.onError,ga):ga),Ts=!_s.scheduler&&!_s.delay,Is=createSchedulerFromOptions(_s),Bs=!0,Ps=!1,Ls,Rs,Os=_s.compareStructural?comparer.structural:_s.equals||comparer.default,Fs=new Reaction(Ms,function(){Bs||Ts?Vs():Ps||(Ps=!0,Is(Vs))},_s.onError,_s.requiresObservable);function Vs(){if(Ps=!1,!Fs.isDisposed_){var ks=!1;Fs.track(function(){var Ns=allowStateChanges(!1,function(){return ca(Fs)});ks=Bs||!Os(Ls,Ns),Rs=Ls,Ls=Ns}),(Bs&&_s.fireImmediately||!Bs&&ks)&&Cs(Ls,Rs,Fs),Bs=!1}}return Fs.schedule_(),Fs.getDisposer_()}function wrapErrorHandler(ca,ga){return function(){try{return ga.apply(this,arguments)}catch(_s){ca.call(this,_s)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(ca,ga,_s){return interceptHook(ON_BECOME_OBSERVED,ca,ga,_s)}function onBecomeUnobserved(ca,ga,_s){return interceptHook(ON_BECOME_UNOBSERVED,ca,ga,_s)}function interceptHook(ca,ga,_s,Ss){var Ms=typeof Ss=="function"?getAtom(ga,_s):getAtom(ga),Cs=isFunction(Ss)?Ss:_s,Ts=ca+"L";return Ms[Ts]?Ms[Ts].add(Cs):Ms[Ts]=new Set([Cs]),function(){var Is=Ms[Ts];Is&&(Is.delete(Cs),Is.size===0&&delete Ms[Ts])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(ca){ca.isolateGlobalState===!0&&isolateGlobalState();var ga=ca.useProxies,_s=ca.enforceActions;if(ga!==void 0&&(globalState.useProxies=ga===ALWAYS?!0:ga===NEVER?!1:typeof Proxy!="undefined"),ga==="ifavailable"&&(globalState.verifyProxies=!0),_s!==void 0){var Ss=_s===ALWAYS?ALWAYS:_s===OBSERVED;globalState.enforceActions=Ss,globalState.allowStateChanges=!(Ss===!0||Ss===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Ms){Ms in ca&&(globalState[Ms]=!!ca[Ms])}),globalState.allowStateReads=!globalState.observableRequiresReaction,ca.reactionScheduler&&setReactionScheduler(ca.reactionScheduler)}function extendObservable(ca,ga,_s,Ss){var Ms=getOwnPropertyDescriptors(ga),Cs=asObservableObject(ca,Ss)[$mobx];startBatch();try{ownKeys(Ms).forEach(function(Ts){Cs.extend_(Ts,Ms[Ts],_s&&Ts in _s?_s[Ts]:!0)})}finally{endBatch()}return ca}function getDependencyTree(ca,ga){return nodeToDependencyTree(getAtom(ca,ga))}function nodeToDependencyTree(ca){var ga={name:ca.name_};return ca.observing_&&ca.observing_.length>0&&(ga.dependencies=unique(ca.observing_).map(nodeToDependencyTree)),ga}function unique(ca){return Array.from(new Set(ca))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function ca(ga,_s){if(isStringish(_s))return storeAnnotation(ga,_s,flowAnnotation);var Ss=ga,Ms=Ss.name||"<unnamed flow>",Cs=function(){var Is=this,Bs=arguments,Ps=++generatorId,Ls=action(Ms+" - runid: "+Ps+" - init",Ss).apply(Is,Bs),Rs,Os=void 0,Fs=new Promise(function(Vs,ks){var Ns=0;Rs=ks;function Ds(Us){Os=void 0;var Hs;try{Hs=action(Ms+" - runid: "+Ps+" - yield "+Ns++,Ls.next).call(Ls,Us)}catch(zs){return ks(zs)}Gs(Hs)}function $s(Us){Os=void 0;var Hs;try{Hs=action(Ms+" - runid: "+Ps+" - yield "+Ns++,Ls.throw).call(Ls,Us)}catch(zs){return ks(zs)}Gs(Hs)}function Gs(Us){if(isFunction(Us==null?void 0:Us.then)){Us.then(Gs,ks);return}return Us.done?Vs(Us.value):(Os=Promise.resolve(Us.value),Os.then(Ds,$s))}Ds(void 0)});return Fs.cancel=action(Ms+" - runid: "+Ps+" - cancel",function(){try{Os&&cancelPromise(Os);var Vs=Ls.return(void 0),ks=Promise.resolve(Vs.value);ks.then(noop,noop),cancelPromise(ks),Rs(new FlowCancellationError)}catch(Ns){Rs(Ns)}}),Fs};return Cs.isMobXFlow=!0,Cs},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(ca){isFunction(ca.cancel)&&ca.cancel()}function isFlow(ca){return(ca==null?void 0:ca.isMobXFlow)===!0}function _isObservable(ca,ga){return ca?ga!==void 0?isObservableObject(ca)?ca[$mobx].values_.has(ga):!1:isObservableObject(ca)||!!ca[$mobx]||isAtom(ca)||isReaction(ca)||isComputedValue(ca):!1}function isObservable(ca){return _isObservable(ca)}function trace(){die("trace() is not available in production builds");for(var ca=!1,ga=arguments.length,_s=new Array(ga),Ss=0;Ss<ga;Ss++)_s[Ss]=arguments[Ss];typeof _s[_s.length-1]=="boolean"&&(ca=_s.pop());var Ms=getAtomFromArgs(_s);if(!Ms)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Ms.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Ms.name_+"' tracing enabled"),Ms.isTracing_=ca?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(ca){switch(ca.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(ca[0]);case 2:return getAtom(ca[0],ca[1])}}function transaction(ca,ga){ga===void 0&&(ga=void 0),startBatch();try{return ca.apply(ga)}finally{endBatch()}}function getAdm(ca){return ca[$mobx]}var objectProxyTraps={has:function ca(ga,_s){return getAdm(ga).has_(_s)},get:function ca(ga,_s){return getAdm(ga).get_(_s)},set:function ca(ga,_s,Ss){var Ms;return isStringish(_s)?(Ms=getAdm(ga).set_(_s,Ss,!0))!=null?Ms:!0:!1},deleteProperty:function ca(ga,_s){var Ss;return isStringish(_s)?(Ss=getAdm(ga).delete_(_s,!0))!=null?Ss:!0:!1},defineProperty:function ca(ga,_s,Ss){var Ms;return(Ms=getAdm(ga).defineProperty_(_s,Ss))!=null?Ms:!0},ownKeys:function ca(ga){return getAdm(ga).ownKeys_()},preventExtensions:function ca(ga){die(13)}};function asDynamicObservableObject(ca,ga){var _s,Ss;return assertProxies(),ca=asObservableObject(ca,ga),(Ss=(_s=ca[$mobx]).proxy_)!=null?Ss:_s.proxy_=new Proxy(ca,objectProxyTraps)}function hasInterceptors(ca){return ca.interceptors_!==void 0&&ca.interceptors_.length>0}function registerInterceptor(ca,ga){var _s=ca.interceptors_||(ca.interceptors_=[]);return _s.push(ga),once(function(){var Ss=_s.indexOf(ga);Ss!==-1&&_s.splice(Ss,1)})}function interceptChange(ca,ga){var _s=untrackedStart();try{for(var Ss=[].concat(ca.interceptors_||[]),Ms=0,Cs=Ss.length;Ms<Cs&&(ga=Ss[Ms](ga),ga&&!ga.type&&die(14),!!ga);Ms++);return ga}finally{untrackedEnd(_s)}}function hasListeners(ca){return ca.changeListeners_!==void 0&&ca.changeListeners_.length>0}function registerListener(ca,ga){var _s=ca.changeListeners_||(ca.changeListeners_=[]);return _s.push(ga),once(function(){var Ss=_s.indexOf(ga);Ss!==-1&&_s.splice(Ss,1)})}function notifyListeners(ca,ga){var _s=untrackedStart(),Ss=ca.changeListeners_;if(!!Ss){Ss=Ss.slice();for(var Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms](ga);untrackedEnd(_s)}}function makeObservable(ca,ga,_s){var Ss=asObservableObject(ca,_s)[$mobx];startBatch();try{var Ms;(Ms=ga)!=null||(ga=collectStoredAnnotations(ca)),ownKeys(ga).forEach(function(Cs){return Ss.make_(Cs,ga[Cs])})}finally{endBatch()}return ca}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function ca(ga,_s){var Ss=ga[$mobx];return _s===$mobx?Ss:_s==="length"?Ss.getArrayLength_():typeof _s=="string"&&!isNaN(_s)?Ss.get_(parseInt(_s)):hasProp(arrayExtensions,_s)?arrayExtensions[_s]:ga[_s]},set:function ca(ga,_s,Ss){var Ms=ga[$mobx];return _s==="length"&&Ms.setArrayLength_(Ss),typeof _s=="symbol"||isNaN(_s)?ga[_s]=Ss:Ms.set_(parseInt(_s),Ss),!0},preventExtensions:function ca(){die(15)}},ObservableArrayAdministration=function(){function ca(_s,Ss,Ms,Cs){_s===void 0&&(_s="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Ms,this.legacyMode_=Cs,this.atom_=new Atom(_s),this.enhancer_=function(Ts,Is){return Ss(Ts,Is,"ObservableArray[..]")}}var ga=ca.prototype;return ga.dehanceValue_=function(Ss){return this.dehancer!==void 0?this.dehancer(Ss):Ss},ga.dehanceValues_=function(Ss){return this.dehancer!==void 0&&Ss.length>0?Ss.map(this.dehancer):Ss},ga.intercept_=function(Ss){return registerInterceptor(this,Ss)},ga.observe_=function(Ss,Ms){return Ms===void 0&&(Ms=!1),Ms&&Ss({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Ss)},ga.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},ga.setArrayLength_=function(Ss){(typeof Ss!="number"||isNaN(Ss)||Ss<0)&&die("Out of range: "+Ss);var Ms=this.values_.length;if(Ss!==Ms)if(Ss>Ms){for(var Cs=new Array(Ss-Ms),Ts=0;Ts<Ss-Ms;Ts++)Cs[Ts]=void 0;this.spliceWithArray_(Ms,0,Cs)}else this.spliceWithArray_(Ss,Ms-Ss)},ga.updateArrayLength_=function(Ss,Ms){Ss!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Ms,this.legacyMode_&&Ms>0&&reserveArrayBuffer(Ss+Ms+1)},ga.spliceWithArray_=function(Ss,Ms,Cs){var Ts=this;this.atom_;var Is=this.values_.length;if(Ss===void 0?Ss=0:Ss>Is?Ss=Is:Ss<0&&(Ss=Math.max(0,Is+Ss)),arguments.length===1?Ms=Is-Ss:Ms==null?Ms=0:Ms=Math.max(0,Math.min(Ms,Is-Ss)),Cs===void 0&&(Cs=EMPTY_ARRAY),hasInterceptors(this)){var Bs=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Ss,removedCount:Ms,added:Cs});if(!Bs)return EMPTY_ARRAY;Ms=Bs.removedCount,Cs=Bs.added}if(Cs=Cs.length===0?Cs:Cs.map(function(Rs){return Ts.enhancer_(Rs,void 0)}),this.legacyMode_){var Ps=Cs.length-Ms;this.updateArrayLength_(Is,Ps)}var Ls=this.spliceItemsIntoValues_(Ss,Ms,Cs);return(Ms!==0||Cs.length!==0)&&this.notifyArraySplice_(Ss,Cs,Ls),this.dehanceValues_(Ls)},ga.spliceItemsIntoValues_=function(Ss,Ms,Cs){if(Cs.length<MAX_SPLICE_SIZE){var Ts;return(Ts=this.values_).splice.apply(Ts,[Ss,Ms].concat(Cs))}else{var Is=this.values_.slice(Ss,Ss+Ms),Bs=this.values_.slice(Ss+Ms);this.values_.length+=Cs.length-Ms;for(var Ps=0;Ps<Cs.length;Ps++)this.values_[Ss+Ps]=Cs[Ps];for(var Ls=0;Ls<Bs.length;Ls++)this.values_[Ss+Cs.length+Ls]=Bs[Ls];return Is}},ga.notifyArrayChildUpdate_=function(Ss,Ms,Cs){var Ts=!this.owned_&&isSpyEnabled(),Is=hasListeners(this),Bs=Is||Ts?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Ss,newValue:Ms,oldValue:Cs}:null;this.atom_.reportChanged(),Is&&notifyListeners(this,Bs)},ga.notifyArraySplice_=function(Ss,Ms,Cs){var Ts=!this.owned_&&isSpyEnabled(),Is=hasListeners(this),Bs=Is||Ts?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Ss,removed:Cs,added:Ms,removedCount:Cs.length,addedCount:Ms.length}:null;this.atom_.reportChanged(),Is&&notifyListeners(this,Bs)},ga.get_=function(Ss){if(Ss<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Ss]);console.warn("[mobx.array] Attempt to read an array index ("+Ss+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},ga.set_=function(Ss,Ms){var Cs=this.values_;if(Ss<Cs.length){this.atom_;var Ts=Cs[Ss];if(hasInterceptors(this)){var Is=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Ss,newValue:Ms});if(!Is)return;Ms=Is.newValue}Ms=this.enhancer_(Ms,Ts);var Bs=Ms!==Ts;Bs&&(Cs[Ss]=Ms,this.notifyArrayChildUpdate_(Ss,Ms,Ts))}else Ss===Cs.length?this.spliceWithArray_(Ss,0,[Ms]):die(17,Ss,Cs.length)},ca}();function createObservableArray(ca,ga,_s,Ss){_s===void 0&&(_s="ObservableArray"),Ss===void 0&&(Ss=!1),assertProxies();var Ms=new ObservableArrayAdministration(_s,ga,Ss,!1);addHiddenFinalProp(Ms.values_,$mobx,Ms);var Cs=new Proxy(Ms.values_,arrayTraps);if(Ms.proxy_=Cs,ca&&ca.length){var Ts=allowStateChangesStart(!0);Ms.spliceWithArray_(0,0,ca),allowStateChangesEnd(Ts)}return Cs}var arrayExtensions={clear:function ca(){return this.splice(0)},replace:function ca(ga){var _s=this[$mobx];return _s.spliceWithArray_(0,_s.values_.length,ga)},toJSON:function ca(){return this.slice()},splice:function ca(ga,_s){for(var Ss=arguments.length,Ms=new Array(Ss>2?Ss-2:0),Cs=2;Cs<Ss;Cs++)Ms[Cs-2]=arguments[Cs];var Ts=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Ts.spliceWithArray_(ga);case 2:return Ts.spliceWithArray_(ga,_s)}return Ts.spliceWithArray_(ga,_s,Ms)},spliceWithArray:function ca(ga,_s,Ss){return this[$mobx].spliceWithArray_(ga,_s,Ss)},push:function ca(){for(var ga=this[$mobx],_s=arguments.length,Ss=new Array(_s),Ms=0;Ms<_s;Ms++)Ss[Ms]=arguments[Ms];return ga.spliceWithArray_(ga.values_.length,0,Ss),ga.values_.length},pop:function ca(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function ca(){return this.splice(0,1)[0]},unshift:function ca(){for(var ga=this[$mobx],_s=arguments.length,Ss=new Array(_s),Ms=0;Ms<_s;Ms++)Ss[Ms]=arguments[Ms];return ga.spliceWithArray_(0,0,Ss),ga.values_.length},reverse:function ca(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function ca(){globalState.trackingDerivation&&die(37,"sort");var ga=this.slice();return ga.sort.apply(ga,arguments),this.replace(ga),this},remove:function ca(ga){var _s=this[$mobx],Ss=_s.dehanceValues_(_s.values_).indexOf(ga);return Ss>-1?(this.splice(Ss,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(ca,ga){typeof Array.prototype[ca]=="function"&&(arrayExtensions[ca]=ga(ca))}function simpleFunc(ca){return function(){var ga=this[$mobx];ga.atom_.reportObserved();var _s=ga.dehanceValues_(ga.values_);return _s[ca].apply(_s,arguments)}}function mapLikeFunc(ca){return function(ga,_s){var Ss=this,Ms=this[$mobx];Ms.atom_.reportObserved();var Cs=Ms.dehanceValues_(Ms.values_);return Cs[ca](function(Ts,Is){return ga.call(_s,Ts,Is,Ss)})}}function reduceLikeFunc(ca){return function(){var ga=this,_s=this[$mobx];_s.atom_.reportObserved();var Ss=_s.dehanceValues_(_s.values_),Ms=arguments[0];return arguments[0]=function(Cs,Ts,Is){return Ms(Cs,Ts,Is,ga)},Ss[ca].apply(Ss,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(ca){return isObject(ca)&&isObservableArrayAdministration(ca[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(ca,ga){function _s(Ms,Cs,Ts){var Is=this;Cs===void 0&&(Cs=deepEnhancer),Ts===void 0&&(Ts="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Cs,this.name_=Ts,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,allowStateChanges(!0,function(){Is.merge(Ms)})}var Ss=_s.prototype;return Ss.has_=function(Cs){return this.data_.has(Cs)},Ss.has=function(Cs){var Ts=this;if(!globalState.trackingDerivation)return this.has_(Cs);var Is=this.hasMap_.get(Cs);if(!Is){var Bs=Is=new ObservableValue(this.has_(Cs),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Cs,Bs),onBecomeUnobserved(Bs,function(){return Ts.hasMap_.delete(Cs)})}return Is.get()},Ss.set=function(Cs,Ts){var Is=this.has_(Cs);if(hasInterceptors(this)){var Bs=interceptChange(this,{type:Is?UPDATE:ADD,object:this,newValue:Ts,name:Cs});if(!Bs)return this;Ts=Bs.newValue}return Is?this.updateValue_(Cs,Ts):this.addValue_(Cs,Ts),this},Ss.delete=function(Cs){var Ts=this;if(this.keysAtom_,hasInterceptors(this)){var Is=interceptChange(this,{type:DELETE,object:this,name:Cs});if(!Is)return!1}if(this.has_(Cs)){var Bs=isSpyEnabled(),Ps=hasListeners(this),Ls=Ps||Bs?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Cs).value_,name:Cs}:null;return transaction(function(){var Rs;Ts.keysAtom_.reportChanged(),(Rs=Ts.hasMap_.get(Cs))==null||Rs.setNewValue_(!1);var Os=Ts.data_.get(Cs);Os.setNewValue_(void 0),Ts.data_.delete(Cs)}),Ps&&notifyListeners(this,Ls),!0}return!1},Ss.updateValue_=function(Cs,Ts){var Is=this.data_.get(Cs);if(Ts=Is.prepareNewValue_(Ts),Ts!==globalState.UNCHANGED){var Bs=isSpyEnabled(),Ps=hasListeners(this),Ls=Ps||Bs?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Is.value_,name:Cs,newValue:Ts}:null;Is.setNewValue_(Ts),Ps&&notifyListeners(this,Ls)}},Ss.addValue_=function(Cs,Ts){var Is=this;this.keysAtom_,transaction(function(){var Rs,Os=new ObservableValue(Ts,Is.enhancer_,"ObservableMap.key",!1);Is.data_.set(Cs,Os),Ts=Os.value_,(Rs=Is.hasMap_.get(Cs))==null||Rs.setNewValue_(!0),Is.keysAtom_.reportChanged()});var Bs=isSpyEnabled(),Ps=hasListeners(this),Ls=Ps||Bs?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Cs,newValue:Ts}:null;Ps&&notifyListeners(this,Ls)},Ss.get=function(Cs){return this.has(Cs)?this.dehanceValue_(this.data_.get(Cs).get()):this.dehanceValue_(void 0)},Ss.dehanceValue_=function(Cs){return this.dehancer!==void 0?this.dehancer(Cs):Cs},Ss.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},Ss.values=function(){var Cs=this,Ts=this.keys();return makeIterable({next:function(){var Bs=Ts.next(),Ps=Bs.done,Ls=Bs.value;return{done:Ps,value:Ps?void 0:Cs.get(Ls)}}})},Ss.entries=function(){var Cs=this,Ts=this.keys();return makeIterable({next:function(){var Bs=Ts.next(),Ps=Bs.done,Ls=Bs.value;return{done:Ps,value:Ps?void 0:[Ls,Cs.get(Ls)]}}})},Ss[ca]=function(){return this.entries()},Ss.forEach=function(Cs,Ts){for(var Is=_createForOfIteratorHelperLoose(this),Bs;!(Bs=Is()).done;){var Ps=Bs.value,Ls=Ps[0],Rs=Ps[1];Cs.call(Ts,Rs,Ls,this)}},Ss.merge=function(Cs){var Ts=this;return isObservableMap(Cs)&&(Cs=new Map(Cs)),transaction(function(){isPlainObject(Cs)?getPlainObjectKeys(Cs).forEach(function(Is){return Ts.set(Is,Cs[Is])}):Array.isArray(Cs)?Cs.forEach(function(Is){var Bs=Is[0],Ps=Is[1];return Ts.set(Bs,Ps)}):isES6Map(Cs)?(Cs.constructor!==Map&&die(19,Cs),Cs.forEach(function(Is,Bs){return Ts.set(Bs,Is)})):Cs!=null&&die(20,Cs)}),this},Ss.clear=function(){var Cs=this;transaction(function(){untracked(function(){for(var Ts=_createForOfIteratorHelperLoose(Cs.keys()),Is;!(Is=Ts()).done;){var Bs=Is.value;Cs.delete(Bs)}})})},Ss.replace=function(Cs){var Ts=this;return transaction(function(){for(var Is=convertToMap(Cs),Bs=new Map,Ps=!1,Ls=_createForOfIteratorHelperLoose(Ts.data_.keys()),Rs;!(Rs=Ls()).done;){var Os=Rs.value;if(!Is.has(Os)){var Fs=Ts.delete(Os);if(Fs)Ps=!0;else{var Vs=Ts.data_.get(Os);Bs.set(Os,Vs)}}}for(var ks=_createForOfIteratorHelperLoose(Is.entries()),Ns;!(Ns=ks()).done;){var Ds=Ns.value,$s=Ds[0],Gs=Ds[1],Us=Ts.data_.has($s);if(Ts.set($s,Gs),Ts.data_.has($s)){var Hs=Ts.data_.get($s);Bs.set($s,Hs),Us||(Ps=!0)}}if(!Ps)if(Ts.data_.size!==Bs.size)Ts.keysAtom_.reportChanged();else for(var zs=Ts.data_.keys(),js=Bs.keys(),Ws=zs.next(),Qs=js.next();!Ws.done;){if(Ws.value!==Qs.value){Ts.keysAtom_.reportChanged();break}Ws=zs.next(),Qs=js.next()}Ts.data_=Bs}),this},Ss.toString=function(){return"[object ObservableMap]"},Ss.toJSON=function(){return Array.from(this)},Ss.observe_=function(Cs,Ts){return registerListener(this,Cs)},Ss.intercept_=function(Cs){return registerInterceptor(this,Cs)},_createClass(_s,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:ga,get:function(){return"Map"}}]),_s}(_Symbol$iterator,_Symbol$toStringTag),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(ca){if(isES6Map(ca)||isObservableMap(ca))return ca;if(Array.isArray(ca))return new Map(ca);if(isPlainObject(ca)){var ga=new Map;for(var _s in ca)ga.set(_s,ca[_s]);return ga}else return die(21,ca)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(ca,ga){function _s(Ms,Cs,Ts){Cs===void 0&&(Cs=deepEnhancer),Ts===void 0&&(Ts="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Ts,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Is,Bs){return Cs(Is,Bs,Ts)},Ms&&this.replace(Ms)}var Ss=_s.prototype;return Ss.dehanceValue_=function(Cs){return this.dehancer!==void 0?this.dehancer(Cs):Cs},Ss.clear=function(){var Cs=this;transaction(function(){untracked(function(){for(var Ts=_createForOfIteratorHelperLoose(Cs.data_.values()),Is;!(Is=Ts()).done;){var Bs=Is.value;Cs.delete(Bs)}})})},Ss.forEach=function(Cs,Ts){for(var Is=_createForOfIteratorHelperLoose(this),Bs;!(Bs=Is()).done;){var Ps=Bs.value;Cs.call(Ts,Ps,Ps,this)}},Ss.add=function(Cs){var Ts=this;if(this.atom_,hasInterceptors(this)){var Is=interceptChange(this,{type:ADD,object:this,newValue:Cs});if(!Is)return this}if(!this.has(Cs)){transaction(function(){Ts.data_.add(Ts.enhancer_(Cs,void 0)),Ts.atom_.reportChanged()});var Bs=!1,Ps=hasListeners(this),Ls=Ps||Bs?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Cs}:null;Ps&&notifyListeners(this,Ls)}return this},Ss.delete=function(Cs){var Ts=this;if(hasInterceptors(this)){var Is=interceptChange(this,{type:DELETE,object:this,oldValue:Cs});if(!Is)return!1}if(this.has(Cs)){var Bs=!1,Ps=hasListeners(this),Ls=Ps||Bs?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Cs}:null;return transaction(function(){Ts.atom_.reportChanged(),Ts.data_.delete(Cs)}),Ps&&notifyListeners(this,Ls),!0}return!1},Ss.has=function(Cs){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Cs))},Ss.entries=function(){var Cs=0,Ts=Array.from(this.keys()),Is=Array.from(this.values());return makeIterable({next:function(){var Ps=Cs;return Cs+=1,Ps<Is.length?{value:[Ts[Ps],Is[Ps]],done:!1}:{done:!0}}})},Ss.keys=function(){return this.values()},Ss.values=function(){this.atom_.reportObserved();var Cs=this,Ts=0,Is=Array.from(this.data_.values());return makeIterable({next:function(){return Ts<Is.length?{value:Cs.dehanceValue_(Is[Ts++]),done:!1}:{done:!0}}})},Ss.replace=function(Cs){var Ts=this;return isObservableSet(Cs)&&(Cs=new Set(Cs)),transaction(function(){Array.isArray(Cs)?(Ts.clear(),Cs.forEach(function(Is){return Ts.add(Is)})):isES6Set(Cs)?(Ts.clear(),Cs.forEach(function(Is){return Ts.add(Is)})):Cs!=null&&die("Cannot initialize set from "+Cs)}),this},Ss.observe_=function(Cs,Ts){return registerListener(this,Cs)},Ss.intercept_=function(Cs){return registerInterceptor(this,Cs)},Ss.toJSON=function(){return Array.from(this)},Ss.toString=function(){return"[object ObservableSet]"},Ss[ca]=function(){return this.values()},_createClass(_s,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:ga,get:function(){return"Set"}}]),_s}(_Symbol$iterator$1,_Symbol$toStringTag$1),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function ca(_s,Ss,Ms,Cs){Ss===void 0&&(Ss=new Map),Cs===void 0&&(Cs=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=_s,this.values_=Ss,this.name_=Ms,this.defaultAnnotation_=Cs,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var ga=ca.prototype;return ga.getObservablePropValue_=function(Ss){return this.values_.get(Ss).get()},ga.setObservablePropValue_=function(Ss,Ms){var Cs=this.values_.get(Ss);if(Cs instanceof ComputedValue)return Cs.set(Ms),!0;if(hasInterceptors(this)){var Ts=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Ss,newValue:Ms});if(!Ts)return null;Ms=Ts.newValue}if(Ms=Cs.prepareNewValue_(Ms),Ms!==globalState.UNCHANGED){var Is=hasListeners(this),Bs=!1,Ps=Is||Bs?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Cs.value_,name:Ss,newValue:Ms}:null;Cs.setNewValue_(Ms),Is&&notifyListeners(this,Ps)}return!0},ga.get_=function(Ss){return globalState.trackingDerivation&&!hasProp(this.target_,Ss)&&this.has_(Ss),this.target_[Ss]},ga.set_=function(Ss,Ms,Cs){return Cs===void 0&&(Cs=!1),hasProp(this.target_,Ss)?this.values_.has(Ss)?this.setObservablePropValue_(Ss,Ms):Cs?Reflect.set(this.target_,Ss,Ms):(this.target_[Ss]=Ms,!0):this.extend_(Ss,{value:Ms,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Cs)},ga.has_=function(Ss){if(!globalState.trackingDerivation)return Ss in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Ms=this.pendingKeys_.get(Ss);return Ms||(Ms=new ObservableValue(Ss in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Ss,Ms)),Ms.get()},ga.make_=function(Ss,Ms){if(Ms===!0&&(Ms=this.defaultAnnotation_),Ms!==!1){if(!(Ss in this.target_)){var Cs;if((Cs=this.target_[storedAnnotationsSymbol])!=null&&Cs[Ss])return;die(1,Ms.annotationType_,this.name_+"."+Ss.toString())}for(var Ts=this.target_;Ts&&Ts!==objectPrototype;){var Is=getDescriptor(Ts,Ss);if(Is){var Bs=Ms.make_(this,Ss,Is,Ts);if(Bs===0)return;if(Bs===1)break}Ts=Object.getPrototypeOf(Ts)}recordAnnotationApplied(this,Ms,Ss)}},ga.extend_=function(Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=!1),Cs===!0&&(Cs=this.defaultAnnotation_),Cs===!1)return this.defineProperty_(Ss,Ms,Ts);var Is=Cs.extend_(this,Ss,Ms,Ts);return Is&&recordAnnotationApplied(this,Cs,Ss),Is},ga.defineProperty_=function(Ss,Ms,Cs){Cs===void 0&&(Cs=!1);try{startBatch();var Ts=this.delete_(Ss);if(!Ts)return Ts;if(hasInterceptors(this)){var Is=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:ADD,newValue:Ms.value});if(!Is)return null;var Bs=Is.newValue;Ms.value!==Bs&&(Ms=_extends({},Ms,{value:Bs}))}if(Cs){if(!Reflect.defineProperty(this.target_,Ss,Ms))return!1}else defineProperty(this.target_,Ss,Ms);this.notifyPropertyAddition_(Ss,Ms.value)}finally{endBatch()}return!0},ga.defineObservableProperty_=function(Ss,Ms,Cs,Ts){Ts===void 0&&(Ts=!1);try{startBatch();var Is=this.delete_(Ss);if(!Is)return Is;if(hasInterceptors(this)){var Bs=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:ADD,newValue:Ms});if(!Bs)return null;Ms=Bs.newValue}var Ps=getCachedObservablePropDescriptor(Ss),Ls={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Ps.get,set:Ps.set};if(Ts){if(!Reflect.defineProperty(this.target_,Ss,Ls))return!1}else defineProperty(this.target_,Ss,Ls);var Rs=new ObservableValue(Ms,Cs,"ObservableObject.key",!1);this.values_.set(Ss,Rs),this.notifyPropertyAddition_(Ss,Rs.value_)}finally{endBatch()}return!0},ga.defineComputedProperty_=function(Ss,Ms,Cs){Cs===void 0&&(Cs=!1);try{startBatch();var Ts=this.delete_(Ss);if(!Ts)return Ts;if(hasInterceptors(this)){var Is=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:ADD,newValue:void 0});if(!Is)return null}Ms.name||(Ms.name="ObservableObject.key"),Ms.context=this.proxy_||this.target_;var Bs=getCachedObservablePropDescriptor(Ss),Ps={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Bs.get,set:Bs.set};if(Cs){if(!Reflect.defineProperty(this.target_,Ss,Ps))return!1}else defineProperty(this.target_,Ss,Ps);this.values_.set(Ss,new ComputedValue(Ms)),this.notifyPropertyAddition_(Ss,void 0)}finally{endBatch()}return!0},ga.delete_=function(Ss,Ms){if(Ms===void 0&&(Ms=!1),!hasProp(this.target_,Ss))return!0;if(hasInterceptors(this)){var Cs=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:REMOVE});if(!Cs)return null}try{var Ts,Is;startBatch();var Bs=hasListeners(this),Ps=!1,Ls=this.values_.get(Ss),Rs=void 0;if(!Ls&&(Bs||Ps)){var Os;Rs=(Os=getDescriptor(this.target_,Ss))==null?void 0:Os.value}if(Ms){if(!Reflect.deleteProperty(this.target_,Ss))return!1}else delete this.target_[Ss];if(Ls&&(this.values_.delete(Ss),Ls instanceof ObservableValue&&(Rs=Ls.value_),propagateChanged(Ls)),this.keysAtom_.reportChanged(),(Ts=this.pendingKeys_)==null||(Is=Ts.get(Ss))==null||Is.set(Ss in this.target_),Bs||Ps){var Fs={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Rs,name:Ss};Bs&&notifyListeners(this,Fs)}}finally{endBatch()}return!0},ga.observe_=function(Ss,Ms){return registerListener(this,Ss)},ga.intercept_=function(Ss){return registerInterceptor(this,Ss)},ga.notifyPropertyAddition_=function(Ss,Ms){var Cs,Ts,Is=hasListeners(this),Bs=!1;if(Is||Bs){var Ps=Is||Bs?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Ss,newValue:Ms}:null;Is&&notifyListeners(this,Ps)}(Cs=this.pendingKeys_)==null||(Ts=Cs.get(Ss))==null||Ts.set(!0),this.keysAtom_.reportChanged()},ga.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},ga.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},ca}();function asObservableObject(ca,ga){var _s;if(hasProp(ca,$mobx))return ca;var Ss=(_s=ga==null?void 0:ga.name)!=null?_s:"ObservableObject",Ms=new ObservableObjectAdministration(ca,new Map,String(Ss),getAnnotationFromOptions(ga));return addHiddenProp(ca,$mobx,Ms),ca}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(ca){return descriptorCache[ca]||(descriptorCache[ca]={get:function(){return this[$mobx].getObservablePropValue_(ca)},set:function(_s){return this[$mobx].setObservablePropValue_(ca,_s)}})}function isObservableObject(ca){return isObject(ca)?isObservableObjectAdministration(ca[$mobx]):!1}function recordAnnotationApplied(ca,ga,_s){var Ss;(Ss=ca.target_[storedAnnotationsSymbol])==null||delete Ss[_s]}var OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function ca(){};function inherit(ca,ga){Object.setPrototypeOf?Object.setPrototypeOf(ca.prototype,ga):ca.prototype.__proto__!==void 0?ca.prototype.__proto__=ga:ca.prototype=ga}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(ca,ga,_s){_inheritsLoose(Ss,ca);function Ss(Cs,Ts,Is,Bs){var Ps;Is===void 0&&(Is="ObservableArray"),Bs===void 0&&(Bs=!1),Ps=ca.call(this)||this;var Ls=new ObservableArrayAdministration(Is,Ts,Bs,!0);if(Ls.proxy_=_assertThisInitialized(Ps),addHiddenFinalProp(_assertThisInitialized(Ps),$mobx,Ls),Cs&&Cs.length){var Rs=allowStateChangesStart(!0);Ps.spliceWithArray(0,0,Cs),allowStateChangesEnd(Rs)}return Ps}var Ms=Ss.prototype;return Ms.concat=function(){this[$mobx].atom_.reportObserved();for(var Ts=arguments.length,Is=new Array(Ts),Bs=0;Bs<Ts;Bs++)Is[Bs]=arguments[Bs];return Array.prototype.concat.apply(this.slice(),Is.map(function(Ps){return isObservableArray(Ps)?Ps.slice():Ps}))},Ms[_s]=function(){var Cs=this,Ts=0;return makeIterable({next:function(){return Ts<Cs.length?{value:Cs[Ts++],done:!1}:{done:!0,value:void 0}}})},_createClass(Ss,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Ts){this[$mobx].setArrayLength_(Ts)}},{key:ga,get:function(){return"Array"}}]),Ss}(StubArray,Symbol.toStringTag,Symbol.iterator);Object.entries(arrayExtensions).forEach(function(ca){var ga=ca[0],_s=ca[1];ga!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,ga,_s)});function createArrayEntryDescriptor(ca){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(ca)},set:function(_s){this[$mobx].set_(ca,_s)}}}function createArrayBufferItem(ca){defineProperty(LegacyObservableArray.prototype,""+ca,createArrayEntryDescriptor(ca))}function reserveArrayBuffer(ca){if(ca>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var ga=OBSERVABLE_ARRAY_BUFFER_SIZE;ga<ca+100;ga++)createArrayBufferItem(ga);OBSERVABLE_ARRAY_BUFFER_SIZE=ca}}reserveArrayBuffer(1e3);function createLegacyArray(ca,ga,_s){return new LegacyObservableArray(ca,ga,_s)}function getAtom(ca,ga){if(typeof ca=="object"&&ca!==null){if(isObservableArray(ca))return ga!==void 0&&die(23),ca[$mobx].atom_;if(isObservableSet(ca))return ca[$mobx];if(isObservableMap(ca)){if(ga===void 0)return ca.keysAtom_;var _s=ca.data_.get(ga)||ca.hasMap_.get(ga);return _s||die(25,ga,getDebugName(ca)),_s}if(isObservableObject(ca)){if(!ga)return die(26);var Ss=ca[$mobx].values_.get(ga);return Ss||die(27,ga,getDebugName(ca)),Ss}if(isAtom(ca)||isComputedValue(ca)||isReaction(ca))return ca}else if(isFunction(ca)&&isReaction(ca[$mobx]))return ca[$mobx];die(28)}function getAdministration(ca,ga){if(ca||die(29),ga!==void 0)return getAdministration(getAtom(ca,ga));if(isAtom(ca)||isComputedValue(ca)||isReaction(ca)||isObservableMap(ca)||isObservableSet(ca))return ca;if(ca[$mobx])return ca[$mobx];die(24,ca)}function getDebugName(ca,ga){var _s;if(ga!==void 0)_s=getAtom(ca,ga);else{if(isAction(ca))return ca.name;isObservableObject(ca)||isObservableMap(ca)||isObservableSet(ca)?_s=getAdministration(ca):_s=getAtom(ca)}return _s.name_}var toString=objectPrototype.toString;function deepEqual(ca,ga,_s){return _s===void 0&&(_s=-1),eq(ca,ga,_s)}function eq(ca,ga,_s,Ss,Ms){if(ca===ga)return ca!==0||1/ca===1/ga;if(ca==null||ga==null)return!1;if(ca!==ca)return ga!==ga;var Cs=typeof ca;if(Cs!=="function"&&Cs!=="object"&&typeof ga!="object")return!1;var Ts=toString.call(ca);if(Ts!==toString.call(ga))return!1;switch(Ts){case"[object RegExp]":case"[object String]":return""+ca==""+ga;case"[object Number]":return+ca!=+ca?+ga!=+ga:+ca==0?1/+ca===1/ga:+ca==+ga;case"[object Date]":case"[object Boolean]":return+ca==+ga;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(ca)===Symbol.valueOf.call(ga);case"[object Map]":case"[object Set]":_s>=0&&_s++;break}ca=unwrap(ca),ga=unwrap(ga);var Is=Ts==="[object Array]";if(!Is){if(typeof ca!="object"||typeof ga!="object")return!1;var Bs=ca.constructor,Ps=ga.constructor;if(Bs!==Ps&&!(isFunction(Bs)&&Bs instanceof Bs&&isFunction(Ps)&&Ps instanceof Ps)&&"constructor"in ca&&"constructor"in ga)return!1}if(_s===0)return!1;_s<0&&(_s=-1),Ss=Ss||[],Ms=Ms||[];for(var Ls=Ss.length;Ls--;)if(Ss[Ls]===ca)return Ms[Ls]===ga;if(Ss.push(ca),Ms.push(ga),Is){if(Ls=ca.length,Ls!==ga.length)return!1;for(;Ls--;)if(!eq(ca[Ls],ga[Ls],_s-1,Ss,Ms))return!1}else{var Rs=Object.keys(ca),Os;if(Ls=Rs.length,Object.keys(ga).length!==Ls)return!1;for(;Ls--;)if(Os=Rs[Ls],!(hasProp(ga,Os)&&eq(ca[Os],ga[Os],_s-1,Ss,Ms)))return!1}return Ss.pop(),Ms.pop(),!0}function unwrap(ca){return isObservableArray(ca)?ca.slice():isES6Map(ca)||isObservableMap(ca)||isES6Set(ca)||isObservableSet(ca)?Array.from(ca.entries()):ca}function makeIterable(ca){return ca[Symbol.iterator]=getSelf,ca}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(ca){var ga=getGlobal();typeof ga[ca]=="undefined"&&die("MobX requires global '"+ca+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(ca){ca()}function observerBatching(ca){ca||(ca=defaultNoopBatch),configure({reactionScheduler:ca})}function printDebugValue(ca){return getDependencyTree(ca)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(ca){var ga={reaction:ca,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return ga}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(ca){var ga=new Map,_s=1,Ss=new ca(function(Cs){var Ts=ga.get(Cs);Ts&&(Ts.reaction.dispose(),ga.delete(Cs))});return{addReactionToTrack:function(Ms,Cs,Ts){var Is=_s++;return Ss.register(Ts,Is,Ms),Ms.current=createTrackingData(Cs),Ms.current.finalizationRegistryCleanupToken=Is,ga.set(Is,Ms.current),Ms.current},recordReactionAsCommitted:function(Ms){Ss.unregister(Ms),Ms.current&&Ms.current.finalizationRegistryCleanupToken&&ga.delete(Ms.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(ca){var ga=typeof Symbol=="function"&&Symbol.iterator,_s=ga&&ca[ga],Ss=0;if(_s)return _s.call(ca);if(ca&&typeof ca.length=="number")return{next:function(){return ca&&Ss>=ca.length&&(ca=void 0),{value:ca&&ca[Ss++],done:!ca}}};throw new TypeError(ga?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var ca=new Set,ga;function _s(){ga&&(clearTimeout(ga),Is())}function Ss(){var Bs,Ps;if(ca.size>0){try{for(var Ls=__values(ca),Rs=Ls.next();!Rs.done;Rs=Ls.next()){var Os=Rs.value,Fs=Os.current;Fs&&(Fs.reaction.dispose(),Os.current=null)}}catch(Vs){Bs={error:Vs}}finally{try{Rs&&!Rs.done&&(Ps=Ls.return)&&Ps.call(Ls)}finally{if(Bs)throw Bs.error}}ca.clear()}ga&&(clearTimeout(ga),ga=void 0)}function Ms(){ga===void 0&&(ga=setTimeout(Is,CLEANUP_TIMER_LOOP_MILLIS))}function Cs(Bs){ca.add(Bs),Ms()}function Ts(Bs){ca.delete(Bs)}function Is(){ga=void 0;var Bs=Date.now();ca.forEach(function(Ps){var Ls=Ps.current;Ls&&Bs>=Ls.cleanAt&&(Ls.reaction.dispose(),Ps.current=null,ca.delete(Ps))}),ca.size>0&&Ms()}return{addReactionToTrack:function(Bs,Ps,Ls){return Bs.current=createTrackingData(Ps),Cs(Bs),Bs.current},recordReactionAsCommitted:Ts,forceCleanupTimerToRunNowForTests:_s,resetCleanupScheduleForTests:Ss}}var _a=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a.addReactionToTrack,recordReactionAsCommitted=_a.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(ca,ga){var _s=typeof Symbol=="function"&&ca[Symbol.iterator];if(!_s)return ca;var Ss=_s.call(ca),Ms,Cs=[],Ts;try{for(;(ga===void 0||ga-- >0)&&!(Ms=Ss.next()).done;)Cs.push(Ms.value)}catch(Is){Ts={error:Is}}finally{try{Ms&&!Ms.done&&(_s=Ss.return)&&_s.call(Ss)}finally{if(Ts)throw Ts.error}}return Cs};function observerComponentNameFor(ca){return"observer".concat(ca)}var ObjectToBeRetainedByReact=function(){function ca(){}return ca}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(ca,ga){ga===void 0&&(ga="observed");var _s=__read(React.useState(objectToBeRetainedByReactFactory),1),Ss=_s[0],Ms=__read(React.useState(),2),Cs=Ms[1],Ts=function(){return Cs([])},Is=React.useRef(null);if(!Is.current)var Bs=new Reaction(observerComponentNameFor(ga),function(){Ps.mounted?Ts():Ps.changedBeforeMount=!0}),Ps=addReactionToTrack(Is,Bs,Ss);var Ls=Is.current.reaction;React.useDebugValue(Ls,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Is),Is.current?(Is.current.mounted=!0,Is.current.changedBeforeMount&&(Is.current.changedBeforeMount=!1,Ts())):(Is.current={reaction:new Reaction(observerComponentNameFor(ga),function(){Ts()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Ts()),function(){Is.current.reaction.dispose(),Is.current=null}},[]);var Rs,Os;if(Ls.track(function(){try{Rs=ca()}catch(Fs){Os=Fs}}),Os)throw Os;return Rs}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(ca){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(ca){return null}).$$typeof;function observer$1(ca,ga){var _s;if(ReactMemoSymbol&&ca.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Ss=(_s=ga==null?void 0:ga.forwardRef)!==null&&_s!==void 0?_s:!1,Ms=ca,Cs=ca.displayName||ca.name;if(ReactForwardRefSymbol&&ca.$$typeof===ReactForwardRefSymbol&&(Ss=!0,Ms=ca.render,typeof Ms!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Ts=function(Is,Bs){return useObserver(function(){return Ms(Is,Bs)},Cs)};return Cs!==""&&(Ts.displayName=Cs),ca.contextTypes&&(Ts.contextTypes=ca.contextTypes),Ss&&(Ts=react$1.exports.forwardRef(Ts)),Ts=react$1.exports.memo(Ts),copyStaticProperties(ca,Ts),Ts}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(ca,ga){Object.keys(ca).forEach(function(_s){hoistBlackList[_s]||Object.defineProperty(ga,_s,Object.getOwnPropertyDescriptor(ca,_s))})}globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol(ca){if(typeof Symbol=="function")return Symbol(ca);var ga="__$mobx-react "+ca+" ("+symbolId+")";return symbolId++,ga}var createdSymbols={};function newSymbol(ca){return createdSymbols[ca]||(createdSymbols[ca]=createSymbol(ca)),createdSymbols[ca]}function shallowEqual(ca,ga){if(is(ca,ga))return!0;if(typeof ca!="object"||ca===null||typeof ga!="object"||ga===null)return!1;var _s=Object.keys(ca),Ss=Object.keys(ga);if(_s.length!==Ss.length)return!1;for(var Ms=0;Ms<_s.length;Ms++)if(!Object.hasOwnProperty.call(ga,_s[Ms])||!is(ca[_s[Ms]],ga[_s[Ms]]))return!1;return!0}function is(ca,ga){return ca===ga?ca!==0||1/ca===1/ga:ca!==ca&&ga!==ga}function setHiddenProp(ca,ga,_s){Object.hasOwnProperty.call(ca,ga)?ca[ga]=_s:Object.defineProperty(ca,ga,{enumerable:!1,configurable:!0,writable:!0,value:_s})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(ca,ga){var _s=ca[mobxMixins]=ca[mobxMixins]||{},Ss=_s[ga]=_s[ga]||{};return Ss.locks=Ss.locks||0,Ss.methods=Ss.methods||[],Ss}function wrapper(ca,ga){for(var _s=this,Ss=arguments.length,Ms=new Array(Ss>2?Ss-2:0),Cs=2;Cs<Ss;Cs++)Ms[Cs-2]=arguments[Cs];ga.locks++;try{var Ts;return ca!=null&&(Ts=ca.apply(this,Ms)),Ts}finally{ga.locks--,ga.locks===0&&ga.methods.forEach(function(Is){Is.apply(_s,Ms)})}}function wrapFunction(ca,ga){var _s=function(){for(var Ms=arguments.length,Cs=new Array(Ms),Ts=0;Ts<Ms;Ts++)Cs[Ts]=arguments[Ts];wrapper.call.apply(wrapper,[this,ca,ga].concat(Cs))};return _s}function patch(ca,ga,_s){var Ss=getMixins(ca,ga);Ss.methods.indexOf(_s)<0&&Ss.methods.push(_s);var Ms=Object.getOwnPropertyDescriptor(ca,ga);if(!(Ms&&Ms[mobxPatchedDefinition])){var Cs=ca[ga],Ts=createDefinition(ca,ga,Ms?Ms.enumerable:void 0,Ss,Cs);Object.defineProperty(ca,ga,Ts)}}function createDefinition(ca,ga,_s,Ss,Ms){var Cs,Ts=wrapFunction(Ms,Ss);return Cs={},Cs[mobxPatchedDefinition]=!0,Cs.get=function(){return Ts},Cs.set=function(Bs){if(this===ca)Ts=wrapFunction(Bs,Ss);else{var Ps=createDefinition(this,ga,_s,Ss,Bs);Object.defineProperty(this,ga,Ps)}},Cs.configurable=!0,Cs.enumerable=_s,Cs}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(ca){var ga=ca.prototype;if(ca[mobxObserverProperty]){var _s=getDisplayName(ga);console.warn("The provided component class ("+_s+`) 
                has already been declared as an observer component.`)}else ca[mobxObserverProperty]=!0;if(ga.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(ca.__proto__!==react$1.exports.PureComponent){if(!ga.shouldComponentUpdate)ga.shouldComponentUpdate=observerSCU;else if(ga.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp(ga,"props"),makeObservableProp(ga,"state");var Ss=ga.render;if(typeof Ss!="function"){var Ms=getDisplayName(ga);throw new Error("[mobx-react] class component ("+Ms+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return ga.render=function(){return makeComponentReactive.call(this,Ss)},patch(ga,"componentWillUnmount",function(){var Cs;if((Cs=this.render[mobxAdminProperty])==null||Cs.dispose(),this[mobxIsUnmounted]=!0,!this.render[mobxAdminProperty]){var Ts=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Ts+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),ca}function getDisplayName(ca){return ca.displayName||ca.name||ca.constructor&&(ca.constructor.displayName||ca.constructor.name)||"<component>"}function makeComponentReactive(ca){var ga=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var _s=getDisplayName(this),Ss=ca.bind(this),Ms=!1,Cs=new Reaction(_s+".render()",function(){if(!Ms&&(Ms=!0,ga[mobxIsUnmounted]!==!0)){var Is=!0;try{setHiddenProp(ga,isForcingUpdateKey,!0),ga[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call(ga),Is=!1}finally{setHiddenProp(ga,isForcingUpdateKey,!1),Is&&Cs.dispose()}}});Cs.reactComponent=this,Ts[mobxAdminProperty]=Cs,this.render=Ts;function Ts(){Ms=!1;var Is=void 0,Bs=void 0;if(Cs.track(function(){try{Bs=allowStateChanges(!1,Ss)}catch(Ps){Is=Ps}}),Is)throw Is;return Bs}return Ts.call(this)}function observerSCU(ca,ga){return this.state!==ga?!0:!shallowEqual(this.props,ca)}function makeObservableProp(ca,ga){var _s=newSymbol("reactProp_"+ga+"_valueHolder"),Ss=newSymbol("reactProp_"+ga+"_atomHolder");function Ms(){return this[Ss]||setHiddenProp(this,Ss,createAtom("reactive "+ga)),this[Ss]}Object.defineProperty(ca,ga,{configurable:!0,enumerable:!0,get:function(){var Ts=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Ts=allowStateReadsStart(!0)),Ms.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Ts),this[_s]},set:function(Ts){!this[isForcingUpdateKey]&&!shallowEqual(this[_s],Ts)?(setHiddenProp(this,_s,Ts),setHiddenProp(this,skipRenderKey,!0),Ms.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,_s,Ts)}})}function observer(ca){return ca.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react$1.exports.Component,ca)||Object.prototype.isPrototypeOf.call(react$1.exports.PureComponent,ca)?makeClassComponentObserver(ca):observer$1(ca)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame=window.requestAnimationFrame||(ca=>setTimeout(ca,16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function nextFrame(ca,ga=0){ga<=0?_requestAnimationFrame(ca):_requestAnimationFrame(()=>nextFrame(ca,ga-1))}function requestAnimationFrameInterval(ca,ga=60){let _s=-1,Ss=0,Ms=-1;const Cs=1e3/ga;function Ts(Is){Ms===-1&&(Ms=Is),_s=_requestAnimationFrame(Ts),!(Is-Ss<Cs)&&(Ss=Is,ca&&ca(Is-Ms))}return _s=_requestAnimationFrame(Ts),function(){_cancelAnimationFrame(_s)}}class Controller extends Subscribe{constructor(){super();il(this,"$five");il(this,"configs");il(this,"videoAgentScene");il(this,"vreoUnit");il(this,"stopInterval");il(this,"playing",!1);il(this,"ended",!1);il(this,"visible",!1);il(this,"popUp",null);il(this,"drawerConfig",null);makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,setEnded:action}),reaction(()=>this.ended,_s=>{_s&&this.emit("paused",!0)}),reaction(()=>this.playing,_s=>{this.ended||this.emit(_s?"playing":"paused")})}get isAudio(){var _s,Ss;return!((Ss=(_s=this.videoAgentScene)==null?void 0:_s.videoAgentMesh.videoUrl)!=null&&Ss.endsWith(".mp4"))}openPopUp(_s){if(!_s){this.popUp=null;return}this.popUp=_s}setVisible(_s){this.visible=_s}setPlaying(_s){this.playing=_s}setEnded(_s){this.ended=_s}openDrawer(_s){var Ss;if(!_s){this.drawerConfig={content:"",height:(Ss=this.drawerConfig)==null?void 0:Ss.height};return}this.drawerConfig=_s}get ready(){return!!this.videoAgentScene}get currentTime(){var _s;return((_s=this.videoAgentScene)==null?void 0:_s.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Ss=>{if(Ss.parsed)return!1;const Ms=this.currentTime-Ss.start;return Ms<=100&&Ms>=0}):[]}get videoInstance(){var _s;return(_s=this.videoAgentScene)==null?void 0:_s.videoAgentMesh.videoInstance}requestAnimationFrameLoop(_s){var Ms,Cs,Ts,Is;if((Ms=this.videoInstance)!=null&&Ms.ended){this.setEnded(!0),this.setPlaying(!1),this.videoInstance.pause();return}if(!this.playing){(Cs=this.videoInstance)!=null&&Cs.paused||(Ts=this.videoInstance)==null||Ts.pause();return}((Is=this.videoInstance)==null?void 0:Is.paused)&&this.playing&&this.videoInstance.play(),this.currentKeyframes.forEach(Bs=>{Bs.parsed||(Bs.parsed=!0,this.emit(Bs.type,Bs),_s&&_s(Bs.type,Bs))})}run(_s){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop(_s)))}dispose(){this.setPlaying(!1),this.currentKeyframes&&this.currentKeyframes.forEach(_s=>_s.parsed=!1),this.vreoUnit=void 0,this.videoInstance&&(this.videoInstance.currentTime=0),this.stopInterval&&(this.stopInterval(),this.stopInterval=void 0)}}const ControllerContext=react$1.exports.createContext(null);function useController(){const ca=React.useContext(ControllerContext);if(!ca)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return ca}function useFiveInstance(){const ca=useController();if(!ca.$five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return ca.$five}function useFiveProject2d(){const ca=useFiveInstance();return ga=>ca.project2d(ga,!1)}var CameraMovementEffect=(ca=>(ca.Move="Move",ca.Rotate="Rotate",ca))(CameraMovementEffect||{}),Rotation=(ca=>(ca.Clockwise="Clockwise",ca.Anticlockwise="Anticlockwise",ca.Loop="Loop",ca))(Rotation||{}),Easing$1={Linear:{None:function(ca){return ca}},Quadratic:{In:function(ca){return ca*ca},Out:function(ca){return ca*(2-ca)},InOut:function(ca){return(ca*=2)<1?.5*ca*ca:-.5*(--ca*(ca-2)-1)}},Cubic:{In:function(ca){return ca*ca*ca},Out:function(ca){return--ca*ca*ca+1},InOut:function(ca){return(ca*=2)<1?.5*ca*ca*ca:.5*((ca-=2)*ca*ca+2)}},Quartic:{In:function(ca){return ca*ca*ca*ca},Out:function(ca){return 1- --ca*ca*ca*ca},InOut:function(ca){return(ca*=2)<1?.5*ca*ca*ca*ca:-.5*((ca-=2)*ca*ca*ca-2)}},Quintic:{In:function(ca){return ca*ca*ca*ca*ca},Out:function(ca){return--ca*ca*ca*ca*ca+1},InOut:function(ca){return(ca*=2)<1?.5*ca*ca*ca*ca*ca:.5*((ca-=2)*ca*ca*ca*ca+2)}},Sinusoidal:{In:function(ca){return 1-Math.cos(ca*Math.PI/2)},Out:function(ca){return Math.sin(ca*Math.PI/2)},InOut:function(ca){return .5*(1-Math.cos(Math.PI*ca))}},Exponential:{In:function(ca){return ca===0?0:Math.pow(1024,ca-1)},Out:function(ca){return ca===1?1:1-Math.pow(2,-10*ca)},InOut:function(ca){return ca===0?0:ca===1?1:(ca*=2)<1?.5*Math.pow(1024,ca-1):.5*(-Math.pow(2,-10*(ca-1))+2)}},Circular:{In:function(ca){return 1-Math.sqrt(1-ca*ca)},Out:function(ca){return Math.sqrt(1- --ca*ca)},InOut:function(ca){return(ca*=2)<1?-.5*(Math.sqrt(1-ca*ca)-1):.5*(Math.sqrt(1-(ca-=2)*ca)+1)}},Elastic:{In:function(ca){return ca===0?0:ca===1?1:-Math.pow(2,10*(ca-1))*Math.sin((ca-1.1)*5*Math.PI)},Out:function(ca){return ca===0?0:ca===1?1:Math.pow(2,-10*ca)*Math.sin((ca-.1)*5*Math.PI)+1},InOut:function(ca){return ca===0?0:ca===1?1:(ca*=2,ca<1?-.5*Math.pow(2,10*(ca-1))*Math.sin((ca-1.1)*5*Math.PI):.5*Math.pow(2,-10*(ca-1))*Math.sin((ca-1.1)*5*Math.PI)+1)}},Back:{In:function(ca){var ga=1.70158;return ca*ca*((ga+1)*ca-ga)},Out:function(ca){var ga=1.70158;return--ca*ca*((ga+1)*ca+ga)+1},InOut:function(ca){var ga=2.5949095;return(ca*=2)<1?.5*(ca*ca*((ga+1)*ca-ga)):.5*((ca-=2)*ca*((ga+1)*ca+ga)+2)}},Bounce:{In:function(ca){return 1-Easing$1.Bounce.Out(1-ca)},Out:function(ca){return ca<1/2.75?7.5625*ca*ca:ca<2/2.75?7.5625*(ca-=1.5/2.75)*ca+.75:ca<2.5/2.75?7.5625*(ca-=2.25/2.75)*ca+.9375:7.5625*(ca-=2.625/2.75)*ca+.984375},InOut:function(ca){return ca<.5?Easing$1.Bounce.In(ca*2)*.5:Easing$1.Bounce.Out(ca*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var ca=process.hrtime();return ca[0]*1e3+ca[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function ca(){this._tweens={},this._tweensAddedDuringUpdate={}}return ca.prototype.getAll=function(){var ga=this;return Object.keys(this._tweens).map(function(_s){return ga._tweens[_s]})},ca.prototype.removeAll=function(){this._tweens={}},ca.prototype.add=function(ga){this._tweens[ga.getId()]=ga,this._tweensAddedDuringUpdate[ga.getId()]=ga},ca.prototype.remove=function(ga){delete this._tweens[ga.getId()],delete this._tweensAddedDuringUpdate[ga.getId()]},ca.prototype.update=function(ga,_s){ga===void 0&&(ga=now$1()),_s===void 0&&(_s=!1);var Ss=Object.keys(this._tweens);if(Ss.length===0)return!1;for(;Ss.length>0;){this._tweensAddedDuringUpdate={};for(var Ms=0;Ms<Ss.length;Ms++){var Cs=this._tweens[Ss[Ms]],Ts=!_s;Cs&&Cs.update(ga,Ts)===!1&&!_s&&delete this._tweens[Ss[Ms]]}Ss=Object.keys(this._tweensAddedDuringUpdate)}return!0},ca}(),Interpolation={Linear:function(ca,ga){var _s=ca.length-1,Ss=_s*ga,Ms=Math.floor(Ss),Cs=Interpolation.Utils.Linear;return ga<0?Cs(ca[0],ca[1],Ss):ga>1?Cs(ca[_s],ca[_s-1],_s-Ss):Cs(ca[Ms],ca[Ms+1>_s?_s:Ms+1],Ss-Ms)},Bezier:function(ca,ga){for(var _s=0,Ss=ca.length-1,Ms=Math.pow,Cs=Interpolation.Utils.Bernstein,Ts=0;Ts<=Ss;Ts++)_s+=Ms(1-ga,Ss-Ts)*Ms(ga,Ts)*ca[Ts]*Cs(Ss,Ts);return _s},CatmullRom:function(ca,ga){var _s=ca.length-1,Ss=_s*ga,Ms=Math.floor(Ss),Cs=Interpolation.Utils.CatmullRom;return ca[0]===ca[_s]?(ga<0&&(Ms=Math.floor(Ss=_s*(1+ga))),Cs(ca[(Ms-1+_s)%_s],ca[Ms],ca[(Ms+1)%_s],ca[(Ms+2)%_s],Ss-Ms)):ga<0?ca[0]-(Cs(ca[0],ca[0],ca[1],ca[1],-Ss)-ca[0]):ga>1?ca[_s]-(Cs(ca[_s],ca[_s],ca[_s-1],ca[_s-1],Ss-_s)-ca[_s]):Cs(ca[Ms?Ms-1:0],ca[Ms],ca[_s<Ms+1?_s:Ms+1],ca[_s<Ms+2?_s:Ms+2],Ss-Ms)},Utils:{Linear:function(ca,ga,_s){return(ga-ca)*_s+ca},Bernstein:function(ca,ga){var _s=Interpolation.Utils.Factorial;return _s(ca)/_s(ga)/_s(ca-ga)},Factorial:function(){var ca=[1];return function(ga){var _s=1;if(ca[ga])return ca[ga];for(var Ss=ga;Ss>1;Ss--)_s*=Ss;return ca[ga]=_s,_s}}(),CatmullRom:function(ca,ga,_s,Ss,Ms){var Cs=(_s-ca)*.5,Ts=(Ss-ga)*.5,Is=Ms*Ms,Bs=Ms*Is;return(2*ga-2*_s+Cs+Ts)*Bs+(-3*ga+3*_s-2*Cs-Ts)*Is+Cs*Ms+ga}}},Sequence=function(){function ca(){}return ca.nextId=function(){return ca._nextId++},ca._nextId=0,ca}(),mainGroup=new Group,Tween=function(){function ca(ga,_s){_s===void 0&&(_s=mainGroup),this._object=ga,this._group=_s,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing$1.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return ca.prototype.getId=function(){return this._id},ca.prototype.isPlaying=function(){return this._isPlaying},ca.prototype.isPaused=function(){return this._isPaused},ca.prototype.to=function(ga,_s){return this._valuesEnd=Object.create(ga),_s!==void 0&&(this._duration=_s),this},ca.prototype.duration=function(ga){return this._duration=ga,this},ca.prototype.start=function(ga){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var _s in this._valuesStartRepeat)this._swapEndStartRepeatValues(_s),this._valuesStart[_s]=this._valuesStartRepeat[_s]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=ga!==void 0?typeof ga=="string"?now$1()+parseFloat(ga):ga:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},ca.prototype._setupProperties=function(ga,_s,Ss,Ms){for(var Cs in Ss){var Ts=ga[Cs],Is=Array.isArray(Ts),Bs=Is?"array":typeof Ts,Ps=!Is&&Array.isArray(Ss[Cs]);if(!(Bs==="undefined"||Bs==="function")){if(Ps){var Ls=Ss[Cs];if(Ls.length===0)continue;Ls=Ls.map(this._handleRelativeValue.bind(this,Ts)),Ss[Cs]=[Ts].concat(Ls)}if((Bs==="object"||Is)&&Ts&&!Ps){_s[Cs]=Is?[]:{};for(var Rs in Ts)_s[Cs][Rs]=Ts[Rs];Ms[Cs]=Is?[]:{},this._setupProperties(Ts,_s[Cs],Ss[Cs],Ms[Cs])}else typeof _s[Cs]=="undefined"&&(_s[Cs]=Ts),Is||(_s[Cs]*=1),Ps?Ms[Cs]=Ss[Cs].slice().reverse():Ms[Cs]=_s[Cs]||0}}},ca.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},ca.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},ca.prototype.pause=function(ga){return ga===void 0&&(ga=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=ga,this._group&&this._group.remove(this),this)},ca.prototype.resume=function(ga){return ga===void 0&&(ga=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=ga-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},ca.prototype.stopChainedTweens=function(){for(var ga=0,_s=this._chainedTweens.length;ga<_s;ga++)this._chainedTweens[ga].stop();return this},ca.prototype.group=function(ga){return this._group=ga,this},ca.prototype.delay=function(ga){return this._delayTime=ga,this},ca.prototype.repeat=function(ga){return this._initialRepeat=ga,this._repeat=ga,this},ca.prototype.repeatDelay=function(ga){return this._repeatDelayTime=ga,this},ca.prototype.yoyo=function(ga){return this._yoyo=ga,this},ca.prototype.easing=function(ga){return this._easingFunction=ga,this},ca.prototype.interpolation=function(ga){return this._interpolationFunction=ga,this},ca.prototype.chain=function(){for(var ga=[],_s=0;_s<arguments.length;_s++)ga[_s]=arguments[_s];return this._chainedTweens=ga,this},ca.prototype.onStart=function(ga){return this._onStartCallback=ga,this},ca.prototype.onUpdate=function(ga){return this._onUpdateCallback=ga,this},ca.prototype.onRepeat=function(ga){return this._onRepeatCallback=ga,this},ca.prototype.onComplete=function(ga){return this._onCompleteCallback=ga,this},ca.prototype.onStop=function(ga){return this._onStopCallback=ga,this},ca.prototype.update=function(ga,_s){if(ga===void 0&&(ga=now$1()),_s===void 0&&(_s=!0),this._isPaused)return!0;var Ss,Ms,Cs=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(ga>Cs)return!1;_s&&this.start(ga)}if(this._goToEnd=!1,ga<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Ms=(ga-this._startTime)/this._duration,Ms=this._duration===0||Ms>1?1:Ms;var Ts=this._easingFunction(Ms);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Ts),this._onUpdateCallback&&this._onUpdateCallback(this._object,Ms),Ms===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Ss in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Ss]=="string"&&(this._valuesStartRepeat[Ss]=this._valuesStartRepeat[Ss]+parseFloat(this._valuesEnd[Ss])),this._yoyo&&this._swapEndStartRepeatValues(Ss),this._valuesStart[Ss]=this._valuesStartRepeat[Ss];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=ga+this._repeatDelayTime:this._startTime=ga+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Is=0,Bs=this._chainedTweens.length;Is<Bs;Is++)this._chainedTweens[Is].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},ca.prototype._updateProperties=function(ga,_s,Ss,Ms){for(var Cs in Ss)if(_s[Cs]!==void 0){var Ts=_s[Cs]||0,Is=Ss[Cs],Bs=Array.isArray(ga[Cs]),Ps=Array.isArray(Is),Ls=!Bs&&Ps;Ls?ga[Cs]=this._interpolationFunction(Is,Ms):typeof Is=="object"&&Is?this._updateProperties(ga[Cs],Ts,Is,Ms):(Is=this._handleRelativeValue(Ts,Is),typeof Is=="number"&&(ga[Cs]=Ts+(Is-Ts)*Ms))}},ca.prototype._handleRelativeValue=function(ga,_s){return typeof _s!="string"?_s:_s.charAt(0)==="+"||_s.charAt(0)==="-"?ga+parseFloat(_s):parseFloat(_s)},ca.prototype._swapEndStartRepeatValues=function(ga){var _s=this._valuesStartRepeat[ga],Ss=this._valuesEnd[ga];typeof Ss=="string"?this._valuesStartRepeat[ga]=this._valuesStartRepeat[ga]+parseFloat(Ss):this._valuesStartRepeat[ga]=this._valuesEnd[ga],this._valuesEnd[ga]=_s},ca}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing:Easing$1,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update};const Easing=Easing$1;function tween(ca,ga,_s,Ss=Easing.Linear.None){const Ms=new Tween(ca).to(ga,_s).easing(Ss);nextFrame(()=>Ms.start(0));const Cs=requestAnimationFrameInterval(Is=>{Ms.update(Is)===!1&&Cs()}),Ts=[];return Ms.onDestroy=Is=>(Ts.push(Is),Ms),Ms.destroy=function(){this.stop(),Object.assign(Ms,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let Is;for(;Is=Ts.shift();)Is();Cs()},Ms}function tweenProgress$1(ca,ga){return tween({progress:0},{progress:1},ca,ga)}const PI$1=Math.PI,PI_2$1=PI$1*2;function formatLatitude(ca){return ca%PI_2$1}function formatLongitude(ca){return ca%PI_2$1}const getLongitudeParams=(ca,ga,_s)=>(ca=formatLongitude(ca),ga=formatLongitude(ga),_s===Rotation.Anticlockwise&&ca>ga&&(ga+=PI_2$1),_s===Rotation.Clockwise&&ga>ca&&(ca+=PI_2$1),_s===Rotation.Loop&&ga-ca>PI$1?getLongitudeParams(ca,ga,Rotation.Anticlockwise):_s===Rotation.Loop&&ca-ga>PI$1?getLongitudeParams(ca,ga,Rotation.Clockwise):{from:ca,to:ga});function progressNumber(ca,ga,_s){return ca+(ga-ca)*_s}const CameraMovementPlugin=ca=>{const ga=(Ms,Cs,Ts={preload:!0})=>new Promise(async(Is,Bs)=>{if(Ts.asyncStartCallback&&Ts.asyncStartCallback(),ca.panoIndex===void 0)return Bs(!1);if(Ms.mode&&Ms.mode!==ca.currentMode&&await new Promise(Ls=>{!Ms.mode||(ca.once("modeChange",Rs=>{ca.once("initAnimationEnded",()=>{Rs===Ms.mode&&Ls(!0)})}),ca.changeMode(Ms.mode,{fov:Ms.fov||void 0,latitude:Ms.latitude||void 0,longitude:Ms.longitude||void 0,panoIndex:Ms.panoIndex||void 0}))}),Ms.mode===Five.Mode.Floorplan||(Ts.preload&&Ms.panoIndex!==void 0&&Ms.panoIndex!==ca.panoIndex&&await ca.preloadPano(Ms.panoIndex),Ts.asyncEndCallback&&Ts.asyncEndCallback(),Ms.panoIndex===void 0&&Ms.fov===void 0&&Ms.latitude===void 0&&Ms.longitude===void 0))return Is(!0);const Ps=Ms.panoIndex!==void 0?Ms.panoIndex:ca.panoIndex;if(Ps!==void 0){const Ls=Object.assign(Ms,{duration:Cs,moveEndCallback:()=>Is(!0),moveCancelCallback:()=>{Is(!0)}});await ca.moveToPano(Ps,Ls)}else Bs(!1)}),_s=Ms=>{const Cs=ca.state,Ts=formatLatitude(Cs.latitude),Is=formatLatitude(Ms.latitude),{from:Bs,to:Ps}=getLongitudeParams(Cs.longitude,Ms.longitude,Ms.rotation||Rotation.Loop),Ls=Cs.fov,Rs=Ms.fov;return{from:{latitude:Ts,longitude:Bs,fov:Ls},to:{latitude:Is,longitude:Ps,fov:Rs}}};return{move:ga,rotate:async(Ms,Cs,Ts={})=>{Ts.asyncStartCallback&&Ts.asyncStartCallback(),Ms.mode&&ca.currentMode!==Ms.mode&&await ca.changeMode(Ms.mode),Ms.mode===Five.Mode.Panorama&&ca.currentMode===Five.Mode.Panorama&&Ms.panoIndex!==void 0&&Ms.panoIndex!==ca.panoIndex&&(Ts.preload&&await ca.preloadPano(Ms.panoIndex),await new Promise((Ps,Ls)=>{ca.moveToPano(Ms.panoIndex,{moveEndCallback:()=>Ps(!0),moveCancelCallback:()=>Ls(!1),effect:"fade"})})),Ts.asyncEndCallback&&Ts.asyncEndCallback();const{from:Is,to:Bs}=_s(Ms);return await new Promise((Ps,Ls)=>{const Rs=({progress:Ns})=>{const Ds={};Ds.longitude=progressNumber(Is.longitude,Bs.longitude,Ns)%PI_2$1,Ds.latitude=progressNumber(Is.latitude,Bs.latitude,Ns),Ds.fov=progressNumber(Is.fov,Bs.fov,Ns),ca.setState(Ds,!0)},Os=()=>{Ps(!0)},Fs=()=>{Ps(!1)};let Vs=Cs;Ms.rotation===Rotation.Loop&&(Vs=Ms.rotateSpeed?Math.ceil(Math.abs(Bs.longitude-Is.longitude)/Ms.rotateSpeed*1e3):Cs);const ks=tweenProgress$1(Vs,Easing.Linear.None).onUpdate(Rs).onComplete(Os).onDestroy(Fs);Ms.rotation===Rotation.Loop&&ks.repeat(1/0).yoyo(!0),setTimeout(()=>{ks.destroy(),Ps(!0)},Cs)})}}};var VreoKeyframeEnum=(ca=>(ca.CameraMovement="CameraMovement",ca.PanoTag="PanoTag",ca.PanoTextLabel="PanoTextLabel",ca.Prompter="Prompter",ca.UpdateVRPanorama="UpdateVRPanorama",ca.ModelVideo="ModelVideo",ca.PanoEffect="PanoEffect",ca.InfoPanel="InfoPanel",ca.VideoEffect="VideoEffect",ca.BgMusic="BgMusic",ca.Exit="Exit",ca.Custom="Custom",ca))(VreoKeyframeEnum||{}),PanoTagEnum=(ca=>(ca.Text="Text",ca.Image="Image",ca))(PanoTagEnum||{}),PanoTagStyleEnum=(ca=>(ca.Growth="Growth",ca.Expand="Expand",ca))(PanoTagStyleEnum||{}),InfoPanelTypeEnum=(ca=>(ca.Image="Image",ca.Video="Video",ca))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(ca=>(ca.Drawer="Drawer",ca.PopUp="PopUp",ca))(InfoPanelStyleEnum||{});function CameraMovement(){const ca=useController(),ga=useFiveInstance(),_s=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Ss=async Ms=>{_s.current||(_s.current=CameraMovementPlugin(ga));const{start:Cs,end:Ts,data:Is}=Ms,Bs=Is,Ps=Bs.effect;Ps===CameraMovementEffect.Rotate?await _s.current.rotate(Is,Ts-Cs):Ps===CameraMovementEffect.Move?await _s.current.move(Is,Ts-Cs):Bs.panoIndex!==void 0&&Bs.panoIndex!==ga.panoIndex?await _s.current.move(Is,Ts-Cs):await _s.current.rotate(Is,Ts-Cs)};return ca.on(VreoKeyframeEnum.CameraMovement,Ss),()=>{ca.off(VreoKeyframeEnum.CameraMovement,Ss)}},[ca]),jsx(Fragment,{})}function InfoPanelImg({url:ca,children:ga}){return jsxs("div",{className:"vreo-infoPanel vreo-infoPanel--img",children:[ga,jsx("div",{className:"vreo-infoPanelImg",style:{backgroundImage:`url(${ca})`}})]})}function InfoPanelVideo({url:ca,children:ga}){return jsxs("div",{className:"vreo-infoPanel vreo-infoPanel--video",children:[ga,jsx("div",{className:"vreo-infoPanelWrapper",children:jsx("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:ca})})]})}const Title=ca=>!ca.title&&!ca.subTitle?null:jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:ca.title}),jsx("div",{className:"vreo-infoPanel-t2",children:ca.subTitle})]});function InfoPanel(){const ca=react$1.exports.useRef(),ga=useController();return react$1.exports.useEffect(()=>{var Ss;if(((Ss=ga.configs)==null?void 0:Ss.keyframeMap.InfoPanel)===!1)return;const _s=Ms=>{const{start:Cs,end:Ts,data:Is}=Ms,Bs=Is,{title:Ps,subTitle:Ls,style:Rs}=Bs;do{if(Rs===InfoPanelStyleEnum.PopUp){Bs.type===InfoPanelTypeEnum.Image?ga.openPopUp(jsx(InfoPanelImg,{url:Bs.url,children:jsx(Title,{title:Ps,subTitle:Ls})})):Bs.type===InfoPanelTypeEnum.Video&&ga.openPopUp(jsx(InfoPanelVideo,{url:Bs.url,children:jsx(Title,{title:Ps,subTitle:Ls})}));break}Bs.type===InfoPanelTypeEnum.Image?ga.openDrawer({content:jsx(InfoPanelImg,{url:Bs.url,children:jsx(Title,{title:Ps,subTitle:Ls})}),height:"60vh"}):Bs.type===InfoPanelTypeEnum.Video&&ga.openDrawer({content:jsx(InfoPanelVideo,{url:Bs.url,children:jsx(Title,{title:Ps,subTitle:Ls})}),height:"60vh"})}while(!1);ca.current=setTimeout(()=>{ga.openDrawer(!1),ga.openPopUp(!1)},Ts-Cs)};return ga.on(VreoKeyframeEnum.InfoPanel,_s),()=>{ga.off(VreoKeyframeEnum.InfoPanel,_s),ca.current&&clearTimeout(ca.current)}},[ga]),jsx(Fragment,{})}const ModelTVVideoPlugin=(ca,{videoElement:ga})=>{const _s={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:ga},Ss=Rs=>{_s.videoTexture&&(_s.videoTexture.image.muted=Rs,_s.videoTexture.image.play())},Ms=()=>_s.videoTexture?_s.videoTexture.image.muted:!0,Cs=()=>{if(_s.enabled||!_s.videoTexture)return;_s.enabled=!0,_s.videoMeshes=Is(),_s.videoMeshes.forEach(Os=>ca.scene.add(Os));const Rs=()=>{if(!_s.videoTexture)return;const Os=()=>{var Fs;!_s.videoTexture||((Fs=_s.videoTexture)==null||Fs.image.removeEventListener("timeupdate",Os),_s.videoTextureEnabled=!0,_s.videoMeshes.forEach(Vs=>{Vs.material.map!==_s.videoTexture&&(Vs.material.map=_s.videoTexture)}),ca.needsRender=!0)};_s.videoTexture.image.addEventListener("timeupdate",Os),_s.videoTexture&&_s.videoMeshes.length&&_s.videoTexture.image.play()};if(ca.model.loaded)Rs();else return ca.once("modelLoaded",()=>Rs())},Ts=()=>{!_s.enabled||(_s.enabled=!1,_s.videoMeshes.forEach(Rs=>{Rs.geometry.dispose(),Rs.material.dispose(),ca.scene.remove(Rs),_s.videoTexture&&_s.videoTexture.image.pause()}),_s.videoMeshes=[],ca.needsRender=!0)},Is=()=>_s.rectPoints.map((Rs,Os)=>{const Fs=new BufferGeometry,Vs=128,ks=[];ks.push(Rs[0].x,Rs[0].y,Rs[0].z);for(let Us=1;Us<Vs;Us++)ks.push(Rs[0].x+(Rs[1].x-Rs[0].x)*Us/Vs,Rs[0].y+(Rs[1].y-Rs[0].y)*Us/Vs,Rs[0].z+(Rs[1].z-Rs[0].z)*Us/Vs);ks.push(Rs[1].x,Rs[1].y,Rs[1].z),ks.push(Rs[2].x,Rs[2].y,Rs[2].z);for(let Us=1;Us<Vs;Us++)ks.push(Rs[2].x+(Rs[3].x-Rs[2].x)*Us/Vs,Rs[2].y+(Rs[3].y-Rs[2].y)*Us/Vs,Rs[2].z+(Rs[3].z-Rs[2].z)*Us/Vs);ks.push(Rs[3].x,Rs[3].y,Rs[3].z);const Ns=[];Ns.push(0,1);for(let Us=1;Us<Vs;Us++)Ns.push(0,1-Us/Vs);Ns.push(0,0),Ns.push(1,0);for(let Us=1;Us<Vs;Us++)Ns.push(1,Us/Vs);Ns.push(1,1);const Ds=[];for(let Us=0;Us<Vs;Us++)Ds.push(Us,Us+1,Vs*2-Us,Us,Vs*2-Us,Vs*2+1-Us);Fs.setAttribute("position",new BufferAttribute(new Float32Array(ks),3)),Fs.setAttribute("uv",new BufferAttribute(new Float32Array(Ns),2)),Fs.setIndex(new BufferAttribute(new Uint32Array(Ds),1));const $s=new MeshBasicMaterial({map:_s.videoTextureEnabled?_s.videoTexture:_s.imageTexture,side:DoubleSide}),Gs=new Mesh(Fs,$s);return Gs.renderOrder=1,Gs.name=`video-${Os}-${performance.now()}`,Gs}),Bs=Rs=>{const Os=new TextureLoader().load(Rs);return Os.minFilter=LinearFilter,Os.magFilter=LinearFilter,Os.format=RGBFormat,Os},Ps=(Rs,Os)=>new Promise((Fs,Vs)=>{const ks=new XMLHttpRequest;ks.onreadystatechange=()=>{if(ks.readyState==4)if(ks.status==200){const Ns=window.URL||window.webkitURL;Os=Os||document.createElement("video"),Os.crossOrigin="anonymous",Os.autoplay=!0,Os.muted=!0,Os.loop=!0,Os.playsInline=!0,Os.src=Ns.createObjectURL(ks.response);const Ds=new VideoTexture(Os);Ds.minFilter=LinearFilter,Ds.magFilter=LinearFilter,Ds.format=RGBFormat,Fs(Object.assign(Ds,{videoSource:Rs}))}else Vs(new Error("Video download Error: "+ks.status))},ks.onerror=Ns=>Vs(Ns),ks.open("GET",Rs),ks.responseType="blob",ks.send()}),Ls=async(Rs,Os)=>{const{video_src:Fs,video_poster_src:Vs,points:ks}=Rs;_s.videoSource=Fs,_s.rectPoints=ks.map(Ns=>Ns.map(({x:Ds,y:$s,z:Gs})=>new Vector3(Ds,$s,Gs))),_s.imageTexture=Bs(Vs),Os&&(_s.videoElement=Os),_s.videoTexture=await Ps(_s.videoSource,_s.videoElement),_s.enabled=!!Rs.enable,_s.enabled&&Cs()};return ca.on("modeChange",()=>Ss(!0)),ca.on("wantsTapGesture",Rs=>{if(!_s.enabled)return;const[Os]=Rs.intersectObjects(ca.scene.children,!0);if(!!Os&&/^video/.test(Os.object.name))return _s.videoTexture&&Ss(!_s.videoTexture.image.muted),!1}),ca.on("panoArrived",()=>{if(!_s.enabled||Ms())return;const Rs=ca.camera.position;_s.rectPoints.find(Fs=>{const Vs=Fs.reduce((ks,Ns)=>new Vector3(ks.x+Ns.x/Fs.length,ks.y+Ns.y/Fs.length,ks.z+Ns.z/Fs.length),new Vector3);return Fs.map(ks=>new Vector3((ks.x+Vs.x)/2,(ks.y+Vs.y)/2,(ks.z+Vs.z)/2)).filter(ks=>{ks=ks.clone().sub(Rs).normalize();const Ns=new Raycaster(Rs,ks),[Ds]=Ns.intersectObjects(ca.scene.children,!0);return!!Ds&&/^video/.test(Ds.object.name)}).length>=2})||Ss(!0)}),ca.on("renderFrame",()=>{_s.videoMeshes.forEach(Rs=>{Rs&&(Rs.needsRender=!0)})}),ca.on("load",Rs=>{Rs.modelTVVideoData&&Ls(Rs.modelTVVideoData)}),{enable:Cs,disable:Ts,load:Ls}};function createTransMatrix(ca){const ga=new Matrix4;return ga.fromArray(ca),_s=>{const Ss=new Vector3(..._s);return Ss.applyMatrix4(ga),Ss.toArray()}}function ModelVideo(){const ca=useController(),ga=useFiveInstance(),_s=react$1.exports.useRef(),Ss=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Ms=async Cs=>{var Vs,ks;_s.current||(_s.current=ModelTVVideoPlugin(ga,{}));const{start:Ts,end:Is}=Cs,{videoSrc:Bs,videoPosterSrc:Ps,vertexs:Ls,matrixWorld:Rs}=Cs.data,Os=(()=>{if(Ls.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(Ls.length===4)return Ls;const Ns=new Box3;return Ls.forEach(Ds=>Ns.expandByPoint(new Vector3(Ds.x,Ds.y,Ds.z))),[new Vector3(Ns.min.x,Ns.max.y,Ns.max.z),new Vector3(Ns.min.x,Ns.min.y,Ns.max.z),new Vector3(Ns.max.x,Ns.min.y,Ns.max.z),new Vector3(Ns.max.x,Ns.max.y,Ns.max.z)]})(),Fs=(()=>{if(Rs){const Ns=createTransMatrix(Rs);return[Os.map(Ds=>{const $s=Ns([Ds.x,Ds.y,Ds.z]);return{x:$s[0],y:$s[1],z:$s[2]}})]}return[Os]})();_s.current.disable(),await _s.current.load({video_src:Bs,video_poster_src:Ps,points:Fs},(ks=(Vs=ca.configs)==null?void 0:Vs.videos)==null?void 0:ks.modelTVVideo),_s.current.enable(),Ss.current=setTimeout(()=>{var Ns;return(Ns=_s.current)==null?void 0:Ns.disable()},Is-Ts)};return ca.on(VreoKeyframeEnum.ModelVideo,Ms),()=>{ca.off(VreoKeyframeEnum.ModelVideo,Ms),Ss.current&&clearTimeout(Ss.current)}},[ca]),jsx(Fragment,{})}var line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t=tslib.exports;function e(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}}),ga.default=ca,Object.freeze(ga)}var n=e(require$$1),i=function(ca){function ga(){var _s=ca.call(this)||this;return _s.type="LineSegmentsGeometry",_s.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),_s.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),_s.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),_s}return t.__extends(ga,ca),ga.prototype.applyMatrix4=function(_s){var Ss=this.attributes.instanceStart,Ms=this.attributes.instanceEnd;return Ss!==void 0&&(Ss.applyMatrix4(_s),Ms.applyMatrix4(_s),Ss.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},ga.prototype.setPositions=function(_s){var Ss;Ss=_s instanceof Float32Array?_s:Array.isArray(_s)?new Float32Array(_s):new Float32Array;var Ms=new n.InstancedInterleavedBuffer(Ss,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(Ms,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(Ms,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},ga.prototype.setColors=function(_s){var Ss;Ss=_s instanceof Float32Array?_s:Array.isArray(_s)?new Float32Array(_s):new Float32Array;var Ms=new n.InstancedInterleavedBuffer(Ss,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(Ms,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(Ms,3,3)),this},ga.prototype.fromWireframeGeometry=function(_s){return this.setPositions(_s.attributes.position.array),this},ga.prototype.fromEdgesGeometry=function(_s){return this.setPositions(_s.attributes.position.array),this},ga.prototype.fromMesh=function(_s){return this.fromWireframeGeometry(new n.WireframeGeometry(_s.geometry)),this},ga.prototype.fromLineSegments=function(_s){var Ss=_s.geometry;if(Ss instanceof n.Geometry){var Ms=new n.BufferGeometry().fromGeometry(Ss);this.setPositions(Ms.attributes.position.array)}else Ss instanceof n.BufferGeometry&&this.setPositions(Ss.attributes.position.array);return this},ga.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n.Box3);var _s=this.attributes.instanceStart,Ss=this.attributes.instanceEnd;if(_s!==void 0&&Ss!==void 0){var Ms=new n.Box3;this.boundingBox.setFromBufferAttribute(_s),Ms.setFromBufferAttribute(Ss),this.boundingBox.union(Ms)}},ga.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n.Sphere),this.boundingBox===null&&this.computeBoundingBox();var _s=this.attributes.instanceStart,Ss=this.attributes.instanceEnd;if(_s!==void 0&&Ss!==void 0){var Ms=this.boundingSphere.center;this.boundingBox.getCenter(Ms);for(var Cs=0,Ts=new n.Vector3,Is=0,Bs=_s.count;Is<Bs;Is++)Ts.fromBufferAttribute(_s,Is),Cs=Math.max(Cs,Ms.distanceToSquared(Ts)),Ts.fromBufferAttribute(Ss,Is),Cs=Math.max(Cs,Ms.distanceToSquared(Ts));this.boundingSphere.radius=Math.sqrt(Cs),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},ga.prototype.toJSON=function(){},ga}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o=function(ca){function ga(_s){var Ss=ca.call(this,{uniforms:n.UniformsUtils.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,clipping:!0})||this;return Ss.type="LineMaterial",Ss.dashed=!1,Object.defineProperties(Ss,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Ms){this.uniforms.diffuse.value=Ms}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Ms){this.uniforms.linewidth.value=Ms}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Ms){this.uniforms.dashScale.value=Ms}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Ms){this.uniforms.dashSize.value=Ms}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Ms){this.uniforms.gapSize.value=Ms}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Ms){this.uniforms.opacity.value=Ms}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Ms){this.uniforms.resolution.value.copy(Ms)}}}),Ss.setValues(_s),Ss}return t.__extends(ga,ca),ga}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(ca){function ga(_s,Ss){var Ms=ca.call(this)||this;return Ms.type="LineSegments2",Ms.geometry=_s!==void 0?_s:new i,Ms.material=Ss!==void 0?Ss:new o({color:16777215*Math.random()}),Ms}return t.__extends(ga,ca),ga.prototype.computeLineDistances=function(){for(var _s=this.geometry,Ss=_s.attributes.instanceStart,Ms=_s.attributes.instanceEnd,Cs=new Float32Array(2*Ss.count),Ts=new n.Vector3,Is=new n.Vector3,Bs=0,Ps=0,Ls=Ss.count;Bs<Ls;Bs++,Ps+=2)Ts.fromBufferAttribute(Ss,Bs),Is.fromBufferAttribute(Ms,Bs),Cs[Ps]=Ps===0?0:Cs[Ps-1],Cs[Ps+1]=Cs[Ps]+Ts.distanceTo(Is);var Rs=new n.InstancedInterleavedBuffer(Cs,2,1);return _s.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(Rs,1,0)),_s.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(Rs,1,1)),this},ga.prototype.raycast=function(_s,Ss){_s.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Ms=_s.ray,Cs=_s.camera,Ts=Cs.projectionMatrix,Is=this.geometry,Bs=this.material,Ps=Bs.resolution,Ls=Bs.linewidth,Rs=Is.attributes.instanceStart,Os=Is.attributes.instanceEnd,Fs=new n.Vector4,Vs=new n.Vector4,ks=new n.Vector4,Ns=new n.Vector3,Ds=new n.Matrix4,$s=new n.Line3,Gs=new n.Vector3;Ms.at(1,ks),ks.w=1,ks.applyMatrix4(Cs.matrixWorldInverse),ks.applyMatrix4(Ts),ks.multiplyScalar(1/ks.w),ks.x*=Ps.x/2,ks.y*=Ps.y/2,ks.z=0,Ns.copy(ks);var Us=this.matrixWorld;Ds.multiplyMatrices(Cs.matrixWorldInverse,Us);for(var Hs=0,zs=Rs.count;Hs<zs;Hs++){Fs.fromBufferAttribute(Rs,Hs),Vs.fromBufferAttribute(Os,Hs),Fs.w=1,Vs.w=1,Fs.applyMatrix4(Ds),Vs.applyMatrix4(Ds),Fs.applyMatrix4(Ts),Vs.applyMatrix4(Ts),Fs.multiplyScalar(1/Fs.w),Vs.multiplyScalar(1/Vs.w);var js=Fs.z<-1&&Vs.z<-1,Ws=Fs.z>1&&Vs.z>1;if(!js&&!Ws){Fs.x*=Ps.x/2,Fs.y*=Ps.y/2,Vs.x*=Ps.x/2,Vs.y*=Ps.y/2,$s.start.copy(Fs),$s.start.z=0,$s.end.copy(Vs),$s.end.z=0;var Qs=$s.closestPointToPointParameter(Ns,!0);$s.at(Qs,Gs);var Zs=n.MathUtils.lerp(Fs.z,Vs.z,Qs),Xs=Zs>=-1&&Zs<=1,eu=Ns.distanceTo(Gs)<.5*Ls;if(Xs&&eu){$s.start.fromBufferAttribute(Rs,Hs),$s.end.fromBufferAttribute(Os,Hs),$s.start.applyMatrix4(Us),$s.end.applyMatrix4(Us);var Ys=new n.Vector3,Js=new n.Vector3;Ms.distanceSqToSegment($s.start,$s.end,Js,Ys),Ss.push({point:Js,pointOnLine:Ys,distance:Ms.origin.distanceTo(Js),object:this,faceIndex:Hs})}}}},ga}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(ca){function ga(_s,Ss){var Ms=ca.call(this,_s,Ss)||this;return Ms.type="Line2",Ms}return t.__extends(ga,ca),ga}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(ca){function ga(){var _s=ca.call(this)||this;return _s.type="LineGeometry",_s}return t.__extends(ga,ca),ga.prototype.setPositions=function(_s){for(var Ss=_s.length-3,Ms=new Float32Array(2*Ss),Cs=0;Cs<Ss;Cs+=3)Ms[2*Cs]=_s[Cs],Ms[2*Cs+1]=_s[Cs+1],Ms[2*Cs+2]=_s[Cs+2],Ms[2*Cs+3]=_s[Cs+3],Ms[2*Cs+4]=_s[Cs+4],Ms[2*Cs+5]=_s[Cs+5];return ca.prototype.setPositions.call(this,Ms),this},ga.prototype.setColors=function(_s){for(var Ss=_s.length-3,Ms=new Float32Array(2*Ss),Cs=0;Cs<Ss;Cs+=3)Ms[2*Cs]=_s[Cs],Ms[2*Cs+1]=_s[Cs+1],Ms[2*Cs+2]=_s[Cs+2],Ms[2*Cs+3]=_s[Cs+3],Ms[2*Cs+4]=_s[Cs+4],Ms[2*Cs+5]=_s[Cs+5];return ca.prototype.setColors.call(this,Ms),this},ga.prototype.fromLine=function(_s){var Ss=_s.geometry;if(Ss instanceof n.Geometry){var Ms=new n.BufferGeometry().fromGeometry(Ss);this.setPositions(Ms.attributes.position.array)}else Ss instanceof n.BufferGeometry&&this.setPositions(Ss.attributes.position.array);return this},ga.prototype.copy=function(){return this},ga}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l=function(ca){function ga(_s,Ss){_s===void 0&&(_s=new n.Vector3),Ss===void 0&&(Ss=new n.Vector3);var Ms=ca.call(this)||this;Ms.type="FiveLine",Ms.needsRender=!0;var Cs=new u,Ts=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});Ms.line=new s(Cs,Ts);var Is=new n.BufferGeometry,Bs=new n.PointsMaterial({color:14467195,size:8,map:c||(c=new n.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Ms.points=new n.Points(Is,Bs),Ms.points.renderOrder=11,Ms.points.frustumCulled=!1,Ms.setPoints(_s,Ss),Ms.add(Ms.line,Ms.points),Ms}return t.__extends(ga,ca),ga.prototype.setPoints=function(_s,Ss){var Ms=[].concat(_s.toArray(),Ss.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(Ms),3)),this.line.geometry.setPositions(Ms),this.line.computeLineDistances(),this.needsRender=!0},ga.prototype.getPoints=function(){var _s=this.points.geometry.attributes.position.array;return[new n.Vector3(_s[0],_s[1],_s[2]),new n.Vector3(_s[3],_s[4],_s[5])]},ga.prototype.setMaterial=function(_s){var Ss=this.line.material;for(var Ms in _s)if(_s.hasOwnProperty(Ms)){var Cs=_s[Ms];Ms==="dashed"?(Ss.dashed=Cs,Cs?Ss.defines.USE_DASH="":delete Ss.defines.USE_DASH,Ss.needsUpdate=!0):Ss[Ms]=_s[Ms]}this.needsRender=!0},ga.prototype.setResolution=function(_s,Ss){var Ms=this.line.material.resolution;Ms.x===_s&&Ms.y===Ss||(Ms.set(_s,Ss),this.needsRender=!0)},ga}(n.Object3D);Object.assign(l.prototype,{isFiveLine:!0}),Line=line.Line=l,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;class BetterTween extends exports.Tween{constructor(){super(...arguments);il(this,"disposeMethods",[]);il(this,"animationFrameDisposer");il(this,"onDispose",_s=>(this.disposeMethods.push(_s),this));il(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval(()=>this.update()),this));il(this,"dispose",()=>{var _s;this.stop(),(_s=this.animationFrameDisposer)==null||_s.call(this),this.disposeMethods.forEach(Ss=>Ss()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(ca,ga=exports.Easing.Linear.None){const _s=new BetterTween({progress:0}).to({progress:1});return ca!==void 0&&_s.duration(ca),ga!==void 0&&_s.easing(ga),_s}function lineAnime(ca,ga,_s){const Ss="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Ms=new TextureLoader().load(Ss),Cs=new Color(16777215),Ts=new Line;Ts.setMaterial({linewidth:2,color:Cs});const Is=Ts.points.material;return Is.map=Ms,Is.color.set(Cs),Ts.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:Bs})=>{const Ps=.5-Bs/2,Ls=.5+Bs/2,Rs=ga.clone().lerp(_s,Ps),Os=ga.clone().lerp(_s,Ls);Ts.setPoints(Rs,Os)}).onStart(()=>ca.scene.add(Ts)).onDispose(()=>{ca.scene.remove(Ts),ca.needsRender=!0})}function PanoEffect(){const[ca,ga]=react$1.exports.useState(null),_s=useFiveInstance(),Ss=react$1.exports.useRef(null),[Ms,Cs]=react$1.exports.useState(null),Ts=react$1.exports.useRef(),Is=useController(),Bs=useFiveProject2d(),Ps=()=>{Ss.current&&Ss.current.dispose()};return react$1.exports.useEffect(()=>{const Ls=Rs=>{const{start:Os,end:Fs,data:Vs}=Rs,ks=Vs,[Ns,Ds]=ks.twoVertexs,$s=new Vector3(Ns.x,Ns.y,Ns.z),Gs=new Vector3(Ds.x,Ds.y,Ds.z);Ss.current=lineAnime(_s,$s.clone(),Gs.clone()),Ss.current.play();const Us=$s.lerp(Gs,.5),Hs=$s.distanceTo(Gs),zs=Bs(Us);if(!zs)return;const{x:js,y:Ws}=zs;ga({center:Us,distance:Hs}),Cs({left:js,top:Ws}),Ts.current=setTimeout(()=>{ga(null),Cs(null),Ps()},Fs-Os)};return Is.on(VreoKeyframeEnum.PanoEffect,Ls),()=>{Is.off(VreoKeyframeEnum.PanoEffect,Ls),Ts.current&&clearTimeout(Ts.current),Ps()}},[Is]),react$1.exports.useEffect(()=>{const Ls=()=>{if(!(ca!=null&&ca.center))return;const{x:Rs,y:Os,z:Fs}=ca.center,Vs=Bs(new Vector3(Rs,Os,Fs));if(!Vs)return;const{x:ks,y:Ns}=Vs;Cs({left:ks,top:Ns})};return _s.on("currentStateChange",Ls),()=>{_s.off("currentStateChange",Ls)}},[ca==null?void 0:ca.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":ca}),style:{left:((Ms==null?void 0:Ms.left)||0)+"px",top:((Ms==null?void 0:Ms.top)||0)+"px"},children:(ca==null?void 0:ca.distance.toFixed(4))+"m"})})}function PanoTag(){const[ca,ga]=react$1.exports.useState(null),[_s,Ss]=react$1.exports.useState(null),Ms=react$1.exports.useRef(),Cs=useController(),Ts=useFiveInstance(),Is=useFiveProject2d();react$1.exports.useEffect(()=>{var Ls;if(((Ls=Cs.configs)==null?void 0:Ls.keyframeMap.PanoTag)===!1)return;const Ps=Rs=>{const{start:Os,end:Fs,data:Vs}=Rs,ks=Vs,Ns=ks.vertex,{x:Ds,y:$s,z:Gs}=ks.vertex,Us=Is(new Vector3(Ds,$s,Gs));if(!Us)return;const{x:Hs,y:zs}=Us;ga({vertex:Ns,text:ks.text||PanoTagEnum.Text,type:ks.type,imgUrl:ks.imgUrl,style:ks.style||PanoTagStyleEnum.Growth}),Ss({left:Hs,top:zs}),Ms.current=setTimeout(()=>{ga(null),Ss(null)},Fs-Os)};return Cs.on(VreoKeyframeEnum.PanoTag,Ps),()=>{Cs.off(VreoKeyframeEnum.PanoTag,Ps),Ms.current&&clearTimeout(Ms.current)}},[Cs]),react$1.exports.useEffect(()=>{const Ps=()=>{if(!(ca!=null&&ca.vertex))return;const{x:Ls,y:Rs,z:Os}=ca.vertex,Fs=Is(new Vector3(Ls,Rs,Os));if(!Fs)return;const{x:Vs,y:ks}=Fs;Ss({left:Vs,top:ks})};return Ts.on("currentStateChange",Ps),()=>{Ts.off("currentStateChange",Ps)}},[ca==null?void 0:ca.vertex]);const Bs=(()=>{if(!!ca){if(ca.type===PanoTagEnum.Text)return jsx(Fragment,{children:jsx("span",{children:ca.text})});if(ca.type===PanoTagEnum.Image)return jsxs(Fragment,{children:[jsx("img",{className:"PanoTag-img",src:ca.imgUrl,alt:ca.text||""}),jsx("span",{className:"PanoTag-txt",children:ca.text})]})}})();return(ca==null?void 0:ca.style)===PanoTagStyleEnum.Expand?jsx(Fragment,{children:jsxs("div",{className:classNames("PanoTag",{"PanoTag--expand":!0,"PanoTag--notHidden":ca}),style:{left:((_s==null?void 0:_s.left)||0)+"px",top:((_s==null?void 0:_s.top)||0)+"px"},children:[jsx("div",{className:"PanoTag-box PanoTag-box--"+((ca==null?void 0:ca.type)||""),children:Bs}),jsx("div",{className:"PanoTag-guideline"})]})}):jsx(Fragment,{children:jsxs("div",{className:classNames("PanoTag",{"PanoTag--notHidden":ca}),style:{left:((_s==null?void 0:_s.left)||0)+"px",top:((_s==null?void 0:_s.top)||0)+"px"},children:[jsx("div",{className:"PanoTag-point"}),jsxs("div",{className:"PanoTag-content",children:[jsxs("span",{className:"PanoTag-linewrap",children:[jsx("span",{className:"PanoTag-slashline"}),jsx("span",{className:"PanoTag-straightline"})]}),jsx("div",{className:"PanoTag-box PanoTag-box--"+((ca==null?void 0:ca.type)||""),children:Bs})]})]})})}var CSS3DObject=function(ca){Object3D.call(this),this.element=ca,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(ga){ga.element instanceof Element&&ga.element.parentNode!==null&&ga.element.parentNode.removeChild(ga.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(ca){CSS3DObject.call(this,ca)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var ca=this,ga,_s,Ss,Ms,Cs=new Matrix4,Ts={camera:{fov:0,style:""},objects:new WeakMap},Is=document.createElement("div");Is.style.overflow="hidden",this.domElement=Is;var Bs=document.createElement("div");Bs.style.WebkitTransformStyle="preserve-3d",Bs.style.transformStyle="preserve-3d",Bs.style.pointerEvents="none",Is.appendChild(Bs);var Ps=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:ga,height:_s}},this.setSize=function(Ds,$s){ga=Ds,_s=$s,Ss=ga/2,Ms=_s/2,Is.style.width=Ds+"px",Is.style.height=$s+"px",Bs.style.width=Ds+"px",Bs.style.height=$s+"px"};function Ls(Ds){return Math.abs(Ds)<1e-10?0:Ds}function Rs(Ds){var $s=Ds.elements;return"matrix3d("+Ls($s[0])+","+Ls(-$s[1])+","+Ls($s[2])+","+Ls($s[3])+","+Ls($s[4])+","+Ls(-$s[5])+","+Ls($s[6])+","+Ls($s[7])+","+Ls($s[8])+","+Ls(-$s[9])+","+Ls($s[10])+","+Ls($s[11])+","+Ls($s[12])+","+Ls(-$s[13])+","+Ls($s[14])+","+Ls($s[15])+")"}function Os(Ds,$s){var Gs=Ds.elements,Us="matrix3d("+Ls(Gs[0])+","+Ls(Gs[1])+","+Ls(Gs[2])+","+Ls(Gs[3])+","+Ls(-Gs[4])+","+Ls(-Gs[5])+","+Ls(-Gs[6])+","+Ls(-Gs[7])+","+Ls(Gs[8])+","+Ls(Gs[9])+","+Ls(Gs[10])+","+Ls(Gs[11])+","+Ls(Gs[12])+","+Ls(Gs[13])+","+Ls(Gs[14])+","+Ls(Gs[15])+")";return Ps?"translate(-50%,-50%)translate("+Ss+"px,"+Ms+"px)"+$s+Us:"translate(-50%,-50%)"+Us}function Fs(Ds,$s,Gs,Us){if(Ds instanceof CSS3DObject){Ds.onBeforeRender(ca,$s,Gs);var Hs;Ds instanceof CSS3DSprite?(Cs.copy(Gs.matrixWorldInverse),Cs.transpose(),Cs.copyPosition(Ds.matrixWorld),Cs.scale(Ds.scale),Cs.elements[3]=0,Cs.elements[7]=0,Cs.elements[11]=0,Cs.elements[15]=1,Hs=Os(Cs,Us)):Hs=Os(Ds.matrixWorld,Us);var zs=Ds.element,js=Ts.objects.get(Ds);if(js===void 0||js.style!==Hs){zs.style.WebkitTransform=Hs,zs.style.transform=Hs;var Ws={style:Hs};Ps&&(Ws.distanceToCameraSquared=Vs(Gs,Ds)),Ts.objects.set(Ds,Ws)}zs.style.display=Ds.visible?"":"none",zs.parentNode!==Bs&&Bs.appendChild(zs),Ds.onAfterRender(ca,$s,Gs)}for(var Qs=0,Zs=Ds.children.length;Qs<Zs;Qs++)Fs(Ds.children[Qs],$s,Gs,Us)}var Vs=function(){var Ds=new Vector3,$s=new Vector3;return function(Gs,Us){return Ds.setFromMatrixPosition(Gs.matrixWorld),$s.setFromMatrixPosition(Us.matrixWorld),Ds.distanceToSquared($s)}}();function ks(Ds){var $s=[];return Ds.traverse(function(Gs){Gs instanceof CSS3DObject&&$s.push(Gs)}),$s}function Ns(Ds){for(var $s=ks(Ds).sort(function(zs,js){var Ws=Ts.objects.get(zs).distanceToCameraSquared,Qs=Ts.objects.get(js).distanceToCameraSquared;return Ws-Qs}),Gs=$s.length,Us=0,Hs=$s.length;Us<Hs;Us++)$s[Us].element.style.zIndex=Gs-Us}this.render=function(Ds,$s){var Gs=$s.projectionMatrix.elements[5]*Ms;if(Ts.camera.fov!==Gs&&($s.isPerspectiveCamera?(Is.style.WebkitPerspective=Gs+"px",Is.style.perspective=Gs+"px"):(Is.style.WebkitPerspective="",Is.style.perspective=""),Ts.camera.fov=Gs),Ds.autoUpdate===!0&&Ds.updateMatrixWorld(),$s.parent===null&&$s.updateMatrixWorld(),$s.isOrthographicCamera)var Us=-($s.right+$s.left)/2,Hs=($s.top+$s.bottom)/2;var zs=$s.isOrthographicCamera?"scale("+Gs+")translate("+Ls(Us)+"px,"+Ls(Hs)+"px)"+Rs($s.matrixWorldInverse):"translateZ("+Gs+"px)"+Rs($s.matrixWorldInverse),js=zs+"translate("+Ss+"px,"+Ms+"px)";Ts.camera.style!==js&&!Ps&&(Bs.style.WebkitTransform=js,Bs.style.transform=js,Ts.camera.style=js),Fs(Ds,Ds,$s,zs),Ps&&Ns(Ds)}};function evenNumber(ca,ga){const _s=Math.round(ca);return _s%2===0?_s:_s+Number(ga!=null&&ga.smaller?-1:1)}function centerPoint(ca,ga){return new Vector3((ca.x+ga.x)/2,(ca.y+ga.y)/2,(ca.z+ga.z)/2)}const transformPositionToVector3=({x:ca,y:ga,z:_s})=>new Vector3(ca,ga,_s);function createResizeObserver(ca,ga){if(!ga||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",ca),unobserve:()=>window.removeEventListener("resize",ca)};{const _s=new ResizeObserver(ca);return{observe:()=>_s.observe(ga),unobserve:()=>_s.unobserve(ga)}}}const CSS3DRenderPlugin=ca=>{const ga={disposeCallbacks:[]},_s=(...Ms)=>{var eu,Ys,Js;const Cs=Ms[0].map(qs=>qs instanceof Vector3?qs:transformPositionToVector3(qs)),Ts=Ms[1];if((Cs==null?void 0:Cs.length)<4)return console.error("points must be equal or greater than than 4");if(!((eu=ca==null?void 0:ca.model)!=null&&eu.loaded))return console.error("five.model.loaded is: ",(Ys=ca==null?void 0:ca.model)==null?void 0:Ys.loaded);const Is=ca.getElement();if(!Is)return console.error("five.getElement() is "+Is);const Bs=[],Ps=(Ts==null?void 0:Ts.ratio)||.00216;Ps<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const Ls=(Ts==null?void 0:Ts.dpr)||1,Rs=(Ts==null?void 0:Ts.mode)||"front",Os=(Js=Ts==null?void 0:Ts.autoRender)!=null?Js:!0,Fs=(Ts==null?void 0:Ts.behindFiveContainer)||Is.parentElement||document.body,Vs=(Ts==null?void 0:Ts.container)||document.createElement("div");Vs.classList.add("__Dnalogel-plugin--CSS3DRenderPlugin");const{css3DObject:ks,mesh:Ns}=Ss(Cs,{ratio:Ps,dpr:Ls,container:Vs,mode:Rs});let Ds;const $s=Rs==="front"&&!ga.frontMode,Gs=Rs==="behind"&&!ga.behindMode,Us=!($s||Gs);let Hs=!1,zs=null;Gs&&(ga.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),$s&&(ga.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:js,css3DRenderer:Ws}=Rs==="behind"?ga.behindMode:ga.frontMode,Qs=(()=>{if(Us)return()=>{js.add(ks)};{const qs=()=>{const tu=evenNumber(Is.clientWidth,{smaller:!0}),nu=evenNumber(Is.clientHeight,{smaller:!0});Ws.setSize(tu,nu)};qs(),Ds=createResizeObserver(qs,Is),Ws.domElement.style.position="absolute",Ws.domElement.style.top="0",Ws.domElement.style.userSelect="none",Ws.domElement.style.pointerEvents="none";const ru=()=>{Hs||(zs=requestAnimationFrame(ru),Ws.render(js,ca.camera))};return()=>{var tu;js.add(ks),(tu=Ds==null?void 0:Ds.observe)==null||tu.call(Ds),ru(),Rs==="behind"&&Ns&&(ca.scene.add(Ns),Bs.push(()=>Ns&&ca.scene.remove(Ns)))}}})();$s&&(Is.parentElement||document.body).appendChild(Ws.domElement),Gs&&Fs.appendChild(Ws.domElement);const Zs=()=>{var qs;return Hs=!0,Bs.forEach(ru=>ru==null?void 0:ru()),js.remove(ks),typeof zs=="number"&&cancelAnimationFrame(zs),js.children.length===0&&(Ws.domElement.remove(),Rs==="front"&&(ga.frontMode=void 0),Rs==="behind"&&(ga.behindMode=void 0),!ga.behindMode&&!ga.frontMode&&((qs=Ds==null?void 0:Ds.unobserve)==null||qs.call(Ds))),!0},Xs=ga.disposeCallbacks.findIndex(qs=>qs===Zs);return Xs!==-1?ga.disposeCallbacks.splice(Xs,1):ga.disposeCallbacks.push(Zs),Os&&Qs(),{container:Vs,dispose:Zs,css3DObject:ks,render:Os?void 0:Qs}},Ss=(Ms,Cs)=>{const{ratio:Ts,dpr:Is,container:Bs,mode:Ps}=Cs,Ls=Ms[0].distanceTo(Ms[1]),Rs=Ms[1].distanceTo(Ms[2]),Os=evenNumber(Ls/Ts*Is),Fs=evenNumber(Rs/Ts*Is),Vs=new CSS3DObject(Bs);Vs.scale.set(Ts,Ts,Ts),Bs.style.width=Os+"px",Bs.style.height=Fs+"px",Bs.style.pointerEvents="none";const ks=centerPoint(Ms[0],Ms[2]),Ns=Ms[1].clone().sub(Ms[0]),Ds=Ms[2].clone().sub(Ms[1]),$s=new Vector3(0,1,0).angleTo(new Vector3(0,Ds.y,Ds.z)),Gs=new Vector3(1,0,0).angleTo(new Vector3(Ns.x,0,Ns.z)),Us=Ns.angleTo(new Vector3(Ns.x,0,Ns.z)),Hs=(Ds.z>0?-1:1)*$s,zs=(Ns.z<0?1:-1)*Gs,js=(Ns.x>0&&Ns.y<0||Ns.x<0&&Ns.y>0?-1:1)*Us;Vs.rotateOnWorldAxis(new Vector3(1,0,0),Hs),Vs.rotateOnWorldAxis(new Vector3(0,1,0),zs),Vs.rotateOnWorldAxis(new Vector3(0,0,1),js),Vs.position.set(ks.x,ks.y,ks.z);let Ws;if(Ps==="behind"){const Qs=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),Zs=new PlaneGeometry(Os,Fs);Ws=new Mesh(Zs,Qs),Ws.name="CSS3DRenderPlugin-mesh",Ws.position.copy(Vs.position),Ws.rotation.copy(Vs.rotation),Ws.scale.copy(Vs.scale)}return{css3DObject:Vs,mesh:Ws}};return{create3DDomContainer:_s,disposeAll:()=>{ga.disposeCallbacks.forEach(Ms=>Ms==null?void 0:Ms()),ga.disposeCallbacks=[]}}},calcPoints=(ca,ga,_s,Ss)=>{const Ms=_s/375,Cs=Ss/375,Ts=new PlaneGeometry(Ms,Cs);if(ga){const $s=new Vector3(ga.x+ca.x,ga.y+ca.y,ga.z+ca.z);Ts.lookAt($s)}const Is=new MeshBasicMaterial({color:16776960,side:DoubleSide}),Bs=new Mesh(Ts,Is),Ps=ca.clone();Bs.position.copy(Ps);const[Ls,Rs,Os,Fs]=Bs.geometry.vertices,Vs=Ps.clone().add(Fs),ks=Ps.clone().add(Os),Ns=Ps.clone().add(Rs),Ds=Ps.clone().add(Ls);return[Vs,ks,Ds,Ns]};function PanoTextLabel(){const ca=react$1.exports.useRef(),ga=useController(),_s=useFiveInstance(),Ss=react$1.exports.useRef();return react$1.exports.useEffect(()=>{var Cs;if(((Cs=ga.configs)==null?void 0:Cs.keyframeMap.PanoTextLabel)===!1)return;const Ms=Ts=>{var Hs,zs,js;const{start:Is,end:Bs,data:Ps}=Ts,Ls=Ps;if(Ps.text==="")return;const{x:Rs,y:Os,z:Fs}=Ls.vertex,Vs=new Vector3(Rs,Os,Fs),ks=new Vector3((Hs=Ls.normal)==null?void 0:Hs.x,(zs=Ls.normal)==null?void 0:zs.y,(js=Ls.normal)==null?void 0:js.z),Ns=200,Ds=30,$s=calcPoints(Vs,Ls.normal&&ks,Ns,Ds);Ss.current||(Ss.current=CSS3DRenderPlugin(_s));const Gs=Ss.current.create3DDomContainer($s),Us=Gs==null?void 0:Gs.css3DObject;if(Ps.quaternion){const Ws=new Quaternion(Ps.quaternion.x,Ps.quaternion.y,Ps.quaternion.z,Ps.quaternion.w);Us==null||Us.quaternion.copy(Ws)}Gs!=null&&Gs.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${Ps.fontSize||16}px`},className:"PanoText-innerText",children:Ps.text||""})})}),Gs==null?void 0:Gs.container),ca.current=setTimeout(()=>{var Ws;(Ws=Ss.current)==null||Ws.disposeAll()},Bs-Is)};return ga.on(VreoKeyframeEnum.PanoTextLabel,Ms),()=>{ga.off(VreoKeyframeEnum.PanoTextLabel,Ms),ca.current&&clearTimeout(ca.current)}},[ga]),jsx(Fragment,{})}function Prompter(){const[ca,ga]=react$1.exports.useState(""),[_s,Ss]=react$1.exports.useState(!0),Ms=react$1.exports.useRef(null),Cs=useController();return react$1.exports.useEffect(()=>{var Is;if(((Is=Cs.configs)==null?void 0:Is.keyframeMap.Prompter)===!1)return;const Ts=Bs=>{const{start:Ps,end:Ls,data:Rs}=Bs;ga(Rs.text),Ss(!1),Ms.current&&(clearTimeout(Ms.current),Ms.current=null),Ms.current=setTimeout(()=>{Ss(!0),ga(""),Ms.current&&clearTimeout(Ms.current),Ms.current=null},Ls-Ps)};return Cs.on(VreoKeyframeEnum.Prompter,Ts),()=>{Cs.off(VreoKeyframeEnum.Prompter,Ts)}},[Cs]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":_s,"vreo-prompter--audio":Cs.isAudio}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:ca})})})}function UpdateVRPanorama(){const ca=useController(),ga=useFiveInstance(),_s=react$1.exports.useRef(null),Ss=react$1.exports.useRef(null),Ms=react$1.exports.useCallback(()=>{if(Ss.current=null,_s.current){const Is=parseWork(_s.current);ga.load(Is)}},[]),Cs=react$1.exports.useCallback(()=>{if(_s.current){const Is=parseWork(_s.current);Object.assign(window,{$rawWork:Is}),ga.load(Is)}},[]),Ts=react$1.exports.useCallback(()=>{!Ss.current||ga.load(Ss.current)},[]);return react$1.exports.useEffect(()=>{const Is=Bs=>{var Rs;_s.current||(_s.current=ga.work.raw.works);const Ps=Bs.data;if(Ps.work){Ss.current=parseWork(Ps.work),ga.load(Ss.current);return}const Ls=(Rs=ga.work)==null?void 0:Rs.raw.works[0];if(Ps.dynamic_scene&&!Ps.panorama){const Fs=JSON.parse(Ls).panorama,Vs=Ps.dynamic_scene.images.index;Fs.list[Vs]=Ps.dynamic_scene.images,Ps.panorama=Fs,delete Ps.dynamic_scene}Object.assign(window,{$work1:JSON.parse(Ls),$work2:Ps,parseWork}),Ss.current=parseWork([Ls,Ps]),ga.load(Ss.current)};return ca.on(VreoKeyframeEnum.UpdateVRPanorama,Is),ca.on(VreoKeyframeEnum.Exit,Ms),ca.on("loaded",Ms),ca.on("paused",Cs),ca.on("playing",Ts),()=>{ca.off(VreoKeyframeEnum.UpdateVRPanorama,Is),ca.off(VreoKeyframeEnum.Exit,Ms),ca.off("loaded",Ms),ca.off("paused",Cs),ca.off("playing",Ts)}},[]),jsx(Fragment,{})}const inlinePlay=ca=>{if(!ca)return;const ga=()=>{ca.removeEventListener("canplaythrough",ga);try{ca.play()}catch{}};ca.addEventListener("canplaythrough",ga),ca.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const ca=react$1.exports.useRef(null),ga=react$1.exports.useRef(),_s=useController(),Ss=react$1.exports.useRef(),[Ms,Cs]=react$1.exports.useState(!1),Ts=useFiveInstance(),Is=Bs=>{!ga.current||(ga.current.src=Bs)};return react$1.exports.useEffect(()=>{const Bs=async Ps=>{const{start:Ls,end:Rs}=Ps,{videoSrc:Os,fov:Fs,direction:Vs,panoIndex:ks,vector:Ns}=Ps.data,[Ds,$s]=(()=>{if(Ns)return[Ns.longitude,Ns.latitude];if(!Vs)return[0,0];let Gs=-Math.atan2(Vs.x,-Vs.z);Gs=(Gs%PI_2+PI_2)%PI_2;const Us=-Math.asin(Vs.y/1);return[Gs,Us]})();Ts.setState({fov:Fs,panoIndex:ks,longitude:Ds,latitude:$s},!0),Is(Os),inlinePlay(ga.current),Cs(!0),Ss.current=setTimeout(()=>{var Gs,Us;(Gs=ga.current)!=null&&Gs.paused||(Us=ga.current)==null||Us.pause(),Cs(!1),Is("")},Rs-Ls)};return _s.on(VreoKeyframeEnum.VideoEffect,Bs),()=>{_s.off(VreoKeyframeEnum.VideoEffect,Bs),Ss.current&&clearTimeout(Ss.current)}},[_s]),react$1.exports.useEffect(()=>{var Ps,Ls;if(!ca.current)return;const Bs=((Ls=(Ps=_s.configs)==null?void 0:Ps.videos)==null?void 0:Ls.videoEffect)||document.createElement("video");Bs.setAttribute("playsinline","true"),Bs.setAttribute("webkit-playsinline","true"),Bs.setAttribute("autoplay","true"),Bs.setAttribute("key","VideoEffect-video"),Bs.setAttribute("class","VideoEffect-video"),ga.current=Bs,ca.current.append(ga.current),document.addEventListener("WeixinJSBridgeReady",function(){var Rs;(Rs=ga.current)==null||Rs.play()},!1),ca.current},[]),jsx("div",{ref:ca,className:classNames("VideoEffect",{"VideoEffect--visible":Ms})})}const Preloader={blob:ca=>{const ga=()=>null;return new Promise((_s,Ss)=>{const Ms=new XMLHttpRequest,Cs=()=>{Ms.ontimeout=ga,Ms.onreadystatechange=ga,Ms.onprogress=ga,Ms.onabort=ga};Ms.ontimeout=()=>{Ss(new Error("timeout")),Cs()},Ms.onreadystatechange=()=>{Ms.readyState===4&&(Ms.status===0&&!Ms.response||(Ms.status===200||Ms.status===0?(_s(Ms.response),Cs()):(Ss(new Error("status:"+Ms.status)),Cs())))},Ms.open("GET",ca,!0),Ms.responseType="blob",Ms.send(null)})}};class AudioLike extends Subscribe{constructor({duration:_s}={}){super();il(this,"$timestamp",0);il(this,"$currentTime",0);il(this,"$duration",0);il(this,"stopInterval");il(this,"muted",!1);il(this,"src","");_s&&(this.$duration=_s)}setAttribute(_s,Ss){}play(){this.$timestamp===0&&(this.$timestamp=performance.now()),this.$currentTime===this.$duration&&(this.$currentTime=0),this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=0}requestAnimationFrameLoop(){const _s=performance.now();this.$currentTime=_s-this.$timestamp,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(_s){this.$currentTime=_s}get duration(){return this.$duration}set duration(_s){this.pause(),this.$duration=_s,this.$timestamp=0,this.$currentTime=0}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(_s,Ss,Ms=!1){this.on(_s,Ss)}removeEventListener(_s,Ss,Ms=!1){this.off(_s,Ss)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(_s,Ss,Ms,Cs,Ts={preload:!0}){var Vs,ks,Ns;if(!Ts.videoInstance)if(cacheInstance.videoInstance)Ts.videoInstance=cacheInstance.videoInstance;else{const Ds=document.createElement("video");Ds.style.opacity="0",Ds.style.display="none",document.body.append(Ds),Ts.videoInstance=Ds,cacheInstance.videoInstance=Ds,Ds.playsInline=!0,Ds.controls=!1}const Is=new PlaneGeometry(_s,Ss,Ms,Cs),Bs=new VideoTexture(Ts.videoInstance),Ps=new ShaderMaterial({uniforms:{map:{value:Bs},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(Is,Ps);il(this,"options");il(this,"videoUrl");il(this,"freeze");il(this,"paused");il(this,"audioInstance");il(this,"audioLikeInstance");il(this,"$removeEventListener");if(this.options=Ts,this.freeze=!1,this.paused=!0,Ts.audioInstance)this.audioInstance=Ts.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const Ds=document.createElement("audio");Ds.crossOrigin="",Ds.muted=!1,Ds.setAttribute("playsinline","true"),Ds.setAttribute("webkit-playsinline","true"),Ds.setAttribute("autoplay","false"),Ds.setAttribute("style","display: none;"),document.body.appendChild(Ds),this.audioInstance=Ds,cacheInstance.audioInstance=Ds}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const Ls=Ds=>runInAction(()=>this.paused=Ds),Rs=()=>Ls(!0),Os=()=>Ls(!1),Fs=()=>{console.log("vreo: video \u64AD\u653E\u7ED3\u675F")};this.audioInstance.addEventListener("pause",Rs),this.audioInstance.addEventListener("play",Os),(Vs=this.options.videoInstance)==null||Vs.addEventListener("pause",Rs),(ks=this.options.videoInstance)==null||ks.addEventListener("play",Os),this.audioLikeInstance.addEventListener("pause",Rs),this.audioLikeInstance.addEventListener("play",Os),(Ns=this.options.videoInstance)==null||Ns.addEventListener("ended",Fs),this.$removeEventListener=()=>{var Ds,$s,Gs;this.audioInstance.removeEventListener("pause",Rs),this.audioInstance.removeEventListener("play",Os),(Ds=this.options.videoInstance)==null||Ds.removeEventListener("pause",Rs),($s=this.options.videoInstance)==null||$s.removeEventListener("play",Os),this.audioLikeInstance.removeEventListener("pause",Rs),this.audioLikeInstance.removeEventListener("play",Os),(Gs=this.options.videoInstance)==null||Gs.removeEventListener("ended",Fs)}}get videoInstance(){var Ms;return this.videoUrl?(Ms=this.videoUrl)!=null&&Ms.endsWith("mp3")?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(_s){if(this.videoUrl===_s)return;this.videoUrl=_s,this.freeze=!0,await this.videoInstance.pause();const Ss=this.material.uniforms;this.videoInstance.muted=!0,this.videoInstance.src=this.options.preload||this.options.preload===void 0||this.videoUrl.endsWith(".mp4")?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.videoInstance.setAttribute("data-src",this.videoUrl);const Ms=()=>{var Cs;this.videoInstance.currentTime!==0&&(this.freeze=!1,this.videoInstance.muted=!1,Ss.enable.value=(Cs=this.videoUrl)!=null&&Cs.endsWith(".mp4")?1:0,this.videoInstance.removeEventListener("timeupdate",Ms,!1))};this.videoInstance.addEventListener("timeupdate",Ms,!1)}async play(_s="",Ss=0,Ms){return _s=_s||"",Ms&&!_s?(this.currentTime&&(this.videoInstance.currentTime=Ss),this.videoInstance.duration=Ms,this.videoUrl="",this.videoInstance.play(),!0):_s?(console.log("play",_s,this.videoUrl),_s===this.videoUrl?(this.videoInstance.currentTime=Ss,await this.videoInstance.play(),!0):(await this.update(_s),this.videoInstance.pause(),await new Promise(Cs=>setTimeout(async()=>{this.videoInstance.currentTime=Ss,await this.videoInstance.play(),Cs(!0)},20)))):(this.videoUrl?await this.videoInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.videoInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor(ga,_s=!0,Ss={}){il(this,"videoAgentMesh");il(this,"scene",new Scene);il(this,"camera",new OrthographicCamera(-240,240,135,-135));il(this,"renderer",new WebGLRenderer({alpha:!0}));il(this,"container");il(this,"run",()=>{var _s;const ga=this.renderer.domElement;!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),(_s=this.videoAgentMesh.videoUrl)!=null&&_s.endsWith(".mp4")?ga.style.display!=="block"&&(ga.style.display="block"):ga.style.display!=="none"&&(ga.style.display="none"),requestAnimationFrame(this.run)});il(this,"dispose",()=>{var ga;(ga=this.videoAgentMesh)==null||ga.dispose()});this.container=ga,this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Ms={width:ga.offsetWidth,height:ga.offsetHeight},Cs=this.renderer.domElement;Cs.classList.add("VideoAgent-canvas"),this.renderer.setSize(Ms.width*window.devicePixelRatio,Ms.height*window.devicePixelRatio),Cs.setAttribute("style",`width: ${Ms.width}px;height: ${Ms.height}px;`),this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,Ss),_s&&(ga.append(Cs),this.scene.add(this.videoAgentMesh),this.run())}}function VideoAgent(ca){const ga=react$1.exports.useRef(null),_s=useController();return react$1.exports.useEffect(()=>{if(!ga.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(_s.videoAgentScene){console.warn('"VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4 ...');return}const Ss=new VideoAgentScene(ga.current,!0,ca.options||{});return _s.videoAgentScene=Ss,()=>{var Ms;_s.dispose(),(Ms=_s.videoAgentScene)==null||Ms.dispose()}},[]),jsx("div",{className:"VideoAgent",onClick:()=>{!ca.onClick||ca.onClick()},ref:ga,children:jsx("div",{className:"VideoAgent-play"})})}function BgMusic(){const ca=useController(),ga=react$1.exports.useRef(null),_s=react$1.exports.useCallback(()=>{ga.current&&(clearTimeout(ga.current),ga.current=null)},[]);return react$1.exports.useEffect(()=>{const Ss=new Audio;Ss.setAttribute("id","vreo-singleton-bgmusic"),Ss.style.display="none",Ss.setAttribute("playsinline","true"),Ss.loop=!0,document.body.append(Ss);const Ms=Cs=>{const{start:Ts,end:Is}=Cs,{url:Bs}=Cs.data;Ss.src=Bs;const Ps=()=>{Ss.play()};Ss.addEventListener("canplaythrough",Ps),_s();const Ls=()=>{Ss.pause(),Ss.currentTime=0,Ss.src="",_s(),Ss.removeEventListener("canplaythrough",Ps)},Rs=Is-Ts||5e3;ga.current=setTimeout(()=>{Ls()},Rs),ca.once("paused",()=>{Ls()})};return ca.on(VreoKeyframeEnum.BgMusic,Ms),()=>{ca.off(VreoKeyframeEnum.BgMusic,Ms),document.body.removeChild(Ss),_s()}}),jsx(Fragment,{})}const AppView=observer(({controller:ca})=>{var ga,_s;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!ca.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[jsx(VideoAgent,{onClick:()=>{ca.isAudio||(ca.playing?ca.setPlaying(!1):ca.setPlaying(!0))},options:((ga=ca.configs)==null?void 0:ga.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(_s=ca.configs)==null?void 0:_s.customPanelChildren]})})});function App(){const ca=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:ca})]})}const DrawerView=observer(({controller:ca})=>{var Ss;const ga="400px",_s=(()=>{var Cs;const Ms=(Cs=ca.drawerConfig)==null?void 0:Cs.height;return Ms?typeof Ms=="number"?Ms+"px":Ms:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":ca.drawerConfig&&ca.drawerConfig.content}),onClick:()=>ca.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:_s,maxHeight:ga},children:((Ss=ca.drawerConfig)==null?void 0:Ss.content)||""})})});function Drawer(){const ca=useController();return jsx(DrawerView,{controller:ca})}const PopUpView=observer(({controller:ca})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":ca.popUp}),onClick:()=>ca.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:ca.popUp||""})}));function PopUp(){const ca=useController();return jsx(PopUpView,{controller:ca})}class Player extends Subscribe{constructor(_s,Ss={}){var Ms;super();il(this,"$five");il(this,"controller");il(this,"configs");if(this.controller=new Controller,this.$five=this.controller.$five=_s,!Ss.containter){const Cs=document.getElementById("vreo-app")||document.createElement("div");reactDom.exports.unmountComponentAtNode(Cs),Cs.setAttribute("id","vreo-app"),Ss.containter=Cs;const Ts=(Ms=_s.getElement())==null?void 0:Ms.parentNode;Ts?Ts.append(Cs):document.body.append(Cs)}this.configs=Object.freeze(Object.assign({keyframeMap:{}},Ss)),this.controller.configs=this.configs,reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Cs,Ts)=>jsx(Cs,{subscribe:{on:(Is,Bs)=>this.on(Is,Bs),once:(Is,Bs)=>this.once(Is,Bs),off:(Is,Bs)=>this.off(Is,Bs)},five:_s},Ts))]}),Ss.containter),reaction(()=>this.controller.ended,Cs=>{Cs&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Cs=>{this.controller.ended||this.emit(Cs?"playing":"paused")})}async load(_s,Ss=0,Ms=!1,Cs=!1){var Ts,Is,Bs,Ps;if(Cs&&(_s=JSON.parse(JSON.stringify(_s))),this.controller.visible||(this.controller.setVisible(!0),await new Promise(Ls=>{setTimeout(()=>Ls(!0),500)})),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=_s,(Ts=this.controller.videoInstance)==null||Ts.pause(),this.$five.imageOptions.size&&((Is=this.configs.imageOptions)==null?void 0:Is.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Ms||Ms===void 0&&this.configs.autoPreload){const Ls=_s.keyframes.filter(Os=>!(Os.type!==VreoKeyframeEnum.CameraMovement||Os.data.panoIndex===void 0)).reduce((Os,Fs)=>{const Vs=Fs.data.panoIndex;return Os[Vs]||(Os[Vs]=!0),Os},{}),Rs=Object.keys(Ls);for(let Os=0;Os<Rs.length;Os++)await this.$five.preloadPano(Number(Rs[Os]))}return this.emit("loaded",_s),this.controller.emit("loaded",_s),(Bs=this.controller.videoAgentScene)!=null&&Bs.videoAgentMesh.videoInstance&&(this.controller.videoAgentScene.videoAgentMesh.videoInstance.currentTime=Ss/1e3),await((Ps=this.controller.videoAgentScene)==null?void 0:Ps.videoAgentMesh.play(_s.video.url,Ss/1e3,_s.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((Ls,Rs)=>this.emit(Ls,Rs)),!0}get paused(){return!this.controller.playing}play(_s){return this.controller.playing||(_s&&this.controller.videoInstance&&(this.controller.videoInstance.currentTime=_s/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setPlaying(!0)),!0}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.pause(),this.controller.dispose(),this.configs.containter&&reactDom.exports.unmountComponentAtNode(this.configs.containter)}}console.log(`

\u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
\u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
\u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
\u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 

`);var _default="";export{CSS3DRenderPlugin as C,FiveCanvas as F,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,createFiveProvider as c,Raycaster as d,Fragment as e,reactDom as f,jsx as j,parseWork as p,react$1 as r,tweenProgress as t,unsafe__useFiveInstance as u};
